---
title: Медиа-службы Azure - Сигнализация Timed Metadata в потоковом видеосвязи
description: В этой спецификации описаны методы сигнализации, приуроченные метаданные при глотании и потоковой передаче в медиаслужбы Azure. Это включает в себя поддержку общих сигналов метаданных (ID3), а также сигнализации SCTE-35 для вставки рекламы и сигнализации состояния сращивания.
services: media-services
documentationcenter: ''
author: johndeu
manager: femila
editor: johndeu
ms.assetid: 265b94b1-0fb8-493a-90ec-a4244f51ce85
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/22/2019
ms.author: johndeu
ms.openlocfilehash: 551fb0cb9f3745a62d5d84f2c4878bbbbe5ad9a0
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79137328"
---
# <a name="signaling-timed-metadata-in-live-streaming"></a>Сигнализация метаданных времени в потоковой трансляции 

Последнее обновление: 2019-08-22

### <a name="conformance-notation"></a>Замечание о соответствии

Ключевые слова "НЕОБХОДИМО" ("ДОЛЖНО"), "НЕДОПУСТИМО", "ТРЕБУЕТСЯ", "НУЖНО", "НЕ ПОЗВОЛЯЕТСЯ", "СЛЕДУЕТ" ("ДОЛЖНО"), "НЕ СЛЕДУЕТ", "РЕКОМЕНДУЕТСЯ", "ВОЗМОЖНО" и "НЕОБЯЗАТЕЛЬНО" в данном документе интерпретируются согласно описанию в документе RFC 2119.

## <a name="1-introduction"></a>1. Введение 

Для того, чтобы сигнализировать о вставке рекламы или пользовательских событий метаданных на игрока-клиента, вещательные компании часто используют временные метаданные, встроенные в видео. Для включения этих сценариев Media Services обеспечивает поддержку переноса временных метаданных из точки, где попадает поток потокового канала в клиентское приложение.
В этой спецификации описано несколько режимов, которые поддерживаются Службами мультимедиа для временных метаданных в потоковых сигналах в реальном времени.

1. Сигнализирует о том, что соответствует стандартам, изложенным в «SCTE-35», «SCTE-214-1», «SCTE-214-3» и «RFC8216»

2. Сигнализирует о том, что соответствует устаревшей спецификации «Adobe-Primetime» для сигнализации рекламы RTMP.
   
3. Общий режим отображаемого метаданных для сообщений, которые **НЕ** являются «SCTE-35» и могут нести «ID3v2» или другие пользовательские схемы, определенные разработчиком приложения.

## <a name="11-terms-used"></a>1.1 Используемые термины

| Термин                | Определение                                                                                                                                                                                                                                    |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Объявление Перерыв            | Место или момент времени, где одна или несколько объявлений могут быть запланированы для доставки; так же, как воспользоваться и размещения возможность.                                                                                                                     |
| Служба принятия решений по рекламе | внешний сервис, который решает, какие рекламы (ы) и продолжительности будут показаны пользователю. Услуги, как правило, предоставляются партнером и находятся вне сферы действия этого документа.                                                                    |
| Cue                 | Указание времени и параметров предстоящего рекламного перерыва. Обратите внимание, что сигналы могут указывать на ожидающий переключения на перерыв в рекламе, до переключения на следующее объявление в рамках рекламного перерыва и ожидающего переключения от рекламного перерыва к основному содержимому.           |
| Упаковщик            | Медиа-сервисы Azure "Streaming Endpoint" предоставляют динамические возможности упаковки для DASH и HLS и называются "Пакетом" в медиа-индустрии.                                                                              |
| Время презентации   | Время, когда событие демонстрируется зрителю. Это момент на временной шкале мультимедийного содержимого, когда зритель увидит событие. Например, время презентации командного сообщения SCTE-35 splice_info() — splice_time(). |
| Время получения        | Время поступления сообщения о событии. Обычно это время отличается от времени презентации события, так как сообщения о событии отправляются до его начала.                                                    |
| Разреженная дорожка        | Дорожка мультимедиа, которая не является непрерывной и синхронизируется по времени с родительской или контрольной дорожкой.                                                                                                                                                  |
| Исходный домен              | Служба потоковой передачи мультимедиа Azure.                                                                                                                                                                                                             |
| Приемник канала        | Служба потоковой передачи мультимедиа в реальном времени Azure.                                                                                                                                                                                                        |
| HLS                 | Протокол Apple HTTP Live Streaming.                                                                                                                                                                                                            |
| DASH                | Динамическая адаптивная потоковая передача по протоколу HTTP.                                                                                                                                                                                                          |
| Smooth              | Протокол Smooth Streaming.                                                                                                                                                                                                                     |
| MPEG2-TS            | Транспортные потоки MPEG-2.                                                                                                                                                                                                                      |
| RTMP                | Протокол мультимедиа в режиме реального времени.                                                                                                                                                                                                                 |
| uimsbf              | Целое число без знака, наиболее значимый бит указан первым.                                                                                                                                                                                                 |

---

## <a name="12-normative-references"></a>1.2 Нормативные ссылки

Следующие документы содержат положения, которые, по ссылке в этом тексте, представляют собой положения этого документа. Все документы подлежат пересмотру органами по стандартизации, и читателям рекомендуется изучить возможность применения последних изданий документов, перечисленных ниже. Читателям также напоминают, что новые выпуски упомянутых документов могут быть несовместимы с этой версией спецификации метаданных для Azure Media Services.


| Standard          | Определение                                                                                                                                                                                                     |
| ----------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| (Adobe-Primetime) | [Прайм-тайм Цифровая программа Вставка Сигнализация Спецификация 1.2](https://www.adobe.com/content/dam/acom/en/devnet/primetime/PrimetimeDigitalProgramInsertionSignalingSpecification.pdf)                       |
| (Adobe-Flash-AS)  | [FLASH ActionScript Язык Ссылка](https://help.adobe.com/archive/en_US/as2/flashlite_2.x_3.x_aslr.pdf)                                                                                                   |
| (AMF0)            | ["Формат сообщения действия AMF0"](https://download.macromedia.com/pub/labs/amf/amf0_spec_121207.pdf)                                                                                                              |
| (DASH-IF-IOP)     | DASH Промышленности Форум Интероп Руководство V 4.2[https://dashif-documents.azurewebsites.net/DASH-IF-IOP/master/DASH-IF-IOP.html](https://dashif-documents.azurewebsites.net/DASH-IF-IOP/master/DASH-IF-IOP.html)    |
| (HLS-TMD)         | Приурочено Метаданные для http Live Streaming -[https://developer.apple.com/streaming](https://developer.apple.com/streaming)                                                                                        |
| (CMAF-ID3)        | [Время Метаданных в формате общего медиа-приложения (CMAF)](https://github.com/AOMediaCodec/id3-emsg)                                                                                                        |
| (ID3v2)           | ID3 Tag версия 2.4.0[http://id3.org/id3v2.4.0-structure](http://id3.org/id3v2.4.0-structure)                                                                                                                |
| (ISO-14496-12)    | ISO/IEC 14496-12: Часть 12 формат файла базового медиа ISO, FourthEdition 2012-07-15                                                                                                                                 |
| (МПЕДДАШ)        | Информационные технологии -- Динамическая адаптивная потоковая передача по HTTP (DASH) -- Часть 1: Описание презентации мультимедиа и форматы сегмента. Май 2014 года. Опубликовано. URL-адрес: https://www.iso.org/standard/65274.html         |
| (MPEGCMAF)        | Информационные технологии -- Формат мультимедийного приложения (MPEG-A) -- Часть 19: Общий формат медиа-приложений (CMAF) для сегментированных носителей. Январь 2018 года. Опубликовано. URL-адрес: https://www.iso.org/standard/71975.html |
| (MPEGCENC)        | Информационные технологии -- Системные технологии MPEG -- Часть 7: Общее шифрование в файлах формата базового медиафайла ISO. Февраль 2016 года. Опубликовано. URL-адрес: https://www.iso.org/standard/68042.html                   |
| (MS-SSTR)         | ["Протокол плавной потоковой передачи Microsoft", 15 мая 2014 г.](https://docs.microsoft.com/openspecs/windows_protocols/ms-sstr/8383f27f-7efe-4c60-832a-387274457251)                                                     |
| (MS-SSTR-Ingest)  | [Службы мультимедиа Azure Фрагментированные спецификации MP4 Live Ingest](https://docs.microsoft.com/azure/media-services/media-services-fmp4-live-ingest-overview)                                                      |
| (RFC8216)         | Ф. Пантос, эд.; У. Мэй. HTTP Прямая трансляция. Август 2017 года. Информационных. [https://tools.ietf.org/html/rfc8216](https://tools.ietf.org/html/rfc8216)                                                            |
| (RFC4648)         | Кодирование данных Base16, Base32 и Base64 -[https://tools.ietf.org/html/rfc4648](https://tools.ietf.org/html/rfc4648)                                                                                     |
| (RTMP)            | ["Протокол обмена сообщениями в режиме реального времени", 21 декабря 2012 г.](https://www.adobe.com/devnet/rtmp.html)                                                                                                            |
| (SCTE-35-2019)    | SCTE 35: 2019 - Цифровая программа Вставка Cueing Сообщение для кабеля -https://www.scte.org/SCTEDocs/Standards/ANSI_SCTE%2035%202019r1.pdf                                                                       |
| (SCTE-214-1)      | SCTE 214-1 2016 - MPEG DASH для IP-услуг кабельного телевидения Часть 1: MPD ограничения и расширения                                                                                                                 |
| (SCTE-214-3)      | SCTE 214-3 2015 MPEG DASH для IP-услуг кабельного телевидения Часть 3: DASH/FF Профиль                                                                                                                                  |
| (SCTE-224)        | SCTE 224 2018r1 - Интерфейс планирования событий и уведомления                                                                                                                                                  |
| (SCTE-250)        | API управления событиями и сигнализацией (ESAM)                                                                                                                                                                      |

---


## <a name="2-timed-metadata-ingest"></a>2. Время Метаданные Ingest

Службы мультимедиа Azure поддерживают метаданные в режиме реального времени как для протоколов «RTMP», так и для плавной потоковой передачи протоколов MS-SSTR-Ingest. Метаданные в реальном времени могут использоваться для определения пользовательских событий с вашими уникальными пользовательскими схемами (JSON, Binary, XML), а также отраслевыми форматами, такими как ID3 или SCTE-35 для рекламного сигнализации в потоке вещания. 

В этой статье приводится подробная информация о том, как отправлять пользовательские сигналы метаданных с помощью поддерживаемых протоколов dataest Media Services. В статье также объясняется, как манифесты для HLS, DASH и Smooth Streaming украшены сигналами метаданных, а также как они перевозятся в диапазоне, когда содержимое доставляется с использованием cmAF (фрагменты MP4) или сегментов Transport Stream (TS) для HLS. 

Общие сценарии использования для приуроченметаданных включают в себя:

 - СИГНАЛы рекламы SCTE-35 для запуска перерывов рекламы в прямом эфире или линейной трансляции
 - Пользовательские метаданные ID3, которые могут вызвать события в клиентском приложении (браузер, iOS или Android)
 - Пользовательские определенные метаданные JSON, Binary или XML для запуска событий в клиентском приложении
 - Телеметрия от живого кодера, IP-камеры или дрона
 - События с IP-камеры, как движение, распознавание лиц и т.д.
 - Информация о географическом положении с камеры действия, беспилотника или движущегося устройства
 - Текст песни
 - Границы программы на линейном прямом эфире
 - Изображения или увеличенные метаданные, которые будут отображаться в прямом эфире
 - Спортивные баллы или информация о игровых часах
 - Интерактивные рекламные пакеты, которые будут отображаться вместе с видео в браузере
 - Викторины или опросы
  
Службы мультимедиа Azure Live Events and Packager способны принимать эти временные сигналы метаданных и преобразовывать их в поток метаданных, которые могут достигать клиентских приложений с помощью протоколов на основе стандартов, таких как HLS и DASH.


## <a name="21-rtmp-timed-metadata"></a>2.1 RTMP Время Метаданные

Протокол «RTMP» позволяет отправлять временные сигналы метаданных для различных сценариев, включая пользовательские метаданные и сигналы рекламы SCTE-35. 

Рекламные сигналы (сообщения cue) отправляются в виде сигнальных сообщений , встроенных в поток «RTMP». Сообщения сигнала могут быть отправлены когда-то до фактического события или сигнала splice ad должно произойти. Для поддержки этого сценария фактическая отметка времени представления события отправляется в сообщении сигнала. Чтобы получить дополнительные сведения, ознакомьтесь с [AMF0].

Следующие команды «AMF0» поддерживаются службами мультимедиа Azure для RTMP:

- **onUserDataEvent** - используется для пользовательских метаданных или метаданных ID3v2
- **onAdCue** - используется в первую очередь для сигнализации возможности размещения рекламы в прямом эфире. Поддерживаются две формы сигнала: простой режим и режим «SCTE-35». 
- **onCuePoint** - поддерживается некоторыми натерритории аппаратных кодееров, как Elemental Live кодер, для сигнализации "SCTE35" сообщения. 
  

В следующей таблице описывается формат полезной нагрузки сообщения AMF, которую Службы мультимедиа будут глотать как для «простых», так и для «SCTE35» режимов сообщений.

Название сообщения «AMF0» может быть использовано для дифференциации нескольких потоков событий одного и того же типа.  Как для сообщений «SCTE-35», так и для «простого» режима, название сообщения AMF должно быть «onAdCue», как это требуется в спецификации «Adobe-Primetime».  Любые поля, не перечисленные ниже SHALL, игнорируются службами мультимедиа Azure при входной.

## <a name="211-rtmp-with-custom-metadata-using-onuserdataevent"></a>2.1.1 RTMP с пользовательскими метаданными с использованием "onUserDataEvent"

Если вы хотите предоставить пользовательские каналы метаданных из вашего восходящего кодера, IP-камеры, дрона или устройства с помощью протокола RTMP, используйте тип команды сообщений данных "onUserDataEvent".

Команда данных **"onUserDataEvent"** должна нести полезную нагрузку сообщения со следующим определением, которое будет записано Службой мультимедиа и упаковано в формат файла в диапазоне, а также манифесты для HLS, DASH и Smooth Streaming.
Рекомендуется отправлять сообщения с метаданными времени не чаще, чем раз в 0,5 секунды (500 мс) или могут возникнуть проблемы со стабильностью в прямом эфире. Каждое сообщение может агрегировать метаданные из нескольких кадров, если вам нужно предоставить метаданные уровня кадра. При отправке многобитных потоков рекомендуется также предоставлять метаданные на одном битрате только для уменьшения пропускной способности и предотвращения вмешательства в обработку видео/аудио. 

Полезная нагрузка для **"onUserDataEvent"** должна быть сообщением формата EventStream XML. Это позволяет легко пройти в пользовательских определенных схемах, которые могут быть перевезены в 'emsg' полезных нагрузок в диапазоне для CMAF "MPEGCMAF" содержание, которое поставляется по протоколам HLS или DASH. Каждое сообщение DASH Event Stream содержит схемуIdUri, которая функционирует как идентификатор схемы сообщений URN и определяет полезную нагрузку сообщения. Некоторые схемы,https://aomedia.org/emsg/ID3такие как « id3v2» или **урна:scte:scte35:2013:bin** для «SCTE-35» стандартизированы отраслевыми консорциумами для совместимости. Любой поставщик приложений может определить свою собственную пользовательскую схему, используя URL-адрес, который они контролируют (принадлежит домену) и может предоставить спецификацию по этому URL, если они выберут. Если у игрока есть обработчик для определенной схемы, то это единственный компонент, который должен понимать полезную нагрузку и протокол.

Схема полезной нагрузки EventStream XML «MPEG-DASH» определяется как (выдержка из DASH ISO-IEC-23009-1-3rd Edition). Обратите внимание, что в настоящее время поддерживается только один "EventType" на "EventStream". Только первый элемент **события** будет обработан, если в **EventStream**предусмотрено несколько событий.

```xml
  <!-- Event Stream -->
  <xs:complexType name="EventStreamType">
    <xs:sequence>
      <xs:element name="Event" type="EventType" minOccurs="0" maxOccurs="unbounded"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute ref="xlink:href"/>
    <xs:attribute ref="xlink:actuate" default="onRequest"/>
    <xs:attribute name="schemeIdUri" type="xs:anyURI" use="required"/>
    <xs:attribute name="value" type="xs:string"/>
    <xs:attribute name="timescale" type="xs:unsignedInt"/>
  </xs:complexType>
  <!-- Event  -->
  <xs:complexType name="EventType">
    <xs:sequence>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute name="presentationTime" type="xs:unsignedLong" default="0"/>
    <xs:attribute name="duration" type="xs:unsignedLong"/>
    <xs:attribute name="id" type="xs:unsignedInt"/>
    <xs:attribute name="contentEncoding" type="ContentEncodingType"/>
    <xs:attribute name="messageData" type="xs:string"/>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
```


### <a name="example-xml-event-stream-with-id3-schema-id-and-base64-encoded-data-payload"></a>Example XML Event Stream with ID3 schema ID and base64-encoded data payload.  
```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <EventStream schemeIdUri="https://aomedia.org/emsg/ID3">
         <Event contentEncoding="Base64">
          -- base64 encoded ID3v2 full payload here per [CMAF-TMD] --
         </Event>
   <EventStream>
```

### <a name="example-event-stream-with-custom-schema-id-and-base64-encoded-binary-data"></a>Пример Event Stream с пользовательским идентификатором схемы и базовыми 64-кодированными двоичными данными  
```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <EventStream schemeIdUri="urn:example.org:custom:binary">
         <Event contentEncoding="Base64">
          -- base64 encoded custom binary data message --
         </Event>
   <EventStream>
```

### <a name="example-event-stream-with-custom-schema-id-and-custom-json"></a>Пример Event Stream с пользовательским идентификатором схемы и пользовательским JSON  
```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <EventStream schemeIdUri="urn:example.org:custom:JSON">
         <Event>
          [
            {"key1" : "value1"},
            {"key2" : "value2"}
          ]
         </Event>
   <EventStream>
```

### <a name="built-in-supported-scheme-id-uris"></a>Встроенные поддерживаемые URI системы
| Схема ID URI                 | Описание                                                                                                                                                                                                                                          |
| ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| https:\//aomedia.org/emsg/ID3 | Описывает, как метаданные ID3v2 могут переноситься в виде приуроченных метаданных в фрагментированном MP4, совместимом cmAF. Для получения дополнительной информации [см. Timed Metadata в формате общего медиа-приложения (CMAF)](https://github.com/AOMediaCodec/id3-emsg) |

### <a name="event-processing-and-manifest-signaling"></a>Обработка событий и явная сигнализация

При получении действительного события **«onUserDataEvent»** службы Azure Media будут искать действительную полезную нагрузку XML, которая соответствует EventStreamType (определяется в «MPEGDASH»), разбирать полезную нагрузку XML и преобразовывать ее в «MPEGCMAF» MP4 фрагмент 'emsg' версия 1 для хранения в живом архиве и передачи в Пакет медиа-услуг.   Packager обнаружит коробку 'emsg' в прямом эфире и:

- а) «динамически упаковывает» его в сегменты ТС для доставки клиентам HLS в соответствии со спецификацией метаданных HLS timed (HLS-TMD), или
- b) передать его для доставки в фрагментах CMAF через HLS или DASH, или 
- c) преобразовать его в редкий сигнал трека для доставки через гладкую потоковую передачу «MS-SSTR».

В дополнение к формату cmAF или TS PES в диапазоне в диапазоне пакетов для HLS, манифесты для DASH (MPD) и Smooth Streaming будут содержать ссылку на потоки событий в диапазоне (также известный как редкий поток трека в Smooth Streaming). 

Отдельные события или их полезная нагрузка данных НЕ выделяются непосредственно в манифестах HLS, DASH или Smooth. 

### <a name="additional-informational-constraints-and-defaults-for-onuserdataevent-events"></a>Дополнительные информационные ограничения и по умолчанию для событий onUserDataEvent

- Если шкала времени не установлена в элементе EventStream, шкала времени RTMP 1 кГц используется по умолчанию
- Доставка сообщения onUserDataEvent ограничена раз в 500 мс максимумом. Если вы отправляете события чаще, это может повлиять на пропускную способность и стабильность живого канала

## <a name="212-rtmp-ad-cue-signaling-with-onadcue"></a>2.1.2 RTMP ad cue, сигнализирующее с "onAdCue"

Службы мультимедиа Azure могут слушать и отвечать на несколько типов сообщений «AMF0», которые могут быть использованы для сигнализации различных синхронизированных метаданных в реальном времени в прямом эфире.  Спецификация «Adobe-Primetime» определяет два типа бита, называемых «простым» и «SCTE-35». Для "простого" режима Media Services поддерживает одно сообщение AMF cue под названием "onAdCue" с помощью полезной нагрузки, которая соответствует таблице ниже, определенной для сигнала "Простой режим".  

В следующем разделе показана полезная нагрузка RTMP "простого" режима, которая может быть использована для сигнала базового рекламного сигнала "spliceOut", который будет пронесен в манифест клиента для HLS, DASH и Microsoft Smooth Streaming. Это очень полезно для сценариев, где клиент не имеет сложного SCTE-35 на основе рекламного сигнала развертывания или вставки системы, и использует основной локтевой кодер для отправки сигнала сообщение через API. Обычно встроенный кодер поддерживает API на основе REST для запуска этого сигнала, который также будет "сращиванием" видеопотока, вставив кадр IDR в видео и запустив новый GOP.

## <a name="213--rtmp-ad-cue-signaling-with-onadcue---simple-mode"></a>2.1.3 RTMP ad cue, сигнализирующая с "onAdCue" - Простой режим

| Имя поля | Тип поля | Обязательно? | Описания                                                                                                                                                                                                                                                                        |
| ---------- | ---------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| type       | Строка     | Обязательно  | Сообщение о событии.  Должно иметь значение SpliceOut, чтобы иметь возможность назначить соединение в простом режиме.                                                                                                                                                                                                         |
| идентификатор         | Строка     | Обязательно  | Уникальный идентификатор, описывающий соединение или сегмент. Определяет экземпляр сообщения.                                                                                                                                                                                       |
| длительность   | Number     | Обязательно  | Длительность соединения. Единицы измерения — доли секунды.                                                                                                                                                                                                                           |
| elapsed    | Number     | Необязательный  | Если сигнал повторяется для поддержки настройки, это поле должно отображать количество времени презентации, которое прошло с момента начала соединения. Единицы измерения — доли секунды. В простом режиме это значение не должно превышать первоначальную длительность соединения. |
| time       | Number     | Обязательно  | Должно соответствовать времени соединения в рамках времени презентации. Единицы измерения — доли секунды.                                                                                                                                                                                                |

---
 
#### <a name="example-mpeg-dash-manifest-output-when-using-adobe-rtmp-simple-mode"></a>Пример MPEG DASH проявляется выход при использовании Adobe RTMP простой режим

Смотрите пример [3.3.2.1 MPEG DASH .mpd EventStream с помощью простого режима Adobe](#3321-example-mpeg-dash-mpd-manifest-signaling-of-rtmp-streaming-using-adobe-simple-mode)

Смотрите пример [3.3.3.1 МАНИФЕСТ DASH с одним периодом и простым режимом Adobe](#3331-example-mpeg-dash-manifest-mpd-with-single-period-eventstream-using-adobe-simple-mode-signals)

#### <a name="example-hls-manifest-output-when-using-adobe-rtmp-simple-mode"></a>Пример HLS манифест вывода при использовании Adobe RTMP простой режим

Смотрите пример [3.2.2 HLS манифест с использованием простого режима Adobe и тега EXT-X-CUE](#322-apple-hls-with-adobe-primetime-ext-x-cue-legacy)

## <a name="214-rtmp-ad-cue-signaling-with-onadcue---scte-35-mode"></a>2.1.4 RTMP ad cue сигнала с "onAdCue" - режим SCTE-35

Когда вы работаете с более продвинутым рабочим процессом производства вещания, который требует полного сообщения о полезной нагрузке SCTE-35, который будет донесен до HLS или DASH манифеста, лучше всего использовать "SCTE-35 Mode" спецификации "Adobe-Primetime".  Этот режим поддерживает сигналы SCTE-35 в полосе, отправляемые непосредственно в наемный живой кодер, который затем кодирует сигналы в поток RTMP с помощью "режима SCTE-35", указанного в спецификации "Adobe-Primetime". 

Обычно сообщения SCTE-35 могут отображаться только в входных данных MPEG-2 (TS) на предварительном кодере. Проконсультируйтесь с производителем кодера для получения подробной информации о том, как настроить транспортный поток, содержащий SCTE-35, и включить его для прохода к RTMP в режиме Adobe SCTE-35.

В этом сценарии следующая полезная нагрузка должна быть отправлена из предварительного кодера с использованием типа сообщения **"onAdCue"** (AMF0).

| Имя поля | Тип поля | Обязательно? | Описания                                                                                                                                                                                                                                                                                                                                                                                                        |
| ---------- | ---------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| cue        | Строка     | Обязательно  | Сообщение о событии.  Для сообщений «SCTE-35» это должно быть базовымбичным splice_info_section (RFC4648) для отправки сообщений клиентам HLS, Smooth и Dash.                                                                                                                                                                                                                               |
| type       | Строка     | Обязательно  | URN или URL-адрес, определяющий схему сообщения. Для сообщений «SCTE-35» это **должно** быть **«scte35»** для того, чтобы сообщения отправлялись клиентам HLS, Smooth и Dash в соответствии с «Adobe-Primetime». Дополнительно, URN "урна:scte:scte35:2013:bin" также может быть использован для сигнализации сообщения «SCTE-35».                                                                                                        |
| идентификатор         | Строка     | Обязательно  | Уникальный идентификатор, описывающий соединение или сегмент. Определяет экземпляр сообщения.  Сообщения с одинаковой семантикой должны иметь одно и то же значение.                                                                                                                                                                                                                                                       |
| длительность   | Number     | Обязательно  | Длительность события или сегмента добавления рекламы (если она известна). Если неизвестно, значение **должно** быть 0.                                                                                                                                                                                                                                                                                                                    |
| elapsed    | Number     | Необязательный  | Если сигнал рекламы [SCTE-35] повторяется для настройки, это поле должно отображать количество времени презентации, которое прошло с момента начала соединения. Единицы измерения — доли секунды. В режиме [SCTE-35] это значение может превышать исходную указанную длительность соединения или сегмента.                                                                                                                   |
| time       | Number     | Обязательно  | Время презентации события или вставки рекламы.  Время и продолжительность презентации **должны** согласовываться с точками доступа Stream (SAP) типа 1 или 2, как это определено в приложении ISO-14496-12. Для hlS egress время и продолжительность **должны** согласовываться с границами сегмента. Время презентации и длительность различных сообщений о событии в одном потоке событий НЕ ДОЛЖНЫ перекрываться. Единицы измерения — доли секунды. |

---

#### <a name="example-mpeg-dash-mpd-manifest-with-scte-35-mode"></a>Пример MPEG DASH .mpd манифест с режимом SCTE-35
Смотрите [раздел 3.3.3.2 пример DASH манифест с SCTE-35](#3332-example-mpeg-dash-manifest-mpd-with-multi-period-eventstream-using-adobe-scte35-mode-signaling)

#### <a name="example-hls-manifest-m3u8-with-scte-35-mode-signal"></a>Пример HLS манифест .m3u8 с сигналом режима SCTE-35
[См. раздел 3.2.1.1 Пример HLS манифест с SCTE-35](#3211-example-hls-manifest-m3u8-showing-ext-x-daterange-signaling-of-scte-35)

## <a name="215-rtmp-ad-signaling-with-oncuepoint-for-elemental-live"></a>2.1.5 RTMP Объявление сигнализации с "onCuePoint" для элементарных Live

Элементарный en-premises En-coder поддерживает маркеры рекламы в сигнале RTMP. В настоящее время служба мультимедиа Azure поддерживает только тип маркера рекламы для RTMP .".  Это может быть включено в Настройках группы Adobe RTMP в настройках кодера Elemental Media Live или API, установив **"ad_markers"** на "onCuePoint".  Для получения подробной информации обратитесь к документации Elemental Live. Включение этой функции в группу RTMP будет передавать сигналы SCTE-35 на выходы Adobe RTMP, которые будут обрабатываться Azure Media Services.

Тип сообщения "onCuePoint" определяется в "Adobe-Flash-AS" и имеет следующую структуру полезной нагрузки при отправке из элементарного выхода RTMP Live.


| Свойство   | Описание                                                                                                                                                                                                                     |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| name       | Название SHOULD быть '**scte35**' по Elemental Live.                                                                                                                                                                              |
| time       | Время в секундах, в которых точка сигнала произошла в видеофайле во время временной шкалы                                                                                                                                           |
| type       | Тип точки сигнала должен быть установлен на "**событие**".                                                                                                                                                                             |
| параметры | Ассоциативный массив строк пары имен/значений, содержащий информацию из сообщения SCTE-35, включая id и продолжительность. Эти значения разбираются службами мультимедиа Azure и включаются в тег явного украшения. |


При использовании этого режима рекламного маркера вывод манифеста HLS аналогичен режиму Adobe "Простой".


#### <a name="example-mpeg-dash-mpd-single-period-adobe-simple-mode-signals"></a>Пример MPEG DASH MPD, один период, сигналы режима Adobe Simple

~~~ xml
<?xml version="1.0" encoding="utf-8"?>
<MPD xmlns="urn:mpeg:dash:schema:mpd:2011" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" profiles="urn:mpeg:dash:profile:isoff-live:2011" type="dynamic" publishTime="2020-01-07T18:58:03Z" minimumUpdatePeriod="PT0S" timeShiftBufferDepth="PT58M56S" availabilityStartTime="2020-01-07T17:44:47Z" minBufferTime="PT7S">
    <Period start="PT0S">
        <EventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="scte35" timescale="10000000">
            <Event presentationTime="1583497601000000" duration="300000000" id="1085900"/>
            <Event presentationTime="1583500901666666" duration="300000000" id="1415966"/>
            <Event presentationTime="1583504202333333" duration="300000000" id="1746033"/>
            <Event presentationTime="1583507502666666" duration="300000000" id="2076066"/>
            <Event presentationTime="1583510803333333" duration="300000000" id="2406133"/>
            <Event presentationTime="1583514104000000" duration="300000000" id="2736200"/>
            <Event presentationTime="1583517404666666" duration="300000000" id="3066266"/>
            <Event presentationTime="1583520705333333" duration="300000000" id="3396333"/>
            <Event presentationTime="1583524006000000" duration="300000000" id="3726400"/>
            <Event presentationTime="1583527306666666" duration="300000000" id="4056466"/>
            <Event presentationTime="1583530607333333" duration="300000000" id="4386533"/>
        </EventStream>
        <AdaptationSet id="1" group="1" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="video" mimeType="video/mp4" codecs="avc1.4D400C" maxWidth="256" maxHeight="144" startWithSAP="1">
            <InbandEventStream schemeIdUri="urn:mpeg:dash:event:2012" value="1"/>
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="scte35"/>
            <SegmentTemplate timescale="10000000" presentationTimeOffset="1583486678426666" media="QualityLevels($Bandwidth$)/Fragments(video=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(video=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="1583495318000000" d="64000000" r="34"/>
                    <S d="43000000"/>
                    <S d="21000000"/>
                    <!-- ... Truncated for brevity of sample-->

                </SegmentTimeline>
            </SegmentTemplate>
            <ProducerReferenceTime id="1583495318000000" type="0" wallClockTime="2020-01-07T17:59:10.957Z" presentationTime="1583495318000000"/>
            <Representation id="1_V_video_3750956353252827751" bandwidth="149952" width="256" height="144"/>
        </AdaptationSet>
        <AdaptationSet id="2" group="5" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="audio" mimeType="audio/mp4" codecs="mp4a.40.2" lang="en">
            <InbandEventStream schemeIdUri="urn:mpeg:dash:event:2012" value="1"/>
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="scte35"/>
            <Label>ambient</Label>
            <SegmentTemplate timescale="10000000" presentationTimeOffset="1583486678426666" media="QualityLevels($Bandwidth$)/Fragments(ambient=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(ambient=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="1583495254426666" d="64000000" r="35"/>
                    <S d="43093334"/>
                    <S d="20906666"/>
                    <!-- ... Truncated for brevity of sample-->

                </SegmentTimeline>
            </SegmentTemplate>
            <ProducerReferenceTime id="1583495254426666" type="0" wallClockTime="2020-01-07T17:59:04.600Z" presentationTime="1583495254426666"/>
            <Representation id="5_A_ambient_9125670592623055209" bandwidth="96000" audioSamplingRate="48000"/>
        </AdaptationSet>
    </Period>
</MPD>
~~~

#### <a name="example-hls-playlist-adobe-simple-mode-signals-using-ext-x-cue-tag-truncated--for-brevity"></a>Пример плейлиста HLS, режим Adobe Simple сигнализирует с помощью тега EXT-X-CUE (усеченный "..." для краткости)

В следующем примере показан выход из динамического пакета Media Services для потока RTMP, использующих сигналы Adobe "простого" режима, и устаревший тег EXT-X-CUE .Adobe-Primetime.  

~~~
#EXTM3U
#EXT-X-VERSION:8
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-TARGETDURATION:7
#EXT-X-INDEPENDENT-SEGMENTS
#EXT-X-PROGRAM-DATE-TIME:2020-01-07T17:44:47Z
#EXTINF:6.400000,no-desc
Fragments(video=1583486742000000,format=m3u8-aapl-v8)
#EXTINF:6.400000,no-desc
Fragments(video=1583486806000000,format=m3u8-aapl-v8)
...
#EXTINF:6.166667,no-desc
Fragments(video=1583487638000000,format=m3u8-aapl-v8)
#EXT-X-CUE:ID=95766,TYPE="SpliceOut",DURATION=30.000000,TIME=158348769.966667
#EXTINF:0.233333,no-desc
Fragments(video=1583487699666666,format=m3u8-aapl-v8)
#EXT-X-CUE:ID=95766,TYPE="SpliceOut",DURATION=30.000000,TIME=158348769.966667,ELAPSED=0.233333
#EXTINF:6.400000,no-desc
Fragments(video=1583487702000000,format=m3u8-aapl-v8)
#EXT-X-CUE:ID=95766,TYPE="SpliceOut",DURATION=30.000000,TIME=158348769.966667,ELAPSED=6.633333
#EXTINF:6.400000,no-desc
Fragments(video=1583487766000000,format=m3u8-aapl-v8)
#EXT-X-CUE:ID=95766,TYPE="SpliceOut",DURATION=30.000000,TIME=158348769.966667,ELAPSED=13.033333
#EXTINF:6.400000,no-desc
Fragments(video=1583487830000000,format=m3u8-aapl-v8)
#EXT-X-CUE:ID=95766,TYPE="SpliceOut",DURATION=30.000000,TIME=158348769.966667,ELAPSED=19.433333
#EXTINF:6.400000,no-desc
Fragments(video=1583487894000000,format=m3u8-aapl-v8)
#EXT-X-CUE:ID=95766,TYPE="SpliceOut",DURATION=30.000000,TIME=158348769.966667,ELAPSED=25.833333
#EXTINF:4.166667,no-desc
Fragments(video=1583487958000000,format=m3u8-aapl-v8)
#EXTINF:2.233333,no-desc
Fragments(video=1583487999666666,format=m3u8-aapl-v8)
#EXTINF:6.400000,no-desc
Fragments(video=1583488022000000,format=m3u8-aapl-v8)
...

~~~

### <a name="216-cancellation-and-updates"></a>2.1.6 Отмена и обновления

Сообщения можно отменить или обновить, отправив несколько сообщений с одинаковым временем и идентификатором презентации. Время и идентификатор презентации уникально идентифицируют событие, а последнее сообщение, полученное для конкретного времени презентации, которое соответствует ограничениям до начала просмотра, — это сообщение, в отношении которого выполняются действия. Обновленное событие заменяет любые сообщения, полученные ранее. Ограничение до начала просмотра — четыре секунды. Сообщения, полученные хотя бы на четыре секунды раньше времени презентации, будут обрабатываться.

## <a name="22-fragmented-mp4-ingest-smooth-streaming"></a>2.2. Прием фрагментированного MP4 (Smooth Streaming)

Обратитесь к «MS-SSTR-Ingest» для требований в прямом эфире. В следующих разделах содержатся сведения о получении метаданных времени презентации.  Метаданные представления в времени попадает в разреженный трек, который определяется как в Live Server Manifest Box (см. MS-SSTR) и в Кинобоксе ('moov').  

Каждый редкий фрагмент состоит из Box фрагмента фильма ('moof') и Media Data Box ('mdat'), где поле «mdat» является двоичным сообщением.

Для достижения кадровой точной вставки объявлений, кодер должен разделить фрагмент во время презентации, где сигнал должен быть вставлен.  Необходимо создать новый фрагмент, который начинается с недавно созданного кадра IDR, или Точек доступа потока (SAP) типа 1 или 2, как это определено в приложении ISO-14496-12. Это позволяет Azure Media Packager правильно генерировать манифест HLS и многопериодный манифест DASH, где начинается новый период в момент представления с точных сращок.

### <a name="221-live-server-manifest-box"></a>2.2.1. Поле манифеста сервера прямой передачи

Редкий трек **должен** быть объявлен в поле Live Server Manifest с входом ** \<в текстовый поток,\> ** и он **должен** иметь следующие атрибуты:

| **Имя атрибута** | **Тип поля** | **Обязательно?** | **Описание**                                                                                                                                                                                                              |
| ------------------ | -------------- | ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| systemBitrate      | Number         | Обязательно      | **Должно** быть "0", указывая трек с неизвестным, переменным битратом.                                                                                                                                                          |
| parentTrackName    | Строка         | Обязательно      | **Должно** быть имя родительского трека, к которому редкие коды времени трека совпадают. Родительская дорожка не может быть разреженной.                                                                             |
| manifestOutput     | Логическое        | Обязательно      | **Должен** быть "истинным", чтобы указать, что редкий трек будет встроен в Гладкий манифест клиента.                                                                                                                        |
| Subtype            | Строка         | Обязательно      | **Должен** быть четыре символа код "DATA".                                                                                                                                                                                  |
| Схема             | Строка         | Обязательно      | **Должен** быть URN или URL, определяющий схему сообщения. Для сообщений «SCTE-35» это **должно** быть «урна:scte:scte35:2013:bin» для того, чтобы сообщения были отправлены клиентам HLS, Smooth и Dash в соответствии с «SCTE-35». |
| trackName          | Строка         | Обязательно      | **Должно** быть имя разреженной дорожки. Имя трека может быть использовано для дифференциации нескольких потоков событий с одной и той же схемой. Каждый уникальный поток событий **должен** иметь уникальное название трека.                                |
| timescale          | Number         | Необязательный      | **Должен** быть шкала времени родительского трека.                                                                                                                                                                               |

---

### <a name="222-movie-box"></a>2.2.2. Поле фильма

Коробка фильмов ('moov') следует за Manifest Box Live Server как часть заголовка потока для разреженной дорожки.

Коробка 'moov' **SHOULD** содержит коробку **TrackHeaderBox ('tkhd')** в соответствии с определением в «ISO-14496-12» со следующими ограничениями:

| **Название поля** | **Тип поля**          | **Обязательно?** | **Описание**                                                                                                    |
| -------------- | ----------------------- | ------------- | ------------------------------------------------------------------------------------------------------------------ |
| длительность       | 64-разрядное целое число без знака | Обязательно      | **SHOULD** be 0, так как трек-бокс имеет ноль образцов, а общая продолжительность образцов в трек-боксе составляет 0. |

---

Коробка 'moov' **SHOULD** содержит **HandlerBox ('hdlr'),** как это определено в «ISO-14496-12» со следующими ограничениями:

| **Название поля** | **Тип поля**          | **Обязательно?** | **Описание**       |
| -------------- | ----------------------- | ------------- | --------------------- |
| handler_type   | 32-разрядное целое число без знака | Обязательно      | **SHOULD** быть "мета". |

---

Коробка 'stsd' **SHOULD** содержит коробку MetaDataSampleEntry с кодированием, как это определено в «ISO-14496-12».  Например, для сообщений SCTE-35 **кодирование** должно быть «scte».

### <a name="223-movie-fragment-box-and-media-data-box"></a>2.2.3. Поле фрагмента фильма и поле данных мультимедиа

Фрагменты sparse трека состоят из box фрагментов фильма ('moof') и Media Data Box ('mdat').

> [!NOTE]
> Для достижения кадровой точной вставки объявлений, кодер должен разделить фрагмент во время презентации, где сигнал должен быть вставлен.  Необходимо создать новый фрагмент, который начинается с недавно созданного кадра IDR, или Stream Access Points (SAP) типа 1 или 2, как это определено в приложении ISO-14496-12.
> 

Коробка MovieFragmentBox ('moof') **должна** содержать коробку **TrackFragmentExtendedHeaderBox ('uuid')** в соответствии со следующими полями:

| **Название поля**         | **Тип поля**          | **Обязательно?** | **Описание**                                                                                           |
| ---------------------- | ----------------------- | ------------- | --------------------------------------------------------------------------------------------------------- |
| fragment_absolute_time | 64-разрядное целое число без знака | Обязательно      | **Должно** быть время прибытия события. Это значение согласовывает сообщение с родительской дорожкой.           |
| fragment_duration      | 64-разрядное целое число без знака | Обязательно      | **Должно** быть продолжительность мероприятия. Длительность может иметь значение 0. Это значит, что длительность неизвестна. |

---


Коробка MediaDataBox ('mdat') **должна** иметь следующий формат:

| **Название поля**          | **Тип поля**                   | **Обязательно?** | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ----------------------- | -------------------------------- | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| version                 | 32-разрядное целое число без знака (uimsbf) | Обязательно      | Определяет формат содержимого коробки «mdat». Нераспознанные версии будут игнорироваться. Сейчас поддерживается только версия 1.                                                                                                                                                                                                                                                                                                                                                                      |
| идентификатор                      | 32-разрядное целое число без знака (uimsbf) | Обязательно      | Определяет экземпляр сообщения. Сообщения с одинаковой семантикой должны иметь одинаковое значение. Поэтому обработки любого поля сообщения о событии с одинаковым идентификатором будет достаточно.                                                                                                                                                                                                                                                                                                                            |
| presentation_time_delta | 32-разрядное целое число без знака (uimsbf) | Обязательно      | Сумма fragment_absolute_time, указанная в TrackFragmentExtendedHeaderBox, и presentation_time_delta **должно** быть время презентации события. Время и продолжительность презентации **должны** согласовываться с точками доступа Stream (SAP) типа 1 или 2, как это определено в приложении ISO-14496-12. Для hlS egress время и продолжительность **должны** согласовываться с границами сегмента. Время презентации и продолжительность различных сообщений событий в одном и том же потоке событий **не должны** пересекаться. |
| message                 | массив байтов;                       | Обязательно      | Сообщение о событии. Для сообщений «SCTE-35» сообщение является двоичным splice_info_section(). Для сообщений «SCTE-35» это **должно** быть splice_info_section() для того, чтобы сообщения были отправлены клиентам HLS, Smooth и Dash в соответствии с «SCTE-35». Для сообщений «SCTE-35» двоичная splice_info_section() — это полезная нагрузка коробки «mdat», и она **НЕ** кодируется.                                                                                                                     |

---


### <a name="224-cancellation-and-updates"></a>2.2.4. Отмена и обновления

Сообщения можно отменить или обновить, отправив несколько сообщений с одинаковым временем и идентификатором презентации.  Время и идентификатор презентации уникально идентифицируют событие. Последнее сообщение, полученное для конкретного времени презентации, которое соответствует ограничениям до начала просмотра, — это сообщение, в отношении которого выполняются действия. Обновленное сообщение заменяет любые сообщения, полученные ранее.  Ограничение до начала просмотра — четыре секунды. Сообщения, полученные хотя бы на четыре секунды раньше времени презентации, будут обрабатываться. 


## <a name="3-timed-metadata-delivery"></a>3. Доставка метаданных времени

Данные потока событий являются непрозрачными для служб мультимедиа. Службы мультимедиа просто передают три элемента информации между конечной точкой приема и клиента. Следующие свойства доставляются клиенту в соответствии с протоколом потоковой передачи SCTE-35 и/или клиентом:

1.  Схема — URN или URL-адрес, определяющий схему сообщения.
2.  Время презентации — время презентации события на временной шкале мультимедийного содержимого.
3.  Длительность — длительность события.
4.  Идентификатор — дополнительный уникальный идентификатор события.
5.  Сообщение — данные события.

## <a name="31-microsoft-smooth-streaming-manifest"></a>3.1 Манифест с плавной потоковой передачи Майкрософт  

Для получения подробной информации о том, как отформатировать редкий трек сообщений, обратитесь к разделичной обработке треков. Для сообщений «SCTE35» Платная потоковая передача будет вывести base64-кодированный splice_info_section() в редкий фрагмент.
StreamIndex **должен** иметь подтип "DATA", а пользовательские атрибуты **должны** содержать атрибут с именем "Схема" и "Урна:scte:scte35:2013:bin".

#### <a name="smooth-client-manifest-example-showing-base64-encoded-scte35-splice_info_section"></a>Гладкий пример манифеста клиента, показывающий базу64-закодированный «SCTE35» splice_info_section()
~~~ xml
<?xml version="1.0" encoding="utf-8"?>
<SmoothStreamingMedia MajorVersion="2" MinorVersion="0" TimeScale="10000000" IsLive="true" Duration="0"
  LookAheadFragmentCount="2" DVRWindowLength="6000000000">

  <StreamIndex Type="video" Name="video" Subtype="" Chunks="0" TimeScale="10000000"
    Url="QualityLevels({bitrate})/Fragments(video={start time})">
    <QualityLevel Index="0" Bitrate="230000"
      CodecPrivateData="250000010FC3460B50878A0B5821FF878780490800704704DC0000010E5A67F840" FourCC="WVC1"
      MaxWidth="364" MaxHeight="272"/>
    <QualityLevel Index="1" Bitrate="305000"
      CodecPrivateData="250000010FC3480B50878A0B5821FF87878049080894E4A7640000010E5A67F840" FourCC="WVC1"
      MaxWidth="364" MaxHeight="272"/>
    <c t="0" d="20000000" r="300" />
  </StreamIndex>
  <StreamIndex Type="audio" Name="audio" Subtype="" Chunks="0" TimeScale="10000000"
    Url="QualityLevels({bitrate})/Fragments(audio={start time})">
    <QualityLevel Index="0" Bitrate="96000" CodecPrivateData="1000030000000000000000000000E00042C0"
      FourCC="WMAP" AudioTag="354" Channels="2" SamplingRate="44100" BitsPerSample="16" PacketSize="4459"/>
    <c t="0" d="20000000" r="300" />
  </StreamIndex>
  <StreamIndex Type="text" Name="scte35-sparse-stream" Subtype="DATA" Chunks="0" TimeScale="10000000"
    ParentStreamIndex="video" ManifestOutput="true" 
    Url="QualityLevels({bitrate})/Fragments(captions={start time})">
    <QualityLevel Index="0" Bitrate="0" CodecPrivateData="" FourCC="">
      <CustomAttributes>
        <Attribute Name="Scheme" Value="urn:scte:scte35:2013:bin"/>
      </CustomAttributes>
    </QualityLevel>
    <!-- The following <c> and <f> fragments contains the base64-encoded [SCTE35] splice_info_section() message -->
    <c t="600000000" d="300000000">    <f>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48QWNxdWlyZWRTaWduYWwgeG1sbnM9InVybjpjYWJsZWxhYnM6bWQ6eHNkOnNpZ25hbGluZzozLjAiIGFjcXVpc2l0aW9uUG9pbnRJZGVudGl0eT0iRVNQTl9FYXN0X0FjcXVpc2l0aW9uX1BvaW50XzEiIGFjcXVpc2l0aW9uU2lnbmFsSUQ9IjRBNkE5NEVFLTYyRkExMUUxQjFDQTg4MkY0ODI0MDE5QiIgYWNxdWlzaXRpb25UaW1lPSIyMDEyLTA5LTE4VDEwOjE0OjI2WiI+PFVUQ1BvaW50IHV0Y1BvaW50PSIyMDEyLTA5LTE4VDEwOjE0OjM0WiIvPjxTQ1RFMzVQb2ludERlc2NyaXB0b3Igc3BsaWNlQ29tbWFuZFR5cGU9IjUiPjxTcGxpY2VJbnNlcnQgc3BsaWNlRXZlbnRJRD0iMzQ0NTY4NjkxIiBvdXRPZk5ldHdvcmtJbmRpY2F0b3I9InRydWUiIHVuaXF1ZVByb2dyYW1JRD0iNTUzNTUiIGR1cmF0aW9uPSJQVDFNMFMiIGF2YWlsTnVtPSIxIiBhdmFpbHNFeHBlY3RlZD0iMTAiLz48L1NDVEUzNVBvaW50RGVzY3JpcHRvcj48U3RyZWFtVGltZXM+PFN0cmVhbVRpbWUgdGltZVR5cGU9IkhTUyIgdGltZVZhbHVlPSI1MTUwMDAwMDAwMDAiLz48L1N0cmVhbVRpbWVzPjwvQWNxdWlyZWRTaWduYWw+</f>
    </c>
    <c t="1200000000" d="400000000">      <f>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48QWNxdWlyZWRTaWduYWwgeG1sbnM9InVybjpjYWJsZWxhYnM6bWQ6eHNkOnNpZ25hbGluZzozLjAiIGFjcXVpc2l0aW9uUG9pbnRJZGVudGl0eT0iRVNQTl9FYXN0X0FjcXVpc2l0aW9uX1BvaW50XzEiIGFjcXVpc2l0aW9uU2lnbmFsSUQ9IjRBNkE5NEVFLTYyRkExMUUxQjFDQTg4MkY0ODI0MDE5QiIgYWNxdWlzaXRpb25UaW1lPSIyMDEyLTA5LTE4VDEwOjE0OjI2WiI+PFVUQ1BvaW50IHV0Y1BvaW50PSIyMDEyLTA5LTE4VDEwOjE0OjM0WiIvPjxTQ1RFMzVQb2ludERlc2NyaXB0b3Igc3BsaWNlQ29tbWFuZFR5cGU9IjUiPjxTcGxpY2VJbnNlcnQgc3BsaWNlRXZlbnRJRD0iMzQ0NTY4NjkxIiBvdXRPZk5ldHdvcmtJbmRpY2F0b3I9InRydWUiIHVuaXF1ZVByb2dyYW1JRD0iNTUzNTUiIGR1cmF0aW9uPSJQVDFNMFMiIGF2YWlsTnVtPSIxIiBhdmFpbHNFeHBlY3RlZD0iMTAiLz48L1NDVEUzNVBvaW50RGVzY3JpcHRvcj48U3RyZWFtVGltZXM+PFN0cmVhbVRpbWUgdGltZVR5cGU9IkhTUyIgdGltZVZhbHVlPSI1MTYyMDAwMDAwMDAiLz48L1N0cmVhbVRpbWVzPjwvQWNxdWlyZWRTaWduYWw+</f>
    </c>
  </StreamIndex>
</SmoothStreamingMedia>
~~~

## <a name="32-apple-hls-manifest-decoration"></a>3.2 Apple HLS Манифест украшения

Служба мультимедиа Azure поддерживает следующие теги HLS для сигнализации информации о рекламе во время события в прямом эфире или по запросу. 

- EXT-X-DATERANGE, как определено в Apple HLS (RFC8216)
- EXT-X-CUE, как это определено в «Adobe-Primetime» - этот режим считается «наследием». Клиенты должны принять тег EXT-X-DATERANGE, когда это возможно.

Выход данных для каждого тега будет варьироваться в зависимости от используемого режима глотания сигнала. Например, RTMP глотать с Adobe Simple режим не содержит полной SCTE-35 base64-кодируется полезной нагрузки.

## <a name="321-apple-hls-with-ext-x-daterange-recommended"></a>3.2.1 Apple HLS с EXT-X-DATERANGE (рекомендуется)

Спецификация Apple HTTP Live Streaming (RFC8216) позволяет сигнализировать о сообщениях SCTE-35. Сообщения вставляются в плейлист сегмента в тегex-X-DATERANGE в разделе «RFC8216» под названием «Отображение SCTE-35 в EXT-X-DATERANGE».  Слой клиентского приложения может разбирать плейлист M3U и обрабатывать теги M3U или получать события через платформу плеера Apple.  

**РЕКОМЕНДУЕМый** подход в Azure Media Services (версия 3 API) заключается в том, чтобы следовать «RFC8216» и использовать тег EXT-X_DATERANGE для украшения рекламного промоухана «SCTE35» в манифесте.

## <a name="3211-example-hls-manifest-m3u8-showing-ext-x-daterange-signaling-of-scte-35"></a>3.2.1.1 Пример HLS манифест .m3u8, показывающий EXT-X-DATERANGE сигнализации SCTE-35

Следующий пример, например, произвальный результат HLS из динамического упаковщика Media Services показывает использование тега EXT-X-DATERANGE от «RFC8216», сигнализирующего о событиях SCTE-35 в потоке. Кроме того, этот поток содержит "наследие" EXT-X-CUE тег для "Adobe-Primetime".

~~~
#EXTM3U
#EXT-X-VERSION:8
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-TARGETDURATION:2
#EXT-X-INDEPENDENT-SEGMENTS
#EXT-X-PROGRAM-DATE-TIME:2020-01-07T19:40:50Z
#EXTINF:1.501500,no-desc
Fragments(video=22567545,format=m3u8-aapl-v8)
#EXTINF:1.501500,no-desc
Fragments(video=22702680,format=m3u8-aapl-v8)
#EXTINF:1.501500,no-desc
Fragments(video=22837815,format=m3u8-aapl-v8)
#EXTINF:1.501500,no-desc
Fragments(video=22972950,format=m3u8-aapl-v8)
#EXTINF:1.501500,no-desc
Fragments(video=23108085,format=m3u8-aapl-v8)
#EXTINF:1.234567,no-desc
Fragments(video=23243220,format=m3u8-aapl-v8)
#EXTINF:0.016689,no-desc
Fragments(video=23354331,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=0.000022
#EXTINF:0.250244,no-desc
Fragments(video=23355833,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=0.250267
#EXTINF:0.850856,no-desc
Fragments(video=23378355,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=1.101122
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:10.610Z",SCTE35-IN=0xFC30200000000005DD00FFF00F05000003EA7F4FFE0165E4D3000101010000607CE85A
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=0.000000,TIME=260.610344,CUE="/DAgAAAAAAXdAP/wDwUAAAPqf0/+AWXk0wABAQEAAGB86Fo="
#EXTINF:0.650644,no-desc
Fragments(video=23454932,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=1.751767
#EXTINF:0.050044,no-desc
Fragments(video=23513490,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=1.801811
#EXTINF:1.451456,no-desc
Fragments(video=23517994,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=3.253267
#EXTINF:1.501500,no-desc
Fragments(video=23648625,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=4.754767
#EXTINF:1.501500,no-desc
Fragments(video=23783760,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=6.256267
#EXTINF:1.501500,no-desc
Fragments(video=23918895,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=7.757767
#EXTINF:1.501500,no-desc
Fragments(video=24054030,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=9.259267
#EXTINF:1.501500,no-desc
Fragments(video=24189165,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=10.760767
#EXTINF:1.501500,no-desc
Fragments(video=24324300,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=12.262267
#EXTINF:1.501500,no-desc
Fragments(video=24459435,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=13.763767
#EXTINF:1.501500,no-desc
Fragments(video=24594570,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=15.265267
#EXTINF:1.501500,no-desc
Fragments(video=24729705,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=16.766767
#EXTINF:1.501500,no-desc
Fragments(video=24864840,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=18.268267
#EXTINF:1.501500,no-desc
Fragments(video=24999975,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=19.769767
#EXTINF:1.501500,no-desc
Fragments(video=25135110,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=21.271267
#EXTINF:1.501500,no-desc
Fragments(video=25270245,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=22.772767
#EXTINF:1.501500,no-desc
Fragments(video=25405380,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=24.274267
#EXTINF:1.501500,no-desc
Fragments(video=25540515,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=25.775767
#EXTINF:1.501500,no-desc
Fragments(video=25675650,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=27.277267
#EXTINF:1.501500,no-desc
Fragments(video=25810785,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=28.778767
#EXTINF:1.501500,no-desc
Fragments(video=25945920,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=30.280267
#EXTINF:1.501500,no-desc
Fragments(video=26081055,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=31.781767
#EXTINF:1.501500,no-desc
Fragments(video=26216190,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=33.283267
#EXTINF:1.501500,no-desc
Fragments(video=26351325,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=34.784767
#EXTINF:1.501500,no-desc
Fragments(video=26486460,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=36.286267
#EXTINF:1.501500,no-desc
Fragments(video=26621595,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=37.787767
#EXTINF:1.501500,no-desc
Fragments(video=26756730,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=39.289267
#EXTINF:1.501500,no-desc
Fragments(video=26891865,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=40.790767
#EXTINF:1.501500,no-desc
Fragments(video=27027000,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=42.292267
#EXTINF:1.501500,no-desc
Fragments(video=27162135,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=43.793767
#EXTINF:1.501500,no-desc
Fragments(video=27297270,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=45.295267
#EXTINF:1.501500,no-desc
Fragments(video=27432405,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=46.796767
#EXTINF:1.501500,no-desc
Fragments(video=27567540,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=48.298267
#EXTINF:1.501500,no-desc
Fragments(video=27702675,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=49.799767
#EXTINF:1.501500,no-desc
Fragments(video=27837810,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=51.301267
#EXTINF:1.501500,no-desc
Fragments(video=27972945,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=52.802767
#EXTINF:1.501500,no-desc
Fragments(video=28108080,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=54.304267
#EXTINF:1.501500,no-desc
Fragments(video=28243215,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=55.805767
#EXTINF:1.501500,no-desc
Fragments(video=28378350,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=57.307267
#EXTINF:1.501500,no-desc
Fragments(video=28513485,format=m3u8-aapl-v8)
#EXT-X-DATERANGE:ID="1002",START-DATE="2020-01-07T19:45:09.509Z",SCTE35-OUT=0xFC30250000000005DD00FFF01405000003EA7FEFFE016461B8FE00526363000101010000F20D5E37
#EXT-X-CUE:ID="1002",TYPE="scte35",DURATION=59.993278,TIME=259.509244,CUE="/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==",ELAPSED=58.808767
#EXTINF:1.501500,no-desc
Fragments(video=28648620,format=m3u8-aapl-v8)

~~~


## <a name="322-apple-hls-with-adobe-primetime-ext-x-cue-legacy"></a>3.2.2 Apple HLS с Adobe Primetime EXT-X-CUE (наследие)

Существует также "наследие" реализации, предусмотренной в Azure Media Services (версия 2 и 3 API), которая использует тег EXT-X-CUE, как это определено в "Adobe-Primetime" "Режим SCTE-35". В этом режиме медиасервисы Azure будут встраиваться в базу64-кодированный «SCTE-35» splice_info_section() в тег EXT-X-CUE.  

Тег «наследие» EXT-X-CUE определяется как ниже, а также может быть нормативным, упомянутым в спецификации «Adobe-Primetime». Это должно использоваться только для устаревшей сигнализации SCTE35, где это необходимо, в противном случае рекомендуемый тег определяется в «RFC8216» как EXT-X-DATERANGE. 

| **Имя атрибута** | **Тип**                      | **Обязательно?**                             | **Описание**                                                                                                                                                                                                                                                                          |
| ------------------ | ----------------------------- | ----------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| CUE                | строка в кавычках                 | Обязательно                                  | Сообщение закодировано в виде базовой строки, как описано в «RFC4648». Для сообщений «SCTE-35» это базовая64-кодированная splice_info_section().                                                                                                                                      |
| TYPE               | строка в кавычках                 | Обязательно                                  | URN или URL-адрес, определяющий схему сообщения. Для сообщений «SCTE-35» тип приобретает специальное значение «scte35».                                                                                                                                                                          |
| ID                 | строка в кавычках                 | Обязательно                                  | Уникальный идентификатор события. Если идентификатор не указан при принятии сообщения, службы мультимедиа Azure создадут уникальный идентификатор.                                                                                                                                              |
| DURATION           | десятичное число с плавающей запятой | Обязательно                                  | Длительность события. Если неизвестно, значение **должно** быть 0. Единицы измерения — доли секунды.                                                                                                                                                                                           |
| ELAPSED            | десятичное число с плавающей запятой | Необязательно, но требуется для скользящего окна | Когда сигнал повторяется для поддержки раздвижного окна презентации, это поле **должно** быть количество времени презентации, которое прошло с начала события. Единицы измерения — доли секунды. Это значение может превышать исходную указанную длительность соединения или сегмента. |
| TIME               | десятичное число с плавающей запятой | Обязательно                                  | Время презентации события. Единицы измерения — доли секунды.                                                                                                                                                                                                                        |


Прикладной уровень проигрывателя HLS будет использовать ТИП для определения формата сообщения, декодирования сообщения, применения необходимых преобразований времени и обработки события.  События синхронизируются по времени в списке воспроизведений сегмента родительской дорожки в соответствии с меткой времени события.  Они вставляются перед ближайшим сегментом (тег #EXTINF).

### <a name="323-hls-m3u8-manifest-example-using-legacy-adobe-primetime-ext-x-cue"></a>3.2.3 HLS .m3u8 манифест пример с использованием "Наследие" Adobe Primetime EXT-X-CUE

В следующем примере показано, что HLS демонстрирует явное оформление с помощью тега Adobe Primetime EXT-CUE.  Параметр "CUE" содержит только свойства TYPE и Duration, что означает, что это был источник RTMP, использующий Adobe "простой" режим сигнализации.  Если бы это был сигнал режима SCTE-35, тег включал бы базовую двоичную полезную нагрузку SCTE-35, как видно на [примере 3.2.1.1.](#3211-example-hls-manifest-m3u8-showing-ext-x-daterange-signaling-of-scte-35)

~~~
#EXTM3U
#EXT-X-VERSION:4
#EXT-X-PLAYLIST-TYPE:VOD
#EXT-X-ALLOW-CACHE:NO
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-TARGETDURATION:11
#EXT-X-PROGRAM-DATE-TIME:2019-12-10T09:18:14Z
#EXTINF:10.010000,no-desc
Fragments(video=4011540820,format=m3u8-aapl)
#EXTINF:10.010000,no-desc
Fragments(video=4011550830,format=m3u8-aapl)
#EXTINF:10.010000,no-desc
Fragments(video=4011560840,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000
#EXTINF:8.008000,no-desc
Fragments(video=4011570850,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=0.593000
#EXTINF:4.170000,no-desc
Fragments(video=4011578858,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=4.763000
#EXTINF:9.844000,no-desc
Fragments(video=4011583028,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=14.607000
#EXTINF:10.010000,no-desc
Fragments(video=4011592872,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=24.617000
#EXTINF:10.010000,no-desc
Fragments(video=4011602882,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=34.627000
#EXTINF:10.010000,no-desc
Fragments(video=4011612892,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=44.637000
#EXTINF:10.010000,no-desc
Fragments(video=4011622902,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=54.647000
#EXTINF:10.010000,no-desc
Fragments(video=4011632912,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=64.657000
#EXTINF:10.010000,no-desc
Fragments(video=4011642922,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=74.667000
#EXTINF:10.010000,no-desc
Fragments(video=4011652932,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=84.677000
#EXTINF:10.010000,no-desc
Fragments(video=4011662942,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=94.687000
#EXTINF:10.010000,no-desc
Fragments(video=4011672952,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=104.697000
#EXTINF:10.010000,no-desc
Fragments(video=4011682962,format=m3u8-aapl)
#EXT-X-CUE:ID=4011578265,TYPE="SpliceOut",DURATION=119.987000,TIME=4011578.265000,ELAPSED=114.707000
#EXTINF:10.010000,no-desc
Fragments(video=4011692972,format=m3u8-aapl)
#EXTINF:8.008000,no-desc
Fragments(video=4011702982,format=m3u8-aapl)

~~~

### <a name="324-hls-message-handling-for-legacy-adobe-primetime-ext-x-cue"></a>3.2.4 Обработка сообщений HLS для "Наследие" Adobe Primetime EXT-X-CUE

События сигнализируются в плейлисте сегмента каждого видео- и звукового трека. Положение тега EXT-X-CUE **всегда должно** быть либо непосредственно перед первым сегментом HLS (для сращивания или начала сегмента), либо сразу после последнего сегмента HLS (для сращивания в или сегмента конца), к которому относятся его атрибуты TIME и DURATION, как того требует «Adobe-Primetime».

Когда раздвижное окно презентации включено, тег EXT-X-CUE **должен** повторяться достаточно часто, чтобы сращивание или сегмент всегда полностью описаны в плейлисте сегмента, а атрибут ELAPSED **должен** использоваться для обозначения времени, которое было активным сращиванием или сегментом, как того требует «Adobe-Primetime».

Если скользящее окно презентации включено, теги EXT-X-CUE удаляются из списка воспроизведения сегмента, когда время мультимедиа, к которому они относятся, прошло в скользящем окне презентации.

## <a name="33-dash-manifest-decoration-mpd"></a>3.3 Манифест украшения DASH (MPD)

«MPEGDASH» предоставляет три способа сигнализации событий:

1.  События, сигнализированные в MPD EventStream
2.  События сигнализировались в диапазоне с помощью Box Message ('emsg')
3.  Путем сочетания 1 и 2 способов.

События, сигнализированные в MPD EventStream, полезны для потоковой передачи VOD, поскольку клиенты имеют доступ ко всем событиям, сразу же при загрузке MPD. Это также полезно для sSAI сигнализации, где ниже по течению SSAI поставщик должен разобрать сигналы из многопериодного манифеста MPD, и вставить содержание рекламы динамически.  В диапазоне ('emsg')решение полезно для потоковой передачи, где клиентам не нужно загружать MPD снова, или нет SSAI манифест манипуляции происходит между клиентом и происхождением. 

Поведение мультимедиа Azure Media Services по умолчанию для DASH означает сигнал как в MPD EventStream, так и в диапазоне с помощью Box Event Message Box ('emsg').

Cue сообщения, проглатываются через «RTMP» или «MS-SSTR-Ingest» отображаются в событиях DASH, используя в диапазоне 'emsg' коробки и /или в-MPD EventStreams. 

В диапазоне сигнальный сигнал SCTE-35 для DASH соответствует определению и требованиям, определенным в разделе «SCTE-214-3», а также в разделе «DASH-IF-IOP» 13.12.2 («SCTE35 Events»). 

Для перевозки в полосе «SCTE-35» в окне событийного сообщения ('emsg') используется схемаId и «урна:scte:scte35:2013:bin». Для MPD манифест украшения EventStream schemeId использует "урну:scte:scte35:2014:xml-bin".  Этот формат представляет собой XML представление события, которое включает в себя двоичную базу64-закодированный выход полного сообщения SCTE-35, которое пришло в ingest. 

Нормативные эталонные определения перевозки сигнальных сообщений «SCTE-35» в DASH доступны в «SCTE-214-1» sec 6.7.4 (MPD) и «SCTE-214-3» sec 7.3.2 (Перевозка сообщений SCTE 35 сигналов).

### <a name="331-mpeg-dash-mpd-eventstream-signaling"></a>3.3.1 MPEG DASH (MPD) EventStream Сигнализация

Манифест (MPD) оформление событий будет сигнализировано в MPD с помощью элемента EventStream, который отображается в элементе Периода. СхемаИспользуется: "урна:scte:scte35:2014:xml-bin".

> [!NOTE]
> Для целей краткости «SCTE-35» позволяет использовать базовый64-кодированный раздел в элементе Signal.Binary (а не элемент Signal.SpliceInfoSection) в качестве альтернативы перевозке полностью разогнанных сигналов.
> Служба мультимедиа Azure использует этот подход «xml'bin» для сигнализации в манифесте MPD.
> Это также рекомендуемый метод, используемый в «DASH-IF-IOP» - см. раздел под названием [«Потоки событий Ad' руководства DASH IF IOP](https://dashif-documents.azurewebsites.net/DASH-IF-IOP/master/DASH-IF-IOP.html#ads-insertion-event-streams)
> 

Элемент EventStream имеет следующие атрибуты:

| **Имя атрибута** | **Тип**                | **Обязательно?** | **Описание**                                                                                                                                                                                                                                                                                                                                                                         |
| ------------------ | ----------------------- | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| scheme_id_uri      | строка                  | Обязательно      | Определяет схему сообщения. Схема получает значение атрибута Scheme в поле манифеста сервера прямой передачи. Значение **должно** быть URN или URL, определяющим схему сообщения; Поддерживаемая схема выводаId должна быть "urn:scte:scte35:2014:xml-bin" за "SCTE-214-1" sec 6.7.4 (MPD), так как служба поддерживает только "xml'bin" в это время для краткости в MPD. |
| значение              | строка                  | Необязательный      | Дополнительное строковое значение, используемое владельцами схемы для настройки семантики сообщения. Для того, чтобы дифференцировать несколько потоков событий с одной и той же схемой, значение **должно** быть установлено на имя потока событий (trackName для «MS-SSTR-Ingest» или AMF имя сообщения для «RTMP» ingest).                                                                         |
| Шкала времени          | 32-разрядное целое число без знака | Обязательно      | Шкала времени, в тиках в секунду.                                                                                                                                                                                                                                                                                                                                                     |


### <a name="332-example-event-streams-for-mpeg-dash"></a>3.3.2 Пример потоков событий для MPEG DASH

#### <a name="3321-example-mpeg-dash-mpd-manifest-signaling-of-rtmp-streaming-using-adobe-simple-mode"></a>3.3.2.1 Пример MPEG DASH .mpd манифест сигнализации потоковой передачи RTMP с помощью простого режима Adobe

Ниже приводится выдержка EventStream из динамического пакета Media Services для потока RTMP с использованием Adobe "простого" режима сигнализации.

~~~ xml
<!-- Example EventStream element using "urn:com:adobe:dpi:simple:2015" Adobe simple signaling per [Adobe-Primetime] -->
    <EventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="simplesignal" timescale="10000000">
        <Event presentationTime="1583497601000000" duration="300000000" id="1085900"/>
        <Event presentationTime="1583500901666666" duration="300000000" id="1415966"/>
        <Event presentationTime="1583504202333333" duration="300000000" id="1746033"/>
        <Event presentationTime="1583507502666666" duration="300000000" id="2076066"/>
        <Event presentationTime="1583510803333333" duration="300000000" id="2406133"/>
        <Event presentationTime="1583514104000000" duration="300000000" id="2736200"/>
        <Event presentationTime="1583517404666666" duration="300000000" id="3066266"/>
        <Event presentationTime="1583520705333333" duration="300000000" id="3396333"/>
        <Event presentationTime="1583524006000000" duration="300000000" id="3726400"/>
        <Event presentationTime="1583527306666666" duration="300000000" id="4056466"/>
        <Event presentationTime="1583530607333333" duration="300000000" id="4386533"/>
    </EventStream>
~~~

#### <a name="3322-example-mpeg-dash-mpd-manifest-signaling-of-an-rtmp-stream-using-adobe-scte-35-mode"></a>3.3.2.2 Пример MPEG DASH .mpd манифест сигнализации потока RTMP с помощью режима Adobe SCTE-35

В следующем примере приводится выдержка EventStream из динамического пакета Media Services для потока RTMP с использованием сигнального сигнала Adobe SCTE-35.

~~~ xml
<!-- Example EventStream element using xml+bin style signaling per [SCTE-214-1] -->

      <EventStream schemeIdUri="urn:scte:scte35:2014:xml+bin" value="scte35" timescale="10000000">
        <Event presentationTime="2595092444" duration="11011000" id="1002">
            <Signal xmlns="http://www.scte.org/schemas/35/2016">
                <Binary>/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==</Binary>
            </Signal>
        </Event>
        <Event presentationTime="2606103444" id="1002">
            <Signal xmlns="http://www.scte.org/schemas/35/2016">
                <Binary>/DAgAAAAAAXdAP/wDwUAAAPqf0/+AWXk0wABAQEAAGB86Fo=</Binary>
            </Signal>
        </Event>
      </EventStream>
~~~

> [!IMPORTANT]
> Обратите внимание, что время презентации — это время презентации события «SCTE-35», переведенное на время начала периода, а не время прибытия сообщения.
> «MPEGDASH» определяет Event@presentationTime как «Определяет время представления события относительно начала Периода.
> Значение времени представления в секундах — это разделение значения этого атрибута и значения атрибута. EventStream@timescale
> Если нет, то значение времени презентации 0.

#### <a name="3331-example-mpeg-dash-manifest-mpd-with-single-period-eventstream-using-adobe-simple-mode-signals"></a>3.3.3.1 Пример Манифеста MPEG DASH (MPD) с однопериодическим, EventStream, используя сигналы простого режима Adobe

В следующем примере показан выход из динамического пакета Media Services для источника потока RTMP с использованием метода рекламного сигнала Adobe "простой". Выход представляет собой единый период манифест, показывающий EventStream с помощью schemeId Uri установить на "urn:com:adobe:dpi:simple:2015" и значение свойства, установленного на "простой сигнал".
Каждый простой сигнал предоставляется @presentationTimeв @durationэлементе События с , и @id свойства, населенные на основе входящих простых сигналов.

~~~ xml
<?xml version="1.0" encoding="utf-8"?>
<MPD xmlns="urn:mpeg:dash:schema:mpd:2011" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" profiles="urn:mpeg:dash:profile:isoff-live:2011" type="static" mediaPresentationDuration="PT28M1.680S" minBufferTime="PT3S">
    <Period>
        <EventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="simplesignal" timescale="1000">
            <Event presentationTime="4011578265" duration="119987" id="4011578265"/>
        </EventStream>
        <AdaptationSet id="1" group="1" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="video" mimeType="video/mp4" codecs="avc1.4D4028" maxWidth="1920" maxHeight="1080" startWithSAP="1">
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="simplesignal"/>
            <ProducerReferenceTime id="4011460740" type="0" wallClockTime="2020-01-25T19:35:54.740Z" presentationTime="4011460740"/>
            <SegmentTemplate timescale="1000" presentationTimeOffset="4011460740" media="QualityLevels($Bandwidth$)/Fragments(video=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(video=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="4011460740" d="2002" r="57"/>
                    <S d="1401"/>
                    <S d="601"/>
                    <S d="2002"/>

                     <!--> ... video segments truncated for sample brevity </-->

                </SegmentTimeline>
            </SegmentTemplate>
            <Representation id="1_V_video_14759481473095519504" bandwidth="6000000" width="1920" height="1080"/>
            <Representation id="1_V_video_1516803357996956148" bandwidth="4000000" codecs="avc1.4D401F" width="1280" height="720"/>
            <Representation id="1_V_video_5430608182379669372" bandwidth="2600000" codecs="avc1.4D401F" width="960" height="540"/>
            <Representation id="1_V_video_3780180650986497347" bandwidth="1000000" codecs="avc1.4D401E" width="640" height="360"/>
            <Representation id="1_V_video_13759117363700265707" bandwidth="699000" codecs="avc1.4D4015" width="480" height="270"/>
            <Representation id="1_V_video_6140004908920393176" bandwidth="400000" codecs="avc1.4D4015" width="480" height="270"/>
            <Representation id="1_V_video_10673801877453424365" bandwidth="200000" codecs="avc1.4D400D" width="320" height="180"/>
        </AdaptationSet>
        <AdaptationSet id="2" group="5" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="audio" mimeType="audio/mp4" codecs="mp4a.40.2">
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="simplesignal"/>
            <ProducerReferenceTime id="4011460761" type="0" wallClockTime="2020-01-25T19:35:54.761Z" presentationTime="4011460761"/>
            <Label>audio</Label>
            <SegmentTemplate timescale="1000" presentationTimeOffset="4011460740" media="QualityLevels($Bandwidth$)/Fragments(audio=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(audio=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="4011460761" d="1984"/>
                    <S d="2005" r="1"/>
                    <S d="2006"/>

                    <!--> ... audio segments truncated for example brevity </-->

                </SegmentTimeline>
            </SegmentTemplate>
            <Representation id="5_A_audio_17504386117102112482" bandwidth="128000" audioSamplingRate="48000"/>
        </AdaptationSet>
    </Period>
</MPD>

~~~

#### <a name="3332-example-mpeg-dash-manifest-mpd-with-multi-period-eventstream-using-adobe-scte35-mode-signaling"></a>3.3.3.2 Пример Манифеста MPEG DASH (MPD) с многомесячным, EventStream, использующим режим Adobe SCTE35

В следующем примере показан выход из динамического пакета Media Services для источника потока RTMP с помощью сигнального сигнала Adobe SCTE35.
В этом случае выходным манифестом является многопериодdashный DASH .mpd с элементом EventStream, а @schemeIdUri свойство устанавливается на "urn:scte:scte35:2014:xml'bin" и @value свойство, установленное на "scte35". Каждый элемент события в EventStream содержит полный код base64, закодированный двоичный сигнал SCTE35 

~~~ xml
<?xml version="1.0" encoding="utf-8"?>
<MPD xmlns="urn:mpeg:dash:schema:mpd:2011" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" profiles="urn:mpeg:dash:profile:isoff-live:2011" type="dynamic" publishTime="2020-01-07T19:42:44Z" minimumUpdatePeriod="PT0S" timeShiftBufferDepth="PT58M56S" availabilityStartTime="2020-01-07T19:40:50Z" minBufferTime="PT4S">
    <Period start="PT2M48.168S" id="main-content_0">
        <AdaptationSet id="1" group="1" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="video" mimeType="video/mp4" codecs="avc1.640020" maxWidth="1280" maxHeight="720" startWithSAP="1">
            <InbandEventStream schemeIdUri="urn:mpeg:dash:event:2012" value="1"/>
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="amssignal"/>
            <SegmentTemplate timescale="90000" presentationTimeOffset="15135120" media="QualityLevels($Bandwidth$)/Fragments(video=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(video=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="15135120" d="135135" r="59"/>
                    <S d="111111"/>
                    <S d="1502"/>
                </SegmentTimeline>
            </SegmentTemplate>
            <ProducerReferenceTime id="15135120" type="0" wallClockTime="2020-01-07T19:40:50Z" presentationTime="15135120"/>
            <Representation id="1_V_video_5322324134428436312" bandwidth="3500000" width="1280" height="720"/>
            <Representation id="1_V_video_16981495139092747609" bandwidth="2200000" width="960" height="540"/>
            <Representation id="1_V_video_1384718563016940751" bandwidth="1350000" codecs="avc1.64001F" width="704" height="396"/>
            <Representation id="1_V_video_4425970933904124207" bandwidth="850000" codecs="avc1.64001E" width="512" height="288"/>
            <Representation id="1_V_video_11952982975776937431" bandwidth="550000" codecs="avc1.640016" width="384" height="216"/>
            <Representation id="1_V_video_10673801877453424365" bandwidth="200000" codecs="avc1.640015" width="340" height="192"/>
        </AdaptationSet>
        <AdaptationSet id="2" group="5" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="audio" mimeType="audio/mp4" codecs="mp4a.40.5" lang="en">
            <InbandEventStream schemeIdUri="urn:mpeg:dash:event:2012" value="1"/>
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="amssignal"/>
            <Label>audio</Label>
            <SegmentTemplate timescale="44100" presentationTimeOffset="7416208" media="QualityLevels($Bandwidth$)/Fragments(audio=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(audio=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="7417856" d="133120"/>
                    <S d="132096" r="1"/>
                    
                    <!--> ... aduio segments truncated for sample brevity </-->

                </SegmentTimeline>
            </SegmentTemplate>
            <ProducerReferenceTime id="7417856" type="0" wallClockTime="2020-01-07T19:40:50.037Z" presentationTime="7417856"/>
            <Representation id="5_A_audio_17504386117102112482" bandwidth="128000" audioSamplingRate="44100"/>
        </AdaptationSet>
    </Period>
    <Period start="PT4M19.509S" id="scte-35_0">
        <EventStream schemeIdUri="urn:scte:scte35:2014:xml+bin" value="scte35" timescale="10000000">
            <Event presentationTime="2595092444" duration="11011000" id="1002">
                <Signal xmlns="http://www.scte.org/schemas/35/2016">
                    <Binary>/DAlAAAAAAXdAP/wFAUAAAPqf+/+AWRhuP4AUmNjAAEBAQAA8g1eNw==</Binary>
                </Signal>
            </Event>
            <Event presentationTime="2606103444" id="1002">
                <Signal xmlns="http://www.scte.org/schemas/35/2016">
                    <Binary>/DAgAAAAAAXdAP/wDwUAAAPqf0/+AWXk0wABAQEAAGB86Fo=</Binary>
                </Signal>
            </Event>
        </EventStream>
        <AdaptationSet id="1" group="1" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="video" mimeType="video/mp4" codecs="avc1.640020" maxWidth="1280" maxHeight="720" startWithSAP="1">
            <InbandEventStream schemeIdUri="urn:mpeg:dash:event:2012" value="1"/>
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="amssignal"/>
            <SegmentTemplate timescale="90000" presentationTimeOffset="23355832" media="QualityLevels($Bandwidth$)/Fragments(video=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(video=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="23355833" d="22522"/>
                    <S d="76577"/>
                </SegmentTimeline>
            </SegmentTemplate>
            <ProducerReferenceTime id="23355833" type="0" wallClockTime="2020-01-07T19:42:21.341Z" presentationTime="23355833"/>
            <Representation id="1_V_video_5322324134428436312" bandwidth="3500000" width="1280" height="720"/>
            <Representation id="1_V_video_16981495139092747609" bandwidth="2200000" width="960" height="540"/>
            <Representation id="1_V_video_1384718563016940751" bandwidth="1350000" codecs="avc1.64001F" width="704" height="396"/>
            <Representation id="1_V_video_4425970933904124207" bandwidth="850000" codecs="avc1.64001E" width="512" height="288"/>
            <Representation id="1_V_video_11952982975776937431" bandwidth="550000" codecs="avc1.640016" width="384" height="216"/>
            <Representation id="1_V_video_10673801877453424365" bandwidth="200000" codecs="avc1.640015" width="340" height="192"/>
        </AdaptationSet>
        <AdaptationSet id="2" group="5" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="audio" mimeType="audio/mp4" codecs="mp4a.40.5" lang="en">
            <InbandEventStream schemeIdUri="urn:mpeg:dash:event:2012" value="1"/>
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="amssignal"/>
            <Label>audio</Label>
            <SegmentTemplate timescale="44100" presentationTimeOffset="11444358" media="QualityLevels($Bandwidth$)/Fragments(audio=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(audio=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="11446272" d="49152"/>
                </SegmentTimeline>
            </SegmentTemplate>
            <ProducerReferenceTime id="11446272" type="0" wallClockTime="2020-01-07T19:42:21.384Z" presentationTime="11446272"/>
            <Representation id="5_A_audio_17504386117102112482" bandwidth="128000" audioSamplingRate="44100"/>
        </AdaptationSet>
    </Period>
    <Period start="PT4M20.610S" id="main-content_1">
        <AdaptationSet id="1" group="1" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="video" mimeType="video/mp4" codecs="avc1.640020" maxWidth="1280" maxHeight="720" startWithSAP="1">
            <InbandEventStream schemeIdUri="urn:mpeg:dash:event:2012" value="1"/>
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="amssignal"/>
            <SegmentTemplate timescale="90000" presentationTimeOffset="23454931" media="QualityLevels($Bandwidth$)/Fragments(video=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(video=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="23454932" d="58558"/>
                    <S d="4504"/>
                    <S d="130631"/>
                    <S d="135135" r="12"/>
                </SegmentTimeline>
            </SegmentTemplate>
            <ProducerReferenceTime id="23454932" type="0" wallClockTime="2020-01-07T19:42:22.442Z" presentationTime="23454932"/>
            <Representation id="1_V_video_5322324134428436312" bandwidth="3500000" width="1280" height="720"/>
            <Representation id="1_V_video_16981495139092747609" bandwidth="2200000" width="960" height="540"/>
            <Representation id="1_V_video_1384718563016940751" bandwidth="1350000" codecs="avc1.64001F" width="704" height="396"/>
            <Representation id="1_V_video_4425970933904124207" bandwidth="850000" codecs="avc1.64001E" width="512" height="288"/>
            <Representation id="1_V_video_11952982975776937431" bandwidth="550000" codecs="avc1.640016" width="384" height="216"/>
            <Representation id="1_V_video_10673801877453424365" bandwidth="200000" codecs="avc1.640015" width="340" height="192"/>
        </AdaptationSet>
        <AdaptationSet id="2" group="5" profiles="ccff" bitstreamSwitching="false" segmentAlignment="true" contentType="audio" mimeType="audio/mp4" codecs="mp4a.40.5" lang="en">
            <InbandEventStream schemeIdUri="urn:mpeg:dash:event:2012" value="1"/>
            <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="amssignal"/>
            <Label>audio</Label>
            <SegmentTemplate timescale="44100" presentationTimeOffset="11492916" media="QualityLevels($Bandwidth$)/Fragments(audio=$Time$,format=mpd-time-csf)" initialization="QualityLevels($Bandwidth$)/Fragments(audio=i,format=mpd-time-csf)">
                <SegmentTimeline>
                    <S t="11495424" d="28672"/>
                    <S d="1024"/>
                    <S d="131072"/>
                    <S d="132096"/>
                    <S d="133120"/>
                    <S d="132096" r="1"/>
                    <S d="133120"/>
                </SegmentTimeline>
            </SegmentTemplate>
            <ProducerReferenceTime id="11495424" type="0" wallClockTime="2020-01-07T19:42:22.499Z" presentationTime="11495424"/>
            <Representation id="5_A_audio_17504386117102112482" bandwidth="128000" audioSamplingRate="44100"/>
        </AdaptationSet>
    </Period>
</MPD>

~~~
### <a name="334-mpeg-dash-in-band-event-message-box-signaling"></a>3.3.4 MPEG DASH В диапазоне СобытийНое сообщение Box Сигнализация

Для потока событий по общему каналу необходимо, чтобы MPD имел элемент InbandEventStream на уровне набора адаптации.  Этот элемент имеет обязательную схемуАтрибутIdUri и дополнительный атрибут шкалы времени, который также отображается в поле сообщения событий ('emsg').  Коробки сообщений событий с идентификаторами схем, которые не определены в MPD **SHOULD,** не присутствуют.

Для перевозки в полосе «SCTE-35» сигналы **должны** использовать схемуId и «урна:scte:scte35:2013:bin».
Нормативные определения перевозки сообщений SCTE-35 в диапазоне определяются в сек 7.3.2 (Перевозка сообщений SCTE 35 cue).

В следующих деталях излагаются конкретные значения, которые клиент должен ожидать в 'emsg' в соответствии с «SCTE-214-3»:

| **Название поля**          | **Тип поля**          | **Обязательно?** | **Описание**                                                                                                                                                                                                                                                                                        |
| ----------------------- | ----------------------- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| scheme_id_uri           | строка                  | Обязательно      | Определяет схему сообщения. Схема получает значение атрибута Scheme в поле манифеста сервера прямой передачи. Значение **должно** быть URN, определяющим схему сообщения. Для сообщений «SCTE-35» это **должно** быть «урна:scte:scte35:2013:bin» в соответствии с «SCTE-214-3»          |
| Значение                   | строка                  | Обязательно      | Дополнительное строковое значение, используемое владельцами схемы для настройки семантики сообщения. Чтобы различить несколько потоков событий с одной схемой, в качестве значения будет использоваться имя потока события (trackName для приема Smooth или имя сообщения AMF для приема RTMP). |
| Шкала времени               | 32-разрядное целое число без знака | Обязательно      | Шкала времени, в тиках в секунду, времени и продолжительности полей в поле 'emsg'.                                                                                                                                                                                                            |
| Presentation_time_delta | 32-разрядное целое число без знака | Обязательно      | Разница во времени между временем презентации события и временем первой презентации в сегменте. Время и продолжительность презентации **должны** согласовываться с точками доступа Stream (SAP) типа 1 или 2, как это определено в приложении ISO-14496-12.                                  |
| event_duration          | 32-разрядное целое число без знака | Обязательно      | Длительность события или 0xFFFFFFFF для определения неизвестной длительности.                                                                                                                                                                                                                              |
| Идентификатор                      | 32-разрядное целое число без знака | Обязательно      | Определяет экземпляр сообщения. Сообщения с одинаковой семантикой должны иметь одно и то же значение. Если идентификатор не указан при принятии сообщения, службы мультимедиа Azure создадут уникальный идентификатор.                                                                                        |
| Message_data            | массив байтов;              | Обязательно      | Сообщение о событии. Для сообщений «SCTE-35» данные сообщений — это двоичная splice_info_section() в соответствии с «SCTE-214-3»                                                                                                                                                                        |


#### <a name="example-inbandevenstream-entity-for-adobe-simple-mode"></a>Пример сущности InBandEvenStream для режима Adobe Simple
~~~ xml

      <InbandEventStream schemeIdUri="urn:com:adobe:dpi:simple:2015" value="amssignal"/>
~~~

### <a name="335-dash-message-handling"></a>3.3.5 Обработка сообщений DASH

События сигнализируются в диапазоне, в поле 'emsg', как для видео-, так и для аудиотреков.  Это происходит для всех запросов сегментов, значение presentation_time_delta которых 15 секунд или меньше. 

Если скользящее окно презентации включено, сообщения о событии удаляются из MPD, когда сумма времени и длительность сообщения о событии меньше времени данных мультимедиа в манифесте.  Другими словами сообщения о событиях удаляются из манифеста, когда время мультимедиа, к которому они относятся, прошло в скользящем окне презентации.

## <a name="4-scte-35-ingest-implementation-guidance-for-encoder-vendors"></a>4. SCTE-35 Ingest Руководство по внедрению для поставщиков encoder

Следующие рекомендации являются общими проблемами, которые могут повлиять на реализацию этой спецификации поставщиком кодера.  Приведенные ниже руководящие принципы были собраны на основе обратной связи с реальными партнерами, чтобы облегчить реализацию этой спецификации для других. 

Сообщения SCTE-35 посягают в двоичном формате с помощью схемы **«urn:scte:scte35:2013:bin»** для «MS-SSTR-Ingest» и типа **«scte35»** для «RTMP» ingest. Чтобы упростить преобразование времени [SCTE-35], которое основывается на метке времени презентации (PTS) транспортного потока MPEG-2, сопоставление между PTS (pts_time + pts_adjustment значения splice_time()) и временной шкалой мультимедийного содержимого определяется временем презентации события (поле fragment_absolute_time для приема Smooth и поле времени для приема RTMP). Сопоставление является необходимым, так как 33-разрядное значение PTS изменяется приблизительно каждые 26,5 часов.

Плавная потоковая передача «MS-SSTR-Ingest» требует, чтобы Media Data Box ('mdat') **должен** содержать **splice_info_section() определенный** в «SCTE-35». 

Для RTMP ingest, кий атрибут сообщения AMF устанавливается на base64-кодированный **splice_info_section()** определяется в «SCTE-35».  

Когда сообщения имеют формат, описанный выше, они отправляются клиентам HLS, Smooth и DASH, как указано выше.  

При тестировании реализации с платформой Azure Media Services, пожалуйста, начните тестирование с "проходной" LiveEvent, прежде чем перейти к тестированию на кодировании LiveEvent.

---

## <a name="change-history"></a>Журнал изменений

| Дата     | Изменения                                                                                                             |
| -------- | ------------------------------------------------------------------------------------------------------------------- |
| 07/2/19  | Пересмотренный RTMP глотать для поддержки SCTE35, добавил RTMP "onCuePoint" для Elemental Live                                  |
| 08/22/19 | Обновлено для добавления OnUserDataEvent в RTMP для пользовательских метаданных                                                          |
| 1/08/20  | Исправлена ошибка в режиме RTMP Simple и RTMP SCTE35. Изменен о "onCuePoint" на "onAdCue". Обновлено Простой режим таблицы. |

## <a name="next-steps"></a>Дальнейшие действия
Просмотрите схемы обучения работе со службами мультимедиа.

[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a>Отзывы
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]
