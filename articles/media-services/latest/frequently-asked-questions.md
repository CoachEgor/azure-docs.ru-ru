---
title: Часто задаваемые вопросы о Службах мультимедиа Azure версии 3 | Документация Майкрософт
description: В этой статье приводятся ответы на часто задаваемые вопросы о службах мультимедиа Azure.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 04/07/2020
ms.author: juliako
ms.openlocfilehash: 713acbd098255af2869d7a462c9990f3d7e10bf1
ms.sourcegitcommit: 7e04a51363de29322de08d2c5024d97506937a60
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81309189"
---
# <a name="media-services-v3-frequently-asked-questions"></a>Медиа Услуги v3 часто задают вопросы

В этой статье приводятся ответы на часто задаваемые вопросы о службах мультимедиа Azure.

## <a name="general"></a>Общие сведения

### <a name="what-azure-roles-can-perform-actions-on-azure-media-services-resources"></a>Какие роли Azure могут выполнять действия на ресурсах мультимедиа Azure? 

Смотрите [элемент управления доступом на основе ролей (RBAC) для учетных записей Медиа-услуг.](rbac-overview.md)

### <a name="how-do-i-stream-to-apple-ios-devices"></a>Как перейти на устройства Apple iOS?

Убедитесь, что у вас есть **(format'm3u8-aapl)** в конце пути (после **/явной** части URL), чтобы сказать потоковому серверу происхождения, чтобы вернуть содержимое HTTP Live Streaming (HLS) для потребления на нативных устройствах Apple iOS. Для получения подробной информации [см.](dynamic-packaging-overview.md)

### <a name="how-do-i-configure-media-reserved-units"></a>Как настроить зарезервированные единицы мультимедиа?

Для работы по аудиоанализу и видеоанализу, которые запускаются Media Services v3 или Video Indexer, мы рекомендуем вам предоставить свою учетную запись 10 S3 Media Reserved Units (MRUs). Если вам нужно более 10 S3 MRUs, откройте билет поддержки с помощью [портала Azure](https://portal.azure.com/).

Для получения подробной информации [см.](media-reserved-units-cli-how-to.md)

### <a name="what-is-the-recommended-method-to-process-videos"></a>Что такое рекомендуемый метод для обработки видео?

[Преобразования](https://docs.microsoft.com/rest/api/media/transforms) можно использовать для настройки общих задач кодирования или анализа видеоматериалов. Каждое преобразование описывает набор инструкций (или рабочий процесс задач) для обработки видео- и аудиофайлов. [Работа](https://docs.microsoft.com/rest/api/media/jobs) — это фактический запрос в Службу средств массовой информации на применение Преобразования к вхотворенному видео или аудиоконтенту. После создания Transform можно отправлять вакансии с помощью AA-услуг media Services или любого из опубликованных SDK. Дополнительные сведения см. в статье [Преобразования и задания](transforms-jobs-concept.md).

### <a name="i-uploaded-encoded-and-published-a-video-why-wont-the-video-play-when-i-try-to-stream-it"></a>Видео отправлено, закодировано и опубликовано. Почему видео не воспроизводиться, когда я пытаюсь транслировать его?

Одной из наиболее распространенных причин является то, что у вас нет конечной точки потоковой передачи, с которой вы пытаетесь воспроизвести в состоянии запуска.

### <a name="how-does-pagination-work"></a>Как работает разбиение на страницы?

При использовании pagination всегда следует использовать следующую ссылку для перечисления коллекции и не зависеть от конкретного размера страницы. Дополнительные сведения и примеры см. в [этой статье о фильтрации, упорядочении и разбиении на страницы](entities-overview.md).

### <a name="what-features-are-not-yet-available-in-azure-media-services-v3"></a>Какие функции пока не доступны в Azure Media Services v3?

Для получения подробной информации [см.](media-services-v2-vs-v3.md#feature-gaps-with-respect-to-v2-apis)

### <a name="what-is-the-process-of-moving-a-media-services-account-between-subscriptions"></a>Каков процесс перемещения учетной записи Медиа-услуг между подписками?  

Для получения подробной информации см. [Перемещение учетной записи медиа-услуг между подписками.](media-services-account-concept.md)

## <a name="live-streaming"></a>Потоковая передача в реальном времени 

### <a name="how-do-i-stop-the-live-stream-after-the-broadcast-is-done"></a>Как остановить прямую трансляцию после трансляции?

Вы можете подойти к нему со стороны клиента или сервера.

#### <a name="client-side"></a>Сторона клиента

Ваше веб-приложение должно подсказать пользователю, если он хочет прекратить трансляцию при закрытии браузера. Это событие браузера, с которым может справиться ваше веб-приложение.

#### <a name="server-side"></a>На сервере

Вы можете следить за событиями в реальном времени, подписывавшись на события Azure Event Grid. Для получения дополнительной [информации](media-services-event-schemas.md#live-event-types)см.

Вы можете сделать одно из двух:

* [Подпишитесь на](reacting-to-media-services-events.md) события [Microsoft.Media.LiveEventEncoderDisconnected](media-services-event-schemas.md#liveeventencoderdisconnected) и следите за тем, чтобы на некоторое время не вменялись подключения, чтобы остановить и удалить ваше живое событие.
* [Подпишитесь на](reacting-to-media-services-events.md) события [сердцебиения](media-services-event-schemas.md#liveeventingestheartbeat) на уровне треков. Если все треки имеют входящий битрат снижается до 0 или последний раз штамп больше не увеличивается, вы можете безопасно закрыть живое событие. События сердцебиения приходят в каждые 20 секунд для каждого трека, так что это может быть немного многословным.

###  <a name="how-do-i-insert-breaksvideos-and-image-slates-during-a-live-stream"></a>Как вставить перерывы/видео и сланцы изображений во время прямого эфира?

Функция кодирования в реальном времени в Службах мультимедиа версии 3 не поддерживает вставку видео или баннеров во время передачи динамического потока. 

Можно использовать [локальный динамический кодировщик](recommended-on-premises-live-encoders.md), чтобы переключать исходное видео. Многие приложения предоставляют возможность переключения источников, в том числе Telestream Wirecast, Switcher Studio (на iOS) и OBS Studio (бесплатное приложение).

## <a name="content-protection"></a>Защита содержимого

### <a name="should-i-use-aes-128-clear-key-encryption-or-a-drm-system"></a>Должен ли я использовать шифрование ключей AES-128 или систему DRM?

Клиенты часто интересуются, следует ли им использовать шифрование AES или систему DRM. Основное различие между двумя системами заключается в том, что с помощью шифрования AES ключ содержимого передается клиенту через TLS, чтобы ключ шифровался в пути, но без дополнительного шифрования ("в ясном виде"). В результате ключ, используемый для расшифровки содержимого, доступен для игрока-клиента и может быть просмотрен в сетевом следе на клиенте простым текстом. Шифрование незащищенного ключа AES-128 подходит для использования в случаях, когда зритель является доверенным лицом (например, шифрование корпоративного видео, распространяемого внутри компании, для просмотра сотрудниками).

Системы DRM, такие как PlayReady, Widevine и FairPlay, обеспечивают дополнительный уровень шифрования ключа, используемого для расшифровки содержимого, по сравнению с четким ключом AES-128. Ключ содержимого зашифрован на ключ, защищенный временем выполнения DRM в дополнение к шифрованию на транспортном уровне, предоставляемому TLS. Кроме того, расшифровка выполняется в защищенной среде на уровне операционной системы, где злоумышленнику труднее атаковать. Мы рекомендуем DRM для использования случаев, когда зритель не может быть доверенным лицом, и вам нужен самый высокий уровень безопасности.

### <a name="how-do-i-show-a-video-to-only-users-who-have-a-specific-permission-without-using-azure-ad"></a>Как показать видео только пользователям, имеющим определенное разрешение, без использования Azure AD?

Вам не нужно использовать какой-либо конкретный поставщик токенов, например Active Directory Azure (Azure AD). Вы можете создать свой собственный поставщик [JWT](https://jwt.io/) (так называемая служба безопасных токенов, или STS) с помощью асимметричного шифрования ключей. В пользовательский STS вы можете добавлять утверждения, основанные на бизнес-логике.

Убедитесь, что эмитент, аудитория и претензии совпадают точно между тем, `ContentKeyPolicyRestriction` что `ContentKeyPolicy`в JWT и значение, используемое в .

Для получения дополнительной информации [см.](content-protection-overview.md)

### <a name="how-and-where-did-i-get-a-jwt-token-before-using-it-to-request-a-license-or-key"></a>Как и где я получил токен JWT, прежде чем использовать его для запроса лицензии или ключа?

Для производства необходимо иметь службу secure Token Service (т.е. веб-сервис), которая выдает токен JWT по запросу HTTPS. Для тестирования можно использовать код, `GetTokenAsync` показанный в методе, определенном в [Program.cs.](https://github.com/Azure-Samples/media-services-v3-dotnet-tutorials/blob/master/AMSV3Tutorials/EncryptWithDRM/Program.cs)

Игрок делает запрос, после проверки подлинности пользователя, к STS для такого маркера и назначает его как значение токена. Можно использовать [API решения "Проигрыватель мультимедиа Azure"](https://amp.azure.net/libs/amp/latest/docs/).

Пример выполнения STS с симметричным ключом или асимметричным ключом см. [JWT tool](https://aka.ms/jwt) На примере игрока, основанного на медиаплеере Azure, использующем такой токен JWT, см. [Azure media test tool](https://aka.ms/amtest) (Расширьте **player_settings** ссылку, чтобы увидеть ввод маркера.)

### <a name="how-do-i-authorize-requests-to-stream-videos-with-aes-encryption"></a>Как авторизовать запросы на потоковую передачу видео с помощью шифрования AES?

Правильный подход заключается в использовании службы безопасных токенов. В STS, в зависимости от профиля пользователя, добавляйте различные утверждения (например, "Премиум пользователь", "Основной пользователь", "Бесплатный пробный пользователь"). С различными утверждениями в JWT пользователь может видеть разное содержимое. Для различных содержимых или активов, `ContentKeyPolicyRestriction` будет иметь соответствующую `RequiredClaims` стоимость.

Используйте API-аДИ Мультимедиа-сервисов Azure для настройки доставки лицензии/ключа и шифрования ваших активов (как показано в [этом примере).](https://github.com/Azure-Samples/media-services-v3-dotnet-tutorials/blob/master/AMSV3Tutorials/EncryptWithAES/Program.cs)

Дополнительные сведения см. в разделе:

- [Обзор системы защиты содержимого](content-protection-overview.md)
- [Проектирование системы для защиты содержимого с несколькими подсистемами DRM и управлением доступом](design-multi-drm-system-with-access-control.md)

### <a name="should-i-use-http-or-https"></a>Должен ли я использовать HTTP или HTTPS?
Приложение проигрывателя ASP.NET MVC, которое мы разработали, должно поддерживать следующее:

* Проверку подлинности пользователя через Azure AD, который должен находиться в разделе HTTPS.
* Обмен маркерами JWT между клиентом и Azure AD, который находится в разделе HTTPS.
* Приобретение лицензий DRM клиентом, который должен находиться в разделе HTTPS, если доставка лицензий осуществляется Службами мультимедиа. Набор продуктов PlayReady не требует HTTPS для доставки лицензий. Если ваш сервер лицензирования PlayReady находится за пределами Служб мультимедиа, можно использовать HTTP или HTTPS.

Приложение проигрывателя ASP.NET использует рекомендуемый протокол HTTPS, поэтому проигрыватель находится на странице в разделе HTTPS. Тем не менее, HTTP является предпочтительным для потоковой передачи, поэтому необходимо рассмотреть эти вопросы со смешанным контентом:

* Браузер запрещает смешанное содержимое. Но плагины, как Silverlight и OSMF плагин для гладких и DASH позволяют. Смешанное содержимое вызывает озабоченность в плане безопасности из-за угрозы возможности вводить вредоносный JavaScript, который может подвергать риску данные клиентов. Браузеры по умолчанию блокируют эту возможность. На данный момент единственным способом обойти это на стороне сервера (источника) — разрешить все домены (и HTTPS, и HTTP). Это, скорее всего, тоже не самая лучшая идея.
* Не следует использовать смешанное содержимое. Приложение проигрывателя и Проигрыватель мультимедиа должны использовать HTTP или HTTPS. Когда вы играете смешанное содержание, SilverlightSS технологий требует очистки смешанного содержания предупреждение. Технология FlashSS обрабатывает смешанное содержимое без предупреждения о смешанном контенте.
* Если конечная точка потоковой передачи была создана до августа 2014 г., она не будет поддерживать протокол HTTPS. В этом случае создайте и используйте новую конечную точку потоковой передачи для использования протокола HTTPS.

### <a name="what-about-live-streaming"></a>Как насчет динамической потоковой передачи?

Вы можете использовать точно такой же дизайн и реализацию, чтобы защитить потоковую передачу в Media Services, рассматривая актив, связанный с программой, как актив VOD. Чтобы обеспечить мульти-DRM защиту живого контента, примените ту же настройку/обработку к активу, как если бы это был актив VOD, прежде чем связать актив с живым выходом.

### <a name="what-about-license-servers-outside-media-services"></a>Как насчет серверов лицензирования за пределами служб мультимедиа?

Часто клиенты инвестировали в ферму серверов лицензий либо в свой собственный центр обработки данных, либо в ферму, размещенную поставщиками услуг DRM. Система защиты содержимого Служб мультимедиа дает возможность работы в гибридном режиме. Содержимое может быть размещено и динамически защищено в Службах Медиа, в то время как лицензии DRM доставляются серверами за пределами Media Services. В этом случае обратите внимание на следующие изменения:

* Служба маркеров безопасности должна выдавать маркеры, которые являются допустимыми и могут быть проверены на ферме серверов лицензий. Например, серверы лицензий Widevine, предоставляемые Axinom, требуют определенного маркера JWT, который содержит сообщение о правах. Вы должны иметь STS выдать такой JWT. 
* Настройка службы доставки лицензий в Службах мультимедиа больше не требуется. При настройке необходимо предоставить URL-адреса для получения лицензии (для PlayReady, Widevine и `ContentKeyPolicy`FairPlay).

> [!NOTE]
> Widevine — это услуга, предоставляемая Google и подчиняевая условиям политики обслуживания и конфиденциальности Google.

## <a name="media-services-v2-vs-v3"></a>Медиа Сервисы v2 vs. v3 

### <a name="can-i-use-the-azure-portal-to-manage-v3-resources"></a>Могу ли я использовать портал Azure для управления ресурсами версии 3?

В настоящее время вы можете использовать [портал Azure](https://portal.azure.com/) для:

* Управление [жить события](live-events-outputs-concept.md) в медиа-услуг v3. 
* Просмотр (не управлять) [v3 активов](assets-concept.md). 
* [Получить информацию о доступе к AIS](access-api-portal.md). 

Для всех других задач управления (например, [Transforms and Jobs](transforms-jobs-concept.md) and [content protection)](content-protection-overview.md)используйте [REST API,](https://docs.microsoft.com/rest/api/media/) [Azure CLI](https://aka.ms/ams-v3-cli-ref)или один из поддерживаемых [SDK.](media-services-apis-overview.md#sdks)

### <a name="is-there-an-assetfile-concept-in-v3"></a>Существует элемент AssetFile в версии 3?

Концепция `AssetFile` была удалена из API медиа-услуг, чтобы отделить медиа-сервисы от зависимости SDK-хранилища. Теперь Хранилище Azure, а не медиа-службы, хранит информацию, соотвенеекоторой в SDK хранения. 

Дополнительные сведения см. в разделе [Руководство по миграции из версии 2 в версию 3 Служб мультимедиа](media-services-v2-vs-v3.md).

### <a name="where-did-client-side-storage-encryption-go"></a>Где происходит шифрование хранилища на стороне клиента?

Теперь мы рекомендуем использовать шифрование хранилища сервера (которое происходит по умолчанию). Для получения дополнительной [Azure Storage Service Encryption for data at rest](https://docs.microsoft.com/azure/storage/common/storage-service-encryption)информации см.

## <a name="offline-streaming"></a>Оффлайн-потоковая передача

### <a name="fairplay-streaming-for-ios"></a>Потоковая передача FairPlay для iOS

Следующие часто задаваемые вопросы обеспечивают помощь в устранении неполадок в автономном режиме FairPlay потокового для iOS.

#### <a name="why-does-only-audio-play-but-not-video-during-offline-mode"></a>Почему в автономном режиме воспроизводится только звук, но нет видео?

Такое поведение, по-видимому, связано с дизайном примера приложения. При подоплеке альтернативной звуковой дорожки (что относится к HLS) в автономном режиме, по умолчанию по умолчанию по являются альтернативные звуковые дорожки iOS 10 и iOS 11. Чтобы компенсировать это поведение в автономном режиме FPS, удалите альтернативный звуковой трек из потока. Для этого в Службах Медиа добавьте динамический фильтр **манифеста audio-only-false.** Другими словами, URL HLS заканчивается **.ism/manifest (format-m3u8-aapl, audio-only-false)**. 

#### <a name="why-does-it-still-play-audio-only-without-video-during-offline-mode-after-i-add-audio-onlyfalse"></a>Почему после добавления audio-only=false в автономном режиме по-прежнему воспроизводится аудио без видео?

В зависимости от конструкции ключа кэша для сети доставки содержимого содержимое может быть кэшировано. Очистите кэш.

#### <a name="is-fps-offline-mode-supported-on-ios-11-in-addition-to-ios-10"></a>Поддерживается ли офлайн-режим FPS на iOS 11 в дополнение к iOS 10?

Да. Автономный режим FPS поддерживается в iOS 10 и в iOS 11.

#### <a name="why-cant-i-find-the-document-offline-playback-with-fairplay-streaming-and-http-live-streaming-in-the-fps-server-sdk"></a>Почему я не могу найти документ автономного воспроизведения с помощью потоковой передачи FairPlay и HTTP Live Streaming в пакете SDK сервера FPS?

Начиная с 4-й версии пакета SDK сервера FPS, этот документ был объединен с руководством по потоковому программированию FairPlay.

#### <a name="what-is-the-downloadedoffline-file-structure-on-ios-devices"></a>Какова структура скачанного или автономного файла на устройствах iOS?

Структура скачанного файла на устройстве iOS выглядит как на следующем снимке экрана. В папке `_keys` хранятся скачанные лицензии FPS, один файл хранилища для каждого узла службы лицензий. В папке `.movpkg` хранится аудио- и видеосодержимое. 

Первая папка с именем, которая заканчивается тире, а затем число содержит видео-контент. Числовое значение является пиковой пропускной способностью видео-выдачи. Вторая папка с именем, заканчивающимся тире, за которым следует 0, содержит аудио. Третья папка `Data` с именем содержит основной плейлист содержимого FPS. Наконец, boot.xml предоставляет полное описание содержимого папки `.movpkg`. 

![Структура файлов в автономном режиме для примера приложения FairPlay iOS](media/offline-fairplay-for-ios/offline-fairplay-file-structure.png)

Вот пример boot.xml файла:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<HLSMoviePackage xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance" xmlns="http://apple.com/IMG/Schemas/HLSMoviePackage" xsi:schemaLocation="http://apple.com/IMG/Schemas/HLSMoviePackage /System/Library/Schemas/HLSMoviePackage.xsd">
  <Version>1.0</Version>
  <HLSMoviePackageType>PersistedStore</HLSMoviePackageType>
  <Streams>
    <Stream ID="1-4DTFY3A3VDRCNZ53YZ3RJ2NPG2AJHNBD-0" Path="1-4DTFY3A3VDRCNZ53YZ3RJ2NPG2AJHNBD-0" NetworkURL="https://willzhanmswest.streaming.mediaservices.windows.net/e7c76dbb-8e38-44b3-be8c-5c78890c4bb4/MicrosoftElite01.ism/QualityLevels(127000)/Manifest(aac_eng_2_127,format=m3u8-aapl)">
      <Complete>YES</Complete>
    </Stream>
    <Stream ID="0-HC6H5GWC5IU62P4VHE7NWNGO2SZGPKUJ-310656" Path="0-HC6H5GWC5IU62P4VHE7NWNGO2SZGPKUJ-310656" NetworkURL="https://willzhanmswest.streaming.mediaservices.windows.net/e7c76dbb-8e38-44b3-be8c-5c78890c4bb4/MicrosoftElite01.ism/QualityLevels(161000)/Manifest(video,format=m3u8-aapl)">
      <Complete>YES</Complete>
    </Stream>
  </Streams>
  <MasterPlaylist>
    <NetworkURL>https://willzhanmswest.streaming.mediaservices.windows.net/e7c76dbb-8e38-44b3-be8c-5c78890c4bb4/MicrosoftElite01.ism/manifest(format=m3u8-aapl,audio-only=false)</NetworkURL>
  </MasterPlaylist>
  <DataItems Directory="Data">
    <DataItem>
      <ID>CB50F631-8227-477A-BCEC-365BBF12BCC0</ID>
      <Category>Playlist</Category>
      <Name>master.m3u8</Name>
      <DataPath>Playlist-master.m3u8-CB50F631-8227-477A-BCEC-365BBF12BCC0.data</DataPath>
      <Role>Master</Role>
    </DataItem>
  </DataItems>
</HLSMoviePackage>
```

### <a name="widevine-streaming-for-android"></a>Широкая потоковая передача для Android

#### <a name="how-can-i-deliver-persistent-licenses-offline-enabled-for-some-clientsusers-and-non-persistent-licenses-offline-disabled-for-others-do-i-have-to-duplicate-the-content-and-use-separate-content-keys"></a>Как я могу предоставлять постоянные лицензии (в автономном режиме) для некоторых клиентов/пользователей и нестационарных лицензий (отключенных в автономном режиме) для других? Должен ли я дублировать содержимое и использовать отдельные ключи контента?

Поскольку Media Services v3 позволяет `StreamingLocator` активу иметь несколько экземпляров, вы можете иметь:

* Один `ContentKeyPolicy` экземпляр `license_type = "persistent"` `ContentKeyPolicyRestriction` с , `"persistent"`с `StreamingLocator`претензией на , и его .
* Другой `ContentKeyPolicy` экземпляр `license_type="nonpersistent"` `ContentKeyPolicyRestriction` с , `"nonpersistent`с претензией на ", и его `StreamingLocator`.
* Два `StreamingLocator` экземпляра с `ContentKey` разными значениями.

В зависимости от бизнес-логики пользовательской службы маркеров безопасности публикуются разные заявки в маркере JWT. С маркером возможно получить только соответствующие лицензии и воспроизводить только соответствующие URL-адреса.

#### <a name="what-is-the-mapping-between-the-widevine-and-media-services-drm-security-levels"></a>Что такое сопоставление между уровнями безопасности Widevine и Media Services DRM?

Google в "Widevine DRM Архитектура Обзор" определяет три уровня безопасности. Однако [в документации Медиа-службы Azure по шаблону лицензий Widevine](widevine-license-template-overview.md) излагаются пять уровней безопасности (требования к надежности клиентов для воспроизведения). В этом разделе объясняется, как отображают уровни безопасности.

Оба набора уровней безопасности определяются Google Widevine. Разница заключается в уровне использования: архитектура или API. В API Widevine используется пять уровней безопасности. Объект, `content_key_specs` который `security_level`содержит, десериализован и передан в глобальную службу доставки Widevine лицензионным сервисом Azure Media Services Widevine. В следующей таблице показано отображение между двумя наборами уровней безопасности.

| **Уровни безопасности, определенные в архитектуре Widevine** |**Уровни безопасности, используемые в API Widevine**|
|---|---| 
| **Уровень безопасности 1**: Все обработки контента, криптография и контроль выполняются в среде надежного выполнения (TEE). В некоторых моделях реализации обработка безопасности может выполняться в различных микросхемах.|**security_level No5**: Крипто, декодирование и вся обработка носителей (сжатых и несжатых) должны обрабатываться в рамках поддерживаемого оборудованием TEE.<br/><br/>**security_level No4**: Криптоидирование и декодирование контента должно выполняться в рамках поддерживаемого оборудованием TEE.|
**Уровень безопасности 2**: Криптография (но не обработка видео) выполняется в рамках TEE. Расшифрованные буферы возвращаются в домен приложения и обрабатываются с помощью отдельного видеоаппаратуры или программного обеспечения. Однако на уровне 2 криптографическая информация по-прежнему обрабатывается только в рамках TEE.| **security_level No3**: Ключевые материалы и криптооперации должны выполняться в рамках поддерживаемого оборудованием TEE. |
| **Уровень безопасности 3**: На устройстве нет TEE. Для защиты криптографической информации и расшифровки содержимого на операционной системе хоста могут быть приняты соответствующие меры. Реализация уровня 3 может также включать аппаратный криптографический движок, но это повышает только производительность, а не безопасность. | **security_level No2**: Требуется криптографическое программное обеспечение и запутанный декодер.<br/><br/>**security_level No1**: Требуется криптовалюта на основе программного обеспечения.|

#### <a name="why-does-content-download-take-so-long"></a>Почему для загрузки содержимого требуется так много времени?

Увеличить скорости загрузки можно двумя способами.

* Включите сеть доставки контента, чтобы пользователи с большей вероятностью попали в эту, а не конечную точку происхождения/потоковой передачи для загрузки контента. Если пользователь попадает в конечную точку потоковой передачи, каждый сегмент HLS или фрагмент DASH динамически упаковывается и шифруется. Несмотря на то, что эта задержка находится в миллисекундном масштабе для каждого сегмента или фрагмента, когда у вас есть часовое видео, накопленная задержка может быть большой и привести к более длительной загрузке.
* Предоставь пользователям возможность выборочно загружать качественные видео слои и звуковые дорожки вместо всего содержимого. Для автономного режима нет смысла загружать все качественные слои. Это достигается двумя способами.

  * Клиент контролируется: приложение игрока автоматически выбирает, или пользователь выбирает, слой качества видео и аудио треков для загрузки.
  * Управление службой: Вы можете использовать функцию Dynamic Manifest в службах мультимедиа Azure для создания (глобального) фильтра, который ограничивает плейлист HLS или DASH MPD одним слоем качества видео и выбранными звуковыми дорожками. Затем URL-адрес загрузки, представленный пользователям, будет включать этот фильтр.

## <a name="next-steps"></a>Следующие шаги

[Что такое Службы мультимедиа Azure версии 3?](media-services-overview.md)
