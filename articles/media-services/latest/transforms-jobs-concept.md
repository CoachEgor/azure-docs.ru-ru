---
title: Преобразования и задания в Службах мультимедиа Azure | Документация Майкрософт
description: При использовании Служб мультимедиа необходимо создать преобразование, чтобы описать правила или спецификации для обработки видео. В данной статье приводится обзор преобразования и способы его использования.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 02/20/2019
ms.author: juliako
ms.openlocfilehash: 1c2ec576211741390ef91233101261a7881e4180
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61466754"
---
# <a name="transforms-and-jobs"></a>Преобразования и задания

В этом разделе приводятся сведения об [преобразует](https://docs.microsoft.com/rest/api/media/transforms) и [заданий](https://docs.microsoft.com/rest/api/media/jobs) и рассказывает о связи между этими сущностями. Рабочий процесс выполнения преобразований и заданий показан на схеме.

![Transform](./media/encoding/transforms-jobs.png)

> [!NOTE]
> Свойства сущностей **Transform** и **Job** типа Datetime всегда задаются в формате UTC.

## <a name="transforms"></a>Transform

**Преобразования** можно использовать для настройки общих задач кодирования или анализа видеоматериалов. Каждое **преобразование** описывает набор инструкций (или рабочий процесс задач) для обработки видео- и аудиофайлов. Одно преобразование может применять несколько правил. Например, преобразование может указать, что каждое видео кодируется в MP4-файл с заданной скоростью и что эскиз будет создан из первого кадра видео. Необходимо добавить одну запись TransformOutput для каждого правила, которое требуется включить в преобразование. Можно создать преобразования в учетной записи Служб мультимедиа с помощью API Служб мультимедиа версии 3 или любого из опубликованных пакетов SDK. Так как API Служб мультимедиа версии 3 управляется с помощью Azure Resource Manager, вы можете использовать шаблоны Resource Manager для создания и развертывания преобразований в учетной записи Служб мультимедиа. Управление доступом на основе ролей можно использовать для блокировки доступа к преобразованиям.

Операция Update сущности [Transform](https://docs.microsoft.com/rest/api/media/transforms) предназначена для внесения изменений в описание или приоритеты базовой сущности TransformOutputs. Рекомендуется выполнять такие операции обновления после завершения всех текущих заданий. Если вы хотите перезаписать набор инструкций, нужно создать новое преобразование.

## <a name="jobs"></a>Задания

Объект **задание** содержит фактический запрос к Службам мультимедиа, который применяет **преобразование** к указанному видео- и (или) аудиосодержимому. После создания преобразования можно отправлять задания с помощью API Служб мультимедиа или любого из опубликованных пакетов SDK. **Задание** указывает такую информацию, как расположение входного и выходного видео. Расположение входного видео можно указать с помощью: URL-адресов HTTPS, URL-адресов SAS или [ресурсов](https://docs.microsoft.com/rest/api/media/assets).  

Используйте [задания входных данных из HTTPS](job-input-from-http-how-to.md) Если ваше содержимое уже доступны через URL-адрес и не нужно сохранить исходный файл в Azure (например, Импорт из S3). Этот метод также подходит, если у вас содержимое в хранилище BLOB-объектов Azure, но не требуются для размещения файла в ресурсе. В настоящее время этот метод поддерживает только один файл для входных данных.
 
Используйте [активов в качестве входных данных задания](job-input-from-local-file-how-to.md) если входное содержимое уже находится в ресурсе или содержимое хранится в локальном файле. Это также хороший вариант, если вы планируете опубликовать входного актива для потоковой передачи или загрузки (например, при необходимости для публикации MP4-файлов для загрузки, но также хотят сделать для преобразования речи в текст или распознавания лиц обнаружения). Этот метод поддерживает нескольких файлов ресурсов (например, MBR, потоковая передача наборов, которые были закодированы локально).
 
Ход выполнения и состояние заданий можно получить, отслеживая события с помощью Сетки событий. Дополнительные сведения см. в статье [Создание и мониторинг событий Служб мультимедиа Azure с помощью Сетки событий и Azure CLI](job-state-events-cli-how-to.md).

Операция Update сущности [Job](https://docs.microsoft.com/rest/api/media/jobs) может использоваться для изменения свойств *description*и *priority* после отправки задания. Изменение свойства *priority* вступает в силу только в том случае, если задание все еще находится в очереди. Если задание приступило к обработке или завершено, изменение приоритета не оказывает какого-либо влияния.

## <a name="typical-workflow"></a>Стандартный рабочий процесс

1. Создайте преобразование. 
2. Отправьте задания в преобразование. 
3. Выведите список преобразований. 
4. Удалите преобразование, если не планируете использовать его в будущем. 

### <a name="example"></a>Пример

Предположим, что требуется извлечь первый кадр всех видео в качестве эскиза. Ниже приведены действия по выполнению этого процесса. 

1. Определите правило для обработки (набор инструкций). Например, используйте первый кадр видео в качестве эскиза. 
2. Для каждого видео следует сообщить службе: 
    1. расположение видео;  
    2. место для записи выходных данных (например, эскиза). 

Шаблон **Преобразования** позволяет создать набор инструкций один раз (шаг 1) и отправить задания с использованием этой инструкции (шаг 2).

## <a name="job-error-codes"></a>Коды ошибок задания

См. статью о [кодах ошибок](https://docs.microsoft.com/rest/api/media/jobs/get#joberrorcode).

## <a name="paging"></a>Разбиение по страницам

Ознакомьтесь с разделом [Фильтрация, упорядочивание и разбиение по страницам сущностей Служб мультимедиа](entities-overview.md).

## <a name="configure-media-reserved-units"></a>Настройка зарезервированных единиц мультимедиа

Для заданий анализа аудио и видео, активируемых Службами мультимедиа версии 3 или Индексатором видео, настоятельно рекомендуется подготовить10 зарезервированных единиц мультимедиа (MRU) типа S3 в учетной записи. Если вам требуется более 10 единиц MRU S3, отправьте запрос в службу поддержки с помощью [портала Azure](https://portal.azure.com/).

Дополнительные сведения см. в разделе [Масштабирование при обработке мультимедиа](media-reserved-units-cli-how-to.md).

## <a name="next-steps"></a>Дальнейшие действия

- [Учебник. Отправка, кодирование и потоковая передача видео с помощью .NET](stream-files-tutorial-with-api.md)
- [Учебник. Анализ видео с помощью Служб мультимедиа версии 3 и .NET](analyze-videos-tutorial-with-api.md)
