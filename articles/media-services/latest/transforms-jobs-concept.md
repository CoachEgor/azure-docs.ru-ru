---
title: Преобразования и задания в Службах мультимедиа Azure | Документация Майкрософт
description: При использовании Служб мультимедиа необходимо создать преобразование, чтобы описать правила или спецификации для обработки видео. В данной статье приводится обзор преобразования и способы его использования.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 08/19/2019
ms.author: juliako
ms.openlocfilehash: 466ab0737aa5af40bd1bc137b98ab57a48feafde
ms.sourcegitcommit: 36e9cbd767b3f12d3524fadc2b50b281458122dc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2019
ms.locfileid: "69637358"
---
# <a name="transforms-and-jobs"></a>Преобразования и задания

В этом разделе приводятся сведения о [преобразованиях](https://docs.microsoft.com/rest/api/media/transforms) и [заданиях](https://docs.microsoft.com/rest/api/media/jobs) , а также объясняется связь между этими сущностями. 

## <a name="overview"></a>Обзор 

### <a name="transformsjobs-workflow"></a>Рабочий процесс преобразования и задания

Рабочий процесс выполнения преобразований и заданий показан на схеме.

![Transform](./media/encoding/transforms-jobs.png)

#### <a name="typical-workflow"></a>Стандартный рабочий процесс

1. Создайте преобразование. 
2. Отправьте задания в преобразование. 
3. Выведите список преобразований. 
4. Удалите преобразование, если не планируете использовать его в будущем. 

#### <a name="example"></a>Пример

Предположим, что требуется извлечь первый кадр всех видео в качестве эскиза. Ниже приведены действия по выполнению этого процесса. 

1. Определите правило для обработки (набор инструкций). Например, используйте первый кадр видео в качестве эскиза. 
2. Для каждого видео следует сообщить службе: 
    1. расположение видео;  
    2. место для записи выходных данных (например, эскиза). 

Шаблон **Преобразования** позволяет создать набор инструкций один раз (шаг 1) и отправить задания с использованием этой инструкции (шаг 2).

> [!NOTE]
> Свойства сущностей **Transform** и **Job** типа Datetime всегда задаются в формате UTC.

## <a name="transforms"></a>Transform

**Преобразования** можно использовать для настройки общих задач кодирования или анализа видеоматериалов. Каждое **преобразование** описывает набор инструкций (или рабочий процесс задач) для обработки видео- и аудиофайлов. Одно преобразование может применять несколько правил. Например, преобразование может указать, что каждое видео кодируется в MP4-файл с заданной скоростью и что эскиз будет создан из первого кадра видео. Необходимо добавить одну запись TransformOutput для каждого правила, которое требуется включить в преобразование. Используйте предустановки, чтобы сообщить преобразованию, каким образом должны обрабатываться входные файлы мультимедиа.

### <a name="viewing-schema"></a>Просмотр схемы

В службах мультимедиа v3 предустановки являются строго типизированными сущностями в самом API. Определение схемы для этих объектов можно найти в [спецификации Open API (или Swagger)](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/mediaservices/resource-manager/Microsoft.Media/stable/2018-07-01). Предварительные определения (например, **стандарденкодерпресет**) можно также просмотреть в [REST API](https://docs.microsoft.com/rest/api/media/transforms/createorupdate#standardencoderpreset), [пакете SDK для .NET](https://docs.microsoft.com/dotnet/api/microsoft.azure.management.media.models.standardencoderpreset?view=azure-dotnet) (или в другой справочной документации по службам мультимедиа версии 3).

### <a name="creating-transforms"></a>Создание преобразований

Можно создавать преобразования с помощью функции RESTFUL, интерфейса командной строки или любого из опубликованных пакетов SDK. Так как API Служб мультимедиа версии 3 управляется с помощью Azure Resource Manager, вы можете использовать шаблоны Resource Manager для создания и развертывания преобразований в учетной записи Служб мультимедиа. Управление доступом на основе ролей можно использовать для блокировки доступа к преобразованиям.

### <a name="updating-transforms"></a>Обновление преобразований

Если необходимо обновить [Преобразование](https://docs.microsoft.com/rest/api/media/transforms), используйте операцию **обновления** . Он предназначен для внесения изменений в описание или приоритетов базовых Трансформаутпутс. Рекомендуется выполнять такие операции обновления после завершения всех текущих заданий. Если вы планируете переписать рецепт, необходимо создать новое преобразование.

### <a name="transform-object-diagram"></a>Преобразование диаграммы объектов

На следующей диаграмме показан объект **Transform** и объекты, на которые он ссылается, включая отношения производности. Серые стрелки показывают тип, на который ссылается задание, и зеленые стрелки показывают отношения наследования класса.<br/>Щелкните изображение, чтобы просмотреть его полноразмерную версию.  

<a href="./media/api-diagrams/transform-large.png" target="_blank"><img src="./media/api-diagrams/transform-small.png"></a> 

## <a name="jobs"></a>Задания

Объект **задание** содержит фактический запрос к Службам мультимедиа, который применяет **преобразование** к указанному видео- и (или) аудиосодержимому. После создания преобразования можно отправлять задания с помощью API Служб мультимедиа или любого из опубликованных пакетов SDK. **Задание** указывает такую информацию, как расположение входного и выходного видео. Расположение входного видео можно указать с помощью: URL-адресов HTTPS, URL-адресов SAS или [ресурсов](https://docs.microsoft.com/rest/api/media/assets).  

### <a name="job-input-from-https"></a>Входные данные задания из HTTPS

Используйте [входные данные задания из HTTPS](job-input-from-http-how-to.md) , если содержимое уже доступно через URL-адрес и вам не нужно хранить исходный файл в Azure (например, импортировать из S3). Этот метод также подходит, если вы используете содержимое в хранилище BLOB-объектов Azure, но не хотите, чтобы файл находился в ресурсе. В настоящее время этот метод поддерживает только один файл для ввода.

### <a name="asset-as-job-input"></a>Ресурс в качестве входных данных задания

Использовать [ресурс-контейнер в качестве входных данных задания](job-input-from-local-file-how-to.md) , если входное содержимое уже находится в ресурсе или содержимое хранится в локальном файле. Это также хороший вариант, если вы планируете опубликовать входной ресурс для потоковой передачи или загрузки (предположим, что вы хотите опубликовать файл MP4 для загрузки, но также хотите выполнить распознавание речи в тексте или распознавание лиц). Этот метод поддерживает Многофайловые ресурсы (например, наборы потоковых передач MBR, которые были закодированы локально).

### <a name="checking-job-progress"></a>Проверка хода выполнения задания

Ход выполнения и состояние заданий можно получить, отслеживая события с помощью Сетки событий. Дополнительные сведения см. в статье [Создание и мониторинг событий Служб мультимедиа Azure с помощью Сетки событий и Azure CLI](job-state-events-cli-how-to.md).

### <a name="updating-jobs"></a>Обновление заданий

Операция Update сущности [Job](https://docs.microsoft.com/rest/api/media/jobs) может использоваться для изменения свойств *description*и *priority* после отправки задания. Изменение свойства *priority* вступает в силу только в том случае, если задание все еще находится в очереди. Если задание приступило к обработке или завершено, изменение приоритета не оказывает какого-либо влияния.

### <a name="job-object-diagram"></a>Диаграмма объектов заданий

На следующей диаграмме показан объект **задания** и объекты, на которые он ссылается, включая отношения производности.<br/>Щелкните изображение, чтобы просмотреть его полноразмерную версию.  

<a href="./media/api-diagrams/job-large.png" target="_blank"><img src="./media/api-diagrams/job-small.png"></a> 

## <a name="configure-media-reserved-units"></a>Настройка зарезервированных единиц мультимедиа

Для заданий анализа аудио и видео, активируемых Службами мультимедиа версии 3 или Индексатором видео, настоятельно рекомендуется подготовить10 зарезервированных единиц мультимедиа (MRU) типа S3 в учетной записи. Если вам требуется более 10 единиц MRU S3, отправьте запрос в службу поддержки с помощью [портала Azure](https://portal.azure.com/).

Дополнительные сведения см. в разделе [Масштабирование при обработке мультимедиа](media-reserved-units-cli-how-to.md).

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="see-also"></a>См. также

* [Коды ошибок](https://docs.microsoft.com/rest/api/media/jobs/get#joberrorcode)
* [Фильтрация, упорядочение, подкачка сущностей служб мультимедиа](entities-overview.md)

## <a name="next-steps"></a>Следующие шаги

- Перед началом разработки ознакомьтесь [с разработкой с помощью API-интерфейсов служб мультимедиа v3](media-services-apis-overview.md) (содержит сведения о доступе к API, соглашения об именовании и т. д.).
- Ознакомьтесь с этими учебниками:

    - [Учебник. Кодирование удаленного файла на основе URL-адреса и потоковая передача видео](stream-files-tutorial-with-rest.md)
    - [Учебник. Отправка, кодирование и потоковая передача видео](stream-files-tutorial-with-api.md)
    - [Учебник. Анализ видео с помощью служб мультимедиа v3](analyze-videos-tutorial-with-api.md)
