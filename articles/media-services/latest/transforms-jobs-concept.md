---
title: Преобразования и вакансии в медиа-сервисах
titleSuffix: Azure Media Services
description: Узнайте, как создать преобразования для описания правил обработки видео в службах мультимедиа Azure.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 08/19/2019
ms.author: juliako
ms.openlocfilehash: ab99b974aed6f8cd5e1da2ee9b427f593b405889
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "73571238"
---
# <a name="transforms-and-jobs-in-media-services"></a>Преобразования и вакансии в медиа-сервисах

Эта тема дает подробную информацию о [преобразованиях](https://docs.microsoft.com/rest/api/media/transforms) и [вакансиях](https://docs.microsoft.com/rest/api/media/jobs) и объясняет взаимосвязь между этими сущностями.

## <a name="overview"></a>Обзор

### <a name="transformsjobs-workflow"></a>Преобразование/Рабочий рабочий процесс

Следующая диаграмма показывает преобразования/рабочие рабочие процессы:

![Преобразования и рабочие места в службах мультимедиа Azure](./media/encoding/transforms-jobs.png)

#### <a name="typical-workflow"></a>Стандартный рабочий процесс

1. Создайте трансформацию.
2. Отправить Вакансии под этим преобразование.
3. Список преобразований.
4. Удалите Преобразование, если вы не планируете использовать его в будущем.

#### <a name="example"></a>Пример

Предположим, вы хотели извлечь первый кадр из всех ваших видео, как эскиз изображения-шаги, которые вы бы принять являются:

1. Определите рецепт или правило для обработки видео: «используйте первый кадр видео в качестве эскиза».
2. Для каждого видео, вы бы сказать службы:
    1. Где найти это видео.
    2. место для записи выходных данных (например, эскиза).

Шаблон **Преобразования** позволяет создать набор инструкций один раз (шаг 1) и отправить задания с использованием этой инструкции (шаг 2).

> [!NOTE]
> Свойства **Преобразования** и **Работы** типа Datetime всегда находятся в формате UTC.

## <a name="transforms"></a>Преобразования

**Преобразования** можно использовать для настройки общих задач кодирования или анализа видеоматериалов. Каждый **Преобразование** описывает рецепт или рабочий процесс задач для обработки видео или аудио файлов. Одно преобразование может применять несколько правил. Например, преобразование может указать, что каждое видео кодируется в MP4-файл с заданной скоростью и что эскиз будет создан из первого кадра видео. Необходимо добавить одну запись TransformOutput для каждого правила, которое требуется включить в преобразование. Вы используете пресеты, чтобы рассказать Преобразование о том, как должны обрабатываться файлы ввода.

### <a name="viewing-schema"></a>Просмотр схемы

В Media Services v3 пресеты являются сильно набранными сущностями в самом API. Вы можете найти определение "схема" для этих объектов в [Open API спецификации (или Swagger)](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/mediaservices/resource-manager/Microsoft.Media/stable/2018-07-01). Вы также можете просмотреть предустановленные определения **(например, StandardEncoderPreset)** в [REST API](https://docs.microsoft.com/rest/api/media/transforms/createorupdate#standardencoderpreset), [.NET SDK](https://docs.microsoft.com/dotnet/api/microsoft.azure.management.media.models.standardencoderpreset?view=azure-dotnet)или в другой справочной документации Media Services v3 SDK.

### <a name="creating-transforms"></a>Создание преобразований

Преобразование можно создавать с помощью REST, CLI или любого из опубликованных SDK. Так как API Служб мультимедиа версии 3 управляется с помощью Azure Resource Manager, вы можете использовать шаблоны Resource Manager для создания и развертывания преобразований в учетной записи Служб мультимедиа. Управление доступом на основе ролей можно использовать для блокировки доступа к преобразованиям.

### <a name="updating-transforms"></a>Обновление преобразований

Если вам нужно [Transform](https://docs.microsoft.com/rest/api/media/transforms)обновить преобразование, используйте операцию **обновления.** Предназначен для внесения изменений в описание или приоритеты базовых TransformOutputs. Рекомендуется, чтобы такие обновления выполнялись, когда все незавершенные задания были завершены. Если вы собираетесь переписать рецепт, вам нужно создать новый Transform.

### <a name="transform-object-diagram"></a>Преобразование диаграммы объекта

На следующей диаграмме показан объект **Transform** и объекты, на которые он ссылается, включая отношения произвобия. Серые стрелки показывают тип, который ссылки Наработу и зеленые стрелки показывают отношения произвобиания класса.

Выберите изображение, чтобы просмотреть его полного размера.  

<a href="./media/api-diagrams/transform-large.png" target="_blank"><img src="./media/api-diagrams/transform-small.png"></a>

## <a name="jobs"></a>Задания

**Работа** — это фактический запрос в Службу средств массовой информации на применение **Преобразования** к данному вхотворного видео или аудиоконтенту. После создания преобразования можно отправлять задания с помощью API Служб мультимедиа или любого из опубликованных пакетов SDK. **Задание** указывает такую информацию, как расположение входного и выходного видео. Вы можете указать местоположение вхотворного видео с помощью: URL-адресов HTTPS, URL-адресов SAS или [активов.](https://docs.microsoft.com/rest/api/media/assets)  

### <a name="job-input-from-https"></a>Вход задания от HTTPS

Используйте [ввод вакансий httpS,](job-input-from-http-how-to.md) если содержимое уже доступно через URL и вам не нужно хранить исходный файл в Azure (например, импорт из S3). Этот метод также подходит, если у вас есть содержимое в хранилище Azure Blob, но нет необходимости в файле, чтобы быть в активе. В настоящее время этот метод поддерживает только один файл для ввода.

### <a name="asset-as-job-input"></a>Актив как вход наяней

Используйте [актив в качестве ввода задания,](job-input-from-local-file-how-to.md) если содержимое ввода уже находится в активе или содержимое хранится в локальном файле. Это также хороший вариант, если вы планируете опубликовать входиновый актив для потоковой передачи или загрузки (скажем, вы хотите опубликовать mp4 для скачивания, но также хотите сделать речь к тексту или обнаружению лица). Этот метод поддерживает многофайлные ресурсы (например, наборы потоковой передачи MBR, которые были закодированы локально).

### <a name="checking-job-progress"></a>Проверка хода выполнения работ

Ход выполнения и состояние заданий можно получить, отслеживая события с помощью Сетки событий. Дополнительные сведения см. в статье [Создание и мониторинг событий Служб мультимедиа Azure с помощью Сетки событий и Azure CLI](job-state-events-cli-how-to.md).

### <a name="updating-jobs"></a>Обновление вакансий

Операция обновления сущности [«Работа»](https://docs.microsoft.com/rest/api/media/jobs) может быть использована для изменения *описания* и *приоритетных* свойств после отправки задания. Изменение свойства *priority* вступает в силу только в том случае, если задание все еще находится в очереди. Если задание приступило к обработке или завершено, изменение приоритета не оказывает какого-либо влияния.

### <a name="job-object-diagram"></a>Диаграмма объекта работы

На следующей диаграмме показан объект **«Джон»** и объекты, на которые он ссылается, включая отношения произвии.

Щелкните изображение, чтобы просмотреть его полноразмерную версию.  

<a href="./media/api-diagrams/job-large.png" target="_blank"><img src="./media/api-diagrams/job-small.png"></a>

## <a name="configure-media-reserved-units"></a>Настройка зарезервированных единиц мультимедиа

Для аудиоанализа и видеоанализа вакансий, которые запускаются Media Services v3 или Video Indexer, настоятельно рекомендуется предоставить свою учетную запись с 10 S3 Media Reserved единиц (MRUs). Если вам требуется более 10 единиц MRU S3, отправьте запрос в службу поддержки с помощью [портала Azure](https://portal.azure.com/).

Дополнительные сведения см. в разделе [Масштабирование при обработке мультимедиа](media-reserved-units-cli-how-to.md).

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="see-also"></a>См. также

* [Коды ошибок](https://docs.microsoft.com/rest/api/media/jobs/get#joberrorcode)
* [Фильтрация, упорядочивание и разбиение по страницам сущностей Служб мультимедиа](entities-overview.md)

## <a name="next-steps"></a>Дальнейшие действия

- Прежде чем приступить к разработке, просмотрите [разработку с помощью AIS Media Services v3](media-services-apis-overview.md) (включает информацию о доступе к AIS, именования конвенций и т.д.)
- Проверьте эти учебники:

    - [Учебник: Кодирование удаленного файла на основе URL и потоковое видео](stream-files-tutorial-with-rest.md)
    - [Учебник: Загрузка, кодирование и потоковое видео](stream-files-tutorial-with-api.md)
    - [Учебник: Анализ видео с Медиа-сервисов v3](analyze-videos-tutorial-with-api.md)
