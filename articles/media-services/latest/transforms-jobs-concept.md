---
title: Преобразования и задания в Службах мультимедиа Azure | Документация Майкрософт
description: При использовании Служб мультимедиа необходимо создать преобразование, чтобы описать правила или спецификации для обработки видео. В данной статье приводится обзор преобразования и способы его использования.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 05/08/2019
ms.author: juliako
ms.openlocfilehash: 01b386c820a09af0e616698aabc58a886c30bb09
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "65550929"
---
# <a name="transforms-and-jobs"></a>Преобразования и задания

В этом разделе приводятся сведения об [преобразует](https://docs.microsoft.com/rest/api/media/transforms) и [заданий](https://docs.microsoft.com/rest/api/media/jobs) и рассказывает о связи между этими сущностями. 

## <a name="overview"></a>Обзор 

### <a name="transformsjobs-workflow"></a>Преобразования и задания рабочего процесса

Рабочий процесс выполнения преобразований и заданий показан на схеме.

![Transform](./media/encoding/transforms-jobs.png)

#### <a name="typical-workflow"></a>Стандартный рабочий процесс

1. Создайте преобразование. 
2. Отправьте задания в преобразование. 
3. Выведите список преобразований. 
4. Удалите преобразование, если не планируете использовать его в будущем. 

#### <a name="example"></a>Пример

Предположим, что требуется извлечь первый кадр всех видео в качестве эскиза. Ниже приведены действия по выполнению этого процесса. 

1. Определите правило для обработки (набор инструкций). Например, используйте первый кадр видео в качестве эскиза. 
2. Для каждого видео следует сообщить службе: 
    1. расположение видео;  
    2. место для записи выходных данных (например, эскиза). 

Шаблон **Преобразования** позволяет создать набор инструкций один раз (шаг 1) и отправить задания с использованием этой инструкции (шаг 2).

> [!NOTE]
> Свойства сущностей **Transform** и **Job** типа Datetime всегда задаются в формате UTC.

## <a name="transforms"></a>Transform

**Преобразования** можно использовать для настройки общих задач кодирования или анализа видеоматериалов. Каждое **преобразование** описывает набор инструкций (или рабочий процесс задач) для обработки видео- и аудиофайлов. Одно преобразование может применять несколько правил. Например, преобразование может указать, что каждое видео кодируется в MP4-файл с заданной скоростью и что эскиз будет создан из первого кадра видео. Необходимо добавить одну запись TransformOutput для каждого правила, которое требуется включить в преобразование. Использовать предустановки определить преобразования, каким образом должны обрабатываться входные файлы мультимедиа.

### <a name="viewing-schema"></a>Просмотр схемы

В версии 3 службы мультимедиа стили являются строго типизированных сущностей в API. Определение «schema» для этих объектов можно найти [спецификации Openapi (или Swagger)](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/mediaservices/resource-manager/Microsoft.Media/stable/2018-07-01). Вы также можете просмотреть существующие определения (например **StandardEncoderPreset**) в [REST API](https://docs.microsoft.com/rest/api/media/transforms/createorupdate#standardencoderpreset), [пакета SDK для .NET](https://docs.microsoft.com/dotnet/api/microsoft.azure.management.media.models.standardencoderpreset?view=azure-dotnet) (или других справочная документация служб мультимедиа v3 SDK).

### <a name="creating-transforms"></a>Создание преобразования

Можно создать с помощью REST, интерфейс командной строки, преобразования или использовать любой из опубликованных пакетов SDK. Так как API Служб мультимедиа версии 3 управляется с помощью Azure Resource Manager, вы можете использовать шаблоны Resource Manager для создания и развертывания преобразований в учетной записи Служб мультимедиа. Управление доступом на основе ролей можно использовать для блокировки доступа к преобразованиям.

### <a name="updating-transforms"></a>Обновление преобразований

Если вам нужно обновить ваш [преобразования](https://docs.microsoft.com/rest/api/media/transforms), использовать **обновление** операции. Он предназначен для внесения изменений в описании или приоритеты базовой TransformOutputs. Рекомендуется выполнять такие операции обновления после завершения всех текущих заданий. Если планируется переписывать рецепт, необходимо создать новое преобразование.

### <a name="transform-object-diagram"></a>Преобразование схема объекта

На следующей схеме показано **преобразования** и объекты, которые он ссылается, включая отношения наследования. Серых стрелок отображения типа, что ссылки задания и зеленых стрелок показывает отношения между классами наследования.<br/>Щелкните изображение, чтобы просмотреть его полноразмерную версию.  

<a href="./media/api-diagrams/transform-large.png" target="_blank"><img src="./media/api-diagrams/transform-small.png"></a> 

## <a name="jobs"></a>Задания

Объект **задание** содержит фактический запрос к Службам мультимедиа, который применяет **преобразование** к указанному видео- и (или) аудиосодержимому. После создания преобразования можно отправлять задания с помощью API Служб мультимедиа или любого из опубликованных пакетов SDK. **Задание** указывает такую информацию, как расположение входного и выходного видео. Расположение входного видео можно указать с помощью: URL-адресов HTTPS, URL-адресов SAS или [ресурсов](https://docs.microsoft.com/rest/api/media/assets).  

### <a name="job-input-from-https"></a>Входные данные задания из HTTPS

Используйте [задания входных данных из HTTPS](job-input-from-http-how-to.md) Если ваше содержимое уже доступны через URL-адрес и не нужно сохранить исходный файл в Azure (например, Импорт из S3). Этот метод также подходит, если у вас содержимое в хранилище BLOB-объектов Azure, но не требуются для размещения файла в ресурсе. В настоящее время этот метод поддерживает только один файл для входных данных.

### <a name="asset-as-job-input"></a>Ресурс как входные данные задания

Используйте [активов в качестве входных данных задания](job-input-from-local-file-how-to.md) если входное содержимое уже находится в ресурсе или содержимое хранится в локальном файле. Это также хороший вариант, если вы планируете опубликовать входного актива для потоковой передачи или загрузки (например, при необходимости для публикации MP4-файлов для загрузки, но также хотят сделать для преобразования речи в текст или распознавания лиц обнаружения). Этот метод поддерживает нескольких файлов ресурсов (например, MBR, потоковая передача наборов, которые были закодированы локально).

### <a name="checking-job-progress"></a>Проверка хода выполнения задания

Ход выполнения и состояние заданий можно получить, отслеживая события с помощью Сетки событий. Дополнительные сведения см. в статье [Создание и мониторинг событий Служб мультимедиа Azure с помощью Сетки событий и Azure CLI](job-state-events-cli-how-to.md).

### <a name="updating-jobs"></a>Обновление задания

Операция Update сущности [Job](https://docs.microsoft.com/rest/api/media/jobs) может использоваться для изменения свойств *description*и *priority* после отправки задания. Изменение свойства *priority* вступает в силу только в том случае, если задание все еще находится в очереди. Если задание приступило к обработке или завершено, изменение приоритета не оказывает какого-либо влияния.

### <a name="job-object-diagram"></a>Схема объекта задания

На следующей схеме показано **задания** и объекты, которые он ссылается, включая отношения наследования.<br/>Щелкните изображение, чтобы просмотреть его полноразмерную версию.  

<a href="./media/api-diagrams/job-large.png" target="_blank"><img src="./media/api-diagrams/job-small.png"></a> 

## <a name="configure-media-reserved-units"></a>Настройка зарезервированных единиц мультимедиа

Для заданий анализа аудио и видео, активируемых Службами мультимедиа версии 3 или Индексатором видео, настоятельно рекомендуется подготовить10 зарезервированных единиц мультимедиа (MRU) типа S3 в учетной записи. Если вам требуется более 10 единиц MRU S3, отправьте запрос в службу поддержки с помощью [портала Azure](https://portal.azure.com/).

Дополнительные сведения см. в разделе [Масштабирование при обработке мультимедиа](media-reserved-units-cli-how-to.md).

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="see-also"></a>См. также

* [Коды ошибок](https://docs.microsoft.com/rest/api/media/jobs/get#joberrorcode)
* [Фильтрации, упорядочивания, разбиение по страницам сущностей служб мультимедиа](entities-overview.md)

## <a name="next-steps"></a>Дальнейшие действия

- Перед началом разработки, просмотрите [разработка с использованием API-интерфейсы служб мультимедиа v3](media-services-apis-overview.md) (включает в себя сведения о доступе к API-интерфейсы, соглашения об именовании и т. д.)
- Ознакомьтесь с этими руководствами:

    - [Учебник. Отправка, кодирование и потоковая передача видео с помощью .NET](stream-files-tutorial-with-api.md)
    - [Учебник. Анализ видео с помощью Служб мультимедиа версии 3 и .NET](analyze-videos-tutorial-with-api.md)
