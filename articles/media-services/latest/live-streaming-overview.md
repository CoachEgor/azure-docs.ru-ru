---
title: Обзор потоковой передачи в прямом эфире с помощью служб ы сми Azure v3 (ru) Документы Майкрософт
description: В этой статье содержатся общие сведения о потоковой трансляции в реальном времени с использованием Служб мультимедиа Azure версии 3.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 03/18/2020
ms.author: juliako
ms.openlocfilehash: e2c4e5b6c10b06d82a1933962cb2d97e031876a5
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80068021"
---
# <a name="live-streaming-with-azure-media-services-v3"></a>Потоковая трансляция в Службах мультимедиа Azure версии 3

Службы мультимедиа Azure дают возможность предоставлять клиентам события прямой трансляции в облаке Azure. Для потоковой передачи событий прямой трансляции с помощью Служб мультимедиа вам потребуются:  

- камера для записи события;<br/>Чтобы установить оборудование, ознакомьтесь с записью блога [Simple and portable event video gear setup]( https://link.medium.com/KNTtiN6IeT) (Настройка простого портативного оборудования для сьемки).

    Если у вас нет доступа к камере, такие инструменты, как [Telestream Wirecast](https://www.telestream.net/wirecast/overview.htm) могут быть использованы для создания живой ленты из видеофайла.
- Динамический видеокодировщик, преобразующий сигналы с камеры (или другого устройства, например ноутбука) в исходный поток, который передается в Службы мультимедиа. этот поток может содержать сигналы, связанные с рекламой, например метки SCTE-35;<br/>Список рекомендуемых кодировщиков потоковой трансляции см. в [этой статье](recommended-on-premises-live-encoders.md). Кроме того, проверить этот блог: [Live потокового производства с OBS](https://link.medium.com/ttuwHpaJeT).
- компоненты Служб мультимедиа, которые дают возможность принимать, просматривать, упаковывать, записывать, шифровать и транслировать события в реальном времени непосредственно клиентам или в сеть доставки содержимого (CDN) для дальнейшего распространения.

В этой статье приводится обзор и руководство по потоковой передаче в прямом эфире с медиа-службами и ссылки на другие соответствующие статьи.
 
> [!NOTE]
> Вы можете использовать [портал Azure](https://portal.azure.com/) для управления v3 [Live Events,](live-events-outputs-concept.md)просмотра [активов](assets-concept.md)v3, получения информации о доступе к AIS. Для всех других задач управления (например, Transforms и Jobs) используйте [REST API,](https://docs.microsoft.com/rest/api/media/) [CLI](https://aka.ms/ams-v3-cli-ref)или один из поддерживаемых [SDK.](media-services-apis-overview.md#sdks)

## <a name="dynamic-packaging"></a>Динамическое упаковывание

С помощью media Services вы можете воспользоваться [преимуществами Dynamic Packaging,](dynamic-packaging-overview.md)которая позволяет просматривать и транслировать свои прямые трансляции в [форматах MPEG DASH, HLS и Smooth Streaming](https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming) из канала вклада, который отправляется в службу. Ваши зрители могут воспроизводить трансляцию с помощью любых проигрывателей, поддерживающих HLS, DASH и Smooth Streaming. Для доставки потока в любом из этих протоколов можно использовать [Проигрыватель мультимедиа Azure](https://amp.azure.net/libs/amp/latest/docs/index.html) в мобильном или веб-приложении.

## <a name="dynamic-encryption"></a>динамическое шифрование.

Динамическое шифрование позволяет динамически шифровать ваш живой или по требованию контент с помощью AES-128 или любой из трех основных систем управления цифровыми правами (DRM): Microsoft PlayReady, Google Widevine и Apple FairPlay. Они также обеспечивают службу доставки ключей AES и лицензий DRM (PlayReady, Widevine и FairPlay) авторизованным клиентам. Для получения дополнительной информации [см.](content-protection-overview.md)

> [!NOTE]
> Widevine — это служба, которая предоставляется компанией Google Inc. и подпадает под условия предоставления услуг и политику конфиденциальности Google Inc.

## <a name="dynamic-manifest"></a>Динамический манифест

Динамическая фильтрация используется для управления количеством треков, форматов, битратов и окон времени представления, которые отправляются игрокам. Для получения дополнительной [информации](filters-dynamic-manifest-overview.md)см.

## <a name="live-event-types"></a>Типы событий потоковой трансляции

[События потоковой трансляции](https://docs.microsoft.com/rest/api/media/liveevents) отвечают за прием и обработку видеопотоков. В прямом эфире событие может быть установленлибо либо *сквозной* (на месте жить кодер посылает несколько битрат поток) или *жить кодирования* (на месте живой кодер посылает один битрат поток). Для получения подробной информации о потоковой передаче в Media Services v3 [см.](live-events-outputs-concept.md)

### <a name="pass-through"></a>Сквозной режим

![Сквозной режим](./media/live-streaming/pass-through.svg)

При использовании сквозного **Live Event**вы полагаетесь на свой внепредированный живой кодер для создания мультикретного видеопотока и отправки его в качестве канала вклада в Live Event (с помощью протокола ввода RTMP или фрагментированного MP4). Затем Live Event переносит входящие видеопотоки в динамический упаковщик (Streaming Endpoint) без дальнейшего транскодирования. Такое сквозное Live Event оптимизировано для длительных живых событий или 24x365 линейной потоковой передачи. 

### <a name="live-encoding"></a>Кодирование в реальном времени  

![Кодирование в реальном времени](./media/live-streaming/live-encoding.svg)

При использовании облачного кодирования с помощью Медиа-сервисов можно настроить свой внепредконь для отправки одного битратного видео в качестве канала вклада (до 32 Мбит/с) в Live Event (с использованием протокола ввода RTMP или фрагментированного MP4). Live Event транскодирует входящий поток одного битрата в [несколько потоков битратного видео](https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming) с различными разрешениями, чтобы улучшить доставку, и делает его доступным для доставки на устройства воспроизведения через стандартные отраслевые протоколы, такие как MPEG-DASH, Apple HTTP Live Streaming (HLS) и Microsoft Smooth Streaming. 

### <a name="live-transcription-preview"></a>Прямая транскрипция (предварительный просмотр)

Прямая транскрипция — это функция, которую можно использовать с Live Events, которые либо проходят через, либо кодируются в реальном времени. Для получения дополнительной [информации, смотрите живую транскрипцию](live-transcription.md). Когда эта функция включена, служба использует функцию [Speech-To-Text](../../cognitive-services/speech-service/speech-to-text.md) Cognitive Services для транскрибировать произнесенные слова в входящий звук в текст. Этот текст затем становится доступным для доставки вместе с видео и аудио в Протоколах MPEG-DASH и HLS.

> [!NOTE]
> В настоящее время, живая транскрипция доступна в качестве функции предварительного просмотра в West US 2.

## <a name="live-streaming-workflow"></a>Рабочий процесс для потоковой трансляции в реальном времени

Чтобы понять рабочий процесс потоковой передачи в Media Services v3, необходимо сначала просмотреть и понять следующие понятия: 

- [Потоковые точки](streaming-endpoint-concept.md)
- [События и выходные данные прямой трансляции](live-events-outputs-concept.md)
- [Указатели потоковой передачи](streaming-locators-concept.md)

### <a name="general-steps"></a>основные шаги

1. В учетной записи медиаслужбубедите убедитесь, что потоковая **конечная точка** (Origin) работает. 
2. Создайте [событие Live](live-events-outputs-concept.md). <br/>Для создаваемого события можно настроить автоматический запуск. Кроме того, событие можно запустить, когда вы будете готовы начать потоковую передачу.<br/> Если для автозапуска задано значение true, событие прямой трансляции будет запущено сразу после создания. Плата начисляется сразу же после запуска трансляции. Чтобы остановить начисление оплаты, нужно явно вызвать функцию Stop (Остановить) для ресурса события потоковой трансляции. Дополнительные сведения см. в статье [Состояния компонента LiveEvent и выставление счетов за его использование](live-event-states-billing.md).
3. Получите URL-адрес (ы) и настроите свой локтевый коделер для использования URL-адреса для отправки ленты вклада.<br/>[Рекомендуемые кодировщики потоковой трансляции](recommended-on-premises-live-encoders.md).
4. Получите URL-адрес для предварительного просмотра, чтобы проверить получение входных данных от кодировщика.
5. Создание нового объекта **Актива.** 

    Каждый Live Output связан с активом, который он использует для записи видео в связанный контейнер для хранения капли Azure. 
6. Создайте **Live Output** и используйте созданное вами имя актива, чтобы поток мог быть заархивирован в актив.

    Выходные данные потоковой трансляции запускаются при создании и останавливаются при удалении. При удалении Live Output вы не удаляете базовый актив и содержимое актива.
7. Создайте **потоковое locator** со [встроенными типами потоковой политики.](streaming-policy-concept.md)

    Чтобы опубликовать live Output, необходимо создать потоковое locator для связанного актива. 
8. Создайте список путей на основе **потокового указателя**, чтобы получать URL-адреса для использования (детерминированные).
9. Получите имя хоста для **точки потоковой передачи** (Origin), с которого вы хотите передавать поток.
10. Объедините URL-адрес (полученный на шаге 8) с именем узла (полученным на шаге 9), чтобы получить полный URL-адрес.
11. Чтобы прекратить транслировать **событие потоковой трансляции**, необходимо остановить потоковую передачу событий, удалив **указатель потоковой передачи**.
12. После завершения потоковой передачи мероприятия вы можете удалить выделенные ранее ресурсы с помощью описанной ниже процедуры.

    * Остановите трансляцию потока из кодировщика.
    * Остановите событие потоковой трансляции. Плата за остановленное событие потоковой трансляции не взимается. Если вам понадобится снова запустить его, вы можете воспользоваться тем же URL-адресом приема (перенастраивать кодировщик не потребуется).
    * Вы можете остановить конечную точку потоковой передачи, если больше не собираетесь предоставлять доступ к архиву мероприятия в качестве потоковой передачи по требованию. Плата за остановленное событие потоковой трансляции не взимается.

Актив, к которому архивируется живой выход, автоматически становится активом по требованию при удалении живого вывода. Необходимо удалить все живые выходы, прежде чем можно будет остановить живое событие. Вы можете использовать дополнительный флаг [удаленияOutputsOnStop](https://docs.microsoft.com/rest/api/media/liveevents/stop#request-body) автоматически удалить живые выходы на остановке. 

> [!TIP]
> Смотрите [live потокового учебника](stream-live-tutorial-with-api.md), статья рассматривает код, который реализует шаги, описанные выше.

## <a name="other-important-articles"></a>Другие важные статьи

- [Рекомендуемые динамические кодировщики](recommended-on-premises-live-encoders.md)
- [Использование DVR в облаке](live-event-cloud-dvr.md)
- [Сравнение типов LiveEvent](live-event-types-comparison.md)
- [Состояния и выставление счетов](live-event-states-billing.md)
- [Задержки](live-event-latency.md)

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

Смотрите статью [О часто задаваемые вопросы.](frequently-asked-questions.md#live-streaming)

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="next-steps"></a>Дальнейшие действия

* «Быстрый запуск потоковой передачи» (live-events-wirecast-quickstart.md(
* [Руководство по потоковой трансляции](stream-live-tutorial-with-api.md)
* [Руководство по миграции из версии 2 в версию 3 Служб мультимедиа](migrate-from-v2-to-v3.md)
