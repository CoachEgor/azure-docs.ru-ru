---
title: Политики ключей содержимого в Службах мультимедиа — Azure | Документация Майкрософт
description: В этой статье приведены общие сведения о политиках ключей содержимого и их использовании в Службах мультимедиа Azure.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 07/26/2019
ms.author: juliako
ms.custom: seodec18
ms.openlocfilehash: 85a9cad80156dc6ac40e78610c91805d485ff3df
ms.sourcegitcommit: 3c318f6c2a46e0d062a725d88cc8eb2d3fa2f96a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/02/2020
ms.locfileid: "80585995"
---
# <a name="content-key-policies"></a>Политики ключа содержимого

а также доставлять в режиме реального времени и по требованию содержимое, зашифрованное динамически с помощью Advanced Encryption Standard (AES-128) или трех основных систем управления цифровыми правами (DRM): Microsoft PlayReady, Google Widevine и Apple FairPlay. Они также обеспечивают службу доставки ключей AES и лицензий DRM (PlayReady, Widevine и FairPlay) авторизованным клиентам. 

Чтобы указать параметры шифрования в потоке, необходимо создать [политику потоковой передачи](streaming-policy-concept.md) и связать ее с [потоковым locator.](streaming-locators-concept.md) Вы создаете [политику ключа содержимого](https://docs.microsoft.com/rest/api/media/contentkeypolicies) для настройки того, как ключ содержимого (который обеспечивает безопасный доступ к вашим [активам)](assets-concept.md)доставляется конечным клиентам. Необходимо установить требования (ограничения) в политике ключков содержимого, которые должны быть выполнены для того, чтобы ключи с указанной конфигурацией были доставлены клиентам. Политика ключа содержимого не требуется для четкой потоковой передачи или загрузки. 

Обычно вы связываете свою политику ключей содержимого с [потоковым locator.](streaming-locators-concept.md) Кроме того, можно указать политику ключа содержимого внутри [политики потоковой передачи](streaming-policy-concept.md) (при создании пользовательской политики потоковой передачи для продвинутых сценариев). 

## <a name="best-practices-and-considerations"></a>Лучшие практики и соображения

> [!IMPORTANT]
> Пожалуйста, ознакомьтесь со следующими рекомендациями.

* Необходимо разработать ограниченный набор политик для учетной записи Media Service и повторно использовать их для потоковых локаторов, когда требуются одни и те же параметры. Для получения дополнительной [информации см.](limits-quotas-constraints.md)
* Ключевые политики содержимого updatable. Обновление и подбор обновленной политики может занять до 15 минут для кэша доставки ключей. 

   Обновляя политику, вы перезаписываете существующий кэш CDN, что может привести к проблеме воспроизведения для клиентов, использующих кэшированное содержимое.  
* Мы рекомендуем не создавать новую политику ключей содержимого для каждого актива. Основными преимуществами совместного использования одной и той же политики ключей содержания между активами, которым нужны одни и те же параметры политики, являются:
   
   * Проще управлять небольшим количеством политик.
   * Если вам необходимо внести обновления в политику ключа содержимого, изменения вступают в силу по всем новым запросам лицензий практически сразу.
* Если вам нужно создать новую политику, вы должны создать новый потокового локатора для актива.
* Рекомендуется, чтобы Media Services автоматически генерировали ключ содержимого. 

   Как правило, вы будете использовать долгоживущий ключ и проверить наличие политики ключа содержимого с [Get](https://docs.microsoft.com/rest/api/media/contentkeypolicies/get). Чтобы получить ключ, необходимо вызвать отдельный метод действий для получения секретов или учетных данных. Это показано в примере ниже.

## <a name="example"></a>Пример

Чтобы добраться до `GetPolicyPropertiesWithSecretsAsync`ключа, используйте, как показано в [ключе подписи из существующего](get-content-key-policy-dotnet-howto.md#get-contentkeypolicy-with-secrets) примера политики.

## <a name="filtering-ordering-paging"></a>Фильтрации, упорядочивание, разбиение по страницам

Ознакомьтесь с разделом [Фильтрация, упорядочивание и разбиение по страницам сущностей Служб мультимедиа](entities-overview.md).

## <a name="additional-notes"></a>Дополнительные замечания

* Свойства ключевых политик Содержимого, `Datetime` которые имеют тип, всегда находятся в формате UTC.
* Widevine — это служба, которая предоставляется компанией Google Inc. и подпадает под условия предоставления услуг и политику конфиденциальности Google Inc.

## <a name="next-steps"></a>Следующие шаги

* [Использование динамического шифрования AES-128 и службы доставки ключей](protect-with-aes128.md)
* [Использование службы динамического шифрования DRM и доставки лицензий](protect-with-drm.md)
* [EncodeHTTPAndPublishAESEncrypted](https://github.com/Azure-Samples/media-services-v3-dotnet-core-tutorials/tree/master/NETCore/EncodeHTTPAndPublishAESEncrypted)
