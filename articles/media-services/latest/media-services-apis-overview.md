---
title: Разработка с использованием интерфейсов API v3 — Azure | Документация Майкрософт
description: В этой статье рассматриваются правила, применяемые к сущностям и API при разработке с помощью Media Services v3.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 05/02/2019
ms.author: juliako
ms.custom: seodec18
ms.openlocfilehash: a8dac6f38052f176c7a3741a664e174d0a66cbc5
ms.sourcegitcommit: 6a42dd4b746f3e6de69f7ad0107cc7ad654e39ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/07/2019
ms.locfileid: "67612698"
---
# <a name="developing-with-media-services-v3-apis"></a>Разработка с использованием служб мультимедиа версии 3 API-интерфейсов

Как разработчик вы можете использовать [REST API](https://aka.ms/ams-v3-rest-ref) Служб мультимедиа или клиентские библиотеки, которые позволяют взаимодействовать с REST API для простого создания, контроля и обслуживания настраиваемых рабочих процессов. API [Служб мультимедиа версии 3](https://aka.ms/ams-v3-rest-sdk) основан на спецификации OpenAPI (ранее известной как Swagger).

В этой статье рассматриваются правила, применяемые к сущностям и API при разработке с помощью Media Services v3.

## <a name="accessing-the-azure-media-services-api"></a>Доступ к API служб мультимедиа Azure

Чтобы получить разрешение для доступа к ресурсам служб мультимедиа и API служб мультимедиа, вы должны пройти аутентификацию. Службы мультимедиа поддерживают [Azure Active Directory (Azure AD) — на основе](../../active-directory/fundamentals/active-directory-whatis.md) проверки подлинности. Ниже приведены два распространенных варианта проверки подлинности:
 
* **Аутентификация субъекта-службы** — используется для проверки подлинности служб (например: веб-приложения, приложения-функции, приложения логики, API и микрослужб). Этот метод аутентификации обычно используют приложения, которые выполняют службы управляющей программы, службы среднего уровня или запланированные задания. Например для веб-приложения всегда должны быть среднего уровня, который подключается к службам мультимедиа с помощью субъекта-службы.
* **Проверка подлинности пользователя** — используется для проверки подлинности пользователя, который использует приложение для взаимодействия с ресурсами служб мультимедиа. Интерактивное приложение должно сначала запросить у пользователя учетные данные. Примером может послужить приложение консоли управления, которое используется авторизованными пользователями для мониторинга заданий кодирования или потоковой трансляции.

API служб мультимедиа требует, что пользователь или приложение, инициирующее REST API запрашивает доступ к ресурсу учетной записи служб мультимедиа и использовать **участник** или **владельца** роли. Доступ к API с **чтения** только роли **получить** или **списка**   операции будут доступны. Дополнительные сведения см. в разделе [управление доступом на основе ролей для учетных записей служб мультимедиа](rbac-overview.md).

Вместо создания субъекта-службы, рассмотрите возможность использования управляемых удостоверений для ресурсов Azure для доступа к API служб мультимедиа Azure Resource Manager. Дополнительные сведения об управляемых удостоверениях для ресурсов Azure, см. в разделе [что такое управляемые удостоверения для ресурсов Azure](../../active-directory/managed-identities-azure-resources/overview.md).

### <a name="azure-ad-service-principal"></a>Субъект-служба Azure AD 

Если вы создаете приложение Azure AD и службу субъекта, приложение должно быть в собственном клиенте. После создания приложения назначьте приложению **участник** или **владельца** роли доступ к учетной записи служб мультимедиа. 

Если вы не уверены, что у вас есть разрешения на создание приложения Azure AD, см. в разделе [необходимые разрешения](../../active-directory/develop/howto-create-service-principal-portal.md#required-permissions).

На следующем рисунке цифры обозначают последовательность запросов в хронологическом порядке:

![Приложения среднего уровня](./media/use-aad-auth-to-access-ams-api/media-services-principal-service-aad-app1.png)

1. Приложение среднего уровня запрашивает маркер доступа Azure AD, который имеет следующие параметры:  

   * Конечная точка клиента Azure AD.
   * Универсальный код ресурса (URI) для ресурса служб мультимедиа.
   * Универсальный код ресурса (URI) для ресурса REST служб мультимедиа.
   * Значения приложения Azure AD: идентификатор клиента и секрет клиента.
   
   Чтобы получить все необходимые значения, см. в разделе [доступа к API служб мультимедиа Azure с помощью Azure CLI](access-api-cli-how-to.md)

2. Маркер доступа Azure AD передается на средний уровень.
4. Средний уровень отправляет запрос к REST API служб мультимедиа Azure с помощью маркера Azure AD.
5. Средний уровень получает данные из служб мультимедиа.

### <a name="samples"></a>Примеры

Ниже приведены примеры, показывающие, как соединяться с субъектом-службой Azure AD:

* [Подключение с помощью REST](media-rest-apis-with-postman.md)  
* [Подключение с помощью Java](configure-connect-java-howto.md)
* [Подключение с помощью .NET](configure-connect-dotnet-howto.md)
* [Подключение с помощью Node.js](configure-connect-nodejs-howto.md)
* [Подключение с помощью Python](configure-connect-python-howto.md)

## <a name="naming-conventions"></a>Соглашения об именовании.

К именам ресурсов Служб мультимедиа версии 3 (например, "Ресурсы", "Задания", "Преобразования") применяются ограничения именования Azure Resource Manager. В соответствии с Azure Resource Manager имена ресурсов всегда уникальны. Таким образом, вы можете использовать любые уникальные строки идентификаторов (например, GUID) для имен ваших ресурсов. 

Имена ресурсов Служб мультимедиа не должны содержать следующие символы: "<", ">", "%", "&", ":", "&#92;", "?", "/", "*", "+", ".", символ единичной кавычки или любые управляющие символы. Все остальные символы разрешены. Максимальная длина имени ресурса составляет 260 символов. 

Дополнительные сведения об именовании в Azure Resource Manager см. в статье [о требованиях к именованию](https://github.com/Azure/azure-resource-manager-rpc/blob/master/v1.0/resource-api-reference.md#arguments-for-crud-on-resource) и статье [Соглашения об именовании для ресурсов Azure](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).

## <a name="long-running-operations"></a>Длительные операции

Операции с пометкой `x-ms-long-running-operation` в службах мультимедиа Azure [swagger файлы](https://github.com/Azure/azure-rest-api-specs/blob/master/specification/mediaservices/resource-manager/Microsoft.Media/stable/2018-07-01/streamingservice.json) длинные выполняющиеся операции. 

Дополнительные сведения о том, как отслеживание асинхронных операций Azure, см. в разделе [асинхронных операций](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-async-operations#monitor-status-of-operation).

Службы мультимедиа доступны следующие долго выполняющейся операции:

* Создание LiveEvent
* Обновить LiveEvent
* Удалить LiveEvent
* Запустить LiveEvent
* Остановить LiveEvent
* Сброс LiveEvent
* Создание LiveOutput
* Удалить LiveOutput
* Создание конечной точки потоковой передачи
* Обновление конечной точки потоковой передачи
* Удаление конечной точки потоковой передачи
* Запуск конечной точки потоковой передачи
* Остановить конечную точку потоковой передачи
* Масштабирование конечной точки потоковой передачи

## <a name="sdks"></a>Пакеты SDK

> [!NOTE]
> Пакеты SDK для Служб мультимедиа Azure версии 3 могут не обеспечивать нужную безопасность для потоков. При разработке приложений с несколькими потоками вам следует добавить собственную логику синхронизации потоков, чтобы защитить клиент, или использовать новый объект AzureMediaServicesClient для каждого потока. Также помните, что предоставляемые кодом клиенту дополнительные объекты (например, экземпляр HttpClient в .NET) могут создавать проблемы при обработке нескольких потоков.

|SDK|Ссылка|
|---|---|
|[Пакет SDK для .NET](https://aka.ms/ams-v3-dotnet-sdk)|[Справочник по .NET](https://aka.ms/ams-v3-dotnet-ref)|
|[пакет SDK для Java](https://aka.ms/ams-v3-java-sdk)|[Справочник по Java](https://aka.ms/ams-v3-java-ref)|
|[Пакет SDK для Python](https://aka.ms/ams-v3-python-sdk)|[Справочник по Python](https://aka.ms/ams-v3-python-ref)|
|[Пакет SDK для Node.js](https://aka.ms/ams-v3-nodejs-sdk) |[Справочник по Node.js](https://aka.ms/ams-v3-nodejs-ref)| 
|[Пакет SDK для GO](https://aka.ms/ams-v3-go-sdk) |[Справочник по Go](https://aka.ms/ams-v3-go-ref)|
|[Пакет SDK для Ruby](https://aka.ms/ams-v3-ruby-sdk)||

### <a name="see-also"></a>См. также

- [Пакет SDK .NET EventGrid, который включает события Служб мультимедиа](https://www.nuget.org/packages/Microsoft.Azure.EventGrid/)
- [Определения событий Служб мультимедиа](https://github.com/Azure/azure-rest-api-specs/blob/master/specification/eventgrid/data-plane/Microsoft.Media/stable/2018-01-01/MediaServices.json)

## <a name="azure-media-services-explorer"></a>Обозреватель Служб мультимедиа Azure

[Обозреватель Служб мультимедиа Azure](https://github.com/Azure/Azure-Media-Services-Explorer) (AMSE) — это инструмент, доступный для клиентов Windows, которые хотят узнать о Службах мультимедиа. AMSE — это приложение Winforms или C#, которое отправляет, скачивает, кодирует, транслирует видео по запросу и в режиме реального времени с помощью Служб мультимедиа. Инструмент AMSE предназначен для клиентов, которые хотят протестировать Службы мультимедиа без написания кода. Код AMSE предоставляется как ресурс для клиентов, которым необходима разработка с помощью Служб мультимедиа.

AMSE — это проект с открытым кодом, поддержка которого предоставляется сообществом (о проблемах можно сообщать по ссылке https://github.com/Azure/Azure-Media-Services-Explorer/issues). Этот проект соответствует [правилам поведения Microsoft Open Source](https://opensource.microsoft.com/codeofconduct/). Дополнительные сведения см. в [вопросах и ответах по правилам поведения](https://opensource.microsoft.com/codeofconduct/faq/). С любыми другими вопросами или комментариями обращайтесь по адресу opencode@microsoft.com.

## <a name="filtering-ordering-paging-of-media-services-entities"></a>Фильтрация, упорядочивание и разбиение по страницам сущностей Служб мультимедиа

См. в разделе [фильтрация, упорядочение, разбиение на страницы сущностей служб мультимедиа Azure](entities-overview.md)

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="see-also"></a>См. также

[Интерфейс командной строки Azure](https://docs.microsoft.com/cli/azure/ams?view=azure-cli-latest)

## <a name="next-steps"></a>Следующие шаги

* [Подключение к службам мультимедиа с помощью Java](configure-connect-java-howto.md)
* [Подключение к службам мультимедиа с помощью .NET](configure-connect-dotnet-howto.md)
* [Подключение к службам мультимедиа с помощью Node.js](configure-connect-nodejs-howto.md)
* [Подключение к службам мультимедиа с помощью Python](configure-connect-python-howto.md)
