---
title: Экспериментальные предустановку для кодирования содержимого с поддержкой — Azure | Документация Майкрософт
description: В этой статье рассматриваются содержимого с поддержкой кодирования в службах мультимедиа Azure
services: media-services
documentationcenter: ''
author: sethmanheim
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 04/05/2019
ms.author: sethm
ms.custom: ''
ms.openlocfilehash: 3c50502a8b873503ee937914fac5f2d92cb23a2b
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60733492"
---
# <a name="experimental-preset-for-content-aware-encoding"></a>Экспериментальные предустановку для кодирования с учетом содержимого

Для подготовки содержимого для поставки [потоковой передачи с переменной скоростью](https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming), видео должен быть закодирован при нескольких-скорости потока (высокого на низкий). Чтобы обеспечить Постепенное снижение качества, как скорость уменьшается таким образом является разрешение видео. В результате так называемые кодирования лестница — таблицу разрешений и скоростей, как показано в некоторые из наших основных предварительных настроек кодирования, таких как [H264MultipleBitrate1080p](../previous/media-services-mes-preset-h264-multiple-bitrate-1080p.md).

## <a name="overview"></a>Обзор

После публикации Netflix увеличить интерес оставив позади подход один Предустановка встраивается all видео их [блог](https://medium.com/netflix-techblog/per-title-encode-optimization-7e99442b62a2) в декабре 2015 г. С тех пор были выпущены несколько решений для содержимого с поддержкой кодирования в marketplace. см. в разделе [в этой статье](https://www.streamingmedia.com/Articles/Editorial/Featured-Articles/Buyers-Guide-to-Per-Title-Encoding-130676.aspx) Обзор. Идея состоит в том, которые следует учитывать содержимого — для настройки или настройки кодирования лестница, чтобы сложность отдельных видео. В каждое разрешение не существует скоростью, за которым увеличения качества perceptive — кодировщик работает на это значение оптимальной скорости. Следующий уровень оптимизации — Выбор разрешений, исходя из содержимого — например, видео, презентации PowerPoint не обеспечивает таких преимуществ предотвращающих выход ниже 720p. Продвигаясь дальше, кодировщик может одна из основных задач для оптимизации параметров для каждого снимка на видео. Netflix описано [такой подход](https://medium.com/netflix-techblog/optimized-shot-based-encodes-now-streaming-4b9464204830) в 2018 г.

В начале 2017 г. Корпорация Майкрософт выпустила [адаптивной потоковой передачи](autogen-bitrate-ladder.md) предустановки для решения проблемы разброс качество и способы их устранения исходные видео. Наши клиенты имели различных сочетание содержимое, на 1080p, другие фигуры 720p и по более низким разрешением и SD. Кроме того не все исходное содержимое было mezzanines высокого качества из фильма или TV studios. Адаптивная, потоковая передача предустановленного адреса этих проблем, гарантируя, что скоростей никогда не превышает разрешение или средняя скорость входного блока.

Экспериментальные предустановку кодирования содержимого с поддержкой расширяет этот механизм, добавляя пользовательскую логику, которая позволяет кодировщику seek bitrate оптимальное значение для заданного разрешения, но без необходимости глубокого анализа вычислительных. Конечным результатом является данная новый Предустановка выходные данные, которые имеет низкую скорость, чем Предустановка адаптивной потоковой передачи, но с более высоким качеством. См. на следующих графиках пример, в которых показано сравнение, используя показателей качества, таких как [PSNR](https://en.wikipedia.org/wiki/Peak_signal-to-noise_ratio) и [VMAF](https://en.wikipedia.org/wiki/Video_Multimethod_Assessment_Fusion). Источник был создан путем сцепления коротких клипов снимков высокой сложностью из фильмов и ТВ-шоу, предназначен для кодировщика с нагрузкой. По определению этот результаты Предустановка, которые зависят от содержимого для содержимого — это также означает что в некоторых случаях может отсутствовать значительное Уменьшение скорости или улучшение качества.

![С помощью PSNR кривой скорость искажение (RD)](media/cae-experimental/msrv1.png)

**Рис. 1. Скорость искажение (RD) кривую, используя PSNR метрики для источника высокой сложности**

![С помощью VMAF кривой скорость искажение (RD)](media/cae-experimental/msrv2.png)

**Рис. 2. Скорость искажение (RD) кривую, используя VMAF метрики для источника высокой сложности**

Стиль в настоящее время настроен под высокой сложностью исходные видео высокого качества (фильмы, ТВ-передачи). Идет выполнение для адаптации к содержимому низкая сложность (например, презентаций PowerPoint), а также снижает качество видео. Данная конфигурация также использует тот же набор разрешений, как стиль адаптивной потоковой передачи. Корпорация Майкрософт работает над методы выбора минимальный набор разрешений, исходя из содержимого. Следующим являются результатами другую категорию исходного содержимого, где кодировщик удалось определить, что входные данные были низкого качества (многие артефакты сжатия из-за низкой скорости). Обратите внимание, что экспериментальный экземпляр предустановку, кодировщик решила создать только один выходной слой — достаточно низкой скоростью, таким образом, чтобы большинство клиентов смогут воспроизведения потокового видео без замедляется работа.

![С помощью PSNR кривой удаленных рабочих Столов](media/cae-experimental/msrv3.png)

**Рис. 3. Кривой к удаленному рабочему Столу, с помощью PSNR для ввода низкое качество (на 1080p)**

![С помощью VMAF кривой удаленных рабочих Столов](media/cae-experimental/msrv4.png)

**Рис. 4. Кривой к удаленному рабочему Столу, с помощью VMAF для ввода низкое качество (на 1080p)**

## <a name="use-the-experimental-preset"></a>Использовать экспериментальный предустановку

Вы можете создать преобразования, которые используют данный стиль следующим образом. При использовании учебника [подобных](stream-files-tutorial-with-api.md), можно обновить код следующим образом:

```csharp
TransformOutput[] output = new TransformOutput[]
{
   new TransformOutput
   {
      // The preset for the Transform is set to one of Media Services built-in sample presets.
      // You can customize the encoding settings by changing this to use "StandardEncoderPreset" class.
      Preset = new BuiltInStandardEncoderPreset()
      {
         // This sample uses the new experimental preset for content-aware encoding
         PresetName = EncoderNamedPreset.ContentAwareEncodingExperimental
      }
   }
};
```

> [!NOTE]
> Префикс «экспериментальная» здесь используется для обозначения того, что базовых алгоритмов продолжают развиваться. Возможны и будут меняться со временем, чтобы логика, используемая для создания ladders скорость, с целью объединения алгоритм, который является надежным и адаптироваться к самых разнообразных входных условий. Кодировка заданий с помощью предустановленного будет по-прежнему быть выставлен счет на основе исходящих минут, и выходной ресурс-контейнер может быть передан из наших конечных точек потоковой передачи в протоколы, такие как DASH и HLS.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы узнали об этом новом параметре оптимизации видео, мы предлагаем вам опробовать его. Отправьте нам отзыв, используя ссылки в конце этой статьи или связаться с нами напрямую <amsved@microsoft.com>.
