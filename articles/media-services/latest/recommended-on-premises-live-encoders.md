---
title: Кодировщики для потоковых трансляций, рекомендуемые Службами мультимедиа в Azure | Документация Майкрософт
description: Узнайте о локальных кодировщиках потоковой трансляции, рекомендованных Службами мультимедиа
services: media-services
keywords: encoding;encoders;media
author: johndeu
manager: johndeu
ms.author: johndeu
ms.date: 02/10/2020
ms.topic: article
ms.service: media-services
ms.openlocfilehash: 5e16f1fb948ddb435c5002c16125b36fa61d50a7
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80336248"
---
# <a name="tested-on-premises-live-streaming-encoders"></a>Проверенные на месте живые потокового кодеров

В Службах мультимедиа Azure [трансляция](https://docs.microsoft.com/rest/api/media/liveevents) (канал) представляет собой конвейер для обработки содержимого потоковой трансляции. Трансляция получает входные потоки одним из двух способов.

* Локальный динамический кодировщик передает содержимое в формате RTMP или Smooth Streaming (фрагментированный MP4-файл) с несколькими скоростями в трансляцию, для которой не включена поддержка кодирования в реальном времени с помощью Служб мультимедиа. Полученные потоки передаются через трансляции без дальнейшей обработки. Этот способ называется **сквозной передачей**. Мы рекомендуем живому кодеру отправлять многобитные потоки вместо однобитного потока на сквозное живое мероприятие, чтобы обеспечить поток адаптивного битрата клиенту. 

    Если вы используете многобитные потоки для сквозного живого события, размер видео GOP и фрагменты видео на разных битратах должны быть синхронизированы, чтобы избежать неожиданного поведения на стороне воспроизведения.

  > [!TIP]
  > Использование сквозной передачи является наиболее экономичным способом потоковой передачи в реальном времени.
 
* В контакте live encoder отправляет однобитный поток на Live Event, который позволяет выполнять живое кодирование с Медиа-сервисами в одном из следующих форматов: RTMP или Smooth Streaming (фрагментированный MP4). Затем трансляция выполняет кодирование в реальном времени входящего односкоростного потока в видеопоток с несколькими скоростями (адаптивный алгоритм).

В этой статье рассматриваются проверенные на месте видеотрансляции. Для получения инструкций о том, как проверить ваш на-местный живой кодер, [проверьте ваш на-местный кодер](become-on-premises-encoder-partner.md)

Подробные сведения о кодировании в реальном времени с помощью Служб мультимедиа см. в статье [Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md).

## <a name="encoder-requirements"></a>Требования к кодере

При использовании протоколов HTTPS или RTMPS кодеры должны поддерживать TLS 1.2.

## <a name="live-encoders-that-output-rtmp"></a>Динамические кодировщики, выдающие RTMP

Для Служб мультимедиа рекомендуется использовать один из следующих динамических кодировщиков, которые выдают содержимое в формате RTMP. Поддерживаемые схемы URL-адрес — `rtmp://` или `rtmps://`.

При потоковой передаче через RTMP проверьте параметры брандмауэра или прокси-сервера, чтобы убедиться, что исходящие TCP-порты 1935 и 1936 открыты.<br/><br/>
При потоковой передаче через RTMPS проверьте параметры брандмауэра или прокси-сервера, чтобы убедиться, что исходящие TCP-порты 2935 и 2936 открыты.

> [!NOTE]
> При использовании протоколов RTMPS кодеры должны поддерживать TLS 1.2.

- Adobe Flash Media Live Encoder 3.2;
- [Камбрия Live 4.3](https://www.capellasystems.net/products/cambria-live/)
- Элементарная жизнь (версия 2.14.15 и выше)
- Haivision KB
- Haivision Makito X HEVC;
- OBS Studio
- Switcher Studio (iOS)
- Телестрим Wirecast (версия 13.0.2 или выше из-за требования TLS 1.2)
- Telestream Wirecast S (поддерживается только RTMP)
- Teradek Slice 756;
- TriCaster 8000;
- Tricaster Mini HD-4.
- VMIX
- xStream
- [Ffmpeg](https://www.ffmpeg.org)
- [GoPro](https://gopro.com/help/articles/block/getting-started-with-live-streaming) Герой 7 и Герой 8
- [Restream.io](https://restream.io/)

## <a name="live-encoders-that-output-fragmented-mp4"></a>Динамические кодировщики, выдающие фрагментированный MP4

Для Служб мультимедиа рекомендуется использовать один из следующих динамических кодировщиков, которые выдают потоковую передачу Smooth Streaming (фрагментированный MP4) с несколькими скоростями. Поддерживаемые схемы URL-адрес — `http://` или `https://`.

> [!NOTE]
> При использовании протоколов HTTPS кодеры должны поддерживать TLS 1.2.

- Ateme TITAN Live;
- Cisco Digital Media Encoder 2200;
- Элементарный Live (версия 2.14.15 и выше из-за требования TLS 1.2)
- Envivio 4Caster C4 Gen III; 
- Imagine Communications Selenio MCP3;
- Media Excel Hero Live и Hero 4K (UHD/HEVC)
- [Ffmpeg](https://www.ffmpeg.org)

> [!TIP]
>  Если вы транслируете живые события на нескольких языках (например, одна английская аудиодорожка и одна испанская аудиодорожка), вы можете сделать это с помощью live-кодера Media Excel, настроенного для отправки живого канала на сквозной Live Event.

## <a name="configuring-on-premises-live-encoder-settings"></a>Настройка параметров локального динамического кодировщика

Сведения о том, какие параметры являются допустимыми для вашего типа трансляции, см. в разделе [Сравнение типов событий потоковой трансляции](live-event-types-comparison.md).

### <a name="playback-requirements"></a>Требования к воспроизведению

Для воспроизведения содержимого обязательно наличие аудио- и видеопотока. Воспроизведение видео без аудиопотока не поддерживается.

### <a name="configuration-tips"></a>Советы по настройке

- По возможности используйте проводное подключение к Интернету.
- Для получения необходимой пропускной способности удвойте скорость потоковой передачи. Это не обязательное требование, но оно помогает уменьшить влияние перегрузки сети на пропускную способность.
- При использовании программных кодировщиков закройте все ненужные программы.
- Изменение конфигурации кодировщика после начала отправки негативно сказывается на событии и может привести к его нестабильной работе. 
- Выделите достаточно времени для настройки события. Для крупномасштабных событий мы рекомендуем начать настройку за час до события.
- Используйте выход видео и аудиокодека H.264.
- Убедитесь, что есть ключ кадра или GOP временное выравнивание через видео качества.
- Убедитесь, что есть уникальное название потока для каждого качества видео.
- Используйте строгое кодирование CBR, рекомендуемое для оптимальной производительности адаптивного биттрата.

> [!IMPORTANT]
> Смотреть физическое состояние машины (CPU / Память / и т.д.), как загрузка фрагментов в облако включает в себя процессор и IO операций. Если вы измените какие-либо настройки в кодере, обязательно сбросьте каналы /живое событие для входного изменения.

## <a name="see-also"></a>См. также

[Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md)

## <a name="next-steps"></a>Дальнейшие действия

[Как проверить кодера](become-on-premises-encoder-partner.md)
