---
title: Кодировщики для потоковых трансляций, рекомендуемые Службами мультимедиа в Azure | Документация Майкрософт
description: Узнайте о локальных кодировщиках потоковой трансляции, рекомендованных Службами мультимедиа
services: media-services
keywords: encoding;encoders;media
author: johndeu
manager: johndeu
ms.author: johndeu
ms.date: 11/18/2019
ms.topic: article
ms.service: media-services
ms.openlocfilehash: 32ff975aa200e51e6a555f892a53b0ab9c73a84e
ms.sourcegitcommit: dbde4aed5a3188d6b4244ff7220f2f75fce65ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/19/2019
ms.locfileid: "74186034"
---
# <a name="recommended-live-streaming-encoders"></a>Мы рекомендуем использовать кодировщики потоковой трансляции

В Службах мультимедиа Azure [трансляция](https://docs.microsoft.com/rest/api/media/liveevents) (канал) представляет собой конвейер для обработки содержимого потоковой трансляции. Трансляция получает входные потоки одним из двух способов.

* Локальный динамический кодировщик передает содержимое в формате RTMP или Smooth Streaming (фрагментированный MP4-файл) с несколькими скоростями в трансляцию, для которой не включена поддержка кодирования в реальном времени с помощью Служб мультимедиа. Полученные потоки передаются через трансляции без дальнейшей обработки. Этот способ называется **сквозной передачей**. Динамический кодировщик может передавать односкоростной поток в сквозной канал. Мы не рекомендуем такую конфигурацию, так как она не позволяет передавать клиенту потоковые данные с переменной скоростью.

  > [!NOTE]
  > Использование сквозной передачи является наиболее экономичным способом потоковой передачи в реальном времени.
 
* Локальный динамический кодировщик отправляет поток с односкоростной передачей в динамическое событие, которое включено для выполнения кодирования в реальном времени с помощью служб мультимедиа в одном из следующих форматов: RTMP или Smooth Streaming (фрагментированный MP4). Затем трансляция выполняет кодирование в реальном времени входящего односкоростного потока в видеопоток с несколькими скоростями (адаптивный алгоритм).

Подробные сведения о кодировании в реальном времени с помощью Служб мультимедиа см. в статье [Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md).

## <a name="live-encoders-that-output-rtmp"></a>Динамические кодировщики, выдающие RTMP

Для Служб мультимедиа рекомендуется использовать один из следующих динамических кодировщиков, которые выдают содержимое в формате RTMP. Поддерживаемые схемы URL-адрес — `rtmp://` или `rtmps://`.

> [!NOTE]
> При потоковой передаче через RTMP проверьте параметры брандмауэра или прокси-сервера, чтобы убедиться, что исходящие TCP-порты 1935 и 1936 открыты.

- Adobe Flash Media Live Encoder 3.2;
- [Камбриа Live 4,3](https://www.capellasystems.net/products/cambria-live/)
- Haivision KB
- Haivision Makito X HEVC;
- OBS Studio
- Switcher Studio (iOS)
- Telestream Wirecast 8.1+
- Telestream Wirecast S
- Teradek Slice 756;
- TriCaster 8000;
- Tricaster Mini HD-4.
- VMIX
- xStream
- [FFmpeg](https://www.ffmpeg.org)
- [GoPro](https://gopro.com/help/articles/block/getting-started-with-live-streaming) Hero 7 и Hero 8
- [Restream.io](https://restream.io/)

## <a name="live-encoders-that-output-fragmented-mp4"></a>Динамические кодировщики, выдающие фрагментированный MP4

Для Служб мультимедиа рекомендуется использовать один из следующих динамических кодировщиков, которые выдают потоковую передачу Smooth Streaming (фрагментированный MP4) с несколькими скоростями. Поддерживаемые схемы URL-адрес — `http://` или `https://`.

- Ateme TITAN Live;
- Cisco Digital Media Encoder 2200;
- Elemental Live
- Envivio 4Caster C4 Gen III;
- Imagine Communications Selenio MCP3;
- Media Excel Hero Live и Hero 4K (UHD/HEVC)
- [FFmpeg](https://www.ffmpeg.org)

> [!TIP]
>  Если вы выполняете потоковую передачу событий в реальном времени на нескольких языках (например, одна звуковая дорожка на английском языке и одна Испанская звуковая дорожка), это можно сделать с помощью кодировщика мультимедиа Excel Live Encoder, настроенного для отправки реального веб-канала в интерактивное событие Pass.


## <a name="configuring-on-premises-live-encoder-settings"></a>Настройка параметров локального динамического кодировщика

Сведения о том, какие параметры являются допустимыми для вашего типа трансляции, см. в разделе [Сравнение типов событий потоковой трансляции](live-event-types-comparison.md).

### <a name="playback-requirements"></a>Требования к воспроизведению

Для воспроизведения содержимого обязательно наличие аудио- и видеопотока. Воспроизведение видео без аудиопотока не поддерживается.

### <a name="configuration-tips"></a>Советы по настройке

- По возможности используйте проводное подключение к Интернету.
- Для получения необходимой пропускной способности удвойте скорость потоковой передачи. Это не обязательное требование, но оно помогает уменьшить влияние перегрузки сети на пропускную способность.
- При использовании программных кодировщиков закройте все ненужные программы.
- Изменение конфигурации кодировщика после начала отправки негативно сказывается на событии и может привести к его нестабильной работе. 
- Выделите достаточно времени для настройки события. Для крупномасштабных событий мы рекомендуем начать настройку за час до события.

## <a name="becoming-an-on-premises-encoder-partner"></a>Как стать партнером по локальным кодировщикам

Службы мультимедиа Azure помогают партнеру по локальным кодировщикам продвигать продукты, рекомендуя кодировщик корпоративным клиентам. Чтобы стать партнером по локальным кодировщикам, необходимо проверить совместимость вашего локального кодировщика со Службами мультимедиа. Для этого выполните следующие проверки.

### <a name="pass-through-live-event-verification"></a>Проверка сквозной трансляции

1. В своей учетной записи Служб мультимедиа убедитесь, что **конечная точка потоковой передачи** запущена. 
2. Создайте и запустите **сквозную** трансляцию. <br/> Дополнительные сведения см. в статье [Состояния компонента LiveEvent и выставление счетов за его использование](live-event-states-billing.md).
3. Получите URL-адреса приема и настройте использование URL-адреса в локальном кодировщике для отправки трансляции с несколькими скоростями в Службы мультимедиа.
4. Получите URL-адрес для предварительного просмотра, чтобы проверить получение входных данных от кодировщика.
5. Создание объекта **ресурса**.
6. Создание компонента **выходных данных прямой трансляции** с использованием имени созданного ресурса.
7. Создайте **указатель потоковой передачи** со встроенным типом **политики потоковой передачи**.
8. Создайте список путей на основе **потокового указателя**, чтобы получать URL-адреса для использования.
9. Получите имя узла для **конечной точки потоковой передачи**, с которой должна идти трансляция.
10. Объедините URL-адрес (полученный на шаге 8) с именем узла (полученным на шаге 9), чтобы получить полный URL-адрес.
11. Запустите динамический кодировщик примерно на 10 минут.
12. Остановите событие потоковой трансляции. 
13. С помощью проигрывателя, например [Проигрывателя мультимедиа Azure](https://aka.ms/azuremediaplayer), просмотрите архивный ресурс и проверьте видео на отсутствие артефактов при любом уровне качества. Либо воспользуйтесь URL-адресом для предварительного просмотра, чтобы убедиться в отсутствии ошибок во время сеанса трансляции.
14. Запишите идентификатор ресурса, опубликованный URL-адрес потоковой передачи для динамического архива, а также настройки и версию, которые использовались в динамическом кодировщике.
15. Сбрасывайте состояние трансляции после создания каждого примера.
16. Повторите шаги 5–15 для всех конфигураций, поддерживаемых вашим кодировщиком (с сообщениями о рекламе, субтитрами, различными скоростями кодирования и без этих настроек).

### <a name="live-encoding-live-event-verification"></a>Проверка трансляции с кодированием в реальном времени

1. В своей учетной записи Служб мультимедиа убедитесь, что **конечная точка потоковой передачи** запущена. 
2. Создайте и запустите трансляцию с **кодированием в реальном времени**. <br/> Дополнительные сведения см. в статье [Состояния компонента LiveEvent и выставление счетов за его использование](live-event-states-billing.md).
3. Получите URL-адреса приема и настройте кодировщик для отправки динамического односкоростного потока в Службы мультимедиа.
4. Получите URL-адрес для предварительного просмотра, чтобы проверить получение входных данных от кодировщика.
5. Создание объекта **ресурса**.
6. Создание компонента **выходных данных прямой трансляции** с использованием имени созданного ресурса.
7. Создайте **указатель потоковой передачи** со встроенным типом **политики потоковой передачи**.
8. Создайте список путей на основе **потокового указателя**, чтобы получать URL-адреса для использования.
9. Получите имя узла для **конечной точки потоковой передачи**, с которой должна идти трансляция.
10. Объедините URL-адрес (полученный на шаге 8) с именем узла (полученным на шаге 9), чтобы получить полный URL-адрес.
11. Запустите динамический кодировщик примерно на 10 минут.
12. Остановите событие потоковой трансляции.
13. С помощью проигрывателя, например [Проигрывателя мультимедиа Azure](https://aka.ms/azuremediaplayer), просмотрите архивный ресурс и проверьте видео на отсутствие артефактов при любом уровне качества. Либо воспользуйтесь URL-адресом для предварительного просмотра, чтобы убедиться в отсутствии ошибок во время сеанса трансляции.
14. Запишите идентификатор ресурса, опубликованный URL-адрес потоковой передачи для динамического архива, а также настройки и версию, которые использовались в динамическом кодировщике.
15. Сбрасывайте состояние трансляции после создания каждого примера.
16. Повторите шаги 5–15 для всех конфигураций, поддерживаемых вашим кодировщиком (с сообщениями о рекламе, субтитрами, различными скоростями кодирования и без этих настроек).

### <a name="longevity-verification"></a>Проверка срока службы

Выполните те же инструкции, что и для [проверки сквозной трансляции](#pass-through-live-event-verification), за исключением шага 11. <br/>Запустите динамический кодировщик не на 10 минут, а на неделю или на более длительный период. Используйте проигрыватель, например [Проигрыватель мультимедиа Azure](https://aka.ms/azuremediaplayer), чтобы время от времени просматривать потоковую трансляцию (или архивный ресурс) и проверять видео на отсутствие артефактов.

### <a name="email-your-recorded-settings"></a>Отправка записанных параметров по электронной почте

Наконец, отправьте свои записанные настройки и параметры динамического архива в Службы мультимедиа Azure по адресу amshelp@microsoft.com ​​в качестве уведомления о том, что все проверки для самопроверки пройдены. Кроме того, добавьте свою контактную информацию для дальнейших действий. По любым вопросам, касающимся этого процесса, вы можете связаться с командой Службы мультимедиа Azure.

## <a name="next-steps"></a>Дополнительная информация

[Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md)
