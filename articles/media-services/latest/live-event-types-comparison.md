---
title: Типы LiveEvent в Службах мультимедиа Azure | Документация Майкрософт
description: 'В службах мультимедиа Azure активное событие может быть одним из двух типов: Динамическая кодировка и сквозная передача. В этой статье показана подробная таблица, сравнивающая типы событий в реальном времени.'
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 06/13/2019
ms.author: juliako
ms.openlocfilehash: 8377c4339b07e0b917e10ed413ffc79baef91fac
ms.sourcegitcommit: 8bd85510aee664d40614655d0ff714f61e6cd328
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2019
ms.locfileid: "74888399"
---
# <a name="live-event-types-comparison"></a>Сравнение типов событий потоковой трансляции

В Службах мультимедиа Azure есть два типа [событий потоковой трансляции](https://docs.microsoft.com/rest/api/media/liveevents): кодирование в реальном времени или сквозной режим. 

## <a name="types-comparison"></a>Сравнение типов 

В следующей таблице сравниваются функции типов событий Live. Типы задаются во время создания с помощью [лививентенкодингтипе](https://docs.microsoft.com/rest/api/media/liveevents/create#liveeventencodingtype):

* **Лививентенкодингтипе. None** — локальный динамический кодировщик отправляет поток с несколькими скоростями. Полученные потоки проходят через интерактивное событие без дальнейшей обработки. 
* **Лививентенкодингтипе. Standard** — локальный динамический кодировщик отправляет односкоростной поток в Live Event, а службы мультимедиа — несколько потоков с несколькими скоростями. Если канал вклада имеет 720p или более высокое разрешение, Предустановка **Default720p** кодирует набор из 6 пар "разрешение/скорость" (подробные сведения см. ниже в статье).
* **Лививентенкодингтипе. Premium1080p** — локальный динамический кодировщик отправляет односкоростной поток в Live Event, а службы мультимедиа — несколько потоков с несколькими скоростями. Предустановка Default1080p указывает выходной набор пар "разрешение-скорость" (подробные сведения см. ниже в статье). 

| Компонент | Сквозное событие потоковой трансляции | Событие "Стандартный" или Premium1080p Live |
| --- | --- | --- |
| Кодировка односкоростного источника данных в несколько потоков с различными скоростями передачи в облаке |Нет |ДА |
| Максимальное разрешение видео для веб-канала входного потока |4K (4096x2160 с частотой 60 кадров в секунду) |1080p (1920x1088 с частотой 30 кадров в секунду)|
| Рекомендуемое максимальное количество слоев в веб-канале входного потока|Не более 12|Один звуковой|
| Максимальное количество слоев в потоке выходных данных| Так же, как и для входных данных|До 6 (см. Системные предустановки ниже)|
| Максимальная суммарная пропускная способность веб-канала входного потока|60 Мбит/с|Н/Д|
| Максимальная скорость передачи для одного слоя входного потока |20 Мбит/с|20 Мбит/с|
| Поддержка звуковых дорожек на различных языках|ДА|Нет|
| Поддерживаемые видеокодеки для входного потока |H.264/AVC и H.265/HEVC|H.264/AVC|
| Поддерживаемой видеокодеки для выходного потока|Так же, как и для входных данных|H.264/AVC|
| Поддерживаемая битовая глубина для входного и выходного видеопотока|До 10 бит, включая HDR 10/HLG|8 бит|
| Поддерживаемые аудиокодеки для входного потока|AAC-LC, HE-AAC v1, HE-AAC v2|AAC-LC, HE-AAC v1, HE-AAC v2|
| Поддерживаемые аудиокодеки для выходного потока|Так же, как и для входных данных|AAC-LC|
| Максимальное разрешение выходного видео|Так же, как и для входных данных|Standard-720p, Premium1080p-1080p|
| Максимальная частота кадров входного видео|60 кадров в секунду|"Стандартный" или "Premium1080p"-30 кадров в секунду|
| Протоколы входных данных|RTMP, фрагментированный MP4 (Smooth Streaming)|RTMP, фрагментированный MP4 (Smooth Streaming)|
| Цена|Откройте [страницу цен](https://azure.microsoft.com/pricing/details/media-services/) и выберите вкладку Live Video|Откройте [страницу цен](https://azure.microsoft.com/pricing/details/media-services/) и выберите вкладку Live Video|
| Максимальное время выполнения| 24 часа, 365 дней, потоковый линейный режим | 24 часа x 365 дней, прямая линейная (Предварительная версия)|
| Возможность передавать внедренные субтитры в формате CEA 608 или 708.|ДА|ДА|
| Поддержка вставки баннеров|Нет|Нет|
| Поддержка сигнализации о рекламе через API-интерфейс| Нет|Нет|
| Поддержка сигнализации о рекламе через сообщения по внутриполосному протоколу SCTE-35|ДА|ДА|
| Возможность восстановления после кратких остановок в канале входного потока данных|ДА|Частично|
| Поддержка неоднородных GPO|ДА|Нет, входные потоки должны иметь фиксированную длительность GOP|
| Поддержка входных данных с переменной частотой кадров|ДА|Нет — входные данные должны иметь фиксированную частоту кадров. Небольшие колебания допустимы, например, в сценах с высокой скоростью движения. Но веб-канал публикаций не может удалить частоту кадров (например, до 15 кадров в секунду).|
| Автоотключение события потоковой трансляции при потере входного веб-канала|Нет|Через 12 часов при отсутствии выполняющихся компонентов LiveOutput|

## <a name="system-presets"></a>Предустановки системы

Разрешения и скорости, содержащиеся в выходных данных динамического кодировщика, определяются [пресетнаме](https://docs.microsoft.com/rest/api/media/liveevents/create#liveeventencoding). Если используется **стандартный** динамический кодировщик (Лививентенкодингтипе. Standard), то Предустановка *Default720p* задает набор из 6 пар разрешений и скорости, описанных ниже. В противном случае, если используется динамический кодировщик **Premium1080p** (Лививентенкодингтипе. Premium1080p), Предустановка *Default1080p* задает выходной набор пар "разрешение-скорость".

> [!NOTE]
> Нельзя применить предустановку Default1080p к интерактивному событию, если оно настроено для стандартной кодировки в реальном времени. Вы получите ошибку. Кроме того, при попытке применить предустановку Default720p к кодировщику Premium1080p Live вы получите сообщение об ошибке.

### <a name="output-video-streams-for-default720p"></a>Выходные потоки видео для Default720p

Если веб-канал публикации имеет 720p или более высокое разрешение, Предустановка **Default720p** кодирует канал в следующие 6 уровней. В приведенной ниже таблице скорость задается в кбит/с, Максфпс означает, что максимально допустимая частота кадров (в кадрах в секунду), профиль представляет используемый профиль H. 264.

| Bitrate | Ширина | Высота: | Макс. кадров/с | Профиль |
| --- | --- | --- | --- | --- |
| 3500 |1280 |720 |30 |Высокая |
| 2200 |960 |540 |30 |Высокая |
| 1350 |704 |396 |30 |Высокая |
| 850 |512 |288 |30 |Высокая |
| 550 |384 |216 |30 |Высокая |
| 200 |340 |192 |30 |Высокая |

> [!NOTE]
> Если вам нужно настроить стандарт для кодирования в реальном времени, отправьте запрос в службу поддержки через портал Azure. Следует указать нужную таблицу с разрешениями и скоростями. Убедитесь, что имеется только один слой 720p и не более 6 слоев. Также укажите, что вы запрашиваете предустановку для стандартного динамического кодировщика.
> Конкретные значения скорости и разрешения могут быть скорректированы с течением времени.

### <a name="output-video-streams-for-default1080p"></a>Выходные потоки видео для Default1080p

Если веб-канал публикации имеет разрешение 1080p, Предустановка **Default1080p** кодирует канал в следующие 6 уровней.

| Bitrate | Ширина | Высота: | Макс. кадров/с | Профиль |
| --- | --- | --- | --- | --- |
| 5500 |1920 |1080 |30 |Высокая |
| 3000 |1280 |720 |30 |Высокая |
| 1600 |960 |540 |30 |Высокая |
| 800 |640 |360 |30 |Высокая |
| 400 |480 |270 |30 |Высокая |
| 200 |320 |180 |30 |Высокая |

> [!NOTE]
> Если вам нужно настроить стандарт для кодирования в реальном времени, отправьте запрос в службу поддержки через портал Azure. Следует указать нужную таблицу с разрешениями и скоростями. Убедитесь, что имеется только один уровень в 1080p и не более 6 уровней. Также укажите, что вы запрашиваете предустановку для кодировщика Premium1080p Live.
> Конкретные значения скорости и разрешения могут быть скорректированы с течением времени.

### <a name="output-audio-stream-for-default720p-and-default1080p"></a>Выходной поток звука для Default720p и Default1080p

Для предустановок *Default720p* и *Default1080p* Audio кодируется на стерео AAC-LC при 128 кбит/с. Частота выборки соответствует звуковой дорожке в канале вклада.

## <a name="implicit-properties-of-the-live-encoder"></a>Неявные свойства динамического кодировщика

В предыдущем разделе описаны свойства динамического кодировщика, которыми можно управлять явным образом с помощью предустановки, например число слоев, разрешений и скорость. В этом разделе разъясняются неявные свойства.

### <a name="group-of-pictures-gop-duration"></a>Длительность группы изображений (GOP)

Динамический кодировщик использует структуру [GOP](https://en.wikipedia.org/wiki/Group_of_pictures) в канале вклада. Это означает, что выходные слои будут иметь одинаковую GOP длительность. Поэтому рекомендуется настроить локальный кодировщик для создания веб-канала вклада с фиксированной GOP длительностью (обычно 2 секунды). Это гарантирует, что исходящие потоки HLS и MPEG из службы также будут иметь фиксированные GOP длительности. Небольшие вариации в GOP длительности, скорее всего, будут допускаться большинством устройств.

### <a name="frame-rate"></a>Частота кадров

Динамический кодировщик также соответствует длительности отдельных кадров видео в веб-канале вклада. Это означает, что выходные слои будут иметь кадры с одинаковыми длительность. Поэтому рекомендуется настроить локальный кодировщик для создания веб-канала публикаций с фиксированной частотой кадров (не более 30 кадров в секунду). Это обеспечит, что исходящие потоки HLS и MPEG из службы также будут иметь фиксированную частоту кадров. Большинство устройств могут допускать небольшие вариации частот кадров, но нет никакой гарантии, что динамический кодировщик создаст выходные данные, которые будут воспроизводиться правильно. Локальный динамический кодировщик не должен удалять кадры (например, в условиях низкого заряда батарей) или изменяйте частоту кадров каким-либо образом.

### <a name="resolution-of-contribution-feed-and-output-layers"></a>Разрешение для веб-канала вклада и выходных слоев

Динамический кодировщик настроен так, чтобы не преобразовывать канал передачи данных. В результате максимальное разрешение для выходных слоев не будет превышать размер веб-канала публикации.

Например, при отправке веб-канала передачи по адресу 720p в динамическое событие, настроенное для кодирования Default1080p в реальном времени, в выходных данных будет только 5 уровней, начиная с 720p в 3Mbps, переходить к 1080p в 200 кбит/с. Или, если отправить веб-канал на 360p в интерактивное событие, настроенное на стандартную кодировку в реальном времени, выходные данные будут содержать три слоя (в разрешениях 288p, 216p и 192p). В вырожденном случае при отправке веб-канала, скажем, 160x90 пикселей в стандартный динамический кодировщик, выходные данные будут содержать один уровень в разрешении 160x90 с той же скоростью, что и канал вклада.

### <a name="bitrate-of-contribution-feed-and-output-layers"></a>Скорость канала вклада и выходных слоев

Динамический кодировщик настроен для учета параметров скорости в предустановленной конфигурации независимо от скорости канала передачи данных. В результате скорость выходных слоев может превысить длину веб-канала публикации. Например, если отправить в веб-канале публикаций с разрешением 720p в 1 Мбит/с, то выходные слои останутся такими же, как в [таблице](live-event-types-comparison.md#output-video-streams-for-default720p) выше.

## <a name="next-steps"></a>Дальнейшие действия

[Потоковая трансляция в Службах мультимедиа Azure версии 3](live-streaming-overview.md)
