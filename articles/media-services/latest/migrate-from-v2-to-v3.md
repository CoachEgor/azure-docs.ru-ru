---
title: Миграция из версии 2 в версию 3 Служб мультимедиа Azure | Документация Майкрософт
description: В этой статье описаны изменения, которые впервые появились в версии 3 Служб мультимедиа Azure, и приведены различия между двумя версиями. Она также содержит руководство по миграции из версии 2 в версию 3 Служб мультимедиа.
services: media-services
documentationcenter: na
author: IngridAtMicrosoft
manager: femila
editor: ''
tags: ''
keywords: azure media services, stream, broadcast, live, offline
ms.service: media-services
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: media
ms.date: 08/31/2020
ms.author: inhenkel
ms.openlocfilehash: e692eef45f8a0b4a8918e7255fa1ac85d4ad064c
ms.sourcegitcommit: bcda98171d6e81795e723e525f81e6235f044e52
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/01/2020
ms.locfileid: "89265836"
---
# <a name="migration-guidance-for-moving-from-media-services-v2-to-v3"></a>Руководство по миграции из версии 2 в версию 3 Служб мультимедиа

[!INCLUDE [media services api v3 logo](./includes/v3-hr.md)]

>Получайте уведомления о том, когда следует повторно посетить эту страницу для обновлений, скопировав и вставив URL-адрес `https://docs.microsoft.com/api/search/rss?search=%22Migrate+from+Azure+Media+Services+v2+to+v3%22&locale=en-us` в средство чтения RSS-канала.

В этой статье представлено руководство по миграции из служб мультимедиа версии 2 в v3.

Если у вас есть видеослужба, разработанная на основе [устаревших API Служб мультимедиа версии 2](../previous/media-services-overview.md), ознакомьтесь со следующими рекомендациями и советами перед переносом в API версии 3. В версии 3 API существует множество преимуществ и новых функций, которые улучшают возможности разработки и Служб мультимедиа. Однако, как указано в разделе с [известными проблемами](#known-issues) этой статьи, из-за изменений между версиями API существуют определенные ограничения. Эта страница будет сохранена, так как команда Служб мультимедиа продолжает улучшать API версии 3 и устранять "пробелы" между версиями. 

## <a name="prerequisites"></a>Предварительные требования

* Обзор [служб мультимедиа версии 2 и V3](media-services-v2-vs-v3.md)
* [!INCLUDE [quickstarts-free-trial-note](../../../includes/quickstarts-free-trial-note.md)]

## <a name="benefits-of-media-services-v3"></a>Преимущества Служб мультимедиа версии 3
  
### <a name="api-is-more-approachable"></a>Более доступный API

*  Версия 3 создана на основе унифицированной области API, что позволяет использовать функции управления и операции, встроенные в Azure Resource Manager. Шаблоны Azure Resource Manager можно использовать для создания и развертывания преобразований, конечных точек потоковой передачи, событий потоковой трансляции и т. д.
* [Спецификация OpenAPI (прежнее название — Swagger)](https://aka.ms/ams-v3-rest-sdk) .
    Представляет схему для всех компонентов службы, включая кодирование на основе файла.
* Пакеты SDK для [.NET](https://aka.ms/ams-v3-dotnet-ref), .NET Core, [Node.js](/javascript/api/overview/azure/mediaservices/management), [Python](https://aka.ms/ams-v3-python-ref), [Java](https://aka.ms/ams-v3-java-ref), [Go](https://aka.ms/ams-v3-go-ref) и Ruby.
* Интеграция [Azure CLI](https://aka.ms/ams-v3-cli-ref) для простых скриптов поддержки.

### <a name="new-features"></a>Новые функции

* Для обработки задания на основе файла можно использовать URL-адрес HTTP в качестве входных данных.<br/>Вам не обязательно ни хранить содержимое в Azure, ни создавать ресурсы.
* Для обработки задания на основе файла введено понятие [преобразования](transforms-jobs-concept.md). Преобразование можно использовать для создания повторно используемых конфигураций, создания шаблонов Azure Resource Manager и изолирования параметров обработки между несколькими пользователями или клиентами.
* Ресурс может иметь несколько [указателей потоковой передачи](streaming-locators-concept.md) с различными параметрами [динамической упаковки](dynamic-packaging-overview.md) и динамического шифрования.
* [Защита содержимого](content-key-policy-concept.md) поддерживает несколько ключей.
* Вы можете вести потоковую трансляцию событий в реальном времени длительностью до 24 часов, используя Службы мультимедиа для перекодирования исходного потока с одной скоростью в поток вывода с несколькими скоростями.
* Новая поддержка потоковой трансляции в реальном времени с низкой задержкой в событиях потоковой трансляции. Дополнительные сведения см. в разделе с описанием [задержки](live-event-latency.md).
* Предварительная версия событий потоковой трансляции поддерживает [динамическую упаковку](dynamic-packaging-overview.md) и динамическое шифрование. Это включает защиту содержимого в предварительной версии, а также упаковки DASH и HLS.
* Выходные данные потоковой трансляции проще в использовании, чем старая сущность Program в версии 2 API-интерфейсов. 
* Улучшенная поддержка RTMP (повышенная стабильность и поддержка исходного кодировщика).
* Безопасный прием RTMPS.<br/>При создании события потоковой трансляции вы получаете 4 URL-адреса приема. 4 URL-адреса для приема практически идентичны, они имеют тот же токен потоковой передачи (AppId) с отличной частью номера порта. Два из этих URL-адресов являются первичным и резервным для RTMPS.   
* Вы контролируете доступ к своим сущностям с помощью управления доступом на основе ролей. 

## <a name="known-issues"></a>Известные проблемы

*  В настоящее время [портал Azure](https://portal.azure.com/) можно использовать для:

    * Управление службами мультимедиа v3, [динамические события](live-events-outputs-concept.md) 
    * Просмотр [ресурсов](assets-concept.md)(не управляемых) v3, 
    * [Получение сведений о доступе к API](./access-api-howto.md). 

    Для всех других задач управления (например, [преобразований, заданий](transforms-jobs-concept.md) и [защиты содержимого](content-protection-overview.md)) используйте [REST API](/rest/api/media/), [CLI](https://aka.ms/ams-v3-cli-ref)или один из поддерживаемых [пакетов SDK](media-services-apis-overview.md#sdks).
* Подготовьте зарезервированные единицы мультимедиа (MRU) в вашей учетной записи, чтобы управлять параллелизмом и производительностью заданий, особенно тех, что касаются видео- или аудиоанализа. Дополнительные сведения см. в статье [Обзор масштабирования обработки мультимедиа](../previous/media-services-scale-media-processing-overview.md). Вы можете управлять Мрус с помощью [интерфейса командной строки (CLI) 2,0 для служб мультимедиа v3](media-reserved-units-cli-how-to.md), с помощью [портал Azure](../previous/media-services-portal-scale-media-processing.md)или с помощью [API v2](../previous/media-services-dotnet-encoding-units.md). Подготавливать единицы MRU нужно с учетом того, какая версия API Служб мультимедиа используется: версия 2 или 3.
* С помощью API версии 2 нельзя управлять сущностями Cлужбы мультимедиа, созданными с помощью API версии 3.  
* Не все сущности в API v2 автоматически отображаются в API V3.  Ниже приведены примеры сущностей в двух версиях, которые несовместимы:  
    * Задания и задачи, созданные в версии 2, не отображаются в версии 3, так как они не связаны с преобразованием. Рекомендуется переключиться на преобразования и задания версии 3. Относительно короткий период времени, необходимый для наблюдения за потоком версии 2 во время переключения.
    * Каналами и программами, созданными с помощью версии 2 (которые сопоставляются с событиями потоковой трансляции и их выходными данными в версии 3), невозможно управлять с помощью версии 3. Рекомендуется переключиться на события потоковой трансляции и их выходные данные в версии 3 в удобном канале остановки.<br/>В настоящее время постоянно работающие каналы нельзя переносить.  

> [!NOTE]
> Эта страница будет сохранена, так как команда Служб мультимедиа продолжает улучшать API версии 3 и устранять "пробелы" между версиями.

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="next-steps"></a>Дальнейшие действия

[Руководство. кодирование удаленного файла на основе URL-адреса и поток видео — .NET](stream-files-dotnet-quickstart.md)
