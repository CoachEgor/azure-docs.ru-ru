---
title: Миграция из версии 2 в версию 3 Служб мультимедиа Azure | Документация Майкрософт
description: В этой статье описаны изменения, которые впервые появились в версии 3 Служб мультимедиа Azure, и приведены различия между двумя версиями. Она также содержит руководство по миграции из версии 2 в версию 3 Служб мультимедиа.
services: media-services
documentationcenter: na
author: Juliako
manager: femila
editor: ''
tags: ''
keywords: azure media services, stream, broadcast, live, offline
ms.service: media-services
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: media
ms.date: 03/09/2020
ms.author: juliako
ms.openlocfilehash: 72d413c5d8bc982d885d889da35b29a3607410cc
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79472073"
---
# <a name="migration-guidance-for-moving-from-media-services-v2-to-v3"></a>Руководство по миграции из версии 2 в версию 3 Служб мультимедиа

>Получайте уведомления о том, когда вернуться на эту страницу `https://docs.microsoft.com/api/search/rss?search=%22Migrate+from+Azure+Media+Services+v2+to+v3%22&locale=en-us` для обновления, копируя и вставляя этот URL: в ваш rsS-канал читателя.

В этой статье содержится руководство по миграции от Media Services v2 до v3.

Если у вас есть видеослужба, разработанная на основе [устаревших API Служб мультимедиа версии 2](../previous/media-services-overview.md), ознакомьтесь со следующими рекомендациями и советами перед переносом в API версии 3. В версии 3 API существует множество преимуществ и новых функций, которые улучшают возможности разработки и Служб мультимедиа. Однако, как указано в разделе с [известными проблемами](#known-issues) этой статьи, из-за изменений между версиями API существуют определенные ограничения. Эта страница будет сохранена, так как команда Служб мультимедиа продолжает улучшать API версии 3 и устранять "пробелы" между версиями. 

## <a name="prerequisites"></a>Предварительные требования

* Обзор [Медиа Услуги v2 против v3](media-services-v2-vs-v3.md)
* [!INCLUDE [quickstarts-free-trial-note](../../../includes/quickstarts-free-trial-note.md)]

## <a name="benefits-of-media-services-v3"></a>Преимущества Служб мультимедиа версии 3
  
### <a name="api-is-more-approachable"></a>Более доступный API

*  Версия 3 создана на основе унифицированной области API, что позволяет использовать функции управления и операции, встроенные в Azure Resource Manager. Шаблоны Azure Resource Manager можно использовать для создания и развертывания преобразований, конечных точек потоковой передачи, событий потоковой трансляции и т. д.
* [Спецификация OpenAPI (ранее называемая Swagger)](https://aka.ms/ams-v3-rest-sdk) документ.
    Представляет схему для всех компонентов службы, включая кодирование на основе файла.
* Пакеты SDK для [.NET](https://aka.ms/ams-v3-dotnet-ref), .NET Core, [Node.js](/javascript/api/overview/azure/mediaservices/management), [Python](https://aka.ms/ams-v3-python-ref), [Java](https://aka.ms/ams-v3-java-ref), [Go](https://aka.ms/ams-v3-go-ref) и Ruby.
* Интеграция [Azure CLI](https://aka.ms/ams-v3-cli-ref) для простых скриптов поддержки.

### <a name="new-features"></a>новые функции;

* Для обработки задания на основе файла можно использовать URL-адрес HTTP в качестве входных данных.<br/>Вам не обязательно ни хранить содержимое в Azure, ни создавать ресурсы.
* Для обработки задания на основе файла введено понятие [преобразования](transforms-jobs-concept.md). Преобразование можно использовать для создания повторно используемых конфигураций, создания шаблонов Azure Resource Manager и изолирования параметров обработки между несколькими пользователями или клиентами.
* Ресурс может иметь несколько [указателей потоковой передачи](streaming-locators-concept.md) с различными параметрами [динамической упаковки](dynamic-packaging-overview.md) и динамического шифрования.
* [Защита контента](content-key-policy-concept.md) поддерживает многоключевые функции.
* Вы можете вести потоковую трансляцию событий в реальном времени длительностью до 24 часов, используя Службы мультимедиа для перекодирования исходного потока с одной скоростью в поток вывода с несколькими скоростями.
* Новая поддержка потоковой трансляции в реальном времени с низкой задержкой в событиях потоковой трансляции. Дополнительные сведения см. в разделе с описанием [задержки](live-event-latency.md).
* Предварительная версия событий потоковой трансляции поддерживает [динамическую упаковку](dynamic-packaging-overview.md) и динамическое шифрование. Это включает защиту содержимого в предварительной версии, а также упаковки DASH и HLS.
* Выходные данные потоковой трансляции проще в использовании, чем старая сущность Program в версии 2 API-интерфейсов. 
* Улучшенная поддержка RTMP (повышенная стабильность и поддержка исходного кодировщика).
* Безопасный прием RTMPS.<br/>При создании события потоковой трансляции вы получаете 4 URL-адреса приема. 4 URL-адреса для приема практически идентичны, они имеют тот же токен потоковой передачи (AppId) с отличной частью номера порта. Два из этих URL-адресов являются первичным и резервным для RTMPS.   
* Вы контролируете доступ к своим сущностям с помощью управления доступом на основе ролей. 

## <a name="known-issues"></a>Известные проблемы

*  В настоящее время вы можете использовать [портал Azure](https://portal.azure.com/) для:

    * управлять медиа-сервисами v3 [Live Events,](live-events-outputs-concept.md) 
    * просмотр (не управлять) v3 [Активы](assets-concept.md), 
    * [получить информацию о доступе к AIS](access-api-portal.md). 

    Для всех других задач управления (например, [Transforms and Jobs](transforms-jobs-concept.md) and [Content protection)](content-protection-overview.md)используйте [REST API,](https://docs.microsoft.com/rest/api/media/) [CLI](https://aka.ms/ams-v3-cli-ref)или один из поддерживаемых [SDK.](media-services-apis-overview.md#sdks)
* Подготовьте зарезервированные единицы мультимедиа (MRU) в вашей учетной записи, чтобы управлять параллелизмом и производительностью заданий, особенно тех, что касаются видео- или аудиоанализа. Дополнительные сведения см. в статье [Обзор масштабирования обработки мультимедиа](../previous/media-services-scale-media-processing-overview.md). Управлять MrUs можно с помощью [CLI 2.0 для Медиа-сервисов v3,](media-reserved-units-cli-how-to.md)используя [портал Azure](../previous/media-services-portal-scale-media-processing.md)или используя [AI v2.](../previous/media-services-dotnet-encoding-units.md) Подготавливать единицы MRU нужно с учетом того, какая версия API Служб мультимедиа используется: версия 2 или 3.
* С помощью API версии 2 нельзя управлять сущностями Cлужбы мультимедиа, созданными с помощью API версии 3.  
* Не все объекты API V2 автоматически отображаются в API V3.  Ниже приведены примеры сущностей в двух версиях, которые несовместимы:  
    * Задания и задачи, созданные в версии 2, не отображаются в версии 3, так как они не связаны с преобразованием. Рекомендуется переключиться на преобразования и задания версии 3. Относительно короткий период времени, необходимый для наблюдения за потоком версии 2 во время переключения.
    * Каналами и программами, созданными с помощью версии 2 (которые сопоставляются с событиями потоковой трансляции и их выходными данными в версии 3), невозможно управлять с помощью версии 3. Рекомендуется переключиться на события потоковой трансляции и их выходные данные в версии 3 в удобном канале остановки.<br/>В настоящее время постоянно работающие каналы нельзя переносить.  

> [!NOTE]
> Эта страница будет сохранена, так как команда Служб мультимедиа продолжает улучшать API версии 3 и устранять "пробелы" между версиями.

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="next-steps"></a>Дальнейшие действия

[Учебник: Кодирование удаленного файла на основе URL и потоковое видео - .NET](stream-files-dotnet-quickstart.md)
