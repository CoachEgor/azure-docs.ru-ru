---
title: Событие потоковой трансляции Служб мультимедиа Azure и средство цифровой видеозаписи в облаке | Документация Майкрософт
description: В этой статье объясняется, что такое выходные данные потоковой трансляции и как использовать средство цифровой видеозаписи в облаке.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 01/14/2019
ms.author: juliako
ms.openlocfilehash: 4dd14587ec7e1473953981c1ef8c32c59eb9a1d6
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60322341"
---
# <a name="using-a-cloud-dvr"></a>Использование DVR в облаке

[Выходные данные потоковой трансляции](https://docs.microsoft.com/rest/api/media/liveoutputs) дают возможность управлять свойствами исходящей потоковой трансляции, в частности тем, какая ее часть записывается (объем DVR в облаке) и могут ли зрители начать просмотр потоковой трансляции. Отношения между **событием потоковой трансляции** и соответствующими **выходными данными** похожи на традиционное телевещание, когда канал (**событие потоковой трансляции**) передает постоянный поток видео, а запись (**выходные данные потоковой трансляции**) ограничивается определенным периодом времени (например, вечерние новости с 18:30 до 19:00). Телевизионные передачи можно записывать с помощью устройства записи цифрового видео (DVR). Аналогичная функция в событиях потоковой трансляции управляется с помощью свойства ArchiveWindowLength. Это длительность временного диапазона ISO-8601 (например, PTHH:MM:SS), задающая объем DVR. Для нее можно задать значение от 3 минут до 25 часов.

## <a name="live-output"></a>Выходные данные потоковой трансляции

Значение **ArchiveWindowLength** определяет, насколько далеко зритель может отмотать назад относительно текущей позиции вещания.  **ArchiveWindowLength** также определяет, как долго могут увеличиваться манифесты клиентов.

Предположим, что вы выполняете потоковую передачу футбольного матча и для свойства **ArchiveWindowLength** задано значение всего 30 минут. Зритель, который начинает смотреть событие спустя 45 минут после начала игры, может отмотать назад не далее, чем к отметке в 15 минут. Ваши **выходные данные потоковой трансляции** для игры будут формироваться, пока **событие потоковой трансляции** не будет остановлено, но содержимое, находящееся вне допустимых значений **ArchiveWindowLength**, постоянно удаляется из хранилища без возможности восстановления. В этом примере отрезок видео между началом события и отметкой в 15 минут будет удален из вашего DVR и из контейнера в хранилище BLOB-объектов для компонента [Ресурс](https://docs.microsoft.com/rest/api/media/assets). Этот архив невозможно восстановить, и он удаляется из контейнера в хранилище BLOB-объектов Azure.

Все **выходные данные потоковой трансляции** связаны с компонентом **Ресурс**, который используется для записи видео в связанный контейнер хранилища BLOB-объектов Azure. Чтобы опубликовать выходные данные, создайте компонент **указателя потоковой передачи** для этого компонента **Ресурс**. После создания [указателя потоковой передачи](https://docs.microsoft.com/rest/api/media/streaminglocators) вы можете создать URL-адрес потоковой передачи и предоставить его зрителям.

**Событие потоковой трансляции** поддерживает одновременную потоковую трансляцию для трех экземпляров **выходных данных потоковой трансляции**, то есть из одного потока можно создать не более 3 записей или архивов. Благодаря этому можно публиковать и архивировать разные части транслируемого мероприятия. Предположим, что вам необходимо круглосуточно транслировать содержимое по линейному веб-каналу в реальном времени и создавать "записи" разных программ, чтобы клиенты могли по запросу просмотреть пропущенное содержимое. Для этого сценария вам нужно сначала создать основной компонент выходных данных с коротким периодом архивации (1 час или меньше) — это основной поток, к которому подключаются клиенты. Для этого компонента **выходных данных потоковой трансляции** вы создадите **указатель потоковой передачи** и опубликуете его в приложении или на веб-сайте, обозначив как веб-канал "потоковой трансляции". Запустив **событие потоковой трансляции**, вы можете программными средствами создавать дополнительный, параллельный компонент **выходных данных потоковой трансляции** в начале программы (или на 5 минут раньше, чтобы оставить запас на небольшие сдвиги, который вы удалите позднее). Этот дополнительный компонент **выходных данных потоковой трансляции** можно удалить через 5 минут после окончания программы. С помощью дополнительного компонента **Ресурс** можно создать **указатель потоковой передачи**, чтобы опубликовать эту программу в качестве ресурса по запросу в каталоге приложения. Этот процесс можно повторять любое количество раз для других программ или особо важных моментов, которые вы хотите предоставить в качестве видео по запросу. При этом веб-канал "потоковой трансляции" из первого компонента **выходных данных** продолжает транслировать содержимое по линейному веб-каналу. 

> [!NOTE]
> **Выходные данные потоковой трансляции** запускаются при создании и останавливаются при удалении. При удалении **выходных данных потоковой трансляции** базовый **ресурс** и его содержимое не удаляются. 
>
> После публикации ресурса **выходных данных потоковой трансляции** с использованием **указателя потоковой передачи** **событие потоковой трансляции** (до длины окна DVR) будет доступно для просмотра до истечения срока действия или удаления **указателя потоковой передачи**, в зависимости от того, какое действие произойдет первым.

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о потоковой трансляции](live-streaming-overview.md)
- [Руководство по потоковой трансляции](stream-live-tutorial-with-api.md)

