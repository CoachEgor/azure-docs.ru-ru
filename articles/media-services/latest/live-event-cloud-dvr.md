---
title: Событие потоковой трансляции Служб мультимедиа Azure и средство цифровой видеозаписи в облаке | Документация Майкрософт
description: В этой статье объясняется, что такое выходные данные потоковой трансляции и как использовать средство цифровой видеозаписи в облаке.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 08/27/2019
ms.author: juliako
ms.openlocfilehash: a10c76dd7fb4ef1e9a45666ff3a3ca0d937d2c94
ms.sourcegitcommit: 2aefdf92db8950ff02c94d8b0535bf4096021b11
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/03/2019
ms.locfileid: "70231222"
---
# <a name="using-a-cloud-digital-video-recorder-dvr"></a>Использование облачного цифрового записывающего видео (DVR)

В службах мультимедиа Azure [динамический выходной](https://docs.microsoft.com/rest/api/media/liveoutputs) объект подобен цифровому видеозаписывающему, который будет перехватывать и записывать динамический поток в ресурс в учетной записи служб мультимедиа. Записанное содержимое сохраняется в контейнере [, определенном ресурсом](https://docs.microsoft.com/rest/api/media/assets) ресурса (контейнер находится в учетной записи хранения Azure, присоединенной к вашей учетной записи). Выходные данные в реальном времени позволяют управлять некоторыми свойствами исходящего активного потока, например объемом потока, который хранится в записи архива (например, емкостью DVR для облака), а также сведения о том, могут ли зрители начать просмотр потока в реальном времени. Архив на диске — это циклический Архив "Window", который содержит только объем содержимого, указанного в свойстве **оно** выходного выхода. Содержимое, выходящее за рамки этого окна, автоматически удаляется из контейнера хранилища и не подлежит восстановлению. Значение оно представляет собой длительность ISO-8601 TimeSpan (например, ПСХ: MM: SS), которая указывает емкость DVR и может принимать значения от минимум 3 минут до максимума в 25 часов.

Связь между событием Live и его обычными выходными данными аналогична традиционной телевизионной трансляции, при которой канал (прямая трансляция) представляет собой постоянный поток видео и запись (выходные данные в реальном времени) в пределах определенного временного сегмента (например, вечером Новости с 6:30 до 7:12:00). Когда поток переводится в интерактивное событие, вы можете начать потоковую передачу события, создав ресурс, динамический выход и указатель потоковой передачи. Выходные данные будут архивировать поток и сделать его доступным для средств просмотра через [конечную точку потоковой передачи](https://docs.microsoft.com/rest/api/media/streamingendpoints). Вы можете создать несколько динамических выходных данных (до трех максимумов) на динамическом событии с разными длинами и параметрами архива. Сведения о рабочем процессе потоковой передачи в реальном времени см. в разделе [Общие действия](live-streaming-overview.md#general-steps) .

## <a name="using-a-dvr-during-an-event"></a>Использование DVR во время события 

В этом разделе описывается использование DVR во время события для управления тем, какие части потока доступны для операции "Перемотка назад".

Значение оно определяет время, в течение которого средство просмотра может выполнить поиск из текущей активной должности. Значение оно также определяет, как долго могут расти манифесты клиента.

Предположим, что вы настраиваете поток на футболку, и у него есть оно всего 30 минут. Зритель, который начинает смотреть событие спустя 45 минут после начала игры, может отмотать назад не далее, чем к отметке в 15 минут. Ваши выходные данные для игры будут продолжаться до тех пор, пока событие не будет остановлено, но содержимое, которое находится за пределами оно, будет постоянно отклонено из хранилища и не будет восстановлено. В этом примере видео между началом события и 15-минутной меткой было удалено из DVR и из контейнера в хранилище BLOB-объектов для ресурса. Этот архив невозможно восстановить, и он удаляется из контейнера в хранилище BLOB-объектов Azure.

Динамическое событие поддерживает до трех параллельно выполняющихся динамических выходов (вы можете одновременно создать не более трех записей и архивов из одного активного потока). Благодаря этому можно публиковать и архивировать разные части транслируемого мероприятия. Предположим, что вам необходимо круглосуточно транслировать содержимое по линейному веб-каналу в реальном времени и создавать "записи" разных программ, чтобы клиенты могли по запросу просмотреть пропущенное содержимое. Для этого сценария вам нужно сначала создать основной компонент выходных данных с коротким периодом архивации (1 час или меньше) — это основной поток, к которому подключаются клиенты. Вы создадите указатель потоковой передачи для этого выходного потока и опубликуете его в приложении или на веб-сайте в качестве интерактивного веб-канала. Пока выполняется интерактивное событие, можно программно создать второй параллельный выходной поток в начале программы (или 5 минут раньше, чтобы предоставить несколько дескрипторов для обрезки). Второй динамический выход может быть удален через 5 минут после завершения программы. С помощью этого второго ресурса можно создать новый указатель потоковой передачи, чтобы опубликовать эту программу как ресурс-контейнер по запросу в каталоге приложения. Этот процесс можно повторить несколько раз для других границ программы или подсветов, которые вы хотите использовать в качестве видеороликов по запросу, в то время как интерактивный канал из первого интерактивного выхода продолжит транслировать линейный канал. 

## <a name="creating-an-archive-for-on-demand-playback"></a>Создание архива для воспроизведения по требованию

Ресурс, в который осуществляется архивация в реальном времени, автоматически становится активом по запросу при удалении активного выхода. Прежде чем можно будет остановить интерактивное событие, необходимо удалить все активные выходные данные. Можно использовать необязательный флаг [ремовеаутпутсонстоп](https://docs.microsoft.com/rest/api/media/liveevents/stop#request-body) для автоматического удаления динамических выходных данных при прерывании. 

Даже после завершения и удаления события пользователи смогут выполнять потоковую передачу архивного содержимого в виде видео по запросу, пока ресурс не будет удален. Ресурс не должен удаляться, если он используется событием; Сначала необходимо удалить событие.

Если вы опубликовали ресурс в режиме реального времени с помощью указателя потоковой передачи, событие в реальном времени (до длины окна DVR) будет по-прежнему отображаться до истечения срока действия указателя потоковой передачи или удаления, в зависимости от того, что происходит раньше.

Дополнительные сведения можно найти в разделе

- [Общие сведения о потоковой трансляции](live-streaming-overview.md)
- [Руководство по потоковой трансляции](stream-live-tutorial-with-api.md)

> [!NOTE]
> При удалении выходных данных вы не удаляете базовый ресурс и содержимое в ресурсе. 

## <a name="next-steps"></a>Следующие шаги

* [Подрежьте видео](subclip-video-rest-howto.md).
* [Определите фильтры для своих ресурсов](filters-dynamic-manifest-rest-howto.md).
