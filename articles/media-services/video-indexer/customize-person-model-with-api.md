---
title: Настройка модели Person с помощью API индексатора видео
titleSuffix: Azure Media Services
description: Узнайте, как настроить модель Person с помощью API индексатора видео.
services: media-services
author: anikaz
manager: johndeu
ms.service: media-services
ms.subservice: video-indexer
ms.topic: article
ms.date: 01/14/2020
ms.author: anzaman
ms.openlocfilehash: fa41fca7f8ad96cf507aa6f04059b1254c8c3961
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "80127891"
---
# <a name="customize-a-person-model-with-the-video-indexer-api"></a>Настройка модели пользователя с помощью API Индексатора видео

Индексатор видео поддерживает функцию определения лиц и распознавания знаменитостей для видеосодержимого. Функция распознавания знаменитости охватывает около 1 000 000 лиц на основе часто запрашиваемого источника данных, такого как IMDB, Википедии и Top влияния на LinkedIn. Лица, которые не распознаются функцией распознавания знаменитости, обнаруживаются, но остаются неименованными. После отправки видео в индексатор видео и возврата результатов можно вернуться назад и присвоить имена тем, которые не были распознаны. После того как вы введете имя для определенного лица, это лицо и назначенное имя будут добавлены в модель пользователя вашей учетной записи. Индексатор видео затем сможет распознать это лицо в будущих и предыдущих видео.

Вы можете использовать API Индексатора видео для изменения обнаруженных в видео лиц, как описано в этом разделе. Вы также можете использовать API, как описано в статье [Customize Person model using the Video Indexer website](customize-person-model-with-api.md) (Настройка модели пользователя с помощью API Индексатора видео).

## <a name="managing-multiple-person-models"></a>Управление несколькими моделями пользователя

Индексатор видео поддерживает использование нескольких моделей пользователя на одну учетную запись. Эта функция сейчас доступна только с помощью API Индексатора видео.

Если ваша учетная запись поддерживает разные сценарии ввода-вывода, вам может потребоваться создать несколько моделей пользователя на одну учетную запись. Например, если содержимое связано с спортивными, можно создать отдельную модель для каждого вида спорта (футбол, баскетбол, футбол и т. д.).

После создания модели вы можете использовать ее указав идентификатор конкретной модели пользователя при отправке, индексации или переиндексации видео. Обучение нового лица для видео обновляет определенную настраиваемую модель, с которой это видео было связано.

Для каждой учетной записи стоит ограничение в 50 моделей пользователя. Если поддержка модели с несколькими людьми не нужна, не присваивайте видео идентификатор модели пользователя при отправке, индексировании или повторном индексировании. В этом случае Индексатор видео использует пользовательскую модель пользователя по умолчанию с вашей учетной записи.

## <a name="create-a-new-person-model"></a>Создание новой модели пользователя

Чтобы создать новую модель Person в указанной учетной записи, используйте API [создания модели Person](https://api-portal.videoindexer.ai/docs/services/operations/operations/Create-Person-Model?) .

Ответ предоставляет имя и идентификатор модели пользователя, которую вы создали используя формат из примера приведенного ниже.

```json
{
    "id": "227654b4-912c-4b92-ba4f-641d488e3720",
    "name": "Example Person Model"
}
```

Затем используется значение **идентификатора** для параметра **персонмоделид** при [отправке видео для индексирования или повторного](https://api-portal.videoindexer.ai/docs/services/operations/operations/Upload-video?) [индексирования видео](https://api-portal.videoindexer.ai/docs/services/operations/operations/Re-index-video?).

## <a name="delete-a-person-model"></a>Удаление модели пользователя

Чтобы удалить пользовательскую модель Person из указанной учетной записи, используйте API [-интерфейс удаления модели Person](https://api-portal.videoindexer.ai/docs/services/operations/operations/Delete-Person-Model?) .

После успешного удаления модели пользователя, индекс ваших видео, который использовал удаленную модель, измениться только после переиндексации. При повторном индексировании лица, которые были названы в удаленной модели, не распознаются индексатором видео в текущих видео, которые были проиндексированы с помощью этой модели, но лица по-прежнему будут обнаружены. Ваши видео, индексирование с помощью удаленной модели, будут использовать модель пользователя вашей учетной записи по умолчанию. Если имена лиц с удаленной модели также подсоединены к вашей модели учетной записи по умолчанию, то они все же будут распознаваться в видео.

При успешном удалении модели Person возвращенное содержимое отсутствует.

## <a name="get-all-person-models"></a>Получение всех моделей пользователя

Чтобы получить все модели Person в указанной учетной записи, используйте API-интерфейс [получения модели Person](https://api-portal.videoindexer.ai/docs/services/operations/operations/Get-Person-Models?) .

Ответ предоставляет список всех моделей Person в вашей учетной записи (включая модель пользователя по умолчанию в указанной учетной записи), а также имена и идентификаторы, следующие за форматом приведенного ниже примера.

```json
[
    {
        "id": "59f9c326-b141-4515-abe7-7d822518571f",
        "name": "Default"
    }, 
    {
        "id": "9ef2632d-310a-4510-92e1-cc70ae0230d4",
        "name": "Test"
    }
]
```

Вы можете выбрать модель, которая будет использоваться для видео, `id` используя значение модели Person для `personModelId` параметра при [отправке видео для индексирования или повторного](https://api-portal.videoindexer.ai/docs/services/operations/operations/Upload-video?) [индексирования видео](https://api-portal.videoindexer.ai/docs/services/operations/operations/Re-index-video?).

## <a name="update-a-face"></a>Обновление информации о лицах

Эта команда позволяет обновлять информацию о лицах в вашем видео добавлением имени с помощью идентификатора видео и идентификатора лица. Затем это действие обновляет модель Person, с которой было связано видео при отправке, индексировании или повторном индексировании. Если не было указано модель пользователя, тогда обновляется модель учетной записи по умолчанию.

Затем система распознает вхождения одного и того же лица в других текущих видеороликах, использующих одну и ту же модель Person. Распознавание лиц в других имеющихся видео может занять некоторое время, так как этот процесс представляет собой пакетную обработку.

Вы можете присвоить лицу, которое Индексатор видео распознал как знаменитость, новое имя. Новое имя, которое вы присвоите, будет иметь приоритет над именами, встроенными в функцию распознавания знаменитостей.

Для обновления грани используйте API [обновления видеоролика](https://api-portal.videoindexer.ai/docs/services/operations/operations/Update-Video-Face?) .

Имена являются уникальными для моделей Person, поэтому если вы придаете двум разным лицам одну и ту же `name` одну и ту же величину параметра, индексатор видео просматривает людей как одного и объединяет их после переиндексации видео.

## <a name="next-steps"></a>Дальнейшие шаги

[Customize Person model using the Video Indexer website](customize-person-model-with-website.md) (Настройка модели пользователя с помощью веб-сайта Индексатора видео)
