---
title: Развертывание модулей на портале Azure — Azure IoT Edge | Документация Майкрософт
description: Использование портала Azure для развертывания модулей на устройстве IoT Edge
author: kgremban
manager: philmea
ms.author: kgremban
ms.date: 02/19/2019
ms.topic: conceptual
ms.reviewer: menchi
ms.service: iot-edge
services: iot-edge
ms.custom: seodec18
ms.openlocfilehash: 9d7729dce5419c5813de3c4dfce55c40098f5988
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60595243"
---
# <a name="deploy-azure-iot-edge-modules-from-the-azure-portal"></a>Развертывание модулей IoT Edge Azure с помощью портала Azure

Создав модули IoT Edge с в соответствии с определенной бизнес-логикой, вы наверняка захотите развернуть их на устройствах, которые будут работать в граничной среде. Если у вас есть несколько модулей, которые совместно собирают и (или) обрабатывают данные, вы можете развернуть их одновременно и объявить правила маршрутизации для их объединения.

В этой статье описано, как с помощью портала Azure создать манифест развертывания и отправить это развертывание на устройство IoT Edge. Информацию о создании развертываний, предназначенных для нескольких устройств с определенными значениями тегов, см. в разделе [Развертывание и мониторинг модулей IoT Edge в нужном масштабе (предварительная версия)](how-to-deploy-monitor.md)

## <a name="prerequisites"></a>Технические условия

* [Центр Интернета вещей](../iot-hub/iot-hub-create-through-portal.md) в подписке Azure.
* [Устройство IoT Edge](how-to-register-device-portal.md) с установленной средой выполнения IoT Edge.

## <a name="select-your-device"></a>Выбор устройства

1. Войдите на [портал Azure](https://portal.azure.com) и перейдите к своему Центру Интернета вещей.
1. В меню выберите **IoT Edge**.
1. Щелкните идентификатор целевого устройства в списке устройств.
1. Щелкните **Set Modules** (Настроить модули).

## <a name="configure-a-deployment-manifest"></a>Настройка манифеста развертывания

Манифест развертывания — это документ JSON, в котором определены развертываемые модули, способ передачи данных между этими модулями и требуемые свойства для двойников модулей. Дополнительные сведения о работе манифестов развертывания и об их создании см. в руководстве по [использованию, настройке и повторном использовании модулей Azure IoT Edge](module-composition.md).

Портал Azure предоставляет мастер, который в пошаговом режиме помогает создать манифест развертывания без необходимости редактировать документ JSON вручную. Манифест создается в три этапа: **Добавление модулей**, **Указание маршрутов** и **Просмотр развертываний**.

### <a name="add-modules"></a>Добавление модулей

1. В разделе **Параметры реестра** на этой странице введите учетные данные для доступа ко всем реестрам частных контейнеров, которые содержат образы модулей.

1. В разделе **Модули развертывания** на этой странице выберите **Добавить**.

1. Просмотрите типы модулей в раскрывающемся списке:

   * **Модуль IoT Edge Module** — предлагается по умолчанию.
   * **Модуль Azure Stream Analytics** — только для модулей, созданных в рабочей нагрузке Azure Stream Analytics.
   * **Модуль машинного обучения Azure** — только для образов моделей, созданных в рабочей области машинного обучения Azure.

1. Выберите **Модуль IoT Edge**.

1. Введите имя модуля и выберите образ контейнера. Пример:

   * **Имя** — tempSensor
   * **URI образа** — mcr.microsoft.com/azureiotedge-simulated-temperature-sensor:1.0.

1. При желании заполните необязательные поля. Дополнительные сведения о возможностях при создании контейнера, политике перезапуска и требуемом состоянии см. в разделе [Требуемые свойства EdgeAgent](module-edgeagent-edgehub.md#edgeagent-desired-properties). Подробные сведения о двойниках модулей см. в разделе [Определение или обновление требуемых свойств](module-composition.md#define-or-update-desired-properties).

1. Щелкните **Сохранить**.

1. Повторите шаги 2–6 для всех дополнительных модулей этого развертывания.

1. Щелкните **Далее**, чтобы перейти на страницу маршрутов.

### <a name="specify-routes"></a>Настройка маршрутов

По умолчанию мастер предлагает маршрут с именем **route**, который определен как **FROM /\* INTO $upstream**. Этот маршрут направляет все сообщения, выводимые любыми модулями, в Центр Интернета вещей.  

Добавьте в маршруты информацию из раздела [Объявление маршрутов](module-composition.md#declare-routes), а затем щелкните **Далее**, чтобы перейти к разделу проверки.

### <a name="review-deployment"></a>Проверка развертывания

В разделе обзорной информации вы увидите манифест развертывания в формате JSON, который был создан на основе параметров, выбранных вами в двух предыдущих разделах. Обратите внимание, что здесь объявлены два дополнительных модуля, которые вы не добавляли: **$edgeAgent** и **$edgeHub**. Эти два модуля составляют [среду выполнения IoT Edge](iot-edge-runtime.md) и являются обязательными для каждого развертывания.

Просмотрите сведения о развертывании, а затем выберите **Отправить**.

## <a name="view-modules-on-your-device"></a>Просмотр модулей, установленных на устройстве

Завершив развертывание модулей на устройстве, вы можете просмотреть их на странице портала **Сведения об устройствах**. Эта страница отображает имя каждого развернутого модуля и полезную информацию о нем, включая состояние развертывания и код завершения.

## <a name="deploy-modules-from-azure-marketplace"></a>Развертывание модулей из Azure Marketplace

Azure Marketplace — это интернет-магазин приложений и служб, где вы можете просматривать разнообразные корпоративные приложения и решения, сертифицированные и оптимизированные для работы в Azure, включая [модули IoT Edge](https://azuremarketplace.microsoft.com/marketplace/apps/category/internet-of-things?page=1&subcategories=iot-edge-modules). Доступ к Azure Marketplace возможен также с помощью портала Azure в разделе **Создать ресурс**.

Вы можете установить модуль IoT Edge из Azure Marketplace или портала Azure.

1. Найдите модуль и начните процесс развертывания.

   * Портал Azure: Найдите модуль и выберите **Создать**.

   * Azure Marketplace:

     1. Найдите модуль и выберите **Получить**.
     1. Подтвердите условия использования и политику конфиденциальности поставщика, выбрав **Продолжить**.

1. Выберите свою подписку и Центр Интернета вещей, к которому подключено целевое устройство.

1. Выберите **Развертывание на устройстве**.

1. Введите имя устройства или выберите **Найти устройство**, чтобы просмотреть устройства, зарегистрированные в центре.

1. Выберите **Создать** для продолжения стандартного процесса настройки манифеста развертывания, при желании включая добавление других модулей. Сведения новых модулей, например URI образа, параметры создания или требуемые свойства, предопределены, но их можно изменить.

## <a name="next-steps"></a>Дальнейшие действия

Изучите раздел [Развертывание и мониторинг модулей IoT Edge в нужном масштабе (предварительная версия)](how-to-deploy-monitor.md)
