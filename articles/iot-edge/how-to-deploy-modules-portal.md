---
title: Развертывание модулей с портала Azure - Azure IoT Edge
description: Используйте концентратор IoT на портале Azure, чтобы подтолкнуть модуль IoT Edge от концентратора IoT на устройство IoT Edge, настроенное манифестом развертывания.
author: kgremban
manager: philmea
ms.author: kgremban
ms.date: 12/30/2019
ms.topic: conceptual
ms.reviewer: menchi
ms.service: iot-edge
services: iot-edge
ms.openlocfilehash: 5c44561895bc1905328ec0eb357bee1c68a8eb55
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79271451"
---
# <a name="deploy-azure-iot-edge-modules-from-the-azure-portal"></a>Развертывание модулей IoT Edge Azure с помощью портала Azure

Создав модули IoT Edge с в соответствии с определенной бизнес-логикой, вы наверняка захотите развернуть их на устройствах, которые будут работать в граничной среде. Если у вас есть несколько модулей, которые работают вместе для сбора и обработки данных, вы можете развернуть их одновременно и объявить правила маршрутизации, которые их соединяют.

В этой статье описано, как с помощью портала Azure создать манифест развертывания и отправить это развертывание на устройство IoT Edge. Для получения информации о создании развертывания, ориентированного на несколько устройств на основе общих тегов, [см. Развертывание и мониторинг модулей IoT Edge в масштабе.](how-to-deploy-monitor.md)

## <a name="prerequisites"></a>Предварительные требования

* [Концентратор IoT](../iot-hub/iot-hub-create-through-portal.md) в подписке Azure.
* [Устройство IoT Edge](how-to-register-device.md#register-in-the-azure-portal) с установленной средой выполнения IoT Edge.

## <a name="configure-a-deployment-manifest"></a>Настройка манифеста развертывания

Манифест развертывания — это документ JSON, в котором определены развертываемые модули, способ передачи данных между этими модулями и требуемые свойства для двойников модулей. Дополнительные сведения о работе манифестов развертывания и об их создании см. в руководстве по [использованию, настройке и повторном использовании модулей Azure IoT Edge](module-composition.md).

Портал Azure предоставляет мастер, который в пошаговом режиме помогает создать манифест развертывания без необходимости редактировать документ JSON вручную. В этом мастере есть три шага: **Добавление модулей**, **Указание маршрутов** и **Просмотр развертываний**.

### <a name="select-device-and-add-modules"></a>Выберите устройство и добавьте модули

1. Войдите на [портал Azure](https://portal.azure.com) и перейдите к концентратору IoT.
1. На левой панели выберите **IoT Edge** из меню.
1. Щелкните идентификатор целевого устройства в списке устройств.
1. На верхней панели выберите **Задание модулей**.
1. В разделе **Настройки контейнерного реестра страницы** предоставьте учетные данные для доступа к любым частным реестрам контейнеров, содержащих изображения модуля.
1. В разделе **Модули IoT Edge** на странице выберите **Добавить**.
1. Посмотрите на типы модулей из выпадающего меню:

   * **Модуль IoT Edge** - Вы предоставляете имя модуля и изображение контейнера URI. Например, изображение URI для образца модуля SimulatedTemperatureSensor. `mcr.microsoft.com/azureiotedge-simulated-temperature-sensor:1.0` Если изображение модуля хранится в реестре частных контейнеров, добавьте учетные данные на этой странице для доступа к изображению.
   * **Модуль Marketplace** - Модули, размещенные в Azure Marketplace. Некоторые модули рынка требуют дополнительной конфигурации, поэтому просмотрите детали модуля в списке [модулей Azure Marketplace IoT Edge.](https://azuremarketplace.microsoft.com/marketplace/apps/category/internet-of-things?page=1&subcategories=iot-edge-modules)
   * **Модуль аналитики потока Azure** - Модули, созданные из рабочей нагрузки Azure Stream Analytics.

1. После добавления модуля выберите имя модуля из списка, чтобы открыть настройки модуля. При желании заполните необязательные поля. Дополнительные сведения о возможностях при создании контейнера, политике перезапуска и требуемом состоянии см. в разделе [Требуемые свойства EdgeAgent](module-edgeagent-edgehub.md#edgeagent-desired-properties). Подробные сведения о двойниках модулей см. в разделе [Определение или обновление требуемых свойств](module-composition.md#define-or-update-desired-properties).
1. При необходимости повторите шаги с 5 до 8, чтобы добавить дополнительные модули к развертыванию.
1. Выберите **Далее: Маршруты** для продолжения раздела маршрутов.

### <a name="specify-routes"></a>Настройка маршрутов

На вкладке **Маршруты** определите способ передачи сообщений между модулями и Центром Интернета вещей. Сообщения создаются с использованием пар "имя — значение". По умолчанию маршрут называется **маршрутом** и определяется как **FROM/messages/\* INTO $upstream,** что означает, что любые сообщения, выводимые любыми модулями, отправляются в ваш концентратор IoT.  

Добавляйте или обновляйте маршруты с информацией из [маршрутов Объявления,](module-composition.md#declare-routes)затем выберите **Следующий: Обзор и создайте,** чтобы продолжить следующий шаг мастера.

### <a name="review-deployment"></a>Проверка развертывания

В разделе обзорной информации вы увидите манифест развертывания в формате JSON, который был создан на основе параметров, выбранных вами в двух предыдущих разделах. Обратите внимание, что здесь объявлены два дополнительных модуля, которые вы не добавляли: **$edgeAgent** и **$edgeHub**. Эти два модуля составляют [среду выполнения IoT Edge](iot-edge-runtime.md) и являются обязательными для каждого развертывания.

Просмотрите информацию о развертывании, а затем выберите **Create**.

## <a name="view-modules-on-your-device"></a>Просмотр модулей, установленных на устройстве

После развертывания модулей на устройство можно просмотреть все их на странице данных устройства. Эта страница отображает имя каждого развернутого модуля и полезную информацию о нем, включая состояние развертывания и код завершения.

## <a name="deploy-modules-from-azure-marketplace"></a>Развертывание модулей из Azure Marketplace

[Azure Marketplace](https://azuremarketplace.microsoft.com/) — это рынок онлайн-приложений и услуг, где можно просматривать широкий спектр корпоративных приложений и решений, сертифицированных и оптимизированных для запуска на Azure, включая [модули IoT Edge.](https://azuremarketplace.microsoft.com/marketplace/apps/category/internet-of-things?page=1&subcategories=iot-edge-modules)

Можно развернуть модуль IoT Edge из Azure Marketplace и из концентратора IoT.

### <a name="deploy-from-azure-marketplace"></a>Развертывание из Azure Marketplace

Окунитесь модулей IoT Edge на рынке, и когда вы найдете тот, который вы хотите, вы можете развернуть его, выбрав **Создать** или **получить его сейчас.** Приступить к шагам мастер-разработок развертывания, которые могут варьироваться в зависимости от выбранного вами модуля IoT Edge:

1. Подтвердите условия использования и политику конфиденциальности поставщика, выбрав **Продолжить**. Возможно, сначала вам придется предоставить контактную информацию.
1. Выберите свою подписку и Центр Интернета вещей, к которому подключено целевое устройство.
1. Выберите **Развертывание на устройстве**.
1. Введите имя устройства или выберите **Найти устройство**, чтобы просмотреть устройства, зарегистрированные в центре.
1. Выберите **Создать** для продолжения стандартного процесса настройки манифеста развертывания, при желании включая добавление других модулей. Сведения новых модулей, например URI образа, параметры создания или требуемые свойства, предопределены, но их можно изменить.

Убедитесь, что модуль развернут в концентраторе IoT на портале Azure. Выберите устройство, выберите **набор модулей** и модуль должен быть указан в разделе **IoT Edge Модули.**

### <a name="deploy-from-azure-iot-hub"></a>Развертывание из концентратора Azure IoT

Можно быстро развернуть модуль из Azure Marketplace на устройство в концентраторе IoT на портале Azure.

1. Найдите нужный Центр Интернета вещей на портале Azure.
1. На левой панели, под **автоматическим управлением устройствами,** выберите **IoT Edge.**
1. Выберите устройство IoT Edge, которое должно получить развертывание.
1. На верхней панели выберите **Задание модулей**.
1. В разделе **Модули IoT Edge** нажмите **«Добавить»** и выберите **модуль Marketplace** из выпадающего меню.

![Добавление модуля в концентратор IoT](./media/how-to-deploy-modules-portal/iothub-add-module.png)

Выберите модуль со страницы **IoT Edge Module Marketplace.** Выбранный модуль автоматически настраивается для подписки, группы ресурсов и устройства. Затем он появляется в списке модулей IoT Edge. Некоторые модули могут потребовать дополнительной конфигурации.

> [!TIP]
> Информация о модулях IoT Edge от концентратора Azure IoT ограничена. Сначала вы можете узнать больше о [модулях IoT Edge](https://azuremarketplace.microsoft.com/marketplace/apps/category/internet-of-things?page=1&subcategories=iot-edge-modules) в Azure Marketplace.

Выберите **Далее: Маршруты** и продолжить развертывание, как описано [в Указано маршруты](#specify-routes) и [обзор развертывания](#review-deployment) ранее в этой статье.

## <a name="next-steps"></a>Дальнейшие действия

Изучите раздел [Развертывание и мониторинг модулей IoT Edge в нужном масштабе (предварительная версия)](how-to-deploy-monitor.md)
