---
title: Установка Edge Интернета вещей Azure для Linux на Windows | Документация Майкрософт
description: Инструкции по установке Azure IoT Edge для контейнеров Linux в Windows 10, Windows Server и Windows IoT базовая
author: kgremban
manager: philmea
ms.reviewer: veyalla
ms.service: iot-edge
services: iot-edge
ms.topic: conceptual
ms.date: 05/06/2019
ms.author: kgremban
ms.openlocfilehash: b7386cbbe18d7e05c2fbffb96f6214b468956192
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66151705"
---
# <a name="use-iot-edge-on-windows-to-run-linux-containers"></a>Использование IoT Edge в Windows для запуска контейнеров Linux

Тестирование модулей IoT Edge для устройств Linux с помощью компьютера Windows. 

Устройства Windows в рабочем сценарии следует запускать только контейнеры Windows. Тем не менее распространенных сценариях разработки будет использовать компьютер Windows для создания модулей для Linux устройств IoT Edge. Среда выполнения IoT Edge для Windows позволяет запускать контейнеры Linux для **тестирования и разработки** целей. 

В этой статье приводятся инструкции по установке среды выполнения Azure IoT Edge с использованием контейнеров Linux в вашей Windows x64 (AMD и Intel) системы. Дополнительные сведения о установщик среды выполнения IoT Edge, включая сведения о параметрах установки см. в разделе [установить среду выполнения Azure IoT Edge на Windows](how-to-install-iot-edge-windows.md).

## <a name="prerequisites"></a>Технические условия

В этом разделе можно посмотреть, поддерживает ли устройство Windows IoT Edge, а также подготовить его для подсистемы контейнеров перед установкой. 

### <a name="supported-windows-versions"></a>Поддерживаемые версии Windows

Azure IoT Edge с помощью контейнеров Linux могут работать в следующих версиях Windows: 
* юбилейное обновление Windows 10 (сборка 14393) или более поздняя версия;
* Windows Server 2016 или поздней версии.

Дополнительные сведения о том, что входит в последнюю версию IoT Edge, см. в разделе [Выпуски Azure IoT Edge](https://github.com/Azure/azure-iotedge/releases).

Если вы хотите установить Edge Интернета вещей на виртуальной машине, включение вложенной виртуализации и выделите по крайней мере 2 ГБ памяти. Как включить вложенную виртуализацию, отличается в зависимости от низкоуровневой оболочки к использованию. Для Hyper-V виртуальные машины поколения 2 имеются вложенные виртуализация включена по умолчанию. Для VMWare есть переключатель, чтобы включить эту функцию на виртуальной машине. 

### <a name="prepare-the-container-engine"></a>Подготовка обработчика контейнеров 

Служба Azure IoT Edge использует подсистему контейнеров, [совместимую с OCI](https://www.opencontainers.org/). Главное отличие конфигурации между контейнерами Windows и Linux на Windows, компьютер — Установка Edge Интернета вещей включает среду выполнения контейнера Windows, что необходимо предоставить собственную среду выполнения для контейнеров Linux, прежде чем устанавливать IoT Edge. 

Чтобы настроить компьютер Windows для разработки и тестирования контейнеров для устройств Linux, можно использовать [Docker Desktop](https://www.docker.com/docker-windows) качестве контейнер подсистемы. Необходимо установить Docker и настроить его для [используются контейнеры Linux](https://docs.docker.com/docker-for-windows/#switch-between-windows-and-linux-containers) перед установкой IoT Edge.  

Если устройство IoT Edge является компьютером под управлением Windows, убедитесь, что оно соответствует [системным требованиям](https://docs.microsoft.com/virtualization/hyper-v-on-windows/reference/hyper-v-requirements) для использования Hyper-V.

## <a name="install-iot-edge-on-a-new-device"></a>Установка IoT Edge на новое устройство

>[!NOTE]
>Использование программных пакетов Azure IoT Edge регулируется условиями лицензии, содержащейся в самих пакетах (в каталоге LICENSE). Прежде чем использовать пакет, ознакомьтесь с условиями лицензии. Установка и использование пакета означают, что вы принимаете эти условия. Если вы не согласны с условиями лицензии, не используйте пакет.

Сценарий PowerShell загружает и устанавливает управляющую программу безопасности Azure IoT Edge. Управляющая программа безопасности запускает первый из двух модулей среды выполнения, агент IoT Edge, который обеспечивает удаленные развертывания других модулей. 

При установке среды выполнения IoT Edge в первый раз на устройстве нужно подготовить устройство с помощью удостоверения из центра Интернета вещей. Подготовку одного устройства IoT Edge можно выполнять вручную с помощью строки подключения устройства, предоставленного вашим центром Интернета вещей. Вы также можете использовать службу подготовки устройств, что удобно, если нужно автоматически подготовить несколько устройств. 

Дополнительные сведения о разных параметрах установки и параметры в этой статье [установить среду выполнения Azure IoT Edge на Windows](how-to-install-iot-edge-windows.md). Получив Desktop Docker установлен и настроен для контейнеров Linux, разница главным установочным объявляет Linux с помощью **- ContainerOs** параметра. Пример: 

1. Если у вас ее нет, зарегистрируйте новое устройство IoT Edge и получить строку подключения устройства. Скопируйте строку подключения для последующего использования в этом разделе. Можно выполнить этот шаг, с помощью следующих средств:

   * [портал Azure](how-to-register-device-portal.md)
   * [Интерфейс командной строки Azure](how-to-register-device-cli.md)
   * [Visual Studio Code](how-to-register-device-vscode.md)

2. Откройте сеанс PowerShell от имени администратора.

   >[!NOTE]
   >Для установки IoT Edge используйте сеанс AMD64 PowerShell, а не PowerShell (x86). Чтобы узнать, какой тип сеанса используется, выполните следующую команду:
   >
   >```powershell
   >(Get-Process -Id $PID).StartInfo.EnvironmentVariables["PROCESSOR_ARCHITECTURE"]
   >```

3. **IoTEdge развернуть** команда проверяет, что компьютер Windows находится в поддерживаемой версии, включает функцию контейнеров и загружает Кита среды выполнения (который не используется для контейнеров Linux) и среды выполнения IoT Edge. Команда значения по умолчанию к контейнерам Windows Объявим Linux нужного контейнера операционной системы. 

   ```powershell
   . {Invoke-WebRequest -useb aka.ms/iotedge-win} | Invoke-Expression; `
   Deploy-IoTEdge -ContainerOs Linux
   ```

4. На этом этапе устройств IoT Core перезагружается автоматически. Другие устройства Windows 10 или Windows Server может потребоваться перезагрузка. Если Да, перезагрузите сейчас устройство. Когда устройство будет готово, снова запустите PowerShell с правами администратора.

5. Команда **Initialize-IoTEdge** настраивает среду выполнения IoT Edge на вашем компьютере. По умолчанию используется ручной подготовки с помощью строки подключения устройства. Объявите Linux нужного контейнера операционной системы. 

   ```powershell
   . {Invoke-WebRequest -useb aka.ms/iotedge-win} | Invoke-Expression; `
   Initialize-IoTEdge -ContainerOs Linux
   ```

6. При запросе укажите строку подключения устройства, полученный на шаге 1. Строка подключения устройства связывает физического устройства с Идентификатором устройства в центре Интернета вещей. 

   Строка подключения устройства имеет следующий формат и не должно содержать кавычки: `HostName={IoT hub name}.azure-devices.net;DeviceId={device name};SharedAccessKey={key}`

## <a name="verify-successful-installation"></a>Проверка установки

Проверьте состояние службы IoT Edge. Она будет указана как запущенные.  

```powershell
Get-Service iotedge
```

Просмотрите журналы службы за последние пять минут. 

```powershell
. {Invoke-WebRequest -useb aka.ms/iotedge-win} | Invoke-Expression; Get-IoTEdgeLog
```

Просмотрите список запущенных модулей. После установки, единственный модуль, вы увидите выполнение **edgeAgent**. После того как вы [развертывания модулей IoT Edge](how-to-deploy-modules-portal.md), вы увидите другим пользователям. 

```powershell
iotedge list
```

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда подготовлено устройство IoT Edge и установлена среда выполнения, вы можете [развернуть модули IoT Edge](how-to-deploy-modules-portal.md).

Если вам не удается установить IoT Edge, перейдите на страницу со сведениями об [устранении неполадок](troubleshoot.md).

Чтобы обновить существующую установку до последней версии IoT Edge, см. раздел [Обновление управляющей программы безопасности и среды выполнения IoT Edge](how-to-update-iot-edge.md).
