---
title: Достижение геоизбыточности для Azure Stream Analyticsных заданий
description: В этой статье описывается, как добиться географической избыточности Azure Stream Analytics заданий вместо географической отработки отказа.
author: mamccrea
ms.author: mamccrea
ms.service: stream-analytics
ms.topic: how-to
ms.date: 08/26/2020
ms.openlocfilehash: 44b0394773485f8054eddc94c7d7e9b91baebc6d
ms.sourcegitcommit: e69bb334ea7e81d49530ebd6c2d3a3a8fa9775c9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/27/2020
ms.locfileid: "88951097"
---
# <a name="achieve-geo-redundancy-for-azure-stream-analytics-jobs"></a>Достижение геоизбыточности для Azure Stream Analyticsных заданий

Azure Stream Analytics не поддерживает автоматическую географическую отработку отказа, но вы можете добиться геоизбыточности, развернув идентичные задания Stream Analytics в нескольких регионах Azure. Каждое задание подключается к локальным входным и локальным источникам вывода. Ваше приложение обязано передавать входные данные в два региональных входа и выверять между двумя региональными выходами. Stream Analytics задания — две отдельные сущности.

На следующей схеме показан пример развертывания задания геоизбыточного Stream Analytics с входными данными концентратора событий и выходными данными базы данных Azure.

:::image type="content" source="media/geo-redundancy/geo-redundant-jobs.png" alt-text="Схема заданий геоизбыточной аналитики Stream Analytics":::

## <a name="primarysecondary-strategy"></a>Первичная или вторичная стратегия

Вашему приложению необходимо управлять, какая выходная база данных региона считается первичной и считается вторичной. В случае сбоя основного региона приложение переключается на базу данных-получатель и начинает считывать обновления из этой базы данных. Фактический механизм, позволяющий свести к минимуму количество операций чтения, зависит от приложения.Этот процесс можно упростить, записав дополнительные сведения в выходные данные. Например, можно добавить метку времени или идентификатор последовательности к каждому выходу, чтобы пропускать дублирующиеся строки для выполнения тривиальных операций. После восстановления основного региона он перехватывает базу данных-получатель с помощью аналогичного механизма.

Хотя различные типы входных и выходных данных допускают различные варианты георепликации, рекомендуется использовать шаблон, описанный в этой статье, для обеспечения геоизбыточности, поскольку он обеспечивает гибкость и управление для поставщиков событий и потребителей событий.

## <a name="next-steps"></a>Следующие шаги

* [Мониторинг заданий Azure Stream Analytics и управление ими с помощью PowerShell](stream-analytics-monitor-and-manage-jobs-use-powershell.md)
* [Отладка на основе данных в Azure Stream Analytics](stream-analytics-job-diagram-with-metrics.md)