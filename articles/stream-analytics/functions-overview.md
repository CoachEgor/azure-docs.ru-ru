---
title: Функции, определяемые пользователями в аналитике потоков Azure
description: Данная статья представляет собой обзор функций, определяемых пользователями в Azure Stream Analytics.
author: mamccrea
ms.author: mamccrea
ms.service: stream-analytics
ms.topic: conceptual
ms.date: 04/07/2020
ms.openlocfilehash: b29d66e8bb213fbbb162c3249f022e0783f9f62f
ms.sourcegitcommit: fb23286d4769442631079c7ed5da1ed14afdd5fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/10/2020
ms.locfileid: "81115590"
---
# <a name="user-defined-functions-in-azure-stream-analytics"></a>Функции, определяемые пользователями в аналитике потоков Azure

Язык запросов, подобный S'L, в Azure Stream Analytics упрощает реализацию логики аналитики в реальном времени на потоковых данных. Stream Analytics обеспечивает дополнительную гибкость благодаря пользовательским функциям, которые вызываются в запросе. Следующим примером кода является `sampleFunction` UDF, который принимает один параметр, каждую запись ввода, `sampleResult`которую получает задание, и результат записывается в вывод как .

```sql
SELECT 
    UDF.sampleFunction(InputStream) AS sampleResult 
INTO 
    output 
FROM 
    InputStream 
```

## <a name="types-of-functions"></a>Типы функций

Azure Stream Analytics поддерживает следующие четыре типа функций: 

* Определяемые пользователем функции JavaScript 
* Пользовательские статистические выражения JavaScript 
* Функции, определяемые пользователем на СИ (с помощью Visual Studio) 
* Машинное обучение Azure 

Эти функции можно использовать для таких сценариев, как скоринг в реальном времени с помощью моделей машинного обучения, манипуляции строками, сложные математические вычисления, кодирование и декодирование данных. 

## <a name="limitations"></a>Ограничения

Функции, определяемые пользователем, являются безапатиями, а значение возврата может быть только масштабным значением. Вы не можете вызвать внешние конечные точки REST из этих функций, определяемых пользователем, так как это, скорее всего, повлияет на производительность вашей работы. 

Azure Stream Analytics не ведет учет всех вызовов функций и результатов возврата. Чтобы гарантировать повторяемость - например, повторное запуск вашей работы со старой `Date.GetData()` метки времени дает те же результаты снова - не использовать такие функции, как или, `Math.random()`как эти функции не возвращают тот же результат для каждого вызова.  

## <a name="diagnostic-logs"></a>Журналы диагностики

Любые ошибки выполнения считаются фатальными и всплывают через журналы активности и диагностики. Рекомендуется, чтобы функция обрабатывала все исключения и ошибки и возвращала действительный результат в ваш запрос. Это предотвратит вашу работу от идти к [несправляемому положению.](job-states.md)  


## <a name="next-steps"></a>Дальнейшие действия

* [Определяемые пользователем функции JavaScript в Azure Stream Analytics](stream-analytics-javascript-user-defined-functions.md)
* [Агрегаты, определяемые пользователями Azure Stream Analytics JavaScript](stream-analytics-javascript-user-defined-aggregates.md)
* [Разработка функций, определяемых пользователями .NET Standard для заданий Azure Stream Analytics](stream-analytics-edge-csharp-udf-methods.md)
* [Интеграция аналитики потоков Azure с помощью машинного обучения Azure](machine-learning-udf.md)

