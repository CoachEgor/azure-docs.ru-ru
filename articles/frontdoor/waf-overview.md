---
title: Что такое брандмауэр Azure веб-приложения для входной двери Azure? (предварительная версия)
description: Узнайте как Azure брандмауэр веб-приложения для службы двери Azure защищает веб-приложений от атак злоумышленников.
services: frontdoor
documentationcenter: ''
author: KumudD
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/02/2019
ms.author: kumud;tyao
ms.openlocfilehash: 17cf6629aca6c73bc96e4cf0c172a2e87a7aafb8
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61459358"
---
# <a name="what-is-azure-web-application-firewall-for-azure-front-door-preview"></a>Что такое брандмауэр Azure веб-приложения для входной двери Azure? (предварительная версия)

Брандмауэр Azure веб-приложения (WAF) (Предварительная версия) предоставляет централизованную защиту веб-приложений, которые предоставляются глобально с помощью Azure входной двери. Он разработан и эксплуатироваться защищать веб-служб от распространенных эксплойтов и уязвимостей, а также защиту службы высокой доступности для ваших пользователей, помимо соблюдения нормативных требований.

> [!IMPORTANT]
> Azure брандмауэр веб-приложения (WAF) для входной двери Azure в настоящее время находится в общедоступной предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендуется для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Веб-приложений часто направлены вредоносные атаки, например отказ службы наводнения, атаки путем внедрения кода SQL и атак с использованием межузловых сценариев. Эти вредоносных атак может привести к потере данных и сбоя службы, значительные угрозу владельцам веб-приложений.

Предотвращение таких атак в коде приложения может быть сложной задачей, требующей неукоснительного обслуживания, установки исправлений и мониторинга на различных уровнях топологии приложения. Централизованный брандмауэр веб-приложения значительно упрощает управление безопасностью и помогает администраторам защищать приложение от угроз вторжения. Кроме того решение WAF может реагировать на угрозы безопасности быстрее по установке исправлений известных уязвимостей в центральном расположении, а не защитой каждого отдельного веб-приложения.

WAF для входной двери — это глобальный, так и централизованное решение. Он развертывается в сети Azure граничных расположениях по всему миру и каждого входящего запроса для веб-приложения включенным WAF, доставленных двери проверяется на границе сети. Это позволяет WAF для предотвращения атак злоумышленников, близкое к источникам атаки, прежде чем попасть в виртуальной сети, а также предлагает глобальной защиты в нужном масштабе без ущерба для производительности. Можно легко связать политику WAF любому профилю двери в вашей подписке, и новые правила могут развертываться в течение минут, что позволяет быстро реагировать на изменяющиеся шаблоны угроз.

![Брандмауэр Azure веб-приложения](./media/waf-overview/web-application-firewall-overview.png)

Также можно включить с помощью шлюза приложений Azure WAF. Дополнительные сведения см. в разделе [брандмауэр веб-приложения](../application-gateway/waf-overview.md).

## <a name="waf-policy-and-rules"></a>WAF политики и правил

Можно настроить политику WAF и связать политики, чтобы один или несколько двери внешних интерфейсов для защиты. Политика WAF состоит из двух типов правил безопасности:
- Настраиваемые правила, созданные пользователем клиента.
- наборы правил для управляемого кода, которые представляют собой коллекцию управляемых Azure предварительно настроенный набор правил. Если они присутствуют, настраиваемые правила выполняются перед выполнением правил в наборе правил для управляемого кода. Правило состоит из условия соответствия, приоритет и действие. Поддерживает следующие типы действий:: Разрешить, блок, ЖУРНАЛА и ПЕРЕНАПРАВЛЕНИЯ. Можно создать полностью настраиваемого политику, которая соответствует вашим требованиям защиты конкретного приложения, объединяя управляемых и настраиваемых правил.

Правила в рамках политики, выполняются в порядке приоритета, где приоритет — уникальное целое число, которое определяет порядок выполнения правил. Меньше целочисленное значение обозначает более высокий приоритет, и те, проверяются перед правилами с более высоким значением целое число. После сопоставляется правило, соответствующее действие, которая была определена в правиле применяется к запросу. После обработки такого сопоставления правил с более низким приоритетом дальнейшей не обрабатываются.

Веб-приложения, предоставленные двери может иметь только одну политику WAF, связанные с ним одновременно. Тем не менее может иметь конфигурацию двери без политикам WAF, связанные с ней. Если присутствует политику WAF, они реплицируются на все наши граничных расположениях, чтобы обеспечить согласованность в политиках безопасности по всему миру.

## <a name="waf-modes"></a>Режимы WAF

WAF политики можно настроить для запуска в двух режимов:

- **Режим обнаружения:** При запуске в режиме обнаружения, WAF выполняет только всех остальных действий, отличных от мониторов и записывает запрос и его из этих правил WAF журналы WAF. Вы можете включить ведение журнала диагностики для входной двери (Если вы используете портал, это можно сделать, выбрав **диагностики** на портале Azure).

- **Режим предотвращения:** При настройке для работы в режиме предотвращения WAF принимает указанное действие, если запрос соответствует правилу, и если соответствие найдено, вычисляются все остальные правила с более низким приоритетом. Любые соответствующие запросы также записываются в журналы WAF.

## <a name="waf-actions"></a>Действия WAF

WAF клиенты могут выбрать для выполнения в одно из действий, если запрос удовлетворяет условиям правила:
- **Разрешить:**  Запрос проходит через брандмауэр веб-приложения и будут перенаправлены в серверной части. Дальнейшая ниже правила приоритета можно заблокировать запрос.
- **Блок:** Запрос заблокирован и WAF отправляет ответ клиенту, если Пересылка запроса на серверной стороне.
- **Журнал:**  Запрос записывается в журналы WAF и WAF продолжает вычислять ниже приоритет правила.
- **Перенаправления:** WAF перенаправляет запрос на указанный URI. URI, указанный — это параметр уровня политики. После настройки все запросы, которые соответствуют **перенаправления** действие будет отправляться этот URI.


## <a name="waf-rules"></a>Правила WAF

Политика WAF может состоять из двух типов правил безопасности - настраиваемые правила, созданные пользователем клиента и управляемые наборы правил, управляемые Azure предварительно настроенный набор правил.

### <a name="custom-authored-rules"></a>Настраиваемые правила, созданные
Настраиваемые правила WAF можно настроить следующим образом:

- **И черный списки разрешенных IP-адресов:** Можно настроить пользовательские правила для управления доступом к веб-приложений на основе списка клиентских IP-адресов или диапазонов IP-адресов. Поддерживаются типы адресов IPv4 и IPv6. Этот список можно настроить так, чтобы блокировать или разрешать эти запросы, в которых исходный IP-адрес соответствует IP-адрес в списке.

- **Управление доступом географических на основе:** Можно настроить пользовательские правила для управления доступом к веб-приложений на основе кода страны, связанный с IP-адрес клиента.

- **Управление доступом на основе параметров HTTP.** Можно настроить пользовательские правила на основе строки, соответствующие параметры запроса HTTP/HTTPS, например строки запроса, args POST, URI запроса, заголовок запроса и тексте запроса.

- **Запросить управление доступом на основе метода:** Можно настроить пользовательские правила на основе метода запроса HTTP запроса, такой как GET, HEAD или PUT.

- **Ограничение размера:** Можно настроить пользовательские правила, исходя из длины определенные части запроса, например строку запроса, Uri, или текст запроса.

- **Правила ограничения частоты:** Правило управления скоростью позволяет ограничить аномально интенсивный трафик, поступающий с какого-либо IP-адреса клиента. Можно настроить пороговое значение на количество веб-запросов из IP-адрес клиента разрешены за период до минуты. Это отличается от IP-адрес на основе списка разрешенных и запрещенных пользовательских правило, в котором либо разрешает все или блоки, которые все запросов от IP-адрес клиента. Ограничение скорости могут сочетаться с дополнительные условия соответствия например параметры HTTP (S), которые соответствуют для детального скорость элемента управления.


### <a name="azure-managed-rule-sets"></a>Наборы правил, управляемая Azure

Наборы правил, управляемые Azure предоставляют простой способ развернуть защиту от общего набора угроз безопасности. Так как такие наборы правил, которые управляются Azure, при необходимости для защиты от новых атак подписей обновляются правила. В общедоступной предварительной версии управляемые Azure по умолчанию набором правил содержит правила для следующих категорий угроз:

- Межузловых сценариев
- Атаки на Java
- Включение локального файла
- Атаки путем внедрения кода PHP
- Удаленное выполнение команды
- Включение удаленных файлов
- Фиксация сеанса
- Защита от внедрения кода SQL.

Значение по умолчанию правило номер версии будет увеличиваться при добавлении новых подписей атаки в набор правил.
Набор правил по умолчанию включена по умолчанию в режиме обнаружения в ваших политиках WAF. Вы можете включить или отключить отдельные правила в набор по умолчанию правила в соответствии с требованиями приложения. Можно также задать определенные действия (Разрешить/блок/REDIRECT/LOG) для каждого правила. Действие по умолчанию — блок. Кроме того настраиваемые правила можно настроить в одну и ту же политику WAF, если вы хотите пропустить любой из предварительно настроенных правил в набор по умолчанию правило.
Настраиваемые правила всегда применяются до оценки правила в набор по умолчанию правило. Если запрос соответствует настраиваемое правило, соответствующее действие правило применяется и заблокированы или передать серверной части, без вызова все дополнительные пользовательские правила или правила в набор по умолчанию правила запроса. Кроме того вы можете удалить набор правил по умолчанию на основе политик WAF.


## <a name="configuration"></a>Параметр Configuration
На этапе общедоступной предварительной версии:
- Настройка и развертывание всех типов правил WAF, полностью поддерживаются с помощью интерфейсов REST API, шаблонов Azure Resource Manager и Azure PowerShell.
- С помощью портала Azure, можно настроить или просмотреть только управляемые Azure по умолчанию набором правил.

## <a name="monitoring"></a>Мониторинг

Мониторинг WAF во входной двери интегрируется с Azure Monitor для отслеживания предупреждений и легко отслеживать тенденции трафика.

## <a name="pricing"></a>Цены

На этапе общедоступной предварительной версии за использование, связанные с WAF для входной двери предоставляется бесплатно и не будет взиматься.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).

