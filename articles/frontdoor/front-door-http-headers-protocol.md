---
title: Поддержка протокола для заголовков HTTP в службе "Передняя дверь" Azure | Документация Майкрософт
description: В этой статье описываются протоколы HTTP-заголовка, поддерживаемые службой Front дверь.
services: frontdoor
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/10/2018
ms.author: sharadag
ms.openlocfilehash: 3579aee46c610e5bb3efc0942944bbfc3fcb801d
ms.sourcegitcommit: 76b48a22257a2244024f05eb9fe8aa6182daf7e2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "74790515"
---
# <a name="protocol-support-for-http-headers-in-azure-front-door-service"></a>Поддержка протокола для заголовков HTTP в службе "Передняя дверь" Azure
В этой статье описывается протокол, поддерживаемый службой Front дверь с частями пути вызова (см. изображение). В следующих разделах содержатся дополнительные сведения о заголовках HTTP, поддерживаемых службой Front дверь.

![Служба Azure Front Door — протокол HTTP-заголовков][1]

>[!IMPORTANT]
>Служба "Передняя дверца" не удостоверяет все заголовки HTTP, которые здесь не описаны.

## <a name="client-to-front-door-service"></a>Клиент — служба передней дверцы
Служба "Передняя дверь" принимает большинство заголовков из входящего запроса, не изменяя их. Некоторые зарезервированные заголовки удаляются из входящего запроса, если он отправлен, включая заголовки с префиксом X-демон-*.

## <a name="front-door-service-to-backend"></a>Служба Front дверь в серверную часть

Служба "Передняя дверь" включает заголовки входящего запроса, если они не удалены из-за ограничений. Передняя дверца также добавляет следующие заголовки:

| Заголовок  | Пример и описание |
| ------------- | ------------- |
| Via |  Via: 1,1 Azure </br> Передняя дверь добавляет версию HTTP клиента, а затем *Azure* в качестве значения для заголовка Via. Это указывает на версию HTTP клиента, а также на то, что первая дверца является промежуточным получателем для запроса между клиентом и серверной частью.  |
| X-Azure-ClientIP | X-Azure-ClientIP: 127.0.0.1 </br> Представляет IP-адрес клиента, связанный с обрабатываемым запросом. Например, запрос, поступающий от прокси-сервера, может добавить заголовок X-Forwardd-for, чтобы указать IP-адрес исходного вызывающего объекта. |
| X-Azure-Соккетип |  X-Azure-Соккетип: 127.0.0.1 </br> Представляет IP-адрес сокета, связанный с подключением TCP, из которого был получен текущий запрос. IP-адрес клиента запроса может не совпадать с IP-адресом сокета, так как он может быть произвольно перезаписан пользователем.|
| X — Azure-ref |  X-Azure-ref: 0zxV + XAAAAABKMMOjBv2NT4TY6SQVjC0zV1NURURHRTA2MTkANDM3YzgyY2QtMzYwYS00YTU0LTk0YzMtNWZmNzA3NjQ3Nzgz </br> Уникальная строка ссылки, идентифицирующая запрос, обслуживаемый передней дверцей. Он используется для поиска в журналах доступа и критически важных для устранения неполадок.|
| X-Azure-Рекуестчаин |  X-Azure-Рекуестчаин: прыжков = 1 </br> Заголовок, который используется интерфейсной дверцей для обнаружения циклов запросов, и пользователи не должны зависеть от него. |
| X-Forwarded-For | X-переслано — для: 127.0.0.1 </br> Поле заголовка HTTP X-Forwardd-for (КСФФ) часто определяет исходный IP-адрес клиента, подключающегося к веб-серверу через прокси-сервер HTTP или подсистему балансировки нагрузки. Если имеется существующий заголовок КСФФ, то передняя дверь добавляет к нему IP-адрес сокета клиента или добавляет заголовок КСФФ с IP-адресом сокета клиента. |
| X-Forwarded — узел | X-Forwarded — узел: contoso.azurefd.net </br> Поле заголовка HTTP X-Forwardd-Host НТТР является общим методом, используемым для обнаружения исходного узла, запрошенного клиентом в заголовке HTTP-запроса узла. Это связано с тем, что имя узла из передней дверцы может отличаться для внутреннего сервера, обрабатывающего запрос. |
| X-Forwarded-Proto | X-Forwarded-определяемое: http </br> Поле заголовка HTTP X-Forwarded-обозначать, как правило, используется для обнаружения исходного протокола HTTP-запроса, так как передняя дверца на основе конфигурации может взаимодействовать с серверной частью по протоколу HTTPS. Это справедливо, даже если запрос к обратным прокси-серверу имеет значение HTTP. |
| X-демон-HealthProbe | Поле заголовка HTTP X-демо-HealthProbe используется для определения пробы работоспособности из передней дверцы. Если для этого заголовка задано значение 1, то запрос является зондом работоспособности. Вы можете использовать, если вы хотите ограничивать доступ из передней дверцы конкретного с помощью поля заголовка X-Forwardd-Host. |

## <a name="front-door-service-to-client"></a>Служба Front двери для клиента

Все заголовки, отправленные в переднюю дверцу из серверной части, также передаются клиенту. Ниже приведены заголовки, отправляемые с передней дверцы клиентам.

| Заголовок  | Пример |
| ------------- | ------------- |
| X — Azure-ref |  *X-Azure-ref: 0zxV + XAAAAABKMMOjBv2NT4TY6SQVjC0zV1NURURHRTA2MTkANDM3YzgyY2QtMzYwYS00YTU0LTk0YzMtNWZmNzA3NjQ3Nzgz* </br> Это уникальная эталонная строка, которая идентифицирует запрос, обслуженный Front Door. Это важно для устранения неполадок, так как оно используется для поиска в журналах доступа.|

## <a name="next-steps"></a>Дальнейшие действия

- [Создание передней дверцы](quickstart-create-front-door.md)
- [Принцип работы передней дверцы](front-door-routing-architecture.md)

<!--Image references-->
[1]: ./media/front-door-http-headers-protocol/front-door-protocol-summary.png
