---
title: Служба Azure Front Door | Документация Майкрософт
description: В статье представлен обзор службы Azure Front Door. Узнайте, подходит ли она для балансировки нагрузки трафика пользователя для вашего приложения.
services: frontdoor
documentationcenter: ''
author: megan-beatty
editor: ''
ms.service: frontdoor
ms.devlang: na
ms.topic: overview
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 4/30/2020
ms.author: mebeatty
ms.openlocfilehash: 19deb763c8e750490854892c90d0293d3e209c09
ms.sourcegitcommit: eaec2e7482fc05f0cac8597665bfceb94f7e390f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "82515799"
---
# <a name="what-is-rules-engine-for-azure-front-door"></a>Что такое обработчик правил для Azure Front Door? 

Обработчик правил позволяет настроить обработку HTTP-запросов в пограничной среде, а также обеспечивает более полный контроль над поведением веб-приложения. Обработчик правил для Azure Front Door включает несколько ключевых функций, в том числе:

- Маршрутизация на основе заголовков. Маршрутизация запросов, основанных на шаблонах содержимого заголовков запросов, файлов cookie и строк запросов.
- Маршрутизация на основе параметров. Используйте последовательность условий соответствия, включая аргументы POST, строки запросов, файлы cookie и методы запросов для маршрутизации запросов на основе параметров HTTP-запроса. 
- Переопределения конфигураций маршрутов: 
    - Используйте возможности перенаправления для возврата перенаправлений 301/302/307/308 клиенту, чтобы перенаправить их на новые имена узлов, пути и протоколы. 
    - Используйте возможности перенаправления для перезаписи пути URL-адреса запроса без выполнения традиционного перенаправления и пересылки запроса в соответствующую серверную часть в настроенном внутреннем пуле. 
    - Настройте конфигурацию кэширования и динамически измените маршрут перенаправления на маршрут кэширования на основе условий соответствия. 

> [!IMPORTANT]
> Эта общедоступная предварительная версия предоставляется без соглашения об уровне обслуживания и не должна использоваться для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться, иметь ограничения и быть доступными не во всех расположениях Azure. См. [дополнительные условия использования для предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).
>

## <a name="architecture"></a>Architecture 

Обработчик правил обрабатывает запросы в пограничной среде. После настройки обработчика правил, когда запрос достигает конечной точки Front Door, сначала будет запущен WAF, за которым следует конфигурация обработчика правил, связанная с интерфейсом или доменом. Если выполняется конфигурация обработчика правил, то родительское правило маршрутизации уже совпадает. Выполнение действий в каждом из правил конфигурации обработчика правил зависит от того, удовлетворяются ли условия соответствия в этом правиле. Если запрос не соответствует ни одному из условий в конфигурации подсистемы правил, выполняется правило маршрутизации по умолчанию. 

Например, в приведенной ниже конфигурации обработчик правил настраивается для добавления заголовка ответа, который изменяет максимальный возраст элемента управления кэшем, если условие соответствия выполняется. 

![действие заголовка ответа](./media/front-door-rules-engine/rules-engine-architecture-3.png)

В другом примере мы видим, что обработчик правил настроен на отправку пользователю мобильной версии сайта, если условие соответствия, тип устройства, имеет значение true. 

![переопределение конфигурации маршрута](./media/front-door-rules-engine/rules-engine-architecture-1.png)

В обоих примерах, когда ни одно из условий соответствия не соблюдается, указанное правило маршрута будет выполняться. 

## <a name="terminology"></a>Терминология 

С помощью обработчика правил AFD можно создать ряд конфигураций обработчика правил, каждая из которых состоит из набора правил. Ниже приведена полезная терминология, которую вы будете использовать при настройке обработчика правил. 

- *Конфигурации обработчика правил*. Набор правил, применяемых к одному правилу маршрутизации. Каждая конфигурация ограничена 5 правилами. Вы можете создать до 10 конфигураций. 
- *Правило обработчика правил*. Правило, состоящее из не более 10 условий соответствия и 5 действий.
- *Условие соответствия* Существует множество условий соответствия, которые можно использовать для анализа входящих запросов. Правило может содержать до 10 условий соответствия. Условия соответствия оцениваются с помощью оператора **AND**. Полный список условий соответствия можно найти [здесь](front-door-rules-engine-match-conditions.md). 
- *Action* (Действие). Действия определяют, что происходит с вашими входящими запросами. Действия в заголовке запроса или ответа, переадресация, перенаправление и перезапись доступны уже сегодня. Правило может содержать до 5 действий. Однако правило может содержать только 1 переопределение конфигурации маршрутов.  Полный список действий можно найти [здесь](front-door-rules-engine-actions.md).


## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как настроить первую [конфигурацию обработчика правил](front-door-tutorial-rules-engine.md). 
- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
