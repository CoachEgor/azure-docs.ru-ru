---
title: Краткое руководство. Создание профиля Front Door для обеспечения высокого уровня доступности приложений
description: В этом кратком руководстве описывается создание профиля Front Door для глобального веб-приложения, обеспечивающего высокий уровень доступности и производительности.
services: front-door
documentationcenter: ''
author: sharad4u
editor: ''
ms.assetid: ''
ms.service: frontdoor
ms.devlang: na
ms.topic: quickstart
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/31/2018
ms.author: sharadag
ms.openlocfilehash: 2b44c0cdbe2d955efe20a5f9473a29bc9f500a07
ms.sourcegitcommit: b0ff9c9d760a0426fd1226b909ab943e13ade330
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2020
ms.locfileid: "80521451"
---
# <a name="quickstart-create-a-front-door-for-a-highly-available-global-web-application"></a>Краткое руководство. Создание службы Front Door для глобального веб-приложения высокого уровня доступности

В этом кратком руководстве показано, как создать профиль Front Door, который обеспечивает высокий уровень доступности и производительности глобального веб-приложения. 

Описанный здесь сценарий охватывает два экземпляра веб-приложения, выполняющиеся в разных регионах Azure. Создается конфигурация Front Door на основании [внутренних серверов с одинаковыми весами и приоритетами](front-door-routing-methods.md), что помогает направлять трафик пользователей в ближайший набор внутренних серверов сайта, на котором выполняется приложение. Front Door постоянно отслеживает веб-приложение и обеспечивает автоматическую отработку отказа на следующий доступный внутренний сервер, когда ближайший сайт становится недоступным.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

## <a name="sign-in-to-azure"></a>Вход в Azure 
Войдите на портал Azure по адресу https://portal.azure.com.

## <a name="prerequisites"></a>Предварительные требования
Для этого краткого руководства необходимо развернуть два экземпляра веб-приложения, выполняющиеся в разных регионах Azure (*восточная часть США* и *Западная Европа*). Оба экземпляра веб-приложения выполняются в режиме "активный — активный". Это значит, что любой из них может принимать трафик в любой момент, в отличие от конфигурации "активный — резервный", в которой один экземпляр используется как резервный для отработки отказа.

1. В верхней левой части экрана выберите **Создать ресурс** > **Интернет** > **Веб-приложение**.
2. В колонке **Веб-приложение** введите или выберите следующие сведения и введите параметры по умолчанию там, где они отсутствуют.

     | Параметр         | Значение     |
     | ---              | ---  |
     | Группа ресурсов          | Выберите **Создать**, а затем введите *myResourceGroupFD1*. |
     | Имя           | Введите уникальное имя для вашего веб-приложения.  |
     | Стек среды выполнения          | Выберите стек среды выполнения для приложения |
     |      Регион  |   западная часть США        |
     | Расположение или план службы приложений         | Нажмите кнопку **Создать**.  В поле "План службы приложений" введите *myAppServicePlanEastUS*, а затем выберите **ОК**.| 
     |Номер SKU и размер  | Поочередно выберите **Изменить размер**, **Standard S1 100 total ACU, 1.75 GB memory** ("Стандартный" S1, общее число ACU — 100, 1,75 ГБ памяти) |
     
3. Выберите **Review + Create** (Просмотреть и создать).
4. Проверьте сводные данные для веб-приложения. Нажмите кнопку **создания**.
5. При успешном развертывании веб-приложения веб-сайт по умолчанию будет создан приблизительно через 5 минут.
6. Повторите шаги 1–3, чтобы создать второй веб-сайт в другом регионе Azure со следующими параметрами:

     | Параметр         | Значение     |
     | ---              | ---  |
     | Группа ресурсов          | Выберите **Создать**, а затем введите *myResourceGroupFD2*. |
     | Имя           | Введите уникальное имя для вашего веб-приложения.  |
     | Стек среды выполнения          | Выберите стек среды выполнения для приложения |
     |      Регион  |   Западная Европа      |
     | Расположение или план службы приложений         | Нажмите кнопку **Создать**.  В поле "План службы приложений" введите *myAppServicePlanWestEurope*, а затем выберите **ОК**.|   
     |Номер SKU и размер  | Поочередно выберите **Изменить размер**, **Standard S1 100 total ACU, 1.75 GB memory** ("Стандартный" S1, общее число ACU — 100, 1,75 ГБ памяти) |
    
## <a name="create-a-front-door-for-your-application"></a>Создание профиля Front Door для приложения
### <a name="a-add-a-frontend-host-for-front-door"></a>A. Добавление интерфейсного узла для Front Door
Создайте конфигурацию Front Door, которая направляет трафик пользователя в соответствии с минимальной задержкой между двумя внутренними серверами.

1. Вверху слева последовательно выберите **Создать ресурс** > **Сети** > **Front Door**.
2. В колонке **Создать Front Door** введите или выберите следующие сведения и введите параметры по умолчанию там, где они отсутствуют.

     | Параметр         | Значение     |
     | ---              | ---  |
     |Подписка  | Выберите подписку, в которой нужно создать Front Door.|
     | Группа ресурсов          | Выберите **Создать**, а затем введите *myResourceGroupFD0*. |
     | Расположение группы ресурсов  |   Центральная часть США        |
     
     > [!NOTE]
     > Для развертывания Front Door не нужно создавать новую группу ресурсов.  Достаточно выбрать уже существующую группу ресурсов.
     
3. Щелкните **Далее: Конфигурация**.
4. Щелкните значок "+" на карте интерфейсных серверов / доменов.  Для **имени узла** введите `<Your Initials>frontend`. Это имя узла должно быть глобально уникальным, служба Front Door сама проверит его.
5. Нажмите кнопку **Добавить**.

### <a name="b-add-application-backend-and-backend-pools"></a>Б. Добавление внутреннего сервера приложения и внутренних пулов

Далее необходимо сгруппировать интерфейсные серверы / домены приложения во внутренний пул, в котором Front Door будет обращаться к вашему приложению. 

1. Щелкните значок "+" на карте "Серверные пулы", чтобы добавить серверный пул для **имени** серверного пула, введите `myBackendPool`.
2. Затем щелкните **Добавление серверного компонента**, чтобы добавить веб-сайты, созданные ранее.
3. Выберите **Тип внутреннего узла** в качестве Службы приложений, подписку, в которой был создан веб-сайт, а затем выберите первый веб-сайт из раскрывающегося списка **Имя внутреннего узла**.
4. Оставьте остальные поля без изменений и нажмите кнопку **Добавить**.
5. Выберите **Тип внутреннего узла** в качестве Службы приложений, подписку, в которой был создан веб-сайт, а затем выберите **второй** веб-сайт в раскрывающемся списке **Имя внутреннего узла**.
6. Оставьте остальные поля без изменений и нажмите кнопку **Добавить**.
7. При необходимости вы можете изменить параметры проб работоспособности и балансировки нагрузки для внутреннего пула, но подойдут и значения по умолчанию. В любом случае щелкните **Добавить**


### <a name="c-add-a-routing-rule"></a>В. Добавление правила маршрутизации
1. Наконец, щелкните значок "+" на карте "Правила маршрутизации", чтобы настроить правила маршрутизации. Это необходимо, чтобы сопоставить интерфейсный узел с внутренним пулом. По сути это позволяет настроить пересылку запроса, поступившего на `myappfrontend.azurefd.net`, во внутренний пул `myBackendPool`. 
2. В качестве **имени** введите "LocationRule".
3. Щелкните **Добавить**, чтобы добавить правило маршрутизации для Front Door. 
4. Щелкните **Проверка и создание**.
5. Проверьте параметры для создания Front Door. Нажмите кнопку **Создать**.

>[!WARNING]
> Вы **должны** убедиться, что каждый из интерфейсных узлов в службе Front Door имеет правило маршрутизации со связанным с ним путем по умолчанию ("/\*"). То есть среди всех правил маршрутизации должно быть по крайней мере одно правило для каждого из узлов внешнего интерфейса, определенных в пути по умолчанию ("/\*"). В противном случае это может привести к неправильной маршрутизации трафика пользователя.

## <a name="view-front-door-in-action"></a>Проверка работы Front Door
После создания экземпляра Front Door может потребоваться несколько минут, чтобы конфигурация была развернута глобально. После завершения перейдите к созданному вами интерфейсному узлу. Для этого откройте веб-браузер и перейдите по URL-адресу `myappfrontend.azurefd.net`. Ваш запрос будет автоматически направлен с указанного внутреннего сервера во внутреннем пуле на ближайший к вам внутренний сервер. 

### <a name="view-front-door-handle-application-failover"></a>Проверка отработки отказа приложения службой Front Door
Если вы хотите проверить, как работает немедленная глобальная отработка отказа Front Door, вы можете перейти на один из созданных вами веб-сайтов и остановить его. В зависимости от параметров пробы работоспособности, определенных для внутреннего пула, будет мгновенно выполнена отработка отказа трафика на другой развернутый веб-сайт. Можно также проверить поведение службы, отключив внутренний сервер в конфигурации внутреннего пула для вашего экземпляра Front Door. 

## <a name="clean-up-resources"></a>Очистка ресурсов
Удалите группы ресурсов **myResourceGroupFD1**, **myResourceGroupFD2** и **myResourceGroupFD0**, если они больше не нужны.

## <a name="next-steps"></a>Дальнейшие действия
В этом кратком руководстве вы создали профиль Front Door, который позволяет перенаправлять трафик пользователей для веб-приложений, требующих высокого уровня доступности и максимальной производительности. Чтобы узнать больше о маршрутизации трафика, ознакомьтесь с [методами маршрутизации](front-door-routing-methods.md), используемыми в службе Front Door.
