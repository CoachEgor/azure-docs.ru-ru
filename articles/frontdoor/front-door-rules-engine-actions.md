---
title: Служба Azure Front Door | Документация Майкрософт
description: В статье представлен обзор службы Azure Front Door. Узнайте, подходит ли она для балансировки нагрузки трафика пользователя для вашего приложения.
services: frontdoor
documentationcenter: ''
author: megan-beatty
editor: ''
ms.service: frontdoor
ms.devlang: na
ms.topic: overview
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 4/30/2020
ms.author: mebeatty
ms.openlocfilehash: 3e7c9606a17736ea45b09a4d6981b4d55fa6dee6
ms.sourcegitcommit: eaec2e7482fc05f0cac8597665bfceb94f7e390f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "82515809"
---
# <a name="azure-front-door-rules-engine-actions"></a>Действия обработчика правил Azure Front Door

В [обработчике правил Azure Front Door (AFD)](front-door-rules-engine.md) правило состоит из одного или нескольких условий соответствия и действий. В этой статье подробно описаны действия, которые можно использовать в обработчике правил AFD.

Действие определяет поведение, применяемое к типу запроса, который соответствует одному или нескольким условиям соответствия. В обработчике правил AFD правило может содержать до пяти действий, только одно из которых может переопределять конфигурацию маршрута (переадресация или перенаправление). 

Следующие действия доступны для использования в обработчике правил Azure Front Door.  

## <a name="modify-request-header"></a>Изменение заголовка запроса

Это действие используется для изменения заголовков, которые включены в полученные вашим источником запросы.

### <a name="required-fields"></a>Обязательные поля

Действие | Имя заголовка HTTP | Значение
-------|------------------|------
Append | Если выбран этот параметр и запрос соответствует правилу, в запрос добавляется заголовок, указанный в поле **Имя заголовка**, с заданным значением. Если такой заголовок уже существует, новое значение добавляется к существующему. | Строка
Overwrite | Если выбран этот параметр и запрос соответствует правилу, в запрос добавляется заголовок, указанный в поле **Имя заголовка**, с заданным значением. Если такой заголовок уже существует, новое значение переопределяет существующее. | Строка
DELETE | Если выбран этот параметр, запрос соответствует правилу и в запросе присутствует указанный в правиле заголовок, этот заголовок удаляется из запроса. | Строка

## <a name="modify-response-header"></a>Изменение заголовка ответа

Это действие используется для изменения заголовков, которые включены в возвращаемые клиентам ответы.

### <a name="required-fields"></a>Обязательные поля

Действие | Имя заголовка HTTP | Значение
-------|------------------|------
Append | Если выбран этот параметр и запрос соответствует правилу, в ответ добавляется заголовок, указанный в поле **Имя заголовка**, с заданным **значением**. Если такой заголовок уже существует, новое **значение** добавляется к существующему. | Строка
Overwrite | Если выбран этот параметр и запрос соответствует правилу, в ответ добавляется заголовок, указанный в поле **Имя заголовка**, с заданным **значением**. Если такой заголовок уже существует, новое **значение** переопределяет существующее. | Строка
DELETE | Если выбран этот параметр, запрос соответствует правилу и в запросе присутствует указанный в правиле заголовок, этот заголовок удаляется из ответа. | Строка

## <a name="route-configuration-overrides"></a>Переопределение конфигурации маршрута 

### <a name="route-type-redirect"></a>Тип маршрута: перенаправление

Используйте это действие для перенаправления клиентов на новый URL-адрес. 

#### <a name="required-fields"></a>Обязательные поля

Поле | Описание 
------|------------
Тип перенаправления | Выберите тип ответа, который будет возвращаться запрашивающему: "Найдено (302)", "Перемещено (301)", "Временное перенаправление (307)" или "Постоянное перенаправление (308)".
Перенаправление протокола | Сопоставляется с запросом, HTTP, HTTPS.
Узел назначения | Выберите имя узла, на который будет перенаправлен запрос. Оставьте поле пустым, чтобы сохранить входящий узел.
Конечный путь | Определите путь для использования при перенаправлении. Оставьте поле пустым, чтобы сохранить входящий путь.  
Строка запроса | Определите строку запроса для использования при перенаправлении. Оставьте поле пустым, чтобы сохранить входящую строку запроса. 
Фрагмент места назначения | Определите фрагмент для использования при перенаправлении. Оставьте поле пустым, чтобы сохранить входящий фрагмент. 


### <a name="route-type-forward"></a>Тип маршрута: Вперед

Используйте это действие для переадресации клиентов на новый URL-адрес. Это действие также содержит поддействия для перезаписи и кэширования URL-адресов. 

Поле | Описание 
------|------------
Серверный пул | Выберите внутренний пул для переопределения и обслуживания запросов. Здесь будут указаны все внутренние пулы, настроенные в текущем профиле Front Door. 
Протокол переадресации | Сопоставляется с запросом, HTTP, HTTPS.
Переопределение URL-адреса | Используйте это действие, чтобы перезаписать путь в запросе, который поступает на ваш источник. Если этот параметр задан, должны присутствовать обязательные дополнительные поля, которые описаны ниже.
Caching | Enabled, Disabled. Если значение задано, используйте описанные ниже дополнительные поля. 

#### <a name="url-rewrite"></a>Переопределение URL-адреса

Этот параметр позволяет настроить дополнительный **пользовательский путь переадресации**, который будет применяться при создании запроса для переадресации на сервер.

Поле | Описание 
------|------------
Пользовательский путь переадресации | Определите путь для переадресации запросов. 

#### <a name="caching"></a>Caching

Используйте эти параметры, чтобы управлять кэшированием файлов для запросов, которые содержат строки запроса, и правилами кэширования содержимого на основе всех или выбранных параметров. Можно использовать дополнительные параметры, чтобы перезаписать значение срока жизни (TTL) и управлять тем, как долго содержимое хранится в кэше для запросов, соответствующих заданным в правиле условиям. Чтобы принудительно применить кэширование в качестве действия, задайте для поля кэширования значение "Вкл.". При этом появятся следующие дополнительные параметры: 

Поведение кэша |  Описание              
---------------|----------------
игнорировать строки запросов; | После кэширования ресурса для всех последующих запросов строка запроса будет игнорироваться, пока не истечет срок действия кэшированного ресурса.
кэшировать все уникальные URL-адреса. | Каждый запрос с уникальным URL-адресом, учитывая строку запроса, считается уникальным ресурсом с собственным кэшем.
Ignore specified query strings (Пропуск указанных строк запросов) | Строки запросов к тем URL-адресам, которые указаны в параметре "Параметры запроса", игнорируются при кэшировании.
Include specified query strings (Включение указанных строк запросов) | Строки запросов к тем URL-адресам, которые указаны в параметре "Параметры запроса", используются при кэшировании.

Дополнительные поля |  Описание 
------------------|---------------
Динамическое сжатие | Front Door может динамически сжимать содержимое на границе, что позволяет сократить размер ответов и ускорить их выдачу.
Параметры запроса | Разделенный запятыми список разрешенных (или запрещенных) параметров, который будет использоваться как основа для кэширования.
Длительность кэширования | Срок действия кэша, выраженный в днях, часах, минутах и секундах. Все значения должны быть целочисленными. 

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как настроить первую [конфигурацию обработчика правил](front-door-tutorial-rules-engine.md). 
- Подробнее об [условиях соответствия для обработчика правил](front-door-rules-engine-match-conditions.md).
- Дополнительные сведения об [обработчике правил Azure Front Door](front-door-rules-engine.md).
