---
title: На борту домена root or apex к существующей передней двери - портал Azure
description: Узнайте, как сесть на домен root or apex к существующему front Door с помощью портала Azure.
services: front-door
author: sharad4u
ms.service: frontdoor
ms.topic: article
ms.date: 5/21/2019
ms.author: sharadag
ms.openlocfilehash: bb1042e15d4366923174996388eeb2fb99aef429
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74184611"
---
# <a name="onboard-a-root-or-apex-domain-on-your-front-door"></a>На борту домена root или apex на передней двери
Azure Front Door использует записи CNAME для проверки владения доменом для начинения пользовательских доменов. Кроме того, Front Door не разоблачает IP-адрес, связанный с вашим профилем Front Door, и поэтому вы не можете сопоставить свой домен вершины с IP-адресом, если цель состоит в том, чтобы на борту его в Azure Front Door.

Протокол DNS предотвращает назначение записей CNAME на вершине зоны. Например, если ваш `contoso.com`домен; вы можете создать записи CNAME для; `somelabel.contoso.com` но вы не можете создать `contoso.com` CNAME для себя. Это ограничение создает проблему для владельцев приложений, у которых за Azure Front Door есть сбалансированные приложения с нагрузкой. Поскольку использование профиля Front Door требует создания записи CNAME, невозможно указать на профиль Front Door с вершины зоны.

Эта проблема решается с помощью псевдонимных записей в Azure DNS. В отличие от записей CNAME, записи псевдонимов создаются на вершине зоны, и владельцы приложений могут использовать его для того, чтобы указать запись вершины зоны на профиль Front Door, который имеет общедоступные конечные точки. Владельцы приложений указывают на тот же профиль Front Door, который используется для любого другого домена в их зоне DNS. Например, `contoso.com` `www.contoso.com` и может указать на тот же профиль передней двери. 

Отображение вершины или корневого домена в профиль Front Door в основном требует уплощения CNAME или погони DNS, который является механизмом, где в DNS-провайдере рекурсивно разрешает вход CNAME до тех пор, пока он не попадает на IP-адрес. Эта функциональность поддерживается Azure DNS для конечных точек Front Door. 

> [!NOTE]
> Есть и другие поставщики DNS, которые поддерживают уплощение CNAME или погоню за DNS, однако Azure Front Door рекомендует использовать Azure DNS для своих клиентов для размещения своих доменов.

Вы можете использовать портал Azure, чтобы на борт домена вершины на передней двери и включить HTTPS на нем, связав его с сертификатом для прекращения SSL. Домены Apex также называются корневыми или голыми доменами.

Вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создайте запись псевдонима, которая указывает на ваш профиль Front Door
> * Добавьте корневой домен в переднюю дверь
> * Настройка HTTPS на корневом домене

> [!NOTE]
> Этот учебник требует, чтобы у вас уже есть профиль Front Door создан. Обратитесь к другим учебникам, таким как [квикстарт: Создайте переднюю дверь](./quickstart-create-front-door.md) или [создайте переднюю дверь с помощью HTTPS перенаправления, чтобы](./front-door-how-to-redirect-https.md) начать работу.

## <a name="create-an-alias-record-for-zone-apex"></a>Создание абонейной записи для вершины зоны

1. Откройте конфигурацию **Azure DNS** для домена на борту.
2. Создайте или отсваивайте запись для вершины зоны.
3. Выберите **тип** записи в качестве _записи,_ а затем выберите _Да_ для **набора записей Alias.** **Тип псевдонима** должен быть установлен на _ресурс Azure._
4. Выберите подписку Azure, где размещается профиль Front Door, а затем выберите ресурс Front Door из выпадения **ресурсов Azure.**
5. Нажмите **OK,** чтобы отправить изменения.

    ![Прозвище запись для вершины зоны](./media/front-door-apex-domain/front-door-apex-alias-record.png)

6. Вышеупомянутый шаг создаст запись вершины зоны, указывающую на ваш ресурс Front Door, `afdverify.contosonews.com`а `afdverify.<name>.azurefd.net` также запись CNAME, отображающая 'afdverify' (пример - ), к которой будет использоваться для посадки домена на вашем профиле Front Door.

## <a name="onboard-the-custom-domain-on-your-front-door"></a>На борту пользовательского домена на передней двери

1. На вкладке дизайнера Front Door нажмите на значок ''' на разделе парадных хостов, чтобы добавить новый пользовательский домен.
2. Введите доменное имя root or apex `contosonews.com`в пользовательском поле имен хоста, например.
3. После проверки отображения CNAME от домена до передней двери нажмите кнопку **«Добавить,** чтобы добавить пользовательский домен.
4. Нажмите **Сохранить,** чтобы отправить изменения.

![Меню личных доменов](./media/front-door-apex-domain/front-door-onboard-apex-domain.png)

## <a name="enable-https-on-your-custom-domain"></a>Включить HTTPS в пользовательском домене

1. Нажмите на пользовательский домен, который был добавлен и под **разделом Пользовательский домен HTTPS**, изменить статус **включен.**
2. Выберите **тип управления сертификатом** _для «Использовать свой собственный сертификат»._

> [!WARNING]
> Тип управления сертификатами Front Door в настоящее время не поддерживается для доменов вершины или корней. Единственный вариант, доступный для включения HTTPS на вершине или корневом домене для Front Door, это использование собственного пользовательского SSL-сертификата, размещенного на Azure Key Vault.

3. Убедитесь, что у вас есть правильные разрешения для Front Door для доступа к ключу Vault, как отмечено в uI, прежде чем переходить к следующему шагу.
4. Выберите **учетную запись Key Vault** из текущей подписки, а затем выберите соответствующую **версию** **Secret** и Secret для отображения в нужном сертификате.
5. Нажмите на **обновление,** чтобы сохранить выбор, а затем нажмите **Сохранить**.
6. Нажмите **Refresh** через пару минут, а затем нажмите на пользовательский домен снова, чтобы увидеть ход подготовки сертификата. 

> [!WARNING]
> Убедитесь, что вы создали соответствующие правила реуктора для вашего домена вершины или добавили домен к существующим правилам разгрома.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).