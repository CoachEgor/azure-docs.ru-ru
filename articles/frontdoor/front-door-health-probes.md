---
title: Передняя дверь Azure - мониторинг здоровья бэкэнда (ru) Документы Майкрософт
description: Эта статья поможет вам понять, как Azure Front Door следит за работоспособностью ваших бэкэндов
services: frontdoor
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/10/2018
ms.author: sharadag
ms.openlocfilehash: e2e656c395f1a31c1f5ebbd46d5a18a046f854f7
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79471580"
---
# <a name="health-probes"></a>Пробы работоспособности

Для того, чтобы определить здоровье и близость каждого бэкэнда из данной среды Front Door, каждая среда Front Door периодически отправляет синтетический запрос HTTP/HTTPS каждому из ваших настроенных бэкэндов. Затем Front Door использует ответы этих проб, чтобы определить "лучшие" серверные части, на которые следует направлять реальные клиентские запросы. 

> [!WARNING]
> Так как Front Door имеет много периферийных сред во всем мире, объем запросов зонда здоровья на ваши бэкэнды может быть довольно высоким - от 25 запросов каждую минуту до 1200 запросов в минуту, в зависимости от частоты зонда работоспособности, настроенной. При частоте зонда по умолчанию 30 секунд, объем зонда на бэкэнде должен быть около 200 запросов в минуту.

## <a name="supported-protocols"></a>Поддерживаемые протоколы

Front Door поддерживает отправку проб по протоколу HTTP или HTTPS. Эти пробы отправляются через одни и те же TCP-порты, настроенные для маршрутизации клиентских запросов, и их невозможно переопределить.

## <a name="supported-http-methods-for-health-probes"></a>Поддерживаемые методы HTTP для зондов здоровья

Front Door поддерживает следующие методы HTTP для отправки зондов здоровья:

1. **ПОЛУЧИТЬ:** Метод GET означает получение любой информации (в виде сущности) идентифицируется Запросом-URI.
2. **РУКОВОДИТЕЛЬ:** Метод HEAD идентичен GET, за исключением того, что сервер не должен возвращать тело сообщения в ответ. Для новых профилей Front Door, по умолчанию, метод зонда устанавливается как HEAD.

> [!NOTE]
> Для снижения нагрузки и стоимости на бэкэндах, Front Door рекомендует использовать запросы HEAD для зондов здоровья.

## <a name="health-probe-responses"></a>Ответы проб работоспособности

| Ответы  | Описание | 
| ------------- | ------------- |
| Определение работоспособности  |  Код состояния "200 ОК" указывает, что серверная часть находится в работоспособном состоянии. Все остальные состояния будут считаться сбоем. Если по какой-либо причине (например, из-за сбоя сети) проба не получает допустимый ответом HTTP, это считается сбоем.|
| Измерение задержки  | Задержка — это физическое время, измеренное с момента отправки пробы до момента получения последнего байта ответа. Мы используем новое TCP-подключение для каждого запроса, поэтому измерение не искажается для серверных частей с существующими активными подключениями.  |

## <a name="how-front-door-determines-backend-health"></a>Как Front Door определяет работоспособность серверной части

Azure Front Door использует один и тот же трехступенчатый процесс, приведенный ниже во всех алгоритмах, для определения работоспособности.

1. Исключение отключенных серверных частей.

2. Исключение серверных частей с ошибками пробы работоспособности.
    * Этот можно сделать, просмотрев последние _n_ ответов проб работоспособности. Если по крайней мере _x_ указывают на работоспособное состояние, серверная часть считается работоспособной.

    * _n_ настраивается путем изменения свойства SampleSize в настройках балансировки нагрузки.

    * _x_ настроен путем изменения свойства SuccessfulSamplesRequired в настройках балансировки нагрузки.

3. Помимо набора работоспособных серверных частей во внутреннем пуле, Front Door дополнительно измеряет и обеспечивает задержку (время кругового пути) для каждой серверной части.


## <a name="complete-health-probe-failure"></a>Полный сбой пробы работоспособности

При сбое пробы работоспособности для каждой серверной части во внутреннем пуле Front Door считает их работоспособными и направляет трафик методом циклического распределения между ними.

Как только бэкэнд вернется в здоровое состояние, front Door возобновит нормальный алгоритм балансировки нагрузки.

## <a name="disabling-health-probes"></a>Отключение зондов для здоровья

Если у вас есть один бэкэнд в пуле бэкэнда, вы можете отключить зонды работоспособности, уменьшающие нагрузку на бэкэнд приложения. Даже если у вас есть несколько бэкэндов в пуле бэкэнда, но только один из них находится в включенном состоянии, вы можете отключить зонды работоспособности.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
