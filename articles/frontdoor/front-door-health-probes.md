---
title: Передняя дверца Azure — мониторинг работоспособности серверной части | Документация Майкрософт
description: Эта статья поможет вам понять, как передняя дверца Azure отслеживает работоспособность ваших серверов.
services: frontdoor
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/10/2018
ms.author: sharadag
ms.openlocfilehash: e2e656c395f1a31c1f5ebbd46d5a18a046f854f7
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "79471580"
---
# <a name="health-probes"></a>Пробы работоспособности

Чтобы определить работоспособность и близость каждой серверной части от заданной среды передней дверцы, каждая среда с передней дверцей периодически отправляет искусственный запрос HTTP/HTTPS каждому из настроенных серверов. Затем Front Door использует ответы этих проб, чтобы определить "лучшие" серверные части, на которые следует направлять реальные клиентские запросы. 

> [!WARNING]
> Так как у передней дверцы есть много пограничных сред, количество запросов проверки работоспособности в серверной части может быть довольно большим от 25 запросов в минуту до 1200 запросов в минуту в зависимости от настроенной частоты проверки работоспособности. При частоте проверки по умолчанию 30 секунд объем проверяемого тома на серверной стороне должен составлять примерно 200 запросов в минуту.

## <a name="supported-protocols"></a>Поддерживаемые протоколы

Front Door поддерживает отправку проб по протоколу HTTP или HTTPS. Эти пробы отправляются через одни и те же TCP-порты, настроенные для маршрутизации клиентских запросов, и их невозможно переопределить.

## <a name="supported-http-methods-for-health-probes"></a>Поддерживаемые методы HTTP для проб работоспособности

Передняя дверца поддерживает следующие методы HTTP для отправки проб работоспособности:

1. **Получить:** Метод GET означает извлечение любой информации (в форме сущности) с помощью URI запроса.
2. **Заголовок:** Метод HEAD идентичен ПОЛУЧЕНию, за исключением того, что сервер не должен возвращать текст сообщения в ответе. Для новых профилей передней дверцы по умолчанию выбран метод проверки HEAD.

> [!NOTE]
> Для более низкой нагрузки и снижения стоимости работы на серверной части первая дверца рекомендует использовать ГОЛОВные запросы для проб работоспособности.

## <a name="health-probe-responses"></a>Ответы проб работоспособности

| Ответы  | Описание: | 
| ------------- | ------------- |
| Определение работоспособности  |  Код состояния "200 ОК" указывает, что серверная часть находится в работоспособном состоянии. Все остальные состояния будут считаться сбоем. Если по какой-либо причине (например, из-за сбоя сети) проба не получает допустимый ответом HTTP, это считается сбоем.|
| Измерение задержки  | Задержка — это физическое время, измеренное с момента отправки пробы до момента получения последнего байта ответа. Мы используем новое TCP-подключение для каждого запроса, поэтому измерение не искажается для серверных частей с существующими активными подключениями.  |

## <a name="how-front-door-determines-backend-health"></a>Как Front Door определяет работоспособность серверной части

Для определения работоспособности Передняя дверца Azure использует для всех алгоритмов один и тот же процесс из трех этапов.

1. Исключение отключенных серверных частей.

2. Исключение серверных частей с ошибками пробы работоспособности.
    * Этот можно сделать, просмотрев последние _n_ ответов проб работоспособности. Если по крайней мере _x_ указывают на работоспособное состояние, серверная часть считается работоспособной.

    * _n_ настраивается путем изменения свойства SampleSize в параметрах балансировки нагрузки.

    * _x_ настраивается путем изменения свойства сукцессфулсамплесрекуиред в параметрах балансировки нагрузки.

3. Помимо набора работоспособных серверных частей во внутреннем пуле, Front Door дополнительно измеряет и обеспечивает задержку (время кругового пути) для каждой серверной части.


## <a name="complete-health-probe-failure"></a>Полный сбой пробы работоспособности

При сбое пробы работоспособности для каждой серверной части во внутреннем пуле Front Door считает их работоспособными и направляет трафик методом циклического распределения между ними.

После того как любая Серверная часть вернется в работоспособное состояние, она возобновит нормальную работу алгоритма балансировки нагрузки.

## <a name="disabling-health-probes"></a>Отключение проверок работоспособности

При наличии одной серверной части в серверном пуле можно отключить пробы работоспособности, уменьшая нагрузку на серверную часть приложения. Даже если в внутреннем пуле имеется несколько серверных компонентов, но только один из них находится в включенном состоянии, можно отключить зонды работоспособности.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
