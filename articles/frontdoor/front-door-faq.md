---
title: Служба "Передняя дверца Azure" — часто задаваемые вопросы о передней дверце | Документация Майкрософт
description: На этой странице приведены ответы на часто задаваемые вопросы о службе "Передняя дверца Azure".
services: frontdoor
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/08/2019
ms.author: sharadag
ms.openlocfilehash: 4001b3ed8d7a92d8a751486ab4fd3a097d032373
ms.sourcegitcommit: ec2b75b1fc667c4e893686dbd8e119e7c757333a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2019
ms.locfileid: "72809735"
---
# <a name="frequently-asked-questions-for-azure-front-door-service"></a>Часто задаваемые вопросы о службе "Передняя дверь" Azure

В этой статье содержатся ответы на часто задаваемые вопросы о функциях и функциях службы передней дверцы Azure. Если вы не нашли ответ на свой вопрос, свяжитесь с нами, используя следующие каналы (в порядке эскалации):

1. Раздел комментариев этой статьи.
2. [Служба передней дверцы Azure UserVoice](https://feedback.azure.com/forums/217313-networking?category_id=345025).
3. **Служба поддержки Майкрософт:** Чтобы создать новый запрос на поддержку, в портал Azure на вкладке **Справка** нажмите кнопку **Справка и поддержка** , а затем выберите **новый запрос в службу поддержки**.

## <a name="general"></a>Общие сведения

### <a name="what-is-azure-front-door-service"></a>Что такое Azure Front Door Service?

Служба "Передняя дверца Azure" — это сеть доставки приложений (ADN) как услуга, предлагающая различные возможности балансировки нагрузки уровня 7 для ваших приложений. Он обеспечивает динамическое ускорение сайтов (DSA) и глобальную балансировку нагрузки с отработкой отказа почти в реальном времени. Это высокодоступная и масштабируемая служба, полностью управляемая Azure.

### <a name="what-features-does-azure-front-door-service-support"></a>Какие функции поддерживает служба "Передняя дверь" Azure?

Служба "Передняя дверца Azure" поддерживает динамическое ускорение сайтов (DSA), разгрузку SSL и сквозной протокол SSL, брандмауэр веб-приложения, сходство сеансов на основе файлов cookie, маршрутизацию на основе URL-путей, бесплатные сертификаты и управление несколькими доменами и др. Полный список поддерживаемых функций см. в статье [Обзор службы "Передняя дверца Azure](front-door-overview.md)".

### <a name="what-is-the-difference-between-azure-front-door-service-and-azure-application-gateway"></a>В чем разница между службой "Передняя дверца Azure" и шлюзом приложений Azure?

Хотя как передняя дверь, так и шлюз приложений являются подсистемами балансировки нагрузки уровня 7 (HTTP/HTTPS), основное различие заключается в том, что передняя дверца — это глобальная служба, а шлюз приложений — Региональная служба. В то время как передняя дверца может распределять нагрузку между различными единицами масштабирования, кластерами и единицами отметок в разных регионах, шлюз приложений позволяет распределять нагрузку между виртуальными машинами и контейнерами и т. д. в пределах единицы масштабирования.

### <a name="when-should-we-deploy-an-application-gateway-behind-front-door"></a>Когда следует развертывать Шлюз приложений за пределами передней дверцы?

Основные сценарии, по которым следует использовать шлюз приложений за пределами передней дверцы:

- Передняя дверца может выполнять балансировку нагрузки на основе пути только на глобальном уровне, но если требуется балансировка нагрузки трафика еще дальше в пределах своей виртуальной сети (VNET), они должны использовать шлюз приложений.
- Так как передняя дверца не работает на уровне виртуальной машины или контейнера, она не может выполнить сток подключений. Однако Шлюз приложений позволяет выполнять сток подключений. 
- Используя шлюз приложений за АФД, можно достичь разгрузки 100% SSL и направить только HTTP-запросы в своей виртуальной сети (VNET).
- Интерфейсная дверца и шлюз приложений поддерживают сходство сеансов. Хотя Передняя дверца может направить последующий трафик из сеанса пользователя в тот же самый кластер или серверную часть в заданном регионе, шлюз приложений может направить привязать трафик на тот же сервер в пределах кластера.  

### <a name="can-we-deploy-azure-load-balancer-behind-front-door"></a>Можно ли развернуть Azure Load Balancer позади передней дверцы?

Для маршрутизации трафика службе "Передняя дверца Azure" требуется общедоступный виртуальный IP-адрес или открытое имя DNS. Развертывание Azure Load Balancer позади передней дверцы является распространенным вариантом использования.

### <a name="what-protocols-does-azure-front-door-service-support"></a>Какие протоколы поддерживает служба "Передняя дверца Azure"?

Служба "Передняя дверца Azure" поддерживает HTTP, HTTPS и HTTP/2.

### <a name="how-does-azure-front-door-service-support-http2"></a>Как служба Front дверь Azure поддерживает HTTP/2?

Поддержка протокола HTTP/2 доступна только для клиентов, подключающихся к службе передней дверцы Azure. Обмен данными с серверными интерфейсами во внутреннем пуле выполняется по протоколу HTTP/1.1. Поддержка HTTP/2 включена по умолчанию.

### <a name="what-resources-are-supported-today-as-part-of-backend-pool"></a>Какие ресурсы сейчас поддерживаются как часть серверного пула?

Внутренние пулы могут состоять из хранилища, веб-приложения, экземпляров Kubernetes или любого другого пользовательского имени узла, имеющего общедоступное подключение. Служба "Передняя дверца Azure" требует, чтобы серверная часть была определена либо через общедоступный IP-адрес, либо как общедоступное разрешение DNS-имени узла. Участники серверных пулов могут быть распределены между зонами, регионами или даже за пределами Azure, если они имеют общедоступное подключение.

### <a name="what-regions-is-the-service-available-in"></a>В каких регионах доступна служба?

Служба "Передняя дверца Azure" — это глобальная служба, которая не привязана к конкретному региону Azure. При создании передней дверцы необходимо указать только расположение группы ресурсов, где по сути указывается, где будут храниться метаданные для группы ресурсов. Сам ресурс «передняя дверь» создается как глобальный ресурс, а конфигурация развертывается глобально для всех POP (точек присутствия). 

### <a name="what-are-the-pop-locations-for-azure-front-door-service"></a>Что такое расположения POP для службы "Передняя дверца Azure"?

Служба "Передняя дверца Azure" имеет тот же список расположений POP (точек присутствия), что и Azure CDN от Майкрософт. Полный список точек подключения см. в [Azure CDN расположениях POP корпорации Майкрософт](https://docs.microsoft.com/azure/cdn/cdn-pop-locations).

### <a name="is-azure-front-door-service-a-dedicated-deployment-for-my-application-or-is-it-shared-across-customers"></a>Является ли служба "Передняя дверца Azure" выделенным развертыванием для моего приложения или общим для всех клиентов?

Служба "Передняя дверца Azure" — это глобально распределенная служба с несколькими клиентами. Таким образом, инфраструктура для передней дверцы является общей для всех ее клиентов. Однако, создавая профиль передней дверцы, вы определяете конкретную конфигурацию, необходимую для вашего приложения, и никакие изменения, вносимые в переднюю дверцу, не влияют на другие конфигурации передней дверцы.

### <a name="is-http-https-redirection-supported"></a>Поддерживается ли перенаправление протоколов HTTP -> HTTPS?

Да. На самом деле служба "Передняя дверца Azure" поддерживает перенаправление строк узла, пути и строки запроса, а также часть перенаправления URL-адресов. Дополнительные сведения о [перенаправлении URL-адресов](front-door-url-redirect.md). 

### <a name="in-what-order-are-routing-rules-processed"></a>В каком порядке обрабатываются правила маршрутизации?

Маршруты для передней дверцы не упорядочиваются, и выбирается конкретный маршрут на основе лучшего соответствия. Узнайте больше о [том, как передняя дверца сопоставляет запросы с правилом маршрутизации](front-door-route-matching.md).

### <a name="how-do-i-lock-down-the-access-to-my-backend-to-only-azure-front-door"></a>Разделы справки заблокировать доступ к моему серверу только к передней дверце Azure?

Чтобы заблокировать приложение для приема трафика только от конкретной передней дверцы, необходимо настроить списки ACL IP-адресов для серверной части, а затем ограничить набор допустимых значений для заголовка "X-Forwardd-Host", отправляемого передней дверце Azure. Эти действия описаны ниже.

- Настройте IP адресам для своей серверной части, чтобы принимать трафик из пространства внутреннего IP-адреса внутренней дверцы Azure и только служб инфраструктуры Azure. Мы работаем над интеграцией с [диапазонами IP-адресов и тегами службы Azure](https://www.microsoft.com/download/details.aspx?id=56519) , но теперь вы можете ссылаться на диапазоны IP-адресов, как показано ниже:
 
    - Внутреннее IP-пространство внутренней дверцы **IPv4** : `147.243.0.0/16`
    - Серверное пространство IP-адресов **IPv6** передней дверцы: `2a01:111:2050::/44`
    - [Основные службы инфраструктуры](https://docs.microsoft.com/azure/virtual-network/security-overview#azure-platform-considerations) Azure через ВИРТУАЛИЗИРОВАННЫЕ IP-адреса узлов: `168.63.129.16` и `169.254.169.254`

    > [!WARNING]
    > Внутреннее IP-пространство серверной двери может измениться позже, однако мы будем уверенным в том, что до этого произойдет интеграция с [диапазонами IP-адресов и тегами служб Azure](https://www.microsoft.com/download/details.aspx?id=56519). Мы рекомендуем подписываться на [диапазоны IP-адресов и теги службы Azure](https://www.microsoft.com/download/details.aspx?id=56519) для любых изменений или обновлений.

-   Фильтрация по значениям для входящего заголовка "**X-forwardd-Host**", отправленного передней дверцей. Единственными допустимыми значениями заголовка должны быть все узлы переднего плана, как определено в конфигурации передней дверцы. На самом деле, только имена узлов, от которых вы хотите принимать трафик, в этой конкретной серверной части.
    - Пример. Предположим, что у конфигурации передней дверцы есть следующие интерфейсные узлы: _`contoso.azurefd.net`_ (A), _`www.contoso.com`_ (B), _ (C) и _`notifications.contoso.com`_ (D). Предположим, что у вас есть две конечные оси X и Y. 
    - Серверная часть X должна принимать трафик только от имен узлов A и B. Серверная часть Y может принимать трафик от A, C и D.
    - Таким образом, в серверной части X следует принимать только трафик с заголовком "**X-forwardd-Host**", равным _`contoso.azurefd.net`_ или _`www.contoso.com`_ . Для всех остальных компонентов Серверная часть X должна отклонять трафик.
    - Аналогично, в серверной части Y следует принимать только трафик с заголовком «**X-forwardd-Host**», имеющим значение _`contoso.azurefd.net`_ , _`api.contoso.com`_ или _`notifications.contoso.com`_ . Все остальное, серверная часть Y должна отклонять трафик.

### <a name="can-the-anycast-ip-change-over-the-lifetime-of-my-front-door"></a>Может ли изменение IP-адреса неразрешенной рассылки в течение времени жизни своей передней дверцы?

IP-адрес недоступности переднего плана для передней дверцы обычно не изменяется и может оставаться статичным в течение времени существования передней дверцы. Однако гарантии для этого **не** существует. При этом не принимаются прямые зависимости от IP-адреса.

### <a name="does-azure-front-door-service-support-static-or-dedicated-ips"></a>Поддерживает ли служба "Передняя дверца Azure" статические или выделенные IP-адреса?

Нет. Сейчас служба "Передняя дверца Azure" не поддерживает статические или выделенные IP-адреса многоадресной рассылки. 

### <a name="does-azure-front-door-service-support-x-forwarded-for-headers"></a>Поддерживает ли служба "Передняя дверца Azure" x-forwardd-for Headers?

Да, служба "Передняя дверца Azure" поддерживает заголовки "X-forwardd-for", "X-Forwardd-Host" и "X-Forwarded-названия". Для перенаправления по оси X: Если заголовок уже существует, то передняя дверца добавляет к нему IP-адрес сокета клиента. В противном случае он добавляет заголовок с IP-адресом сокета клиента в качестве значения. Для узлов, пересылаемых по оси X и пересылаемых по оси x, значение переопределяется.

Дополнительные сведения о [заголовках HTTP, поддерживаемых интерфейсом передней дверцы](front-door-http-headers-protocol.md).  

### <a name="how-long-does-it-take-to-deploy-an-azure-front-door-service-does-my-front-door-still-work-when-being-updated"></a>Сколько времени займет развертывание службы "Передняя дверь" Azure? Все еще работает ли моя Передняя дверца при обновлении?

Для глобального развертывания новый процесс создания передней дверцы или обновления существующей передней дверцы занимает около 3 – 5 минут. Это означает, что в течение 3 – 5 минут конфигурация передней дверцы будет развернута на всех наших POP глобально.

Примечание. для глобального развертывания обновлений SSL-сертификатов требуется около 30 минут.

## <a name="configuration"></a>Настройка

### <a name="can-azure-front-door-load-balance-or-route-traffic-within-a-virtual-network"></a>Может ли балансировка нагрузки для передней дверцы Azure или маршрутизация трафика в виртуальной сети?

Для маршрутизации трафика в переднюю дверцу Azure (АФД) требуется общедоступный IP-адрес или публично разрешаемое DNS-имя. Таким образом, ответ не АФД напрямую не может маршрутизироваться в виртуальной сети, но с помощью шлюза приложений или Azure Load Balancer между решением этот сценарий будет разрешен.

### <a name="what-are-the-various-timeouts-and-limits-for-azure-front-door-service"></a>Каковы различные времена ожидания и ограничения для службы "Передняя дверца Azure"?

Ознакомьтесь с задокументированными [временами ожидания и ограничениями для службы "Передняя дверца Azure](https://docs.microsoft.com/azure/azure-subscription-service-limits#azure-front-door-service-limits)".

## <a name="performance"></a>Ориентированное на производительность

### <a name="how-does-azure-front-door-service-support-high-availability-and-scalability"></a>Как служба "Передняя дверца Azure" поддерживает высокий уровень доступности и масштабируемость?

Служба "Передняя дверца Azure" — это глобально распределенная многоклиентская платформа с большими объемами ресурсов, предназначенных для обеспечения масштабируемости вашего приложения. С самого края глобальной сети корпорации Майкрософт Передняя дверца предоставляет возможность глобальной балансировки нагрузки, позволяющую отработку отказа всего приложения или даже отдельных микрослужб в регионах или в разных облаках.

## <a name="ssl-configuration"></a>Настройка SSL

### <a name="what-tls-versions-are-supported-by-azure-front-door-service"></a>Какие версии TLS поддерживаются службой "Передняя дверца" Azure?

Все профили передней дверцы, созданные после сентября 2019, используют TLS 1,2 как минимум по умолчанию.

Передняя дверь поддерживает версии TLS 1,0, 1,1 и 1,2. TLS 1,3 пока не поддерживается.

### <a name="what-certificates-are-supported-on-azure-front-door-service"></a>Какие сертификаты поддерживаются в службе "Передняя дверца" Azure?

Чтобы включить протокол HTTPS для безопасной доставки содержимого в пользовательском домене передней дверцы, можно выбрать сертификат, который управляется службой "Передняя дверца", или используйте собственный сертификат.
Управляемый параметр Front дверь подготавливает стандартный SSL-сертификат через DigiCert и хранится в Key Vaultах на передней дверце. Если вы решили использовать собственный сертификат, то можете подключить сертификат из поддерживаемого центра сертификации, который может быть стандартным SSL, сертификатом расширенной проверки или даже сертификатом с подстановочными знаками. Самозаверяющие сертификаты не поддерживаются. Узнайте, [как включить протокол HTTPS для пользовательского домена](https://aka.ms/FrontDoorCustomDomainHTTPS).

### <a name="does-front-door-support-autorotation-of-certificates"></a>Поддерживает ли интерфейс Front дверь Автоповорот сертификатов?

Для параметра "управляемый сертификат для передней дверцы" сертификаты переворачиваются с помощью передней дверцы. Если вы используете управляемый сертификат на основе передней дверцы и видите, что срок действия сертификата составляет менее 60 дней, отправьте запрос в службу поддержки.
</br>Для пользовательского SSL-сертификата Автоповорот не поддерживается. Аналогично тому, как она была впервые настроена для данного личного домена, необходимо указать в Key Vault начальную дверь до нужной версии сертификата и убедиться, что у субъекта-службы для передней дверцы все еще есть доступ к Key Vault. Эта обновленная операция развертывания сертификата в режиме "Передняя дверца" является атомарной и не приводит к появлению каких-либо производственных последствий, если не было изменено имя субъекта или SAN для сертификата.

### <a name="what-are-the-current-cipher-suites-supported-by-azure-front-door-service"></a>Каковы текущие комплекты шифров, поддерживаемые службой "Передняя дверца" Azure?

Ниже приведены текущие комплекты шифров, поддерживаемые службой "Передняя дверца" Azure.

- TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
- TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
- TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
- TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
- TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
- TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
- TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
- TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
- TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
- TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
- TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
- TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
- TLS_RSA_WITH_AES_256_GCM_SHA384
- TLS_RSA_WITH_AES_128_GCM_SHA256
- TLS_RSA_WITH_AES_256_CBC_SHA256
- TLS_RSA_WITH_AES_128_CBC_SHA256
- TLS_RSA_WITH_AES_256_CBC_SHA
- TLS_RSA_WITH_AES_128_CBC_SHA

### <a name="does-azure-front-door-service-also-support-re-encryption-of-traffic-to-the-backend"></a>Поддерживает ли служба "Передняя дверца Azure" возможность повторного шифрования трафика на серверную часть?

Да, служба "Передняя дверца Azure" поддерживает разгрузку SSL и сквозной протокол SSL, который повторно шифрует трафик на серверную часть. На самом деле, поскольку подключения к серверной части происходят через общедоступный IP-адрес, рекомендуется настроить переднюю дверцу для использования протокола HTTPS в качестве протоколов переадресации.

### <a name="can-i-configure-ssl-policy-to-control-ssl-protocol-versions"></a>Можно ли настроить политику SSL для управления версиями протокола SSL?

Вы можете настроить минимальную версию TLS в передней дверце Azure с помощью [REST API Azure](https://docs.microsoft.com/rest/api/frontdoorservice/frontdoor/frontdoors/createorupdate#minimumtlsversion). В настоящее время можно выбрать от 1,0 до 1,2.

### <a name="can-i-configure-front-door-to-only-support-specific-cipher-suites"></a>Можно ли настроить переднюю дверцу для поддержки только определенных комплектов шифров?

Нет, Настройка передней дверцы для определенных комплектов шифров не поддерживается. 

## <a name="diagnostics-and-logging"></a>Диагностика и ведение журнала

### <a name="what-types-of-metrics-and-logs-are-available-with-azure-front-door-service"></a>Какие типы метрик и журналов доступны в службе "Передняя дверца Azure"?

Сведения о журналах и других возможностях диагностики см. в статье [мониторинг метрик и журналов для передней дверцы](front-door-diagnostics.md).

### <a name="what-is-the-retention-policy-on-the-diagnostics-logs"></a>Что такое политика хранения журналов диагностики?

Журналы диагностики находятся в учетных записях хранения клиентов, и клиенты могут задать политику хранения в зависимости от своих предпочтений. Журналы диагностики также можно отправить в концентратор событий или журналы Azure Monitor. Дополнительные сведения см. в статье [Диагностика службы "Передняя дверца Azure](front-door-diagnostics.md)".

### <a name="how-do-i-get-audit-logs-for-azure-front-door-service"></a>Разделы справки получить журналы аудита для службы "Передняя дверца Azure"?

Журналы аудита доступны для службы "Передняя дверца Azure". На портале щелкните **Журнал действий** в колонке меню передней дверцы, чтобы получить доступ к журналу аудита. 

### <a name="can-i-set-alerts-with-azure-front-door-service"></a>Можно ли настроить оповещения с помощью службы "Передняя дверь" Azure?

Да, служба "Передняя дверца Azure" не поддерживает оповещения. Оповещения настраиваются на основе метрик. 

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
