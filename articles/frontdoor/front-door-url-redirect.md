---
title: Передняя дверца Azure — перенаправление URL-адресов | Документация Майкрософт
description: Эта статья поможет вам понять, как передняя дверца Azure поддерживает перенаправление URL-адресов для своих маршрутов, если они настроены.
services: front-door
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/08/2019
ms.author: sharadag
ms.openlocfilehash: 5e3e44c4aee84fe9e2e21174a1d65fdf26b765a2
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "80295473"
---
# <a name="url-redirect"></a>Перенаправление URL-адреса
Для перенаправления трафика можно использовать переднюю дверцу Azure. Трафик можно перенаправлять на нескольких уровнях (протокол, имя узла, путь, строка запроса), а все функции можно настроить для отдельных микрослужб, так как перенаправление основано на пути. Это упрощает настройку приложения, оптимизирует использование ресурсов и обеспечивает поддержку новых сценариев перенаправления, включая перенаправление на основе пути и глобальное перенаправление.
</br>

![Перенаправление URL-адреса передней дверцы Azure][1]

## <a name="redirection-types"></a>Типы перенаправлений
Тип перенаправления задает код состояния ответа для клиентов, чтобы понять назначение перенаправления. Поддерживаются следующие типы перенаправления:

- **301 (перемещен навсегда)**: указывает, что целевому ресурсу был назначен новый постоянный URI, а все будущие ссылки на этот ресурс должны использовать один из заключенных в него URI. Используйте код состояния 301 для перенаправления HTTP в HTTPS. 
- **302 (найдено)**: указывает, что целевой ресурс временно находится в другом URI. Так как перенаправление может быть изменено в некоторых случаях, клиент должен продолжать использовать действующий URI запроса для будущих запросов.
- **307 (временное перенаправление)**: указывает, что целевой ресурс временно находится под другим URI, и агент пользователя не должен изменять метод запроса, если он выполняет автоматическое перенаправление на этот URI. Так как перенаправление может измениться со временем, клиент должен продолжать использовать исходный действующий URI запроса для будущих запросов.
- **308 (постоянное перенаправление)**: указывает, что целевому ресурсу был назначен новый постоянный URI, а все будущие ссылки на этот ресурс должны использовать один из заключенных в него URI. Клиенты, имеющие возможности редактирования ссылок, должны автоматически повторно связывать ссылки на действующий URI запроса с одной или несколькими новыми ссылками, отправленными сервером, где это возможно.

## <a name="redirection-protocol"></a>Протокол перенаправления
Можно задать протокол, который будет использоваться для перенаправления. Это позволяет использовать один из наиболее распространенных вариантов использования функции перенаправления, который заключается в задании перенаправления HTTP на HTTPS.

- **Только HTTPS**. Установите протокол только для протокола HTTPS, если хотите перенаправить трафик с HTTP на HTTPS. Передняя дверца Azure рекомендует всегда устанавливать перенаправление только по протоколу HTTPS.
- **Только HTTP**: перенаправляет входящий запрос на HTTP. Используйте это значение только в том случае, если необходимо обеспечить незашифрованный трафик HTTP.
- **Запрос соответствия**: этот параметр позволяет хранить протокол, используемый входящим запросом. Таким образом, HTTP-запрос остается в формате HTTP, а HTTPS-запрос — после перенаправления HTTPS.

## <a name="destination-host"></a>Конечный узел
В рамках настройки маршрутизации перенаправления можно также изменить имя узла или домен для запроса на перенаправление. Это поле можно задать, чтобы изменить имя узла в URL-адресе для перенаправления или иным образом сохранить имя узла из входящего запроса. Таким образом, с помощью этого поля можно перенаправить все запросы, отправленные в `https://www.contoso.com/*` `https://www.fabrikam.com/*` .

## <a name="destination-path"></a>Конечный путь
В случаях, когда необходимо заменить сегмент пути URL-адреса в рамках перенаправления, можно задать для этого поля новое значение пути. В противном случае можно сохранить значение пути как часть перенаправления. Таким образом, с помощью этого поля можно перенаправить все запросы, отправленные в `https://www.contoso.com/\*` `https://www.contoso.com/redirected-site` .

## <a name="query-string-parameters"></a>Параметры строки запроса
Можно также заменить параметры строки запроса в URL-адресе перенаправления. Чтобы заменить любую существующую строку запроса из URL-адреса входящего запроса, присвойте этому полю значение "заменить", а затем задайте соответствующее значения. В противном случае можно сохранить исходный набор строк запроса, задав для поля значение "preserve". Например, с помощью этого поля можно перенаправить весь трафик, отправленный `https://www.contoso.com/foo/bar` в `https://www.contoso.com/foo/bar?&utm_referrer=https%3A%2F%2Fwww.bing.com%2F` . 

## <a name="destination-fragment"></a>Целевой фрагмент
Фрагмент назначения — это часть URL-адреса после "#", обычно используемая браузерами для того, чтобы разместить конкретный раздел на странице. Это поле можно задать, чтобы добавить фрагмент в URL-адрес перенаправления.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).

<!--Image references-->
[1]: ./media/front-door-url-redirect/front-door-url-redirect.png