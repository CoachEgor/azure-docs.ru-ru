---
title: Серверных систем и серверных пулов в службе Azure двери | Документация Майкрософт
description: В этой статье описывается, какие серверных систем и серверных пулов на переднем плане, дверь конфигурации.
services: front-door
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/10/2018
ms.author: sharadag
ms.openlocfilehash: 543e237a4a8390a8ebf74d0eb2a1f4be41dcd911
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60193719"
---
# <a name="backends-and-backend-pools-in-azure-front-door-service"></a>Серверные системы и серверные пулы в службе Azure Front Door
Этой статье рассматриваются сведения о сопоставлении развертывание приложения с помощью службы Azure двери. Здесь также описываются различные термины в конфигурации передовой линии вокруг серверные части приложений.

## <a name="backends"></a>Серверные системы
Экземпляр развертывания приложения в регионе равно серверной части. Входной двери служба поддерживает Azure и серверных систем не Azure, поэтому области не ограничено только к регионам Azure. Кроме того это может быть локальный центр обработки данных или экземпляр приложения в другом облаке.

Входной двери службы внутренних серверов относятся к имени узла или общедоступный IP-адрес приложения, которая может обслуживать запросы клиентов. Серверные системы не следует путать с уровня базы данных, уровень хранилища и т. д. Серверные системы следует рассматривать как общедоступную конечную точку серверной части приложения. При добавлении в серверном пуле двери серверной части, необходимо добавить следующее:

- **Тип узла серверной части**. Тип ресурса, который вы хотите добавить. Входной двери служба поддерживает автообнаружения вашей внутренних серверов приложений из службы приложений, облачной службы или хранилища. Если требуется другой ресурс в Azure или даже сторонний серверной части, выберите **пользовательского хост-класса**.

    >[!IMPORTANT]
    >Во время настройки API-интерфейсы не проверяют ли недоступны из среды двери серверной части. Убедитесь, что входной двери можно связаться на внутреннем сервере.

- **Подписки и серверную часть имени узла**. Если вы не выбрали **пользовательского хост-класса** для типа узла серверной части, выберите серверную часть, выбрав соответствующую подписку и имя соответствующего узла серверной части в пользовательском Интерфейсе.

- **Заголовок узла серверной части**. Значение заголовка узла, отправляемое в серверную часть для каждого запроса. Дополнительные сведения см. в разделе [заголовок узла серверной части](#hostheader).

- **Приоритет**. Назначение приоритетов на разные серверы, если вы хотите использовать основной службы серверной части для всего трафика. Кроме того обеспечивать резервные копии, если недоступны или сбое основного или резервного копирования серверных систем. Дополнительные сведения см. в разделе [приоритет](front-door-routing-methods.md#priority).

- **Вес**. Назначьте вес на разные серверы для распределения трафика между набором серверных систем равномерно или согласно коэффициенты вес. Дополнительные сведения см. в разделе [весовые коэффициенты](front-door-routing-methods.md#weighted).

### <a name = "hostheader"></a>Заголовок узла серверной системы

Запросы, перенаправленные в серверную часть входной двери включать поле заголовка узла, серверная часть использует для получения целевого ресурса. Значение для этого поля обычно берется из URI серверной системы и содержит узел и порт.

Например, запроса, выполняемого для www\.contoso.com будет иметь заголовок www узла\.contoso.com. Если вы используете портал Azure для настройки серверной части, значение по умолчанию для этого поля является имя узла серверной части. Если на внутреннем сервере contoso-westus.azurewebsites.net, на портале Azure, заполняется автоматически значение заголовка узла серверной части будет contoso westus.azurewebsites.net. Тем не менее, при использовании шаблонов Azure Resource Manager или другого метода без явного указания в этом поле двери служба будет отправлять входящие имя узла как значение заголовка узла. Если запрос был сделан для www\.contoso.com, а также серверной части — contoso-westus.azurewebsites.net, который имеет пустой заголовок поле, входной двери службы будет задан заголовок узла как www\.contoso.com.

Большинство серверных частей приложений (веб-приложений Azure, хранилище BLOB-объектов и облачные службы) требуют заголовок узла для сопоставления домена серверной части. Тем не менее, внешний интерфейс узла, ведущий к серверной части будет использовать разные имени узла, например www\.contoso.azurefd.net.

Если для серверной части требуется заголовок узла, чтобы оно соответствовало имени узла серверной части, убедитесь, что заголовок узла серверной части включает в себя имя узла серверной части.

#### <a name="configuring-the-backend-host-header-for-the-backend"></a>Настройка заголовка узла серверной системы

Чтобы настроить **заголовок узла серверной части** для серверной части в разделе пула серверной части:

1. Откройте ресурс двери и выберите серверный пул с серверной частью для настройки.

2. Добавьте внутренний сервер, если вы этого еще не сделали, или измените существующую.

3. Задать поле заголовка узла серверной части пользовательское значение или оставьте поле пустым. Имя узла для входящего запроса будет использоваться как значение заголовка узла.

## <a name="backend-pools"></a>Серверные пулы
Внутренний пул на передней дверцы службы ссылается на набор внутренних серверов, получать аналогичные трафик для своих приложений. Другими словами это логическое группирование экземпляров приложения по всему миру, получать тот же трафик и ожидаемое поведение в ответ. Эти серверные решения развертываются в разных регионах или в одном регионе. Все серверные части могут находиться в активный/активный режим развертывания или что определяется как активный/пассивный конфигурации.

Внутренний пул определяет, оценке различных серверных систем через пробы работоспособности. Он также определяет, как происходит Балансировка нагрузки между ними.

### <a name="health-probes"></a>Пробы работоспособности.
Входной двери служба отправляет периодические запросы проверки HTTP/HTTPS для каждого из настроенных серверы. Запросов на проверку определить с учетом расположения и работоспособности для каждой серверной части, чтобы загрузить сбалансировать запросы конечных пользователей. Параметры проверки работоспособности для серверного пула определяют, каким образом мы опросить состояние работоспособности внутренних серверов приложений. Доступны следующие параметры для конфигурации балансировки нагрузки:

- **Путь**. URL-адрес, используемый для запросов на проверку для всех серверных систем в серверном пуле. Например, если одна из серверы contoso westus.azurewebsites.net и путь имеет значение /probe/test.aspx, затем сред службы двери, при условии, что протокол HTTP, будет отправлять запросы проверки работоспособности НТТР-\:/ / contoso-westus.azurewebsites.net/probe/test.aspx.

- **Протокол**. Определяет, следует ли отправлять запросы проверки состояния работоспособности из службы двери на серверы с протоколом HTTP или HTTPS.

- **Интервал (в секундах)**. Определяет частоту проверки работоспособности, серверы или интервалы, в которых каждый входной двери сред отправляет пробы.

    >[!NOTE]
    >Для перехода на другой ресурс быстрее установите интервал меньшее значение. Чем меньше значение, чем выше объем пробы работоспособности получить серверы. Например, если интервал имеет значение 30 секунд с 90 двери сред или выводит глобально, каждая серверная часть будет получать о 3 – 5 пробных запросов в секунду.

Дополнительные сведения см. в разделе [зонды работоспособности](front-door-health-probes.md).

### <a name="load-balancing-settings"></a>Параметры балансировки нагрузки
Параметры балансировки нагрузки для внутреннего пула определяют, каким образом мы оцениваем пробы работоспособности. Эти параметры определяют, если серверная часть считается хорошим или плохим. Они также проверяют как балансировки нагрузки трафика между различных серверных систем в серверном пуле. Доступны следующие параметры для конфигурации балансировки нагрузки:

- **Размер выборки**. Определяет, сколько образцы пробы работоспособности, нам нужно учесть для оценки работоспособности серверной части.

- **Размер выборки успешно**. Определяет размер выборки как упоминалось ранее, количество успешных выборок, необходимые для вызова внутренней службы работоспособности. Например предположим, интервал пробы работоспособности двери составляет 30 секунд, размер выборки равно 5 и успешно образец размер равен 3. Каждый раз, когда мы оценки работоспособности проверяет наличие на внутреннем сервере, мы рассмотрим последние пять выборок более чем 150 секунд (5 x 30). Для объявления серверной части как работоспособные необходимы по крайней мере три успешных проверок.

- **Задержка чувствительности (дополнительная задержка)**. Определяет, следует ли двери, чтобы отправить запрос в серверную часть в диапазоне чувствительности измерения задержки или пересылать запросы в ближайший серверную часть.

Дополнительные сведения см. в разделе [наименьшей задержкой на основе метода маршрутизации](front-door-routing-methods.md#latency).

## <a name="next-steps"></a>Дальнейшие действия

- [Создание профиля передовой линии](quickstart-create-front-door.md)
- [Как работает передовой линии](front-door-routing-architecture.md)