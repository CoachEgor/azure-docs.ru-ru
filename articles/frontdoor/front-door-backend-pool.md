---
title: Бэкэндс и бэкэнд бассейны в Azure Front Door Документы Майкрософт
description: В этой статье описывается, какие бэкэнды и пулы бэкэнда находятся в конфигурации Front Door.
services: front-door
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/10/2018
ms.author: sharadag
ms.openlocfilehash: 18b165d83bfa154348842542bd8323a40330aa2a
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80293466"
---
# <a name="backends-and-backend-pools-in-azure-front-door"></a>Бэкэндс и бэкэнд бассейны в Azure Front Door
В этой статье описаны концепции, как сопоставить развертывание приложения с помощью Azure Front Door. Он также объясняет различные термины в конфигурации Front Door вокруг бэкэндов приложения.

## <a name="backends"></a>Серверные системы
Бэкэнд равен экземпляру развертывания приложения в регионе. Front Door поддерживает как задней панели Azure, так и не-Azure, поэтому область ограничена не только областями Azure. Кроме того, это может быть ваш центр обработки данных или экземпляр приложения в другом облаке.

Бэкэнды Front Door относятся к имени хоста или общедоступному IP-адресаву приложения, которое может обслуживать запросы клиентов. Обратные эндеды не следует путать с уровнем базы данных, уровнем хранения данных и так далее. Бэкэнды следует рассматривать как публичную конечную точку бэкэнда приложения. При добавлении бэкэнда в бэкэнд-пул Front Door необходимо также добавить следующее:

- **Тип хоста бэкэнда**. Тип ресурса, который вы хотите добавить. Front Door поддерживает автоматическое обнаружение бэкэндов приложения из службы приложений, облачного сервиса или хранения. Если требуется другой ресурс в Azure или даже бэкэнд, не связанный с Azure, выберите **пользовательский хост.**

    >[!IMPORTANT]
    >Во время конфигурации AIS не проверяют, недоступен ли бэкэнд из сред Front Door. Убедитесь, что передняя дверь может достичь вашего бэкэнда.

- **Подписка и имя хоста Backend**. Если вы еще не выбрали **пользовательский хост** для типа бэкэнда, выберите бэкэнд, выбрав соответствующую подписку и соответствующее имя хоста бэкэнда в пользовательском пользовательском компьютере.

- **Бэкэнд хост заголовок**. Значение заголовка хоста, отправленное в бэкэнд для каждого запроса. Для получения дополнительной [Backend host header](#hostheader)информации см.

- **Приоритет**. Назначьте приоритеты различным бэкэндам, когда вы хотите использовать основной бэкэнд для всего трафика. Кроме того, предоставьте резервные данные, если основные или резервные резервные энда конторы недоступны. Для получения дополнительной информации [см.](front-door-routing-methods.md#priority)

- **Вес**. Присваивайте весы различным бэкэндам для распределения трафика по набору бэкэндов, либо равномерно, либо в соответствии с коэффициентами веса. Для получения дополнительной [информации см.](front-door-routing-methods.md#weighted)

### <a name="backend-host-header"></a><a name = "hostheader"></a>Заголовок backend host

Запросы, направляемые Front Door на бэкэнд, включают поле заголовка хоста, которое используется бэкэндом для получения целевого ресурса. Значение для этого поля обычно берется из URI серверной системы и содержит узел и порт.

Например, запрос, `www.contoso.com` сделанный для будет иметь хост-заголовок www.contoso.com. Если вы используете портал Azure для настройки бэкэнда, значение по умолчанию для этого поля — это имя хоста бэкэнда. Если бэкэнд contoso-westus.azurewebsites.net, на портале Azure автозаселенное значение для заголовка хоста бэкэнда будет contoso-westus.azurewebsites.net. Однако, если вы используете шаблоны Azure Resource Manager или другой метод без явного настройки этого поля, Front Door отправит входящий узел в качестве значения для заголовка узла. Если запрос был сделан\.для www contoso.com, и ваш бэкэнд contoso-westus.azurewebsites.net, который имеет пустое поле\.заголовка, Front Door установит заголовок хоста как www contoso.com.

Большинство бэкэндов приложений (Azure Web Apps, Blob storage и Облачные службы) требуют, чтобы заголовок узла соответствовал домену бэкэнда. Тем не менее, передний хост, что маршруты к бэкэндбудет будет использовать различные хост-имя, такие как www.contoso.net.

Если бэкэнд требует, чтобы заголовок хоста соответствовал названию хоста бэкэнда, убедитесь, что заголовок бэкэнда включает в себя бэкэнд-хост-

#### <a name="configuring-the-backend-host-header-for-the-backend"></a>Настройка заголовка узла серверной системы

Для настройки поля **заголовка бэкэнда** для бэкэнда в разделе пула бэкэнда:

1. Откройте ресурс Front Door и выберите пул бэкэнда с бэкэндом для настройки.

2. Добавьте бэкэнд, если вы этого не сделали, или отодвинете существующий.

3. Установите поле заголовка backend на пользовательское значение или оставьте его пустым. Имя хоста для входящего запроса будет использоваться в качестве значения заголовка хоста.

## <a name="backend-pools"></a>Бассейны бэкэнда
Бэкэнд бассейн в передней двери относится к набору бэкэндов, которые получают аналогичный трафик для своего приложения. Другими словами, это логическая группировка экземпляров вашего приложения по всему миру, которые получают один и тот же трафик и отвечают ожидаемым поведением. Эти бэкэнды развернуты в разных регионах или в пределах одного региона. Все бэкэнды могут находиться в режиме активного/активного развертывания или в конфигурации Active/Passive.

Пул бэкэнда определяет, как следует оценивать различные бэкэнды с помощью зондов здоровья. Он также определяет, как балансировка нагрузки происходит между ними.

### <a name="health-probes"></a>Пробы работоспособности
Front Door отправляет периодические запросы зонда HTTP/HTTPS на каждый из ваших настроенных бэкэндов. Запросы зонда определяют близость и работоспособность каждого бэкэнда для загрузки, чтобы сбалансировать ваши запросы конечного пользователя. Настройки зонда работоспособности для пула бэкэнда определяют, как мы опрашиваем состояние здоровья бэкэндов приложений. Следующие настройки доступны для конфигурации балансировки нагрузки:

- **Путь**: URL-адрес, используемый для запросов зонда для всех бэкэндов в пуле бэкэнда. Например, если один из ваших бэкэндов находится contoso-westus.azurewebsites.net и путь установлен на /probe/test.aspx, то среды Front Door,\:предполагая, что протокол установлен на HTTP, отправят запросы зонда работы на http//contoso-westus.azurewebsites.net/probe/test.aspx.

- **Протокол**: Определяет, следует ли отправлять запросы зонда работоспособности от Front Door к бэкэндам с помощью протокола HTTP или HTTPS.

- **Метод**:Метод HTTP, который будет использоваться для отправки зондов работоспособности. Варианты включают GET или HEAD (по умолчанию).
    > [!NOTE]
    > Для снижения нагрузки и стоимости на бэкэндах, Front Door рекомендует использовать запросы HEAD для зондов здоровья.

- **Интервал (секунды)**: Определяет частоту зондов здоровья к бэкэндам, или интервалы, в которых каждая из сред передней двери посылает зонд.

    >[!NOTE]
    >Для более быстрых неудач используй интервал на более низкое значение. Чем ниже значение, тем выше объем зонда здоровья, который получают ваши бэкэнды. Например, если интервал установлен до 30 секунд, скажем, 100 СОЗ Передней Двери во всем мире, каждый бэкэнд будет получать около 200 запросов зонда в минуту.

Для получения дополнительной [информации см.](front-door-health-probes.md)

### <a name="load-balancing-settings"></a>Настройки балансировки нагрузки
Параметры балансировки нагрузки для пула бэкэнда определяют, как мы оцениваем зонды работоспособности. Эти параметры определяют, является ли бэкэнд здоровым или нездоровым. Они также проверяют, как загрузить баланс трафика между различными бэкэндами в пуле бэкэнда. Следующие настройки доступны для конфигурации балансировки нагрузки:

- **Размер образца**. Определяет, сколько образцов зондов здоровья мы должны рассмотреть для оценки здоровья бэкэнда.

- **Успешный размер выборки**. Определяет размер выборки, как упоминалось ранее, количество успешных образцов, необходимых для вызова бэкэнда здоровым. Например, предположим, что интервал зонда работоспособности Передней двери составляет 30 секунд, размер выборки — 5, а успешный размер выборки — 3. Каждый раз, когда мы оцениваем зонды здоровья для вашего бэкэнда, мы смотрим на последние пять образцов в течение 150 секунд (5 х 30). По крайней мере три успешных зондов, необходимых для объявления бэкэнда здоровым.

- **Чувствительность к задержке (дополнительная задержка).** Определяет, хотите ли вы, чтобы Front Door отправил запрос на бэкэнды в пределах диапазона чувствительности измерения задержки или перенаправил запрос в ближайший бэкэнд.

Для получения дополнительной [Least latency based routing method](front-door-routing-methods.md#latency)информации см.

## <a name="next-steps"></a>Дальнейшие действия

- [Создание профиля Front Door](quickstart-create-front-door.md)
- [Как работает передняя дверь](front-door-routing-architecture.md)