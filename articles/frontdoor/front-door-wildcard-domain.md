---
title: Передняя дверь Azure - Поддержка доменов подстановочных знаков
description: Эта статья поможет вам понять, как Azure Front Door поддерживает отображение и управление доменами подстановочных знаков в списке пользовательских доменов
services: frontdoor
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/10/2020
ms.author: sharadag
ms.openlocfilehash: c568c9cc5c57098385cc7399459ec656cdbfc305
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79537444"
---
# <a name="wildcard-domains"></a>Домены Wildcard

Помимо доменов вершины и поддоменов, вы также можете сопоставить доменное имя подстановочных знаков в список передних хостов или пользовательских доменов вашего профиля Front Door. Наличие доменов подстановочных знаков в передней двери упрощает поведение трафика для нескольких поддоменов для API, приложения или веб-сайта из одного и того же правила трассировки без необходимости изменять конфигурацию, чтобы добавить и/или указать каждый поддомен отдельно. В качестве примера можно определить правила `customer1.contoso.com` `customer2.contoso.com`для `customerN.contoso.com` и того же правила наклона, добавив `*.contoso.com`домен подстановочного знака.

Некоторые из ключевых сценариев, которые решаются с поддержкой доменов подстановочных знаков, включают:

- Больше не нужно на борту каждого поддомена на передней двери, а затем позволяет HTTPS связать сертификат для каждого поддомена.
- Если приложение добавляет новый поддомен, то вам больше не требуется менять конфигурацию production Front Door. В другом случае ранее требовалось добавить поддомен, привязать к нему сертификат, прикрепить политику брандмауэра веб-приложений (WAF), добавив домен к различным правилам разгрома.

> [!NOTE]
> В настоящее время домены подстановочных знаков поддерживаются только через API, PowerShell и CLI. Поддержка добавления доменов подстановочных знаков через портал Azure недоступна.

## <a name="adding-wildcard-domains"></a>Добавление доменов подстановочных знаков

Вы можете на борту домена подстановочных знаков в разделе Frontend Hosts или Domains. Как и в поддоменах, Front Door подтверждает, что есть CNAME отображение для вашего домена подстановочных знаков, а также. Это отображение DNS может быть `*.contoso.com` прямым `contoso.azurefd.net` отображением CNAME, `afdverify.contoso.com` как отображено на карте или через afdverify временного отображения, как отображенные для `afdverify.contoso.azurefd.net` проверки cNAME карты для подстановочных знаков, а также (Azure DNS поддерживает подстановочные записи).

Вы также можете добавить как можно больше одноуровневых поддоменов домена подстановочного знака в передних хостах, если они не бьют по максимуму. предел передних хостов. Эта функциональность может потребоваться для определения другого маршрута для поддона, чем остальные домены (из домена подстановочных знаков) или с другой политикой WAF для конкретного поддомена. Таким `*.contoso.com` образом, `foo.contoso.com` позволит добавить без необходимости `foo.bar.contoso.com` снова доказать владение доменом, `*.contoso.com`но не так, как это не один уровень поддомени . Чтобы `foo.bar.contoso.com` добавить без дополнительной `*.bar.contosonews.com` проверки владения доменом, необходимо будет добавить.

### <a name="limitations"></a>Ограничения

1. Если домен подстановочного знака добавляется в данный профиль Front Door, то то же самое нельзя добавить ни к какому другому профилю Front Door. 
2. Если домен подстановочного знака добавляется в данный профиль Front Door, то любые поддомены этого домена подстановочных знаков не могут быть добавлены в другую переднюю дверь или CDN Azure из профиля Microsoft
3. Если поддомен домена подстановочных знаков добавляется либо в профиль Front Door, либо в Azure CDN из профиля Microsoft, то домен подстановочных знаков не может быть добавлен ни к одному другому профилю Front Door. 
4. Если два профиля (Front Door или Azure CDN от Microsoft) имеют различные поддомены корневого домена, то домены подстановочных знаков не могут быть добавлены ни на один из профилей.

## <a name="certificate-binding-for-wildcard-domains-and-its-subdomains"></a>Привязка сертификата для доменов подстановочных знаков и его поддоменов

Для принятия трафика HTTPS на домене подстановочных знаков необходимо включить HTTPS в домене подстановочных знаков. Привязка сертификата для домена подстановочных знаков требует сертификата подстановочного знака, то есть имя предмета сертификата также должно иметь домен подстановочного знака.

> [!NOTE]
> В настоящее время для включения HTTPS для доменов подстановочных знаков доступен только пользовательский сертификат SSL. Управляемые сертификаты Front Door не могут использоваться для доменов подстановочных знаков. 

Вы можете использовать тот же сертификат подстановочного знака из вашего Key Vault для поддоменов, или, использование сертификатов Front Door Управляемые для поддоменов также поддерживается.
Если субдомен добавляется для домена подстановочных знаков, а домен подстановочного знака уже связан с сертификатом, то HTTPS для этого поддомена не может быть отключен. Поддомен по умолчанию будет использовать привязку сертификата домена подстановочным, если не быть переопределенным другим сертификатом Key Vault или управляемым сертификатом Front Door.

## <a name="web-application-firewall-for-wildcard-domains-and-its-subdomains"></a>Веб-приложение брандмауэр для доменов подстановочных знаков и его поддоменов

Политики WAF могут быть прикреплены к домену подстановочного знака, аналогичному другим доменосам. К поддомену домена подстановочных знаков может быть применена другая политика WAF. Для поддоменов необходимо четко указать политику WAF, которая будет использоваться, и даже если это та же политика, что и домен подстановочных знаков. Субдомены **не** будут автоматически наследовать политику WAF из домена подстановочных знаков.

Если у вас есть сценарий, в котором вы не хотите, чтобы WAF запускал для поддона, то вы можете создать пустую политику WAF без управляемых или пользовательских правил.

## <a name="routing-rules-for-wildcard-domains-and-its-subdomains"></a>Правила реуктора для доменов подстановочных знаков и их поддоменов

При настройке правила разгрома можно выбрать домен подстановочного знака в качестве переднего узла. Вы также можете иметь различное поведение маршрута для домена подстановочных знаков против поддоменов. Как описано в [том, как Front Door делает маршрут соответствия](front-door-route-matching.md), наиболее конкретные матч для домена через различные правила маршрутизажа будут выбраны во время выполнения.

> [!WARNING]
> Если у вас есть два правила маршрутизания, как **маршрут 1**: `*.foo.com/*` отображены на Backend бассейн `bar.foo.com/anotherPath/*`и маршрут **2**: `bar.foo.com/somePath/*` отображены на Backend бассейн B, и если запрос прибывает для , то ваши клиенты будут видеть сбои, как Front Door не найдете какой-либо матч по обоим маршрутам. Это потому, что в нашем [алгоритме сопоставления маршрута,](front-door-route-matching.md)Front Door выберет Route 2 на основе более конкретного соответствия домена, но только чтобы обнаружить, что нет соответствующих шаблонов пути. 


## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Узнайте, как [добавить пользовательский домен на передней двери.](front-door-custom-domain.md)
- Узнайте, как [включить HTTPS на пользовательском домене.](front-door-custom-domain-https.md)
