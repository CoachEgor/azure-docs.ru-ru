---
title: Создание передней двери с перенаправлением HTTPS с помощью портала Azure
description: Узнайте, как создать переднюю дверь с перенаправленным трафиком с HTTP на HTTPS с помощью портала Azure.
services: front-door
author: sharad4u
ms.service: frontdoor
ms.topic: article
ms.date: 5/21/2019
ms.author: sharadag
ms.openlocfilehash: f1b8c033a3ec230d60c30f6168de8ce013a80ac6
ms.sourcegitcommit: 2d7910337e66bbf4bd8ad47390c625f13551510b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80878006"
---
# <a name="create-a-front-door-with-http-to-https-redirection-using-the-azure-portal"></a>Создание передней двери с перенаправлением HTTPS с помощью портала Azure

Для создания [передней двери](front-door-overview.md) с сертификатом для прекращения TLS можно использовать портал Azure. Правило routout используется для перенаправления трафика HTTP на HTTPS.

Вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создание передней двери с существующим ресурсом Web App
> * Добавление пользовательского домена с сертификатом TLS/SSL 
> * Настройка HTTPS перенаправить на пользовательский домен

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

## <a name="create-a-front-door-with-an-existing-web-app-resource"></a>Создание передней двери с существующим ресурсом Web App

1. Войти на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).
2. Выберите **Создать ресурс** в верхнем левом углу окна на портале Azure.
3. Поиск **передней двери** с помощью панели поиска и как только вы найдете тип ресурса, нажмите **Создать**.
4. Выберите подписку, а затем либо использовать существующую группу ресурсов или создать новую. Обратите внимание, что место, запрошенное в uI, предназначено только для группы ресурсов. Конфигурация Front Door будет развернута во всех [местах POP Azure Front Door.](front-door-faq.md#what-are-the-pop-locations-for-azure-front-door)

    ![Настройка основы для новой передней двери](./media/front-door-url-redirect/front-door-create-basics.png)

5. Нажмите **далее,** чтобы ввести вкладку конфигурации. Конфигурация для Front Door происходит в три этапа - добавление переднего хоста по умолчанию, добавление бэкэндов в пул бэкэнда, а затем создание правил реуктора для отображения поведения в области реаутинга для переднего узла. 

     ![Дизайнер конфигурации передней двери](./media/front-door-url-redirect/front-door-designer.png)

6. Нажмите**+** на ' значок на _Frontend хостов_ для создания передней хост, введите глобально уникальное имя для вашего переднего хоста по умолчанию для передней двери ( ).`\<**name**\>.azurefd.net` Нажмите **Добавить,** чтобы перейти к следующему шагу.

     ![Добавление переднего узла](./media/front-door-url-redirect/front-door-create-fehost.png)

7. Нажмите**+** на значок ' на _пулах Backend,_ чтобы создать пул бэкэнда. Предоставьте имя для бэкэндпула, а затем нажмите**кнопку 'Добавить бэкэнд'.**
8. Выберите тип backend Host в качестве _службы app._ Выберите подписку, где размещается ваше веб-приложение, а затем выберите конкретное веб-приложение из отсечения для **имени хоста Backend.**
9. Нажмите **Добавить,** чтобы сохранить бэкэнд и нажмите **Добавить** еще раз, чтобы сохранить бэкэнд бассейн конфигурации.   ![Добавить бэкэнд в бэкэнд бассейн](./media/front-door-url-redirect/front-door-create-backendpool.png)

10. Нажмите**+**'значок ' на _правилах маршрутирования,_ чтобы создать маршрут. Укажите название маршрута, скажем, 'HttpToHttpsRedirect', а затем установите поле _принятых протоколов_ **только на 'HTTP only'.** Убедитесь, что выбран соответствующий _передний хост._  
11. В разделе _Детали маршрута_ установите _тип маршрута_ для **перенаправления,** убедитесь, что _тип Перенаправления_ настроен на **найденную (302),** а _протокол перенаправления_ настроен только на **HTTPS.** 
12. Нажмите Добавить, чтобы сохранить правило разгрома для HTTP на HTTPS перенаправить.
     ![Добавить HTTP к маршруту перенаправления HTTPS](./media/front-door-url-redirect/front-door-redirect-config-example.png)
13. Добавьте еще одно правило размывания для обработки трафика HTTPS. Нажмите**+**"Знак " на _правилах маршрутизании_ и укажите название маршрута, скажем, 'DefaultForwardingRoute', а затем установите поле _допустимых протоколов_ **только на 'HTTPS'**. Убедитесь, что выбран соответствующий _передний хост._
14. В разделе Детали маршрута установите _тип маршрута_ **для продвижения вперед,** убедитесь, что будет выбран правый пул бэкэнда и протокол _переадресования_ установлен только на **HTTPS.** 
15. Нажмите Добавить, чтобы сохранить правило разгрома для переадресования запроса.
     ![Добавление переднего маршрута для трафика HTTPS](./media/front-door-url-redirect/front-door-forward-route-example.png)
16. Нажмите **Обзор и создайте,** а затем **создайте,** чтобы создать свой профиль Передняя дверь. Перейдите к созданного ресурса.

## <a name="add-a-custom-domain-to-your-front-door-and-enable-https-on-it"></a>Добавьте пользовательский домен в переднюю дверь и включите httpS на ней
Следующие шаги демонстрируют, как можно добавить пользовательский домен на существующем ресурсе Front Door, а затем включить httpS перенаправление на него. 

### <a name="add-a-custom-domain"></a>Добавление личного домена

В этом примере вы добавляете `www` запись CNAME для `www.contosonews.com`поддона (например, ).

#### <a name="create-the-cname-record"></a>Создание записи CNAME

Добавьте запись CNAME, чтобы сопоставить субдомен в передний хост передней двери (,`<name>.azurefd.net`где `<name>` называется ваш профиль Front Door).

Для `www.contoso.com` домена, например, добавьте запись CNAME, `<name>.azurefd.net`в которой отображается имя. `www`

После добавления этой записи страница управления записями DNS выглядит так:

![Пользовательский домен CNAME для передней двери](./media/front-door-url-redirect/front-door-dns-cname.png)

#### <a name="onboard-the-custom-domain-on-your-front-door"></a>На борту пользовательского домена на передней двери

1. На вкладке дизайнера Front Door нажмите на значок ''' на разделе парадных хостов, чтобы добавить новый пользовательский домен. 
2. Введите полностью квалифицированное пользовательское имя `www.contosonews.com`DNS в пользовательском поле имен хоста, например. 
3. После проверки отображения CNAME от домена до передней двери нажмите кнопку **«Добавить,** чтобы добавить пользовательский домен.
4. Нажмите **Сохранить,** чтобы отправить изменения.

![Меню личных доменов](./media/front-door-url-redirect/front-door-add-custom-domain.png)

### <a name="enable-https-on-your-custom-domain"></a>Включить HTTPS в пользовательском домене

1. Нажмите на пользовательский домен, который был добавлен и под **разделом Пользовательский домен HTTPS**, изменить статус **включен.**
2. Вы можете оставить **тип управления сертификатом,** установленный для _Front Door, управляемый_ для свободного сертификата, управляемый и автоматически отводимый передней дверью. Вы также можете использовать свой собственный пользовательский сертификат TLS/SSL, хранящийся в Azure Key Vault. Этот учебник предполагает, что использование сертификата Front Door.
![Включение HTTPS для пользовательского домена](./media/front-door-url-redirect/front-door-custom-domain-https.png)

3. Нажмите на **обновление,** чтобы сохранить выбор, а затем нажмите **Сохранить**.
4. Нажмите **Refresh** через пару минут, а затем нажмите на пользовательский домен снова, чтобы увидеть ход подготовки сертификата. 

> [!WARNING]
> Включение HTTPS для пользовательского домена может занять несколько минут, а также зависит от проверки `<name>.azurefd.net`владения доменом, если CNAME не напрямую отображается на вашем хосте Front Door. Узнайте больше о [том, как включить HTTPS для пользовательского домена.](./front-door-custom-domain-https.md)

## <a name="configure-the-routing-rules-for-the-custom-domain"></a>Настройка правил построения для пользовательского домена

1. Нажмите на правило перенаправления, созданное ранее.
2. Нажмите на падение для frontend хостов и выберите пользовательский домен, чтобы применить этот маршрут для вашего домена, а также.
3. Нажмите кнопку **Обновить**.
4. Сделайте ту же операцию для другого правила маршрутирования, а это, для вашего маршрута пересылки, чтобы добавить пользовательский домен.
5. Нажмите **Сохранить,** чтобы отправить изменения.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
- Подробнее о [URL-адресе перенаправить на переднюю дверь.](front-door-url-redirect.md)
