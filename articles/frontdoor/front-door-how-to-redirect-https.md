---
title: Создание передовой линии с помощью HTTP сертификатом с помощью портала Azure
description: Узнайте, как создать входной двери с перенаправлением трафика HTTP в HTTPS с помощью портала Azure.
services: front-door
author: sharad4u
ms.service: front-door
ms.topic: article
ms.date: 5/21/2019
ms.author: sharadag
ms.openlocfilehash: a07b19c49630cc925e719aaa1d46476a1edc58f5
ms.sourcegitcommit: 08138eab740c12bf68c787062b101a4333292075
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2019
ms.locfileid: "67333313"
---
# <a name="create-a-front-door-with-http-to-https-redirection-using-the-azure-portal"></a>Создание передовой линии с помощью HTTP сертификатом с помощью портала Azure

Портал Azure можно использовать для создания [двери](front-door-overview.md) с сертификатом для завершения SSL-запросов. Правило маршрутизации используется для перенаправления трафика HTTP на HTTPS.

В этой статье раскрываются следующие темы:

> [!div class="checklist"]
> * Создание передовой линии с помощью существующего ресурса веб-приложения
> * Добавить пользовательский домен SSL-сертификат. 
> * Настройка перенаправления HTTPS в личном домене

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

## <a name="create-a-front-door-with-an-existing-web-app-resource"></a>Создание передовой линии с помощью существующего ресурса веб-приложения

1. Войдите на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).
2. Выберите **Создать ресурс** в верхнем левом углу окна на портале Azure.
3. Поиск **двери** поиска по строке и найдя тип ресурса, нажмите кнопку **создать**.
4. Выберите подписку и затем использовать существующую группу ресурсов или создайте новую. Обратите внимание, расположение, задаваемые в пользовательском Интерфейсе только группы ресурсов. Конфигурацию двери будут развернуты во всех [расположение узлов POP сети Azure передней дверцы](https://docs.microsoft.com/azure/frontdoor/front-door-faq#what-are-the-pop-locations-for-azure-front-door-service).

    ![Настройка основных сведений для новой передовой линии](./media/front-door-url-redirect/front-door-create-basics.png)

5. Нажмите кнопку **Далее** ввести на вкладке конфигурации. Настройка для входной двери выполняется в три этапа — Добавление узла внешнего интерфейса по умолчанию, Добавление серверных систем в серверном пуле и затем создать правила маршрутизации для сопоставления поведением при маршрутизации для внешнего интерфейса узла. 

     ![Конструктор конфигурации передовой линии](./media/front-door-url-redirect/front-door-designer.png)

6. Нажмите кнопку " **+** " значок на _узлы Frontend_ для создания узла внешнего интерфейса, введите глобальное уникальное имя для внешнего интерфейса узла по умолчанию для вашего двери (`\<**name**\>.azurefd.net`). Нажмите кнопку **добавить** для перехода к следующему шагу.

     ![Добавление узла frontend](./media/front-door-url-redirect/front-door-create-fehost.png)

7. Нажмите кнопку " **+** " значок на _серверные пулы_ для создания пула серверной части. Укажите имя для серверного пула и нажмите кнопку "**добавьте внутренний сервер**".
8. Выберите тип узла серверной части как _службы приложений_. Выберите подписку, где размещается веб-приложения и выберите из раскрывающегося списка для определенного веб-приложения **имя внутреннего узла**.
9. Нажмите кнопку **добавить** для сохранения серверной части и нажмите кнопку **добавить** еще раз, чтобы сохранить конфигурацию пула серверной части.   ![Добавление сервера в серверном пуле](./media/front-door-url-redirect/front-door-create-backendpool.png)

10. Нажмите кнопку " **+** " значок на _правила маршрутизации_ для создания маршрута. Укажите имя для маршрута, сказать «HttpToHttpsRedirect», а затем задайте _принят протоколы_ поле **«HTTP»** . Убедитесь, что соответствующий _узла frontend_ выбран.  
11. На _сведения о маршруте_ задайте _тип маршрута_ для **перенаправления**, убедитесь, что _перенаправления типа_ присваивается  **Найти (302)** и _перенаправления протокола_ присваивается **только HTTPS**. 
12. Нажмите кнопку Добавить, чтобы сохранить правило маршрутизации для протокола HTTP в HTTPS перенаправления.
     ![Добавить HTTP в HTTPS перенаправления маршрута](./media/front-door-url-redirect/front-door-redirect-config-example.png)
13. Добавьте новое правило маршрутизации для обработки трафика HTTPS. Нажмите кнопку " **+** " вход _правила маршрутизации_ и укажите имя для маршрута, сказать «DefaultForwardingRoute», а затем установите _принят протоколы_ поля Чтобы **«Только HTTPS»** . Убедитесь, что соответствующий _узла frontend_ выбран.
14. В разделе "сведения о маршруте" задать _тип маршрута_ для **вперед**, убедитесь, что выбран пул правильному внутреннему серверу и _пересылки протокола_ присваивается  **Только HTTPS**. 
15. Нажмите кнопку Добавить, чтобы сохранить правило маршрутизации для перенаправления запроса.
     ![Добавьте прямой маршрут для трафика HTTPS](./media/front-door-url-redirect/front-door-forward-route-example.png)
16. Нажмите кнопку **проверки + создать** и затем **создать**, чтобы создать профиль двери. Перейдите к ресурсу после ее создания.

## <a name="add-a-custom-domain-to-your-front-door-and-enable-https-on-it"></a>Добавление личного домена к вашей двери и включить HTTPS в ней
Следующие шаги продемонстрировать, как добавить пользовательский домен для существующего ресурса двери и затем включить HTTP для перенаправления HTTPS на нем. 

### <a name="add-a-custom-domain"></a>Добавление личного домена

В этом примере, добавьте запись CNAME для `www` поддомен (например, `www.contosonews.com`).

#### <a name="create-the-cname-record"></a>Создание записи CNAME

Добавьте запись CNAME для сопоставления поддомена с узла frontend вашей двери по умолчанию (`<name>.azurefd.net`, где `<name>` — это имя вашего профиля двери).

Для `www.contoso.com` домена, например, добавьте запись CNAME, которая сопоставляет имя `www` для `<name>.azurefd.net`.

После добавления этой записи страница управления записями DNS выглядит так:

![Запись CNAME личного домена на передовой линии](./media/front-door-url-redirect/front-door-dns-cname.png)

#### <a name="onboard-the-custom-domain-on-your-front-door"></a>Встроенный личного домена в вашей двери

1. На вкладке конструктора «входной двери» щелкните «+» раздела значок на узлах внешнего интерфейса для добавления нового пользовательского домена. 
2. Введите полное имя пользовательского DNS-имя в поле имя пользовательского узла пример `www.contosonews.com`. 
3. После проверки сопоставление CNAME из домена к вашей двери щелкните **добавить** для добавления пользовательского домена.
4. Нажмите кнопку **Сохранить** отправлять изменения.

![Меню личных доменов](./media/front-door-url-redirect/front-door-add-custom-domain.png)

### <a name="enable-https-on-your-custom-domain"></a>Включение протокола HTTPS для личного домена

1. Щелкните личный домен, который был добавлен и в разделе **личный домен HTTPS**, измените состояние на **включено**.
2. Можно оставить **управления тип сертификата** присвоено _управляемые входной двери_ бесплатный сертификата сохраняется, управляемой и autorotated по двери. Также можно использовать собственный пользовательский SSL-сертификат, хранящемуся в хранилище ключей Azure. В учебнике предполагается, что использование двери управляемый сертификат.
![Включение HTTPS для личного домена](./media/front-door-url-redirect/front-door-custom-domain-https.png)

3. Щелкните **обновление** для сохранения файла и нажмите кнопку **Сохранить**.
4. Нажмите кнопку **обновить** через несколько минут и нажмите кнопку в личном домене еще раз, чтобы следить за ходом подготовки сертификата. 

> [!WARNING]
> Включение HTTPS для личного домена может занять несколько минут и также зависит проверка владельца домена, если запись CNAME не сопоставлен непосредственно к узлу двери `<name>.azurefd.net`. Дополнительные сведения о [как включить протокол HTTPS для личного домена](./front-door-custom-domain-https.md).

## <a name="configure-the-routing-rules-for-the-custom-domain"></a>Настройка правила маршрутизации для личного домена

1. Щелкните ранее созданное правило маршрутизации перенаправления.
2. Щелкните раскрывающийся список для внешнего интерфейса узлов и выберите вашего личного домена, чтобы применить этот маршрут для вашего домена, а также.
3. Нажмите кнопку **Обновить**.
4. То есть сделать той же операции для других правила маршрутизации, а также для вашей маршрут перенаправления добавить пользовательский домен.
5. Нажмите кнопку **Сохранить** чтобы сохранить изменения.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
- Дополнительные сведения о [URL-адрес перенаправления на входной двери](front-door-url-redirect.md).
