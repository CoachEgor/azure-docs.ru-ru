---
title: Мониторинг метрик и журналов в службе Azure двери | Документация Майкрософт
description: В этой статье описываются различные метрики и журналы событий, которые поддерживает служба Azure двери
services: frontdoor
documentationcenter: ''
author: sharad4u
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/18/2018
ms.author: sharadag
ms.openlocfilehash: 16770ea0a320b3d9f081cc21a102ab050a6467f6
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60736807"
---
# <a name="monitoring-metrics-and-logs-in-azure-front-door-service"></a>Мониторинг метрик и журналов в службе Azure передовой линии

С помощью службы Azure двери, вы можете отслеживать ресурсы следующим образом:

- **Метрики**. В настоящее время Шлюз приложений использует семь метрик для просмотра счетчиков производительности.
- **Журналы**. Действия и журналы диагностики позволяют производительности, доступа и другие данные можно сохранять или оснащена ресурсов для наблюдения.

### <a name="metrics"></a>metrics

Метрики — это функция определенных ресурсов Azure, которые дают возможность просмотреть счетчики производительности на портале. Ниже приведены доступные метрики двери.

| Метрика | Отображаемое имя метрики | Единица измерения | Измерения | Описание |
| --- | --- | --- | --- | --- |
| RequestCount | Число запросов | Количество | HttpStatus</br>HttpStatusGroup</br>ClientRegion</br>ClientCountry | Число клиентских запросов, обслуженных службой Front Door.  |
| RequestSize | Размер запроса | Байты | HttpStatus</br>HttpStatusGroup</br>ClientRegion</br>ClientCountry | Число байт, отправленных в качестве запросов от клиентов в службу Front Door. |
| ResponseSize | Размер ответа | Байты | HttpStatus</br>HttpStatusGroup</br>ClientRegion</br>ClientCountry | Число байт, отправленных клиентам в качестве ответов из службы Front Door. |
| TotalLatency | Total Latency (Общая задержка) | Миллисекунды | HttpStatus</br>HttpStatusGroup</br>ClientRegion</br>ClientCountry | Время отсчитывается от запроса клиента, полученных двери, пока клиент подтверждено последнего байта ответа из входной двери. |
| BackendRequestCount | Число запросов к серверному компоненту | Количество | HttpStatus</br>HttpStatusGroup</br>Серверная часть | Число запросов, отправленных из службы Front Door к серверным частям. |
| BackendRequestLatency | Backend Request Latency (Задержка запросов к серверным частям) | Миллисекунды | Серверная часть | Время с момента отправки запроса службой Front Door к серверной части до получения Front Door последнего байта ответа от серверной части. |
| BackendHealthPercentage | Работоспособность серверного компонента (в процентах) | Процент | Серверная часть</br>BackendPool | Процент успешных проб работоспособности от службы Front Door к серверным частям. |
| WebApplicationFirewallRequestCount | Web Application Firewall Request Count (Число запросов к брандмауэру веб-приложения) | Количество | PolicyName</br>RuleName</br>Действие | Количество клиентских запросов, обрабатываемых механизмом безопасности на прикладном уровне службы Front Door. |

## <a name="activity-log"></a>Журналы действий

Журналы действий предоставляют сведения об операции, выполняемые в службе двери. Они также определяют, кто и когда для любой операции записи (put, post или delete) в службе двери.

>[!NOTE]
>Журналы действий не содержат операций чтения (get). Они также не включают операции, выполняемые с помощью портала Azure или исходный API управления.

Журналы действий доступа в службе двери или все журналы из ресурсов Azure в Azure Monitor. Чтобы просмотреть журналы действий, сделайте следующее:

1. Выберите свой экземпляр входной двери.
2. Выберите **журнал действий**.

    ![Журнал действий](./media/front-door-diagnostics/activity-log.png)

3. Выберите область фильтрации, а затем выберите **применить**.

## <a name="diagnostic-logging"></a>Журналы диагностики
Журналы диагностики предоставляют подробные сведения об операциях и ошибках, которые важны для аудита и устранения неполадок. Журналы диагностики отличаются от журналов действий.

Журналы действий позволяют подробно проанализировать операции, выполнить на ресурсы Azure. Журналы диагностики дают представление об операциях, которые выполняемых ресурсом. Дополнительные сведения см. в разделе [журналов диагностики Azure Monitor](../azure-monitor/platform/diagnostic-logs-overview.md).

![Журналы диагностики](./media/front-door-diagnostics/diagnostic-log.png)

Настройка журналов диагностики для службы двери.

1. Выберите службу Azure входной двери.

2. Выберите **параметров диагностики**.

3. Выберите **Включить диагностику**. Архивация журналов диагностики и метрики в учетной записи хранения, выполнять их потоковую передачу в концентратор событий или отправлять их в журналы Azure Monitor.

Служба двери в настоящее время предоставляет журналы диагностики (в пакетном режиме каждый час). Эти журналы содержат отдельных запросов API со следующей схемой каждой записи:

| Свойство  | Описание |
| ------------- | ------------- |
| ClientIp | IP-адрес отправившего запрос клиента. |
| clientPort | Порт IP-адрес клиента, который отправил запрос. |
| HttpMethod | Метод HTTP, используемый для запроса. |
| HttpStatusCode | Код состояния HTTP, возвращаемый прокси-сервер. |
| HttpStatusDetails | Итоговое состояние в запросе. Значение этого свойства строки можно найти в ссылочной таблице состояния. |
| HttpVersion | Тип запроса или подключения. |
| RequestBytes | Размер сообщения HTTP-запроса в байтах, включая заголовки запроса и тексте запроса. |
| requestUri | URI полученного запроса. |
| ResponseBytes | Байт, отправленных серверу базы данных, как и в ответе.  |
| RoutingRuleName | Имя правила маршрутизации, соответствующий запрос. |
| SecurityProtocol | Версия протокола TLS/SSL, используемые в запросе или значение null, если без шифрования. |
| TimeTaken | Продолжительность времени, затраченное на выполнение действия, в миллисекундах. |
| UserAgent | Тип браузера, используемый клиентом |
| TrackingReference | Уникальная ссылка строку, которая определяет запросов, выполненных с входной двери, также клиенту как заголовок X-Azure-Ref. Требуется для поиска сведений в журналах доступа для конкретного запроса. |

## <a name="next-steps"></a>Дальнейшие действия

- [Создание профиля передовой линии](quickstart-create-front-door.md)
- [Как работает передовой линии](front-door-routing-architecture.md)
