---
title: Шаблон мультитенантного веб-приложения | Документация Майкрософт
description: Найдите обзоры архитектуры и шаблоны разработки, описывающие, как реализовать мультитенантное веб-приложение в Azure.
services: ''
documentationcenter: .net
author: wadepickett
manager: wpickett
editor: ''
ms.assetid: 4f0281d2-1555-42b0-a99d-1222fade0b0f
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/05/2015
ms.author: wpickett
ms.openlocfilehash: d1441ede9f448b3e6ffb0726c2ee92f192369e9a
ms.sourcegitcommit: b55d7c87dc645d8e5eb1e8f05f5afa38d7574846
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81481840"
---
# <a name="multitenant-applications-in-azure"></a>Мультитенантные приложения Azure
Мультитенантное приложение — это общий ресурс, который позволяет «пользователям в отдельных арендаторах» просматривать приложение так, как будто оно принадлежит им. Типичным сценарием, который поддается мультитенантному приложению, является сценарий, в котором все пользователи приложения от разных арендаторов, возможно, пожелают настроить пользовательский опыт, но в противном случае имеют те же основные бизнес-требования. Примерами крупных мультитенатных приложений являются Office 365, Outlook.com и visualstudio.com.

С точки зрения поставщика приложения преимущества мультитенантности связаны в основном с оптимизацией работы и расходов. Одна версия приложения может соответствовать потребностям многих клиентов/заказчиков, что позволяет консолидировать задачи системного администрирования, такие как мониторинг, настройка производительности, поддержка программного обеспечения и резервное копирование данных.

Ниже приведен список наиболее значимых целей и требований с точки зрения поставщика.

* **Подготовка.** Необходимо иметь возможность подготавливать новых клиентов для приложения.  Для мультитенатных приложений с большим количеством клиентов, как правило, необходимо автоматизировать этот процесс, включив возможность самостоятельной подготовки.
* **Возможность поддержки.** Необходимо иметь возможность обновить приложение и выполнить другие задачи поддержки во время использования приложения несколькими клиентами.
* **Мониторинг.** Необходимо иметь возможность постоянного мониторинга приложения для определения любых проблем и их эффективного устранения. Это включает мониторинг использования приложения каждым клиентом.

Правильно реализованного мультитенантное приложение предоставляет пользователям следующие преимущества.

* **Изоляция.** Действия отдельных клиентов не влияют на использование приложения другими клиентами. Клиенты не могут получить доступ к данным друг друга. С точки зрения клиента он имеет эксклюзивный доступ к приложению.
* **Доступность.** Отдельные клиенты нуждаются в постоянной доступности приложения, возможно, с определением гарантии в соглашении об уровне обслуживания. Опять же, действия других клиентов не должны влиять на доступность приложения.
* **Масштабируемость.** Приложение масштабируется для соответствия требованиям отдельных клиентов. Присутствие и действия других клиентов не должны влиять на производительность приложения.
* **Расходы.** Расходы ниже, чем при использовании выделенного для одного клиента приложения, так как мультитенантность обеспечивает совместное использование ресурсов.
* **Настраиваемость**. Возможность настройки приложения для отдельного клиента различными способами, например путем добавления и удаления функциональных возможностей, изменения цветов и логотипов или даже добавления собственного кода или сценария.

Короче говоря, хотя есть много соображений, которые вы должны принять во внимание, чтобы обеспечить высокомасштабируемую услугу, Есть также ряд целей и требований, которые являются общими для многих мультитенантных приложений. Некоторые могут не быть связаны с определенными сценариями, а важность отдельных целей и требований будут различаться в каждом сценарии. Как поставщик мультитенантного приложения, вы также будете иметь цели и требования, такие как, удовлетворение целей и требований арендатора, прибыльность, выставление счетов, несколько уровней обслуживания, подготовка, мониторинг обслуживания и автоматизация.

Дополнительные сведения о дополнительных аспектах разработки мультитенантного приложения см. в статье [Размещение мультитенантного приложения в Azure][Hosting a Multi-Tenant Application on Azure]. Сведения о распространенных шаблонах архитектуры данных для мультитенантных приложений базы данных SaaS см. в статье [Шаблоны разработки для мультитенантных приложений SaaS с использованием Базы данных Azure SQL](sql-database/sql-database-design-patterns-multi-tenancy-saas-applications.md). 

Azure предоставляет различные функциональные возможности, которые позволяют устранить основные проблемы, возникающие при разработке мультитенантной системы.

**Изоляции**

* Сегмент сайта Арендаторы хост заголовки с или без связи TLS
* Сегментация клиентов веб-сайтов с помощью параметров запросов.
* Веб-службы в рабочих ролях.
  * Роли рабочих, которые обычно обрабатывают данные на бэкэнде приложения.
  * Веб-роли, которые, как правило, функционируют как интерфейсные части приложений.

**Память**

Управление данными, такими как база данных Azure S'L или службы хранения azure, такие как служба таблицы, которая предоставляет услуги для хранения больших объемов неструктурированных данных и служба Blob, которая предоставляет услуги по хранению больших объемов неструктурированного текста или двоичных данных, таких как видео, аудио и изображения.

* Обеспечение безопасности мультитенантных данных в базе данных S'L для входа в сервер s-tenant S'L Server.
* Используя таблицы Azure для ресурсов приложений, указывая политику доступа к контейнерному уровню, можно настроить разрешения без выдачи новых URL-адресов для ресурсов, защищенных общими подписями доступа.
* Очереди Azure для ресурсов приложения. Очереди Azure часто используются для выполнения обработки от имени клиентов, однако также могут быть использованы для распределения работы, необходимой для подготовки и управления.
* Очереди Service Bus для ресурсов приложения, которые передают работу в общую службу. Можно использовать отдельную очередь, где каждый клиент-отправитель может иметь разрешения (по требованиям ACS) только на передачу данных в эту очередь, тогда как только получатели из службы могут иметь разрешение на прием из очереди данных, поступающих от нескольких клиентов.

**Службы подключения и безопасности**

* Azure Service Bus — это инфраструктура обмена сообщениями, которая размещается между приложениями и позволяет им обмениваться сообщениями в слабосвязанной конфигурации для улучшения масштабирования и устойчивости.

**Сетевые службы**

Azure предоставляет несколько сетевых служб, поддерживающих проверку подлинности и повышающих управляемость размещенных приложений. В число этих служб входят следующие:

* Виртуальная сеть Azure позволяет подготавливать виртуальные частные сети (VPN) в Azure, управлять ими, а также обеспечить безопасный канал с локальной ИТ-инфраструктурой.
* Диспетчер трафика (Traffic Manager) виртуальных сетей обеспечивает балансировку нагрузки по входящему трафику между несколькими размещенными службами Azure независимо от того, работают они в одном центре обработки данных или распределены по всему миру.
* Azure Active Directory (Azure AD) — это современная служба на основе интерфейса REST, которая предоставляет возможности для управления идентификацией и доступом в облачных приложениях. Использование Azure AD для ресурсов приложений обеспечивает простой способ проверки подлинности и разрешения пользователям получить доступ к вашим веб-приложениям и службам, позволяя учитывать функции проверки подлинности и авторизации из вашего кода.
* Azure Service Bus предоставляет возможность безопасного обмена сообщениями и передачи данных для распределенных и гибридных приложений, например связи между размещенными в Azure приложениями и локальными приложениями и службами без необходимости в использовании комплексных инфраструктур брандмауэра и безопасности. Использование Service Bus Relay для ресурсов приложений для доступа к службам, которые подвергаются в качестве конечных точек, может принадлежать арендатору (например, размещенным за пределами системы, например, на местах), или же они могут быть услугами, предоставляемыми специально для арендатора (потому что конфиденциальные данные, конкретные для арендатора, перемещаются по ним).

**Подготовка ресурсов**

Azure предоставляет несколько способов предоставления новых арендаторов для приложения. Для мультитенатных приложений с большим количеством клиентов, как правило, необходимо автоматизировать этот процесс, включив возможность самостоятельной подготовки.

* Рабочие роли позволяют подготовить и отменить подготовку ресурсов для каждого клиента (например, при регистрации или отмене регистрации клиентов), собирать показатели для использования этих данных, а также управлять масштабированием по определенному расписанию или в ответ на пересечение порогового значения или ключевого показателя производительности. Эта же роль может использоваться для передачи обновлений и модернизаций в решение.
* BLOB-объекты Azure могут использоваться для подготовки вычислительных ресурсов или предварительно инициализированных ресурсов хранения для новых клиентов, обеспечивая при этом политики доступа на уровне контейнера для защиты пакетов, VHD-образов и других ресурсов вычислительных служб.
* Возможности подготовки ресурсов баз данных SQL для клиентов включают следующие:
  
  * DDL в скриптах или встроенных в качестве ресурсов в сборках.
  * Пакеты SQL Server 2008 R2, развернутые программными средствами.
  * Копирование из основной справочной базы данных.
  * Использование импорта и экспорта базы данных для подготовки новых баз данных из файла.

<!--links-->

[Hosting a Multi-Tenant Application on Azure]: https://msdn.microsoft.com/library/hh534480.aspx
[Designing Multitenant Applications on Azure]: https://msdn.microsoft.com/library/windowsazure/hh689716
