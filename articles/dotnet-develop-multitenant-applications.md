---
title: Шаблон мультитенантного веб-приложения | Документация Майкрософт
description: Найдите обзоры архитектуры и шаблоны разработки, описывающие, как реализовать мультитенантное веб-приложение в Azure.
services: ''
documentationcenter: .net
author: wadepickett
manager: wpickett
editor: ''
ms.assetid: 4f0281d2-1555-42b0-a99d-1222fade0b0f
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/05/2015
ms.author: wpickett
ms.openlocfilehash: 92a0caedca34756228dbf57ec9099fd2ece3d84e
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66225971"
---
# <a name="multitenant-applications-in-azure"></a>Мультитенантные приложения Azure
Мультитенантное приложение – это общий ресурс, который позволяет разделять пользователей или "клиентов" для просмотра приложения, как будто каждый пользователь является его владельцем. Типичный сценарий, связанный с мультитенатным приложением: все пользователи приложения могут настроить под себя интерфейс, однако во всем остальном приложение должно соответствовать одним и тем же бизнес-требованиям. Примерами крупных мультитенатных приложений являются Office 365, Outlook.com и visualstudio.com.

С точки зрения поставщика приложения преимущества мультитенантности связаны в основном с оптимизацией работы и расходов. Одна версия приложения может соответствовать потребностям многих клиентов/заказчиков, что позволяет консолидировать задачи системного администрирования, такие как мониторинг, настройка производительности, поддержка программного обеспечения и резервное копирование данных.

Ниже приведен список наиболее значимых целей и требований с точки зрения поставщика.

* **Подготовка**: Необходимо, чтобы возможность подготовки новых клиентов для приложения.  Для мультитенатных приложений с большим количеством клиентов, как правило, необходимо автоматизировать этот процесс, включив возможность самостоятельной подготовки.
* **Удобство поддержки**: Необходимо будет обновить приложение и выполнить другие задачи обслуживания, при использовании нескольких клиентов.
* **Мониторинг**. Необходимо, вы сможете отслеживать приложение все время выявить проблемы и их устранения. Это включает мониторинг использования приложения каждым клиентом.

Правильно реализованного мультитенантное приложение предоставляет пользователям следующие преимущества.

* **Изоляция.** Действия отдельных клиентов не влияют на использование приложения другими клиентами. Клиенты не могут получить доступ к данным друг друга. С точки зрения клиента он имеет эксклюзивный доступ к приложению.
* **Доступность.** Отдельных клиентов должно быть постоянно доступны, возможно с определением гарантии в соглашении об уровне ОБСЛУЖИВАНИЯ приложение. Опять же, действия других клиентов не должны влиять на доступность приложения.
* **Масштабируемость.** Приложение масштабируется в соответствии с требованиями отдельных клиентов. Присутствие и действия других клиентов не должны влиять на производительность приложения.
* **Затраты.** Расходы ниже, чем это выделенный приложение с одним клиентом, так как Мультитенантность обеспечивает совместное использование ресурсов.
* **Возможность настройки**. Возможность настройки приложения для отдельного клиента различными способами, например путем добавления и удаления функциональных возможностей, изменения цветов и логотипов или даже добавления собственного кода или сценария.

Иными словами несмотря на наличие учесть множество факторов, которые следует принять во внимание для предоставления службы высокой степенью масштабируемости, существует также ряд целей и требований, которые являются общими для многих мультитенатных приложений. Некоторые могут не быть связаны с определенными сценариями, а важность отдельных целей и требований будут различаться в каждом сценарии. Как поставщик мультитенатных приложений также имеется целей и требований, таких как собрания клиента цели и требования, рентабельность, выставление счетов, несколько уровней обслуживания, подготовки, удобства поддержки мониторинга и автоматизации.

Дополнительные сведения о дополнительных аспектах разработки мультитенантного приложения см. в статье [Размещение мультитенантного приложения в Azure][Hosting a Multi-Tenant Application on Azure]. Сведения о распространенных шаблонах архитектуры данных для мультитенантных приложений базы данных SaaS см. в статье [Шаблоны разработки для мультитенантных приложений SaaS с использованием Базы данных Azure SQL](sql-database/sql-database-design-patterns-multi-tenancy-saas-applications.md). 

Azure предоставляет различные функциональные возможности, которые позволяют устранить основные проблемы, возникающие при разработке мультитенантной системы.

**Изоляция**

* Сегментация клиентов веб-сайта с помощью заголовков узла как при использовании SSL-подключений, так и при их отсутствии.
* Сегментация клиентов веб-сайтов с помощью параметров запросов.
* Веб-службы в рабочих ролях.
  * Рабочие роли, которые обычно обрабатывают данные в серверной части приложения.
  * Веб-роли, которые, как правило, функционируют как интерфейсные части приложений.

**Хранилище**

Управление данными, таких как базы данных SQL Azure или хранилище Azure службы, такие как служба таблиц, которая предоставляет службы для хранения больших объемов неструктурированных данных и служба BLOB-объектов, которая предоставляет службы для хранения больших объемов неструктурированных текстовых или двоичные данные, такие как видео, аудио и изображения.

* Обеспечение защиты Мультитенантных данных в базе данных SQL для каждого клиента имена входа SQL Server.
* Использование таблиц Azure для ресурсов приложения, указав политику доступа на уровне контейнера, может иметь возможность регулировать разрешения без необходимости выпускать новый URL-адреса для ресурсов, защищенных подписями общего доступа.
* Очереди Azure для ресурсов приложения. Очереди Azure часто используются для выполнения обработки от имени клиентов, однако также могут быть использованы для распределения работы, необходимой для подготовки и управления.
* Очереди Service Bus для ресурсов приложения, которые передают работу в общую службу. Можно использовать отдельную очередь, где каждый клиент-отправитель может иметь разрешения (по требованиям ACS) только на передачу данных в эту очередь, тогда как только получатели из службы могут иметь разрешение на прием из очереди данных, поступающих от нескольких клиентов.

**Службы подключения и безопасности**

* Azure Service Bus — это инфраструктура обмена сообщениями, которая размещается между приложениями и позволяет им обмениваться сообщениями в слабосвязанной конфигурации для улучшения масштабирования и устойчивости.

**Сетевые службы**

Azure предоставляет несколько сетевых служб, поддерживающих проверку подлинности и повышающих управляемость размещенных приложений. В число этих служб входят следующие:

* Виртуальная сеть Azure позволяет подготавливать виртуальные частные сети (VPN) в Azure, управлять ими, а также обеспечить безопасный канал с локальной ИТ-инфраструктурой.
* Диспетчер трафика (Traffic Manager) виртуальных сетей обеспечивает балансировку нагрузки по входящему трафику между несколькими размещенными службами Azure независимо от того, работают они в одном центре обработки данных или распределены по всему миру.
* Azure Active Directory (Azure AD) — это современная служба на основе интерфейса REST, которая предоставляет возможности для управления идентификацией и доступом в облачных приложениях. Использование Azure AD для ресурсов приложения предоставляет простой способ проверки подлинности и авторизации пользователей для доступа к веб-приложений и служб, при этом функции проверки подлинности и авторизации вынесены за пределы используемого кода.
* Azure Service Bus предоставляет возможность безопасного обмена сообщениями и передачи данных для распределенных и гибридных приложений, например связи между размещенными в Azure приложениями и локальными приложениями и службами без необходимости в использовании комплексных инфраструктур брандмауэра и безопасности. С помощью ретранслятора служебной шины для ресурсов приложения для доступа к службам, которые представляются как конечные точки могут принадлежать клиенту (например, размещаться вне системы, например локально), или это могут быть подготавливаться специально для клиента (так как службы конфиденциальные данные, конкретного клиента проходит через их).

**Подготовка ресурсов**

Azure предоставляет ряд способов для подготовки новых клиентов для приложения. Для мультитенатных приложений с большим количеством клиентов, как правило, необходимо автоматизировать этот процесс, включив возможность самостоятельной подготовки.

* Рабочие роли позволяют подготовить и отменить подготовку ресурсов для каждого клиента (например, при регистрации или отмене регистрации клиентов), собирать показатели для использования этих данных, а также управлять масштабированием по определенному расписанию или в ответ на пересечение порогового значения или ключевого показателя производительности. Эта же роль может использоваться для передачи обновлений и модернизаций в решение.
* BLOB-объекты Azure могут использоваться для подготовки вычислительных ресурсов или предварительно инициализированных ресурсов хранения для новых клиентов, обеспечивая при этом политики доступа на уровне контейнера для защиты пакетов, VHD-образов и других ресурсов вычислительных служб.
* Возможности подготовки ресурсов баз данных SQL для клиентов включают следующие:
  
  * DDL в скриптах или внедренных в качестве ресурсов в сборках.
  * Пакеты SQL Server 2008 R2, развернутые программными средствами.
  * Копирование из главной справочной базы данных.
  * Использование импорта и экспорта базы данных для подготовки новых баз данных из файла.

<!--links-->

[Hosting a Multi-Tenant Application on Azure]: https://msdn.microsoft.com/library/hh534480.aspx
[Designing Multitenant Applications on Azure]: https://msdn.microsoft.com/library/windowsazure/hh689716
