---
title: Создание рабочих процессов с помощью соединителя IoT Central в Azure Logic Apps | Документация Майкрософт
description: Использование соединителя IoT Central в Azure Logic Apps для запуска рабочих процессов, а также создания, обновления и удаления устройств в этих процессах.
services: iot-central
author: viv-liu
ms.author: viviali
ms.date: 06/09/2019
ms.topic: conceptual
ms.service: iot-central
manager: peterpr
ms.openlocfilehash: 3625d7374090bca73e2f054f7da4b58e951e7719
ms.sourcegitcommit: 4f6a7a2572723b0405a21fea0894d34f9d5b8e12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2020
ms.locfileid: "76990272"
---
# <a name="build-workflows-with-the-iot-central-connector-in-azure-logic-apps"></a>Создание рабочих процессов с помощью соединителя IoT Central в Azure Logic Apps

*Этот раздел предназначен для разработчиков и администраторов.*

С помощью службы Azure Logic Apps можно создавать автоматические масштабируемые рабочие процессы для интеграции приложений и данных в различные облачные службы и локальные системы. В Azure Logic Apps есть множество соединителей для многих служб Azure, служб Майкрософт и других продуктов формата "программное обеспечение как услуга" (SaaS). С помощью соединителя IoT Central в Azure Logic Apps можно настроить запуск рабочих процессов при активации правила в IoT Central. Кроме того, можно использовать действия соединителя IoT Central для создания или удаления устройства, а также обновления его свойств и параметров.

Соединитель IoT Central можно использовать в Microsoft Flow. Azure Logic Apps и Microsoft Flow — это предназначенные для разработчиков службы интеграции, целевые аудитории которых немного отличаются. Microsoft Flow позволяет создавать требуемые бизнес-процессы рядовым пользователям. Служба Logic Apps дает возможность ИТ-специалистам выполнять интеграции, требуемые для подключения данных. См. [сравнение служб Microsoft Flow и Logic Apps](https://docs.microsoft.com/azure/azure-functions/functions-compare-logic-apps-ms-flow-webjobs). См. дополнительные сведения о [создании рабочих процессов с помощью соединителя IoT Central в Microsoft Flow](howto-add-microsoft-flow.md).

## <a name="prerequisites"></a>Технические условия

- Приложение, созданное с использованием стандартного тарифного плана
- учетная запись и подписка Azure для создания приложений логики и управления ими.

## <a name="trigger-a-workflow-when-a-rule-is-triggered"></a>Запуск рабочего процесса при срабатывании правила

В этом разделе показано, как отправить сообщение в Microsoft Teams при активации правила. Вы можете настроить рабочий процесс, чтобы другие соединители выполняли такие действия, как отправка события в концентратор событий, создание рабочего элемента Azure DevOps или вставка новой строки в SQL Server.

1. Начнем с [создавая правила в IoT Central](howto-create-telemetry-rules.md). После сохранения условий правила выберите плитку **Azure Logic Apps** в качестве нового действия. Выберите **создать в портал Azure**. Вы перейдете к портал Azure, чтобы создать новое приложение логики. Возможно, вам нужно будет войти в учетную запись Azure.

1. Введите необходимые сведения, чтобы создать приложение логики. Можно выбрать подписку Azure, в которой новое приложение логики будет подготовлено к работе. Это необязательно должна быть та же подписка, в которой создано приложение IoT Central. Щелкните **Создать**.

    ![Создание приложения логики на портале Azure](./media/howto-build-azure-logic-apps/createinazureportal.png)

1. После успешного создания приложения логики вы автоматически переходите к конструктору Logic Apps. Выберите **Пустое приложение логики**. 

    ![Создание пустого приложения логики](./media/howto-build-azure-logic-apps/blanklogicapp.png)

1. В конструкторе выполните поиск по запросу iot central и выберите триггер **When a rule is fired** (При выполнении правила). Войдите в соединитель с помощью учетной записи, используемой для входа в приложение IoT Central.

    ![Вход в соединитель IoT Central](./media/howto-build-azure-logic-apps/addtrigger.png)

1. Когда вы войдете, отобразятся поля. Выберите требуемые значения в раскрывающемся списке **Application** (Приложение) и **Rule** (Правило).

    ![Выбор приложения и правила](./media/howto-build-azure-logic-apps/pickappandrule.png)

1. Добавьте новое действие. Выполните поиск по запросу **post message teams** (отправить сообщение в teams) и выберите **Post a message** (Отправить сообщение) в соединителе Microsoft Teams. Войдите в соединитель с учетной записью, используемой для Microsoft Teams.

1. В области действия выберите значения в полях **Team** (Команда) и **Channel** (Канал). Заполните поле **Message** (Сообщение) текстом для каждого сообщения. Вы можете добавить *динамическое содержимое* из своего правила IoT Central, передав важные сведения, например имя устройства и метку времени для вашего уведомления.
    > [!NOTE]
    > Чтобы получить значения измерений и свойств, которые активировали правило, выберите в окне динамического содержимого пункт **Показать больше** текста.

    ![Редактирование приложения логики с открытой панелью динамического содержимого](./media/howto-build-azure-logic-apps/buildworkflow.png)

1. Завершив изменение действия, нажмите кнопку **сохранить**.

1. Если вы вернетесь в приложение IoT Central, то в области действий увидите, что для этого правила задано действие Azure Logic Apps.

Вы всегда можете приступить к созданию рабочего процесса с помощью соединителя IoT Central в Logic Apps в портал Azure. Затем можно выбрать, к какому IoT Central приложению и к какому правилу подключаться, и все равно работать аналогично. Нет необходимости каждый раз начинать процедуру на странице правил IoT Central.

## <a name="create-update-and-delete-a-device-in-a-workflow"></a>Создание, обновление и удаление устройства в рабочем процессе

При создании рабочего процесса в приложении логики можно добавлять действие с помощью соединителя IoT Central. Доступные действия: **Создание устройства**, **обновление устройства**и **Удаление устройства**.

> [!NOTE]
> Для выполнения функции **Update a device** (Обновить устройство) и **Delete a device** (Удалить устройство) потребуется идентификатор существующего устройства, которое необходимо обновить или удалить. Идентификатор устройства IoT Central можно получить в **Device Explorer**.

![Идентификатор устройства в Device Explorer в IoT Central](./media/howto-build-azure-logic-apps/iotcdeviceid.png)

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы узнали, как использовать Microsoft Flow для создания рабочих процессов, предлагаем следующий шаг — [Управление устройствами](howto-manage-devices.md).
