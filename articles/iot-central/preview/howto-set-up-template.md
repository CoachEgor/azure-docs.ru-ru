---
title: Настройка шаблона устройства в приложении Azure IoT Central | Документация Майкрософт
description: Подробные сведения о настройке измерений, параметров, свойств, правил и панели мониторинга в шаблоне устройства.
author: sarahhubbard
ms.author: sahubbar
ms.date: 07/23/2019
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: e3925f2d6c2a1034cc96475721de7936deeb4a9d
ms.sourcegitcommit: cf36df8406d94c7b7b78a3aabc8c0b163226e1bc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/09/2019
ms.locfileid: "73895635"
---
# <a name="set-up-and-manage-a-device-template-preview-features"></a>Настройка шаблона устройства и управление им (предварительные версии компонентов)

[!INCLUDE [iot-central-pnp-original](../../../includes/iot-central-pnp-original-note.md)]

Шаблон устройства — это схема, которая определяет характеристики и поведение типа устройства, которое подключается к приложению Azure IoT Central.

Например, построитель может создать шаблон устройства для подключенного вентилятора со следующими характеристиками:

- Отправляет данные телеметрии температуры
- Отправка свойства расположения
- Отправляет события погрешного вентилятора
- Отправляет состояние работы вентилятора
- Свойство скорости вентилятора с возможностью записи
- Команда для перезагрузки устройства
- панель мониторинга, которая обеспечивает общее представление устройства.

В этом шаблоне устройства оператор может создавать и подключать реальные устройства вентиляторов. Все эти вентиляторы имеют измерения, свойства и команды, которые используются операторами для отслеживания и управления. Операторы используют панели мониторинга и формы устройства для взаимодействия с устройствами вентиляторов.

> [!NOTE]
> Только администраторы и конструкторы могут создавать, изменять и удалять шаблоны устройств. Любой пользователь может создавать устройства на странице **устройства** из существующих шаблонов устройств.

[IoT Plug and Play](../../iot-pnp/overview-iot-plug-and-play.md) позволяет IoT Central интегрировать устройства без написания кода для встроенного устройства. В основу IoT Plug and Play положена схема модели возможностей устройства, которая описывает возможности устройства. В предварительной версии приложения IoT Central шаблоны устройств используют эти модели возможностей устройств IoT Plug and Play.

Как у сборщика, у вас есть несколько вариантов создания шаблонов устройств:

- Разработайте шаблон устройства в IoT Central, а затем внедрите его модель возможностей в код вашего устройства.
- Импортируйте модель возможностей устройства из [каталога устройств, сертифицированных по программе Microsoft Azure Certified for IoT](https://aka.ms/iotdevcat), а затем добавьте все облачные свойства, настройки и панели мониторинга, необходимые вашему приложению IoT Central.
- Создайте модель возможностей устройства с помощью Visual Studio Code. Реализуйте код вашего устройства из модели. Вручную импортируйте модель возможностей устройства в приложение IoT Central, а затем добавьте все облачные свойства, настройки и панели мониторинга, необходимые этому приложению.
- Создайте модель возможностей устройства с помощью Visual Studio Code. Реализуйте код устройства на основе модели и подключите реальное устройство к IoT Centralному приложению, используя подключение "устройство — первое". IoT Central находит и импортирует модель возможностей устройства из общедоступного репозитория. Затем можно добавить любые облачные свойства, настройки и панели мониторинга, необходимые IoT Central приложении к шаблону устройства.

## <a name="create-a-device-template-from-the-device-catalog"></a>Создание шаблона устройства из каталога устройств

В качестве построителя вы можете быстро приступить к созданию решения с помощью сертифицированного устройства IoT Plug and Play, указанного в [каталоге устройств Azure IOT](https://catalog.azureiotsolutions.com/alldevices). IoT Central интегрируется с каталогом устройств, позволяя импортировать модель возможностей устройства из любого из этих Plug and Play сертифицированных устройств Интернета вещей. Чтобы создать шаблон устройства на основе одного из этих устройств в IoT Central:

1. Перейдите на страницу **шаблонов устройств** в приложении IOT Central.
1. Выберите **+ создать**, а затем выберите любой из перечисленных ниже каталогов Plug and Play сертифицированных устройств IOT. IoT Central создает шаблон устройства на основе этой модели возможностей устройства.
1. Добавьте в шаблон устройства любые облачные свойства, настройки или представления.
1. Выберите **опубликовать** , чтобы опубликовать шаблон устройства, чтобы он был доступен операторам для просмотра и подключения устройств.

## <a name="create-a-device-template-from-scratch"></a>Создание шаблона устройства с нуля

Шаблон устройства содержит:

- _Модель возможностей устройства_ , которая определяет данные телеметрии, свойства и команды, реализуемые устройством. Эти возможности организованы в один или несколько интерфейсов.
- _Свойства облака_ , определяющие сведения, которые приложение IOT Central хранит об устройствах. Например, свойство облака может записывать данные о последнем обслуживании устройства. Эти сведения никогда не используются совместно с устройством.
- _Настройки_ позволяют построителю переопределять некоторые определения в модели возможностей устройства. Например, построитель может переопределить имя свойства устройства. Имена свойств отображаются в IoT Central информационных панелях и формах.
- _Панели мониторинга и формы_ позволяют построителю создавать пользовательский интерфейс, позволяющий операторам отслеживать устройства, подключенные к приложению, и управлять ими.

Чтобы создать шаблон устройства в IoT Central, выполните следующие действия.

1. Перейдите на страницу **шаблонов устройств** в приложении IOT Central.
1. Выберите **+ создать**, а затем выберите **Пользовательский**.
1. Введите имя шаблона, например **датчик окружающей среды**.
1. Нажмите клавишу **ВВОД**. IoT Central создает пустой шаблон устройства.

## <a name="manage-a-device-template"></a>Управление шаблоном устройства

Вы можете переименовать или удалить шаблон на домашней странице шаблона.

После добавления модели возможностей устройства в шаблон ее можно опубликовать. Вы не можете подключить устройство на основе этого шаблона, чтобы операторы могли отображаться на странице **устройства** , пока шаблон не будет опубликован.

## <a name="create-a-capability-model"></a>Создание модели возможностей

Чтобы создать модель возможностей устройства, можно:

- Для создания настраиваемой модели с нуля используйте IoT Central.
- Импорт модели из JSON-файла. Построитель устройств может использовать Visual Studio Code для создания модели возможностей устройства для приложения.
- Выберите одно из устройств в каталоге устройств. Этот параметр импортирует модель возможностей устройства, опубликованную производителем для этого устройства. Модель возможностей устройства, импортированная подобным образом, будет автоматически опубликована.

## <a name="manage-a-capability-model"></a>Управление моделью возможностей

После создания модели возможностей устройства можно:

- Добавьте интерфейсы в модель. Модель должна иметь по крайней мере один интерфейс.
- Измените метаданные модели, такие как идентификатор, пространство имен и имя.
- Удалите модель.

## <a name="create-an-interface"></a>Создание интерфейса

Возможность устройства должна иметь по крайней мере один интерфейс. Интерфейс — это многократно используемый набор возможностей.

Чтобы создать интерфейс, выполните следующие действия.

1. Перейдите к модели возможностей устройства и выберите **+ добавить интерфейс**.

1. На странице **Выбор интерфейса** можно выполнить следующие действия.

    - Создание настраиваемого интерфейса с нуля.
    - Импорт существующего интерфейса из файла. Построитель устройств может использовать Visual Studio Code для создания интерфейса устройства.
    - Выберите один из стандартных интерфейсов, таких как интерфейс **сведений об устройстве** . Стандартные интерфейсы определяют возможности, общие для многих устройств. Эти стандартные интерфейсы публикуются Microsoft Azure IoT и не могут поддерживать управление версиями или изменять их.

1. После создания интерфейса выберите **изменить удостоверение** , чтобы изменить отображаемое имя интерфейса.

1. Если вы решили создать настраиваемый интерфейс с нуля, можно добавить возможности устройства. Возможности устройства — это данные телеметрии, свойства и команды.

### <a name="telemetry"></a>Телеметрия

Телеметрии — это поток значений, отправляемых с устройства, обычно из датчика. Например, датчик может сообщить о температуре окружающей среды.

В следующей таблице показаны параметры конфигурации для возможности телеметрии.

| Поле | ОПИСАНИЕ |
| ----- | ----------- |
| Отображаемое имя | Отображаемое имя для значения телеметрии, используемое на панелях мониторинга и формах. |
| Name | Имя поля в сообщении телеметрии. IoT Central создает значение для этого поля из отображаемого имени, но при необходимости можно выбрать собственное значение. |
| Тип возможности | Отслеживания. |
| Семантический тип | Семантический тип телеметрии, например "температура", "состояние" или "событие". Выбор семантического типа определяет, какие из следующих полей доступны. |
| SCHEMA (Схема) | Тип данных телеметрии, например Double, String или Vector. Доступные варианты определяются семантическим типом. Схема недоступна для типов семантических событий и состояний. |
| Уровень серьезности | Доступно только для семантического типа события. **Ошибка**, **информация**или **предупреждение**. |
| Значения состояния | Доступно только для семантического типа состояния. Определите возможные значения состояния, каждое из которых имеет отображаемое имя, имя, тип перечисления и значение. |
| Единица измерения | Единица измерения для значения телеметрии, например **миль/ч**, **%** или **&deg;C**. |
| Единица дисплея | Отображаемая единица для использования на панелях мониторинга и формах. |
| Комментарий | Любые комментарии о возможности телеметрии. |
| ОПИСАНИЕ | Описание возможности телеметрии. |

### <a name="properties"></a>свойства

Свойства представляют значения точек во времени. Например, устройство может использовать свойство для сообщения целевой температуры, к которой он пытается достичь. Записываемые свойства можно задать из IoT Central.

В следующей таблице показаны параметры конфигурации для возможности свойства.

| Поле | ОПИСАНИЕ |
| ----- | ----------- |
| Отображаемое имя | Отображаемое имя значения свойства, используемого на панелях мониторинга и формах. |
| Name | Имя свойства. IoT Central создает значение для этого поля из отображаемого имени, но при необходимости можно выбрать собственное значение. |
| Тип возможности | Свойства. |
| Семантический тип | Семантический тип свойства, например "температура", "состояние" или "событие". Выбор семантического типа определяет, какие из следующих полей доступны. |
| SCHEMA (Схема) | Тип данных свойства, например Double, String или Vector. Доступные варианты определяются семантическим типом. Схема недоступна для типов семантических событий и состояний. |
| Возможностью записи | Если свойство недоступно для записи, устройство может передавать значения свойств в IoT Central. Если свойство доступно для записи, устройство может передавать значения свойств в IoT Central и IoT Central может передавать обновления свойств на устройство.
| Уровень серьезности | Доступно только для семантического типа события. **Ошибка**, **информация**или **предупреждение**. |
| Значения состояния | Доступно только для семантического типа состояния. Определите возможные значения состояния, каждое из которых имеет отображаемое имя, имя, тип перечисления и значение. |
| Единица измерения | Единица измерения для значения свойства, например **миль/ч**, **%** или **&deg;C**. |
| Единица дисплея | Отображаемая единица для использования на панелях мониторинга и формах. |
| Комментарий | Любые комментарии о возможности свойства. |
| ОПИСАНИЕ | Описание возможности свойства. |

### <a name="commands"></a>Команды

Команды устройства можно вызывать из IoT Central. Команды при необходимости передают параметры на устройство и получают ответ от устройства. Например, можно вызвать команду для перезагрузки устройства через 10 секунд.

В следующей таблице приведены параметры конфигурации для возможности команды.

| Поле | ОПИСАНИЕ |
| ----- | ----------- |
| Отображаемое имя | Отображаемое имя команды, используемой на панелях мониторинга и формах. |
| Name | Имя команды. IoT Central создает значение для этого поля из отображаемого имени, но при необходимости можно выбрать собственное значение. |
| Тип возможности | Команда |
| Команда | Синчронаусексекутионтипе. |
| Комментарий | Любые комментарии о возможности команды. |
| ОПИСАНИЕ | Описание возможности команды. |
| Request | Если параметр включен, определение параметра запроса включает в себя: имя, отображаемое имя, схему, единицу и единицу показа. |
| Ответ | Если параметр включен, определение ответа команды включает в себя: имя, отображаемое имя, схему, единицу и единицу показа. |

## <a name="manage-an-interface"></a>Управление интерфейсом

Если интерфейс не опубликован, можно изменить возможности, определенные интерфейсом. После публикации интерфейса необходимо создать новую версию шаблона устройства и версию интерфейса, чтобы внести изменения. Изменения, которые не нуждаются в управлении версиями, такие как отображаемые имена или единицы, можно внести в раздел **Настройка** .

Вы также можете экспортировать интерфейс в виде JSON-файла, если вы хотите использовать его в другой модели возможностей.

## <a name="add-cloud-properties"></a>Добавление свойств облака

Используйте свойства облака для хранения сведений об устройствах в IoT Central. Свойства облака никогда не отправляются на устройство. Например, можно использовать свойства облака для хранения имени клиента, установившего устройство, или даты последнего обслуживания устройства.

В следующей таблице показаны параметры конфигурации для облачного свойства.

| Поле | ОПИСАНИЕ |
| ----- | ----------- |
| Отображаемое имя | Отображаемое имя для значения облачного свойства, используемого на панелях мониторинга и формах. |
| Name | Имя облачного свойства. IoT Central создает значение для этого поля из отображаемого имени, но при необходимости можно выбрать собственное значение. |
| Семантический тип | Семантический тип свойства, например "температура", "состояние" или "событие". Выбор семантического типа определяет, какие из следующих полей доступны. |
| SCHEMA (Схема) | Тип данных облачного свойства, например Double, String или Vector. Доступные варианты определяются семантическим типом. |

## <a name="add-customizations"></a>Добавление настройки

Настройки следует использовать, когда необходимо изменить импортированный интерфейс или добавить к возможности функции, относящиеся к IoT Central. Настраивать можно только те поля, которые не нарушают совместимость интерфейса. Например, вы можете просматривать:

- Настроить отображаемое имя и единицы измерения для возможности.
- Добавить цвет по умолчанию, который используется для значений на диаграмме.
- Указать начальные, минимальные и максимальные значения для свойства.

Вы не сможете изменить имя или тип возможности. Если есть изменения, которые нельзя внести в раздел " **Настройка** ", вам потребуется версия шаблона устройства и интерфейса, чтобы изменить возможность.

### <a name="generate-default-views"></a>Создание представлений по умолчанию

Представления по умолчанию позволяют быстро визуализировать важную информацию об устройстве. Для шаблона устройства будет создано до трех представлений по умолчанию:

1. **Команды** предоставляют представление с командами устройства и позволяют оператору отправлять их на устройство.
1. В разделе **Общие сведения** представлено представление телеметрии устройств, отображающее диаграммы и метрики.
1. **О программе** предоставит представление со сведениями об устройстве, отображающими свойства устройства.

Выбрав **создать представления по умолчанию** , вы увидите, что они были автоматически добавлены в раздел **представления** шаблона устройства.

## <a name="add-dashboards"></a>Добавление панелей мониторинга

Добавьте панели мониторинга в шаблон устройства, чтобы позволить операторам визуализировать устройство с помощью диаграмм и метрик. Можно использовать несколько панелей мониторинга для шаблона устройства.

Чтобы добавить панель мониторинга в шаблон устройства, выполните следующие действия.

1. Перейдите к шаблону устройства и выберите **представления**.
1. Затем выберите **визуализировать устройство**.
1. Введите имя панели мониторинга в качестве **имени панели мониторинга**.
1. Добавьте плитки на панель мониторинга из списка статических свойств, свойства облака, телеметрии и плиток команд. Перетащите плитки, которые вы хотите добавить на панель мониторинга.
1. Чтобы построить несколько значений телеметрии на одной плитке диаграммы, выберите значения телеметрии и нажмите кнопку **объединить**.
1. Настройте каждую плитку, добавляемую для настройки отображения данных, щелкнув значок шестеренки или нажав кнопку **изменить конфигурацию** на плитке диаграммы.
1. Упорядочите плитки и измените их размер на панели мониторинга.
1. Сохраните изменения.

### <a name="configure-preview-device-to-view-dashboard"></a>Настройка предварительной версии устройства для просмотра панели мониторинга

Чтобы просмотреть и протестировать панель мониторинга, можно выбрать пункт **настроить предварительный просмотр устройства**. Это позволит увидеть панель мониторинга в том виде, в котором оператор будет видеть после публикации. Этот параметр позволяет проверить отображение правильных данных в представлениях. Вы можете выбрать устройство без предварительной версии, реальное тестовое устройство, настроенное для шаблона устройства, или существующее устройство в приложении с помощью идентификатора устройства.

## <a name="add-forms"></a>Добавление форм

Добавьте формы в шаблон устройства, чтобы разрешить операторам управлять устройством, просмотрев и устанавливая свойства. Операторы могут изменять только свойства облака и записываемые свойства устройства. Можно использовать несколько форм для шаблона устройства.

Чтобы добавить форму в шаблон устройства, выполните следующие действия.

1. Перейдите к шаблону устройства и выберите **представления**.
1. Затем выберите пункт **изменение данных устройства и облачные данные**.
1. Введите имя формы в качестве **имени формы**.
1. Выберите число столбцов, которое будет использоваться при создании макета формы.
1. Добавьте свойства в существующий раздел формы или выберите свойства и щелкните **Добавить раздел**. Используйте разделы для группировки свойств в форме. В раздел можно добавить заголовок.
1. Настройте каждое свойство в форме, чтобы настроить его поведение.
1. Расположите свойства в форме.
1. Сохраните изменения.

## <a name="publish-a-device-template"></a>Публикация шаблона устройства

Перед подключением устройства, реализующего модель возможностей устройства, необходимо опубликовать шаблон устройства.

После публикации шаблона устройства можно вносить только ограниченные изменения в модель возможностей устройства. Чтобы изменить интерфейс, необходимо [создать и опубликовать новую версию](./howto-version-device-template.md).

Чтобы опубликовать шаблон устройства, перейдите к шаблону устройства и выберите **опубликовать**.

После публикации шаблона устройства оператор может открыть страницу **устройства** и добавить либо реальные, либо эмулированные устройства, использующие шаблон устройства. Вы можете продолжить изменение и сохранение шаблона устройства при внесении изменений. Однако если вы хотите отправить эти изменения в оператор для просмотра на странице **устройства** , необходимо выбрать вариант **опубликовать** каждый раз.

## <a name="next-steps"></a>Дополнительная информация

Вы узнали, как настраивать шаблон устройства в приложении Azure IoT Central, а значит вы готовы к следующему шагу:

> [!div class="nextstepaction"]
> [Создание новой версии шаблона устройства](howto-version-device-template.md)
> [Подключение устройства MXChip IOT DevKit к приложению Azure IOT Central](howto-connect-devkit.md)
