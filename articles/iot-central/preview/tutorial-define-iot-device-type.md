---
title: Определение нового типа устройства Интернета вещей в Azure IoT Central | Документация Майкрософт
description: В этом учебнике показано, как сборщики могут создать новый тип устройства Интернета вещей Azure в приложении Azure IoT Central. Вы определите данные телеметрии, состояние, свойства и команды для своего типа.
author: rangv
ms.author: rangv
ms.date: 12/09/2019
ms.topic: tutorial
ms.service: iot-central
services: iot-central
ms.custom: mvc
manager: peterpr
ms.openlocfilehash: 2127bec4d5fdf0d3bf76fb31c548eab98f910d42
ms.sourcegitcommit: 5ab4f7a81d04a58f235071240718dfae3f1b370b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2019
ms.locfileid: "74979025"
---
# <a name="tutorial-define-a-new-iot-device-type-in-your-azure-iot-central-application-preview-features"></a>Руководство по Определение нового типа устройства Интернета вещей в приложении Azure IoT Central (предварительная версия функций)

[!INCLUDE [iot-central-pnp-original](../../../includes/iot-central-pnp-original-note.md)]

Шаблон устройства — это схема, которая определяет характеристики и поведение типа устройства, которое подключается к приложению Azure IoT Central.

Например, сборщик может создать шаблон устройства для подключенного вентилятора со следующими возможностями и компонентами:

- отправка данных телеметрии температуры;
- отправка свойства расположения;
- отправка событий ошибки двигателя вентилятора;
- отправка состояния работы вентилятора;
- предоставление свойства скорости вращения вентилятора с возможностью записи;
- предоставление команды для перезагрузки устройства;
- предоставление панели мониторинга, которая обеспечивает общее представление устройства.

На основе этого шаблона устройства можно создавать и подключать реальные вентиляторы. Все эти вентиляторы имеют измерения, свойства и команды, которые операторы используют для отслеживания их работы и управления ими. Операторы используют панели мониторинга и формы устройства для взаимодействия с устройствами вентиляторов.

> [!NOTE]
> Только администраторы и конструкторы могут создавать, изменять и удалять шаблоны устройств. На странице **Устройства** любой пользователь может создавать устройства на основе имеющихся шаблонов устройств.

[IoT Plug and Play](../../iot-pnp/overview-iot-plug-and-play.md) позволяет IoT Central интегрировать устройства без написания кода для встроенного устройства. В основу IoT Plug and Play положена схема модели возможностей устройства, которая описывает возможности устройства. В предварительной версии приложения IoT Central шаблоны устройств используют эти модели возможностей устройств IoT Plug and Play.

Как у сборщика, у вас есть несколько вариантов создания шаблонов устройств:

- Разработайте шаблон устройства в IoT Central, а затем внедрите его модель возможностей в код своего устройства.
- Импортируйте модель возможностей устройства из [каталога устройств Azure Certified for IoT](https://aka.ms/iotdevcat). Затем добавьте любые облачные свойства, настройки и панели мониторинга, необходимые приложению IoT Central.
- Создайте модель возможностей устройства с помощью Visual Studio Code. Реализуйте код вашего устройства из модели. Вручную импортируйте модель возможностей устройства в приложение IoT Central, а затем добавьте все облачные свойства, настройки и панели мониторинга, необходимые этому приложению.
- Создайте модель возможностей устройства с помощью Visual Studio Code. Реализуйте код устройства из модели и подключите устройство к приложению IoT Central, используя подключение нового устройства. IoT Central находит и импортирует модель возможностей устройства из общедоступного репозитория. Затем можно добавить любые облачные свойства, настройки и панели мониторинга, необходимые приложению IoT Central, в шаблон устройства.

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим учебником вам потребуется [создать приложение Azure IoT Central](quick-deploy-iot-central.md).

## <a name="create-a-device-template-from-the-device-catalog"></a>Создание шаблона устройства из каталога устройств

Вы (как сборщик) можете быстро приступить к созданию решения с использованием сертифицированного устройства IoT Plug and Play. Ознакомьтесь со списком в [каталоге устройств Azure IoT](https://catalog.azureiotsolutions.com/alldevices). IoT Central интегрируется с каталогом устройств, что позволяет импортировать модель возможностей устройства с любого из этих сертифицированных устройств IoT Plug and Play. Чтобы создать шаблон устройства из одного из этих устройств в IoT Central, сделайте следующее:

1. Перейдите на страницу **Шаблоны устройств** в приложении IoT Central.
1. Щелкните **+ Создать**, а затем выберите любое из сертифицированных устройств IoT Plug and Play из каталога. IoT Central создает шаблон устройства на основе этой модели возможностей устройства.
1. Добавьте в шаблон устройства любые свойства облака, настройки или представления.
1. Щелкните **Опубликовать**, чтобы шаблон стал доступен операторам для просмотра и подключения устройств.

## <a name="create-a-device-template-from-scratch"></a>Создание шаблона устройства с нуля

Шаблон устройства содержит следующее:

- _Модель возможностей устройства_, определяющая телеметрию, свойства и команды, реализуемые устройством. Эти возможности упорядочены в виде одного или нескольких интерфейсов.
- _Свойства облака_, определяющие сведения, которые хранятся в приложении IoT Central для ваших устройств. Например, свойство облака может записывать данные о последнем обслуживании устройства. Эти сведения никогда не предоставляются устройству.
- _Настройки_ позволяют сборщику переопределять некоторые определения в модели возможностей устройства. Например, он может переопределить имя свойства устройства. Имена свойств отображаются на панелях мониторинга и в формах IoT Central.
- _Панели мониторинга и формы_, позволяющие сборщику создавать пользовательский интерфейс, чтобы операторы могли отслеживать устройства, подключенные к приложению, и управлять ими.

Чтобы создать шаблон устройства в IoT Central, сделайте следующее.

1. Перейдите на страницу **Шаблоны устройств** в приложении IoT Central.
1. Выберите **+ Создать** > **Пользовательский**.
1. Введите имя шаблона, например **Датчик окружающей среды**.
1. Нажмите клавишу **ВВОД**. IoT Central создаст пустой шаблон устройства.

## <a name="manage-a-device-template"></a>Управление шаблоном устройства

Вы можете переименовать или удалить шаблон на его домашней странице.

После добавления модели возможностей устройства в шаблон ее можно опубликовать. Пока вы не опубликуете шаблон, вы не сможете подключить устройство на основе этого шаблона, чтобы операторы могли видеть его на странице **Устройства**.

## <a name="create-a-capability-model"></a>Создание модели возможностей

Создать модель возможностей устройства можно таким образом:

- Используйте IoT Central для создания настраиваемой модели с нуля.
- Импортируйте модель из JSON-файла. Сборщик устройств может создавать модель возможностей устройства для приложения с помощью Visual Studio Code.
- Выберите одно из устройств в каталоге устройств. При использовании этого варианта импортируется модель возможностей устройства, опубликованная производителем для этого устройства. Модель возможностей устройства, импортированная подобным образом, публикуется автоматически.

## <a name="manage-a-capability-model"></a>Управление моделью возможностей

После создания модели возможностей устройства можно сделать следующее:

- Добавить интерфейсы в модель. Модель должна иметь по крайней мере один интерфейс.
- Изменить метаданные модели, такие как идентификатор, пространство имен и имя.
- Удалить модель.

## <a name="create-an-interface"></a>Выбор интерфейса

Модель возможностей устройства должна иметь по крайней мере один интерфейс. Интерфейс — это многократно используемый набор возможностей.

Чтобы создать интерфейс, сделайте следующее:

1. Перейдите к модели возможностей устройства и выберите **+ Добавить интерфейс**.

1. На странице **Выбор интерфейса** можно выполнить следующие действия:

    - Создать настраиваемый интерфейс с нуля.
    - Импортировать имеющийся интерфейс из файла. Сборщик устройств может создавать интерфейс для вашего устройства с помощью Visual Studio Code.
    - Выбрать один из стандартных интерфейсов, например интерфейс **Сведения об устройстве**. Стандартные интерфейсы определяют возможности, общие для многих устройств. Эти интерфейсы публикуются с помощью Azure IoT и не поддерживают управление версиями или изменения.

1. Создав интерфейс, щелкните **Изменить удостоверение**, чтобы изменить отображаемое имя интерфейса.

1. При создании настраиваемого интерфейса с нуля можно добавить возможности устройства. Возможности устройства — это данные телеметрии, свойства и команды.

### <a name="telemetry"></a>Телеметрия

Телеметрия — это поток значений, отправляемых с устройства (обычно из датчика). Например, датчик может передавать температуру окружающей среды.

В следующей таблице показаны параметры конфигурации для возможностей телеметрии.

| Поле | ОПИСАНИЕ |
| ----- | ----------- |
| Отображаемое имя | Отображаемое имя для значения телеметрии, используемое на панелях мониторинга и формах. |
| ИМЯ | Имя поля в сообщении телеметрии. IoT Central создает значение для этого поля на основе отображаемого имени, но при необходимости можно выбрать собственное значение. |
| Тип возможности | Телеметрия. |
| Семантический тип | Семантический тип телеметрии, например температура, состояние или событие. Выбор семантического типа определяет, какие из следующих полей будут доступны. |
| Схема | Тип данных телеметрии, например double, string или vector. Доступные варианты определяются семантическим типом. Для семантических типов событий и состояний схема недоступна. |
| Уровень серьезности | Доступно только для семантического типа события. Возможны такие степени серьезности: **Ошибка**, **Сведения** или **Предупреждение**. |
| Значения состояния | Доступно только для семантического типа состояния. Определите возможные значения состояния, для каждого из которых есть отображаемое имя, название, тип перечисления и значение. |
| Единица измерения | Единица измерения для значения телеметрии, например **мили/ч**, **%** или **&deg;C**. |
| Единица отображения | Отображаемая единица для использования на панелях мониторинга и в формах. |
| Комментарий | Любые комментарии о возможности "Телеметрия". |
| ОПИСАНИЕ | Описание возможности "Телеметрия". |

### <a name="properties"></a>properties

Свойства представляют собой значения на момент во времени. Например, устройство может использовать свойство для передачи значения целевой температуры, которого пытается достичь устройство. Записываемые свойства можно задать в IoT Central.

В следующей таблице показаны параметры конфигурации для возможности "Свойства".

| Поле | ОПИСАНИЕ |
| ----- | ----------- |
| Отображаемое имя | Отображаемое имя для значения свойств, используемое на панелях мониторинга и в формах. |
| ИМЯ | Имя свойства. IoT Central создает значение для этого поля на основе отображаемого имени, но при необходимости можно выбрать собственное значение. |
| Тип возможности | Свойство. |
| Семантический тип | Семантический тип свойства, например температура, состояние или событие. Выбор семантического типа определяет, какие из следующих полей будут доступны. |
| Схема | Тип данных свойства, например double, string или vector. Доступные варианты определяются семантическим типом. Для семантических типов событий и состояний схема недоступна. |
| Writeable (Доступно для записи) | Если свойство недоступно для записи, устройство может передавать значения свойств в IoT Central. Если свойство доступно для записи, устройство может передавать значения свойств в IoT Central, а IoT Central может передавать обновленные свойства на устройство.
| Уровень серьезности | Доступно только для семантического типа события. Возможны такие степени серьезности: **Ошибка**, **Сведения** или **Предупреждение**. |
| Значения состояния | Доступно только для семантического типа состояния. Определите возможные значения состояния, для каждого из которых есть отображаемое имя, название, тип перечисления и значение. |
| Единица измерения | Единица измерения для значения свойства, например **мили/ч**, **%** или **&deg;C**. |
| Единица отображения | Отображаемая единица для использования на панелях мониторинга и в формах. |
| Комментарий | Любые комментарии о возможности "Свойство". |
| ОПИСАНИЕ | Описание возможности "Свойство". |

### <a name="commands"></a>Команды

Команды устройства можно вызывать в IoT Central. Команды при необходимости передают параметры на устройство и получают от него ответ. Например, можно вызвать команду для перезагрузки устройства через 10 секунд.

В следующей таблице показаны параметры конфигурации для возможности "Команда".

| Поле | ОПИСАНИЕ |
| ----- | ----------- |
| Отображаемое имя | Отображаемое имя для команды, используемое на панелях мониторинга и в формах. |
| ИМЯ | Имя команды. IoT Central создает значение для этого поля на основе отображаемого имени, но при необходимости можно выбрать собственное значение. |
| Тип возможности | Команда |
| Команда | `SynchronousExecutionType`. |
| Комментарий | Любые комментарии о возможности "Команда". |
| ОПИСАНИЕ | Описание возможности "Команда". |
| Запрос | Если параметр включен, определение параметра запроса включает в себя: название, отображаемое имя, схему, единицу измерения и отображаемую единицу. |
| Ответ | Если параметр включен, определение ответа команды включает в себя: название, отображаемое имя, схему, единицу измерения и отображаемую единицу. |

## <a name="manage-an-interface"></a>Управление интерфейсом

Если интерфейс не опубликован, определяемые им возможности можно изменить. Чтобы внести изменения после публикации интерфейса, необходимо создать другую версию шаблона устройства и версию интерфейса. Изменения, для которых не требуется управление версиями, такие как отображаемые имена или единицы, можно выполнить в разделе **Настройка**.

Вы также можете экспортировать интерфейс в виде JSON-файла, если хотите использовать его в другой модели возможностей.

## <a name="add-cloud-properties"></a>Добавление свойств облака

Свойства облака можно использовать для хранения сведений об устройствах в IoT Central. Свойства облака никогда не отправляются на устройство. Например, свойства облака можно использовать для хранения имени клиента, установившего устройство, или даты последнего обслуживания устройства.

В следующей таблице показаны параметры конфигурации для свойства облака.

| Поле | ОПИСАНИЕ |
| ----- | ----------- |
| Отображаемое имя | Отображаемое имя для значения свойств облака, используемое на панелях мониторинга и в формах. |
| ИМЯ | Имя свойства облака. IoT Central создает значение для этого поля на основе отображаемого имени, но при необходимости можно выбрать собственное значение. |
| Семантический тип | Семантический тип свойства, например температура, состояние или событие. Выбор семантического типа определяет, какие из следующих полей будут доступны. |
| Схема | Тип данных свойства облака, например double, string или vector. Доступные варианты определяются семантическим типом. |

## <a name="add-customizations"></a>Добавление настройки

С помощью настроек можно изменить импортированный интерфейс или добавить функции IoT Central для возможности. Настраивать можно только те поля, которые не нарушают совместимость интерфейса. Например, вы можете просматривать:

- Настроить отображаемое имя и единицы измерения для возможности.
- Добавить цвет по умолчанию, который используется для значений на диаграмме.
- Указать начальные, минимальные и максимальные значения для свойства.

Вы не сможете изменить имя или тип возможности. Если есть изменения, которые нельзя внести в разделе **Настройка**, вам потребуется создать версию шаблона устройства и интерфейса, чтобы изменить эту возможность.

### <a name="generate-default-views"></a>Создание представлений по умолчанию

Представления по умолчанию позволяют быстро визуализировать важную информацию об устройстве. Для шаблона устройства можно создать до трех представлений по умолчанию.

- **Команды** — представление с командами устройства, которое позволяет оператору отправлять их на устройство.
- **Обзор** — представление с данными телеметрии устройства, в котором отображаются диаграммы и метрики.
- **Об устройстве** — представление со сведениями об устройстве, содержащее свойства устройства.

Выбрав действие **Создать представления по умолчанию**, представления автоматически добавляются в раздел **Представления** в шаблоне устройства.

## <a name="add-dashboards"></a>Добавление панелей мониторинга

Добавьте панели мониторинга в шаблон устройства, чтобы позволить операторам визуализировать работу устройства с помощью диаграмм и метрик. Для шаблона устройства можно использовать несколько панелей мониторинга.

Чтобы добавить панель мониторинга в шаблон устройства, сделайте следующее:

1. Перейдите к шаблону устройства и щелкните **Представления**.
1. Щелкните **Визуализация устройства**.
1. Введите имя панели мониторинга в поле **Имя панели мониторинга**.
1. Добавьте плитки на панель мониторинга из списка плиток статических свойств, свойств облака, телеметрии и команд. Перетащите плитки, которые вы хотите добавить на панель мониторинга.
1. Чтобы создать график нескольких значений телеметрии на одной плитке, выберите значения телеметрии и нажмите кнопку **Объединить**.
1. Настройте каждую добавляемую плитку, указав для нее метод отображения данных. Для этого щелкните значок шестеренки или нажмите кнопку **Изменить конфигурацию** на плитке графика.
1. Упорядочьте плитки и измените их размер на панели мониторинга.
1. Сохраните изменения.

### <a name="configure-preview-device-to-view-dashboard"></a>Настройка предварительной версии устройства для просмотра панели мониторинга

Чтобы просмотреть и проверить панель мониторинга, выберите **Configure preview device** (Настройка предварительной версии устройства). Это позволяет просматривать панель мониторинга так, как ее видит оператор после публикации. Используйте этот параметр, чтобы проверить, отображаются ли в представлениях правильные данные. Вы можете выбрать один из следующих параметров:

- устройство без предварительной версии;
- реальное устройство для тестирования, настроенное для шаблона устройства;
- имеющееся устройство в приложении (с указанием идентификатора устройства).

## <a name="add-forms"></a>Добавление форм

Добавьте формы в шаблон устройства, чтобы операторы могли управлять устройством путем просмотра и настройки свойств. Операторы могут изменять только свойства облака и доступные для записи свойства устройства. Для шаблона устройства можно использовать несколько форм.

Чтобы добавить форму в шаблон устройства, сделайте следующее:

1. Перейдите к шаблону устройства и щелкните **Представления**.
1. Щелкните **Изменение устройства и облачных данных**.
1. Введите имя формы в поле **Имя формы**.
1. Выберите число столбцов, которое будет использоваться при создании макета формы.
1. Добавьте свойства в имеющийся раздел формы или выберите свойства и нажмите кнопку **Добавить раздел**. Используйте разделы для группировки свойств в форме. В раздел можно добавить заголовок.
1. Настройте каждое свойство в форме, чтобы изменить его поведение.
1. Расположите свойства в форме нужным образом.
1. Сохраните изменения.

## <a name="publish-a-device-template"></a>Публикация шаблона устройства

Прежде чем подключать устройство, реализующее модель возможностей устройства, необходимо опубликовать шаблон устройства.

После публикации шаблона устройства можно вносить только ограниченные изменения в модель возможностей устройства. Чтобы изменить интерфейс, необходимо [создать и опубликовать новую версию](./howto-version-device-template.md).

Чтобы опубликовать шаблон устройства, перейдите к его шаблону и нажмите кнопку **Опубликовать**.

После публикации шаблона устройства оператор может перейти на страницу **Устройства** и добавить реальные или имитированные устройства, использующие шаблон устройства. Вы можете продолжать изменять и сохранять шаблон устройства по мере внесения изменений. Если вы хотите отправить эти изменения оператору для просмотра на странице **Устройства**, необходимо каждый раз выбирать **Опубликовать**.

## <a name="define-a-new-iot-gateway-device-type-preview-features"></a>Определение нового типа устройства шлюза Интернета вещей (функции предварительной версии)

[!INCLUDE [iot-central-pnp-original](../../../includes/iot-central-pnp-original-note.md)]

В этом учебнике показано, как с помощью шаблона устройства шлюза сборщики могут определить новый тип устройства Интернета вещей в приложении IoT Central. 

В этом разделе вы создадите шаблон устройства **Smart Building** (Интеллектуальное здание). Устройство шлюза "Интеллектуальное здание":

* отправляет данные телеметрии, например температуру и присутствие;
* реагирует на доступные к записи свойства при обновлении в облаке, например интервал отправки телеметрии;
* реагирует на такие команды, как сброс температуры;
* разрешает связи с другими моделями возможностей устройства.

### <a name="create-iot-device-templates"></a>Создание шаблонов устройств Интернета вещей

Вот как можно создать шаблоны устройств Интернета вещей: 

1. Щелкните **Шаблоны устройств** на панели навигации слева. Затем выберите **+ Создать**, щелкните плитку **Устройство IoT**, а затем датчик присутствия. По завершении выберите **Next: Настройка**.

   ![Снимок экрана: параметры и страница "Шаблоны устройств"](./media/tutorial-define-iot-device-type/gateway-downstream-new.png)

1. На странице **Отзыв** выберите **Создать**. 

   ![Снимок экрана со страницей отзыва](./media/tutorial-define-iot-device-type/gateway-downstream-review.png)

1. Шаблон устройства создан. 

   ![Снимок экрана: новый шаблон устройства](./media/tutorial-define-iot-device-type/occupancy-sensor.png)

Вот как можно создать шаблон устройства для датчика S1:

1. Щелкните **Шаблоны устройств** на панели навигации слева. Затем выберите **+ Создать**, щелкните плитку **Устройство IoT**, а затем выберите датчик присутствия. По завершении выберите **Next: Настройка**.

   ![Снимок экрана: параметры и страница "Шаблоны устройств"](./media/tutorial-define-iot-device-type/s1-sensor.png)

1. На странице **Отзыв** выберите **Создать**. 

   ![Снимок экрана со страницей отзыва](./media/tutorial-define-iot-device-type/s1-review.png)

1. Шаблон устройства создан. 

   ![Снимок экрана: новый шаблон устройства](./media/tutorial-define-iot-device-type/s1-template.png)

## <a name="create-an-iot-gateway-device-template"></a>Создание шаблона устройства шлюза Интернета вещей

Вы можете создать шаблон устройства шлюза Интернета вещей. Устройство шлюза имеет связи с подчиненными устройствами, которые подключаются к IoT Central через устройство шлюза. 

### <a name="downstream-device-relationships-with-gateway-device"></a>Связи подчиненных устройств с устройством шлюза

Устройства Интернета вещей могут подключаться к устройству шлюза Интернета вещей.

![Схема связи между устройством шлюза и подчиненными устройствами](./media/tutorial-define-iot-device-type/gatewaypattern.png)

Вы (как сборщик) можете создавать и редактировать шаблоны устройств шлюза Интернета вещей в своем приложении. После публикации шаблона устройства вы можете подключить реальные устройства, реализующие этот шаблон устройства.

### <a name="select-a-device-template-type"></a>Выбор типа шаблона устройства 

Чтобы добавить новый шаблон устройства в приложение, сделайте следующее.

1. Выберите вкладку **Шаблоны устройств** на панели слева.

   ![Снимок экрана: страница "Шаблоны устройств"](./media/tutorial-define-iot-device-type/devicetemplate.png)

1. Выберите **+ Создать**, чтобы создать шаблон устройства.

   ![Снимок экрана: страница "Шаблоны устройств" с выделенным элементом "Создать"](./media/tutorial-define-iot-device-type/devicetemplatenew.png)

   ![Снимок экрана: страница "Настройка" устройства](./media/tutorial-define-iot-device-type/gateway-review.png)

1. На странице **Выбрать тип шаблона** выберите **Azure IoT**, а затем щелкните **Далее: Настройка**.

   ![Снимок экрана: страница "Выбрать тип шаблона"](./media/tutorial-define-iot-device-type/gateway-customize.png)

1. Установите флажок шлюза и выберите **Создать**.

   ![Снимок экрана: страница "Настройка" устройства с выделенным шлюзом](./media/tutorial-define-iot-device-type/gateway-review.png)

1. На странице "Отзыв" выберите **Создать**. 

1. Введите имя шаблона шлюза **Шаблон шлюза интеллектуального здания**. Щелкните плитку **Пользовательский**.

1. Добавьте стандартный интерфейс **Сведения об устройстве**.

### <a name="add-relationships"></a>Добавление связей

Вы можете добавить связи подчинения к моделям возможностей устройства для устройств, которые подключаются к устройству шлюза.

Создайте связи с подчиненными моделями возможностей устройства. Щелкните **Сохранить**.

![Снимок экрана: "Шаблон шлюза интеллектуального здания" с несколькими выделенными параметрами](./media/tutorial-define-iot-device-type/gateway-occupancy-s1-rel.png)

### <a name="add-cloud-properties"></a>Добавление свойств облака

Шаблон устройства может содержать свойства облака. Свойства облака существуют только в приложении IoT Central и никогда не отправляются на устройство и не принимаются с него.

1. Выберите **Свойства облака** >  **+ Add Cloud Property** (+ Добавить облачное свойство). Воспользуйтесь сведениями в следующей таблице, чтобы добавить свойство облака в шаблон устройства.

    | Отображаемое имя      | Семантический тип | Схема |
    | ----------------- | ------------- | ------ |
    | Дата последнего обслуживания | Нет          | Дата   |
    | Имя клиента.     | Нет          | Строка, |

2. Щелкните **Сохранить**.

### <a name="add-customizations"></a>Добавление настройки

С помощью настроек можно изменить интерфейс или добавить функции IoT Central для возможности, которая не требует создания новой версии модели возможностей устройства. Вы можете изменять поля, когда модель возможностей находится в черновом или опубликованном состоянии. Настраивать можно только те поля, которые не нарушают совместимость интерфейса. Например, вы можете просматривать:

- Настроить отображаемое имя и единицы измерения для возможности.
- Добавить цвет по умолчанию, который используется для значений на диаграмме.
- Указать начальные, минимальные и максимальные значения для свойства.

Вы не сможете изменить имя или тип возможности.

По завершении настройки нажмите кнопку **Сохранить**.

### <a name="create-views"></a>Создание представлений

Вы (как разработчик) можете настроить в приложении отображение для оператора сведений о подключенном датчике среды. Ваши настройки позволят оператору управлять устройствами датчиков среды, подключенными к приложению. Вы можете создать два типа представлений, которые позволят оператору взаимодействовать с устройствами.

* Формы для просмотра и редактирования свойств устройства и облака.
* Панели мониторинга для визуализации устройств.

### <a name="generate-default-views"></a>Создание представлений по умолчанию

Если выбрать параметр **Создать представления по умолчанию** можно создать панели мониторинга **Обзор** и **Об устройстве**. 

## <a name="publish-a-device-template"></a>Публикация шаблона устройства

Прежде чем создать имитированный датчик среды или подключить реальный датчик, необходимо опубликовать шаблон устройства.

Для публикации шаблона устройства сделайте следующее:

1. Откройте шаблон устройства на странице **Шаблоны устройств**.

2. Нажмите кнопку **Опубликовать**.

3. В диалоговом окне **Publish a Device Template** (Публикация шаблона устройства) щелкните **Опубликовать**.

После публикации шаблона устройства он отображается на странице **Устройства** и в представлении для оператора. В опубликованном шаблоне устройства уже нельзя изменить модель возможностей устройства без создания новой версии. Но вы можете вносить изменения в свойства облака, настройки и представления в шаблоне опубликованного устройства. Эти обновления не приводят к созданию версии. После внесения изменений щелкните **Опубликовать**, чтобы передать эти изменения оператору.

## <a name="create-a-gateway-simulated-device"></a>Создание имитированного устройства шлюза

В обозревателе устройств создайте имитируемый шлюз интеллектуального здания. 

![Снимок экрана диалогового окна создания устройства](./media/tutorial-define-iot-device-type/smartbuildingdevice.png)

## <a name="create-downstream-simulated-devices"></a>Создание подчиненных имитированных устройств

В обозревателе устройств создайте имитируемый датчик присутствия. 

![Снимок экрана диалогового окна создания устройства](./media/tutorial-define-iot-device-type/occupancydevice.png)

В обозревателе устройств создайте имитируемый датчик S1. 

![Снимок экрана диалогового окна создания устройства](./media/tutorial-define-iot-device-type/s1device.png)

## <a name="add-downstream-devices-relationships-to-a-gateway-device"></a>Добавление связей подчиненных устройств к устройству шлюза

Выберите датчик S1 и датчик присутствия и щелкните раздел **Connect to gateway** (Подключиться к шлюзу). 

![Снимок экрана: датчик присутствия с выделенным параметром Connect to gateway (Подключиться к шлюзу)](./media/tutorial-define-iot-device-type/connecttogateway.png)

Выберите шаблон устройства шлюза, экземпляр устройства шлюза и щелкните **Присоединиться**.

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:

* создание шлюза Интернета вещей в качестве шаблона устройства;
* создание свойств облака;
* создание настроек;
* определение визуализации для данных телеметрии устройства;
* добавление связей;
* публикация шаблона устройства.

Далее вы можете выполнить такую задачу:

> [!div class="nextstepaction"]
> [Подключение устройства](tutorial-connect-pnp-device.md)
