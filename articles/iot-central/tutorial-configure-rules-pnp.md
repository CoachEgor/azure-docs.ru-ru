---
title: Настройка правил и действий в Azure IoT Central | Документация Майкрософт
description: В этом руководстве показано, как разработчику настраивать правила и действия на основе телеметрии в своем приложении Azure IoT Central.
author: dominicbetts
ms.author: dobett
ms.date: 08/06/2019
ms.topic: tutorial
ms.service: iot-central
services: iot-central
ms.custom: mvc
manager: philmea
ms.openlocfilehash: c2aa6edfe7ce9b670ea1015e2da72f3ecc48c9ec
ms.sourcegitcommit: b3bad696c2b776d018d9f06b6e27bffaa3c0d9c3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2019
ms.locfileid: "69878835"
---
# <a name="tutorial-configure-rules-and-actions-for-your-device-in-azure-iot-central-preview-features"></a>Руководство по настройке правил и действий для устройства в Azure IoT Central (предварительные версии функций)

*Эта статья предназначена для операторов, разработчиков и администраторов.*

[!INCLUDE [iot-central-pnp-original](../../includes/iot-central-pnp-original-note.md)]

В этом учебнике вы создадите правило, которое отправляет сообщение электронной почты, когда температура на датчике окружающей среды превышает 90&deg; F.

Из этого руководства вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создание правила на основе телеметрии
> * Добавление действия

## <a name="prerequisites"></a>Предварительные требования

Перед началом необходимо выполнить действия из учебника по [определению нового типа устройства в приложении](tutorial-define-device-type-pnp.md?toc=/azure/iot-central-pnp/toc.json&bc=/azure/iot-central-pnp/breadcrumb/toc.json), чтобы создать для работы шаблон устройства **Датчик окружающей среды**.

## <a name="create-a-telemetry-based-rule"></a>Создание правила на основе телеметрии

1. Чтобы добавить новое правило на основе телеметрии в приложение, в меню навигации слева выберите **Правила**.

1. Чтобы создать правило, выберите **+ Создать**. Затем выберите **Телеметрия**.

1. Введите в качестве имени правила **Температура среды**.

1. В разделе **Область** выберите **Датчик окружающей среды** в качестве шаблона устройства. Область, к устройствам которой применяется это правило. Дополнительные условия фильтра можно добавить с помощью элемента **+ Фильтр**.

1. В разделе **Условие** определите условие, при котором будет активировано правило. Определите условие на основе телеметрии температуры, используя приведенные ниже сведения.

    | Поле                                        | Значение                             |
    | -------------------------------------------- | ------------------------------    |
    | Измерения                                  | температура;                       |
    | Оператор                                     | больше                   |
    | Значение                                        | 90                                |

    Чтобы добавить дополнительные условия, выберите **+ Условие**.

    ![Создание условия для правила](./media/tutorial-configure-rules-pnp/condition.png)

1. Чтобы добавить действие, выполняемое при активировании правила, выберите **+ Действие**, а затем — **Электронная почта**.

1. Определите действие, используя сведения в следующей таблице.

    | Параметр   | Значение                                             |
    | --------- | ------------------------------------------------- |
    | Кому        | Ваш адрес электронной почты                                |
    | Примечания     | Температура среды превысила пороговое значение. |

    > [!NOTE]
    > Чтобы получить уведомление по электронной почте, адрес электронной почты должен быть [идентификатором пользователя в приложении](howto-administer-pnp.md?toc=/azure/iot-central-pnp/toc.json&bc=/azure/iot-central-pnp/breadcrumb/toc.json), а пользователь должен выполнить вход в приложение по крайней мере один раз.

    ![Создание действия для правила](./media/tutorial-configure-rules-pnp/action.png)

1. Щелкните **Сохранить**. Ваше правило будет указано на странице **Правила**.

## <a name="test-the-rule"></a>Тестирование правила

Вскоре после сохранения правила оно станет активным. При соблюдении условий, заданных в правиле, приложение отправляет сообщение на адрес электронной почты, указанный в действии.

> [!NOTE]
> Когда завершите тестирование, отключите правило, чтобы не получать уведомления в папке входящих сообщений.

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:

* Создание правила на основе телеметрии
* Добавление действия

Теперь, когда вы определили правило на основе порогового значения, рекомендуется выполнить такой следующий шаг:

> [!div class="nextstepaction"]
> [Создание правила на основе события и настройка уведомлений в приложении Azure IoT Central](howto-create-event-rules-pnp.md?toc=/azure/iot-central-pnp/toc.json&bc=/azure/iot-central-pnp/breadcrumb/toc.json)
