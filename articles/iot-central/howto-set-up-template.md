---
title: Настройка шаблона устройства в приложении Azure IoT Central | Документация Майкрософт
description: Подробные сведения о настройке измерений, параметров, свойств, правил и панели мониторинга в шаблоне устройства.
author: viv-liu
ms.author: viviali
ms.date: 06/19/2019
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: d27fd9460685c08a2b13936415935f5aaf893797
ms.sourcegitcommit: dda9fc615db84e6849963b20e1dce74c9fe51821
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/08/2019
ms.locfileid: "67622414"
---
# <a name="set-up-a-device-template"></a>Настройка шаблона устройства

Шаблон устройства — это схема, которая определяет характеристики и поведение типа устройства, которое подключается к приложению Azure IoT Central.

Например построитель можно создать шаблон устройств для подключенных вентилятора, имеет следующие характеристики:

- измерение телеметрии температуры;
- Расположение измерения
- измерение событий ошибки двигателя вентилятора;
- измерение состояния работы вентилятора;
- параметр скорости вентилятора;
- правила отправки оповещений;
- панель мониторинга, которая обеспечивает общее представление устройства.

На основе этого шаблона устройства можно создавать и подключать реальные вентиляторы с такими именами, как **fan-1** и **fan-2**. Все эти вентиляторы имеют измерения, параметры, свойства, правила и панель мониторинга, которые пользователи приложения могут отслеживать и контролировать.

> [!NOTE]
> Только администраторы и конструкторы могут создавать, изменять и удалять шаблоны устройств. Любой пользователь может создавать устройства на странице **Device Explorer** из имеющихся шаблонов устройств.

## <a name="create-a-device-template"></a>Создание шаблона устройства

1. Перейдите на страницу **Шаблоны устройств**.

2. Чтобы создать шаблон, сначала выберите **+ создать**.

3. Чтобы быстро начать работу, выберите из существующих предварительно созданных шаблонов. В противном случае выберите **Custom**, введите имя и нажмите кнопку **создать** создать собственный шаблон с нуля.

   ![Библиотека шаблонов устройства](./media/howto-set-up-template/newtemplate.png)

4. При создании пользовательского шаблона, вы увидите **сведений об устройстве** страницы для нового шаблона устройства. IoT Central автоматически создает имитированное устройство во время создания шаблона устройства. Имитированное устройство позволяет вам проверить поведение вашего приложения перед подключением реального устройства.

В следующих разделах описывается каждая из вкладок на странице **шаблона устройства**.

## <a name="measurements"></a>Измерения

Измерения — это данные, поступающие с устройства. Можно добавить несколько измерений в шаблон устройства в зависимости от его возможностей.

- Измерения **телеметрии** — это точка числовых данных, которые устройство собирает с течением времени. Они представлены в виде непрерывного потока. Например, температура.
- Измерения **событий** представляют собой данные определенной точки во времени, которые представляют что-то значимое, связанное с устройством. Уровень серьезности указывает на важность события. Например, ошибка мотора вентилятора.
- **Измерения состояния** представляют состояние устройства или его компонентов в течение определенного периода времени. К примеру, режим вентилятора, который может быть определен как **работающий** и **остановленный**.
- **Расположение** измерения являются координаты широты и долготы устройства за период времени. Вентилятор могут перемещаться из одного расположения в другое.

### <a name="create-a-telemetry-measurement"></a>Создание измерения телеметрии

Чтобы добавить новое измерение телеметрии, выберите **+ новое измерение**, выберите **телеметрии** как измерение типа и введите сведения в форме.

> [!NOTE]
> Имена полей в шаблоне устройства должны совпадать с именами в соответствующем коде устройства. Это нужно для отображения в приложении данных телеметрии при подключении реального устройства. Того же принципа следует придерживаться при настройке параметров, свойств устройства и команд. Вы сможете определить шаблон устройства в последующих разделах.
.PNG к примеру, можно добавить в новое измерение температуры телеметрии:

| Отображаемое имя        | Имя поля    |  Units    | Min   |Max|
| --------------------| ------------- |-----------|-------|---|
| температура;         | temp          |  градус Цельсия     |  0    |100|

![Форма создания телеметрии с подробными сведениями об измерении температуры](./media/howto-set-up-template/measurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразятся данные измерения **температуры**. Вскоре отобразится визуализация данных температуры из имитированного устройства.

При отображении данных телеметрии, можно выбрать следующие параметры статистической обработки: Average, Minimum, Maximum, Sum и Count. **Среднее** выбран тип статистической обработки по умолчанию на диаграмме.

> [!NOTE]
> Данные телеметрии передаются в формате чисел с плавающей запятой.

### <a name="create-an-event-measurement"></a>Создание измерения события

Чтобы добавить новое измерение событий, выберите **+ новое измерение** и выберите **событий** как тип измерения. Введите сведения в форму **создания события**.

Укажите сведения об **отображаемом имени**, **имени поля** и **серьезности** события. Доступно три уровня серьезности: **Ошибка**, **Внимание** и **Сведения**.

Например, можно добавить новое событие **Ошибка мотора вентилятора**.

| Отображаемое имя        | Имя поля    |  Серьезность по умолчанию |
| --------------------| ------------- |-----------|
| Ошибка вентилятора     | fanmotorerror |  Error    |

![Форма создания события с подробными сведениями о событии мотора вентилятора](./media/howto-set-up-template/eventmeasurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразятся данные измерения **ошибки мотора вентилятора**. Вскоре отобразится визуализация данных события из имитированного устройства.

Чтобы просмотреть дополнительные сведения о событии, щелкните значок события на диаграмме:

![Подробные сведения о событии "Ошибка мотора вентилятора"](./media/howto-set-up-template/eventmeasurementsdetail.png)

> [!NOTE]
> Для измерения событий используется строковый тип данных.

### <a name="create-a-state-measurement"></a>Создание измерения состояния

Чтобы добавить новое измерение состояния, выберите **+ новое измерение** и выберите **состояние** как тип измерения. Введите сведения в форму **создания состояния**.

Укажите сведения об **отображаемом имени**, **имени поля** и **значениях** состояния. Каждое значение также может иметь отображаемое имя, которое будет использоваться при отображении значения в диаграммах и таблицах.

Например, вы можете добавить новое состояние **Режим вентилятора**, которое имеет два возможных значения, отправляемых устройством: **Работает** и **Остановлено**.

| Отображаемое имя | Имя поля    |  Значение 1   | Отображаемое имя | Значение 2    |Отображаемое имя  | 
| -------------| ------------- |----------- | -------------| -----------| -------------|
| Режим вентилятора     | fanmode       |  1         | Operating (Работает)    |     0      | Остановлено      |

![Форма изменения состояния с подробными сведениями о режиме вентилятора](./media/howto-set-up-template/statemeasurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразится состояние измерения **мотора вентилятора**. Вскоре отобразится визуализация данных состояния из имитированного устройства.

Если в течение небольшого периода времени количество отправленных устройством точек данных слишком велико, измерение состояния отображается с другими визуальными элементами. Выберите диаграмму, чтобы просмотреть все точки данных за указанный период времени в хронологическом порядке. Вы также можете сузить диапазон времени, чтобы увидеть измерения, нанесенные на график.

> [!NOTE]
> Для измерения состояния используется строковый тип данных.

### <a name="create-a-location-measurement"></a>Создание измерения расположение

Чтобы добавить новое измерение расположение, выберите **+ новое измерение**, выберите **расположение** как измерение типа и введите сведения **создать измерения** формы.

Например можно добавить новое измерение телеметрии расположение:

| Отображаемое имя        | Имя поля    |
| --------------------| ------------- |
| Расположение ресурса      |  assetloc     |

![«Создать расположение» форму с подробными сведениями для измерения расположение](./media/howto-set-up-template/locationmeasurementsform.png)

После выбора **Сохранить**, **расположение** измерение появляется в списке измерений. В некоторое время вы увидите визуализации данных расположения с виртуального устройства.

При отображении расположение, вы можете выбрать из следующих вариантов: последние местоположением и историей местоположений. **Расположение журнала** применяется только за выбранный диапазон времени.

Тип данных, измерения расположение — это объект, содержащий долгота, Широта и необязательно Высота над уровнем моря. В следующем фрагменте показана структура JavaScript:

```javascript
assetloc: {
  lon: floating point number,
  lat: floating point number,
  alt?: floating point number
}
```

## <a name="settings"></a>Параметры

Параметры предназначены для управления устройством. Они позволяют операторам предоставлять входные данные для устройства. Вы можете добавить несколько параметров в шаблон устройства, которые отображаются в виде плиток на вкладке **Параметры** для использования операторами. Вы можете добавлять различные типы параметров: номер, текст, дата, переключатель и подпись раздела.

Параметры могут быть в одном из трех состояний. Устройство сообщает об этих состояниях.

- **Синхронизировано**. Устройство изменилось с учетом значения параметра.

- **Pending**. Сейчас устройство меняется в соответствии со значением параметра.

- **Ошибка**: Устройство вернуло ошибку.

Например, можно добавить новый параметр скорость вентилятора, выбрав **параметры** и введя в новом **номер** параметр:

| Отображаемое имя  | Имя поля    |  Units  | Десятичные знаки |Initial|
| --------------| ------------- |---------| ---------|---- |
| Скорость вращения вентилятора     | fanSpeed      | Об/мин     | 2        | 0   |

![Форма настройки числа со сведениями о параметрах скорости](./media/howto-set-up-template/settingsform.png)

После того как вы выберете **Сохранить**, параметр **Скорость вращения вентилятора** появится в виде плитки. Оператор может использовать этот параметр на странице **Device Explorer**, чтобы изменить скорость вращения вентилятора устройства.

## <a name="properties"></a>Свойства

Свойства метаданных, который связан с устройства, например расположение основного устройства и серийный номер: Добавьте несколько свойств в свой шаблон устройства, которые отображаются как плитки на вкладке **Свойства**. Свойство имеет тип, например число, текст, дата, переключатель, свойства устройства, метки или фиксированного расположения. Оператор задает значения для свойств, при создании устройства и могут изменять эти значения в любое время. Свойства устройства доступны только для чтения и отправляются с устройства в приложение. Оператор не может изменить свойства устройства. При подключении через реальное устройство обновления плитки свойств устройства в приложении.

Существует две категории свойств:

- _Свойства устройства_, которые устройство передает в приложение IoT Central. Они содержат атрибут "только для чтения" и обновляются при подключении реального устройства.
- _Свойства приложения_, которые хранятся в приложении. Оператор может их изменить. Свойства приложения хранятся только в приложении и никогда не видел устройством.

Например, можно добавить дату последнего обслуживания для устройства как новое свойство **Дата** (свойство приложения) на вкладке **Свойства**.

| Отображаемое имя  | Имя поля | Начальное значение   |
| --------------| -----------|-----------------|
| Дата последнего обслуживания      | lastServiced        | 29.01.2019     |

![Форма настройки даты последнего обслуживания на вкладке "Свойства"](./media/howto-set-up-template/propertiesform.png)

Когда вы нажмете кнопку **Сохранить**, дата последнего обслуживания для устройства появится в виде плитки.

После создания плитки можно изменить значение свойства приложения на вкладке **Device Explorer**.

### <a name="create-a-location-property"></a>Создать свойство location

Можно предоставить географический контекст для данных о местоположении в Azure IoT Central и сопоставить любой широту и долготу координат или почтовый адрес. Azure Maps позволяет использовать эту возможность в IoT Central.

Вы можете добавить два типа свойств расположения:

- **Расположение как свойство приложения**, которое хранится в приложении. Свойства приложения хранятся только в приложении и никогда не видел устройством.
- **Расположение как свойство устройства.** Эти данные устройство передает в приложение. Этот тип свойства рекомендуется использовать для статического расположения.

> [!NOTE]
> Расположение, что свойство не записывает журнал. При необходимости журнал используйте расположение измерения.

#### <a name="add-location-as-an-application-property"></a>Добавление расположения в качестве свойства приложения

Вы можете создать свойство расположения как свойство приложения, используя службы Azure Maps в своем приложении IoT Central. Например, вы можете добавить адрес установки устройства.

1. Перейдите на вкладку **Свойства**.

2. В библиотеке выберите **Расположение**.

3. Укажите для расположения **отображаемое имя**, **имя поля** и **начальное значение**.

    | Отображаемое имя  | Имя поля | Начальное значение |
    | --------------| -----------|---------|
    | Адрес установки | installAddress | Microsoft, 1 Microsoft Way, Redmond, WA 98052   |

   ![Форма настройки расположения с подробными сведениями о расположении](./media/howto-set-up-template/locationcloudproperty2.png)

   Для добавления расположения существует два поддерживаемых формата:
   - **расположение в виде адреса**;
   - **расположение в виде координат**.

4. Щелкните **Сохранить**. Оператор может обновить значение расположения в **Device Explorer**.

#### <a name="add-location-as-a-device-property"></a>Добавление расположения в качестве свойства устройства

Вы можете создать свойство расположения в качестве свойства устройства, которое сообщается устройством. Например, если нужно отслеживать расположение устройства:

1. Перейдите на вкладку **Свойства**.

2. Выберите **Device Property** (Свойство устройства) в библиотеке.

3. Укажите отображаемое имя и имя поля, а затем выберите **Расположение** в качестве типа данных.

    | Отображаемое имя  | Имя поля | Тип данных |
    | --------------| -----------|-----------|
    | Расположение устройства | deviceLocation | location  |

   > [!NOTE]
   > Имена полей должны совпадать с именами свойств в соответствующем коде устройства.

   ![Форма настройки свойств устройства с подробными сведениями о расположении](./media/howto-set-up-template/locationdeviceproperty2.png)

После подключения реального устройства расположение вы добавили свойство устройства при обновлении со значением, отправляемые устройством. После настройки свойство расположения, вы можете [добавить карту для отображения расположения в панели мониторинга устройств](#add-a-location-in-the-dashboard).

## <a name="commands"></a>Команды

Команды используются для удаленного управления устройством. Они позволяют операторам выполнять команды на устройстве. Вы можете добавить несколько команд в шаблон устройства, которые отображаются в виде плиток на вкладке **Команды** для использования операторами. Как создатель устройства, вы можете определить команды в соответствии с требованиями.

Чем команда отличается от параметра?

* **Параметр**. Параметр представляет собой конфигурацию, которую необходимо применить к устройству. Вы хотите, чтобы устройство сохраняло эту конфигурацию, пока вы не измените ее. Например, вам нужно задать температуру охлаждающего устройства, которая не должна изменяться даже после его перезагрузки.

* **Команда.** Позволяет мгновенно удаленно выполнять команду на устройстве из IoT Central. Если устройство не подключено, время ожидания команды истекает и ее выполнение завершается сбоем. Например, вам требуется перезагрузить устройство.

Например, можно добавить новый **Echo** команду, выбрав **команды** вкладку, выбрав **+ новая команда**и введя новые сведения о команде:

| Отображаемое имя  | Имя поля | Default Timeout (Время ожидания по умолчанию) | Тип данных |
| --------------| -----------|---------------- | --------- |
| Команда вывода на экран  | echo (вывод на экран)       |  30             | text      |

![Форма настройки команды с подробными сведениями о выводе на экран](./media/howto-set-up-template/commandsecho1.png)

Если выбрать **Сохранить**, команда **вывода на экран** будет отображаться в виде плитки. При подключении реального устройства ее можно использовать в **Device Explorer**. Имена полей команды должны соответствовать имена свойств в соответствующем коде устройства в порядке для команд, для успешного выполнения.

## <a name="rules"></a>Правила

Правила позволяют операторам наблюдать за устройствами почти в реальном времени. При срабатывании правила автоматически вызывают действия, такие как отправка сообщения электронной почты. На сегодня существует один тип правил:

- **Правило телеметрии**, срабатывающее, когда данные телеметрии выбранного устройства превышают указанное пороговое значение. [Узнайте больше о правилах телеметрии](howto-create-telemetry-rules.md).

## <a name="dashboard"></a>панель мониторинга

Панели мониторинга — от оператора назначения для просмотра сведений об устройстве. Как построитель добавьте плитки на эту страницу, чтобы помочь понять, как работает устройство операторы. Вы можете добавить несколько типов плиток для панели мониторинга: изображения, графики, гистограммы, ключевые показатели эффективности, параметры, свойства и метки.

Например, можно добавить плитку **Параметры и свойства**, чтобы отображать текущие значения параметров и свойств из некоторого набора, выбрав вкладку **Панель мониторинга** и плитку из библиотеки.

![Форма настройки сведений об устройстве со сведениями о параметрах и свойствах](./media/howto-set-up-template/dashboardsettingsandpropertiesform1.png)

Теперь, когда оператор просматривает панель мониторинга в **Device Explorer**, он может видеть плитку.

### <a name="add-a-location-in-the-dashboard"></a>Добавить расположение в панели мониторинга

Если вы настроили измерения расположение, вы можете визуализировать расположение с картой в панели мониторинга устройства.

1. Перейдите на вкладку **Панель мониторинга**.

1. На панели мониторинга устройства выберите **карту** из библиотеки.

1. Укажите название карты. В следующем примере имеется заголовок **текущее расположение устройства**. Выберите расположение измерения, настроенный на **измерения** вкладки. В следующем примере **расположение ресурса** выбранные измерения:

   ![Форма настройки карты со сведениями о заголовке и свойствах](./media/howto-set-up-template/locationcloudproperty5map.png)

1. Щелкните **Сохранить**. Теперь на фрагменте карты отображается выбранное расположение.

Можно изменить размер плитки карты. Когда оператор представления панели мониторинга в **Device Explorer**, плитки панели мониторинга, настройки, включая карту расположения являются видимыми.

Дополнительные сведения об использовании плиток в Azure IoT Central, см. в разделе [использовать панели мониторинга плитки](howto-use-tiles.md).

## <a name="next-steps"></a>Следующие шаги

Вы узнали, как настраивать шаблон устройства в приложении Azure IoT Central, а значит вы готовы к следующему шагу:

> [!div class="nextstepaction"]
> [Создать новую версию шаблона устройства](howto-version-device-template.md)
> [подключение устройства MXChip IoT DevKit к приложению Azure IoT Central](howto-connect-devkit.md)
> [подключения универсального клиентскому приложению в Azure Приложения центра Интернета вещей (Node.js)](howto-connect-nodejs.md)