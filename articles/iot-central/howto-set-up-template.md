---
title: Настройка шаблона устройства в приложении Azure IoT Central | Документация Майкрософт
description: Подробные сведения о настройке измерений, параметров, свойств, правил и панели мониторинга в шаблоне устройства.
author: viv-liu
ms.author: viviali
ms.date: 06/19/2019
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: 58f50a1a2b90b4b5f9708bf0f1a7cb51db8e47ae
ms.sourcegitcommit: a52d48238d00161be5d1ed5d04132db4de43e076
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/20/2019
ms.locfileid: "67275959"
---
# <a name="set-up-a-device-template"></a>Настройка шаблона устройства

Шаблон устройства — это схема, которая определяет характеристики и поведение типа устройства, которое подключается к приложению Azure IoT Central.

Например, конструктор может создать шаблон устройства для подключенного к Интернету вещей вентилятора, который имеет:

- измерение телеметрии температуры;

- измерение событий ошибки двигателя вентилятора;

- измерение состояния работы вентилятора;

- параметр скорости вентилятора;

- свойство расположения;

- правила отправки оповещений;

- панель мониторинга, которая обеспечивает общее представление устройства.

На основе этого шаблона устройства можно создавать и подключать реальные вентиляторы с такими именами, как **fan-1** и **fan-2**. Все эти вентиляторы имеют измерения, параметры, свойства, правила и панель мониторинга, которые пользователи приложения могут отслеживать и контролировать.

> [!NOTE]
> Только администраторы и конструкторы могут создавать, изменять и удалять шаблоны устройств. Любой пользователь может создавать устройства на странице **Device Explorer** из имеющихся шаблонов устройств.

## <a name="create-a-device-template"></a>Создание шаблона устройства

1. Перейдите на страницу **Шаблоны устройств**.

2. Чтобы создать шаблон, сначала выберите **+ создать**.

3. Чтобы быстро начать работу, выберите из существующих предварительно созданных шаблонов. В противном случае выберите **Custom**, введите имя и нажмите кнопку **создать** создать собственный шаблон с нуля.

   ![Библиотека шаблонов устройства](./media/howto-set-up-template/newtemplate.png)

4. При создании пользовательского шаблона, вы увидите **сведений об устройстве** страницы для нового шаблона устройства. IoT Central автоматически создает имитированное устройство во время создания шаблона устройства. Имитированное устройство позволяет вам проверить поведение вашего приложения перед подключением реального устройства.

В следующих разделах описывается каждая из вкладок на странице **шаблона устройства**.

## <a name="measurements"></a>Измерения

Измерения — это данные, поступающие с устройства. Можно добавить несколько измерений в шаблон устройства в зависимости от его возможностей.

- Измерения **телеметрии** — это точка числовых данных, которые устройство собирает с течением времени. Они представлены в виде непрерывного потока. Например, температура.
- Измерения **событий** представляют собой данные определенной точки во времени, которые представляют что-то значимое, связанное с устройством. Уровень серьезности указывает на важность события. Например, ошибка мотора вентилятора.
- **Измерения состояния** представляют состояние устройства или его компонентов в течение определенного периода времени. К примеру, режим вентилятора, который может быть определен как **работающий** и **остановленный**.

### <a name="create-a-telemetry-measurement"></a>Создание измерения телеметрии

Чтобы добавить новое измерение телеметрии, выберите **+ новое измерение**, выберите **телеметрии** как измерение типа и введите сведения в форме.

> [!NOTE]
> Имена полей в шаблоне устройства должны совпадать с именами в соответствующем коде устройства. Это нужно для отображения в приложении данных телеметрии при подключении реального устройства. Того же принципа следует придерживаться при настройке параметров, свойств устройства и команд. Вы сможете определить шаблон устройства в последующих разделах.
.PNG к примеру, можно добавить в новое измерение температуры телеметрии:

| Название        | Имя поля    |  Units    | Min   |Max|
| --------------------| ------------- |-----------|-------|---|
| температура;         | temp          |  градус Цельсия     |  0    |100|

![Форма создания телеметрии с подробными сведениями об измерении температуры](./media/howto-set-up-template/measurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразятся данные измерения **температуры**. Вскоре отобразится визуализация данных температуры из имитированного устройства.

При отображении данных телеметрии, можно выбрать следующие параметры статистической обработки: Average, Minimum, Maximum, Sum и Count. **Среднее** выбран тип статистической обработки по умолчанию на диаграмме. 

> [!NOTE]
> Данные телеметрии передаются в формате чисел с плавающей запятой.

### <a name="create-an-event-measurement"></a>Создание измерения события

Чтобы добавить новое измерение событий, выберите **+ новое измерение** и выберите **событий** как тип измерения. Введите сведения в форму **создания события**.

Укажите сведения об **отображаемом имени**, **имени поля** и **серьезности** события. Доступно три уровня серьезности: **Ошибка**, **Внимание** и **Сведения**.

Например, можно добавить новое событие **Ошибка мотора вентилятора**.

| Название        | Имя поля    |  Серьезность по умолчанию |
| --------------------| ------------- |-----------|
| Ошибка вентилятора     | fanmotorerror |  Ошибка    |

![Форма создания события с подробными сведениями о событии мотора вентилятора](./media/howto-set-up-template/eventmeasurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразятся данные измерения **ошибки мотора вентилятора**. Вскоре отобразится визуализация данных события из имитированного устройства.

Чтобы просмотреть дополнительные сведения о событии, щелкните значок события на диаграмме:

![Подробные сведения о событии "Ошибка мотора вентилятора"](./media/howto-set-up-template/eventmeasurementsdetail.png)

> [!NOTE]
> Для измерения событий используется строковый тип данных.

### <a name="create-a-state-measurement"></a>Создание измерения состояния

Чтобы добавить новое измерение состояния, выберите **+ новое измерение** и выберите **состояние** как тип измерения. Введите сведения в форму **создания состояния**.

Укажите сведения об **отображаемом имени**, **имени поля** и **значениях** состояния. Каждое значение также может иметь отображаемое имя, которое будет использоваться при отображении значения в диаграммах и таблицах.

Например, вы можете добавить новое состояние **Режим вентилятора**, которое имеет два возможных значения, отправляемых устройством: **Работает** и **Остановлено**.

| Название | Имя поля    |  Значение 1   | Название | Значение 2    |Название  | 
| -------------| ------------- |----------- | -------------| -----------| -------------|
| Режим вентилятора     | fanmode       |  1         | Operating (Работает)    |     0      | Остановлено      |

![Форма изменения состояния с подробными сведениями о режиме вентилятора](./media/howto-set-up-template/statemeasurementsform.png)

Если щелкнуть **Сохранить**, в списке измерений отобразится состояние измерения **мотора вентилятора**. Вскоре отобразится визуализация данных состояния из имитированного устройства.

Если в течение небольшого периода времени количество отправленных устройством точек данных слишком велико, измерение состояния отображается с другими визуальными элементами. Выберите диаграмму, чтобы просмотреть все точки данных за указанный период времени в хронологическом порядке. Вы также можете сузить диапазон времени, чтобы увидеть измерения, нанесенные на график.

> [!NOTE]
> Для измерения состояния используется строковый тип данных.

## <a name="settings"></a>Параметры

Параметры предназначены для управления устройством. Они позволяют операторам предоставлять входные данные для устройства. Вы можете добавить несколько параметров в шаблон устройства, которые отображаются в виде плиток на вкладке **Параметры** для использования операторами. Вы можете добавить несколько типов параметров: номер, текст, дата, переключатель, список выбора и метка раздела.

Параметры могут быть в одном из трех состояний. Устройство сообщает об этих состояниях.

- **Синхронизировано**. Устройство изменилось с учетом значения параметра.

- **Pending**. Сейчас устройство меняется в соответствии со значением параметра.

- **Ошибка**: Устройство вернуло ошибку.

Например, можно добавить новый параметр скорость вентилятора, выбрав **параметры** и введя в новом **номер** параметр:

| Название  | Имя поля    |  Units  | Десятичные знаки |Initial|
| --------------| ------------- |---------| ---------|---- |
| Скорость вращения вентилятора     | fanSpeed      | Об/мин     | 2        | 0   |

![Форма настройки числа со сведениями о параметрах скорости](./media/howto-set-up-template/settingsform.png)

После того как вы выберете **Сохранить**, параметр **Скорость вращения вентилятора** появится в виде плитки. Оператор может использовать этот параметр на странице **Device Explorer**, чтобы изменить скорость вращения вентилятора устройства.

## <a name="properties"></a>properties

Свойства являются метаданными, связанными с этим устройством (например, расположение устройства и серийный номер). Добавьте несколько свойств в свой шаблон устройства, которые отображаются как плитки на вкладке **Свойства**. Свойство может иметь такой тип, как число, текст, дата, переключатель, свойство устройства, метка или расположение. Оператор может указывать значения свойств при создании устройства, а также может редактировать эти значения в любое время. Свойства устройства доступны только для чтения и отправляются с устройства в приложение. Оператор не может их изменять. При подключении реального устройства плитка свойства устройства обновляется в приложении.

Существует две категории свойств:

- _Свойства устройства_, которые устройство передает в приложение IoT Central. Они содержат атрибут "только для чтения" и обновляются при подключении реального устройства.
- _Свойства приложения_, которые хранятся в приложении. Оператор может их изменить. Устройство не распознает свойства приложения.

Например, можно добавить дату последнего обслуживания для устройства как новое свойство **Дата** (свойство приложения) на вкладке **Свойства**.

| Название  | Имя поля | Начальное значение   |
| --------------| -----------|-----------------|
| Дата последнего обслуживания      | lastServiced        | 29.01.2019     |

![Форма настройки даты последнего обслуживания на вкладке "Свойства"](./media/howto-set-up-template/propertiesform.png)

Когда вы нажмете кнопку **Сохранить**, дата последнего обслуживания для устройства появится в виде плитки.

После создания плитки можно изменить значение свойства приложения на вкладке **Device Explorer**.

### <a name="create-a-location-property-through-azure-maps"></a>Создание свойства расположения с помощью Azure Maps

Вы можете указать географический контекст для своих данных о расположении в Azure IoT Central и сопоставить координаты широты и долготы адреса улицы. Вы также можете сопоставить координаты широты и долготы. Azure Maps позволяет использовать эту возможность в IoT Central.

Вы можете добавить два типа свойств расположения:

- **Расположение как свойство приложения**, которое хранится в приложении. Устройство не распознает свойства приложения.
- **Расположение как свойство устройства.** Эти данные устройство передает в приложение.

#### <a name="add-location-as-an-application-property"></a>Добавление расположения в качестве свойства приложения

Вы можете создать свойство расположения как свойство приложения, используя службы Azure Maps в своем приложении IoT Central. Например, вы можете добавить адрес установки устройства.

1. Перейдите на вкладку **Свойства**.

2. В библиотеке выберите **Расположение**.

3. Укажите для расположения **отображаемое имя**, **имя поля** и **начальное значение**.

    | Название  | Имя поля | Начальное значение |
    | --------------| -----------|---------| 
    | Адрес установки | installAddress | Microsoft, 1 Microsoft Way, Redmond, WA 98052   |

   ![Форма настройки расположения с подробными сведениями о расположении](./media/howto-set-up-template/locationcloudproperty2.png)

   Для добавления расположения существует два поддерживаемых формата:
   - **расположение в виде адреса**;
   - **расположение в виде координат**.

4. Щелкните **Сохранить**. Оператор может обновить значение расположения в **Device Explorer**.

#### <a name="add-location-as-a-device-property"></a>Добавление расположения в качестве свойства устройства

Вы можете создать свойство расположения в качестве свойства устройства, которое сообщается устройством. Например, если нужно отслеживать расположение устройства:

1. Перейдите на вкладку **Свойства**.

2. Выберите **Device Property** (Свойство устройства) в библиотеке.

3. Укажите отображаемое имя и имя поля, а затем выберите **Расположение** в качестве типа данных.

    | Название  | Имя поля | Тип данных |
    | --------------| -----------|-----------|
    | Расположение устройства | deviceLocation | location  |

   > [!NOTE]
   > Имена полей должны совпадать с именами свойств в соответствующем коде устройства.

   ![Форма настройки свойств устройства с подробными сведениями о расположении](./media/howto-set-up-template/locationdeviceproperty2.png)

При подключении реального устройства расположение, которое вы добавили как свойство устройства, будет заменено значением, которое отправит устройство. Настроив свойство расположения, вы можете [добавить карту, чтобы визуализировать местоположение на панели мониторинга устройства](#add-an-azure-maps-location-in-the-dashboard).

## <a name="commands"></a>Команды

Команды используются для удаленного управления устройством. Они позволяют операторам выполнять команды на устройстве. Вы можете добавить несколько команд в шаблон устройства, которые отображаются в виде плиток на вкладке **Команды** для использования операторами. Как создатель устройства, вы можете определить команды в соответствии с требованиями.

Чем команда отличается от параметра?

* **Параметр**. Параметр представляет собой конфигурацию, которую необходимо применить к устройству. Вы хотите, чтобы устройство сохраняло эту конфигурацию, пока вы не измените ее. Например, вам нужно задать температуру охлаждающего устройства, которая не должна изменяться даже после его перезагрузки.

* **Команда.** Позволяет мгновенно удаленно выполнять команду на устройстве из IoT Central. Если устройство не подключено, время ожидания команды истекает и ее выполнение завершается сбоем. Например, вам требуется перезагрузить устройство.

Например, можно добавить новый **Echo** команду, выбрав **команды** вкладку, выбрав **+ новая команда**и введя новые сведения о команде:

| Название  | Имя поля | Default Timeout (Время ожидания по умолчанию) | Тип данных |
| --------------| -----------|---------------- | --------- |
| Команда вывода на экран  | echo (вывод на экран)       |  30             | Text      |

![Форма настройки команды с подробными сведениями о выводе на экран](./media/howto-set-up-template/commandsecho1.png)

Если выбрать **Сохранить**, команда **вывода на экран** будет отображаться в виде плитки. При подключении реального устройства ее можно использовать в **Device Explorer**. Имена полей команды должны совпадать с именами в соответствующем коде устройства. Так команды будут выполняться успешно.

## <a name="rules"></a>Правила

Правила позволяют операторам наблюдать за устройствами почти в реальном времени. При срабатывании правила автоматически вызывают действия, такие как отправка сообщения электронной почты. На сегодня существует один тип правил:

- **Правило телеметрии**, срабатывающее, когда данные телеметрии выбранного устройства превышают указанное пороговое значение. [Узнайте больше о правилах телеметрии](howto-create-telemetry-rules.md).

## <a name="dashboard"></a>панель мониторинга

На панели мониторинга оператор может просмотреть сведения об устройстве. Как создатель вы можете добавить на эту страницу плитки, которые помогают операторам понять, как работает устройство. В шаблон устройства можно добавить несколько плиток панели мониторинга. Вы можете добавить несколько типов плиток для панели мониторинга: изображения, графики, гистограммы, ключевые показатели эффективности, параметры, свойства и метки.

Например, можно добавить плитку **Параметры и свойства**, чтобы отображать текущие значения параметров и свойств из некоторого набора, выбрав вкладку **Панель мониторинга** и плитку из библиотеки.

![Форма настройки сведений об устройстве со сведениями о параметрах и свойствах](./media/howto-set-up-template/dashboardsettingsandpropertiesform1.png)

Теперь, когда оператор просматривает панель мониторинга в **Device Explorer**, он может видеть плитку.

### <a name="add-an-azure-maps-location-in-the-dashboard"></a>Добавление расположения Azure Maps на панель мониторинга

Если вы настроили свойство расположения, вы можете визуализировать расположение с помощью карты на панели мониторинга устройства.

1. Перейдите на вкладку **Панель мониторинга**.

1. На панели мониторинга устройства выберите **карту** из библиотеки.

1. Укажите название карты. В следующем примере имеется заголовок **Расположение установки**. Затем выберите свойство расположения, которое вы ранее настроили на вкладке **Свойства**. В следующем примере выбрано свойство **Адрес установки**.

   ![Форма настройки карты со сведениями о заголовке и свойствах](./media/howto-set-up-template/locationcloudproperty5map.png)

4. Щелкните **Сохранить**. Теперь на фрагменте карты отображается выбранное расположение.

Вы можете изменить размер карты до нужного. Теперь, когда операторы просматривают панель мониторинга в **Device Explorer**, для них видимы все плитки, которые вы настроили, включая карту расположения.

## <a name="next-steps"></a>Дальнейшие действия

Вы узнали, как настраивать шаблон устройства в приложении Azure IoT Central, а значит вы готовы к следующему шагу:

> [!div class="nextstepaction"]
> [Создать новую версию шаблона устройства](howto-version-devicetemplate.md)
> [подключение устройства MXChip IoT DevKit к приложению Azure IoT Central](howto-connect-devkit.md)
> [подключения универсального клиентскому приложению в Azure Приложения центра Интернета вещей (Node.js)](howto-connect-nodejs.md)