---
title: Обновить группу контейнеров
description: Сведения об обновлении запущенных контейнеров в службе "Экземпляры контейнеров Azure"
ms.topic: article
ms.date: 09/03/2019
ms.openlocfilehash: f57ebcf050b5563b45f10af57c1721338df88ff9
ms.sourcegitcommit: 85e7fccf814269c9816b540e4539645ddc153e6e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2019
ms.locfileid: "74533303"
---
# <a name="update-containers-in-azure-container-instances"></a>Обновление контейнеров в службе "Экземпляры контейнеров Azure"

Во время нормальной работы экземпляров контейнеров может оказаться необходимым обновить запущенные контейнеры в [группе контейнеров](container-instances-container-groups.md). Например, может потребоваться обновить версию образа, изменить имя DNS, обновить переменные среды или обновить состояние контейнера, приложение которого было аварийно завершено.

> [!NOTE]
> Группы контейнеров, которые прекратили действие или были удалены, невозможно обновить. После завершения работы группы контейнеров (находится в состоянии "успешно" или "сбой") или была удалена, группа должна быть развернута как новая.

## <a name="update-a-container-group"></a>Обновление группы контейнеров

Обновление контейнеров в работающей группе контейнеров путем повторного развертывания существующей группы по крайней мере с одним измененным свойством. При обновлении группы контейнеров все работающие контейнеры в группе перезапускаются на месте, обычно на том же базовом узле контейнера.

Сделайте повторное развертывание существующей группы контейнеров, выполнив команду "Создать" (или используйте портал Azure), и укажите имя существующей группы. Измените по меньшей мере одно допустимое свойство группы при выполнении команды Create для запуска повторного развертывания, а остальные свойства оставьте без изменений (или продолжайте использовать значения по умолчанию). Не все свойства контейнера группы могут использоваться для повторного развертывания. Список неподдерживаемых свойств см. в разделе [Свойства, требующие удаления контейнера](#properties-that-require-container-delete).

В следующем примере интерфейс командной строки Azure CLI обновляет группу контейнеров с новой меткой имени DNS. Так как свойство метки DNS-имени группы является именем, которое может быть Обновлено, Группа контейнеров повторно развертывается и контейнеры перезапускаются.

Начальное развертывание с помощью метки имени DNS *myapplication-staging*.

```azurecli-interactive
# Create container group
az container create --resource-group myResourceGroup --name mycontainer \
    --image nginx:alpine --dns-name-label myapplication-staging
```

Обновите группу контейнеров с помощью новой метки DNS-имени *MyApplication*, а остальные свойства оставьте без изменений:

```azurecli-interactive
# Update DNS name label (restarts container), leave other properties unchanged
az container create --resource-group myResourceGroup --name mycontainer \
    --image nginx:alpine --dns-name-label myapplication
```

## <a name="update-benefits"></a>Преимущества обновления

Основным преимуществом для обновления существующей группы контейнеров является более быстрое развертывание. При повторном развертывании существующей группы контейнеров слои ее образа извлекаются из кэша предыдущего развертывания. Вместо того чтобы извлекать все слои образов из реестра, как это происходит с новыми развертываниями, извлекаются только измененные слои (если такие существуют).

Приложения, основанные на более крупных образах контейнеров, таких как Windows Server Core, могут получить значительное улучшение скорости развертывания при обновлении вместо удаления и развертывания новых.

## <a name="limitations"></a>Ограничения

Не все свойства группы контейнеров поддерживают обновления. Чтобы изменить некоторые свойства группы контейнеров, сначала необходимо удалить, затем повторно развернуть группу. Дополнительные сведения см. в разделе [Свойства, требующие удаления контейнера](#properties-that-require-container-delete).

При обновлении группы контейнеров все контейнеры в группе перезапускаются. Невозможно выполнить обновление или мгновенную перезагрузку конкретного контейнера, если в группе их несколько.

IP-адрес контейнера обычно не изменяется между обновлениями, но нет никакой гарантии, что он останется неизменным. Пока группа контейнеров развертывается на одном и том же базовом узле, она сохраняет свой IP-адрес. Служба "Экземпляры контейнеров Azure" делает все возможное, чтобы повторно развернуться на том же узле, хотя и редко, но существуют некоторые внутренние события, которые могут вызвать повторное развертывание на другой узел. Чтобы устранить эту проблему, всегда используйте метку имени DNS для экземпляров контейнера.

Группы контейнеров, которые прекратили действие или были удалены, невозможно обновить. Как только группа контейнеров была остановлена (состояние *Завершено*) или была удалена, она развертывается как новая.

## <a name="properties-that-require-container-delete"></a>Свойства, требующие удаления контейнера

Как упоминалось ранее, не все свойства групп контейнеров можно обновить. Например, чтобы изменить параметры портов или перезагрузить контейнер, сначала необходимо удалить группу контейнеров, а затем создать ее снова.

Эти свойства сначала требуют удаления группы контейнеров, а потом повторного развертывания.

* Тип ОС
* ЦП
* Память
* Политика перезапуска
* порты;

При удалении группы контейнеров и создании ее повторно, происходит не "повторное развертывание" объекта, а создается новый. Все слои образа заново извлекаются из реестра, а не из кэша предыдущего развертывания. IP-адрес контейнера также может измениться из-за его развертывания на другом основном узле.

## <a name="next-steps"></a>Дополнительная информация

**Группа контейнеров** упоминается несколько раз в этой статье. Каждый контейнер в Экземплярах контейнеров Azure развертывается в группе, которая может содержать более одного контейнера.

[Группы контейнеров в службе "Экземпляры контейнеров Azure"](container-instances-container-groups.md)

[Развертывание группы контейнеров](container-instances-multi-container-group.md)

[Вручную останавливает или запускает контейнеры в службе "экземпляры контейнеров Azure"](container-instances-stop-start.md)

<!-- LINKS - External -->

<!-- LINKS - Internal -->
[az-container-create]: /cli/azure/container?view=azure-cli-latest#az-container-create
[azure-cli-install]: /cli/azure/install-azure-cli
