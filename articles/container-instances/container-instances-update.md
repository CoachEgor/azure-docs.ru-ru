---
title: Обновление контейнеров в службе "Экземпляры контейнеров Azure"
description: Сведения об обновлении запущенных контейнеров в службе "Экземпляры контейнеров Azure"
services: container-instances
author: dlepow
manager: gwallace
ms.service: container-instances
ms.topic: article
ms.date: 08/01/2018
ms.author: danlep
ms.openlocfilehash: d555ba6b8c2b32fc6ec56d6c51dda9626b6f0cb0
ms.sourcegitcommit: 4b431e86e47b6feb8ac6b61487f910c17a55d121
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2019
ms.locfileid: "68325547"
---
# <a name="update-containers-in-azure-container-instances"></a>Обновление контейнеров в службе "Экземпляры контейнеров Azure"

Во время обычной работы экземпляров контейнера можно обновить контейнеры в группе контейнеров. Например, может потребоваться обновить версию образа, изменить имя DNS, обновить переменные среды или обновить состояние контейнера, приложение которого было аварийно завершено.

## <a name="update-a-container-group"></a>Обновление группы контейнеров

Обновите контейнеры в группе контейнеров путем повторного развертывания существующей группы с одним измененным свойством. При обновлении группы контейнеров перезапускаются все запущенные контейнеры.

Сделайте повторное развертывание существующей группы контейнеров, выполнив команду "Создать" (или используйте портал Azure), и укажите имя существующей группы. Измените по крайней мере одно допустимое свойство группы при выполнении команды "Создать" для активации повторного развертывания. Не все свойства контейнера группы могут использоваться для повторного развертывания. Список неподдерживаемых свойств см. в разделе [Свойства, требующие удаления контейнера](#properties-that-require-container-delete).

В следующем примере интерфейс командной строки Azure CLI обновляет группу контейнеров с новой меткой имени DNS. Поскольку свойство метки имени DNS для группы изменено, группа контейнеров перераспределяется и ее контейнеры перезапускаются.

Начальное развертывание с помощью метки имени DNS *myapplication-staging*.

```azurecli-interactive
# Create container group
az container create --resource-group myResourceGroup --name mycontainer \
    --image nginx:alpine --dns-name-label myapplication-staging
```

Обновление группы контейнеров с меткой имени DNS *myapplication*.

```azurecli-interactive
# Update container group (restarts container)
az container create --resource-group myResourceGroup --name mycontainer \
    --image nginx:alpine --dns-name-label myapplication
```

## <a name="update-benefits"></a>Преимущества обновления

Основным преимуществом для обновления существующей группы контейнеров является более быстрое развертывание. При повторном развертывании существующей группы контейнеров слои ее образа извлекаются из кэша предыдущего развертывания. Вместо того чтобы извлекать все слои образов из реестра, как это происходит с новыми развертываниями, извлекаются только измененные слои (если такие существуют).

Приложения, основанные на более крупных образах контейнеров, таких как Windows Server Core, могут получить значительное улучшение скорости развертывания при обновлении вместо удаления и развертывания новых.

## <a name="limitations"></a>Ограничения

Не все свойства группы контейнеров поддерживают обновления. Чтобы изменить некоторые свойства группы контейнеров, сначала необходимо удалить, затем повторно развернуть группу. Дополнительные сведения см. в разделе [Свойства, требующие удаления контейнера](#properties-that-require-container-delete).

При обновлении группы контейнеров все контейнеры в группе перезапускаются. Невозможно выполнить обновление или мгновенную перезагрузку конкретного контейнера, если в группе их несколько.

IP-адрес контейнера обычно не изменяется между обновлениями, но нет никакой гарантии, что он останется неизменным. Пока группа контейнеров развертывается на одном и том же базовом узле, она сохраняет свой IP-адрес. Служба "Экземпляры контейнеров Azure" делает все возможное, чтобы повторно развернуться на том же узле, хотя и редко, но существуют некоторые внутренние события, которые могут вызвать повторное развертывание на другой узел. Чтобы устранить эту проблему, всегда используйте метку имени DNS для экземпляров контейнера.

Группы контейнеров, которые прекратили действие или были удалены, невозможно обновить. Как только группа контейнеров была остановлена (состояние *Завершено*) или была удалена, она развертывается как новая.

## <a name="properties-that-require-container-delete"></a>Свойства, требующие удаления контейнера

Как упоминалось ранее, не все свойства групп контейнеров можно обновить. Например, чтобы изменить параметры портов или перезагрузить контейнер, сначала необходимо удалить группу контейнеров, а затем создать ее снова.

Эти свойства сначала требуют удаления группы контейнеров, а потом повторного развертывания.

* Тип ОС
* ЦП
* Память
* Политика перезапуска
* порты;

При удалении группы контейнеров и создании ее повторно, происходит не "повторное развертывание" объекта, а создается новый. Все слои образа заново извлекаются из реестра, а не из кэша предыдущего развертывания. IP-адрес контейнера также может измениться из-за его развертывания на другом основном узле.

## <a name="next-steps"></a>Следующие шаги

**Группа контейнеров** упоминается несколько раз в этой статье. Каждый контейнер в Экземплярах контейнеров Azure развертывается в группе, которая может содержать более одного контейнера.

[Группы контейнеров в службе "Экземпляры контейнеров Azure"](container-instances-container-groups.md)

[Развертывание группы контейнеров](container-instances-multi-container-group.md)

<!-- LINKS - External -->

<!-- LINKS - Internal -->
[az-container-create]: /cli/azure/container?view=azure-cli-latest#az-container-create
[az-container-logs]: /cli/azure/container?view=azure-cli-latest#az-container-logs
[az-container-show]: /cli/azure/container?view=azure-cli-latest#az-container-show
[azure-cli-install]: /cli/azure/install-azure-cli
