---
title: Группы контейнеров в службе "Экземпляры контейнеров Azure"
description: Понять, каким образом многоконтейнерных групп работать в экземплярах контейнеров Azure
services: container-instances
author: dlepow
manager: jeconnoc
ms.service: container-instances
ms.topic: article
ms.date: 03/20/2019
ms.author: danlep
ms.custom: mvc
ms.openlocfilehash: f4bbea8acd447a731cf5c56f9876baf9183735ea
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60518638"
---
# <a name="container-groups-in-azure-container-instances"></a>Группы контейнеров в службе "Экземпляры контейнеров Azure"

Ресурс верхнего уровня в службе "Экземпляры контейнеров Azure" — это *группа контейнеров*. В этой статье представлены сведения о группах контейнеров и описаны сценарии, которые можно реализовать с их помощью.

## <a name="how-a-container-group-works"></a>Принцип работы группы контейнеров

Группа контейнеров — это набор контейнеров, которые можно планировать на одном хост-компьютере. Контейнеры в группе контейнеров совместно используют жизненный цикл, ресурсы, локальную сеть и тома хранилища. Это похоже на концепцию *pod* в [Kubernetes][kubernetes-pod].

На схеме ниже показан пример группы контейнеров, включающей несколько контейнеров:

![Диаграмма групп контейнеров][container-groups-example]

Группа контейнеров в этом примере:

* Планируется на одном хост-компьютере.
* Принимает назначенную метку DNS-имени.
* Предоставляет один общедоступный IP-адрес с одним предоставленным портом.
* Состоит из двух частей. Один контейнер ожидает передачи данных на порте 80, а другой — на порте 5000.
* Включает два общих файловых ресурса Azure в качестве подключенных томов. При этом к каждому контейнеру локально подключен один из общих ресурсов.

> [!NOTE]
> Многоконтейнерных групп в настоящее время поддерживает только контейнеры Linux. Для контейнеров Windows экземпляры контейнеров Azure поддерживает только развертывания отдельного экземпляра. Пока мы работаем, чтобы обеспечить все функции для контейнеров Windows, можно найти текущей платформы есть отличия в службе [Обзор](container-instances-overview.md#linux-and-windows-containers).

## <a name="deployment"></a>Развертывание

Ниже приведены два распространенных способа развертывания многоконтейнерной группы: использовать [шаблона Resource Manager] [ resource-manager template] или [yaml-файл][yaml-file]. Шаблон Resource Manager рекомендуется в том случае, если необходимо развернуть ресурсы дополнительных служб Azure (например, [файловых ресурсов Azure][azure-files]) при развертывании экземпляров контейнера. Из-за своей природе более наглядный формат YAML yaml-файл рекомендуется, если развертывание включает только экземпляры контейнеров.

Чтобы сохранить конфигурацию группы контейнеров, можно экспортировать конфигурацию в файл YAML с помощью команды Azure CLI [az контейнер экспорта][az-container-export]. Экспорт позволяет хранить требуемых конфигураций групп контейнеров в системе управления версиями для «конфигурация как код». Или вы можете использовать экспортированный файл в качестве отправной точки при разработке новой конфигурации в YAML-файле.

## <a name="resource-allocation"></a>Выделение ресурсов

Экземпляры контейнеров Azure выделяет ресурсы, такие как ЦП, памяти и при необходимости [GPU] [ gpus] (Предварительная версия) для группы контейнеров, добавив [запросы ресурсов] [ resource-requests] экземпляров в группе. Использование ресурсов ЦП в качестве примера, если вы создаете группу контейнеров с двумя экземплярами, каждый запрос 1 ЦП, а затем в группе контейнеров выделяется 2 ЦП.

Максимальное ресурсы, доступные для группы контейнеров зависят от [регион Azure] [ region-availability] для развертывания.

### <a name="container-resource-requests-and-limits"></a>Запросы ресурсов контейнера и ограничения

* По умолчанию экземпляры контейнеров в группе общий доступ к запрошенным ресурсам группы. В группу с помощью двух экземпляров каждого запрашивающий 1 ЦП, группе в целом имеет доступ к 2 ЦП. Каждый экземпляр может использовать 2 ЦП и экземпляры могут конкурировать за ресурсы ЦП, пока они выполняются.

* Чтобы ограничить использование ресурсов экземпляром в группе, при необходимости установите [предел ресурсов] [ resource-limits] для экземпляра. В группе с двумя экземплярами запрос 1 ЦП, один из контейнеров могут потребовать дополнительных ЦП для выполнения другого.

  В этом сценарии можно было задать лимитом в 0,5 ресурсов ЦП для одного экземпляра, а ограничение на число 2 ЦП для второго. Такая конфигурация ограничивает использование ресурсов первый контейнер в 0,5 ресурсов ЦП, что позволяет использовать до полной 2 процессоров, если он доступен второй контейнер.

Дополнительные сведения см. в разделе [ResourceRequirements] [ resource-requirements] свойство в контейнере группирует REST API.

### <a name="minimum-and-maximum-allocation"></a>Минимальное и максимальное выделение

* Выделить **минимальное** 1 ЦП и 1 ГБ памяти для группы контейнеров. Экземпляры отдельных контейнеров в группе может быть предоставлен меньше, чем 1 ЦП и 1 ГБ памяти. 

* Для **максимальное** ресурсы в группе контейнеров, см. в статье [доступность ресурсов] [aci--доступность по регионам] для экземпляры контейнеров Azure в области развертывания.

## <a name="networking"></a>Сеть

Группы контейнеров совместно используют IP-адрес и пространство имен порта для этого IP-адреса. Чтобы внешние клиенты могли получить доступ к контейнеру в группе, необходимо предоставить порт по IP-адресу и из контейнера. Так как контейнеры в группе совместно используют пространство имен порта, сопоставление порта не поддерживается. Контейнеры в группе могут связываться друг с другом через локальный узел на порты, которые они предоставили доступ, даже если эти порты не предоставлены извне по IP-адрес группы.

При необходимости развернуть группы контейнеров в [виртуальной сети Azure] [ virtual-network] (Предварительная версия), чтобы разрешить контейнеры для безопасного обмена данными с другими ресурсами в виртуальной сети.

## <a name="storage"></a>Хранилище

Вы можете указать внешние тома для подключения в пределах группы контейнеров. Эти тома можно сопоставить с конкретными путями в пределах отдельных контейнеров в группе.

## <a name="common-scenarios"></a>Распространенные сценарии

Многоконтейнерные группы удобны в случаях, когда нужно разделить одну функциональную задачу на небольшое число образов контейнеров. Эти образы затем могут доставляться различными командами сотрудников и иметь отдельные требования к ресурсам.

Пример использования может включать следующее:

* Контейнер, обслуживающий веб-приложение, и контейнер, извлекающий последнее содержимое из системы управления версиями.
* Контейнер приложения и журнала. Контейнер журнала собирает журналы и выходные данные метрик для основного приложения и записывает их в хранилище для долговременного хранения.
* Контейнер приложения и мониторинга. Контейнер мониторинга периодически выполняет запрос к приложению, чтобы убедиться, что оно правильно работает и отвечает, и выдает предупреждение, если это не так.
* Контейнера интерфейсной и серверной части контейнера. Переднего плана могли бы обслуживать веб-приложения с серверной службой для получения данных. 

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как развертывать группу контейнеров с несколькими контейнерами с использованием шаблона Azure Resource Manager:

> [!div class="nextstepaction"]
> [Развертывание группы контейнеров][resource-manager template]

<!-- IMAGES -->
[container-groups-example]: ./media/container-instances-container-groups/container-groups-example.png

<!-- LINKS - External -->
[dcos-pod]: https://dcos.io/docs/1.10/deploying-services/pods/
[kubernetes-pod]: https://kubernetes.io/docs/concepts/workloads/pods/pod/

<!-- LINKS - Internal -->
[resource-manager template]: container-instances-multi-container-group.md
[yaml-file]: container-instances-multi-container-yaml.md
[region-availability]: container-instances-region-availability.md
[resource-requests]: /rest/api/container-instances/containergroups/createorupdate#resourcerequests
[resource-limits]: /rest/api/container-instances/containergroups/createorupdate#resourcelimits
[resource-requirements]: /rest/api/container-instances/containergroups/createorupdate#resourcerequirements
[azure-files]: container-instances-volume-azure-files.md
[virtual-network]: container-instances-vnet.md
[gpus]: container-instances-gpu.md
[az-container-export]: /cli/azure/container#az-container-export
