---
title: Введение в контейнерные группы
description: Узнайте о контейнерных группах в Azure Container Instances, сборнике экземпляров, которые разделяют жизненный цикл и ресурсы, такие как хранение и сеть
ms.topic: article
ms.date: 11/01/2019
ms.custom: mvc
ms.openlocfilehash: 73781418321c3932bf3e0190b646dcd3bb178195
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79247219"
---
# <a name="container-groups-in-azure-container-instances"></a>Группы контейнеров в службе "Экземпляры контейнеров Azure"

Ресурс верхнего уровня в службе "Экземпляры контейнеров Azure" — это *группа контейнеров*. В этой статье представлены сведения о группах контейнеров и описаны сценарии, которые можно реализовать с их помощью.

## <a name="what-is-a-container-group"></a>Что такое контейнерная группа?

Группа контейнеров — это набор контейнеров, которые можно планировать на одном хост-компьютере. Контейнеры в группе контейнеров имеют общий жизненный цикл, ресурсы, локальную сеть и объемы хранения. Это похоже по концепции на *стручок* в [Kubernetes][kubernetes-pod].

На схеме ниже показан пример группы контейнеров, включающей несколько контейнеров:

![Диаграмма групп контейнеров][container-groups-example]

Группа контейнеров в этом примере:

* Планируется на одном хост-компьютере.
* Принимает назначенную метку DNS-имени.
* Предоставляет один общедоступный IP-адрес с одним предоставленным портом.
* Состоит из двух частей. Один контейнер ожидает передачи данных на порте 80, а другой — на порте 5000.
* Включает два общих файловых ресурса Azure в качестве подключенных томов. При этом к каждому контейнеру локально подключен один из общих ресурсов.

> [!NOTE]
> Многоконтейнерные группы в настоящее время поддерживают только контейнеры Linux. Для контейнеров Windows экземпляры контейнеров Azure поддерживают развертывание только одного экземпляра контейнеров. В то время как мы работаем над тем, чтобы привести все функции в контейнеры Windows, вы можете найти текущие различия платформы в [обзоре](container-instances-overview.md#linux-and-windows-containers)службы.

## <a name="deployment"></a>Развертывание

Вот два распространенных способа развертывания группы с несколькими контейнерами: использование [шаблона менеджера ресурсов][resource-manager template] или [файла YAML.][yaml-file] Шаблон управления ресурсами рекомендуется при развертывании дополнительных ресурсов службы Azure (например, совместное использование [файлов Azure)][azure-files]при развертывании экземпляров контейнеров. В связи с более кратким характером формата YAML рекомендуется использовать файл YAML, когда развертывание включает только экземпляры контейнеров. Подробную информацию о свойствах, которые вы можете установить, можно узнать [в справочной справке менеджера ресурсов](/azure/templates/microsoft.containerinstance/containergroups) или [справочной документации YAML.](container-instances-reference-yaml.md)

Чтобы сохранить конфигурацию контейнерной группы, можно экспортировать конфигурацию в файл YAML с помощью [экспорта контейнеров][az-container-export]Azure CLI. Экспорт позволяет хранить конфигурации группы контейнеров в управлении версиями для "конфигурации как кода". Или вы можете использовать экспортированный файл в качестве отправной точки при разработке новой конфигурации в YAML-файле.



## <a name="resource-allocation"></a>Выделение ресурсов

Случаи контейнеров Azure распределяет ресурсы, такие как процессоры, память и опционально [графические процессоры][gpus] (предварительный просмотр) группе мультиконтейнеров, добавляя [запросы ресурсов][resource-requests] экземпляров группы. В качестве примера можно привести ресурсы процессора, если вы создаете группу контейнеров с двумя экземплярами контейнеров, каждый из которых запрашивает 1 процессор, то группе контейнеров выделяется 2 процессора.

### <a name="resource-usage-by-container-instances"></a>Использование ресурсов в случаях контейнеров

Каждому экземпляру контейнера в группе выделяются ресурсы, указанные в запросе ресурсов. Однако максимальные ресурсы, используемые экземпляром контейнера в группе, могут быть разными, если настроить его факультативное свойство [ограничения ресурсов.][resource-limits] Предел ьдота экземпляра контейнера должен быть больше или равен свойству обязательного [запроса ресурса.][resource-requests]

* Если не указано ограничение ресурсов, максимальное использование ресурса экземпляра контейнера совпадает с запросом на ресурс.

* Если вы указываете лимит для экземпляра контейнера, максимальное использование экземпляра может быть больше, чем запрос, вплоть до установленного лимита. Соответственно, использование ресурсов другими экземплярами контейнеров в группе может уменьшиться. Максимальным ограничением ресурсов, который можно установить для экземпляра контейнера, является общий объем ресурсов, выделенных группе.
    
Например, в группе с двумя экземплярами контейнеров, каждый из которых запрашивает 1 процессор, один из контейнеров может запустить рабочую нагрузку, которая требует больше процессоров для запуска, чем другой.

В этом сценарии можно установить ограничение ресурсов в 2 процессора для экземпляра контейнера. Эта конфигурация позволяет экземпляру контейнера использовать до полного 2 процессора, если они доступны.

### <a name="minimum-and-maximum-allocation"></a>Минимальное и максимальное распределение

* Выделите **не менее** 1 процессора и 1 ГБ памяти контейнерной группе. Отдельные экземпляры контейнера в группе могут быть подготовлены с менее чем 1 процессором и 1 ГБ памяти. 

* Для **максимального** использования ресурсов в [resource availability][region-availability] группе контейнеров см.

## <a name="networking"></a>Сети

Контейнерные группы могут совместно с IP-адресом, одним или нескольком портов на этом IP-адресе и меткой DNS с полностью квалифицированным доменным именем (ФЗДН). Чтобы внешние клиенты могли получить доступ к контейнеру в группе, необходимо предоставить порт по IP-адресу и из контейнера. Поскольку контейнеры внутри группы имеют пространство для имен порта, отображение портов не поддерживается. IP-адрес контейнерной группы и ФЗДН будут выпущены при удалении группы контейнеров. 

В контейнерной группе экземпляры контейнеров могут добираться друг до друга через localhost в любом порту, даже если эти порты не подвергаются внешнему воздействию IP-адреса группы или из контейнера.

Дополнительно развертывайте группы контейнеров в [виртуальную сеть Azure,][virtual-network] чтобы позволить контейнерам безопасно общаться с другими ресурсами виртуальной сети.

## <a name="storage"></a>Хранилище

Вы можете указать внешние тома для подключения в пределах группы контейнеров. Поддерживаемые тома включают в себя:
* [Общая папка Azure][azure-files]
* [Секрет][secret]
* [Пустой каталог][empty-directory]
* [Клонированный git репо][volume-gitrepo]

Эти тома можно сопоставить с конкретными путями в пределах отдельных контейнеров в группе. 

## <a name="common-scenarios"></a>Распространенные сценарии

Многоконтейнерные группы удобны в случаях, когда нужно разделить одну функциональную задачу на небольшое число образов контейнеров. Эти образы затем могут доставляться различными командами сотрудников и иметь отдельные требования к ресурсам.

Пример использования может включать следующее:

* Контейнер, обслуживающий веб-приложение, и контейнер, извлекающий последнее содержимое из системы управления версиями.
* Контейнер приложения и журнала. Контейнер журнала собирает журналы и выходные данные метрик для основного приложения и записывает их в хранилище для долговременного хранения.
* Контейнер приложения и мониторинга. Контейнер мониторинга периодически выполняет запрос к приложению, чтобы убедиться, что оно правильно работает и отвечает, и выдает предупреждение, если это не так.
* Передний конец контейнера и задней части контейнера. Передняя часть может служить веб-приложений, с задней части работает служба для получения данных. 

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как развертывать группу контейнеров с несколькими контейнерами с использованием шаблона Azure Resource Manager:

> [!div class="nextstepaction"]
> [Развертывание группы контейнеров][resource-manager template]

<!-- IMAGES -->
[container-groups-example]: ./media/container-instances-container-groups/container-groups-example.png

<!-- LINKS - External -->
[dcos-pod]: https://dcos.io/docs/1.10/deploying-services/pods/
[kubernetes-pod]: https://kubernetes.io/docs/concepts/workloads/pods/pod/

<!-- LINKS - Internal -->
[resource-manager template]: container-instances-multi-container-group.md
[yaml-file]: container-instances-multi-container-yaml.md
[region-availability]: container-instances-region-availability.md
[resource-requests]: /rest/api/container-instances/containergroups/createorupdate#resourcerequests
[resource-limits]: /rest/api/container-instances/containergroups/createorupdate#resourcelimits
[resource-requirements]: /rest/api/container-instances/containergroups/createorupdate#resourcerequirements
[azure-files]: container-instances-volume-azure-files.md
[virtual-network]: container-instances-vnet.md
[secret]: container-instances-volume-secret.md
[volume-gitrepo]: container-instances-volume-gitrepo.md
[gpus]: container-instances-gpu.md
[empty-directory]: container-instances-volume-emptydir.md
[az-container-export]: /cli/azure/container#az-container-export
