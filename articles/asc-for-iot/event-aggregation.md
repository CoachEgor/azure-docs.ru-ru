---
title: Общие сведения о центре безопасности Azure для агрегирования событий IoT | Документация Майкрософт
description: Сведения о центре безопасности Azure для агрегирования событий IoT.
services: asc-for-iot
ms.service: asc-for-iot
documentationcenter: na
author: mlottner
manager: rkarlin
editor: ''
ms.assetid: d40dac0b-abd0-4ff5-82eb-0f511ee13725
ms.subservice: asc-for-iot
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 09/26/2019
ms.author: mlottner
ms.openlocfilehash: b1a14cf4c8aec2f3dbfa7bc4fd0800d9fd1fb0aa
ms.sourcegitcommit: e9936171586b8d04b67457789ae7d530ec8deebe
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71327316"
---
# <a name="azure-security-center-for-iot-event-aggregation"></a>Центр безопасности Azure для агрегирования событий IoT

Центр безопасности Azure для агентов безопасности IoT собирает данные и системные события с локального устройства и отправляет эти данные в облако Azure для обработки и анализа. Агент безопасности собирает различные типы событий устройств, включая новый процесс и новые события подключения. Как новые, так и новые события подключения могут периодически встречаться на устройстве в течение секунды, и, хотя это и важнее для обеспечения надежной и полной безопасности, количество сообщений, которые агенты безопасности вынуждены пересылать, может быстро достигать или превышать центр Интернета вещей. квоты и ограничения затрат. Однако эти события содержат очень ценные сведения о безопасности, которые крайне важны для защиты устройства.

Чтобы снизить дополнительные квоты и затраты, сохраняя защиту устройств, центр безопасности Azure для агентов Интернета вещей объединяет эти типы событий.

Агрегирование событий **включено по** умолчанию, и хотя это и не рекомендуется, можно вручную **Отключить** в любое время.

В настоящее время агрегирование доступно для следующих типов событий:
* процесскреате
* коннектионкреате
* Процесстерминате (только для Windows)

## <a name="how-does-event-aggregation-work"></a>Как работает агрегирование событий?
Когда функция агрегирования событий **остается, центр**безопасности Azure для агентов Интернета вещей объединяет события в течение интервала времени или временного окна.
По истечении интервала времени агент отправляет Агрегированные события в облако Azure для дальнейшего анализа.
Агрегированные события хранятся в памяти до их отправки в облако Azure.

Чтобы уменьшить объем памяти агента, всякий раз, когда агент собирает идентичное событие, которое уже хранится в памяти, агент увеличивает число попаданий для этого конкретного события. При прохождении интервала времени агрегирования агент отправляет число попаданий каждого конкретного типа произошедшего события. Агрегирование событий — это просто агрегирование числа попаданий для каждого собранного типа события.

События считаются идентичными только при соблюдении следующих условий. 

* События Процесскреате — при идентичности **командной строки**, **исполняемого файла**, * * username и **UserID**
* События Коннектионкреате. когда **commandline**, **UserID**, **Direction**, **локальный адрес**, **Удаленный адрес**, * * протокол и **порт назначения** идентичны
* События Процесстерминате — когда **исполняемый файл** и **состояние выхода** идентичны

### <a name="working-with-aggregated-events"></a>Работа с агрегированными событиями

Во время агрегирования свойства событий, которые не являются агрегированными, отбрасываются и отображаются в log Analytics со значением 0. 
* Процесскреате Events- **ProcessID**и **парентпроцессид** имеют значение 0.
* Коннектионкреате Events- **ProcessID**и **Исходный порт** имеют значение 0

## <a name="event-aggregation-based-alerts"></a>Предупреждения на основе агрегирования событий 
После анализа Центр безопасности Azure для Интернета вещей создает оповещения системы безопасности для подозрительных агрегированных событий. Оповещения, созданные из агрегированных событий, отображаются только один раз для каждого агрегированного события.

Время начала статистической обработки, время окончания и число попаданий для каждого события регистрируются в поле **екстрадетаилс** событий в log Analytics для использования во время расследования. 

Каждое Агрегированное событие представляет 24-часовой период собранных оповещений. С помощью меню параметров событий в левом верхнем углу каждого события можно **Закрыть** каждое отдельное Агрегированное событие.    

## <a name="event-aggregation-twin-configuration"></a>Настройка двойника агрегирования событий
Внесите изменения в конфигурацию центра безопасности Azure для агрегирования событий IoT внутри [объекта конфигурации агента](how-to-agent-configuration.md) двойника удостоверение модуля **азуреиотсекурити** .

| Имя конфигурации | Возможные значения | Подробнее | Примечания |
|:-----------|:---------------|:--------|:--------|
| аггрегатионенабледпроцесскреате | boolean | Включить или отключить агрегирование событий для событий создания процесса |
| аггрегатионинтервалпроцесскреате | Строка TimeSpan ISO8601 | Интервал агрегирования для событий создания процесса |
| аггрегатионенабледконнектионкреате | boolean| Включение и отключение агрегирования событий для событий создания соединения |
| аггрегатионинтервалконнектионкреате | Строка TimeSpan ISO8601 | Интервал агрегирования для событий создания соединения |
| аггрегатионенабледпроцесстерминате | boolean | Включить или отключить агрегирование событий для событий завершения процесса | Только Windows|
| аггрегатионинтервалпроцесстерминате | Строка TimeSpan ISO8601 | Интервал агрегирования для событий завершения процесса | Только Windows|
|

## <a name="default-configurations-settings"></a>Параметры конфигурации по умолчанию

| Имя конфигурации | Значения по умолчанию |
|:-----------|:---------------|
| аггрегатионенабледпроцесскреате | true |
| аггрегатионинтервалпроцесскреате | PT1H|
| аггрегатионенабледконнектионкреате | true |
| аггрегатионинтервалконнектионкреате | PT1H|
| аггрегатионенабледпроцесстерминате | true |
| аггрегатионинтервалпроцесстерминате | PT1H|
|

## <a name="next-steps"></a>Следующие шаги

В этой статье вы узнали о центре безопасности Azure для агрегирования агента безопасности IoT и доступных параметрах конфигурации событий.

Чтобы продолжить работу с центром безопасности Azure для развертывания IoT, используйте следующие статьи:

- Общие сведения о [методах проверки подлинности агента безопасности](concept-security-agent-authentication-methods.md)
- Выбор и развертывание [агента безопасности](how-to-deploy-agent.md)
- Проверка [предварительных требований для службы](service-prerequisites.md) IOT в центре безопасности Azure
- Узнайте, как [включить центр безопасности Azure для службы IOT в центре Интернета вещей](quickstart-onboard-iot-hub.md)
- Ознакомьтесь с дополнительными сведениями о службе в [центре безопасности Azure для IOT. вопросы и ответы](resources-frequently-asked-questions.md)
