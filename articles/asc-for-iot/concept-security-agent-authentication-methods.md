---
title: Методы проверки подлинности для центра безопасности Azure для Интернета вещей Preview | Документация Майкрософт
description: Дополнительные сведения о методах проверки подлинности, доступных при использовании центра безопасности Azure для службы Интернета вещей.
services: asc-for-iot
ms.service: ascforiot
documentationcenter: na
author: mlottner
manager: rkarlin
editor: ''
ms.assetid: 10b38f20-b755-48cc-8a88-69828c17a108
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/26/2019
ms.author: mlottner
ms.openlocfilehash: 634d1aedfaf868766e3c1bf97373b9c310885835
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "65198383"
---
# <a name="security-agent-authentication-methods"></a>Методы проверки подлинности агента безопасности 

> [!IMPORTANT]
> Центр безопасности Azure для Интернета вещей сейчас предоставляется в общедоступной предварительной версии.
> Предварительная версия предоставляется без соглашения об уровне обслуживания. Мы не рекомендуем использовать ее в рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Здесь объясняются методы проверки подлинности, которые можно использовать с агентом AzureIoTSecurity для проверки подлинности в центре Интернета вещей.

Для каждого устройства встроен в центр безопасности Azure (ASC) для Интернета вещей в центр Интернета вещей необходим модуль безопасности. Для аутентификации устройства, ASC для Интернета вещей можно использовать один из двух способов. Выберите метод, который лучше всего подходит для существующего решения Интернета вещей. 

> [!div class="checklist"]
> * Параметр модуля безопасности
> * Параметр устройства

## <a name="authentication-methods"></a>Методы проверки подлинности

Два метода для AzureIoTSecurity агента для выполнения проверки подлинности:

 - **Модуль** режим проверки подлинности<br>
   Модуль проверки подлинности независимо от двойника устройства.
   Используйте этот тип проверки подлинности, при желании агент безопасности выделенной аутентификацию через модуль безопасности (только для симметричного ключа).
        
 - **Устройство** режим проверки подлинности<br>
    В этом методе агент безопасности сначала выполняет проверку подлинности с использованием удостоверения устройства. После первоначальной проверки подлинности, ASC для Интернета вещей агент выполняет **REST** вызов в центр Интернета вещей с помощью REST API с данными проверки подлинности устройства. Затем ASC для Интернета вещей агент запрашивает метод проверки подлинности модуль безопасности и данных из центра Интернета вещей. На заключительном этапе ASC для Интернета вещей агент выполняет проверку подлинности от ASC для модуля IoT.
    
    Используйте этот тип проверки подлинности, если вы хотите повторно использовать существующий метод проверки подлинности устройства (самозаверяющего сертификата или симметричного ключа) агент безопасности. 

См. в разделе [параметры установки агента безопасности](#security-agent-installation-parameters) Дополнительные способы настройки.
                                
## <a name="authentication-methods-known-limitations"></a>Известные ограничения методов проверки подлинности

- **Модуль** режим проверки подлинности поддерживает только проверку подлинности симметричного ключа.
- Сертификат, подписанный ЦС не поддерживается **устройства** режим проверки подлинности.  

## <a name="security-agent-installation-parameters"></a>Параметры установки агента безопасности

Когда [развертывание агента безопасности](how-to-deploy-agent.md), необходимо предоставить сведения о проверке подлинности в виде аргументов.
В следующей таблице описаны эти аргументы.


|Параметр|Описание|Параметры|
|---------|---------------|---------------|
|**identity**|Режим проверки подлинности| **Модуль** или **устройства**|
|**type**|Authentication type (Тип проверки подлинности)|**SymmetricKey** или **SelfSignedCertificate**|
|**filePath**|Абсолютный путь к файлу, содержащему сертификат или симметричный ключ| |
|**gatewayHostname**|Полное ДОМЕННОЕ имя центра Интернета вещей|Пример: ContosoIotHub.azure-devices.net|
|**deviceId**|Идентификатор устройства.|Пример: MyDevice1|
|**certificateLocationKind**|Расположение хранилища сертификатов|**Локальный_файл** или **Store**|


При использовании скрипта установки безопасности агента, следующая конфигурация выполняется автоматически.

Чтобы изменить подлинности агента защиты вручную, измените файл конфигурации. 

## <a name="change-authentication-method-after-deployment"></a>Изменить метод проверки подлинности после развертывания

При развертывании агента security с помощью сценария установки, автоматически создается файл конфигурации.

Чтобы изменить методы проверки подлинности после развертывания, ручное редактирование файла конфигурации является обязательным.


### <a name="c-based-security-agent"></a>C#-агент безопасности

Изменить _Authentication.config_ со следующими параметрами:

```xml
<Authentication>
  <add key="deviceId" value=""/>
  <add key="gatewayHostname" value=""/>
  <add key="filePath" value=""/>
  <add key="type" value=""/>
  <add key="identity" value=""/>
  <add key="certificateLocationKind" value="" />
</Authentication>
```

### <a name="c-based-security-agent"></a>Агент безопасности на основе C

Изменить _LocalConfiguration.json_ со следующими параметрами:

```json
"Authentication" : {
    "Identity" : "",
    "AuthenticationMethod" : "",
    "FilePath" : "",
    "DeviceId" : "",
    "HostName" : ""
}
```

## <a name="see-also"></a>См. также
- [Общие сведения о безопасности агентов](security-agent-architecture.md)
- [Развернуть агент безопасности](how-to-deploy-agent.md)
- [Доступ к данным необработанной безопасности](how-to-security-data-access.md)
