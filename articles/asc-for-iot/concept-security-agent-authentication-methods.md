---
title: Методы аутентификации для Центра безопасности Azure для IoT Документы Майкрософт
description: Узнайте о различных методах аутентификации, доступных при использовании службы безопасности Azure Для Службы Обработки IoT.
services: asc-for-iot
ms.service: asc-for-iot
documentationcenter: na
author: mlottner
manager: rkarlin
editor: ''
ms.assetid: 10b38f20-b755-48cc-8a88-69828c17a108
ms.subservice: asc-for-iot
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/23/2019
ms.author: mlottner
ms.openlocfilehash: 16f7f91e02d118d9f9a295ebb79a6cd0187dd9fd
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "68596464"
---
# <a name="security-agent-authentication-methods"></a>Методы аутентификации агента безопасности 

В этой статье разъясняется различные методы проверки подлинности, которые можно использовать с помощью агента AzureIoTSecurity для проверки подлинности с помощью концентратора IoT.

Для каждого устройства, наборту которого находится центр безопасности Azure для IoT в концентраторе IoT, необходим модуль безопасности. Для проверки подлинности устройства Центр безопасности Azure для IoT может использовать один из двух методов. Выберите метод, который лучше всего подходит для существующего решения IoT. 

> [!div class="checklist"]
> * Опция SecurityModule
> * Опция устройства

## <a name="authentication-methods"></a>Методы проверки подлинности

Два метода, которые агент AzureIoTSecurity выполняет для проверки подлинности:

 - Режим проверки подлинности **SecurityModule**<br>
   Агент проверяется с помощью идентификации модуля безопасности независимо от личности устройства.
   Используйте этот тип проверки подлинности, если вы хотите, чтобы агент безопасности использовал специальный метод аутентификации через модуль безопасности (только симметричный ключ).
        
 - Режим проверки подлинности **устройства**<br>
    В этом методе агент безопасности сначала проверяет подлинность с помощью итог устройства. После первоначальной проверки подлинности Центр безопасности Azure для агента IoT выполняет вызов **REST** в концентратор IoT с помощью REST API с данными аутентификации устройства. Затем Центр безопасности Azure для агента IoT запрашивает метод проверки подлинности модуля безопасности и данные из концентратора IoT. На заключительном этапе Центр безопасности Azure для агента IoT выполняет аутентификацию в отношении модуля IoT Центра безопасности Azure.
    
    Используйте этот тип проверки подлинности, если вы хотите, чтобы агент безопасности повторно использовал существующий метод проверки подлинности устройства (самоподписанный сертификат или симметричный ключ). 

Ознакомьтесь [с параметрами установки агента безопасности,](#security-agent-installation-parameters) чтобы узнать, как настроить.
                                
## <a name="authentication-methods-known-limitations"></a>Методы аутентификации известные ограничения

- Режим проверки подлинности **SecurityModule** поддерживает только симметричную проверку подлинности ключей.
- Сертификат CA-Signed не поддерживается режимом проверки подлинности **устройства.**  

## <a name="security-agent-installation-parameters"></a>Параметры установки агента безопасности

При [развертывании агента безопасности](how-to-deploy-agent.md)в качестве аргументов должны быть предоставлены данные аутентификации.
Эти аргументы задокументированы в следующей таблице.


|Название параметра Linux | Имя параметра Windows | Параметры коротких рук |Описание|Параметры|
|---------------------|---------------|---------|---------------|---------------|
|аутентификация-идентификация|АутентификацияIdentity|Aui|Идентификационная личность| **Модуль безопасности** или **устройство**|
|authentication-method|АутентификацияМетод|Аум|Метод проверки подлинности|**SymmetricKey** или **SelfSignedCertificate**|
|файл-путь|FilePath|f|Абсолютный полный путь для файла, содержащего сертификат или симметричный ключ| |
|имя хозяина|HostName|hn|ФЗДН концентратора IoT|Пример: ContosoIotHub.azure-devices.net|
|устройство-id|deviceId|Ди|Идентификатор устройства.|Пример: MyDevice1|
|сертификат-местоположение-вид|СертификатLocationKind|Cl|Место хранения сертификатов|**LocalFile** или **магазин**|
|


При использовании скрипта агента безопасности установки следующая конфигурация выполняется автоматически. Чтобы отсеять проверку подлинности агента безопасности вручную, отспособите файл конфигурации. 

## <a name="change-authentication-method-after-deployment"></a>Изменение метода проверки подлинности после развертывания

При развертывании агента безопасности со скриптом установки автоматически создается файл конфигурации.

Для изменения методов проверки подлинности после развертывания требуется ручное редактирование файла конфигурации.


### <a name="c-based-security-agent"></a>Агент по безопасности на основе C'

Edit _Authentication.config_ со следующими параметрами:

```xml
<Authentication>
  <add key="deviceId" value=""/>
  <add key="gatewayHostname" value=""/>
  <add key="filePath" value=""/>
  <add key="type" value=""/>
  <add key="identity" value=""/>
  <add key="certificateLocationKind" value="" />
</Authentication>
```

### <a name="c-based-security-agent"></a>C-агент безопасности

Оторите _LocalConfiguration.json_ со следующими параметрами:

```json
"Authentication" : {
    "Identity" : "",
    "AuthenticationMethod" : "",
    "FilePath" : "",
    "DeviceId" : "",
    "HostName" : ""
}
```

## <a name="see-also"></a>См. также
- [Обзор агентов безопасности](security-agent-architecture.md)
- [Развертывание агента безопасности](how-to-deploy-agent.md)
- [Доступ к необработанным данным безопасности](how-to-security-data-access.md)
