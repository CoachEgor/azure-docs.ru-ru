---
title: Возможности поисковых компьютеров с помощью записных книжек в Azure Sentinel | Документация Майкрософт
description: В этой статье описывается, как использовать записные книжки с возможностями Поиск Sentinel маркеров Azure.
services: sentinel
documentationcenter: na
author: rkarlin
manager: rkarlin
editor: ''
ms.assetid: 1721d0da-c91e-4c96-82de-5c7458df566b
ms.service: azure-sentinel
ms.subservice: azure-sentinel
ms.devlang: na
ms.topic: conceptual
ms.custom: mvc
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 2/28/2019
ms.author: rkarlin
ms.openlocfilehash: 5b90ecc1db686b698668b07bd839304b425445ca
ms.sourcegitcommit: 992e070a9f10bf43333c66a608428fcf9bddc130
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2019
ms.locfileid: "71240532"
---
# <a name="use-jupyter-notebooks-to-hunt-for-security-threats"></a>Использование записных книжек Jupyter для поиска угроз безопасности

Основой Azure Sentinel является хранилище данных. Он сочетает высокопроизводительные запросы, динамическую схему и масштабируется до больших объемов данных. Портал Sentinel Azure и все инструменты Azure Sentinel используют общий API для доступа к этому хранилищу данных. Этот API также доступен для внешних средств, таких как записные книжки [Jupyter](https://jupyter.org/) и Python. Хотя многие распространенные задачи могут быть выполнены на портале, Jupyter расширяет область действия, с помощью которых можно выполнять эти данные. Она сочетает полную программируемость с огромным набором библиотек для машинного обучения, визуализации и анализа данных. Эти атрибуты делают Jupyter привлекательным инструментом для расследования и исследования безопасности.

![Пример записной книжки](./media/notebooks/sentinel-notebooks-map.png)

Мы разработали интерфейс Jupyter на портале Sentinel Azure, что упрощает создание и выполнение записных книжек для анализа данных. Библиотека *кклмагик* предоставляет связующий объект, который позволяет выполнять запросы из Azure Sentinel и запускать их непосредственно внутри записной книжки. Запросы используют [язык запросов Kusto](https://kusto.azurewebsites.net/docs/query/index.html). Несколько записных книжек, разработанных некоторыми аналитиками корпорации Майкрософт по безопасности, упаковываются с помощью Azure Sentinel. Некоторые из этих записных книжек созданы для конкретного сценария и могут использоваться "как есть". Другие предназначены в качестве примеров для демонстрации методов и функций, которые можно копировать или адаптировать для использования в записных книжках. Другие записные книжки также могут быть импортированы из сообщества Azure Sentinel Community.

Интегрированный интерфейс Jupyter использует [записные книжки Azure](https://notebooks.azure.com/) для хранения, совместного использования и выполнения записных книжек. Эти записные книжки также можно запускать локально (при наличии среды Python и Jupyter на компьютере) или в других средах Жуптерхуб, таких как Azure Databricks.

В записных книжках есть два компонента:

- интерфейс на основе браузера, в котором вводятся и запускаются запросы и код, а также место отображения результатов выполнения.
- *ядро* , ответственное за синтаксический анализ и выполнение самого кода. 

В записных книжках Azure этот ядро выполняется по умолчанию в *свободном облачном вычислении и хранилище* Azure. Если записные книжки содержат сложные модели машинного обучения или визуализации, следует рассмотреть возможность использования более мощных выделенных вычислительных ресурсов, таких как виртуальные машины для обработки и [анализа данных](https://azure.microsoft.com/services/virtual-machines/data-science-virtual-machines/) (DSVM). Записные книжки в вашей учетной записи остаются частными, если вы не решили поделиться ими.

В записных книжках Azure Sentinel используются многие популярные библиотеки Python, такие как Pandas, Matplotlib, Боке и др. Существует огромное количество других пакетов Python для выбора, охватывающих такие области, как:

- визуализации и графика
- обработка и анализ данных
- Статистика и числовые вычисления
- машинное обучение и глубокое обучение

Мы также выпустили некоторые средства безопасности Jupyter с открытым кодом в пакете с именем [мстикпи](https://github.com/Microsoft/msticpy/). Этот пакет используется во многих включенных записных книжках. Средства мстикпи предназначены специально для создания записных книжек для получения и исследования и активно работают над новыми функциями и улучшениями.

В число исходных записных книжек входят следующие:

- **Интерактивное исследование — обработка оповещений**: Позволяет быстро рассматривать предупреждения путем анализа действий на затрагиваемых узлах.
- **Руководство по поиску — обозреватель узлов Windows**: Позволяет просматривать действия с учетной записью, выполнения процессов, сетевые операции и другие события на узле.  
- **Руководство по поиску-Office 365 — обзор**: Поиск подозрительного действия Office 365 в нескольких наборах данных O365.

[Репозиторий сообщества Azure Sentinel Community](https://github.com/Azure/Azure-Sentinel) — это расположение для всех будущих записных книжек Azure Sentinel, созданных корпорацией Майкрософт или предоставляемых сообществом.

## <a name="run-a-notebook"></a>Запуск записной книжки

В следующем примере мы создадим проект записных книжек Azure на портале Sentinel Azure, заполнив проект записными книжками. Перед использованием этих записных книжек рекомендуется создать копию записной книжки и работать с копией. Работа с копиями позволяет безопасно обновлять будущие версии записных книжек без перезаписи каких бы то ни было данных.

1. На портале Sentinel Azure щелкните **записные книжки** в меню навигации. Чтобы создать проект записных книжек Azure, щелкните **клонировать Azure Sentinel Notebooks** или откройте существующие проекты записных книжек и щелкните **Перейти к записным книжкам**.
  
   ![Выберите записные книжки](./media/notebooks/sentinel-azure-notebooks-home.png)

2. Если вы решили **клонировать записные книжки Azure Sentinel** на предыдущем шаге, появится следующее диалоговое окно. Нажмите кнопку **Импорт** , чтобы клонировать репозиторий GitHub в проект записных книжек Azure. Если у вас нет учетной записи записных книжек Azure, вам будет предложено создать ее и выполнить вход.

   ![Импорт записной книжки](./media/notebooks/sentinel-notebooks-clone.png)

3. При создании нового проекта необходимо присвоить ему имя. Используйте имя или тип по умолчанию в новом проекте. Не проверять **рекурсивный параметр Clone** . Этот параметр относится к связанному репозиториев GitHub. Если щелкнуть **Импорт** , начнется клонирование содержимого GitHub, что может занять несколько минут.

   ![Импорт записной книжки](./media/notebooks/sentinel-create-project.png)

4. Откройте папку **записных книжек** , чтобы просмотреть записные книжки. В каждой записной книжке рассматриваются шаги по выполнению поиска или исследования. Библиотеки и другие зависимости, необходимые для записной книжки, можно установить из самой записной книжки или с помощью простой процедуры настройки. Конфигурация, связывающая проект записной книжки с подпиской Azure Sentinel, автоматически подготавливается на предыдущих шагах. Ваши записные книжки готовы к выполнению в рабочей области Azure Sentinel Log Analytics.

   ![Импорт репозитория](./media/notebooks/sentinel-open-notebook1.png)

5. Откройте записную книжку. Для запуска записных книжек (выделенных) по умолчанию выбран свободный расчет. Если вы настроили DSVM для использования (см. выше), выберите DSVM и выполните проверку подлинности перед открытием первой записной книжки. Щелкните записную книжку, чтобы открыть ее.

   ![выбрать записную книжку](./media/notebooks/sentinel-open-notebook2.png)

6. Выбор версии Python. При первом открытии записной книжки может появиться запрос на выбор версии ядра. Если нет, выберите ядро для использования следующим образом. Необходимо выбрать ядро Python 3,6 или более поздней версии (в правом верхнем углу окна записной книжки).

   ![выбрать записную книжку](./media/notebooks/sentinel-select-kernel.png)

Для быстрого ознакомления с запросом данных в Azure Sentinel просмотрите записную книжку в папке "главные записные книжки [".](https://github.com/Azure/Azure-Sentinel/blob/master/Notebooks/Get%20Started.ipynb) Дополнительные образцы записных книжек можно найти в подпапке **Sample-Notebooks** . Образцы записных книжек были сохранены с данными, чтобы было проще увидеть предполагаемые выходные данные (мы рекомендуем просмотреть их в [нбвиевер](https://nbviewer.jupyter.org/)). Папка **руководств** содержит записные книжки, описывающие, например, настройку версии Python по умолчанию, настройку DSVM, создание закладок Azure Sentinel из записной книжки и другие темы.

Эти записные книжки предназначены как полезные средства, так и образцы кода, которые можно использовать при разработке собственных записных книжек.

Мы ждем отзывов, предложений, запросов на функции, предоставленных записных книжек, отчетов об ошибках, улучшений и дополнений к существующим записным книжкам. Перейдите на портал [Azure Sentinel Community GitHub](https://github.com/Azure/Azure-Sentinel) , чтобы создать вопрос или вилку и отправить публикацию.

## <a name="next-steps"></a>Следующие шаги

В этой статье вы узнали, как приступить к использованию записных книжек Jupyter в Azure Sentinel. Ознакомьтесь с дополнительными сведениями об Azure Sentinel в соответствующих статьях.

- [Упреждающее слежение за угрозами](hunting.md)
- [Использование закладок для сохранения интересных сведений при поиске](bookmarks.md)
