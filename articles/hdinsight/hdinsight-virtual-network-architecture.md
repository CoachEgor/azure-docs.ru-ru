---
title: Архитектура виртуальной сети Azure HDInsight
description: Дополнительные ресурсы, доступные при создании кластера HDInsight в виртуальной сети Azure.
author: hrasheed-msft
ms.reviewer: jasonh
ms.service: hdinsight
ms.topic: conceptual
ms.date: 03/26/2019
ms.author: hrasheed
ms.openlocfilehash: 41420497bffd0abdc598e4c86b2dbda1466b2ce1
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66252848"
---
# <a name="azure-hdinsight-virtual-network-architecture"></a>Архитектура виртуальной сети Azure HDInsight

В этой статье объясняется ресурсы, которые есть при развертывании в кластер HDInsight в виртуальной сети для Azure. Эта информация поможет вам для подключения к кластеру HDInsight в Azure с локальными ресурсами. Дополнительные сведения о виртуальных сетях Azure см. в разделе [что такое виртуальная сеть Azure?](../virtual-network/virtual-networks-overview.md).

## <a name="resource-types-in-azure-hdinsight-clusters"></a>Типы ресурсов в кластерах Azure HDInsight

Кластеры Azure HDInsight имеют различные типы виртуальных машин или узлов. Каждый тип узла играет роль в работу системы. В следующей таблице перечислены эти типы узлов и их роли в кластере.

| type | Описание |
| --- | --- |
| Головной узел |  Для всех типов кластера, за исключением Apache Storm на головных узлах процессов, управления выполнением распределенного приложения. Головной узел также является узлом, который вы можете подключиться по протоколу SSH и выполнения приложений, затем координируются работать на разных ресурсов кластера. Число головных узлов остается фиксированным двумя для всех типов кластера. |
| Узел zooKeeper | Zookeeper координирует задачи между узлами, которые выполняют обработку данных. Он также делает лидера головного узла, а также следит за какой головной узел работает под управлением определенной главной службы. Три фиксируется количество узлов ZooKeeper. |
| Рабочий узел | Представляет узлы, которые поддерживают функциональные возможности обработки данных. Рабочие узлы можно добавлять или удалять из кластера, чтобы масштабировать вычислительную мощность и управления затратами. |
| Пограничному узлу R Server | Пограничному узлу R Server представляет узел, вы можете подключиться по протоколу SSH и выполнения приложений, затем координируются работать на разных ресурсов кластера. Граничный узел не участвует в анализе данных в пределах кластера. Этот узел также содержит R Studio Server, что позволяет выполнять приложения R, с помощью браузера. |
| Область узла | Для типа кластеров HBase регион узел (называемый также узел данных) выполняет регионального сервера. Региональные серверы обслуживать и управление ими часть данных, управляет HBase. Узлы области можно добавлять или удалять из кластера, чтобы масштабировать вычислительную мощность и управления затратами.|
| Узел nimbus | Для типа кластера Storm узел Nimbus предоставляет функциональность, аналогичную головной узел. Узел Nimbus назначает задачи другим узлам в кластере через Zookeeper, который координирует выполнение топологии Storm. |
| Узел "контролер" | Для типа кластера Storm узел "контролер" выполняет инструкции, предоставленные узел Nimbus для выполнения требуемой обработки. |

## <a name="basic-virtual-network-resources"></a>Ресурсы базовую виртуальную сеть

В примере ниже показан размещение узлов HDInsight и сетевых ресурсов в Azure.

![Схема HDInsight сущности, созданные в пользовательских виртуальной сети Azure](./media/hdinsight-virtual-network-architecture/vnet-diagram.png)

Ресурсы по умолчанию, присутствующий после проверки подлинности выполняется развертывание HDInsight в виртуальной сети Azure включают типы узлов кластера, упомянутые в предыдущей таблице, а также сетевые устройства, которые поддерживают обмен данными между виртуальной сетью и вне сети.

В следующей таблице перечислены девять кластера узлов, которые создаются при развертывании в виртуальной сети для Azure HDInsight.

| Тип ресурса | Было | Сведения |
| --- | --- | --- |
|Головной узел | two |    |
|Узел ZooKeeper | three | |
|Рабочий узел | two | Это число может варьироваться в зависимости от конфигурации кластера и масштабирование. Для Apache Kafka требуется не менее трех рабочих узлов.  |
|Узел шлюза | two | Узлы шлюза подключены виртуальные машины для Azure, которые создаются в Azure, но не отображаются в вашей подписке. Обратитесь в службу поддержки, если необходимо перезагрузить для этих узлов. |

Присутствуют следующие сетевые ресурсы автоматически создаются внутри виртуальной сети, используемой с HDInsight:

| Сетевого ресурса | Было | Сведения |
| --- | --- | --- |
|Подсистема балансировки нагрузки | three | |
|Сетевые интерфейсы | девять | Это значение основано на обычный кластер, где каждый узел имеет свой собственный сетевой интерфейс. Девять интерфейсы предназначены для два головных узла, три узла zookeeper, двумя рабочими узлами и два узла шлюза, упомянутые в предыдущей таблице. |
|Общедоступные IP-адреса | two |    |

## <a name="endpoints-for-connecting-to-hdinsight"></a>Конечные точки для подключения к HDInsight

Можно получить доступ к кластеру HDInsight тремя способами:

- Конечная точка HTTPS за пределами виртуальной сети в `CLUSTERNAME.azurehdinsight.net`.
- Конечная точка SSH для непосредственного подключения к головному узлу в `CLUSTERNAME-ssh.azurehdinsight.net`.
- Конечная точка HTTPS в виртуальной сети `CLUSTERNAME-int.azurehdinsight.net`. Обратите внимание, что «-int» в этот URL-адрес. Эта конечная точка будет решать задачи частный IP-адрес в этой виртуальной сети и недоступен из Интернета.

Эти три конечные точки, назначаются подсистемы балансировки нагрузки.

Общедоступные IP-адреса также предоставляются две конечные точки, которые разрешают подключение из извне виртуальной сети.

1. Один общедоступный IP-адрес назначается подсистемы балансировки нагрузки для полное доменное имя (FQDN) для использования при подключении к кластеру из Интернета `CLUSTERNAME.azurehdinsight.net`.
1. Второй общедоступный IP-адрес используется для SSH только доменного имени `CLUSTERNAME-ssh.azurehdinsight.net`.

## <a name="next-steps"></a>Дальнейшие действия

* [Защита входящего трафика к кластерам HDInsight в виртуальную сеть с частной конечной точки](https://azure.microsoft.com/blog/secure-incoming-traffic-to-hdinsight-clusters-in-a-vnet-with-private-endpoint/)
