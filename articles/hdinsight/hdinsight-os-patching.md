---
title: Настройка расписания исправлений ОС для кластеров HDInsight под управлением Linux — Azure
description: Узнайте, как настроить расписание обновления путем частичной замены ОС для кластеров HDInsight.
author: hrasheed-msft
ms.author: hrasheed
ms.reviewer: jasonh
ms.service: hdinsight
ms.custom: hdinsightactive
ms.topic: conceptual
ms.date: 07/01/2019
ms.openlocfilehash: 06111ec35a127cf17fdcc77ff717de7a4bc7299f
ms.sourcegitcommit: 8ef0a2ddaece5e7b2ac678a73b605b2073b76e88
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2019
ms.locfileid: "71076862"
---
# <a name="configure-the-os-patching-schedule-for-linux-based-hdinsight-clusters"></a>Настройка расписания исправлений ОС для кластеров HDInsight под управлением Linux 

> [!IMPORTANT]
> Образы Ubuntu становятся доступными для нового создания кластера Azure HDInsight в течение трех месяцев публикации. По состоянию на Январь 2019 запуск кластеров не производится. Клиенты должны использовать действия сценария или другие механизмы для исправления работающего кластера. Созданные кластеры будут всегда содержать последние обновления, включая самые последние обновления безопасности.

Иногда для установки важных исправлений безопасности необходимо перезапустить виртуальные машины в кластере HDInsight.

С помощью действий сценария, описанных в этой статье, можно изменить расписание обновления ОС следующим образом:

1. Установите все обновления или установите только обновления ядра, системы безопасности или обновления ядра.
2. Выполните немедленное перезагрузку или запланируйте перезапуск на виртуальной машине.

> [!NOTE]  
> Действия сценария, описанные в этой статье, будут работать только с кластерами HDInsight под управлением Linux, созданными после 1 августа 2016. Исправления вступают в силу только после перезапуска виртуальных машин.
> Действия скрипта не будут автоматически применять обновления для всех будущих циклов обновления. Запускайте скрипты каждый раз, когда необходимо применить новые обновления для установки обновлений, а затем перезапустите виртуальную машину.

## <a name="add-information-to-the-script"></a>Добавление сведений в скрипт

Для использования сценария требуются следующие сведения:

- Расположение скрипта install-updates-Schedule-reboot: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv02/install-updates-schedule-reboots.sh.
    
   HDInsight использует этот универсальный код ресурса (URI) для поиска и запуска скрипта на всех виртуальных машинах в кластере. Этот сценарий предоставляет параметры для установки обновлений и перезапуска виртуальной машины.
  
- Расписание — перезагрузка, расположение скрипта: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv02/schedule-reboots.sh.
    
   HDInsight использует этот универсальный код ресурса (URI) для поиска и запуска скрипта на всех виртуальных машинах в кластере. Этот сценарий перезапускает виртуальную машину.
  
- К типам узлов кластера, к которым применяется скрипт, относятся головного узла, workernode и Zookeeper. Примените скрипт ко всем типам узлов в кластере. Если скрипт не применяется к типу узла, виртуальные машины для этого типа узла не будут обновлены или перезапущены.

- Скрипт Install-Update-Schedule-reboots принимает два числовых параметра:

    | Параметр | Определение |
    | --- | --- |
    | Установить только обновления ядра/установить все обновления/установить только обновления ядра и системы безопасности|0, 1 или 2. Значение 0 устанавливает только обновления ядра. Значение 1 устанавливает все обновления, а 2 устанавливает только обновления ядра и системы безопасности. Если параметр не указан, по умолчанию используется значение 0. |
    | Без перезагрузки/включение перезагрузки расписания/Включение немедленной перезагрузки |0, 1 или 2. Значение 0 отключает перезапуск. Значение 1 включает перезапуск по расписанию, а 2 — немедленное перезагрузку. Если параметр не указан, по умолчанию используется значение 0. Пользователь должен изменить входной параметр 1 на входной параметр 2. |
   
 - Сценарий "Расписание — перезагрузка" принимает один числовой параметр:

    | Параметр | Определение |
    | --- | --- |
    | Включить перезагрузку по расписанию/включить немедленную перезагрузку |1 или 2. Значение 1 включает перезапуск по расписанию (запланированный через 12-24 часов). Значение 2 включает немедленное перезагрузку (за 5 минут). Если параметр не задан, по умолчанию используется значение 1. |  

> [!NOTE]
> Сценарий необходимо пометить как сохраненный после применения к существующему кластеру. В противном случае все новые узлы, созданные операциями масштабирования, будут использовать расписание обновления путем частичной замены ОС по умолчанию. Если применить сценарий как часть процесса создания кластера, он будет сохранен автоматически.


## <a name="next-steps"></a>Следующие шаги

Конкретные действия по использованию действий скрипта см. в следующих разделах: [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).

* [Использование действия скрипта при создании кластера](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [Применение действия скрипта в работающем кластере](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
