---
title: Настройка расписания обновления путем частичной замены ОС для кластеров HDInsight в Azure
description: Узнайте, как настроить расписание обновления путем частичной замены ОС для кластеров HDInsight.
author: omidm1
ms.author: omidm
ms.service: hdinsight
ms.custom: hdinsightactive
ms.topic: conceptual
ms.date: 01/24/2019
ms.openlocfilehash: 3fad8869a31688e9e2413abb350eccf1f871f7dd
ms.sourcegitcommit: 08138eab740c12bf68c787062b101a4333292075
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2019
ms.locfileid: "67330707"
---
# <a name="os-patching-for-hdinsight"></a>Обновление путем частичной замены ОС для кластеров HDInsight 

> [!IMPORTANT]
> Образах Ubuntu становятся доступными для создания новых кластеров HDInsight в течение трех месяцев после публикации. По состоянию на январь 2019 года работающие кластеры **не** были автоматически исправлены. Клиенты должны использовать действия сценария или другие механизмы для исправления работающего кластера. Созданные кластеры будут всегда содержать последние обновления, включая самые последние обновления безопасности.

## <a name="how-to-configure-the-os-patching-schedule-for-linux-based-hdinsight-clusters"></a>Как настроить расписание обновления путем частичной замены ОС для кластеров HDInsight под управлением Linux
Виртуальные машины в кластере HDInsight нужно время от времени перезагружать для установки важных исправлений системы безопасности. 

С помощью действий сценария, описанных в этой статье, вы можете изменить ОС, расписание установки исправлений, как показано ниже:
1. Установите все обновления или установки ядра + только обновления для системы безопасности и устанавливать только обновления ядра.
2. Перезагрузка или расписание перезагрузки на виртуальной Машине.

> [!NOTE]  
> Эти действия сценария будет работать только с кластерами HDInsight под управлением Linux, созданных после 1 августа 2016 г. Исправления начнут действовать только после перезагрузки виртуальных машин. Эти сценарии не будет автоматически применять обновления для всех будущих обновлений циклов. Запустите сценарии, которые должны применяться для установки обновлений и перезагрузите виртуальную Машину каждого обновления.

## <a name="how-to-use-the-script"></a>Как использовать сценарий 

С помощью этого сценария требуется следующая информация:
1. Расположение скрипта install обновлений расписание перезагрузок: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv02/install-updates-schedule-reboots.sh.
    
   HDInsight использует этот универсальный код ресурса (URI), чтобы найти и запустить сценарий на всех виртуальных машинах в кластере. Этот сценарий предоставляет параметры для установки обновлений и перезагрузите виртуальную Машину.
  
2. Расположение скрипта расписание перезагрузки: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv02/schedule-reboots.sh.
    
   HDInsight использует этот универсальный код ресурса (URI), чтобы найти и запустить сценарий на всех виртуальных машинах в кластере. Этот сценарий перезагрузки виртуальной Машины.
  
3. Типы узлов кластера, к которым применяется сценарий: головной узел, рабочий узел, узел zookeeper. Этот сценарий должен применяться к узлам всех типов в кластере. Если она не применяется к типу узла, затем виртуальные машины для этого типа узла не будет обновлен или перезагрузке.

4. Параметры. Сценарий установки обновлений расписание перезагрузки принимает два числовых параметра:

    | Параметр | Определение |
    | --- | --- |
    | Установить только обновления ядра или установить все обновления/установки ядра + security обновляет только |0 или 1 или 2. Значение 0 устанавливает только обновления ядра при 1 устанавливает только обновляет все обновления и две установки ядра + security. Если параметр не указан, значение по умолчанию равно 0. |
    | Нет расписания перезагрузки или включить перезагрузки или включить немедленную перезагрузку |0 или 1 или 2. Значение 0 отключает перезагрузки, а 1 — включает расписание перезагрузки и 2 обеспечивает немедленную перезагрузку. Если параметр не указан, значение по умолчанию равно 0. Пользователь должен ввести параметр 1, чтобы входной параметр 2. |
   
 5. Параметры. После перезагрузки расписание сценарий принимает одного числового параметра:

    | Параметр | Определение |
    | --- | --- |
    | Включить расписание перезагрузки или включить немедленную перезагрузку |1 или 2. Значение 1 включает расписание перезагрузки (Перезагрузка запланирована в течение 12 – 24 часов) во время перезагрузки 2 — разрешает немедленно (в 5 минут). Если параметр не указан, значение по умолчанию равно 1. |  

> [!NOTE] 
> Сценарий необходимо пометить как сохраняемый при применении к существующему кластеру. В противном случае все новые узлы, созданные операциями масштабирования, будут использовать расписание обновления путем частичной замены ОС по умолчанию.  Если применить сценарий при создании кластера, он сохраняется автоматически.


## <a name="next-steps"></a>Дальнейшие действия

Конкретные инструкции по использованию действия сценария, см. в следующих разделах статьи [HDInsight под управлением Linux, настройка кластеров с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md):

* [Использование действия скрипта при создании кластера](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [Применение действия скрипта в работающем кластере](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
