---
title: Настройка расписания обновления путем частичной замены ОС для кластеров HDInsight в Azure
description: Узнайте, как настроить расписание обновления путем частичной замены ОС для кластеров HDInsight.
author: omidm1
ms.author: omidm
ms.service: hdinsight
ms.custom: hdinsightactive
ms.topic: conceptual
ms.date: 01/24/2019
ms.openlocfilehash: cfbd68e66730fc338130bc16849fe0b2f4abd6be
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66244414"
---
# <a name="os-patching-for-hdinsight"></a>Обновление путем частичной замены ОС для кластеров HDInsight 

> [!IMPORTANT]
> Образы Ubuntu станут доступны для создания кластера HDInsight в течение 3 месяцев после публикации. По состоянию на январь 2019 года работающие кластеры **не** были автоматически исправлены. Клиенты должны использовать действия сценария или другие механизмы для исправления работающего кластера. Созданные кластеры будут всегда содержать последние обновления, включая самые последние обновления безопасности.

## <a name="how-to-configure-the-os-patching-schedule-for-linux-based-hdinsight-clusters"></a>Как настроить расписание обновления путем частичной замены ОС для кластеров HDInsight под управлением Linux
Виртуальные машины в кластере HDInsight нужно время от времени перезагружать для установки важных исправлений системы безопасности. 

С помощью действия сценария, описанного в этой статье, можно изменить расписание обновления путем частичной замены ОС следующим образом.
1. Установить полное обновление операционной системы или только обновления для системы безопасности
2. Перезагрузите виртуальную Машину

> [!NOTE]  
> Это действие сценария будет работать только с кластерами HDInsight под управлением Linux, созданными после 1 августа 2016 года. Исправления начнут действовать только после перезагрузки виртуальных машин. Этот сценарий не будет автоматически применять обновления для всех будущих обновлений циклов. Запустите скрипт, каждого обновления необходимо применить для установки обновлений и перезагрузите виртуальную Машину.

## <a name="how-to-use-the-script"></a>Как использовать сценарий 

Для использования этого сценария требуется следующая информация.
1. Расположение скрипта: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv02/os-patching-reboot-config.sh.  HDInsight использует этот универсальный код ресурса (URI), чтобы найти и запустить сценарий на всех виртуальных машинах в кластере.
  
2. Типы узлов кластера, к которым применяется сценарий: головной узел, рабочий узел, узел zookeeper. Этот сценарий должен применяться к узлам всех типов в кластере. Если он не применяется к типу узла, виртуальные машины для этого типа узла не будет обновляться.


3.  Параметры. Этот скрипт принимает одного числового параметра.

    | Параметр | Определение |
    | --- | --- |
    | Полной ОС для установки обновлений или установить только обновления для системы безопасности |0 или 1. Значение 0 устанавливает обновления для системы безопасности только в том случае, пока 1 установит полного обновления операционной системы. Если параметр не предоставляется значение по умолчанию равно 0. |

> [!NOTE]  
> Этот сценарий необходимо пометить как сохраняемый, если он применяется к существующему кластеру. В противном случае все новые узлы, созданные операциями масштабирования, будут использовать расписание обновления путем частичной замены ОС по умолчанию.  Если применить сценарий при создании кластера, он сохраняется автоматически.


## <a name="next-steps"></a>Дальнейшие действия

Инструкции по использованию действия сценария см. в следующих разделах статьи [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md):

* [Использование действия скрипта при создании кластера](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [Применение действия скрипта в работающем кластере](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
