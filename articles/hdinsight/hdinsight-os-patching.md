---
title: Настройте расписание для кластеров HDInsight под управлением Linux — Azure установки исправлений операционной системы
description: Узнайте, как настроить расписание обновления путем частичной замены ОС для кластеров HDInsight.
author: hrasheed-msft
ms.author: hrasheed
ms.service: hdinsight
ms.custom: hdinsightactive
ms.topic: conceptual
ms.date: 07/01/2019
ms.openlocfilehash: efe74618b269000749f7ba6c24d35903e540dcfb
ms.sourcegitcommit: cf438e4b4e351b64fd0320bf17cc02489e61406a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/08/2019
ms.locfileid: "67657054"
---
# <a name="configure-the-os-patching-schedule-for-linux-based-hdinsight-clusters"></a>Настройте расписание для кластеров HDInsight под управлением Linux установки исправлений операционной системы 

> [!IMPORTANT]
> Образах Ubuntu становятся доступными для создания новых кластеров Azure HDInsight в течение трех месяцев после публикации. Начиная с января 2019 работающие кластеры не исправить автоматически. Клиенты должны использовать действия сценария или другие механизмы для исправления работающего кластера. Созданные кластеры будут всегда содержать последние обновления, включая самые последние обновления безопасности.

В некоторых случаях необходимо перезапустить виртуальные машины (ВМ) в кластере HDInsight для установки важных исправлений системы безопасности.

С помощью сценария действия, описанные в этой статье, вы можете изменить ОС, расписание установки исправлений, как показано ниже:

1. Установите все обновления, или только ядра + обновления для системы безопасности или обновления ядра.
2. Выполните принудительную перезагрузку или Планирование перезапуска на виртуальной Машине.

> [!NOTE]  
> Действия сценариев, описанных в этой статье будет работать только с кластерами HDInsight под управлением Linux, созданных после 1 августа 2016 г. Исправления вступают в силу только после перезапуска виртуальных машин.
> Действия скрипта не будет автоматически применять обновления для всех будущих обновлений циклов. Выполните сценарии каждый раз, когда новые обновления, которые должны применяться к установки обновлений, а затем перезапустите виртуальную Машину.

## <a name="add-information-to-the-script"></a>Добавьте сведения в сценарий

С помощью сценария требуется следующая информация:

- Расположение скрипта install обновлений расписание перезагрузок: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv02/install-updates-schedule-reboots.sh.
    
   HDInsight использует этот URI, чтобы найти и запустить сценарий на всех виртуальных машин в кластере. Этот сценарий предоставляет параметры для установки обновлений и перезапустите виртуальную Машину.
  
- Расположение скрипта расписание перезагрузки: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv02/schedule-reboots.sh.
    
   HDInsight использует этот URI, чтобы найти и запустить сценарий на всех виртуальных машин в кластере. Этот сценарий перезапускает виртуальную Машину.
  
- Типы узлов кластера, к которым применяется сценарий бывают узлам headnode, workernode и zookeeper. Примените скрипт для всех типов узлов в кластере. Если скрипт не применяется к типу узла, на виртуальные машины для этого типа узла не будут обновлены или перезапуска.

- Сценарий установки обновлений расписание перезагрузки принимает два числовых параметра:

    | Параметр | Определение |
    | --- | --- |
    | Установить только обновления ядра или установить все обновления/установки ядра + security обновляет только|0, 1 или 2. Значение 0 устанавливает только обновления ядра. Значение 1 устанавливает все обновления и только ядра две установки + обновления для системы безопасности. Если параметр не указан, значение по умолчанию равно 0. |
    | Нет расписания перезагрузки или включить перезагрузки или включить немедленную перезагрузку |0, 1 или 2. Значение 0 отключает перезапуск. Значение 1 включает расписание перезагрузки, а 2 позволяет принудительную перезагрузку. Если параметр не указан, значение по умолчанию равно 0. Пользователь должен будет сменить входной параметр 1, чтобы входной параметр 2. |
   
 - После перезагрузки расписание сценарий принимает одного числового параметра:

    | Параметр | Определение |
    | --- | --- |
    | Включить расписание перезагрузки или включить немедленную перезагрузку |1 или 2. Значение 1 включает расписание перезагрузки (запланировано в 12-24 часа). Значение 2 включает принудительную перезагрузку (за пять минут). Если параметр не указан, значение по умолчанию равно 1. |  

> [!NOTE]
> Сценарий необходимо пометить как сохраняемый после применения к существующему кластеру. В противном случае все новые узлы, созданные операциями масштабирования, будут использовать расписание обновления путем частичной замены ОС по умолчанию. Если применить сценарий как часть процесса создания кластера, имеет постоянное автоматически.


## <a name="next-steps"></a>Следующие шаги

Конкретные инструкции по использованию действия скрипта, см. в следующих разделах статьи [HDInsight под управлением Linux, настройка кластеров с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md):

* [Использование действия скрипта при создании кластера](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [Применение действия скрипта в работающем кластере](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
