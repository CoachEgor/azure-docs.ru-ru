---
title: Azure HDInsight Accelerated Writes for Apache HBase (Ускорение операций записи Azure HDInsight для Apache HBase)
description: Дает обзор функции ускоренной записи Azure HDInsight, которая использует управляемые премиальные диски для повышения производительности журнала Apache HBase Write Ahead Log.
author: hrasheed-msft
ms.author: hrasheed
ms.reviewer: jasonh
ms.service: hdinsight
ms.topic: conceptual
ms.date: 01/24/2020
ms.openlocfilehash: 7165bab96d037f6782bc9aa6767cadd9b35f058c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76764587"
---
# <a name="azure-hdinsight-accelerated-writes-for-apache-hbase"></a>Azure HDInsight Accelerated Writes for Apache HBase (Ускорение операций записи Azure HDInsight для Apache HBase)

В этой статье приводится справочная информация о функции **Ускоренных записей** для Apache HBase в Azure HDInsight, а также о том, как ее можно эффективно использовать для повышения производительности записи. **Ускоренные записи** используют [управляемые диски Премиум SSD Azure для](../../virtual-machines/linux/disks-types.md#premium-ssd) повышения производительности apache HBase Write Ahead Log (WAL). Чтобы узнать больше о Apache HBase, смотрите [Что такое Apache HBase в HDInsight](apache-hbase-overview.md).

## <a name="overview-of-hbase-architecture"></a>Обзор архитектуры HBase

В HBase **строка** состоит из одного или нескольких **столбцов** и идентифицируется **по ключу строки.** Несколько строк составляют **таблицу.** Столбцы содержат **ячейки,** которые являются отметками времени версии значения в этой колонке. Столбцы сгруппированы в **семейства столбцов,** и все столбцы в семейства столбцов хранятся вместе в файлах хранения под названием **HFiles.**

**Регионы** в HBase используются для баланса нагрузки обработки данных. HBase сначала хранит ряды таблицы в одном регионе. Строки распределены по нескольким регионам по мере увеличения объема данных в таблице. **Серверы регионов** могут обрабатывать запросы для нескольких регионов.

## <a name="write-ahead-log-for-apache-hbase"></a>Напишите впереди журнал для Apache HBase

HBase впервые записывает обновления данных в тип журнала коммитов под названием Write Ahead Log (WAL). После того, как обновление хранится в WAL, оно записано в **память MemStore**. Когда данные в памяти достигают максимальной емкости, они записываются на диск как **HFile.**

Если **RegionServer** выходит из строя или становится недоступным до промывки MemStore, журнал Write Ahead log может быть использован для воспроизведения обновлений. Без WAL, если **RegionServer** выходит из строя перед промывкой обновлений на **HFile,** все эти обновления теряются.

## <a name="accelerated-writes-feature-in-azure-hdinsight-for-apache-hbase"></a>Функция ускоренных записей в Azure HDInsight для Apache HBase

Функция Ускоренная запись решает проблему более высоких записей, вызванных использованием журналов Write Ahead, которые находятся в облачном хранилище.  Функция ускоренного записи для кластеров HDInsight Apache HBase прикрепляет премиальные диски, управляемые SSD, к каждому RegionServer (рабочий узлы). Запись Вперед журналы затем записываются в Hadoop файловой системы (HDFS), установленных на этих премиум управляемых дисков вместо облачного хранения.  Премиум управляемые диски используют твердотельные диски (SSD) и предлагают отличную производительность ввод-выводов с переносимостью неисправности.  В отличие от неуправляемых дисков, если одна единица хранилища выходит из системы, это не повлияет на другие единицы хранения в том же наборе доступности.  В результате управляемые диски обеспечивают низкую задержку записи и лучшую устойчивость к приложениям. Чтобы узнать больше о дисках, управляемых Azure, [см.](../../virtual-machines/windows/managed-disks-overview.md)

## <a name="how-to-enable-accelerated-writes-for-hbase-in-hdinsight"></a>Как включить ускоренные записи для HBase в HDInsight

Чтобы создать новый кластер HBase с функцией Ускоренная записи, выполните последующие шаги в [настройках кластеров в HDInsight,](../hdinsight-hadoop-provision-linux-clusters.md) пока не достигнете **шага 3, хранения.** В **настройках Metastore**выберите флажок рядом с **Enable HBase ускоренной записи.** Затем продолжайте оставшиеся шаги для создания кластера.

![Включить ускоренную опцию записи для HDInsight Apache HBase](./media/apache-hbase-accelerated-writes/azure-portal-cluster-storage-hbase.png)

## <a name="other-considerations"></a>Другие замечания

Чтобы сохранить долговечность данных, создайте кластер с минимум тремя рабочими узлами. После создания можно сократить кластер до менее трех рабочих узлов.

Флеш или отпустите таблицы HBase перед удаляем кластер, чтобы не потерять данные журнала Write Ahead.

```
flush 'mytable'
```

```
disable 'mytable'
```

Выполните аналогичные действия при масштабировании кластера: промыть таблицы и отключить таблицы, чтобы остановить входящие данные. Нельзя масштабировать кластер до менее трех узлов.

После этих шагов обеспечит успешное уменьшение масштабов и избежать возможности перехода на имя в безопасный режим из-за недостаточно реплицированных или временных файлов.

Если ваш namenode делает идти в safemode после масштаба вниз, используйте команды HDfs повторно реплицировать под-реплицированных блоков и получить hdfs из безопасного режима. Эта повторная репликация позволит вам успешно перезапустить HBase.

## <a name="next-steps"></a>Дальнейшие действия

* Официальная документация Apache HBase о [функции Журнала Write Ahead](https://hbase.apache.org/book.html#wal)
* Для обновления кластера HDInsight Apache HBase для [Migrate an Apache HBase cluster to a new version](apache-hbase-migrate-new-version.md)использования ускоренных записей см.
