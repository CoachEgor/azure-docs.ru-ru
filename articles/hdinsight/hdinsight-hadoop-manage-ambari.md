---
title: Мониторинг и администрирование кластеров Azure HDInsight с помощью веб-интерфейса Ambari
description: Узнайте, как использовать Ambari для наблюдения за кластерами HDInsight на платформе Linux и управления их функционированием. В этом документе рассказывается об использовании веб-интерфейса Ambari, предоставляемого с кластерами HDInsight.
author: hrasheed-msft
ms.author: hrasheed
ms.reviewer: jasonh
ms.service: hdinsight
ms.topic: conceptual
ms.custom: hdinsightactive
ms.date: 02/05/2020
ms.openlocfilehash: bf780897317d41c7da85140f64313546cf5c31d6
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80064694"
---
# <a name="manage-hdinsight-clusters-by-using-the-apache-ambari-web-ui"></a>Управление кластерами HDInsight с помощью веб-интерфейса Apache Ambari

[!INCLUDE [ambari-selector](../../includes/hdinsight-ambari-selector.md)]

Apache Ambari упрощает управление кластером Apache Hadoop и его мониторинг за счет удобного пользовательского веб-интерфейса и интерфейса REST API. Ambari включен в кластеры HDInsight и используется для мониторинга кластера и внесения изменений конфигурации.

В этом документе рассказывается об использовании веб-интерфейса Ambari с кластером HDInsight.

## <a name="what-is-apache-ambari"></a><a id="whatis"></a>Что такое Apache Ambari?

[Apache Ambari](https://ambari.apache.org) упрощает управление Hadoop, предоставляя простой в использовании веб-интерфейс. Ambari можно использовать для отслеживания кластеров Hadoop, а также для управления ими. Разработчики могут интегрировать эти возможности в своих приложениях с помощью [интерфейсов REST API Ambari](https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md).

## <a name="connectivity"></a>Соединение

Веб-uI Ambari доступен в кластере HDInsight по `https://CLUSTERNAME.azurehdinsight.net`адресу: название `CLUSTERNAME` кластера.

> [!IMPORTANT]  
> Подключение к Ambari в HDInsight выполняется по протоколу HTTPS. При появлении запроса на прохождение проверки подлинности используйте имя и пароль учетной записи администратора, указанные при создании кластера. Если вам не предложено получить учетные данные, проверьте настройки сети, чтобы подтвердить, что между клиентом и кластерами Azure HDInsight нет проблемы с подключением.

## <a name="ssh-tunnel-proxy"></a>Туннель SSH (прокси-сервер)

В то время как Ambari для вашего кластера доступен непосредственно через Интернет, некоторые ссылки из веб-uI Ambari (например, JobTracker) не разоблачаются в Интернете. Для доступа к этим службам необходимо создать туннель SSH. Дополнительные сведения см. в статье [Использование туннелирования SSH с для доступа к веб-интерфейсу Ambari, JobHistory, NameNode, Oozie и другим веб-интерфейсам](hdinsight-linux-ambari-ssh-tunnel.md).

## <a name="ambari-web-ui"></a>Веб-интерфейс Ambari

> [!WARNING]  
> HDInsight поддерживает не все функции веб-интерфейса Ambari. Дополнительные сведения см. в этой статье в разделе [Неподдерживаемые операции](#unsupported-operations).

При подключении к веб-пользователю Ambari вам предлагается проверить подлинность страницы. Укажите имя администратора кластера (по умолчанию это Admin) и пароль, которые были указаны при создании кластера.

При открытии страницы обратите внимание на панель вверху. Она содержит следующую информацию и элементы управления:

![Обзор приборной панели Apache Ambari](./media/hdinsight-hadoop-manage-ambari/apache-ambari-dashboard.png)

|Item |Описание |
|---|---|
|Логотип Амбари|Открывает панель мониторинга, которая может быть использована для мониторинга кластера.|
|Название кластера и опс|Отображает количество текущих операций в Амбари. Если выбрать имя кластера или **# ops** (К-во операций), отобразится список фоновых операций.|
|оповещения|Отображает предупреждения или критические предупреждения, если таковые имеются, для кластера.|
|Панель мониторинга|Отображает панель мониторинга.|
|Службы|Настройки информации и конфигурации служб в кластере.|
|Узлы|Настройки информации и конфигурации узлов в кластере.|
|видны узлы|Регистр информации, предупреждений и критических оповещений.|
|Административный|Стек/услуги программного обеспечения, установленные в кластере, информация об учетной записи службы и безопасность Kerberos.|
|Кнопка админ|Ambari управления, настройки пользователя, и выйти.|

## <a name="monitoring"></a>Наблюдение

### <a name="alerts"></a>видны узлы

В следующем списке содержатся общие состояния оповещений, используемые Ambari.

* **ОК**
* **Предупреждение**
* **Критических**
* **UNKNOWN**

При любых оповещениях, кроме **ОК**, в поле **# alerts** (К-во оповещений) в верхней части страницы будет отображаться их общее количество. Выберите эту запись, чтобы отобразить предупреждения и их состояние.

Оповещения разбиты на несколько групп по умолчанию, которые можно просмотреть на странице **Оповещения** .

![Apache Ambari предупреждает резюме страницы](./media/hdinsight-hadoop-manage-ambari/hdinsight-alerts-page.png)

Группами можно управлять с помощью меню **Действия**, а также выбрав **Manage Alert Groups** (Управление группами оповещений).

![Apache Ambari управляет группами оповещения](./media/hdinsight-hadoop-manage-ambari/ambari-manage-alerts.png)

Можно также управлять методами оповещения и создавать уведомления о помнях из меню **«Действия»,** выбрав __уведомления «Управление».__ Отображаются все текущие уведомления. Здесь можно также создавать уведомления. Уведомления можно отправлять по **электронной почте** или **протоколу SNMP** при возникновении определенного сочетания оповещения и уровня серьезности. Например, можно отправить сообщение, если для какого-либо оповещения в группе **YARN Default** (YARN по умолчанию) установлено значение **Критическое**.

![Apache Ambari создает уведомление о помнях](./media/hdinsight-hadoop-manage-ambari/create-alert-notification.png)

Наконец, выбрав __Manage Alert Settings__ (Управление параметрами оповещения) в меню __Действия__, вы сможете настроить количество появлений оповещения перед отправкой уведомления. Этот параметр можно использовать для предотвращения уведомлений по временным ошибкам.

Для руководства оповещения уведомления с помощью бесплатной [учетной записи SendGrid](https://docs.microsoft.com/azure/sendgrid-dotnet-how-to-send-email), [см.](./apache-ambari-email.md)

### <a name="cluster"></a>Кластер

На вкладке **Метрики** панели мониторинга содержится ряд мини-приложений, которые позволяют легко определить состояние кластера с первого взгляда. Если щелкнуть некоторые мини-приложения, например **Загрузка ЦП**, отобразится дополнительная информация.

![Приборная панель Apache Ambari с метриками](./media/hdinsight-hadoop-manage-ambari/hdi-metrics-dashboard.png)

На вкладке **Тепловые карты** метрики отображаются в виде цветных тепловых карт с переходом от зеленого к красному.

![Приборная панель Apache Ambari с тепловыми картами](./media/hdinsight-hadoop-manage-ambari/hdi-heatmap-dashboard.png)

Для получения дополнительных сведений об узлах кластера выберите **Узлы**. Затем выберите интересуемый узла.

![Apache Ambari хозяйничает сведения резюме](./media/hdinsight-hadoop-manage-ambari/ambari-host-details1.png)

### <a name="services"></a>Службы

Боковая панель **Службы** на панели мониторинга позволяет получить общее представление о состоянии служб, работающих в кластере. Различные значки обозначают состояния или действия, которые следует предпринять. Например, желтый символ перезапуска отображается, если служба должна быть перезапущена.

![Apache Ambari услуги боковой бар](./media/hdinsight-hadoop-manage-ambari/apache-ambari-service-bar.png)

> [!NOTE]  
> Для разных типов и версий кластера HDInsight отображаются разные службы. Службы, отображаемые здесь, могут отличаться от служб, отображаемых для вашего кластера.

При выборе службы для нее отобразятся более подробные сведения.

![Сводная информация службы Apache Ambari](./media/hdinsight-hadoop-manage-ambari/ambari-service-details.png)

#### <a name="quick-links"></a>Быстрые ссылки

Для некоторых служб в верхней части страницы отображается ссылка **Быстрые ссылки** . Их можно использовать для доступа к определенным веб-интерфейсам службы, например:

* **Журнал заданий** — журнал заданий MapReduce;
* **Диспетчер ресурсов** — пользовательский интерфейс диспетчера ресурсов YARN;
* **NameNode** — пользовательский интерфейс NameNode распределенной файловой системы Hadoop (HDFS).
* **Веб-интерфейс Oozie** — пользовательский интерфейс Oozie.

При выборе любой из этих ссылок в браузере откроется новая вкладка с выбранной страницей.

> [!NOTE]  
> При выборе элемента **Быстрые ссылки** для службы может возвращаться ошибка о том, что сервер не найден. При возникновении этой ошибки необходимо использовать туннель SSH, если для этой службы выбирается элемент **Быстрые ссылки**. Дополнительные сведения см. в статье [Использование туннелирования SSH для доступа к веб-интерфейсу Ambari, JobHistory, NameNode, Oozie и другим веб-интерфейсам](hdinsight-linux-ambari-ssh-tunnel.md).

## <a name="management"></a>Управление

### <a name="ambari-users-groups-and-permissions"></a>Пользователи, группы и разрешения Ambari

Работа с пользователями, группами и разрешениями поддерживается только в [присоединенных к домену](./domain-joined/hdinsight-security-overview.md) кластерах HDInsight. Сведения об использовании пользовательского интерфейса управления Ambari в присоединенном к домену кластере см. в статье [Введение в присоединенные к домену кластеры HDInsight (предварительная версия)](./domain-joined/hdinsight-security-overview.md).

> [!WARNING]  
> Не изменяйте пароль модуля наблюдения Ambari (hdinsightwatchdog) в кластере HDInsight под управлением Linux. Это не позволит выполнять действия сценария или операции масштабирования в кластере.

### <a name="hosts"></a>Узлы

На странице **Узлы** перечислены все узлы в кластере. Для управления узлами, сделайте следующее.

![Apache Ambari хостов обзор страницы](./media/hdinsight-hadoop-manage-ambari/hdinsight-hosts-page.png)

> [!NOTE]  
> В кластерах HDInsight не следует использовать добавление, списание и восстановление списанного узла.

1. Выберите узел, которым вы хотите управлять.

2. С помощью меню **Действия** выберите действие, которое необходимо выполнить.

    |Item |Описание |
    |---|---|
    |Запуск всех компонентов|Запустите все компоненты на узлах.|
    |Остановить все компоненты|Остановите все компоненты на хоста.|
    |Перезагрузить все компоненты|Остановите и запустите все компоненты на хосте.|
    |Включить режим обслуживания|Подавляет оповещения для хоста. Этот режим должен быть включен, если вы выполняете действия, которые генерируют оповещения. Например, остановка и запуск службы.|
    |Выключить режим обслуживания|Возвращает услик к обычному оповещению.|
    |Остановить|Остановка DataNode или Узлов на усте.|
    |Запуск|Запускает DataNode или NodeManagers на хосте.|
    |Перезагрузить|Останавливается и запускает DataNode или NodeManagers на усте.|
    |Вывести из эксплуатации|Удаляет узла из кластера. **Не используйте это действие в кластерах HDInsight.**|
    |Повторная эксплуатация|Добавляет ранее списанный узла в кластер. **Не используйте это действие в кластерах HDInsight.**|

### <a name="services"></a><a id="service"></a>Службы

На странице **Панель мониторинга** или **Службы** нажмите кнопку **Действия** в нижней части списка служб, чтобы остановить и снова запустить все службы.

![Список действий службы Apache Ambari](./media/hdinsight-hadoop-manage-ambari/ambari-service-actions.png)

> [!WARNING]  
> Хотя в этом меню и есть пункт **Добавить службу**, не следует использовать его для добавления служб в кластер HDInsight. Для добавления новых служб следует использовать действие сценария во время подготовки кластера. Дополнительные сведения об использовании действий скрипта см. в статье [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).

Хотя с помощью кнопки **Действия** можно перезапустить все службы, зачастую требуется запустить, остановить или перезапустить только одну из них. Чтобы выполнить действия для отдельной службы, сделайте следующее.

1. На странице **Панель мониторинга** или **Службы** выберите службу.

2. В верхней части вкладки **Сводка** нажмите кнопку **Service Actions** (Действия со службой) и выберите действие, которое необходимо выполнить. Это приведет к перезапуску службы на всех узлах.

    ![Индивидуальные действия службы Apache Ambari](./media/hdinsight-hadoop-manage-ambari/individual-service-actions.png)

   > [!NOTE]  
   > Перезапуск некоторых служб во время работы кластера может привести к формированию предупреждений. Во избежание этого можно использовать кнопку **Service Actions** (Действия со службой), чтобы включить **режим обслуживания** для службы перед выполнением перезагрузки.

3. После выбора действия значение в поле **# op** (К-во операций) в верхней части страницы увеличится, что будет свидетельствовать о выполнении фоновой операции. Если настроено отображение списка фоновых операций, этот список появится на экране.

   > [!NOTE]  
   > Если для службы включен **режим обслуживания**, не забудьте отключить его. Для этого нажмите кнопку **Service Actions** (Действия со службой) после завершения операции.

Чтобы настроить службу, сделайте следующее:

1. На странице **Панель мониторинга** или **Службы** выберите службу.

2. Выберите вкладку **Configs.** Текущая конфигурация отображается. Отобразится также список предыдущих конфигураций.

    ![Конфигурация сервиса Apache Ambari](./media/hdinsight-hadoop-manage-ambari/ambari-service-configs.png)

3. Используйте отображаемые поля для изменения конфигурации, а затем выберите **Сохранить**. Можно также выбрать предыдущую конфигурацию, а затем выбрать **Сделать текущей** , чтобы выполнить откат к предыдущим настройкам.

## <a name="ambari-views"></a>Представления Ambari

Представления Ambari позволяют разработчикам подключать элементы пользовательского интерфейса к веб-интерфейсу Ambari, используя [Apache Ambari Views Framework](https://cwiki.apache.org/confluence/display/AMBARI/Views). HDInsight предлагает следующие представления с типами кластеров Hadoop:

* Представление Hive. Представление Hive позволяет выполнять запросы Hive прямо из браузера. Можно сохранять запросы, просматривать результаты, сохранять их в хранилище кластера или загружать результаты в локальную систему. Дополнительные сведения об использовании представлений Hive см. в статье [Use Apache Ambari Hive View with Apache Hadoop in HDInsight](hadoop/apache-hadoop-use-hive-ambari-view.md) (Использование представления Hive Apache Ambari с Apache Hadoop в HDInsight).

* Представление Tez: представление Tez позволяет лучше понять и оптимизировать задания. Можно просмотреть сведения о том, как выполняются задания Tez и какие ресурсы используются.

## <a name="unsupported-operations"></a>Неподдерживаемые операции

Следующие операции Ambari не поддерживаются в HDInsight:

* __Перемещение службы сборщика метрик__. При просмотре сведений в службе сборщика метрик одно из действий, доступных в меню действий службы, — это __Move Metrics collector__ (Переместить сборщик метрик). В HDInsight это действие не поддерживается.

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как использовать [Apache Ambari REST API](hdinsight-hadoop-manage-ambari-rest-api.md) с HDInsight.
