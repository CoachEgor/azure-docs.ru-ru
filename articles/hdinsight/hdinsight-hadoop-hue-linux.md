---
title: Использование Hue с Hadoop в кластерах HDInsight на платформе Linux в Azure
description: Узнайте, как установить Hue на кластер HDInsight и задействовать туннелирование для направления запросов на Hue. Используйте Hue для просмотра хранилища и выполнения Hive или Pig.
keywords: hue hadoop
author: hrasheed-msft
ms.reviewer: jasonh
ms.service: hdinsight
ms.custom: hdinsightactive,hdiseo17may2017
ms.topic: conceptual
ms.date: 12/11/2017
ms.author: hrasheed
ms.openlocfilehash: b0354803a117e8e2c2382ae888bde94a502f24c6
ms.sourcegitcommit: 37343b814fe3c95f8c10defac7b876759d6752c3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2019
ms.locfileid: "63760621"
---
# <a name="install-and-use-hue-on-hdinsight-hadoop-clusters"></a>Установка и использование Hue на кластерах HDInsight Hadoop

Узнайте, как установить Hue на кластер HDInsight и задействовать туннелирование для направления запросов на Hue.

> [!IMPORTANT]  
> Для выполнения действий, описанных в этом документе, необходим кластер HDInsight под управлением Linux. Linux — это единственная операционная система, используемая для работы с HDInsight 3.4 или более поздних версий. Дополнительные сведения см. в разделе [Приближается дата прекращения сопровождения HDI версии 3.3](hdinsight-component-versioning.md#hdinsight-windows-retirement).

## <a name="what-is-hue"></a>Что такое Hue
Hue — это набор веб-приложений, используемых для взаимодействия с кластером Apache Hadoop. Hue позволяет просматривать хранилище, связанное с кластером Hadoop (WASB в случае кластеров HDInsight), выполнять задания Hive, скрипты Pig и т. д. Установив Hue на кластер HDInsight Hadoop, вы получите доступ к следующим компонентам:

* редактор Beeswax Hive,
* Apache Pig
* диспетчер метахранилища,
* Apache Oozie
* FileBrowser (связывается с контейнером WASB по умолчанию),
* обозреватель заданий.

> [!WARNING]  
> Компоненты, предоставляемые вместе с кластером HDInsight, поддерживаются в полном объеме. Служба поддержки Майкрософт поможет вам выявить и устранить проблемы, связанные с этими компонентами.
>
> Настраиваемые компоненты получают ограниченную коммерчески оправданную поддержку, способствующую дальнейшей диагностике проблемы. В результате проблема может быть устранена, либо вас могут попросить воспользоваться доступными каналами по технологиям с открытым исходным кодом, чтобы связаться с экспертами в данной области. Вы можете использовать сайты сообществ, например: [форум MSDN по HDInsight](https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=hdinsight), [https://stackoverflow.com](https://stackoverflow.com). Кроме того, для проектов Apache есть соответствующие сайты ([https://apache.org](https://apache.org)), например [Hadoop](https://hadoop.apache.org/).
>
>

## <a name="install-hue-using-script-actions"></a>Установка Hue с помощью действий сценария

Сценарий для установки Hue в кластере HDInsight под управлением Linux: https://hdiconfigactions.blob.core.windows.net/linuxhueconfigactionv02/install-hue-uber-v02.sh. С его помощью можно установить Hue в кластерах с Azure Storage Blob (WASB) или Azure Data Lake Storage в качестве хранилища по умолчанию.

Этот раздел содержит инструкции по использованию скрипта при подготовке кластера с помощью портала Azure.

> [!NOTE]  
> Для выполнения действий этого сценария также можно использовать Azure PowerShell, классический интерфейс командной строки Azure, пакет SDK .NET для HDInsight или шаблоны Azure Resource Manager. Действия сценария также можно применять к уже работающим кластерам. Дополнительные сведения см. в статье [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).
>
>

1. Начните подготовку кластера с помощью действий, описанных в статье [Создание кластеров Hadoop под управлением Linux в HDInsight](hdinsight-hadoop-provision-linux-clusters.md), но не завершайте ее.

   > [!NOTE]  
   > Для установки Hue в кластерах HDInsight рекомендуется размер головного узла не менее A4 (8 ядер, 14 ГБ памяти).
   >
   >
2. В колонке **Необязательная настройка** выберите **Действия скрипта** и введите следующие сведения:

    ![Предоставление параметров действий сценария для Hue](./media/hdinsight-hadoop-hue-linux/hue-script-action.png "Предоставление параметров действий сценария для Hue")

   * **Имя:** введите понятное имя для действия сценария.
   * **URI СКРИПТА**: https://hdiconfigactions.blob.core.windows.net/linuxhueconfigactionv02/install-hue-uber-v02.sh
   * **ГОЛОВНОЙ УЗЕЛ:** установите этот флажок.
   * **Рабочая роль:** Оставьте это поле пустым.
   * **ZOOKEEPER:** Оставьте это поле пустым.
   * **Параметры:** Оставьте это поле пустым.
3. В нижней части раздела **Действия скрипта** нажмите кнопку **Выбрать**, чтобы сохранить конфигурацию. Наконец, в нижней части колонки **Дополнительная конфигурация** нажмите кнопку **Выбрать**, чтобы сохранить дополнительные настройки.
4. Продолжите подготовку кластера, как описано в статье [Создание кластеров Hadoop под управлением Linux в HDInsight](hdinsight-hadoop-provision-linux-clusters.md).

## <a name="use-hue-with-hdinsight-clusters"></a>Использование Hue с кластерами HDInsight

Единственным способом доступа Hue к запущенному кластеру является туннелирование SSH. Туннелирование через SSH позволяет перейти непосредственно к головному узлу кластера, на котором работает Hue. После завершения подготовки кластера выполните следующие действия, чтобы начать использовать Hue в кластере HDInsight на платформе Linux.

> [!NOTE]  
> Для выполнения приведенных далее инструкций рекомендуется использовать веб-браузер Firefox.
>
>

1. Изучив статью [Использование туннелирования SSH для доступа к пользовательскому веб-интерфейсу Ambari, JobHistory, NameNode, Oozie и другим пользовательским веб-интерфейсам](hdinsight-linux-ambari-ssh-tunnel.md), создайте туннель SSH от своей клиентской системы к кластеру HDInsight, а затем настройте веб-браузер, чтобы он использовал этот туннель SSH в качестве прокси-сервера.

2. После создания SSH-туннеля и настройки браузера для отправки трафика прокси-сервера через этот туннель, найдите имя основного головного узла. Для этого нужно подключиться к кластеру по SSH через порт 22. Например, `ssh USERNAME@CLUSTERNAME-ssh.azurehdinsight.net`, где **USERNAME** — это имя пользователя SSH, а **CLUSTERNAME** — имя кластера.

    Дополнительные сведения см. в статье [Использование SSH с Hadoop на основе Linux в HDInsight из Linux, Unix или OS X](hdinsight-hadoop-linux-use-ssh-unix.md).

3. После подключения используйте следующую команду, чтобы получить полное доменное имя основного головного узла.

        hostname -f

    Вы получите приблизительно такой результат:

        hn0-myhdi-nfebtpfdv1nubcidphpap2eq2b.ex.internal.cloudapp.net

    Это имя основного головного узла, где находится веб-сайт Hue.
4. Чтобы открыть портал Hue по адресу http с помощью обозревателя:\//HOSTNAME:8888. Замените HOSTNAME на имя, полученное на предыдущем шаге.

   > [!NOTE]  
   > При первом входе в систему вам будет предложено создать учетную запись для входа на портал Hue. Эти учетные данные будут связаны только с порталом и не будут иметь отношения к учетным данным администратора или SSH, указанным при подготовке кластера.
   >
   >

    ![Вход на портал Hue](./media/hdinsight-hadoop-hue-linux/hdinsight-hue-portal-login.png "Ввод учетных данных на портале Hue")

### <a name="run-a-hive-query"></a>Выполнение запроса Hive
1. На портале Hue щелкните **Query Editors** (Редакторы запросов), а затем выберите **Hive**, чтобы открыть редактор Hive.

    ![Использование Hive](./media/hdinsight-hadoop-hue-linux/hdinsight-hue-portal-use-hive.png "Использование Hive")
2. На вкладке **Assist** (Помощь) в разделе **Database** (База данных) отобразится элемент **hivesampletable**. Это пример таблицы, входящей в состав всех кластеров Hadoop в HDInsight. В правой области введите запрос и просмотрите выходные данные на нижней вкладке **Results** (Результаты), как показано на приведенном снимке экрана.

    ![Выполнение запросов Hive](./media/hdinsight-hadoop-hue-linux/hdinsight-hue-portal-hive-query.png "Выполнение запросов Hive")

    Для визуального представления результатов вы можете использовать вкладку **Chart** (Диаграмма).

### <a name="browse-the-cluster-storage"></a>Просмотр хранилища кластера
1. На портале Hue в правом верхнем углу панели меню выберите **File Browser** (Обозреватель файлов).
2. По умолчанию обозреватель открывается в каталоге **/user/myuser** . Щелкните косую черту непосредственно перед каталогом пользователя, чтобы перейти в корневую папку контейнера хранилища Azure, связанного с кластером.

    ![Использование браузера файлов](./media/hdinsight-hadoop-hue-linux/hdinsight-hue-portal-file-browser.png "Использование браузера файлов")
3. Щелкните правой кнопкой мыши файл или папку, чтобы отобразились доступные операции. Отправить файлы в текущую папку можно с помощью кнопки **Upload** (Отправить) в правом углу. Для создания новых файлов и папок используйте кнопку **New** (Создать).

> [!NOTE]  
> Обозреватель файлов Hue может показывать содержимое только контейнера по умолчанию, связанного с кластером HDInsight. У вас не будет доступа к другим учетным записям хранения и контейнерам, которые вы могли связать с кластером. Тем не менее задания Hive будут иметь доступ ко всем дополнительным контейнерам, связанным с кластером. Например, если в редакторе Hive ввести команду `dfs -ls wasb://newcontainer@mystore.blob.core.windows.net` , отобразится содержимое дополнительных контейнеров. В этой команде элемент **newcontainer** не является используемым по умолчанию контейнером, который связан с кластером.
>
>

## <a name="important-considerations"></a>Важные сведения
1. Скрипт, который использовался для установки Hue, устанавливает его только на основной головной узел кластера.

2. Во время установки некоторые службы Hadoop (HDFS, YARN, MR2, Oozie) перезапускаются для обновления конфигурации. После того как сценарий завершает установку Hue, для запуска прочих служб Hadoop иногда требуется некоторое время. Это может повлиять на первоначальную производительность Hue. После запуска всех служб набор Hue полностью готов к работе.
3. Hue не может работать с заданиями Apache Tez, которые по умолчанию используются в Hive. Если в качестве подсистемы выполнения в Hive вы хотите задействовать MapReduce, измените сценарий, добавив в него следующую команду.

        set hive.execution.engine=mr;

4. Кластеры под управлением Linux можно настроить так, чтобы службы выполнялись на основном головном узле, а Resource Manager — на дополнительном. При таком сценарии попытка использования Hue для просмотра сведений о ЗАПУЩЕННЫХ заданиях на кластере может привести к ошибкам (показаны ниже). Тем не менее после завершения заданий вы можете просматривать сведения о них.

   ![Ошибка портала Hue](./media/hdinsight-hadoop-hue-linux/hdinsight-hue-portal-error.png "Ошибка портала Hue")

   Это известная проблема. В качестве обходного решения можно изменить Ambari, чтобы активный Resource Manager также запускался на основном головном узле.
5. Hue понимает WebHDFS, а кластеры HDInsight используют службу хранилища Azure с приставкой `wasb://`в начале пути. Таким образом, пользовательский сценарий, используемый со сценарием действия, устанавливает службу WebWasb, совместимую с WebHDFS и предназначенную для обмена данными с WASB. Поэтому несмотря на то, что в некоторых местах на портале Hue используется надпись HDFS (например, при наведении указателя мыши на **File Browser**(Обозреватель файлов)), ее следует читать как WASB.

## <a name="next-steps"></a>Дальнейшие действия
* [Установка Giraph в кластерах HDInsight Hadoop и использование Giraph для обработки диаграмм больших объемов](hdinsight-hadoop-giraph-install-linux.md). Используйте настройки кластера для установки Giraph в кластерах HDInsight Hadoop. Giraph позволяет выполнять обработку графов с использованием Hadoop и может использоваться с Azure HDInsight.
* [Установка R в кластерах HDInsight](hdinsight-hadoop-r-scripts-linux.md). Используйте настройки кластера для установки R в кластерах HDInsight Hadoop. R — это открытый язык программирования и свободная программная среда для статистических вычислений. Он предоставляет сотни встраиваемых статистических функций и собственный язык программирования, который сочетает аспекты функционального и объектно-ориентированного программирования. Этот проект также обеспечивает обширные графические возможности.

[powershell-install-configure]: install-configure-powershell-linux.md
[hdinsight-provision]: hdinsight-provision-clusters-linux.md
[hdinsight-cluster-customize]: hdinsight-hadoop-customize-cluster-linux.md
