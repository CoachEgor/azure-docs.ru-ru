---
title: Сбой создания кластера с ошибкой Домаиннотфаунд в Azure HDInsight
description: Действия по устранению неполадок и возможные способы решения проблем при взаимодействии с кластерами Azure HDInsight
author: hrasheed-msft
ms.author: hrasheed
ms.reviewer: jasonh
ms.service: hdinsight
ms.topic: troubleshooting
ms.date: 01/23/2020
ms.openlocfilehash: 79cd3b687dc8a2eb838146a6dc8a40b184a55fe6
ms.sourcegitcommit: 7863fcea618b0342b7c91ae345aa099114205b03
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2020
ms.locfileid: "93285565"
---
# <a name="scenario-cluster-creation-fails-with-domainnotfound-error-in-azure-hdinsight"></a>Сценарий: сбой создания кластера с ошибкой Домаиннотфаунд в Azure HDInsight

В этой статье описываются действия по устранению неполадок и возможные способы решения проблем при взаимодействии с кластерами Azure HDInsight.

## <a name="issue"></a>Проблема

При создании кластера HDI Secure (Корпоративный пакет безопасности) происходит сбой с `DomainNotFound` сообщением об ошибке.

## <a name="cause"></a>Причина

Неверные параметры DNS.

## <a name="resolution"></a>Решение

При развертывании кластеров, присоединенных к домену, HDI создает внутреннее имя пользователя и пароль в AAD DS (для каждого кластера) и присоединяет все узлы кластера к этому домену. Присоединение к домену выполняется с помощью средств Samba. Выполните указанные ниже предварительные требования.

* Доменное имя должно разрешаться с помощью DNS.
* IP-адрес контроллеров домена должен быть задан в параметрах DNS для виртуальной сети, в которой развертывается кластер.
* Если виртуальная сеть соединена с виртуальной сетью AAD DS, ее необходимо выполнить вручную.
* Если вы используете серверы пересылки DNS, доменное имя должно правильно разрешаться в виртуальной сети.
* Политики безопасности (группы безопасности сети) не должны блокировать присоединение к домену.

### <a name="additional-debugging-steps"></a>Дополнительные шаги отладки

* Развертывание виртуальной машины Windows в той же подсети. Присоедините компьютер к домену, используя имя пользователя и пароль (это можно сделать с помощью пользовательского интерфейса панели управления).

* Развертывание виртуальной машины Ubuntu в той же подсети и домене, присоединяемые к компьютеру
  * Подключение SSH к компьютеру
  * sudo su
  * Запуск скрипта с именем пользователя и паролем
  * Сценарий выполнит проверку связи, создаст необходимые файлы конфигурации, а затем — домен. В случае удачного завершения настройки DNS будут хорошими.

## <a name="next-steps"></a>Дальнейшие действия

[!INCLUDE [troubleshooting next steps](../../../includes/hdinsight-troubleshooting-next-steps.md)]