---
title: Устаревшие оповещения Apache Ambari в Azure HDInsight
description: Обсуждение и анализ возможных причин и решений для устаревших оповещений Apache Ambari в HDInsight.
author: hrasheed-msft
ms.author: hrasheed
ms.reviewer: jasonh
ms.service: hdinsight
ms.topic: troubleshooting
ms.date: 01/22/2020
ms.openlocfilehash: f9dfcb930e3fe4f862f9f51ff00270d0eb0c66ca
ms.sourcegitcommit: 163be411e7cd9c79da3a3b38ac3e0af48d551182
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/21/2020
ms.locfileid: "77539116"
---
# <a name="scenario-apache-ambari-stale-alerts-in-azure-hdinsight"></a>Сценарий: устаревшие оповещения Apache Ambari в Azure HDInsight

В этой статье описываются действия по устранению неполадок и возможные способы решения проблем при взаимодействии с кластерами Azure HDInsight.

## <a name="issue"></a>Проблема

В пользовательском интерфейсе Apache Ambari может появиться предупреждение следующего вида:

![Пример устаревшего предупреждения Apache Ambari](./media/apache-ambari-troubleshoot-stale-alerts/ambari-stale-alerts-example.png)

## <a name="cause"></a>Причина

Агенты Ambari постоянно отслеживают работоспособность многих ресурсов. *Оповещения* можно настроить так, чтобы уведомлять о том, находятся ли определенные свойства кластера в пределах предустановленных пороговых значений. После выполнения каждой проверки ресурсов, если состояние предупреждения соблюдается, агенты Ambari сообщают о состоянии на сервер Ambari и инициируют предупреждение. Если предупреждение не проверяется в соответствии с интервалом в его профиле оповещений, сервер запускает оповещение о *устаревших предупреждениях сервера Ambari* .

Существует несколько причин, по которым проверка работоспособности может не выполняться с заданным интервалом:

* Узлы имеют интенсивное использование (высокая загрузка ЦП), поэтому агенту Ambari не удается получить достаточно системных ресурсов для выполнения оповещений вовремя.

* Кластер занят исполнением множества заданий или служб в течение определенного периода высокой нагрузки.

* Небольшое количество узлов в кластере размещает множество компонентов, и для них требуется выполнение многих предупреждений. Если количество компонентов велико, задания предупреждений могут не пропускать запланированные интервалы.

## <a name="resolution"></a>Решение

Попробуйте использовать следующие методы для устранения проблем с устаревшими предупреждениями Ambari.

### <a name="increase-the-alert-interval-time"></a>Увеличение времени интервала оповещений

Вы можете увеличить значение отдельного интервала оповещений в зависимости от времени отклика кластера и загрузки:

1. В пользовательском интерфейсе Apache Ambari выберите вкладку **оповещения** .
1. Выберите нужное имя определения предупреждения.
1. В определении выберите **изменить**.
1. Увеличьте значение **интервала проверки** , а затем нажмите кнопку **сохранить**.

### <a name="increase-the-alert-interval-time-for-ambari-server-alerts"></a>Увеличение времени интервала оповещений для предупреждений сервера Ambari

1. В пользовательском интерфейсе Apache Ambari выберите вкладку **оповещения** .
1. В раскрывающемся списке **группы** выберите **AMBARI по умолчанию**.
1. Выберите оповещение **сервера Ambari** .
1. В определении выберите **изменить**.
1. Увеличьте значение **интервала проверки** .
1. Увеличьте значение **множителя интервала** и нажмите кнопку **сохранить**.

### <a name="disable-and-reenable-the-alert"></a>Отключение и повторное включение предупреждения

Чтобы отменить устаревшее оповещение, отключите и снова включите его.

1. В пользовательском интерфейсе Apache Ambari выберите вкладку **оповещения** .
1. Выберите нужное имя определения предупреждения.
1. Из определения выберите **включено** в дальней правой части пользовательского интерфейса.
1. Во всплывающем окне **подтверждения** выберите пункт **подтвердить отключение**.
1. Подождите несколько секунд, пока не будут удалены все экземпляры предупреждений, показанные на странице.
1. Из определения выберите **отключено** в крайней правой части пользовательского интерфейса.
1. Во всплывающем окне **подтверждения** выберите **подтвердить включение**.

### <a name="increase-the-alert-grace-period"></a>Увеличение льготного периода оповещения

Период отсрочки, по истечении которого агент Ambari сообщает о том, что в настроенном предупреждении пропущено расписание. Если предупреждение пропущено по расписанию, но выполнялось в течение льготного периода, устаревшее предупреждение не создается.

Значение `alert_grace_period` по умолчанию — 5 секунд. Этот параметр можно настроить в/ЕТК/Амбари-ажент/конф/Амбари-ажент.ини. Для узлов, на которых просроченные оповещения происходят через регулярные интервалы, попробуйте увеличить значение до 10. Затем перезапустите агент Ambari.

## <a name="next-steps"></a>Следующие шаги

Если проблема не была упомянута здесь или вы не можете решить ее, посетите один из следующих каналов для получения дополнительной поддержки:

* Получите ответы от экспертов Azure в [службе поддержки сообщества Azure](https://azure.microsoft.com/support/community/).

* Подключение с помощью [@AzureSupport](https://twitter.com/azuresupport) в Twitter. Это официальная учетная запись Microsoft Azure для улучшения качества взаимодействия с клиентами. Он подключает сообщество Azure к нужным ресурсам: ответы, поддержка и эксперты.

* Если вам нужна дополнительная помощь, отправьте запрос в службу поддержки от [портал Azure](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade/). Чтобы получить его, в меню портала выберите пункт Справка ( **?** ) или откройте панель **Справка и поддержка** . Дополнительные сведения см. [в разделе Создание запроса на поддержку Azure](https://docs.microsoft.com/azure/azure-supportability/how-to-create-azure-support-request). 

  Поддержка управления подписками и выставления счетов включена в вашу подписку Microsoft Azure. Техническая поддержка доступна в рамках [планов поддержки Azure](https://azure.microsoft.com/support/plans/).
