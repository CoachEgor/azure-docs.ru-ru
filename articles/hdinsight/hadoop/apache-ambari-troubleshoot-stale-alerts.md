---
title: Apache Ambari устаревшие оповещения в Azure HDInsight
description: Обсуждение и анализ возможных причин и решений для устаревших предупреждений Apache Ambari в HDInsight.
author: hrasheed-msft
ms.author: hrasheed
ms.reviewer: jasonh
ms.service: hdinsight
ms.topic: troubleshooting
ms.date: 01/22/2020
ms.openlocfilehash: f9dfcb930e3fe4f862f9f51ff00270d0eb0c66ca
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77539116"
---
# <a name="scenario-apache-ambari-stale-alerts-in-azure-hdinsight"></a>Сценарий: Устаревшие предупреждения Apache Ambari в Azure HDInsight

В этой статье описаны шаги устранения неполадок и возможные решения проблем при взаимодействии с кластерами Azure HDInsight.

## <a name="issue"></a>Проблема

В ui Apache Ambari вы можете увидеть предупреждение следующим образом:

![Пример устаревшей тревоги Apache Ambari](./media/apache-ambari-troubleshoot-stale-alerts/ambari-stale-alerts-example.png)

## <a name="cause"></a>Причина

Агенты Ambari постоянно следят за работоспособностью многих ресурсов. Оповещения могут быть *настроены,* чтобы уведомить вас о том, находятся ли определенные свойства кластера в пределах заранее определенных пороговых значений. После выполнения каждой проверки ресурсов, если условие оповещения выполнено, агенты Ambari сообщают о состоянии обратно на сервер Ambari и вызывают оповещение. Если оповещение не проверяется в соответствии с интервалом в профиле оповещения, сервер запускает *оповещение Ambari Server Stale Alerts.*

Существуют различные причины, по которым проверка работоспособности может не проводиться с определенным интервалом:

* Хосты находятся под интенсивным использованием (высокое использование процессора), так что агент Ambari не может получить достаточно системных ресурсов для выполнения оповещений вовремя.

* Кластер занят выполнением многих заданий или служб в период большой нагрузки.

* Небольшое число узлов в кластере размещает много компонентов и поэтому требуется для выполнения многих предупреждений. Если количество компонентов большое, задания оповещения могут пропустить запланированные интервалы.

## <a name="resolution"></a>Решение

Попробуйте следующие методы для решения проблем с устаревшими оповещениями Ambari.

### <a name="increase-the-alert-interval-time"></a>Увеличьте время интервала оповещения

Можно увеличить значение отдельного интервала оповещения в зависимости от времени и загрузки кластера:

1. В uI Apache Ambari выберите вкладку **Alerts.**
1. Выберите имя определения оповещения, которое вы хотите.
1. Из определения выберите **Edit**.
1. Увеличьте значение **Check Interval,** а затем выберите **Сохранить.**

### <a name="increase-the-alert-interval-time-for-ambari-server-alerts"></a>Увеличьте время интервала оповещения для ambari Server Alerts

1. В uI Apache Ambari выберите вкладку **Alerts.**
1. Из списка **групп,** выпадающих вниз, выберите **AMBARI по умолчанию.**
1. Выберите **оповещение Ambari Server Alerts.**
1. Из определения выберите **Edit**.
1. Увеличьте значение **Check Interval.**
1. Увеличьте значение **множения Интервала,** а затем выберите **Сохранить**.

### <a name="disable-and-reenable-the-alert"></a>Отключить и выдать оповещение

Чтобы отказаться от устаревшей оповещения, отключить, а затем подделать его:

1. В uI Apache Ambari выберите вкладку **Alerts.**
1. Выберите имя определения оповещения, которое вы хотите.
1. Из определения выберите **Enabled** в крайней правой части uI.
1. В всплывающем окне **Подтверждения** выберите **Подтвердите отключить.**
1. Подождите несколько секунд, пока все "экземпляры" оповещения, отображаемые на странице, будут очищены.
1. Из определения выберите **Инвалида** в крайней правой части uI.
1. В всплывающем окне **Подтверждения** выберите **Подтвердите Включить**.

### <a name="increase-the-alert-grace-period"></a>Увеличьте льготный период оповещения

Есть льготный период, прежде чем агент Ambari сообщает, что настроенное оповещение пропустило свое расписание. Если оповещение пропустило запланированное время, но бежало в течение льготного периода, зачерхавшее оповещение не генерируется.

Значение `alert_grace_period` по умолчанию составляет 5 секунд. Вы можете настроить эту настройку в /etc/ambari-agent/conf/ambari-agent.ini. Для узлов, на которых устаревшие оповещения происходят через регулярные промежутки времени, попробуйте увеличить значение до 10. Затем перезапустите агента Амбари.

## <a name="next-steps"></a>Дальнейшие действия

Если ваша проблема не была упомянута здесь или вы не в состоянии решить ее, посетите один из следующих каналов для получения дополнительной поддержки:

* Получите ответы от экспертов Azure в [службе поддержки сообщества Azure.](https://azure.microsoft.com/support/community/)

* Связаться [@AzureSupport](https://twitter.com/azuresupport) с на Twitter. Это официальная учетная запись Microsoft Azure для улучшения обслуживания клиентов. Он соединяет сообщество Azure с нужными ресурсами: ответами, поддержкой и экспертами.

* Если вам нужна дополнительная помощь, отправьте запрос на поддержку с [портала Azure](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade/). Чтобы попасть туда, выберите Справка **(? )** из меню портала или откройте панель **поддержки Help.** Для получения дополнительной информации [см. Как создать запрос поддержки Azure](https://docs.microsoft.com/azure/azure-supportability/how-to-create-azure-support-request). 

  Поддержка управления подпиской и выставления счетов включена в подписку Microsoft Azure. Техническая поддержка доступна в [планах поддержки Azure.](https://azure.microsoft.com/support/plans/)
