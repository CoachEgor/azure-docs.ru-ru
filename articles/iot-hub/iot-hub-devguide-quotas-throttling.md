---
title: Общие сведения о квотах и регулировании в Центре Интернета вещей | Документация Майкрософт
description: Руководство разработчика. Описание квот, применимых к Центру Интернета вещей, и ожидаемого поведения регулирования.
author: robinsh
manager: philmea
ms.author: robinsh
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 05/11/2019
ms.openlocfilehash: ea9bea8b314d00db87ad7addacc49a976e0da08e
ms.sourcegitcommit: f013c433b18de2788bf09b98926c7136b15d36f1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/13/2019
ms.locfileid: "65550472"
---
# <a name="reference---iot-hub-quotas-and-throttling"></a>Руководство. Квоты и регулирование в Центре Интернета вещей

## <a name="quotas-and-throttling"></a>Квоты и регулирование

Каждая подписка Azure может использовать не более 50 Центров Интернета вещей и не более 1 центра уровня "Бесплатный".

Каждый центр Интернета вещей подготавливается с определенным количеством единиц для каждого конкретного уровня. Уровень и число единиц определяют максимальную дневную квоту сообщений, которые вы можете отправить. Размер сообщения, используемый для расчета дневной квоты, составляет 0,5 КБ для центра уровня "Бесплатный" и 4 КБ для других уровней. Дополнительные сведения см. на странице с [ценами на Центр Интернета вещей Azure](https://azure.microsoft.com/pricing/details/iot-hub/).

Уровень также определяет пределы регулирования, устанавливаемые Центром Интернета вещей для выполнения всех операций.

## <a name="operation-throttles"></a>Регулирование операций

Регулирование операции — это ограничение скорости, которые применяются в диапазонах минут и предназначены для предотвращения нарушений. Они также подлежат [управления скоростью обработки трафика](#traffic-shaping).

В следующей таблице показаны варианты принудительного регулирования. Значения обозначают тот или иной концентратор.

| Регулирование | Бесплатный, B1 и S1 | В2 и S2 | B3 и S3 | 
| -------- | ------- | ------- | ------- |
| [Операции с реестром удостоверений](#identity-registry-operations-throttle) (Создание, получение, список, обновление и удаление) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 83.33/sec/Unit (5000 в минуту на единицу) |
| [Новые подключения устройства](#device-connections-throttle) (это ограничение применяется к скорость _новые подключения_, не общее число подключений) | Более 100 в секунду или 12 в секунду на единицу <br/> Например, две единицы S1 — это 2\*12 = 24 новых подключений в секунду, но для ваших единиц имеется не менее 100 новых подключений в секунду. Для девяти единиц S1 мы получим 108 новых подключений в секунду (9\*12) для всех единиц. | 120 новых подключений/с/ед. | 6000 новых подключений в секунду на единицу |
| Передачи с устройства в облако | Более 100 в секунду или 12 в секунду на единицу <br/> Например, для двух единиц S1 это 2\*12 = 24 в секунду, но в вашем случае для всех единиц это значение составляет не менее 100 в секунду. Для девяти единиц S1 мы получим 108/с (9\*12) для всех единиц. | 120 в секунду на единицу | 6000 в секунду на единицу |
| Передачи из облака на устройство <sup>1</sup> | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 83.33/sec/Unit (5000 в минуту на единицу) |
| Прием из облака на устройство <sup>1</sup> <br/> (только если устройство использует HTTPS)| 16.67/sec/Unit (1000 в минуту на единицу) | 16.67/sec/Unit (1000 в минуту на единицу) | 833.33/sec/Unit (50 000 в минуту на единицу) |
| Отправка файла | 1,67 уведомлений о передаче файлов в секунду на единицу (100 уведомлений в минуту на единицу) | 1,67 уведомлений о передаче файлов в секунду на единицу (100 уведомлений в минуту на единицу) | 83,33 файл отправки уведомлений в секунду на единицу (5000 в минуту на единицу) |
| Прямые методы<sup>1</sup> | 160 КБ/сек/единицу<sup>2</sup> | 480 КБ/сек/единицу<sup>2</sup> | 24 МБ/сек/единицу<sup>2</sup> | 
| Запросы | 20 в минуту на единицу | 20 в минуту на единицу | 1000 в минуту на единицу |
| Операции чтения двойников устройств и модулей<sup>1</sup> | 100 в секунду | Более 100 в секунду или 10 в секунду на единицу | 500 в секунду на единицу |
| Обновление двойников устройств и двойников модулей<sup>1</sup> | 50 в секунду | Более 50 в секунду или 5 в секунду на единицу | 250 в секунду на единицу |
| Операции с заданиями<sup>1</sup> <br/> (создание, обновление, перечисление и удаление) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 1,67 операций в секунду на единицу (100 операций в минуту на единицу) | 83.33/sec/Unit (5000 в минуту на единицу) |
| Операции с заданиями на устройстве<sup>1</sup> <br/> (обновление двойника, вызов прямого метода) | 10 в секунду | Более 10 в секунду или 1 в секунду на единицу | 50 в секунду на единицу |
| Конфигурации и развертывания Edge<sup>1</sup> <br/> (создание, обновление, перечисление и удаление) | 0,33/с/ед. (мин/20/ед.) | 0,33/с/ед. (мин/20/ед.) | 0,33/с/ед. (мин/20/ед.) |
| Частота запуска потока устройства<sup>1</sup> | 5 новых потоков в секунду | 5 новых потоков в секунду | 5 новых потоков в секунду |
| Максимальное число одновременно подключенных устройств потоки<sup>1</sup> | 50 | 50 | 50 |
| Передача данных потока максимальное число устройств<sup>1</sup> (статистической обработки тома в день) | 300 МБ | 300 МБ | 300 МБ |

<sup>1</sup>Эта функция недоступна на базовом уровне Центра Интернета вещей. Дополнительные сведения см. в статье [Масштабирование решения для Центра Интернета вещей](iot-hub-scaling.md). <br/><sup>2</sup>единица измерения регулирования — 4 КБ.

### <a name="traffic-shaping"></a>Тип трафика

Для обработки трафика пакетов, запросы, превышающие регулирование принимает центр Интернета вещей в течение ограниченного времени. Первый некоторые из этих запросов обрабатываются немедленно. Тем не менее если число запросов, которые по-прежнему нарушать регулирование, начинается центра Интернета вещей, поместив запросы в очередь и обрабатываются в ограничение частоты. Этот эффект называется *управления скоростью обработки трафика*. Кроме того размер этой очереди ограничено. Если по-прежнему нарушение регулирования, со временем очередь переполняется, и центр Интернета вещей начинает отклонять запросы с `429 ThrottlingException`. 

Например использовании виртуального устройства для отправки сообщений в секунду с 200 устройства в облако в центр Интернета вещей S1 (который имеет ограничение в 100 в секунду отправляет D2C). Для первого одну-две минуты сообщения обрабатываются немедленно. Тем не менее так как устройство по-прежнему отправлять дополнительные сообщения, чем предел регулирования, центр Интернета вещей начинает процесс только 100 сообщений в секунду и помещает rest в очереди. Сначала отметить увеличению времени задержки. В итоге вы начнете получать `429 ThrottlingException` заполнения очереди и «количество ошибок регулирования» в [метрики центра Интернета вещей](iot-hub-metrics.md) запускает увеличение.

### <a name="identity-registry-operations-throttle"></a>Регулирование операции с реестром удостоверений

Операции с реестром удостоверений устройств предназначены для использования во время выполнения в управление устройствами и сценариев подготовки. Чтение или обновление большого количества удостоверений устройств поддерживается с помощью [заданий импорта и экспорта](iot-hub-devguide-identity-registry.md#import-and-export-device-identities).

### <a name="device-connections-throttle"></a>Интервал повтора подключения устройства

Регулирование *подключений устройств* определяет скорость, с которой можно установить новые подключения устройства к Центру Интернета вещей. Регулирование *подключений устройства* не влияет на максимальное число одновременно подключенных устройств. Регулирование скорости *подключений устройства* зависит от числа единиц, подготовленных для Центра Интернета вещей.

Например, если вы приобретаете одну единицу S1, то получаете регулирование 100 соединений в секунду. Таким образом для подключения 100,, 000 устройств потребуется по крайней мере 1000 секунд (около 16 минут). Однако вы можете иметь столько одновременно подключенных устройств, сколько устройств зарегистрировано в вашем реестре удостоверений.


## <a name="other-limits"></a>Другие ограничения

Центр Интернета вещей применяет другие операционные ограничения:

| Операция | Ограничение |
| --------- | ----- |
| Устройства | Максимальное число устройств, которым можно подключаться в одном центре Интернета вещей составляет 1 000 000. — Единственный способ увеличить этот предел, обратитесь в службу [поддержки Майкрософт](https://azure.microsoft.com/support/options/).| 
| Коды URI передачи файлов | 10 000 SAS URI могут быть для учетной записи хранения за один раз. <br/>  Допускается одновременная выдача до 10 универсальных кодов ресурса (URI) SAS на устройство. |
| Задания<sup>1</sup> | Максимальное количество одновременных заданий: 1 (для "бесплатный" и S1), 5 (S2) и 10 (для S3). Тем не менее максимального количества одновременных [задания импорта и экспорта устройств](iot-hub-bulk-identity-mgmt.md) -1 для всех уровней. <br/>Журнал заданий хранится до 30 дней. |
| Дополнительные конечные точки | Платные центры SKU могут иметь 10 дополнительных конечных точек. Бесплатные центры SKU могут иметь одну дополнительную конечную точку. |
| Правила маршрутизации сообщений | Платные центры SKU могут иметь 100 правил маршрутизации. Бесплатные центры SKU могут иметь пять правил маршрутизации. |
| Передача сообщений с устройства в облако | Максимальный размер сообщения — 256 КБ |
| Передача сообщений из облака на устройство<sup>1</sup> | Максимальный размер сообщения — 64 КБ. Максимальное количество сообщений, ожидающих доставки — 50. |
| Прямой метод<sup>1</sup> | Максимальный размер полезных данных прямого метода — 128 КБ. |
| Автоматическая конфигурация устройств<sup>1</sup> | 100 конфигураций на платный центр SKU. 20 конфигураций на бесплатный центр SKU. |
| Автоматические развертывания Edge<sup>1</sup> | 20 модулей на развертывание. 100 развертываний на платный центр SKU. 20 развертываний на бесплатный центр SKU. |
| Двойники<sup>1</sup> | Максимальный размер на раздел двойников (теги, требуемые и сообщаемые свойства) — 8 КБ |

<sup>1</sup>Эта функция недоступна на базовом уровне Центра Интернета вещей. Дополнительные сведения см. в статье [Масштабирование решения для Центра Интернета вещей](iot-hub-scaling.md).

## <a name="increasing-the-quota-or-throttle-limit"></a>Увеличение предела квоты и регулирование

В любой момент времени можно увеличить квоты или ограничения по регулирования [увеличение числа подготовленных единиц в центр Интернета вещей](iot-hub-upgrade.md).

## <a name="latency"></a>Задержка

Центр Интернета вещей стремится обеспечить малую задержку при выполнении всех операций. Тем не менее из-за состояния сети и других непредсказуемых факторов он не может гарантировать определенные низкую задержку. При разработке решения учитывайте следующее:

* Не делайте никаких предположений о максимально низкой задержке любой операции Центра Интернета вещей.
* Подготовьте Центр Интернета вещей в ближайшем к вашим устройствам регионе Azure.
* Рассмотрите возможность использования Azure IoT Edge для выполнения чувствительных к задержке операций на устройстве или в шлюзе рядом с устройством.

Несколько единиц Центра Интернета вещей влияют на регулирование, как описано выше, но не обеспечивают дополнительные преимущества или гарантии относительно задержки.

Обратитесь в [службу поддержки Майкрософт](https://azure.microsoft.com/support/options/) в случае непредвиденного увеличения задержки операций.

## <a name="next-steps"></a>Дальнейшие действия

В записи блога, посвященной [регулированию в Центре Интернета вещей](https://azure.microsoft.com/blog/iot-hub-throttling-and-you/), приводится подробное описание стратегии регулирования в Центре Интернета вещей.

Другие справочные статьи в руководстве разработчика для Центра Интернета вещей:

* [Конечные точки Центра Интернета вещей](iot-hub-devguide-endpoints.md)
