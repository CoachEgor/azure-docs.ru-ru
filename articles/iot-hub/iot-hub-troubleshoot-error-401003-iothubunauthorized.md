---
title: Устранение неполадок центра Интернета вещей Azure 401003 Иосубунаусоризед
description: Сведения об исправлении ошибки 401003 Иосубунаусоризед
author: jlian
manager: briz
ms.service: iot-hub
services: iot-hub
ms.topic: troubleshooting
ms.date: 01/30/2020
ms.author: jlian
ms.openlocfilehash: d0a9f643516af5945037acb3dd1da24b06944171
ms.sourcegitcommit: 7b25c9981b52c385af77feb022825c1be6ff55bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79284412"
---
# <a name="401003-iothubunauthorized"></a>401003 IoTHubUnauthorized

В этой статье описываются причины и решения для ошибок **401003 иосубунаусоризед** .

## <a name="symptoms"></a>Симптомы

### <a name="symptom-1"></a>Симптом 1

В журналах диагностики Вы увидите шаблон устройств, которые отключаются с **401003 иосубунаусоризед**, затем **404104 девицеконнектионклоседремотели**, а затем успешно подключаются вскоре после.

### <a name="symptom-2"></a>Симптом 2

Запросы к центру Интернета вещей завершаются с одним из следующих сообщений об ошибке:

* Отсутствует заголовок авторизации
* IotHub "\*" не содержит указанное устройство "\*"
* Правило авторизации "\*" не разрешает доступ для "\*"
* Сбой проверки подлинности для этого устройства, продление маркера или сертификата и повторное подключение
* Отпечаток не соответствует конфигурации: Thumbprint: SHA1Hash =\*, SHA2Hash =\*; Конфигурация: Примарисумбпринт =\*, Секондарисумбпринт =\*

## <a name="cause"></a>Причина

### <a name="cause-1"></a>Причина 1

Для MQTT некоторые пакеты SDK используют центр Интернета вещей для выпуска отключения, если срок действия маркера SAS истек, чтобы получить сведения об обновлении. Итак 

1. Срок действия маркера SAS истекает
1. Центр Интернета вещей заметит срок действия и отключится к устройству с помощью **401003 иосубунаусоризед**
1. Устройство завершает отключение с помощью **404104 девицеконнектионклоседремотели**
1. Пакет SDK для IoT создает новый маркер SAS
1. Устройство успешно подключится к центру Интернета вещей

### <a name="cause-2"></a>Причина 2

Центру Интернета вещей не удалось проверить подлинность заголовка, правила или ключа проверки подлинности.

## <a name="solution"></a>Решение

### <a name="solution-1"></a>Способ 1

При использовании пакета SDK для IoT для подключения с использованием строки подключения устройства никаких действий не требуется. Пакет SDK для IoT повторно создает новый токен для повторного подключения по истечении срока действия маркера SAS. 

Если возникает проблема с объемом ошибок, переключитесь на пакет SDK C, который обновляет маркер SAS до истечения срока его действия. Кроме того, для AMQP маркер SAS может обновляться без подключения.

### <a name="solution-2"></a>Решение 2

Как правило, представленное сообщение об ошибке должно объяснить, как исправить ошибку. Если по какой бы то ни было причине у вас нет доступа к сведениям о сообщении об ошибке, убедитесь, что:

- Срок действия SAS или другого маркера безопасности, который вы используете, не истек. 
- Учетные данные авторизации правильно сформированы для используемого протокола. Дополнительные сведения см. в разделе [Управление доступом в центре Интернета вещей](iot-hub-devguide-security.md).
- Используемое правило авторизации имеет разрешение для запрошенной операции.

## <a name="next-steps"></a>Дальнейшие действия

Чтобы упростить проверку подлинности в центре Интернета вещей, мы рекомендуем использовать [пакеты SDK для Azure IOT](iot-hub-devguide-sdks.md).