---
title: Общие сведения о конечных точках Центра Интернета вещей Azure | Документация Майкрософт
description: Руководство разработчика. Справочные сведения о конечных точках Центра Интернета вещей, доступных устройствах и службе.
author: robinsh
manager: philmea
ms.author: robinsh
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 06/10/2019
ms.custom:
- amqp
- mqtt
ms.openlocfilehash: 9554713e50e7a2ead2e25f274428ad0ecba4934d
ms.sourcegitcommit: 309a9d26f94ab775673fd4c9a0ffc6caa571f598
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/09/2020
ms.locfileid: "82996958"
---
# <a name="reference---iot-hub-endpoints"></a>Руководство. Конечные точки Центра Интернета вещей

[!INCLUDE [iot-hub-basic](../../includes/iot-hub-basic-partial.md)]

## <a name="iot-hub-names"></a>Имена центров Интернета вещей

Имя узла Центра Интернета вещей, в котором размещены ваши конечные точки, можно найти на портале на странице **Обзор**. По умолчанию DNS-имя Центра Интернета вещей выглядит следующим образом: `{your iot hub name}.azure-devices.net`.

## <a name="list-of-built-in-iot-hub-endpoints"></a>Список встроенных конечных точек Центра Интернета вещей

Центр Интернета вещей Azure — это мультитенантная служба, которая предоставляет возможность пользоваться своими функциями разным субъектам. На схеме ниже показаны разные конечные точки, которые предоставляет Центр Интернета вещей.

![Конечные точки Центра Интернета вещей](./media/iot-hub-devguide-endpoints/endpoints.png)

В следующем списке описываются конечные точки.

* **Поставщик ресурсов**. Поставщик ресурсов Центра Интернета вещей предоставляет интерфейс [Azure Resource Manager](../azure-resource-manager/management/overview.md). С помощью этого интерфейса владельцы подписки Azure могут создавать и удалять Центры Интернета вещей, а также обновлять их свойства. Свойства Центра Интернета вещей определяют [политики безопасности на уровне центра](iot-hub-devguide-security.md#access-control-and-permissions) (а не контроль доступа на уровне устройств) и функциональные параметры, относящиеся к обмену сообщениями между облаком и устройством в обоих направлениях. Поставщик ресурсов Центра Интернета вещей также позволяет [экспортировать удостоверения устройств](iot-hub-devguide-identity-registry.md#import-and-export-device-identities).

* **Управление удостоверениями устройств.** Каждый Центр Интернета вещей предоставляет набор конечных точек HTTPS REST, которые позволяют управлять удостоверениями устройств (создавать, получать, обновлять и удалять их). [Удостоверения устройств](iot-hub-devguide-identity-registry.md) нужны для аутентификации устройств и контроля доступа к ним.

* **Управление двойником устройства.** Каждый Центр Интернета вещей предоставляет набор доступных для службы конечных точек HTTPS REST, чтобы запрашивать и обновлять [двойники устройств](iot-hub-devguide-device-twins.md) (теги и свойства).

* **Управление заданиями.** Каждый Центр Интернета вещей предоставляет набор доступных для службы конечных точек HTTPS REST, чтобы запрашивать [задания](iot-hub-devguide-jobs.md) и управлять ими.

* **Конечные точки устройств**. Для каждого устройства в реестре удостоверений Центр Интернета вещей предоставляет набор конечных точек:

  * *Отправка сообщений с устройства в облако*. Устройство использует эту конечную точку для [отправки сообщений с устройства в облако](iot-hub-devguide-messages-d2c.md).

  * *Получение сообщений, отправляемых из облака на устройство*. Устройство использует эту конечную точку для получения целевых [сообщений из облака](iot-hub-devguide-messages-c2d.md).

  * *Инициирование отправки файлов.* Устройство использует эту конечную точку для получения URI SAS службы хранилища Azure из Центра Интернета вещей, чтобы [отправить файл](iot-hub-devguide-file-upload.md).

  * *Получение и обновление свойств двойников устройств*. Устройство использует эти конечные точки для доступа к свойствам [своего двойника](iot-hub-devguide-device-twins.md).

  * *Получение запросов прямых методов*. Устройство использует эту конечную точку для ожидания передачи данных запросов [прямых методов](iot-hub-devguide-direct-methods.md).

    Эти конечные точки предоставляются по протоколам [MQTT v3.1.1](https://mqtt.org/), HTTPS 1.1 и [AMQP 1.0](https://www.amqp.org/). AMQP и MQTT также доступны через [WebSockets](https://tools.ietf.org/html/rfc6455) через порт 443.

* **Конечные точки службы**. Каждый Центр Интернета вещей предоставляет набор конечных точек серверной части решения для взаимодействия с устройствами. За одним исключением эти конечные точки предоставляются только через протоколы WebSocket [AMQP](https://www.amqp.org/) и AMQP. Конечная точка вызова прямого метода предоставляется по протоколу HTTPS.
  
  * *Получение сообщений, отправляемых с устройства в облако*. Эта конечная точка совместима с [Центрами событий Azure](https://azure.microsoft.com/documentation/services/event-hubs/). С ее помощью во внутреннем приложении считываются [сообщения, отправляемые с устройства в облако](iot-hub-devguide-messages-d2c.md). Помимо этой встроенной конечной точки в Центре Интернета вещей можно создать пользовательские конечные точки.
  
  * *Отправка сообщений из облака на устройство и получение уведомлений о доставке.* Эти конечные точки позволяют серверной части решения отправлять надежные [сообщения из облака на устройство](iot-hub-devguide-messages-c2d.md) и получать уведомления о доставке или истечении срока действия.
  
  * *Получение уведомлений о файлах*. Эта конечная точка обмена сообщениями позволяет получать уведомления при успешной отправке файла устройствами. 
  
  * *Вызов прямого метода.* Эта конечная точка позволяет внутренней службе вызывать [прямой метод](iot-hub-devguide-direct-methods.md) на устройстве.
  
  * *Получение событий мониторинга операций*. Эта конечная точка позволяет получать события мониторинга операций, если ваш Центр Интернета вещей настроен выдавать их. Дополнительные сведения см. в статье [Мониторинг операций Центра Интернета вещей](iot-hub-operations-monitoring.md).

В статье [Понимание и использование пакетов SDK для Центра Интернета вещей Azure](iot-hub-devguide-sdks.md) описываются способы получения доступа к этим конечным точкам.

Все конечные точки Центра Интернета вещей используют протокол [TLS](https://tools.ietf.org/html/rfc5246). Кроме того, конечные точки не предоставляются по незашифрованным или незащищенным каналам.

## <a name="custom-endpoints"></a>Пользовательские конечные точки

Чтобы использовать существующие в подписке службы Azure в качестве конечных точек для маршрутизации сообщений, их можно связать с Центром Интернета вещей. Эти конечные точки действуют как конечные точки служб и используются в качестве приемников для маршрутов сообщений. Устройства не могут выполнять запись в дополнительные конечные точки напрямую. Дополнительные сведения о маршрутизации сообщений см. [здесь](../iot-hub/iot-hub-devguide-messages-d2c.md).

Сейчас Центр Интернета вещей поддерживает использование следующих служб Azure в качестве дополнительных конечных точек:

* Контейнеры службы хранилища Azure
* Центры событий
* Очереди служебной шины
* Разделы шины обслуживания

Сведения об ограничениях на количество добавляемых конечных точек см. в руководстве [Квоты и регулирование в Центре Интернета вещей](iot-hub-devguide-quotas-throttling.md).

Для получения состояния работоспособности конечных точек можно использовать REST API [получить работоспособность конечной точки](https://docs.microsoft.com/rest/api/iothub/iothubresource/getendpointhealth#iothubresource_getendpointhealth) . Мы рекомендуем использовать [метрики центра Интернета вещей](iot-hub-metrics.md) , связанные с задержкой сообщений маршрутизации, для определения и отладки ошибок, когда работоспособность конечной точки невозможна или неработоспособна, так как мы предполагаем, что задержка будет выше, когда конечная точка находится в одном из этих состояний.

|Состояние работоспособности|Описание|
|---|---|
|healthy|Конечная точка принимает сообщения должным образом.|
|неработоспособное|Конечная точка не принимает ожидаемые сообщения, и центр Интернета вещей повторяет попытку отправки данных в эту конечную точку. Состояние неработоспособной конечной точки будет обновлено до работоспособного, если центр Интернета вещей установил состояние работоспособности в конечном итоге.|
|неизвестно|Центр Интернета вещей не установил подключение к конечной точке. Нет сообщений, доставленных этой конечной точке или отклоненных от нее.|
|Архив|Конечная точка не принимает сообщения, после того как центр Интернета вещей повторно попытался отправить сообщения в течение периода продленной пробной версии.|

## <a name="field-gateways"></a>Шлюзы поля

В решении Интернета вещей *полевой шлюз* располагается между устройствами и конечными точками Центра Интернета вещей. Обычно он находится ближе к устройствам. Устройства взаимодействуют напрямую с полевым шлюзом с помощью протоколов, поддерживаемых устройствами. Полевой шлюз подключается к конечной точке Центра Интернета вещей с помощью протокола, поддерживаемого Центром Интернета вещей. Полевой шлюз может быть специально выделенным оборудованием или маломощным компьютером, работающим под управлением программного обеспечения настраиваемого шлюза.

Для реализации полевого шлюза можно использовать службу [Azure IoT Edge](/azure/iot-edge/). IoT Edge предлагает определенные функции, например мультиплексировать обмен данными на нескольких устройствах в рамках одного и того же подключения к Центру Интернета вещей.

## <a name="next-steps"></a>Дальнейшие действия

Другие справочные статьи в руководстве разработчика для Центра Интернета вещей:

* [Язык запросов Центра Интернета вещей для двойников устройств, заданий и маршрутизации сообщений](iot-hub-devguide-query-language.md)
* [Квоты и регулирование](iot-hub-devguide-quotas-throttling.md)
* [Поддержка MQTT в Центре Интернета вещей](iot-hub-mqtt-support.md)
* [Общие сведения об IP-адресе центра Интернета вещей](iot-hub-understand-ip-address.md)