---
title: Руководство по SaaS с одним клиентом
description: Развертывание и изучение отдельного однотенантного SaaS-приложения, в котором используется база данных SQL Azure.
services: sql-database
ms.service: sql-database
ms.subservice: scenario
ms.custom: sqldbrb=1
ms.devlang: ''
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: ''
ms.date: 11/07/2018
ms.openlocfilehash: fd4b94f6a99241ffddd7ae359059c3a4a918934a
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84026945"
---
# <a name="deploy-and-explore-a-standalone-single-tenant-application-that-uses-azure-sql-database"></a>Развертывание и изучение отдельного однотенантного приложения, в котором используется база данных SQL Azure
[!INCLUDE[appliesto-sqldb](../includes/appliesto-sqldb.md)]

В этом руководстве вы развернете и изучите пример SaaS-приложения Wingtip Tickets, разработанный с помощью отдельного приложения или шаблона однотенантного приложения.  Приложение разработано для демонстрации возможностей Базы данных SQL Azure, которые упрощают работу со сценариями мультитенантного SaaS-приложения.

Отдельное приложение или шаблон однотенантного приложения развертывает экземпляр приложения для каждого клиента.  Каждое приложение настроено для конкретного клиента и развертывается в отдельной группе ресурсов Azure. Чтобы создать мультитенантное решение, необходимо подготовить несколько экземпляров такого приложения. Этот шаблон лучше всего подходит для меньшего количества клиентов. В этом случае приоритетом является изоляция клиентов. Azure предлагает партнерские программы, которые позволяют развертывать ресурсы в подписку клиентов. Кроме того, они разрешают поставщикам услуг управлять этими ресурсами от имени клиента. 

В этом руководстве вы развернете три автономных приложения для трех клиентов в подписке Azure.  Вы получите полный доступ для изучения отдельных компонентов приложения и экспериментов с ними.

Исходный код приложения и скрипты управления доступны в репозитории GitHub [WingtipTicketsSaaS-StandaloneApp](https://github.com/Microsoft/WingtipTicketsSaaS-StandaloneApp). Приложение было создано с помощью Visual Studio 2015 и не было успешно открыто и скомпилировано в Visual Studio 2019 без обновления.


Из этого руководства вы узнаете следующее:

> [!div class="checklist"]
> * как развернуть изолированное SaaS-приложение Wingtip Tickets;
> * где можно получить исходный код приложения и скрипты управления;
> * сведения о серверах и базах данных, формирующих приложение;

Постепенно будут выпускаться дополнительные руководства. Они позволяют исследовать ряд сценариев управления на основе этого шаблона приложения.   

## <a name="deploy-the-wingtip-tickets-saas-standalone-application"></a>Развертывание отдельного SaaS-приложения Wingtip Tickets

Разверните приложение для трех указанных клиентов, выполнив следующие действия:

1. Щелкните любую из синих кнопок **Deploy to Azure** (Развернуть в Azure), чтобы открыть шаблон развертывания [на портале Azure](https://portal.azure.com). Для каждого шаблона нужно предоставить значения двух параметров: имя новой группы ресурсов и имя пользователя, которые позволят отличать это развертывания от других развертываний того же приложения. На следующем шаге содержатся сведения о настройке этих значений.<br><br>
    <a href="https://aka.ms/deploywingtipsa-contoso" target="_blank"><img style="vertical-align:middle" src="media/saas-standaloneapp-get-started-deploy/deploy.png"/></a> &nbsp; **Contoso Concert Hall**
<br><br>
    <a href="https://aka.ms/deploywingtipsa-dogwood" target="_blank"><img style="vertical-align:middle" src="media/saas-standaloneapp-get-started-deploy/deploy.png"/></a> &nbsp; **Dogwood Dojo**
<br><br>
    <a href="https://aka.ms/deploywingtipsa-fabrikam" target="_blank"><img style="vertical-align:middle" src="media/saas-standaloneapp-get-started-deploy/deploy.png"/></a> &nbsp; **Fabrikam Jazz Club**

2. Введите необходимые значения параметров для каждого развертывания.

    > [!IMPORTANT]
    > Некоторые процессы аутентификации и брандмауэры сервера не защищены специально, так как предназначены для демонстрации. **Создайте новую группу ресурсов** для каждого развертывания.  Не следует использовать существующие группы ресурсов. Не используйте это приложение или ресурсы, которые оно создает, для рабочей среды. Когда вы завершите работу с приложением, удалите эту группу ресурсов, чтобы избежать лишних расходов.

    В именах ресурсов лучше всего использовать только строчные буквы, цифры и дефисы.
    * Для параметра **Группа ресурсов** выберите действие "Создать" и укажите имя новой группы ресурсов строчными буквами. **Wingtip-SA- \<venueName\> - \<user\> ** является рекомендуемым шаблоном.  Для \<venueName\> замените имя места проведения без пробелов. Для \<user\> замените значение пользователя, приведенное ниже.  В этом шаблоне имена группы ресурсов могут быть следующими: *wingtip-sa-contosoconcerthall-af1*, *wingtip-sa-dogwooddojo-af1*, *wingtip-sa-fabrikamjazzclub-af1*.
    * Выберите **Расположение** из раскрывающегося списка.

    * Для параметра **Пользователь** мы предлагаем короткое значение, например инициалы с одной цифрой: *af1*.


3. **Разверните приложение**.

    * Установите флажок, чтобы принять условия.
    * Щелкните **Приобрести**.

4. Чтобы отслеживать состояние всех трех файлов, щелкните значок колокольчика (**Уведомления**) справа от поля поиска. Развертывание приложений занимает около пяти минут.


## <a name="run-the-applications"></a>Запуск приложений

Приложение служит витриной для объектов, в которых проводятся культурные мероприятия.  Объекты — это клиенты приложения. Для каждого объекта создается персонализированный веб-сайт для отображения списка мероприятий и продажи билетов. Чаще всего это концертные залы, джаз-клубы, спортивные клубы и т. п. В примере тип объекта определяет фоновую фотографию, которая отображается на веб-сайте объекта.   В модели автономного приложения каждое место проведения имеет отдельный экземпляр приложения с собственной автономной базой данных SQL Azure.

1. Откройте страницы событий для каждого из трех клиентов в отдельных вкладках браузера:

   - http://events.contosoconcerthall.&lt;user&gt;.trafficmanager.net
   - http://events.dogwooddojo.&lt;user&gt;.trafficmanager.net
   - http://events.fabrikamjazzclub.&lt;user&gt;.trafficmanager.net

     (В каждом URL-адресе замените слово &lt;user&gt; (пользователь) соответствующим значением для вашего развертывания.)

   ![События](./media/saas-standaloneapp-get-started-deploy/fabrikam.png)

Чтобы управлять распределением входящего трафика, приложение использует [*диспетчер трафика Azure*](../../traffic-manager/traffic-manager-overview.md). Каждый экземпляр приложения для конкретного клиента имеет свой URL-адрес, частью которого является имя этого клиента. Также URL-адрес клиента содержит назначенный вам идентификатор **пользователя**. Все эти URL-адреса имеют следующий формат:
- http://events.&lt;venuename&gt;.&lt;user&gt;.trafficmanager.net

**Расположение** базы данных каждого клиента включается в параметры приложения соответствующего развернутого приложения.

В рабочей среде обычно создается DNS-запись CNAME, которая [*сопоставляет интернет-домен компании*](../../traffic-manager/traffic-manager-point-internet-domain.md) с URL-адресом профиля диспетчера трафика.


## <a name="explore-the-servers-and-tenant-databases"></a>Изучение серверов и клиентских баз данных

Теперь мы подробнее рассмотрим некоторые из развернутых ресурсов.

1. На [портале Azure](https://portal.azure.com) перейдите к списку групп ресурсов.
2. Должны быть отображены три группы ресурсов клиента.
3. Откройте группу ресурсов **wingtip-sa-fabrikam -&lt;пользователь&gt;**, в которой созданы ресурсы для развертывания Fabrikam Jazz Club.  Сервер **fabrikamjazzclub-&lt;пользователь&gt;** содержит базу данных **fabrikamjazzclub**.

Каждая база данных клиента развертывается как *изолированная* база данных на 50 единиц передачи данных.

## <a name="additional-resources"></a>Дополнительные ресурсы

<!--
* Additional [tutorials that build on the Wingtip SaaS application](../../sql-database/saas-dbpertenant-wingtip-app-overview.md#sql-database-wingtip-saas-tutorials)
* To learn about elastic pools, see [*What is an Azure SQL elastic pool*](elastic-pool-overview.md)
* To learn about elastic jobs, see [*Managing scaled-out cloud databases*](../../sql-database/elastic-jobs-overview.md)
-->

- Дополнительные сведения о приложениях SaaS с несколькими клиентами см. в статье [шаблоны разработки для приложений SaaS с несколькими клиентами](saas-tenancy-app-design-patterns.md).

 
## <a name="delete-resource-groups-to-stop-billing"></a>Удаление группы ресурсов для остановки выставления счетов ##

После использования примера удалите все созданные группы ресурсов, чтобы остановить соответствующее выставление счетов.

## <a name="next-steps"></a>Дальнейшие шаги

Из этого руководства вы узнали следующее:

> [!div class="checklist"]
> * как развернуть изолированное SaaS-приложение Wingtip Tickets;
> * сведения о серверах и базах данных, формирующих приложение;
> * как удалить примеры ресурсов, чтобы не оплачивать их.

Затем ознакомьтесь с руководством по [подготовке и каталогизации](saas-standaloneapp-provision-and-catalog.md) , в котором вы узнаете, как использовать каталог клиентов, который обеспечивает широкий спектр межклиентских сценариев, таких как управление схемами и аналитика клиентов.
 

