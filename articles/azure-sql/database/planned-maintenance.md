---
title: Планирование событий обслуживания Azure
description: Узнайте, как подготовиться к запланированным событиям обслуживания в базе данных SQL Azure и Управляемый экземпляр Azure SQL.
services: sql-database
ms.service: sql-db-mi
ms.subservice: service
ms.custom: sqldbrb=1
ms.devlang: ''
ms.topic: conceptual
author: aamalvea
ms.author: aamalvea
ms.reviewer: carlrab
ms.date: 01/30/2019
ms.openlocfilehash: 5bdc3eb8c118c19f90ce1fd92ac5ee156719dacd
ms.sourcegitcommit: 93462ccb4dd178ec81115f50455fbad2fa1d79ce
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/06/2020
ms.locfileid: "85987225"
---
# <a name="plan-for-azure-maintenance-events-in-azure-sql-database-and-azure-sql-managed-instance"></a>Планирование событий обслуживания Azure в базе данных SQL Azure и Управляемый экземпляр Azure SQL
[!INCLUDE[appliesto-sqldb-sqlmi](../includes/appliesto-sqldb-sqlmi.md)]

Узнайте, как подготовиться к запланированным событиям обслуживания базы данных в базе данных SQL Azure и Управляемый экземпляр Azure SQL.

## <a name="what-is-a-planned-maintenance-event"></a>Что такое событие планового обслуживания?

Для каждой базы данных SQL Azure и Azure SQL Управляемый экземпляр поддерживать кворум реплик баз данных, в которых одна реплика является первичной. В любой момент первичная реплика должна быть интерактивным обслуживанием, и хотя бы одна вторичная реплика должна быть работоспособной. Во время планового обслуживания участники кворума базы данных будут переходить в автономный режим по одному, соблюдая условие наличия одной первичной реплики, отвечающей на запросы, и по крайней мере одной подключенной вторичной реплики, чтобы предотвратить простой клиента. Когда первичную реплику необходимо перевести в автономный режим, возникнет процесс перенастройки или отработки отказа, в результате которого одна вторичная реплика станет новой первичной.  

## <a name="what-to-expect-during-a-planned-maintenance-event"></a>Что происходит во время события планового обслуживания

Перенастройка или отработка отказа обычно завершается в течение 30 секунд. Среднее значение составляет 8 секунд. Если ваше приложение уже подключено, оно должно заново подключиться к работоспособной копии новой первичной реплики базы данных. Если при попытке выполнить новое подключение происходит перенастройка базы данных до того, как новая первичная реплика будет подключена к сети, возникает ошибка 40613 (база данных недоступна): "база данных" {DatabaseName} "на сервере" {servername} "в настоящее время недоступна. Повторите попытку подключения позже". Если база данных имеет длительный запрос, этот запрос будет прерван во время перенастройки и потребуется перезапуститься.

## <a name="retry-logic"></a>Логика повторных попыток

Для любого клиентского приложения в рабочей среде, которое подключается к облачной службе базы данных, следует реализовать [надежную логику повторных попыток подключения](troubleshoot-common-connectivity-issues.md#retry-logic-for-transient-errors). Она поможет устранить такие ситуации и упрощает общий механизм определения ошибок для пользователя.

## <a name="frequency"></a>Частота

В среднем каждый месяц происходят 1,7 событий планового обслуживания.

## <a name="resource-health"></a>Работоспособность ресурса

Если в базе данных возникают ошибки входа в систему, Проверьте текущее состояние в окне [работоспособность ресурсов](../../service-health/resource-health-overview.md#get-started) в [портал Azure](https://portal.azure.com) . Раздел "Работоспособность ресурсов" содержит причину простоя для каждого события (если она доступна).

## <a name="next-steps"></a>Дальнейшие шаги

- Дополнительные сведения о [работоспособность ресурсов](resource-health-to-troubleshoot-connectivity.md) для базы данных SQL azure и управляемый экземпляр SQL Azure.
- Дополнительные сведения о логике повторных попыток см. в разделе [логика повторных попыток для временных ошибок](troubleshoot-common-connectivity-issues.md#retry-logic-for-transient-errors).
