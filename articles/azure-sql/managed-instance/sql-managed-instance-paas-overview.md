---
title: Что такое Управляемый экземпляр Azure SQL?
description: Узнайте о том, как Управляемый экземпляр Azure SQL обеспечивает совместимость с последней версией ядра СУБД SQL Server (Enterprise Edition), почти 100%
services: sql-database
ms.service: sql-managed-instance
ms.subservice: operations
ms.custom: sqldbrb=1
ms.devlang: ''
ms.topic: conceptual
author: bonova
ms.author: bonova
ms.reviewer: sstein, carlrab, vanto
ms.date: 06/25/2020
ms.openlocfilehash: 7194e4553386c25691bb3ede8096da7fb63c5dc0
ms.sourcegitcommit: 269da970ef8d6fab1e0a5c1a781e4e550ffd2c55
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/10/2020
ms.locfileid: "88055236"
---
# <a name="what-is-azure-sql-managed-instance"></a>Что такое Управляемый экземпляр Azure SQL?
[!INCLUDE[appliesto-sqlmi](../includes/appliesto-sqlmi.md)]

Azure SQL Управляемый экземпляр — это Интеллектуальная масштабируемая облачная служба базы данных, которая сочетает в себе широкие возможности SQL Server совместимости с ядром СУБД со всеми преимуществами полностью управляемой и популярная платформы как службы. SQL Управляемый экземпляр имеет почти 100% совместимости с новейшим ядром СУБД SQL Server (Enterprise Edition), предоставляя собственную реализацию [виртуальной сети (VNet)](../../virtual-network/virtual-networks-overview.md) , которая решает распространенные проблемы безопасности, и [бизнес-модель](https://azure.microsoft.com/pricing/details/sql-database/) , которая является приемлемой для существующих клиентов SQL Server. SQL Управляемый экземпляр позволяет существующим клиентам SQL Server преносить и сдвигать локальные приложения в облако с минимальными изменениями в приложениях и базах данных. В то же время SQL Управляемый экземпляр сохраняет все возможности PaaS (автоматическое исправление и обновление версий, [Автоматическое резервное копирование](../database/automated-backups-overview.md), [высокий уровень доступности](../database/high-availability-sla.md)), радикально уменьшая расходы на управление и совокупную стоимость владения.

> [!IMPORTANT]
> Список регионов, в которых в настоящее время доступно Управляемый экземпляр SQL, см. в разделе [Поддерживаемые регионы](resource-limits.md#supported-regions).

На следующей схеме описываются основные функции SQL Управляемый экземпляр.

![Основные возможности](./media/sql-managed-instance-paas-overview/key-features.png)

Azure SQL Управляемый экземпляр предназначен для клиентов, желающих перенести большое количество приложений из локальной среды или платформы IaaS, самостоятельно построенного или стороннего поставщика программного обеспечения в полностью управляемую облачную среду PaaS с минимальными усилиями по миграции. Используя полностью автоматизированную [службу Azure Data Migration Service](../../dms/tutorial-sql-server-to-managed-instance.md#create-an-azure-database-migration-service-instance), клиенты могут переносить существующие экземпляры SQL Server в SQL управляемый экземпляр, что обеспечивает совместимость с SQL Server и полную изоляцию экземпляров клиентов с поддержкой встроенной виртуальной сети.  С помощью программы Software Assurance вы можете обмениваться существующими лицензиями со скидками на Управляемый экземпляр SQL, используя [преимущество гибридного использования Azure для SQL Server](https://azure.microsoft.com/pricing/hybrid-benefit/). SQL Управляемый экземпляр является лучшим местом назначения миграции в облаке для SQL Server экземпляров, требующих высокого уровня безопасности и многофункциональной области программирования.

## <a name="key-features-and-capabilities"></a>Основные функции и возможности

SQL Управляемый экземпляр объединяет лучшие функции, доступные как в базе данных SQL Azure, так и в SQL Server ядре СУБД.

> [!IMPORTANT]
> SQL Управляемый экземпляр работает со всеми функциями последней версии SQL Server, включая операции в сети, автоматическое исправление плана и другие улучшения производительности в корпоративной среде. Сравнение доступных возможностей объясняется в описании [характеристик: управляемый экземпляр Azure SQL и SQL Server](../database/features-comparison.md).

| **Преимущества PaaS** | **Непрерывность бизнес-процессов** |
| --- | --- |
|Нет необходимости в приобретении оборудования и управления им <br>Отсутствие накладных расходов на управление базовой инфраструктурой <br>Быстрая подготовка и масштабирование службы <br>Автоматическое исправление и обновление версии <br>Интеграция с другими службами данных PaaS |Соглашение об уровне обслуживания с гарантией времени непрерывной работы 99,99 %.  <br>Встроенная [Высокая доступность](../database/high-availability-sla.md) <br>Данные защищены путем [автоматического создания резервных копий](../database/automated-backups-overview.md) <br>Период хранения резервных копий настраивается пользователем <br>Инициируемые пользователем [резервные копии](https://docs.microsoft.com/sql/t-sql/statements/backup-transact-sql?view=azuresqldb-mi-current) <br>Возможность [восстановления базы данных на момент времени](../database/recovery-using-backups.md#point-in-time-restore) |
|**Безопасность и соответствие требованиям** | **Управление**|
|Изолированная среда ([Интеграция виртуальной сети](connectivity-architecture-overview.md), служба одиночного клиента, выделенное вычисление и хранилище) <br>[Прозрачное шифрование данных (TDE)](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql)<br>[Проверка подлинности Azure Active Directory (Azure AD)](../database/authentication-aad-overview.md), поддержка единого входа <br> <a href="/sql/t-sql/statements/create-login-transact-sql?view=azuresqldb-mi-current">Участники сервера Azure AD (имена для входа)</a>  <br>Соответствует стандартам соответствия, аналогичным требованиям базы данных SQL Azure. <br>[Аудит SQL](auditing-configure.md) <br>[Расширенная защита от угроз](threat-detection-configure.md) |Программный интерфейс Azure Resource Manager для автоматизации подготовки и масштабирования службы <br>Функциональные возможности портала Azure для подготовки и масштабирования службы вручную <br>Служба миграции данных

> [!IMPORTANT]
> Управляемый экземпляр Azure SQL была сертифицирована по рядам стандартов соответствия. Дополнительные сведения см. в подразделе [Microsoft Azure соответствия требованиям](https://servicetrust.microsoft.com/ViewPage/MSComplianceGuideV3?command=Download&downloadType=Document&downloadId=44bbae63-bf4d-4e3b-9d3d-c96fb25ec363&tab=7027ead0-3d6b-11e9-b9e1-290b1eb4cdeb&docTab=7027ead0-3d6b-11e9-b9e1-290b1eb4cdeb_FAQ_and_White_Papers), где можно найти самый актуальный список сертификатов соответствия SQL управляемый экземпляр, перечисленных в поле **база данных SQL**.

Основные функции SQL Управляемый экземпляр приведены в следующей таблице.

|Компонент | Описание|
|---|---|
| SQL Server версии или сборки | Ядро СУБД SQL Server (последняя стабильная) |
| Управляемые, автоматически создаваемые резервные копии | Да |
| Встроенный мониторинг и метрики базы данных и экземпляра | Да |
| Автоматическое применение исправления программного обеспечения | Да |
| Последние функции ядра СУБД | Да |
| Число файлов данных (ROWS) в одной базе данных | Несколько |
| Число файлов журнала (LOG) в одной базе данных | 1 |
| Виртуальная сеть — развертывание Azure Resource Manager | Да |
| Виртуальная сеть — классическая модель развертывания | Нет |
| Поддержка портала | Да|
| Встроенная служба интеграции (службы SSIS) | Нет. Службы SSIS входят в [PaaS Фабрики данных Azure](https://docs.microsoft.com/azure/data-factory/tutorial-deploy-ssis-packages-azure). |
| Встроенные службы Analysis Services (службы SSAS) | Нет. Службы SSAS являются отдельным решением [PaaS](https://docs.microsoft.com/azure/analysis-services/analysis-services-overview). |
| Встроенная служба отчетов (SSRS) | Без использования [Power BI отчетов с разбивкой на страницы](https://docs.microsoft.com/power-bi/paginated-reports/paginated-reports-report-builder-power-bi) вместо этого или размещения SSRS на виртуальной машине Azure. Хотя SQL Управляемый экземпляр не может запускать службы SSRS как службу, она может размещать [базы данных каталога SSRS](https://docs.microsoft.com/sql/reporting-services/install-windows/ssrs-report-server-create-a-report-server-database#database-server-version-requirements) для сервера отчетов, установленного на виртуальной машине Azure, используя проверку подлинности SQL Server. |
|||

## <a name="vcore-based-purchasing-model"></a>Модель приобретения на основе виртуальных ядер

[Модель приобретения на основе виртуальное ядро](../database/service-tiers-vcore.md) для SQL управляемый экземпляр обеспечивает гибкость, контроль, прозрачность и простой способ перевода локальных требований к рабочей нагрузке в облако. Эта модель позволяет изменять ресурсы ЦП, памяти и хранилища с учетом потребностей рабочих нагрузок. Модель Виртуальное ядро также может сэкономить до 55% на [Преимущество гибридного использования Azure](https://azure.microsoft.com/pricing/hybrid-benefit/) SQL Server.

В модели Виртуальное ядро можно выбрать между поколениями оборудования.

- Логические ЦП **го поколения** основаны на процессорах Intel Haswell, 2,4 ГГц, подключенном SSD, физических ядрах, 7 ГБ ОЗУ на ядро и вычислении размеров от 8 до 24 виртуальных ядер.
- **Го поколения** логические процессоры основаны на процессорах intel, 2,3 ГГц и Intel SP-8160 (Skylake), быстром SSD NVMe, логическом ядре Hyper-Threading и размерах вычислений от 4 до 80 ядер.

Дополнительные сведения о разнице между поколением оборудования в [SQL управляемый экземпляр ограничениях ресурсов](resource-limits.md#hardware-generation-characteristics).

## <a name="service-tiers"></a>Уровни службы

SQL Управляемый экземпляр доступен на двух уровнях служб:

- **Общее назначение**: предназначено для приложений с типичными требованиями к производительности и задержкам ввода-вывода.
- **Критически важный для бизнеса**: предназначен для приложений с минимальными требованиями к задержкам ввода-вывода и минимальным влиянием базовых операций обслуживания на рабочую нагрузку.

Оба уровня служб гарантируют доступность на уровне 99,99 % и позволяют вам независимо выбирать размер хранилища и вычислительную емкость. Дополнительные сведения об архитектуре высокой доступности Управляемый экземпляр Azure SQL см. в статье [Высокая доступность и управляемый экземпляр SQL Azure](../database/high-availability-sla.md).

### <a name="general-purpose-service-tier"></a>Уровень служб общего назначения

В следующем списке описываются основные характеристики уровня служб общего назначения.

- Предназначен для большинства бизнес-приложений с типичными требованиями к производительности
- Высокопроизводительное хранилище BLOB-объектов Azure (8 ТБ).
- Встроенная [Высокая доступность](../database/high-availability-sla.md#basic-standard-and-general-purpose-service-tier-availability) на основе надежного хранилища BLOB-объектов Azure и [Azure Service Fabric](../../service-fabric/service-fabric-overview.md)

Дополнительные сведения см. [в разделе уровень хранилища в](https://medium.com/azure-sqldb-managed-instance/file-layout-in-general-purpose-azure-sql-managed-instance-cf21fff9c76c) рекомендациях по уровню общего назначения и [производительности хранилища, а также рекомендации по SQL управляемый экземпляр (общего назначения)](https://blogs.msdn.microsoft.com/sqlcat/2018/07/20/storage-performance-best-practices-and-considerations-for-azure-sql-db-managed-instance-general-purpose/).

Дополнительные сведения о разнице между уровнями служб в [ограничениях ресурсов SQL управляемый экземпляр](resource-limits.md#service-tier-characteristics).

### <a name="business-critical-service-tier"></a>Уровень служб "Критически важный для бизнеса"

Уровень служб критически важный для бизнеса создан для приложений с высокими требованиями к вводу-выводу. Она обеспечивает наивысшую устойчивость к сбоям при использовании нескольких изолированных реплик.

Ниже приведены основные характеристики уровня служб "Критически важный для бизнеса".

- Предназначен для бизнес-приложений с наибольшей производительностью и требованиями к высокой доступности
- поставляется со сверхбыстрым локальным SSD-хранилищем (до 1 ТБ при использовании поколения 4 и до 4 ТБ при использовании поколения 5);
- Встроенная [Высокая доступность](../database/high-availability-sla.md#premium-and-business-critical-service-tier-availability) на основе [группы доступности Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server) и [Azure Service Fabric](../../service-fabric/service-fabric-overview.md)
- Встроенная дополнительная [реплика базы данных, доступная только для чтения](../database/read-scale-out.md) , которая может использоваться для создания отчетов и других рабочих нагрузок только для чтения.
- [Выполняющаяся в памяти OLTP](../in-memory-oltp-overview.md), которую можно использовать для рабочей нагрузки с требованиями высокой производительности.  

Дополнительные сведения о различиях между уровнями служб в [ограничениях ресурсов SQL управляемый экземпляр](resource-limits.md#service-tier-characteristics).

## <a name="management-operations"></a>Операции управления

Управляемый экземпляр Azure SQL предоставляет операции управления, которые можно использовать для автоматического развертывания новых управляемых экземпляров, обновления свойств экземпляра и удаления экземпляров, когда они больше не нужны. Подробное описание операций управления можно найти на странице [Обзор операций управления управляемыми экземплярами](management-operations-overview.md) .

## <a name="advanced-security-and-compliance"></a>Расширенный уровень безопасности и соответствие требованиям

SQL Управляемый экземпляр поставляется с расширенными функциями безопасности, предоставляемыми платформой Azure и ядром СУБД SQL Server.

### <a name="security-isolation"></a>Изоляция безопасности

SQL Управляемый экземпляр обеспечивает дополнительную изоляцию безопасности от других клиентов на платформе Azure. Для обеспечения защиты путем изоляции необходимо следующее.

- [Реализация собственной виртуальной сети](connectivity-architecture-overview.md) и подключение к локальной среде с помощью Azure ExpressRoute или VPN-шлюза.
- В развертывании по умолчанию конечная точка SQL предоставляется только через частный IP-адрес, что обеспечивает возможность безопасного подключения из частных или гибридных сетей Azure.
- Отдельный клиент с выделенной базовой инфраструктурой (вычислений, хранения).

На следующей схеме показаны различные варианты подключения для приложений:

![Высокий уровень доступности](./media/sql-managed-instance-paas-overview/application-deployment-topologies.png)  

Чтобы получить дополнительные сведения об интеграции виртуальной сети и политике сети на уровне подсети, ознакомьтесь со статьями [Архитектура подключения к Управляемому экземпляру Базы данных SQL Azure](connectivity-architecture-overview.md) и [Подключение приложения к Управляемому экземпляру Базы данных SQL](connect-application-instance.md).

> [!IMPORTANT]
> Разместите несколько управляемых экземпляров в одной подсети, где бы они ни находились в соответствии с требованиями безопасности, так как это обеспечит дополнительные преимущества. Совместное размещение экземпляров в одной подсети значительно упрощает обслуживание сетевой инфраструктуры и сокращает время подготовки экземпляра, так как длительность длительной подготовки связана с затратами на развертывание первого управляемого экземпляра в подсети.

### <a name="security-features"></a>Функции безопасности

Управляемый экземпляр Azure SQL предоставляет набор расширенных функций безопасности, которые можно использовать для защиты данных.

- [Аудит управляемый экземпляр SQL](auditing-configure.md) отслеживает события базы данных и записывает их в файл журнала аудита, размещенный в учетной записи хранения Azure. Аудит может помочь вам соблюсти требования нормативов, проанализировать работу с базой данных и получить представление о расхождениях и аномалиях, которые могут указывать на бизнес-проблемы или предполагаемые нарушения безопасности.
- Шифрование данных в Motion-SQL Управляемый экземпляр обеспечивает защиту данных, обеспечивая шифрование данных при перемещении с помощью средств безопасности транспортного уровня. В дополнение к обеспечению безопасности транспортного уровня, SQL Управляемый экземпляр обеспечивает защиту конфиденциальных данных в полете, неактивных и во время обработки запросов с помощью [Always encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine). Always Encrypted обеспечивает защиту данных от нарушений, связанных с кражой критически важных данных. Например, функция Always Encrypted дает возможность всегда хранить в базе данных номера кредитных карт в зашифрованном виде, даже во время обработки запроса, позволяя авторизованному персоналу или обрабатывающему их приложению расшифровывать их только в момент использования.
- [Расширенная защита от угроз](threat-detection-configure.md) дополняет [Аудит](auditing-configure.md) , предоставляя дополнительный уровень логики безопасности, встроенный в службу, которая обнаруживает необычные и потенциально опасные попытки доступа к базам данных или их использования. Вы получаете оповещения о подозрительных действиях, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных закономерностях в доступе к базам данных. Предупреждения Расширенной защиты от угроз можно просмотреть в [Центре безопасности Azure](https://azure.microsoft.com/services/security-center/). Они предоставляют сведения о подозрительных действиях и рекомендуемые действия по исследованию и устранению угрозы.  
- [Динамическое маскирование данных](/sql/relational-databases/security/dynamic-data-masking) ограничивает раскрытие конфиденциальных данных путем маскирования их для пользователей без привилегий. Динамическое маскирование данных помогает предотвратить несанкционированный доступ к конфиденциальным данным, позволяя вам самостоятельно определить, какой объем конфиденциальных данных следует раскрывать с минимальным влиянием на уровне приложения. Эта функция безопасности на основе политики скрывает конфиденциальные данные в результирующем наборе запроса в заданных полях базы данных, а данные в базе данных не меняются.
- [Безопасность на уровне строк](/sql/relational-databases/security/row-level-security) (RLS) позволяет управлять доступом к строкам в таблице базы данных на основе характеристик пользователя, выполняющего запрос (например, членство в группе или контекст выполнения). RLS упрощает проектирование и кодирование безопасности в приложении. RLS позволяет реализовать ограничения доступа к строкам данных. Например, обеспечьте сотрудникам доступ только к тем строкам данных, которые имеют отношение к их отделу, или только к тем данным, которые относятся к ним.
- [Прозрачное шифрование данных (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql) шифрует файлы данных SQL управляемый экземпляр, называемые шифрованием неактивных данных. Функция прозрачного шифрования данных выполняет шифрование и дешифрование ввода-вывода в реальном времени для файлов данных и журналов. При шифровании используется ключ шифрования базы данных (DEK), который хранится в загрузочной записи базы данных, где можно получить к нему доступ при восстановлении. Вы можете защитить все свои базы данных в управляемом экземпляре с помощью прозрачного шифрования данных. TDE — это проверенная технология шифрования неактивных данных в SQL Server, необходимая многим стандартам соответствия требованиям для защиты от кражи носителей.

Миграция зашифрованной базы данных на SQL Управляемый экземпляр поддерживается с помощью Azure Database Migration Service или собственного восстановления. Если планируется миграция зашифрованной базы данных с помощью собственного восстановления, необходимо выполнить миграцию существующего сертификата TDE из SQL Server экземпляра в SQL Управляемый экземпляр. Дополнительные сведения о параметрах миграции см. [в разделе SQL Server миграция в SQL управляемый экземпляр](migrate-to-instance-from-sql-server.md).

## <a name="azure-active-directory-integration"></a>Интеграция Azure Active Directory

SQL Управляемый экземпляр поддерживает традиционные имена входа и имена входа ядра СУБД SQL Server, интегрированные с Azure AD. Участники сервера Azure AD (**общедоступная Предварительная**версия) представляют собой облачную версию Azure для входа в локальную базу данных, используемую в локальной среде. Участники сервера Azure AD (имена входа) позволяют указывать пользователей и группы из клиента Azure AD как реальные участники уровня экземпляра, способные выполнять любые операции на уровне экземпляра, включая запросы между базами данных в пределах одного управляемого экземпляра.

Новый синтаксис вводится для создания участников сервера Azure AD (имен входа) **из внешнего поставщика**. Дополнительные сведения о синтаксисе см. в статье <a href="/sql/t-sql/statements/create-login-transact-sql?view=azuresqldb-mi-current">Создание имени входа</a>и Просмотр статьи [предоставление администратора Azure Active Directory для SQL управляемый экземпляр](../database/authentication-aad-configure.md#provision-azure-ad-admin-sql-managed-instance) .

### <a name="azure-active-directory-integration-and-multi-factor-authentication"></a>Интеграция Azure Active Directory и Многофакторная идентификация

SQL Управляемый экземпляр позволяет централизованно управлять удостоверениями пользователей базы данных и других служб Майкрософт с [Azure Active Directoryной интеграцией](../database/authentication-aad-overview.md). Эта возможность упрощает управление разрешениями и повышает уровень безопасности. Azure Active Directory поддерживает [многофакторную проверку подлинности](../database/authentication-mfa-ssms-configure.md) для повышения безопасности данных и приложений с поддержкой единого входа.

### <a name="authentication"></a>Аутентификация

Проверка подлинности SQL Управляемый экземпляр означает, как пользователи подтверждают свою личность при подключении к базе данных. SQL Управляемый экземпляр поддерживает два типа проверки подлинности:  

- **Проверка подлинности SQL**:

  Это метод аутентификации с использованием имени пользователя и пароля.
- **Аутентификация Azure Active Directory**.

  Это метод аутентификации с использованием удостоверений, контролируемых Azure Active Directory, которая поддерживается управляемыми и интегрированными доменами. [По возможности](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode) используйте проверку подлинности Active Directory (встроенная безопасность).

### <a name="authorization"></a>Авторизация

Авторизация означает, что пользователь может выполнять в базе данных в Azure SQL Управляемый экземпляр и управляется членством в роли базы данных и разрешениями на уровне объектов. SQL Управляемый экземпляр имеет те же возможности авторизации, что и SQL Server 2017.

## <a name="database-migration"></a>Миграция базы данных

SQL Управляемый экземпляр предназначен для пользовательских сценариев с массовым переносом баз данных из локальных или внедренных баз данных. SQL Управляемый экземпляр поддерживает несколько вариантов миграции баз данных:

### <a name="backup-and-restore"></a>Резервное копирование и восстановление  

При перемещении используются резервные копии SQL, сохраненные в хранилище BLOB-объектов Azure. Резервные копии, хранящиеся в большом двоичном объекте службы хранилища Azure, можно напрямую восстановить в управляемый экземпляр с помощью [команды T-SQL RESTORE](https://docs.microsoft.com/sql/t-sql/statements/restore-statements-transact-sql?view=azuresqldb-mi-current).

- Краткое руководство, в котором показано, как восстановить стандартные средства импорта данных из стандартного файла резервной копии, см. в разделе [Восстановление файла резервной копии в управляемый экземпляр](restore-sample-database-quickstart.md). В этом кратком руководстве показано, как передать файл резервной копии в хранилище BLOB-объектов Azure и защитить его с помощью ключа подписанного URL-адрес (SAS).
- Сведения о восстановлении из URL-адреса см. в разделе [Исходное восстановление из URL-адреса](migrate-to-instance-from-sql-server.md#native-restore-from-url).

> [!IMPORTANT]
> Резервные копии из управляемого экземпляра можно восстановить только в другом управляемом экземпляре. Их нельзя восстановить в экземпляре SQL Server или в базе данных SQL Azure.

### <a name="database-migration-service"></a>Database Migration Service

Azure Database Migration Service — это полностью управляемая служба, которая выполняет непрерывную миграцию из множества источников баз данных на платформы данных Azure с минимальным временем простоя. Эта служба упрощает задачи, необходимые для перемещения существующих баз данных сторонних разработчиков и SQL Server в базу данных SQL Azure, Управляемый экземпляр SQL Azure и SQL Server на виртуальной машине Azure. Узнайте, [как перенести локальную базу данных на SQL управляемый экземпляр с помощью Database Migration Service](https://aka.ms/migratetoMIusingDMS).

## <a name="sql-features-supported"></a>Поддерживаемые функции SQL

SQL Управляемый экземпляр стремится обеспечить совместимость с контактной зоной 100% с последней версией SQL Server с помощью промежуточного плана выпуска. Список функций и списков сравнения см. в разделе [Сравнение функций sql управляемый экземпляр](../database/features-comparison.md), а список различий t-SQL в SQL Управляемый экземпляр и SQL Server см. в разделе [отличия SQL управляемый экземпляр t-SQL от SQL Server](transact-sql-tsql-differences-sql-server.md).

SQL Управляемый экземпляр поддерживает обратную совместимость с базами данных SQL Server 2008. Непосредственная миграция с серверов баз данных SQL Server 2005 поддерживается, а уровень совместимости для переносимых баз данных SQL Server 2005 обновляется до SQL Server 2008.
  
На следующей схеме показано совместимость контактной зоны в SQL Управляемый экземпляр.  

![Миграция](./media/sql-managed-instance-paas-overview/migration.png)

### <a name="key-differences-between-sql-server-on-premises-and-sql-managed-instance"></a>Основные различия между SQL Server локальной средой и Управляемый экземпляр SQL

SQL Управляемый экземпляр преимуществами постоянно обновляемых данных в облаке, что означает, что некоторые функции в SQL Server могут быть устаревшими, снятыми с учета или иметь альтернативы. Существуют особые случаи, когда средствам необходимо определить, что конкретный компонент работает немного иначе или что служба работает в среде, которую вы не полностью контролируете.

Некоторые ключевые отличия:

- Высокий уровень доступности встроен и предварительно настроен с использованием технологии, аналогичной [группы доступности Always on](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server).
- Существует только автоматическое резервное копирование и восстановление на момент времени. Клиенты могут инициировать `copy-only` резервное копирование, которое не мешает автоматической цепочке резервного копирования.
- Указание полных физических путей не поддерживается, поэтому все соответствующие сценарии должны поддерживаться по-разному: Restore DB не поддерживает перемещение, CREATE DB не допускает физические пути, BULK INSERT работает только с большими двоичными объектами Azure и т. д.
- SQL Управляемый экземпляр поддерживает [аутентификацию Azure AD](../database/authentication-aad-overview.md) в качестве облачной альтернативы проверке подлинности Windows.
- SQL Управляемый экземпляр автоматически управляет файловыми группами и файлами XTP для баз данных, содержащих объекты OLTP в памяти.
- SQL Управляемый экземпляр поддерживает SQL Server Integration Services (SSIS) и может размещать каталог служб SSIS (SSISDB), в котором хранятся пакеты служб SSIS, но они выполняются на управляемом Azure-SSIS Integration Runtime (IR) в фабрике данных Azure. См. статью [создание Azure-SSIS IR в фабрике данных](https://docs.microsoft.com/azure/data-factory/create-azure-ssis-integration-runtime). Сведения о сравнении функций служб SSIS см. в статье [Сравнение базы данных SQL с sql управляемый экземпляр](../../data-factory/create-azure-ssis-integration-runtime.md#comparison-of-sql-database-and-sql-managed-instance).

### <a name="administration-features"></a>Функции администрирования

SQL Управляемый экземпляр позволяет системным администраторам тратить меньше времени на выполнение административных задач, так как служба либо выполняет их самостоятельно, либо значительно упрощает эти задачи. Например, [Установка и исправление ОС/RDBMS](../database/high-availability-sla.md), [Динамическое изменение размера и конфигурации экземпляра](../database/single-database-scale.md), [резервное копирование](../database/automated-backups-overview.md), [репликация базы данных](replication-between-two-instances-configure-tutorial.md) (включая системные базы данных), [Конфигурация высокой доступности](../database/high-availability-sla.md)и настройка потоков данных мониторинга работоспособности и [производительности](../../azure-monitor/insights/azure-sql.md) .

Дополнительные сведения см. [в разделе Список поддерживаемых и неподдерживаемых функций SQL управляемый экземпляр](../database/features-comparison.md)и [различия T-SQL между Управляемый экземпляр SQL и SQL Server](transact-sql-tsql-differences-sql-server.md).

### <a name="programmatically-identify-a-managed-instance"></a>Программная выявление управляемого экземпляра

В следующей таблице показаны некоторые свойства, доступные через Transact-SQL, которые можно использовать для определения работы приложения с SQL Управляемый экземпляр и получения важных свойств.

|Свойство|Значение|Комментарий|
|---|---|---|
|`@@VERSION`|Microsoft SQL Azure (RTM) - 12.0.2000.8 2018-03-07 Copyright (C) 2018 Microsoft Corporation.|Это значение совпадает со значением в базе данных SQL. Это **не** означает, что ядро СУБД SQL версии 12 (SQL Server 2014). SQL Управляемый экземпляр всегда запускает последнюю стабильную версию ядра SQL, которая равна или выше последней доступной RTM-версии SQL Server.  |
|`SERVERPROPERTY ('Edition')`|SQL Azure|Это значение совпадает со значением в базе данных SQL.|
|`SERVERPROPERTY('EngineEdition')`|8|Данное значение уникально идентифицирует управляемый экземпляр.|
|`@@SERVERNAME`, `SERVERPROPERTY ('ServerName')`|Полное DNS-имя экземпляра в формате `<instanceName>`.`<dnsPrefix>`.database.windows.net, где `<instanceName>` — имя, предоставленное клиентом, а `<dnsPrefix>` — автоматически формируемая часть имени, гарантируемая уникальность глобального DNS-имени (например, "wcus17662feb9ce98").|Пример: my-managed-instance.wcus17662feb9ce98.database.windows.net|

## <a name="next-steps"></a>Дальнейшие действия

- Сведения о создании первого управляемого экземпляра см. в разделе [Краткое руководство](instance-create-quickstart.md).
- Сведения о функциях и список сравнения см. в статье [Сравнение функций Базы данных SQL Azure и SQL Server](../database/features-comparison.md).
- Дополнительные сведения о конфигурации виртуальной сети см. в разделе [Конфигурация SQL управляемый экземпляр vnet](connectivity-architecture-overview.md).
- Краткое руководство по созданию управляемого экземпляра и восстановлению базы данных из файла резервной копии см. в разделе [Создание управляемого экземпляра](instance-create-quickstart.md).
- Руководство по использованию Azure Database Migration Service для миграции см. в разделе [Миграция SQL управляемый экземпляр с помощью Database Migration Service](../../dms/tutorial-sql-server-to-managed-instance.md).
- Дополнительные сведения о производительности базы данных SQL Управляемый экземпляр с помощью встроенных средств анализа устранения неполадок см. в статье [мониторинг управляемый экземпляр SQL с помощью аналитика SQL Azure](../../azure-monitor/insights/azure-sql.md).
- Сведения о ценах см. на странице [цен на базу данных SQL](https://azure.microsoft.com/pricing/details/sql-database/managed/).
