---
title: Создание виртуальной сети
titleSuffix: Azure SQL Managed Instance
description: В этой статье описывается создание виртуальной сети, настроенной для поддержки развертывания Управляемый экземпляр Azure SQL.
services: sql-database
ms.service: sql-managed-instance
ms.subservice: operations
ms.custom: sqldbrb=1
ms.devlang: ''
ms.topic: conceptual
author: srdan-bozovic-msft
ms.author: srbozovi
ms.reviewer: sstein, bonova, carlrab
ms.date: 09/12/2019
ms.openlocfilehash: d6458794b8d3c5ba68109dbc90a075d6a2a577b9
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84711329"
---
# <a name="create-a-virtual-network-for-azure-sql-managed-instance"></a>Создание виртуальной сети для Управляемого экземпляра SQL Azure
[!INCLUDE[appliesto-sqlmi](../includes/appliesto-sqlmi.md)]

В этой статье объясняется, как создать допустимую виртуальную сеть и подсеть, в которых можно развернуть Управляемый экземпляр Azure SQL.

Управляемый экземпляр Azure SQL необходимо развернуть в [виртуальной сети](../../virtual-network/virtual-networks-overview.md)Azure. Это развертывание поддерживает следующие сценарии:

- Защищенный частный IP-адрес.
- Подключение к SQL Управляемый экземпляр непосредственно из локальной сети
- Подключение Управляемый экземпляр SQL к связанному серверу или другому локальному хранилищу данных
- Подключение Управляемый экземпляр SQL к ресурсам Azure  

> [!NOTE]
> Перед развертыванием первого экземпляра следует [определить размер подсети для управляемый экземпляр SQL](vnet-subnet-determine-size.md) . Вы не можете изменить размер подсети после того, как поместите в нее ресурсы.
>
> Если вы планируете использовать существующую виртуальную сеть, необходимо изменить эту конфигурацию сети, чтобы она соответствовала SQL Управляемый экземпляр. Дополнительные сведения см. в разделе [изменение существующей виртуальной сети для SQL управляемый экземпляр](vnet-existing-add-subnet.md).
>
> После создания управляемого экземпляра перемещение управляемого экземпляра или виртуальной сети в другую группу ресурсов или подписку не поддерживается.  Перемещение управляемого экземпляра в другую подсеть также не поддерживается.
>

## <a name="create-a-virtual-network"></a>Создание виртуальной сети

Самый простой способ создания и настройки виртуальной сети — использовать шаблон развертывания Azure Resource Manager.

1. Войдите на портал Azure.

2. Выберите **Развертывание в Azure**:

   <a target="_blank" href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2F101-sql-managed-instance-azure-environment%2Fazuredeploy.json" rel="noopener" data-linktype="external"> <img src="https://azuredeploy.net/deploybutton.png" data-linktype="external"> </a>

   Эта кнопка открывает форму, которую можно использовать для настройки сетевой среды, в которой можно развернуть Управляемый экземпляр SQL.

   > [!Note]
   > Этот шаблон Azure Resource Manager развертывает виртуальную сеть с двумя подсетями. Одна подсеть с именем **манажединстанцес**зарезервирована для SQL управляемый экземпляр и имеет предварительно настроенную таблицу маршрутов. Другая подсеть, называемая **по умолчанию**, используется для других ресурсов, которые должны получать доступ к управляемый экземпляр SQL (например, к виртуальным машинам Azure).

3. Настройте сетевую среду. В приведенной ниже форме можно настроить параметры сетевой среды:

   ![Шаблон Resource Manager для настройки сети Azure](./media/virtual-network-subnet-create-arm-template/create-mi-network-arm.png)

   Вы можете изменить имена виртуальной сети и подсетей и настроить диапазоны IP-адресов, связанные с сетевыми ресурсами. После нажатия кнопки **Купить** эта форма создаст и настроит вашу среду. Если вам не нужны две подсети, можно удалить подсеть, заданную по умолчанию.

## <a name="next-steps"></a>Дальнейшие шаги

- Общие сведения см. в разделе [что такое SQL управляемый экземпляр?](sql-managed-instance-paas-overview.md).
- Узнайте о [архитектуре подключения в управляемый экземпляр SQL](connectivity-architecture-overview.md).
- Узнайте, как [изменить существующую виртуальную сеть для управляемый экземпляр SQL](vnet-existing-add-subnet.md).
- Руководство, в котором показано, как создать виртуальную сеть, создать управляемый экземпляр и восстановить базу данных из резервной копии базы данных, см. в разделе [Создание управляемого экземпляра](instance-create-quickstart.md).
- Сведения о проблемах с DNS см. [в статье Настройка настраиваемой службы DNS](custom-dns-configure.md).
