---
title: Часто задаваемые вопросы
titleSuffix: Azure SQL Managed Instance
description: SQL Azure Управляемый экземпляр часто задаваемые вопросы
services: sql-database
ms.service: sql-managed-instance
ms.subservice: operations
ms.custom: sqldbrb=1
ms.devlang: ''
ms.topic: conceptual
author: jovanpop-msft
ms.author: jovanpop
ms.reviewer: sstein, carlrab
ms.date: 03/17/2020
ms.openlocfilehash: 88f92117dc07fc241ca714851956e386cd10d617
ms.sourcegitcommit: e995f770a0182a93c4e664e60c025e5ba66d6a45
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/08/2020
ms.locfileid: "86135032"
---
# <a name="azure-sql-managed-instance-frequently-asked-questions-faq"></a>SQL Azure Управляемый экземпляр часто задаваемые вопросы
[!INCLUDE[appliesto-sqlmi](../includes/appliesto-sqlmi.md)]

Эта статья содержит наиболее распространенные вопросы о [управляемый экземпляр Azure SQL](sql-managed-instance-paas-overview.md).

## <a name="supported-features"></a>Поддерживаемые функции

**Где можно найти список функций, поддерживаемых в SQL Управляемый экземпляр?**

Список поддерживаемых функций в SQL Управляемый экземпляр см. в статье [функции управляемый экземпляр SQL Azure](../database/features-comparison.md).

Различия в синтаксисе и поведении между Управляемый экземпляр и SQL Server SQL Azure см. [в статье отличия T-SQL от SQL Server](transact-sql-tsql-differences-sql-server.md).


## <a name="tech-spec--resource-limits"></a>Технические спецификации & ограничения ресурсов
 
**Где можно найти технические характеристики и ограничения ресурсов для SQL Управляемый экземпляр?**

Сведения о доступных характеристиках создания оборудования см. [в разделе технические различия в поколениях оборудования](resource-limits.md#hardware-generation-characteristics).
Сведения о доступных уровнях служб и их характеристиках см. в статье [технические различия между уровнями служб](resource-limits.md#service-tier-characteristics).

## <a name="known-issues--bugs"></a>Известные проблемы & ошибках

**Где можно найти известные проблемы и ошибки?**

Сведения об ошибках и известных проблемах см. в разделе [Известные проблемы](../database/doc-changes-updates-release-notes.md#known-issues).

## <a name="new-features"></a>новые функции;

**Где можно найти новейшие функции и функции в общедоступной предварительной версии?**

Новые и предварительные версии функций см. в разделе [заметки о выпуске](../database/doc-changes-updates-release-notes.md?tabs=managed-instance).

## <a name="deployment-times"></a>Время развертывания 

**Сколько времени занимает создание или обновление экземпляра или восстановление базы данных?**

Ожидаемое время создания управляемого экземпляра или изменения уровня служб (виртуальных ядер, хранилище) зависит от нескольких факторов. Ознакомьтесь с [операциями управления](/azure/sql-database/sql-database-managed-instance#managed-instance-management-operations). 

## <a name="naming-conventions"></a>Соглашения об именах

**Может ли управляемый экземпляр иметь то же имя, что и SQL Server локального экземпляра?**

Изменение имени управляемого экземпляра не поддерживается.

Зона DNS по умолчанию *. Database.Windows.NET* для управляемого экземпляра может быть изменена. 

Для использования другой зоны DNS вместо значения по умолчанию, например *. contoso.com*: 
- Используйте Кликонфиг для определения псевдонима. Это средство является просто оболочкой параметров реестра, поэтому ее можно выполнить с помощью групповой политики или скрипта.
- Используйте *CNAME* с параметром *TrustServerCertificate = true* .

## <a name="move-a-database-from-sql-managed-instance"></a>Перемещение базы данных из Управляемый экземпляр SQL 

**Как переместить базу данных из SQL Управляемый экземпляр обратно в SQL Server или базу данных SQL Azure?**

Можно [экспортировать базу данных в BACPAC](../database/database-export.md) , а затем [импортировать BACPAC-файл](../database/database-import.md). Этот подход рекомендуется, если размер базы данных меньше 100 ГБ.

Репликацию транзакций можно использовать, если все таблицы в базе данных имеют первичные ключи.

Собственные `COPY_ONLY` резервные копии, созданные из sql управляемый экземпляр, не могут быть восстановлены в SQL Server, так как SQL управляемый экземпляр имеет более высокую версию базы данных по сравнению с SQL Server.

## <a name="migrate-an-instance-database"></a>Миграция базы данных экземпляра

**Как перенести базу данных экземпляра в базу данных SQL Azure?**

Один из вариантов — [экспортировать базу данных в BACPAC](../database/database-export.md) , а затем [импортировать BACPAC-файл](../database/database-import.md). 

Этот подход рекомендуется, если размер базы данных меньше 100 ГБ. Репликацию транзакций можно использовать, если все таблицы в базе данных имеют первичные ключи.

## <a name="switch-hardware-generation"></a>Переключить создание оборудования 

**Можно ли переключить создание оборудования SQL Управляемый экземпляр между GEN 4 и Gen 5 Online?**

Автоматическое переключение в оперативный режим между поколениями оборудования возможно, если оба поколения оборудования доступны в регионе, где подготовлена Управляемый экземпляр SQL. В этом случае можно проверить [страницу обзора модели Виртуальное ядро](../database/service-tiers-vcore.md), в которой объясняется, как переключаться между поколениями оборудования.

Это длительная операция, так как новый управляемый экземпляр будет подготовлен в фоновом режиме, и базы данных автоматически переносятся между старым и новым экземплярами с быстрой отработкой отказа в конце процесса. 

**Что делать, если оба поколения оборудования не поддерживаются в одном регионе?**

Если оба поколения оборудования не поддерживаются в одном регионе, изменение создания оборудования возможно, но необходимо выполнить вручную. Для этого необходимо подготавливать новый экземпляр в регионе, где доступно необходимое поколение оборудования, и вручную выполнять резервное копирование и восстановление данных между старыми и новыми экземплярами.

**Что делать, если нет достаточного количества IP-адресов для выполнения операции обновления?**

Если в подсети, в которой подготовлен управляемый экземпляр, недостаточно IP-адресов, необходимо создать в нем новую подсеть и новый управляемый экземпляр. Кроме того, мы рекомендуем создать подсеть с дополнительными IP-адресами, чтобы будущие операции обновления не мешали подобным ситуациям. (Чтобы получить правильный размер подсети, проверьте, [как определить размер подсети VNet](vnet-subnet-determine-size.md).) После подготовки нового экземпляра можно вручную создать резервную копию и восстановить данные между старыми и новыми экземплярами или выполнить [восстановление на момент времени](point-in-time-restore.md?tabs=azure-powershell). 


## <a name="tune-performance"></a>Настройка производительности

**Разделы справки настроить производительность SQL Управляемый экземпляр?**

SQL Управляемый экземпляр на уровне общего назначения использует удаленное хранилище, поэтому размер файлов данных и журналов важен для производительности. Дополнительные сведения см. [в разделе влияние размера файла журнала на общего назначения производительность SQL управляемый экземпляр](https://medium.com/azure-sqldb-managed-instance/impact-of-log-file-size-on-general-purpose-managed-instance-performance-21ad170c823e).

Если Рабочая нагрузка состоит из большого количества небольших транзакций, рассмотрите возможность переключения типа подключения с прокси на режим перенаправления.

## <a name="maximum-storage-size"></a>Максимальный размер хранилища

**Каков максимальный размер хранилища для Управляемый экземпляр SQL?**

Размер хранилища для Управляемый экземпляр SQL зависит от выбранного уровня служб (общего назначения или критически важный для бизнеса). Ограничения хранилища этих уровней служб см. в статье [характеристики уровня служб](../database/service-tiers-general-purpose-business-critical.md).

  
## <a name="networking-requirements"></a>Требования к сети 

**Каковы текущие ограничения на входящие и исходящие NSG в подсети Управляемый экземпляр?**

Необходимые правила NSG и UDR описаны [здесь](connectivity-architecture-overview.md#mandatory-inbound-security-rules-with-service-aided-subnet-configuration)и автоматически устанавливаются службой.
Имейте в виду, что эти правила являются лишь теми, которые необходимы для обслуживания службы. Чтобы подключиться к управляемому экземпляру и использовать различные функции, необходимо задать дополнительные правила, относящиеся к функциям, которые необходимо поддерживать.

**Как настроить входящие правила NSG на портах управления?**

SQL Управляемый экземпляр отвечает за настройку правил на портах управления. Это достигается с помощью функций, называемых [конфигурацией подсети](connectivity-architecture-overview.md#service-aided-subnet-configuration)с помощью служб.
Это позволяет обеспечить непрерывный поток трафика управления для выполнения соглашения об уровне обслуживания.

**Можно ли получить диапазоны исходных IP-адресов, используемых для входящего трафика управления?**

Да. Вы можете анализировать трафик, поступающий через группу безопасности сети, [настроив журналы потоков наблюдателя за сетями](https://docs.microsoft.com/azure/network-watcher/network-watcher-monitoring-overview#analyze-traffic-to-or-from-a-network-security-group).

**Можно ли задать NSG для управления доступом к конечной точке данных (порт 1433)?**

Да. После подготовки Управляемый экземпляр можно задать NSG, который управляет входящим доступом к порту 1433. Рекомендуется максимально сократить диапазон IP-адресов.

**Можно ли настроить NVA или локальный брандмауэр для фильтрации исходящего трафика управления на основе полных доменных имен?**

Нет. Это не поддерживается по нескольким причинам.
-   Маршрутизация трафика, представляющего ответ на входящий запрос управления, будет асимметричной и не сможет работать.
-   Маршрутизация трафика, переходящего в хранилище, повлияет на пропускную способность и задержку, поэтому мы не сможем предоставить ожидаемое качество обслуживания и доступность.
-   В зависимости от опыта эти конфигурации подвержены ошибкам и не поддерживаются.

**Можно ли задать NVA или брандмауэр для исходящего трафика без управления?**

Да. Самый простой способ добиться этого — добавить правило 0/0 к UDR, связанному с подсетью управляемых экземпляров, для маршрутизации трафика через NVA.
 
**Сколько IP-адресов требуется для Управляемый экземпляр?**

Подсеть должна иметь достаточное количество доступных [IP-адресов](connectivity-architecture-overview.md#network-requirements). Сведения об определении размера подсети VNet для SQL Управляемый экземпляр см. в разделе [Определение требуемого размера подсети и диапазона для управляемый экземпляр](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-determine-size-vnet-subnet). 

**Что делать, если нет достаточного количества IP-адресов для выполнения операции обновления экземпляра?**

Если в подсети, в которой подготовлен управляемый экземпляр, недостаточно [IP-адресов](connectivity-architecture-overview.md#network-requirements) , необходимо создать в нем новую подсеть и новый управляемый экземпляр. Кроме того, мы рекомендуем создать подсеть с дополнительными IP-адресами, чтобы будущие операции обновления не мешали подобным ситуациям. После подготовки нового экземпляра можно вручную создать резервную копию и восстановить данные между старыми и новыми экземплярами или выполнить [восстановление на момент времени](point-in-time-restore.md?tabs=azure-powershell).

**Нужна ли пустая подсеть для создания Управляемый экземпляр?**

Нет. Можно использовать либо пустую подсеть, либо подсеть, которая уже содержит Управляемый экземпляр. 

**Можно ли изменить диапазон адресов подсети?**

Не при наличии управляемых экземпляров внутри. Это ограничение сетевой инфраструктуры Azure. Вы можете [добавить дополнительное адресное пространство только в пустую подсеть](https://docs.microsoft.com/azure/virtual-network/virtual-network-manage-subnet#change-subnet-settings). 

**Можно ли переместить управляемый экземпляр в другую подсеть?**

Нет. Это текущая Управляемый экземпляр ограничений на разработку. Однако можно подготавливать новый экземпляр в другой подсети и вручную выполнять резервное копирование и восстановление данных между старым и новым экземплярами или выполнять [восстановление на момент времени](point-in-time-restore.md?tabs=azure-powershell)между экземплярами.

**Нужна ли пустая виртуальная сеть для создания Управляемый экземпляр?**

Это необязательное значение. Вы можете [создать виртуальную сеть для SQL azure управляемый экземпляр](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-create-vnet-subnet) или [настроить существующую виртуальную сеть для управляемый экземпляр SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-configure-vnet-subnet).

**Можно ли поместить Управляемый экземпляр с другими службами в подсети?**

Нет. Сейчас мы не поддерживаем размещение Управляемый экземпляр в подсети, которая уже содержит другие типы ресурсов.

## <a name="connectivity"></a>Соединение 

**Можно ли подключиться к управляемому экземпляру по IP-адресу?**

Нет, такая возможность не поддерживается. Имя узла Управляемый экземпляр сопоставляется с подсистемой балансировки нагрузки перед виртуальным кластером Управляемый экземпляр. Так как один виртуальный кластер может содержать несколько управляемых экземпляров, подключение не может маршрутизироваться к правильному Управляемый экземпляр без указания его имени.
Дополнительные сведения об архитектуре виртуальных кластеров SQL Управляемый экземпляр см. в статье [Архитектура подключения виртуального кластера](connectivity-architecture-overview.md#virtual-cluster-connectivity-architecture).

**Может ли управляемый экземпляр иметь статический IP-адрес?**

В настоящее время это не поддерживается.

В редких, но необходимых ситуациях может потребоваться выполнить оперативную миграцию управляемого экземпляра в новый виртуальный кластер. При необходимости эта миграция обусловлена изменениями в нашем технологическом стеке, предназначенным для повышения безопасности и надежности службы. Миграция в новый виртуальный кластер приводит к изменению IP-адреса, сопоставленного с именем узла управляемого экземпляра. Служба управляемого экземпляра не требует поддержки статических IP-адресов и оставляет за собой право менять ее без уведомления в рамках регулярных циклов обслуживания.

По этой причине мы настоятельно рекомендуем полагаться на неизменность IP-адреса, так как это может привести к ненужному простою.

**У Управляемый экземпляр есть общедоступная конечная точка?**

Да. Управляемый экземпляр имеет общедоступную конечную точку, которая по умолчанию используется только для управления службами, но клиент может также включить его для доступа к данным. Дополнительные сведения см. в статье [использование управляемый экземпляр SQL с общедоступными конечными точками](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-public-endpoint-securely). Чтобы настроить общедоступную конечную точку, перейдите к разделу [Настройка общедоступной конечной точки в управляемый экземпляр SQL](public-endpoint-configure.md).

**Как Управляемый экземпляр управлять доступом к общедоступной конечной точке?**

Управляемый экземпляр управляет доступом к общедоступной конечной точке на уровне сети и приложения.

Службы управления и развертывания подключаются к управляемому экземпляру с помощью [конечной точки управления](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-connectivity-architecture#management-endpoint) , сопоставленной с внешней подсистемой балансировки нагрузки. Трафик направляется на узлы, только если он получен на предопределенном наборе портов, используемых только компонентами управления управляемого экземпляра. Встроенный брандмауэр на узлах настроен на разрешение трафика только из диапазонов IP-адресов Майкрософт. Сертификаты взаимно проходят проверку подлинности всего обмена данными между компонентами управления и плоскостью управления. Дополнительные сведения см. в статье [Архитектура подключения для SQL управляемый экземпляр](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-connectivity-architecture#virtual-cluster-connectivity-architecture).

**Можно ли использовать общедоступную конечную точку для доступа к данным в Управляемый экземпляр базах данных?**

Да. Клиент должен включить доступ к данным общедоступной конечной точки на [портале Azure](public-endpoint-configure.md#enabling-public-endpoint-for-a-managed-instance-in-the-azure-portal)  /  [PowerShell](public-endpoint-configure.md#enabling-public-endpoint-for-a-managed-instance-using-powershell) /ARM и настроить NSG для блокировки доступа к порту данных (номер порта 3342). Дополнительные сведения см. в статьях [Настройка общедоступной конечной точки в Azure sql управляемый экземпляр](public-endpoint-configure.md) и [Использование управляемый экземпляр SQL Azure безопасно с общедоступной конечной точкой](public-endpoint-overview.md). 

**Можно ли указать пользовательский порт для конечных точек данных SQL?**

Нет, этот параметр недоступен.  Для конечной точки частных данных Управляемый экземпляр использует номер порта 1433 и для общедоступной конечной точки данных, Управляемый экземпляр использует номер порта по умолчанию 3342.

**Каков рекомендуемый способ подключения управляемых экземпляров, размещенных в разных регионах?**

Для этого предпочтительным способом является пиринг контура Express Route. Это не должно быть совместно с пирингом виртуальной сети между регионами, который не поддерживается из-за [ограничения](https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview)внутренней подсистемы балансировки нагрузки.

Если пиринг контура Express Route невозможен, единственным другим вариантом является создание VPN-подключения типа "сеть — сеть" ([портал Azure](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal), [PowerShell](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell), [Azure CLI](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-cli)).


## <a name="mitigate-data-exfiltration-risks"></a>Устранение рисков утечка данных  

**Как уменьшить риски утечка данных?**

Чтобы уменьшить риски утечка данных, рекомендуется применить набор параметров безопасности и элементов управления.

- Включите [прозрачное шифрование данных (TDE)](https://docs.microsoft.com/azure/sql-database/transparent-data-encryption-azure-sql) во всех базах данных.
- Выключите среду CLR. Это также рекомендуется и в локальной среде.
- Используйте только проверку подлинности Azure Active Directory (Azure AD).
- Получите доступ к экземпляру с учетной записью администратора базы данных с низким уровнем привилегий.
- Настройка доступа к JIT-Jumpbox для учетной записи sysadmin.
- Включите [аудит SQL](https://docs.microsoft.com/sql/relational-databases/security/auditing/sql-server-audit-database-engine)и интегрируйте его с механизмами предупреждений.
- Включите [обнаружение угроз](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection) в пакете [расширенной защиты данных (ADS)](https://docs.microsoft.com/azure/sql-database/sql-database-advanced-data-security) .


## <a name="cost-saving-use-cases"></a>Варианты использования для экономии затрат

**Где можно найти варианты использования и сократить расходы с помощью SQL Управляемый экземпляр?**

Примеры использования SQL Управляемый экземпляр:

- [коматсу](https://customers.microsoft.com/story/komatsu-australia-manufacturing-azure)
- [кмд](https://customers.microsoft.com/en-ca/story/kmd-professional-services-azure-sql-database)
- [повердетаилс](https://customers.microsoft.com/story/powerdetails-partner-professional-services-azure-sql-database-managed-instance)
- [аллскриптс](https://customers.microsoft.com/story/allscripts-partner-professional-services-azure)

Чтобы получить более полное представление о преимуществах, затратах и рисках, связанных с развертыванием Управляемый экземпляр Azure SQL, также Forrester исследование: [Общее экономическое воздействие База данных SQL Microsoft Azure управляемый экземпляр](https://azure.microsoft.com/resources/forrester-tei-sql-database-managed-instance).


## <a name="dns"></a>DNS

**Можно ли настроить пользовательский DNS для Управляемый экземпляр SQL?**

Да. См. статью [Настройка настраиваемой службы DNS для управляемый экземпляр Azure SQL](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-custom-dns).

**Можно ли выполнить обновление DNS?**

Сейчас мы не предоставляем компонент для обновления конфигурации DNS-сервера для Управляемый экземпляр SQL.

В конечном итоге обновляется конфигурация DNS:

- По истечении срока аренды DHCP.
- При обновлении платформы.

В качестве обходного решения можно понизить уровень SQL Управляемый экземпляр до 4 виртуальных ядер и снова обновить его. Это оказывает побочный результат обновления конфигурации DNS.


## <a name="change-time-zone"></a>Изменить часовой пояс

**Можно ли изменить часовой пояс для существующего управляемого экземпляра?**

Настройка часового пояса может быть установлена при первой инициализации управляемого экземпляра. Изменение часового пояса существующего управляемого экземпляра не поддерживается. Дополнительные сведения см. в разделе [ограничения часовых поясов](timezones-overview.md#limitations).

К обходным решениям относятся создание нового управляемого экземпляра с соответствующим часовым поясом, а затем выполнение резервного копирования и восстановления вручную, а также рекомендации по выполнению [восстановления на момент времени между экземплярами](https://blogs.msdn.microsoft.com/sqlserverstorageengine/2018/06/07/cross-instance-point-in-time-restore-in-azure-sql-database-managed-instance/).


## <a name="resolve-performance-issues"></a>Устранение проблем с производительностью

**Разделы справки устранить проблемы с производительностью SQL Управляемый экземпляр?**

Для сравнения производительности SQL Управляемый экземпляр и SQL Server хорошей отправной точкой являются рекомендации [по сравнению производительности между управляемый экземпляр и SQL Server SQL Azure](https://techcommunity.microsoft.com/t5/Azure-SQL-Database/The-best-practices-for-performance-comparison-between-Azure-SQL/ba-p/683210).

Загрузка данных часто выполняется медленнее в Управляемый экземпляр SQL, чем в SQL Server из-за обязательной модели полного восстановления и [ограничений](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-resource-limits#service-tier-characteristics) пропускной способности записи в журнал транзакций. Иногда это можно обойти, загружая временные данные в базу данных tempdb, а не пользовательскую, либо используя кластеризованные индексы columnstore или таблицы, оптимизированные для памяти.


## <a name="restore-encrypted-backup"></a>Восстановление зашифрованной резервной копии

**Можно ли восстановить зашифрованную базу данных в SQL Управляемый экземпляр?**

Да, вам не нужно расшифровывать базу данных, чтобы восстановить ее в SQL Управляемый экземпляр. Необходимо предоставить сертификат или ключ, используемый в качестве предохранителя ключа шифрования в исходной системе для SQL Управляемый экземпляр, чтобы иметь возможность считывать данные из зашифрованного файла резервной копии. Это можно осуществить двумя путями:

- *Отправка предохранителя сертификата в управляемый экземпляр SQL*. Это можно сделать только с помощью PowerShell. [Пример скрипта](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-migrate-tde-certificate) описывает весь процесс.
- *Отправьте асимметричный ключ-предохранитель в Azure Key Vault и наведите на него управляемый экземпляр SQL*. Этот подход похож на вариант использования, используемый в качестве собственного ключа (BYOK), который также использует интеграцию Key Vault для хранения ключа шифрования. Если вы не хотите использовать ключ в качестве предохранителя ключа шифрования и просто хотите сделать ключ доступным для SQL Управляемый экземпляр для восстановления зашифрованных баз данных, следуйте инструкциям по [настройке BYOK TDE](https://docs.microsoft.com/azure/sql-database/transparent-data-encryption-azure-sql#manage-transparent-data-encryption)и не устанавливайте флажок **сделать выбранный ключ TDE предохранителем по умолчанию**.

После того как средство защиты шифрования будет доступно для Управляемый экземпляр SQL, можно продолжить стандартную процедуру восстановления базы данных.

## <a name="purchasing-models-and-benefits"></a>Модели приобретения и преимущества

**Какие модели приобретения доступны для Управляемый экземпляр SQL?**

SQL Управляемый экземпляр предлагает [модель приобретения на основе виртуальное ядро](sql-managed-instance-paas-overview.md#vcore-based-purchasing-model).

**Какие преимущества можно использовать для SQL Управляемый экземпляр?**

Вы можете сэкономить затраты с помощью преимуществ SQL Azure следующим образом:
-   Разворачивание существующих инвестиций в локальные лицензии и сэкономьте до 55% на [преимущество гибридного использования Azure](https://docs.microsoft.com/azure/azure-sql/azure-hybrid-benefit?tabs=azure-powershell). 
-   Зафиксируйте резервирование для вычислительных ресурсов и сэкономьте до 33 процентов с помощью [преимущества зарезервированного экземпляра](https://docs.microsoft.com/azure/sql-database/sql-database-reserved-capacity). Объедините это с преимуществом гибридного использования Azure, чтобы сэкономить до 82 процентов. 
-   Сэкономьте до 55 процентов и цены на прейскуранты с помощью преимущества цены на разработку и [тестирование Azure](https://azure.microsoft.com/pricing/dev-test/) , которая предлагает скидки для текущих рабочих нагрузок разработки и тестирования.

**Кто имеет право на преимущество зарезервированного экземпляра?**

Чтобы иметь право на преимущество зарезервированного экземпляра, тип подписки должен быть соглашением Enterprise (номера предложения: MS-AZR-0017P или MS-AZR-0148P) или отдельное соглашение с оплатой по мере использования (номера предложений: MS-AZR-0003P или MS-AZR-0023P). Дополнительные сведения о резервировании см. в разделе [преимущество зарезервированного экземпляра](https://docs.microsoft.com/azure/sql-database/sql-database-reserved-capacity). 

**Можно ли отменять, переводить или отменять резервирование?**

Вы можете отменять, переводить и отменять резервирование с определенными ограничениями. Дополнительные сведения см. в статье [Self-service exchanges and refunds for Azure Reservations](https://docs.microsoft.com/azure/cost-management-billing/reservations/exchange-and-refund-azure-reservations) (Самостоятельное выполнение обмена и возмещения средств для резервирований Azure).

## <a name="billing-for-managed-instance-and-backup-storage"></a>Выставление счетов за Управляемый экземпляр и хранилище резервных копий

**Какие варианты цен на SQL Управляемый экземпляр?**

Сведения о Управляемый экземпляр ценах см. на [странице с ценами](https://azure.microsoft.com/pricing/details/azure-sql/sql-managed-instance/single/).

**Как можно отвести затраты на выставление счетов за управляемый экземпляр?**

Это можно сделать с помощью [решения для управления затратами Azure](https://docs.microsoft.com/azure/cost-management-billing/). Перейдите к разделу **подписки** в [портал Azure](https://portal.azure.com) и выберите **анализ затрат**. 

Используйте параметр **накопленные затраты** , а затем выполните фильтрацию по **типу ресурса** `microsoft.sql/managedinstances` .

**Сколько стоит автоматическая архивация?**

Вы получаете одинаковый объем свободного места в хранилище резервных копий по мере приобретения зарезервированного пространства хранения данных, независимо от установленного срока хранения резервной копии. Если объем используемого хранилища резервных копий находится в пределах выделенного свободного места, то при автоматическом резервном копировании на управляемом экземпляре не будет взиматься дополнительная плата, поэтому она будет бесплатной. Превышение использования хранилища резервных копий, превышающего свободное место, приведет к затратам примерно $0,20-$0,24 за ГБ/месяц в регионах США или на странице с ценами для получения дополнительных сведений о вашем регионе. Дополнительные сведения см. в разделе [Описание использования хранилища резервных копий](https://techcommunity.microsoft.com/t5/azure-sql-database/backup-storage-consumption-on-managed-instance-explained/ba-p/1390923).

**Как можно отслеживать затраты на использование хранилища резервных копий?**

Вы можете отслеживать затраты на хранение резервных копий с помощью портала Azure. Инструкции см. в разделе [мониторинг затрат для автоматически создаваемых резервных копий](https://docs.microsoft.com/azure/azure-sql/database/automated-backups-overview?tabs=managed-instance#monitor-costs). 

**Как оптимизировать затраты на хранение резервных копий на управляемом экземпляре?**

Сведения об оптимизации затрат на хранение резервных копий см. в разделе [Точная настройка резервного копирования в управляемый экземпляр SQL](https://techcommunity.microsoft.com/t5/azure-sql-database/fine-tuning-backup-storage-costs-on-managed-instance/ba-p/1390935).

## <a name="password-policy"></a>Политика паролей 

**Какие политики паролей применяются для имен входа SQL Управляемый экземпляр SQL?**

Политика паролей SQL Управляемый экземпляр для имен входа SQL наследует политики платформы Azure, которые применяются к виртуальным машинам, образуя виртуальный кластер, в котором содержится управляемый экземпляр. На данный момент изменить какие-либо из этих параметров невозможно, так как эти параметры определяются в Azure и наследуются управляемым экземпляром.

 > [!IMPORTANT]
 > Платформа Azure может изменять требования политики, не уведомляя службы об этих политиках.

**Каковы текущие политики платформы Azure?**

Каждое имя входа должно устанавливать свой пароль при входе в систему и изменять его пароль после достижения максимального срока.

| **Политика** | **Параметр безопасности** |
| --- | --- |
| Максимальный срок действия пароля. | 42 дней |
| Минимальный срок действия пароля. | 1 день |
| Минимальная длина пароля | 10 символов |
| Пароль должен соответствовать требованиям к сложности | Включено |

**Можно ли отключить сложность и срок действия пароля в SQL Управляемый экземпляр на уровне входа?**

Да, можно управлять CHECK_POLICY и CHECK_EXPIRATION полями на уровне входа. Вы можете проверить текущие параметры, выполнив следующую команду T-SQL:

```sql
SELECT *
FROM sys.sql_logins
```

После этого можно изменить указанные параметры входа, выполнив следующие действия.

```sql
ALTER LOGIN <login_name> WITH CHECK_POLICY = OFF;
ALTER LOGIN <login_name> WITH CHECK_EXPIRATION = OFF;
```

(замените "Test" на требуемое имя для входа и настройте параметры политики и срока действия).

## <a name="azure-feedback-and-support"></a>Отзывы и поддержка Azure

**Где я могу оставить мои идеи для улучшения SQL Управляемый экземпляр?**

Вы можете проголосовать за новую функцию Управляемый экземпляр или создать новую идею улучшения для голосования на [форуме по SQL управляемый экземпляр Feedback](https://feedback.azure.com/forums/915676-sql-managed-instance). Таким образом вы можете участвовать в разработке продукта и помочь нам определить приоритеты наших потенциальных улучшений.

**Как можно создать запрос на поддержку Azure?**

Сведения о том, как создать запрос на поддержку Azure, см. в статье [Создание запроса в службу поддержки Azure](https://docs.microsoft.com/azure/azure-supportability/how-to-create-azure-support-request).

