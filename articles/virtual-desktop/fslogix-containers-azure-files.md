---
title: Контейнеры профилей Фслогикс и файлы Azure в виртуальном рабочем столе Windows — Azure
description: В этой статье описываются контейнеры профилей Фслогикс в виртуальных рабочих столах Windows и файлах Azure.
services: virtual-desktop
author: Heidilohr
ms.service: virtual-desktop
ms.topic: conceptual
ms.date: 08/07/2019
ms.author: helohr
ms.openlocfilehash: 54d3f175e74b9f94c7845725e3d8f4531750df57
ms.sourcegitcommit: b3bad696c2b776d018d9f06b6e27bffaa3c0d9c3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2019
ms.locfileid: "69877556"
---
# <a name="fslogix-profile-containers-and-azure-files"></a>Контейнеры профилей FSLogix и Файлы Azure

Служба виртуальных рабочих столов Windows (Предварительная версия) рекомендует Фслогикс контейнеры профилей в качестве решения для профилей пользователей. Фслогикс предназначен для перемещения профилей в удаленных вычислительных средах, таких как виртуальные рабочие столы Windows. В нем хранится полный профиль пользователя в одном контейнере. При входе в систему этот контейнер динамически вкладывается в вычислительную среду с помощью встроенного виртуального жесткого диска (VHD) и виртуального жесткого диска Hyper-V (VHDX). Профиль пользователя доступен сразу и отображается в системе точно так же, как профиль собственного пользователя.

В этой статье описываются контейнеры профилей Фслогикс, используемые в службе файлов Azure. Эти сведения находятся в контексте виртуального рабочего стола Windows, который был [объявлен на 3/21](https://www.microsoft.com/microsoft-365/blog/2019/03/21/windows-virtual-desktop-public-preview/).

## <a name="user-profiles"></a>Профили пользователей

Профиль пользователя содержит элементы данных о конкретном пользователе, включая сведения о конфигурации, такие как параметры рабочего стола, постоянные сетевые подключения и параметры приложения. По умолчанию Windows создает локальный профиль пользователя, который тесно интегрирован с операционной системой.

Профиль удаленного пользователя предоставляет раздел между данными пользователя и операционной системой. Это позволяет заменить или изменить операционную систему, не влияя на данные пользователя. В удаленный рабочий стол узле сеансов и инфраструктурах виртуальных рабочих столов (VDI) операционная система может быть заменена по следующим причинам.

- Обновление операционной системы
- Замена существующей виртуальной машины (ВМ)
- Пользователь входит в состав непостоянного (не постоянного) окружения или среды VDI.

Продукты Майкрософт работают с несколькими технологиями для удаленных профилей пользователей, включая следующие технологии:
- Перемещаемые профили пользователей (RUP)
- Диски профилей пользователей (UPD)
- Роуминг состояния предприятия (ESR)

UPD и RUP — это наиболее широко используемые технологии для профилей пользователей в средах узла сеансов удаленный рабочий стол и виртуальных жестких дисков (VHD).

### <a name="challenges-with-previous-user-profile-technologies"></a>Проблемы с предыдущими технологиями профилей пользователей

Существующие и устаревшие решения Майкрософт для профилей пользователей поставляются с различными проблемами. Ни одно из предыдущих решений не обработало все потребности профиля пользователя, которые поставляются с средой удаленных рабочих столов или VDI. Например, UPD не может работать с большими OST-файлами, и RUP не сохраняет современные параметры.

#### <a name="functionality"></a>Функция

В следующей таблице приведены преимущества и ограничения предыдущих технологий профилей пользователей.

| Технология | Современные параметры | Параметры Win32 | Параметры ОС | Пользовательские данные | Поддерживается на SKU сервера | Хранилище серверной части в Azure | Локальное хранилище серверной части | Поддержка версий | Время следующего входа |Примечания|
| ---------- | :-------------: | :------------: | :---------: | --------: | :---------------------: | :-----------------------: | :--------------------------: | :-------------: | :---------------------: |-----|
| **Диски профилей пользователей (UPD)** | Да | Да | Да | Да | Да | Нет | Да | Win 7 + | Да | |
| **Перемещаемый профиль пользователя (RUP), режим обслуживания** | Нет | Да | Да | Да | Да| Нет | Да | Win 7 + | Нет | |
| **Enterprise State Roaming (ESR)** | Да | Нет | Да | Нет | См. примечания | Да | Нет | Windows 10 | Нет | Функции на SKU сервера, но не поддерживают пользовательский интерфейс |
| **Виртуализация взаимодействия с пользователем (UE-V)** | Да | Да | Да | Нет | Да | Нет | Да | Win 7 + | Нет |  |
| **Облачные файлы OneDrive** | Нет | Нет | Нет | Да | См. примечания | См. примечания  | См. примечания | Win 10 RS3 | Нет | Не тестировался на сервере SKU. Хранилище серверной части в Azure зависит от клиента синхронизации. Для хранения серверной части локального хранилища требуется клиент синхронизации. |

#### <a name="performance"></a>Производительность

UPD требует [Локальные дисковые пространства (S2D)](https://docs.microsoft.com/windows-server/remote/remote-desktop-services/rds-storage-spaces-direct-deployment) для устранения требований к производительности. UPD использует протокол SMB. Он копирует профиль на виртуальную машину, в которой регистрируется пользователь. UPD с S2D является решением группы RDS, рекомендуемой для виртуальных рабочих столов Windows во время предварительной версии службы.  

#### <a name="cost"></a>Стоимость

Несмотря на то, что кластеры S2D обеспечивают необходимую производительность, затраты на корпоративные клиенты являются дорогостоящими, но особенно дорогостоящими для клиентов малого и среднего бизнеса (SMB). Для этого решения компании платите за диски хранилища, а также стоимость виртуальных машин, использующих диски для общего ресурса.

#### <a name="administrative-overhead"></a>Административные издержки

Для кластеров S2D требуется операционная система, для которой установлено исправление, обновление и обслуживание в безопасном состоянии. Эти процессы и сложность настройки аварийного восстановления S2D делают S2D возможным только для предприятий с выделенным ИТ-персоналом.

## <a name="fslogix-profile-containers"></a>Контейнеры профилей Фслогикс

19 ноября 2018, [Корпорация Майкрософт приобрела фслогикс](https://blogs.microsoft.com/blog/2018/11/19/microsoft-acquires-fslogix-to-enhance-the-office-365-virtualization-experience/). Фслогикс решает многие проблемы с контейнерами профилей. Между ними есть следующие ключевые данные:

- **Производительность.** [Контейнеры профилей фслогикс](https://fslogix.com/products/profile-containers) — это высокая производительность и устранение проблем с производительностью, в которых кэшированный режим обмена с предысторией заблокирован.
- **Хранилища** Без контейнеров профилей Фслогикс OneDrive для бизнеса не поддерживается в непостоянных средах удаленных рабочих столов или в среде VDI. [В разделе рекомендации по OneDrive для бизнеса и фслогикс](https://fslogix.com/products/technical-faqs/284-onedrive-for-business-and-fslogix-best-practices) описывается, как они взаимодействуют. Дополнительные сведения см. в статье [Использование клиента синхронизации на виртуальных рабочих столах](https://docs.microsoft.com/deployoffice/rds-onedrive-business-vdi).
- **Дополнительные папки:** Фслогикс предоставляет возможность расширения профилей пользователей для включения дополнительных папок.

С момента приобретения Корпорация Майкрософт приступила к замене существующих решений профилей пользователей, например UPD, на контейнеры профилей Фслогикс.

## <a name="azure-files-integration-with-azure-active-directory-domain-service"></a>Интеграция файлов Azure с доменной службой Azure Active Directory

Производительность и функции контейнеров профилей Фслогикс используют преимущества облака. 7 августа 2019 Microsoft Azure файлы объявили о общедоступной версии [проверки подлинности службы файлов Azure с Azure Active Directoryной службой домена (AD DS)](https://docs.microsoft.com/en-us/azure/storage/files/storage-files-active-directory-overview). Устраняя расходы и расходы на администрирование, служба файлов Azure с проверкой подлинности Azure AD DS — это решение Premium для профилей пользователей в службе виртуальных рабочих столов Windows.

## <a name="best-practices-for-windows-virtual-desktop"></a>Рекомендации для виртуальных рабочих столов Windows

Виртуальные рабочие столы Windows обеспечивают полный контроль над размером, типом и числом виртуальных машин, используемых клиентами. Дополнительные сведения см. в статье [что такое предварительная версия виртуальных рабочих столов Windows](overview.md).

Чтобы обеспечить соблюдение рекомендаций в среде виртуальных рабочих столов Windows, выполните следующие действия.

- Учетная запись хранения файлов Azure должна находиться в том же регионе, что и виртуальные машины узла сеансов.
- Разрешения для файлов Azure должны соответствовать разрешениям, описанным в разделе [требования — контейнеры профилей](https://docs.microsoft.com/fslogix/overview#requirements).
- Каждый пул узлов должен быть создан на основе одного и того же типа и размера виртуальной машины, основанной на одном и том же главном образе.
- Каждая виртуальная машина пула узлов должна находиться в одной группе ресурсов, чтобы упростить управление, масштабирование и обновление.
- Для оптимальной производительности решение хранилища и контейнер профиля Фслогикс должны находиться в одном расположении центра обработки данных.
- Учетная запись хранения, содержащая главный образ, должна находиться в том же регионе и в подписке, где выполняется подготовка виртуальных машин.

## <a name="next-steps"></a>Следующие шаги

Используйте следующие руководства для настройки среды виртуальных рабочих столов Windows.

- Чтобы приступить к созданию решения для виртуализации настольных систем, см. раздел [Создание клиента в виртуальном рабочем столе Windows](tenant-setup-azure-active-directory.md).
- Сведения о создании пула узлов в клиенте виртуальных рабочих столов Windows см. в статье [Создание пула узлов с помощью Azure Marketplace](create-host-pools-azure-marketplace.md).
- Сведения о настройке полностью управляемых файловых ресурсов в облаке см. в разделе [Настройка общей папки службы файлов Azure](/articles/storage/files/storage-files-active-directory-enable.md).
- Сведения о настройке контейнеров профилей Фслогикс см. в статье [Создание контейнера профилей для пула узлов с помощью общей папки](create-host-pools-user-profile.md).
- Сведения о назначении пользователей в пул узлов см. в статье [Управление группами приложений для виртуальных рабочих столов Windows](manage-app-groups.md).
- Сведения о доступе к ресурсам виртуальных рабочих столов Windows из веб-браузера см. в статье [Подключение к виртуальному рабочему столу Windows](connect-web.md).
