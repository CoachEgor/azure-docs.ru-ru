---
title: Файлы контейнеров профиля Windows Virtual Desktop FSLogix - Azure
description: В этой статье описаны контейнеры профиля FSLogix в файлах Windows Virtual Desktop и Azure.
services: virtual-desktop
author: Heidilohr
ms.service: virtual-desktop
ms.topic: conceptual
ms.date: 08/07/2019
ms.author: helohr
manager: lizross
ms.openlocfilehash: 1dc5d54fa24217c91e14a8f37e092888b2bb6474
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79127877"
---
# <a name="fslogix-profile-containers-and-azure-files"></a>Контейнеры профилей FSLogix и Файлы Azure

Служба Windows Virtual Desktop рекомендует контейнеры профиля FSLogix в качестве решения для профиля пользователя. FSLogix предназначен для роуминга профилей в удаленных вычислительных средах, таких как Windows Virtual Desktop. Он хранит полный профиль пользователя в одном контейнере. При входе в систему этот контейнер динамически прикрепляется к вычислительной среде с использованием нативно поддерживаемого виртуального жесткого диска (VHD) и Hyper-V Virtual Hard disk (VHDX). Профиль пользователя сразу же доступен и отображается в системе точно так же, как родной профиль пользователя. В этой статье описывается, как контейнеры профиля FSLogix, используемые с функциями Azure Files в виртуальном рабочем столе Windows.

>[!NOTE]
>Если вы ищете материал сравнения о различных вариантах хранения контейнеров [Storage options for FSLogix profile containers](store-fslogix-profile.md)FSLogix Profile Container в Azure, см.

## <a name="user-profiles"></a>Профили пользователей

Профиль пользователя содержит элементы данных о человеке, включая информацию о конфигурации, например настройки рабочего стола, постоянные сетевые соединения и настройки приложения. По умолчанию Windows создает локальный профиль пользователя, который тесно интегрирован с операционной системой.

Удаленный профиль пользователя обеспечивает перегородку между данными пользователей и операционной системой. Это позволяет заменить или изменить операционную систему, не затрагивая пользовательские данные. В удаленном рабочем столе сессии хост (RDSH) и виртуальных инфраструктур рабочего стола (VDI), операционная система может быть заменена по следующим причинам:

- Обновление операционной системы
- Замена существующей виртуальной машины (VM)
- Пользователь, являющийся частью объединенной (непостоянной) среды RDSH или VDI

Продукты Майкрософт работают с несколькими технологиями для удаленных профилей пользователей, включая следующие технологии:
- Роуминг профилей пользователей (RUP)
- Диски профиля пользователя (UPD)
- Корпоративный государственный роуминг (ESR)

UPD и RUP являются наиболее широко используемыми технологиями для профилей пользователей в средах удаленного рабочего стола (RDSH) и Virtual Hard Disk (VHD).

### <a name="challenges-with-previous-user-profile-technologies"></a>Проблемы с предыдущими технологиями профиля пользователя

Существующие и устаревшие решения Microsoft для профилей пользователей столкнулись с различными проблемами. Никакое предыдущее решение не обрабатывает все потребности профиля пользователя, которые поставляются с средой RDSH или VDI. Например, UPD не может обрабатывать большие файлы OST, а RUP не сохраняет современные настройки.

#### <a name="functionality"></a>Функциональность

В следующей таблице показаны преимущества и ограничения предыдущих технологий профиля пользователя.

| Технология | Современные настройки | Настройки Win32 | Настройки ОС | Пользовательские данные | Поддерживается на сервере SKU | Резервное хранилище на Azure | Хранение бэк-энда на территории | Поддерживаемые версии | Последующий знак во времени |Примечания|
| ---------- | :-------------: | :------------: | :---------: | --------: | :---------------------: | :-----------------------: | :--------------------------: | :-------------: | :---------------------: |-----|
| **Диски профиля пользователя (UPD)** | Да | Да | Да | Да | Да | нет | Да | Выиграйте 7 | Да | |
| **Роуминг профиль пользователя (RUP), режим обслуживания** | нет | Да | Да | Да | Да| нет | Да | Выиграйте 7 | нет | |
| **Корпоративный государственный роуминг (ESR)** | Да | нет | Да | нет | См. примечания | Да | нет | Windows 10 | нет | Функции на сервере SKU, но не поддерживающий пользовательский интерфейс |
| **Виртуализация взаимодействия с пользователем (UE-V)** | Да | Да | Да | нет | Да | нет | Да | Выиграйте 7 | нет |  |
| **Облачные файлы OneDrive** | нет | нет | нет | Да | См. примечания | См. примечания  | Посмотреть заметки | Выиграйте 10 RS3 | нет | Не протестирован на сервере SKU. Хранилище бэк-энда в Azure зависит от клиента синхронизации. Бэк-энд-хранилище на прем нуждается в синхронизации клиента. |

#### <a name="performance"></a>Производительность

UPD [требует, чтобы хранилища Direct (S2D)](/windows-server/remote/remote-desktop-services/rds-storage-spaces-direct-deployment/) удовлетворяли требованиям к производительности. UPD использует протокол Server Message Block (SMB). Он копирует профиль на VM, в котором пользователь регистрируется. UPD с S2D является решением, мы рекомендуем для Windows Virtual Desktop.  

#### <a name="cost"></a>Стоимость

В то время как S2D кластеры достигают необходимой производительности, стоимость является дорогостоящей для корпоративных клиентов, но особенно дорого йен для клиентов малого и среднего бизнеса (SMB). Для этого решения компании платят за диски хранения, а также стоимость vMs, которые используют диски для доли.

#### <a name="administrative-overhead"></a>Административные издержки

Кластеры S2D требуют операционной системы, которая исправлена, обновляется и поддерживается в безопасном состоянии. Эти процессы и сложность настройки аварийного восстановления S2D делают S2D возможным только для предприятий с специализированным ИТ-персоналом.

## <a name="fslogix-profile-containers"></a>Контейнеры профиля FSLogix

19 ноября 2018 года [Microsoft приобрела FSLogix.](https://blogs.microsoft.com/blog/2018/11/19/microsoft-acquires-fslogix-to-enhance-the-office-365-virtualization-experience/) FSLogix решает многие проблемы контейнера профиля. Ключевыми из них являются:

- **Производительность:** [Контейнеры профиля FSLogix](/fslogix/configure-profile-container-tutorial/) являются высокопроизводительными и решают проблемы с производительностью, которые исторически блокировали режим кэшированного обмена.
- **OneDrive:** Без контейнеров профиля FSLogix OneDrive for Business не поддерживается в непостоянных средах RDSH или VDI. [Лучшие практики OneDrive для бизнеса и FSLogix](/fslogix/overview/) описаны в их взаимодействии. Для получения дополнительной информации [см.](/deployoffice/rds-onedrive-business-vdi/)
- **Дополнительные папки:** FSLogix предоставляет возможность расширения профилей пользователей, чтобы включить дополнительные папки.

После приобретения корпорация Майкрософт начала заменять существующие решения профиля пользователя, такие как UPD, контейнерами для профиля FSLogix.

## <a name="azure-files-integration-with-azure-active-directory-domain-service"></a>Интеграция файлов Azure с службой активных доменов каталогов Azure

Производительность и функции контейнеров для профилей FSLogix используют преимущества облака. 7 августа 2019 года Microsoft Azure Files объявила об общей доступности [аутентификации файлов Azure с помощью службы функционального домена каталога Azure (AD DS).](../storage/files/storage-files-active-directory-overview.md) Устраняя как расходы, так и административные накладные расходы, Azure Files с Azure AD DS Authentication является премиум-решением для профилей пользователей в службе Windows Virtual Desktop.

## <a name="best-practices-for-windows-virtual-desktop"></a>Лучшие практики для Windows Virtual Desktop

Windows Virtual Desktop предлагает полный контроль над размером, типом и количеством виртуальных машин, которые используются клиентами. Для получения дополнительной информации, смотрите [Что такое Windows Виртуальный рабочий стол?](overview.md).

Для обеспечения среды Windows Virtual Desktop следует рекомендациям:

- Учетная запись хранения файлов Azure должна находиться в том же регионе, что и VMs-м вхозом хостай-ми.
- Разрешения Azure Files должны соответствовать разрешениям, описанным в [Требованиях - Контейнеры профиля](/fslogix/fslogix-storage-config-ht).
- Каждый пул хоста должен быть построен одного и того же типа и размера VM на основе одного и того же основного изображения.
- Каждый пул хоста VM должен быть в одной группе ресурсов для управления, масштабирования и обновления.
- Для оптимальной производительности решение для хранения данных и контейнер профиля FSLogix должны находиться в одном месте центра обработки данных.
- Учетная запись хранения, содержащая основное изображение, должна находиться в том же регионе и подписка, где готовятся внепланы.

## <a name="next-steps"></a>Дальнейшие действия

Используйте следующие руководства для настройки среды виртуального рабочего стола Windows.

- Чтобы начать создавать решение для виртуализации рабочего стола, [см.](tenant-setup-azure-active-directory.md)
- Чтобы создать пул хоста в вашем наемщике Windows Virtual Desktop, [см.](create-host-pools-azure-marketplace.md)
- Для настройки полностью управляемых файлов [Set up Azure Files share](/azure/storage/files/storage-files-active-directory-enable/)в облаке см.
- Для настройки контейнеров профиля FSLogix [см. Создать контейнер профиля для пула хоста с помощью общего файла.](create-host-pools-user-profile.md)
- Чтобы назначить пользователей в пул хоста, [см. Группы приложений Управления для Windows Virtual Desktop.](manage-app-groups.md)
- Чтобы получить доступ к ресурсам Windows Virtual Desktop из веб-браузера, [см.](connect-web.md)
