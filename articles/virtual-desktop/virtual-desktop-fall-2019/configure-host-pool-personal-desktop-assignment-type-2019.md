---
title: Тип назначения персонального рабочего стола "виртуальный рабочий стол Windows" — Azure
description: Как настроить тип назначения для пула узлов персонального рабочего стола "виртуальный рабочий стол Windows".
services: virtual-desktop
author: HeidiLohr
ms.service: virtual-desktop
ms.topic: conceptual
ms.date: 05/22/2020
ms.author: helohr
manager: lizross
ms.openlocfilehash: ddfd9346f4a72ceb2e8bf5c336fb3de9b5c8c5c7
ms.sourcegitcommit: 0b80a5802343ea769a91f91a8cdbdf1b67a932d3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2020
ms.locfileid: "83827477"
---
# <a name="configure-the-personal-desktop-host-pool-assignment-type"></a>Настройка типа назначения пула узлов персонального рабочего стола

>[!IMPORTANT]
>Это содержимое применимо к выпуску за осень 2019 года, который не поддерживает объекты Azure Resource Manager для Виртуального рабочего стола Windows. Если вы хотите обеспечить управление объектами Azure Resource Manager для Виртуального рабочего стола Windows, представленными в обновлении за весну 2020 г., см. [эту статью](../configure-host-pool-personal-desktop-assignment-type.md).

Можно настроить тип назначения пула узлов персонального рабочего стола так, чтобы корректировать среду виртуальных рабочих столов Windows в точном соответствии с вашими потребностями. В этом разделе мы покажем вам, как настроить автоматическое или прямое назначение для ваших пользователей.

>[!NOTE]
> Инструкции в этой статье применимы только к пулам узлов персональных рабочих столов, а не к общим пулам узлов, поскольку пользователи в общих пулах узлов не назначены никаким определенным узлам сеансов.

## <a name="configure-automatic-assignment"></a>Настройка автоматического назначения

Автоматическое назначение — это тип назначения по умолчанию для новых пулов узлов персональных рабочих столов, Созданных в среде виртуальных рабочих столов Windows. Автоматическое назначение пользователей не требует определенного узла сеансов.

Для автоматического назначения пользователей сначала назначьте их пулу узлов персональных рабочих столов, чтобы они могли видеть рабочий стол в своем канале. Когда назначенный пользователь запускает рабочий стол в своем канале, он запрашивает доступный узел сеанса, если еще не подключился к пулу узлов, который завершает процесс назначения.

Прежде чем начать, [скачайте и импортируйте модуль PowerShell виртуального рабочего стола Windows](/powershell/windows-virtual-desktop/overview/), если вы еще не сделали этого. 

> [!NOTE]
> Прежде чем выполнять эти инструкции, не забудьте установить модуль PowerShell версии 1.0.1534.2001 или более поздней виртуального рабочего стола Windows.

После этого выполните следующий командлет, чтобы войти в учетную запись:

```powershell
Add-RdsAccount -DeploymentUrl "https://rdbroker.wvd.microsoft.com"
```

Чтобы настроить пул узлов для автоматического назначения пользователей виртуальным машинам, выполните следующий командлет PowerShell:

```powershell
Set-RdsHostPool <tenantname> <hostpoolname> -AssignmentType Automatic
```

Чтобы назначить пользователя пулу узлов виртуального рабочего стола, выполните следующий командлет PowerShell:

```powershell
Add-RdsAppGroupUser <tenantname> <hostpoolname> "Desktop Application Group" -UserPrincipalName <userupn>
```

## <a name="configure-direct-assignment"></a>Настройка прямого назначения

В отличие от автоматического назначения в этом случае необходимо назначать пользователя и пулу узлов персональных рабочих столов, и узлу конкретного сеанса — только после этого они смогут подключиться к персональному рабочему столу. Если пользователь назначен только пулу узлов, но не узлу сеансов, он не сможет осуществлять доступ к ресурсам.

Чтобы настроить требование пулом узлов прямого назначения пользователей узлам сеансов, выполните следующий командлет PowerShell:

```powershell
Set-RdsHostPool <tenantname> <hostpoolname> -AssignmentType Direct
```

Чтобы назначить пользователя пулу узлов виртуального рабочего стола, выполните следующий командлет PowerShell:

```powershell
Add-RdsAppGroupUser <tenantname> <hostpoolname> "Desktop Application Group" -UserPrincipalName <userupn>
```

Чтобы назначить пользователя конкретному узлу сеансов, выполните следующий командлет PowerShell:

```powershell
Set-RdsSessionHost <tenantname> <hostpoolname> -Name <sessionhostname> -AssignedUser <userupn>
```

## <a name="remove-a-user-assignment"></a>Удаление назначения пользователя

Может потребоваться удалить назначение пользователя, так как пользователю более не нужен персональный рабочий стол, пользователь ушел из компании или вы хотите передать рабочий стол кому-либо другому.

В настоящее время удалить назначение пользователя для персонального рабочего стола можно, только полностью удалив узел сеансов. Чтобы удалить узел сеансов, выполните следующий командлет:

```powershell
Remove-RdsSessionHost
```

Если необходимо вернуть узел сеансов в пул узлов персонального рабочего стола, удалите виртуальный рабочий стол Windows на этом компьютере и выполните действия, перечисленные в разделе [Создание пула узлов с помощью PowerShell](create-host-pools-powershell-2019.md), чтобы зарегистрировать узел сеансов повторно.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы настроили тип назначения персонального рабочего стола, можно войти в клиент виртуальных рабочих столов Windows, чтобы протестировать его в рамках пользовательского сеанса. В следующих двух практических статьях рассказывается, как подключиться к сеансу с помощью выбранного клиента:

- [Подключение с использованием клиента классических приложений Windows](../connect-windows-7-and-10.md)
- [Подключение с помощью веб-клиента](connect-web-2019.md)
