---
title: Установка языковых пакетов на Windows 10 VMs в виртуальном рабочем столе Windows - Azure
description: Как установить языковые пакеты для Windows 10 многосессионных виртуальных в Windows Virtual Desktop.
services: virtual-desktop
author: Heidilohr
ms.service: virtual-desktop
ms.topic: conceptual
ms.date: 04/03/2020
ms.author: helohr
manager: lizross
ms.openlocfilehash: c40df9d821e069e2cd5ff0c42d5841f6b9041c96
ms.sourcegitcommit: d597800237783fc384875123ba47aab5671ceb88
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/03/2020
ms.locfileid: "80634039"
---
# <a name="install-language-packs"></a>Установка языковых пакетов

При настройке развертывания Windows Virtual Desktop на международном уровне рекомендуется убедиться, что развертывание поддерживает несколько языков. Вы можете установить пакеты языков на многосессионное виртуальное изображение виртуальной машины Windows 10 Enterprise (VM) для поддержки столько языков, сколько нужно вашей организации. В этой статье будет рассказать вам, как установить языковые пакеты и захватить изображения, которые позволяют пользователям выбирать свои собственные языки отображения.

Узнайте больше о том, как развернуть VM в Azure в [создании виртуальной машины Windows в зоне доступности с порталом Azure.](../virtual-machines/windows/create-portal-availability-zone.md)

>[!NOTE]
>Эта статья распространяется на многосессионные ВМ Windows 10 Enterprise.

## <a name="install-a-language-pack"></a>Установка языкового пакета

Чтобы создать изображение VM с языковыми пакетами, сначала необходимо установить языковые пакеты на машину и запечатлеть ее изображение.

Для установки языковых пакетов:

1. Войти в качестве админа.
2. Убедитесь, что вы установили все последние обновления Windows и Магазина Windows.
3. Перейти к **настройкам** > **Время & языковой** > **регион**.
4. В **соответствии**с страной или регионом, выберите предпочтительную страну или регион из выпадающего меню.
    В этом примере мы выберем **Францию,** как показано на следующем скриншоте:

    ![Скриншот страницы Региона. Регион, выбранный в настоящее время является Францией.](media/region-page-france.png)

5. После этого выберите **Язык,** затем выберите **Добавить язык.** Выберите язык, который вы хотите установить из списка, а затем выберите **Следующий**.
6. Когда **откроется окно для установки,** выберите флажок с пометкой **Install language pack и установите в качестве языка отображения Windows.**
7. Выберите пункт **Установить**.
8. Чтобы добавить несколько языков одновременно, выберите **Добавить язык,** а затем повторить процесс, чтобы добавить язык в шагах 5 и 6. Повторите этот процесс для каждого языка, который вы хотите установить. Тем не менее, вы можете установить только один язык в качестве языка отображения одновременно.

    Давайте пробежаться по быстрой визуальной демонстрации. Следующие изображения показывают, как установить французский и голландский язык пакеты, а затем установить французский язык в качестве языка дисплея.

    ![Скриншот страницы Языка в начале процесса. Выбранный язык отображения Windows — английский.](media/language-page-default.png)

    ![Скриншот окна выбора языка. Пользователь вошел "французский" в панель поиска, чтобы найти пакеты французского языка.](media/select-language-french.png)

    ![Скриншот страницы языков установки. Французский язык выбран в качестве предпочтительного языка. Выбранные варианты: "Установите язык отображения", "Установить пакет языков", "Распознавание речи" и "Почерк".](media/install-language-features.png)

    После установки пакетов языков в списке языков следует увидеть имена ваших пакетов языков.

    ![Скриншот страницы языка с установленными новыми пакетами языков. Французский и нидерландский языки перечислены в "предпочтительных языках".](media/language-page-complete.png)

9. Если появляется окно с просьбой выйти из сеанса. Выйти, а затем войти снова. Язык отображения теперь должен быть выбранным вами языком.

10.  Перейти к **панели управления** > **часы и** > **регион**.

11.  При открытии окна **Региона** выберите вкладку **«Администрация»,** а затем выберите **настройки copy.**

12.  Выберите флажки с пометкой **Welcome screen и системные учетные записи** и **новые учетные записи пользователей.**

13.  Щелкните **ОК**.

14.  Окно откроется и скажет вам, чтобы перезапустить сеанс. Выберите **перезагрузку сейчас**.

15.  После того как вы подписали обратно, вернуться к **панели управления** > **часы и** > **регион**.

16.  Выберите вкладку **Администрация.**

17.  Выберите **Локаль системы изменений**.

18. В выпадающем меню в соответствии с **текущей системой локализуйте**выберите язык языка языка, который вы хотите использовать. После этого выберите **OK**.

19. Выберите **перезагрузку сейчас,** чтобы перезапустить сеанс еще раз.

Поздравляем, вы установили свои языковые пакеты!

Прежде чем продолжить работу, убедитесь, что в вашей системе установлены последние версии магазина Windows и Windows.

## <a name="sysprep"></a>Средство Sysprep

Далее, вам нужно sysprep вашей машины, чтобы подготовить его для процесса захвата изображения.

Чтобы сиспреп вашей машины:

1. Откройте PowerShell от имени администратора.
2. Выполнить следующие cmdlet перейти к правильному каталогу:
   
    ```powershell
    cd Windows\System32\Sysprep
    ```

3. Далее, запустите следующие cmdlet:
    
    ```powershell
    .\sysprep.exe
    ```

4. Когда окно system Preparation Tool открывается, выберите флажок с пометкой **Generalize,** затем перейдите в **Параметры выключения** и выберите **Выключите** из выпадающего меню.

>[!NOTE]
>Процесс syprep займет несколько минут. Когда VM выключится, удаленная сессия отключится.

### <a name="resolve-sysprep-errors"></a>Устранение ошибок sysprep

Если вы видите сообщение об ошибке во время процесса sysprep, вот что вы должны сделать:

1. Открыть **drive C** и перейти к **Windows** > **System32 Sysprep** > **Panther**, а затем открыть файл **setuperr.**

   Текст в файле ошибки сообщит вам, что вам необходимо удалить определенный пакет языка, как показано на следующем изображении. Копируйте имя языкового пакета для следующего шага.

   ![Скриншот файла setuperr. Текст с именем пакета выделен темно-синим цветом.](media/setuperr-package-name.png)

2. Откройте новое окно PowerShell и запустите следующее cmdlet с именем пакета, которое вы скопировали в шаге 2, чтобы удалить языковой пакет:

   ```powershell
   Remove-AppxPackage <package name>
   ```

3. Проверьте, чтобы убедиться, что вы `Remove-AppxPackage` удалили пакет, запустив cmdlet снова. Если вы успешно удалили пакет, вы должны увидеть сообщение, в которое говорится, что пакета, который вы пытаетесь удалить, нет.

4. Выполнить `sysprep.exe` cmdlet снова.

## <a name="capture-the-image"></a>Запись образа

Теперь, когда ваша система готова, вы можете захватить изображение, чтобы другие пользователи могли начать использовать VMs на основе вашей системы без повторения процесса конфигурации.

Для захвата изображения:

1. Перейдите на портал Azure и выберите название машины, настроенной в [наборе языкового пакета](#install-a-language-pack) и [sysprep.](#sysprep)

2. Выберите **Захват**.

3. Введите имя для изображения в поле **«Имя»** и назначьте его группе ресурсов, используя меню выпадения **группы ресурсов,** как показано на следующем изображении.

   ![Скриншот окна изображения «Создать». Имя, которое пользователь дал этому тестовому изображению, является "vmwvd-image-fr", и они присвоили его группе ресурсов "testwvdimagerg".](media/create-image.png)

4. Нажмите кнопку **создания**.

5. Подождите несколько минут, пока процесс захвата завершится. Когда изображение готово, вы должны увидеть сообщение в Центре уведомлений, чтобы вы знали, что изображение было захвачено.

Теперь вы можете развернуть VM с помощью нового изображения. При развертывании VM, убедитесь, что следуйте инструкциям в [создание виртуальной машины Windows в зоне доступности с порталом Azure.](../virtual-machines/windows/create-portal-availability-zone.md)

### <a name="how-to-change-display-language-for-standard-users"></a>Как изменить язык отображения для стандартных пользователей

Стандартные пользователи могут изменить язык отображения на своих vMs.

Чтобы изменить язык отображения:

1. Перейдите к **настройкам языка.** Если вы не знаете, где это, вы можете ввести **Language** в панель поиска в меню «Пуск».

2. В меню отображения языка Windows выберите язык, который вы хотите использовать в качестве языка отображения.

3. Выйти из сеанса, а затем войти обратно. Язык отображения теперь должен быть тем, который вы выбрали в шаге 2.
