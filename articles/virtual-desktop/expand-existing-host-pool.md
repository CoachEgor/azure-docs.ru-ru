---
title: Расширьте существующий пул узлов новыми хостами сеансов - Azure
description: Как расширить существующий пул хостов с новыми хостами сеансов в Windows Virtual Desktop.
services: virtual-desktop
author: Heidilohr
ms.service: virtual-desktop
ms.topic: conceptual
ms.date: 02/21/2020
ms.author: helohr
manager: lizross
ms.openlocfilehash: aee5195fe86fed3e631908a38d3bdb7d5e4883b8
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79365225"
---
# <a name="expand-an-existing-host-pool-with-new-session-hosts"></a>Расширьте существующий пул узлов с помощью новых узлов сеансов

По мере наращивания использования в пуле хоста может потребоваться расширить существующий пул узлов новыми хостами сеансов для обработки новой нагрузки.

В этой статье будет усваиваем, как можно расширить существующий пул узлов с помощью новых узлов сеансов.

## <a name="what-you-need-to-expand-the-host-pool"></a>Что нужно для расширения пула хоста

Перед запуском убедитесь, что вы создали пул хоста и виртуальные машины(VMs) с помощью одного из следующих методов:

- [Предложение Azure Marketplace](./create-host-pools-azure-marketplace.md)
- [Шаблон менеджера ресурсов GitHub Azure](./create-host-pools-arm-template.md)
- [Создание пула узлов с помощью PowerShell](./create-host-pools-powershell.md)

Вам также понадобится следующая информация с момента первого создания пула хост и хостов сеансов:

- VM размер, изображение, и имя префикс
- Учетные данные домена и учетных данных администратора администратора веб-энда Windows Virtual Desktop
- имя виртуальной сети и имя подсети;

Следующие три раздела представляют собой три метода, которые можно использовать для расширения пула хоста. Вы можете сделать либо с любым инструментом развертывания вы комфортно.

>[!NOTE]
>На этапе развертывания вы увидите сообщения об ошибках для ресурсов VM-мхозе предыдущего сеанса, если они в настоящее время закрыты. Эти ошибки возникают из-за того, что Azure не может запустить расширение PowerShell DSC для проверки правильной регистрации VMs-мизансов хоста сеанса в существующем пуле хоста. Вы можете безопасно игнорировать эти ошибки, или вы можете избежать ошибок, запугнув все ми-хост сеанса в существующем пуле узла перед началом процесса развертывания.

## <a name="redeploy-from-azure"></a>Передислокация из Лазурного Увена

Если вы уже создали пул узлов и ми-хост-сессий с помощью [шаблона Azure Marketplace](./create-host-pools-azure-marketplace.md) или [шаблона менеджера ресурсов GitHub,](./create-host-pools-arm-template.md)вы можете передислоцировать тот же шаблон с портала Azure. Перераспределение шаблона автоматически повторно вводит всю информацию, вступившую в исходный шаблон, за исключением паролей.

Вот как передислоцировать шаблон Azure Resource Manager для расширения пула хоста:

1. Войдите на [портал Azure](https://portal.azure.com/).
2. Из панели поиска в верхней части портала Azure выполнить поиск **групп ресурсов** и выбрать элемент в соответствии с **службами.**
3. Найдите и выберите группу ресурсов, созданную при создании пула хоста.
4. В панели на левой стороне браузера выберите **Развертывание.**
5. Выберите подходящее развертывание для процесса создания пула хоста:
     - Если вы создали исходный пул хоста с предложением Azure Marketplace, выберите развертывание, начинающееся с **rds.wvd-provision-host-pool.**
     - Если вы создали исходный пул узлов с шаблоном GitHub Azure Resource Manager, выберите развертывание под названием **Microsoft.Template.**
6. Выберите **передислокацию.**
     
     >[!NOTE]
     >Если шаблон не будет автоматически передислоцирован при выборе **передислокации,** выберите **шаблон** в панели на левой стороне браузера, а затем выберите **Развертывание.**

7. Выберите группу ресурсов, содержащую vMs-хосек текущего сеанса, в существующем пуле хостов.
     
     >[!NOTE]
     >Если вы видите ошибку, которая говорит вам выбрать другую группу ресурсов, даже если введенная группа является правильной, выберите другую группу ресурсов, затем выберите исходную группу ресурсов.

8. Введите следующий URL для *_artifactsLocation:*`https://raw.githubusercontent.com/Azure/RDS-Templates/master/wvd-templates/`
9. Введите новое общее количество хостов сеансов, которые вы хотите, в *Rdsh Number Of Instances.* Например, если вы расширяете пул узлов с пяти узлов сеанса до восьми, введите **8.**
10. Введите тот же существующий пароль домена, который вы использовали для существующего домена UPN. Не изменяйте имя пользователя, потому что это вызовет ошибку при запуске шаблона.
11. Введите тот же пароль админ-адентификатора, который вы использовали для пользователя или id приложения, который вы ввели для *Tenant Admin Upn или Application Id.* Еще раз, не меняйте имя пользователя.
12. Заполните отправку, чтобы расширить пул хоста.

## <a name="run-the-azure-marketplace-offering"></a>Выполнить предложение Azure Marketplace

Следуйте инструкциям в [создании пула хоста, используя Azure Marketplace,](./create-host-pools-azure-marketplace.md) пока не [достигнете запуска Azure Marketplace, предлагая предоставить новый пул хоста.](./create-host-pools-azure-marketplace.md#run-the-azure-marketplace-offering-to-provision-a-new-host-pool) Когда вы доберетесь до этой точки, вам нужно будет ввести следующую информацию для каждой вкладки:

### <a name="basics"></a>Основы

Все значения в этом разделе должны соответствовать тому, что вы предоставили при создании пула хостов и vMs-миков для хостов, за исключением *пользователей настольных компьютеров по умолчанию:*

1.    Для *подписки*выберите подписку, в которой вы впервые создали пул хоста.
2.    Для *группы ресурсов*выберите ту же группу ресурсов, где находится существующая хост-хост-мизансов сеанса пула.
3.    Для *региона*выберите тот же регион, где находится существующий хост-хост-мис-
4.    Для *имени Hostpool*введите название существующего пула хоста.
5.    Для *типа рабочего стола*выберите тип рабочего стола, который соответствует существующему пулу хостов.
6.    Для *пользователей настольных компьютеров по умолчанию*введите список дополнительных пользователей, которых вы хотите войти в Windows Virtual Desktop, и получить доступ к рабочему столу после завершения работы Azure Marketplace. Например, если вы хотите user3@contoso.com user4@contoso.com назначить user3@contoso.comиuser4@contoso.comполучить доступ, введите:
7.    Выберите **Далее : Наверстывание виртуальной машины.**

>[!NOTE]
>За исключением *пользователей настольных компьютеров по умолчанию,* все поля должны соответствовать именно тому, что было настроено в существующем пуле хоста. Если есть несоответствие, что приведет к новому пулу хоста.

### <a name="configure-virtual-machines"></a>Настройка виртуальных машин

Все значения параметров в этом разделе должны соответствовать тому, что вы предоставили при создании пула хоста и vMs-мизансов, за исключением общего числа ВМ. Количество ввода ВМ будет числом ввода в расширенном пуле хостов:

1. Выберите размер VM, который соответствует существующим VMs-ми-
    
    >[!NOTE]
    >Если конкретный размер виртуальной машины не отображается в селекторе размеров виртуальных машин, это связано с тем, что мы еще не подключили этот размер к средству Azure Marketplace. Чтобы запросить размер виртуальной машины, создайте новый запрос или проголосуйте за существующий на [форуме UserVoice по Виртуальному рабочему столу Windows](https://windowsvirtualdesktop.uservoice.com/forums/921118-general).

2. Настройте *профиль использования,* общее количество *пользователей*и параметры *количества виртуальных машин,* чтобы выбрать общее количество узлов сеансов, которые вы хотели бы иметь в пуле хоста. Например, если вы расширяете пул узлов с пяти узлов сеанса до восьми, назначьте эти параметры, чтобы добраться до 8 виртуальных машин.
3. Введите префикс для имен виртуальных машин. Например, если вы введете имя prefix, имена виртуальных машин будут prefix-0, prefix-1 и т. д.
4. Выберите **Далее : Настройки виртуальной машины**.

### <a name="virtual-machine-settings"></a>Параметры виртуальной машины

Все значения параметров в этом разделе должны соответствовать тому, что вы предоставили при создании пула хоста и vMs-ми:

1. Для *источника изображения* и *версии Image OS*введите ту же информацию, что и при создании пула хоста.
2. Для *присоединения к домену AD UPN* и связанных с ним паролей введите ту же информацию, что и при создании пула хостеров, чтобы присоединиться к информационным технологиям в домене Active Directory. Эти учетные данные будут использоваться для создания локальной учетной записи на ваших виртуальных машинах. Вы можете сбросить эти локальные учетные записи, чтобы изменить их учетные данные позже.
3. Для получения информации о виртуальной сети выберите ту же виртуальную сеть и подсеть для размещения vMs-миноносов, где находится ваш существующий хост-хост-мис.
4. Выберите **Далее : Налажжье информацию о виртуальном рабочем столе Windows.**

### <a name="windows-virtual-desktop-information"></a>Информация о виртуальном рабочем столе Windows

Все значения параметров в этом разделе должны соответствовать тому, что вы предоставили при создании пула хоста и vMs-ми:

1. Введите *имя группы клиента Виртуального рабочего стола Windows* в группе вашего клиента. Оставьте значение по умолчанию, если вам не было предоставлено определенное имя группы клиента.
2. В поле *Windows Virtual Desktop tenant name* (Имя клиента Виртуального рабочего стола Windows) введите имя клиента, в котором будет создан этот пул узлов.
3. Укажите те же учетные данные, которые вы использовали при создании пула хоста и vMs-мизансов хоста. Если вы используете принцип службы, введите идентификатор экземпляра Active Directory Azure, где находится ваш директор службы.
4. Выберите **Далее : Обзор и создайте**.

## <a name="run-the-github-azure-resource-manager-template"></a>Выполнить шаблон менеджера ресурсов GitHub Azure

Следуйте инструкциям в [шаблоне Run the Resource Manager Для подготовки нового пула хоста](./create-host-pools-arm-template.md#run-the-azure-resource-manager-template-for-provisioning-a-new-host-pool) и предоставьте все те же значения параметров, за исключением *количества экземпляров Rdsh.* Введите количество всхоза сеансов в пул хоста после запуска шаблона. Например, если вы расширяете пул узлов с пяти узлов сеанса до восьми, введите **8.**

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы расширили существующий пул хостов, вы можете войти в windows Virtual Desktop клиента, чтобы проверить их как часть сеанса пользователя. Вы можете подключиться к сеансу с любым из следующих клиентов:

- [Подключение к клиенту Windows Desktop](./connect-windows-7-and-10.md)
- [Подключение к веб-клиенту](./connect-web.md)
- [Подключение к клиенту Android](./connect-android.md)
- [Подключение с помощью клиента macOS](./connect-macos.md)
- [Подключение с помощью клиента iOS](./connect-ios.md)
