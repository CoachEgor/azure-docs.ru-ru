---
title: Подключение к виртуальной машине Linux с помощью Azure бастиона
description: Из этой статьи вы узнаете, как подключиться к виртуальной машине Linux с помощью Azure бастиона.
services: bastion
author: cherylmc
ms.service: bastion
ms.topic: how-to
ms.date: 02/24/2020
ms.author: cherylmc
ms.openlocfilehash: f9bc06e58fcbd93fba0c92e91b51503239b5a951
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "90980784"
---
# <a name="connect-using-ssh-to-a-linux-virtual-machine-using-azure-bastion"></a>Подключение по протоколу SSH к виртуальной машине Linux с помощью Azure бастиона

В этой статье показано, как безопасно и легко подключаться по протоколу SSH к виртуальным машинам Linux в виртуальной сети Azure. Подключиться к виртуальной машине можно непосредственно из портал Azure. При использовании Azure бастиона виртуальные машины не нуждаются в клиенте, агенте или дополнительном программном обеспечении. Дополнительные сведения об Azure бастиона см. в [обзоре](bastion-overview.md).

Вы можете использовать Azure бастиона для подключения к виртуальной машине Linux с помощью SSH. Для проверки подлинности можно использовать и имя пользователя, и пароль, и ключи SSH. Подключиться к виртуальной машине с помощью ключей SSH можно одним из следующих способов:

* Закрытый ключ, который вы вводите вручную
* Файл, содержащий сведения о закрытом ключе

Закрытый ключ SSH должен иметь формат, который начинается с  `"-----BEGIN RSA PRIVATE KEY-----"` и заканчивается на `"-----END RSA PRIVATE KEY-----"` .

## <a name="before-you-begin"></a>Перед началом

Убедитесь, что вы настроили узел бастиона Azure для виртуальной сети, в которой находится виртуальная машина. Дополнительные сведения см. в статье [Создание узла бастиона Azure](bastion-create-host-portal.md). После подготовки и развертывания службы бастиона в виртуальной сети ее можно использовать для подключения к любой виртуальной машине в этой виртуальной сети. 

При использовании бастиона для подключения предполагается, что вы используете RDP для подключения к виртуальной машине Windows и SSH для подключения к виртуальным машинам Linux. Сведения о подключении к виртуальной машине Windows см. в статье [Подключение к виртуальной машине](bastion-connect-vm-rdp.md)Windows.

### <a name="required-roles"></a>Обязательные роли

Для подключения нужны такие роли:

* роль читателя на виртуальной машине;
* роль читателя на сетевом адаптере с частным IP-адресом для виртуальной машины;
* роль читателя в ресурсе Бастиона Azure.

### <a name="ports"></a>Порты

Чтобы подключиться к виртуальной машине Linux по протоколу SSH, на виртуальной машине должны быть открыты следующие порты:

* Входящий порт: SSH (22)

## <a name="connect-using-username-and-password"></a><a name="username"></a>Подключение: использование имени пользователя и пароля

1. Откройте [портал Azure](https://portal.azure.com). Перейдите к виртуальной машине, к которой необходимо подключиться, а затем нажмите кнопку **подключить** и выберите **бастиона** в раскрывающемся списке.

   ![На снимке экрана показан обзор виртуальной машины в портал Azure с выбранным подключением.](./media/bastion-connect-vm-ssh/connect.png)
1. После нажатия кнопки бастиона появится боковая панель с тремя вкладками: RDP, SSH и бастиона. Если бастиона был подготовлен для виртуальной сети, вкладка бастиона активна по умолчанию. Если вы не подготовили бастиона для виртуальной сети, см. статью [Настройка бастиона](bastion-create-host-portal.md).

   ![На снимке экрана показано диалоговое окно Подключение к виртуальной машине с выбранным БАСТИОНА.](./media/bastion-connect-vm-ssh/bastion.png)
1. Введите имя пользователя и пароль для подключения SSH к виртуальной машине.
1. После ввода ключа нажмите кнопку **подключить** .

## <a name="connect-manually-enter-a-private-key"></a><a name="privatekey"></a>Подключение: ввод закрытого ключа вручную

1. Откройте [портал Azure](https://portal.azure.com). Перейдите к виртуальной машине, к которой необходимо подключиться, а затем нажмите кнопку **подключить** и выберите **бастиона** в раскрывающемся списке.

   ![На снимке экрана показан обзор виртуальной машины в портал Azure с выбранным подключением.](./media/bastion-connect-vm-ssh/connect.png)
1. После нажатия кнопки бастиона появится боковая панель с тремя вкладками: RDP, SSH и бастиона. Если бастиона был подготовлен для виртуальной сети, вкладка бастиона активна по умолчанию. Если вы не подготовили бастиона для виртуальной сети, см. статью [Настройка бастиона](bastion-create-host-portal.md).

   ![На снимке экрана показано диалоговое окно Подключение к виртуальной машине с выбранным БАСТИОНА.](./media/bastion-connect-vm-ssh/bastion.png)
1. Введите имя пользователя и выберите **закрытый ключ SSH**.
1. Введите закрытый ключ в текстовое поле **закрытый ключ SSH** (или вставьте его напрямую).
1. После ввода ключа нажмите кнопку **подключить** .

## <a name="connect-using-a-private-key-file"></a><a name="ssh"></a>Подключение: использование файла закрытого ключа

1. Откройте [портал Azure](https://portal.azure.com). Перейдите к виртуальной машине, к которой необходимо подключиться, а затем нажмите кнопку **подключить** и выберите **бастиона** в раскрывающемся списке.

   ![На снимке экрана показан обзор виртуальной машины в портал Azure с выбранным подключением.](./media/bastion-connect-vm-ssh/connect.png)
1. После нажатия кнопки бастиона появится боковая панель с тремя вкладками: RDP, SSH и бастиона. Если бастиона был подготовлен для виртуальной сети, вкладка бастиона активна по умолчанию. Если вы не подготовили бастиона для виртуальной сети, см. статью [Настройка бастиона](bastion-create-host-portal.md).

   ![На снимке экрана показано диалоговое окно Подключение к виртуальной машине с выбранным БАСТИОНА.](./media/bastion-connect-vm-ssh/bastion.png)
1. Введите имя пользователя и выберите **закрытый ключ SSH из локального файла**.
1. Нажмите кнопку **обзора** (значок папки в локальном файле).
1. Найдите файл и нажмите кнопку **Открыть**.
1. Нажмите кнопку **Подключиться** , чтобы подключиться к виртуальной машине. После нажатия кнопки подключить SSH-подключение к этой виртуальной машине будет открываться непосредственно в портал Azure. Это подключение работает через HTML5 через порт 443 службы бастиона на частном IP-адресе виртуальной машины.

## <a name="next-steps"></a>Дальнейшие шаги

Ознакомьтесь с [часто задаваемыми вопросами о бастиона](bastion-faq.md)
