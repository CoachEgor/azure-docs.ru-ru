---
title: Установка Azure FarmBeats
description: В этой статье описывается, как установить Azure FarmBeats в подписку На Azure
author: usha-rathnavel
ms.topic: article
ms.date: 1/17/2020
ms.author: atinb
ms.openlocfilehash: 0761db6b73c6fcfeb1ef6fda729a68c9644bbc72
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79479565"
---
# <a name="install-azure-farmbeats"></a>Установка Azure FarmBeats

В этой статье описывается, как установить Azure FarmBeats в подписку Azure.

Azure FarmBeats предоставляется в Azure Marketplace как предложение B2B. Это позволяет агрегировать наборы данных о сельском хозяйстве между поставщиками и получать информацию о действиях. Azure FarmBeats делает это, позволяя создавать модели искусственного интеллекта (ИИ) или машинного обучения (ML) на основе сброшенных наборов данных. Двумя основными компонентами Azure FarmBeats являются:

- **Datahub**: Слой API, позволяющий агрегировать, нормализовать и контекстуализацию различных наборов данных о сельском хозяйстве между различными поставщиками.

- **Ускоритель**: Веб-приложение, построенное поверх Datahub. Это запускает разработку и визуализацию модели. Ускоритель использует API Azure FarmBeats для демонстрации визуализации данных датчиков, вписанных в карты, и визуализации вывода модели в виде карт.

## <a name="general-information"></a>Общие сведения

### <a name="components-installed"></a>Установлены компоненты

При установке Azure FarmBeats в подписке Azure предусмотрены следующие ресурсы:

| Установлены ресурсы Azure  | Компонент Azure FarmBeats  |
|---------|---------|
| Application Insights   |      Ускоритель & Datahub      |
| Служба приложений     |     Ускоритель & Datahub     |
| План обслуживания приложения   | Ускоритель & Datahub  |
| API подключения    |  Datahub       |
| Кэш Redis для Azure       | Datahub      |
| Azure Cosmos DB   |  Datahub       |
| Фабрика данных Azure версии 2       |     Ускоритель & Datahub      |
| Учетная запись пакетной службы Azure    | Datahub   |
| Azure Key Vault |  Ускоритель & Datahub        |
| Учетная запись Azure Maps       |     Accelerator    |
| Название пространства событий концентратора    |     Datahub      |
| приложение логики;      |  Datahub       |
| Учетная запись хранения      |     Ускоритель & Datahub      |
| Аналитика временных рядов     |    Datahub    |

### <a name="costs-incurred"></a>Понесенные расходы

Стоимость Azure FarmBeats представляет собой совокупность стоимости базовых служб Azure. Информация о ценах на услуги Azure может быть рассчитана с помощью [Калькулятора ценообразования.](https://azure.microsoft.com/pricing/calculator) Фактическая стоимость общей установки будет варьироваться в зависимости от использования. Устойчивая государственная стоимость для этих двух компонентов:

- Datahub - менее $10 в день
- Ускоритель - менее $2 в день

### <a name="regions-supported"></a>Регионы поддержали

В настоящее время Azure FarmBeats поддерживается в общедоступных облачных средах в следующих регионах:

- Восточная Австралия
- Центральная часть США
- Восточная часть США
- восточная часть США 2
- западная часть США
- западная часть США 2
- Северная Европа
- Западная Европа
- Восточная Азия
- юго-восточная Азия

### <a name="time-taken"></a>Заобрали время

Вся настройка Azure FarmBeats, включая подготовку и установку, займет менее часа.

## <a name="prerequisites"></a>Предварительные требования

Перед началом фактической установки Azure FarmBeats необходимо выполнить следующие шаги:

### <a name="verify-permissions"></a>Проверка разрешений

Для установки Azure FarmBeats вам потребуются следующие разрешения в арендаторе Azure:

- Арендатор - создатель приложения AAD
- Подписка - Владелец
- Ресурсная группа, в которой устанавливается FarmBeats - Владелец

Первые два разрешения необходимы для создания шага [приложения AAD.](#create-an-aad-application) При необходимости вы можете получить у кого-то с соответствующими разрешениями создание приложения AAD.

Лицо, управлявшее FarmBeats, устанавливаемым с рынка, должно быть владельцем группы ресурсов, в которой устанавливается FarmBeats. Для владельцев подписок это происходит автоматически при создании группы ресурсов. Для других, пожалуйста, предварительно создайте группу ресурсов и попросите владельца подписки сделать вас владельцем Группы ресурсов.

Вы можете проверить свои разрешения доступа на портале Azure, следуя инструкциям по [управлению доступом на основе роли.](https://docs.microsoft.com/azure/role-based-access-control/check-access)

### <a name="decide-subscription-and-region"></a>Решите подписку и регион

Вам понадобится идентификатор подписки Azure и регион, где вы хотите установить Azure FarmBeats. Выберите один из регионов, перечисленных в разделе [«Регионы», поддерживаемом.](#regions-supported)

Запишите **идентификатор подписки Azure** и **область Azure.**

### <a name="create-an-aad-application"></a>Создание приложения AAD

Azure FarmBeats требуют создания и регистрации приложений Azure Active Directory. Для успешного запуска сценария создания AAD необходимы следующие разрешения:

- Арендатор - создатель приложения AAD
- Подписка - Владелец

Выполнить следующие шаги в экземпляре облачной оболочки с помощью среды PowerShell. Пользователям, впервые пользователям будет предложено выбрать подписку и создать учетную запись хранения. Завершите настройку в соответствии с инструкциями.

1. Скачать [скрипт генератора приложений AAD](https://aka.ms/FarmBeatsAADScript)

    ```azurepowershell-interactive
        wget -q https://aka.ms/FarmBeatsAADScript -O ./create_aad_script.ps1
    ```

2. По умолчанию файл загружается в домашний каталог. Перейдите в каталог.

    ```azurepowershell-interactive
        cd
    ```

3. Выполнить сценарий AAD

    ```azurepowershell-interactive
        ./create_aad_script.ps1
    ```

4. В скрипте запрашивается следующие три входных данных:

    - **Название сайта FarmBeats**: Это уникальная приставка URL для веб-приложения FarmBeats. В случае, если префикс уже снят, скрипт будет исправлен. После установки, развертывание FarmBeats будет\<доступно от https:// FarmBeats-сайт-имя>.azurewebsites.net и\<чванливые AIS будет на https:// FarmBeats-сайт-имя>-api.azurewebsites.net

    - **Идентификатор входа в Azure:** Предоставьте идентификатор входа в Azure для пользователя, которого вы хотите добавить в качестве админа FarmBeats. Этот пользователь может предоставить доступ к веб-приложению FarmBeats другим пользователям. Идентификатор входа, john.doe@domain.comкак правило, является формой. Azure UPN также поддерживается.

    - **Идентификатор подписки**: Это идентификатор подписки, в котором вы хотите установить Azure FarmBeats

5. Скрипт AAD занимает около 2 минут и выводит значения на экране, а также на файл json в том же каталоге. Если у вас был кто-то другой запустить сценарий, попросите его поделиться этим выводом с вами.

### <a name="create-sentinel-account"></a>Создание учетной записи Sentinel

Установка Azure FarmBeats позволяет получить спутниковые снимки с спутниковой миссии Европейского космического агентства [Sentinel-2](https://scihub.copernicus.eu/) для вашей фермы. Для настройки этой настройки требуется учетная запись Sentinel.

Выполните последующие действия по созданию бесплатной учетной записи с Sentinel:

1. Перейдите на официальную [страницу регистрации.](https://aka.ms/SentinelRegistration)
2. Предоставьте необходимые данные (имя, фамилия, имя пользователя, пароль и идентификатор электронной почты) и заполните форму.
3. Ссылка на проверку отправляется на зарегистрированный идентификатор электронной почты. Выберите ссылку, представленную в электронной почте, и завершите проверку.

Процесс регистрации завершен. Сделайте заметку вашего **Сентинеля Имя пользователя** и **Sentinel пароль**, как только проверка также завершена.

## <a name="install"></a>Установка

Теперь вы готовы установить FarmBeats. Выполните приведенные ниже действия, чтобы начать установку:

1. Войдите на портал Azure. Выберите учетную запись в правом верхнем углу и переключитесь на арендатора Azure AD, где требуется установить Azure FarmBeats.

2. Перейдите на рынок Azure Marketplace в рамках портала и ищите **Azure FarmBeats** в Marketplace.

3. Появляется новое окно с обзором Azure FarmBeats. Выберите **Создать**.

4. Появится новое окно. Завершите процесс регистрации, выбрав правильную подписку, группу ресурсов и место, на которое вы хотите установить Azure FarmBeats.

5. Предоставьте адрес электронной почты, который должен получать любые оповещения службы, связанные с Azure FarmBeats, в разделе **Оповещения службы FarmBeats.** Выберите **далее** в нижней части страницы, чтобы перейти к вкладке **зависимостей.**

    ![Основы Вкладка](./media/install-azure-farmbeats/create-azure-farmbeats-basics.png)

6. Копирование отдельных записей от вывода [сценария AAD](#create-an-aad-application) до входных данных в разделе приложения AAD.

7. Введите имя пользователя и пароль [учетной записи Sentinel](#create-sentinel-account) в разделе Sentinel Account. Выберите **далее,** чтобы перейти к **вкладке «Обзор и создайте».**

    ![Вкладка «Зависимости»](./media/install-azure-farmbeats/create-azure-farmbeats-dependencies.png)

8. После проверки ввведенных сведений выберите **OK**. Отображаются страницы «Условия использования». Просмотрите условия и выберите **Создать** для начала установки. Вы будете перенаправлены на страницу, где вы можете следить за ходом установки.

После завершения установки вы можете проверить установку и начать использовать портал FarmBeats, перенаправившись к названию веб-сайта, которое вы предоставили во время установки: https://\<FarmBeats-сайт-имя>.azurewebsites.net. Вы должны увидеть пользовательский интерфейс FarmBeats с возможностью создания Фермы.

**Datahub** можно найти\<на https:// FarmBeats-сайт-имя>-api.azurewebsites.net/swagger. Здесь вы увидите различные объекты API FarmBeats и выполните операции REST на API.

## <a name="upgrade"></a>Обновление

Чтобы обновить FarmBeats до последней версии, выполняй следующие шаги в экземпляре Облачной оболочки с использованием среды PowerShell. Пользователь должен быть владельцем подписки, в которой установлена FarmBeats.

Пользователям, впервые пользователям будет предложено выбрать подписку и создать учетную запись хранения. Завершите настройку в соответствии с инструкциями.

1. Скачать [сценарий обновления](https://aka.ms/FarmBeatsUpgradeScript)

    ```azurepowershell-interactive
        wget –q https://aka.ms/FarmBeatsUpgradeScript -O ./upgrade-farmbeats.ps1
    ```

2. По умолчанию файл загружается в домашний каталог. Перейдите в каталог.

    ```azurepowershell-interactive
        cd
    ```

3. Выполнить сценарий обновления

    ```azurepowershell-interactive
        ./upgrade-farmbeats.ps1 -InputFilePath [Path to input.json file]
    ```

Путь к файлу input.json не является обязательным. Если не указано, скрипт будет запрашивать все необходимые входы. Обновление должно завершиться примерно через 30 минут.

## <a name="uninstall"></a>Удаление

Чтобы удалить Azure FarmBeats Datahub или accelerator, выполните следующие шаги:

1. Войдите на портал Azure и **удалите группы ресурсов,** в которые установлены эти компоненты.

2. Перейдите в Active Directory Azure & **удалить приложение Azure AD,** связанное с установкой Azure FarmBeats.

## <a name="next-steps"></a>Дальнейшие действия

Вы узнали, как установить Azure FarmBeats в подписку Azure. Теперь узнайте, как [добавить пользователей](manage-users-in-azure-farmbeats.md#manage-users) в экземпляр Azure FarmBeats.
