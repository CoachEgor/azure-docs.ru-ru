---
title: Получение данных датчика от партнеров
description: В этой статье описывается получение данных датчика от партнеров.
author: uhabiba04
ms.topic: article
ms.date: 11/04/2019
ms.author: v-umha
ms.openlocfilehash: 9364c344c58d17f9f6e6404dd8aa850af032cee9
ms.sourcegitcommit: b95983c3735233d2163ef2a81d19a67376bfaf15
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/11/2020
ms.locfileid: "77138357"
---
# <a name="get-sensor-data-from-sensor-partners"></a>Получение данных датчика от партнеров датчиков

Azure Фармбеатс помогает перенести потоковые данные с устройств Интернета вещей и датчиков в Датахуб. В настоящее время поддерживаются следующие партнеры датчика устройств.

  ![Партнеры Фармбеатс](./media/get-sensor-data-from-sensor-partner/partner-information-2.png)

Интеграция данных устройства с Azure Фармбеатс помогает получать данные о заземлении от датчиков Интернета вещей, развернутых в ферме, в концентратор данных. Данные, будучи доступными, можно просматривать с помощью ускорителя Фармбеатс. Данные можно использовать для создания модели Fusion, машинного обучения или искусственного интеллекта (ML/AI) с помощью Фармбеатс.

Чтобы запустить потоковую передачу данных датчика, убедитесь в следующем:

-  Вы установили Фармбеатс в Azure Marketplace.
-  Вы решили установить датчики и устройства на ферме.
-  Если вы планируете использовать датчики почвы влажность, используйте карту расположения датчиков Фармбеатс почвы влажность, чтобы получить рекомендации по числу датчиков и в том месте, где они должны размещаться. Дополнительные сведения см. в разделе [Создание карт](generate-maps-in-azure-farmbeats.md).
- Вы приобретаете и развертываете устройства или датчики от вашего партнера по устройствам на ферме. Убедитесь, что вы можете получить доступ к данным датчика с помощью решения "Партнеры устройства".

## <a name="enable-device-integration-with-farmbeats"></a>Включение интеграции устройств с Фармбеатс

После начала потоковой передачи данных датчиков можно начать процесс получения данных в систему Фармбеатс. Предоставьте следующие сведения поставщику устройства, чтобы обеспечить интеграцию с Фармбеатс:

 - Конечная точка API
 - Tenant ID
 - Идентификатор клиента
 - Секрет клиента
 - Строка подключения EventHub

Вы можете создать приведенные выше сведения, выполнив следующие действия. (Обратите внимание, что эти действия необходимо выполнить в Azure, поэтому вам потребуется доступ к подписке Azure, где развернут Фармбеатс).

1. Скачайте [ZIP-файл](https://aka.ms/farmbeatspartnerscriptv2)и извлеките его на локальный диск. В ZIP-файле будет один файл.

2. Войдите в https://portal.azure.com/.

3. **Если вы используете фармбеатс версии 1.2.7 или более поздней, пропустите шаги 3a, 3b и 3c и перейдите к шагу 4.** Чтобы проверить версию Фармбеатс, щелкните значок параметров в правом верхнем углу пользовательского интерфейса Фармбеатс.

3\.1. Перейдите в раздел Azure Active Directory-> Регистрация приложений.

3\.2. Щелкните регистрацию приложения, созданную в рамках развертывания Фармбеатс. Оно будет иметь то же имя, что и центр данных Фармбеатс.

3\.3. Щелкните "предоставить API"-> щелкните "добавить клиентское приложение" и введите **04b07795-8ddb-461a-bbEE-02f9e1bf7b46** и установите флажок "авторизовать область". Это предоставит доступ к Azure CLI (Cloud Shell) для выполнения следующих действий.

4. Откройте Cloud Shell. Этот параметр доступен на панели инструментов в правом верхнем углу портал Azure.

    ![Панель инструментов портал Azure](./media/get-drone-imagery-from-drone-partner/navigation-bar-1.png)

5. Убедитесь, что для среды задано значение **PowerShell**. По умолчанию он имеет значение bash.

    ![Настройка панели инструментов PowerShell](./media/get-sensor-data-from-sensor-partner/power-shell-new-1.png)

6. Отправьте файл из шага 1 в экземпляре Cloud Shell.

    ![Кнопка "отправить панель инструментов"](./media/get-sensor-data-from-sensor-partner/power-shell-two-1.png)

7. Перейдите в каталог, в который был отправлен файл. По умолчанию файлы передаются в корневой каталог по имени пользователя.

8. Выполните следующий сценарий. Сценарий запрашивает идентификатор клиента, который можно получить на странице обзора Azure Active Directory->.

    ```azurepowershell-interactive 

    ./generatePartnerCredentials.ps1   

    ```

9. Следуйте инструкциям на экране, чтобы записать значения для **конечных точек API**, **идентификаторов** **клиента, идентификаторов**клиентов, **секретов клиента**и **строки подключения EventHub**.

### <a name="integrate-device-data-by-using-the-generated-credentials"></a>Интеграция данных устройства с помощью созданных учетных данных

Теперь у вас есть следующие сведения, созданные в предыдущем разделе.
 - Конечная точка API
 - Строка подключения EventHub
 - Идентификатор клиента
 - Секрет клиента
 - Tenant ID
 
Это необходимо предоставить партнеру устройства для связывания Фармбеатс. Перейдите на портал партнера по устройствам, чтобы сделать то же самое. Например, если вы используете устройства из Дэвис Instruments, перейдите на следующую страницу:

[Дэвис Instruments](https://weatherlink.github.io/azure-farmbeats/setup)

 Поставщик устройства подтверждает успешность интеграции. После подтверждения можно просмотреть все устройства и датчики в Azure Фармбеатс.

## <a name="view-devices-and-sensors"></a>Просмотр устройств и датчиков

Используйте следующий раздел, чтобы просмотреть устройства и датчики для фермы.

### <a name="view-devices"></a>Просмотр устройств

В настоящее время Фармбеатс поддерживает следующие устройства:

- **Node**— устройство, к которому подключен один или несколько датчиков.
- **Шлюз**: устройство, к которому подключен один или несколько узлов.

Выполните следующие действия.

1. На домашней странице в меню выберите пункт **устройства** .
  На странице **устройства** отображается тип устройства, модель, состояние, ферма, в которой он размещен, и Дата последнего обновления метаданных. По умолчанию для столбца фермы задано *значение NULL*. Вы можете назначить устройство для фермы. Дополнительные сведения см. в разделе [Назначение устройств](#assign-devices).
2. Выберите устройство, чтобы просмотреть свойства устройства, данные телеметрии и дочерние устройства, подключенные к устройству.

    ![Страница "Устройства"](./media/get-sensor-data-from-sensor-partner/view-devices-1.png)

### <a name="view-sensors"></a>Просмотр датчиков

Выполните следующие действия.

1. На домашней странице в меню выберите **датчики** .
  На странице **датчиков** отображаются сведения о типе датчика, ферме, к которой он подключен, родительскому устройству, имени порта, типе порта и состоянии последнего обновления.
2. Выберите датчик, чтобы просмотреть свойства датчика, активные предупреждения и данные телеметрии из датчика.

    ![Страница датчиков](./media/get-sensor-data-from-sensor-partner/view-sensors-1.png)

## <a name="assign-devices"></a>Назначение устройств  

После перетекания данных датчика их можно назначить ферме, в которой развернуты датчики.

1. На домашней странице в меню выберите пункт **фермы** . Откроется страница список **ферм** .
2. Выберите ферму, для которой необходимо назначить устройство, и щелкните **Добавить устройства**.
3. Откроется окно **Добавление устройств** . Выберите устройство, которое нужно назначить ферме.

    ![Окно добавления устройств](./media/get-sensor-data-from-sensor-partner/add-devices-1.png)

4. Выберите **Добавить устройства**. Кроме того, перейдите в меню **устройства** , выберите устройства, которые нужно назначить ферме, и щелкните **связать устройства**.
5. В окне **связать устройства** выберите ферму из раскрывающегося списка и выберите **Применить ко всем** , чтобы связать ферму со всеми выбранными устройствами.

    ![Окно "связать устройства"](./media/get-sensor-data-from-sensor-partner/associate-devices-1.png)

6. Чтобы связать каждое устройство с другой фермой, щелкните стрелку раскрывающегося списка в столбце **назначить в ферме** и выберите ферму для каждой строки устройства.
7. Выберите **назначить** , чтобы завершить назначение устройства.

### <a name="visualize-sensor-data"></a>Визуализация данных датчика

Выполните следующие действия.

1. На домашней странице в меню выберите пункт **фермы** , чтобы открыть страницу **фермы** .
2. Выберите **ферму** , для которой необходимо просмотреть данные датчика.
3. На панели мониторинга **фермы** можно просмотреть данные телеметрии. Вы можете просмотреть динамическую телеметрию или использовать **Настраиваемый диапазон** , чтобы просмотреть конкретный диапазон дат.

    ![Панель мониторинга фермы](./media/get-sensor-data-from-sensor-partner/telemetry-data-1.png)

## <a name="delete-a-sensor"></a>Удаление датчика

Выполните следующие действия.

1. На домашней странице в меню выберите **датчики** , чтобы открыть страницу **датчиков** .
2. Выберите устройство, которое нужно удалить, и в окне подтверждения выберите **Удалить** .

    ![Кнопка "Удалить"](./media/get-sensor-data-from-sensor-partner/delete-sensors-1.png)

Появится сообщение с подтверждением об успешном удалении датчика.

## <a name="delete-devices"></a>удаление устройств;

Выполните следующие действия.

1. На домашней странице в меню выберите пункт **устройства** , чтобы открыть страницу **устройства** .
2. Выберите устройство, которое нужно удалить, и в окне подтверждения выберите **Удалить** .

    ![Кнопка "Удалить"](./media/get-sensor-data-from-sensor-partner/delete-device-1.png)

## <a name="next-steps"></a>Дальнейшие действия

Теперь данные датчиков передаются в экземпляр Azure Фармбеатс. Теперь Узнайте, как [создавать карты](generate-maps-in-azure-farmbeats.md#generate-maps) для ферм.
