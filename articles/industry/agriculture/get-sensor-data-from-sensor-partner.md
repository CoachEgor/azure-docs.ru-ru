---
title: Получайте данные датчиков от партнеров
description: В этой статье описывается, как получить данные датчиков от партнеров.
author: uhabiba04
ms.topic: article
ms.date: 11/04/2019
ms.author: v-umha
ms.openlocfilehash: 113ab07af8ada16c0779da510c5f5b1f1f5a290b
ms.sourcegitcommit: 632e7ed5449f85ca502ad216be8ec5dd7cd093cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2020
ms.locfileid: "80398236"
---
# <a name="get-sensor-data-from-sensor-partners"></a>Получайте данные датчиков от партнеров датчиков

Azure FarmBeats помогает вам передавать потоковые данные с устройств и датчиков IoT в Datahub. В настоящее время поддерживаются следующие партнеры сенсорного устройства.

  ![Партнеры FarmBeats](./media/get-sensor-data-from-sensor-partner/partner-information-2.png)

Интеграция данных устройств с Azure FarmBeats позволяет получать наземные данные с датчиков IoT, развернутых в вашей ферме, в центр данных. Данные, как только доступны, могут быть визуализированы через ускоритель FarmBeats. Данные могут быть использованы для синтеза данных и машинного обучения / искусственного интеллекта (ML / ИИ) модель здания с помощью FarmBeats.

Чтобы начать потоковое сенсорное воспроизведение данных, убедитесь:

-  Вы установили FarmBeats в Azure Marketplace.
-  Вы определились с датчиками и устройствами, которые хотите установить на ферме.
-  Если вы планируете использовать датчики влажности почвы, используйте карту размещения датчиков влажности почвы FarmBeats Soil Sensor, чтобы получить рекомендацию о количестве датчиков и о том, где именно их следует разместить. Для получения дополнительной информации [см.](generate-maps-in-azure-farmbeats.md)
- Вы приобретаете и развертываете устройства или датчики у партнера по устройству на ферме. Убедитесь, что вы можете получить доступ к данным датчика с помощью решения партнеров по устройству.

## <a name="enable-device-integration-with-farmbeats"></a>Включить интеграцию устройств с FarmBeats

После начала потоковой передачи данных датчиков можно начать процесс получения данных в систему FarmBeats. Предоставьте поставщику устройств следующую информацию, чтобы обеспечить интеграцию в FarmBeats:

 - Конечная точка API
 - Tenant ID
 - Идентификатор клиента
 - Секрет клиента
 - Строка соединения EventHub

Следуйте ниже шаги для создания вышеуказанной информации:

> [!NOTE]
> Эти шаги необходимо выполнить в Azure для доступа к подписке Azure, где развернуты FarmBeats.

1. Выполните вход в https://portal.azure.com/.

2. **Если вы находитесь на FarmBeats версии 1.2.7 или позже, пропустить шаги a, b и c, и перейти к шагу 3.** Вы можете проверить версию FarmBeats, выбрав значок **настроек** в правом верхнем углу uI FarmBeats.

      а.  Перейти к > **регистрации приложений** Active **Directory Azure**

      b. Выберите **регистрацию приложений,** которая была создана в рамках развертывания FarmBeats. Он будет иметь то же имя, что и ваш Datahub FarmBeats.

      c. Выберите **Expose API** > выберите **Добавить клиентское приложение** и введите **04b07795-8ddb-461a-bbee-02f9e1bf7b46** и проверьте **Возможности Scope**. Это даст доступ к Azure CLI (Cloud Shell) для выполнения нижеприведенных шагов:

3. Откройте Cloud Shell. Эта опция доступна на панели инструментов в правом верхнем углу портала Azure.

    ![Панель инструментов портала Azure](./media/get-drone-imagery-from-drone-partner/navigation-bar-1.png)

4. Убедитесь, что среда настроена на **PowerShell.** По умолчанию, он установлен на Bash.

    ![Настройка панели инструментов PowerShell](./media/get-sensor-data-from-sensor-partner/power-shell-new-1.png)

5. Иди в свой домашний каталог.

    ```azurepowershell-interactive 
    cd  
    ```

6. Выполните следующую команду. Это позволит загрузить сценарий в ваш домашний каталог.

    ```azurepowershell-interactive 

    wget –q https://aka.ms/farmbeatspartnerscriptv3 -O ./generatePartnerCredentials.ps1

    ```

7. Выполните следующий сценарий. Скрипт запрашивает идентификатор арендатора, который можно получить на странице Active Directory > **Overview** **Azure.**

    ```azurepowershell-interactive 

    ./generatePartnerCredentials.ps1   

    ```

8. Следуйте инструкциям на экране, чтобы захватить значения для **API Endpoint**, **Идентификатор клиента**, **Клиент ID**, **Секрет клиента**, и **EventHub подключения строки**.

### <a name="integrate-device-data-by-using-the-generated-credentials"></a>Интеграция данных устройств с помощью генерируемых учетных данных

Теперь у вас есть следующая информация, генерируемая из предыдущего раздела.
 - Конечная точка API
 - Строка соединения EventHub
 - Идентификатор клиента
 - Секрет клиента
 - Tenant ID

Вам нужно будет предоставить это вашему партнеру устройства для связи FarmBeats. За этим же можно обратиться на портал партнеров по устройству. Например, в случае использования устройств от Davis Instruments, Teralytic или Pessl Instruments (Metos.at) перейдите на соответствующие страницы, упомянутые ниже:

1. [Дэвис Инструменты](https://weatherlink.github.io/azure-farmbeats/setup)

2. [Терлитик](https://app.teralytic.com/)

3. [Песль Инструменты](https://ng.fieldclimate.com/user-api-services)

Поставщик устройств подтверждает успешную интеграцию. После подтверждения вы можете просматривать все устройства и датчики на Azure FarmBeats.

## <a name="view-devices-and-sensors"></a>Просмотр устройств и датчиков

Используйте следующий раздел для просмотра устройств и датчиков для вашей фермы.

### <a name="view-devices"></a>Просмотр устройств

В настоящее время FarmBeats поддерживает следующие устройства:

- **Узла**: Устройство, к которому прикрепляются один или несколько датчиков.
- **Шлюз**: Устройство, к которому прикрепляются один или несколько узлов.

Выполните следующие действия.

1. На главной странице выберите **устройства** из меню.
  Страница **Устройств** отображает тип устройства, модель, статус, ферму, в ней помещается, и последнюю обновленную дату метаданных. По умолчанию столбец фермы настроен на *NULL.* Вы можете назначить устройство на ферму. Для получения дополнительной информации [см.](#assign-devices)
2. Выберите устройство для просмотра свойств устройства, телеметрии и детских устройств, подключенных к устройству.

    ![Страница "Устройства"](./media/get-sensor-data-from-sensor-partner/view-devices-1.png)

### <a name="view-sensors"></a>Просмотр датчиков

Выполните следующие действия.

1. На главной странице выберите **датчики** из меню.
  Страница **датчиков** отображает подробную информацию о типе датчика, ферме, к которого он подключен, родительском устройстве, названии порта, типе порта и последнем обновленном статусе.
2. Выберите датчик для просмотра свойств датчика, активных оповещений и телеметрии от датчика.

    ![Страница датчиков](./media/get-sensor-data-from-sensor-partner/view-sensors-1.png)

## <a name="assign-devices"></a>Устройства присвоения  

После того, как данные датчика будут стекать, вы можете назначить их на ферму, где были развернуты датчики.

1. На главной странице выберите **Фермы** из меню. Отображается страница списка **Фермы.**
2. Выберите ферму, на которую вы хотите назначить устройство, и выберите **Добавить устройства.**
3. Отображается окно **Добавления устройств.** Выберите устройство, которое вы хотите назначить ферме.

    ![Добавление окна устройств](./media/get-sensor-data-from-sensor-partner/add-devices-1.png)

4. Выберите **устройства добавления**. Кроме того, перейдите в меню **устройств,** выберите устройства, которые вы хотите назначить ферме, и выберите **Ассоциированные устройства.**
5. В окне **Ассоциированных устройств** выберите ферму из списка выпадающих устройств и выберите **Apply to All,** чтобы связать ферму со всеми выбранными устройствами.

    ![Окно ассоциированных устройств](./media/get-sensor-data-from-sensor-partner/associate-devices-1.png)

6. Чтобы связать каждое устройство с другой фермой, выберите стрелку выпадения в столбце **«Назначить ферму»** и выберите ферму для каждой строки устройства.

7. Выберите **назначение** для выполнения задания устройства.

### <a name="visualize-sensor-data"></a>Визуализации данных датчика

Выполните следующие действия.

1. На главной странице выберите **Фермы** из меню, чтобы просмотреть страницу **Фермы.**
2. Выберите **ферму,** для которой вы хотите увидеть данные датчика.
3. На панели мониторинга **Farm** можно просматривать данные телеметрии. Вы можете просмотреть прямую телеметрию или использовать **пользовательский диапазон,** чтобы увидеть определенный диапазон дат.

    ![Панель мониторинга фермы](./media/get-sensor-data-from-sensor-partner/telemetry-data-1.png)

## <a name="delete-a-sensor"></a>Удалить датчик

Выполните следующие действия.

1. На главной странице выберите **датчики** из меню для просмотра **страницы датчиков.**
2. Выберите устройство, которое вы хотите удалить, и выберите **Удалить** в окне подтверждения.

    ![Кнопка "Удалить"](./media/get-sensor-data-from-sensor-partner/delete-sensors-1.png)

Сообщение о подтверждении показывает, что датчик успешно удален.

## <a name="delete-devices"></a>удаление устройств;

Выполните следующие действия.

1. На главной странице выберите **устройства** из меню для просмотра **страницы Устройств.**
2. Выберите устройство, которое вы хотите удалить, и выберите **Удалить** в окне подтверждения.

    ![Кнопка "Удалить"](./media/get-sensor-data-from-sensor-partner/delete-device-1.png)

## <a name="next-steps"></a>Следующие шаги

Теперь в экземпляр Azure FarmBeats внегосход поступают данные датчиков. Теперь узнайте, как [создавать карты](generate-maps-in-azure-farmbeats.md#generate-maps) для ваших ферм.
