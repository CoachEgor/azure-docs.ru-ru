---
title: Устранение неполадок
description: Устранение неполадок Azure Фармбеатс.
author: uhabiba04
ms.topic: article
ms.date: 11/04/2019
ms.author: v-umha
ms.openlocfilehash: 567110b2e0429930720abf6af5f2727e4ad9d3bb
ms.sourcegitcommit: b1a8f3ab79c605684336c6e9a45ef2334200844b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2019
ms.locfileid: "74048276"
---
# <a name="troubleshooting"></a>Устранение неполадок

В следующих разделах описаны распространенные проблемы Azure Фармбеатс и способы их устранения.

Чтобы получить дополнительную помощь, напишите нам по адресу farmbeatssupport@microsoft.com, включите в него файл deploy. log.

 Чтобы скачать файл deploy. log, выполните следующие действия.

1. Выделенный значок и выберите пункт **скачать** в раскрывающемся списке.

    ![Перебивает ферму проекта](./media/troubleshooting-farmbeats/download-deployer-log-1.png)

2. На следующем экране введите путь к файлу развертывания. log. Например, фармбеатс-деплойер. log.

## <a name="sensor-telemetry"></a>Телеметрии датчика

### <a name="telemetry-not-seen"></a>Данные телеметрии не видны

**Симптом**: устройства/датчики развернуты и вы связали фармбеатс с вашим партнером устройства; но вы не можете получить или просмотреть данные телеметрии в Фармбеатс.

**Корректирующее действие**. Посетите портал Azure и выполните следующие действия.

1. Перейдите в группу ресурсов центра данных Фармбеатс.   
2. Выберите **концентратор событий** (датафидевенсубнамеспаце...).  и проверьте количество входящих сообщений.   
3. Если нет **входящих сообщений**, обратитесь к партнеру по устройствам.  
4. Если имеются **Входящие сообщения**, обратитесь в службу farmbeatssupport@microsoft.com с помощью концентратора данных и журналов ускорителя и захваченных данных телеметрии.

Сведения о загрузке журналов см. в [разделе "журналы](#collect-logs-manually) " документа.    

### <a name="device-appears-offline"></a>Устройство отображается в автономном режиме

**Симптомы**: устройства установлены и вы связали фармбеатс с вашим партнером по устройствам. Устройства находятся в сети и отправляют данные телеметрии, но отображаются в автономном режиме.

**Корректирующее действие**: интервал отчетов не настроен для этого устройства. Для задания интервала отчетов обратитесь к изготовителю устройства. 

### <a name="error-deleting-a-resource"></a>Ошибка при удалении ресурса

Ниже приведены распространенные сценарии ошибок при удалении устройства.  

**Сообщение**: на устройство имеется ссылка в датчиках: имеется один или несколько датчиков, связанных с устройством. Удалите датчики, а затем удалите устройство.  

**Это означает**, что устройство связано с несколькими датчиками, развернутыми в ферме.   

**Корректирующее действие**:  

1. Удалите датчики, связанные с устройством, с помощью ускорителя.  
2. Если вы хотите связать датчики с другим устройством, попросите партнера устройства сделать то же самое.  
3. Удалите устройство с помощью вызова API DELETE, установив для параметра Force значение true.  

**Сообщение**: ссылка на устройство указана в парентдевицеид: одно или несколько устройств, связанных с этим устройством как дочерние устройства. Удалите их, а затем удалите это устройство.  

**Это означает, что**с устройством связаны другие устройства.  

**Корректирующее действие**

1. Удаление устройств, связанных с конкретным устройством  
2. Удаление конкретного устройства  

    > [!NOTE]
    > Невозможно удалить устройство, если с ним связаны датчики. Дополнительные сведения об удалении связанных датчиков см. в разделе [Удаление датчиков](get-sensor-data-from-sensor-partner.md) в разделе Получение данных датчика.


## <a name="issues-with-jobs"></a>Проблемы с заданиями

### <a name="farmbeats-internal-error"></a>Внутренняя ошибка Фармбеатс

**Сообщение**: Внутренняя ошибка фармбеатс. Дополнительные сведения см. в разделе Руководство по устранению неполадок.

**Корректирующее действие**. это может быть вызвано временной ошибкой в конвейере данных. Создайте задание еще раз. Если ошибка повторяется, добавьте ошибку в запись на форуме Фармбеатс или обратитесь FarmBeatsSupport@microsoft.com.

## <a name="accelerator-troubleshooting"></a>Устранение неполадок ускорителя

### <a name="access-control"></a>Контроль доступа

**Ошибка при добавлении назначения роли**

**Сообщение**: соответствующие пользователи не найдены

**Корректирующее действие**: Проверьте идентификатор электронной почты, для которого предпринимается попытка назначения роли. Идентификатор электронной почты должен быть точным совпадением с тем, который зарегистрирован для этого пользователя в Active Directory. Если ошибка повторится, добавьте ошибку в запись на форуме Фармбеатс или обратитесь FarmBeatsSupport@microsoft.com

### <a name="unable-to-log-in-to-accelerator"></a>Не удается войти в ускоритель

**Сообщение**: ошибка: у вас нет разрешения на вызов службы. Обратитесь к администратору для авторизации.

**Корректирующее действие**: попросите администратора авторизовать вас для доступа к развертыванию фармбеатс. Это можно сделать, выполнив POST of API RoleAssignment или с помощью элемента управления доступом на панели параметров в ускорителе.  

Если вы уже добавили и столкнулись с этой ошибкой, повторите попытку, обновив страницу.  Если ошибка повторяется, добавьте ошибку в запись на форуме Фармбеатс или обратитесь FarmBeatsSupport@microsoft.com.

![Перебивает ферму проекта](./media/troubleshooting-farmbeats/accelerator-troubleshooting-1.png)

### <a name="accelerator---an-unknown-error-occurred"></a>Ускоритель — произошла неизвестная ошибка  

**Сообщение**: ошибка: произошла неизвестная ошибка

**Корректирующее действие**: это происходит, если время бездействия страницы слишком велико. Обновите страницу.  

Если ошибка продолжает возникать, добавьте ошибку в сообщение на форуме Фармбеатс или обратитесь FarmBeatsSupport@microsoft.com

**Фармбеатс Accelerator не отображает последнюю версию даже после обновления Фармбеатсдеплоймент**

**Корректирующее действие**: это происходит из-за сохранения рабочего процесса службы в браузере.
Закройте все вкладки браузера, которые имеют сочетание клавиш быстрого вызова, и закройте окно браузера. Запустите новый экземпляр браузера и снова загрузите URI ускорителя. Будет загружена новая версия ускорителя.

## <a name="sentinel-imagery-related-issues"></a>Проблемы, связанные с изображениями-метками

### <a name="sentinel-wrong-username-or-password"></a>Метка "неправильное имя пользователя или пароль"

**Сообщение об ошибке задания**; Для доступа к этому ресурсу требуется полная проверка подлинности.

**Действие исправления**: повторно запустите установщик для обновления концентратора данных с правильными именем пользователя и паролем.

**Корректирующее действие**: перезапустите невыполненное задание или выполните задание вспомогательных индексов для диапазона дат 5-7 дней и проверьте, успешно ли задано задание.

### <a name="sentinel-hub-wrongurlor-not-accessible"></a>Неверный URL-адрес концентратора маркеров или недоступен 

**Сообщение об ошибке задания**: ой, что-то пошло не так. Страница, к которой вы пытаетесь получить доступ, недоступна (временно). 

**Корректирующее действие**:
1.  Откройте URL-адрес Sentinel (https://scihub.copernicus.eu/dhus/) в браузере и проверьте, доступен ли веб-сайт. 
2.  Если веб-сайт недоступен, проверьте, не блокирует ли веб-сайт брандмауэр или сеть компании и выполните необходимые действия, чтобы разрешить указанный выше URL-адрес. 
3.  Перезапустите невыполненное задание или выполните задание вспомогательных индексов для диапазона дат 5-7 дней и проверьте, успешно ли задано задание.  

### <a name="sentinel-server-down-for-maintenance"></a>Сервер Sentinel для обслуживания

**Сообщение об ошибке задания**: скоро будет открыт центр Коперникус Open Access. К сожалению, в данный момент выполняется некоторое обслуживание. Вскоре мы вернемся к сети! 

**Корректирующее действие**:

1.  Эта проблема может возникать, если на сервере Sentinel выполняются какие бы то ни было действия по обслуживанию. 
2.  Если какое-либо задание или конвейер завершилось сбоем по причине указанной выше причины, повторно отправьте задание через некоторое время. 
3.  Пользователь может посетить https://scihub.copernicus.eu/news/, чтобы проверить сведения о запланированных и незапланированных действиях по обслуживанию Sentinel.  
4.  Перезапустите невыполненное задание или выполните задание вспомогательных индексов для диапазона дат 5-7 дней и проверьте, успешно ли задано задание.

### <a name="sentinel-maximum-number-of-connections-reached"></a>Достигнуто максимальное число подключений для Sentinel

**Сообщение об ошибке задания**: максимальное число одновременных потоков, достигнутых пользователем "<username>" 

**Корректирующее действие**
1.  Если какое-либо задание завершается сбоем по указанной выше причине, то та же учетная запись-метка используется в другом развертывании или программном обеспечении. 
2.  Пользователь может создать новую учетную запись-метку и повторно запустить установщик для обновления концентратора данных с новым именем пользователя и паролем.  
3.  Перезапустите невыполненное задание или выполните задание вспомогательных индексов для диапазона дат 5-7 дней и проверьте, успешно ли задано задание.

### <a name="sentinel-server-refused-connection"></a>Сервер Sentinel отклонил подключение 

**Сообщение об ошибке задания**:

Сервер отклонил подключение в: http://172.30.175.69:8983/solr/dhus 

**Корректирующее действие**. Эта проблема может возникать, если на сервере Sentinel выполняются какие бы то ни было действия по обслуживанию. 
1.  Если какое-либо задание или конвейер завершилось сбоем по причине указанной выше причины, повторно отправьте задание через некоторое время. 
2.  Пользователь может посетить https://scihub.copernicus.eu/news/, чтобы проверить сведения о запланированных и незапланированных действиях по обслуживанию Sentinel.  
3.  Перезапустите невыполненное задание или выполните задание вспомогательных индексов для диапазона дат 5-7 дней и проверьте, успешно ли задано задание.


## <a name="collect-logs-manually"></a>Собирайте журналы вручную

[Установка и развертывание]( https://docs.microsoft.com/azure/vs-azure-tools-storage-manage-with-storage-explorer?tabs=windows) в обозреватель службы хранилища Azure.

### <a name="how-to-collect-data-hub-adf-job-logs"></a>Как получить журналы заданий ADF в концентраторе данных
1. Вход в https://portal.azure.com
2. В текстовом поле **поиска** найдите группу ресурсов центра данных фармбеатс.

    > [!NOTE]
    > Выберите группу ресурсов центра данных, которая была указана во время развертывания Фармбеатс.

На панели мониторинга группы ресурсов найдите учетную запись хранения (датахублогс...). Например, датахублогсмвксмк  

1.  Выберите учетную запись хранения в столбце **имя** , чтобы просмотреть панель мониторинга **учетной записи хранения** .
2.  На странице (датахубблогс...) выберите **Открыть в обозревателе** , чтобы просмотреть **открытое приложение обозреватель службы хранилища Azure** .
3.  На левой панели (датахубблогс...), **контейнерах больших двоичных объектов**выберите **задания — журналы**.
4.  На вкладке **задания — журналы** выберите **загрузить**.
5.  Выберите расположение для скачивания журналов в локальную папку на компьютере.
6.  Отправить скачанный ZIP-файл по электронной почте farmbeatssupport@microsoft.com

    ![Перебивает ферму проекта](./media/troubleshooting-farmbeats/collecting-logs-manually-1.png)

### <a name="how-to-collect-accelerator-adf-job-logs"></a>Как получить журналы заданий в файле ускорителя

1.  Вход в https://portal.azure.com
2.  В текстовом поле **поиска** найдите группу ресурсов ускорителя фармбеатс.

    > [!NOTE]
    > Выберите группу ресурсов ускорителя, которая была указана во время развертывания Фармбеатс.

3.  В панели мониторинга группы ресурсов найдите хранилище... Учетная запись хранения. Например, storagedop4k
4.  Выберите учетную запись хранения в столбце **имя** , чтобы просмотреть панель мониторинга учетной записи хранения.
5.  На странице (хранилище...) выберите **Открыть в обозревателе** , чтобы открыть приложение обозреватель службы хранилища Azure.
6.  На левой панели < хранилище....), **контейнеры больших двоичных объектов**, выберите **журналы заданий**.
7.  На вкладке **задания — журналы** выберите **загрузить**.
8.  Выберите расположение для скачивания журналов в локальную папку на компьютере.
9.  Отправить скачанный ZIP-файл по электронной почте farmbeatssupport@microsoft.com


### <a name="how-to-collect-data-hub-app-service-logs"></a>Как получить журналы службы приложений концентратора данных

1.  Вход в https://portal.azure.com
2.  В текстовом поле **поиска** найдите группу ресурсов центра данных фармбеатс.

    > [!NOTE]
    > Выберите группу ресурсов центра данных, которая была указана во время развертывания Фармбеатс.

3.  В группе ресурсов найдите учетную запись хранения (датахублогс...). Например, датахублогсмвксмк
4.  Выберите учетную запись хранения в столбце **имя** , чтобы просмотреть панель мониторинга **учетной записи хранения** .
5.  На странице (датахубблогс...) выберите **Открыть в обозревателе** , чтобы просмотреть **открытое приложение обозреватель службы хранилища Azure** .
6.  На левой панели (датахубблогс....), **контейнерах больших двоичных объектов**выберите appinsights-logs.
7.  На вкладке appinsights-logs (журналы) выберите **Download (скачать**).
8.  Выберите путь для скачивания журналов в локальную папку на компьютере.
9.  Отправить скачанную папку по электронной почте farmbeatssupport@microsoft.com

### <a name="how-to-collect-accelerator-app-service-logs"></a>Как получить журналы службы приложений ускорителя

1.  Вход в https://portal.azure.com
2.  В области **поиска**найдите группу ресурсов ускорителя фармбеатс.

    > [!NOTE]
    > Выберите группу ресурсов ускорителя Фармбеатс, которая предоставляется во время развертывания Фармбеатс.

3.  В группе ресурсов найдите учетную запись хранения (хранилище...). Например, storagedop4k
4.  Выберите учетную запись хранения в столбце **имя** , чтобы просмотреть панель мониторинга **учетной записи хранения** .
5.  На странице (хранилище...) выберите **Открыть в обозревателе** , чтобы **открыть приложение обозреватель службы хранилища Azure** .
6.  На левой панели (хранилище....), **контейнерах больших двоичных объектов**выберите appinsights-logs.
7.  На вкладке appinsights-logs (журналы) выберите **Download (скачать**).
8.  Выберите расположение для скачивания журналов в локальную папку на компьютере.
9.  Отправить скачанную папку по электронной почте farmbeatssupport@microsoft.com

## <a name="known-issues"></a>Известные проблемы

## <a name="batch-related-issues"></a>Проблемы, связанные с пакетами

**Ошибка**: достигнута квота на региональные учетные записи пакетной службы для указанной подписки.

**Корректирующее действие**: Увеличьте квоту или удалите неиспользуемые учетные записи пакетной службы и повторно запустите развертывание.

### <a name="azure-active-directory-related-issues"></a>Azure Active Directory связанные проблемы

**Ошибка**: не удалось обновить обязательные параметры для Azure AD App d41axx40-xx21-4fbd-8xxf-97Xxx9e2xxc0: недостаточно прав для завершения операции. Убедитесь, что указанные выше параметры правильно настроены для Azure AD App.

**Это означает**, что конфигурация регистрации приложения Azure AD не была выполнена должным образом.  

**Корректирующее действие**. обратитесь к ИТ-администратору (у которого есть доступ на чтение клиента), чтобы использовать наш [сценарий](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect/tree/master/AppCreationScripts) для создания регистрации приложения Azure AD. Этот сценарий также будет автоматически выполнять действия по настройке.

**Ошибка**: не удалось создать новое приложение Active Directory "думминаме" в этом клиенте: другой объект с таким же значением для URI идентификатора свойства уже существует

**Значение**. Регистрация приложения Azure AD с таким именем уже существует.

**Корректирующее действие**. Удалите существующую регистрацию приложения Azure AD или повторно используйте ее для установки. Если вы повторно используете существующую службу Azure AD, передайте идентификатор приложения и секрет клиента в установщик и повторно разверните его.

## <a name="inputjson-related-issues"></a>Проблемы, связанные с входными данными. JSON

**Ошибка при** чтении входных данных из файла input. JSON

**Корректирующее действие**. Эта проблема в основном возникает из-за пропуска указания правильного входного пути или имени JSON для установщика. Внесите соответствующие исправления и повторите попытку развертывания.

**Ошибка при анализе входных данных JSON**

**Действие по исправлению**: Эта проблема в основном возникает из-за неверных значений во входном файле JSON. Внесите соответствующие исправления и повторите попытку развертывания.

## <a name="high-cpu-usage"></a>Высокая загрузка ЦП

**Ошибка**. Вы получаете оповещение по электронной почте, которое ссылается на оповещение о высокой загрузке ЦП. 

**Корректирующее действие**: 
1.  Перейдите в группу ресурсов центра данных Фармбеатс.
2.  Выберите службу приложений.  
3.  Перейдите к разделу Увеличение масштаба (план службы приложений) и выберите соответствующую [ценовую категорию](https://azure.microsoft.com/pricing/details/app-service/windows/) .

## <a name="next-steps"></a>Дополнительная информация

Если вы по-прежнему сталкиваетесь с проблемами, свяжитесь с нами на нашем [форуме поддержки](https://social.msdn.microsoft.com/Forums/home?forum=ProjectFarmBeats).
