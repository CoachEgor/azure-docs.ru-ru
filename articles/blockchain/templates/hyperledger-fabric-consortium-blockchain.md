---
title: Сеть консорциума Hyperledger Fabric в Azure
description: Шаблон решения для развертывания и настройки сети консорциума Hyperledger Fabric
services: azure-blockchain
keywords: ''
author: PatAltimore
ms.author: patricka
ms.date: 05/09/2019
ms.topic: article
ms.service: azure-blockchain
ms.reviewer: caleteet
manager: femila
ms.openlocfilehash: 80de4e1479fac7296889e45289a5f20e586e3f57
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "65510753"
---
# <a name="hyperledger-fabric-consortium-network"></a>Сеть консорциума Hyperledger Fabric

Вы можете использовать шаблон решения консорциума Hyperledger Fabric для развертывания и настройки сети консорциума Hyperledger Fabric в Azure.

После прочтения этой статьи вы узнаете:

- о работе с блокчейном, Hyperledger Fabric и более сложными сетевыми архитектурами консорциума;
- о развертывании и настройке сети консорциума Hyperledger Fabric на портале Azure.

## <a name="about-blockchain"></a>Сведения о технологии Блокчейн

Для тех, кто не знаком с блокчейн-сообществом, этот шаблон решения станет отличной возможностью познакомиться с этой технологией в простой и настраиваемой среде Azure. Блокчейн — базовая технология системы Биткойн, однако это гораздо больше, чем просто средство для виртуальной валюты. Он представляет собой составную часть существующей базы данных, распределенной системы и криптографических технологий, которая обеспечивает безопасное вычисление с несколькими участниками, гарантиями по неизменяемости, проверяемости и устойчивости к атакам. В разных протоколах применяются разные механизмы для предоставления этих атрибутов. [Hyperledger Fabric](https://github.com/hyperledger/fabric) является одним из таких протоколов.

## <a name="consortium-architecture-on-azure"></a>Архитектура консорциума в Azure

Чтобы включить Hyperledger Fabric в Azure, нужно применить один из двух основных поддерживаемых типов развертывания. Эти типы развертывания предназначены для размещения различных топологий, использование которых зависит от цели.

- **Одна виртуальная машина, сервер разработчика** — этот тип развертывания разработан как среда разработки, используемая для создания и тестирования решений, созданных в Hyperledger Fabric.
- **Несколько виртуальных машин, масштабное развертывание** — этот тип развертывания предназначен для сред, которые моделируют консорциум различных участников, использующих общую среду.

В любом развертывании стандартные блоки, которые формируют основу Hyperledger Fabric, одинаковы.  Различие развертываний состоит в том, как эти компоненты масштабируются.

- **Узел ЦС**. Узел, на котором работает центр сертификации, формирующий сертификаты, используемые для удостоверений в сети.
- **Организующий узел**. Узел, на котором работает служба связи, реализующая гарантию доставки, такую ​​как передача общего порядка или атомарные транзакции.
- **Одноранговый узел**. Узел, который совершает транзакции и поддерживает состояние и копию распределенного реестра.
- **Узел CouchDB**. Узел, на котором может выполняться служба CouchDB, способная хранить базу данных состояний и предоставлять расширенные запросы данных chaincode, позволяя расширять данные в простом формате пар "ключ — значение" до хранилища типа JSON.

### <a name="single-virtual-machine-architecture"></a>Архитектура с одной виртуальной машиной

Как упоминалось ранее, архитектура с одной виртуальной машиной создана, чтобы предоставить разработчикам сервер c небольшой занимаемой памятью для использования с целью разработки приложений. Все показанные контейнеры выполняются на одной виртуальной машине. Служба упорядочивания использует [SOLO](https://github.com/hyperledger/fabric/tree/master/orderer) для этой конфигурации. Это *не* отказоустойчивая служба упорядочивания, но она компактная и создана специально для целей разработки.

![Архитектура с одной виртуальной машиной](./media/hyperledger-fabric-consortium-blockchain/hlf-single-arch.png)

### <a name="multiple-virtual-machine-architecture"></a>Архитектура с несколькими виртуальными машинами

Масштабируемая архитектура с несколькими виртуальными машинами обеспечивает высокий уровень доступности и возможность масштабирования каждого основного составляющего компонента. Эта архитектура гораздо более подходит для развертываний в рабочей среде.

![Архитектура с несколькими виртуальными машинами](./media/hyperledger-fabric-consortium-blockchain/hlf-multi-arch.png)

## <a name="getting-started"></a>Приступая к работе

Чтобы приступить к работе, вам понадобится подписка Azure, которая может поддерживать развертывание нескольких виртуальных машин и стандартные учетные записи хранения. Если у вас еще нет ее, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/).

Оформив подписку, перейдите на [портал Azure](https://portal.azure.com). Выберите **Создать ресурс > Блокчейн > Hyperledger Fabric Consortium**.

![Шаблон блокчейна с одним участником Hyperledger Fabric в Marketplace](./media/hyperledger-fabric-consortium-blockchain/marketplace-template.png)

## <a name="deployment"></a>Развертывание

В шаблоне **Hyperledger Fabric Consortium** выберите **Создать**.

Шаблон развертывания поможет вам выполнить настройку многоузловой сети [Hyperledger 1.3](https://hyperledger-fabric.readthedocs.io/en/release-1.3/). Процесс развертывания состоит из четырех шагов: предоставление основных сведений, указание параметров сети консорциума, конфигурация Fabric и настройка дополнительных компонентов.

### <a name="basics"></a>Основы

В колонке **Основные сведения** укажите значения стандартных параметров, используемые для любого развертывания. Сюда относятся подписка, группа ресурсов и базовые свойства виртуальной машины.

![Основы](./media/hyperledger-fabric-consortium-blockchain/basics.png)

| Имя параметра | Описание | Допустимые значения |
|---|---|---|
**Resource prefix** (Префикс ресурса) | Префикс имени для ресурсов, подготовленных как часть развертывания |6 знаков или меньше |
**Имя пользователя** | Имя администратора для каждой виртуальной машины, развернутой для этого участника |1–64 знаков |
**Тип проверки подлинности** | Метод аутентификации на виртуальной машине |Пароль или открытый ключ SSH|
**Пароль (тип аутентификации = пароль)** |Пароль учетной записи администратора для каждой развернутой виртуальной машины. Пароль должен содержать три из следующих типов знаков: одна строчная буква, одна прописная буква, одна цифра и один специальный знак<br /><br />Хотя все виртуальные машины изначально имеют одинаковый пароль, вы можете изменить пароль после инициализации|12–72 знаков|
**Ключ SSH ("Тип аутентификации" = "Открытый ключ SSH")** |Ключ защищенной оболочки, используемый для удаленного входа в систему ||
**Подписка** |Подписка, в которую необходимо выполнить развертывание ||
**Группа ресурсов** |Группа ресурсов, куда будет развертываться сеть консорциума ||
**Location** |Регион Azure, в который необходимо развернуть первого участника ||

Нажмите кнопку **ОК**.

### <a name="consortium-network-settings"></a>Параметры сети консорциума

В колонке **Параметры сети** укажите входные данные для создания или присоединения существующей сети консорциума и настройте параметры вашей организации.

![Параметры сети консорциума](./media/hyperledger-fabric-consortium-blockchain/network-settings.png)

| Имя параметра | Описание | Допустимые значения |
|---|---|---|
**Конфигурация сети** |Вы можете создать новую сеть или присоединить имеющуюся. Если вы выберете *Присоединить имеющуюся*, необходимо указать дополнительные значения. |New network (Новая сеть), <br/> "Присоединить имеющуюся" |
**Пароль ЦС HLF** |Пароль, используемый для сертификатов, сформированных центрами сертификации, которые создаются в процессе развертывания. Пароль должен содержать три из следующих типов знаков: одна строчная буква, одна прописная буква, одна цифра и один специальный знак.<br /><br />Хотя все виртуальные машины изначально имеют одинаковый пароль, вы можете изменить пароль после инициализации.|1–25 знаков |
**Настройка организации** |Вы можете указать имя организации и сертификат или использовать значения по умолчанию.|значение по умолчанию <br/> Расширенная |
**Параметры сети VPN** | Подготовка шлюза туннеля VPN для доступа к виртуальным машинам | Да <br/> Нет |

Нажмите кнопку **ОК**.

### <a name="fabric-specific-settings"></a>Параметры, относящиеся к Fabric

В разделе **конфигурации Fabric** настройте параметры размера и производительности сети и укажите данные, связанные с доступностью сети. Например, количество организующих и одноранговых узлов, механизм сохраняемости, используемый каждым узлом, и размер виртуальной машины.

![Параметры Fabric](./media/hyperledger-fabric-consortium-blockchain/fabric-specific-settings.png)

| Имя параметра | Описание | Допустимые значения |
|---|---|---|
**Тип масштабирования** |Тип развертывания одной виртуальной машины с несколькими контейнерами или нескольких виртуальных машин в модели горизонтального масштабирования.|Single VM (Одна виртуальная машина) или Multi VM (Несколько виртуальных машин) |
**Тип диска виртуальной машины** |Тип хранилища, поддерживающий каждый из развернутых узлов. <br/> Дополнительные сведения о типах доступных дисков см. в статье о [типах дисков, доступных в Azure](../../virtual-machines/windows/disks-types.md).|SSD (цен. категория "Стандартный") <br/> SSD (цен. категория "Премиум") |

### <a name="multiple-vm-deployment-additional-settings"></a>Развертывание нескольких виртуальных машин (дополнительные параметры)

![Параметры Fabric для развертывания нескольких виртуальных машин](./media/hyperledger-fabric-consortium-blockchain/multiple-vm-deployment.png)

| Имя параметра | Описание | Допустимые значения |
|---|---|---|
**Количество организующих узлов** |Число узлов, которые упорядочивают (организуют) транзакции в блоки. <br />Дополнительные сведения о службе упорядочивания см. в [документации](https://hyperledger-fabric.readthedocs.io/en/release-1.1/ordering-service-faq.html) Hyperledger. |1–4 |
**Размер виртуальной машины организующего узла** |Размер виртуальной машины, используемый для всех организующих узлов сети|Standard BS,<br />Standard DS,<br />Standard FS |
**Число одноранговых узлов** | Узлы, принадлежащие участникам консорциума, которые выполняют транзакции и поддерживают состояние и копию реестра.<br />Дополнительные сведения о службе упорядочивания см. в [документации](https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html) Hyperledger.|1–4 |
**Сохранение состояния узла** |Механизм сохраняемости, используемый одноранговыми узлами. Вы можете настроить этот модуль отдельно для каждого однорангового узла. См. приведенные ниже сведения о нескольких одноранговых узлах.|CouchDB <br />LevelDB |
**Размер виртуальной машины однорангового узла** |Размер виртуальной машины, используемый для всех узлов сети.|Standard BS,<br />Standard DS,<br />Standard FS |

### <a name="multiple-peer-node-configuration"></a>Настройка нескольких одноранговых узлов

Этот шаблон позволяет выбрать механизм сохраняемости для отдельного однорангового узла. Например, если у вас есть три одноранговых узла, вы можете использовать CouchDB на одном и LevelDB на двух других.

![Настройка нескольких одноранговых узлов](./media/hyperledger-fabric-consortium-blockchain/multiple-peer-nodes.png)

Нажмите кнопку **ОК**.

### <a name="deploy"></a>Развертывание

В разделе **Сводка** просмотрите введенные данные и выполните базовую проверку перед развертыванием.

![Сводка](./media/hyperledger-fabric-consortium-blockchain/summary.png)

Просмотрите юридические и конфиденциальные условия и нажмите кнопку **Приобрести**, чтобы выполнить развертывание. В зависимости от количества предоставляемых виртуальных машин время развертывания может варьироваться от нескольких минут до десятков минут.

## <a name="next-steps"></a>Дальнейшие действия

Теперь вы можете сосредоточиться на разработке приложений и сетевого кода в сети блокчейна консорциума Hyperledger.
