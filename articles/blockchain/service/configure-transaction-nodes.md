---
title: Настройте узлы транзакций Azure Blockchain Service
description: Как настроить узлы транзакций Azure Blockchain Service
ms.date: 11/20/2019
ms.topic: article
ms.reviewer: janders
ms.openlocfilehash: 4a9a4f660dd171e65b600ec4cd66714ca476b091
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79252263"
---
# <a name="configure-azure-blockchain-service-transaction-nodes"></a>Настройте узлы транзакций Azure Blockchain Service

Узлы транзакций используются для отправки транзакций блокчейна в Azure Blockchain Service через общедоступную точку. Узла транзакции по умолчанию содержит закрытый ключ учетной записи Ethereum, зарегистрированной на блокчейне, и как таковой не может быть удален.

Для просмотра сведений о узлах узла транзакции по умолчанию:

1. Войдите на [портал Azure](https://portal.azure.com).
1. Перейдите в область участника службы "Блокчейн Azure". Выберите **узлы транзакций**.

    ![Выбор узла транзакций по умолчанию](./media/configure-transaction-nodes/nodes.png)

    Детали обзора включают адреса общедоступных конечных точек и открытый ключ.

## <a name="create-transaction-node"></a>Создание узла транзакций

Вы можете добавить до девяти дополнительных узлов транзакции к вашему участнику блокчейна, в общей сложности 10 узлов транзакций. Добавляя узлы транзакций, можно увеличить масштабируемость или распределить нагрузку. Например, можно иметь конечную точку узла транзакций для различных клиентских приложений.

Для добавления узла транзакции:

1. На портале Azure перейдите к своему члену Службы блокчейн Azure и выберите **узлы транзакций > добавить.**
1. Заполните настройки нового узла транзакции.

    ![Добавление узла транзакции](./media/configure-transaction-nodes/add-node.png)

    | Параметр | Описание |
    |---------|-------------|
    | name | Имя узла транзакций. Имя, используемое при создании адреса DNS для конечной точки узла транзакций. Например, `newnode-myblockchainmember.blockchain.azure.com`. Имя узла не может быть изменено после его создания. |
    | Пароль | Установите надежный пароль. Используйте пароль для доступа к конечной точке узла транзакции с базовой аутентификацией.

1. Выберите **Создать**.

    Подготовка нового узла транзакций занимает около 10 минут. Дополнительные узлы транзакций несут затраты. Для получения дополнительной информации о затратах [см.](https://aka.ms/ABSPricing)

## <a name="endpoints"></a>Конечные точки

Узлы транзакций имеют уникальное имя DNS и общедоступные конечные точки.

Для просмотра деталей конечных точек узла транзакции:

1. На портале Azure перейдите на один из узлов транзакций участников Azure Blockchain Service и выберите **Обзор.**

    ![Конечные точки](./media/configure-transaction-nodes/endpoints.png)

Конечные точки узла транзакций безопасны и требуют проверки подлинности. Вы можете подключиться к конечной точке транзакции с помощью аутентификации Azure AD, базовой аутентификации HTTPS и с помощью ключа доступа через HTTPS или Websocket по SSL.

### <a name="azure-active-directory-access-control"></a>Контроль доступа к активному каталогу Azure

Конечные точки транзакций Azure Blockchain Service поддерживают аутентификацию Azure Active Directory (Azure AD). Вы можете предоставить пользователю Azure AD, группе и основным службам доступ к своей конечной точке.

Чтобы предоставить контроль доступа Azure AD к вашей конечной точке:

1. На портале Azure перейдите к своему члену Azure Blockchain Service и выберите **узлы транзакций > элемент управления доступом (IAM) > Добавить > добавить ролевую задачу.**
1. Создайте новое назначение ролей для пользователя, группы или руководителя службы (функции приложений).

    ![Добавить роль IAM](./media/configure-transaction-nodes/add-role.png)

    | Параметр | Действие |
    |---------|-------------|
    | Роль | Выберите **владельца,** **участника**или **читателя**.
    | Назначение доступа для | Выберите **пользователя Azure AD, группу или основной сервис.**
    | Выберите пункт | Поиск пользователя, группы или основного обслуживания, который вы хотите добавить.

1. Выберите **Сохранить,** чтобы добавить назначение роли.

Для получения дополнительной информации о контроле доступа Azure AD [см. Управление доступом к ресурсам Azure с помощью RBAC и портала Azure](../../role-based-access-control/role-assignments-portal.md)

Для получения подробной информации о том, как подключиться с помощью проверки подлинности Azure AD, [можно подключиться к узелу с помощью аутентификации AAD.](configure-aad.md)

### <a name="basic-authentication"></a>обычная проверка подлинности

Для базовой аутентификации HTTPS имя пользователя и учетные данные паролей передаются в заголовке запроса HTTPS в конечную точку.

Основные данные точки проверки подлинности узла транзакции можно просмотреть на портале Azure. Перейдите к одному из узлов транзакций участников Azure Blockchain Service и выберите **базовую аутентификацию** в настройках.

![обычная проверка подлинности](./media/configure-transaction-nodes/basic.png)

Имя пользователя — это имя вашего узла, которое не может быть изменено.

Чтобы использовать URL, \<\> замените пароль набором паролей при подготовке узла. Вы можете обновить пароль, выбрав **пароль спрозана.**

### <a name="access-keys"></a>Ключи доступа

Для проверки подлинности ключа доступа ключ включен в URL-адрес конечных точек. При создании узла транзакции генерируются два ключа доступа. Для проверки подлинности можно использовать ключ доступа. Два ключа позволяют изменять и вращать клавиши.

Можно просмотреть ключевые данные узла транзакции и скопировать адреса конечных точек, включающие ключи доступа. Перейдите к одному из узлов транзакций участников Azure Blockchain Service и выберите **ключи доступа** в настройках.

### <a name="firewall-rules"></a>Правила брандмауэра

Правила брандмауэра позволяют ограничить IP-адреса, которые могут попытаться проверить подлинность вашего узла транзакции.  Если для узла транзакций не настроены правила брандмауэра, доступ к нему не может быть установлен ни одной из сторон.  

Чтобы просмотреть правила брандмауэра узла транзакции, перейдите на один из узлов транзакции участников службы блокчейн Azure Blockchain Service и выберите **правила Брандмауэра** в настройках.

Правила брандмауэра можно добавить, введя имя правила, зайдя на IP-адрес и закончив IP-адрес в сетке **правил Firewall.**

![Правила брандмауэра](./media/configure-transaction-nodes/firewall-rules.png)

Для включения:

* **Единый IP-адрес:** Наверстудивать один и тот же IP-адрес для начинающих и заканчивающихся IP-адресов.
* **Диапазон IP-адресов:** Наверстой нойид ировать диапазон запускаить и заканчивающийся IP-адрес. Например, диапазон, начинающееся с 10.221.34.0 и заканчивающийся на 10.221.34.255, позволит всей 10.221.34.xxx подсети.
* **Разрешить все IP-адреса:** Назначь стартовый IP-адрес до 0.0.0.0 и окончание IP-адреса до 255.255.255.

## <a name="connection-strings"></a>Строки подключения

Синтаксис строки подключения для вашего узла транзакций предусмотрен для базовой аутентификации или использования ключей доступа. Предусмотрены строки подключения, включая клавиши доступа через HTTPS и WebSockets.

Можно просмотреть строки соединения узла транзакции и скопировать адреса конечных точек. Перейдите к одному из узлов транзакций участников Azure Blockchain Service и выберите **строки соединения** в настройках.

![Строки подключения](./media/configure-transaction-nodes/connection-strings.png)

## <a name="sample-code"></a>Образец кода

Образец кода предоставляется для быстрого подключения к узлу транзакций через Web3, Nethereum, Web3js и Трюфель.

Можно просмотреть пример кода соединения узла транзакции и скопировать его для использования с помощью популярных инструментов разработчика. Перейдите на один из узлов транзакций участников Azure Blockchain Service и выберите **пример кода** в настройках.

Выберите вкладку Web3, Nethereum, Truffle или Web3j для просмотра образца кода, который вы хотите использовать.

![Образец кода](./media/configure-transaction-nodes/sample-code.png)

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Настройка узлов транзакций с помощью Azure CLI](manage-cli.md)
