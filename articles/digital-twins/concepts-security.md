---
title: Безопасность для решений Azure Digital Twins
titleSuffix: Azure Digital Twins
description: Ознакомьтесь с рекомендациями по обеспечению безопасности в Azure Digital двойников.
author: baanders
ms.author: baanders
ms.date: 3/18/2020
ms.topic: conceptual
ms.service: digital-twins
ms.openlocfilehash: 0f1f9e17646c4432d9c1103b3c579fc6bb0d2f13
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85833170"
---
# <a name="secure-azure-digital-twins-with-role-based-access-control"></a>Защита цифровых двойников Azure с помощью управления доступом на основе ролей

В целях безопасности Azure Digital двойников обеспечивает точный контроль доступа к определенным данным, ресурсам и действиям в развертывании. Это достигается за счет детальной стратегии управления ролями и разрешениями, называемой управлением **доступом на основе ролей (RBAC)**. Общие принципы RBAC для Azure можно прочитать [здесь](../role-based-access-control/overview.md).

## <a name="rbac-through-azure-ad"></a>RBAC через Azure AD

RBAC предоставляется в Azure Digital двойников через интеграцию с [Azure Active Directory](../active-directory/fundamentals/active-directory-whatis.md) (Azure AD).

RBAC можно использовать для предоставления разрешений *субъекту безопасности*, который может быть пользователем, группой или субъектом-службой приложения. Проверка подлинности субъекта безопасности осуществляется с помощью Azure AD и получение маркера OAuth 2,0 в возврате. Этот токен можно использовать для авторизации запроса доступа к экземпляру Digital двойников Azure.

## <a name="authentication-and-authorization"></a>Аутентификация и авторизация

В Azure AD доступ состоит из двух этапов. Когда участник безопасности (пользователь, группа или приложение) пытается получить доступ к Azure Digital двойников, запрос должен пройти *проверку подлинности* и *авторизоваться*. 

1. Во-первых, удостоверение субъекта безопасности *проходит проверку подлинности*и возвращается маркер OAuth 2,0.
2. Затем маркер передается как часть запроса в службу Digital двойников, чтобы *авторизовать* доступ к указанному ресурсу.

Этап проверки подлинности требует, чтобы любой запрос приложения содержал маркер доступа OAuth 2,0 во время выполнения. Если приложение выполняется в сущности Azure, например в приложении " [функции Azure](../azure-functions/functions-overview.md) ", оно может использовать **управляемое удостоверение** для доступа к ресурсам. Дополнительные сведения об управляемых удостоверениях см. в следующем разделе.

Для шага авторизации необходимо, чтобы роль RBAC была назначена субъекту безопасности. Роли, назначенные субъекту безопасности, определяют разрешения, которые будут иметь субъекта. Azure Digital двойников предоставляет роли RBAC, охватывающие наборы разрешений для ресурсов Digital двойников в Azure. Эти роли описаны далее в этой статье.

Дополнительные сведения о ролях и назначениях ролей, поддерживаемых в Azure, см. в разделе Общие сведения о [различных ролях](../role-based-access-control/rbac-and-directory-admin-roles.md) в документации по RBAC Azure.

### <a name="authentication-with-managed-identities"></a>Проверка подлинности с помощью управляемых удостоверений

[Управляемые удостоверения для ресурсов Azure](../active-directory/managed-identities-azure-resources/overview.md) — это функция кросс-Azure, которая позволяет создать безопасное удостоверение, связанное с развертыванием, в котором выполняется код приложения. Затем это удостоверение можно связать с ролями управления доступом, чтобы предоставить настраиваемые разрешения на доступ к конкретным ресурсам Azure, которые требуются вашему приложению.

С помощью управляемых удостоверений платформа Azure управляет этим идентификатором среды выполнения. Ключи доступа не нужно хранить и защищать в коде приложений или конфигурации ни для удостоверения, ни для ресурсов, к которым необходимо получить доступ. Клиентское приложение Azure Digital двойников, работающее в приложении службы приложений Azure, не обязано выполнять обработку правил и ключей SAS, а также других маркеров доступа. Клиентскому приложению требуется только адрес конечной точки пространства имен Azure Digital двойников. При подключении приложения Azure Digital двойников привязывает контекст управляемого объекта к клиенту. После связывания с управляемым удостоверением клиент Azure Digital двойников сможет выполнять все разрешенные операции. Затем авторизация будет предоставляться путем связывания управляемого объекта с ролью Azure Digital двойников RBAC (как описано ниже).

### <a name="authorization-rbac-roles-for-azure-digital-twins"></a>Авторизация: роли RBAC для цифрового двойников Azure

Azure предоставляет следующие встроенные роли RBAC для авторизации доступа к ресурсу Digital двойников Azure:
* Владелец цифрового двойников Azure (Предварительная версия). Используйте эту роль, чтобы предоставить полный доступ через цифровые двойников ресурсы Azure.
* Средство чтения цифровых двойников Azure (Предварительная версия). Используйте эту роль, чтобы предоставить доступ только для чтения к ресурсам Digital двойников для Azure.

> [!TIP]
> Теперь роль Azure Digital двойников Reader (Предварительная версия) также поддерживает отношения просмотра.

Дополнительные сведения о том, как определяются встроенные роли, см. в разделе Описание [определений ролей](../role-based-access-control/role-definitions.md) в документации по методу RBAC Azure. Сведения о создании настраиваемых ролей RBAC см. в статье [пользовательские роли для ресурсов Azure](../role-based-access-control/custom-roles.md).

Назначить роли можно двумя способами.
* с помощью панели управления доступом (IAM) для Azure Digital двойников в портал Azure (см. раздел [Добавление и удаление назначений ролей с помощью Azure RBAC и портал Azure](../role-based-access-control/role-assignments-portal.md)).
* Добавление или удаление роли с помощью команд интерфейса командной строки

Дополнительные сведения о том, как это сделать, см. в [учебнике по цифровым двойников Azure: подключение комплексного решения](tutorial-end-to-end.md).

## <a name="permission-scopes"></a>Области разрешений

Прежде чем назначить роль RBAC субъекту безопасности, определите область доступа, которую должен иметь субъект безопасности. Рекомендации определяют, что лучше всего предоставить только минимально возможную область.

В следующем списке описываются уровни, на которых можно ограничить доступ к ресурсам Digital двойников.
* Модели. действия для этого ресурса определяют управление [моделями](concepts-models.md) , отправленными в Azure Digital двойников.
* Запрос Digital двойников Graph. действия для этого ресурса определяют возможность выполнения [операций запросов](concepts-query-language.md) на цифровой двойников в цифровом графе Azure Digital двойников.
* Digital двойника. действия для этого ресурса обеспечивают управление операциями CRUD в [цифровом двойников](concepts-twins-graph.md) в графе двойника.
* Отношение Digital двойника. действия для этого ресурса определяют управление операциями CRUD над [связями](concepts-twins-graph.md) между цифровыми двойниковми в двойника графе.
* Маршрут события. действия для этого ресурса определяют разрешения на [маршрутизацию событий](concepts-route-events.md) из Azure Digital двойников в службу конечной точки, например [концентратор событий](../event-hubs/event-hubs-about.md), службу " [Сетка событий](../event-grid/overview.md)" или [служебную шину](../service-bus-messaging/service-bus-messaging-overview.md).

## <a name="next-steps"></a>Дальнейшие шаги

* Ознакомьтесь с примером клиентского приложения в разделе Пошаговое руководство [. Проверка подлинности клиентского приложения](how-to-authenticate-client.md).

* Подробнее о [RBAC для Azure](../role-based-access-control/overview.md).
