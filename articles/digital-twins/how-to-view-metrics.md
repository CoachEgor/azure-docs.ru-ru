---
title: Просмотр метрик с помощью Azure Monitor
titleSuffix: Azure Digital Twins
description: См. статью как просмотреть метрики цифровых двойников Azure в Azure Monitor.
author: baanders
ms.author: baanders
ms.date: 7/24/2020
ms.topic: how-to
ms.service: digital-twins
ms.openlocfilehash: c6db571d64b0fd276519f15a3984848e80c4e18a
ms.sourcegitcommit: 5b8fb60a5ded05c5b7281094d18cf8ae15cb1d55
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/29/2020
ms.locfileid: "87387682"
---
# <a name="view-and-understand-azure-digital-twins-metrics"></a>Просмотр и изучение метрик Azure Digital двойников

Эти метрики предоставляют сведения о состоянии ресурсов Azure Digital двойников в подписке Azure. Метрики Azure Digital двойников помогают оценить общую работоспособность службы цифровых двойников Azure и подключенных к ней ресурсов. Эти статистические данные позволяют увидеть, что происходит с цифровым двойников Azure и помогает выполнять анализ основных причин проблем без необходимости обращения в службу поддержки Azure.

Метрики включены по умолчанию. Метрики цифровых двойников Azure можно просмотреть на [портал Azure](https://portal.azure.com).

## <a name="how-to-view-azure-digital-twins-metrics"></a>Как просмотреть метрики цифровых двойников Azure

1. Создайте экземпляр Digital двойников для Azure. Инструкции по настройке экземпляра Digital двойников для Azure см. в разделе [*как настроить экземпляр и проверку подлинности*](how-to-set-up-instance-scripted.md).

2. Найдите свой экземпляр Azure Digital двойников в [портал Azure](https:/portal.azure.com) (для него можно открыть страницу, введя его имя в строке поиска портала). 

    В меню экземпляра выберите **метрики**.
   
    :::image type="content" source="media/how-to-view-metrics/azure-digital-twins-metrics.png" alt-text="Снимок экрана со страницей "метрики" для Azure Digital двойников":::

    На этой странице отображаются метрики для вашего экземпляра Azure Digital двойников. Вы также можете создать настраиваемые представления метрик, выбрав из списка нужные сведения.
    
3. Вы можете отправить данные метрик в конечную точку концентраторов событий или учетную запись хранения Azure, щелкнув **параметры диагностики** в меню, а затем **добавив параметр диагностики**.

    :::image type="content" source="media/how-to-view-metrics/diagnostic-settings.png" alt-text="Снимок экрана со страницей параметров диагностики и кнопкой "Добавить"":::

    Дополнительные сведения об этом процессе см. в разделе [*Устранение неполадок: Настройка диагностики*](troubleshoot-diagnostics.md).

## <a name="azure-digital-twins-metrics-and-how-to-use-them"></a>Метрики цифровых двойников Azure и способы их использования

Azure Digital двойников предоставляет несколько метрик, которые позволяют получить общие сведения о работоспособности экземпляра и связанных с ним ресурсах. Можно также объединить сведения из нескольких метрик, чтобы закрасить более крупную картину состояния экземпляра. 

В следующих таблицах описываются метрики каждого экземпляра Azure Digital двойников и сведения о том, как каждая метрика связана с общим состоянием вашего экземпляра.

#### <a name="api-request-metrics"></a>Метрики запросов API

Метрики, относящиеся к запросам API:

| Метрика | Отображаемое имя метрики | Единица измерения | Тип агрегирования| Описание | Измерения |
| --- | --- | --- | --- | --- | --- |
| апирекуестс | Запросы API (Предварительная версия) | Count | Итог | Число запросов API, выполненных для операций чтения, записи, удаления и запроса цифровых двойников. |  Аутентификация </br>Операция </br>Протокол </br>Код состояния </br>Класс кода состояния </br>Текст состояния |
| апирекуестслатенци | Задержка запросов API (Предварительная версия) | Миллисекунды | Среднее | Время ответа для запросов API. Это относится к времени получения запроса службой Azure Digital двойников до тех пор, пока служба не отправит результат успешного или неуспешного выполнения для цифровых двойников операций чтения, записи, удаления и запроса. | Аутентификация </br>Операция </br>Протокол |
| апирекуестсфаилурерате | Частота сбоев запросов API (Предварительная версия) | Процент | Среднее | Процент запросов API, получаемых службой для экземпляра, который предоставляет код ответа внутренней ошибки (500) для операций чтения, записи, удаления и выполнения запросов Digital двойников. | Аутентификация </br>Операция </br>Протокол </br>Код состояния </br>Класс кода состояния </br>Текст состояния

#### <a name="routing-metrics"></a>Метрики маршрутизации

Метрики, относящиеся к маршрутизации:

| Метрика | Отображаемое имя метрики | Единица измерения | Тип агрегирования| Описание | Измерения |
| --- | --- | --- | --- | --- | --- |
| Маршрутизация | Маршрутизация (Предварительная версия) | Count | Итог | Количество сообщений, направляемых в службу Azure конечной точки, например концентратор событий, служебную шину или службу "Сетка событий". | Операция </br>Результат |
| раутинглатенци | Задержка маршрутизации (Предварительная версия) | Миллисекунды | Среднее | Время, прошедшее с момента отправки события из Azure Digital двойников в, когда оно отправляется в конечную службу Azure, например концентратор событий, служебную шину или службу "Сетка событий". | Операция </br>Результат |
| раутингфаилурерате | Частота сбоев маршрутизации (Предварительная версия) | Процент | Среднее | Процент событий, которые приводят к ошибке при их маршрутизации из Azure Digital двойников в службу Azure Endpoint Service, например концентратор событий, служебную шину или службу "Сетка событий". | Операция </br>Результат |

#### <a name="billing-metrics"></a>Метрики выставления счетов

Метрики, относящиеся к выставлению счетов:

>[!NOTE]
> На этапе предварительной версии **выставление счетов имеет нулевую стоимость**. Хотя эти метрики по-прежнему отображаются в списке выбора, они не применяются во время предварительной версии и остаются равными нулю до тех пор, пока служба не будет перемещена в режим предварительной версии.

| Метрика | Отображаемое имя метрики | Единица измерения | Тип агрегирования| Описание | Измерения |
| --- | --- | --- | --- | --- | --- |
| биллингапиоператионс | Операции API выставления счетов (Предварительная версия) | Count | Итог | Метрика выставления счетов за количество всех запросов API, выполненных в службе Digital двойников. | `MeterId` |
| биллингкуерюнитс | Единицы запросов выставления счетов (Предварительная версия) | Count | Итог | Количество единиц запросов, вычисленное внутренне измерение использования ресурсов службы, которое используется для выполнения запросов. Также доступен вспомогательный API для измерения единиц запросов: [Куеричаржехелпер Class](https://docs.microsoft.com/dotnet/api/azure.digitaltwins.core.querychargehelper?view=azure-dotnet-preview) | `MeterId` |
| биллингмессажеспроцессед | Обработанные сообщения о выставлении счетов (Предварительная версия) | Count | Итог | Метрика выставления счетов за количество сообщений, отправленных из Azure Digital двойников во внешние конечные точки. | `MeterId` |

## <a name="dimensions"></a>Измерения

Измерения помогают определить дополнительные сведения о метриках. Некоторые метрики маршрутизации предоставляют сведения для каждой конечной точки. В таблице ниже перечислены возможные значения для этих измерений.

| Измерение | Значения |
| --- | --- |
| Аутентификация | OAuth |
| Операция (для запросов API) | Microsoft. Дигиталтвинс/дигиталтвинс/Delete</br>Microsoft. Дигиталтвинс/дигиталтвинс/запись</br>Microsoft. Дигиталтвинс/дигиталтвинс/Read </br>Microsoft. Дигиталтвинс/евентраутес/Read </br>Microsoft. Дигиталтвинс/евентраутес/запись </br>Microsoft. Дигиталтвинс/евентраутес/Delete </br>Microsoft. Дигиталтвинс/Models/Read </br>Microsoft. Дигиталтвинс/Models/Write </br>Microsoft. Дигиталтвинс/Models/Delete </br>Microsoft. Дигиталтвинс/запрос/действие |
Операция (для маршрутизации) | Сетка событий Azure </br>Концентратор событий </br>Служебная шина |
| Протокол | HTTPS |
| Результат | Успешно </br>Failure |
| Код состояния | 200, 404, 500 и т. д. |
| Класс кода состояния | 2xx, 4xx, 5xx и т. д. |
| Текст состояния | Внутренняя ошибка сервера, не найдена и т. д. |

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения об управлении записанными метриками для цифрового двойников Azure см. в разделе [*Устранение неполадок: Настройка диагностики*](troubleshoot-diagnostics.md).

А теперь, когда вы видели общие сведения о метриках цифровых двойников Azure, перейдите по следующим ссылкам, чтобы узнать больше об управлении цифровым двойников Azure.

* [*Практические руководства. Использование API-интерфейсов и пакетов SDK для цифровых двойников Azure*](how-to-use-apis-sdks.md)
* [*Практическое руководство. Управление настраиваемыми моделями*](how-to-manage-model.md).
* [*Практические руководства. Управление цифровыми двойников*](how-to-manage-twin.md)
* [*Руководство. Управление графом двойника с помощью связей*](how-to-manage-graph.md)
* [*Руководство. Управление конечными точками и маршрутами*](how-to-manage-routes.md)