---
title: Известные проблемы — Azure Digital двойников
description: Получите помощь в распознавании и устранении известных проблем с цифровым двойников Azure.
author: baanders
ms.author: baanders
ms.topic: troubleshooting
ms.service: digital-twins
ms.date: 07/14/2020
ms.openlocfilehash: 6f57f801f2270819d4a67a49590f5ba61b32afcb
ms.sourcegitcommit: 2e72661f4853cd42bb4f0b2ded4271b22dc10a52
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/14/2020
ms.locfileid: "92047647"
---
# <a name="known-issues-in-azure-digital-twins"></a>Известные проблемы в службе Digital двойников

В этой статье содержатся сведения об известных проблемах, связанных с Azure Digital двойников.

## <a name="400-client-error-bad-request-in-cloud-shell"></a>"ошибка клиента 400: недопустимый запрос" в Cloud Shell

Команды в Cloud Shell могут периодически завершаться с ошибкой "400 ошибка клиента: неправильный запрос URL-адреса http://localhost:50342/oauth2/token ", за которым следует полная трассировка стека.

В частности, для Azure Digital двойников это влияет на следующие группы команд:
* `az dt route`
* `az dt model`
* `az dt twin`

### <a name="troubleshooting-steps"></a>Действия по устранению неполадок

Это можно устранить путем повторного выполнения `az login` команды в Cloud Shell и выполнения последующих шагов входа. После этого вы сможете выполнить команду повторно.

Альтернативным решением является [установка Azure CLI](/cli/azure/install-azure-cli?view=azure-cli-latest) на компьютере, чтобы можно было выполнять команды Azure CLI локально. В локальной CLI эта проблема не возникает.

### <a name="possible-causes"></a>Возможные причины

Это результат известной проблемы в Cloud Shell: [*Получение маркера от Cloud Shell периодически завершается с ошибкой 400 клиента: неправильный запрос*](https://github.com/Azure/azure-cli/issues/11749).

Это представляет проблему с маркерами проверки подлинности экземпляра Azure Digital двойников и аутентификацией на основе [управляемого удостоверения](../active-directory/managed-identities-azure-resources/overview.md) по умолчанию для Cloud Shell. На этапе устранения неполадок, связанных с `az login` проверкой подлинности с помощью управляемого удостоверения, выполняется пошаговая отладка этой проблемы.

Это не влияет на команды Azure Digital двойников из `az dt` `az dt endpoint` групп команд или, поскольку они используют другой тип маркера проверки подлинности (на основе ARM), который не имеет проблемы с проверкой подлинности управляемого удостоверения Cloud Shell.

## <a name="missing-role-assignment-after-scripted-setup"></a>Отсутствует назначение роли после установки в скрипте

Некоторые пользователи могут столкнуться с проблемами, описанными в разделе "назначение ролей" раздела [*как настроить экземпляр и выполнить проверку подлинности (в сценариях)*](how-to-set-up-instance-scripted.md). Сценарий не указывает на сбой, но роль *владельца Azure Digital двойников (Предварительная версия)* не назначена пользователю, и эта проблема повлияет на возможность создания других ресурсов в дороге.

Чтобы определить, успешно ли настроено назначение роли после выполнения сценария, следуйте инструкциям в разделе [*Проверка назначения роли пользователя*](how-to-set-up-instance-scripted.md#verify-user-role-assignment) статьи Установка. Если пользователь не отображается в этой роли, эта проблема повлияет на вас.

### <a name="troubleshooting-steps"></a>Действия по устранению неполадок

Чтобы устранить эту проблему, можно настроить назначение ролей вручную с помощью интерфейса командной строки или портал Azure. 

Следуйте указаниям, приведенным ниже:
* [CLI](how-to-set-up-instance-cli.md#set-up-user-access-permissions)
* [portal](how-to-set-up-instance-portal.md#set-up-user-access-permissions)

### <a name="possible-causes"></a>Возможные причины

Для пользователей, выполнивших вход с помощью персонального [учетная запись Майкрософт (MSA)](https://account.microsoft.com/account), идентификатор субъекта пользователя, который идентифицирует вас в таких командах, может отличаться от адреса электронной почты пользователя для входа, что затрудняет его обнаружение и использование для правильного назначения роли.

## <a name="issue-with-interactive-browser-authentication"></a>Проблемы с интерактивной проверкой подлинности браузера

При написании кода проверки подлинности в приложениях Azure Digital двойников с помощью версии **1.2.0** **библиотеки [Azure. Identity](/dotnet/api/azure.identity?view=azure-dotnet) **могут возникнуть проблемы с методом [интерактивебровсеркредентиал](/dotnet/api/azure.identity.interactivebrowsercredential?view=azure-dotnet) .

Это не последняя версия библиотеки. Последняя версия — **1.2.2**.

Затронутый метод используется в следующих статьях: 
* [*Руководство. Написание кода для клиентского приложения*](tutorial-code.md)
* [*Пошаговое руководство. Написание кода проверки подлинности приложения*](how-to-authenticate-client.md)
* [*Практические руководства. Использование API-интерфейсов и пакетов SDK для цифровых двойников Azure*](how-to-use-apis-sdks.md)

Эта ошибка включает в себя ответ об ошибке "Azure. Identity. Аусентикатионфаиледексцептион" при попытке аутентификации в окне браузера. Окно браузера может не запуститься полностью или появилось для успешного выполнения проверки подлинности пользователя, в то время как клиентское приложение по-прежнему завершается с ошибкой.

### <a name="troubleshooting-steps"></a>Действия по устранению неполадок

Чтобы устранить эту проблему, обновите приложения для использования `Azure.Identity` версии **1.2.2**. В этой версии библиотеки браузер должен загружаться и проходить проверку подлинности должным образом.

### <a name="possible-causes"></a>Возможные причины

Это связано с открытой проблемой с последней версией `Azure.Identity` библиотеки (версия **1.2.0**): [*сбой проверки подлинности при использовании интерактивебровсеркредентиал*](https://github.com/Azure/azure-sdk-for-net/issues/13940).

Эта проблема возникает при использовании версии **1.2.0** в приложении Digital двойников или при добавлении библиотеки в проект без указания версии (так же, как по умолчанию используется последняя версия).

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о безопасности и разрешениях для Azure Digital двойников:
* [*Основные понятия: безопасность решений для цифровых двойников Azure*](concepts-security.md)