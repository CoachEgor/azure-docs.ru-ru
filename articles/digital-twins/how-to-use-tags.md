---
title: Добавление тегов в цифровые двойников
titleSuffix: Azure Digital Twins
description: См. статью как реализовать Теги на цифровой двойников
author: baanders
ms.author: baanders
ms.date: 7/22/2020
ms.topic: how-to
ms.service: digital-twins
ms.openlocfilehash: 59f68909e2f3704fea5c38e3f1535f5996b284ab
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "87100287"
---
# <a name="add-tags-to-digital-twins"></a>Добавление тегов в цифровые двойников 

Вы можете использовать концепцию тегов, чтобы дополнительно найти и классифицировать свой цифровой двойников. В частности, пользователям может потребоваться реплицировать теги из существующих систем, таких как [теги иголка](https://project-haystack.org/doc/TagModel), в свои экземпляры Azure Digital двойников. 

В этом документе описываются шаблоны, которые можно использовать для реализации тегов в цифровом двойников.

Сначала теги добавляются в качестве свойств в [модели](concepts-models.md) , описывающей цифровой двойника. Затем это свойство задается в двойника, когда оно создается на основе модели. После этого Теги можно использовать в [запросах](concepts-query-language.md) для обнаружения и фильтрации двойников.

## <a name="marker-tags"></a>Теги маркера 

**Тег маркера** — это простая строка, используемая для пометки или классификации цифрового двойникаа, например "Blue" или "Red". Эта строка является именем тега, а теги маркера не имеют осмысленного значения — тег является значимым только его присутствием (или отсутствием). 

### <a name="add-marker-tags-to-model"></a>Добавление тегов маркера в модель 

Теги маркера моделируются в виде [дтдл](https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md) -карт из `string` в `boolean` . Логическое значение `mapValue` игнорируется, так как присутствие тега является важным. 

Ниже приведен фрагмент модели двойника, реализующей тег маркера в качестве свойства:

```json
{
  "@type": "Property",
  "name": "tags",
  "schema": {
    "@type": "Map",
    "mapKey": {
      "name": "tagName",
      "schema": "string"
    },
    "mapValue": {
      "name": "tagValue",
      "schema": "boolean"
    }
  }
}
```

### <a name="add-marker-tags-to-digital-twins"></a>Добавление тегов маркеров в цифровые двойников

Когда `tags` свойство является частью модели цифрового двойника, можно установить тег маркера в цифровом двойника, задав значение этого свойства. 

Ниже приведен пример, который заполняет маркер `tags` для трех двойников:

```csharp
entity-01: "tags": { "red": true, "round": true } 
entity-02: "tags": { "blue": true, "round": true } 
entity-03: "tags": { "red": true, "large": true } 
```

### <a name="query-with-marker-tags"></a>Запрос с тегами маркеров

После добавления тегов в цифровые двойников Теги можно использовать для фильтрации двойников в запросах. 

Ниже приведен запрос для получения всех двойников, помеченных как "Red": 

```sql
select * from digitaltwins where is_defined(tags.red) 
```

Можно также комбинировать теги для более сложных запросов. Ниже приведен запрос для получения всех двойников, которые округляются, а не красного цвета. 

```sql
select * from digitaltwins where not is_defined(tags.red) and is_defined(tags.round) 
```

## <a name="value-tags"></a>Теги значений 

**Тег значения** — это пара "ключ-значение", которая используется для присвоения каждому тегу значения, например `"color": "blue"` или `"color": "red"` . После создания тега значения его можно также использовать в качестве тега маркера, игнорируя значение тега. 

### <a name="add-value-tags-to-model"></a>Добавить теги значений в модель 

Теги значений моделируются в виде [дтдл](https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md) -карт из `string` в `string` . И, `mapKey` и `mapValue` являются значимыми. 

Ниже приведен фрагмент модели двойника, реализующей тег value в качестве свойства:

```json
{
  "@type": "Property",
  "name": "tags",
  "schema": {
    "@type": "Map",
    "mapKey": {
      "name": "tagName",
      "schema": "string"
    },
    "mapValue": {
      "name": "tagValue",
      "schema": "string"
    }
  }
} 
```

### <a name="add-value-tags-to-digital-twins"></a>Добавление тегов значений в Digital двойников

Как и в случае с тегами маркеров, можно задать тег value в цифровом двойника, задав значение этого `tags` свойства из модели. Чтобы использовать тег значения в качестве тега маркера, можно присвоить `tagValue` полю пустое строковое значение ( `""` ). 

Ниже приведен пример, который заполняет значение `tags` для трех двойников:

```csharp
entity-01: "tags": { "red": "", "size": "large" } 
entity-02: "tags": { "purple": "", "size": "small" } 
entity-03: "tags": { "red": "", "size": "small" } 
```

Обратите внимание, что `red` и `purple` используются в качестве тегов маркера в этом примере.

### <a name="query-with-value-tags"></a>Запрос с тегами значений

Как и в случае с тегами маркера, можно использовать теги значений для фильтрации двойников в запросах. Можно также использовать теги значений и теги меток вместе.

В приведенном выше примере используется `red` как тег маркера. Ниже приведен запрос для получения всех двойников, помеченных как "Red": 

```sql
select * from digitaltwins where is_defined(tags.red) 
```

Ниже приведен запрос для получения всех мелких сущностей (тег значения), а не красного: 

```sql
select * from digitaltwins where not is_defined(tags.red) and tags.size = 'small' 
```

## <a name="next-steps"></a>Дальнейшие действия

Узнайте больше о проектировании моделей цифровых двойника и управлении ими:
* [*Практическое руководство. Управление настраиваемыми моделями*](how-to-manage-model.md).

Дополнительные сведения о запросах к графу двойника:
* [*Пошаговое руководство. запрос графа двойника*](how-to-query-graph.md)