---
title: Настройка экземпляра и проверки подлинности (портал)
titleSuffix: Azure Digital Twins
description: См. раздел Настройка экземпляра службы Digital двойников с помощью портал Azure
author: baanders
ms.author: baanders
ms.date: 7/23/2020
ms.topic: how-to
ms.service: digital-twins
ms.openlocfilehash: 33772d46f363b161c1faa5c953f48a702ae2b8bf
ms.sourcegitcommit: 98854e3bd1ab04ce42816cae1892ed0caeedf461
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "88009678"
---
# <a name="set-up-an-azure-digital-twins-instance-and-authentication-portal"></a>Настройка экземпляра и проверки подлинности Azure Digital двойников (портал)

[!INCLUDE [digital-twins-setup-selector.md](../../includes/digital-twins-setup-selector.md)]

В этой статье описаны действия по **настройке нового экземпляра Azure Digital двойников**, включая создание экземпляра и настройку проверки подлинности. По завершении работы с этой статьей у вас будет готовый экземпляр Azure Digital двойников для начала программирования.

Эта версия этой статьи выполняет эти действия вручную, по одной с помощью портал Azure. Портал Azure — это единая веб-консоль, которую можно использовать вместо средств командной строки.
* Чтобы выполнить эти действия вручную с помощью интерфейса командной строки, см. версию CLI этой статьи: [*инструкции по настройке экземпляра и проверки подлинности (CLI)*](how-to-set-up-instance-cli.md).
* Чтобы выполнить автоматическую установку с помощью примера скрипта развертывания, см. статью [*как настроить экземпляр и проверку подлинности (в скрипте)*](how-to-set-up-instance-scripted.md).

[!INCLUDE [digital-twins-setup-steps-prereq.md](../../includes/digital-twins-setup-steps-prereq.md)]

## <a name="create-the-azure-digital-twins-instance"></a>Создание экземпляра Digital двойников для Azure

В этом разделе вы **создадите новый экземпляр Azure Digital двойников** с помощью [портал Azure](https://ms.portal.azure.com/). Перейдите на портал и войдите в систему, используя свои учетные данные.

На портале нажмите кнопку _создать ресурс_ в меню домашней страницы служб Azure.

:::image type="content" source= "media/how-to-set-up-instance/portal/create-resource.png" alt-text="Выбор пункта "создать ресурс" на домашней странице портал Azure":::

Найдите *Azure Digital двойников* в поле поиска и выберите в результатах службу **Azure Digital двойников (Предварительная версия)** . Нажмите кнопку _создать_ , чтобы создать новый экземпляр службы.

:::image type="content" source= "media/how-to-set-up-instance/portal/create-azure-digital-twins.png" alt-text="Выбор команды "создать" на странице службы цифровых двойников Azure":::

На следующей странице *Создание ресурса* заполните указанные ниже значения.
* **Подписка**. Подписка Azure, которую вы используете.
  - **Группа ресурсов**. Группа ресурсов, в которой будет развернут экземпляр. Если у вас еще нет имеющейся группы ресурсов, можно создать ее здесь, выбрав ссылку *создать* и введя имя новой группы ресурсов.
* **Расположение**: регион с поддержкой цифровых двойников Azure для развертывания. Дополнительные сведения о языковой поддержке см. в [*подразделах продукты Azure, доступные по регионам (Azure Digital двойников)*](https://azure.microsoft.com/global-infrastructure/services/?products=digital-twins).
* **Имя ресурса**: имя вашего экземпляра Digital двойников для Azure. Имя нового экземпляра должно быть уникальным в пределах региона для вашей подписки (это означает, что если в вашей подписке есть другой экземпляр Azure Digital двойников в регионе, где уже используется выбранное имя, вам будет предложено выбрать другое имя).

:::image type="content" source= "media/how-to-set-up-instance/portal/create-azure-digital-twins-2.png" alt-text="Заполнение описанных значений для создания ресурса цифрового двойников Azure":::

По завершении выберите _проверить и создать_. Откроется страница сводки, на которой можно проверить введенные сведения об экземпляре и нажать кнопку _создать_. 

### <a name="verify-success-and-collect-important-values"></a>Проверка успешности и получение важных значений

После *создания*вы можете просмотреть состояние развертывания экземпляра в уведомлениях Azure на панели значков портала. Уведомление сообщит о том, что развертывание прошло успешно, и вы сможете нажать кнопку _Перейти к ресурсу_ , чтобы просмотреть созданный экземпляр.

:::image type="content" source="media/how-to-set-up-instance/portal/notifications-deployment.png" alt-text="Просмотр уведомлений Azure, демонстрирующих успешное развертывание, и выделение кнопки "перейти к ресурсу"":::

Кроме того, если развертывание завершается неудачно, в уведомлении будет указано, почему. Просмотрите уведомление в сообщении об ошибке и повторите попытку создания экземпляра.

>[!TIP]
>После создания экземпляра можно в любой момент вернуться к его странице, выполнив поиск по имени своего экземпляра на панели поиска портал Azure.

На странице *Обзор* экземпляра Обратите внимание на его *имя*, *группу ресурсов*и *имя узла*. Это все важные значения, которые могут потребоваться при продолжении работы с экземпляром Digital двойников для Azure. Если другие пользователи будут программироваться на экземпляре, вы должны использовать эти значения совместно с ними.

:::image type="content" source="media/how-to-set-up-instance/portal/instance-important-values.png" alt-text="Выделение важных значений на странице обзора экземпляра":::

Теперь у вас есть экземпляр Azure Digital двойников, готовый к работе. Далее вы получите соответствующие разрешения пользователя Azure для управления им.

## <a name="set-up-user-access-permissions"></a>Настройка разрешений доступа пользователей

[!INCLUDE [digital-twins-setup-role-assignment.md](../../includes/digital-twins-setup-role-assignment.md)]

Сначала откройте страницу для своего экземпляра Azure Digital двойников в портал Azure. В меню экземпляра выберите *Управление доступом (IAM)*. Нажмите кнопку *Добавить* в разделе *Добавление назначения роли*.

:::image type="content" source="media/how-to-set-up-instance/portal/add-role-assignment-1.png" alt-text="Добавление назначения роли на странице "Управление доступом (IAM)"":::

На следующей странице *Добавление назначения ролей* введите значения (они должны быть выполнены пользователем с [достаточными разрешениями](#prerequisites-permission-requirements) в подписке Azure):
* **Роль**: в раскрывающемся меню выберите *Azure Digital двойников Owner (Предварительная версия)* .
* **Назначение доступа к**: выберите *пользователя Azure AD, группу или субъект-службу* в раскрывающемся меню
* **Выберите**: найдите имя или адрес электронной почты пользователя, которого нужно назначить. При выборе результата пользователь будет отображаться в разделе *Выбранные элементы* .

:::row:::
    :::column:::
        :::image type="content" source="media/how-to-set-up-instance/portal/add-role-assignment-2.png" alt-text="Заполнение указанных полей в диалоговом окне "Добавление назначения роли"":::
    :::column-end:::
    :::column:::
    :::column-end:::
:::row-end:::

Завершив ввод сведений, нажмите кнопку *сохранить* .

### <a name="verify-success"></a>Проверка успешного выполнения

Вы можете просмотреть назначение ролей, настроенное в разделе *Управление доступом (IAM) > назначения ролей*. Пользователь должен отображаться в списке с ролью *владельца Azure Digital двойников (Предварительная версия)*. 

:::image type="content" source="media/how-to-set-up-instance/portal/verify-role-assignment.png" alt-text="Просмотр назначений ролей для экземпляра цифрового двойников Azure в портал Azure":::

Теперь у вас есть экземпляр Azure Digital двойников, который готов к работе и ему назначены разрешения для управления им. Далее предстоит настроить разрешения для клиентского приложения на доступ к нему.

## <a name="set-up-access-permissions-for-client-applications"></a>Настройка разрешений доступа для клиентских приложений

[!INCLUDE [digital-twins-setup-app-registration.md](../../includes/digital-twins-setup-app-registration.md)]

Начните с перехода к [Azure Active Directory](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview) в портал Azure (вы можете использовать эту ссылку или найти ее с помощью панели поиска портала). Выберите *Регистрация приложений* в меню служба, а затем *+ Новая регистрация*.

:::image type="content" source="media/how-to-set-up-instance/portal/new-registration.png" alt-text="Просмотрите страницу службы Azure AD в портал Azure, выделите пункт меню "Регистрация приложений" и нажмите кнопку "+ Новая регистрация".":::

На следующей странице *Регистрация приложения* Введите запрошенные значения:
* **Имя**: отображаемое имя приложения Azure AD, связываемое с регистрацией.
* **Поддерживаемые типы учетных записей**: выберите *учетные записи только в этом каталоге организации (только каталог по умолчанию — один клиент)* .
* **URI перенаправления**: *URL-адрес ответа приложения Azure AD* для приложения Azure AD. Можно использовать `http://localhost` .

По завершении нажмите кнопку Register ( *зарегистрировать* ).

:::image type="content" source="media/how-to-set-up-instance/portal/register-an-application.png" alt-text="Представление страницы "регистрация приложения" с указанными введенными значениями":::

После завершения настройки регистрации портал перенаправит вас на страницу сведений о ней.

### <a name="provide-azure-digital-twins-api-permission"></a>Предоставление разрешения API цифровых двойников Azure

Затем настройте регистрацию приложения, созданную с базовыми разрешениями для API-интерфейсов Azure Digital двойников.

На странице портала для регистрации приложения в меню выберите *разрешения API* . На следующей странице разрешения нажмите кнопку *+ Добавить разрешение* .

:::image type="content" source="media/how-to-set-up-instance/portal/add-permission.png" alt-text="Просмотр регистрации приложения в портал Azure, выделение пункта меню "разрешения API" и кнопка "+ добавить разрешение"":::

На следующей странице *разрешений API запроса* перейдите к *API-интерфейсам, используемым моей организацией* , и выполните поиск по запросу *Azure Digital двойников*. Выберите *Azure Digital двойников* из результатов поиска, чтобы продолжить назначение разрешений для API-интерфейсов цифровой двойников Azure.

:::image type="content" source="media/how-to-set-up-instance/portal/request-api-permissions-1.png" alt-text="Просмотр результатов поиска страниц "разрешения API запроса", демонстрирующих Azure Digital двойников":::

Далее предстоит выбрать разрешения, которые будут предоставлены для этих API. Разверните разрешение **Чтение (1)** и установите флажок *чтение. запись* , чтобы предоставить этому приложению доступ для чтения и записи регистрации приложения.

:::image type="content" source="media/how-to-set-up-instance/portal/request-api-permissions-2.png" alt-text="Просмотр страницы "разрешения API запросов" Выбор разрешений "чтение. запись" для API-интерфейсов цифрового двойников Azure":::

По завершении нажмите кнопку *Добавить разрешения* .

### <a name="verify-success"></a>Проверка успешного выполнения

Вернитесь на страницу *разрешения API* и убедитесь, что теперь есть запись для Azure Digital двойников, отражающая разрешения на чтение и запись:

:::image type="content" source="media/how-to-set-up-instance/portal/verify-api-permissions.png" alt-text="Представление портала с разрешениями API для регистрации приложения Azure AD с доступом "чтение и запись" для Azure Digital двойников":::

Вы также можете проверить подключение к Azure Digital двойников в *manifest.js*регистрации приложения, которое автоматически обновлялось с помощью сведений о цифровой двойников Azure при добавлении разрешений API.

Для этого в меню выберите *Манифест* , чтобы просмотреть код манифеста регистрации приложения. Прокрутите окно кода вниз и найдите эти поля в разделе `requiredResourceAccess` . Значения должны соответствовать приведенным на снимке экрана ниже:

:::image type="content" source="media/how-to-set-up-instance/portal/verify-manifest.png" alt-text="Представление портала манифеста для регистрации приложения Azure AD. В разделе "requiredResourceAccess" вложено значение "Ресаурцеаппид" 0b07f429-9f4b-4714-9392-cc5e8e80c8b0 и значение "resourceAccess > ID" 4589bd03-58cb-4e6c-b17f-b580e39652f8":::

### <a name="collect-important-values"></a>Получение важных значений

Затем в строке меню выберите *Обзор* , чтобы просмотреть сведения о регистрации приложения:

:::image type="content" source="media/how-to-set-up-instance/portal/app-important-values.png" alt-text="Представление портала с важными значениями для регистрации приложения":::

Запишите *идентификатор приложения (клиента)* и *идентификатор каталога (клиента)* , показанные на **странице.** Эти значения потребуются позже для [проверки подлинности клиентского приложения с помощью API цифровых двойников Azure](how-to-authenticate-client.md). Если вы не являетесь пользователем, который будет писать код для таких приложений, вы должны поделиться этими значениями с пользователем, который будет иметь значение.

### <a name="other-possible-steps-for-your-organization"></a>Другие возможные действия для вашей организации

[!INCLUDE [digital-twins-setup-additional-requirements.md](../../includes/digital-twins-setup-additional-requirements.md)]

## <a name="next-steps"></a>Дальнейшие действия

См. раздел как подключить клиентское приложение к экземпляру, написав код проверки подлинности клиентского приложения:
* [*Пошаговое руководство. Написание кода проверки подлинности приложения*](how-to-authenticate-client.md)