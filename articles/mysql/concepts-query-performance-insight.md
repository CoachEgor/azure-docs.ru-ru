---
title: анализ производительности запросов в базе данных Azure для MySQL
description: В этой статье описывается функция анализ производительности запросов в базе данных Azure для MySQL.
author: ajlam
ms.author: andrela
ms.service: mysql
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 38299a8ffd72722c2d2c1dda9227b7fbf76c0386
ms.sourcegitcommit: c62a68ed80289d0daada860b837c31625b0fa0f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2019
ms.locfileid: "73603114"
---
# <a name="query-performance-insight-in-azure-database-for-mysql"></a>анализ производительности запросов в базе данных Azure для MySQL

**Применимо к:** База данных Azure для MySQL 5,7

Этот компонент помогает быстро определить наиболее медленно выполняющиеся запросы, их изменение со временем и ожидания каких действий влияют на них.

## <a name="common-scenarios"></a>Распространенные сценарии

### <a name="long-running-queries"></a>Долго выполняющиеся запросы

- определение самых медленно выполняющихся запросов за прошедшие X часов;
- определение основных N запросов, ожидающих ресурсы;
 
### <a name="wait-statistics"></a>Статистика ожидания

- Основные сведения о характере ожидания для запроса
- Основные сведения о тенденциях ожидания ресурсов и о том, где существует состязание за ресурсы

## <a name="permissions"></a>Разрешения

Чтобы просматривать текст запросов в анализе производительности запросов, требуются разрешения **Владельца** или **Участника**. **Модуль чтения** может просматривать графики и таблицы, но не текст запросов.

## <a name="prerequisites"></a>Предварительные требования

Чтобы компонент "Анализ производительности запросов" работал, данные должны находиться в [хранилище запросов](concepts-query-store.md).

## <a name="viewing-performance-insights"></a>Просмотр анализа производительности

Представление [анализа производительности запросов](concepts-query-performance-insight.md) на портале Azure содержит визуализации ключевых данных из хранилища запросов.

На странице портал сервера базы данных Azure для MySQL выберите **Анализ производительности запросов** в разделе **интеллектуальные производительность** в строке меню.

### <a name="long-running-queries"></a>Долго выполняющиеся запросы

На вкладке **длительные запросы** отображаются 5 основных запросов по среднему времени выполнения, агрегированных за 15-минутные интервалы. Можно просмотреть дополнительные запросы, выбрав из раскрывающегося списка **число запросов** . При этом цвета, соответствующие тому или иному идентификатору запроса на графике, могут изменяться.

Чтобы уменьшить временной интервал графика, перетащите его границу. Кроме того, можно использовать значки увеличить и уменьшить для просмотра меньшего или более крупного периода времени соответственно.

![Анализ производительности медленно выполняющихся запросов](./media/concepts-query-performance-insight/query-performance-insight-landing-page.png) 

### <a name="wait-statistics"></a>Статистика ожидания

> [!NOTE]
> Статистика ожидания предназначена для устранения проблем с производительностью запросов. Рекомендуется включать только в целях устранения неполадок. <br>Если вы получаете сообщение об ошибке в портал Azure "*Microsoft. дбформискл". не удается выполнить запрос. Если эта проблема будет возникать или неожиданно, обратитесь в службу поддержки, используя эту информацию.* " При просмотре статистики ожидания используйте меньший период времени.

Статистика ожидания предоставляет представление событий ожидания, происходящих во время выполнения определенного запроса. Дополнительные сведения о типах событий Wait см. в [документации по модулю MySQL](https://go.microsoft.com/fwlink/?linkid=2098206).

Откройте вкладку **Статистика ожидания**, чтобы посмотреть визуализации ожидания на сервере.

Запросы, отображаемые в представлении статистики ожидания, группируются по запросам, которые демонстрируют максимальное время ожидания в течение заданного интервала времени.

![анализ производительности запросов ожиданий статистики](./media/concepts-query-performance-insight/query-performance-insight-wait-statistics.png)

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [мониторинге и настройке](concepts-monitoring.md) в базе данных Azure для MySQL.