---
title: Анализ производительности запросов - База данных Azure для MyS'L
description: В этой статье описывается функция анализа производительности запросов в базе данных Azure для MyS'L
author: ajlam
ms.author: andrela
ms.service: mysql
ms.topic: conceptual
ms.date: 3/18/2020
ms.openlocfilehash: a924f51fac6d43ae4a4530ac4f61f2e8b1f4e8c7
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79537063"
---
# <a name="query-performance-insight-in-azure-database-for-mysql"></a>Анализ производительности запросов в Базе данных Azure для MySQL

**Применяется к:** База данных Azure для MyS'L 5.7

Этот компонент помогает быстро определить наиболее медленно выполняющиеся запросы, их изменение со временем и ожидания каких действий влияют на них.

## <a name="common-scenarios"></a>Распространенные сценарии

### <a name="long-running-queries"></a>Длительные запросы.

- определение самых медленно выполняющихся запросов за прошедшие X часов;
- определение основных N запросов, ожидающих ресурсы;
 
### <a name="wait-statistics"></a>Статистика ожидания

- Понимание природы ожидания запроса
- Понимание тенденций ожидания ресурсов и того, где существует утверждение ресурсов

## <a name="permissions"></a>Разрешения

Чтобы просматривать текст запросов в анализе производительности запросов, требуются разрешения **Владельца** или **Участника**. **Модуль чтения** может просматривать графики и таблицы, но не текст запросов.

## <a name="prerequisites"></a>Предварительные требования

Чтобы компонент "Анализ производительности запросов" работал, данные должны находиться в [хранилище запросов](concepts-query-store.md).

## <a name="viewing-performance-insights"></a>Просмотр анализа производительности

Представление [анализа производительности запросов](concepts-query-performance-insight.md) на портале Azure содержит визуализации ключевых данных из хранилища запросов.

На странице портала базы данных Azure для сервера MyS'L выберите **«Анализ производительности запроса»** в разделе **Интеллектуальная производительность** панели меню.

### <a name="long-running-queries"></a>Длительные запросы.

Вкладка **Длинные запросы** показывает топ-5 запросов по средней продолжительности исполнения, агрегированные в 15-минутных интервалах. Вы можете просмотреть больше запросов, выбрав из **числа запросов** упасть вниз. При этом цвета, соответствующие тому или иному идентификатору запроса на графике, могут изменяться.

Чтобы уменьшить временной интервал графика, перетащите его границу. Кроме того, используйте иконки увеличения и изготавливали для просмотра меньшего или большего периода времени соответственно.

![Анализ производительности медленно выполняющихся запросов](./media/concepts-query-performance-insight/query-performance-insight-landing-page.png) 

### <a name="wait-statistics"></a>Статистика ожидания

> [!NOTE]
> Статистика ожидания предназначена для устранения проблем с производительностью запроса. Рекомендуется включать только в целях устранения неполадок. <br>Если вы получили сообщение об ошибке на портале Azure "*Проблема возникла для 'Microsoft.DBforMyS'L'; не может выполнить запрос. Если эта проблема продолжается или является неожиданной, пожалуйста, свяжитесь со службой поддержки с этой информацией.*" при просмотре статистики ожидания используйте меньший период времени.

Статистика ожидания предоставляет представление событий ожидания, которые происходят во время выполнения определенного запроса. Подробнее о типах событий ожидания читайте в [документации по движку MyS'L.](https://go.microsoft.com/fwlink/?linkid=2098206)

Откройте вкладку **Статистика ожидания**, чтобы посмотреть визуализации ожидания на сервере.

Запросы, отображаемые в представлении статистики ожидания, группируются по запросам, которые демонстрируют наибольшее ожидание в течение указанного интервала времени.

![Запрос Performance Insight ждет статистики](./media/concepts-query-performance-insight/query-performance-insight-wait-statistics.png)

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте больше о [мониторинге и настройке](concepts-monitoring.md) в базе данных Azure для MyS'L.