---
title: Проверка подлинности Active Directory — база данных Azure для MySQL — один сервер
description: Сведения о концепциях Azure Active Directory для проверки подлинности с помощью базы данных Azure для MySQL — одиночного сервера
author: lfittl-msft
ms.author: lufittl
ms.service: mysql
ms.topic: conceptual
ms.date: 01/22/2019
ms.openlocfilehash: eb26bc09ce273280b55a023c563427b5b323ace9
ms.sourcegitcommit: af6847f555841e838f245ff92c38ae512261426a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2020
ms.locfileid: "76706106"
---
# <a name="use-azure-active-directory-for-authenticating-with-mysql"></a>Использование Azure Active Directory для проверки подлинности с помощью MySQL

Проверка подлинности Microsoft Azure Active Directory (Azure AD) — это механизм подключения к базе данных Azure для MySQL с помощью удостоверений, определенных в Azure AD.
С помощью аутентификации Azure AD вы можете управлять удостоверениями пользователей базы данных и другими службами Майкрософт в централизованном расположении, что упрощает управление разрешениями.

> [!IMPORTANT]
> Аутентификация Azure AD для базы данных Azure для MySQL в настоящее время доступна в общедоступной предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для использования рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены.
> Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Ниже перечислены преимущества использования Azure AD.

- Единообразная проверка подлинности пользователей в службах Azure
- Управление политиками паролей и сменой паролей в одном месте
- Azure Active Directory поддерживает несколько форм проверки подлинности, что может избавиться от необходимости хранить пароли.
- клиенты могут управлять разрешениями базы данных с помощью внешних групп (Azure AD);
- Аутентификация Azure AD использует пользователей базы данных MySQL для проверки подлинности удостоверений на уровне базы данных.
- Поддержка проверки подлинности на основе маркеров для приложений, подключающихся к базе данных Azure для MySQL

Чтобы настроить и использовать проверку подлинности Azure Active Directory, используйте следующую процедуру.

1. При необходимости создайте и заполните Azure Active Directory удостоверениями пользователей.
2. При необходимости свяжите или измените Active Directory, которые в настоящее время связаны с подпиской Azure.
3. Создайте администратора Azure AD для сервера базы данных Azure для MySQL.
4. Создание пользователей базы данных в базе данных, сопоставленной с удостоверениями Azure AD.
5. Подключитесь к базе данных, извлекая маркер для удостоверения Azure AD и войдя в систему.

> [!NOTE]
> Сведения о создании и заполнении Azure AD, а также настройке Azure AD с помощью базы данных Azure для MySQL см. в статье [Настройка и вход в Azure AD для базы данных Azure для MySQL](howto-configure-sign-in-azure-ad-authentication.md).

## <a name="architecture"></a>Архитектура

На следующей высокоуровневой схеме показано, как работает аутентификация с помощью аутентификации Azure AD и базы данных Azure для MySQL. Стрелки обозначают пути обмена данными.

![Поток проверки подлинности][1]

## <a name="administrator-structure"></a>Структура администраторов

При использовании аутентификации Azure AD существует две учетные записи администратора для сервера MySQL. исходный администратор MySQL и администратор Azure AD. Создать в пользовательской базе данных первого пользователя автономной базы данных Azure AD может только администратор с учетной записью Azure AD. Администратор Azure AD может использовать для входа имя пользователя Azure AD или имя группы Azure AD. Если администратор является учетной записью группы, он может использоваться любым членом группы, что позволяет нескольким администраторам Azure AD для сервера MySQL. Использование учетной записи группы в качестве администратора повышает управляемость, позволяя централизованно добавлять и удалять членов групп в Azure AD без изменения пользователей или разрешений на сервере MySQL. За один раз можно настроить только одного администратора Azure AD (пользователя или группу).

![структура администраторов][2]

## <a name="permissions"></a>Разрешения

Чтобы создать новых пользователей, которые могут проходить проверку подлинности в Azure AD, необходимо быть разработам администратором Azure AD. Этот пользователь назначается путем настройки учетной записи администратора Azure AD для конкретного сервера базы данных Azure для MySQL.

Чтобы создать нового пользователя базы данных Azure AD, необходимо подключиться к администратору Azure AD. Это продемонстрировано в этой [настройке и входе в Azure AD для базы данных Azure для MySQL](howto-configure-sign-in-azure-ad-authentication.md).

Проверка подлинности Azure AD возможна только в том случае, если администратор Azure AD создан для базы данных Azure для MySQL. Если администратор Azure Active Directory был удален с сервера, уже созданные ранее пользователи Azure Active Directory не смогут подключаться к базе данных с помощью учетных данных Azure Active Directory.

## <a name="connecting-using-azure-ad-identities"></a>Подключение с использованием удостоверений Azure AD

Проверка подлинности Azure Active Directory поддерживает следующие способы подключения к базе данных с помощью удостоверений Azure AD:

- Пароль Azure Active Directory.
- Встроенная служба Azure Active Directory.
- Универсальная служба Azure Active Directory с поддержкой MFA.
- Использование Active Directory сертификатов приложений или секретов клиента

После проверки подлинности в Active Directory вы получаете маркер. Этот маркер является вашим паролем для входа в систему.

> [!NOTE]
> Дополнительные сведения о подключении с помощью токена Active Directory см. в статье [Настройка и вход с помощью Azure AD для базы данных Azure для MySQL](howto-configure-sign-in-azure-ad-authentication.md).

## <a name="additional-considerations"></a>Дополнительные сведения

- Только один администратор Azure AD можно настроить для сервера базы данных Azure для MySQL в любое время.
- Только администратор Azure AD для MySQL может сначала подключиться к базе данных Azure для MySQL с помощью учетной записи Azure Active Directory. Затем администратор Active Directory может настроить других пользователей базы данных Azure AD.
- Если пользователь удален из Azure AD, он больше не сможет пройти проверку подлинности в Azure AD, поэтому получить маркер доступа для этого пользователя будет невозможно. В этом случае, несмотря на то, что соответствующий пользователь по-прежнему будет находиться в базе данных, подключиться к серверу с этим пользователем будет невозможно.
> [!NOTE]
> Вход с удаленным пользователем Azure AD по-прежнему может быть выполнен до истечения срока действия маркера (до 60 минут от выдачи маркера).  Если вы также удалите пользователя из базы данных Azure для MySQL, этот доступ будет отозван немедленно.
- Если администратор Azure AD удален с сервера, сервер больше не будет связан с клиентом Azure AD, поэтому все имена входа Azure AD будут отключены для сервера. Добавление нового администратора Azure AD из того же клиента приведет к повторному включению имен входа Azure AD.
- База данных Azure для MySQL сопоставляет маркеры доступа для пользователя базы данных Azure для MySQL, используя уникальный идентификатор пользователя Azure AD, а не имя пользователя. Это означает, что при удалении пользователя Azure AD в Azure AD и создании нового пользователя с тем же именем база данных Azure для MySQL считает, что другой пользователь. Таким образом, если пользователь удаляется из Azure AD, а затем добавляется новый пользователь с тем же именем, новый пользователь не сможет подключиться к существующему пользователю.

## <a name="next-steps"></a>Дальнейшие действия

- Сведения о создании и заполнении Azure AD, а также настройке Azure AD с помощью базы данных Azure для MySQL см. в статье [Настройка и вход в Azure AD для базы данных Azure для MySQL](howto-configure-sign-in-azure-ad-authentication.md).
- Обзор имен входа и пользователей базы данных для базы данных Azure для MySQL см. в статье [Создание пользователей в базе данных Azure для MySQL — одиночный сервер](howto-create-users.md).

<!--Image references-->

[1]: ./media/concepts-azure-ad-authentication/authentication-flow.png
[2]: ./media/concepts-azure-ad-authentication/admin-structure.png
