---
title: Архитектура подключения - База данных Azure для MyS'L
description: Описывает архитектуру подключения для базы данных Azure для сервера MyS'L.
author: kummanish
ms.author: manishku
ms.service: mysql
ms.topic: conceptual
ms.date: 03/16/2020
ms.openlocfilehash: e7098056356c84469d3dc6bd4e3222fbb5b7f908
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79474294"
---
# <a name="connectivity-architecture-in-azure-database-for-mysql"></a>Архитектура подключения в базе данных Azure для MyS'L
В этой статье объясняется база данных Azure для архитектуры подключения MyS'L, а также то, как трафик направляется в базу данных Azure для экземпляра MyS'L от клиентов как внутри, так и за его пределами.

## <a name="connectivity-architecture"></a>Архитектура подключения
Подключение к базе данных Azure для MyS'L устанавливается через шлюз, который отвечает за направление входящих соединений к физическому местоположению вашего сервера в наших кластерах. Следующая диаграмма иллюстрирует транспортный поток.

![Обзор архитектуры подключения](./media/concepts-connectivity-architecture/connectivity-architecture-overview-proxy.png)

Как клиент подключиться к базе данных, они получают строку соединения, которая подключается к шлюзу. Этот шлюз имеет общедоступный IP-адрес, который слушает порт 3306. Внутри кластера баз данных трафик перенаправляется в соответствующую базу данных Azure для MyS'L. Поэтому для подключения к серверу, например, из корпоративных сетей, необходимо открыть брандмауэр стороны клиента, чтобы исходящий трафик мог достичь наших шлюзов. Ниже вы можете найти полный список IP-адресов, используемых нашими шлюзами в регионе.

## <a name="azure-database-for-mysql-gateway-ip-addresses"></a>База данных Azure для IP-адресов шлюза MyS'L
В следующей таблице перечислены основные и вторичные IP-файлы базы данных Azure для шлюза MyS'L для всех регионов данных. Основным IP-адресом является текущий IP-адрес шлюза, а второй IP-адрес — это сбой IP-адреса в случае сбоя первичного. Как уже упоминалось, клиенты должны разрешить исходящие на оба IP-адреса. Второй IP-адрес не прослушивается в каких-либо службах до тех пор, пока он не активирован Базой данных Azure для приема соединений.

| **Название региона** | **IP-адреса шлюза** |
|:----------------|:-------------|
| Центральная Австралия| 20.36.105.0     |
| Австралия Сентрал2     | 20.36.113.0     |
| Восточная Австралия | 13.75.149.87, 40.79.161.1     |
| Юго-Восточная Австралия |191.239.192.109, 13.73.109.251     |
| Южная Бразилия | 104.41.11.5, 191.233.201.8, 191.233.200.16     |
| Центральная Канада |40.85.224.249     |
| Восточная Канада | 40.86.226.166     |
| Центральная часть США | 23.99.160.139, 13.67.215.62     |
| Восточный Китай | 139.219.130.35     |
| Восточный Китай 2 | 40.73.82.1     |
| Северный Китай | 139.219.15.17     |
| Северный Китай 2 | 40.73.50.0     |
| Восточная Азия | 191.234.2.139, 52.175.33.150, 13.75.33.20, 13.75.33.21     |
| Восточная часть США | 40.121.158.30, 191.238.6.43     |
| восточная часть США 2 |40.79.84.180, 191.239.224.107, 52.177.185.181     |
| Центральная Франция | 40.79.137.0, 40.79.129.1     |
| Центральная Германия | 51.4.144.100     |
| Северо-восточная Германия | 51.5.144.179     |
| Центральная Индия | 104.211.96.159     |
| Южная Индия | 104.211.224.146     |
| Западная Индия | 104.211.160.80     |
| Восточная Япония | 13.78.61.196, 191.237.240.43     |
| Западная Япония | 104.214.148.156, 191.238.68.11, 40.74.96.7, 40.74.96.6 |
| Республика Корея, центральный регион | 52.231.32.42     |
| Республика Корея, южный регион | 52.231.200.86     |
| Центрально-северная часть США | 23.96.178.199, 23.98.55.75, 52.162.104.35, 52.162.104.36     |
| Северная Европа | 40.113.93.91, 191.235.193.75     |
| Северная часть ЮАР;  | 102.133.152.0     |
| Западная часть Африки    | 102.133.24.0     |
| Центрально-южная часть США |13.66.62.124, 23.98.162.75, 104.214.16.39, 20.45.120.0     |
| Юго-Восточная Азия | 104.43.15.0, 23.100.117.95, 40.78.233.2, 23.98.80.12     |
| Центральная часть ОАЭ. | 20.37.72.64     |
| Северная часть ОАЭ; | 65.52.248.0     |
| южная часть Соединенного Королевства | 51.140.184.11     |
| западная часть Соединенного Королевства | 51.141.8.11     |
| центрально-западная часть США | 13.78.145.25     |
| Западная Европа | 40.68.37.158, 191.237.232.75     |
| западная часть США | 104.42.238.205, 23.99.34.75     |
| западная часть США 2 | 13.66.226.202     |
||||

## <a name="connection-redirection"></a>Перенаправление соединения

База данных Azure для MyS'L поддерживает дополнительную политику подключения, **перенаправление,** которая помогает уменьшить задержку сети между клиентскими приложениями и серверами MyS'L. С помощью этой функции после того, как начальная сессия TCP будет установлена на базе данных Azure для сервера MyS'L, сервер возвращает клиенту обратный адрес узла, намещающего сервер MyS'L. После этого все последующие пакеты перетекают непосредственно на сервер, минуя шлюз. По мере того, как пакеты перетекают непосредственно на сервер, задержка и пропускная способность повышают производительность.

Эта функция поддерживается в базе данных Azure для серверов MyS'L с версиями двигателей 5.6, 5.7 и 8.0.

Поддержка перенаправления доступна в расширении [mysqlnd_azure](https://github.com/microsoft/mysqlnd_azure) PHP, разработанном корпорацией Майкрософт, и доступна на [PECL.](https://pecl.php.net/package/mysqlnd_azure) Дополнительную информацию о том, как использовать перенаправление в приложениях, можно увидеть статью о [перенаправлении для настройки.](./howto-redirection.md)

> [!IMPORTANT]
> Поддержка перенаправления в [mysqlnd_azure](https://github.com/microsoft/mysqlnd_azure) расширения PHP в настоящее время находится в предварительном просмотре.

## <a name="next-steps"></a>Дальнейшие действия

* [Создание и управление базой данных Azure для правил брандмауэра MyS'L с помощью портала Azure](./howto-manage-firewall-using-portal.md)
* [Создание правил брандмауэра базы данных Azure для MySQL и управление ими с помощью Azure CLI](./howto-manage-firewall-using-cli.md)
* [Настройка перенаправления с базой данных Azure для MyS'L](./howto-redirection.md)