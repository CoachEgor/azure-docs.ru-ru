---
title: Подключение к FTP-сервер — Azure Logic Apps
description: Создавайте, контролируйте файлы на сервере FTP и управляйте ими с помощью Azure Logic Apps.
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: divswa, LADocs
ms.topic: article
ms.date: 10/15/2018
tags: connectors
ms.openlocfilehash: e5aeaa707c7a839483484c524e982204d6fe055c
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60408602"
---
# <a name="create-monitor-and-manage-ftp-files-by-using-azure-logic-apps"></a>Создание и отслеживание FTP-файлов, а также управление ими с помощью Azure Logic Apps

С помощью Azure Logic Apps и соединителя FTP можно создать автоматизированные задачи и рабочие процессы, которые создают, отслеживают, отправляют и получают файлы, а также управляют ими в вашей учетной записи, на сервере FTP. Они также выполняют и другие действия, например:

* мониторинг добавления или изменения файлов;
* получение, создание, копирование, перечисление, обновление и удаление файлов;
* получение содержимого и метаданных файлов;
* извлечение архивов в папки.

Вы можете использовать триггеры, которые получают ответы из сервера FTP и делают выходные данные доступными для других действий. Вы можете использовать действия запуска в своих приложениях логики для управления файлами на сервере FTP. Кроме того, выходные данные от действий FTP могут использоваться другими действиями. Например, если вы регулярно извлекаете файлы с сервера FTP, вы можете отправлять сообщения об этих файлах и их содержимое с помощью соединителя Office 365 Outlook или соединителя Outlook.com. Если вы не знакомы с приложениями логики, ознакомьтесь со статьей [Что такое Azure Logic Apps](../logic-apps/logic-apps-overview.md).

## <a name="limits"></a>Ограничения

* Действия FTP, поддерживают только файлы, которые являются *50 МБ или меньше* только при использовании [фрагментацию сообщения](../logic-apps/logic-apps-handle-large-messages.md), который позволяют этот предел превышен. В настоящее время триггеры FTP не поддерживает фрагментацию.

* Соединитель FTP поддерживает только явные FTP через SSL (FTPS) и не поддерживает неявную конфигурацию FTPS.

## <a name="prerequisites"></a>Технические условия

* Подписка Azure. Если у вас еще нет подписки Azure, <a href="https://azure.microsoft.com/free/" target="_blank">зарегистрируйтесь для получения бесплатной учетной записи Azure</a>. 

* Адрес сервера узла FTP и учетные данные учетной записи

  Для соединителя FTP требуется доступный через Интернет FTP-сервер, который настроен для работы в *пассивном режиме*. Ваши учетные данные позволяют приложению логики создавать подключение и предоставлять доступ к вашей учетной записи FTP.

* Базовые знания [создания приложений логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

* Приложение логики, из которого необходимо получить доступ к учетной записи FTP. Чтобы начать работу с триггером FTP, [создайте пустое приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md). Чтобы использовать действие FTP, запустите приложение логики с другим триггером, например триггером **Периодичность**.

## <a name="connect-to-ftp"></a>Подключение к FTP

[!INCLUDE [Create connection general intro](../../includes/connectors-create-connection-general-intro.md)]

1. Войдите на [портал Azure](https://portal.azure.com) и откройте свое приложение логики в конструкторе приложений логики, если оно еще не открыто.

1. Для пустых приложений логики в поле поиска в качестве фильтра введите ftp. В списке триггеров выберите нужный триггер.

   -или-

   В имеющихся приложениях логики на последнем шаге, в котором необходимо добавить действие, выберите **Новый шаг**, а затем нажмите **Добавить действие**. 
   В поле поиска введите слово ftp в качестве фильтра. 
   В списке действий выберите любое необходимое действие.

   Чтобы добавить действие между шагами, переместите указатель на стрелку между шагами. 
   Выберите появившийся знак "плюс" ( **+** ), а затем щелкните **Добавить действие**.

1. Укажите необходимые сведения для вашего подключения, а затем выберите **Создать**.

1. Укажите необходимые сведения для выбранного триггера или действия и продолжайте создание рабочего процесса приложения логики.

При запросе содержимого файлов триггер извлекает файлы размером не более 50 МБ. Чтобы получить файлы размером более 50 МБ, следуйте приведенному ниже шаблону:

* Используйте триггер, который возвращает свойства файла, например **При добавлении или изменении файла (только свойства)** .

* Используйте триггер с действием, которое считывает полный файл, например **Получить содержимое файла по пути**, и применяет [фрагментацию сообщений](../logic-apps/logic-apps-handle-large-messages.md).

## <a name="examples"></a>Примеры

<a name="file-added-modified"></a>

### <a name="ftp-trigger-when-a-file-is-added-or-modified"></a>Триггер FTP: When a file is added or modified (При добавлении или изменении файла)

Если этот триггер обнаруживает, что на сервере FTP добавлен или изменен файл, он запускает рабочий процесс приложения логики. Так, например, вы можете добавить условие, которое проверяет содержимое файла и решает, получать ли его, в зависимости от того, соответствует ли содержимое указанному условию. Наконец, вы можете добавить действие, которое получает содержимое файла и помещает его в папку на сервере SFTP. 

**Пример Enterprise**. Вы можете использовать этот триггер, чтобы отслеживать папку FTP на наличие новых файлов, представляющих заказы клиентов. Также вы можете использовать действие FTP **Получить содержимое файла**, чтобы получить содержимое заказа для дальнейшей обработки и хранения этого заказа в базе данных заказов.

При запросе содержимого файла, триггеры не удается получить файлы размером более 50 МБ. Чтобы получить файлы размером более 50 МБ, следуйте приведенному ниже шаблону: 

* Используйте триггер, который возвращает свойства файла, например **При добавлении или изменении файла (только свойства)** .

* Используйте триггер с действием, которое считывает полный файл, например **Получить содержимое файла по пути**, и применяет [фрагментацию сообщений](../logic-apps/logic-apps-handle-large-messages.md).

Для действительного и функционального логического приложения требуется триггер и по крайней мере одно действие. Поэтому убедитесь, что действие добавлено после триггера.

Ниже указан пример, в котором продемонстрирован триггер: **When a file is added or modified**

1. Войдите на [портал Azure](https://portal.azure.com) и откройте свое приложение логики в конструкторе приложений логики, если оно еще не открыто.

1. Для пустых приложений логики в поле поиска в качестве фильтра введите ftp. В списке триггеров выберите триггер: **When a filed is added or modified — FTP** (При добавлении или изменении файла — FTP)

   ![Найдите и выберите триггер FTP](./media/connectors-create-api-ftp/select-ftp-trigger.png)  

1. Укажите необходимые сведения для вашего подключения, а затем выберите **Создать**.

   По умолчанию этот соединитель передает файлы в текстовом формате. 
   Для передачи файлов в двоичном формате, например, когда и где используется кодирование, выберите **Binary Transport** (Двоичная транспортировка).

   ![Создание подключения к FTP-серверу](./media/connectors-create-api-ftp/create-ftp-connection-trigger.png)  

1. Выберите значок папки рядом с полем **Folder**, чтобы отобразить список. Чтобы найти эту папку, чтобы отслеживать для новых или измененных файлов, щелкните кнопку со стрелкой вправо ( **>** ), перейдите к этой папке и выберите ее.

   ![Найдите и выберите папку для отслеживания](./media/connectors-create-api-ftp/select-folder.png)  

   Выбранная папка отображается в поле **Folder**.

   ![Выбранная папка](./media/connectors-create-api-ftp/selected-folder.png)  

После того как логическое приложение получило триггер, добавьте действия, которые необходимо запустить, когда логическое приложение находит новый или отредактированный файл. В этом примере вы можете добавить действие FTP, которое получает новое или обновленное содержимое.

<a name="get-content"></a>

### <a name="ftp-action-get-content"></a>Действие FTP. Получить содержимое

Это действие получает содержимое из файла на FTP-сервере, при добавлении или обновлении этого файла. Например, вы можете добавить триггер из предыдущего примера и действие, которое получает содержимое файла после добавления или редактирования этого файла. 

При запросе содержимого файла, триггеры не удается получить файлы размером более 50 МБ. Чтобы получить файлы размером более 50 МБ, следуйте приведенному ниже шаблону: 

* Используйте триггер, который возвращает свойства файла, например **При добавлении или изменении файла (только свойства)** .

* Используйте триггер с действием, которое считывает полный файл, например **Получить содержимое файла по пути**, и применяет [фрагментацию сообщений](../logic-apps/logic-apps-handle-large-messages.md).

Ниже указан пример, в котором продемонстрировано действие: **получение содержимого**.

1. В разделе "Триггер" или "Другие действия" выберите **Новый шаг**. 

1. В поле поиска введите слово ftp в качестве фильтра. В списке действий выберите действие **Get file content — FTP** (Получить содержимое файла — FTP)

   ![Выбор действия FTP](./media/connectors-create-api-ftp/select-ftp-action.png)  

1. Если у вас уже есть соединение с вашим FTP-сервером и учетной записью, перейдите к следующему шагу. В противном случае укажите необходимые сведения для подключения, а затем выберите **Создать**. 

   ![Создание подключения к FTP-серверу](./media/connectors-create-api-ftp/create-ftp-connection-action.png)

1. После открытия действия **Получить содержимое файла** щелкните поле **Файл**, чтобы отобразить список динамического содержимого. Теперь можно выбрать свойства для выходных данных из предыдущих шагов. В списке динамического содержимого выберите свойство **Содержимое файла**, которое содержит добавленные или обновленные файлы.  

   ![Поиск и выбор файла](./media/connectors-create-api-ftp/ftp-action-get-file-content.png)

   **Содержимое файла** теперь отображается в поле**Файл**.

   ![Выбранное свойство "Содержимое файла"](./media/connectors-create-api-ftp/ftp-action-selected-file-content-property.png)

1. Сохраните приложение логики. Чтобы протестировать рабочий процесс, добавьте файл в папку FTP, которую теперь отслеживает ваше логическое приложение.

## <a name="connector-reference"></a>Справочник по соединителям

Дополнительные технические сведения о триггерах, действиях и ограничения, которые описаны соединителя OpenAPI (прежнее название — Swagger) описания, просмотрите [соединителя справочной странице](/connectors/ftpconnector/).

## <a name="get-support"></a>Получение поддержки

* Если у вас возникли вопросы, то посетите [форум Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).
* Отправить идею по поводу возможности или проголосовать за нее вы можете на [сайте отзывов пользователей Logic Apps](https://aka.ms/logicapps-wish).

## <a name="next-steps"></a>Дальнейшие действия

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
