---
title: Подключение к хранилищу BLOB-объектов Azure — Azure Logic Apps
description: Создание и администрирование больших двоичных объектов в хранилище Azure с помощью Azure Logic Apps
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
manager: carmonm
ms.reviewer: klam, LADocs
ms.topic: conceptual
ms.date: 06/20/2019
tags: connectors
ms.openlocfilehash: ce59c238e50a1be6879b07e959b236f6181a8ce4
ms.sourcegitcommit: 6fe40d080bd1561286093b488609590ba355c261
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/01/2019
ms.locfileid: "71703260"
---
# <a name="create-and-manage-blobs-in-azure-blob-storage-with-azure-logic-apps"></a>Создание и администрирование больших двоичных объектов в хранилище BLOB-объектов Azure с помощью Azure Logic Apps

В этой статье описано, как получить доступ к файлам, хранящимся в виде больших двоичных объектов в учетной записи хранения Azure, из приложения логики с помощью соединителя хранилища BLOB-объектов Azure. Таким образом можно создавать приложения логики, которые автоматизируют задачи и рабочие процессы по управлению файлами. Например, можно создавать приложения логики, которые создают, получают, обновляют и удаляют файлы в вашей учетной записи хранения.

Предположим, что у вас есть средство, которое обновляется на веб-сайте Azure. Оно используется как триггер для приложения логики. Когда это событие происходит, приложение логики может обновить некоторые файлы в контейнере хранилища BLOB-объектов, что является действием в приложении логики.

> [!NOTE]
>
> Приложения логики не могут напрямую обращаться к учетным записям хранения Azure, которые имеют [правила брандмауэра](../storage/common/storage-network-security.md) и существуют в одном регионе. Однако приложения логики могут получить доступ к учетным записям хранения Azure, которые существуют в другом регионе, так как для взаимодействия между регионами используется общедоступный IP-адрес. Просто убедитесь, что вы разрешите [Исходящие IP-адреса для управляемых соединителей в вашем регионе](../logic-apps/logic-apps-limits-and-config.md#outbound). Вы также можете использовать несколько дополнительных параметров:
>
> * Создайте [среду службы интеграции](../logic-apps/connect-virtual-network-vnet-isolated-environment-overview.md), которая может подключаться к ресурсам в виртуальной сети Azure.
>
> * Если вы используете выделенный уровень для управления API, вы можете использовать интерфейс API хранилища с помощью службы управления API и разрешить другим IP-адресам через брандмауэр. По сути, добавьте виртуальную сеть Azure, используемую службой управления API, в параметр брандмауэра учетной записи хранения. Затем можно использовать действие управления API или действие HTTP для вызова API-интерфейсов службы хранилища Azure. Однако при выборе этого параметра необходимо самостоятельно обработать процесс проверки подлинности. Дополнительные сведения см. в статье [Простая архитектура корпоративной интеграции](https://aka.ms/aisarch).

Если вы не знакомы с приложениями логики, ознакомьтесь со статьями [Что такое Azure Logic Apps](../logic-apps/logic-apps-overview.md) и [Краткое руководство. Создание первого автоматизированного рабочего процесса с помощью Azure Logic Apps на портале Azure](../logic-apps/quickstart-create-first-logic-app-workflow.md). См. технические сведения о [соединителях хранилища BLOB-объектов Azure](/connectors/azureblobconnector/).

## <a name="limits"></a>Ограничения

* По умолчанию действия хранилища BLOB-объектов Azure могут считывать или записывать файлы размером *50 МБ или меньше*. Чтобы обрабатывались файлы размером более 50 МБ, но до 1024 МБ, действия хранилища BLOB-объектов Azure поддерживают [фрагментацию сообщений](../logic-apps/logic-apps-handle-large-messages.md). Действие **Получение содержимого BLOB-объекта** неявно использует фрагментацию.

* Триггеры хранилища BLOB-объектов Azure не поддерживают фрагментацию. При запросе содержимого файла триггеры выбирают только файлы размером 50 МБ или меньше. Чтобы получить файлы размером более 50 МБ, следуйте приведенному ниже шаблону:

  * Используйте триггер хранилища BLOB-объектов Azure, который возвращает свойства файла, например **при добавлении или изменении большого двоичного объекта (только свойства)** .

  * Следуйте указаниям триггера с действием **Получение содержимого BLOB** -объекта в хранилище BLOB-объектов Azure, которое считывает полный файл и неявно использует фрагментацию.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [зарегистрируйтесь для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* [Учетная запись хранения Azure и контейнер хранилища.](../storage/blobs/storage-quickstart-blobs-portal.md)

* Приложения логики с возможностью доступа к учетной записи хранилища BLOB-объектов Azure. Чтобы запустить приложение логики с помощью триггера хранилища BLOB-объектов Azure, требуется [пустое приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

<a name="add-trigger"></a>

## <a name="add-blob-storage-trigger"></a>Добавление триггера хранилища BLOB-объектов

В Azure Logic Apps каждое приложение логики должно запускаться по [триггеру](../logic-apps/logic-apps-overview.md#logic-app-concepts), который активируется, когда происходит определенное событие или если выполняются заданные условия. При каждом срабатывании триггера обработчик Logic Apps создает экземпляр приложения логики, запускающий рабочий процесс.

В этом примере показано, как можно запустить рабочий процесс приложения логики с помощью **при добавлении или изменении большого двоичного объекта (только свойства)** , когда свойства большого двоичного объекта добавляются или обновляются в контейнере хранилища.

1. В [портал Azure](https://portal.azure.com) или Visual Studio создайте пустое приложение логики, открывающее конструктор приложений логики. В этом примере используется портал Azure.

2. В поле поиска введите "большой двоичный объект azure" в качестве условия фильтра. В списке триггеров выберите нужный триггер.

   В этом примере используется этот триггер: **При добавлении или изменении большого двоичного объекта (только свойства)**

   ![Выбрать триггер](./media/connectors-create-api-azureblobstorage/azure-blob-trigger.png)

3. Если вам будет предложено ввести сведения о подключении, [создайте подключение к хранилищу BLOB-объектов](#create-connection). Или, если подключение уже существует, введите необходимые сведения для триггера.

   Для этого примера выберите контейнер и папку, которую вы хотите отслеживать.

   1. В поле **Контейнер** выберите значок папки.

   2. В списке папок выберите правую угловую скобку ( **>** ), а затем найдите и выберите нужную папку.

      ![Выбор папки](./media/connectors-create-api-azureblobstorage/trigger-select-folder.png)

   3. Укажите частоту и продолжительность, с которыми триггер будет проверять изменения в папке.

4. Завершив работу, нажмите кнопку **Сохранить** на панели инструментов конструктора.

5. Теперь продолжайте добавлять действия в приложение логики для задач, которые необходимо выполнить с результатами триггера.

<a name="add-action"></a>

## <a name="add-blob-storage-action"></a>Добавление действия хранилища BLOB-объектов

В Azure Logic Apps [действие](../logic-apps/logic-apps-overview.md#logic-app-concepts) — это шаг в рамках рабочего процесса, выполняемый после срабатывания триггера или другого действия. В этом примере приложение логики запускается при срабатывании [триггера повторения](../connectors/connectors-native-recurrence.md).

1. На [портале Azure](https://portal.azure.com) или в Visual Studio откройте приложение логики в конструкторе приложений логики. В этом примере используется портал Azure.

2. В конструкторе приложений логики в разделе триггер или действие выберите **новый шаг**.

   ![Добавить действие](./media/connectors-create-api-azureblobstorage/add-action.png) 

   Чтобы добавить действие между существующими шагами, наведите указатель мыши на соединяющую стрелку. Выберите отображаемый знак плюса ( **+** ) и щелкните **Добавить действие**.

3. В поле поиска введите "большой двоичный объект azure" в качестве условия фильтра. В списке действий выберите любое необходимое действие.

   В этом примере используется следующее действие: **Получение содержимого BLOB-объекта**

   ![Выбор действия](./media/connectors-create-api-azureblobstorage/azure-blob-action.png)

4. Если вам будет предложено ввести сведения о подключении, [создайте подключение к хранилищу BLOB-объектов Azure](#create-connection).
Или, если подключение уже существует, введите необходимые сведения для действия.

   Для этого примера выберите нужный файл.

   1. В поле **Большой двоичный объект** выберите значок папки.
  
      ![Выбор папки](./media/connectors-create-api-azureblobstorage/action-select-folder.png)

   2. Найдите и выберите файл на основе **идентификационного номера** большого двоичного объекта. Вы можете найти этот **идентификационный номер** в метаданных большого двоичного объекта, возвращаемых триггером хранилища BLOB-объектов (см. выше).

5. Завершив работу, нажмите кнопку **Сохранить** на панели инструментов конструктора.
Для тестирования приложения логики выбранная папка должна содержать большой двоичный объект.

В этом примере возвращается только содержимое большого двоичного объекта. Чтобы просмотреть содержимое, добавьте другое действие для создания файла с большим двоичным объектом c использованием другого соединителя. Например, добавьте действие OneDrive, которое создает файл на основе содержимого большого двоичного объекта.

<a name="create-connection"></a>

## <a name="connect-to-storage-account"></a>Подключение к учетной записи хранилища

[!INCLUDE [Create connection general intro](../../includes/connectors-create-connection-general-intro.md)]

[!INCLUDE [Create a connection to Azure blob storage](../../includes/connectors-create-api-azureblobstorage.md)]

## <a name="connector-reference"></a>Справочник по соединителям

Технические сведения, такие как триггеры, действия и ограничения, описанные в файле Open API (ранее — Swagger) соединителя, см. на [странице справочника по соединителю](/connectors/azureblobconnector/).

## <a name="next-steps"></a>Следующие шаги

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
