---
title: Планирование повторяющихся задач с помощью триггера повторения — Azure Logic Apps
description: Планирование и запуск повторяющиеся автоматизированные задачи и рабочие процессы с триггером повторения в Azure Logic Apps
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: deli, klam, LADocs
ms.topic: conceptual
ms.date: 05/25/2019
ms.openlocfilehash: f5fc778ee4d8f91232bc732cc276f642f748b29d
ms.sourcegitcommit: 8c49df11910a8ed8259f377217a9ffcd892ae0ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66297532"
---
# <a name="create-schedule-and-run-recurring-tasks-and-workflows-with-the-recurrence-trigger-in-azure-logic-apps"></a>Создавать, планировать и выполнять повторяющиеся задачи и рабочие процессы с триггером повторения в Azure Logic Apps

Регулярно запускать на конкретное расписание задания, задачи или процессов, рабочий процесс приложения логики можно начать со встроенной **Повтор - расписание** триггера. Можно задать дату и время, а также часовой пояс для запуска рабочего процесса и сведения о повторении для повторения этого рабочего процесса. Если повторения отсутствуют по любой причине, этот триггер продолжает во время следующего запланированного интервала повтора. Дополнительные сведения о встроенных расписание триггеры и действия, см. в разделе [расписание и повторяющиеся автоматического запуска, задачи и рабочие процессы с помощью Azure Logic Apps](../logic-apps/concepts-schedule-automated-recurring-tasks-workflows.md).

Ниже приведены некоторые шаблоны, которые поддерживает этот триггер, а также более сложные шаблоны повторения и сложные расписания.

* Незамедлительное выполнение и повторение каждые *n* число секунд, минут, часов, дней, недель или месяцев.

* Запустить в определенную дату и время, а затем запуск и повторение каждые *n* число секунд, минут, часов, дней, недель или месяцев.

* Запуск и повторение один или несколько раз каждый день, например в 8:00 или 17:00.

* Запуск и повторение каждую неделю, но только в определенные дни, например в субботу и воскресенье.

* Запуск и повторение каждую неделю, но только в определенные дни и время, например с понедельника по пятницу с 8:00 до 17:00.

Различия между этот триггер и триггер скользящее окно или Дополнительные сведения о планировании повторяющихся рабочих процессов, см. в разделе [автоматической расписание и выполнения повторяющихся задач, процессы и рабочие процессы с помощью Azure Logic Apps](../logic-apps/concepts-schedule-automated-recurring-tasks-workflows.md).

> [!TIP]
> Если вы хотите вызвать приложение логики и запустить только один раз в будущем, см. раздел [выполнения заданий только один раз](../logic-apps/concepts-schedule-automated-recurring-tasks-workflows.md#run-once).

## <a name="prerequisites"></a>Технические условия

* Подписка Azure. Если у вас нет подписки, вы можете [зарегистрироваться для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* Базовые знания о [приложений логики](../logic-apps/logic-apps-overview.md). Если вы знакомы с приложениями логики, узнайте [как создать свое первое приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

## <a name="add-recurrence-trigger"></a>Добавление триггера повторения

1. Войдите на [портале Azure](https://portal.azure.com). Создание пустого приложения логики.

1. После того как отобразится конструктор приложений логики, в поле поиска введите «повторение» в качестве фильтра. В списке триггеров выберите этот триггер как первый шаг в рабочем процессе приложения логики: **Периодичность**

   ![Выберите триггер «Повторение»](./media/connectors-native-recurrence/add-recurrence-trigger.png)

1. Задайте интервал повторения и единицу времени. В этом примере задайте запуск рабочего процесса каждый день.

   ![Установка интервала и частоты](./media/connectors-native-recurrence/recurrence-trigger-details.png)

   | Свойство | Обязательно для заполнения | Имя JSON | type | Описание |
   |----------|----------|-----------|------|-------------|
   | **Интервал** | Да | interval | Целое число  | Положительное целое число, которое описывает, как часто выполняется рабочий процесс с учетом заданной частоты. Ниже приведены минимальный и максимальный интервалы. <p>— Месяц: 1–16 месяцев. </br>— День: 1–500 дней. </br>— Час: 1–12 000 часов. </br>— Минута: 1–72 000 минут. </br>— Секунда: 1–9 999 999 секунд.<p>Например, если интервал равен 6, а значение частоты — "Месяц", то повтор будет происходить каждые 6 месяцев. |
   | **Frequency** | Да | frequency | String | Единица измерения времени, используемая для повторения: **Second** (секунда), **Minute** (минута), **Hour** (час), **Day** (день), **Week** (неделя) или **Month** (месяц). |
   ||||||

   Дополнительные параметры планирования, откройте **добавьте параметр** списка. 
   Любой вами параметры отображаться по триггеру, после выбора.

   ![Расширенные параметры планирования](./media/connectors-native-recurrence/recurrence-trigger-more-options-details.png)

   | Свойство | Обязательно для заполнения | Имя JSON | type | Описание |
   |----------|----------|-----------|------|-------------|
   | **Часовой пояс** | Нет | timeZone | String | Применяется только при указании времени начала, так как этот триггер не принимает [смещение от UTC](https://en.wikipedia.org/wiki/UTC_offset). Выберите часовой пояс, который необходимо применить. |
   | **Время начала** | Нет | startTime | String | Укажите дату и время начала в следующем формате: <p>ГГГГ-ММ-ДДTчч:мм:сс, если выбран часовой пояс <p>-или- <p>ГГГГ-ММ-ДДTчч:мм:ссZ, если часовой пояс не выбран. <p>Например, 18 сентября 2017 г. в 14:00, затем укажите «2017-09-18T14:00:00» и выберите часовой пояс, например по стандартному тихоокеанскому времени. Или укажите 2017-09-18T14:00:00Z без часового пояса. <p>**Примечание.** Это время начала должно соответствовать [спецификации даты и времени ISO 8601](https://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations) в [формате UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time), но без [смещения от UTC](https://en.wikipedia.org/wiki/UTC_offset). Если вы не выберите часовой пояс, то необходимо в конце добавить букву Z без пробелов. Эта буква Z ссылается на соответствующее [судовое время](https://en.wikipedia.org/wiki/Nautical_time). <p>В простых расписаниях время начала определяет первый случай выполнения задания, а в сложных расписаниях триггер срабатывает не раньше, чем наступит время начала. [*Как можно использовать дату и время начала?* ](../logic-apps/concepts-schedule-automated-recurring-tasks-workflows.md#start-time) |
   | **В эти дни** | Нет | weekDays | Строка или массив строк | Если вы выбрали значение Week, вы можете выбрать один или больше дней, когда необходимо выполнять рабочий процесс: **Monday** (понедельник), **Tuesday** (вторник), **Wednesday** (среда), **Thursday** (четверг), **Friday** (пятница), **Saturday** (суббота) и **Sunday** (воскресенье). |
   | **В эти часы** | Нет | hours | Целое число или массив целых чисел | Если выбрать «День» или «Неделя», можно выбрать один или несколько целых чисел от 0 до 23 часов дня в день для выполнения рабочего процесса. <p><p>Например если указать «10», «12» и «14», вы получите 10 AM, 12 PM и 14: 00 часов дня, но минуты дня рассчитывается на основе при запуске повторения. Чтобы задать минуты дня, укажите значение для **в эти минуты** свойство. |
   | **В эти минуты** | Нет | minutes | Целое число или массив целых чисел | Если вы выбрали значение "День" или "Неделя", то можно выбрать одно или несколько целых чисел от 0 до 59. В эти минуты часа будет запускаться рабочий процесс. <p>Например, если указать 30 минут и использовать предыдущий пример для часов, то вы получите 10:30, 12:30 и 14:30. |
   |||||

   Например, предположим, что сегодня понедельник, 4 сентября 2017 г. Следующий триггер повторения сработает *не раньше* от даты начала и времени, который является понедельник, 18 сентября 2017 г. в 8:00 по тихоокеанскому времени. Тем не менее для расписания повторения заданы значения 10:30, 12:30 и 14:30 только по понедельникам. Таким образом, впервые триггер срабатывает и создает экземпляр рабочего процесса приложения логики в 10:30. Дополнительные сведения о времени начала см. в этих [примерах](../logic-apps/concepts-schedule-automated-recurring-tasks-workflows.md#start-time).

   Последующие запуски будут выполняться в 12:30 и 14:30 в тот же день. Каждое повторение создает собственный экземпляр рабочего процесса. После этого весь этот процесс повторяется снова в следующий понедельник. [*Какие еще существуют примеры повторений?* ](../logic-apps/concepts-schedule-automated-recurring-tasks-workflows.md#example-recurrences)

   ![Расширенный пример планирования](./media/connectors-native-recurrence/recurrence-trigger-more-options-advanced-schedule.png)

   > [!NOTE]
   > Триггер отображает предварительную версию определенного повторения, только если в качестве частоты установлено значение "День" или "Неделя".

1. Теперь можно создать оставшийся рабочий процесс с другими действиями. Дополнительные действия, которые можно добавить, см. в разделе [соединители для Azure Logic Apps](../connectors/apis-list.md).

## <a name="workflow-definition---recurrence"></a>Определение рабочего процесса — повторения

В свое приложение логики базового определения рабочего процесса, который использует формат JSON, вы можете просмотреть [определения триггера повторения](../logic-apps/logic-apps-workflow-actions-triggers.md#recurrence-trigger) с параметрами, которые были выбраны. Чтобы просмотреть это определение, на панели инструментов конструктора, выберите **представление кода**. Чтобы вернуться в конструктор, выберите на панели инструментов конструктора **конструктор**.

В этом примере показано, как может выглядеть определения триггера повторения в определении базового рабочего процесса:

``` json
"triggers": {
   "Recurrence": {
      "type": "Recurrence",
      "recurrence": {
         "frequency": "Week",
         "interval": 1,
         "schedule": {
            "hours": [
               10,
               12,
               14
            ],
            "minutes": [
               30
            ],
            "weekDays": [
               "Monday"
            ]
         },
         "startTime": "2017-09-07T14:00:00Z",
         "timeZone": "Pacific Standard Time"
      }
   }
}
```

## <a name="next-steps"></a>Дальнейшие действия

* [Приостановка рабочих процессов с помощью действий задержки](../connectors/connectors-native-delay.md)
* [Соединители для Logic Apps](../connectors/apis-list.md)
