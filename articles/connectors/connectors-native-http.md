---
title: Конечные точки службы вызова с помощью HTTP или HTTPS
description: Отправка исходящих запросов HTTP или HTTPS в конечные точки обслуживания из приложений логики Azure
services: logic-apps
ms.suite: integration
ms.reviewer: klam, logicappspm
ms.topic: conceptual
ms.date: 03/12/2020
tags: connectors
ms.openlocfilehash: 6c52f2df34faf441ab70b48b11bbc393ebcecb65
ms.sourcegitcommit: eefb0f30426a138366a9d405dacdb61330df65e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81617602"
---
# <a name="call-service-endpoints-over-http-or-https-from-azure-logic-apps"></a>Конечные точки службы вызова по адресу HTTP или HTTPS из приложений логики Azure

С [помощью приложений Azure Logic Apps](../logic-apps/logic-apps-overview.md) и встроенного триггера или действия HTTP можно создавать автоматизированные задачи и рабочие процессы, которые отправляют запросы в конечные точки обслуживания по http или HTTPS. Например, вы можете контролировать конечную точку службы для вашего веб-сайта, проверяя эту конечную точку в определенном графике. Когда указанное событие происходит в этой конечном пункте, например, в результате запуска веб-сайта, событие запускает рабочий процесс приложения логики и запускает действия в этом рабочем процессе. Если вы хотите получать и отвечать на входящие вызовы HTTPS вместо этого, используйте встроенный [триггер запроса или действия ответа.](../connectors/connectors-native-reqres.md)

> [!NOTE]
> Основываясь на возможностях целевой конечный точки, разъем HTTP поддерживает версии безопасности транспортного уровня (TLS) 1.0, 1.1 и 1.2. Logic Apps ведет переговоры с конечной точкой по использованию самой высокой поддерживаемой версии возможно. Так, например, если конечная точка поддерживает 1.2, разъем использует 1.2 сперва. В противном случае разъем использует следующую самую высокую поддерживаемую версию.

Чтобы проверить или *опросить* конечную точку в постоянном графике, [добавьте триггер HTTP](#http-trigger) в качестве первого шага в рабочем процессе. Каждый раз, когда триггер проверяет конечную точку, триггер вызывает или отправляет *запрос* в конечную точку. Ответ от конечной точки определяет, выполняется ли рабочий процесс приложения логики. Триггер передает любое содержимое из ответа на конечные точки на действия в приложении логики.

Чтобы вызвать конечную точку из любого другого места в рабочем процессе, [добавьте действие HTTP.](#http-action) Ответ от конечной точки определяет, как выполнить оставшиеся действия рабочего процесса.

> [!IMPORTANT]
> Если триггер или действие HTTP включает эти заголовки, Logic Apps удаляет эти заголовки из генерируемого сообщения запроса без отображения предупреждения или ошибки:
>
> * `Accept-*`
> * `Allow`
> * `Content-*`с этими `Content-Disposition`исключениями: , `Content-Encoding`и`Content-Type`
> * `Cookie`
> * `Expires`
> * `Host`
> * `Last-Modified`
> * `Origin`
> * `Set-Cookie`
> * `Transfer-Encoding`
>
> Хотя логические приложения не помешают вам сохранить логические приложения, которые используют триггер HTTP или действие с этими заголовками, Logic Apps игнорирует эти заголовки.

В этой статье показано, как добавить триггер или действие HTTP в рабочий процесс приложения логики.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [зарегистрируйтесь для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* URL-адрес для целевой точки, которую вы хотите вызвать

* Базовые знания о [создании приложений логики](../logic-apps/quickstart-create-first-logic-app-workflow.md). Если вы новичок в логических приложениях, просмотрите [Что такое Azure Logic Apps?](../logic-apps/logic-apps-overview.md)

* Приложение логики, откуда вы хотите вызвать целевую конечную точку. Для начала спускового крючка HTTP [создайте пустое логическое приложение.](../logic-apps/quickstart-create-first-logic-app-workflow.md) Чтобы использовать действие HTTP, запустите логическое приложение с любым спусковым крючком. Этот пример использует триггер HTTP в качестве первого шага.

<a name="http-trigger"></a>

## <a name="add-an-http-trigger"></a>Добавить триггер HTTP

Этот встроенный триггер делает http вызов к указанному URL-адресу для конечной точки и возвращает ответ.

1. Войдите на [портал Azure](https://portal.azure.com). Откройте свое пустое приложение логики в Logic App Designer.

1. Под полем поиска дизайнера выберите **Встроенный.** В поле поиска введите `http` в качестве фильтра. Из списка **триггеров** выберите триггер **HTTP.**

   ![Выбор триггера HTTP](./media/connectors-native-http/select-http-trigger.png)

   Этот пример переименовывает триггер на триггер HTTP, так что шаг имеет более описательное имя. Кроме того, пример позже добавляет действие HTTP, и оба имени должны быть уникальными.

1. Укажите значения [параметров триггера HTTP,](../logic-apps/logic-apps-workflow-actions-triggers.md#http-trigger) которые вы хотите включить в вызов к целевой точке. Назначьте повторение частоты, как часто вы хотите, чтобы триггер проверил конечную точку цели.

   ![Ввод параметров триггера HTTP](./media/connectors-native-http/http-trigger-parameters.png)

   При выборе типа проверки подлинности, кроме **None,** настройки аутентификации различаются в зависимости от выбора. Для получения дополнительной информации о типах аутентификации, доступных для HTTP, см.

   * [Добавление аутентификации в исходящие вызовы](../logic-apps/logic-apps-securing-a-logic-app.md#add-authentication-outbound)
   * [Authenticate доступ к ресурсам с управляемыми удостоверениями](../logic-apps/create-managed-service-identity.md)

1. Чтобы добавить другие доступные параметры, откройте новый список **параметров** и выберите параметры, которые вы хотите.

1. Продолжите создание рабочего процесса приложения логики с действиями, выполняемыми при срабатывании триггера.

1. Когда вы закончите, не забудьте сохранить приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

<a name="http-action"></a>

## <a name="add-an-http-action"></a>Добавить действие HTTP

Это встроенное действие делает http вызов к указанному URL-адресу для конечной точки и возвращает ответ.

1. Войдите на [портал Azure](https://portal.azure.com). Создание приложения логики в Конструкторе приложений логики.

   Этот пример использует триггер HTTP в качестве первого шага.

1. Под шагом, где вы хотите добавить действие HTTP, выберите **новый шаг.**

   Чтобы добавить действие между шагами, переместите указатель на стрелку между шагами. Выберите знак**+** плюс (), который появляется, а затем выберите **Добавить действие.**

1. В разделе **Выберите действие** выберите **Встроенный**. В поле поиска введите `http` в качестве фильтра. Из списка **действий** выберите действие **HTTP.**

   ![Выбор действия HTTP](./media/connectors-native-http/select-http-action.png)

   Этот пример переименовывает действие в "действие HTTP", так что шаг имеет более описательное имя.

1. Укажите значения [параметров действия HTTP,](../logic-apps/logic-apps-workflow-actions-triggers.md#http-action) которые необходимо включить в вызов к целевой точке.

   ![Ввод параметров для действия HTTP](./media/connectors-native-http/http-action-parameters.png)

   При выборе типа проверки подлинности, кроме **None,** настройки аутентификации различаются в зависимости от выбора. Для получения дополнительной информации о типах аутентификации, доступных для HTTP, см.

   * [Добавление аутентификации в исходящие вызовы](../logic-apps/logic-apps-securing-a-logic-app.md#add-authentication-outbound)
   * [Authenticate доступ к ресурсам с управляемыми удостоверениями](../logic-apps/create-managed-service-identity.md)

1. Чтобы добавить другие доступные параметры, откройте новый список **параметров** и выберите параметры, которые вы хотите.

1. Когда вы закончите, не забудьте сохранить приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

## <a name="content-with-multipartform-data-type"></a>Содержимое с многокомпонентным/форм-типом данных

Для обработки `multipart/form-data` содержимого, вводя в запросы HTTP, `$content-type` `$multipart` можно добавить объект JSON, который включает объект и атрибуты в тело запроса HTTP, используя этот формат.

```json
"body": {
   "$content-type": "multipart/form-data",
   "$multipart": [
      {
         "body": "<output-from-trigger-or-previous-action>",
         "headers": {
            "Content-Disposition": "form-data; name=file; filename=<file-name>"
         }
      }
   ]
}
```

Например, предположим, что у вас есть логическое приложение, которое отправляет запрос HTTP POST на `multipart/form-data` веб-сайт, используя API этого сайта, который поддерживает тип. Вот как это действие может выглядеть:

![Данные о многокомпонентных формах](./media/connectors-native-http/http-action-multipart.png)

Вот тот же пример, который показывает определение JSON действия HTTP в базовом определении рабочего процесса:

```json
"HTTP_action": {
   "inputs": {
      "body": {
         "$content-type": "multipart/form-data",
         "$multipart": [
            {
               "body": "@trigger()",
               "headers": {
                  "Content-Disposition": "form-data; name=file; filename=myExcelFile.xlsx"
               }
            }
         ]
      },
      "method": "POST",
      "uri": "https://finance.contoso.com"
   },
   "runAfter": {},
   "type": "Http"
}
```

## <a name="connector-reference"></a>Справочник по соединителям

Для получения дополнительной информации о параметрах триггера и действия см.

* [Параметры триггера HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md#http-trigger)
* [Параметры действия HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md#http-action)

### <a name="output-details"></a>Сведения о выходных данных

Вот более подробная информация о выводах из триггера ИЛИ действия HTTP, который возвращает эту информацию:

| Имя свойства | Тип | Описание |
|---------------|------|-------------|
| Заголовки | объект | Заголовки из запроса |
| текст | объект | Объект JSON | Объект с содержанием тела из запроса |
| Код состояния | INT | Код состояния из запроса |
|||

| Код состояния | Описание |
|-------------|-------------|
| 200 | OK |
| 202 | Принято |
| 400 | Недопустимый запрос |
| 401 | Не авторизовано |
| 403 | Запрещено |
| 404 | Не найдено |
| 500 | Внутренняя ошибка сервера. Произошла неизвестная ошибка. |
|||

## <a name="next-steps"></a>Дальнейшие действия

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
