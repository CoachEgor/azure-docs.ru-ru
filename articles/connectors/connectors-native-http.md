---
title: Вызов конечных точек службы с помощью HTTP или HTTPS
description: Отправка исходящих запросов HTTP или HTTPS в конечные точки службы из Azure Logic Apps
services: logic-apps
ms.suite: integration
ms.reviewer: jonfan, logicappspm
ms.topic: conceptual
ms.date: 03/12/2020
tags: connectors
ms.openlocfilehash: 9ed3d960b3f5653ea8706b39559c9d5a71c45a6c
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "81867635"
---
# <a name="call-service-endpoints-over-http-or-https-from-azure-logic-apps"></a>Вызов конечных точек службы по протоколу HTTP или HTTPS из Azure Logic Apps

С помощью [Azure Logic Apps](../logic-apps/logic-apps-overview.md) и встроенного триггера HTTP или действия можно создавать автоматизированные задачи и рабочие процессы, которые отправляют запросы к конечным точкам службы по протоколам HTTP или HTTPS. Например, можно отслеживать конечную точку службы для веб-сайта, проверяя эту конечную точку по определенному расписанию. Когда указанное событие происходит в этой конечной точке, например веб-сайт переключается, событие запускает рабочий процесс приложения логики и выполняет действия в этом рабочем процессе. Если вы хотите получить и отреагировать на входящие вызовы HTTPS, используйте встроенный [триггер запроса или действие ответа](../connectors/connectors-native-reqres.md).

> [!NOTE]
> На основе возможностей целевой конечной точки соединитель HTTP поддерживает протоколы TLS версии 1,0, 1,1 и 1,2. Logic Apps согласовывает с конечной точкой, используя максимально возможную поддерживаемую версию. Например, если конечная точка поддерживает 1,2, то в соединителе сначала используется 1,2. В противном случае соединитель использует следующую самую новую поддерживаемую версию.
>
> Соединитель HTTP не поддерживает промежуточные сертификаты TLS/SSL для проверки подлинности.

Чтобы проверить или *опросить* конечную точку по повторяющемуся расписанию, [добавьте триггер HTTP](#http-trigger) в качестве первого шага в рабочем процессе. Каждый раз, когда триггер проверяет конечную точку, триггер вызывает или отправляет *запрос* в конечную точку. Ответ от конечной точки определяет, выполняется ли рабочий процесс приложения логики. Триггер передает любое содержимое из ответа конечной точки в действия в приложении логики.

Чтобы вызвать конечную точку из любого места в рабочем процессе, [добавьте действие HTTP](#http-action). Ответ от конечной точки определяет, как выполнить оставшиеся действия рабочего процесса.

> [!IMPORTANT]
> Если триггер или действие HTTP включает эти заголовки, Logic Apps удаляет эти заголовки из созданного сообщения запроса без отображения предупреждения или ошибки:
>
> * `Accept-*`
> * `Allow`
> * `Content-*`со следующими исключениями `Content-Disposition`: `Content-Encoding`, и`Content-Type`
> * `Cookie`
> * `Expires`
> * `Host`
> * `Last-Modified`
> * `Origin`
> * `Set-Cookie`
> * `Transfer-Encoding`
>
> Хотя Logic Apps не останавливает сохранение приложений логики, использующих триггер HTTP или действие с этими заголовками, Logic Apps пропускает эти заголовки.

В этой статье показано, как добавить триггер HTTP или действие в рабочий процесс приложения логики.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [зарегистрируйтесь для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* URL-адрес целевой конечной точки, которую необходимо вызвать

* Базовые знания о [создании приложений логики](../logic-apps/quickstart-create-first-logic-app-workflow.md). Если вы не знакомы с приложениями логики, ознакомьтесь с [Azure Logic Apps](../logic-apps/logic-apps-overview.md)?

* Приложение логики, из которого нужно вызвать целевую конечную точку. Чтобы начать с триггера HTTP, [создайте пустое приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md). Чтобы использовать действие HTTP, запустите приложение логики с любым нужным триггером. В этом примере в качестве первого шага используется триггер HTTP.

<a name="http-trigger"></a>

## <a name="add-an-http-trigger"></a>Добавление триггера HTTP

Этот встроенный триггер выполняет HTTP-вызов по указанному URL-адресу для конечной точки и возвращает ответ.

1. Войдите на [портал Azure](https://portal.azure.com). Откройте пустое приложение логики в конструкторе приложений логики.

1. В поле поиска конструктора выберите **встроенный**. В поле поиска введите `http` в качестве фильтра. В списке **триггеры** Выберите триггер **http** .

   ![Выбор триггера HTTP](./media/connectors-native-http/select-http-trigger.png)

   В этом примере триггер переименовывается в "HTTP Trigger", чтобы у шага было более описательное имя. Кроме того, в примере далее добавляется действие HTTP, и оба имени должны быть уникальными.

1. Укажите значения [параметров триггера HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md#http-trigger) , которые необходимо включить в вызов целевой конечной точки. Настройте периодичность, с которой триггер должен проверять целевую конечную точку.

   ![Ввод параметров триггера HTTP](./media/connectors-native-http/http-trigger-parameters.png)

   Если выбран тип проверки подлинности, отличный от **None**, параметры проверки подлинности будут отличаться в зависимости от выбранного. Дополнительные сведения о типах проверки подлинности, доступных для HTTP, см. в следующих разделах:

   * [Добавление проверки подлинности в исходящие вызовы](../logic-apps/logic-apps-securing-a-logic-app.md#add-authentication-outbound)
   * [Проверка подлинности доступа к ресурсам с помощью управляемых удостоверений](../logic-apps/create-managed-service-identity.md)

1. Чтобы добавить другие доступные параметры, откройте список **Добавить новый параметр** и выберите нужные параметры.

1. Продолжите создание рабочего процесса приложения логики с действиями, выполняемыми при срабатывании триггера.

1. Когда все будет готово, не забудьте сохранить приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

<a name="http-action"></a>

## <a name="add-an-http-action"></a>Добавление действия HTTP

Это встроенное действие выполняет HTTP-вызов по указанному URL-адресу для конечной точки и возвращает ответ.

1. Войдите на [портал Azure](https://portal.azure.com). Создание приложения логики в Конструкторе приложений логики.

   В этом примере в качестве первого шага используется триггер HTTP.

1. На шаге, куда нужно добавить действие HTTP, выберите **новый шаг**.

   Чтобы добавить действие между шагами, переместите указатель на стрелку между шагами. Выберите отображаемый знак плюса (**+**), а затем щелкните **Добавить действие**.

1. В разделе **Выберите действие** выберите **Встроенный**. В поле поиска введите `http` в качестве фильтра. В списке **действия** выберите действие **http** .

   ![Выбор действия HTTP](./media/connectors-native-http/select-http-action.png)

   В этом примере действие переименовывается в "действие HTTP", чтобы у шага было более описательное имя.

1. Укажите значения [параметров HTTP-действия](../logic-apps/logic-apps-workflow-actions-triggers.md#http-action) , которые необходимо включить в вызов целевой конечной точки.

   ![Ввод параметров для действия HTTP](./media/connectors-native-http/http-action-parameters.png)

   Если выбран тип проверки подлинности, отличный от **None**, параметры проверки подлинности будут отличаться в зависимости от выбранного. Дополнительные сведения о типах проверки подлинности, доступных для HTTP, см. в следующих разделах:

   * [Добавление проверки подлинности в исходящие вызовы](../logic-apps/logic-apps-securing-a-logic-app.md#add-authentication-outbound)
   * [Проверка подлинности доступа к ресурсам с помощью управляемых удостоверений](../logic-apps/create-managed-service-identity.md)

1. Чтобы добавить другие доступные параметры, откройте список **Добавить новый параметр** и выберите нужные параметры.

1. Когда все будет готово, не забудьте сохранить приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

## <a name="content-with-multipartform-data-type"></a>Содержимое с типом данных multipart/form-data

Для обработки содержимого, которое `multipart/form-data` имеет тип в HTTP-запросах, можно добавить объект JSON, `$content-type` включающий `$multipart` атрибуты и, в текст HTTP-запроса, используя этот формат.

```json
"body": {
   "$content-type": "multipart/form-data",
   "$multipart": [
      {
         "body": "<output-from-trigger-or-previous-action>",
         "headers": {
            "Content-Disposition": "form-data; name=file; filename=<file-name>"
         }
      }
   ]
}
```

Например, предположим, что у вас есть приложение логики, которое отправляет запрос HTTP POST для файла Excel на веб-сайт с помощью API этого сайта, который поддерживает `multipart/form-data` этот тип. Вот как может выглядеть это действие:

![Составные данные форм](./media/connectors-native-http/http-action-multipart.png)

Ниже приведен тот же пример, в котором показано определение JSON действия HTTP в базовом определении рабочего процесса:

```json
"HTTP_action": {
   "inputs": {
      "body": {
         "$content-type": "multipart/form-data",
         "$multipart": [
            {
               "body": "@trigger()",
               "headers": {
                  "Content-Disposition": "form-data; name=file; filename=myExcelFile.xlsx"
               }
            }
         ]
      },
      "method": "POST",
      "uri": "https://finance.contoso.com"
   },
   "runAfter": {},
   "type": "Http"
}
```

## <a name="connector-reference"></a>Справочник по соединителям

Дополнительные сведения о параметрах триггера и действия см. в следующих разделах:

* [Параметры триггера HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md#http-trigger)
* [Параметры действия HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md#http-action)

### <a name="output-details"></a>Сведения о выходных данных

Ниже приведены дополнительные сведения о выходных данных триггера или действия HTTP, которые возвращают эти сведения:

| Имя свойства. | Type | Описание |
|---------------|------|-------------|
| Заголовки | object | Заголовки из запроса |
| текст | object | Объект JSON | Объект с содержимым текста из запроса |
| Код состояния | INT | Код состояния из запроса |
|||

| Код состояния | Описание |
|-------------|-------------|
| 200 | OK |
| 202 | Принято |
| 400 | Недопустимый запрос |
| 401 | Не авторизовано |
| 403 | Запрещено |
| 404 | Не найдено |
| 500 | Внутренняя ошибка сервера. Произошла неизвестная ошибка. |
|||

## <a name="next-steps"></a>Дальнейшие шаги

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
