---
title: Создание рабочих процессов или действий на основе событий в Azure Logic Apps | Документация Майкрософт
description: Автоматизация рабочих процессов или действий на основе событий с помощью веб-перехватчиков и Azure Logic Apps
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: klam, jehollan, LADocs
ms.assetid: 71775384-6c3a-482c-a484-6624cbe4fcc7
ms.topic: article
tags: connectors
ms.date: 07/21/2016
ms.openlocfilehash: c3047000843e054e71ec1a80313118a25e7c4905
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60447236"
---
# <a name="create-event-based-workflows-or-actions-by-using-webhooks-and-azure-logic-apps"></a>Создание рабочих процессов или действий на основе событий с помощью веб-перехватчиков и Azure Logic Apps

С помощью действия и триггера webhook вы можете активировать, приостанавливать и возобновлять потоки для осуществления следующих задач:

* Активация триггера из [концентратора событий Azure](https://github.com/logicappsio/EventHubAPI) при получении элемента.
* Ожидание утверждения, прежде чем продолжить рабочий процесс.

Узнайте больше о том, [как создавать настраиваемые API, поддерживающие webhook](../logic-apps/logic-apps-create-api-app.md).

## <a name="use-the-webhook-trigger"></a>Использование триггера webhook

[*Триггер*](../connectors/apis-list.md) — это событие, которое запускает рабочий процесс приложения логики. Триггер веб-перехватчика на основе событий, который не зависит от опроса для новых элементов. При сохранении приложения логики с триггером веб-перехватчика, или при изменении приложения логики из отключено "на" включен, триггер веб-перехватчика *подписывается* для указанной службы или конечной точки, зарегистрировав *URL-адрес обратного вызова* с этой службы или конечной точки. Триггер использует этот URL-адрес для выполнения приложения логики при необходимости. Как и [триггер запроса](connectors-native-reqres.md), приложение логики срабатывает сразу же, когда ожидаемое событие происходит. Триггер *отменяет подписку* при удалении триггера и сохраните приложение логики, или при изменении приложения логики из включенного на отключенное.

Ниже приведен пример настройки триггера HTTP в конструкторе приложений логики. Предполагается, что вы уже выполнили развертывание или обращаетесь к API, который соответствует [шаблону подписки и отмены подписки webhook в приложениях логики](../logic-apps/logic-apps-create-api-app.md#webhook-triggers). 

**Добавление триггера webhook**

1. Сначала добавьте триггер **HTTP Webhook** в приложение логики.
2. Заполните параметры для вызовов подписки и отмены подписки webhook.

   Используйте тот же формат, что и для [действия HTTP](connectors-native-http.md).

     ![Триггер HTTP](./media/connectors-native-webhook/using-trigger.png)

3. Добавьте хотя бы одно действие.
4. Щелкните **Сохранить**, чтобы опубликовать приложение логики. Это вызовет конечную точку подписки с URL-адресом обратного вызова, необходимым для запуска этого приложения логики.
5. Каждый раз, когда служба выполняет запрос `HTTP POST` по URL-адресу обратного вызова, срабатывает приложение логики и добавляются все данные, передаваемые в запросе.

## <a name="use-the-webhook-action"></a>Использование действия webhook

[ *Действие* ](../connectors/apis-list.md) — это операция, которая определена и запустить с рабочего процесса приложения логики. Когда приложение логики выполняет действие webhook, это действие *подписывается* для указанной службы или конечной точки, зарегистрировав *URL-адрес обратного вызова* с этой службы или конечной точки. Затем действие веб-перехватчика ожидает, вызовы URL-адрес перед логики приложения возобновляется служб. Приложение логики отменяет подписку на службы или конечной точки в таких случаях: 

* После успешного завершения действия веб-перехватчика
* При отмене выполнения приложения логики при ожидании ответа
* Прежде чем логику времени ожидания выполнения приложения

Например [ **отправлять сообщение с утверждением** ](connectors-create-api-office365-outlook.md) действие является примером действия веб-перехватчика, который соответствует данному шаблону. С помощью действия webhook этот шаблон можно расширить в любую службу. 

Ниже приведен пример настройки действия webhook в конструкторе приложений логики. Предполагается, что вы уже выполнили развертывание или обращаетесь к API, который соответствует [шаблону подписки и отмены подписки webhook, используемому в приложениях логики](../logic-apps/logic-apps-create-api-app.md#webhook-actions). 

**Добавление действия webhook**

1. Выберите **Новый шаг** > **Добавить действие**.

2. В поле поиска введите "webhook", чтобы найти действие **HTTP Webhook**.

    ![Выбор действия запроса](./media/connectors-native-webhook/using-action-1.png)

3. Заполните параметры для вызовов подписки и отмены подписки webhook.

   Используйте тот же формат, что и для [действия HTTP](connectors-native-http.md).

     ![Завершение действия запроса](./media/connectors-native-webhook/using-action-2.png)
   
   Во время выполнения после перехода к этому шагу приложение логики вызывает конечную точку подписки.

4. Щелкните **Сохранить**, чтобы опубликовать приложение логики.

## <a name="technical-details"></a>Технические сведения

Ниже приведены дополнительные сведения о триггерах и действиях, которые поддерживает webhook.

## <a name="webhook-triggers"></a>Триггеры webhook

| Действие | ОПИСАНИЕ |
| --- | --- |
| HTTP Webhook |Регистрация URL-адреса обратного вызова в службе, которая может вызывать URL-адрес для запуска приложения логики, когда это необходимо. |

### <a name="trigger-details"></a>Сведения о триггере

#### <a name="http-webhook"></a>HTTP Webhook

Регистрация URL-адреса обратного вызова в службе, которая может вызывать URL-адрес для запуска приложения логики, когда это необходимо.
Знак "*" обозначает обязательное поле.

| Отображаемое имя | Имя свойства | ОПИСАНИЕ |
| --- | --- | --- |
| Подписка: метод* |метод |Метод HTTP, используемый для запроса подписки. |
| Подписка: URI* |uri |URI HTTP, используемый для запроса подписки. |
| Отмена подписки: метод* |метод |Метод HTTP, используемый для запроса отмены подписки. |
| Отмена подписки: URI* |uri |URI HTTP, используемый для запроса отмены подписки. |
| Подписка: текст |текст |Основной текст HTTP-запроса подписки. |
| Подписка: заголовки |Заголовки |Заголовки HTTP-запроса подписки. |
| Подписка: проверка подлинности |authentication |Аутентификация HTTP, используемая для подписки. Дополнительные сведения см. в [статье, посвященной соединителю HTTP](connectors-native-http.md#authentication). |
| Отмена подписки: текст |текст |Основной текст HTTP-запроса отмены подписки. |
| Отмена подписки: заголовки |Заголовки |Заголовки HTTP-запроса отмены подписки. |
| Отмена подписки: проверка подлинности |authentication |Аутентификация HTTP, используемая для отмены подписки. Дополнительные сведения см. в [статье, посвященной соединителю HTTP](connectors-native-http.md#authentication). |

**Сведения о выходных данных**

Запрос webhook

| Имя свойства | Тип данных | ОПИСАНИЕ |
| --- | --- | --- |
| Заголовки |object |Заголовки запроса webhook. |
| Текст |object |Объект запроса webhook. |
| Код состояния |int |Код состояния запроса webhook. |

## <a name="webhook-actions"></a>Действия webhook

| Действие | ОПИСАНИЕ |
| --- | --- |
| HTTP Webhook |Регистрация URL-адреса обратного вызова в службе, которая может вызывать URL-адрес для возобновления шага рабочего процесса, когда это необходимо. |

### <a name="action-details"></a>Сведения о действиях

#### <a name="http-webhook"></a>HTTP Webhook

Регистрация URL-адреса обратного вызова в службе, которая может вызывать URL-адрес для возобновления шага рабочего процесса, когда это необходимо.
Знак "*" обозначает обязательное поле.

| Отображаемое имя | Имя свойства | ОПИСАНИЕ |
| --- | --- | --- |
| Подписка: метод* |метод |Метод HTTP, используемый для запроса подписки. |
| Подписка: URI* |uri |URI HTTP, используемый для запроса подписки. |
| Отмена подписки: метод* |метод |Метод HTTP, используемый для запроса отмены подписки. |
| Отмена подписки: URI* |uri |URI HTTP, используемый для запроса отмены подписки. |
| Подписка: текст |текст |Основной текст HTTP-запроса подписки. |
| Подписка: заголовки |Заголовки |Заголовки HTTP-запроса подписки. |
| Подписка: проверка подлинности |authentication |Аутентификация HTTP, используемая для подписки. Дополнительные сведения см. в [статье, посвященной соединителю HTTP](connectors-native-http.md#authentication). |
| Отмена подписки: текст |текст |Основной текст HTTP-запроса отмены подписки. |
| Отмена подписки: заголовки |Заголовки |Заголовки HTTP-запроса отмены подписки. |
| Отмена подписки: проверка подлинности |authentication |Аутентификация HTTP, используемая для отмены подписки. Дополнительные сведения см. в [статье, посвященной соединителю HTTP](connectors-native-http.md#authentication). |

**Сведения о выходных данных**

Запрос webhook

| Имя свойства | Тип данных | ОПИСАНИЕ |
| --- | --- | --- |
| Заголовки |object |Заголовки запроса webhook. |
| Текст |object |Объект запроса webhook. |
| Код состояния |int |Код состояния запроса webhook. |

## <a name="next-steps"></a>Дальнейшие действия

* [Создайте приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md)
* [Список соединителей](apis-list.md)
