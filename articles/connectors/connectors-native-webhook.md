---
title: Создание задачи на основе событий и рабочие процессы в Azure Logic Apps
description: Запустить, приостановить и возобновить автоматизированных задач, процессы и рабочие процессы на основе событий, которые происходят в конечной точке с помощью Azure Logic Apps
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: klam, LADocs
ms.topic: conceptual
ms.date: 07/05/2019
tags: connectors
ms.openlocfilehash: c2658df185d4836210c496d2c46a00a3541257a2
ms.sourcegitcommit: 5bdd50e769a4d50ccb89e135cfd38b788ade594d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/03/2019
ms.locfileid: "67541351"
---
# <a name="automate-event-based-tasks-and-workflows-by-using-http-webhooks-in-azure-logic-apps"></a>Автоматизировать задачи на основе событий и рабочие процессы с помощью веб-перехватчиков HTTP в Azure Logic Apps

С помощью [Azure Logic Apps](../logic-apps/logic-apps-overview.md) и встроенный соединитель веб-перехватчика HTTP, вы можете автоматизировать рабочие процессы, ожидания и выполняться на определенных событиях, которые происходят в конечной точке HTTP или HTTPS с помощью приложений логики. Например, можно создать приложение логики, которое отслеживает конечную точку службы, ожидает определенного события до активации рабочего процесса и выполнения указанных действий, а не Регулярная проверка или *опроса* этой конечной точки.

Ниже приведены некоторые примеры на основе событий рабочих процессов.

* Дождитесь элемент от [концентратора событий Azure](https://github.com/logicappsio/EventHubAPI) перед запуском приложения логики.
* Ожидание утверждения перед продолжением рабочего процесса.

## <a name="how-do-webhooks-work"></a>Как работают веб-перехватчиков?

Триггер веб-перехватчика HTTP на основе событий, которые не зависят от проверки или регулярно опроса для новых элементов. При сохранении приложения логики, который начинается с триггера webhook или при изменении приложения логики из отключенного состояния во включенное, триггер веб-перехватчика *подписывается* для определенной службы или конечной точки, зарегистрировав *URL-адрес обратного вызова* с этой службы или конечной точки. Триггер ожидает этой службы или конечной точки для вызова URL-адрес, который начинается выполнение приложения логики. Аналогичную [триггер запроса](connectors-native-reqres.md), приложение логики срабатывает сразу же, когда происходит указанное событие. Триггер *отменяет подписку* из службы или конечной точки при удалении триггера и сохраните приложение логики, или при изменении приложения логики из включенного на отключенное.

Действие веб-перехватчика HTTP также на основе событий и *подписывается* для определенной службы или конечной точки, зарегистрировав *URL-адрес обратного вызова* с этой службы или конечной точки. Действие webhook приостанавливает рабочий процесс приложения логики и ожидает, пока службы или конечной точки вызовы URL-адрес перед логики приложения возобновляется. Приложение логики действие *отменяет подписку* из службы или конечной точки в таких случаях:

* После успешного завершения действия веб-перехватчика
* При отмене выполнения приложения логики при ожидании ответа
* Прежде чем логику времени ожидания выполнения приложения

Например, Office 365 Outlook соединителя [ **отправлять сообщение с утверждением** ](connectors-create-api-office365-outlook.md) действие является примером действия веб-перехватчика, который соответствует данному шаблону. Этот шаблон можно расширить в любую службу с помощью действия webhook.

Дополнительные сведения см. в следующих статьях:

* [Параметры триггера веб-перехватчик HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md#http-webhook-trigger)
* [Веб-перехватчики и подписки](../logic-apps/logic-apps-workflow-actions-triggers.md#webhooks-and-subscriptions)
* [Создание пользовательских API, который поддерживает веб-перехватчика](../logic-apps/logic-apps-create-api-app.md)

## <a name="prerequisites"></a>Технические условия

* Подписка Azure. Если у вас еще нет подписки Azure, [зарегистрируйтесь для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* URL-адрес для конечной точки, уже развернутых или API, который поддерживает веб-перехватчика подписки и отмены подписки шаблон для [триггеры веб-перехватчика в logic apps](../logic-apps/logic-apps-create-api-app.md#webhook-triggers) или [действия веб-перехватчика в logic apps](../logic-apps/logic-apps-create-api-app.md#webhook-actions) соответствующим образом

* Базовые знания о [создании приложений логики](../logic-apps/quickstart-create-first-logic-app-workflow.md). Если вы не знакомы с приложениями логики, ознакомьтесь со статьей [Что такое Azure Logic Apps](../logic-apps/logic-apps-overview.md).

* Приложение логики, место для ожидания определенных событий в целевой конечной точке. Чтобы начать с триггером веб-перехватчика HTTP, [создать пустое приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md). Чтобы использовать действие веб-перехватчика HTTP, запуска приложения логики с любой триггер, который вы хотите. В этом примере триггер HTTP в качестве первого шага.

## <a name="add-an-http-webhook-trigger"></a>Добавить триггер веб-перехватчик HTTP

Этот триггер встроенные регистрирует URL-адрес обратного вызова с указанной службой и ожидает для этой службы отправить запрос HTTP POST на этот URL-адрес. Когда происходит это событие, триггер срабатывает и немедленно запускает приложение логики.

1. Войдите на [портале Azure](https://portal.azure.com). Откройте ваш пустое приложение логики в конструкторе приложений логики.

1. В конструкторе в поле поиска введите «веб-перехватчика http» в качестве фильтра. Из **триггеры** выберите **веб-перехватчика HTTP** триггера.

   ![Выбор триггера веб-перехватчик HTTP](./media/connectors-native-webhook/select-http-webhook-trigger.png)

   В этом примере переименовывает триггера «Триггер HTTP Webhook», чтобы этот шаг имеет более описательное имя. Кроме того в примере ниже добавляется действие веб-перехватчика HTTP, и оба имена должны быть уникальными.

1. Укажите значения для [параметры триггера веб-перехватчика HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md#http-webhook-trigger) что вы хотите использовать для подписки и отмены вызовы, например:

   ![Введите параметры триггера веб-перехватчик HTTP](./media/connectors-native-webhook/http-webhook-trigger-parameters.png)

1. Чтобы добавить другие доступные параметры, откройте **добавьте параметр** и выберите нужные параметры.

   Дополнительные сведения о доступных типах проверки подлинности для веб-перехватчика HTTP, см. в разделе [проверки подлинности HTTP триггеры и действия](../logic-apps/logic-apps-workflow-actions-triggers.md#connector-authentication).

1. Продолжите создание рабочего процесса приложения логики с действиями, выполняемыми при срабатывании триггера.

1. После завершения этого сделать, не забудьте сохранить приложение логики. На панели инструментов конструктора выберите **Сохранить**.

   При сохранении приложения логики вызывает конечную точку подписки и регистрирует URL-адрес обратного вызова для запуска этого приложения логики.

1. Теперь каждый раз, когда целевая служба отправляет `HTTP POST` запрос на URL-адрес обратного вызова, срабатывает приложение логики и включает в себя все данные, передаваемые через запрос.

## <a name="add-an-http-webhook-action"></a>Добавить действие веб-перехватчик HTTP

Это встроенная действие регистрирует URL-адрес обратного вызова с указанной службой, приостанавливает рабочий процесс приложения логики и ожидает для этой службы отправить запрос HTTP POST на этот URL-адрес. Когда происходит это событие, действие возобновляет выполнение логики приложения.

1. Войдите на [портале Azure](https://portal.azure.com). Создание приложения логики в Конструкторе приложений логики.

   В этом примере триггер веб-перехватчика HTTP в качестве первого шага.

1. Установите шаг, где нужно добавить действие веб-перехватчика HTTP, **новый шаг**.

   Чтобы добавить действие между шагами, переместите указатель на стрелку между шагами. Выберите знак «плюс» ( **+** ), появится, а затем выберите **добавить действие**.

1. В конструкторе в поле поиска введите «веб-перехватчика http» в качестве фильтра. Из **действия** выберите **веб-перехватчика HTTP** действие.

   ![Выберите действие веб-перехватчик HTTP](./media/connectors-native-webhook/select-http-webhook-action.png)

   В этом примере переименовывает действие «Действие веб-перехватчика HTTP», чтобы этот шаг имеет более описательное имя.

1. Укажите значения для веб-перехватчика HTTP параметров действия, которые похожи на [параметры триггера веб-перехватчика HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md##http-webhook-trigger) что вы хотите использовать для подписки и отмены вызовы, например:

   ![Введите параметры действия веб-перехватчик HTTP](./media/connectors-native-webhook/http-webhook-action-parameters.png)

   Во время выполнения приложение логики вызывает конечную точку подписки, при выполнении этого действия. Затем приостанавливает рабочий процесс приложения логики и ожидает целевой службы для отправки `HTTP POST` запрос на URL-адрес обратного вызова. Если операция завершается успешно, действие отменяет подписку из конечной точки и приложения логики возобновляет выполнение рабочего процесса.

1. Чтобы добавить другие доступные параметры, откройте **добавьте параметр** и выберите нужные параметры.

   Дополнительные сведения о доступных типах проверки подлинности для веб-перехватчика HTTP, см. в разделе [проверки подлинности HTTP триггеры и действия](../logic-apps/logic-apps-workflow-actions-triggers.md#connector-authentication).

1. Когда закончите, сохраните приложение логики. На панели инструментов конструктора выберите **Сохранить**.

## <a name="connector-reference"></a>Справочник по соединителям

Дополнительные сведения о параметрах триггера и действия, которые похожи друг с другом, см. в разделе [параметров веб-перехватчика HTTP](../logic-apps/logic-apps-workflow-actions-triggers.md##http-webhook-trigger).

### <a name="output-details"></a>Сведения о выходных данных

Здесь находятся дополнительные сведения о выходных данных из веб-перехватчика HTTP триггер или действие, которое возвращает эти сведения:

| Имя свойства | type | Описание |
|---------------|------|-------------|
| header | object | Заголовки из запроса |
| body | object | Объект JSON | Объект с содержимым текста из запроса |
| status code | int | Код состояния из запроса |
|||

| status code | Описание |
|-------------|-------------|
| 200 | OК |
| 202 | Принято |
| 400 | Ошибочный запрос |
| 401 | Не авторизовано |
| 403 | Запрещено |
| 404 | Не найдено |
| 500 | Внутренняя ошибка сервера. Произошла неизвестная ошибка. |
|||

## <a name="next-steps"></a>Дальнейшие действия

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
