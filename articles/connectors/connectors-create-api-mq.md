---
title: Соединиться с сервером IBM MQ — Azure Logic Apps
description: Отправлять и получать сообщения с сервера IBM MQ Azure или локально и Azure Logic Apps
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: valrobb
ms.author: valthom
ms.reviewer: chrishou, LADocs
ms.topic: article
ms.date: 06/19/2019
tags: connectors
ms.openlocfilehash: a2894799946d069916b27a4f5bcc7bd3244705b2
ms.sourcegitcommit: a52d48238d00161be5d1ed5d04132db4de43e076
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/20/2019
ms.locfileid: "67273120"
---
# <a name="connect-to-an-ibm-mq-server-from-azure-logic-apps"></a>Подключение к серверу IBM MQ из приложений логики Azure

Соединитель IBM MQ отправляет и получает сообщения, хранящиеся на сервере IBM MQ в локальной среде или в Azure. Этот соединитель включает в себя клиент Microsoft MQ для взаимодействия с удаленным сервером IBM MQ по сети TCP/IP. Эта статья содержит руководства для начинающих для использования соединителя MQ. Можно начать с просмотра одного сообщения в очередь и затем попытайтесь выполнить другие действия.

Соединитель IBM MQ позволяет выполнять эти действия, но предоставляет нет триггеров:

- Просматривать отдельные сообщения, не удаляя их с сервера IBM MQ.
- Просматривать пакет сообщений, не удаляя сообщения с сервера IBM MQ.
- Получение одного сообщения и удалить сообщение с сервера IBM MQ.
- Получать пакет сообщений и удалять сообщения с сервера IBM MQ.
- Отправка одного сообщения на сервер IBM MQ

## <a name="prerequisites"></a>Технические условия

* Если вы используете сервер MQ в локальной, [установить локальный шлюз данных](../logic-apps/logic-apps-gateway-install.md) на сервере в вашей сети. Сервер, где установлен локальный шлюз данных должен быть .NET Framework 4.6, установленная для соединителя MQ для работы. Кроме того, необходимо создать ресурс в Azure для локального шлюза данных. Дополнительные сведения см. в разделе [Настройка подключения к шлюзу данных](../logic-apps/logic-apps-gateway-connection.md).

  Тем не менее если сервер MQ является публично доступные или доступна в Azure, не нужно использовать шлюз данных.

* Официально поддерживаемые версии IBM WebSphere MQ:

  * MQ 7.5
  * MQ 8.0
  * MQ 9.0

* Приложение логики, где вы хотите добавить действие MQ. Это приложение логики, необходимо использовать то же расположение, как подключение к шлюзу данных в локальной и уже должна быть триггер, который запускает рабочий процесс. 

  Соединитель MQ не имеет какие-либо триггеры, поэтому придется добавить триггер к своему приложению логики сначала. Например можно использовать триггер повторения. Если вы знакомы с приложениями логики, воспользуйтесь этим [краткое руководство по созданию первого приложения логики](../logic-apps/quickstart-create-first-logic-app-workflow.md). 

## <a name="browse-a-single-message"></a>Просмотр одного сообщения

1. В приложении логики в разделе триггера или другое действие, выберите **новый шаг**. 

1. В поле поиска введите «mq» и выберите действие: **Просмотр сообщения**

   ![Просмотр сообщения](media/connectors-create-api-mq/Browse_message.png)

1. Если у вас нет подключение к MQ, создайте подключение:  

   1. В действии, выберите **подключиться через локальный шлюз данных**.
   
   1. Введите свойства сервера MQ.  

      В поле **Сервер** укажите имя сервера MQ или введите IP-адрес, после него поставьте двоеточие, а затем укажите номер порта.
    
   1. Откройте **шлюза** списка, в котором показаны все ранее настроенные подключений шлюза. Выберите шлюз.
    
   1. Когда все будет готово, выберите **Создать**. 
   
      Подключение выглядит следующим образом:

      ![Свойства подключения](media/connectors-create-api-mq/Connection_Properties.png)

1. Настройка свойства действия:

   * **очередь**: Укажите очередь, которая отличается от подключения.

   * **MessageId**, **CorrelationId**, **GroupId**и другие свойства: Найти сообщение на основе различных свойств сообщений MQ

   * **IncludeInfo**: Укажите **True** включать дополнительные сведения о сообщении в выходных данных. Также можно указать **False** не включать дополнительные сведения о сообщении в выходных данных.

   * **Timeout**. Введите значение для определения времени ожидания прихода сообщения в пустой очереди. Если это значение не задано, то извлекается первое сообщение в очереди, и, следовательно, время на ожидание сообщения не тратится.

     ![Просмотр сообщения: свойства](media/connectors-create-api-mq/Browse_message_Props.png)

1. **Сохранить** изменения, а затем **запуска** приложения логики.

   ![Сохраните и запустите](media/connectors-create-api-mq/Save_Run.png)

   После завершения выполнения шагов на основе выполнения, и вы можете просмотреть выходные данные.

1. Чтобы просмотреть подробные сведения о каждом шаге, нажмите Зеленый флажок. Чтобы просмотреть дополнительные сведения о выходных данных, нажмите **Показать необработанные выходные данные**.

   ![Просмотр сообщения: выходные данные](media/connectors-create-api-mq/Browse_message_output.png)  

   Вот несколько примеров необработанные выходных данных:

   ![Просмотр сообщения: необработанные выходные данные](media/connectors-create-api-mq/Browse_message_raw_output.png)

1. Если задать **IncludeInfo** значение true, следующие выходные данные отображаются:

   ![Просмотр сообщения: includeinfo](media/connectors-create-api-mq/Browse_message_Include_Info.png)

## <a name="browse-multiple-messages"></a>Просмотр нескольких сообщений

Действие **Browse messages** (Просмотреть сообщения) имеет свойство **BatchSize** (Размер пакета). Оно указывает, сколько сообщений должно быть возвращено из очереди.  Если для свойства **BatchSize** значение не задано, то возвращаются все сообщения. Возвращаемые выходные данные представляют собой массив сообщений.

1. При добавлении **просмотра сообщений** действие, то первое ранее настроенное подключение выбирается по умолчанию. Чтобы создать новое соединение, выберите **изменить подключение**. Также можно выбрать другое подключение.

1. После завершения выполнения приложения логики, Вот несколько примеров выходных данных **просмотра сообщений** действия:

   ![Просмотр сообщений: выходные данные](media/connectors-create-api-mq/Browse_messages_output.png)

## <a name="receive-single-message"></a>Получение одного сообщения

Действие **Получить сообщение** имеет такие входные и выходные данные, что и действие **Browse message** (Просмотреть сообщение). При использовании действия **Получить сообщение** это сообщение удаляется из очереди.

## <a name="receive-multiple-messages"></a>Получение нескольких сообщений

Действие **Получить сообщения** имеет такие входные и выходные данные, что и действие **Browse messages** (Просмотреть сообщения). При использовании действия **Получить сообщения** эти сообщения удаляются из очереди.

Если нет сообщений в очереди при выполнении просмотра или получения, то действие завершится сбоем эти выходные данные:  

![Ошибка MQ при отсутствии сообщений](media/connectors-create-api-mq/MQ_No_Msg_Error.png)

## <a name="send-message"></a>Отправить сообщение

При добавлении **отправки сообщений** действие, то первое ранее настроенное подключение выбирается по умолчанию. Чтобы создать новое соединение, выберите **изменить подключение**. Также можно выбрать другое подключение.

1. Выберите тип допустимое сообщение: **Датаграмма**, **ответа**, или **запроса**  

   ![Свойства отправки сообщения](media/connectors-create-api-mq/Send_Msg_Props.png)

1. После завершения выполнения приложения логики, Вот несколько примеров выходных данных **отправить сообщение** действия:

   ![Отправить сообщение: выходные данные](media/connectors-create-api-mq/Send_Msg_Output.png)

## <a name="connector-reference"></a>Справочник по соединителям

Технические сведения о действиях и ограничения, которые описаны соединителя OpenAPI (прежнее название — Swagger) описания, проверьте соединитель [справочной странице](/connectors/mq/).

## <a name="next-steps"></a>Дальнейшие действия

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
