---
title: Подключение к серверу IBM M
description: Отправка и получение сообщений с помощью сервера Azure или внутреннего сервера IBM M и приложений логики Azure
services: logic-apps
ms.suite: integration
author: ChristopherHouser
ms.author: chrishou
ms.reviewer: valthom, logicappspm
ms.topic: article
ms.date: 06/19/2019
tags: connectors
ms.openlocfilehash: 6bfd626c1ce69029ee720d24b0b143e7b4c3dd56
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77650953"
---
# <a name="connect-to-an-ibm-mq-server-from-azure-logic-apps"></a>Подключение к серверу IBM МЗ из приложений логики Azure

Разъем IBM M' отправляет и извлекает сообщения, хранящиеся на сервере IBM M' в помещениях или в Azure. Этот соединитель включает в себя клиент Microsoft MQ для взаимодействия с удаленным сервером IBM MQ по сети TCP/IP. В этой статье содержится стартовое руководство по использованию разъема МЗ. Вы можете начать с просмотра одного сообщения в очереди, а затем попробовать другие действия.

Разъем IBM M's включает в себя эти действия, но не предоставляет триггеров:

- Просмотр одного сообщения без удаляния сообщения с сервера IBM M
- Просмотр пакета сообщений без удаляния сообщений с сервера IBM M
- Получить одно сообщение и удалить сообщение с сервера IBM M
- Получайте пакет сообщений и удаляйте сообщения с сервера IBM M
- Отправить одно сообщение на сервер IBM M

## <a name="prerequisites"></a>Предварительные требования

* Если вы используете наемный сервер МЗ, [установите шлюз данных](../logic-apps/logic-apps-gateway-install.md) на сервере в вашей сети. Сервер, на котором установлен внутренний шлюз данных, также должен иметь .NET Framework 4.6, установленный для работы разъема МЗ. Необходимо также создать ресурс в Azure для шлюза данных. Для получения дополнительной информации [см.](../logic-apps/logic-apps-gateway-connection.md)

  Однако, если ваш сервер МЗ находится в открытом доступе или доступен в Azure, вам не нужно использовать шлюз данных.

* Официально поддерживаемые версии IBM WebSphere MQ:

  * MQ 7.5
  * MQ 8.0
  * МЗ 9,0

* Логическое приложение, где вы хотите добавить действие МЗ. Это приложение логики должно использовать то же место, что и подключение шлюза к локальным данным, и уже должно иметь триггер, который запускает рабочий процесс. 

  Разъем МЗ не имеет никаких триггеров, поэтому сначала необходимо добавить триггер в приложение логики. Например, можно использовать триггер Recurrence. Если вы новичок в логических приложениях, попробуйте этот [быстрый запуск, чтобы создать свое первое приложение логики.](../logic-apps/quickstart-create-first-logic-app-workflow.md) 

## <a name="browse-a-single-message"></a>Просмотр одного сообщения

1. В приложении логики, под спусковым крючком или другим действием, выберите **новый шаг.** 

1. В поле поиска введите "mq" и выберите это действие: **Просмотр сообщения**

   ![Просмотр сообщения](media/connectors-create-api-mq/Browse_message.png)

1. Если у вас нет существующего соединения МЗ, создайте соединение:  

   1. В действии выберите **Connect через шлюз данных.**
   
   1. Введите свойства для вашего сервера МЗ.  

      В поле **Сервер** укажите имя сервера MQ или введите IP-адрес, после него поставьте двоеточие, а затем укажите номер порта.
    
   1. Откройте список **шлюзов,** в котором отображается все ранее настроенные соединения шлюза. Выберите шлюз.
    
   1. Когда все будет готово, выберите **Создать**. 
   
      Ваше соединение выглядит следующим образом:

      ![Свойства подключения](media/connectors-create-api-mq/Connection_Properties.png)

1. Настройка свойств действия:

   * **Очередь**: Укажите очередь, которая отличается от соединения.

   * **MessageId,** **CorrelationId,** **GroupId**и другие свойства: Просмотр сообщения, основанного на различных свойствах сообщений МЗ

   * **IncludeInfo**: Указать **Правда,** чтобы включить дополнительную информацию о сообщениях в вывод. Или укажите **False,** чтобы не включать дополнительную информацию о сообщениях в вывод.

   * **Тайм-аут**: Введите значение, чтобы определить, сколько времени ждать сообщения, чтобы прибыть в пустую очередь. Если это значение не задано, то извлекается первое сообщение в очереди, и, следовательно, время на ожидание сообщения не тратится.

     ![Просмотр сообщения: свойства](media/connectors-create-api-mq/Browse_message_Props.png)

1. **Сохраните** изменения, а затем **запустите** логическое приложение.

   ![Сохранение и запуск](media/connectors-create-api-mq/Save_Run.png)

   После завершения выполнения отображаются шаги из выполнения, и вы можете просмотреть вывод.

1. Чтобы просмотреть детали для каждого шага, выберите зеленую галочку. Для более подробной информации о данных о выходе выберите **Показать необработанные результаты.**

   ![Просмотр сообщения: выходные данные](media/connectors-create-api-mq/Browse_message_output.png)  

   Вот некоторые образцы сырья выход:

   ![Просмотр сообщения: необработанные выходные данные](media/connectors-create-api-mq/Browse_message_raw_output.png)

1. Если вы **установите IncludeInfo** на истину, отображается следующий вывод:

   ![Просмотр сообщения: IncludeInfo](media/connectors-create-api-mq/Browse_message_Include_Info.png)

## <a name="browse-multiple-messages"></a>Просмотр нескольких сообщений

Действие **Browse messages** (Просмотреть сообщения) имеет свойство **BatchSize** (Размер пакета). Оно указывает, сколько сообщений должно быть возвращено из очереди.  Если для свойства **BatchSize** значение не задано, то возвращаются все сообщения. Возвращаемые выходные данные представляют собой массив сообщений.

1. При добавлении действия **сообщений Browse** первое ранее настроенное соединение выбирается по умолчанию. Чтобы создать новое соединение, выберите **соединение Изменение**. Или выберите другое соединение.

1. После завершения запуска приложения логики приведен ы некоторым выводом примеров из действия **сообщений Browse:**

   ![Просмотр сообщений: выходные данные](media/connectors-create-api-mq/Browse_messages_output.png)

## <a name="receive-single-message"></a>Получение одного сообщения

Действие **Получить сообщение** имеет такие входные и выходные данные, что и действие **Browse message** (Просмотреть сообщение). При использовании действия **Получить сообщение** это сообщение удаляется из очереди.

## <a name="receive-multiple-messages"></a>Получение нескольких сообщений

Действие **Получить сообщения** имеет такие входные и выходные данные, что и действие **Browse messages** (Просмотреть сообщения). При использовании действия **Получить сообщения** эти сообщения удаляются из очереди.

Если в очереди нет сообщений при выполнении просмотра или получения, шаг завершается сбой в этом выводе:  

![Ошибка MQ при отсутствии сообщений](media/connectors-create-api-mq/MQ_No_Msg_Error.png)

## <a name="send-message"></a>Отправить сообщение

При добавлении действия **«Отправить сообщения»** первое ранее настроенное соединение выбирается по умолчанию. Чтобы создать новое соединение, выберите **соединение Изменение**. Или выберите другое соединение.

1. Выберите действительный тип сообщения: **Datagram,** **Ответ**или **Запрос**  

   ![Свойства отправки сообщения](media/connectors-create-api-mq/Send_Msg_Props.png)

1. После завершения работы приложения логики приведены в действие, вот некоторые выходные примеры из действия **отправки сообщений:**

   ![Отправить сообщение: выходные данные](media/connectors-create-api-mq/Send_Msg_Output.png)

## <a name="connector-reference"></a>Справочник по соединителям

Для получения более подробной информации об этом разъеме, таких как триггеры, действия и ограничения, описанные в файле Swagger разъема, смотрите [страницу ссылки разъема.](https://docs.microsoft.com/connectors/mq/)

> [!NOTE]
> Для логических приложений в [среде служб интеграции (ISE)](../logic-apps/connect-virtual-network-vnet-isolated-environment-overview.md)эта версия с маркировкой ISE разъема использует вместо этого [ограничения сообщений ISE.](../logic-apps/logic-apps-limits-and-config.md#message-size-limits)

## <a name="next-steps"></a>Дальнейшие действия

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
