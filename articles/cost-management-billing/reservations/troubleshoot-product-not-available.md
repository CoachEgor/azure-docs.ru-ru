---
title: Устранение неполадок, связанных с недоступностью типа резервирования Azure
description: Эта статья поможет вам понять и устранить неполадки зарезервированных экземпляров, которые отображаются как недоступные на портале Azure.
author: bandersmsft
ms.service: cost-management-billing
ms.subservice: reservations
ms.author: banders
ms.reviewer: yashar
ms.topic: troubleshooting
ms.date: 10/27/2020
ms.openlocfilehash: 8575d9d86d8e720122a295cf92fa571ef33d5b4c
ms.sourcegitcommit: 400f473e8aa6301539179d4b320ffbe7dfae42fe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/28/2020
ms.locfileid: "92798208"
---
# <a name="troubleshoot-reservation-type-not-available"></a>Устранение неполадок, связанных с недоступностью типа резервирования

Эта статья поможет вам понять и устранить неполадки зарезервированных экземпляров, которые отображаются как недоступные на портале Azure.

## <a name="symptoms"></a>Симптомы

1. Войдите на [портал Azure](https://portal.azure.com/) и перейдите к разделу **Резервирования**.
2. Щелкните **+ Добавить** , а затем выберите продукт.
3. Выберите вкладку **Все продукты**.
4. Выберите один из продуктов в списке. Может появиться одно из следующих сообщений:
    - `Product unavailable for the selected subscription or region. Contact support.`  
        :::image type="content" source="./media/troubleshoot-product-not-available/product-unavailable-message.png" alt-text="Пример сообщения, в котором показан продукт, недоступный для выбранной подписки или региона" lightbox="./media/troubleshoot-product-not-available/product-unavailable-message.png" :::
    - `The selected subscription does not have enough core quota remaining to purchase this product. Request quota increase`  
        :::image type="content" source="./media/troubleshoot-product-not-available/not-enough-core-quota-message.png" alt-text="Пример сообщения, в котором показана недостаточная квота ядер" lightbox="./media/troubleshoot-product-not-available/not-enough-core-quota-message.png" :::

## <a name="cause"></a>Причина

Некоторые типы резервирования недоступны для приобретения по следующим причинам:

- Не все продукты зарезервированных экземпляров доступны для приобретения в каждом регионе.
- В вашей подписке настроено ограничение квоты.

### <a name="cause-1"></a>Причина 1

Не все продукты зарезервированных экземпляров можно приобрести. Платформа Azure принимает решение разрешить или запретить приобретение некоторых продуктов на основе затрат, связанных с предоставлением скидки клиентам. В других случаях Azure не предлагает клиентам некоторые продукты в связи с условиями использования емкости в определенных центрах обработки данных. Кроме того, некоторые группы разработки продуктов Azure теперь могут разрешать использование определенных продуктов, так как требуется перейти на их новую версию.

В других случаях Azure устанавливает ограничения емкости для различных продуктов на основе спроса на эти ресурсы в определенных регионах. Например, такое ограничение может быть установлено, когда в центре обработки данных снижается спрос на определенный размер виртуальных машин. В этом примере Azure не может гарантировать доступность емкости для клиентов, которые приобрели резервирование для определенного размера в данном регионе. Наконец, есть уникальные по ряду причин продукты. Такие продукты доступны только небольшому кругу клиентов.

Если некоторые резервирования недоступны для приобретения, почему они отображаются на портале Azure? Все дело в том, что пользователи создают запросы в службу поддержки, в которых указывают, что они не могут найти нужные им продукты. Группа разработчиков службы резервирования Azure определила, что отображение всех продуктов с сообщением `Product unavailable` приводит к меньшему количеству запросов в службу поддержки, чем их отсутствие.

### <a name="cause-2"></a>Причина 2

В вашей подписке настроено ограничение квоты. В подписках имеются ограничения на количество ядер ЦП, которые в них можно использовать. Ограничение применяется к некоторым зарезервированным экземплярам продуктов, особенно к виртуальным машинам. Azure хочет гарантировать, что пользователи, которые приобрели зарезервированный экземпляр, смогут использовать его. Azure выполняет простую проверку на портале Azure, чтобы убедиться в наличии достаточного количества бесплатных ядер в подписке для развертывания виртуальной машины и получения преимущества от приобретения резервирования.

Процедура проверки, позволяющая добавить определенный продукт в корзину и приобрести резервирование, достаточно проста. Azure оценивает общее количество ядер ЦП, доступных для вашей подписки, и проверяет, не превышает ли оно число ядер для выбранного элемента.

Azure не проверяет квоту на зарезервированные экземпляры в **общей** области. Преимущество зарезервированного экземпляра для общей области применяется ко всем подпискам в регистрации. Azure не может определить наличие достаточного количества бесплатных ядер во всех подписках для развертывания ресурса. Независимо от квоты Azure всегда позволяет выбрать размер виртуальной машины, если выбран общий доступ к этой области.

Кроме того, Azure не выполняет проверку квоты для **рекомендуемых** покупок. Рекомендации основываются на активном использовании. В Azure предполагается, что у вас имеется достаточно ядер для запуска виртуальной машины определенного размера, так как вы уже создали использование вычислительных ресурсов, необходимое для создания рекомендации.

## <a name="solution"></a>Решение

В зависимости от полученного сообщения об ошибке используйте одно из следующих решений для устранения проблемы.

### <a name="solution-1"></a>Решение 1

Если вы видите сообщение _Product unavailable_ (Продукт недоступен), щелкните ссылку **Обратиться в службу поддержки** в сообщении об ошибке, чтобы запросить добавление исключения для подписки. Исключения предоставляются не всегда.

### <a name="solution-2"></a>Решение 2

Если вы видите сообщение _Not enough core quota_ (Недостаточная квота ядер), можно изменить область на **общую**. После приобретения резервирования можно изменить область резервирования с **общей** на **единую**.

Чтобы запросить дополнительную квоту ядер ЦП для вашей подписки, щелкните ссылку **Запросить увеличение квоты** в сообщении об ошибке.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о том, как работают области резервирования, см. в [этой статье](prepare-buy-reservation.md#scope-reservations).