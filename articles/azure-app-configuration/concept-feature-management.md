---
title: Управление функциями в конфигурации приложений Azure
description: Общие сведения о том, как Конфигурация приложений Azure позволяет включать и отключать функции приложения по требованию.
author: yegu-ms
ms.author: yegu
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 04/19/2019
ms.openlocfilehash: 48aebfe1ba6af348e98e5600075f3a9e9dce1a8e
ms.sourcegitcommit: f0dfcdd6e9de64d5513adf3dd4fe62b26db15e8b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/26/2019
ms.locfileid: "75495777"
---
# <a name="feature-management-overview"></a>Общие сведения об управлении функциями

Традиционно внедрение новой функции приложения требует полного повторного развертывания приложения. Для тестирования функции вам, скорее всего, потребуется развернуть приложение много раз, чтобы иметь возможность управлять тем, когда эта функция становится видимой и кому.

Управление функциями — современная методика разработки программного обеспечения, которая отделяет выпуск функций от развертывания кода и позволяет быстро вносить изменения в доступность функций по требованию. Она использует методику, называемую *флагами функций* (также известную как *ротация функций*, *коммутатор функций* и т д.), чтобы динамически управлять жизненным циклом функций.

Управление функциями помогает разработчикам справиться со следующими проблемами.

* **Управление ветвью кода**. флаги компонентов часто используются для создания оболочки новых функциональных возможностей приложения, которые находятся в разработке. Такая функция по умолчанию скрыта. Вы можете безопасно внедрить функцию, хотя она и не завершена, и она будет находится в неактивном состоянии в рабочей среде. При таком подходе, который называется *темным развертыванием*, вы можете выпускать весь свой код в конце каждого цикла развертывания. Вам больше не нужно поддерживать какую-либо ветвь кода в нескольких циклах из-за того, что выполнение функции занимает более одного цикла.
* **Тестирование в рабочей среде**. Вы можете использовать флаги компонентов для предоставления раннего доступа к новым функциональным возможностям в рабочей среде. Например, вы можете ограничить доступ, предоставив его только участникам команды или внутренним тестировщикам бета-версии. Эти пользователи получат полноценный опыт работы в рабочей среде, а не имитацию или опыт частичного использования в тестовой среде.
* **Полет**. Вы также можете использовать флаги компонентов для постепенного развертывания новых функций для конечных пользователей. Сначала вы можете нацелиться на небольшой процент пользователей и, когда станете увереннее в реализации, постепенно увеличивать этот процент с течением времени.
* **Параметр мгновенного уничтожения**. флаги компонентов обеспечивают безопасность сети для освобождения новых функций. С их помощью можно легко включать и отключать функции приложения. При необходимости можно быстро отключить функцию, не выполняя повторную сборку и развертывание приложения.
* **Выборочная активация**. в то время как большинство флагов функций существует только до тех пор, пока их связанные функциональные возможности не будут успешно освобождены, некоторые могут быть в течение длительного времени. Вы можете использовать флаги функций для разделения пользователей и предоставления определенного набора функций каждой группе. Например, у вас может быть функция, работающая в определенном веб-браузере. Вы можете определить флаг функции таким образом, чтобы только пользователи этого браузера могли видеть и использовать данную функцию. С помощью этого подхода вы можете легко расширить список поддерживаемых браузеров позднее, не внося изменения в код.

## <a name="basic-concepts"></a>Основные понятия

Ниже приведено несколько новых терминов, связанных с управлением функциями.

* **Флаг компонента**: флаг функции — это переменная с двоичным состоянием *On* или *Off*. С флагом функции также связан блок кода. Состояние флага функции активирует запуск блока кода.
* **Диспетчер компонентов**. Диспетчер компонентов — это пакет приложений, который обрабатывает жизненный цикл всех флагов функций в приложении. Обычно диспетчер функций предоставляет дополнительные возможности, такие как кэширование флагов функций и обновление их состояния.
* **Фильтр**: фильтр — это правило для оценки состояния флага функции. Группа пользователей, тип устройства или браузера, геолокация, временное окно — это все примеры того, что может представлять фильтр.

Эффективная реализация управления функциями характеризуется по крайней мере двумя компонентами, которые работают вместе.

* Приложение, которое использует флаги функций.
* Отдельный репозиторий, в котором хранятся флаги функций и их текущее состояние.

Взаимодействие этих компонентов показано в следующих примерах.

## <a name="feature-flag-usage-in-code"></a>Использование флага функции в коде

Базовый шаблон для реализации флагов функций в приложении прост. Вы можете представить флаг функции как логическую переменную состояния, используемую в коде с условным оператором `if`.

```csharp
if (featureFlag) {
    // Run the following code
}
```

В этом случае, если параметру `featureFlag` присвоено значение `True`, вложенный блок кода выполняется, в противном случае — пропускается. Можно задать статическое значение `featureFlag`, как показано в следующем примере кода.

```csharp
bool featureFlag = true;
```

Можно также оценить состояние флага на основе определенных правил.

```csharp
bool featureFlag = isBetaUser();
```

Чуть более сложный шаблон флага функции также включает в себя оператор `else`.

```csharp
if (featureFlag) {
    // This following code will run if the featureFlag value is true
} else {
    // This following code will run if the featureFlag value is false
}
```

Тем не менее можно перепрограммировать это поведение в базовом шаблоне. В руководстве по [использованию флагов функций в приложении ASP.NET Core](./use-feature-flags-dotnet-core.md) показано преимущество стандартизации простого шаблона кода. Пример.

```csharp
if (featureFlag) {
    // This following code will run if the featureFlag value is true
}

if (!featureFlag) {
    // This following code will run if the featureFlag value is false
}
```

## <a name="feature-flag-repository"></a>Репозиторий флагов функций

Чтобы эффективно использовать их, необходимо переместить все флаги функций, используемые в приложении, во внешнее хранилище. Это позволит изменять состояние флагов функций без изменения и повторного развертывания самого приложения.

Служба "Конфигурация приложений Azure" должна быть централизованным репозиторием для флагов функций. Вы можете использовать ее, чтобы определить различные типы флагов функций и быстро и легко управлять их состоянием. Затем вы можете легко получить доступ к этим флагам функций из своего приложения с помощью библиотек Конфигурации приложений для различных платформ языков программирования.

В руководстве по [использованию флагов функций в приложении ASP.NET Core](./use-feature-flags-dotnet-core.md) показано, как поставщик Конфигурации приложений для .NET Core и библиотеки управления функциями используются для реализации флагов функций в веб-приложении ASP.NET.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Краткое руководство по добавлению флагов функций в веб-приложение ASP.NET Core](./quickstart-feature-flag-aspnet-core.md)  
