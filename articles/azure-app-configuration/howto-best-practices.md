---
title: Рекомендации по конфигурации приложений Azure | Документация Майкрософт
description: Узнайте, как лучше всего использовать конфигурацию приложений Azure
services: azure-app-configuration
documentationcenter: ''
author: yegu-ms
manager: maiye
editor: ''
ms.assetid: ''
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 05/02/2019
ms.author: yegu
ms.custom: mvc
ms.openlocfilehash: d1275a48de5cad9321186ba20860d853b8ce55ad
ms.sourcegitcommit: 300cd05584101affac1060c2863200f1ebda76b7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2019
ms.locfileid: "65413617"
---
# <a name="azure-app-configuration-best-practices"></a>Рекомендации по конфигурации приложений Azure

В этой статье рассматриваются распространенные шаблоны и методики, при использовании конфигурации приложения Azure.

## <a name="key-groupings"></a>Ключа группирования.

Конфигурация приложения предоставляет два варианта для упорядочивания ключей: ключа префиксы или метки. Можно использовать один или оба.

Начало префиксов ключевых этапов ключей. Можно логически сгруппировать набор ключей, используя тот же префикс в именах. Префиксы может содержать несколько компонентов, соединенных друг с другом с помощью разделителей например `/`, как и для URL-адрес, для формирования пространства имен. Такие иерархии полезны в тех случаях, когда вы храните ключи для многих приложений, служб компонентов и сред в одном хранилище конфигурации приложения. Важно помнить, является ключи ссылается для получения значения параметров, соответствующий код приложения. Не следует изменять ключ, иначе вам придется изменить код каждый раз, что происходит.

Метки — это атрибут по ключам. Они используются для создания вариантов ключа. Например метки можно назначить несколько версий ключа. Версию можно было итерации, среды или других контекстных сведений. Приложение может запросить совершенно другого набора значений ключей, просто указав другую метку. Все ссылки может оставаться без изменений.

## <a name="key-value-compositions"></a>Ключ значение композиции

Конфигурация приложения обрабатывает все ключи, хранящиеся с ним как независимые сущности. Он не пытается определить связь между ключи или значения ключа на основе их иерархии наследования. Можно объединить несколько наборов ключей, тем не менее, использование меток в сочетании с надлежащей настройки размещения в коде приложения.

Давайте рассмотрим пример. У вас есть параметр **Asset1** , значение которого может быть разным в среде «Разработка». Можно создать ключ с именем «Asset1» с пустой меткой и метку с именем «Разработка». Введите значение по умолчанию для **Asset1** в первый и любое значение для «Разработка» во втором. В коде вам сначала нужно получить значения ключей без любую метку, а затем те меткой «Разработка», чтобы перезаписать все предыдущие значения тех же самых ключей. Если вы используете современные программные платформы, например .NET Core, эта возможность наложения можно получить бесплатно при использовании поставщика собственного конфигурации для доступа к конфигурации приложения. В следующем фрагменте кода показано, как можно реализовать, наложение в приложении .NET Core.

```csharp
// Augment the ConfigurationBuilder with Azure App Configuration
// Pull the connection string from an environment variable
configBuilder.AddAzureAppConfiguration(options => {
    options.Connect(configuration["connection_string"])
           .Use(KeyFilter.Any, LabelFilter.Null)
           .Use(KeyFilter.Any, "Development");
});
```

## <a name="app-configuration-bootstrap"></a>Приложение конфигурации загрузки

Чтобы доступ к хранилищу конфигурации приложения, можно использовать строку соединения, которое доступно на портале Azure. Строки подключения содержит сведения об учетных данных и рассматриваются в качестве секретов. Они должны храниться в хранилище ключей. Лучшим вариантом будет использование Azure управляемое удостоверение. В этом случае требуется только URL-адрес конечной точки конфигурации приложений для начальной загрузки средства доступа к хранилищу конфигурации. Можно внедрить URL-адрес в коде приложения (например, в *appsettings.json* файла). См. в разделе [интеграция с Azure управляемые удостоверения](howto-integrate-azure-managed-service-identity.md) для получения дополнительных сведений.

## <a name="web-app-or-function-access-to-app-configuration"></a>Веб-приложения или функция доступа к конфигурации приложений

Можно ввести строку подключения к хранилищу конфигурации приложения в настройках приложения службы приложений на портале Azure. Его также можно хранить в хранилище ключей и [на него ссылку из службы приложений](https://docs.microsoft.com/azure/app-service/app-service-key-vault-references). Вы также можете использовать Azure управляемое удостоверение для доступа к хранилищу конфигурации. См. в разделе [интеграция с Azure управляемые удостоверения](howto-integrate-azure-managed-service-identity.md) для получения дополнительных сведений.

Кроме того можно отправить конфигурацию из конфигурации приложения службы приложений. Конфигурация приложения предоставляет функцию экспорта (на портале Azure и интерфейса командной строки), который отправляет данные непосредственно в службе приложений. В этом случае вы не обязательно должны изменить код приложения, вообще.

## <a name="next-steps"></a>Дальнейшие действия

* [Ключи и значения](./concept-key-value.md)
