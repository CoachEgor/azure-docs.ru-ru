---
title: Рекомендации по конфигурации приложений Azure | Документация Майкрософт
description: Узнайте, как лучше всего использовать конфигурацию приложений Azure
services: azure-app-configuration
documentationcenter: ''
author: yegu-ms
manager: maiye
editor: ''
ms.assetid: ''
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 05/02/2019
ms.author: yegu
ms.custom: mvc
ms.openlocfilehash: 3d9a597e7ced631627a121f3f0757e472f9a4bae
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66393593"
---
# <a name="azure-app-configuration-best-practices"></a>Рекомендации по конфигурации приложений Azure

В этой статье рассматриваются стандартные шаблоны и рекомендации при использовании конфигурации приложения Azure.

## <a name="key-groupings"></a>Ключа группирования.

Конфигурация приложения предоставляет два варианта для упорядочивания ключей:

* Префиксы ключа
* Метки

Один или оба параметра можно использовать для группирования ваши ключи.

*Ключ префиксы* начало части ключи. Можно логически сгруппировать набор ключей, используя тот же префикс в именах. Префиксы может содержать несколько компонентов, подключенных с помощью разделителей, такие как `/`, как и для URL-адрес, для формирования пространства имен. Такие иерархии полезны в тех случаях, когда вы храните ключи для многих приложений, служб компонентов и сред в одном хранилище конфигурации приложения.

Важно помнить, является ключи ссылается для получения значения параметров, соответствующий код приложения. Не следует изменять ключи, иначе вам придется изменить код каждый раз, что происходит.

*Метки* являются атрибут по ключам. Они используются для создания вариантов ключа. Например метки можно назначить несколько версий ключа. Версия может быть итерации, среде или других контекстных сведений. Приложение может запросить совершенно другого набора значений ключа, указав другую метку. Таким образом все ссылки на ключи остаются без изменений в коде.

## <a name="key-value-compositions"></a>Ключ значение композиции

Конфигурация приложения обрабатывает все ключи, хранящиеся с ним как независимые сущности. Конфигурация приложения не пытаясь определить связь между ключи или значения ключа на основе их иерархии наследования. Можно объединить несколько наборов ключей, тем не менее, с использованием меток в сочетании с надлежащей настройки размещения в коде приложения.

Давайте рассмотрим пример. Предположим, что имеется параметр с именем **Asset1**, значение которого может отличаться в зависимости от среды разработки. Создается ключ с именем «Asset1» с пустой меткой и метку с именем «Разработка». В первой метке, введите значение по умолчанию для **Asset1**, и вы указываете конкретное значение для «Разработка» во втором.

В коде сначала нужно получить значения ключей без метки, и затем получить тот же набор значений ключей во второй раз с меткой «Разработка». При извлечении значения во второй раз, предыдущие значения ключей будут перезаписаны. Системы конфигурации .NET Core позволяет «выстраивать» несколько наборов данных конфигурации друг над другом. Если ключ существует в более чем одного набора, используется последний набор, содержащий его. С помощью современные программные платформы, например .NET Core эта возможность наложения получите бесплатно при использовании поставщика собственного конфигурации для доступа к конфигурации приложения. В следующем фрагменте кода показано, как можно реализовать, наложение в приложение .NET Core:

```csharp
// Augment the ConfigurationBuilder with Azure App Configuration
// Pull the connection string from an environment variable
configBuilder.AddAzureAppConfiguration(options => {
    options.Connect(configuration["connection_string"])
           .Use(KeyFilter.Any, LabelFilter.Null)
           .Use(KeyFilter.Any, "Development");
});
```

## <a name="app-configuration-bootstrap"></a>Приложение конфигурации загрузки

Чтобы доступ к хранилищу конфигурации приложения, можно использовать строку соединения, которое доступно на портале Azure. Так как строки подключения содержит сведения об учетных данных, считаются секреты. Эти секреты должны храниться в хранилище ключей Azure, и код должен пройти проверку подлинности в хранилище ключей, как извлекать их.

Лучшим вариантом будет использование функции управляемых удостоверений в Azure Active Directory. Управляемые удостоверения вам нужно только конфигурация приложения конечной точки URL-адрес для доступа к начальной загрузки хранилище конфигурации приложения. Можно внедрить URL-адрес в коде приложения (например, в *appsettings.json* файла). См. в разделе [интеграция с Azure управляемые удостоверения](howto-integrate-azure-managed-service-identity.md) подробные сведения.

## <a name="app-or-function-access-to-app-configuration"></a>Приложение или функция доступа к конфигурации приложений

Обеспечить доступ к конфигурации приложения для веб-приложений или функций с помощью любого из следующих методов:

* На портале Azure введите строку подключения к хранилищу конфигурации приложения в параметрах приложения службы приложений.
* Store строку подключения к хранилищу конфигурации приложения в хранилище ключей и [на него ссылку из службы приложений](https://docs.microsoft.com/azure/app-service/app-service-key-vault-references).
* Используйте Azure управляемые удостоверения для доступа к хранилищу конфигурации приложения. Дополнительные сведения см. в разделе [интеграция с Azure управляемые удостоверения](howto-integrate-azure-managed-service-identity.md).
* Конфигурацию Push-уведомлений из конфигурации приложения службы приложений. Конфигурация приложения предоставляет функцию экспорта (на портале Azure и Azure CLI), который отправляет данные непосредственно в службе приложений. С помощью этого метода не нужно изменять код приложения, вообще.

## <a name="next-steps"></a>Дальнейшие действия

* [Ключи и значения](./concept-key-value.md)
