---
title: Понимание магазина добавленной стоимости приложений Azure
description: Понять, как хранятся данные конфигурации в конфигурации приложений Azure.
author: lisaguthrie
ms.author: lcozzens
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 02/19/2020
ms.openlocfilehash: 0b83a35d912c97ae25bc2d69d076e8eae8ca490f
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77523610"
---
# <a name="keys-and-values"></a>Ключи и значения

Служба "Конфигурация приложений Azure" хранит данные конфигурации в виде пар "ключ — значение". Ключевые пары — это простое и гибкое представление настроек приложений, используемых разработчиками.

## <a name="keys"></a>Ключи

Ключи служат идентификаторами для пар значений ключей и используются для хранения и получения соответствующих значений. Традиционно ключи размещаются в иерархическом пространстве имен и разделяются определенным символом, например `/` или `:`. Используйте конвенцию, наиболее подходящую для вашего приложения. Конфигурация приложений всегда обрабатывает ключи целиком. Она не выполняет синтаксический анализ ключей для изучения структуры имен или применения к ним любых правил.

Вот два примера ключевых имен, структурированных в иерархию:

* В зависимости от служб компонентов

        AppName:Service1:ApiEndpoint
        AppName:Service2:ApiEndpoint

* В зависимости от региона развертывания

        AppName:Region1:DbEndpoint
        AppName:Region2:DbEndpoint

Использование данных конфигурации в рамках приложения может диктовать конкретные схемы именования ключевых значений. Например, система Spring Cloud Java `Environment` определяет ресурсы, которые поставляют настройки в приложение Spring.  Они параметрыруются по переменным, которые включают *имя приложения* и *профиль.* Ключи для конфигураций, имеющих отношение к Spring Clould, обычно начинаются с этих двух элементов с разделителем.

Ключи хранятся в Конфигурации приложений в формате строк Юникода с учетом регистра. Например, *app1* и *App1* в хранилище Конфигурации приложений будут разными ключами. Учитывайте это при использовании параметров конфигурации в приложении, так как некоторые платформы не учитывают регистр для ключей конфигурации. Мы не рекомендуем использовать случай для дифференцирования ключей.

Вы можете использовать любой символ unicode в ключевых `*`именах, за исключением, `,`и `\`.  Если вам нужно включить один из этих зарезервированных `\{Reserved Character}`символов, избежать его с помощью . 

На паре с ключевым значением установлен определяемый размер 10 кБ. Сюда входят все символы ключа, значения и связанные с ними необязательные атрибуты. В пределах этого ограничения можно создать многоуровневую иерархию ключей.

### <a name="design-key-namespaces"></a>Проектирование пространства имен ключей

Существует два принципиальных подхода к именованию ключей для данных конфигурации: плоская или иерархическая структура. С точки зрения использования в приложении эти методы похожи, но второй дает ряд дополнительных преимуществ:

* Более удобен для чтения. Делимитеры в иерархической функции имени ключа функционируют как пробелы в предложении. Слова в этих предложениях разделены пробелами.
* Более удобен для управления. Иерархия имен ключей объединяет данные конфигурации в логические группы.
* Более удобен для использования. Гораздо проще применить в запросе сопоставление иерархических имен ключей с шаблоном, чтобы извлечь только нужную часть данных конфигурации. Кроме того, многие новые платформы программирования предоставляют встроенную поддержку для иерархической конфигурации данных, что позволяет приложениям использовать определенные наборы данных конфигурации.

Вы можете использовать много разных методов для организации иерархической конфигурации ключей. Такие ключи аналогичны структурам [URI](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier). Каждый иерархический ключ представляет собой *путь* к ресурсу, состоящий из одного или нескольких компонентов с определенными разделителями. Выберите символ на роль разделителя с учетом потребностей приложения, языка программирования или платформы. В Конфигурации приложений используйте для разных ключей несколько разных разделителей.

### <a name="label-keys"></a>Пометка ключей

В Конфигурации приложений пары "ключ — значение" можно дополнять атрибутом label (метка). Метки позволяют различать пары "ключ — значение" в пределах одного ключа. Например, ключ *app1* с метками *A* и *B* создает в хранилище Конфигурации приложения два разных ключа. По умолчанию ключевое значение не имеет метки. Чтобы явно ссылаться на ключевое `\0` значение без метки, используйте (URL, закодированный как). `%00`

Метка обеспечивает удобное создание вариантов ключа. Метки обычно используется для указания нескольких сред для одного ключа.

    Key = AppName:DbEndpoint & Label = Test
    Key = AppName:DbEndpoint & Label = Staging
    Key = AppName:DbEndpoint & Label = Production

### <a name="version-key-values"></a>Управление версиями для пар "ключ — значение"

Конфигурация приложения не автоматически настраивает ключевые значения. Используйте метки для создания нескольких версий любой пары "ключ — значение". Например, в метки можно заносить номера версий приложения или идентификаторы фиксации Git, чтобы отслеживать пары "ключ — значение" для определенной сборки программного обеспечения.

В метках ключей можно использовать любой символ Юникода, за исключением `*`, `,` и `\`. Эти символы зарезервированы. Чтобы включить зарезервированный символ, экранируйте его с помощью `\{Reserved Character}`.

### <a name="query-key-values"></a>Запрос пар "ключ — значение"

Каждая пара "ключ — значение" уникально идентифицируется по сочетанию ключа и метки, которая может принимать значение `null`. Запрос пар "ключ — значение" из хранилища Конфигурации приложений выполняется по шаблонам. Хранилище Конфигурации приложений возвращает все пары "ключ — значение", которые соответствуют указанному шаблону, и все относящиеся к ним значения и атрибуты. Используйте следующие шаблоны ключей в вызовах к REST API Конфигурации приложений:

| Ключ | |
|---|---|
| `key` не указан или имеет значение `key=*` | Совпадает с любым ключом. |
| `key=abc` | Совпадает с ключом, который имеет точное имя **abc**. |
| `key=abc*` | Совпадает с ключом, имя которого начинается с **abc**. |
| `key=abc,xyz` | Соответствует ключевым **именам abc** или **xyz**. Ограничено до пяти CSV |

Кроме того, вы можете добавить следующие шаблоны меток:

| Метка | |
|---|---|
| `label` не указан или имеет значение `label=*` | Совпадает с любой меткой, включая `null`. |
| `label=%00` | Совпадает с меткой `null`. |
| `label=1.0.0` | Совпадает с меткой, имеющей точное значение **1.0.0**. |
| `label=1.0.*` | Совпадает с меткой, которая начинается с **1.0.** |
| `label=%00,1.0.0` | Совпадает с меткой, которая имеет значение `null` или **1.0.0** и сохранена в одном из пяти CSV-файлов. |

## <a name="values"></a>Значения

Присваиваемые ключам значения также являются строками Юникода. Для значений можно использовать любые символы Юникода. Для каждого значения можно указать дополнительный тип содержимого, определяемый пользователем. Используйте этот атрибут для хранения информации о значении, которое помогает приложению обрабатывать его должным образом.

Данные конфигурации, хранящиеся в магазине конфигурации приложений, шифруются в состоянии покоя и в пути. Ключи не зашифрованы в состоянии покоя. Конфигурацию приложений не является заменой Azure Key Vault. Не храните секреты приложения в этой службе.

## <a name="next-steps"></a>Дальнейшие действия

* [Моментальный снимок на определенный момент времени](./concept-point-time-snapshot.md)  
* [Управление функциями](./concept-feature-management.md)  
