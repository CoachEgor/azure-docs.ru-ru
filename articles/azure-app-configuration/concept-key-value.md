---
title: Общие сведения о хранилище значений ключа конфигурации приложений Azure
description: Узнайте, как данные конфигурации хранятся в конфигурации приложения Azure.
author: lisaguthrie
ms.author: lcozzens
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 02/19/2020
ms.openlocfilehash: 0b83a35d912c97ae25bc2d69d076e8eae8ca490f
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "77523610"
---
# <a name="keys-and-values"></a>Ключи и значения

Служба "Конфигурация приложений Azure" хранит данные конфигурации в виде пар "ключ — значение". Пары "ключ-значение" — это простое и гибкое представление параметров приложений, используемых разработчиками.

## <a name="keys"></a>Ключи

Ключи служат в качестве идентификаторов для пар "ключ-значение" и используются для хранения и извлечения соответствующих значений. Традиционно ключи размещаются в иерархическом пространстве имен и разделяются определенным символом, например `/` или `:`. Используйте соглашение, которое лучше всего подходит для вашего приложения. Конфигурация приложений всегда обрабатывает ключи целиком. Она не выполняет синтаксический анализ ключей для изучения структуры имен или применения к ним любых правил.

Ниже приведены два примера имен ключей, структурированных в иерархии.

* В зависимости от служб компонентов

        AppName:Service1:ApiEndpoint
        AppName:Service2:ApiEndpoint

* В зависимости от региона развертывания

        AppName:Region1:DbEndpoint
        AppName:Region2:DbEndpoint

Использование данных конфигурации в платформах приложений может зависеть от конкретных схем именования значений ключей. Например, пружинная облачная платформа Java определяет `Environment` ресурсы, которые предоставляют параметры для пружинного приложения.  Они параметризованы переменными, включающими *имя приложения* и *профиль*. Ключи для конфигураций, имеющих отношение к Spring Clould, обычно начинаются с этих двух элементов с разделителем.

Ключи хранятся в Конфигурации приложений в формате строк Юникода с учетом регистра. Например, *app1* и *App1* в хранилище Конфигурации приложений будут разными ключами. Учитывайте это при использовании параметров конфигурации в приложении, так как некоторые платформы не учитывают регистр для ключей конфигурации. Не рекомендуется использовать регистр для различения ключей.

В именах ключей можно использовать любой символ Юникода, кроме `*`, `,`, и `\`.  Если необходимо включить один из этих зарезервированных символов, используйте `\{Reserved Character}`для этого escape-символ. 

Существует общий предел размера в 10 КБ на пару "ключ-значение". Сюда входят все символы ключа, значения и связанные с ними необязательные атрибуты. В пределах этого ограничения можно создать многоуровневую иерархию ключей.

### <a name="design-key-namespaces"></a>Проектирование пространства имен ключей

Существует два принципиальных подхода к именованию ключей для данных конфигурации: плоская или иерархическая структура. С точки зрения использования в приложении эти методы похожи, но второй дает ряд дополнительных преимуществ:

* Более удобен для чтения. Разделители в функции имени иерархического ключа в виде пробелов в предложении. Слова в этих предложениях разделены пробелами.
* Более удобен для управления. Иерархия имен ключей объединяет данные конфигурации в логические группы.
* Более удобен для использования. Гораздо проще применить в запросе сопоставление иерархических имен ключей с шаблоном, чтобы извлечь только нужную часть данных конфигурации. Кроме того, многие новые платформы программирования предоставляют встроенную поддержку для иерархической конфигурации данных, что позволяет приложениям использовать определенные наборы данных конфигурации.

Вы можете использовать много разных методов для организации иерархической конфигурации ключей. Такие ключи аналогичны структурам [URI](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier). Каждый иерархический ключ представляет собой *путь* к ресурсу, состоящий из одного или нескольких компонентов с определенными разделителями. Выберите символ на роль разделителя с учетом потребностей приложения, языка программирования или платформы. В Конфигурации приложений используйте для разных ключей несколько разных разделителей.

### <a name="label-keys"></a>Пометка ключей

В Конфигурации приложений пары "ключ — значение" можно дополнять атрибутом label (метка). Метки позволяют различать пары "ключ — значение" в пределах одного ключа. Например, ключ *app1* с метками *A* и *B* создает в хранилище Конфигурации приложения два разных ключа. По умолчанию значение ключа не имеет метки. Чтобы явно ссылаться на значение ключа без метки, используйте `\0` (URL-адрес в кодировке AS `%00`).

Метка обеспечивает удобное создание вариантов ключа. Метки обычно используется для указания нескольких сред для одного ключа.

    Key = AppName:DbEndpoint & Label = Test
    Key = AppName:DbEndpoint & Label = Staging
    Key = AppName:DbEndpoint & Label = Production

### <a name="version-key-values"></a>Управление версиями для пар "ключ — значение"

Конфигурация приложения не имеет значений ключа версии автоматически. Используйте метки для создания нескольких версий любой пары "ключ — значение". Например, в метки можно заносить номера версий приложения или идентификаторы фиксации Git, чтобы отслеживать пары "ключ — значение" для определенной сборки программного обеспечения.

В метках ключей можно использовать любой символ Юникода, за исключением `*`, `,` и `\`. Эти символы зарезервированы. Чтобы включить зарезервированный символ, экранируйте его с помощью `\{Reserved Character}`.

### <a name="query-key-values"></a>Запрос пар "ключ — значение"

Каждая пара "ключ — значение" уникально идентифицируется по сочетанию ключа и метки, которая может принимать значение `null`. Запрос пар "ключ — значение" из хранилища Конфигурации приложений выполняется по шаблонам. Хранилище Конфигурации приложений возвращает все пары "ключ — значение", которые соответствуют указанному шаблону, и все относящиеся к ним значения и атрибуты. Используйте следующие шаблоны ключей в вызовах к REST API Конфигурации приложений:

| Клавиши | |
|---|---|
| `key` не указан или имеет значение `key=*` | Совпадает с любым ключом. |
| `key=abc` | Совпадает с ключом, который имеет точное имя **abc**. |
| `key=abc*` | Совпадает с ключом, имя которого начинается с **abc**. |
| `key=abc,xyz` | Соответствует именам ключей **ABC** или **XYZ**. Ограничено пятью CSV |

Кроме того, вы можете добавить следующие шаблоны меток:

| Метка | |
|---|---|
| `label` не указан или имеет значение `label=*` | Совпадает с любой меткой, включая `null`. |
| `label=%00` | Совпадает с меткой `null`. |
| `label=1.0.0` | Совпадает с меткой, имеющей точное значение **1.0.0**. |
| `label=1.0.*` | Совпадает с меткой, которая начинается с **1.0.** |
| `label=%00,1.0.0` | Совпадает с меткой, которая имеет значение `null` или **1.0.0** и сохранена в одном из пяти CSV-файлов. |

## <a name="values"></a>Значения

Присваиваемые ключам значения также являются строками Юникода. Для значений можно использовать любые символы Юникода. Для каждого значения можно указать дополнительный тип содержимого, определяемый пользователем. Используйте этот атрибут для хранения сведений о значении, которое поможет приложению правильно обработать его.

Данные конфигурации, хранящиеся в хранилище конфигурации приложения, шифруются при хранении и передаче. Ключи не шифруются при хранении. Конфигурацию приложений не является заменой Azure Key Vault. Не храните секреты приложения в этой службе.

## <a name="next-steps"></a>Дальнейшие шаги

* [Моментальный снимок на определенный момент времени](./concept-point-time-snapshot.md)  
* [Управление функциями](./concept-feature-management.md)  
