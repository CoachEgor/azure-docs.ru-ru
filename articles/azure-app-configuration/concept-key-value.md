---
title: Хранилище службы "Конфигурация приложений Azure" для ключей и значений | Документация Майкрософт
description: Общие сведения о хранении данных конфигурации в службе "Конфигурация приложений Azure"
services: azure-app-configuration
documentationcenter: ''
author: yegu-ms
manager: balans
editor: ''
ms.service: azure-app-configuration
ms.devlang: na
ms.topic: overview
ms.workload: tbd
ms.date: 02/24/2019
ms.author: yegu
ms.openlocfilehash: 24216d1bf82789d2d0fc312d9af4c06fa3c8cf4e
ms.sourcegitcommit: bf509e05e4b1dc5553b4483dfcc2221055fa80f2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2019
ms.locfileid: "60011288"
---
# <a name="key-value-store"></a>Хранилище ключ-значение

Служба "Конфигурация приложений Azure" хранит данные конфигурации в виде пар "ключ — значение". Пара "ключ — значение" — простой и гибкий механизм для представления разных параметров приложения, с которым хорошо знакомы разработчики.

## <a name="keys"></a>ключей

Ключи выполняют роль имени в парах "ключ — значение" и используются для сохранения и извлечения нужных значений. Традиционно ключи размещаются в иерархическом пространстве имен и разделяются определенным символом, например `/` или `:`. Используйте соглашение, которое вы сочтете оптимальным для приложения. Конфигурация приложений всегда обрабатывает ключи целиком. Она не выполняет синтаксический анализ ключей для изучения структуры имен или применения к ним любых правил.

Использование хранилища конфигураций на разных платформах приложений может диктовать более или менее строгие схемы именования пар "ключ — значение". Например, платформа Java Spring Cloud определяет ресурсы `Environment`, которые содержат параметризованные переменными параметры для приложений Spring и содержат *имя приложения* и *профиль*. Ключи для конфигураций, имеющих отношение к Spring Clould, обычно начинаются с этих двух элементов с разделителем.

Ключи хранятся в Конфигурации приложений в формате строк Юникода с учетом регистра. Например, *app1* и *App1* в хранилище Конфигурации приложений будут разными ключами. Учитывайте это при использовании параметров конфигурации в приложении, так как некоторые платформы не учитывают регистр для ключей конфигурации. Например, система конфигурации ASP.NET Core обрабатывает все ключи как строки без учета регистра. Чтобы избежать непредсказуемых результатов при обращении к службе "Конфигурация приложений" из приложения ASP.NET Core, не используйте ключи, которые отличаются только регистром.

В именах ключей в службе "Конфигурация приложений" можно использовать любой символ Юникода, за исключением `*`, `,` и `\`. Эти символы зарезервированы. Если вам нужно использовать зарезервированный символ, экранируйте его с помощью `\{Reserved Character}`. На размер каждой пары "ключ — значение" налагается общее ограничение в 10 000 символов. Сюда входят все символы ключа, значения и связанные с ними необязательные атрибуты. В пределах этого ограничения можно создать многоуровневую иерархию ключей.

### <a name="design-key-namespaces"></a>Проектирование пространства имен ключей

Существует два принципиальных подхода к именованию ключей для данных конфигурации: плоская или иерархическая структура. С точки зрения использования в приложении эти методы похожи, но второй дает ряд дополнительных преимуществ:

* Более удобен для чтения. В отличие от одной длинной последовательности символов иерархические имена ключей с разделителями воспринимаются как предложения. Слова в этих предложениях разделены пробелами.
* Более удобен для управления. Иерархия имен ключей объединяет данные конфигурации в логические группы.
* Более удобен для использования. Гораздо проще применить в запросе сопоставление иерархических имен ключей с шаблоном, чтобы извлечь только нужную часть данных конфигурации. Кроме того, многие новые платформы программирования предоставляют встроенную поддержку для иерархической конфигурации данных, что позволяет приложениям использовать определенные наборы данных конфигурации.

Вы можете использовать много разных методов для организации иерархической конфигурации ключей. Такие ключи аналогичны структурам [URI](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier). Каждый иерархический ключ представляет собой *путь* к ресурсу, состоящий из одного или нескольких компонентов с определенными разделителями. Выберите символ на роль разделителя с учетом потребностей приложения, языка программирования или платформы. В Конфигурации приложений используйте для разных ключей несколько разных разделителей.

Следующие примеры демонстрируют варианты структуры имен для иерархии ключей.

* В зависимости от среды

        AppName:Test:DB:Endpoint
        AppName:Staging:DB:Endpoint
        AppName:Production:DB:Endpoint

* В зависимости от служб компонентов

        AppName:Service1:Test:DB:Endpoint
        AppName:Service1:Staging:DB:Endpoint
        AppName:Service1:Production:DB:Endpoint
        AppName:Service2:Test:DB:Endpoint
        AppName:Service2:Staging:DB:Endpoint
        AppName:Service2:Production:DB:Endpoint

* В зависимости от региона развертывания

        AppName:Production:Region1:DB:Endpoint
        AppName:Production:Region2:DB:Endpoint

### <a name="version-key-values"></a>Управление версиями для пар "ключ — значение"

В Конфигурации приложений пары "ключ — значение" можно дополнять атрибутом label (метка). Метки позволяют различать пары "ключ — значение" в пределах одного ключа. Например, ключ *app1* с метками *v1* и *v2* создает в хранилище Конфигурации приложений две разные пары "ключ — значение". По умолчанию для пары "ключ — значение" присваивается пустая метка или значение `null`.

Конфигурация приложений не выполняет автоматическое управление версиями при изменении пар "ключ — значение". Используйте метки для создания нескольких версий любой пары "ключ — значение". Например, в метки можно заносить номера версий приложения или идентификаторы фиксации Git, чтобы отслеживать пары "ключ — значение" для определенной сборки программного обеспечения.

В метках ключей можно использовать любой символ Юникода, за исключением `*`, `,` и `\`. Эти символы зарезервированы. Чтобы включить зарезервированный символ, экранируйте его с помощью `\{Reserved Character}`.

### <a name="query-key-values"></a>Запрос пар "ключ — значение"

Каждая пара "ключ — значение" уникально идентифицируется по сочетанию ключа и метки, которая может принимать значение `null`. Запрос пар "ключ — значение" из хранилища конфигураций выполняется по шаблонам. Хранилище Конфигурации приложений возвращает все пары "ключ — значение", которые соответствуют указанному шаблону, и все относящиеся к ним значения и атрибуты. Используйте следующие шаблоны ключей в вызовах к REST API Конфигурации приложений:

| Ключ | |
|---|---|
| `key` не указан или имеет значение `key=*` | Совпадает с любым ключом. |
| `key=abc` | Совпадает с ключом, который имеет точное имя **abc**. |
| `key=abc*` | Совпадает с ключом, имя которого начинается с **abc**. |
| `key=*abc` | Совпадает с ключом, имя которого заканчивается на **abc**. |
| `key=*abc*` | Совпадает с ключом, имя которого содержит **abc**. |
| `key=abc,xyz` | Совпадает с ключом, который имеет имя **abc** или **xyz** и сохранен в одном из пяти CSV-файлов. |

Кроме того, вы можете добавить следующие шаблоны меток:

| Метка | |
|---|---|
| `label` не указан или имеет значение `label=*` | Совпадает с любой меткой, включая `null`. |
| `label=%00` | Совпадает с меткой `null`. |
| `label=1.0.0` | Совпадает с меткой, имеющей точное значение **1.0.0**. |
| `label=1.0.*` | Совпадает с меткой, которая начинается с **1.0.** |
| `label=*.0.0` | Совпадает с меткой, которая заканчивается на **0.0.** |
| `label=*.0.*` | Совпадает с меткой, которая содержит **.0.** |
| `label=%00,1.0.0` | Совпадает с меткой, которая имеет значение `null` или **1.0.1** и сохранена в одном из пяти CSV-файлов. |

## <a name="values"></a>Значения

Присваиваемые ключам значения также являются строками Юникода. Для значений можно использовать любые символы Юникода. Для каждого значения можно указать дополнительный тип содержимого, определяемый пользователем. Этот атрибут позволяет хранить дополнительные данные о значении (например, о схеме кодирования), которые помогут приложению правильно обработать это значение.

В хранилище Конфигурации приложений все данные конфигурации, в том числе все ключи и значения, шифруются при хранении и передаче. Конфигурацию приложений не является заменой Azure Key Vault. Не храните секреты приложения в этой службе.

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Моментальный снимок на определенный момент времени](./concept-point-time-snapshot.md)  
