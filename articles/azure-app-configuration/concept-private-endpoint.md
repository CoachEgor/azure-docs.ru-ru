---
title: Использование частных конечных точек для конфигурации приложений Azure
description: Обезопащивайте магазин конфигурации приложений с помощью частных конечных точек
services: azure-app-configuration
author: lisaguthrie
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 3/12/2020
ms.author: lcozzens
ms.openlocfilehash: f18672b9e3a368a833fc8cba279d748dfe3c2a9e
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79366774"
---
# <a name="using-private-endpoints-for-azure-app-configuration"></a>Использование частных конечных точек для конфигурации приложений Azure

Вы можете использовать [частные конечные точки](../private-link/private-endpoint-overview.md) для конфигурации приложений Azure, чтобы клиенты виртуальной сети (VNet) могли безопасно получать доступ к данным по [частной ссылке.](../private-link/private-link-overview.md) Частная конечная точка использует IP-адрес из адресного пространства VNet для вашего магазина конфигурации приложений. Сетевой трафик между клиентами в VNet и магазине Конфигурации Приложений пересекает VNet с помощью частной ссылки на магистральной сети Microsoft, исключая доступ к общедоступному интернету.

Использование частных конечных точек для вашего магазина конфигурации приложений позволяет:
- Защищайте детали конфигурации приложения, настраивая брандмауэр, чтобы заблокировать все соединения с конфигурацией приложений в общедоступной конечном пункте.
- Повысить безопасность виртуальной сети (VNet), чтобы данные не убегали от VNet.
- Безопасное подключение к магазину Конфигурации Приложений из закрытых сетей, которые подключаются к VNet с помощью [VPN](../vpn-gateway/vpn-gateway-about-vpngateways.md) или [ExpressRoutes](../expressroute/expressroute-locations.md) с частными пирингами.

> [!NOTE]
> Конфигурация приложений Azure предлагает использование частных конечных точек в качестве общедоступного предварительного просмотра. Предложения общедоступной предварительной версии позволяют клиентам экспериментировать с новыми функциями до официального выпуска.  Общедоступные предварительные версии функций и служб не предназначены для использования в рабочей среде.

## <a name="conceptual-overview"></a>Общие сведения

Частная конечная точка — это специальный сетевой интерфейс для службы Azure в вашей [виртуальной сети](../virtual-network/virtual-networks-overview.md) (VNet). При создании частной конечной точки для магазина App Config обеспечивается безопасное подключение между клиентами в вашем VNet и магазине конфигурации. Частной конечной точке присваивается IP-адрес из диапазона IP-адресов вашего VNet. Соединение между частной конечной точкой и магазином конфигурации использует безопасную частную ссылку.

Приложения в VNet могут подключаться к магазину конфигурации через частную конечную точку, **используя те же строки соединения и механизмы авторизации, которые они использовали бы в противном случае.** Частные конечные точки могут быть использованы со всеми протоколами, поддерживаемыми магазином Конфигурации Приложений.

В то время как конфигурация приложения не поддерживает конечные точки службы, частные конечные точки могут быть созданы в подсетях, которые используют [конечные точки службы.](../virtual-network/virtual-network-service-endpoints-overview.md) Клиенты в подсети могут безопасно подключиться к магазину Конфигурации Приложений, используя частную конечную точку, используя конечные точки обслуживания для доступа к другим.  

При создании частной конечной точки для службы в VNet запрос на согласие отправляется на утверждение владельцу учетной записи службы. Если пользователь, запрашивающий создание частной конечной точки, также является владельцем учетной записи, этот запрос на согласие автоматически утверждается.

Владельцы учетных записей сервиса могут `Private Endpoints` управлять запросами на согласие и частными конечными точками через вкладку конфи-магазина на [портале Azure.](https://portal.azure.com)

### <a name="private-endpoints-for-app-configuration"></a>Частные конечные точки для конфигурации приложений 

При создании частной конечной точки необходимо указать магазин конфигурации приложений, к которому он подключается. Если в учетной записи есть несколько экземпляров конфигурации приложений, вам нужна отдельная частная конечная точка для каждого магазина.

### <a name="connecting-to-private-endpoints"></a>Подключение к частным конечным точкам

Azure полагается на разрешение DNS для маршрутизации из VNet в магазин конфигурации по частной ссылке. Вы можете быстро найти строки соединения на портале Azure, выбрав магазин конфигурации приложений, а затем выбрав**ключи доступа** **настроек.** >   

> [!IMPORTANT]
> Используйте ту же строку соединения для подключения к магазину конфигурации приложений с использованием частных конечных точек, как вы будете использовать для общедоступной конечных точек. Не подключайтесь к учетной записи хранилища, используя URL-адрес `privatelink` поддона.

## <a name="dns-changes-for-private-endpoints"></a>Изменения DNS для частных конечных точек

При создании частной конечной точки запись ресурсов DNS CNAME для магазина конфигурации обновляется до `privatelink`псевдонима в поддомене с префиксом. Azure также создает [частную зону DNS,](../dns/private-dns-overview.md) соответствующую `privatelink` поддомену, с записями ресурсов DNS A для частных конечных точек.

При устранении URL-адреса конечной точки за пределами VNet он разрешается общедоступной конечной точке магазина. При разрешении из VNet, где размещается частная конечная точка, URL-адрес указывает на частную конечную точку.

Вы можете контролировать доступ для клиентов за пределами VNet через общедоступную конечную точку с помощью службы Azure Firewall.

Такой подход позволяет получить доступ к **магазину, используя ту же строку подключения** для клиентов в VNet, принимающих частные конечные точки, а также клиентов за пределами VNet.

Если вы используете пользовательский DNS-сервер в вашей сети, клиенты должны быть в состоянии решить полностью квалифицированное доменное имя (ФЗДН) для конечную точку службы на частный IP-адрес. Навлажив ажиотажный DNS-сервер, чтобы делегировать свой личный поддомен в частную зону DNS для VNet, или настроить записи A для `AppConfigInstanceA.privatelink.azconfig.io` с частным IP-адресом endpoint.

> [!TIP]
> При использовании пользовательского или локального DNS-сервера следует настроить DNS-сервер `privatelink` для решения вопроса о названии магазина в поддомене на частный IP-адрес конечных точек. Вы можете сделать это, `privatelink` делегируя поддомен в частную зону DNS VNet, или настраивая зону DNS на вашем DNS-сервере и добавляя записи DNS A.

## <a name="pricing"></a>Цены

Включение частных конечных точек требует магазина конфигурации приложений [стандартного уровня.](https://azure.microsoft.com/pricing/details/app-configuration/)  Чтобы узнать о частных [Azure Private Link pricing](https://azure.microsoft.com/pricing/details/private-link)ценах на ссылки, см.

## <a name="next-steps"></a>Дальнейшие действия

Подробнее о создании частной конечной точки для магазина конфигурации приложений можно узнать по следующим статьям:

- [Создание частной конечной точки с помощью центра частной ссылки на портале Azure](../private-link/create-private-endpoint-portal.md)
- [Создание частной конечной точки с помощью Azure CLI](../private-link/create-private-endpoint-cli.md)
- [Создание частной конечной точки с помощью Azure PowerShell](../private-link/create-private-endpoint-powershell.md)

Научитесь настраивать dNS-сервер с помощью частных конечных точек:

- [Разрешение имен ресурсов в виртуальных сетях Azure | Документация Майкрософт](/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances#name-resolution-that-uses-your-own-dns-server)
- [Конфигурация DNS для частных конечных точек](/azure/private-link/private-endpoint-overview#dns-configuration)
