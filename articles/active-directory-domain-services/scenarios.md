---
title: Общие сценарии развертывания для доменных служб Azure AD | Документация Майкрософт
description: Узнайте о некоторых распространенных сценариях и вариантах использования Azure Active Directory доменных служб для предоставления ценности и удовлетворения бизнес-потребностей.
services: active-directory-ds
author: iainfoulds
manager: daveba
ms.assetid: c5216ec9-4c4f-4b7e-830b-9d70cf176b20
ms.service: active-directory
ms.subservice: domain-services
ms.workload: identity
ms.topic: conceptual
ms.date: 02/10/2020
ms.author: iainfou
ms.openlocfilehash: ac67ef64ca4850c6e805b5314ace856114d889a7
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "77917236"
---
# <a name="common-use-cases-and-scenarios-for-azure-active-directory-domain-services"></a>Распространенные варианты использования и сценарии для Azure Active Directory доменных служб

Azure Active Directory доменных служб (Azure AD DS) предоставляет управляемые доменные службы, такие как присоединение к домену, групповая политика, протокол LDAP и проверка подлинности Kerberos/NTLM. Azure AD DS интегрируются с существующим клиентом Azure AD, что позволяет пользователям входить в систему с использованием существующих учетных данных. Эти доменные службы используются без необходимости развертывания, управления и обновления контроллеров домена в облаке, что обеспечивает более гладкий перенос локальных ресурсов в Azure.

В этой статье описаны некоторые распространенные бизнес-сценарии, в которых AD DS Azure предоставляет ценность и соответствует этим потребностям.

## <a name="secure-administration-of-azure-virtual-machines"></a>Безопасное Администрирование виртуальных машин Azure

Чтобы использовать один набор учетных данных AD, виртуальные машины Azure можно присоединить к управляемому домену Azure AD DS. Такой подход сокращает количество проблем с управлением учетными данными, например поддержание локальных учетных записей администраторов на каждой виртуальной машине или отдельных учетных записей и паролей между средами.

Виртуальные машины, присоединенные к управляемому домену AD DS Azure, также могут быть управляемыми и защищенными с помощью групповой политики. Необходимые базовые показатели безопасности можно применить к виртуальным машинам, чтобы заблокировать их в соответствии с правилами безопасности Организации. Например, можно использовать возможности управления групповой политикой для ограничения типов приложений, которые могут быть запущены на виртуальной машине.

![Упрощенное администрирование виртуальных машин Azure](./media/active-directory-domain-services-scenarios/streamlined-vm-administration.png)

Рассмотрим типичный пример сценария. По мере того, как серверы и другие инфраструктуры прийдут к концу жизни, компания Contoso хочет перенести приложения, размещенные локально в облаке. Их текущий ИТ-стандарт требует, чтобы серверы, на которых размещены корпоративные приложения, были присоединены к домену и управлялись с помощью групповой политики. ИТ – администратор компании Contoso предпочитает присоединить к домену виртуальные машины, развернутые в Azure, чтобы упростить администрирование, так как пользователи могут выполнять вход с использованием корпоративных учетных данных. При присоединении к домену виртуальные машины также могут быть настроены на соответствие необходимым базовым показателям безопасности с помощью объектов групповой политики (GPO). Contoso предпочитает не развертывать и отслеживать собственные контроллеры домена в Azure, а также управлять ими.

AD DS Azure отлично подходит для этого варианта использования. Управляемый домен AD DS Azure позволяет присоединять к домену виртуальные машины, использовать единый набор учетных данных и применять групповую политику. В качестве управляемого домена вам не нужно настраивать и обслуживать контроллеры домена самостоятельно.

### <a name="deployment-notes"></a>Примечания по развертыванию

Следующие рекомендации по развертыванию относятся к этому примеру использования:

* По умолчанию управляемые домены AD DS Azure используют по одной плоской структуре подразделений (OU). Все виртуальные машины, присоединенные к домену, находятся в одном подразделении. При необходимости можно создать пользовательские подразделения.
* AD DS Azure использует встроенный объект групповой политики для контейнеров пользователей и компьютеров. Для дополнительного контроля можно создать пользовательские объекты групповой политики и выбрать их для пользовательских подразделений.
* Azure AD DS поддерживает схему объектов базового компьютера AD. Невозможно расширить схему объекта Computer.

## <a name="lift-and-shift-on-premises-applications-that-use-ldap-bind-authentication"></a>Локальные приложения с нулификацией и сдвигом, использующие проверку подлинности LDAP BIND

В качестве примера сценария компания Contoso имеет локальное приложение, которое было приобретено в несколько лет назад от независимых поставщиков программных продуктов. Приложение в настоящее время находится в режиме обслуживания независимо от поставщика программного обеспечения, и запрос изменений в приложении является недорогим. Это приложение имеет веб-интерфейс, который собирает учетные данные пользователя с помощью веб-формы, а затем проверяет подлинность пользователей, выполняя привязку LDAP к локальной среде AD DS.

![Привязка LDAP](./media/active-directory-domain-services-scenarios/ldap-bind.png)

Contoso хочет перенести это приложение в Azure. Приложение должно продолжать работать "как есть", и никаких изменений не требуется. Кроме того, пользователи должны иметь возможность проходить проверку подлинности с помощью существующих корпоративных учетных данных и без дополнительного обучения. Он должен быть прозрачным для конечных пользователей, где работает приложение.

В этом сценарии Azure AD DS позволяет приложениям выполнять привязку LDAP в процессе проверки подлинности. Устаревшие локальные приложения могут преноситься в Azure и без каких-либо изменений в конфигурации или в пользовательском интерфейсе.

### <a name="deployment-notes"></a>Примечания по развертыванию

Следующие рекомендации по развертыванию относятся к этому примеру использования:

* Убедитесь, что приложению не нужно изменять или записывать в каталог. Доступ на запись LDAP к управляемому домену AD DS Azure не поддерживается.
* Нельзя изменить пароли непосредственно в управляемом домене Azure AD DS. Конечный пользователь может изменить пароль либо с помощью механизма изменения паролей Azure AD в режиме самообслуживания, либо в локальном каталоге. Затем эти изменения автоматически синхронизируются и доступны в управляемом домене Azure AD DS.

## <a name="lift-and-shift-on-premises-applications-that-use-ldap-read-to-access-the-directory"></a>Локальные приложения с нулификацией и сдвигом, использующие LDAP Read для доступа к каталогу

Как и в предыдущем примере сценария, предположим, что у компании Contoso есть локальное бизнес-приложение, которое было разработано почти в десять лет назад. Это приложение учитывает каталог и предназначено для использования протокола LDAP для чтения сведений и атрибутов пользователей из AD DS. Приложение не изменяет атрибуты или не выполняет запись в каталог.

Компания Contoso хочет перенести это приложение в Azure и снять с учета срок давности локальное оборудование, в котором размещено это приложение. Приложение не может быть переписано для использования современных API каталогов, таких как API-интерфейсы Microsoft Graph на основе RESTFUL. Чтобы приложение можно было перенести в облако, не изменяя код или переписывая приложение, необходимо выбрать параметр точности и сдвига.

Чтобы помочь в этом сценарии, Azure AD DS позволяет приложениям выполнять операции чтения LDAP для управляемого домена, чтобы получить необходимые сведения об атрибутах. Приложение не нуждается в переписывания, поэтому в Azure вы можете продолжать использовать приложение, не зная, где он выполняется.

### <a name="deployment-notes"></a>Примечания по развертыванию

Следующие рекомендации по развертыванию относятся к этому примеру использования:

* Убедитесь, что приложению не нужно изменять или записывать в каталог. Доступ на запись LDAP к управляемому домену AD DS Azure не поддерживается.
* Убедитесь, что приложению не требуется пользовательская или расширенная схема Active Directory. Расширения схемы не поддерживаются в AD DS Azure.

## <a name="migrate-an-on-premises-service-or-daemon-application-to-azure"></a>Перенос локальной службы или управляющего приложения в Azure

Некоторые приложения включают несколько уровней, где один из уровней должен выполнять проверку подлинности вызовов к серверной категории, например к базе данных. В этих сценариях обычно используются учетные записи служб Active Directory. При перетаскивании приложений в Azure Azure AD DS позволяет продолжать использовать учетные записи служб таким же образом. Вы можете использовать ту же учетную запись службы, которая синхронизируется из локального каталога с Azure AD, или создать настраиваемое подразделение, а затем создать отдельную учетную запись службы в этом подразделении. При любом подходе приложения продолжают работать таким же образом, чтобы выполнять проверку подлинности вызовов к другим уровням и службам.

![Учетная запись службы с WIA](./media/active-directory-domain-services-scenarios/wia-service-account.png)

В этом примере сценария компания Contoso имеет пользовательское приложение хранилища программного обеспечения, которое включает в себя веб-интерфейс, сервер SQL Server и внутренний сервер FTP. Встроенная проверка подлинности Windows, использующая учетные записи служб, выполняет проверку подлинности клиентского веб-сервера. Веб-интерфейс настраивается для запуска в качестве учетной записи службы. Внутренний сервер настраивается для авторизации доступа к учетной записи службы для веб-интерфейса. Contoso не хочет развертывать собственные виртуальные машины контроллера домена в облаке и управлять ими, чтобы переместить это приложение в Azure.

В этом сценарии серверы, на которых размещается веб-интерфейс, SQL Server и сервер FTP, можно перенести на виртуальные машины Azure и присоединить к управляемому домену Azure AD DS. Затем виртуальные машины могут использовать одну и ту же учетную запись службы в локальном каталоге для проверки подлинности приложения, которая синхронизируется с помощью Azure AD, используя Azure AD Connect.

### <a name="deployment-notes"></a>Примечания по развертыванию

Следующие рекомендации по развертыванию относятся к этому примеру использования:

* Убедитесь, что приложения используют имя пользователя и пароль для проверки подлинности. Azure AD DS не поддерживает проверку подлинности на основе сертификата или смарт-карты.
* Нельзя изменить пароли непосредственно в управляемом домене Azure AD DS. Конечный пользователь может изменить пароль либо с помощью механизма изменения паролей Azure AD в режиме самообслуживания, либо в локальном каталоге. Затем эти изменения автоматически синхронизируются и доступны в управляемом домене Azure AD DS.

## <a name="windows-server-remote-desktop-services-deployments-in-azure"></a>Развертывания служб удаленных рабочих столов Windows Server в Azure

Вы можете использовать AD DS Azure, чтобы предоставить управляемые доменные службы серверам удаленных рабочих столов, развернутым в Azure. Дополнительные сведения об этом сценарии развертывания см. [в статье Интеграция доменных служб Azure AD с развертыванием RDS][windows-rds].

## <a name="domain-joined-hdinsight-clusters"></a>Присоединенные к домену кластеры HDInsight

Вы можете настроить кластер Azure HDInsight, присоединенный к управляемому домену Azure AD DS с включенным Apache Ranger. Вы можете создавать и применять политики Hive с помощью Apache Ranger и разрешать пользователям, таким как специалисты по обработке и анализу данных, подключаться к Hive с помощью таких средств на основе ODBC, как Excel или Tableau. Мы продолжаем работать над добавлением других рабочих нагрузок, таких как HBase, Spark и прочее, к присоединенному к домену HDInsight.

Дополнительные сведения об этом сценарии развертывания см. [в статье Настройка присоединенных к домену кластеров HDInsight][hdinsight] .

## <a name="next-steps"></a>Дальнейшие действия

Чтобы приступить к работе, [Создайте и настройте Azure Active Directory экземпляр доменных служб][tutorial-create-instance] .

<!-- INTERNAL LINKS -->
[hdinsight]: ../hdinsight/domain-joined/apache-domain-joined-configure.md
[tutorial-create-instance]: tutorial-create-instance.md

<!-- EXTERNAL LINKS -->
[windows-rds]: /windows-server/remote/remote-desktop-services/rds-azure-adds
