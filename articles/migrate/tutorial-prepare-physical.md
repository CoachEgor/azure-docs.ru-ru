---
title: Подготовка физических серверов к оценке и миграции с помощью Миграции Azure
description: Узнайте, как подготовить физические серверы к оценке и миграции с помощью службы "Миграция Azure".
ms.topic: tutorial
ms.date: 04/15/2020
ms.custom: mvc
ms.openlocfilehash: 55e6039e5844c575808210cde7ee348f658b40ec
ms.sourcegitcommit: e71da24cc108efc2c194007f976f74dd596ab013
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/29/2020
ms.locfileid: "87420793"
---
# <a name="prepare-for-assessment-and-migration-of-physical-servers-to-azure"></a>Подготовка физических компьютеров к оценке и миграции в Azure

В этой статье описывается, как подготовить к оценке локальные физические серверы с помощью службы [Миграция Azure](migrate-services-overview.md).

Служба [Миграция Azure](./migrate-services-overview.md) объединяет в себе инструменты, которые используются для поиска, оценки и переноса приложений, инфраструктуры и рабочих нагрузок в Microsoft Azure. Она включает в себя инструменты Миграции Azure и предложения независимых поставщиков программного обеспечения. 

Это руководство является первым в цикле. В нем показано, как оценивать физические компьютеры с помощью Миграции Azure. В этом руководстве описано следующее:

> [!div class="checklist"]
> * Подготовьте Azure. Настройка разрешений для своей учетной записи Azure и ресурсов для работы с Миграцией Azure.
> * Подготовка локальных физических серверов к оценке.


> [!NOTE]
> В руководствах показан простейший путь развертывания сценария, использование которого позволяет быстро настроить проверку концепции. В руководствах по возможности используются параметры по умолчанию и показаны не все возможные параметры и пути. Для получения подробных инструкций ознакомьтесь с практическими руководствами по оценке физических серверов.


Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/pricing/free-trial/), прежде чем начинать работу.


## <a name="prepare-azure-for-server-assessment"></a>Подготовка Azure к оценке серверов

Настройка Azure для работы со службой "Миграция Azure". 

**Задача** | **Сведения** 
--- | --- 
**Создание проекта службы "Миграция Azure"** | Чтобы создать проект, учетная запись Azure должна иметь привилегии участника или владельца. 
**Регистрация поставщиков ресурсов (только для оценки)** | Служба "Миграция Azure" использует упрощенное устройство для обнаружения и оценки компьютеров с помощью средства "Миграция Azure: оценка сервера".<br/><br/> Когда вы регистрируете модуль, в выбранной для модуля подписке регистрируются поставщики ресурсов. [Подробнее](migrate-appliance-architecture.md#appliance-registration).<br/><br/> Для регистрации поставщиков ресурсов требуется роль участника или владельца в подписке.
**Создание приложения Azure AD (только для оценки)** | При регистрации модуля служба "Миграция Azure" создает приложение Azure Active Directory (Azure AD), которое используется для обмена данными между агентами, выполняющимися на устройстве, и соответствующими службами, выполняющимися в Azure. [Подробнее](migrate-appliance-architecture.md#appliance-registration).<br/><br/> Для создания приложений Azure AD требуются разрешения (доступно в роли разработчика приложений).


### <a name="assign-permissions-to-create-project"></a>Назначение разрешений для создания проекта 

Убедитесь, что у вас есть разрешения на создание приложений проекта Миграции Azure.

1. На портале Azure откройте подписку, а затем выберите **Управление доступом (IAM)** .
2. В разделе **Проверить доступ** найдите соответствующую учетную запись и щелкните ее, чтобы просмотреть разрешения.
3. Вы должны обладать разрешениями уровня **Участник** или **Владелец**.
    - Если вы создали бесплатную учетную запись Azure, вы являетесь владельцем подписки.
    - Если вы не являетесь владельцем подписки, назначьте эту роль совместно с владельцем.


### <a name="assign-permissions-to-register-the-appliance"></a>Назначение разрешений для регистрации устройства 

Во время регистрации устройства вы можете назначить службе "Миграция Azure" разрешения для создания приложений Azure AD одним из следующих способов:

- Администратор клиента и глобальный администратор могут предоставлять разрешения пользователям в клиенте для создания и регистрации приложений Azure AD.
- Администратор клиента и глобальный администратор могут назначить роль разработчика приложений (которая уже имеет нужные разрешения).

> [!NOTE]
> - У приложения нет других разрешений на доступ к подписке, помимо описанных выше.
> - Эти разрешения требуются только для регистрации нового устройства. После настройки устройства разрешения можно удалить.


#### <a name="grant-account-permissions"></a>Предоставление разрешений учетной записи

Администратор клиента и глобальный администратор могут предоставить разрешения, выполнив следующие действия:

1. В Azure AD глобальному администратору или администратору клиента нужно перейти в раздел **Azure Active Directory** > **Пользователи** > **Параметры пользователей**.
2. Затем для параметра **Регистрация приложений** нужно выбрать вариант **Да**.

    ![Разрешения Azure AD](./media/tutorial-prepare-hyper-v/aad.png)

> [!NOTE]
> Это значение по умолчанию, которое разрешает выполнять регистрацию. [Подробнее](../active-directory/develop/active-directory-how-applications-are-added.md#who-has-permission-to-add-applications-to-my-azure-ad-instance).

#### <a name="assign-application-developer-role"></a>Назначение роли разработчика приложения

Администратор клиента и глобальный администратор могут назначить учетной записи роль разработчика приложений. [Подробнее](../active-directory/fundamentals/active-directory-users-assign-role-azure-portal.md).


## <a name="prepare-azure-for-physical-server-migration"></a>Подготовка Azure к переносу физических серверов

Подготовьте Azure к переносу физических серверов с помощью средства миграции сервера.

**Задача** | **Сведения**
--- | ---
**Создание проекта службы "Миграция Azure"** | Для создания проекта учетная запись Azure должна иметь разрешения "Участник" или "Владелец".
**Проверка разрешений учетной записи Azure** | Учетная запись Azure должна иметь разрешения на создание виртуальной машины и на запись на управляемый диск Azure.
**Создание сети Azure** | Настройте в Azure сеть.


### <a name="assign-permissions-to-create-project"></a>Назначение разрешений для создания проекта

1. На портале Azure откройте подписку, а затем выберите **Управление доступом (IAM)** .
2. В разделе **Проверить доступ** найдите соответствующую учетную запись и щелкните ее, чтобы просмотреть разрешения.
3. Вы должны обладать разрешениями уровня **Участник** или **Владелец**.
    - Если вы создали бесплатную учетную запись Azure, вы являетесь владельцем подписки.
    - Если вы не являетесь владельцем подписки, назначьте эту роль совместно с владельцем.


### <a name="assign-azure-account-permissions"></a>Назначение разрешений учетной записи Azure

Назначьте учетной записи Azure роль участника виртуальных машин. Это предоставит следующие разрешения:
  - разрешение на создание виртуальной машины в выбранной группе ресурсов;
  - разрешение на создание виртуальной машины в выбранной виртуальной сети;
  - разрешение на запись на управляемый диск Azure. 

### <a name="create-an-azure-network"></a>Создание сети Azure

[Настройте](../virtual-network/manage-virtual-network.md#create-a-virtual-network) виртуальную сеть Azure. При репликации в Azure создаются виртуальные машины Azure, которые присоединяются к виртуальной сети Azure, указанной при настройке миграции.


## <a name="prepare-for-physical-server-assessment"></a>Подготовка к оценке физических серверов

Чтобы подготовиться к оценке физических серверов, необходимо проверить их параметры, а также параметры развертывания устройств.

### <a name="verify-physical-server-settings"></a>Проверка параметров физических серверов

1. Проверьте [требования к физическим серверам](migrate-support-matrix-physical.md#physical-server-requirements) для оценки серверов.
2. Убедитесь, что на физических серверах открыты [необходимые порты](migrate-support-matrix-physical.md#port-access).


### <a name="verify-appliance-settings"></a>Проверка настроек устройства

Перед настройкой устройства Миграции Azure и началом оценки из следующего руководства вам следует подготовиться к развертыванию устройства.

1. [Проверьте](migrate-appliance.md#appliance---physical) требования к устройствам для физических серверов.
2. Проверьте URL-адреса Azure, к которым модуль будет обращаться в [общедоступных](migrate-appliance.md#public-cloud-urls) облаках и облаках для [государственных организаций](migrate-appliance.md#government-cloud-urls).
3. [Просмотрите данные](migrate-appliance.md#collected-data---vmware), которые модуль будет собирать в процессе обнаружения и оценки.
4. [Возьмите во внимание](migrate-support-matrix-physical.md#port-access) требования для доступа к порту для оценки физического сервера.


### <a name="set-up-an-account-for-physical-server-discovery"></a>Настройка учетной записи для обнаружения физических серверов

Миграции Azure необходимы разрешения для обнаружения локальных серверов.

- **Windows:** Вам потребуется учетная запись домена для обнаружения присоединенных к домену серверов, а также локальная учетная запись для обнаружения компьютеров, которые не присоединены к домену. Учетная запись пользователя должна быть добавлена в следующие группы: "Пользователи удаленного управления", "Пользователи Монитора производительности" и "Пользователи журналов производительности".
- **Linux:** Вам потребуются права суперпользователя на серверах Linux, которые вы хотите обнаружить.

## <a name="prepare-for-physical-server-migration"></a>Подготовка к переносу физических серверов

Ознакомьтесь с требованиями к миграции физических серверов.

> [!NOTE]
> При переносе физических компьютеров средство миграции сервера службы "Миграция Azure" использует ту же архитектуру репликации, что и функция аварийного восстановления на основе агента в Azure Site Recovery, а некоторые из их компонентов используют одну и ту же базу кода. В некоторых местах может упоминаться документация по Site Recovery.

1. [Проверьте](migrate-support-matrix-physical-migration.md#physical-server-requirements) требования для миграции физического сервера.
2. Средство миграции сервера службы "Миграция Azure" использует сервер репликации для переноса физического сервера.
    - [Проверьте](migrate-replication-appliance.md#appliance-requirements) требования к развертыванию для устройства репликации и [параметры](migrate-replication-appliance.md#mysql-installation) для установки MySQL на устройстве.
    - Проверьте [URL-адреса Azure](migrate-appliance.md#url-access), к которым модуль репликации будет обращаться в общедоступных облаках и облаках для государственных организаций.
    - Просмотрите требования относительно доступа к [порту] (migrate-replication-appliance.md#port-access) для модуля репликации.
3. Прежде чем переносить виртуальные машины в Azure, необходимо внести в них некоторые изменения.
    - Важно внести эти изменения до начала миграции. Если вы перенесете виртуальную машину до внесения изменений, она может не загрузиться в Azure.
    - Просмотрите сведения об изменениях для [Windows](prepare-for-migration.md#windows-machines) и [Linux](prepare-for-migration.md#linux-machines), которые необходимо внести.



## <a name="next-steps"></a>Дальнейшие действия

Изучив это руководство, вы:

> [!div class="checklist"]
> * Настроили разрешения для учетной записи Azure.
> * подготовили физические серверы к оценке.

Перейдите к следующему руководству по созданию проекта Миграции Azure и оцените физические серверы для миграции в Azure.

> [!div class="nextstepaction"]
> [Оценка физических серверов](./tutorial-assess-physical.md)
