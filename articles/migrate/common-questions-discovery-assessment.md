---
title: Вопросы об анализе обнаружения, оценки и зависимости в Azure Migrate
description: Получите ответы на общие вопросы об анализе открытий, оценки и зависимости в Azure Migrate.
ms.topic: conceptual
ms.date: 04/15/2020
ms.openlocfilehash: b4b2a50bc88768d46c82f6bce73447dc901e5dfd
ms.sourcegitcommit: acb82fc770128234f2e9222939826e3ade3a2a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81681901"
---
# <a name="discovery-assessment-and-dependency-analysis---common-questions"></a>Анализ открытий, оценки и зависимости - Общие вопросы

В этой статье рассматриваются общие вопросы об анализе открытий, оценки и зависимости в Azure Migrate. Если у вас есть другие вопросы, проверьте эти ресурсы:

- [Общие вопросы](resources-faq.md) о Мигрировать Лазурный регион
- Вопросы об [приборе Azure Migrate](common-questions-appliance.md)
- Вопросы о [миграции серверов](common-questions-server-migration.md)
- Получить ответы на вопросы на [форуме Azure Migrate](https://aka.ms/AzureMigrateForum)


## <a name="what-geographies-are-supported-for-discovery-and-assessment-with-azure-migrate"></a>Какие географические регионы поддерживаются для обнаружения и оценки с Azure Migrate?

Просмотрите поддерживаемые географические регионы для [общественных](migrate-support-matrix.md#supported-geographies-public-cloud) и [правительственных облаков.](migrate-support-matrix.md#supported-geographies-azure-government)


## <a name="how-many-vms-can-i-discover-with-an-appliance"></a>Сколько вм- мы могут обнаружить с помощью прибора?

Вы можете обнаружить до 10 000 VMw, до 5000 V-V-м и до 250 физических серверов с помощью одного прибора. Если у вас больше машин, прочитайте о [масштабировании оценки Hyper-V,](scale-hyper-v-assessment.md) [масштабировании оценки VMware](scale-vmware-assessment.md)или [масштабировании оценки физического сервера.](scale-physical-assessment.md)

## <a name="i-cant-see-some-vm-types-in-azure-government"></a>Я не вижу некоторых типов VM в правительстве Azure

Типы VM, поддерживаемые для оценки и миграции, зависят от наличия в расположении правительства Azure. Вы можете [просматривать и сравнивать](https://azure.microsoft.com/global-infrastructure/services/?regions=usgov-non-regional,us-dod-central,us-dod-east,usgov-arizona,usgov-iowa,usgov-texas,usgov-virginia&products=virtual-machines) типы VM в правительстве Azure.


## <a name="the-size-of-my-vm-changed-can-i-run-an-assessment-again"></a>Размер моего VM изменился. Могу ли я провести оценку еще раз?

Прибор Azure Migrate постоянно собирает информацию о предварительной среде.  Оценка — это моментальный снимок предприимных ВМ. Если вы измените настройки на VM, которые вы хотите оценить, используйте опцию перерасчета для обновления оценки с последними изменениями.

## <a name="how-do-i-discover-vms-in-a-multitenant-environment"></a>Как обнаружить визву в мультитенантной среде?

- **VMware**: Если среда доступна для разных клиентов и вы не хотите открывать vMs-миг арендатора в подписке другого арендатора, создайте учетные данные VMware vCenter Server, которые могут получить доступ только к vpn, которые вы хотите обнаружить. Затем используйте эти учетные данные при открытии в приборе Azure Migrate.
- **Hyper-V**: Discovery использует учетные данные Хоста Hyper-V. Если VMs имеют один и тот же хост Hyper-V, в настоящее время нет способа отделить открытие.  

## <a name="do-i-need-vcenter-server"></a>Нужен ли мне vCenter Server?

Да, Azure Migrate требует vCenter Server в среде VMware для выполнения обнаружения. Azure Migrate не поддерживает обнаружение узлов ESXi, которые не управляются vCenter Server.

## <a name="what-are-the-sizing-options"></a>Каковы параметры размеров?

При как-на-предпосылке размеров, Azure Migrate не учитывает данные производительности VM для оценки. Azure Migrate оценивает размеры VM на основе конфигурации на месте. При размерах на основе производительности размер оведляя основе данных об использовании.

Например, если в помещении VM четыре ядра и 8 ГБ памяти при 50% использовании процессора и 50% использовании памяти:
- По мере локализации размеров будет рекомендовать Azure VM SKU, который имеет четыре ядра и 8 ГБ памяти.
- Производительность на основе размера будет рекомендовать VM SKU, который имеет два ядра и 4 ГБ памяти, потому что процент использования считается.

Аналогичным образом, размер диска зависит от критериев размера и типа хранилища:
- Если критерии размеров основаны на производительности, а тип хранилища автоматический, Azure Migrate учитывает значения IOPS и пропускной способности диска при идентификации типа целевого диска (Standard или Premium).
- Если критерии размеров основаны на производительности, а тип хранилища премиум, Azure Migrate рекомендует Premium disk SKU в зависимости от размера припредтого диска. Та же логика применяется к размеру диска, когда размер является как-на-предпосылки и тип хранилища является стандартным или премиум.

## <a name="does-performance-history-and-utilization-affect-sizing"></a>Влияет ли история производительности и использование размеров?

Да, история и использование производительности влияют на размеры в Azure Migrate.

### <a name="performance-history"></a>Журнал производительности

Для размеров на основе производительности Azure Migrate собирает историю производительности наемных машинах, а затем использует его для рекомендации размера VM и типа диска в Azure:

1. Прибор непрерывно профилирует среду для сбора данных об использовании в режиме реального времени каждые 20 секунд.
1. Прибор сворачивает собранные 20-секундные образцы и использует их для создания единой точки данных каждые 15 минут.
1. Для создания точки данных прибор выбирает пиковое значение из всех 20-секундных образцов.
1. Прибор отправляет точку данных в Azure.

### <a name="utilization"></a>Использования

При создании оценки в Azure, в зависимости от продолжительности производительности и набора стоимости процентиля производительности, Azure Migrate вычисляет эффективное значение использования, а затем использует его для размеров.

Например, если вы установите продолжительность производительности до одного дня, а значение процентиля до 95-го процентиля, Azure Migrate сортирует 15-минутные точки выборки, отправленные коллектором за прошедший день в порядке возрастания. Он выбирает 95-й процентильный значение в качестве эффективного использования.

Использование значения 95-го процентиля гарантирует игнорирование выбросов. Выбросы могут быть включены, если в Azure Migrate используется 99-й процентиль. Чтобы выбрать пиковое использование за период, не пропуская никаких выбросов, установите Azure Migrate, чтобы использовать 99-й процентиль.

## <a name="how-are-import-based-assessments-different-from-assessments-with-discovery-source-as-appliance"></a>Чем оценки, основанные на импорте, отличаются от оценок с источником обнаружения как прибором?

Оценки на основе импорта — это оценки, созданные с помощью машин, импортируемых в Azure Migrate с помощью файла CSV. Импортировать обязательны только четыре поля: имя сервера, ядра, память и операционная система. Вот некоторые вещи, чтобы отметить: 
 - Критерии готовности менее строги в оценках на основе импорта по параметру типа загрузки. Если тип загрузки не предусмотрен, предполагается, что машина имеет тип загрузки BIOS и машина не помечена как **условно готовая.** При оценках с источником обнаружения в качестве прибора готовность помечается как **условно готовая,** если тип загрузки отсутствует. Эта разница в расчете готовности объясняется тем, что пользователи могут не располагают всей информацией о машинах на ранних стадиях планирования миграции при проведении оценки на основе импорта. 
 - Оценки импорта на основе производительности используют значение использования, предоставляемое пользователем для расчетов правильного размера. Поскольку значение использования обеспечивается пользователем, параметры **истории производительности** и **процентиля** отключаются в свойствах оценки. При оценках с источником обнаружения в качестве прибора выбранное значение процентиля выбирается из данных о производительности, собранных прибором.

## <a name="what-is-dependency-visualization"></a>Что такое визуализация зависимостей?

Визуализация зависимости может помочь вам оценить группы визм для миграции с большей уверенностью. Визуализация зависимостей перепроверяет зависимости машины перед запуском оценки. Это помогает гарантировать, что ничего не осталось позади, и это помогает избежать непредвиденных отключений при переходе в Azure. Служба "Миграция Azure" использует решение "Сопоставление служб" в Azure Monitor для визуализации зависимостей. [Подробнее](concepts-dependency-visualization.md).

> [!NOTE]
> Анализ зависимости на основе агента недоступен в правительстве Azure. Вы можете использовать анализ зависимости без агента

## <a name="whats-the-difference-between-agent-based-and-agentless"></a>В чем разница между агентом на основе и агента?

Различия между безагентной визуализацией и визуализацией на основе агента суммируются в таблице.

**Требование** | **Безагентное** | **Агентская**
--- | --- | ---
Поддержка | Эта опция в настоящее время находится в предварительном просмотре и доступна только для VMware VMs. [Обзор](migrate-support-matrix-vmware.md#agentless-dependency-analysis-requirements) поддерживается операционных систем. | В целом доступность (GA).
Агент | Нет необходимости устанавливать агенты на машины, которые вы хотите перепроверить. | Агенты, которые будут установлены на каждой предварительной машине, которую вы хотите проанализировать: [Агент мониторинга Майкрософт (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows)и [агент зависимости.](https://docs.microsoft.com/azure/azure-monitor/platform/agents-overview#dependency-agent) 
Предварительные требования | [Просмотрите](concepts-dependency-visualization.md#agentless-analysis) предпосылки и требования к развертыванию. | [Просмотрите](concepts-dependency-visualization.md#agent-based-analysis) предпосылки и требования к развертыванию.
Log Analytics | Необязательно. | Azure Migrate использует решение [карты обслуживания](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-service-map) в [журналах Azure Monitor](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) для визуализации зависимостей. [Подробнее](concepts-dependency-visualization.md#agent-based-analysis).
Принцип работы | Захватывает данные о подключении TCP на машинах, включенных для визуализации зависимостей. После обнаружения он собирает данные с интервалом в пять минут. | Агенты карты обслуживания, установленные на машине, собирают данные о процессах TCP и входящих/исходящих соединениях для каждого процесса.
Данные | Имя сервера исходного кода, процесс, имя приложения.<br/><br/> Имя сервера назначения, процесс, имя приложения и порт. | Имя сервера исходного кода, процесс, имя приложения.<br/><br/> Имя сервера назначения, процесс, имя приложения и порт.<br/><br/> Количество информации о соединениях, задержках и передаче данных собирается и доступно для запросов Log Analytics. 
Визуализация: | Карта зависимости одного сервера может просматриваться в течение одного часа до 30 дней. | Карта зависимости одного сервера.<br/><br/> Карту можно просматривать только за час.<br/><br/> Карта зависимости группы серверов.<br/><br/> Добавление и удаление серверов в группе из представления карты.
Экспорт данных | В настоящее время не может быть загружен в табулярном формате. | Данные можно запрашивать с помощью log Analytics.

## <a name="do-i-pay-for-dependency-visualization"></a>Оплачиваю ли я визуализацию зависимости?

Нет. Узнайте больше о [ценах Azure Migrate](https://azure.microsoft.com/pricing/details/azure-migrate/).

## <a name="what-do-i-install-for-agent-based-dependency-visualization"></a>Что я устанавливаю для визуализации зависимости на основе агента?

Чтобы использовать визуализацию зависимости на основе агента, загрузите и установите агенты на каждую компьютерную машину, которую вы хотите оценить:

- [Агент мониторинга Майкрософт (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows)
- [Агент зависимостей](../azure-monitor/platform/agents-overview.md#dependency-agent)
- Если у вас есть машины, которые не имеют подключения к Интернету, скачать и установить шлюз Log Analytics на них.

Эти агенты нужны только в том случае, если вы используете визуализацию зависимости на основе агента.

## <a name="can-i-use-an-existing-workspace"></a>Можно ли использовать имеющуюся рабочую область?

Да, для визуализации зависимостей на основе агента можно прикрепить существующее рабочее пространство к проекту миграции и использовать его для визуализации зависимостей. 

## <a name="can-i-export-the-dependency-visualization-report"></a>Можно ли экспортировать отчет о визуализации зависимостей?

Нет, отчет о визуализации зависимости в визуализации на основе агента не может быть экспортирован. Тем не менее, Azure Migrate использует карту обслуживания, и вы можете использовать [API карты обслуживания REST](https://docs.microsoft.com/rest/api/servicemap/machines/listconnections) для получения зависимостей в формате JSON.

## <a name="can-i-automate-agent-installation"></a>Могу ли я автоматизировать установку агента?

Для визуализации зависимости на основе агента:

- Используйте [скрипт для установки агента зависимости.](../azure-monitor/insights/vminsights-enable-hybrid-cloud.md#installation-script-examples)
- Для ММА [используйте командную строку или автоматизацию](../azure-monitor/platform/log-analytics-agent.md#installation-and-configuration)или используйте [скрипт.](https://gallery.technet.microsoft.com/scriptcenter/Install-OMS-Agent-with-2c9c99ab)
- Помимо скриптов, для развертывания агентов можно использовать инструменты развертывания, такие как Microsoft Endpoint Configuration Manager и [Intigua.](https://www.intigua.com/getting-started-intigua-for-azure-migration)

## <a name="what-operating-systems-does-mma-support"></a>Какие операционные системы поддерживает MMA?

- Просмотр списка [операционных систем Windows, поддерживающих MMA.](https://docs.microsoft.com/azure/log-analytics/log-analytics-concept-hybrid#supported-windows-operating-systems)
- Посмотреть список [операционных систем Linux, которые поддерживает MMA.](https://docs.microsoft.com/azure/log-analytics/log-analytics-concept-hybrid#supported-linux-operating-systems)

## <a name="can-i-visualize-dependencies-for-more-than-one-hour"></a>Могу ли я визуализировать зависимости более одного часа?

Для визуализации на основе агента можно визуализировать зависимости на срок до одного часа. Вы можете вернуться до одного месяца к определенной дате в истории, но максимальная продолжительность визуализации составляет один час. Например, можно использовать продолжительность времени на карте зависимостей для просмотра зависимостей за вчерашний день, но просматривать зависимости можно только для окна за один час. Однако журналы Azure Monitor можно использовать для [запроса данных зависимостей](https://docs.microsoft.com/azure/migrate/how-to-create-group-machine-dependencies) на более длительный срок.

Для визуализации без агента можно просмотреть карту зависимости одного сервера продолжительностью от одного часа до 30 дней.

## <a name="can-i-visualize-dependencies-for-groups-of-more-than-10-vms"></a>Могу ли я визуализировать зависимости для групп из более чем 10 вс-кодов?

Можно [визуализировать зависимости](https://docs.microsoft.com/azure/migrate/how-to-create-group-dependencies) для групп, которые имеют до 10 ВМ. Если у вас есть группа с более чем 10 ВМ, мы рекомендуем разделить группу на более мелкие группы, а затем визуализировать зависимости.

## <a name="next-steps"></a>Следующие шаги

Читайте [обзор Azure Migrate](migrate-services-overview.md).
