---
title: Вычисление оценок в службе "Миграция Azure" | Документация Майкрософт
description: Эта статья содержит обзор вычисления оценок в службе "Миграция Azure".
author: rayne-wiselman
ms.service: azure-migrate
ms.topic: conceptual
ms.date: 02/19/2019
ms.author: raynew
ms.openlocfilehash: 012a352b00de2e2d1bf64fd18125ddd10faba5cd
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60679125"
---
# <a name="assessment-calculations"></a>Вычисление оценок

Служба [Миграция Azure](migrate-overview.md) выполняет оценку локальных рабочих нагрузок для переноса в Azure. В этой статье содержатся сведения о том, как эти оценки вычисляются.


## <a name="overview"></a>Обзор

Оценка службы "Миграция Azure" состоит из трех этапов. Оценка начинается с анализа пригодности, затем следует оценка размера и, наконец, оценка ежемесячной стоимости. Компьютер переходит на следующий этап, только если проходит предыдущий. Например, если компьютер не прошел проверку пригодности для Azure, то он помечается как непригодный для Azure, и размер и стоимость для него вычисляться не будут.

## <a name="azure-suitability-analysis"></a>Анализ пригодности для Azure

Не все виртуальные машины подходят для работы в облаке, так как облако имеет свои собственные ограничения и требования. Служба "Миграция Azure" оценивает целесообразность миграции каждого локального компьютера в Azure и классифицирует в соответствии с одной из следующих категорий:
- **Готово к работе в Azure**. Компьютер может быть перенесен в Azure без каких-либо изменений. Он загрузится в Azure и будет иметь полную поддержку Azure.
- **Условно готово к работе в Azure**. Компьютер может загружаться в Azure, но не будет иметь полную поддержку Azure. Например компьютеры с более старой версией ОС Windows Server не поддерживаются в Azure. Прежде чем переносить эти машины в Azure, необходимо внимательно следовать рекомендациям по исправлению, предложенным в процессе оценки, и устранить проблемы с готовностью.
- **Не готово к работе в Azure**. Компьютер не загрузится в Azure. Например, если на локальном компьютере установлен диск размером более 4 ТБ, он не может быть размещен в Azure. Необходимо следовать рекомендациям по исправлению, предложенным в процессе оценки, и устранить проблемы с готовностью переноса в Azure. Не выполнена правильная оценка размера и стоимости для компьютера, отмеченных как не готовых к работе в Azure.
- **Готовность неизвестна**. Служба не смогла определить готовность компьютера из-за недостатка данных, доступных в vCenter Server.

Служба "Миграция Azure" проверяет свойства компьютера и гостевую операционную систему, чтобы определить готовность локального компьютера к работе в Azure.

### <a name="machine-properties"></a>Свойства виртуальной машины
Служба проверяет следующие свойства локальной виртуальной машины, чтобы определить, может ли она работать в Azure.

**Свойство** | **Сведения** | **Состояние готовности к работе в Azure**
--- | --- | ---
**Тип загрузки** | Azure поддерживает виртуальные машины с типом загрузки BIOS, а не UEFI. | Если тип загрузки — UEFI, виртуальная машина считается условно готовой.
**Ядра** | Число ядер в компьютерах должно быть равно (или меньше) максимальному количеству ядер (128), поддерживаемых для виртуальной машины Azure.<br/><br/> Если доступен журнал производительности, служба "Миграция Azure" рассматривает используемые ядра для сравнения. Если в параметрах оценки указан фактор комфорта, то количество используемых ядер умножается на него.<br/><br/> Если журнал производительности отсутствует, служба "Миграция Azure" использует выделенные ядра, не применяя фактор комфорта. | Если меньше заданного ограничения или равно ему, виртуальная машина готова.
**Память** | Объем памяти компьютера должен быть равен (или меньше) максимальному объему памяти (3892 ГБ на компьютере Azure серии Standard_M128m&nbsp;<sup>2</sup>), допустимому для виртуальной машины Azure. [Узнайте больше](https://docs.microsoft.com/azure/virtual-machines/windows/sizes).<br/><br/> Если доступен журнал производительности, служба "Миграция Azure" рассматривает используемую память для сравнения. Если задан фактор комфорта, объем используемой памяти умножается на него.<br/><br/> Если журнал отсутствует, используется выделенная память без применения фактора комфорта.<br/><br/> | Если не превышает ограничение, виртуальная машина готова.
**Диск хранилища** | Выделенный размер диска не должен превышать 4 ТБ (4096 ГБ).<br/><br/> Количество дисков, подключенных к компьютеру, не должно превышать 65, включая диск операционной системы. | Если не превышает ограничение, виртуальная машина готова.
**Сеть** | К компьютеру должно быть подключено не более 32 сетевых адаптеров. | Если не превышает ограничение, виртуальная машина готова.

### <a name="guest-operating-system"></a>Операционная система на виртуальной машине
Помимо свойств виртуальных машин служба "Миграция Azure" также просматривает гостевую ОС локальной виртуальной машины, чтобы определить, может ли виртуальная машина работать в Azure.

> [!NOTE]
> Служба "Миграция Azure" рассматривает ОС, указанную в vCenter Server, и выполняет следующий анализ. Так как обнаружение, выполняемое службой "Миграция Azure", основано на использовании устройства, не предусмотрен способ проверить, является ли ОС виртуальной машины той же, что и в vCenter Server.

Службой "Миграция Azure" используется следующая логика для идентификации готовности виртуальной машины для работы в Azure на основе операционной системы.

**Операционная система** | **Сведения** | **Состояние готовности к работе в Azure**
--- | --- | ---
Windows Server 2016 и все пакеты обновления | Azure обеспечивает полную поддержку. | Готово к работе в Azure
Windows Server 2012 R2 и все пакеты обновления | Azure обеспечивает полную поддержку. | Готово к работе в Azure
Windows Server 2012 и все пакеты обновления | Azure обеспечивает полную поддержку. | Готово к работе в Azure
Windows Server 2008 R2 со всеми пакетами обновления | Azure обеспечивает полную поддержку.| Готово к работе в Azure
Windows Server 2008 (32-разрядная и 64-разрядная) | Azure обеспечивает полную поддержку. | Готово к работе в Azure
Windows Server 2003, 2003 R2 | Эти операционные системы больше не поддерживаются. Для их поддержки в Azure требуется [соглашение Custom Support Agreement (CSA)](https://aka.ms/WSosstatement). | Условно готово к работе в Azure. Следует обновить ОС перед миграцией в Azure.
Windows 2000, 98, 95, NT, 3.1, MS-DOS | Эти операционные системы больше не поддерживаются. Компьютер может быть загружен в Azure, но без поддержки ОС. | Условно готово к работе в Azure. Следует обновить ОС перед миграцией в Azure.
Windows Client 7, 8 и 10 | Azure обеспечивает поддержку [только для подписки Visual Studio](https://docs.microsoft.com/azure/virtual-machines/windows/client-images). | Условно готово к работе в Azure.
Windows 10 Pro Desktop | Azure обеспечивает поддержку с [правами на мультитенантное размещение.](https://docs.microsoft.com/azure/virtual-machines/windows/windows-desktop-multitenant-hosting-deployment) | Условно готово к работе в Azure.
Windows Vista, XP Professional | Эти операционные системы больше не поддерживаются. Компьютер может быть загружен в Azure, но без поддержки ОС. | Условно готово к работе в Azure. Следует обновить ОС перед миграцией в Azure.
Linux | Azure рекомендует эти [операционные систем Linux](../virtual-machines/linux/endorsed-distros.md). Другие операционные системы Linux могут быть загружены в Azure, но перед переносом рекомендуется обновить ОС до рекомендуемой версии. | Устройство готово к работе в Azure, если использует рекомендуемую версию.<br/><br/>Условно готово, если версия не рекомендуется.
Другие операционные системы<br/><br/> Например, Oracle Solaris, Apple Mac OS, FreeBSD и т. д. | Azure не рекомендует эти операционные системы. Компьютер может быть загружен в Azure, но Azure не будет поддерживать ОС. | Условно готово к работе в Azure. Следует установить поддерживаемую ОС перед миграцией в Azure.  
ОС, указанные как **Другое** в vCenter Server | Служба "Миграция Azure" не сможет идентифицировать ОС. | Готовность неизвестна. Убедитесь, что ОС виртуальной машины поддерживается в Azure.
32-разрядные операционные системы | Компьютер может быть загружен в Azure, но Azure не предоставит полную поддержку. | Условно готово к работе в Azure. Измените операционную систему компьютера с 32-разрядной на 64-разрядную перед миграцией в Azure

## <a name="sizing"></a>Изменения размера

После того, как машина отмечена как готовая к работе в Azure, служба "Миграция Azure"задает размеры виртуальной машины и ее дисков для Azure. Если определение размера, указанное в свойствах оценки, состоит в том, чтобы выполнить измерение на основе производительности, служба "Миграция Azure" анализирует историю производительности компьютера для определения размера виртуальной машины и типа диска в Azure. Этот метод полезен в сценариях, в которых у вас есть мало используемая избыточная локальная виртуальная машина, и вы хотите изменить размеры виртуальных машин в Azure для экономии затрат.

Если анализ истории производительности для изменения размера виртуальной машины не требуется и вы хотите перенести виртуальную машину в Azure "как есть", можно указать критерий выбора размера *как для локальной виртуальной машины*. Затем служба "Миграция Azure" изменит размеры виртуальных машин на основе конфигурации в локальной среде без учета данных об использовании. В этом случае изменение размера диска будет производиться на основе типа хранилища, указанного в свойствах оценки (диск класса Standard или Premium).

### <a name="performance-based-sizing"></a>Выбор размера на основе производительности

Выбор размера на основе производительности в службе "Миграция Azure" начинается с дисков, подключенных к виртуальной машине, сетевых адаптеров. Затем сопоставляется виртуальная машина Azure в соответствии с потребностями в вычислительных ресурсах локальной виртуальной машины.

- **Хранилище** Служба "Миграция Azure" пытается сопоставить каждый диск, подключенный к компьютеру, с диском в Azure.

    > [!NOTE]
    > Служба "Миграция Azure" поддерживает только оценку управляемых дисков.

    - Чтобы получить данные об эффективности дисковых операций ввода-вывода и использования пропускной способности (МБ/с), служба "Миграция Azure" умножает операции ввода-вывода диска и пропускную способность на фактор комфорта. На основе этих данных служба определяет, должен ли диск сопоставляться с диском уровня "Стандартный" или "Премиум" в Azure.
    - Если службе не удается найти диск, обеспечивающий необходимое число операций ввода-вывода и пропускную способность, она помечает компьютер как неподходящий для Azure. [Узнайте больше](../azure-subscription-service-limits.md#storage-limits) об ограничениях Azure для диска и виртуальной машины.
    - При обнаружении набора подходящих дисков служба "Миграция Azure" выбирает те, которые поддерживают метод обеспечения избыточности хранилища и расположение, указанное в параметрах оценки.
    - Если доступно несколько соответствующих дисков, она выбирает тот, который обеспечивает наименьшие затраты.
    - Если данные о производительности жестких дисков недоступны, все диски сопоставляются со стандартными дисками в Azure.

- **Сеть**. Служба "Миграция Azure" пытается подобрать виртуальную машину Azure, которая сможет поддерживать требуемое число сетевых адаптеров, подключенных к локальной машине, и требуемую производительность.
    - Чтобы получить эффективную производительность локальной сети, служба объединяет данные, передаваемые в секунду (Мб/с) с компьютера (сеть), через все сетевые адаптеры и применяет фактор комфорта. Это число используется для поиска виртуальной машины Azure, обеспечивающей нужную производительность сети.
    - Наряду с производительностью сети также учитывается, поддерживает ли виртуальная машина Azure необходимое количество сетевых адаптеров.
    - Если данные о производительности сети недоступны, то для выбора размера виртуальной машины учитывается только число сетевых адаптеров.

- **Среда выполнения приложений** После анализа требований к хранилищу и сети служба "Миграция Azure" оценивает требования к ЦП и памяти для поиска подходящего размера виртуальной машины в Azure.
    - Служба рассматривает используемые ядра и память и применяет фактор комфорта для получения эффективных ядер и памяти. Исходя из этого числа служба пытается найти подходящий размер виртуальной машины в Azure.
    - Если найти подходящий размер не удалось, компьютер помечается как неподходящий для Azure.
    - Если найден подходящий размер, служба "Миграция Azure" применяет результаты вычисления параметров хранилища и сети. Затем она применяет параметры расположения и ценовой категории, чтобы получить окончательный рекомендуемый размер виртуальной машины.
    - Если доступно несколько соответствующих размеров виртуальных машин, служба выбирает рекомендуемый, который обеспечивает наименьшие затраты.

### <a name="as-on-premises-sizing"></a>Определение размера как для локальной виртуальной машины
При определении размера *как для локальной виртуальной машины* служба "Миграция Azure" не учитывает историю производительности виртуальных машин и дисков, а также выделяет номер SKU виртуальной машины в Azure на основе их размера в локальной среде. Аналогичным образом для определения размера диска служба рассматривает тип хранилища, указанный в свойствах оценки (класса Standard или Premium), и рекомендует тип диска соответственно. Тип хранилища по умолчанию — диски класса Premium.

### <a name="confidence-rating"></a>Оценка достоверности
Каждая оценка на основе производительности в службе "Миграция Azure" связана с оценкой достоверности, которая колеблется в диапазоне от 1 до 5 звездочек (1 звезда — низкая достоверность, а 5 — высокая). Оценка достоверности назначается на основе доступности точек данных, необходимых для вычисления оценки. Оценка достоверности помогает определить надежность рекомендаций по выбору размера, предоставленных службой "Миграция Azure". Оценка достоверности неприменима к локальным оценкам.

Для определения размера на основе производительности службе "Миграция Azure" требуются данные об использовании ЦП и памяти виртуальной машины. Кроме того, для каждого диска, присоединенного к виртуальной машине, необходимы сведения о количестве операций ввода-вывода в секунду и пропускной способности диска. Аналогичным образом для каждого сетевого адаптера, подключенного к виртуальной машине, службе "Миграция Azure" необходимы сведения о сетевом трафике. Если какой-либо из приведенных выше показателей использования недоступен в vCenter Server, рекомендации по выбору размера, предоставленные службой "Миграция Azure", могут быть ненадежными. В зависимости от процента доступных точек данных оценка достоверности может быть такой:

   **Уровень доступности точек данных** | **Оценка достоверности**
   --- | ---
   0–20 % | 1 звезда
   21–40 % | 2 звезды
   41–60 % | 3 звезды
   61–80 % | 4 звезды
   81–100 % | 5 звезд

   Ниже приведены причины, по которым могла быть получена низкая оценка достоверности.

- Среда не была профилирована на период времени, для которого создается оценка. Например, если создавать оценки с продолжительностью производительности набора в 1 день, нужно подождать как минимум день после запуска обнаружения сбора всех точек данных.

- В течение периода, для которого рассчитывается оценка, несколько виртуальных машин были отключены. Если какие-либо виртуальные машины были отключены в течение некоторого времени, мы не сможем собрать данные о производительности за этот период.

- За период, для которого рассчитывается оценка, было создано несколько виртуальных машин. Например, вы создаете оценку для журнала производительности за последний месяц, при этом несколько виртуальных машин были созданы всего неделю назад. В таких случаях журнал производительности новых виртуальных машин не будет доступен за весь период.

  > [!NOTE]
  > Если оценка достоверности составляет меньше пяти звезд, мы рекомендуем подождать по крайней мере один день, чтобы устройство могло профилировать среду, а затем *пересчитать* оценку. Если не сделать этого, определение размера на основе производительности может оказаться ненадежным. Рекомендуется переключиться на режим *определения размера как для локальной ВМ*, изменив свойства оценки.

## <a name="monthly-cost-estimation"></a>Примерная ежемесячная стоимость

После определения рекомендуемого размера служба "Миграция Azure" рассчитывает затраты на вычисления и хранилище после миграции.

- **Стоимость вычислений**. Служба "Миграция Azure" использует API выставления счетов, чтобы на основании рекомендуемого размера виртуальной машины Azure вычислить ежемесячные затраты на виртуальную машину. При этом учитывается операционная система, программа Software Assurance, зарезервированные экземпляры, время доступности виртуальных машин, расположение и параметры валюты. Служба суммирует затраты на все компьютеры, чтобы рассчитать общие ежемесячные затраты на вычисления.
- **Стоимость хранения**. Ежемесячные затраты на хранилище для компьютера вычисляются путем суммирования ежемесячных затрат на все диски, подключенные к компьютеру. Служба "Миграция Azure" вычисляет общие ежемесячные затраты на хранилище, суммируя затраты на хранилище для всех компьютеров. В настоящее время при вычислении не учитываются предложения, указанные в параметрах оценки.

Цены отображаются в валюте, заданной в настройках оценки.


## <a name="next-steps"></a>Дальнейшие действия

[Обнаружение и оценка локальных виртуальных машин VMware для миграции в Azure](tutorial-assessment-vmware.md)
