---
title: Поддержка оценки VMware в Azure Migrate
description: Узнайте о поддержке оценки VMware VM с помощью оценки Azure Migrate Server.
ms.topic: conceptual
ms.date: 04/15/2020
ms.openlocfilehash: 8a09562f14b95256ee9c2b5ba7d9c308cde66397
ms.sourcegitcommit: 31ef5e4d21aa889756fa72b857ca173db727f2c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81532210"
---
# <a name="support-matrix-for-vmware-assessment"></a>Матрица поддержки для оценки VMware 

В этой статье кратко излагаются предпосылки и требования к поддержке при оценке VMware VMs для миграции в Azure с использованием инструмента Azure Migrate:Server Assessment (мигрировать-службы-обзор.md-azure-migrate-server-assessment-tool) инструмент. Если требуется перенести VMs VMw в Azure, просмотрите [матрицу поддержки миграции.](migrate-support-matrix-vmware-migration.md)

Для оценки VMware VMs необходимо создать проект Azure Migrate, а затем добавить инструмент оценки серверов в проект. После добавления инструмента развертывается [прибор Azure Migrate.](migrate-appliance.md) Прибор постоянно обнаруживает на месте машины и отправляет метаданные и данные о производительности машины в Azure. После завершения обнаружения вы собираете обнаруженные машины в группы и проводите оценку для группы.

## <a name="limitations"></a>Ограничения

**Поддержка** | **Сведения**
--- | ---
**Ограничения проекта** | Можно создать несколько проектов в подписке Azure.<br/><br/> Вы можете обнаружить и оценить до 35 000 VMware VMs в одном [проекте.](migrate-support-matrix.md#azure-migrate-projects) Проект может также включать физические серверы и ви-в-м hyper-V, вплоть до пределов оценки для каждого из них.
**Обнаружение** | Прибор Azure Migrate может обнаружить до 10 000 VMware VMs на vCenter Server.
**Оценка** | В одну группу можно добавить до 35 000 машин.<br/><br/> Вы можете оценить до 35 000 вм в одной оценке.

[Узнайте больше](concepts-assessment-calculation.md) об оценках.


## <a name="application-discovery"></a>Обнаружение приложений

Помимо обнаружения машин, Server Assessment может обнаружить приложения, роль и функции, работающие на машинах. Обнаружение инвентаря приложения позволяет определить и спланировать путь миграции, адаптированный к вашим наемным нагрузкам. 

**Поддержка** | **Сведения**
--- | ---
**Поддерживаемые машины** | Открытие приложений в настоящее время поддерживается только для VMware VMs.
**Обнаружение** | Обнаружение приложений не является безвозядным. Он использует учетные данные гостевых машин и удаленно получает доступ к машинам с помощью wMI и SSH-звонков.
**Поддержка VM** | Обнаружение приложений поддерживается для всех версий Windows и Linux.
**учетные данные vCenter** | Обнаружению приложения нужна учетная запись vCenter Server с доступом только для чтения, а также привилегии, включенные для виртуальных машин > гостевых операций.
**Учетные данные VM** | Открытие приложения в настоящее время поддерживает использование одного учетных данных для всех серверов Windows и одного учетных данных для всех серверов Linux.<br/><br/> Вы создаете учетную запись гостевого пользователя для Windows VMs и обычную/обычную учетную запись пользователя (не-судо-доступ) для всех Linux VMs.
**Инструменты VMware** | Инструменты VMware должны быть установлены и запущены на VMs, которые вы хотите открыть для себя. <br/> Версия инструментов VMware должна быть позже 10.2.0.
**PowerShell** | VMs должны иметь версию PowerShell 2.0 или более позднюю установку.
**Доступ в порт** | На хостах ESXi под управлением VMs, которые вы хотите обнаружить, прибор Azure Migrate должен быть в состоянии подключиться к порту TCP 443.
**Ограничения** | Для обнаружения приложений вы можете обнаружить до 10000 вмс на каждом приборе Azure Migrate.



## <a name="vmware-requirements"></a>Требования к VMware

**VMware** | **Сведения**
--- | ---
**Виртуальные машины VMware** | Оценка поддерживается для всех операционных систем Windows и Linux.
**vCenter Server** | Машины, которые вы хотите обнаружить и оценить, должны управляться vCenter Server версией 5.5, 6.0, 6.5 или 6.7.
**Разрешения (оценка)** | vCenter Server только для чтения учетной записи.
**Разрешения (открытие приложения)** | учетная запись vCenter Server с доступом только для чтения и привилегиями, включенными для **виртуальных машин > гостевых операций.**
**Разрешения (визуализация зависимостей)** | Учетная запись Center Server с доступом только для чтения и привилегиями, включенными для **виртуальных машин** > **Guest Operations.**


## <a name="azure-migrate-appliance-requirements"></a>Требования к устройству Миграции Azure

Azure Migrate использует [прибор Azure Migrate](migrate-appliance.md) для обнаружения и оценки. Развертывание прибора в качестве VMWare VM можно с помощью шаблона OVA, импортируемого в vCenter Server или с помощью [скрипта PowerShell.](deploy-appliance-script.md)

- Узнайте о требованиях к [приборам](migrate-appliance.md#appliance---vmware) для VMware.
- Узнайте об URL-адресах, которые необходимо получить в [общедоступных](migrate-appliance.md#public-cloud-urls) и [правительственных](migrate-appliance.md#government-cloud-urls) облаках.
- В правительстве Azure необходимо развернуть прибор с помощью скрипта.


## <a name="port-access"></a>Доступ в порт

**Устройство** | **Соединение**
--- | ---
прибор. | Входные соединения на порте TCP 3389 позволяют удаленное подключение к устройству рабочего стола.<br/><br/> Входящие соединения в порту 44368 для удаленного доступа к приложению управления приборами с помощью URL:```https://<appliance-ip-or-name>:44368``` <br/><br/>Исходящие соединения в порту 443 (HTTPS) для отправки метаданных обнаружения и производительности в Azure Migrate.
Сервер vCenter | Входящие соединения на порте TCP 443 позволяют прибору собирать метаданные конфигурации и производительности для оценок. <br/><br/> Прибор подключается к vCenter в порту 443 по умолчанию. Если сервер vCenter слушается в другом порту, можно изменить порт при настройке обнаружения.
Хосты ESXi (анализ зависимости от обнаружения приложений/без агента) | Если вы хотите сделать [анализ зависимости приложения](how-to-discover-applications.md) или [без агента,](concepts-dependency-visualization.md#agentless-analysis)то прибор подключается к хостам ESXi на порте TCP 443, чтобы обнаружить приложения, и запустить визуализацию зависимости без агента на VMs.

## <a name="agentless-dependency-analysis-requirements"></a>Требования к анализу зависимостей без агента

[Анализ зависимостей](concepts-dependency-visualization.md) помогает определить зависимости между прививными машинами, которые вы хотите оценить и перенести в Azure. В таблице кратко излагаются требования к настройке анализа зависимостей без агента. 

**Требование** | **Сведения**
--- | --- 
**Перед развертыванием** | Проект Azure Migrate должен быть добавлен с помощью инструмента оценки серверов.<br/><br/>  Развертываете визуализацию зависимостей после настройки прибора Azure Migrate для обнаружения ваших наемных машин VMWare.<br/><br/> [Узнайте, как](create-manage-projects.md) создать проект в первый раз.<br/> [Узнайте, как](how-to-assess.md) добавить инструмент оценки в существующий проект.<br/> [Узнайте, как](how-to-set-up-appliance-vmware.md) настроить прибор Azure Migrate для оценки VMw.
**Поддержка VM** | В настоящее время поддерживается только для VMware VMs.
**Виртуальные машины Windows** | Windows Server 2016<br/> Windows Server 2012 R2<br/> Windows Server 2012<br/> Windows Server 2008 R2 (64-разрядный).
**Учетная запись Windows** |  Для анализа зависимостей для устройства Azure Migrate требуется локальная учетная запись администратора домена для доступа к Windows VMs.
**Виртуальные машины Linux** | Red Hat Предприятие Linux 7, 6, 5<br/> Ubuntu Linux 14.04, 16.04<br/> Debian 7, 8.<br/> Oracle Linux 6, 7<br/> CentOS 5, 6, 7.
**Учетная запись Linux** | Для анализа зависимостей на машинах Linux прибору Azure Migrate нужна учетная запись пользователя с привилегией Root.<br/><br/> Кроме того, учетная запись пользователя нуждается в этих разрешениях на файлах /bin/netstat и /bin/ls: CAP_DAC_READ_SEARCH и CAP_SYS_PTRACE.
**Требуемые агенты** | Нет агента требуется на машинах, которые вы хотите проанализировать.
**Инструменты VMware** | VMware Tools (позже, чем 10.2) должны быть установлены и работает на каждом VM вы хотите проанализировать.
**учетные данные vCenter Server** | Визуализация зависимостей требует учетной записи vCenter Server с доступом только для чтения, а также привилегиями, включенными для виртуальных машин > гостевых операций. 
**PowerShell** | VMs должны иметь PowerShell версия 2.0 или выше установлен.
**Доступ в порт** | На хостах ESXi под управлением VMs, которые вы хотите проанализировать, прибор Azure Migrate должен быть в состоянии подключиться к порту TCP 443.


## <a name="agent-based-dependency-analysis-requirements"></a>Требования к анализу зависимостей на основе агента

[Анализ зависимостей](concepts-dependency-visualization.md) помогает определить зависимости между прививными машинами, которые вы хотите оценить и перенести в Azure. В таблице кратко излагаются требования к настройке анализа зависимостей на основе агента. 

**Требование** | **Сведения** 
--- | --- 
**Перед развертыванием** | Необходимо создать проект Azure Migrate, а инструмент Azure Migrate: Server Assessment добавился в проект.<br/><br/>  Развертываете визуализацию зависимостей после настройки прибора Azure Migrate для обнаружения ваших наемных машин<br/><br/> [Узнайте, как](create-manage-projects.md) создать проект в первый раз.<br/> [Узнайте, как](how-to-assess.md) добавить инструмент оценки в существующий проект.<br/> Узнайте, как настроить прибор Azure Migrate для оценки [Hyper-V,](how-to-set-up-appliance-hyper-v.md) [VMware](how-to-set-up-appliance-vmware.md)или физических серверов.
**Azure для государственных организаций** | Визуализация зависимостей недоступна в правительстве Azure.
**Log Analytics** | Azure Migrate использует решение [карты обслуживания](../operations-management-suite/operations-management-suite-service-map.md) в [журналах Azure Monitor](../log-analytics/log-analytics-overview.md) для визуализации зависимостей.<br/><br/> Новое или существующее рабочее пространство анализа журналов связывают с проектом Azure Migrate. Рабочее пространство для проекта Azure Migrate не может быть изменено после его добавления. <br/><br/> Рабочее пространство должно находиться в той же подписке, что и проект Azure Migrate.<br/><br/> Рабочее пространство должно находиться в регионах Восточной Азии, юго-восточной Азии или Западной Европы. Рабочие области в других регионах не могут быть связаны с проектом.<br/><br/> Рабочее пространство должно находиться в регионе, в котором [поддерживается карта обслуживания.](../azure-monitor/insights/vminsights-enable-overview.md#prerequisites)<br/><br/> В журнале «Аналитика» рабочее пространство, связанное с Azure Migrate, помечено ключом проекта «Миграция» и названием проекта.
**Требуемые агенты** | На каждой машине, которую вы хотите проанализировать, установите следующие агенты:<br/><br/> [Агент мониторинга Майкрософт (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows).<br/> Агент [зависимости](../azure-monitor/platform/agents-overview.md#dependency-agent).<br/><br/> Если на месте машины не подключены к Интернету, необходимо скачать и установить шлюз Log Analytics на них.<br/><br/> Подробнее об установке [агента зависимости](how-to-create-group-machine-dependencies.md#install-the-dependency-agent) и [MMA.](how-to-create-group-machine-dependencies.md#install-the-mma)
**Рабочая область Log Analytics** | Рабочее пространство должно находиться в той же подписке, что и проект Azure Migrate.<br/><br/> Azure Migrate поддерживает рабочие пространства, проживающие в регионах Восточной Азии, юго-восточной Азии и Западной Европы.<br/><br/>  Рабочее пространство должно находиться в регионе, в котором [поддерживается карта обслуживания.](https://docs.microsoft.com/azure/azure-monitor/insights/vminsights-enable-overview#prerequisites)<br/><br/> Рабочее пространство для проекта Azure Migrate не может быть изменено после его добавления.
**Расходы** | Решение «Карта обслуживания» не несет никаких расходов в течение первых 180 дней (со дня, когда вы связываете рабочее пространство log Analytics с проектом Azure Migrate)/<br/><br/> По истечении 180 дней применяются стандартные тарифы Log Analytics.<br/><br/> Использование любого решения, кроме карты обслуживания, в связанном рабочей области Log Analytics будет нести [стандартные расходы](https://azure.microsoft.com/pricing/details/log-analytics/) для Log Analytics.<br/><br/> При удалении проекта "Миграция Azure" рабочая область не будет удалена. После удаливания проекта использование карты обслуживания не является бесплатным, и каждый узла будет взиматься в зависимости от платного уровня рабочего пространства Log Analytics/<br/><br/>Если у вас есть проекты, созданные до общей доступности Azure Migrate (GA- 28 февраля 2018 года), возможно, вы понесли дополнительные сборы по карте обслуживания. Для обеспечения оплаты только через 180 дней мы рекомендуем создать новый проект, так как существующие рабочие области до GA по-прежнему платные.
**Управление** | При регистрации агентов в рабочее пространство используется идентификатор и ключ, предоставленный проектом Azure Migrate.<br/><br/> Рабочую область Log Analytics можно использовать за пределами службы "Миграция Azure".<br/><br/> При удалении связанного проекта Azure Migrate рабочее пространство не удаляется автоматически. [Удалите его вручную](../azure-monitor/platform/manage-access.md).<br/><br/> Не удаляйте рабочее пространство, созданное Azure Migrate, если только вы не удалите проект Azure Migrate. В противном случае функция визуализации зависимостей не будет работать должным образом.
**Подключение к Интернету** | Если машины не подключены к Интернету, необходимо установить на них шлюз Log Analytics.
**Azure для государственных организаций** | Анализ зависимости на основе агента не поддерживается.


## <a name="next-steps"></a>Следующие шаги

- [Обзор](best-practices-assessment.md) передового опыта для создания оценок.
- [Подготовка к оценке VMware.](tutorial-prepare-vmware.md)
