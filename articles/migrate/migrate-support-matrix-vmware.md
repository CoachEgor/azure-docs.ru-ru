---
title: Поддержка оценки VMware в службе "миграция Azure"
description: Узнайте о поддержке Azure для оценки VMware.
ms.topic: conceptual
ms.date: 01/08/2020
ms.openlocfilehash: 8ed20ecd37eacdcb771db7c166ff8fc22b96cb89
ms.sourcegitcommit: 5d6ce6dceaf883dbafeb44517ff3df5cd153f929
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/29/2020
ms.locfileid: "76846176"
---
# <a name="support-matrix-for-vmware-assessment"></a>Матрица поддержки для оценки VMware 

В этой статье приведены общие сведения о параметрах и ограничениях для оценки виртуальных машин VMware с помощью службы ["миграция Azure": Оценка серверов](migrate-services-overview.md#azure-migrate-server-migration-tool). Если вы ищете информацию о переносе виртуальных машин VMware в Azure, ознакомьтесь с [матрицей поддержки миграции](migrate-support-matrix-vmware-migration.md).

## <a name="overview"></a>Обзор

Чтобы оценить локальные компьютеры для миграции в Azure с помощью этой статьи, добавьте средство "миграция Azure для серверов" в проект службы "миграция Azure". Вы развертываете [устройство "миграция Azure](migrate-appliance.md)". Устройство постоянно обнаруживает локальные компьютеры и отправляет данные о конфигурации и производительности в Azure. После обнаружения компьютеров вы собираете обнаруженные компьютеры в группы и выполняете оценку группы.


## <a name="limitations"></a>Ограничения

**Поддержка** | **Сведения**
--- | ---
**Ограничения оценки**| Обнаружение и оценка до 35 000 виртуальных машин VMware в одном [проекте](migrate-support-matrix.md#azure-migrate-projects).
**Ограничения проекта** | В подписке Azure можно создать несколько проектов. Проект может включать виртуальные машины VMware, виртуальные машины Hyper-V и физические серверы, вплоть до ограничений оценки.
**Маршрутизатор** | Устройство для миграции Azure может обнаруживать до 10 000 виртуальных машин VMware на vCenter Server.
**Оценка** | В одну группу можно добавить до 35 000 компьютеров.<br/><br/> Вы можете оценить до 35 000 виртуальных машин за одну оценку.

Дополнительные [сведения](concepts-assessment-calculation.md) об оценках.


## <a name="application-discovery"></a>Обнаружение приложений

Помимо обнаружения компьютеров, служба "миграция Azure" позволяет выполнять поиск приложений, ролей и функций, работающих на компьютерах, с целью оценки серверов. Обнаружение инвентаризации приложений позволяет выявление и планирование пути миграции, предназначенного для локальных рабочих нагрузок. 

**Поддержка** | **Сведения**
--- | ---
**Маршрутизатор** | Обнаружение без агента, использование гостевых учетных данных компьютера и удаленный доступ к компьютерам с помощью WMI и вызовов SSH.
**Поддерживаемые компьютеры** | Локальные виртуальные машины VMware.
**Операционная система компьютера** | Все версии Windows и Linux.
**учетные данные vCenter** | Учетная запись vCenter Server с доступом только для чтения, а также привилегии, разрешенные для виртуальных машин > гостевых операций.
**Учетные данные виртуальной машины** | В настоящее время поддерживает использование одного учетного данных для всех серверов Windows, а также одну учетную запись для всех серверов Linux.<br/><br/> Создайте учетную запись гостевого пользователя для виртуальных машин Windows, а также обычную или нормальную учетную запись пользователя (без доступа sudo) для всех виртуальных машин Linux.
**Средства VMware** | Средства VMware должны быть установлены и запускаться на виртуальных машинах, которые вы хотите обнаружить.
**Доступ к портам** | На узлах ESXi, на которых нужно обнаружить виртуальные машины, устройство миграции Azure должно иметь возможность подключения к TCP-порту 443.
**Ограничения** | Для обнаружения приложений можно обнаружить до 10000 для каждого устройства. 

## <a name="vmware-requirements"></a>Требования к VMware

**VMware** | **Сведения**
--- | ---
**vCenter Server** | Компьютеры, которые требуется обнаружить и оценивать, должны управляться с помощью vCenter Server версии 5,5, 6,0, 6,5 или 6,7.
**Разрешения (оценка)** | vCenter Server учетную запись только для чтения.
**Разрешения (Обнаружение приложений)** | Учетная запись vCenter Server с доступом только для чтения, а привилегии для **виртуальных машин > гостевых операций**.
**Разрешения (Визуализация зависимостей)** | Учетная запись Center Server с доступом только для чтения, а привилегии для **виртуальных машин** > **гостевых операциях**.


## <a name="azure-migrate-appliance-requirements"></a>Требования к устройству Миграции Azure

Служба "миграция Azure" использует [устройство "миграция Azure](migrate-appliance.md) " для обнаружения и оценки. Устройство для VMware развертывается с помощью шаблона OVA, импортированного в vCenter Server. 

- Сведения о [требованиях к устройству](migrate-appliance.md#appliance---vmware) для VMware.
- Сведения об [URL-адресах](migrate-appliance.md#url-access) , к которым должно обращаться устройство.

## <a name="port-access"></a>Доступ к портам

**Устройство** | **Соединение**
--- | ---
Appliance | Входящие подключения через TCP-порт 3389 для разрешения подключения удаленного рабочего стола к устройству.<br/><br/> Входящие подключения через порт 44368 для удаленного доступа к приложению управления устройством с помощью URL-адреса: ```https://<appliance-ip-or-name>:44368``` <br/><br/>Исходящие подключения через порт 443 (HTTPS), 5671 и 5672 (AMQP) для отправки метаданных обнаружения и производительности в службу "миграция Azure".
Сервер vCenter | Входящие подключения через TCP-порт 443, чтобы разрешить устройству получать метаданные конфигурации и производительности для оценки. <br/><br/> По умолчанию устройство подключается к vCenter через порт 443. Если сервер vCenter Server прослушивает другой порт, можно изменить порт при настройке обнаружения.
Узлы ESXi | **Требуется только для [обнаружения приложений](https://docs.microsoft.com/azure/migrate/migrate-support-matrix-vmware#application-discovery) и [визуализации зависимостей без агента](https://docs.microsoft.com/azure/migrate/migrate-support-matrix-vmware#agentless-dependency-visualization)** <br/><br/> Устройство подключается к узлам ESXi через TCP-порт 443 для обнаружения приложений и запуска визуализации зависимостей без агента на виртуальных машинах, работающих на узлах.

## <a name="agent-based-dependency-visualization"></a>Визуализация зависимостей на основе агентов

[Визуализация зависимостей](concepts-dependency-visualization.md) позволяет визуализировать зависимости между компьютерами, которые необходимо оценить и перенести. Требования и ограничения для визуализации на основе агентов приведены в следующей таблице.


**Требование** | **Сведения**
--- | ---
**Deployment** | Перед развертыванием визуализации зависимостей необходимо иметь проект службы "миграция Azure" на месте с добавлением в проект средства оценки Azure: Server. Визуализация зависимостей развертывается после настройки устройства миграции Azure для обнаружения локальных компьютеров.<br/><br/> Визуализация зависимостей недоступна в Azure для государственных организаций.
**Схема услуги** | Визуализация зависимостей на основе агента использует решение [сопоставление служб](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-service-map) в [журналах Azure Monitor](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview).<br/><br/> Для развертывания необходимо связать новую или существующую рабочую область Log Analytics с проектом службы "миграция Azure".
**Рабочая область Log Analytics** | Рабочая область должна находиться в той же подписке, что и проект службы "миграция Azure".<br/><br/> Служба "миграция Azure" поддерживает рабочие области в регионах "Восточная часть США", "Юго-Восточная Азия" и "Западная Европа".<br/><br/>  Рабочая область должна находиться в регионе, в котором [поддерживается сопоставление служб](https://docs.microsoft.com/azure/azure-monitor/insights/vminsights-enable-overview#prerequisites).<br/><br/> Рабочую область для проекта службы "миграция Azure" нельзя изменить после добавления.
**Держек** | На Сопоставление служб решение не взимается плата за первые 180 дней (с дня, связанной с рабочей областью Log Analytics с проектом "миграция Azure").<br/><br/> По истечении 180 дней применяются стандартные тарифы Log Analytics.<br/><br/> При использовании любого решения, кроме Сопоставление служб в связанной Log Analytics рабочей области, будет взиматься стандартная плата за Log Analytics.<br/><br/> При удалении проекта службы "миграция Azure" Рабочая область не удаляется. После удаления проекта Сопоставление служб бесплатно, и каждый узел будет оплачиваться по мере использования платного уровня Log Analytics рабочей области.
**Агенты** | Для визуализации зависимостей на основе агентов на каждом компьютере, который необходимо проанализировать, должны быть установлены два агента.<br/><br/> - [Microsoft Monitoring Agent (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows)<br/><br/> - [Агент зависимостей](https://docs.microsoft.com/azure/azure-monitor/platform/agents-overview#dependency-agent). 
**Подключение к Интернету** | Если компьютеры не подключены к Интернету, необходимо установить на них шлюз Log Analytics.


## <a name="agentless-dependency-visualization"></a>Визуализация зависимостей без агента

Сейчас этот вариант доступен в предварительной версии. [Подробнее](how-to-create-group-machine-dependencies-agentless.md). Требования приведены в следующей таблице.

**Требование** | **Сведения**
--- | ---
**Deployment** | Перед развертыванием визуализации зависимостей необходимо иметь проект службы "миграция Azure" на месте с добавлением в проект средства оценки Azure: Server. Визуализация зависимостей развертывается после настройки устройства миграции Azure для обнаружения локальных компьютеров.
**Поддержка виртуальных машин** | Сейчас поддерживается только для виртуальных машин VMware.
**Виртуальные машины Windows** | Windows Server 2016<br/> Windows Server 2012 R2<br/> Windows Server 2012<br/> Windows Server 2008 R2 (64-разрядная версия)
**Виртуальные машины Linux** | Red Hat Enterprise Linux 7, 6, 5<br/> Ubuntu Linux 14,04, 16,04<br/> Debian 7, 8.<br/> Oracle Linux 6, 7<br/> CentOS 5, 6, 7.
**Учетная запись Windows** |  Для визуализации требуется учетная запись пользователя с гостевым доступом.
**Учетная запись Linux** | Визуализации требуется учетная запись пользователя с правами root.<br/><br/> Кроме того, учетной записи пользователя требуются следующие разрешения для файлов/бин/нетстат и/бин/ЛС: CAP_DAC_READ_SEARCH и CAP_SYS_PTRACE.
**Агенты виртуальной машины** | На виртуальных машинах не требуется агент.
**Средства VMware** | Средства VMware должны быть установлены и запускаться на виртуальных машинах, которые необходимо проанализировать.
**учетные данные vCenter** | Учетная запись vCenter Server с доступом только для чтения, а также привилегии, разрешенные для виртуальных машин > гостевых операций.
**Доступ к портам** | На узлах ESXi, на которых выполняются анализируемые виртуальные машины, устройство миграции Azure должно иметь возможность подключения к TCP-порту 443.



## <a name="next-steps"></a>Дальнейшие действия

- [Ознакомьтесь](best-practices-assessment.md) с рекомендациями по созданию оценок.
- [Подготовка к оценке VMware](tutorial-prepare-vmware.md) .
