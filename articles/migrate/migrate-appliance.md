---
title: Устройство службы "Миграция Azure"
description: Содержит общие сведения об устройстве миграции Azure, используемом при оценке и миграции сервера.
ms.topic: conceptual
ms.date: 04/23/2020
ms.openlocfilehash: 71a17211a530b4cb55764f3b3ab84ff5a4d5f3e6
ms.sourcegitcommit: 354a302d67a499c36c11cca99cce79a257fe44b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2020
ms.locfileid: "82106396"
---
# <a name="azure-migrate-appliance"></a>Устройство службы "Миграция Azure"

В этой статье перечислены необходимые условия и требования к поддержке для устройства "миграция Azure". 

## <a name="deployment-scenarios"></a>Сценарии развертывания

Устройство "миграция Azure" используется в следующих сценариях.

**Сценарий** | **Инструмент** | **Используется для** 
--- | --- | ---
**Оценка виртуальных машин VMware** | Служба "миграция Azure": Оценка сервера | Обнаружение виртуальных машин VMware<br/><br/> Обнаружение приложений и зависимостей компьютера<br/><br/> Собирайте метаданные компьютера и метаданные производительности для оценки.
**Миграция без агента виртуальной машины VMware** | Миграция Azure: миграция сервера | Обнаружение виртуальных машин VMware <br/><br/> Репликация виртуальных машин VMware с миграцией без агента.
**Оценка виртуальных машин Hyper-V** | Служба "миграция Azure": Оценка сервера | Обнаружение виртуальных машин Hyper-V<br/><br/> Собирайте метаданные компьютера и метаданные производительности для оценки.
**Оценка физического компьютера** |  Служба "миграция Azure": Оценка сервера |  Обнаружение физических серверов (или виртуальных машин, обрабатываемых как физических серверов).<br/><br/> Собирайте метаданные компьютера и метаданные производительности для оценки.

## <a name="deployment-methods"></a>Методы развертывания

Устройство можно развернуть с помощью нескольких методов:

- Устройство можно развернуть с помощью шаблона для виртуальных машин VMware и виртуальных машин Hyper-V (шаблон OVA для VMware или VHD для Hyper-V).
- Если вы не хотите использовать шаблон, можно развернуть устройство для VMware или Hyper-V с помощью сценария PowerShell.
- В Azure для государственных организаций необходимо развернуть устройство с помощью скрипта.
- Для физических серверов устройство всегда развертывается с помощью скрипта.
- Ссылки для скачивания доступны в таблицах ниже.


## <a name="appliance---vmware"></a>Устройство — VMware 

В следующей таблице перечислены требования к устройству "миграция Azure" для VMware.

**Требование** | **VMware** 
--- | ---
**Компоненты устройства** | Устройство имеет следующие компоненты:<br/><br/> - **Приложение управления**: это веб-приложение для ввода данных пользователем во время развертывания устройства. Используется при оценке компьютеров для миграции в Azure.<br/> - **Агент обнаружения**. агент собирает данные конфигурации компьютера. Используется при оценке компьютеров для миграции в Azure.<br/>- **Агент оценки**: агент собирает данные о производительности. Используется при оценке компьютеров для миграции в Azure.<br/>- **Автоматическое обновление службы**: обновляет компоненты устройства (выполняется каждые 24 часа).<br/>- **Агент DRA**: управляет РЕПЛИКАЦИЕЙ виртуальной машины и координирует взаимодействие между реплицированными компьютерами и Azure. Используется только при репликации виртуальных машин VMware в Azure с помощью миграции без агента.<br/>- **Шлюз**: отправляет реплицированные данные в Azure. Используется только при репликации виртуальных машин VMware в Azure с помощью миграции без агента.
**Поддерживаемое развертывание** | Разверните виртуальную машину VMware с помощью шаблона OVA.<br/><br/> Развертывание в виде виртуальной машины VMware или физического компьютера с помощью сценария установки PowerShell.
**Поддержка проекта** |  Устройство может быть связано с одним проектом. <br/> С одним проектом можно связать любое количество устройств.<br/> 
**Ограничения обнаружения** | Устройство может обнаруживать до 10 000 виртуальных машин VMware на vCenter Server.<br/> Устройство может подключаться к одной vCenter Server.
**Шаблон OVA** | Скачайте с портала или из https://aka.ms/migrate/appliance/vmware.<br/><br/> Размер скачивания составляет 11,2 ГБ.<br/><br/> Загруженный шаблон устройства поставляется с лицензией на ознакомительную версию Windows Server 2016, которая действительна в течение 180 дней. Если период оценки близок к истечению срока действия, рекомендуется скачать и развернуть новое устройство или активировать лицензию операционной системы виртуальной машины устройства.
**Сценарий PowerShell** | [Скачать](https://go.microsoft.com/fwlink/?linkid=2105112)скрипт.<br/><br/> 
**Программное обеспечение и оборудование** |  Устройство должно работать на компьютере с Windows Server 2016, 32-ГБ ОЗУ, 8 виртуальных ЦП, около 80 ГБ дискового накопителя и внешним виртуальным коммутатором.<br/> Устройству требуется доступ к Интернету либо напрямую, либо через прокси-сервер.<br/><br/> Если вы запускаете устройство на виртуальной машине VMware, вам потребуется достаточно ресурсов на vCenter Server, чтобы выделить виртуальную машину, соответствующую требованиям.<br/><br/> При запуске устройства на физическом компьютере убедитесь, что он работает под управлением Windows Server 2016 и соответствует требованиям к оборудованию. 
**Требования к VMware** | Если вы развертываете устройство как виртуальную машину VMware, его необходимо развернуть на узле ESXi под управлением версии 5,5 или более поздней.<br/><br/> vCenter Server с 5,5, 6,0, 6,5 или 6,7.
**ВДДК (миграция без агента)** | Если вы развертываете устройство как виртуальную машину VMware и используете миграцию без агента, на виртуальной машине устройства должен быть установлен VMware vSphere ВДДК.
**Хэш-значение — OVA** | [Проверьте](tutorial-assess-vmware.md#verify-security) хэш-значения шаблона OVA.
**Хэш-значение — скрипт PowerShell** | [Проверьте](deploy-appliance-script.md#verify-file-security) хэш-значения скрипта PowerShell.




## <a name="appliance---hyper-v"></a>Устройство — Hyper-V

**Требование** | **Hyper-V** 
--- | ---
**Компоненты устройства** | Устройство имеет следующие компоненты:<br/><br/>- **Приложение управления**: это веб-приложение для ввода данных пользователем во время развертывания устройства. Используется при оценке компьютеров для миграции в Azure.<br/> - **Агент обнаружения**. агент собирает данные конфигурации компьютера. Используется при оценке компьютеров для миграции в Azure.<br/>- **Агент оценки**: агент собирает данные о производительности. Используется при оценке компьютеров для миграции в Azure.<br/>- **Автоматическое обновление службы**: обновляет компоненты устройства (выполняется каждые 24 часа).
**Поддерживаемое развертывание** | Развертывание в качестве виртуальной машины Hyper-V с помощью шаблона виртуального жесткого диска.<br/><br/> Развертывание в качестве виртуальной машины Hyper-V или физического компьютера с помощью сценария установки PowerShell.
**Поддержка проекта** |  Устройство может быть связано с одним проектом. <br/> С одним проектом можно связать любое количество устройств.<br/> 
**Ограничения обнаружения** | Устройство может обнаружить до 5000 виртуальных машин Hyper-V.<br/> Устройство может подключаться к узлам Hyper-V до 300.
**Шаблон виртуального жесткого диска** | ZIP-папка, включая VHD. Скачайте с портала или из https://aka.ms/migrate/appliance/hyperv.<br/><br/> Размер загружаемого файла составляет 10 ГБ.<br/><br/> Загруженный шаблон устройства поставляется с лицензией на ознакомительную версию Windows Server 2016, которая действительна в течение 180 дней. Если период оценки близок к истечению срока действия, рекомендуется скачать и развернуть новое устройство или активировать лицензию операционной системы виртуальной машины устройства.
**Сценарий PowerShell** | [Скачать](https://go.microsoft.com/fwlink/?linkid=2105112)скрипт.<br/><br/> 
**Программное обеспечение и оборудование***   |  Устройство должно работать на компьютере с Windows Server 2016, 32-ГБ ОЗУ, 8 виртуальных ЦП, около 80 ГБ дискового накопителя и внешним виртуальным коммутатором.<br/> Устройству требуется статический или динамический IP-адрес, и требуется доступ к Интернету напрямую или через прокси-сервер.<br/><br/> Если вы запускаете устройство в качестве виртуальной машины Hyper-V, вам потребуется достаточно ресурсов на узле Hyper-V, чтобы выделить 16 ГБ ОЗУ, 8 виртуальных ЦП, около 80 ГБ дискового пространства и внешний коммутатор для виртуальной машины устройства.<br/><br/> При запуске устройства на физическом компьютере убедитесь, что он работает под управлением Windows Server 2016 и соответствует требованиям к оборудованию. 
**Требования к Hyper-V** | При развертывании устройства с помощью шаблона VHD виртуальная машина устройства, предоставляемая службой "миграция Azure", является виртуальной машиной Hyper-V версии 5,0.<br/><br/> Узел Hyper-V должен работать под управлением Windows Server 2012 R2 или более поздней версии. 
**Хэш-значение — VHD** | [Проверьте](tutorial-assess-hyper-v.md#verify-security) хэш-значения шаблона виртуального жесткого диска.
**Хэш-значение — скрипт PowerShell** | [Проверьте](deploy-appliance-script.md#verify-file-security) хэш-значения скрипта PowerShell.


## <a name="appliance---physical"></a>Устройство — физическое

**Требование** | **Реальной** 
--- | ---
**Компоненты устройства** | Устройство имеет следующие компоненты: <br/><br/> - **Приложение управления**: это веб-приложение для ввода данных пользователем во время развертывания устройства. Используется при оценке компьютеров для миграции в Azure.<br/> - **Агент обнаружения**. агент собирает данные конфигурации компьютера. Используется при оценке компьютеров для миграции в Azure.<br/>- **Агент оценки**: агент собирает данные о производительности. Используется при оценке компьютеров для миграции в Azure.<br/>- **Автоматическое обновление службы**: обновляет компоненты устройства (выполняется каждые 24 часа).
**Поддерживаемое развертывание** | Развертывание в качестве выделенного физического компьютера или виртуальной машины с помощью сценария установки PowerShell. Скрипт доступен для загрузки с портала.
**Поддержка проекта** |  Устройство может быть связано с одним проектом. <br/> С одним проектом можно связать любое количество устройств.<br/> 
**Ограничения обнаружения** | Устройство может обнаруживать до 250 физических серверов.
**Сценарий PowerShell** | Скачайте сценарий (Азуремигратеинсталлер. ps1) в ZIP-папку на портале. [Подробнее](tutorial-assess-physical.md#set-up-the-appliance). Кроме того, можно [загрузить напрямую](https://go.microsoft.com/fwlink/?linkid=2105112).<br/><br/> Размер загрузки составляет 59,7 МБ.
**Программное обеспечение и оборудование** |  Устройство должно работать на компьютере с Windows Server 2016, 32-ГБ ОЗУ, 8 виртуальных ЦП, около 80 ГБ дискового накопителя и внешним виртуальным коммутатором.<br/> Устройству требуется статический или динамический IP-адрес, и требуется доступ к Интернету напрямую или через прокси-сервер.<br/><br/> При запуске устройства на физическом компьютере убедитесь, что он работает под управлением Windows Server 2016 и соответствует требованиям к оборудованию. 
**Значение хэша** | [Проверьте](deploy-appliance-script.md#verify-file-security) хэш-значения скрипта PowerShell.

## <a name="url-access"></a>доступ по URL-адресу

Устройству миграции Azure требуется подключение к Интернету.

- При развертывании устройства служба "миграция Azure" выполняет проверку подключения к необходимым URL-адресам.
- Если вы используете прокси-сервер на основе URL-адресов для подключения к Интернету, необходимо разрешить доступ к этим URL-адресам, убедившись, что прокси-сервер разрешает любые записи CNAME, полученные при поиске URL-адресов.

### <a name="public-cloud-urls"></a>URL-адреса общедоступного облака

**URL-адрес** | **Сведения**  
--- | --- |
*.portal.azure.com  | Перейдите на портал Azure.
*.windows.net <br/> *.msftauth.net <br/> *.msauth.net <br/> *.microsoft.com <br/> *.live.com | Войдите в свою подписку Azure.
*.microsoftonline.com <br/> *.microsoftonline-p.com | Создание приложений Azure Active Directory (AD) для взаимодействия устройства с миграцией Azure.
management.azure.com | Создайте приложения Azure AD для взаимодействия устройства с службой "миграция Azure".
dc.services.visualstudio.com | Отправка журналов приложений, используемых для внутреннего мониторинга.
*.vault.azure.net | Управление секретами в Azure Key Vault.
aka.ms/* | Разрешение доступа к связям. Используется для переноса обновлений устройства в Azure.
download.microsoft.com/download | Разрешить загрузку из центра загрузки Майкрософт.
*.servicebus.windows.net | Обмен данными между устройством и службой "миграция Azure".
*.discoverysrv.windowsazure.com <br/> *.migration.windowsazure.com | Подключение к Azure миграция URL-адресов службы.
*.hypervrecoverymanager.windowsazure.com | **Используется для миграции без агента VMware**<br/><br/> Подключение к Azure миграция URL-адресов службы.
*.blob.core.windows.net |  **Используется для миграции без агента VMware**<br/><br/>Отправка данных в хранилище для миграции.

### <a name="government-cloud-urls"></a>Облачные URL-адреса государственных организаций

**URL-адрес** | **Сведения**  
--- | --- |
*.portal.azure.us  | Перейдите на портал Azure.
graph.windows.net | Войдите в свою подписку Azure.
login.microsoftonline.us  | Создание приложений Azure Active Directory (AD) для взаимодействия устройства с миграцией Azure.
management.usgovcloudapi.net | Создайте приложения Azure AD для взаимодействия устройства с службой "миграция Azure".
dc.services.visualstudio.com | Отправка журналов приложений, используемых для внутреннего мониторинга.
*. vault.usgovcloudapi.net | Управление секретами в Azure Key Vault.
aka.ms/* | Разрешение доступа к связям. Используется для переноса обновлений устройства в Azure.
download.microsoft.com/download | Разрешить загрузку из центра загрузки Майкрософт.
*. servicebus.usgovcloudapi.net  | Обмен данными между устройством и службой "миграция Azure".
*. discoverysrv.windowsazure.us <br/> *. migration.windowsazure.us | Подключение к Azure миграция URL-адресов службы.
*.hypervrecoverymanager.windowsazure.us | **Используется для миграции без агента VMware**<br/><br/> Подключение к Azure миграция URL-адресов службы.
*.blob.core.usgovcloudapi.net  |  **Используется для миграции без агента VMware**<br/><br/>Отправка данных в хранилище для миграции.
*. applicationinsights.us | Отправка журналов приложений, используемых для внутреннего мониторинга.





## <a name="collected-data---vmware"></a>Собранные данные — VMware

Устройство собирает метаданные, данные о производительности и данные анализа зависимостей (если используется [анализ зависимостей](concepts-dependency-visualization.md) без агента).

### <a name="metadata"></a>Метаданные

Метаданные, обнаруженные устройством "миграция Azure", позволяют выяснить, готовы ли компьютеры и приложения к миграции в Azure, масштабировать компьютеры и приложения, планы затрат и анализировать зависимости приложений. Корпорация Майкрософт не использует эти данные при аудите соответствия требованиям лицензий.

Ниже приведен полный список метаданных виртуальных машин VMware, которые устройство собирает и отправляет в Azure.

**DATA** | **ПОДПИСАН**
--- | --- 
**Сведения о компьютере** | 
Идентификатор виртуальной машины | vm.Config.InstanceUuid 
имя виртуальной машины; | vm.Config.Name
Идентификатор vCenter Server | Вмвареклиент. instance. UUID
Описание виртуальной машины | vm.Summary.Config.Annotation
Имя продукта лицензии | vm.Client.ServiceContent.About.LicenseProductName
Тип операционной системы | машину. Суммариконфиг. Гуестфуллнаме
Тип загрузки | vm.Config.Firmware
Число ядер | vm.Config.Hardware.NumCPU
Память (МБ) | vm.Config.Hardware.MemoryMB
Количество дисков | машину. Файл config. Hardware. Device. ToList (). FindAll (x => — VirtualDisk). Count
Список размеров диска | машину. Файл config. Hardware. Device. ToList (). FindAll (x => — VirtualDisk)
Список сетевых адаптеров | машину. Файл config. Hardware. Device. ToList (). FindAll (x => — Виртуалесернет). Count
загрузка ЦП; | cpu.usage.average
Использование памяти |mem.usage.average
**Сведения о диске** | 
Значение ключа диска | disk.Key
Номер дикунит | disk.UnitNumber
Значение ключа контроллера диска | disk.ControllerKey.Value
Подготовленных гигабайт | virtualDisk.DeviceInfo.Summary
Имя диска | Значение, созданное с помощью диска. Унитнумбер, Disk. Ключ, диск. Контроллеркэй. VAlue
Число операций чтения за секунду. | virtualDisk.numberReadAveraged.average
Число операций записи за секунду. | virtualDisk.numberWriteAveraged.average
Пропускная способность чтения (МБ в секунду) | virtualDisk.read.average
Пропускная способность записи (МБ в секунду) | virtualDisk.write.average
**Сведения для каждого сетевого адаптера** | 
Имя сетевого адаптера | nic.Key
MAC-адрес. | ((VirtualEthernetCard)nic).MacAddress
IPv4-адреса | vm.Guest.Net
IPv6-адреса | vm.Guest.Net
Пропускная способность чтения (МБ в секунду) | net.received.average
Пропускная способность записи (МБ в секунду) | net.transmitted.average
**Сведения о пути инвентаризации** | 
name | container.GetType().Name
Тип дочернего объекта | container.ChildType
Справочные сведения | container.MoRef
Сведения о родительском объекте | Container.Parent
Сведения о папке на виртуальную машину | ((Folder)container).ChildEntity.Type
Сведения о центре обработки данных на виртуальную машину | ((Datacenter)container).VmFolder
Сведения о центре обработки данных на папку узлов | ((Datacenter)container).HostFolder
Сведения о кластере на узле | ((Клустеркомпутересаурце) контейнер). Хост
Сведения об узле на виртуальную машину | ((Хостсистем) контейнер). МАШИНУ

### <a name="performance-data"></a>Данные о производительности


Ниже приведены данные производительности виртуальной машины VMware, которые устройство собирает и отправляет в Azure.

**Data** | **Счетчик** | **Влияние на оценку**
--- | --- | ---
загрузка ЦП; | cpu.usage.average | Рекомендуемый размер и стоимость виртуальной машины
Использование памяти | mem.usage.average | Рекомендуемый размер и стоимость виртуальной машины
Пропускная способность чтения с диска (МБ в секунду) | virtualDisk.read.average | Вычисление размера диска, стоимости хранилища, размера виртуальной машины
Пропускная способность записи на диск (МБ в секунду) | virtualDisk.write.average | Вычисление размера диска, стоимости хранилища, размера виртуальной машины
Количество операций чтения с диска в секунду | virtualDisk.numberReadAveraged.average | Вычисление размера диска, стоимости хранилища, размера виртуальной машины
Операций записи на диск в секунду | virtualDisk.numberWriteAveraged.average  | Вычисление размера диска, стоимости хранилища, размера виртуальной машины
Пропускная способность чтения сетевого адаптера (МБ в секунду) | net.received.average | Вычисление размера виртуальной машины
Пропускная способность записи сетевого адаптера (МБ в секунду) | net.transmitted.average  |Вычисление размера виртуальной машины

### <a name="app-dependencies-metadata"></a>Метаданные зависимостей приложений

При анализе зависимостей без агента выполняется сбор данных о соединениях и процессах.

#### <a name="connection-data"></a>Данные подключения

Ниже приведены данные подключения, которые устройство собирает с каждой виртуальной машины, для которой разрешен анализ зависимостей без агента. Эти данные отправляются в Azure.

**Data** | **Используемая команда** 
--- | --- 
Локальный порт | netstat
Локальный IP-адрес | netstat
Удаленный порт | netstat
Удаленный IP-адрес | netstat
Состояние подключения TCP | netstat
ИД процесса | netstat
Нет. активных подключений | netstat

#### <a name="process-data"></a>Обработка данных
Ниже приведены данные процесса, собираемые устройством с каждой виртуальной машины, для которой разрешен анализ зависимостей без агента. Эти данные отправляются в Azure.

**Data** | **класс WMI** | **Свойство класса WMI**
--- | --- | ---
Имя процесса | Win32_Process | ExecutablePath
Обработка аргументов | Win32_Process | Командная строка
имя приложения; | Win32_Process | Параметр VersionInfo. ProductName свойства ExecutablePath

#### <a name="linux-vm-data"></a>Данные виртуальной машины Linux

Ниже приведено подключение и обработка данных, которые устройство собирает с каждой виртуальной машины Linux, для которой разрешен анализ зависимостей без агента. Эти данные отправляются в Azure.

**Data** | **Используемая команда** 
--- | ---
Локальный порт | netstat 
Локальный IP-адрес | netstat 
Удаленный порт | netstat 
Удаленный IP-адрес | netstat 
Состояние подключения TCP | netstat 
Нет. активных подключений | netstat
ИД процесса  | netstat 
Имя процесса | ps
Обработка аргументов | ps
имя приложения; | dpkg или RPM



## <a name="collected-data---hyper-v"></a>Собранные данные — Hyper-V

Устройство собирает метаданные, данные о производительности и данные анализа зависимостей (если используется [анализ зависимостей](concepts-dependency-visualization.md) без агента).

### <a name="metadata"></a>Метаданные
Метаданные, обнаруженные устройством "миграция Azure", позволяют выяснить, готовы ли компьютеры и приложения к миграции в Azure, масштабировать компьютеры и приложения, планы затрат и анализировать зависимости приложений. Корпорация Майкрософт не использует эти данные при аудите соответствия требованиям лицензий.

Ниже приведен полный список метаданных виртуальной машины Hyper-V, которые устройство собирает и отправляет в Azure.

**DATA* | **КЛАСС WMI** | **СВОЙСТВО КЛАССА WMI**
--- | --- | ---
**Сведения о компьютере** | 
Серийный номер BIOS _ Msvm_BIOSElement | биоссериалнумбер
Тип виртуальной машины (GEN 1 или 2) | Msvm_VirtualSystemSettingData | виртуалсистемсубтипе
Отображаемое имя виртуальной машины | Msvm_VirtualSystemSettingData | ElementName
Версия виртуальной машины | Msvm_ProcessorSettingData | виртуалкуантити
Память (байт) | Msvm_MemorySettingData | виртуалкуантити
Максимальный объем памяти, который может потребляться виртуальной машиной | Msvm_MemorySettingData | Ограничение
Динамическая память включена | Msvm_MemorySettingData | DynamicMemoryEnabled
Имя, версия или полное доменное название операционной системы | Msvm_KvpExchangeComponent | Данные имени Гуестинтринсицексчанжеитемс
Состояние питания виртуальной машины | Msvm_ComputerSystem | EnabledState
**Сведения о диске** | 
Идентификатор диска | Msvm_VirtualHardDiskSettingData | виртуалдискид
Тип виртуального жесткого диска | Msvm_VirtualHardDiskSettingData | Тип
Размер виртуального жесткого диска | Msvm_VirtualHardDiskSettingData | максинтерналсизе
Родительский элемент виртуального жесткого диска | Msvm_VirtualHardDiskSettingData | парентпас
**Сведения для каждого сетевого адаптера** | 
IP-адреса (синтетические сетевые карты) | Msvm_GuestNetworkAdapterConfiguration | IPAddresses
DHCP включен (синтетические сетевые карты) | Msvm_GuestNetworkAdapterConfiguration | DHCPEnabled
ИДЕНТИФИКАТОР сетевого адаптера (синтетические сетевые карты) | Msvm_SyntheticEthernetPortSettingData | InstanceID
MAC-адрес NIC (синтетические сетевые карты) | Msvm_SyntheticEthernetPortSettingData | Адрес
ИДЕНТИФИКАТОР сетевого адаптера (устаревшие сетевые карты) | Данные Мсвмемулатедесернетпортсеттинг | InstanceID
MAC ID NIC (устаревшие сетевые карты) | Данные Мсвмемулатедесернетпортсеттинг | Адрес

### <a name="performance-data"></a>Данные о производительности

Ниже приведены данные о производительности виртуальной машины Hyper, которые устройство собирает и отправляет в Azure.

**Класс счетчика производительности** | **Счетчик** | **Влияние на оценку**
--- | --- | ---
Виртуальный процессор гипервизора Hyper-V | % Времени выполнения гостевой работы | Рекомендуемый размер и стоимость виртуальной машины
Виртуальная машина Hyper-V динамическая память | Текущая нагрузка (%)<br/> Физическая доступная Гостевая память (МБ) | Рекомендуемый размер и стоимость виртуальной машины
Виртуальное запоминающее устройство Hyper-V | Байтов чтения в секунду | Вычисление размера диска, стоимости хранилища, размера виртуальной машины
Виртуальное запоминающее устройство Hyper-V | Записано байт в секунду | Вычисление размера диска, стоимости хранилища, размера виртуальной машины
Виртуальный сетевой адаптер Hyper-V | Получено байт/сек | Вычисление размера виртуальной машины
Виртуальный сетевой адаптер Hyper-V | Отправлено байтов в секунду | Вычисление размера виртуальной машины

- Загрузка ЦП — это сумма всех использований для всех виртуальных процессоров, подключенных к виртуальной машине.
- Использование памяти — (текущее давление * видимая физическая память)/100.
- Значения использования диска и сети собираются из перечисленных счетчиков производительности Hyper-V.

## <a name="appliance-upgrades"></a>Обновление устройства

Устройство обновляется, так как агенты службы "миграция Azure", работающие на устройстве, обновляются. Это происходит автоматически, так как автоматическое обновление включено на устройстве по умолчанию. Вы можете изменить этот параметр по умолчанию, чтобы обновить службы устройств вручную.

### <a name="turn-off-auto-update"></a>Отключить автоматическое обновление

1. На компьютере, на котором работает устройство, откройте редактор реестра.
2. Перейдите к **HKEY_LOCAL_MACHINE \софтваре\микрософт\азуреапплианце**.
3. Чтобы отключить автоматическое обновление, **Создайте раздел реестра** с параметром DWORD со значением 0.

    ![Задать раздел реестра](./media/migrate-appliance/registry-key.png)


### <a name="turn-on-auto-update"></a>Включить автоматическое обновление

Включить автоматическое обновление можно одним из следующих способов:

- Удалив раздел реестра автообновления из HKEY_LOCAL_MACHINE \Софтваре\микрософт\азуреапплианце.
- После завершения обнаружения в Configuration Manager устройства.

Чтобы удалить раздел реестра, выполните следующие действия.

1. На компьютере, на котором работает устройство, откройте редактор реестра.
2. Перейдите к **HKEY_LOCAL_MACHINE \софтваре\микрософт\азуреапплианце**.
3. Удалите автоматическое обновление раздела реестра, созданное ранее для отключения **автоматического обновления.**

Чтобы включить из Configuration Manager устройства, после завершения обнаружения выполните следующие действия.

1. На компьютере устройства откройте Configuration Manager устройства.
2. В окне **службы** > устройств**Автоматическое обновление компонентов Azure Migrate**отключено. Щелкните, чтобы включить автоматическое обновление.

    ![Включить автоматическое обновление](./media/migrate-appliance/turn-on.png)

### <a name="check-the-appliance-services-version"></a>Проверка версии служб устройства

Проверить версию служб устройства можно одним из следующих способов.

- В Configuration Manager устройства после завершения обнаружения.
- На компьютере устройства в окне > **программы и компоненты** **панели управления**.

Чтобы записать Configuration Manager устройства, выполните следующие действия.

1. После завершения обнаружения Откройте устройство Configuration Manager (в веб-приложении устройства).
2. В окне **службы устройств**Проверьте версии служб устройства.

    ![Проверка версии](./media/migrate-appliance/version.png)

Чтобы проверить панель управления, сделайте следующее:

1. На устройстве щелкните **Пуск** > **панели** > управления**программы и компоненты** .
2. Проверьте версии служб устройства в списке.

    ![Проверка версии на панели управления](./media/migrate-appliance/programs-features.png)

### <a name="manually-update-an-older-version"></a>Обновление старой версии вручную

Если вы используете более раннюю версию для любого из компонентов, необходимо удалить службу и вручную обновить ее до последней версии.

1. Чтобы проверить наличие последних версий службы устройств, [Скачайте](https://aka.ms/latestapplianceservices) файл латесткомпонентс. JSON.
2.  После загрузки откройте файл Латесткомпонентс. JSON в блокноте.
3. Найдите последнюю версию службы в файле и ссылку для скачивания. Пример:

    "Name": "Асрмигратионвебапп", "Довнлоадлинк": "https://download.microsoft.com/download/f/3/4/f34b2eb9-cc8d-4978-9ffb-17321ad9b7ed/MicrosoftAzureApplianceConfigurationManager.msi", "Version": "6.0.211.2", "Md5Hash": "e00a742acc35e78a64a6a81e75469b84"

4.  Скачайте последнюю версию устаревшей службы, используя ссылку для скачивания в файле.
5. После загрузки выполните следующую команду в окне командной строки администратора, чтобы проверить целостность скачанного MSI.

    ``` C:\>Get-FileHash -Path <file_location> -Algorithm [Hashing Algorithm] ```Например: C:\>certutil-ХАШФИЛЕ к:\усерс\публик\довнлоадс\микрософтазуреапплианцеконфигуратионманажер.МСИ MD5

5. Убедитесь, что выходные данные команды соответствуют записи хэш-значения для службы в файле (например, значение хэша MD5 выше).
6. Теперь запустите MSI, чтобы установить службу. Это автоматическая установка, и окно установки закрывается после завершения работы.
7. После завершения установки проверьте версию службы в окне > **программы и компоненты** **панели управления**. Версия службы теперь должна быть обновлена до последней версии, показанной в файле JSON.



## <a name="next-steps"></a>Дальнейшие действия

- [Узнайте, как](how-to-set-up-appliance-vmware.md) настроить устройство для VMware.
- [Узнайте, как](how-to-set-up-appliance-hyper-v.md) настроить устройство для Hyper-V.
- [Узнайте, как](how-to-set-up-appliance-physical.md) настроить устройство для физических серверов.

