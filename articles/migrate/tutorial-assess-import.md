---
title: Обработка импортированных данных серверов с помощью средства оценки серверов в службе "Миграция Azure"
description: В этой статье описывается, как оценивать локальные серверы на готовность к миграции в Azure по импортированным данным с помощью средства оценки сервера в службе "Миграция Azure".
author: rayne-wiselman
manager: carmonm
ms.service: azure-migrate
ms.topic: tutorial
ms.date: 10/23/2019
ms.author: raynew
ms.openlocfilehash: 40dd81b9eb7ff2b20abb1bf3ea4337b63fb2a831
ms.sourcegitcommit: cee72954f4467096b01ba287d30074751bcb7ff4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/30/2020
ms.locfileid: "87447079"
---
# <a name="assess-servers-by-using-imported-data"></a>Оценка серверов по импортированным данным

Из этой стать и вы узнаете, как оценивать локальные серверы с помощью [средства оценки серверов в службе "Миграция Azure"](migrate-services-overview.md#azure-migrate-server-assessment-tool), импортируя метаданные сервера в формате CSV (значения с разделителями-запятыми). Этот метод оценки позволяет обойтись без настройки устройства Миграции Azure. Это полезно в следующих случаях:

- Перед развертыванием устройства нужно быстро выполнить начальную оценку.
- Нет возможности развернуть модуль службы "Миграция Azure" в вашей организации.
- Нет возможности предоставить общий доступ к учетным данным для входа на локальные серверы.
- Ограничения безопасности не позволяют собирать и отправлять в Azure данные, которые собираются этим модулем. Вы можете управлять тем, к каким данным предоставляете совместный доступ через импортированный файл. Кроме того, большая часть данных (например, IP-адреса) является необязательной.

## <a name="before-you-start"></a>Перед началом работы

Обратите внимание на такие моменты.

- В один CSV-файл можно добавить не более 20 000 серверов.
- С помощью CSV-файла вы сможете добавить в проект Миграции Azure не более 20 000 серверов.
- С помощью CSV-файлов вы можете несколько раз отправить данные о серверах в средство оценки сервера.
- Сбор сведений о приложениях полезен при оценке готовности локальной среды к миграции. Но средство оценки серверов сейчас не выполняет обработку на уровне приложений и не учитывает приложения при создании оценки.

В этом руководстве описано следующее:
> [!div class="checklist"]
> * Настройка проекта службы "Миграция Azure".
> * Заполнение CSV-файла сведениями о серверах.
> * Импорт файла с данными о серверах в средство оценки серверов.
> * Создание и проверка оценки.

> [!NOTE]
> В руководствах показан простейший путь развертывания, который позволяет быстро настроить проверку концепции. В руководствах по возможности используются параметры по умолчанию и показаны не все возможные параметры и пути. Подробные инструкции можно найти в практических руководствах.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/pricing/free-trial/), прежде чем начинать работу.

## <a name="set-azure-permissions-for-azure-migrate"></a>Настройка разрешений Azure для службы "Миграция Azure"

Учетная запись Azure должна иметь разрешения на создание приложений проекта Миграции Azure.

1. На портале Azure откройте подписку, а затем выберите **Управление доступом (IAM)** .
2. В разделе **Проверить доступ** найдите соответствующую учетную запись и выберите ее, чтобы просмотреть разрешения.
3. Убедитесь, что у вас есть разрешения уровня **Участник** или **Владелец**.
    - Если вы создали бесплатную учетную запись Azure, вы являетесь владельцем подписки.
    - Если вы не являетесь владельцем подписки, назначьте эту роль совместно с владельцем.

## <a name="set-up-an-azure-migrate-project"></a>Настройка проекта службы "Миграция Azure"

Настройте новый проект службы "Миграция Azure".

1. На портале Azure выберите **Все службы** и найдите службу **Миграция Azure**.
2. В разделе **Службы** выберите **Миграция Azure**.
3. В разделе **Обзор** в области **Обнаружение, оценка и миграция серверов** выберите **Оценка и миграция серверов**.

    ![Обнаружение и оценка серверов](./media/tutorial-assess-import/assess-migrate.png)

4. В разделе **Начало работы** щелкните **Добавить инструменты**.
5. В разделе **Проект миграции** выберите подписку Azure и создайте группу ресурсов, если у вас ее нет.
6. В разделе **Сведения о проекте** укажите имя проекта и регион для его создания. Дополнительные сведения

    - Просмотрите список поддерживаемых географических регионов для [общедоступного](migrate-support-matrix.md#supported-geographies-public-cloud) облака и облака для [государственных организаций](migrate-support-matrix.md#supported-geographies-azure-government).
    - При выполнении миграции можно выбрать любой целевой регион.

    ![Создание проекта службы "Миграция Azure"](./media/tutorial-assess-import/migrate-project.png)

7. Выберите **Далее**.
8. В области **Выберите инструмент оценки** выберите **Azure Migrate: Server Assessment (Миграция Azure: оценка сервера)**  > **Далее**.

    ![Создание оценки в службе "Миграция Azure"](./media/tutorial-assess-import/assessment-tool.png)

9. В области **Выберите инструмент миграции** выберите **Пропустить добавление инструмента миграции** > **Далее**.
10. В разделе **Review + add tools** (Проверка и добавление инструментов) проверьте параметры и щелкните **Добавить инструменты**.
11. Развертывание проекта службы "Миграция Azure" может занять несколько минут. После этого откроется страница проекта. Если проект не отображается, доступ к нему можно получить в разделе **Серверы** на панели мониторинга службы "Миграция Azure".

## <a name="prepare-the-csv"></a>Подготовка CSV-файла

Скачайте шаблон CSV-файла и добавьте в него сведения о сервере.

### <a name="download-the-template"></a>Скачивание шаблона

1. Последовательно выберите разделы **Цели миграции** > **Серверы** > **Azure Migrate: оценка серверов** и щелкните **Обнаружить**.
2. В разделе **Обнаружение компьютеров** выберите действие **Импорт с использованием CSV-файла**.
3. Выберите **Скачать**, чтобы скачать шаблон CSV-файла. Кроме того, вы можете [скачать его напрямую](https://go.microsoft.com/fwlink/?linkid=2109031).

    ![Скачивание шаблона CSV-файла](./media/tutorial-assess-import/download-template.png)

### <a name="add-server-information"></a>Добавление информации о сервере

Соберите данные о сервере и добавьте их в CSV-файл.

- Для сбора данных можно экспортировать их из средств, которые используются для локального управления серверами, таких как VMware vSphere или база данных управления конфигурацией (CMDB).
- Чтобы ознакомиться с примерами данных, скачайте [пример файла](https://go.microsoft.com/fwlink/?linkid=2108405).

В следующей таблице перечислены поля файлов, которые необходимо заполнить:

**Имя поля** | **Обязательное** | **Сведения**
--- | --- | ---
**Имя сервера** | Да | Мы рекомендуем указать полное доменное имя сервера.
**IP-адрес** | Нет | Адрес сервера.
**Ядра** | Да | Число ядер процессора, выделенных для этого сервера.
**Память** | Да | Общий объем ОЗУ (МБ), выделенный для этого сервера.
**OS name** (Имя ОС) | Да | Операционная система сервера. <br/> При оценке распознаются имена операционных систем, совпадающие с именами или содержащие имена из [этого списка](#supported-operating-system-names).
**Версия ОС** | Нет | Версия операционной системы сервера.
**Архитектура ОС** | Нет | Архитектура ОС сервера <br/> Допустимые значения: x64, x86, AMD64, 32-или 64-разрядный.
**Количество дисков** | Нет | Не требуется, если предоставлены сведения о конкретных дисках.
**Disk 1 size** (Размер диска 1)  | Нет | Максимальный размер диска в ГБ.<br/>Вы можете добавить сведения о дополнительных дисках, [добавляя столбцы](#add-multiple-disks) в этот шаблон. В общей сложности можно добавить до восьми дисков.
**Disk 1 read ops** (Операций чтения для диска 1) | Нет | Число операций чтения с диска в секунду.
**Disk 1 write ops** (Операций записи для диска 1) | Нет | Число операций записи на диск в секунду.
**Disk 1 read throughput** (Пропускная способность при чтении для диска 1) | Нет | Скорость считывания данных с диска в МБ/с.
**Disk 1 write throughput** (Пропускная способность при записи для диска 1) | Нет | Скорость записи данных на диск в МБ/с.
**CPU utilization percentage** (Процент использования ЦП) | Нет | Процент использования ЦП.
**Memory utilization percentage** (Процент использования памяти) | Нет | Процент использования памяти.
**Total disks read ops** (Всего операций чтения с дисков) | Нет | Число операций чтения с диска в секунду.
**Total disks write ops** (Всего операций записи на диски) | Нет | Число операций записи на диск в секунду.
**Total disks read throughput** (Общая пропускная способность чтения с дисков) | Нет | Скорость чтения данных с диска в МБ/с.
**Total disks write throughput** (Общая пропускная способность записи на диски) | Нет | Скорость записи данных на диск в МБ/с.
**Network In throughput** (Пропускная способность для входящего трафика) | Нет | Объем получаемых сервером данных в МБ/с.
**Network Out throughput** (Пропускная способность для исходящего трафика) | Нет | Объем передаваемых сервером данных в МБ/с.
**Firmware type** (Тип встроенного ПО) | Нет | Встроенное ПО сервера. Допускаются значения "BIOS" и "UEFI".
**MAC address** (MAC-адрес)| Нет | MAC-адрес сервера.


### <a name="add-operating-systems"></a>Добавление операционных систем

Средство оценки распознает некоторые имена операционных систем. Указанное здесь имя должно соответствовать одной из строк в списке [поддерживаемых имен](#supported-operating-system-names).

### <a name="add-multiple-disks"></a>Добавление нескольких дисков

В шаблоне предоставлены поля по умолчанию для первого диска. Вы можете добавить аналогичные столбцы для дополнительных дисков (до восьми в общей сложности).

Например, чтобы подготовить все поля для второго диска, добавьте следующие столбцы:

- Disk 2 size (Размер диска 2)
- Disk 2 read ops (Операций чтения для диска 2)
- Disk 2 write ops (Операций записи для диска 2)
- Disk 2 read throughput (Пропускная способность при чтении для диска 2)
- Disk 2 write throughput (Пропускная способность при записи для диска 2)


## <a name="import-the-server-information"></a>Импорт сведений о сервере

После добавления сведений в шаблон CSV-файла импортируйте данные о серверах в средство оценки серверов.

1. В службе "Миграция Azure" найдите раздел **Обнаружение компьютеров** и перейдите к заполненному шаблону.
2. Выберите **Импортировать**.
3. Отобразится состояние импорта.
    - Если в этом состоянии отображаются предупреждения, вы можете исправить их или продолжить работу без устранения.
    - Чтобы повысить точность оценки, уточните информацию о сервере в соответствии с предупреждениями.
    - Чтобы просмотреть и исправить отображаемые предупреждения, выберите **Download warning details .CSV** (Скачать CSV-файл с информацией о предупреждениях). С помощью этой операции вам передается CSV-файл с добавленными предупреждениями. Просмотрите эти предупреждения и при необходимости примите меры.
    - Если в состоянии отображаются ошибки (состояние импорта имеет значение **Сбой**), их необходимо исправить перед продолжением импорта.
        1. Скачайте CSV-файл, который теперь содержит сведения об ошибке.
        1. Просмотрите эти сведения и устраните ошибки. 
        1. Снова отправьте измененный файл.
4. Если состояние импорта приняло значение **Completed** (Завершено), значит, сведения о сервере успешно импортированы.

## <a name="update-server-information"></a>Обновление сведений о сервере

Чтобы обновить сведения о сервере, повторите импорт данных с тем же значением для поля **Server name** (Имя сервера). Значение поля **Server name** (Имя сервера) нельзя изменять. В настоящее время удаление серверов не поддерживается.

## <a name="verify-servers-in-the-portal"></a>Проверка серверов на портале

Чтобы после обнаружения проверить, отображаются ли серверы на портале Azure, сделайте следующее:

1. Откройте панель мониторинга службы "Миграция Azure".
2. На странице **Azure Migrate - Servers (Миграция Azure — Серверы)**  > **Azure Migrate: Server Assessment (Миграция Azure: оценка серверов)** щелкните значок, отображающий количество **обнаруженных серверов**.
3. Щелкните вкладку **Import based** (На основе импорта).

## <a name="set-up-and-run-an-assessment"></a>Настройка и выполнение оценки

С помощью средства оценки серверов вы можете создать два типа оценки.


**Тип оценки** | **Сведения**
--- | --- 
**Azure** | Оценки для переноса локальных серверов на виртуальные машины Azure. <br/><br/> С помощью этого типа оценки вы можете оценить возможность миграции на виртуальные машины Azure для локальных [виртуальных машин VMware](how-to-set-up-appliance-vmware.md), [виртуальных машин Hyper-V](how-to-set-up-appliance-hyper-v.md) и [физических серверов](how-to-set-up-appliance-physical.md).
**Решение Azure VMware (AVS)** | Оценки для переноса локальных серверов в [Решение Azure VMware (AVS)](../azure-vmware/introduction.md). <br/><br/> С помощью этого типа оценки вы можете оценить возможность миграции на Решение Azure VMware (AVS) для локальных [виртуальных машин VMware](how-to-set-up-appliance-vmware.md).[Подробнее](concepts-azure-vmware-solution-assessment-calculation.md)

### <a name="sizing-criteria"></a>Критерии определения размера

Оценка сервера предоставляет два варианта критериев для определения размера.

**Критерии определения размера** | **Сведения** | **Data**
--- | --- | ---
**На основе производительности** | Оценки, которые предоставляют рекомендации на основе собранных данных о производительности | **Оценка для виртуальных машин Azure.** Рекомендуемый размер виртуальной машины подбирается на основе данных об использовании ЦП и памяти.<br/><br/> Рекомендации по типу диска (HDD или SSD цен. категории "Стандартный" или управляемые диски цен. категории "Премиум") основываются на значениях операций ввода-вывода в секунду и пропускной способности локальных дисков.<br/><br/> **Оценка для Решения Azure VMware.** Рекомендуемый размер узлов AVS подбирается на основе данных об использовании ЦП и памяти.
**Как в локальной среде** | Оценки, в которых не учитываются данные о производительности для создания рекомендаций. | **Оценка для виртуальных машин Azure.** Рекомендуемый размер виртуальной машины подбирается на основе размера локальной виртуальной машины.<br/><br> Рекомендуемый тип диска зависит от того, какое значение вы выбрали для параметра типа хранилища при выполнении оценки.<br/><br/> **Оценка для Решения Azure VMware.** Рекомендуемый размер узлов AVS подбирается на основе размера локальной виртуальной машины.


Чтобы выполнить оценку, сделайте следующее.

1. Просмотрите [рекомендации](best-practices-assessment.md) для создания оценок.
2. На вкладке **Серверы** на плитке **Azure Migrate: оценка серверов** щелкните **Оценка**.

    ![Оценка](./media/tutorial-assess-physical/assess.png)

3. На странице **Оценка серверов** укажите имя оценки и выберите тип **оценки** *Виртуальная машина Azure*, если вы хотите выполнить оценки для виртуальных машин Azure, или *Решение Azure VMware (AVS)* для оценки AVS.

    ![Основные данные об оценке](./media/how-to-create-assessment/assess-servers-azurevm.png)

4. В поле **Источник обнаружения** выберите вариант **Machines added via import to Azure Migrate** (Компьютеры, добавленные с помощью импорта в Миграцию Azure).

5. Щелкните **Просмотреть все**, чтобы просмотреть свойства оценки.

    ![Свойства оценки](./media/tutorial-assess-physical/view-all.png)

6. Щелкните **Далее**, чтобы перейти к этапу **Select machines to assess** (Выбор компьютеров для оценки). В разделе **Создание или выбор группы** выберите **Создать** и укажите имя группы. Группа собирает одну или несколько виртуальных машин для оценки.
7. В разделе **Добавление компьютеров в группу** выберите серверы, которые необходимо добавить в группу.
8. Щелкните **Далее**, чтобы перейти к этапу **Просмотр и создание оценки** и проверить сведения об оценке.
9. Щелкните **Создать оценку**, чтобы создать группу и запустить оценку.

    ![Создание оценки](./media/tutorial-assess-physical/assessment-create.png)

9. После создания оценки просмотрите ее, выбрав **Серверы** > **Azure Migrate: Server Assessment** >  (Миграция Azure: оценка сервера) **Оценки**.
10. Щелкните **Экспорт оценки**, чтобы скачать оценку в виде файла Microsoft Excel.

Дополнительные сведения об оценке **Решения Azure VMware (AVS)** см. [здесь](how-to-create-azure-vmware-solution-assessment.md). 

## <a name="review-an-azure-vm-assessment"></a>Просмотр данных оценки для виртуальных машин Azure

Оценка для виртуальных машин Azure описывает следующее:

- **готовность к работе в Azure**: подходят ли серверы для миграции в Azure;
- **примерную ежемесячную стоимость**: оценочная месячная стоимость вычислений и хранения для работы серверов в Azure;
- **примерную стоимость хранилища в месяц**: расчетную стоимость хранилища дисков после миграции.

### <a name="view-an-assessment"></a>Просмотр оценки

1. В разделе **Цели миграции** > **Серверы** щелкните **Оценки** в области **Миграция Azure: Server Assessment** (Миграция Azure: оценка сервера).
2. В разделе **Оценки** щелкните оценку, чтобы открыть сведения о ней.

    ![Сводка оценки](./media/tutorial-assess-physical/assessment-summary.png)

### <a name="review-azure-readiness"></a>Проверка готовности к работе в Azure

1. В разделе **Готовность к работе в Azure** убедитесь, готовы ли серверы к миграции в Azure.
2. Проверьте состояние.
    - **Готово к работе в Azure**: служба "Миграция Azure" рекомендует размер и стоимость виртуальных машин в оценке.
    - **Готово при выполнении условий**: отображает проблемы и предлагаемые способы исправления.
    - **Не готово для Azure**: отображает проблемы и предлагаемые способы исправления.
    - **Уровень готовности неизвестен**: используется, когда служба "Миграция Azure" не может оценить готовность из-за проблем с доступностью данных.

3. Щелкните состояние **Готовность к работе в Azure**. Вы можете просмотреть сведения о готовности сервера и самом сервере, в том числе параметры вычислительной среды, хранилища и сети.

### <a name="review-cost-details"></a>Просмотр сведений о затратах

В этом представлении отображается оценочная стоимость вычислений и хранения для запуска виртуальных машин в Azure. Вы можете:

- Просмотрите ежемесячные затраты на вычисления и хранение. Затраты суммируются для всех серверов в оцениваемой группе.

    - Оценки стоимости основаны на рекомендациях по размеру компьютера, его дисков и свойств.
    - Показана расчетная месячная стоимость вычислений и хранения.
    - Оценка стоимости приводится для запуска локальных серверов как виртуальных машин IaaS (инфраструктура как услуга). При оценке серверов не учитывается стоимость платформы как услуги (PaaS) или программного обеспечения как услуги (SaaS).

- Просмотрите примерную стоимость хранилища в месяц. В этом представлении показаны совокупные затраты на хранение для оцениваемой группы, распределенные по дискам хранения разных типов.
- Просмотрите детализированные сведения об определенных виртуальных машинах.

> [!NOTE]
> Оценки достоверности не назначаются оценкам серверов, которые импортируются в средство оценки сервера через CSV-файлы.

## <a name="supported-operating-system-names"></a>Поддерживаемые имена операционных систем

Имена операционных систем, указанные в CSV-файле, должны совпадать с именами в этом списке или содержать их. Это нужно для того, чтобы указанные имена были распознаны как допустимые при оценке.

<!-- BEGIN A - H -->

:::row:::
   :::column span="2":::
      **A–H**
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      Apple Mac OS X 10
   :::column-end:::
   :::column span="":::
      Asianux 3<br/>
      Asianux 4<br/>
      Asianux 5
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      CentOS<br/>
      CentOS 4/5
   :::column-end:::
   :::column span="":::
      CoreOS Linux
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      Debian GNU/Linux 4<br/>
      Debian GNU/Linux 5<br/>
      Debian GNU/Linux 6<br/>
      Debian GNU/Linux 7<br/>
      Debian GNU/Linux 8
   :::column-end:::
   :::column span="":::
      FreeBSD
   :::column-end:::
:::row-end:::

<!-- BEGIN I - R -->

:::row:::
   :::column span="2":::
      **I–R**
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      IBM OS/2
   :::column-end:::
   :::column span="":::
      MS-DOS
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      Novell NetWare 5<br/>
      Novell NetWare 6
   :::column-end:::
   :::column span="":::
      Oracle Linux<br/>
       Oracle Linux 4/5<br/>
      Oracle Solaris 10<br/>
       Oracle Solaris 11
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      Red Hat Enterprise Linux 2<br/>
      Red Hat Enterprise Linux 3<br/>
      Red Hat Enterprise Linux 4<br/>
      Red Hat Enterprise Linux 5<br/>
      Red Hat Enterprise Linux 6<br/>
      Red Hat Enterprise Linux 7<br/>
      Red Hat Fedora
   :::column-end:::
:::row-end:::

<!-- BEGIN S - T -->

:::row:::
   :::column span="2":::
      **S–T**
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      SCO OpenServer 5<br/>
      SCO OpenServer 6<br/>
      SCO UnixWare 7
   :::column-end:::
   :::column span="":::
      Serenity Systems eComStation 1<br/>
      Serenity Systems eComStation 2
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      Sun Microsystems Solaris 8<br/>
      Sun Microsystems Solaris 9
   :::column-end:::
   :::column span="":::
      SUSE Linux Enterprise 10<br/>
      SUSE Linux Enterprise 11<br/>
      SUSE Linux Enterprise 12<br/>
      SUSE Linux Enterprise 8/9<br/>
      SUSE Linux Enterprise 11<br/>
      SUSE openSUSE
   :::column-end:::
:::row-end:::

<!-- BEGIN U - Z -->
:::row:::
   :::column span="2":::
      **U–Z**
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      Ubuntu Linux
   :::column-end:::
   :::column span="":::
      VMware ESXi 4<br/>
      VMware ESXi 5<br/>
      VMware ESXi 6
   :::column-end:::
:::row-end:::
:::row:::
   :::column span="":::
      Windows 10<br/>
      Windows 2000<br/>
      Windows 3<br/>
      Windows 7<br/>
      Windows 8<br/>
      Windows 95<br/>
      Windows 98<br/>
      Windows NT<br/>
      Windows Server (R) 2008<br/>
      Windows Server 2003
   :::column-end:::
   :::column span="":::
      Windows Server 2008<br/>
      Windows Server 2008 R2<br/>
      Windows Server 2012<br/>
      Windows Server 2012 R2<br/>
      Windows Server 2016<br/>
      Windows Server 2019<br/>
      Windows Server Threshold<br/>
      Windows Vista<br/>
      Windows Web Server 2008 R2<br/>
      Windows XP Professional
   :::column-end:::
:::row-end:::

## <a name="next-steps"></a>Дальнейшие действия

Изучив это руководство, вы:

> [!div class="checklist"]
> * импортировали серверы в средство "Миграция Azure: оценили сервер с помощью CSV-файла;
> * создали и проверили оценку.

Теперь [разверните устройство](./migrate-appliance.md) для более точной оценки и объедините серверы в группы для более глубокой обработки с помощью [анализа зависимостей](./concepts-dependency-visualization.md).
