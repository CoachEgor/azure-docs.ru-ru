---
title: Поддержка миграции VMware в Azure Migrate
description: Узнайте о поддержке миграции VMware VM в Azure Migrate.
ms.topic: conceptual
ms.date: 04/15/2020
ms.openlocfilehash: eee16b244ae4f9d517bdd42a0b7f37b1494ac480
ms.sourcegitcommit: 31ef5e4d21aa889756fa72b857ca173db727f2c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81538143"
---
# <a name="support-matrix-for-vmware-migration"></a>Матрица поддержки для миграции VMware

В этой статье кратко излагаются параметры поддержки и ограничения для миграции VMwv с [Azure Migrate: Server Migration](migrate-services-overview.md#azure-migrate-server-migration-tool) . Если вы ищете информацию об оценке VMwre VMs для миграции в Azure, просмотрите [матрицу поддержки оценки.](migrate-support-matrix-vmware.md)


## <a name="migration-options"></a>Варианты переноса

Вы можете мигрировать VMware VMs несколькими способами:

- С безагентной миграцией: Мигрировать VMs без необходимости устанавливать что-либо на них. Развертываетесь [прибор Azure Migrate](migrate-appliance.md) для бесагентной миграции.
- С помощью миграции на основе агента: Установите агент на VM для репликации. Для миграции на основе агента необходимо развернуть [прибор репликации.](migrate-replication-appliance.md)

Просмотрите [эту статью,](server-migrate-overview.md) чтобы выяснить, какой метод вы хотите использовать.

## <a name="migration-limitations"></a>Ограничения миграции

- Вы можете выбрать до 10 ВМ одновременно для репликации. Если вы хотите перенести больше машин, то реплицируйте в группах 10.
- При миграции VMware без агента вы можете запустить до 100 репликаций одновременно.

## <a name="agentless-vmware-servers"></a>Серверы Agentless-VMware

**VMware** | **Сведения**
--- | ---
**VMware vCenter Server** | Версия 5.5, 6.0, 6.5, или 6.7.
**VMware vSphere ESXI хост** | Версия 5.5, 6.0, 6.5, или 6.7.
**Разрешения vCenter Server** | Безагентная миграция использует [прибор Migrate.](migrate-appliance.md) Прибор нуждается в этих разрешениях:<br/><br/> - **Datastore.Browse**: Разрешить просмотр файлов журнала VM для устранения неполадок создания и удаления снимков.<br/><br/> - **Datastore.LowLevelFileOperations**: Разрешить читать / писать / удалять / переименовать операции в браузере хранилища данных, чтобы устранить создание и удаление моментального снимка.<br/><br/> - **VirtualMachine.Configuration.DiskChangeTracking**: Разрешить или отключить отслеживание изменений VM дисков, тянуть измененные блоки данных между моментальными снимками.<br/><br/> - **VirtualMachine.Configuration.DiskLease**: Разрешить операции по аренде диска для VM, чтобы прочитать диск с помощью VMware vSphere Виртуальный набор разработки дисков (VDDK).<br/><br/> - **VirtualMachine.Provisioning.AllowDiskAccess**: (специально для vSphere 6.0 и выше) Разрешить открытие диска на VM для случайного доступа к чтению на диске с помощью VDDK.<br/><br/> - **VirtualMachine.Provisioning.AllowReadOnlyDiskAccess**: Разрешить открытие диска на VM, чтобы прочитать диск с помощью VDDK.<br/><br/> - **VirtualMachine.Provisioning.AllowDiskRandomAccess**: Разрешить открытие диска на VM, чтобы прочитать диск с помощью VDDK.<br/><br/> - **VirtualMachine.Provisioning.AllowVirtualMachineDownload:** Позволяет считывать операции на файлах, связанных с VM, скачать журналы и устранить неполадки в случае сбоя.<br/><br/> - «VirtualMachine.SnapshotManagement.»: Разрешить создание и управление снимками VM для репликации.<br/><br/> - **Виртуальная машина.Взаимодействие.Power Off**: Разрешить VM, чтобы быть выключен во время миграции в Azure.



## <a name="agentless-vmware-vms"></a>Agentless-VMware VMs

**Поддержка** | **Сведения**
--- | ---
**Поддерживаемые операционные системы** | Операционные системы [Windows](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines) и [Linux,](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros) поддерживаемые Azure, могут быть перенесены с помощью бесагентной миграции.
**Необходимые изменения для Azure** | Для некоторых виртуальных машин могут потребоваться изменения, позволяющие им работать в Azure. Azure Migrate автоматически вносит эти изменения для следующих операционных систем:<br/> - Red Hat Предприятие Linux 6.5 ", 7.0"<br/> - CentOS 6,5 ", 7,0"</br> - SUSE Linux Enterprise Server 12 SP1<br/> - Ubuntu 14.04LTS, 16.04LTS, 18.04LTS<br/> - Дебиан 7, 8<br/><br/> Для других операционных систем необходимо внести коррективы вручную перед миграцией. Соответствующие статьи содержат инструкции о том, как это сделать.
**Linux загрузки** | Если /загрузка находится на выделенной разгородке, она должна находиться на диске ОС, а не распространяться на несколько дисков.<br/> Если /загрузка является частью корневой (/) раздела, то раздел '/' должен быть на диске ОС, а не охватывать другие диски.
**Загрузка UEFI** | VMs с загрузкой UEFI не поддерживаются для миграции.
**Размер диска** | 2 ТБ ОС диск; 8 ТБ для дисков данных.
**Ограничения диска** |  До 60 дисков на ВМ.
**Зашифрованные диски/объемы** | VMs с зашифрованными дисками/томами не поддерживаются для миграции.
**Кластер общих дисков** | Не поддерживается.
**Независимые диски** | Не поддерживается.
**RDM/проходные диски** | Если у ВМ есть RDM или диски, эти диски не будут реплицироваться в Azure.
**NFS** | Объемы NFS, установленные в виде объемов на ВМ, не будут реплицироваться.
**цели iSCSI** | VMs с целями iSCSI не поддерживаются для бесагентной миграции.
**Мультипат IO** | Не поддерживается.
**Хранение vMotion** | Не поддерживается. Репликация не будет работать, если VM использует хранилище vMotion.
**Объединились NICs** | Не поддерживается.
**IPv6** | Не поддерживается.
**Целевой диск** | ВМ можно перенести только на управляемые диски (стандартный HDD, премиум SSD) в Azure.
**Одновременное репликация** | 100 ВМ на vCenter Server. Если у вас есть больше, мигрируйте их партиями по 100.


## <a name="agentless-azure-migrate-appliance"></a>Прибор "Агент-Лазурный миграция" 

Безагентная миграция использует [прибор Azure Migrate.](migrate-appliance.md) Развертывание прибора в качестве VMWare VM можно с помощью шаблона OVA, импортируемого в vCenter Server или с помощью [скрипта PowerShell.](deploy-appliance-script.md)

- Узнайте о требованиях к [приборам](migrate-appliance.md#appliance---vmware) для VMware.
- Узнайте об URL-адресах, которые необходимо получить в [общедоступных](migrate-appliance.md#public-cloud-urls) и [правительственных](migrate-appliance.md#government-cloud-urls) облаках.
- В правительстве Azure необходимо развернуть прибор с помощью скрипта.

## <a name="agentless-ports"></a>Беспризатые порты

**Устройство** | **Соединение**
--- | ---
прибор. | Исходящие соединения в порту 443 для загрузки реплицированных данных в Azure и связи с службами Azure Migrate, организующие репликацию и миграцию.
Сервер vCenter | Входящие соединения на порту 443 позволяют прибору организовать репликацию - создавать снимки, копировать данные, выпускать снимки
vSphere/EXSI хост | Вход на порт TCP 902 для воспроизведения данных с моментальных снимков.


## <a name="agent-based-vmware-servers"></a>Серверы vMware на основе агента
В этой таблице кратко излагаются поддержка оценки и ограничения для серверов виртуализации VMware.

**Требования к VMware** | **Сведения**
--- | ---
**VMware vCenter Server** | Версия 5.5, 6.0, 6.5, или 6.7.
**VMware vSphere ESXI хост** | Версия 5.5, 6.0, 6.5, или 6.7.
**Разрешения vCenter Server** | Учетная запись только для чтения vCenter Server.

## <a name="agent-based-vmware-vms"></a>Агент основе VMware VMs

В таблице кратко излагается поддержка VMware VM для VMware VMs, которые вы хотите перенести с помощью миграции на основе агента.

**Поддержка** | **Сведения**
--- | ---
**Рабочая нагрузка компьютера** | Azure Migrate поддерживает миграцию любой рабочей нагрузки (нам.Активный каталог, сервер S'L и т.д.), работающего на поддерживаемой машине.
**Операционные системы** | Для получения последней информации просмотрите [поддержку операционной системы](../site-recovery/vmware-physical-azure-support-matrix.md#replicated-machines) для восстановления сайта. Azure Migrate обеспечивает идентичную поддержку операционной системы VM.
**Файловая система Linux/гостевое хранилище** | Для получения последней информации просмотрите [поддержку файловой системы Linux](../site-recovery/vmware-physical-azure-support-matrix.md#linux-file-systemsguest-storage) для восстановления сайта. Azure Migrate имеет идентичную поддержку файловой системы Linux.
**Сеть/Хранение** | Для получения последней информации просмотрите предпосылки для восстановления сайта в [сети](../site-recovery/vmware-physical-azure-support-matrix.md#network) и [хранилищах.](../site-recovery/vmware-physical-azure-support-matrix.md#storage) Azure Migrate обеспечивает одинаковые требования к сети/хранению.
**Требования Azure** | Для получения последней информации просмотрите [требования к сети,](../site-recovery/vmware-physical-azure-support-matrix.md#azure-vm-network-after-failover) [хранению и](../site-recovery/vmware-physical-azure-support-matrix.md#azure-storage) [вычислению](../site-recovery/vmware-physical-azure-support-matrix.md#azure-compute) Azure для восстановления сайта. Azure Migrate имеет одинаковые требования к миграции VMware.
**Служба Mobility Service** | Агент службы мобильности должен быть установлен на каждом VM, который вы хотите перенести.
**Загрузка UEFI** | Мигрированный VM в Azure будет автоматически преобразован в bioS boot VM.<br/><br/> Диск ОС должен иметь до четырех разделов, а объемы должны быть отформатированы с помощью NTFS.
**Целевой диск** | ВМ можно перенести только на управляемые диски (стандартный HDD, премиум SSD) в Azure.
**Размер диска** | 2 ТБ ОС диск; 8 ТБ для дисков данных.
**Ограничения диска** |  До 63 дисков на ВМ.
**Зашифрованные диски/объемы** | VMs с зашифрованными дисками/томами не поддерживаются для миграции.
**Кластер общих дисков** | Не поддерживается.
**Независимые диски** | Поддерживается.
**Проходные диски** | Поддерживается.
**NFS** | Объемы NFS, установленные в виде объемов на ВМ, не будут реплицироваться.
**цели iSCSI** | VMs с целями iSCSI не поддерживаются для бесагентной миграции.
**Мультипат IO** | Не поддерживается.
**Хранение vMotion** | Поддерживается
**Объединились NICs** | Не поддерживается.
**IPv6** | Не поддерживается.




## <a name="agent-based-replication-appliance"></a>Прибор репликации на основе агента 

При настройке устройства репликации с помощью шаблона OVA, предоставленного в концентраторе Azure Migrate, прибор запускает Windows Server 2016 и соответствует требованиям поддержки. Если вы настроили прибор репликации вручную на физическом сервере, убедитесь, что он соответствует требованиям.

- Узнайте о требованиях к [приборам репликации](migrate-replication-appliance.md#appliance-requirements) для VMware.
- MyS'L должен быть установлен на приборе. Узнайте о [вариантах установки.](migrate-replication-appliance.md#mysql-installation)
- Узнайте об URL-адресах, которые необходимо получить в [общедоступных](migrate-replication-appliance.md#url-access) и [правительственных](migrate-replication-appliance.md#azure-government-url-access) облаках.
- Просмотрите [порты,](migrate-replication-appliance.md#port-access) к ним нужно доступ к прибору репликации.

## <a name="agent-based-ports"></a>Порты на основе агента

**Устройство** | **Соединение**
--- | ---
Виртуальные машины | Служба мобильности, работающая на VMs, общается с прибором репликации (сервер конфигурации) на входящих порте HTTPS 443 для управления репликацией.<br/><br/> Виртуальные машины отправляют данные репликации на сервер обработки (запущенный на компьютере сервера конфигурации) через HTTPS-порт 9443 для входящих подключений. Этот порт можно изменить.
Репликационный прибор | Прибор репликации оркеструет репликацию с Azure над исходящим портом HTTPS 443.
Сервер обработки | Сервер процесса получает данные репликации, оптимизирует и шифрует их и отправляет в хранилище Azure через исходящий порт 443.<br/> По умолчанию сервер процесса работает на приборе репликации.

## <a name="azure-vm-requirements"></a>Требования для виртуальных машин Azure

Все предприимчивые VM, реплицированные в Azure, должны соответствовать требованиям Azure VM, обобщенным в этой таблице. Когда восстановление сайта выполняет проверку предпосылок для репликации, проверка не сработает, если некоторые требования не будут выполнены.

**Компонент** | **Требования** | **Сведения**
--- | --- | ---
Операционная система на виртуальной машине | Verifies поддерживает операционные системы VMware VM для миграции.<br/> Можно перенести любую рабочую нагрузку, работающую на поддерживаемой операционной системе. | Если не поддерживается, проверка завершается ошибкой.
Архитектура операционной системы на виртуальной машине | 64-разрядная | Если не поддерживается, проверка завершается ошибкой.
Размер диска операционной системы | До 2048 ГБ | Если не поддерживается, проверка завершается ошибкой.
Число дисков операционной системы | 1 | Если не поддерживается, проверка завершается ошибкой.
Число дисков с данными | 64 ГБ и меньше | Если не поддерживается, проверка завершается ошибкой.
Размер диска данных | До 4095 ГБ | Если не поддерживается, проверка завершается ошибкой.
Сетевые адаптеры | Поддерживаются несколько адаптеров. |
Общий виртуальный жесткий диск | Не поддерживается. | Если не поддерживается, проверка завершается ошибкой.
Диск FC | Не поддерживается. | Если не поддерживается, проверка завершается ошибкой.
BitLocker | Не поддерживается. | Прежде чем включать репликацию для компьютера, необходимо отключить BitLocker.
имя виртуальной машины; | От 1 до 63 символов.<br/> при этом допустимы только буквы, цифры и дефисы<br/><br/> Имя компьютера должно начинаться и заканчиваться буквой или цифрой. |  Обновите значение в свойствах компьютера в службе Site Recovery.
Подключение после миграции-Windows | Для подключения к Пазур VMs под управлением Windows после миграции:<br/> - Перед миграцией позволяет RDP на месте VM. Убедитесь в том, что правила для протоколов TCP и UDP для **общедоступного** профиля добавлены, а протокол RDP разрешен в разделе **Брандмауэр Windows** > **Разрешенные программы** для всех профилей.<br/> Для доступа к VPN от сайта, включить RDP и позволяют RDP в **Windows Firewall** -> **Разрешенные приложения и функции** для **домена и частных** сетей. Кроме того, убедитесь, что политика SAN операционной системы установлена на **OnlineAll**. [Подробнее](prepare-for-migration.md). |
Подключение после миграции-Linux | Для подключения к MMs Azure после миграции с помощью SSH:<br/> Перед миграцией на предварительной машине проверьте, что служба Secure Shell настроена на запуск, и что правила брандмауэра позволяют подключение SSH.<br/> После сбоя в Azure VM разрешить входящие соединения в порт SSH для правил группы сетевой безопасности на сбой над VM, и для подсети Azure, к которой он подключен. Кроме того, добавьте общедоступный IP-адрес для VM. |  


## <a name="next-steps"></a>Следующие шаги

[Выберите](server-migrate-overview.md) опцию миграции VMware.
