---
title: Визуализация зависимостей в службе "Миграция Azure" | Документация Майкрософт
description: Содержит общие сведения о вычислениях оценки в службе оценки серверов в Azure.
author: rayne-wiselman
ms.service: azure-migrate
ms.topic: conceptual
ms.date: 07/18/2019
ms.author: hamusa
ms.openlocfilehash: 8934306efadc4ec732afbb658c081ada30f232cd
ms.sourcegitcommit: f5075cffb60128360a9e2e0a538a29652b409af9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2019
ms.locfileid: "68312221"
---
# <a name="dependency-visualization"></a>Визуализация зависимостей

Миграция Azure: Оценка сервера оценивает группы локальных компьютеров для миграции в Azure. Для создания групп можно использовать функцию визуализации зависимостей в оценке сервера. Данная статья содержит информацию об этой возможности.

> [!NOTE]
> Функция визуализации зависимостей недоступна в Azure для государственных организаций.

## <a name="overview"></a>Обзор

Визуализация зависимостей в оценке сервера позволяет создавать группы с высоким уровнем достоверности для оценки миграции. С помощью визуализации зависимостей можно просматривать сетевые зависимости компьютеров и определять связанные компьютеры, которые необходимо перенести вместе в Azure. Эта функция полезна в сценариях, где вы не полностью осведомлены о компьютерах, которые поддерживают работу вашего приложения, и их необходимо перенести вместе в Azure.

## <a name="before-you-start"></a>Перед началом работы

- Убедитесь, что вы [создали](how-to-add-tool-first-time.md) проект "миграция Azure".
- Если вы уже создали проект, убедитесь, что вы [добавили](how-to-assess.md) службу "миграция Azure": Средство оценки серверов.
- Убедитесь, что ваши компьютеры обнаружены в службе "миграция Azure". Это можно сделать, настроив устройство миграции Azure для [VMware](how-to-set-up-appliance-vmware.md) или [Hyper-V](how-to-set-up-appliance-hyper-v.md). Устройство обнаруживает локальные компьютеры и отправляет метаданные и данные производительности в службу "миграция Azure": Оценка сервера. [Узнайте больше](migrate-appliance.md).

## <a name="how-does-it-work"></a>Как это работает?

Служба "миграция Azure" использует решение [сопоставление служб](../operations-management-suite/operations-management-suite-service-map.md) в [журналах Azure Monitor](../log-analytics/log-analytics-overview.md) для визуализации зависимостей.
- Чтобы использовать визуализацию зависимостей, необходимо связать новую или существующую рабочую область Log Analytics с проектом службы "Миграция Azure".
- Вы можете создать или подключить рабочую область только в той же подписке, в которой создан проект службы "миграция Azure".
- Чтобы подключить рабочую область Log Analytics к проекту, выполните следующие действия.
    1. На вкладке **серверы** в **службе "миграция Azure" выполните следующие действия. Плитка** "Оценка сервера" щелкните **Обзор**.
    2. В разделе **Обзор**щелкните стрелку вниз, чтобы развернуть раздел **основные компоненты**.
    3. В **рабочей области OMS**щелкните **требуется настройка**.
    4. В окне **Настройка рабочей области**укажите, хотите ли вы создать новую рабочую область или использовать существующую.
    
    ![Добавить рабочую область](./media/how-to-create-group-machine-dependencies/workspace.png)

- Во время связывания вы можете создать рабочую область или присоединить имеющуюся.
  - Когда вы создаете рабочую область, необходимо указать ее имя. Рабочая область создается в том же [географическом регионе Azure](https://azure.microsoft.com/global-infrastructure/geographies/), что и проект миграции.
  - При подключении имеющейся рабочей области вы можете выбрать нужную из всех доступных рабочих областей в той же подписке, что и проект миграции. Обратите внимание, что в списке указаны только рабочие области, созданные в регионе, в котором [поддерживается решение "Сопоставление служб"](https://docs.microsoft.com/azure/azure-monitor/insights/service-map-configure#supported-azure-regions). Чтобы подключить рабочую область, необходим доступ к ней с ролью "Читатель".

  > [!NOTE]
  > После присоединения к проекту рабочую область нельзя изменять.

- Связанная рабочая область помечается с помощью ключа **Проект миграции** и значения **Имя проекта**, которые можно использовать для поиска на портале Azure.
- Чтобы перейти к рабочей области, связанной с проектом, можно перейти в раздел **Основное** на странице **Обзор** проекта и получить доступ к рабочей области.

    ![Переход к рабочей области Log Analytics](./media/concepts-dependency-visualization/oms-workspace.png)

Чтобы использовать визуализацию зависимостей, необходимо скачать и установить агенты на каждом локальном компьютере, который нужно проанализировать.  

- Агент [Microsoft Monitoring Agent (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows) должен быть установлен на каждом компьютере. Дополнительные [сведения](https://docs.microsoft.com/azure/migrate/how-to-create-group-machine-dependencies#install-the-mma) об установке агента MMA.
- Программа [Dependency Agent](https://docs.microsoft.com/azure/monitoring/monitoring-service-map-configure) должна быть установлена на каждом компьютере. Дополнительные [сведения](https://docs.microsoft.com/azure/migrate/how-to-create-group-machine-dependencies#install-the-dependency-agent) об установке агента зависимостей.
- Кроме того, если у вас есть компьютеры без подключения к Интернету, необходимо скачать и установить на них шлюз Log Analytics.

Если вы не используете визуализацию зависимостей, эти агенты не нужны на компьютерах, которые вы хотите оценить.

## <a name="do-i-need-to-pay-for-it"></a>Будет ли взиматься плата за это?

Функция визуализации зависимостей доступна без дополнительной платы. Для использования функции визуализации зависимостей в оценке сервера требуется Сопоставление служб и необходимо связать Log Analyticsную рабочую область (новую или существующую) с проектом службы "миграция Azure". Функция визуализации зависимостей в оценке сервера предоставляется бесплатно в течение первых 180 дней.

1. За использование в этой рабочей области Log Analytics любого другого решения, помимо "Сопоставление служб", взимается [стандартная плата Log Analytics](https://azure.microsoft.com/pricing/details/log-analytics/).
2. Для поддержки сценариев миграции без дополнительной платы решение "Сопоставление служб" не тарифицируется первые 180 дней со дня присоединения рабочей области Log Analytics к проекту службы "Миграция Azure". По истечении 180 дней применяются стандартные тарифы Log Analytics.

Регистрируя агенты в рабочей области, используйте идентификатор и ключ, выданный проектом на странице установки агента.

При удалении проекта "Миграция Azure" рабочая область не будет удалена. После удаления проекта за использование решения "Сопоставление служб" будет взиматься плата за каждый узел в соответствии с ценовым уровнем рабочей области Log Analytics.

> [!NOTE]
> Компонент "Визуализация зависимостей" использует решение "Сопоставление служб" с помощью рабочей области Log Analytics. С 28 февраля 2018 г. после объявления об общедоступной службы "Миграция Azure" компонент доступен без дополнительной платы. Необходимо создать новый проект, чтобы использовать бесплатную рабочую область. За рабочие области, которые существовали до объявления об общедоступной версии, по-прежнему нужно платить. Поэтому рекомендуем переместить их в новый проект.

См. дополнительные сведения о [ценах на Миграцию Azure](https://azure.microsoft.com/pricing/details/azure-migrate/).

## <a name="how-do-i-manage-the-workspace"></a>Как управлять рабочей областью?

Рабочую область Log Analytics можно использовать за пределами службы "Миграция Azure". При удалении проекта службы "миграция Azure", в котором он был создан, он не удаляется. Если эта рабочая область больше не нужна, [удалите](../azure-monitor/platform/manage-access.md) ее вручную.

Не удаляйте рабочую область, созданную службой "миграция Azure", если вы не удалите проект службы "миграция Azure". В противном случае функция визуализации зависимостей не будет работать должным образом.

## <a name="next-steps"></a>Следующие шаги
- [Группирование компьютеров на основе зависимостей](how-to-create-group-machine-dependencies.md)
- [Вопросы и ответы](https://docs.microsoft.com/azure/migrate/resources-faq#what-is-dependency-visualization) о визуализации зависимостей.
