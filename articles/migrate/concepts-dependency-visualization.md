---
title: Визуализация зависимостей в службе "Миграция Azure"
description: Содержит общие сведения о вычислениях оценки в службе оценки серверов в Azure.
ms.topic: conceptual
ms.date: 02/24/2020
ms.openlocfilehash: fd069ed98fa34fd6f281c98a061925f96c7bb2cd
ms.sourcegitcommit: 7b25c9981b52c385af77feb022825c1be6ff55bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79269709"
---
# <a name="dependency-visualization"></a>Визуализация зависимостей

В этой статье описывается Визуализация зависимостей в службе "миграция Azure": Оценка сервера.

## <a name="what-is-dependency-visualization"></a>Что такое визуализация зависимостей?

Визуализация зависимостей помогает определить зависимости между локальными компьютерами, которые вы хотите оценить и перенести в Azure. 

- В службе "миграция Azure": Оценка серверов. вы собираете компьютеры в группу, а затем оцениваете группу. Визуализация зависимостей позволяет более точно группировать компьютеры с высокой достоверностью для оценки.
- Визуализация зависимостей позволяет определять компьютеры, которые необходимо перенести вместе. Можно определить, используются ли компьютеры, или же они могут быть списаны вместо миграции.
- Визуализация зависимостей позволяет убедиться, что ничего не осталось, и избежать неожиданных сбоев во время миграции.
- Визуализация особенно полезна, если вы не уверены, являются ли компьютеры частью развертывания приложения, которое требуется перенести в Azure.


> [!NOTE]
> Визуализация зависимостей недоступна в Azure для государственных организаций.

## <a name="agent-basedagentless-visualization"></a>Визуализация на основе агента или без агента

Существует два варианта развертывания визуализации зависимостей:

- **На основе агентов**: Визуализация зависимостей на основе агентов требует установки агентов на каждом локальном компьютере, который необходимо проанализировать.
- Без **агента**. в этом случае вам не нужно устанавливать агенты на компьютерах, которые требуется перекрестно проверить. Сейчас этот параметр находится на этапе предварительной версии и доступен только для виртуальных машин VMware.


## <a name="agent-based-visualization"></a>Визуализация на основе агента

**Требование** | **Сведения** | **Дополнительные сведения**
--- | --- | ---
**Перед развертыванием** | У вас должен быть проект "миграция Azure" на месте с помощью средства "миграция Azure", добавленного в проект.<br/><br/>  Визуализация зависимостей развертывается после настройки устройства миграции Azure для обнаружения локальных компьютеров. | [Узнайте, как](create-manage-projects.md) создать проект в первый раз.<br/><br/> [Узнайте, как](how-to-assess.md) добавить средство оценки в существующий проект.<br/><br/> Узнайте, как настроить устройство "миграция Azure" для оценки [Hyper-V](how-to-set-up-appliance-hyper-v.md), [VMware](how-to-set-up-appliance-vmware.md)или физических серверов.
**Обязательные агенты** | На каждом компьютере, который необходимо проанализировать, установите следующие агенты:<br/><br/> [Microsoft Monitoring Agent (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows).<br/><br/> [Агент зависимостей](../azure-monitor/platform/agents-overview.md#dependency-agent).<br/><br/> Если локальные компьютеры не подключены к Интернету, необходимо скачать и установить шлюз Log Analytics. | Дополнительные сведения об установке [агента зависимостей](how-to-create-group-machine-dependencies.md#install-the-dependency-agent) и [MMA](how-to-create-group-machine-dependencies.md#install-the-mma).
**Служба Log Analytics** | Служба "миграция Azure" использует решение [сопоставление служб](../operations-management-suite/operations-management-suite-service-map.md) в [журналах Azure Monitor](../log-analytics/log-analytics-overview.md) для визуализации зависимостей.<br/><br/> Вы связываете новую или существующую рабочую область Log Analytics с проектом службы "миграция Azure". Рабочую область для проекта службы "миграция Azure" нельзя изменить после добавления. <br/><br/> Рабочая область должна находиться в той же подписке, что и проект службы "миграция Azure".<br/><br/> Рабочая область должна находиться в регионах восточной части США, Юго-Восточной Азии или Западной Европы. Рабочие области в других регионах не могут быть связаны с проектом.<br/><br/> Рабочая область должна находиться в регионе, в котором [поддерживается сопоставление служб](../azure-monitor/insights/vminsights-enable-overview.md#prerequisites).<br/><br/> В Log Analytics рабочей области, связанной с миграцией Azure, помечается ключ проекта миграции и имя проекта.
**Держек** | На Сопоставление служб решение не взимается плата за первые 180 дней (с дня, когда вы связываете рабочую область Log Analytics с проектом "миграция Azure")/<br/><br/> По истечении 180 дней применяются стандартные тарифы Log Analytics.<br/><br/> При использовании любого решения, кроме Сопоставление служб в связанной Log Analytics рабочей области, будет взиматься [стандартная плата](https://azure.microsoft.com/pricing/details/log-analytics/) за log Analytics.<br/><br/> При удалении проекта "Миграция Azure" рабочая область не будет удалена. После удаления проекта Сопоставление служб использование не освобождается, и каждый узел будет оплачиваться согласно платному уровню Log Analytics рабочей области/<br/><br/>Если у вас есть проекты, созданные до того, как Azure перейдет в общедоступную версию (от-28 февраля 2018 г.), может взиматься дополнительная плата за Сопоставление служб. Чтобы обеспечить оплату только через 180 дней, рекомендуется создать новый проект, так как существующие рабочие области будут по-прежнему взиматься.
**Управление** | При регистрации агентов в рабочей области вы используете идентификатор и ключ, предоставленные проектом "миграция Azure".<br/><br/> Рабочую область Log Analytics можно использовать за пределами службы "Миграция Azure".<br/><br/> При удалении связанного проекта службы "миграция Azure" Рабочая область не удаляется автоматически. [Удалите его вручную](../azure-monitor/platform/manage-access.md).<br/><br/> Не удаляйте рабочую область, созданную службой "миграция Azure", если вы не удалите проект службы "миграция Azure". В противном случае функция визуализации зависимостей не будет работать должным образом.

## <a name="agentless-visualization"></a>Визуализация без агента


**Требование** | **Сведения** | **Дополнительные сведения**
--- | --- | ---
**Перед развертыванием** | У вас должен быть проект "миграция Azure" на месте с помощью средства "миграция Azure", добавленного в проект.<br/><br/>  Визуализация зависимостей развертывается после настройки устройства миграции Azure для обнаружения локальных компьютеров VMWare. | [Узнайте, как](create-manage-projects.md) создать проект в первый раз.<br/><br/> [Узнайте, как](how-to-assess.md) добавить средство оценки в существующий проект.<br/><br/> Узнайте, как настроить устройство "миграция Azure" для оценки виртуальных машин [VMware](how-to-set-up-appliance-vmware.md) .
**Обязательные агенты** | На компьютерах, которые вы хотите проанализировать, не требуется агент.
**Поддерживаемые операционные системы** | Ознакомьтесь с [операционными системами](migrate-support-matrix-vmware.md#agentless-dependency-visualization) , поддерживаемыми для визуализации без агента.
**Виртуальные машины** | **Средства VMware**. на виртуальных машинах, которые вы хотите проанализировать, должны быть установлены и запускаться средства VMware.<br/><br/> **Учетная запись**: на устройстве "миграция Azure" необходимо добавить учетную запись пользователя, которая может использоваться для доступа к виртуальным машинам для анализа.<br/><br/> **Виртуальные машины Windows**. учетная запись пользователя должна быть локальной или администратором домена на компьютере.<br/><br/> **Виртуальные машины Linux**. для учетной записи требуются полномочия root. Кроме того, учетная запись пользователя должна иметь следующие две возможности в файлах/бин/нетстат и/бин/ЛС: CAP_DAC_READ_SEARCH и CAP_SYS_PTRACE. | [Дополнительные сведения об](migrate-appliance.md) устройстве миграции Azure.
**VMware** | **vCenter**: для устройства требуется учетная запись vCenter Server с доступом только для чтения, а для виртуальных машин > гостевых операций разрешены права доступа.<br/><br/> **Узлы ESXi**: на узлах ESXi, на которых выполняются виртуальные машины, которые нужно проанализировать, устройство миграции Azure должно иметь возможность подключения к TCP-порту 443.
**Собранные данные** |  Анализ зависимостей без агента работает путем записи данных о подключении TCP с компьютеров, на которых он включен. После включения обнаружения зависимостей устройство собирает данные TCP-подключений каждые 5 минут от гостевых виртуальных машин. Эти данные собираются с гостевых виртуальных машин через vCenter Server с помощью API-интерфейсов vSphere. Собранные данные обрабатываются на устройстве, чтобы вывести сведения о зависимостях и отправлять их в службу "миграция Azure" каждые 6 часов. С каждого компьютера собираются следующие данные: <br/> — Имена процессов, имеющих активные соединения.<br/> — Имена приложений, которые запускают процесс с активными соединениями.<br/> — Порт назначения для активных подключений.


## <a name="next-steps"></a>Дальнейшие действия
- [Настройка визуализации зависимостей](how-to-create-group-machine-dependencies.md)
- [Испытайте визуализацию зависимостей без агента](how-to-create-group-machine-dependencies-agentless.md) для виртуальных машин VMware.
- Ознакомьтесь с [общими вопросами](common-questions-discovery-assessment.md#what-is-dependency-visualization) о визуализации зависимостей.


