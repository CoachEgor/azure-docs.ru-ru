---
title: Анализ зависимостей при оценке миграционных серверов Azure
description: Описывает, как использовать анализ зависимостей для оценки с помощью оценки Azure Migrate Server.
ms.topic: conceptual
ms.date: 04/15/2020
ms.openlocfilehash: f0b956620895ae2264b53916015d440f5e586eb2
ms.sourcegitcommit: 75089113827229663afed75b8364ab5212d67323
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2020
ms.locfileid: "82024767"
---
# <a name="dependency-analysis"></a>Анализ зависимостей

В этой статье описывается анализ зависимостей в Azure Migrate:Server Assessment.

## <a name="overview"></a>Обзор

Анализ зависимостей помогает определить зависимости между прививными машинами, которые вы хотите оценить и перенести в Azure. 

- В Azure Migrate:Server Assessment вы собираете машины в группу, а затем оцениваете группу. Анализ зависимостей помогает вам более точно группировать машины, с высокой уверенностью в оценке.
- Анализ зависимостей позволяет идентифицировать машины, которые необходимо мигрировать вместе. Можно определить, используются ли машины, или же они могут быть списаны, а не перенесены.
- Анализ зависимостей помогает гарантировать, что ничего не осталось позади, и избежать внезапных отключений во время миграции.
- Анализ особенно полезен, если вы не уверены, являются ли машины частью развертывания приложения, которое требуется перенести в Azure.
- [Просмотрите](common-questions-discovery-assessment.md#what-is-dependency-visualization) общие вопросы об анализе зависимостей.

Существует два варианта развертывания анализа зависимостей

- **Анализ**зависимости на основе агента требует установки агентов на каждую компьютерную машину, которую вы хотите проанализировать.
- **Без агента**: С безагентным анализом, вам не нужно устанавливать агенты на машины, которые вы хотите перепроверить. Эта опция в настоящее время находится в предварительном просмотре и доступна только для VMware VMs.

> [!NOTE]
> Анализ зависимости на основе агента недоступен в правительстве Azure. Можно использовать анализ зависимости без агента.

## <a name="agentless-analysis"></a>Безагентный анализ

Анализ зависимостей без бессилия работает путем захвата данных о подключении TCP с машин, для которых он включен. На машинах, которые необходимо анализировать, не установлены агенты.

### <a name="collected-data"></a>Собранные данные

После начала обнаружения зависимости прибор каждые пять минут высылает данные из машин для сбора данных. Эти данные собираются с гостевых ВМ через vCenter Server, используя AIS vSphere. Собранные данные обрабатываются на приборе Azure Migrate для вывода идентификационных данных и отправляются в Azure Migrate каждые шесть часов.

Опрос собирает эти данные из машин: 
- Название процессов, которые имеют активные соединения.
- Название приложения, которое работает процессы, которые имеют активные соединения.
- Порт назначения на активных соединениях.

## <a name="agent-based-analysis"></a>Анализ на основе агента

Для анализа на основе агентов Server Assessment использует [решение Карты обслуживания](../azure-monitor/insights/service-map.md) в Azure Monitor для обеспечения визуализации и анализа зависимостей. [Агент Microsoft Мониторинг /Log Analytics](../azure-monitor/platform/agents-overview.md#log-analytics-agent) и агент [зависимости](../azure-monitor/platform/agents-overview.md#dependency-agent)должны быть установлены на каждой машине, которую вы хотите проанализировать.

### <a name="collected-data"></a>Собранные данные

Для анализа на основе агентов собираются следующие данные:

- Имя сервера исходного кода, процесс, имя приложения.
- Имя сервера назначения, процесс, имя приложения и порт.
- Количество информации о соединениях, задержках и передаче данных собирается и доступно для запросов Log Analytics. 


## <a name="compare-agentless-and-agent-based"></a>Сравните без агента и агента на основе

Различия между безагентной визуализацией и визуализацией на основе агента суммируются в таблице.

**Требование** | **Безагентное** | **Агентская**
--- | --- | ---
Поддержка | Эта опция в настоящее время находится в предварительном просмотре и доступна только для VMware VMs. [Обзор](migrate-support-matrix-vmware.md#agentless-dependency-analysis-requirements) поддерживается операционных систем. | В целом доступность (GA).
Агент | Нет необходимости устанавливать агенты на машины, которые вы хотите перепроверить. | Агенты, которые будут установлены на каждой предварительной машине, которую вы хотите проанализировать: [Агент мониторинга Майкрософт (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows)и [агент зависимости.](https://docs.microsoft.com/azure/azure-monitor/platform/agents-overview#dependency-agent) 
Log Analytics | Необязательно. | Azure Migrate использует решение [карты обслуживания](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-service-map) в [журналах Azure Monitor](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) для анализа зависимостей. 
Принцип работы | Захватывает данные о подключении TCP на машинах, включенных для визуализации зависимостей. После обнаружения он собирает данные с интервалом в пять минут. | Агенты карты обслуживания, установленные на машине, собирают данные о процессах TCP и входящих/исходящих соединениях для каждого процесса.
Данные | Имя сервера исходного кода, процесс, имя приложения.<br/><br/> Имя сервера назначения, процесс, имя приложения и порт. | Имя сервера исходного кода, процесс, имя приложения.<br/><br/> Имя сервера назначения, процесс, имя приложения и порт.<br/><br/> Количество информации о соединениях, задержках и передаче данных собирается и доступно для запросов Log Analytics. 
Визуализация: | Карта зависимости одного сервера может просматриваться в течение одного часа до 30 дней. | Карта зависимости одного сервера.<br/><br/> Карту можно просматривать только за час.<br/><br/> Карта зависимости группы серверов.<br/><br/> Добавление и удаление серверов в группе из представления карты.
Экспорт данных | В настоящее время не может быть загружен в табулярном формате. | Данные можно запрашивать с помощью log Analytics.



## <a name="next-steps"></a>Дальнейшие действия
- Просмотрите требования к настройке анализа на основе агентов для [VMware VMs,](migrate-support-matrix-vmware.md#agent-based-dependency-analysis-requirements) [физических серверов](migrate-support-matrix-physical.md#agent-based-dependency-analysis-requirements)и [VMs-технологий Hyper-V.](migrate-support-matrix-hyper-v.md#agent-based-dependency-analysis-requirements)
- [Просмотрите](migrate-support-matrix-vmware.md#agentless-dependency-analysis-requirements) требования к безагентного анализа VMware VMs.
- [Настройка](how-to-create-group-machine-dependencies.md) визуализации зависимостей на основе агента
- [Попробуйте](how-to-create-group-machine-dependencies-agentless.md) визуализацию зависимости без агента для VMware VMs.
- Просмотрите [общие вопросы](common-questions-discovery-assessment.md#what-is-dependency-visualization) о визуализации зависимостей.


