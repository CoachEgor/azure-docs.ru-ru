---
title: Визуализация зависимостей в службе "Миграция Azure"
description: Содержит общие сведения о вычислениях оценки в службе оценки серверов в Azure.
author: rayne-wiselman
ms.service: azure-migrate
ms.topic: conceptual
ms.date: 10/23/2019
ms.author: hamusa
ms.openlocfilehash: 75b2120b9fef904114d532e83d571c08e1a1034d
ms.sourcegitcommit: aee08b05a4e72b192a6e62a8fb581a7b08b9c02a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/09/2020
ms.locfileid: "75772318"
---
# <a name="dependency-visualization"></a>Визуализация зависимостей

В этой статье описывается функция визуализации зависимостей в службе "миграция Azure": Оценка сервера.

Визуализация зависимостей помогает понять зависимости между компьютерами, которые необходимо оценить и перенести. Сопоставление зависимостей обычно используется, если требуется оценить компьютеры с более высоким уровнем достоверности.

- В службе "миграция Azure": Оценка серверов позволяет собирать компьютеры вместе в группы для оценки. Обычно группы состоят из компьютеров, которые требуется перенести вместе, и Визуализация зависимостей помогает перекрестно проверить зависимости компьютеров, чтобы можно было точно сгруппировать компьютеры.
- С помощью визуализации можно обнаружить взаимозависимые системы, которые необходимо перенести вместе. Можно определить, используются ли используемые системы, а также можно ли высписать системы вместо переноса.
- Визуализация зависимостей позволяет убедиться, что ничего не осталось, и избежать неожиданных сбоев во время миграции.
- Эта функция особенно полезна, если вы не полностью осведомлены о компьютерах, входящих в состав приложений, и поэтому их следует перенести вместе в Azure.


> [!NOTE]
> Функция визуализации зависимостей недоступна в Azure для государственных организаций.

## <a name="agent-based-and-agentless"></a>На основе агентов и без агента

Существует два варианта развертывания визуализации зависимостей:

- **Визуализация зависимостей без агента**. Сейчас этот параметр доступен в режиме предварительной версии, и его можно использовать только для виртуальных машин VMware. Для этого не требуется устанавливать агенты на компьютерах. 
    - Он работает путем записи данных о подключении TCP с компьютеров, для которых он включен. [Узнайте больше](how-to-create-group-machine-dependencies-agentless.md).
После запуска обнаружения зависимостей устройство собирает данные с компьютеров через интервал опроса, равный пяти минутам.
    - Собираются следующие данные:
        - TCP-подключения
        - Имена процессов, имеющих активные соединения
        - Имена установленных приложений, запускающих описанные выше процессы
        - Нет. подключений, обнаруженных при каждом интервале опроса
- **Визуализация зависимостей на основе агентов**. чтобы использовать визуализацию зависимостей на основе агента, необходимо скачать и установить следующие агенты на каждом локальном компьютере, который необходимо проанализировать.  
    - [Агент Microsoft Monitoring Agent (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows) должен быть установлен на каждом компьютере. Дополнительные [сведения](https://docs.microsoft.com/azure/migrate/how-to-create-group-machine-dependencies#install-the-mma) об установке агента MMA.
    - Программа [Dependency Agent](../azure-monitor/platform/agents-overview.md#dependency-agent) должна быть установлена на каждом компьютере. Дополнительные [сведения](https://docs.microsoft.com/azure/migrate/how-to-create-group-machine-dependencies#install-the-dependency-agent) об установке агента зависимостей.
    - Кроме того, если у вас есть компьютеры без подключения к Интернету, необходимо скачать и установить на них шлюз Log Analytics.

## <a name="agent-based-requirements"></a>Требования на основе агента

### <a name="what-do-i-need-to-deploy-dependency-visualization"></a>Что нужно для развертывания визуализации зависимостей?

Перед развертыванием визуализации зависимостей необходимо иметь проект службы "миграция Azure" на месте с добавлением в проект средства оценки Azure: Server. Визуализация зависимостей развертывается после настройки устройства миграции Azure для обнаружения локальных компьютеров.

Дополнительные [сведения](how-to-assess.md) о добавлении средства и развертывании устройства для [Hyper-V](how-to-set-up-appliance-hyper-v.md), [VMware](how-to-set-up-appliance-vmware.md)или физических серверов.


### <a name="how-does-it-work"></a>Как это работает?

Служба "миграция Azure" использует решение [сопоставление служб](../operations-management-suite/operations-management-suite-service-map.md) в [журналах Azure Monitor](../log-analytics/log-analytics-overview.md) для визуализации зависимостей.

- Чтобы использовать визуализацию зависимостей, необходимо связать рабочую область Log Analytics (новую или существующую) с проектом службы "миграция Azure".
- Рабочая область должна находиться в той же подписке, в которой вы создадите проект "миграция Azure".
- Служба "миграция Azure" поддерживает рабочие области в регионах "Восточная часть США", "Юго-Восточная Азия" и "Западная Европа". Рабочие области в других регионах не могут быть связаны с проектом. Кроме того, обратите внимание, что Рабочая область должна находиться в регионе, в котором [поддерживается сопоставление служб](../azure-monitor/insights/vminsights-enable-overview.md#prerequisites).
- Рабочую область для проекта службы "миграция Azure" нельзя изменить после добавления.
- В Log Analytics рабочей области, связанной с миграцией Azure, помечается ключ проекта миграции и имя проекта.

    ![Переход к рабочей области Log Analytics](./media/concepts-dependency-visualization/oms-workspace.png)



### <a name="do-i-need-to-pay-for-it"></a>Будет ли взиматься плата за это?

Для визуализации зависимостей требуются Сопоставление служб и связанная Log Analytics рабочей области. 

- На Сопоставление служб решение не взимается плата за первые 180 дней. Это относится к дню, связанному с рабочей областью Log Analytics с проектом "миграция Azure".
- По истечении 180 дней применяются стандартные тарифы Log Analytics.
- При использовании любого решения, кроме Сопоставление служб в связанной Log Analytics рабочей области, будет взиматься стандартная плата за [log Analytics](https://azure.microsoft.com/pricing/details/log-analytics/) .
- При удалении проекта "Миграция Azure" рабочая область не будет удалена. После удаления проекта Сопоставление служб использование не освобождается, и каждый узел будет оплачиваться согласно платному уровню Log Analytics рабочей области.

См. дополнительные сведения о [ценах на Миграцию Azure](https://azure.microsoft.com/pricing/details/azure-migrate/).

> [!NOTE]
> Если у вас есть проекты, созданные до того, как Azure переносит общую доступность в течение 28 февраля 2018 г., может взиматься дополнительная Сопоставление служб плата. Чтобы обеспечить оплату только через 180 дней, рекомендуется создать новый проект, так как существующие рабочие области до выпуска общедоступной версии будут по-прежнему взиматься.



### <a name="how-do-i-manage-the-workspace"></a>Как управлять рабочей областью?

- При регистрации агентов в рабочей области вы используете идентификатор и ключ, предоставленные проектом "миграция Azure".
- Рабочую область Log Analytics можно использовать за пределами службы "Миграция Azure".
- При удалении связанного проекта службы "миграция Azure" Рабочая область не удаляется автоматически. [Его необходимо удалить вручную](../azure-monitor/platform/manage-access.md).
- Не удаляйте рабочую область, созданную службой "миграция Azure", если вы не удалите проект службы "миграция Azure". В противном случае функция визуализации зависимостей не будет работать должным образом.

## <a name="next-steps"></a>Дальнейшие действия
- [Группирование компьютеров на основе зависимостей](how-to-create-group-machine-dependencies.md)
- [Вопросы и ответы](common-questions-discovery-assessment.md#what-is-dependency-visualization) о визуализации зависимостей.


