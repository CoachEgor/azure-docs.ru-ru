---
title: Обеспечить непрерывность бизнеса & аварийного восстановления с помощью регионов, в паре с Azure
description: Обеспечить устойчивость приложений с помощью регионального сопряжения Azure
author: jpconnock
manager: angrobe
ms.service: multiple
ms.topic: conceptual
ms.date: 03/03/2020
ms.author: jeconnoc
ms.openlocfilehash: 778943dad9a04632797d5d9165b6f1f9a3eb9850
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79248259"
---
# <a name="business-continuity-and-disaster-recovery-bcdr-azure-paired-regions"></a>Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure

## <a name="what-are-paired-regions"></a>Что такое пары регионов?

Область Azure состоит из набора центров обработки данных, развернутых в пределах определяемого по периметру задержки и соединенных через специальную сеть с низкой задержкой.  Это гарантирует, что службы Azure в регионе Azure обеспечивают максимально возможную производительность и безопасность.  

География Azure определяет область мира, содержащую по крайней мере один регион Azure. Географические регионы определяют дискретный рынок, обычно содержащий два или более регионов, которые сохраняют границы резидентства данных и соответствия требованиям.  Более подробную информацию о глобальной инфраструктуре Azure можно найти [здесь](https://azure.microsoft.com/global-infrastructure/regions/)

Региональная пара состоит из двух регионов в рамках одной географии. Azure сериализирует обновления платформы (плановое обслуживание) в региональных парах, гарантируя, что только один регион в каждой паре обновляется одновременно. Если сбой затрагивает несколько регионов, по крайней мере один регион в каждой паре будет приоритетным для восстановления.

![AzureGeography](./media/best-practices-availability-paired-regions/GeoRegionDataCenter.png)

Некоторые службы Azure дополнительно используют парные регионы для обеспечения непрерывности бизнеса и защиты от потери данных.  Azure предоставляет несколько [решений для хранения данных,](./storage/common/storage-redundancy.md#redundancy-in-a-secondary-region) которые используют преимущества парных регионов для обеспечения доступности данных. Например, [Azure Geo-избыток хранилища](./storage/common/storage-redundancy.md#geo-redundant-storage) (GRS) автоматически воспроизводит данные во вторичную область, гарантируя, что данные долговечны даже в том случае, если основная область не может быть восстановлена. 

Обратите внимание, что не все службы Azure автоматически реплицируют данные, равно как и не все службы Azure автоматически отступают из неисправного региона в свою пару.  В таких случаях восстановление и репликация должны быть настроены клиентом.

## <a name="can-i-select-my-regional-pairs"></a>Могу ли я выбрать свои региональные пары?

Нет. Некоторые службы Azure полагаются на региональные пары, такие как [избыточное хранилище](./storage/common/storage-redundancy.md)Azure. Эти службы не позволяют создавать новые региональные пары.  Аналогичным образом, поскольку Azure контролирует запланированное техническое обслуживание и приоритеты восстановления для региональных пар, вы не можете определить свои собственные региональные пары, чтобы воспользоваться этими услугами. Тем не менее, вы можете создать собственное решение для аварийного восстановления, создав службы в любом количестве регионов и используя службы Azure для их сопряжения. 

Например, можно использовать службы Azure, такие как [AzCopy,](./storage/common/storage-use-azcopy-v10.md) для планирования резервных копий данных для учетной записи хранилища в другом регионе.  Используя [Azure DNS и Azure Traffic Manager,](./networking/disaster-recovery-dns-traffic-manager.md)клиенты могут разработать устойчивую архитектуру для своих приложений, которая переживет потерю основного региона.

## <a name="am-i-limited-to-using-services-within-my-regional-pairs"></a>Ограничиваюсь ли я использованием услуг в рамках моих региональных пар?

Нет. В то время как данная служба Azure может полагаться на региональную пару, вы можете размещать другие службы в любом регионе, удовлетворяя потребности вашего бизнеса.  Решение для хранения данных Azure GRS может совмещать данные в Центральном Канаде с одноранговым испарением в Канаде на востоке при использовании ресурсов Compute, расположенных в Восточной части США.  

## <a name="must-i-use-azure-regional-pairs"></a>Должен ли я использовать региональные пары Azure?

Нет. Клиенты могут использовать службы Azure для архитектора устойчивой службы, не полагаясь на региональные пары Azure.  Тем не менее, мы рекомендуем настроить восстановление непрерывности бизнеса (BCDR) в региональных парах, чтобы извлечь выгоду из [изоляции](./security/fundamentals/isolation-choices.md) и улучшить [доступность.](./availability-zones/az-overview.md) Для приложений, которые поддерживают несколько активных областей, рекомендуется использовать оба региона в паре, если это возможно. Это обеспечивает оптимальную доступность приложений и минимизируемое время восстановления в случае аварии. Когда это возможно, проектируйте приложение для [максимальной устойчивости](https://docs.microsoft.com/azure/architecture/framework/resiliency/overview) и простоты [аварийного восстановления.](https://docs.microsoft.com/azure/architecture/framework/resiliency/backup-and-recovery)

## <a name="azure-regional-pairs"></a>Региональные пары Azure

| Geography | Региональная пара A | Региональная пара B  |
|:--- |:--- |:--- |
| Азиатско-Тихоокеанский регион |Восточная Азия (Гонконг) | юго-восточная Азия (Сингапур) |
| Австралия |Восточная Австралия |Юго-Восточная часть Австралии |
| Австралия |Центральная Австралия |Центральная Австралия 2 |
| Бразилия |Южная Бразилия |Центрально-южная часть США |
| Canada |Центральная Канада |Восточная Канада |
| Китай |Северный Китай |Восточный Китай|
| Китай |Северный Китай 2 |Восточный Китай 2|
| Европа |Северная Европа (Ирландия) |Западная Европа (Нидерланды) |
| Франция |Центральная Франция|Южная Франция|
| Германия |Центральная Германия |Северо-восточная Германия |
| Индия |Центральная Индия |Южная Индия |
| Индия |Западная Индия |Южная Индия |
| Япония |Восточная Япония |Западная Япония |
| Корея |Республика Корея, центральный регион |Республика Корея, южный регион |
| Северная Америка |Восточная часть США |западная часть США |
| Северная Америка |восточная часть США 2 |Центральная часть США |
| Северная Америка |Центрально-северная часть США |Центрально-южная часть США |
| Северная Америка |западная часть США 2 |центрально-западная часть США |
| Норвегия | Восточная Норвегия; | Норвегия Запад |
| ЮАР | Северная часть ЮАР; |Западная часть Африки |
| Швейцария | Швейцария Север |Швейцария Запад |
| Соединенное Королевство |западная часть Соединенного Королевства |южная часть Соединенного Королевства |
| ОАЭ | Северная часть ОАЭ; | Центральная часть ОАЭ.
| Министерства обороны США |восточный регион US DoD |центральный регион US DoD |
| US (США) |US Gov (Аризона) |US Gov (Техас) |
| US (США) |US Gov (Айова) |US Gov (Вирджиния) |
| US (США) |US Gov (Вирджиния) |US Gov (Техас) |

> [!Important]
> - Западная Индия спарена только в одном направлении. Дополнительный регион для региона "Западная Индия" — "Южная Индия", а дополнительный регион для региона "Южная Индия — "Центральная Индия".
> - Бразилия на юге уникальна тем, что она в паре с регионом за пределами своей географии. Вторичным регионом Бразилии на юге является южная центральная часть США. Вторичным регионом южной части центрального США является не Бразилия-юг.


## <a name="an-example-of-paired-regions"></a>Пример пар регионов
На рисунке ниже показано гипотетическое приложение, использующему региональную пару для аварийного восстановления. Зеленые числа подчеркивают кросс-региональные действия трех служб Azure (вычисления, хранение и база данных Azure) и способ их настройки для репликации в разных регионах. Уникальные преимущества развертывания в парных регионах выделены оранжевыми числами.

![Обзор преимуществ парных регионов](./media/best-practices-availability-paired-regions/PairedRegionsOverview2.png)

Рис. 2. Гипотетическая пара регионов Azure

## <a name="cross-region-activities"></a>Межрегиональные действия
Как показано на рисунке 2.

1. **Azure Compute (IaaS)** - Необходимо заранее предоставить дополнительные вычислительные ресурсы, чтобы обеспечить доступность ресурсов в другом регионе во время аварии. Дополнительные сведения см. в [техническом руководстве по обеспечению устойчивости в Azure](https://github.com/uglide/azure-content/blob/master/articles/resiliency/resiliency-technical-guidance.md). 

2. **Хранение Azure** - Если вы используете управляемые диски, узнайте о [кросс-регионах резервного копирования](https://docs.microsoft.com/azure/architecture/resiliency/recovery-loss-azure-region#virtual-machines) с помощью резервного копирования Azure и [воспроизводимые вымтомы](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-tutorial-enable-replication) из одного региона в другой с помощью восстановления сайта Azure. Если вы используете учетные записи хранилища, то гео-избыточное хранилище (GRS) настраивается по умолчанию при создании учетной записи хранения Azure. При использовании GRS данные реплицируются трижды в основном регионе и трижды в дополнительном. Дополнительные сведения см. в статье [Репликация службы хранилища Azure](storage/common/storage-redundancy.md).

3. **База данных Azure S'L** - С георепликацией базы данных Azure S'L, вы можете настроить асинхронную репликацию транзакций в любой регион мира; однако мы рекомендуем развернуть эти ресурсы в парном регионе для большинства сценариев аварийного восстановления. Дополнительные сведения см. в статье [Обзор: активная георепликация для базы данных SQL Azure](sql-database/sql-database-geo-replication-overview.md).

4. **Azure Resource Manager**. По своему существу Resource Manager обеспечивает логическую изоляцию компонентов в регионах. Это означает, что логические сбои в одном регионе едва ли затронут другой регион.

## <a name="benefits-of-paired-regions"></a>Преимущества пар регионов

5. **Физическая изоляция** – Когда это возможно, Azure предпочитает по крайней мере 300 миль разделения между центрами обработки данных в региональной паре, хотя это не практично или возможно во всех географических регионах. Физическое разделение центров обработки данных уменьшает вероятность последствий стихийных бедствий, массовых беспорядков, отключения электроэнергии или физического выхода сети из строя в обоих регионах одновременно. Уровень изоляции зависит от местных условий (размер географической территории, доступность инфраструктуры электропитания/сети, законодательство и т. д.).  

6. **Репликация, предоставляемая платформой,** - Некоторые службы, такие как Geo-Redundant Storage, обеспечивают автоматическое воспроизведение в парном регионе.

7. **Порядок восстановления региона** – В случае широкого простоя восстановление одного региона является приоритетным из каждой пары. Для приложений, развернутых в парных регионах, один из регионов гарантированно восстанавливается в первую очередь. Если приложение развернуто в регионах, которые не являются парными, восстановление может происходить с задержкой. В худшем случае оба выбранных региона будут восстановлены в последнюю очередь.

8. **Последовательные обновления** — Запланированные обновления системы Azure развертываются в парных регионах последовательно (не одновременно), чтобы свести к минимуму время простоя, влияние ошибок и логические сбои в редких случаях плохого обновления.

9. **Резиденция данных** - регион находится в той же географии, что и его пара (за исключением Бразилии на юге) для удовлетворения требований к резидентству данных для целей налоговой и правоохранительной юрисдикции.
