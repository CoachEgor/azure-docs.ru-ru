---
title: Управление правилами брандмауэра - Портал Azure - База данных Azure для PostgreS'L - Единый сервер
description: Создание и управление правилами брандмауэра для базы данных Azure для PostgreS-L - Единый сервер с помощью портала Azure
author: rachel-msft
ms.author: raagyema
ms.service: postgresql
ms.topic: conceptual
ms.date: 5/6/2019
ms.openlocfilehash: aeef22bf96221061a444f40e16e33343fafe511c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74770311"
---
# <a name="create-and-manage-firewall-rules-for-azure-database-for-postgresql---single-server-using-the-azure-portal"></a>Создание и управление правилами брандмауэра для базы данных Azure для PostgreS-L - Единый сервер с помощью портала Azure
Правила брандмауэра уровня сервера могут использоваться для управления доступом к базе данных Azure для сервера PostgreS'L с указанного IP-адреса или диапазона IP-адресов.

Для обеспечения доступа к серверу также можно использовать правила виртуальной сети (VNet). Подробнее о [создании и управлении конечными точками и правилами службы виртуальной сети с помощью портала Azure.](howto-manage-vnet-using-portal.md)

## <a name="prerequisites"></a>Предварительные требования
Прежде чем приступить к выполнению этого руководства, необходимы следующие компоненты:
- [сервер базы данных Azure для PostgreSQL](quickstart-create-server-database-portal.md);

## <a name="create-a-server-level-firewall-rule-in-the-azure-portal"></a>Создание правила брандмауэра на уровне сервера с помощью портала Azure
1. На странице сервера PostgreSQL в разделе "Параметры" щелкните **Connection security** (Безопасность подключения), чтобы открыть соответствующую страницу базы данных Azure для PostgreSQL.

   ![Портал Azure: щелчок пункта "Безопасность подключения"](./media/howto-manage-firewall-using-portal/1-connection-security.png)

2. Нажмите кнопку **Добавить мой IP-адрес** на панели инструментов. Автоматически будет создано правило брандмауэра с общедоступным IP-адресом компьютера, определенным системой Azure.

   ![Портал Azure: нажатие кнопки "Добавить Мой IP-адрес"](./media/howto-manage-firewall-using-portal/2-add-my-ip.png)

3. Проверьте IP-адрес перед сохранением конфигурации. В некоторых случаях IP-адрес, определенный порталом Azure, может отличаться от IP-адреса, используемого для доступа к Интернету и серверам Azure. Поэтому может потребоваться изменить начальный IP-адрес и конечный IP-адрес для правила, чтобы оно функционировало ожидаемым образом.
   Используйте поисковую систему или другой сетевой инструмент, чтобы проверить собственный IP-адрес. Например, выполните поиск текста "какой у меня IP-адрес".

   ![Поиск текста "what is my IP" в Bing](./media/howto-manage-firewall-using-portal/3-what-is-my-ip.png)

4. Добавьте дополнительные адресные пространства. В правилах брандмауэра базы данных Azure для PostgreSQL можно указать отдельный IP-адрес или диапазон адресов. Если вы хотите ограничить правило, указав отдельный IP-адрес, введите его в полях начального и конечного IP-адресов. Открытие брандмауэра позволяет администраторам, пользователям и приложениям получить доступ к любой базе данных на сервере PostgreS'L, к которому они имеют действительные учетные данные.

   ![Портал Azure: правила брандмауэра](./media/howto-manage-firewall-using-portal/4-specify-addresses.png)

5. На панели инструментов нажмите кнопку **Сохранить**, чтобы сохранить это правило брандмауэра уровня сервера. Дождитесь подтверждения успешного обновления правил брандмауэра.

   ![Портал Azure: нажатие кнопки "Сохранить"](./media/howto-manage-firewall-using-portal/5-save-firewall-rule.png)

## <a name="connecting-from-azure"></a>Подключение из Azure
Чтобы приложения из Azure могли подключаться к серверу Базы данных Azure для PostgreSQL, необходимо разрешить подключения Azure. Например, это необходимо для размещения веб-приложения Azure или приложения, которое выполняется на виртуальной машине Azure, либо для подключения из шлюза управления данными фабрики данных Azure. Чтобы разрешить эти подключения с помощью правила брандмауэра, ресурсы не обязательно должны находиться в одной и той же виртуальной сети или группе ресурсов. Когда приложение из Azure пытается подключиться к серверу базы данных, брандмауэр проверяет, разрешены ли подключения Azure. Такие подключения можно разрешить с помощью нескольких способов. Параметр брандмауэра с начальным и конечным адресом, равным 0.0.0.0, указывает, что эти подключения разрешены. Кроме того, можно настроить **опцию «Разрешить доступ к службам Azure»** **на** портале из панели **безопасности подключения** и нажать На **save.** Если попытка подключения не разрешена, запрос не достигает сервера базы данных Azure для PostgreSQL.

> [!IMPORTANT]
> Этот параметр позволяет настроить брандмауэр так, чтобы разрешить все подключения из Azure, включая подключения из подписок других клиентов. При выборе этого параметра убедитесь, что используемое имя для входа и разрешения пользователя предоставляют доступ только авторизованным пользователям.
> 

## <a name="manage-existing-server-level-firewall-rules-through-the-azure-portal"></a>Управление существующими правилами брандмауэра с помощью портала Azure
Повторите действия для управлению правилами брандмауэра.
* Чтобы добавить текущий компьютер, нажмите кнопку **Добавить мой IP-адрес**. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.
* Чтобы добавить дополнительные IP-адреса, введите имя правила, начальный IP-адрес и конечный IP-адрес. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.
* Чтобы изменить существующее правило, измените значения во всех полях в данном правиле. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.
* Чтобы удалить имеющееся правило, щелкните многоточие [...], а затем щелкните **Удалить**. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.

## <a name="next-steps"></a>Дальнейшие действия
- Аналогичным образом можно сделать сценарий для [создания и управления базой данных Azure для правил брандмауэра PostgreS'L с помощью Azure CLI.](howto-manage-firewall-using-cli.md)
- Дальнейший безопасный доступ к серверу путем [создания и управления конечными точками и правилами службы Virtual Network с помощью портала Azure.](howto-manage-vnet-using-portal.md)
- Справка по подключению к серверу базы данных Azure для PostgreSQL доступна в статье [Библиотеки подключений для базы данных Azure для PostgreSQL](concepts-connection-libraries.md).
