---
title: Управление правилами брандмауэра - Hyperscale (Citus) - База данных Azure для PostgreS'L
description: Создание и управление правилами брандмауэра для базы данных Azure для PostgreS-L - Hyperscale (Citus) с помощью портала Azure
author: jonels-msft
ms.author: jonels
ms.service: postgresql
ms.topic: conceptual
ms.date: 9/12/2019
ms.openlocfilehash: 660c395e6cff81b0abcac07e66385f80a538695f
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74977545"
---
# <a name="manage-firewall-rules-for-azure-database-for-postgresql---hyperscale-citus"></a>Управление правилами брандмауэра для базы данных Azure для PostgreS-L - Hyperscale (Citus)
Правила брандмауэра уровня сервера могут использоваться для управления доступом к узлам координатора Hyperscale (Citus) с указанного IP-адреса или диапазона IP-адресов.

## <a name="prerequisites"></a>Предварительные требования
Прежде чем приступить к выполнению этого руководства, необходимы следующие компоненты:
- Серверная группа [Создание базы данных Azure для группы серверов PostgreS-L - Hyperscale (Citus).](quickstart-create-hyperscale-portal.md)

## <a name="create-a-server-level-firewall-rule-in-the-azure-portal"></a>Создание правила брандмауэра на уровне сервера с помощью портала Azure

> [!NOTE]
> Эти настройки также доступны при создании базы данных Azure для серверной группы PostgreS-L - Hyperscale (Citus). Под вкладкой **Сеть** щелкните **Публичная конечная точка**.
> ![Портал Azure - сетевая вкладка](./media/howto-hyperscale-manage-firewall-using-portal/0-create-public-access.png)

1. На странице группы серверов PostgreS'L под заголовком «Безопасность» нажмите **«Сеть»,** чтобы открыть правила Firewall.

   ![Портал Azure - нажмите Сеть](./media/howto-hyperscale-manage-firewall-using-portal/1-connection-security.png)

2. Нажмите **Добавить клиент IP**, либо на панели инструментов (вариант А ниже), или в ссылке (вариант B). В любом случае автоматически создается правило брандмауэра с общедоступным IP-адресом вашего компьютера, как это воспринимается системой Azure.

   ![Портал Azure - нажмите Добавить клиент IP](./media/howto-hyperscale-manage-firewall-using-portal/2-add-my-ip.png)

Кроме того, нажав **кнопку "Добавить 0,0,0.0 - 255.255.255** (справа от опции B) позволяет не только ваш IP, но весь интернет для доступа к порту узла координатора 5432. В этой ситуации клиенты по-прежнему должны войти с правильным именем пользователя и паролем для использования кластера. Тем не менее, мы рекомендуем разрешить доступ по всему миру только на короткие периоды времени и только для непроизводственных баз данных.

3. Проверьте IP-адрес перед сохранением конфигурации. В некоторых случаях IP-адрес, определенный порталом Azure, может отличаться от IP-адреса, используемого для доступа к Интернету и серверам Azure. Поэтому может потребоваться изменить начальный IP-адрес и конечный IP-адрес для правила, чтобы оно функционировало ожидаемым образом.
   Используйте поисковую систему или другой сетевой инструмент, чтобы проверить собственный IP-адрес. Например, выполните поиск текста "какой у меня IP-адрес".

   ![Поиск текста "what is my IP" в Bing](./media/howto-hyperscale-manage-firewall-using-portal/3-what-is-my-ip.png)

4. Добавьте дополнительные адресные пространства. В правилах брандмауэра можно указать один IP-адрес или ряд адресов. Если вы хотите ограничить правило, указав отдельный IP-адрес, введите его в полях начального и конечного IP-адресов. Открытие брандмауэра позволяет администраторам, пользователям и приложениям получить доступ к узлам координатора в порту 5432.

5. На панели инструментов нажмите кнопку **Сохранить**, чтобы сохранить это правило брандмауэра уровня сервера. Дождитесь подтверждения успешного обновления правил брандмауэра.

## <a name="connecting-from-azure"></a>Подключение из Azure

Существует простой способ предоставить доступ к базе данных Hyperscale к приложениям, размещенным в Azure (например, приложению Azure Web Apps или приложениям Azure Web Apps или приложениям, работающим в VM Azure). Просто установите **службы и ресурсы Allow Azure для доступа к этой** опции группы **серверов на портале Yes** из панели **networking** и нажмите **Save.**

> [!IMPORTANT]
> Этот параметр позволяет настроить брандмауэр так, чтобы разрешить все подключения из Azure, включая подключения из подписок других клиентов. При выборе этого параметра убедитесь, что используемое имя для входа и разрешения пользователя предоставляют доступ только авторизованным пользователям.

## <a name="manage-existing-server-level-firewall-rules-through-the-azure-portal"></a>Управление существующими правилами брандмауэра с помощью портала Azure
Повторите действия для управлению правилами брандмауэра.
* Чтобы добавить текущий компьютер, нажмите кнопку, чтобы **добавить клиент IP**. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.
* Чтобы добавить дополнительные IP-адреса, введите имя правила, начальный IP-адрес и конечный IP-адрес. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.
* Чтобы изменить существующее правило, измените значения во всех полях в данном правиле. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.
* Чтобы удалить имеющееся правило, щелкните многоточие [...], а затем щелкните **Удалить**. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.

## <a name="next-steps"></a>Дальнейшие действия
- Узнайте больше о [Концепции правил брандмауэра,](concepts-hyperscale-firewall-rules.md)в том числе о том, как устранить проблемы с подключением.
