---
title: Ограничения - База данных Azure для PostgreS'L - Единый сервер
description: В этой статье описаны ограничения в базе данных Azure для PostgreS'L - Single Server, такие как количество вариантов подключения и движка хранения.
author: rachel-msft
ms.author: raagyema
ms.service: postgresql
ms.topic: conceptual
ms.date: 01/28/2020
ms.custom: fasttrack-edit
ms.openlocfilehash: 047e722a0e0ade60d1eb93a48e37333fffafd674
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76836462"
---
# <a name="limits-in-azure-database-for-postgresql---single-server"></a>Ограничения в базе данных Azure для PostgreS'L - Единый сервер
В следующих разделах описываются действующие ограничения емкости и функциональных возможностей в службе базы данных. Если вы хотите узнать о уровнях ресурсов (вычислить, [pricing tiers](concepts-pricing-tiers.md) память, хранение), см.


## <a name="maximum-connections"></a>Максимальное число подключений
Максимальное количество подключений на ценовом уровне и vCores показано ниже. Системе Azure требуется пять подключений для отслеживания Базы данных Azure для PostgreSQL. 

|**Уровень цен**| **Виртуальные ядра**| **Максимальное число подключений** | **Макс Подключения пользователей** |
|---|---|---|---|
|Basic| 1| 55 | 50|
|Basic| 2| 105 | 100|
|Общее назначение| 2| 150| 145|
|Общее назначение| 4| 250| 245|
|Общее назначение| 8| 480| 475|
|Общее назначение| 16| 950| 945|
|Общее назначение| 32| 1500| 1495|
|Общее назначение| 64| 1900| 1895|
|С оптимизацией для операций в памяти| 2| 300| 295|
|С оптимизацией для операций в памяти| 4| 500| 495|
|С оптимизацией для операций в памяти| 8| 960| 955|
|С оптимизацией для операций в памяти| 16| 1900| 1895|
|С оптимизацией для операций в памяти| 32| 1987| 1982|

При превышении предельного количества подключений может появиться следующая ошибка:
> FATAL: sorry, too many clients already (Неустранимая ошибка: уже подключено слишком много клиентов)

> [!IMPORTANT]
> Для лучшего опыта, мы рекомендуем вам использовать пулер соединения как pgBouncer для эффективного управления соединениями.

Соединение PostgreS'L, даже простоя, может занять около 10 МБ памяти. Кроме того, создание новых соединений требует времени. Большинство приложений запрашивают много недолговечных соединений, что усугубляет эту ситуацию. В результате меньше ресурсов, доступных для фактической рабочей нагрузки, приводит к снижению производительности. Пулер соединения, который уменьшает простоя соединения и повторно использует существующие соединения, поможет избежать этого. Чтобы узнать больше, посетите наш [блог](https://techcommunity.microsoft.com/t5/azure-database-for-postgresql/not-all-postgres-connection-pooling-is-equal/ba-p/825717).

## <a name="functional-limitations"></a>Ограничения функциональных возможностей
### <a name="scale-operations"></a>Операции масштабирования
- В настоящее время динамическое масштабирование из ценовой категории "Базовый" и в нее не поддерживается.
- Уменьшение размера хранилища сервера в настоящее время не поддерживается.

### <a name="server-version-upgrades"></a>Обновления версии сервера
- В настоящее время автоматический переход между основными версиями ядра СУБД не поддерживается. Чтобы выполнить обновление до следующей основной версии, [восстановите дамп](./howto-migrate-using-dump-and-restore.md) на сервере, который был создан с новой версией ядра.

> Обратите внимание, что до версии 10 PostgreS'L [политика версий PostgreS'L](https://www.postgresql.org/support/versioning/) рассматривала повышение _в_ первом _или_ втором номере (например, основным обновлением _версии_ считалось обновление с 9,5 до 9,6).
> По версии 10, только изменение в первом номере считается основным обновлением версии (например, 10.0 до 10.1 является _незначительным_ обновлением версии, и 10 до 11 является _основным_ обновлением версии).

### <a name="vnet-service-endpoints"></a>Конечные точки службы виртуальной сети
- Поддержка конечных точек службы виртуальной сети предназначена только для серверов общего назначения и серверов, оптимизированных для операций в памяти.

### <a name="restoring-a-server"></a>Восстановление сервера
- При использовании компонента PITR создается сервер с той же ценовой категорией, что и сервер, с которого он восстанавливается.
- На новом сервере, созданном во время восстановления, нет правил брандмауэра, которые были настроены на сервере-источнике. Для этого нового сервера правила брандмауэра нужно настроить отдельно.
- Восстановление удаленного сервера не поддерживается.

### <a name="utf-8-characters-on-windows"></a>Символы UTF-8 в Windows
- В некоторых сценариях символы UTF-8 не полностью поддерживаются в среде PostgreSQL с открытым исходным кодом в операционной системе Windows, что влияет на службу "База данных Azure для PostgreSQL". Дополнительные сведения см. в беседе об [ошибке 15476 в postgresql-archive](https://www.postgresql-archive.org/BUG-15476-Problem-on-show-trgm-with-4-byte-UTF-8-characters-td6056677.html).

## <a name="next-steps"></a>Дальнейшие действия
- См. [доступные возможности в каждой ценовой категории](concepts-pricing-tiers.md).
- См. [поддерживаемые версии базы данных PostgreSQL](concepts-supported-versions.md).
- Узнайте [Как выполнить резервное копирование и восстановление сервера в службе "База данных Azure для PostgreSQL" с помощью портала Azure](howto-restore-server-portal.md).
