---
title: 'Наблюдение и настройка в базе данных Azure для PostgreSQL: один сервер'
description: Этой статье описаны функции мониторинга и настройки в базе данных Azure для PostgreSQL — один сервер.
author: rachel-msft
ms.author: raagyema
ms.service: postgresql
ms.topic: conceptual
ms.date: 5/6/2019
ms.openlocfilehash: 5e03a3e33d618c393241a649be50fe78632caafe
ms.sourcegitcommit: 0568c7aefd67185fd8e1400aed84c5af4f1597f9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65068989"
---
# <a name="monitor-and-tune-azure-database-for-postgresql---single-server"></a>Наблюдение и настройка базы данных Azure для PostgreSQL: один сервер
Мониторинг данных о серверах помогает устранять неполадки и оптимизировать рабочую нагрузку. База данных Azure для PostgreSQL предоставляет различные параметры мониторинга, дающие возможность получить полезные сведения о поведении сервера.

## <a name="metrics"></a>Метрики
База данных Azure для PostgreSQL предоставляет различные метрики, позволяющие понять действия ресурсов, поддерживающих сервер PostgreSQL. Каждая метрика создается с частотой раз в минуту. В журнале содержится история о метриках за период в 30 дней. Вы можете настроить оповещения на основе метрик. Пошаговые инструкции см. в статье [Использование портала Azure для настройки оповещений на основе метрик для базы данных Azure для MySQL](howto-alert-on-metric.md). Другие задачи включают настройку автоматических действий, выполнение расширенной аналитики и архивирование журнала. Дополнительные сведения см. в статье [Обзор метрик в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md).

### <a name="list-of-metrics"></a>Список метрик
Для базы данных Azure для PostgreSQL доступны следующие метрики:

|Метрика|Отображаемое имя метрики|Единица измерения|ОПИСАНИЕ|
|---|---|---|---|
|cpu_percent|Нагрузка ЦП|Процент|Процент используемого ЦП.|
|memory_percent|Процент памяти|Процент|Процент используемой памяти.|
|io_consumption_percent|Процент ввода-вывода данных|Процент|Процент используемых операций ввода-вывода.|
|storage_percent|Storage percentage|Процент|Процент использованного объема хранилища сервера (от максимального объема).|
|storage_used|Storage used|Байты|Используемый объем хранилища. Хранилище, используемое службой, может содержать файлы базы данных, журналы транзакций и журналы сервера.|
|storage_limit|Storage limit|Байты|Максимальный объем хранилища для этого сервера.|
|serverlog_storage_percent|Процент хранилища для журнала сервера|Процент|Процент использованного объема хранилища журнала сервера (от максимального объема).|
|serverlog_storage_usage|Используемый объем хранилища для журнала сервера|Байты|Используемый объем хранилища журнала сервера.|
|serverlog_storage_limit|Максимальный объем хранилища для журнала сервера|Байты|Максимальный объем хранилища журнала сервера для этого сервера.|
|active_connections|Активные подключения|Количество|Число активных подключений к серверу.|
|connections_failed|Неудачные подключения|Количество|Число неудачных попыток подключения к серверу.|
|network_bytes_egress|Сеть (исходящий трафик)|Байты|Исходящий сетевой трафик по активным подключениям.|
|network_bytes_ingress|Сеть (входящий трафик)|Байты|Входящий сетевой трафик по активным подключениям.|
|backup_storage_used|Используемое хранилище резервных копий|Байты|Объем используемого хранилища резервных копий.|

## <a name="server-logs"></a>Журналы сервера
Можно включить ведение журнала на сервере. Эти журналы доступны в журналах диагностики Azure в [Azure Monitor регистрирует](../azure-monitor/log-query/log-query-overview.md), концентраторы событий и учетной записи хранения. Дополнительные сведения о ведении журналов см. на странице [Журналы сервера в базе данных Azure для PostgreSQL](concepts-server-logs.md).

## <a name="query-store"></a>Хранилище запросов
[Хранилище запросов](concepts-query-store.md) — это предварительная версия функции, позволяющая отслеживать производительность запросов с течением времени, включая статистику выполнения запросов и события ожидания. Эта функция сохраняет сведения о производительности среды выполнения запросов в системной базе данных с именем **azure_sys** в схеме query_store. Вы можете управлять процессами сбора и хранения данных с помощью различных приспособлений конфигурации.

## <a name="query-performance-insight"></a>Сведения о производительности запросов
Средство [Анализ производительности запросов](concepts-query-performance-insight.md) работает совместно с хранилищем запросов для предоставления визуализаций, доступных на портале Azure. Эти диаграммы позволяют определить основные запросы, влияющие на производительность. Средство "Анализ производительности запросов" находится в предварительной версии. Доступ к нему можно получить в разделе **Поддержка и устранение неполадок** на странице портала сервера службы "База данных Azure для PostgreSQL".

## <a name="performance-recommendations"></a>Рекомендации по производительности
Функция [Рекомендации по производительности](concepts-performance-recommendations.md) определяет возможности для повышения производительности рабочей нагрузки. Общедоступная предварительная версия функции "Рекомендации по производительности" предоставляет рекомендации по созданию индексов, которые потенциально могут повысить производительность рабочих нагрузок. Для создания рекомендаций по индексам эта функция учитывает различные характеристики базы данных, включая ее схемы и рабочую нагрузку по данным хранилища запросов. После реализации любой из рекомендаций по повышению производительности клиенты должны протестировать производительность, чтобы оценить результаты внесенных изменений. 

## <a name="next-steps"></a>Дальнейшие действия
- Рекомендации по созданию оповещений для метрики см. в статье [Настройка оповещений на основе метрик для базы данных Azure для PostgreSQL на портале Azure](howto-alert-on-metric.md).
- Дополнительные сведения о доступе к метрикам и их экспорте с помощью портала Azure, REST API или интерфейса командной строки см. в статье [Обзор метрик в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md).
- Читайте наш блог, чтобы ознакомиться с [рекомендациями по мониторингу сервера](https://azure.microsoft.com/blog/best-practices-for-alerting-on-metrics-with-azure-database-for-postgresql-monitoring/).
