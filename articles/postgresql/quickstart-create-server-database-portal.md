---
title: Краткое руководство. Создание базы данных в службе "База данных Azure для PostgreSQL — отдельный сервер" с помощью портала Azure
description: Краткое руководство по созданию базы данных в службе "База данных Azure для PostgreSQL — отдельный сервер" и управлению ею с помощью пользовательского интерфейса портала Azure.
author: rachel-msft
ms.author: raagyema
ms.service: postgresql
ms.custom: mvc
ms.topic: quickstart
ms.date: 06/27/2020
ms.openlocfilehash: 9741e00cdcc4907c547ebfcc6f8e7df7a3b32891
ms.sourcegitcommit: 3543d3b4f6c6f496d22ea5f97d8cd2700ac9a481
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/20/2020
ms.locfileid: "86529692"
---
# <a name="quickstart-create-an-azure-database-for-postgresql-server-in-the-azure-portal"></a>Краткое руководство. Создание базы данных Azure для сервера PostgreSQL на портале Azure

База данных Azure для PostgreSQL — это управляемая служба, с помощью которой можно запускать и масштабировать базы данных PostgreSQL высокой доступности, а также управлять ими в облаке. Из этого краткого руководства вы узнаете, как за 5 минут создать сервер службы "База данных Azure для PostgreSQL" с помощью портала Azure.

Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/) Azure, прежде чем начинать работу.

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure
Откройте веб-браузер и перейдите на [портал](https://portal.azure.com/). Введите свои учетные данные для входа на портал. Панель мониторинга службы является представлением по умолчанию.

## <a name="create-an-azure-database-for-postgresql-server"></a>Создание сервера Базы данных Azure для PostgreSQL

Сервер службы "База данных Azure для PostgreSQL" создается с настроенным набором [вычислительных ресурсов и ресурсов хранения](./concepts-pricing-tiers.md). Он создается в [группе ресурсов Azure](../azure-resource-manager/management/overview.md).

Чтобы создать базу данных Azure для сервера PostgreSQL, выполните такие действия:
1. Выберите **Создать ресурс** (+) в левом верхнем углу страницы портала.

2. Выберите **Базы данных** > **База данных Azure для PostgreSQL**.

   > [!div class="mx-imgBorder"]
   > ![Служба "База данных Azure для PostgreSQL" в меню](./media/quickstart-create-database-portal/1-create-database.png)

3. Выберите вариант развертывания **Отдельный сервер**.

   > [!div class="mx-imgBorder"]
   > ![Выбор варианта развертывания "Отдельный сервер" для службы "База данных Azure для PostgreSQL"](./media/quickstart-create-database-portal/select-deployment-option.png)

4. Заполните форму **Основные данные** , указав следующую информацию:

   > [!div class="mx-imgBorder"]
   > ![Создание сервера](./media/quickstart-create-database-portal/create-basics.png)

   Параметр|Рекомендуемое значение|Описание
   ---|---|---
   Подписка|Имя вашей подписки|Подписка Azure, которую вы хотите использовать для сервера. Если у вас есть несколько подписок, выберите ту, в которой взимается плата за использование ресурса.
   Группа ресурсов|*myresourcegroup*| Новое имя группы ресурсов или уже имеющееся из подписки.
   Имя сервера |*mydemoserver*|Уникальное имя, идентифицирующее базу данных Azure для сервера PostgreSQL. Имя домена *postgres.database.azure.com* добавляется к указанному имени сервера. Сервер может содержать только строчные буквы, цифры и знак дефиса (-). Его длина должна составлять от 3 до 63 символов.
   Источник данных | *None* | Чтобы создать сервер с нуля, выберите *Нет*. Если вы создаете сервер из геоизбыточной резервной копии существующего сервера службы "База данных Azure для PostgreSQL", выберите *Резервная копия*.
   Имя администратора |*myadmin*| Собственная учетная запись входа, используемая при подключении к серверу. Не используйте для имени учетной записи администратора такие варианты: **azure_superuser**, **azure_pg_admin**, **admin**, **administrator**, **root**, **guest** или **public**. Оно не может начинаться с **pg_** .
   Пароль |Ваш пароль| Новый пароль для учетной записи администратора сервера. Пароль должен содержать от 8 до 128 символов. Пароль должен содержать символы из таких трех категорий: прописные латинские буквы, строчные латинские буквы, цифры (0–9) и небуквенно-цифровые символы (!, $, #, % и т. д.).
   Расположение|Ближайший к пользователям регион| Ближайшее к пользователям расположение.
   Версия|Последний основной номер версии| Последний основной номер версии PostgreSQL, если нет особых требований.
   Вычисления и хранилище | **Общего назначения**, **Поколение 5**, **2 виртуальных ядра**, **5 ГБ**, **7 дней**, **Геоизбыточное хранилище** | Конфигурации вычислительных ресурсов, хранилища и резервного копирования для нового сервера. Щелкните **Настройка сервера**. Теперь выберите подходящую ценовую категорию. Дополнительные сведения, см. на [странице с ценами](https://azure.microsoft.com/pricing/details/postgresql/server/). Чтобы включить резервные копии сервера в географически избыточном хранилище, выберите **Геоизбыточное хранилище** в **параметрах избыточности резервного копирования**. Щелкните **ОК**.

   > [!NOTE]
   > Используйте ценовую категорию "Базовый", если для вашей рабочей нагрузки не требуется большое количество вычислительных ресурсов и операций ввода-вывода. Обратите внимание, что серверы, созданные в ценовой категории "Базовый", нельзя масштабировать до ценовых категорий "Общего назначения" или "Оптимизировано для памяти". 
   
5. Выберите **Просмотр и создание** , чтобы просмотреть выбранные элементы. Щелкните **Создать**, чтобы подготовить сервер. Это может занять несколько минут.

6. На панели инструментов щелкните значок **Уведомления** (колокольчик), чтобы отслеживать процесс развертывания. Когда развертывание завершится, выберите действие **Перейти к ресурсу**, которое открывает **страницу обзорных сведений** о сервере.

Создается пустая база данных **postgres**. Вы также увидите здесь базу данных **azure_maintenance**, которая используется для отделения процессов управляемых служб от действий пользователя. У вас нет прав доступа к базе данных **azure_maintenance**.

## <a name="configure-a-server-level-firewall-rule"></a>Настройка правила брандмауэра на уровне сервера
По умолчанию созданный сервер не является общедоступным, и вам нужно предоставить разрешение на доступ с вашего IP-адреса. Чтобы предоставить разрешение на доступ с IP-адреса, перейдите к ресурсу сервера на портале Azure и выберите **Безопасность подключения** в левой части меню для этого ресурса сервера. Если вы не знаете, как найти ресурс, воспользуйтесь статьей разделом [Открытие ресурсов](https://docs.microsoft.com/azure/azure-resource-manager/management/manage-resources-portal#open-resources).

> [!div class="mx-imgBorder"]
> ![Безопасность подключения — правила брандмауэра](./media/quickstart-create-database-portal/add-current-ip-firewall.png)
  
Теперь выберите **Добавить текущий IP-адрес клиента** и щелкните **Сохранить**. Вы можете добавить дополнительные IP-адреса или указать диапазон адресов, чтобы подключаться к серверу с любого из этих IP-адресов. Дополнительные сведения см. в статье [об управлении правилами брандмауэра](./concepts-firewall-rules.md).
   
> [!NOTE]
> Проверьте, разрешает ли сеть исходящий трафик на порт 5432, который использует База данных Azure для PostgreSQL, чтобы избежать проблем с подключением.  

## <a name="connect-to-azure-database-for-postgresql-server-using-psql"></a>Подключение к Базе данных Azure для PostgreSQL с помощью psql

Вы можете использовать популярные клиенты для PostgreSQL: [psql](http://postgresguide.com/utilities/psql.html) или [pgAdmin](https://www.pgadmin.org/docs/pgadmin4/latest/connecting.html). В этом кратком руководстве мы применим для подключения psql в [Azure Cloud Shell](https://docs.microsoft.com/azure/cloud-shell/overview) на портале Azure.

1. Запишите имя нового сервера, имя администратора этого сервера, пароль и идентификатор подписки из раздела **Обзор**, как показано на рисунке ниже.

2. Запустите Azure Cloud Shell на портале, щелкнув в верхней левой части экрана значок, выделенный на рисунке ниже.

   > [!NOTE]
   > Если вы запускаете Cloud Shell в первый раз, отобразится запрос на создание группы ресурсов и учетной записи хранения. Это одноразовое действие, которое автоматически применяется для всех сеансов. 

   > [!div class="mx-imgBorder"]
   > ![Откройте Azure Cloud Shell](media/quickstart-create-database-portal/use-in-cloud-shell.png)

3. Выполните эту команду в терминале Azure Cloud Shell. Замените предложенные значения реальными именами сервера и администратора. Используйте пустую базу данных **postgres** и пользователя с правами администратора, указав их данные в формате <имя_администратора>@<servername>, как показано ниже на примере Базы данных Azure для PostgreSQL.

   ```azurecli-interactive
   psql --host=mydemoserver.postgres.database.azure.com --port=5432 --username=myadmin@mydemoserver --dbname=postgres
   ```
 
   Вот так выглядит этот процесс в терминале Cloud Shell
   
   ```bash
    Requesting a Cloud Shell.Succeeded.
    Connecting terminal...

    Welcome to Azure Cloud Shell
 
    Type "az" to use Azure CLI
    Type "help" to learn about Cloud Shell

    user@Azure:~$psql --host=mydemoserver.postgres.database.azure.com --port=5432 --username=myadmin@mydemoserver --dbname=postgres
    Password for user myadmin@mydemoserver.postgres.database.azure.com:
    psql (12.2 (Ubuntu 12.2-2.pgdg16.04+1), server 11.6)
    SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)
    Type "help" for help.

    postgres=>
    ```
4. В том же терминале Azure Cloud Shell создайте базу данных **guest**.
   ```bash
   postgres=> CREATE DATABASE guest;
   ```

5. Теперь переключите текущее подключение на новую базу данных **guest**.

   ```bash
   \c guest
   ```
6. Введите `\q` и нажмите клавишу ВВОД, чтобы выйти из psql. 

## <a name="clean-up-resources"></a>Очистка ресурсов
Вы успешно создали сервер Базы данных Azure для PostgreSQL в группе ресурсов.  Если вы ожидаете, что в будущем эти ресурсы вам не понадобятся, их можно удалить, удалив группу ресурсов или сам сервер PostgreSQL. Чтобы удалить группу ресурсов, выполните следующие шаги.

1. Войдите на портал Azure; найдите в поиске и выберите **Группы ресурсов**. 
2. В списке групп ресурсов выберите имя нужной группы ресурсов.
3. На странице "Обзор" для группы ресурсов выберите **Удалить группу ресурсов**.
4. В диалоговом окне подтверждения введите имя группы ресурсов и щелкните **Удалить**.

Чтобы удалить сервер, можно нажать кнопку **Удалить** на странице **Обзор** для этого сервера, как показано ниже.
> [!div class="mx-imgBorder"]
> ![Удаление ресурсов](media/quickstart-create-database-portal/12-delete.png)

## <a name="next-steps"></a>Дальнейшие действия
> [!div class="nextstepaction"]
> [Перенос базы данных с помощью экспорта и импорта](./howto-migrate-using-export-and-import.md)
