---
title: Масштабирование группы серверов — горизонтальное масштабирование (Цитус) — база данных Azure для PostgreSQL
description: Настройка памяти группы серверов, диска и ресурсов ЦП для повышения нагрузки
author: jonels-msft
ms.author: jonels
ms.service: postgresql
ms.subservice: hyperscale-citus
ms.topic: conceptual
ms.date: 3/16/2020
ms.openlocfilehash: f8e8e1672f754e843a3bd1c75d496599d31e5f11
ms.sourcegitcommit: b9d4b8ace55818fcb8e3aa58d193c03c7f6aa4f1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "82583998"
---
# <a name="scale-a-hyperscale-citus-server-group"></a>Масштабирование группы серверов с горизонтальным масштабированием (Цитус)

Служба "база данных Azure для PostgreSQL" (Цитус) предоставляет возможность самостоятельного масштабирования, чтобы справиться с повышенной нагрузкой. Портал Azure позволяет легко добавлять новые рабочие узлы и увеличивать виртуальных ядер существующих узлов.

## <a name="add-worker-nodes"></a>Добавление рабочих узлов

Чтобы добавить узлы, перейдите на вкладку **Настройка** в группе серверов с горизонтальным масштабированием (Цитус).  При перетаскивании ползунка для **счетчика рабочих узлов** изменяется значение.

![Ползунки ресурсов](./media/howto-hyperscale-scaling/01-sliders-workers.png)

Нажмите кнопку **сохранить** , чтобы изменения вступили в силу.

> [!NOTE]
> После увеличения и сохранения число рабочих узлов не может быть уменьшено с помощью ползунка.

### <a name="rebalance-shards"></a>Перераспределение сегментов

Чтобы воспользоваться преимуществами новых добавленных узлов, необходимо перераспределить сегменты распределенной таблицы, что означает перемещение [некоторых сегментов из](concepts-hyperscale-distributed-data.md#shards)существующих узлов в новые. Сначала убедитесь, что подготовка новых рабочих ролей успешно завершена. Затем запустите подсистему балансировки сегментов, подключившись к узлу координатора кластера с psql и запустив:

```sql
SELECT rebalance_table_shards('distributed_table_name');
```

`rebalance_table_shards` Функция перераспределяет все таблицы в группе совместного [размещения](concepts-hyperscale-colocation.md) таблицы с именем в аргументе. Поэтому нет необходимости вызывать функцию для каждой распределенной таблицы, просто вызвать ее в репрезентативной таблице из каждой группы совместного размещения.

## <a name="increase-or-decrease-vcores-on-nodes"></a>Увеличение или уменьшение виртуальных ядер на узлах

> [!NOTE]
> Эта функция в настоящее время находится на стадии предварительной версии. Чтобы запросить изменение в виртуальных ядер для узлов в группе серверов, [обратитесь в службу поддержки Azure](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).

Помимо добавления новых узлов можно увеличить возможности существующих узлов. Регулировка емкости вычислений может оказаться полезной для экспериментов с производительностью, а также для краткосрочных или долгосрочных изменений в требованиях к трафику.

Чтобы изменить виртуальных ядер для всех рабочих узлов, настройте ползунок **виртуальных ядер** в разделе **Конфигурация (на рабочий узел)**. Виртуальных ядер узла координатора можно изменить независимо. Щелкните ссылку **изменить конфигурацию** в **узле координатор**. Появится диалоговое окно с ползунками для виртуальных ядер и емкостью хранилища координатора. Измените нужные ползунки и нажмите кнопку **ОК**.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о [параметрах производительности](concepts-hyperscale-configuration-options.md)группы серверов.
