---
title: Соединения для устранения неполадок - Hyperscale (Citus) - База данных Azure для PostgreS'L
description: Узнайте, как устранить проблемы подключения к базе данных Azure для PostgreS-L - Hyperscale (Citus)
keywords: подключение postgresql,строка подключения,проблемы с подключением, временная ошибка,ошибка подключения
author: jonels-msft
ms.author: jonels
ms.service: postgresql
ms.topic: conceptual
ms.date: 10/8/2019
ms.openlocfilehash: c064aca484f85c44dada9888012140784a96863f
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74977511"
---
# <a name="troubleshoot-connection-issues-to-azure-database-for-postgresql---hyperscale-citus"></a>Проблемы с подключением к базе данных Azure для PostgreS'L - Hyperscale (Citus)

Проблемы с подключением могут быть вызваны несколькими вещами, такими как:

* Параметры брандмауэра
* Время ожидания подключения.
* Неправильный знак в информации
* Ограничение соединения, достигнутое для группы серверов
* Проблемы с инфраструктурой службы.
* Обслуживание сервиса
* Узлы координатора не справляется с новым оборудованием

Как правило, проблемы с подключением к Hyperscale можно классифицировать следующим образом:

* временные ошибки (кратковременные или возникающие периодически);
* постоянные или регулярно возникающие ошибки.

## <a name="troubleshoot-transient-errors"></a>Устранение временных ошибок

Временные ошибки возникают по ряду причин. Наиболее распространенными являются техническое обслуживание системы, ошибка с оборудованием или программным обеспечением, а также обновления узлового узла координатора vCore.

Обеспечение высокой доступности узлов группы серверов Hyperscale позволяет автоматически устранять эти типы проблем. Тем не менее, ваше приложение все равно должно быть готово потерять свое соединение на короткое время. Кроме того, для смягчения других событий может уйти больше времени, например, когда большая транзакция приводит к длительному восстановлению.

### <a name="steps-to-resolve-transient-connectivity-issues"></a>Порядок устранения временных проблем подключения

1. Проверьте [панель мониторинга службы Microsoft Azure](https://azure.microsoft.com/status) на наличие известных сбоев, которые произошли во время сообщения об ошибках приложения.
2. Приложениям, которые подключаются к облачному сервису, таким как Hyperscale (Citus), следует ожидать временных ошибок и реагировать грациозно. Например, приложения должны реализовывать логику повтора для обработки этих ошибок, а не всплывать на их рассмотрение в качестве ошибок приложений для пользователей.
3. По мере приближения к лимитам ресурсов группа серверов может показаться временными проблемами подключения. Увеличение оперативной памяти узлов или добавление рабочих узлов и ребалансировка данных могут помочь.
4. Если проблемы с подключением сохраняются или продолжаются более 60 секунд или случаются более одного раза в день, подайте запрос службы поддержки Azure, выбрав **поддержку** на сайте [поддержки Azure.](https://azure.microsoft.com/support/options)

## <a name="troubleshoot-persistent-errors"></a>Устранение постоянных ошибок

Если приложение постоянно не подключается к Hyperscale (Citus), наиболее распространенными причинами являются неправильное настройка брандмауэра или ошибка пользователя.

* Конфигурация узла-координатора: Убедитесь, что брандмауэр сервера Hyperscale настроен для подключения к клиенту, включая прокси-серверы и шлюзы.
* Конфигурация клиентского брандмауэра: Брандмауэр на вашем клиенте должен разрешить подключение к серверу базы данных. Некоторые брандмауэры требуют разрешения не только приложения по имени, но и разрешения IP-адресов и портов сервера.
* Ошибка пользователя: Двойная проверка строки соединения. Возможно, вы неправильно навели параметры, такие как имя сервера. Строки подключения для различных языковых инфраструктур и psql можно найти на портале Azure. Перейдите на страницу строк подключения в группе **серверов** Hyperscale (Citus). Также имейте в виду, что гипермасштабные (Citus) кластеры имеют только одну базу данных и ее предопределенное название **citus**.

### <a name="steps-to-resolve-persistent-connectivity-issues"></a>Порядок устранения постоянных проблем подключения

1. Настройка [правил брандмауэра,](howto-hyperscale-manage-firewall-using-portal.md) чтобы позволить клиенту IP-адрес. Для временных целей тестирования настройте правило брандмауэра, используя 0.0.0.0 как начало диапазона IP-адресов и 255.255.255.255 как завершение. Это правило открывает сервер для всех IP-адресов. Если правило устраняет проблему подключения, удалите ее и создайте правило брандмауэра для надлежащим образом ограниченного ДИАПАЗОНА IP-адресов или адресов.
2. На всех брандмауэрах между клиентом и Интернетом убедитесь, что порт 5432 открыт для исходящих соединений.
3. Проверьте строку подключения и другие параметры подключения.
4. Проверьте работоспособность службы на панели мониторинга.

## <a name="next-steps"></a>Дальнейшие действия

* Изучите понятия [правил брандмауэра в базе данных Azure для PostgreS-L - Hyperscale (Citus)](concepts-hyperscale-firewall-rules.md)
* Узнайте, как [управлять правилами брандмауэра для базы данных Azure для PostgreS-L - Hyperscale (Citus)](howto-hyperscale-manage-firewall-using-portal.md)
