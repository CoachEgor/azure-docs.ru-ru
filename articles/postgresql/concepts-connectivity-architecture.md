---
title: Архитектура подключения — база данных Azure для PostgreSQL — один сервер
description: Описывает архитектуру подключения базы данных Azure для PostgreSQL-Single Server.
author: kummanish
ms.author: manishku
ms.service: postgresql
ms.topic: conceptual
ms.date: 05/23/2019
ms.openlocfilehash: 956c734214f3ecff532d2a73f069ecaa37396109
ms.sourcegitcommit: b5d646969d7b665539beb18ed0dc6df87b7ba83d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/26/2020
ms.locfileid: "76760544"
---
# <a name="connectivity-architecture-in-azure-database-for-postgresql"></a>Архитектура подключения в базе данных Azure для PostgreSQL
В этой статье описывается архитектура подключения к базе данных Azure для PostgreSQL, а также сведения о том, как трафик направляется в базу данных Azure для экземпляра базы данных PostgreSQL из клиентов как внутри, так и за пределами Azure.

## <a name="connectivity-architecture"></a>Архитектура подключения
Подключение к базе данных Azure для PostgreSQL устанавливается через шлюз, который отвечает за маршрутизацию входящих подключений к физическому расположению сервера в наших кластерах. На следующей схеме показан поток трафика.

![Обзор архитектуры подключения](./media/concepts-connectivity-architecture/connectivity-architecture-overview-proxy.png)

Когда клиент подключается к базе данных, он получает строку подключения, которая подключается к шлюзу. Этот шлюз имеет общедоступный IP-адрес, который прослушивает порт 5432. Трафик в кластере базы данных перенаправляется в соответствующую базу данных Azure для PostgreSQL. Поэтому для подключения к серверу, например из корпоративных сетей, необходимо открыть брандмауэр на стороне клиента, чтобы разрешить исходящий трафик для доступа к нашим шлюзам. Ниже приведен полный список IP-адресов, используемых нашими шлюзами в каждом регионе.

## <a name="azure-database-for-postgresql-gateway-ip-addresses"></a>IP-адреса шлюза базы данных Azure для PostgreSQL
В следующей таблице перечислены основной и дополнительный IP-адреса шлюза базы данных Azure для PostgreSQL для всех областей данных. Основным IP-адресом является текущий IP-адрес шлюза, а второй IP-адрес — это IP-адрес отработки отказа в случае сбоя первичной реплики. Как уже упоминалось, клиенты должны разрешать исходящие подключения к обоим IP-адресам. Второй IP-адрес не прослушивает службы, пока он не будет активирован службой "база данных Azure для PostgreSQL" для приема подключений.

| **Имя региона** | **IP-адреса шлюза** |
|:----------------|:-------------|
| Центральная Австралия| 20.36.105.0     |
| Central2 Австралия     | 20.36.113.0   |
| Восточная Австралия | 13.75.149.87, 40.79.161.1     |
| Юго-Восточная Австралия |191.239.192.109, 13.73.109.251   |
| Южная Бразилия | 104.41.11.5, 191.233.201.8, 191.233.200.16  |
| Центральная Канада |40.85.224.249  |
| Восточная Канада | 40.86.226.166    |
| Центральная часть США | 23.99.160.139, 13.67.215.62   |
| Восточный Китай | 139.219.130.35    |
| Восточный Китай 2 | 40.73.82.1  |
| Северный Китай | 139.219.15.17    |
| Северный Китай 2 | 40.73.50.0     |
| Восточная Азия | 191.234.2.139, 52.175.33.150, 13.75.33.20, 13.75.33.21     |
| Восточная часть США | 40.121.158.30, 191.238.6.43  |
| Восточная часть США 2 |40.79.84.180, 191.239.224.107, 52.177.185.181   |
| Центральная Франция | 40.79.137.0, 40.79.129.1  |
| Центральная Германия | 51.4.144.100     |
| Северо-восточная Германия | 51.5.144.179  |
| Центральная Индия | 104.211.96.159     |
| Южная Индия | 104.211.224.146  |
| Западная Индия | 104.211.160.80    |
| Восточная Япония | 13.78.61.196, 191.237.240.43  |
| Западная Япония | 104.214.148.156, 191.238.68.11    |
| Республика Корея, центральный регион | 52.231.32.42   |
| Республика Корея, южный регион | 52.231.200.86    |
| Центрально-северная часть США | 23.96.178.199, 23.98.55.75, 52.162.104.35, 52.162.104.36    |
| Северная Европа | 40.113.93.91, 191.235.193.75    |
| Северная часть ЮАР  | 102.133.152.0    |
| Западная часть ЮАР | 102.133.24.0   |
| Центрально-южная часть США |13.66.62.124, 23.98.162.75   |
| Юго-Восточная Азия | 104.43.15.0, 23.100.117.95, 40.78.233.2, 23.98.80.12     |
| Центральная часть ОАЭ | 20.37.72.64  |
| Северная часть ОАЭ | 65.52.248.0    |
| Южная часть Соединенного Королевства | 51.140.184.11   |
| Западная часть Соединенного Королевства | 51.141.8.11  |
| Центрально-западная часть США | 13.78.145.25     |
| Западная Европа | 40.68.37.158, 191.237.232.75     |
| Западная часть США | 104.42.238.205, 23.99.34.75  |
| Западная часть США 2 | 13.66.226.202  |
||||

## <a name="next-steps"></a>Дальнейшие действия

* [Создание правил брандмауэра базы данных Azure для PostgreSQL и управление ими с помощью портала Azure](./howto-manage-firewall-using-portal.md)
* [Создание правил брандмауэра базы данных Azure для PostgreSQL и управление ими с помощью Azure CLI](./howto-manage-firewall-using-cli.md)
