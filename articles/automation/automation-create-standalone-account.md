---
title: Создание автономной учетной записи службы автоматизации Azure
description: В этой статье приводятся пошаговые инструкции по созданию и тестированию, а также пример проверки подлинности с помощью субъекта безопасности в службе автоматизации Azure.
services: automation
ms.subservice: process-automation
ms.date: 01/15/2019
ms.topic: conceptual
ms.openlocfilehash: 72a40363edf0e83eea26ee697ce992226da0db4f
ms.sourcegitcommit: d6e4eebf663df8adf8efe07deabdc3586616d1e4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81392294"
---
# <a name="create-a-standalone-azure-automation-account"></a>Создание автономной учетной записи службы автоматизации Azure

В этой статье объясняется, как создать учетную запись службы автоматизации на портале Azure. Вы можете использовать учетную запись автоматизации портала для оценки и изучения автоматизации без использования дополнительных управленческих решений или интеграции с журналами Azure Monitor. Эти решения управления можно добавить или интегрировать в журналы Azure Monitor для расширенного мониторинга заданий Runbook в любой момент в будущем.

С использованием учетной записи службы автоматизации можно проверять подлинность ресурсов управления модулями Runbook в модели Azure Resource Manager или в классической модели развертывания. Одна учетная запись автоматизации может управлять ресурсами во всех регионах и подписках для конкретного клиента.

При создании учетной записи Автоматизации на портале Azure автоматически создается учетная запись **Run As.** Она выполняет следующие задачи:

* создает субъект-службу в Azure Active Directory (Azure AD);
* создает сертификат;
* назначает управление доступом на основе ролей участника (RBAC), используемое для управления ресурсами Azure Resource Manager с помощью модулей Runbook.

С помощью этой учетной записи, созданной для вас, вы можете быстро начать создавать и развертывать runbooks для поддержки ваших потребностей в автоматизации.

## <a name="permissions-required-to-create-an-automation-account"></a>Разрешения, необходимые для создания учетной записи службы автоматизации

Чтобы создать или обновить учетную запись службы автоматизации и выполнить задачи, приведенные в этой статье, вам потребуются указанные ниже привилегии и разрешения.

* Для создания учетной записи Автоматизации учетная запись пользователя Azure AD должна `Microsoft.Automation` быть добавлена к роли с разрешениями, эквивалентными роли владельца для ресурсов. Дополнительные сведения см. в статье [Управление доступом на основе ролей в службе автоматизации Azure](automation-role-based-access-control.md).
* На портале Azure в настройках **Azure Active Directory** > **MANAGE** > **user,** если **регистрация приложений** установлена **на Пользователя Yes,** не ауминированные в вашем аттестативе, могут зарегистрировать приложения Active [Directory.](../active-directory/develop/howto-create-service-principal-portal.md#check-azure-subscription-permissions) Если для параметра **Регистрация приложений** задано значение **Нет**, пользователю потребуются права глобального администратора в Azure AD, чтобы выполнить это действие.

Если вы не являетесь участником экземпляра Active Directory, прежде чем быть добавлены к глобальной роли администратора/администратора подписки, вы добавлены в Active Directory в качестве гостя. В этом сценарии вы видите это сообщение на панели учетной записи Add Automation:`You do not have permissions to create.`

Если пользователь сначала добавлен в глобальную роль Администратора/Коадминистратора, можно удалить пользователя из экземпляра Active Directory подписки. Вы можете прочитать пользователя на роль пользователя в Active Directory.

Чтобы проверить роли пользователей, сделайте следующее:

1. На портале Azure перейдите на панель Azure Active Directory.
1. Выберите **Пользователи и группы**.
1. Выберите **всех пользователей.**
1. После выбора конкретного пользователя выберите **Профиль**. Значение атрибута **Тип пользователя** в профиле пользователя не должно соответствовать значению **Гость**.

## <a name="create-a-new-automation-account-in-the-azure-portal"></a>Создание учетной записи службы автоматизации на портале Azure

Чтобы создать учетную запись службы автоматизации Azure на портале Azure, выполните следующие действия:

1. Войдите на портал Azure с помощью учетной записи, добавленной в качестве участника роли "Администраторы" подписки и соадминистратора подписки.
1. Выберите действие **+ Создать ресурс**.
1. Введите в строку поиска **Служба автоматизации**. В результатах поиска выберите **Автоматизация**.

   ![Поиск и выбор предложения "Автоматизация и управление" в Azure Marketplace](media/automation-create-standalone-account/automation-marketplace-select-create-automationacct.png)

1. На следующем экране выберите **Создать новый**.

   ![Добавление учетной записи службы автоматизации](media/automation-create-standalone-account/automation-create-automationacct-properties.png)

   > [!NOTE]
   > Если учетная запись не является участником роли "Администраторы подписки" и соадминистратором подписки, в колонке Добавление учетной записи службы автоматизации отобразится следующее сообщение.
   >
   > ![Предупреждение в области "Добавление учетной записи службы автоматизации"](media/automation-create-standalone-account/create-account-without-perms.png)

1. В панели учетной записи Add Automation введите имя для новой учетной записи Automation в поле **Name.** Вы не можете изменить это имя после того, как оно выбрано. 

    > [!NOTE]
    > Имена учетных записей автоматизации являются уникальными для региона и группы ресурсов. Имена удаленных учетных записей Automation могут быть доступны не сразу.

1. Если у вас несколько подписок, используйте поле **подписки,** чтобы указать подписку для использования новой учетной записи.
1. В поле **Группа ресурсов** укажите или выберите новую или имеющуюся группу ресурсов.
1. В поле **Расположение** выберите расположение центра обработки данных Azure.
1. Для **создания Azure Run As в качестве опции учетной записи** убедитесь, что **Yes** выбран, а затем нажмите **Создать.**

   > [!NOTE]
   > Если вы решили не создавать учетную запись запуска от имени и выбрали значение **Нет** для параметра **Создать учетную запись запуска от имени**, в области Добавление учетной записи службы автоматизации появится сообщение. Хотя учетная запись и создается на портале Azure, она не содержит соответствующее удостоверение проверки подлинности в службе каталогов подписки классической модели развертывания или подписки Azure Resource Manager. Поэтому у учетной записи службы автоматизации не будет доступа к ресурсам в вашей подписке. Из-за этого модули Runbook, ссылающиеся на эту учетную запись, не смогут проходить проверку подлинности и выполнять задачи, используя ресурсы в соответствующих моделях развертывания.
   >
   > ![Предупреждение в области "Добавление учетной записи службы автоматизации"](media/automation-create-standalone-account/create-account-decline-create-runas-msg.png)
   >
   > Если субъект-служба не создан, роль участника не назначается.
   >

1. Чтобы отслеживать ход создания учетной записи Automation, выберите **Уведомления** в меню.

### <a name="resources-included"></a>Создаваемые ресурсы

После создания учетной записи службы автоматизации автоматически создаются несколько ресурсов. После создания эти модули Runbook можно безопасно удалить, если вы не хотите их хранить. Чтобы выполнить аутентификацию для вашей учетной записи в модуле runbook, можно использовать учетные записи запуска от имени. Вы можете не удалять их, если не собираетесь создавать новую учетную запись или если они еще могут потребоваться. В следующей таблице перечислены ресурсы для учетной записи запуска от имени.

| Ресурс | Описание |
| --- | --- |
| Модуль Runbook AzureAutomationTutorial |Пример графического модуля Runbook, который демонстрирует, как выполнить проверку подлинности с помощью учетной записи запуска от имени. Он получает доступ ко всем ресурсам Resource Manager. |
| Модуль Runbook AzureAutomationTutorialScript |Пример модуля Runbook PowerShell, который демонстрирует, как выполнить проверку подлинности с помощью учетной записи запуска от имени. Он получает доступ ко всем ресурсам Resource Manager. |
| AzureAutomationTutorialPython2 Runbook |Пример модуля Runbook Python, в котором показано, как выполнить аутентификацию с помощью учетной записи запуска от имени. Модуль Runbook отображает список групп ресурсов для указанной подписки. |
| AzureRunAsCertificate |Ресурс сертификатов, создаваемый автоматически во время создания учетной записи службы автоматизации или с помощью приведенного ниже сценария PowerShell для имеющейся учетной записи. Этот сертификат позволяет пройти проверку подлинности в Azure, что дает возможность управлять ресурсами Azure Resource Manager с помощью модулей Runbook. Срок действия этого сертификата — один год. |
| AzureRunAsConnection |Ресурс подключений, создаваемый автоматически во время создания учетной записи службы автоматизации или с помощью сценария PowerShell для имеющейся учетной записи. |

## <a name="create-a-classic-run-as-account"></a>Создание классического запуска как учетная запись

Учетные записи Classic Run As больше не создаются по умолчанию при создании учетной записи Azure Automation. Если вам все еще требуется классический запуск как учетная запись:

1. Из учетной записи Автоматизация выберите **«Выполнить как учетные** **записи» в настройках учетных записей.**
2. Выберите **Azure Classic Run в качестве учетной записи.**
3. Нажмите **Создать,** чтобы продолжить с классическим Run Как создание учетной записи.

## <a name="next-steps"></a>Дальнейшие действия

* Чтобы узнать больше о графическом авторизации, смотрите [Графическое авторство в Azure Automation](automation-graphical-authoring-intro.md).
* Чтобы начать работу с PowerShell runbooks, [см.](automation-first-runbook-textual-powershell.md)
* Чтобы начать работу с runbooks рабочего процесса PowerShell, [см.](automation-first-runbook-textual.md)
* Чтобы начать работу с Python 2 runbooks, смотрите [мой первый Python2 runbook](automation-first-runbook-textual-python2.md).
* Для справки PowerShell cmdlet [см.](https://docs.microsoft.com/powershell/module/az.automation/?view=azps-3.7.0#automation
)
