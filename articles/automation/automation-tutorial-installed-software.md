---
title: Получение данных об установленном на компьютерах программном обеспечении с помощью службы автоматизации Azure | Документация Майкрософт
description: Использование данных инвентаризации для определения установленного программного обеспечения на компьютерах в вашей среде.
services: automation
keywords: данные инвентаризации, автоматизация, отслеживание
ms.date: 04/11/2018
ms.topic: tutorial
ms.subservice: change-inventory-management
ms.custom: mvc
ms.openlocfilehash: b93035fc7e315f8117516771236186f9d942a0aa
ms.sourcegitcommit: 5e49f45571aeb1232a3e0bd44725cc17c06d1452
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81604654"
---
# <a name="discover-what-software-is-installed-on-your-azure-and-non-azure-machines"></a>Получение данных об установленном программном обеспечении на виртуальных машинах Azure и других компьютерах

Из этого руководства вы узнаете, как получить сведения об установленном в среде программном обеспечении. Вы можете собирать и просматривать сведения об установленных на компьютерах программном обеспечении, файлах, управляющих программах, службах и разделах реестра Windows. Отслеживание конфигураций поможет вам локализовать операционные проблемы в любом сегменте среды и получить сведения о текущем состоянии компьютеров.

Из этого руководства вы узнаете, как выполнить следующие задачи:

> [!div class="checklist"]
> * Включение решения
> * подключение виртуальной машины Azure;
> * Подключение виртуальной машины, не относящейся к Azure
> * просмотреть установленное программное обеспечение;
> * поиск установленного программного обеспечения в журналах инвентаризации.

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим учебником необходимы указанные ниже компоненты.

* Подписка Azure. Если у вас ее нет, [активируйте преимущества для подписчиков MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) или [зарегистрируйте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F).
* [Учетная запись службы автоматизации](automation-offering-get-started.md) для хранения runbook наблюдателя, runbook действия и задачи наблюдателя.
* [Виртуальная машина](../virtual-machines/windows/quick-create-portal.md) для подключения.

## <a name="log-in-to-azure"></a>Вход в Azure

Войдите на портал Azure по адресу https://portal.azure.com.

## <a name="enable-change-tracking-and-inventory"></a>Включение службы отслеживания изменений и инвентаризации

Чтобы выполнить задачи в сначала нужно настроить службу отслеживания изменений и инвентаризации. Если решение **Отслеживание изменений** было включено ранее, этот шаг не является обязательным.

Перейдите к своей учетной записи службы автоматизации и в разделе **Управление конфигурацией** и выберите **Инвентаризация**.

Чтобы включить решение, выберите рабочую область Log Analytics и учетную запись службы автоматизации, а затем щелкните **Включить**. Процесс включения решения может занять до 15 минут.

![Баннер конфигурации для включения инвентаризации](./media/automation-tutorial-installed-software/enableinventory.png)

Чтобы включить решение, настройте расположение, рабочую область Log Analytics и учетную запись службы автоматизации, затем нажмите кнопку **Включить**. Если эти поля неактивны и выделены серым цветом, то для этой виртуальной машины настроено другое решение автоматизации, а значит необходимо использовать ту же рабочую область и ту же учетную запись службы автоматизации.

Рабочая область [Log Analytics](../log-analytics/log-analytics-overview.md?toc=%2fazure%2fautomation%2ftoc.json) используется для сбора данных, созданных такими компонентами и службами, как "Инвентаризация".
Рабочая область предоставляет единое расположение для проверки и анализа данных из нескольких источников.

[!INCLUDE [azure-monitor-log-analytics-rebrand](../../includes/azure-monitor-log-analytics-rebrand.md)]

Включение решения может занять до 15 минут. В это время не закрывайте окно браузера.
Когда решение будет включено, сведения об установленном программном обеспечении и изменениях на виртуальной машине начнут передаваться в журналы Azure Monitor.
На получение данных для анализа может уйти от 30 минут до 6 часов.

## <a name="onboard-a-vm"></a>Подключение виртуальной машины

В своей учетной записи службы автоматизации в разделе **Управление конфигурацией** выберите **Инвентаризация**.

Выберите **+ Добавить виртуальную машину Azure**. Откроется страница "Виртуальные машины", на которой можно выбрать существующую виртуальную машину в списке. Выберите виртуальную машину, которую нужно подключить. На открывшейся странице щелкните **Включить**, чтобы включить решение на виртуальной машине. Агент управления Майкрософт развертывается на виртуальной Машине. Он настраивает агент для обмена данными с рабочей областью Log Analytics, настроенной при включении решения. Процесс подключения может занять несколько минут. На этом этапе можно выбрать или подключить новую виртуальную машину.

## <a name="onboard-a-non-azure-machine"></a>Подключение компьютера, не относящегося к Azure

Чтобы добавить виртуальные машины, не относящиеся к Azure, установите агент [Log Analytics для Windows](../azure-monitor/platform/agent-windows.md) или [Log Analytics для Linux](automation-linux-hrw-install.md) в зависимости от операционной системы. Когда агент будет установлен, перейдите к своей учетной записи службы автоматизации и в разделе **Управление конфигурацией** выберите **Инвентаризация**. Щелкнув **Управление компьютерами**, вы увидите список компьютеров, которые передают данные в рабочую область Log Analytics, для которых решение не включено. Выберите параметр с учетом вашего окружения.

* **Enable on all available machines** (Включить на всех доступных компьютерах) — этот параметр включает решение на всех компьютерах, которые в данный момент передают данные в рабочую область Log Analytics.
* **Enable on all available machines and future machines** (Включить на всех доступных и добавляемых компьютерах) — этот параметр включает решение на всех компьютерах, которые передают данные в рабочую область Log Analytics, а также всех компьютерах, добавляемых в рабочую область.
* **Enable on selected machines** (Включить на выбранных компьютерах) — этот параметр включает решение только на выбранных компьютерах.

![Управление компьютерами](./media/automation-tutorial-installed-software/manage-machines.png)

## <a name="view-installed-software"></a>просмотреть установленное программное обеспечение;

Когда вы включите решение для отслеживания изменений и инвентаризации, собранные данные отобразятся на странице "Инвентаризация".

В своей учетной записи службы автоматизации в разделе **Управление конфигурацией** выберите **Инвентаризация**.

На странице "Инвентаризация" щелкните вкладку **Программное обеспечение**.

На вкладке **Программное обеспечение** находится таблица со списком обнаруженного программного обеспечения. Программное обеспечение группируется по именам и версиям.

В таблице предоставляются обобщенные сведения о каждой строке с информацией о программном обеспечении. Эти сведения включают имя программного обеспечения, версию, издателя, время последнего обновления (для компьютера в этой группе) и число компьютеров (на которых установлено это программное обеспечение).

![Инвентаризация программного обеспечения](./media/automation-tutorial-installed-software/inventory-software.png)

Щелкните любую строку, чтобы просмотреть свойства программного обеспечения в этой строке и список имен компьютеров, на которых оно установлено.

Вы можете найти нужные программное обеспечение или группу, введя строку для поиска в текстовое поле прямо над списком программного обеспечения.
С помощью фильтра можно выполнять поиск по названию, версии и (или) издателю программного обеспечения.

Например, поиск по строке **Contoso** возвращает список программного обеспечения, у которого название, имя издателя или версия содержат подстроку **Contoso**.

## <a name="search-inventory-logs-for-installed-software"></a>поиск установленного программного обеспечения в журналах инвентаризации.

Функция инвентаризации создает данные журнала, которые передаются в журналы Azure Monitor. Чтобы выполнить поиск по этим журналам, выберите **Log Analytics** в верхней части страницы "Инвентаризация".

Данные об инвентаризации хранятся в типе `ConfigurationData`.
Следующий пример запроса Log Analytics возвращает результаты инвентаризации, где издателем является **корпорация Майкрософт**.

```loganalytics
ConfigurationData
| where ConfigDataType == "Software"
| where Publisher == "Microsoft Corporation"
| summarize arg_max(TimeGenerated, *) by SoftwareName, Computer
```

Дополнительные сведения о поиске по файлам журналов в журналах Azure Monitor см. в статье [Анализ данных журнала в Azure Monitor](../azure-monitor/log-query/log-query-overview.md).

### <a name="single-machine-inventory"></a>Инвентаризация одного компьютера

Чтобы просмотреть результаты инвентаризации программного обеспечения для одного компьютера, откройте на странице ресурсов виртуальной машины Azure сведения об инвентаризации или примените в журналах Azure Monitor фильтр по конкретному компьютеру.
Ниже приводится пример запроса Log Analytics, который возвращает список программного обеспечения на виртуальной машине с именем **ContosoVM**.

```loganalytics
ConfigurationData
| where ConfigDataType == "Software"
| summarize arg_max(TimeGenerated, *) by SoftwareName, CurrentVersion
| where Computer =="ContosoVM"
| render table
| summarize by Publisher, SoftwareName
```

## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как использовать решение для инвентаризации программного обеспечения и как выполнить следующие действия:

> [!div class="checklist"]
> * Включение решения
> * подключение виртуальной машины Azure;
> * Подключение виртуальной машины, не относящейся к Azure
> * просмотреть установленное программное обеспечение;
> * поиск установленного программного обеспечения в журналах инвентаризации.

См. дополнительные сведения о решении для отслеживания изменений и инвентаризации, чтобы получить дополнительные сведения.

> [!div class="nextstepaction"]
> [Change management and Inventory solution](automation-change-tracking.md) (Решение для управления изменениями и инвентаризации)
