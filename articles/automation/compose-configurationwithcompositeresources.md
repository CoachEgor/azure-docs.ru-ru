---
title: Составление конфигураций DSC в конфигурации состояния автоматизации Azure с использованием композитных ресурсов
description: Узнайте, как составить конфигурации с использованием композитных ресурсов в конфигурации состояния автоматизации Azure.
keywords: powershell dsc, desired state configuration, powershell dsc для azure, составные ресурсы
services: automation
ms.subservice: dsc
ms.date: 08/21/2018
ms.topic: conceptual
ms.openlocfilehash: 7e7625ae95d5355ae1122a16ea4828eed5f78c73
ms.sourcegitcommit: acb82fc770128234f2e9222939826e3ade3a2a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81682928"
---
# <a name="composing-dsc-configurations-in-azure-automation-state-configuration-using-composite-resources"></a>Составление конфигураций DSC в конфигурации состояния автоматизации Azure с использованием композитных ресурсов

При необходимости управления ресурсом с помощью более чем одной желаемой конфигурации состояния (DSC) лучший путь заключается в использовании [композитных ресурсов.](/powershell/scripting/dsc/resources/authoringresourcecomposite) Составной ресурс — это вложенная и параметризованная конфигурация, используемая как ресурс DSC в другой конфигурации. Использование композитных ресурсов позволяет создавать сложные конфигурации, позволяя индивидуально управлять и строить базовые композитные ресурсы.

Служба автоматизации Azure позволяет [импортировать и компилировать составные ресурсы](automation-dsc-compile.md). После того как композитные ресурсы были импортированы в учетную запись автоматизации, можно использовать конфигурацию состояния azure Automation State через **функцию State Configuration (функция DSC** на портале Azure.

## <a name="composing-a-configuration-from-composite-resources"></a>Создание конфигурации с помощью составных ресурсов

Прежде чем назначить конфигурацию, составленную из композитных ресурсов на портале Azure, необходимо составить конфигурацию. Композиция использует **конфигурацию Compose** на странице State Configuration (DSC), в то время как на вкладке **Конфигурации** или **Компилированные конфигурации.**

1. Войдите на [портал Azure](https://portal.azure.com).
1. Слева щелкните **Все ресурсы**, а затем — имя учетной записи службы автоматизации.
1. На странице Учетная запись автоматизации в разделе **Управление конфигурацией** выберите **Настройка состояния (DSC)**.
1. На странице конфигурации состояния (DSC) щелкните либо на вкладке **Конфигурации,** либо на вкладке **«Составление конфигураций»,** а затем нажмите **конфигурацию Compose** в меню в верхней части страницы.
1. В шаге **Основы** укажите имя новой конфигурации (обязательно), а затем щелкните в любом месте строки каждого составного ресурса, который следует включить в конфигурацию. Нажмите кнопку **Далее** или щелкните шаг **Исходный код**. Для следующих шагов мы `PSExecutionPolicy` `RenameAndDomainJoin` выбрали и композитные ресурсы.
   ![Снимок экрана: шаг "Основы" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-basics.png)
1. В шаге **Исходный код** показано, как выглядит составленная из выбранных составных ресурсов конфигурация. Вы можете увидеть, как объединяются все параметры и как они передаются в составной ресурс. Просмотрев новый исходный код, нажмите кнопку **Далее** или щелкните шаг **Параметры**.
   ![Снимок экрана: шаг "Исходный код" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-sourcecode.png)
1. На этапе **Параметры** параметр для каждого композитного ресурса подвергается воздействию, что может быть обеспечено значение. Если у параметра есть описание, оно приводится рядом с полем параметра. Если параметр `PSCredential` тип, выпадение предоставляет список объектов **учетных данных** в текущей учетной записи Автоматизация. Также доступна **опция «Добавить учетные данные».** Указав все обязательные параметры, щелкните **Сохранить и скомпилировать**.
   ![Снимок экрана: шаг "Параметры" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-parameters.png)

После сохранения новой конфигурации она отправляется на компиляцию. Состояние задания компиляции можно просмотреть так же, как для любой импортируемой конфигурации. Дополнительные сведения см. в разделе [Просмотр задания компиляции](automation-dsc-getting-started.md#viewing-a-compilation-job).

Когда компиляция успешно завершена, новая конфигурация отображается во вкладке **Компиляция конфигураций.** Затем можно назначить конфигурацию управляемому узла, используя шаги при [переназначении узла другой конфигурации узлов.](automation-dsc-getting-started.md#reassigning-a-node-to-a-different-node-configuration)

## <a name="next-steps"></a>Следующие шаги

- Для начала см. [Начало работы с конфигурацией состояния автоматизации Azure.](automation-dsc-getting-started.md)
- Чтобы узнать, как на [Onboarding machines for management by Azure Automation State Configuration](automation-dsc-onboarding.md)бортовых узлах, см.
- Чтобы узнать о компиляции конфигураций DSC, чтобы можно было назначить их целевым узлам, см. [Конфигурации компиляции в конфигурации состояния azure Automation.](automation-dsc-compile.md)
- Для справки PowerShell cmdlet [см.](/powershell/module/azurerm.automation/#automation)
- Для получения информации о ценах на цены [см.](https://azure.microsoft.com/pricing/details/automation/)
- Чтобы увидеть пример использования конфигурации состояния автоматизации Azure в непрерывном конвейере развертывания, [см.](automation-dsc-cd-chocolatey.md)
