---
title: Составление конфигураций DSC в конфигурации состояния службы автоматизации Azure с помощью составных ресурсов
description: Узнайте, как создавать конфигурации с помощью составных ресурсов в конфигурации состояния службы автоматизации Azure.
keywords: powershell dsc, desired state configuration, powershell dsc для azure, составные ресурсы
services: automation
ms.subservice: dsc
ms.date: 08/21/2018
ms.topic: conceptual
ms.openlocfilehash: 1840f4049f8450295e179a89b472d7710c5f61a0
ms.sourcegitcommit: 309a9d26f94ab775673fd4c9a0ffc6caa571f598
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/09/2020
ms.locfileid: "82993781"
---
# <a name="composing-dsc-configurations-in-azure-automation-state-configuration-using-composite-resources"></a>Составление конфигураций DSC в конфигурации состояния службы автоматизации Azure с помощью составных ресурсов

Если требуется управлять ресурсом, не использующим одну настройку требуемого состояния (DSC), лучше использовать [Составные ресурсы](/powershell/scripting/dsc/resources/authoringresourcecomposite). Составной ресурс — это вложенная и параметризованная конфигурация, используемая как ресурс DSC в другой конфигурации. Использование составных ресурсов позволяет создавать сложные конфигурации, обеспечивая возможность индивидуального управления и построения базовых составных ресурсов.

Служба автоматизации Azure позволяет [импортировать и компилировать составные ресурсы](automation-dsc-compile.md). После импорта составных ресурсов в учетную запись службы автоматизации можно использовать конфигурацию состояния службы автоматизации Azure с помощью функции **настройки состояния (DSC** в портал Azure.

## <a name="composing-a-configuration-from-composite-resources"></a>Создание конфигурации с помощью составных ресурсов

Прежде чем можно будет назначить конфигурацию из составных ресурсов в портал Azure, необходимо составить конфигурацию. Композиция использует **настройку создания конфигурации** на странице настройки состояния (DSC) на вкладке **конфигурации** или **скомпилированные конфигурации** .

1. Войдите на [портал Azure](https://portal.azure.com).
1. Слева щелкните **Все ресурсы**, а затем — имя учетной записи службы автоматизации.
1. На странице Учетная запись автоматизации в разделе **Управление конфигурацией** выберите **Настройка состояния (DSC)**.
1. На странице Конфигурация состояния (DSC) перейдите на вкладку **конфигурации** или **скомпилированные конфигурации** , а затем в меню в верхней части страницы щелкните **создать конфигурацию** .
1. В шаге **Основы** укажите имя новой конфигурации (обязательно), а затем щелкните в любом месте строки каждого составного ресурса, который следует включить в конфигурацию. Нажмите кнопку **Далее** или щелкните шаг **Исходный код**. Для следующих шагов мы выбрали `PSExecutionPolicy` и `RenameAndDomainJoin` составные ресурсы.
   ![Снимок экрана: шаг "Основы" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-basics.png)
1. В шаге **Исходный код** показано, как выглядит составленная из выбранных составных ресурсов конфигурация. Вы можете увидеть, как объединяются все параметры и как они передаются в составной ресурс. Просмотрев новый исходный код, нажмите кнопку **Далее** или щелкните шаг **Параметры**.
   ![Снимок экрана: шаг "Исходный код" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-sourcecode.png)
1. На шаге **Parameters** параметр для каждого составного ресурса предоставляется таким образом, чтобы можно было предоставить значения. Если у параметра есть описание, оно приводится рядом с полем параметра. Если параметр имеет `PSCredential` тип, в раскрывающемся списке содержится список объектов **учетных данных** в текущей учетной записи службы автоматизации. Также доступен параметр **+ Добавить учетные данные** . Указав все обязательные параметры, щелкните **Сохранить и скомпилировать**.
   ![Снимок экрана: шаг "Параметры" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-parameters.png)

После сохранения новой конфигурации она отправляется на компиляцию. Состояние задания компиляции можно просмотреть так же, как для любой импортируемой конфигурации. Дополнительные сведения см. в разделе [Просмотр задания компиляции](automation-dsc-getting-started.md#view-a-compilation-job).

После успешного завершения компиляции новая конфигурация отображается на вкладке **скомпилированные конфигурации** . Затем можно назначить конфигурацию управляемому узлу, выполнив действия, описанные в разделе [перераспределение узла на другую конфигурацию узла](automation-dsc-getting-started.md#reassign-a-node-to-a-different-node-configuration).

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы приступить к работе, см. статью [Приступая к работе с конфигурацией состояния службы автоматизации Azure](automation-dsc-getting-started.md).
- Сведения о подключении узлов см. в статье подключение [компьютеров для управления с помощью конфигурации состояния службы автоматизации Azure](automation-dsc-onboarding.md).
- Дополнительные сведения о компиляции конфигураций DSC с целью назначения их целевым узлам см. [в разделе Компиляция конфигураций в конфигурации состояния службы автоматизации Azure](automation-dsc-compile.md).
- Справочник по командлетам PowerShell см. в статье [командлеты конфигурации состояния службы автоматизации Azure](/powershell/module/azurerm.automation/#automation).
- Сведения о ценах см. в разделе [цены на настройку состояния службы автоматизации Azure](https://azure.microsoft.com/pricing/details/automation/).
- Пример использования конфигурации состояния службы автоматизации Azure в конвейере непрерывного развертывания см. в статье [непрерывное развертывание с помощью конфигурации состояния службы автоматизации Azure и шоколадного](automation-dsc-cd-chocolatey.md)развертывания.
