---
title: Составление конфигураций DSC в службе "Настройка состояния службы автоматизации Azure" с помощью составных ресурсов
description: Сведения о составлении конфигураций с помощью составных ресурсов в службе "Настройка состояния службы автоматизации Azure" (DSC)
keywords: powershell dsc, desired state configuration, powershell dsc для azure, составные ресурсы
services: automation
ms.service: automation
ms.subservice: dsc
author: mgoedtel
ms.author: magoedte
ms.date: 08/21/2018
ms.topic: conceptual
manager: carmonm
ms.openlocfilehash: e9552adad1f15422eb60c34f2548324aeb03ee74
ms.sourcegitcommit: c38a1f55bed721aea4355a6d9289897a4ac769d2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2019
ms.locfileid: "74849570"
---
# <a name="composing-dsc-configurations-in-azure-automation-state-configuration-dsc-using-composite-resources"></a>Составление конфигураций DSC в службе "Настройка состояния службы автоматизации Azure" с помощью составных ресурсов

Если для управления ресурсом необходимо более одной конфигурации требуемого состояния (DSC), лучше всего прибегнуть к [составным ресурсам](/powershell/scripting/dsc/resources/authoringresourcecomposite). Составной ресурс — это вложенная и параметризованная конфигурация, используемая как ресурс DSC в другой конфигурации. Таким образом можно формировать сложные конфигурации, создавая базовые составные ресурсы (параметризованные конфигурации) и управляя ими по отдельности.

Служба автоматизации Azure позволяет [импортировать и компилировать составные ресурсы](automation-dsc-compile.md#compiling-configurations-in-azure-automation-that-contain-composite-resources).
После импорта составных ресурсов в учетную запись службы автоматизации вы можете использовать интерфейс **Составление конфигурации** на странице **Настройка состояния (DSC)** .

## <a name="composing-a-configuration-from-composite-resources"></a>Создание конфигурации с помощью составных ресурсов

Прежде чем назначать конфигурацию, сформированную из составных ресурсов на портале Azure, ее необходимо создать. Это можно сделать с помощью средства **Составление конфигурации** на странице **Настройка состояния (DSC)** на вкладке **Конфигурации** или **Составленные конфигурации**.

1. Войдите на [портале Azure](https://portal.azure.com).
1. Слева щелкните **Все ресурсы**, а затем — имя учетной записи службы автоматизации.
1. На странице **Учетная запись автоматизации** в разделе **Управление конфигурацией** выберите **Настройка состояния (DSC)** .
1. На странице **Настройка состояния (DSC)** выберите вкладку **Конфигурации** или **Составленные конфигурации**, а затем в меню в верхней части страницы выберите пункт **Составление конфигурации**.
1. В шаге **Основы** укажите имя новой конфигурации (обязательно), а затем щелкните в любом месте строки каждого составного ресурса, который следует включить в конфигурацию. Нажмите кнопку **Далее** или щелкните шаг **Исходный код**. Для последующих шагов мы выбрали составные ресурсы **PSExecutionPolicy** и **RenameAndDomainJoin**.
   ![Снимок экрана: шаг "Основы" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-basics.png)
1. В шаге **Исходный код** показано, как выглядит составленная из выбранных составных ресурсов конфигурация. Вы можете увидеть, как объединяются все параметры и как они передаются в составной ресурс. Просмотрев новый исходный код, нажмите кнопку **Далее** или щелкните шаг **Параметры**.
   ![Снимок экрана: шаг "Исходный код" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-sourcecode.png)
1. В шаге **Параметры** можно указать параметры для каждого составного ресурса. Если у параметра есть описание, оно приводится рядом с полем параметра. Если поле содержит параметр типа **PSCredential**, в раскрывающемся списке приводятся объекты **учетных данных**, имеющиеся в текущей учетной записи службы автоматизации. Также доступен параметр **+ Добавить учетные данные** . Указав все обязательные параметры, щелкните **Сохранить и скомпилировать**.
   ![Снимок экрана: шаг "Параметры" на странице составления конфигурации](./media/compose-configurationwithcompositeresources/compose-configuration-parameters.png)

После сохранения новой конфигурации она отправляется на компиляцию. Состояние задания компиляции можно просмотреть так же, как для любой импортируемой конфигурации. Дополнительные сведения см. в разделе [Просмотр задания компиляции](automation-dsc-getting-started.md#viewing-a-compilation-job).

После успешного завершения компиляции новая конфигурация отображается на вкладке **скомпилированные конфигурации** . После отображения на этой вкладке ее можно назначить управляемому узлу, выполнив действия, описанные в разделе [перераспределение узла с другой конфигурацией узла](automation-dsc-getting-started.md#reassigning-a-node-to-a-different-node-configuration).

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы приступить к работе со службой "Настройка состояния службы автоматизации Azure", см. сведения в [этой статье](automation-dsc-getting-started.md).
- Дополнительные сведения о подключении узлов см. в статье [Подключение компьютеров для управления с помощью Azure Automation DSC](automation-dsc-onboarding.md).
- Сведения о компилировании конфигураций DSC, которые затем можно назначить целевым узлам, см. в статье [Компилирование конфигураций в Azure Automation DSC](automation-dsc-compile.md).
- Справочник по командлетам PowerShell для службы "Настройка состояния службы автоматизации Azure" см. в [этой статье](/powershell/module/azurerm.automation/#automation).
- Сведения о ценах см. на странице [с ценами на службу "Настройка состояния службы автоматизации Azure"](https://azure.microsoft.com/pricing/details/automation/).
- Пример использования службы "Настройка состояния службы автоматизации Azure" и Chocolatey в конвейере непрерывного развертывания см. в [этой статье](automation-dsc-cd-chocolatey.md).
