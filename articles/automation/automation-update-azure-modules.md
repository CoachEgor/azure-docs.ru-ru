---
title: Обновление модулей Azure в службе автоматизации Azure
description: В этой статье описывается, как можно обновить общие модули Azure PowerShell, предоставленные по умолчанию в службе автоматизации Azure.
services: automation
ms.service: automation
ms.subservice: process-automation
author: georgewallace
ms.author: gwallace
ms.date: 05/30/2019
ms.topic: conceptual
manager: carmonm
ms.openlocfilehash: c09c9df1b8af7adca5c0169cf31881121ba6cc99
ms.sourcegitcommit: ef06b169f96297396fc24d97ac4223cabcf9ac33
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/31/2019
ms.locfileid: "66427488"
---
# <a name="how-to-update-azure-powershell-modules-in-azure-automation"></a>Как обновить модули Azure PowerShell в службе автоматизации Azure

Обновить модули Azure в учетной записи службы автоматизации, вам нужно использовать [обновления Azure модули runbook](https://github.com/Microsoft/AzureAutomation-Account-Modules-Update), которая доступна в виде открытого исходного кода. Чтобы приступить к использованию модуля runbook **Update-AutomationAzureModulesForAccount** для обновления модулей Azure, скачайте его из [этого репозитория](https://github.com/Microsoft/AzureAutomation-Account-Modules-Update) на сайте GitHub. После этого вы сможете импортировать его в свою учетную запись службы автоматизации или выполнить в качестве скрипта. Чтобы узнать, как импортировать runbook в учетной записи службы автоматизации, см. в разделе [импорт модуля runbook](manage-runbooks.md#import-a-runbook).

Наиболее распространенных модулей AzureRM PowerShell предоставляются по умолчанию в каждой учетной записи автоматизации. Группа разработчиков Azure регулярно обновляет модули Azure, таким образом, чтобы поддерживать актуальность требуется использовать [AutomationAzureModulesForAccount обновления](https://github.com/Microsoft/AzureAutomation-Account-Modules-Update) runbook для обновления модулей в учетных записях службы автоматизации.

Так как модули регулярно обновляются специалистами группы продуктов, то изменения могут затронуть и входящие в них командлеты. Данное действие может негативно повлиять на работу модулей Runbook. Это зависит от типа изменения. Например, возможно переименование параметра или полное прекращение поддержки командлета.

Чтобы избежать негативного влияния на модули Runbook и автоматизируемые ими процессы, выполните предварительное тестирование и проверку. Если у вас нет выделенной учетной записи службы автоматизации, предназначенной для этой цели, то рекомендуется ее создать, чтобы протестировать различные сценарии в процессе разработки модулей Runbook. Тестирование должно включать повторяющиеся изменения, такие как обновление модулей PowerShell.

Если вы разрабатываете скрипты локально, при тестировании рекомендуется хранить локально те же версии модуля, которые доступны в вашей учетной записи службы автоматизации. Так вы гарантированно получите те же результаты. После проверки результатов и применения необходимых изменений можно перейти к процессу переноса их в рабочую среду.

> [!NOTE]
> Новая учетная запись службы автоматизации может не содержать последние модули.

## <a name="considerations"></a>Рекомендации

Ниже приведены некоторые рекомендации по использованию этого процесса для обновления модулей Azure.

* Этот модуль runbook поддерживает обновление только **Azure** и **AzureRm** модули в данный момент. [Модули Azure PowerShell Az](/powershell/azure/new-azureps-module-az) поддерживаются в учетных записях службы автоматизации, но не могут быть заменены этого модуля runbook. Существуют важные факторы, которые необходимо учитывать при использовании `Az` модулей в учетной записи службы автоматизации, чтобы узнать больше, см. в разделе [Az использование модулей в учетной записи службы автоматизации](az-modules.md).

* Не рекомендуется запускать этот модуль runbook в учетных записях службы автоматизации, которые содержат модули Az.

* Перед запуском этого модуля runbook убедитесь, что для вашей учетной записи службы автоматизации созданы [учетные данные для учетной записи запуска от имени Azure](manage-runas-account.md).

* Этот код можно использовать как обычный сценарий PowerShell вместо runbook: просто выполните вход в Azure с помощью [Connect-AzureRmAccount](/powershell/module/azurerm.profile/connect-azurermaccount) сначала команду, а затем передавать `-Login $false` в скрипт.

* Если вы хотите выполнять этот модуль runbook в национальных облаках, используйте параметр `AzureRmEnvironment`, чтобы передать в модуль runbook нужную среду.  Приемлемые значения: **AzureCloud**, **AzureChinaCloud**, **AzureGermanCloud** и **AzureUSGovernment**. Эти значения можно получить с помощью командлета `Get-AzureRmEnvironment | select Name`. Если не передать значение этому параметру, модуль Runbook по умолчанию будет использовать общедоступное облако Azure **AzureCloud**.

* Если нужно использовать конкретную версию модуля Azure PowerShell вместо последней доступной в коллекции PowerShell, передайте эти версии в необязательном параметре `ModuleVersionOverrides` модуля runbook **Update-AutomationAzureModulesForAccount**. Примеры см. в модуле runbook [Update-AutomationAzureModulesForAccount.ps1](https://github.com/Microsoft/AzureAutomation-Account-Modules-Update/blob/master/Update-AutomationAzureModulesForAccount.ps1
). Модули Azure PowerShell, которые не упомянуты в параметре `ModuleVersionOverrides`, обновляются до последних версий из коллекции PowerShell. Если в параметр `ModuleVersionOverrides` не передано ничего, все модули обновляются последними версиями из коллекции PowerShell, как при нажатии кнопки **Обновить модули Azure**.

## <a name="known-issues"></a>Известные проблемы

Имеется известная проблема с обновлением модулей AzureRM в учетную запись службы автоматизации, который находится в группу ресурсов с помощью числовое имя, которое начинается с 0. Чтобы обновить модули Azure в учетной записи службы автоматизации, он должен быть в группе ресурсов с буквенно-цифровое имя. Группы ресурсов, числовой, имена которых начинаются с 0 — не удалось обновить модули AzureRM в данный момент.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. на странице [модуля runbook с открытым кодом для обновления модулей Azure](https://github.com/Microsoft/AzureAutomation-Account-Modules-Update).
