---
title: Общие сведения о проверке подлинности учетной записи службы автоматизации Azure
description: Эта статья содержит общие сведения о проверке подлинности учетной записи службы автоматизации Azure.
keywords: безопасность в службе автоматизации, обеспечение безопасности в службе автоматизации, проверка подлинности в службе автоматизации
services: automation
ms.subservice: process-automation
ms.date: 09/28/2020
ms.topic: conceptual
ms.openlocfilehash: bcb5f61c93bd4c3ff7c0f81ae808807f7deb71df
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91766087"
---
# <a name="automation-account-authentication-overview"></a>Общие сведения о проверке подлинности учетной записи службы автоматизации

С помощью службы автоматизации Azure можно автоматизировать задачи, выполняемые с ресурсами Azure (локально), а также с ресурсами других поставщиков облачных служб, например Amazon Web Services (AWS). Модули Runbook можно использовать для автоматизации задач или гибридной рабочей роли Runbook, если у вас есть бизнес-процессы для управления за пределами Azure. Для работы в любой из этих сред требуются разрешения на безопасный доступ к ресурсам с минимальными необходимыми правами.

В этой статье рассматриваются разные сценарии проверки подлинности, поддерживаемые службой автоматизации Azure, и описывается процесс начала работы с учетом среды или сред, для которых вы настраиваете управление.

## <a name="automation-account"></a>Учетная запись службы автоматизации

При первом запуске службы автоматизации Azure необходимо создать по крайней мере одну учетную запись службы автоматизации. Учетные записи службы автоматизации позволяют изолировать ресурсы службы автоматизации (runbook, ресурсы и конфигурации) от ресурсов в других учетных записей. Учетные записи службы автоматизации можно использовать, чтобы разделить ресурсы на отдельные логические среды. Например, для разработки можно использовать одну учетную запись, для рабочей среды — другую, а для локальной среды — третью. Учетная запись службы автоматизации Azure отличается от учетной записи Майкрософт или учетных записей, созданных в рамках подписки Azure. Общие сведения см. в статье [Создание учетной записи службы автоматизации](automation-quickstart-create-account.md).

## <a name="automation-resources"></a>Ресурсы службы автоматизации

Ресурсы каждой учетной записи службы автоматизации связаны с одним регионом Azure, но учетные записи могут управлять всеми ресурсами в вашей подписке Azure. Главной причиной создания учетных записей службы автоматизации в разных регионах будет наличие политик, требующих изолировать данные и ресурсы в определенном регионе.

Все задачи, создаваемые для ресурсов с использованием Azure Resource Manager и командлетов PowerShell в службе автоматизации Azure, должны выполнять проверку подлинности в Azure с помощью корпоративных учетных данных (удостоверения Azure Active Directory).

## <a name="run-as-accounts"></a>Учетные записи запуска от имени

Учетные записи запуска от имени в службе автоматизации Azure обеспечивают проверку подлинности для управления Azure Resource Manager ресурсами или ресурсами, развернутыми в классической модели развертывания. В службе автоматизации Azure существует два типа учетных записей запуска от имени:

* учетная запись запуска от имени Azure;
* классическая учетная запись запуска от имени Azure.

Дополнительные сведения об этих двух моделях развертывания см. в разделе [Диспетчер ресурсов и классическое развертывание](../azure-resource-manager/management/deployment-models.md).

>[!NOTE]
>Подписки Поставщика облачных речений Azure (CSP) поддерживают только модель Azure Resource Manager. Службы, не являющиеся частью Azure Resource Manager, недоступны в программе. При использовании подписки CSP создается не классическая учетная запись запуска от имени Azure, а учетная запись запуска от имени Azure. Дополнительные сведения о подписках CSP см. в разделе [Доступные службы в подписках CSP](/azure/cloud-solution-provider/overview/azure-csp-available-services).

### <a name="run-as-account"></a>учетная запись запуска от имени

Учетная запись запуска от имени Azure управляет ресурсами Azure на основе службы развертывания и управления Azure Resource Manager для Azure.

При создании учетной записи запуска от имени она выполняет следующие задачи:

* Создает приложение Azure AD с самозаверяющим сертификатом, создает учетную запись субъекта-службы для приложения в Azure AD и назначает роль [участника](../role-based-access-control/built-in-roles.md#contributor) для учетной записи в текущей подписке. Вместо этого параметра сертификата можно использовать роль владельца или любую другую роль. Дополнительные сведения см. в статье [Управление доступом на основе ролей в службе автоматизации Azure](automation-role-based-access-control.md).

* Создает ресурс сертификата службы автоматизации `AzureRunAsCertificate` в указанной учетной записи службы автоматизации. Этот ресурс содержит закрытый ключ сертификата, используемый в приложении Azure AD.

* Создает ресурс подключения службы автоматизации `AzureRunAsConnection` в указанной учетной записи службы автоматизации. Этот ресурс содержит идентификаторы приложения, клиента и подписки, а также отпечаток сертификата.

### <a name="azure-classic-run-as-account"></a>Классическая учетная запись запуска от имени Azure

Классическая учетная запись запуска от имени Azure управляет классическими ресурсами Azure на основе классической модели развертывания. Для создания или обновления этого типа учетной записи запуска от имени необходимо быть соадминистратором подписки.

При создании классической учетной записи запуска от имени Azure выполняются следующие задачи.

* Создает сертификат управления в подписке.

* Создает ресурс сертификата службы автоматизации `AzureClassicRunAsCertificate` в указанной учетной записи службы автоматизации. Этот ресурс содержит закрытый ключ сертификата, используемый в сертификате управления.

* Создает ресурс подключения службы автоматизации `AzureClassicRunAsConnection` в указанной учетной записи службы автоматизации. Этот ресурс содержит имя подписки, идентификатор подписки и имя ресурса сертификата.

>[!NOTE]
>Классическая учетная запись запуска от имени Azure не создается по умолчанию при создании учетной записи службы автоматизации Azure. Эта учетная запись создается отдельно после выполнения действий, описанных в статье [Управление учетной записью запуска от имени](manage-runas-account.md#create-a-run-as-account-in-azure-portal) .

## <a name="service-principal-for-run-as-account"></a>Субъект-служба для учетной записи запуска от имени

У субъекта-службы для учетной записи запуска от имени по умолчанию нет разрешений на чтение данных из Azure AD. Если вы хотите добавить разрешения на чтение данных из Azure AD или управления ими, необходимо предоставить субъекту-службе разрешения в разделе **Разрешения API**. Дополнительные сведения см. в разделе [Добавление разрешений для доступа к веб-API](../active-directory/develop/quickstart-configure-app-access-web-apis.md#add-permissions-to-access-your-web-api).

## <a name="role-based-access-control"></a>Управление доступом на основе ролей

В Azure Resource Manager контроль доступа на основе ролей можно использовать для предоставления разрешений учетной записи пользователя Azure AD и учетной записи запуска от имени, а также для проверки подлинности субъекта-службы. Дополнительные сведения о разработке модели управления разрешениями в службе автоматизации см. в статье [Управление доступом на основе ролей в службе автоматизации Azure](automation-role-based-access-control.md).

## <a name="runbook-authentication-with-hybrid-runbook-worker"></a>Проверка подлинности runbook для гибридной рабочей роли Runbook

Последовательности runbook, запущенные в гибридной рабочей роли Runbook в вашем центре обработки данных или в других облаках, например в вычислительных службах AWS, не могут использовать стандартный для обычных runbook метод проверки подлинности в ресурсах Azure. Это происходит потому, что такие ресурсы работают за пределами Azure и для них требуются отдельные учетные данные безопасности, определяемые службой автоматизации для проверки подлинности ресурсов, доступ к которым они получают локально. Дополнительные сведения о проверке подлинности runbook в рабочей роли runbook см. в статье [Запуск модулей Runbook в гибридной рабочей роли Runbook](automation-hrw-run-runbooks.md).

Для runbook, которые используют гибридные рабочие роли Runbook на виртуальных машинах Azure, вместо учетной записи запуска от имени можно применить [проверку подлинности на основе управляемых удостоверений](automation-hrw-run-runbooks.md#runbook-auth-managed-identities), чтобы получать доступ к ресурсам Azure.

## <a name="next-steps"></a>Дальнейшие действия

* Сведения о создании учетной записи службы автоматизации на портале Azure см. в статье [Создание автономной учетной записи службы автоматизации Azure](automation-create-standalone-account.md).
* Если вы предпочитаете работать с шаблонами, см. статью [Создание учетной записи службы автоматизации с помощью шаблона Azure Resource Manager](quickstart-create-automation-account-template.md).
* Для использования Amazon Web Services прочитайте статью [Аутентификация модулей runbook службы автоматизации Azure с помощью Amazon Web Services](automation-config-aws-account.md).