---
title: Azure Key Vault в качестве источника сетки событий
description: Описание свойств и схемы, предоставленных для Azure Key Vault событий с помощью службы "Сетка событий Azure"
ms.topic: conceptual
ms.date: 07/07/2020
ms.openlocfilehash: b3d961228429c1f84e45c1df9147fa1687ab5074
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91324082"
---
# <a name="azure-key-vault-as-event-grid-source"></a>Azure Key Vault в качестве источника сетки событий

В этой статье приводятся свойства и схема событий в [Azure Key Vault](../key-vault/index.yml). Общие сведения о схемах событий см. в статье [Схема событий службы "Сетка событий Azure"](event-schema.md).

## <a name="event-grid-event-schema"></a>Схема событий службы "Сетка событий Azure"

### <a name="available-event-types"></a>Доступные типы событий

Учетная запись Azure Key Vault создает следующие типы событий:

| Полное имя события | Отображаемое имя события | Описание |
| ---------- | ----------- |---|
| Microsoft. KeyVault. Цертификатеневверсионкреатед | Создана новая версия сертификата | Активируется при создании нового сертификата или версии нового сертификата. |
| Microsoft. KeyVault. Цертификатенеарекспири | Срок действия сертификата приближается к истечению | Активируется, когда истекает срок действия текущей версии сертификата. (Событие активируется за 30 дней до даты окончания срока действия.) |
| Microsoft. KeyVault. Цертификатикспиред | Срок действия сертификата истек | Активируется по истечении срока действия сертификата. |
| Microsoft. KeyVault. Кэйневверсионкреатед | Создана новая версия | Активируется при создании нового ключа или новой версии ключа. |
| Microsoft. KeyVault. Кэйнеарекспири | Ключ приближается к истечению срока действия | Активируется при истечении срока действия текущей версии ключа. (Событие активируется за 30 дней до даты окончания срока действия.) |
| Microsoft. KeyVault. Кэйекспиред | Истек срок действия ключа | Активируется при истечении срока действия ключа. |
| Microsoft. KeyVault. Секретневверсионкреатед | Создана секретная новая версия | Активируется при создании новой секретной или новой версии секрета. |
| Microsoft. KeyVault. Секретнеарекспири | Срок действия секрета приближается | Активируется, когда истекает срок действия текущей версии секрета. (Событие активируется за 30 дней до даты окончания срока действия.) |
| Microsoft. KeyVault. Секретекспиред | Срок действия секрета истек | Активируется по истечении срока действия секрета. |
| Microsoft. KeyVault. Ваултакцессполицичанжед | Политика доступа к хранилищу изменена | Активируется при изменении политики доступа на Key Vault. Он включает сценарий при изменении модели разрешений Key Vault на RBAC или из нее.  |

### <a name="event-examples"></a>Примеры событий

В следующем примере показана схема для **Microsoft. KeyVault. секретневверсионкреатед**:

```JSON
[
   {
      "id":"00eccf70-95a7-4e7c-8299-2eb17ee9ad64",
      "topic":"/subscriptions/{subscription-id}/resourceGroups/sample-rg/providers/Microsoft.KeyVault/vaults/sample-kv",
      "subject":"newsecret",
      "eventType":"Microsoft.KeyVault.SecretNewVersionCreated",
      "eventTime":"2019-07-25T01:08:33.1036736Z",
      "data":{
         "Id":"https://sample-kv.vault.azure.net/secrets/newsecret/ee059b2bb5bc48398a53b168c6cdcb10",
         "vaultName":"sample-kv",
         "objectType":"Secret",
         "objectName ":"newsecret",
         "version":" ee059b2bb5bc48398a53b168c6cdcb10",
         "nbf":"1559081980",
         "exp":"1559082102"
      },
      "dataVersion":"1",
      "metadataVersion":"1"
   }
]
```

### <a name="event-properties"></a>Свойства события

Событие содержит следующие высокоуровневые данные:

| Свойство | Тип | Описание |
| ---------- | ----------- |---|
| идентификатор | строка | Идентификатор объекта, вызвавшего это событие |
| vaultName | строка | Имя хранилища ключей для объекта, запустившего это событие. |
| objectType | строка | Тип объекта, вызвавшего это событие |
| ИмяОбъекта | строка | Имя объекта, запустившего это событие |
| version | строка | Версия объекта, вызвавшего это событие |
| nbf | number | Дата недоступности в секундах с 1970-01-01T00:00:00Z объекта, который инициировал это событие |
| exp | number | Дата окончания срока действия в секундах с 1970-01-01T00:00:00Z объекта, который инициировал это событие |

## <a name="tutorials-and-how-tos"></a>Руководства и инструкции
|Заголовок  |Описание  |
|---------|---------|
| [Мониторинг событий Key Vault с помощью службы "Сетка событий Azure"](../key-vault/general/event-grid-overview.md) | Общие сведения об интеграции Key Vault со службой "Сетка событий". |
| [Учебник. Создание и отслеживание событий Key Vault с помощью сетки событий](../key-vault/general/event-grid-logicapps.md) | Узнайте, как настроить уведомления в сетке событий для Key Vault. |


## <a name="next-steps"></a>Дальнейшие действия

* Общие сведения о службе "Сетка событий Azure" см. в статье [что такое сетка событий](overview.md).
* Дополнительные сведения о создании подписки на службу "Сетка событий Azure" см. в разделе [Схема подписки службы "Сетка событий](subscription-creation-schema.md)".
* Дополнительные сведения о хранилище ключей см. в разделе [что такое Azure Key Vault?](../key-vault/general/overview.md)

