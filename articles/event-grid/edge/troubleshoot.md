---
title: Устранение неполадок - Azure Event Grid IoT Edge (ru) Документы Майкрософт
description: Устранение неполадок в Event Grid на IoT Edge.
author: VidyaKukke
manager: rajarv
ms.author: vkukke
ms.reviewer: spelluru
ms.date: 10/24/2019
ms.topic: article
ms.service: event-grid
services: event-grid
ms.openlocfilehash: 95181d0eb23d5956b2c6af52c77f85714b107345
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "73100158"
---
# <a name="common-issues"></a>Распространенные проблемы

Если возникли проблемы с использованием Azure Event Grid на IoT Edge в вашей среде, используйте эту статью в качестве руководства для устранения неполадок и разрешения.

## <a name="view-event-grid-module-logs"></a>Просмотр журналов модулей Event Grid

Для устранения неполадок может потребоваться доступ к журналам модулей Event Grid. Для этого на VM, где развернут модуль, выполняется следующая команда:

На Windows,

```sh
docker -H npipe:////./pipe/iotedge_moby_engine container logs eventgridmodule
```

На Linux,

```sh
sudo docker logs eventgridmodule
```

## <a name="unable-to-make-https-requests"></a>Неудается сделать запросы HTTPS

* Во-первых убедитесь, что модуль Event Grid имеет **входящий:serverAuth:tlsPolicy** установлен **в строгом** или **включенном.**

* Если его модуль к модулю связи, убедитесь, что вы делаете вызов на порт **4438** и название модуля соответствует тому, что развернуто. 

  Для, например, если модуль Event Grid был развернут с именем **https://eventgridmodule:4438** **eventgridmodule,** то ваш URL должен быть . Убедитесь, что корпус и номер порта верны.
    
* Если это из модуля, не относящемуся к IoT, убедитесь, что порт Event Grid отображается на машине Host во время развертывания, например,

    ```json
    "HostConfig": {
                "PortBindings": {
                  "4438/tcp": [
                    {
                        "HostPort": "4438"
                    }
                  ]
                }
     }
    ```

## <a name="unable-to-make-http-requests"></a>Не удается сделать запросы HTTP

* Во-первых убедитесь, что модуль Event Grid имеет **входящий:serverAuth:tlsPolicy** набор **для включения** или **отключения.**

* Если его модуль к модулю связи, убедитесь, что вы делаете вызов на порт **5888** и название модуля соответствует тому, что развернуто. 

  Для, например, если модуль Event Grid был развернут с именем **http://eventgridmodule:5888** **eventgridmodule,** то ваш URL должен быть . Убедитесь, что корпус и номер порта верны.
    
* Если это из модуля, не относящемуся к IoT, убедитесь, что порт Event Grid отображается на машине Host во время развертывания, например,

    ```json
    "HostConfig": {
                "PortBindings": {
                  "5888/tcp": [
                    {
                        "HostPort": "5888"
                    }
                  ]
                }
    }
    ```

## <a name="certificate-chain-was-issued-by-an-authority-thats-not-trusted"></a>Цепочка сертификатов была выдана органом, которому не доверяют

По умолчанию модуль Event Grid настроен для проверки подлинности клиентов сертификатом, выданным daemon безопасности IoT Edge. Убедитесь, что клиент представляет сертификат, который коренится в этой цепочке.

Класс **IoTSecurity** показывает, [https://github.com/Azure/event-grid-iot-edge](https://github.com/Azure/event-grid-iot-edge) как получить сертификаты из Daemon IoT Edge Security и использовать их для настройки исходящих вызовов.

Если это непроизводственная среда, у вас есть возможность отключить проверку подлинности клиента. Для получения подробной информации о том, как это сделать, обратитесь в [Службу безопасности и аутентификации.](security-authentication.md)

## <a name="debug-events-not-received-by-subscriber"></a>События дебуга, не полученные абонентом

Типичными причинами этого являются:

* Мероприятие так и не было успешно опубликовано. Статус-код HTTP 200(OK) должен быть получен при размещении события в модуле Event Grid.

* Проверьте подписку на событие, чтобы проверить:
    * URL-адрес endpoint действителен
    * Любые фильтры в подписке не приводят к тому, что событие будет «упадено».

* Проверка, работает ли модуль абонента

* Зайдите на VM, где развернут модуль Event Grid, и просмотрите его журналы.

* Включите на регистрацию доставки, установив **брокера:logDeliverySuccess'true** и передислоцируя модуль Event Grid и повторяя запрос. Включение регистрации на одну доставку может повлиять на пропускную стоимость и задержку, поэтому после завершения отладки наша рекомендация состоит в том, чтобы вернуть это **к брокеру: logDeliverySuccess-false** и передислокации модуля Event Grid.

* Включите метрики, установив **метрики: reportertype-console** и передислокацию модуля Event Grid. Любые операции после этого приведут к тому, что метрики будут зарегистрированы на консоли модуля Event Grid, которые могут быть использованы для дальнейшего отладки. Наша рекомендация состоит в том, чтобы включить метрики только для отладки и после завершения, чтобы выключить его, установив **метрики:reportertype-none** и передислокации модуля Event Grid.

## <a name="next-steps"></a>Дальнейшие действия

Сообщите о любых проблемах, предложениях [https://github.com/Azure/event-grid-iot-edge/issues](https://github.com/Azure/event-grid-iot-edge/issues)с использованием Event Grid на IoT Edge на .