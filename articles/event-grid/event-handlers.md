---
title: Обработчики событий службы "Сетка событий Azure"
description: Описание обработчиков событий, поддерживаемых в службе "Сетка событий Azure"
services: event-grid
author: spelluru
ms.service: event-grid
ms.topic: conceptual
ms.date: 01/21/2019
ms.author: spelluru
ms.openlocfilehash: 6093e1017af2fb8c54eaf1c3192f937172567982
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "67080555"
---
# <a name="event-handlers-in-azure-event-grid"></a>Обработчики событий в службе "Сетка событий Azure"

Обработчик событий — это место, куда отправляются события. Обработчик выполняет последующую обработку полученного события. Некоторые службы Azure автоматически настроены для обработки событий. Также для этого можно использовать любой веб-перехватчик. Для обработки событий, веб-перехватчик не обязательно размещать в Azure. Сетка событий поддерживает только конечные точки HTTPS веб-перехватчиков.

В этой статье представлены ссылки на информацию о каждом обработчике событий.

## <a name="azure-automation"></a>Служба автоматизации Azure

Используйте службу автоматизации Azure для обработки событий с помощью автоматизированных модулей runbook.

|Название  |Описание  |
|---------|---------|
|[Учебник. по службе автоматизации Azure со службой "Сетка событий Azure" и Microsoft Teams](ensure-tags-exists-on-new-virtual-machines.md) |Создайте виртуальную машину, которая отправляет событие. Это событие вызывает модуль runbook службы автоматизации, который присваивает виртуальной машине тег и отправляет сообщение в канал Microsoft Teams. |

## <a name="azure-functions"></a>Функции Azure

Используйте службу "Функции Azure" для бессерверного реагирования на события.

При использовании Функций Azure в качестве обработчика используйте триггер службы "Сетка событий" вместо универсальных триггеров HTTP. Служба "Сетка событий" автоматически проверяет триггеры функций сетки событий. При использовании универсальных триггеров HTTP вам нужно реализовать [ответ проверки](security-authentication.md#webhook-event-delivery).

|Название  |Описание  |
|---------|---------|
| [Триггер службы "Сетка событий" для Функций Azure](../azure-functions/functions-bindings-event-grid.md) | Общие сведения об использовании триггера службы "Сетка событий" в Функциях Azure. |
| [Руководство. Автоматическое изменение размера переданных изображений с помощью службы "Сетка событий"](resize-images-on-storage-blob-upload-event.md) | Пользователи отправляют изображения в учетную запись хранения через веб-приложение. При создании большого двоичного объекта в хранилище служба "Сетка событий" отправляет событие приложению-функции, которое изменяет размер отправленного изображения. |
| [Потоковая передача больших данных в хранилище данных](event-grid-event-hubs-integration.md) | Когда Центры событий создают файл сбора, служба "Сетка событий" отправляет событие приложению-функции. Это приложение извлекает файл сбора и переносит данные в хранилище данных. |
| [Учебник. с примерами интеграции служебной шины Azure со службой "Сетка событий Azure"](../service-bus-messaging/service-bus-to-event-grid-integration-example.md?toc=%2fazure%2fevent-grid%2ftoc.json) | Служба "Сетка событий" отправляет сообщения из раздела служебной шины в приложение-функцию и приложение логики. |

## <a name="event-hubs"></a>Центры событий;

Центры событий можно использовать, если решение получает больше событий, чем может обработать. Приложение обрабатывает события из Центров событий по собственному расписанию. Вы можете расширить параметры обработки входящих событий.

Центры событий могут действовать либо как источник события, либо как обработчик события. В следующей статьи показано, как использовать Центры событий в качестве обработчика.

|Название  |Описание  |
|---------|---------|
| [Краткое руководство. Перенаправление пользовательских событий в концентраторы событий Azure с помощью Azure CLI и службы "Сетка событий"](custom-event-to-eventhub.md) | Отправляет пользовательское событие в концентратор событий для обработки приложением. |
| [Шаблон Resource Manager для создания пользовательского раздела и конечной точки Центров событий](https://github.com/Azure/azure-quickstart-templates/tree/master/101-event-grid-event-hubs-handler)| Шаблон Resource Manager, который создает подписку для пользовательского раздела. Он отправляет события в Центры событий Azure. |

Примеры Центров событий в качестве источника, см. в [источнике Центров событий](event-sources.md#event-hubs).

## <a name="hybrid-connections"></a>через гибридные подключения

Гибридные подключения Azure Relay используются для отправки событий в приложения, которые находятся в корпоративной сети и не имеют общедоступной конечной точки.

|Название  |Описание  |
|---------|---------|
| [Руководство. Отправка пользовательских событий для службы Сетка событий Azure по гибридному подключению](custom-event-to-hybrid-connection.md) | Отправка пользовательских событий в существующее гибридное подключение для обработки приложением прослушивателя. |

## <a name="logic-apps"></a>Logic Apps

Используйте Logic Apps для автоматизации бизнес-процессов реагирования на события.

|Название  |Описание  |
|---------|---------|
| [Отслеживание изменений виртуальной машины с помощью Azure Logic Apps и службы "Сетка событий Azure"](monitor-virtual-machine-changes-event-grid-logic-app.md) | Приложение логики отслеживает изменения в виртуальной машине и отправляет сообщения электронной почты об этих изменениях. |
| [Отправка уведомлений электронной почты о событиях в Центре Интернета вещей Azure с помощью Logic Apps](publish-iot-hub-events-to-logic-apps.md) | Приложение логики отправляет уведомление по электронной почте каждый раз, когда добавляется устройство в Центр Интернета вещей. |
| [Учебник. с примерами интеграции служебной шины Azure со службой "Сетка событий Azure"](../service-bus-messaging/service-bus-to-event-grid-integration-example.md?toc=%2fazure%2fevent-grid%2ftoc.json) | Служба "Сетка событий" отправляет сообщения из раздела служебной шины в приложение-функцию и приложение логики. |

## <a name="service-bus-queue-preview"></a>Очередь служебной шины (Предварительная версия)

Использование служебной шины в качестве обработчика событий для направлять события в сетке событий непосредственно в очереди служебной шины для использования в сценариях буферизации или команды и управление в корпоративных приложениях. Предварительный просмотр не работает с разделами служебной шины и сеансы, но она работает на всех уровнях очередей служебной шины.

Обратите внимание, что при служебной шины как обработчик находится в общедоступной предварительной версии, необходимо установить расширение CLI или PowerShell при использовании их для создания подписки на события.

### <a name="install-extension-for-azure-cli"></a>Установка расширения для Azure CLI

Для Azure CLI вам потребуется [расширение Сетки событий](/cli/azure/azure-cli-extensions-list).

В [CloudShell](/azure/cloud-shell/quickstart):

* Если вы ранее установили расширения, поместите в него `az extension update -n eventgrid`.
* Если вы еще не установили расширение ранее, установите его с помощью `az extension add -n eventgrid`.

При локальной установке:

1. [Установка Azure CLI](/cli/azure/install-azure-cli). Убедитесь, что у вас есть последняя версия, путем проверки с `az --version`.
1. Удалите предыдущие версии расширения с помощью `az extension remove -n eventgrid`.
1. Установка `eventgrid` расширение с `az extension add -n eventgrid`.

### <a name="install-module-for-powershell"></a>Установка модуля для PowerShell

Для PowerShell вам потребуется [модуль AzureRM.EventGrid](https://www.powershellgallery.com/packages/AzureRM.EventGrid/0.4.1-preview).

В [CloudShell](/azure/cloud-shell/quickstart-powershell):

* Установка модуля с `Install-Module -Name AzureRM.EventGrid -AllowPrerelease -Force -Repository PSGallery`.

При локальной установке:

1. Откройте консоль PowerShell от имени администратора.
1. Установка модуля с `Install-Module -Name AzureRM.EventGrid -AllowPrerelease -Force -Repository PSGallery`.

Если параметр `-AllowPrerelease` недоступен, выполните следующие действия:

1. Запустите `Install-Module PowerShellGet -Force`.
1. Запустите `Update-Module PowerShellGet`.
1. Закройте консоль PowerShell.
1. Перезапустите PowerShell от имени администратора.
1. Установите модуль `Install-Module -Name AzureRM.EventGrid -AllowPrerelease -Force -Repository PSGallery`.

### <a name="using-cli-to-add-a-service-bus-handler"></a>С помощью интерфейса командной строки для добавления обработчика служебной шины

Для интерфейса командной строки Azure в следующем примере подписывается и подключается к разделу "Сетка событий" в очередь служебной шины:

```azurecli-interactive
# If you haven't already installed the extension, do it now.
# This extension is required for preview features.
az extension add --name eventgrid

az eventgrid event-subscription create \
    --name <my-event-subscription> \
    --source-resource-id /subscriptions/{SubID}/resourceGroups/{RG}/providers/Microsoft.EventGrid/topics/topic1 \
    --endpoint-type servicebusqueue \
    --endpoint /subscriptions/{SubID}/resourceGroups/TestRG/providers/Microsoft.ServiceBus/namespaces/ns1/queues/queue1
```

## <a name="queue-storage"></a>Хранилище очередей

Используйте хранилище очередей для получения событий, которые должны извлекаться. Вы можете использовать хранилище очередей при наличии процесса выполнения, для реагирования которого необходимо много времени. Отправляя события в хранилище очередей, приложение может запрашивать и обрабатывать события по собственному расписанию.

|Название  |Описание  |
|---------|---------|
| [Краткое руководство. Перенаправление пользовательских событий в хранилище очередей Azure с помощью Azure CLI и службы "Сетка событий"](custom-event-to-queue-storage.md) | В этой статье объясняется, как отправлять пользовательские события в хранилище очередей. |

## <a name="webhooks"></a>Веб-перехватчики

Используйте веб-перехватчики для создания настраиваемых конечных точек, реагирующих на события.

|Название  |Описание  |
|---------|---------|
| Краткое руководство. Создание и перенаправление пользовательских событий с помощью [Azure CLI](custom-event-quickstart.md), [PowerShell](custom-event-quickstart-powershell.md) и [портала Azure](custom-event-quickstart-portal.md). | Содержит сведения об отправке пользовательских событий в веб-перехватчик. |
| Краткое руководство. Перенаправление событий хранилища BLOB-объектов в пользовательскую конечную веб-точку с помощью [Azure CLI](../storage/blobs/storage-blob-event-quickstart.md?toc=%2fazure%2fevent-grid%2ftoc.json), [PowerShell](../storage/blobs/storage-blob-event-quickstart-powershell.md?toc=%2fazure%2fevent-grid%2ftoc.json), и [портала Azure](blob-event-quickstart-portal.md). | Содержит сведения об отправке событий хранилища BLOB-объектов в веб-перехватчик. |
| [Быстрое руководство по отправке событий реестра контейнеров](../container-registry/container-registry-event-grid-quickstart.md?toc=%2fazure%2fevent-grid%2ftoc.json) | Содержит сведения об отправке событий Реестра контейнеров с помощью Azure CLI. |
| [Общие сведения. Получение событий через конечную точку HTTP](receive-events.md) | В этой статье описывается, как проверить получение событий на конечную точку HTTP из подписки на события, а также как получать события и десериализировать их. |

## <a name="next-steps"></a>Дальнейшие действия

* Общие сведения о службе "Сетка событий" см. в разделе [Общие сведения о службе "Сетка событий Azure"](overview.md).
* Сведения о том, как быстро приступить к использованию службы "Сетка событий", см. в разделе [Создание и перенаправление пользовательского события со службой "Сетка событий Azure"](custom-event-quickstart.md).
