---
title: Роли и требования для Azure Data Share
description: Узнайте о разрешениях, необходимых для обмена и получения данных с помощью совместного использования данных Azure.
author: joannapea
ms.author: joanpo
ms.service: data-share
ms.topic: conceptual
ms.date: 07/10/2019
ms.openlocfilehash: 36a492f6a3e86cfb2fc9505550cc2d9f4746e070
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79265510"
---
# <a name="roles-and-requirements-for-azure-data-share"></a>Роли и требования для Azure Data Share 

В этой статье описаны роли и разрешения, необходимые для обмена и получения данных с помощью службы обмена данными Azure. 

## <a name="roles-and-requirements"></a>Роли и требования

С помощью службы обмена данными Azure можно обмениваться данными без обмена учетными данными между поставщиком данных и потребителем. Служба обмена данными Azure использует управляемые идентификаторы (ранее известные как МСР) для проверки подлинности в хранилище данных Azure. 

Управляемый итог ресурса Azure Data Share должен получить доступ к хранилищу данных Azure. Затем служба Azure Data Share использует эту управляемую идентификацию для чтения и записи данных для обмена моментальными снимками и для создания символической ссылки для совместного использования на месте. 

Для обмена или получения данных из хранилища данных Azure пользователю необходимо, по крайней мере, следующие разрешения. Для совместного использования на основе S'L требуются дополнительные разрешения.
* Разрешение на запись в хранилище данных Azure. Обычно это разрешение существует в роли **вкладчика.**
* Разрешение на создание назначения ролей в хранилище данных Azure. Как правило, разрешение на создание назначений ролей существует в роли **владельца,** роли администратора пользовательского доступа или на заказ с назначенными назначениями Microsoft.Authorization/role assignments/write permission. Это разрешение не требуется, если управляемое удостоверение ресурса обмена данными уже получило доступ к хранилищу данных Azure. Смотрите таблицу ниже для требуемой роли.

Ниже приведено краткое изложение ролей, назначенных управляемой идентификации ресурса Data Share:

| |  |  |
|---|---|---|
|**Тип хранилища данных**|**Хранилище исходных данных поставщика данных**|**Хранилище данных потребителей**|
|хранилище BLOB-объектов Azure| читатель данных больших двоичных объектов хранилища. | участник данных BLOB-объектов хранилища;
|Озеро Лазурные данные Gen1 | Владелец | Не поддерживается
|Azure Data Lake 2-го поколения | читатель данных больших двоичных объектов хранилища. | участник данных BLOB-объектов хранилища;
|Azure SQL Server; | Участник БД SQL | Участник БД SQL
|Кластер исследователя данных Azure | Участник | Участник
|

Для совместного использования на основе S'L пользователь должен быть создан из внешнего поставщика в базе данных S'L с тем же именем, что и ресурс Azure Data Share. Ниже приводится краткое изложение разрешения, требуемого пользователем S'L.

| |  |  |
|---|---|---|
|**Тип базы данных S'L**|**Разрешение пользователя поставщика данных S'L**|**Разрешение пользователя данных потребителей S'L**|
|База данных SQL Azure | db_datareader; | db_datareader, db_datawriter, db_ddladmin
|Azure Synapse Analytics (ранее — Хранилище данных SQL) | db_datareader; | db_datareader, db_datawriter, db_ddladmin
|


### <a name="data-provider"></a>Поставщик данных 
Чтобы добавить набор данных в Azure Data Share, управляемому итога ресурса поставщика данных должен быть предоставлен доступ к исходую хранилища данных Azure. Например, в случае учетной записи хранилища управляемой идентификации ресурса обмена данными предоставляется роль читателя данных Storage Blob. 

Это делается автоматически службой обмена данными Azure, когда пользователь добавляет набор данных через портал Azure и пользователь имеет соответствующее разрешение. For example, user is an owner of the Azure data store, or is a member of a custom role that has the Microsoft.Authorization/role assignments/write permission assigned. 

Кроме того, пользователь может иметь владельца хранилища данных Azure, добавляя управляемый итог ресурса общего обмена данными в хранилище данных Azure вручную. Это действие должно быть выполнено только один раз на ресурс обмена данными.

Чтобы создать назначение ролей для управляемого итога ресурса обмена данными, выполните ниже приведенные ниже шаги:

1. Перейдите в хранилище данных Azure.
1. Выберите **элемент управления доступом (IAM)**.
1. Выберите **Добавление назначения роли**.
1. В *статье «В*соответствии с ролью» выберите роль в таблице назначения ролей выше (например, для учетной записи хранения, выберите *Reader Data Reader).*
1. В *рамках Select*введите имя ресурса Azure Data Share.
1. Нажмите *Сохранить*.

Для источников, основанных на S'L, в дополнение к вышеуказанным шагам, пользователь S'L должен быть создан из внешнего поставщика в базе данных S'L с тем же именем, что и ресурс Azure Data Share. Этот пользователь должен быть предоставлен *db_datareader* разрешения. Пример сценария наряду с другими предпосылками для совместного использования на основе S'L можно найти в [учебнике по обмену данными.](share-your-data.md) 

### <a name="data-consumer"></a>Потребитель данных
Для получения данных необходимо предоставить доступ к целевому хранилищу данных Azure. Например, в случае учетной записи хранилища управляемой идентификации ресурса обмена данными предоставляется роль вкладчика хранилища данных Blob. 

Это делается автоматически службой обмена данными Azure, если пользователь указывает хранилище целевых данных через портал Azure и пользователь имеет соответствующее разрешение. Например, пользователь является владельцем хранилища данных Azure или является участником пользовательской роли, в которой назначено назначение/написано разрешение на использование задано разрешение на использование microsoft.Authorization/role. 

Кроме того, пользователь может иметь владельца хранилища данных Azure, добавляя управляемый итог ресурса общего обмена данными в хранилище данных Azure вручную. Это действие должно быть выполнено только один раз на ресурс обмена данными.

Чтобы создать назначение ролей для управляемого итога ресурса обмена данными вручную, выполните ниже приведенные ниже шаги:

1. Перейдите в хранилище данных Azure.
1. Выберите **элемент управления доступом (IAM)**.
1. Выберите **Добавление назначения роли**.
1. В *статье «В*соответствии с ролью» выберите роль в таблице назначения ролей выше (например, для учетной записи хранения, выберите *Reader Data Reader).*
1. В *рамках Select*введите имя ресурса Azure Data Share.
1. Нажмите *Сохранить*.

Для целевого показателя, основанного на S'L, в дополнение к вышеуказанным шагам, пользователь S'L должен быть создан из внешнего поставщика в базе данных S'L с тем же именем, что и ресурс Azure Data Share. Этот пользователь должен получить *разрешение db_datareader, db_datawriter db_ddladmin.* Пример сценария наряду с другими предпосылками для совместного использования на основе S'L можно найти в учебнике по [приему и получению данных.](subscribe-to-data-share.md) 

Если вы обмениваетесь данными с помощью АДИ REST, вам необходимо создавать эти ролевые назначения вручную. 

Чтобы узнать больше о том, как добавить назначение ролей, обратитесь к [этой документации.](https://docs.microsoft.com/azure/role-based-access-control/role-assignments-portal#add-a-role-assignment) 

## <a name="resource-provider-registration"></a>Регистрация поставщика ресурсов 

Для того чтобы впервые просмотреть приглашение на раздел Лазурные данные в вашем клиенте Azure, может потребоваться вручную зарегистрировать поставщика ресурсов Microsoft.DataShare в подписку Azure. Выполните следующие действия, чтобы зарегистрировать поставщика ресурсов Microsoft.DataShare в подписку Azure. Для регистрации поставщика ресурсов необходим доступ *к* подписке Azure.

1. На портале Azure перейдите по **подпискам**.
1. Выберите подписку, которую вы используете для совместного использования данных Azure.
1. Нажмите на **поставщиков ресурсов**.
1. Поиск по Microsoft.DataShare.
1. Нажмите кнопку **Зарегистрировать**.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о ролях в Azure см. в статье [Определения ролей](../role-based-access-control/role-definitions.md).

