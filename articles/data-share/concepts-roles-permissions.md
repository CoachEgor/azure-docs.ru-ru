---
title: Роли и требования для предварительной версии общего ресурса Azure Data Share
description: Роли и требования для предварительной версии общего ресурса Azure Data Share
author: joannapea
ms.service: data-share
ms.topic: conceptual
ms.date: 07/10/2019
ms.author: joanpo
ms.openlocfilehash: 7bf98f8774551292574d4f1951eba44657fa7de0
ms.sourcegitcommit: f176e5bb926476ec8f9e2a2829bda48d510fbed7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2019
ms.locfileid: "70307356"
---
# <a name="roles-and-requirements-for-azure-data-share-preview"></a>Роли и требования для предварительной версии общего ресурса Azure Data Share

В этой статье описываются роли, необходимые для совместного использования данных с помощью предварительной версии Azure Data Share, а также для приема и получения данных с помощью предварительной версии общего ресурса Azure Data Share. 

## <a name="roles-and-requirements"></a>Роли и требования

Azure Data Share использует управляемые удостоверения для служб Azure (ранее известные как MSI) для проверки подлинности в базовых учетных записях хранения, чтобы иметь возможность считывать данные, совместно используемые поставщиком данных, а также получать данные, совместно используемые в качестве потребителя данных. В результате нет необходимости в обмене учетными данными между поставщиком данных и потребителем данных. 

Управляемое удостоверение службы должен быть предоставлен доступ к базовым учетным записям хранения. Для чтения и записи данных служба общего доступа к данным Azure использует Управляемое удостоверение службы ресурсов общего ресурса Azure. Пользователю общей папки данных Azure требуется возможность создания назначения ролей для Управляемое удостоверение службы учетной записи хранения, от которой они совместно используют данные. Разрешение на создание назначений ролей существует в роли **владельца** , в роли администратора доступа пользователей или в пользовательской роли с помощью Microsoft. Authorization, назначение ролей или разрешение на запись. 

Если вы не являетесь владельцем учетной записи хранения и вам не удается создать назначение роли для управляемого удостоверения ресурса Azure Data Share, вы можете запросить администратора Azure создать назначение роли от вашего имени. 

Ниже приведена сводка ролей, назначенных для совместного использования управляемыми ресурсами удостоверения.

| |  |  |
|---|---|---|
|**Тип хранилища**|**Учетная запись хранения источника поставщика данных**|**Целевая учетная запись хранения потребителя данных**|
|Хранилище BLOB-объектов Azure| Модуль чтения данных BLOB-объекта хранилища | Участник данных BLOB-объекта хранилища
|Azure Data Lake Gen1 | Ответственный | Не поддерживается
|Azure Data Lake Gen2 | Модуль чтения данных BLOB-объекта хранилища | Участник данных BLOB-объекта хранилища
|
### <a name="data-providers"></a>Поставщики данных 
Чтобы добавить набор данных к общему ресурсу данных Azure, необходимо добавить в роль модуля чтения BLOB-объектов хранилища данные поставщиков данных, которые используют управляемый ресурс. Это выполняется автоматически службой общих ресурсов Azure, если пользователь добавляет наборы данных через Azure и является владельцем учетной записи хранения или является членом пользовательской роли, которой назначены разрешения Microsoft. Authorization/Role/Write. 

Кроме того, у пользователя может быть администратор Azure, добавляющий удостоверение, управляемое ресурсом, в роль читателя данных BLOB-объекта хранилища вручную. Создание этого назначения роли вручную может быть недействительным владельцем учетной записи хранения или назначением настраиваемой роли. Это относится к данным, которые совместно используются в службе хранилища Azure или Azure Data Lake Gen2. 

При совместном использовании данных из Azure Data Lake Gen1 необходимо назначить роль владельца. 

Чтобы создать назначение роли для управляемого удостоверения общего ресурса данных, выполните следующие действия.

1. Перейдите к учетной записи хранения.
1. Выберите **Управление доступом (IAM)** .
1. Выберите **Добавление назначения роли**.
1. В разделе *роль*выберите *модуль чтения данных большого двоичного объекта хранилища*.
1. В поле *выбрать*введите имя учетной записи общего ресурса данных Azure.
1. Нажмите кнопку *Сохранить*.

### <a name="data-consumers"></a>Потребители данных
Для получения данных в роль участника данных BLOB-объекта хранилища необходимо добавить управляемое удостоверение для общего ресурса данных потребителей данных. Эта роль необходима, чтобы служба общих ресурсов Azure могла записывать данные в учетную запись хранения. Это выполняется автоматически службой общих ресурсов Azure, если пользователь добавляет наборы данных через Azure и является владельцем учетной записи хранения или является членом пользовательской роли, для которой назначено разрешение Microsoft. Authorization/Role (назначение ролей/запись). 

Кроме того, пользователь может добавить в роль участника данных BLOB-объекта хранилища учетные данные для совместного использования управляемого ресурса с помощью администратора Azure. Создание этого назначения роли вручную может быть недействительным владельцем учетной записи хранения или назначением настраиваемой роли. Обратите внимание, что это относится к данным, которые совместно используются в службе хранилища Azure или Azure Data Lake Gen2. Получение данных в Azure Data Lake Gen1 не поддерживается. 

Чтобы создать назначение роли для управляемого удостоверения ресурса ресурса данных вручную, выполните следующие действия.

1. Перейдите к учетной записи хранения.
1. Выберите **Управление доступом (IAM)** .
1. Выберите **Добавление назначения роли**.
1. В разделе *роль*выберите пункт *участник данных BLOB-объекта хранилища*. 
1. В поле *выбрать*введите имя учетной записи общего ресурса данных Azure.
1. Нажмите кнопку *Сохранить*.

Если вы предоставляете общий доступ к данным с помощью наших интерфейсов API, вам потребуется создать эти назначения ролей вручную, добавив учетную запись общего доступа к данным в соответствующие роли. 

Дополнительные сведения о добавлении назначения ролей см. в [этой документации,](https://docs.microsoft.com/azure/role-based-access-control/role-assignments-portal#add-a-role-assignment) в которой описано, как добавить назначение роли в ресурс Azure. 

## <a name="resource-provider-registration"></a>Регистрация поставщика ресурсов 

При принятии приглашения на общий ресурс Azure необходимо вручную зарегистрировать поставщик ресурсов Microsoft. Data Share в подписке. Выполните следующие действия, чтобы зарегистрировать поставщик ресурсов Microsoft. данных в подписке Azure. 

1. В портал Azure перейдите к разделу **подписки**.
1. Выберите подписку, которую вы используете для общего ресурса данных Azure.
1. Щелкните **поставщики ресурсов**.
1. Найдите файл Microsoft.
1. Щелкните **Зарегистрировать**.

## <a name="next-steps"></a>Следующие шаги

- Дополнительные сведения о ролях в Azure см. в статье [Определения ролей](../role-based-access-control/role-definitions.md).

