---
title: Руководство. Общий доступ за пределами организации в Azure Data Share
description: Руководство по совместному использованию данных клиентами и партнерами с помощью Azure Data Share
author: joannapea
ms.author: joanpo
ms.service: data-share
ms.topic: tutorial
ms.date: 07/10/2019
ms.openlocfilehash: 8749f7dee2ceeb09e37cc97d4e5bfe76c52e2da6
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/25/2019
ms.locfileid: "75438735"
---
# <a name="tutorial-share-data-using-azure-data-share"></a>Руководство. Совместное использование данных с помощью Azure Data Share  

Из этого руководства вы узнаете, как настроить новый Azure Data Share и начать предоставлять свои данные клиентам и партнерам за пределами вашей организации Azure. 

Из этого руководства вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * создать общий доступ к данным;
> * добавить наборы данных в общий доступ к данным;
> * включить расписание синхронизации для общего доступа к данным; 
> * добавить получателей для общего доступа к данным. 

## <a name="prerequisites"></a>предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/), прежде чем начинать работу.
* Адрес электронной почты для входа получателей в Azure (псевдонимы электронной почты не поддерживаются).

### <a name="share-from-a-storage-account"></a>Совместное использование из учетной записи хранения

* Учетная запись хранения Azure. Если у вас ее еще нет, вы можете создать [Учетную запись службі хранилища Azure](https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account)
* Разрешение на добавление назначения ролей в учетную запись хранения с разрешением *Microsoft.Authorization/role assignments/write*. Это разрешение назначено роли владельца. 

### <a name="share-from-a-sql-based-source"></a>Совместное использование из источника на основе SQL

* База данных SQL Azure или хранилище данных SQL Azure с таблицами и представлениями, к которым вы хотите предоставить общий доступ.
* Разрешение на доступ к хранилищу данных для общего ресурса данных. Это можно обеспечить следующим образом. 
    1. Укажите себя в качестве администратора Azure Active Directory для сервера.
    1. Подключитесь к хранилищу данных SQL Azure или базе данных SQL Azure с использованием Azure Active Directory.
    1. Используйте редактор запросов (предварительная версия) для выполнения следующего сценария, чтобы добавить MSI Data Share в качестве роли db_owner. Необходимо подключиться с помощью Active Directory, а не аутентификации SQL Server. 
    
```sql
    create user <share_acct_name> from external provider;     
    exec sp_addrolemember db_owner, <share_acct_name>; 
```                   
Обратите внимание на то, что *<share_acc_name>*  — это имя вашей учетной записи Data Share. Если вы еще не создали учетную запись Data Share, вы можете вернуться к этому требованию позже.  

* [Пользователь Базы данных SQL Azure с доступом `db_owner`](https://docs.microsoft.com/azure/sql-database/sql-database-manage-logins#non-administrator-users) для навигации и выбора таблиц и представлений, к которым необходимо предоставить общий доступ. 

* Доступ к брандмауэру для IP-адреса клиента SQL Server Это можно обеспечить следующим образом. 1. Перейдите к разделу *Брандмауэры и виртуальные сети* 1. Чтобы разрешить доступ к службам Azure, щелкните переключатель **Вкл.** 

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портал Azure](https://portal.azure.com/).

## <a name="create-a-data-share-account"></a>Создание учетной записи для общего доступа к данным

Создайте ресурс Azure Data Share в группе ресурсов Azure.

1. Нажмите кнопку **Создать ресурс** (+) в левом верхнем углу окна портала.

1. Найдите *Data Share*.

1. Выберите Data Share и команду **Создать**.

1. Укажите основные сведения о ресурсе Azure Data Share, указав следующую информацию. 

     **Параметр** | **Рекомендуемое значение** | **Описание поля**
    |---|---|---|
    | Имя | *datashareacount* | Укажите имя вашей учетной записи Data Share. |
    | Subscription | Ваша подписка | Выберите подписку Azure, которую нужно использовать для своей учетной записи Data Share.|
    | группа ресурсов. | *test-resource-group* | Воспользуйтесь существующей группой ресурсов или создайте новую. |
    | Location | *Восточная часть США 2* | Выберите регион для учетной записи Data Share.
    | | |

1. Выберите команду **Создать**, чтобы подготовить учетную запись Data Share. Подготовка новой учетной записи для общего доступа к данным обычно занимает около 2 минут или меньше. 

1. Когда развертывание будет завершено, выберите **Перейти ресурсу**.

## <a name="create-a-data-share"></a>Создание Data Share

1. Перейдите на страницу "Обзор Data Share".

    ![Общий доступ к данным](./media/share-receive-data.png "Общий доступ к данным") 

1. Выберите команду **Начать совместное использование данных**.

1. Нажмите кнопку **Создать**.   

1. Введите сведения для Data Share. Укажите имя, описание содержимого и условия использования (необязательно). 

    ![EnterShareDetails](./media/enter-share-details.png "Введите сведения об общем ресурсе") 

1. Выберите **Продолжить**

1. Чтобы добавить наборы данных для Data Share, выберите **Добавить наборы данных**. 

    ![Наборы данных](./media/datasets.png "Наборы данных")

1. Выберите тип набора данных, который хотите добавить. При предоставлении общего доступа из Базы данных SQL Azure или хранилища SQL Azure вам будет предложено ввести учетные данные SQL. Выполните проверку подлинности с помощью пользователя, созданного в рамках предварительных требований.

    ![AddDatasets](./media/add-datasets.png "Добавление наборов данных")    

1. Перейдите к объекту, доступ к которому нужно предоставить, и выберите "Добавить наборы данных". 

    ![SelectDatasets](./media/select-datasets.png "Выбор наборов данных")    

1. На вкладке "Получатели" введите адреса электронной почты получателей данных, выбрав команду "+Добавить получателя". 

    ![AddRecipients](./media/add-recipient.png "Добавление получателей") 

1. Выберите **Продолжить**

1. Если хотите, чтобы потребитель данных мог получать добавочные обновления ваших данных, включите создание моментальных снимков по расписанию. 

    ![EnableSnapshots](./media/enable-snapshots.png "Включение моментальных снимков") 

1. Выберите время начала и интервал повторения. 

1. Выберите **Продолжить**

1. На вкладке "Просмотр и создание" просмотрите содержимое пакета, параметры, получателей и параметры синхронизации. Нажмите кнопку **Создать**

Azure Data Share создан, и получатель Data Share готов принять ваше приглашение. 

## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как создать Azure Data Share и пригласить получателей. Чтобы узнать больше о том, как потребитель данных может получить и принять Data Share, см. пособие о том, как [принять и получить данные](subscribe-to-data-share.md). 
