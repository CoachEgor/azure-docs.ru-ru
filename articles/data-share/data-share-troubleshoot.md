---
title: Устранение неполадок в Azure Data Share
description: Узнайте, как устранять неполадки с приглашениями и ошибками при создании или получении общих ресурсов данных с помощью общего ресурса данных Azure.
services: data-share
author: jifems
ms.author: jife
ms.service: data-share
ms.topic: troubleshooting
ms.date: 10/15/2020
ms.openlocfilehash: e29c640494a18bb3be2125a5b53b4f943521fe6c
ms.sourcegitcommit: 1d6ec4b6f60b7d9759269ce55b00c5ac5fb57d32
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2020
ms.locfileid: "94579153"
---
# <a name="troubleshoot-common-issues-in-azure-data-share"></a>Устранение распространенных неполадок в Azure Data Share 

В этой статье показано, как устранять распространенные проблемы, связанные с общей папкой данных Azure. 

## <a name="azure-data-share-invitations"></a>Приглашения Azure Data Share 

В некоторых случаях, когда новый пользователь нажимает кнопку **принять приглашение** из отправленного вами приглашения по электронной почте, ему может быть предоставлен пустой список приглашений. 

![Нет приглашений](media/no-invites.png)

Это может быть вызвано приведенными ниже причинами.

* **Служба Azure Data Share не зарегистрирована в качестве поставщика ресурсов для любой подписки Azure в клиенте Azure.** Эта проблема возникает, если в клиенте Azure нет ресурса Data Share. Когда вы создаете ресурс Azure Data Share, он автоматически регистрирует поставщика ресурсов в подписке Azure. Вы также можете вручную зарегистрировать службу Data Share, выполнив следующие действия. Вам потребуется роль участника Azure, чтобы выполнить эти действия.

    1. На портале Azure перейдите к **подпискам**
    1. Выберите подписку для создания ресурса Azure Data Share.
    1. Щелкните **Поставщики ресурсов**
    1. Выполните поиск **Microsoft.DataShare**.
    1. Щелкните **Зарегистрировать**. 

    Для выполнения этих действий вам потребуется [роль участника Azure](../role-based-access-control/built-in-roles.md#contributor) в подписке Azure. 

* **Приглашение отправляется в псевдоним электронной почты вместо адреса электронной почты для входа в Azure.** Если вы зарегистрировали службу Azure Data Share или уже создали ресурс Data Share в клиенте Azure, но по-прежнему не видите приглашение, это может быть вызвано тем, что поставщик указал ваш псевдоним электронной почты в качестве получателя вместо адреса электронной почты для входа в Azure. Обратитесь к поставщику данных и убедитесь, что он отправил приглашение на ваш адрес электронной почты для входа в Azure, а не на другой адрес.

* **Приглашение уже принято.** Ссылка в сообщении электронной почты открывает страницу приглашения Data Share на портале Azure только с ожидающими приглашениями. Если вы уже приняли приглашение, оно больше не будет отображаться на странице приглашения Data Share. Перейдите к ресурсу Data Share, который использовался для принятия приглашения, чтобы просмотреть полученные общие папки, и настройте целевой параметр кластера Azure Data Explorer.

## <a name="error-when-creating-or-receiving-a-new-share"></a>Ошибка при создании или получении нового общего ресурса

"Не удалось добавить наборы данных"

«Не удалось отобразить наборы данных»

"Не удается предоставить доступ к общему ресурсу данных x к y"

"У вас нет необходимых разрешений для x"

"Не удалось добавить разрешения на запись для общей учетной записи Azure Data Share в один или несколько выбранных ресурсов"

Если при создании новой общей папки вы получаете любое из указанных выше сообщений об ошибках, добавляя наборы данных или сопоставления, это может быть вызвано недостаточными разрешениями для хранилища Azure. Необходимые разрешения см. в разделе [роли и требования](concepts-roles-permissions.md) . 

Необходимо разрешение на запись для совместного использования или получения данных из хранилища данных Azure, которое обычно существует в роли **участника** . 

Если вы впервые используете или получаете данные из хранилища данных Azure, вам также потребуются разрешения *Майкрософт. Авторизация, назначение ролей и запись* , которые обычно существуют в роли **владельца** . Даже если вы создали ресурс хранилища данных Azure, он не будет автоматически создавать владельца ресурса. С соответствующим разрешением служба общих ресурсов Azure автоматически предоставит доступ к хранилищу данных для управляемого удостоверения общего ресурса данных. Выполнение этого процесса может занять несколько минут. Если у вас возникли проблемы из-за этой задержки, повторите попытку через несколько минут.

Для совместного использования на основе SQL требуются дополнительные разрешения. Подробный список необходимых условий см. [в разделе Общие сведения из источников SQL](how-to-share-from-sql.md) .

## <a name="snapshot-failed"></a>Сбой моментального снимка
Сбой моментального снимка может быть вызван различными причинами. Подробное сообщение об ошибке можно найти, щелкнув время начала моментального снимка, а затем состояние каждого набора данных. Ниже приведены распространенные причины сбоя моментального снимка.

* Общая папка данных не имеет разрешения на чтение из исходного хранилища данных или запись в целевое хранилище данных. Подробные требования к разрешениям см. в разделе [роли и требования](concepts-roles-permissions.md) . Если вы впервые занимаетесь созданием моментального снимка, вам может потребоваться несколько минут для предоставления общему ресурсу данных доступа к хранилищу данных Azure. Подождите несколько минут и повторите попытку.
* Подключение к общему ресурсу данных в исходном или целевом хранилище данных блокируется брандмауэром.
* Общий набор данных или исходное или целевое хранилище данных удалены.

Для источников SQL ниже приведены дополнительные причины сбоев моментальных снимков. 

* Исходный или целевой скрипт SQL для предоставления разрешения на доступ к данным не выполняется. Для базы данных SQL Azure или Azure синапсе Analytics (ранее — хранилище Azure SQL) она выполняется с использованием проверки подлинности SQL, а не Azure Active Directory проверки подлинности.  
* Исходное или целевое хранилище данных SQL приостановлено.
* Типы данных SQL не поддерживаются процессом создания моментальных снимков или целевым хранилищем данных. Дополнительные сведения см. в разделе " [общий доступ из источников SQL](how-to-share-from-sql.md#supported-data-types) ".
* Исходное или целевое хранилище данных SQL заблокировано другими процессами. Общая папка данных Azure не применяет блокировки к исходному и целевому хранилищу данных SQL. Однако существующие блокировки в источнике и целевом хранилище данных SQL приведут к сбою моментального снимка.
* На целевую таблицу SQL ссылается ограничение внешнего ключа. Если во время создания моментального снимка целевая таблица с таким именем уже существует, Общая папка данных Azure удаляет таблицу и создает новую таблицу. Если на целевую таблицу SQL ссылается ограничение FOREIGN KEY, таблица не может быть удалена.
* Конечный CSV-файл создается, но данные не могут быть прочитаны в Excel. Это может произойти, если исходная таблица SQL содержит данные с символами, отличными от английского. В Excel выберите вкладку "получить данные" и выберите CSV-файл, а затем — "источник файла как 65001: Юникод" и "загрузить данные".

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать, как приступить к обмену данными, перейдите к [этому](share-your-data.md) руководству. 

Чтобы узнать, как получать данные, перейдите к руководству по [принятию и получению данных](subscribe-to-data-share.md) .