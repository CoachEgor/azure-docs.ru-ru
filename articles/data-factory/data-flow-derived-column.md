---
title: Преобразование «Производный столбец» в потоке сопоставления данных
description: Узнайте, как преобразовать масштабируемые данные в фабрике данных Azure с помощью преобразования «Производный столбец потока данных сопоставления».
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 10/15/2019
ms.openlocfilehash: 66396de52b3709c1d9357f32a375a29a8dcdbd1d
ms.sourcegitcommit: 57669c5ae1abdb6bac3b1e816ea822e3dbf5b3e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2020
ms.locfileid: "77048753"
---
# <a name="derived-column-transformation-in-mapping-data-flow"></a>Преобразование «Производный столбец» в потоке сопоставления данных

Преобразование «Производный столбец» используется для создания новых столбцов в потоке данных или для изменения существующих полей.

## <a name="derived-column-settings"></a>Параметры производного столбца

Чтобы переопределить существующий столбец, выберите его через раскрывающийся список столбцов. В противном случае используйте поле выбора столбца в качестве текстового поля и введите имя нового столбца. Чтобы создать выражение производного столбца, щелкните поле "введите выражение", чтобы открыть [Построитель выражений потока данных](concepts-data-flow-expression-builder.md).

![Параметры производного столбца](media/data-flow/dc1.png "Параметры производного столбца")

Чтобы добавить дополнительные производные столбцы, наведите указатель мыши на существующий производный столбец и щелкните значок «плюс». Выберите либо **Добавить столбец** , либо **шаблон добавить столбец**. Шаблоны столбцов могут быть полезны, если имена столбцов являются переменными из источников. Дополнительные сведения см. в разделе [шаблоны столбцов](concepts-data-flow-column-pattern.md).

![Выбор нового производного столбца](media/data-flow/columnpattern.png "Выбор нового производного столбца")

## <a name="build-schemas-in-output-schema-pane"></a>Схемы сборки в области выходной схемы

Столбцы, которые вы изменяете и добавляете в схему, перечислены на панели выходная схема. Здесь можно в интерактивном режиме создавать простые и сложные структуры данных. Чтобы добавить дополнительные поля, выберите **Добавить столбец**. Чтобы создать иерархии, выберите **Добавить подстолбец**.

![Добавить подстолбец](media/data-flow/addsubcolumn.png "Добавить подстолбец")

Дополнительные сведения об обработке сложных типов в потоке данных см. [в разделе Обработка JSON в потоке данных сопоставления](format-json.md#mapping-data-flow-properties).

![Добавить сложный столбец](media/data-flow/complexcolumn.png "Добавить столбцы")

## <a name="data-flow-script"></a>Скрипт потока данных

### <a name="syntax"></a>Синтаксис

```
<incomingStream>
    derive(
           <columnName1> = <expression1>,
           <columnName2> = <expression2>,
           each(
                match(matchExpression),
                <metadataColumn1> = <metadataExpression1>,
                <metadataColumn2> = <metadataExpression2>
               )
          ) ~> <deriveTransformationName>
```

### <a name="example"></a>Пример

Ниже приведен производный столбец с именем `CleanData`, который принимает входящий поток `MoviesYear` и создает два производных столбца. Первый производный столбец заменяет столбец `Rating` значением рейтинга в виде целочисленного типа. Второй производный столбец — это шаблон, который соответствует каждому столбцу, имя которого начинается с "Movies". Для каждого сопоставленного столбца создается столбец `movie`, равный значению сопоставленного столбца с префиксом "movie_". 

В интерфейсе фабрики данных это преобразование выглядит как на изображении ниже:

![Пример производного](media/data-flow/derive-script1.png "Пример производного")

Сценарий потока данных для этого преобразования находится в следующем фрагменте кода:

```
MoviesYear derive(
                Rating = toInteger(Rating),
                each(
                    match(startsWith(name,'movies')),
                    'movie' = 'movie_' + toString($$)
                )
            ) ~> CleanData
```

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [языке выражений потока данных сопоставления](data-flow-expression-functions.md).
