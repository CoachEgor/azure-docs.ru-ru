---
title: Трансформация производных столбцов в картографии потока данных
description: Узнайте, как преобразовывать данные в масштабе на фабрике данных Azure с помощью преобразования потока данных.
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 10/15/2019
ms.openlocfilehash: 06cb868071612ae2825e86cac32734dcd279c99f
ms.sourcegitcommit: b80aafd2c71d7366838811e92bd234ddbab507b6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81413845"
---
# <a name="derived-column-transformation-in-mapping-data-flow"></a>Трансформация производных столбцов в картографии потока данных

[!INCLUDE[appliesto-adf-xxx-md](includes/appliesto-adf-xxx-md.md)]

Используйте трансформацию производных столбцов для генерации новых столбцов в потоке данных или для изменения существующих полей.

## <a name="derived-column-settings"></a>Параметры производных столбцов

Чтобы переопределить существующий столбец, выберите его через выпадение столбца. В противном случае используйте поле выбора столбца в качестве текстового ящика и введите имя нового столбца. Чтобы построить выражение производного столбца, нажмите на поле «Введите выражение», чтобы открыть [builder выражения потока данных.](concepts-data-flow-expression-builder.md)

![Параметры производных столбцов](media/data-flow/dc1.png "Параметры производных столбцов")

Чтобы добавить дополнительные производные столбцы, нависните над существующей производной колонкой и щелкните значок plus. Выберите **столбец «Добавить»** или **добавить шаблон столбца.** Шаблоны столбцов могут пригодиться, если имена столбцов являются переменными от ваших источников. Для получения дополнительной [информации см.](concepts-data-flow-column-pattern.md)

![Новый выбор производных столбцов](media/data-flow/columnpattern.png "Новый выбор производных столбцов")

## <a name="build-schemas-in-output-schema-pane"></a>Сборка схем в панели схемы вывода

Столбцы, которые вы изменяете и добавляете в схему, перечислены в панели схемы вывода. Здесь можно интерактивно построить простые и сложные структуры данных. Чтобы добавить дополнительные поля, выберите **столбец Добавить.** Чтобы построить иерархии, выберите **Подколонку.**

![Добавление подколонки](media/data-flow/addsubcolumn.png "Добавление подколонки")

Для получения дополнительной информации об обработке сложных типов в потоке данных [см.](format-json.md#mapping-data-flow-properties)

![Добавление сложного столбца](media/data-flow/complexcolumn.png "Добавление столбцов")

## <a name="data-flow-script"></a>Скрипт потока данных

### <a name="syntax"></a>Синтаксис

```
<incomingStream>
    derive(
           <columnName1> = <expression1>,
           <columnName2> = <expression2>,
           each(
                match(matchExpression),
                <metadataColumn1> = <metadataExpression1>,
                <metadataColumn2> = <metadataExpression2>
               )
          ) ~> <deriveTransformationName>
```

### <a name="example"></a>Пример

Ниже приведен апогеонный столбец, `CleanData` `MoviesYear` названный, который берет входящий поток и создает два производных столбца. Первый производный `Rating` столбец заменяет столбец значением Рейтинга как целый тип. Второй выводный столбец представляет собой шаблон, который соответствует каждому столбце, название которого начинается с "фильмов". Для каждого совпадаемого столбца создается столбец, `movie` равный значению совпадаемого столбца, прикрепляемого к "movie_". 

В Data Factory UX это преобразование выглядит как приведенное ниже изображение:

![Пример получения](media/data-flow/derive-script1.png "Пример получения")

Сценарий потока данных для этого преобразования находится в фрагменте ниже:

```
MoviesYear derive(
                Rating = toInteger(Rating),
                each(
                    match(startsWith(name,'movies')),
                    'movie' = 'movie_' + toString($$)
                )
            ) ~> CleanData
```

## <a name="next-steps"></a>Дальнейшие действия

- Подробнее о [языке выражения потока карт.](data-flow-expression-functions.md)
