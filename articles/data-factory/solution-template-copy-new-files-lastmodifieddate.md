---
title: Копирование новых и измененных файлов, Дата последнего изменения с помощью фабрики данных Azure | Документация Майкрософт
description: Сведения об использовании шаблона решения для копирования новых и измененных файлов, Дата последнего изменения с помощью фабрики данных Azure.
services: data-factory
documentationcenter: ''
author: dearandyxu
ms.author: yexu
ms.reviewer: ''
manager: ''
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 3/8/2019
ms.openlocfilehash: cae75f4d64c8b3f74cc40e94a675c0f10a6bd9ec
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60312819"
---
# <a name="copy-new-and-changed-files-by-lastmodifieddate-with-azure-data-factory"></a>Копирование новых и измененных файлов, Дата последнего изменения с помощью фабрики данных Azure

В этой статье описывается шаблона решения, которые можно использовать для копирования новых и измененных файлов только по Дата последнего изменения из файлового хранилища в целевое хранилище. 

## <a name="about-this-solution-template"></a>Информация о шаблоне решения

Этот шаблон выделяет новых и измененных файлов только по их атрибутам **LastModifiedDate**, а затем копирует эти выбранные файлы из исходного хранилища данных в целевое хранилище данных.

Шаблон содержит одно действие:
- **Копировать** для копирования новых и измененных файлов только по Дата последнего изменения из хранилища файлов в целевое хранилище.

Шаблон определяет четыре параметра:
-  *FolderPath_Source* — это путь к папке, где можно прочитать файлы из исходного хранилища. Необходимо заменить значение по умолчанию с собственного путь к папке.
-  *FolderPath_Destination* — это путь к папке, где вы хотите скопировать файлы в целевое хранилище. Необходимо заменить значение по умолчанию с собственного путь к папке.
-  *LastModified_From* используется для выбора файлов, после которых дата последнего изменения атрибута или равно этому значению даты и времени.  Отобрать только новые файлы, которых не было скопировано последнее время, это значение даты и времени может быть время при активации конвейера время последнего. Вы можете заменить значение по умолчанию "2019-02-01T00:00:00Z" в ожидаемый Дата последнего изменения в часовом поясе UTC. 
-  *LastModified_To* используется для выбора файлов, в которых дата последнего изменения атрибута предшествует значения datetime. Отобрать только новые файлы, которых не было скопировано последнее время, это значение даты и времени может быть настоящее время.  Вы можете заменить значение по умолчанию "2019-02-01T00:00:00Z" в ожидаемый Дата последнего изменения в часовом поясе UTC. 

## <a name="how-to-use-this-solution-template"></a>Использование шаблона решения

1. Перейдите к шаблону **копировать новые файлы только с LastModifiedDate**. Создание **New** подключения к хранилищу хранилища источника. Исходное хранилище хранилища — это место для копирования файлов из.

    ![Создание нового подключения к источнику](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate1.png)
    
2. Сначала выберите хранилище **тип**. После ввода хранилище **имя учетной записи** и **ключ учетной записи**. Наконец, выберите **Готово**.

    ![Введите строку подключения](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate2.png)
    
3. Создание **New** подключения к хранилищу назначения. Конечное хранилище — это место для копирования файлов. Также необходимо указать сведения о соединении для целевого хранилища данных аналогично, как вы уже делали на шаге 2.

    ![Создание нового подключения к целевому хранилищу](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate3.png)

4. Выберите **этот шаблон используется**.

    ![Использовать этот шаблон](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate4.png)
    
5. На панели откроется доступный конвейер, как показано в следующем примере:

    ![Отображение конвейера](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate5.png)

6. Выберите **Отладка**, записать значение для **параметры** и выберите **Готово**.  В приведенном далее рисунке, параметров задается следующим образом.
   - **FolderPath_Source** = **/source/**
   - **FolderPath_Destination** = **/destination/**
   - **LastModified_From** =  **2019-02-01T00:00:00Z**
   - **LastModified_To** = **2019-03-01T00:00:00Z**
    
     Пример указывает, какой-либо файлы, которые последнего изменения в промежутке времени между *2019-02-01T00:00:00Z* и *2019-03-01T00:00:00Z* копируется из папки */source/*  в папку */destination/*.  Вы можете заменить эти примеры своими параметрами.
    
     ![Запуск конвейера](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate6.png)

7. Просмотрите результаты. Вы увидите только те файлы, которые изменялся в рамках настроенного timespan был скопирован в целевое хранилище.

    ![Просмотр результатов](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate7.png)
    
8. Теперь можно добавить триггер "переворачивающегося" windows для автоматизации этого конвейера, чтобы конвейер можно всегда периодически копирование новых и измененных файлов только по Дата последнего изменения.  Выберите **добавить триггер**и выберите **создать/изменить**.

    ![Просмотр результатов](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate8.png)
    
9. В окне **Add Triggers** (Добавление триггеров) выберите **+ Создать**.

    ![Просмотр результатов](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate9.png)

10. Выберите **"переворачивающегося" окна** тип триггера, задайте **каждые 15 минут** как повторения (можно изменить в любое время интервала), а затем выберите **Далее**.

    ![Создание триггера](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate10.png)    
    
11. Записать значение для **параметры выполнения триггера** как следующее, а затем выберите **Готово**.
    - **FolderPath_Source** = **/source/**.  Можно заменить папки в качестве источника хранилища данных.
    - **FolderPath_Destination** = **/destination/**.  Можно заменить папки в целевое хранилище данных.
    - **LastModified_From** =  **@trigger(). outputs.windowStartTime**.  Это системная переменная из триггера, определяющим время, когда конвейер было включено время последнего.
    - **LastModified_To** = **@trigger(). outputs.windowEndTime**.  Это системная переменная из триггера, определяющим время, при активации этого времени конвейера.
    
    ![Входные параметры](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate11.png)
    
12. Выберите **Опубликовать все**.
    
    ![Опубликовать все](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate12.png)

13. Создание новых файлов в папке источника данных исходного хранилища.  Теперь при ожидании конвейера, будут выполнены автоматически, и только новые файлы будут скопированы в целевое хранилище.

14. Выберите **мониторинг** вкладку на панели навигации слева и подождите около 15 минут, если повторения триггера задана каждые 15 минут. 

    ![Выбор мониторинга](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate14.png)

15. Просмотрите результаты. Вы увидите, конвейер будет запускаться автоматически каждые 15 минут, и будут скопированы только новые или измененные файлы из исходного хранилища в целевое хранилище, в каждый запуск конвейера.

    ![Просмотр результатов](media/solution-template-copy-new-files-lastmodifieddate/copy-new-files-lastmodifieddate15.png)
    
## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о службе фабрики данных Azure, службе интеграции данных в облаке](introduction.md)