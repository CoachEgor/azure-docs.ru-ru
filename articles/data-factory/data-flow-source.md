---
title: Преобразование источника в потоке данных сопоставления
description: Узнайте, как настроить преобразование источника в потоке данных сопоставления.
author: kromerm
ms.author: makromer
manager: anandsub
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 12/12/2019
ms.openlocfilehash: 7a438a52ab69810ecf49319c148f817da974ea61
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/25/2019
ms.locfileid: "75440218"
---
# <a name="source-transformation-in-mapping-data-flow"></a>Преобразование источника в потоке данных сопоставления 

Преобразование «источник» настраивает источник данных для потока данных. При проектировании потоков данных первым шагом всегда будет настройка преобразования «источник». Чтобы добавить источник, щелкните поле **Добавить источник** на холсте потока данных.

Для каждого потока данных требуется по крайней мере одно преобразование источника, но при необходимости можно добавить столько источников, сколько необходимо для выполнения преобразований данных. Вы можете объединить эти источники вместе с преобразованием «соединение», «уточняющий запрос» или «объединение».

Каждое преобразование источника связано ровно с одним набором данных фабрики данных. Набор данных определяет форму и расположение данных, которые необходимо записать или прочитать. При использовании файлового набора данных можно использовать подстановочные знаки и списки файлов в источнике для работы с несколькими файлами за раз.

## <a name="supported-source-connectors-in-mapping-data-flow"></a>Поддерживаемые исходные соединители в потоке данных сопоставления

Поток данных сопоставления соответствует подходу "извлечь", "Загрузка", "преобразование" (ELT) и работает с *промежуточными* наборами DataSet, которые находятся в Azure. В настоящее время в преобразовании источника можно использовать следующие наборы данных:
    
* [Хранилище BLOB-объектов Azure](connector-azure-blob-storage.md#mapping-data-flow-properties) (JSON, Avro, Text, Parquet)
* [Azure Data Lake Storage 1-го поколения](connector-azure-data-lake-store.md#mapping-data-flow-properties) (JSON, Avro, Text, Parquet)
* [Azure Data Lake Storage 2-го поколения](connector-azure-data-lake-storage.md#mapping-data-flow-properties) (JSON, Avro, Text, Parquet)
* [Azure синапсе Analytics](connector-azure-sql-data-warehouse.md#mapping-data-flow-properties)
* [База данных SQL Azure](connector-azure-sql-database.md#mapping-data-flow-properties)
* [Azure CosmosDB](connector-azure-cosmos-db.md#mapping-data-flow-properties)

Параметры, относящиеся к этим соединителям, находятся на вкладке **Параметры источника** . сведения об этих параметрах находятся в документации по соединителю. 

Фабрика данных Azure имеет доступ к более чем [90 собственным соединителям](connector-overview.md). Чтобы включить данные из других источников в потоке данных, используйте действие копирования для загрузки этих данных в одну из поддерживаемых промежуточных областей.

## <a name="source-settings"></a>Параметры источника

После добавления источника настройте его с помощью вкладки **Параметры источника** . Здесь можно выбрать или создать набор данных, на котором находятся исходные точки. Можно также выбрать схему и параметры выборки для данных.

![Вкладка "Параметры источника"](media/data-flow/source1.png "Вкладка "Параметры источника"")

Отклонение **схемы.** [смещение схемы](concepts-data-flow-schema-drift.md) — это способность фабрики данных в собственном коде управлять гибкими схемами в потоках данных без необходимости явно определять изменения столбцов.

* Установите флажок **Разрешить смещение схемы** , если исходные столбцы будут часто меняться. Этот параметр позволяет всем входящим полям источника проходить через преобразования в приемник.

* Выбор **типов столбцов с несмещенными типами** позволит фабрике данных обнаруживать и определять типы данных для каждого обнаруженного нового столбца. Если эта функция отключена, все смещенные столбцы будут иметь строковый тип.

**Проверить схему:** Если выбран параметр проверить схему, поток данных не будет выполняться, если входящие исходные данные не соответствуют определенной схеме набора данных.

**Пропустить число строк:** В поле пропустить число строк указывается, сколько строк следует игнорировать в начале набора данных.

**Выборка:** Включите выборку, чтобы ограничить количество строк в источнике. Используйте этот параметр при тестировании или выборки данных из источника для отладки.

**Многострочные строки:** Выберите многострочные строки, если исходный текстовый файл содержит строковые значения, охватывающие несколько строк, то есть символы новой строки в значении. Этот параметр доступен только в наборах данных DelimitedText.

Чтобы проверить правильность настройки источника, включите режим отладки и получите предварительную версию данных. Дополнительные сведения см. в разделе [режим отладки](concepts-data-flow-debug-mode.md).

> [!NOTE]
> Когда режим отладки включен, конфигурация ограничения строк в параметрах отладки будет перезаписывать параметр выборки в источнике при предварительном просмотре данных.

## <a name="projection"></a>Проекция

Подобно схемам в наборах данных, проекция в источнике определяет столбцы данных, типы и форматы из исходных. Для большинства типов наборов данных, таких как SQL и Parquet, проекция в источнике исправлена в соответствии со схемой, определенной в наборе данных. Если исходные файлы не являются строго типизированными (например, плоскими CSV-файлами, а не файлами Parquet), можно определить типы данных для каждого поля в преобразовании «источник».

![Параметры на вкладке "Проекция"](media/data-flow/source3.png "Проекция")

Если в текстовом файле не определена схема, выберите команду **определить тип данных** , чтобы фабрика данных выработала выборку и вывести типы данных. Выберите параметр **определить формат по умолчанию** , чтобы автоматически определить форматы данных по умолчанию. 

Типы данных столбца можно изменить в некотором преобразовании «Производный столбец». Используйте преобразование SELECT, чтобы изменить имена столбцов.

### <a name="import-schema"></a>Импорт схемы

Для наборов данных, таких как Avro и CosmosDB, которые поддерживают сложные структуры, определения схем не должны существовать в наборе данных. Таким образом, вы сможете нажать кнопку **Импорт схемы** на вкладке **проекция** для этих типов источников.

## <a name="optimize-the-source-transformation"></a>Оптимизация преобразования источника

На вкладке **Оптимизация** для преобразования источник может отображаться тип **исходной** секции. Этот параметр доступен, только если источником является база данных SQL Azure. Это связано с тем, что фабрика данных пытается сделать подключения параллельными для выполнения больших запросов к источнику базы данных SQL.

![Параметры исходной секции](media/data-flow/sourcepart3.png "Секционирование")

Вам не нужно секционировать данные в источнике базы данных SQL, но секции полезны для больших запросов. Вы можете создать секцию на основе столбца или запроса.

### <a name="use-a-column-to-partition-data"></a>Использование столбца для секционирования данных

В исходной таблице выберите столбец для секционирования. Также задайте количество секций.

### <a name="use-a-query-to-partition-data"></a>Использование запроса для секционирования данных

Можно выбрать секционирование соединений на основе запроса. Введите содержимое предиката WHERE. Например, введите year > 1980.

Дополнительные сведения о оптимизации в потоке данных сопоставления см. на [вкладке "оптимизация"](concepts-data-flow-overview.md#optimize).

## <a name="next-steps"></a>Дальнейшие действия

Начните создавать [Преобразование «Производный столбец](data-flow-derived-column.md) » и [Преобразование «выбор](data-flow-select.md)».
