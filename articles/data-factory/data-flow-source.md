---
title: Преобразование источника в картографии потока данных
description: Узнайте, как настроить преобразование источника в картировании потока данных.
author: kromerm
ms.author: makromer
manager: anandsub
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 12/12/2019
ms.openlocfilehash: 128b15bd5b3ba3c3ac891719bf5c3ec8e5137cce
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77023520"
---
# <a name="source-transformation-in-mapping-data-flow"></a>Преобразование источника в картографии потока данных 

Преобразование источника настраивает источник данных для потока данных. При проектировании потоков данных первым шагом всегда будет настройка преобразования источника. Чтобы добавить источник, нажмите на поле **Добавить Исход** ночню в холсте потока данных.

Каждый поток данных требует по крайней мере одного преобразования источника, но вы можете добавить столько источников, сколько необходимо для завершения преобразований данных. Вы можете присоединиться к этим источникам вместе с объединением, поиском или преобразованием профсоюза.

Каждая трансформация источника связана с одним набором данных Data Factory. Набор данных определяет форму и местоположение данных, которые вы хотите писать или читать. При использовании набора данных на основе файлов можно использовать подстановочные карты и списки файлов в источнике для работы с более чем одним файлом одновременно.

## <a name="supported-source-connectors-in-mapping-data-flow"></a>Поддерживаемые источники разъемов в потоке данных отображения

Картирование потока данных следует подходу экстракта, нагрузки, преобразования (ELT) и работает с *промежуточными* наборами данных, которые находятся в Azure. В настоящее время при преобразовании исходных данных можно использовать следующие наборы данных:
    
* [Лазурный Blob хранение](connector-azure-blob-storage.md#mapping-data-flow-properties) (JSON, Avro, Текст, Паркет)
* [Лазурное хранилище озер данных Gen1](connector-azure-data-lake-store.md#mapping-data-flow-properties) (JSON, Avro, Текст, Паркет)
* [Лазурное хранилище данных озера Gen2](connector-azure-data-lake-storage.md#mapping-data-flow-properties) (JSON, Avro, Текст, Паркет)
* [Azure Synapse Analytics](connector-azure-sql-data-warehouse.md#mapping-data-flow-properties)
* [База данных SQL Azure](connector-azure-sql-database.md#mapping-data-flow-properties)
* [Azure КосмосDB](connector-azure-cosmos-db.md#mapping-data-flow-properties)

Настройки, характерные для этих разъемов, расположены во вкладке **Параметры Исхода.** 

Фабрика данных Azure имеет доступ к более чем [90 нативным разъемым.](connector-overview.md) Чтобы включить данные из других источников в поток данных, используйте действие copy для загрузки этих данных в одну из поддерживаемых промежуточных областей.

## <a name="source-settings"></a>Параметры источника

После добавления источника настроите на вкладку **«Настройки источника».** Здесь вы можете выбрать или создать набор данных, в которых указывается источник. Вы также можете выбрать схему и варианты выборки для ваших данных.

![Вкладка настройки источника](media/data-flow/source1.png "Вкладка настройки источника")

**Тестово-соединение:** Проверьте, может ли служба искры потока данных успешно подключиться к подключенной службе, используемой в наборе исходных данных. Для включения этой функции необходимо ввести режим debug.

**Дрифт Schema:** [Schema Drift](concepts-data-flow-schema-drift.md) — это способность фабрики данных самостоятельно обрабатывать гибкие схемы в потоках данных без необходимости четко определять изменения столба.

* Проверьте поле **дрейфа схемы Разрешить,** если исходные столбцы будут часто меняться. Эта настройка позволяет всем входящим исходным полям проходить через преобразования в раковину.

* Выбор **типов вывоза перемещенных столбцов** поручает фабрике данных обнаруживать и определять типы данных для каждого обнаруженного нового столбца. С этой функцией выключен, все дрейфуные столбцы будут типа строки.

**Схема проверки:** При выборе схемы проверки поток данных не будет работать, если входящие исходные данные не соответствуют определенной схеме набора данных.

**Пропустить количество строк:** Поле подсчета строки пропуска определяет количество строк для проигонирования в начале набора данных.

**Выборка:** Включить выборку, чтобы ограничить количество строк из источника. Используйте этот параметр при тестировании или выборке данных из источника для отладки.

**Многолинейные ряды:** Выберите многолинейные строки, если исходный текстовый файл содержит значения строки, охватывающие несколько строк, т.е. новые строки внутри значения. Эта настройка доступна только в наборах данных DelimitedText.

Для проверки исходного кода настроен правильно, включите режим отладки и доберите предварительный просмотр данных. Для получения дополнительной [Debug mode](concepts-data-flow-debug-mode.md)информации см.

> [!NOTE]
> При включении режима отладки конфигурация лимита строки в настройках отладки перезаписывает настройки выборки в источнике во время предварительного просмотра данных.

## <a name="projection"></a>Проекция

Как и схемы в наборах данных, проекция в источнике определяет столбцы данных, типы и форматы из исходных данных. Для большинства типов наборов данных, таких как S'L и Parquet, проекция в источнике фиксируется, чтобы отразить схему, определенную в наборе данных. Когда исходные файлы не набраны сильно (например, плоские файлы csv, а не файлы Паркета), можно определить типы данных для каждого поля в преобразовании источника.

![Настройки на вкладке Проекция](media/data-flow/source3.png "Проекция")

Если в текстовом файле нет определенной схемы, выберите **тип данных Detect,** чтобы Фабрика данных провоцировала и сделала вывод о типах данных. Выберите **формат «Определение по умолчанию»** для автоматического обнаружения форматов данных по умолчанию.

**Схема сброса** сбрасывает проекцию на то, что определено в справочном наборе данных.

Можно изменить типы данных столбцов в преобразовании производное столбец. Используйте выбранное преобразование для изменения имен столбцов.

### <a name="import-schema"></a>Схема импорта

Кнопка **«Схема импорта»** на вкладке **«Проекция»** позволяет использовать активный кластер отладки для создания проекции схемы. Доступный в каждом типе источника, импорт схема здесь переопределяет проекцию, определяемую в наборе данных. Объект набора данных не будет изменен.

Это полезно в таких наборах данных, как Avro и CosmosDB, которые поддерживают сложные структуры данных, не требуют определения схемы, чтобы существовать в наборе данных.

## <a name="optimize-the-source-transformation"></a>Оптимизация преобразования источника

На вкладке **«Оптимизация»** для преобразования источника можно увидеть тип раздела **исходного кода.** Эта опция доступна только в том случае, если ваш источник — база данных Azure S'L. Это происходит потому, что Data Factory пытается сделать соединения параллельными для выполнения больших запросов против вашего источника базы данных S'L.

![Настройки раздела источника](media/data-flow/sourcepart3.png "Секционирование")

Не нужно переедать данные в источнике базы данных S'L, но разделы полезны для больших запросов. Раздел можно обосновать на столбце или запросе.

### <a name="use-a-column-to-partition-data"></a>Используйте столбец для данных разделов

Из исходной таблицы выберите столбец для раздела. Также установите количество перегородок.

### <a name="use-a-query-to-partition-data"></a>Используйте запрос для данных раздела

Вы можете выбрать раздел соединения на основе запроса. Введите содержимое предиката WHERE. Например, введите год > 1980 году.

Для получения дополнительной информации об оптимизации в [Optimize tab](concepts-data-flow-overview.md#optimize)потоке данных отображения см.

## <a name="next-steps"></a>Дальнейшие действия

Начните строить [трансформацию производных столбцов](data-flow-derived-column.md) и [выбранную трансформацию.](data-flow-select.md)
