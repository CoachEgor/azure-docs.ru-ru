---
title: Настройка преобразования исходного в функцию сопоставления потока данных фабрики данных Azure
description: Узнайте, как настроить преобразование источника в сопоставление потока данных.
author: kromerm
ms.author: makromer
ms.reviewer: douglasl
ms.service: data-factory
ms.topic: conceptual
ms.date: 02/12/2019
ms.openlocfilehash: 51c1ea7b554178f7fb3f264bf731ffd5872ceea2
ms.sourcegitcommit: 509e1583c3a3dde34c8090d2149d255cb92fe991
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2019
ms.locfileid: "66234545"
---
# <a name="source-transformation-for-mapping-data-flow"></a>Преобразование источника для сопоставления потока данных 

[!INCLUDE [notes](../../includes/data-factory-data-flow-preview.md)]

Преобразование источника настраивает источник данных для потока данных. Поток данных может содержать более одного преобразования исходного. При разработке данных потоки, всегда начинаются со знака преобразования исходного.

Каждый поток данных требуется хотя бы один источник преобразование. Добавьте столько источников при необходимости для выполнения преобразования данных. Вы можете присоединить этих источников, а также преобразование «соединение» или объединения преобразования.

> [!NOTE]
> При отладке потока данных, данные считываются из источника с помощью параметра выборки или ограничения источника отладки. Для записи данных в приемник, необходимо запустить потока данных из конвейера потока данных действия. 

![Параметры преобразования на вкладке Параметры источника источника](media/data-flow/source.png "источника")

Свяжите свое преобразование потока данных источника с ровно один набор данных фабрики данных. Набор данных определяет форму и расположение для записи или чтения из данных. Для работы с более чем одного файла за раз можно использовать подстановочные знаки и файл списки в источнике.

## <a name="data-flow-staging-areas"></a>Промежуточные области потока данных

Поток данных работает с *промежуточных* наборы данных, которые находятся в Azure. Используйте эти наборы данных для промежуточного хранения, когда преобразование данных. 

Фабрика данных имеет доступ к почти 80 собственный соединитель. Чтобы включить данные из этих других источников в потоке данных, используйте средство действие копирования для размещения этих данных в одном из потока данных набора данных промежуточной области.

## <a name="options"></a>Параметры

Выберите параметры схемы и выборки данных.

### <a name="allow-schema-drift"></a>Разрешение смещения схемы
Выберите **разрешить смещение схемы** если часто будет меняться исходных столбцов. Этот параметр допускает все исходные поля, входящего через преобразования в приемник.

### <a name="validate-schema"></a>Проверка схемы

Если входящие версию источника данных не соответствует определенной схемой, поток данных не сможет запуститься.

![Параметры общедоступного источника, отображающий пункты для проверки схемы, разрешить смещение схемы и выборки](media/data-flow/source1.png "общедоступного источника 1")

### <a name="sample-the-data"></a>Выборки данных
Включить **выборки** для ограничения числа строк из источника. Используйте этот параметр, при тестировании или выборку данных из источника для целей отладки.

## <a name="define-schema"></a>Определение схемы

Если исходные файлы не являются строго типизированными (для примера, неструктурированные файлы, а не файлы Parquet), определить типы данных для каждого поля здесь в преобразовании «источник».  

![Параметры преобразования на вкладке Определение схемы источника](media/data-flow/source2.png "источника 2")

Позже можно изменить имена столбцов в выберите преобразование. Используйте преобразование «Производный столбец», чтобы изменить типы данных. Для строго типизированных источников можно изменить типы данных в более поздней версии выберите преобразование. 

![Типы данных в преобразовании выберите](media/data-flow/source003.png "типы данных")

### <a name="optimize-the-source-transformation"></a>Оптимизация преобразования исходного

На **оптимизировать** вкладке для преобразования исходного, может появиться **источника** тип раздела. Этот параметр доступен только в том случае, если источником является база данных SQL Azure. Это обусловлено фабрики данных пытается подключиться параллельно выполнять большие запросы к источнику вашей базы данных SQL.

![Параметры секции источника](media/data-flow/sourcepart2.png "секционирование")

У вас нет для секционирования данных на исходной базы данных SQL, но секции удобны для больших запросов. Секции может быть основан на столбец или запроса.

### <a name="use-a-column-to-partition-data"></a>Использовать столбец для секционирования данных

Выберите столбец секции на вашей исходной таблицы. Также можно задайте максимальное число подключений.

### <a name="use-a-query-to-partition-data"></a>Используйте запрос для секционирования данных

Можно выбрать для секционирования на основе запроса подключения. Просто введите содержимое предикат WHERE. Например введите > 1980 году.

## <a name="source-file-management"></a>Управление исходными файлами

Выберите параметры для управления файлами в источнике. 

![Новые параметры источника](media/data-flow/source2.png "новые параметры")

* **Путь с символами подстановки**: Из папки источника выберите ряд файлов, соответствующих шаблону. Этот параметр переопределяет любой файл в определении набора данных.
* **Список файлов**: Это набор файлов. Создайте текстовый файл, который включает список файлов относительный путь для обработки. Выберите этот текстовый файл.
* **Столбец для хранения имени файла**: Store имя исходного файла в столбце данных. Укажите здесь новое имя для хранения строки имени файла.
* **После завершения**: Выберите ничего не делать с исходным файлом после данных выполнений последовательностей, удаляет исходный файл или переместить исходный файл. Пути для перемещения являются относительными.

### <a name="sql-datasets"></a>Наборы данных SQL

Если источником является база данных SQL или хранилище данных SQL, вы имеют дополнительные параметры для управления файлами исходного.

* **Запрос.** Введите SQL-запрос для своего источника. Этот параметр переопределяет любой таблицы, выбранной в наборе данных. Обратите внимание, что **Order By** предложения не поддерживаются здесь, но можно задать задании полной инструкции SELECT FROM. Можно также использовать определяемые пользователем табличные функции. **Выберите * из udfGetData()** является определяемой пользователем функции в SQL, возвращающее таблицу. Этот запрос создаст таблицу источника, который можно использовать в потоке данных.
* **Размер пакета**. Введите размер пакета для фрагментации больших объемов данных в операции чтения.

> [!NOTE]
> Операции с файлами выполните только в том случае, при запуске потока данных из конвейера (отладки конвейера или выполнения при запуске), который использует действие выполнения потока данных в конвейере. Операции с файлами *не* запустить в режиме отладки потока данных.

### <a name="projection"></a>Проекция

Как и схемы в наборах данных проекция в источнике определяет столбцы данных, типы и форматы из источника данных. 

![Параметры на вкладке проекции](media/data-flow/source3.png "проекции")

Если файл не содержит определенную схему, выберите **определить тип данных** , чтобы фабрика данных будет пример и логически выводить типы данных. Выберите **формат по умолчанию определение** Автообнаружение форматов данных по умолчанию. 

Можно изменить типы данных столбцов в «позже производный столбец». Используйте такое преобразование, выберите, чтобы изменить имена столбцов.

![Параметры для форматов данных по умолчанию](media/data-flow/source2.png "по умолчанию форматы")

## <a name="next-steps"></a>Дальнейшие действия

Начало построения [преобразование «Производный столбец»](data-flow-derived-column.md) и [выберите преобразование](data-flow-select.md).
