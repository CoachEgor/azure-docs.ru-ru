---
title: Руководство по сопоставление производительность потока данных и настройке в фабрике данных Azure | Документация Майкрософт
description: Узнайте о ключевых факторах, влияющих на производительность потоков данных в фабрике данных Azure при использовании сопоставления потоков данных.
author: kromerm
ms.topic: conceptual
ms.author: makromer
ms.service: data-factory
ms.date: 05/16/2019
ms.openlocfilehash: 7fca586083f70e0b0f7e593d5203392260cd2136
ms.sourcegitcommit: 778e7376853b69bbd5455ad260d2dc17109d05c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/23/2019
ms.locfileid: "66172345"
---
# <a name="mapping-data-flows-performance-and-tuning-guide"></a>Сопоставление производительность потоков данных и руководство по настройке

[!INCLUDE [notes](../../includes/data-factory-data-flow-preview.md)]

Azure фабрики сопоставление данных потоки данных предоставляют интерфейс без кода браузера для проектировать, развертывать и оркестрировать преобразования данных в масштабе.

> [!NOTE]
> Если вы не знакомы с ADF сопоставление потоки данных в целом, см. в разделе [Обзор потоки данных](concepts-data-flow-overview.md) перед чтением этой статьи.
>

> [!NOTE]
> При разработке и тестировании потоков данных в пользовательском Интерфейсе фабрики данных AZURE, не забудьте включить ключом Debug, чтобы можно выполнить в потоках данных в режиме реального времени без ожидания кластер для прогрева.
>

![Отладка кнопку](media/data-flow/debugb1.png "отладки")

## <a name="optimizing-for-azure-sql-database"></a>Оптимизация базы данных Azure SQL

![Исходной части](media/data-flow/sourcepart2.png "исходной части")

### <a name="you-can-match-spark-data-partitioning-to-your-source-database-partitioning-based-on-a-database-table-column-key-in-the-source-transformation"></a>Можно сопоставить Spark, секционирование данных на секционирование исходной базы данных на основании ключа столбца таблицы базы данных в преобразовании «источник»

* Перейдите к «Оптимизация» и выберите «Источник». Задайте тип либо столбцом определенной таблицы в запросе.
* Если вы выбрали «столбец», затем выберите столбец секционирования.
* Кроме того можно задайте максимальное число подключений для базы данных SQL Azure. Вы можете попробовать установите более высокое значение для получения параллельных подключений к базе данных. Тем не менее иногда может привести высокая производительность с ограниченное число подключений.

### <a name="set-batch-size-and-query-on-source"></a>Задать размер пакета и запроса в источнике

![Источник](media/data-flow/source4.png "источника")

* Задание размера пакета проинструктирует фабрики данных AZURE для хранения данных в наборах в памяти, а не по строкам. Это необязательный параметр, и вы можете исчерпать ресурсы на вычислительных узлах, если они не являются надлежащего размера.
* Параметр запроса можно разрешить для фильтрации строк справа в источнике, до получения даже для потока данных для обработки, что может быстрее приобретения начальных данных.
* Если вы используете запрос, можно добавить подсказки в запросе необязательно для вашей базы данных SQL Azure, т. е. READ UNCOMMITTED

### <a name="set-sink-batch-size"></a>Задать размер пакета в качестве приемника

![Приемник](media/data-flow/sink4.png "приемника")

* Во избежание обработки row-by-row floes ваши данные, задайте «размер пакета» в параметрах приемника для базы данных SQL Azure. Это заставит ADF, чтобы обработать базу данных, запись в пакеты на основании укажите размер.

### <a name="set-partitioning-options-on-your-sink"></a>Задайте параметры на приемнику секционирования

* Даже если у вас нет данные секционированы в таблицах целевой базы данных SQL Azure, перейдите на вкладку Оптимизировать и секционирование набора.
* Очень часто просто указываете ADF на использование циклического секционирование в кластерах Spark выполнения приводит к гораздо быстрее загрузки вместо принудительного все подключения из одной секции и узла данных.

### <a name="increase-size-of-your-compute-engine-in-azure-integration-runtime"></a>Увеличьте размер модуль вычислений в среде выполнения интеграции Azure

![Новый IR](media/data-flow/ir-new.png "новой среды выполнения Интеграции")

* Увеличьте количество ядер, которые будут увеличивать количество узлов, а также позволяют с большей вычислительной мощностью для запроса и записи базы данных SQL Azure.
* Попробуйте «Вычислений оптимизированных» и «Оптимизированные для памяти» параметры применяются дополнительные ресурсы на вычислительных узлах.

### <a name="disable-indexes-on-write"></a>Отключить индексы при записи
* Используйте действие ADF конвейера хранимой процедуры до вашего потока данных действие, которое отключает индексы для целевой таблицы, которые записываются из приемника.
* После действия потока данных добавьте еще одно действие хранимая процедура, которая включена этих индексов.

### <a name="increase-the-size-of-your-azure-sql-db"></a>Увеличить размер базы данных SQL Azure
* Запланировать изменение размера источника и приемника превышение, который ограничивает свой конвейер, чтобы повысить пропускную способность и уменьшить регулирование Azure, по достижении DTU базы данных SQL Azure.
* После завершения выполнения вашего конвейера вы можете изменить размер баз данных обратно в их нормальной скорости выполнения.

## <a name="next-steps"></a>Дальнейшие действия
См. в других статьях, поток данных:

- [Общие сведения о потоковых данных](concepts-data-flow-overview.md)
- [Действие потока данных](control-flow-execute-data-flow-activity.md)

