---
title: Преобразование изменения строки потока данных сопоставления фабрики данных Azure
description: Как обновить целевой объект базы данных с помощью преобразования "поток данных сопоставления фабрики данных Azure"
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.date: 03/12/2019
ms.openlocfilehash: e2cd69d5977b8ad1d9be2a71a006579fe3abfd23
ms.sourcegitcommit: 47b00a15ef112c8b513046c668a33e20fd3b3119
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69971251"
---
# <a name="azure-data-factory-alter-row-transformation"></a>Преобразование изменения строк в фабрике данных Azure

Используйте преобразование «изменение строки», чтобы задать политики вставки, удаления, обновления и Upsert для строк. В качестве выражений можно добавить условия "один ко многим". Эти условия следует указывать в порядке приоритета, так как каждая строка будет помечена политикой, соответствующей выражению первого сопоставления. Каждое из этих условий может привести к вставке, обновлению, удалению или восстановлена строк (или строк). Инструкция ALTER Row может формировать в базе данных как инструкции DDL & DML.

[!INCLUDE [notes](../../includes/data-factory-data-flow-preview.md)]

![Изменение параметров строк](media/data-flow/alter-row1.png "Изменение параметров строк")

> [!NOTE]
> Преобразования «изменение строк» будут действовать только для приемников базы данных в потоке данных. Действия, назначаемые строкам (вставки, обновления, удаления, Upsert), не будут выполняться во время сеансов отладки. Необходимо добавить задачу «Выполнение потока данных» в конвейер и использовать отладку или триггеры конвейера для внедрения политик изменения строк в таблицах базы данных.

## <a name="indicate-a-default-row-policy"></a>Указание политики строк по умолчанию

Создайте преобразование «изменение строки» и укажите политику строк с условием `true()`. Каждая строка, которая не соответствует ни одному из ранее определенных выражений, будет помечена для указанной политики строк. По умолчанию каждая строка, не отвечающая условному выражению, будет помечена для `Insert`.

![Изменение строки на одну политику](media/data-flow/alter-row4.png "Изменение строки на одну политику")

> [!NOTE]
> Чтобы пометить все строки одной политикой, можно создать условие для этой политики и указать условие в виде `true()`.

## <a name="view-policies"></a>Просмотреть политики

Включите режим отладки потока данных, чтобы просмотреть результаты политик изменения строк на панели предварительного просмотра данных. Выполнение инструкции ALTER Row в режиме отладки потока данных не приведет к созданию действий DDL или DML для целевого объекта. Чтобы эти действия были выполнены, выполните поток данных в рамках действия "выполнение потока данных" в конвейере.

![Изменение политик строк](media/data-flow/alter-row3.png "Изменение политик строк")

Это позволит проверить и просмотреть состояние каждой строки в зависимости от условий. Для каждого действия вставки, обновления, удаления и Upsert, которое будет происходить в потоке данных, отображается значок, указывающий, какое действие будет выполнено при выполнении потока данных в конвейере.

## <a name="sink-settings"></a>Параметры приемника

Для работы ALTER Row необходимо иметь тип приемника базы данных. В параметрах приемника следует задать разрешение для каждого действия, соответствующего условиям ALTER Row.

![Изменение приемника строк](media/data-flow/alter-row2.png "Изменение приемника строк")

Поведение по умолчанию в потоке данных ADF с приемниками базы данных заключается в вставке строк. Если вы хотите разрешить операции обновления, операции Upsert и удаления, необходимо также установить эти флажки в приемнике, чтобы разрешить действия.

> [!NOTE]
> Если при вставке, обновлении или операции Upsert изменить схему целевой таблицы в приемнике, поток данных завершится ошибкой. Чтобы изменить целевую схему в базе данных, необходимо выбрать параметр "повторно создать таблицу" в приемнике. Это приведет к удалению и повторному созданию таблицы с новым определением схемы.

## <a name="next-steps"></a>Следующие шаги

После преобразования «изменение строки» может потребоваться прием [данных в целевое хранилище данных](data-flow-sink.md).
