---
title: Картирование потока данных Повысьт Трансформация
description: Данные от строк до столбцов с помощью картографического потока данных Azure Data Factory преобразование
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 01/30/2019
ms.openlocfilehash: 980d7c3e1b1f69e76c091e2a4a74c8e5a4d0bb64
ms.sourcegitcommit: 5e49f45571aeb1232a3e0bd44725cc17c06d1452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81606361"
---
# <a name="azure-data-factory-pivot-transformation"></a>Трансформация стержня фабрики данных Azure

[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]

Сведение потока данных Фабрики данных Azure (ADF) используется как статистическая функция, которая преобразовывает уникальные значения строк из одного или нескольких столбцов группирования в отдельные столбцы. По сути сведение позволяет сформировать новые столбцы из значений строк (превратить данные в метаданные).

![Варианты поворота](media/data-flow/pivot1.png "поворот 1")

## <a name="group-by"></a>Group by

![Варианты поворота](media/data-flow/pivot2.png "поворот 2")

Сначала укажите столбцы, по которым вы хотите группировать данные для агрегирования сводных данных. Здесь можно задать несколько столбцов, используя знак "+" рядом со списком столбцов.

## <a name="pivot-key"></a>Ключ поворота

![Варианты поворота](media/data-flow/pivot3.png "поворот 3")

Ключом сведения называется столбец, по которому ADF выполняет сведение от строки к столбцу. По умолчанию каждое уникальное значение в наборе данных для этого поля будет сводиться к столбцу. Но вы можете при желании ввести из набора данных значения, которые хотите свести к значениям столбца. Это столбец, который определит новые столбцы, которые будут созданы.

## <a name="pivoted-columns"></a>Pivoted столбцы

![Варианты поворота](media/data-flow/pivot4.png "поворот 4")

Наконец, выберите агрегирование, которое вы хотите использовать для сведенных значений, и способ отображения столбцов в новой выходной проекции преобразования.

(Необязательно.) Вы можете задать шаблон именования с префиксом, серединой и суффиксом, которые будут добавляться к каждому новому имени столбца из значений строки.

Например, поворот "Продажи" по "Региону" приведет к появляются новые значения столбцов от каждой продажной стоимости, т.е. "25", "50", "1000" и т.д. Однако, если вы установите значение префикса "Продажи-", каждое значение столбца добавит "Продажи-" к началу значения.

![Варианты поворота](media/data-flow/pivot5.png "поворот 5")

Если для параметра Column Arrangement (Расположение столбцов) выбрано значение Normal (Обычное), все столбцы при сведении сгруппируются вместе с их агрегированными значениями. Вариант Lateral (Боковое) для расположения столбцов создает чередование столбцов и значений.

### <a name="aggregation"></a>Агрегирование

Чтобы настроить агрегирование, которое вам нужно для сведенных значений, щелкните поле в нижней части панели Pivoted Columns (Сведенные столбцы). Откроется построитель выражений потока данных Фабрики данных Azure, где вы можете создать выражение статистической обработки и присвоить описательный псевдоним новым агрегированным значениям.

Используйте язык выражений потока данных Фабрики данных Azure, чтобы описать преобразования сведенных столбцов в построителе выражений: https://aka.ms/dataflowexpressions.

## <a name="pivot-metadata"></a>Метаданные Pivot

Преобразование Pivot приведет к созданию новых имен столбцов, которые являются динамическими на основе входящих данных. Ключ Pivot создает значения для каждого нового имени столбца. Если вы не указали отдельные значения и хотите создать динамические названия столбцов для каждого уникального значения в вашем ключе Pivot, то uI не будет отображать метаданные в Inspect и не будет распространения столбца для преобразования раковины. Если вы установите значения для ключа Pivot, то ADF может определить новые имена столбцов, и эти названия столбцов будут доступны вам в отображении inspect и Sink.

### <a name="generate-a-new-model-from-dynamic-columns"></a>Создание новой модели из динамических столбцов

Pivot генерирует новые названия столбцов, динамически основанные на значениях строки. Эти новые столбцы можно превратить в метаданные, на которые можно ссылаться позже в потоке данных. Для этого нажмите на вкладку Data Preview. Все новые столбцы, генерируемые преобразованием Pivot, отображаются с "замыкаемой" в заголовке таблицы. Нажмите на кнопку "Карта дрейфующих", чтобы превратить эти новые столбцы в метаданные, что делает их частью модели потока данных.

![Колонки pivot](media/data-flow/newpivot1.png "Карта дрейфовала pivot колонны")

### <a name="landing-new-columns-in-sink"></a>Посадка новых столбцов в Sink

Даже с динамическими именами столбцов в Pivot, вы все равно можете погрузить новые имена и значения столбцов в магазин назначения. Просто установите "Разрешить Схема Дрифт" на в настройках раковины. Вы не увидите новых динамических имен в метаданных столбца, но опция дрейфа схемы позволит вам приземлиться данные.

### <a name="view-metadata-in-design-mode"></a>Просмотр метаданных в режиме проектирования

Если вы хотите просмотреть новые имена столбцов как метаданные в Inspect и хотите, чтобы столбцы явно распространялись на преобразование sink, затем установите явные значения во вкладке Pivot Key.

### <a name="how-to-rejoin-original-fields"></a>Повторное присоединение исходных полей
Преобразование "Сведение" будет передавать только те столбцы, которые использовались в действиях агрегирования, группирования и сведения. Если вы хотите включить другие столбцы из предыдущего шага в потоке, используйте Новую ветвь предыдущего шага и используйте шаблон самостоятельного соединения для подключения потока к исходным метаданным.

## <a name="next-steps"></a>Дальнейшие действия

Попробуйте [преобразование unpivot](data-flow-unpivot.md) превратить значения столбцов в значения строки. 
