---
title: Преобразование потоков данных сопоставления в Фабрике данных Azure с помощью функции сведения
description: Сведение данных из строк в столбцы с помощью преобразования «сводка потока данных сопоставления фабрики данных Azure»
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.date: 01/30/2019
ms.openlocfilehash: 0b68007f8c3383997f0d31888198af866d38b590
ms.sourcegitcommit: 83df2aed7cafb493b36d93b1699d24f36c1daa45
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2019
ms.locfileid: "71178666"
---
# <a name="azure-data-factory-pivot-transformation"></a>Преобразование сведения о фабрике данных Azure
[!INCLUDE [notes](../../includes/data-factory-data-flow-preview.md)]

Сведение потока данных Фабрики данных Azure (ADF) используется как статистическая функция, которая преобразовывает уникальные значения строк из одного или нескольких столбцов группирования в отдельные столбцы. По сути сведение позволяет сформировать новые столбцы из значений строк (превратить данные в метаданные).

![Параметры сведения](media/data-flow/pivot1.png "Сведение 1")

## <a name="group-by"></a>Группировать по

![Параметры сведения](media/data-flow/pivot2.png "Сведение 2")

Сначала укажите столбцы, по которым вы хотите группировать данные для агрегирования сводных данных. Здесь можно задать несколько столбцов, используя знак "+" рядом со списком столбцов.

## <a name="pivot-key"></a>Ключ сведения

![Параметры сведения](media/data-flow/pivot3.png "Сведение 3")

Ключом сведения называется столбец, по которому ADF выполняет сведение от строки к столбцу. По умолчанию каждое уникальное значение в наборе данных для этого поля будет сводиться к столбцу. Но вы можете при желании ввести из набора данных значения, которые хотите свести к значениям столбца. Это столбец, который определит новые столбцы, которые будут созданы.

## <a name="pivoted-columns"></a>Сведенные столбцы

![Параметры сведения](media/data-flow/pivot4.png "Сведение 4")

Наконец, выберите агрегирование, которое вы хотите использовать для сведенных значений, и способ отображения столбцов в новой выходной проекции преобразования.

(Необязательно.) Вы можете задать шаблон именования с префиксом, серединой и суффиксом, которые будут добавляться к каждому новому имени столбца из значений строки.

Например, сведение таблицы Sales (Продажи) по Region (Регион) создаст новые значения столбцов из каждого значения продаж, например "25", "50", "1000" и т. д. Однако если задать значение префикса «Sales-», то каждое значение столбца будет добавлять «Sales-» к началу значения.

![Параметры сведения](media/data-flow/pivot5.png "Сведение 5")

Если для параметра Column Arrangement (Расположение столбцов) выбрано значение Normal (Обычное), все столбцы при сведении сгруппируются вместе с их агрегированными значениями. Вариант Lateral (Боковое) для расположения столбцов создает чередование столбцов и значений.

### <a name="aggregation"></a>Агрегат

Чтобы настроить агрегирование, которое вам нужно для сведенных значений, щелкните поле в нижней части панели Pivoted Columns (Сведенные столбцы). Откроется построитель выражений потока данных Фабрики данных Azure, где вы можете создать выражение статистической обработки и присвоить описательный псевдоним новым агрегированным значениям.

Используйте язык выражений потока данных Фабрики данных Azure, чтобы описать преобразования сведенных столбцов в построителе выражений: https://aka.ms/dataflowexpressions.

## <a name="pivot-metadata"></a>Сводные метаданные

Преобразование «Сведение» создает новые имена столбцов, которые динамически основаны на входящих данных. Ключ сведения создает значения для каждого нового имени столбца. Если вы не укажете отдельные значения и хотите создать имена динамических столбцов для каждого уникального значения в ключе сведения, Пользовательский интерфейс не будет отображать метаданные в разделе Проверка и в преобразовании приемника не будет распространяться столбцов. Если задать значения для ключа сведения, ADF может определить новые имена столбцов, и эти имена столбцов будут доступны вам в сопоставлении проверки и приемника.

### <a name="generate-a-new-model-from-dynamic-columns"></a>Создать новую модель на основе динамических столбцов

Pivot динамически создает имена новых столбцов на основе значений строк. Эти новые столбцы можно преобразовать в метаданные, к которым можно будет обращаться позднее в потоке данных. Для этого перейдите на вкладку Предварительный просмотр данных. Все новые столбцы, создаваемые преобразованием «сведение», отображаются с значком «смещено» в заголовке таблицы. Нажмите кнопку "рассмещенную карту", чтобы преобразовать новые столбцы в метаданные, сделав их частью модели потока данных.

![Столбцы сведения](media/data-flow/newpivot1.png "Сопоставлять смещенные столбцы сводной таблицы")

### <a name="landing-new-columns-in-sink"></a>Создание новых столбцов в приемнике

Даже при использовании динамических имен столбцов в сводной таблице можно по-прежнему доместить имена и значения новых столбцов в целевое хранилище. Просто установите для параметра "Разрешить отклонение схемы" значение ON в параметрах приемника. Новые динамические имена не будут отображаться в метаданных столбца, но параметр «смещение схемы» позволит разместить данные.

### <a name="view-metadata-in-design-mode"></a>Просмотр метаданных в режиме конструктора

Если вы хотите просмотреть новые имена столбцов в виде метаданных в разделе Проверка и хотите, чтобы столбцы распространялись явным образом в преобразование приемника, установите явные значения на вкладке ключ сведения.

### <a name="how-to-rejoin-original-fields"></a>Повторное присоединение исходных полей
Преобразование "Сведение" будет передавать только те столбцы, которые использовались в действиях агрегирования, группирования и сведения. Если вы хотите включить другие столбцы из предыдущего шага в последовательности, используйте новую ветвь из предыдущего шага и используйте шаблон самосоединения для подключения последовательности к исходным метаданным.

## <a name="next-steps"></a>Следующие шаги

Выполните [Преобразование отмены свертывания](data-flow-unpivot.md) , чтобы преобразовать значения столбца в значения строк. 
