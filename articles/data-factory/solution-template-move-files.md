---
title: Перемещение файлов между хранилищем файлов
description: Узнайте, как использовать шаблон решения для перемещения файлов между файлами, используя Фабрику данных Azure.
services: data-factory
author: dearandyxu
ms.author: yexu
ms.reviewer: ''
manager: shwang
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 7/12/2019
ms.openlocfilehash: b3165daa06ed975df9ccb677699d3ceb449327ab
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74941954"
---
# <a name="move-files-with-azure-data-factory"></a>Перемещение файлов с помощью фабрики данных Azure

В этой статье описывается шаблон решения, который можно использовать для перемещения файлов из одной папки в другую между файлами. Один из распространенных сценариев использования этого шаблона: Файлы постоянно сбрасываются в папку посадки вашего исходного магазина. Создавая триггер расписания, конвейер ADF может периодически перемещать эти файлы из источника в хранилище назначения.  Способ, которым конвейер ADF достигает "движущихся файлов", получает файлы из папки посадки, копируя каждую из них в другую папку в магазине назначения, а затем удаляя те же файлы из папки посадки в хранилище исходного кода.

> [!NOTE]
> Имейте в виду, что этот шаблон предназначен для перемещения файлов, а не движущихся папок.  Если вы хотите переместить папку, изменив набор данных, чтобы сделать ее только для того, чтобы она содержала путь папки, а затем используя действие копирования и удалить действие со ссылкой на тот же набор данных, представляющий папку, необходимо быть очень осторожным. Дело в том, что новые файлы НЕ должны поступать в папку между операциями копирования и удаления. Если же в папку поступили новые файлы сразу после того, как действие копирования завершило копирование файлов, а действие Delete еще не начало работу, вероятно, что действие Delete удалит новые файлы, которые еще НЕ успели скопироваться в назначенное место.

## <a name="about-this-solution-template"></a>Информация о шаблоне решения

Этот шаблон получает файлы из исходного файла на основе магазина. Затем он перемещает каждого из них в магазин назначения.

Шаблон содержит пять действий:
- **GetMetadata** получает список объектов, включая файлы и субфолимы из папки в исходном магазине. Он не будет получать объекты рекурсивно. 
- **Фильтр фильтрует** список объектов из деятельности **GetMetadata,** чтобы выбрать только файлы. 
- **ForEach** получает список файлов из действия **фильтра,** а затем итерирует список и передает каждый файл в действие Copy и Delete.
- **Копирование** копий одного файла из источника в магазин назначения.
- **Удалить** тот же файл из исходного магазина.

Шаблон определяет четыре параметра:
- *SourceStore_Location* — это путь папки в исходном хранилище, из которой вы хотите перемещать файлы. 
- *SourceStore_Directory* является subfolder путь вашего источника магазина, где вы хотите переместить файлы из.
- *DestinationStore_Location* — это путь папки магазина назначения, куда вы хотите переместить файлы. 
- *DestinationStore_Directory* является subfolder путь вашего назначения магазин, где вы хотите переместить файлы.

## <a name="how-to-use-this-solution-template"></a>Использование шаблона решения

1. Перейдите к шаблону **файлов Move.** Выберите существующее соединение или создайте **новое** соединение с исходным файлом, из чего вы хотите переместить файлы. Имейте в виду, что **DataSource_Folder** и **DataSource_File** являются ссылкой на одно и то же соединение исходного файла.

    ![Создание нового подключения к источнику](media/solution-template-move-files/move-files1.png)

2. Выберите существующее соединение или создайте **новое** соединение с магазином файлов назначения, куда вы хотите переместить файлы.

    ![Создание нового подключения к целевому хранилищу](media/solution-template-move-files/move-files2.png)

3. Выберите **Используйте эту** вкладку шаблона.
    
4. Вы увидите конвейер, как в следующем примере:

    ![Отображение конвейера](media/solution-template-move-files/move-files4.png)

5. Выберите **отключать,** введите **параметры,** а затем выберите **Finish.**   Параметры представляют собой путь папки, по которому требуется переместить файлы из папки, и путь папки, по которому требуется переместить файлы. 

    ![Запуск конвейера](media/solution-template-move-files/move-files5.png)

6. Просмотрите результаты.

    ![Просмотр результатов](media/solution-template-move-files/move-files6.png)

## <a name="next-steps"></a>Дальнейшие действия

- [Копирование новых и измененных файлов lastModifiedDate с помощью фабрики данных Azure](solution-template-copy-new-files-lastmodifieddate.md)

- [Копирование файлов из нескольких контейнеров с помощью Фабрики данных Azure](solution-template-copy-files-multiple-containers.md)