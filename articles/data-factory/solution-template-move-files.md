---
title: Перемещение файлов между файловым хранилищем
description: Узнайте, как использовать шаблон решения для перемещения файлов между файловым хранилищем с помощью фабрики данных Azure.
services: data-factory
author: dearandyxu
ms.author: yexu
ms.reviewer: ''
manager: shwang
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 7/12/2019
ms.openlocfilehash: dc842ba0e7ca0f34b7dacb98322c4dc0cd056483
ms.sourcegitcommit: a5ebf5026d9967c4c4f92432698cb1f8651c03bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2019
ms.locfileid: "74931990"
---
# <a name="move-files-with-azure-data-factory"></a>Перемещение файлов с помощью фабрики данных Azure

В этой статье описывается шаблон решения, который можно использовать для перемещения файлов из одной папки в другую между файловыми хранилищами. Один из распространенных сценариев использования этого шаблона: файлы постоянно удаляются в целевую папку исходного хранилища. Создав триггер расписания, конвейер ADF может периодически перемещать эти файлы из источника в целевое хранилище.  Способ, которым конвейер ADF достигает "перемещения файлов", получает файлы из целевой папки, копируя их в другую папку в целевом хранилище, а затем удаляя те же файлы из целевой папки в исходном хранилище.

> [!NOTE]
> Имейте в виду, что этот шаблон предназначен для перемещения файлов, а не для перемещения папок.  Если необходимо переместить папку, изменив набор данных так, чтобы она содержала только путь к папке, а затем использовать действие копирования и удаления для ссылки на тот же набор данных, представляющий папку, необходимо соблюдать осторожность. Дело в том, что новые файлы НЕ должны поступать в папку между операциями копирования и удаления. Если же в папку поступили новые файлы сразу после того, как действие копирования завершило копирование файлов, а действие Delete еще не начало работу, вероятно, что действие Delete удалит новые файлы, которые еще НЕ успели скопироваться в назначенное место.

## <a name="about-this-solution-template"></a>Информация о шаблоне решения

Этот шаблон получает файлы из исходного хранилища на основе файлов. Затем каждый из них перемещается в целевое хранилище.

Шаблон содержит пять действий:
- Параметр **Metadata** возвращает список объектов, включая файлы и вложенные папки из папки в исходном хранилище. Объекты не будут извлекаться рекурсивно. 
- **Фильтр** Фильтрация списка объектов в действии с помощью **метаданных** для выбора только файлов. 
- **Foreach** получает список файлов из действия **фильтра** , а затем перебирает список и передает каждый файл действию копирования и удалению.
- **Копировать** копирует один файл из источника в целевое хранилище.
- **Delete** удаляет один и тот же файл из исходного хранилища.

Шаблон определяет два параметра.
- *FolderPath_SourceStore* — это путь к папке исходного хранилища, из которой нужно переместить файлы. 
- *FolderPath_DestinationStore* — это путь к папке конечного хранилища, куда нужно переместить файлы. 

## <a name="how-to-use-this-solution-template"></a>Использование шаблона решения

1. Перейдите к шаблону **Перемещение файлов** . Выберите существующее подключение или создайте **новое** подключение к исходному хранилищу файлов, из которого нужно переместить файлы. Имейте в виду, что **DataSource_Folder** и **DataSource_File** ссылаются на одно и то же подключение к исходному хранилищу файлов.

    ![Создание нового подключения к источнику](media/solution-template-move-files/move-files1.png)

2. Выберите существующее подключение или создайте **новое** подключение к целевому хранилищу файлов, куда нужно переместить файлы.

    ![Создание нового подключения к целевому хранилищу](media/solution-template-move-files/move-files2.png)

3. Выберите **Использовать этот шаблон**.

    ![Использование шаблона](media/solution-template-move-files/move-files3.png)
    
4. Вы увидите конвейер, как показано в следующем примере:

    ![Отображение конвейера](media/solution-template-move-files/move-files4.png)

5. Выберите **Отладка**, введите **Параметры**и нажмите кнопку **Готово**.   Параметры — это путь к папке, в которую нужно переместить файлы, и путь к папке, в которую нужно переместить файлы. 

    ![Запуск конвейера](media/solution-template-move-files/move-files5.png)

6. Просмотрите результаты.

    ![Просмотр результатов](media/solution-template-move-files/move-files6.png)

## <a name="next-steps"></a>Дальнейшие действия

- [Копирование новых и измененных файлов с помощью LastModifiedDate с фабрикой данных Azure](solution-template-copy-new-files-lastmodifieddate.md)

- [Копирование файлов из нескольких контейнеров с помощью фабрики данных Azure](solution-template-copy-files-multiple-containers.md)