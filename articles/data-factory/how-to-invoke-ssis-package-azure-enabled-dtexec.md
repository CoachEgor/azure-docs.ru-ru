---
title: Выполнение пакетов SQL Server Integration Services (SSIS) с помощью служебной программы dtexec с поддержкой Azure | Документация Майкрософт
description: Узнайте, как выполнять пакеты SQL Server Integration Services (SSIS) с помощью служебной программы dtexec с поддержкой Azure.
services: data-factory
documentationcenter: ''
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.topic: conceptual
ms.date: 09/21/2019
author: swinarko
ms.author: sawinark
ms.reviewer: douglasl
manager: craigg
ms.openlocfilehash: 80d4bd2f4f9ea4c451f312f05fd42fbc1ba433ab
ms.sourcegitcommit: a19bee057c57cd2c2cd23126ac862bd8f89f50f5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/23/2019
ms.locfileid: "71181331"
---
# <a name="run-sql-server-integration-services-ssis-packages-with-azure-enabled-dtexec-utility"></a>Запуск пакетов SQL Server Integration Services (SSIS) с помощью служебной программы dtexec с поддержкой Azure
В этой статье описывается программа командной строки **dtexec** (**азуредтексек**) с поддержкой Azure.  Он используется для запуска пакетов служб SSIS на Azure-SSIS Integration Runtime (IR) в фабрике данных Azure (ADF).

Традиционная служебная программа **dtexec** поставляется с SQL Server. Дополнительные сведения см. в документации по [программе dtexec](https://docs.microsoft.com/sql/integration-services/packages/dtexec-utility?view=sql-server-2017) .  Он часто вызывается сторонними оркестрации или планировщиками, такими как Active Batch, Control-M и т. д., для запуска пакетов служб SSIS в локальной среде.  Современная служебная программа **азуредтексек** поставляется со средством SQL Server Management Studio (SSMS).  Он также может вызываться сторонними orchestrations/планировщиками для выполнения пакетов служб SSIS в Azure.  Она упрощает работу & сдвиге или переносе пакетов служб SSIS в облако.  Если после миграции вы хотите использовать сторонние оркестрации или планировщики в повседневной работе, они теперь могут вызывать **азуредтексек** вместо **dtexec**.

**Азуредтексек** будет выполнять пакеты как действия по выполнению пакетов служб SSIS в конвейерах ADF. Дополнительные сведения см. в статье [Запуск пакетов служб SSIS в качестве действий ADF](https://docs.microsoft.com/azure/data-factory/how-to-invoke-ssis-package-ssis-activity) .  Его можно настроить с помощью среды SSMS, чтобы использовать приложение Azure Active Directory (AAD), которое создает конвейеры в ADF-файле.  Кроме того, его можно настроить для доступа к файловым системам, файловым ресурсам или файлам Azure, где хранятся пакеты.  В зависимости от значений, которые вы присваиваете параметрам вызова, **азуредтексек** создаст и запустит уникальный конвейер ADF с действием выполнить пакет SSIS.  Вызов **азуредтексек** с теми же значениями параметров приведет к повторному запуску существующего конвейера.  При вызове **азуредтексек** с новыми значениями для его параметров будет создан новый конвейер.

## <a name="prerequisites"></a>Предварительные требования
Чтобы использовать **азуредтексек**, скачайте и установите последнюю версию SSMS (версии 18,3 или более поздней) [отсюда.](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017)

## <a name="configure-azuredtexec-utility"></a>Настройка служебной программы Азуредтексек
При установке SSMS на локальном компьютере также будет установлена **азуредтексек**.  Чтобы настроить его параметры, запустите среду SSMS с параметром **запуска от имени администратора** и выберите пункт раскрывающегося меню элементы в раскрывающемся списке, **> перейти в Azure — > настроить dtexec с поддержкой Azure**.

![Настройка меню dtexec с поддержкой Azure](media/how-to-invoke-ssis-package-azure-enabled-dtexec/ssms-azure-enabled-dtexec-menu.png)

Это действие приведет к всплывающему окну **азуредтексекконфиг** , которое должно быть открыто с правами администратора для записи в файл **азуредтексек. Settings** .  Если вы не выполнили SSMS от имени администратора, появится окно контроля учетных записей (UAC), в котором будет введен пароль администратора для повышения привилегий.

![Настройка параметров dtexec, поддерживающих Azure](media/how-to-invoke-ssis-package-azure-enabled-dtexec/ssms-azure-enabled-dtexec-settings.png)

В окне **азуредтексекконфиг** можно ввести параметры конфигурации следующим образом:

- **ApplicationId**: Введите уникальный идентификатор приложения AAD, которое вы создали с нужными разрешениями для создания конвейеров в ADF-файле. Дополнительные сведения см. в статье [Создание приложения AAD и субъекта-службы с помощью портал Azureной](https://docs.microsoft.com/azure/active-directory/develop/howto-create-service-principal-portal) статьи.

- **AuthenticationKey**: Введите ключ проверки подлинности для приложения AAD.

- **ИД**клиента: Введите уникальный идентификатор клиента AAD, под которым будет создано приложение AAD.

- **SubscriptionId**: Введите уникальный идентификатор подписки Azure, в которой был создан ADF.

- **Группа ресурсов**: Введите имя группы ресурсов Azure, в которой был создан ADF.

- **Фактическое**:  Введите имя ADF, в котором будут созданы уникальные конвейеры с действием выполнение пакета служб SSIS на основе значений параметров, предоставленных при вызове **азуредтексек**.

- **Ирнаме**: Введите имя Azure-SSIS IR в ADF-файле, в котором будут выполняться пакеты, указанные в пути в формате UNC при вызове **азуредтексек** .

- **Паккажеакцессдомаин**: Введите учетные данные домена, чтобы получить доступ к пакетам по указанному UNC-пути при вызове **азуредтексек**.

- **Паккажеакцессусернаме**:  Введите учетные данные имени пользователя, чтобы получить доступ к пакетам по указанному UNC-пути при вызове **азуредтексек**.

- **Паккажеакцесспассворд**: Введите пароль для доступа к пакетам по UNC-пути, указанному при вызове **азуредтексек**.

- **LogPath**:  Введите UNC-путь к папке журнала, в которую будут записываться файлы журнала, выполняемые при выполнении пакета Azure-SSIS IR.

- **LogLevel**:  Введите выбранную область ведения журнала из стандартных базовых параметров**производительности** "**базовый**//" **со значением NULL**/для выполнения пакета на Azure-SSIS IR.

- **Логакцессдомаин**: Введите учетные данные домена для доступа к папке журнала по его UNC-пути при записи файлов журнала, если задано значение **logPath** , а **LogLevel** не равно **null**.

- **Логакцессусернаме**: Введите учетные данные имени пользователя, чтобы получить доступ к папке журнала по UNC-пути при записи файлов журнала, если задан параметр **logPath** , а **LogLevel** не равен **null**.

- **Логакцесспассворд**: Введите пароль, чтобы получить доступ к папке журнала по UNC-пути при записи файлов журнала, требуется при указании **logPath** и **LogLevel** не равно **null**.

- **Пипелиненамехашстрлен**: Введите длину создаваемых хэш-строк из значений параметров, которые вы задаете при вызове **азуредтексек**.  Строки будут использоваться для формирования уникальных имен для конвейеров ADF, которые запускают пакеты на Azure-SSIS IR.  Длина 32 символов достаточна.

Если вы планируете хранить пакеты и файлы журналов в локальных файловых системах или общих файловых ресурсах в локальной среде, следует присоединить Azure-SSIS IR к виртуальной сети, подключенной к локальной среде, чтобы получать пакеты и записывать файлы журналов, см. раздел [Присоединение Azure-SSIS IR к виртуальной сети](https://docs.microsoft.com/azure/data-factory/join-azure-ssis-integration-runtime-virtual-network) . Статья содержит дополнительные сведения.

Чтобы не показывать конфиденциальные значения, записанные в файл **азуредтексек. Settings** в виде обычного текста, мы будем кодировать их в строки кодировки Base64.  При вызове **азуредтексек**все строки в кодировке Base64 будут декодированы обратно в исходные значения.  Вы можете дополнительно защитить файл **азуредтексек. Settings** , ограничив учетные записи, которые имеют доступ к нему.

## <a name="invoke-azuredtexec-utility"></a>Вызов служебной программы Азуредтексек
Вы можете вызвать **азуредтексек** в командной строке и указать соответствующие значения для конкретных параметров в сценарии вариантов использования, например:

`AzureDTExec.exe
  /F \\MyStorageAccount.file.core.windows.net\MyFileShare\MyPackage.dtsx
  /Conf \\MyStorageAccount.file.core.windows.net\MyFileShare\MyConfig.dtsConfig
  /Conn "MyConnectionManager;Data Source=MyDatabaseServer.database.windows.net;User ID=MyAdminUsername;Password=MyAdminPassword;Initial Catalog=MyDatabase"
  /Set \package.variables[MyVariable].Value;MyValue
  /De MyEncryptionPassword`

Вызов **азуредтексек** предлагает аналогичные параметры, такие как вызов программы **dtexec**. Дополнительные сведения см. в документации по [программе dtexec](https://docs.microsoft.com/sql/integration-services/packages/dtexec-utility?view=sql-server-2017) .  В настоящее время поддерживаются следующие параметры:

- **/F [ILE]** : Загружает пакет, хранящийся в файловой системе, общей папке или файлах Azure.  В качестве значения этого параметра можно указать UNC-путь к файлу пакета в файловой системе, общей папке или службе файлов Azure с расширением DTSX.  Если указанный UNC-путь содержит пробелы, необходимо заключить весь путь в кавычки.

- **/Conf [igFile]** : Указывает файл конфигурации, из которого извлекаются значения.  С помощью этого параметра можно задать конфигурацию времени выполнения для пакета, отличающуюся от указанной во время разработки.  Можно сохранить различные параметры в XML-файле конфигурации, а затем загрузить их перед выполнением пакета.  Дополнительные сведения см. в статье о [конфигурациях пакетов служб SSIS](https://docs.microsoft.com/sql/integration-services/packages/package-configurations?view=sql-server-2017) .  В качестве значения этого параметра можно указать UNC-путь для файла конфигурации в файловой системе, общей папке или службе файлов Azure с расширением dtsConfig.  Если указанный UNC-путь содержит пробелы, необходимо заключить весь путь в кавычки.

- **/Conn [ection]** : Указывает строки подключения для существующих диспетчеров соединений в пакете.  С помощью этого параметра можно задать строки подключения времени выполнения для существующих диспетчеров соединений в пакете, которые отличаются от указанных во время разработки.  В качестве значения для этого параметра можно указать следующее: `connection_manager_name_or_id;connection_string [[;connection_manager_name_or_id;connection_string]...]`.

- **/Set**: Переопределяет конфигурацию параметра, переменной, свойства, контейнера, регистратора, перечислителя foreach или соединения в пакете.  Этот параметр можно указать несколько раз.  В качестве значения для этого параметра можно указать следующее: `property_path;value`, например, `\package.variables[counter].Value;1` переопределяет значение `counter` переменной как 1.  С помощью мастера настройки пакета можно найти, скопировать и вставить значение `property_path` для элементов в пакете, значение которого необходимо переопределить. Дополнительные сведения см. в документации [мастера настройки пакета](https://docs.microsoft.com/sql/integration-services/package-configuration-wizard-ui-reference?view=sql-server-2014) .

- **/De [шифрования]** : Задает пароль расшифровки для пакета, настроенного с уровнем защиты **EncryptAllWithPassword**/**EncryptSensitiveWithPassword** .

## <a name="next-steps"></a>Следующие шаги
После создания и выполнения в них уникальных конвейеров, исполняя действие пакета Execute **SSIS, их**можно изменить или повторно запустить на портале ADF. Дополнительные сведения см. в статье [Запуск пакетов служб SSIS в качестве ADF](https://docs.microsoft.com/azure/data-factory/how-to-invoke-ssis-package-ssis-activity) .
