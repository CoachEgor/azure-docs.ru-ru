---
title: Выполняйте пакеты интеграционных служб серверов S'L (SSIS) с утилитой Dtexec с поддержкой Azure
description: Узнайте, как выполнять пакеты интеграционных служб серверов S'L Server (SSIS) с утилитой Dtexec с поддержкой Azure.
services: data-factory
documentationcenter: ''
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.date: 04/12/2020
author: swinarko
ms.author: sawinark
manager: mflasko
ms.reviewer: douglasl
ms.openlocfilehash: 006d4fa9ed09170a423e796e893b817e079e861b
ms.sourcegitcommit: 8dc84e8b04390f39a3c11e9b0eaf3264861fcafc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2020
ms.locfileid: "81261943"
---
# <a name="run-sql-server-integration-services-packages-with-the-azure-enabled-dtexec-utility"></a>Запуск пакетов услуг интеграции серверов с помощью утилиты Dtexec с поддержкой Azure
В этой статье описывается утилита быстрого запроса с поддержкой Dtexec с поддержкой Azure (AzureDTExec). Он используется для запуска пакетов интеграционных служб серверов (SSIS) в рамках системы интеграции Azure-SSIS в Azure Data Factory.

Традиционная утилита dtexec поставляется с сервером S'L. Для получения дополнительной информации, [см.](https://docs.microsoft.com/sql/integration-services/packages/dtexec-utility?view=sql-server-2017) Это часто вызывается сторонних оркестраторов или планировщиков, таких как ActiveBatch и Control-M, для запуска пакетов SSIS на месте. 

Современная утилита AzureDTExec поставляется с инструментом S'L Server Management Studio (SSMS). Он также может быть вызван сторонними оркестрантами или планировщиками для запуска пакетов SSIS в Azure. Это облегчает подъем и перенос или перенос пакетов SSIS в облако. После миграции, если вы хотите продолжать использовать сторонних оркестраторов или планировщиков в ваших повседневных операций, теперь они могут вызвать AzureDTExec вместо dtexec.

AzureDTExec запускает пакеты в качестве выполнения действий пакета SSIS в конвейерах Data Factory. Для получения дополнительной [информации см. Выполнить пакеты SSIS как деятельность Azure Data Factory.](https://docs.microsoft.com/azure/data-factory/how-to-invoke-ssis-package-ssis-activity) 

AzureDTExec можно настроить с помощью SSMS для использования приложения Azure Active Directory (Azure AD), которое генерирует конвейеры на фабрике данных. Он также может быть настроен для доступа к файловым системам, файловым файлам или файлам Azure, где вы храните пакеты. Основываясь на значениях, которые вы даете для вариантов вызова, AzureDTExec генерирует и запускает уникальный конвейер Data Factory с активностью пакета Execute SSIS. Ссылаясь на AzureDTExec с теми же значениями для своих вариантов повтора существующего конвейера.

## <a name="prerequisites"></a>Предварительные требования
Чтобы использовать AzureDTExec, загрузите и установите последнюю версию SSMS, которая является версией 18.3 или позже. Скачайте его с [этого веб-сайта](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017).

## <a name="configure-the-azuredtexec-utility"></a>Настройка утилиты AzureDTExec
Установка SSMS на локальной машине также устанавливает AzureDTExec. Чтобы настроить настройки, запустите SSMS с **помощью опции администратора Run.** Затем выберите **Инструменты** > **Мигрировать в Azure** > **Configure Azure с поддержкой DTExec.**

![Накончайте меню dtexec с поддержкой Azure](media/how-to-invoke-ssis-package-azure-enabled-dtexec/ssms-azure-enabled-dtexec-menu.png)

Это действие открывает окно **AzureDTExecConfig,** которое должно быть открыто с административными привилегиями для записи в файл *AzureDTExec.settings.* Если вы еще не выполнили SSMS в качестве администратора, открывается окно управления учетной записью пользователя (UAC). Введите пароль для админ-адиона, чтобы повысить ваши привилегии.

![Настройка настроек dtexec с поддержкой Azure](media/how-to-invoke-ssis-package-azure-enabled-dtexec/ssms-azure-enabled-dtexec-settings.png)

В окне **AzureDTExecConfig** введите настройки конфигурации следующим образом:

- **ApplicationId**: Введите уникальный идентификатор приложения Azure AD, создаваемого с правильными разрешениями для генерации конвейеров на фабрике данных. Для получения дополнительной информации на портале Azure можно [ознакомиться на веб-папке Azure AD и главном сервисе.](https://docs.microsoft.com/azure/active-directory/develop/howto-create-service-principal-portal)
- **AuthenticationKey**: Введите ключ аутентификации для приложения Azure AD.
- **TenantId**: Введите уникальный идентификатор арендатора Azure AD, под которым создается приложение Azure AD.
- **DataFactory**: Введите название фабрики данных, в которой генерируются уникальные конвейеры с активностью пакета «Выполнить SSIS» на основе значений параметров, предоставляемых при входе в AzureDTExec.
- **IRName**: Введите имя ИК Azure-SSIS в фабрике данных, на которой пакеты, указанные в их пути универсальной конвенции именования (UNC), будут работать при входе в AzureDTExec.
- **PipelineNameHashStrLen**: Введите длину строк хэша, которые будут сгенерированы из значений параметров, которые вы предоставляете при входе в AzureDTExec. Строки используются для формирования уникальных имен для конвейеров Data Factory, запускаемых пакетами на ИК Azure-SSIS. Обычно достаточно длины 32 символов.
- **ResourceGroup**: Введите название группы ресурсов Azure, в которой была создана фабрика данных.
- **SubscriptionId**: Введите уникальный идентификатор подписки Azure, под которым была создана фабрика данных.
- **LogAccessDomain**: Введите учетные данные домена для доступа к папке журнала в своем пути КООН при написании файлов журнала, что необходимо при указании **LogPath** и **LogLevel** не **является недействительным.**
- **LogAccessPassword**: Введите учетные данные паролей для доступа к папке журнала в своем пути UNC при написании файлов журнала, что необходимо, когда **LogPath** указан и **LogLevel** не **является недействительным.**
- **LogAccessUserName**: Введите учетные данные имени пользователя для доступа к папке журнала в своем пути UNC при написании файлов журнала, что необходимо, когда **LogPath** указан и **LogLevel** не **является недействительным.**
- **LogLevel**: Введите выбранный объем журналов из **предопределенных нулевых,** **Базовых,** **Verbose**или **опций производительности** для выполнения пакета на ИК Azure-SSIS.
- **LogPath**: Введите путь ПАПки журнала UNC, в который записываются файлы журнала из выполнения пакета в ИК Azure-SSIS.
- **PackageAccessDomain**: Введите учетные данные домена для доступа к вашим пакетам в их пути КООН, указанном при входе в AzureDTExec.
- **PackageAccessPassword**: Введите учетные данные паролей для доступа к вашим пакетам в их пути UNC, указанном при входе в AzureDTExec.
- **PackageAccessUserName**: Введите учетные данные имени пользователя для доступа к вашим пакетам в их пути КООН, указанном при входе в AzureDTExec.

Чтобы хранить пакеты и файлы в файловых системах или файловых акциях на месте, присоединяйтесь к ИК Azure-SSIS в виртуальную сеть, подключенную к вашей предварительной сети, чтобы она мог получить ваши пакеты и написать файлы журнала. Для получения дополнительной информации [см.](https://docs.microsoft.com/azure/data-factory/join-azure-ssis-integration-runtime-virtual-network)

Чтобы не показывать чувствительные значения, записанные в файл *AzureDTExec.settings* в простом тексте, мы кодируя их в строки кодирования Base64. При вкосновении AzureDTExec все закодированные строки Base64 расшифровываются обратно в исходные значения. Вы можете дополнительно обезопасить файл *AzureDTExec.settings,* ограничив учетные записи, которые могут получить к нему доступ.

## <a name="invoke-the-azuredtexec-utility"></a>Вызвать утилиту AzureDTExec
Вы можете вызвать AzureDTExec в запросе командной строки и предоставить соответствующие значения для конкретных параметров в сценарии использования.

Утилита установлена `{SSMS Folder}\Common7\IDE\CommonExtensions\Microsoft\SSIS\150\Binn`на . Его путь можно добавить в переменную среды 'PATH', чтобы она вызывалась из любой точки мира.

```dos
> cd "C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\CommonExtensions\Microsoft\SSIS\150\Binn"
> AzureDTExec.exe  ^
  /F \\MyStorageAccount.file.core.windows.net\MyFileShare\MyPackage.dtsx  ^
  /Conf \\MyStorageAccount.file.core.windows.net\MyFileShare\MyConfig.dtsConfig  ^
  /Conn "MyConnectionManager;Data Source=MyDatabaseServer.database.windows.net;User ID=MyAdminUsername;Password=MyAdminPassword;Initial Catalog=MyDatabase"  ^
  /Set \package.variables[MyVariable].Value;MyValue  ^
  /De MyEncryptionPassword
```

Ссылаясь на AzureDTExec предлагает аналогичные варианты, как ссылаясь на dtexec. Дополнительные сведения см. в статье [dtexec Utility](https://docs.microsoft.com/sql/integration-services/packages/dtexec-utility?view=sql-server-2017). Вот варианты, которые в настоящее время поддерживаются:

- **/F'ile:** Загружает пакет, который хранится в файловой системе, доле файлов или файлах Azure. В качестве значения для этой опции можно указать путь КООН для файла пакета в файловой системе, файла общего обмена или файлов Azure с расширением .dsx. Если указанный путь КООН содержит какое-либо пространство, поставьте кавычки вокруг всего пути.
- **/Conf'igFile :** Определяет файл конфигурации для извлечения значений из. Используя эту опцию, можно настроить конфигурацию времени выполнения для вашего пакета, которая отличается от той, которая указана во время проектирования. Можно хранить различные настройки в файле конфигурации XML, а затем загрузить их перед выполнением пакета. Для получения дополнительной [информации см.](https://docs.microsoft.com/sql/integration-services/packages/package-configurations?view=sql-server-2017) Чтобы указать значение для этой опции, используйте путь КООН для файла конфигурации в файловой системе, файловых файлов или файлов Azure с расширением dtsConfig. Если указанный путь КООН содержит какое-либо пространство, поставьте кавычки вокруг всего пути.
- **(Conn 'ection:** Определяет строки соединения для существующих менеджеров соединения в вашем пакете. Используя эту опцию, можно установить строки подключения к времени выполнения для существующих менеджеров соединения в пакете, которые отличаются от тех, которые указаны во время проектирования. Укажите значение для этой `connection_manager_name_or_id;connection_string [[;connection_manager_name_or_id;connection_string]...]`опции следующим образом: .
- **/Set**: Переопределяет конфигурацию параметра, переменной, свойства, контейнера, поставщика журналов, регистратора Foreach или соединения в вашем пакете. Эта опция может быть указана несколько раз. Укажите значение для этой `property_path;value`опции следующим образом: . Например, `\package.variables[counter].Value;1` переопределяет значение `counter` переменной как 1. Можно использовать мастер конфигурации **пакета,** чтобы найти, скопировать и вставить значение `property_path` для элементов в вашем пакете, значение которых вы хотите переопределить. Для получения дополнительной [Package Configuration wizard](https://docs.microsoft.com/sql/integration-services/package-configuration-wizard-ui-reference?view=sql-server-2014)информации см.
- **(Десклепом):** Устанавливает пароль для расшифровки для вашего пакета, настроенного с уровнем защиты **EncryptAllWith**/**EncryptSensitiveWithPassword.**

> [!NOTE]
> Ссылаясь на AzureDTExec с новыми значениями для своих опций генерирует новый конвейер, за исключением опции **/De'cript**.

## <a name="next-steps"></a>Дальнейшие действия

После того, как уникальные конвейеры с активностью пакета Execute SSIS в них генерируются и запускаются при входе в AzureDTExec, они могут контролироваться на портале Data Factory. Вы также можете назначить триггеры Data Factory, если вы хотите организовать/запланировать их с помощью Data Factory. Для получения дополнительной [информации см. Выполнить пакеты SSIS как деятельность фабрики данных.](https://docs.microsoft.com/azure/data-factory/how-to-invoke-ssis-package-ssis-activity)

> [!WARNING]
> Ожидается, что генерируемый конвейер будет использоваться только AzureDTExec. Его свойства или параметры могут меняться в будущем, поэтому не изменяйте и не повторно используйте их для любых других целей. Модификации могут привести к разрыву AzureDTExec. Если это произойдет, удалите конвейер. AzureDTExec генерирует новый конвейер при следующем вызове.