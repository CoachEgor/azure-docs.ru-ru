---
title: Связанные службы в фабрике данных Azure | Документация Майкрософт
description: Сведения о связанных службах в фабрике данных. Связанные службы связывают хранилища данных и вычислений с фабрикой данных.
services: data-factory
documentationcenter: ''
author: sharonlo101
manager: craigg
ms.reviewer: craigg
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.topic: conceptual
ms.date: 04/25/2019
ms.author: shlo
ms.openlocfilehash: 904e063ae64a971de7f34fbfac63b7679f3bc363
ms.sourcegitcommit: 80dff35a6ded18fa15bba633bf5b768aa2284fa8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2019
ms.locfileid: "70019956"
---
# <a name="linked-services-in-azure-data-factory"></a>Связанные службы в фабрике данных Azure
> [!div class="op_single_selector" title1="Выберите используемую версию службы "Фабрика данных":"]
> * [Версия 1](v1/data-factory-create-datasets.md)
> * [Текущая версия](concepts-datasets-linked-services.md)

В этой статье описываются связанные службы, их определение в формате JSON и их использование в конвейерах фабрики данных Azure.

Чтобы получить общие представления о фабрике данных, ознакомьтесь со статьей [Общие сведения о службе фабрики данных Azure, службе интеграции данных в облаке](introduction.md).

## <a name="overview"></a>Обзор
Фабрика данных может иметь один или несколько конвейеров. **Конвейер** — это логическая группа **действий**, которые вместе выполняют задачу. Действия в конвейере определяют операции с данными. Например, вы можете использовать действие копирования, чтобы скопировать данные из локального сервера SQL Server в хранилище BLOB-объектов Azure. Затем можно использовать действие Hive для запуска сценария Hive в кластере HDInsight Azure, чтобы обработать данные из хранилища BLOB-объектов для получения выходных данных. Наконец, можно использовать второе действие копирования, чтобы скопировать выходные данные в хранилище данных SQL Azure, на основе которого созданы решения для создания отчетов бизнес-аналитики. Дополнительные сведения о конвейерах и действиях см. в статье [Конвейеры и действия в фабрике данных Azure](concepts-pipelines-activities.md).

Теперь **набор данных** — это именованное представление данных, которое указывает данные, необходимые для использования в **действиях**, разделяя их на входные и выходные.

Перед созданием набора данных необходимо создать **связанную службу**, чтобы связать хранилище данных с фабрикой данных. Связанные службы напоминают строки подключения, определяющие сведения о подключении, необходимые для подключения фабрики данных к внешним ресурсам. Таким образом, набор данных представляет структуру данных в связанных хранилищах данных, а связанная служба определяет подключение к источнику данных. Например, связанная служба хранилища Azure связывает учетную запись хранения с фабрикой данных. Набор данных больших двоичных объектов Azure представляет контейнер больших двоичных объектов и папку в учетной записи хранения Azure, содержащую входные большие двоичные объекты для обработки.

Ниже приведен пример сценария. Чтобы скопировать данные из хранилища BLOB-объектов в базу данных SQL, создайте две связанные службы: службу хранилища Azure и Базу данных SQL Azure. Затем создайте два набора данных: набор данных из BLOB-объектов (для связанной службы хранилища Azure) и набор данных таблицы SQL Azure (для связанной службы Базы данных SQL Azure). Связанные службы хранилища Azure и Базы данных SQL Azure содержат строки подключения, которые фабрика данных использует во время выполнения для подключения к службе хранилища Azure и Базе данных Azure SQL соответственно. Набор данных больших двоичных объектов Azure указывает контейнер и папку больших двоичных объектов, содержащие входные большие двоичные объекты в хранилище BLOB-объектов. Набор данных таблицы SQL Azure указывает таблицу SQL в базе данных SQL, в которую будут копироваться данные.

На следующей схеме показана связь между конвейером, действием, набором данных и связанной службой в фабрике данных.

![Связь между конвейером, действием, набором данных и связанными службами](media/concepts-datasets-linked-services/relationship-between-data-factory-entities.png)

## <a name="linked-service-json"></a>JSON связанной службы
Связанная служба в фабрике данных определяется в формате JSON, как показано ниже.

```json
{
    "name": "<Name of the linked service>",
    "properties": {
        "type": "<Type of the linked service>",
        "typeProperties": {
              "<data store or compute-specific type properties>"
        },
        "connectVia": {
            "referenceName": "<name of Integration Runtime>",
            "type": "IntegrationRuntimeReference"
        }
    }
}
```

В следующей таблице описаны свойства приведенного выше объекта JSON.

Свойство | Описание | Обязательное значение |
-------- | ----------- | -------- |
name | Имя связанной службы. Дополнительные сведения см. в статье [Фабрика данных Azure — правила именования](naming-rules.md). |  Да |
type | Тип связанной службы. Пример: AzureStorage (хранилище данных) или AzureBatch (служба вычислений). См. описание typeProperties. | Да |
typeProperties | Свойства типов отличаются для каждого хранилища данных или вычислительного ресурса. <br/><br/> Поддерживаемые типы хранилищ данных и соответствующие свойства типов см. в таблице [типов наборов данных](concepts-datasets-linked-services.md#dataset-type) в этой статье. Дополнительные сведения о свойствах типов, характерных для хранилища данных, см. в статье о соединителях хранилища данных. <br/><br/> Поддерживаемые типы вычислительных служб и соответствующие свойства типов см. в статье [Вычислительные среды, поддерживаемые фабрикой данных Azure](compute-linked-services.md). | Да |
connectVia | [Среда выполнения интеграции](concepts-integration-runtime.md), используемая для подключения к хранилищу данных. Вы можете использовать среду выполнения интеграции Azure или локальную среду IR (если хранилище данных расположено в частной сети). Если не указано другое, по умолчанию используется интегрированная среда выполнения Azure. | Нет

## <a name="linked-service-example"></a>Образец связанной службы
Ниже показана связанная служба хранилища Azure. Обратите внимание, что параметру type присвоено значение AzureStorage. Свойства типов связанной службы хранилища Azure включают строку подключения. Фабрика данных использует эту строку подключения для соединения с хранилищем данных в среде выполнения.

```json
{
    "name": "AzureStorageLinkedService",
    "properties": {
        "type": "AzureStorage",
        "typeProperties": {
            "connectionString": {
                "type": "SecureString",
                "value": "DefaultEndpointsProtocol=https;AccountName=<accountname>;AccountKey=<accountkey>"
            }
        },
        "connectVia": {
            "referenceName": "<name of Integration Runtime>",
            "type": "IntegrationRuntimeReference"
        }
    }
}
```

## <a name="create-linked-services"></a>Создание связанных служб
Связанные службы можно создать с помощью одного из следующих средств или пакетов SDK: [.NET API](quickstart-create-data-factory-dot-net.md), [PowerShell](quickstart-create-data-factory-powershell.md), [REST API](quickstart-create-data-factory-rest-api.md), Azure Resource Manager шаблона и портал Azure

## <a name="data-store-linked-services"></a>Связанные службы хранилища данных
Подключение к хранилищам данных можно найти в наших [поддерживаемых хранилищах данных и форматах](copy-activity-overview.md#supported-data-stores-and-formats). Ссылка на список свойств соединения, необходимых для разных хранилищ.

## <a name="data-store-supported-activities"></a>Действия, поддерживаемые хранилищем данных

[!INCLUDE [Connector-activity support matrix](../../includes/connector-activity-support-matrix.md)]

## <a name="compute-linked-services"></a>Связанные службы вычислений
Справочные [вычислительные среды, поддерживаемые](compute-linked-services.md) для получения сведений о различных вычислительных средах, к которым можно подключиться из фабрики данных, а также различных конфигураций.

## <a name="next-steps"></a>Следующие шаги
Пошаговые инструкции по созданию конвейеров и наборов данных с помощью одного из указанных ниже инструментов или пакетов SDK приведены в указанных ниже руководствах.

- [Создание фабрики данных и конвейера с помощью пакета SDK для .NET](quickstart-create-data-factory-dot-net.md)
- [Создание фабрики данных и конвейера с помощью пакета PowerShell](quickstart-create-data-factory-powershell.md)
- [Создание фабрики данных Azure и конвейера с помощью REST API](quickstart-create-data-factory-rest-api.md)
- [Краткое руководство. Создание фабрики данных с помощью портал Azure](quickstart-create-data-factory-portal.md)
