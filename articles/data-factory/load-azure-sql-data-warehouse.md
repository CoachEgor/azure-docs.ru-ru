---
title: Загрузка данных в Azure Synapse Analytics
description: Копирование данных в Azure синапсе Analytics с помощью фабрики данных Azure
services: data-factory
ms.author: jingwang
author: linda33wj
manager: shwang
ms.reviewer: douglasl
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 06/08/2020
ms.openlocfilehash: c90590ac4c47f6ac8d51273fecfb653dfe056b1d
ms.sourcegitcommit: de2750163a601aae0c28506ba32be067e0068c0c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2020
ms.locfileid: "89485776"
---
# <a name="load-data-into-azure-synapse-analytics-by-using-azure-data-factory"></a>Загрузка данных в Azure синапсе Analytics с помощью фабрики данных Azure

[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]

[Azure синапсе Analytics](../synapse-analytics/sql-data-warehouse/sql-data-warehouse-overview-what-is.md) — это облачная масштабируемая база данных, которая может обрабатывать большие объемы данных, как реляционные, так и нереляционные. Azure синапсе Analytics построена на основе архитектуры массовой параллельной обработки (MPP), оптимизированной для рабочих нагрузок хранилища корпоративных данных. Оно предоставляет эластичность облака и гибкие возможности масштабирования хранилища и вычислительной мощности независимо друг от друга.

Приступить к работе с Azure синапсе Analytics стало проще, чем когда-либо с помощью фабрики данных Azure. Фабрика данных Azure — это полностью управляемая облачная служба интеграции данных. Вы можете использовать службу, чтобы заполнить Azure синапсе Analytics данными из существующей системы и сэкономить время при создании решений аналитики.

Фабрика данных Azure предоставляет следующие преимущества для загрузки данных в Azure синапсе Analytics:

* **Простота настройки**: Вам доступен интуитивно понятный 5-этапный мастер без необходимости создавать сценарии.
* **Расширенная поддержка хранилищ данных.** Встроенная поддержка обширного набора локальных и облачных хранилищ данных. Подробный список см. в таблице [Поддерживаемые хранилища данных и форматы](copy-activity-overview.md#supported-data-stores-and-formats).
* **Безопасность и соответствие требованиям**. Данные передаются по протоколу HTTPS или ExpressRoute. Наличие глобальной службы гарантирует, что ваши данные никогда не покинут заданных географических границ.
* **Непревзойденная производительность с помощью polybase**: polybase — наиболее эффективный способ перемещения данных в Azure синапсе Analytics. Промежуточные большие двоичные объекты позволяют обеспечить высокую скорость загрузки данных из источников данных всех типов, в том числе хранилища BLOB-объектов Azure и Data Lake Store. (Polybase поддерживает хранилище BLOB-объектов Azure и Azure Data Lake Store по умолчанию.) Дополнительные сведения см. в разделе [производительность действия копирования](copy-activity-performance.md).

В этой статье показано, как использовать средство Копирование данных фабрики данных для _загрузки данных из базы данных SQL Azure в Azure синапсе Analytics_. Чтобы копировать данные из других типов хранилищ, необходимо выполнить аналогичные шаги.

> [!NOTE]
> Дополнительные сведения см. [в статье копирование данных в Azure синапсе Analytics или из нее с помощью фабрики данных Azure](connector-azure-sql-data-warehouse.md).

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/), прежде чем начинать работу.
* Azure синапсе Analytics. хранилище данных содержит данные, которые копируются из базы данных SQL. Если у вас нет Azure синапсе Analytics, см. инструкции в статье [Создание Azure синапсе Analytics](../sql-data-warehouse/sql-data-warehouse-get-started-tutorial.md).
* База данных SQL Azure. в этом руководстве данные из образца набора данных Adventure Works LT копируются в базу данных SQL Azure. Этот образец базы данных можно создать в базе данных SQL, следуя инструкциям в разделе [Создание образца базы данных в базе данных SQL Azure](../azure-sql/database/single-database-create-quickstart.md).
* Учетная запись хранения Azure. Учетная запись хранения Azure используется в качестве _промежуточного_ хранилища больших двоичных объектов в операции массового копирования. Если у вас нет учетной записи хранения Azure, см. инструкции в разделе [Создание учетной записи хранения](../storage/common/storage-account-create.md).

## <a name="create-a-data-factory"></a>Создание фабрики данных

1. В меню слева выберите **Создать ресурс** > **Данные и аналитика** > **Фабрика данных**.

2. На странице **Новая фабрика данных** укажите значения для следующих элементов:

    * **Имя**: введите *лоадсклдвдемо* в качестве имени. Имя фабрики данных должно быть * глобально уникальным. Если появляется сообщение об ошибке "имя фабрики данных" Лоадсклдвдемо "недоступно", введите другое имя для фабрики данных. Например, вы можете использовать имя _**ваше_имя**_**ADFTutorialDataFactory**. Попробуйте создать фабрику данных еще раз. Правила именования артефактов службы "Фабрика данных" см. в [этой](naming-rules.md) статье.
    * **Подписка**: Выберите подписку Azure, в рамках которой нужно создать фабрику данных. 
    * **Группа ресурсов**. Выберите существующую группу ресурсов из раскрывающегося списка или щелкните вариант **Создать новую** и введите имя группы ресурсов. Сведения о группах ресурсов см. в статье, где описывается [использование групп ресурсов для управления ресурсами Azure](../azure-resource-manager/management/overview.md).  
    * **Версия.** Выберите **V2**.
    * **Расположение.** Укажите расположение фабрики данных. В раскрывающемся списке отображаются только поддерживаемые расположения. Хранилища данных, используемые в фабрике данных, могут находиться в других расположениях и регионах. К этим хранилищам относятся Azure Data Lake Store, служба хранилища Azure, база данных SQL Azure и т. д.

3. Нажмите кнопку **создания**.
4. После создания перейдите к фабрике данных. Вы увидите домашнюю страницу **фабрики данных**, как показано на следующем изображении:

   ![Домашняя страница фабрики данных](./media/doc-common-process/data-factory-home-page.png)

   Выберите плитку **Создание и мониторинг**, чтобы открыть на отдельной вкладке приложение интеграции данных.

## <a name="load-data-into-azure-synapse-analytics"></a>Загрузка данных в Azure Synapse Analytics

1. На странице Начало **работы** выберите плитку **копирование данных** , чтобы запустить средство копирование данных.

1. На странице **Свойства** укажите **копифромсклтосклдв** в поле **имя задачи** и нажмите кнопку **Далее**.

    ![Страница свойств](./media/load-azure-sql-data-warehouse/copy-data-tool-properties-page.png)

1. На странице **Исходное хранилище данных** сделайте следующее.
    >[!TIP]
    >В этом руководстве используется *Проверка подлинности SQL* в качестве типа проверки подлинности для исходного хранилища данных, но при необходимости можно выбрать другие поддерживаемые методы проверки подлинности:*субъект-служба* и *управляемое удостоверение* . Дополнительные сведения см. в соответствующих разделах [этой статьи](https://docs.microsoft.com/azure/data-factory/connector-azure-sql-database#linked-service-properties).
    >Чтобы безопасно хранить секреты для хранилищ данных, также рекомендуется использовать Azure Key Vault. Дополнительные сведения см. в [этой статье](https://docs.microsoft.com/azure/data-factory/store-credentials-in-key-vault).

    а. Щелкните **+ создать новое соединение**.

    b. В коллекции выберите элемент **База данных SQL Azure** и нажмите кнопку **Продолжить**. Вы можете ввести текст "SQL" в поле поиска, чтобы отфильтровать соединители.

    ![Выбор Базы данных SQL Azure](./media/load-azure-sql-data-warehouse/select-azure-sql-db-source.png)

    c. На странице **Новая связанная служба** выберите имя сервера и имя базы данных из раскрывающегося списка и укажите имя пользователя и пароль. Нажмите кнопку **проверить подключение** , чтобы проверить параметры, а затем выберите **создать**.

    ![Настройка Базы данных SQL Azure](./media/load-azure-sql-data-warehouse/configure-azure-sql-db.png)

    d. Выберите созданную связанную службу в качестве источника, а затем нажмите кнопку **Далее**.

1. На странице **Select tables from which to copy the data or use a custom query** (Выберите таблицы, из которых нужно скопировать данные, или введите пользовательский запрос) введите **SalesLT**, чтобы отфильтровать таблицы. Выберите поле **(выбрать все)** , чтобы использовать все таблицы для копирования, а затем нажмите кнопку **Далее**.

    ![Выбор исходных таблиц](./media/load-azure-sql-data-warehouse/select-source-tables.png)

1. На странице **Применить фильтр** укажите параметры или нажмите кнопку **Далее**.

1. На странице **Целевое хранилище данных** сделайте следующее.
    >[!TIP]
    >В этом руководстве используется *Проверка подлинности SQL* в качестве типа проверки подлинности для целевого хранилища данных, но при необходимости можно выбрать другие поддерживаемые методы проверки подлинности:*субъект-служба* и *управляемое удостоверение* . Дополнительные сведения см. в соответствующих разделах [этой статьи](https://docs.microsoft.com/azure/data-factory/connector-azure-sql-data-warehouse#linked-service-properties).
    >Чтобы безопасно хранить секреты для хранилищ данных, также рекомендуется использовать Azure Key Vault. Дополнительные сведения см. в [этой статье](https://docs.microsoft.com/azure/data-factory/store-credentials-in-key-vault).

    а. Щелкните **+Создать подключение**, чтобы добавить подключение.

    b. Выберите **Azure синапсе Analytics (ранее — хранилище данных SQL)** из коллекции и нажмите кнопку **продолжить**. Вы можете ввести текст "SQL" в поле поиска, чтобы отфильтровать соединители.

    ![Выбор Azure синапсе Analytics](./media/load-azure-sql-data-warehouse/select-azure-sql-dw-sink.png)

    c. На странице **Новая связанная служба** выберите имя сервера и имя базы данных из раскрывающегося списка и укажите имя пользователя и пароль. Нажмите кнопку **проверить подключение** , чтобы проверить параметры, а затем выберите **создать**.

    ![Настройка Azure синапсе Analytics](./media/load-azure-sql-data-warehouse/configure-azure-sql-dw.png)

    d. Выберите созданную связанную службу в качестве приемника, а затем нажмите кнопку **Далее**.

1. Просмотрите содержимое страницы **Сопоставление таблицы** и нажмите кнопку **Далее**. Отобразится интеллектуальное сопоставление таблиц. Исходные таблицы сопоставляются с целевыми на основе их имен. Если исходная таблица не существует в месте назначения, по умолчанию фабрика данных Azure создает таблицу с таким же именем. Вы также можете сопоставить исходную таблицу с имеющейся целевой таблицей.

   > [!NOTE]
   > Автоматическое создание таблиц для приемника Azure синапсе Analytics применяется, если SQL Server или база данных SQL Azure являются источником. При копировании данных из другого исходного хранилища данных необходимо предварительно создать схему в приемнике Azure синапсе Analytics перед выполнением копирования данных.

   ![Страница сопоставления таблиц](./media/load-azure-sql-data-warehouse/table-mapping.png)

1. На странице **сопоставление столбцов** проверьте содержимое и нажмите кнопку **Далее**. Интеллектуальное сопоставление таблиц основано на имени столбца. Если в фабрике данных включена возможность автоматического создания таблиц, при наличии несовместимостей между исходным и целевым хранилищами выполняется преобразование типов данных. Если между исходным и целевым столбцами обнаружится преобразование неподдерживаемого типа данных, рядом с соответствующей таблицей появится сообщение об ошибке.

    ![Страница "Сопоставление столбцов"](./media/load-azure-sql-data-warehouse/schema-mapping.png)

1. На странице **Параметры** сделайте следующее.

    а. В разделе **Staging Settings** (Промежуточные параметры) щелкните **+Создать**, чтобы создать промежуточное хранилище. Хранилище используется для промежуточного хранения данных перед их загрузкой в Azure синапсе Analytics с помощью Polybase. После завершения копирования промежуточные данные в хранилище BLOB-объектов Azure автоматически очищаются.

    b. На странице **Новая связанная служба** выберите свою учетную запись хранения и щелкните **создать** , чтобы развернуть связанную службу.

    c. В разделе **Дополнительные параметры** снимите флажок **Use type default** (Тип по умолчанию) и нажмите кнопку **Далее**.

    ![Настройка PolyBase](./media/load-azure-sql-data-warehouse/configure-polybase.png)

1. На странице **Сводка** проверьте параметры и нажмите кнопку **Далее**.

    ![Страница "Сводка"](./media/load-azure-sql-data-warehouse/summary-page.png)

1. На **странице развертывания** выберите **Мониторинг**, чтобы отслеживать созданный конвейер (задачу). 
 
1. Обратите внимание, что слева автоматически выбирается вкладка **Мониторинг**. Когда выполнение конвейера завершится успешно, щелкните ссылку **копифромсклтосклдв** в столбце **имя конвейера** , чтобы просмотреть сведения о выполнении действия или повторно запустить конвейер.

    [![Мониторинг выполнений конвейера](./media/load-azure-sql-data-warehouse/pipeline-monitoring.png)](./media/load-azure-sql-data-warehouse/pipeline-monitoring.png#lightbox)

1. Чтобы вернуться к представлению запусков конвейера, выберите ссылку **все запуски конвейера** вверху. Щелкните **Обновить**, чтобы обновить список.

    ![Мониторинг выполнений действий](./media/load-azure-sql-data-warehouse/activity-monitoring.png)

1. Чтобы отслеживать сведения о выполнении для каждого действия копирования, щелкните ссылку **сведения** (значок очков) в разделе **имя действия** в представлении выполнения действий. Можно отслеживать такие сведения, как объем данных, скопированных из источника в приемник, пропускная способность данных, шаги выполнения с соответствующей длительностью и используемые конфигурации.
    ![Мониторинг сведений о выполнении действия](./media/load-azure-sql-data-warehouse/monitor-activity-run-details-1.png)

    ![Мониторинг сведений о выполнении действия](./media/load-azure-sql-data-warehouse/monitor-activity-run-details-2.png)

## <a name="next-steps"></a>Дальнейшие действия

Перейдите к следующей статье, чтобы узнать о поддержке Azure синапсе Analytics.

> [!div class="nextstepaction"]
>[Соединитель Azure синапсе Analytics](connector-azure-sql-data-warehouse.md)
