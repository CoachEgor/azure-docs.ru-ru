---
title: Формат Common Data Model
description: Преобразование данных с помощью общей системы метаданных модели данных
author: djpmsft
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.date: 06/16/2020
ms.author: daperlov
ms.openlocfilehash: 5e75f2203552a69e50ed16176525429c6c9d8810
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84807820"
---
# <a name="common-data-model-format-in-azure-data-factory"></a>Формат общей модели данных в фабрике данных Azure
[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]

Система метаданных общей модели данных (CDM) позволяет легко совместно использовать данные и их значения для разных приложений и бизнес-процессов. Дополнительные сведения см. в обзоре [общих моделей данных](https://docs.microsoft.com/common-data-model/) .

В фабрике данных Azure пользователи могут преобразовываться в сущности CDM, хранящиеся в [Azure Data Lake Store Gen2](connector-azure-data-lake-storage.md) (ADLS 2-го поколения), с помощью сопоставления потоков данных.

> [!NOTE]
> Соединитель формата Common Data Model (CDM) для потоков данных ADF в настоящее время доступен в виде общедоступной предварительной версии.

## <a name="mapping-data-flow-properties"></a>Свойства потока данных для сопоставления

Общая модель данных доступна в виде [встроенного набора](data-flow-source.md#inline-datasets) данных при сопоставлении потоков данных в качестве источника и приемника.

### <a name="source-properties"></a>Свойства источника

В таблице ниже перечислены свойства, поддерживаемые источником CDM. Эти свойства можно изменить на вкладке **Параметры источника** .

| name | Описание | Обязательное значение | Допустимые значения | Свойство сценария потока данных |
| ---- | ----------- | -------- | -------------- | ---------------- |
| Формат | Формат должен быть`cdm` | да | `cdm` | format |
| Формат метаданных | Где находятся ссылки на сущности на данные. Если используется CDM версии 1,0, выберите манифест. Если используется версия CDM до 1,0, выберите model.jsв. | Да | `'manifest'` или `'model'` | манифесттипе |
| Корневое расположение: контейнер | Имя контейнера папки CDM | да | Строка | fileSystem |
| Корневое расположение: путь к папке | Расположение корневой папки папки CDM | да | Строка | folderPath |
| Файл манифеста: путь сущности | Путь к папке сущности в корневой папке | Нет | Строка | entityPath |
| Файл манифеста: имя манифеста | Имя файла манифеста. Значение по умолчанию — "default"  | нет | Строка | manifestName |
| Фильтровать по дате последнего изменения | Выберите фильтр файлов в зависимости от времени последнего изменения | Нет | Отметка времени | modifiedAfter <br> modifiedBefore | 
| Связанная служба схемы | Связанная служба, в которой находится совокупности | Да, при использовании манифеста | `'adlsgen2'` или `'github'` | корпуссторе | 
| Контейнер ссылки на сущность | Контейнер совокупности находится в | Да, если использовать манифест и совокупности в ADLS 2-го поколения | Строка | adlsgen2_fileSystem |
| Репозиторий ссылок на сущности | Имя репозитория GitHub | Да, если использовать манифест и совокупности в GitHub | Строка | github_repository |
| Ветвь ссылки на сущность | Ветвь репозитория GitHub | Да, если использовать манифест и совокупности в GitHub | Строка |  github_branch |
| Папка совокупности | корневое расположение совокупности | Да, при использовании манифеста | Строка | корпуспас |
| Сущность совокупности | Путь к ссылке на сущность | да | Строка | сущность |
| Разрешить не найдены файлы | Если значение — true, ошибка не возникает, если файлы не найдены | Нет | `true` или `false` | игноренофилесфаунд |

#### <a name="import-schema"></a>Импорт схемы

CDM доступен только в качестве встроенного набора данных и по умолчанию не имеет связанной схемы. Чтобы получить метаданные столбца, нажмите кнопку **Импорт схемы** на вкладке **проекция** . Это позволит сослаться на имена столбцов и типы данных, заданные параметром совокупности. Чтобы импортировать схему, необходимо активировать [сеанс отладки потока данных](concepts-data-flow-debug-mode.md) .


### <a name="cdm-source-data-flow-script-example"></a>Пример сценария потока исходных данных CDM

```
source(output(
        ProductSizeId as integer,
        ProductColor as integer,
        CustomerId as string,
        Note as string,
        LastModifiedDate as timestamp
    ),
    allowSchemaDrift: true,
    validateSchema: false,
    entity: 'Product.cdm.json/Product',
    format: 'cdm',
    manifestType: 'manifest',
    manifestName: 'ProductManifest',
    entityPath: 'Product',
    corpusPath: 'Products',
    corpusStore: 'adlsgen2',
    adlsgen2_fileSystem: 'models',
    folderPath: 'ProductData',
    fileSystem: 'data') ~> CDMSource
```

### <a name="sink-properties"></a>Свойства приемника

В таблице ниже перечислены свойства, поддерживаемые приемником CDM. Эти свойства можно изменить на вкладке **Параметры** .

| name | Описание | Обязательное значение | Допустимые значения | Свойство сценария потока данных |
| ---- | ----------- | -------- | -------------- | ---------------- |
| Формат | Формат должен быть`cdm` | да | `cdm` | format |
| Корневое расположение: контейнер | Имя контейнера папки CDM | да | Строка | fileSystem |
| Корневое расположение: путь к папке | Расположение корневой папки папки CDM | да | Строка | folderPath |
| Файл манифеста: путь сущности | Путь к папке сущности в корневой папке | Нет | Строка | entityPath |
| Файл манифеста: имя манифеста | Имя файла манифеста. Значение по умолчанию — "default" | нет | Строка | manifestName |
| Связанная служба схемы | Связанная служба, в которой находится совокупности | да | `'adlsgen2'` или `'github'` | корпуссторе | 
| Контейнер ссылки на сущность | Контейнер совокупности находится в | Да, если совокупности в ADLS 2-го поколения | Строка | adlsgen2_fileSystem |
| Репозиторий ссылок на сущности | Имя репозитория GitHub | Да, если совокупности в GitHub | Строка | github_repository |
| Ветвь ссылки на сущность | Ветвь репозитория GitHub | Да, если совокупности в GitHub | Строка |  github_branch |
| Папка совокупности | корневое расположение совокупности | да | Строка | корпуспас |
| Сущность совокупности | Путь к ссылке на сущность | да | Строка | сущность |
| Путь к секции | Расположение, в котором будет записана Секция | Нет | Строка | партитионпас |
| Очистить папку | Если конечная папка будет удалена перед записью | Нет | `true` или `false` | truncate |
| Тип формата | Выберите, чтобы указать формат Parquet | Нет | `parquet`Если указано | подформат |
| Разделитель столбцов | При записи в DelimitedText, как разделить столбцы | Да, при записи в DelimitedText | Строка | columnDelimiter |
| Первая строка в качестве заголовка | Если используется DelimitedText, добавляются ли имена столбцов в качестве заголовка | Нет | `true` или `false` | колумннамесашеадер |

### <a name="cdm-sink-data-flow-script-example"></a>Пример скрипта потока данных приемника CDM

Связанный сценарий потока данных:

```
CDMSource sink(allowSchemaDrift: true,
    validateSchema: false,
    entity: 'Product.cdm.json/Product',
    format: 'cdm',
    entityPath: 'ProductSize',
    manifestName: 'ProductSizeManifest',
    corpusPath: 'Products',
    partitionPath: 'adf',
    folderPath: 'ProductSizeData',
    fileSystem: 'cdm',
    subformat: 'parquet',
    corpusStore: 'adlsgen2',
    adlsgen2_fileSystem: 'models',
    truncate: true,
    skipDuplicateMapInputs: true,
    skipDuplicateMapOutputs: true) ~> CDMSink

```

## <a name="next-steps"></a>Дальнейшие шаги

Создайте [Преобразование «источник](data-flow-source.md) » в потоке данных сопоставления.
