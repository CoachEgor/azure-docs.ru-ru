---
title: Среда выполнения интеграции
description: Сведения о среде выполнения интеграции в фабрике данных Azure.
services: data-factory
ms.author: abnarain
author: nabhishek
manager: shwang
ms.reviewer: douglasl
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 03/26/2020
ms.openlocfilehash: ffa348c796a4d9d4e3bdb8e7ce18ba0eb82e17ad
ms.sourcegitcommit: b80aafd2c71d7366838811e92bd234ddbab507b6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81418394"
---
# <a name="integration-runtime-in-azure-data-factory"></a>Среда выполнения интеграции в фабрике данных Azure 

[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]

Среда выполнения интеграции (IR) — это инфраструктура вычислений, которую фабрика данных Azure использует для обеспечения перечисленных ниже возможностей интеграции данных в разных сетевых средах.

- **Поток данных**: Выполните [поток данных](concepts-data-flow-overview.md) в управляемой вычислительной среде Azure.  
- **Движение данных:** Копирование данных в открытых хранилищах и хранилищах данных в частной сети (на территории или виртуальной частной сети). Поддерживаются встроенные соединители, преобразование форматов, сопоставление столбцов, высокопроизводительная и масштабируемая передача данных.
- **Отправка действий**: Отправка и мониторинг действий по преобразованию, работающих на различных вычислительных службах, таких как Azure Databricks, Azure HDInsight, Машинное обучение Azure, База данных Azure S'L, Сервер S'L и многое другое.
- **Выполнение пакетов служб SSIS**. Выполнение пакетов служб SQL Server Integration Services (SSIS) в собственном коде в управляемой вычислительной среде Azure.

В фабрике данных действия определяют выполняемые операции. Связанная служба обозначает целевое хранилище данных или службу вычислений. Среда выполнения интеграции соединяет между собой действия и связанные службы.  Он ссылается на связанную службу или деятельность и обеспечивает среду вычислений, в которой действие выполняется или отправляется из него. Такая схема позволяет выполнять действия в регионе, который максимально близко расположен к целевому хранилищу данных или службе вычислений, обеспечивает высокую производительность и соблюдение требований по безопасности и соответствию.

## <a name="integration-runtime-types"></a>Типы сред выполнения интеграции

Data Factory предлагает три типа интеграционного Runtime (IR), и вы должны выбрать тип, который наилучшим образом удовлетворяет возможности интеграции данных и потребности сетевой среды, которые вы ищете.  Эти три типа перечислены ниже.

- Azure
- Локальное размещение
- Службы SSIS Azure

В следующей таблице описаны возможности и поддержка сетей для каждого типа интеграции среды выполнения.

Тип IR | Общедоступная сеть | Частная сеть
------- | -------------- | ---------------
Azure | Поток данных<br/>Перемещение данных<br/>Диспетчеризация действий | &nbsp;
Локальное размещение | Перемещение данных<br/>Диспетчеризация действий | Перемещение данных<br/>Диспетчеризация действий
Службы SSIS Azure | Выполнение пакетов служб SSIS | Выполнение пакетов служб SSIS

На следующей схеме показано, как сочетать разные среды выполнения интеграции, чтобы обеспечить максимальные возможности по интеграции данных и поддержку сетей.

![Разные типы среды выполнения интеграции](media/concepts-integration-runtime/different-integration-runtimes.png)

## <a name="azure-integration-runtime"></a>Среда выполнения интеграции Azure

Время выполнения интеграции Azure может:

- Запуск потоков данных в Azure 
- Выполнение действия копирования между облачными хранилищами данных
- Отправка следующих действий преобразования в общественной сети: Databricks Ноутбук / Jar / Python деятельности, HDInsight Hive деятельности, HDInsight Свинья деятельности, HDInsight Spark деятельности, HDInsight Spark деятельности, HDInsight Пакет исполнения деятельности, машинного обучения Пакет Исполнения деятельности, машинного обучения Обновление ресурса деятельности, Сохраненные процедуры деятельности, Data Lake U-S'L деятельности, .NET пользовательской деятельности, веб-активности, активность.

### <a name="azure-ir-network-environment"></a>Сетевая среда Azure IR

Azure Integration Runtime поддерживает подключение к хранилищам данных и вычисляет службы с общедоступными конечными точками. Для среды виртуальных сетей Azure следует использовать локально размещенную среду выполнения интеграции.

### <a name="azure-ir-compute-resource-and-scaling"></a>Вычислительные ресурсы и масштабирование Azure IR
Среда выполнения интеграции Azure предоставляет полностью управляемые вычисления в Azure без использования серверов.  Вам не придется беспокоиться о предоставлении инфраструктуры, установке программного обеспечения, исправлении или масштабировании емкости.  Кроме того, вы платите только за фактическое время использования.

Среда выполнения интеграции Azure предоставляет вычисления в собственном коде для безопасного, надежного и высокопроизводительного перемещения данных между облачными хранилищами данных.  Вам достаточно указать, сколько единиц интеграции данных нужно использовать для действия копирования, и среда Azure IR гибко увеличит объем вычислительных ресурсов соответствующим образом. Вам не нужно явно изменять размеры Integration Runtime. 

Отправка действий — это легкая операция по маршруту действия в службу целевых вычислений, поэтому нет необходимости масштабировать размер вычислений для этого сценария.

Для получения информации о создании и настройке ИК Azure успомяните, как создать и настроить ИК Azure под руководством. 

> [!NOTE] 
> Время выполнения интеграции Azure имеет свойства, связанные с временем выполнения Data Flow, который определяет базовую вычислительную инфраструктуру, которая будет использоваться для выполнения потоков данных. 

## <a name="self-hosted-integration-runtime"></a>Локальная среда выполнения интеграции

В локальной среде IR доступны следующие возможности.

- Выполнение действия копирования между облачными хранилищами данных и хранилищем данных в частной сети.
- Отправка следующих действий преобразования против вычислительных ресурсов в локальной или Azure Виртуальная сеть: HDInsight Hive деятельности (BYOC-Принесите свой собственный кластер), HDInsight Свинья деятельности (BYOC), HDInsight MapReduce деятельности (BYOC), HDInsight Spark деятельности (BYOC), HDInsight Потоковое деятельность (BYOC), машинное обучение пакетной деятельности, машинное обучение Обновление Ресурса деятельности, , Активность поиска и активность Метаданных.

> [!NOTE] 
> Используйте автономное время выполнения интеграции для поддержки хранилиев данных, которые требуют приносить свой собственный драйвер, такой как SAP Hana, MyS'L и т.д.  Для получения дополнительной информации [см.](copy-activity-overview.md#supported-data-stores-and-formats)

> [!NOTE] 
> Java Runtime окружающей среды (JRE) является зависимостью от Self Хостинг ИК. Пожалуйста, убедитесь, что у вас есть JRE установлен на том же хосте.

### <a name="self-hosted-ir-network-environment"></a>Локальная сетевая среда IR

Если вы хотите безопасно выполнять интеграцию данных в частной сетевой среде, которая не имеет прямой видимости из общедоступной облачной среды, вы можете установить самостоятельно размещенный ИК на среде помещений за корпоративным брандмауэром или внутри виртуальной частной сети.  Локальная среда выполнения интеграции использует только исходящие HTTP-соединения во внешнюю сеть.

### <a name="self-hosted-ir-compute-resource-and-scaling"></a>Вычислительные ресурсы и масштабирование локальной среды IR

Установите самостоятельно размещенный ИК на собственной машине или виртуальной машине внутри частной сети. В настоящее время локальная IR может выполняться только в операционной системе Windows.  

Чтобы получить высокий уровень доступности и масштабируемости, разверните локальную IR. Для этого следует связать логический экземпляр с несколькими локальными компьютерами в режиме "активный — активный".  Для получения дополнительной информации, см, как [создать и настроить самостоятельно размещены ИК статьи](create-self-hosted-integration-runtime.md) под как руководство для деталей.

## <a name="azure-ssis-integration-runtime"></a>Среда выполнения интеграции Azure SSIS

Чтобы переместить уже существующую рабочую нагрузку SSIS, создайте Azure SSIS IR для выполнения пакетов служб SSIS в собственной среде.

### <a name="azure-ssis-ir-network-environment"></a>Сетевая среда Azure-SSIS IR

Среда выполнения интеграции Azure SSIS может быть подготовлена в общедоступной сети или частной сети.  Доступ к локальным данным обеспечивается за счет присоединения среды выполнения интеграции Azure SSIS к виртуальной сети, подключенной к локальной сети.  

### <a name="azure-ssis-ir-compute-resource-and-scaling"></a>Вычислительные ресурсы и масштабирование Azure-SSIS IR

Azure SSIS IR — это полностью управляемый кластер виртуальных машин Azure, выделенный для выполнения пакетов служб SSIS. Для размещения подключаемого каталога проектов и (или) пакетов служб SSIS (SSISDB) вы можете использовать собственную базу данных SQL Azure или сервер Управляемого экземпляра. Чтобы увеличить или уменьшить масштаб вычислительных ресурсов, укажите соответствующее количество узлов в кластере. Чтобы снизить расходы на среду выполнения интеграции служб SSIS Azure, вы можете в любой момент останавливать ее и снова запускать.

Дополнительные сведения см. в руководстве по созданию и настройке Azure SSIS IR.  После создания среды вы сможете развернуть существующие пакеты служб SSIS и управлять ими практически так же, как при использовании локальной SSIS, с помощью привычных средств, например SQL Server Data Tools (SSDT) и SQL Server Management Studio (SSMS).

Дополнительные сведения о среде выполнения Azure SSIS см. в следующих статьях: 

- [Развертывание пакетов служб интеграции SQL Server (SSIS) в Azure](tutorial-create-azure-ssis-runtime-portal.md). В этой статье содержатся пошаговые инструкции по созданию ИК Azure-SSIS и используется база данных Azure S'L для размещения каталога SSIS. 
- [Создание среды выполнения интеграции Azure SSIS](create-azure-ssis-integration-runtime.md). Эта статья дополняет соответствующее руководство, а также предоставляет инструкции по использованию Управляемого экземпляра Базы данных SQL Azure и присоединению среды выполнения интеграции к виртуальной сети. 
- [Мониторинг среды выполнения интеграции в фабрике данных Azure](monitor-integration-runtime.md#azure-ssis-integration-runtime). В этом статье показано, как извлечь сведения о среде выполнения интеграции Azure SSIS и описания состояний из возвращаемых данных. 
- [Manage an Azure-SSIS integration runtime](manage-azure-ssis-integration-runtime.md) (Управление средой выполнения интеграции Azure SSIS). В этой статье показано, как остановить, запустить или удалить Azure SSIS IR. В ней также показано, как развернуть Azure SSIS IR путем добавления дополнительных узлов в среду выполнения интеграции. 
- [Присоединение среды выполнения интеграции Azure SSIS к виртуальной сети](join-azure-ssis-integration-runtime-virtual-network.md) В этой статье содержатся общие сведения о присоединении среды выполнения интеграции Azure–SSIS к виртуальной сети Azure. В ней также показано, как настроить виртуальную сеть, чтобы присоединить среду выполнения интеграции Azure–SSIS к виртуальной сети с помощью портала Azure. 

## <a name="integration-runtime-location"></a>Расположение среды выполнения интеграции

Расположение фабрики данных — это место, в котором хранятся метаданные этой фабрики данных и из которого инициируется конвейер. Сейчас, чтобы переместить данные между хранилищами данных или обработать данные с помощью служб вычислений, фабрика данных может обращаться к хранилищам данных и службам вычислений в других регионах Azure. Это поведение реализуется через [глобально доступную среду IR](https://azure.microsoft.com/global-infrastructure/services/) для обеспечения соответствия данных, эффективности и снижения расходов на исходящий трафик.

Расположение среды IR определяет расположение ее вычислительных ресурсов, то есть, по сути, место выполнения всех операций по перемещению данных, диспетчеризации действий и выполнению пакета SSIS. Расположение IR может отличаться от расположения фабрики данных, которой она принадлежит. 

### <a name="azure-ir-location"></a>Расположение Azure IR

- Для копирования активности ADF прилагает все усилия, чтобы автоматически обнаружить местоположение хранилища данных раковины, а затем использовать ИК в том же регионе, если он имеется, либо в самом близком регионе в той же географии; если область хранилища данных раковины не обнаруживается, используется ИК в области фабрики данных в качестве альтернативы.

  Например, у вас есть фабрика, созданная в Восточной части США, 
  
  - При копировании данных в Azure Blob в Западной ЧАСТИ США, если ADF успешно обнаружила, что Blob находится в Западной части США, копирование деятельности выполняется на ИК в Западной США; если обнаружение региона не удается, активность копирования выполняется на ИК в Восточной ЧАСТИ США.
  - При копировании данных в Salesforce, о которых регион не обнаруживается, активность копирования выполняется на ИК в Восточной ЧАСТИ США.

- Для копирования активности ADF прилагает все усилия для автоматического обнаружения вашего хранилища приемников и исходных данных, чтобы выбрать лучшее местоположение, либо в том же регионе (если таковой имеется), либо в самом близком в той же географии, или если не обнаружить для использования региона фабрики данных в качестве альтернативы.

- Для выполнения деятельности Lookup/GetMetadata/Delete (также известного как действия трубопровода), диспетчеризации активности преобразования (также известной как Внешние действия) и авторизации операций (соединение тестов, список папок просмотра и список таблиц, предварительные данные) ADF использует ИК в области фабрики данных.

- Для Data Flow ADF использует ИК в регионе фабрики данных. 

  > [!TIP] 
  > Хорошей практикой было бы обеспечение потока данных в том же регионе, что и соответствующие хранилища данных (если это возможно). Это можно достичь либо путем автоматического разрешения Azure IR (если местоположение хранилища данных совпадает с местоположением фабрики данных), либо создав новый ик-экземпляр Azure в том же регионе, что и ваши хранилища данных, а затем выполнив поток данных на нем. 

Вы можете отслеживать, какие расположения IR используются во время выполнения действия, в представлении мониторинга действий конвейера в пользовательском интерфейсе или в полезных данных мониторинга действий.

### <a name="self-hosted-ir-location"></a>Расположение локальной среды IR

Локальная IR логически регистрируется в фабрике данных, а вычислительные ресурсы для ее работы вы предоставляете самостоятельно. Поэтому для локальных IR нельзя явно задать свойство расположения. 

Если локальная IR используется для перемещения данных, она извлекает данные из источника и записывает их в приемник.

### <a name="azure-ssis-ir-location"></a>Расположение среды Azure-SSIS IR

От выбора расположения для службы Azure SSIS IR зависит производительность рабочих процессов извлечения, преобразования и загрузки.

- Местоположение вашего ИК Azure-SSIS не обязательно должно быть таким же, как расположение вашей фабрики данных, но оно должно быть таким же, как расположение вашей собственной базы данных Azure S'L или сервера управляемых экземпляров, на котором размещается SSISDB. Это позволит среде выполнения интеграции Azure SSIS легко обращаться к базе данных SSIS, не генерируя лишний трафик между расположениями.
- Если у вас нет существующей базы данных Azure S'L или сервера управляемых экземпляров для размещения SSISDB, но у вас есть локальные источники данных/направления, необходимо создать новую базу данных Azure S'L или сервер управляемых экземпляров в том же месте виртуальной сети, подключенной к вашей предварительной сети.  Таким образом, вы можете создать свой ИК Azure-SSIS с помощью новой базы данных Azure S'L или сервера управляемых экземпляров и присоединиться к этой виртуальной сети, все в одном месте, эффективно минимизируя перемещения данных в разных местах.
- Если местоположение существующей базы данных Azure S'L или сервера управляемых экземпляров, на котором размещается SSISDB, не совпадает с местоположением виртуальной сети, подключенной к вашей сети, сначала создайте икс-икверс из Azure-SSIS с помощью существующей базы данных Azure S'L или сервер амнадивов, а затем присоединитесь к другой виртуальной сети в том же месте, а затем направите виртуальную сеть на сетевое виртуальное соединение между различными местами.

На следующей схеме показаны параметры расположения фабрики данных и ее среды выполнения интеграции.

![Расположение среды выполнения интеграции](media/concepts-integration-runtime/integration-runtime-location.png)

## <a name="determining-which-ir-to-use"></a>Выбор IR для использования

### <a name="copy-activity"></a>Действие копирования

Для действия копирования нужны связанные службы источника и приемника данных, которые определяют направление потока данных. Далее описан алгоритм выбора экземпляра среды выполнения интеграции, который будет выполнять копирование. 

- **Копирование между двумя источниками облачных данных:** когда и службы исходного кода, и связанные с раковиной используют Azure IR, ADF использует региональный ИК Azure, если вы указали, или автоматически определите местоположение ИК Azure, если вы выберете иК-участок (по умолчанию), как описано в разделе [местоположения времени выполнения интеграции.](#integration-runtime-location)
- **Копирование между облачным источником данных и источником данных в частной сети**. Если связанная служба источника или приемника использует локальную IR, действие копирования выполняется в среде в этой локальной среде.
- **Копирование между двумя источниками данных в частной сети:** как источник, так и служба связи раковины должны указывать на один и тот же экземпляр времени выполнения интеграции, и что время выполнения интеграции используется для выполнения действия копирования.

### <a name="lookup-and-getmetadata-activity"></a>Действие поиска и получения метаданных

Действие поиска и получения метаданных выполняется в среде выполнения интеграции, ассоциированной со связанной службой хранилища данных.

### <a name="external-transformation-activity"></a>Активность внешних преобразований

Каждая внешняя трансформация, использующая внешний вычислительный движок, имеет целевую вычислительную службу, которая указывает на время выполнения интеграции. Этот экземпляр времени выполнения интеграции определяет место, куда отправляется эта внешняя деятельность преобразования ручной работы.

### <a name="data-flow-activity"></a>Активность потока данных

Действия потока данных выполняются на времени выполнения интеграции Azure, связанном с ним. Вычисление Spark, используемые Потоками данных, определяется свойствами потока данных в вашем Времени интеграции Azure и полностью управляются ADF.

## <a name="next-steps"></a>Дальнейшие действия

См. следующие статьи:

- [Создание времени выполнения интеграции Azure](create-azure-integration-runtime.md)
- [Создание автономного времени выполнения интеграции](create-self-hosted-integration-runtime.md)
- [Создайте время выполнения интеграции Azure-SSIS.](create-azure-ssis-integration-runtime.md) Эта статья дополняет соответствующее руководство, а также предоставляет инструкции по использованию Управляемого экземпляра Базы данных SQL Azure и присоединению среды выполнения интеграции к виртуальной сети. 
