---
title: Сопоставление потоков данных в фабрике данных Azure | Документация Майкрософт
description: Общие сведения о сопоставлении потоков данных в фабрике данных Azure
author: kromerm
ms.author: makromer
ms.reviewer: daperlov
ms.service: data-factory
ms.topic: conceptual
ms.date: 10/7/2019
ms.openlocfilehash: 37fec388acda78f3d13c8e85ddddf780ad099d69
ms.sourcegitcommit: bb65043d5e49b8af94bba0e96c36796987f5a2be
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/16/2019
ms.locfileid: "72388001"
---
# <a name="what-are-mapping-data-flows"></a>Что такое потоки данных сопоставления?

Сопоставление потоков данных — это визуально спроектированные преобразования данных в фабрике данных Azure. Потоки данных позволяют инженерам данных разрабатывать логику преобразования графических данных без написания кода. Результирующие потоки данных выполняются как действия в конвейерах фабрики данных Azure с использованием масштабируемых кластеров Spark. Действия потока данных могут быть реализованы с помощью существующих возможностей планирования фабрики данных, управления, потока и мониторинга.

Сопоставление потоков данных обеспечивает полностью визуальный интерфейс без необходимости написания кода. Потоки данных будут выполняться в собственном кластере выполнения для обработки масштабируемых данных. Фабрика данных Azure обрабатывает все преобразование кода, оптимизацию пути и выполнение заданий потока данных.

## <a name="getting-started"></a>Начало работы

Чтобы создать поток данных, щелкните знак "плюс" в разделе "ресурсы фабрики". 

![новый поток данных](media/data-flow/newdataflow2.png "новый поток данных")

Откроется холст потока данных, где можно создать логику преобразования. Щелкните поле "добавить источник", чтобы начать настройку преобразования источника. Дополнительные сведения см. в разделе [Преобразование источника](data-flow-source.md).

## <a name="data-flow-canvas"></a>Холст потока данных

Холст потока данных разделяется на три части: Верхняя панель, диаграмма и панель конфигурации. 

![Маркер](media/data-flow/canvas1.png "Холст")

### <a name="graph"></a>Граф

Граф отображает поток преобразования. Он показывает журнал преобразований источника данных по мере их последовательного в один или несколько приемников. Чтобы добавить новый источник, щелкните поле "добавить источник". Чтобы добавить новое преобразование, щелкните знак "плюс" в правом нижнем углу существующего преобразования.

![Маркер](media/data-flow/canvas2.png "Холст")

### <a name="configuration-panel"></a>Панель конфигурации

На панели конфигурация отображаются параметры, относящиеся к текущему выбранному преобразованию, или, если преобразование не выбрано, поток данных. В общей конфигурации потока данных можно изменить имя и описание на вкладке **Общие** или добавить параметры с помощью вкладки **Параметры** . Дополнительные сведения см. в разделе [Сопоставление параметров потока данных](parameters-data-flow.md).

Каждое преобразование имеет по крайней мере четыре вкладки конфигурации:

#### <a name="transformation-settings"></a>Параметры преобразования

Первая вкладка в области конфигурации каждого преобразования содержит параметры, относящиеся к этому преобразованию. Дополнительные сведения см. на странице документации по преобразованию.

![Вкладка "Параметры источника"](media/data-flow/source1.png "Вкладка "Параметры источника"")

#### <a name="optimize"></a>Оптимизация

Вкладка _Оптимизация_ содержит параметры для настройки схем секционирования.

![Optimize](media/data-flow/optimize1.png "Оптимизация") (Оптимизация)

Значение по умолчанию — "использовать текущее секционирование", которое указывает фабрике данных Azure использовать схему секционирования в качестве собственной для потоков данных, выполняющихся в Spark. В большинстве случаев этот вариант является рекомендуемым.

Существуют экземпляры, в которых может потребоваться настроить секционирование. Например, если вы хотите выводить преобразования в один файл в папке Lake, выберите "одна секция" в преобразовании приемника.

Другой случай, когда может потребоваться управлять схемами секционирования, — это оптимизация производительности. Настройка секционирования обеспечивает управление распределением данных между узлами вычислений и оптимизацией локализации данных, которые могут иметь как положительные, так и отрицательные последствия для общей производительности потока данных. Дополнительные сведения см. в разделе [Пошаговое руководств по производительности потока данных](concepts-data-flow-performance.md).

Чтобы изменить секционирование для любого преобразования, перейдите на вкладку Оптимизация и установите переключатель "задать секционирование". После этого будет представлен ряд вариантов секционирования. Оптимальный метод секционирования будет отличаться в зависимости от объема данных, потенциальных ключей, значений NULL и количества элементов. Рекомендуется начать с секционирования по умолчанию, а затем попробовать использовать другие параметры секционирования. Можно проверить использование запусков отладки конвейера и Просмотр времени выполнения и использования секций в каждой группе преобразования из представления мониторинга. Дополнительные сведения см. в разделе [наблюдение за потоками данных](concepts-data-flow-monitoring.md).

Ниже приведены доступные параметры секционирования.

##### <a name="round-robin"></a>Циклический перебор, 

Циклический перебор — это простой вариант секционирования, который автоматически равномерно распределяет данные по секциям. Используйте метод циклического перебора, если у вас нет хороших ключевых кандидатов для реализации высококачественной интеллектуальной стратегии секционирования. Вы можете задать количество физических секций.

##### <a name="hash"></a>Хэш

Фабрика данных Azure создает хэш столбцов, чтобы получить равномерное распределение секций, и при этом строки со сходными значениями попадут в одну секцию. Если вы выберете вариант с хэшем, проверьте равномерность распределения по секциям. Вы можете задать количество физических секций.

##### <a name="dynamic-range"></a>Динамический диапазон

Динамический диапазон означает использование динамических диапазонов Spark по указанным вами столбцам или выражениям. Вы можете задать количество физических секций. 

##### <a name="fixed-range"></a>Фиксированный диапазон

Создайте выражение, которое предоставляет фиксированный диапазон значений в столбцах секционированных данных. Прежде чем использовать этот параметр, вы получите хорошее представление о данных, чтобы избежать смещения секций. Значения, вводимые для выражения, будут использоваться как часть функции секционирования. Вы можете задать количество физических секций.

##### <a name="key"></a>Ключ

Если вы хорошо понимаете кратность ваших данных, хорошим вариантом может служить секционирование по ключу. При секционировании по ключу создаются секции для каждого уникального значения в столбце. Невозможно задать количество секций, так как число будет основано на уникальных значениях в данных.

#### <a name="inspect"></a>Обследован

На вкладке _Проверка_ представлено представление метаданных потока данных, для которого выполняется преобразование. Вы видите количество столбцов, измененных столбцов, добавленных столбцов, типов данных, упорядочения столбцов и ссылок на столбцы. Проверка — это представление метаданных, доступное только для чтения. Для просмотра метаданных в области проверки не нужно включать режим отладки.

![Обследован](media/data-flow/inspect1.png "Обследован")

При изменении формы данных с помощью преобразований вы увидите, что изменения метаданных проходят через панель проверки. Если в преобразовании источника не определена схема, метаданные не будут отображаться в области проверки. Отсутствие метаданных часто встречается в сценариях смещения схемы.

#### <a name="data-preview"></a>Предварительный просмотр данных

Если режим отладки включен, вкладка _Предварительный просмотр данных_ предоставляет интерактивный моментальный снимок данных при каждом преобразовании. Дополнительные сведения см. [в разделе Предварительный просмотр данных в режиме отладки](concepts-data-flow-debug-mode.md#data-preview).

### <a name="top-bar"></a>Верхняя панель

Верхняя панель содержит действия, влияющие на весь поток данных, такой как сохранение и проверка. Можно также переключаться между режимами графика и конфигурации с помощью кнопок **Показать диаграмму** и **Скрыть граф** .

![Скрыть график](media/data-flow/hideg.png "Скрыть график")

Если скрыть граф, вы сможете перемещаться по узлам преобразования позднее с помощью кнопок **назад** и **Далее** .

![Осуществляется](media/data-flow/showhide.png "Осуществляется")

## <a name="next-steps"></a>Дальнейшие действия

* Узнайте, как создать [Преобразование источника](data-flow-source.md)
* Сведения о построении потоков данных в [режиме отладки](concepts-data-flow-debug-mode.md)
