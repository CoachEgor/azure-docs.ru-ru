---
title: Картирование потока данных Суррогатная ключевая трансформация
description: Как использовать картографическое преобразование потока данных Azure Data Factory для создания последовательных ключевых значений
author: kromerm
ms.author: makromer
ms.reviewer: douglasl
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 02/12/2019
ms.openlocfilehash: bab48aa9079c1b8020bb828a6bb91bd244a78cf1
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74930202"
---
# <a name="mapping-data-flow-surrogate-key-transformation"></a>Картирование потока данных Суррогатная ключевая трансформация



Используйте преобразование суррогатного ключа, чтобы добавить увеличивающееся значение некоммерческого произвольного ключа в ваш набор строк потока данных. Это полезно при разработке таблиц измерений в аналитической модели данных в виде схемы типа "звезда", где каждому члену в ваших таблицах измерений необходимо иметь уникальный ключ, который является некоммерческим ключом, частью методологии Kimball DW.

![Суррогатный ключ Преобразование](media/data-flow/surrogate.png "Суррогатная ключевая трансформация")

"Ключевой столбец" — это имя, которое вы дадите новому столбцу суррогатного ключа.

"Начальное значение" является начальной точкой добавочного значения.

## <a name="increment-keys-from-existing-sources"></a>Ключи приращения из существующих источников

Если вы хотите начать свою последовательность с значения, которое существует в Источнике, можно использовать преобразование derived Column сразу после преобразования суррогатного ключа и добавить два значения вместе:

![SK добавить Макс](media/data-flow/sk006.png "Суррогатная ключевая трансформация Добавить Макс")

Чтобы сазать ключевое значение с предыдущим макс, Есть два метода, которые можно использовать:

### <a name="database-sources"></a>Источники баз данных

Используйте опцию "Запрос", чтобы выбрать MAX() из исходного кода с помощью преобразования источника:

![Суррогатный ключевой запрос](media/data-flow/sk002.png "Суррогатный ключ Трансформация Запрос")

### <a name="file-sources"></a>Источники файлов

Если предыдущее максимальное значение находится в файле, можно использовать преобразование Исходного кода вместе с преобразованием агрегата и использовать функцию выражения MAX() для получения предыдущего максимального значения:

![Файл суррогатного ключа](media/data-flow/sk008.png "Файл суррогатного ключа")

В обоих случаях необходимо присоединиться к входящим новым данным вместе с исходным источником, содержащим предыдущее максимальное значение:

![Суррогатный ключ Присоединиться](media/data-flow/sk004.png "Суррогатный ключ Присоединиться")

## <a name="next-steps"></a>Дальнейшие действия

В этих примерах используются преобразования [соединительных](data-flow-join.md) и [производных столбцов.](data-flow-derived-column.md)
