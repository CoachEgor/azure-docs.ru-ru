---
title: Сопоставление преобразования суррогатного ключа потока данных
description: Как использовать преобразование суррогатного ключа потока данных сопоставления фабрики данных Azure для создания последовательных значений ключей
author: kromerm
ms.author: makromer
ms.reviewer: douglasl
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 02/12/2019
ms.openlocfilehash: bab48aa9079c1b8020bb828a6bb91bd244a78cf1
ms.sourcegitcommit: a5ebf5026d9967c4c4f92432698cb1f8651c03bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2019
ms.locfileid: "74930202"
---
# <a name="mapping-data-flow-surrogate-key-transformation"></a>Сопоставление преобразования суррогатного ключа потока данных



Используйте преобразование суррогатного ключа, чтобы добавить увеличивающееся значение некоммерческого произвольного ключа в ваш набор строк потока данных. Это полезно при разработке таблиц измерений в аналитической модели данных в виде схемы типа "звезда", где каждому члену в ваших таблицах измерений необходимо иметь уникальный ключ, который является некоммерческим ключом, частью методологии Kimball DW.

![Преобразование суррогатного ключа](media/data-flow/surrogate.png "Преобразование суррогатного ключа")

"Ключевой столбец" — это имя, которое вы дадите новому столбцу суррогатного ключа.

"Начальное значение" является начальной точкой добавочного значения.

## <a name="increment-keys-from-existing-sources"></a>Увеличение ключей из существующих источников

Если вы хотите начать последовательность из значения, существующего в источнике, можно использовать преобразование «Производный столбец» сразу после преобразования «суррогатный ключ» и сложить два значения:

![Максимальное число добавлений SK](media/data-flow/sk006.png "Добавление преобразования "суррогатный ключ" Add Max")

Чтобы заполнить значение ключа предыдущим максимальным, можно использовать два метода:

### <a name="database-sources"></a>Источники базы данных

Используйте параметр "запрос", чтобы выбрать MAX () из источника с помощью преобразования "источник":

![Запрос суррогатного ключа](media/data-flow/sk002.png "Запрос на преобразование суррогатного ключа")

### <a name="file-sources"></a>Источники файлов

Если предыдущее максимальное значение находится в файле, можно использовать преобразование «источник» вместе с преобразованием «Статистическая обработка» и использовать функцию выражения MAX () для получения предыдущего максимального значения:

![Файл суррогатного ключа](media/data-flow/sk008.png "Файл суррогатного ключа")

В обоих случаях необходимо объединить входящие новые данные с источником, содержащим предыдущее максимальное значение:

![Соединение с суррогатным ключом](media/data-flow/sk004.png "Соединение с суррогатным ключом")

## <a name="next-steps"></a>Дальнейшие действия

В этих примерах используются преобразования « [соединение](data-flow-join.md) » и « [производный столбец](data-flow-derived-column.md) ».
