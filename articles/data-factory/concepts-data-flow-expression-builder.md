---
title: Построитель выражений потока данных сопоставления фабрики данных Azure
description: Построитель выражений для потоков данных сопоставления фабрики данных Azure
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.date: 11/17/2019
ms.openlocfilehash: 0eb2c2692ed2444a85e7253c6fdd8734385ff881
ms.sourcegitcommit: 265f1d6f3f4703daa8d0fc8a85cbd8acf0a17d30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2019
ms.locfileid: "74672269"
---
# <a name="mapping-data-flow-expression-builder"></a>Построитель выражений потока данных сопоставления



В потоке данных сопоставления фабрики данных Azure можно найти поля выражений, в которых можно ввести выражения для преобразования данных. Используйте в этих полях столбцы, поля, переменные, параметры и функции из своего потока данных. Для создания выражений используйте построитель выражений. Чтобы открыть его, щелкните в текстовом поле выражения в окне преобразования. Иногда при выборе столбцов для преобразования отображается вариант Computed Column (Вычисляемый столбец). Если щелкнуть его, также запустится построитель выражений.

![Построитель выражений](media/data-flow/xpb1.png "Построитель выражений")

По умолчанию построитель выражений открывается в режиме текстового редактора. Функция автозавершения считывает данные из всей объектной модели Потока данных Фабрики данных Azure с проверкой синтаксиса и выделением.

![Автоматическое завершение построителя выражений](media/data-flow/expb1.png "Автоматическое завершение построителя выражений")

## <a name="build-schemas-in-output-schema-pane"></a>Схемы сборки в области выходной схемы

![Добавить сложный столбец](media/data-flow/complexcolumn.png "Добавить столбцы")

В левой области схемы вывода вы увидите столбцы, которые вы изменяете и добавляете в схему. Здесь можно в интерактивном режиме создавать простые и сложные структуры данных. Добавьте дополнительные поля с помощью команды "добавить столбец" и создайте иерархии с помощью команды "добавить подстолбец".

![Добавить подстолбец](media/data-flow/addsubcolumn.png "Добавить подстолбец")

## <a name="data-preview-in-debug-mode"></a>Предварительный просмотр данных в режиме отладки

![Построитель выражений](media/data-flow/exp4b.png "Предварительный просмотр данных выражения")

При работе с выражениями потока данных переключитесь в режим отладки с рабочей области конструктора потока данных Azure, включив интерактивную предварительную версию результатов данных из создаваемого выражения. Для выражений включена отладка в режиме реального времени.

![Режим отладки](media/data-flow/debugbutton.png "Кнопка "Отладка"")

Нажмите кнопку обновить, чтобы обновить результаты выражения по образцу источника в режиме реального времени.

![Построитель выражений](media/data-flow/exp5.png "Предварительный просмотр данных выражения")

## <a name="comments"></a>Комментарии

К выражениям можно добавлять комментарии с использованием однострочного и многострочного синтаксиса комментариев:

![Комментарии](media/data-flow/comments.png "Комментарии")

## <a name="regular-expressions"></a>Регулярные выражения

Язык выражений Потока данных Фабрики данных Azure (см. [полную справочную документацию](https://aka.ms/dataflowexpressions)) поддерживает функции с синтаксисом регулярных выражений. При использовании функций регулярных выражений построитель выражений попытается интерпретировать обратную косую черту (\\) как последовательность escape-символов. При использовании обратных косых черт в регулярном выражении либо заключите все регулярное выражение в такты (\`), либо используйте двойную обратную косую черту.

Пример использования обратных кавычек

```
regex_replace('100 and 200', `(\d+)`, 'digits')
```

и двойной обратной косой черты

```
regex_replace('100 and 200', '(\\d+)', 'digits')
```

## <a name="addressing-array-indexes"></a>Адресация индексов массива

При использовании функций выражений, которые возвращают массивы, используйте квадратные скобки [], чтобы обращаться к конкретному индексу в возвращаемом объекте массива. Массив отсчитывается от единицы.

![Массив построителя выражений](media/data-flow/expb2.png "Предварительный просмотр данных выражения")

## <a name="handling-names-with-special-characters"></a>Обработка имен с помощью специальных символов

При наличии имен столбцов, содержащих специальные символы или пробелы, заключите имя в фигурные скобки.
* ```{[dbo].this_is my complex name$$$}```

## <a name="keyboard-shortcuts"></a>Сочетания клавиш

* ```Ctrl-K Ctrl-C```: все строки комментариев
* ```Ctrl-K Ctrl-U```: раскомментировать
* ```F1```: предоставление команд справки по редактору
* ```Alt-Down Arrow```: перемещение текущей строки вниз
* ```Alt-Up Arrow```: переместить текущую строку вверх
* ```Cntrl-Space```: отображение контекстной справки

## <a name="manual-comments"></a>Комментарии вручную

* ```/* This is my comment */```

* ```/* This is a```
*   ```multi-line comment */```
   
* ```// This is a single line comment```

Если вы поместили комментарий в верхней части выражения, он появится в текстовом поле преобразование, чтобы документировать выражения преобразования:

![Комментарии](media/data-flow/comments2.png "Комментарии")

## <a name="convert-to-dates-or-timestamps"></a>Преобразовать в даты или метки времени

```toString(toTimestamp('12/31/2016T00:12:00', 'MM/dd/yyyy\'T\'HH:mm:ss'), 'MM/dd /yyyy\'T\'HH:mm:ss')```

Обратите внимание, что для включения строковых литералов в выходные данные отметок времени необходимо заключить преобразование в ```toString()```.

Вот как можно преобразовать секунды из эпохи в дату или отметку времени:

```toTimestamp(1574127407*1000l)```

Обратите внимание на конечную «l» в конце выражения выше. , Который обозначает преобразование в long в виде встроенного синтаксиса.

## <a name="handling-column-names-with-special-characters"></a>Обработка имен столбцов с помощью специальных символов

При наличии имен столбцов, содержащих специальные символы или пробелы, заключите имя в фигурные скобки.

```{[dbo].this_is my complex name$$$}```

## <a name="next-steps"></a>Дальнейшие действия

[Начало создания выражений преобразования данных](data-flow-expression-functions.md)
