---
title: Копирование данных из Teradata с помощью фабрики данных Azure | Документация Майкрософт
description: Дополнительные сведения о соединителе Teradata службы фабрики данных, которая позволяет вам копировать данные из базы данных Teradata в хранилища данных, которые поддерживаются фабрикой данных в качестве приемника.
services: data-factory
documentationcenter: ''
author: linda33wj
manager: craigg
ms.reviewer: douglasl
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.topic: conceptual
ms.date: 07/02/2019
ms.author: jingwang
ms.openlocfilehash: 63f28c8b6eaceed12e1f76e9c0c5984e3b63b500
ms.sourcegitcommit: d3b1f89edceb9bff1870f562bc2c2fd52636fc21
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/04/2019
ms.locfileid: "67561426"
---
# <a name="copy-data-from-teradata-using-azure-data-factory"></a>Копирование данных из Teradata с помощью фабрики данных Azure
> [!div class="op_single_selector" title1="Выберите версию службы фабрики данных, которую вы используете:"]
>
> * [Версия 1](v1/data-factory-onprem-teradata-connector.md)
> * [Текущая версия](connector-teradata.md)

В этой статье описывается, как с помощью действия копирования в фабрике данных Azure копировать данные из базы данных Teradata. Это продолжение [статьи об обзоре действия копирования](copy-activity-overview.md), в которой представлены общие сведения о действии копирования.

## <a name="supported-capabilities"></a>Поддерживаемые возможности

Вы можете копировать данные из базы данных Teradata в любое хранилище данных, поддерживаемое в качестве приемника. Список хранилищ данных, которые поддерживаются в качестве источников и приемников для действия копирования, приведен в таблице [Поддерживаемые хранилища данных и форматы](copy-activity-overview.md#supported-data-stores-and-formats).

Этот соединитель Teradata поддерживает:

- Teradata **версии 14.10, 15.0, 15.10, 16.0, 16.10 и 16.20**.
- копирование данных с использованием **базовой** проверки подлинности или проверки подлинности **Windows**.
- Параллельное копирование из источника Teradata. См. в разделе [параллельное копирование из Teradata](#parallel-copy-from-teradata) раздел с подробными сведениями.

> [!NOTE]
>
> Фабрика данных Azure обновлены соединителе Teradata с момента v3.18 локальную среду выполнения интеграции, средой встроенный драйвер ODBC, а также предлагаем гибкое подключение параметров а также параллельное копирование out-of-box для повышения производительности. Любой имеющейся рабочей нагрузки с помощью предыдущего соединителе Teradata возможности для каждого поставщиком данных .NET для Teradata по-прежнему поддерживается в качестве-хотя рекомендуется использовать новый файл, в дальнейшем. Обратите внимание, что новый путь требует разного набора связанной службы или набора данных или копирование источника. В разделе соответствующих на сведения о конфигурации.

## <a name="prerequisites"></a>Технические условия

Если ваш Teradata не является общедоступной, необходимо настроить локальную среду выполнения интеграции. См. дополнительные сведения о среде выполнения интеграции см. в статье [Локальная среда выполнения интеграции](create-self-hosted-integration-runtime.md). Среда выполнения интеграции предоставляет встроенный драйвер Teradata, начиная с версии 3.18, поэтому вам не потребуется устанавливать драйвер вручную. Драйвер требует соответствия «Visual C++ распространяемый пакет 2012 с обновлением 4» на компьютере, где выполняется локальная среда выполнения Интеграции, скачать из [здесь](https://www.microsoft.com/en-sg/download/details.aspx?id=30679) Если вы еще не установили его.

Для локальной IR версии ниже, чем 3.18, необходимо установить [поставщик данных .NET для Teradata](https://go.microsoft.com/fwlink/?LinkId=278886) версии 14 или более поздней версии на компьютере среды выполнения интеграции. 

## <a name="getting-started"></a>Приступая к работе

[!INCLUDE [data-factory-v2-connector-get-started](../../includes/data-factory-v2-connector-get-started.md)]

Следующие разделы содержат сведения о свойствах, которые используются для определения объектов фабрики данных, относящихся к соединителю Teradata.

## <a name="linked-service-properties"></a>Свойства связанной службы

Связанная служба Teradata поддерживает следующие свойства:

| Свойство | ОПИСАНИЕ | Обязательно для заполнения |
|:--- |:--- |:--- |
| type | Свойству type необходимо задать значение **Teradata** | Да |
| connectionString | Указывает сведения, необходимые для подключения к экземпляру базы данных Teradata. Ознакомьтесь с приведенными ниже примерами.<br/>Вы можете также поместить пароль в Azure Key Vault и извлечь конфигурацию `password` из строки подключения. Ссылаться на [Store учетные данные в хранилище ключей Azure](store-credentials-in-key-vault.md) статьи с более подробными сведениями. | Да |
| username | Укажите имя пользователя для подключения к базе данных Teradata. Применяется при использовании проверки подлинности Windows. | Нет |
| password | Введите пароль для учетной записи пользователя, указанной для выбранного имени пользователя. Вы также можете [ссылка на секрет, хранящийся в Azure Key Vault](store-credentials-in-key-vault.md). <br>Применяется при использовании проверки подлинности Windows, или ссылку на пароль в хранилище ключей для обычной проверки подлинности. | Нет |
| connectVia | [Среда выполнения интеграции](concepts-integration-runtime.md), используемая для подключения к хранилищу данных. Требуется локальная среда IR, как упоминалось в разделе [Предварительные требования](#prerequisites). |Да |

**Пример: использование обычной проверки подлинности**

```json
{
    "name": "TeradataLinkedService",
    "properties": {
        "type": "Teradata",
        "typeProperties": {
            "connectionString": "DBCName=<server>;Uid=<username>;Pwd=<password>"
        },
        "connectVia": {
            "referenceName": "<name of Integration Runtime>",
            "type": "IntegrationRuntimeReference"
        }
    }
}
```

**Пример: использование проверки подлинности Windows**

```json
{
    "name": "TeradataLinkedService",
    "properties": {
        "type": "Teradata",
        "typeProperties": {
            "connectionString": "DBCName=<server>",
            "username": "<username>",
            "password": "<password>"
        },
        "connectVia": {
            "referenceName": "<name of Integration Runtime>",
            "type": "IntegrationRuntimeReference"
        }
    }
}
```

> [!NOTE]
>
> Если вы используете Teradata возможности связанной службы для каждого поставщика данных .NET для Teradata с следующие полезные данные, он по-прежнему поддерживается в качестве-хотя рекомендуется использовать новый файл, в дальнейшем.

**Предыдущие полезные данные:**

```json
{
    "name": "TeradataLinkedService",
    "properties": {
        "type": "Teradata",
        "typeProperties": {
            "server": "<server>",
            "authenticationType": "<Basic/Windows>",
            "username": "<username>",
            "password": {
                "type": "SecureString",
                "value": "<password>"
            }
        },
        "connectVia": {
            "referenceName": "<name of Integration Runtime>",
            "type": "IntegrationRuntimeReference"
        }
    }
}
```

## <a name="dataset-properties"></a>Свойства набора данных

Полный список разделов и свойств, доступных для определения наборов данных, см. в статье о наборах данных. В этом разделе содержится список свойств, поддерживаемых набором данных Teradata.

Чтобы скопировать данные из Teradata, поддерживаются следующие свойства:

| Свойство | ОПИСАНИЕ | Обязательно для заполнения |
|:--- |:--- |:--- |
| type | Для набора данных необходимо задать значение **TeradataTable** | Да |
| database | Имя базы данных Teradata. | Нет (если свойство query указано в источнике действия) |
| table | Имя таблицы в базе данных Teradata. | Нет (если свойство query указано в источнике действия) |

**Пример.**

```json
{
    "name": "TeradataDataset",
    "properties": {
        "type": "TeradataTable",
        "linkedServiceName": {
            "referenceName": "<Teradata linked service name>",
            "type": "LinkedServiceReference"
        },
        "typeProperties": {}
    }
}
```

> [!NOTE]
>
> При использовании набора данных типа «RelationalTable» следующим образом, он по-прежнему поддерживается в качестве-хотя рекомендуется использовать новый файл, в дальнейшем.

**Предыдущие полезные данные:**

```json
{
    "name": "TeradataDataset",
    "properties": {
        "type": "RelationalTable",
        "linkedServiceName": {
            "referenceName": "<Teradata linked service name>",
            "type": "LinkedServiceReference"
        },
        "typeProperties": {}
    }
}
```

## <a name="copy-activity-properties"></a>Свойства действия копирования

Полный список разделов и свойств, используемых для определения действий, см. в статье [Конвейеры и действия в фабрике данных Azure](concepts-pipelines-activities.md). В этом разделе содержится список свойств, поддерживаемых Teradata в качестве источника.

### <a name="teradata-as-source"></a>Teradata в качестве источника

> [!TIP]
>
> Дополнительные сведения из [параллельное копирование из Teradata](#parallel-copy-from-teradata) раздел о том, как загрузка данных из Teradata, эффективно используя секционирование данных.

Чтобы скопировать данные из Teradata, поддерживаются следующие свойства в действии копирования **источника** раздел:

| Свойство | ОПИСАНИЕ | Обязательно для заполнения |
|:--- |:--- |:--- |
| type | Свойству type источника действия копирования необходимо задать значение **TeradataSource** | Да |
| query | Используйте пользовательский SQL-запрос для чтения данных. Например, `"SELECT * FROM MyTable"`.<br>Когда вы включаете секционированных нагрузки, необходимо подключить соответствующие встроенные раздел параметров в запросе. См. Примеры в [параллельное копирование из Teradata](#parallel-copy-from-teradata) раздел. | Нет (если будет указана таблица в наборе данных) |
| partitionOptions | Указывает параметры, используемые для загрузки данных из Teradata секционирования данных. <br>Разрешить следующие значения:: **Нет** (по умолчанию), **хэш** и **DynamicRange**.<br>При включении режима секционирования (не «None»), также настройте **[ `parallelCopies` ](copy-activity-performance.md#parallel-copy)** Установка для действия копирования, например 4, который определяет параллельных степени параллельно загружать данные из Teradata База данных. | Нет |
| partitionSettings | Укажите группу параметров для секционирования данных. <br>Применение при параметр секции не `None`. | Нет |
| partitionColumnName | Укажите имя исходного столбца **в целочисленный тип** , будет использоваться секционирование по диапазонам для параллельного копирования. Если не указан, первичный ключ таблицы будет автоматически обнаружен и использоваться в качестве столбца секционирования. <br>Применяются при использовании параметра секции `Hash` или `DynamicRange`. Если используется запрос для извлечения исходных данных, подключения `?AdfHashPartitionCondition` или `?AdfRangePartitionColumnName` в предложении WHERE. Пример см. в [параллельное копирование из Teradata](#parallel-copy-from-teradata) раздел. | Нет |
| partitionUpperBound | Максимальное значение столбца секционирования, чтобы скопировать данные. <br>Применяются при использовании параметра секции `DynamicRange`. Если используется запрос для извлечения исходных данных, подключения `?AdfRangePartitionUpbound` в предложении WHERE. Пример см. в [параллельное копирование из Teradata](#parallel-copy-from-teradata) раздел. | Нет |
| partitionLowerBound | Минимальное значение столбца секционирования, чтобы скопировать данные. <br>Применяются при использовании параметра секции `DynamicRange`. Если используется запрос для извлечения исходных данных, подключения `?AdfRangePartitionLowbound` в предложении WHERE. Пример см. в [параллельное копирование из Teradata](#parallel-copy-from-teradata) раздел. | Нет |

> [!NOTE]
>
> При использовании источника копирования тип «RelationalSource», он по-прежнему поддерживается в качестве-работает, но не поддерживает новый встроенных параллельной нагрузки из Teradata (параметры секции). Рекомендуется использовать этот новый, в дальнейшем.

**Пример: копирование данных с помощью простого запроса без секционирования**

```json
"activities":[
    {
        "name": "CopyFromTeradata",
        "type": "Copy",
        "inputs": [
            {
                "referenceName": "<Teradata input dataset name>",
                "type": "DatasetReference"
            }
        ],
        "outputs": [
            {
                "referenceName": "<output dataset name>",
                "type": "DatasetReference"
            }
        ],
        "typeProperties": {
            "source": {
                "type": "TeradataSource",
                "query": "SELECT * FROM MyTable"
            },
            "sink": {
                "type": "<sink type>"
            }
        }
    }
]
```

## <a name="parallel-copy-from-teradata"></a>Параллельное копирование из Teradata

Соединитель Teradata фабрики данных предоставляет встроенные данные, секционирование для копирования данных из Teradata в параллельном режиме с высокой производительностью. Можно найти параметры секционирования данных в действие копирования Teradata источника, "->":

![Параметры секции](./media/connector-teradata/connector-teradata-partition-options.png)

При включении секционированных копирования, фабрика данных запускает параллельные запросы к источнику Teradata для загрузки данных по разделам. Настраивается и контролируется с помощью параллельных степени **[ `parallelCopies` ](copy-activity-performance.md#parallel-copy)** задание для действия копирования. Например, если задать `parallelCopies` как четыре, одновременно создаваемые фабрикой данных, и четырех запросов выполняется на основе указанного раздела и параметры, иных извлечение данных из базы данных Teradata.

Рекомендуется включить параллельное копирование с использованием данных, секционирование, особенно в том случае, при загрузке большого объема данных из базы данных Teradata. Ниже приведены рекомендуемые конфигурации для различных сценариев.

| Сценарий                                                     | Рекомендуемые параметры                                           |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| Полная загрузка из большой таблицы                                   | **Секции параметра**: Хэш. <br><br/>Во время выполнения фабрика данных автоматическое определение столбца первичного ключа, применить хэша для нее и копирования данных по разделам. |
| Загрузить большой объем данных, с помощью пользовательского запроса                 | **Секции параметра**: Хэш.<br>**Запрос**: `SELECT * FROM <TABLENAME> WHERE ?AdfHashPartitionCondition AND <your_additional_where_clause>`.<br>**Столбец секционирования**: Укажите столбец, используемый для применения хэш-секцию. Если не указан, ADF автоматически обнаруживает столбца первичного ключа таблицы, которую вы указали в наборе данных Teradata.<br><br>Во время выполнения, замените фабрики данных `?AdfHashPartitionCondition` с логику секции хэш и отправить Teradata. |
| Загрузить большой объем данных, с помощью пользовательского запроса, наличие целочисленного столбца с равномерно распределенной значение для секционирования по диапазонам | **Параметров секции**: Раздел динамического диапазона.<br>**Запрос**: `SELECT * FROM <TABLENAME> WHERE ?AdfRangePartitionColumnName <= ?AdfRangePartitionUpbound AND ?AdfRangePartitionColumnName >= ?AdfRangePartitionLowbound AND <your_additional_where_clause>`.<br>**Столбец секционирования**: Укажите столбец, используемый для секционирования данных. Можно разделить по отношению к столбцу с типом данных integer.<br>**Верхняя граница секции** и **нижняя граница секции**: Укажите, если нужно выполнить фильтрацию по отношению к столбцу секционирования для извлечения только данные между нижним и верхним диапазоном.<br><br>Во время выполнения, замените фабрики данных `?AdfRangePartitionColumnName`, `?AdfRangePartitionUpbound`, и `?AdfRangePartitionLowbound` с действительное имя столбца и значением диапазоны для каждой секции и отправку Teradata. <br>Например, если значение в столбце секционирования «ID» с нижней границей, 1, а верхняя граница как 80, с набором параллельное копирование 4, ADF получать данные по 4 разделов с Идентификатором между [1,20], [21, 40], [41, 60] и [61, 80]. |

**Пример: запрос с хэш-секцию**

```json
"source": {
    "type": "TeradataSource",
    "query": "SELECT * FROM <TABLENAME> WHERE ?AdfHashPartitionCondition AND <your_additional_where_clause>",
    "partitionOption": "Hash",
    "partitionSettings": {
        "partitionColumnName": "<hash_partition_column_name>"
    }
}
```

**Пример: запрос с секцией динамического диапазона**

```json
"source": {
    "type": "TeradataSource",
    "query": "SELECT * FROM <TABLENAME> WHERE ?AdfRangePartitionColumnName <= ?AdfRangePartitionUpbound AND ?AdfRangePartitionColumnName >= ?AdfRangePartitionLowbound AND <your_additional_where_clause>",
    "partitionOption": "DynamicRange",
    "partitionSettings": {
        "partitionColumnName": "<dynamic_range_partition_column_name>",
        "partitionUpperBound": "<upper_value_of_partition_column>",
        "partitionLowerBound": "<lower_value_of_partition_column>"
    }
}
```

## <a name="data-type-mapping-for-teradata"></a>Сопоставление типов для Teradata

При копировании данных из Teradata используются следующие сопоставления типов данных Teradata с промежуточными типами данных фабрики данных Azure. Дополнительные сведения о том, как действие копирования сопоставляет исходную схему и типы данных для приемника, см. в статье [Сопоставление схем в действии копирования](copy-activity-schema-and-type-mapping.md).

| Типы данных Teradata | Тип промежуточных данных фабрики данных |
|:--- |:--- |
| BigInt |Int64 |
| Blob |Byte[] |
| Byte |Byte[] |
| ByteInt |Int16 |
| Char |String |
| Clob |String |
| Date |DateTime |
| Decimal |Decimal |
| Double |Double |
| Graphic |Не поддерживается. Примените явное приведение в исходный запрос. |
| Integer |Int32 |
| Interval Day |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Day To Hour |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Day To Minute |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Day To Second |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Hour |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Hour To Minute |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Hour To Second |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Minute |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Minute To Second |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Month |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Second |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Year |Не поддерживается. Примените явное приведение в исходный запрос. |
| Interval Year To Month |Не поддерживается. Примените явное приведение в исходный запрос. |
| Number |Double |
| Период (Date) |Не поддерживается. Примените явное приведение в исходный запрос. |
| Период (время) |Не поддерживается. Примените явное приведение в исходный запрос. |
| Период (времени с часовым поясом) |Не поддерживается. Примените явное приведение в исходный запрос. |
| Период (Timestamp) |Не поддерживается. Примените явное приведение в исходный запрос. |
| Период (метка времени с часовым поясом) |Не поддерживается. Примените явное приведение в исходный запрос. |
| SmallInt |Int16 |
| Time |TimeSpan |
| Time With Time Zone |TimeSpan |
| Timestamp |DateTime |
| Timestamp With Time Zone |DateTime |
| VarByte |Byte[] |
| VarChar |String |
| VarGraphic |Не поддерживается. Примените явное приведение в исходный запрос. |
| Xml |Не поддерживается. Примените явное приведение в исходный запрос. |


## <a name="next-steps"></a>Дальнейшие действия
В таблице [Поддерживаемые хранилища данных](copy-activity-overview.md#supported-data-stores-and-formats) приведен список хранилищ данных, которые поддерживаются в качестве источников и приемников для действия копирования в фабрике данных Azure.
