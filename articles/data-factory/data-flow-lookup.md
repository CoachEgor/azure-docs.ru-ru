---
title: Преобразование "Поиск потока данных" фабрики данных Azure
description: Преобразование "Поиск потока данных" фабрики данных Azure
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.date: 10/03/2019
ms.openlocfilehash: 25d8588f8e2c968dc2516938263aaa7d6ddcff13
ms.sourcegitcommit: bb65043d5e49b8af94bba0e96c36796987f5a2be
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/16/2019
ms.locfileid: "72387857"
---
# <a name="azure-data-factory-mapping-data-flow-lookup-transformation"></a>Преобразование "Поиск потока данных" фабрики данных Azure

Используйте "Поиск" для добавления эталонных данных из другого источника в ваш Поток данных. Преобразование поиска требует определенный источник, который указывает на вашу ссылочную таблицу и совпадает с полями ключа.

![Преобразование «Уточняющий запрос»](media/data-flow/lookup1.png "Поиск")

Выберите поля ключа, которые вы желаете соотнести с полями входящего потока, и поля с источника ссылки. Сначала необходимо создать новый источник на холсте разработки Потока данных, чтобы использовать в качестве средства для поиска.

Если совпадения найдены, итоговые строки и столбцы из источника ссылки будут добавляться к потоку данных. Вы можете выбрать интересующие вас поля, которые вы желаете включить в ваш приемник в конце потока данных. Кроме того, используйте преобразование SELECT, следующее за уточняющим запросом, чтобы очистить список полей, чтобы хранить только поля из обоих потоков, которые нужно хранить.

Преобразование «Уточняющий запрос» выполняет эквивалент левого внешнего объединения. Таким образом, вы увидите, что все строки из левого источника объединяются с совпадениями из правой части. Если в уточняющем запросе имеется несколько совпадающих значений или вы хотите настроить выражение уточняющего запроса, предпочтительнее переключиться на преобразование «соединение» и использовать перекрестное соединение. Это позволит избежать возможных ошибок декартного продукта при выполнении.

## <a name="match--no-match"></a>Совпадение без соответствия

После преобразования «Уточняющий запрос» можно использовать последующее преобразование для проверки результатов каждой строки соответствия с помощью функции выражения `isMatch()`, чтобы сделать выбор в логике в зависимости от того, привело ли поиск в соответствие к строке или нет.

## <a name="optimizations"></a>Оптимизация

В фабрике данных потоки данных выполняются в масштабных средах Spark. Если набор данных может уместиться в пространстве памяти рабочего узла, можно оптимизировать производительность поиска.

![Широковещательное соединение](media/data-flow/broadcast.png "Широковещательное соединение")

### <a name="broadcast-join"></a>Широковещательное соединение

Выберите левое и/или правое широковещательное соединение для запроса ADF, чтобы отправить весь набор данных с любой стороны связи поиска в память. Для наборов данных меньшего размера это может значительно повысить производительность поиска.

### <a name="data-partitioning"></a>Секционирование данных

Можно также указать секционирование данных, выбрав "задать секционирование" на вкладке "оптимизация" преобразования "Уточняющий запрос", чтобы создать наборы данных, которые лучше подходят для каждого рабочего процесса в памяти.

## <a name="next-steps"></a>Дальнейшие действия

Преобразования [Join](data-flow-join.md) и [Exists](data-flow-exists.md) выполняют аналогичные задачи в потоках данных сопоставления ADF. Далее рассмотрим эти преобразования.
