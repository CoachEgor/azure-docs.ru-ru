---
title: Выполнение пакетов SSIS агентом управляемых экземпляров Azure S'L
description: Узнайте, как выполнять пакеты SSIS от агента управляемых экземпляров Azure S'L.
services: data-factory
documentationcenter: ''
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.author: lle
author: lle
ms.date: 04/14/2020
ms.openlocfilehash: b3b7a25149a9d075c81b30307ade2beb71907637
ms.sourcegitcommit: d6e4eebf663df8adf8efe07deabdc3586616d1e4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2020
ms.locfileid: "81394726"
---
# <a name="execute-ssis-packages-by-azure-sql-managed-instance-agent"></a>Выполнение пакетов SSIS агентом управляемых экземпляров Azure S'L
В этой статье описывается, как запустить пакет служб интеграции серверов (SSIS) с помощью управляемого агента Azure S'L Instance. Эта функция обеспечивает аналогичное поведение так же, как при расписании пакетов SSIS агентом сервера S'L Server в вашей среде на prem.

С помощью этой функции можно запустить пакеты SSIS, которые хранятся в SSISDB управляемых экземпляров Azure S'L или файловой системе, таких как Azure Files.

## <a name="prerequisites"></a>Предварительные требования
Чтобы использовать эту функцию, скачать и установить последнюю версию SSMS, которая является версия 18.5 или позже. Скачайте его с [этого веб-сайта](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017).

И вам необходимо обеспечить время интеграции Azure-SSIS в Azure Data Factory, которая использует управляемый экземпляр Azure S'L в качестве сервера конечных точек. Если вы еще не присутсвили его уже, предоставление его, следуя инструкциям в [учебнике](tutorial-create-azure-ssis-runtime-portal.md). 

## <a name="run-ssis-packages-in-ssisdb-by-azure-sql-managed-instance-agent"></a>Запуск пакетов SSIS в SSISDB агентом по управлению экземплярами Azure S'L
На этом этапе используется управляемый агент azure S'L для вывески пакетов SSIS, хранящихся в SSISDB в Azure S'L Managed Instance.
1. В последней версии SSMS подключитесь к управляемому экземпляру Azure S'L.
2. Создайте новую работу агента и новый шаг работы.

![Новый агент Работа](./media/how-to-invoke-ssis-package-managed-instance-agent/new-agent-job.png)

3. На странице **«Новый шаг работы»** выберите тип **пакета интеграционных услуг серверов S'L.**

![Новый шаг работы SSIS](./media/how-to-invoke-ssis-package-managed-instance-agent/new-ssis-job-step.png)

4. Во вкладке **Пакет** выберите **каталог SSIS** в качестве типа исходного пакета.
5. Поскольку SSISDB находится в той же Azure S'L Managed Instance, вам не нужно указывать аутентификацию.
6. Укажите пакет SSIS из вашего SSISDB.

![Тип источника упаковки - Каталог SSIS](./media/how-to-invoke-ssis-package-managed-instance-agent/package-source-ssisdb.png)

7. Во вкладке **Конфигурации** можно указать значения **параметров,** переопределить значения в **менеджерах соединения,** переопределить **свойство** и выбрать **уровень регистрации.**

![Тип исходного кода пакета - Конфигурация каталога SSIS](./media/how-to-invoke-ssis-package-managed-instance-agent/package-source-ssisdb-configuration.png)

8. После того, как вы закончили все конфигурации выше, нажмите **OK,** чтобы сохранить конфигурацию Agent Job.
9. Запустите работу агента для выполнения пакета SSIS.


## <a name="run-ssis-packages-in-file-system-by-azure-sql-managed-instance-agent"></a>Запуск пакетов SSIS в файловой системе агентом с помощью экземпляра Azure S'L
На этом этапе используется управляемый агент azure S'L для выдвижения пакетов SSIS, которые хранятся в файловой системе для запуска.
1. В последней версии SSMS подключитесь к управляемому экземпляру Azure S'L.
2. Создайте новую работу агента и новый шаг работы.

   ![Новый агент Работа](./media/how-to-invoke-ssis-package-managed-instance-agent/new-agent-job.png)

3. На странице **«Новый шаг работы»** выберите тип **пакета интеграционных услуг серверов S'L.**

   ![Новый шаг работы SSIS](./media/how-to-invoke-ssis-package-managed-instance-agent/new-ssis-job-step.png)

4. Во вкладке **Пакет** выберите **систему файла** в качестве типа исходного пакета.

   ![Тип источника упаковки - Файловая система](./media/how-to-invoke-ssis-package-managed-instance-agent/package-source-file-system.png)

   1. Если ваш пакет загружен в файл Azure, выберите **раздел файла Azure** в качестве исходного типа файлов.
      - Путь пакета — это ** \\ <storage account name>имя раздела\<файла .file.core.windows.net>\<название пакета>.dtsx**
      - Введите имя учетной записи ИК Azure и ключ учетной записи в **учетных данных доступа к файлу Package** для доступа к файлу Azure. Домен установлен как **Azure.**
   2. Если ваш пакет загружен в общую сеть, выберите **общий объем сети** в качестве типа исходного файла.
      - Путь пакета — это **путь КООН** вашего файла пакета с расширением dtsx.
      - Введите соответствующий **домен,** **имя пользователя**и **пароль** для доступа к файлу пакета сетевого доступа.
   3. Если ваш файл пакета зашифрован паролем, выберите **пароль шифрования** и введите пароль.

 5. Во вкладке **Конфигурации** введите **путь файла конфигурации,** если для выполнения пакета SSIS требуется файл конфигурации.
 6. Во вкладке **параметры выполнения** можно выбрать, следует ли использовать **аутентификацию windows** или **32-разрядное время выполнения** для выполнения пакета SSIS.
 7. Во вкладке **"Запись"** можно выбрать **путь регистрации** и соответствующие учетные данные доступа к журналу для хранения файлов журнала. По умолчанию путь регистрации будет таким же, как и путь папки пакетов, а учетные данные доступа к журналу будут такими же, как и учетные данные доступа к пакету.
 8. Во вкладке **Значения набора** можно ввести в **"Путь свойства"** и **значение** для переопределения свойств пакета.
 Например, чтобы переопределить значение переменной пользователя, введите его путь в следующем формате: **«Package.Variables»User::<variable name> Значение**.
 9. После того, как вы закончили все конфигурации выше, нажмите **OK,** чтобы сохранить конфигурацию Agent Job.
 10. Запустите работу агента для выполнения пакета SSIS.


 ## <a name="cancel-ssis-package-execution"></a>Отмена выполнения пакета SSIS
 Чтобы отменить выполнение пакета из задания управляемого агента Azure S'L, следует выполнить ниже шаги, а не напрямую остановить задание агента.
 1. Найдите работу **jobId** агента s'Lна данный раз в **msdb.dbo.sysjobs.**
 2. Найти соответствующий **идентификатор SSIS** на основе идентификатора задания по нижеприведенному запросу:
    ```sql
    select * from ssisdb.internal.execution_parameter_values_noncatalog where  parameter_value = 'SQL_Agent_Job_{jobId}' order by execution_id desc
    ```
 3. Выберите **активные операции** в каталоге SSIS.

    ![Тип источника упаковки - Файловая система](./media/how-to-invoke-ssis-package-managed-instance-agent/catalog-active-operations.png)

 4. Остановить соответствующую операцию на основе **executionId**.

## <a name="next-steps"></a>Дальнейшие действия
 Вы также можете запланировать пакеты SSIS с помощью Azure Data Factory. Для пошаговых инструкций [см.](how-to-create-event-trigger.md) 