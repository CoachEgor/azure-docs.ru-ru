---
title: Ограничения для пулов узлов Windows Server в службе Kubernetes Azure (AKS)
description: Сведения об известных ограничениях при запуске пулов узлов и рабочих нагрузок приложений Windows Server в службе Kubernetes Azure (AKS)
services: container-service
author: mlearned
ms.service: container-service
ms.topic: article
ms.date: 05/31/2019
ms.author: mlearned
ms.openlocfilehash: 501aeb60eba1d94b4c5882a7c6cbfa8d0359e44d
ms.sourcegitcommit: 18061d0ea18ce2c2ac10652685323c6728fe8d5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69033914"
---
# <a name="current-limitations-for-windows-server-node-pools-and-application-workloads-in-azure-kubernetes-service-aks"></a>Текущие ограничения для пулов узлов Windows Server и рабочих нагрузок приложений в службе Kubernetes Azure (AKS)

В службе Azure Kubernetes Service (AKS) можно создать пул узлов, который будет работать под управлением Windows Server в качестве гостевой ОС на узлах. Эти узлы могут запускать собственные приложения контейнеров Windows, например созданные на .NET Framework. Так как в ОС Linux и Windows предусмотрены значительные отличия в области поддержки контейнеров, некоторые распространенные Kubernetes и компоненты, связанные с Pod, в настоящее время недоступны для пулов узлов Windows.

В этой статье описаны некоторые ограничения и основные понятия ОС для узлов Windows Server в AKS. Пулы узлов для Windows Server сейчас доступны в предварительной версии.

> [!IMPORTANT]
> Функции предварительной версии AKS — это самостоятельная служба. Предварительные версии предоставляются "как есть" и "как есть" и исключаются из соглашений об уровне обслуживания и ограниченной гарантии. Предварительные версии AKS частично покрываются службой поддержки клиентов на основе лучших усилий. Таким образом, эти функции не предназначены для использования в рабочей среде. Дополнительные сведения об отсутствии см. в следующих статьях поддержки:
>
> * [Политики поддержки AKS][aks-support-policies]
> * [Часто задаваемые вопросы о поддержке Azure][aks-faq]

## <a name="limitations-for-windows-server-in-kubernetes"></a>Ограничения для Windows Server в Kubernetes

Контейнеры Windows Server должны выполняться на узле контейнера под управлением Windows. Для запуска контейнеров Windows Server в AKS можно [создать пул узлов, который работает под управлением Windows Server][windows-node-cli] в качестве гостевой ОС. Поддержка пула узлов Window Server включает некоторые ограничения, которые входят в состав вышестоящего сервера Windows Server в Kubernetes проекте. Эти ограничения не относятся к AKS. Дополнительные сведения об этой вышестоящей поддержке Windows Server в Kubernetes см. в разделе [контейнеры Windows Server в ограничениях Kubernetes](https://docs.microsoft.com/azure/aks/windows-node-limitations).

Следующие исходящие ограничения для контейнеров Windows Server в Kubernetes важны для AKS:

- Контейнеры Windows Server могут использовать только Windows Server 2019, который соответствует базовой операционной системе узла Windows Server.
    - Образы контейнеров, созданные с помощью Windows Server 2016, как базовая ОС, не поддерживаются.
- Привилегированные контейнеры использовать нельзя.
- В контейнерах Windows Server недоступны функции, относящиеся к Linux, такие как RunAsUser, SELinux, AppArmor или POSIX.
    - Ограничения файловой системы, относящиеся к Linux, такие как УУИ/GUID, также недоступны в контейнерах Windows Server.
- Диски Azure и файлы Azure — это поддерживаемые типы томов, доступ к которым осуществляется в виде томов NTFS в контейнере Windows Server.
    - Хранилище или тома на основе NFS не поддерживаются.

## <a name="aks-limitations-for-windows-server-node-pools"></a>Ограничения AKS для пулов узлов Windows Server

Следующие дополнительные ограничения относятся к поддержке пула узлов Windows Server в AKS.

- Кластер AKS всегда содержит пул узлов Linux в качестве первого пула узлов. Этот пул узлов на основе Linux нельзя удалить, пока не будет удален сам кластер AKS.
- Кластеры AKS должны использовать модель сети Azure CNI (Advanced).
    - Кубенет (базовая) сеть не поддерживается. Нельзя создать кластер AKS, использующий кубенет. Дополнительные сведения о различиях в сетевых моделях см. в разделе [Основные понятия сети для приложений в AKS][azure-network-models].
    - Для использования модели сети Azure CNI требуется дополнительное планирование и рекомендации по управлению IP-адресами. Дополнительные сведения о планировании и реализации Azure CNI см. в статье [Настройка сети CNI для Azure в AKS][configure-azure-cni].
- Узлы Windows Server в AKS должны быть *обновлены* до последней версии Windows Server 2019 для поддержки последних исправлений и обновлений. Обновления Windows не включены в образе базового узла в AKS. По регулярному расписанию Центр обновления Windows цикла выпуска и собственного процесса проверки необходимо выполнить обновление пулов узлов Windows Server в кластере AKS. Дополнительные сведения об обновлении пула узлов Windows Server см. в статье [Обновление пула узлов в AKS][nodepool-upgrade].
    - Эти обновления узла Windows Server временно используют дополнительные IP-адреса в подсети виртуальной сети при развертывании нового узла перед удалением старого узла.
    - квоты виртуальных ЦП также временно используются в подписке при развертывании нового узла, после чего удаляется старый узел.
    - Вы не можете автоматически обновлять и управлять перезагрузками `kured` , используя в качестве узлов Linux в AKS.
- Кластер AKS может иметь не более восьми пулов узлов.
    - В восьми пулах узлов может быть не более 400 узлов.
- Длина имени пула узлов Windows Server ограничена 6 символами.
- Функции предварительной версии в AKS, такие как политика сети и Автомасштабирование кластера, не реализованы для узлов Windows Server.
- Контроллеры входящих данных следует планировать только на узлах Linux с помощью Нодеселектор.
- Azure Dev Spaces в настоящее время доступно только для пулов узлов на основе Linux.
- Поддержка групповых управляемых учетных записей служб (gMSA), если узлы Windows Server не присоединены к домену Active Directory в настоящее время недоступна в AKS.
    - Проект [AKS-Engine][aks-engine] с открытым кодом в настоящее время предоставляет поддержку gMSA, если вам нужно использовать эту функцию.

## <a name="os-concepts-that-are-different"></a>Основные понятия ОС, отличные от

Kubernetes является историческим, ориентированным на Linux. Многие примеры, используемые в вышестоящем веб-сайте [Kubernetes.IO][kubernetes] , предназначены для использования на узлах Linux. При создании развертываний, использующих контейнеры Windows Server, применяются следующие рекомендации на уровне операционной системы.

- **Удостоверение** . Linux использует UserID (UID) и GROUPID (GID), представленные в виде целочисленных типов. Имена пользователей и групп не являются каноническими, они являются просто псевдонимом в */ЕТК/граупс* или */etc/PASSWD* обратно в UID + GID.
    - Windows Server использует более крупный двоичный идентификатор безопасности (SID), который хранится в базе данных диспетчера доступа безопасности Windows (SAM). Эта база данных не является общей для узла и контейнеров, а также между контейнерами.
- **Разрешения для файлов** — Windows Server использует список управления доступом на основе идентификаторов безопасности, а не битовую маску разрешений и UID + GID.
- **Пути к файлам** — соглашение в Windows Server заключается в использовании \ вместо/.
    - В спецификациях Pod, в которых подключены тома, правильно укажите путь для контейнеров Windows Server. Например, вместо точки подключения */МНТ/Волуме* в контейнере Linux укажите букву диска и расположение, например */к/Волуме* , чтобы подключить как диск *K:* .

## <a name="next-steps"></a>Следующие шаги

Чтобы приступить к работе с контейнерами Windows Server в AKS, [Создайте пул узлов под управлением Windows Server в AKS][windows-node-cli].

<!-- LINKS - external -->
[upstream-limitations]: https://kubernetes.io/docs/setup/windows/#limitations
[kubernetes]: https://kubernetes.io
[aks-engine]: https://github.com/azure/aks-engine

<!-- LINKS - internal -->
[azure-network-models]: concepts-network.md#azure-virtual-networks
[configure-azure-cni]: configure-azure-cni.md
[nodepool-upgrade]: use-multiple-node-pools.md#upgrade-a-node-pool
[windows-node-cli]: windows-container-cli.md
[aks-support-policies]: support-policies.md
[aks-faq]: faq.md
[azure-outbound-traffic]: ../load-balancer/load-balancer-outbound-connections.md#defaultsnat
