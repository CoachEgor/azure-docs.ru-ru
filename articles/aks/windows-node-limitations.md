---
title: Ограничения для пулов узлов Windows Server в службе Azure Kubernetes (AKS)
description: Дополнительные сведения об известных ограничениях при выполнении пулы узлов Windows Server и рабочих нагрузок приложений в службе Azure Kubernetes (AKS)
services: container-service
author: tylermsft
ms.service: container-service
ms.topic: article
ms.date: 05/06/2019
ms.author: twhitney
ms.openlocfilehash: 34ece6e49332f781f688a8741db3514faf8c9a25
ms.sourcegitcommit: 009334a842d08b1c83ee183b5830092e067f4374
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66304399"
---
# <a name="current-limitations-for-windows-server-node-pools-and-application-workloads-in-azure-kubernetes-service-aks"></a>Текущие ограничения для пулов узлов Windows Server и рабочих нагрузок приложений в службе Azure Kubernetes (AKS)

В службе Kubernetes Azure (AKS), можно создать пул узлов под управлением Windows Server как гостевой ОС на узлах. Эти узлы можно запустить собственных приложений контейнера Windows, например, построенных на платформе .NET Framework. Так как имеются существенные различия в том, как ОС Windows и Linux предоставляет поддержку контейнеров, некоторые распространенные Kubernetes и функции, связанные с pod недоступны в настоящее время для пулы узлов Windows.

В этой статье приведены некоторые ограничения и основные понятия операционной системы для узлов Windows Server в AKS. Пулы узлов Windows Server в настоящее время доступны в предварительной версии.

> [!IMPORTANT]
> Функции предварительной версии AKS: самообслуживания, согласиться. Они предназначены для сбора отзывов и ошибки нашего сообщества. В предварительной версии эти функции не предназначены для использования в рабочей среде. Функции в общедоступной предварительной версии подпадают под поддержки «оптимальных затрат». Помощь от групп разработчиков AKS Техническая поддержка доступна во время рабочих часов тихоокеанского часового пояса (по тихоокеанскому времени) только. Дополнительные сведения обратитесь в следующие справочные статьи:
>
> * [Политики поддержки AKS][aks-support-policies]
> * [Часто задаваемые вопросы о поддержке Azure][aks-faq]

## <a name="limitations-for-windows-server-in-kubernetes"></a>Ограничения для Windows Server в Kubernetes

Контейнеры Windows Server необходимо запустить на узле контейнера на основе Windows. Чтобы запустить контейнеры Windows Server в AKS, вы можете [создать пул узлов под управлением Windows Server] [ windows-node-cli] как гостевой ОС. Поддержка пула узлов сервера окна включает некоторые ограничения, которые являются частью вышестоящего сервера Windows в проекте Kubernetes. Эти ограничения не относятся к AKS. Дополнительные сведения о этом вышестоящего поддержка для Windows Server в Kubernetes, см. в разделе [контейнеры Windows Server в Kubernetes ограничения][upstream-limitations].

Следующие ограничения вышестоящего для контейнеров Windows Server в Kubernetes относящиеся к AKS:

- Контейнеры Windows Server можно использовать только 2019 Windows Server, которая согласуется с базовой ОС узла Windows Server.
    - Образы контейнеров, созданные с помощью Windows Server 2016, так как базовой ОС не поддерживается.
- Не может использоваться привилегированным контейнеры.
- Функции специфичный для Linux, такие как RunAsUser, SELinux, AppArmor или POSIX возможности недоступны в контейнеры Windows Server.
    - Ограничений файловой системы на разрешения пользователя, специфичный для Linux например UUI/GUID, также доступны не в контейнерах Windows Server.
- Azure диски и Azure, поддерживаемые типы томов, доступ к нему тома NTFS в контейнере Windows Server.
    - Хранилище на основе NFS / тома не поддерживаются.

## <a name="aks-limitations-for-windows-server-node-pools"></a>AKS ограничения для пулов узлов Windows Server

Следующие дополнительные ограничения применяются к поддержка пула узлов Windows Server в AKS.

- Кластер службы контейнеров AZURE всегда содержит пул узлов Linux в качестве первого узла пула. Этот первый узел под управлением Linux пул нельзя удалить, пока удаляется сам кластер AKS.
- Кластерах AKS необходимо использовать (Дополнительно) сетевой модели Azure CNI.
    - Сети Kubenet (basic) не поддерживается. Не удается создать кластер AKS, использующий kubenet. Дополнительные сведения о различиях в моделях сетей см. в разделе [сети основные понятия для приложений в AKS][azure-network-models].
    - Модель сетевого Azure CNI требует дополнительного планирования и рекомендации по управлению IP-адресов. Дополнительные сведения о том, как следует планировать и внедрять Azure CNI см. в разделе [CNI Azure настройте сети в AKS][configure-azure-cni].
- Узлы Windows Server в AKS должны быть *обновлены* новый выпуск Windows Server 2019 для поддержания последних исправлений исправления и обновления. Обновления Windows не включены в образе базового узла в AKS. По регулярному расписанию вокруг цикла выпуска обновления Windows, а также процесс проверки следует выполнить обновление на пулы узлов Windows Server в кластере AKS. Дополнительные сведения об обновлении пул узлов Windows Server см. в разделе [обновить пуле узел в AKS][nodepool-upgrade].
    - Эти обновления узла Windows Server временно использовать дополнительные IP-адреса в подсети виртуальной сети, так как новый узел развернут, прежде чем удалить старый узел.
    - квоты виртуальных ЦП также временно потребляются в подписке, как развертывается новый узел, а затем удалить старый узел.
    - Нельзя автоматически обновлять и управлять ими с помощью перезагрузки `kured` как в случае с узлами Linux в AKS.
- Кластер AKS может иметь не более восьми пулов узлов.
    - В этих пулах восемь узел может иметь не более 400 узлов.
- Имя пула узла Windows Server имеет ограничение на число 6 символов.
- Предварительные версии компонентов в AKS, такие как политики сети и автомасштабирования кластера не одобрены для узлов Windows Server.
- Входящие контроллеры должно планироваться, только на узлах Linux, с помощью NodeSelector.
- Azure Dev пробелы в данный момент доступна только для пулов узлов под управлением Linux.
- Группе управляемых учетных записей служб (gMSA) поддержка на случай возникновения узлы Windows Server не присоединены к домену Active Directory недоступна в данный момент в AKS.
    - Открытым кодом, upstream [aks-engine] [ aks-engine] проект в настоящее время предоставляет поддержку групповой управляемой учетной записи, если вам нужно использовать эту функцию.

## <a name="os-concepts-that-are-different"></a>Основные понятия операционной системы, которые отличаются

Kubernetes — Исторически ориентированных на Linux. Многие примеры, которые используются в вышестоящего [сайте Kubernetes.io] [ kubernetes] веб-сайта предназначены для использования на узлах Linux. При создании развертываний, использующих контейнеры Windows Server, на уровне операционной системы применить следующее:

- **Удостоверение** -Linux использует идентификатор пользователя (UID) и groupID (GID), представленных как целочисленные типы. Имена пользователей и групп не каноническую — это просто псевдоним в */etc/группы* или */etc/passwd* к UID + GID.
    - Windows Server использует большего размера идентификатор двоичного безопасности (SID), который хранится в базе данных диспетчера доступа Windows безопасности (SAM). Эта база данных не является общей, между узлом и контейнеры, или между контейнерами.
- **Разрешения файловой** -Windows Server использует список управления доступом на основе идентификаторов безопасности, а не Битовая маска разрешений и UID + GID
- **Пути к файлам** -соглашение о вызовах для Windows Server является использование \ вместо /.
    - В спецификации pod, которые подключают тома укажите путь для контейнеров Windows Server. Например, вместо того, чтобы подключить точка *тома/mnt/* в контейнере Linux укажите букву диска и расположение например */K/тома* подключение в качестве *K:* диска.

## <a name="next-steps"></a>Дальнейшие действия

Чтобы приступить к работе с контейнерами Windows Server в AKS, [создать пул узлов под управлением Windows Server в AKS][windows-node-cli].

<!-- LINKS - external -->
[upstream-limitations]: https://kubernetes.io/docs/setup/windows/#limitations
[kubernetes]: https://kubernetes.io
[aks-engine]: https://github.com/azure/aks-engine

<!-- LINKS - internal -->
[azure-network-models]: concepts-network.md#azure-virtual-networks
[configure-azure-cni]: configure-azure-cni.md
[nodepool-upgrade]: use-multiple-node-pools.md#upgrade-a-node-pool
[windows-node-cli]: windows-container-cli.md
[aks-support-policies]: support-policies.md
[aks-faq]: faq.md
