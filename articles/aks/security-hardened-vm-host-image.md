---
title: Закаливание безопасности в хостах виртуальных машин AKS
description: Узнайте о закалке безопасности в оС-хосеakS VM
services: container-service
author: saudas
ms.topic: article
ms.date: 09/11/2019
ms.author: saudas
ms.custom: mvc
ms.openlocfilehash: d4105a9fba3c40c563198040afb811625727ead0
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77594386"
---
# <a name="security-hardening-in-aks-virtual-machine-hosts"></a>Закаливание безопасности в хостах виртуальных машин AKS 

Служба Azure Kubernetes (AKS) — это защищенная служба, соответствующая стандартам SOC, ISO, PCI DSS и HIPAA. Эта статья охватывает закаливание безопасности, применяемое к фактическим устройствам AKS. Более подробную информацию о безопасности AKS можно узнать [в службе безопасности Azure Kubernetes Service (AKS).](https://docs.microsoft.com/azure/aks/concepts-security)

Кластеры AKS развертываются на виртуальных машинах-хостах, которые работают с оптимизированной ОС. Эта хоста Os в настоящее время основана на изображении Ubuntu 16.04.LTS с набором дополнительных мер по укреплению безопасности (см. детали затвердевания безопасности).   

Цель закаленной хостовой оси безопасности заключается в уменьшении площади атаки и обеспечении безопасного развертывания контейнеров. 

> [!Important]
> Безопасность закаленные ОС НЕ СНГ бенчмаркинг. Несмотря на то, что существуют совпадения с контрольными показателями СНГ, цель состоит не в том, чтобы соответствовать требованиям СНГ. Цель затвердевания хоста ОС заключается в том, чтобы сходиться на уровне безопасности, соответствующем собственным внутренним стандартам безопасности хоста корпорации Майкрософт. 

## <a name="security-hardening-features"></a>Функции закаливания безопасности 

* AKS обеспечивает оптимизированную хост-оС по умолчанию. В настоящее время отсутствует возможность выбора альтернативной операционной системы. 

* Azure применяет ежедневные патчи (включая патчи безопасности) к узлам виртуальных машин AKS. Некоторые из этих патчей потребуют перезагрузки, в то время как другие не будут. Вы несете ответственность за планирование перезагрузки хостов AKS VM по мере необходимости. Для получения рекомендаций о том, [patching AKS nodes](https://docs.microsoft.com/azure/aks/node-updates-kured)как автоматизировать исправление AKS, см.

Ниже приводится краткое изложение работы по затвердеванию изображений, которая реализована в AKS-Engine для производства оптимизированной хостовой ОС, оптимизированной для безопасности. Работа была реализована [в этом проекте GitHub](https://github.com/Azure/aks-engine/projects/7).  

AKS-Engine в настоящее время не продвигает и не придерживается какого-либо конкретного стандарта безопасности, но иные икды аудита CIS (Center for Internet Security) предоставляются для удобства, где это применимо. 

## <a name="whats-configured"></a>Что настроено?

| Снг  | Описание аудита| 
|---|---|
| 1.1.1.1 |Убедитесь, что монтаж файлов cramfs отключен|
| 1.1.1.2 |Обеспечить отключение систем freevxfs|
| 1.1.1.3 |Обеспечить отключение систем jffs2|
| 1.1.1.4 |Обеспечить отключение систем HFS|
| 1.1.1.5 |Обеспечить отключение систем HFS Plus|
|1.4.3 |Обеспечить проверку подлинности, необходимой для единого режима пользователя |
|1.7.1.2 |Убедитесь, что локальное предупреждающее баннеро для входа настроено должным образом |
|1.7.1.3 |Убедитесь, что баннер удаленного предупреждения входа настроен правильно |
|1.7.1.5 |Обеспечить настройку разрешений на /etc/issue |
|1.7.1.6 |Обеспечить настройку разрешений на /etc/issue.net |
|2.1.5 |Убедитесь, что --потоковая связь-соединение-простоя тайм-аут не установлен на 0 |
|3.1.2 |Убедитесь, что отправка пакетов отключена |
|3.2.1 |Обеспечить непринимать исходные маршрутные пакеты |
|3.2.2 |Обеспечить непринимать перенаправления ICMP |
|3.2.3 |Обеспечить недопустимые безопасные перенаправления ICMP |
|3.2.4 |Обеспечение регистрации подозрительных пакетов |
|3.3.1 |Убедитесь, что реклама маршрутизатора IPv6 не принимается |
|3.5.1 |Обеспечить отключение DCCP |
|3.5.2 |Обеспечить отключение SCTP |
|3.5.3 |Обеспечить отключение RDS |
|3.5.4 |Убедитесь, что TIPC отключен |
|4.2.1.2 |Обеспечить настройку журналов |
|5.1.2 |Обеспечить настройку разрешений на /etc/crontab |
|5.2.4 |Обеспечить отключение переадресации SSH X11 |
|5.2.5 |Убедитесь, что SSH MaxAuthTries установлен на 4 или менее |
|5.2.8 |Убедитесь, что логин корня SSH отключен |
|5.2.10 |Убедитесь, что SSH PermitUserEnvironment отключена |
|5.2.11 |Обеспечить только утвержденные алгоритмы MAX используются |
|5.2.12 |Убедитесь, что SSH Время отсеивания Интервал настроен |
|5.2.13 |Убедитесь, что SSH LoginGraceTime настроен на одну минуту или меньше |
|5.2.15 |Убедитесь, что баннер предупреждения SSH настроен |
|5.3.1 |Обеспечить настройку требований к созданию паролей |
|5.4.1.1 |Убедитесь, что срок действия пароля составляет 90 дней или менее |
|5.4.1.4 |Убедитесь, что неактивный замок пароля составляет 30 дней или менее |
|5.4.4 |Убедитесь, что пользователь umask по умолчанию 027 или более ограничительный |
|5.6 |Обеспечить ограничендоступ к команде su|

## <a name="additional-notes"></a>Дополнительные замечания
 
* Для дальнейшего уменьшения площади поверхности атаки некоторые ненужные драйверы модуля ядра были отключены в ОС. 

* Закаленные ВС безопасности НЕ поддерживаются за пределами платформы AKS. 

## <a name="next-steps"></a>Дальнейшие действия  

Более подробную информацию о безопасности AKS можно узнать в следующих статьях: 

[Служба Лазурного Кубернета (AKS)](https://docs.microsoft.com/azure/aks/intro-kubernetes)

[Соображения безопасности AKS](https://docs.microsoft.com/azure/aks/concepts-security)

[Лучшие практики AKS](https://docs.microsoft.com/azure/aks/best-practices)
