---
title: Поддерживаемые версии Kubernetes в Службе Azure Kubernetes
description: Сведения о политике поддержки версии Kubernetes и жизненном цикле кластеров в Службе Azure Kubernetes (AKS).
services: container-service
author: sauryadas
ms.service: container-service
ms.topic: article
ms.date: 05/20/2019
ms.author: saudas
ms.openlocfilehash: bf86af16ce330be7119ecbeb24cedbcd31282735
ms.sourcegitcommit: 18061d0ea18ce2c2ac10652685323c6728fe8d5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69034041"
---
# <a name="supported-kubernetes-versions-in-azure-kubernetes-service-aks"></a>Поддерживаемые версии Kubernetes в Службе Azure Kubernetes (AKS)

Сообщество Kubernetes выпускает дополнительные версии примерно каждые три месяца. Эти выпуски содержат новые функции и улучшения. Исправления выпускаются чаще (иногда еженедельно) и предназначены только для устранения критических ошибок в дополнительной версии. Эти выпуски исправлений включают устранение уязвимостей безопасности или серьезных ошибок, влияющих на многих клиентов и большое количество продуктов, выполняющихся в рабочей среде на основе Kubernetes.

AKS нацелены на сертификацию и выпуск новых версий Kubernetes в течение 30 дней с вышестоящего выпуска, в зависимости от стабильности выпуска.

## <a name="kubernetes-versions"></a>Версии Kubernetes

Kubernetes использует стандартную схему управления версиями [семантического управления версиями](https://semver.org/) . Это означает, что каждая версия Kubernetes соответствует этой схеме нумерации:

```
[major].[minor].[patch]

Example:
  1.12.14
  1.12.15
  1.13.7
```

Каждое число в версии указывает на общую совместимость с предыдущей версией:

* Основные версии изменяются, когда несовместимые изменения API или обратная совместимость могут быть разорваны.
* Дополнительные версии изменяются при внесении изменений в функциональность, обратная совместимость с другими вспомогательными выпусками.
* Изменения версий исправления при исправлении ошибок, совместимых с обратной совместимостью.

Как правило, пользователи должны выполнить последнюю версию исправления дополнительной версии, например если ваш рабочий кластер находится в *1.13.6* , а *1.13.7* — последнюю доступную версию исправления, доступную для серии *1,13* . необходимо выполнить обновление до *1.13.7* , как только вы сможете гарантировать, что кластер полностью обновлен и поддерживается.

## <a name="kubernetes-version-support-policy"></a>Политика поддержки версии Kubernetes

AKS поддерживает четыре дополнительные версии Kubernetes:

* Текущая дополнительная версия, выпущенная в AKS (N)
* Три предыдущие дополнительные версии. Каждая поддерживаемая дополнительная версия также поддерживает два стабильных исправления.

Это называется "N-3" — (N (последний выпуск) — 3 (дополнительные версии)).

Например, если AKS вводит *1.13. x* в настоящее время, поддержка предоставляется для следующих версий:

Новая дополнительная версия    |    Список поддерживаемых версий
-----------------    |    ----------------------
1.13. x               |    1.12. a, 1.12. b, 1.11. a, 1.11. b, 1,10. a, 1,10. b

Где "x" и ". a" и ". b" являются репрезентативными версиями исправлений.

Дополнительные сведения о взаимодействии с изменениями и ожиданиями версий см. в разделе "связь" ниже.

При введении новой дополнительной версии не рекомендуется использовать и удалять самые старые дополнительные версии и исправления. Например, если текущий список поддерживаемых версий:

```
1.12.a
1.12.b
1.11.a
1.11.b
1.10.a
1.10.b
1.9.a
1.9.b
```

И AKS выпуски 1.13. x, это означает, что версии 1,9. x (все версии 1,9) будут удалены и не поддерживаются.

> [!NOTE]
> Обратите внимание, что если клиенты работают в неподдерживаемой версии Kubernetes, они получат запрос на обновление при запросе поддержки кластера. В кластерах с неподдерживаемыми выпусками Kubernetes не включены [политики поддержки AKS](https://docs.microsoft.com/azure/aks/support-policies).


В дополнение к дополнительным версиям AKS поддерживает два последних выпуска *исправлений** для данной дополнительной версии. Например, при наличии следующих поддерживаемых версий:

```
Current Supported Version List
------------------------------
1.12.1, 1.12.2, 1.11.4, 1.11.5
```

Если вышестоящий Kubernetes выпустил 1.12.3 и 1.11.6 и AKS выпускают эти версии исправлений, самые старые версии исправления являются устаревшими и удалены, а список поддерживаемых версий выглядит следующим образом:

```
New Supported Version List
----------------------
1.12.*2*, 1.12.*3*, 1.11.*5*, 1.11.*6*
```

> [!NOTE]
> Клиенты не должны закреплять создание кластера, CI или другие автоматические задания для конкретных выпусков исправлений. 

### <a name="communications"></a>Взаимодействие

* Для новых **вспомогательных** версий Kubernetes
  * Все пользователи получают уведомления о новой версии и о том, какая версия будет удалена.
  * При выпуске новой версии исправления самые старые исправления удаляются одновременно.
  * У клиентов **60 дней** с общедоступной даты уведомления для обновления до поддерживаемого дополнительного выпуска версии.
* Для новых версий **исправлений** Kubernetes
  * Все пользователи получают уведомления о выпуске новой версии исправления и обновлении до последней версии исправления.
  * У пользователей есть **30 дней** для обновления до более новой, поддерживаемой версии исправления. У пользователей есть **30 дней** для обновления до поддерживаемого выпуска исправлений до того, как будет удален самый старый.

AKS определяет "выпуск" как общедоступный, включенный во всех измерениях цели/качества обслуживания и доступных во всех регионах.

> [!NOTE]
> Клиенты получают уведомления о выпусках и нерекомендуемых версиях Kubernetes, если дополнительный номер версии является устаревшим или удаленные пользователи получают 60 дней для обновления до поддерживаемого выпуска. В случае выпусков исправлений клиенты получают 30 дней на обновление до поддерживаемого выпуска.

Уведомления отправляются через:

* [Заметки о выпуске AKS](https://aka.ms/aks/releasenotes)
* Уведомления портал Azure
* [Канал обновления Azure][azure-update-channel]

### <a name="policy-exceptions"></a>Исключения политики

AKS оставляет за собой право добавлять или удалять новые или существующие версии, которые были обнаружены, чтобы иметь один или несколько критически важных производственных ошибок или проблем безопасности без предварительного уведомления.

Определенные выпуски исправлений могут быть пропущены или ускорены в зависимости от серьезности ошибки или проблемы безопасности.

### <a name="azure-portal-and-cli-default-versions"></a>Версии портал Azure и CLI по умолчанию

При развертывании кластера AKS на портале или с Azure CLI кластер всегда устанавливается в виде N-1 дополнительного номера версии и последнего исправления. Например, если AKS поддерживает *1.13. x*, *1.12. a* + *1.12. b*, *1.11. a* + *1.11. b*, *1,10. a* + *1.10 b*, версия по умолчанию для новых кластеров — *1.12. b* .

AKS по умолчанию имеет значение N-1 (Minor. Латестпатч, пример 1.12. b), чтобы предоставить клиентам известную, стабильную и исправленную версию по умолчанию.

## <a name="list-currently-supported-versions"></a>Список поддерживаемых версий

Чтобы узнать, какие версии доступны в настоящее время для вашей подписки и региона, используйте команду [AZ AKS get-versions][az-aks-get-versions] . В следующем примере перечислены доступные версии Kubernetes для региона *EastUS*:

```azurecli-interactive
az aks get-versions --location eastus --output table
```

Выходные данные похожи на приведенный ниже пример, который показывает, что доступна самая последняя версия Kubernetes версии *1.13.5* :

```
KubernetesVersion    Upgrades
-------------------  ------------------------
1.14.5               None available
1.13.9               1.14.5
1.12.8               1.13.9
1.12.7               1.12.8, 1.13.9
1.11.10              1.12.7, 1.12.8
1.11.9               1.11.10, 1.12.7, 1.12.8
1.10.13              1.11.9, 1.11.10
1.10.12              1.10.13, 1.11.9, 1.11.10
```

## <a name="faq"></a>Часто задаваемые вопросы

**Что происходит, когда клиент обновляет кластер Kubernetes с неподдерживаемой дополнительной версией?**

Если вы используете версию *n-4* , вы выходите из поддержки и вам будет предложено выполнить обновление. Если обновление с версии n-4 до n-3 выполняется, теперь вы можете применить наши политики поддержки. Пример:

- Если поддерживаемыми версиями AKS являются *1.13. x*, *1.12. a* + *1.12. b*, *1.11. c* + *1.11 d*и *1,10. e* + *1,10 f* и вы используете *1,9. g* или *1,9. h*, вы вне службы поддержки.
- Если обновление с *1,9. g* или *1,9. h* до *1.10. e* или *1,10. f* выполняется, вы снова пойдете в наши политики поддержки.

Обновления до версий старше *n-4* не поддерживаются. В таких случаях мы рекомендуем клиентам создать новые кластеры AKS и повторно развернуть их рабочие нагрузки.

**Что означает "поддержка не поддерживается"**

"Вне поддержки" означает, что используемая версия находится вне списка поддерживаемых версий, и вам будет предложено обновить кластер до поддерживаемой версии при запросе поддержки. Кроме того, AKS не делает никакой среды выполнения или других гарантий для кластеров за пределами списка поддерживаемых версий.

**Что происходит, когда клиент выполняет масштабирование кластера Kubernetes с неподдерживаемой дополнительной версией?**

Свертывание и развертывание для дополнительных версий, не поддерживаемых AKS, выполняется без сбоев.

**Может ли клиент всегда использовать одну версию Kubernetes?**

Да. Однако если кластер не входит в одну из версий, поддерживаемых AKS, то кластер выходит за пределы политик поддержки AKS. Azure не обновляет и не удаляет ваш кластер автоматически.

**Какую версию поддерживает главный кластер, если кластер агента не использует ни одну из поддерживаемых версий AKS?**

Главный кластер автоматически обновляется до последней поддерживаемой версии.

## <a name="next-steps"></a>Следующие шаги

Сведения о том, как обновить кластер, см. в статье [Обновление кластера Azure Kubernetes Service (AKS)][aks-upgrade].

<!-- LINKS - External -->
[aks-engine]: https://github.com/Azure/aks-engine
[azure-update-channel]: https://azure.microsoft.com/updates/?product=kubernetes-service

<!-- LINKS - Internal -->
[aks-upgrade]: upgrade-cluster.md
[az-aks-get-versions]: /cli/azure/aks#az-aks-get-versions
