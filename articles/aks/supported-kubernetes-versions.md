---
title: Поддерживаемые версии Kubernetes в Службе Azure Kubernetes
description: Сведения о политике поддержки версии Kubernetes и жизненном цикле кластеров в Службе Azure Kubernetes (AKS).
services: container-service
author: sauryadas
ms.service: container-service
ms.topic: article
ms.date: 12/09/2019
ms.author: saudas
ms.openlocfilehash: bba4196547bda3d3ddcf3344032de5b9286639a0
ms.sourcegitcommit: d614a9fc1cc044ff8ba898297aad638858504efa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2019
ms.locfileid: "74996754"
---
# <a name="supported-kubernetes-versions-in-azure-kubernetes-service-aks"></a>Поддерживаемые версии Kubernetes в Службе Azure Kubernetes (AKS)

Сообщество Kubernetes выпускает дополнительные версии примерно каждые три месяца. Эти выпуски содержат новые функции и улучшения. Исправления выпускаются чаще (иногда еженедельно) и предназначены только для устранения критических ошибок в дополнительной версии. Эти выпуски исправлений включают устранение уязвимостей безопасности или серьезных ошибок, влияющих на многих клиентов и большое количество продуктов, выполняющихся в рабочей среде на основе Kubernetes.

AKS нацелены на сертификацию и выпуск новых версий Kubernetes в течение 30 дней с вышестоящего выпуска, в зависимости от стабильности выпуска.

## <a name="kubernetes-versions"></a>Версии Kubernetes

Kubernetes использует стандартную схему управления версиями [семантического управления версиями](https://semver.org/) . Это означает, что каждая версия Kubernetes соответствует этой схеме нумерации:

```
[major].[minor].[patch]

Example:
  1.12.14
  1.12.15
```

Каждое число в версии указывает на общую совместимость с предыдущей версией:

* Основные версии изменяются, когда несовместимые изменения API или обратная совместимость могут быть разорваны.
* Дополнительные версии изменяются при внесении изменений в функциональность, обратная совместимость с другими вспомогательными выпусками.
* Изменения версий исправления при исправлении ошибок, совместимых с обратной совместимостью.

Пользователи должны использовать последнюю версию исправления вспомогательной версии, например если ваш производственный кластер находится на *1.12.14* , а *1.12.15* — последнюю доступную версию исправления, доступную для ряда *1,12* , следует выполнить обновление до *1.12.15* , как только вы сможете гарантировать, что кластер полностью обновлен и поддерживается.

## <a name="kubernetes-version-support-policy"></a>Политика поддержки версии Kubernetes

AKS поддерживает три дополнительные версии Kubernetes:

* Текущая дополнительная версия, выпущенная в AKS (N)
* Две предыдущие промежуточные версии. Каждая поддерживаемая дополнительная версия также поддерживает два стабильных исправления.

Это называется "N-2": (N (последний выпуск) — 2 (дополнительные версии)).

Например, если в AKS появились *1,15 доллара.* сегодня, поддержка предоставляется для следующих версий:

Новая дополнительная версия    |    Список поддерживаемых версий
-----------------    |    ----------------------
1,15 доллара. a               |    1,15 доллара. a, 1,15 доллара. b, 1.14. c, 1.14. d, 1.13. e, 1.13. f

Где ". Letter" является репрезентативной версией исправления.

Дополнительные сведения о взаимодействии с изменениями и ожиданиями версий см. в разделе "связь" ниже.

При введении новой дополнительной версии не рекомендуется использовать и удалять самые старые дополнительные версии и исправления. Например, если текущий список поддерживаемых версий:

```
1.15.a
1.15.b
1.14.c
1.14.d
1.13.e
1.13.f
```

И AKS выпуски 1,16. *это означает, что 1,13.* версии (все версии 1,13) будут удалены и не смогут поддерживаться.

> [!NOTE]
> Обратите внимание, что если клиенты работают в неподдерживаемой версии Kubernetes, они получат запрос на обновление при запросе поддержки кластера. В кластерах с неподдерживаемыми выпусками Kubernetes не включены [политики поддержки AKS](https://docs.microsoft.com/azure/aks/support-policies).

В дополнение к дополнительным версиям AKS поддерживает два последних набора **исправлений** для данной дополнительной версии. Например, при наличии следующих поддерживаемых версий:

```
Current Supported Version List
------------------------------
1.15.2, 1.15.1, 1.14.5, 1.14.4
```

Если вышестоящий Kubernetes выпустил 1.15.3 и 1.14.6 и AKS выпускают эти версии исправлений, самые старые версии исправления являются устаревшими и удалены, а список поддерживаемых версий выглядит следующим образом:

```
New Supported Version List
----------------------
1.15.*3*, 1.15.*2*, 1.14.*6*, 1.14.*5*
```

### <a name="communications"></a>Связь

* Для новых **вспомогательных** версий Kubernetes
  * Все пользователи получают уведомления о новой версии и о том, какая версия будет удалена.
  * При выпуске новой версии исправления самые старые исправления удаляются одновременно.
  * У клиентов **60 дней** с общедоступной даты уведомления для обновления до поддерживаемого дополнительного выпуска версии.
* Для новых версий **исправлений** Kubernetes
  * Все пользователи получают уведомления о выпуске новой версии исправления и обновлении до последней версии исправления.
  * У пользователей есть **30 дней** для обновления до более новой, поддерживаемой версии исправления. У пользователей есть **30 дней** для обновления до поддерживаемого выпуска исправлений до того, как будет удален самый старый.

AKS определяет "выпущенную версию" как общедоступные версии, включенные во все измерения уровня обслуживания и качества обслуживания и доступные во всех регионах. AKS также может поддерживать предварительные версии, которые явно помечены и подчиняются условиям предварительной версии.

#### <a name="notification-channels-for-aks-changes"></a>Каналы уведомления для изменений AKS

AKS публикует регулярные обновления службы, в которых суммируются новые версии Kubernetes, изменения служб и обновления компонентов, выпущенные в службе на [GitHub](https://github.com/Azure/AKS/releases).

Эти изменения помещаются во все клиенты в рамках регулярного обслуживания, которое предлагается как часть управляемой службы, некоторые из них потребовали явных обновлений, а другие не нуждаются в каких-либо действиях.

Уведомления также отправляются через:

* [Заметки о выпуске AKS](https://aka.ms/aks/releasenotes)
* Уведомления на портале Azure
* [Канал обновления Azure][azure-update-channel]

### <a name="supported-versions-policy-exceptions"></a>Исключения политики поддерживаемых версий

AKS оставляет за собой право добавлять или удалять новые или существующие версии, которые были обнаружены, чтобы иметь один или несколько критически важных производственных ошибок или проблем безопасности без предварительного уведомления.

Определенные выпуски исправлений могут быть пропущены или ускорены в зависимости от серьезности ошибки или проблемы безопасности.

### <a name="azure-portal-and-cli-default-versions"></a>Версии портал Azure и CLI по умолчанию

При развертывании кластера AKS на портале или с Azure CLI кластер по умолчанию устанавливается в N-1 дополнительный номер версии и Последнее исправление. Например, если AKS поддерживает *1,15 доллара. a*, *1,15 доллара. b*, *1.14. c*, *1.14. d*, *1.13. e*и *1.13. f*, выбранная версия по умолчанию — *1.14. c*.

AKS выбирает значение по умолчанию N-1, чтобы предоставить клиентам известную, стабильную и исправленную версию по умолчанию.

## <a name="list-currently-supported-versions"></a>Список поддерживаемых версий

Чтобы узнать, какие версии доступны в настоящее время для вашей подписки и региона, используйте команду [AZ AKS get-versions][az-aks-get-versions] . В следующем примере перечислены доступные версии Kubernetes для региона *EastUS*:

```azurecli-interactive
az aks get-versions --location eastus --output table
```

## <a name="faq"></a>Вопросы и ответы

**Что происходит, когда клиент обновляет кластер Kubernetes с неподдерживаемой дополнительной версией?**

Если вы используете версию *n-3* , вы выходите из поддержки и вам будет предложено выполнить обновление. Если обновление с версии n-3 до n-2 прошло успешную работу, теперь вы используете наши политики поддержки. Пример.

- Если самая старая поддерживаемая версия AKS — *1.13.* а и вы используете *1.12. b* или более раннюю версию, вы не поддерживаете.
- Если обновление с *1.12. b* до *1.13. a* или более поздней версии выполнено, вы вернетесь в наши политики поддержки.

Обновления до версий, предшествующих поддерживаемому окну *N-2* , не поддерживаются. В таких случаях мы рекомендуем клиентам создавать новые кластеры AKS и повторно развертывать их рабочие нагрузки с помощью версий в окне Supported.

**Что означает "поддержка не поддерживается"**

"Вне поддержки" означает, что используемая версия находится вне списка поддерживаемых версий, и вам будет предложено обновить кластер до поддерживаемой версии при запросе поддержки. Кроме того, AKS не делает никакой среды выполнения или других гарантий для кластеров за пределами списка поддерживаемых версий.

**Что происходит, когда клиент выполняет масштабирование кластера Kubernetes с неподдерживаемой дополнительной версией?**

Для незначительных версий, которые не поддерживаются AKS, масштабирование по-прежнему должно работать, но настоятельно рекомендуется выполнить обновление, чтобы вернуть кластер в службу поддержки.

**Может ли клиент всегда использовать одну версию Kubernetes?**

Да. Однако если кластер не входит в одну из версий, поддерживаемых AKS, то кластер выходит за пределы политик поддержки AKS. Azure не обновляет и не удаляет ваш кластер автоматически.

**Какая версия поддерживает плоскость управления, если пул узлов не входит в одну из поддерживаемых версий AKS?**

Плоскость управления должна находиться в пределах окна версий из всех пулов узлов. Дополнительные сведения об обновлении плоскости управления или пулов узлов см. в документации по [обновлению пулов узлов](use-multiple-node-pools.md#upgrade-a-cluster-control-plane-with-multiple-node-pools).

## <a name="next-steps"></a>Дальнейшие действия

Сведения о том, как обновить кластер, см. в статье [Обновление кластера Azure Kubernetes Service (AKS)][aks-upgrade].

<!-- LINKS - External -->
[aks-engine]: https://github.com/Azure/aks-engine
[azure-update-channel]: https://azure.microsoft.com/updates/?product=kubernetes-service

<!-- LINKS - Internal -->
[aks-upgrade]: upgrade-cluster.md
[az-aks-get-versions]: /cli/azure/aks#az-aks-get-versions
