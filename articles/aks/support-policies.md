---
title: Политики поддержки службы Azure Kubernetes (AKS)
description: Узнайте о политиках поддержки службы поддержки Azure Kubernetes (AKS), общей ответственности и функциях, которые находятся в предварительном просмотре (или альфа или бета-версии).
services: container-service
author: jnoller
ms.topic: article
ms.date: 01/24/2020
ms.author: jenoller
ms.openlocfilehash: a5d90106a85a61cbf499c4c08130392b922a45f0
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77593586"
---
# <a name="support-policies-for-azure-kubernetes-service"></a>Политики поддержки службы Azure Kubernetes

В этой статье приводится подробная информация о политиках технической поддержки и ограничениях для службы Azure Kubernetes (AKS). В статье также подробно описано управление узлами рабочего места, управляемые компоненты плоскости управления, сторонние компоненты с открытым исходным кодом, а также управление безопасностью или исправлением.

## <a name="service-updates-and-releases"></a>Обновления и релизы служб

* Для получения информации о выпуске [см.](https://github.com/Azure/AKS/releases)
* Для получения информации о функциях в предварительном [просмотре](https://github.com/Azure/AKS/blob/master/previews.md)см.

## <a name="managed-features-in-aks"></a>Управляемые функции в AKS

Базовая инфраструктура как облачные компоненты службы (IaaS), такие как вычислительные или сетевые компоненты, дают пользователям доступ к низкоуровневым элементам управления и опций настройки. В отличие от этого, AKS обеспечивает развертывание под ключ Kubernetes, которое дает клиентам общий набор конфигураций и возможностей, которые им нужны. Клиенты AKS имеют ограниченные настройки, развертывание и другие опции. Этим клиентам не нужно беспокоиться о кластерах Kubernetes или управлять ими напрямую.

С AKS клиент получает полностью управляемый *самолет управления.* Самолет управления содержит все компоненты и услуги, необходимые клиенту для работы, и предоставляет кластеры Kubernetes конечным пользователям. Все компоненты Kubernetes поддерживаются и управляются корпорацией Майкрософт.

Корпорация Майкрософт управляет и контролирует следующие компоненты через панель управления:

* Серверы API Кубелет или Кубернете
* Etcd или совместимый магазин с ключевым значением, обеспечивающий качество обслуживания (ЗОС), масштабируемость и время выполнения
* Услуги DNS (например, kube-dns или CoreDNS)
* Kubernetes прокси или сетей

AKS не является полностью управляемым кластерным решением. Некоторые компоненты, такие как рабочие узлы, имеют *общую ответственность,* где пользователи должны помочь поддерживать кластер AKS. Пользовательский ввод требуется, например, для применения патча безопасности операционной системы (ОС) рабочего узла.

Службы *управляются* в том смысле, что Microsoft и команда AKS развертывают, работают и отвечают за доступность и функциональность службы. Клиенты не могут изменить эти управляемые компоненты. Корпорация Майкрософт ограничивает настройку для обеспечения согласованного и масштабируемого пользовательского интерфейса. Для полностью настраиваемого [AKS Engine](https://github.com/Azure/aks-engine)решения см.

> [!NOTE]
> Рабочие узлы AKS отображаются на портале Azure как обычные ресурсы Azure IaaS. Но эти виртуальные машины развернуты в пользовательскую группу\\ресурсов Azure (прикреплясь к MC). Можно изменить рабочие узлы AKS. Например, можно использовать Secure Shell (SSH) для изменения рабочих узлов AKS так, как вы изменяете обычные виртуальные машины (однако вы не можете изменить базовое изображение ОС, и изменения могут не сохраняться через обновление или перезагрузку), и вы можете прикрепить другие ресурсы Azure к AKS рабочие узлы. Но при внесении изменений *из управления полосой и настройки кластер* AKS может стать неподдерживаемым. Избегайте изменения узлов работы, если только корпорация Майкрософт не нанахит вас для внесения изменений.

Выдача неподдерживаемых операций в соответствии с определением выше, например вне диапазона расположения всех узлов агента, делает кластер неподдерживаемым. AKS оставляет за собой право архивировать самолеты управления, которые были настроены из руководящих принципов поддержки в течение длительных периодов, равных и за 30 дней. AKS поддерживает резервные копии кластерных метаданных и т.д. и может легко перераспределить кластер. Это перераспределение может быть инициировано любой операцией PUT, возвращают кластер в поддержку, например обновление или масштаб активных узлов агента.

## <a name="shared-responsibility"></a>Общая ответственность

При создании кластера клиент определяет рабочие узлы Kubernetes, создаваемые AKS. На этих узлах выполняются клиентские рабочие нагрузки. Клиенты владеют и могут просматривать или изменять рабочие узлы.

Так как клиентские узлы кластера выполняют частный код и хранят конфиденциальные данные, служба поддержки Майкрософт получает к ним лишь ограниченный доступ. Служба поддержки Майкрософт не может входить на узлы, выполнять команды или просматривать журналы на них без явного разрешения или содействия клиента.

Поскольку рабочие узлы чувствительны, корпорация Майкрософт проявляет большую осторожность, чтобы ограничить управление фоном. Во многих случаях рабочая нагрузка будет продолжать работать, даже если мастер-узлы Kubernetes и т.д., а также другие управляемые Корпорацией Майкрософт компоненты сбой. Небрежно модифицированные рабочие узлы могут привести к потере данных и рабочих нагрузок и сделать кластер неподдерживаемым.

## <a name="aks-support-coverage"></a>Охват поддержки AKS

Корпорация Майкрософт предоставляет техническую поддержку по следующим аспектам:

* Подключение ко всем компонентам Kubernetes, которые предоставляет и поддерживает служба Kubernetes, таким как сервер API.
* Управление, время простоя, ЗоС и операции служб управления самолетами Kubernetes (мастер-узлы Kubernetes, сервер API и т.д., и кубе-дны, например).
* Итд. Поддержка включает автоматизированное, прозрачное резервное копирование всех данных и т.д. каждые 30 минут для планирования стихийных бедствий и восстановления состояния кластера. Эти резервные копирования не доступны непосредственно для клиентов или пользователей. Они обеспечивают надежность и согласованность данных.
* Любые точки интеграции в драйвере облачного поставщика Azure для Kubernetes. К ним относятся интеграции в другие службы Azure, такие как балансеры нагрузки, постоянные объемы или сети (Kubernetes и Azure CNI).
* Вопросы или вопросы о настройке компонентов плоскости управления, таких как сервер API Kubernetes и т.д., и кубе-дны.
* Проблемы сетей, такие как Azure CNI, kubenet или другие проблемы доступа к сети и функциональности. Проблемы могут включать разрешение DNS, потерю пакетов, разгром и так далее. Корпорация Майкрософт поддерживает различные сетевые сценарии:
  * Kubenet (базовый) и передовые сети (Azure CNI) в кластере и связанных с ним компонентах
  * Подключение к другим службам и приложениям Azure
  * Настройки ingress и вход или настройки балансировщика нагрузки
  * Производительность и задержка сети

Корпорация Майкрософт не предоставляет техническую поддержку следующим причинам:

* Вопросы об использовании Kubernetes. Например, служба поддержки Майкрософт не предоставляет рекомендаций о том, как создавать пользовательские контроллеры входящего трафика, использовать рабочие нагрузки приложений или применять программные пакеты или средства сторонних разработчиков или с открытым кодом.
  > [!NOTE]
  > Корпорация Майкрософт может консультировать по функциональности кластера AKS, настройке и настройке (например, проблемы и процедуры операций Kubernetes).
* Сторонние проекты с открытым исходным кодом, которые не предоставляются в качестве части плоскости управления Kubernetes или развернуты с кластерами AKS. Эти проекты могут включать В число Истио, Хелм, Посланника или других.
  > [!NOTE]
  > Корпорация Майкрософт может оказывать наилучшую поддержку сторонним проектам с открытым исходным кодом, таким как Helm и Kured. В тех случаях, когда сторонний инструмент с открытым исходным кодом интегрируется с поставщиком облачных услуг Kubernetes Azure или другими ошибками, специфическими AKS, корпорация Майкрософт поддерживает примеры и приложения из документации Майкрософт.
* Программное обеспечение с закрытым исходным обеспечением. Это могут быть средства проверки безопасности, устройства или программное обеспечение для сетевого взаимодействия.
* Проблемы с системами, объединяющими несколько облаков и несколько поставщиков. Например, корпорация Майкрософт не поддерживает решение проблем с запуском федеративного решения на основе нескольких общедоступных облаков.
* Настройки сети, кроме тех, которые перечислены в [документации AKS.](https://docs.microsoft.com/azure/aks/)
  > [!NOTE]
  > Корпорация Майкрософт выполняет проблемы поддержки и ошибки, связанные с группами сетевой безопасности (НСГ). Например, microsoft Support может отвечать на вопросы о неспособности NSG обновить или неожиданное поведение NSG или балансирующего нагрузочика.

## <a name="aks-support-coverage-for-worker-nodes"></a>Покрытие поддержки AKS для рабочих узлов

### <a name="microsoft-responsibilities-for-aks-worker-nodes"></a>Обязанности корпорации Майкрософт для рабочих узлов AKS

Корпорация Майкрософт и клиенты несут общую ответственность за рабочие узлы Kubernetes, где:

* Базовое изображение ОС требует дополнений (таких как мониторинг и сетевые агенты).
* Рабочие узлы автоматически получают патчи ОС.
* Проблемы с компонентами плоскости управления Kubernetes, которые работают на рабочих узлах, автоматически усваиваются. Компоненты включают в себя следующее:
  * Кубе-прокси
  * Сетевые туннели, обеспечивающие пути связи с мастер-компонентами Kubernetes
  * Kubelet
  * Докер или Моби Демон

> [!NOTE]
> На рабочем узеле, если компонент плоскости управления не работает, команде AKS может потребоваться перезагрузить отдельные компоненты или весь рабочий узел. Эти операции перезагрузки автоматизированы и обеспечивают автоматическое исправление общих проблем. Эти перезагрузки происходят только на уровне _узла,_ а не кластера, если нет аварийного обслуживания или простоя.

### <a name="customer-responsibilities-for-aks-worker-nodes"></a>Обязанности клиентов для рабочих узлов AKS

Корпорация Майкрософт не автоматически перезагружает рабочие узлы для применения патчей уровня ОС. Хотя патчи ОС доставляются в рабочие узлы, *клиент* несет ответственность за перезагрузку узлов рабочего для применения изменений. Автоматически исправляются общие библиотеки, daemons, такие как твердотельный гибридный диск (SSHD) и другие компоненты на уровне системы или ОС.

Клиенты несут ответственность за выполнение обновлений Kubernetes. Они могут выполнять обновления через панель управления Azure или Azure CLI. Это относится к обновлениям, которые содержат улучшения безопасности или функциональности Kubernetes.

> [!NOTE]
> Поскольку AKS является *управляемой службой,* ее конечные цели включают снятие ответственности за патчи, обновления и сбор журналов, чтобы сделать управление службой более полным и руки-офф. По мере увеличения возможностей службы в области сквозного управления в будущих выпусках могут быть опущены некоторые функции (например, перезагрузка узлов и автоматическое исправление).

### <a name="security-issues-and-patching"></a>Проблемы с безопасностью и установка исправлений

Если недостаток безопасности обнаружен в одном или нескольких компонентах AKS, команда AKS исправит все затронутые кластеры, чтобы смягчить проблему. Возможно, группа поддержки предоставит пользователям инструкции по обновлению.

Для узлов работы, на которые влияет недостаток безопасности, если доступен патч с нулевым простоем, команда AKS применит этот патч и уведомит пользователей об изменении.

Когда патч безопасности требует перезагрузки узлов для работы, корпорация Майкрософт уведомляет клиентов об этом требовании. Клиент несет ответственность за перезагрузку или обновление, чтобы получить кластерный патч. Если пользователи не применяют патчи в соответствии с руководством AKS, их кластер будет по-прежнему уязвим для проблемы безопасности.

### <a name="node-maintenance-and-access"></a>Обслуживание узлов и доступ

Рабочие узлы являются общей ответственностью и принадлежат клиентам. Из-за этого клиенты имеют возможность войти в свои рабочие узлы и внести потенциально опасные изменения, такие как обновления ядра и установку или удаление пакетов.

Если клиенты вносят деструктивные изменения или приводят к тому, что компоненты плоскости управления перейдут в автономный режим или станут нефункциональными, AKS обнаружит этот сбой и автоматически восстановит рабочий узла в предыдущее рабочее состояние.

Хотя клиенты могут войти в систему и изменить рабочие узлы, делать это не рекомендуется, поскольку изменения могут сделать кластер неподдерживаемым.

## <a name="network-ports-access-and-nsgs"></a>Сетевые порты, доступ и НСК

Как управляемая служба, AKS имеет специфические требования к сети и подключению. Эти требования менее гибки, чем требования к обычным компонентам IaaS. В AKS такие операции, как настройка правил NSG, блокирование определенного порта (например, использование правил брандмауэра, блокирующих исходящий порт 443), и URL-адреса белого списка могут сделать ваш кластер неподдерживаемым.

> [!NOTE]
> В настоящее время AKS не позволяет полностью блокировать трафик из вашего кластера. Для управления списком URL-адресов и портов кластер может использоваться для исходящего [трафика,](limit-egress-traffic.md)см.

## <a name="unsupported-alpha-and-beta-kubernetes-features"></a>Неподдерживаемые функции альфа-и бета-версии Kubernetes

AKS поддерживает только стабильные функции в рамках проекта kubernetes. Если иное не задокументировано, AKS не поддерживает альфа- и бета-функции, которые доступны в проекте Kubernetes вверх по течению.

В двух сценариях альфа- или бета-функции могут быть развернуты до того, как они станут общедоступными:

* Клиенты встретились с продуктом AKS, поддержкой или инженерными группами, и им было предложено попробовать эти новые функции.
* Эти функции были [включены флагом функции.](https://github.com/Azure/AKS/blob/master/previews.md) Клиенты должны явно отказаться от использования этих функций.

## <a name="preview-features-or-feature-flags"></a>Предварительный просмотр функций или флагов

Для функций и функций, требующих расширенного тестирования и обратной связи с пользователями, корпорация Майкрософт выпускает новые функции предварительного просмотра или функции, стоящие за флагом функций. Такие функции можно рассматривать как предварительные или бета-версии.

Функции предварительной версии (с флагом компонента) не предназначены для рабочей среды. Текущие изменения в AIS и поведении, исправлениях ошибок и других изменениях могут привести к нестабильным кластерам и простоям.

Функции в общедоступном предварительном просмотре подпадают под поддержку «лучших усилий», поскольку эти функции находятся в предварительном просмотре и не предназначены для производства и поддерживаются группами технической поддержки AKS только в рабочее время. Для получения дополнительной информации, пожалуйста, см.:

* [Часто задаваемые вопросы о поддержке Azure](https://azure.microsoft.com/support/faq/)

> [!NOTE]
> Функции предварительного просмотра всменяемы на уровне *подписки* Azure. Не устанавливайте функции предварительного просмотра в производственной подписке. В производственной подписке функции предварительного просмотра могут изменить поведение API по умолчанию и повлиять на регулярные операции.

## <a name="upstream-bugs-and-issues"></a>Ошибки и проблемы вверх по течению

Учитывая скорость разработки в проекте kubernetes, ошибки неизменно возникают. Некоторые из этих ошибок не могут быть исправлены или обработаны в системе AKS. Вместо этого исправления ошибок требуют больших патчей для проектов вверх по течению (таких как Kubernetes, узлы или операционные системы работника и ядра). Для компонентов, которыми владеет корпорация Майкрософт (например, поставщик облачных услуг Azure), сотрудники AKS и Azure обязуются улаживать проблемы в сообществе.

Когда проблема технической поддержки вызвана одной или несколько ошибками вверх по течению, группы поддержки и проектирования AKS будут:

* Определите и свяжете ошибки вверх по течению с любыми вспомогательными деталями, чтобы объяснить, почему эта проблема влияет на кластер или рабочую нагрузку. Клиенты получают ссылки на требуемые репозитории, чтобы они могли наблюдать за проблемами и видеть, когда новый релиз будет предоставлять исправления.
* Предоставьте потенциальные обходные пути или смягчения последствий. Если проблема может быть устранена, [известная проблема](https://github.com/Azure/AKS/issues?q=is%3Aissue+is%3Aopen+label%3Aknown-issue) будет подана в репозиторий AKS. В подаче известного вопроса поясняется:
  * Проблема, включая ссылки на ошибки вверх по течению.
  * Обход и подробная информация об обновлении или другой настойчивости решения.
  * Грубые сроки включения вопроса, основанные на каденции выпуска выше по течению.
