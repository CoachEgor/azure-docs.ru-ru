---
title: Политики поддержки для службы Kubernetes Azure (AKS)
description: Узнайте о политиках поддержки Azure Kubernetes Service (AKS), общей ответственности и функциях, доступных в предварительной версии (или альфа-версии).
services: container-service
author: jnoller
ms.service: container-service
ms.topic: article
ms.date: 04/01/2019
ms.author: jenoller
ms.openlocfilehash: c018e511bbeed41bc9caf721562349a37ad0e748
ms.sourcegitcommit: c69c8c5c783db26c19e885f10b94d77ad625d8b4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "74707223"
---
# <a name="support-policies-for-azure-kubernetes-service"></a>Политики поддержки для службы Kubernetes Azure

В этой статье содержатся сведения о политиках технической поддержки и ограничениях для службы Azure Kubernetes (AKS). В статье также подробно описываются Управление рабочими узлами, компоненты плоскости управления, сторонние компоненты с открытым кодом, а также управление безопасностью или исправлениями.

## <a name="service-updates-and-releases"></a>Обновления и выпуски службы

* Сведения о выпуске см. в разделе [заметки о выпуске AKS](https://github.com/Azure/AKS/releases).
* Сведения о функциях в предварительной версии см. в разделе [функции предварительной версии AKS и связанные проекты](https://github.com/Azure/AKS/blob/master/previews.md).

## <a name="managed-features-in-aks"></a>Управляемые функции в AKS

Основные компоненты облачной инфраструктуры как услуги (IaaS), такие как компоненты вычислений или сети, предоставляют пользователям доступ к элементам управления низкого уровня и параметрам настройки. Напротив, AKS предоставляет готовое развертывание Kubernetes, которое предоставляет клиентам общий набор конфигураций и необходимых возможностей. У клиентов AKS есть ограниченная Настройка, развертывание и другие возможности. Этим клиентам не нужно беспокоиться о кластерах Kubernetes и управлять ими напрямую.

С помощью AKS клиент получает полностью управляемую *плоскость управления*. Плоскость управления содержит все компоненты и службы, необходимые клиенту для работы, и предоставляет Kubernetes кластеры для конечных пользователей. Все компоненты Kubernetes обслуживаются и обслуживаются корпорацией Майкрософт.

Корпорация Майкрософт управляет и отслеживает следующие компоненты с помощью панели управления:

* Серверы API Kubelet или Kubernetes
* Etcd или совместимое хранилище "ключ — значение", обеспечивающее качество обслуживания, масштабируемость и время выполнения
* Службы DNS (например, KUBE-DNS или Кореднс);
* Прокси-сервер Kubernetes или сеть

AKS не является полностью управляемым кластерным решением. Некоторые компоненты, например рабочие узлы, имеют *общую ответственность*, где пользователи должны помогать поддерживать кластер AKS. Ввод данных пользователем требуется, например, для применения исправления безопасности операционной системы рабочего узла (ОС).

*Управление* службами осуществляется в том смысле, что корпорация Майкрософт и группа AKS развертывают, работают и отвечают за доступность и функциональность службы. Клиенты не могут изменять эти управляемые компоненты. Корпорация Майкрософт ограничивает настройку, обеспечивая единообразное и масштабируемое взаимодействие с пользователем. Для полностью настраиваемого решения см. раздел [AKS Engine](https://github.com/Azure/aks-engine).

> [!NOTE]
> AKS рабочие узлы отображаются в портал Azure как обычные ресурсы Azure IaaS. Но эти виртуальные машины развертываются в настраиваемой группе ресурсов Azure (с префиксом MC\\*). Можно изменить рабочие узлы AKS. Например, можно использовать Secure Shell (SSH) для изменения рабочих узлов AKS способом изменения обычных виртуальных машин (вы не можете изменить базовый образ ОС, и изменения могут не сохраняться через обновление или перезагрузку). Кроме того, можно подключить другие ресурсы Azure к AKS. рабочие узлы. Но при внесении изменений с помощью *аппаратного контроллера управления и настройки* кластер AKS может стать неподдерживаемым. Старайтесь не изменять рабочие узлы, если только служба поддержки Майкрософт не направит вам никаких изменений.

## <a name="shared-responsibility"></a>Общая ответственность

При создании кластера клиент определяет рабочие узлы Kubernetes, создаваемые AKS. На этих узлах выполняются клиентские рабочие нагрузки. Пользователи владеют и могут просматривать или изменять рабочие узлы.

Так как клиентские узлы кластера выполняют частный код и хранят конфиденциальные данные, служба поддержки Майкрософт получает к ним лишь ограниченный доступ. Служба поддержки Майкрософт не может входить на узлы, выполнять команды или просматривать журналы на них без явного разрешения или содействия клиента.

Так как рабочие узлы являются конфиденциальными, корпорация Майкрософт принимает на себя значительные меры по ограничению их управления в фоновом режиме. Во многих случаях Рабочая нагрузка продолжит работать даже в случае сбоя главных узлов Kubernetes, etcd и других компонентов, управляемых корпорацией Майкрософт. Деликатность измененные рабочие узлы могут привести к потере данных и рабочих нагрузок, и они могут быть неподдерживаемыми для подготовки кластера.

## <a name="aks-support-coverage"></a>Покрытие AKS поддержки

Корпорация Майкрософт предоставляет техническую поддержку по следующим аспектам:

* Подключение ко всем компонентам Kubernetes, предоставляемым и поддерживаемым службой Kubernetes, таким как сервер API.
* Управление, время бесперебойной работы, качество обслуживания и операции служб Kubernetes Control плоскость (главные узлы Kubernetes, сервер API, etcd и KUBE-DNS).
* Etcd. Поддержка включает автоматизированные, прозрачные резервные копии всех etcd данных каждые 30 минут для аварийного планирования и восстановления состояния кластера. Эти резервные копии не доступны клиентам и пользователям напрямую. Они гарантируют надежность и согласованность данных.
* Любые точки интеграции в драйвере поставщика облачных служб Azure для Kubernetes. К ним относятся интеграции в другие службы Azure, такие как подсистемы балансировки нагрузки, постоянные тома или сети (Kubernetes и Azure CNI).
* Вопросы или проблемы, касающиеся настройки компонентов плоскости управления, таких как сервер API Kubernetes, etcd и KUBE-DNS.
* Проблемы с сетью, например Azure CNI, кубенет или другие проблемы доступа к сети и функциональности. Проблемы могут включать разрешение DNS, потери пакетов, маршрутизацию и т. д. Корпорация Майкрософт поддерживает различные сценарии работы в сети.
  * Кубенет (Basic) и Advanced Networking (Azure CNI) в кластере и связанных компонентах
  * Подключение к другим службам и приложениям Azure
  * Конфигурации входящих и исходящего трафика или конфигураций подсистемы балансировки нагрузки
  * Производительность и задержка сети

Корпорация Майкрософт не предоставляет техническую поддержку для следующих действий:

* Вопросы об использовании Kubernetes. Например, служба поддержки Майкрософт не предоставляет рекомендаций о том, как создавать пользовательские контроллеры входящего трафика, использовать рабочие нагрузки приложений или применять программные пакеты или средства сторонних разработчиков или с открытым кодом.
  > [!NOTE]
  > Служба поддержки Майкрософт могут рекомендовать функции, настройки и настройки кластера AKS (например, проблемы и процедуры Kubernetes).
* Сторонние проекты с открытым исходным кодом, не входящие в состав плоскости управления Kubernetes или развернутые с кластерами AKS. Эти проекты могут включать Istio, Helm, делегаты или другие.
  > [!NOTE]
  > Корпорация Майкрософт может предоставить лучшие решения для сторонних проектов с открытым кодом, таких как Helm и Куред. Если стороннее средство с открытым исходным кодом интегрируется с поставщиком облачных служб Kubernetes Azure или другими ошибками, связанными с AKS, корпорация Майкрософт поддерживает примеры и приложения из документации Майкрософт.
* Стороннее программное обеспечение с закрытым исходным кодом. Это могут быть средства проверки безопасности, устройства или программное обеспечение для сетевого взаимодействия.
* Проблемы с системами, объединяющими несколько облаков и несколько поставщиков. Например, корпорация Майкрософт не поддерживает решение проблем с запуском федеративного решения на основе нескольких общедоступных облаков.
* Настройки сети, отличные от перечисленных в документации по [AKS](https://docs.microsoft.com/azure/aks/).
  > [!NOTE]
  > Корпорация Майкрософт не поддерживает проблемы и ошибки, связанные с группами безопасности сети (группы безопасности сети). Например, служба поддержки Майкрософт может ответить на вопросы об ошибке NSG для обновления или непредвиденного поведения NSG или балансировщика нагрузки.

## <a name="aks-support-coverage-for-worker-nodes"></a>Покрытие AKS поддержки для рабочих узлов

### <a name="microsoft-responsibilities-for-aks-worker-nodes"></a>Обязанности Майкрософт для рабочих узлов AKS

Корпорация Майкрософт и клиенты используют ответственность за рабочие узлы Kubernetes, где:

* Основной образ ОС содержит необходимые дополнения (например, агенты мониторинга и работы с сетью).
* Рабочие узлы получают исправления для ОС автоматически.
* Проблемы с компонентами плоскости управления Kubernetes, которые выполняются на рабочих узлах, автоматически исправляются. К ним относятся следующие компоненты.
  * KUBE — прокси
  * Сетевые туннели, предоставляющие пути взаимодействия с главными компонентами Kubernetes
  * Kubelet
  * Управляющая программа DOCKER или значок Кита

> [!NOTE]
> Если компонент плоскости управления не работает в рабочем узле, команде AKS может потребоваться перезагрузка отдельных компонентов или всего рабочего узла. Эти операции перезагрузки автоматизированы и обеспечивают автоматическое исправление для распространенных проблем. Эти перезагрузки происходят только на уровне _узла_ , а не в кластере, если не существует аварийного обслуживания или сбоя.

### <a name="customer-responsibilities-for-aks-worker-nodes"></a>Обязанности клиента для рабочих узлов AKS

Корпорация Майкрософт не выполняет автоматическую перезагрузку рабочих узлов, чтобы применить исправления на уровне ОС. Хотя обновления ОС доставляются рабочим узлам, *клиент* несет ответственность за перезагрузку рабочих узлов, чтобы применить изменения. Общие библиотеки, управляющие программы, такие как гибридные диски с твердотельным состоянием (SSHD) и другие компоненты на уровне системы или ОС, обновляются автоматически.

Клиенты несут ответственность за выполнение обновлений Kubernetes. Они могут выполнять обновления с помощью панели управления Azure или Azure CLI. Это применимо к обновлениям, которые содержат улучшения безопасности или функциональности для Kubernetes.

> [!NOTE]
> Так как AKS является *управляемой службой*, ее конечные цели включают в себя удаление ответственности за исправления, обновления и сбор журналов, чтобы сделать управление службой более полным и практическим. По мере увеличения емкости службы для комплексного управления в будущих выпусках могут опускаться некоторые функции (например, перезагрузка узла и автоматическая установка исправлений).

### <a name="security-issues-and-patching"></a>Проблемы с безопасностью и установка исправлений

Если в одном или нескольких компонентах AKS обнаружен изъян в системе безопасности, Группа AKS отправит все затронутые кластеры, чтобы устранить эту неполадку. Возможно, группа поддержки предоставит пользователям инструкции по обновлению.

Для рабочих узлов, на которые влияет нарушение безопасности, если доступно исправление нулевого простоя, команда AKS применит это исправление и уведомит пользователей об изменении.

Если для исправления безопасности требуется перезагрузка рабочих узлов, корпорация Майкрософт будет уведомлять клиентов о данном требовании. Клиент несет ответственность за перезагрузку или обновление для получения исправления кластера. Если пользователи не применяют исправления в соответствии с рекомендациями AKS, их кластер будет по прежнему подвержен риску проблем безопасности.

### <a name="node-maintenance-and-access"></a>Обслуживание узла и доступ к нему

Рабочие узлы являются общими обязанностями и принадлежат клиентам. По этой причине клиенты могут входить на свои рабочие узлы и вносить потенциально опасные изменения, такие как обновление ядра и установку или удаление пакетов.

Если клиенты выполняют разрушительные изменения или приводят к тому, что компоненты плоскости управления переходят в автономный режим или становятся неработоспособными, AKS обнаружит этот сбой и автоматически восстановит рабочий узел до предыдущего рабочего состояния.

Хотя клиенты могут входить и изменять рабочие узлы, делать это не рекомендуется, так как изменения могут сделать кластер неподдерживаемым.

## <a name="network-ports-access-and-nsgs"></a>Сетевые порты, доступ и группы безопасности сети

Как управляемая служба, AKS имеет определенные требования к сети и подключению. Эти требования менее гибкие, чем требования для обычных компонентов IaaS. В AKS такие операции, как Настройка правил NSG, блокировка определенного порта (например, использование правил брандмауэра, блокирующих исходящий порт 443), а также URL-адреса список разрешений могут сделать кластер неподдерживаемым.

> [!NOTE]
> В настоящее время AKS не позволяет полностью блокировать исходящий трафик из кластера. Для управления списком URL-адресов и портов, которые кластер может использовать для исходящего трафика, см. раздел [ограничение трафика выхода](limit-egress-traffic.md).

## <a name="unsupported-alpha-and-beta-kubernetes-features"></a>Неподдерживаемые функции альфа и бета-Kubernetes

AKS поддерживает только стабильные функции в вышестоящем проекте Kubernetes. Если не указано иное, AKS не поддерживает альфа и бета-функции, доступные в вышестоящем проекте Kubernetes.

В двух сценариях компоненты альфа или бета могут быть сведены, прежде чем они будут общедоступны:

* Клиенты приступили к работе с AKS продуктом, поддержкой или инженерами отдела, и вам попросят ознакомиться с этими новыми функциями.
* Эти функции были [включены с помощью флага функции](https://github.com/Azure/AKS/blob/master/previews.md). Клиенты должны явно принять участие в использовании этих функций.

## <a name="preview-features-or-feature-flags"></a>Предварительные версии компонентов или флагов компонентов

Для функций и функций, требующих расширенного тестирования и отзывов пользователей, корпорация Майкрософт выпускает новые функции предварительной версии или функции, лежащие в основе флага компонента. Такие функции можно рассматривать как предварительные или бета-версии.

Функции предварительной версии (с флагом компонента) не предназначены для рабочей среды. Текущие изменения в API и поведении, исправления ошибок и другие изменения могут привести к нестабильной работе кластеров и простоев.

Функции в общедоступной предварительной версии попадают под поддержку "наилучших усилий", так как эти функции доступны в предварительной версии, а не предназначены для рабочей среды и поддерживаются группами технической поддержки AKS только в рабочее время. Дополнительные сведения см. в следующих статьях:

* [Часто задаваемые вопросы о поддержке Azure](https://azure.microsoft.com/support/faq/)

> [!NOTE]
> Функции предварительной версии вступают в силу на уровне *подписки* Azure. Не устанавливайте предварительные версии функций в рабочей подписке. В рабочей подписке функции предварительной версии могут изменить поведение API по умолчанию и повлиять на обычные операции.

## <a name="upstream-bugs-and-issues"></a>Вышестоящее устранение ошибок и проблем

Учитывая скорость разработки в вышестоящем проекте Kubernetes, возникают ошибки неизменно. Некоторые из этих ошибок невозможно исправить или обойти в системе AKS. Вместо этого исправления ошибок занимают более крупные исправления для вышестоящего проекта (например, Kubernetes, узел или рабочие операционные системы и ядра). Для компонентов, принадлежащих корпорации Майкрософт (например, поставщика облачных служб Azure), AKS и сотрудники Azure зафиксированы в устранении проблем, переходящих в сообщество.

Если возникла ошибка технической поддержки из-за одной или нескольких исходящих ошибок, группы поддержки и инженеров AKS будут:

* Выявление и связывание исходящих ошибок с любыми вспомогательными сведениями, которые помогут объяснить, почему эта проблема влияет на кластер или рабочую нагрузку. Клиенты получают ссылки на необходимые репозитории, чтобы они могли просмотреть проблемы и увидеть, когда в новом выпуске будут предоставляться исправления.
* Предоставить возможные обходные пути или способы их устранения. Если проблемы можно устранить, в репозитории AKS будет зарегистрирована [известная ошибка](https://github.com/Azure/AKS/issues?q=is%3Aissue+is%3Aopen+label%3Aknown-issue) . Описание известных проблем см. в этом разделе.
  * Эта ошибка, включая ссылки на вышестоящее ошибки.
  * Обходное решение и сведения об обновлении или другой сохраняемости решения.
  * Приблизительные временные шкалы для включения проблемы на основе вышестоящей ритмичности выпуска.
