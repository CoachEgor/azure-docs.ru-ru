---
title: Добавление или удаление сетевых интерфейсов на виртуальных машинах Azure
description: Узнайте, как добавлять и удалять сетевые интерфейсы виртуальных машин.
services: virtual-network
documentationcenter: na
author: KumudD
manager: mtillman
editor: ''
tags: azure-resource-manager
ms.assetid: ''
ms.service: virtual-network
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/15/2017
ms.author: kumud
ms.openlocfilehash: a55bf014a2da10069e4e6a5f6f4eb4b8cd9ff205
ms.sourcegitcommit: 8e31a82c6da2ee8dafa58ea58ca4a7dd3ceb6132
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/19/2019
ms.locfileid: "74196760"
---
# <a name="add-network-interfaces-to-or-remove-network-interfaces-from-virtual-machines"></a>Добавление и удаление сетевых интерфейсов виртуальных машин

Узнайте, как добавить имеющийся сетевой интерфейс при создании виртуальной машины Azure, а также как добавить или удалить сетевые интерфейсы имеющейся виртуальной машины, которая остановлена (освобождена). Сетевой интерфейс позволяет виртуальной машине Azure взаимодействовать с Интернетом, Azure и локальными ресурсами. У виртуальной машины может быть один или несколько сетевых интерфейсов. 

При необходимости см. инструкции по [добавлению, изменению и удалению IP-адресов для сетевого интерфейса Azure](virtual-network-network-interface-addresses.md). Чтобы создать, изменить или удалить сетевые интерфейсы, ознакомьтесь с [этой статьей](virtual-network-network-interface.md).

## <a name="before-you-begin"></a>Перед началом работы

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]

Перед выполнением действий, описанных в любом разделе этой статьи, выполните следующие задачи.

- Если у вас нет учетной записи Azure, зарегистрируйтесь для получения [бесплатной пробной учетной записи](https://azure.microsoft.com/free).
- При использовании портала перейдите по адресу https://portal.azure.com и войдите с использованием своей учетной записи Azure.
- При использовании команд PowerShell для работы с этой статьей выполняйте их в [Azure Cloud Shell](https://shell.azure.com/powershell) или в PowerShell на своем компьютере. Azure Cloud Shell — это бесплатная интерактивная оболочка, с помощью которой можно выполнять действия, описанные в этой статье. Она включает предварительно установленные общие инструменты Azure и настроена для использования с вашей учетной записью. Для работы с этим руководством требуется модуль Azure PowerShell версии 1.0.0 и выше. Выполните командлет `Get-Module -ListAvailable Az`, чтобы узнать установленную версию. Если вам необходимо выполнить обновление, ознакомьтесь со статьей, посвященной [установке модуля Azure PowerShell](/powershell/azure/install-az-ps). Если модуль PowerShell запущен локально, необходимо также выполнить командлет `Connect-AzAccount`, чтобы создать подключение к Azure.
- При использовании команд интерфейса командной строки Azure (CLI) для работы с этой статьей выполняйте их в [Azure Cloud Shell](https://shell.azure.com/bash) или в интерфейсе командной строки на своем компьютере. Для этого руководства требуется Azure CLI версии не ниже 2.0.26. Выполните командлет `az --version`, чтобы узнать установленную версию. Если вам необходимо выполнить установку или обновление, см. статью [Установка Azure CLI 2.0](/cli/azure/install-azure-cli). Если Azure CLI запущен локально, необходимо также выполнить командлет `az login`, чтобы создать подключение к Azure.

## <a name="add-existing-network-interfaces-to-a-new-vm"></a>Добавление имеющихся сетевых интерфейсов к новой виртуальной машине

При создании виртуальной машины с помощью портала автоматически создается сетевой интерфейс с параметрами по умолчанию, который подключается к виртуальной машине. На портале Azure невозможно добавить имеющиеся сетевые интерфейсы в новую виртуальную машину или создать виртуальную машину с несколькими сетевыми интерфейсами. Это можно сделать с помощью интерфейса командной строки или PowerShell, но обязательно ознакомьтесь с [ограничениями](#constraints). При создании виртуальной машины с несколькими сетевыми интерфейсами, необходимо также настроить ОС, чтобы использовать их соответствующим образом. Дополнительные сведения см. в статьях о настройке виртуальных машин [Windows](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-guest-os-for-multiple-nics) или [Linux](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-guest-os-for-multiple-nics).

### <a name="commands"></a>Команды

Перед созданием виртуальной машины создайте сетевой интерфейс, выполнив шаги, описанные в разделе [Создание сетевого интерфейса](virtual-network-network-interface.md#create-a-network-interface).

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az vm create](/cli/azure/vm?toc=%2fazure%2fvirtual-network%2ftoc.json)|
|PowerShell|[New-AzVM](/powershell/module/az.compute/new-azvm?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="vm-add-nic"></a>Добавление сетевого интерфейса к имеющейся виртуальной машине

1. Войдите на портал Azure.
2. В поле поиска в верхней части портала введите имя виртуальной машины, к которой необходимо добавить сетевой интерфейс, или найдите виртуальную машину, выбрав **Все службы**, а затем **Виртуальные машины**. Выберите найденную виртуальную машину. Она должна поддерживать количество сетевых интерфейсов, которое вы хотите добавить. Сведения о поддерживаемом количестве сетевых интерфейсов для каждого размера виртуальной машины см. в статье [Sizes for Linux virtual machines in Azure](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Размеры виртуальных машин Linux в Azure) или [Sizes for Windows virtual machines in Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Размеры виртуальных машин Windows в Azure).  
3. В разделе **Параметры** выберите **Обзор**. Выберите **Остановить** и подождите, пока **состояние** виртуальной машины изменится на **Остановлено (освобождено)** .
4. В разделе **Параметры** выберите **Сеть**.
5. Выберите **Подключить сетевой интерфейс**. Выберите необходимый сетевой интерфейс из списка интерфейсов, которые сейчас не подключены к виртуальной машине.

   >[!NOTE]
   >Для выбранного сетевого интерфейса нельзя включить ускоренную сеть и назначить IPv6-адрес. Кроме того, он должен находиться в той же виртуальной сети, что и сетевой интерфейс, подключенный к виртуальной машине.

   Если у вас нет сетевого интерфейса, сначала создайте его. Для этого выберите **Создать сетевой интерфейс**. Дополнительные сведения см. в разделе [Создание сетевого интерфейса](virtual-network-network-interface.md#create-a-network-interface). Сведения о дополнительных ограничениях при добавлении сетевых интерфейсов к виртуальным машинам см. в разделе [Ограничения](#constraints).

6. Нажмите кнопку **ОК**.
7. Выберите **Обзор** в разделе **Параметры**, а затем нажмите кнопку **Запустить**, чтобы запустить виртуальную машину.
8. Настройте ОС виртуальной машины для использования нескольких сетевых интерфейсов. Дополнительные сведения см. в статьях о настройке виртуальных машин [Windows](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-guest-os-for-multiple-nics) или [Linux](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-guest-os-for-multiple-nics).

### <a name="commands"></a>Команды
|Средство|Команда|
|---|---|
|Интерфейс командной строки|az vm nic add — см. [раздел руководства](/cli/azure/vm/nic?toc=%2fazure%2fvirtual-network%2ftoc.json) или [подробные инструкции](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#add-a-nic-to-a-vm)|
|PowerShell|[Add-азвмнетворкинтерфаце](/powershell/module/az.compute/add-azvmnetworkinterface?toc=%2fazure%2fvirtual-network%2ftoc.json) (ссылка) или [подробные инструкции](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#add-a-nic-to-an-existing-vm)|

## <a name="view-network-interfaces-for-a-vm"></a>Просмотр сетевых интерфейсов для виртуальной машины

Вы можете просмотреть сетевые интерфейсы, подключенные к виртуальной машине, чтобы изучить конфигурацию каждого из них, а также назначенные им IP-адреса. 

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены роли "Владелец", "Участник" или "Участник сети" для подписки. Дополнительные сведения о назначении ролей учетным записям см. в разделе [Участник сети](../role-based-access-control/built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом **Поиск ресурсов** введите **виртуальные машины**. Когда **виртуальные машины** появятся в результатах поиска, выберите их.
3. Выберите имя виртуальной машины, для которой вы хотите просмотреть сетевые интерфейсы.
4. Для выбранной виртуальной машины выберите **Сеть** в разделе **Параметры**. Дополнительную информацию о параметрах сетевого интерфейса и сведения об их изменении см. в статье [Создание, изменение или удаление сетевых интерфейсов](virtual-network-network-interface.md). Сведения о добавлении, изменении и удалении IP-адресов для сетевых интерфейсов Azure см. в [этой статье](virtual-network-network-interface-addresses.md).

### <a name="commands"></a>Команды

|Средство|Команда|
|---|---|
|Интерфейс командной строки|[az vm show](/cli/azure/vm?toc=%2fazure%2fvirtual-network%2ftoc.json)|
|PowerShell|[Get-AzVM](/powershell/module/az.compute/get-azvm?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="remove-a-network-interface-from-a-vm"></a>Удаление сетевого интерфейса из виртуальной машины

1. Войдите на портал Azure.
2. В поле поиска в верхней части портала введите имя виртуальной машины, из которой необходимо удалить сетевой интерфейс, или найдите виртуальную машину, выбрав **Все службы**, а затем **Виртуальные машины**. Выберите найденную виртуальную машину.
3. В разделе **Параметры** выберите **Обзор**, а затем нажмите кнопку **Остановить**. Подождите, пока **состояние** виртуальной машины не изменится на **Остановлено (освобождено)** .
4. В разделе **Параметры** выберите **Сеть**.
5. Выберите **Отключить сетевой интерфейс**. Из списка сетевых интерфейсов, подключенных к виртуальной машине, выберите сетевой интерфейс, который вы хотите отключить.

   >[!NOTE]
   >Если в списке указан только один сетевой интерфейс, его нельзя отключить, так как к виртуальной машине всегда должен быть подключен по крайней мере один сетевой интерфейс.
6. Нажмите кнопку **ОК**.

### <a name="commands"></a>Команды

|Средство|Команда|
|---|---|
|Интерфейс командной строки|az vm nic remove — см. [раздел руководства](/cli/azure/vm/nic?toc=%2fazure%2fvirtual-network%2ftoc.json) или [подробные инструкции](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#remove-a-nic-from-a-vm)|
|PowerShell|[Remove-азвмнетворкинтерфаце](/powershell/module/az.compute/remove-azvmnetworkinterface?toc=%2fazure%2fvirtual-network%2ftoc.json) (Reference) или [подробные инструкции](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#remove-a-nic-from-an-existing-vm)|

## <a name="constraints"></a>Ограничения

- К виртуальной машине должен быть подключен по крайней мере один сетевой интерфейс.
- К виртуальной машине можно подключить столько сетевых интерфейсов, сколько поддерживает ее размер. Сведения о поддерживаемом количестве сетевых интерфейсов для каждого размера виртуальной машины см. в статье [Sizes for Linux virtual machines in Azure](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Размеры виртуальных машин Linux в Azure) или [Sizes for Windows virtual machines in Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Размеры виртуальных машин Windows в Azure). Все размеры поддерживают как минимум два сетевых интерфейса.
- Сейчас сетевые интерфейсы, добавляемые в виртуальную машину, невозможно подключить к другой виртуальной машине. Дополнительные сведения о создании сетевого интерфейса см. в [этом разделе](virtual-network-network-interface.md#create-a-network-interface).
- В прошлом сетевые интерфейсы можно было добавлять только к виртуальным машинам, которые поддерживали несколько сетевых интерфейсов и были созданы с по крайней мере двумя сетевыми интерфейсами. Сетевой интерфейс невозможно было добавить к виртуальной машине, которая была создана с одним сетевым интерфейсом, даже если размер виртуальной машины поддерживал несколько сетевых интерфейсов. И наоборот, сетевые интерфейсы можно было удалять только из виртуальной машины по крайней мере с тремя сетевыми интерфейсами, так как виртуальные машины, созданные по крайней мере с двумя сетевыми интерфейсами, всегда должны были иметь по крайней мере два сетевых интерфейса. Ни одно из этих ограничений больше не действует. Теперь вы можете создать виртуальную машину с любым количеством сетевых интерфейсов (в пределах количества, поддерживаемого размером виртуальной машины).
- По умолчанию первый сетевой интерфейс, подключенный к виртуальной машине, определяется в качестве *основного*. Все остальные сетевые интерфейсы в виртуальной машине считаются *дополнительными*.
- Не смотря на то, что вы можете выбрать сетевой интерфейс, на который нужно отправлять исходящий трафик, по умолчанию он отправляется с IP-адреса, назначенного основной IP-конфигурации основного сетевого интерфейса.
- В прошлом все виртуальные машины в одной группе доступности должны были иметь один или несколько сетевых интерфейсов. Теперь в одной группе доступности могут находиться виртуальные машины с любым количеством сетевых интерфейсов (в пределах количества, поддерживаемого размером виртуальной машины). Виртуальную машину можно добавить в группу доступности только при ее создании. Дополнительные сведения о группах доступности см. в разделе [Настройка нескольких виртуальных машин в группе доступности для обеспечения избыточности](../virtual-machines/windows/manage-availability.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-multiple-virtual-machines-in-an-availability-set-for-redundancy).
- Хотя сетевые интерфейсы, подключенные к одной виртуальной машине, можно подключить к разным подсетям в виртуальной сети, все они должны быть подключены к одной виртуальной сети.
- Вы можете добавить любой IP-адрес для любой IP-конфигурации любого основного или дополнительного сетевого интерфейса во внутренний Azure Load Balancer. Раньше во внутренний пул можно было добавить только основной IP-адрес для основного сетевого интерфейса. Дополнительные сведения об IP-адресах и IP-конфигурациях см. в статье [Добавление, изменение и удаление IP-адресов для сетевых интерфейсов Azure](virtual-network-network-interface-addresses.md).
- При удалении виртуальной машины подключенные к ней сетевые интерфейсы не удаляются. Если вы удалите виртуальную машину, сетевые интерфейсы отключатся от нее. Вы можете добавить эти сетевые интерфейсы в другие виртуальные машины или удалить их.
- Как и в случае с IPv6, вы не можете подключить сетевой интерфейс с включенной ускоренной сетью к виртуальной машине после ее создания. Кроме того, чтобы воспользоваться преимуществами ускоренной сети, вы должны выполнить шаги в ОС виртуальной машины. Дополнительные сведения об ускоренной сети и ограничениях см. в разделах об ускорении работы в сети для виртуальных машин [Windows](create-vm-accelerated-networking-powershell.md) или [Linux](create-vm-accelerated-networking-cli.md).

## <a name="next-steps"></a>Дополнительная информация
Чтобы создать виртуальную машину с несколькими сетевыми интерфейсами или IP-адресами, см. следующие статьи:

|Задача.|Средство|
|---|---|
|Создание виртуальной машины с несколькими сетевыми адаптерами|[Интерфейс командной строки](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [PowerShell](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
|Создание виртуальной машины с одним сетевым адаптером, которому назначено несколько IPv4-адресов|[Интерфейс командной строки](virtual-network-multiple-ip-addresses-cli.md), [PowerShell](virtual-network-multiple-ip-addresses-powershell.md)|
|Создание виртуальной машины с одним сетевым адаптером, которому назначен частный IPv6-адрес (обслуживаемый Azure Load Balancer).|[Интерфейс командной строки](../load-balancer/load-balancer-ipv6-internet-cli.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [PowerShell](../load-balancer/load-balancer-ipv6-internet-ps.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [шаблон Azure Resource Manager](../load-balancer/load-balancer-ipv6-internet-template.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
