---
title: Расширение подсети в Azure Документы Майкрософт
description: Узнайте о расширении подсети в Azure.
services: virtual-network
documentationcenter: na
author: anupam-p
manager: narayan
editor: ''
tags: azure-resource-manager
ms.assetid: ''
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/31/2019
ms.author: anupand
ms.openlocfilehash: f718471c3f79e9a33b0e03b088f8c8d2ae0231d3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "73587515"
---
# <a name="subnet-extension"></a>Расширение подсети
Миграция рабочей нагрузки в общедоступное облако требует тщательного планирования и координации. Одним из ключевых соображений может быть возможность сохранить ваши IP-адреса. Что может быть важно, особенно если ваши приложения имеют зависимость от IP-адреса или у вас есть требования к соблюдению конкретных IP-адресов. Виртуальная сеть Azure решает эту проблему, позволяя создавать VNet и подсети с помощью диапазона IP-адресов по вашему выбору.

Миграция может стать немного сложной, когда вышеуказанное требование в сочетании с дополнительным требованием для сохранения некоторых приложений на месте. В такой ситуации, как и в случае, вам придется разделить приложения между Azure и на месте, не перенумеровав IP-адреса с обеих сторон. Кроме того, вы должны позволить приложениям общаться, как если бы они находятся в той же сети.

Одним из решений вышеупомянутой проблемы является расширение подсети. Расширение сети позволяет приложениям говорить по тому же домену вещания, когда они существуют в разных физических местах, устраняя необходимость переосвоить топологию сети. 

В то время как расширение сети не является хорошей практикой в целом, ниже случаев использования может сделать это необходимым.

- **Поэтапная миграция**: Наиболее распространенным сценарием является то, что требуется фаза миграции. Сначала необходимо перенести несколько приложений в Azure.
- **Задержка**: Требования к низкой задержке могут быть еще одной причиной для вас, чтобы сохранить некоторые приложения на месте, чтобы убедиться, что они как можно ближе к вашему центру обработки данных.
- **Соответствие**требованиям : Еще один случай использования заключается в том, что для сохранения некоторых приложений некоторые приложения могут быть требованиями.
 
> [!NOTE] 
> Вы не должны расширять свои подсети, если это необходимо. В тех случаях, когда вы расширяете ваши подсети, вы должны попытаться сделать это промежуточным шагом. Со временем следует попробовать переномера приложений в своей предварительной сети и перенести их в Azure.

В следующем разделе мы обсудим, как можно расширить свои подсети в Azure.


## <a name="extend-your-subnet-to-azure"></a>Продлите подсеть в Azure
 Вы можете расширить свои предприимченные подсети в Azure с помощью сетевого решения на основе накладки на слой-3. Большинство решений используют технологию наложения, такую как VXLAN, для расширения сети слоя-2 с помощью сети наложения слоя-3. На приведенной ниже диаграмме показано обобщеное решение. В этом решении одна и та же подсеть существует с обеих сторон, то есть, Azure и на территории. 

![Пример расширения подсети](./media/subnet-extension/subnet-extension.png)

IP-адреса из подсети присваиваются в ивги на Azure и на месте. Как Azure, так и в помещениях есть NVA, вставленный в свои сети. Когда VM в Azure пытается поговорить с VM в предварительной сети, Azure NVA захватывает пакет, инкапсулирует его и отправляет его по VPN Express Route в локальная сеть. На-предах NVA получает пакет, декапсулирует его и пересылает его получателю в своей сети. Обратный трафик использует аналогичный путь и логику.

В приведенном выше примере Azure NVA и nVA общаются и узнают об IP-адресах друг за другом. Более сложные сети могут также иметь картографический сервис, который поддерживает отображение между NVA и IP-адресами за ними. Когда NVA получает пакет, он запрашивает картографическая служба, чтобы узнать адрес NVA, который имеет IP-адрес назначения позади него.

В следующем разделе вы найдете подробную информацию о решениях для расширения подсети, которые мы протестировали на Azure.

## <a name="next-steps"></a>Дальнейшие действия 
[Расширьте подсеть в Azure с помощью решений поставщиков.](https://github.com/microsoft/Azure-LISP)