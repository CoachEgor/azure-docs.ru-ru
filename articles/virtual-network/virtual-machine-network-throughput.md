---
title: Пропускная способность сети для виртуальной машины Azure | Документация Майкрософт
description: Сведения о пропускной способности сети для виртуальной машины Azure.
services: virtual-network
documentationcenter: na
author: steveesp
editor: ''
tags: azure-resource-manager
ms.assetid: ''
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 4/26/2019
ms.author: kumud,steveesp, mareat
ms.openlocfilehash: 9d74e53c754367ecfa63642514db93354fcadf25
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "65153733"
---
# <a name="virtual-machine-network-bandwidth"></a>Пропускная способность сетевых ресурсов виртуальной машины

Azure предоставляет несколько разных типов и размеров виртуальных машин, каждый из которых имеет определенное сочетание характеристик производительности. Одной из таких характеристик производительности является пропускная способность сети, которая измеряется в мегабитах в секунду (Мбит/с). Поскольку виртуальные машины размещены на общем оборудовании, пропускная способность сети должна справедливо распределяться между виртуальными машинами на одном элементе оборудования. Крупным виртуальным машинам предоставляется больше пропускной способности, чем более мелким.
 
Пропускная способность сети, выделяемая каждой виртуальной машине, определяет скорость передачи данных от виртуальной машины (исходящий трафик). Ограничение распространяется на весь сетевой трафик, покидающий виртуальную машину, независимо от его назначения. Например, если для виртуальной машины установлено ограничение 1000 Мбит/с, эта квота расходуется на любой исходящий трафик — как к другой виртуальной машине в той же виртуальной сети, так и за пределы Azure.
 
Входящий трафик не измеряется и не ограничивается напрямую. Однако способность виртуальной машины обрабатывать входящие данные может быть ограничена другими факторами, такими как ограничения на использование ЦП и (или) хранилища.

Функция ускорения работы в сети позволяет повысить производительность сети по таким показателям, как задержки в сети, пропускная способность и использование ЦП. Любые улучшения производительности, которые предоставляет ускорение работы в сети, возможны только в пределах полосы пропускания, выделенной для виртуальной машины. Дополнительные сведения см. в разделах об ускорении работы в сети для виртуальных машин [Windows](create-vm-accelerated-networking-powershell.md) или [Linux](create-vm-accelerated-networking-cli.md).
 
К виртуальной машине Azure можно присоединить несколько сетевых интерфейсов, и по меньшей мере один должен присутствовать обязательно. Пропускная способность, выделенная для виртуальной машины, оценивается по сумме исходящего трафика на всех присоединенных к ней сетевых интерфейсах. Другими словами, пропускная способность выделяется на виртуальную машину в целом, независимо от количества присоединенных к ней сетевых интерфейсов. Чтобы узнать, сколько сетевых интерфейсов поддерживают виртуальные машины Azure разных размеров, изучите описание размеров виртуальных машин для [Windows](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [Linux](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json). 

## <a name="expected-network-throughput"></a>Ожидаемая пропускная способность сети

Ожидаемая пропускная способность сети и количество поддерживаемых сетевых интерфейсов для разных размеров виртуальных машин указаны в описаниях размеров для виртуальных машин [Windows](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [Linux](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json). Выберите интересующий вас тип, например "Общего назначения", а затем на соответствующей странице выберите серию размеров, например Dv2. Для каждой серии предоставлена таблица с характеристиками, в которой спецификации сети указаны в последнем столбце под названием **Максимальное число сетевых адаптеров и ожидаемая производительность сети (Мбит/с)** . 

Ограничение пропускной способности применяется ко всей виртуальной машине. Пропускная способность не зависит от следующих факторов.
- **Количество сетевых интерфейсов**: Ограничение пропускной способности является совокупным весь исходящий трафик из виртуальной машины.
- **Повышение производительности сети**: На то, что функция может быть максимально эффективно использовать заявленный предел, ограничение не затрагивает.
- **Назначение трафика**: Ограничения на исходящий учитываются все назначения.
- **Протокол**: Весь исходящий трафик по всем протоколам учитывается при подсчете ограничение.

## <a name="network-flow-limits"></a>Ограничения сети потока

В дополнение к пропускной способности количество сетевых подключения на виртуальной Машине в любой момент времени может повлиять на производительность сети. Azure сетевого стека поддерживает состояние для каждого направления подключения TCP/UDP в структуры данных, называемые «потоки». Обычного соединения TCP/UDP будет иметь 2 последовательности, созданные, один для входящего трафика, а другой для исходящего. 

Передача данных между конечными точками требует создания нескольких потоков, помимо тех, которые передачи данных. Примеры — последовательности, созданные для разрешения DNS и последовательности, созданные для пробы работоспособности подсистемы балансировки нагрузки. Также Обратите внимание, что сетевые виртуальные устройства (NVA), такие как шлюзы, прокси-серверы, брандмауэры, увидите потоки, создаваемой для подключений заканчивается на устройства и от устройства. 

![Число поток для сообщений TCP, через модуль пересылки](media/virtual-machine-network-throughput/flow-count-through-network-virtual-appliance.png)

## <a name="flow-limits-and-recommendations"></a>Поток, ограничения и рекомендации

В настоящее время Azure сетевого стека поддерживает 250 тыс. Общее потоки сетевого трафика с высокой производительностью для виртуальных машин с более чем 8 ядер ЦП и 100 k всего потоков с высокой производительностью для виртуальных машин с менее чем 8 ядер ЦП. За пределами этой сети ограничение производительность снижается корректно для дополнительных потоках до Фиксированный предел в 1 млн общее число потоков, 500 K входящего трафика и 500 КБ, Исходящие, после которого дополнительные потоки будут удалены.

||Виртуальные машины с < 8 ядер ЦП|Виртуальные машины с ядрами ЦП 8 +|
|---|---|---|
|<b>Высокая производительность</b>|Потоки 100 тысяч |Потоки 250 тыс.|
|<b>Низкая производительность</b>|Выше 100 тыс. потоки|Выше 250 тысяч потоки|
|<b>Предел потоками</b>|1 млн потоки|1 млн потоки|

Метрики доступны в [Azure Monitor](../azure-monitor/platform/metrics-supported.md#microsoftcomputevirtualmachines) для отслеживания числа потоков сети и скорость создания потока на экземпляры виртуальной Машины или масштабируемого набора виртуальных МАШИН.

![azure-monitor-flow-metrics.png](media/virtual-machine-network-throughput/azure-monitor-flow-metrics.png)

Тарифы установление и завершение подключения также может повлиять на производительность сети подключения установление или окончание общими папками для ЦП с помощью процедуры обработки пакетов. Рекомендуется, чтобы измерить рабочие нагрузки от ожидаемого трафика и горизонтальное масштабирование рабочих нагрузок соответствующим образом в соответствии с потребностями производительности. 

## <a name="next-steps"></a>Дальнейшие действия

- [Оптимизации пропускной способности сети для виртуальной машины Azure](virtual-network-optimize-network-bandwidth.md)
- [Проверка пропускной способности (NTTTCP)](virtual-network-bandwidth-testing.md) для виртуальной машины
