---
title: Премиум-план Функции Azure
description: Подробная информация и параметры конфигурации (VNet, отсутствие холодного старта, неограниченная продолжительность выполнения) для плана Azure Functions Premium.
author: jeffhollan
ms.topic: conceptual
ms.date: 10/16/2019
ms.author: jehollan
ms.openlocfilehash: dd7f6d0760f2b848435e7c77657e261517d29dd8
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79276911"
---
# <a name="azure-functions-premium-plan"></a>Премиум-план Функции Azure

Премиум-план Azure Functions Premium (иногда называемый планом Elastic Premium) является вариантом хостинга для функциональных приложений. Премиум план предоставляет такие функции, как подключение VNet, отсутствие холодного старта и оборудование премиум-класса.  Несколько функциональных приложений могут быть развернуты в одном и том же плане Premium, и план позволяет настроить размер экземпляра вычислений, размер базового плана и максимальный размер плана.  Для сравнения плана Premium и других типов плана [function scale and hosting options](functions-scale.md)и хостинга см.

## <a name="create-a-premium-plan"></a>Создание плана "Премиум"

[!INCLUDE [functions-premium-create](../../includes/functions-premium-create.md)]

Вы также можете создать план Premium, используя [план az functionapp,](/cli/azure/functionapp/plan#az-functionapp-plan-create) создаваемый в Azure CLI. Следующий пример создает план _уровня Elastic Premium 1:_

```azurecli-interactive
az functionapp plan create --resource-group <RESOURCE_GROUP> --name <PLAN_NAME> \
--location <REGION> --sku EP1
```

В этом примере замените `<RESOURCE_GROUP>` `<PLAN_NAME>` группу ресурсов и имя для плана, которое является уникальным в группе ресурсов. Укажите [ `<REGION>`поддерживаемое ](https://azure.microsoft.com/global-infrastructure/services/?products=functions). Чтобы создать премиум-план, который `--is-linux` поддерживает Linux, включите опцию.

С помощью созданного плана можно создать [функционера az](/cli/azure/functionapp#az-functionapp-create) для создания приложения функции. На портале одновременно создаются как план, так и приложение. Например, полный скрипт Azure CLI [см. Создать функциональное приложение в плане Premium.](scripts/functions-cli-create-premium-plan.md)

## <a name="features"></a>Компоненты

Следующие функции доступны для функции приложений, развернутых в плане Premium.

### <a name="pre-warmed-instances"></a>Предварительно разогретые экземпляры

Если сегодня в плане потребления не происходит событий и выполнения, приложение может масштабироваться до нуля экземпляров. При появлении новых событий необходимо специализироваться на новом экземпляре, и приложение работает на нем.  Специализация новых экземпляров может занять некоторое время в зависимости от приложения.  Эта дополнительная задержка при первом вызове часто называется холодным запуском приложения.

В плане Premium вы можете предварительно подогреть приложение на определенном количестве экземпляров, вплоть до минимального размера плана.  Предварительно разогретые экземпляры также позволяют предварительно масштабировать приложение перед высокой нагрузкой. По мере того как app маштабирует вне, оно сперва маштабирует в pre-warmed экземпляры. Дополнительные экземпляры продолжают буферизировать и нагреваться немедленно в рамках подготовки к следующей операции масштаба. Имея буфер предварительно разогретых экземпляров, вы можете эффективно избежать холодного начала latencies.  Предварительно разогретые экземпляры — это особенность плана Premium, и вам необходимо поддерживать по крайней мере один экземпляр в эксплуатации и всегда работать, и план работает.

Вы можете настроить количество предварительно разогретых экземпляров на портале Azure, выбрав приложение **функции,** перейдя на вкладку **«Функции платформы»** и выбрав параметры **Scale Out.** В окне отображения приложения предварительно разогретые экземпляры специфичны для этого приложения, но минимальные и максимальные экземпляры применяются ко всему плану.

![Настройки эластичной шкалы](./media/functions-premium-plan/scale-out.png)

Вы также можете настроить предварительно разогретые экземпляры для приложения с помощью Azure CLI.

```azurecli-interactive
az resource update -g <resource_group> -n <function_app_name>/config/web --set properties.preWarmedInstanceCount=<desired_prewarmed_count> --resource-type Microsoft.Web/sites
```

### <a name="private-network-connectivity"></a>Подключение к частной сети

Функции Azure, развернутые в плане Premium, используют [преимущества новой интеграции VNet для веб-приложений.](../app-service/web-sites-integrate-with-vnet.md)  При настройке приложение может общаться с ресурсами в VNet или защищены через конечные точки службы.  Ограничения IP также доступны в приложении для ограничения входящего трафика.

При назначении подсети в функциональное приложение в плане Premium необходима подсеть с достаточным количеством IP-адресов для каждого потенциального экземпляра. Нам требуется IP-блок с не менее чем 100 доступными адресами.

Для получения дополнительной [integrate your function app with a VNet](functions-create-vnet.md)информации см.

### <a name="rapid-elastic-scale"></a>Быстрая эластичная шкала

Дополнительные экземпляры вычислений автоматически добавляются для вашего приложения с использованием той же логики быстрого масштабирования, что и план потребления.  Чтобы узнать больше о том, как работает масштабирование, [см.](./functions-scale.md#how-the-consumption-and-premium-plans-work)

### <a name="longer-run-duration"></a>Более длительная продолжительность выполнения

Функции Azure в плане потребления ограничены 10 минутами для одного выполнения.  В плане Premium продолжительность выполнения по умолчанию составляет 30 минут, чтобы предотвратить выполнение сбегаемых. Тем не менее, вы можете [изменить конфигурацию host.json,](./functions-host-json.md#functiontimeout) чтобы сделать это неограниченное для приложений плана Premium (гарантировано 60 минут).

## <a name="plan-and-sku-settings"></a>Настройки плана и SKU

При создании плана вы настраиваете две настройки: минимальное количество экземпляров (или размер плана) и максимальный предел всплеска.  Минимальные экземпляры зарезервированы и всегда работают.

> [!IMPORTANT]
> С вас взимается плата за каждый экземпляр, выделенный в минимальном подсчете экземпляра, независимо от того, исполняются функции или нет.

Если вашему приложению требуются экземпляры сверх размера плана, оно может продолжать масштабироваться до тех пор, пока количество экземпляров не достигнет предела максимального всплеска.  Вы выставляете счет за экземпляры за пределами размера плана только в то время как они работают и сдаются в аренду для вас.  Мы приложим максимум усилий для масштабирования вашего приложения до определенного максимального предела, в то время как экземпляры минимального плана гарантированы для вашего приложения.

Вы можете настроить размер и максимумы плана на портале Azure, выбрав параметры **Scale Out** в плане или функциональное приложение, развернутое в этом плане (в **соответствии с функциями платформы).**

Можно также увеличить максимальный лимит всплеска от Azure CLI:

```azurecli-interactive
az resource update -g <resource_group> -n <premium_plan_name> --set properties.maximumElasticWorkerCount=<desired_max_burst> --resource-type Microsoft.Web/serverfarms 
```

### <a name="available-instance-skus"></a>Доступные экземпляры SKUs

При создании или масштабировании плана можно выбрать один из трех размеров экземпляра.  Вам будет выставлен счет за общее количество ядер и памяти, потребляемой в секунду.  Приложение может автоматически масштабироваться до нескольких экземпляров по мере необходимости.  

|номер SKU|Ядра|Память|Хранилище|
|--|--|--|--|
|EP1|1|3,5 ГБ|250gb|
|EP2|2|7 ГБ|250gb|
|EP3|4|14 ГБ|250gb|

### <a name="memory-utilization-considerations"></a>Соображения использования памяти
Запуск на машине с большей памятью не всегда означает, что ваше приложение функции будет использовать всю доступную память.

Например, приложение функции JavaScript ограничено ограничением памяти по умолчанию в Node.js. Чтобы увеличить этот фиксированный лимит `languageWorkers:node:arguments` памяти, `--max-old-space-size=<max memory in MB>`добавьте настройку приложения со значением.

## <a name="region-max-scale-out"></a>Регион Макс Масштаб из

Ниже приведены поддерживаемые в настоящее время максимальные значения масштабирования для одного плана в каждом регионе и конфигурации ОС. Чтобы запросить увеличение, пожалуйста, откройте билет поддержки.

Смотрите полную региональную доступность функций здесь: [Azure.com](https://azure.microsoft.com/global-infrastructure/services/?products=functions)

|Регион| Windows | Linux |
|--| -- | -- |
|Центральная Австралия| 20 | Недоступно |
|Центральная Австралия 2| 20 | Недоступно |
|Восточная Австралия| 100 | 20 |
|Юго-Восточная часть Австралии | 100 | 20 |
|Южная Бразилия| 60 | 20 |
|Центральная Канада| 100 | 20 |
|Центральная часть США| 100 | 20 |
|Восточная Азия| 100 | 20 |
|Восточная часть США | 100 | 20 |
|восточная часть США 2| 100 | 20 |
|Центральная Франция| 100 | 20 |
|Германия Западно-Центральная| 100 | Недоступно |
|Восточная Япония| 100 | 20 |
|Западная Япония| 100 | 20 |
|Республика Корея, центральный регион| 100 | 20 |
|Центрально-северная часть США| 100 | 20 |
|Северная Европа| 100 | 20 |
|Восточная Норвегия;| 20 | 20 |
|Центрально-южная часть США| 100 | 20 |
|Южная Индия | 100 | Недоступно |
|Юго-Восточная Азия| 100 | 20 |
|южная часть Соединенного Королевства| 100 | 20 |
|западная часть Соединенного Королевства| 100 | 20 |
|Западная Европа| 100 | 20 |
|Западная Индия| 100 | 20 |
|центрально-западная часть США| 20 | 20 |
|западная часть США| 100 | 20 |
|западная часть США 2| 100 | 20 |

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Понимание масштаба функций Azure и вариантов хостинга](functions-scale.md)
