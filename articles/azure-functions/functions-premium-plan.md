---
title: План ценовой категории "Премиум" для Функций Azure
description: Сведения и параметры конфигурации (VNet, без холодного запуска, длительности выполнения) для плана функций Azure Premium.
author: jeffhollan
manager: gwallace
ms.service: azure-functions
ms.topic: conceptual
ms.date: 10/16/2019
ms.author: jehollan
ms.openlocfilehash: 8cda3ce85e6e7e9d5d7787406eb3b9785c1f7724
ms.sourcegitcommit: bc7725874a1502aa4c069fc1804f1f249f4fa5f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2019
ms.locfileid: "73719033"
---
# <a name="azure-functions-premium-plan"></a>План ценовой категории "Премиум" для Функций Azure

План функций Azure Premium — это вариант размещения для приложений-функций. План "Премиум" предоставляет такие функции, как подключение к виртуальной сети, без холодного запуска и оборудование уровня "Премиум".  В один и тот же план Premium можно развернуть несколько приложений с функциями, а план позволяет настроить размер вычислительных экземпляров, базовый размер плана и максимальный размер плана.  Сравнение плана Premium и других типов планов и размещения см. в статье [варианты масштабирования и размещения функций](functions-scale.md).

## <a name="create-a-premium-plan"></a>Создание плана "Премиум"

[!INCLUDE [functions-premium-create](../../includes/functions-premium-create.md)]

Вы также можете создать план Premium с помощью команды [AZ functionapp Plan Create](/cli/azure/functionapp/plan#az-functionapp-plan-create) в Azure CLI. В следующем примере создается план уровня _эластичного Premium 1_ :

```azurecli-interactive
az functionapp plan create --resource-group <RESOURCE_GROUP> --name <PLAN_NAME> \
--location <REGION> --sku EP1
```

В этом примере замените `<RESOURCE_GROUP>` своей группой ресурсов и `<PLAN_NAME>` именем вашего плана, который уникален в группе ресурсов. Укажите [поддерживаемый `<REGION>`](#regions). Чтобы создать план Premium, поддерживающий Linux, включите параметр `--is-linux`.

После создания плана можно использовать команду [AZ functionapp Create](/cli/azure/functionapp#az-functionapp-create) , чтобы создать приложение функции. На портале одновременно создаются план и приложение. 

## <a name="features"></a>Функции

Следующие функции доступны для приложений-функций, развернутых в плане Premium.

### <a name="pre-warmed-instances"></a>Предварительно заданный экземпляр

Если в плане потребления не происходит никаких событий и выполнений в настоящее время, приложение может масштабироваться до нулевых экземпляров. Когда поступают новые события, новый экземпляр должен быть специализированным для приложения, работающего на нем.  Специализация новых экземпляров может занять некоторое время в зависимости от приложения.  Эта дополнительная задержка при первом вызове часто называется холодный запуском приложения.

В плане "Премиум" вы можете подготовить приложение на заданное количество экземпляров, вплоть до минимального размера плана.  Предварительно подготовленные экземпляры также позволяют предварительно масштабировать приложение перед высокой нагрузкой. По мере того как приложение масштабируется, оно сначала масштабируется до заранее подготовленных экземпляров. Дополнительные экземпляры продолжают поступить в буфер и немедленно загревается для подготовки к следующей операции масштабирования. Наличие буфера предварительно подготовленных экземпляров позволяет избежать задержек при холодном запуске.  Предварительно подготовленные экземпляры являются функцией плана Premium, поэтому необходимо, чтобы хотя бы один экземпляр работал и был доступен во всех случаях, когда план активен.

Вы можете настроить число предварительно заданных экземпляров в портал Azure, выбрав **приложение-функция**, перейдите на вкладку **функции платформы** и выберите параметры **Scale out** . В окне изменения приложения-функции предварительно заработающие экземпляры относятся только к этому приложению, но минимальное и максимальное экземпляры применяются ко всему плану.

![Параметры эластичного масштабирования](./media/functions-premium-plan/scale-out.png)

Вы также можете настроить предварительно подготовленные экземпляры для приложения с помощью Azure CLI

```azurecli-interactive
az resource update -g <resource_group> -n <function_app_name>/config/web --set properties.preWarmedInstanceCount=<desired_prewarmed_count> --resource-type Microsoft.Web/sites
```

### <a name="private-network-connectivity"></a>Подключение к частной сети

Функции Azure, развернутые в плане Premium, используют преимущества [новой интеграции с виртуальной сетью для веб-приложений](../app-service/web-sites-integrate-with-vnet.md).  При настройке приложение может взаимодействовать с ресурсами в виртуальной сети или защищено с помощью конечных точек службы.  Ограничения IP-адресов также доступны в приложении для ограничения входящего трафика.

При назначении подсети для приложения-функции в плане Premium требуется подсеть с достаточной IP-адресацией для каждого возможного экземпляра. Для этого требуется блок IP-адресов, в котором по меньшей мере 100.

Дополнительные сведения см. в статье [интеграция приложения-функции с виртуальной](functions-create-vnet.md)сетью.

### <a name="rapid-elastic-scale"></a>Быстрое Эластичное масштабирование

Дополнительные расчетные экземпляры автоматически добавляются в приложение с использованием той же логики быстрого масштабирования, что и план потребления.  Дополнительные сведения о том, как работает масштабирование, см. в статье [масштабирование и размещение функций](./functions-scale.md#how-the-consumption-and-premium-plans-work).

### <a name="unbounded-run-duration"></a>Длительность неограниченного выполнения

Использование функций Azure в плане потребления ограничено 10 минутами для одного выполнения.  В плане Premium длительность выполнения по умолчанию составляет 30 минут, чтобы предотвратить неконтролируемые выполнения. Однако можно [изменить конфигурацию Host. JSON](./functions-host-json.md#functiontimeout) , чтобы сделать это без ограничений для приложений плана Premium.

## <a name="plan-and-sku-settings"></a>Параметры плана и номера SKU

При создании плана необходимо настроить два параметра: минимальное число экземпляров (или размер плана) и максимальное количество пакетов.  Минимальное количество экземпляров зарезервировано и всегда выполняется.

> [!IMPORTANT]
> За каждый экземпляр, выделенный в качестве минимального числа экземпляров, выставляются счета независимо от того, выполняются ли функции.

Если приложению требуются экземпляры за пределами вашего плана, можно продолжить масштабирование до тех пор, пока количество экземпляров не достигнет максимального количества пакетов.  Счета выставляются за экземпляры, которые выходят за пределы размера вашего плана, только если они работают и арендованы вам.  Мы сделаем лучшие усилия при масштабировании приложения до заданного максимального предела, в то время как минимальный набор экземпляров плана гарантированно подходит для вашего приложения.

Вы можете настроить размер и максимум для плана в портал Azure, выбрав параметры **Scale out** в плане или приложение-функцию, развернутое в этом плане (в разделе **функции платформы**).

Кроме того, можно увеличить максимальное число пакетов от Azure CLI:

```azurecli-interactive
az resource update -g <resource_group> -n <premium_plan_name> --set properties.maximumElasticWorkerCount=<desired_max_burst> --resource-type Microsoft.Web/serverfarms 
```

### <a name="available-instance-skus"></a>Номера SKU доступных экземпляров

При создании или масштабировании плана можно выбрать один из трех размеров экземпляра.  Вам будет выставлен счет за общее количество ядер и объем используемой памяти в секунду.  Приложение может автоматически масштабироваться на несколько экземпляров по мере необходимости.  

|SKU|Ядра|Память|Хранилище|
|--|--|--|--|
|EP1|1|3,5 ГБ|250 ГБ|
|EP2|2|7 ГБ|250 ГБ|
|EP3|4\.|14 ГБ|250 ГБ|

## <a name="regions"></a>регионы

Ниже приведены поддерживаемые в настоящее время регионы для каждой ОС.

|Регион| Windows | Linux |
|--| -- | -- |
|Центральная Австралия| ✔<sup>1</sup> | |
|Центральная Австралия 2| ✔<sup>1</sup> | |
|Восточная часть Австралии| ✔ | |
|Юго-Восточная часть Австралии | ✔ | ✔ |
|Южная Бразилия| ✔<sup>2</sup> |  |
|Центральная Канада| ✔ |  |
|Центральный регион США| ✔ |  |
|Восточная Азия| ✔ |  |
|Восток США | ✔ | ✔ |
|Восток США 2| ✔ |  |
|Центральная Франция| ✔ |  |
|Восточная часть Японии| ✔ | ✔ |
|Западная часть Японии| ✔ | |
|Центральная Корея| ✔ |  |
|Центрально-северная часть США| ✔ |  |
|Северная Европа| ✔ | ✔ |
|Центрально-южная часть США| ✔ |  |
|Южная Индия | ✔ | |
|Юго-Восточная Азия| ✔ | ✔ |
|Южная часть Великобритании| ✔ | |
|Западная часть Великобритании| ✔ |  |
|Западная Европа| ✔ | ✔ |
|Западная Индия| ✔ |  |
|Запад США| ✔ | ✔ |
|Западный регион США 2| ✔ |  |

<sup>1</sup> Максимальное масштабное масштабирование ограничено 20 экземплярами.  
<sup>2</sup> Максимальный масштаб развертывания ограничен до 60 экземпляров.


## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Общие сведения о масштабировании и возможностях размещения функций Azure](functions-scale.md)
