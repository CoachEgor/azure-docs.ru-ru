---
title: 'Ошибка устранения проблем: Время выполнения функций Azure недостижимо'
description: Узнайте, как устранять неполадки, связанные с недопустимой учетной записью хранения.
author: alexkarcher-msft
ms.topic: article
ms.date: 09/05/2018
ms.author: alkarche
ms.openlocfilehash: 8fcd0661e2c7cab505121cf0d4d7b4c1d29017f8
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77063787"
---
# <a name="troubleshoot-error-azure-functions-runtime-is-unreachable"></a>Ошибка устранения неполадок: "Время выполнения функций Azure недостижимо"

Эта статья поможет устранить следующую строку ошибок, которая отображается на портале Azure:

> "Ошибка: Запуск функций Azure недоступен. Нажмите здесь для получения подробной информации о конфигурации хранилища".

Эта проблема возникает, когда время выполнения функций Azure не может начаться. Наиболее распространенной причиной проблемы является то, что приложение функции потеряло доступ к своей учетной записи хранения. Для получения дополнительной [Storage account requirements](https://docs.microsoft.com/azure/azure-functions/functions-create-function-app-portal#storage-account-requirements)информации см.

Остальная часть этой статьи поможет вам устранить следующие причины этой ошибки, в том числе, как определить и устранить каждый случай.

## <a name="storage-account-was-deleted"></a>Учетная запись хранения была удалена

Для работы каждого приложения-функции нужна учетная запись хранения. Если эта учетная запись удалена, функция не будет работать.

Начните с поиска имени учетной записи хранилища в настройках приложения. `AzureWebJobsStorage` Либо, `WEBSITE_CONTENTAZUREFILECONNECTIONSTRING` либо содержит имя учетной записи хранилища, завернутые в строку соединения. Для получения дополнительной информации смотрите [ссылки на настройки приложения для функций Azure.](https://docs.microsoft.com/azure/azure-functions/functions-app-settings#azurewebjobsstorage)

Поиск учетной записи хранилища на портале Azure, чтобы узнать, существует ли она по-прежнему. Если он был удален, воссоздайте учетную запись хранилища и замените строки подключения к хранению. Ваш функциональный код потерян, и вам нужно передислоцировать его.

## <a name="storage-account-application-settings-were-deleted"></a>Настройки приложения для хранения были удалены

На предыдущем этапе, если вы не можете найти строку подключения учетной записи хранилища, она, скорее всего, была удалена или перезаписана. Удаление параметров приложения чаще всего происходит при использовании слотов развертывания или скриптов управления ресурсами Azure для настройки настроек приложений.

### <a name="required-application-settings"></a>Необходимые параметры приложения

* Обязательно.
    * [`AzureWebJobsStorage`](https://docs.microsoft.com/azure/azure-functions/functions-app-settings#azurewebjobsstorage)
* Требуется для функций плана потребления:
    * [`WEBSITE_CONTENTAZUREFILECONNECTIONSTRING`](https://docs.microsoft.com/azure/azure-functions/functions-app-settings)
    * [`WEBSITE_CONTENTSHARE`](https://docs.microsoft.com/azure/azure-functions/functions-app-settings)

Для получения дополнительной информации смотрите [ссылки на настройки приложения для функций Azure.](https://docs.microsoft.com/azure/azure-functions/functions-app-settings)

### <a name="guidance"></a>Руководство

* Не проверяйте настройки слота для любого из этих параметров. При замене слотов развертывания приложение функции прерывается.
* Не изменяйте эти настройки как часть автоматизированного развертывания.
* Эти параметры должны быть указаны и допустимы во время создания. Автоматизированное развертывание, не содержащее эти параметры, приводит к запуску приложения функциональности, которое не будет работать, даже если настройки будут добавлены позже.

## <a name="storage-account-credentials-are-invalid"></a>Учетные данные учетной записи хранилища недействительны

При регенерации ключей хранения необходимо обновить ранее обсуждаемые строки подключения учетной записи хранилища. Для получения дополнительной информации [Create an Azure Storage account](https://docs.microsoft.com/azure/storage/common/storage-create-storage-account)об управлении ключами хранения см.

## <a name="storage-account-is-inaccessible"></a>Учетная запись хранилища недоступна

Приложение функции должно иметь доступ к учетной записи хранилища. Общие проблемы, блокивающие доступ приложения к учетной записи хранилища:

* Функция приложение развертывается в вашей среде службы приложений без правильных сетевых правил, чтобы разрешить трафик в и из учетной записи хранилища.

* Брандмауэр учетной записи хранилища включен и не настроен, чтобы позволить трафик у и из функций. Дополнительные сведения см. в статье [Настройка брандмауэров службы хранилища Azure и виртуальных сетей](https://docs.microsoft.com/azure/storage/common/storage-network-security?toc=%2fazure%2fstorage%2ffiles%2ftoc.json).

## <a name="daily-execution-quota-is-full"></a>Ежедневная квота выполнения полна

Если у вас есть ежедневная квота выполнения настроена, ваше приложение функции временно отключено, что приводит к тому, что многие элементы управления порталом становятся недоступными. 

Чтобы проверить квоту на [портале Azure,](https://portal.azure.com)выберите > **настройки функциональных приложений** **платформы**в приложении функции. Если вы закончили **установленную квоту ежедневного использования,** отображается следующее сообщение:

  > "Функция App достигла ежедневной квоты использования и была остановлена до следующих 24 часов сроки".

Чтобы решить эту проблему, удалите или увеличьте дневную квоту, а затем перезапустите приложение. В противном случае выполнение приложения блокируется до следующего дня.

## <a name="app-is-behind-a-firewall"></a>Приложение находится за брандмауэром

Время выполнения функции может быть недостижимо по любой из следующих причин:

* Ваше приложение для функций размещается в [сбалансированной среде службы обслуживания приложений,](../app-service/environment/create-ilb-ase.md) которая будет работать для блокирования входящего интернет-трафика.

* Ваше приложение функции имеет [входящие ограничения IP,](functions-networking-options.md#inbound-ip-restrictions) которые настроены для блокирования доступа в Интернет. 

Портал Azure делает звонки непосредственно в запущенное приложение, чтобы получить список функций, и он делает http звонки в конечную точку Kudu. Настройки на уровне платформы под вкладкой **«Параметры платформы»** по-прежнему доступны.

Для проверки конфигурации среды службы приложений:
1. Перейдите в группу сетевой безопасности (NSG) подсети, в которой находится среда службы приложений.
1. Проверка входящих правил, чтобы разрешить трафик, поступающий из общедоступного IP-адреса компьютера, где вы получаете доступ к приложению. 
   
Вы также можете использовать портал с компьютера, подключенного к виртуальной сети, которая работает с вашим приложением, или с виртуальной машиной, работая в виртуальной сети. 

Для получения дополнительной информации о конфигурации входящих правил [Networking considerations for an App Service Environment](https://docs.microsoft.com/azure/app-service/environment/network-info#network-security-groups)см.

## <a name="next-steps"></a>Дальнейшие действия

Узнайте о мониторинге приложений функций:

> [!div class="nextstepaction"]
> [Мониторинг Функций Azure](functions-monitoring.md)
