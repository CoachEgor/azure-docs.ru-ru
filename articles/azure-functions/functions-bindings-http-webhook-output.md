---
title: Привязки навыходе Azure Functions HTTP
description: Узнайте, как вернуть ответы HTTP в функциях Azure.
author: craigshoemaker
ms.topic: reference
ms.date: 02/21/2020
ms.author: cshoe
ms.openlocfilehash: a25658677e436edf4d001599bb4981f527016596
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79277626"
---
# <a name="azure-functions-http-output-bindings"></a>Привязки навыходе Azure Functions HTTP

Привязка для вывода HTTP используется для ответа отправителю запроса HTTP. Эта привязка требует наличия триггера HTTP и позволяет настроить ответ, возвращаемый на запрос этого триггера.

Значение возврата по умолчанию для функции HTTP-триггера:

- `HTTP 204 No Content`с пустым телом в функциях 2.x и выше
- `HTTP 200 OK`с пустым телом в Функциях 1.x

## <a name="configuration"></a>Параметр Configuration

В следующей таблице описываются свойства конфигурации привязки, которые задаются в файле *function.json*. Для библиотек класса C# свойства атрибута, соответствующие этим свойствам *function.json*, отсутствуют.

|Свойство  |Описание  |
|---------|---------|
| **тип** |Нужно задать значение `http`. |
| **direction** | Нужно задать значение `out`. |
| **name** | Имя переменной, используемое в коде функции для ответа, или `$return` для использования возвращаемого значения. |

## <a name="usage"></a>Использование

Чтобы отправить ответ HTTP, используйте шаблоны ответов языкового стандарта. В C# или скрипте C# задайте тип возвращаемого значения функции `IActionResult` или `Task<IActionResult>`. В C# атрибут возвращаемого значения не является обязательным.

Примеры ответов см. в разделе с [примером триггера](./functions-bindings-http-webhook-trigger.md#example).

## <a name="hostjson-settings"></a>Параметры файла host.json

В этом разделе описаны глобальные настройки конфигурации, доступные для этого привязки в версиях 2.x и выше. Приведенный ниже файл «Пример host.json» содержит только настройки версии 2.x для этой привязки. Для получения дополнительной информации о настройках глобальной конфигурации в версиях 2.x и далее см. [ссылку host.json на функции Azure.](functions-host-json.md)

> [!NOTE]
> Чтобы получить дополнительные сведения о файле host.json в Функции 1.x, см. статью [host.json reference for Azure Functions 1.x](functions-host-json-v1.md#http)(Справочник по файлу host.json для службы "Функции Azure" версии 1.x.).

```json
{
    "extensions": {
        "http": {
            "routePrefix": "api",
            "maxOutstandingRequests": 200,
            "maxConcurrentRequests": 100,
            "dynamicThrottlesEnabled": true,
            "hsts": {
                "isEnabled": true,
                "maxAge": "10"
            },
            "customHeaders": {
                "X-Content-Type-Options": "nosniff"
            }
        }
    }
}
```

|Свойство  |Значение по умолчанию | Описание |
|---------|---------|---------| 
| customHeaders|none|Позволяет устанавливать пользовательские заголовки в ответе HTTP. Предыдущий пример `X-Content-Type-Options` добавляет заголовок в ответ, чтобы избежать обнюхивания типа содержимого. |
|dynamicThrottlesEnabled|Истинный<sup>\*</sup>|При включении эта настройка приводит к тому, что `connections/threads/processes/memory/cpu/etc` конвейер обработки запросов периодически проверяет счетчики производительности системы, и `429 "Too Busy"` если какой-либо из этих счетчиков находится на высоком пороге (80%), запросы будут отклонены с ответом до тех пор, пока счетчик (ы) не вернется к нормальным уровням.<br/><sup>\*</sup>По умолчанию в `true`плане потребления. По умолчанию в `false`выделенном плане .|
|hsts|не включено|При `isEnabled` `true`установлении, [http Strict Transport Security (HSTS) поведение .NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.0&tabs=visual-studio#hsts) применяется, как это определено в [ `HstsOptions` классе.](/dotnet/api/microsoft.aspnetcore.httpspolicy.hstsoptions?view=aspnetcore-3.0) Вышеприведенный пример [`maxAge`](/dotnet/api/microsoft.aspnetcore.httpspolicy.hstsoptions.maxage?view=aspnetcore-3.0#Microsoft_AspNetCore_HttpsPolicy_HstsOptions_MaxAge) также устанавливает свойство до 10 дней. Поддерживаемые `hsts` свойства: <table><tr><th>Свойство</th><th>Описание</th></tr><tr><td>исключеныХозяева</td><td>Строка массива имен хоста, для которых заголовок HSTS не добавляется.</td></tr><tr><td>включаютСубдомены</td><td>Значение Boolean, которое указывает на то, включен ли параметр включена параметр «Строго-Транспорт-Безопасность».</td></tr><tr><td>Maxage</td><td>Строка, определяющая параметры максимального возраста заголовка Strict-Transport-Security.</td></tr><tr><td>Preload (Предварительная загрузка)</td><td>Boolean, который указывает, включен ли параметр преднагрузки заголовка Строго-Транспортно-Безопасности.</td></tr></table>|
|maxConcurrentRequests|100<sup>\*</sup>|Максимальное количество функций HTTP, выполняемых параллельно. Это значение позволяет управлять параллелизмом, что может помочь в управлении использованием ресурсов. Например, у вас может быть функция HTTP, которая использует большое количество системных ресурсов (память/cpu/sockets), так что она вызывает проблемы, когда параллель слишком высока. Или у вас может быть функция, которая делает исходящие запросы в стороннюю службу, и эти вызовы должны быть ограничены. В таких случаях может помочь применение регулирования. <br/><sup>*</sup>По умолчанию для плана потребления 100. По умолчанию для выделенного плана`-1`не ограничен ().|
|maxOutstandingRequests|200<sup>\*</sup>|Максимальное число невыполненных запросов, которое хранится в любой отдельно взятый момент времени. Это ограничение включает запросы, которые находятся в очереди, но еще не начали выполняться, а также все запросы в процессе выполнения. Все входящие запросы, превышающие это ограничение, отклоняются с ответом 429 "Too Busy" (Перегрузка). Это позволяет вызывающим объектам использовать стратегии повторов на основе времени, а также помогает вам контролировать максимальные задержки запросов. Эта настройка влияет только на очереди, которые создаются по пути выполнения средства обработки скриптов. Она не влияет на другие очереди, такие как очередь запросов ASP.NET. <br/><sup>\*</sup>По умолчанию для плана потребления 200. По умолчанию для выделенного плана`-1`не ограничен ().|
|routePrefix|api|Префикс маршрута, который применяется ко всем маршрутам. Используйте пустую строку, чтобы удалить префикс по умолчанию. |

## <a name="next-steps"></a>Дальнейшие действия

- [Выполнить функцию из запроса HTTP](./functions-bindings-http-webhook-trigger.md)