---
title: Непрерывное развертывание для Функций Azure | Документация Майкрософт
description: Используйте средства непрерывного развертывания службы приложений Azure, чтобы публикация функций.
services: functions
documentationcenter: na
author: ggailey777
manager: jeconnoc
ms.assetid: 361daf37-598c-4703-8d78-c77dbef91643
ms.service: azure-functions
ms.devlang: multiple
ms.topic: conceptual
ms.date: 09/25/2016
ms.author: glenga
ms.openlocfilehash: cb3f3ad3bb7b42429654ea4bf9b49f7e230db1da
ms.sourcegitcommit: c53a800d6c2e5baad800c1247dce94bdbf2ad324
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/30/2019
ms.locfileid: "64943884"
---
# <a name="continuous-deployment-for-azure-functions"></a>Непрерывное развертывание для Функций Azure
Функции Azure упрощает развертывание приложения-функции с помощью непрерывной интеграции. Функции интегрируется с репозиториями основного кода, а также источников развертывания. Такая интеграция обеспечивает рабочий процесс, где изменения кода функций внесенные посредством одного из этих служб, активировали развертывание в Azure. Если вы работали с функциями Azure, начните с [Обзор функций Azure](functions-overview.md).

Непрерывное развертывание очень удобно для проектов, где для интеграции нескольких и часто вклад. Это также позволяет поддерживать системы управления версиями в коде функции. Функции Azure поддерживают следующие источники развертывания:

* [Bitbucket;](https://bitbucket.org/)
* [Dropbox](https://www.dropbox.com/)
* Внешний репозиторий (Git или Mercurial)
* [Локальный репозиторий Git](../app-service/deploy-local-git.md)
* [GitHub](https://github.com)
* [OneDrive](https://onedrive.live.com/)
* [Azure DevOps](https://azure.microsoft.com/services/devops/)

Развертывания настраиваются на основе приложения-функции. После включения непрерывного развертывания доступ к коду функции на портале предоставляется *только для чтения*.

## <a name="requirements-for-continuous-deployment"></a>Требования для непрерывного развертывания

Перед настройкой непрерывного развертывания в источнике развертывания необходимо настроить источник развертывания и коде функции. В развертывании приложения-функции каждая функция находится в именованном подкаталоге, где имя каталога — имя функции.  

[!INCLUDE [functions-folder-structure](../../includes/functions-folder-structure.md)]

Чтобы иметь возможность выполнять развертывание из Azure DevOps, необходимо связать учетную запись организации Azure DevOps с подпиской Azure. Дополнительные сведения см. в разделе [Set up billing via the Azure Portal](https://docs.microsoft.com/azure/devops/organizations/billing/set-up-billing-for-your-organization-vs?view=vsts#set-up-billing-via-the-azure-portal) (Настройка выставления счетов через портал Azure).

## <a name="set-up-continuous-deployment"></a>Непрерывное развертывание с использованием GIT в службе приложений Azure
Используйте эту процедуру, чтобы настроить непрерывное развертывание для имеющегося приложения-функции. Здесь показана интеграция с репозиторием GitHub, но аналогичные действия применяются и для Azure DevOps и других служб развертывания.

1. В приложении-функции в [портала Azure](https://portal.azure.com)выберите **функции платформы** > **варианты развертывания**. 
   
    ![Выбранные элементы для открытия варианты развертывания](./media/functions-continuous-deployment/setup-deployment.png)
 
1. На **развертываний** колонке **установки**.
 
    ![Колонке "развертывания"](./media/functions-continuous-deployment/setup-deployment-1.png)
   
1. На **источник развертывания** колонке **Выбор источника**. Укажите в информации о выбранном источнике развертывания, а затем нажмите **ОК**.
   
    ![Выбор источника развертывания](./media/functions-continuous-deployment/choose-deployment-source.png)

После настройки непрерывного развертывания все изменения файлов в источнике развертывания копируются в приложение-функцию и активируется полное развертывание сайта. После обновления файлов в источнике выполняется повторное развертывание сайта.

## <a name="deployment-scenarios"></a>Сценарии развертывания

Типичные сценарии развертывания включают создание промежуточного развертывания и перемещение имеющихся функций в среду непрерывного развертывания.

<a name="staging"></a>
### <a name="create-a-staging-deployment"></a>Создание промежуточного развертывания

Приложения-функции еще не поддерживают слоты развертывания. Но вы можете по-прежнему управлять отдельной промежуточное и рабочее развертывание с помощью непрерывной интеграции.

Обычно процедура настройки и работа с промежуточным развертыванием выглядят следующим образом.

1. Создайте два приложения-функции в своей подписке: один для рабочего кода и один для промежуточного хранения. 

1. Создайте источник развертывания, если он еще не создан. В этом примере используется [GitHub].

1. Для рабочего приложения-функции выполните действия, описанные в разделе [Настройка непрерывного развертывания](#set-up-continuous-deployment), и выберите в качестве ветви развертывания главную ветвь репозитория GitHub.
   
    ![Выбранные параметры, чтобы выбрать ветви развертывания](./media/functions-continuous-deployment/choose-deployment-branch.png)

1. Повторите шаг 3 для промежуточного приложения-функции, но вместо этого выберите промежуточную ветвь в репозитории GitHub. Если источник развертывания не поддерживает ветвление, используйте другую папку.
    
1. Внесите изменения в код в промежуточной ветви или папке и убедитесь, что эти изменения отражаются в промежуточном развертывании.

1. После проверки внесите изменения из промежуточной ветви в главную. Это позволит активировать развертывание в рабочем приложении-функции. Если источник развертывания не поддерживает ветвление, замените файлы в рабочей папке файлами из промежуточной папки.

<a name="existing"></a>
### <a name="move-existing-functions-to-continuous-deployment"></a>Перемещение имеющихся функций в среду непрерывного развертывания
При наличии существующих функций, которые вы создали и разместили их на портале, необходимо скачать файлы кода функции с помощью FTP или локального репозитория Git, прежде чем можно настроить непрерывное развертывание, как описано выше. Это можно сделать в параметрах службы приложений Azure для приложения-функции. После загрузки файлов, их можно загрузить на выбранный источник непрерывного развертывания.

> [!NOTE]
> После настройки непрерывной интеграции, больше не может изменить исходные файлы на портале функций.

<a name="credentials"></a>
#### <a name="configure-deployment-credentials"></a>Настройка учетных данных развертывания
Прежде чем можно скачать файлы из приложения-функции с помощью FTP или локального репозитория Git, необходимо настроить учетные данные для доступа к сайту. Учетные данные задаются на уровне приложения-функции. Чтобы задать учетные данные развертывания на портале Azure, выполните следующие действия:

1. В приложении-функции в [портала Azure](https://portal.azure.com)выберите **функции платформы** > **учетные данные развертывания**.
   
1. Введите имя пользователя и пароль, а затем выберите **Сохранить**. 

   ![Выбранные параметры для задания учетных данных локального развертывания](./media/functions-continuous-deployment/setup-deployment-credentials.png)

Теперь эти учетные данные можно использовать для доступа к приложению-функции из FTP или встроенного репозитория Git.

<a name="downftp"></a>
#### <a name="download-files-by-using-ftp"></a>Загрузка файлов с помощью FTP

1. В приложении-функции в [портала Azure](https://portal.azure.com)выберите **функции платформы** > **свойства**. Затем скопируйте значения параметров **пользователь FTP или развертывания**, **имя узла FTP**, и **имя узла FTPS**.  

   Параметр **Пользователь FTP или развертывания** нужно ввести так, как он отображается на портале, включая имя приложения, чтобы обеспечить правильный контекст для FTP-сервера.
   
   ![Выбранные параметры для получения сведений о развертывании](./media/functions-continuous-deployment/get-deployment-credentials.png)

1. Из клиента FTP используя сведения о соединении, собранные для подключения к приложению и загрузка исходных файлов для функций.

<a name="downgit"></a>
#### <a name="download-files-by-using-a-local-git-repository"></a>Загрузка файлов с помощью локального репозитория Git

1. В приложении-функции в [портала Azure](https://portal.azure.com)выберите **функции платформы** > **варианты развертывания**. 
   
    ![Выбранные элементы для открытия варианты развертывания](./media/functions-continuous-deployment/setup-deployment.png)
 
1. Затем на **развертываний** колонке **установки**.
 
    ![Колонке "развертывания"](./media/functions-continuous-deployment/setup-deployment-1.png)
   
1. На **источник развертывания** колонке **локальный репозиторий Git** > **ОК**.

1. В **функции платформы**выберите **свойства** и запишите значение URL-адрес Git. 
   
    ![Выбранные параметры для получения URL-адрес Git](./media/functions-continuous-deployment/get-local-git-deployment-url.png)

1. Клонируйте репозиторий на локальном компьютере с помощью Git с поддержкой командной строки или одного из средств Git. Команда git clone выглядит следующим образом:
   
        git clone https://username@my-function-app.scm.azurewebsites.net:443/my-function-app.git

1. Получите удаленный доступ к файлам из приложения-функции в клонированном репозитории файлов на локальном компьютере, как показано в следующем примере.
   
        git pull origin master
   
    При появлении запроса укажите свои [настроенные учетные данные развертывания](#credentials).  

[GitHub]: https://github.com/

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Рекомендации по функциям Azure](functions-best-practices.md)
