---
title: Разработка функций Azure с помощью visual Studio Code
description: Узнайте, как разрабатывать и тестировать функции Azure, используя расширение Azure Functions для Visual Studio Code.
ms.topic: conceptual
ms.date: 08/21/2019
ms.openlocfilehash: 2d33b7dddf29d37d174bdb7734e9048bc1658840
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79277171"
---
# <a name="develop-azure-functions-by-using-visual-studio-code"></a>Разработка функций Azure с помощью visual Studio Code

[Расширение Azure Functions для Visual Studio Code] позволяет локально разрабатывать функции и развертывать их в Azure. Если вы впервые сталкиваетесь с функциями Azure, дополнительные сведения см. в статье [Общие сведения о Функциях Azure](functions-overview.md).

Расширение Azure Functions предоставляет следующие преимущества:

* Создание, редактирование и выполнение функций на локальном компьютере для разработки.
* Публикация проектов Функций Azure непосредственно в Azure.
* Пишите свои функции на различных языках, пользуясь преимуществами Visual Studio Code.

Расширение можно использовать со следующими языками, которые поддерживаются временем выполнения функций Azure, начиная с версии 2.x:

* [Компилировано сc](functions-dotnet-class-library.md)
* [Скрипт на СИ](functions-reference-csharp.md)<sup>*</sup>
* [Javascript](functions-reference-node.md)
* [Java](functions-reference-java.md)
* [PowerShell](functions-reference-powershell.md)
* [Python](functions-reference-python.md)

<sup>*</sup>Требуется [установить скрипт C'в качестве языка проекта по умолчанию.](#c-script-projects)

В этой статье примеры в настоящее время доступны только для функций JavaScript (Node.js) и библиотеки класса C.  

В этой статье приводится подробная информация о том, как использовать расширение Azure Functions для разработки функций и публикации их в Azure. Прежде чем читать эту статью, вы должны [создать свою первую функцию с помощью Visual Studio Code.](functions-create-first-function-vs-code.md)

> [!IMPORTANT]
> Не смешивайте локальную разработку и разработку порталов для одного приложения функции. При публикации из локального проекта в приложение-функцию любые функции, разработанные на портале, будут перезаписаны в процессе развертывания.

## <a name="prerequisites"></a>Предварительные требования

Перед установкой и запуском расширения [Azure Functions Azure][Functions для Visual Studio Code]необходимо выполнить следующие требования:

* [Визуальный студийный код](https://code.visualstudio.com/) установлен на одной из [поддерживаемых платформ.](https://code.visualstudio.com/docs/supporting/requirements#_platforms)

* Активная подписка Azure.

[!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

Другие ресурсы, которые вам нужны, например учетная запись хранения Azure, создаются в вашей подписке при [публикации с помощью Visual Studio Code.](#publish-to-azure)

> [!IMPORTANT]
> Вы можете разрабатывать функции локально и публиковать их в Azure без необходимости запуска и запуска их локально. Чтобы выполнять функции локально, необходимо удовлетворить некоторые дополнительные требования, включая автоматическую загрузку основных инструментов Azure Functions. Чтобы узнать больше, [см. Дополнительные требования для запуска проекта локально](#additional-requirements-for-running-a-project-locally).

[!INCLUDE [functions-install-vs-code-extension](../../includes/functions-install-vs-code-extension.md)]

## <a name="create-an-azure-functions-project"></a>Создание проекта Функций Azure

Расширение Функции позволяет создавать проект приложения функции вместе с первой функцией. Следующие шаги показывают, как создать функцию HTTP-триггера в новом проекте Функции. [HTTP триггер](functions-bindings-http-webhook.md) является простейших шаблон триггера функции для демонстрации.

1. Из **Azure: Функции**выберите значок **функции создания:**

    ![Создание функции](./media/functions-develop-vs-code/create-function.png)

1. Выберите папку для проекта приложения функции, а затем **выберите язык для проекта функции.**

1. Если вы еще не установили основные инструменты, вам предлагается **выбрать версию** основных инструментов для установки. Выберите версию 2.x или более позднюю версию. 

1. Выберите шаблон функции **триггера HTTP,** или вы можете выбрать **Skip на данный момент,** чтобы создать проект без функции. Вы всегда можете [добавить функцию в свой проект](#add-a-function-to-your-project) позже.

    ![Выбор шаблона функции, активируемой HTTP-запросом](./media/functions-develop-vs-code/create-function-choose-template.png)

1. Введите **httpExample** для имени функции и выберите Введите, а затем выберите авторизацию **функции.** Этот уровень авторизации требует, чтобы вы предоставили [ключ функции](functions-bindings-http-webhook-trigger.md#authorization-keys) при вызове конечную точку функции.

    ![Выберите авторизацию функции](./media/functions-develop-vs-code/create-function-auth.png)

    Функция создается на выбранном вами языке и в шаблоне для функции HTTP-триггера.

    ![Шаблон функции HTTP-срабатывает в Visual Studio Code](./media/functions-develop-vs-code/new-function-full.png)

### <a name="generated-project-files"></a>Генерируемые файлы проекта

Шаблон проекта создает проект на выбранном языке и устанавливает необходимые зависимости. Для любого языка новый проект имеет следующие файлы:

* **host.json**: позволяет настроить узел Функций. Эти параметры применяются при локальном запуске функций и при их запуске в Azure. Дополнительные сведения см. в [справочной статье о host.json](functions-host-json.md).

* **local.settings.json**: Поддерживает настройки, используемые при локальном запуске функций. Эти параметры используются только при локальном запуске функций. Для получения дополнительной информации смотрите [файл локальных настроек](#local-settings-file).

    >[!IMPORTANT]
    >Поскольку файл local.settings.json может содержать секреты, необходимо исключить его из элемента управления исходом проекта.

В зависимости от вашего языка создаются другие файлы:

# <a name="c"></a>[C\#](#tab/csharp)

* [HttpExample.cs файл библиотеки класса,](functions-dotnet-class-library.md#functions-class-library-project) который реализует функцию.

# <a name="javascript"></a>[Javascript](#tab/nodejs)

* Файл package.json в корневой папке.

* Папка HttpExample, содержащая [файл определения function.json](functions-reference-node.md#folder-structure) и [файл index.js,](functions-reference-node.md#exporting-a-function)файл Node.js, содержащий код функции.

<!-- # [PowerShell](#tab/powershell)

* An HttpExample folder that contains the [function.json definition file](functions-reference-python.md#programming-model) and the run.ps1 file, which contains the function code.
 
# [Python](#tab/python)
    
* A project-level requirements.txt file that lists packages required by Functions.
    
* An HttpExample folder that contains the [function.json definition file](functions-reference-python.md#programming-model) and the \_\_init\_\_.py file, which contains the function code.
     -->
---

На этом этапе можно добавить входные и выходные привязки к функции, [изменив файл function.json](#add-a-function-to-your-project) или [добавив параметр в функцию библиотеки класса C'](#add-a-function-to-your-project).

Вы также можете [добавить новую функцию в проект.](#add-a-function-to-your-project)

## <a name="install-binding-extensions"></a>Установка расширений привязки

За исключением триггеров HTTP и таймер, привязки внедряются в пакетах расширения. Необходимо установить пакеты расширения для триггеров и привязок, которые в них нуждаются. Процесс установки связывающих расширений зависит от языка проекта.

# <a name="c"></a>[C\#](#tab/csharp)

Запустите команду [пакетов dotnet](/dotnet/core/tools/dotnet-add-package) в окне терминала для установки пакетов расширений, которые необходимы в проекте. Следующая команда устанавливает расширение хранилища Azure, которое реализует привязки для хранения Blob, Queue и Таблицы.

```bash
dotnet add package Microsoft.Azure.WebJobs.Extensions.Storage --version 3.0.4
```

# <a name="javascript"></a>[Javascript](#tab/nodejs)

[!INCLUDE [functions-extension-bundles](../../includes/functions-extension-bundles.md)]

---

## <a name="add-a-function-to-your-project"></a>Добавление функции в проект

Можно добавить новую функцию в существующий проект, используя один из предопределенных шаблонов триггера функций. Чтобы добавить новый триггер функции, выберите F1, чтобы открыть палитру команд, а затем выполнить и запустить функции команды **Azure: Создание функции** Следуйте запросам, чтобы выбрать тип триггера и определить необходимые атрибуты триггера. Если для подключения к службе требуется ключ доступа или строка подключения, приготовьте его перед созданием триггера функции.

Результаты этого действия зависят от языка вашего проекта:

# <a name="c"></a>[C\#](#tab/csharp)

В проект добавляется новый файл библиотеки класса C '(.cs).

# <a name="javascript"></a>[Javascript](#tab/nodejs)

В проекте создается новая папка. Папка содержит новый файл function.json и новый файл кода JavaScript.

---

## <a name="add-input-and-output-bindings"></a>Добавление входных и выходных привязок

Функция может расширить функцию, добавив входные и выходные привязки. Процесс добавления привязок зависит от языка проекта. Чтобы узнать больше о [Azure Functions triggers and bindings concepts](functions-triggers-bindings.md)привязки, см.

Следующие примеры подключаются `outqueue`к названной очереди хранения, где `MyStorageConnection` строка подключения для учетной записи хранилища установлена в настройках приложения local.settings.json.

# <a name="c"></a>[C\#](#tab/csharp)

Обновление метода функции, чтобы `Run` добавить следующий параметр к определению метода:

```cs
[Queue("outqueue"),StorageAccount("MyStorageConnection")] ICollector<string> msg
```

Этот код требует добавления следующего `using` оператора:

```cs
using Microsoft.Azure.WebJobs.Extensions.Storage;
```

Параметр `msg` относится к типу `ICollector<T>`, который представляет собой коллекцию сообщений, записываемых в выходную привязку после завершения функции. Вы добавляете одно или несколько сообщений в коллекцию. Эти сообщения отправляются в очередь по завершении функции.

Чтобы узнать больше, [см.](functions-bindings-storage-queue-output.md)

# <a name="javascript"></a>[Javascript](#tab/nodejs)

Visual Studio Code позволяет добавлять привязки к файлу function.json, следуя удобному набору запросов. Чтобы создать привязку, право-клик (Ctrl'click на macOS) **function.json** файл в папке функции и выберите **Добавить привязки:**

![Добавление привязки к существующей функции JavaScript ](media/functions-develop-vs-code/function-add-binding.png)

Ниже приведены примеры запросов для определения нового связывания вывода хранилища:

| prompt | Значение | Описание |
| -------- | ----- | ----------- |
| **Select binding direction** (Выберите направление привязки) | `out` | Привязка является выходной привязкой. |
| **Выберите связывание с направлением** | `Azure Queue Storage` | Привязка является привязкой очереди службы хранилища Azure. |
| **Имя, используемое для идентификации этой привязки в коде** | `msg` | Имя, которое используется для идентификации параметров привязки, указанных в коде. |
| **Очередь, в которую будет отправлено сообщение** | `outqueue` | Имя очереди, в которой записывается привязка. Если *queueName* не существует, то при первом использовании этот параметр будет создан привязкой. |
| **Выберите настройки из "local.settings.json"** | `MyStorageConnection` | Имя параметра приложения, содержащего строку подключения для учетной записи хранилища. Настройка `AzureWebJobsStorage` содержит строку соединения для учетной записи хранилища, созданной с помощью приложения функции. |

В этом примере к `bindings` массиву добавляется следующая привязка:

```javascript
{
    "type": "queue",
    "direction": "out",
    "name": "msg",
    "queueName": "outqueue",
    "connection": "MyStorageConnection"
}
```

Вы также можете добавить то же привязывающее определение непосредственно к своему function.json.

В вашем функциональном `msg` коде переплета доступна `context`из, как в этом примере:

```javascript
context.bindings.msg = "Name passed to the function: " req.query.name;
```

Чтобы узнать больше, [см.](functions-bindings-storage-queue-output.md)

---

[!INCLUDE [Supported triggers and bindings](../../includes/functions-bindings.md)]

[!INCLUDE [functions-sign-in-vs-code](../../includes/functions-sign-in-vs-code.md)]

## <a name="publish-to-azure"></a>Публикация в Azure

Visual Studio Code позволяет публиковать проект Функции непосредственно в Azure. При этом вы создаете приложение-функцию и связанные ресурсы в своей подписке Azure. Приложение-функция обеспечивает контекст выполнения функций. Проект упаковывается и развертывается в новом приложении-функции в вашей подписке Azure.

Когда вы публикуете от Visual Studio Code к новому приложению функции в Azure, вам предлагается как быстрое приложение функции, создайте путь, так и расширенный путь. 

Публикуя из Visual Studio Code, вы пользуетесь технологией [развертывания системы ip.](functions-deployment-technologies.md#zip-deploy) 

### <a name="quick-function-app-create"></a>Быстрая функция приложения создать

При выборе **приложения «Создание нового функции» в Azure...,** расширение автоматически генерирует значения для ресурсов Azure, необходимых приложению функции. Эти значения основаны на названии приложения функции, которое вы выбираете. Например, при использовании по умолчанию для публикации проекта в [Visual Studio Code quickstart article](functions-create-first-function-vs-code.md#publish-the-project-to-azure)новом приложении функции в Azure см.

Если требуется узнать явные имена для созданных ресурсов, необходимо выбрать расширенный путь создания.

### <a name="publish-a-project-to-a-new-function-app-in-azure-by-using-advanced-options"></a><a name="enable-publishing-with-advanced-create-options"></a>Опубликовать проект в новое функциональное приложение в Azure с помощью расширенных опций

Следующие шаги публикуют ваш проект в новое приложение функции, созданное с расширенными опциями создания:

1. В области **Azure: Функции** выберите значок **«Развертывание функциональных приложений».**

    ![Параметры приложения-функции](./media/functions-develop-vs-code/function-app-publish-project.png)

1. Если вы не зарегистрировались, вам будет предложено **войти в Azure**. Вы также можете **создать бесплатную учетную запись Azure.** После входе из браузера, вернитесь к Visual Studio Code.

1. Если у вас есть несколько подписок, **Выберите подписку** для приложения функции, а затем выберите **и создайте новое функциональное приложение в Azure... _Расширенный_**. Эта _опция Advanced_ дает вам больший контроль над ресурсами, которые вы создаете в Azure. 

1. Следуя запросам, предоставьте эту информацию:

    | prompt | Значение | Описание |
    | ------ | ----- | ----------- |
    | Выберите функциональное приложение в Azure | Создание нового функционального приложения в Azure | В следующем запросе введите глобально уникальное имя, которое идентифицирует новое функциональное приложение, а затем выберите Enter. Допустимые символы для имени приложения-функции: `a-z`, `0-9` и `-`. |
    | Выберите ОС | Windows | Функция приложение работает на Windows. |
    | Выберите план хостинга | План потребления | Используется [хостинг плана без](functions-scale.md#consumption-plan) серверов потребления. |
    | Выберите время выполнения для нового приложения | Язык проекта | Время выполнения должно соответствовать проекту, который вы публикуете. |
    | Выберите группу ресурсов для новых ресурсов | Создание новой группы ресурсов | В следующем запросе введите имя `myResourceGroup`группы ресурсов, например, а затем выберите ввод. Можно также выбрать существующую группу ресурсов. |
    | Выберите учетную запись хранения | Создание учетной записи хранения | В следующем запросе введите глобально уникальное имя для новой учетной записи хранения, используемой вашим функциональным приложением, а затем выберите Enter. Имена учетных записей хранения должны быть от 3 до 24 символов в длину и могут содержать только номера и буквы нижнего регистра. Вы также можете выбрать существующую учетную запись. |
    | Выбор расположения для новых ресурсов | region | Выберите место расположение в [регионе](https://azure.microsoft.com/regions/) рядом с вами или рядом с другими службами, к которым к ней обращаются функции. |

    Уведомление появляется после создания приложения функции и применения пакета развертывания. Выберите **View Output** (Просмотреть выходные данные) в уведомлении, чтобы просмотреть результаты создания и развертывания ресурсов Azure.

## <a name="republish-project-files"></a>Переиздание файлов проектов

При настройке [непрерывного развертывания](functions-continuous-deployment.md)приложение функции в Azure обновляется при обновлении исходных файлов в подключенном месте исходного кода. Мы рекомендуем непрерывное развертывание, но вы также можете переиздать обновления файлов проекта из Visual Studio Code.

> [!IMPORTANT]
> Публикация в существующее приложение-функцию перезаписывает содержимое этого приложения в Azure.

1. В Visual Studio Code выберите F1, чтобы открыть командную палитру. В палитре команд выполняется поиск и выберите **функции Azure: Развертывание для работы приложения.**

1. Если вы не зарегистрировались, вам будет предложено **войти в Azure**. После вхуши из браузера, вернитесь к Visual Studio Code. Если у вас несколько подписок, **выберите подписку,** которая содержит приложение функции.

1. Выберите существующее функциональное приложение в Azure. Когда вас предупреждают о перезаписи всех файлов в приложении функции, выберите **Deploy,** чтобы подтвердить предупреждение и продолжить.

Проект перестраивается, переупаковывается и загружается в Azure. Существующий проект заменяется новым пакетом, и приложение функции перезапускается.

## <a name="get-the-url-of-the-deployed-function"></a>Получить URL-адрес развернутой функции

Чтобы вызвать функцию HTTP-триггера, при развертывании функции функции необходим URL-адрес. Этот URL включает в себя любые необходимые [функциональные ключи.](functions-bindings-http-webhook-trigger.md#authorization-keys) Вы можете использовать расширение, чтобы получить эти URL-адреса для развернутых функций.

1. Выберите F1, чтобы открыть палитру команд, а затем выполнить и запустить функции команды **Azure: Копировать URL функции.**

1. Следуйте запросам, чтобы выбрать приложение функции в Azure, а затем конкретный триггер HTTP, который вы хотите вызвать.

URL-адрес функции скопирован в буфер обмена, а `code` также любые необходимые ключи, пройдено по параметру запроса. Используйте инструмент HTTP для отправки запросов POST или браузер для запросов GET на удаленную функцию.  

## <a name="run-functions-locally"></a>Запуск функций в локальной среде

Расширение Azure Functions позволяет запустить проект Функции на локальном компьютере разработки. Локальное время выполнения — это то же время выполнения, в котором размещается приложение функции в Azure. Локальные настройки читаются из [файла local.settings.json.](#local-settings-file)

### <a name="additional-requirements-for-running-a-project-locally"></a>Дополнительные требования к локальному запуску проекта

Чтобы выполнить проект Функции локально, необходимо удовлетворить следующие дополнительные требования:

* Установите версию 2.x или позже [основных инструментов функций Azure.](functions-run-local.md#v2) Пакет Core Tools загружается и устанавливается автоматически при локальном запуске проекта. Основные инструменты включают в себя все время выполнения функций Azure, поэтому загрузка и установка могут занять некоторое время.

* Установите необходимые дополнительные средства для выбранного языка:

    | Язык | Требование |
    | -------- | --------- |
    | **C #** | [расширение C#](https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csharp);<br/>[Средства .NET Core CLI](https://docs.microsoft.com/dotnet/core/tools/?tabs=netcore2x)   |
    | **Java** | [Отбугдля для расширения Java](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug)<br/>[Java 8](https://aka.ms/azure-jdks)<br/>[Maven 3 или более поздно](https://maven.apache.org/) |
    | **Javascript** | [Node.js](https://nodejs.org/)<sup>*</sup> |  
    | **Python** | [Расширение Python](https://marketplace.visualstudio.com/items?itemName=ms-python.python)<br/>[Рекомендуется Python 3.6.8](https://www.python.org/downloads/)|

    <sup>*</sup>Активные LTS и техническое обслуживание LTS версии (8.11.1 и 10.14.1 рекомендуется).

### <a name="configure-the-project-to-run-locally"></a>Настройка проекта для локального выполнения

Время выполнения функций использует учетную запись хранения Azure внутренне для всех типов триггеров, кроме HTTP и webhooks. Поэтому необходимо настроить ключ **Values.AzureWebJobsStorage** в действительную строку подключения к учетной записи Хранилища Azure.

В этом разделе используется [расширение хранилища Azure для Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestorage) с [Azure Storage Explorer](https://storageexplorer.com/) для подключения и извлечения строки подключения к хранилищу.

Чтобы задать строку подключения к учетной записи хранения, выполните следующие действия:

1. В Visual Studio, открыть **Cloud Explorer**, расширить **учетную запись** > хранения**вашей учетной записи хранения,** а затем выбрать **Свойства** и скопировать **значение основной строки подключения.**

2. В своем проекте откройте файл local.settings.json и задайте в качестве значения ключа **AzureWebJobsStorage** скопированную вами строку подключения.

3. Повторите предыдущий шаг, чтобы добавить уникальные ключи в массив **Values** для всех других подключений, которые необходимы для функций.

Для получения дополнительной информации смотрите [файл локальных настроек](#local-settings-file).

### <a name="debugging-functions-locally"></a>Функции локального отладки  

Чтобы отладить свои функции, выберите F5. Если вы еще не скачали [основные инструменты][Azure Functions Core Tools,]вам будет предложено сделать это. При установке и запуске Основных инструментов в Терминале отображается выход. Это то же самое, что и выполнение команды `func host start` Core Tools из терминала, но с дополнительными задачами сборки и прикрепленным отладчиком.  

При запуске проекта можно запускать функции по мере развертывания проекта в Azure. Когда проект работает в режиме отладки, точки разрыва, как и ожидалось, выстные точки.

URL-адрес запроса для триггеров HTTP отображается на выходе в Терминале. Функции ключей для триггеров HTTP не используются при локальном запуске проекта. Дополнительные сведения см. в статье [Методика тестирования кода с помощью Функций Azure](functions-test-a-function.md).  

Чтобы узнать больше, смотрите [Работа с функциями Azure Основные инструменты][Azure Функции Основные инструменты.]

[!INCLUDE [functions-local-settings-file](../../includes/functions-local-settings-file.md)]

По умолчанию эти параметры не перемещаются автоматически при публикации проекта в Azure. После завершения публикации вам предоставляется возможность публикации настроек с локального.settings.json на приложение функции в Azure. Чтобы узнать больше, смотрите [настройки приложения Publish](#publish-application-settings).

Значения **ConnectionStrings** никогда не публикуются.

Значения параметров приложения функции также могут быть прочитаны в коде как переменные среды. Для получения дополнительной информации ознакомьтесь с разделами переменных среды в этих справочных статьях, специфичных для языка:

* [Предкомпилированный код C#](functions-dotnet-class-library.md#environment-variables)
* [Скрипт C# (.csx)](functions-reference-csharp.md#environment-variables)
* [Java](functions-reference-java.md#environment-variables)
* [Javascript](functions-reference-node.md#environment-variables)

## <a name="application-settings-in-azure"></a>Настройки приложений в Azure

Настройки в файле local.settings.json в проекте должны быть такими же, как и настройки приложения в приложении функции в Azure. Любые настройки, добавленные в local.settings.json, также должны быть добавлены в приложение функции в Azure. Эти настройки не загружаются автоматически при публикации проекта. Аналогичным образом, все настройки, которые вы создаете в приложении функции [на портале,](functions-how-to-use-azure-function-app-settings.md#settings) должны быть загружены в ваш локальный проект.

### <a name="publish-application-settings"></a>Публикация настроек приложения

Самый простой способ опубликовать необходимые настройки в приложении функции в Azure — использовать ссылку **настроек Upload,** которая появляется после публикации проекта:

![Настройки приложения загрузки](./media/functions-develop-vs-code/upload-app-settings.png)

Вы также можете опубликовать настройки с помощью **функций Azure: Загрузить команду локальной настройки** в палитру команд. Можно добавить отдельные настройки в настройки приложения в Azure, используя **функции Azure: Добавить новую команду настройки.**

> [!TIP]
> Не забудьте сохранить файл local.settings.json перед публикацией.

Если локальный файл зашифрован, он расшифровывается, публикуется и снова зашифрован. Если в этих двух местах есть параметры, которые имеют противоречивые значения, вам предлагается выбрать, как действовать дальше.

Просмотр существующих настроек приложения в области **Azure: Функции,** расширяя подписку, приложение функций и **настройки приложений.**

![Просмотр настроек приложения функции в коде Visual Studio](./media/functions-develop-vs-code/view-app-settings.png)

### <a name="download-settings-from-azure"></a>Настройки загрузки из Azure

Если вы создали настройки приложений в Azure, вы можете загрузить их в файл local.settings.json с помощью команды **Azure Functions: Download Remote Settings.**

Как и при загрузке, если локальный файл зашифрован, он расшифровывается, обновляется и шифруется снова. Если в этих двух местах есть параметры, которые имеют противоречивые значения, вам предлагается выбрать, как действовать дальше.

## <a name="monitoring-functions"></a>Мониторинг функций

При [локальном запуске функций](#run-functions-locally)данные журнала передаются на консоль Терминала. Вы также можете получить данные журнала, когда проект Функции работает в функциональном приложении в Azure. Вы можете либо подключиться к потоковым журналам в Azure, чтобы увидеть данные журнала в режиме реального времени, либо включить Application Insights для более полного понимания того, как ведет себя приложение функции.

### <a name="streaming-logs"></a>Журналы потоковой передачи.

При разработке приложения часто полезно видеть информацию о регистрации в практически реальном времени. Можно просмотреть поток файлов журнала, генерируемых функциями. Этот вывод является примером потоковых журналов для запроса на функцию HTTP-триггера:

![Вывод потоковых журналов для триггера HTTP](media/functions-develop-vs-code/streaming-logs-vscode-console.png)

Чтобы узнать больше, смотрите [потоковых журналов](functions-monitoring.md#streaming-logs).

[!INCLUDE [functions-enable-log-stream-vs-code](../../includes/functions-enable-log-stream-vs-code.md)]

> [!NOTE]
> Потоковые журналы поддерживают только один экземпляр хоста функций. Когда функция масштабируется до нескольких экземпляров, данные из других экземпляров не отображались в потоке журнала. [Live Metrics Stream](../azure-monitor/app/live-stream.md) в Application Insights поддерживает несколько экземпляров. В то время как также в почти реальном времени, потоковая аналитика основана на [выборочных данных.](functions-monitoring.md#configure-sampling)

### <a name="application-insights"></a>Application Insights

Мы рекомендуем следить за выполнением функций, интегрируя приложение функции с Application Insights. При создании приложения функции на портале Azure эта интеграция происходит по умолчанию. При создании приложения функции во время публикации Visual Studio необходимо самостоятельно интегрировать Application Insights.

[!INCLUDE [functions-connect-new-app-insights.md](../../includes/functions-connect-new-app-insights.md)]

Дополнительные сведения см. в статье [Мониторинг Функций Azure](functions-monitoring.md).

## <a name="c-script-projects"></a>C\# проектов сценария

По умолчанию все проекты C-класса создаются по мере [создания компилированных проектов библиотеки классов.](functions-dotnet-class-library.md) Если вместо этого вы предпочитаете работать с проектами скриптов Сз, необходимо выбрать скрипт C'в качестве языка по умолчанию в настройках расширения Azure Functions:

1. Выберите**настройки****предпочтений** >  **файлов.** > 

1. Перейти к **настройкам** > пользователя**Расширения** > **Функции Azure**.

1. Выберите **Си-Скрипт** из **функции Azure: Язык проекта**.

После выполнения этих шагов вызовы, сделанные в `--csx` базовые основные инструменты, включают опцию, которая генерирует и публикует файлы проекта C's (.csx). При указании этого языка по умолчанию все проекты, которые создаются по умолчанию, для проектов скриптов C'. При установлении значения по умолчанию не предлагается выбрать язык проекта. Для создания проектов на других языках необходимо изменить эту настройку или удалить ее из файла user settings.json. После удаления этой настройки при создании проекта вам снова предлагается выбрать язык.

## <a name="command-palette-reference"></a>Ссылка на палитру командования

Расширение Azure Functions обеспечивает полезный графический интерфейс в области для взаимодействия с функциями приложений в Azure. Такая же функциональность доступна и в качестве команд в командной палитре (F1). Эти команды Azure Functions доступны:

|Команда функций Azure  | Описание  |
|---------|---------|
|**Добавление новых настроек**  |  Создает новую настройку приложения в Azure. Чтобы узнать больше, смотрите [настройки приложения Publish](#publish-application-settings). Возможно, вам также придется [загрузить эту настройку в локальное настройки.](#download-settings-from-azure) |
| **Источник развертывания для настройки** | Подключает приложение функции в Azure к локальному репозиторию Git. Чтобы узнать больше, смотрите [непрерывное развертывание для функций Azure.](functions-continuous-deployment.md) |
| **Подключение к репозиторию GitHub** | Подключает приложение функции к репозиторию GitHub. |
| **Url функции копирования** | Получает удаленный URL-адрес функции HTTP-триггера, запущенной в Azure. Чтобы узнать больше, [см.](#get-the-url-of-the-deployed-function) |
| **Создание функционального приложения в Azure** | Создает новое функциональное приложение в подписке в Azure. Чтобы узнать больше, смотрите раздел о том, как [опубликовать новое приложение функции в Azure](#publish-to-azure).        |
| **Настройки расшифровки** | Расшифровывает [локальные настройки,](#local-settings-file) зашифрованные **функциями Azure: Настройки шифрования.**  |
| **Удаление функция App** | Удаляет функциональное приложение из подписки в Azure. Когда в плане Службы приложения нет других приложений, вам предоставляется возможность удалить и это. Другие ресурсы, такие как учетные записи хранения и группы ресурсов, не удаляются. Чтобы удалить все ресурсы, следует [удалить группу ресурсов.](functions-add-output-binding-storage-queue-vs-code.md#clean-up-resources) Ваш локальный проект не влияет. |
|**Функция удаления**  | Удаляет существующую функцию из приложения функции в Azure. Поскольку это удаление не влияет на локальный проект, вместо этого рассмотрите возможность удаления функции локально, а затем [переиздания проекта.](#republish-project-files) |
| **Удалить прокси** | Удаляет прокси-сервер Azure Functions из приложения функции Azure в Azure. Чтобы узнать больше о прокси-предсказательных функциях, смотрите [В работе с прокси-функциями Azure.](functions-proxies.md) |
| **Настройка удаления** | Удаляет настройки приложения функции в Azure. Это удаление не влияет на настройки в файле local.settings.json. |
| **Отключение от Репо**  | Удаляет [непрерывное](functions-continuous-deployment.md) соединение развертывания между приложением функции в Azure и хранилищем управления исходным источником. |
| **Скачать удаленные настройки** | Загружает настройки из выбранного приложения функции в Azure в файл local.settings.json. Если локальный файл зашифрован, он снова расшифровывается, обновляется и шифруется. Если в этих двух местах есть параметры, которые имеют противоречивые значения, вам предлагается выбрать, как действовать дальше. Не забудьте сохранить изменения в файле local.settings.json перед запуском этой команды. |
| **Настройки отсечения** | Изменяет значение существующей настройки приложения функции в Azure. Эта команда не влияет на настройки в файле local.settings.json.  |
| **Настройки шифрования** | Шифрует отдельные `Values` элементы в массиве в [локальных настройках.](#local-settings-file) В этом `IsEncrypted` файле также `true`устанавливается, который указывает, что локальное время выполнения будет расшифровывать настройки перед их использованием. Шифрование локальных настроек для снижения риска утечки ценной информации. В Azure настройки приложения всегда хранятся в зашифрованном виде. |
| **Выполнить функцию сейчас** | Вручную запускает [функцию срабатывания таймерв](functions-bindings-timer.md) в Azure. Эта команда используется для тестирования. Чтобы узнать больше о запуске не http функций в Azure, [см.](functions-manually-run-non-http.md) |
| **Инициализация проекта для использования с кодом VS** | Добавляет необходимые файлы проекта Visual Studio Code в существующий проект Функции. Используйте эту команду для работы с проектом, созданным с помощью основных инструментов. |
| **Установка или обновление основных инструментов функций Azure** | Устанавливает или обновляет [основные инструменты Функции Azure,]которые используются для локального выполнения функций. |
| **Повторное развертывание**  | Позволяет передислоцировать файлы проекта из подключенного репозитория Git в определенное развертывание в Azure. Чтобы переиздать локальные обновления из Visual Studio Code, [переиздайте свой проект.](#republish-project-files) |
| **Настройки переименования** | Изменяет ключевое имя существующей настройки приложения функции в Azure. Эта команда не влияет на настройки в файле local.settings.json. После переименования настроек в Azure следует [загрузить эти изменения в локальный проект.](#download-settings-from-azure) |
| **"Перезапуск"** | Перезапускает функциональное приложение в Azure. Развертывание обновлений также перезапускает функциональное приложение. |
| **Установите AzureWebJobsStorage**| Устанавливает значение настройки `AzureWebJobsStorage` приложения. Эта настройка требуется функциями Azure Functions. Он устанавливается при создании приложения функции в Azure. |
| **Начало** | Запускает приложение остановленной функции в Azure. |
| **Запуск потоковых журналов** | Запускает потоковые журналы для приложения функции в Azure. Используйте потоковые журналы во время удаленного устранения неполадок в Azure, если вам необходимо видеть информацию о регистрации в почти реальном времени. Чтобы узнать больше, смотрите [потоковых журналов](#streaming-logs). |
| **Остановить** | Останавливает функциональное приложение, работая в Azure. |
| **Остановить потоковые журналы** | Остановка потоковых журналов для приложения функции в Azure. |
| **Переключение как настройка слота** | При включении настройка приложения сохраняется для заданного слота развертывания. |
| **Удалите основные инструменты функций Azure** | Удаляет основные инструменты функций Azure, что требуется для расширения. |
| **Загрузка локальных настроек** | Загружает настройки из файла local.settings.json в выбранное приложение функции в Azure. Если локальный файл зашифрован, он расшифровывается, загружается и зашифровывается снова. Если в этих двух местах есть параметры, которые имеют противоречивые значения, вам предлагается выбрать, как действовать дальше. Не забудьте сохранить изменения в файле local.settings.json перед запуском этой команды. |
| **Просмотр коммита в GitHub** | Отображает последний коммит в определенном развертывании, когда приложение функции подключено к репозиторию. |
| **Просмотр журналов развертывания** | Показывает журналы для конкретного развертывания в приложении функции в Azure. |

## <a name="next-steps"></a>Дальнейшие действия

Подробнее о основных инструментах Функции Azure можно узнать о основных инструментах Azure, смотрите в [работе с основными инструментами функций Azure.](functions-run-local.md)

Дополнительные сведения о разработке функций, таких как библиотеки класса .NET, см. в статье [Справочник разработчика C# по функциям Azure](functions-dotnet-class-library.md). В этой статье также приводятся ссылки на примеры использования атрибутов для объявления различных типов привязок, поддерживаемых функциями Azure.

[Расширение "Функции Azure" для Visual Studio Code]: https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions
[Основные инструменты Azure функции]: functions-run-local.md
