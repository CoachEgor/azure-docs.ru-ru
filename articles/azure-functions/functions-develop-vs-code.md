---
title: Разработка функций Azure с помощью Visual Studio Code | Документация Майкрософт
description: Узнайте, как разрабатывать и тестировать функции Azure с помощью расширения "функции Azure" для Visual Studio Code.
author: ggailey777
manager: gwallace
ms.service: azure-functions
ms.topic: conceptual
ms.date: 08/21/2019
ms.author: glenga
ms.openlocfilehash: 5aac99dbeb6ebd7c0b131df5027daa352c30f3bd
ms.sourcegitcommit: a22cb7e641c6187315f0c6de9eb3734895d31b9d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2019
ms.locfileid: "74082799"
---
# <a name="develop-azure-functions-by-using-visual-studio-code"></a>Разрабатывайте функции Azure с помощью Visual Studio Code

[Расширение "функции Azure" для Visual Studio Code] позволяет локально разрабатывать функции и развертывать их в Azure. Если вы впервые сталкиваетесь с функциями Azure, дополнительные сведения см. в статье [Общие сведения о Функциях Azure](functions-overview.md).

Расширение функций Azure предоставляет следующие преимущества:

* Создание, редактирование и выполнение функций на локальном компьютере для разработки.
* Публикация проектов Функций Azure непосредственно в Azure.
* Создавайте свои функции на разных языках, используя преимущества Visual Studio Code.

Расширение можно использовать со следующими языками, которые поддерживаются средой выполнения функций Azure версии 2. x:

* [C#компилирует](functions-dotnet-class-library.md)
* [ C#*скрипта](functions-reference-csharp.md) <sup> </sup>
* [JavaScript](functions-reference-node.md)
* [Java](functions-reference-java.md)
* [PowerShell](functions-reference-powershell.md)
* [Python](functions-reference-python.md)

<sup>*</sup> Требует, чтобы [скрипт C# был установлен в качестве языка проекта по умолчанию](#c-script-projects).

В этой статье примеры в настоящее время доступны только для функций JavaScript (Node. js) C# и библиотеки классов.  

Эта статья содержит сведения об использовании расширения "функции Azure" для разработки функций и их публикации в Azure. Перед прочтением этой статьи необходимо [создать первую функцию с помощью Visual Studio Code](functions-create-first-function-vs-code.md).

> [!IMPORTANT]
> Не следует смешивать разработку локальной разработки и портала для одного приложения-функции. При публикации из локального проекта в приложение-функцию любые функции, разработанные на портале, будут перезаписаны в процессе развертывания.

## <a name="prerequisites"></a>предварительным требованиям

Перед установкой и запуском расширения [функцииAzure для функций azure][расширение "функции azure" для visual studio code]необходимо соблюдать следующие требования.

* [Visual Studio Code](https://code.visualstudio.com/) , установленный на одной из [поддерживаемых платформ](https://code.visualstudio.com/docs/supporting/requirements#_platforms).

* Активная подписка Azure.

[!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

Другие необходимые ресурсы, например учетная запись хранения Azure, создаются в подписке при [публикации с помощью Visual Studio Code](#publish-to-azure).

> [!IMPORTANT]
> Вы можете разрабатывать функции локально и публиковать их в Azure, не запуская и не запуская их локально. Для локального запуска функций необходимо выполнить некоторые дополнительные требования, включая автоматическое скачивание Azure Functions Core Tools. Дополнительные сведения см. в разделе [Дополнительные требования к локальному запуску проекта](#additional-requirements-for-running-a-project-locally).

[!INCLUDE [functions-install-vs-code-extension](../../includes/functions-install-vs-code-extension.md)]

## <a name="create-an-azure-functions-project"></a>Создание проекта Функций Azure

Расширение функции позволяет создать проект приложения-функции вместе с первой функцией. В следующих шагах показано, как создать функцию, активируемую HTTP, в новом проекте функций. [Триггер HTTP](functions-bindings-http-webhook.md) — это простейший шаблон триггера функции для демонстрации.

1. Из **Azure: функции**выберите значок **создать функцию** :

    ![Создание функции](./media/functions-develop-vs-code/create-function.png)

1. Выберите папку для проекта приложения-функции, а затем **выберите язык для проекта функции**.

1. Выберите шаблон функции **триггера HTTP** или нажмите кнопку **пропустить пока** , чтобы создать проект без функции. Вы всегда можете [Добавить функцию в проект](#add-a-function-to-your-project) позже.

    ![Выбор шаблона функции, активируемой HTTP-запросом](./media/functions-develop-vs-code/create-function-choose-template.png)

1. Введите **HTTPTrigger** в качестве имени функции и нажмите клавишу ВВОД, а затем выберите авторизация **функции** . Этот уровень авторизации требует предоставления [ключа функции](functions-bindings-http-webhook.md#authorization-keys) при вызове конечной точки функции.

    ![Выбор авторизации функции](./media/functions-develop-vs-code/create-function-auth.png)

    Функция создается на выбранном языке и в шаблоне для функции, активируемой HTTP.

    ![Шаблон функции, активируемой HTTP, в Visual Studio Code](./media/functions-develop-vs-code/new-function-full.png)

Шаблон проекта создает проект на выбранном языке и устанавливает необходимые зависимости. Для любого языка в новом проекте есть следующие файлы:

* **host.json**: позволяет настроить узел Функций. Эти параметры применяются при локальном запуске функций и при их запуске в Azure. Дополнительные сведения см. в [справочной статье о host.json](functions-host-json.md).

* **Local. Settings. JSON**: сохраняет параметры, используемые при локальном запуске функций. Эти параметры используются только при локальном запуске функций. Дополнительные сведения см. в разделе [локальный файл параметров](#local-settings-file).

    >[!IMPORTANT]
    >Так как файл Local. Settings. JSON может содержать секреты, его необходимо исключить из системы управления версиями проекта.

На этом этапе можно добавить входные и выходные привязки к функции, [изменив файл function. JSON](#add-a-function-to-your-project) или [добавив параметр в функцию библиотеки C# классов](#add-a-function-to-your-project).

[В проект также можно добавить новую функцию](#add-a-function-to-your-project).

## <a name="install-binding-extensions"></a>Установка расширений привязки

За исключением триггеров HTTP и таймера, привязки реализуются в пакетах расширений. Необходимо установить пакеты расширений для необходимых триггеров и привязок. Процесс установки расширений привязок зависит от языка проекта.

# <a name="javascripttabnodejs"></a>[JavaScript](#tab/nodejs)

[!INCLUDE [functions-extension-bundles](../../includes/functions-extension-bundles.md)]

# <a name="ctabcsharp"></a>[C\#](#tab/csharp)

Выполните команду [DotNet Add Package](/dotnet/core/tools/dotnet-add-package) в окне терминала, чтобы установить пакеты расширений, необходимые в проекте. Следующая команда устанавливает расширение службы хранилища Azure, которое реализует привязки для хранилища BLOB-объектов, очередей и таблиц.

```bash
dotnet add package Microsoft.Azure.WebJobs.Extensions.Storage --version 3.0.4
```

---

## <a name="add-a-function-to-your-project"></a>Добавление функции в проект

Новую функцию можно добавить в существующий проект, используя одну из стандартных функций шаблоны триггеров. Чтобы добавить новый триггер функции, выберите F1, чтобы открыть палитру команд, а затем найдите и выполните команду **функции Azure: CREATE FUNCTION**. Следуйте инструкциям на экране, чтобы выбрать тип триггера и определить необходимые атрибуты триггера. Если для триггера требуется ключ доступа или строка подключения для подключения к службе, перед созданием триггера функции подготовьте ее.

Результаты этого действия зависят от языка проекта:

# <a name="javascripttabnodejs"></a>[JavaScript](#tab/nodejs)

В проекте будет создана новая папка. В этой папке содержится новый файл function. JSON и новый файл кода JavaScript.

# <a name="ctabcsharp"></a>[C\#](#tab/csharp)

В проект C# будет добавлен новый файл библиотеки классов (CS).

---

## <a name="add-input-and-output-bindings"></a>Добавление входных и выходных привязок

Вы можете расширить функцию, добавив входные и выходные привязки. Процесс добавления привязок зависит от языка проекта. Дополнительные сведения о привязках см. в статье [Основные понятия триггеров и привязок в функциях Azure](functions-triggers-bindings.md).

В следующих примерах выполняется подключение к очереди хранилища с именем `outqueue`, где строка подключения для учетной записи хранения задается в параметре приложения `MyStorageConnection` в local. Settings. JSON.

# <a name="javascripttabnodejs"></a>[JavaScript](#tab/nodejs)

Visual Studio Code позволяет добавлять привязки в файл function. JSON, следуя удобному набору запросов. Чтобы создать привязку, щелкните правой кнопкой мыши (Ctrl + щелчок в macOS) файл **Function. JSON** в папке функции и выберите **Добавить привязку**:

![Добавление привязки к существующей функции JavaScript ](media/functions-develop-vs-code/function-add-binding.png)

Ниже приведены примеры запросов для определения новой выходной привязки хранилища.

| prompt | Значение | ОПИСАНИЕ |
| -------- | ----- | ----------- |
| **Select binding direction** (Выберите направление привязки) | `out` | Привязка является выходной привязкой. |
| **Выбор привязки с направлением** | `Azure Queue Storage` | Привязка является привязкой очереди службы хранилища Azure. |
| **The name used to identify this binding in your code** (Имя, используемое для идентификации этой привязки в коде) | `msg` | Имя, которое используется для идентификации параметров привязки, указанных в коде. |
| **The queue to which the message will be sent** (Очередь, в которую будет отправляться сообщение) | `outqueue` | Имя очереди, в которой записывается привязка. Если *queueName* не существует, то при первом использовании этот параметр будет создан привязкой. |
| **Select setting from "local.setting.json"** (Выберите параметр из файла local.setting.json) | `MyStorageConnection` | Имя параметра приложения, содержащего строку подключения для учетной записи хранения. Параметр `AzureWebJobsStorage` содержит строку подключения для учетной записи хранения, созданной с помощью приложения функции. |

В этом примере в массив `bindings` в файле Function. JSON добавляется следующая привязка:

```javascript
{
    "type": "queue",
    "direction": "out",
    "name": "msg",
    "queueName": "outqueue",
    "connection": "MyStorageConnection"
}
```

Можно также добавить одно и то же определение привязки непосредственно в функцию Function. JSON.

В коде функции доступ к привязке `msg` осуществляется из `context`, как показано в следующем примере:

```javascript
context.bindings.msg = "Name passed to the function: " req.query.name;
```

Дополнительные сведения см. в справочнике по [выходной привязке хранилища очередей](functions-bindings-storage-queue.md#output---javascript-example) .

# <a name="ctabcsharp"></a>[C\#](#tab/csharp)

Обновите метод функции, чтобы добавить следующий параметр в определение метода `Run`:

```cs
[Queue("outqueue"),StorageAccount("MyStorageConnection")] ICollector<string> msg
```

Для этого кода требуется добавить следующую инструкцию `using`:

```cs
using Microsoft.Azure.WebJobs.Extensions.Storage;
```

---

Параметр `msg` относится к типу `ICollector<T>`, который представляет собой коллекцию сообщений, записываемых в выходную привязку после завершения функции. В коллекцию добавляется одно или несколько сообщений. Эти сообщения отправляются в очередь после завершения функции.

Дополнительные сведения см. в документации по [выходной привязке хранилища очередей](functions-bindings-storage-queue.md#output---c-example) .

[!INCLUDE [Supported triggers and bindings](../../includes/functions-bindings.md)]

## <a name="publish-to-azure"></a>Публикация в Azure

Visual Studio Code позволяет публиковать проект функций непосредственно в Azure. При этом вы создаете приложение-функцию и связанные ресурсы в своей подписке Azure. Приложение-функция обеспечивает контекст выполнения функций. Проект упаковывается и развертывается в новом приложении-функции в вашей подписке Azure.

При публикации из Visual Studio Code в новое приложение-функцию в Azure предлагается как быстрый, так и расширенный путь создания приложения-функции. 

При публикации из Visual Studio Code Вы получаете преимущества технологии [развертывания ZIP](functions-deployment-technologies.md#zip-deploy) . 

### <a name="quick-function-app-create"></a>Быстрое создание приложения функции

Когда вы выбираете пункт **+ создать новое приложение функции в Azure...** , расширение автоматически создает значения для ресурсов Azure, необходимых для приложения функции. Эти значения основаны на выбранном имени приложения функции. Пример использования значений по умолчанию для публикации проекта в новом приложении-функции в Azure см. в [статье Краткое руководство по Visual Studio Code](functions-create-first-function-vs-code.md#publish-the-project-to-azure).

Если необходимо предоставить явные имена для созданных ресурсов, необходимо выбрать расширенный путь создания.

### <a name="enable-publishing-with-advanced-create-options"></a>Публикация проекта в новом приложении-функции в Azure с помощью дополнительных параметров

Следующие шаги публикуют проект в новом приложении-функции, созданном с дополнительными параметрами создания:

1. В области **Azure: функции** выберите значок **развернуть в приложение-функция** .

    ![Параметры приложения-функции](./media/functions-develop-vs-code/function-app-publish-project.png)

1. Если вы еще не вошли в систему, вам будет предложено **войти в Azure**. Вы также можете выбрать **Создать бесплатную учетную запись Azure**. После входа в систему из браузера вернитесь к Visual Studio Code.

1. Если у вас несколько подписок, **выберите подписку** для приложения-функции, а затем щелкните **+ создать новый приложение-функция в Azure... _Дополнительно_** . Этот _дополнительный_ параметр обеспечивает более широкие возможности управления ресурсами, создаваемыми в Azure. 

1. Следуя инструкциям, укажите следующие сведения:

    | prompt | Значение | ОПИСАНИЕ |
    | ------ | ----- | ----------- |
    | Выбор приложения функции в Azure | Создание нового приложение-функция в Azure | В следующем запросе введите глобально уникальное имя, идентифицирующее новое приложение-функцию, а затем нажмите клавишу ВВОД. Допустимые символы для имени приложения-функции: `a-z`, `0-9` и `-`. |
    | Выберите ОС | Windows | Приложение функции выполняется в Windows. |
    | Выберите план размещения | План потребления | Используется [Размещение плана потребления](functions-scale.md#consumption-plan) на сервере. |
    | Выберите среду выполнения для нового приложения | Язык проекта | Среда выполнения должна соответствовать проекту, в котором выполняется публикация. |
    | Выберите группу ресурсов для новых ресурсов | Создать новую группу ресурсов | В следующем запросе введите имя группы ресурсов, например `myResourceGroup`, а затем нажмите клавишу ВВОД. Можно также выбрать существующую группу ресурсов. |
    | Выберите учетную запись хранения | Создание учетной записи хранения | В следующем запросе введите глобально уникальное имя для новой учетной записи хранения, используемой приложением-функцией, а затем нажмите клавишу ВВОД. Длина имени учетной записи хранения должна составлять от 3 до 24 символов и может содержать только цифры и строчные буквы. Можно также выбрать существующую учетную запись. |
    | Выберите расположение для новых ресурсов | region | Выберите расположение в ближайшем [регионе](https://azure.microsoft.com/regions/) или рядом с другими службами, к которым имеют доступ ваши функции. |

    После создания приложения-функции и применения пакета развертывания появится уведомление. Выберите **View Output** (Просмотреть выходные данные) в уведомлении, чтобы просмотреть результаты создания и развертывания ресурсов Azure.

## <a name="republish-project-files"></a>Повторная публикация файлов проекта

При настройке [непрерывного развертывания](functions-continuous-deployment.md)приложение-функция в Azure обновляется всякий раз, когда исходные файлы обновляются в подключенном исходном расположении. Рекомендуется непрерывное развертывание, но можно также повторно опубликовать обновления файлов проекта из Visual Studio Code.

> [!IMPORTANT]
> Публикация в существующее приложение-функцию перезаписывает содержимое этого приложения в Azure.

1. В Visual Studio Code выберите F1, чтобы открыть палитру команд. В палитре команд найдите и выберите **функции Azure: развертывание в приложение функции**.

1. Если вы еще не вошли в систему, вам будет предложено **войти в Azure**. После входа в браузере вернитесь к Visual Studio Code. Если у вас несколько подписок, **выберите подписку** , содержащую приложение-функцию.

1. Выберите существующее приложение функции в Azure. Когда вы будете предупреждать о перезаписи всех файлов в приложении функции, выберите **развернуть** , чтобы подтвердить предупреждение и продолжить.

Проект будет перестроен, переупакован и отправлен в Azure. Существующий проект заменяется новым пакетом, а приложение-функция перезапускается.

## <a name="get-the-url-of-the-deployed-function"></a>Получение URL-адреса развернутой функции

Чтобы вызвать функцию, активируемую HTTP, вам потребуется URL-адрес функции при его развертывании в приложении-функции. Этот URL-адрес включает все необходимые [ключи функций](functions-bindings-http-webhook.md#authorization-keys). Вы можете использовать расширение для получения этих URL-адресов для развернутых функций.

1. Выберите F1, чтобы открыть палитру команд, а затем найдите и выполните команду **функции Azure: Копировать URL-адрес функции**.

1. Следуйте инструкциям на экране, чтобы выбрать приложение-функцию в Azure, а затем — конкретный триггер HTTP, который требуется вызвать.

URL-адрес функции копируется в буфер обмена вместе с любыми необходимыми ключами, передаваемыми параметром запроса `code`. Используйте HTTP-инструмент для отправки запросов POST или браузер для запросов GET к удаленной функции.  

## <a name="run-functions-locally"></a>Запуск функций в локальной среде

Расширение "функции Azure" позволяет запускать проект функций на локальном компьютере разработки. Локальная среда выполнения — это та же среда выполнения, в которой размещается приложение-функция в Azure. Локальные параметры считываются из [файла local. Settings. JSON](#local-settings-file).

### <a name="additional-requirements-for-running-a-project-locally"></a>Дополнительные требования для локального запуска проекта

Для локального запуска проекта функций необходимо соблюдать следующие дополнительные требования.

* Установите версию 2. x [Azure functions Core Tools](functions-run-local.md#v2). Пакет основных средств загружается и устанавливается автоматически при локальном запуске проекта. Основные средства включают всю среду выполнения функций Azure, поэтому загрузка и установка могут занять некоторое время.

* Установите необходимые дополнительные средства для выбранного языка:

    | Язык | Требование |
    | -------- | --------- |
    | **C#** | [расширение C#](https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp);<br/>[Средства .NET Core CLI](https://docs.microsoft.com/dotnet/core/tools/?tabs=netcore2x)   |
    | **Java** | [Отладчик для расширения Java](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug)<br/>[Java 8](https://aka.ms/azure-jdks);<br/>[Maven 3 или более поздней версии](https://maven.apache.org/) |
    | **JavaScript** | [Node.js](https://nodejs.org/)<sup>*</sup> |  
    | **Python** | [расширение Python](https://marketplace.visualstudio.com/items?itemName=ms-python.python);<br/>Рекомендуемый [3.6.8 Python](https://www.python.org/downloads/)|

    <sup>*</sup>Активная версия LTS и версия Maintenance LTS (рекомендуются версии 8.11.1 и 10.14.1).

### <a name="configure-the-project-to-run-locally"></a>Настройка запуска проекта локально

Среда выполнения функций использует для внутренних целей учетную запись хранения Azure для всех типов триггеров, отличных от HTTP и веб-перехватчиков. Поэтому необходимо присвоить ключу **Values. AzureWebJobsStorage** строку подключения к допустимой учетной записи хранения Azure.

В этом разделе используется [расширение службы хранилища Azure для Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestorage) с [Обозреватель службы хранилища Azure](https://storageexplorer.com/) для подключения и получения строки подключения к хранилищу.

Чтобы задать строку подключения к учетной записи хранения, выполните следующие действия:

1. В Visual Studio откройте **Cloud Explorer**, разверните **учетную запись хранения** > **учетной записи хранения**, а затем выберите **Свойства** и скопируйте **основное значение строки подключения** .

2. В своем проекте откройте файл local.settings.json и задайте в качестве значения ключа **AzureWebJobsStorage** скопированную вами строку подключения.

3. Повторите предыдущий шаг, чтобы добавить уникальные ключи в массив **Values** для всех других подключений, которые необходимы для функций.

Дополнительные сведения см. в разделе [локальный файл параметров](#local-settings-file).

### <a name="debugging-functions-locally"></a>Локальная отладка функций  

Чтобы выполнить отладку функций, нажмите клавишу F5. Если вы еще не скачали [основные средства][основные инструменты службы "функции azure"], вам будет предложено сделать это. После установки и запуска основных инструментов выходные данные отображаются в окне терминала. Это аналогично запуску команды `func host start` Core Tools из терминала, но с дополнительными задачами сборки и подключенным отладчиком.  

При запуске проекта вы можете запускать функции так же, как при развертывании проекта в Azure. Когда проект выполняется в режиме отладки, точки останова нападают Visual Studio Code, как и ожидалось.

URL-адрес запроса для триггеров HTTP отображается в выходных данных терминала. Функциональные ключи для триггеров HTTP не используются при локальном запуске проекта. Дополнительные сведения см. в статье [Методика тестирования кода с помощью Функций Azure](functions-test-a-function.md).  

Дополнительные сведения см. в разделе [Работа с Azure Functions Core Tools][основные инструменты службы "функции azure"].

[!INCLUDE [functions-local-settings-file](../../includes/functions-local-settings-file.md)]

По умолчанию эти параметры не переносятся автоматически при публикации проекта в Azure. После завершения публикации вы можете выбрать параметры публикации из файла local. Settings. JSON в приложение функции в Azure. Дополнительные сведения см. в разделе [Публикация параметров приложения](#publish-application-settings).

Значения **ConnectionStrings** никогда не публикуются.

Значения параметров приложения функции можно также считывать в коде в виде переменных среды. Дополнительные сведения см. в разделах переменные среды в следующих справочных статьях для конкретного языка:

* [Предкомпилированный код C#](functions-dotnet-class-library.md#environment-variables)
* [Сценарий C# (CSX)](functions-reference-csharp.md#environment-variables)
* [Java](functions-reference-java.md#environment-variables)
* [JavaScript](functions-reference-node.md#environment-variables)

## <a name="application-settings-in-azure"></a>Параметры приложения в Azure

Параметры в файле Local. Settings. JSON в проекте должны совпадать с параметрами приложения в приложении функции в Azure. Все параметры, добавляемые в local. Settings. JSON, также должны быть добавлены в приложение функции в Azure. Эти параметры не передаются автоматически при публикации проекта. Аналогичным образом все параметры, создаваемые в приложении функции [на портале](functions-how-to-use-azure-function-app-settings.md#settings) , должны быть загружены в локальный проект.

### <a name="publish-application-settings"></a>Опубликовать параметры приложения

Самый простой способ опубликовать необходимые параметры в приложении-функции в Azure — использовать ссылку **Отправить параметры** , которая появляется после публикации проекта.

![Отправка параметров приложения](./media/functions-develop-vs-code/upload-app-settings.png)

Параметры можно также опубликовать с помощью команды **функции Azure: отправить локальный параметр** в палитре команд. Вы можете добавить отдельные параметры в параметры приложения в Azure с помощью команды " **функции Azure": добавить новый параметр** .

> [!TIP]
> Не забудьте сохранить файл Local. Settings. JSON перед его публикацией.

Если локальный файл зашифрован, он расшифровывается, публикуется и шифруется снова. Если имеются параметры, имеющие конфликтующие значения в двух расположениях, вам будет предложено выбрать способ продолжения.

Просмотрите существующие параметры приложения в области **Azure: функции** , развернув подписку, приложение функции и **Параметры приложения**.

![Просмотр параметров приложения функции в Visual Studio Code](./media/functions-develop-vs-code/view-app-settings.png)

### <a name="download-settings-from-azure"></a>Скачать параметры из Azure

Если вы создали параметры приложения в Azure, их можно скачать в файл Local. Settings. JSON с помощью **функции Azure: скачать удаленные параметры** .

Как и при передаче, если локальный файл зашифрован, он расшифровывается, обновляется и шифруется снова. Если имеются параметры, имеющие конфликтующие значения в двух расположениях, вам будет предложено выбрать способ продолжения.

## <a name="monitoring-functions"></a>Мониторинг функций

При [локальном запуске функций](#run-functions-locally)данные журнала передаются в консоль терминала. Вы также можете получать данные журнала при выполнении проекта функций в приложении-функции в Azure. Вы можете подключиться к журналам потоковой передачи в Azure, чтобы просмотреть данные журнала практически в реальном времени, или включить Application Insights, чтобы получить более полное представление о том, как работает приложение-функция.

### <a name="streaming-logs"></a>Журналы потоковой передачи.

При разработке приложения часто бывает удобно просматривать данные журнала практически в реальном времени. Можно просмотреть поток файлов журнала, создаваемых функциями. Эти выходные данные являются примером журналов потоковой передачи для запроса к функции, активируемой HTTP:

![Выходные данные журналов потоковой передачи для триггера HTTP](media/functions-develop-vs-code/streaming-logs-vscode-console.png)

Дополнительные сведения см. в разделе [Streaming Logs](functions-monitoring.md#streaming-logs).

[!INCLUDE [functions-enable-log-stream-vs-code](../../includes/functions-enable-log-stream-vs-code.md)]

> [!NOTE]
> Журналы потоковой передачи поддерживают только один экземпляр узла функций. Если функция масштабируется до нескольких экземпляров, данные из других экземпляров не отображаются в потоке журнала. [Live Metrics Stream](../azure-monitor/app/live-stream.md) в Application Insights поддерживает несколько экземпляров. Хотя потоковая аналитика также находится практически в реальном времени, она основана на [данных выборки](functions-monitoring.md#configure-sampling).

### <a name="application-insights"></a>Application Insights

Мы рекомендуем отслеживать выполнение функций, интегрируя приложение функции с Application Insights. При создании приложения-функции в портал Azure такая интеграция выполняется по умолчанию. При создании приложения функции во время публикации Visual Studio необходимо интегрировать Application Insights самостоятельно.

[!INCLUDE [functions-connect-new-app-insights.md](../../includes/functions-connect-new-app-insights.md)]

Дополнительные сведения см. в статье [Мониторинг Функций Azure](functions-monitoring.md).

## <a name="c-script-projects"></a>Проекты скриптов C\#

По умолчанию все C# проекты создаются как [ C# скомпилированные проекты библиотеки классов](functions-dotnet-class-library.md). Если вместо этого вы предпочитаете C# работать с проектами скриптов, в параметрах расширения функций Azure необходимо выбрать C# скрипт в качестве языка по умолчанию:

1. Выберите **файл** > **предпочтения** > **Параметры**.

1. Перейдите в раздел **Параметры пользователя** > **расширения** > **функции Azure**.

1. Выберите **Сценарий C #** в **функции Azure: язык проекта**.

После выполнения этих действий вызовы к базовым основным инструментам включают параметр `--csx`, который создает и публикует файлы проекта C# скрипта (. CSX). Если указан этот язык по умолчанию, все проекты, создаваемые по умолчанию, будут создавать скрипты для C# проектов. При установке значения по умолчанию не будет предложено выбрать язык проекта. Чтобы создать проекты на других языках, необходимо изменить этот параметр или удалить его из файла User Settings. JSON. После удаления этого параметра появится запрос на выбор языка при создании проекта.

## <a name="command-palette-reference"></a>Справочник по палитре команд

Расширение "функции Azure" предоставляет полезный графический интерфейс в области для взаимодействия с приложениями-функциями в Azure. Те же функциональные возможности доступны и в виде команд в палитре команд (F1). Доступны следующие команды функций Azure:

|Команда "функции Azure"  | ОПИСАНИЕ  |
|---------|---------|
|**Добавить новые параметры**  |  Создает новый параметр приложения в Azure. Дополнительные сведения см. в разделе [Публикация параметров приложения](#publish-application-settings). Также может потребоваться [скачать этот параметр в локальные параметры](#download-settings-from-azure). |
| **Настройка источника развертывания** | Подключает приложение-функцию в Azure к локальному репозиторию Git. Дополнительные сведения см. в статье [непрерывное развертывание для функций Azure](functions-continuous-deployment.md). |
| **Подключение к репозиторию GitHub** | Подключает приложение-функцию к репозиторию GitHub. |
| **Копировать URL-адрес функции** | Возвращает удаленный URL-адрес функции, активируемой по HTTP, которая выполняется в Azure. Дополнительные сведения см. в разделе [Получение URL-адреса развернутой функции](#get-the-url-of-the-deployed-function). |
| **Создание приложения функции в Azure** | Создает новое приложение-функцию в подписке в Azure. Дополнительные сведения см. в разделе о [публикации в новом приложении-функции в Azure](#publish-to-azure).        |
| **Параметры расшифровки** | Расшифровывает [локальные параметры](#local-settings-file) , которые были зашифрованы с помощью **функций Azure: шифрование параметров**.  |
| **Удалить приложение-функция** | Удаляет приложение-функцию из подписки в Azure. Если в плане службы приложений нет других приложений, вы можете также удалить его. Другие ресурсы, например учетные записи хранения и группы ресурсов, не удаляются. Чтобы удалить все ресурсы, необходимо [Удалить группу ресурсов](functions-add-output-binding-storage-queue-vs-code.md#clean-up-resources). Ваш локальный проект не затрагивается. |
|**Удалить функцию**  | Удаляет существующую функцию из приложения-функции в Azure. Поскольку это удаление не влияет на локальный проект, вместо этого рекомендуется удалить функцию локально, а затем [повторно опубликовать проект](#republish-project-files). |
| **Удаление прокси-сервера** | Удаляет прокси-сервер функций Azure из приложения функции в Azure. Дополнительные сведения об учетных записях-посредниках см. в разделе [Работа с прокси-серверы функций Azure](functions-proxies.md). |
| **Удалить параметр** | Удаляет параметр приложения-функции в Azure. Это удаление не влияет на параметры в файле Local. Settings. JSON. |
| **Отключиться от репозитория**  | Удаляет подключение [непрерывного развертывания](functions-continuous-deployment.md) между приложением-функцией в Azure и репозиторием системы управления версиями. |
| **Скачать удаленные параметры** | Скачивает параметры из выбранного приложения функции в Azure в файл Local. Settings. JSON. Если локальный файл зашифрован, он расшифровывается, обновляется и шифруется снова. Если имеются параметры, имеющие конфликтующие значения в двух расположениях, вам будет предложено выбрать способ продолжения. Не забудьте сохранить изменения в файле Local. Settings. JSON перед выполнением этой команды. |
| **Изменить параметры** | Изменяет значение существующего параметра приложения функции в Azure. Эта команда не влияет на параметры в файле Local. Settings. JSON.  |
| **Параметры шифрования** | Шифрует отдельные элементы в массиве `Values` в [локальных параметрах](#local-settings-file). В этом файле `IsEncrypted` также имеет значение `true`, которое указывает, что локальная среда выполнения будет расшифровывать параметры перед их использованием. Зашифруйте локальные параметры, чтобы снизить риск утечки ценных сведений. В Azure параметры приложения всегда хранятся в зашифрованном виде. |
| **Выполнить функцию сейчас** | Вручную запускает [функцию, активируемую таймером](functions-bindings-timer.md) , в Azure. Эта команда используется для тестирования. Дополнительные сведения о запуске функций, отличных от HTTP, см. в разделе [Запуск функции, не активируемой HTTP, вручную](functions-manually-run-non-http.md). |
| **Инициализация проекта для использования с VS Code** | Добавляет необходимые файлы проекта Visual Studio Code в существующий проект функций. Используйте эту команду для работы с проектом, созданным с помощью основных средств. |
| **Установка или обновление Azure Functions Core Tools** | Устанавливает или обновляет [Основные инструменты службы "Функции Azure"], который используется для локального запуска функций. |
| **Повторное развертывание**  | Позволяет повторно развертывать файлы проекта из подключенного репозитория Git в определенное развертывание в Azure. Чтобы повторно опубликовать локальные обновления из Visual Studio Code, [повторно опубликуйте проект](#republish-project-files). |
| **Переименование параметров** | Изменяет имя ключа существующего параметра приложения функции в Azure. Эта команда не влияет на параметры в файле Local. Settings. JSON. После переименования параметров в Azure необходимо [скачать эти изменения в локальный проект](#download-settings-from-azure). |
| **Перезапуск** | Перезапускает приложение функции в Azure. При развертывании обновлений также перезапускается приложение функции. |
| **Задать AzureWebJobsStorage**| Задает значение параметра приложения `AzureWebJobsStorage`. Этот параметр требуется для функций Azure. Он задается при создании приложения-функции в Azure. |
| **Начало** | Запускает остановленное приложение-функцию в Azure. |
| **Запуск журналов потоковой передачи** | Запускает журналы потоковой передачи для приложения функции в Azure. Используйте журналы потоковой передачи при удаленном устранении неполадок в Azure, если необходимо просмотреть данные журнала практически в реальном времени. Дополнительные сведения см. в разделе [Streaming Logs](#streaming-logs). |
| **Остановить** | Останавливает приложение-функцию, выполняющееся в Azure. |
| **Останавливает потоковую передачу журналов** | Останавливает журналы потоковой передачи для приложения функции в Azure. |
| **Переключить в качестве параметра слота** | Если этот параметр включен, обеспечивает сохранение параметров приложения для заданного слота развертывания. |
| **Azure Functions Core Tools удаления** | Удаляет Azure Functions Core Tools, необходимый для расширения. |
| **Отправка локальных параметров** | Передает параметры из файла local. Settings. JSON в выбранное приложение функции в Azure. Если локальный файл зашифрован, он расшифровывается, перегружается и шифруется снова. Если имеются параметры, имеющие конфликтующие значения в двух расположениях, вам будет предложено выбрать способ продолжения. Не забудьте сохранить изменения в файле Local. Settings. JSON перед выполнением этой команды. |
| **Просмотр фиксации в GitHub** | Показывает последнюю фиксацию в определенном развертывании, когда приложение-функция подключено к репозиторию. |
| **Просмотр журналов развертывания** | Показывает журналы для конкретного развертывания в приложении-функции в Azure. |

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о Azure Functions Core Tools см. в разделе [Работа с Azure functions Core Tools](functions-run-local.md).

Дополнительные сведения о разработке функций, таких как библиотеки класса .NET, см. в статье [Справочник разработчика C# по функциям Azure](functions-dotnet-class-library.md). В этой статье также приведены ссылки на примеры использования атрибутов для объявления различных типов привязок, поддерживаемых функциями Azure.

[Расширение "Функции Azure" для Visual Studio Code]: https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions
[Основные инструменты службы "Функции Azure"]: functions-run-local.md
