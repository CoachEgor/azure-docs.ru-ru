---
title: Запуск Функций Azure, не активируемых HTTP-запросом, вручную
description: Запуск Функций Azure, не активируемых HTTP-запросом, с использованием HTTP-запроса
author: craigshoemaker
ms.topic: article
ms.date: 12/12/2018
ms.author: cshoe
ms.openlocfilehash: 6571482d738549d2708fd8ab23eaf8c9f6fb1f70
ms.sourcegitcommit: df8b2c04ae4fc466b9875c7a2520da14beace222
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80892365"
---
# <a name="manually-run-a-non-http-triggered-function"></a>Запуск функции, не активируемой HTTP-запросом, вручную

В этой статье показано, как вручную запускать функцию, не активируемую HTTP-запросом, через HTTP-запрос в особом формате.

В некоторых контекстах может потребоваться запускать Функцию Azure по требованию, которая активируется косвенно.  Примерами косвенных триггеров являются [функции по расписанию](./functions-create-scheduled-function.md) или функции, которые запускаются как результат [действия другого ресурса](./functions-create-storage-blob-triggered-function.md). 

В следующем примере применяется [Postman](https://www.getpostman.com/), но вы можете использовать для отправки HTTP-запросов [cURL](https://curl.haxx.se/), [Fiddler](https://www.telerik.com/fiddler) или любой другой похожий инструмент.

## <a name="define-the-request-location"></a>Определение расположения запроса

Чтобы запустить функцию, не активируемую HTTP-запросом, необходим способ отправки запроса в Azure для запуска функции. URL-адрес, используемый для выполнения данного запроса, принимает определенный формат.

![Определение расположения запроса: имя узла + путь к папке + имя функции](./media/functions-manually-run-non-http/azure-functions-admin-url-anatomy.png)

- **Имя узла**. Общедоступное расположение приложения-функции, которое состоит из имени приложения-функции с добавлением *azurewebsites.net* или личного домена.
- **Путь к папке**. Для доступа к функциям, не активируемым HTTP-запросом, через HTTP-запрос необходимо отправить этот запрос через папки *admin/functions*.
- **Имя функции**. Имя функции, которую вы хотите запустить.

Используйте это расположение запроса в Postman вместе с главным ключом функции в запросе к Azure для запуска функции.

> [!NOTE]
> При локальном запуске функции главный ключ не требуется. Вы можете напрямую [вызвать функцию](#call-the-function), пропустив заголовок `x-functions-key`.

## <a name="get-the-functions-master-key"></a>Получение главного ключа функции

Перейдите к своей функции на портале Azure, щелкните **Управление** и найдите раздел **Ключи узла**. Нажмите кнопку **Копировать** в строке *_master*, чтобы скопировать главный ключ в буфер обмена.

![Копирование главного ключа с экрана управления функции](./media/functions-manually-run-non-http/azure-portal-functions-master-key.png)

После копирования главного ключа щелкните имя функции, чтобы вернуться в окно файла кода. Далее щелкните вкладку **Журналы**. Вы увидите сообщения из функции, которые записывались сюда, когда вы вручную запускали функцию из Postman.

> [!CAUTION]  
> Главный ключ предоставляет высокий уровень разрешений в приложении-функции, поэтому никогда не передавайте этот ключ третьим лицам и не включайте его в состав приложения.

## <a name="call-the-function"></a>Вызов функции

Откройте Postman и выполните следующие действия:

1. В текстовом поле URL-адреса введите **запрашиваемое расположение**.
2. Для метода HTTP задается тип **POST**.
3. **Щелкните** вкладку **Headers** (Заголовки).
4. Введите **x-functions-key** как первый **ключ** и вставьте главный ключ (из буфера обмена) в поле **Value** (Значение).
5. Введите **Content-Type** как второй **ключ** и введите **application/json** как **значение**.

    ![Параметры заголовков в Postman](./media/functions-manually-run-non-http/functions-manually-run-non-http-headers.png)

6. **Щелкните** вкладку **Body** (Текст).
7. Введите **{ "input": "test" }** как текст для запроса.

    ![Параметры текста Postman](./media/functions-manually-run-non-http/functions-manually-run-non-http-body.png)

8. Нажмите кнопку **Отправить**.

    ![Отправка запроса с помощью Postman](./media/functions-manually-run-non-http/functions-manually-run-non-http-send.png)

Postman затем сообщает о состоянии **202 — принято**.

Далее перейдите к своей функции на портале Azure. Найдите окно *Журналы*, и вы увидите сообщения, поступающие в результате вызова функции вручную.

![Результаты в журнале функций после вызова вручную](./media/functions-manually-run-non-http/azure-portal-function-log.png)

## <a name="next-steps"></a>Дальнейшие действия

- [Методика тестирования кода с помощью Функций Azure](./functions-test-a-function.md)
- [Локальная отладка триггера Сетки событий для функций Azure](./functions-debug-event-grid-trigger-local.md)
