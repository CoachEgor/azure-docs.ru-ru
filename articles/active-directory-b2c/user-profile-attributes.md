---
title: Атрибуты профиля пользователя в Azure Active Directory B2C
description: Узнайте о атрибутах типа пользовательского ресурса, поддерживаемых профилем пользователя Каталог АДУ Azure AD B2C. Узнайте о встроенных атрибутах, расширениях и о том, как атрибуты отображают карту Microsoft Graph.
services: active-directory-b2c
author: msmimart
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 3/20/2020
ms.author: mimart
ms.subservice: B2C
ms.openlocfilehash: e921f0a40f53b1d08831047d1cb89ca26de41402
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80057293"
---
# <a name="user-profile-attributes"></a>Атрибуты профиля пользователя

Ваш профиль пользователя каталога B2C Active Directory (Azure AD) поставляется со встроенным набором атрибутов, таких как имя, фамилия, город, почтовый индекс и номер телефона. Вы можете расширить профиль пользователя с помощью собственных данных приложения, не требуя внешнего хранилища данных. Большинство атрибутов, которые можно использовать в профилях пользователей Azure AD B2C, также поддерживаются Microsoft Graph. В этой статье описаны поддерживаемые атрибуты профиля пользователя Azure AD B2C. Он также отмечает те атрибуты, которые не поддерживаются Microsoft Graph, а также атрибуты Microsoft Graph, которые не следует использовать с Azure AD B2C.

> [!IMPORTANT]
> Для хранения конфиденциальных персональных данных, таких как учетные данные, правительственные идентификационные номера, данные держателя карт, данные финансового счета, медицинская информация или конфиденциальная справочная информация, не следует использовать встроенные или удлиненные атрибуты.

Вы также можете интегрироваться с внешними системами. Например, можно использовать Azure AD B2C для проверки подлинности, но делегировать управление внешними отношениями с клиентами (CRM) или базу данных лояльности клиентов в качестве авторитетного источника данных клиентов. Для получения дополнительной информации ознакомьтесь с решением [удаленного профиля.](https://github.com/azure-ad-b2c/samples/tree/master/policies/remote-profile)

В таблице ниже перечислены атрибуты [типа пользовательского ресурса,](https://docs.microsoft.com/graph/api/resources/user) поддерживаемые профилем пользователя каталога Azure AD B2C. В нем приводится следующая информация о каждом атрибуте:

- Имя атрибута, используемое Azure AD B2C (следует имя Microsoft Graph в скобках, если другое)
- Тип данных атрибутов
- Описание атрибута
- Если атрибут доступен на портале Azure
- Если атрибут может быть использован в потоке пользователя
- Если атрибут может быть использован в [пользовательском профиле Azure AD](active-directory-technical-profile.md) и &lt;в&gt;каком разделе (InputClaims, &lt;&lt;&gt;OutputClaims , или PersistedClaims)&gt;

|name     |Тип     |Описание|Портал Azure|Маршруты пользователей|Настраиваемая политика|
|---------|---------|----------|------------|----------|-------------|
|AccountEnabled  |Логическое|Включена ли учетная запись пользователя или отключена: **правда,** если учетная запись включена, в противном случае **ложная.**|Да|нет|Сохраняется, выход|
|Возрастная группа        |Строка|Возрастная группа пользователя. Возможные значения: null, Undefined, Minor, Adult, NotAdult.|Да|нет|Сохраняется, выход|
|alternativeSecurityId[(Идентификационные данные](manage-user-accounts-graph-api.md#identities-property))|Строка|Единая идентификация пользователя от внешнего поставщика идентификационных данных.|нет|нет|Вход, неупорный, выход|
|alternativeSecurityIds[(Идентификационные данные](manage-user-accounts-graph-api.md#identities-property))|альтернативная коллекция securityId|Коллекция идентификационных данных пользователей от внешних поставщиков идентификационных данных.|нет|нет|Сохраняется, выход|
|city            |Строка|Город, в котором находится пользователь. Максимальная длина 128.|Да|Да|Сохраняется, выход|
|согласиеПредоставленоДляимый|Строка|Было ли предоставлено согласие несовершеннолетнего. Разрешенные значения: нулевые, предоставленные, отклоненные или необязательные.|Да|нет|Сохраняется, выход|
|country         |Строка|Страна или регион, в котором находится пользователь. Пример: "США" или "Великобритания". Максимальная длина 128.|Да|Да|Сохраняется, выход|
|createdDateTime|Дата и время|Дата создания объекта пользователя. Только для чтения.|нет|нет|Сохраняется, выход|
|creationType    |Строка|Если учетная запись пользователя была создана как локальная учетная запись для арендатора Azure Active Directory B2C, значение — LocalAccount или nameCoexistence. Только для чтения.|нет|нет|Сохраняется, выход|
|dateOfBirth     |Дата|Дата рождения.|нет|нет|Сохраняется, выход|
|department      |Строка|Имя подразделения, в котором работает пользователь. Максимальная длина 64.|Да|нет|Сохраняется, выход|
|displayName     |Строка|Имя дисплея пользователя. Максимальная длина 256.|Да|Да|Сохраняется, выход|
|факсимилеТелефонНомер<sup>1</sup>|Строка|Номер телефона факсимильного аппарата пользователя.|Да|нет|Сохраняется, выход|
|givenName       |Строка|Имя пользователя. Максимальная длина 64.|Да|Да|Сохраняется, выход|
|jobTitle        |Строка|Должность пользователя. Максимальная длина 128.|Да|Да|Сохраняется, выход|
|immutableId     |Строка|Идентификатор, который обычно используется для пользователей, мигрировал из предварительного Active Directory.|нет|нет|Сохраняется, выход|
|legalAgeGroupКлассификация|Строка|Классификация возрастных групп. Читать только и рассчитывать на основе возрастной группы и согласияProvidedForМинсвойства. Разрешенные значения: null, minorWithParentalConsent, minorWithParentalConsent, minorNoParentalConsent, notAdult and adult.|Да|нет|Сохраняется, выход|
|legalCountry<sup>1</sup>  |Строка|Страна в юридических целях.|нет|нет|Сохраняется, выход|
|mail            |Строка|Адрес SMTP для пользователя, например, ".bob@contoso.com Только для чтения.|нет|нет|Сохраняется, выход|
|mailNickName    |Строка|Псевдоним для почты пользователя. Максимальная длина 64.|нет|нет|Сохраняется, выход|
|мобильный (мобильныйтелефон) |Строка|Основной номер сотового телефона пользователя. Максимальная длина 64.|Да|нет|Сохраняется, выход|
|netId           |Строка|Чистый идентификатор.|нет|нет|Сохраняется, выход|
|objectId        |Строка|Уникальный идентификатор (GUID), который является уникальным идентификатором для пользователя. Пример: 12345678-9abc-def0-1234-56789abcde. Читать только, Непреложный.|Только для чтения|Да|Вход, неупорный, выход|
|otherMails      |Коллекция строк|Список дополнительных адресов электронной почты пользователя. Пример:bob@contoso.comКе",Robert@fabrikam.com"."|Да (Альтернативная электронная почта)|нет|Сохраняется, выход|
|password        |Строка|Пароль для локальной учетной записи при создании пользователя.|нет|нет|Сохранение|
|passwordPolicies     |Строка|Политика пароля. Это строка, состоящая из разного названия политики, разделенной запятой. т.е. "DisablePasswordExpiration, DisableStrongPassword".|нет|нет|Сохраняется, выход|
|physicalDeliveryOfficeName (офисная локация)|Строка|Расположение офиса пользователя. Максимальная длина 128.|Да|нет|Сохраняется, выход|
|postalCode      |Строка|Почтовый индекс в адресе пользователя. Почтовый индекс зависит от страны или региона, в котором живет пользователь. В США этот атрибут содержит ZIP-код. Максимальная длина 40.|Да|нет|Сохраняется, выход|
|preferredLanguage    |Строка|Предпочитаемый язык для пользователя. Следует следовать Кодексу ИСО 639-1. Пример: "ан-США".|нет|нет|Сохраняется, выход|
|refreshTokensValidFromDateTime|Дата и время|Любые токены обновления, выпущенные до этого времени, недействительны, и приложения получат ошибку при использовании недействительного маркера обновления для приобретения нового токена доступа. В этом случае приложению необходимо будет приобрести новый токен обновления, сделав запрос в конечную точку авторизации. Только для чтения.|нет|нет|Выходные данные|
|signInNames[(Идентификации)](manage-user-accounts-graph-api.md#identities-property) |Строка|Уникальное имя локального пользователя учетной записи любого типа в каталоге. Используйте это, чтобы получить пользователя со значением ввода без указания локального типа учетной записи.|нет|нет|Входные данные|
|signInNames.userName[(Идентификация)](manage-user-accounts-graph-api.md#identities-property) |Строка|Уникальное имя пользователя локальной учетной записи в каталоге. Используйте это для создания или получения пользователя с определенным именем пользователя. Указывая это только в PersistedClaims во время операции патча, удалите другие типы signInNames. Если вы хотите добавить новый тип signInNames, необходимо также сохранять существующие signInNames.|нет|нет|Вход, неупорный, выход|
|signInNames.phoneНомер[(Идентификация)](manage-user-accounts-graph-api.md#identities-property) |Строка|Уникальный номер телефона локального пользователя учетной записи в каталоге. Используйте это для создания или получения пользователя с определенным номером телефона. Указывая это только в PersistedClaims во время операции патча, удалите другие типы signInNames. Если вы хотите добавить новый тип signInNames, необходимо также сохранять существующие signInNames.|нет|нет|Вход, неупорный, выход|
|signInNames.emailАдрес[(Идентификационные данные)](manage-user-accounts-graph-api.md#identities-property)|Строка|Уникальный адрес электронной почты пользователя локальной учетной записи в каталоге. Используйте это для создания или получения пользователя с определенным адресом электронной почты. Указывая это только в PersistedClaims во время операции патча, удалите другие типы signInNames. Если вы хотите добавить новый тип signInNames, необходимо также сохранять существующие signInNames.|нет|нет|Вход, неупорный, выход|
|state           |Строка|Область, республика, край в адресе пользователя. Максимальная длина 128.|Да|Да|Сохраняется, выход|
|streetAddress   |Строка|Улица и номер дома в адресе места работы пользователя. Максимальная длина 1024.|Да|Да|Сохраняется, выход|
|сильнаяАутентация AlternativePhoneНомер<sup>1</sup>|Строка|Вторичный номер телефона пользователя, используемый для многофакторной аутентификации.|Да|нет|Сохраняется, выход|
|сильнаяаутнаяаутацияEmailАдрес<sup>1</sup>|Строка|Адрес SMTP для пользователя. Пример:bob@contoso.com« Этот атрибут используется для входиный с политикой имени пользователя, для хранения адреса электронной почты пользователя. Затем адрес электронной почты используется в потоке сбросить пароль.|Да|нет|Сохраняется, выход|
|сильнаяAuthenticationPhoneНомер<sup>1</sup>|Строка|Основной номер телефона пользователя, используемый для многофакторной аутентификации.|Да|нет|Сохраняется, выход|
|surname         |Строка|Фамилия пользователя. Максимальная длина 64.|Да|Да|Сохраняется, выход|
|phoneNumber (первая запись бизнесфонов)|Строка|Основной номер телефона на месте работы пользователя.|Да|нет|Сохраняется, выход|
|userPrincipalName    |Строка|Имя участника-пользователя. UPN — это интернет-имя входа для пользователя, основанное на интернет-стандарте RFC 822. Домен должен присутствовать в коллекции проверенных доменов арендатора. Это свойство требуется при создании учетной записи. Неизменность.|нет|нет|Вход, неупорный, выход|
|usageLocation   |Строка|Требуется пользователям, которым будут назначены лицензии в соответствии с требованиями закона для проверки доступности услуг в странах. Не допускает значения NULL. Код страны из двух букв (стандарт ISO 3166). Примеры: "США", "JP" и "ГБ".|Да|нет|Сохраняется, выход|
|userType        |Строка|Значение строки, которое может быть использовано для классификации типов пользователей в каталоге. Значение должно быть Членом. Только для чтения.|Только для чтения|нет|Сохраняется, выход|
|userState (внешнийUserState)<sup>2</sup>|Строка|Только для учетной записи Azure AD B2B указывается, является ли приглашение ожидаемым или принятым.|нет|нет|Сохраняется, выход|
|userStatechangedon (внешнийuserStateChangeDateTime)<sup>2</sup>|Дата и время|Отображается метка времени для последнего изменения свойства UserState.|нет|нет|Сохраняется, выход|
|<sup>1</sup> Не поддерживается Microsoft Graph<br><sup>2</sup> Не следует использовать с Azure AD B2C||||||


## <a name="extension-attributes"></a>Атрибуты расширения

Часто необходимо создавать собственные атрибуты, как в следующих случаях:

- Приложение, ориентированное на клиента, должно сохраняться для атрибута, такого как **LoyaltyNumber.**
- Поставщик удостоверений имеет уникальный идентификатор пользователя, который необходимо сохранить, например **uniqueUserGUID**.
- Пользовательское путешествие пользователя должно сохраняться для состояния пользователя, **например, для migrationStatus.**

Azure AD B2C расширяет набор атрибутов, хранящихся в каждой учетной записи пользователя. Атрибуты расширения [расширяют схему](https://docs.microsoft.com/graph/extensibility-overview#schema-extensions) пользовательских объектов в каталоге. Атрибуты расширения могут быть зарегистрированы только на объекте приложения, даже если они могут содержать данные для пользователя. Атрибут расширения прикрепляется к приложению под названием b2c-расширение-приложение. Не изменяйте это приложение, так как оно используется Azure AD B2C для хранения пользовательских данных. Вы можете найти это приложение в Azure Active Directory App регистрации.

> [!NOTE]
> - На любую учетную запись пользователя можно записать до 100 атрибутов расширения.
> - Если приложение b2c-extensions-app удалено, эти атрибуты расширения удаляются из всех пользователей вместе с любыми данными, которые они содержат.
> - Если атрибут расширения удален приложением, он удаляется из всех учетных записей пользователей и значения удаляются.
> - Основное имя атрибута расширения генерируется в формате "Extension_" - идентификатор приложения и "" - имя атрибута. Например, если вы создаете атрибут расширения LoyaltyNumber, а идентификатор приложения b2c-расширения-приложения составляет 831374b3-bd50-41bf-aa54-263ec9e050fc, базовое имя атрибута расширения будет: extension_831374b3bd5041bfaa54263ec9e050fc_ ЛояльностьНомер. При запуске запросов Graph API используется базовое имя для создания или обновления учетных записей пользователей.

При определении свойства в расширении схемы поддерживаются следующие типы данных:

|Тип свойства |Remarks  |
|--------------|---------|
|Логическое    | Возможные значения: **истинные** или **ложные.** |
|Дата и время   | Указывается в формате ISO 8601. Данные хранятся в формате UTC.   |
|Целое число    | 32-разрядное значение.               |
|Строка     | Максимум 256 символов.     |

## <a name="next-steps"></a>Дальнейшие действия
Подробнее о атрибутах расширения:
- [Расширения схемы](https://docs.microsoft.com/graph/extensibility-overview#schema-extensions)
- [Определение пользовательских атрибутов с помощью потока пользователей](user-flow-custom-attributes.md)
- [Определение пользовательских атрибутов с помощью пользовательской политики](custom-policy-custom-attributes.md)
