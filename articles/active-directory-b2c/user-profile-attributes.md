---
title: Атрибуты профиля пользователя в Azure Active Directory B2C
description: Сведения о атрибутах типа ресурса "пользователь", которые поддерживаются профилем пользователя Azure AD B2C Directory. Узнайте о встроенных атрибутах, расширениях и том, как атрибуты сопоставляются с Microsoft Graph.
services: active-directory-b2c
author: msmimart
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 3/20/2020
ms.author: mimart
ms.subservice: B2C
ms.openlocfilehash: e921f0a40f53b1d08831047d1cb89ca26de41402
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "80057293"
---
# <a name="user-profile-attributes"></a>Атрибуты профиля пользователя

Профиль пользователя каталога Azure Active Directory (Azure AD) B2C входит в состав встроенного набора атрибутов, таких как имя, фамилия, город, почтовый индекс и номер телефона. Вы можете расширить профиль пользователя с помощью собственных данных приложения, не требуя наличия внешнего хранилища данных. Большинство атрибутов, которые могут использоваться с Azure AD B2C пользовательскими профилями, также поддерживаются Microsoft Graph. В этой статье описаны поддерживаемые Azure AD B2C атрибуты профиля пользователя. Также записываются атрибуты, которые не поддерживаются Microsoft Graph, а также атрибуты Microsoft Graph, которые не следует использовать с Azure AD B2C.

> [!IMPORTANT]
> Не следует использовать встроенные или добавочные атрибуты для хранения конфиденциальных персональных данных, таких как учетные данные, идентификационные номера государственных организаций, данные владельцев карт, данные финансовой учетной записи, сведения о хранении или конфиденциальные сведения.

Также можно выполнить интеграцию с внешними системами. Например, можно использовать Azure AD B2C для проверки подлинности, но делегировать управление внешним клиентским отношениям (CRM) или базе данных лояльности клиентов в качестве полномочного источника данных клиента. Дополнительные сведения см. в разделе решение для [удаленного профиля](https://github.com/azure-ad-b2c/samples/tree/master/policies/remote-profile) .

В следующей таблице перечислены атрибуты [типа ресурса пользователя](https://docs.microsoft.com/graph/api/resources/user) , поддерживаемые профилем пользователя Azure AD B2C Directory. Он предоставляет следующие сведения о каждом атрибуте:

- Имя атрибута, используемое Azure AD B2C (за которым следует имя Microsoft Graph в круглых скобках, если оно отличается)
- Тип данных атрибута
- Описание атрибута
- Если атрибут доступен в портал Azure
- Значение, если атрибут может использоваться в потоке пользователя
- Можно ли использовать атрибут в [техническом профиле Azure AD](active-directory-technical-profile.md) &lt;и в каком разделе (inputclaim&gt;, &lt;OutputClaims&gt;или &lt;персистедклаимс&gt;).

|Имя     |Тип     |Описание|Портал Azure|Маршруты пользователей|Настраиваемая политика|
|---------|---------|----------|------------|----------|-------------|
|AccountEnabled  |логический|Включена или отключена учетная запись пользователя: **true** , если учетная запись включена; в противном случае — **значение false**.|Да|Нет|Сохраненные, выходные данные|
|Возрастная группа        |Строка|Возрастная группа пользователя. Возможные значения: NULL, undefine, Minor, Взрослый, Нотадулт.|Да|Нет|Сохраненные, выходные данные|
|alternativeSecurityId ([удостоверения](manage-user-accounts-graph-api.md#identities-property))|Строка|Единственное удостоверение пользователя из внешнего поставщика удостоверений.|Нет|Нет|Входные, сохраненные, выходные данные|
|alternativeSecurityIds ([удостоверения](manage-user-accounts-graph-api.md#identities-property))|Альтернативная коллекция Секуритид|Коллекция удостоверений пользователей из внешних поставщиков удостоверений.|Нет|Нет|Сохраненные, выходные данные|
|city            |Строка|Город, в котором находится пользователь. Максимальная длина 128.|Да|Да|Сохраненные, выходные данные|
|консентпровидедформинор|Строка|Предоставлено ли разрешение для дополнительного. Допустимые значения: NULL, Granted, Denied или Нотрекуиред.|Да|Нет|Сохраненные, выходные данные|
|country         |Строка|Страна или регион, в котором находится пользователь. Например: "US" или "Великобритания". Максимальная длина 128.|Да|Да|Сохраненные, выходные данные|
|createdDateTime|DateTime|Дата создания объекта пользователя. Только для чтения.|Нет|Нет|Сохраненные, выходные данные|
|creationType    |Строка|Если учетная запись пользователя была создана как локальная учетная запись для Azure Active Directory B2C клиента, то используется значение LocalAccount или nameCoexistence. Только для чтения.|Нет|Нет|Сохраненные, выходные данные|
|dateOfBirth     |Дата|Дата рождения.|Нет|Нет|Сохраненные, выходные данные|
|department      |Строка|Имя подразделения, в котором работает пользователь. Максимальная длина 64.|Да|Нет|Сохраненные, выходные данные|
|displayName     |Строка|Отображаемое имя пользователя. Максимальная длина 256.|Да|Да|Сохраненные, выходные данные|
|Факсимилетелефоненумбер<sup>1</sup>|Строка|Номер телефона факсимильного аппарата пользователя.|Да|Нет|Сохраненные, выходные данные|
|givenName       |Строка|Имя пользователя. Максимальная длина 64.|Да|Да|Сохраненные, выходные данные|
|jobTitle        |Строка|Должность пользователя. Максимальная длина 128.|Да|Да|Сохраненные, выходные данные|
|immutableId     |Строка|Идентификатор, который обычно используется для пользователей, перенесенных из локальной Active Directory.|Нет|Нет|Сохраненные, выходные данные|
|легалажеграупклассификатион|Строка|Классификация легальных возрастных групп. Только для чтения и рассчитывается на основе свойств возрастная группа и Консентпровидедформинор. Допустимые значения: NULL, Минорвисаутпаренталконсент, Минорвиспаренталконсент, Минорнопаренталконсентрекуиред, notAdult и взрослый.|Да|Нет|Сохраненные, выходные данные|
|Легалкаунтри<sup>1</sup>  |Строка|Страна для юридических целей.|Нет|Нет|Сохраненные, выходные данные|
|mail            |Строка|SMTP-адрес пользователя, например "bob@contoso.com". Только для чтения.|Нет|Нет|Сохраненные, выходные данные|
|mailNickName    |Строка|Псевдоним для почты пользователя. Максимальная длина 64.|Нет|Нет|Сохраненные, выходные данные|
|Mobile (mobilePhone) |Строка|Основной номер сотового телефона пользователя. Максимальная длина 64.|Да|Нет|Сохраненные, выходные данные|
|нетид           |Строка|NET ID.|Нет|Нет|Сохраненные, выходные данные|
|objectId        |Строка|Глобальный уникальный идентификатор (GUID), который является уникальным идентификатором пользователя. Пример: 12345678-9abc-def0-1234-56789abcde. Только для чтения, неизменяемый.|Только для чтения|Да|Входные, сохраненные, выходные данные|
|otherMails      |Коллекция строк|Список дополнительных адресов электронной почты пользователя. Пример: ["bob@contoso.com", "Robert@fabrikam.com"].|Да (альтернативный адрес электронной почты)|Нет|Сохраненные, выходные данные|
|password        |Строка|Пароль для локальной учетной записи во время создания пользователя.|Нет|Нет|Сохранение|
|passwordPolicies     |Строка|Политика пароля. Это строка, состоящая из имени другой политики, разделенной запятыми. т. е. «DisablePasswordExpiration, DisableStrongPassword».|Нет|Нет|Сохраненные, выходные данные|
|Фисикалделиверйоффиценаме (Оффицелокатион)|Строка|Расположение офиса пользователя. Максимальная длина 128.|Да|Нет|Сохраненные, выходные данные|
|postalCode      |Строка|Почтовый индекс в адресе пользователя. Почтовый индекс зависит от страны или региона, в котором живет пользователь. В США этот атрибут содержит ZIP-код. Максимальная длина 40.|Да|Нет|Сохраненные, выходные данные|
|preferredLanguage    |Строка|Предпочитаемый язык для пользователя. Должен следовать за кодом ISO 639-1. Пример: en-US.|Нет|Нет|Сохраненные, выходные данные|
|рефрештокенсвалидфромдатетиме|DateTime|Все маркеры обновления, выданные до этого времени, являются недопустимыми, и приложения будут получать ошибку при использовании недопустимого маркера обновления для получения нового маркера доступа. Если это происходит, приложению потребуется получить новый маркер обновления, выполнив запрос авторизации. Только для чтения.|Нет|Нет|Выходные данные|
|signInNames ([удостоверения](manage-user-accounts-graph-api.md#identities-property)) |Строка|Уникальное имя для входа локального пользователя учетной записи любого типа в каталоге. Используйте этот параметр, чтобы получить пользователя со значением входа без указания локального типа учетной записи.|Нет|Нет|Входные данные|
|signInNames. userName ([удостоверения](manage-user-accounts-graph-api.md#identities-property)) |Строка|Уникальное имя пользователя локальной учетной записи в каталоге. Используйте этот параметр, чтобы создать или получить пользователя с указанным именем пользователя для входа. Указание этого параметра в Персистедклаимс только во время операции исправления приведет к удалению других типов signInNames. Если вы хотите добавить новый тип signInNames, необходимо также сохранить существующий signInNames.|Нет|Нет|Входные, сохраненные, выходные данные|
|signInNames. phoneNumber ([удостоверения](manage-user-accounts-graph-api.md#identities-property)) |Строка|Уникальный номер телефона пользователя локальной учетной записи в каталоге. Используйте этот параметр, чтобы создать или получить пользователя с указанным номером телефона для входа. Указание этого параметра в Персистедклаимс только во время операции исправления приведет к удалению других типов signInNames. Если вы хотите добавить новый тип signInNames, необходимо также сохранить существующий signInNames.|Нет|Нет|Входные, сохраненные, выходные данные|
|signInNames. emailAddress ([удостоверения](manage-user-accounts-graph-api.md#identities-property))|Строка|Уникальный адрес электронной почты пользователя локальной учетной записи в каталоге. Используйте этот параметр, чтобы создать или получить пользователя с указанным адресом электронной почты для входа. Указание этого параметра в Персистедклаимс только во время операции исправления приведет к удалению других типов signInNames. Если вы хотите добавить новый тип signInNames, необходимо также сохранить существующий signInNames.|Нет|Нет|Входные, сохраненные, выходные данные|
|state           |Строка|Область, республика, край в адресе пользователя. Максимальная длина 128.|Да|Да|Сохраненные, выходные данные|
|streetAddress   |Строка|Улица и номер дома в адресе места работы пользователя. Максимальная длина 1024.|Да|Да|Сохраненные, выходные данные|
|Стронгаусентикатион Алтернативефоненумбер<sup>1</sup>|Строка|Дополнительный номер телефона пользователя, используемый для многофакторной проверки подлинности.|Да|Нет|Сохраненные, выходные данные|
|Стронгаусентикатионемаиладдресс<sup>1</sup>|Строка|SMTP-адрес пользователя. Пример: "bob@contoso.com" Этот атрибут используется для входа с помощью политики имени пользователя для хранения адреса электронной почты пользователя. Адрес электронной почты, который затем используется в потоке сброса пароля.|Да|Нет|Сохраненные, выходные данные|
|Стронгаусентикатионфоненумбер<sup>1</sup>|Строка|Основной номер телефона пользователя, используемый для многофакторной проверки подлинности.|Да|Нет|Сохраненные, выходные данные|
|surname         |Строка|Фамилия пользователя. Максимальная длина 64.|Да|Да|Сохраненные, выходные данные|
|telephoneNumber (первая запись Бусинессфонес)|Строка|Основной номер телефона на месте работы пользователя.|Да|Нет|Сохраненные, выходные данные|
|userPrincipalName    |Строка|Имя участника-пользователя. UPN — это интернет-имя входа для пользователя, основанное на интернет-стандарте RFC 822. Домен должен присутствовать в коллекции проверенных доменов клиента. Это свойство является обязательным при создании учетной записи. Неизменность.|Нет|Нет|Входные, сохраненные, выходные данные|
|usageLocation   |Строка|Требуется пользователям, которым будут назначены лицензии в соответствии с требованиями закона для проверки доступности услуг в странах. Не допускает значения NULL. Код страны из двух букв (стандарт ISO 3166). Примеры: "US", "JP" и "GB".|Да|Нет|Сохраненные, выходные данные|
|userType        |Строка|Строковое значение, которое можно использовать для классификации типов пользователей в каталоге. Значение должно быть членом. Только для чтения.|Только для чтения|Нет|Сохраненные, выходные данные|
|userState (Екстерналусерстате)<sup>2</sup>|Строка|Только для учетной записи Azure AD B2B указывает, является ли приглашение Пендингакцептанце или принятым.|Нет|Нет|Сохраненные, выходные данные|
|Усерстатечанжедон (Екстерналусерстатечанжедатетиме)<sup>2</sup>|DateTime|Показывает отметку времени последнего изменения свойства UserState.|Нет|Нет|Сохраненные, выходные данные|
|<sup>1</sup> Не поддерживается в Microsoft Graph<br><sup>2</sup> Не следует использовать с Azure AD B2C||||||


## <a name="extension-attributes"></a>Атрибуты расширения

Часто приходится создавать собственные атрибуты, как в следующих случаях:

- Приложение, ориентированное на клиента, должно сохраняться для атрибута, такого как **отправит**.
- Поставщик удостоверений имеет уникальный идентификатор пользователя, который необходимо сохранить, например **uniqueUserGUID**.
- Пользовательский путь взаимодействия пользователя должен сохраняться для состояния пользователя, например **migrationStatus**.

Azure AD B2C расширяет набор атрибутов, хранящихся в каждой учетной записи пользователя. Атрибуты расширения [расширяют схему](https://docs.microsoft.com/graph/extensibility-overview#schema-extensions) объектов пользователя в каталоге. Атрибуты расширения могут быть зарегистрированы только в объекте приложения, даже если они могут содержать данные для пользователя. Атрибут расширения прикрепляется к приложению с именем B2C-Extensions-App. Не изменяйте это приложение, так как оно используется Azure AD B2C для хранения пользовательских данных. Это приложение можно найти в разделе Azure Active Directory Регистрация приложений.

> [!NOTE]
> - В любую учетную запись пользователя можно записывать атрибуты расширения до 100.
> - При удалении приложения B2C-Extensions-App эти атрибуты расширения удаляются со всех пользователей вместе с любыми данными, которые они содержат.
> - Если атрибут расширения удаляется приложением, он удаляется из всех учетных записей пользователей, а значения удаляются.
> - Базовое имя атрибута расширения создается в формате "Extension_" + идентификатор приложения + "_" + имя атрибута. Например, если создать атрибут расширения отправит, а идентификатор приложения B2C-Extensions-App — 831374b3-bd50-41bf-aa54-263ec9e050fc, базовым именем атрибута расширения будет: extension_831374b3bd5041bfaa54263ec9e050fc_LoyaltyNumber. Базовое имя используется при выполнении запросов API Graph для создания или обновления учетных записей пользователей.

При определении свойства в расширении схемы поддерживаются следующие типы данных.

|Тип свойства |Remarks  |
|--------------|---------|
|логический    | Возможные значения: **true** или **false**. |
|DateTime   | Указывается в формате ISO 8601. Данные хранятся в формате UTC.   |
|Целое число    | 32-разрядное значение.               |
|Строка     | Максимум 256 символов.     |

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о атрибутах расширения:
- [Расширения схемы](https://docs.microsoft.com/graph/extensibility-overview#schema-extensions)
- [Определение настраиваемых атрибутов с помощью потока пользователя](user-flow-custom-attributes.md)
- [Определение настраиваемых атрибутов с помощью настраиваемой политики](custom-policy-custom-attributes.md)
