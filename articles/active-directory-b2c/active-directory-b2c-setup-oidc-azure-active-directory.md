---
title: Настройка входа для организации Azure Active Directory в Azure Active Directory B2C | Документация Майкрософт
description: Настройка входа для определенной организации Azure Active Directory в Azure Active Directory B2C
services: active-directory-b2c
author: davidmu1
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 11/30/2018
ms.author: davidmu
ms.subservice: B2C
ms.openlocfilehash: 76585f91358ad4744dd5ae1f426afda0650d9a8f
ms.sourcegitcommit: 44a85a2ed288f484cc3cdf71d9b51bc0be64cc33
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64704016"
---
# <a name="set-up-sign-in-for-a-specific-azure-active-directory-organization-in-azure-active-directory-b2c"></a>Настройка входа для определенной организации Azure Active Directory в Azure Active Directory B2C

>[!NOTE]
> Эта функция предоставляется в общедоступной предварительной версии. Ее не следует использовать в рабочих средах.

Чтобы использовать Azure Active Directory (Azure AD) в качестве [поставщика удостоверений](active-directory-b2c-reference-oauth-code.md) для Azure AD B2C, необходимо создать приложение, которое будет представлять этого поставщика. В этой статье описывается, как включить вход для пользователей из определенной организации Azure AD с помощью потока пользователя в Azure AD B2C.

## <a name="create-an-azure-ad-app"></a>Создание приложения Azure AD

Чтобы включить вход для пользователей из определенной организации Azure AD, вам необходимо зарегистрировать приложение в клиенте Azure AD этой организации, а не в вашем клиенте Azure AD B2C.

1. Войдите на [портале Azure](https://portal.azure.com).
2. Убедитесь, что используете каталог, содержащий клиента организации Azure AD, щелкнув "Фильтр каталога и подписки" в верхнем меню и выбрав каталог, который содержит ваш клиент.
3. Выберите **Все службы** в левом верхнем углу окна портала Azure, а затем найдите и выберите **Регистрация приложений**.
4. Выберите **Регистрация нового приложения**.
5. Введите имя приложения. Например, `Azure AD B2C App`.
6. В качестве **типа приложения** выберите `Web app / API`.
7. В поле **URL-адрес входа** введите следующий URL-адрес в нижнем регистре, где `your-B2C-tenant-name` заменяется именем вашего клиента Azure AD B2C. Например, `https://fabrikam.b2clogin.com/fabrikam.onmicrosoft.com/oauth2/authresp`:

    ```
    https://your-tenant-name.b2clogin.com/your-B2C-tenant-name.onmicrosoft.com/oauth2/authresp
    ```

    Всем URL-адресам следует использовать [b2clogin.com](b2clogin.md).

8. Нажмите кнопку **Создать**. Скопируйте **идентификатор приложения** для использования в будущем.
9. Выберите приложение, а затем щелкните **Параметры**.
10. Выберите **Ключи**, введите описание ключа, установите срок действия и нажмите кнопку **Сохранить**. Скопируйте значение ключа, который отображается, для использования в будущем.

## <a name="configure-azure-ad-as-an-identity-provider"></a>Настройка Azure AD в качестве поставщика удостоверений для клиента

1. Убедитесь, что используете каталог, содержащий клиент Azure AD B2C, щелкнув **Фильтр каталога и подписки** в верхнем меню и выбрав каталог, который содержит ваш клиент.
2. Выберите **Все службы** в левом верхнем углу окна портала Azure, а затем найдите и выберите **Azure AD B2C**.
3. Щелкните **Поставщики удостоверений** и выберите **Добавить**.
4. Введите **Имя**. Например, введите "Contoso Azure AD".
5. Щелкните **Тип поставщика удостоверений**, выберите **Open ID Connect** и нажмите кнопку **ОК**.
6. Щелкните **Настроить этот поставщик удостоверений**.
7. В поле **URL-адрес метаданных** введите следующий URL-адрес, где `your-AD-tenant-domain` заменяется на имя вашего клиента Azure AD. Например, `https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration`:

    ```
    https://login.microsoftonline.com/your-AD-tenant-domain/.well-known/openid-configuration
    ```

8. Для **идентификатора клиента**, введите ранее записан идентификатор приложения, а для **секрета клиента**, введите записанное ранее значение ключа.
9. При необходимости введите значение для **Domain_hint**. Например, `ContosoAD`. Это значение используется при ссылке на этого поставщика удостоверений с помощью *domain_hint* в запросе. 
10. Последовательно выберите **ОК**.
11. Выберите **Сопоставление утверждений для этого поставщика удостоверений** и задайте следующие утверждения.
    
    - В поле **Идентификатор пользователя** введите `oid`.
    - В поле **Отображаемое имя** введите `name`.
    - В поле **Имя** введите `given_name`.
    - В поле **Фамилия** введите `family_name`.
    - В поле **Электронная почта** введите `unique_name`.

12. Нажмите кнопку **ОК**, а затем — **Создать**, чтобы сохранить настройки.
