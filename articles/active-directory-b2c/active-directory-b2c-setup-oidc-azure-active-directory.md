---
title: Настройка входа для организации Azure Active Directory в Azure Active Directory B2C | Документация Майкрософт
description: Настройка входа для определенной организации Azure Active Directory в Azure Active Directory B2C
services: active-directory-b2c
author: mmacy
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 05/14/2018
ms.author: marsma
ms.subservice: B2C
ms.openlocfilehash: 28dbf0382ac151857e72d4bb59e207f07c8ad3f3
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66508417"
---
# <a name="set-up-sign-in-for-a-specific-azure-active-directory-organization-in-azure-active-directory-b2c"></a>Настройка входа для определенной организации Azure Active Directory в Azure Active Directory B2C

>[!NOTE]
> Эта функция предоставляется в общедоступной предварительной версии. Ее не следует использовать в рабочих средах.

Чтобы использовать Azure Active Directory (Azure AD) в качестве [поставщика удостоверений](active-directory-b2c-reference-oauth-code.md) для Azure AD B2C, необходимо создать приложение, которое будет представлять этого поставщика. В этой статье описывается, как включить вход для пользователей из определенной организации Azure AD с помощью потока пользователя в Azure AD B2C.

## <a name="create-an-azure-ad-app"></a>Создание приложения Azure AD

Чтобы включить вход для пользователей из определенной организации Azure AD, вам необходимо зарегистрировать приложение в клиенте Azure AD этой организации, а не в вашем клиенте Azure AD B2C.

1. Войдите на [портале Azure](https://portal.azure.com).
2. Убедитесь, что вы используете каталог, содержащий вашего клиента Azure AD. Выберите **фильтр каталога и подписки** в верхнем меню и выберите каталог, содержащий вашего клиента Azure AD. Это не тот же клиент что клиента Azure AD B2C.
3. Выберите **Все службы** в левом верхнем углу окна портала Azure, а затем найдите и выберите **Регистрация приложений**.
4. Выберите **Новая регистрация**.
5. Введите имя приложения. Например, `Azure AD B2C App`.
6. Примите Выбор **учетных записей в организации каталога только** для этого приложения.
7. Для **URI перенаправления**, оставьте значение **Web**и введите следующий URL-адрес в нижнем регистре, где `your-B2C-tenant-name` заменяется именем вашего клиента Azure AD B2C. Например, `https://fabrikam.b2clogin.com/fabrikam.onmicrosoft.com/oauth2/authresp`:

    ```
    https://your--B2C-tenant-name.b2clogin.com/your-B2C-tenant-name.onmicrosoft.com/oauth2/authresp
    ```

    Всем URL-адресам следует использовать [b2clogin.com](b2clogin.md).

8. Щелкните **Зарегистрировать**. Копировать **идентификатор приложения (клиент)** для использования в будущем.
9. Выберите **сертификаты и секреты** в меню приложения, а затем выберите **новый секрет клиента**.
10. Введите имя секрета клиента. Например, `Azure AD B2C App Secret`.
11. Выберите период окончания срока действия. Для этого приложения, примите Выбор **через один год**.
12. Выберите **добавить** и скопируйте значение новый секрет клиента, который отображается для использования в будущем.

## <a name="configure-azure-ad-as-an-identity-provider"></a>Настройка Azure AD в качестве поставщика удостоверений для клиента

1. Убедитесь, что вы используете каталог, содержащий клиент Azure AD B2C. Выберите **фильтр каталога и подписки** в верхнем меню и выберите каталог, содержащий клиент Azure AD B2C.
2. Выберите **Все службы** в левом верхнем углу окна портала Azure, а затем найдите и выберите **Azure AD B2C**.
3. Щелкните **Поставщики удостоверений** и выберите **Добавить**.
4. Введите **Имя**. Например, введите `Contoso Azure AD`.
5. Щелкните **Тип поставщика удостоверений**, выберите **Open ID Connect** и нажмите кнопку **ОК**.
6. Выберите **настроить этот поставщик удостоверений**
7. В поле **URL-адрес метаданных** введите следующий URL-адрес, где `your-AD-tenant-domain` заменяется на имя вашего клиента Azure AD. Например, `https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration`:

    ```
    https://login.microsoftonline.com/your-AD-tenant-domain/.well-known/openid-configuration
    ```

8. Для **идентификатор клиента**, введите идентификатор приложения, которые ранее были записаны и **секрет клиента**, введите секрет клиента, записанным ранее.
9. При необходимости введите значение для **Domain_hint**. Например, `ContosoAD`. Это значение используется при ссылке на этого поставщика удостоверений с помощью *domain_hint* в запросе. 
10. Последовательно выберите **ОК**.
11. Выберите **Сопоставление утверждений для этого поставщика удостоверений** и задайте следующие утверждения.
    
    - В поле **Идентификатор пользователя** введите `oid`.
    - В поле **Отображаемое имя** введите `name`.
    - В поле **Имя** введите `given_name`.
    - В поле **Фамилия** введите `family_name`.
    - В поле **Электронная почта** введите `unique_name`.

12. Нажмите кнопку **ОК**, а затем — **Создать**, чтобы сохранить настройки.
