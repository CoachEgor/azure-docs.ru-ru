---
title: Включение фильтрации по возрасту в Azure Active Directory B2C | Документация Майкрософт
description: Сведения о том, как определять несовершеннолетних пользователей вашего приложения.
services: active-directory-b2c
author: davidmu1
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 11/13/2018
ms.author: davidmu
ms.subservice: B2C
ms.openlocfilehash: b594dc6eadce5093c58d693492f8e86eb92ae4e3
ms.sourcegitcommit: 2ce4f275bc45ef1fb061932634ac0cf04183f181
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2019
ms.locfileid: "65228005"
---
# <a name="enable-age-gating-in-azure-active-directory-b2c"></a>Включение фильтрации по возрасту в Azure Active Directory B2C

>[!IMPORTANT]
>Эта функция предоставляется в общедоступной предварительной версии. Не используйте эту функцию для рабочих приложений. 
>

Проверка возраста в Azure Active Directory (AAD) B2C позволяет выявить несовершеннолетних, которые пытаются использовать приложение. Вы можете заблокировать вход в приложение для несовершеннолетних. Пользователи могут вернуться в приложение и указать возрастную группу и состояние родительского согласия. Azure AD B2C может блокировать вход несовершеннолетних, выполняемый без родительского согласия. Также Azure AD B2C можно настроить так, чтобы приложение самостоятельно выбирало действия для несовершеннолетних.

После включения проверки возраста в вашей [поток пользователя](active-directory-b2c-reference-policies.md), пользователям предлагается в том случае, когда они родились и какой стране или регионе они располагаются в. Пользователь, который еще не вводил эту информацию, должен будет ввести ее для следующего входа. Правила применяются при каждом входе пользователя.

Azure AD B2C использует введенные сведения, чтобы определить, является ли пользователь несовершеннолетним. Затем в учетной записи обновляется поле **ageGroup**. Возможны следующие значения: `null`, `Undefined`, `Minor`, `Adult` или `NotAdult`.  На основе значений **ageGroup** и **consentProvidedForMinor** вычисляется значение для поля **legalAgeGroupClassification**.

При проверке возраста пользователя, пытающегося получить доступ, используются два значения: возраст до наступления совершеннолетия и возраст, для которого требуется согласие родителей. В таблице ниже перечислены правила расчета возраста, которые используются для выявления несовершеннолетних и несовершеннолетних, которым требуется родительское согласие.

| Страна (регион) | Название страны/региона | Возраст доступа с согласия | Возраст до наступления совершеннолетия |
| -------------- | ------------------- | ----------------- | --------- |
| значение по умолчанию | Нет | Нет | 18 |
| AE | Объединенные Арабские Эмираты | Нет | 21 |
| AT | Австрия | 14 | 18 |
| BE | Бельгия | 14 | 18 |
| BG | Болгария | 16 | 18 |
| BH | Бахрейн | Нет | 21 |
| CM | Камерун | Нет | 21 |
| CY | Кипр | 16 | 18 |
| CZ | Чехия | 16 | 18 |
| DE | Германия | 16 | 18 |
| DK | Дания | 16 | 18 |
| EE | Эстония | 16 | 18 |
| EG | Египет | Нет | 21 |
| ES | Испания | 13 | 18 |
| СВ | Франция | 16 | 18 |
| GB | Соединенное королевство | 13 | 18 |
| GR | Греция | 16 | 18 |
| HR | Хорватия | 16 | 18 |
| HU | Венгрия | 16 | 18 |
| IE | Ирландия | 13 | 18 |
| it | Италия | 16 | 18 |
| KR | Республика Корея | 14 | 18 |
| LT | Литва | 16 | 18 |
| LU | Люксембург | 16 | 18 |
| LV | Латвия | 16 | 18 |
| MT | Мальта | 16 | 18 |
| Нет данных | Намибия | Нет | 21 |
| NL | Нидерланды | 16 | 18 |
| PL | Польша | 13 | 18 |
| PT | Португалия | 16 | 18 |
| RO | Румыния | 16 | 18 |
| SE | Швеция | 13 | 18 |
| SG | Сингапур | Нет | 21 |
| SI | Словения | 16 | 18 |
| SK | Словакия | 16 | 18 |
| TD | Чад | Нет | 21 |
| ВП | Таиланд | Нет | 20 |
| TW | Тайвань | Нет | 20 | 
| США | Соединенные Штаты Америки | 13 | 18 |

## <a name="age-gating-options"></a>Параметры фильтрации по возрасту
 
### <a name="allowing-minors-without-parental-consent"></a>Разрешение доступа несовершеннолетним пользователям без родительского согласия

Для потоков пользователей, которые позволяют выполнять регистрацию и (или) вход, вы можете разрешить доступ к приложению несовершеннолетним пользователям без родительского согласия. Несовершеннолетним пользователям без родительского согласия будет разрешено выполнять вход или регистрацию обычным образом, а Azure AD B2C будет выдавать маркер идентификации с утверждением **legalAgeGroupClassification**. Это утверждение определяет некоторые действия в интерфейсе, например получение родительского согласия и обновление поля **consentProvidedForMinor**.

### <a name="blocking-minors-without-parental-consent"></a>Блокирование несовершеннолетних пользователей без родительского согласия

Для потоков пользователей, которые позволяют выполнять регистрацию и (или) вход, вы можете заблокировать доступ к приложению для несовершеннолетних пользователей без родительского согласия. Azure AD B2C поддерживает следующие действия для заблокированных пользователей:

- Отправить JSON обратно в приложение. Этот вариант отправляет в приложение ответ о блокировании несовершеннолетнего пользователя.
- Показать страницу ошибки. Пользователю отображается страница с сообщением об отказе в доступе к приложению.

## <a name="set-up-your-tenant-for-age-gating"></a>Настройка проверки возраста в клиенте

Чтобы использовать фильтрацию по возрасту в потоке пользователя, следует настроить дополнительные свойства для клиента.

1. Убедитесь, что используете каталог, содержащий клиент Azure AD B2C, щелкнув **Directory and subscription filter** (Фильтр каталога и подписки) в меню сверху. Выберите каталог, содержащий ваш клиент. 
2. Выберите **Все службы** в левом верхнем углу портала Azure, найдите службу **Azure AD B2C** и выберите ее.
3. Выберите **Properties** (Свойства) для клиента в меню слева.
2. В разделе **Age gating** (Фильтрация по возрасту) щелкните **Configure** (Настроить).
3. После завершения операции в клиенте будет включена фильтрация по возрасту.

## <a name="enable-age-gating-in-your-user-flow"></a>Включение фильтрации по возрасту в потоке пользователя

Настроив в клиенте фильтрацию по возрасту, вы сможете применять эту функцию в тех [потоках пользователей](user-flow-versions.md), где она включена. Чтобы включить фильтрацию по возрасту, сделайте следующее:

1. Создайте поток пользователя с включенной фильтрацией по возрасту.
2. Создав поток пользователя, выберите в меню пункт **Properties** (Свойства).
3. В разделе **Age gating** (Фильтрация по возрасту) выберите **Enabled** (Включено).
4. Теперь можно решить, какие действия применять для пользователей, определенных как несовершеннолетние. Для параметра **Sign-up or sign-in** (Регистрация или вход) выберите значение `Allow minors to access your application` или `Block minors from accessing your application`. Если выбрана блокировка несовершеннолетних, выберите `Send a JSON back to the application` или `Show an error message`. 




