---
title: Настройка пользовательского интерфейса
titleSuffix: Azure AD B2C
description: Узнайте, как настроить пользовательский интерфейс для приложений, использующих Azure Active Directory B2C.
services: active-directory-b2c
author: msmimart
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: how-to
ms.date: 09/24/2020
ms.custom: project-no-code
ms.author: mimart
ms.subservice: B2C
ms.openlocfilehash: 84f488863a39307ac7b55d5238fab786084a3614
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91259549"
---
# <a name="customize-the-user-interface-in-azure-active-directory-b2c"></a>Настройка пользовательского интерфейса в Azure Active Directory B2C

Фирменная символика и настройка пользовательского интерфейса, который Azure Active Directory B2C (Azure AD B2C) для клиентов, помогает обеспечить удобство работы пользователей в приложении. Эти возможности включают регистрацию, вход, изменение профиля и сброс пароля. В этой статье описываются методы настройки пользовательского интерфейса как для пользовательских потоков, так и для пользовательских политик.

## <a name="ui-customization-in-different-scenarios"></a>Настройка пользовательского интерфейса в различных сценариях

Существует несколько способов настройки пользовательского интерфейса пользователя для работы с приложением, каждое из которых подходит для различных сценариев.

### <a name="user-flows"></a>Маршруты пользователей

Если вы используете [потоки пользователей](user-flow-overview.md), вы можете изменить внешний вид страниц потока пользователей с помощью встроенных *шаблонов макета страницы*или с помощью собственных HTML и CSS. Оба метода обсуждаются далее в этой статье.

Для настройки пользовательского интерфейса для потоков пользователей используется [портал Azure](tutorial-customize-ui.md) .

> [!TIP]
> Если вы хотите изменить только эмблему баннера, фоновое изображение и цвет фона страниц потока пользователя, можно воспользоваться функцией [фирменной символики компании](#company-branding) , описанной далее в этой статье.

### <a name="custom-policies"></a>Пользовательские политики

Если вы используете [пользовательские политики](custom-policy-overview.md) для предоставления регистрации или входа, сброса пароля или редактирования профиля в приложении, используйте [файлы политики для настройки пользовательского интерфейса](custom-policy-ui-customization.md).

Если необходимо предоставить динамическое содержимое на основе решения клиента, используйте пользовательские политики, которые могут [динамически изменять содержимое страницы](custom-policy-ui-customization.md#configure-dynamic-custom-page-content-uri) в зависимости от параметра, отправляемого в строке запроса. Например, вы можете изменить фоновое изображение на Azure AD B2C странице регистрации или входа в систему на основе параметра, переданного из веб-приложения или с мобильным приложением.

### <a name="javascript"></a>JavaScript

Клиентский код JavaScript можно включить как в [потоках пользователя](user-flow-javascript-overview.md) , так и в [пользовательских политиках](page-layout.md).

### <a name="sign-in-only-ui-customization"></a>Настройка пользовательского интерфейса только для входа

Если вы предоставляете только вход, а также соответствующую страницу сброса пароля и электронную почту для проверки, используйте те же действия по настройке, которые используются для [страницы входа в Azure AD](../active-directory/fundamentals/customize-branding.md).

Если клиенты пытаются изменить свой профиль перед входом, они перенаправляются на страницу, настроенную с помощью тех же действий, которые используются для настройки страницы входа в Azure AD.

## <a name="page-layout-templates"></a>Шаблоны разметки страницы

Потоки пользователей предоставляют несколько встроенных шаблонов, которые можно выбрать, чтобы дать своим страницам возможности профессионального вида. Эти шаблоны макета также могут использоваться в качестве отправной точки для собственной настройки.

В разделе **Настройка** в меню слева выберите **макеты страниц** , а затем выберите **шаблон**.

![Раскрывающийся список выбора шаблона на странице "поток пользователей" портал Azure](media/customize-ui-overview/template-selection.png)

Затем выберите шаблон из списка. Ниже приведены примеры страниц входа для каждого шаблона.

| Синий морской | Серый планшет | Классическая |
|:-:|:-:|:-:|
|![Пример шаблона голубого цвета, отображаемого на странице входа в систему](media/customize-ui-overview/template-ocean-blue.png)|![Пример шаблона серого элемента, отображаемого на странице входа в систему](media/customize-ui-overview/template-slate-gray.png)|![Пример классического шаблона, отображаемого на странице входа в систему](media/customize-ui-overview/template-classic.png)|

При выборе шаблона выбранный макет применяется ко всем страницам потока пользователя, а в поле **Код URI пользовательской страницы** отображается URI для каждой страницы.

## <a name="custom-html-and-css"></a>Пользовательские HTML и CSS

Если вы хотите разработать собственный макет политики с настраиваемыми HTML и CSS, это можно сделать, переключив переключатель "использовать содержимое настраиваемой страницы" для каждого из имен макетов, имеющихся в политике. Выполните приведенные ниже инструкции по настройке пользовательских макетов.

Azure AD B2C запускает код в браузере клиента, используя подход, называемый [общим доступом к ресурсам между источниками (CORS)](https://www.w3.org/TR/cors/).

Во время выполнения содержимое загружается по URL-адресу, указанному в пользовательском потоке или настраиваемой политике. Каждая страница в интерфейсе пользователя загружает свое содержимое из URL-адреса, указанного для этой страницы. После загрузки содержимого из URL-адреса оно объединяется с фрагментом HTML, вставленным Azure AD B2C, а затем страница отображается для клиента.

Прежде чем использовать собственные файлы HTML и CSS для настройки пользовательского интерфейса, ознакомьтесь со следующими рекомендациями.

- Azure AD B2C выполняет **Слияние** HTML-содержимого со страницами. Не следует копировать и пытаться изменить стандартное содержимое, которое предоставляет Azure AD B2C. Лучше всего создать содержимое HTML с нуля, используя стандартное содержимое в качестве образца.
- **JavaScript** может быть добавлен в пользовательское содержимое как для пользовательских [потоков](user-flow-javascript-overview.md) , так и для [пользовательских политик](javascript-samples.md).
- Поддерживаемые **версии браузера** :
  - Internet Explorer 11, 10 и Microsoft ребро
  - ограниченная поддержка Internet Explorer 9 и Internet Explorer 8;
  - Google Chrome 42.0 и выше
  - Mozilla Firefox 38.0 и выше
  - Safari для iOS и macOS, версия 12 и более поздние версии
- Не включайте **теги форм** в код HTML. Теги форм конфликтуют с операциями POST, созданными HTML-кодом, добавленным Azure AD B2C.

### <a name="where-do-i-store-ui-content"></a>Где хранить содержимое пользовательского интерфейса?

При использовании собственных файлов HTML и CSS для настройки пользовательского интерфейса можно разместить содержимое пользовательского интерфейса на любой общедоступной конечной точке HTTPS, которая поддерживает CORS. Например, [хранилище больших двоичных объектов Azure](../storage/blobs/storage-blobs-introduction.md), веб-серверы, CDN, AWS S3 или системы общего доступа к файлам.

Важно отметить, что вы размещаете содержимое в общедоступной конечной точке HTTPS с [включенной CORS](https://enable-cors.org/server.html). При ее указании в содержимом необходимо использовать абсолютный URL-адрес.

> [!NOTE]
> Дополнительные сведения о создании содержимого HTML, передаче содержимого в хранилище BLOB-объектов Azure и настройке CORS см. в разделе [Пошаговое руководство по содержимому настраиваемой страницы](custom-policy-ui-customization.md#custom-page-content-walkthrough) в статье Настройка пользовательского интерфейса.

## <a name="get-started-with-custom-html-and-css"></a>Начало работы с настраиваемыми HTML и CSS

Приступите к работе с собственными HTML и CSS на страницах взаимодействия с пользователем, следуя этим рекомендациям.

- Создайте корректное содержимое HTML и добавьте в раздел `<body>` пустой элемент `<div id="api"></div>`. Этот элемент обозначает место, в которое будет добавляться содержимое Azure AD B2C. Ниже приведен пример страницы с минимальным числом элементов.

    ```html
    <!DOCTYPE html>
    <html>
      <head>
        <title>!Add your title here!</title>
        <link rel="stylesheet" href="https://mystore1.blob.core.windows.net/b2c/style.css">
      </head>
      <body>
        <h1>My B2C Application</h1>
        <div id="api"></div>   <!-- Leave this element empty because Azure AD B2C will insert content here. -->
      </body>
    </html>
    ```

- Измените стиль элементов пользовательского интерфейса, которые Azure AD B2C вставляет в страницу, с помощью каскадных таблиц стилей. В примере ниже показан простой CSS-файл, который также включает в себя параметры для регистрации внедренных элементов HTML.

    ```css
    h1 {
      color: blue;
      text-align: center;
    }
    .intro h2 {
      text-align: center;
    }
    .entry {
      width: 400px ;
      margin-left: auto ;
      margin-right: auto ;
    }
    .divider h2 {
      text-align: center;
    }
    .create {
      width: 400px ;
      margin-left: auto ;
      margin-right: auto ;
    }
    ```

- Затем разместите это содержимое в конечной точке HTTPS (CORS-доступ должен быть включен). При настройке CORS необходимо включить методы запроса GET и OPTIONS.
- Создание или изменение пользовательского потока или настраиваемой политики для использования созданного содержимого.

### <a name="html-fragments-from-azure-ad-b2c"></a>Фрагменты HTML из Azure AD B2C

В таблице ниже приведены фрагменты кода HTML, которые служба Azure AD B2C добавляет в элемент `<div id="api"></div>` в вашем содержимом.

| Вставленная страница | Описание кода HTML |
| ------------- | ------------------- |
| Выбора поставщика удостоверений | Содержит список кнопок для поставщиков удостоверений, которые можно выбирать во время регистрации или входа пользователя. На соответствующих кнопках отмечены поставщики удостоверений социальных сетей, например Facebook и Google+, или локальных учетных записей (адрес электронной почты или имя пользователя). |
| Регистрация локальной учетной записи | Содержит форму для регистрации локальной учетной записи по адресу электронной почты или имени пользователя. Форма может содержать различные элементы управления для ввода текста, например: текстовое поле, поле ввода пароля, переключатель, раскрывающийся список с единственным выбором или флажки множественного выбора. |
| Регистрация учетной записи социальных сетей | Может появиться при регистрации с помощью имеющейся учетной записи от поставщика удостоверений в социальных сетях, например Facebook или Google+. Он используется при сборе дополнительных сведений от клиента с помощью формы регистрации. |
| Единая регистрация или вход | Обрабатывает регистрацию и вход клиентов, которые могут использовать поставщики удостоверений, такие как Facebook или Google+, или локальные учетные записи. |
| Многофакторная Идентификация | Клиенты могут подтвердить свой номер телефона (с помощью текстового сообщения или голосового звонка) во время регистрации или входа. |
| Error | Предоставляет клиенту сведения об ошибке. |

## <a name="company-branding"></a>Корпоративная фирменная символика

Вы можете настроить страницы потока пользователей с помощью эмблемы баннера, фонового изображения и цвета фона, используя Azure Active Directory [фирменную символику компании](../active-directory/fundamentals/customize-branding.md).

Чтобы настроить страницы потока пользователей, сначала настройте фирменную символику компании в Azure Active Directory, а затем включите ее в макетах страниц пользователя в Azure AD B2C.

### <a name="configure-company-branding"></a>Настройка фирменной символики компании

Начните с настройки логотипа баннера, фонового изображения и цвета фона в рамках **фирменной символики компании**.

1. Войдите на [портал Azure](https://portal.azure.com).
1. Выберите фильтр **Каталог и подписка** в верхнем меню, а затем выберите каталог, содержащий клиент Azure AD B2C.
1. На портале Azure найдите и выберите **Azure AD B2C**.
1. В разделе **Управление**выберите **Корпоративная фирменная символика**.
1. Выполните действия, описанные в статье [Добавление фирменной символики на страницу входа Azure Active Directory вашей организации](../active-directory/fundamentals/customize-branding.md).

При настройке фирменной символики компании в Azure AD B2C необходимо учитывать следующие моменты.

* Фирменная символика компании в Azure AD B2C в настоящее время ограничена **фоновым изображением**, **логотипом баннера**и настройкой **цвета фона** . Другие свойства в области фирменной символики компании, например, в **дополнительных параметрах**, *не поддерживаются*.
* На страницах потока пользователя цвет фона отображается перед загрузкой фонового изображения. Мы рекомендуем выбрать цвет фона, который ближе всего соответствует цветам в фоновом изображении, чтобы обеспечить более гладкую загрузку.
* Эмблема баннера появляется в сообщениях электронной почты для проверки, отправляемых пользователям при инициировании потока регистрации пользователя.

### <a name="enable-branding-in-user-flow-pages"></a>Включение фирменной символики на страницах потока пользователя

После настройки фирменной символики компании включите ее в пользовательских потоках.

1. В меню слева портал Azure выберите **Azure AD B2C**.
1. В разделе **Политики** выберите **Пользовательские потоки (политики)** .
1. Выберите поток пользователя, для которого вы хотите включить фирменную символику компании. Фирменная символика компании **не поддерживается** для стандартных типов *входа* и *редактирования стандартного профиля* .
1. В разделе **Настройка**выберите **макеты страниц**, а затем выберите макет для фирменной символики. Например, выберите **Единая регистрация или страница входа**.
1. В качестве **версии макета страницы (Предварительная версия)** выберите версию **1.2.0** или более позднюю.
1. Щелкните **Сохранить**.

Если вы хотите настроить фирменную символику всех страниц в потоке пользователя, задайте версию макета страницы для каждого макета страницы в потоке пользователя.

![Выбор макета страницы в Azure AD B2C в портал Azure](media/customize-ui-overview/portal-02-page-layout-select.png)

В этом примере с заметками отображается пользовательский логотип баннера и фоновое изображение на странице " *Регистрация и вход* пользователя", которая использует синий шаблон "морской краски":

![Страница регистрации или входа с фирменной символикой, обслуживаемая Azure AD B2C](media/customize-ui-overview/template-ocean-blue-branded.png)

### <a name="use-company-branding-assets-in-custom-html"></a>Использование активов фирменной символики компании в пользовательском HTML

Чтобы использовать активы фирменной символики компании в пользовательском HTML-коде, добавьте следующие теги за пределами `<div id="api">` тега:

```HTML
<img data-tenant-branding-background="true" />
<img data-tenant-branding-logo="true" alt="Company Logo" />
```

Источник изображения заменяется на изображение фонового изображения и логотипа баннера. Как описано в разделе [Приступая к работе с настраиваемыми HTML и CSS](#get-started-with-custom-html-and-css) , используйте классы CSS для стиля и размещения ресурсов на странице.

## <a name="localize-content"></a>Локализация содержимого

Локализовать содержимое HTML можно, включив [настройку языка](user-flow-language-customization.md) в клиенте Azure AD B2C. Включение этой функции позволяет Azure AD B2C перенаправить параметр OpenID Connect Connect `ui_locales` в конечную точку. Сервер содержимого может использовать этот параметр для предоставления HTML-страниц на конкретном языке.

Можно извлекать содержимое из разных расположений в зависимости от используемого языкового стандарта. В конечной точке с поддержкой CORS можно настроить структуру папок для размещения содержимого для определенных языков. При использовании шаблона подстановки `{Culture:RFC5646}` запрос будет правильным.

Например, URI настраиваемой страницы может выглядеть следующим образом:

```http
https://contoso.blob.core.windows.net/{Culture:RFC5646}/myHTML/unified.html
```

Страницу можно загрузить на французском языке, извлекать содержимое из:

```http
https://contoso.blob.core.windows.net/fr/myHTML/unified.html
```

## <a name="examples"></a>Примеры

Несколько примеров файлов шаблонов можно найти в репозитории [B2C-AzureBlobStorage-Client](https://github.com/azureadquickstarts/b2c-azureblobstorage-client) на сайте GitHub.

Образцы файлов HTML и CSS в шаблонах находятся в каталоге [/sample_templates](https://github.com/AzureADQuickStarts/B2C-AzureBlobStorage-Client/tree/master/sample_templates) .

## <a name="next-steps"></a>Дальнейшие действия

- Если вы используете **потоки пользователей**, можно приступить к настройке пользовательского интерфейса с помощью учебника:

    [Настройте пользовательский интерфейс для приложений в Azure Active Directory B2C](tutorial-customize-ui.md).
- Если вы используете **пользовательские политики**, можно приступить к настройке пользовательского интерфейса с помощью следующей статьи:

    [Настройте пользовательский интерфейс приложения, используя настраиваемую политику в Azure Active Directory B2C](custom-policy-ui-customization.md).
