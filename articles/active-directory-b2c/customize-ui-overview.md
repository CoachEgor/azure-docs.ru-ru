---
title: Настройка пользовательского интерфейса
titleSuffix: Azure AD B2C
description: Узнайте, как настроить пользовательский интерфейс для приложений, использующих Azure Active Directory B2C.
services: active-directory-b2c
author: mmacy
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 09/25/2019
ms.author: marsma
ms.subservice: B2C
ms.openlocfilehash: d14e6f98f49f112c8b20abec573b48c3b12705db
ms.sourcegitcommit: 5d6ce6dceaf883dbafeb44517ff3df5cd153f929
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/29/2020
ms.locfileid: "76841239"
---
# <a name="customize-the-user-interface-in-azure-active-directory-b2c"></a>Настройка пользовательского интерфейса в Azure Active Directory B2C

Фирменная символика и настройка пользовательского интерфейса, который Azure Active Directory B2C (Azure AD B2C) для клиентов, помогает обеспечить удобство работы пользователей в приложении. Эти возможности включают регистрацию, вход, изменение профиля и сброс пароля. В этой статье описываются методы настройки пользовательского интерфейса как для пользовательских потоков, так и для пользовательских политик.

## <a name="ui-customization-in-different-scenarios"></a>Настройка пользовательского интерфейса в различных сценариях

Существует несколько способов настройки пользовательского интерфейса пользователя для работы с приложением, каждое из которых подходит для различных сценариев.

### <a name="user-flows"></a>Маршруты пользователей

Если вы используете [потоки пользователей](user-flow-overview.md), вы можете изменить внешний вид страниц потока пользователей с помощью встроенных *шаблонов макета страницы*или с помощью собственных HTML и CSS. Оба метода обсуждаются далее в этой статье.

Для настройки пользовательского интерфейса для потоков пользователей используется [портал Azure](tutorial-customize-ui.md) .

### <a name="custom-policies"></a>Пользовательские политики

Если вы используете [пользовательские политики](custom-policy-overview.md) для предоставления регистрации или входа, сброса пароля или редактирования профиля в приложении, используйте [файлы политики для настройки пользовательского интерфейса](custom-policy-ui-customization.md).

Если необходимо предоставить динамическое содержимое на основе решения клиента, используйте пользовательские политики, которые могут [динамически изменять содержимое страницы](custom-policy-ui-customization-dynamic.md) в зависимости от параметра, отправляемого в строке запроса. Например, вы можете изменить фоновое изображение на Azure AD B2C странице регистрации или входа в систему на основе параметра, переданного из веб-приложения или с мобильным приложением.

### <a name="javascript"></a>JavaScript

Клиентский код JavaScript можно включить как в [потоках пользователя](user-flow-javascript-overview.md) , так и в [пользовательских политиках](page-layout.md).

### <a name="sign-in-only-ui-customization"></a>Настройка пользовательского интерфейса только для входа

Если вы предоставляете только вход, а также соответствующую страницу сброса пароля и электронную почту для проверки, используйте те же действия по настройке, которые используются для [страницы входа в Azure AD](../active-directory/fundamentals/customize-branding.md).

Если клиенты пытаются изменить свой профиль перед входом, они перенаправляются на страницу, настроенную с помощью тех же действий, которые используются для настройки страницы входа в Azure AD.

## <a name="page-layout-templates"></a>Шаблоны разметки страницы

Потоки пользователей предоставляют несколько встроенных шаблонов, которые можно выбрать, чтобы дать своим страницам возможности профессионального вида. Эти шаблоны макета также могут использоваться в качестве отправной точки для собственной настройки.

В разделе **Настройка** в меню слева выберите **макеты страниц** , а затем выберите **шаблон**.

![Раскрывающийся список выбора шаблона на странице "поток пользователей" портал Azure](media/customize-ui-overview/template-selection.png)

Затем выберите шаблон из списка. Ниже приведены примеры страниц входа для каждого шаблона.

| Синий морской | Серый планшет | Классический |
|:-:|:-:|:-:|
|![Пример шаблона голубого цвета, отображаемого на странице входа в систему](media/customize-ui-overview/template-ocean-blue.png)|![Пример шаблона серого элемента, отображаемого на странице входа в систему](media/customize-ui-overview/template-slate-gray.png)|![Пример классического шаблона, отображаемого на странице входа в систему](media/customize-ui-overview/template-classic.png)|

При выборе шаблона выбранный макет применяется ко всем страницам потока пользователя, а в поле **Код URI пользовательской страницы** отображается URI для каждой страницы.

## <a name="custom-html-and-css"></a>Пользовательские HTML и CSS

Если вы хотите разработать собственный макет политики с настраиваемыми HTML и CSS, это можно сделать, переключив переключатель "использовать содержимое настраиваемой страницы" для каждого из имен макетов, имеющихся в политике. Выполните приведенные ниже инструкции по настройке пользовательских макетов.

Azure AD B2C запускает код в браузере клиента, используя подход, называемый [общим доступом к ресурсам между источниками (CORS)](https://www.w3.org/TR/cors/).

Во время выполнения содержимое загружается по URL-адресу, указанному в пользовательском потоке или настраиваемой политике. Каждая страница в интерфейсе пользователя загружает свое содержимое из URL-адреса, указанного для этой страницы. После загрузки содержимого из URL-адреса оно объединяется с фрагментом HTML, вставленным Azure AD B2C, а затем страница отображается для клиента.

Прежде чем использовать собственные файлы HTML и CSS для настройки пользовательского интерфейса, ознакомьтесь со следующими рекомендациями.

- Azure AD B2C выполняет **Слияние** HTML-содержимого со страницами. Не следует копировать и пытаться изменить стандартное содержимое, которое предоставляет Azure AD B2C. Лучше всего создать содержимое HTML с нуля, используя стандартное содержимое в качестве образца.
- **JavaScript** может быть добавлен в пользовательское содержимое как для пользовательских [потоков](user-flow-javascript-overview.md) , так и для [пользовательских политик](javascript-samples.md).
- Поддерживаемые **версии браузера** :
  - Internet Explorer 11, 10 и Microsoft ребро
  - ограниченная поддержка Internet Explorer 9 и Internet Explorer 8;
  - Google Chrome 42.0 и выше
  - Mozilla Firefox 38.0 и выше
- Не включайте **теги форм** в код HTML. Теги форм конфликтуют с операциями POST, созданными HTML-кодом, добавленным Azure AD B2C.

### <a name="where-do-i-store-ui-content"></a>Где хранить содержимое пользовательского интерфейса?

При использовании собственных файлов HTML и CSS для настройки пользовательского интерфейса можно разместить содержимое пользовательского интерфейса на любой общедоступной конечной точке HTTPS, которая поддерживает CORS. Например, [хранилище больших двоичных объектов Azure](../storage/blobs/storage-blobs-introduction.md), веб-серверы, CDN, AWS S3 или системы общего доступа к файлам.

Важно отметить, что вы размещаете содержимое на общедоступной конечной точке HTTPS с поддержкой CORS. При ее указании в содержимом необходимо использовать абсолютный URL-адрес.

## <a name="get-started-with-custom-html-and-css"></a>Начало работы с настраиваемыми HTML и CSS

Приступите к работе с собственными HTML и CSS на страницах взаимодействия с пользователем, следуя этим рекомендациям.

- Создайте корректное содержимое HTML и добавьте в раздел `<body>` пустой элемент `<div id="api"></div>`. Этот элемент обозначает место, в которое будет добавляться содержимое Azure AD B2C. Ниже приведен пример страницы с минимальным числом элементов.

    ```html
    <!DOCTYPE html>
    <html>
      <head>
        <title>!Add your title here!</title>
        <link rel="stylesheet" href="https://mystore1.blob.core.windows.net/b2c/style.css">
      </head>
      <body>
        <h1>My B2C Application</h1>
        <div id="api"></div>   <!-- Leave this element empty because Azure AD B2C will insert content here. -->
      </body>
    </html>
    ```

- Измените стиль элементов пользовательского интерфейса, которые Azure AD B2C вставляет в страницу, с помощью каскадных таблиц стилей. В примере ниже показан простой CSS-файл, который также включает в себя параметры для регистрации внедренных элементов HTML.

    ```css
    h1 {
      color: blue;
      text-align: center;
    }
    .intro h2 {
      text-align: center;
    }
    .entry {
      width: 400px ;
      margin-left: auto ;
      margin-right: auto ;
    }
    .divider h2 {
      text-align: center;
    }
    .create {
      width: 400px ;
      margin-left: auto ;
      margin-right: auto ;
    }
    ```

- Затем разместите это содержимое в конечной точке HTTPS (CORS-доступ должен быть включен). При настройке CORS необходимо включить методы запроса GET и OPTIONS.
- Создание или изменение пользовательского потока или настраиваемой политики для использования созданного содержимого.

### <a name="html-fragments-from-azure-ad-b2c"></a>Фрагменты HTML из Azure AD B2C

В таблице ниже приведены фрагменты кода HTML, которые служба Azure AD B2C добавляет в элемент `<div id="api"></div>` в вашем содержимом.

| Вставленная страница | Описание кода HTML |
| ------------- | ------------------- |
| Выбора поставщика удостоверений | Содержит список кнопок для поставщиков удостоверений, которые можно выбирать во время регистрации или входа пользователя. На соответствующих кнопках отмечены поставщики удостоверений социальных сетей, например Facebook и Google+, или локальных учетных записей (адрес электронной почты или имя пользователя). |
| Регистрация локальной учетной записи | Содержит форму для регистрации локальной учетной записи по адресу электронной почты или имени пользователя. Форма может содержать различные элементы управления для ввода текста, например: текстовое поле, поле ввода пароля, переключатель, раскрывающийся список с единственным выбором или флажки множественного выбора. |
| Регистрация учетной записи социальных сетей | Может появиться при регистрации с помощью имеющейся учетной записи от поставщика удостоверений в социальных сетях, например Facebook или Google+. Он используется при сборе дополнительных сведений от клиента с помощью формы регистрации. |
| Единая регистрация или вход | Обрабатывает регистрацию и вход клиентов, которые могут использовать поставщики удостоверений, такие как Facebook или Google+, или локальные учетные записи. |
| Многофакторная проверка подлинности | Клиенты могут подтвердить свой номер телефона (с помощью текстового сообщения или голосового звонка) во время регистрации или входа. |
| Ошибка | Предоставляет клиенту сведения об ошибке. |

## <a name="localize-content"></a>Локализация содержимого

Локализовать содержимое HTML можно, включив [настройку языка](user-flow-language-customization.md) в клиенте Azure AD B2C. Включение этой функции позволяет Azure AD B2C пересылать в конечную точку параметр OpenID Connect Connect `ui-locales`. Сервер содержимого может использовать этот параметр для предоставления HTML-страниц на конкретном языке.

Можно извлекать содержимое из разных расположений в зависимости от используемого языкового стандарта. В конечной точке с поддержкой CORS можно настроить структуру папок для размещения содержимого для определенных языков. При использовании шаблона подстановки `{Culture:RFC5646}` запрос будет правильным.

Например, URI настраиваемой страницы может выглядеть следующим образом:

```HTTP
https://contoso.blob.core.windows.net/{Culture:RFC5646}/myHTML/unified.html
```

Страницу можно загрузить на французском языке, извлекать содержимое из:

```HTTP
https://contoso.blob.core.windows.net/fr/myHTML/unified.html
```

## <a name="examples"></a>Примеры

Несколько примеров файлов шаблонов можно найти в репозитории [B2C-AzureBlobStorage-Client](https://github.com/azureadquickstarts/b2c-azureblobstorage-client) на сайте GitHub.

Образцы файлов HTML и CSS в шаблонах находятся в каталоге [/sample_templates](https://github.com/AzureADQuickStarts/B2C-AzureBlobStorage-Client/tree/master/sample_templates) .

## <a name="next-steps"></a>Дальнейшие действия

- Если вы используете **потоки пользователей**, можно приступить к настройке пользовательского интерфейса с помощью учебника:

    [Руководство по настройке пользовательского интерфейса приложений в Azure Active Directory B2C](tutorial-customize-ui.md).
- Если вы используете **пользовательские политики**, можно приступить к настройке пользовательского интерфейса с помощью следующей статьи:

    [Настройка пользовательского интерфейса приложения с помощью настраиваемой политики в Azure Active Directory B2C](custom-policy-ui-customization.md).
