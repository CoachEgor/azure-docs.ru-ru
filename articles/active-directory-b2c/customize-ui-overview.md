---
title: Настройка пользовательского интерфейса
titleSuffix: Azure AD B2C
description: Узнайте, как настроить пользовательский интерфейс для приложений, которые используют Azure Active Directory B2C.
services: active-directory-b2c
author: msmimart
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 03/19/2020
ms.author: mimart
ms.subservice: B2C
ms.openlocfilehash: 839e13dffc7d15b8cd258dd4b7dda6776223d052
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80051739"
---
# <a name="customize-the-user-interface-in-azure-active-directory-b2c"></a>Настройка пользовательского интерфейса в Azure Active Directory B2C

Брендинг и настройка пользовательского интерфейса, который отображает Сяп-ру Active Directory B2C (Azure AD B2C) для ваших клиентов, помогает обеспечить беспрепятственный пользовательский интерфейс в вашем приложении. Эти возможности включают регистрацию, регистрацию, редактирование профиля и сброс паролей. В этой статье представлены методы настройки пользовательского интерфейса (UI) как для потоков пользователей, так и для пользовательских политик.

## <a name="ui-customization-in-different-scenarios"></a>Настройка пользовательского пользовательского разработки в различных сценариях

Существует несколько способов настройки пользовательского интерфейса приложения, каждый из которых подходит для различных сценариев.

### <a name="user-flows"></a>Маршруты пользователей

Если вы используете [потоки пользователей,](user-flow-overview.md)вы можете изменить внешний вид страниц потока пользователей, используя встроенные *шаблоны макета страницы,* или с помощью собственных HTML и CSS. Оба метода рассматриваются позднее в этой статье.

Для настройки пользовательского интерфейса для потоков пользователей используется [портал Azure.](tutorial-customize-ui.md)

> [!TIP]
> Если вы хотите изменить только логотип баннера, фоновое изображение и цвет фона страниц потока пользователей, вы можете попробовать функцию [брендинга компании (предварительный просмотр),](#company-branding-preview) описанную позже в этой статье.

### <a name="custom-policies"></a>Пользовательские политики

Если вы используете [пользовательские политики](custom-policy-overview.md) для регистрации или регистрации, сбросить пароль или редактирование профиля в приложении, используйте [файлы политики для настройки пользовательского пользовательского системы.](custom-policy-ui-customization.md)

Если вам необходимо предоставить динамический контент на основе решения клиента, используйте пользовательские политики, которые могут [динамически изменять содержимое страницы](custom-policy-ui-customization.md#configure-dynamic-custom-page-content-uri) в зависимости от параметра, отправленного в строку запроса. Например, можно изменить фоновое изображение на странице регистрации Azure AD B2C или вписаться в систему на основе параметра, который вы передаете из веб-приложения или мобильного приложения.

### <a name="javascript"></a>JavaScript

Вы можете включить код JavaScript на стороне клиента как в [пользовательских потоках,](user-flow-javascript-overview.md) так и [в пользовательских политиках.](page-layout.md)

### <a name="sign-in-only-ui-customization"></a>Подпишитесь только на настройку пользовательского пользовательского системы

Если вы предоставляете только входе, а также сопровождающие страницы сбросить пароль и электронные письма проверки, используйте те же шаги настройки, которые используются для [страницы регистрации Azure AD.](../active-directory/fundamentals/customize-branding.md)

Если клиенты пытаются отсеивать свой профиль перед ввозами, они перенаправляются на страницу, которую вы настраиваете, используя те же шаги, которые используются для настройки страницы регистрации Azure AD.

## <a name="page-layout-templates"></a>Шаблоны разметки страницы

Потоки пользователей предоставляют несколько встроенных шаблонов, которые вы можете выбрать, чтобы придать страницам пользовательского опыта профессиональный вид. Эти шаблоны макета также могут служить отправной точкой для вашей собственной настройки.

Под **настраивать** в левом меню, выберите **макеты страницы,** а затем выберите **шаблон**.

![Выпадение выбора шаблонов на странице потока пользователей портала Azure](media/customize-ui-overview/template-selection.png)

Затем выберите шаблон из списка. Вот примеры страниц ввески для каждого шаблона:

| Океан Блю | Шифер Серый | Классический |
|:-:|:-:|:-:|
|![Пример шаблона Ocean Blue, отображаемого при регистрации на странице](media/customize-ui-overview/template-ocean-blue.png)|![Пример шаблона Slate Gray, отображаемого при регистрации на странице](media/customize-ui-overview/template-slate-gray.png)|![Пример шаблона Classic, отображаемого при регистрации на странице](media/customize-ui-overview/template-classic.png)|

При выборе шаблона выбранный макет применяется ко всем страницам потока пользователя, а в поле **Код URI пользовательской страницы** отображается URI для каждой страницы.

## <a name="custom-html-and-css"></a>Пользовательские HTML и CSS

Если вы хотите создать свой собственный макет политики с помощью настраиваемых HTML и CSS, вы можете сделать это, переключив переключатель на каждую из имен Layout, присутствующих в вашей политике. Пожалуйста, следуйте ниже инструкциям относительно пользовательских конфигураций макета:

Azure AD B2C запускает код в браузере клиента, используя подход под названием [Cross-Origin Resource Sharing (CORS).](https://www.w3.org/TR/cors/)

Во время выполнения содержимое загружается из URL-адреса, указанного в потоке пользователя или пользовательской политике. Каждая страница в пользовательском интерфейсе загружает свое содержимое из URL-адреса, указанного для этой страницы. После загрузки содержимого из URL-адреса он сливается с фрагментом HTML, вставленным ВАшего B2C Azure AD, а затем страница отображается клиенту.

Просмотрите следующие рекомендации перед использованием собственных файлов HTML и CSS для настройки uI:

- Azure AD B2C **объединяет** HTML-контент в ваши страницы. Не следует копировать и пытаться изменить стандартное содержимое, которое предоставляет Azure AD B2C. Лучше всего создать содержимое HTML с нуля, используя стандартное содержимое в качестве образца.
- **JavaScript** может быть включен в пользовательский контент как для [потоков пользователей,](user-flow-javascript-overview.md) так и для [пользовательских политик.](javascript-samples.md)
- Поддерживаемые **версии браузера:**
  - Internet Explorer 11, 10 и Microsoft Edge
  - ограниченная поддержка Internet Explorer 9 и Internet Explorer 8;
  - Google Chrome 42.0 и выше
  - Mozilla Firefox 38.0 и выше
  - Safari для iOS и macOS, версия 12 и выше
- Не включайте **теги формы** в свой HTML. Теги форм мешают операциям POST, генерируемым HTML, введенным Azure AD B2C.

### <a name="where-do-i-store-ui-content"></a>Где хранить содержимое пользовательского интерфейса?

При использовании собственных файлов HTML и CSS для настройки uI можно размещать содержимое uI на любой общедоступной конечной точке HTTPS, поддерживающей CORS. Например, [системы хранения Azure Blob,](../storage/blobs/storage-blobs-introduction.md)веб-серверы, CDN, AWS S3 или системы обмена файлами.

Важно отметить, что вы размещаете содержимое на общедоступной конечной точке HTTPS с поддержкой CORS. При ее указании в содержимом необходимо использовать абсолютный URL-адрес.

## <a name="get-started-with-custom-html-and-css"></a>Начало работы с пользовательских HTML и CSS

Начинайте использовать свои собственные HTML и CSS на страницах пользовательских интерфейсов, следуя этим рекомендациям.

- Создайте корректное содержимое HTML и добавьте в раздел `<body>` пустой элемент `<div id="api"></div>`. Этот элемент обозначает место, в которое будет добавляться содержимое Azure AD B2C. Ниже приведен пример страницы с минимальным числом элементов.

    ```html
    <!DOCTYPE html>
    <html>
      <head>
        <title>!Add your title here!</title>
        <link rel="stylesheet" href="https://mystore1.blob.core.windows.net/b2c/style.css">
      </head>
      <body>
        <h1>My B2C Application</h1>
        <div id="api"></div>   <!-- Leave this element empty because Azure AD B2C will insert content here. -->
      </body>
    </html>
    ```

- Измените стиль элементов пользовательского интерфейса, которые Azure AD B2C вставляет в страницу, с помощью каскадных таблиц стилей. В примере ниже показан простой CSS-файл, который также включает в себя параметры для регистрации внедренных элементов HTML.

    ```css
    h1 {
      color: blue;
      text-align: center;
    }
    .intro h2 {
      text-align: center;
    }
    .entry {
      width: 400px ;
      margin-left: auto ;
      margin-right: auto ;
    }
    .divider h2 {
      text-align: center;
    }
    .create {
      width: 400px ;
      margin-left: auto ;
      margin-right: auto ;
    }
    ```

- Затем разместите это содержимое в конечной точке HTTPS (CORS-доступ должен быть включен). При настройке CORS необходимо включить методы запроса GET и OPTIONS.
- Создание или ред., использование созданного вами пользовательского потока или пользовательской политики для использования содержимого.

### <a name="html-fragments-from-azure-ad-b2c"></a>Фрагменты HTML из Azure AD B2C

В таблице ниже приведены фрагменты кода HTML, которые служба Azure AD B2C добавляет в элемент `<div id="api"></div>` в вашем содержимом.

| Вставленная страница | Описание кода HTML |
| ------------- | ------------------- |
| Выбора поставщика удостоверений | Содержит список кнопок для поставщиков удостоверений, которые можно выбирать во время регистрации или входа пользователя. На соответствующих кнопках отмечены поставщики удостоверений социальных сетей, например Facebook и Google+, или локальных учетных записей (адрес электронной почты или имя пользователя). |
| Регистрация локальной учетной записи | Содержит форму для регистрации локальной учетной записи по адресу электронной почты или имени пользователя. Форма может содержать различные элементы управления для ввода текста, например: текстовое поле, поле ввода пароля, переключатель, раскрывающийся список с единственным выбором или флажки множественного выбора. |
| Регистрация учетной записи социальных сетей | Может появиться при регистрации с помощью имеющейся учетной записи от поставщика удостоверений в социальных сетях, например Facebook или Google+. Он используется, когда дополнительная информация должна быть собрана от клиента с помощью формы регистрации. |
| Единая регистрация или вход | Обрабатывает регистрацию и вход клиентов, которые могут использовать поставщики удостоверений, такие как Facebook или Google+, или локальные учетные записи. |
| Многофакторная Идентификация | Клиенты могут подтвердить свой номер телефона (с помощью текстового сообщения или голосового звонка) во время регистрации или входа. |
| Error | Предоставляет клиенту сведения об ошибке. |

## <a name="company-branding-preview"></a>Брендинг компании (предварительный просмотр)

Вы можете настроить страницы потока пользователей с логотипом баннера, фоновым изображением и цветом фона с помощью брендинга компании Azure Active Directory [Company.](../active-directory/fundamentals/customize-branding.md)

Чтобы настроить страницы пользовательского потока, вы сначала настраиваете брендинг компании в Active Directory Azure, а затем включите его в макеты страниц потоков пользователей в Azure AD B2C.

[!INCLUDE [preview note](../../includes/active-directory-b2c-public-preview.md)]

### <a name="configure-company-branding"></a>Настройка фирменной символики компании

Начните с установки логотипа баннера, фонового изображения и цвета фона в **брендинге компании.**

1. Войдите на [портал Azure](https://portal.azure.com).
1. Выберите фильтр **Каталог и подписка** в верхнем меню, а затем выберите каталог, содержащий клиент Azure AD B2C.
1. На портале Azure ищите **Azure AD B2C.**
1. Под **управлением**, выберите **брендинг компании**.
1. Выполните действия по [брендингу Add на странице регистрации в каталоге Azure Active Directory вашей организации.](../active-directory/fundamentals/customize-branding.md)

Имейте в виду эти вещи при настройке брендинга компании в Azure AD B2C:

* Брендинг компании в Azure AD B2C в настоящее время ограничен **фоновым изображением,** **логотипом баннеров**и настройкой **фонового цвета.** Другие свойства в фирменной панели брендинга, например, в **Расширенный настройки**, *не поддерживаются.*
* На страницах потока пользователей отображается цвет фона перед загрузкой фонового изображения. Мы рекомендуем вам выбрать цвет фона, который будет точно совпадать с цветами в фоновом изображении для более плавной загрузки.
* Логотип баннера отображается в письмах проверки, отправленных пользователям, когда они инициируют поток пользователей, регистрирующийся.

### <a name="enable-branding-in-user-flow-pages"></a>Включить брендинг на страницах потока пользователей

После настройки брендинга компании включите его в потоки пользователей.

1. В левом меню портала Azure выберите **Azure AD B2C.**
1. В **соответствии**с политиками выберите **потоки пользователей (политики).**
1. Выберите поток пользователей, для которого вы хотите включить брендинг компании. Брендинг компании **не поддерживается** для *типа sign in v1* и *Profile editing v1.*
1. Под **настраивать**, выберите **макеты страницы,** а затем выберите макет, который вы хотели бы бренд. Например, выберите **Unified регистрацию или зарегистрируйтесь на странице.**
1. Для **версии для макета страницы (Preview)** выберите версию **1.2.0** или выше.
1. Нажмите кнопку **Сохранить**.

Если вы хотите маркировать все страницы в потоке пользователей, установите версию макета страницы для каждого макета страницы в потоке пользователя.

![Выбор макета страницы в Azure AD B2C на портале Azure](media/customize-ui-overview/portal-02-page-layout-select.png)

На этом аннотированном примере показан пользовательский логотип баннера и фоновое изображение на *странице регистрации и регистрации на* странице потока пользователей, используюейшем шаблон Ocean Blue:

![Фирменная страница регистрации/регистрации, обслуживаемых Azure AD B2C](media/customize-ui-overview/template-ocean-blue-branded.png)

### <a name="use-company-branding-assets-in-custom-html"></a>Используйте фирменные активы компании в пользовательском HTML

Чтобы использовать брендинговые активы вашей компании `<div id="api">` в пользовательском HTML, добавьте следующие теги за пределами тега:

```HTML
<img data-tenant-branding-background="true" />
<img data-tenant-branding-logo="true" alt="Company Logo" />
```

Источник изображения заменяется на фоновое изображение и логотип баннера. Как описано в разделе Get started с пользовательским разделом [HTML и CSS,](#get-started-with-custom-html-and-css) используйте классы CSS для стильа и размещения активов на странице.

## <a name="localize-content"></a>Локализация контента

Локализовать содержимое HTML можно, включив [настройку языка](user-flow-language-customization.md) в клиенте Azure AD B2C. Включение этой функции позволяет Azure AD B2C `ui-locales` перенаправить параметр OpenID Connect в конечную точку. Сервер содержимого может использовать этот параметр для предоставления HTML-страниц на конкретном языке.

Можно извлекать содержимое из разных расположений в зависимости от используемого языкового стандарта. В конечной точке с поддержкой CORS можно настроить структуру папок для размещения содержимого для определенных языков. При использовании шаблона подстановки `{Culture:RFC5646}` запрос будет правильным.

Например, пользовательская страница URI может выглядеть следующим образом:

```HTTP
https://contoso.blob.core.windows.net/{Culture:RFC5646}/myHTML/unified.html
```

Вы можете загрузить страницу на французском языке, потянув содержание из:

```HTTP
https://contoso.blob.core.windows.net/fr/myHTML/unified.html
```

## <a name="examples"></a>Примеры

Вы можете найти несколько файлов шаблонов образца в репозитории [B2C-AzureBlobStorage-Client](https://github.com/azureadquickstarts/b2c-azureblobstorage-client) на GitHub.

Образцы HTML и CSS-файлов в шаблонах находятся в [каталоге /sample_templates.](https://github.com/AzureADQuickStarts/B2C-AzureBlobStorage-Client/tree/master/sample_templates)

## <a name="next-steps"></a>Дальнейшие действия

- Если вы используете **потоки пользователей,** вы можете начать настраивать пользовательский интерфейс с помощью учебника:

    [Руководство по настройке пользовательского интерфейса приложений в Azure Active Directory B2C](tutorial-customize-ui.md).
- Если вы используете **пользовательские политики,** вы можете начать настраивать пользовательский пользовательский иммунитет со статьей:

    [Настройте пользовательский интерфейс приложения с помощью пользовательской политики в Azure Active Directory B2C.](custom-policy-ui-customization.md)
