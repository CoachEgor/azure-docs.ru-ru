---
title: О настройке пользовательского интерфейса в Azure Active Directory B2C | Документация Майкрософт
description: Узнайте, как настроить пользовательский интерфейс своих приложений, использующих Azure Active Directory B2C.
services: active-directory-b2c
author: mmacy
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 02/07/2019
ms.author: marsma
ms.subservice: B2C
ms.openlocfilehash: 13ae1b74acbcab8d623c24d6a7b8d7e1355b80e8
ms.sourcegitcommit: 920ad23613a9504212aac2bfbd24a7c3de15d549
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2019
ms.locfileid: "68227153"
---
# <a name="about-user-interface-customization-in-azure-active-directory-b2c"></a>О настройке пользовательского интерфейса в Azure Active Directory B2C

Возможность добавить фирменную символику и настроить пользовательский интерфейс, которую Azure Active Directory (Azure AD) B2C предоставляет для приложений, важна, чтобы обеспечить удобство взаимодействия для клиента. Эти возможности взаимодействия включают в себя изменение профиля, регистрацию, вход в систему и сброс пароля. Эта статья содержит сведения, которые помогут настроить пользовательский интерфейс приложений.

В зависимости от требований к этим возможностям можно по-разному настроить пользовательский интерфейс приложения. Пример:

- Если вы используете [потоки пользователей](active-directory-b2c-reference-policies.md) для функций регистрации или входа, сброса пароля или изменения профиля в приложении, используйте [портал Azure, чтобы настроить пользовательский интерфейс](tutorial-customize-ui.md).
- Если вы используете поток пользователя версии 2, вы можете использовать [шаблон разметки страницы](#page-layout-templates), чтобы изменить внешний вид страниц потока пользователя без дальнейшей настройки. Например, вы можете применить тему василькового или синевато-серого цвета ко всем страницам в потоке пользователя.
- Если вы обеспечиваете только вход, сопутствующую страницу сброса пароля и электронные сообщения для проверки, то можно выполнить те же действия по настройке, что и для [страницы входа Azure AD](../active-directory/fundamentals/customize-branding.md).
- Если клиентам предоставляется возможность изменить свой профиль перед входом в систему, они перенаправляются на страницу, настроить которую можно, выполнив те же действия, что и для настройки страницы входа Azure AD.
- Если вы используете [настраиваемые политики](active-directory-b2c-overview-custom.md) для регистрации или входа, сброса пароля или изменения профиля в приложении, используйте [файлы политик, чтобы настроить пользовательский интерфейс](active-directory-b2c-ui-customization-custom.md).
- Если необходимо предоставлять динамическое содержимое в зависимости от решений клиента, то можно использовать [настраиваемые политики, которые могут изменять содержимое страницы](active-directory-b2c-ui-customization-custom-dynamic.md) в зависимости от параметра, передаваемого в строке запроса. Например, можно изменить фоновое изображение страницы регистрации или входа в Azure AD B2C на основе параметра, передаваемого из веб-приложения или мобильного приложения.
- Вы можете включить код на стороне клиента JavaScript в [пользовательских потоках](user-flow-javascript-overview.md) или [пользовательских политиках](page-layout.md) Azure AD B2C.

Служба Azure AD B2C выполняет код в браузере пользователя и использует современный метод — [общий доступ к ресурсам независимо от источника (CORS)](https://www.w3.org/TR/cors/). Во время выполнения содержимое загружается с URL-адреса, указанного в потоке пользователя или политике. Для разных страниц указываются разные URL-адреса. После объединения содержимого, загруженного с URL-адреса, с HTML-фрагментом, вставленным из Azure AD B2C, оно отображается клиенту.

При использовании собственных файлов HTML и CSS для настройки пользовательского интерфейса ознакомьтесь со следующими инструкциями перед началом работы.

- Azure AD B2C объединяет содержимое HTML с вашими страницами. Не следует копировать и пытаться изменить стандартное содержимое, которое предоставляет Azure AD B2C. Лучше всего создать содержимое HTML с нуля, используя стандартное содержимое в качестве образца.
- Теперь JavaScript можно включить в ваше пользовательское содержимое.
- Поддерживаемые версии браузеров:
    - Internet Explorer 11, 10 и Microsoft Edge
    - ограниченная поддержка Internet Explorer 9 и Internet Explorer 8;
    - Google Chrome 42.0 и выше
    - Mozilla Firefox 38.0 и выше
- Убедитесь, что в HTML не добавлены теги form. Они будут мешать операциям POST, созданным на основе внедренного кода HTML из Azure AD B2C.

## <a name="page-layout-templates"></a>Шаблоны разметки страницы

Для пользовательских потоков версии 2 вы можете выбрать заранее разработанный шаблон, который придаст страницам лучший вид по умолчанию и послужит хорошей основой для своих собственных настроек.

В меню слева в разделе **Настройка** выберите **Макеты страниц**. Затем выберите **Шаблон (предварительная версия)** .

![Раскрывающийся список выбора шаблона на странице "поток пользователей" портал Azure](media/customize-ui-overview/template.png)

Выберите шаблон из списка. Например шаблон **Васильковый** применяет следующий макет к вашим страницам потока пользователя.

![Пример шаблона голубого цвета, отображаемого на странице входа в систему](media/customize-ui-overview/ocean-blue.png)

При выборе шаблона выбранный макет применяется ко всем страницам потока пользователя, а в поле **Код URI пользовательской страницы** отображается URI для каждой страницы.

## <a name="where-do-i-store-ui-content"></a>Где хранить содержимое пользовательского интерфейса?

При использовании собственных файлов HTML и CSS для настройки пользовательского интерфейса вы можете разместить содержимое пользовательского интерфейса в любом расположении: [в хранилище BLOB-объектов Azure](../storage/blobs/storage-blobs-introduction.md), на веб-серверах, в сетях доставки содержимого, AWS S3 или системах обмена файлами. Важно отметить, что вы размещаете содержимое на общедоступной конечной точке HTTPS с поддержкой CORS. При ее указании в содержимом необходимо использовать абсолютный URL-адрес.

## <a name="how-do-i-get-started"></a>Как начать работу?

Для настройки пользовательского интерфейса нужно выполнить следующее.

- Создайте корректное содержимое HTML и добавьте в раздел `<body>` пустой элемент `<div id="api"></div>`. Этот элемент обозначает место, в которое будет добавляться содержимое Azure AD B2C. Ниже приведен пример страницы с минимальным числом элементов.

    ```html
    <!DOCTYPE html>
    <html>
      <head>
        <title>!Add your title here!</title>
        <link rel="stylesheet" href="https://mystore1.blob.core.windows.net/b2c/style.css">
      </head>
      <body>
        <h1>My B2C Application</h1>
        <div id="api"></div>   <!-- Leave this element empty because Azure AD B2C will insert content here. -->
      </body>
    </html>
    ```

- Затем разместите это содержимое в конечной точке HTTPS (CORS-доступ должен быть включен). При настройке CORS необходимо включить методы запроса GET и OPTIONS.
- Измените стиль элементов пользовательского интерфейса, которые Azure AD B2C вставляет в страницу, с помощью каскадных таблиц стилей. В примере ниже показан простой CSS-файл, который также включает в себя параметры для регистрации внедренных элементов HTML.

    ```css
    h1 {
      color: blue;
      text-align: center;
    }
    .intro h2 {
      text-align: center;
    }
    .entry {
      width: 400px ;
      margin-left: auto ;
      margin-right: auto ;
    }
    .divider h2 {
      text-align: center;
    }
    .create {
      width: 400px ;
      margin-left: auto ;
      margin-right: auto ;
    }
    ```

- Создайте или измените политику, чтобы использовать содержимое, которое вы создали.

В таблице ниже приведены фрагменты кода HTML, которые служба Azure AD B2C добавляет в элемент `<div id="api"></div>` в вашем содержимом.

| Вставленная страница | Описание кода HTML |
| ------------- | ------------------- |
| Выбора поставщика удостоверений | Содержит список кнопок для поставщиков удостоверений, которые можно выбирать во время регистрации или входа пользователя. На соответствующих кнопках отмечены поставщики удостоверений социальных сетей, например Facebook и Google+, или локальных учетных записей (адрес электронной почты или имя пользователя). |
| Регистрация локальной учетной записи | Содержит форму для регистрации локальной учетной записи по адресу электронной почты или имени пользователя. Форма может содержать различные элементы управления для ввода текста, например: текстовое поле, поле ввода пароля, переключатель, раскрывающийся список с единственным выбором или флажки множественного выбора. |
| Регистрация учетной записи социальных сетей | Может появиться при регистрации с помощью имеющейся учетной записи от поставщика удостоверений в социальных сетях, например Facebook или Google+. Она используется, если нужно собрать дополнительные сведения о клиенте с использованием формы регистрации. |
| Единая регистрация или вход | Обрабатывает регистрацию и вход клиентов, которые могут использовать поставщики удостоверений, такие как Facebook или Google+, или локальные учетные записи. |
| Многофакторная Идентификация | Клиенты могут подтвердить свой номер телефона (с помощью текстового сообщения или голосового звонка) во время регистрации или входа. |
| Error | Предоставляет клиенту сведения об ошибке. |


## <a name="how-do-i-localize-content"></a>Как можно локализовать содержимое?

Локализовать содержимое HTML можно, включив [настройку языка](active-directory-b2c-reference-language-customization.md) в клиенте Azure AD B2C. Таким образом Azure AD B2C сможет переадресовать параметр подключения Open ID Connect, `ui-locales`, на конечную точку. Сервер содержимого может использовать этот параметр для предоставления HTML-страниц на конкретном языке.

Можно извлекать содержимое из разных расположений в зависимости от используемого языкового стандарта. В конечной точке с поддержкой CORS можно настроить структуру папок для размещения содержимого для определенных языков. При использовании значения с подстановочными знаками {Culture:RFC5646} будет вызвано соответствующее содержимое. Например, универсальный код ресурса (URI) пользовательской страницы может иметь вид `https://contoso.blob.core.windows.net/{Culture:RFC5646}/myHTML/unified.html`. Можно загрузить эту страницу на французском языке, извлекая содержимое из `https://contoso.blob.core.windows.net/fr/myHTML/unified.html`.

## <a name="examples"></a>Примеры

Можно скачать и просмотреть эти [примеры файлов шаблона](https://github.com/azureadquickstarts/b2c-azureblobstorage-client/archive/master.zip), чтобы ознакомиться с примерами настроек.

## <a name="next-steps"></a>Следующие шаги

- Если вы используете потоки пользователей, вы можете приступить к настройке пользовательского интерфейса с помощью статьи [Руководство по настройке пользовательского интерфейса приложений в Azure Active Directory B2C](tutorial-customize-ui.md).
- Если вы используете настраиваемые политики, вы можете приступить к настройке пользовательского интерфейса с помощью статьи [Настройка пользовательского интерфейса приложения с помощью настраиваемой политики в Azure Active Directory B2C](active-directory-b2c-ui-customization-custom.md).

