---
title: Управление данными пользователей в Azure Active Directory B2C | Документация Майкрософт
description: Сведения о том, как удалить или экспортировать пользовательские данные в Azure AD B2C.
services: active-directory-b2c
author: mmacy
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 05/06/2018
ms.author: marsma
ms.subservice: B2C
ms.openlocfilehash: eb99cd94dca2a463c275dd5d4fab540b4fc55318
ms.sourcegitcommit: adb6c981eba06f3b258b697251d7f87489a5da33
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2019
ms.locfileid: "66510446"
---
# <a name="manage-user-data-in-azure-active-directory-b2c"></a>Управление пользовательскими данными в Azure Active Directory B2C

 В этой статье описано, как управлять пользовательскими данными в Azure Active Directory (Azure AD) B2C с помощью операций, предоставляемых [API Graph Azure Active Directory](/previous-versions/azure/ad/graph/api/api-catalog). Управление пользовательскими данными позволяет удалять данные или экспортировать их из журналов аудита.

[!INCLUDE [gdpr-intro-sentence.md](../../includes/gdpr-intro-sentence.md)]

## <a name="delete-user-data"></a>Удаление пользовательских данных

Пользовательские данные хранятся в каталоге Azure AD B2C и журналах аудита. Все пользовательские данные аудита сохраняются в Azure AD B2C в течение 30 дней. Если вы хотите удалить данные пользователя в течение этого периода, можно использовать операцию [Удалить пользователя](/previous-versions/azure/ad/graph/api/users-operations#DeleteUser). Операция удаления требуется для каждого из клиентов Azure AD B2C, где могут храниться данные. 

Каждому пользователю в Azure AD B2C назначается идентификатор объекта. Это однозначный идентификатор, позволяющий удалить пользовательские данные в Azure AD B2C. В зависимости от архитектуры идентификатор объекта может использоваться как полезный идентификатор корреляции в других службах, например базах данных для финансовых и маркетинговых сведений, а также для управления отношениями с клиентами. 

Наиболее точным является получение идентификатора объекта для пользователя в рамках проверки подлинности в Azure AD B2C. Если от пользователя получен допустимый запрос к данным с помощью других методов, для поиска этого пользователя и уточнения идентификатора объекта может потребоваться автономная процедура, например поиск агентом поддержки из центра обслуживания клиентов. 

Следующий пример показывает возможную последовательность удаления данных:

1. Пользователь выполняет вход и выбирает **Delete my data** (Удалить мои данные).
2. Приложение предлагает возможность удаления данных в разделе администрирования приложения.
3. Приложение принудительно выполняет проверку подлинности в Azure AD B2C. Azure AD B2C возвращает в приложение токен с идентификатором объекта этого пользователя. 
4. Приложение получает токен и использует идентификатор объекта для удаления пользовательских данных путем вызова API Graph Azure AD. API Graph Azure AD удаляет пользовательские данные и возвращает код состояния 200 OK.
5. При необходимости приложение управляет удалением пользовательских данных в других системах организации, используя идентификатор объекта или другие идентификаторы.
6. Приложение подтверждает удаление данных и сообщает пользователю о следующих шагах.

## <a name="export-customer-data"></a>Экспорт данных клиента

Процесс экспорта пользовательских данных из Azure AD B2C похож на процедуру удаления.

Пользовательские данные Azure AD B2C ограничены следующим:

- **Данные, хранящиеся в Azure Active Directory**: данные можно извлечь при аутентификации пользователя в Azure AD B2C, используя идентификатор объекта или любое учетное имя, например адрес электронной почты или имя пользователя. 
- **Отчет о событиях аудита для конкретного пользователя**: данные индексируются с использованием идентификатора объекта.

В следующем примере операции экспорта данных действия, выполняемые приложением, могут также выполняться серверным процессом или пользователем с ролью администратора в каталоге:

1. Пользователь входит в приложение. При необходимости Azure AD B2C принудительно выполняет аутентификацию с использованием MFA.
2. Приложение использует учетные данные пользователя для вызова операции API Graph Azure AD для получения атрибутов пользователя. API Graph Azure AD предоставляет данные атрибутов в формате JSON. В зависимости от схемы содержимое токена идентификатора может включать все персональные данные пользователя.
3. Приложение извлекает действия аудита для пользователя. API Graph Azure AD предоставляет приложению данные о событии.
4. Приложение объединяет данные и предоставляет их пользователю.

## <a name="next-steps"></a>Дальнейшие действия

- См. дополнительные сведения об [управлении доступом пользователей к приложению](manage-user-access.md).




