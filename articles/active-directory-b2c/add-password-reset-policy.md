---
title: Настройка потока сброса пароля
titleSuffix: Azure AD B2C
description: Узнайте, как настроить поток сброса пароля в Azure Active Directory B2C.
services: active-directory-b2c
author: msmimart
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: how-to
ms.date: 12/16/2020
ms.author: mimart
ms.subservice: B2C
zone_pivot_groups: b2c-policy-type
ms.openlocfilehash: 6e6e4aa4ece781f415308b638323f8d4d4b34038
ms.sourcegitcommit: 86acfdc2020e44d121d498f0b1013c4c3903d3f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/17/2020
ms.locfileid: "97618828"
---
# <a name="set-up-a-password-reset-flow-in-azure-active-directory-b2c"></a>Настройка потока сброса пароля в Azure Active Directory B2C

[!INCLUDE [active-directory-b2c-choose-user-flow-or-custom-policy](../../includes/active-directory-b2c-choose-user-flow-or-custom-policy.md)]

## <a name="password-rest-flow"></a>Поток RESTful пароля

Политика сброса пароля позволяет пользователям сбрасывать свой забытый пароль. Поток сброса пароля включает следующие шаги. 
1. На странице регистрации и входа пользователь нажимает кнопку "Забыли пароль?". и создайте ее бесплатно. Azure AD B2C возвращает код ошибки AADB2C90118 для приложения. Приложение обрабатывает этот код ошибки, вызывая политику сброса пароля. 
1. Пользователи предоставляют и подтверждают свой адрес электронной почты с временным секретным кодом одного раза.
1. Введите новый пароль.

![Поток сброса пароля](./media/add-password-reset-policy/password-reset-flow.png)

## <a name="prerequisites"></a>Предварительные требования

Если вы еще не сделали этого, [зарегистрируйте веб-приложение в Azure Active Directory B2C](tutorial-register-applications.md).

::: zone pivot="b2c-user-flow"

## <a name="create-a-password-reset-user-flow"></a>Создание потока пользователя сброса пароля

Чтобы разрешить пользователям приложения сбрасывать пароль, используйте поток пользователя сброса паролей.

1. В меню страницы обзора для арендатора Azure AD B2C выберите **Потоки пользователей** и щелкните **Создать поток пользователя**.
1. На странице **Создание потока пользователя** выберите поток пользователя **Сброс пароля**. 
1. В разделе **Выбор версии**, выберите элемент **Рекомендуемая** и нажмите кнопку **Создать**.
1. Введите **имя** потока пользователя. Например, *passwordreset1*.
1. В разделе **Поставщики удостоверений** включите **Reset password using email address** (Сброс пароля с использованием адреса электронной почты).
2. В разделе "Утверждения приложений" щелкните **Показать больше** и выберите утверждения, которые необходимо вернуть в токенах проверки подлинности, отправляемых приложению. Например, выберите **ИД объекта пользователя**.
3. Нажмите кнопку **ОК**.
4. Для добавления потока пользователя щелкните **Создать**. Префикс *B2C_1* автоматически добавляется к имени.

### <a name="test-the-user-flow"></a>Тестирование потока пользователя

1. Выберите созданный поток пользователя, чтобы открыть его страницу обзора, а затем щелкните **Выполнить поток пользователя**.
1. В разделе **Приложение** выберите зарегистрированное ранее веб-приложение с именем *webapp1*. В поле **URL-адрес ответа** должно содержаться значение `https://jwt.ms`.
1. Выберите **Выполнить поток пользователя**, проверьте адрес электронной почты для созданной ранее учетной записи и щелкните **Продолжить**.
1. Теперь вы как пользователь сможете изменять пароль. Измените пароль и щелкните **Продолжить**. Токен должен вернуться по адресу `https://jwt.ms` и отобразиться пользователю.

::: zone-end

::: zone pivot="b2c-custom-policy"

## <a name="create-a-password-reset-policy"></a>Создание политики сброса паролей

Пользовательские политики — это набор XML-файлов, отправляемых в клиент Azure AD B2C для определения путей взаимодействия пользователя. Мы предоставляем начальные пакеты с несколькими предварительно созданными политиками, в том числе: регистрация и вход, сброс пароля и политика редактирования профиля. Дополнительные сведения см. [в разделе Приступая к работе с пользовательскими политиками в Azure AD B2C](custom-policy-get-started.md).

::: zone-end

## <a name="next-steps"></a>Дальнейшие действия

Настройка [потока редактирования профиля](add-profile-editing-policy.md).