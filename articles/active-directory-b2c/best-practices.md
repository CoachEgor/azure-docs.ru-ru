---
title: Рекомендации по Azure AD B2C
titleSuffix: Azure AD B2C
description: Рекомендации и рекомендации, которые следует учитывать при работе с Azure Active Directory B2C (Azure AD B2C).
services: active-directory-b2c
author: vigunase
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 03/03/2020
ms.author: vigunase
ms.subservice: B2C
ms.openlocfilehash: b16c60130836cf0e3b38092b894129f503ee6e83
ms.sourcegitcommit: f7fb9e7867798f46c80fe052b5ee73b9151b0e0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2020
ms.locfileid: "82141666"
---
# <a name="recommendations-and-best-practices-for-azure-active-directory-b2c"></a>Рекомендации и рекомендации для Azure Active Directory B2C

Следующие рекомендации и рекомендации охватывают некоторые основные аспекты интеграции Azure Active Directory (Azure AD) с B2C в существующие или новые среды приложений.

## <a name="fundamentals"></a>Основные сведения

|  |  |
|--|--|
| Выбор потоков пользователя для большинства сценариев | Инфраструктура процедур идентификации Azure AD B2C — это основная сила службы. Политики полностью описывают процесс идентификации: регистрацию, вход и редактирование профиля. Чтобы вам было проще настроить наиболее распространенные задачи идентификации, на портале Azure AD B2C реализованы предопределенные настраиваемые политики, которые называются потоками пользователей. Используя потоки пользователей, вы можете создавать привлекательные возможности для пользователей за считаные минуты, всего за несколько щелчков мыши. [Узнайте, когда следует использовать потоки пользователей и пользовательские политики](custom-policy-overview.md#comparing-user-flows-and-custom-policies).|
| Регистрация приложений | Каждое приложение (в Интернете, в машинном код) и защищенный API должны быть зарегистрированы в Azure AD B2C. Если у приложения есть как веб-, так и собственная версия iOS и Android, их можно зарегистрировать как одно приложение в Azure AD B2C с одинаковым ИДЕНТИФИКАТОРом клиента. Узнайте, как [регистрировать OIDC, SAML, Web и собственные приложения](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-register-applications?tabs=applications). Дополнительные сведения о [типах приложений, которые можно использовать в Azure AD B2C](https://docs.microsoft.com/azure/active-directory-b2c/application-types). |
| Перейти к ежемесячной оплате активных пользователей | Azure AD B2C был перемещен из месячных активных проверок подлинности в выставленные ежемесячные активные пользователи (MAU). Большинство клиентов найдут эту модель экономично. [Дополнительные сведения о выставлении счетов за использование ежемесячных активных пользователей](https://azure.microsoft.com/updates/mau-billing/). |

## <a name="planning-and-design"></a>Планирование и разработка

Определение архитектуры приложения и службы, инвентаризации текущих систем и планирование перехода на Azure AD B2C.

|  |  |
|--|--|
| Разработка комплексного решения | Включите все зависимости приложений при планировании интеграции Azure AD B2C. Примите во внимание все службы и продукты, которые в настоящее время находятся в вашей среде или могут потребоваться для добавления в решение, например функции Azure, системы управления отношениями с клиентами (CRM), шлюз управления API Azure и службы хранилища. Примите во внимание безопасность и масштабируемость всех служб. |
| Документирование возможностей пользователей | Подробное описание всех путей взаимодействия пользователя, которые могут иметь ваши клиенты в вашем приложении. Включите каждый экран и все потоки ветвления, которые они могут столкнуться при взаимодействии с аспектами идентификации и профилирования приложения. Включите удобство, доступность и локализацию в своем планировании. |
| Выберите правильный протокол проверки подлинности |  Сведения о различных сценариях приложений и их рекомендуемых потоках проверки подлинности см. в разделе [сценарии и поддерживаемые потоки проверки подлинности](../active-directory/develop/authentication-flows-app-scenarios.md#scenarios-and-supported-authentication-flows). |
| Пилотная пробная версия (проверка концепции) — комплексное взаимодействие с пользователем | Начните с [примеров кода Майкрософт](code-samples.md) и [примеров сообщества](https://github.com/azure-ad-b2c/samples). |
| Создание плана миграции |Заблаговременное планирование может привести к более плавной миграции. Дополнительные сведения о [миграции пользователей](user-migration.md).|
| Удобство использования и безопасность | Решение должно подвергнуться оптимальному балансу между удобством использования приложений и приемлемым уровнем риска организации. |
| Перемещение локальных зависимостей в облако | Чтобы обеспечить устойчивое решение, попробуйте переместить существующие зависимости приложений в облако. |
| Перенос существующих приложений в b2clogin.com | Прекращение использования login.microsoftonline.com вступит в действие для всех клиентов Azure AD B2C 4 декабря 2020. [Подробнее.](b2clogin.md) |

## <a name="implementation"></a>Реализация

На этапе реализации примите во внимание следующие рекомендации.

|  |  |
|--|--|
| Изменение настраиваемых политик с помощью расширения Azure AD B2C для Visual Studio Code | Скачайте Visual Studio Code и созданное сообществом [расширение из Visual Studio Code Marketplace](https://marketplace.visualstudio.com/items?itemName=AzureADB2CTools.aadb2c). Хотя это и не официальный продукт корпорации Майкрософт, расширение Azure AD B2C для Visual Studio Code содержит несколько функций, облегчающих работу с пользовательскими политиками. |
| Узнайте, как устранять неполадки Azure AD B2C | Узнайте, как [устранять неполадки пользовательских политик](https://docs.microsoft.com/azure/active-directory-b2c/troubleshoot-custom-policies?tabs=applications) во время разработки. Узнайте, как выглядит нормальный поток проверки подлинности, и используйте средства для обнаружения аномалий и ошибок. Например, используйте [Application Insights](troubleshoot-with-application-insights.md) , чтобы просматривать выходные журналы пути взаимодействия пользователя. |
| Использование нашей библиотеки проверенных шаблонов пользовательских политик | Найдите [примеры](https://github.com/azure-ad-b2c/samples) для нескольких улучшенных Azure AD B2C путей взаимодействия пользователей и управления доступом клиентов (CIAM). |


## <a name="testing"></a>Тестирование

Тестирование и автоматизация реализации Azure AD B2C.

|  |  |
|--|--|
| Учетная запись для глобального трафика | Используйте источники трафика из разных глобальных адресов, чтобы протестировать требования к производительности и локализации. Убедитесь, что все HTML, CSS и зависимости соответствуют вашим потребностям в производительности. |
| Функциональные возможности и тестирование пользовательского интерфейса | Протестируйте сквозные потоки пользователей. Добавляйте синтетические тесты каждые несколько минут с помощью Selenium, веб-теста VS и т. д. |
| Тестирование с помощью пера | Прежде чем приступить к работе с решением, выполните испытания на проникновение, чтобы убедиться, что все компоненты безопасны, включая зависимости от сторонних производителей. Убедитесь, что вы защитили интерфейсы API с маркерами доступа и использовали правильный протокол проверки подлинности для вашего сценария приложения. Дополнительные сведения о [тестировании на проникновение](https://docs.microsoft.com/azure/security/fundamentals/pen-testing) и [Microsoft Cloud правилах единого тестирования уязвимости](https://www.microsoft.com/msrc/pentest-rules-of-engagement?rtc=1). |
| A/B-тестирование | Продавайте новые функции с помощью небольшого случайного набора пользователей, прежде чем развертывать всю генеральную совокупность. JavaScript, включенный в Azure AD B2C, можно интегрировать с такими инструментами тестирования и/B, как оптимизация, ясность и другие. |
| Нагрузочное тестирование | Azure AD B2C может масштабироваться, но приложение может масштабироваться, только если все его зависимости могут масштабироваться. Нагрузочное тестирование интерфейсов API и CDN. |
| Регулирование |  Azure AD B2C регулирует трафик, если слишком много запросов отправляются из одного источника в течение короткого периода времени. Используйте несколько источников трафика при нагрузочном тестировании и аккуратно `AADB2C90229` обработайте код ошибки в приложениях. |
| Служба автоматизации | Используйте конвейеры непрерывной интеграции и доставки (CI/CD) для автоматизации тестирования и развертывания, например [Azure DevOps](deploy-custom-policies-devops.md). |

## <a name="operations"></a>Операции

Управление средой Azure AD B2C.

|  |  |
|--|--|
| Создание нескольких сред | Для упрощения операций и развертывания развертываний Создайте отдельные среды для разработки, тестирования, подготовки к производству и рабочей среде. Создайте клиенты Azure AD B2C для каждого из них. |
| Использование системы управления версиями для пользовательских политик | Рассмотрите возможность использования GitHub, Azure Repos или другой облачной системы управления версиями для Azure AD B2C настраиваемых политик. |
| Использование API Microsoft Graph для автоматизации управления клиентами B2C | Microsoft Graph API:<br/>Управление [инфраструктурой процедур идентификации](https://docs.microsoft.com/graph/api/resources/trustframeworkpolicy?view=graph-rest-beta) (пользовательские политики)<br/>[Ключи](https://docs.microsoft.com/graph/api/resources/trustframeworkkeyset?view=graph-rest-beta)<br/>[Маршруты пользователей](https://docs.microsoft.com/graph/api/resources/identityuserflow?view=graph-rest-beta) |
| Интеграция с Azure DevOps | [Конвейер CI/CD](deploy-custom-policies-devops.md) упрощает перемещение кода между разными средами и гарантирует готовность к работе в рабочей среде.   |
| Интеграция с Azure Monitor | [События журнала аудита](view-audit-logs.md) хранятся только в течение семи дней. [Интегрируйтесь с Azure Monitor](azure-monitor.md) , чтобы хранить журналы для долгосрочного использования или интегрировать их со сторонними средствами управления сведениями о безопасности и событиями (SIEM) для получения ценной информации о вашей среде. |
| Настройка активных предупреждений и мониторинга | [Следите за поведением пользователей](active-directory-b2c-custom-guide-eventlogger-appins.md) в Azure AD B2C с помощью Application Insights. |


## <a name="support-and-status-updates"></a>Поддержка и обновления состояния

Следите за актуальными сведениями о состоянии службы и найдите варианты поддержки.

|  |  |
|--|--|
| [Обновления службы](https://azure.microsoft.com/updates/?product=active-directory-b2c) |  Оставайтесь в курсе последних Azure AD B2C обновлений и объявлений продуктов. |
| [Служба технической поддержки Майкрософт](support-options.md) | Отправьте запрос в службу поддержки Azure AD B2C технических проблем. Поддержка по выставлению счетов и управлению подпиской предоставляется бесплатно. |
| [Состояние Azure](https://status.azure.com/status) | Просмотр текущего состояния работоспособности всех служб Azure. |
