---
title: Руководство по настройке Azure Active Directory B2C с помощью Вхоиам
titleSuffix: Azure AD B2C
description: Узнайте, как интегрировать проверку подлинности Azure AD B2C с Вхоиам для проверки пользователей
services: active-directory-b2c
author: gargi-sinha
manager: martinco
ms.service: active-directory
ms.workload: identity
ms.topic: how-to
ms.date: 08/20/2020
ms.author: gasinh
ms.subservice: B2C
ms.openlocfilehash: 6545c5f40004dc50904618a8ea734eb73eeee933
ms.sourcegitcommit: d39f2cd3e0b917b351046112ef1b8dc240a47a4f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/25/2020
ms.locfileid: "88817825"
---
# <a name="tutorial-for-configuring-whoiam-with-azure-active-directory-b2c"></a>Руководство по настройке Вхоиам с помощью Azure Active Directory B2C

В этом примере учебника мы представили рекомендации по настройке [вхоиамной](https://www.whoiam.ai/brims/) системы управления удостоверениями (бримс) в вашей среде и интеграции ее с Azure AD B2C.

БРИМС Вхоиам — это набор приложений и служб, которые развертываются в вашей среде. Он обеспечивает проверку подлинности пользователя, SMS и электронной почты для пользовательской базы данных. БРИМС работает в сочетании с существующим решением для управления удостоверениями и доступом и не зависит от платформы.

## <a name="prerequisites"></a>Предварительные требования

Чтобы приступить к работе, вам потребуется:

- Подписка Azure AD. Если у вас нет подписки, вы можете получить [бесплатную учетную запись](https://azure.microsoft.com/free/).

- [Клиент Azure AD B2C](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-create-tenant) , связанный с вашей подпиской Azure.

- [Пробная учетная запись](https://www.whoiam.ai/contact-us/) вхоиам

## <a name="scenario-description"></a>Описание сценария

Интеграция Вхоиам включает следующие компоненты:

- Azure AD B2C клиент — сервер авторизации, отвечающий за проверку учетных данных пользователя на основе пользовательских политик, определенных в клиенте. Он также известен как поставщик удостоверений.

- Портал администрирования для управления клиентами и их конфигураций

- Служба API, которая предоставляет различные возможности через конечные точки  

- Azure Cosmos DB, используемый в качестве серверной части для портала администрирования БРИМС и службы API

Реализация показана на следующей схеме архитектуры.

![снимок экрана для вхоиам — схема архитектуры](media/partner-whoiam/whoiam-architecture-diagram.png)

|Шаг | Описание |
|:-----| :-----------|
| 1. | Пользователь прибывает на странице входа. Пользователь запускает запрос на регистрацию или вход в приложение, которое использует Azure AD B2C в качестве поставщика удостоверений.
| 2. | В рамках проверки подлинности пользователь запрашивает подтверждение принадлежности своей электронной почты или телефона или использует свой рабочий процесс в качестве биометрической проверки.  
| 3. | Azure AD B2C вызывает службу API БРИМС, передавая адрес электронной почты пользователя, номер телефона и запись голоса.
| 4. | БРИМС использует предварительно определенные конфигурации, такие как полностью настраиваемые шаблоны электронной почты и SMS, для взаимодействия с пользователем на соответствующем языке, который соответствует внешнему интерфейсу приложения.
| 5. | После завершения проверки удостоверения пользователя БРИМС возвращает маркер для Azure AD B2C, указывающий результат проверки. Azure AD B2C предоставит пользователю доступ к приложению или попытается выполнить проверку подлинности.  

## <a name="onboard-with-whoiam"></a>Подключение с помощью Вхоиам

1. Обратитесь в [вхоиам](https://www.whoiam.ai/contact-us/) и создайте учетную запись бримс.

2. После создания учетной записи используйте рекомендации по адаптации, доступные для вас, и настройте следующие службы Azure:

    - [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) — используется для безопасного хранения паролей, таких как, пароли службы почты.

    - [Служба приложений Azure](https://azure.microsoft.com/services/app-service/) — используется для размещения API бримс и служб портала администрирования.

    - [Azure Active Directory](https://azure.microsoft.com/services/active-directory/) — используется для проверки подлинности пользователей с правами администратора на портале администрирования.

    - [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) — используется для хранения и извлечения параметров

    - [Application Insights](https://docs.microsoft.com/azure/azure-monitor/app/app-insights-overview#:~:text=Application%20Insights%2C%20a%20feature%20of%20Azure%20Monitor%2C%20is,professionals.%20Use%20it%20to%20monitor%20your%20live%20applications.) (необязательно) — используется для входа в API и на портал администрирования.

3. Развертывание API БРИМС и портала администрирования БРИМС в среде Azure.

4. Azure AD B2C примеры настраиваемой политики доступны в документации по адаптации БРИМС. Следуйте указаниям в документе, чтобы настроить приложение и использовать платформу БРИМС для проверки удостоверения пользователя.  

Дополнительные сведения о БРИМС Вхоиам см. в [документации по продукту](https://www.whoiam.ai/brims/) .

## <a name="test-the-user-flow"></a>Тестирование потока пользователя

1. Откройте клиент Azure AD B2C и в разделе политики выберите **инфраструктура процедур идентификации**.

2. Выберите ранее созданный **сигнупсигнин**.

3. Выберите **запустить поток пользователя** и выберите параметры:

   а. **Приложение**: выберите зарегистрированное приложение (пример — JWT)

   b. **URL-адрес ответа**: выберите **URL-адрес перенаправления**

   c. Выберите **Выполнить поток пользователя**.

4. Последовательно выберите процесс регистрации и создайте учетную запись.

5. Служба БРИМС будет вызываться во время потока, после создания пользовательского атрибута. Если поток неполон, убедитесь, что пользователь не сохранен в каталоге.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. в следующих статьях:

- [Пользовательские политики в Azure AD B2C](https://docs.microsoft.com/azure/active-directory-b2c/custom-policy-overview)

- [Приступая к работе с пользовательскими политиками в Azure AD B2C](https://docs.microsoft.com/azure/active-directory-b2c/custom-policy-get-started?tabs=applications)
