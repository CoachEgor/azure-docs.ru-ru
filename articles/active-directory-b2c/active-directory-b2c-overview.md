---
title: Что такое Azure Active Directory B2C | Документация Майкрософт
description: Сведения о том, как создать действия с удостоверениями, такие как регистрация, вход и управление профилем в приложении, а также управлять ими с помощью Azure Active Directory B2C.
services: active-directory-b2c
author: mmacy
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: overview
ms.date: 02/20/2019
ms.author: marsma
ms.subservice: B2C
ms.openlocfilehash: ca9d8a8373bd73d527862864d436319eb45b5f48
ms.sourcegitcommit: 920ad23613a9504212aac2bfbd24a7c3de15d549
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2019
ms.locfileid: "68227169"
---
# <a name="what-is-azure-active-directory-b2c"></a>Что такое Azure Active Directory B2C

Azure Active Directory (Azure AD) B2C — это служба B2C для управления удостоверениями. Эта служба позволяет настраивать и контролировать безопасное взаимодействие пользователей с вашими веб-приложениями, классическими, мобильными или одностраничными приложениями. С помощью Azure AD B2C пользователи могут регистрировать, изменять свои профили, а также входить в них и сбрасывать пароли. Azure AD B2C реализует формы протоколов OpenID Connect и OAuth 2.0. Важным ключом в реализации этих протоколов являются маркеры безопасности и их утверждения, которые позволяют вам предоставлять безопасный доступ к ресурсам.

*Путь взаимодействия пользователя* — это запрос, определяющий политику, которая управляет поведением взаимодействия пользователя и вашего приложения с Azure AD B2C. В Azure AD B2C доступны два способа определения путей взаимодействия пользователя.

Если вы разработчик приложений с опытом работы с удостоверениями или без него, вы можете определить общие потоки пользователей удостоверений с помощью портала Azure. Если вы являетесь специалистом по идентификации, системным интегратором, консультантом или работаете во внутренней команде по работе с удостоверениями, значит вы знакомы с потоками OpenID Connect и разбираетесь в поставщиках идентификации и проверки подлинности на основе утверждений и можете выбрать пользовательские политики на основе XML.

Прежде чем приступить к определению пути взаимодействия пользователя, вам необходимо создать клиент Azure AD B2C и зарегистрировать свое приложение и API в нем. После выполнения этих задач можете приступить к определению пути взаимодействия пользователя с помощью потоков пользователей или пользовательских политик. Вы также по желанию можете добавить или изменить поставщики удостоверений или настроить способ взаимодействия пользователя.

## <a name="protocols-and-tokens"></a>Протоколы и маркеры безопасности

Azure AD B2C поддерживает протоколы [OpenID Connect и OAuth 2.0](active-directory-b2c-reference-protocols.md) для пути взаимодействия пользователя. В реализации OpenID Connect в Azure AD B2C приложение запускает путь взаимодействия пользователя, отправляя запросы проверки подлинности в Azure AD B2C.

Результатом запроса к Azure AD B2C является маркер безопасности, например [маркер идентификатора или маркер доступа](active-directory-b2c-reference-tokens.md). Этот маркер безопасности определяет идентификатор пользователя. Маркеры принимаются из конечных точек Azure AD B2C, таких как конечные точки `/token` или `/authorize`. Из этих маркеров можно получить доступ к утверждениям, которые можно использовать для проверки идентификатора и предоставления доступа к защищенным ресурсам.

## <a name="tenants-and-applications"></a>Клиенты и приложения

В Azure AD B2C *клиент* представляет организацию и ее каталог пользователей. Каждый клиент Azure AD B2C отделен от остальных клиентов Azure AD B2C. Клиент Azure Active Directory и клиент Azure AD B2C — это разные клиенты. В клиенте содержится информация о пользователях, зарегистрировавшихся в приложении. Например, пароли, данные профиля и разрешения. Дополнительные сведения см. в статье [Руководство. по созданию клиента Azure Active Directory B2C](tutorial-create-tenant.md).

Перед настройкой приложения для использования Azure AD B2C необходимо сначала зарегистрировать его в клиенте на портале Azure. Процесс регистрации собирает значения и присваивает их приложению. К этим значениям относится идентификатор приложения, который однозначно идентифицирует приложение, и URI перенаправления, который используется для обратного перенаправления ответов в приложение.

Взаимодействие каждого приложения использует аналогичный высокоуровневый шаблон:

1. Приложение направляет пользователя для выполнения политики.
2. Пользователь выполняет политику в соответствии с ее определением.
3. Приложение получает маркер безопасности.
4. Приложение использует маркер безопасности при попытке доступа к ресурсу.
5. Сервер ресурсов проверяет маркер безопасности для подтверждения того, что доступ может быть предоставлен.
6. Приложение периодически обновляет маркер безопасности.

Чтобы зарегистрировать веб-приложение, выполните шаги из статьи [Руководство. Регистрация приложений в Azure Active Directory B2C](tutorial-register-applications.md). Вы также можете [добавить приложение веб-API в свой клиент Azure Active Directory B2C](add-web-application.md) или [добавить собственное клиентское приложение в свой клиент Azure Active Directory B2C](add-native-application.md).

## <a name="user-journeys"></a>Пути взаимодействия пользователя

Политику пути взаимодействия пользователя можно определить как [поток пользователя](active-directory-b2c-reference-policies.md) или [настраиваемую политику](active-directory-b2c-overview-custom.md). Предопределенные потоки для наиболее распространенных задач идентификации, таких как регистрация, вход в систему и редактирование профиля, доступны на портале Azure.

Пути взаимодействия пользователя позволяют управлять поведением с помощью таких параметров:

- учетная запись социальных сетей, которую пользователь использует для входа в приложение;
- данные, полученные от пользователя, такие как имя или почтовый индекс;
- Многофакторная Идентификация
- внешний вид страниц;
- сведения, возвращаемые в приложение.

Пользовательские политики — это файлы конфигурации, которые определяют поведение [Identity Experience Framework](trustframeworkpolicy.md) в клиенте Azure AD B2C. Identity Experience Framework — это базовая платформа, устанавливающая доверие между несколькими участниками и выполняющая эти шаги в пути взаимодействия пользователя.

Пользовательские политики можно полностью изменять, когда необходимо выполнить множество задач. Пользовательские политики являются одним или несколькими XML-файлами, которые ссылаются друг на друга в иерархической цепочке. [Начальный пакет](https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) доступен для пользовательских политик для выполнения самых распространенных задач идентификации.

При необходимости в клиенте Azure AD B2C можно использовать несколько пользовательских политик или потоков пользователей различных типов и повторно использовать их в приложениях. Такая гибкость позволяет определять и изменять процесс идентификации пользователя, внося лишь незначительные изменения в код или совсем не изменяя его. Политики используются путем добавления специального параметра запроса в HTTP-запросах проверки подлинности. Чтобы создать собственную пользовательскую политику, ознакомьтесь со статьей [Начало работы с настраиваемыми политиками в Azure Active Directory B2C](active-directory-b2c-get-started-custom.md).

## <a name="identity-providers"></a>Поставщики удостоверений

В своих приложениях вы можете разрешить пользователям входить с разными поставщиками удостоверений. *Поставщик удостоверений* создает, поддерживает и управляет сведениями об удостоверении, одновременно предоставляя приложениям службы проверки подлинности. С помощью портала Azure вы можете добавить поставщики удостоверений, которые поддерживаются Azure AD B2C.

Обычно в приложениях используется только один поставщик удостоверений, но у вас есть возможность добавить больше. Чтобы настроить поставщик удостоверений в клиенте Azure AD B2C, сначала создайте приложение на сайте разработчика поставщика удостоверений, а затем запишите идентификатор приложения или идентификатор клиента и пароль или секрет клиента из созданного приложения поставщика удостоверений. Этот идентификатор и пароль затем используются для настройки приложения.

В следующих статьях описываются шаги по добавлению некоторых наиболее распространенных поставщиков удостоверений в потоки пользователей.

- [Amazon](active-directory-b2c-setup-amzn-app.md)
- [Facebook](active-directory-b2c-setup-fb-app.md)
- [Учетная запись Майкрософт](active-directory-b2c-setup-msa-app.md)

В следующих статьях описываются шаги по добавлению некоторых наиболее распространенных поставщиков удостоверений в пользовательские политики.
- [Amazon](setup-amazon-custom.md)
- [Google](active-directory-b2c-custom-setup-goog-idp.md)
- [Учетная запись Майкрософт](active-directory-b2c-custom-setup-msa-idp.md)

Дополнительные сведения см. в статье [Руководство. Добавление поставщиков удостоверений приложениям в Azure Active Directory B2C](tutorial-add-identity-providers.md).


## <a name="page-customization"></a>Настройка страницы

Большая часть содержимого HTML и CSS, которое отображается для пользователей в пути взаимодействия пользователя, является управляемой. С помощью настройки страницы можно настроить оформление любой настраиваемой политики или потока пользователя. Вы обеспечиваете согласованность фирменной символики и визуализации в приложении и службе Azure AD B2C, используя этот компонент настройки.

Служба Azure AD B2C выполняет код в браузере пользователя и использует современный метод — общий доступ к ресурсам независимо от источника (CORS). Сначала необходимо указать URL-адрес в политике с настраиваемым содержимым HTML. Azure AD B2C объединяет элементы пользовательского интерфейса с содержимым HTML, загруженным по указанному URL-адресу, и отображает страницу для пользователя.

В строке запроса вы отправляете параметры в Azure AD B2C. Передавая параметр в конечную точку HTML, содержимое страницы динамически изменяется. Например, можно изменить фоновое изображение страницы регистрации или входа на основе параметра, передаваемого из веб-приложения или мобильного приложения.

Чтобы настроить страницы в потоке пользователя, ознакомьтесь со статьей [Руководство. Настройка удобного для пользователей интерфейса в Azure Active Directory B2C](tutorial-customize-ui.md). Чтобы настроить страницы в настраиваемой политике, ознакомьтесь со статьей [Настройка пользовательского интерфейса приложения с помощью настраиваемой политики в Azure Active Directory B2C](active-directory-b2c-ui-customization-custom.md) или [Azure Active Directory B2C: настройка пользовательского интерфейса с динамическим содержимым, используя пользовательские политики](active-directory-b2c-ui-customization-custom-dynamic.md).

## <a name="developer-resources"></a>Ресурсы для разработчиков

### <a name="client-applications"></a>Клиентские приложения

Среди прочего вы можете выбрать приложения, разработанные для [iOS](active-directory-b2c-devquickstarts-ios.md), [Android](active-directory-b2c-devquickstarts-android.md) и .NET. Azure AD B2C разрешает эти действия и в то же время защищает удостоверения пользователей.

Если вы являетесь разработчиком веб-приложений ASP.NET, настройте в приложении проверку подлинности учетных записей, выполнив инструкции из статьи [Руководство. Включение в веб-приложении аутентификации на основе учетных записей с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-web-app.md).

Если вы разрабатываете классические приложения, настройте в приложении проверку подлинности учетных записей, выполнив инструкции из статьи [Руководство. Включение в классическом приложении аутентификации на основе учетных записей с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-desktop-app.md).

Если вы разрабатываете одностраничные приложения на Node.js, настройте в приложении проверку подлинности, выполнив инструкции из статьи [Руководство. Включение в одностраничном приложении аутентификации на основе учетных записей с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-spa.md).

### <a name="apis"></a>Программные интерфейсы
Если клиенту или веб-приложениям нужно вызывать API-интерфейсы, вы можете настроить безопасный доступ к этим ресурсам в Azure AD B2C.

Если вы являетесь разработчиком веб-приложений ASP.NET, настройте приложение для вызова защищенного API, выполнив инструкции из статьи [Руководство. Предоставление доступа к веб-API ASP.NET с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-web-api.md).

Если вы являетесь разработчиком классических приложений, настройте приложение для вызова защищенного API, выполнив инструкции из статьи [Руководство. Предоставление доступа к веб-API Node.js из классического приложения с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-desktop-app-webapi.md).

Если вы разрабатываете одностраничные приложения на Node.js, настройте в приложении аутентификацию, выполнив инструкции из статьи [Руководство. Предоставление доступа к веб-API ASP.NET Core из одностраничного приложения с помощью Azure Active Directory B2C](active-directory-b2c-tutorials-spa-webapi.md).

### <a name="javascript"></a>JavaScript

К приложениям Azure AD B2C можно добавить собственный код JavaScript на стороне клиента. Чтобы настроить JavaScript в приложении, определите [макет страницы](page-layout.md) и включите [JavaScript](javascript-samples.md) в потоках пользователей или пользовательских политиках.

### <a name="user-accounts"></a>Учетные записи пользователей

Многие распространенные задачи управления клиентами необходимо решать программным путем. Основным примером может служить управление пользователями. Возможно, вам потребуется перенести имеющееся хранилище пользователя в клиент Azure AD B2C. Кроме того, может потребоваться разместить регистрацию пользователей на своей странице и создавать учетные записи пользователей каталога Azure AD B2C в фоновом режиме. Для выполнения задач такого типа требуется возможность создавать, читать, обновлять и удалять учетные записи пользователей. Такую возможность предоставляет [API Graph для Azure AD](active-directory-b2c-devquickstarts-graph-dotnet.md).

## <a name="next-steps"></a>Дополнительная информация

Приступите к настройке приложения для процедур регистрации и входа, перейдя к следующему руководству.

> [!div class="nextstepaction"]
> [Руководство. Создание клиента Azure Active Directory B2C](tutorial-create-tenant.md).
