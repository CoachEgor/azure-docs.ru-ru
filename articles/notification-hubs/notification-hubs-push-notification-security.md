---
title: Безопасность
description: Узнайте о модели безопасности для концентраторов уведомлений Azure.
services: notification-hubs
documentationcenter: .net
author: sethmanheim
manager: femila
editor: jwargo
ms.assetid: ''
ms.service: notification-hubs
ms.workload: mobile
ms.tgt_pltfrm: mobile-multiple
ms.devlang: multiple
ms.topic: article
ms.date: 09/23/2019
ms.author: sethm
ms.reviewer: jowargo
ms.lastreviewed: 09/23/2019
ms.openlocfilehash: b871775bc7a6d795e86147ae9cffa27bdd2f3348
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76263767"
---
# <a name="notification-hubs-security"></a>Безопасность концентраторов уведомлений

## <a name="overview"></a>Обзор

В этой статье описывается модель безопасности Центров уведомлений Azure.

## <a name="shared-access-signature-security"></a>Общая безопасность подписи доступа

Концентраторы уведомлений реализуют схему безопасности уровня сущности, называемую *общей подписью доступа* (SAS). Каждое правило содержит имя, ключевое значение (общий секрет) и набор прав, как было объяснено позже в [требованиях безопасности.](#security-claims) 

При создании концентратора автоматически создаются два правила: одно с правами **прослушивания** (которое использует клиентское приложение) и одно со **всеми** правами (используется бэкэндом приложения):

- **DefaultListenSharedAccessSignature**: предоставляет только разрешение **прослушивания.**
- **DefaultFullSharedAccessSignature**: предоставляет **разрешения слушать,** **управлять**и **отправлять** разрешения. Эта политика должна использоваться только в бэкэнде приложения. Не используйте его в клиентских приложениях; использовать политику только с **доступом Слушать.** Для создания новой [политики](#sas-tokens-for-access-policies) пользовательского доступа с новым маркером SAS в этой статье см.

При управлении регистрациями из клиентских приложений, если данные, отправляемые посредством уведомлений, не являются конфиденциальными (например, новости погоды), то обычный способ доступа к Центру уведомлений состоит в передаче значения ключа для правила "Доступ только для прослушивания" в клиентское приложение, а также передаче значения ключа для правила "Полный доступ" в серверную часть приложения.

Приложения не должны вставлять ключевое значение в клиентские приложения Магазина Windows; вместо этого, поиметь клиентское приложение получить его из резервного приложения при запуске.

Ключ с доступом **Listen** позволяет клиенту приложение зарегистрироваться для любого тега. Если ваше приложение должно ограничить регистрацию определенными тегами для конкретных клиентов (например, когда теги представляют иноъед пользователя), бэкэнд приложения должен выполнять регистрацию. Для получения дополнительной информации [см.](notification-hubs-push-notification-registration-management.md) в статье "Управление регистрациями" Обратите внимание, что в этом случае клиентское приложение не имеет прямого доступа к Центрам уведомлений.

## <a name="security-claims"></a>Утверждения безопасности

Как и в других организациях, операции Notification Hub разрешены для трех требований безопасности: **Прослушивание,** **Отправка**и **Управление**.

| Утверждение   | Описание                                          | Разрешенные операции |
| ------- | ---------------------------------------------------- | ------------------ |
| Прослушивание  | Создание, обновление, чтение и удаление отдельных регистраций | Создание и обновление регистрации<br><br>Чтение регистрации<br><br>Чтение всех регистраций для обработки<br><br>Регистрация удаления |
| Send    | Отправка сообщений в концентратор уведомлений                | Отправить сообщение |
| Управление  | Операции CRUD в Центрах уведомлений (включая обновление учетных данных PNS и ключей безопасности) и чтение регистраций на основе тегов |Создание/обновление/чтение/удаление концентраторов<br><br>Чтение регистраций по тегу |

Концентраторы уведомлений принимают токены SAS, генерируемые общими ключами, настроенными непосредственно на концентраторе.

Невозможно отправить уведомление в более чем одно пространство имен. Именные пространства являются логическими контейнерами для концентраторов уведомлений и не участвуют в отправке уведомлений.

Используйте политики доступа на уровне имен (учетные данные) для операций на уровне имен; например: концентраторы листинга, создание или исключение узлов и т.д. Только политики доступа концентратора позволяют отправлять уведомления.

### <a name="sas-tokens-for-access-policies"></a>Токены SAS для политик доступа

Чтобы создать новую претензию безопасности или просмотреть существующие клавиши SAS, сделайте следующее:

1. Войдите на портал Azure.
2. Щелкните **Все ресурсы**.
3. Выберите имя концентратора уведомлений, для которого требуется создать претензию, или просмотрите ключ SAS.
4. В левом меню выберите **политики доступа.**
5. Выберите **новую политику** для создания новой претензии безопасности. Назовите имя политики и выберите разрешения, которые вы хотите предоставить. Затем выберите **OK**.
6. Строка полного подключения (включая новый ключ SAS) отображается в окне политик доступа. Вы можете скопировать эту строку на буфер обмена для последующего использования.

Чтобы извлечь клавишу SAS из определенной политики, выберите кнопку **Copy** рядом с политикой, содержащей нужный ключ SAS. Вставьте это значение во временное место, а затем скопируйте ключевую часть строки соединения SAS. В этом примере используется пространство имен концентров уведомлений под названием **mytestnamespace1**и политика, названная **policy2.** Ключ SAS — это значение, близкое к концу строки, указанное **SharedAccessKey:**

```shell
Endpoint=sb://mytestnamespace1.servicebus.windows.net/;SharedAccessKeyName=policy2;SharedAccessKey=<SAS key value here>
```

![Получите ключи SAS](media/notification-hubs-push-notification-security/access1.png)

## <a name="next-steps"></a>Дальнейшие действия

- [Обзор концентратов уведомлений](notification-hubs-push-notification-overview.md)
