---
title: Концентраторы уведомлений Azure и миграция облачных сообщений Google Firebase (FCM)
description: Описывает, как концентраторы уведомлений Azure обращаются к GCM Google с миграцией FCM.
services: notification-hubs
author: sethmanheim
manager: femila
editor: jwargo
ms.service: notification-hubs
ms.workload: mobile
ms.tgt_pltfrm: ''
ms.devlang: ''
ms.topic: article
ms.date: 04/10/2019
ms.author: sethm
ms.reviewer: jowargo
ms.lastreviewed: 04/10/2019
ms.openlocfilehash: 2f2ca4b56445b3f399477e396de579d8a8c539e3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80127026"
---
# <a name="azure-notification-hubs-and-google-firebase-cloud-messaging-migration"></a>Концентраторы уведомлений Azure и миграция облачных сообщений Google Firebase

## <a name="current-state"></a>Текущее состояние

Когда Google объявила о своем переходе от Google Cloud Messaging (GCM) к Firebase Cloud Messaging (FCM), push-сервисы, подобные нашей, должны были настроить способ отправки уведомлений на устройства Android, чтобы учесть изменения.

Мы обновили наш бэкэнд сервиса, а затем опубликовали обновления для наших API и SDK по мере необходимости. С нашей реализацией мы приняли решение поддерживать совместимость с существующими схемами уведомлений GCM, чтобы свести к минимуму влияние на клиента. Это означает, что в настоящее время мы отправляем уведомления на устройства Android с помощью FCM в режиме FCM Legacy. В конечном счете, мы хотим добавить истинную поддержку FCM, включая новые функции и формат полезной нагрузки. Это долгосрочное изменение, и нынешняя миграция направлена на поддержание совместимости с существующими приложениями и SDK. Вы можете использовать SDK GCM или FCM в вашем приложении (наряду с нашим SDK), и мы удостоверяемся, что уведомление отправлено правильно.

Некоторые клиенты недавно получили электронное письмо от Google с предупреждением о приложениях, использующих конечную точку GCM для уведомлений. Это было просто предупреждение, и ничего не нарушается - Android уведомления вашего приложения по-прежнему отправляются в Google для обработки и Google по-прежнему обрабатывает их. Некоторые клиенты, которые указали конечную точку GCM явно в конфигурации службы, по-прежнему используют унипраженные конечные точки. Мы уже определили этот пробел и работали над устранением проблемы, когда Google послал письмо.

Мы заменили эту изунительную конечную точку и исправление развернуто.

## <a name="going-forward"></a>Заглядывая вперед

Взаы часто задаваемые вопросы Google FCM говорят, что вам не нужно ничего делать. В [FCM часто задаваемые вопросы](https://developers.google.com/cloud-messaging/faq), Google сказал: "клиент SDKs и Токены GCM будет продолжать работать бесконечно. Тем не менее, вы не сможете настроить таргетинг на последнюю версию сервисов Google Play в вашем приложении для Android, если не перейдь в FCM».

Если ваше приложение использует библиотеку GCM, следуйте инструкциям Google для обновления до библиотеки FCM в вашем приложении. Наш SDK совместим с любым из них, так что вам не придется ничего обновлять в вашем приложении на нашей стороне (до тех пор, как вы в курсе нашей версии SDK).

## <a name="questions-and-answers"></a>Вопросы и ответы

Вот некоторые ответы на общие вопросы, которые мы слышали от клиентов:

**В.** Что мне нужно сделать, чтобы быть совместимым к дате отсечения (текущая дата отсечения Google 29 мая и может измениться)?

**A:** Ничего. Мы сохраним совместимость с существующей схемой уведомлений GCM. Ключ GCM будет продолжать работать в обычном режиме, как и любые GCM SDK и библиотеки, используемые вашим приложением.

Если/когда вы решите перейти на FCM SDKs и библиотеки, чтобы воспользоваться преимуществами новых функций, ваш ключ GCM все равно будет работать. При желании вы можете переключиться на использование ключа FCM, но убедитесь, что вы добавляете Firebase в существующий проект GCM при создании нового проекта Firebase. Это гарантирует обратную совместимость с вашими клиентами, которые работают старые версии приложения, которые по-прежнему используют GCM SDKs и библиотеки.

Если вы создаете новый проект FCM и не привязываетесь к существующему проекту GCM, как только вы обновите концентраторы уведомлений с новым секретом FCM, вы потеряете возможность нажимать уведомления на текущие установки приложений, так как новый ключ FCM не имеет ссылки на старый GCM Проекта.

**В.** Почему я получаю это письмо о старых конечных точках GCM используется? Что мне делать?

**A:** Ничего. Мы мигрировали в новые конечные точки и скоро закончатся, поэтому никаких изменений не требуется. Ничего не нарушается, наша одна пропущенная конечная точка просто вызвала предупреждающие сообщения от Google.

**В.** Как перейти на новые SDK fcM и библиотеки, не нарушая существующих пользователей?

О: Обновление в любое время. Google еще не объявила о каких-либо амортизацию существующих GCM SDKs и библиотек. Чтобы не наносить push-уведомления существующим пользователям, убедитесь, что при создании нового проекта Firebase вы будете связаны с существующим проектом GCM. Это обеспечит работу новых секретов Firebase для пользователей, запускающих старые версии вашего приложения с GCM SDK и библиотеками, а также новых пользователей вашего приложения с FCM SDK и библиотеками.

**В.** Когда можно использовать новые функции FCM и схемы для моих уведомлений?

**A:** Как только мы опубликуем обновление для наших API и SDK, следите за обновлениями – мы ожидаем, что в ближайшие месяцы у нас будет что-то для вас.
