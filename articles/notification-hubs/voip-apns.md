---
title: Отправка уведомлений APNS VOIP с помощью концентраторов уведомлений Azure
description: Узнайте, как отправлять уведомления APNS VOIP через центры уведомлений Azure (официально не поддерживается).
author: sethmanheim
ms.author: sethm
ms.date: 3/23/2020
ms.topic: how-to
ms.service: notification-hubs
ms.openlocfilehash: c99af881b8f93b75633741c2352dc5df17dd2963
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80146892"
---
# <a name="use-apns-voip-through-notification-hubs-not-officially-supported"></a>Используйте APNS VOIP через концентраторы уведомлений (официально не поддерживается)

Уведомления APNS VOIP можно использовать через центры уведомлений Azure; однако официальной поддержки этому сценарию нет.

## <a name="considerations"></a>Рекомендации

Если вы все еще решите отправить уведомления APNS VOIP через центры уведомлений, будьте в курсе следующих ограничений:

- Отправка уведомления VOIP `apns-topic` требует, чтобы заголовок был установлен `.voip` в идентификатор пакета приложения и суффикс. Например, для примера приложения `com.microsoft.nhubsample`с `apns-topic` идентификатором расслоения заголовок должен быть установлен на`com.microsoft.nhubsample.voip.`

   Этот метод не работает хорошо с концентраторами уведомлений Azure, так как идентификатор расслоения приложения должен быть настроен как часть учетных данных APNS концентратора, и значение не может быть изменено. Кроме того, концентраторы уведомлений не позволяют переопределить значение `apns-topic` заголовка во время выполнения.

   Для отправки уведомлений VOIP необходимо настроить отдельный концентратор уведомлений с идентификатором `.voip` пакета приложения.

- Отправка уведомления VOIP `apns-push-type` требует, чтобы заголовок `voip`был установлен на значение.

   Чтобы помочь клиентам с переходом на iOS 13, Центры уведомлений пытаются сделать вывод о правильном значении заголовка. `apns-push-type` Логика выводов намеренно проста, чтобы избежать нарушения стандартных уведомлений. К сожалению, этот метод вызывает проблемы с уведомлениями VOIP, потому что Apple рассматривает уведомления VOIP как особый случай, который не следует тем же правилам, что и стандартные уведомления.

   Для отправки уведомлений VOIP необходимо указать явное значение для заголовка. `apns-push-type`

- Уведомления концентраторы ограничивают APNS полезной нагрузки до 4 кБ, как это документально подтверждено Apple. Для уведомлений VOIP Apple разрешает полезную нагрузку до 5 кВ. Концентраторы уведомлений не проводят различия между стандартными и VOIP-уведомлениями; таким образом, все уведомления ограничены 4 КБ.

   Для отправки уведомлений VOIP необходимо не превышать предел размера полезной нагрузки 4 КБ.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. по следующим ссылкам:

- [Документация `apns-topic` `apns-push-type` и заголовки и значения, включая специальные случаи для уведомлений VOIP.](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/sending_notification_requests_to_apns)

- [Документация для ограничения размера полезной нагрузки](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification).

- [Обновления концентраторов уведомлений для iOS 13](push-notification-updates-ios-13.md#apns-push-type).
