---
title: Типы сущностей
titleSuffix: Language Understanding - Azure Cognitive Services
description: 'Сущности извлекают данные из utterance. Типы сущностей предоставляют предсказуемое извлечение данных. Существует два типа сущностей: изученный компьютером и не являющийся компьютером. Важно понять, с каким типом сущности вы работаете в фразы продолжительностью.'
services: cognitive-services
author: diberry
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: conceptual
ms.date: 07/24/2019
ms.author: diberry
ms.openlocfilehash: a5a3ba8c25107317e7c47ee358f9a6ebe7d4556f
ms.sourcegitcommit: 75a56915dce1c538dc7a921beb4a5305e79d3c7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2019
ms.locfileid: "68479112"
---
# <a name="entity-types-and-their-purposes-in-luis"></a>Типы сущностей и их задачи в LUIS

Сущности извлекают данные из utterance. Типы сущностей предоставляют предсказуемое извлечение данных. Существует два типа сущностей: изученный компьютером и не являющийся компьютером. Важно понять, с каким типом сущности вы работаете в фразы продолжительностью. 

## <a name="entity-compared-to-intent"></a>Сущность по сравнению с намерением

Сущность представляет подлежащее извлечению слово или фразу в высказывании. Фраза может содержать много сущностей или вообще ни одной. Клиентское приложение может потребовать, чтобы сущность выполнила свою задачу, или использовать ее в качестве инструкции по выбору нескольких вариантов для предоставления пользователю. 

Сущность:

* Представляет класс, включающий коллекцию схожих объектов (мест, вещей, людей, событий или концепций). 
* Описывает сведения, относящиеся к намерениям


Например, в приложение для поиска новостей могут входить такие сущности, как "topic", "source", "keyword" и "publishing date", которые являются ключевыми данными для поиска новостей. В приложении для путешествий с функциями бронирования сущности location, date, airline, travel class и tickets представляют собой ключевые данные для бронирования авиабилетов (связанные с намерением Book flight).

Если сравнивать, намерение представляет предсказание всего высказывания. 

## <a name="entities-help-with-data-extraction-only"></a>Сущности полезны только при извлечении данных.

Сущности помечаются только для извлечения данных, они не используются для прогнозирования намерений.

## <a name="entities-represent-data"></a>Сущности представляют данные

Сущности — это данные, которые требуется извлечь из высказывания. Это может быть имя, дата, название продукта или любая группа слов. 

|Фраза|Сущность|Data|
|--|--|--|
|Купить 3 билета в Нью-Йорк|Предварительно созданная сущность number<br>Location.Destination|3<br>Нью Йорк|
|Купить билет из Нью-Йорка в Лондон на 5 марта|Location.Origin<br>Location.Destination<br>Предварительно созданная сущность datetimeV2|Нью Йорк<br>Лондон<br>5 марта 2018 г.|

## <a name="entities-are-optional-but-highly-recommended"></a>Сущности являются необязательными, но настоятельно рекомендуемыми к использованию

Тогда как намерения являются обязательными, использовать сущности необязательно. Не нужно создавать сущности для каждого понятия в приложении — они требуются только для тех, которые требуются для работы клиентского приложения. 

Если высказывания не содержат сведения, необходимые боту для продолжения, добавлять их не нужно. Их можно добавить позднее по мере развития приложения. 

Если вы не знаете, как будете использовать данные, добавьте несколько общих предварительно созданных сущностей, таких как [datetimeV2](luis-reference-prebuilt-datetimev2.md), [порядковый номер](luis-reference-prebuilt-ordinal.md), [адрес электронной почты](luis-reference-prebuilt-email.md) и [номер телефона](luis-reference-prebuilt-phonenumber.md).

## <a name="label-for-word-meaning"></a>Пометка для значения слова

Если выбор или расположение слов одинаковы, но имеют разное значение, их не нужно помечать с помощью сущности. 

В следующих высказываниях слово `fair` является омографом. Оно пишется одинаково, но имеет другое значение:

|Фраза|
|--|
|Какие ярмарки проходят неподалеку от Сиэтла этим летом?|
|Справедлива ли эта оценка за обзор Сиэтла?|

Если требуется, чтобы сущность события находила все данные события, пометьте слово `fair` в первом высказывании, а не во втором.

## <a name="entities-are-shared-across-intents"></a>Сущности являются общими в намерениях

Сущности являются общими в намерениях. Они не принадлежат отдельному намерению. Намерения и сущности могут быть семантически связаны, но эта связь не является исключительной.

Во фразе Book me a ticket to Paris (Забронировать билет в Париж) Paris (Париж) — это сущность, связанная с расположением. Распознавая сущности, которые упоминаются во фразе пользователя, LUIS помогает клиентскому приложению выбирать конкретные действия, выполняемые для удовлетворения запроса пользователя.

## <a name="mark-entities-in-none-intent"></a>Пометка сущностей в намерении None

Все намерения, включая намерение **None**, должны при возможности иметь помеченные сущности. В этом случае LUIS хорошо известно о месте расположения сущностей в высказываниях и какие слова находятся вокруг сущностей. 

## <a name="entity-status-for-predictions"></a>Состояние сущности для прогнозирования

На портале LUIS вы всегда можете узнать, когда сущность в примере высказывания отличается от помеченной сущности или слишком близка к другой сущности (и поэтому является неясной). Такое различие визуально представлено с помощью красного подчеркивания в примере высказывания. 

Дополнительные сведения см. в разделе [Прогнозирование состояния сущности](luis-how-to-add-example-utterances.md#entity-status-predictions). 

## <a name="types-of-entities"></a>Типы сущностей

LUIS предлагает множество типов сущностей. Выберите сущность на основе способа извлечения данных и их представления после извлечения.

Сущности могут быть извлечены с помощью машинного обучения, что позволяет LUIS продолжать обучение отображению сущности в высказывании. Сущности могут быть извлечены без использования машинного обучения — за счет точного совпадения с текстом или регулярным выражением. Сущности в шаблонах можно извлекать с помощью смешанных реализации. 

После извлечения сущности ее данные можно представить в виде единицы информации либо в сочетании с другими сущностями для формирования единицы информации, используемой в клиентском приложении.

|Прошедшая машинное обучение|Можно пометить|Учебник|Пример<br>Отклик|Тип сущности|Цель|
|--|--|--|--|--|--|
|✔|✔|[✔](luis-tutorial-composite-entity.md)|[✔](luis-concept-data-extraction.md#composite-entity-data)|[**Составная**](#composite-entity)|Группа сущностей независимо от типа сущности.|
|||[✔](luis-quickstart-intent-and-list-entity.md)|[✔](luis-concept-data-extraction.md#list-entity-data)|[**Список**](#list-entity)|Список элементов и их синонимов, извлеченных в результате поиска точных совпадений.|
|Смешанная||[✔](luis-tutorial-pattern.md)|[✔](luis-concept-data-extraction.md#patternany-entity-data)|[**Pattern.any**](#patternany-entity)|Сущность, конец которой определить довольно сложно.|
|||[✔](luis-tutorial-prebuilt-intents-entities.md)|[✔](luis-concept-data-extraction.md#prebuilt-entity-data)|[**Предварительно созданная**](#prebuilt-entity)|Уже обученная для извлечения различных видов данных.|
|||[✔](luis-quickstart-intents-regex-entity.md)|[✔](luis-concept-data-extraction.md#regular-expression-entity-data)|[**Регулярное выражение**](#regular-expression-entity)|Использует регулярное выражение для сравнения текста.|
|✔|✔|[✔](luis-quickstart-primary-and-secondary-data.md)|[✔](luis-concept-data-extraction.md#simple-entity-data)|[**Простая**](#simple-entity)|Содержит единое понятие в слове или фразе.|

Только сущности, изученные компьютером, должны быть помечены в примере фразы продолжительностью. Прошедшие машинное обучение сущности лучше всего работают после тестирования с помощью [запросов конечной точки](luis-concept-test.md#endpoint-testing) и [проверки высказываний конечной точки](luis-how-to-review-endoint-utt.md). 

Сущности Pattern.Any необходимо помечать в примерах [шаблонов](luis-how-to-model-intent-pattern.md), а не в примерах намерений пользователя. 

Смешанные сущности используют сочетание методов обнаружения сущности.

## <a name="machine-learned-entities-use-context"></a>Контекст использования сущностей, занятых компьютером

Сущности, полученные от компьютера, изучены из контекста в utterance. Это делает вариации в примере фразы продолжительностью значимыми. 

## <a name="non-machine-learned-entities-dont-use-context"></a>В сущностях, которые не используются при изучении компьютера, не используется контекст

Следующие сущности, не полученные от компьютера, не принимают контекст utterance при сопоставлении сущностей: 

* [Предварительно созданные сущности](#prebuilt-entity)
* [Сущности Regex](#regular-expression-entity)
* [Сущности списка](#list-entity) 

Эти сущности не нуждаются в пометке или обучении модели. После добавления или настройки сущности извлекаются сущности. Компромисс заключается в том, что эти сущности могут быть переопределены, где при учетном значении контекста не было сделано соответствие. 

Это происходит часто со списком сущностей в новых моделях. Вы создаете и тестируете модель с помощью сущности List, но при публикации модели и получении запросов от конечной точки вы понимаете, что модель перестает сопоставляться из-за отсутствия контекста. 

Если вы хотите сопоставлять слова или фразы и использовать контекст в учетной записи, у вас есть два варианта. Первый заключается в использовании простой сущности, сопоставленной со списком фраз. Список фраз не будет использоваться для сопоставления, а вместо этого будет сообщать относительно похожие слова (взаимозаменяемый список). Если вместо вариантов списка фраз требуется точное совпадение, используйте сущность списка с ролью, описанной ниже.

### <a name="context-with-non-machine-learned-entities"></a>Контекст с сущностями, которые не были получены компьютером

Если вы хотите, чтобы контекст utterance был важен для сущностей, которые не были получены с помощью компьютера, следует использовать [роли](luis-concept-roles.md).

Если у вас есть сущность, не предназначенная для машинного обучения, например предварительно [подготовленные сущности](#prebuilt-entity), сущности [регулярных выражений](#regular-expression-entity) или [список](#list-entity) сущностей, которые будут сопоставляться за пределами нужного экземпляра, рассмотрите возможность создания одной сущности с двумя ролями. Одна роль будет захватывать то, что вы ищете, и одна роль будет захватывать то, что вы не ищете. Обе версии должны быть помечены в примере фразы продолжительностью.  

## <a name="composite-entity"></a>Составная сущность

[Составная сущность](reference-entity-composite.md) состоит из других сущностей, например готовых сущностей, простых, регулярных выражений и сущностей списка. Эти отдельные сущности формируют единую сущность. 

## <a name="list-entity"></a>Сущность списка

[Список сущностей](reference-entity-list.md) представляет собой фиксированный, закрытый набор связанных слов вместе с их синонимами. LUIS не обнаруживает дополнительные значения для сущностей списка. Посмотреть предложения для новых слов на основе текущего списка можно с помощью функции **Рекомендовать**. Если имеется несколько сущностей списка с одним и тем же значением, в запросе конечной точки возвращается каждая сущность. 

## <a name="patternany-entity"></a>Сущность Pattern.any

[Pattern. Any](reference-entity-pattern-any.md) — это заполнитель переменной длины, используемый только в шаблоне шаблона utterance для обозначения места начала и окончания сущности.  

## <a name="prebuilt-entity"></a>Предварительно созданная сущность

Предварительно созданные сущности являются встроенными типами, которые представляют общие понятия, такие как адрес электронной почты, URL-адрес и номер телефона. Имена предварительно созданных сущностей являются зарезервированными. [Все предварительно созданные сущности](luis-prebuilt-entities.md), добавленные в приложение, возвращаются в запросе прогнозирования конечной точки, если они были найдены в высказывании. 

Сущность оптимальна для данных в таких случаях.

* Данные соответствуют распространенному варианту использования, поддерживаемому предварительно созданными сущностями для вашего языка и региональных параметров. 

Предварительно созданные сущности можно добавлять и удалять в любое время.

![Предварительно созданная сущность Number](./media/luis-concept-entities/number-entity.png)

[Руководство](luis-tutorial-prebuilt-intents-entities.md)<br>
[Пример ответа JSON для сущности](luis-concept-data-extraction.md#prebuilt-entity-data)

Некоторые из этих предварительно созданных сущностей определены в проекте [Recognizers-Text](https://github.com/Microsoft/Recognizers-Text) с открытым исходным кодом. Если в настоящее время определенный язык и региональные параметры или сущность не поддерживается, примите участие в добавлении материалов в проект. 

### <a name="troubleshooting-prebuilt-entities"></a>Устранение неполадок готовых сущностей

На портале LUIS, если предварительно созданная сущность помечена вместо настраиваемой сущности, у вас есть несколько вариантов решения этой проблемы.

Предварительно созданные сущности, добавленные в приложение, _всегда_ будут возвращаться, даже если utterance должен извлечь пользовательские сущности для одного и того же текста. 

#### <a name="change-tagged-entity-in-example-utterance"></a>Изменить сущность с тегами в примере utterance

Если предварительно созданная сущность имеет тот же текст или маркеры, что и пользовательская сущность, выберите текст в примере utterance и измените тег utterance. 

Если предварительно созданная сущность помечена дополнительным текстом или маркерами, чем ваша Пользовательская сущность, у вас есть несколько вариантов решения этой проблемы:

* [Удалите пример метода utterance](#remove-example-utterance-to-fix-tagging)
* [Удалить готовый метод сущности](#remove-prebuilt-entity-to-fix-tagging)

#### <a name="remove-example-utterance-to-fix-tagging"></a>Удалите пример utterance, чтобы исправить Теги 

Первый вариант — удалить пример utterance. 

1. Удалите пример utterance.
1. Переучить приложение. 
1. Добавьте обратно только слово или фразу, которая является сущностью, помеченной как предварительно созданная сущность, как полный пример utterance. Слово или фраза по-прежнему будет иметь помеченную предварительно подготовленную сущность. 
1. Выберите сущность в примере utterance на странице **намерения** , а затем измените ее на пользовательскую сущность и выполните обучение еще раз. Это должно помешать LUIS помечать этот точный текст как предварительно созданную сущность в любом примере фразы продолжительностью, который использует этот текст. 
1. Добавьте весь исходный пример utterance к намерению. Пользовательская сущность должна продолжать помечаться вместо предварительно созданной сущности. Если пользовательская сущность не помечена, необходимо добавить дополнительные примеры этого текста в фразы продолжительностью.

#### <a name="remove-prebuilt-entity-to-fix-tagging"></a>Удалить предварительно созданную сущность для исправления тегов

1. Удалите предварительно созданную сущность из приложения. 
1. На странице **назначение** пометьте пользовательскую сущность в примере utterance.
1. Обучите приложение.
1. Добавьте предварительно созданную сущность обратно в приложение и обучите приложение. В этом исправлении предполагается, что предварительно созданная сущность не является частью составной сущности.

## <a name="regular-expression-entity"></a>Сущность регулярного выражения 

[Сущность регулярного выражения](reference-entity-regular-expression.md) извлекает сущность на основе предоставленного шаблона регулярного выражения.

## <a name="simple-entity"></a>Простая сущность

[Простая сущность](reference-entity-simple.md) — это значение, прошедшее машинное обучение. Это может быть слово или фраза.
## <a name="entity-limits"></a>Ограничения сущностей

Ознакомьтесь с [ограничениями](luis-boundaries.md#model-boundaries), чтобы понять, сколько сущностей каждого типа можно добавить в модель.

## <a name="if-you-need-more-than-the-maximum-number-of-entities"></a>Если требуется количество сущностей, превышающее максимальное значение 

В сочетании с ролями сущностей может потребоваться использовать составные сущности.

Составные сущности представляют части целого. Например, у составной сущности PlaneTicketOrder могут быть дочерние сущности Airline, Destination, DepartureCity, DepartureDate и PlaneTicketClass.

LUIS также предоставляет тип сущности списка, который не прошел машинное обучение, но позволяет приложению LUIS указывать фиксированный список значений. Ограничения для типа сущности списка см. в статье [Границы LUIS](luis-boundaries.md). 

Если вы рассматривали эти сущности и по-прежнему требуется больше ограничений, обратитесь в службу поддержки. Для этого соберите подробные сведения о системе, откройте веб-сайт [LUIS](luis-reference-regions.md#luis-website), а затем выберите элемент **Поддержка**. Если ваша подписка Azure включает службы поддержки, обратитесь в службу [технической поддержки Azure](https://azure.microsoft.com/support/options/). 

## <a name="next-steps"></a>Следующие шаги

Ознакомьтесь с подходящими [высказываниями](luis-concept-utterance.md). 

Дополнительные сведения о добавлении сущностей в приложение LUIS см. в статье [Добавление сущностей](luis-how-to-add-entities.md).
