---
title: Ссылка синтаксиса шаблона - LUIS
description: Создание сущностей для извлечения ключевых данных из высказываний пользователей в приложениях Language Understanding (LUIS). Извлеченные данные используются клиентским приложением.
ms.topic: reference
ms.date: 04/14/2020
ms.author: diberry
ms.openlocfilehash: cc24667f43dfedc032f52c40fc5f8fe5c80bad70
ms.sourcegitcommit: ea006cd8e62888271b2601d5ed4ec78fb40e8427
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81382147"
---
# <a name="pattern-syntax"></a>Синтаксис шаблона

Синтаксис шаблона — это шаблон фразы. Шаблон должен содержать слова и сущности, которые вы хотите сопоставить, а также слова и [знаки препинания,](luis-reference-application-settings.md#punctuation-normalization) которые вы хотите игнорировать. **Это не регулярное выражение.**

> [!CAUTION]
> Шаблоны включают только машино-изученные родители сущности, а не подкомпоненты.

Сущности в шаблонах заключены в фигурные скобки (`{}`). Шаблоны могут включать сущности и сущности с ролями. [Pattern.any](luis-concept-entity-types.md#patternany-entity) — это сущность, используемая только в шаблонах.

Синтаксис шаблона поддерживает следующий синтаксис:

|Компонент|Синтаксис|Уровень вложенности|Пример|
|--|--|--|--|
|сущность| {}- фигурные скобки|2|Где находится форма «лицо-имя»?|
|необязательный|Квадратные скобки<BR><BR>Существует ограничение 3 на уровни гнездования любой комбинации факультативного и группового |2|Вопросительный знак не является обязательным|
|группирование|() - скобки|2|является (a \| b)|
|or| \|- вертикальная планка (труба)<br><br>Существует ограничение 2 на вертикальных барах (Или) в одной группе |-|Где находится форма («форма-имя-короткая» &#x7c; «форма-имя-длиннее» &#x7c; «форма-число»)|
|начало и/или конец высказывания|В - Карет|-|«Начать высказывание<br>высказывание сделано»<br>«Строгое буквальное сопоставление всего высказывания с сущностью «число»|

## <a name="nesting-syntax-in-patterns"></a>Вложенный синтаксис в шаблонах

**Дополнительный** синтаксис, с квадратными скобками, может быть вложен два уровня. Например: `[[this]is] a new form`. Этот пример позволяет следующие высказывания:

|Вложенный дополнительный пример высказывания|Объяснение|
|--|--|
|это новая форма|совпадает со всеми словами в шаблоне|
|это новая форма|совпадает с внешним необязательным словом и недополнительными словами в шаблоне|
|новая форма|совпадения требуется слова только|

Синтаксис **группировки** с скобками может быть вложен на два уровня. Например: `(({Entity1.RoleName1} | {Entity1.RoleName2} ) | {Entity2} )`. Эта функция позволяет сопоставить любое из трех сущностей.

Если Entity1 — это Место с такими ролями, как происхождение (Сиэтл) и пункт назначения (Cairo), а Entity 2 — это известное название здания из объекта списка (RedWest-C), следующие высказывания будут отображаться по этому шаблону:

|Вложенные группирования пример высказывания|Объяснение|
|--|--|
|РедВест-С|соответствует внешней группировке сущности|
|Seattle|соответствует одной из внутренних сущностей группировки|
|Cairo|соответствует одной из внутренних сущностей группировки|

## <a name="nesting-limits-for-groups-with-optional-syntax"></a>Ограничения на вложения для групп с дополнительным синтаксисом

Комбинация **группировки** с **дополнительным** синтаксисом имеет ограничение в 3 уровня вложенности.

|Разрешено|Пример|
|--|--|
|Да|(- (Тест1 &#x7c; тест2) - &#x7c; тест3)|
|нет|(- (Тест1 &#x7c; тест2) &#x7c; тест3)|

## <a name="nesting-limits-for-groups-with-or-ing-syntax"></a>Ограничения на вложения для групп с или-ING синтаксис

Комбинация **группировки** с синтаксисом **или ing** имеет ограничение в 2 вертикальных бара.

|Разрешено|Пример|
|--|--|
|Да|(Test1 &#x7c; test2 &#x7c; (test3 &#x7c; test4) )|
|нет|(Test1 &#x7c; test2 &#x7c; test3 &#x7c; (test4 &#x7c; test5) ) |

## <a name="syntax-to-add-an-entity-to-a-pattern-template"></a>Синтаксис, предназначенный для добавления сущности в шаблон
Чтобы добавить сущность в шаблон, заключите имя сущности в фигурные скобки, например `Who does {Employee} manage?`.

|Шаблон с сущностью|
|--|
|`Who does {Employee} manage?`|

## <a name="syntax-to-add-an-entity-and-role-to-a-pattern-template"></a>Синтаксис, предназначенный для добавления сущности и роли в шаблон
Роль сущности обозначается как `{entity:role}`: имя сущности, за которым следует двоеточие, а затем имя роли. Чтобы добавить сущность с ролью в шаблон, заключите имя сущности и имя роли в фигурные скобки, например `Book a ticket from {Location:Origin} to {Location:Destination}`.

|Шаблон с ролями сущности|
|--|
|`Book a ticket from {Location:Origin} to {Location:Destination}`|

## <a name="syntax-to-add-a-patternany-to-pattern-template"></a>Синтаксис, предназначенный для добавления сущности Pattern.any в шаблон
Сущность Pattern.any позволяет добавлять сущность переменной длины в шаблон. Если формат шаблона соблюдается, Pattern.any может быть любой длины.

Чтобы добавить сущность **Pattern.any** в шаблон, заключите сущность Pattern.any в фигурные скобки, например `How much does {Booktitle} cost and what format is it available in?`.

|Шаблон с сущностью Pattern.any|
|--|
|`How much does {Booktitle} cost and what format is it available in?`|

|Наименования книг в шаблоне|
|--|
|Сколько **стоит эта книга** и в каком формате она доступна?|
|Сколько стоит **запрос** и в каком формате она доступна?|
|Сколько стоит **Загадочное ночное убийство собаки** и в каком формате она доступна?|

Слова названия книги не смущают LUIS, потому что LUIS знает, где заканчивается название книги, на основе Pattern.any entity.

## <a name="explicit-lists"></a>Явные списки

создать [явный список](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5ade550bd5b81c209ce2e5a8) через API-авторство, чтобы разрешить исключение, когда:

* Ваш шаблон содержит [шаблон.](luis-concept-entity-types.md#patternany-entity)
* И этот синтаксис шаблона допускает возможность неправильного извлечения сущности на основе высказывания.

Предположим, имеется шаблон, содержащий и дополнительный синтаксис `[]` и синтаксис сущности `{}`, которые объединены так, что данные будут извлекаться некорректно.

Рассмотрим шаблон "[найти] сообщение о {тема} [от {человек}]".

В следующей фразе сущности **тема** и **человек** извлекаются правильно и неправильно:

|Фраза|Сущность|Правильное извлечение|
|--|--|:--:|
|сообщение о собаках от Глеба|тема=собаки<br>человек=Глеб|✔|
|сообщение о мужчине из Ла-Манча|тема=мужчина<br>человек=Ла-Манч|X|

В предыдущей таблице предмет `the man from La Mancha` должен быть (название книги), а `from`потому, что тема включает в себя факультативное слово, название неправильно предсказано.

Чтобы исправить это исключение в шаблоне, добавьте`the man from la mancha` как сопоставление явного списка для сущности {тема}, используя [API авторизации для явного списка](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5ade550bd5b81c209ce2e5a8).

## <a name="syntax-to-mark-optional-text-in-a-template-utterance"></a>Синтаксис, предназначенный для отметки дополнительного текста в шаблоне фразы
Отметьте необязательный текст во фразе, используя синтаксис регулярного выражения с квадратными скобками `[]`. В необязательном тексте может быть не более двух экземпляров открывающих и закрывающих квадратных скобок.

|Шаблон с необязательным текстом|Значение|
|--|--|
|`[find] email about {subject} [from {person}]`|`find`и `from {person}` являются необязательными|
|"Можете ли вы помочь мне?".|Знак препинания не является обязательным|

Знаки препинания`?` `!`(, ) `.`должны быть проигнорированы, и вы должны игнорировать их с помощью квадратного синтаксиса кронштейна в шаблонах.

## <a name="next-steps"></a>Следующие шаги

Узнайте больше о шаблонах:

* [Как добавить шаблоны](luis-how-to-model-intent-pattern.md)
* [Как добавить pattern.any entity](luis-how-to-add-entities.md#add-a-patternany-entity)
* [Концепции шаблонов](luis-concept-patterns.md)

Поймите, как [возвращается чувство](luis-reference-prebuilt-sentiment.md) в ответе .json.