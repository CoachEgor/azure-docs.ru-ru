---
title: Рекомендации по созданию приложения LUIS
titleSuffix: Azure Cognitive Services
description: Изучите лучшие практики, чтобы получить наилучшие результаты от модели приложения LUIS.
services: cognitive-services
author: diberry
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: conceptual
ms.date: 10/25/2019
ms.author: diberry
ms.openlocfilehash: b4be79338db71ad83204fae971da0b77885a8070
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "74280926"
---
# <a name="best-practices-for-building-a-language-understanding-luis-app"></a>Рекомендации по созданию приложения для понимания языка (LUIS)
Используйте процесс авторизации приложения для создания приложения LUIS: 

* Создание языковых моделей (намерения и сущности)
* Добавьте несколько учебных примеров высказываний (15-30 за намерение)
* Публикация в конечную точку
* Проведите тестирование из конечной точки 

После [публикации](luis-how-to-publish-app.md)приложения используйте жизненный цикл разработки для добавления функций, публикации и тестирования с конца. Не начинайте следующий авторский цикл, добавляя больше высказываний на примере, потому что это не позволяет LUIS узнать вашу модель с реальными высказываниями пользователей. 

Не расширяйте высказывания до тех пор, пока текущий набор примеров и высказываний в конечных точках не вернется уверенными, высокими показателями прогнозирования. Улучшение оценки с помощью [активного обучения.](luis-concept-review-endpoint-utterances.md) 




## <a name="do-and-dont"></a>Рекомендации и предостережения
В следующем списке приведены рекомендации для приложений LUIS:

|Как нужно|Как не нужно|
|--|--|
|[Определяйте четкие намерения](#do-define-distinct-intents)<br>[Добавление дескрипторов к намерениям](#do-add-descriptors-to-intents) |[Не добавляйте слишком много примеров высказываний в намерения](#dont-add-many-example-utterances-to-intents)<br>[Используйте несколько или простые сущности](#dont-use-few-or-simple-entities) |
|[Найдите компромисс между слишком общим и слишком конкретным содержанием для каждого намерения](#do-find-sweet-spot-for-intents)|[Не используйте LUIS в качестве платформы обучения](#dont-use-luis-as-a-training-platform)|
|[Создавайте свое приложение итеративно с помощью версий](#do-build-your-app-iteratively-with-versions)<br>[Создание сущностей для разложения моделей](#do-build-for-model-decomposition)|[Не добавляйте слишком много примеров высказываний одного формата, игнорируя другие форматы](#dont-add-many-example-utterances-of-the-same-format-ignoring-other-formats)|
|[Добавление шаблонов в более поздних итерациях](#do-add-patterns-in-later-iterations)|[Не смешивайте определения намерений и сущностей](#dont-mix-the-definition-of-intents-and-entities)|
|[Сбалансируйте высказывания по всем намерениям](#balance-your-utterances-across-all-intents), за исключением намерения None.<br>[Добавьте примеры речевых фрагментов в намерение None](#do-add-example-utterances-to-none-intent)|[Создание дескрипторов со всеми возможными значениями](#dont-create-descriptors-with-all-the-possible-values)|
|[Используйте функцию предложения для активного обучения](#do-leverage-the-suggest-feature-for-active-learning)|[Не добавляйте слишком много шаблонов](#dont-add-many-patterns)|
|[Мониторинг производительности приложения с помощью пакетного тестирования](#do-monitor-the-performance-of-your-app)|[Не выполняйте обучение и публикацию для каждого добавленного примера высказывания](#dont-train-and-publish-with-every-single-example-utterance)|

## <a name="do-define-distinct-intents"></a>Определяйте четкие намерения
Убедитесь, что словарь для каждого намерения используется только для этого намерения и не перекрывается с другим намерением. Например, если вам необходимо приложение для бронирования авиабилетов и гостиниц, вы сможете сделать так, чтобы эти бронирования находились в отдельных намерениях, или поместить их в одно намерение с различными сущностями внутри высказывания для различных данных.

Если словарь для двух намерений совпадает, объедините намерения и используйте сущности. 

Взгляните на следующие примеры высказываний:

|Примеры высказываний|
|--|
|Book a flight (забронировать авиабилет)|
|Book a hotel (забронировать гостиницу)|

`Book a flight`и `Book a hotel` использовать тот же словарь `book a `. Этот формат одинаков, поэтому он должен быть `flight` `hotel` таким же намерением с разными словами и с извлеченными сущностями. 

## <a name="do-add-descriptors-to-intents"></a>Добавляйте дескрипторы к намерениям

Описатели помогают описать объекты для намерения. Дескриптор омрачение может быть фразой список слов, которые имеют важное значение для этого намерения или сущности, которая имеет важное значение для этого намерения. 

## <a name="do-find-sweet-spot-for-intents"></a>Найдите компромисс для каждого намерения
Чтобы определить, перекрываются ли намерения, используйте данные прогнозирования из LUIS. LUIS не может правильно обработать перекрывающиеся намерения. Результатом является то, что намерение с максимальной оценкой оказывается слишком близко к другому намерению. Поскольку LUIS не использует один и тот же путь к данным для обучения каждый раз, перекрывающееся намерение может стать первым или вторым в обучении. Необходимо сделать так, чтобы оценки высказываний для каждого намерения находились как можно дальше друг от друга, чтобы этого не произошло. Хорошее различие между намерениями приведет к тому, что вы всегда будете получать ожидаемое намерение в качестве намерения с максимальной оценкой. 
 
<a name="#do-build-the-app-iteratively"></a>

## <a name="do-build-your-app-iteratively-with-versions"></a>Создавайте свое приложение итеративно с помощью версий

Каждый цикл разработки должен находиться в новой [версии](luis-concept-version.md), клонированной из существующей. 

## <a name="do-build-for-model-decomposition"></a>Сборка для разложения моделей

Разложение модели имеет типичный процесс:

* создание **намерения** на основе намерений пользователя клиент-приложения
* добавить 15-30 примервысказываний, основанных на реальном пользовательском вводе
* этикетка верхнего уровня концепции данных в примере высказывания
* разбить концепцию данных на подкомпоненты
* добавление дескрипторов (функций) в подкомпоненты
* добавить дескрипторы (функции) к намерениям 

После того как вы создали намерения и добавлены пример высказывания, следующий пример описывает сущность разложения. 

Начните с определения полных концепций данных, которые вы хотите извлечь в высказывании. Это ваша машино-изученная сущность. Затем разложить фразу на ее части. Это включает в себя идентификацию подкомпонентов (как сущностей), а также дескрипторов и ограничений. 

Например, если вы хотите извлечь адрес, можно назвать `Address`верхнюю машино-изученную сущность. При создании адреса определите некоторые из его подкомпонентов, таких как адрес улицы, город, штат и почтовый индекс. 

Продолжайте разлагать эти элементы, **ограничивая** почтовый индекс обычным выражением. Разложить адрес улицы на части номера улицы (с использованием заранее построенного номера), названия улицы и типа улицы. Тип улицы можно описать со списком **дескрипторов,** таких как проспект, круг, дорога и переулок.

API авторов V3 позволяет разложение модели. 

## <a name="do-add-patterns-in-later-iterations"></a>Добавляйте шаблоны в более поздние итерации

Вы должны понять, как приложение ведет себя перед [добавлением шаблонов,](luis-concept-patterns.md) потому что шаблоны взвешиваются более сильно, чем примеры высказываний и искажают доверие. 

Как только вы поймете, как поведет себя ваше приложение, добавьте шаблоны по мере их обращения к приложению. Вам не нужно добавлять их с каждой [итерацией.](luis-concept-app-iteration.md) 

Нет ничего плохого в добавлении их в начале дизайна модели, но легче увидеть, как каждый шаблон изменяет модель после того, как модель тестируется с высказываниями. 
 
<!--

### Phrase lists

[Phrase lists](luis-concept-feature.md) allow you to define dictionaries of words related to your app domain. Seed your phrase list with a few words then use the suggest feature so LUIS knows about more words in the vocabulary specific to your app. A Phrase List improves intent detection and entity classification by boosting the signal associated with words or phrases that are significant to your app. 

Don't add every word to the vocabulary since the phrase list isn't an exact match. 

For more information:
* Concept: [Phrase list features in your LUIS app](luis-concept-feature.md)
* How-to: [Use phrase lists to boost signal of word list](luis-how-to-add-features.md)



### Patterns

Real user utterances from the endpoint, very similar to each other, may reveal patterns of word choice and placement. The [pattern](luis-concept-patterns.md) feature takes this word choice and placement along with regular expressions to improve your prediction accuracy. A regular expression in the pattern allows for words and punctuation you intend to ignore while still matching the pattern. 

Use pattern's [optional syntax](luis-concept-patterns.md) for punctuation so punctuation can be ignored. Use the [explicit list](luis-concept-patterns.md#explicit-lists) to compensate for pattern.any syntax issues. 

For more information:
* Concept: [Patterns improve prediction accuracy](luis-concept-patterns.md)
* How-to: [How to add Patterns to improve prediction accuracy](luis-how-to-model-intent-pattern.md)
-->

<a name="balance-your-utterances-across-all-intents"></a>

## <a name="do-balance-your-utterances-across-all-intents"></a>У сбалансировать ваши высказывания во всех намерениях

Чтобы прогнозирование LUIS было точным, количество примеров высказываний по каждому намерению (за исключением намерения None) должно быть примерно одинаковым. 

Если у вас есть намерение со 100 примерами высказываний и намерение с 20 примерами высказываний, то намерение со 100 примерами высказываний будет иметь более высокую точность прогнозирования.  

## <a name="do-add-example-utterances-to-none-intent"></a>Добавьте примеры высказываний в намерение None

Это намерение является резервным намерением, указывающим на все, что находится за пределами приложения. Добавляйте по одному примеру высказывания в намерение None на каждые 10 примеров высказываний в остальной части приложения LUIS.

## <a name="do-leverage-the-suggest-feature-for-active-learning"></a>Используйте функцию предложения для активного обучения

Вместо добавления дополнительных высказываний в намерения регулярно используйте функцию **Просмотра высказываний конечной точки**[активного обучения](luis-how-to-review-endpoint-utterances.md). Так как приложение постоянно получает высказывания конечной точки, этот список растет и изменяется.

## <a name="do-monitor-the-performance-of-your-app"></a>Отслеживайте производительность своего приложения

Отслеживайте точность прогнозирования с помощью [набора тестов пакета](luis-concept-batch-test.md). 

Храните отдельный набор высказываний, которые не используются в качестве [примера высказываний](luis-concept-utterance.md) или высказываний конечной точки. Продолжайте улучшать приложение для своего набора тестов. Адаптируйте набор тестов, так чтобы он отражал настоящие высказывания пользователей. Используйте набор тестов для оценки каждой итерации или версии приложения. 

## <a name="dont-add-many-example-utterances-to-intents"></a>Не добавляйте слишком много примеров высказываний в намерения

После публикации приложения добавляйте только высказывания из активного обучения в процессе жизненного цикла разработки. Если высказывания очень похожи, добавьте шаблон. 

## <a name="dont-use-few-or-simple-entities"></a>Не используйте несколько или простые сущности

Сущности построены для извлечения и прогнозирования данных. Важно, чтобы в каждом намерении были машино-изученные сущности, описывающие данные в намерениях. Это помогает LUIS предсказать намерение, даже если клиентское приложение не нуждается в использовании извлеченного объекта. 

## <a name="dont-use-luis-as-a-training-platform"></a>Не используйте LUIS в качестве платформы обучения

LUIS относится к домену языковой модели. Он не предназначен для работы в качестве общей платформы обучения естественного языка. 

## <a name="dont-add-many-example-utterances-of-the-same-format-ignoring-other-formats"></a>Не добавляйте слишком много примеров высказываний одного формата, игнорируя другие форматы

LUIS ожидает вариации в высказываниях намерения. Высказывания могут различаться с сохранением одного и того же общего смысла. Эти вариации могут относиться к длине высказывания, подбору слов и расположению слов. 

|Не используйте одинаковый формат|Используйте различные форматы|
|--|--|
|Buy a ticket to Seattle (Купить билет в Сиэтл)<br>Buy a ticket to Paris (Купить билет в Париж)<br>Buy a ticket to Orlando (Купить билет в Орландо)|Buy 1 ticket to Seattle (Купить 1 билет в Сиэтл)<br>Reserve two seats on the red eye to Paris next Monday (Зарезервировать два места на ночной рейс в Париж на следующий понедельник)<br>I would like to book 3 tickets to Orlando for spring break (Я хотел бы забронировать 3 билета в Орландо на весенний отпуск)|

Во втором столбце используются разные глаголы (купить, зарезервировать, забронировать), разное количество (1, два, 3) и различный порядок слов, но намерение во всех случаях одно и то же — приобрести авиабилеты для путешествия. 

## <a name="dont-mix-the-definition-of-intents-and-entities"></a>Не смешивайте определения намерений и сущностей

Создайте намерения для всех действий, которые может предпринять ваш бот. Используйте сущности в качестве параметров, которые делают возможным выполнение действия. 

Для бота, который будет бронировать авиабилеты, создайте намерение **BookFlight.** Не создавайте намерение для каждой авиакомпании или для каждого места назначения. Используйте эти фрагменты данных как [сущности](luis-concept-entity-types.md) и помечайте их в примерах высказываний. 

## <a name="dont-create-descriptors-with-all-the-possible-values"></a>Не создавайте дескрипторов со всеми возможными значениями

Предоставьте несколько примеров в [списках фраз](luis-concept-feature.md) дескриптора, но не каждое слово. LUIS обобщает указанные примеры и учитывает контекст. 

## <a name="dont-add-many-patterns"></a>Не добавляйте слишком много шаблонов

Не добавляйте слишком много [шаблонов](luis-concept-patterns.md). LUIS быстрее пройдет обучение с меньшим количеством примеров. Не перегружайте систему без необходимости.

## <a name="dont-train-and-publish-with-every-single-example-utterance"></a>Не выполняйте обучение и публикацию для каждого добавленного примера высказывания

Добавьте 10–15 высказываний перед обучением и публикацией. Это позволит оценить влияние на точность прогнозирования. Добавление одного высказывания может не оказать существенного влияния на оценку. 

## <a name="next-steps"></a>Дальнейшие действия

* Узнайте, как [спланировать свое приложение](luis-how-plan-your-app.md) LUIS.
