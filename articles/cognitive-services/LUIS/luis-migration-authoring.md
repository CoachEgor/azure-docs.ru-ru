---
title: Переход на ресурс Azure для разработки 2
titleSuffix: Azure Cognitive Services
description: Миграция на ключ ресурса создания Azure 2.
services: cognitive-services
author: diberry
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: how-to
ms.date: 06/17/2020
ms.author: diberry
ms.openlocfilehash: 5f0778436db7bd8c3a09e3ba346d8a9a6c4af454
ms.sourcegitcommit: 55b2bbbd47809b98c50709256885998af8b7d0c5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/18/2020
ms.locfileid: "84983746"
---
# <a name="migrate-to-an-azure-resource-authoring-key"></a>Миграция в ключ создания ресурсов Azure

Language Understanding (LUIS) создание аутентификации изменено с учетной записи электронной почты на ресурс Azure. В настоящее время переключение на ресурс Azure будет применено в будущем.


## <a name="what-is-migration"></a>Что такое миграция?

Миграция — это процесс изменения проверки подлинности с учетной записи электронной почты на ресурс Azure. После миграции ваша учетная запись будет связана с подпиской Azure и ресурсом разработки Azure. **Все пользователи LUIS (владельцы или участники совместной работы), в конечном итоге, потребуют миграции.** Миграция должна быть выполнена с портала LUIS. Если вы создаете ключи создания, например с помощью интерфейса командной строки LUIS, вам все равно потребуется завершить процесс миграции на портале LUIS. После миграции вы по-прежнему сможете соавторам приложений, но они будут добавлены на уровне ресурсов Azure, а не на уровне приложения.

> [!Note]
> Перед миграцией соавторы называются _участниками совместной работы_ на уровне приложения Luis. После миграции роль _участника_ Azure используется для тех же функций, но на уровне ресурсов Azure.

## <a name="note-before-you-migrate"></a>Примечание перед миграцией

* Миграция является **односторонним** процессом. После миграции вы не сможете вернуться.
* Приложения будут **автоматически перенесены** вместе с вами, если вы являетесь **владельцем** приложения.
* Владелец не может выбрать подмножество приложений для миграции, и процесс будет необратимым.
* После **миграции владельца**приложения будут **скрыты от сторон совместной работы** .
* Владельцы получат запрос на отправку сообщений электронной почты в участников совместной работы, чтобы информировать их о миграции.
* Приложения **не будут переноситься** вместе с вами, если вы являетесь членом **совместной работы** в приложении.
* Владелец не может понять, что его участники совместной работы перенесены.
* При **миграции не выполняется** автоматическое собираются участников совместной работы и их перемещение или добавление в ресурс создания Azure. Владелец приложения должен выполнить этот шаг после миграции. Для этого шага требуются [разрешения на доступ к ресурсу разработки Azure](https://docs.microsoft.com/azure/cognitive-services/luis/luis-how-to-collaborate).
* После назначения ресурсу Azure **Участники совместной работы должны будут выполнить миграцию для доступа к приложениям**. В противном случае у них не будет доступа для создания приложений.
* Перенесенного пользователя нельзя добавить в качестве участника приложения.
* Если **вы владеете ключами прогнозирования, назначенными приложениям, принадлежащим другому пользователю**, **миграция будет заблокирована** как для владельца, так и для участников совместной работы. Рекомендации см. ниже.

> [!Note]
> Если необходимо создать ресурс среды выполнения прогнозирования, то можно создать [отдельный процесс](luis-how-to-azure-subscription.md#create-resources-in-the-azure-portal) .

## <a name="migration-prerequisites"></a>Предварительные требования для миграции

* Необходимо связать действующую подписку Azure. Попросите администратора клиента добавить вас в подписку, или вы можете зарегистрироваться [бесплатно.](https://azure.microsoft.com/free/)
* Вам нужно создать ресурс Azure LUIS Authoring на портале LUIS или портал Azure. Создание ресурса-разработчика на портале LUIS является частью процесса миграции, который рассматривается в следующем разделе.
* Если вы являетесь членом **совместной работы в приложениях**, приложения не будут переноситься автоматически. **Рекомендуется выполнять резервное копирование этих приложений** , экспортируя их или используя [API экспорта](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5890b47c39e2bb052c5b9c40). Вы можете импортировать приложение обратно в LUIS после миграции. В процессе импорта создается новое приложение с новым ИДЕНТИФИКАТОРом приложения, владельцем которого вы являетесь.
* Если вы являетесь **владельцем приложения**, вам не потребуется экспортировать приложения, так как они будут автоматически перенесены. **Рекомендуется сохранить список коллаборатор'с для каждого приложения.** Шаблон сообщения электронной почты, содержащий этот список, предоставляется в рамках процесса миграции.


|Портал|Назначение|
|--|--|
|[Azure](https://azure.microsoft.com/free/)|* Создайте ресурсы для прогнозирования и создания ресурсов.<br>* Назначение участников ресурсам.|
|[LUIS](https://www.luis.ai)|* Переход на новые ресурсы для разработки.<br>* Создайте новый ресурс для разработки в потоке миграции.<br>* Назначение и отмена назначения ресурсов для прогнозирования и разработки приложений на странице **ресурсов Azure "Управление" >** . <br>* Перемещение приложений из одного ресурса для создания в другой.  |

> [!Note]
> **Разработка приложения Luis предоставляется бесплатно**, обозначается `F0` уровнем. Дополнительные сведения [о ценовых](luis-limits.md#key-limits)категориях.


## <a name="migration-steps"></a>Этапы миграции

1. На работающем портале LUIS можно начать процесс миграции со значка **Azure** на верхней панели инструментов.

   > [!div class="mx-imgBorder"]
   > ![Значок миграции](./media/migrate-authoring-key/migration-button.png)

2. Всплывающее окно миграции позволяет продолжить миграцию или выполнить миграцию позже. Выберите **перенести сейчас**.

   > [!div class="mx-imgBorder"]
   > ![Первое всплывающее окно в процессе миграции выберите пункт перенести сейчас.](./media/migrate-authoring-key/prompt-when-migrating-2.png)

3. Кроме того, если какое бы то ни было приложение имеет участников совместной работы, вам будет предложено **отправить им сообщение электронной почты** с просьбой сообщить о миграции. Этот параметр является необязательным.

   Для каждого совместного взаимодействия и приложения приложение электронной почты по умолчанию открывается с неформатированным электронным письмом. Вы можете изменить сообщение перед его отправкой. Шаблон сообщения электронной почты содержит точный идентификатор приложения и имя приложения.
   
   ```html
   Dear Sir/Madam,

   I will be migrating my LUIS account to Azure. Consequently, you will no longer have access to the following app:

   App Id: <app-ID-omitted>
   App name: Human Resources
      
   Thank you
   ```
   
   > [!Note]
   > После переноса учетной записи в Azure ваши приложения больше не будут доступны для участников совместной работы.

4. При необходимости, если вы являетесь средством совместной работы в любом приложении, вам будет предложено **экспортировать копию приложений** , выбрав этот параметр в процессе миграции. После выбора параметра вы увидите страницу, расположенную ниже, где вы наберете кнопку Скачать слева, чтобы экспортировать нужные приложения. Вы можете импортировать эти приложения обратно после миграции, так как они не будут автоматически перенесены вместе с вами. Этот параметр является необязательным.

   > [!div class="mx-imgBorder"]
   > ![Запрос на экспорт приложения.](./media/migrate-authoring-key/export-app-for-collabs-2.png)

5. Вы можете создать новый ресурс для создания LUIS или выполнить миграцию в существующий ресурс, если он уже создан в Azure. Выберите нужный параметр, нажав соответствующую кнопку ниже.

   > [!div class="mx-imgBorder"]
   > ![Создание ресурса для разработки](./media/migrate-authoring-key/choose-existing-authoring-resource.png)

### <a name="create-new-authoring-resource-from-luis-to-migrate"></a>Создание нового ресурса для создания из LUIS для миграции

Если вы хотите создать новый ресурс для разработки, выберите **создать новый ресурс для** создания и укажите следующие сведения в следующем окне.

> [!div class="mx-imgBorder"]
> ![Создание ресурса для разработки](./media/migrate-authoring-key/create-new-authoring-resource-2.png)

* **Имя ресурса.** Выбранное пользователем имя, используемое в качестве части URL-адреса для запросов конечной точки разработки и прогнозирования.
* **Имя подписки** — подписка, которая будет связана с ресурсом. Если у вас есть несколько подписок, принадлежащих клиенту, выберите нужную подписку из раскрывающегося списка.
* **Группа ресурсов** — имя настраиваемой группы ресурсов, которое выбирается из раскрывающегося списка. Группы ресурсов позволяют группировать ресурсы Azure для осуществления доступа и управления.
* **Клиент.** Клиент, с которым связана подписка Azure. По умолчанию выбран клиент, который вы в данный момент выбираете. Вы можете переключить клиентов, выбрав самый правый аватар, содержащий инициалы.

После ввода указанных выше сведений нажмите кнопку **Готово**.

Обратите внимание, что вы можете иметь 10 бесплатных ресурсов для разработки для каждого региона на подписку. Если в вашей подписке более 10 ресурсов для создания в одном регионе, вы не сможете создать новую.

* При создании ресурса разработки отображается сообщение об успешном выполнении. Нажмите кнопку **Закрыть** , чтобы закрыть всплывающее окно.

  > [!div class="mx-imgBorder"]
  > ![Ваш ресурс разработки создан успешно.](./media/migrate-authoring-key/migration-success-2.png)

### <a name="use-existing-authoring-resource-to-migrate"></a>Использовать существующий ресурс разработки для миграции

Если ваша подписка уже связана с LUIS ресурсом Azure или созданной на основе портал Azure и вы хотите перейти на нее вместо создания нового ресурса, выберите **использовать существующий ресурс создания** и укажите следующие сведения в следующем окне.

> [!div class="mx-imgBorder"]
>![Создание ресурса для разработки](./media/migrate-authoring-key/choose-existing-authoring-resource-2.png)

* **Клиент.** Клиент, с которым связана подписка Azure. По умолчанию выбран клиент, который вы в данный момент выбираете.
* **Имя подписки** — подписка, которая будет связана с ресурсом. Если у вас есть несколько подписок, принадлежащих клиенту, выберите нужную из раскрывающегося списка.
* **Имя ресурса** — выберите ресурс, на котором требуется выполнить миграцию.

> [!Note]
> Если вы не видите свой ресурс для разработки в раскрывающемся списке, убедитесь, что он создан в нужном **месте** , как на ПОРТАЛе Luis, в котором вы вошли. Также убедитесь, что созданные ресурсы действительно являются ресурсами для **разработки** , а не **ресурсами прогноза**.


* Проверьте имя ресурса разработки и нажмите кнопку " **перенести сейчас** ".

 > [!div class="mx-imgBorder"]
 > ![Создание ресурса для разработки](./media/migrate-authoring-key/choose-authoring-resource-and-migrate-2.png)

* Появится сообщение об успешном выполнении. Нажмите кнопку **Закрыть** , чтобы закрыть всплывающее окно.

 > [!div class="mx-imgBorder"]
 > ![Ваш ресурс разработки создан успешно.](./media/migrate-authoring-key/migration-success-2.png)

## <a name="using-apps-after-migration"></a>Использование приложений после миграции

* После миграции все приложения LUIS, владельцем которых вы являетесь, теперь будут назначены одному ресурсу LUIS.
* В списке **Мои приложения** отображаются приложения, перенесенные в новый ресурс создания.
* Перед доступом к приложениям выберите ресурс подписки и LUIS, чтобы просмотреть приложения, которые вы можете создать.

 > [!div class="mx-imgBorder"]
 > ![Выберите элемент подписка и ресурс для разработки LUIS, чтобы просмотреть приложения, которые вы можете создать.](./media/create-app-in-portal-select-subscription-luis-resource.png)

* Вам не нужно знать ключ ресурса для разработки, чтобы продолжить редактирование приложений на портале LUIS.
* Если вы планируете изменять приложения программным путем, вам понадобятся значения ключа разработки. Эти значения отображаются на странице **ресурсов Azure "управление >** " на портале Luis и доступны в портал Azure на странице **ключей** ресурса. Можно также создать дополнительные ресурсы для разработки и назначить их с одной страницы.

 > [!div class="mx-imgBorder"]
 > ![Управление ресурсом разработки.](./media/migrate-authoring-key/manage-authoring-resource-2.png)

## <a name="add-contributors-to-authoring-resources"></a>Добавление участников к разработке ресурсов

[!INCLUDE [Manage contributors for the Azure authoring resource for language understanding](./includes/manage-contributors-authoring-resource.md)]

Узнайте [, как добавить участников](luis-how-to-collaborate.md) в свой ресурс разработки. Участники получат доступ ко всем приложениям в этом ресурсе.

Вы можете добавить участников в ресурс разработки из _портал Azure_на странице **управления доступом (IAM)** для этого ресурса. Дополнительные сведения см. в разделе [Добавление доступа к участнику](luis-migration-authoring-steps.md#after-the-migration-process-add-contributors-to-your-authoring-resource).

> [!Note]
> Если владелец приложения LUIS, перенесенный и добавлен участником совместной работы в ресурсе Azure, он по-прежнему будет иметь доступ к приложению, только если он не выполняет миграцию.

## <a name="luis-portal-migration-reminders"></a>Напоминания о миграции с портала LUIS

[Портал Luis](https://www.luis.ai) предоставляет процесс миграции.

Вам будет предложено выполнить миграцию, если:
* У вас есть приложения в системе проверки подлинности по электронной почте для разработки.
* Вы являетесь владельцем приложения.

Еженедельно будет предложено перенести приложения. Вы можете отменить это окно без миграции. Если вы хотите выполнить миграцию до следующего запланированного периода, можно начать процесс миграции со значка **Azure** на верхней панели инструментов портала Luis.

Вы можете отложить процесс миграции, отменив окно. Вы будете периодически запрашивать миграцию до тех пор, пока не будет выполнена миграция или не будет выполнен крайний срок миграции. Процесс миграции можно запустить с помощью значка блокировки верхней панели навигации.

## <a name="prediction-resources-blocking-migration"></a>Ресурсы прогнозирования, блокирующие миграцию
Миграция негативно влияет на любую среду выполнения приложений. При миграции все участники совместной работы удаляются из приложений и удаляются в качестве участника совместной работы из других приложений. Этот процесс означает, что ключи, назначаемые совместной работой, также удаляются, что может нарушить работу приложения, если оно находится в рабочей среде. Это причина, по которой мы блокируем миграцию, пока не будут удалены участники совместной работы или ключи, назначенные им вручную.

### <a name="when-does-prediction-resources-block-migration"></a>Когда ресурсы прогнозирования блокируют миграцию?
* Миграция блокируется, если вы назначили ресурсы прогнозирующего и среды выполнения в приложениях, которыми вы не владеете.
* Миграция блокируется, если у вас есть другие пользователи, которым назначены ресурсы прогноза/среды выполнения для собственных приложений.

### <a name="recommended-steps-to-do-if-you-are-the-owner-of-the-app"></a>Рекомендуемые действия в случае, если вы являетесь владельцем приложения
Если вы являетесь владельцем некоторых приложений и имеете для них назначенный для этого приложения ключ прогнозирования/выполнения, при миграции отображается сообщение об ошибке, в котором перечислены идентификаторы приложений, которым назначены ключи прогнозирования, принадлежащие другим пользователям.

Рекомендуется:
* Уведомлять участников совместной работы о миграции.
* Удалите все участники совместной работы из приложений, показанных в ошибке.
* Пройдет процесс миграции, который должен быть выполнен, если вы вручную удалите участников совместной работы.
* Назначьте участников совместной работы как участников нового ресурса для разработки.
* Участники совместной работы — это миграция и повторное назначение прогнозирующих ресурсов приложениям.
Обратите внимание, что это приведет к временному прерыванию приложения до повторного назначения ресурсов прогнозирования.

Другое решение: перед миграцией владельца участники совместной работы могут добавить владельцев приложений в качестве участников подписки Azure из портал Azure. Это предоставит владельцу доступ к ресурсу прогнозирования времени выполнения. Если владелец переносится с использованием новой подписки, которая была добавлена в (которая будет найдена в новом клиенте), это не только разблокирует процесс миграции как для совместного использования, ни для владельца приложения, но это позволит выполнить плавный перенос приложений с назначенным им ключом, не нарушая работу приложений.


### <a name="recommended-steps-to-do-if-you-are-a-collaborator-on-an-app"></a>Рекомендуемые действия при работе с приложением для совместной работы
Если вы выполняете совместную работу над приложениями и назначили этому приложению ключи для прогнозирования и выполнения, при миграции отображается сообщение об ошибке, в котором перечислены идентификаторы приложений и пути к ключам, которые блокируют миграцию.

Рекомендуется:
* Экспорт приложений в качестве резервной копии. Он предоставляется в качестве дополнительного этапа процесса миграции.
* Отмените назначение ресурсов прогноза на странице " **Управление ресурсами Azure" >** .
* Процесс миграции завершен.
* Импорт приложений обратно после миграции.
* Переназначение ключей прогнозирования на страницу **ресурсов Azure для управления приложениями >** .

> [!Note]
> При импорте приложений после миграции они будут иметь разные идентификаторы приложений и будут отличаться от используемых в рабочей среде. Теперь вы будете владельцем этих приложений.

## <a name="troubleshooting-migration-process"></a>Устранение неполадок процесса миграции

При попытке выполнить миграцию, но не удается найти подписку Azure в раскрывающемся списке:
* Убедитесь, что у вас есть действующая подписка Azure, права на создание Cognitive Services ресурсов. Перейдите к [портал Azure](https://ms.portal.azure.com) и проверьте состояние подписки. Если у вас ее нет, [Создайте бесплатную пробную версию](https://azure.microsoft.com/free/).
* Убедитесь, что вы являетесь соответствующим клиентом, связанным с вашей действительной подпиской. Вы можете переключать клиенты из следующего левого аватара на панели инструментов ниже: ![ коммутаторы клиентов.](./media/migrate-authoring-key/switch-user-tenant-2.png)

 Если у вас уже есть ресурс для разработки, но его не удается найти при выборе параметра "использовать существующий ресурс разработки":
* Вероятно, ресурс был создан в другом расположении, чем на портале, на котором вы вошли. Проверьте [регионы разработки Luis и порталы](https://docs.microsoft.com/azure/cognitive-services/luis/luis-reference-regions#luis-authoring-regions) .
* Вместо этого создайте ресурс на портале LUIS.

Если выбран параметр "создать новый ресурс разработки", а миграция завершилась неудачей, отобразится сообщение об ошибке "не удалось получить сведения о пользователе Azure, повторите попытку позже".
* Ваша подписка может иметь 10 или более ресурсов разработки для каждого региона на подписку. Если это так, вы не сможете создать новый ресурс для разработки.
* Выполните миграцию, выбрав параметр "использовать существующий ресурс разработки" и выбрав один из существующих ресурсов в подписке.

Если вы видите ошибку ниже, установите флажок [Рекомендуемые действия, которые необходимо выполнить, если вы являетесь владельцем раздела приложения] ![ сбой миграции владельцев](./media/migrate-authoring-key/migration-failed-for-owner-2.png)

Если вы видите ошибку ниже, см. раздел [рекомендуемые шаги для участника совместной работы в приложении] ![ сбой миграции для участников совместной работы.](./media/migrate-authoring-key/migration-failed-for-collab-2.png)


## <a name="next-steps"></a>Дальнейшие действия

* Ознакомьтесь с [основными понятиями](luis-concept-keys.md) о создании ключей и ключах среды выполнения
* Узнайте, [как назначать ключи](luis-how-to-azure-subscription.md) и добавлять [участников](luis-how-to-collaborate.md) .
