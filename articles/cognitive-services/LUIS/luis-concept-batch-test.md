---
title: Пакетное тестирование - LUIS
titleSuffix: Azure Cognitive Services
description: Используйте пакетное тестирование для постоянной работы над приложением, чтобы усовершенствовать его и улучшить функции распознавания речи.
services: cognitive-services
author: diberry
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: conceptual
ms.date: 10/25/2019
ms.author: diberry
ms.openlocfilehash: e9ad7c52af20762633c710b39a64fbebf0cf6213
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79220053"
---
# <a name="batch-testing-with-1000-utterances-in-luis-portal"></a>Пакетное тестирование 1000 высказываний на портале LUIS

Пакетное тестирование проверяет активную обученную версию для измерения точности прогнозирования. Пакетный тест поможет вам просматривать точность каждого намерения и сущности в активной версии, отображая результаты с помощью диаграммы. Просмотрите результаты пакетного теста, чтобы принять соответствующие меры для повышения точности, такие как добавление большего количества высказываний на пример, если ваше приложение часто не может определить правильное намерение или маркировку сущностей в высказывании.

## <a name="group-data-for-batch-test"></a>Группировка данных для пакетного тестирования

Очень важно применять для пакетного тестирования высказывания, еще не знакомые службе LUIS. Если у вас есть набор данных высказываний, разделите высказывания на три набора: пример высказываний, добавленных к намерениям, высказывания, полученные из опубликованной конечной точки, и высказывания, используемые для пакетного тестирования LUIS после его обучения. 

## <a name="a-data-set-of-utterances"></a>Набор данных высказываний

Отправить пакетный файл высказываний, известный как *набор данных,* для пакетного тестирования. Набор данных представляет собой файл форматирования JSON, содержащий максимум 1000 помеченных **недублирующих** высказываний. Вы можете протестировать до 10 наборов данных в приложении. Если вам нужно протестировать больше, удалите набор данных, а затем добавьте новый.

|**Правила**|
|--|
|*Высказывания не должны дублироваться.|
|Не более 1000 высказываний.|

*Дубликатами считаются только точные совпадения, а не совпадения после назначения маркеров. 

## <a name="entities-allowed-in-batch-tests"></a>Сущности, разрешенные в пакетных тестированиях

Все пользовательские сущности в модели отображаются в фильтре сущностей пакетного тестирования, даже если в данных пакетного файла нет соответствующих сущностей.

<a name="json-file-with-no-duplicates"></a>
<a name="example-batch-file"></a>

## <a name="batch-file-format"></a>Формат пакетного файла

Пакетный файл содержит высказывания. Каждое высказывание должно сопровождаться ожидаемым прогнозом намерения, а также всеми [сущностями машинного обучения](luis-concept-entity-types.md#types-of-entities), которые должны быть в нем обнаружены. 

## <a name="batch-syntax-template-for-intents-with-entities"></a>Шаблон синтаксиса пакета для намерений с сущностями

Чтобы запустить файл пакета, используйте следующий шаблон.

```JSON
[
  {
    "text": "example utterance goes here",
    "intent": "intent name goes here",
    "entities": 
    [
        {
            "entity": "entity name 1 goes here",
            "startPos": 14,
            "endPos": 23
        },
        {
            "entity": "entity name 2 goes here",
            "startPos": 14,
            "endPos": 23
        }
    ]
  }
]
```

Чтобы уведомить о начале и конце сущности, в файле пакета используются свойства **startPos** и **endPos**. Их значения отсчитываются, начиная с нуля, и не должны начинаться или заканчиваться пробелом. В этом и состоит основное отличие от журналов запросов, для которых используются свойства startIndex и endIndex. 

[!INCLUDE [Entity roles in batch testing - currently not supported](../../../includes/cognitive-services-luis-roles-not-supported-in-batch-testing.md)]

## <a name="batch-syntax-template-for-intents-without-entities"></a>Шаблон синтаксиса пакета для намерений без сущностей

Чтобы запустить файл пакета без сущностей, используйте следующий шаблон.

```JSON
[
  {
    "text": "example utterance goes here",
    "intent": "intent name goes here",
    "entities": []
  }
]
```

Если вы не хотите тестировать сущности, включите свойство `entities` и задайте в качестве значения пустой массив `[]`.


## <a name="common-errors-importing-a-batch"></a>Распространенные ошибки при импорте пакета

Ниже перечислены распространенные ошибки. 

> * Превышение ограничения в 1000 высказываний.
> * Объект JSON, содержащий высказывание, не имеет свойства entities. Свойство может быть пустым массивом.
> * Слова, которые были помечены в нескольких сущностях.
> * Метка сущности с пробелом в начале или в конце.

## <a name="batch-test-state"></a>Состояние пакетного тестирования

LUIS отслеживает состояние последнего теста каждого набора данных. К этим данным относится размер набора данных (количество высказываний в пакете), дата последнего запуска и последний полученный результат (количество успешно спрогнозированных высказываний).

<a name="sections-of-the-results-chart"></a>

## <a name="batch-test-results"></a>Результаты пакетного тестирования

Результат пакетного тестирования демонстрируется в виде точечной диаграммы, которую называют матрицей ошибок. На этой диаграмме приводится распределение по 4 секторам результатов сравнения высказываний, содержащихся в пакетном файле, с намерениями и сущностями, прогнозируемыми текущей моделью. 

Точки данных в секторах **False Positive** (Ложный положительный результат) и **False Negative** (Ложный отрицательный результат) обозначают ошибки, которые нужно изучить дополнительно. Если все точки данных находятся на разделах **True Positive** и **True Negative,** точность вашего приложения идеально подходит для этого набора данных.

![Четыре сектора на диаграмме](./media/luis-concept-batch-test/chart-sections.png)

Эта диаграмма позволяет найти высказывания, которые LUIS неправильно прогнозирует при текущем состоянии обучения. Результаты отображаются в нескольких областях диаграммы. Выберите конкретную точку на диаграмме, чтобы просмотреть сведения об этом высказывании, или выберите имя области, чтобы просмотреть обобщенные результаты по этой области.

![Пакетное тестирование](./media/luis-concept-batch-test/batch-testing.png)

## <a name="errors-in-the-results"></a>Результаты с информацией об ошибках

Ошибками при пакетном тестировании считаются прогнозируемые намерения, которые не совпадают с данными в этом пакетном файле. Ошибки отображаются на диаграмме в двух красных секторах. 

Раздел ложных положительных результатов содержит сведения о высказываниях, которые ошибочно совпадают с намерением или сущностью. Раздел ложных отрицательных результатов содержит сведения о высказываниях, которые не соответствуют нужному намерению или сущности. 

## <a name="fixing-batch-errors"></a>Исправление ошибок, выявленных при пакетном тестировании

Если при пакетном тестировании будут обнаружены ошибки, вы можете добавить в намерение больше высказываний и (или) сопоставить дополнительные высказывания с сущностью, чтобы служба LUIS лучше различала намерения. Если вы уже добавили все нужные высказывания и присвоили все метки, но в прогнозировании при пакетном тестировании по-прежнему возникают ошибки, попробуйте добавить [список фраз](luis-concept-feature.md) с характерным для предметной области словарем, который поможет LUIS обучаться быстрее. 

## <a name="next-steps"></a>Дальнейшие действия

* Узнайте, как [выполнить пакетное тестирование](luis-how-to-batch-test.md)
