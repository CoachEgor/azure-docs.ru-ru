---
title: Как использовать авторские и готовые ключи с помощью LUIS
titleSuffix: Azure Cognitive Services
description: LUIS использует два ключа, ключ-автор для создания модели и ключ времени выполнения для запроса конечных точек прогнозирования с высказываниями пользователей.
services: cognitive-services
author: diberry
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: conceptual
ms.date: 10/25/2019
ms.author: diberry
ms.openlocfilehash: 9d213c8fa03ad2ca5e5fd7e620e52aa502749be2
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79220966"
---
# <a name="authoring-and-runtime-keys"></a>Ключи разработки и среды выполнения

Language Understanding (LUIS) имеет два сервиса и наборы API: 

* Авторство (ранее известное как _программное)_
* Время выполнения прогноза

Существует несколько типов ключевых, в зависимости от того, с какой службой вы хотите работать и как вы хотите с ней работать.

## <a name="non-azure-resources-for-luis"></a>Ресурсы, не связанные с Azure для LUIS

### <a name="starter-key"></a>Стартовый ключ

Когда вы впервые начинаете использовать LUIS, для вас создается **стартовый ключ.** Этот ресурс обеспечивает:

* бесплатные запросы на авторинг-услуги через портал LUIS или AIS (включая SDK)
* бесплатные 1000 запросов конечных точек прогнозирования в месяц через браузер, API или SDK

## <a name="azure-resources-for-luis"></a>Ресурсы Azure для LUIS

<a name="programmatic-key" ></a>
<a name="endpoint-key"></a>
<a name="authoring-key"></a>

LUIS позволяет использовать три типа ресурсов Azure: 
 
|Ключ|Назначение|Когнитивная услуга`kind`|Когнитивная услуга`type`|
|--|--|--|--|
|[Авторство ключа](#programmatic-key)|Доступ и управление данными приложения с автором, обучением, публикацией и тестированием. Создайте ключ авторов LUIS, если вы собираетесь программно автором приложений LUIS.<br><br>Цель ключа `LUIS.Authoring` заключается в том, чтобы позволить вам:<br>- программное управление приложениями и моделями language Understanding, включая обучение и публикацию<br> - контроль ные разрешения на ресурс-автор, назначая людей [на роль участника.](#contributions-from-other-authors)|`LUIS.Authoring`|`Cognitive Services`|
|[Ключ прогнозирования](#prediction-endpoint-runtime-key)| Запросы конечных точек прогнозирования запросов. Создайте ключ прогнозирования LUIS до того, как клиентское приложение запрашивает прогнозы сверх 1000 запросов, предоставляемых стартовым ресурсом. |`LUIS`|`Cognitive Services`|
|[Ключ мультисервисного ресурса Cognitive Service](../cognitive-services-apis-create-account-cli.md?tabs=windows#create-a-cognitive-services-resource)|Запросы на конечные точки прогнозирования запросов, совместно с LUIS и другими поддерживаемыми Cognitive Services.|`CognitiveServices`|`Cognitive Services`|

Когда процесс создания ресурса будет завершен, [назначайте ключ](luis-how-to-azure-subscription.md) к приложению на портале LUIS.

Важно, чтобы автор приложений LUIS в [регионах,](luis-reference-regions.md#publishing-regions) где вы хотите опубликовать и запрос.

> [!CAUTION]
> Для удобства, многие образцы используют [ключ Starter,](#starter-key) поскольку он обеспечивает несколько бесплатных вызовов конечной точки прогнозирования в своей [квоте.](luis-boundaries.md#key-limits)  


### <a name="query-prediction-resources"></a>Ресурсы прогнозирования запросов

* Ключ времени выполнения может быть использован для всех ваших приложений LUIS или для конкретных приложений LUIS. 
* Не используйте ключ времени выполнения для авторизации приложений LUIS. 

Конечная точка выполнения LUIS принимает два стиля запроса, оба используют ключ конечной точки выполнения прогноза, но в разных местах.

Конечная точка, используемая для доступа к времени выполнения, использует поддомен, `{region}` уникальный для региона вашего ресурса, обозначаемый в следующей таблице. 

## <a name="assignment-of-the-key"></a>Назначение ключа

Вы можете [назначить](luis-how-to-azure-subscription.md) ключ времени выполнения на [портале LUIS](https://www.luis.ai) или через соответствующие AIS. 

## <a name="key-limits"></a>Ограничения ключа

Вы можете создать до 10 авторов ключей в регионе за подписку. 

Смотрите области [ключевых границ](luis-boundaries.md#key-limits) и [Azure.](luis-reference-regions.md) 

Регионы публикации отличаются от регионов разработки. Убедитесь, что вы создаете приложение в области авторов, соответствующее региону публикации, которое вы хотите, чтобы ваше клиентское приложение было расположено.

## <a name="key-limit-errors"></a>Ошибки ограничений ключей
Если вы превышаете квоту транзакций в секунду (TPS), вы получаете ошибку HTTP 429. Если вы превышаете квоту транзакции в месяц (TPS), вы получаете ошибку HTTP 403. 

## <a name="contributions-from-other-authors"></a>Взносы от других авторов

**Для [авторизации приложений, переносимых с ресурсом:](luis-migration-authoring.md) ** _авторы_ управляются на портале Azure для авторского ресурса, используя страницу **управления доступом (IAM).** [Узнайте, как добавить пользователя,](luis-how-to-collaborate.md)используя адрес электронной почты сотрудника и роль _автора._ 

**Для приложений, которые еще не мигрировали:** все _сотрудники_ управляются на портале LUIS со **страницы сотрудников Управления->.**

## <a name="move-transfer-or-change-ownership"></a>Перемещение, передача или смена владельца

Приложение определяется его ресурсами Azure, которые определяются подпиской владельца. 

Вы можете переместить приложение LUIS. Используйте следующие ресурсы документации на портале Azure или Azure CLI:

* [Перемещение приложения между ресурсами авторов LUIS](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/apps-move-app-to-another-luis-authoring-azure-resource)
* [Перемещение ресурса в новую группу ресурсов или подписку](../../azure-resource-manager/management/move-resource-group-and-subscription.md)
* [Перемещение ресурса в рамках одной подписки или через подписки](../../azure-resource-manager/management/move-limitations/app-service-move-limitations.md)

Для передачи [права собственности](../../cost-management-billing/manage/billing-subscription-transfer.md) на подписку: 

**Для пользователей, которые мигрировали - [автор ресурс мигрировал](luis-migration-authoring.md) приложений** `contributor`: Как владелец ресурса, вы можете добавить .

**Для пользователей, которые еще не мигрировали:** Экспортируйте ваше приложение в виде файла JSON. Другой пользователь LUIS может импортировать приложение, тем самым становясь владельцем приложения. Новое приложение будет иметь другой идентификатор приложения.  

## <a name="access-for-private-and-public-apps"></a>Доступ для частных и публичных приложений

Для **частного** приложения доступ к режиму выполнения доступен владельцам и участникам. Для **общедоступного** приложения доступ к режиму выполнения доступен каждому, у кого есть свой собственный ресурс Azure [Cognitive Service](../cognitive-services-apis-create-account.md) или ресурс времени выполнения [LUIS,](luis-how-to-azure-subscription.md#create-resources-in-the-azure-portal) и имеет идентификатор общедоступного приложения. 

В настоящее время нет каталога общедоступных приложений.

### <a name="authoring-access"></a>Авторинг доступа
Доступ к приложению с портала [LUIS](luis-reference-regions.md#luis-website) или [авторских AIS](https://go.microsoft.com/fwlink/?linkid=2092087) контролируется ресурсом авторов Azure. 

Владелец и все участники имеют доступ к автору приложения. 

|Доступ к разработке включает в себя:|Примечания|
|--|--|
|Добавление или удалений ключей конечных точек||
|Экспорт версии||
|Экспорт журналов конечных точек||
|Импорт версии||
|Предоставление к приложению общего доступа|Если приложение является общедоступным, запросить его может любой пользователь с ключом разработки или ключом конечной точки.|
|Изменение модели|
|Публикация|
|Проверка высказываний конечной точки для [активного обучения](luis-how-to-review-endpoint-utterances.md)|
|Обучение|

<a name="prediction-endpoint-runtime-key"></a>

### <a name="prediction-endpoint-runtime-access"></a>Доступ к конечная точка прогнозирования

Доступ к конечному пункту прогнозирования контролируется настройкой на странице **Информации приложения** в разделе **Управление.** 

|[Частная конечная точка](#runtime-security-for-private-apps)|[Общедоступная конечная точка](#runtime-security-for-public-apps)|
|:--|:--|
|Доступно для владельцев и участников|Доступно для владельца, участников и всех, кто знает идентификатор приложения|

Вы можете контролировать, кто видит ваш ключ времени выполнения LUIS, вызывая его в среде от сервера к серверу. Если вы используете LUIS из бота, соединение между ботом и LUIS уже защищено. При вызове конечной точки LUIS напрямую следует создать серверный API (такой как [функция](https://azure.microsoft.com/services/functions/) Azure) с контролируемым доступом (таким как [AAD](https://azure.microsoft.com/services/active-directory/)). Когда API на стороне сервера вызывается и проверяется аутентифицированию и авторизация, передайте вызов В LUIS. Хотя эта стратегия не предотвращает атаки «человек в середине», она запутывает ваш ключ и URL-адрес от пользователей, позволяет отслеживать доступ и позволяет добавлять журнал ый в конечных точках (например, [Application Insights).](https://azure.microsoft.com/services/application-insights/)

#### <a name="runtime-security-for-private-apps"></a>Безопасность выполнения для частных приложений

Время выполнения частного приложения доступно только для следующих:

|Ключ и пользователь|Объяснение|
|--|--|
|Ключ разработки владельца| До 1000 обращений к конечной точке|
|Коллаборационист/автор-вклад ключи| До 1000 обращений к конечной точке|
|Любой ключ, назначенный LUIS автором или соавтором/автором|В зависимости от уровня использования ключей|

#### <a name="runtime-security-for-public-apps"></a>Безопасность выполнения для общедоступных приложений

После этого _любой_ допустимый ключ разработки или ключ конечной точки LUIS может выполнять запросы к приложению до тех пор, пока он не израсходует всю квоту конечной точки.

Пользователь, который не является владельцем или участником, может получить доступ к времени выполнения общедоступного приложения только в том случае, если ему будет дан идентификатор приложения. У LUIS нет общедоступного _магазина_ или других вариантов поиска общедоступных приложений.  

Общедоступное приложение публикуется во всех регионах, чтобы пользователь с ключом ресурса LUIS для определенного региона смог получить доступ к приложению в том регионе, который связан с ключом ресурса.

## <a name="transfer-of-ownership"></a>Передача права владения

LUIS не имеет концепции передачи права собственности на ресурс. 

## <a name="securing-the-endpoint"></a>Защита конечной точки 

Вы можете контролировать, кто может видеть ваш ключ точки запуска графика выполнения LUIS, вызывая его в среде от сервера к серверу. Если вы используете LUIS из бота, соединение между ботом и LUIS уже защищено. При вызове конечной точки LUIS напрямую следует создать серверный API (такой как [функция](https://azure.microsoft.com/services/functions/) Azure) с контролируемым доступом (таким как [AAD](https://azure.microsoft.com/services/active-directory/)). После вызова серверного API и прохождения авторизации и проверки подлинности нужно передать вызов в LUIS. Хотя эта стратегия не предотвращает распространение атак с перехватом, она маскирует конечную точку от пользователей, позволяет отслеживать доступ и добавлять функцию ведения журнала ответов конечной точки (такую как [Application Insights](https://azure.microsoft.com/services/application-insights/)).  

## <a name="next-steps"></a>Дальнейшие действия

* Поймите принципы [управления версиями](luis-concept-version.md). 
* [Узнайте, как создавать ключи](luis-how-to-azure-subscription.md).
