---
title: Руководство. Шаблоны — LUIS
titleSuffix: Azure Cognitive Services
description: В этом учебнике вы примените шаблоны для улучшения прогнозирования намерений и сущностей, одновременно сокращая число примеров речевых фрагментов. Шаблон предоставляется в виде примера речевого фрагмента, который содержит синтаксис для идентификации сущностей и игнорируемый текст.
services: cognitive-services
author: diberry
ms.custom: seodec18
manager: nitinme
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: tutorial
ms.date: 12/17/2019
ms.author: diberry
ms.openlocfilehash: d52b2485436f0a9075dcc3f505806e46094340a3
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/25/2019
ms.locfileid: "75381704"
---
# <a name="tutorial-add-common-pattern-template-utterance-formats-to-improve-predictions"></a>Руководство. Добавление шаблонов высказываний в стандартных форматах для улучшения прогнозирования

В этом учебнике вы примените шаблоны для улучшения прогнозирования намерений и сущностей, что позволяет снизить число примеров речевых фрагментов. Шаблон представляет собой речевой фрагмент, сопоставленный с намерением, который содержит синтаксис для идентификации сущностей и игнорируемый текст.

**В этом руководстве рассмотрено, как выполнять следующие задачи.**

> [!div class="checklist"]
> * Создавать шаблон.
> * Проверять улучшения прогнозирования для шаблона.
> * Отмечать текст как тот, который нужно игнорировать и вкладывать в шаблон.
> * Использовать панель тестирования для проверки успешности шаблона.

[!INCLUDE [LUIS Free account](../../../includes/cognitive-services-luis-free-key-short.md)]

## <a name="utterances-in-intent-and-pattern"></a>Речевые фрагменты в намерении и шаблоне

В приложении LUIS сохраняются два типа речевых фрагментов.

* Примеры речевых фрагментов в намерении.
* Шаблоны речевых фрагментов в шаблоне.

Добавление шаблона речевого фрагмента в качестве шаблона позволяет предоставлять для намерения меньше примеров речевых фрагментов.

Шаблон применяется как сочетание сопоставления выражений и машинного обучения.  Шаблон речевого фрагмента вместе с примерами речевых фрагментов дает LUIS лучшее представление о том, какие речевые фрагменты соответствуют определенному намерению.

## <a name="import-example-app-and-clone-to-new-version"></a>Импорт примера приложения и клонирование в новую версию

Выполните указанные ниже действия.

1.  Скачайте и сохраните [JSON-файл приложения](https://github.com/Azure-Samples/cognitive-services-language-understanding/blob/master/documentation-samples/tutorials/custom-domain-batchtest-HumanResources.json?raw=true).

1. Импортируйте JSON-файл в новое приложение на [портале LUIS предварительной версии](https://preview.luis.ai).

1. Из раздела **Управление** на вкладке **Версии** скопируйте версию и назовите ее `patterns`. Клонирование — это отличный способ поэкспериментировать с различными функциями LUIS без влияния на исходную версию. Так как имя версии используется в маршруте URL-адреса, оно не может содержать символы, которые недопустимы в URL-адресе.

## <a name="create-new-intents-and-their-utterances"></a>Создание новых намерений и их высказываний

1. Выберите **Build** (Сборка) в меню навигации.

1. На странице **намерений** выберите **Создать**, чтобы создать новое намерение.

1. Введите `OrgChart-Manager` во всплывающем диалоговом окне и нажмите кнопку **Done** (Готово).

    ![Создание нового сообщения всплывающего окна](media/luis-tutorial-pattern/hr-create-new-intent-popup.png)

1. Добавьте примеры фраз в намерение. Эти речевые фрагменты не _полностью_ совпадают, но имеют общий формат, для которого можно извлечь шаблон.

    |Примеры высказываний|
    |--|
    |`Who is John W. Smith the subordinate of?`|
    |`Who does John W. Smith report to?`|
    |`Who is John W. Smith's manager?`|
    |`Who does Jill Jones directly report to?`|
    |`Who is Jill Jones supervisor?`|

    Не беспокойтесь, если объект keyPhrase помечен в высказываниях намерения, а не сущности Employee. Оба они правильно прогнозированы в тестовой панели и в конечной точке.

1. В левой области навигации выберите **Intents** (Намерения).

1. Щелкните **+ Создать**, чтобы добавить новое намерение. Введите `OrgChart-Reports` во всплывающем диалоговом окне и нажмите кнопку **Done** (Готово).

1. Добавьте примеры фраз в намерение.

    |Примеры высказываний|
    |--|
    |`Who are John W. Smith's subordinates?`|
    |`Who reports to John W. Smith?`|
    |`Who does John W. Smith manage?`|
    |`Who are Jill Jones direct reports?`|
    |`Who does Jill Jones supervise?`|

### <a name="caution-about-example-utterance-quantity"></a>Предупреждение о примере количества высказываний

[!INCLUDE [Too few examples](../../../includes/cognitive-services-luis-too-few-example-utterances.md)]

### <a name="train-the-app-before-testing-or-publishing"></a>Обучение приложения перед тестированием и публикацией

[!INCLUDE [LUIS How to Train steps](includes/howto-train.md)]

### <a name="publish-the-app-to-query-from-the-endpoint"></a>Публикация приложения для получения запроса из конечной точки

[!INCLUDE [LUIS How to Publish steps](includes/howto-publish.md)]

### <a name="get-intent-and-entities-from-endpoint"></a>Получение намерения и сущностей из конечной точки

1. [!INCLUDE [LUIS How to get endpoint first step](includes/howto-get-endpoint.md)]

1. Перейдите в конец URL-адреса и введите `Who is the boss of Jill Jones?`. Последний параметр `query` в строке запроса содержит речевой фрагмент.

    ```json
    {
        "query": "Who is the boss of Jill Jones?",
        "prediction": {
            "topIntent": "OrgChart-Manager",
            "intents": {
                "OrgChart-Manager": {
                    "score": 0.313054234
                },
                "OrgChart-Reports": {
                    "score": 0.2462688
                },
                "EmployeeFeedback": {
                    "score": 0.0488328524
                },
                "GetJobInformation": {
                    "score": 0.0156933
                },
                "MoveEmployee": {
                    "score": 0.011265873
                },
                "Utilities.StartOver": {
                    "score": 0.003065792
                },
                "Utilities.Stop": {
                    "score": 0.00300148362
                },
                "Utilities.Cancel": {
                    "score": 0.00271081156
                },
                "None": {
                    "score": 0.00212835032
                },
                "ApplyForJob": {
                    "score": 0.0020669254
                },
                "Utilities.Confirm": {
                    "score": 0.00200891262
                },
                "FindForm": {
                    "score": 0.00194145238
                },
                "Utilities.Help": {
                    "score": 0.00182301877
                }
            },
            "entities": {
                "keyPhrase": [
                    "boss of Jill Jones"
                ],
                "Employee": [
                    [
                        "Employee-45612"
                    ]
                ],
                "$instance": {
                    "keyPhrase": [
                        {
                            "type": "builtin.keyPhrase",
                            "text": "boss of Jill Jones",
                            "startIndex": 11,
                            "length": 18,
                            "modelTypeId": 2,
                            "modelType": "Prebuilt Entity Extractor",
                            "recognitionSources": [
                                "model"
                            ]
                        }
                    ],
                    "Employee": [
                        {
                            "type": "Employee",
                            "text": "Jill Jones",
                            "startIndex": 19,
                            "length": 10,
                            "modelTypeId": 5,
                            "modelType": "List Entity Extractor",
                            "recognitionSources": [
                                "model"
                            ]
                        }
                    ]
                }
            }
        }
    }
    ```

Был ли этот запрос успешным? В этом цикле обучения запрос выполнен успешно. Результаты двух лучших намерений близки, но лучшее из них имеет не очень высокую оценку (чуть выше 60 %) и не сильно опережает следующее по вероятности намерение.

Так как обучение LUIS не является каждый раз одинаковым, есть много вариантов, где эти две оценки могут инвертироваться на следующем тренировочном цикле. В результате может быть возвращено неправильное намерение.

Используйте шаблоны, чтобы сделать правильную оценку намерения значительно выше в процентах и выше от следующей самой высокой оценки.

Не закрывайте это второе окно браузера. Вы продолжите работу с ним далее в руководстве.

## <a name="template-utterances"></a>Высказывания шаблона
Из-за особенностей предметной области управления персоналом существует несколько общих способов для отправки запросов о связях сотрудников в организациях. Пример:

|Высказывания|
|--|
|`Who does Jill Jones report to?`|
|`Who reports to Jill Jones?`|

Эти высказывания слишком близки для определения контекстной уникальности каждого из них без использования большого числа примеров высказываний. Благодаря добавлению шаблона для намерения LUIS изучает шаблоны общих высказываний для намерения без использования слишком большого числа примеров высказываний.

К примерам шаблонов высказываний для этого намерения относятся:

|Примеры высказываний шаблона|Синтаксическое значение|
|--|--|
|`Who does {Employee} report to[?]`|взаимозаменяемо `{Employee}`<br>игнорировать `[?]`|
|`Who reports to {Employee}[?]`|взаимозаменяемо `{Employee}`<br>игнорировать `[?]`|

Синтаксис `{Employee}` отмечает расположение сущности в высказывании шаблона, а также указывает, какая это сущность. Необязательный синтаксис `[?]` отмечает слова или знаки препинания, которые являются необязательными. LUIS сопоставляет высказывание, игнорируя необязательный текст внутри скобок.

Хотя этот синтаксис похож на регулярное выражение, он им не является. Поддерживается синтаксис только фигурной (`{}`) и квадратной (`[]`) скобок. Их можно вложить до двух уровней.

Чтобы шаблон соответствовал высказываниям, сущности в высказываниях должны сначала совпадать с сущностями высказывания шаблона. Это означает, что вам нужно достаточное количество примеров сущностей в примерах речевых фрагментов с высокой степенью точности прогнозирования, прежде чем шаблоны с сущностями удастся успешно применить. Тем не менее шаблон не помогает прогнозировать сущности, а только намерения.

**Хотя шаблоны и помогают указать меньше примеров фраз, но если сущности не обнаруживаются, шаблоны не совпадают.**

### <a name="add-the-patterns-for-the-orgchart-manager-intent"></a>Добавление шаблонов для намерений OrgChart-Manager

1. Выберите функцию **Сборка** в верхнем меню.

1. В левой области навигации в разделе **Повышение производительности приложения** выберите **Шаблоны** в панели навигации слева.

1. Выберите намерение **OrgChart-Manager**, а затем введите следующие высказывания шаблона.

    |Высказывания шаблона|
    |:--|
    |`Who is {Employee} the subordinate of[?]`|
    |`Who does {Employee} report to[?]`|
    |`Who is {Employee}['s] manager[?]`|
    |`Who does {Employee} directly report to[?]`|
    |`Who is {Employee}['s] supervisor[?]`|
    |`Who is the boss of {Employee}[?]`|

1. Оставаясь на странице "Шаблоны", выберите намерение **OrgChart-Reports**, а затем введите следующие фразы шаблона.

    |Высказывания шаблона|
    |:--|
    |`Who are {Employee}['s] subordinates[?]`|
    |`Who reports to {Employee}[?]`|
    |`Who does {Employee} manage[?]`|
    |`Who are {Employee} direct reports[?]`|
    |`Who does {Employee} supervise[?]`|
    |`Who does {Employee} boss[?]`|

### <a name="query-endpoint-when-patterns-are-used"></a>Запрос конечной точки при использовании шаблонов

Теперь, когда шаблоны добавлены в приложение, можно обучать, публиковать и запрашивать приложения в конечной точке среды выполнения прогноза.

1. Щелкните **Обучить**. Когда обучение завершится, щелкните **Опубликовать** и выберите **Рабочий слот**, а затем щелкните **Готово**.

1. Когда публикация завершится, вернитесь на вкладку браузера с URL-адресом конечной точки.

1. Перейдите в конец URL-адреса и введите `Who is the boss of Jill Jones?` в качестве высказывания. Последний параметр в строке запроса содержит `query`.

    ```json
    {
        "query": "Who is the boss of Jill Jones?",
        "prediction": {
            "topIntent": "OrgChart-Manager",
            "intents": {
                "OrgChart-Manager": {
                    "score": 0.999997854
                },
                "OrgChart-Reports": {
                    "score": 6.13748343E-05
                },
                "EmployeeFeedback": {
                    "score": 8.052567E-06
                },
                "GetJobInformation": {
                    "score": 1.18197136E-06
                },
                "MoveEmployee": {
                    "score": 7.65549657E-07
                },
                "None": {
                    "score": 3.975E-09
                },
                "Utilities.StartOver": {
                    "score": 1.53E-09
                },
                "Utilities.Confirm": {
                    "score": 1.38181822E-09
                },
                "Utilities.Help": {
                    "score": 1.38181822E-09
                },
                "Utilities.Stop": {
                    "score": 1.38181822E-09
                },
                "Utilities.Cancel": {
                    "score": 1.25833333E-09
                },
                "FindForm": {
                    "score": 1.15384613E-09
                },
                "ApplyForJob": {
                    "score": 5.26923061E-10
                }
            },
            "entities": {
                "keyPhrase": [
                    "boss of Jill Jones"
                ],
                "Employee": [
                    [
                        "Employee-45612"
                    ]
                ],
                "$instance": {
                    "keyPhrase": [
                        {
                            "type": "builtin.keyPhrase",
                            "text": "boss of Jill Jones",
                            "startIndex": 11,
                            "length": 18,
                            "modelTypeId": 2,
                            "modelType": "Prebuilt Entity Extractor",
                            "recognitionSources": [
                                "model"
                            ]
                        }
                    ],
                    "Employee": [
                        {
                            "type": "Employee",
                            "text": "Jill Jones",
                            "startIndex": 19,
                            "length": 10,
                            "modelTypeId": 5,
                            "modelType": "List Entity Extractor",
                            "recognitionSources": [
                                "model"
                            ]
                        }
                    ]
                }
            }
        }
    }
    ```

Прогнозирование намерений теперь выполняется значительно более уверенно, а оценка второго по вероятности намерения стала значительно ниже. Теперь эти два намерения не будут меняться местами при обучении.

### <a name="working-with-optional-text-and-prebuilt-entities"></a>Работа с предварительно созданными сущностями и необязательным текстом

В предыдущих высказываниях шаблона в этом руководстве содержалось несколько примеров с необязательным текстом, например использование буквы s в притяжательном падеже (`'s`) и вопросительного знака (`?`). Предположим, что необходимо разрешить текущие и будущие даты в тексте фразы.

Примеры высказываний:

|Блокировка с намерением|Примеры высказываний с предварительно созданными сущностями и необязательным текстом|
|:--|:--|
|OrgChart-Manager|`Who was Jill Jones manager on March 3?`|
|OrgChart-Manager|`Who is Jill Jones manager now?`|
|OrgChart-Manager|`Who will be Jill Jones manager in a month?`|
|OrgChart-Manager|`Who will be Jill Jones manager on March 3?`|

В каждом из этих примеров используется глагол (`was`, `is`, `will be`), а также дата (`March 3`, `now` и `in a month`), которые служба LUIS должна правильно спрогнозировать. Обратите внимание, что в последних двух примерах в таблице используется практически тот же текст. Отличаются в нем только предлоги (`in` и `on`).

Пример шаблона фразы, в котором можно использовать дополнительные сведения.

|Блокировка с намерением|Примеры высказываний с предварительно созданными сущностями и необязательным текстом|
|:--|:--|
|OrgChart-Manager|`who was {Employee}['s] manager [[on]{datetimeV2}?`]|
|OrgChart-Manager|`who is {Employee}['s] manager [[on]{datetimeV2}?]`|


За счет использования синтаксиса с квадратными скобками (`[]`) этот необязательный текст легко добавить в высказывание шаблона и вложить вплоть до второго уровня (`[[]]`). Кроме того, вы можете добавить сущности или текст.


**Вопрос. Почему все первые буквы `w` каждого высказывания в шаблоне написаны в нижнем регистре? Разве регистр не следует выбирать случайным образом?** Регистр высказывания, отправленного клиентским приложением на конечную точку запроса, преобразовывается в нижний. Высказывание шаблона может иметь верхний или нижний регистр. То же самое относится к высказыванием конечной точки. Сравнение всегда выполняется после преобразования в нижний регистр.

**Вопрос. Почему предварительно созданная числовая часть шаблона высказывания March 3 не прогнозируется как число `3` и дата `March 3`?** В зависимости от контекста высказывание шаблона прогнозирует дату буквально (`March 3`) или абстрагировано (`in a month`). Дата может содержать число, но число не обязательно рассматривается как дата. Всегда используйте сущность, которая лучше всего представляет тип, который вы хотите вернуть в результатах прогнозирования JSON.

**Вопрос. Как насчет плохо сформулированных высказываний, например `Who will {Employee}['s] manager be on March 3?`?** Грамматически разные временные глаголы, например глаголы с разделенными частями `will` и `be`, должны быть добавлены как новое высказывание шаблона. Имеющееся высказывание шаблона не сопоставит эти глаголы. Хотя намерение не изменилось, изменилась расстановка слов в высказывании. Это изменение влияет на прогноз в LUIS. Вы можете [группировать и (или)](#use-the-or-operator-and-groups) глаголы разных времен, чтобы объединять эти фразы.

**Помните: сначала находятся сущности, а затем сравнивается шаблон.**

### <a name="edit-the-existing-pattern-template-utterance"></a>Изменение имеющегося высказывания шаблона

1. На портале LUIS предварительной версии выберите **Build** (Компиляция) в верхнем меню, а затем щелкните **Patterns** (Шаблоны) в меню слева.

1. Найдите существующий шаблон фразы (`Who is {Employee}['s] manager[?]`) и нажмите кнопку с многоточием (***...***) справа, затем во всплывающем меню выберите **Изменить**.

1. Измените высказывание шаблона следующим образом: `who is {Employee}['s] manager [[on]{datetimeV2}?]`

### <a name="add-new-pattern-template-utterances"></a>Добавление новых высказываний шаблона

1. В разделе **Patterns** (Шаблоны) окна **Build** (Создание) добавьте несколько новых высказываний шаблона. В раскрывающемся меню намерений выберите **OrgChart-Manager** и введите каждое из этих высказываний шаблона:

    |Блокировка с намерением|Примеры высказываний с предварительно созданными сущностями и необязательным текстом|
    |--|--|
    |OrgChart-Manager|`who was {Employee}['s] manager [[on]{datetimeV2}?]`|
    |OrgChart-Manager|`who will be {Employee}['s] manager [[in]{datetimeV2}?]`|
    |OrgChart-Manager|`who will be {Employee}['s] manager [[on]{datetimeV2}?]`|

2. Выберите **Обучение** на панели навигации, чтобы обучить приложение.

3. Когда обучение завершится, щелкните **Test** (Тестировать) в верхней части панели, чтобы открыть панель тестирования.

4. Введите несколько тестовых высказываний, чтобы проверить сопоставление шаблона и достаточно ли высока оценка намерения.

    Когда введете первое высказывание, выберите **Inspect** (Проверить), чтобы просмотреть все результаты прогнозирования. Каждая фраза должна иметь намерение **OrgChart Manager** и должна извлечь значения для объектов сотрудника и datetimeV2.

    |Фраза|
    |--|
    |`Who will be Jill Jones manager`|
    |`who will be jill jones's manager`|
    |`Who will be Jill Jones's manager?`|
    |`who will be Jill jones manager on March 3`|
    |`Who will be Jill Jones manager next Month`|
    |`Who will be Jill Jones manager in a month?`|

Для всех этих высказываний найдены сущности, поэтому они соответствуют тому же шаблону и имеют высокую оценку прогнозирования. Вы добавили несколько шаблонов, которые соответствуют нескольким вариациям речевых фрагментов. Вам не обязательно добавлять в намерение примеры речевых фрагментов, чтобы в шаблоне работал шаблон речевого фрагмента.

Использование шаблонов дает следующие преимущества:
* более высокие оценки прогнозирования;
* с тем же количеством примеров речевых фрагментов в намерении;
* за счет всего нескольких хорошо сформированных шаблонов речевых фрагментов.

### <a name="use-the-or-operator-and-groups"></a>Использование оператора OR и групп

Некоторые фразы из предыдущего шаблона очень похожи. Используйте синтаксис **групп**`()` и **OR**`|` для уменьшения числа шаблонов речевых фрагментов.

Следующие 2 шаблона можно объединить в один с помощью синтаксиса группы `()` и OR `|`.

|Блокировка с намерением|Примеры высказываний с предварительно созданными сущностями и необязательным текстом|
|--|--|
|OrgChart-Manager|`who will be {Employee}['s] manager [[in]{datetimeV2}?]`|
|OrgChart-Manager|`who will be {Employee}['s] manager [[on]{datetimeV2}?]`|

Новый шаблон фразы будет выглядеть следующим образом.

`who ( was | is | will be ) {Employee}['s] manager [([in]|[on]){datetimeV2}?]`.

В нем используется **группа** вокруг необходимого времени глагола и возможный союз `in` и `on` с каналом **OR** между ними.

1. На странице **Шаблоны** выберите фильтр **OrgChart-Manager**. Сократите список, выполнив поиск `manager`.

1. Сохраните одну версию шаблонной фразы (для внесения изменений на следующем шаге) и удалите другие варианты.

1. Измените шаблонную фразу следующим образом.

    `who ( was | is | will be ) {Employee}['s] manager [([in]|[on]){datetimeV2}?]`

2. Выберите **Обучение** на панели навигации, чтобы обучить приложение.

3. Когда обучение завершится, щелкните **Test** (Тестировать) в верхней части панели, чтобы открыть панель тестирования.

    Используйте панель "Проверить" для проверки версий фразы.

    |Фразы для ввода в панель "Проверить"|
    |--|
    |`Who is Jill Jones manager this month`|
    |`Who is Jill Jones manager on July 5th`|
    |`Who was Jill Jones manager last month`|
    |`Who was Jill Jones manager on July 5th`|
    |`Who will be Jill Jones manager in a month`|
    |`Who will be Jill Jones manager on July 5th`|

Более широко используя синтаксис шаблона, вы сможете сократить количество шаблонов речевых фрагментов, используемых в приложении, сохраняя высокую оценку прогнозирования.

### <a name="use-the-utterance-beginning-and-ending-anchors"></a>Использование привязок в начале и в конце фразы

Синтаксис шаблона поддерживает синтаксис привязок в начале и в конце фразы с помощью символа `^`. Привязки в начале и в конце фразы могут использоваться совместно для определения очень специфических и, возможно, буквальных фраз или отдельно для определения намерений.

## <a name="using-patternany-entity"></a>Использование сущности Pattern.any

Сущность Pattern.any позволяет найти данные произвольной формы, в которых формулировка сущности затрудняет определение ее окончание из остальной части высказывания.

Приложение управления персоналом помогает сотрудникам находить формы организаций.

|Фраза|
|--|
|Где находится **HRF-123456**?|
|Кто написал **HRF-123234**?|
|Было ли **HRF-456098** опубликовано на французском языке?|

Тем не менее в каждой из форм присутствует как форматированное имя, используемое в предыдущей таблице, так и такое понятное имя, как `Request relocation from employee new to the company 2018 version 5`.

Фразы с понятным названием формы выглядят следующим образом.

|Фраза|
|--|
|Где находится **Request relocation from employee new to the company 2018 version 5**?|
|Кто написал **Request relocation from employee new to the company 2018 version 5**?|
|Был ли **Request relocation from employee new to the company 2018 version 5** опубликован во Франции?|

Заголовки переменной длины включают машинные слова, из-за которых LUIS может неправильно определить окончание сущности. С помощью шаблонной сущности Pattern.any можно указать начало и конец названия формы, что позволит LUIS правильно извлекать ее имя.

|Пример шаблона высказывания|
|--|
|Где находится {FormName} [?]|
|Кто создатель {FormName} [?]|
|Было ли {FormName} опубликовано на французском языке[?]|

### <a name="add-example-utterances-with-patternany"></a>Добавление примеров высказываний с помощью Pattern.any

1. В верхней панели навигации выберите **Сборка**, а затем выберите **Intents** (Намерения) из левой панели навигации.

1. Из списка намерений выберите **FindForm**.

1. Добавьте некоторые примеры фраз.

    |Пример фразы|Имя формы|
    |--|--|
    |Где находится форма **What to do when a fire breaks out in the Lab** и кто должен подписать ее после прочтения?|What to do when a fire breaks out in the Lab
    |Где находится **Request relocation from employee new to the company** на сервере?|Request relocation from employee new to the company|
    |Кто создал **Health and wellness requests on the main campus** и какая ее текущая версия?|Health and wellness requests on the main campus|
    |Я ищу форму с именем **Office move request including physical assets**. |Office move request including physical assets|

    Если не используется сущность Pattern.any, LUIS будет трудно понять, где заканчивается название формы. Так происходит из-за множества вариантов имени формы.

### <a name="create-a-patternany-entity"></a>Создание сущности Pattern.any
Сущность Pattern.any извлекает сущности переменной длины. Эта сущность работает только в шаблоне, так как в шаблоне начало и окончание сущности отмечены специальным синтаксисом.

1. Выберите **Сущности** в меню навигации слева.

1. Щелкните **+ Создать**, введите имя `FormName` и выберите тип **Pattern.any**. Нажмите кнопку **Создать**.

### <a name="add-a-pattern-that-uses-the-patternany"></a>Добавление шаблона, который использует сущность Pattern.any

1. Выберите **Шаблоны** в меню навигации слева.

1. Выберите намерение **FindForm**.

1. Введите следующие высказывания шаблона, использующие новую сущность.

    |Высказывания шаблона|
    |--|
    |`Where is the form ["]{FormName}["] and who needs to sign it after I read it[?]`|
    |`Where is ["]{FormName}["] on the server[?]`|
    |`Who authored ["]{FormName}["] and what is the most current version[?]`|
    |`I'm looking for the form named ["]{FormName}["][.]`|

1. Обучите приложение.

### <a name="test-the-new-pattern-for-free-form-data-extraction"></a>Проверка извлечения произвольных данных для нового шаблона
1. Выберите **Тестирование** на верхней панели навигации, чтобы открыть панель тестирования.

1. Введите следующую фразу.

    `Where is the form Understand your responsibilities as a member of the community and who needs to sign it after I read it?`

1. Выберите **Просмотр** под результатом для просмотра результатов теста для сущности и намерения.

    Сначала обнаруживается сущность `FormName`, затем шаблон, определяющий намерение. Если в результате вашего теста не удалось обнаружить сущности и, следовательно, определить шаблон, необходимо добавить дополнительные примеры высказываний в намерение (не в шаблон).

1. Закройте панель "Тестирование", нажав кнопку **Тестирование** на верхней панели навигации.

### <a name="using-an-explicit-list"></a>Использование явного списка

Если ваш шаблон, который включает сущность Pattern.any, извлекает сущности неправильно, используйте [явный список](reference-pattern-syntax.md#explicit-lists), чтобы решить эту проблему.

## <a name="what-did-this-tutorial-accomplish"></a>Какие результаты достигнуты в этом учебнике?

В этом учебнике мы добавили шаблоны, которые помогают LUIS прогнозировать намерение с гораздо более высокой оценкой без увеличения количества примеров речевых фрагментов. Маркировка сущностей и текст, который нужно игнорировать, позволяют LUIS применять шаблон к более широкому кругу высказываний.

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [LUIS How to clean up resources](../../../includes/cognitive-services-luis-tutorial-how-to-clean-up-resources.md)]

## <a name="next-steps"></a>Дальнейшие действия


> [!div class="nextstepaction"]
> [Tutorial: Improve app with pattern roles](luis-tutorial-pattern-roles.md) (Руководство. Улучшение приложения с помощью ролей шаблонов)
