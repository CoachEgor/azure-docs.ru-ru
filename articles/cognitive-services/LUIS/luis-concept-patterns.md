---
title: Шаблоны, помогающие в прогнозировании
titleSuffix: Language Understanding - Azure Cognitive Services
description: Шаблон обеспечивает более высокую точность при определении намерения без необходимости предоставлять большое число дополнительных фраз.
services: cognitive-services
author: diberry
manager: nitinme
ms.custom: seodec18
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: conceptual
ms.date: 04/01/2019
ms.author: diberry
ms.openlocfilehash: 2a160ab7447304dc6eb14f76a723df4e8a4d9f46
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60813564"
---
# <a name="patterns-improve-prediction-accuracy"></a>Шаблоны повышают точность прогнозирования
Шаблоны предназначены для повышения точности, когда несколько фраз очень похожи.  Шаблон обеспечивает более высокую точность при определении намерения без необходимости предоставлять большое число дополнительных фраз. 

## <a name="patterns-solve-low-intent-confidence"></a>Шаблоны устраняют низкую точность намерения
Рассмотрите приложение Human Resources, в котором сообщается об организационной структуре в отношении сотрудника. LUIS возвращает задействованных сотрудников на основе имени и связей сотрудника. Рассмотрим корпоративные связи сотрудника по имени Том. У него есть руководитель по имени Алиса и группа подчиненных с именами Майкл, Ребекка и Карл.

![Изображение схемы организации](./media/luis-concept-patterns/org-chart.png)

|Высказывания|Прогнозирование намерения|Показатель намерения|
|--|--|--|
|Кто подчиненный Тома?|GetOrgChart|.30|
|Кто подчиненный Тома?|GetOrgChart|.30|

Если приложение имеет от 10 до 20 фраз с разной длиной предложения, другим порядком слов и даже разными словами (синонимы "подчиненные", "управлять", "отчет"), LUIS может вернуть низкий показатель точности. Создайте шаблон, чтобы помочь понять важность порядка слов LUIS. 

Шаблоны помогают в таких ситуациях: 

* Блокировка намерения целевой функцией является низкой
* Правильное назначение не верхнем оценки, но слишком близко к верхней оценка. 

## <a name="patterns-are-not-a-guarantee-of-intent"></a>Шаблоны не гарантируют прогнозирование намерения
Шаблоны используют различные технологии прогнозирования. Настройка намерения для примера фразы в шаблоне не является гарантией прогноза намерения, но является сильным сигналом. 

<a name="patterns-do-not-improve-entity-detection"/></a>

## <a name="patterns-do-not-improve-machine-learned-entity-detection"></a>Шаблоны не улучшают обнаружение сущностей результаты обучения компьютера

Шаблон, в первую очередь предназначена помочь прогнозирование намерения и ролей. Pattern.any сущности используется для извлечения сущностей в свободной форме. Хотя шаблоны использование сущностей, шаблон не помогает определить сущности, результаты обучения компьютера.  

Если свернуть несколько фраз в один шаблон, точность прогноза для сущности не повысится. Чтобы срабатывали простые сущности, нужно добавлять фразы или использовать сущности списка. Иначе шаблон не будет работать.

## <a name="patterns-use-entity-roles"></a>Шаблоны используют роли сущностей
Если две или более сущностей в шаблоне связаны контекстом, шаблоны используют [роли](luis-concept-roles.md) сущностей для извлечения контекстно-зависимой информации о сущностях.  

## <a name="prediction-scores-with-and-without-patterns"></a>Прогнозирование оценок с шаблонами и без них
При достаточном количестве примеров фраз LUIS может повысить точность прогнозирования без шаблонов. Шаблоны увеличивают показатель точности, не требуя предоставления большого количества фраз.  

## <a name="pattern-matching"></a>Сопоставление шаблонов
Шаблон сопоставляется на основе обнаружения сущностей в шаблоне, а затем проверки остальной части слов и порядка слов шаблона. Для сопоставления шаблона требуются сущности. Шаблон применяется на уровне маркеров, а не на уровне символов. 

## <a name="pattern-syntax"></a>Синтаксис шаблона
Синтаксис шаблона — это шаблон фразы. Шаблон должен содержать слова и сущности, к которым нужно найти совпадения, а также слова и знаки препинания, которые следует игнорировать. **Это не регулярное выражение.** 

Сущности в шаблонах заключены в фигурные скобки (`{}`). Шаблоны могут включать сущности и сущности с ролями. [Pattern.Any](luis-concept-entity-types.md#patternany-entity) — это сущность, используется только в шаблонах. 

Синтаксис шаблона поддерживает следующий синтаксис:

|Функция|Синтаксис|Уровень вложенности|Пример|
|--|--|--|--|
|сущность| {} -фигурные скобки|2|Где находится в форме {имя сущности}?|
|необязательный|[] - квадратные скобки<BR><BR>Не более 3 на уровни вложенности любые необязательные и группировки |2|Вопросительный знак является необязательным [?]|
|группирование|() - скобки|2|— ( \| b).|
|или| \| -Вертикальная черта (вертикальная черта)<br><br>Не более 2 на вертикальными чертами (или) в одной группе |-|Где — форма ({формы short} &#x7c; {формы имя длиной} &#x7c; {формы number})| 
|Начало и конец utterance|^-курсора|-|^ начать utterance<br>выполняется utterance ^<br>^ strict буквальное сопоставление из всей utterance с сущностью {number} ^|

## <a name="nesting-syntax-in-patterns"></a>Вложенность синтаксиса в шаблонах

**Необязательно** синтаксис, с помощью квадратных скобок может быть двух уровней вложенности. Например, `[[this]is] a new form`. В этом примере позволяет следующие фразы: 

|Пример вложенных необязательно utterance|Объяснение|
|--|--|
|Это новая форма|сопоставляет все слова в шаблоне|
|Новая форма|совпадения внешнего необязательно word и обязательным слова в шаблоне|
|Новая форма|только необходимые совпадений слов|

**Группирования** синтаксис со скобками, может быть двух уровней вложенности. Например, `(({Entity1.RoleName1} | {Entity1.RoleName2} ) | {Entity2} )`. Эта функция позволяет любой из трех сущностей для сопоставления. 

Если Entity1 находится в расположении с помощью ролей, таких как назначения (Каир) и (Сиэтл) и 2 сущности — это имя известных стандартных из списка сущностей (RedWest-C), следующие фразы будут сопоставлены с этого шаблона:

|Пример utterance вложенные группировки|Объяснение|
|--|--|
|RedWest-C|соответствует внешняя группа сущности|
|Сиэтл;|соответствует одной из сущностей внутренняя группа|
|Каир|соответствует одной из сущностей внутренняя группа|

## <a name="nesting-limits-for-groups-with-optional-syntax"></a>Вложенность ограничения для групп с дополнительный синтаксис

Сочетание **группирования** с **необязательно** синтаксис имеет ограничение в 3 уровня вложенности.

|Разрешено|Пример|
|--|--|
|Да|([(test1 &#x7c; test2)] &#x7c; test3)|
|Нет|([([test1] &#x7c; test2)] &#x7c; test3)|

## <a name="nesting-limits-for-groups-with-or-ing-syntax"></a>Вложенность ограничения для групп с синтаксисом и использованием

Сочетание **группирования** с **или использованием** синтаксис имеет ограничение в 2 вертикальные линии.

|Разрешено|Пример|
|--|--|
|Да|(test1 &#x7c; test2 &#x7c; (test3 &#x7c; test4))|
|Нет|(test1 &#x7c; test2 &#x7c; test3 &#x7c; (test4 &#x7c; test5)) |

## <a name="syntax-to-add-an-entity-to-a-pattern-template"></a>Синтаксис, предназначенный для добавления сущности в шаблон
Чтобы добавить сущность в шаблон, заключите имя сущности в фигурные скобки, например `Who does {Employee} manage?`. 

|Шаблон с сущностью|
|--|
|`Who does {Employee} manage?`|

## <a name="syntax-to-add-an-entity-and-role-to-a-pattern-template"></a>Синтаксис, предназначенный для добавления сущности и роли в шаблон
Роль сущности обозначается как `{entity:role}`: имя сущности, за которым следует двоеточие, а затем имя роли. Чтобы добавить сущность с ролью в шаблон, заключите имя сущности и имя роли в фигурные скобки, например `Book a ticket from {Location:Origin} to {Location:Destination}`. 

|Шаблон с ролями сущности|
|--|
|`Book a ticket from {Location:Origin} to {Location:Destination}`|

## <a name="syntax-to-add-a-patternany-to-pattern-template"></a>Синтаксис, предназначенный для добавления сущности Pattern.any в шаблон
Сущность Pattern.any позволяет добавлять сущность переменной длины в шаблон. Если формат шаблона соблюдается, Pattern.any может быть любой длины. 

Чтобы добавить сущность **Pattern.any** в шаблон, заключите сущность Pattern.any в фигурные скобки, например `How much does {Booktitle} cost and what format is it available in?`.  

|Шаблон с сущностью Pattern.any|
|--|
|`How much does {Booktitle} cost and what format is it available in?`|

|Наименования книг в шаблоне|
|--|
|Сколько **стоит эта книга** и в каком формате она доступна?|
|Сколько стоит **запрос** и в каком формате она доступна?|
|Сколько стоит **Загадочное ночное убийство собаки** и в каком формате она доступна?| 

Слова название книги не не всегда понятны LUIS потому, что LUIS знает, где заканчивается название книги, основанный на сущности Pattern.any.

## <a name="explicit-lists"></a>Явные списки

Создание [явный список](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5ade550bd5b81c209ce2e5a8) по созданию и настройке API, чтобы разрешить исключение при:

* Ваш шаблон содержит [Pattern.any](luis-concept-entity-types.md#patternany-entity)
* И что синтаксис шаблона обеспечивает возможность извлечения неверные сущности на utterance основе. 

Предположим, имеется шаблон, содержащий и дополнительный синтаксис `[]` и синтаксис сущности `{}`, которые объединены так, что данные будут извлекаться некорректно.

Рассмотрим шаблон "[найти] сообщение о {тема} [от {человек}]".

В следующей фразе сущности **тема** и **человек** извлекаются правильно и неправильно:

|Фраза|Сущность|Правильное извлечение|
|--|--|:--:|
|сообщение о собаках от Глеба|тема=собаки<br>человек=Глеб|✔|
|сообщение о мужчине из Ла-Манча|тема=мужчина<br>человек=Ла-Манч|X|

В приведенной выше таблице субъект должен быть `the man from La Mancha` (название книги), но так как субъект включает необязательный слово `from`, заголовок неверно спрогнозировано. 

Чтобы исправить это исключение в шаблоне, добавьте`the man from la mancha` как сопоставление явного списка для сущности {тема}, используя [API авторизации для явного списка](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5ade550bd5b81c209ce2e5a8).

## <a name="syntax-to-mark-optional-text-in-a-template-utterance"></a>Синтаксис, предназначенный для отметки дополнительного текста в шаблоне фразы
Отметьте необязательный текст во фразе, используя синтаксис регулярного выражения с квадратными скобками `[]`. В необязательном тексте может быть не более двух экземпляров открывающих и закрывающих квадратных скобок.

|Шаблон с необязательным текстом|Значение|
|--|--|
|`[find] email about {subject} [from {person}]`|`find` и `from {person}` являются необязательными|
|"Мне [?]|Необязательный знак пунктуации|

Знаки препинания (`?`, `!`, `.`) следует игнорировать, и вам нужно игнорировать их, используя синтаксис квадратная скобка в шаблонах. 

## <a name="pattern-only-apps"></a>Только для шаблона приложения
Можно создавать приложения с намерениями, которых нет пример фразы, до тех пор, пока есть шаблон для каждой цели. Для приложения только для шаблона шаблон не должна содержать результаты обучения компьютера сущностей, так как они требуют пример фразы. 

## <a name="best-practices"></a>Рекомендации
Ознакомьтесь с [рекомендациями](luis-concept-best-practices.md).

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> Узнайте, как реализовать шаблоны из [этого руководства](luis-tutorial-pattern.md).
