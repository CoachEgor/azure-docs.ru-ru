---
title: Часто задаваемые вопросы — API Bing для поиска изображений
titleSuffix: Azure Cognitive Services
description: Найдите ответы на часто задаваемые вопросы о понятиях, коде и сценариях, связанных с API Bing для поиска изображений.
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: bing-image-search
ms.topic: conceptual
ms.date: 03/04/2019
ms.author: aahi
ms.openlocfilehash: 19c5c5280b8ff4fb997366375b4300958d694d6c
ms.sourcegitcommit: 58d3b3314df4ba3cabd4d4a6016b22fa5264f05a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/02/2020
ms.locfileid: "89293665"
---
# <a name="frequently-asked-questions-faq-about-the-bing-image-search-api"></a>Часто задаваемые вопросы об API Bing для поиска изображений

Найдите ответы на часто задаваемые вопросы о понятиях, коде и сценариях, связанных с API Bing для поиска изображений для служб Microsoft Cognitive Services в Azure.

## <a name="response-headers-in-javascript"></a>Заголовки ответов в JavaScript

В ответах от API Bing для поиска изображений могут появляться следующие заголовки:

| attribute           | Описание   |
| ------------------- | ------------- |
| `X-MSEdge-ClientID` |Уникальный идентификатор, назначенный пользователю службой Bing. |
| `BingAPIs-Market`   |Рынок, использованный для выполнения запроса. |
| `BingAPIs-TraceId`  |Запись журнала на сервере API Bing для этого запроса (для службы поддержки). |

Особенно важно сохранить идентификатор клиента и вернуть его с последующими запросами. При этом в процессе поиска будет использоваться прошлый контекст в ранжировании результатов поиска, обеспечивая согласованность пользовательского интерфейса.

Тем не менее, при вызове API Bing для поиска изображений из JavaScript встроенные средства обеспечения безопасности браузера (CORS) могут блокировать доступ к значениям этих заголовков.

Чтобы получить доступ к заголовкам, можно выполнить запрос API Bing для поиска изображений через прокси-сервер CORS. Ответ такого прокси-сервера имеет `Access-Control-Expose-Headers` заголовок, который фильтрует заголовки ответа и делает их доступными для JavaScript.

Установить прокси-сервер CORS довольно просто. Это позволит нашему [учебному приложению](tutorial-bing-image-search-single-page-app.md) иметь доступ к необязательным заголовкам клиента. Для начала [установите платформу Node.js](https://nodejs.org/en/download/), если она еще не установлена. В командной строке введите следующую команду:

```console
npm install -g cors-proxy-server
```

Затем измените конечную точку API Bing для поиска изображений в HTML-файле на: \
`http://localhost:9090/https://api.cognitive.microsoft.com/bing/v7.0/search`

И наконец, запустите прокси-сервер CORS с помощью следующей команды:

```console
cors-proxy-server
```

Не закрывайте командное окно, пока используете учебное приложение. Это приведет к остановке прокси-сервера. Теперь в развертываемом разделе заголовков HTTP под результатами поиска можно увидеть заголовок `X-MSEdge-ClientID` (среди прочих) и убедиться, что он одинаковый для всех запросов.

## <a name="response-headers-in-production"></a>Заголовки ответов в рабочей среде

Подход с использованием прокси-сервера CORS, описанный в предыдущем ответе, подходит для среды разработки, тестовой и учебной сред.

Однако в рабочей среде серверный сценарий необходимо размещать в одном домене с веб-страницей, которая использует API Bing для поиска в Интернете. Этот сценарий должен фактически выполнять вызовы API по запросу от веб-страницы JavaScript и передавать все результаты, включая заголовки, обратно в клиент. Поскольку два ресурса (страница и скрипт) используют один источник, то CORS не задействуется, и специальные заголовки доступны для JavaScript на веб-странице.

Такой подход также защищает ключ API от общего доступа, так как он необходим только серверному сценарию. Чтобы обеспечить авторизацию запроса, сценарий может использовать другой метод (такой как источник ссылки HTTP).

## <a name="next-steps"></a>Дальнейшие действия

У вас есть вопрос об отсутствующей функции или компоненте? Вы можете отправить запрос или проголосовать за них на нашем [веб-сайте User Voice](https://cognitive.uservoice.com/forums/555907-bing-search).

## <a name="see-also"></a>См. также раздел

 [Stack Overflow: Cognitive Services](https://stackoverflow.com/questions/tagged/bing-api)
