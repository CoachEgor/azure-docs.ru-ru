---
title: Определение языка с помощью REST API "Анализ текста"
titleSuffix: Azure Cognitive Services
description: Узнайте, как определить язык с помощью REST API "Анализ текста" из Azure Cognitive Services.
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: text-analytics
ms.topic: sample
ms.date: 07/30/2019
ms.author: aahi
ms.openlocfilehash: 361dc10aad6f65230e1e0f4c563534d44b45f902
ms.sourcegitcommit: 800f961318021ce920ecd423ff427e69cbe43a54
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2019
ms.locfileid: "68697812"
---
# <a name="example-detect-language-with-text-analytics"></a>Пример: Определение языка с помощью API "Анализ текста"

Функция [распознавания языка](https://westcentralus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v2-1/operations/56f30ceeeda5650db055a3c7) анализ текста Azure REST API оценивает ввод текста для каждого документа и возвращает идентификаторы языка с показателем, указывающим на надежность анализа.

Эта возможность нужна для содержимого хранилищ, которое собирает произвольный текст, где язык неизвестен. Вы можете проанализировать результаты этого анализа, чтобы определить, какой язык используется во входном документе. В ответах также приводится оценка, отражающая степень доверия к модели. Значение оценки находится в диапазоне от 0 до 1.

Функция "Распознавание языка" может обнаруживать широкий спектр языков, их наречий, диалектов и некоторых региональных или национальных языков. Точный список языков для этой функции не опубликован.

Если содержимое на менее распространенном языке, вы можете попробовать применить распознавание языка, чтобы узнать, вернет ли эта функция код. Для языков, которые невозможно распознать, ответ — `unknown`.

> [!TIP]
> API анализа текста также предоставляет образ контейнера Docker под управлением Linux для распознавания языка, поэтому вы можете [установить и запустить контейнер API анализа текста](text-analytics-how-to-install-containers.md) в непосредственной близости к своим данным.

## <a name="preparation"></a>Подготовка

Необходимы документы JSON в следующем формате: ИД и текст.

Размер документа не должен превышать 5120 символов. На каждую коллекцию может приходиться до 1000 элементов (ИД). Коллекция передается в тексте запроса. Ниже приведен пример содержимого, который вы можете предоставить для распознавания языка.

```json
    {
        "documents": [
            {
                "id": "1",
                "text": "This document is in English."
            },
            {
                "id": "2",
                "text": "Este documento está en inglés."
            },
            {
                "id": "3",
                "text": "Ce document est en anglais."
            },
            {
                "id": "4",
                "text": "本文件为英文"
            },
            {
                "id": "5",
                "text": "Этот документ на английском языке."
            }
        ]
    }
```

## <a name="step-1-structure-the-request"></a>Шаг 1. Структурирование запроса

Дополнительные сведения об определении запроса см. [Вызов REST API анализа текста](text-analytics-how-to-call-api.md). Для удобства повторим следующие моменты.

+ Создайте запрос POST. Для изучения документации по API для этого запроса см. [API Распознавание языка](https://westcentralus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v2-1/operations/56f30ceeeda5650db055a3c7)

+ Задайте конечную точку HTTP для распознавание языка. Используйте ресурс "Анализ текста" в Azure либо отдельный контейнер [Text Analytics](text-analytics-how-to-install-containers.md). Он должен включать в себя ресурс `/languages`: `https://westus.api.cognitive.microsoft.com/text/analytics/v2.1/languages`.

+ Задайте заголовок запроса, чтобы включить [ключ доступа](../../cognitive-services-apis-create-account.md#get-the-keys-for-your-resource) для операций Анализа текста.

+ В тексте запроса укажите набор документов JSON, которые подготовлены для этого анализа.

> [!Tip]
> Используйте [Postman](text-analytics-how-to-call-api.md) или откройте **консоль тестирования API** в [документации](https://westcentralus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v2-1/operations/56f30ceeeda5650db055a3c7), чтобы структурировать запрос и передать его (используя метод POST) в службу.

## <a name="step-2-post-the-request"></a>Шаг 2. Отправить запрос

Анализ выполняется при получении запроса. Сведения о размере и числе запросов, которые можно отправлять в минуту и секунду, см. в разделе об [ограничениях данных](../overview.md#data-limits).

Не забывайте, что эта служба работает без отслеживания состояния. Данные не хранятся в учетной записи. Результаты возвращаются немедленно в ответе.


## <a name="step-3-view-the-results"></a>Шаг 3. Просмотр результатов

Все запросы POST вернут ответ в формате JSON с идентификаторами и обнаруженными свойствами.

Вывод возвращается немедленно. Результаты можно передать в приложение, которое принимает JSON, или сохранить результаты в файл в локальной системе. Затем импортируйте выходные данные в приложение, которое можно использовать для сортировки, поиска и управления данными.

Результаты для примера запроса должна выглядеть как следующий JSON. Обратите внимание, что это один документ с несколькими элементами. Выходные данные на английском языке. Идентификаторы языка включают понятное имя и код языка в формате [ISO 639-1](https://www.iso.org/standard/22109.html).

Положительная оценка 1.0 выражает наивысший уровень достоверности анализа.

```json
    {
        "documents": [
            {
                "id": "1",
                "detectedLanguages": [
                    {
                        "name": "English",
                        "iso6391Name": "en",
                        "score": 1
                    }
                ]
            },
            {
                "id": "2",
                "detectedLanguages": [
                    {
                        "name": "Spanish",
                        "iso6391Name": "es",
                        "score": 1
                    }
                ]
            },
            {
                "id": "3",
                "detectedLanguages": [
                    {
                        "name": "French",
                        "iso6391Name": "fr",
                        "score": 1
                    }
                ]
            },
            {
                "id": "4",
                "detectedLanguages": [
                    {
                        "name": "Chinese_Simplified",
                        "iso6391Name": "zh_chs",
                        "score": 1
                    }
                ]
            },
            {
                "id": "5",
                "detectedLanguages": [
                    {
                        "name": "Russian",
                        "iso6391Name": "ru",
                        "score": 1
                    }
                ]
            }
        ],
        "errors": []
    }
```

### <a name="ambiguous-content"></a>Неоднозначное содержимое

В некоторых случаях неоднозначность языков на основе входных данных может быть трудно устранить. Используйте параметр `countryHint`, чтобы указать двухбуквенный код страны. По умолчанию API использует US в качестве значения countryHint по умолчанию.Чтобы отменить это поведение, вы можете сбросить этот параметр, установив для этого значения пустую строку `countryHint = ""`.

Например, слово "Impossible" часто встречается в английском и французском языках, и при ограниченном контексте ответ будет основан на указании "US". Если известно, что источник текста находится во Франции, такие данные можно использовать в качестве указания.

**Входные данные**

```json
    {
        "documents": [
            {
                "id": "1",
                "text": "impossible"
            },
            {
                "id": "2",
                "text": "impossible",
                "countryHint": "fr"
            }
        ]
    }
```

Теперь служба имеет дополнительный контекст для принятия более взвешенного решения: 

**Выходные данные**

```json
    {
        "documents": [
            {
                "id": "1",
                "detectedLanguages": [
                    {
                        "name": "English",
                        "iso6391Name": "en",
                        "score": 1
                    }
                ]
            },
            {
                "id": "2",
                "detectedLanguages": [
                    {
                        "name": "French",
                        "iso6391Name": "fr",
                        "score": 1
                    }
                ]
            }
        ],
        "errors": []
    }
```

Если анализатору не удается выполнить синтаксический анализ входных данных,он возвращается `(Unknown)`. Например, текстовый блок, состоящий исключительно из арабских цифр.

```json
    {
        "id": "5",
        "detectedLanguages": [
            {
                "name": "(Unknown)",
                "iso6391Name": "(Unknown)",
                "score": "NaN"
            }
        ]
    }
```

### <a name="mixed-language-content"></a>Содержание на разных языках

Содержимое на разных языках в одном и том же документе возвращает язык с самым большим представлением в содержимом, но с более низкой положительным рейтингом. Рейтинг отражает предельную силу оценки. В следующем примере входные данные — сочетание английского, испанского и французского языков. Анализатор подсчитывает число знаков в каждом сегменте, чтобы определить преобладающий язык.

**Входные данные**

```json
    {
      "documents": [
        {
          "id": "1",
          "text": "Hello, I would like to take a class at your University. ¿Se ofrecen clases en español? Es mi primera lengua y más fácil para escribir. Que diriez-vous des cours en français?"
        }
      ]
    }
```

**Выходные данные**

Итоговые выходные данные состоят из преобладающего языка, с оценкой не менее 1.0, что указывает на менее надежный уровень достоверности.

```json
    {
      "documents": [
        {
          "id": "1",
          "detectedLanguages": [
            {
              "name": "Spanish",
              "iso6391Name": "es",
              "score": 0.9375
            }
          ]
        }
      ],
      "errors": []
    }
```

## <a name="summary"></a>Сводка

В этой статье рассматриваются основные понятия и рабочий процесс распознавания языка с помощью анализа текста в Cognitive Services. Мы объяснили и продемонстрировали некоторые моменты:

+ [Распознавание языка](https://westcentralus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v2-1/operations/56f30ceeeda5650db055a3c7) доступно для широкого спектра языков, наречий, диалектов и некоторых региональных или национальных языков.
+ В тексте запроса передаются документы JSON, которые содержат идентификатор и текст.
+ Запрос POST передается в конечную точку `/languages` используя личный [ключ доступа и конечную точку](../../cognitive-services-apis-create-account.md#get-the-keys-for-your-resource), допустимые для вашей подписки.
+ Выходные данные ответа состоят из идентификаторов языка для каждого ИД документа. Выходные данные можно передавать в любое приложение, принимающее JSON. Примеры приложений, среди прочих, включают в себя Excel и Power BI.

## <a name="see-also"></a>См. также

 API анализа текста: [общие сведения](../overview.md) и [вопросы и ответы](../text-analytics-resource-faq.md)</br>
 [Анализ текста](//go.microsoft.com/fwlink/?LinkID=759712)

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Анализ тональности](text-analytics-how-to-sentiment-analysis.md)
