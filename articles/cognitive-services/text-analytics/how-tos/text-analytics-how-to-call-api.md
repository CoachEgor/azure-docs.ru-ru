---
title: Вызов API "Анализ текста"
titleSuffix: Azure Cognitive Services
description: Сведения о вызове REST API службы "Анализ текста".
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: text-analytics
ms.topic: conceptual
ms.date: 07/30/2019
ms.author: aahi
ms.openlocfilehash: 14d3864f654dac42566441b3729de0cf88482295
ms.sourcegitcommit: 800f961318021ce920ecd423ff427e69cbe43a54
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2019
ms.locfileid: "68697863"
---
# <a name="how-to-call-the-text-analytics-rest-api"></a>Как вызвать REST API службы "Анализ текста"

К **API анализа текста** отправляются вызовы HTTP POST или GET, которые можно сформулировать на любом языке. В этой статье для демонстрации основных концепций используется REST и [Postman](https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop).

Каждый запрос должен содержать ключ доступа и конечную точку HTTP. Конечная точка определяет регион, который вы выбираете во время регистрации, URL-адрес службы и ресурс, используемый в запросе: `sentiment`, `keyphrases`, `languages` и `entities`. 

Напомним, что служба "Анализ текста" не учитывает состояние, поэтому ресурсы данных, которыми необходимо управлять, отсутствуют. Текст будет отправлен и проанализирован после получения, а результаты немедленно будут возвращены в вызывающее приложение.

> [!Tip]
> Чтобы увидеть, как работает API, вы можете отправить одноразовые запросы POST из встроенной **консоли тестирования API**, доступной на любой [странице документации по API](https://westcentralus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v2-1/operations/56f30ceeeda5650db055a3c6). Никаких настроек выполнять не нужно. Единственные требования — вставить ключ доступа и документы JSON в запрос. 

## <a name="prerequisites"></a>предварительные требования

[!INCLUDE [cognitive-services-text-analytics-signup-requirements](../../../../includes/cognitive-services-text-analytics-signup-requirements.md)]

<a name="json-schema"></a>

## <a name="json-schema-definition"></a>Определение схемы JSON

Входные данные должны быть в виде необработанного неструктурированного текста в формате JSON. XML не поддерживается. Схема проста и состоит из элементов, описанных в приведенном ниже списке. 

В настоящее время можно отправить те же документы для всех операций службы "Анализ текста": определение тональности, ключевых фраз, распознавание языка и идентификация сущности. (Схема может отличаться для каждого будущего анализа.)

| Элемент | Допустимые значения | Обязательный? | Использование |
|---------|--------------|-----------|-------|
|`id` |Типом данных выступает строка, однако обычно идентификаторы документов являются целыми числами. | Обязательное значение | Система использует предоставленные идентификаторы, чтобы структурировать выходные данные. Коды языков, ключевые фразы и оценка тональности создаются для каждого идентификатора в запросе.|
|`text` | Неструктурированный необработанный текст, не более 5 120 символов. | Обязательное значение | Для распознавания языка текст может быть выражен на любом языке. Для анализа тональности, извлечения ключевых фраз и идентификации сущности текст должен быть на [поддерживаемом языке](../text-analytics-supported-languages.md). |
|`language` | Двухзначный код [ISO 639-1](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) для [поддерживаемого языка](../text-analytics-supported-languages.md). | Varies | Требуется для анализа тональности, извлечения ключевых фраз и связывания сущностей. Необязательно для распознавания языка. Код можно исключить, и это не будет ошибкой, однако без него анализ будет менее точным. Код языка должен соответствовать предоставленному вами элементу `text`. |

Дополнительные сведения см. в разделе [Ограничения данных](../overview.md#data-limits). 

## <a name="set-up-a-request-in-postman"></a>Настройка запроса в Postman

Служба принимает запрос размером до 1 МБ. Если вы используете Postman (или другой инструмент тестирования для веб-API), настройте конечную точку так, чтобы она содержала нужный ресурс, и предоставьте ключ доступа в заголовке запроса. Каждая операция требует, чтобы вы добавляли соответствующий ресурс в конечную точку. 

1. В Postman:

   + выберите **Post** в качестве типа запроса;
   + вставьте конечную точку, скопированную со страницы портала;
   + добавьте ресурс.

   Конечные точки ресурсов имеют такой вид (ваш регион может отличаться):

   + `https://westus.api.cognitive.microsoft.com/text/analytics/v2.1/sentiment`
   + `https://westus.api.cognitive.microsoft.com/text/analytics/v2.1/keyPhrases`
   + `https://westus.api.cognitive.microsoft.com/text/analytics/v2.1/languages`
   + `https://westus.api.cognitive.microsoft.com/text/analytics/v2.1/entities`

2. Задайте три заголовка запроса:

   + `Ocp-Apim-Subscription-Key` — ключ доступа, полученный с портала Azure;
   + `Content-Type` — приложение/JSON;
   + `Accept` — приложение/JSON.

   При использовании ресурса **/keyPhrases** запрос должен выглядеть, как на следующем снимке экрана.

   ![Снимок экрана запроса с конечной точкой и заголовками](../media/postman-request-keyphrase-1.png)

4. Щелкните **Текст** и выберите **Без форматирования** для формата.

   ![Снимок экрана запроса с параметрами текста](../media/postman-request-body-raw.png)

5. Вставьте несколько документов JSON в формате, который допустим для предполагаемого анализа. Дополнительные сведения о конкретном анализе см. в статьях ниже:

  + [Пример. Как определить язык с помощью Анализа текста](text-analytics-how-to-language-detection.md)  
  + [Пример. Как извлечь ключевые фразы с помощью Анализа текста](text-analytics-how-to-keyword-extraction.md)  
  + [Пример. Как определить тональность с помощью Анализа текста](text-analytics-how-to-sentiment-analysis.md)  
  + [Распознавание сущностей](text-analytics-how-to-entity-linking.md)  


6. Щелкните **Отправить**, чтобы отправить запрос. Сведения о количестве запросов, которые можно отправить в минуту и секунду, см. в разделе [ограничения данных](../overview.md#data-limits) в обзоре.

   В Postman ответ отображается в следующем расположенном ниже окне как один документ JSON с элементом для каждого идентификатора документа, предоставленного в запросе.

## <a name="see-also"></a>См. также 

 [Что такое API анализа текста версии 2.0?](../overview.md)  
 [Часто задаваемые вопросы](../text-analytics-resource-faq.md)

## <a name="next-steps"></a>Следующие шаги

> [!div class="nextstepaction"]
> [Пример. Как определить язык с помощью Анализа текста](text-analytics-how-to-language-detection.md)
