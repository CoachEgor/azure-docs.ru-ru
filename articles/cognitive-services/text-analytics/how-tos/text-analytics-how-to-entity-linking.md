---
title: Использование распознавания сущностей с помощью API анализа текста
titleSuffix: Azure Cognitive Services
description: Узнайте, как идентифицировать и устранить неоднозначность удостоверения сущности, найденной в тексте с помощью REST API Анализ текста.
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: text-analytics
ms.topic: article
ms.date: 02/10/2020
ms.author: aahi
ms.openlocfilehash: 607b65d6a6893901ce23cd48c277c14209128866
ms.sourcegitcommit: b95983c3735233d2163ef2a81d19a67376bfaf15
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/11/2020
ms.locfileid: "77137975"
---
# <a name="how-to-use-named-entity-recognition-in-text-analytics"></a>Как использовать распознавание именованных сущностей в Анализ текста

API анализа текста позволяет получить неструктурированный текст и возвращает список неоднозначного количества сущностей со ссылками на дополнительные сведения в Интернете. API поддерживает как распознавание сущностей (NER), так и связывание сущностей.

### <a name="entity-linking"></a>Связывание сущностей

Связывание сущностей — это возможность определить и устранить неоднозначность идентификации сущности, найденной в тексте (например, определить, относится ли вхождение слова `Mars` к планеты или римских божественные War). Для этого процесса требуется наличие базы знаний на соответствующем языке, чтобы связать распознанные сущности в тексте. При связывании сущностей в качестве этой базы знаний используется [Википедии](https://www.wikipedia.org/) .


### <a name="named-entity-recognition-ner"></a>Распознавание именованных сущностей (NER)

Распознавание имен сущностей (NER) — это возможность определения различных сущностей в тексте и категоризация их по заранее определенным классам или типам. Например: люди, места и Организации.

## <a name="named-entity-recognition-versions-and-features"></a>Версии и функции распознавания именованных сущностей

API анализа текста предлагает две версии с именами "распознавание сущностей — v2" и "V3". Версия 3 (общедоступная Предварительная версия) предоставляет более подробные сведения в сущностях, которые могут быть обнаружены и отнесены к категории.

| Компонент                                                         | NER v2 | NER v3 |
|-----------------------------------------------------------------|--------|--------|
| Методы для одиночных и пакетных запросов                          | X      | X      |
| Простое распознавание сущностей в нескольких категориях              | X      | X      |
| Расширенная классификация для распознаваемых сущностей                 |        | X      |
| Отдельные конечные точки для отправки запросов на связывание сущностей и NER. |        | X      |
| управления версиями моделей;                                                |        | X      |

Дополнительные сведения см. в разделе [Поддержка языков](../language-support.md#sentiment-analysis-key-phrase-extraction-and-named-entity-recognition) .


#### <a name="version-30-previewtabversion-3"></a>[Версия 3,0-Preview](#tab/version-3)

### <a name="entity-types"></a>Типы сущностей

Распознавание именованных сущностей v3 обеспечивает Расширенное обнаружение для нескольких типов. В настоящее время NER v3 может распознать следующие категории сущностей:

* Общие сведения
* Личная информация 

Подробный список поддерживаемых сущностей и языков см. в статье [NER v3 Supported Entity Types](../named-entity-types.md) .

### <a name="request-endpoints"></a>Конечные точки запроса

В примере распознавания сущностей v3 используются отдельные конечные точки для запросов NER и связывания сущностей. Используйте следующий формат URL-адреса в зависимости от вашего запроса:

NER
* Общие сущности — `https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/recognition/general`

* Персональные данные — `https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/recognition/pii`

Связывание сущностей
* `https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/linking`

### <a name="model-versioning"></a>управления версиями моделей;

[!INCLUDE [v3-model-versioning](../includes/model-versioning.md)]

#### <a name="version-21tabversion-2"></a>[Версия 2,1](#tab/version-2)

### <a name="entity-types"></a>Типы сущностей

> [!NOTE]
> Распознавание имен сущностей (NER) версии 2 поддерживает только следующие сущности. NER v3 находится в общедоступной предварительной версии и значительно расширяет количество и глубину сущностей, распознаваемых в тексте.   

| Тип  | Подтип | Пример |
|:-----------   |:------------- |:---------|
| Модель Person        | Недоступно\*         | "Джеф", "Билл Гейтс"     |
| Location      | Недоступно\*         | "Редмонд, штат Вашингтон", "Париж"  |
| План  | Недоступно\*         | "Майкрософт"   |
| Количество      | Number        | "6", "шесть"     |
| Количество      | Процент    | "50 %", "пятьдесят процентов"|
| Количество      | Ordinal       | "2-й", "второй"     |
| Количество      | Возраст           | "90 дней", "30 лет"    |
| Количество      | Валюта      | "10,99 долл. США"     |
| Количество      | Измерение     | "10 миль", "40 см"     |
| Количество      | температура;   | "32 градуса"    |
| Дата и время      | Недоступно\*         | "18:30 4 февраля 2012 г."      |
| Дата и время      | Дата          | "2 мая 2017 г.", "02.05.2017"   |
| Дата и время      | Time          | "8 утра", "8:00"  |
| Дата и время      | Диапазон дат     | "с 2 по 5 мая"    |
| Дата и время      | Диапазон времени     | "6:00–17:00"     |
| Дата и время      | Duration      | "1 минута и 45 секунд"   |
| Дата и время      | Присвойте параметру           | "каждый вторник"     |
| URL-адрес           | Недоступно\*         | "https:\//www.bing.com"    |
| Email         | Недоступно\*         | "support@contoso.com" |
| Номер телефона США  | Недоступно\*         | (Только номера телефонов США) "(312) 555-0176" |
| IP-адрес    | Недоступно\*         | "10.0.0.100" |

\* Некоторые сущности могут опускать `SubType` в зависимости от входных и извлеченных сущностей.  Все поддерживаемые типы сущностей доступны только для английского, упрощенного, французского, немецкого и испанского языков.

### <a name="request-endpoints"></a>Конечные точки запроса

При распознавании сущностей версии 2 для NER и запросов на связывание сущностей используется одна конечная точка.

`https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v2.1/entities`

---

## <a name="sending-a-rest-api-request"></a>Отправка запроса к REST API

### <a name="preparation"></a>Подготовка

Необходимо иметь документы JSON в следующем формате: ID, Text, Language.

Длина каждого документа не должна превышать 5 120 символов. в каждой коллекции может быть до 1 000 элементов (идентификаторов). Коллекция передается в тексте запроса.

### <a name="structure-the-request"></a>Структурирование запроса

Создайте запрос POST. Вы можете [использовать POST](text-analytics-how-to-call-api.md) или **консоль тестирования API** в следующих ссылках, чтобы быстро структурировать и отправить ее. 

> [!NOTE]
> Ключ и конечную точку для ресурса Анализ текста можно найти на портале Azure. Они находятся на странице ресурса **Быстрый запуск** в разделе **Управление ресурсами**. 

#### <a name="version-30-previewtabversion-3"></a>[Версия 3,0-Preview](#tab/version-3)

[Справочник по распознаванию именованных сущностей v3](https://westus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v3-0-Preview-1/operations/EntitiesRecognitionGeneral)

В версии 3 используются отдельные конечные точки для запросов NER и связывания сущностей. Используйте следующий формат URL-адреса в зависимости от вашего запроса:

NER
* Общие сущности — `https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/recognition/general`

* Сущности с личными сведениями — `https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/recognition/pii`

Связывание сущностей
* `https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/linking`

#### <a name="version-21tabversion-2"></a>[Версия 2,1](#tab/version-2)

[Справочник по распознаванию имен сущностей (NER) v2](https://eastus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v2-1/operations/5ac4251d5b4ccd1554da7634)

В версии 2 для связывания сущностей и запросов NER используется следующая конечная точка: 

`https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v2.1/entities`

---

Включите ключ API Анализа текста в заголовок запроса. В тексте запроса укажите подготовленные документы JSON.

### <a name="example-ner-request"></a>Пример запроса NER 

Ниже приведен пример содержимого, которое можно отправить в API. Формат запроса одинаков для обеих версий API.

```json
{
  "documents": [
    {
      "language": "en",
      "id": "1",
      "text": "I had a wonderful trip to Seattle last week."
    }
  ]
}
```

## <a name="post-the-request"></a>Передача запроса

Анализ выполняется при получении запроса. Сведения о размере и числе запросов, которые можно отправлять в минуту и секунду, см. в разделе об [ограничениях данных](../overview.md#data-limits).

API Анализа текста не учитывает состояние. Никакие данные в учетной записи не сохраняются, а все результаты немедленно возвращаются в ответе.

## <a name="view-results"></a>Просмотр результатов

Все запросы POST возвращают отформатированный ответ JSON с идентификаторами и обнаруженными свойствами сущности.

Вывод возвращается немедленно. Можно выполнить потоковую передачу результатов в приложение, которое принимает JSON, или сохранить выходные данные в файле локальной системы, а затем импортировать их в приложение, которое дает возможность сортировки, поиска данных и управления ими.


#### <a name="version-30-previewtabversion-3"></a>[Версия 3,0-Preview)](#tab/version-3)

### <a name="example-v3-responses"></a>Примеры ответов v3

Версия 3 предоставляет отдельные конечные точки для NER и связывания сущностей. Ниже приведены ответы для обеих операций.

#### <a name="example-ner-response"></a>Пример ответа NER

```json
{
    "documents": [{
    "id": "1",
    "entities": [{
        "text": "Seattle",
        "type": "Location",
        "offset": 26,
        "length": 7,
        "score": 0.80624294281005859
    }, {
        "text": "last week",
        "type": "DateTime",
        "subtype": "DateRange",
        "offset": 34,
        "length": 9,
        "score": 0.8
    }]
    }],
    "errors": [],
    "modelVersion": "2019-10-01"
}
```

#### <a name="example-entity-linking-response"></a>Пример ответа на связывание сущности

```json
{
  "documents": [{
    "id": "1",
    "entities": [{
      "name": "Seattle",
      "matches": [{
        "text": "Seattle",
        "offset": 26,
        "length": 7,
        "score": 0.15046201222847677
      }],
      "language": "en",
      "id": "Seattle",
      "url": "https://en.wikipedia.org/wiki/Seattle",
      "dataSource": "Wikipedia"
    }]
  }],
  "errors": [],
  "modelVersion": "2019-10-01"
}
```

#### <a name="version-21tabversion-2"></a>[Версия 2,1](#tab/version-2)

### <a name="example-ner-v2-response"></a>Пример ответа NER v2
```json
{
  "documents": [{
    "id": "1",
    "entities": [{
      "name": "Seattle",
      "matches": [{
        "wikipediaScore": 0.15046201222847677,
        "entityTypeScore": 0.80624294281005859,
        "text": "Seattle",
        "offset": 26,
        "length": 7
      }],
      "wikipediaLanguage": "en",
      "wikipediaId": "Seattle",
      "wikipediaUrl": "https://en.wikipedia.org/wiki/Seattle",
      "bingId": "5fbba6b8-85e1-4d41-9444-d9055436e473",
      "type": "Location"
    }, {
      "name": "last week",
      "matches": [{
        "entityTypeScore": 0.8,
        "text": "last week",
        "offset": 34,
        "length": 9
      }],
      "type": "DateTime",
      "subType": "DateRange"
    }]
  }],
  "errors": []
}
```

---

## <a name="summary"></a>Сводка

В этой статье рассматриваются основные понятия и рабочий процесс связывания сущностей в службе Текстовой аналитики Cognitive Services. В разделе "Сводка" сделайте следующее.

* Распознавание именованных сущностей доступно для выбранных языков в двух версиях.
* В тексте запроса передаются документы JSON, которые содержат идентификатор, текст и код языка.
* Запросы POST отправляются на одну или несколько конечных точек, используя персонализированный [ключ доступа и конечную точку](../../cognitive-services-apis-create-account.md#get-the-keys-for-your-resource) , допустимую для вашей подписки.
* Ответ будет содержать выходные данные, содержащие связанные сущности (включая оценки уверенности, смещения и веб-ссылки для каждого идентификатора документа), которые можно использовать в любом приложении

## <a name="next-steps"></a>Дальнейшие действия

* [Text Analytics overview](../overview.md) (Общие сведения об анализе текста)
* [Использование клиентской библиотеки Анализа текста](../quickstarts/text-analytics-sdk.md)
* [Новые возможности](../whats-new.md)
