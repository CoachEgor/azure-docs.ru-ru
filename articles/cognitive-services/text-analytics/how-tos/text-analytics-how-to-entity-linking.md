---
title: Использование распознавания сущностей с помощью API анализа текста
titleSuffix: Azure Cognitive Services
description: Узнайте, как определить и установить личность организации, найденной в тексте, с помощью API Text Analytics REST.
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: text-analytics
ms.topic: article
ms.date: 02/10/2020
ms.author: aahi
ms.openlocfilehash: 243086ddaae47eba20eea6877fe6d7f8f9889290
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79203497"
---
# <a name="how-to-use-named-entity-recognition-in-text-analytics"></a>Как использовать Именованные Признания Сущности в текстовой аналитике

API Text Analytics позволяет перенисажным текстом и возвращает список некоммерческих организаций со ссылками на более подробную информацию в Интернете. API поддерживает как именованные распознавания сущности (NER), так и связующее соединение сущности.

### <a name="entity-linking"></a>Связывание сущностей

Сущность увязки является способность определить и disambiguate личность лица, найденного в тексте (например, определение того, возникновение слова `Mars` относится к планете, или римского бога войны). Этот процесс требует наличия базы знаний на соответствующем языке, чтобы связать признанные сущности в тексте. Entity Linking использует [Википедию](https://www.wikipedia.org/) в качестве этой базы знаний.


### <a name="named-entity-recognition-ner"></a>Распознавание именованных сущностей (NER)

Именование распознавания сущности (NER) — это возможность идентифицировать различные сущности в тексте и классифицировать их по заранее определенным классам или типам, таким как: человек, местоположение, событие, продукт и организация.  

Начиная с версии 3, эта функция API Text Analytics также может идентифицировать типы личной и конфиденциальной информации, такие как: номер телефона, номер социального страхования, адрес электронной почты и номер банковского счета.  Выявление этих сущностей может помочь в классификации конфиденциальных документов и отеке личной информации.

## <a name="named-entity-recognition-versions-and-features"></a>Именованные версии и функции распознавания сущности

API Text Analytics предлагает две версии именованного распознавания сущности - v2 и v3. Версия 3 (Публичный предварительный просмотр) предоставляет более подробную информацию в сущностях, которые могут быть обнаружены и классифицированы.

| Компонент                                                         | NER v2 | NER v3 |
|-----------------------------------------------------------------|--------|--------|
| Методы для одиночных и пакетных запросов                          | X      | X      |
| Базовое распознавание сущности в нескольких категориях              | X      | X      |
| Расширенная классификация для признанных субъектов                 |        | X      |
| Отдельные конечные точки для отправки ссылок сущности и запросов NER. |        | X      |
| управления версиями моделей;                                                |        | X      |

Смотрите [языковую поддержку](../language-support.md#sentiment-analysis-key-phrase-extraction-and-named-entity-recognition) информации.


#### <a name="version-30-preview"></a>[Версия 3.0-preview](#tab/version-3)

### <a name="entity-types"></a>Типы сущностей

Named Entity Recognition v3 обеспечивает расширенное обнаружение в нескольких типах. В настоящее время NER v3 может распознавать следующие категории субъектов:

* Общие сведения
* Личная информация 

Для получения подробного списка поддерживаемых [NER v3 supported entity types](../named-entity-types.md) сущностей и языков см.

### <a name="request-endpoints"></a>Запрос конечных точек

Named Entity Recognition v3 использует отдельные конечные точки для NER и сущности, связывающие запросы. Используйте формат URL ниже на основе вашего запроса:

Нер
* Общие организации -`https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/recognition/general`

* Личная информация -`https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/recognition/pii`

Связывание сущностей
* `https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/linking`

### <a name="model-versioning"></a>управления версиями моделей;

[!INCLUDE [v3-model-versioning](../includes/model-versioning.md)]

#### <a name="version-21"></a>[Версия 2.1](#tab/version-2)

### <a name="entity-types"></a>Типы сущностей

> [!NOTE]
> Версия 2 «Именованные сущности распознавания» (NER) поддерживает только следующие сущности. NER v3 находится в открытом предварительном просмотре и значительно расширяет количество и глубину сущностей, распознаемых в тексте.   

| Тип  | Подтип | Пример |
|:-----------   |:------------- |:---------|
| Модель Person        | Недоступно\*         | "Джеф", "Билл Гейтс"     |
| Расположение      | Недоступно\*         | "Редмонд, штат Вашингтон", "Париж"  |
| План  | Недоступно\*         | "Майкрософт"   |
| Количество      | Number        | "6", "шесть"     |
| Количество      | Процент    | "50 %", "пятьдесят процентов"|
| Количество      | Ordinal       | "2-й", "второй"     |
| Количество      | Возраст           | "90 дней", "30 лет"    |
| Количество      | Валюта      | "10,99 долл. США"     |
| Количество      | Измерение     | "10 миль", "40 см"     |
| Количество      | температура;   | "32 градуса"    |
| Дата и время      | Недоступно\*         | "18:30 4 февраля 2012 г."      |
| Дата и время      | Дата          | "2 мая 2017 г.", "02.05.2017"   |
| Дата и время      | Time          | "8 утра", "8:00"  |
| Дата и время      | Диапазон дат     | "с 2 по 5 мая"    |
| Дата и время      | Диапазон времени     | "6:00–17:00"     |
| Дата и время      | Duration      | "1 минута и 45 секунд"   |
| Дата и время      | Присвойте параметру           | "каждый вторник"     |
| URL-адрес           | Недоступно\*         | "https:\//www.bing.com"    |
| Email         | Недоступно\*         | "support@contoso.com" |
| Номер телефона в США  | Недоступно\*         | (Только номера телефонов США) "(312) 555-0176" |
| IP-адрес    | Недоступно\*         | "10.0.0.100" |

\* Некоторые сущности могут опускать `SubType` в зависимости от входных и извлеченных сущностей.  Все перечисленные типы поддерживаемых сущностей доступны только для английского, китайского, французского, немецкого и испанского языков.

### <a name="request-endpoints"></a>Запрос конечных точек

Named Entity Recognition v2 использует единую конечную точку для NER и сущности, связывающей запросы:

`https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v2.1/entities`

---

## <a name="sending-a-rest-api-request"></a>Отправка запроса к REST API

### <a name="preparation"></a>Подготовка

Вы должны иметь документы JSON в этом формате: ID, текст, язык.

Каждый документ должен быть менее 5120 символов, и вы можете иметь до 1000 элементов (идентификаторов) на коллекцию. Коллекция передается в тексте запроса.

### <a name="structure-the-request"></a>Структурирование запроса

Создайте запрос POST. Вы можете [использовать Postman](text-analytics-how-to-call-api.md) или **консоль тестирования API** в следующих ссылках, чтобы быстро структурировать и отправить один. 

> [!NOTE]
> Ключ и конечную точку для ресурса Анализа текста можно найти на портале Azure. Они находятся на странице ресурса **Быстрый запуск** в разделе **Управление ресурсами**. 

#### <a name="version-30-preview"></a>[Версия 3.0-preview](#tab/version-3)

[Именованные ссылки распознавания объектов v3](https://westus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v3-0-Preview-1/operations/EntitiesRecognitionGeneral)

Версия 3 использует отдельные конечные точки для NER и сущности, связывающие запросы. Используйте формат URL ниже на основе вашего запроса:

Нер
* Общие организации -`https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/recognition/general`

* Лица, персональные данные -`https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/recognition/pii`

Связывание сущностей
* `https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v3.0-preview.1/entities/linking`

#### <a name="version-21"></a>[Версия 2.1](#tab/version-2)

[Именованные признания сущности (NER) v2 ссылка](https://eastus.dev.cognitive.microsoft.com/docs/services/TextAnalytics-v2-1/operations/5ac4251d5b4ccd1554da7634)

Версия 2 использует следующую конечную точку для ссылок сущности и запросов NER: 

`https://<your-custom-subdomain>.cognitiveservices.azure.com/text/analytics/v2.1/entities`

---

Включите ключ API Анализа текста в заголовок запроса. В органе запроса предоставьте подготовленные документы JSON.

### <a name="example-ner-request"></a>Пример запроса NER 

Ниже приводится пример содержимого, который можно отправить в API. Формат запроса одинаков для обеих версий API.

```json
{
  "documents": [
    {
      "language": "en",
      "id": "1",
      "text": "I had a wonderful trip to Seattle last week."
    }
  ]
}
```

## <a name="post-the-request"></a>Передача запроса

Анализ выполняется при получении запроса. Сведения о размере и числе запросов, которые можно отправлять в минуту и секунду, см. в разделе об [ограничениях данных](../overview.md#data-limits).

API Анализа текста не учитывает состояние. Никакие данные в учетной записи не сохраняются, а все результаты немедленно возвращаются в ответе.

## <a name="view-results"></a>Просмотр результатов

Все запросы POST возвращают отформатированный jSON ответ с идентификациями и обнаруженными свойствами сущности.

Вывод возвращается немедленно. Можно выполнить потоковую передачу результатов в приложение, которое принимает JSON, или сохранить выходные данные в файле локальной системы, а затем импортировать их в приложение, которое дает возможность сортировки, поиска данных и управления ими. Из-за многоязычной поддержки и поддержки эмодзи ответ может содержать текстовые смещения. [Узнайте, как обрабатывать компенсации текста](../concepts/text-offsets.md) для получения дополнительной информации.

#### <a name="version-30-preview"></a>[Версия 3.0-предварительный просмотр)](#tab/version-3)

### <a name="example-v3-responses"></a>Пример ответов v3

Версия 3 предоставляет отдельные конечные точки для ner и сущности ссылок. Ответы на обе операции приведены ниже. 

#### <a name="example-ner-response"></a>Пример ответа NER

```json
{
    "documents": [{
    "id": "1",
    "entities": [{
        "text": "Seattle",
        "type": "Location",
        "offset": 26,
        "length": 7,
        "score": 0.80624294281005859
    }, {
        "text": "last week",
        "type": "DateTime",
        "subtype": "DateRange",
        "offset": 34,
        "length": 9,
        "score": 0.8
    }]
    }],
    "errors": [],
    "modelVersion": "2019-10-01"
}
```

#### <a name="example-entity-linking-response"></a>Пример сущности, связывающей ответ

```json
{
  "documents": [{
    "id": "1",
    "entities": [{
      "name": "Seattle",
      "matches": [{
        "text": "Seattle",
        "offset": 26,
        "length": 7,
        "score": 0.15046201222847677
      }],
      "language": "en",
      "id": "Seattle",
      "url": "https://en.wikipedia.org/wiki/Seattle",
      "dataSource": "Wikipedia"
    }]
  }],
  "errors": [],
  "modelVersion": "2019-10-01"
}
```

#### <a name="version-21"></a>[Версия 2.1](#tab/version-2)

### <a name="example-ner-v2-response"></a>Пример ответа NER v2
```json
{
  "documents": [{
    "id": "1",
    "entities": [{
      "name": "Seattle",
      "matches": [{
        "wikipediaScore": 0.15046201222847677,
        "entityTypeScore": 0.80624294281005859,
        "text": "Seattle",
        "offset": 26,
        "length": 7
      }],
      "wikipediaLanguage": "en",
      "wikipediaId": "Seattle",
      "wikipediaUrl": "https://en.wikipedia.org/wiki/Seattle",
      "bingId": "5fbba6b8-85e1-4d41-9444-d9055436e473",
      "type": "Location"
    }, {
      "name": "last week",
      "matches": [{
        "entityTypeScore": 0.8,
        "text": "last week",
        "offset": 34,
        "length": 9
      }],
      "type": "DateTime",
      "subType": "DateRange"
    }]
  }],
  "errors": []
}
```

---

## <a name="summary"></a>Сводка

В этой статье рассматриваются основные понятия и рабочий процесс связывания сущностей в службе Текстовой аналитики Cognitive Services. В разделе "Сводка" сделайте следующее.

* Распознавание сущности доступно для отдельных языков в двух версиях.
* В тексте запроса передаются документы JSON, которые содержат идентификатор, текст и код языка.
* Запросы POST отправляются в одну или несколько конечных точек с использованием персонализированного [ключа доступа и конечной точки,](../../cognitive-services-apis-create-account.md#get-the-keys-for-your-resource) которая действительна для вашей подписки.
* Ответ будет содержать выходные данные, содержащие связанные сущности (включая оценки уверенности, смещения и веб-ссылки для каждого идентификатора документа), которые можно использовать в любом приложении

## <a name="next-steps"></a>Дальнейшие действия

* [Text Analytics overview](../overview.md) (Общие сведения об анализе текста)
* [Использование клиентской библиотеки Анализа текста](../quickstarts/text-analytics-sdk.md)
* [Новые возможности](../whats-new.md)
