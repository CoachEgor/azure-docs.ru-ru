---
title: Настройка Персонализатора
titleSuffix: Azure Cognitive Services
description: Конфигурация сервиса включает в себя то, как сервис рассматривает результаты, как часто он исследует, как часто переобучается модель и сколько данных хранится.
services: cognitive-services
author: diberry
manager: nitinme
ms.service: cognitive-services
ms.subservice: personalizer
ms.topic: conceptual
ms.date: 10/23/2019
ms.author: diberry
ms.openlocfilehash: 4ab1dcf4f3554c941107ec653f717b3680543da2
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73490722"
---
# <a name="configure-personalizer"></a>Настройка Персонализатора

Конфигурация сервиса включает в себя то, как сервис рассматривает результаты, как часто он исследует, как часто переобучается модель и сколько данных хранится.

## <a name="create-personalizer-resource"></a>Создание ресурса Персонализатора

Создайте ресурс Персонализатора для каждого цикла обратной связи. 

1. Войдите на [портал Azure](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesPersonalizer). Предыдущая ссылка ведет на страницу **Создание** Персонализатора. 
1. Введите имя службы, выберите подписку, расположение, ценовую категорию и группу ресурсов.
1. Выберите подтверждение и щелкните **Создать**.

<a name="configure-service-settings-in-the-azure-portal"></a>

## <a name="configure-service-in-the-azure-portal"></a>Настройка службы в портал Azure

1. Войдите на [портал Azure](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesPersonalizer).
1. Найдите нужный ресурс Персонализатора. 
1. В разделе **Управление ресурсами** выберите **Конфигурация**.

    Прежде чем покидать портал Azure, скопируйте один из ключей ресурсов на странице **Ключи**. Он потребуется для использования [пакета SDK Персонализатора](https://docs.microsoft.com/dotnet/api/microsoft.azure.cognitiveservices.personalizer).

<a name="configure-reward-settings-for-the-feedback-loop-based-on-use-case"></a>

### <a name="configure-reward-for-the-feedback-loop-based-on-use-case"></a>Настройка вознаграждений для цикла обратной связи на основе варианта использования

Настройте службу для использования вознаграждения в цикле отзывов. Изменение следующих значений приведет к сбросу текущей модели персонализации и повторному обучению данных за последние два дня:

![Настройка значений наград для цикла обратной связи](media/settings/configure-model-reward-settings.png)

|Значение|Назначение|
|--|--|
|Время ожидания результата|Задает продолжительность времени, во время которого Персонализатор будет собирать результаты значений для вызова ранжирования, начиная с момента, когда вызов ранжирования происходит. Это значение задается с помощью запроса: "сколько времени должно дожидаться персонализации для вызовов вознаграждения?" Любой результат, полученный после этого окна, будет зарегистрирован, но не будет использоваться для обучения.|
|Результат по умолчанию|Если в течение времени ожидания результата, связанного с вызовом ранжирования, Персонализатор не получит результативный вызов, Персонализатор назначит результат по умолчанию. По умолчанию и в большинстве сценариев результат по умолчанию равен нулю.|
|Агрегирование результата|Если за один и тот же вызов API ранжирования получено несколько результатов, используется следующий метод агрегации: **сумма** или **самое раннее**. Самое раннее выбирает самую раннюю полученную оценку и отклоняет остальные. Это полезно, если нужен уникальный результат среди возможно повторяющихся вызовов. |

После изменения этих значений обязательно выберите **сохранить**.

### <a name="configure-exploration"></a>Настройка исследования 

Персонализация может открывать новые шаблоны и, изучая альтернативы, адаптироваться к изменениям поведения пользователей с течением времени. Значение **для просмотра определяет, какой** процент вызовов ранжирования отвечает на исследование. 

Изменение этого значения приведет к сбросу текущей модели персонализации и повторному обучению данных за последние два дня.

![Значение для просмотра определяет, какой процент вызовов ранжирования отвечает на исследование](media/settings/configure-exploration-setting.png)

После изменения этого значения обязательно выберите **сохранить**.

### <a name="model-update-frequency"></a>Частота обновления модели

Последняя модель, обученная с помощью вызовов API вознаграждения из каждого активного события, автоматически не используется в вызове ранжирования Персонализатора. **Частота обновления модели** задает частоту использования модели в обновленном вызове ранжирования. 

Высокая частота обновления модели полезна в ситуациях, когда необходимо внимательно отслеживать изменения в поведении пользователей. Это могут быть сайты с новостями, вирусным содержимым или торговлей в режиме реального времени. В таких сценариях модель можно обновлять каждые 15 минут. В большинстве других случаев целесообразно задать меньшую частоту обновления. Ежеминутное обновление будет полезно при отладке кода приложения с помощью Персонализатора, выполнении демонстраций или интерактивном тестировании аспектов машинного обучения.

![Параметр "Частота обновления модели" задает частоту повторного обучения новой модели Персонализатора.](media/settings/configure-model-update-frequency-settings-15-minutes.png)

После изменения этого значения обязательно выберите **сохранить**.

### <a name="data-retention"></a>Хранение данных

**Период хранения данных** устанавливает, сколько дней Персонализатор хранит журналы данных. Журналы прошлых данных необходимы для выполнения [автономных вычислений](concepts-offline-evaluation.md), которые используются для измерения эффективности Персонализатора и оптимизации политики обучения.

После изменения этого значения обязательно выберите **сохранить**.

## <a name="export-the-personalizer-model"></a>Экспорт модели Персонализатора

В разделе "Управление ресурсами" для **параметров "модель" и "обучение**" Проверьте создание модели и дату последнего обновления и экспортируйте текущую модель. Экспортировать файл модели для архивирования можно с помощью портала Azure или API Персонализатора. 

![Экспорт текущей модели Персонализатора](media/settings/export-current-personalizer-model.png)

## <a name="import-and-export-learning-policy"></a>Импорт и экспорт политики обучения

В разделе Управление ресурсами для **параметров модель и обучение**импортируйте новую политику обучения или экспортируйте текущую политику обучения.
Вы можете получить файлы политики обучения из предыдущих экспортов или загрузить оптимизированные политики, обнаруженные в ходе автономной оценки. Внесение изменений в эти файлы вручную повлияет на производительность машинного обучения и точность автономных вычислений, и корпорация Майкрософт не может подтверждать точность машинного обучения и оценок, а также исключений служб, вызванных изменением политик вручную.

## <a name="clear-data-for-your-learning-loop"></a>Очистка данных для цикла обучения

1. В портал Azure для ресурса персонализации на странице **Параметры модели и обучения** выберите **Очистить данные**.
1. Чтобы очистить все данные и сбросить цикл обучения до исходного состояния, установите флажок все 3 флажка.

    ![В портал Azure очистите данные из ресурса персонализации.](./media/settings/clear-data-from-personalizer-resource.png)

    |Значение|Назначение|
    |--|--|
    |Данные персонализации и вознаграждение зарегистрированы.|Эти данные журнала используются в автономных вычислениях. Очистите данные, если вы переустанавливаете ресурс.|
    |Сбросьте модель персонализации.|Эта модель изменяется при каждом повторном обучении. Эта частота обучения указана в поле **Частота загрузки модели** на странице **Конфигурация** . |
    |Задайте для политики обучения значение по умолчанию.|Если политика обучения была изменена как часть автономной оценки, эта политика будет сброшена к исходной политике обучения.|

1. Выберите **Очистить выбранные данные** , чтобы начать процесс очистки. Состояние отображается в уведомлениях Azure в верхней правой области навигации. 

## <a name="next-steps"></a>Дальнейшие действия


[Подробнее о доступности по регионам](https://azure.microsoft.com/global-infrastructure/services/?products=cognitive-services)
