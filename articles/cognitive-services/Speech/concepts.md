---
title: Основные понятия Распознавания речи Bing | Документация Майкрософт
titlesuffix: Azure Cognitive Services
description: Основные понятия, используемые в службе распознавания речи (Майкрософт).
services: cognitive-services
author: zhouwangzw
manager: wolfma
ms.service: cognitive-services
ms.subservice: bing-speech
ms.topic: article
ms.date: 09/18/2018
ms.author: zhouwang
ROBOTS: NOINDEX,NOFOLLOW
ms.openlocfilehash: 1cbf1514ac5eba4e288ecb78944878217fc5ba3e
ms.sourcegitcommit: 24fd3f9de6c73b01b0cee3bcd587c267898cbbee
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2019
ms.locfileid: "65954524"
---
# <a name="basic-concepts"></a>Основные понятия

[!INCLUDE [Deprecation note](../../../includes/cognitive-services-bing-speech-api-deprecation-note.md)]

На этой странице описаны некоторые основные понятия службы распознавания речи (Майкрософт). Мы рекомендуем ознакомиться с этой страницы перед использованием API распознавания речи (Майкрософт) в своем приложении.

## <a name="understanding-speech-recognition"></a>Основные сведения о распознавания речи

Если вы впервые создаете приложение с речевыми функциями или впервые добавляете к существующему приложению возможности для работы с речью, этот раздел поможет вам начать работу. Если у вас уже есть опыт работы с приложениями с поддержкой речевых функций, вы можете просто пролистать этот раздел или пропустить его полностью в том случае, если вы опытный пользователь и хотите перейти непосредственно к сведениям о протоколе.

### <a name="audio-streams"></a>Аудиопотоки

Основным понятием в службе распознавания речи является *аудиопоток*. В отличие от нажатия клавиши, которое происходит в один момент времени и содержит одну единицу информации, устный запрос занимает несколько сотен миллисекунд и содержит несколько килобайтов информации. Такая длительность устных высказываний создает определенные трудности для разработчиков, стремящихся обеспечить простые и удобные речевые возможности в своем приложении. Современные компьютеры и алгоритмы выполняют транскрибирование речи примерно за половину времени произнесения, поэтому двухсекундное высказывание можно транскрибировать примерно за секунду, но приложение, которое работает с секундной задержкой в обработке запросов пользователя, никак не назовешь простым или удобным.

К счастью, существуют способы "скрывать" время транскрибирования, выполняя его для одной части высказывания, пока пользователь произносит другую. Например путем разделения utterance 1 секунду на 10 блоки по 100 миллисекунд и выполняя расшифровка дикторского текста для каждого фрагмента в свою очередь, более чем 450 всего 500 миллисекунд, необходимых для записи может быть «скрытыми», чтобы пользователь не знает, расшифровка дикторского текста — выполняется, хотя они говорить. Размышляя об этом примере, помните, что служба выполняет транскрибирование предыдущих 100 миллисекунд, пока пользователь говорит следующие 100, поэтому когда пользователь замолкает, для получения результата службе потребуется транскрибировать примерно 100 миллисекунды аудиоданных.

Чтобы обеспечить такое взаимодействие с пользователем, речевую аудиоинформацию собирают в виде фрагментов и транскрибируют пока пользователь разговаривает. Блоки аудиозаписи вместе с *аудиопотоком* и процессом их отправки в службу называются *потоковой передачей аудио*. Аудиопоток является важной частью любого приложения с поддержкой распознавания речи. Настройка размера блока и оптимизация потоковой передачи – вот некоторые из наиболее эффективных способов улучшения работы вашего приложения.

### <a name="microphones"></a>Микрофоны

Люди обрабатывают звук с помощью своих ушей, но в неодушевленном оборудовании используются микрофоны. Чтобы включить работу с речью в любом приложении, необходимо использовать микрофон, который обеспечит аудиопоток для вашего приложения.

API-интерфейсы для микрофона должны позволяют запускать и останавливать прием аудиозаписи с микрофона. Необходимо решить, какие действия пользователя активируют микрофон, чтобы начать прослушивание речи. Активировать работу микрофона можно нажатием кнопки или произнесением *ключевого слова* или *слова пробуждения*, которое будет всегда активировать микрофон, и использовать вывод этого модуля , чтобы начать передачу аудиозаписи в службу распознавания речи Microsoft.

### <a name="end-of-speech"></a>Окончание речи

Момент, *когда* говорящий *прекращает* говорить, кажется очевидным с точки зрения человека, но определение этого момента является довольно сложной проблемой вне лабораторных условий. Недостаточно просто искать чистую тишину после высказывания, так как часто обилие шума в окружающей среде исключают возможность появления тишины. Служба распознавания речи служба распознавания речи Microsoft позволяет быстро обнаружить, что пользователь прекратил говорить, и может сообщить вашему приложению об этом, но это означает, что ваше приложение узнает о том, что вы перестали говорить, последним. Это совсем не похоже на другие формы ввода, когда ваше приложение *первым* узнает, когда начинается *и* заканчивается ввод пользовательских данных.

### <a name="asynchronous-service-responses"></a>Ответы асинхронной службы

Тот факт, что ваше приложение должно быть проинформировано о том, когда ввод пользовательских данных завершен, никак не снижает производительность и не создает трудностей для программирования приложения, но для этого требуется, чтобы вы думали о речевых запросах по-другому, не в рамках шаблонных ввода/ответа, с которыми вы знакомы. Поскольку ваше приложение не будет знать, когда пользователь перестает говорить, оно должно одновременно одновременно продолжать передавать аудиоданные в службу и дожидаясь в то же время ответа от службы. Этот шаблон отличается от других шаблонов запросов и ответов веб-протоколов, таких как HTTP. В этих протоколах, перед получением ответа вы должны передать запрос; в протоколе службы распознавания речи Microsoft вы получаете ответы *в то время, как передаете аудиоданные для запроса*.

> [!NOTE]
> Эта функция не поддерживается при использовании Speech HTTP REST API.

### <a name="turns"></a>Очередность

Речь служит для передачи информации. Когда вы говорите, вы пытаетесь передать информацию, которая находится в вашем распоряжении, тому, кто воспринимает эту информацию. При передаче информации произношение и прослушивание чередуются. Аналогично, ваше приложение с поддержкой речи взаимодействует с пользователями, поочередно слушая и реагируя, хотя обычно оно по большей части занимается прослушиванием. Входные данные пользователя и ответ службы на них называется *очередь*. *Очередь* начинается, когда пользователь говорит, и заканчивается, когда приложение завершает обработку ответа службы речи.

### <a name="telemetry"></a>Телеметрия

Создание приложения или устройства с поддержкой голосовых функций может оказаться сложной задачей даже для опытных разработчиков. Потоковые протоколы на первый взгляд часто кажутся пугающими, а важные сведения, например, обнаружение тишины, могут быть совершенно в новинку. При том количестве сообщений, которые должны быть успешно отправлены и получены для завершения одной пары "запрос – ответ", *очень* важно собрать полные и точные данные об этих сообщениях. Протокол службы служба распознавания речи Microsoft обеспечивает сбор этих данных. Вы должны приложить все усилия для обеспечения макисмальной точности всех необходимых данных. Предоставляя полные и точные данные, вы будете помогать сами себе – если вам понадобится помощь от команды службы распознавания речи Microsoft в устранении неполадок с вашей клиентской реализацией, качество собранных вами данных телеметрии будет иметь решающее значение для анализа проблем.

> [!NOTE]
> Эта функция не поддерживается при использовании распознавания речи HTTP REST API.

### <a name="speech-application-states"></a>Состояния приложений для работы с речью

Шаги, которые вы предпринимаете для активации речевого ввода в вашем приложении, немного отличаются от шагов для других форм ввода, таких как щелчки мыши или нажатия пальцем. Вы должны следить за тем, когда приложение прослушивает микрофон и отправляет данные в речевую службу, когда ожидает ответа от службы, и когда оно находится в состоянии ожидания. Связь между этими состояниями показана на диаграмме ниже.

![Диаграмма состояния приложений для работы с речью](Images/speech-application-state-diagram.png)

Поскольку служба распознавания речи Microsoft имеет несколько состояний, то протокол службы определяет сообщения, которые помогают вашему приложению переходить между состояниями. Приложению нужно обработать эти сообщения протокола и отреагировать на них, чтобы активировать отслеживание и управление состояниями приложений для работы с голосом.

## <a name="using-the-speech-recognition-service-from-your-apps"></a>Использование службы распознавания речи в приложении

Службой распознавания речи Microsoft предусмотрено два способа добавления разработчиками распознавания речи в свои приложения.

- [REST API](GetStarted/GetStartedREST.md). разработчики могут использовать HTTP-вызовы из своих приложений к службам распознавания речи.
- [Клиентские библиотеки](GetStarted/GetStartedClientLibraries.md). Для расширения возможностей разработчики могут скачать клиентские библиотеки Microsoft Speech и внедрить их в свои приложения.  Клиентские библиотеки доступны на разных платформах (Windows, Android, iOS) с использованием разных языков (C#, Java, JavaScript, ObjectiveC).

| Варианты использования | [Интерфейсы REST API](GetStarted/GetStartedREST.md) | [Клиентские библиотеки](GetStarted/GetStartedClientLibraries.md) |
|-----|-----|-----|
| Преобразование коротких аудиозаписей, например, команды (длина аудио <15 с) без промежуточных результатов | Да | Да |
| Преобразование длинных аудиозаписей (>15 с) | Нет | Да |
| Аудиопоток с желаемыми промежуточными результатами | Нет | Да |
| Преобразование аудиозаписи в текст с помощью LUIS | Нет | Да |

 Если в вашем языке или платформе еще нет пакета SDK, вы можете создать свою собственную реализацию на основе [документации к протоколу](API-Reference-REST/websocketprotocol.md).

## <a name="recognition-modes"></a>Режимы распознавания

Существуют три режима распознавания: `interactive`, `conversation` и `dictation`. Режим распознавания корректирует распознавание речи в зависимости от того, как пользователи разговаривают. Выберите соответствующий режим распознавания для своего приложения.

> [!NOTE]
> Режимы распознавания могут иметь разные характеристики в протоколе REST и похожие в протоколе WebSocket. Например, REST API не поддерживает непрерывное распознавание даже в режиме диалога или диктовки.
> [!NOTE]
> Эти режимы применяются при использовании непосредственно протокола REST или WebSocket. [Клиентские библиотеки](GetStarted/GetStartedClientLibraries.md) используют разные параметры для указания режима распознавания. Дополнительные сведения см. в документации к нужной клиентской библиотеке.

Служба распознавания речи Microsoft возвращает только один результат распознавания фразы в всех режимах распознавания. Для любой фразы существует ограничение в 15 секунд.

### <a name="interactive-mode"></a>Интерактивный режим

В режиме `interactive` пользователь делает короткие запросы и ожидает на ответное действие приложения.

Для приложений в интерактивном режиме типичны следующие характеристики:

- Пользователи знают, что они разговаривают с машиной, а не другим человеком.
- Пользователи приложения заранее знают, что они хотят сказать, в зависимости от того, что им нужно от приложения.
- Фразы обычно имеют продолжительность 2–3 секунды.

### <a name="conversation-mode"></a>Режим беседы

В режиме `conversation` пользователи участвуют в разговоре с другими людьми.

Для приложений в режиме беседы типичны следующие характеристики.

- Пользователи знают, что они разговаривают с человеком.
- Распознавание речи улучшает общение между людьми, позволяя одному или обоим участникам видеть текст, который произносится.
- Пользователи не всегда планируют, что они будут говорить.
- Пользователи часто используют сленг и другие неформальные высказывания.

### <a name="dictation-mode"></a>Режим диктовки

В режиме `dictation` высказывания пользователей занимают больше времени для дальнейшей обработки приложением.

Для приложений в режиме диктовки типичны следующие характеристики.

- Пользователи знают, что они разговаривают с машиной.
- Пользователям показывают текстовые результаты распознавания речи.
- Пользователи часто планируют, что сказать, и используют более формальный язык.
- Пользователи используют полные предложения продолжительностью 5–8 секунд.

> [!NOTE]
> В режимах диктовки и диалога служба распознавания речи Microsoft не возвращает частичные результаты. Вместо этого служба возвращает стабильные результирующие фразы после появления в аудиопотоке границ молчания. Корпорация Майкрософт может улучшить протокол речи для повышения удобства работы пользователей в режимах непрерывного распознавания речи.

## <a name="recognition-languages"></a>Языки распознавания

*Язык распознавания* задает язык, на котором говорит пользователь приложения. Укажите *язык распознавания* с параметра URL-адреса запроса *языка* при соединении. Значение параметра запроса *язык* задается тегом языка IETF [BCP 47](https://en.wikipedia.org/wiki/IETF_language_tag) и **должно быть** одним из языков, поддерживаемых API распознавания речи. Полный список языков, поддерживаемых службой распознавания речи, можно найти на странице [Поддерживаемые языки](API-Reference-REST/supportedlanguages.md).

Служба распознавания речи Microsoft отклоняет недопустимые запросы соединения, отображая ответ `HTTP 400 Bad Request`. Примеры недопустимых запросов:

- Значение параметра запроса*язык* отсутствует.
- Неправильно отформатирован параметр запроса *язык*.
- Параметр запроса *язык* содержит неподдерживаемый язык.

Вы можете создать приложение, поддерживающее один или все языки, поддерживаемые службой.

### <a name="example"></a>Пример

В следующем примере приложение использует режим распознавания речи *Диалог* для носителя американского английского.

```HTTP
https://speech.platform.bing.com/speech/recognition/conversation/cognitiveservices/v1?language=en-US
```

## <a name="transcription-responses"></a>Ответы транскрибирования

Ответы транскрибирования возвращают клиентам текст, преобразованный из аудиозаписи. Результат транскрибирования содержит следующие поля:

- `RecognitionStatus` указывает состояние распознавания. В таблице ниже приведены возможные значения.

| Status | ОПИСАНИЕ |
| ------------- | ---------------- |
| Успешно | Распознавание успешно завершено; присутствует поле DisplayText (отображаемый текст) |
| NoMatch | В аудиопотоке был обнаружена речь, но не были сопоставлены слова в целевом языке. Дополнительные сведения см. в документации для  [NoMatch Recognition Status(#nomatch-recognition-status)  |
| InitialSilenceTimeout | Начало аудиопотока содержало только тишину и время ожидания на появление речи в службе истекло |
| BabbleTimeout | Начало аудиопотока содержало только шум и время ожидания на появление речи в службе истекло |
| Ошибка | Служба распознавания обнаружила внутреннюю ошибку и не может продолжить работу |

- `DisplayText` представляет распознанную фразу после капитализации, пунктуации и обратной нормализации текста, а ненормативная лексика скрыта звездочками. Поле DisplayText (отображаемый текст) присутствует *только* если поле `RecognitionStatus` содержит значение `Success`.

- `Offset` указывает смещение (по 100 нс), когда фраза была распознана относительно начала аудиопотока.

- `Duration` указывает продолжительность (по 100 нс) этой произнесенной фразы.

При необходимости ответ транскрибирования возвращает дополнительную информацию. Для возврата более подробных выходных данных см.[выходной формат](#output-format).

Служба распознавания речи Microsoft поддерживает дополнительный процесс транскрибирования, который предусматривает добавление капитализации и пунктуации, скрытие ненормативной лексики и нормализацию текста к общим формам. Например, если пользователь произносит фразу "Напомни мне купить шесть айфонов", служба распознавания речи Microsoft вернет транскрибированный текст "Напомни мне купить 6 айфонов". Процесс, который преобразует слово "шесть" в число "6" называется *Обратная нормализация текста* (сокращенно – *ITN*).

### <a name="nomatch-recognition-status"></a>Состояние распознавания NoMatch

Ответ транскрибирования возвращает `NoMatch` в `RecognitionStatus`, когда служба распознавания речи Microsoft обнаруживает речь в аудиопотоке, но не может сопоставить эту речь с грамматикой языка, используемого для запроса. Например, условие *NoMatch* может возникнуть, если пользователь говорит что-то по-немецки, когда распознаватель ожидает, что будет использоваться американский английский язык. Акустический шаблон фразы указывает на присутствие человеческой речи, но ни одно из произнесенных слов не соответствует лексикону американского английского, используемого распознавателем.

Другое условие *NoMatch* возникает, когда алгоритм распознавания не может найти точного соответствия звукам, содержащимся в аудиопотоке. Когда это условие произойдет, служба распознавания речи Microsoft может передать сообщения *speech.hypothesis*, содержащие *гипотетический текст*, но будет вызывать сообщение *speech.phrase*, в котором указан *статус распознавания* *NoMatch*. Это нормальная ситуация – вам не нужно делать каких-либо предположений относительно точности или верности текста в сообщении *speech.hypothesis* . Кроме того, вы не должны предполагать, что, поскольку служба распознавания речи Microsoft выдает сообщение *speech.hypothesis*, она может передать сообщение *speech.phrase* со *статусом распознавания* *Success*.

## <a name="output-format"></a>Формат выходных данных

Служба распознавания речи Microsoft может превращать различные форматы полезных данных в ответы транскрибирования. Все полезные данные — структуры JSON.

Вы можете управлять форматом результата фразы, указав параметр URL-запроса `format`. По умолчанию служба возвращает результаты `simple`.

| Формат | Описание |
|-----|-----|
| `simple` | Упрощенный результат фразы содержит состояние распознавания и распознанный текст в форме отображения. |
| `detailed` | Статус распознавания и N лучших результатов распознавания фразы, где каждый результат содержит все четыре формы распознавания и оценку достоверности. |

Формат `detailed` содержит в ответе [N лучших значений](#n-best-values) наряду с `RecognitionStatus`, `Offset` и `duration`.

### <a name="n-best-values"></a>N лучших значений

Слушатели, не важно человек или компьютер, не могут наверняка знать, что они *точно* слышали то, что кто-то произнес. Конкретной интерпретации высказывания слушатель может присвоить только *вероятность*.

В обычных условиях, в разговоре с другими людьми, с которыми они часто взаимодействуют, люди имеют высокую вероятность распознавания произнесенных слов. Машинные распознаватели речи стремятся достичь аналогичных уровней точности и, при правильных условиях, [могут посоревноваться с людьми](https://blogs.microsoft.com/next/2016/10/18/historic-achievement-microsoft-researchers-reach-human-parity-conversational-speech-recognition/#sm.001ykosqs14zte8qyxj2k9o28oz5v).

Алгоритмы, которые используются при распознавании реч,и исследуют альтернативные интерпретации высказывания в рамках обычной обработки. Обычно эти альтернативы отбрасываются, поскольку доказательства в пользу единственной интерпретации становятся подавляющими. Однако в менее оптимальных условиях распознаватель речи заканчивает роботу списком альтернативных возможностей интерпретации. Лучшие *N* вариантов в этом списке называются *Списком N лучших*. Каждому варианту присваивается [оценка достоверности](#confidence). Оценка достоверности колеблется в диапазоне от 0 до 1. Оценка 1 представляет самый высокий уровень достоверности. Оценка 0 представляет собой самый низкий уровень достоверности.

> [!NOTE]
> Число записей в списке N лучших для разных фраз различается. Число записей может изменяться даже для нескольких распознаваний одного и *того же* высказывания. Этот вариант является естественным и ожидаемым результатом вероятностного характера алгоритма распознавания речи.

Каждая запись, возвращаемая в список N лучших, содержит

- `Confidence`, который представляет [оценки достоверности](#confidence) этой записи.
- `Lexical`, который является [лексической формой](#lexical-form) распознанного текста.
- `ITN`, который является [формой ITN](#itn-form) распознанного текста.
- `MaskedITN`, который является [скрытой формой ITN](#masked-itn-form) распознанного текста.
- `Display`, который является [формой отображения](#display-form) распознанного текста.

### Оценки достоверности <a id="confidence"></a>

Оценки достоверности являются неотъемлемой частью системы распознавания речи. Служба служба распознавания речи Microsoft получает оценки достоверности из *классификатора достоверности*. Microsoft обучает классификатор достоверности с набором функций, которые предназначены для максимального различения правильного и неправильного распознавания. Оценка достоверности вычисляется как для отдельных слов, так и всей фразы.

Если вы решили использовать оценки достоверности, которые возвращает служба, следует учитывать перечисленные ниже следующие.

- Оценки достоверности можно сравнивать только в одном и том же режиме распознавания и языке. Не сравнивайте оценки в разных языках и различных режимах распознавания. Например, оценка достоверности в режиме интерактивного распознавания *не* коррелирует с оценкой достоверности в режиме диктовки.
- Оценки достоверности лучше использовать для ограниченного набора высказываний. Естественно, для большого набора высказываний оценки могут сильно разниться.

Если вы решите использовать значение оценки достоверности как *порог*, на котором действует ваше приложение, используйте распознавание речи, чтобы установить пороговые значения.

- Выполните распознавание речи на примере высказываний в своем приложении.
- Соберите оценки достоверности для каждого распознавания фраз из набора образцов.
- Создайте свое пороговое значение на основе процентиля достоверности для этого образца.

Ни одно пороговое значение не подходит для всех приложений сразу. Приемлемая оценка достоверности для одного приложения может быть неприемлемой для другого.

### <a name="lexical-form"></a>лексическая форма

Лексическая форма – признанный текст, который отражает все точно так, как это происходило во время  высказывания: без пунктуации или капитализации. Например, лексическая форма адреса "1020 Enterprise Way" была бы *десять двадцать энтерпрайз вей*, предполагая, что это было сказано именно так. Лексическая форма предложения "Напомни, чтобы я купил 5 карандашей" – *напомни, чтобы я купил пять карандашей*.

Лексическая форма лучше всего подходит для приложений, которым нужно выполнять нестандартную нормализацию текста. Кроме того, лексическая форма также подходит для приложений, требующих необработанного распознавания слов.

В лексической форме ненормативная лексика никогда не скрыта.

### <a name="itn-form"></a>Форма ITN

Нормализация текста — это процесс преобразования текста из одной формы в другую, "каноническую", форму. Например, номер телефона "555-1212" можно преобразовать в каноническую форму *пять пять пять один два один два*. *Обратная* нормализация текста (ITN) отменяет этот процесс, преобразуя слова "пять пять пять один два один два" в обратную каноническую форму *555-1212*. Форма ITN результата распознавания не содержит регистра символов и знаки препинания.

Форма ITN лучше всего подходит для приложений, которые работают с распознанным текстом. Например, приложение, которое позволяет пользователю произносить условия поиска, а затем использует их в веб-запросе, будет использовать форму ITN. В форме ITN ненормативная лексика никогда не скрыта. Чтобы скрыть ненормативную лексику, используйте *Скрытую форму ITN*.

### <a name="masked-itn-form"></a>Скрытая форма ITN

Поскольку ненормативная лексика, разумеется, является частью разговорного языка, служба распознавания речи Microsoft распознает такие слова и фразы, когда их говорят. Однако, ненормативная лексика не может быть применима ко всем приложениям, особенно к приложениям с ограниченной, невзрослой аудиторией пользователей.

Скрытая форма ITN применяет скрытие ненормативной лексики к форме нормализации обратного текста. Чтобы скрыть ненормативную лексику, задайте значение параметра запроса `masked`. При скрытии ненормативной лексики слова, распознаваемые как часть ненормативной лексики, заменяются звездочками. Например: *Напомни, чтобы я купил 5 \*\*\*\* карандашей*. Скрытая форма ITN распознавания результата не содержит регистра символов и знаки препинания.

> [!NOTE]
> Если значение параметра запроса ненормативной лексики – `raw`, то скрытая форма ITN совпадает со значением формы ITN. Ненормативная лексика *не* скрыта.

### <a name="display-form"></a>Форма отображения

Пунктуация и капитализация указывают, куда поместить ударение, сделать паузу и т. д., что облегчает понимание текста. Форма отображения добавляет к результатам распознавания пунктуацию и регистр, делая ее наиболее подходящей формой для приложений, отображающих произнесенную речь.

Поскольку форма просмотра расширяет скрытую форму ITN, можно настроить значение параметра ненормативной лексики на `masked` или `raw`. Если значение равно `raw`, результаты распознавания включают всю ненормативную лексику, которую произносит пользователь. Если значение равно `masked`, то слова, распознаваемые как часть ненормативной лексики, заменяются звездочками.

### <a name="sample-responses"></a>Образцы ответов

Все полезные данные — структуры JSON.

Формат полезных данных результата фразы `simple`:

```json
{
  "RecognitionStatus": "Success",
  "DisplayText": "Remind me to buy 5 pencils.",
  "Offset": "1236645672289",
  "Duration": "1236645672289"
}
```

Формат полезных данных результата фразы `detailed`:

```json
{
  "RecognitionStatus": "Success",
  "Offset": "1236645672289",
  "Duration": "1236645672289",
  "NBest": [
      {
        "Confidence" : "0.87",
        "Lexical" : "remind me to buy five pencils",
        "ITN" : "remind me to buy 5 pencils",
        "MaskedITN" : "remind me to buy 5 pencils",
        "Display" : "Remind me to buy 5 pencils.",
      },
      {
        "Confidence" : "0.54",
        "Lexical" : "rewind me to buy five pencils",
        "ITN" : "rewind me to buy 5 pencils",
        "MaskedITN" : "rewind me to buy 5 pencils",
        "Display" : "Rewind me to buy 5 pencils.",
      }
  ]
}
```

## <a name="profanity-handling-in-speech-recognition"></a>Обработка ненормативной лексики при распознавании речи

Служба распознавания речи Microsoft распознает все формы человеческой речи, включая слова и фразы, которые многие люди классифицируют как "ненормативную лексику". Обработкой ненормативной лексики в службе можно управлять с помощью параметра запроса *ненормативная лексика*. Служба маскирует ненормативную лексику в *speech.phrase* по умолчанию, и не возвращает сообщения *speech.hypothesis*, содержащие ненормативную лексику.

| Значение параметра *ненормативная лексика* | Описание |
| - | - |
| `masked` | Скрывает ненормативную лексику звездочками. Поведение по умолчанию. |
| `removed` | Удаляет ненормативную лексику из всех результатов. |
| `raw` | Распознает и возвращает ненормативную лексику во всех результатах. |

### <a name="profanity-value-masked"></a>Значение ненормативной лексики `Masked`

Чтобы скрыть ненормативную лексику, установите для параметра запроса *ненормативная лексика* значение *скрыто*. Когда для параметра запроса *ненормативная лексика* установлено это значение или параметр не указан для запроса, служба *скрывает* ненормативную лексику. Служба скрывает ненормативную лексику, заменив ее звездочками в результате распознавания. Если задано скрытие ненормативной лексики, служба не возвращает сообщений *speech.hypothesis*, содержащих ненормативную лексику.

### <a name="profanity-value-removed"></a>Значение ненормативной лексики `Removed`

Когда параметр запроса *ненормативная лексика* имеет значение *удалено*, служба удаляет ненормативную лексику как из сообщений *speech.phrase*, так и из *speech.hypothesis*. Результаты будут такими же, *как если бы ненормативная лексика отсутствовала*.

#### <a name="profanity-only-utterances"></a>Полностью ненормативная речь

Если приложение настроено на удаление ненормативной лексики, возможна ситуация, когда пользователь употребляет *только* ненормативную лексику. В этом случае, если задан режим распознавания *диктовка* или *диалог*, служба возвращает *speech.result*. Если режим распознавания *интерактивный*, служба возвращает *speech.result* и код состояния *NoMatch*.

### <a name="profanity-value-raw"></a>Значение ненормативной лексики `Raw`

Когда параметр запроса *ненормативная лексика* имеет значение *необработанное*, служба удаляет или скрывает ненормативную лексику из сообщений *speech.phrase* или из *speech.hypothesis*.
