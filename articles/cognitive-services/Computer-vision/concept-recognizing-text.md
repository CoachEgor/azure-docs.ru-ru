---
title: Оптическое распознавание символов (OCR) — Компьютерное зрение
titleSuffix: Azure Cognitive Services
description: Основные понятия, связанные с оптическим распознаванием символов (OCR) изображений и документов с печатным и рукописным текстом с помощью API компьютерного зрения.
services: cognitive-services
author: PatrickFarley
manager: nitinme
ms.service: cognitive-services
ms.subservice: computer-vision
ms.topic: conceptual
ms.date: 08/11/2020
ms.author: pafarley
ms.custom: seodec18, devx-track-csharp
ms.openlocfilehash: ac3edc466d640fdb98fd38ba59938aa13fe00f73
ms.sourcegitcommit: b4880683d23f5c91e9901eac22ea31f50a0f116f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/11/2020
ms.locfileid: "94489154"
---
# <a name="optical-character-recognition-ocr"></a>Оптическое распознавание текста (OCR)

API компьютерного зрения Azure включает возможности оптического распознавания символов (OCR), которые извлекают печатный или рукописный текст из изображений. Вы можете извлекать текст из изображений, таких как фотографии печатных форм или контейнеров с серийными номерами, а также из документов — счетов, ведомостей, финансовых отчетов, статей и т. д.

## <a name="read-api"></a>API чтения 

Компьютерное зрение [Read API](https://westcentralus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-1-ga/operations/5d986960601faab4bf452005) — это новейшая технология оптического распознавания[содержимого Azure (Узнайте о новых возможностях](./whats-new.md)), которая извлекает печатный текст (на нескольких языках), рукописный текст (только на английском языке), цифры и символы валют из изображений и многостраничных PDF-документов. Он оптимизирован для извлечения текста из изображений с большим объемом текста и многостраничных PDF-документов со смешанными языками. Он поддерживает обнаружение печатного и рукописного текста в одном изображении или документе.

![Как OCR преобразует изображения и документы в структурированный вывод с извлеченным текстом](./Images/how-ocr-works.svg)

## <a name="input-requirements"></a>Требования к входным данным
При вызове **Read** в качестве входных данных используются изображения и документы. Они имеют следующие требования.

* Поддерживаемые форматы файлов: JPEG, PNG, BMP, PDF и TIFF
* Для файлов PDF и TIFF, обрабатываются до 2000 страниц (только первые две страницы для уровня Free).
* Размер файла должен быть менее 50 МБ (4 МБ для уровня Free) и размер измерений не менее 50 x 50 пикселей и не более 10000 x 10000 пикселей. 
* Размеры PDF-файла должны составлять не более 17 x 17 дюймов, соответствующих юридическим или стандартным размерам бумаги и меньшему размеру.

### <a name="read-32-preview-allows-selecting-pages"></a>Чтение 3,2 Preview позволяет выбрать страницы
С помощью [API предварительного просмотра Read 3,2](https://westus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-2-preview-1/operations/5d986960601faab4bf452005)для больших многостраничных документов можно указать конкретные номера страниц или диапазоны страниц в качестве входного параметра для извлечения текста только из этих страниц. Это новый входной параметр в дополнение к необязательному параметру языка.

> [!NOTE]
> **Языковой ввод** 
>
> В [вызове Read](https://westcentralus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-1-ga/operations/5d986960601faab4bf452005) имеется необязательный параметр запроса для языка. Это код языка BCP-47 для текста в документе. Чтение поддерживает автоматическую идентификацию языков и многоязычные документы, поэтому следует только указать код языка, если хотите, чтобы документ обрабатывался как конкретный язык.

## <a name="the-read-call"></a>Вызов Read

При [вызове Read](https://westcentralus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-1-ga/operations/5d986960601faab4bf452005) API чтения в качестве входных данных принимается изображение или документ PDF, а текст извлекается асинхронно. Вызов возвращает с помощью поля заголовка ответа с именем `Operation-Location` . `Operation-Location`Значение — это URL-адрес, СОДЕРЖАЩИЙ идентификатор операции, который будет использоваться на следующем шаге.

|Заголовок ответа| URL-адрес результата |
|:-----|:----|
|Operation-Location | `https://cognitiveservice/vision/v3.1/read/analyzeResults/49a36324-fc4b-4387-aa06-090cfbf0064f` |

> [!NOTE]
> **Выставление счетов** 
>
> Страница [цен на компьютерное зрение](https://azure.microsoft.com/pricing/details/cognitive-services/computer-vision/) включает ценовую категорию для чтения. Каждое проанализированное изображение или страница является одной транзакцией. При вызове операции с документом PDF или TIFF, содержащим 100 страниц, операция чтения будет считаться 100ом транзакций, а плата будет взиматься за 100 транзакций. Если было выполнено 50 вызовов операции и каждый вызов отправлял документ с 100 страниц, вам будет выставлен счет за 50 X 100 = 5000 транзакций.

## <a name="the-get-read-results-call"></a>Вызов получения результатов чтения

Второй шаг — вызов операции [получения результатов чтения](https://westcentralus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-1-ga/operations/5d9869604be85dee480c8750) . Эта операция принимает в качестве входных данных идентификатор операции, созданный операцией чтения. Он возвращает ответ JSON, содержащий поле **состояния** со следующими возможными значениями. Эта операция вызывается итеративно, пока она не вернется со значением, которое было **выполнено** . Используйте интервал от 1 до 2 секунд, чтобы избежать превышения скорости запросов в секунду (RPS).

|Поле| Тип | Возможные значения |
|:-----|:----:|:----|
|status | строка | notStarted: операция не запущена. |
| |  | выполняется: операция обрабатывается. |
| |  | Сбой: сбой операции. |
| |  | успешно: операция выполнена успешно. |

> [!NOTE]
> Уровень Free ограничивает частоту запросов до 20 вызовов в минуту. Платный уровень допускает 10 запросов в секунду (RP), которые можно увеличить при запросе. Используйте канал поддержки Azure или группу учетных записей, чтобы запросить более высокий уровень запросов в секунду (RPS).

Если поле **Status** имеет значение **успех** , ответ JSON содержит извлеченное текстовое содержимое из изображения или документа. Ответ JSON поддерживает первоначальные группы строк распознанных слов. Он включает извлеченные текстовые строки и координаты ограничивающих прямоугольников. Каждая строка текста включает все извлеченные слова с их координатами и рейтингами достоверности.

> [!NOTE]
> Данные, передаваемые в `Read` операцию, временно шифруются и хранятся в неактивных и удаляются в течение 48 часов. Это позволяет приложениям извлекать извлеченный текст как часть ответа службы.

## <a name="sample-json-output"></a>Пример выходных данных JSON

См. Следующий пример успешного ответа JSON:

```json
{
  "status": "succeeded",
  "createdDateTime": "2020-05-28T05:13:21Z",
  "lastUpdatedDateTime": "2020-05-28T05:13:22Z",
  "analyzeResult": {
    "version": "3.1.0",
    "readResults": [
      {
        "page": 1,
        "angle": 0.8551,
        "width": 2661,
        "height": 1901,
        "unit": "pixel",
        "lines": [
          {
            "boundingBox": [
              67,
              646,
              2582,
              713,
              2580,
              876,
              67,
              821
            ],
            "text": "The quick brown fox jumps",
            "words": [
              {
                "boundingBox": [
                  143,
                  650,
                  435,
                  661,
                  436,
                  823,
                  144,
                  824
                ],
                "text": "The",
                "confidence": 0.958
              }
            ]
          }
        ]
      }
    ]
  }
}
```
### <a name="read-32-preview-adds-text-line-style-latin-languages-only"></a>Чтение предварительной версии 3,2. добавляет стиль линии текста (только для латинских языков)
[API Read 3,2 Preview](https://westus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-2-preview-1/operations/5d986960601faab4bf452005) выводит объект **внешнего вида** , классифицирующий, является ли каждая строка текста печатью или стилем рукописного ввода, а также показателем достоверности. Эта функция поддерживается только для латинских языков.

Приступая к работе с [компьютерное зрение ознакомиться с краткими](./quickstarts-sdk/client-library.md) руководствами и [краткими руководствами по чтению REST API](./QuickStarts/CSharp-hand-text.md) , чтобы приступить к интеграции возможностей OCR в приложения.

## <a name="supported-languages-for-print-text"></a>Поддерживаемые языки для печати текста
[API чтения](https://westcentralus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-1-ga/operations/5d986960601faab4bf452005) поддерживает извлечение печатного текста на английском, испанском, немецком, французском, итальянском, португальском и нидерландском языках.

Полный список языков, поддерживаемых OCR, см. на странице [Поддерживаемые языки](https://docs.microsoft.com/azure/cognitive-services/computer-vision/language-support#optical-character-recognition-ocr) .

### <a name="read-32-preview-adds-simplified-chinese-and-japanese"></a>Чтение 3,2 Preview добавляет упрощенный китайский и японский языки
В [общедоступной предварительной версии API Read 3,2](https://westus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-2-preview-1/operations/5d986960601faab4bf452005) добавлена поддержка упрощенного китайского и японского языков. Если для вашего сценария требуется поддержка большего числа языков, см. раздел [API OCR](#ocr-api) . 

## <a name="supported-languages-for-handwritten-text"></a>Поддерживаемые языки для рукописного текста
В настоящее время операция чтения поддерживает извлечение рукописного текста исключительно на английском языке.

## <a name="use-the-rest-api-and-sdk"></a>Использование REST API и пакета SDK
[REST API "Read 3. x](./QuickStarts/CSharp-hand-text.md) " является предпочтительным вариантом для большинства клиентов из-за простоты интеграции и высокой продуктивности работы. Azure и служба Компьютерное зрение выполняют масштабирование, производительность, безопасность данных и соответствие требованиям, когда вы Сосредоточьтесь на соответствии потребностям ваших клиентов.

## <a name="deploy-on-premise-with-docker-containers"></a>Развертывание в локальной среде с помощью контейнеров DOCKER
Функция [Read DOCKER Container (Предварительная версия)](https://docs.microsoft.com/azure/cognitive-services/computer-vision/computer-vision-how-to-install-containers) позволяет развертывать новые возможности OCR в локальной среде. Контейнеры соответствуют конкретным требованиям к безопасности и управлению данными.

## <a name="example-outputs"></a>Примеры выходных данных

### <a name="text-from-images"></a>Текст из изображений

Следующие выходные данные API чтения показывают извлеченный текст из изображения с различными угловыми углами, цветами и шрифтами.

![Изображение нескольких слов с различными цветами и углами, в списке извлеченного текста](./Images/text-from-images-example.png)

### <a name="text-from-documents"></a>Текст из документов

API чтения также может принимать PDF-документы в качестве входных данных.

![Документ счета с извлеченным текстом в списке](./Images/text-from-pdf-example.png)

### <a name="handwritten-text"></a>Рукописный текст

Операция чтения извлекает рукописный текст из изображений (в настоящее время только на английском языке).

![Изображение рукописной заметки с извлеченным текстом](./Images/handwritten-example.png)

### <a name="printed-text"></a>Печатный текст

Операция чтения может извлекать напечатанный текст на нескольких разных языках.

![Изображение испанской учебника с извлеченным текстом](./Images/supported-languages-example.png)

### <a name="mixed-language-documents"></a>Документы на разных языках

API чтения поддерживает изображения и документы, содержащие несколько разных языков, которые обычно называются документами на разных языках. Она работает путем классификации каждой строки текста документа на обнаруженном языке перед извлечением текстового содержимого.

![Изображение фраз на нескольких языках с включенным извлеченным текстом](./Images/mixed-language-example.png)

## <a name="ocr-api"></a>API OCR

[API OCR](https://westus.dev.cognitive.microsoft.com/docs/services/5adf991815e1060e6355ad44/operations/56f91f2e778daf14a499e1fc) использует старую модель распознавания, поддерживает только изображения и выполняется синхронно, возвращая немедленно с обнаруженным текстом. См. [языки, поддерживаемые OCR](https://docs.microsoft.com/azure/cognitive-services/computer-vision/language-support#optical-character-recognition-ocr) , и API чтения.

## <a name="data-privacy-and-security"></a>Конфиденциальность и безопасность данных

Как и в случае со всеми переданными службами, разработчики, использующие службы чтения и распознавания текста, должны знать о политиках Майкрософт в отношении данных клиентов. Дополнительные сведения см. на странице Cognitive Services в [центре управления безопасностью Майкрософт](https://www.microsoft.com/trust-center/product-overview) .

> [!NOTE]
> Операции Рекогнизетекст Computer Висон 2,0 в данный процесс являются нерекомендуемыми в пользу нового API для чтения, рассмотренного в этой статье. Существующие клиенты должны [Перейти на использование операций чтения](upgrade-api-versions.md).

## <a name="next-steps"></a>Следующие шаги

- Приступая к работе с [краткими руководствами по компьютерное зрение Read SDK](./quickstarts-sdk/client-library.md) на C#, Java, JavaScript или Python.
- Используйте [краткие руководства по чтению REST API](./QuickStarts/CSharp-hand-text.md) в C#, Java, JavaScript или Python, чтобы узнать, как использовать интерфейсы API.
- Дополнительные сведения о [REST API чтения](https://westcentralus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-1-ga/operations/5d986960601faab4bf452005).
- Дополнительные сведения о [REST API общедоступной предварительной версии 3,2](https://westus.dev.cognitive.microsoft.com/docs/services/computer-vision-v3-2-preview-1/operations/5d986960601faab4bf452005) с поддержкой упрощенного китайского и японского языков.
