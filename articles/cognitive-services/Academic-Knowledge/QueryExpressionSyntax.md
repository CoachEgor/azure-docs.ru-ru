---
title: Синтаксис выражения запроса (Academic Knowledge API)
titlesuffix: Azure Cognitive Services
description: Дополнительные сведения об использовании синтаксиса выражения запроса в Academic Knowledge API.
services: cognitive-services
author: alch-msft
manager: nitinme
ms.service: cognitive-services
ms.subservice: academic-knowledge
ms.topic: conceptual
ms.date: 03/27/2017
ms.author: alch
ROBOTS: NOINDEX
ms.openlocfilehash: 3b87e04c2d6380a0ee4157e73db0cd4057fadee1
ms.sourcegitcommit: ad9120a73d5072aac478f33b4dad47bf63aa1aaa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/01/2019
ms.locfileid: "68704927"
---
# <a name="query-expression-syntax"></a>Синтаксис выражений запросов

Мы видели, что ответ на запрос **interpret** содержит выражение запроса. Грамматика, интерпретирующая запрос пользователя, формирует выражение запроса для каждой операции интерпретации. Затем это выражение запроса можно использовать для выдачи запроса **evaluate** для получения результатов поиска сущности.

Можно также создавать собственные выражения запросов и использовать их в запросе на **evaluate**. Это может быть удобно при создании собственного пользовательского интерфейса, который создает выражение запроса в ответ на действия пользователя. Для этого необходимо знать синтаксис выражений запросов.  

Каждый атрибут сущности, который может быть добавлен в выражение запроса, имеет определенный тип данных и допустимый набор операторов запроса. Набор атрибутов сущностей и поддерживаемые ими операторы указаны в разделе [Entity Attributes](EntityAttributes.md) (Атрибуты сущностей). Атрибуты, указываемые в запросах с одним значением, должны поддерживать операцию *Equals*. Атрибуты, указываемые в запросах префикса, должны поддерживать операцию *StartsWith*. Атрибуты, указываемые в запросах числовых диапазонов, должны поддерживать операцию *IsBetween*.

Некоторые данные сущности хранятся в виде составных атрибутов. Имена таких атрибутов обозначаются точкой ".". Например, сведения об авторе и принадлежности представлены в виде составного атрибута. Он содержит 4 компонента: AuN, AuId, AfN, AfId. Эти компоненты представляют собой отдельные фрагменты данных, которые формируют значение одного атрибута сущности.


**Строковый атрибут: одно значение** (включает совпадения с синонимами)  
Ti='indexing by latent semantic analysis'  
Composite(AA.AuN='sue dumais')

**Строковый атрибут: точное одно значение** (соответствует только каноническими значениям)  
Ti=='indexing by latent semantic analysis'  
Composite(AA.AuN=='susan t dumais')
     
**Строковый атрибут: значение префикса**   
Ti='indexing by latent seman'...  
Composite(AA.AuN='sue du'...)

**Числовой атрибут: отдельное значение**  
Y=2010
 
**Числовой атрибут: значение диапазона**  
Y>2005  
Y>=2005  
Y<2010  
Y<=2010  
Y=\[2010, 2012\) (включает только левое граничное значение: 2010, 2011)  
Y=\[2010, 2012\] (включает оба граничных значения: 2010, 2011, 2012)
 
**Числовой атрибут: значение префикса**  
Y='19'... (любой число, начинающееся с 19) 
 
**Атрибут даты: отдельное значение**  
D='2010-02-04'

**Атрибут даты: значение диапазона**  
D>'2010-02-03'  
D=['2010-02-03','2010-02-05']

**Запросы "И" и "ИЛИ":**  
And(Y=1985, Ti='disordered electronic systems')  
Or(Ti='disordered electronic systems', Ti='fault tolerance principles and practice')  
And(Or(Y=1985,Y=2008), Ti='disordered electronic systems')
 
**Составные запросы:**  
Чтобы запросить компоненты составного атрибута, необходимо указать часть выражения запроса, которая ссылается на этот составной атрибут, в функции Composite(). 

Например, чтобы запросить документы по имени автора, используйте приведенный ниже запрос.
```
Composite(AA.AuN='mike smith')
```
<br>Чтобы запросить документы определенного автора за период, когда он работал в определенном учреждении, используйте следующий запрос.
```
Composite(And(AA.AuN='mike smith',AA.AfN='harvard university'))
```
<br>Функция Composite() объединяет две части составного атрибута. Это означает, что мы получаем только документы, одним из авторов которых был Майк Смит (Mike Smith), когда он работал в Гарварде. 

Чтобы запросить документы определенного автора, написанные им в соавторстве с другими авторами из определенного учреждения, используйте следующий запрос.
```
And(Composite(AA.AuN='mike smith'),Composite(AA.AfN='harvard university'))
```
<br>В этой версии, так как функция Composite() используется отдельно для атрибутов автора и принадлежности перед And(), мы получим все документы, авторами которых является Майк Смит (Mike Smith) и один автор из Гарварда. Это похоже на предыдущий пример запроса, но это не то же самое.

Рассмотрим следующий пример: имеется составной атрибут C, который состоит из двух компонентов А и B. Сущность может содержать несколько значений C. Вот наши сущности.
```
E1: C={A=1, B=1}  C={A=1,B=2}  C={A=2,B=3}
E2: C={A=1, B=3}  C={A=3,B=2}
```

<br>Запрос 
```
Composite(And(C.A=1, C.B=2))
```

<br>находит только сущности со значением C, в котором компонент C.A равен 1, а компонент C.B равен 2. Только сущность E1 соответствует этому запросу.

Запрос 
```
And(Composite(C.A=1), Composite(C.B=2))
```
<br>находит сущности со значением C, в котором компонент C.A равен 1, а также сущности со значением C, в котором компонент C.A равен 2. Этом запросу удовлетворяют сущности E1 и E2.

Обратите внимание на следующее:  
- Невозможно указать часть составного атрибута вне функции Composite().
- Невозможно указать в одной функции Composite() части двух разных составных атрибутов.
- Невозможно указать в функции Composite() атрибут, не являющийся частью составного атрибута.
