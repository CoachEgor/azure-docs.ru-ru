---
title: Рекомендации по QnA Maker
description: Используйте эти рекомендации, чтобы улучшить базу знаний и предоставлять лучшие результаты пользователям приложения или чат-бота.
ms.topic: conceptual
ms.date: 02/15/2020
ms.openlocfilehash: 9a6f7f7d6edc4544942476050a1ed3c2011af7fb
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80053138"
---
# <a name="best-practices-of-a-qna-maker-knowledge-base"></a>Рекомендации по использованию базы знаний QnA Maker

Руководства по [жизненному циклу разработки базы знаний](../Concepts/development-lifecycle-knowledge-base.md) помогут полостью управлять базой знаний. Используйте эти рекомендации для улучшения базы знаний и предоставления лучших результатов вашим клиентам или конечным пользователям чат-бота.

## <a name="extraction"></a>Извлечение

Служба QnA Maker постоянно улучшает алгоритмы извлечения данных вопросов и ответов из содержимого и расширяет списки поддерживаемых форматов файлов и HTML. Следуйте [рекомендациям](../Concepts/content-types.md) по извлечению данных в соответствии с типом вашего документа.

Как правило, страницы часто задаваемых вопросов являются изолированными и не объединяются с другими данными. Руководства по продукции должны содержать четкие заголовки и, желательно, страницу индексов.

### <a name="configuring-multi-turn"></a>Настройка мульти-поворота

[Создайте свою базу знаний](../how-to/multiturn-conversation.md#create-a-multi-turn-conversation-from-a-documents-structure) с включенным многократным извлечением. Если ваша база знаний поддерживает или должна поддерживать иерархию вопросов, эта иерархия может быть извлечена из документа или создана после извлечения документа.

## <a name="creating-good-questions-and-answers"></a>Создание полезных вопросов и ответов

### <a name="good-questions"></a>Полезные вопросы

Лучшие вопросы просты. Рассмотрите ключевое слово или фразу для каждого вопроса, а затем создайте простой вопрос для этого ключевого слова или фразы.

Добавьте столько альтернативных вопросов, сколько вам нужно, но сделайте изменения простыми. Добавление большего количества слов или фраз, которые не являются частью основной цели вопроса, не помогает QnA Maker найти соответствие.


### <a name="add-relevant-alternative-questions"></a>Добавление соответствующих альтернативных вопросов

Пользователь может вводить вопросы либо с `How do I add a toner cartridge to my printer?` разговорным стилем текста, либо поиском ключевых слов, `toner cartridge`например. База знаний должна иметь оба стиля вопросов для того, чтобы правильно вернуть лучший ответ. Если вы не уверены, какие ключевые слова вводит клиент, используйте данные Application Insights для анализа запросов.

### <a name="good-answers"></a>Полезные ответы

Лучшие ответы – это простые ответы, но не слишком простые. Не используйте ответы, такие как `yes` и `no`. Если ваш ответ должен ссылаться на другие источники или предоставлять богатый опыт работы со средствами массовой информации и `strictFilters` ссылками, используйте [метаданные пометки,](../how-to/edit-knowledge-base.md#add-metadata) чтобы различать ответы, а затем отправить [запрос](../how-to/metadata-generateanswer-usage.md#generateanswer-request-configuration) с метаданными теги в свойстве, чтобы получить правильную версию ответа.

|Ответ|Подсказки Follup-up|
|--|--|
|Отключите ноутбук Surface с кнопкой питания на клавиатуре.|Ключевые комбинации для сна, выключения и перезагрузки.<br>Как жестко загрузить ноутбук Surface<br>Как изменить BIOS для ноутбука Surface<br>Различия между сном, выключением и перезапуском|
|Обслуживание клиентов доступно по телефону, Skype и текстовым сообщениям 24 часа в сутки.|Контактная информация для продаж.<br> Офис и магазин места и часы для личного визита.<br> Аксессуары для ноутбука Surface.|

## <a name="chit-chat"></a>Беседа
Добавьте функцию "Беседа" в чат-бот, чтобы сделать его более общительным и привлекательным с незначительными трудозатратами. Вы можете легко добавить наборы данных болтовни от заранее определенных личностей при создании КБ, и изменить их в любое время. Узнайте, как [добавить беседу в базу знаний](../How-To/chit-chat-knowledge-base.md).

Чит-чат поддерживается на [многих языках.](../how-to/chit-chat-knowledge-base.md#language-support)

### <a name="choosing-a-personality"></a>Выбор личности
Чит-чат поддерживается для нескольких предопределенных личностей:

|Личности |Файл набора данных создателя NA |
|---------|-----|
|Professional |[qna_chitchat_professional.tsv](https://qnamakerstore.blob.core.windows.net/qnamakerdata/editorial/qna_chitchat_professional.tsv) |
|Понятное имя |[qna_chitchat_friendly.tsv](https://qnamakerstore.blob.core.windows.net/qnamakerdata/editorial/qna_chitchat_friendly.tsv) |
|Остроумный |[qna_chitchat_witty.tsv](https://qnamakerstore.blob.core.windows.net/qnamakerdata/editorial/qna_chitchat_witty.tsv) |
|Заботливый |[qna_chitchat_caring.tsv](https://qnamakerstore.blob.core.windows.net/qnamakerdata/editorial/qna_chitchat_caring.tsv) |
|Энтузиазма |[qna_chitchat_enthusiastic.tsv](https://qnamakerstore.blob.core.windows.net/qnamakerdata/editorial/qna_chitchat_enthusiastic.tsv) |

Ответы варьируются от формального до неформального и непочтительного. Нужно выбрать личность, которая наиболее соответствует тону, который вы хотите задать своему боту. Вы можете просмотреть [наборы данных](https://github.com/Microsoft/BotBuilder-PersonalityChat/tree/master/CSharp/Datasets)и выбрать тот, который служит базой для вашего бота, а затем настроить ответы.

### <a name="edit-bot-specific-questions"></a>Редактирование специфических вопросов для чат-бота
Существуют специфические вопросы для чат-бота, которые являются частью набора данных беседы и заполнены универсальными ответами. Измените эти ответы на такие, которые будут лучше всего отражать сведения чат-бота.

Рекомендуется сделать следующие вопросы и ответы беседы более конкретными.

* кто вы?
* что можно делать?
* Сколько вам лет?
* Кто вас создал?
* Привет

### <a name="adding-custom-chit-chat-with-a-metadata-tag"></a>Добавление пользовательского болтовни с тегом метаданных

Если вы добавите свои собственные пары болтовни, не забудьте добавить метаданные, чтобы эти ответы были возвращены. Пара имен/значений метаданных `editorial:chitchat`находится в.

## <a name="searching-for-answers"></a>Поиск ответов

GenerateAnswer API использует как вопросы, так и ответ для поиска лучших ответов на запрос пользователя.

### <a name="searching-questions-only-when-answer-is-not-relevant"></a>Поиск вопросов только тогда, когда ответ не актуален

Используйте, [`RankerType=QuestionOnly`](#choosing-ranker-type) если вы не хотите искать ответы.

Примером этого является, когда база знаний представляет собой каталог сокращений, как вопросы с их полной форме в качестве ответа. Значение ответа не поможет найти подходящий ответ.

## <a name="rankingscoring"></a>Ранжирование и оценка
Убедитесь, что вы эффективно используете функции ранжирования, поддерживаемые QnA Maker. Это повысит вероятность того, ответ будет соответствовать запросу пользователя.

### <a name="choosing-a-threshold"></a>Выбор порогового значения

Оценка [достоверности](confidence-score.md) по умолчанию, которая используется в качестве порога, составляет 0, однако вы можете [изменить порог](confidence-score.md#set-threshold) для Вашего КБ в зависимости от ваших потребностей. Поскольку все базы знаний отличны друг от друга, необходимо проверить и выбрать порог, который лучше всего подходит для вашей базы знаний.

### <a name="choosing-ranker-type"></a>Выбор типа ранкера
По умолчанию, создатель nA выполняет поиск вопросов и ответов. Если вы хотите искать только вопросы, чтобы `RankerType=QuestionOnly` получить ответ, используйте в органе POST запрос GenerateAnswer.

### <a name="add-alternate-questions"></a>Добавление альтернативных вопросов
[Альтернативные вопросы](../How-To/edit-knowledge-base.md) увеличивают вероятность получения результата, соответствующего запросу пользователя. Альтернативные вопросы удобно использовать в тех случаях, когда один и тот же вопрос можно задать разными способами. Они могут включать в себя разную структуру предложений и стиль речи.

|Исходный запрос|Альтернативные запросы|Change|
|--|--|--|
|Есть ли парковка?|У вас есть автостоянка?|структуры предложения|
 |Привет!|Эй!<br>Всем привет!|стиль речи или сленговое выражение|

<a name="use-metadata-filters"></a>

### <a name="use-metadata-tags-to-filter-questions-and-answers"></a>Используйте теги метаданных, чтобы фильтровать вопросы и ответы

[Метаданные](../How-To/edit-knowledge-base.md) добавляют способность клиентского приложения знать, что оно не должно принимать все ответы, а сужает результаты пользовательского запроса на основе тегов метаданных. Ответ базы знаний на один и тот же запрос может различаться в зависимости от тега метаданных. Например, на вопрос *"Где находится стоянка?"* может быть несколько разных ответов, если рестораны одной сети находятся в разных городах. То есть это могут быть метаданные вида *Расположение: Сиэтл* или *Расположение: Редмонд*.

### <a name="use-synonyms"></a>Использование синонимов
Хотя в английском языке существует определенная поддержка синонимов, используйте нечувствительные изменения слов через [API Alterations,](https://docs.microsoft.com/rest/api/cognitiveservices/qnamaker/alterations/replace) чтобы добавить синонимы к ключевым словам, которые принимают различную форму. Синонимы добавляются на уровне сервиса NA Maker и распределяются по всем базам знаний в службе.

|Исходное слово|Синонимы|
|--|--|
|купить|приобрести<br>нетто-банкинг<br>интернет-банкинг|

### <a name="use-distinct-words-to-differentiate-questions"></a>Использование уникальных слов для различения ответов
Алгоритмы ранжирования QnA Maker, сопоставляющие запрос пользователя с вопросом в базе знаний, работают эффективнее всего, если все вопросы направлены на разные потребности. Повторение одинакового набора слов в вопросах уменьшает вероятность выбора правильного ответа на запрос пользователя, содержащий эти слова.

Например, у вас могут быть два отдельных набора вопросов и ответов со следующими вопросами:

|Вопросы и ответы|
|--|
|где *находится* стоянка|
|где *находится расположение* банкомата|

Поскольку эти два набора сформулированы очень похожими словами, это сходство может вызвать очень похожие оценки для многих пользовательских запросов, которые сформулированы как *"где находится `<x>`"*. Вместо этого, попробуйте четко дифференцировать с такими вопросами, как *"где парковка"* и *"где банкомат"*, избегая слов, как "местоположение", которые могут быть во многих вопросах в вашем КБ.

## <a name="collaborate"></a>Совместная работа
QnA Maker дает пользователям возможность [совместно работать](../How-to/collaborate-knowledge-base.md) над базой знаний. Чтобы получить доступ к базам знаний, пользователям нужен доступ к группе ресурсов Azure для QnA Maker. Некоторым организациям может потребоваться использовать внешнего исполнителя для редактирования и обслуживания баз знаний, сохраняя при этом безопасность доступа к своим ресурсам Azure. Эту модель с редактором и утверждающим можно реализовать, установив две идентичные [службы QnA Maker](../How-to/set-up-qnamaker-service-azure.md) в разных подписках и выбрав одну из них для цикла редактирования и тестирования. По завершении тестирования содержимое базы знаний переместится посредством процесса [импорта и экспорта](../Tutorials/migrate-knowledge-base.md) в службу QnA Maker утверждающего, который опубликует окончательную версию базы знаний и обновит конечную точку.



## <a name="active-learning"></a>Активное обучение

[Активное обучение](../How-to/use-active-learning.md) позволяет идеально предложить альтернативные вопросы при обеспечении достаточного качества и количества пользовательских запросов. Очень важно разрешить пользовательским запросам от клиента к приложению принимать участие в цикле обратной связи активного обучения без цензуры. После того, как вопросы будут предложены на портале «NA Maker», вы можете **[отфильтровать предложения,](../How-To/improve-knowledge-base.md#accept-an-active-learning-suggestion-in-the-knowledge-base)** а затем рассмотреть и принять или отклонить эти предложения.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Редактирование базы знаний](../How-to/edit-knowledge-base.md)
