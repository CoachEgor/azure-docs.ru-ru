---
title: Время существования базы знаний в QnA Maker
description: QnA Maker лучше всего обучается на итеративных циклах изменения моделей, примерах высказываний, публикации содержимого и сборе данных из запросов к конечным точкам.
ms.topic: conceptual
ms.date: 02/27/2020
ms.openlocfilehash: 98fbd81baa717c981486f33cfb2b3a608cec27c7
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77914958"
---
# <a name="knowledge-base-lifecycle-in-qna-maker"></a>Время существования базы знаний в QnA Maker
QnA Maker лучше всего обучается на итеративных циклах изменения моделей, примерах высказываний, публикации содержимого и сборе данных из запросов к конечным точкам.

![Цикл разработки](../media/qnamaker-concepts-lifecycle/kb-lifecycle.png)

## <a name="creating-a-qna-maker-knowledge-base"></a>Создание базы знаний QnA Maker
Конечная точка базы знаний QnA Maker предоставляет наиболее точный ответ на запрос пользователя на основании содержимого базы знаний. Создание базы знаний — это одноразовая акция по настройке хранилища вопросов, ответов и связанных с ними метаданных. Базу знаний можно создать путем сканирования уже существующего содержимого, например страниц часто задаваемых вопросов, руководств по продукции или структурированных пар "вопрос-ответ". Узнайте, как [создать базу знаний](../quickstarts/create-publish-knowledge-base.md).

## <a name="testing-and-updating-the-knowledge-base"></a>Тестирование и обновление базы знаний

База знаний готова к тестированию после ее заполнения содержимым. Заполнение содержимым может быть выполнено редактором или средством автоматического извлечения. Интерактивное тестирование может быть выполнено на портале «NA Maker» через **панель тестирования,** введя общие запросы пользователей и проверяя, что ответы вернулись с правильным ответом и достаточным баллом доверия.

* **Чтобы исправить низкие оценки доверия**: добавьте альтернативные вопросы.
* **Когда запрос неправильно возвращает [ответ по умолчанию:](../How-to/change-default-answer.md)** добавляйте новые ответы на правильный вопрос.

Этот непрерывный цикл проверок и изменений продолжается, пока вы не будете удовлетворены результатами. Узнайте, как [проверить базу знаний](../How-To/test-knowledge-base.md).

Для больших КБ используйте автоматизированное тестирование `isTest` с [API generateAnswer](../how-to/metadata-generateanswer-usage.md#get-answer-predictions-with-the-generateanswer-api) и свойством тела, которое запрашивает базу `test` знаний вместо опубликованной базы знаний.

```json
{
  "question": "example question",
  "top": 3,
  "userId": "Default",
  "isTest": true
}
```

## <a name="publish-the-knowledge-base"></a>Публикация базы знаний
После завершения тестирования базу знаний можно опубликовать. Публикация подталкивает последнюю версию проверенной базы знаний к специальному индексу когнитивного поиска Azure, представляющему **опубликованную** базу знаний. Кроме того, создается конечная точка, которая может быть вызвана в приложении или чат-боте.

Таким образом любые изменения, вносимые в тестовую версию базы знаний, не влияют на опубликованную версию, которая может выполняться в рабочем приложении.

Каждую из этих баз знаний можно тестировать отдельно. Используя AA, можно настроить таргетинг на `isTest` тестовую версию базы знаний с свойством тела в вызове generateAnswer.

Узнайте, как [опубликовать базу знаний](../Quickstarts/create-publish-knowledge-base.md#publish-the-knowledge-base).

## <a name="monitor-usage"></a>Мониторинг использования
Чтобы иметь возможность вести журналы чата службы, необходимо включить Application Insights при [создании службы QnA Maker](../How-To/set-up-qnamaker-service-azure.md).

Таким образом можно получать различные аналитические данные об использовании этой службы. Узнайте больше о том, как использовать Application Insights для получения [аналитических данных по службе QnA Maker](../How-To/get-analytics-knowledge-base.md).

Исходя из результатов анализа вы можете внести соответствующие [изменения в базу знаний](../How-To/edit-knowledge-base.md).

## <a name="version-control-for-data-in-your-knowledge-base"></a>Управление версиями для данных в вашей базе знаний

Управление версиями данных обеспечивается через функции импорта/экспорта на странице **«Настройки»** на портале «NA Maker».

Вы можете создать резервную базу знаний, экспортируя базу знаний, в любом `.tsv` или `.xls` формате. После экспорта, включите этот файл в рамках регулярной проверки управления исходным источником.

Когда вам нужно вернуться к конкретной версии, необходимо импортировать этот файл из локальной системы. Экспортируемая база знаний **должна** использоваться только через импорт на странице **«Настройки».** Он не может быть использован в качестве источника данных файла или URL-документа. Это заменит вопросы и ответы, которые в настоящее время находятся в базе знаний, с содержанием импортируемого файла.

## <a name="test-and-production-knowledge-base"></a>База знаний о тестировании и производстве
База знаний — это хранилище вопросов и наборов ответов, созданных, поддерживаемых и используемых через «NA Maker». Каждый ресурс «NA Maker» может содержать несколько баз знаний.

База знаний имеет два состояния: *тест* и *опубликованные*.

### <a name="test-knowledge-base"></a>База знаний тестирования

*База знаний тестирования* — это версия, которая в настоящее время редактируется, сохраняется и проверяется на точность и полноту ответов. Изменения, внесенные в базу знаний теста, не влияют на конечного пользователя приложения или чат-бота. База знаний тестирования `test` известна как в запросе HTTP. Знания `test` доступны с помощью интерактивного **тестового** панели портала компании «NA Maker».

### <a name="production-knowledge-base"></a>База производственных знаний

*Опубликованная база знаний* — это версия, которая используется в чат-боте или приложении. Действие публикации базы знаний помещает содержание базы данных в опубликованную версию базы знаний. Поскольку опубликованная база знаний — это версия, которую приложение использует через конечную точку, убедитесь, что содержимое правильное и хорошо протестированное. Опубликованная база знаний `prod` известна как в запросе HTTP.


## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Активные предложения по обучению](./active-learning-suggestions.md)