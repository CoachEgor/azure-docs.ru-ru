---
title: Как указать модель распознавания - API распознавания лиц
titleSuffix: Azure Cognitive Services
description: В этой статье показано, как выбрать модель распознавания для приложения Azure API распознавания лиц.
services: cognitive-services
author: longl
manager: nitinme
ms.service: cognitive-services
ms.component: face-api
ms.topic: conceptual
ms.date: 03/28/2019
ms.author: longl
ms.openlocfilehash: 33348e637143b923719425b9674f99a475d848d9
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60815829"
---
# <a name="specify-a-face-recognition-model"></a>Указание модели распознавания лиц

В этом руководстве показано, как задать модель распознавания лиц для обнаружения лиц, идентификации и поиска подобия, с помощью API распознавания лиц Azure.

API распознавания лиц используются моделей машинного обучения для выполнения операций на человеческих лиц на изображениях. Мы смогли улучшить точность наших моделей на основе отзывов клиентов и усовершенствованные возможности исследования и мы предлагаем эти усовершенствования, как обновления модели. У разработчиков есть возможность указать, какую версию модели распознавания лиц они бы хотели использовать; их можно выбрать модель, которая лучше всего соответствует они используют эту службу.

Если вы новый пользователь, мы рекомендуем использовать последней модели. Читайте дальше, чтобы узнать, как указать его в различные операции распознавания лиц, избегая конфликтов. Если вы опытный пользователь и не уверены, нужно перейти к последней модели, перейдите к [оценки различных моделей](#evaluate-different-models) раздел для оценки новой модели и сравнить результаты, используя текущий набор данных.

## <a name="prerequisites"></a>Технические условия

Вы должны быть знакомы с концепцией идентификации и обнаружения лиц искусственного Интеллекта. Если нет, см. в статье эти руководства сначала:

* [Как обнаружить лица на изображении](HowtoDetectFacesinImage.md)
* [Как определить лиц на изображении](HowtoIdentifyFacesinImage.md)

## <a name="detect-faces-with-specified-model"></a>Обнаружение лиц с указанной модели

Обнаружение лиц определяет visual ориентиров человеческих лиц и находит их расположение ограничивающий прямоугольник. Также извлекает функции распознавания лиц и сохраняет их для использования в коде. Вся эта информация forms представлением одной грани.

Модель распознавания используется извлечении функции распознавания лиц, поэтому можно указать версию модели, при выполнении операции поиска.

При использовании [Лиц — обнаружения] API, назначить версии модели с `recognitionModel` параметра. Ниже приведены доступные значения.

* `recognition_01`
* `recognition_02`

При необходимости можно указать _returnRecognitionModel_ параметра (по умолчанию **false**) для указания ли _recognitionModel_ должен возвращаться в ответ. Таким образом, URL-адрес запроса для [Лиц — обнаружения] REST API будет выглядеть следующим образом:

`https://westus.api.cognitive.microsoft.com/face/v1.0/detect[?returnFaceId][&returnFaceLandmarks][&returnFaceAttributes][&recognitionModel][&returnRecognitionModel]
&subscription-key=<Subscription key>`

Если вы используете клиентскую библиотеку, можно назначить значение `recognitionModel` путем передачи строки, представляющее версию.
Если оставить ее без конкретного указания версии модели по умолчанию (_recognition_01_) будет использоваться. См. в следующем примере кода для клиентской библиотеки .NET.

```csharp
string imageUrl = "http://news.microsoft.com/ceo/assets/photos/06_web.jpg";
var faces = await faceServiceClient.Face.DetectWithUrlAsync(imageUrl, true, true, recognitionModel: "recognition_02", returnRecognitionModel: true);
```

## <a name="identify-faces-with-specified-model"></a>Идентификация лиц с указанной модели

API распознавания лиц можно извлечь данные лиц из образа и свяжите ее с **Person** объекта (через [добавление распознавания лиц](https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523b) вызвать API, например) и несколько **Person** объекты могут быть хранить в одном **каждой группе людей**. Затем новое лицо можно сравнивать с **каждой группе людей** (с [Face — Identify] вызова), и соответствующего пользователя в пределах этой группы могут быть идентифицированы.

Объект **каждой группе людей** должны иметь одну модель распознавания уникальным для всех **Person**и вы можете указать это, используя `recognitionModel` параметр при создании группы ([PersonGroup — Create] или [LargePersonGroup — Create]). Если не указать этот параметр, исходный `recognition_01` используется модель. Группы будет всегда использовать модель распознавания, которым он был создан и новых поверхностей станет связанные с этой моделью при добавлении к нему; Это нельзя изменить после создания группы. Чтобы увидеть, какие модели **каждой группе людей** настроен, используйте [каждой группе людей - Get] API с помощью _returnRecognitionModel_ параметр в качестве **true**.

См. в следующем примере кода для клиентской библиотеки .NET.

```csharp
// Create an empty PersonGroup with "recognition_02" model
string personGroupId = "mypersongroupid";
await faceServiceClient.PersonGroup.CreateAsync(personGroupId, "My Person Group Name", recognitionModel: "recognition_02");
```

В этом коде **каждой группе людей** с Идентификатором `mypersongroupid` создается, и он настроен для использования _recognition_02_ модели для извлечения функции распознавания лиц.

Соответственно, необходимо указать модель для использования при определении лиц для сравнения в отношении этого **каждой группе людей** (через [Лиц — обнаружения] API). Модель, можно использовать всегда должно быть согласовано с **каждой группе людей**элемента конфигурации; в противном случае операция завершится ошибкой из-за несовместимых моделей.

Нет изменений в [Face — Identify] API; необходимо только указать версию модели при обнаружении.

## <a name="find-similar-faces-with-specified-model"></a>Поиск похожих лиц с указанной модели

Можно также указать модель распознавания для поиска подобия. Вы можете назначить версии модели с `recognitionModel` при создании списка лиц с [FaceList - создание] API или [LargeFaceList - создание]. Если не указать этот параметр, исходный `recognition_01` используется модель. Список лиц всегда будет использовать модель распознавания, которым он был создан и новых поверхностей станет связанные с этой моделью, когда они добавляются в него данные; После создания его нельзя изменить. Чтобы увидеть, какая модель настроен список лиц, используйте [FaceList - Get] API с помощью _returnRecognitionModel_ параметр значение как **true**.

См. в следующем примере кода для клиентской библиотеки .NET.

```csharp
await faceServiceClient.FaceList.CreateAsync(faceListId, "My face collection", recognitionModel: "recognition_02");
```

Этот код создает список лиц, который называется `My face collection`, с использованием _recognition_02_ модели для извлечения признаков. При поиске этот список лиц для похожих лиц для нового обнаруженного лица, с которыми сталкиваются должны были обнаружены ([Лиц — обнаружения]) с помощью _recognition_02_ модели. Как и в предыдущем разделе модель должна быть согласована.

Нет изменений в [Распознавания лиц — Найти сходные] API; вы только версия указывается в модели обнаружения.

## <a name="verify-faces-with-specified-model"></a>Проверяйте лица с помощью указанной модели

[Сталкиваются - проверка] API проверяет, принадлежат ли два портрета одному человеку. Нет изменений в API убедитесь, что касается модели распознавания, но можно сравнивать только лица, обнаруженные с помощью той же модели. Таким образом, два портрета оба потребуется обнаружены с помощью `recognition_01` или `recognition_02`.

## <a name="evaluate-different-models"></a>Анализ различных моделей

Если вы хотите сравнить характеристиками _recognition_01_ и _recognition_02_ моделей данных, вам потребуется:

1. Создайте две **каждой группе людей**s с _recognition_01_ и _recognition_02_ соответственно.
1. Используйте данные изображения для обнаружения лиц и зарегистрировать их для **Person**s в следующих двух **каждой группе людей**s и триггер обучения процесса с [PersonGroup — Train] API.
1. Тестирование с помощью [Face — Identify] на обоих **каждой группе людей**s и сравните результаты.

При указании обычно достоверности (значение между 0 и 1, определяющее уверены, каким образом модель должна быть для идентификации грани), может потребоваться использовать разные пороговые значения для различных моделей. Пороговое значение для одной модели не предназначен для совместного использования в другой и обязательно не дают одинаковые результаты.

## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы узнали, как указать модель распознавания для использования с другой API службы распознавания лиц. Затем следует выполните краткое руководство поможет приступить к использованию обнаружения лиц.

* [Обнаружение лиц на изображении](../quickstarts/csharp-detect-sdk.md)

[Лиц — обнаружения]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d
[Распознавания лиц — Найти сходные]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395237
[Face — Identify]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395239
[Сталкиваются - проверка]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523a
[PersonGroup — Create]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395244
[Каждой группе людей - Get]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395246
[PersonGroup Person - Add Face]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523b
[PersonGroup — Train]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395249
[LargePersonGroup — Create]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/599acdee6ac60f11b48b5a9d
[FaceList - Создание]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039524b
[FaceList - Get]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039524c
[LargeFaceList - Создание]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/5a157b68d2de3616c086f2cc
