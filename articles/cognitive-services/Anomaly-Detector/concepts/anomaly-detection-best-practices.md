---
title: Рекомендации по использованию API Детектора аномалий
titleSuffix: Azure Cognitive Services
description: Дополнительные сведения о рекомендациях при обнаружении аномалий с помощью API обнаружения аномалий.
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: anomaly-detector
ms.topic: conceptual
ms.date: 03/26/2019
ms.author: aahi
ms.openlocfilehash: 9407f2fc9375765efb6eb9688b3ebfeef24ba90a
ms.sourcegitcommit: dad277fbcfe0ed532b555298c9d6bc01fcaa94e2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/10/2019
ms.locfileid: "67721618"
---
# <a name="best-practices-for-using-the-anomaly-detector-api"></a>Рекомендации по использованию API обнаружения аномалий

API обнаружения аномалий — это служба обнаружения аномалий без отслеживания состояния. Точность и производительность его результаты могут повлиять на:

* Как выполняется подготовка данных временных рядов.
* Параметры API обнаружения аномалий, которые были использованы.
* Количество точек данных в запросе API. 

Воспользуйтесь этой статьей, чтобы узнать о рекомендациях по использованию API получения наилучших результатов для данных. 

## <a name="when-to-use-batch-entire-or-latest-last-point-anomaly-detection"></a>Когда следует использовать пакет (всего) или последнюю версию (последнее) точки обнаружения аномалий

Конечная точка обнаружения пакетной службы API обнаружения аномалий позволяет обнаруживать аномалии через всего времени данные ряда. В этом режиме обнаружения одной статистической модели создается и применяется к каждой точке в наборе данных. Если ваши временные ряды содержат описанными ниже характеристиками, мы рекомендуем использовать обнаружение пакетной службы для предварительного просмотра данных в одном вызове API.

* Сезонного временного ряда случайных аномалии.
* Неизменность временных рядов, с помощью случайные пики и спады. 

Не рекомендуется использовать обнаружение аномалий пакетной службы для данных в реальном времени, или его использование в данных временных рядов, у которых выше характеристиками. 

* Пакет обнаружения создает и применяет только одну модель, для каждой точки выполняется в контексте весь ряд. Если время рядов данных вверх и вниз без сезонных колебаний, некоторые точки изменения тенденций (частные интерфейсы и пики данных) могут быть пропущены в модели. Аналогично некоторые моменты, изменения, которые являются менее важно, чем те, которые позже в наборе данных не может считаться как настолько значительная, что должна быть включена в модель.

* Обнаружение пакета выполняется медленнее, чем обнаружение аномалий состояние последней точки, при выполнении мониторинга данных в режиме реального времени, из-за количество точек выполняется анализ.

Для мониторинга данных в режиме реального времени, мы рекомендуем, обнаружение аномалий состояние только последние точки данных. Применяя постоянно последнюю точку обнаружения, потоковая передача данных мониторинга можно сделать более эффективный и точный.

В приведенном ниже примере описывается влияние этих режимов обнаружения может оказать на производительность. На первом рисунке показаны результат постоянно обнаружение аномалий состояние последней точки вдоль точек 28 ранее данных. Красные точки являются аномалии.

![Рисунок, демонстрирующий обнаружение аномалий с помощью последней точки](../media/last.png)

Ниже приведен тот же набор данных, с помощью пакетной службы обнаружения аномалий. Модель создается для операции, пропущен несколько аномалии, помеченные прямоугольниками.

![Рисунок, демонстрирующий обнаружение аномалий, используя метод пакетной службы](../media/entire.png)

## <a name="data-preparation"></a>Подготовка данных

API обнаружения аномалий принимает временных рядов данных в формате в объект запроса JSON. Временных рядов могут быть любые числовые данные, записанные со временем в последовательном порядке. Windows для данных временных рядов можно отправить в конечную точку API обнаружения аномалий, чтобы повысить производительность интерфейса API. Минимальное количество точек данных, которую можно отправить равно 12, а максимальный — 8640 точек. [Степень детализации](https://docs.microsoft.com/dotnet/api/microsoft.azure.cognitiveservices.anomalydetector.models.granularity?view=azure-dotnet-preview) определяется как интенсивность данных выборки в. 

Точки данных, отправляемого в API обнаружения аномалий должны иметь допустимую метку времени в формате UTC (UTC) и числовое значение. 

```json
{
    "granularity": "daily",
    "series": [
      {
        "timestamp": "2018-03-01T00:00:00Z",
        "value": 32858923
      },
      {
        "timestamp": "2018-03-02T00:00:00Z",
        "value": 29615278
      },
    ]
}
```

Если с нестандартным интервалом выборки данных, это можно сделать, добавив `customInterval` атрибута в запросе. Например если ряды выборка каждые 5 минут, можно добавить следующие на ваш запрос JSON:

```json
{
    "granularity" : "minutely", 
    "customInterval" : 5
}
```

### <a name="missing-data-points"></a>Отсутствующие точки данных

Отсутствующие точки данных часто используются в наборы данных рядов равномерное распределение времени, особенно те, которые с высокой степенью гранулярности (небольшой интервал выборки. Например, выбора данных определяет каждые несколько минут). Отсутствует ожидаемое число точек данных менее 10% не должен содержать негативное влияние на результаты обнаружения. Рассмотрите возможность заполнения пропусков в данных с его характеристики, как Подстановка точки данных из более раннего периода, линейную интерполяцию или скользящего среднего.

### <a name="aggregate-distributed-data"></a>Агрегатные распределенных данных

API обнаружения аномалий, лучше всего работает на равномерно распределенные временных рядов. Если ваши данные распределяются случайным образом, вам следует объединить его следует единица измерения времени, например в минуту, ежечасного или ежедневного например.

## <a name="anomaly-detection-on-data-with-seasonal-patterns"></a>Обнаружение аномалий в данных с сезонными закономерностями

Если вы знаете, что данные временных рядов имеет сезоне (по одному, происходящее с регулярными интервалами), может повысить точность и время отклика API. 

Указание `period` при создании запроса JSON можно уменьшить задержку обнаружения аномалий на 50%. `period` Является принимает целое число, указывающее точки примерно сколько данных временных рядов для повторения шаблон. Например, временные ряды на одну точку данных в день будет иметь `period` как `7`, и придется временных рядов с одной точкой в час (с одинаковым шаблоном еженедельно) `period` из `7*24`. Если вы не знаете, какие шаблоны в данных, укажите этот параметр не нужно.

Для получения наилучших результатов обеспечивают 4 `period`элемента, накопленные точки данных, а также второе. Например, почасовая данных с помощью еженедельных шаблон описанным выше должен предоставить 673 точек данных в тексте запроса (`7 * 24 * 4 + 1`).

### <a name="sampling-data-for-real-time-monitoring"></a>Данные выборки для мониторинга в реальном времени

Если потоки данных осуществляется через короткий промежуток времени (например секунд или минут), отправка Рекомендованное количество точек данных могут превысить API обнаружения аномалий максимальное число разрешенных (8640 точек данных). Если данные стабильной сезоне, можно отправить образец данных временных рядов с интервалом большего размера, например часов. Выборки данных таким образом также заметно повышает время отклика API. 

## <a name="next-steps"></a>Следующие шаги

* [Что такое API обнаружения аномалий?](../overview.md)
* [Краткое руководство Обнаруживать аномалии в данных временных рядов с помощью REST API обнаружения аномалий](../quickstarts/detect-data-anomalies-csharp.md)
