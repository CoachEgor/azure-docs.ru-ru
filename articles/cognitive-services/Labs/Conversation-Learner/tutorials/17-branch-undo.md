---
title: Использование операций ветвления и отмены в модели Conversation Learner в Microsoft Cognitive Services | Документация Майкрософт
titleSuffix: Azure
description: Сведения об использовании операций ветвления и отмены в модели Conversation Learner.
services: cognitive-services
author: v-jaswel
manager: nolachar
ms.service: cognitive-services
ms.subservice: conversation-learner
ms.topic: article
ms.date: 04/30/2018
ms.author: v-jaswel
ms.openlocfilehash: cca7b42c83be3ca428509ea48c387a1c35ddb35a
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60640196"
---
# <a name="how-to-use-branching-and-undo-operations"></a>Как использовать операции ветвления и отмены
В этом руководстве мы рассмотрим операции ветвления и отмены.


## <a name="details"></a>Сведения
### <a name="undo"></a>Отмена
Позволяет разработчику отменить последние введенные пользователем данные или последнее выбранное пользователем действие. По сути, эта операция создает новый диалог и воспроизводит в нем все действия до предыдущего шага включительно.  Это означает, что в этом диалоге будут повторно выполнены все обратные вызовы обнаружения сущностей и обращения к API.

### <a name="branch"></a>Ветвь
Создает диалог для обучения, начало которого полностью совпадает с уже существующим диалогом, что позволяет не вводить все действия диалога вручную. По сути, операция ветвления создает новый диалог и воспроизводит в нем все действия до текущего шага.  Это означает, что в этом диалоге будут повторно выполнены все обратные вызовы обнаружения сущностей и обращения к API.


## <a name="requirements"></a>Требования
Для работы с этим руководством вам потребуется запущенный бот заказа пиццы.

    npm run demo-pizza

### <a name="open-or-import-the-demo"></a>Откройте или импортируйте демонстрационный пример.

Если вы уже работали с руководством по созданию бота для заказа пиццы, просто откройте эту модель в списке в веб-интерфейсе. В противном случае щелкните "Импортировать руководства" и выберите модель с именем Demo-PizzaOrder.

## <a name="undo"></a>Отмена

Вот пример того, как просмотреть `Undo` в действии.

### <a name="training-dialogs"></a>Обучающие диалоги
1. На левой панели щелкните "Обучающие диалоги" и нажмите кнопку `New Train Dialog`.
2. Введите Order a pizza (Заказать пиццу).
3. Нажмите кнопку `Score Actions`.
4. Щелкните или выберите What would you like on your pizza? (Что вы хотите добавить в пиццу?).
5. Введите Anything (Что угодно).
6. Нажмите кнопку `Undo`.
    - Последняя запись удаляется, и на экране остается ответ бота на вопрос What would you like on your pizza? (Что вы хотите добавить в пиццу?).

## <a name="branch"></a>Ветвь

Для этого демонстрационного проекта мы откроем существующий обучающий диалог и создадим на его основе новый диалог с помощью ветвления.

1. На панели слева щелкните "Обучающие диалоги".
2. Обратите внимание на сетку. Вы увидите только одно обучение, начинающееся со слов new order (новый заказ).
3. В сетке щелкните new order (новый заказ), чтобы открыть существующий обучающий диалог.
4. Щелкните последний элемент no (нет) в этом диалоге.
5. Щелкните значок "Ветвление", он обведен красным на рисунке ниже.
    - ![](../media/tutorial15_branch.PNG)
    - Весь обучающий диалог до слова no (нет) копируется в новый обучающий диалог.
    - Это действие позволяет избежать повторного ввода всех предыдущих действий и работать с новой ветвью диалога с текущего момента.
6. Введите yes (да) и нажмите клавишу ВВОД.
7. Нажмите кнопку `Score Actions`.
    - На этом этапе бот автоматически выбирает ответ. Но нам не нравится ответ бота, поэтому мы изменим его.
8. Щелкните последний ответ бота.
    - Это позволит выбрать другой ответ.
9. Выберите UseLastToppings.
10. Нажмите кнопку `Score Actions`.
    - Бот снова выберет ответ автоматически. Он должен сказать: "You have sausage, cheese and mushrooms on your pizza" (Вы выбрали колбасу, сыр и грибы). 
    - Этот ответ нам нравится, и мы оставим его без изменений.
11. Нажмите кнопку `Score Actions`.
    - Бот снова выберет ответ автоматически. Он должен сказать: "Would you like anything else?" (Вы хотели бы добавить что-нибудь еще?).
12. Введите no (нет).
13. Нажмите кнопку `Save Branch`.
14. Обратите внимание на то, что в сетке теперь есть два обучения, которые начинаются со слов new order (новый заказ).
    - Одно из них вы использовали для создания ветвления.
    - Второе — версия с ветвлением, которую вы только что сохранили.
    - Щелкните каждое из обучений, чтобы убедиться, что его поведение соответствует ожидаемому.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Управление версиями и добавление тегов](./18-version-tag.md)
