---
title: Длинный аудио API (Предварительная версия) — служба речи
titleSuffix: Azure Cognitive Services
description: Узнайте, как API длинного аудио-интерфейса предназначен для асинхронного синтеза длинного текста в речь.
services: cognitive-services
author: trevorbye
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 01/30/2020
ms.author: trbye
ms.openlocfilehash: b7cca314ec59e46cf17751b1aec28b5c3ea029ed
ms.sourcegitcommit: 58faa9fcbd62f3ac37ff0a65ab9357a01051a64f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "81401061"
---
# <a name="long-audio-api-preview"></a>Длинный аудио API (Предварительная версия)

Длинный аудио API предназначен для асинхронного синтеза текста длинной формы в речь (например, для звуковых книг). Этот API не возвращает синтезированный звук в режиме реального времени, а предполагает, что вы запрашиваете ответ и используете выходные данные, так как они становятся доступными из службы. В отличие от API преобразования текста в речь, используемого речевым пакетом SDK, длинный аудио API может создавать синтезированный звук дольше 10 минут, что делает его идеальным для издателей и платформ звуковых данных.

Дополнительные преимущества для длинного аудио API:

* Синтезированный речевой ввод, возвращенный службой, использует нейронные голоса, что обеспечивает высокую точность вывода звука.
* Так как ответы в реальном времени не поддерживаются, нет необходимости развертывать конечную точку голоса.

> [!NOTE]
> Длинный аудио API теперь поддерживает только [Пользовательский нейронный голос](https://docs.microsoft.com/azure/cognitive-services/speech-service/how-to-custom-voice#custom-neural-voices).

## <a name="workflow"></a>Рабочий процесс

Как правило, при использовании длинного аудио API вы отправляете текстовый файл или файлы для синтезирования, опрашиваете состояние, а затем, если состояние прошло успешно, можно загрузить выходные данные звука.

На этой схеме представлен общий обзор рабочего процесса.

![Схема рабочего потока для длинного звука API](media/long-audio-api/long-audio-api-workflow.png)

## <a name="prepare-content-for-synthesis"></a>Подготовка содержимого для синтеза

При подготовке текстового файла убедитесь, что он:

* Является обычным текстом (txt) или SSML Text (. txt)
* Кодируется как [UTF-8 с меткой порядка байтов (BOM)](https://www.w3.org/International/questions/qa-utf8-bom.en#bom)
* Является отдельным файлом, а не ZIP
* Содержит более 400 символов для обычного текста или 400 [оплачиваемых символов](https://docs.microsoft.com/azure/cognitive-services/speech-service/text-to-speech#pricing-note) для текста SSML и менее 10 000 абзацев
  * Для обычного текста каждый абзац отделяется нажатием клавиши **Ввод/возврат** -просмотр. [пример входного текста с открытым текстом](https://github.com/Azure-Samples/Cognitive-Speech-TTS/blob/master/CustomVoice-API-Samples/Java/en-US.txt)
  * Для текста SSML каждая часть SSML считается абзацом. SSML части должны быть разделены с помощью различных абзацев. [Пример текстового ввода](https://github.com/Azure-Samples/Cognitive-Speech-TTS/blob/master/CustomVoice-API-Samples/Java/SSMLTextInputSample.txt) для просмотра SSML
> [!NOTE]
> В китайском (континентальная часть), китайском (Гонконг), китайском (Тайвань), японском и корейском языках одно слово будет считаться двумя символами. 

## <a name="submit-synthesis-requests"></a>Отправка запросов синтеза

После подготовки входного содержимого следуйте инструкциям в [кратком руководстве по синтезу звука](https://aka.ms/long-audio-python) , чтобы отправить запрос. При наличии нескольких входных файлов необходимо будет отправить несколько запросов. Существуют некоторые ограничения, которые следует учитывать. 
* Клиенту разрешено отправлять до 5 запросов на сервер в секунду для каждой учетной записи подписки Azure. Если оно превышает ограничение, клиент получает код ошибки 429 (слишком много запросов). Сократите количество запросов в секунду.
* Сервер может запуститься и поставить в очередь до 120 запросов для каждой учетной записи подписки Azure. Если оно превышает ограничение, сервер возвратит код ошибки 429 (слишком много запросов). Подождите и не отправляйте новый запрос, пока не будут завершены некоторые запросы
* Сервер будет иметь до 20 000 запросов для каждой учетной записи подписки Azure. Если превышено ограничение, удалите некоторые запросы перед отправкой новых.

## <a name="audio-output-formats"></a>Форматы вывода звука

Поддерживаются гибкие форматы вывода звука. Вы можете создавать выходные данные для каждого абзаца или объединять их в один выход, задав параметр "Конкатенатересулт". API длинного звука поддерживает следующие форматы вывода звука:

> [!NOTE]
> Формат аудио по умолчанию — Metallica-16khz-16-разрядный-Mono-PCM.

* Metallica-8khz-16-разрядный-Mono-PCM
* Metallica-16khz-16-разрядный-Mono-PCM
* Metallica-24khz-16-разрядный-Mono-PCM
* Metallica-48khz-16-разрядный-Mono-PCM
* Audio-16khz-32kbitrate-Mono-MP3
* Audio-16khz-64kbitrate-Mono-MP3
* Audio-16khz-128kbitrate-Mono-MP3
* Audio-24khz-48kbitrate-Mono-MP3
* Audio-24khz-96kbitrate-Mono-MP3
* Audio-24khz-160kbitrate-Mono-MP3

## <a name="quickstarts"></a>Краткие руководства

Мы предлагаем самые краткие руководства, которые помогут вам успешно запустить длинный аудио API. В этой таблице содержится список длинных кратких руководств по API аудио, упорядоченных по языку.

* [Краткое руководство. Python](https://aka.ms/long-audio-python)

## <a name="sample-code"></a>Образец кода
Пример кода для длинного аудио API доступен на сайте GitHub.

* [Пример кода: Python](https://github.com/Azure-Samples/Cognitive-Speech-TTS/tree/master/CustomVoice-API-Samples/Python)
* [Пример кода: C #](https://github.com/Azure-Samples/Cognitive-Speech-TTS/tree/master/CustomVoice-API-Samples/CSharp)
* [Пример кода: Java](https://github.com/Azure-Samples/Cognitive-Speech-TTS/blob/master/CustomVoice-API-Samples/Java/)
