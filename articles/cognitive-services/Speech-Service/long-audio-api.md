---
title: Длинный аудио API (Предварительная версия) — служба речи
titleSuffix: Azure Cognitive Services
description: Узнайте, как API длинного аудио-интерфейса предназначен для асинхронного синтеза длинного текста в речь.
services: cognitive-services
author: trevorbye
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 01/30/2020
ms.author: trbye
ms.openlocfilehash: 550579b40470d7a1ad02031b8140e7d0a7164f46
ms.sourcegitcommit: 69156ae3c1e22cc570dda7f7234145c8226cc162
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2020
ms.locfileid: "84310603"
---
# <a name="long-audio-api-preview"></a>Длинный аудио API (Предварительная версия)

Длинный аудио API предназначен для асинхронного синтеза текста длинной формы в речь (например, в аудио книгах, новостных статьях и документах). Этот API не возвращает синтезированный звук в режиме реального времени, а предполагает, что вы запрашиваете ответ и используете выходные данные, так как они становятся доступными из службы. В отличие от API преобразования текста в речь, используемого речевым пакетом SDK, длинный аудио API может создавать синтезированный звук дольше 10 минут, что делает его идеальным для издателей и платформ звуковых данных.

Дополнительные преимущества для длинного аудио API:

* Синтезированный речевой ввод, возвращенный службой, использует лучшие нейронные голоса.
* Нет необходимости развертывать голосовую конечную точку, так как она позволяет объединять голоса в режиме без реального времени.

> [!NOTE]
> Длинный аудио API теперь поддерживает как [открытые нейронные голоса](https://docs.microsoft.com/azure/cognitive-services/speech-service/language-support#neural-voices) , так и [пользовательские нейронные голоса](https://docs.microsoft.com/azure/cognitive-services/speech-service/how-to-custom-voice#custom-neural-voices).

## <a name="workflow"></a>Рабочий процесс

Как правило, при использовании длинного аудио API вы отправляете текстовый файл или файлы для синтезирования, опрашиваете состояние, а затем, если состояние прошло успешно, можно загрузить выходные данные звука.

На этой схеме представлен общий обзор рабочего процесса.

![Схема рабочего потока для длинного звука API](media/long-audio-api/long-audio-api-workflow.png)

## <a name="prepare-content-for-synthesis"></a>Подготовка содержимого для синтеза

При подготовке текстового файла убедитесь, что он:

* Является обычным текстом (txt) или SSML Text (. txt)
* Кодируется как [UTF-8 с меткой порядка байтов (BOM)](https://www.w3.org/International/questions/qa-utf8-bom.en#bom)
* Является отдельным файлом, а не ZIP
* Содержит более 400 символов для обычного текста или 400 [оплачиваемых символов](https://docs.microsoft.com/azure/cognitive-services/speech-service/text-to-speech#pricing-note) для текста SSML и менее 10 000 абзацев
  * Для обычного текста каждый абзац отделяется нажатием клавиши **Ввод/возврат** -просмотр. [пример входного текста с открытым текстом](https://github.com/Azure-Samples/Cognitive-Speech-TTS/blob/master/CustomVoice-API-Samples/Java/en-US.txt)
  * Для текста SSML каждая часть SSML считается абзацом. SSML части должны быть разделены с помощью различных абзацев. [Пример текстового ввода](https://github.com/Azure-Samples/Cognitive-Speech-TTS/blob/master/CustomVoice-API-Samples/Java/SSMLTextInputSample.txt) для просмотра SSML
> [!NOTE]
> В китайском (континентальная часть), китайском (Гонконг), китайском (Тайвань), японском и корейском языках одно слово будет считаться двумя символами. 

## <a name="submit-synthesis-requests"></a>Отправка запросов синтеза

После подготовки входного содержимого следуйте инструкциям в [кратком руководстве по синтезу звука](https://aka.ms/long-audio-python) , чтобы отправить запрос. При наличии нескольких входных файлов необходимо будет отправить несколько запросов. 

**Коды состояния HTTP** указывают на распространенные ошибки.

| API | HTTP status code (Код состояния HTTP) | Описание | Предложение |
|-----|------------------|-------------|----------|
| Создание | 400 | Синтез голоса не включен в этом регионе. | Измените ключ подписки на речь с поддерживаемым регионом. |
|        | 400 | Допустима только **Стандартная** подписка на речь для этого региона. | Измените ключ подписки на речь на ценовую категорию "Стандартный". |
|        | 400 | Превышает ограничение в 20 000 запросов для учетной записи Azure. Перед отправкой новых запросов удалите некоторые из них. | Сервер будет иметь до 20 000 запросов для каждой учетной записи Azure. Перед отправкой новых запросов удалите некоторые из них. |
|        | 400 | Эта модель не может использоваться в синтезе речи: {modelID}. | Убедитесь, что состояние {modelID} указано правильно. |
|        | 400 | Регион для запроса не соответствует региону для модели: {modelID}. | Убедитесь, что регион {modelID} соответствует региону запроса. |
|        | 400 | Синтез голоса поддерживает только текстовый файл в кодировке UTF-8 с маркером порядка следования байтов. | Убедитесь, что входные файлы находятся в кодировке UTF-8 с маркером порядка следования байтов. |
|        | 400 | В запросе синтеза голоса допускаются только допустимые входные данные SSML. | Убедитесь, что входные выражения SSML верны. |
|        | 400 | Голосовое имя {Воиценаме} не найдено во входном файле. | Имя входного голоса SSML не соответствует ИДЕНТИФИКАТОРу модели. |
|        | 400 | Размер абзаца во входном файле должен быть меньше 10 000. | Убедитесь, что размер абзаца в файле меньше 10 000. |
|        | 400 | Длина входного файла должна составлять более 400 символов. | Убедитесь, что входной файл содержит больше 400 символов. |
|        | 404 | Не удается найти модель, объявленную в определении синтеза голоса: {modelID}. | Проверьте правильность {modelID}. |
|        | 429 | Превышает ограничение активного синтеза речи. Дождитесь завершения некоторых запросов. | Сервер может запуститься и поставить в очередь до 120 запросов для каждой учетной записи Azure. Подождите и не отправляйте новые запросы, пока не будут завершены некоторые запросы. |
| All       | 429 | Слишком много запросов. | Клиент может отправлять до 5 запросов на сервер в секунду для каждой учетной записи Azure. Сократите количество запросов в секунду. |
| Удалить    | 400 | Задача синтеза голоса по-прежнему используется. | Можно удалить только **Завершенные** или **Невыполненные**запросы. |
| жетбид   | 404 | Не удается найти указанную сущность. | Убедитесь, что идентификатор синтеза правильный. |

## <a name="regions-and-endpoints"></a>Регионы и конечные точки

Длинный аудио API доступен в нескольких регионах с уникальными конечными точками.

| Регион | Конечная точка |
|--------|----------|
| Восточная Австралия | `https://australiaeast.customvoice.api.speech.microsoft.com` |
| Центральная Канада | `https://canadacentral.customvoice.api.speech.microsoft.com` |
| Восточная часть США | `https://eastus.customvoice.api.speech.microsoft.com` |
| Центральная Индия | `https://centralindia.customvoice.api.speech.microsoft.com` |
| Центрально-южная часть США | `https://southcentralus.customvoice.api.speech.microsoft.com` |
| Юго-Восточная Азия | `https://southeastasia.customvoice.api.speech.microsoft.com` |
| южная часть Соединенного Королевства | `https://uksouth.customvoice.api.speech.microsoft.com` |
| Западная Европа | `https://westeurope.customvoice.api.speech.microsoft.com` |
| западная часть США 2 | `https://westus2.customvoice.api.speech.microsoft.com` |

## <a name="audio-output-formats"></a>Форматы вывода звука

Поддерживаются гибкие форматы вывода звука. Вы можете создавать выходные данные для каждого абзаца или объединять звуковые выходные данные в один выход, задав параметр "Конкатенатересулт". API длинного звука поддерживает следующие форматы вывода звука:

> [!NOTE]
> Формат аудио по умолчанию — Metallica-16khz-16-разрядный-Mono-PCM.

* Metallica-8khz-16-разрядный-Mono-PCM
* Metallica-16khz-16-разрядный-Mono-PCM
* Metallica-24khz-16-разрядный-Mono-PCM
* Metallica-48khz-16-разрядный-Mono-PCM
* Audio-16khz-32kbitrate-Mono-MP3
* Audio-16khz-64kbitrate-Mono-MP3
* Audio-16khz-128kbitrate-Mono-MP3
* Audio-24khz-48kbitrate-Mono-MP3
* Audio-24khz-96kbitrate-Mono-MP3
* Audio-24khz-160kbitrate-Mono-MP3

## <a name="quickstarts"></a>Краткие руководства

Мы предлагаем самые краткие руководства, которые помогут вам успешно запустить длинный аудио API. В этой таблице содержится список длинных кратких руководств по API аудио, упорядоченных по языку.

* [Краткое руководство. Python](https://aka.ms/long-audio-python)

## <a name="sample-code"></a>Образец кода
Пример кода для длинного аудио API доступен на сайте GitHub.

* [Пример кода: Python](https://github.com/Azure-Samples/Cognitive-Speech-TTS/tree/master/CustomVoice-API-Samples/Python)
* [Пример кода: C #](https://github.com/Azure-Samples/Cognitive-Speech-TTS/tree/master/CustomVoice-API-Samples/CSharp)
* [Пример кода: Java](https://github.com/Azure-Samples/Cognitive-Speech-TTS/blob/master/CustomVoice-API-Samples/Java/)
