---
title: Подготовка тестовых данных для Пользовательское распознавание речи службы речи
titleSuffix: Azure Cognitive Services
description: Если вы тестируете, чтобы увидеть, насколько точны средства распознавания речи Майкрософт — или обучить собственные модели, вам понадобятся данные (в виде звука и (или) текста). На этой странице мы расскажем о типах данных, способах их использования и управлении ими.
services: cognitive-services
author: erhopf
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 09/06/2019
ms.author: erhopf
ms.openlocfilehash: ba95723e62cec9708684665a9d141b1e39ccb831
ms.sourcegitcommit: 5b9287976617f51d7ff9f8693c30f468b47c2141
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/09/2019
ms.locfileid: "74951842"
---
# <a name="prepare-data-for-custom-speech"></a>Подготовка данных для Пользовательское распознавание речи

Если вы тестируете, чтобы увидеть, насколько точны средства распознавания речи Майкрософт — или обучить собственные модели, вам понадобятся данные в виде аудио и текста. На этой странице мы расскажем о типах данных, способах их использования и управлении ими.

## <a name="data-types"></a>Типы данных

В этой таблице перечислены допустимые типы данных, когда следует использовать каждый тип данных и рекомендуемое количество. Для создания модели требуется не каждый тип данных. Требования к данным зависят от того, создаете ли вы тестирование или обучение модели.

| Тип данных | Используется для тестирования | Рекомендуемое количество | Используется для обучения | Рекомендуемое количество |
|-----------|-----------------|----------|-------------------|----------|
| [Звук:](#audio-data-for-testing) | ДА<br>Используется для визуальной проверки | более 5 звуковых файлов | Нет | Недоступно |
| [Звуковые и пользовательские записи с метками](#audio--human-labeled-transcript-data-for-testingtraining) | ДА<br>Используется для вычисления точности | 0,5 – 5 часов звука | ДА | 1 – 1 000 часов звука |
| [Связанный текст](#related-text-data-for-training) | Нет | Недоступно | ДА | 1-200 МБ связанного текста |

Файлы должны быть сгруппированы по типу в набор данных и переданы в виде ZIP-файла. Каждый набор данных может содержать только один тип данных.

## <a name="upload-data"></a>Отправка данных

Когда вы будете готовы передать данные, перейдите на [портал пользовательское распознавание речи](https://speech.microsoft.com/customspeech), а затем щелкните **отправить данные** , чтобы запустить мастер и создать первый набор данных. Прежде чем разрешить передачу данных, вам будет предложено выбрать тип данных речи для набора данных.

![Выбор звука на портале речевого ввода](./media/custom-speech/custom-speech-select-audio.png)

Каждый передаваемый набор данных должен соответствовать требованиям к выбранному типу данных. Важно правильно отформатировать данные перед их отправкой. Это гарантирует, что данные будут правильно обрабатываться службой Пользовательское распознавание речи. Требования перечислены в следующих разделах.

После отправки набора данных существует несколько вариантов:

* Вы можете переходить на вкладку " **тестирование** " и визуально проверять только звуковые данные или аудиозаписи с метками "звук" и "человек".
* Вы можете переходить на вкладку " **обучение** " и использовать звуковые и видеозаписи или связанные текстовые данные для обучения настраиваемой модели.

## <a name="audio-data-for-testing"></a>Звуковые данные для тестирования

Звуковые данные оптимальны для тестирования точности базовой модели преобразования речи в текст или настраиваемой модели корпорации Майкрософт. Помните, что звуковые данные используются для проверки точности речи с точки зрения производительности конкретной модели. Если вы хотите количественно определить точность модели, используйте [звуковые и человеческие данные для транскрипции](#audio--human-labeled-transcript-data-for-testingtraining).

Используйте эту таблицу, чтобы убедиться, что звуковые файлы правильно отформатированы для использования с Пользовательское распознавание речи.

| Свойство | Value |
|----------|-------|
| Формат файла | RIFF (WAV) |
| Частота выборки | 8 000 Гц или 16 000 Гц |
| Каналы | 1 (моно) |
| Максимальная длина на одном аудио | 2 часа |
| Формат выборки | PCM, 16-разрядные |
| Формат архива | .zip |
| Максимальный размер архива | 2 ГБ |

> [!TIP]
> При отправке обучающих и проверочных данных Размер ZIP-файла не может превышать 2 ГБ. Если вам нужны дополнительные данные для обучения и тестирования, разделите их на несколько ZIP-файлов и отправьте их по отдельности. Позже можно будет выполнить обучение и тестирование из *нескольких* наборов данных.

Если ваш звук не удовлетворяет этим свойствам или вы хотите проверить их, мы рекомендуем скачать [Sox](http://sox.sourceforge.net) для проверки или преобразования звука. Ниже приведены некоторые примеры того, как можно выполнить каждое из этих действий в командной строке:

| Действие | Описание | Команда Sox |
|----------|-------------|-------------|
| Проверить формат звука | Используйте эту команду для проверки формата звукового файла. | `sox --i <filename>` |
| Преобразовать формат аудио | Используйте эту команду, чтобы преобразовать звуковой файл в один канал, 16-разрядный, 16 кГц. | `sox <input> -b 16 -e signed-integer -c 1 -r 16k -t wav <output>.wav` |

## <a name="audio--human-labeled-transcript-data-for-testingtraining"></a>Звуковые и человеческие данные для тестирования и обучения

Чтобы измерить точность точности речи в тексте от корпорации Майкрософт при обработке звуковых файлов, для сравнения необходимо предоставить транскрипции с метками (по словам). Хотя транскрипции с метками часто потребляют много времени, необходимо оценить точность и обучить модель для вариантов использования. Помните, что улучшения распознавания будут так же хороши, как и предоставленные данные. По этой причине важно, чтобы отправлялись только высококачественные записи.

| Свойство | Value |
|----------|-------|
| Формат файла | RIFF (WAV) |
| Частота выборки | 8 000 Гц или 16 000 Гц |
| Каналы | 1 (моно) |
| Максимальная длина на одном аудио | 60 с |
| Формат выборки | PCM, 16-разрядные |
| Формат архива | .zip |
| Максимальный размер ZIP-файла | 2 ГБ |

> [!TIP]
> При отправке обучающих и проверочных данных Размер ZIP-файла не может превышать 2 ГБ. Если вам нужны дополнительные данные для обучения и тестирования, разделите их на несколько ZIP-файлов и отправьте их по отдельности. Позже можно будет выполнить обучение и тестирование из *нескольких* наборов данных.

Для устранения таких проблем, как удаление или замена Word, требуется значительный объем данных для улучшения распознавания. Как правило, рекомендуется предоставлять записи в формате Word примерно в 10 – 1 000 часов. Транскрипции всех WAV-файлов должны содержаться в одном текстовом файле. Каждая строка файла транскрипции должна содержать имя звукового файла и соответствующую ему транскрипцию. Для разделения имени файла и транскрипции необходимо использовать символ табуляции (\t).

  Пример.
```
  speech01.wav  speech recognition is awesome
  speech02.wav  the quick brown fox jumped all over the place
  speech03.wav  the lazy dog was not amused
```
> [!NOTE]
> Для кодировки транскрипции необходимо использовать метку порядка байтов UTF-8.

Текст транскрипции нормализуется для эффективной обработки системой. Однако существуют некоторые важные нормализации, которые пользователь должен выполнить _перед_ отправкой данных в Speech Studio. Сведения о том, как использовать соответствующий язык при подготовке транскрипции, см. в разделе [Создание транскрипции с отметкой](how-to-custom-speech-human-labeled-transcriptions.md)

После сбора звуковых файлов и соответствующих транскрипций их следует упаковать как один ZIP-файл перед отправкой на [портал пользовательское распознавание речи](https://speech.microsoft.com/customspeech). Это пример набора данных с тремя звуковыми файлами и файлом транскрипции с меткой:

![Выбор звука на портале речевого ввода](./media/custom-speech/custom-speech-audio-transcript-pairs.png)

## <a name="related-text-data-for-training"></a>Связанные текстовые данные для обучения

Если у вас есть уникальные имена продуктов или компоненты и вы хотите убедиться, что они правильно распознаны, важно включить связанные текстовые данные для обучения. Для улучшения распознавания можно предоставить два типа связанных текстовых данных:

| Тип данных | Как эти данные улучшают распознавание |
|-----------|------------------------------------|
| Фразы продолжительностью и/или предложения | Они могут улучшить точность при распознавании названий продуктов или отраслевых словарей в контексте предложения. |
| Произношение | Они могут улучшить произношение нестандартных терминов, акронимов или других слов с неопределенными произношениями. |

Фразы продолжительностью может быть предоставлен как один или несколько текстовых файлов. Чем ближе текстовые данные к тем, что будет произнесено, тем выше вероятность повышения точности. Произношение следует указывать в виде одного текстового файла. Все может быть упаковано в один ZIP-файл и отправлено на [портал пользовательское распознавание речи](https://speech.microsoft.com/customspeech).

### <a name="guidelines-to-create-an-utterances-file"></a>Рекомендации по созданию файла фразы продолжительностью

Чтобы создать пользовательскую модель с помощью связанного текста, необходимо предоставить список примеров фразы продолжительностью. Эти фразы продолжительностью не обязательно должны быть верными предложениями или грамматически правильными, но они должны точно отражать речевой ввод, который вы ждете в рабочей среде. Если вы хотите, чтобы определенные термины имели более высокую плотность, можно добавить в связанный файл данных несколько предложений, включающих эти конкретные условия.

Используйте эту таблицу, чтобы убедиться, что связанный файл данных для фразы продолжительностью имеет правильный формат:

| Свойство | Value |
|----------|-------|
| Кодировка текста | Метка порядка байтов UTF-8 |
| Количество фраз в строке | 1 |
| Максимальный размер файла | 200 МБ |

Кроме того, необходимо учитывать следующие ограничения.

* Старайтесь не повторять повторяющиеся символы более четырех раз. Например: "AAAA" или "УУУУ".
* Не используйте специальные символы или символы UTF-8 выше U + 00A1.
* URI будут отклонены.

### <a name="guidelines-to-create-a-pronunciation-file"></a>Рекомендации по созданию файла произношения

При наличии редко встречающихся условий без использования стандартных произношений, которые будут встречаться или использовать пользователи, можно предоставить пользовательский файл произношения для улучшения распознавания.

> [!IMPORTANT]
> Не рекомендуется использовать эту функцию для изменения произношения часто встречающихся слов.

Сюда входят примеры произнесенного utteranceа и пользовательское произношение для каждого из них:

| Распознанная или отображаемая форма | Речевая форма |
|--------------|--------------------------|
| 3CPO | три c p o |  
| CNTK | c n t k |
| СТАНДАРТ | я тройной e |

Произнесенная форма — это фонетическая последовательность с буквами. Оно может состоять из букв, слов, слогов или сочетания всех трех.

Настройка произношения доступна на английском языке (EN-US) и немецком (de-DE). В этой таблице показаны поддерживаемые символы по языку:

| Язык | Язык | Знаки |
|----------|--------|------------|
| Английский | en-US | а, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z |
| Немецкий | de-DE | ä, ц, u, a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z |

Используйте эту таблицу, чтобы убедиться, что связанный файл данных для произношения отформатирован правильно. Файлы произношения имеют небольшой размер и не должны превышать несколько KBs.

| Свойство | Value |
|----------|-------|
| Кодировка текста | Спецификация UTF-8 (для английского языка также поддерживается ANSI) |
| число произношений в строке | 1 |
| Максимальный размер файла | 1 МБ (1 КБ для уровня Free) |

## <a name="next-steps"></a>Дальнейшие действия

* [Проверка данных](how-to-custom-speech-inspect-data.md)
* [Оценка данных](how-to-custom-speech-evaluate-data.md)
* [Обучение модели](how-to-custom-speech-train-model.md)
* [Развертывание модели](how-to-custom-speech-deploy-model.md)
