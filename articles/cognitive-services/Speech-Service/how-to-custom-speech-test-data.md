---
title: Подготовьте тестовые данные для пользовательской речи - Служба речи
titleSuffix: Azure Cognitive Services
description: При проверке точности распознавания речи корпорации Майкрософт или обучении пользовательских моделей вам понадобятся аудио- и текстовые данные. На этой странице мы рассмотрим типы данных, как использовать и управлять ими.
services: cognitive-services
author: IEvangelist
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 03/09/2020
ms.author: dapine
ms.openlocfilehash: 969c1450966d2754e6e8f00126da52a1e88181fc
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "78942683"
---
# <a name="prepare-data-for-custom-speech"></a>Подготовка данных для пользовательской речи

При проверке точности распознавания речи корпорации Майкрософт или обучении пользовательских моделей вам понадобятся аудио- и текстовые данные. На этой странице мы рассмотрим типы данных, как использовать и управлять ими.

## <a name="data-types"></a>Типы данных

В этой таблице перечислены принятые типы данных, когда следует использовать каждый тип данных, и рекомендуемое количество. Не каждый тип данных требуется для создания модели. Требования к данным будут варьироваться в зависимости от того, создаете ли вы тест или обучаете модель.

| Тип данных | Используется для тестирования | Рекомендуемое количество | Используется для обучения | Рекомендуемое количество |
|-----------|-----------------|----------|-------------------|----------|
| [Звук:](#audio-data-for-testing) | Да<br>Используется для визуального осмотра | Аудиофайлы 5 | нет | Недоступно |
| [Аудио- и теканочные транскрипты](#audio--human-labeled-transcript-data-for-testingtraining) | Да<br>Используется для оценки точности | 0,5-5 часов аудио | Да | 1-1,000 часов аудио |
| [Похожий текст](#related-text-data-for-training) | нет | Недоступно | Да | 1-200 МБ соответствующего текста |

Файлы должны быть сгруппированы по типу в набор данных и загружены в виде файла .zip. Каждый набор данных может содержать только один тип данных.

> [!TIP]
> Чтобы быстро приступить к работе, рассмотрите возможность использования выборочных данных. Посмотреть этот репозиторий GitHub для <a href="https://github.com/Azure-Samples/cognitive-services-speech-sdk/tree/master/sampledata/customspeech" target="_target">примера данных <span class="docon docon-navigate-external x-hidden-focus"></span> пользовательской речи</a>

## <a name="upload-data"></a>Отправка данных

Чтобы загрузить данные, перейдите на <a href="https://speech.microsoft.com/customspeech" target="_blank">портал <span class="docon docon-navigate-external x-hidden-focus"> </span>Custom Speech. </a> С портала нажмите **Кнопка Загрузка данных** для запуска мастера и создать свой первый набор данных. Вам будет предложено выбрать тип речевых данных для набора данных, прежде чем разрешить вам загружать данные.

![Выберите аудио с речевого портала](./media/custom-speech/custom-speech-select-audio.png)

Каждый загруженный набор данных должен соответствовать требованиям к выбираемому типу данных. Ваши данные должны быть правильно отформатированы перед их загрузкой. Правильно отформатированные данные гарантируют, что они будут точно обработаны службой custom Speech. Требования перечислены в следующих разделах.

После загрузки набора данных у вас есть несколько вариантов:

* Вы можете перейти на вкладку **Тестирование** и визуально проверить только аудио или аудио - данные транскрипции с маркировкой человека.
* Вы можете перейти на вкладку **Training** и использовать аудио-данные о транскрипции человека или связанные с ними текстовые данные для обучения пользовательской модели.

## <a name="audio-data-for-testing"></a>Аудио данные для тестирования

Аудиоданные оптимальны для проверки точности базовой модели речи к тексту корпорации Майкрософт или пользовательской модели. Имейте в виду, что аудиоданные используются для проверки точности речи в отношении производительности конкретной модели. Если вы хотите количественно осмотреть точность модели, используйте [аудио-данные о транскрипции с маркировкой человека.](#audio--human-labeled-transcript-data-for-testingtraining)

Используйте эту таблицу, чтобы убедиться, что ваши аудио файлы отформатированы правильно для использования с пользовательской речью:

| Свойство                 | Значение                 |
|--------------------------|-----------------------|
| Формат файла              | RIFF (WAV)            |
| Частота выборки              | 8000 Гц или 16 000 Гц |
| Каналы                 | 1 (моно)              |
| Максимальная длина на аудио | 2 часа               |
| Формат выборки            | PCM, 16-разрядные           |
| Формат архива           | .zip                  |
| Максимальный размер архива     | 2 ГБ                  |

[!INCLUDE [supported-audio-formats](includes/supported-audio-formats.md)]

> [!TIP]
> При загрузке данных об обучении и тестировании размер файла .zip не может превышать 2 ГБ. Если вам требуется больше данных для обучения, разделите их на несколько файлов .zip и загрузите их отдельно. Позже вы можете тренироваться из *нескольких* наборов данных. Однако тест можно только с *одного* набора данных.

Используйте <a href="http://sox.sourceforge.net" target="_blank" rel="noopener">SoX <span class="docon docon-navigate-external x-hidden-focus"></span> </a> для проверки свойств звука или преобразования существующего аудио в соответствующие форматы. Ниже приведены некоторые примеры того, как каждое из этих действий может быть сделано через командную строку SoX:

| Действие | Описание | Команда SoX |
|----------|-------------|-------------|
| Проверка формата аудио | Используйте эту команду для проверки<br>формат аудиофайла. | `sox --i <filename>` |
| Преобразование формата аудио | Используйте эту команду для преобразования<br>аудиофайл для одного канала, 16-битный, 16 КГц. | `sox <input> -b 16 -e signed-integer -c 1 -r 16k -t wav <output>.wav` |

## <a name="audio--human-labeled-transcript-data-for-testingtraining"></a>Аудио- и данные стенограммы с маркировкой человека для тестирования/обучения

Чтобы измерить точность точности речи к тексту корпорации Майкрософт при обработке аудиофайлов, необходимо предоставить транскрипции с маркировкой человека (слово за словом) для сравнения. В то время как транскрипция с маркировкой человека часто занимает много времени, необходимо оценить точность и обучить модель для ваших случаев использования. Имейте в виду, что улучшения в распознавании будут только так хорошо, как данные. По этой причине важно загружать только высококачественные транскрипты.

| Свойство                 | Значение                               |
|--------------------------|-------------------------------------|
| Формат файла              | RIFF (WAV)                          |
| Частота выборки              | 8000 Гц или 16 000 Гц               |
| Каналы                 | 1 (моно)                            |
| Максимальная длина на аудио | 2 часа (тестирование) / 60 с (обучение) |
| Формат выборки            | PCM, 16-разрядные                         |
| Формат архива           | .zip                                |
| Максимальный размер застежки-молни         | 2 ГБ                                |

[!INCLUDE [supported-audio-formats](includes/supported-audio-formats.md)]

> [!NOTE]
> При загрузке данных об обучении и тестировании размер файла .zip не может превышать 2 ГБ. Вы можете проверить только из *одного* набора данных, не забудьте сохранить его в соответствующем размере файла. Кроме того, каждый обучаемый файл не может превышать 60 секунд, в противном случае он будет ошибаться.

Для решения таких вопросов, как удаление или замена слов, для улучшения распознавания требуется значительный объем данных. Как правило, рекомендуется предоставлять транскрипции из слов по слову в течение примерно 10 до 1000 часов аудио. Транскрипции всех WAV-файлов должны содержаться в одном текстовом файле. Каждая строка файла транскрипции должна содержать имя звукового файла и соответствующую ему транскрипцию. Для разделения имени файла и транскрипции необходимо использовать символ табуляции (\t).

  Пример:
```
  speech01.wav  speech recognition is awesome
  speech02.wav  the quick brown fox jumped all over the place
  speech03.wav  the lazy dog was not amused
```

> [!IMPORTANT]
> Для кодировки транскрипции необходимо использовать метку порядка байтов UTF-8.

Текст транскрипции нормализуется для эффективной обработки системой. Тем не менее, есть некоторые важные нормализации, которые должны быть сделаны перед загрузкой данных в студию речи. Для соответствующего языка, чтобы использовать, когда вы готовите транскрипции, [посмотреть, как создать человека помечены транскрипции](how-to-custom-speech-human-labeled-transcriptions.md)

После того как вы собрали аудио файлы и соответствующие транскрипции, упаковать их в виде одного файла .zip перед загрузкой на <a href="https://speech.microsoft.com/customspeech" target="_blank">портал <span class="docon docon-navigate-external x-hidden-focus"> </span>Custom Speech. </a> Ниже приведен пример набора данных с тремя аудио файлами и файлом транскрипции с маркировкой человека:

> [!div class="mx-imgBorder"]
> ![Выберите аудио с речевого портала](./media/custom-speech/custom-speech-audio-transcript-pairs.png)

## <a name="related-text-data-for-training"></a>Связанные текстовые данные для обучения

Имена продуктов или функции, которые являются уникальными, должны включать соответствующие текстовые данные для обучения. Связанный текст помогает обеспечить правильное распознавание. Для улучшения распознавания могут быть предоставлены два типа соответствующих текстовых данных:

| Тип данных | Как эти данные улучшают распознавание |
|-----------|------------------------------------|
| Предложения (высказывания) | Улучшение точности при распознавании названий продуктов или отраслевой словарный запас в контексте предложения. |
| Произношения | Улучшение произношения необычных терминов, сокращений или других слов с неопределенными произношениями. |

Предложения могут быть предоставлены как единый текстовый файл или несколько текстовых файлов. Для повышения точности используйте текстовые данные, которые ближе к ожидаемым произнесению. Произношения должны предоставляться в виде единого текстового файла. Все может быть упаковано в виде одного почтового файла и загружено на <a href="https://speech.microsoft.com/customspeech" target="_blank">портал <span class="docon docon-navigate-external x-hidden-focus"> </span>Custom Speech. </a>

### <a name="guidelines-to-create-a-sentences-file"></a>Руководящие принципы создания файла предложений

Для создания пользовательской модели с использованием предложений необходимо предоставить список примеров высказываний. Высказывания _не_ должны быть полными или грамматически правильными, но они должны точно отражать разговорный вклад, который вы ожидаете в производстве. Если вы хотите, чтобы определенные термины имели увеличенный вес, добавьте несколько предложений, которые включают эти конкретные термины.

В качестве общего руководства адаптация к модели является наиболее эффективной, когда учебный текст максимально приближен к реальному тексту, ожидаемому в производстве. В текст обучения следует включить особый для домена жаргон и фразы, на которые вы ориентируетесь для повышения. Когда это возможно, попробуйте иметь одно предложение или ключевое слово контролируется на отдельной строке. Для ключевых слов и фраз, которые важны для вас (например, названия продуктов), вы можете скопировать их несколько раз. Но имейте в виду, не копировать слишком много - это может повлиять на общий уровень распознавания.

Используйте эту таблицу, чтобы убедиться, что связанный файл данных для высказываний отформатирован правильно:

| Свойство | Значение |
|----------|-------|
| Кодировка текста | Метка порядка байтов UTF-8 |
| Количество фраз в строке | 1 |
| Максимальный размер файла | 200 МБ |

Кроме того, необходимо учитывать следующие ограничения:

* Избегайте повторения символов более четырех раз. Например: "aaaa" или "uuuu".
* Не используйте специальные символы или UTF-8 символов выше `U+00A1`.
* URIs будет отклонен.

### <a name="guidelines-to-create-a-pronunciation-file"></a>Руководящие принципы для создания файла произношения

Если есть необычные термины без стандартных произношений, с которыми столкнутся или будут использоваться ваши пользователи, вы можете предоставить пользовательский файл произношения для улучшения распознавания.

> [!IMPORTANT]
> Не рекомендуется использовать пользовательские файлы произношения, чтобы изменить произношение общих слов.

Это включает в себя примеры произнесенного высказывания и пользовательское произношение для каждого из них:

| Признанная/отображаемые формы | Речевая форма |
|--------------|--------------------------|
| 3CPO | три c р o |
| CNTK | c n t k |
| Ieee | я тройной е |

Разговорная форма является фонетической последовательности изложены. Она может состоять из буквы, слов, слогов или комбинации всех трех.

Индивидуальное произношение доступно на`en-US`английском языке`de-DE`() и немецком языках (). В этой таблице показаны поддерживаемые символы по языку:

| Язык | Локаль | Символы |
|----------|--------|------------|
| Английский | `en-US` | `a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z` |
| Немецкий | `de-DE` | `ä, ö, ü, a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z` |

Используйте следующую таблицу, чтобы убедиться, что связанный файл данных для произношения правильно отформатирован. Файлы произношения малы и должны быть только несколько килобайт в размере.

| Свойство | Значение |
|----------|-------|
| Кодировка текста | UTF-8 BOM (ANSI также поддерживается на английском языке) |
| - произношения на строку | 1 |
| Максимальный размер файла | 1 МБ (1 КБ за бесплатный уровень) |

## <a name="next-steps"></a>Дальнейшие действия

* [Проверка данных](how-to-custom-speech-inspect-data.md)
* [Оценка данных](how-to-custom-speech-evaluate-data.md)
* [Обучение модели](how-to-custom-speech-train-model.md)
* [Развертывание модели](how-to-custom-speech-deploy-model.md)
