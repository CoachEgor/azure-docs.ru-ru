---
author: v-demjoh
manager: nitinme
ms.service: cognitive-services
ms.topic: include
ms.date: 05/15/2020
ms.author: v-demjoh
ms.openlocfilehash: c92d6569e3c92d3bad3575599283c7796bd78225
ms.sourcegitcommit: d8b8768d62672e9c287a04f2578383d0eb857950
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2020
ms.locfileid: "88068609"
---
## <a name="prerequisites"></a>Предварительные требования

Единственным предварительным требованием является наличие подписки службы "Речь Azure". Если у вас ее нет, см. руководство по [созданию новой подписки](../get-started.md#new-resource).

## <a name="download-and-install"></a>Загрузите и установите

#### <a name="windows-install"></a>[Установка (Windows)](#tab/windowsinstall)

Вот как установить интерфейс командной строки службы "Речь" в Windows:

1. Установите [.NET Framework 4.7](https://dotnet.microsoft.com/download/dotnet-framework/net471) или [.NET Core 3.0](https://dotnet.microsoft.com/download/dotnet-core/3.0).
2. Скачайте и распакуйте [ZIP-архив](https://aka.ms/speech/spx-zips.zip) интерфейса командной строки службы "Речь".
3. Перейдите в извлеченный корневой каталог `spx-zips` и извлеките необходимый подкаталог (`spx-net471` для .NET Framework 4.7 или `spx-netcore-win-x64` для .NET Core 3.0 на ЦП с архитектурой x64).

В командной строке измените каталог на это расположение, а затем введите `spx`, чтобы открыть справку по интерфейсу командной строки службы "Речь".

> [!NOTE]
> В Windows в интерфейсе командной строки службы "Речь" могут отображаться только шрифты, доступные для командной строки на локальном компьютере.
> [Терминал Windows](https://www.microsoft.com/en-us/p/windows-terminal/9n0dx20hk701) поддерживает все шрифты, создаваемые интерфейсом командной строки службы "Речь" в интерактивном режиме.
> При выводе результатов в файл текстовый редактор, например Блокнот, или веб-браузер, например Microsoft Edge, будут также отображать все шрифты.

> [!NOTE]
> При поиске команды PowerShell не проверяет локальный каталог. В PowerShell измените каталог на расположение `spx` и вызовите средство, введя `.\spx`.
> Если добавить этот каталог в путь, PowerShell и командная строка Windows обнаружат `spx` из любого каталога без префикса `.\`.

#### <a name="linux-install"></a>[Установка (Linux)](#tab/linuxinstall)

Вот как установить интерфейс командной строки службы "Речь" в Linux (ЦП с архитектурой x64):

1. Установите [.NET Core 3.0](https://dotnet.microsoft.com/download/dotnet-core/3.0).
2. Скачайте и распакуйте [ZIP-архив](https://aka.ms/speech/spx-zips.zip) интерфейса командной строки службы "Речь".
3. Перейдите в извлеченный корневой каталог `spx-zips` и извлеките `spx-netcore-30-linux-x64` в новый каталог `~/spx`.
4. В окне терминала введите следующие команды.
   1. `cd ~/spx`
   2. `sudo chmod +r+x spx`
   3. `PATH=~/spx:$PATH`

Введите `spx`, чтобы получить справку по интерфейсу командной строки службы "Речь".

#### <a name="docker-install"></a>[Установка Docker](#tab/dockerinstall)

Выполните следующие действия, чтобы установить интерфейс командной строки службы "Речь" в контейнере Docker:

1. Установите и запустите [Docker Desktop для платформы](https://www.docker.com/get-started).
1. В новой командной строке или в терминале введите следующую команду: `docker pull msftspeech/spx`.
1. Введите эту команду. Вы должны увидеть справочную информацию по интерфейсу командной строки службы "Речь": `docker run -it --rm msftspeech/spx help`.

### <a name="mount-a-directory-in-the-container"></a>Подключение каталога в контейнере

Средство командной строки службы "Речь" сохраняет параметры конфигурации в виде файлов и загружает их при выполнении любой команды (за исключением команд справки).
При использовании интерфейса командной строки службы "Речь" в контейнере Docker необходимо подключить локальный каталог из контейнера, чтобы средство могло сохранять или находить параметры конфигурации, а также считывать или записывать любые файлы (например, звуковые файлы с записанной речью), необходимые для выполнения команды.

В Windows введите следующую команду, чтобы создать локальный каталог, который интерфейс командной строки службы "Речь" сможет использовать из контейнера:

`mkdir c:\spx-data`

В Linux или Mac введите следующую команду в терминале, чтобы создать каталог и просмотреть его абсолютный путь:

```bash
mkdir ~/spx-data
cd ~/spx-data
pwd
```

При вызове интерфейса командной строки службы "Речь" используется абсолютный путь.

### <a name="run-speech-cli-in-the-container"></a>Запуск интерфейса командной строки службы "Речь" в контейнере

В этой документации показана команда `spx` интерфейса командной строки службы "Речь", используемая при установках, отличных от Docker.
При вызове команды `spx` в контейнере Docker необходимо подключить каталог в контейнере к файловой системе, в которой интерфейс командной строки службы "Речь" может хранить и находить значения конфигурации, а также считывать и записывать файлы.
Команды в Windows:

`docker run -it -v c:\spx-data:/data --rm msftspeech/spx`

Команды в Linux или Mac:

`sudo docker run -it -v /ABSOLUTE_PATH:/data --rm msftspeech/spx`

> [!NOTE]
> Замените `/ABSOLUTE_PATH` на абсолютный путь, показанный с помощью команды `pwd` в разделе выше.

Чтобы использовать команду `spx`, установленную в контейнере, всегда вводите полную версию команды, показанную выше, а затем — параметры запроса.
Например, в Windows эта команда задает ключ:

`docker run -it -v c:\spx-data:/data --rm msftspeech/spx config @key --set SUBSCRIPTION-KEY`

> [!NOTE]
> При запуске интерфейса командной строки службы "Речь" в контейнере Docker нельзя использовать микрофон или динамик компьютера.
> Чтобы использовать эти устройства, передайте звуковые файлы в интерфейс командной строки службы "Речь" и обратно для записи или воспроизведения за пределами контейнера Docker.
> Средство интерфейса командной строки службы "Речь" может получить доступ к локальному каталогу, который вы настроили, выполнив описанные выше действия.

***

## <a name="create-subscription-config"></a>Создание конфигурации подписки

Чтобы начать работу с интерфейсом командной строки службы "Речь", сначала необходимо ввести ключ подписки службы "Речь" и сведения о регионе. Идентификатор региона можно узнать в разделе о [поддержке регионов](https://docs.microsoft.com/azure/cognitive-services/speech-service/regions#speech-sdk). Указав ключ подписки и идентификатор региона (например, `eastus` и `westus`), выполните следующие команды.

```shell
spx config @key --set SUBSCRIPTION-KEY
spx config @region --set REGION
```

Теперь проверку подлинности для подписки можно выполнять для будущих запросов SPX. Если необходимо удалить любое из этих сохраненных значений, выполните `spx config @region --clear` или `spx config @key --clear`.
