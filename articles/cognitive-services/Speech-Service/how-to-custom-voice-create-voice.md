---
title: Создание пользовательского голоса - Речевой сервис
titleSuffix: Azure Cognitive Services
description: Когда вы будете готовы загрузить свои данные, перейдите на портал Custom Voice. Создайте или выберите проект Custom Voice. Проект должен использовать правильный язык/локал и гендерные свойства в качестве данных, которые вы намерены использовать для обучения голосу.
services: cognitive-services
author: erhopf
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 11/04/2019
ms.author: erhopf
ms.openlocfilehash: bbe1d651a7d2d2cac1b1aa78b815b2797ad185c5
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "76717329"
---
# <a name="create-a-custom-voice"></a>Создание пользовательского голоса

В [подготовке данных для Custom Voice](how-to-custom-voice-prepare-data.md)мы описали различные типы данных, которые можно использовать для обучения пользовательскому голосу, и различные требования к формату. После того как вы подготовили свои данные, вы можете начать загружать их на [портал Custom Voice](https://aka.ms/custom-voice-portal)или через пользовательский aPI обучения голоса. Здесь мы описываем шаги обучения пользовательский голос через портал.

> [!NOTE]
> Эта страница предполагает, что вы читали [Начало с пользовательским голосом](how-to-custom-voice.md) и [подготовить данные для пользовательского голоса](how-to-custom-voice-prepare-data.md), и создали пользовательский голос проекта.

Проверьте языки, поддерживаемые для пользовательского голоса: [язык для настройки.](language-support.md#customization)

## <a name="upload-your-datasets"></a>Обновление наборов данных

Когда вы будете готовы загрузить свои данные, перейдите на [портал Custom Voice.](https://aka.ms/custom-voice-portal) Создайте или выберите проект Custom Voice. Проект должен использовать правильный язык/локал и гендерные свойства в качестве данных, которые вы намерены использовать для обучения голосу. Например, `en-GB` выберите, если аудиозаписи у вас есть сделано на английском языке с акцентом Великобритании.

Перейдите на вкладку **Данные** и нажмите **загрузить данные.** В мастере выберите правильный тип данных, который соответствует тому, что вы подготовили.

Каждый загруженный набор данных должен соответствовать требованиям к выбираемому типу данных. Важно правильно отформатировать данные перед их загрузкой. Это гарантирует, что данные будут точно обработаны службой Custom Voice. Подготовьте [данные для пользовательского голоса](how-to-custom-voice-prepare-data.md) и убедитесь, что ваши данные были правильно отформатированы.

> [!NOTE]
> Пользователи бесплатной подписки (F0) могут загружать два набора данных одновременно. Пользователи стандартной подписки (S0) могут загружать пять наборов данных одновременно. Если вы достигли предела, подождите, пока завершится импортирование хотя бы одного из наборов данных. Затем повторите попытку.

> [!NOTE]
> Максимальное количество наборов данных, разрешенных к импорту за подписку, составляет 10 файлов .zip для пользователей бесплатной подписки (F0) и 500 для пользователей стандартной подписки (S0).

Наборы данных автоматически проверяются после нажатия кнопки загрузки. Проверка данных включает серию проверок аудиофайлов для проверки формата, размера и частоты выборки. Исправьте ошибки, если таковые имеется, и отправьте их снова. При успешном инициировании запроса на импорт данных следует увидеть запись в таблице данных, соответствующую только что загруженному набору данных.

В следующей таблице приведены состояния обработки импортированных наборов данных.

| Штат | Значение |
| ----- | ------- |
| Обработка | Ваш набор данных был получен и обрабатывается. |
| Выполнено | Ваш набор данных был проверен и теперь может использоваться для создания голосовой модели. |
| Ошибка | Ваш набор данных был сбой во время обработки из-за многих причин, например, ошибки файла, проблемы с данными или проблемы сети. |

После завершения проверки можно увидеть общее количество совпадающих высказываний для каждого из наборов данных в столбце **Utterances.** Если выбранный вами тип данных требует длительной сегментации звука, эта колонка отражает только высказывания, которые мы сегментировали для вас на основе ваших стенограмм, либо через службу транскрипции речи. Вы можете дополнительно загрузить проверенный набор данных для просмотра подробных результатов успешно импортируемых высказываний и их картографических транскриптов. Подсказка: длительное аудио сегментация может занять более часа, чтобы завершить обработку данных.

Для наборов данных en-US и zh-CN вы можете загрузить отчет, чтобы проверить результаты произношения и уровень шума для каждой из ваших записей. Оценка произношению дается в диапазоне от 0 до 100. Оценка ниже 70 обычно означает ошибку в речи или несоответствие в сценарии. Заметный акцент уменьшает оценку произношения и влияет на созданный цифровой голос.

Более высокий коэффициент сигнала и шума (SNR) обозначает более низкий уровень шума в звуковом файле. Обычно SNR выше 50 можно достичь, производя запись в профессиональных студиях. Звуковой файл с SNR менее 20 может привести к явному шуму в созданном голосе.

Рассмотрите возможность повторной записи любых высказываний с низкой оценкой произношения или слабым SNR. Если повторная запись невозможна, исключите эти высказывания из набора данных.

## <a name="build-your-custom-voice-model"></a>Создайте пользовательскую голосовую модель

После проверки набора данных его можно использовать для создания пользовательской голосовой модели.

1.  Перейдите к **тексту к речи > пользовательских > обучения голосу.**

2.  Нажмите **Модель поезда**.

3.  Затем введите **имя** и **описание,** чтобы помочь вам определить эту модель.

    Тщательно выбирайте имя. Имя, которое здесь вводится, будет использоваться, чтобы указать голос в запросе на синтез речи, как часть входных данных SSML. Допускаются только буквы, цифры и несколько \_знаков препинания, такие как -, и (', ') разрешены. Используйте разные имена для различных голосовых моделей.

    Общее использование поля **описания** — запись имен наборов данных, которые использовались для создания модели.

4.  На странице **обучающие данные Select** выберите один или несколько наборов данных, которые вы хотели бы использовать для обучения. Проверьте количество высказываний, прежде чем отправлять их. Вы можете начать с любого количества высказываний для электронных моделей голоса и рж-CN. Для других мест, вы должны выбрать более 2000 высказываний, чтобы иметь возможность тренировать голос.

    > [!NOTE]
    > Двойные имена аудио будут удалены из обучения. Убедитесь, что выбранные наборы данных не содержат одни хиноростных имен в нескольких файлах .zip.

    > [!TIP]
    > Для получения качественных результатов требуется использование наборов данных из одного и того же динамика. Когда наборы данных, которые вы представили для обучения, содержат в общей сложности менее 6000 различных высказываний, вы будете тренировать свою голосовую модель с помощью метода статистического параметрического синтеза. В случае, если ваши обучающие данные превышают общее число 6000 различных высказываний, вы начнете тренировочный процесс с техникой синтеза конкатации. Обычно технология конкатации может привести к более естественным и высокой точности голосовых результатов. [Обратитесь в команду Custom Voice,](https://go.microsoft.com/fwlink/?linkid=2108737) если вы хотите обучить модель с помощью новейшей технологии Neural TTS, которая может производить цифровой голос, эквивалентный общедоступным [нейронным голосам.](language-support.md#neural-voices)

5.  Нажмите **Поезд,** чтобы начать создавать свою голосовую модель.

Таблица обучения отображает новую запись, соответствующую этой недавно созданной модели. Таблица также отображает статус: Обработка, Успешное, Неудачное.

Показанный статус отражает процесс преобразования набора данных в голосовую модель, как показано здесь.

| Штат | Значение |
| ----- | ------- |
| Обработка | Создается ваша голосовая модель. |
| Выполнено | Ваша голосовая модель была создана и может быть развернута. |
| Ошибка | Ваша голосовая модель была неудачной в обучении из-за многих причин, например, невидимые проблемы с данными или сетевые проблемы. |

Время обучения зависит от объема обработанных звуковых данных. Обычный диапазон времени варьируется от 30 минут для сотен выражений до 40 часов — для 20 000 выражений. Как только обучение модели удается, вы можете начать тестировать его.

> [!NOTE]
> Пользователи бесплатной подписки (F0) могут одновременно тренировать одноголосовый шрифт. Пользователи стандартной подписки (S0) могут тренировать три голоса одновременно. Если вы достигли предела, подождите, пока хотя бы один из ваших голосов завершит обучение, а затем повторите попытку.

> [!NOTE]
> Максимальное количество голосовых моделей, разрешенных к обучению за подписку, составляет 10 моделей для пользователей бесплатной подписки (F0) и 100 для стандартных подписок (S0).

Если вы используете нейронные возможности тренировки голоса, вы можете выбрать для обучения модели, оптимизированной для сценариев потоковой передачи в реальном времени, или HD нейронной модели, оптимизированной для асинхронного [синтеза длинного звука.](long-audio-api.md)  

## <a name="test-your-voice-model"></a>Проверьте голосовую модель

После успешного создания голос можно протестировать перед развертыванием.

1.  Перейдите к **Текст-к-речи > пользовательский голос > тестирования.**

2.  Нажмите **Добавить тест**.

3.  Выберите одну или несколько моделей, которые вы хотели бы протестировать.

4.  Предоставьте текст, который вы хотите, чтобы голос (ы) говорить. Если вы выбрали для тестирования нескольких моделей одновременно, один и тот же текст будет использоваться для тестирования для разных моделей.

    > [!NOTE]
    > Язык текста должен быть таким же, что и язык голоса. Тестировать можно только успешно обученные модели. Только простой текст поддерживается на этом этапе.

5.  Нажмите кнопку **Создать**.

После того, как вы отправили тестовый запрос, вы вернетесь на страницу тестирования. Теперь таблица содержит запись, соответствующую новому запросу, и столбец состояния. Синтезирование голоса может занять несколько минут. Когда столбец состояния говорит **Succeeded**, вы можете воспроизвести звук, или скачать ввод текста (файл .txt) и аудио выход (файл .wav), и дальнейшее прослушивание последнего для качества.

Вы также можете найти результаты теста на странице детализации каждой модели, выбранной для тестирования. Перейдите на вкладку **Training** и нажмите на имя модели, чтобы войти на страницу детали модели.

## <a name="create-and-use-a-custom-voice-endpoint"></a>Создание и использование пользовательской голосовой точки

После того как вы успешно создали и протестировали свою голосовую модель, она развертывается в пользовательской конечной точке службы "Преобразование текста в речь". Затем эта конечная точка используется вместо обычной конечной точки при выполнении запросов службы "Преобразование текста в речь" через REST API. Пользовательская конечная точка может быть вызвана только подпиской, которую вы использовали для развертывания шрифта.

Чтобы создать новую конечную точку пользовательского голоса, перейдите на текстовые > голосовой > **развертывание >.** Выберите **Добавить конечную точку** и введите **имя** и **описание** для вашей пользовательской конечной точки. Затем выберите пользовательскую голосовую модель, с помощью которых вы хотели бы связать эту конечную точку.

После нажатия кнопки **Добавить** в таблице конечных точек вы увидите запись для новой конечной точки. Создание конечной точки может занять несколько минут. При успешном использовании **Succeeded**состояния развертывания конечная точка готова к использованию.

> [!NOTE]
> Пользователи бесплатной подписки (F0) могут развертывать только одну модель. Пользователи стандартной подписки (S0) могут создавать до 50 конечных точек, каждая из которых имеет свой собственный голос.

> [!NOTE]
> Чтобы использовать пользовательский голос, необходимо указать имя голосовой модели, использовать пользовательский URI непосредственно в запросе HTTP и использовать ту же подписку, чтобы пройти проверку подлинности службы TTS.

После развертывания конечной точки имя конечных точек отображается в виде ссылки. Нажмите на ссылку, чтобы отобразить информацию, специфичную для вашей конечной точки, такую как ключ конечных точек, URL-адрес конечных точек и код образца.

Тестирование конечной точки в сети также доступно через портал настраиваемых пользовательских голосовых моделей. Чтобы проверить конечную точку, выберите **конечную точку Check** на странице **детали конечных точек.** Откроется страница тестирования конечной точки. Введите текст, который будет произнесен (в простом тексте или [формате SSML](speech-synthesis-markup.md) в текстовом поле. Нажмите кнопку **Воспроизведение**, чтобы прослушать текст с помощью пользовательской голосовой модели. Эта функция тестирования будет взиматься с пользовательского использования синтеза речи.

Пользовательская конечная точка функционально идентична стандартной конечной точке, используемой для запросов преобразования текста в речь. Дополнительные сведения см. в статье о [REST API](rest-text-to-speech.md).

## <a name="next-steps"></a>Дальнейшие действия

* [Руководство: Запись образцов голоса](record-custom-voice-samples.md)
* [Ссылка aPI текста к речи](rest-text-to-speech.md)
* [Длинный аудио API](long-audio-api.md)
