---
title: Как использовать шаблоны создания языка для речевых ответов — служба речи
titleSuffix: Azure Cognitive Services
description: Из этой статьи вы узнаете, как использовать шаблоны формирования языка с пользовательскими командами. Шаблоны создания языка позволяют настроить отклики, отправляемые клиенту, и ввести дисперсию в ответах.
services: cognitive-services
author: singhsaumya
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 06/18/2020
ms.author: sausin
ms.openlocfilehash: 0cbc57922b31f1b3879bb2cad8a988a1ba4cc368
ms.sourcegitcommit: 4042aa8c67afd72823fc412f19c356f2ba0ab554
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/24/2020
ms.locfileid: "85307831"
---
# <a name="add-language-generation-templates-for-speech-responses"></a>Добавление шаблонов создания языков для речевых ответов

Из этой статьи вы узнаете, как использовать шаблоны формирования языка с пользовательскими командами. Шаблоны создания языка позволяют настроить отклики, отправляемые клиенту, и ввести дисперсию в ответах. Настройка создания языка может быть достигнута:

- Использование шаблонов создания языка
- Использование адаптивных выражений

## <a name="prerequisites"></a>Предварительные требования

Необходимо выполнить действия, описанные в следующих статьях:

> [!div class="checklist"]
> * [Как создать приложение с помощью простых команд](./how-to-custom-commands-create-application-with-simple-commands.md)
> * [Как добавить параметры в команды](./how-to-custom-commands-add-parameters-to-commands.md)

## <a name="language-generation-templates-overview"></a>Общие сведения о шаблонах создания языка

Шаблоны пользовательских команд основаны на BotFramework [шаблонах LG](https://aka.ms/speech/cc-lg-format). Поскольку пользовательские команды при необходимости создают новый шаблон LG (то есть для речевых ответов в параметрах или действиях), указывать имя шаблона LG не требуется. Итак, вместо того, чтобы определять шаблон следующим образом:

 ```
    # CompletionAction
    - Ok, turning {OnOff} the {SubjectDevice}
    - Done, turning {OnOff} the {SubjectDevice}
    - Proceeding to turn {OnOff} {SubjectDevice}
 ```

Необходимо определить только текст шаблона без имени, как показано ниже.

> [!div class="mx-imgBorder"]
> ![Пример редактора шаблонов](./media/custom-commands/template-editor-example.png)


Это изменение представляет вариацию голосовых ответов, отправляемых клиенту. Таким образом, для того же utterance соответствующий речевой ответ будет случайно извлечен из предоставленных параметров.

Использование преимуществ шаблонов LG также позволяет определять сложные речевые ответы для команд с помощью адаптивных выражений. Дополнительные сведения можно найти в [формате шаблонов LG](https://aka.ms/speech/cc-lg-format) . По умолчанию пользовательские команды поддерживают все возможности со следующими незначительными различиями:

* В сущностях шаблонов LG представлены как $ {имя_объекта}. В пользовательских командах не используются сущности, но параметры можно использовать в качестве переменных с одним из следующих представлений: $ {parameterName} или {parameterName}
* Композиция и расширение шаблона не поддерживаются в пользовательских командах. Это происходит потому, что вы никогда не редактируете `.lg` файл напрямую, но только ответы автоматически созданных шаблонов.
* Пользовательские функции, добавленные LG, не поддерживаются в пользовательских командах. Стандартные функции по-прежнему поддерживаются.
* Параметры (replaceNull & Линебреакстиле) не поддерживаются в пользовательских командах.

## <a name="add-template-responses-to-turnonoff-command"></a>Добавление ответов шаблона в команду Турнонофф

Измените команду **турнонофф** , чтобы добавить новый параметр со следующей конфигурацией:

| Параметр            | Рекомендуемое значение       | 
| ------------------ | --------------------- | 
| Имя               | `SubjectContext`         | 
| Является глобальным          | unchecked             | 
| Обязательно           | unchecked               | 
| Тип               | Строка                |
| Значение по умолчанию      | `all` |
| Параметр Configuration      | Принять предопределенные входные значения из внутреннего каталога | 
| Предопределенные входные значения | `room`, `bathroom`, `all`|

### <a name="modify-completion-rule"></a>Изменение правила завершения

Измените раздел **действия** существующего правила завершения **конфирматионреспонсе**. Во всплывающем окне **изменение действия** перейдите в **Редактор шаблонов** и замените текст следующим примером.

```
- IF: @{SubjectContext == "all" && SubjectDevice == "lights"}
    - Ok, turning all the lights {OnOff}
- ELSEIF: @{SubjectDevice == "lights"}
    - Ok, turning {OnOff} the {SubjectContext} {SubjectDevice}
- ELSE:
    - Ok, turning the {SubjectDevice} {OnOff}
    - Done, turning {OnOff} the {SubjectDevice}
```

**Обучить** и **протестируйте** приложение следующим образом. Обратите внимание на разновидность ответов из-за использования нескольких альтернативных вариантов значения шаблона, а также использование адаптивных выражений.

* Входные данные: включить телевизор
* Выходные данные: ОК, включение телевизора
* Входные данные: включить телевизор
* Выходные данные: готово, включен ТВ
* Входные данные: отключение индикаторов
* Выходные данные: ОК, отключение всех световых индикаторов
* Входные данные: отключение освещения комнаты
* Выходные данные: ОК, выключение освещения комнаты

## <a name="use-custom-voice"></a>Использование настраиваемого голоса

Другим способом настройки ответов на пользовательские команды является выбор пользовательского выходного голоса. Для переключения голоса по умолчанию на пользовательский Voice выполните следующие действия.

1. В приложении "пользовательские команды" выберите **Параметры** в левой области.
1. Выберите **Пользовательский голосовое** значение в средней области.
1. Выберите нужный пользовательский или общедоступный голосовое значение из таблицы.
1. Щелкните **Сохранить**.

> [!div class="mx-imgBorder"]
> ![Примеры предложений с параметрами](media/custom-commands/select-custom-voice.png)

> [!NOTE]
> - Для **общих голосов** **типы нейронов** доступны только для конкретных регионов. Сведения о проверке доступности см. в статье [Стандартные и нейронные голоса по регионам и конечным точкам](https://docs.microsoft.com/azure/cognitive-services/speech-service/regions#standard-and-neural-voices).
> - Для **пользовательских голосов**их можно создать на странице настраиваемого голосового проекта. См. статью Начало [работы с пользовательским голосовым стандартом](./how-to-custom-voice.md).

Теперь приложение будет отвечать на выбранный голоса вместо голоса по умолчанию.

## <a name="next-steps"></a>Следующие шаги

> [!div class="nextstepaction"]
> [Интегрируйте пользовательские команды с помощью речевого пакета SDK](./how-to-custom-commands-setup-speech-sdk.md).