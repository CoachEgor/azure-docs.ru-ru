---
title: Общие сведения об интерфейсе командной строки службы "Речь"
titleSuffix: Azure Cognitive Services
description: Узнайте, как использовать программу командной строки для работы со службой "Речь" без кода и с минимальной настройкой.
services: cognitive-services
author: trevorbye
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: quickstart
ms.date: 04/04/2020
ms.author: trbye
ms.openlocfilehash: 3af3134f715dc124b4aee3ac0a7bfbf11df6a462
ms.sourcegitcommit: a989fb89cc5172ddd825556e45359bac15893ab7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2020
ms.locfileid: "85801875"
---
# <a name="learn-the-basics-of-the-speech-cli"></a>Основные сведения об интерфейсе командной строки службы "Речь"

В этой статье вы ознакомитесь с основными вариантами использования интерфейса командной строки службы "Речь" (программы, которая используется для работы с этой службой) без написания кода. Вы можете легко узнать, подходит ли служба "Речь" для вашего варианта использования, быстро протестировав ее основные возможности без создания среды разработки и написания кода. Кроме того, интерфейс командной строки службы "Речь" готов к использованию в рабочей среде и может применяться для автоматизации простых рабочих процессов в службе "Речь" с помощью `.bat` или скриптов оболочки.

[!INCLUDE [](includes/spx-setup.md)]

## <a name="basic-usage"></a>Базовое использование

В этом разделе описано несколько основных команд SPX, которые зачастую удобно использовать для первого тестирования и экспериментов. Начните с выполнения нескольких операций распознавания речи с микрофона по умолчанию, выполнив следующую команду:

```shell
spx recognize --microphone
```

После ввода этой команды SPX начнет прослушивать звук на текущем активном устройстве ввода и остановится при нажатии клавиши `ENTER`. Затем записанная речь перевод распознается и преобразуется в текст в выходных данных консоли. Синтез текста из речи также легко выполнить с помощью интерфейса командной строки службы "Речь". 

Выполнение следующей команды приведет к использованию введенного текста в качестве входных данных и выводу синтезированной речи на текущее активное устройство вывода.

```shell
spx synthesize --text "Testing synthesis using the Speech CLI" --speakers
```

С помощью интерфейса командной строки службы "Речь" помимо распознавания и синтеза речи, можно также выполнить перевод речи. Как и в приведенной выше команде распознавания речи, выполните следующую команду, чтобы записать звук с микрофона по умолчанию и перевести полученный текст на целевой язык.

```shell
spx translate --microphone --source en-US --target ru-RU --output file C:\some\file\path\russian_translation.txt
```

В этой команде указываются оба языка: исходный (язык, **с** которого выполняется перевод) и целевой (язык, **на** который переводится текст). При использовании аргумента `--microphone` звук будет прослушиваться на текущем активном устройстве ввода, а при нажатии клавиши `ENTER` этот процесс остановится. Выходные данные — это переведенный на целевой язык текст, записанный в текстовый файл.

> [!NOTE]
> Список всех поддерживаемых языков с соответствующими кодами языков см. в [статье о языках и региональных параметрах](language-support.md).

## <a name="batch-operations"></a>Пакетные операции

Команды в предыдущем разделе прекрасно подходят для быстрого ознакомления с работой службы "Речь". Однако чтобы определить, подходит ли она для вашего варианта использования, вам, скорее всего, потребуется выполнить пакетные операции по ряду уже имеющихся входных данных, чтобы увидеть, как служба справляется с различными сценариями. В этом разделе показано, как:

* выполнить пакетное распознавание речи в каталоге звуковых файлов;
* выполнить итерацию по файлу `.tsv` и запустить пакетный синтез текста из речи.

## <a name="batch-speech-recognition"></a>Пакетное распознавание речи

Если у вас есть каталог звуковых файлов, с помощью интерфейса командной строки службы "Речь" можно легко и быстро выполнить пакетное распознавание речи. Просто выполните следующую команду, указав каталог с помощью команды `--files`. В этом примере вы добавляете `\*.wav` к каталогу для распознавания всех имеющихся в нем файлов `.wav`. Кроме того, укажите аргумент `--threads`, чтобы запустить распознавание 10 параллельных потоков.

> [!NOTE]
> Аргумент `--threads` можно также использовать в следующем разделе для команд `spx synthesize`. Доступные потоки будут зависеть от ЦП и его текущей загрузки в процентах.

```shell
spx recognize --files C:\your_wav_file_dir\*.wav --output file C:\output_dir\speech_output.tsv --threads 10
```

Распознанная речь записывается в `speech_output.tsv` с помощью аргумента `--output file`. Ниже приведен пример файла структуры выходного файла.

```output
audio.input.id    recognizer.session.started.sessionid    recognizer.recognized.result.text
sample_1    07baa2f8d9fd4fbcb9faea451ce05475    A sample wave file.
sample_2    8f9b378f6d0b42f99522f1173492f013    Sample text synthesized.
```

## <a name="batch-text-to-speech-synthesis"></a>Пакетный синтез речи из текста

Самый простой способ выполнить пакетный синтез речи из текста — создать новый файл `.tsv` (с разделителями-табуляторами) и использовать команду `--foreach` в интерфейсе командной строки службы "Речь". Обратите внимание на следующий файл `text_synthesis.tsv`:

```output
audio.output    text
C:\batch_wav_output\wav_1.wav    Sample text to synthesize.
C:\batch_wav_output\wav_2.wav    Using the Speech CLI to run batch-synthesis.
C:\batch_wav_output\wav_3.wav    Some more text to test capabilities.
```

 Затем выполните команду, чтобы указать `text_synthesis.tsv`, выполните синтез для каждого поля `text` и запишите результат по соответствующему пути `audio.output` в виде файла `.wav`. 

```shell
spx synthesize --foreach in @C:\your\path\to\text_synthesis.tsv
```

Эта команда эквивалентна запуску **`spx synthesize --text Sample text to synthesize --audio output C:\batch_wav_output\wav_1.wav`для каждой** записи в файле `.tsv`. Обратите внимание на несколько моментов.

* Заголовки столбцов (`audio.output` и `text`) соответствуют аргументам командной строки `--audio output` и `--text` соответственно. Аргументы командной строки, содержащие несколько частей, например `--audio output`, должны быть отформатированы в файле без пробелов, начальных дефисов и точек, разделяющих строки, например `audio.output`. Все остальные имеющиеся аргументы командной строки можно добавить в файл в виде дополнительных столбцов с соблюдением данной структуры.
* Если файл отформатирован таким образом, для `--foreach` не требуется передавать дополнительные аргументы.
* Обязательно отделите каждое значение в `.tsv` **табуляцией**.

Однако заголовки столбцов вашего файла `.tsv` могут **не соответствовать** аргументам командной строки, как в следующем примере.

```output
wav_path    str_text
C:\batch_wav_output\wav_1.wav    Sample text to synthesize.
C:\batch_wav_output\wav_2.wav    Using the Speech CLI to run batch-synthesis.
C:\batch_wav_output\wav_3.wav    Some more text to test capabilities.
```

Эти имена полей можно переопределить надлежащим образом, используя следующий синтаксис в вызове `--foreach`. Это тот же вызов, что и выше.

```shell
spx synthesize --foreach audio.output;text in @C:\your\path\to\text_synthesis.tsv
```

## <a name="next-steps"></a>Дальнейшие действия

* Пройдите краткое руководство по [распознаванию](./quickstarts/speech-to-text-from-microphone.md) или [синтезу](./quickstarts/text-to-speech.md) речи с помощью пакета SDK.
