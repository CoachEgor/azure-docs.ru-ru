---
title: Краткое руководство. Распознавание речи с помощью Unity в службе "Речь"
titleSuffix: Azure Cognitive Services
description: В этом руководстве объясняется, как создать приложение для преобразования речи в текст, использующее Unity и пакет SDK службы "Речь" для Unity (бета-версия). После завершения вы сможете преобразовывать речь в текст в режиме реального времени с использованием микрофона компьютера.
services: cognitive-services
author: jhakulin
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: quickstart
ms.date: 07/23/2019
ms.author: jhakulin
ms.openlocfilehash: 425cacb22865e64a996c653477120a5f7f410c9a
ms.sourcegitcommit: 9dc7517db9c5817a3acd52d789547f2e3efff848
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2019
ms.locfileid: "68405938"
---
# <a name="quickstart-recognize-speech-with-the-speech-sdk-for-unity-beta"></a>Краткое руководство. Распознавание речи с помощью пакета SDK службы "Речь" для Unity (бета-версия)

Также доступны краткие руководства по [преобразованию текста в речь](quickstart-text-to-speech-csharp-unity.md).

[!INCLUDE [Selector](../../../includes/cognitive-services-speech-service-quickstart-selector.md)]

В этом руководстве объясняется, как создать приложение для преобразования речи в текст с помощью [Unity](https://unity3d.com/) и пакета SDK службы "Речь" для Unity (бета-версия).
После завершения вы сможете преобразовывать речь в текст в режиме реального времени с использованием микрофона компьютера.
Если вы не знакомы с Unity, рекомендуется изучить [Unity User Manual (2018.3)](https://docs.unity3d.com/Manual/UnityManual.html) (Руководство пользователя Unity (2018.3)) перед началом разработки приложения.

> [!NOTE]
> Пакет SDK службы "Речь" для Unity в настоящее время доступен в бета-версии.
> Он поддерживает Windows Desktop (x86 и x64) или универсальную платформу Windows (x86, x64, ARM и ARM64) и Android (x86 ARM32/64).

## <a name="prerequisites"></a>Предварительные требования

Чтобы выполнить этот проект, вам потребуется:

* [Unity 2018.3 или более поздней версии](https://store.unity.com/) с [Unity 2019.1, добавляющий поддержку для UWP ARM64](https://blogs.unity3d.com/2019/04/16/introducing-unity-2019-1/#universal)
* [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/)
     * Для поддержки ARM64 установите [дополнительные инструменты сборки для ARM64 и Windows 10 SDK для ARM64](https://blogs.windows.com/buildingapps/2018/11/15/official-support-for-windows-10-on-arm-development/)
* Ключ подписки для службы "Речь". [Его можно получить бесплатно](get-started.md).
* Доступ к микрофону компьютера.

## <a name="create-a-unity-project"></a>Создание проекта Unity

* Запустите Unity и на вкладке **Проекты** выберите **Создать**.
* Для **имени проекта** укажите значение **csharp-unity**, для **шаблона** — **3D** и выберите расположение.
  Затем щелкните **Создать проект**.
* Через некоторое время должно появиться окно Unity Editor.

## <a name="install-the-speech-sdk"></a>Установка пакета SDK службы "Речь"

[!INCLUDE [License Notice](../../../includes/cognitive-services-speech-service-license-notice.md)]

* Пакет SDK службы "Речь" для Unity (бета-версия) упакован как пакет ресурсов Unity (.unitypackage).
  Скачать эту версию можно [здесь](https://aka.ms/csspeech/unitypackage).
* Импортируйте пакет SDK службы "Речь", выбрав **Ресурсы-контейнеры** > **Импорт пакета** > **Custom Package** (Пользовательский пакет).
  Дополнительные сведения см. в [документации по Unity](https://docs.unity3d.com/Manual/AssetPackages.html).
* В средстве выбора файлов выберите файл пакета SDK службы "Речь" формата UNITYPACKAGE, скачанный ранее.
* Убедитесь, что выбраны все файлы, а затем щелкните **Импорт**:

  ![Снимок экрана с Unity Editor при импортировании пакета ресурсов SDK службы "Речь" для Unity](media/sdk/qs-csharp-unity-01-import.png)

## <a name="add-ui"></a>Добавление пользовательского интерфейса

Мы добавили к нашей сцене минимальный пользовательский интерфейс, состоящий из кнопки для запуска распознавания речи и текстового поля для отображения результата.

* В [окне иерархии](https://docs.unity3d.com/Manual/Hierarchy.html) (по умолчанию слева) показан пример сцены создания проекта Unity.
* В верхней части окна иерархии щелкните **Создать**, а затем **Пользовательский интерфейс** > **Кнопка**.
* Будут созданы три игровых объекта, которые можно увидеть в окне иерархии: объект **Кнопка**, вложенный в объект **Полотно**, и объект **EventSystem**.
* [Перемещайтесь по представлению сцены](https://docs.unity3d.com/Manual/SceneViewNavigation.html) для удобного просмотра полотна и кнопки в [представлении сцены](https://docs.unity3d.com/Manual/UsingTheSceneView.html).
* Щелкните объект **Кнопка** в окне иерархии, чтобы отобразить его параметры в [окне инспектора](https://docs.unity3d.com/Manual/UsingTheInspector.html) (по умолчанию справа).
* Задайте значение **0** свойствам **Pos X** и **Pos Y**, чтобы кнопка была расположена в середине полотна.
* Снова нажмите кнопку **Создать** в верхней части окна иерархии и выберите **Пользовательский интерфейс** > **Текст**, чтобы создать текстовое поле.
* Щелкните объект **Текст** в окне иерархии, чтобы отобразить его параметры в [окне инспектора](https://docs.unity3d.com/Manual/UsingTheInspector.html) (по умолчанию справа).
* Задайте значения **0** и **120** свойствам **Pos X** и **Pos Y**, а значения **240** и **120** свойствам **Ширина** и **Высота**, чтобы убедиться, что текстовое поле и кнопка не перекрываются.

По завершении пользовательский интерфейс должен выглядеть примерно так:

[![Снимок экрана пользовательского интерфейса краткого руководства в Unity Editor](media/sdk/qs-csharp-unity-02-ui-inline.png)](media/sdk/qs-csharp-unity-02-ui-expanded.png#lightbox)

## <a name="add-the-sample-code"></a>Добавление примеров кода

1. В [окне проекта](https://docs.unity3d.com/Manual/ProjectView.html) (по умолчанию слева внизу) нажмите кнопку **Создать**, а затем выберите **Скрипт C#** . Назовите скрипт `HelloWorld`.

1. Отредактируйте скрипт, дважды щелкнув его.

   > [!NOTE]
   > Чтобы настроить, какой редактор кода будет запускаться, в разделе **Правка** > **Настройки** ознакомьтесь с [руководством пользователя Unity](https://docs.unity3d.com/Manual/Preferences.html).

1. Замените весь код на приведенный ниже:

   [!code-csharp[Quickstart Code](~/samples-cognitive-services-speech-sdk/quickstart/csharp-unity/Assets/Scripts/HelloWorld.cs#code)]

1. Найдите строку `YourSubscriptionKey` и замените ее ключом подписки службы "Речь".

1. Найдите и замените строку `YourServiceRegion` на [регион](regions.md), связанный с вашей подпиской. Например, если вы используете бесплатную пробную версию, ваш регион — `westus`.

1. Сохраните изменения в скрипте.

1. Вернитесь в Unity Editor и добавьте скрипт в качестве компонента одного из игровых объектов.

   * Щелкните объект **Полотно** в окне иерархии. Откроются параметры в [окне инспектора](https://docs.unity3d.com/Manual/UsingTheInspector.html) (по умолчанию справа).
   * Нажмите кнопку **Добавить компонент** в окне инспектора, затем найдите скрипт HelloWorld, который был создан выше, и добавьте его.
   * Обратите внимание, что компонент Hello World имеет два неинициализированных свойства: **Output Text** (Текст вывода) и **кнопку Start Reco** (Начать запись), которые соответствуют общедоступным свойствам класса `HelloWorld`.
     Чтобы подключить их, щелкните "Выбор объектов" (маленький круглый значок справа от свойства) и выберите объекты текста и кнопки, созданные ранее.

     > [!NOTE]
     > Кнопка также имеет вложенный текстовый объект. Убедитесь, что вы случайно не выбрали его для вывода текста (или переименуйте один из текстовых объектов, используя поле "Имя" в окне инспектора, чтобы избежать этой путаницы).

## <a name="run-the-application-in-the-unity-editor"></a>Запуск приложения в Unity Editor

* Нажмите кнопку **Воспроизвести** на панели инструментов Unity Editor (под строкой меню).

* После запуска приложения нажмите кнопку и произнесите английскую фразу или предложение в микрофон компьютера. Ваша речь передается в службу "Речь" и преобразуется в текст, который появляется в том же окне.

  [![Снимок экрана запущенного краткого руководства в окне Unity Game](media/sdk/qs-csharp-unity-03-output-inline.png)](media/sdk/qs-csharp-unity-03-output-expanded.png#lightbox)

* Проверьте [окно консоли](https://docs.unity3d.com/Manual/Console.html) на наличие сообщений отладки.

* По завершении распознавания речи нажмите кнопку **Воспроизвести** на панели инструментов Unity Editor, чтобы остановить приложение.

## <a name="additional-options-to-run-this-application"></a>Дополнительные параметры для запуска этого приложения

Это приложение также можно развернуть на Android как автономное приложение Windows или приложение UWP.
Ознакомьтесь с [примером репозитория](https://aka.ms/csspeech/samples) в папке quickstart/csharp-unity, который описывает конфигурацию этих дополнительных целей.

## <a name="next-steps"></a>Дополнительная информация

> [!div class="nextstepaction"]
> [Примеры для C# на сайте GitHub](https://aka.ms/csspeech/samples)

## <a name="see-also"></a>См. также

- [Настройка акустических моделей](how-to-customize-acoustic-models.md)
- [Настройка языковых моделей](how-to-customize-language-model.md)
