---
title: Как добавить подтверждение в настраиваемую команду (Предварительная версия)
titleSuffix: Azure Cognitive Services
description: В этой статье описывается, как реализовать подтверждения для команды в пользовательских командах.
services: cognitive-services
author: encorona-ms
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 12/05/2019
ms.author: encorona
ms.openlocfilehash: bf1b79c1b5d7b9dfd93b354c6b6ff5a512bb74a5
ms.sourcegitcommit: c535228f0b77eb7592697556b23c4e436ec29f96
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2020
ms.locfileid: "82858237"
---
# <a name="how-to-add-a-confirmation-to-a-custom-command-preview"></a>Как добавить подтверждение в настраиваемую команду (Предварительная версия)

В этой статье вы узнаете, как добавить подтверждение в команду.

## <a name="prerequisites"></a>Предварительные требования

Необходимо выполнить действия, описанные в следующих статьях:
> [!div class="checklist"]
> *  [Краткое руководство. Создание настраиваемой команды (Предварительная версия)](./quickstart-custom-speech-commands-create-new.md)
> * [Краткое руководство. Создание настраиваемой команды с параметрами (Предварительная версия)](./quickstart-custom-speech-commands-create-parameters.md)

## <a name="create-a-setalarm-command"></a>Создание команды Сеталарм

Чтобы продемонстрировать подтверждения, создадим новую команду, позволяющую пользователю установить оповещение.

1. Откройте созданное ранее приложение пользовательских команд в [Speech Studio](https://speech.microsoft.com/).
1. Создайте новую команду `SetAlarm`.
1. Добавьте параметр с именем `DateTime` со следующей конфигурацией.

   | Параметр                           | Рекомендуемое значение                     |  Описание                 |
   | --------------------------------- | -----------------------------------------------------| ------------|
   | Имя                              | Дата и время                                | Описательное имя параметра                                |
   | Обязательно                          | checked                                 | Флажок, указывающий, требуется ли значение этого параметра перед выполнением команды |
   | Ответ на обязательный параметр   | Простой редактор — > в какое время?                              | Запрос на запрос значения этого параметра, если он неизвестен |
   | type                              | Дата и время                                | Тип параметра, например число, строка, Дата и время или география   |
   | Значения по умолчанию для даты                     | Если дата отсутствует, используйте сегодня            | Значение по умолчанию для используемой переменной, если оно не предоставлено пользователем.  |  
   | Значения времени по умолчанию                     | Если время отсутствует, используйте начало дня     |  Значение по умолчанию для используемой переменной, если оно не предоставлено пользователем.|

1. Добавьте несколько примеров предложений.
   
    ```
    set an alarm for {DateTime}
    set alarm {DateTime}
    alarm for {DateTime}
   ```

1. Добавьте правило завершения для подтверждения результата.

   | Параметр    | Рекомендуемое значение                               |Описание                                     |
   | ---------- | ------------------------------------------------------- |-----|
   | Имя правила  | Задать будильник                                               |    Имя, описывающее назначение правила. |
   | Действия    | Отправка речевого ответа-OK, набор оповещений для {DateTime} "    |Действие, выполняемое, если условие правила имеет значение true

## <a name="try-it-out"></a>Попробуйте!

1. Значок `Train` выбора находится в верхней части правой панели.

1. После завершения обучения выберите `Test`.
    - Входные данные: задать оповещение для завтрашнего дня в полдень
    - Выходные данные: ОК, оповещение установлено для 2020-05-02 12:00:00
    - Входные данные: задать оповещение
    - Выходные данные: какое время?
    - Входные данные: 17:00
    - Выходные данные: ОК, оповещение установлено для 2020-05-01 17:00:00

## <a name="add-the-advanced-rules-for-confirmation"></a>Добавление расширенных правил для подтверждения

Подтверждения достигаются за счет добавления правил взаимодействия.

1. `SetAlarm` В существующей команде добавьте на средней панели значок **правила взаимодействия** по `+Add` выделению, а затем выберите -> **команду** **правила взаимодействия**.

    Это правило попросит пользователя подтвердить дату и время оповещения и ожидает подтверждения (да/нет) для следующей активации.

   | Параметр               | Рекомендуемое значение                                                                  | Описание                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | Имя правила             | Подтверждение даты и времени                                                                | Имя, описывающее назначение правила.          |
   | Условия            | Обязательный параметр-> DateTime                                                    | Условия, определяющие, когда может выполняться правило    |   
   | Действия               | Отправка речевого ответа-> вы действительно хотите задать оповещение для {DateTime}?     | Действие, выполняемое, если условие правила имеет значение true |
   | Превосходящи          | Ожидается подтверждение от пользователя                                                 | Ожидание следующей очереди                      |
   | Состояние после выполнения  | Ожидание ввода пользователя                                                            | Состояние пользователя после включения                  |
  
      > [!div class="mx-imgBorder"]
      > ![Создать ответ требуемого параметра](media/custom-speech-commands/add-validation-set-temperature.png)

1. Добавить еще одно правило взаимодействия для успешного подтверждения (пользователь сказал да)

   | Параметр               | Рекомендуемое значение                                                                  | Описание                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | Имя правила             | Подтверждение принятия                                                            | Имя, описывающее назначение правила.          |
   | Условия            | Подтверждение успешно & обязательный параметр-> DateTime                      | Условия, определяющие, когда может выполняться правило    |   
   | Состояние после выполнения | Правила завершения выполнения                                                          | Состояние пользователя после включения                   |

1. Добавление расширенного правила для принятия решения об отклонении подтверждения (пользователь сказал No)

   | Параметр               | Рекомендуемое значение                                                                  | Описание                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | Имя правила             | Подтверждение запрета                                                                   | Имя, описывающее назначение правила.          |
   | Условия            | Подтверждение было отклонено & обязательный параметр-> DateTime                               | Условия, определяющие, когда может выполняться правило    |   
   | Действия               | Очистить значение параметра — > DateTime & отправить голосовое реагирование — > проблем, а затем?  | Действие, выполняемое, если условие правила имеет значение true |
   | Состояние после выполнения | Ожидание входных данных                                                                   | Состояние пользователя после включения                   |
   | Превосходящи          | Ожидается вход параметров из пользовательской > DateTime                           | Ожидание следующей очереди                      |

## <a name="try-out-the-changes"></a>Попробуйте внести изменения

Выберите `Train`, дождитесь завершения обучения и `Test`выберите.

- Входные данные: задать оповещение для завтрашнего дня в полдень
- Выходные данные: вы действительно хотите установить оповещение для 2020-05-02 12:00:00?
- Входные данные: нет
- Выходные данные: нет проблем, сколько раз?
- Входные данные: 17:00
- Выходные данные: "вы действительно хотите установить оповещение для 2020-05-01 17:00:00?"
- Входные данные: Да
- Выходные данные: ОК, оповещение установлено для 2020-05-01 17:00:00

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Как добавить одношаговое исправление в настраиваемую команду (Предварительная версия)](./how-to-custom-speech-commands-one-step-correction.md)