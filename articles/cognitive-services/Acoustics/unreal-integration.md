---
title: Проект Акустика Нереальная и Wwise интеграции
titlesuffix: Azure Cognitive Services
description: В этой статье описывается интеграция подключаемых модули Project Acoustics Unreal и Wwise в ваш проект.
services: cognitive-services
author: NoelCross
manager: nitinme
ms.service: cognitive-services
ms.subservice: acoustics
ms.topic: conceptual
ms.date: 03/20/2019
ms.author: noelc
ROBOTS: NOINDEX
ms.openlocfilehash: e57212a3002390754aaebc5f2aa9ffb10af230a2
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "72243058"
---
# <a name="project-acoustics-unreal-and-wwise-integration"></a>Проект Акустика Нереальная и Wwise интеграции
В этой статье описывается, как интегрировать пакет плагинов Project Acoustics в существующий игровой проект Unreal и Wwise.

Требования к программному обеспечению:
* [Нереальный двигатель](https://www.unrealengine.com/) 4.20
* [АудиоКинетический Wwise](https://www.audiokinetic.com/products/wwise/) 2018.1
* [Wwise плагин для Unreal](https://www.audiokinetic.com/library/?source=UE4&id=index.html)
  
  Если вы используете прямую интеграцию Wwise SDK вместо плагина Wwise Unreal, проконсультируйтесь с плагином Project Acoustics Unreal и отрегулируйте вызовы Wwise API.

Чтобы использовать проект Акустика с аудио-движком, кроме Wwise, сделайте запрос на повышение в [форуме обсуждения проекта Акустика](https://github.com/microsoft/ProjectAcoustics/issues). Вы можете использовать плагин Project Acoustics Unreal для запроса данных акустики и вызова API в ваш двигатель.

## <a name="download-project-acoustics"></a>Скачать проект Акустика
Скачать [проект Acoustics Unreal и Wwise плагин пакет,](https://www.microsoft.com/download/details.aspx?id=58090) если вы еще не сделали.

В пакет включены плагин Unreal Engine и микшер Wwise. Unreal плагин обеспечивает редактор и время выполнения интеграции. Во время геймплея project Acoustics Unreal плагин вычисляет параметры, такие как окклюзия для каждого игрового объекта для каждого кадра. Эти параметры переведены в wwise API-звонки.

## <a name="integration-steps"></a>Этапы интеграции

Выполните следующие действия, чтобы установить пакет и развернуть его в игре.

### <a name="install-the-project-acoustics-mixer-plug-in"></a>Установите микшер Project Acoustics
1. Откройте пусковую установку Wwise. На **вкладке Plug-ins** под **установкой новых плагинов**выберите **Добавить из каталога.**

    ![Установите плагин в пусковой установке Wwise](media/wwise-install-new-plugin.png)

1. Выберите каталог *AcousticsWwisePlugin-ProjectAcoustics,* который есть в пакете загрузки. Он содержит смеситель Wwise плагин расслоение.

   Wwise установит плагин. Проект Наяплавная должна отображаться в списке установленных плагинов в Wwise.  
![Wwise установил плагины список после установки проекта Акустика](media/unreal-integration-post-mixer-plugin-install.png)

### <a name="dedeploy-wwise-into-your-game"></a>Деразивал Wwise в вашу игру
Передислоцируйте Wwise в вашу игру, даже если вы уже интегрировали Wwise. Этот шаг интегрирует плагин Project Acoustics Wwise.

   > [!NOTE]
   > **Подключаемый модуль двигателя:** Если у вас есть Wwise установлен в качестве игры плагин в unreal СЗ проекта, пропустить этот шаг. Если вместо этого он установлен в качестве плагина двигателя, например, потому что ваш проект Unreal является только Blueprint, развертывание Wwise с нашим микшерным плагином является более сложным. Создайте фиктивный пустой проект Unreal C. Закройте редактор Unreal, если он откроется, и следуйте оставшейся процедуре развертывания Wwise в фиктивный проект. Затем скопируйте развернутый плагин Wwise.
 
1. Из пусковой установки Wwise выберите вкладку **Unreal Engine.** Выберите меню "гамбургер" (икона) рядом с **недавними нереальными проектами двигателя,** а затем выберите **Browse для проекта.** Откройте файл проекта Unreal в ашего игровом режиме *.project.*

    ![Wwise пусковая нереальная вкладка](media/wwise-unreal-tab.png)

1. Выберите **«Интеграция Wwise» в проекте** или **измените Wwise в проекте.** Этот шаг интегрирует бинарные файлы Wwise в ваш проект, включая микшер Project Acoustics.

   > [!NOTE]
   > **Подключаемый модуль двигателя:** Если вы используете Wwise в качестве плагина двигателя, и вы создали манекен проекта, как описано ранее, скопируйте папку, что Wwise развернуты: *"DummyUProject" Plugins .* Вставьте его на *«UESource» (UESource) .* *«DummyUProject»* — это пустой путь проекта Unreal C, и *«UESource»* – это место, где установлены нереальные источники двигателя. После копирования папки можно удалить проект манекена.

### <a name="add-the-project-acoustics-unreal-plug-in-to-your-game"></a>Добавить проект Акустика Unreal плагин в вашу игру
 
1. Копируйте папку *Unreal-ProjectAcoustics* в пакете плагинов. Создайте новую папку *«UProjectDir»-Plugins»ProjectAcoustics,* где *«UProjectDir»* — это папка проекта вашей игры, содержащая файл *.uproject.*

   > [!NOTE]
   > **Двигатель плагин**: Если вы используете Wwise в качестве плагина двигателя, вы должны использовать проект акустика как unreal плагин двигателя, а также. Вместо каталога назначения, приведенного ранее, используйте *«UESource» (UESource) « Двигатель »Плагины»-Проектаки ».*

1. Подтвердите, что рядом с папкой *ProjectAcoustics* вы видите папку *Wwise.* Он содержит плагин Wwise вместе с бинарными файлами для микшерного плагина, который вы развернули ранее.

### <a name="extend-wwise-unreal-plug-in-functionality"></a>Расширение функциональных возможностей подключаемого модуля Unreal для Wwise
Проект Acoustics Unreal плагин требует дополнительного поведения подвергаются от Wwise Unreal плагин API в [этих руководящих принципов.](https://www.audiokinetic.com/library/?source=UE4&id=using__initialsetup.html) Мы включили пакетный файл для автоматизации процедуры исправления.

* Внутри *Плагины-ПроектАкустики , Ресурсы*, запустить *PatchWwise.bat*. В следующем примере изображение использует наш проект AcousticsGame образца.

    ![Окно Windows Explorer со скриптом для исправления Wwise выделено](media/patch-wwise-script.png)

* Если у вас нет прямого SDK установлен: В зависимости от версии Wwise вы используете, вы, возможно, потребуется прокомментировать линию, которая содержит `DXSDK_DIR` в *AcousticsGame-Plugins-Wwise-Источник-AkAudio-AkAudio.Build.cs*:

    ![Редактор кода, показывающий 'DXSDK', прокомментировал](media/directx-sdk-comment.png)

* Если вы компилируете с помощью Visual Studio 2019: Для обработки `VSVersion` ошибки связывания с Wwise, вручную измените значение по умолчанию в *AcousticsGame-Plugins-Wwise-Источник-AkAudio.Build.cs* на **vc150**:

    ![Редактор кода, показывающий "VSVersion" изменен на "vc150"](media/vsversion-comment.png)

### <a name="build-the-game-and-check-that-python-is-enabled"></a>Создайте игру и проверьте, включен ли Python

1. Составьте свою игру, и убедитесь, что она строит правильно. Если он не построен, тщательно проверьте предыдущие шаги, прежде чем продолжить.

1. Откройте свой проект в Unreal Editor.

    > [!NOTE]
    > **Подключаемый модуль двигателя:** Если вы используете ProjectAcoustics в качестве плагина двигателя, также убедитесь, что он включен под "встроенный" плагинов.

    Вы должны увидеть новый режим, который указывает, что проект Акустика была интегрирована.

    ![Режим акустики полный в Unreal](media/acoustics-mode-full.png)

1. Подтвердите, что плагин Python для Unreal включен так, что интеграция редактора работает правильно.

    ![Расширения Python в редакторе Unreal включены](media/ensure-python.png)

### <a name="set-up-your-wwise-project-to-use-project-acoustics"></a>Настройка проекта Wwise для использования акустики проекта

Пример проекта Wwise включен в загрузку образцов. Мы рекомендуем вам просмотреть его вместе с этими инструкциями. Скриншоты позже в этой статье из этого проекта.

#### <a name="bus-setup"></a>Установка автобуса
Проект Acoustics Unreal плагин будет искать связанные микшер плагин на `Project Acoustics Bus`автобусе, который имеет точное название . Создайте новый аудио-автобус с таким же названием. Микшер плагин может работать в различных конфигурациях. Но пока мы предполагаем, что он будет использоваться только для обработки реверберации. Этот автобус будет нести смешанный сигнал реверберации для всех источников, которые используют акустику. Он может смешивать вверх по течению в любой автобус смешивания структуры. Пример приведен здесь из проекта образца Wwise, включенного в загрузку образца.

![Wwise автобусы, показывающие проект Акустика автобус](media/acoustics-bus.png)

1. Установите конфигурацию канала на автобусе до *1.0,* *2.0,* *4.0,* *5.1*, или *7.1*. Любые другие настройки не приводят к отсутствию вывода в шине.

    ![Варианты конфигурации канала для автобуса акустики проекта](media/acoustics-bus-channel-config.png)

1. Зайдите в сведения о проекте Acoustics Bus и убедитесь, что вы можете увидеть вкладку **Mixer Plug-in.**

    ![Wwise с Mixer Plug-in вкладке для проекта Акустика Автобус включен](media/mixer-tab-enable.png)

1. Перейдите на вкладку **Mixer Plug-in** и добавьте в автобус плагин для акустики проекта.

    ![Диаграмма того, как добавить Project Acoustics Mixer Plug-in в автобус Wwise](media/add-mixer-plugin.png)

#### <a name="actor-mixer-hierarchy-setup"></a>Установка иерархии актера-миксера
Для лучшей производительности Project Acoustics применяет аудио-обработку цифрового сигнала ко всем источникам одновременно. Таким образом, плагин должен работать как микшер плагин. Wwise требует, чтобы микшерные плагины находились на выходном шине, хотя выходной автобус обычно несет сухой сигнал. Проект Акустика требует, чтобы сухой сигнал направляется через aux `Project Acoustics Bus`автобусы, в то время как мокрый сигнал осуществляется на . Следующий процесс поддерживает постепенный переход к этому потоку сигналов.

Допустим, у вас есть существующий проект с иерархией актера-миксера, который содержит *шаги,* *оружие*и другие на верхнем уровне. Каждый из них имеет соответствующий выходной шины для сухой смеси. Допустим, вы хотите перенести шаги, чтобы использовать акустику. Во-первых, создать соответствующий aux автобус для перевозки сухой субмикс, который является ребенком шаг выхода автобуса. Например, мы использовали префикс «Сухой» на следующем изображении для организации автобусов, хотя точное название не имеет значения. Любые метры или эффекты, которые вы имели на шаги автобус будет по-прежнему функционировать, как раньше.

![Рекомендуемая установка сухой смеси Wwise](media/wwise-dry-mix-setup.png)

Далее, изменить структуру вывода шины для Footsteps актер-миксер следующим образом, с *проектом Акустика Автобус* установлен как **выход автобус**, и *Dry_Footsteps* установлен в качестве пользовательского определяемого Aux шины.

![Рекомендуемая установка шины-микшера Wwise](media/actor-mixer-bus-settings.png)

Теперь все шаги получить акустику лечения и выход их реверберации на проект Акустика автобус. Сухой сигнал проходит через Dry_Footsteps и пространственно, как обычно.

Проект Акустика применяется только к звукам, которые имеют 3D-место в мире. После [документации Wwise](https://blog.audiokinetic.com/out-with-the-old-in-with-the-new-positioning-revamped-in-wwise-2018.1/)свойства позиционирования должны быть установлены в соответствии с показанием. Настройка **3D пространственности** может быть либо *позицией,* либо *позиционной ориентацией* по мере необходимости.

![Рекомендуемые настройки позиционирования актера Wwise](media/wwise-positioning.png)

Вы не можете установить **выходной автобус** на другой автобус, который смешивается вверх по течению в *проект ерофоски автобус.* Wwise налагает это требование на микшерные плагины.

Если вы хотите, чтобы ребенок по стопам актер-микшер иерархии не использовать акустику, вы можете использовать "переопределить родителей" на нем, чтобы отказаться от него.

Если вы используете игру-определенные или пользовательские-определенные посылает для реверберации на любой актер-микшер в игре, выключите их на том, что актер-микшер, чтобы избежать применения реверберации в два раза.

#### <a name="spatialization"></a>Пространственизация
Project Acoustics Wwise смеситель плагин применяет сятворство реверберации по умолчанию, в результате чего Wwise сделать панорамирование пространственности. При использовании Project Acoustics в этой конфигурации реверберации по умолчанию можно использовать любую конфигурацию канала и метод пространственности на сухой смеси. Таким образом, вы можете смешивать и сочетать практически любой пространственизатор с реверберацией Проекта Акустика. Ваши варианты включают [Ambisonics основе бинауральных пространственных и](https://www.audiokinetic.com/products/ambisonics-in-wwise/) [Windows Sonic](https://docs.microsoft.com/windows/desktop/CoreAudio/spatial-sound).
 
Проект Acoustics включает в себя дополнительный пространственизатор, который поддерживает как объектную визуализацию HRTF с высоким разрешением, так и панорамирование. Выберите флажок **проверки пространственности в** настройках плагина-миксера и выберите между *HRTF* или *Панорамированием.* Кроме того, отключить пользователь-определенных aux посылает на все сухие автобусы, чтобы избежать пространствения в два раза проект Acoustics смеситель плагина и Wwise. Режим пространственизации не может быть изменен в режиме реального времени, поскольку он требует звуковой регенерации банка. Перезапустите Unreal, а затем регенерировать звуковые банки, прежде чем выбрать игру для интеграции модули смесителя конфигурации изменений, таких как настройки флачпа **флаконов выполнения пространственности.**

![Настройки пространственности Wwise Mixer](media/mixer-spatial-settings.png)

К сожалению, другие плагины на основе объектов в настоящее время не поддерживаются. Они реализованы в виде микшерных плагинов, и Wwise не позволяет присваивать нескольким микшерным плагинам одному актеру-микшеру.  

### <a name="audio-setup-in-unreal"></a>Аудио установка в Нереальной
1. Во-первых, вам нужно испечь свой игровой уровень, чтобы произвести актив акустики, который будет размещен в *Контента .* Проконсультируйтесь с [Unreal Bake Tutorial](unreal-baking.md). Некоторые предварительно запеченные уровни включены в образец упаковки.

1. Создайте акустического космического актера в вашей сцене. Только создать один из этих актеров в уровне, потому что он представляет акустику для всего уровня.

    ![Создание акустического космического актера в редакторе Unreal](media/create-acoustics-space.png)

1. Назначаем испеченный акустический ресурс данных слоту акустики на космическом акте Acoustics. Ваша сцена теперь имеет акустику!

    ![Назначение актива Акустики в редакторе Unreal](media/acoustics-asset-assign.png)

1. Добавьте пустой актер. Назначай его следующим образом.

    ![Редактор Unreal показывает использование компонента acoustics в пустом актере](media/acoustics-component-usage.png)

       
    <sup>1</sup> Добавьте аудиокомпонент Acoustics к актеру. Этот компонент добавляет функциональность Project Acoustics в аудиокомпонент Wwise.
        
    <sup>2</sup> **Поле Play on Start** выбрано по умолчанию. Эта настройка запускает связанное событие Wwise при запуске уровня.</li>
         
    <sup>3</sup> Используйте флажок **параметра Акустики Show,** чтобы распечатать на экране информацию об источнике.

    ![Панель Unreal Editor Acoustics на источнике звука с включенными значениями отладки](media/debug-values.png)

    <sup>4</sup> Назначайте событие Wwise в обычном рабочем процессе Wwise.
       
    <sup>5</sup> Убедитесь, что **использование пространственного аудио** выключено. Если вы используете Project Acoustics для конкретного аудиокомпонента, вы не можете одновременно использовать пространственный аудиодвигатель Wwise для акустики.</li>
       
Все готово. Перемещение вокруг сцены и изучить акустические эффекты!

## <a name="next-steps"></a>Дальнейшие действия
* Попробуйте [проект Акустика Unreal / Wwise Дизайн Учебник](unreal-workflow.md).
* [Узнайте, как делать выпечку](unreal-baking.md) для ваших игровых сцен.
