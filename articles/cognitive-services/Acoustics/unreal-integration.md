---
title: Нереалные акустики проекта и интеграция Ввисе
titlesuffix: Azure Cognitive Services
description: В этой статье описывается интеграция нереальных и Ввисе подключаемых модулей в проект.
services: cognitive-services
author: NoelCross
manager: nitinme
ms.service: cognitive-services
ms.subservice: acoustics
ms.topic: conceptual
ms.date: 03/20/2019
ms.author: noelc
ROBOTS: NOINDEX
ms.openlocfilehash: e57212a3002390754aaebc5f2aa9ffb10af230a2
ms.sourcegitcommit: 824e3d971490b0272e06f2b8b3fe98bbf7bfcb7f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/10/2019
ms.locfileid: "72243058"
---
# <a name="project-acoustics-unreal-and-wwise-integration"></a>Нереалные акустики проекта и интеграция Ввисе
В этой статье описывается интеграция пакета подключаемого модуля акустических характеристик проекта в существующий Ввисе игровой проект.

Требования к программному обеспечению:
* [Нереальная подсистема](https://www.unrealengine.com/) 4.20+
* [Аудиокинетик ввисе](https://www.audiokinetic.com/products/wwise/) 2018,1
* [Подключаемый модуль ввисе для нереального](https://www.audiokinetic.com/library/?source=UE4&id=index.html)
  
  Если вы используете прямую интеграцию пакета SDK для Ввисе, а не Ввисе нереального подключаемого модуля, ознакомьтесь со сведениями о акустических технологиях проекта без реального времени и настройте вызовы API Ввисе.

Чтобы использовать акустику проекта с обработчиком звука, отличным от Ввисе, выполните запрос на улучшение на [форуме по акустическим данным проекта](https://github.com/microsoft/ProjectAcoustics/issues). Вы можете использовать нереалные акустики проекта, чтобы запрашивать данные о акустических данных и выполнять вызовы API к вашему подсистеме.

## <a name="download-project-acoustics"></a>Скачать акустические характеристики проекта
Скачайте [пакет с нереальными и ввисе подключаемыми модулями](https://www.microsoft.com/download/details.aspx?id=58090) , если вы еще этого не сделали.

В пакет входит подключаемый модуль нереального механизма и подключаемый модуль Ввисе микшера. Нереалный подключаемый модуль обеспечивает интеграцию с редактором и средой выполнения. Во время игрового процесса нереалные акустики проекта расходуют такие параметры, как перекрытия для каждого кадра. Эти параметры преобразуются в вызовы API Ввисе.

## <a name="integration-steps"></a>Этапы интеграции

Выполните следующие действия, чтобы установить пакет и развернуть его в игре.

### <a name="install-the-project-acoustics-mixer-plug-in"></a>Установка подключаемого модуля микшера для акустических характеристик проекта
1. Откройте средство запуска Ввисе. На вкладке **подключаемые** модули в разделе **установить новые подключаемые**модули выберите **Добавить из каталога**.

    ![Установка подключаемого модуля в средстве запуска Ввисе](media/wwise-install-new-plugin.png)

1. Выберите каталог *акаустиксввисеплугин\прожектакаустикс* , который находится в загружаемом пакете. Он содержит подключаемый модуль микшера Ввисе.

   Ввисе установит подключаемый модуль. В списке установленные подключаемые модули в Ввисе должны появиться акустические характеристики проекта.  
![Список установленных подключаемых модулей Ввисе после установки акустических характеристик проекта](media/unreal-integration-post-mixer-plugin-install.png)

### <a name="dedeploy-wwise-into-your-game"></a>Деразвертывание Ввисе в игре
Повторно разверните Ввисе в игре, даже если вы уже интегрированы Ввисе. Этот шаг интегрирует подключаемый модуль Ввисе для акустических характеристик проекта.

   > [!NOTE]
   > **Подключаемый модуль подсистемы:** Если вы установили Ввисе в качестве подключаемого модуля игры в нереальном C++ проекте, пропустите этот шаг. Например, если он установлен в качестве подключаемого модуля подсистемы, то, что ваш нереалй проект является только схемой, Ввисе развертывание с помощью нашего подключаемого модуля микшера является более сложным. Создание фиктивного пустого C++ проекта. Закройте нереальный редактор, если он открыт, и выполните оставшуюся процедуру, чтобы развернуть Ввисе в фиктивном проекте. Затем скопируйте развернутый подключаемый модуль Ввисе.
 
1. В средстве запуска Ввисе выберите вкладку **нереалный механизм** . Выберите меню "гамбургер" (значок) рядом с **последними проектами нереалных ядер** , а затем нажмите кнопку **Обзор для проекта**. Откройте *файл проекта Нереал.*

    ![Вкладка средства запуска Ввисе "Нереал"](media/wwise-unreal-tab.png)

1. Выберите **интегрировать ввисе в проект** или **изменить ввисе в Project**. Этот шаг интегрирует двоичные файлы Ввисе в проект, включая подключаемый модуль микшера для акустических характеристик проекта.

   > [!NOTE]
   > **Подключаемый модуль подсистемы:** Если вы используете Ввисе в качестве подключаемого модуля механизма и создали фиктивный проект, как описано выше, скопируйте папку, развернутую Ввисе: *[думмюпрожект] \плугинс\ввисе*. Вставьте его поверх *[уесаурце] \енгине\плугинс\ввисе*. *[Думмюпрожект]* является пустым нереальным C++ путем к проекту, а *[уесаурце]* — там, где установлены источники нереального модуля. После копирования папки можно удалить фиктивный проект.

### <a name="add-the-project-acoustics-unreal-plug-in-to-your-game"></a>Добавление в игру нереального подключаемого для проекта акустических характеристик
 
1. Скопируйте папку *унреал\прожектакаустикс* в пакет подключаемого модуля. Создайте новую папку *[упрожектдир] \плугинс\прожектакаустикс*, где *[упрожектдир]* — папка проекта игры, содержащая *упрожект* -файл.

   > [!NOTE]
   > **Подключаемый модуль подсистемы**: Если вы используете Ввисе в качестве подключаемого модуля подсистемы, следует также использовать акустические характеристики проекта в качестве подключаемого модуля нереального механизма. Вместо каталога назначения, упомянутого ранее, используйте *[уесаурце] \енгине\плугинс\прожектакаустикс*.

1. Убедитесь, что вы видите папку *ввисе* рядом с папкой *прожектакаустикс* . Он содержит подключаемый модуль Ввисе вместе с двоичными файлами для подключаемого модуля микшера, который был развернут ранее.

### <a name="extend-wwise-unreal-plug-in-functionality"></a>Расширение возможностей Ввисе нереально подключаемых модулей
Для нереального подключаемого модуля в проекте требуются дополнительные возможности, предоставляемые в Ввисе нереального подключаемого модуля API для [этих рекомендаций](https://www.audiokinetic.com/library/?source=UE4&id=using__initialsetup.html). Мы включили пакетный файл для автоматизации процедуры исправления.

* В *плугинс\прожектакаустикс\ресаурцес*запустите *патчввисе. bat*. В следующем примере образа используется наш пример проекта Акаустиксгаме.

    ![Окно проводника Windows со скриптом для исправления Ввисе](media/patch-wwise-script.png)

* Если пакет SDK для DirectX не установлен: В зависимости от используемой версии Ввисе может потребоваться закомментировать строку, содержащую `DXSDK_DIR` в *акаустиксгаме\плугинс\ввисе\саурце\акаудио\акаудио.буилд.КС*:

    ![Редактор кода, отображающий комментарий "ДКССДК"](media/directx-sdk-comment.png)

* При компиляции с помощью Visual Studio 2019: Чтобы обойти ошибку компоновки с помощью Ввисе, вручную измените значение по умолчанию `VSVersion` в *акаустиксгаме\плугинс\ввисе\саурце\акаудио\акаудио.буилд.КС* на **VC150**:

    ![Редактор кода, отображающий "Всверсион", изменен на "VC150"](media/vsversion-comment.png)

### <a name="build-the-game-and-check-that-python-is-enabled"></a>Создание игры и проверка того, включена ли поддержка Python

1. Скомпилируйте игру и убедитесь, что она правильно построена. Если она не будет построена, перед продолжением внимательно проверьте предыдущие шаги.

1. Откройте проект в нереальном редакторе.

    > [!NOTE]
    > **Подключаемый модуль подсистемы:** Если вы используете Прожектакаустикс в качестве подключаемого модуля, убедитесь, что он включен в разделе Встроенные подключаемые модули.

    Вы увидите новый режим, который указывает, что были интегрированы акустические характеристики проекта.

    ![Режим акустических характеристик полон в нереальном режиме](media/acoustics-mode-full.png)

1. Убедитесь, что подключаемый модуль Python для функции "Нереал" включен, чтобы интеграция с редактором выполнялась правильно.

    ![Расширения Python в нереальном редакторе](media/ensure-python.png)

### <a name="set-up-your-wwise-project-to-use-project-acoustics"></a>Настройка проекта Ввисе для использования акустических характеристик проекта

Пример проекта Ввисе включен в загружаемые образцы. Рекомендуется просмотреть его вместе с этими инструкциями. Снимки экрана, приведенные далее в этой статье, относятся к этому проекту.

#### <a name="bus-setup"></a>Настройка шины
Нереалные акустические технологии проекта будут искать связанный подключаемый модуль микшера на шине с точным именем `Project Acoustics Bus`. Создайте новую звуковую шину с таким же именем. Подключаемый модуль микшера может работать в различных конфигурациях. Но сейчас предполагается, что он будет использоваться только для обработки передействий. Эта шина будет передавать смешанный перекомандный сигнал для всех источников, использующих акустические характеристики. Он может смешивать потоки в любую структуру смешения шины. Пример показан в примере проекта Ввисе, который включен в пример загрузки.

![Шины ввисе, отображающие шину акустических характеристик проекта](media/acoustics-bus.png)

1. Задайте конфигурацию канала на шине в *1,0*, *2,0*, *4,0*, *5,1*или *7,1*. Любой другой параметр приведет к отсутствию выходных данных на шине.

    ![Параметры конфигурации канала для шины "акустические характеристики проекта"](media/acoustics-bus-channel-config.png)

1. Перейдите в раздел сведения о шине для акустических характеристик проекта и убедитесь, что вы видите вкладку **подключаемый модуль микшера** .

    ![Ввисе с вкладкой "подключаемый модуль микшера" для шины "акустические" для проекта включена](media/mixer-tab-enable.png)

1. Перейдите на вкладку **подключаемый модуль микшера** и добавьте к шине подключаемый модуль микшера для акустических характеристик проекта.

    ![Схема добавления подключаемого модуля микшера для акустических характеристик проекта на шину Ввисе](media/add-mixer-plugin.png)

#### <a name="actor-mixer-hierarchy-setup"></a>Субъект — Настройка иерархии микшера
Для лучшей производительности в соответствии с акустическими характеристиками проекта применяется обработка звуковых сигналов во всех источниках одновременно. Таким образом, подключаемый модуль должен использоваться как подключаемый модуль микшера. Ввисе требует, чтобы подключаемые модули микшера находящегося на выходной шине, хотя выходная шина обычно включает в себя выходной сигнал сухой. Для акустических характеристик проекта требуется, чтобы сигнальные сигналы находились через шины AUX, а сигнал о незамечении переносится на `Project Acoustics Bus`. Следующий процесс поддерживает постепенное перемещение в этот поток сигналов.

Предположим, у вас есть проект с иерархией "микшер субъекта", которая содержит *примеру*, *оружие*и другие на верхнем уровне. У каждого из них есть соответствующая выходная шина для набора сухой. Предположим, вы хотите перенести примеру, чтобы использовать акустические характеристики. Сначала создайте соответствующую вспомогательную шину, чтобы получить сухой субмикс, который является дочерним по отношению к выходной шине примеру. Например, мы использовали для Организации шин префикс «сухой» на следующем рисунке, хотя точное имя не имеет значения. Все счетчики или эффекты, которые вы использовали на шине примеру, по-прежнему будут работать как раньше.

![Рекомендуемая установка Ввисе сухой Mix](media/wwise-dry-mix-setup.png)

Затем измените структуру выходных данных шины для примеру Actor-микшера, как показано ниже, с установленной *шиной акустических характеристик проекта* в качестве **выходной шины**, а *Dry_Footsteps* — как определяемая пользователем дополнительная шина.

![Рекомендуемая настройка шины микшера Ввисе Actor](media/actor-mixer-bus-settings.png)

Теперь все примеру получают акустические характеристики и выводят их переглаголы на шину обработки акустических данных проекта. Сигнал сухой направляется через Dry_Footsteps и пространственно как обычно.

Акустические характеристики проекта применяются только к звукам, имеющим трехмерное расположение в мире. В следующей [документации по ввисе](https://blog.audiokinetic.com/out-with-the-old-in-with-the-new-positioning-revamped-in-wwise-2018.1/)свойства позиционирования должны быть заданы так, как показано ниже. Параметр **трехмерной пространственности** может быть либо *положением* , либо *позицией + Orientation* по мере необходимости.

![Рекомендуемые параметры позиционирования субъекта Ввисе](media/wwise-positioning.png)

Вы не можете установить **выходную шину** на другую шину, которая применяет передачу данных на *шину акустических характеристик проекта*. Ввисе накладывает это требование на подключаемые модули микшера.

Если вы хотите, чтобы дочерняя иерархия в иерархии примеру Actor-микшера не использовала акустические характеристики, можно использовать для нее параметр "переопределить родительский объект", чтобы отказаться от него.

Если вы используете определенные игрой или определяемые пользователем функции отправки для переглагола в любом микшере субъекта в игре, отключите их на этом актере, чтобы избежать повторного применения переглагола.

#### <a name="spatialization"></a>Пространственный индекс
Подключаемый модуль микшера Ввисеов проекта применяет переглагол свертки по умолчанию, освобождая Ввисе, чтобы выполнить пространственное панорамирование. При использовании акустических характеристик проекта в этой конфигурации по умолчанию можно использовать любую настройку канала и метод пространственности для вашего сухой Mix. Таким образом, вы можете сочетать и сопоставлять почти любые спатиализер с переглаголом по акустическим данным проекта. К вашим вариантам относятся [амбисоникс бинаурал спатиализерс](https://www.audiokinetic.com/products/ambisonics-in-wwise/) и [Windows Sonic](https://docs.microsoft.com/windows/desktop/CoreAudio/spatial-sound).
 
Акустические характеристики проекта включают необязательный спатиализер, поддерживающий визуализацию и панорамирование на основе объектов с высоким разрешением ХРТФ. Установите флажок **выполнить пространственность** в параметрах подключаемого модуля микшера и выберите между *хртф* или *панорамирование*. Кроме того, отключите пользовательскую функцию AUX, которая отправляется на все сухой шины, чтобы не спатиализинг дважды через подключаемый модуль микшера акустических характеристик проекта и Ввисе. Режим пространственности нельзя изменить в режиме реального времени, так как он требует повторного создания звукового банка. Перезапустите нереально, а затем повторно создайте саундбанкс перед нажатием кнопку Воспроизведение, чтобы интегрировать изменения конфигурации подключаемого модуля микшера, такие как флажок **выполнить пространственное** преобразование.

![Параметры пространственного подключения подключаемого модуля микшера ввисе](media/mixer-spatial-settings.png)

К сожалению, в настоящее время другие подключаемые модули спатиализер на основе объектов не поддерживаются. Они реализуются как подключаемые модули микшера, и Ввисе не позволяет назначить несколько подключаемых модулей микшера одному микшеру субъекта.  

### <a name="audio-setup-in-unreal"></a>Настройка звука в нереальном режиме
1. Сначала необходимо внедрить свой уровень игры, чтобы создать ресурс для акустических характеристик, который будет помещен в *контент\акаустикс*. Ознакомьтесь с [руководством по нереальному внедрить](unreal-baking.md). Некоторые уровни, предшествующие помогут, включены в образец пакета.

1. Создание субъекта пространства акустических характеристик в сцене. Только один из этих субъектов создается на уровне, так как он представляет акустические характеристики всего уровня.

    ![Создание субъекта "акустическое пространство" в нереальном редакторе](media/create-acoustics-space.png)

1. Назначьте ресурс помогут акустики данных в область данных акустических характеристик субъекта "акустическое пространство". Теперь у сцены есть акустические характеристики!

    ![Назначение ресурсов акустических характеристик в нереальном редакторе](media/acoustics-asset-assign.png)

1. Добавьте пустой субъект. Настройте его следующим образом.

    ![Нереальный редактор показывает использование компонента акустических характеристик в пустом субъекте](media/acoustics-component-usage.png)

       
    <sup>1</sup> . Добавьте в субъект звуковой компонент акустических характеристик. Этот компонент добавляет функции акустических функций проекта в компонент аудио Ввисе.
        
    <sup>2</sup> флажок **воспроизвести при запуске** установлен по умолчанию. Этот параметр запускает связанное событие Ввисе при запуске уровня.</li>
         
    <sup>3</sup> чтобы распечатать отладочную информацию об источнике, используйте флажок **Показывать параметры акустических параметров** .

    ![Панель "нереалные акустические редактор" на звуковом источнике с включенными значениями отладки](media/debug-values.png)

    <sup>4</sup> . Назначьте событие ввисе для обычного рабочего процесса ввисе.
       
    <sup>5</sup> убедитесь, что параметр **использовать пространственный звук** отключен. Если вы используете акустические характеристики проекта для конкретного звукового компонента, вы не сможете одновременно использовать пространственный механизм Ввисе для акустических характеристик.</li>
       
Все готово. Продвиньтесь вокруг сцены и изучите акустические эффекты!

## <a name="next-steps"></a>Следующие шаги
* Попробуйте ознакомиться с [руководством по созданию акустических характеристик проекта, ввисе](unreal-workflow.md).
* Узнайте [, как выполнять создает](unreal-baking.md) для сцен игр.
