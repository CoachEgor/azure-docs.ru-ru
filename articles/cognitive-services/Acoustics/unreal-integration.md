---
title: Unreal шума и интеграции Wwise проекта
titlesuffix: Azure Cognitive Services
description: В этом руководстве описывается интеграция Unreal шума проекта и подключаемые модули Wwise в проект.
services: cognitive-services
author: kegodin
manager: nitinme
ms.service: cognitive-services
ms.subservice: acoustics
ms.topic: conceptual
ms.date: 03/20/2019
ms.author: kegodin
ms.openlocfilehash: 6207808efb9bee327afd2de21ffa59535acf4e55
ms.sourcegitcommit: c105ccb7cfae6ee87f50f099a1c035623a2e239b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2019
ms.locfileid: "67704790"
---
# <a name="project-acoustics-unreal-and-wwise-integration"></a>Unreal шума и интеграции Wwise проекта
В этом практическом руководстве шаги подробные интеграции пакета проекта шума подключаемого модуля в существующих Unreal и Wwise игр проект. 

Требования к программному обеспечению:
* [Unreal Engine](https://www.unrealengine.com/) 4.20 или 4.21
* [AudioKinetic Wwise](https://www.audiokinetic.com/products/wwise/) 2018.1.\*
* [Подключаемый модуль Wwise для Unreal](https://www.audiokinetic.com/library/?source=UE4&id=index.html)
  * Если вы используете прямая интеграция пакета SDK Wwise вместо того чтобы использовать подключаемые модули Wwise Unreal, обратитесь к проекта шума Unreal подключаемого модуля и изменить вызовы Wwise API.

Если вы хотите использовать шума проекта с аудио engine Кроме Wwise, выполните запрос расширения на [шума проекта дискуссионный форум](https://github.com/microsoft/ProjectAcoustics/issues). Проект шума Unreal подключаемый модуль можно использовать для запроса данных шума и затем вызовов API к ядру.

## <a name="download-project-acoustics"></a>Загрузите проект шума
Если это еще не сделано, загрузите [пакета подключаемый модуль проекта шума Unreal & Wwise](https://www.microsoft.com/download/details.aspx?id=58090)). 

Мы включили Unreal Engine подключаемого модуля и подключаемый модуль mixer Wwise в пакете. Unreal подключаемый модуль предоставляет редактор и среды выполнения интеграции. Во время игровой процесс проект шума Unreal подключаемый модуль вычисляет параметры, например перекрытия для каждого объекта игр каждого кадра. Эти параметры, преобразуются в вызовы Wwise API.

## <a name="review-integration-steps"></a>Этапы интеграции

Существуют следующие основные действия, чтобы установить пакет и развернуть его в игре.
1. Установка подключаемого модуля mixer Wwise шума проекта
2. (Re) разверните Wwise игры. Этот шаг распространяет mixer подключаемый модуль в проект игр.
3. Добавьте проект шума Unreal подключаемый модуль в игру
4. Расширение функциональных возможностей подключаемого модуля Unreal для Wwise
5. Создайте игру и проверьте, что включен Python
6. Настройка проекта Wwise для использования шума проекта
7. Настройка аудио в Unreal

## <a name="1-install-the-project-acoustics-mixer-plugin"></a>1. Установка подключаемого модуля mixer шума проекта
* Откройте средство запуска Wwise, а затем на вкладке **Plugins** (Подключаемые модули) в разделе **Install New Plugins** (Установка новых подключаемых модулей) выберите **Add From Directory** (Добавить из каталога). 

    ![Снимок экрана установки подключаемого модуля в Wwise запуска](media/wwise-install-new-plugin.png)

* Выберите каталог `AcousticsWwisePlugin\ProjectAcoustics`, содержащийся в скачанном пакете. Он содержит пакет Wwise mixer подключаемого модуля.

* Wwise установит подключаемый модуль. Шума проекта теперь должны отображаться в списке установленных подключаемых модулей в Wwise.
![Снимок экрана из Wwise установлено список подключаемых модулей, после установки шума проекта](media/unreal-integration-post-mixer-plugin-install.png)

## <a name="2-redeploy-wwise-into-your-game"></a>2. (Re) развертывание Wwise в игре
Повторное развертывание Wwise игру, даже если вы уже интегрировали Wwise. Это выбирает подключаемый модуль Wwise шума проекта.

* **Подключаемый модуль ядра:** Если у вас установлен в качестве игры подключаемого модуля в проекте Unreal C++ Wwise, пропустите этот шаг. Если он установлен как подключаемый модуль ядра, например так, как Unreal проекта развертывания только Wwise схемы с помощью наших mixer подключаемого модуля, не сложнее. Создать фиктивный пустой проект Unreal C++, закройте его, если открывается редактор Unreal и выполните остальные процедуры развертывания Wwise в этот фиктивный проект. Затем скопируйте развернутой Wwise подключаемого модуля.
 
* В средстве запуска Wwise перейдите на вкладку **Unreal Engine**, а затем щелкните меню с тремя полосками рядом с разделом **Recent Unreal Engine Projects** (Последние проекты Unreal Engine) и выберите **Browse for project** (Поиск проекта). Откройте проект Unreal свою игру `.uproject` файл.

    ![Снимок экрана из Wwise запуска в Unreal вкладку](media/wwise-unreal-tab.png)

* Нажмите кнопку **Wwise интегрировать в проекте** или **Wwise изменения в проекте**. Этот шаг (re) интегрирует Wwise двоичные файлы в проект, включая подключаемый модуль mixer шума проекта.

* **Подключаемый модуль ядра:** Если вы используете Wwise как подключаемый модуль ядра и создать фиктивный проект, как описано выше, скопируйте папку развертывания Wwise: `[DummyUProject]\Plugins\Wwise` и вставьте его над элементом `[UESource]\Engine\Plugins\Wwise`. `[DummyUProject]` является пустой путь проекта C++, Unreal и `[UESource]` у вас есть источников Unreal Engine, установленных. После завершения копирования, вы можете удалить фиктивный проект.

## <a name="3-add-the-project-acoustics-unreal-plugin-to-your-game"></a>3. Добавьте проект шума Unreal подключаемый модуль в игру
 
* Копировать `Unreal\ProjectAcoustics` папку в подключаемый модуль упаковки и создайте новую папку `[UProjectDir]\Plugins\ProjectAcoustics`, где `UProjectDir` имеет свою игру проекта папку, содержащую `.uproject` файл.
  * **Подключаемый модуль ядра**: Если вы используете Wwise как подключаемый модуль ядра, как Unreal engine plugin также следует использовать шума проекта. Вместо указанной выше папке назначения, используйте: `[UESource]\Engine\Plugins\ProjectAcoustics`.

* Убедитесь, вы видите `Wwise` вместе с папкой `ProjectAcoustics` папки. Он содержит подключаемый модуль Wwise вместе с двоичными файлами для подключаемого модуля mixer, (re-) развернутому на шаге 2 выше.

## <a name="4-extend-wwises-unreal-plugin-functionality"></a>4. Расширение функциональных возможностей подключаемого модуля Unreal для Wwise
* Проект шума Unreal подключаемого модуля требуется дополнительное поведение следует предоставлять из подключаемого модуля Wwise Unreal API на [эти рекомендации](https://www.audiokinetic.com/library/?source=UE4&id=using__initialsetup.html). Мы включили пакетный файл для автоматизации установки исправлений процедуры. 
* В `Plugins\ProjectAcoustics\Resources` выполните файл `PatchWwise.bat`. Приведенном ниже примере используется наш пример проекта AcousticsGame.

    ![Снимок экрана: обозреватель Windows окно выделение предоставленный сценарий для исправления Wwise](media/patch-wwise-script.png)

* Если у вас нет установленного пакета SDK для DirectX, вам потребуется закомментировать строку, содержащую DXSDK_DIR в `[UProject]\Plugins\Wwise\Source\AkAudio\AkAudio.Build.cs`.

    ![Снимок экрана с редактором кода — комментирование строки DXSDK](media/directx-sdk-comment.png)

## <a name="5-build-game-and-check-python-is-enabled"></a>5. Создайте игру и проверьте, что включен Python

* Скомпилируйте свою игру и убедитесь в правильности его сборки. В противном случае проверьте предыдущие шаги, прежде чем продолжить. 
* Откройте проект в редакторе Unreal. 
* **Подключаемый модуль ядра:** При использовании ProjectAcoustics как подключаемый модуль ядра, также убедитесь, что он включен, перечисленные в разделе «встроенные» подключаемые модули.
* Вы должны увидеть новый режим, что означает, что проект шума были интегрированы.

    ![Снимок экрана из Unreal отображается полный режим шума](media/acoustics-mode-full.png)

* Убедитесь, что у вас есть подключаемый модуль Python для Unreal включена. Это необходимо для правильной интеграции редактора.

    ![Снимок экрана: Включение расширений Python в редакторе Unreal](media/ensure-python.png)

## <a name="6-wwise-project-setup"></a>6. Настройка проекта Wwise

Пример проекта Wwise входит в состав загрузки образцов. Мы рекомендуем, просмотрев его вместе с этим инструкциям. Снимки экрана ниже, взяты из этого проекта.

### <a name="bus-setup"></a>Настройка шины
* Проект шума Unreal подключаемый модуль будет искать связанные mixer подключаемый модуль на шине с этим ***точное*** имя: `Project Acoustics Bus`. Создание новой шины аудио с таким именем. Микшер подключаемый модуль может работать в различных конфигурациях, но сейчас мы предполагаем, что он будет использоваться для только реверберация обработки. Эта шина будет нести смешанной реверберация сигнал для всех источников, использующих шума. Можно смешивать вышестоящий источник в любой шины смешивания структуры, ниже приведен пример, взяты из наших Wwise пример проекта, включенные в состав примера.

    ![Снимок экрана из Wwise шины, показывающий шины шума проекта](media/acoustics-bus.png)

* Конфигурацию канала на шине необходимо задать одно из: `1.0, 2.0, 4.0, 5.1 or 7.1`. Другие конфигурации приведет к на шине выходные данные.

    ![Снимок экрана: параметры конфигурации канала для шины шума проекта](media/acoustics-bus-channel-config.png)

* Теперь перейдите в проект шума шины сведения и убедитесь, что можно увидеть на вкладке подключаемый модуль Mixer

    ![Снимок экрана из Wwise показывающий, как включить вкладку подключаемый модуль Mixer для шины шума проекта](media/mixer-tab-enable.png)

* Затем перейдите на вкладку Mixer подключаемого модуля и добавьте проект шума mixer подключаемого модуля к шине

    ![Шины снимке экрана из Wwise, показывающий, как добавить подключаемый модуль проекта шума Mixer](media/add-mixer-plugin.png)

### <a name="actor-mixer-hierarchy-setup"></a>Настройка иерархии субъекта mixer
* Для повышения производительности шума проекта применяется аудио DSP ко всем источникам одновременно. Для этого требуется подключаемый модуль для работы в качестве подключаемого модуля mixer. Wwise необходима mixer подключаемых модулей на шине выходных данных, хотя шины выходные данные обычно содержит "не повторяйся" выходном сигнале. Требуется проект шума "не повторяйся" сигнал направляться через шины aux, хотя температура по мокрому сигнала переносится `Project Acoustics Bus`. Процесс поддерживает постепенный переход к этому потоку сигнала.

* Предположим, имеется существующий проект с иерархии mixer субъекта, содержащий примеру, оружие и другим пользователям на верхнем уровне. Каждый имеет соответствующий шины выходных данных для его mix "не повторяйся". Предположим, что вы хотите перенести примеру для использования шума позволяет. Сначала создайте соответствующие шины aux для выполнения их submix "не повторяйся", который является дочерним шины примеру выходных данных. Например мы использовали префикс "не повторяйся «"» на рисунке ниже для организации, несмотря на то, что точное имя не имеет значения. Все счетчики или эффекты, которые были на шине примеру по-прежнему работать как и раньше.

    ![Снимок экрана рекомендуемые настройки набора Wwise "не повторяйся"](media/wwise-dry-mix-setup.png)

* Измените структуру вывода шины для примеру субъекта mixer следующим образом, с помощью шины выходные данные, а также Dry_Footsteps шины шума проекта, задайте в качестве шины aux, определяемые пользователем.

    ![Снимок экрана рекомендуемые настройки шины Mixer Wwise субъекта](media/actor-mixer-bus-settings.png)

* Теперь все примеру получают лечение шума и вывода их реверберация на шине шума проекта. "Не повторяйся" сигнал через Dry_Footsteps и spatialized обычным образом.

* Проект шума применяется только к звуки, которые имели расположение 3D в мире. Следуя [Wwise документации](https://blog.audiokinetic.com/out-with-the-old-in-with-the-new-positioning-revamped-in-wwise-2018.1/), свойств размещения должны быть установлены следующим образом. Параметр «3D Spatialization» может быть «Положение» или «Позиции + Orientation», при необходимости.

    ![Снимок экрана: рекомендуемые параметры позиционирования субъекта Wwise](media/wwise-positioning.png)

* Установка шины выходные данные в других шины, в которых сочетаются вышестоящий источник в **шины шума проекта** не будет работать. Wwise налагает это требование о mixer подключаемых модулей.

* Если требуется дочерний элемент в иерархии субъекта mixer примеру от использования шума, всегда позволяет «переопределенные родительского» на нем отказаться от его.

* Вы используете отправляет игры или пользователем для реверберация на любой субъекта mixer в игре, отключите их на этот субъект mixer избегать использования реверберация дважды.

### <a name="spatialization"></a>Spatialization
По умолчанию подключаемый модуль mixer Wwise шума проекта применяет реверберация свертки, оставляя Wwise сделать панорамирования spatialization. При использовании шума проекта в этой конфигурации по умолчанию только для реверберация, вы можете использовать любой метод, конфигурации и spatialization канала в состав профиля "не повторяйся", что позволяет смешивать и сочетать практически любой spatializer с реверберация шума проекта. Варианты [основе Ambisonics binaural spatializers](https://www.audiokinetic.com/products/ambisonics-in-wwise/) и [Windows Sonic](https://docs.microsoft.com/windows/desktop/CoreAudio/spatial-sound).
 
Проект шума включает необязательный spatializer, которая поддерживает как объектно ориентированного с высоким разрешением HRTF отрисовки, так и панорамирования. Для параметров подключаемого модуля микшер и установите флажок «Выполнить Spatialization» и выбрать HRTF или панорамирование и отключить отправляет пользовательские aux, указанный выше для всех "не повторяйся" шины во избежание spatializing дважды, как с помощью подключаемого модуля mixer проекта шума и Wwise. Режим spatialization невозможно перевести в режиме реального времени, так как он требует восстановления звуковой bank. Необходимо перезапустить Unreal, а затем повторно создать soundbanks исчерпывая play, чтобы получить изменения конфигурации подключаемого модуля mixer например флажок «Выполнить Spatialization».

![Снимок экрана подключаемый модуль Mixer Wwise Spatialization параметры](media/mixer-spatial-settings.png)

К сожалению других объектно ориентированного spatializer подключаемых модулей не поддерживается в настоящее время, как они реализуются как подключаемые модули микшер и Wwise в настоящее время не допускает несколько подключаемых модулей mixer назначен один субъект mixer.  

## <a name="7-audio-setup-in-unreal"></a>7. Настройка аудио в Unreal
* Во-первых, вам потребуется внедрить уровень игры, чтобы создать актив шума, в который будут помещены в `Content\Acoustics`. Обратитесь к [Unreal позаботимся учебника](unreal-baking.md) и возобновить работу здесь. Некоторые предварительно архивированные уровни включаются в пакет примера.
* Создайте субъект пространства шума в сцене. Создайте только один из этих субъектов в пределах уровня так как он представляет шума для всего уровня. 

    ![Снимок экрана Unreal редактор, показывающий создание субъектов шума пространства](media/create-acoustics-space.png)

* Теперь назначьте ресурса архивированные акустических данных области данных шума субъекта шума пространства. Сцена теперь имеет шума!

    ![Снимок экрана Unreal шума howing редактор s назначения активов](media/acoustics-asset-assign.png)

* Теперь добавьте пустой субъекта и сделайте следующее:

    ![Снимок экрана Unreal редактор, показывающий использование компонентов шума пустой субъектом](media/acoustics-component-usage.png)

1. Добавьте компонент аудио шума субъекту. Этот компонент расширяет Wwise звукового компонента функциональности для проекта шума.
2. Воспроизвести на поле «Пуск» установлен по умолчанию, который инициирует связанного события Wwise уровня при запуске.
3. Печать на экране с помощью флажков Показать параметры шума отладочная информация об источнике.
    ![Снимок экрана Unreal шума панель редактора в звуковой источника со значениями отладки включена](media/debug-values.png)
4. Назначить событие Wwise на обычный рабочий процесс Wwise
5. Убедитесь, что использование пространственных звука отключен. В настоящее время при использовании шума проекта для определенного компонента аудио, нельзя использовать одновременно в Wwise пространственных аудио ядра для шума.

Все готово. Перемещение сцены и исследовать акустических результаты!

## <a name="next-steps"></a>Дальнейшие действия
* [Проектирование](unreal-workflow.md) учебника для проекта шума в Unreal/Wwise
* [Узнайте, как сделать подготавливает](unreal-baking.md) для вашей игры сцен 
