---
title: Анализ затрат и бюджет - Azure Batch
description: Узнайте, как получить анализ затрат и установить бюджет для базовых вычислительных ресурсов и лицензий на программное обеспечение, используемых для выполнения рабочих нагрузок Пакета.
services: batch
author: LauraBrenner
manager: evansma
ms.service: batch
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: big-compute
ms.date: 07/19/2019
ms.author: labrenne
ms.openlocfilehash: 819b5e16f4730e9a1998234288e181772f7c1996
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77022721"
---
# <a name="cost-analysis-and-budgets-for-azure-batch"></a>Анализ затрат и бюджеты Azure Batch

За сам пакет Azure не взимается плата, только базовые вычислительные ресурсы и лицензии на программное обеспечение, используемые для выполнения рабочих нагрузок Batch. На высоком уровне затраты понесены с виртуальных машин (VMs) в пуле, передачи данных из VM, или любых входных или выходных данных, хранящихся в облаке. Давайте взглянем на некоторые ключевые компоненты пакета, чтобы понять, откуда берутся затраты, как установить бюджет для пула или учетной записи, а также некоторые методы повышения эффективности рабочих нагрузок пакета.

## <a name="batch-resources"></a>Ресурсы пакетной службы

Виртуальные машины являются наиболее важным ресурсом, используемым для обработки пакетов. Стоимость использования VMs для Batch рассчитывается в зависимости от типа, количества и продолжительности использования. Варианты выставления счетов VM включают [Pay-As-You-Go](https://azure.microsoft.com/offers/ms-azr-0003p/) или [бронирование](../cost-management-billing/reservations/save-compute-costs-reservations.md) (оплата заранее). Оба варианта оплаты имеют различные преимущества в зависимости от рабочей нагрузки вычислений, и обе модели оплаты по-разному повлияют на ваш счет.

При развертывании приложений в узлы пакетов (ВМ) с использованием [пакетов приложений](batch-application-packages.md)выставляется счет за ресурсы хранения Azure, которые потребляют пакеты приложений. Вам также выставляется счет за хранение любых входных или выходных файлов, таких как файлы ресурсов и другие данные журнала. В целом стоимость данных для хранения данных, связанных с Batch, значительно ниже, чем стоимость вычислительных ресурсов. Каждый VM в пуле, созданном с **помощью VirtualMachineConfiguration,** имеет связанный с ними диск ОС, который использует диски, управляемые Azure. Диски, управляемые Azure, имеют дополнительные затраты, а другие уровни производительности диска также имеют различные затраты.

Пулы пакетов используют сетевые ресурсы. В частности, для **бассейнов VirtualMachineConfiguration** используются стандартные баланселизаторы нагрузки, которые требуют статических IP-адресов. Балансы нагрузки, используемые Пакетом, видны для учетных записей **подписки пользователей,** но не видны для учетных записей **службы пакетов.** Стандартные балансеры нагрузки несут плату за все данные, передаваемые в и из Пула пакетов VMs; Выберите пакетные aIs, которые извлекают данные из узлов пула (например, Get Task/Node File), пакетов приложений задач, файлов ресурсов/выводов и изображений контейнеров.

### <a name="additional-services"></a>Дополнительные службы

Услуги, не включая в себя VMs и хранение данных, могут учитывать стоимость вашей учетной записи Batch.

Другие услуги, обычно используемые в Batch, могут включать:

- Application Insights
- Фабрика данных
- Azure Monitor
- Виртуальная сеть
- VMs с графическими приложениями

В зависимости от того, какие услуги вы используете с вашим решением Batch, вы можете понести дополнительные сборы. Обратитесь к [Калькулятору ценообразования,](https://azure.microsoft.com/pricing/calculator/) чтобы определить стоимость каждой дополнительной услуги.

## <a name="cost-analysis-and-budget-for-a-pool"></a>Анализ затрат и бюджет пула

Через портал Azure можно создавать оповещения о бюджетах и расходах для пула пакетов (ы) или учетной записи Batch. Бюджеты и оповещения полезны для уведомления заинтересованных сторон о любых рисках перерасхода средств. Это возможно для того, чтобы быть задержка в расходах оповещения и немного превысить бюджет. В этом примере мы просмотрим анализ затрат отдельного пула пакетов.

1. На портале Azure выберите **управление затратами и выставление счетов** из левой панели навигации.
1. Выберите подписку из раздела **«Мои подписки»**
1. Перейдите к **анализу затрат** в разделе **Управления затратами** левого навигатора, который покажет вид такого:
1. Выберите **Фильтр добавить**. В первом выпадении выберите **ресурсвый** ![фильтр](./media/batch-budget/resource-filter.png)
1. Во втором падении выберите пул пакетов. При выборе пула анализ затрат будет выглядеть так же, как и следующий анализ.
    ![Анализ затрат пула](./media/batch-budget/pool-cost-analysis.png)

Полученный анализ затрат показывает стоимость пула, а также ресурсы, которые способствуют этой стоимости. В этом примере вобъединяют в использование ВМ являются наиболее дорогостоящим ресурсом.

Для создания бюджета для пула выберите **Бюджет: нет,** а затем выберите **Создать новый бюджет >. ** Теперь используйте окно, чтобы настроить бюджет специально для вашего пула.

Для получения дополнительной информации о [Create and manage Azure budgets](../cost-management-billing/costs/tutorial-acm-create-budgets.md)настройке бюджета см.

> [!NOTE]
> Пакетная служба Azure основана на технологии виртуальных машин Azure и облачных служб Azure. При выборе режима **Cloud Services Configuration** (Конфигурация облачных служб) плата взимается в зависимости от структуры цен на облачные службы. При выборе режима **Конфигурация виртуальной машины** плата взимается в зависимости от структуры цен на виртуальные машины. Пример на этой странице использует **конфигурацию виртуальной машины.**

## <a name="minimize-cost"></a>Минимизировать затраты

Использование нескольких служб VMs и Azure в течение длительных периодов времени может быть дорогостоящим. К счастью, существуют службы, помогающие сократить расходы, а также стратегии для максимизации эффективности вашей рабочей нагрузки.

### <a name="low-priority-virtual-machines"></a>Низкоприоритетные виртуальные машины

Малоприоритетные ВМ снижают стоимость рабочих нагрузок Batch, пользуясь преимуществами избыточных вычислительных мощностей в Azure. Когда вы указываете низкоприоритетные ввовы в пулы, Batch использует этот излишк для выполнения рабочей нагрузки. Существует существенная экономия затрат за счет использования низкоприоритетных ВМ вместо выделенных VMs.

Узнайте больше о том, как настроить низкоприоритетные ВМ для рабочей нагрузки в [use low-priority VMs с пакетом.](batch-low-pri-vms.md)

### <a name="virtual-machine-os-disk-type"></a>Виртуальный тип диска ОС машины

Есть несколько [типов дисков VM OS.](../virtual-machines/windows/disks-types.md) Большинство VM-серий имеют размеры, которые поддерживают как премиум, так и стандартное хранилище. Когда размер VM 's' выбран для пула, Batch настраивает премиальные диски SSD OS. При выборе размера VM'non-s, используется более дешевый стандартный тип диска HDD. Например, для использования дисков SSD OS используются премиальные диски SSD OS `Standard_D2s_v3` и стандартные диски HDD `Standard_D2_v3`OS.

Премиум SSD OS диски стоят дороже, но имеют более высокую производительность и VMs с премиум диски могут начать немного быстрее, чем VMs со стандартными дисками HDD OS. С Batch диск ОС часто не используется много, как приложения и файлы задач расположены на временных SSD-дисках VMs. Поэтому во многих случаях нет необходимости платить повышенную стоимость премиального SSD, который предусмотрен при указании размера ВМ 's'.

### <a name="reserved-virtual-machine-instances"></a>Зарезервированные экземпляры виртуальной машины

Если вы собираетесь использовать Batch в течение длительного периода времени, вы можете сэкономить на стоимости VMs, используя [резервирование Azure](../cost-management-billing/reservations/save-compute-costs-reservations.md) для ваших рабочих нагрузок. Ставка бронирования значительно ниже, чем ставка оплаты по мере вас. Виртуальные экземпляры машины, используемые без бронирования, взимаются по тарифу с оплатой по мере использования. Если вы покупаете бронирование, применяется скидка на бронирование, и с вас больше не взимается плата по тарифам с оплатой по мере покупки.

### <a name="automatic-scaling"></a>Автоматическое масштабирование

[Автоматическое масштабирование](batch-automatic-scaling.md) динамически масштабирует количество вс-кодов в пуле пакетов в зависимости от требований текущей работы. Масштабирование пула на основе срока службы автоматическое масштабирование гарантирует масштабирование и масштаб использования VM только при выполнении работы. Когда задание завершено или нет заданий, vMs автоматически сокращаются для сохранения вычислительных ресурсов. Масштабирование позволяет снизить общую стоимость решения Batch, используя только необходимые ресурсы.

Для получения дополнительной информации об автоматическом масштабировании [см. Автоматически масштабируйте вычислительные узлы в пуле Azure Batch.](batch-automatic-scaling.md)

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте больше об [AIS-пакете и инструментах,](batch-apis-tools.md) доступных для создания и мониторинга решений Batch.  

- Узнайте о [низкоприоритетных вс-минах с пакетом](batch-low-pri-vms.md).
