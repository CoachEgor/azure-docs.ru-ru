---
title: Создание учетной записи в портал Azure
description: Узнайте, как создать учетную запись пакетной службы Azure на портале Azure для обработки крупных параллельных рабочих нагрузок в облаке.
ms.topic: conceptual
ms.date: 02/26/2019
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 9349ed74111565f68a088cda95c8defcd79f7e69
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82113227"
---
# <a name="create-a-batch-account-with-the-azure-portal"></a>Создание учетной записи пакетной службы на портале Azure

Узнайте, как создать учетную запись пакетной службы на [портале Azure][azure_portal] и выбрать свойства учетной записи, соответствующие сценарию вычислений. Сведения о поиске важных свойств учетной записи, например ключей доступа и URL-адресов учетной записи.

Дополнительные сведения об учетных записях пакетной службы см. в [обзоре функций](batch-api-basics.md).

## <a name="create-a-batch-account"></a>Создание учетной записи Пакетной службы

[!INCLUDE [batch-account-mode-include](../../includes/batch-account-mode-include.md)]

1. Войдите на [портал Azure][azure_portal].

1. Выберите **создать ресурс** > **Compute** > **Пакетная служба**вычислений.

    ![Пакетная служба в Marketplace][marketplace_portal]

1. Введите параметры **новой учетной записи пакетной службы**. Укажите следующие сведения:

    ![Создание учетной записи Пакетной службы][account_portal]

    a. **Подписка** — подписка, в которой будет создана учетная запись пакетной службы. Если у вас только одна подписка, она будет выбрана по умолчанию.

    b. **Группа ресурсов** — существующая группа ресурсов для новой учетной записи пакетной службы (при необходимости можно создать другую группу).

    c. **Имя учетной записи** — имя учетной записи должно быть уникальным в пределах региона Azure, где будет создана учетная запись (описание параметра **Расположение** см. ниже). Имя учетной записи может содержать только строчные буквы и цифры, а его длина должна быть не меньше 3 и не больше 24 символов.

    d. **Расположение** — регион Azure, в котором будет создана учетная запись пакетной службы. Будут отображаться только те регионы, которые поддерживаются для вашей подписки и группы ресурсов.

    д) **Учетная запись хранения**. Дополнительная учетная запись хранения Azure, которую вы свяжете с учетной записью пакетной службы. Для наилучшей производительности рекомендуется использовать учетную запись хранения общего назначения версии 2. Все параметры учетной записи хранения в пакетной службе см. в [обзоре функций пакетной службы](batch-api-basics.md#azure-storage-account). На портале выберите существующую учетную запись хранения или создайте новую.

      ![Создание учетной записи хранения][storage_account]

    е) **Режим распределения пула**. на вкладке **Дополнительные** параметры можно указать режим распределения пула **в качестве** **пользовательской подписки или подписке пользователя**. В большинстве случаев можно использовать значение по умолчанию — **Пакетная служба**.

      ![Режим распределения пула пакетной службы][pool_allocation]

1. Выберите **Создать**, чтобы создать учетную запись.

## <a name="view-batch-account-properties"></a>Просмотр свойств учетной записи пакетной службы

После создания учетной записи выберите ее для доступа к параметрам и свойствам учетной записи. Все параметры и свойства учетной записи можно просмотреть с помощью меню слева.

![Страница учетной записи пакетной службы на портале Azure][account_blade]

* **Имя, URL-адрес и ключи учетной записи пакетной службы**. При разработке приложения с использованием [API-интерфейсов пакетной службы](batch-apis-tools.md#azure-accounts-for-batch-development) вам понадобится URL-адрес и ключ учетной записи для доступа к ресурсам пакетной службы. (Пакетная служба также поддерживает аутентификацию на основе Azure Active Directory.)

    Чтобы просмотреть сведения о доступе к учетной записи пакетной службы, выберите **Ключи**.

    ![Ключи учетной записи пакетной службы на портале Azure][account_keys]

* Чтобы просмотреть имя и ключи учетной записи хранения, связанной с учетной записью пакетной службы, выберите **Учетная запись хранения**.

* Чтобы просмотреть квоты ресурсов, которые применяются для учетной записи пакетной службы, выберите **Квоты**. Подробные сведения см. в статье [Квоты и ограничения пакетной службы](batch-quota-limit.md).

## <a name="additional-configuration-for-user-subscription-mode"></a>Дополнительная настройка для режима пользовательской подписки

Если вы решили создать учетную запись пакетной службы в режиме пользовательской подписки, сначала выполните приведенные ниже дополнительные инструкции.

### <a name="allow-azure-batch-to-access-the-subscription-one-time-operation"></a>Предоставление пакетной службе Azure доступа к подписке (одноразовая операция)

При первом создании учетной записи пакетной службы в режиме пользовательской подписки нужно зарегистрировать подписку в пакетной службе. (Если вы уже сделали это, перейдите к следующему разделу.)

1. Войдите на [портал Azure][azure_portal].

1. Выберите **все службы** > **подписки**, а затем выберите подписку, которую вы хотите использовать для учетной записи пакета.

1. На странице **Подписки** выберите **Поставщики ресурсов** и выполните поиск **Microsoft.Batch**. Убедитесь, что поставщик ресурсов **Microsoft.Batch** зарегистрирован в подписке. Если он не зарегистрирован, выберите ссылку **Зарегистрировать**.

    ![Регистрация поставщика Microsoft.Batch][register_provider]

1. На странице **Подписка** выберите **Управление доступом (IAM)** > **Назначения ролей** > **Добавление назначения ролей**.

    ![Управление доступом к подписке][subscription_access]

1. На странице **Добавление назначения ролей** выберите роль **Участник** и выполните поиск API пакетной службы. Продолжайте поиск для каждой из этих строк, пока не найдете API:
    1. **MicrosoftAzureBatch**;
    1. **Microsoft Azure Batch**. Более новые клиенты Azure AD могут использовать это имя.
    1. **ddbf3205-c6bd-46ae-8127-60eb93363864** — это идентификатор API пакетной службы.

1. Выберите найденный API пакетной службы и выберите **Сохранить**.

    ![Добавление разрешений для пакетной службы][add_permission]

### <a name="create-a-key-vault"></a>Создайте хранилище ключей.

При использовании режима пользовательской подписки требуется хранилище ключей Azure, относящееся к той же группе ресурсов, в которой будет создана учетная запись пакетной службы. Убедитесь, что группа ресурсов находится в регионе, в котором [доступна](https://azure.microsoft.com/regions/services/) пакетная служба и который поддерживает ваша подписка.

1. На [портале Azure][azure_portal] выберите **Создать** > **Безопасность** > **Key Vault**.

1. На странице **Создать хранилище ключей** введите имя для хранилища ключей и создайте группу ресурсов в регионе для вашей учетной записи пакетной службы. Для остальных параметров оставьте значения по умолчанию, а затем выберите **Создать**.

При создании учетной записи пакетной службы в режиме пользовательской подписки используйте группу ресурсов для хранилища ключей. Укажите **подписку пользователя** в качестве режима выделения пула, выберите хранилище ключей и установите флажок, чтобы предоставить пакетной службе Azure доступ к хранилищу ключей. 

Если вы предпочитаете предоставить доступ к хранилищу ключей вручную, перейдите к разделу **политики доступа** хранилища ключей и выберите **Добавить политику доступа** и выполните поиск по запросу **Пакетная служба Microsoft Azure**. После выбора необходимо настроить **разрешения секрета** с помощью раскрывающегося меню. Для пакетной службы Azure необходимо предоставить минимум разрешений **Get**, **List**, **Set**и **Delete** .

![Секретные разрешения для пакетной службы Azure](./media/batch-account-create-portal/secret-permissions.png)


> [!NOTE]
> Убедитесь, что в разделе **политики доступа** для связанного **Key Vault** ресурса установлены флажки **виртуальные машины Azure для** развертывания и **Azure Resource Manager для развертывания шаблона** .
> 
> ![Обязательная политика](./media/batch-account-create-portal/key-vault-access-policy.png) доступа Key Vault не является обязательной при создании учетной записи пакетной службы в портал Azure. Этот параметр выбран по умолчанию.



### <a name="configure-subscription-quotas"></a>Настройка квот для подписки

В учетных записях пакетной службы в режиме пользовательской подписки квоты ядер не задаются по умолчанию. Квоты ядер необходимо установить вручную, так как стандартные квоты ядер пакетной службы не применяются к учетным записям в режиме пользовательской подписки.

1. На [портале Azure][azure_portal] выберите учетную запись пакетной службы в режиме пользовательской подписки, чтобы отобразить параметры и свойства учетной записи.

1. В меню слева выберите **Квоты**, чтобы просмотреть и настроить квоты ядер, связанные с учетной записью пакетной службы.

Дополнительные сведения о квотах ядер в режиме пользовательской подписки см. в статье [Квоты и ограничения пакетной службы](batch-quota-limit.md).

## <a name="other-batch-account-management-options"></a>Другие параметры управления учетной записью пакетной службы

Помимо портала Azure, создавать учетные записи пакетной службы и управлять ими можно с помощью следующих средств:

* [Командлеты PowerShell для пакетной службы](batch-powershell-cmdlets-get-started.md)
* [Azure CLI](batch-cli-get-started.md)
* [Библиотека .NET для управления пакетной службой](batch-management-dotnet.md)

## <a name="next-steps"></a>Дальнейшие шаги

* Дополнительные сведения об основных понятиях и функциях пакетной службы см. в статье [Разработка решений для крупномасштабных параллельных вычислений с использованием пакетной службы](batch-api-basics.md). В этой статье рассматриваются основные ресурсы пакетной службы, такие как пулы, вычислительные узлы, задания и задачи, а также приведены общие сведения о функциях этой службы для объемных вычислительных рабочих нагрузок.
* Здесь приведены основные сведения о разработке приложений с поддержкой пакетной службы с помощью [клиентской библиотеки .NET для пакетной службы](quick-run-dotnet.md) или [Python](quick-run-python.md). В этом кратком руководстве рассматривается пример приложения, которое использует пакетную службу для выполнения рабочей нагрузки на нескольких вычислительных узлах и службу хранилища Azure для помещения файла рабочей нагрузки на промежуточное хранение и обработку и его извлечения.

[azure_portal]: https://portal.azure.com
[batch_pricing]: https://azure.microsoft.com/pricing/details/batch/

[marketplace_portal]: ./media/batch-account-create-portal/marketplace-batch.png
[account_blade]: ./media/batch-account-create-portal/batch_blade.png
[account_portal]: ./media/batch-account-create-portal/batch-account-portal.png
[pool_allocation]: ./media/batch-account-create-portal/batch-pool-allocation.png
[account_keys]: ./media/batch-account-create-portal/batch-account-keys.png
[storage_account]: ./media/batch-account-create-portal/storage_account.png
[subscription_access]: ./media/batch-account-create-portal/subscription_iam.png
[add_permission]: ./media/batch-account-create-portal/add_permission.png
[register_provider]: ./media/batch-account-create-portal/register_provider.png
