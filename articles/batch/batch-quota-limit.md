---
title: Квоты и ограничения службы
description: Узнайте о квотах по умолчанию, лимитах и ограничениях пакетной службы Azure, а также о том, как запросить увеличение квоты.
ms.topic: conceptual
ms.date: 08/13/2019
ms.custom: seodec18
ms.openlocfilehash: b172800e6ed2a28315da3b45eb39f2207f8f1c16
ms.sourcegitcommit: a9784a3fd208f19c8814fe22da9e70fcf1da9c93
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/22/2020
ms.locfileid: "83780010"
---
# <a name="batch-service-quotas-and-limits"></a>Квоты и ограничения пакетной службы

Как и в других службах Azure, существуют ограничения на некоторые ресурсы, связанные с пакетной службой. Многие из этих ограничений являются квотами по умолчанию, которые Azure применяет на уровне подписки или учетной записи. В данной статье рассматриваются эти значения по умолчанию и то, как запросить увеличение квот.

Помните об этих квотах при разработке и увеличении масштаба рабочих нагрузок пакетной службы. Например, если в пуле не удается достичь указанного целевого числа вычислительных узлов, возможно, вы достигли основной квоты для учетной записи пакетной службы.

Можно запустить несколько рабочих нагрузок пакетной службы в одной учетной записи пакетной службы. Либо распределить рабочие нагрузки между учетными записями пакетной службы в рамках одной подписки, но в разных регионах Azure.

Если планируется выполнять рабочие нагрузки в производственной среде с использованием пакетной службы, имеет смысл увеличить одну или несколько квот по сравнению со значениями по умолчанию. Для увеличения квоты отправьте (бесплатно) [запрос в службу поддержки клиентов](#increase-a-quota) .

## <a name="resource-quotas"></a>Квоты ресурсов

Квота — это кредитный лимит, а не гарантия наличия ресурсов. Если вам нужны ресурсы в очень большом объеме, обратитесь в службу поддержки Azure.

Также обратите внимание, что квоты не являются гарантированными величинами. Квоты могут изменяться вследствие изменений в пакетной службе или запроса пользователя на изменение значения квоты.

[!INCLUDE [azure-batch-limits](../../includes/azure-batch-limits.md)]

### <a name="cores-quotas-in-user-subscription-mode"></a>Квоты на ядра в режиме пользовательской подписки

Если вы создали учетную запись пакетной службы, в которой для режима выделения пула задана **подписка пользователя**, квоты применяются по-другому. В этом режиме, виртуальные машины пакетной службы и другие ресурсы создаются непосредственно в подписке пользователя при создании пула. Квоты на ядра пакетной службы Azure не применяются к учетной записи, созданной в этом режиме. Вместо этого применяются региональные квоты на вычислительные ядра и другие ресурсы в подписке. Вы можете подробнее узнать об этих квотах в статье [Лимиты, квоты и ограничения подписки и обслуживания Azure](../azure-resource-manager/management/azure-subscription-service-limits.md).

## <a name="pool-size-limits"></a>Ограничения размера пула

Ограничения размера пула задаются пакетной службой. В отличие от [квот ресурсов](#resource-quotas) эти значения нельзя изменить. Только пулы со связью между узлами и пользовательскими образами имеют ограничения, отличные от стандартной квоты.

| **Ресурс** | **Максимальное ограничение** |
| --- | --- |
| **Вычислительные узлы в [пуле с включенной связью между узлами](batch-mpi.md)**  ||
| Режим распределения пула "Пакетная служба" | 100 |
| Режим распределения пула "Пользовательская подписка" | 80 |
| **Вычислительные узлы в [пуле, созданном с помощью ресурса управляемого образа ](batch-custom-images.md)** <sup>1</sup> ||
| Специальные узлы | 2000 |
| Низкоприоритетные узлы | 1000 |

<sup>1</sup> Пулы, для которых не включен обмен данными между узлами.

## <a name="other-limits"></a>Другие ограничения

Дополнительные ограничения, установленные пакетной службой. В отличие от [квот ресурсов](#resource-quotas) эти значения нельзя изменить.

| **Ресурс** | **Максимальное ограничение** |
| --- | --- |
| [Количество параллельных задач](batch-parallel-node-tasks.md) на один вычислительный узел | В 4 раза больше, чем количество ядер в узле |
| [Количество приложений](batch-application-packages.md) на одну учетную запись пакетной службы | 20 |
| Пакеты приложения на приложение | 40 |
| Пакеты приложения на пул | 10 |
| Максимальное время существования задачи | 180 дней <sup>1</sup> |
| [Подключения](virtual-file-mount.md) на вычислительный узел | 10 |

<sup>1</sup> Максимальное время существования задачи от ее добавления к заданию до завершения составляет 180 дней. Завершенные задачи хранятся в течение 7 дней. Данные для задач, которые не были завершены в течение максимального времени существования, недоступны.

## <a name="view-batch-quotas"></a>Просмотр квот пакетной службы

Квоты своей учетной записи пакетной службы можно посмотреть на [портале Azure][portal].

1. Щелкните **Уч. записи пакетной службы** на портале, затем выберите учетную запись пакетной службы, которая вас интересует.
1. Выберите **Свойства** в меню учетной записи пакетной службы.
1. Просмотрите текущие квоты для учетной записи пакетной службы.

    ![Квоты для учетной записи пакетной службы][account_quotas]

## <a name="increase-a-quota"></a>Увеличение квоты

Чтобы запросить увеличение квоты для своей учетной записи или подписки на [портале Azure][portal], выполните указанные ниже действия. Тип увеличения квоты зависит от режима выделения пула в вашей учетной записи пакетной службы. Чтобы запросить увеличение квоты, необходимо указать серию виртуальных машин, для которой требуется увеличить квоту. Увеличение квоты применяется ко всем сериям виртуальных машин.

### <a name="increase-cores-quota-in-batch"></a>Увеличение квоты на число ядер в пакетной службе 

1. На панели мониторинга портала выберите элемент **Справка и поддержка** или щелкните вопросительный знак ( **?** ) в правом верхнем углу портала.
1. Выберите **Новый запрос в службу поддержки** > **Основные**.
1. В разделе **Основные сведения**:
   
    а. **Тип проблемы** > **Ограничения службы и подписки (квоты)**
   
    b. Выберите свою подписку.
   
    c. **Тип квоты** > **Пакетная служба**.
      
    Выберите **Далее**.
    
1. В разделе **Подробные сведения** содержится следующая информация:
      
    а. На вкладке **Укажите сведения** укажите расположение, тип квоты и учетную запись пакетной службы.
    
    ![Увеличение квоты в пакетной службе][quota_increase]

    Имеются следующие типы квот.

    * **На учетную запись пакетной службы**  
        Значения, относящиеся к одной учетной записи пакетной службы, включая ядра с выделенным и низким приоритетом, а также количество заданий и пулов.
        
    * **На регион**  
        Значения, которые применяются ко всем учетным записям пакетной службы в регионе и включают в себя число учетных записей пакетной службы на регион для каждой подписки.

    Квота с низким приоритетом — это одно значение для всех серий виртуальных машин. Если требуются ограниченные номера SKU, необходимо выбрать **Ядра с низким приоритетом** и указать запрашиваемые семейства виртуальных машин.

    b. Выберите **Серьезность** в соответствии с [последствиями для организации][support_sev].

    Выберите **Далее**.

1. В разделе **Контактные данные**:
   
    а. Выберите **Preferred contact method**(Предпочтительный способ связи).
   
    b. Проверьте и введите необходимые контактные данные.
   
    Выберите **Создать**, чтобы отправить запрос в службу поддержки.

После отправки запроса служба поддержки Azure свяжется с вами. Запросы на квоты могут обрабатываться от нескольких минут до двух рабочих дней.

## <a name="related-quotas-for-vm-pools"></a>Связанные квоты для пулов виртуальных машин

В пулах пакетной службы в конфигурации виртуальной машины, развернутой в виртуальной сети Azure, дополнительные сетевые ресурсы Azure выделяются автоматически. На каждые 50 узлов пула в виртуальной сети требуются следующие ресурсы:

* Одна [группа безопасности сети](../virtual-network/security-overview.md#network-security-groups)
* Один [общедоступный IP-адрес](../virtual-network/virtual-network-ip-addresses-overview-arm.md)
* Одна [подсистема балансировки нагрузки](../load-balancer/load-balancer-overview.md)

Эти ресурсы выделяются в подписке, которая содержит виртуальную сеть, предоставленную при создании пула пакетной службы. Эти ресурсы ограничены [квотами ресурсов](../azure-resource-manager/management/azure-subscription-service-limits.md) в подписке. Если вы планируете развертывать большие пулы в виртуальной сети, проверьте квоты в подписке для этих ресурсов. При необходимости запросите увеличение квоты на портале Azure, выбрав **Справка и поддержка**.


## <a name="next-steps"></a>Дальнейшие действия
* [Создание учетной записи пакетной службы Azure](batch-account-create-portal.md) на портале Azure.
* Узнайте подробнее о [рабочем процессе и основных ресурсах пакетной службы](batch-service-workflow-features.md), таких как пулы, узлы, задания и задачи.
* Узнайте о [лимитах, квотах и ограничениях подписок и служб Azure](../azure-resource-manager/management/azure-subscription-service-limits.md).

[portal]: https://portal.azure.com
[portal_classic_increase]: https://azure.microsoft.com/blog/2014/06/04/azure-limits-quotas-increase-requests/
[support_sev]: https://aka.ms/supportseverity

[account_quotas]: ./media/batch-quota-limit/accountquota_portal.png
[quota_increase]: ./media/batch-quota-limit/quota-increase.png
