---
title: Azure Key Vault перемещение хранилища в другой регион | Документация Майкрософт
description: Руководство по перемещению хранилища ключей в другой регион.
services: key-vault
author: ShaneBala-keyvault
manager: ravijan
tags: azure-resource-manager
ms.service: key-vault
ms.subservice: general
ms.topic: conceptual
ms.date: 04/24/2020
ms.author: sudbalas
Customer intent: As a key vault administrator, I want to move my vault to another region.
ms.openlocfilehash: e65a723ac9daafdc09896a50e197034104408df2
ms.sourcegitcommit: 58faa9fcbd62f3ac37ff0a65ab9357a01051a64f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82254152"
---
# <a name="moving-an-azure-key-vault-across-regions"></a>Перемещение Azure Key Vault между регионами

## <a name="overview"></a>Обзор

Key Vault не поддерживает операцию перемещения ресурсов, допускающую перемещение хранилища ключей в другой регион. В этой статье рассматриваются обходные пути при наличии бизнес-необходимости переместить хранилище ключей в другой регион. У каждого параметра есть ограничения, поэтому важно понимать последствия этих решений, прежде чем выполнять их в рабочей среде.

Если необходимо переместить хранилище ключей в другой регион, решение состоит в создании нового хранилища ключей в нужном регионе и ручном копировании каждого отдельного секрета из существующего хранилища ключей в новое хранилище ключей. Эту операцию можно выполнить одним из перечисленных ниже способов.

## <a name="design-considerations"></a>Вопросы проектирования

* Имена Key Vault являются глобально уникальными. Вы не сможете повторно использовать одно и то же имя хранилища.

* Необходимо будет перенастроить политики доступа и параметры сетевой конфигурации в новом хранилище ключей.

* Необходимо будет перенастроить обратимое удаление и очистку защиты в новом хранилище ключей.

* В операции резервного копирования и восстановления не сохраняются параметры автоповорота, возможно, потребуется перенастроить эти параметры.

## <a name="option-1---use-the-key-vault-backup-and-restore-commands"></a>Вариант 1. Использование команд резервного копирования и восстановления хранилища ключей

Вы можете создать резервную копию каждого отдельного секрета, ключа и сертификата в хранилище с помощью команды Backup. Секреты будут скачаны в виде зашифрованного большого двоичного объекта. Затем можно восстановить большой двоичный объект в новом хранилище ключей. Команды описаны в приведенной ниже ссылке.

[Azure Key Vault команды](https://docs.microsoft.com/powershell/module/azurerm.keyvault/?view=azurermps-6.13.0#key_vault)

### <a name="limitations"></a>Ограничения

* Вы не можете создать резервную копию хранилища ключей в одном географическом элементе и восстановить его в другую географию. Дополнительные сведения о географических регионах Azure. [Ссылка](https://azure.microsoft.com/global-infrastructure/geographies/)

* Команда Backup создает резервные копии всех версий каждого секрета. Если у вас есть секрет с большим числом предыдущих версий (более 10), запрос будет превысить максимально допустимый размер запроса, и операция может завершиться ошибкой.

## <a name="option-2---manually-download-and-upload-secrets"></a>Вариант 2. Загрузка и передача секретов вручную

Определенные типы секретов можно скачать вручную. Например, можно скачать сертификаты в виде PFX-файла. Этот параметр устраняет географические ограничения для некоторых типов секретов, таких как сертификаты. PFX-файлы можно передать в любое хранилище ключей в любом регионе. Секрет будет скачан в формате, не защищенном паролем. Вы несете ответственность за защиту секретов после того, как они покидают Key Vault во время выполнения перемещения.
