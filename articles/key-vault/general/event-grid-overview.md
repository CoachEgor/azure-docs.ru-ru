---
title: мониторингу Key Vault с помощью службы "Сетка событий Azure"
description: использованию службы "Сетка событий Azure" для подписки на события Key Vault
services: key-vault
author: msmbaldwin
manager: rkarlin
ms.service: key-vault
ms.subservice: general
ms.topic: conceptual
ms.date: 11/12/2019
ms.author: mbaldwin
ms.openlocfilehash: cdbd78808d1758b43d2b2fe6e8f7ac03652ff92b
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85296344"
---
# <a name="monitoring-key-vault-with-azure-event-grid-preview"></a>мониторингу Key Vault с помощью службы "Сетка событий Azure" (предварительная версия)

Интеграция Key Vault со службой "Сетка событий Azure" сейчас доступна в предварительной версии. Это позволяет пользователям получать уведомления при изменении состояния секрета, хранящегося в хранилище ключей. Изменение состояния определяется как секрет, срок действия которого скоро истечет (30 дней до истечения срока действия), истек срок действия секрета или секрет, для которого доступна новая версия. Поддерживаются уведомления для всех трех типов секретов (ключ, сертификат и секрет).

Приложения могут реагировать на эти события с помощью современной бессерверной архитектуры и без необходимости написания сложного кода или использования дорогостоящих и неэффективных служб опроса. События отправляются через службу [Сетка событий Azure](https://azure.microsoft.com/services/event-grid/) обработчикам событий, таким как [Функции Azure](https://azure.microsoft.com/services/functions/), [Azure Logic Apps](https://azure.microsoft.com/services/logic-apps/), или даже в веб-перехватчик. При этом вы оплачиваете только то, что используете. Дополнительные сведения о ценах см. на странице [с ценами на службу"Сетка событий Azure"](https://azure.microsoft.com/pricing/details/event-grid/).

## <a name="key-vault-events-and-schemas"></a>События и схемы Key Vault

Сетка событий использует [подписки на события](../../event-grid/concepts.md#event-subscriptions) для маршрутизации сообщений о событиях подписчикам. События Key Vault содержат все сведения, необходимые для реагирования на изменения в данных. Вы можете определить событие Key Vault, поскольку свойство eventType начинается с "Microsoft.KeyVault".

Дополнительные сведения см. на странице [схема событий Key Vault](../../event-grid/event-schema-key-vault.md).

> [!WARNING]
> События уведомления активируются только для новых версий секретов, ключей и сертификатов, и, чтобы получать эти уведомления, сначала необходимо подписываться на событие в хранилище ключей.

## <a name="practices-for-consuming-events"></a>Рекомендации по потреблению событий

Приложения, которые обрабатывают события Key Vault, должны следовать нескольким рекомендациям:

* Несколько подписок можно настроить для маршрутизации событий в тот же обработчик событий. Важно не полагаться на события из определенного источника, а проверить раздел сообщения, чтобы убедиться, что они поступают из ожидаемого хранилища ключей.
* Подобным образом убедитесь, что вы готовы к обработке этого типа событий (eventType), а также не следует предполагать, что все получаемые события будут иметь ожидаемый тип.
* Игнорируйте поля, которые вам непонятны.  Такой подход поможет обеспечить устойчивость к новым функциям, которые могут быть добавлены в будущем.
* С помощью префикса и суффикса subject события можно ограничить до конкретного.

## <a name="next-steps"></a>Дальнейшие шаги

- [Обзор Azure Key Vault](overview.md)
- [Обзор службы "Сетка событий Azure"](../../event-grid/overview.md)
- Как [перенаправлять Key Vault события в модуль Runbook службы автоматизации (Предварительная версия)](event-grid-tutorial.md).
- Руководство. [Получение сообщения электронной почты при изменении секрета в хранилище ключей](event-grid-logicapps.md)
- [Схема событий службы "Сетка событий Azure" для Azure Key Vault (предварительная версия)](../../event-grid/event-schema-key-vault.md)
- [Обзор службы автоматизации Azure](../../automation/index.yml)
