---
title: Безопасность Azure Key Vault
description: Управление правами доступа для Azure Key Vault, ключей и секретов. Описание модели проверки подлинности и авторизации для Key Vault и обеспечения защиты вашего хранилища ключей.
services: key-vault
author: msmbaldwin
tags: azure-resource-manager
ms.service: key-vault
ms.subservice: general
ms.topic: conceptual
ms.date: 09/30/2020
ms.author: mbaldwin
ms.openlocfilehash: c3dd4e5138741a3c035507358830f3572cf92751
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91739696"
---
# <a name="azure-key-vault-security"></a>Безопасность Azure Key Vault

Azure Key Vault используется для защиты ключей шифрования и секретов, таких как сертификаты, строки подключения и пароли в облаке. При хранении конфиденциальных и критически важных данных необходимо предпринять шаги по повышению безопасности хранилищ и хранящихся в них данных.

## <a name="identity-and-access-management"></a>Управление удостоверениями и доступом

При создании хранилища ключей в подписке Azure оно автоматически связывается с арендатором Azure AD этой подписки. Любой пользователь, пытающийся управлять содержимым в хранилище или извлекать его из хранилища, должен пройти аутентификацию в Azure AD.

- Аутентификация позволяет идентифицировать вызывающую сторону.
- Авторизация определяет, какие операции может выполнять вызывающая сторона. Авторизация в Key Vault использует сочетание [управления доступом на основе ролей (RBAC)](../../role-based-access-control/overview.md) и политик доступа Azure Key Vault.

### <a name="access-model-overview"></a>Общие сведения о модели доступа

Доступ к хранилищам осуществляется через два интерфейса или плоскости. Это плоскость управления и плоскость данных.

- *Плоскость управления* — это место, где вы управляете Key Vault, а также интерфейс, используемый для создания и удаления хранилищ. Вы также можете читать свойства хранилища ключей и управлять политиками доступа.
- *Плоскость данных* позволяет работать с хранимыми данными в хранилище ключей. Вы можете добавлять, удалять и изменять ключи, секреты и сертификаты.

Все вызывающие стороны (пользователи или приложения) должны пройти аутентификацию и авторизацию, чтобы получить доступ к хранилищу ключей в любой плоскости. Для аутентификации в обеих плоскостях используется Azure Active Directory (Azure AD). Для авторизации в плоскости управления используется управление доступом на основе ролей (RBAC), а в плоскости данных — политика доступа к Key Vault.

Модель единого механизма для аутентификации в обеих плоскостях имеет некоторые преимущества:

- организации могут централизованно управлять доступом ко всем принадлежащим им хранилищам ключей;
- когда пользователь покидает организацию, он мгновенно теряет доступ ко всем этим хранилищам ключей;
- организации могут настроить аутентификацию с помощью параметров в Azure AD (например, включение многофакторной проверки подлинности для повышения безопасности).

### <a name="managing-administrative-access-to-key-vault"></a>Управление административным доступом к Key Vault

При создании хранилища ключей в группе ресурсов вы управляете доступом посредством Azure AD. Можно предоставить пользователям или группе возможность управлять хранилищами ключей в группе ресурсов. Вы можете предоставить доступ на определенном уровне области, назначив соответствующие роли Azure. Чтобы предоставить пользователю доступ к управлению хранилищами ключей, ему необходимо назначить предопределенную роль `key vault Contributor` в определенной области. Роли Azure могут быть назначены следующие уровни областей:

- **Подписка**. роль Azure, назначенная на уровне подписки, применяется ко всем группам ресурсов и ресурсам в рамках этой подписки.
- **Группа ресурсов**. роль Azure, назначенная на уровне группы ресурсов, применяется ко всем ресурсам в этой группе ресурсов.
- **Конкретный ресурс**. роль Azure, назначенная конкретному ресурсу, применяется к этому ресурсу. В этом случае ресурс является определенным хранилищем ключей.

Есть несколько заданных по умолчанию ролей. Если заданные роли не соответствуют вашим потребностям, вы можете определить собственные. Дополнительные сведения см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../../role-based-access-control/built-in-roles.md).

> [!IMPORTANT]
> Если у пользователя есть разрешения `Contributor` в плоскости управления хранилища ключей, он может предоставить себе доступ к плоскости данных, настроив политику доступа к хранилищу ключей. Следует очень внимательно контролировать, у кого есть доступ `Contributor` к вашим хранилищам ключей в рамках роли. Убедитесь, что только авторизованные лица могут получать доступ к хранилищам ключей, ключам, секретам и сертификатам, а также управлять ими.

<a id="data-plane-access-control"></a>
### <a name="controlling-access-to-key-vault-data"></a>Управление доступом к данным Key Vault

Политики доступа Key Vault предоставляют разрешения отдельно для ключей, секретов или сертификата. Можно предоставить пользователю доступ только к ключам, но не к секретам. Разрешения к ключам, секретам и сертификатам управляются на уровне хранилища.

> [!IMPORTANT]
> Политика доступа к Key Vault не поддерживает детализированные разрешения на уровне объектов, таких как определенный ключ, секрет или сертификат. Если пользователю предоставлено разрешение на создание и удаление ключей, он может выполнять эти операции со всеми ключами в этом хранилище ключей.

Вы можете задать политики доступа для хранилища ключей, используя [портал Azure](assign-access-policy-portal.md), [Azure CLI](assign-access-policy-cli.md), [Azure POWERSHELL](assign-access-policy-powershell.md)или [API-интерфейсы RESTful управления Key Vault](/rest/api/keyvault/).

Вы можете ограничить доступ к плоскости данных с помощью [конечных точек службы виртуальной сети для Azure Key Vault](overview-vnet-service-endpoints.md). Вы можете настроить [брандмауэры и правила виртуальной сети](network-security.md) в качестве дополнительного уровня безопасности.

## <a name="network-access"></a>Доступ к сети

Вы можете снизить уязвимость хранилищ, указав IP-адреса, к которым они имеют доступ. Конечные точки служб для виртуальной сети для Azure Key Vault позволяют ограничить доступ к определенной виртуальной сети. Также эти конечные точки позволяют ограничить доступ определенным набором диапазонов адресов IPv4 (протокол IP версии 4). Для любого пользователя при попытке подключения к хранилищу ключей из любых других расположений доступ будет отклонен.

После того как правила брандмауэра вступают в действие, пользователи могут считывать данные только из Key Vault, если их запросы исходят из разрешенных виртуальных сетей или диапазонов IPv4-адресов. Это относится и к получению доступа к Key Vault с портала Azure. Пользователь сможет перейти в хранилище ключей с портала Azure, но не сможет получить список ключей, секретов и сертификатов, если клиентский компьютер не включен в список разрешенных. Это также влияет на выбор хранилища ключей другими службами Azure. Пользователи смогут просматривать список хранилищ ключей, но не список ключей, если правила брандмауэра запрещают доступ их клиентским компьютерам.

Дополнительные сведения о сетевом адресе Azure Key Vault см. в статье [Конечные точки службы для виртуальной сети для Azure Key Vault](overview-vnet-service-endpoints.md).

## <a name="tls-and-https"></a>TLS и HTTPS

*   Серверная часть Key Vault (плоскость данных) является сервером с несколькими клиентами. Это означает, что хранилища ключей от разных клиентов могут совместно использовать один и тот же общедоступный IP-адрес. Для достижения изоляции каждый HTTP-запрос проходит проверку подлинности и авторизован независимо от других запросов.
*   Вы можете вычислить более старые версии TLS, чтобы сообщать об уязвимостях, но так как общедоступный IP-адрес является общим, Группа службы хранилища ключей не может отключить старые версии TLS для отдельных хранилищ ключей на транспортном уровне.
*   Протокол HTTPS позволяет клиенту принимать участие в согласовании TLS. **Клиенты могут принудительно применять последнюю версию TLS**, и каждый раз, когда клиент делает это, все соединение будет использовать соответствующую защиту на уровне. Тот факт, что Key Vault по-прежнему поддерживает более старые версии TLS, не будет нарушать безопасность подключений с использованием более новых версий TLS.
*   Несмотря на известные уязвимости протокола TLS, нет известных атак, которые позволят вредоносному агенту извлекать любую информацию из хранилища ключей, когда злоумышленник инициирует подключение к версии TLS с уязвимостями. Злоумышленнику по-прежнему потребуется пройти проверку подлинности и авторизацию, и при условии, что надежные клиенты всегда подключаются к последним версиям TLS, не существует способа утечки учетных данных из уязвимостей в старых версиях TLS.

## <a name="logging-and-monitoring"></a>Ведение журналов и мониторинг

Ведение журнала Key Vault сохраняет сведения о действиях, выполняемых в вашем хранилище. Полные сведения см. в разделе [ведение журнала Key Vault](logging.md).

Рекомендации по безопасному управлению учетными записями хранения см. в статье Обзор [безопасности службы хранилища Azure](../../storage/blobs/security-recommendations.md) .

## <a name="next-steps"></a>Next Steps

- [Конечные точки службы для виртуальной сети для Azure Key Vault](overview-vnet-service-endpoints.md)
- [Сведения о встроенных ролях встроенные роли](../../role-based-access-control/built-in-roles.md).