---
title: Безопасность в Azure Key Vault | Документация Майкрософт
description: Управление правами доступа для Azure Key Vault, ключей и секретов. Описание модели проверки подлинности и авторизации для Key Vault и обеспечения защиты вашего хранилища ключей.
services: key-vault
author: barclayn
manager: barbkess
tags: azure-resource-manager
ms.service: key-vault
ms.topic: conceptual
ms.date: 04/18/2019
ms.author: barclayn
Customer intent: As a key vault administrator, I want to learn the options available to secure my vaults
ms.openlocfilehash: 5b32e4897e718e0e411caf9ba76b036f1352bde0
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "64715275"
---
# <a name="azure-key-vault-security"></a>Безопасность в Azure Key Vault

Требуется для защиты ключей шифрования и секретов, таких как сертификаты, строки соединения и пароли в облаке, поэтому при использовании Azure Key Vault. Так как вы храните конфиденциальные и важных бизнес-данных, которые необходимо выполнить шаги, чтобы повысить уровень безопасности, хранилищ и данные, хранящиеся в них. Здесь мы рассмотрим некоторые основные понятия, которые следует учитывать при разработке безопасности Azure Key Vault.

## <a name="identity-and-access-management"></a>Управление удостоверениями и доступом

При создании хранилища ключей в подписке Azure оно автоматически связывается с арендатором Azure AD этой подписки. Всякий, кто пытается управлять или получения содержимого из хранилища должен пройти проверку подлинности с помощью Azure AD.

- Аутентификация позволяет идентифицировать вызывающую сторону.
- Авторизация определяет, какие операции, вызывающий объект может выполнять. Проверка подлинности в хранилище ключей использует сочетание [управление доступом на основе ролей](../role-based-access-control/overview.md) (RBAC) и политики доступа хранилища ключей Azure.

### <a name="access-model-overview"></a>Общие сведения о модели доступа

Доступ к хранилищам осуществляется через два интерфейса или плоскости. Эти плоскостей: плоскость управления и плоскости данных.

- *Плоскость управления* управление Key Vault сам, а это интерфейс, используемый для создания и удаления хранилищ. Также можно считывать свойства хранилища ключей и управление политиками доступа.
- *Плоскости данных* позволяет работать с данными, хранящимися в хранилище ключей. Вы можете добавлять, удалять и изменять ключи, секреты и сертификаты.

Доступ к хранилищу ключей в любом плоскости, все вызывающие объекты (пользователи или приложения) должны аутентификации и авторизации. Для аутентификации в обеих плоскостях используется Azure Active Directory (Azure AD). Для авторизации в плоскости управления используется управление доступом на основе ролей (RBAC), а в плоскости данных — политика доступа к Key Vault.

Модель единого механизма для аутентификации в обеих плоскостях имеет некоторые преимущества:

- организации могут централизованно управлять доступом ко всем принадлежащим им хранилищам ключей;
- когда пользователь покидает организацию, он мгновенно теряет доступ ко всем этим хранилищам ключей;
- Организации могут настроить проверку подлинности с помощью параметров в Azure AD, например, чтобы включить многофакторную проверку подлинности для повышения безопасности

### <a name="managing-administrative-access-to-key-vault"></a>Управление административный доступ к Key Vault

При создании хранилища ключей в группе ресурсов, можно управлять доступом с помощью Azure AD. Можно предоставить пользователям или группе возможность управлять хранилищами ключей в группе ресурсов. Можно предоставить доступ на уровне определенной области путем назначения соответствующей роли RBAC. Чтобы предоставить пользователю доступ к управлению хранилищами ключей, ему необходимо назначить предопределенную роль `key vault Contributor` в определенной области. Роли RBAC можно назначить следующие области:

- **Подписка**: Роль RBAC, назначенная на уровне подписки, применяется ко всем группам ресурсов и ресурсам в этой подписке.
- **Группа ресурсов.** Роль RBAC, назначенная на уровне группы ресурсов, применяется ко всем ресурсам в этой группе ресурсов.
- **Определенный ресурс.** Роль RBAC, назначенная для конкретного ресурса, применяется только к этому ресурсу. В этом случае ресурс является определенным хранилищем ключей.

Есть несколько заданных по умолчанию ролей. Если заданные роли не соответствуют вашим потребностям, вы можете определить собственные. Дополнительные сведения см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../role-based-access-control/built-in-roles.md).

> [!IMPORTANT]
> Если у пользователя есть разрешения `Contributor` в плоскости управления хранилища ключей, он может предоставить себе доступ к плоскости данных, настроив политику доступа к хранилищу ключей. Следует очень внимательно контролировать, у кого есть доступ `Contributor` к вашим хранилищам ключей в рамках роли. Убедитесь, что только авторизованные лица могут получать доступ к хранилищам ключей, ключам, секретам и сертификатам, а также управлять ими.

<a id="data-plane-access-control"></a>
### <a name="controlling-access-to-key-vault-data"></a>Управление доступом к данным в хранилище ключей

Политики доступа Key Vault разрешения отдельно для ключей, секретов и сертификатов. Можно предоставить пользователю доступ только к ключам, но не к секретам. Разрешения на доступ к ключи, секреты и сертификаты осуществляется на уровне хранилища.

> [!IMPORTANT]
> Политика доступа к Key Vault не поддерживает детализированные разрешения на уровне объектов, таких как определенный ключ, секрет или сертификат. Если пользователю предоставлено разрешение на создание и удаление ключей, он может выполнять эти операции со всеми ключами в этом хранилище ключей.

Чтобы задать политики доступа для хранилища ключей, можно использовать [портал Azure](https://portal.azure.com/), [Azure CLI](../cli-install-nodejs.md), [Azure PowerShell](/powershell/azureps-cmdlets-docs) или [REST API управления Key Vault](https://msdn.microsoft.com/library/azure/mt620024.aspx).

Можно ограничить доступ к плоскости данных с помощью [конечных точек служб для виртуальной сети для Azure Key Vault](key-vault-overview-vnet-service-endpoints.md). Вы можете настроить [брандмауэры и правила виртуальной сети](key-vault-network-security.md) в качестве дополнительного уровня безопасности.

## <a name="network-access"></a>Доступ к сети

Раскрытие хранилищ можно уменьшить, указав IP-адреса имеют к ним доступ. Конечные точки служб для виртуальной сети для Azure Key Vault позволяют ограничить доступ к определенной виртуальной сети. Также эти конечные точки позволяют ограничить доступ определенным набором диапазонов адресов IPv4 (протокол IP версии 4). Для любого пользователя при попытке подключения к хранилищу ключей из любых других расположений доступ будет отклонен.

После брандмауэра правила действуют, пользователи могут только считывать данные из хранилища ключей при их запросы приходят из разрешенных виртуальных сетей или диапазонов адресов IPv4. Это относится и к получению доступа к Key Vault с портала Azure. Пользователь сможет перейти в хранилище ключей с портала Azure, но не сможет получить список ключей, секретов и сертификатов, если клиентский компьютер не включен в список разрешенных. Это также влияет на выбор хранилища ключей другими службами Azure. Пользователи смогут просматривать список хранилищ ключей, но не список ключей, если правила брандмауэра запрещают доступ их клиентским компьютерам.

Дополнительные сведения о хранилище ключей Azure сетевой адрес проверки [конечных точек службы виртуальной сети для хранилища ключей Azure](key-vault-overview-vnet-service-endpoints.md)

## <a name="monitoring"></a>Мониторинг

Ведение журнала Key Vault сохраняет сведения о действий, выполненных в вашем хранилище. Журналы хранилища ключей:

- Все прошедшие проверку подлинности запросы REST API, включая неудачные запросы
  - Операции с ключом хранилища сам. Эти операции включают создание, удаление, настройку политик доступа и обновления атрибутов хранилища ключей, например теги.
  - Операции с ключами и секретами в хранилище ключей, включая:
    - Создание, изменение или удаление этих ключей и секретов.
    - Подписывание, проверка, шифрования, расшифровки, упаковки и распаковки ключей, получение секретов и список ключей и секретов (и их версий).
- непроверенные запросы, которые приводят к появлению ответа 401 Примерами являются запросы без токена носителя, которые неправильного формата или просроченные или имеют недопустимый маркер.

Сведения о ведении журнала может осуществляться в течение 10 минут после операции хранилища ключей. Именно для управление журналами в своей учетной записи хранения. 

- Используйте стандартные методы контроля доступа, предоставляемые Azure, для защиты журналов путем ограничения доступа к ним.
- Удаляйте журналы, которые больше не нужно хранить в учетной записи хранения.

Рекомендации по безопасному управлению хранилища учетных записей см. в [руководство по безопасности службы хранилища Azure](../storage/common/storage-security-guide.md)

## <a name="next-steps"></a>Следующие шаги

- [Конечные точки службы виртуальной сети для хранилища ключей Azure](key-vault-overview-vnet-service-endpoints.md)
- [Встроенные роли встроенные роли](../role-based-access-control/built-in-roles.md).
- [Конечные точки службы виртуальной сети для хранилища ключей Azure](key-vault-overview-vnet-service-endpoints.md)
