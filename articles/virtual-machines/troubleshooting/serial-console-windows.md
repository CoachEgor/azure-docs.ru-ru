---
title: Azure последовательной консоли для Windows | Документация Майкрософт
description: Двунаправленный последовательной консоли для виртуальных машин Azure и масштабируемые наборы виртуальных машин.
services: virtual-machines-windows
documentationcenter: ''
author: asinn826
manager: jeconnoc
editor: ''
tags: azure-resource-manager
ms.service: virtual-machines-windows
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 5/1/2019
ms.author: alsin
ms.openlocfilehash: 32d385416c83f81553e734d9471d0b502a458b07
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66390506"
---
# <a name="azure-serial-console-for-windows"></a>Azure последовательной консоли для Windows

Последовательной консоли на портале Azure предоставляет доступ к текстовой консоли для виртуальных машин Windows (ВМ) и экземпляров масштабируемых наборов виртуальных машин. Это подключение через последовательный порт подключается к последовательному порту COM1 виртуальной Машине или экземпляру набора масштабирования виртуальных машин, предоставляя доступ к нему, независимо от состояния сети или операционной системы. Последовательной консоли может осуществляться только с помощью портала Azure и допустима только для пользователей, имеющих роли доступа участника или более поздней версии для масштабируемого набора виртуальной Машины или виртуальной машины.

Последовательная консоль работает таким же образом, для виртуальных машин и экземпляров масштабируемых наборов виртуальных машин. В этом документе все упоминания к виртуальным машинам неявно будет включать экземпляров масштабируемых наборов виртуальных машин, если не указано иное.

Документация по последовательной консоли для виртуальных машин Linux и масштабируемый набор виртуальных машин, см. в разделе [Azure последовательной консоли для Linux](serial-console-linux.md).

> [!NOTE]
> В глобальных регионах Azure общедоступна последовательной консоли. Последовательная консоль еще недоступна в облаке Azure для государственных организаций или облаке Azure для Китая.


## <a name="prerequisites"></a>Технические условия

* Экземпляру виртуальной Машины или виртуальной машины масштабируемого набора необходимо использовать модели развертывания resource Manager. Классические развертывания не поддерживаются.

- Учетная запись, которая использует последовательную консоль должна иметь [роли участника виртуальной машины](../../role-based-access-control/built-in-roles.md#virtual-machine-contributor) для виртуальной Машины и [диагностику загрузки](boot-diagnostics.md) учетной записи хранения

- Экземпляру виртуальной Машины или виртуальной машины масштабируемого набора необходимо у пользователя с использованием пароля. Вы можете создать ее с функцией [сброса пароля](https://docs.microsoft.com/azure/virtual-machines/extensions/vmaccess#reset-password) расширения для доступа к виртуальной машине. В разделе **Поддержка и устранение неполадок** выберите **Сбросить пароль**.

* В виртуальной машине, в которой вы обращаетесь к последовательной консоли, должна быть включена [диагностика загрузки](boot-diagnostics.md).

    ![Параметры диагностики загрузки](../media/virtual-machines-serial-console/virtual-machine-serial-console-diagnostics-settings.png)

## <a name="get-started-with-the-serial-console"></a>Начало работы с последовательной консолью
Последовательной консоли для виртуальных машин и масштабируемого набора виртуальных машин доступен только через портал Azure:

### <a name="serial-console-for-virtual-machines"></a>Последовательной консоли для виртуальных машин
Последовательной консоли для виртуальных машин так же просто, как если щелкнуть **последовательной консоли** в **поддержка и устранение неполадок** на портале Azure.
  1. Откройте [портал Azure](https://portal.azure.com).

  1. Перейдите к **все ресурсы** и выберите виртуальную машину. Откроется страница обзора для виртуальной машины.

  1. Прокрутите вниз до раздела **Поддержка и устранение неполадок** и выберите **Последовательная консоль**. Откроется новая область с последовательной консолью, и запустится подключение.

### <a name="serial-console-for-virtual-machine-scale-sets"></a>Последовательной консоли для масштабируемых наборов виртуальных машин
Последовательной консоли можно найти в каждого отдельного экземпляра для масштабируемых наборов виртуальных машин. Необходимо будет перейти к отдельного экземпляра масштабируемого набора виртуальных машин, прежде чем увидел **последовательной консоли** кнопки. Если ваш масштабируемый набор виртуальных машин не содержит включена Диагностика загрузки, убедитесь, что обновления модели масштабируемого набора виртуальной машины для диагностики загрузки, а затем обновите все экземпляры на новую модель, чтобы получить доступ к последовательной консоли.
  1. Откройте [портал Azure](https://portal.azure.com).

  1. Перейдите к **все ресурсы** и выберите масштабируемый набор виртуальных машин. Страница обзора масштабирования виртуальных машин задайте откроется.

  1. Перейдите к **экземпляров**

  1. Выберите экземпляр виртуальной машины масштабируемого набора

  1. Из **поддержка и устранение неполадок** выберите **последовательной консоли**. Откроется новая область с последовательной консолью, и запустится подключение.

## <a name="enable-serial-console-functionality"></a>Включение функции последовательной консоли

> [!NOTE]
> Если вы не видите в последовательной консоли, убедитесь, что этот Диагностика загрузки включена на виртуальной Машине или виртуальной машины масштабируемого набора.

### <a name="enable-the-serial-console-in-custom-or-older-images"></a>Включение последовательной консоли в пользовательских или старых образах
Новые образы Windows Server в Azure по умолчанию оснащены [специальной административной консолью](https://technet.microsoft.com/library/cc787940(v=ws.10).aspx) (SAC). SAC поддерживается в серверных версиях Windows, но недоступна в клиентских версиях (например, в Windows 10, Windows 8 или Windows 7).

Для более старых образов Windows Server (созданных до февраля 2018 г.) вы можете автоматизировать включение последовательной консоли с помощью функции "Выполнить команду" на портале Azure. На портале Azure выберите **выполните команду**, затем выберите команду с именем **EnableEMS** из списка.

![Список команд запуска](./media/virtual-machines-serial-console/virtual-machine-windows-serial-console-runcommand.png)

Кроме того чтобы вручную включить последовательную консоль для масштабируемого набора Windows виртуальных машин и виртуальных машин, созданных до февраля 2018 г., выполните следующие действия.

1. Подключитесь к виртуальной машине Windows через удаленный рабочий стол.
1. Запустите следующие команды из командной строки с правами администратора:
    - `bcdedit /ems {current} on`
    - `bcdedit /emssettings EMSPORT:1 EMSBAUDRATE:115200`
1. Чтобы использовать консоль SAC, перезагрузите систему.

    ![Консоль SAC](./media/virtual-machines-serial-console/virtual-machine-windows-serial-console-connect.gif)

В случае необходимости SAC можно также включить в автономном режиме.

1. Подключите к существующей виртуальной машине в качестве диска данных тот диск Windows, для которого вы хотите настроить SAC.

1. Запустите следующие команды из командной строки с правами администратора:
   - `bcdedit /store <mountedvolume>\boot\bcd /ems {default} on`
   - `bcdedit /store <mountedvolume>\boot\bcd /emssettings EMSPORT:1 EMSBAUDRATE:115200`

#### <a name="how-do-i-know-if-sac-is-enabled"></a>Как узнать, доступна ли SAC?

Если консоль [SAC](https://technet.microsoft.com/library/cc787940(v=ws.10).aspx) не включена, последовательная консоль не отображает строку запроса SAC. В некоторых случаях сведения о работоспособности виртуальной машины отображаются, а иногда строка остается пустой. Если вы используете образ Windows Server, созданный ранее февраля 2018 года, консоль SAC вряд ли будет включена.

### <a name="enable-the-windows-boot-menu-in-the-serial-console"></a>Включение меню загрузки Windows в последовательной консоли

Если вы намерены включить отображение сообщений загрузчика Windows в последовательной консоли, добавьте параметры в конфигурацию загрузки. Дополнительные сведения см. в документации по [bcdedit](https://docs.microsoft.com/windows-hardware/drivers/devtest/bcdedit--set).

1. Подключитесь к виртуальной Машине Windows или экземпляр виртуальной машины масштабируемого набора с помощью удаленного рабочего стола.

1. Запустите следующие команды из командной строки с правами администратора:
   - `bcdedit /set {bootmgr} displaybootmenu yes`
   - `bcdedit /set {bootmgr} timeout 10`
   - `bcdedit /set {bootmgr} bootems yes`

1. Перезагрузите систему, чтобы включить меню загрузки.

> [!NOTE]
> Время ожидания, установленное для отображения меню диспетчера загрузки, будет влиять на общее время загрузки ОС. Если период ожидания 10 секунд вы считаете слишком коротким или слишком долгим, измените это значение.

## <a name="use-serial-console"></a>Использование последовательной консоли

### <a name="use-cmd-or-powershell-in-serial-console"></a>Используйте CMD или PowerShell в последовательной консоли

1. Подключение к последовательной консоли Если подключение выполнено успешно, в командной строке отображается приглашение **SAC>** :

    ![Подключение к SAC](./media/virtual-machines-serial-console/virtual-machine-windows-serial-console-connect-sac.png)

1.  Введите `cmd`, чтобы создать канала с экземпляром командной строки.

1.  Введите `ch -si 1`, чтобы переключиться на этот канал, в котором выполняется экземпляр командной строки.

1.  Нажмите клавишу **ВВОД**, а затем введите учетные данные для входа с привилегиями администратора.

1.  После ввода действительных учетных данных открывается экземпляр командной строки.

1.  Чтобы запустить экземпляр PowerShell, введите `PowerShell` в экземпляре командной строки и нажмите клавишу **ВВОД**.

    ![Открытие экземпляра PowerShell](./media/virtual-machines-serial-console/virtual-machine-windows-serial-console-powershell.png)

### <a name="use-the-serial-console-for-nmi-calls"></a>Использование последовательной консоли для вызовов немаскируемого прерывания
Немаскируемое прерывание (NMI) предназначено для создания сигнала, который программное обеспечение на виртуальной машине не будет игнорировать. Раньше немаскируемые прерывания использовались для мониторинга аппаратных проблем в системах, требующих определенного времени отклика. Сегодня, программисты и Администраторы часто используют NMI как механизм для отладки или Устранение неполадок систем, которые не отвечают.

Из последовательной консоли можно отправить немаскируемое прерывание на виртуальную машину Azure, нажав значок клавиатуры в командной строке. Поведение системы при получении немаскируемого прерывания зависит от конфигурации виртуальной машины. В Windows можно настроить аварийное завершение и создание дампа памяти при получении немаскируемого прерывания.

![Отправка немаскируемого прерывания](../media/virtual-machines-serial-console/virtual-machine-windows-serial-console-nmi.png) <br>

Сведения о настройке Windows для создания аварийного дампа при получении немаскируемого прерывания см. в статье [Как создать файл дампа памяти ядра или полный файла аварийной копии памяти с помощью прерывание (NMI) на компьютере под управлением Windows](https://support.microsoft.com/help/927069/how-to-generate-a-complete-crash-dump-file-or-a-kernel-crash-dump-file).

### <a name="use-function-keys-in-serial-console"></a>Использование функциональных клавиш в последовательной консоли
Функциональные клавиши включены для использования в последовательной консоли на виртуальных машинах Windows. Клавиша F8 в раскрывающемся списке последовательной консоли позволяет легко перейти к меню Advanced Boot Settings (Расширенные параметры загрузки), но последовательная консоль совместима и с другими функциональными клавишами. Может потребоваться нажать **Fn** + **F1** (или клавишу F2, F3, и т.д.) на клавиатуре, в зависимости от компьютера при использовании последовательной консоли.

### <a name="use-wsl-in-serial-console"></a>Использование WSL в последовательной консоли
Подсистема Windows для Linux (WSL) включена для Windows Server 2019 или более поздней версии, поэтому, если вы используете такую ОС, эту подсистему также можно включить для использования в последовательной консоли. Это может быть полезным для пользователей, которые умеют работать с командами Linux. Инструкции по включению WSL для Windows Server см. в [руководстве по установке](https://docs.microsoft.com/windows/wsl/install-on-server).

### <a name="restart-your-windows-vmvirtual-machine-scale-set-instance-within-serial-console"></a>Перезапустить в Windows виртуальной Машины или виртуальные машины экземпляру масштабируемого набора в последовательной консоли
Инициируйте перезапуск в последовательной консоли, перейдя к кнопку питания и нажав кнопку «Перезапуск виртуальной Машины». При этом запустится перезагрузка виртуальной машины и на портале Azure появится уведомление о перезапуске.

Это полезно в ситуациях, где вы можете получить доступ к меню загрузки, не выходя из взаимодействие с последовательной консоли.

![Перезагрузка последовательной консоли Windows](./media/virtual-machines-serial-console/virtual-machine-serial-console-restart-button-windows.gif)

## <a name="disable-serial-console"></a>Отключение последовательной консоли
По умолчанию доступ к последовательной консоли включен для всех виртуальных машин во всех подписках. Последовательную консоль можно отключить на уровне подписки или на уровне виртуальной машины.

### <a name="vmvirtual-machine-scale-set-level-disable"></a>Отключение уровня набора масштабирования виртуальной Машины или виртуальной машины
Последовательной консоли можно отключить для определенной виртуальной Машины или виртуальной машины набора масштабирования, отключив параметр диагностики загрузки. Отключите функцию диагностики загрузки на портале Azure, чтобы отключить последовательной консоли для виртуальной Машины или масштабируемого набора виртуальных машин. Если вы используете последовательную консоль на масштабируемый набор виртуальных машин, убедитесь, что обновление экземплярам масштабируемого набора виртуальных машин до последней модели.

> [!NOTE]
> Чтобы включить или отключить последовательную консоль для подписки, у вас должно быть разрешение на запись в этой подписке. Эти разрешения есть у ролей администратора и владельца (но не только). У пользовательских ролей также может быть разрешение на запись.

### <a name="subscription-level-disable"></a>Отключение на уровне подписки
Последовательную консоль можно отключить для всей подписки с помощью [вызова REST API отключения консоли](/rest/api/serialconsole/console/disableconsole). Это действие требует доступа на уровне участника или более поздней версии для подписки. Вы можете нажать кнопку **Попробовать**, доступную на странице документации по API, чтобы отключить и включить последовательную консоль для подписки. В поле **subscriptionId** введите идентификатор подписки, в поле **default** — значение "default", а затем нажмите кнопку **Запуск**. Команды для Azure CLI пока недоступны.

Чтобы включить последовательную консоль для подписки, используйте [вызова включить REST API консоли](/rest/api/serialconsole/console/enableconsole).

![Попробуйте в REST API](../media/virtual-machines-serial-console/virtual-machine-serial-console-rest-api-try-it.png)

Кроме того, можно использовать набор команд bash в Cloud Shell, чтобы отключить, включить и просмотреть отключенное состояние последовательной консоли для подписки:

* Чтобы получить отключенное состояние последовательной консоли для подписки:
    ```azurecli-interactive
    $ export ACCESSTOKEN=($(az account get-access-token --output=json | jq .accessToken | tr -d '"'))

    $ export SUBSCRIPTION_ID=$(az account show --output=json | jq .id -r)

    $ curl "https://management.azure.com/subscriptions/$SUBSCRIPTION_ID/providers/Microsoft.SerialConsole/consoleServices/default?api-version=2018-05-01" -H "Authorization: Bearer $ACCESSTOKEN" -H "Content-Type: application/json" -H "Accept: application/json" -s | jq .properties
    ```
* Чтобы отключить последовательную консоль для подписки:
    ```azurecli-interactive
    $ export ACCESSTOKEN=($(az account get-access-token --output=json | jq .accessToken | tr -d '"'))

    $ export SUBSCRIPTION_ID=$(az account show --output=json | jq .id -r)

    $ curl -X POST "https://management.azure.com/subscriptions/$SUBSCRIPTION_ID/providers/Microsoft.SerialConsole/consoleServices/default/disableConsole?api-version=2018-05-01" -H "Authorization: Bearer $ACCESSTOKEN" -H "Content-Type: application/json" -H "Accept: application/json" -s -H "Content-Length: 0"
    ```
* Чтобы включить последовательную консоль для подписки:
    ```azurecli-interactive
    $ export ACCESSTOKEN=($(az account get-access-token --output=json | jq .accessToken | tr -d '"'))

    $ export SUBSCRIPTION_ID=$(az account show --output=json | jq .id -r)

    $ curl -X POST "https://management.azure.com/subscriptions/$SUBSCRIPTION_ID/providers/Microsoft.SerialConsole/consoleServices/default/enableConsole?api-version=2018-05-01" -H "Authorization: Bearer $ACCESSTOKEN" -H "Content-Type: application/json" -H "Accept: application/json" -s -H "Content-Length: 0"
    ```

## <a name="serial-console-security"></a>Безопасность последовательной консоли

### <a name="access-security"></a>Безопасность доступа
Доступ к последовательной консоли ограничен пользователями, которые имеют [роли с доступом участника виртуальной машины](../../role-based-access-control/built-in-roles.md#virtual-machine-contributor) или выше. Если клиент Azure Active Directory требует многофакторной проверки подлинности (MFA), то для доступа к последовательной консоли также понадобится MFA, так как доступ к последовательной консоли предоставляется через [портал Azure](https://portal.azure.com).

### <a name="channel-security"></a>Безопасность канала
Все данные, исходящие и поступающие, при пересылке по сети зашифрованы.

### <a name="audit-logs"></a>Журналы аудита
Все сведения о доступе к последовательной консоли записываются в журналы [диагностики загрузки](https://docs.microsoft.com/azure/virtual-machines/linux/boot-diagnostics) на виртуальной машине. Права доступа к этим журналам и на работу с ними принадлежат администратору виртуальной машины Azure.

> [!CAUTION]
> Пароли доступа для консоли не записываются. Тем не менее если команды, выполняемые в консоли, содержат или выводят пароли, секреты, имена пользователей или другие персональные данные в любой форме, они будут записываться в журналы диагностики загрузки виртуальной машины. Персональные данные будут записываться вместе с другим видимым текстом как часть реализации функции обратной прокрутки последовательной консоли. Эти журналы являются циклическими. Только пользователи с разрешениями на чтение в учетной записи хранения диагностики имеют к ним доступ. Но мы советуем следовать рекомендациям по использованию удаленного рабочего стола для всего, что может содержать секретные или персональные данные.

### <a name="concurrent-usage"></a>Одновременное использование
Когда один пользователь подключен к последовательной консоли, а другой успешно запрашивает доступ к этой же виртуальной машине, первый пользователь будет отключен, а второй — подключен к тому же сеансу.

> [!CAUTION]
> Это означает, что отключенный пользователь не выполнит выход. Возможность принудительного выхода из системы после отключения (с помощью SIGHUP или похожего механизма) по-прежнему планируется. Для Windows включено автоматическое истечение времени ожидания в SAC, а в Linux вы можете самостоятельно настроить для терминала время ожидания.

## <a name="accessibility"></a>Специальные возможности
Возможности доступа являются важной задачей для последовательной консоли Azure. С этой целью мы обеспечили доступность последовательной консоли для лиц с нарушениями зрения и слуха, а также для людей, которые не могут использовать мышь.

### <a name="keyboard-navigation"></a>Навигация с помощью клавиатуры
Используйте клавишу **TAB** на клавиатуре для навигации по интерфейсу последовательной консоли на портале Azure. Ваше местоположение будет выделено на экране. Чтобы оставить фокус в окне последовательной консоли, нажмите клавиши **CTRL**+**F6** на клавиатуре.

### <a name="use-the-serial-console-with-a-screen-reader"></a>Использование последовательной консоли с помощью средства чтения экрана
Последовательная консоль имеет встроенную поддержку чтения экрана. Навигация с помощью включенного средства чтения экрана дает возможность чтения текста вслух с помощью выбранной кнопки.

## <a name="common-scenarios-for-accessing-the-serial-console"></a>Общие сценарии для доступа к последовательной консоли

Сценарий          | Действия в последовательной консоли
:------------------|:-----------------------------------------
Неверные правила брандмауэра | Откройте последовательную консоль и исправьте правила брандмауэра Windows.
Проверка файловой системы на случай повреждения | Откройте последовательную консоль и восстановите файловую систему.
Проблемы с конфигурацией RDP | Откройте последовательную консоль и измените параметры. Дополнительные сведения см. в [документации по RDP](https://docs.microsoft.com/windows-server/remote/remote-desktop-services/clients/remote-desktop-allow-access).
Сеть блокирует работу системы | Чтобы управлять системой, откройте последовательную консоль на портале Azure. Некоторые команды сети перечислены в статье [о командах Windows для CMD и PowerShell](serial-console-cmd-ps-commands.md).
Взаимодействие с загрузчиком | Подключитесь к данным конфигурации загрузки через последовательную консоль. Этот процесс описан в статье [Включение меню загрузки Windows в последовательной консоли](#enable-the-windows-boot-menu-in-the-serial-console).


## <a name="errors"></a>Errors
Так как большинство ошибок временны, повторная попытка подключения часто их устраняет. Следующая таблица показывает список ошибок и способы их устранения для обеих виртуальных машин и экземпляров масштабируемых наборов виртуальных машин.

Ошибка                            |   Устранение
:---------------------------------|:--------------------------------------------|
Не удалось получить параметры диагностики загрузки для *&lt;Имя VM&gt;* . Чтобы использовать последовательную консоль, включите диагностику загрузки для этой виртуальной машины. | Включите [диагностику загрузки](boot-diagnostics.md) для виртуальной машины.
Виртуальная машина находится в состоянии "Остановлено (освобождено)". Запустите виртуальную машину и повторите попытку подключения к последовательной консоли. | Для доступа к последовательной консоли виртуальная машина должна быть в состоянии "Запущено".
У вас нет нужных разрешений для использования последовательной консоли этой виртуальной машины. Убедитесь в наличии по крайней мере разрешений роли участника виртуальной машины.| Для доступа к последовательной консоли требуются определенные разрешения. Дополнительные сведения см. в разделе [Предварительные требования](#prerequisites).
Не удалось определить группу ресурсов для учетной записи хранения диагностики загрузки *&lt;имя учетной записи&gt;* . Убедитесь, что для этой виртуальной машины включена диагностика загрузки и у вас есть доступ к этой учетной записи хранения. | Для доступа к последовательной консоли требуются определенные разрешения. Дополнительные сведения см. в разделе [Предварительные требования](#prerequisites).
При доступе к учетной записи хранения для диагностики загрузки виртуальной машины обнаружен ответ "Запрещено". | Убедитесь, что в системе диагностики загрузки нет брандмауэра учетной записи. Для функционирования последовательной консоли требуется доступная учетная запись хранения для диагностики загрузки.
Веб-сокет закрыт или его не удалось открыть. | Может потребоваться добавить `*.console.azure.com` в список разрешений. Более подробный, но более длинный подход заключается в добавлении в список разрешений [диапазонов IP-адресов центра обработки данных Microsoft Azure](https://www.microsoft.com/download/details.aspx?id=41653), которые изменяются довольно часто.
Отображаются только сведения о работоспособности при подключении к виртуальной машине Windows| Эта ошибка отображается, если специальная административная консоль не была включена для вашего образа Windows. Инструкции о том, как вручную включить SAC на виртуальной машине Windows, см. в разделе [Включение последовательной консоли в пользовательских или старых образах](#enable-the-serial-console-in-custom-or-older-images). Дополнительные сведения см. в документации [и сигналах работоспособности Windows](https://github.com/Microsoft/azserialconsole/blob/master/Known_Issues/Windows_Health_Info.md).

## <a name="known-issues"></a>Известные проблемы
Нам известно о некоторых проблемах с последовательной консолью. Ниже приведен список этих проблем и действия по их устранению. Эти проблемы и устранения рисков применяются для обеих виртуальных машин и экземпляров масштабируемых наборов виртуальных машин.

Проблема                             |   Устранение
:---------------------------------|:--------------------------------------------|
Нажатие клавиши **ВВОД** после заголовка соединения не вызывает появления запроса на вход в систему. | Дополнительные сведения см. в статье [Нажатие клавиши ВВОД не приводит ни к каким результатам](https://github.com/Microsoft/azserialconsole/blob/master/Known_Issues/Hitting_enter_does_nothing.md). Такая ошибка происходит, если вы используете пользовательскую виртуальную машину, защищенное устройство или конфигурацию загрузки, параметры которых не позволяют Windows нормально подключиться к последовательному порту. Такая же ошибка возникает, если вы используете клиентскую виртуальную машину под управлением Windows 10, так как EMS настроена только для виртуальных машин под управлением Windows Server.
Не удается выполнить ввод в командной строке SAC, если включена отладка ядра. | Подключитесь к виртуальной машине по протоколу RDP и выполните `bcdedit /debug {current} off` из командной строки с повышенными привилегиями. Если вы не можете использовать RDP, вместо этого подключите диск ОС к другой виртуальной машине Azure и при подключении сделайте его диском данных, выполнив `bcdedit /store <drive letter of data disk>:\boot\bcd /debug <identifier> off`, а затем переключите диск обратно.
Вставка в PowerShell в SAC приводит к возникновению третьего знака, если исходное содержимое имело повторяющийся знак | В качестве обходного решения вы можете выполнить `Remove-Module PSReadLine`, чтобы выгрузить модуль PSReadLine из текущего сеанса. Но это действие не удаляет модуль.
Некоторые данные при вводе с клавиатуры создают странные выходные данные SAC (например, **[A**, **[3~** ). | Еscape-последовательность [VT100](https://aka.ms/vtsequences) не поддерживается в командной строке SAC.
Вставка длинных строк не работает. | Последовательная консоль ограничивает длину строк, которые можно вставить в окно терминала, до 2048 знаков, чтобы избежать перегрузки пропускной способности серийного порта.
Последовательная консоль не работает с брандмауэром учетной записи хранения. | Последовательная консоль не может работать с учетными записями хранения с включенным брандмауэром и диагностикой загрузки.
Последовательная консоль не работает с учетной записью хранения, с помощью Gen2 хранилища Озера данных Azure с помощью иерархических пространств имен. | Это известная проблема с иерархических пространств имен. Чтобы устранить проблему, убедитесь, что учетная запись хранения диагностики загрузки виртуальной Машины не создается при помощи Gen2 хранилища Озера данных Azure. Этот параметр может устанавливаться только после создания учетной записи хранения. Может потребоваться создать учетную запись хранения диагностики отдельного загрузочного без Azure Data Lake хранилища 2-го поколения включена, чтобы устранить эту проблему.


## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

**В. Как отправить отзыв?**

О. Оставьте отзыв, разместив запись на GitHub по адресу https://aka.ms/serialconsolefeedback. Вы также можете (менее предпочтительно) отправить отзыв по адресу azserialhelp@microsoft.com или в категории виртуальной машины на сайте https://feedback.azure.com.

**В. Поддерживает ли последовательная консоль копирование и вставку?**

О. Да. Чтобы копировать и вставить текст в окно терминала, используйте клавиши **CTRL**+**SHIFT**+**C** и **CTRL**+**SHIFT**+**V**.

**В. Кто может включить или отключить последовательную консоль в подписке?**

О. Чтобы включить или отключить последовательную консоль на уровне подписки, у вас должно быть разрешение на запись в этой подписке. Разрешение на запись есть у ролей администратора и владельца. У пользовательских ролей также может быть разрешение на запись.

**В. Кто может получать доступ к последовательной консоли виртуальной машины?**

О. Для доступа к последовательной консоли виртуальной машины необходимо иметь роль участника виртуальной машины или выше.

**В. На последовательной консоли ничего не отображается, что делать?**

О. Возможно, ваш образ неправильно настроен для доступа к последовательной консоли. Дополнительные сведения о настройке образа для включения последовательной консоли см. в разделе [Включение последовательной консоли в пользовательских или старых образах](#enable-the-serial-console-in-custom-or-older-images).

**В. Доступна ли последовательная консоль для масштабируемых наборов виртуальных машин?**

О. На этом этапе доступ к последовательной консоли для экземпляров масштабируемого набора виртуальных машин не поддерживается.

## <a name="next-steps"></a>Дальнейшие действия
* Подробное руководство по командам CMD и PowerShell, которые можно использовать в Windows SAC, см. в статье [Команды Windows — CMD и PowerShell](serial-console-cmd-ps-commands.md).
* Последовательная консоль также доступна для виртуальных машин [Linux](serial-console-linux.md).
* См. дополнительные сведения в статье [Устранение неполадок виртуальных машин Windows в Azure с использованием диагностики загрузки](boot-diagnostics.md).
