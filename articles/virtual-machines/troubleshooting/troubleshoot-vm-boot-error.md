---
title: Виртуальная машина Linux загружается в GRUB
description: Не удалось загрузить виртуальную машину, так как виртуальная машина перешла в консоль
services: virtual-machines-windows
documentationcenter: ''
author: v-miegge
manager: dcscontentpm
editor: ''
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: troubleshooting
ms.date: 08/28/2019
ms.author: tiag
ms.openlocfilehash: 5353bad3ff631fd7baa5d9892d38449ba622ea46
ms.sourcegitcommit: dccb85aed33d9251048024faf7ef23c94d695145
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2020
ms.locfileid: "87284682"
---
# <a name="linux-vm-boots-to-grub-rescue"></a>Виртуальная машина Linux загружается в GRUB

Мы обнаружили, что ваша виртуальная машина (VM) перешла в консоль "копия". Эта проблема возникает, когда на виртуальной машине Linux были применены изменения ядра, такие как обновление ядра, и он больше не запускается из-за ошибок ядра в процессе загрузки. Во время загрузки, когда загрузчик пытается выполнить обнаружение ядра Linux и передает ему контроль загрузки, виртуальная машина переходит в консоль, когда происходит сбой передачи.

Если вы обнаружите, что вы не можете подключиться к виртуальной машине в будущем, вы можете просмотреть снимок экрана виртуальной машины, используя колонку Диагностика загрузки в портал Azure. Это может помочь диагностировать проблему и определить, является ли ее причиной такая же ошибка загрузки.

## <a name="recommended-steps"></a>Рекомендуемые действия

Выполните следующие действия по устранению рисков в зависимости от полученной ошибки:

### <a name="error---unknown-filesystem"></a>Ошибка-неизвестная файловая система

* Если вы получаете ошибку **неизвестная**файловая система, эта ошибка может возникать из-за повреждения файловой системы в загрузочном разделе или неверной конфигурации ядра.

   * При возникновении проблем с файловой системой выполните действия, описанные в статье [Восстановление Linux: не удается выполнить подключение SSH к виртуальной машине Linux из-за ошибок файловой системы (fsck, индексных дескрипторов)](/archive/blogs/linuxonazure/linux-recovery-cannot-ssh-to-linux-vm-due-to-file-system-errors-fsck-inodes).
   * В случае проблем с ядром выполните действия, описанные в статье [Восстановление Linux: ручное устранение проблем, связанных со сбоями в работе ядра](http://linuxonazure.azurewebsites.net/linux-recovery-fixing-non-boot-issues-related-to-kernel-problems-using-chroot/), или [Восстановление Linux. Устранение проблем, связанных с проблемами ядра, с помощью чрут](http://linuxonazure.azurewebsites.net/linux-recovery-fixing-non-boot-issues-related-to-kernel-problems-using-chroot/).
   
### <a name="error---file-not-found"></a>Ошибка-файл не найден

* Если вы получаете сообщение об ошибке **15: файл не найден или начальный электронный диск** или **файл Initrd/initramfs не найден**, выполните следующие действия.

    * Для отсутствующего файла `/boot/grub2/grub.cfg` или `initrd/initramfs` перейдите к следующему процессу:

    1. Убедитесь `/etc/default/grub` , что существуют и имеют правильные или нужные параметры. Если вы не знакомы с параметрами по умолчанию, можно проверить рабочую виртуальную машину.

    2. Затем выполните следующую команду, чтобы повторно создать конфигурацию:`grub2-mkconfig -o /boot/grub2/grub.cfg`

   * Если отсутствующий файл имеет значение `/boot/grub/menu.lst` , эта ошибка относится к более старым версиям ОС (**RHEL 6. x**, **CentOS 6. x** и **Ubuntu 14,04**), поэтому команды могут отличаться. Необходимо будет запустить старый сервер и выполнить тестирование, чтобы убедиться, что указаны правильные команды.

### <a name="error---no-such-partition"></a>Ошибка-отсутствует такой раздел

* Если вы получаете ошибку **без такого раздела**, обратитесь к [сценарию case: "нет такой секции" при попытке запустить виртуальную машину после попытки расширения диска операционной системы](/archive/blogs/shwetanayak/case-scenario-no-such-partition-error-while-trying-to-start-the-vm-after-attempting-to-extend-the-os-drive).

### <a name="error---grubcfg-file-not-found"></a>Ошибка-файл GRUB. cfg не найден

* Если вы получаете сообщение об ошибке " **файл/Boot/grub2/GRUB.cfg не найден**", выполните следующие действия.

    * Для отсутствующего файла `/boot/grub2/grub.cfg` или `initrd/initramfs` перейдите к следующему процессу:

    1. Убедитесь `/etc/default/grub` , что существуют и имеют правильные или нужные параметры. Если вы не знакомы с параметрами по умолчанию, можно проверить рабочую виртуальную машину.

    2. Затем выполните следующую команду, чтобы повторно создать конфигурацию: `grub2-mkconfig -o /boot/grub2/grub.cfg` .

   * Если отсутствующий файл имеет значение `/boot/grub/menu.lst` , эта ошибка относится к более старым версиям ОС (**RHEL 6. x**, **CentOS 6. x** и **Ubuntu 14,04**), поэтому команды могут быть отложены. Запустите старый сервер и проверьте его, чтобы убедиться, что указаны правильные команды.

## <a name="next-steps"></a>Дальнейшие действия

* [Обзор агента виртуальной машины Azure](../extensions/agent-windows.md)
* [Обзор расширений и компонентов виртуальной машины под управлением Windows](../extensions/features-windows.md)
