---
title: Устранение неполадок с общими образами в Azure
description: Подробные сведения об устранении неполадок c коллекциями общих образов.
author: olayemio
ms.service: virtual-machines
ms.subservice: imaging
ms.topic: troubleshooting
ms.workload: infrastructure
ms.date: 10/27/2020
ms.author: olayemio
ms.reviewer: cynthn
ms.openlocfilehash: 18b980a868173b1fa721f9fc0986d7e1efb203af
ms.sourcegitcommit: 99955130348f9d2db7d4fb5032fad89dad3185e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2020
ms.locfileid: "93348922"
---
# <a name="troubleshooting-shared-image-galleries-in-azure"></a>Устранение неполадок с общими галереями изображений в Azure

Если возникнут проблемы при выполнении операций с коллекциями общих образов, определениями и версиями образов, выполните команду, которая дала сбой, в режиме отладки. Режим отладки активируется путем передачи `--debug` коммутатора с помощью интерфейса командной строки и `-Debug` коммутатора с помощью PowerShell. Обнаружив ошибку, следуйте инструкциям в этом документе для ее устранения.


## <a name="issues-with-creating-or-modifying-a-gallery"></a>Проблемы при создании или изменении коллекции ##

*Недопустимое имя галереи. Допустимыми символами являются английские алфавитно-цифровые символы с символами подчеркивания и допустимыми точками в среднем, до 80 символов. Все прочие специальные символы, включая тире, запрещены.*  
**Причина** : заданное имя коллекции не соответствует требованиям к именованию.  
**Обходное решение**. Выберите имя, которое соответствует следующим условиям: 1) 80 — ограничение числа символов, 2) содержит только английские буквы, цифры, символы подчеркивания и точки, 3) начинается и заканчивается буквами английского алфавита или цифрами.

*Имя сущности "Галлеринаме" недопустимо в соответствии с правилом проверки: ^ [^ \_ \w] [\В-. \_ ] {0,79} (? <! [-.]) $.*  
**Причина** : имя коллекции не соответствует требованиям к именованию.  
**Обходное решение**. Выберите имя коллекции, которое соответствует следующим условиям: 1) 80 — ограничение числа символов, 2) содержит только английские буквы, цифры, символы подчеркивания и точки, 3) начинается и заканчивается буквами английского алфавита или цифрами.

*Указанное имя ресурса <Галлеринаме \> содержит следующие недопустимые конечные символы: <символ \> . Имя не может заканчиваться символами: <символ\>*  
**Причина** : имя коллекции заканчивается точкой или символом подчеркивания.  
**Обходное решение**. Выберите имя коллекции, которое соответствует следующим условиям: 1) 80 — ограничение числа символов, 2) содержит только английские буквы, цифры, символы подчеркивания и точки, 3) начинается и заканчивается буквами английского алфавита или цифрами.

*Указанное расположение <региона \> недоступно для типа ресурсов "Microsoft. COMPUTE/галереи". Список доступных регионов для типа ресурса:...*  
**Причина** : регион, указанный для коллекции, неверен или требует запроса на доступ.  
**Обходное решение**. Проверьте правильность написания имени региона. Эту команду можно использовать для просмотра регионов, к которым у вас есть доступ. Если регион не указан в списке, отправьте [запрос на доступ](/troubleshoot/azure/general/region-access-request-process).

*Невозможно удалить ресурс перед удалением вложенных ресурсов.*  
**Причина** : предпринята попытка удалить коллекцию, содержащую по крайней мере одно существующее определение образа. Коллекция должна быть пустой, прежде чем ее можно будет удалить.  
**Обходное решение**. Удалите все определения образов в коллекции, а затем продолжайте удалять коллекцию. Если определение образа содержит версии изображений, перед удалением определений образов необходимо удалить версии образа.

*Ресурс <Галлеринаме \> уже существует в расположении <региона \_ 1 \> в группе ресурсов <resourceGroup \> . Ресурс с таким же именем не может быть создан в расположении <региона \_ 2 \> . Выберите новое имя ресурса.*  
**Причина**. у вас уже есть коллекция в группе ресурсов с тем же именем и вы попытались создать другую коллекцию с тем же именем, но в другом регионе.  
**Обходной путь**. Используйте другую галерею или другую группу ресурсов.

## <a name="issues-with-creating-or-modifying-image-definitions"></a>Проблемы при создании или изменении определений изображений ##

*Изменение свойства "Галлеримаже. Properties. <\> " запрещено.*  
**Причина** : вы попытались изменить тип ОС, состояние ОС, создание Hyper V, предложение, издатель, SKU. Изменение любого из этих свойств не разрешено.  
**Обходное решение**. вместо этого создайте новое определение образа.

*Ресурс <Галлеринаме/Имажедефинитионнаме \> уже существует в расположении <региона \_ 1 \> в группе ресурсов <resourceGroup \> . Ресурс с таким же именем не может быть создан в расположении <региона \_ 2 \> . Выберите новое имя ресурса.*  
**Причина**. у вас уже есть определение образа в коллекции и группе ресурсов с тем же именем и вы попытались создать другое определение образа с тем же именем и в той же коллекции, но в другом регионе.  
**Обходное решение**. Используйте другое имя для определения образа или вставьте определение изображения в другую коллекцию или группу ресурсов.

*Указанное имя ресурса <Галлеринаме \> /<имажедефинитионнаме \> содержит следующие недопустимые конечные символы: <символ \> . Имя не может заканчиваться символами: <символ\>*  
**Причина** : заданная <имажедефинитионнаме \> заканчивается точкой или символом подчеркивания.  
**Обходное решение**. Выберите имя для определения образа, которое соответствует следующим условиям: 1) 80 — ограничение числа символов, 2) содержит только английские буквы, цифры, дефисы, символы подчеркивания и точки, 3) начинается и заканчивается буквами английского алфавита или цифрами.

*Имя сущности <Имажедефинитионнаме \> является недопустимым согласно правилу проверки: ^ [^ \_ \\ W] [ \\ W-. \_ ] {0,79} (? <! [-.]) $"*  
**Причина** : заданная <имажедефинитионнаме \> заканчивается точкой или символом подчеркивания.  
**Обходное решение**. Выберите имя для определения образа, которое соответствует следующим условиям: 1) 80 — ограничение числа символов, 2) содержит только английские буквы, цифры, дефисы, символы подчеркивания и точки, 3) начинается и заканчивается буквами английского алфавита или цифрами.

*Недопустимое свойство имени ресурса Галлеримаже. Properties. identifier. <\> . Оно не может быть пустым. Допустимые символы: прописные или строчные буквы, цифры, дефис (-), точка (.), символ подчеркивания ( \_ ). Имена не могут заканчиваться точкой (.). Длина имени не может превышать <\> символов числа.*  
**Причина**. указанные значения издателя, предложения или номера SKU не соответствуют требованиям к именованию.  
**Обходное решение**. Выберите значение, которое соответствует следующим условиям: 1) 128 — ограничение числа символов для издателя или 64 символов для предложения и номера SKU, 2) содержит только английские буквы, цифры, дефисы, символы подчеркивания и точки и 3) не заканчивается точкой.

*Не удается выполнить запрошенную операцию с вложенным ресурсом. Родительский ресурс <Галлеринаме \> не найден.*  
**Причина** : отсутствует коллекция с именем <галлеринаме \> в текущей подписке и группе ресурсов.  
**Решение**. Проверьте правильность имени коллекции, подписки и группы ресурсов. В противном случае создайте новую галерею с именем <Галлеринаме \> .

*Указанное расположение <региона \> недоступно для типа ресурсов "Microsoft. COMPUTE/галереи". Список доступных регионов для типа ресурса:...*  
**Причина** : \> Недопустимый регион <или требуется запрос на доступ  
**Обходное решение**. Проверьте правильность написания имени региона. Эту команду можно использовать для просмотра регионов, к которым у вас есть доступ. Если регион не указан в списке, отправьте [запрос на доступ](/troubleshoot/azure/general/region-access-request-process).

*Не удалось сериализовать значение: <значение \> типа: "ISO-8601"., ISO8601Error: iso 8601, обозначение времени "t" отсутствует. Не удалось проанализировать строку DateTime <значение\>*  
**Причина** : значение, предоставленное свойству, неправильно отформатировано как дата.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

*Не удалось преобразовать строку в значение типа DateTimeOffset: <\> . Путь "Свойства. <свойство \> "*  
**Причина** : значение, предоставленное свойству, неправильно отформатировано как дата.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

*Ендофлифедате должен быть установлен на будущую дату.*  
**Причина** : свойство даты окончания срока действия неправильно форматируется как дата после сегодняшней даты.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

*аргумент--<свойство \> : недопустимое значение int: <значение\>*  
**Причина** : <свойство \> принимает только целочисленные значения, а <значение \> не является целым числом.  
**Обходное решение**. Выберите целочисленное значение.

*Минимальное значение свойства <\> не должно превышать максимальное значение свойства <\> .*  
**Причина** : минимальное значение, указанное для свойства <\> , выше максимального значения, указанного для свойства <\> .  
**Обходное решение**. Измените значения так, чтобы минимальное значение не превышало максимальное значение.

*Образ коллекции: <Имажедефинитионнаме, \> идентифицируемый (издатель: издатель <\> , предложение: <предложение \> , SKU: <SKU \> ) уже существует. Выберите другую комбинацию издателя, предложения, номера SKU.*  
**Причина**. предпринята попытка создать новое определение образа с тем же издателем, предложение, SKU Triplet в качестве существующего определения образа в той же коллекции.  
**Решение**. в определенной коллекции все определения образов должны иметь уникальные сочетания издателя, предложения, номера SKU. Выберите уникальное сочетание или выберите новую коллекцию и создайте определение образа еще раз.

*Невозможно удалить ресурс перед удалением вложенных ресурсов.*  
**Причина** : предпринята попытка удаления определения образа, содержащего версии изображений. Прежде чем можно будет удалить определение образа, оно должно быть пустым.  
**Обходное решение**. Удалите все версии образа в определении образа, а затем продолжайте удаление определения образа.

*Не удается привязать свойство <параметра \> . Не удается преобразовать значение <\> в тип <propertyType \> . Не удалось сопоставить имя идентификатора, <значение, \> с допустимым именем перечислителя. Укажите одно из следующих имен перечислителя и повторите попытку: <choice1 \> , <choice2 \> ,...*  
**Причина** : у свойства есть ограниченный список возможных значений, а <значение \> не является одним из них.  
**Обходное решение**. Выберите одно из возможных значений <выбора \> .

*Не удается привязать свойство <параметра \> . Не удается преобразовать значение <значение \> в тип &quot; System. DateTime&quot;*  
**Причина** : значение, предоставленное свойству, неправильно отформатировано как дата.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

*Не удается привязать свойство <параметра \> . Не удается преобразовать значение <значение \> в тип &quot; System. Int32&quot;*  
**Причина** : <свойство \> принимает только целочисленные значения, а <значение \> не является целым числом.  
**Обходное решение**. Выберите целочисленное значение.

*Тип учетной записи хранения ZRS не поддерживается в этом регионе.*  
**Причина**. Вы выбрали Стандартный ZRS в регионе, который еще не поддерживает его.  
**Решение**. Измените тип учетной записи хранения на "Premium \_ LRS" или "Standard \_ LRS". Ознакомьтесь с документацией по последнему [списку регионов](/azure/storage/common/storage-redundancy#zone-redundant-storage) с включенной предварительной версией ZRS.

## <a name="issues-with-creating-or-updating-image-versions"></a>Проблемы при создании или обновлении версий изображений ##

*Указанное расположение <региона \> недоступно для типа ресурсов "Microsoft. COMPUTE/галереи". Список доступных регионов для типа ресурса:...*  
**Причина** : \> Недопустимый регион <или требуется запрос на доступ  
**Обходное решение**. Проверьте правильность написания имени региона. Эту команду можно использовать для просмотра регионов, к которым у вас есть доступ. Если регион не указан в списке, отправьте [запрос на доступ](/troubleshoot/azure/general/region-access-request-process).

*Не удается выполнить запрошенную операцию с вложенным ресурсом. Родительский ресурс <Галлеринаме/Имажедефинитионнаме \> не найден.*  
**Причина** : отсутствует коллекция с именем <Галлеринаме/имажедефинитионнаме \> в текущей подписке и группе ресурсов.  
**Решение**. Проверьте правильность имени коллекции, подписки и группы ресурсов. В противном случае создайте новую галерею с именем <Галлеринаме \> и (или) определением изображения с именем <имажедефинитионнаме \> в указанной группе ресурсов.

*Не удается привязать свойство <параметра \> . Не удается преобразовать значение <значение \> в тип &quot; System. DateTime&quot;*  
**Причина** : значение, предоставленное свойству, неправильно отформатировано как дата.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

*Не удается привязать свойство <параметра \> . Не удается преобразовать значение <значение \> в тип &quot; System. Int32&quot;*  
**Причина** : <свойство \> принимает только целочисленные значения, а <значение \> не является целым числом.  
**Обходное решение**. Выберите целочисленное значение.

*Версия образа коллекции регионы профилей публикации <Публишингрегионс \> должен содержать расположение версии образа <саурцерегион\>*  
**Причина** : расположение исходного образа (<саурцерегион \> ) необходимо добавить в список <публишингрегионс \>  
**Обходное решение**. Включите < саурцерегион \> в список <публишингрегионс \> .

*Значение <значение \> параметра <свойства \> выходит за пределы допустимого диапазона. Значение должно находиться в диапазоне от <minValue \> до <MaxValue \> включительно.*  
**Причина** : <значение выходит \> за пределы диапазона возможных значений для свойства <\> .  
**Обходное решение**. Выберите значение в диапазоне от <minValue \> до <MaxValue \> включительно.

*Источник resourceID <\> не найден. Убедитесь, что источник существует и находится в том же регионе, что и создаваемая версия образа коллекции.*  
**Причина** : отсутствует источник, расположенный в <ResourceId, \> либо источник в <ResourceId \> находится не в том же регионе, что и создаваемый образ коллекции.  
**Обходное решение**. проверьте правильность <ResourceId \> и убедитесь, что исходный регион версии образа коллекции совпадает с регионом ResourceId <\>

*Изменение свойства "Галлеримажеверсион. Properties. storageProfile. <Дискимаже \> . Source.ID" не разрешено.*  
**Причина** : идентификатор источника версии образа коллекции нельзя изменить после создания.  
**Обходное решение**. Убедитесь, что исходный идентификатор совпадает с уже существующим идентификатором источника, или измените номер версии образа.

*На дисках входных данных обнаружены дублирующиеся номера LUN. Номер LUN должен быть уникальным для каждого диска данных.*  
**Причина**. при создании версии образа с помощью списка дисков и (или) моментальных снимков диска несколько дисков или моментальных снимков дисков имеют одинаковые номера LUN.  
**Обходной путь**. Удалите или измените любые дублирующиеся номера LUN.

*Дублирующиеся идентификаторы источников находятся во входных дисках. Идентификатор источника должен быть уникальным для каждого диска.*  
**Причина**. при создании версии образа с помощью списка дисков и (или) моментальных снимков диска у двух или более дисков или моментальных снимков дисков один и тот же идентификатор ресурса.  
**Обходной путь**. Удалите или измените все дубликаты исходных идентификаторов дисков.

*Идентификатор свойства <resourceID \> в пути "Properties. storageProfile. <дискимажес \> . Source.ID" недопустим. Предполагался полный идентификатор ресурса, начинающийся с "/Субскриптионс/{субскриптионид}" или "/Провидерс/{ресаурцепровидернамеспаце}/".*  
**Причина** : <ResourceId \> имеет неправильный формат.  
**Обходное решение**. Проверьте правильность ResourceId.

*Идентификатор источника: <resourceID \> должен быть управляемым образом, виртуальной машиной или другой версией образа коллекции.*  
**Причина** : <ResourceId \> имеет неправильный формат.  
**Решение**. при использовании виртуальной машины, управляемого образа или версии образа коллекции в качестве исходного образа Проверьте правильность идентификатора ресурса виртуальной машины, управляемого образа или версии образа коллекции.

*Идентификатор источника: <resourceID \> должен быть управляемым диском или моментальным снимком.*  
**Причина** : <ResourceId \> имеет неправильный формат.  
**Решение**. при использовании дисков и (или) моментальных снимков дисков в качестве источников для версии образа Проверьте правильность идентификаторов ресурсов дисков и (или) моментальных снимков дисков.

*Не удается создать версию образа из коллекции из: <resourceID, \> так как состояние ОС в родительском образе коллекции (<OsState \_ 1 \> ) не <OsState \_ 2 \> .*  
**Причина** : состояние операционной системы (обобщенное или специализированное) не соответствует состоянию операционной системы, указанному в определении образа.  
**Решение**. Выберите источник на основе виртуальной машины с состоянием операционной системы <OsState \_ 1 \> или создайте новое определение образа для виртуальных машин на основе <OsState \_ 2 \> .

*Ресурс с идентификатором "<resourceID \> " имеет другое поколение гипервизоров ["<V # \_ 1 \> "], чем создание гипервизора образа родительской коллекции ["<V # \_ 2 \> "]*  
**Причина** : создание низкоуровневой оболочки версии образа не соответствует формированию гипервизора, указанному в определении образа. Операционная система определения образа имеет <V # \_ 1 \> , а версия образа операционной системы — <V \_ 2 \> .  
**Обходное решение**. Выберите источник с тем же поколением гипервизора, что и определение образа, или создайте или выберите новое определение образа с тем же поколением гипервизора, что и версия образа.

*Ресурс с идентификатором "<resourceID \> " имеет другой тип ОС ["<OsType \_ 1 \> "], чем создание типа ОС образа родительской коллекции ["<OsType \_ 2 \> "]*  
**Причина** : создание низкоуровневой оболочки версии образа не соответствует формированию гипервизора, указанному в определении образа. Операционная система определения образа — <OsType \_ 1 \> , а версия образа — <OsType \_ 2 \> .  
**Обходное решение**. Выберите источник с той же операционной системой (Linux или Windows), что и определение образа, или создайте или выберите определение нового образа с тем же поколением операционной системы, что и версия образа.

*Исходная виртуальная машина <resourceID \> не может содержать временный диск ОС.*  
**Причина** : источник в "<ResourceId \> " содержит временный диск ОС. Общая Коллекция образов сейчас не поддерживает временные диски ОС.  
**Решение**. Выберите другой источник на основе виртуальной машины, которая не использует временный диск ОС.

*Исходная виртуальная машина <resourceID \> не может содержать диск ["<diskID \> "], хранящийся в типе учетной записи ултрассд.*  
**Причина** : диск "<diskID \> является диском ултрассд. Общая Коллекция образов в настоящее время не поддерживает SSD (цен. категория "Ультра") дисков.  
**Обходное решение**. Используйте источник, содержащий только SSD (цен. категория "Премиум"), SSD (цен. Категория "Стандартный") и (или) HDD (цен. Категория "Стандартный") диски.

*Исходная виртуальная машина <resourceID \> должна быть создана на основе управляемых дисков.*  
**Причина** : виртуальная машина в <ResourceId \> использует неуправляемые диски.  
**Обходное решение**. Используйте источник, основанный на виртуальной машине, которая содержит только SSD (цен. категория "Премиум"), SSD (цен. Категория "Стандартный") и (или) HDD (цен. Категория "Стандартный") управляемых дисков.

*Слишком много запросов к источнику "<resourceID \> ". Сократите количество запросов в источнике или подождите некоторое время, прежде чем повторять попытку.*  
**Причина**. в настоящее время источник для этой версии изображения регулируется из-за слишком большого количества запросов.  
**Обходное решение**. Попробуйте создать версию образа позже.

*Набор шифрования диска "<Дискенкриптионсетид \> " должен находиться в той же подписке "<subscriptionID \> ", что и ресурс коллекции.*  
**Причина** : наборы шифрования дисков можно использовать только в той же подписке и регионе, в котором они были созданы.  
**Обходное решение**. Создайте или используйте набор шифрования в той же подписке и регионе, что и версия образа.

*Зашифрованный источник: "<resourceID \> " находится в другом идентификаторе подписки, отличном от идентификатора текущей подписки на версию образа коллекции "<subscriptionID \_ 1 \> ". Повторите попытку с незашифрованными источниками или используйте подписку источника "<Субкриптионид \_ 2 \> " для создания версии образа коллекции.*  
**Причина** : коллекция общих образов сейчас не поддерживает создание версий изображений в другой подписке из другого исходного образа, если исходный образ зашифрован.  
**Обходное решение**. Используйте незашифрованный источник или создайте версию образа в той же подписке, в которой находится источник.

*Набор шифрования диска <Дискенкриптионсетид \> не найден.*  
**Причина** : Шифрование диска может быть неправильным.  
**Обходное решение**. Проверьте правильность идентификатора ресурса для набора шифрования диска.

*Недопустимое имя версии образа. Имя версии образа должно соответствовать основной (int). Дополнительный (int). Формат исправления (int), например 1.0.0, 2018.12.1 и т. д.*  
**Причина** : допустимый формат версии изображения — 3 целых числа, разделенные точкой. Имя версии образа не соответствует допустимому формату.  
**Обходное решение**. Используйте имя версии образа, которое следует за форматом Major (int). Дополнительный (int). Patch (int), например 1.0.0. или 2018.12.1.

*Недопустимое значение параметра Галлеряртифактверсион. Properties. Публишингпрофиле. Таржетрегионс. encryption. Датадискимажес. Дискенкриптионсетид*  
**Причина** : идентификатор ресурса набора шифрования диска, используемого в образе диска данных, использует недопустимый формат.  
**Обходное решение**. Убедитесь, что идентификатор ресурса для набора шифрования диска соответствует формату/Subscriptions/<subscriptionID \> /ResourceGroups/<ResourceGroupName \> /провидерс/Микрософт.компуте/<дискенкриптионсетнаме \> .

*Значение параметра Галлеряртифактверсион. Properties. Публишингпрофиле. Таржетрегионс. encryption. Осдискимаже. Дискенкриптионсетид недопустимо.*  
**Причина** : идентификатор ресурса набора шифрования диска, используемого в образе диска ОС, использует недопустимый формат  
**Обходное решение**. Убедитесь, что идентификатор ресурса для набора шифрования диска соответствует формату/Subscriptions/<subscriptionID \> /ResourceGroups/<ResourceGroupName \> /провидерс/Микрософт.компуте/<дискенкриптионсетнаме \> .

*Невозможно указать новый LUN для шифрования диска данных [номер <\> ] с набором шифрования дисков в регионе [<Region \> ] для запроса версии образа коллекции обновлений. Чтобы обновить эту версию, удалите новый LUN. Если необходимо изменить параметры шифрования образа диска данных, необходимо создать новую версию образа коллекции с правильными параметрами.*  
**Причина** : Добавлено шифрование на диск данных существующей версии образа. Невозможно добавить шифрование к существующей версии образа.  
**Решение**. Создайте новую версию образа коллекции или удалите добавленные параметры шифрования.

*Источник версии артефакта коллекции может указываться либо непосредственно в storageProfile, либо в отдельных дисках ОС или данных. Можно указать только один тип источника (пользовательский образ, моментальный снимок, диск, виртуальная машина).*  
**Причина** : отсутствует идентификатор источника.  
**Обходное решение**. Убедитесь в наличии исходного идентификатора источника.

*Источник не найден: <resourceID \> . Убедитесь, что источник существует.*  
**Причина** : идентификатор ResourceId источника может быть неверным.  
**Обходное решение**. Убедитесь, что идентификатор ResourceId источника правильный.

*Для диска "Галлеряртифактверсион. Properties. Публишингпрофиле. Таржетрегионс. encryption. Осдискимаже. Дискенкриптионсетид" в целевом регионе "<регион 1" требуется набор шифрования дисков, \_ \> так как \> для соответствующего диска в регионе "<регион \_ 2 \> " используется набор шифрования диска "<diskEncryptionSetId"*  
**Причина** : шифрование было использовано на диске ос в <регионе \_ 2 \> , но не в <регионе \_ 1 \> .  
Инструкции по **решению** : при использовании шифрования на диске ОС используйте шифрование во всех регионах.

*Для диска "LUN <номер \> " в целевом регионе "<региона 1" требуется набор шифрования диска, \_ \> так как \> для соответствующего диска в регионе "<регион \_ 2 \> " используется шифрование диска "<дискенкриптионсетид"*  
**Причина** : шифрование было использовано на диске данных с номером LUN <номер \> в <регионе \_ 2 \> , но не в <регионе \_ 1 \> .  
Инструкции по **решению** : при использовании шифрования на диске данных используйте шифрование во всех регионах.

*Недопустимый LUN [<номер \> ] был указан в encryption. датадискимажес. LUN должен иметь одно из следующих значений [' 0, 9 '].*  
**Причина** : номер LUN, указанный для шифрования, не соответствует ни одному из номеров LUN для дисков, подключенных к виртуальной машине.  
**Решение**. Измените номер LUN в шифровании на номер LUN диска данных, присутствующего на виртуальной машине.

*\>В целевом регионе "<" в регионе "Encryption. датадискимажес" указаны дублирующиеся номера LUN "<" \> .*  
**Причина** : параметры шифрования, используемые в <регионе, \> задают номер LUN по крайней мере дважды.  
**Решение**. Измените номер lun в <ном регионе \> , чтобы убедиться, что все номера LUN уникальны в <ном регионе \> .

*Осдискимаже и Датадискимаже не могут указывать на тот же большой двоичный объект <sourceID.\>*  
**Причина** : источник для диска ОС и по крайней мере один диск данных не являются уникальными.  
**Решение**. измените источник диска операционной системы и (или) диски данных, чтобы убедиться, что диск операционной системы и диск данных уникальны.

*В целевых регионах публикации не допускаются дублирующие регионы.*  
**Причина** : регион присутствует в нескольких регионах публикации несколько раз.  
**Обходной путь**. Удалите дублирующийся регион.

*Добавление новых дисков данных или изменение LUN диска данных в существующем образе запрещено.*  
**Причина** : вызов обновления к версии образа либо содержит новый диск данных, либо имеет новый номер LUN для диска.  
**Обходное решение**. Используйте номера LUN и диски данных существующей версии образа.

*Набор шифрования диска <Дискенкриптионсетид \> должен находиться в той же подписке <subscriptionID, \> что и ресурс коллекции.*  
**Причина** : коллекция общих образов в настоящее время не поддерживает использование шифрования дисков, заданное в другой подписке.  
**Решение**. Создайте версию образа и набор шифрования дисков в одной подписке.

## <a name="issues-creating-or-updating-a-vm-or-scale-sets-from-image-version"></a>Проблемы при создании или обновлении виртуальных машин или масштабируемых наборов из версии образа ##

*Клиент имеет разрешение на выполнение действия "Microsoft. COMPUTE/галереи/Images/Versions/Read" в области <resourceID \> , однако текущий клиент <tenantId1 \> не имеет прав доступа к связанной подписке <subscriptionId2 \> .*  
**Причина** : виртуальная машина или масштабируемый набор был создан с помощью образа SIG в другом клиенте. Предпринята попытка внести изменения в виртуальную машину или масштабируемый набор, но у вас нет доступа к подписке, владеющей этим образом.  
**Обходное решение**. обратитесь к владельцу подписки на версию образа, чтобы предоставить доступ на чтение к версии образа.

*Образ коллекции <resourceID \> недоступен в регионе <региона \> . Обратитесь к владельцу образа для репликации в этот регион или измените запрошенный регион.*  
**Причина**. Виртуальная машина создается в регионе, который не входит в список опубликованных регионов для образа коллекции.  
**Решение**. либо выполните репликацию образа в регион, либо создайте виртуальную машину в одном из регионов в регионах публикации образа коллекции.

*Параметр "osProfile" не разрешен.*  
**Причина** : для виртуальной машины, созданной из специализированной версии образа, предоставлены имя пользователя администратора, пароль или ключи SSH.  
Инструкции по **решению** : не включайте имя администратора, пароль или ключи SSH, если планируется создать виртуальную машину из этого образа. В противном случае используйте обобщенную версию образа и укажите имя администратора, пароль или ключи SSH.

*Отсутствует обязательный параметр "osProfile" (null).*  
**Причина**. Виртуальная машина создается из обобщенного образа и не содержит имени администратора, пароля или ключей SSH. Так как обобщенные образы не сохранили имя администратора, пароль или ключи SSH, эти поля должны быть указаны во время создания виртуальной машины или масштабируемого набора.  
**Обходное решение**. Укажите имя пользователя администратора, пароль или ключи SSH или используйте специальную версию образа.

*Не удается создать версию образа коллекции из: <resourceID, \> так как состояние ОС в родительском образе коллекции ("специализированное") не является "обобщенным".*  
**Причина** : версия образа создается из обобщенного источника, но его родительское определение является специализированным.  
Инструкции по **решению** : Создайте версию образа с помощью специализированного источника или используйте обобщенное универсальное определение.

*Не удается обновить масштабируемый набор виртуальных машин <vmssName \> , так как текущее состояние ОС масштабируемого набора виртуальных машин является обобщенным, что отличается от обновленного состояния ОС образа коллекции, которое является специализированным.*  
**Причина** : текущий исходный образ для масштабируемого набора является обобщенным исходным изображением, но он обновляется с помощью специализированного исходного образа. Текущее исходное изображение и новый исходный образ для масштабируемого набора должны быть одного состояния.  
**Обходное решение**. чтобы обновить масштабируемый набор, используйте обобщенную версию образа.

*Шифрование дисков установлено <Дискенкриптионсетид \> в общей коллекции образов <versionId \> принадлежит к подписке <subscriptionId1 \> и не может использоваться с ресурсом "" в подписке <subscriptionId2\>*  
**Причина** : набор шифрования диска, используемый для шифрования версии образа, находится в другой подписке, чем подписка для размещения версии образа.  
**Обходное решение**. Используйте ту же подписку для версии образа и набора шифрования диска.

*Создание виртуальной машины или масштабируемого набора виртуальных машин занимает много времени.*  
**Обходное решение**. Убедитесь, что **OSType** версии образа, с которой вы пытаетесь создать виртуальную машину или масштабируемый набор виртуальных машин, имеет тот же **OSType** источника, который использовался для создания версии образа. 

## <a name="issues-creating-a-disk-from-an-image-version"></a>Проблемы при создании диска из версии образа ##

*Недопустимое значение параметра imageReference.*  
**Причина** : предпринята попытка экспорта из версии образа SIG на диск, но использовалась не существующая в образе расположение LUN.    
**Обходное решение**. Проверьте версию образа, чтобы узнать, какие позиции LUN используются.

## <a name="unable-to-share-resources"></a>Не удается предоставить общий доступ к ресурсам

Совместное использование общей коллекции образов, определения образа и версий изображений в подписках включено с помощью [управления доступом на основе ролей Azure (Azure RBAC)](../role-based-access-control/rbac-and-directory-admin-roles.md). 

## <a name="replication-is-slow"></a>Медленная репликация

Используйте параметр **--expand ReplicationStatus** , чтобы проверить, завершена ли репликация во все указанные целевые регионы. Если это не так, дождитесь завершения задания. Это может занять до 6 часов. Если происходит сбой, активируйте команду еще раз, чтобы создать и реплицировать версию образа. Если существует много целевых регионов, в которые реплицируется версия образа, рекомендуется выполнить репликацию поэтапно.

## <a name="azure-limits-and-quotas"></a>Ограничения и квоты Azure 

[Ограничения и квоты Azure](../azure-resource-manager/management/azure-subscription-service-limits.md) применяются ко всем ресурсам коллекции общих образов, определения и версии образа. Убедитесь, что вы не превысили пределы для своей подписки. 


## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. в статье [Обзор коллекции общих образов](./linux/shared-image-galleries.md).