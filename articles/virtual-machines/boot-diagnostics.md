---
title: Диагностика загрузки Azure
description: Общие сведения о диагностике загрузки Azure и управляемой диагностике загрузки
services: virtual-machines
ms.service: virtual-machines
author: mimckitt
ms.author: mimckitt
ms.topic: conceptual
ms.date: 08/04/2020
ms.openlocfilehash: b51b44f3a3d0889836bb41e0bf2fa37234338cf4
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91287089"
---
# <a name="azure-boot-diagnostics"></a>Диагностика загрузки Azure

Диагностика загрузки — это функция отладки для виртуальных машин Azure, которая позволяет выполнять диагностику сбоев при загрузке ВИРТУАЛЬНЫХ машин. Диагностика загрузки позволяет пользователю наблюдать за состоянием виртуальной машины при загрузке, собирая данные последовательного журнала и снимки экрана.

## <a name="boot-diagnostics-storage-account"></a>Учетная запись хранения для диагностики загрузки
При создании виртуальной машины в портал Azure Диагностика загрузки включается по умолчанию. Рекомендуемая Диагностика загрузки заключается в использовании управляемой учетной записи хранения, так как она дает значительные улучшения производительности в течение времени для создания виртуальной машины Azure. Это связано с тем, что будет использоваться управляемая учетная запись хранения Azure, которая удаляет время, необходимое для создания новой учетной записи хранения пользователя для хранения данных диагностики загрузки.

Альтернативным средством диагностики загрузки является использование управляемой пользователем учетной записи хранения. Пользователь может либо создать новую учетную запись хранения, либо использовать существующую.

> [!IMPORTANT]
> Клиенты Azure не будут платить за затраты на хранение, связанные с диагностикой загрузки, с помощью управляемой учетной записи хранения с 2020 октября.

## <a name="boot-diagnostics-view"></a>Представление диагностики загрузки
В колонке виртуальной машины параметр Диагностика загрузки находится в разделе *Поддержка и устранение неполадок* в портал Azure. При выборе диагностики загрузки будут отображаться снимок экрана и сведения о последовательных журналах. Последовательный журнал содержит сообщения ядра, и снимок экрана является моментальным снимком текущего состояния виртуальных машин. В зависимости от того, что виртуальная машина работает под управлением Windows или Linux, определяет, как будет выглядеть ожидаемый снимок экрана. Для Windows пользователи увидят фон рабочего стола и Linux, пользователи увидят запрос на вход.

:::image type="content" source="./media/boot-diagnostics/boot-diagnostics-linux.png" alt-text="Снимок экрана диагностики загрузки Linux":::
:::image type="content" source="./media/boot-diagnostics/boot-diagnostics-windows.png" alt-text="Снимок экрана системы диагностики загрузки Windows":::


## <a name="limitations"></a>Ограничения
- Диагностика загрузки доступна только для Azure Resource Manager виртуальных машин. 
- Диагностика загрузки не поддерживает учетные записи хранения класса Premium. Если для диагностики загрузки используется учетная запись хранения класса Premium, `StorageAccountTypeNotSupported` при запуске виртуальной машины будут появляться сообщения об ошибке. 
- Управляемые учетные записи хранения поддерживаются в диспетчер ресурсов API версии "2020-06-01" и более поздних версий.
- Последовательная консоль Azure в настоящее время несовместима с управляемой учетной записью хранения для диагностики загрузки. Дополнительные сведения о [последовательной консоли Azure](https://docs.microsoft.com/azure/virtual-machines/troubleshooting/serial-console-overview).
- Диагностика загрузки с использованием учетной записи хранения можно применить только с помощью портал Azure. 

## <a name="next-steps"></a>Дальнейшие действия

Узнайте больше о [последовательной консоли Azure](https://docs.microsoft.com/azure/virtual-machines/troubleshooting/serial-console-overview) и об использовании диагностики загрузки для [устранения неполадок виртуальных машин в Azure](https://docs.microsoft.com/azure/virtual-machines/troubleshooting/boot-diagnostics).
