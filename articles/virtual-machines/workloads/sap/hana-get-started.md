---
title: Краткое руководство. Установка одного экземпляра SAP HANA вручную на виртуальных машинах Azure | Документация Майкрософт
description: Краткое руководство по установке одного экземпляра SAP HANA вручную на виртуальных машинах Azure
services: virtual-machines-linux
documentationcenter: ''
author: hermanndms
manager: jeconnoc
editor: ''
tags: azure-resource-manager
keywords: ''
ms.assetid: c51a2a06-6e97-429b-a346-b433a785c9f0
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 09/06/2018
ms.author: hermannd
ms.openlocfilehash: 5091932989849943f00cb71f72378dd17af23a4a
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60205053"
---
# <a name="quickstart-manual-installation-of-single-instance-sap-hana-on-azure-virtual-machines"></a>Краткое руководство. Установка вручную из одного экземпляра SAP HANA на виртуальных машинах Azure
## <a name="introduction"></a>Общие сведения
Это руководство поможет вам настроить одного экземпляра SAP HANA на виртуальных машинах Azure, при установке SAP NetWeaver 7.5 и SAP HANA 1.0 SP12 вручную. В этом руководстве нацелено на развертывание SAP HANA в Azure. Он не может заменить документацию SAP. 

> [!NOTE]
> Это руководство описывает развертывание SAP HANA на виртуальных машинах Azure. Сведения о том, как развернуть SAP HANA в крупных экземпляров HANA, см. в разделе [использование SAP на виртуальных машинах Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/get-started).
 
## <a name="prerequisites"></a>Технические условия
В этом руководстве предполагается, что вы знакомы с такой инфраструктуры как услуги (IaaS), т. е:
 * Как развернуть виртуальные машины (ВМ) или виртуальным сетям с помощью портала Azure или PowerShell.
 * Azure кросс платформенного интерфейса командной строки (CLI), который включает в себя возможность использовать шаблоны JavaScript Object Notation (JSON).

В этом руководстве также предполагается, что вы знакомы с:
* SAP HANA и SAP NetWeaver и их локальная установка.
* Как установить и эксплуатации SAP HANA и экземпляров приложения SAP в Azure.
* Основные понятия и процедуры.
   * Планирование развертывания SAP в Azure, которая включает в себя планирование виртуальной сети Azure и использование службы хранилища Azure. См. в разделе [SAP NetWeaver на виртуальных машинах в Azure — руководство по планированию и реализации](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/planning-guide).
   * Принципы и способы развертывания виртуальных машин в Azure. См. статью [Развертывание программного обеспечения SAP на виртуальных машинах Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/deployment-guide).
   * Высокий уровень доступности для SAP NetWeaver ABAP SAP Central Services (ASCS), SAP Central Services (SCS) и репликации сервера постановки в очередь (ERS) в Azure. См. статью [Высокий уровень доступности SAP NetWeaver на виртуальных машинах Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-guide).
   * Сведения о том, как повысить эффективность при установке с несколькими ИД безопасности ASCS/SCS в Azure. См. статью [Создание конфигурации с несколькими идентификаторами безопасности SAP NetWeaver](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/high-availability-multi-sid). 
   * Принципы работы SAP NetWeaver на виртуальных машинах Linux в Azure. См. в разделе [запуска SAP NetWeaver на виртуальных машинах SUSE Linux Microsoft Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/suse-quickstart). В этом руководстве описываются важные настройки Linux на виртуальных машинах Azure. Она также предоставляет сведения о том, как правильно присоединять диски хранилища Azure для виртуальных машин Linux.

Типы виртуальных машин Azure, которые можно использовать для производственных сценариев, можно найти [в документации SAP для IAAS](https://www.sap.com/dmc/exp/2014-09-02-hana-hardware/enEN/iaas.html). Для нерабочей сценариев доступен широкий спектр собственных типов виртуальных Машин Azure.
Дополнительные сведения о конфигурации виртуальных Машин и операций, см. в разделе [конфигурации инфраструктуры SAP HANA и операции в Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/hana-vm-operations).
Для обеспечения высокой доступности SAP HANA, см. в разделе [высокого уровня доступности SAP HANA для виртуальных машин Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-hana-availability-overview).

Если вы хотите получить экземпляр SAP HANA или S/4HANA или BW/4HANA системы, быстро развернуть, рассмотрите возможность использования [SAP Cloud Appliance Library](https://cal.sap.com). Документацию о том, как для развертывания системы S/4HANA через SAP Cloud Appliance Library в Azure, например, в [в этом руководстве](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/cal-s4h). Вам потребуется только подписка Azure и пользователь SAP, можно зарегистрировать в SAP Cloud Appliance Library.

## <a name="additional-resources"></a>Дополнительные ресурсы
### <a name="sap-hana-backup"></a>Резервное копирование SAP HANA
Сведения о том, как резервное копирование баз данных SAP HANA на виртуальных машинах Azure см. в разделе:
* [Руководство по резервному копированию SAP HANA на виртуальных машинах Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-hana-backup-guide).
* [Резервное копирование Azure SAP HANA на уровне файлов](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-hana-backup-file-level).
* [Резервное копирование SAP HANA на основе хранилища моментальных снимков](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-hana-backup-storage-snapshots).

### <a name="sap-cloud-appliance-library"></a>Библиотека SAP Cloud Appliance Library
Сведения о том, как использовать SAP Cloud Appliance Library для развертывания S/4HANA или BW/4HANA, см. в разделе [развертывание SAP S/4HANA или BW/4HANA в Microsoft Azure](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/cal-s4h).

### <a name="sap-hana-supported-operating-systems"></a>Операционные системы, поддерживаемые платформой SAP HANA
Сведения о SAP HANA поддерживаемые операционные системы, см. в разделе [SAP Примечание 2235581 - SAP HANA: Поддерживаемые операционные системы](https://launchpad.support.sap.com/#/notes/2235581/E). На виртуальных машинах Azure поддерживаются только эти операционные системы. Следующие операционные системы поддерживаются для развертывания SAP HANA в Azure: 

* SUSE Linux Enterprise Server 12.x;
* Red Hat Enterprise Linux 7.2

Дополнительную документацию SAP по платформе SAP HANA и разным дистрибутивах Linux см. по ссылкам ниже.

* [Примечание SAP 171356. Программное обеспечение SAP на платформе Linux: Общие сведения](https://launchpad.support.sap.com/#/notes/1984787).
* [Примечание SAP 1944799. SAP HANA рекомендации для установки операционной системы для SLES](https://go.sap.com/documents/2016/05/e8705aae-717c-0010-82c7-eda71af511fa.html).
* [Примечание SAP 2205917. Базы данных SAP HANA рекомендуемые параметры ОС для SLES 12 для приложений SAP](https://launchpad.support.sap.com/#/notes/2205917/E).
* [Примечание SAP 1391070. Linux UUID solutions](https://launchpad.support.sap.com/#/notes/1391070).
* [Примечание SAP 2009879. SAP HANA рекомендации для операционной системы Red Hat Enterprise Linux (RHEL)](https://launchpad.support.sap.com/#/notes/2009879).
* [Примечание SAP 2292690. БАЗЫ ДАННЫХ SAP HANA: Рекомендуемые параметры операционной системы для RHEL 7](https://launchpad.support.sap.com/#/notes/2292690/E).

### <a name="sap-monitoring-in-azure"></a>Мониторинг SAP в Azure
Сведения о мониторинге SAP в Azure:

* [SAP 2191498 Примечание](https://launchpad.support.sap.com/#/notes/2191498/E) рассматриваются расширенного мониторинга SAP с виртуальными машинами Linux в Azure. 
* [SAP 1102124 Примечание](https://launchpad.support.sap.com/#/notes/1102124/E) сведения о SAPOSCOL в Linux. 
* [SAP 2178632 Примечание](https://launchpad.support.sap.com/#/notes/2178632/E) ключевые метрики мониторинга для SAP в Microsoft Azure.

### <a name="azure-vm-types"></a>Типы виртуальных машин Azure
Типы виртуальных Машин Azure и сценариев рабочей нагрузки, поддерживаемые SAP, используемых с SAP HANA, задокументированы в [сертифицированных платформ IaaS](https://www.sap.com/dmc/exp/2014-09-02-hana-hardware/enEN/iaas.html). 

Типы виртуальных Машин Azure, которые сертифицированы SAP для SAP NetWeaver или на уровне приложений S/4HANA, описаны в [примечании SAP 1928533: Приложения SAP в Azure: Поддерживаемые продукты и типы виртуальных Машин Azure](https://launchpad.support.sap.com/#/notes/1928533/E).

> [!NOTE]
> Интеграция SAP, Linux и Azure поддерживается только в модели развертывания с помощью Azure Resource Manager и не поддерживается в классической модели развертывания. 

## <a name="manual-installation-of-sap-hana"></a>Установка SAP HANA вручную

> [!IMPORTANT]
> Убедитесь, что выбран операционной системы SAP, сертифицированные для SAP HANA для определенных типов виртуальных Машин, которые можно использовать. Список SAP HANA certified типы виртуальных Машин и ОС освобождает для этих типов виртуальных Машин можно искать [SAP HANA сертифицированных платформ IaaS](https://www.sap.com/dmc/exp/2014-09-02-hana-hardware/enEN/iaas.html#categories=Microsoft%20Azure). Убедитесь в том, что щелкните подробную информацию о тип виртуальной Машины, чтобы получить полный список выпусков ОС поддерживается SAP HANA для определенного типа виртуальной Машины в списке. Для примера в этом документе мы использовали выпуск SUSE Linux Enterprise Server (SLES) операционной системы, который не поддерживается в SAP для SAP HANA на виртуальных машинах серии M.
>

В этом руководстве описываются два разных способа установки SAP HANA на виртуальных машинах Azure вручную:

* Используйте службы SAP Software Provisioning Manager (SWPM) в рамках распределенной установки NetWeaver на шаге «Установка экземпляра базы данных».
* Используйте средство диспетчера (HDBLCM) жизненный цикл баз данных SAP HANA, а затем Установка NetWeaver.

Можно также использовать SWPM для установки всех компонентов, таких как SAP HANA, сервер приложений SAP и экземпляр ASCS, в одной виртуальной Машине. Они описаны в этом [блога](https://blogs.saphana.com/2013/12/31/announcement-sap-hana-and-sap-netweaver-as-abap-deployed-on-one-server-is-generally-available/). Этот метод не описывается в этом кратком руководстве, но проблемы, которые необходимо учитывать такие же.

Перед началом установки, мы рекомендуем прочитать «Подготовка виртуальных машин Azure к установке SAP HANA вручную» далее в этом руководстве. Это поможет предотвратить несколько основных ошибок, которые могут возникнуть при использовании только конфигурации виртуальной машины Azure по умолчанию.

## <a name="key-steps-for-sap-hana-installation-when-you-use-sap-swpm"></a>Основные шаги по установке SAP HANA при использовании SAP SWPM
В этом разделе перечислены основные шаги для установки SAP HANA на уровне отдельного экземпляра вручную при использовании SAP SWPM для выполнения распределенной установки SAP NetWeaver 7.5. Отдельные шаги более подробно объясняются в этом руководстве на снимках экрана.

1. Создайте виртуальную сеть Azure с двумя тестовыми виртуальными машинами.
2. Разверните две виртуальные машины Azure с операционными системами, в соответствии с моделью Azure Resource Manager. В этом примере используется SUSE Linux Enterprise Server и SLES для SAP приложений 12 с пакетом обновления 1. 
3. Присоедините два стандартных или диски хранилища класса premium, например, 75 ГБ или 500 ГБ дисков, к виртуальной Машине сервера приложений.
4. Присоедините диски хранилища класса Premium к виртуальной машине сервера базы данных HANA. Дополнительные сведения см. в разделе «Настройка диска» далее в этом руководстве.
5. В зависимости от требований к размерам или пропускной способности подключите несколько дисков. Затем создайте чередующиеся тома. Используйте Управление логическими томами (LVM) или нескольких устройств средство администрирования (mdadm) на уровне операционной системы на виртуальной Машине.
6. Создайте на подключенных дисках или логических томах файловые системы XFS.
7. Подключите новые файловые системы XFS на уровне операционной системы. Используйте одну файловую систему для всего программного обеспечения SAP. Используйте другую файловую систему для каталога /sapmnt и резервных копий. На сервере базы данных SAP HANA подключите файловые системы XFS на дисках хранилища класса Premium, такие как /hana и /usr/sap. Это необходимо предотвратить переполнение корневой файловой системы. В корневой файловой системе имеет небольшой размер на виртуальных машинах Azure Linux. 
8. Добавьте в файл /etc/hosts локальные IP-адреса тестовых виртуальных машин.
9. Добавьте в файл /etc/fstab параметр **nofail**.
10. Задайте параметры ядра Linux в соответствии с выпуском ОС Linux, которые можно использовать. Дополнительные сведения см. в примечаниях SAP, посвященных HANA и в разделе «Параметры ядра» этого руководства.
11. Добавьте область буфера.
12. При необходимости установите на тестовых виртуальных машинах графический рабочий стол. В противном случае используйте удаленную установку SAPinst.
13. Скачайте программное обеспечение SAP из SAP Service Marketplace.
14. Установите экземпляр SAP ASCS на виртуальной машине сервера приложений.
15. Предоставьте общий доступ к каталогу /sapmnt для тестовых виртуальных машин с помощью NFS. Виртуальная машина сервера приложений — это сервер NFS.
16. Установите экземпляр базы данных, включая HANA, с помощью SWPM, на виртуальной Машине сервера базы данных.
17. Установите основной сервер приложений (PAS) на виртуальной машине сервера приложений.
18. Запустите консоль управления SAP (SAP MC). Подключитесь к консоли с помощью графического пользовательского интерфейса SAP или HANA Studio.

## <a name="key-steps-for-sap-hana-installation-when-you-use-hdblcm"></a>Основные шаги по установке SAP HANA при использовании HDBLCM
В этом разделе перечислены основные шаги по установке SAP HANA на уровне отдельного экземпляра вручную при использовании SAP HDBLCM для выполнения распределенной установки SAP NetWeaver 7.5. Отдельные шаги более подробно объясняются в этом руководстве на снимках экрана.

1. Создайте виртуальную сеть Azure с двумя тестовыми виртуальными машинами.
2. Разверните две виртуальные машины Azure с операционными системами, в соответствии с моделью Azure Resource Manager. В этом примере используется SLES и SLES для SAP приложений 12 с пакетом обновления 1.
3. Присоедините два стандартных или диски хранилища класса premium, например, 75 ГБ или 500 ГБ дисков, на виртуальной Машине сервера приложений.
4. Присоедините диски хранилища класса Premium к виртуальной машине сервера базы данных HANA. Дополнительные сведения см. в разделе «Настройка диска» далее в этом руководстве.
5. В зависимости от требований к размерам или пропускной способности подключите несколько дисков. Создайте чередующиеся тома с помощью управления логическими томами или mdadm средство на уровне операционной системы на виртуальной Машине.
6. Создайте на подключенных дисках или логических томах файловые системы XFS.
7. Подключите новые файловые системы XFS на уровне операционной системы. Используйте одну файловую систему для всего программного обеспечения SAP. Используйте другую файловую систему для каталога /sapmnt и резервных копий. На сервере базы данных SAP HANA подключите файловые системы XFS на дисках хранилища класса Premium, такие как /hana и /usr/sap. Это необходимо предотвратить переполнение корневой файловой системы. В корневой файловой системе имеет небольшой размер на виртуальных машинах Azure Linux.
8. Добавьте в файл /etc/hosts локальные IP-адреса тестовых виртуальных машин.
9. Добавьте в файл /etc/fstab параметр **nofail**.
10. Задайте параметры ядра в соответствии с выпуском ОС Linux, которые можно использовать. Дополнительные сведения см. в примечаниях SAP, посвященных HANA и в разделе «Параметры ядра» этого руководства.
11. Добавьте область буфера.
12. При необходимости установите на тестовых виртуальных машинах графический рабочий стол. В противном случае используйте удаленную установку SAPinst.
13. Скачайте программное обеспечение SAP из SAP Service Marketplace.
14. Создайте на виртуальной машине сервера базы данных HANA группу sapsys с идентификатором 1001.
15. Установка SAP HANA на виртуальной Машине сервера базы данных с помощью диспетчера жизненного цикла базы данных HANA.
16. Установите экземпляр SAP ASCS на виртуальной машине сервера приложений.
17. Предоставьте общий доступ к каталогу /sapmnt для тестовых виртуальных машин с помощью NFS. Виртуальная машина сервера приложений — это сервер NFS.
18. Установите экземпляр базы данных, который включает HANA, с помощью SWPM, на виртуальной Машине сервера базы данных HANA.
19. Установите основной сервер приложений на виртуальной Машине сервера приложений.
20. Запустите консоль управления SAP. Подключитесь к консоли с помощью графического пользовательского интерфейса SAP или HANA Studio.

## <a name="prepare-azure-vms-for-a-manual-installation-of-sap-hana"></a>Подготовка виртуальных машин Azure к установке SAP HANA вручную
В этом разделе описываются следующие темы:

* обновления ОС;
* настройка диска;
* параметры ядра;
* файловые системы;
* файл/etc/hosts;
* файл /etc/fstab.

### <a name="os-updates"></a>Обновления ОС
Проверка наличия обновлений операционной системы Linux и исправления, перед установкой дополнительного программного обеспечения. Установите исправление, можно избежать, вызов в службу поддержки.

Убедитесь, что используется:
* SUSE Linux Enterprise Server for SAP Applications;
* Red Hat Enterprise Linux for SAP Applications или Red Hat Enterprise Linux for SAP HANA. 

Если вы еще этого не сделали, зарегистрируйте развертывание операционной системы с помощью подписки Linux, предоставленной поставщиком Linux. SUSE есть также образы ОС для приложений SAP, которые уже содержат службы и зарегистрированы автоматически.

Вот пример того, как проверить наличие доступных исправлений для SUSE Linux с помощью **zypper** команды:

 `sudo zypper list-patches`

В зависимости от типа ошибки исправления классифицируются по категориям и уровню серьезности. Ниже приведены часто используемые значения категорий. 
- Безопасность
- Рекомендуется
- Необязательно
- Компонент
- Документ
- yast

Ниже приведены часто используемые значения серьезности.

- критические ошибки.
- Важно!
- Средний
- Низкая
- Этот атрибут не задан

Команда **zypper** находит только те обновления, которые требуются для установленных пакетов. Например можно использовать эту команду:

`sudo zypper patch  --category=security,recommended --severity=critical,important`

Можно добавить параметр `--dry-run`, чтобы протестировать обновление без фактического обновления системы.


### <a name="disk-setup"></a>настройка диска;
Размер корневой файловой системы на виртуальных машинах Linux в Azure ограничен. Таким образом необходимо добавить дополнительное дисковое пространство для виртуальной Машины Azure для запуска SAP. Для виртуальных машин Azure сервера приложений SAP использовать диски стандартного хранилища Azure может оказаться достаточно. Для виртуальных машин Azure СУБД HANA SAP использование дисков хранилища Azure класса premium для производственных и нерабочей реализаций является обязательным.

На основе [требования к хранилищу SAP HANA TDI](https://www.sap.com/documents/2015/03/74cdb554-5a7c-0010-82c7-eda71af511fa.html), предлагаемое следующую конфигурацию хранилища Azure уровня "премиум": 

| SKU виртуальной машины | ОЗУ |  /hana/data и /hana/log, <br /> чередующиеся с диспетчером логических ТОМОВ или mdadm | /hana/shared | том /root | /usr/sap |
| --- | --- | --- | --- | --- | --- |
| GS5 | 448 ГБ | 2 x P30 | 1 x P20 | 1 x P10 | 1 x P10 | 

В конфигурации диска HANA том данных и журналов размещаются в одном наборе дисков хранилища Azure класса premium, чередующихся с диспетчером логических ТОМОВ или mdadm. Нет необходимости определить уровень избыточности RAID, так как хранилище Azure класса premium сохраняет три образа дисков для обеспечения избыточности. 

Чтобы настроить достаточный объем хранилища, см. в разделе [требования к хранилищу SAP HANA TDI](https://www.sap.com/documents/2015/03/74cdb554-5a7c-0010-82c7-eda71af511fa.html) и [руководство по установку и обновление сервера SAP HANA](https://help.sap.com/saphelp_hanaplatform/helpdata/en/4c/24d332a37b4a3caad3e634f9900a45/frameset.htm). Также учитывать объемы пропускной способности другой виртуального жесткого диска (VHD) разных Azure дисков хранилища класса premium, как описано в статье [высокопроизводительное хранилище класса premium и управляемые диски для виртуальных машин](../../windows/disks-types.md). 

Можно добавить дополнительные диски хранилища класса premium на виртуальные машины СУБД HANA для хранения резервных копий журналов транзакций или базы данных.

Дополнительные сведения о двух основных средствах для настройки чередования см. в разделе:

* [Настройка программного RAID-МАССИВА в Linux](../../linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).
* [Настройка диспетчера логических томов на виртуальной машине Linux в Azure](../../linux/configure-lvm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

Дополнительные сведения о том, как подключить диски к виртуальным машинам Azure, который работает под управлением Linux в качестве гостевой ОС см. в разделе [Добавление диска к виртуальной Машине Linux](../../linux/add-disk.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

Azure уровня "премиум" SSDs позволяет определять режимы кэширования диска. Для чередующегося набора, который содержит/hana/Data и/hana/log отключите кэширование. Для других томов, то есть дисков, настроить режим кэширования **ReadOnly**.

Чтобы найти пример шаблонов JSON, чтобы использовать для создания виртуальных машин, см. в разделе [шаблонов быстрого запуска Azure](https://github.com/Azure/azure-quickstart-templates).
Шаблон vm-simple-sles является базовым. Оно содержит раздел хранилища с дополнительным диском данных размером 100 ГБ. Используйте этот шаблон в качестве основы. Шаблон можно адаптировать для конкретной конфигурации.

> [!NOTE]
> Очень важно добавить диск хранилища Azure с помощью UUID, как описано в статье [запуска SAP NetWeaver на виртуальных машинах SUSE Linux Microsoft Azure](suse-quickstart.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

В тестовой среде два хранилища Azure класса standard диски подключены к виртуальной Машине сервера приложений SAP, как показано на следующем снимке экрана. Один диск содержит программное обеспечение SAP, например, NetWeaver 7.5, графический пользовательский Интерфейс SAP и SAP HANA, для установки. Второй диск гарантирует, что доступно достаточно свободного места для дополнительных требований. Например резервного копирования и тестовых данных и к каталогу/sapmnt, т. е. профилям SAP, должны быть общим для всех виртуальных машин, которые принадлежат к одному ландшафту SAP.

![Окно дисков сервера приложений SAP HANA, отображающее два диска данных и их размеры](./media/hana-get-started/image003.jpg)


### <a name="kernel-parameters"></a>параметры ядра;
SAP HANA необходимо указать определенные параметры ядра Linux. Эти параметры ядра, не являются частью стандартной коллекции, в Azure образов и должен быть установлен вручную. Для SUSE или Red Hat параметры могут отличаться. Примечаниях SAP, перечисленных ранее содержатся сведения об этих параметрах. На снимках экрана используется SUSE Linux 12 с пакетом обновления 1 (SP1). 

SLES для SAP Applications 12 общедоступной версии и SLES for SAP приложений 12 SP1 добавлен новое средство, **tuned-adm**, который заменяет старый **sapconf** средство. Для средства **tuned-adm** существует специальный профиль SAP HANA. Чтобы настроить систему для SAP HANA, введите следующий профиль в качестве привилегированного пользователя:

   `tuned-adm profile sap-hana`

Дополнительные сведения о средстве **tuned-adm** см. в [ соответствующей документации по SUSE](https://www.suse.com/documentation/sles-for-sap-12/pdfdoc/sles-for-sap-12-sp1.zip).

На следующем снимке экрана показано как **tuned-adm** изменить `transparent_hugepage` и `numa_balancing` значения в соответствии с требуемыми параметрами SAP HANA:

![Инструмент tuned-adm изменяет значения в соответствии с требуемыми параметрами SAP HANA](./media/hana-get-started/image005.jpg)

Чтобы сделать параметры ядра SAP HANA постоянными, используйте в SLES 12 загрузчик **grub2**. Дополнительные сведения о **grub2**, см. в разделе [структура файла конфигурации](https://www.suse.com/documentation/sles-for-sap-12/pdfdoc/sles-for-sap-12-sp1.zip) раздел документации SUSE.

На следующем снимке экрана показаны измененные в файле конфигурации, а затем скомпилированные с помощью **grub2-mkconfig** параметры ядра:

![Параметры ядра, измененные в файле конфигурации и скомпилированные с помощью grub2-mkconfig](./media/hana-get-started/image006.jpg)

Параметры ядра также можно изменить, используя YaST или выбрав параметры **Boot Loader** > **Kernel Parameters** (Загрузчик > Параметры ядра):

![Вкладка параметров Kernel Parameters (Параметры ядра) в загрузчике YaST](./media/hana-get-started/image007.jpg)

### <a name="file-systems"></a>Файловые системы
На следующем снимке экрана показаны две файловые системы, созданные на виртуальной машине сервера приложений SAP поверх двух подключенных дисков стандартного хранилища Azure. Эти файловые системы типа XFS подключены и должны быть подключены к/sapdata и/sapsoftware.

Это не обязательно структурировать файловые системы таким образом. У вас есть другие параметры структуры пространство на диске. Наиболее важно предотвратить нехватку свободного места в корневой файловой системе.

![Две файловые системы, созданные на виртуальной машине сервера приложений SAP](./media/hana-get-started/image008.jpg)

Для SAP HANA на виртуальной Машине, во время установки базы данных, при использовании SWPM SAPinst и **типичный** установке серверных компонентов, компоненты устанавливаются в/hana и/USR/SAP. Резервная копия журналов SAP HANA по умолчанию хранится в расположении /usr/sap. Опять же очень важно предотвратить нехватку дискового пространства в корневой файловой системе. Убедитесь, что имеется достаточно свободного места в/hana и/USR/SAP перед установкой SAP HANA с помощью SWPM.

Описание макета стандартной файловой системы SAP HANA, см. в разделе [руководство по установку и обновление сервера SAP HANA](https://help.sap.com/saphelp_hanaplatform/helpdata/en/4c/24d332a37b4a3caad3e634f9900a45/frameset.htm).

![Дополнительные файловые системы, созданные на виртуальной машине сервера приложений SAP](./media/hana-get-started/image009.jpg)

При установке SAP NetWeaver в стандартной SLES или SLES для образа коллекции Azure 12 для приложений SAP, отображается сообщение о том, что нет пространства подкачки, как показано на следующем снимке экрана. Чтобы закрыть это сообщение, можно вручную добавить файл подкачки с помощью **dd**, **mkswap** и **swapon**. Чтобы узнать как это сделать, найдите «Добавление файла подкачки вручную» в [с помощью разделителя YaST](https://www.suse.com/documentation/sles-for-sap-12/pdfdoc/sles-for-sap-12-sp1.zip) раздел документации SUSE.

Область буфера можно также настроить с помощью агента виртуальной машины Linux. Дополнительные сведения см. в [руководстве пользователя агента Linux Azure](../../extensions/agent-linux.md).

![Всплывающее сообщение о том, что имеется области буфера недостаточно места](./media/hana-get-started/image010.jpg)


### <a name="the-etchosts-file"></a>файл/etc/hosts;
Перед началом установки SAP необходимо добавить в файл /etc/hosts имена узлов и IP-адреса виртуальных машин SAP. Разверните все виртуальные машины SAP в одной виртуальной сети Azure. Затем используйте внутренние IP-адреса, как показано ниже:

![Имена узлов и IP-адреса виртуальных машин SAP, приведенные в файле /etc/hosts](./media/hana-get-started/image011.jpg)

### <a name="the-etcfstab-file"></a>файл /etc/fstab.

Это полезно для добавления **nofail** параметр в файл fstab. Таким образом, если что-то пойдет не так, с дисками виртуальной Машины не перестают отвечать в процессе загрузки. Помните, что на диске может не быть дополнительного места и процессы могут заполнить корневую файловую систему. Если /hana отсутствует, SAP HANA не запустится.

![Добавление параметра nofail в файл fstab](./media/hana-get-started/image000c.jpg)

## <a name="graphical-gnome-desktop-on-sles-12sles-for-sap-applications-12"></a>Графический рабочий стол GNOME в SLES 12 или SLES for SAP Applications 12
В этом разделе объясняется, как выполнить такие задачи:

* Установка рабочего стола GNOME и xrdp в SLES 12 или SLES for SAP Applications 12.
* Запустите консоль Управления SAP на платформе Java с помощью Firefox в SLES 12 или SLES for SAP Applications 12.

Также можно использовать альтернативные варианты, например Xterminal или VNC, которые не описаны в этом руководстве.

### <a name="install-the-gnome-desktop-and-xrdp-on-sles-12sles-for-sap-applications-12"></a>Установка рабочего стола GNOME и xrdp в SLES 12 или SLES for SAP Applications 12
Если у вас есть фон Windows, можно легко использовать графический рабочий стол непосредственно в виртуальных машинах Linux SAP для запуска Firefox, SAPinst, графического пользовательского интерфейса SAP, консоли Управления SAP или HANA Studio. Затем можно подключиться к виртуальной Машине по протоколу удаленного рабочего стола (RDP) с компьютера Windows. В зависимости от политик вашей компании о Добавление графических интерфейсов в рабочей среде и непроизводственной системы под управлением Linux может потребоваться установить GNOME на сервере. Выполните следующие действия, чтобы установить рабочий стол GNOME на Azure SLES 12 или SLES для приложений SAP 12 на виртуальной Машине.

1. Установите рабочий стол GNOME, введя следующую команду, например, в окне PuTTY:

   `zypper in -t pattern gnome-basic`

2. Чтобы разрешить подключение к виртуальной машине через удаленный рабочий стол, установите xrdp:

   `zypper in xrdp`

3. Измените файл /etc/sysconfig/windowmanager и установите GNOME в качестве диспетчера окон по умолчанию:

   `DEFAULT_WM="gnome"`

4. Выполните команду **chkconfig**, чтобы убедиться, что xrdp автоматически запустится после перезагрузки:

   `chkconfig -level 3 xrdp on`

5. Если у вас есть проблема с подключением RDP, попробуйте перезагрузить, к примеру, в окне PuTTY:

   `/etc/xrdp/xrdp.sh restart`

6. Если перезапуск xrdp, упомянутый на предыдущем шаге, не работает, проверьте наличие PID-файла:

   `check /var/run` 

   Поищите `xrdp.pid`. Если вы найдете этот файл, удалите его и попробуйте еще раз перезагрузить систему.

### <a name="start-sap-mc"></a>Start SAP MC
После установки рабочего стола GNOME, запустите графический MC SAP на платформе Java из Firefox. Если она выполняется в Azure SLES 12 или SLES для приложений SAP 12 на виртуальной Машине, он может отображаться ошибка. Эта ошибка возникает из-за отсутствующих Java в браузере подключаемого модуля.

Чтобы запустить консоль управления SAP, используйте следующий URL-адрес: `<server>:5<instance_number>13`.

Дополнительные сведения см. в разделе [запуск веб-консоли управления SAP](https://help.sap.com/saphelp_nwce10/helpdata/en/48/6b7c6178dc4f93e10000000a42189d/frameset.htm).

На следующем снимке экрана показано сообщение об ошибке, которое будет отображаться при Java в браузере подключаемого модуля отсутствует:

![Сообщение об ошибке, указывающее на отсутствие в браузере подключаемого модуля Java](./media/hana-get-started/image013.jpg)

Чтобы решить эту проблему, установите отсутствующий подключаемый модуль с помощью YaST, как показано на следующем снимке экрана:

![Использование YaST для установки отсутствующего подключаемого модуля](./media/hana-get-started/image014.jpg)

Когда вы вводите URL-адрес консоли управления SAP, вам будет предложено активировать подключаемый модуль:

![Диалоговое окно с запросом на активацию подключаемого модуля](./media/hana-get-started/image015.jpg)

Также может появиться сообщение об отсутствующем файле javafx.properties. Его связь с требованием наличия Oracle Java 1.8 для SAP GUI 7.4. Дополнительные сведения см. в разделе [SAP 2059429 Примечание](https://launchpad.support.sap.com/#/notes/2059424).
Версия Java для IBM и пакет openjdk, поставляемый с SLES или SLES for SAP Applications 12, отсутствует необходимый файл javafx.properties. Рекомендуется скачать и установить Java SE8 с сайта Oracle.

Сведения о подобной проблеме с openjdk в openSUSE см. в обсуждении [SAPGui 7.4 Java for openSUSE 42.1 Leap](https://scn.sap.com/thread/3908306).

## <a name="manual-installation-of-sap-hana-swpm"></a>Установка SAP HANA вручную: SWPM
На серии снимков экрана в этом разделе показаны основные действия по установке SAP NetWeaver 7.5 и SAP HANA SP12 при использовании SWPM с SAPinst. В рамках установки NetWeaver 7.5 SWPM также можно установить базу данных HANA как единственный экземпляр.

В примере среды тестирования мы установили один сервер приложений Advanced Business Application Programming (ABAP). Как показано на следующем снимке экрана, мы использовали **распределенной системы** возможность установки ASCS и основных экземпляров сервера приложений на виртуальной Машине Azure. Мы использовали SAP HANA как системы баз данных на другой виртуальной Машине Azure.

![ASCS и основные экземпляры сервера приложений, установленные с помощью параметра "Distributed System" (Распределенная система)](./media/hana-get-started/image012.jpg)

После установки экземпляра ASCS на виртуальной Машине сервера приложений, оно определяется зеленый значок в консоли управления SAP. Каталог/sapmnt, который включает в себя каталог профилей SAP, должны совместно использоваться на виртуальную Машину сервера базы данных SAP HANA. Доступ к этому каталогу требуется во время установки базы данных. Лучший способ предоставить доступ — использовать клиент NFS, который можно настроить с помощью Yast.

![Консоль управления SAP, отображающая экземпляр ASCS, установленный на виртуальной Машине, используя зеленый значок сервера приложений](./media/hana-get-started/image016.jpg)

На виртуальной Машине сервера приложений, можно совместно к каталогу/sapmnt через NFS с помощью **rw** и **no_root_squash** параметры. По умолчанию используются параметры **ro** и **root_squash**, но при установке экземпляра базы данных из-за них могут возникать проблемы.

![Предоставление общего доступа к каталогу /sapmnt через NFS-клиент с использованием параметров rw и no_root_squash](./media/hana-get-started/image017b.jpg)

Как показано на следующем снимке экрана, sapmnt, доступ из виртуальной Машины сервера приложений необходимо настроить на виртуальной Машине сервера базы данных SAP HANA с помощью **NFS-клиента** и YaST:

![Sapmnt, настроенный с помощью NFS-клиента](./media/hana-get-started/image018b.jpg)

Для выполнения распределенной установки NetWeaver 7.5, то есть **экземпляр базы данных**, войдите на виртуальную Машину сервера базы данных SAP HANA и запустите SWPM:

![Установка экземпляра базы данных путем входа на виртуальную машину сервера базы данных SAP HANA и запуска SWPM](./media/hana-get-started/image019.jpg)

После выбора **типичный** установку и путь к установочному носителю, введите идентификатор безопасности базы данных, имя узла, номер экземпляра и пароль системного администратора базы данных:

![Страница входа в систему системного администратора базы данных SAP HANA](./media/hana-get-started/image035b.jpg)

Введите пароль схемы DBACOCKPIT:

![Поле для ввода пароля для схемы DBACockpit](./media/hana-get-started/image036b.jpg)

Введите вопрос для пароля схемы SAPABAP1:

![Ввод вопроса для пароля схемы SAPABAP1](./media/hana-get-started/image037b.jpg)

После выполнения каждого задания рядом с каждым этапом процесса установки базы данных появится зеленая галочка. Отобразится сообщение "Execution of ... Database Instance has completed" (Выполнение экземпляра базы данных (...) завершено).

![Окно выполнения задачи, содержащее сообщение с подтверждением](./media/hana-get-started/image023.jpg)

После успешной установки в консоли управления SAP также показано экземпляра базы данных с зеленым значком. Он отображает список всех процессов SAP HANA, например hdbindexserver, hdbcompileserver.

![Окно консоли управления SAP со списком процессов SAP HANA](./media/hana-get-started/image024.jpg)

На следующем снимке экрана показаны части структуры файла в каталоге /hana/shared, созданном SWPM во время установки HANA. Так как нет возможности указать другой путь, очень важно подключить дополнительное дисковое пространство в каталоге / перед установкой SAP HANA с помощью SWPM. Этот шаг предотвращает нехватку свободного места в корневой файловой системе.

![Структура файла каталога /hana/shared, созданного во время установки HANA](./media/hana-get-started/image025.jpg)

На этом снимке экрана показана структура файла каталога /usr/sap:

![Структура файла каталога usr/sap/](./media/hana-get-started/image026.jpg)

Последний шаг распределенной установки ABAP — это установка основного экземпляра сервера приложений:

![Установка ABAP, отображающая основной экземпляр сервера приложений в качестве завершающего этапа](./media/hana-get-started/image027b.jpg)

После установки основного экземпляра сервера приложений и графического пользовательского интерфейса SAP, используйте **DBA Cockpit** транзакций, чтобы убедиться, что установка SAP HANA завершена правильно:

![Окно DBACockpit с подтверждением успешной установки](./media/hana-get-started/image028b.jpg)

На последнем этапе может потребоваться установить HANA Studio на виртуальной Машине сервера приложений SAP. Затем подключитесь к экземпляру SAP HANA, на котором выполняется на виртуальной Машине сервера базы данных.

![Установка SAP HANA Studio на виртуальной машине сервера приложений SAP](./media/hana-get-started/image038b.jpg)

## <a name="manual-installation-of-sap-hana-hdblcm"></a>Установка SAP HANA вручную: HDBLCM
Кроме установки SAP HANA в рамках распределенной установки с помощью SWPM, можно сначала установить только HANA с помощью HDBLCM. Затем можно установить SAP NetWeaver 7.5. Процесс показан на снимках экрана в этом разделе.

Дополнительные сведения о средстве HDBLCM HANA см. в следующих источниках:

* [Выберите правильный SAP HANA HDBLCM для решения ваших задач](https://help.sap.com/saphelp_hanaplatform/helpdata/en/68/5cff570bb745d48c0ab6d50123ca60/content.htm).
* [Средства управления жизненным циклом SAP HANA](https://www.tutorialspoint.com/sap_hana_administration/sap_hana_administration_lifecycle_management.htm).
* [Руководство по установку и обновление сервера SAP HANA](https://help.sap.com/hana/SAP_HANA_Server_Installation_Guide_en.pdf).

Чтобы избежать проблем с настройкой идентификатора группы по умолчанию для `\<HANA SID\>adm user`, которые создаются с помощью средства HDBLCM. Перед установкой SAP HANA с помощью hdblcm необходимо определить новую группу с именем `sapsys` с помощью идентификатора группы `1001`:

![Новая группа sapsys, определенная с использованием идентификатора группы 1001](./media/hana-get-started/image030.jpg)

При запуске HDBLCM в первый раз, простой запуск отображения меню. Выберите пункт 1, **установить новую систему**:

![Параметр "Install new system" (Установка новой системы) в окне запуска HDBLCM](./media/hana-get-started/image031.jpg)

На следующем снимке экрана отображаются все ранее выбранные основные параметры.

> [!IMPORTANT]
> Каталоги, используемые для журнала HANA и томов данных и путь установки, который является/hana/Shared в этот пример и/USR/SAP не должны быть частью корневой файловой системы. Эти каталоги принадлежат к дискам данных Azure, которые присоединены к виртуальной Машине. Дополнительные сведения см. в разделе «Настройка диска». 

Такой подход обеспечивает достаточный объем памяти для корневой файловой системы. Обратите внимание на то, что у системного администратора HANA есть идентификатор пользователя `1005` и является частью `sapsys` группе с Идентификатором `1001`, которая определена до установки.

![Список всех выбранных ранее основных компонентов SAP HANA](./media/hana-get-started/image032.jpg)

Проверьте `\<HANA SID\>adm user` сведения в каталоге/etc/passwd. Найдите `azdadm`, как показано на следующем снимке экрана:

![Сведения о пользователе \<HANA SID\>adm user в каталоге /etc/passwd](./media/hana-get-started/image033.jpg)

После установки SAP HANA с помощью HDBLCM в SAP HANA Studio отобразится структура файла, как показано на следующем снимке экрана. Схема SAPABAP1 со всеми таблицами SAP NetWeaver еще недоступна.

![Структура файла SAP HANA в SAP HANA Studio](./media/hana-get-started/image034.jpg)

После установки SAP HANA на его основе можно установить SAP NetWeaver. Как показано на следующем снимке экрана, установка была выполнена как распределенной установки с помощью SWPM. Этот процесс описан в предыдущем разделе. При установке экземпляра базы данных с помощью SWPM вы введите те же данные с помощью HDBLCM. Например введите имя узла, идентификатор безопасности HANA и номер экземпляра. Затем SWPM использует имеющуюся установку HANA и добавляет дополнительные схемы.

![Распределенная установка, выполненная с помощью SWPM](./media/hana-get-started/image035b.jpg)

На следующем снимке экрана показан этап установки SWPM с вводом данных о схеме DBACOCKPIT:

![Этап установки SWPM, на котором вводятся данные о схеме DBACockpit](./media/hana-get-started/image036b.jpg)

Введите данные о схеме SAPABAP1:

![Ввод данных о схеме SAPABAP1](./media/hana-get-started/image037b.jpg)

После завершения установки экземпляра базы данных SWPM, вы увидите, что схема SAPABAP1 в SAP HANA Studio:

![Схема SAPABAP1 в SAP HANA Studio](./media/hana-get-started/image038b.jpg)

Наконец, после завершения работы сервера приложений SAP и графического пользовательского интерфейса SAP установок, проверить экземпляр базы данных HANA с помощью **DBA Cockpit** транзакции:

![Экземпляр базы данных HANA, проверенный с помощью транзакции DBA Cockpit](./media/hana-get-started/image039b.jpg)


## <a name="sap-software-downloads"></a>Скачивания программного обеспечения SAP
Программное обеспечение можно скачать с SAP Service Marketplace, как показано на следующих снимках экрана.

Скачивание NetWeaver 7.5 для Linux и HANA.

 ![SAP установки и обновления период обслуживания для скачивания NetWeaver 7.5](./media/hana-get-started/image001.jpg)

Скачивание выпуска HANA SP12 Platform.

 ![SAP установки и обновления период обслуживания для скачивания выпуска HANA SP12 Platform](./media/hana-get-started/image002.jpg)

