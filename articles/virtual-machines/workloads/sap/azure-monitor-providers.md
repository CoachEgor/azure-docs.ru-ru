---
title: Azure Monitor для поставщиков решений SAP | Документация Майкрософт
description: Эта статья содержит ответы на часто задаваемые вопросы о Azure Monitor для поставщиков решений SAP.
author: rdeltcheva
ms.service: virtual-machines
ms.subservice: workloads
ms.topic: article
ms.date: 06/30/2020
ms.author: radeltch
ms.reviewer: cynthn
ms.openlocfilehash: 056eba8694d1727350809121f763181e3cdbdc64
ms.sourcegitcommit: cd9754373576d6767c06baccfd500ae88ea733e4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2020
ms.locfileid: "94968610"
---
# <a name="azure-monitor-for-sap-solutions-providers-preview"></a>Azure Monitor для поставщиков решений SAP (Предварительная версия)

## <a name="overview"></a>Обзор  

В контексте Azure Monitor для решений SAP *тип поставщика* относится к конкретному *поставщику*. Например *SAP HANA*, которая настроена для конкретного компонента в ландшафте SAP, например SAP HANA базы данных. Поставщик содержит сведения о соединении для соответствующего компонента и помогает в сборе данных телеметрии из этого компонента. Для одного Azure Monitor ресурса решений SAP (также известного как ресурс SAP Monitor) можно настроить несколько поставщиков одного типа поставщика или нескольких поставщиков для нескольких типов поставщиков.
   
Клиенты могут выбрать настройку различных типов поставщиков, чтобы включить сбор данных из соответствующего компонента в своей ландшафтной среде SAP. Например, клиенты могут настроить одного поставщика для типа поставщика SAP HANA, другого поставщика для типа поставщика кластеров с высоким уровнем доступности и т. д.  

Клиенты также могут настроить несколько поставщиков определенного типа поставщика, чтобы повторно использовать один и тот же ресурс SAP Monitor и связанную управляемую группу. Дополнительные сведения об управляемой группе ресурсов. Для общедоступной предварительной версии поддерживаются следующие типы поставщиков:   
- SAP HANA
- Кластер с высоким уровнем доступности
- Microsoft SQL Server

![Azure Monitor для поставщиков решений SAP](./media/azure-monitor-sap/azure-monitor-providers.png)

Пользователям рекомендуется настроить по крайней мере одного поставщика из доступных типов поставщиков во время развертывания ресурса мониторинга SAP. Настроив поставщик, клиенты инициируют сбор данных из соответствующего компонента, для которого настроен поставщик.   

Если клиенты не настраивают какие бы то ни было поставщики во время развертывания ресурса монитора SAP, хотя ресурс SAP Monitor будет успешно развернут, данные телеметрии собираться не будут. У клиентов есть возможность добавлять поставщиков после развертывания с помощью ресурса монитора SAP в портал Azure. Клиенты могут в любое время добавлять или удалять поставщиков из ресурса мониторинга SAP.

> [!Tip]
> Если вы хотите, чтобы корпорация Майкрософт реализовала конкретного поставщика, оставьте отзыв по ссылке в конце документа или обратитесь к группе вашей учетной записи.  

## <a name="provider-type-sap-hana"></a>Тип поставщика SAP HANA

Клиенты могут настроить одного или нескольких поставщиков типа поставщика *SAP HANA* , чтобы включить сбор данных из SAP HANA базы данных. Поставщик SAP HANA подключается к SAP HANA базе данных через порт SQL, извлекает данные телеметрии из базы данных и передает их в рабочую область Log Analytics в подписке клиента. Поставщик SAP HANA собирает данные каждые 1 минуту из базы данных SAP HANA.  

В общедоступной предварительной версии клиенты могут видеть следующие данные с помощью поставщика SAP HANA: базовое использование инфраструктуры, состояние узла SAP HANA, SAP HANA репликация системы и SAP HANA данные телеметрии резервного копирования. Чтобы настроить поставщик SAP HANA, необходимо указать IP-адрес узла, номер порта SQL HANA и имя пользователя и пароль СИСТЕМДБ. Клиентам рекомендуется настроить SAP HANA поставщика для СИСТЕМДБ, однако можно настроить дополнительные поставщики для других клиентов базы данных.

![Azure Monitor для поставщиков решений SAP — SAP HANA](./media/azure-monitor-sap/azure-monitor-providers-hana.png)

## <a name="provider-type-high-availability-cluster"></a>Тип поставщика кластер высокой доступности
Клиенты могут настроить один или несколько поставщиков *кластера с высоким уровнем доступности* , чтобы включить сбор данных из кластера Pacemaker в ландшафте SAP. Поставщик кластеров с высоким уровнем доступности подключается к Pacemaker, используя конечную точку [ha_cluster_exporter](https://github.com/ClusterLabs/ha_cluster_exporter) , извлекает данные телеметрии из базы данных и отправляет их в log Analytics рабочую область в подписке клиента. Поставщик кластеров с высоким уровнем доступности собирает данные каждые 60 секунд из Pacemaker.  

В общедоступной предварительной версии клиенты могут видеть следующие данные с помощью поставщика кластеров с высоким уровнем доступности:   
 - Состояние кластера, представленного в виде свертки состояния узла и ресурса 
 - [участниками](https://github.com/ClusterLabs/ha_cluster_exporter/blob/master/doc/metrics.md) 

![Azure Monitor для поставщиков решений SAP — кластер с высоким уровнем доступности](./media/azure-monitor-sap/azure-monitor-providers-pacemaker-cluster.png)

Для настройки поставщика кластеров с высоким уровнем доступности используются два основных этапа.

1. Установите [ha_cluster_exporter](https://github.com/ClusterLabs/ha_cluster_exporter) в *каждом* узле в кластере Pacemaker.

   Существует два варианта установки ha_cluster_exporter.
   
   - Используйте сценарии службы автоматизации Azure для развертывания кластера с высоким уровнем доступности. Скрипты устанавливают [ha_cluster_exporter](https://github.com/ClusterLabs/ha_cluster_exporter) на каждом узле кластера.  
   - Выполните [установку вручную](https://github.com/ClusterLabs/ha_cluster_exporter#manual-clone--build). 

2. Настройте поставщик кластеров с высоким уровнем доступности для *каждого* узла в кластере Pacemaker.

   Для настройки поставщика кластеров с высоким уровнем доступности требуются следующие сведения:
   
   - **Имя**. Имя этого поставщика. Оно должно быть уникальным для этого Azure Monitor для экземпляра решений SAP.
   - **Конечная точка Prometheus**. Обычно HTTP \: // \<servername or ip address\> : 9664/метрики.
   - **Идентификатор безопасности**. Для систем SAP используйте идентификатор безопасности SAP. Для других систем (например, кластеров NFS) используйте для кластера имя из трех символов. Идентификатор безопасности должен отличаться от других отслеживаемых кластеров.   
   - **Имя кластера**. Имя кластера, используемое при создании кластера. Имя кластера можно найти в свойстве Cluster `cluster-name` .
   - **Имя узла**. Имя узла Linux виртуальной машины.  

## <a name="provider-type-microsoft-sql-server"></a>Тип поставщика Microsoft SQL Server

Клиенты могут настроить один или несколько поставщиков типа поставщика *Microsoft SQL Server* , чтобы включить сбор данных из [SQL Server на виртуальных машинах](https://azure.microsoft.com/services/virtual-machines/sql-server/). SQL Server поставщик подключается к Microsoft SQL Server через порт SQL, извлекает данные телеметрии из базы данных и передает их в рабочую область Log Analytics в подписке клиента. Для SQL Server необходимо настроить проверку подлинности SQL и SQL Server имя входа, при этом необходимо создать базу данных SAP по умолчанию для поставщика. Поставщик SQL Server собирает данные каждые 60 секунд вплоть до каждого часа из SQL Server.  

В общедоступной предварительной версии клиенты могут видеть следующие данные с помощью поставщика SQL Server: базовое использование инфраструктуры, верхние инструкции SQL, самые большие таблицы, проблемы, записанные в SQL Server журналы ошибок, блокирующие процессы и другие.  

Чтобы настроить поставщик Microsoft SQL Server, требуется идентификатор системы SAP, IP-адрес узла, SQL Server номер порта, а также имя входа и пароль SQL Server.

![Azure Monitor для поставщиков решений SAP — SQL](./media/azure-monitor-sap/azure-monitor-providers-sql.png)

## <a name="next-steps"></a>Следующие шаги

- Создайте первую Azure Monitor для ресурса решений SAP.
- У вас возникли вопросы по Azure Monitor для решений SAP? Проверка раздела " [вопросы и ответы](./azure-monitor-faq.md) "
