---
title: Настройка BankDemo CICS Micro фокус для Micro фокус Enterprise Developer 4.0 на виртуальных машинах Azure
description: Запустите приложение BankDemo Micro фокус на виртуальных машинах Azure (ВМ), чтобы узнать, как использовать Micro Focus Enterprise Server и Enterprise Developer.
author: sread
ms.date: 04/02/2019
ms.topic: article
ms.service: multiple
ms.openlocfilehash: be94cf0367f93f14249239fce5e09c8635a01136
ms.sourcegitcommit: 61c8de2e95011c094af18fdf679d5efe5069197b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62125480"
---
# <a name="set-up-micro-focus-cics-bankdemo-for-micro-focus-enterprise-developer-40-on-azure"></a>Настройка BankDemo CICS Micro фокус для 4.0 Micro фокус Enterprise Developer в Azure

При настройке Micro фокус Enterprise Server 4.0 и 4.0 Enterprise Developer в Azure, вы можете проверить развертывания рабочих нагрузок IBM z/OS. В этой статье показано, как настроить BankDemo CICS, пример приложения, входящий в состав Enterprise Developer.

CICs — это система управления сведения клиента, платформа транзакций используется во многих приложений online мэйнфреймов. Приложение BankDemo отлично подходит для обучения работы Enterprise Server и Enterprise Developer и как управлять и развертывать фактического дополненный терминалы зеленый экран приложения.

## <a name="prerequisites"></a>Технические условия

- Виртуальная машина с [Enterprise Developer](set-up-micro-focus-azure.md). Имейте в виду, что корпоративный разработчик имеет полный экземпляр Enterprise Server на нем для целей разработки и тестирования. Это экземпляр сервера Enterprise, используемого для получения демоверсии.

- [Выпуск SQL Server 2017 Express](https://www.microsoft.com/sql-server/sql-server-editions-express). Скачайте и установите его на виртуальной Машине Enterprise Developer. Enterprise Server требуется база данных для управления областей CICS и BankDemo приложение также использует базу данных SQL Server с именем BANKDEMO. В этой демонстрации предполагается, что вы используете SQL Server Express для обеих баз данных. При установке выберите базовой установки.

- [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017) (SSMS). SSMS используется для управления базами данных и запускает скрипт T-SQL. Скачайте и установите его на виртуальной Машине Enterprise Developer.

- [Visual Studio 2017](https://azure.microsoft.com/downloads/) с последним пакетом или [Visual Studio Community](https://visualstudio.microsoft.com/vs/community/), который можно загрузить бесплатно.

- Шорьки рабочий стол или другой 3270 эмулятора.

## <a name="configure-the-windows-environment"></a>Настройка среды Windows

После установки Enterprise Developer 4.0 на виртуальной Машине, необходимо настроить экземпляр сервера предприятия, поставляемого с ним. Чтобы сделать это, необходимо установить с некоторыми дополнительными возможностями Windows следующим образом.

1. Используйте RDP для входа на виртуальную Машину 4.0 Server Enterprise, вы создали.

2. Нажмите кнопку **поиска** значок рядом с полем **запустить** кнопки и тип **функции Windows**. Откроется окно мастера Server Manager Установка ролей и компонентов.

3. Выберите **роль веб-сервера (IIS)** и затем проверьте следующее:

    - Веб-средства управления
    - Совместимость управления IIS 6 (выбрать все доступные функции)
    - Консоль управления IIS
    - IIS сценарии и средства управления
    - Служба управления IIS

4. Выберите **World Wide Web Services**и проверьте следующее:

     Компоненты разработки приложений:
    - Расширяемость .NET
    - ASP.NET
    - Основные функции HTTP. Добавить все доступные функции
    - Работоспособность и диагностика: Добавить все доступные функции
    - Безопасность:
        - Базовая проверка подлинности
        - Проверка подлинности Windows

5. Выберите **службу активации процессов Windows** и все его дочерние узлы.

6. Для **функции**, проверьте **Microsoft .NET framework 3.5.1**и проверьте следующее:

    - Windows Communication Foundation HTTP активация
    - Не HTTP активация Windows Communication Foundation

7. Для **функции**, проверьте **Microsoft .NET framework 4.6**и проверьте следующее:

   - Активация именованного канала
   - Активация TCP
   - Совместное использование порта TCP

     ![Мастер добавления ролей и компонентов: Службы ролей](media/01-demo-roles.png)

8. Когда выбраны все параметры, нажмите кнопку **Далее** для установки.

9. После функции Windows перейдите к **панели управления \> система и безопасность \> Администрирование**и выберите **служб**. Прокрутите вниз и убедитесь, что следующие службы запущены и присвоено **автоматического**:

    - **NetTcpPortSharing**
    - **Адаптер прослушивателя Net.Pipe**
    - **Адаптер прослушивателя NET.TCP**

10. Настройка поддержки служб IIS и WAS, в меню найдите **Micro фокус Enterprise командной строки разработчика (64-разрядная версия)** и запускаются как **администратора**.

11. Тип **wassetup – i** и нажмите клавишу **ввод**.

12. После выполнения сценария, можно закрыть окно.

## <a name="configure-the-local-system-account-for-sql-server"></a>Настройка учетной записи local system для SQL Server

Некоторые процессы Enterprise Server необходимо иметь возможность входа SQL Server и создание баз данных и других объектов. Эти процессы использовать учетную запись локальной системы, поэтому необходимо предоставить полномочия системного администратора для этой учетной записи.

1. Запустите **SSMS** и нажмите кнопку **Connect** для подключения к локальному серверу SQLEXPRESS, с использованием проверки подлинности Windows. Он должен быть доступен в **имя_сервера** списка.

2. В левой части разверните **безопасности** папку и выберите **имена входа**.

3. Выберите **NT AUTHORITY\\системы** и выберите **свойства**.

4. Выберите **ролей сервера** и проверьте **sysadmin**.

     ![Окно обозревателя объектов SSMS: Свойства учетной записи](media/02-demo-explorer.png)

## <a name="create-the-bankdemo-database-and-all-its-objects"></a>Создание базы данных BankDemo и все его объекты

1. Откройте **Windows Explorer** и перейдите к **C:\\пользователей\\открытый\\документов\\Micro Focus\\Enterprise Developer\\ Примеры\\мэйнфреймов\\CICS\\DotNet\\BankDemo\\SQL**.

2. Скопируйте содержимое **BankDemoCreateAll.SQL** файла в буфер обмена.

3. Откройте **SSMS**. Справа, щелкните **Server** и выберите **новый запрос**.

4. Вставьте содержимое буфера обмена в **новый запрос** поле.

5. Выполните SQL, щелкнув **Execute** из **команда** вкладки выше запрос.

Запрос должен выполняться без ошибок. При завершении процесса имеется образец базы данных для приложения BankDemo.

![Выходные данные SQLQuery1.sql](media/03-demo-query.png)

## <a name="verify-that-the-database-tables-and-objects-have-been-created"></a>Убедитесь, что таблицы базы данных и объекты были созданы

1. Щелкните правой кнопкой мыши **BANKDEMO** базы данных и выберите **обновить**.

2. Разверните **базы данных** и выберите **таблиц**. Вы увидите примерно следующим образом.

     ![BANKDEMO таблицы, раскрыв в обозревателе объектов](media/04-demo-explorer.png)

## <a name="build-the-application-in-enterprise-developer"></a>Постройте приложение в Enterprise Developer

1. Откройте Visual Studio и войти в систему.

2. В разделе **файл** пункт меню, выберите **открыть проект/решение**, перейдите к **C:\\пользователей\\открытый\\документов\\Micro Фокус\\Enterprise Developer\\примеры\\мэйнфреймов\\CICS\\DotNet\\BankDemo**и выберите **sln**файл.

3. Занять некоторое время, какие объекты. COBOL программы отображаются в обозревателе решений с расширением CBL вместе с CopyBooks (CPY) и JCL.

4. Щелкните правой кнопкой мыши **BankDemo2** проект и выберите **Назначить запускаемым проектом**.

    > [!NOTE]
    > Проект BankDemo использует HCOSS (узла параметр совместимости для SQL Server,), которое не используется для этой демонстрации.

5. В **обозревателе решений**, щелкните правой кнопкой мыши **BankDemo2** проект и выберите **построения**.

    > [!NOTE]
    > Создание на уровне решения приведут к ошибкам, HCOSS не настроены.

6. При построении проекта, изучите **вывода** окна. Она должна выглядеть как на следующем рисунке.

     ![Окно вывода, показывающая успешной сборки](media/05-demo-output.png)

## <a name="deploy-the-bankdemo-application-into-the-region-database"></a>Развертывание приложения BankDemo в регионе базы данных

1. Откройте командную строку Enterprise Developer (64-разрядная версия) от имени администратора.

2. Перейдите к **ОТКРЫТЫЙ %\\документов\\Micro Focus\\Enterprise Developer\\примеры\\мэйнфреймов\\CICS\\DotNet\\ BankDemo**.

3. В командной строке выполните **bankdemodbdeploy** и включить параметр для базы данных для развертывания, например:

    ```
    bankdemodbdeploy (local)/sqlexpress
    ```

> [!NOTE]
> Обязательно используйте косую черту (/) не обратная косая черта (\\). Этот скрипт выполняется некоторое время.

![Администрирование: Окно командной строки разработчика Enterprise](media/06-demo-cmd.png)

## <a name="create-the-bankdemo-region-in-enterprise-administrator-for-net"></a>Создание области BankDemo администратора предприятия для .NET

1. Откройте **Enterprise Server для администрирования .NET** пользовательского интерфейса.

2. Чтобы запустить оснастку MMC из Windows **запустить** меню, выберите **Micro фокус Enterprise Developer \> конфигурации \> Enterprise Server для администрирования .NET**. (Для Windows Server, выберите **Micro фокус Enterprise Developer \> Enterprise Server для администрирования .NET**).

3. Разверните **регионах** контейнера в левой панели, а затем щелкните правой кнопкой мыши **CICS**.

4. Выберите **определить регион** для создания новой области CICS, называемой **BANKDEMO**, размещенной в базе данных (local).

5. Введите экземпляр сервера базы данных, нажмите кнопку **Далее**, а затем введите имя региона **BANKDEMO**.

     ![Определение области-диалоговое окно](media/07-demo-cics.png)

6. Чтобы выбрать файл определения области для базы данных между регионами, найдите **регион\_bankdemo\_db.config** в **C:\\пользователей\\открытый\\ Документы\\Micro Focus\\Enterprise Developer\\примеры\\мэйнфреймов\\CICS\\DotNet\\BankDemo**.

     ![Определите регион — имя региона: BANKDEMO](media/08-demo-cics.png)

7. Нажмите кнопку **Готово**

## <a name="create-xa-resource-definitions"></a>Создание определений ресурсов XA

1. В левой части **Enterprise Server для администрирования .NET** пользовательского интерфейса, разверните **системы**, а затем **определения ресурсов XA**. Этот параметр определяет, как регион взаимодействует с Enterprise Server и баз данных приложений.

2. Щелкните правой кнопкой мыши **определения ресурсов XA** и выберите **добавить экземпляр сервера**.

3. В раскрывающемся списке выберите **экземпляр базы данных службы**. Это будет локальный компьютер SQLEXPRESS.

4. Выберите экземпляр, в разделе **определения ресурсов XA (machinename\\sqlexpress)** контейнера и нажмите **добавить**.

5. Выберите **определение ресурсов базы данных XA** и введите **BANKDEMO** для **имя** и **регион**.

     ![Новый экран определение ресурсов XA базы данных](media/09-demo-xa.png)

6. Нажмите кнопку с многоточием (**...** ) чтобы открыть мастер строку подключения. Для **имя_сервера**, тип **(local)\\SQLEXPRESS**. Для **входа**выберите **проверки подлинности Windows**. Имя базы данных, введите **BANKDEMO**

     ![Строка подключения экран редактирования](media/10-demo-string.png)

7. Проверка подключения.

## <a name="start-the-bankdemo-region"></a>Запуск BANKDEMO регион

> [!NOTE]
> Первым шагом является важным: Необходимо задать область для использования только что созданное определение ресурсов XA.

1. Перейдите к **BANDEMO CICS регион** под **контейнера областей**и выберите **изменить файл запуска области** из **действия** область. Прокрутите вниз до свойства SQL и введите **bankdemo** для **имя ресурса XA** , или используйте кнопку с многоточием, чтобы выбрать его.

2. Нажмите кнопку **Сохранить** значок, чтобы сохранить изменения.

3. Щелкните правой кнопкой мыши **регион CICS BANKDEMO** в **консоли** области и выберите **запуск и остановка регион**.

4. В нижней части **запуск и остановка регион** поле, которое отображается в средней области выберите **запустить**. Через несколько секунд начинается области.

     ![Поле SQL запуск и остановка](/media/11-demo-sql.png)

     ![Регион CICS BANKDEMO - работы экрана](media/12-demo-cics.png)

## <a name="create-a-listener"></a>Создание прослушивателя

Необходимо создать прослушиватель для сеансов TN3270, доступ к приложению BankDemo.

1. В левой области разверните **редакторов конфигурации** и выберите **прослушивателя**.

2. Нажмите кнопку **открыть файл** значок и выберите **seelistener.exe.config** файла. Этот файл будет изменен и загружается каждый раз при запуске Enterprise Server.

3. Обратите внимание, что в двух регионах, ранее определенные (ESDEMO и JCLDEMO).

4. Чтобы создать новую область для BANKDEMO, щелкните правой кнопкой мыши **регионах**и выберите **добавить регион**.

5. Выберите **BANKDEMO регион**.

6. Добавьте канал TN3270, щелкнув правой кнопкой мыши **регион BANKDEMO** и выбрав **добавить канал**.

7. Для **имя**, введите **TN3270**. Для **порт**, введите **9024**. (Обратите внимание, что приложение ESDEMO использует порт 9230, поэтому необходимо использовать другой порт.)

8. Чтобы сохранить файл, нажмите кнопку **Сохранить** значок или выберите **файл** \> **Сохранить**.

9. Чтобы запустить прослушиватель, щелкните **запустить прослушиватель** значок или выберите **параметры** \> **запустить прослушиватель**.

     ![Редактор конфигурации прослушивателя windows](media/13-demo-listener.png)


## <a name="configure-rumba-to-access-the-bankdemo-application"></a>Настройка Rumba доступ к приложению BankDemo

Последнее, что вам нужно будет настроить сеанс 3270, с помощью Rumba, эмулятор 3270. Этот шаг позволяет доступ к приложению BankDemo через прослушиватель, который вы только что создали.

1. Из Windows **запустить** меню, запустите Rumba рабочий стол.

2. В разделе **подключений** пункта меню, выберите **TN3270**.

3. Нажмите кнопку **вставить** и тип **127.0.0.1** для IP-адреса и **9024** для порта задано пользователем.

4. В нижней части диалоговое окно, нажмите кнопку **Connect**. Появляется черный экран CICS.

5. Тип **bank** для отображения начального экрана 3270 BankDemo приложения.

6. Идентификатор пользователя, введите **B0001** и паролем, введите ничего. Откроется первый экран BANK20.

![Мэйнфреймов отображения приветствия](media/14-demo.png)
![демонстрации подсистема отображения мэйнфреймов - Rumba - экрана](media/15-demo.png)

Поздравляем! Теперь при запуске приложения CICS в Azure с помощью Micro Focus Enterprise Server.

## <a name="next-steps"></a>Дальнейшие действия

- [Запуск Enterprise Server в контейнерах Docker в Azure](run-enterprise-server-container.md)
- [Переход с мэйнфреймов - портала](https://blogs.msdn.microsoft.com/azurecat/2018/11/16/mainframe-migration-to-azure-portal/)
- [Виртуальные машины](https://docs.microsoft.com/azure/virtual-machines/linux/overview)
- [Устранение неполадок](https://docs.microsoft.com/azure/virtual-machines/troubleshooting/)
- [Мифы о больших ЭВМ к миграции в Azure](https://azure.microsoft.com/resources/demystifying-mainframe-to-azure-migration/en-us/)
