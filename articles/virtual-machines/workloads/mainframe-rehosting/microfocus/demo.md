---
title: Настройка Micro Focus CICS BankDemo для Micro Focus Enterprise Developer 4.0 на виртуальных машинах Azure
description: Запустите приложение Micro Focus BankDemo на виртуальных машинах Azure (VM), чтобы научиться использовать Micro Focus Enterprise Server и enterprise Developer.
author: sread
ms.author: sread
ms.date: 04/02/2019
ms.topic: article
ms.service: multiple
ms.openlocfilehash: 4491fc137c2c85e2be605f5e58fde6fd422efbbe
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "67621336"
---
# <a name="set-up-micro-focus-cics-bankdemo-for-micro-focus-enterprise-developer-40-on-azure"></a>Настройка Micro Focus CICS BankDemo для micro Focus Enterprise Developer 4.0 на Azure

При настройке Micro Focus Enterprise Server 4.0 и Enterprise Developer 4.0 в Azure можно протестировать развертывание рабочих нагрузок IBM z/OS. В этой статье показано, как настроить CICS BankDemo, образец приложения, которое поставляется с корпоративным разработчиком.

CICs означает систему контроля информации о клиентах, платформу транзакций, используемую многими онлайн-приложениями мейнфрейма. Приложение BankDemo отлично подходит для изучения того, как работают Enterprise Server и Enterprise Developer и как управлять и развертывать реальное приложение в комплекте с зелеными экранными терминалами.

## <a name="prerequisites"></a>Предварительные требования

- VM с [корпоративным разработчиком](set-up-micro-focus-azure.md). Имейте в виду, что корпоративный разработчик имеет полный экземпляр Enterprise Server на нем для разработки и тестирования целей. Этот экземпляр является экземпляром Enterprise Server, используемым для демонстрации.

- [СЗЛ Сервер 2017 Экспресс издание](https://www.microsoft.com/sql-server/sql-server-editions-express). Скачать и установить его на предприятие разработчик VM. Для Enterprise Server требуется база данных для управления регионами CICS, а приложение BankDemo также использует базу данных сервера s'L Под названием BANKDEMO. Это демо предполагает, что вы используете S'L Server Express для обеих баз данных. При установке выберите основную установку.

- [Студия управления серверами S'L](/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017) (SSMS). SSMS используется для управления базами данных и запуска скрипта T-S'L. Скачать и установить его на предприятие разработчик VM.

- [Visual Studio 2019](https://azure.microsoft.com/downloads/) с последним пакетом услуг или [Visual Studio Community](https://visualstudio.microsoft.com/vs/community/), который вы можете скачать бесплатно.

- Rumba Desktop или еще 3270 эмулятор.

## <a name="configure-the-windows-environment"></a>Настройка среды Windows

После установки Enterprise Developer 4.0 на VM необходимо настроить экземпляр корпоративного сервера, который поставляется с ним. Для этого необходимо установить несколько дополнительных функций Windows следующим образом.

1. Используйте RDP для входа в созданный вами Корпоративный сервер 4.0 VM.

2. Нажмите значок **поиска** рядом с кнопкой **«Пуск»** и введите **функции Windows.** Серверный менеджер добавляет роли и функции Мастер открывает.

3. Выберите **роль веб-сервера (IIS),** а затем проверьте следующие параметры:

    - Средства управления веб-сайтом
    - Совместимость управления IIS 6 (выберите все доступные функции)
    - Консоль управления (IIS)
    - Сценарии и средства управления IIS
    - Служба управления IIS

4. Выберите **Службы Всемирной Паутины**и проверьте следующие варианты:

     Особенности разработки приложений:
    - Расширяемость платформы .NET
    - ASP.NET
    - Общие функции HTTP: Добавить все доступные функции
    - Здоровье и диагностика: Добавить все доступные функции
    - Безопасность.
        - Обычная проверка подлинности
        - Проверка подлинности Windows

5. Выберите **службу активации процессов Windows** и всех ее детей.

6. Для **функций,** проверить **Microsoft .NET рамки 3.5.1**, и проверить следующие варианты:

    - Windows Communication Foundation HTTP Активация
    - Windows Communication Foundation Non-HTTP Активация

7. Для **функций,** проверить **Microsoft .NET рамки 4.6**, и проверить следующие варианты:

   - Названная активация трубы
   - Активация TCP
   - Совместное использование TCP-порта

     ![Добавление функций Мастера: Службы ролевых ролей](media/01-demo-roles.png)

8. Когда вы выбрали все варианты, нажмите **Далее,** чтобы установить.

9. После функций Windows перейдите на ** \> систему панели управления и административные \> инструменты безопасности**и выберите **службы.** Прокрутите вниз и убедитесь, что следующие службы работают и настроены на **автоматическое:**

    - **NetTcpPortSharing**
    - **Адаптер прослушивателя Net.Pipe**
    - **Net.tcp Адаптер слушателя**

10. Для настройки IIS и службы поддержки, из меню найдите **Micro Focus Enterprise Developer Command Prompt (64 бит)** и запустите в качестве **администратора.**

11. Тип **былsetup -i** и нажмите **Enter**.

12. После запуска скрипта можно закрыть окно.

## <a name="configure-the-local-system-account-for-sql-server"></a>Настройка локальной учетной записи системы для сервера S'L

Некоторые процессы Enterprise Server должны иметь возможность войти в систему S'L Server и создать базы данных и другие объекты. Эти процессы используют учетную запись локальной системы, поэтому вы должны предоставить сисадмину полномочия на эту учетную запись.

1. Запустите **SSMS** и нажмите **Подключитесь,** чтобы подключиться к локальному серверу S'LEXPRESS с помощью аутентификации Windows. Он должен быть доступен в списке **имен сервера.**

2. Слева расширьте папку **безопасности** и выберите **Логины.**

3. Выберите **NT AUTHORITY\\SYSTEM** и выберите **Свойства.**

4. Выберите **роли сервера** и проверьте **sysadmin.**

     ![Окно SSMS Object Explorer: Свойства входа](media/02-demo-explorer.png)

## <a name="create-the-bankdemo-database-and-all-its-objects"></a>Создание базы данных BankDemo и всех ее объектов

1. Открыть **Windows Explorer** и перейти к **C:\\\\\\\\\\\\\\Пользователи\\\\публичные документы\\Micro Focus\\Enterprise Developer Образцы Mainframe DOTS DotNet BankDemo S'L**.

2. Копируйте содержимое файла **BankDemoCreateAll.S'L** в буфер обмена.

3. Открыть **SSMS**. Справа щелкните **сервер** и выберите **новый запрос.**

4. Вставьте содержимое буфера обмена в поле **Нового Запроса.**

5. Выполните S'L, нажав **на вкладку** **Команднады** выше запроса.

Запрос должен работать без ошибок. Когда она будет завершена, у вас есть выборочная база данных для приложения BankDemo.

![Выход сазл-Кери1.кв.кв.](media/03-demo-query.png)

## <a name="verify-that-the-database-tables-and-objects-have-been-created"></a>Проверить, были ли созданы таблицы баз данных и объекты

1. Нажмите правой кнопкой мыши в базе данных **BANKDEMO** и выберите **Обновление**.

2. Расширьте **базу данных** и выберите **таблицы**. Вы должны увидеть что-то вроде следующего.

     ![Таблица BANKDEMO расширена в Object Explorer](media/04-demo-explorer.png)

## <a name="build-the-application-in-enterprise-developer"></a>Создание приложения в корпоративном разработчике

1. Откройте Visual Studio и выполните вход.

2. В соответствии с опцией меню **файла,** выберите **Открытый проект / Решение**, перейдите на **C:\\\\Пользователи Общественный\\Документы\\Micro Focus\\Enterprise Developer\\Образцы\\Mainframe\\CICS\\DotNet\\BankDemo**, и выберите **sln** файл.

3. Потрудись изучение объектов. Программы COBOL отображаются в Solution Explorer с расширением CBL вместе с CopyBooks (CPY) и JCL.

4. Нажмите правой кнопкой мыши на **BankDemo2** проекта и выбрать **Установить в качестве запуска проекта**.

    > [!NOTE]
    > Проект BankDemo использует HCOSS (опция совместимости для сервера S'L), которая не используется для этой демонстрации.

5. В **Solution Explorer**, правой кнопкой мыши проекта **BankDemo2** и выберите **сборку**.

    > [!NOTE]
    > Построение на уровне решения приводит к ошибкам, так как HCOSS не настроен.

6. Когда проект построен, изучите окно **вывода.** Все должно быть примерно как на изображении ниже.

     ![Окно вывода, показывающее успешную сборку](media/05-demo-output.png)

## <a name="deploy-the-bankdemo-application-into-the-region-database"></a>Развертывание приложения BankDemo в базу данных Региона

1. Откройте запрос команды корпоративного разработчика (64 бита) в качестве администратора.

2. Перейдите к **%PUBLIC%\\Документы\\\\Micro\\Focus\\Enterprise Developer\\образцов Mainframe CICS\\\\DotNet BankDemo**.

3. В запросе команды выполните **bankdemodbdeploy** и включите параметр для развертывания базы данных, например:

    ```
    bankdemodbdeploy (local)/sqlexpress
    ```

> [!NOTE]
> Убедитесь в том, чтобы использовать передний\\слэш (/) не назад черту (). Этот скрипт работает некоторое время.

![Администрация: Окно командного управления разработчика предприятия](media/06-demo-cmd.png)

## <a name="create-the-bankdemo-region-in-enterprise-administrator-for-net"></a>Создание региона BankDemo в корпоративном администраторе для .NET

1. Откройте **корпоративный сервер для uI администрирования .NET.**

2. Чтобы начать mMC snap-in из меню Windows **Start,** выберите **Micro Focus Enterprise Developer \> Configuration \> Enterprise Server для .NET Admin.** (Для Windows Server выберите **корпоративный сервер Micro Focus Enterprise Developer \> Для .NET Admin).**

3. Расширьте контейнер **Регионов** в левом стеле, а затем нажмите **на CICS.**

4. Выберите **регион определения** для создания нового региона CICS под названием **BANKDEMO**, размещенного в (местной) базе данных.

5. Предоставь экземпляр сервера базы данных, нажмите **Далее,** а затем введите название региона **BANKDEMO**.

     ![Определить диалоговую коробку региона](media/07-demo-cics.png)

6. Чтобы выбрать файл определения региона для межрегиональной базы данных, найдите **\_регион\_bankdemo db.config** в **C:\\Пользователи\\общественных\\документов\\Micro Focus\\Enterprise Developer\\Образцы\\Mainframe\\CICS\\DotNet\\BankDemo**.

     ![Определить регион - Название региона: БАНКДЕМО](media/08-demo-cics.png)

7. Нажмите кнопку **Готово**.

## <a name="create-xa-resource-definitions"></a>Создание определений ресурсов XA

1. В левом стеле **корпоративного сервера для uI управления .NET** расширьте **систему,** а затем **определения ресурсов XA.** Эта настройка определяет, как Регион взаимодействует с Enterprise Server и базами данных приложений.

2. Нажмите на **XA-ресурсы и** выберите **Добавить сервер instance**.

3. В выпадающем поле выберите **службу базы данных Instance.** Это будет местная машина S'LEXPRESS.

4. Выберите экземпляр из-под **контейнера XA\\Ресурсные определения (machinename sqlexpress)** и нажмите **Добавить**.

5. Выберите **определение ресурсов базы данных XA,** а затем введите **BANKDEMO** для **имени** и **региона.**

     ![Новый экран определения ресурсов базы данных XA](media/09-demo-xa.png)

6. Нажмите на эллипсы **(...),** чтобы воспитать мастера строки соединения. Для **имени сервера**, введите **\\(местный) SLEXPRESS**. Для **logon**выберите **аутентификацию Windows.** Для названия базы данных введите **BANKDEMO**

     ![Экран строки соединения отсращения](media/10-demo-string.png)

7. Проверьте соединение.

## <a name="start-the-bankdemo-region"></a>Запуск региона БАНКДЕМО

> [!NOTE]
> Первый шаг важен: необходимо настроить область для использования только что созданного вами определения ресурсов XA.

1. Перейдите в **регион BANDEMO CICS** под **контейнером Регионов,** а затем выберите **файл запуска Edit Region** из панели **действий.** Прокрутите вниз, чтобы свойства S'L и введите **bankdemo** для **названия ресурса XA,** или используйте эллипсис, чтобы выбрать его.

2. Нажмите значок **Сохранить,** чтобы сохранить изменения.

3. Нажмите правой кнопкой мыши **BANKDEMO CICS Region** в **консольном** панели и выберите **регион Start/Stop.**

4. В нижней части окна **Start/Stop Region,** которая отображается в середине стекла, выберите **Start.** Через несколько секунд начинается область.

     ![Коробка "Старт/стоп"](media/11-demo-sql.png)

     ![CICS Регион БАНКДЕМО - Запущенный экран](media/12-demo-cics.png)

## <a name="create-a-listener"></a>Создание слушателя

Создайте слушателя для сеансов TN3270, которые получают доступ к приложению BankDemo.

1. В левом стеле расширьте **редакторы конфигураций** и выберите **слушателя.**

2. Нажмите значок **Open File** и выберите файл **seelistener.exe.config.** Этот файл будет редактироваться и загружаться каждый раз, когда начинается Enterprise Server.

3. Обратите внимание на два региона, которые были определены ранее (ESDEMO и JCLDEMO).

4. Чтобы создать новый регион для BANKDEMO, право-нажмите **Регионы**, и выберите **Добавить регион**.

5. Выберите **регион БАНКДЕМО**.

6. Добавить канал TN3270, нажав правой кнопкой **BANKDEMO региона** и выбора **Добавить канал**.

7. Для **названия,** введите **TN3270**. Для **порта,** введите **9024**. Приложение ESDEMO использует порт 9230, поэтому вам нужно использовать другой порт.

8. Чтобы сохранить файл, щелкните значок **Сохранить** или выберите **Сохранение файлов.** \> **Save**

9. Чтобы запустить слушателя, щелкните значок **Start Listener** или выберите **Параметры** \> **Запуска слушателя.**

     ![Окна редактора конфигурации слушателя](media/13-demo-listener.png)


## <a name="configure-rumba-to-access-the-bankdemo-application"></a>Настройка Rumba для доступа к приложению BankDemo

Последнее, что вам нужно сделать, это настроить 3270 сессии с помощью Rumba, эмулятор 3270. Этот шаг позволяет получить доступ к приложению BankDemo через созданного вами слушателя.

1. Из меню Windows **Start** запустите Rumba Desktop.

2. В пункте меню **Соединения** выберите **TN3270**.

3. Нажмите **Вставьте** и введите **127.0.0.1** для IP-адреса и **9024** для пользовательского порта.

4. В нижней части диалогового окна нажмите **Connect**. Появляется черный экран CICS.

5. Введите **банк** для отображения начального экрана 3270 для приложения BankDemo.

6. Для идентификатора пользователя, введите **B0001** и для пароля, введите что-нибудь. Открывается первый экран BANK20.

![Mainframe Дисплей](media/14-demo.png)
![Добро пожаловать экран Mainframe Дисплей - Rumba - Подсистемы Демонстрационный экран](media/15-demo.png)

Поздравляем! Теперь вы используете приложение CICS в Azure с помощью Micro Focus Enterprise Server.

## <a name="next-steps"></a>Дальнейшие действия

- [Запуск корпоративного сервера в контейнерах Docker на Azure](run-enterprise-server-container.md)
- [Миграция мейнфреймов - Портал](https://blogs.msdn.microsoft.com/azurecat/2018/11/16/mainframe-migration-to-azure-portal/)
- [Виртуальные машины](https://docs.microsoft.com/azure/virtual-machines/linux/overview)
- [Устранение неполадок](https://docs.microsoft.com/azure/virtual-machines/troubleshooting/)
- [Демистификация мэйнфрейма для миграции Azure](https://azure.microsoft.com/resources/demystifying-mainframe-to-azure-migration/en-us/)
