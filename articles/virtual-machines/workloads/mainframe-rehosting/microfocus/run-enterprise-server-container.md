---
title: Запуск Micro Focus Enterprise Server 4.0 в контейнере Docker на виртуальных машинах Azure
description: Повторное размещение рабочих нагрузок мэйнфреймов IBM z/OS, выполнив Micro Focus Enterprise Server в контейнере Docker на виртуальных машинах Azure.
services: virtual-machines-linux
documentationcenter: ''
author: njray
ms.author: sread
ms.date: 04/02/2019
ms.topic: article
ms.service: multiple
ms.openlocfilehash: 30d99c3f4767eb50361f7074c0d508fcf309faca
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "61488458"
---
# <a name="run-micro-focus-enterprise-server-40-in-a-docker-container-on-azure"></a>Запуск Micro Focus Enterprise Server 4.0 в контейнере Docker в Azure

При запуске Micro фокус Enterprise Server 4.0 в контейнере Docker в Azure. Этот учебник демонстрирует этот процесс. Демонстрация acctdemo CICS Windows (система управления клиента сведения) используется для Enterprise Server.

Docker добавляет переносимости и изоляции приложений. Например можно экспортировать образ Docker с одной виртуальной Машины Windows для запуска на другой, или из репозитория на сервер Windows, с помощью Docker. Образ Docker запускается в новом расположении с одинаковой конфигурацией, без необходимости устанавливать сервер предприятия. Она является частью изображения. Сведения о лицензировании по-прежнему применяются.

Руководстве устанавливается **Windows 2016 Datacenter с контейнерами** виртуальной машины (VM из Azure Marketplace). Эта виртуальная машина включает в себя **Docker 18.09.0**. Приведенные ниже показано, как развернуть контейнер, запустите его и подключитесь к ней с помощью 3270 эмулятора.

## <a name="prerequisites"></a>Технические условия

Перед началом работы ознакомьтесь с этих предварительных требований:

- Подписка Azure. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начать работу.

- Программное обеспечение Micro Focus и действительную лицензию (или пробной лицензии). Если вы являетесь действующим клиентом Micro Focus, свяжитесь с представителем Micro Focus. В противном случае [запросите пробную](https://www.microfocus.com/products/enterprise-suite/enterprise-server/trial/).

     > [!NOTE]
     > Файлы Docker демонстрации входят в состав Enterprise Server 4.0. В этом руководстве используется ent\_server\_dockerfiles\_4.0\_windows.zip. Доступ к нему из той же позиции, доступ к Enterprise Server файл установки, или перейдите к *Micro Focus* Чтобы приступить к работе.

- В документации по [Enterprise Server и Enterprise Developer](https://www.microfocus.com/documentation/enterprise-developer/#").

## <a name="create-a-vm"></a>Создание виртуальной машины

1. Защиту содержимого носителя из ent\_server\_dockerfiles\_4.0\_windows.zip файл. Защитите этот файл лицензирования ES-Docker-Prod-XXXXXXXX.mflic (необходимые для создания образов Docker).

2. Создайте виртуальную машину. Чтобы сделать это, откройте Azure портала, выберите **создать ресурс** в верхнем левом углу и фильтровать по *windows server*. В результатах выберите **Windows Server 2016 Datacenter — с контейнерами**.

     ![Результаты поиска на портале Azure](media/01-portal.png)

3. Чтобы настроить свойства для виртуальной Машины, выберите сведения об экземпляре:

    1. Выберите размер виртуальной машины. Для этого руководства, рассмотрите возможность использования **стандартный DS2\_v2** виртуальной Машины с 2 виртуальными ЦП и 7 ГБ памяти.

    2. Выберите **регион** и **группы ресурсов** вы хотите развернуть.

    3. Для **параметры доступности**, используйте параметр по умолчанию.

    4. Для **Username**, введите учетную запись администратора, вы хотите использовать и пароль.

    5. Убедитесь, что **порт 3389 RDP** открыт. Только этот порт должен быть открытым, чтобы вы могли входить на виртуальную машину. Затем примите все значения по умолчанию и нажмите кнопку **проверки + создать**.

     ![Создание области виртуальной машины](media/container-02.png)

4. Дождитесь завершения (несколько минут) развертывания. Появится сообщение о создания виртуальной Машины.

5. Нажмите кнопку **перейти к ресурсу** к **Обзор** колонка для виртуальной Машины.

6. Справа, щелкните **Connect** кнопки. **Подключиться к виртуальной машине** параметры отображаются в правой части.

7. Нажмите кнопку **загрузить RDP-файл** кнопку, чтобы скачать RDP-файл, который позволяет присоединить к виртуальной Машине.

8. После завершения загрузки файла откройте его и введите имя пользователя и пароль, созданный для виртуальной Машины.

     > [!NOTE]
     > Не используйте корпоративные учетные данные для входа. (Клиент RDP предполагается, что вы можете использовать их. Нет.)

9.  Выберите **другие условия**, затем выберите учетные данные виртуальной Машины.

На этом этапе виртуальная машина будет запущен и подключенных по протоколу RDP. Вы вошли в и готова к следующему шагу.

## <a name="create-a-sandbox-directory-and-upload-the-zip-file"></a>Создайте каталог "песочницы" и отправьте ZIP-файл

1.  Создайте каталог на виртуальной Машине, где можно отправить файлы демонстрационной или лицензии. Например **C:\\"песочницы"** .

2.  Отправка **ent\_server\_dockerfiles\_4.0\_windows.zip** и **ES-Docker-Prod-XXXXXXXX.mflic** файл в каталог, который вы создали.

3.  Извлеките содержимое ZIP-файл для **ent\_server\_dockerfiles\_4.0\_windows** каталог, созданный в процесс извлечения. Эта папка содержит файл сведений (как .html и txt-файл) и двумя подкаталогами **EnterpriseServer** и **примеры**.

4.  Копировать **ES-Docker-Prod-XXXXXXXX.mflic** на диск c:\\"песочницы"\\ent\_server\_dockerfiles\_4.0\_windows\\ EnterpriseServer и C:\\"песочницы"\\ent\_server\_dockerfiles\_4.0\_windows\\примеры\\CICS каталоги.

> [!NOTE]
> Убедитесь, что копировании лицензирования файла в обоих каталогах. Они необходимы для шага сборки Docker, чтобы убедиться в том, что располагаете надлежащими лицензиями изображения.

## <a name="check-docker-version-and-create-base-image"></a>Проверьте версию Docker и создание базового образа

> [!IMPORTANT]
> Создание подходящий образ Docker — это двухэтапный процесс. Во-первых Создайте базовый образ Enterprise Server 4.0. Затем создайте другое изображение для x64 платформы. Несмотря на то, что можно создать x86 32-разрядная версия образа, используйте 64-разрядный образ.

1. Откройте окно командной строки.

2. Проверьте, что Docker установлен. В командной строке выполните следующую команду:

    ```
        docker version
    ```

     Например версия была 18.09.0, когда это было записано.

3. Чтобы изменить каталог, введите **\Sandbox\ent_server_dockerfiles_4.0_windows\EnterpriseServer компакт-диска**.

4. Тип **bld.bat IacceptEULA** чтобы начать процесс построения для начальной базового образа. Подождите несколько минут запустить этот процесс. В результатах будут созданы два изображений, обратите внимание, что — один для x64 и один для x86:

     ![Окно командной строки, показывающий образов](media/container-04.png)

5. Чтобы создать итоговый образ для демонстрации CICS, перейдите в каталог CICS, введя **компакт-диска\\"песочницы"\\ent\_server\_dockerfiles\_4.0\_windows\\ Примеры\\CICS**.

6. Чтобы создать образ, введите **bld.bat x64**. Подождите несколько минут для запуска процесса и сообщение о том, что был создан образ.

7. Тип **образов docker** для отображения списка всех образов Docker, установлены на виртуальной Машине. Убедитесь, что **microfocus/es-acctdemo** — один из них.

     ![Командное окно, показывающая изображение es acctdemo](media/container-05.png)

## <a name="run-the-image"></a>Запуск образа 

1.  Чтобы запустить Enterprise Server 4.0 и acctdemo приложения, в командной строке введите:

    ```
         docker run -p 16002:86/tcp -p 16002:86/udp -p 9040-9050:9040-9050 -p 9000-9010:9000-9010 -ti --network="nat" --rm microfocus/es-acctdemo:win_4.0_x64
    ```

2.  Установка эмулятора терминала 3270, такие как [x3270](http://x3270.bgp.nu/) и использовать для присоединения, через порт 9040, в образ, на котором выполняется.

3.  Получите IP-адрес контейнера acctdemo, поэтому Docker может выступать в качестве DHCP-сервера для контейнеров, с которыми она управляет:

    1.  Получите идентификатор запущенного контейнера. Тип **Docker ps** командной строки и запишите идентификатор (**22a0fe3159d0** в этом примере). Сохраните его для следующего шага.

    2.  Чтобы получить IP-адрес для контейнера acctdemo, используйте идентификатор контейнера из предыдущего шага следующим образом:

    ```
       docker inspect <containerID> --format="{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}"
    ```

       Пример:

    ```   
        docker inspect 22a0fe3159d0 --format="{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}"
    ```
4. Обратите внимание, IP-адрес для изображения acctdemo. Например адрес в следующем выводе — 172.19.202.52.

     ![Окно командной строки с IP-адресом](media/container-06.png)

5. Подключите образ с помощью эмулятора. Настройка эмулятора для использования адреса acctdemo образа и порт 9040. Здесь, он имеет **172.19.202.52:9040**. Вам будет выглядеть так. **Единого входа для CICS** откроется экран.

    ![Испытать CICS экран](media/container-07.png)

6. Выполните вход область CICS, указав **SYSAD** для **USERID** и **SYSAD** для **пароль**.

7. Очистку экрана, используя раскладку эмулятора. X3270, выберите **клавиатурах** пункт меню.

8. Чтобы запустить приложение acctdemo, введите **ACCT**. Начальный экран для приложения отображается.

     ![Экран демонстрационной учетной записи](media/container-08.png)

9. Поэкспериментируйте с типами счетов, отображения. Например, введите **D** для запроса и **11111** для **учетной записи**. Другие номера счетов, чтобы повторить: 22222, 33333 и т. д.

     ![Экран демонстрационной учетной записи](media/container-09.png)

10. Для отображения консоли администрирования сервера предприятия, перейдите в командную строку и введите **запустить http:172.19.202.52:86**

     ![Консоль администрирования Enterprise Server](media/container-010.png)

Вот и все! Теперь вы под управлением и управлению приложениями CICS в контейнере Docker.

## <a name="next-steps"></a>Дальнейшие действия

- [Установка Micro Focus Enterprise Server 4.0 и Enterprise Developer 4.0 в Azure](./set-up-micro-focus-azure.md)
- [Перенос приложений с мейнфреймов](/azure/architecture/cloud-adoption/infrastructure/mainframe-migration/application-strategies)
