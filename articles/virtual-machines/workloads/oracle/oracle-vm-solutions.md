---
title: Решения Oracle на виртуальных машинах Azure Документы Майкрософт
description: Узнайте о поддерживаемых конфигурациях и ограничениях изображений виртуальных машин Oracle в Microsoft Azure.
services: virtual-machines-linux
documentationcenter: ''
author: BorisB2015
manager: gwallace
tags: azure-resource-management
ms.assetid: ''
ms.service: virtual-machines-windows
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 05/23/2019
ms.author: borisb
ms.openlocfilehash: 0cee7c25960d567c75a14d8ad9ef95b3e7221862
ms.sourcegitcommit: acb82fc770128234f2e9222939826e3ade3a2a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81683414"
---
# <a name="oracle-vm-images-and-their-deployment-on-microsoft-azure"></a>Изображения Oracle VM и их развертывание в Microsoft Azure

В этой статье представлена информация о решениях Oracle на основе виртуальных машинных изображений, опубликованных Oracle в Azure Marketplace. Если вы заинтересованы в кросс-облачных решениях приложений с Oracle Cloud Infrastructure, см. [решения приложений Oracle, объединяющие Microsoft Azure и облачную инфраструктуру Oracle.](oracle-oci-overview.md)

Чтобы получить список доступных образов, выполните следующую команду:

```azurecli-interactive
az vm image list --publisher oracle -o table --all
```

По состоянию на май 2019 года доступны следующие изображения:

```bash
Offer                   Publisher    Sku                     Urn                                                          Version
----------------------  -----------  ----------------------  -----------------------------------------------------------  -------------
Oracle-Database-Ee      Oracle       12.1.0.2                Oracle:Oracle-Database-Ee:12.1.0.2:12.1.20170220             12.1.20170220
Oracle-Database-Ee      Oracle       12.2.0.1                Oracle:Oracle-Database-Ee:12.2.0.1:12.2.20180725             12.2.20180725
Oracle-Database-Ee      Oracle       18.3.0.0                Oracle:Oracle-Database-Ee:18.3.0.0:18.3.20181213             18.3.20181213
Oracle-Database-Se      Oracle       12.1.0.2                Oracle:Oracle-Database-Se:12.1.0.2:12.1.20170220             12.1.20170220
Oracle-Database-Se      Oracle       12.2.0.1                Oracle:Oracle-Database-Se:12.2.0.1:12.2.20180725             12.2.20180725
Oracle-Database-Se      Oracle       18.3.0.0                Oracle:Oracle-Database-Se:18.3.0.0:18.3.20181213             18.3.20181213
Oracle-Linux            Oracle       6.10                    Oracle:Oracle-Linux:6.10:6.10.20190506                       6.10.20190506
Oracle-Linux            Oracle       6.8                     Oracle:Oracle-Linux:6.8:6.8.20190506                         6.8.20190506
Oracle-Linux            Oracle       6.9                     Oracle:Oracle-Linux:6.9:6.9.20190506                         6.9.20190506
Oracle-Linux            Oracle       7.3                     Oracle:Oracle-Linux:7.3:7.3.20190506                         7.3.20190506
Oracle-Linux            Oracle       7.4                     Oracle:Oracle-Linux:7.4:7.4.20190506                         7.4.20190506
Oracle-Linux            Oracle       7.5                     Oracle:Oracle-Linux:7.5:7.5.20181207                         7.5.20181207
Oracle-Linux            Oracle       7.5                     Oracle:Oracle-Linux:7.5:7.5.20190506                         7.5.20190506
Oracle-Linux            Oracle       7.6                     Oracle:Oracle-Linux:7.6:7.6.20181207                         7.6.20181207
Oracle-Linux            Oracle       7.6                     Oracle:Oracle-Linux:7.6:7.6.20190506                         7.6.20190506
Oracle-WebLogic-Server  Oracle       Oracle-WebLogic-Server  Oracle:Oracle-WebLogic-Server:Oracle-WebLogic-Server:12.1.2  12.1.2
```

Это образы с использованием собственной лицензии, а значит вы будете оплачивать только использование ресурсов вычислений и хранения, а также сетевых ресурсов, связанных с работой виртуальной машины.  Вы должны иметь соответствующую лицензию на использование программного обеспечения Oracle, а также соглашение о текущей поддержке. Oracle гарантирует перемещение лицензий из локальной среды в Azure. Ознакомьтесь с опубликованным примечанием [Oracle и Майкрософт](https://www.oracle.com/technetwork/topics/cloud/faq-1963009.html) о перемещении лицензий. 

Пользователи могут также разрабатывать свои решения на основе пользовательского образа, созданных с нуля в Azure, или передать пользовательский образ из своей локальной среды.

## <a name="oracle-database-vm-images"></a>Изображения VM базы данных Oracle
Oracle поддерживает запуск Oracle Database 12.1 и более высокие стандартные и корпоративные издания в Azure на виртуальных машинных изображениях на основе Oracle Linux.  Для достижения наилучшей производительности для производственных нагрузок базы данных Oracle на Azure убедитесь в том, что необходимо правильно размерировать изображение VM и использовать управляемые диски Premium SSD или Ultra SSD. Для получения инструкций о том, как быстро запустить базу данных Oracle в Azure с помощью опубликованного Изображения VM Oracle, [попробуйте пошаговое руководство Oracle Database.](oracle-database-quick-create.md)

### <a name="attached-disk-configuration-options"></a>Варианты конфигурации подключенного диска

Подключенные диски используют службу хранилища больших двоичных объектов Azure. Теоретически каждый диск уровня "Стандартный" способен выполнять максимум около 500 операций ввода-вывода в секунду (IOPS). Наше предложение с дисками уровня "Премиум", которое предпочтительно использовать для высокопроизводительных рабочих нагрузок базы данных, может обеспечивать до 5000 операций ввода-вывода в секунду на диск. Вы можете использовать один диск, если это отвечает вашим потребностям в производительности. Тем не менее, вы можете улучшить эффективную производительность IOPS, если вы используете несколько прикрепленных дисков, распределяете данные базы данных по ним, а затем используете Oracle Автоматическое управление хранением данных (ASM). Дополнительные сведения об Oracle ASM см. в обзоре [Oracle Automatic Storage](https://www.oracle.com/technetwork/database/index-100339.html). Например, как установить и настроить Oracle ASM на Linux Azure VM, см. [Installing and Configuring Oracle Automated Storage Management](configure-oracle-asm.md)

### <a name="shared-storage-configuration-options"></a>Общие параметры конфигурации хранилища

Azure NetApp Files был разработан для удовлетворения основных требований выполнения высокопроизводительных рабочих нагрузок, таких как базы данных в облаке, и предоставляет;
- Родной Azure поделился nFS-сервисом хранения данных для выполнения рабочих нагрузок Oracle либо через родной nFS-клиент VM, либо Oracle dNFS
- Масштабируемые уровни производительности, отражающие реальный диапазон требований IOPS
- Низкая задержка при доступе к данным
- Высокая доступность, высокая долговечность и управляемость в масштабе, как правило, требуемые критически важные корпоративные нагрузки (например, SAP и Oracle)
- Быстрая и эффективная резервная и восстановительной, для достижения наиболее агрессивных RTO и RPO SLA

Эти возможности возможны благодаря тем, что файлы Azure NetApp основаны на NetApp® ONTAP® все флэш-системы, работающие в среде центра обработки данных Azure , как служба Native Azure. Результатом является идеальная технология хранения данных, которая может быть подготовлена и использована так же, как и другие варианты хранения Azure. Дополнительную информацию о томах NFS NFS можно получить в [документации Azure NetApp Files.](https://docs.microsoft.com/azure/azure-netapp-files/) См. [Руководство Oracle по передовой практике по развертыванию Azure, использующее файлы Azure NetApp,](https://www.netapp.com/us/media/tr-4780.pdf) для рекомендаций по наилучшей практике для работы с базой данных Oracle в файлах NetApp Azure.


## <a name="licensing-oracle-database--software-on-azure"></a>Лицензирование oracle Database & программного обеспечения на Azure
Microsoft Azure — авторизованная облачная среда для запуска базы данных Oracle. Таблица Oracle Core Factor не применима при лицензировании баз данных Oracle в облаке. Вместо этого при использовании VMs с технологией Hyper-Threading, включенной для баз данных Enterprise Edition, подсчитайте два vCPUs как эквивалентные одной лицензии Oracle Processor, если включена гиперпотирование (как указано в документе политики). Детали политики можно найти [здесь](http://www.oracle.com/us/corporate/pricing/cloud-licensing-070579.pdf).
Базы данных Oracle обычно требуют более высокой памяти и истогового явки. По этой причине для этих рабочих нагрузок рекомендуется использовать [оптимизированные для памяти vM.](https://docs.microsoft.com/azure/virtual-machines/linux/sizes-memory) Для дальнейшей оптимизации рабочих нагрузок рекомендуется [для](https://docs.microsoft.com/azure/virtual-machines/linux/constrained-vcpu) рабочих нагрузок Oracle Database, требующих высокой памяти, хранения и пропускной способности, но не высокого количества яговок.

При миграции программного обеспечения и рабочих нагрузок Oracle из наемных помещений в Microsoft Azure Oracle обеспечивает мобильность лицензий, как указано в [Oracle на часто задаваемых вопросов Azure](https://www.oracle.com/cloud/technologies/oracle-azure-faq.html)


## <a name="oracle-real-application-cluster-oracle-rac"></a>Решение Oracle Real Application Clusters (RAC)
Oracle Real Application Cluster (Oracle RAC) предназначен для смягчения сбоя одного узла в конфигурации кластера с несколькими узлами. В нем используются две локальные технологии, которые не включены в такие крупномасштабные общедоступные облачные среды, как передача многоадресных пакетов в сети и общий диск. Если для решения базы данных Oracle RAC в Azure требуется стороннее программное обеспечение для включения этих технологий. Для получения дополнительной информации [FlashGrid SkyCluster page](https://www.flashgrid.io/oracle-rac-in-azure/)о Oracle RAC, см.

## <a name="high-availability-and-disaster-recovery-considerations"></a>Рекомендации по высокой доступности и аварийному восстановлению
При использовании баз данных Oracle в Azure вы несете ответственность за внедрение решения для высокой доступности и аварийного восстановления, чтобы избежать простоев. 

Высокая доступность и аварийное восстановление Oracle Database Enterprise Edition (без опоры на Oracle RAC) может быть достигнуто на Azure с помощью [Data Guard, Active Data Guard](https://www.oracle.com/database/technologies/high-availability/dataguard.html)или Oracle [GoldenGate](https://www.oracle.com/technetwork/middleware/goldengate), с двумя базами данных на двух отдельных виртуальных машинах. Обе виртуальные машины должны находиться в одной [виртуальной сети](https://azure.microsoft.com/documentation/services/virtual-network/), чтобы они могли обращаться друг к другу через постоянный частный IP-адрес.  Кроме того, рекомендуется размещать виртуальные машины в одной группе доступности, так как это позволяет Azure помещать их в отдельные домены сбоя и домены обновления. Если вы хотите иметь гео-избыточность, навяжьте две базы данных, чтобы воспроизвести между двумя различными регионами и соединить два экземпляра с VPN Gateway.

Учебник [Implement Oracle Data Guard на Azure](configure-oracle-dataguard.md) провеёт вас через основную процедуру настройки на Azure.  

При использовании Oracle Data Guard высокую доступность можно обеспечить, разместив базу данных источника в одной виртуальной машине и базу данных получателя (резервную) в другой виртуальной машине и настроив одностороннюю репликацию между ними. В результате можно получить доступ на чтение к копии базы данных. При использовании Oracle GoldenGate можно настроить двунаправленную репликацию между двумя базами данных. Дополнительные сведения о настройке высокой доступности для баз данных с помощью этих инструментов см. в документации по [Active Data Guard](https://www.oracle.com/database/technologies/high-availability/dataguard.html) и [GoldenGate](https://docs.oracle.com/goldengate/1212/gg-winux/index.html) на веб-сайте Oracle. Если вам требуется получить доступ на чтение и запись к копии базы данных, ознакомьтесь с документом [Oracle Active Data Guard](https://www.oracle.com/uk/products/database/options/active-data-guard/overview/index.html).

Учебник [Implement Oracle GoldenGate на Azure](configure-oracle-golden-gate.md) провеёт вас через основную процедуру настройки на Azure.

Помимо архитектуры решения HA и DR в Azure, для восстановления базы данных необходимо иметь стратегию резервного копирования. Учебник [Резервного копирования и восстановления Oracle базы данных](oracle-backup-recovery.md) вас через основную процедуру для создания последовательного резервного копирования.


## <a name="support-for-jd-edwards"></a>Поддержка JD Edwards
Согласно примечанию поддержки Oracle [Doc ID 2178595.1](https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=573435677515785&id=2178595.1&_afrWindowMode=0&_adf.ctrl-state=o852dw7d_4), JD Edwards EnterpriseOne версии `Minimum Technical Requirements` 9.2 и выше поддерживаются на любом **публичном предложении облака,** которое соответствует их конкретным (MTR).  Необходимо создать пользовательские образы, соответствующие минимальным техническим требованиям к операционной системе и к совместимости с программными приложениями. 


## <a name="oracle-weblogic-server-virtual-machine-images"></a>Образы виртуальных машин Oracle WebLogic Server

* **Кластеризация поддерживается только в выпуске Enterprise Edition.** Вы имеете лицензию на использование кластеризации WebLogic только при использовании корпоративного издания Oracle WebLogic Server. Не используйте кластеризм с Oracle WebLogic Server Standard Edition.
* **Не поддерживается многоадресная рассылка по UDP.**  Azure поддерживает одноадресную рассылку по UDP, но не поддерживает ни многоадресную, ни широковещательную рассылку. Oracle WebLogic Server может полагаться на возможности Unicast Azure UDP. Для достижения наилучших результатов, опирающихся на unicast UDP, мы рекомендуем, чтобы размер кластера WebLogic оставался статичным или содержал не более 10 управляемых серверов.
* **Oracle WebLogic Server ожидает, что государственные и частные порты будут одинаковыми для доступа T3 (например, при использовании Enterprise JavaBeans).** Рассмотрим многоуровневый сценарий, в котором приложение такого уровня (EJB) работает в кластере Oracle WebLogic Server, состоящем из двух или более виртуальных виртуальных технологий, в виртуальной сети под названием *SLWLS.* Клиентский уровень находится в другой подсети в той же виртуальной сети, запустив простую Java-программу, пытаясь вызвать EJB в сервисном слое. Поскольку необходимо загрузить баланс уровня обслуживания, необходимо создать общедоступную конечную точку для виртуальных машин в кластере Oracle WebLogic Server. Если заданный частный порт отличается от общедоступного порта (например, 7006:7008), появится следующая ошибка:

       [java] javax.naming.CommunicationException [Root exception is java.net.ConnectException: t3://example.cloudapp.net:7006:

       Bootstrap to: example.cloudapp.net/138.91.142.178:7006' over: 't3' got an error or timed out]

   Это связано с тем, что для любого удаленного доступа T3 Oracle WebLogic Server ожидает, что порт балансов нагрузки и порт серверов с управлением WebLogic будут одинаковыми. В предыдущем примере клиент обращается к порту 7006 (порт балансировки нагрузки), а управляемый сервер прослушивает порт 7008 (частный порт). Это ограничение применяется только для доступа к каналу T3, а не к HTTP.

   Чтобы избежать этой проблемы, используйте одно из следующих решений:

  * Используйте частные и общие порты с одинаковыми номерами для конечных точек с балансировкой нагрузки, выделенных для получения доступа к каналу T3.
  * Включите следующий параметр JVM при запуске Oracle WebLogic Server:

    ```
    -Dweblogic.rjvm.enableprotocolswitch=true
    ```

Связанные сведения доступны в статье базы знаний **860340.1** по адресу: <https://support.oracle.com>.

* **Ограничения для динамической кластеризации и балансировки нагрузки.** Предположим, что вы хотите использовать динамический кластер в Oracle WebLogic Server и провести его через единую, сбалансированную на нагрузку конечную точку в Azure. Это может быть сделано до тех пор, пока вы используете фиксированный номер порта для каждого из управляемых серверов (не динамически назначенных из диапазона) и не запускать больше управляемых серверов, чем есть машины, которые отслеживает администратор. То есть на виртуальную машину не более одного управляемого сервера). Если ваша конфигурация приводит к тому, что запускается больше серверов Oracle WebLogic, чем виртуальных машин (т.е. в тех случаях, когда несколько экземпляров Oracle WebLogic Server имеют один и тот же виртуальный компьютер), то более чем в одном из этих экземпляров серверов Oracle WebLogic серверов невозможно привязаться к данному номеру порта. Другие на этой виртуальной машине терпят неудачу.

   Если настроить сервер администратора таким образом, чтобы управляемым серверам автоматически назначались уникальные номера портов, то будет невозможна балансировка нагрузки, так как Azure не поддерживает сопоставление одного общедоступного порта с несколькими частными портами, которое потребовалось бы для этой конфигурации.
* **Несколько экземпляров Oracle WebLogic Server на виртуальной машине.** В зависимости от требований развертывания можно запустить несколько экземпляров Oracle WebLogic Server на одной виртуальной машине, если виртуальная машина достаточно велика. Например, на виртуальной машине среднего размера, которая содержит два ядра, можно запустить два экземпляра Oracle WebLogic Server. Тем не менее, мы по-прежнему рекомендуем не вводить в архитектуру отдельные точки сбоя, что было бы так, если бы вы использовали только одну виртуальную машину, которая работает в нескольких экземплярах Oracle WebLogic Server. Использование по крайней мере двух виртуальных машин может быть лучшим подходом, и каждая виртуальная машина может запустить несколько экземпляров Oracle WebLogic Server. Каждый экземпляр Oracle WebLogic Server все еще может быть частью одного кластера. Однако в настоящее время невозможно использовать Azure для балансировки конечных точек загрузки и баланса, которые подвергаются таким развертываниям Oracle WebLogic Server в одной виртуальной машине, поскольку балансизатор нагрузки Azure требует распределения сбалансированных серверов между уникальными виртуальными машинами.

## <a name="oracle-jdk-virtual-machine-images"></a>Образы виртуальных машин JDK для Oracle
* **Последние обновления JDK 6 и 7.**  Хотя мы советуем использовать последнюю общедоступную поддерживаемую версию Java (на данный момент это Java 8), в Azure также доступны образы JDK 6 и 7. Они предназначены для устаревших приложений, которые еще невозможно обновить до версии JDK 8. Хотя обновления для предыдущих образов JDK могут быть уже недоступными, благодаря сотрудничеству корпорации Майкрософт и компании Oracle образы JDK 6 и 7, предоставляемые Azure, будут содержать более свежее частное обновление, которое обычно предоставляется только избранной группе клиентов, поддерживаемых Oracle. Новые версии образов JDK, а также обновленные версии JDK 6 и 7 будут доступны со временем.

   JDK, доступный в изображениях JDK 6 и 7, а также виртуальные машины и изображения, полученные из них, могут использоваться только в Azure.
* **64-разрядный JDK.**  Образы виртуальных машин Oracle WebLogic Server и Oracle JDK, предоставляемые Azure, содержат 64-разрядные версии Windows Server и JDK.

## <a name="next-steps"></a>Следующие шаги
Теперь у вас есть обзор текущих решений Oracle, основанных на виртуальных машинных изображениях в Microsoft Azure. Следующим шагом является развертывание первой базы данных Oracle в Azure.

> [!div class="nextstepaction"]
> [Создание базы данных Oracle на Azure](oracle-database-quick-create.md)
