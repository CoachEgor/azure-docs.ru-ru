---
title: Решения Oracle на виртуальных машинах Azure | Документация Майкрософт
description: Узнайте о поддерживаемых конфигурациях и ограничениях образов виртуальных машин Oracle на Microsoft Azure.
services: virtual-machines-linux
documentationcenter: ''
author: BorisB2015
manager: gwallace
tags: azure-resource-management
ms.assetid: ''
ms.service: virtual-machines-windows
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 05/23/2019
ms.author: borisb
ms.openlocfilehash: 0cee7c25960d567c75a14d8ad9ef95b3e7221862
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "81683414"
---
# <a name="oracle-vm-images-and-their-deployment-on-microsoft-azure"></a>Образы виртуальных машин Oracle и их развертывание на Microsoft Azure

В этой статье содержатся сведения о решениях Oracle, основанных на образах виртуальных машин, опубликованных Oracle в Azure Marketplace. Если вы заинтересованы в решениях по кросс-облачным приложениям с помощью облачной инфраструктуры Oracle, см. раздел [Oracle Application Solutions интеграция Microsoft Azure и Oracle Cloud Infrastructure](oracle-oci-overview.md).

Чтобы получить список доступных образов, выполните следующую команду:

```azurecli-interactive
az vm image list --publisher oracle -o table --all
```

Начиная с мая 2019 доступны следующие образы:

```bash
Offer                   Publisher    Sku                     Urn                                                          Version
----------------------  -----------  ----------------------  -----------------------------------------------------------  -------------
Oracle-Database-Ee      Oracle       12.1.0.2                Oracle:Oracle-Database-Ee:12.1.0.2:12.1.20170220             12.1.20170220
Oracle-Database-Ee      Oracle       12.2.0.1                Oracle:Oracle-Database-Ee:12.2.0.1:12.2.20180725             12.2.20180725
Oracle-Database-Ee      Oracle       18.3.0.0                Oracle:Oracle-Database-Ee:18.3.0.0:18.3.20181213             18.3.20181213
Oracle-Database-Se      Oracle       12.1.0.2                Oracle:Oracle-Database-Se:12.1.0.2:12.1.20170220             12.1.20170220
Oracle-Database-Se      Oracle       12.2.0.1                Oracle:Oracle-Database-Se:12.2.0.1:12.2.20180725             12.2.20180725
Oracle-Database-Se      Oracle       18.3.0.0                Oracle:Oracle-Database-Se:18.3.0.0:18.3.20181213             18.3.20181213
Oracle-Linux            Oracle       6.10                    Oracle:Oracle-Linux:6.10:6.10.20190506                       6.10.20190506
Oracle-Linux            Oracle       6.8                     Oracle:Oracle-Linux:6.8:6.8.20190506                         6.8.20190506
Oracle-Linux            Oracle       6.9                     Oracle:Oracle-Linux:6.9:6.9.20190506                         6.9.20190506
Oracle-Linux            Oracle       7.3                     Oracle:Oracle-Linux:7.3:7.3.20190506                         7.3.20190506
Oracle-Linux            Oracle       7.4                     Oracle:Oracle-Linux:7.4:7.4.20190506                         7.4.20190506
Oracle-Linux            Oracle       7.5                     Oracle:Oracle-Linux:7.5:7.5.20181207                         7.5.20181207
Oracle-Linux            Oracle       7.5                     Oracle:Oracle-Linux:7.5:7.5.20190506                         7.5.20190506
Oracle-Linux            Oracle       7.6                     Oracle:Oracle-Linux:7.6:7.6.20181207                         7.6.20181207
Oracle-Linux            Oracle       7.6                     Oracle:Oracle-Linux:7.6:7.6.20190506                         7.6.20190506
Oracle-WebLogic-Server  Oracle       Oracle-WebLogic-Server  Oracle:Oracle-WebLogic-Server:Oracle-WebLogic-Server:12.1.2  12.1.2
```

Это образы с использованием собственной лицензии, а значит вы будете оплачивать только использование ресурсов вычислений и хранения, а также сетевых ресурсов, связанных с работой виртуальной машины.  Вы должны иметь соответствующую лицензию на использование программного обеспечения Oracle, а также соглашение о текущей поддержке. Oracle гарантирует перемещение лицензий из локальной среды в Azure. Ознакомьтесь с опубликованным примечанием [Oracle и Майкрософт](https://www.oracle.com/technetwork/topics/cloud/faq-1963009.html) о перемещении лицензий. 

Пользователи могут также разрабатывать свои решения на основе пользовательского образа, созданных с нуля в Azure, или передать пользовательский образ из своей локальной среды.

## <a name="oracle-database-vm-images"></a>Образы виртуальной машины базы данных Oracle
Oracle поддерживает запуск Oracle Database 12,1 и более поздних версий Standard и Enterprise в Azure в образах виртуальных машин на основе Oracle Linux.  Чтобы обеспечить оптимальную производительность рабочих нагрузок Oracle Database в Azure, необходимо правильно указать размер образа виртуальной машины и использовать SSD (цен. категория "Премиум") или управляемые диски SSD (цен. категория "Ультра"). Инструкции по быстрому запуску Oracle Database в Azure с помощью образа опубликованной виртуальной машины Oracle см. в кратком [руководстве по Oracle Database](oracle-database-quick-create.md).

### <a name="attached-disk-configuration-options"></a>Варианты конфигурации подключенного диска

Подключенные диски используют службу хранилища больших двоичных объектов Azure. Теоретически каждый диск уровня "Стандартный" способен выполнять максимум около 500 операций ввода-вывода в секунду (IOPS). Наше предложение с дисками уровня "Премиум", которое предпочтительно использовать для высокопроизводительных рабочих нагрузок базы данных, может обеспечивать до 5000 операций ввода-вывода в секунду на диск. Вы можете использовать один диск, если он отвечает вашим требованиям к производительности. Однако можно повысить эффективность операций ввода-вывода в секунду, если использовать несколько подключенных дисков, распределить между ними данные базы данных, а затем использовать автоматическое управление хранилищем (ASM) Oracle. Дополнительные сведения об Oracle ASM см. в обзоре [Oracle Automatic Storage](https://www.oracle.com/technetwork/database/index-100339.html). Пример установки и настройки Oracle ASM на виртуальной машине Linux в Azure см. в руководстве по [установке и настройке автоматического управления хранилищем Oracle](configure-oracle-asm.md) .

### <a name="shared-storage-configuration-options"></a>Параметры конфигурации общего хранилища

Azure NetApp Files была разработана в соответствии с основными требованиями к запуску высокопроизводительных рабочих нагрузок, таких как базы данных в облаке, и предоставляет.
- Собственная общая служба хранилища NFS Azure для выполнения рабочих нагрузок Oracle с помощью машинного клиента NFS или Oracle Днфс
- Масштабируемые уровни производительности, отражающие реальные требования к объему операций ввода-вывода в секунду
- Низкая задержка при доступе к данным
- Высокая доступность, высокая устойчивость и управляемость в масштабе, обычно требования к критически важным корпоративным рабочим нагрузкам (например, SAP и Oracle)
- Быстрое и эффективное резервное копирование и восстановление для достижения наиболее агрессивного соглашения об уровне обслуживания RTO и RPO

Это возможно, так как Azure NetApp Files основан на NetApp® ONTAP® все-Flash системы, работающие в среде центра обработки данных Azure — в качестве собственной службы Azure. Результатом является идеальная технология хранения базы данных, которую можно подготовить и использовать так же, как и другие варианты службы хранилища Azure. Дополнительные сведения о развертывании и доступе к томам Azure NetApp Files NFS см. в [Azure NetApp Files документации](https://docs.microsoft.com/azure/azure-netapp-files/) . Рекомендации по работе с базой данных Oracle на Azure NetApp Files см. [в статье рекомендации по развертыванию Oracle в Azure с помощью Azure NetApp Files](https://www.netapp.com/us/media/tr-4780.pdf) .


## <a name="licensing-oracle-database--software-on-azure"></a>Лицензирование Oracle Database & программного обеспечения в Azure
Microsoft Azure является полномочной облачной средой для запуска Oracle Database. Таблица коэффициентов Oracle Core неприменима при лицензировании баз данных Oracle в облаке. Вместо этого при использовании виртуальных машин с включенной технологией Hyper-Threading для баз данных выпуска Enterprise Edition подсчитайте две виртуальных ЦП как эквивалентные одной лицензии на процессор Oracle, если для нее включено создание потоков (как указано в документе политики). Сведения о политике можно найти [здесь](http://www.oracle.com/us/corporate/pricing/cloud-licensing-070579.pdf).
Для баз данных Oracle обычно требуются более высокие объемы памяти и операций ввода-вывода. По этой причине для этих рабочих нагрузок рекомендуется использовать [оптимизированные для памяти виртуальные машины](https://docs.microsoft.com/azure/virtual-machines/linux/sizes-memory) . Для дальнейшей оптимизации рабочих нагрузок рекомендуется использовать [ограниченный базовый виртуальных ЦП](https://docs.microsoft.com/azure/virtual-machines/linux/constrained-vcpu) для Oracle Database рабочих нагрузок, требующих высокой памяти, хранилища и пропускной способности ввода-вывода, но не высокоядерных счетчиков.

При переносе программного обеспечения и рабочих нагрузок Oracle из локальной среды в Microsoft Azure Oracle обеспечивает мобильность лицензий, как указано в статье [вопросы и ответы по Oracle в Azure](https://www.oracle.com/cloud/technologies/oracle-azure-faq.html) .


## <a name="oracle-real-application-cluster-oracle-rac"></a>Решение Oracle Real Application Clusters (RAC)
Кластер реальных приложений Oracle (Oracle RAC) предназначен для устранения сбоя одного узла в локальной конфигурации кластера с несколькими узлами. В нем используются две локальные технологии, которые не включены в такие крупномасштабные общедоступные облачные среды, как передача многоадресных пакетов в сети и общий диск. Если для решения вашей базы данных требуется Azure RAC, то для включения этих технологий требуется третье программное обеспечение. Дополнительные сведения о базе данных RAC Oracle см. на [странице FlashGrid скиклустер](https://www.flashgrid.io/oracle-rac-in-azure/).

## <a name="high-availability-and-disaster-recovery-considerations"></a>Рекомендации по высокой доступности и аварийному восстановлению
При использовании баз данных Oracle в Azure вы несете ответственность за реализацию решения высокого уровня доступности и аварийного восстановления, чтобы избежать простоев. 

Высокая доступность и аварийное восстановление для Oracle Database Enterprise Edition (без использования сертификата RAC Oracle) можно достичь в Azure с помощью [Data Guard, Active Data Guard](https://www.oracle.com/database/technologies/high-availability/dataguard.html)или [Oracle GoldenGate](https://www.oracle.com/technetwork/middleware/goldengate)с двумя базами данных на двух отдельных виртуальных машинах. Обе виртуальные машины должны находиться в одной [виртуальной сети](https://azure.microsoft.com/documentation/services/virtual-network/), чтобы они могли обращаться друг к другу через постоянный частный IP-адрес.  Кроме того, рекомендуется размещать виртуальные машины в одной группе доступности, так как это позволяет Azure помещать их в отдельные домены сбоя и домены обновления. Если вы хотите использовать геоизбыточность, настройте две базы данных для репликации между двумя разными регионами и подключите два экземпляра с помощью VPN-шлюза.

В учебнике [Реализация Oracle Data Guard в Azure](configure-oracle-dataguard.md) описана базовая процедура установки в Azure.  

При использовании Oracle Data Guard высокую доступность можно обеспечить, разместив базу данных источника в одной виртуальной машине и базу данных получателя (резервную) в другой виртуальной машине и настроив одностороннюю репликацию между ними. В результате можно получить доступ на чтение к копии базы данных. При использовании Oracle GoldenGate можно настроить двунаправленную репликацию между двумя базами данных. Дополнительные сведения о настройке высокой доступности для баз данных с помощью этих инструментов см. в документации по [Active Data Guard](https://www.oracle.com/database/technologies/high-availability/dataguard.html) и [GoldenGate](https://docs.oracle.com/goldengate/1212/gg-winux/index.html) на веб-сайте Oracle. Если вам требуется получить доступ на чтение и запись к копии базы данных, ознакомьтесь с документом [Oracle Active Data Guard](https://www.oracle.com/uk/products/database/options/active-data-guard/overview/index.html).

В руководстве по [реализации Oracle GoldenGate в Azure](configure-oracle-golden-gate.md) описана базовая процедура установки в Azure.

Помимо решения высокой доступности и аварийного восстановления, разработанного в Azure, у вас должна быть стратегия резервного копирования для восстановления базы данных. В руководстве по [резервному копированию и восстановлению Oracle Database](oracle-backup-recovery.md) описана основная процедура установки единообразного резервного копирования.


## <a name="support-for-jd-edwards"></a>Поддержка JD Edwards
В соответствии с заметкой о поддержке Oracle [идентификатор документа 2178595,1](https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=573435677515785&id=2178595.1&_afrWindowMode=0&_adf.ctrl-state=o852dw7d_4), JD Edwards EnterpriseOne versions 9,2 и более поздних версий поддерживается в **любых предложениях общедоступного облака** , которые соответствуют их конкретным `Minimum Technical Requirements` (MTR).  Необходимо создать пользовательские образы, соответствующие минимальным техническим требованиям к операционной системе и к совместимости с программными приложениями. 


## <a name="oracle-weblogic-server-virtual-machine-images"></a>Образы виртуальных машин Oracle WebLogic Server

* **Кластеризация поддерживается только в выпуске Enterprise Edition.** Вы имеете лицензию на использование кластеризации на основе платформы только при использовании выпуска Enterprise Edition сервера Oracle. Не используйте кластеризацию с Oracle WebLogic Server Standard Edition.
* **Не поддерживается многоадресная рассылка по UDP.**  Azure поддерживает одноадресную рассылку по UDP, но не поддерживает ни многоадресную, ни широковещательную рассылку. Сервер Microsoft Logic в Oracle может полагаться на возможности одноадресной рассылки Azure UDP. Для получения наилучших результатов, использующих одноадресную передачу по протоколу UDP, рекомендуется хранить статический кластер или хранить его не более чем на 10 управляемых серверах.
* **Сервер Microsoft для логики Oracle ожидает, что общедоступные и частные порты будут одинаковыми для доступа к T3 (например, при использовании Enterprise JavaBeans).** Рассмотрим многоуровневый сценарий, в котором приложение уровня службы (EJB) выполняется в кластере серверов Oracle WebService, состоящем из двух или более виртуальных машин, в виртуальной сети с именем *SLWLS*. Клиентский уровень находится в другой подсети в той же виртуальной сети, запуская простую программу Java, пытающуюся вызвать EJB на уровне службы. Поскольку требуется балансировка нагрузки слоя служб, необходимо создать общедоступную конечную точку с балансировкой нагрузки для виртуальных машин в кластере сервера серверной компании Oracle. Если заданный частный порт отличается от общедоступного порта (например, 7006:7008), появится следующая ошибка:

       [java] javax.naming.CommunicationException [Root exception is java.net.ConnectException: t3://example.cloudapp.net:7006:

       Bootstrap to: example.cloudapp.net/138.91.142.178:7006' over: 't3' got an error or timed out]

   Это связано с тем, что при любом удаленном доступе T3 сервер Oracle Logic ожидает, что порт подсистемы балансировки нагрузки и порт управляемого сервера внешней логики одинаковы. В предыдущем примере клиент обращается к порту 7006 (порт балансировки нагрузки), а управляемый сервер прослушивает порт 7008 (частный порт). Это ограничение применяется только для доступа к каналу T3, а не к HTTP.

   Чтобы избежать этой проблемы, используйте одно из следующих решений:

  * Используйте частные и общие порты с одинаковыми номерами для конечных точек с балансировкой нагрузки, выделенных для получения доступа к каналу T3.
  * Включите следующий параметр ВИРТУАЛЬНОЙ машины Java при запуске сервера серверной логической логики Oracle:

    ```
    -Dweblogic.rjvm.enableprotocolswitch=true
    ```

Связанные сведения доступны в статье базы знаний **860340.1** по адресу: <https://support.oracle.com>.

* **Ограничения для динамической кластеризации и балансировки нагрузки.** Предположим, что вы хотите использовать динамический кластер на сервере серверной платформы Oracle и предоставить его через единую общедоступную конечную точку с балансировкой нагрузки в Azure. Это можно сделать, если вы используете фиксированный номер порта для каждого управляемого сервера (не назначенный динамически из диапазона) и не запускаете больше управляемых серверов, чем компьютеры, отслеживаемые администратором. То есть в каждой виртуальной машине не более одного управляемого сервера. Если в конфигурации будет запущено больше серверов веб-логики Oracle, чем на виртуальных машинах (то есть если несколько экземпляров серверов Oracle веб-логики совместно используют одну и ту же виртуальную машину), то невозможно выполнить привязку более чем одного экземпляра серверов веб-логики Oracle для привязки к данному номеру порта. Остальные на этой виртуальной машине завершаются сбоем.

   Если настроить сервер администратора таким образом, чтобы управляемым серверам автоматически назначались уникальные номера портов, то будет невозможна балансировка нагрузки, так как Azure не поддерживает сопоставление одного общедоступного порта с несколькими частными портами, которое потребовалось бы для этой конфигурации.
* **Несколько экземпляров сервера платформы Oracle на виртуальной машине.** В зависимости от требований к развертыванию вы можете запустить несколько экземпляров сервера веб-логики Oracle на одной виртуальной машине, если виртуальная машина достаточно велика. Например, на виртуальной машине среднего размера, которая содержит два ядра, можно выбрать запуск двух экземпляров сервера платформы Oracle. Однако мы по-прежнему рекомендуем не включать в архитектуру единую точку отказа. это может быть случай, если вы использовали только одну виртуальную машину, на которой выполняется несколько экземпляров сервера веб-логики Oracle. Использование по крайней мере двух виртуальных машин может быть лучшим подходом, и каждая виртуальная машина может запустить несколько экземпляров сервера платформы Oracle. Каждый экземпляр сервера "Oracle. Logic Server" по-прежнему может входить в один и тот же кластер. Однако в настоящее время невозможно использовать Azure для балансировки нагрузки конечных точек, предоставляемых такими развертываниями серверов Oracle в пределах одной виртуальной машины, так как балансировщик нагрузки Azure требует распределения серверов с балансировкой нагрузки между уникальными виртуальными машинами.

## <a name="oracle-jdk-virtual-machine-images"></a>Образы виртуальных машин JDK для Oracle
* **Последние обновления JDK 6 и 7.**  Хотя мы советуем использовать последнюю общедоступную поддерживаемую версию Java (на данный момент это Java 8), в Azure также доступны образы JDK 6 и 7. Они предназначены для устаревших приложений, которые еще невозможно обновить до версии JDK 8. Хотя обновления для предыдущих образов JDK могут быть уже недоступными, благодаря сотрудничеству корпорации Майкрософт и компании Oracle образы JDK 6 и 7, предоставляемые Azure, будут содержать более свежее частное обновление, которое обычно предоставляется только избранной группе клиентов, поддерживаемых Oracle. Новые версии образов JDK, а также обновленные версии JDK 6 и 7 будут доступны со временем.

   JDK, доступные в образах JDK 6 и 7, а также виртуальные машины и образы, полученные от них, можно использовать только в Azure.
* **64-разрядный JDK.**  Образы виртуальных машин Oracle WebLogic Server и Oracle JDK, предоставляемые Azure, содержат 64-разрядные версии Windows Server и JDK.

## <a name="next-steps"></a>Дальнейшие шаги
Теперь у вас есть обзор текущих решений Oracle на основе образов виртуальных машин в Microsoft Azure. Следующим шагом является развертывание первой базы данных Oracle в Azure.

> [!div class="nextstepaction"]
> [Создание базы данных Oracle в Azure](oracle-database-quick-create.md)
