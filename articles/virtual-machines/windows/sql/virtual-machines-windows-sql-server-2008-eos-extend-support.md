---
title: Расширение поддержки для SQL Server 2008 & 2008 R2
description: Расширение поддержки SQL Server 2008 и SQL Server 2008 R2 путем переноса экземпляра SQL Server в Azure или приобретения расширенной поддержки для сохранения экземпляров в локальной среде.
services: virtual-machines-windows
documentationcenter: ''
author: MashaMSFT
manager: craigg
tags: azure-service-management
ms.service: virtual-machines-sql
ms.topic: conceptual
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 04/08/2019
ms.author: mathoma
ms.reviewer: jroth
ms.custom: seo-lt-2019
ms.openlocfilehash: d1b3961b61d45718e726b31ec406445b202a0adf
ms.sourcegitcommit: 49cf9786d3134517727ff1e656c4d8531bbbd332
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2019
ms.locfileid: "74034174"
---
# <a name="extend-support-for-sql-server-2008-and-sql-server-2008-r2-with-azure"></a>Расширение поддержки SQL Server 2008 и SQL Server 2008 R2 с помощью Azure

SQL Server 2008 и SQL Server 2008 R2 являются подходом к [концу жизненного цикла поддержки (EOS)](https://www.microsoft.com/sql-server/sql-server-2008). Так как многие клиенты по-прежнему используют обе версии, мы предоставляем несколько вариантов для продолжения получения поддержки. Вы можете перенести локальные экземпляры SQL Server в виртуальные машины Azure, перенести их в базу данных SQL Azure или оставить локальные и приобрести Расширенные обновления для системы безопасности.

В отличие от управляемого экземпляра, миграция на виртуальную машину Azure не требует повторного сертификации приложений. И, в отличие от локальных, вы получите бесплатные дополнительные исправления безопасности, переполнив миграцию на виртуальную машину Azure.

В оставшейся части этой статьи приводятся рекомендации по переносу экземпляра SQL Server на виртуальную машину Azure.

## <a name="provisioning"></a>Подготовка

На сайте Azure Marketplace доступна плата с оплатой по мере использования **SQL Server 2008 R2 на Windows Server 2008 R2** .

Клиентам, входящим в SQL Server 2008, необходимо самостоятельно установить или обновить систему до SQL Server 2008 R2. Аналогичным образом клиенты Windows Server 2008 должны либо развернуть виртуальную машину из пользовательского виртуального жесткого диска, либо обновить систему до Windows Server 2008 R2.

Образы, развернутые с помощью Azure Marketplace, входят в состав предварительно установленного расширения SQL IaaS. Расширение IaaS SQL является обязательным для гибкого лицензирования и автоматической установки исправлений. Клиентам, которые развертывать самостоятельно установленные виртуальные машины, потребуется вручную установить расширение IaaS для SQL. Расширение IaaS SQL не поддерживается в Windows Server 2008.

> [!NOTE]
> Несмотря на то, что SQL Server **создания** и **управления** колонками будет работать с образом SQL Server 2008 R2 в портал Azure, следующие функции _не поддерживаются_: автоматическое резервное копирование, интеграция Azure Key Vault, службы R и конфигурация хранилища.

## <a name="licensing"></a>Лицензирование
SQL Server развертываний с оплатой по мере использования 2008 R2 можно преобразовать в [преимущество гибридного использования Azure](https://azure.microsoft.com/pricing/hybrid-benefit/).

Чтобы преобразовать лицензию на основе Software Assurance (SA) на оплату по мере использования, клиенты должны зарегистрироваться в [поставщике ресурсов](virtual-machines-windows-sql-register-with-resource-provider.md)ВИРТУАЛЬНОЙ машины SQL. После этой регистрации тип лицензии SQL будет взаимозаменяемым между Преимущество гибридного использования Azure и оплатой по мере использования.

Самостоятельно установленные экземпляры SQL Server 2008 или SQL Server 2008 R2 на виртуальной машине Azure можно зарегистрировать в поставщике ресурсов виртуальной машины SQL и преобразовать их тип лицензии в "Оплата по мере использования".

## <a name="migration"></a>Миграция
Вы можете перенести SQL Server экземпляры EOS на виртуальную машину Azure с помощью методов резервного копирования и восстановления вручную. Это наиболее распространенный способ миграции из локальной среды в виртуальную машину Azure.

### <a name="azure-site-recovery"></a>Azure Site Recovery

Для выполнения групповой миграции рекомендуется использовать службу [Azure Site Recovery](/azure/site-recovery/site-recovery-overview) . С помощью Azure Site Recovery клиенты могут реплицировать всю виртуальную машину, в том числе SQL Server из локальной среды в виртуальную машину Azure.

Для обеспечения восстановления SQL Server требуются согласованные с приложениями моментальные снимки Azure Site Recovery. Azure Site Recovery поддерживает моментальные снимки с постоянными приложениями с минимальным интервалом в 1 час. Минимальная Целевая точка восстановления (RPO), возможная для SQL Server с миграцией Azure Site Recovery, составляет 1 час. Целевое время восстановления (RTO) составляет 2 часа плюс SQL Server время восстановления.

### <a name="database-migration-service"></a>Database Migration Service

[Database Migration Service](/azure/dms/dms-overview) является вариантом для клиентов, если миграция выполняется из локальной среды в виртуальную машину Azure путем обновления SQL Server до версии 2012 или более поздней.

## <a name="disaster-recovery"></a>Аварийное восстановление

Решения аварийного восстановления для SQL Server EOS на виртуальной машине Azure приведены ниже.

- **Резервные копии SQL Server**: используйте Azure Backup, чтобы помочь защитить SQL Server EOS от атак, случайного удаления и повреждения. Сейчас решение находится на этапе предварительной версии для EOS SQL Server и поддерживает SQL Server 2008 и 2008 R2 под Windows 2008 R2 с пакетом обновления 1 (SP1). Дополнительные сведения см. в [этой статье](https://docs.microsoft.com/azure/backup/backup-azure-sql-database#support-for-sql-server-2008-and-sql-server-2008-r2).
- **Доставка журналов**. реплику доставки журналов можно создать в другой зоне или регионе Azure с непрерывным восстановлением, чтобы снизить значение RTO. Необходимо вручную настроить доставку журналов.
- **Azure Site Recovery**. виртуальную машину можно реплицировать между зонами и регионами с помощью Azure Site Recovery репликации. SQL Server требует, чтобы моментальные снимки, согласованные с приложениями, гарантированно были восстановлены в случае аварии. Azure Site Recovery обеспечивает минимальную 1-часовую RPO и 2-часовую (плюс SQL Server время восстановления) RTO для EOS SQL Server аварийного восстановления.

## <a name="security-patching"></a>Исправление безопасности
Расширенные обновления системы безопасности для SQL Server виртуальные машины доставляются по Центр обновления Майкрософтным каналам после регистрации SQL Server виртуальной машины с помощью [поставщика ресурсов](virtual-machines-windows-sql-register-with-resource-provider.md)ВИРТУАЛЬНОЙ машины SQL. Исправления можно загрузить вручную или автоматически.

*Automated patching* включен по умолчанию. Автоматическая установка исправлений позволяет Azure автоматически исправлять SQL Server и операционную систему. Вы можете указать день недели, время и длительность периода обслуживания, если установлено расширение SQL Server IaaS. Azure устанавливает исправления в период обслуживания. Расписание периода обслуживания использует для определения времени региональные параметры VM.  Дополнительные сведения см. [в статье автоматическая установка исправлений для SQL Server на виртуальных машинах Azure](virtual-machines-windows-sql-automated-patching.md).


## <a name="next-steps"></a>Дополнительная информация

Перенос виртуальной машины SQL Server в Azure:

* [Миграция базы данных SQL Server в экземпляр SQL Server на виртуальной машине Azure](virtual-machines-windows-migrate-sql.md)

Приступая к работе с SQL Server на виртуальных машинах Azure:

* [Создание виртуальной машины SQL Server на портале Azure](quickstart-sql-vm-create-portal.md).

Получите ответы на часто задаваемые вопросы о SQL Server виртуальных машинах:

* [Вопросы и ответы по SQL Server на виртуальных машинах Azure](virtual-machines-windows-sql-server-iaas-faq.md)
