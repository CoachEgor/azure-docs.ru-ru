---
title: Поддержка Azure для виртуальных машин поколения 2 (Предварительная версия) | Документация Майкрософт
description: Общие сведения о поддержке Azure для виртуальных машин поколения 2
services: virtual-machines-windows
documentationcenter: ''
author: laurenhughes
manager: gwallace
editor: ''
tags: azure-resource-manager
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 05/23/2019
ms.author: lahugh
ms.openlocfilehash: 7abc1b7cd3be775af03aeaf558f631060cc6f81c
ms.sourcegitcommit: dad277fbcfe0ed532b555298c9d6bc01fcaa94e2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/10/2019
ms.locfileid: "67722730"
---
# <a name="support-for-generation-2-vms-preview-on-azure"></a>Поддержка второго поколения 2 виртуальные машины (Предварительная версия) в Azure

> [!IMPORTANT]
> Поддержка Azure для виртуальных машин поколения 2 доступна в предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания, и не рекомендуется для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены.
> Дополнительные сведения см. в разделе [дополнительные условия использования предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Поддержка для поколения 2 виртуальных машин (ВМ) теперь доступна в предварительной версии в Azure. Не удается изменить поколение виртуальной машины после ее создания, поэтому изучите вопросы на этой странице, прежде чем выбрать поколение. 

Виртуальные машины второго поколения поддерживают ключевые функции, которые не поддерживаются на виртуальных машинах поколения 1. Эти функции включают расширенной памяти, Intel программного обеспечения Guard Extensions (SGX Intel) и виртуализированных постоянной памяти (vPMEM). Виртуальные машины поколения 2 также содержать некоторые возможности, пока не поддерживаются в Azure. Дополнительные сведения см. в разделе [функции и возможности](#features-and-capabilities) раздел.

Виртуальные машины второго поколения используйте новая архитектура загрузки на основе UEFI, а не архитектура на основе BIOS используемое поколением 1 виртуальных машин. По сравнению с виртуальных машин поколения 1, виртуальные машины поколения 2 может улучшить время загрузки и установки. Обзор виртуальных машин поколения 2 и некоторые отличия между поколения 1 и поколения 2 см. в разделе [следует ли создавать виртуальные машины поколения 1 или 2 в Hyper-V?](https://docs.microsoft.com/windows-server/virtualization/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v).

## <a name="generation-2-vm-sizes"></a>Размеры виртуальных Машин поколения 2

Виртуальные машины поколения 1, поддерживаются все размеры виртуальных Машин в Azure. Azure предлагает поддержку следующих выбранного ряда виртуальных Машин поколения 2 предварительной версии:

* [Серия Dsv2](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-general#dsv2-series) и [серии Dsv3](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-general#dsv3-series-1)
* [Серии Esv3](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-memory#esv3-series)
* [Серия Fsv2](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-compute#fsv2-series-1)
* [Серия GS](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-previous-gen#gs-series)
* [Серия ls —](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-previous-gen#ls-series) и [Lsv2 серии](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-storage#lsv2-series)
* [Серии Mv2](https://docs.microsoft.com/azure/virtual-machines/windows/sizes-memory#mv2-series)

## <a name="generation-2-vm-images-in-azure-marketplace"></a>Образы виртуальных Машин поколения 2 в Azure Marketplace

Виртуальные машины поколения 2 поддерживают следующие образы Marketplace:

* Центр обработки данных Windows Server 2019 г.
* Windows Server 2016 Datacenter
* Центр обработки данных Windows Server 2012 R2;
* Windows Server 2012 Datacenter

## <a name="on-premises-vs-azure-generation-2-vms"></a>Vs на предприятии. Виртуальные машины Azure поколения 2

Azure сейчас не поддерживает некоторые функции, которые в локальной Hyper-V поддерживает виртуальные машины поколения 2.

| Функция поколения 2                | On-premises Hyper-V | Azure |
|-------------------------------------|---------------------|-------|
| Безопасная загрузка                         | :heavy_check_mark:  | :x:   |
| Экранированной виртуальной Машины                         | :heavy_check_mark:  | :x:   |
| виртуального доверенного платформенного модуля                                | :heavy_check_mark:  | :x:   |
| Безопасность на основе виртуализации (VBS) | :heavy_check_mark:  | :x:   |
| Формат VHDX                         | :heavy_check_mark:  | :x:   |

## <a name="features-and-capabilities"></a>Функции и возможности

### <a name="generation-1-vs-generation-2-features"></a>Поколения 1 и поколения 2 функции

| Компонент | Поколение 1 | Поколения 2 |
|---------|--------------|--------------|
| Загрузка             | PCAT                      | UEFI                               |
| Контроллеры дисков | IDE                       | SCSI                               |
| Размеры виртуальной машины         | Все размеры виртуальных Машин | Только виртуальные машины, которые поддерживают хранилище класса premium |

### <a name="generation-1-vs-generation-2-capabilities"></a>Поколения 1 и поколения 2 возможности

| Функция | Поколение 1 | Поколения 2 |
|------------|--------------|--------------|
| > 2 ТБ на диске ОС                    | :x:                        | :heavy_check_mark: |
| Пользовательские/изображение/переключения дисков ОС         | :heavy_check_mark:         | :heavy_check_mark: |
| Поддержка набора масштабирования виртуальных машин | :heavy_check_mark:         | :heavy_check_mark: |
| ASR или резервного копирования                        | :heavy_check_mark:         | :x:                |
| Коллекция общих изображений              | :heavy_check_mark:         | :x:                |
| Шифрование дисков Azure             | :heavy_check_mark:         | :x:                |

## <a name="creating-a-generation-2-vm"></a>Создание поколения 2 виртуальной Машины

### <a name="marketplace-image"></a>Образ Marketplace

На портале Azure или Azure CLI можно создать поколения 2 виртуальные машины из образа Marketplace, который поддерживает загрузку UEFI.

`windowsserver-gen2preview` Предложение содержит Windows только для образов поколения 2. Этот упаковки позволяет избежать путаницы между поколения 1 и поколения 2 изображения. Для создания версии 2 виртуальной Машины, выберите **образы** из этого предложения и выполните стандартный процесс для создания виртуальной Машины.

В настоящее время Marketplace предлагает следующие Windows поколения 2 образы:

* 2019 центра обработки данных уровня gen2.
* 2016-datacenter-gen2
* 2012-r2-datacenter-2-го поколения
* 2012-datacenter-gen2

См. в разделе [функции и возможности](#features-and-capabilities) раздел текущий список поддерживаемых образов Marketplace.

### <a name="managed-image-or-managed-disk"></a>Управляемый образ или управляемый диск

Поколения 2 можно создать виртуальную Машину из управляемого образа или управляемый диск таким же образом, вы создадите поколения 1 виртуальной Машины.

### <a name="virtual-machine-scale-sets"></a>Масштабируемые наборы виртуальных машин

Также можно создать поколения 2 виртуальные машины с помощью масштабируемых наборов виртуальных машин. В Azure CLI используйте масштабирование Azure задает для создания поколения 2 виртуальных машин.

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

* **Это поколение 2 виртуальных машин доступны во всех регионах Azure?**  
    Да. Но не все [размеры виртуальных Машин поколения 2](#generation-2-vm-sizes) доступны в каждом регионе. Доступность поколения 2 виртуальной Машины зависит от доступности размера виртуальной Машины.

* **Есть ли разница в цене между поколения 1 и поколения 2 виртуальных машин?**  
   Нет.

* **Как увеличить размер диска ОС?**  
  Диски ОС размером более 2 ТБ не приходилось поколения виртуальных машин. По умолчанию диски ОС размером менее 2 ТБ для виртуальных машин поколения 2. Можно увеличить размер диска, рекомендуемый максимум до 4 ТБ. Чтобы увеличить размер диска операционной системы, используйте Azure CLI или портала Azure. Сведения о том, как расширить диски программно, см. в разделе [изменения размера диска](expand-os-disk.md).

  Чтобы увеличить размер диска ОС на портале Azure:

  1. На портале Azure перейдите на страницу свойств виртуальной Машины.
  1. Чтобы завершить работу и освободить виртуальную Машину, выберите **остановить** кнопки.
  1. В **дисков** выберите диск операционной системы, необходимо увеличить.
  1. В **дисков** выберите **конфигурации**и обновите **размер** на желаемое значение.
  1. Вернитесь на страницу свойств виртуальной Машины и **запустить** виртуальной Машины.
  
  Может появиться предупреждение для дисков операционной системы, размер которых превышает 2 ТБ. Предупреждение не относится к виртуальным машинам поколения 2. Тем не менее, размеры дисков ОС размером более 4 ТБ *не рекомендуется.*

* **Сделать поколения 2 поддержки виртуальных машин, повышение производительности сети?**  
    Да. Дополнительные сведения см. в разделе [Создание виртуальной Машины с ускоренной сетью](../../virtual-network/create-vm-accelerated-networking-cli.md).

* **VHDX поддерживается для поколения 2?**  
    Нет, виртуальные машины поколения 2 поддерживают только виртуальный жесткий ДИСК.

* **Поддерживают ли виртуальные машины второго поколения Ultra хранилища дисков Azure?**  
    Да.

* **Можно ли перенести виртуальную Машину из поколения 1 в поколение 2?**  
    Нет, не удается изменить поколение виртуальной Машины после ее создания. Если необходимо переключиться между поколениями виртуальной Машины, создайте виртуальную Машину различные поколения.

## <a name="next-steps"></a>Следующие шаги

* Дополнительные сведения о [виртуальные машины поколения 2 в Hyper-V](https://docs.microsoft.com/windows-server/virtualization/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v).

* Узнайте, как [подготовить виртуальный жесткий ДИСК](prepare-for-upload-vhd-image.md) для передачи из локальных систем в Azure.
