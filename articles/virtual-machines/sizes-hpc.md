---
title: Размеры Azure VM - HPC Документы Майкрософт
description: Перечисляет различные размеры, доступные для высокопроизводительных вычислительных виртуальных машин в Azure. Сведения о количестве виртуальных ЦП, дисков данных и сетевых адаптеров, а также о пропускной способности хранилища и сети для размеров виртуальных машин этой серии.
services: virtual-machines
documentationcenter: ''
author: vermagit
manager: gwallace
editor: ''
tags: azure-resource-manager,azure-service-management
ms.assetid: ''
ms.service: virtual-machines
ms.devlang: na
ms.topic: article
ms.workload: infrastructure-services
ms.date: 02/03/2020
ms.author: amverma
ms.reviewer: jonbeck
ms.openlocfilehash: b900a95df00ccdd0ad9b5bee3887364195c7d1c2
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "78226728"
---
# <a name="high-performance-compute-vm-sizes"></a>Размеры виртуальных машин, оптимизированных для высокопроизводительных вычислений

Виртуальные машины Серии H-серий Azure предназначены для обеспечения производительности, масштабируемости MPI и эффективности затрат для различных реальных рабочих нагрузок HPC.

[HBv2-серия](hbv2-series.md) VMs имеют 200 Gb/sec Mellanox HDR InfiniBand, в то время как HB и HC-серии VMs имеют 100 Гб / сек Mellanox EDR InfiniBand. Каждый из этих типов VM соединен в неблокирующее жировое дерево для оптимизированной и последовательной производительности RDMA. HBv2 VMs поддерживают адаптивное routing и динамический подключенный транспорт (DCT, в дополнение к стандартным транспортам RC и UD). Эти функции повышают производительность приложения, масштабируемость и согласованность, и их использование настоятельно рекомендуется.

[HB-серия](hb-series.md) ВМ оптимизированы для приложений, управляемых пропускной способностью памяти, таких как динамика жидкости, явный анализ конечных элементов и моделирование погоды. HB VMs оснащен60 процессорными ядрами процессора AMD EPYC 7551, 4 ГБ оперативной памяти на ядро процессора и отсутствие гиперпоточности. Платформа AMD EPYC обеспечивает более 260 ГБ/сек пропускной способности памяти.

[HC-серия](hc-series.md) ВМ оптимизированы для приложений, управляемых плотными вычислениями, такими как неявный анализ конечных элементов, молекулярная динамика и вычислительная химия. HC VMs оснащены 44 процессорами Intel Xeon Platinum 8168, 8 ГБ оперативной памяти на ядро процессора и отсутствием гиперпотока. Платформа Intel Xeon Platinum поддерживает богатую экосистему программных средств Intel, таких как Библиотека ядра Intel Math.

[H-серия](h-series.md) VMs оптимизированы для приложений, управляемых высокими частотами процессора или большой памятью на основные требования. VMs-серии оснащены 8 или 16 процессорами Intel Xeon E5 2667 v3, 7 или 14 ГБ оперативной памяти на ядро процессора и отсутствием гиперпоточности. H-серия имеет 56 Gb/sec Mellanox FDR InfiniBand в неблокирующей конфигурации жирного дерева для последовательной производительности RDMA. VMs-серии поддерживают Intel MPI 5.x и MS-MPI.

## <a name="deployment-considerations"></a>Рекомендации по развертыванию

- **Подписка Azure.** Чтобы развернуть большое число экземпляров для ресурсоемких вычислений, рекомендуем подписку с оплатой по мере использования или другие варианты покупки. Если вы используете [бесплатную учетную запись Azure](https://azure.microsoft.com/free/), вам доступно ограниченное количество вычислительных ядер Azure.

- **Цены и доступность.** Виртуальные машины предлагаются только в ценовой категории уровня "Стандартный". Проверьте [доступность продуктов по регионам](https://azure.microsoft.com/global-infrastructure/services/) , чтобы узнать, в каких регионах Azure их можно использовать.
- **Квота ядер**. Вам может потребоваться увеличить стандартную квоту на число ядер в подписке Azure. Кроме того, количество ядер, которые можно развернуть для некоторых семейств размеров виртуальных машин (включая серию H), может быть ограничено условиями вашей подписки. Чтобы запросить увеличение квоты, [откройте онлайн-запрос поддержки клиентов](../azure-supportability/how-to-create-azure-support-request.md) бесплатно. (Ограничения по умолчанию могут быть разными в зависимости от категории подписки).

  > [!NOTE]
  > Если вам нужны ресурсы в очень большом объеме, обратитесь в службу поддержки Azure. Квоты Azure — это ограничения по кредитам, а не гарантированная емкость. Вне зависимости от квоты с вас будет взиматься плата только за используемые ядра.
  
- **Виртуальная сеть** — [виртуальная сеть](https://azure.microsoft.com/documentation/services/virtual-network/) Azure не требуется для использования ресурсоемких экземпляров. Но для нескольких развертываний вам потребуется по крайней мере облачная виртуальная сеть Azure или подключение типа "сеть — сеть", если нужен доступ к локальным ресурсам. При необходимости создайте виртуальную сеть, чтобы развернуть экземпляры. Добавление виртуальных машин для ресурсоемких вычислений в виртуальную сеть в территориальной группе не поддерживается.
- **Изменение размера.** Из-за специализированного оборудования изменить можно только размер экземпляров для ресурсоемких вычислений одного семейства размеров (серии H или серии A для ресурсоемких вычислений). Например, можно изменить только размер виртуальной машины серии H (один размер из серии H на другой размер из этой же серии). Кроме того, не поддерживается изменение размера экземпляра, не предназначенного для ресурсоемких вычислений, на размер экземпляра, предназначенного для таких вычислений.  

> [!NOTE]
> A8 - A11 VMs планируется вывести на пенсию 3/2021. Для получения дополнительной информации [см.](https://azure.microsoft.com/resources/hpc-migration-guide/)

## <a name="rdma-capable-instances"></a>Экземпляры с поддержкой RDMA

Подмножество вычислительно-интенсивных экземпляров (A8, A9, H16r, H16mr, HB и HC) имеет сетевой интерфейс для удаленного прямого доступа к памяти (RDMA) подключения. Выбранные размеры N-серии, обозначенные с 'r', такие как конфигурации NC24rs (NC24rs_v2 и NC24rs_v3) также способны к RDMA. Этот интерфейс является дополнением к стандартному сетевому интерфейсу Azure, который доступен для виртуальных машин других размеров.

Этот интерфейс позволяет RDMA-способных экземпляров общаться через Сеть InfiniBand (IB), работающих по ставкам EDR для HB, HC, FDR ставки для H16r, H16mr, и RDMA-способных N-серии виртуальных машин, и скорость ЗДР для A8 и A9 виртуальных машин. Эти возможности RDMA позволяют увеличить масштабируемость и производительность определенных приложений с интерфейсом MPI. Для получения дополнительной информации о скорости, смотрите подробную информацию в таблицах на этой странице.

> [!NOTE]
> В Azure IP over IB поддерживается только на СР-IOV с поддержкой VMs (SR-IOV для InfiniBand, в настоящее время HB и HC). RDMA over IB поддерживается для всех экземпляров, способных к RDMA.
- **Операционная система** - Windows Server 2016 на всех вышеперечисленных VMS серии HPC. Windows Server 2012 R2, Windows Server 2012 также поддерживаются на вне-SR-IOV включен VMs (отсюда и с исключением HB и HC).

- **MPI** - SR-IOV позволил VM размеров на Azure (HB, HC) позволяют практически любой вкус MPI, которые будут использоваться с Mellanox OFED.
На не-SR-IOV включен VMs, поддерживаемые реализации MPI использовать microsoft Network Direct (ND) интерфейс для связи между экземплярами. Таким образом, поддерживаются только версии Microsoft MPI (MS-MPI) 2012 R2 или более поздние версии и Intel MPI 5.x. Более поздние версии (2017, 2018) библиотеки intel MPI могут быть или не совместимы с драйверами Azure RDMA.

- **InfiniBandDriverWindows VM расширение** - На RDMA-способных VMs, добавить расширение InfiniBandDriverWindows включить InfiniBand. Это расширение Windows VM устанавливает Драйверы Windows Network Direct (на не-SR-IOV VMs) или Mellanox OFED драйверов (на SR-IOV VMs) для подключения RDMA.
В некоторых случаях развертывания A8 и A9 расширение HpcVmDrivers добавляется автоматически. Обратите внимание, что расширение HpcVmDrivers VM в настоящее время унижается; он не будет обновляться. Чтобы добавить в виртуальную машину расширение виртуальной машины, можно использовать командлеты [Azure PowerShell](/powershell/azure/overview). 

  Следующая команда устанавливает последнюю версию 1.0 InfiniBandDriverWindows расширение на существующих RDMA-способных VM имени *myVM* развернуты в группе ресурсов под названием *myResourceGroup* в западном регионе *США:*

  ```powershell
  Set-AzVMExtension -ResourceGroupName "myResourceGroup" -Location "westus" -VMName "myVM" -ExtensionName "InfiniBandDriverWindows" -Publisher "Microsoft.HpcCompute" -Type "InfiniBandDriverWindows" -TypeHandlerVersion "1.0"
  ```

  Кроме того, расширения VM могут быть включены в шаблоны Azure Resource Manager для простого развертывания со следующим элементом JSON:

  ```json
  "properties":{
  "publisher": "Microsoft.HpcCompute",
  "type": "InfiniBandDriverWindows",
  "typeHandlerVersion": "1.0",
  } 
  ```

  Следующая команда устанавливает последнюю версию 1.0 InfiniBandDriverWindows расширение на всех RDMA-способных VMs в существующих виртуальных машин масштаба набор под названием *myVMSS* развернуты в группе ресурсов под названием *myResourceGroup*:

  ```powershell
  $VMSS = Get-AzVmss -ResourceGroupName "myResourceGroup" -VMScaleSetName "myVMSS"
  Add-AzVmssExtension -VirtualMachineScaleSet $VMSS -Name "InfiniBandDriverWindows" -Publisher "Microsoft.HpcCompute" -Type "InfiniBandDriverWindows" -TypeHandlerVersion "1.0"
  Update-AzVmss -ResourceGroupName "myResourceGroup" -VMScaleSetName "MyVMSS" -VirtualMachineScaleSet $VMSS
  Update-AzVmssInstance -ResourceGroupName "myResourceGroup" -VMScaleSetName "myVMSS" -InstanceId "*"
  ```

  Дополнительные сведения см. в статье [Обзор расширений и компонентов виртуальной машины под управлением Windows](./extensions/overview.md). Вы также можете работать с расширениями для виртуальных машин, развернутых в рамках [классической модели развертывания](https://docs.microsoft.com/previous-versions/azure/virtual-machines/windows/classic/agents-and-extensions-classic).

- **Адресное пространство сети RDMA.** Сеть RDMA в Azure резервирует адресное пространство 172.16.0.0/16. Чтобы выполнять приложения MPI в экземплярах, развернутых в виртуальной сети Azure, убедитесь, что адресное пространство виртуальной сети не пересекается с сетью RDMA.

## <a name="cluster-configuration-options"></a>Параметры конфигурации кластера

Azure предоставляет несколько вариантов для создания кластеров виртуальных машин для Windows HPC, которые могут взаимодействовать с помощью сети RDMA. 

- **Виртуальные машины**. Разверните виртуальные машины HPC с поддержкой RDMA в одну группу доступности (используя модель развертывания Azure Resource Manager). Если вы используете классическую модель развертывания, разверните виртуальные машины в одну облачную службу. 

- **Наборы виртуальной шкалы машин** - В виртуальном наборе масштабов машины убедитесь, что вы ограничиваете развертывание одной группой размещения. Например, в шаблоне Resource Manager задайте значение `true` для свойства `singlePlacementGroup`. 

- **MPI среди виртуальных машин** - Если MPI связь требуется между виртуальными машинами (VMs), убедитесь, что VMs находятся в том же наборе доступности или виртуальной машины же набор масштаба.

- **Azure CycleCloud**. Создайте кластер HPC в [Azure CycleCloud](/azure/cyclecloud/), чтобы запустить задания MPI на узлах Windows.

- **Пакетная служба Azure**. Создайте пул [пакетной службы Azure](/azure/batch/) для выполнения рабочих нагрузок MPI на вычислительных узлах Windows Server. Дополнительные сведения см. в статье [Использование экземпляров с поддержкой RDMA или графического процессора (GPU) в пулах пакетной службы](../batch/batch-pool-compute-intensive-sizes.md). Чтобы запустить рабочие нагрузки на основе контейнера в пакетной службе, ознакомьтесь с проектом [Batch Shipyard](https://github.com/Azure/batch-shipyard).

- **Microsoft HPC Pack** - [HPC HPC Pack](https://docs.microsoft.com/powershell/high-performance-computing/overview) включает в себя среду выполнения для MS-MPI, которая использует сеть Azure RDMA при развертывании на RDMA- иlinux-vMs, способных к использованию ВРФ. Например, развертывание [см. Налажьте кластер Linux RDMA с hPC Pack для запуска MPI-приложений.](https://docs.microsoft.com/powershell/high-performance-computing/hpcpack-linux-openfoam)

## <a name="other-sizes"></a>Остальные размеры

- [Общее назначение](sizes-general.md)
- [Оптимизированные для вычислений](sizes-compute.md)
- [Оптимизирована память](sizes-memory.md)
- [Оптимизированные для операций в хранилище](sizes-storage.md)
- [Оптимизированные для GPU](sizes-gpu.md)
- [Предыдущие поколения](sizes-previous-gen.md)

## <a name="next-steps"></a>Дальнейшие действия

- Для контрольных списков для использования вычислительно-интенсивных экземпляров с пакетом HPC на Windows Server, [см.](https://docs.microsoft.com/powershell/high-performance-computing/hpcpack-linux-openfoam)

- Сведения об использовании экземпляров для ресурсоемких вычислений при запуске приложений MPI с использованием пакетной службы Azure см. в статье [Использование задач с несколькими экземплярами для запуска приложений с интерфейсом передачи сообщений в пакетной службе](../batch/batch-mpi.md).

- Узнайте больше о том, как с помощью [единиц вычислений Azure (ACU)](acu.md) сравнить производительность вычислений для различных номеров SKU Azure.