---
title: Общие сведения и работа с областями управления затратами Azure
description: Эта статья поможет вам понять области выставления счетов и управления ресурсами, доступные в Azure, а также как использовать области в управлении затратами и API-интерфейсах.
services: cost-management
keywords: ''
author: bandersmsft
ms.author: banders
ms.date: 10/14/2019
ms.topic: conceptual
ms.service: cost-management
manager: micflan
ms.custom: ''
ms.openlocfilehash: 664307b64d5a2869130df9ab123119d869f36e21
ms.sourcegitcommit: 0576bcb894031eb9e7ddb919e241e2e3c42f291d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2019
ms.locfileid: "72374488"
---
# <a name="understand-and-work-with-scopes"></a>Общие сведения об областях и работа с ними

Эта статья поможет вам понять области выставления счетов и управления ресурсами, доступные в Azure, а также как использовать области в управлении затратами и API-интерфейсах.

## <a name="scopes"></a>Области действия

_Область_ — это узел в иерархии ресурсов Azure, где пользователи Azure AD получают доступ к службам и управляют ими. Большинство ресурсов Azure создаются и развертываются в группах ресурсов, которые являются частью подписок. Корпорация Майкрософт также предлагает две иерархии для подписок Azure, которые имеют специализированные роли для управления данными о выставлении счетов.
- Данные выставления счетов, такие как платежи и счета
- Облачные службы, такие как управление затратами и политиками

Области — это место, где вы управляете данными для выставления счетов, имеете роли, относящиеся к платежам, просматривайте счета и проводите общее управление учетными записями. Управление выставлением счетов и учетными записями осуществляется отдельно от тех, которые используются для управления ресурсами и используют [Azure RBAC](../role-based-access-control/overview.md). Чтобы четко отличать назначение отдельных областей, включая различия в управлении доступом, они называются _областью выставления счетов_ и _областями RBAC_соответственно.

## <a name="how-cost-management-uses-scopes"></a>Как в управлении затратами используются области

Управление затратами работает во всех областях, находящегося над ресурсами, чтобы позволить организациям управлять затратами на уровне, на котором они имеют доступ, будь то учетная запись выставления счетов или одна группа ресурсов. Хотя области выставления счетов отличаются в зависимости от соглашения Майкрософт (типа подписки), области RBAC не имеют.

## <a name="azure-rbac-scopes"></a>Области Azure RBAC

Azure поддерживает три области для управления ресурсами. Каждая область поддерживает управление доступом и управлением, включая управление затратами, но не ограничиваясь ими.

- [**Группы управления**](../governance/management-groups/overview.md) — иерархические контейнеры (до восьми уровней) для организации подписок Azure.

    Тип ресурса: [Microsoft. Management/манажементграупс](/rest/api/resources/managementgroups)

- **Подписки** — основные контейнеры для ресурсов Azure.

    Тип ресурса: [Microsoft. Resources/Subscriptions](/rest/api/resources/subscriptions)

- [**Группы ресурсов**](../azure-resource-manager/resource-group-overview.md#resource-groups) — это логические группы связанных ресурсов для решения Azure, которые используют один жизненный цикл. Например, ресурсы, которые развертываются и удаляются вместе.

    Тип ресурса: [Microsoft. Resources/Subscriptions/resourceGroups](/rest/api/resources/resourcegroups)

Группы управления позволяют организовывать подписки в иерархии. Например, вы можете создать логическую иерархию организации с помощью групп управления. Затем предоставьте рабочие группы подписок для рабочих нагрузок рабочей среды и разработки и тестирования. А затем создать группы ресурсов в подписках для управления каждой подсистемой или компонентом.

Создание организационной иерархии обеспечивает организацию затрат и соблюдение политик в Организации. Затем каждый лидер может просматривать и анализировать текущие затраты. Затем они могут создавать бюджеты с неправильными шаблонами расходов и оптимизировать затраты с рекомендациями помощника на самом низком уровне.

Предоставление доступа для просмотра затрат и при необходимости управления конфигурацией затрат, например бюджетами и экспортами, выполняется в областях управления с помощью Azure RBAC. Azure RBAC используется для предоставления пользователям и группам Azure AD доступа к предопределенному набору действий, определенных в роли в определенной области и ниже. Например, роль, назначенная области группы управления, также предоставляет те же разрешения для вложенных подписок и групп ресурсов.

Управление затратами поддерживает следующие встроенные роли для каждой из следующих областей:

- [**Владелец**](../role-based-access-control/built-in-roles.md#owner) — может просматривать затраты и управлять всеми, включая настройку затрат.
- [**Участник**](../role-based-access-control/built-in-roles.md#contributor) — может просматривать затраты и управлять всеми, включая настройку затрат, но без контроля доступа.
- [**Читатель**](../role-based-access-control/built-in-roles.md#reader) — может просматривать все, включая данные о затратах и конфигурацию, но не может вносить какие-либо изменения.
- [**Участник управления затратами**](../role-based-access-control/built-in-roles.md#cost-management-contributor) — может просматривать затраты, управлять конфигурацией затрат и просматривать рекомендации.
- [**Читатель управления затратами**](../role-based-access-control/built-in-roles.md#cost-management-reader) — может просматривать данные о затратах, конфигурацию затрат и рекомендации по просмотру.

Участник управления затратами является рекомендуемой ролью с минимальными привилегиями. Она позволяет пользователям создавать и контролировать бюджеты и экспорты для более эффективного мониторинга и создания отчетов о затратах. Участники службы "Управление затратами" могут также требовать дополнительных ролей для поддержки комплексных сценариев управления затратами. Рассмотрим следующие сценарии.

- **Действует при превышении бюджетов** — участники управления затратами также должны иметь доступ для создания и/или управления группами действий, чтобы автоматически реагировать на превышение времени. Рассмотрите возможность предоставления [участнику мониторинга](../role-based-access-control/built-in-roles.md#monitoring-contributor) группы ресурсов, которая содержит группу действий, которая будет использоваться при превышении пороговых значений бюджета. Для автоматизации определенных действий требуются дополнительные роли для конкретных используемых служб, таких как автоматизация и функции Azure.
- **Экспорт данных о затратах** . Участники службы "Управление затратами" также должны иметь доступ к управлению учетными записями хранения, чтобы запланировать экспорт для копирования данных в учетную запись хранения. Рекомендуется предоставить [участнику учетной записи хранения](../role-based-access-control/built-in-roles.md#storage-account-contributor) группу ресурсов, содержащую учетную запись хранения, в которую экспортируются данные о затратах.
- **Просмотр рекомендаций по экономии затрат** — средства чтения и управления затратами по умолчанию имеют доступ для *просмотра* рекомендаций по затратам. Однако для использования рекомендаций по затратам требуется доступ к отдельным ресурсам. Рекомендуется предоставлять [роль конкретной службы](../role-based-access-control/built-in-roles.md#built-in-role-descriptions) , если вы хотите использовать рекомендацию на основе стоимости.

## <a name="enterprise-agreement-scopes"></a>Области Соглашение Enterprise

Соглашение Enterprise (EA) учетные записи выставления счетов, также называемые регистрациями, имеют следующие области.

- [**Счет выставления счетов**](../billing/billing-view-all-accounts.md) — представляет регистрацию EA. В этой области создаются счета. Покупки, не основанные на использовании, например Marketplace и резервирования, доступны только в этой области. Они не представлены в подразделениях или учетных записях регистрации.

    Тип ресурса: `Microsoft.Billing/billingAccounts (accountType = Enrollment)`
- **Отдел** — необязательное группирование учетных записей регистрации.

    Тип ресурса: `Billing/billingAccounts/departments`

- **Учетная запись регистрации** — представляет одного владельца учетной записи. Не поддерживает предоставление доступа нескольким людям.

    Тип ресурса: `Microsoft.Billing/billingAccounts/enrollmentAccounts`

Хотя области управления привязаны к одному каталогу, области выставления счетов EA нет. Учетная запись выставления счетов EA может иметь подписки в любом количестве каталогов Azure AD.

Области выставления счетов EA поддерживают следующие роли:

- **Администратор предприятия** — может управлять параметрами и доступом к учетной записи выставления счетов, может просматривать все затраты и управлять конфигурацией затрат. Например, бюджеты и экспорты. В функции, область выставления счетов EA является той же, что и [роль Azure RBAC участника "Управление затратами](../role-based-access-control/built-in-roles.md#cost-management-contributor)".
- **Корпоративный доступ только для чтения** — может просматривать параметры учетной записи выставления счетов, данные о затратах и конфигурацию затрат. Например, бюджеты и экспорты. В функции, область выставления счетов EA совпадает с [ролью Azure RBAC для чтения управления затратами](../role-based-access-control/built-in-roles.md#cost-management-reader).
- **Администратор отдела** — может управлять параметрами отдела, такими как центр затрат, а также получать доступ, просматривать все затраты и управлять конфигурацией затрат. Например, бюджеты и экспорты.  Для учетных записей администраторов отдела и пользователей, доступных только для чтения, необходимо включить параметр счета для выставления счетов за **представление Da** . Если **плата за представление Da** отключена, пользователи отдела не смогут просматривать затраты на любом уровне, даже если они являются владельцами учетной записи или подписки.
- **Пользователь только для чтения в отделе** — может просматривать параметры отдела, данные о затратах и конфигурацию затрат. Например, бюджеты и экспорты. Если **плата за представление Da** отключена, пользователи отдела не смогут просматривать затраты на любом уровне, даже если они являются владельцами учетной записи или подписки.
- **Владелец учетной записи** — может управлять параметрами учетной записи регистрации (например, центром затрат), просматривать все затраты и управлять конфигурацией затрат (например, бюджетами и экспортами) для учетной записи регистрации. Для учетных записей владельцев учетных записей и пользователей RBAC для просмотра затрат необходимо включить параметр счета для выставления счетов на **Просмотр AO** .

Пользователи счета выставления счетов EA не имеют прямого доступа к счетам. Счета доступны из внешней системы корпоративного лицензирования.

Подписки Azure вложены в учетные записи регистрации. Пользователи выставления счетов имеют доступ к данным о затратах для подписок и групп ресурсов, которые находятся в соответствующих областях. У них нет доступа для просмотра ресурсов или управления ими в портал Azure. Пользователи выставления счетов могут просматривать затраты, перейдя к " **Управление затратами + выставление счетов** " в портал Azure списке служб. Затем они могут отфильтровать затраты для конкретных подписок и групп ресурсов, по которым они должны быть включены в отчет.

Пользователи выставления счетов не имеют доступа к группам управления, так как они не относятся к определенной учетной записи выставления счетов. Доступ к группам управления должен быть предоставлен явным образом. Группы управления суммируют затраты из всех вложенных подписок. Однако они включают только покупки на основе использования. Они не включают такие покупки, как резервирование и сторонние предложения Marketplace. Чтобы просмотреть эти затраты, используйте счет выставления счетов EA.

## <a name="individual-agreement-scopes"></a>Индивидуальные области соглашения

Подписки Azure, созданные на основе индивидуальных предложений, таких как бесплатная пробная версия, предложения по разработке и тестированию, не имеют явной области счета выставления счетов. Вместо этого у каждой подписки есть владелец учетной записи или администратор учетной записи, например владелец учетной записи EA.

- [**Счет выставления счетов**](../billing/billing-view-all-accounts.md) — представляет одного владельца учетной записи для одной или нескольких подписок Azure. В настоящее время он не поддерживает предоставление доступа нескольким людям или доступ к сводным представлениям затрат.

    Тип ресурса: неприменимо

Отдельные администраторы учетных записей подписки Azure могут просматривать и управлять данными о выставлении счетов, например счета и платежи, из [центр управления учетной записью Azure](https://account.azure.com/subscriptions). Однако они не могут просматривать данные о затратах или управлять ресурсами в портал Azure. Чтобы предоставить доступ администратору учетной записи, используйте роли управления затратами, упомянутые выше.

В отличие от EA, индивидуальные администраторы учетных записей подписки Azure могут просматривать свои счета в портал Azure. Не забывайте, что роли участников "читатель управления затратами" и "Управление затратами" не предоставляют доступ к счетам. Дополнительные сведения см. [в разделе как предоставить доступ к счетам](../billing/billing-manage-access.md##give-read-only-access-to-billing).

## <a name="microsoft-customer-agreement-scopes"></a>Области соглашения клиента Майкрософт

Учетные записи выставления счетов для клиентов Майкрософт имеют следующие области.

- **Счет выставления счетов** — представляет клиентское соглашение для нескольких продуктов и служб Майкрософт. Счета на оплату заказчиков не функционально совпадают с регистрацией EA. Регистрация EA более тесно соответствует профилям выставления счетов.

    Тип ресурса: `Microsoft.Billing/billingAccounts (accountType = Organization)`

- **Профиль выставления счетов** — определяет подписки, которые включены в счет. Профили выставления счетов являются функциональным аналогом регистрации EA, так как это область, на которой создаются счета. Аналогичным образом, покупки, не основанные на использовании (например, Marketplace и резервирования), доступны только в этой области. Они не включаются в разделы счета.

    Тип ресурса: `Microsoft.Billing/billingAccounts/billingProfiles`

- **Раздел "счет** " — представляет группу подписок в счете или профиле выставления счетов. Разделы накладных — это как отделы — несколько людей могут иметь доступ к разделу счета.

    Тип ресурса: `Microsoft.Billing/billingAccounts/invoiceSections`

- **Клиент** — представляет группу подписок, связанных с конкретным клиентом и подключенных к соглашению клиента Майкрософт по партнерам. Эта область относится только к CSP.

В отличие от областей выставления счетов EA, счета для клиентских _соглашений привязаны к одному_ каталогу и не могут иметь подписки на несколько каталогов Azure AD.


Области выставления счетов соглашения клиента поддерживают следующие роли:

- **Owner** — может управлять параметрами выставления счетов и доступом, просматривать все затраты и настраивать конфигурацию затрат. Например, бюджеты и экспорты. В функции эта область выставления счетов для этого соглашения клиента совпадает с [ролью Azure RBAC участника управления затратами](../role-based-access-control/built-in-roles.md#cost-management-contributor).
- **Участник** — может управлять параметрами выставления счетов, за исключением доступа, просматривать все затраты и управлять конфигурацией затрат. Например, бюджеты и экспорты. В функции эта область выставления счетов для этого соглашения клиента совпадает с [ролью Azure RBAC участника управления затратами](../role-based-access-control/built-in-roles.md#cost-management-contributor).
- **Читатель** — может просматривать параметры выставления счетов, данные о затратах и конфигурацию затрат. Например, бюджеты и экспорты. В функции эта область выставления счетов для этого соглашения клиента совпадает с [ролью Azure RBAC для чтения управления затратами](../role-based-access-control/built-in-roles.md#cost-management-reader).
- **Менеджер по накладным** — может просматривать и оплачивать счета, а также просматривать данные о затратах и конфигурацию. Например, бюджеты и экспорты. В функции эта область выставления счетов для этого соглашения клиента совпадает с [ролью Azure RBAC для чтения управления затратами](../role-based-access-control/built-in-roles.md#cost-management-reader).
- **Создатель подписки Azure** — может создавать подписки Azure, просматривать затраты и управлять конфигурацией затрат. Например, бюджеты и экспорты. В функции эта область выставления счетов для этого соглашения клиента совпадает с ролью владельца учетной записи регистрации EA.

Подписки Azure вкладываются в разделы счета, например на учетные записи регистрации EA. Пользователи выставления счетов имеют доступ к данным о затратах для подписок и групп ресурсов, которые находятся в соответствующих областях. Однако у них нет доступа к просмотру или управлению ресурсами в портал Azure. Пользователи выставления счетов могут просматривать затраты, перейдя к " **Управление затратами + выставление счетов** " в портал Azure списке служб. Затем отфильтруйте затраты для конкретных подписок и групп ресурсов, по которым они должны быть включены в отчет.

Пользователи выставления счетов не имеют доступа к группам управления, так как они не относятся к учетной записи выставления счетов явным образом. Однако, если для организации включены группы управления, все затраты на подписку будут сведены к учетной записи выставления счетов и к корневой группе управления, так как они оба ограничены одним каталогом. Группы управления включают только покупки, основанные на использовании. Покупки, такие как резервирования и сторонние предложения Marketplace, не включаются в группы управления. Таким образом, учетная запись выставления счетов и корневая группа управления могут сообщать о различных итогах. Чтобы просмотреть эти затраты, используйте счет выставления счетов или соответствующий профиль выставления счетов.

## <a name="aws-scopes"></a>Области AWS

После завершения интеграции AWS см. статью [Установка и настройка интеграции AWS](aws-integration-set-up-configure.md). Доступны следующие области:

- **Внешняя учетная запись выставления счетов** — представляет клиентское соглашение со сторонним поставщиком. Это похоже на счет выставления счетов EA.

    Тип ресурса: `Microsoft.CostManagement/externalBillingAccounts`

- **Внешняя подписка** — представляет операционную учетную запись клиента со сторонним поставщиком. Это похоже на подписку Azure.

    Тип ресурса: `Microsoft.CostManagement/externalSubscriptions`

## <a name="cloud-solution-provider-csp-scopes"></a>Области поставщика облачных решений (CSP)

Партнеры поставщика облачных решений (CSP) сейчас не поддерживаются в службе "Управление затратами". Вместо этого можно использовать [Центр партнеров](https://docs.microsoft.com/azure/cloud-solution-provider/overview/partner-center-overview).

## <a name="switch-between-scopes-in-cost-management"></a>Переключение между областями в управлении затратами

Все представления управления затратами в портал Azure включают выделение **области** пилюля в верхнем левом углу представления. Используйте его для быстрого изменения области. Щелкните **область** пилюля, чтобы открыть средство выбора области. Здесь отображаются учетные записи выставления счетов, корневая группа управления и все подписки, не вложенные в корневую группу управления. Чтобы выбрать область, щелкните фон, чтобы выделить ее, а затем нажмите кнопку **выбрать** внизу. Для детализации вложенных областей, например групп ресурсов в подписке, щелкните ссылку имя области. Чтобы выбрать родительскую область на любом вложенном уровне, щелкните **выбрать этот &lt;scope @ no__t-2** в верхней части средства выбора области.

## <a name="identify-the-resource-id-for-a-scope"></a>Определение идентификатора ресурса для области

При работе с API-интерфейсами управления затратами знание области является критически важным. Используйте следующие сведения, чтобы создать правильный URI области для API-интерфейсов управления затратами.

### <a name="billing-accounts"></a>Счета выставления счетов

1. Откройте портал Azure а затем в списке служб выберите пункт **Управление затратами и выставление счетов** .
2. В меню учетной записи выставления счетов выберите пункт **Свойства** .
3. Скопируйте идентификатор счета выставления счетов.
4. Ваша область: `"/providers/Microsoft.Billing/billingAccounts/{billingAccountId}"`.

### <a name="billing-profiles"></a>Профили выставления счетов

1. Откройте портал Azure а затем в списке служб выберите пункт **Управление затратами и выставление счетов** .
2. В меню учетной записи выставления счетов выберите **Профили выставления счетов** .
3. Щелкните имя нужного профиля выставления счетов.
4. В меню Профиль выставления счетов выберите пункт **Свойства** .
5. Скопируйте учетную запись выставления счетов и идентификаторы профилей выставления счетов.
6. Ваша область: `"/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/billingProfiles/{billingProfileId}"`.

### <a name="invoice-sections"></a>Разделы счетов

1. Откройте портал Azure а затем в списке служб выберите пункт **Управление затратами и выставление счетов** .
2. Выберите **раздел счета** в меню счета выставления счетов.
3. Щелкните имя нужного раздела счета.
4. В меню раздела счета выберите пункт **Свойства** .
5. Скопируйте учетную запись выставления счетов и идентификаторы разделов накладных.
6. Ваша область: `"/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/invoiceSections/{invoiceSectionId}"`.

### <a name="ea-departments"></a>Отделы EA

1. Откройте портал Azure а затем в списке служб выберите пункт **Управление затратами и выставление счетов** .
2. В меню учетной записи выставления счетов выберите **отделы** .
3. Щелкните имя нужного отдела.
4. В меню отдел выберите пункт **Свойства** .
5. Скопируйте учетную запись выставления счетов и идентификаторы отделов.
6. Ваша область: `"/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/departments/{departmentId}"`.

### <a name="ea-enrollment-account"></a>Учетная запись регистрации EA

1. Откройте портал Azure и выберите **Управление затратами + выставление счетов** в списке служб.
2. Выберите **учетные записи регистрации** в меню Учетная запись выставления счетов.
3. Щелкните имя нужной учетной записи регистрации.
4. В меню учетной записи регистрации выберите пункт **Свойства** .
5. Скопируйте учетную запись выставления счетов и идентификаторы учетной записи регистрации.
6. Ваша область: `"/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/enrollmentAccounts/{enrollmentAccountId}"`.

### <a name="management-group"></a>группа управления;

1. Откройте портал Azure и выберите **группы управления** в списке служб.
2. Перейдите к нужной группе управления.
3. Скопируйте идентификатор группы управления из таблицы.
4. Ваша область: `"/providers/Microsoft.Management/managementGroups/{id}"`.

### <a name="subscription"></a>Subscription

1. Откройте портал Azure и перейдите к пункту **подписки** в списке служб.
2. Скопируйте идентификатор подписки из таблицы.
3. Ваша область: `"/subscriptions/{id}"`.

### <a name="resource-groups"></a>Группы ресурсов

1. Откройте портал Azure и перейдите к **группе ресурсов** в списке служб.
2. Щелкните имя нужной группы ресурсов.
3. В меню Группа ресурсов выберите пункт **Свойства** .
4. Скопируйте значение поля идентификатор ресурса.
5. Ваша область: `"/subscriptions/{id}/resourceGroups/{name}"`.

В настоящее время Управление затратами поддерживается в [Azure](https://management.azure.com) для [государственных организаций и Azure](https://management.usgovcloudapi.net). Дополнительные сведения об Azure для государственных организаций см. в статье [глобальные и правительственные конечные точки API Azure](../azure-government/documentation-government-developer-guide.md#endpoint-mapping) _._

## <a name="next-steps"></a>Дальнейшие действия

- См. первое краткое руководство по [работе с Управлением затратами](quick-acm-cost-analysis.md).
