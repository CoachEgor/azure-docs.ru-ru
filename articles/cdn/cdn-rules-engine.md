---
title: Переопределение режима HTTP с помощью обработчика правил Azure CDN | Документация Майкрософт
description: Обработчик правил помогает настраивать способ обработки HTTP-запросов в Azure CDN, включая блокировку доставки определенных типов содержимого, определение политики кэширования и изменение заголовков HTTP.
services: cdn
documentationcenter: ''
author: mdgattuso
manager: danielgi
editor: ''
ms.assetid: 625a912b-91f2-485d-8991-128cc194ee71
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/11/2018
ms.author: magattus
ms.openlocfilehash: 2ac43b472758f3403bc87bf3d64321eb97109f53
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60335612"
---
# <a name="override-http-behavior-using-the-azure-cdn-rules-engine"></a>Переопределение режима HTTP с помощью обработчика правил Azure CDN
[!INCLUDE [cdn-premium-feature](../../includes/cdn-premium-feature.md)]

## <a name="overview"></a>Обзор
Обработчик правил Azure CDN позволяет настраивать процесс обработки запросов HTTP. Например, можно блокировать доставку определенных типов содержимого, определять политику кэширования и изменять заголовок HTTP. В этом руководстве описано, как создать правило, которое изменяет схему кэширования ресурсов CDN. Дополнительные сведения о синтаксисе обработчика правил см. в разделе [Обработчик правил Azure CDN](cdn-rules-engine-reference.md).

## <a name="access"></a>Access
Чтобы получить доступ к обработчику правил, сначала необходимо получить доступ к странице управление Azure CDN. Это можно сделать, выбрав **Управление** в верхней части страницы **профиля CDN**. В зависимости от того, была ли конечная точка оптимизирована для динамического ускорения сайтов (DSA), вы получаете доступ к обработчику правил с набором правил, подходящих для вашего типа конечной точки.

- Конечные точки, оптимизированные для веб-доставки общего характера или другой оптимизации (не DSA): 
    
    На вкладке **Большой HTTP-объект** выберите **Обработчик правил**.

    ![Обработчик правил для HTTP](./media/cdn-rules-engine/cdn-http-rules-engine.png)

- Конечные точки, оптимизированные для DSA: 
    
    На вкладке **ADN** выберите **Обработчик правил**. 
    
    Термин ADN используется Verizon для задания содержимого DSA. Все правила, которые созданы здесь и не оптимизированы для DSA, будут игнорироваться конечными точками в профиле. 

    ![Обработчик правил для DSA](./media/cdn-rules-engine/cdn-dsa-rules-engine.png)

## <a name="tutorial"></a>Учебник
1. На странице **профиля CDN** выберите **Управление**.
   
    ![Кнопка "Управление" для профиля CDN](./media/cdn-rules-engine/cdn-manage-btn.png)
   
    Откроется портал управления CDN.

2. На вкладке **Большой HTTP-объект** выберите **Обработчик правил**.
   
    После этого на экране появятся параметры для нового правила.
   
    ![Параметры нового правила CDN](./media/cdn-rules-engine/cdn-new-rule.png)
   
   > [!IMPORTANT]
   > Порядок перечисления правил влияет на способ их обработки. Последующее правило может переопределить действия, заданные предыдущим правилом.
   > 

3. В поле **Имя и описание** введите имя.

4. Укажите тип запросов, к которым применяется правило. Используйте условие соответствия по умолчанию — **Всегда**. 
   
   ![Условие соответствия правила CDN](./media/cdn-rules-engine/cdn-request-type.png)
   
   > [!NOTE]
   > В раскрывающемся списке доступны несколько условий соответствия. Дополнительную информацию о выбранных условиях соответствия можно узнать, выбрав синий информационный значок слева.
   > 
   >  Подробный список условных выражений см. в статье [Условные выражения обработчика правил](cdn-rules-engine-reference-match-conditions.md).
   >  
   > Подробный список условий соответствия см. в статье [Условия соответствия обработчика правил](cdn-rules-engine-reference-match-conditions.md).
   > 
   > 

5. Чтобы добавить новую функцию, нажмите кнопку **+** рядом с пунктом **Функции**.  В раскрывающемся списке в левой части выберите **Принудительно извлечь внутренний максимальный возраст**.  В появившемся текстовом поле введите **300**. Не изменяйте остальные значения по умолчанию.
   
   ![Функция правила CDN](./media/cdn-rules-engine/cdn-new-feature.png)
   
   > [!NOTE]
   > Несколько функций доступны в раскрывающемся списке. Дополнительную информацию о выбранных функциях можно узнать, выбрав синий информационный значок слева. 
   >
   > Для пункта **Принудительное использование внутреннего максимального срока** заголовки `Cache-Control` и `Expires` актива переопределяются для управления, когда граничный узел CDN обновляет актив из источника. В этом примере граничный узел CDN кэширует ресурс на 300 секунд или 5 минут, прежде чем обновить его из источника.
   > 
   > Полный список доступных функций см. в статье [Функции обработчика правил Azure CDN](cdn-rules-engine-reference-features.md).
   > 
   > 

6. Чтобы сохранить новое правило, нажмите кнопку **Добавить**.  Теперь новое правило ожидает утверждения. После утверждения состояние правила изменится с **Pending XML** (XML в ожидании) на **Active XML** (Активный XML).
   
   > [!IMPORTANT]
   > Распространение изменений правил по сети Azure CDN может занять до 10 минут.
   > 
   > 

## <a name="see-also"></a>См. также
* [Общие сведения о сети доставки содержимого Azure](cdn-overview.md)
* [Обработчик правил Azure CDN](cdn-rules-engine-reference.md)
* [Условия соответствия для обработчика правил Azure CDN](cdn-rules-engine-reference-match-conditions.md)
* [Условные выражения обработчика правил Azure CDN](cdn-rules-engine-reference-conditional-expressions.md)
* [Функции обработчика правил Azure CDN](cdn-rules-engine-reference-features.md)
* [Пятница с Azure: Мощные новые функции уровня "премиум" Azure CDN](https://azure.microsoft.com/documentation/videos/azure-cdns-powerful-new-premium-features/) (видео)