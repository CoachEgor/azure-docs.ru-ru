---
title: Azure CDN из условий соответствия обработчика правил Microsoft Standard | Документация Майкрософт
description: Справочная документация по сети доставки содержимого Azure от условий соответствия Microsoft Standard Rule Engine.
services: cdn
author: mdgattuso
ms.service: azure-cdn
ms.topic: article
ms.date: 11/01/2019
ms.author: magattus
ms.openlocfilehash: a72452d37b152a9463a5aee0e199fd42ea852236
ms.sourcegitcommit: b2fb32ae73b12cf2d180e6e4ffffa13a31aa4c6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2019
ms.locfileid: "73615966"
---
# <a name="azure-cdn-from-microsoft-standard-rules-engine-match-conditions"></a>Azure CDN из условий соответствия обработчика стандартных правил Майкрософт

В этой статье приведены подробные описания доступных условий соответствия для сети доставки содержимого (CDN) Azure от [обработчика стандартных правил](cdn-standard-rules-engine.md)Майкрософт.

Первая часть правила — это набор условий соответствия. Каждое правило может иметь до 4 условий соответствия. Условие соответствия определяет конкретные типы запросов, для которых будут выполняться определенные в правиле действия. Если используется несколько условий соответствия, они будут сгруппированы вместе с помощью логики и.

Например, с помощью условия соответствия вы сможете:

- Фильтрация запросов, созданных по определенному IP-адресу или стране или региону.
- Отфильтровать запросы по информации из заголовка.
- Фильтрация запросов с мобильных или настольных устройств.

## <a name="match-conditions"></a>Условия соответствия

Для использования доступны следующие условия соответствия. 

### <a name="device-type"></a>Тип устройства 

Условие соответствия типов устройств определяет запросы, выполненные на мобильном или настольном устройстве на основе его свойств.  

**Обязательные поля**

Оператор | Поддерживаемое значение
---------|----------------
Равно, не равно | Мобильный, Настольный


### <a name="http-version"></a>Версия HTTP

Условие соответствия "версия HTTP" определяет запросы на основе версии HTTP, с которой поступил запрос.

**Обязательные поля**

Оператор | Поддерживаемое значение
---------|----------------
Равно, не равно | 2,0, 1,1, 1,0, 0,9, все


### <a name="request-cookies"></a>Файлы Cookie запроса

Условие соответствия "cookie-файлы запросов" определяет запросы на основе данных файла cookie во входящем запросе.

**Обязательные поля**

Имя файла cookie | Оператор | Значение файла cookie | Преобразование регистра
------------|----------|--------------|---------------
string | [Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

Основные сведения
- Подстановочные знаки, включая звездочки (*), не поддерживаются при указании имени файла cookie, для сравнения могут использоваться только точные совпадения имен файлов cookie.
- Для каждого экземпляра этого условия соответствия можно указать только одно имя файла cookie.
- Сравнение имен файлов cookie выполняется без учета регистра.
- Указывайте несколько значений файла cookie, разделяя их одним пробелом. 
- Значения параметров cookie могут использовать подстановочные знаки.
- Если подстановочное значение не указано, это условие соответствия будет удовлетворять только точному совпадению. Например, при указании значения "value" будет соответствовать "value", но не "значение1". 

### <a name="post-argument"></a>Аргумент POST

**Обязательные поля**

Имя аргумента | Оператор | Значение аргумента | Преобразование регистра
--------------|----------|----------------|---------------
string | [Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

### <a name="query-string"></a>Строка запроса

Условия соответствия строки запроса идентифицируют запросы, содержащие указанный параметр строки запроса. Для этого параметра задается значение, соответствующее указанному шаблону. Параметры строки запроса (например, параметр=значение) в URL-адресе запроса определяют, выполнено ли это условие. Это условие соответствия определяет параметр строки запроса по имени и принимает одно или несколько значений для значения параметра.

**Обязательные поля**

Оператор | Строка запроса | Преобразование регистра
---------|--------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

### <a name="remote-address"></a>Удаленный адрес

Условие сопоставления удаленных адресов определяет запросы на основе расположения или IP-адреса запрашивающего.

**Обязательные поля**

Оператор | Поддерживаемые значения
---------|-----------------
Любой | Недоступно
Географическое соответствие | Коды стран
Соответствие IP-адресов | IP-адреса (разделенные пробелами)
Не все | Недоступно
Не географическое соответствие | Коды стран
Не соответствует IP-адресу | IP-адреса (разделенные пробелами)

Основные сведения

- Используйте нотацию CIDR.
- Укажите несколько IP-адресов и/или блоков IP-адресов, разделив их одним пробелом. Например:
  - **Пример IPv4**: 1.2.3.4 10.20.30.40 соответствует любым запросам, поступающим из 1.2.3.4 или 10.20.30.40.
  - **Пример IPv6**: 1:2:3:4:5:6:7:8 10:20:30:40:50:60:70:80 соответствует любым запросам, поступающим из 1:2:3:4:5:6:7:8 или 10:20:30:40:50:60:70:80.
- Синтаксис блока IP-адресов — базовый IP-адрес, за которым следуют косая черта и размер префикса. Например:
  - **Пример IPv4**: 5.5.5.64/26 соответствует любым запросам, поступающим из диапазона 5.5.5.64–5.5.5.127.
  - **Пример IPv6**: 1:2:3:/48 соответствует любым запросам, поступающим из диапазона 1:2:3:0:0:0:0:0–1:2:3:ffff:ffff:ffff:ffff:ffff.

### <a name="request-body"></a>Текст запроса

**Обязательные поля**

Оператор | Текст запроса | Преобразование регистра
---------|--------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

### <a name="request-header"></a>Заголовок запроса

**Обязательные поля**
Имя заголовка | Оператор | Значение заголовка | Преобразование регистра
------------|----------|--------------|---------------
string | [Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

### <a name="request-method"></a>Метод запроса

**Обязательные поля**

Оператор | Поддерживаемое значение
---------|----------------
Равно, не равно | GET, POST, РАЗМЕЩЕНИЕ, УДАЛЕНИЕ, HEAD, ПАРАМЕТРЫ, ТРАССИРОВКА

Основные сведения

- Только метод запроса GET может создавать кэшированное содержимое в CDN. Все остальные методы запроса передаются через сеть. 

### <a name="request-protocol"></a>Протокол запроса

**Обязательные поля**

Оператор | Поддерживаемое значение
---------|----------------
Равно, не равно | HTTP, HTTPS

### <a name="request-url"></a>Request URL (URL-адрес запроса)

**Обязательные поля**

Оператор | Request URL (URL-адрес запроса) | Преобразование регистра
---------|-------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

Основные сведения

- При вводе URL-адреса запроса убедитесь, что вы включили сведения о протоколе. Например, "https://www. [yourdomain]. com "

### <a name="url-file-extension"></a>Расширение файла URL-адреса

**Обязательные поля**

Оператор | Добавочный номер | Преобразование регистра
---------|-----------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

Основные сведения

- Для расширения не включайте начальную точку. Например, используйте HTML вместо. HTML.

### <a name="url-file-name"></a>Имя файла URL-адреса

**Обязательные поля**

Оператор | Имя файла | Преобразование регистра
---------|-----------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

Основные сведения

- Чтобы указать несколько имен файлов, разделите каждое имя файла одним пробелом. 

### <a name="url-path"></a>Путь URL-адреса

**Обязательные поля**

Оператор | Значение | Преобразование регистра
---------|-------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

Основные сведения

- Для значения имени файла можно использовать подстановочные знаки. Например, каждый шаблон имени файла может содержать одну или несколько звездочек (*), где каждая звездочка соответствует последовательности одного или нескольких знаков.

## <a name="reference-for-rules-engine-match-conditions"></a>Справка по условиям соответствия обработчика правил

### <a name="standard-operator-list"></a>Список стандартных операторов

Для правил, содержащих список стандартных операторов, допустимы следующие операторы:

- Любой
- Равно 
- Содержит 
- Начинается с 
- Оканчивается на 
- Меньше
- Меньше или равно
- Больше
- Больше или равно
- Не все
- Не содержит
- Не начинается с 
- Не заканчивается на 
- Не меньше
- Не меньше или равно
- Не больше
- Не больше или равно

Для числовых операторов, например "меньше" или "больше или равно", сравнение будет основано на длине. В этом случае значение в условии соответствия должно быть целым числом, равным длине, которую вы хотите сравнить. 

---

[Вверх](#match-conditions)

</br>

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о сети доставки содержимого Azure](cdn-overview.md)
- [Справочник по обработчику правил](cdn-standard-rules-engine-reference.md)
- [Действия обработчика правил](cdn-standard-rules-engine-actions.md)
- [Принудительное использование HTTPS с помощью стандартного обработчика правил](cdn-standard-rules-engine.md)
