---
title: Условия соответствия в обработчике стандартных правил для Azure CDN | Документация Майкрософт
description: Справочная документация по условиям соответствия в обработчике стандартных правил для сети доставки содержимого Azure (Azure CDN).
services: cdn
author: mdgattuso
ms.service: azure-cdn
ms.topic: article
ms.date: 11/01/2019
ms.author: magattus
ms.openlocfilehash: 425266e2a7ca42bb17ca598ddfc2f2b86591f32e
ms.sourcegitcommit: 375b70d5f12fffbe7b6422512de445bad380fe1e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2019
ms.locfileid: "74900177"
---
# <a name="match-conditions-in-the-standard-rules-engine-for-azure-cdn"></a>Условия соответствия в обработчике стандартных правил для Azure CDN

В [обработчике стандартных правил](cdn-standard-rules-engine.md) для сети доставки содержимого Azure (Azure CDN) правило состоит из одного или нескольких условий соответствия и действия. В этой статье содержатся подробные описания условий соответствия, которые можно использовать в обработчике стандартных правил для Azure CDN.

Первая часть правила — это условие соответствия или набор условий соответствия. В обработчике стандартных правил для Azure CDN каждое правило может иметь не более четырех условий соответствия. Условие соответствия определяет определенные типы запросов, для которых выполняются определенные действия. При использовании нескольких условий соответствия условия соответствия группируются вместе с помощью логики и.

Например, с помощью условия соответствия вы сможете:

- Фильтрация запросов на основе определенного IP-адреса, страны или региона.
- Отфильтровать запросы по информации из заголовка.
- Фильтрация запросов с мобильных устройств или настольных устройств.

## <a name="match-conditions"></a>Условие соответствия

Следующие условия соответствия доступны для использования в обработчике стандартных правил для Azure CDN. 

### <a name="device-type"></a>Тип устройства 

Определяет запросы, выполненные с мобильного устройства или с настольного устройства.  

#### <a name="required-fields"></a>Обязательные поля

operator | Поддерживаемые значения
---------|----------------
Равно, не равно | Мобильный, Настольный

### <a name="http-version"></a>Версия HTTP

Определяет запросы на основе HTTP-версии запроса.

#### <a name="required-fields"></a>Обязательные поля

operator | Поддерживаемые значения
---------|----------------
Равно, не равно | 2,0, 1,1, 1,0, 0,9, все

### <a name="request-cookies"></a>Файлы cookies запроса

Определяет запросы на основе данных файла cookie во входящем запросе.

#### <a name="required-fields"></a>Обязательные поля

Имя файла cookie | operator | Значение файла cookie | Преобразование регистра
------------|----------|--------------|---------------
Строка | [Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

#### <a name="key-information"></a>Основные сведения

- При указании имени файла cookie нельзя использовать подстановочные знаки (включая звездочки (\*)). необходимо использовать точное имя файла cookie.
- Для каждого экземпляра этого условия соответствия можно указать только одно имя файла cookie.
- Сравнение имен файлов cookie выполняется без учета регистра.
- Чтобы указать несколько значений cookie, используйте один пробел между каждым значением файла cookie. 
- Значения параметров cookie могут использовать подстановочные знаки.
- Если подстановочное значение не указано, это условие соответствия удовлетворяет только точному совпадению. Например, "значение" будет соответствовать "value", но не "значение1". 

### <a name="post-argument"></a>Аргумент POST

Определяет запросы на основе аргументов, определенных для метода запроса POST, который используется в запросе. 

#### <a name="required-fields"></a>Обязательные поля

Имя аргумента | operator | Значение аргумента | Преобразование регистра
--------------|----------|----------------|---------------
Строка | [Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

### <a name="query-string"></a>Строка запроса

Определяет запросы, содержащие конкретный параметр строки запроса. Для этого параметра задается значение, соответствующее определенному шаблону. Параметры строки запроса (например, **параметр = значение**) в URL-адресе запроса определяют, выполнено ли это условие. Это условие соответствия определяет параметр строки запроса по имени и принимает одно или несколько значений для значения параметра.

#### <a name="required-fields"></a>Обязательные поля

operator | Строка запроса | Преобразование регистра
---------|--------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

### <a name="remote-address"></a>Удаленный адрес

Определяет запросы на основе расположения или IP-адреса инициатора запроса.

#### <a name="required-fields"></a>Обязательные поля

operator | Поддерживаемые значения
---------|-----------------
Любой | Н/Д
Географическое соответствие | Код страны
Соответствие IP-адресов | IP-адрес (с разделителями-пробелами)
Не все | Н/Д
Не географическое соответствие | Код страны
Не соответствует IP-адресу | IP-адрес (с разделителями-пробелами)

#### <a name="key-information"></a>Основные сведения

- Используйте нотацию CIDR.
- Чтобы указать несколько IP-адресов и блоков IP-адресов, используйте один пробел между значениями:
  - **Пример IPv4**: *1.2.3.4 10.20.30.40* соответствует всем запросам, поступающим из адреса 1.2.3.4 или 10.20.30.40.
  - **Пример IPv6**: *1:2:3:4:5:6:7:8 10:20:30:40:50:60:70:80* соответствует всем запросам, поступающим из адреса 1:2:3:4:5:6:7:8 или 10:20:30:40:50:60:70:80.
- Синтаксис блока IP-адресов — базовый IP-адрес, за которым следуют косая черта и размер префикса. Пример.
  - **Пример IPv4**. *5.5.5.64/26* соответствует всем запросам, поступившим из адресов 5.5.5.64 через 5.5.5.127.
  - **Пример IPv6**: *1:2:3:/48* соответствует всем запросам, поступившим с адресов 1:2:3:0:0:0:0:0 по 1:2: 3: FFFF: FFFF: FFFF: FFFF: FFFF.

### <a name="request-body"></a>Тело запроса

Определяет запросы на основе конкретного текста, отображаемого в тексте запроса.

#### <a name="required-fields"></a>Обязательные поля

operator | Тело запроса | Преобразование регистра
---------|--------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

### <a name="request-header"></a>Заголовок запроса

Определяет запросы, которые используют конкретный заголовок в запросе.

#### <a name="required-fields"></a>Обязательные поля

Имя заголовка | operator | Значение заголовка | Преобразование регистра
------------|----------|--------------|---------------
Строка | [Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

### <a name="request-method"></a>Метод запроса

Определяет запросы, использующие указанный метод запроса.

#### <a name="required-fields"></a>Обязательные поля

operator | Поддерживаемые значения
---------|----------------
Равно, не равно | GET, POST, РАЗМЕЩЕНИЕ, УДАЛЕНИЕ, HEAD, ПАРАМЕТРЫ, ТРАССИРОВКА

#### <a name="key-information"></a>Основные сведения

- Только метод запроса GET может создавать кэшированное содержимое в Azure CDN. Все остальные методы запроса передаются через сеть. 

### <a name="request-protocol"></a>Протокол запроса

Определяет запросы, использующие указанный протокол.

#### <a name="required-fields"></a>Обязательные поля

operator | Поддерживаемые значения
---------|----------------
Равно, не равно | HTTP, HTTPS

### <a name="request-url"></a>Request URL (URL-адрес запроса)

Определяет запросы, соответствующие указанному URL-адресу.

#### <a name="required-fields"></a>Обязательные поля

operator | Request URL (URL-адрес запроса) | Преобразование регистра
---------|-------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

#### <a name="key-information"></a>Основные сведения

- При использовании этого условия правила не забудьте включить сведения о протоколе. Например: *https://www.\<yourdomain\>.com* .

### <a name="url-file-extension"></a>Расширение файла URL-адреса

Определяет запросы, включающие указанное расширение файла в имя файла в запросе URL-адреса.

#### <a name="required-fields"></a>Обязательные поля

operator | Расширение | Преобразование регистра
---------|-----------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

#### <a name="key-information"></a>Основные сведения

- Для расширения не включайте начальную точку. Например, используйте *HTML* вместо *. HTML*.

### <a name="url-file-name"></a>Имя файла URL-адреса

Определяет запросы, содержащие указанное имя файла в URL-адресе запроса.

#### <a name="required-fields"></a>Обязательные поля

operator | Имя файла | Преобразование регистра
---------|-----------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

#### <a name="key-information"></a>Основные сведения

- Чтобы указать несколько имен файлов, разделите каждое имя файла одним пробелом. 

### <a name="url-path"></a>URL-адрес

Определяет запросы, которые включают указанный путь в URL-адресе запроса.

#### <a name="required-fields"></a>Обязательные поля

operator | Value | Преобразование регистра
---------|-------|---------------
[Список стандартных операторов](#standard-operator-list) | String, int | Без преобразования, до верхнего регистра

#### <a name="key-information"></a>Основные сведения

- Для значения имени файла можно использовать подстановочные знаки. Например, каждый шаблон имени файла может содержать одну или несколько звездочек (*), где каждая звездочка соответствует последовательности одного или нескольких знаков.

## <a name="reference-for-rules-engine-match-conditions"></a>Справка по условиям соответствия обработчика правил

### <a name="standard-operator-list"></a>Список стандартных операторов

Для правил, которые принимают значения из списка стандартных операторов, допустимы следующие операторы:

- Любой
- Равно 
- Содержит 
- Начинается с 
- Оканчивается на 
- Менее
- Меньше или равно
- Более
- Больше или равно
- Не все
- Не содержит
- Не начинается с 
- Не заканчивается на 
- Не меньше
- Не меньше или равно
- Не больше
- Не больше или равно

Для числовых операторов, таких как *меньше* и *больше или равно*, используется сравнение, основанное на длине. В этом случае значение в условии соответствия должно быть целым числом, равным длине, которую необходимо сравнить. 

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о сети доставки содержимого Azure](cdn-overview.md)
- [Справочник по обработчику стандартных правил](cdn-standard-rules-engine-reference.md)
- [Действия в обработчике стандартных правил](cdn-standard-rules-engine-actions.md)
- [Принудительное применение протокола HTTPS с помощью стандартного обработчика правил](cdn-standard-rules-engine.md)
