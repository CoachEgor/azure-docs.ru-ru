---
title: Условия соответствия в движке стандартных правил для Azure CDN Документы Майкрософт
description: Справочная документация для условий соответствия в движке стандартных правил для сети доставки содержимого Azure (Azure CDN).
services: cdn
author: asudbring
ms.service: azure-cdn
ms.topic: article
ms.date: 11/01/2019
ms.author: allensu
ms.openlocfilehash: b8050b973027ac91ede0ba98f4d1c76831da9828
ms.sourcegitcommit: 8dc84e8b04390f39a3c11e9b0eaf3264861fcafc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2020
ms.locfileid: "81259938"
---
# <a name="match-conditions-in-the-standard-rules-engine-for-azure-cdn"></a>Условия соответствия в движке стандартных правил для Azure CDN

В [движке стандартных правил](cdn-standard-rules-engine.md) для сети доставки содержимого Azure (Azure CDN) правило состоит из одного или нескольких условий соответствия и действия. В этой статье приводится подробное описание условий соответствия, которые можно использовать в движке стандартных правил для Azure CDN.

Первая часть правила — это условие соответствия или набор условий соответствия. В движке стандартных правил для Azure CDN каждое правило может иметь до четырех условий соответствия. Условие соответствия определяет определенные типы запросов, для которых выполняются определенные действия. Если вы используете несколько условий соответствия, условия соответствия сгруппированы с помощью и логики.

Например, с помощью условия соответствия вы сможете:

- Запросы фильтра на основе определенного IP-адреса, страны или региона.
- Отфильтровать запросы по информации из заголовка.
- Запросы фильтров с мобильных устройств или настольных устройств.

## <a name="match-conditions"></a>Условие соответствия

Следующие условия соответствия доступны для использования в движке стандартных правил для Azure CDN. 

### <a name="device-type"></a>Тип устройства 

Идентифицирует запросы, сделанные с мобильного устройства или настольного устройства.  

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Равные, не равные | Мобильный, Рабочий стол

### <a name="http-version"></a>параметр "Версия HTTP"

Определяет запросы на основе версии запроса HTTP.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Равные, не равные | 2.0, 1.1, 1.0, 0.9, Все

### <a name="request-cookies"></a>Файлы cookies запроса

Идентифицирует запросы на основе информации о файлах cookie в входящий запрос.

#### <a name="required-fields"></a>Обязательные поля

Имя файла cookie | Оператор | Значение cookie | Преобразование корпуса
------------|----------|--------------|---------------
Строка | [Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

#### <a name="key-information"></a>Основные сведения

- Вы не можете использовать значения подстановочных\*знаков (включая звездочки ()), когда вы указываете имя cookie; вы должны использовать точное имя cookie.
- Вы можете указать только одно имя файла cookie в экземпляре этого условия соответствия.
- Сравнение имен файлов cookie выполняется без учета регистра.
- Чтобы указать несколько значений файлов cookie, используйте одно пространство между значениями каждого файла cookie. 
- Значения cookie могут использовать значения подстановочных знаков.
- Если значение подстановочного знака не было указано, только точное соответствие удовлетворяет этому условию соответствия. Например, "Value" будет соответствовать "Value", но не "Value1". 

### <a name="post-argument"></a>Опубликовать аргумент

Определяет запросы на основе аргументов, определенных для метода запроса POST, используемого в запросе. 

#### <a name="required-fields"></a>Обязательные поля

Имя аргумента | Оператор | Значение аргумента | Преобразование корпуса
--------------|----------|----------------|---------------
Строка | [Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

### <a name="query-string"></a>Строка запроса

Определяет запросы, содержащие определенный параметр строки запроса. Этот параметр устанавливается для значения, которое соответствует определенному шаблону. Параметры строки запроса (например, **параметр и значение)** в URL-адресе запроса определяют, выполняется ли это условие. Это условие соответствия определяет параметр строки запроса по имени и принимает одно или несколько значений для значения параметра.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Строка запроса | Преобразование корпуса
---------|--------------|---------------
[Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

### <a name="remote-address"></a>Удаленный адрес

Определяет запросы на основе местоположения или IP-адреса запрашивателя.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|-----------------
Любой | Н/Д
Гео Матч | Код страны
IP матч | IP-адрес (пространство-отделены)
Не любой | Н/Д
Не Гео матч | Код страны
Не IP матч | IP-адрес (пространство-отделены)

#### <a name="key-information"></a>Основные сведения

- Используйте нотацию CIDR.
- Чтобы указать несколько IP-адресов и блоков IP-адресов, используйте одно пространство между значениями:
  - **Пример IPv4:** *1.2.3.4 10.20.30.40* соответствует любым запросам, которые поступают с адреса 1.2.3.4 или 10.20.30.40.
  - **Пример IPv6**: *1:2:3:4:5:6:7:8 10:20:30:40:60:70:70:80.*
- Синтаксис блока IP-адресов — базовый IP-адрес, за которым следуют косая черта и размер префикса. Пример:
  - **Пример IPv4:** *5.5.5.64/26* соответствует любым запросам, которые поступают с адресов 5.5.5.64 через 5.5.5.127.
  - **Пример IPv6**: *1:2:3:/48* совпадает с любыми запросами, которые поступают с адресов 1:2:3:0:0:0 до 1:2:3:ffff:ffff:ffff:ffff:ffff: ffff.

### <a name="request-body"></a>Тело запроса

Определяет запросы на основе конкретного текста, который отображается в теле запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Тело запроса | Преобразование корпуса
---------|--------------|---------------
[Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

### <a name="request-header"></a>Заголовок запроса

Определяет запросы, которые используют определенный заголовок в запросе.

#### <a name="required-fields"></a>Обязательные поля

Имя заголовка | Оператор | Значение заголовка | Преобразование корпуса
------------|----------|--------------|---------------
Строка | [Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

### <a name="request-method"></a>Метод запроса

Определяет запросы, в которые используется указанный метод запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Равные, не равные | ПОЛУЧИТЬ, ОТПРАВИТЬ, ПОЛОЖИТЬ, УДАЛИТЬ, ГОЛОВА, ВАРИАНТЫ, СЛЕД

#### <a name="key-information"></a>Основные сведения

- Только метод запроса GET может генерировать кэшированное содержимое в Azure CDN. Все остальные методы запроса передаются через сеть. 

### <a name="request-protocol"></a>Протокол запроса

Определяет запросы, в которые используется указанный протокол.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Равные, не равные | HTTP, HTTPS

### <a name="request-url"></a>Request URL (URL-адрес запроса)

Идентифицирует запросы, которые соответствуют указанному URL- адресу.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Request URL (URL-адрес запроса) | Преобразование корпуса
---------|-------------|---------------
[Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

#### <a name="key-information"></a>Основные сведения

- При использовании этого условия правила обязательно включите информацию о протоколе. Например: *https://www.\<yourdomain\>.com*.

### <a name="url-file-extension"></a>Расширение файла URL

Определяет запросы, которые включают указанное расширение файла в имя файла в запрашиваемом URL- уходе.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Расширение | Преобразование корпуса
---------|-----------|---------------
[Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

#### <a name="key-information"></a>Основные сведения

- Для расширения не включайте ведущий период; например, используйте *html* вместо *.html*.

### <a name="url-file-name"></a>Имя файла URL

Определяет запросы, которые включают указанное имя файла в запрашивающий URL.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Имя файла | Преобразование корпуса
---------|-----------|---------------
[Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

#### <a name="key-information"></a>Основные сведения

- Чтобы указать несколько имен файлов, разделите каждое имя файла с одним пространством. 

### <a name="url-path"></a>URL-адрес

Определяет запросы, которые включают указанный путь в URL-адрес запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Значение | Преобразование корпуса
---------|-------|---------------
[Стандартный список операторов](#standard-operator-list) | Строка, Int | Нет преобразования, в верхней части регистра, в нижний регистр

#### <a name="key-information"></a>Основные сведения

- Для значения имени файла можно использовать подстановочные знаки. Например, каждый шаблон имени файла может содержать одну или несколько звездочек (*), где каждая звездочка соответствует последовательности одного или нескольких знаков.

## <a name="reference-for-rules-engine-match-conditions"></a>Справка по условиям соответствия обработчика правил

### <a name="standard-operator-list"></a>Стандартный список операторов

Для правил, принимающих значения из стандартного списка оператора, действительны следующие операторы:

- Любой
- Равно 
- Содержит 
- Начинается с 
- Заканчивается на 
- Меньше чем
- Меньше или равно
- Больше
- Больше или равно
- Не любой
- Не содержит
- Не начинается с 
- Не заканчивается 
- Не меньше
- Не меньше или равные
- Не больше
- Не больше или равных

Для числовых операторов, таких как *Less* и *Greater, или равных,* используемое сравнение основано на длине. В этом случае значение в состоянии соответствия должно быть равным длине, которую вы хотите сравнить. 

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о сети доставки содержимого Azure](cdn-overview.md)
- [Справочник по стандартному обработчику правил](cdn-standard-rules-engine-reference.md)
- [Действия в движке стандартных правил](cdn-standard-rules-engine-actions.md)
- [Принудительное применение HTTPS с помощью стандартного обработчика правил](cdn-standard-rules-engine.md)
