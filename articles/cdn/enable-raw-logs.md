---
title: Azure CDN необработанных журналов HTTP
description: В этой статье описываются необработанные журналы HTTP Azure CDN.
services: cdn
author: asudbring
manager: KumudD
ms.service: azure-cdn
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/10/2020
ms.author: allensu
ms.openlocfilehash: 79ced4df8df12bf2ef1fbe0075b53d02fafb2aff
ms.sourcegitcommit: f97d3d1faf56fb80e5f901cd82c02189f95b3486
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/11/2020
ms.locfileid: "79129837"
---
# <a name="azure-cdn-http-raw-logs"></a>Azure CDN необработанных журналов HTTP
Необработанные журналы содержат подробные сведения об операциях и ошибках, которые важны для аудита и устранения неполадок. Необработанные журналы отличаются от журналов действий. Журналы действий позволяют видеть операции, выполняемые в ресурсах Azure. Необработанные журналы содержат записи об операциях ресурса.

> [!IMPORTANT]
> Функция "журналы HTTP RAW" доступна для Azure CDN от Майкрософт.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу. 

## <a name="sign-in-to-azure"></a>Вход в Azure

Войдите на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).

## <a name="configuration"></a>Конфигурация

Чтобы настроить необработанные журналы для Azure CDN из профиля Майкрософт, выполните следующие действия. 

1. В меню портал Azure выберите **все ресурсы** >>  **\<> профиля-CDN**.

2. В разделе **мониторинг**выберите **параметры диагностики**.

3. Выберите **+ Добавить параметр диагностики**.

    ![Параметр диагностики CDN](./media/cdn-raw-logs/raw-logs-01.png)

    > [!IMPORTANT]
    > Необработанные журналы доступны только на уровне профиля, а агрегированные журналы кода состояния HTTP доступны на уровне конечной точки.

4. В разделе **параметры диагностики**введите имя параметра диагностики в разделе **имя параметров диагностики**.

5. Выберите **Журнал** и задайте срок хранения в днях.

6. Выберите **сведения о назначении**. Параметры назначения:
    * **Отправить на Log Analytics**
        * Выберите **подписку** и **log Analytics рабочую область**.
    * **Архивация в учетную запись хранения**
        * Выберите **подписку** и **учетную запись хранения**.
    * **Поток в концентратор событий**
        * Выберите **подписку**, **пространство имен концентратора событий**, **имя концентратора событий (необязательно)** и **имя политики концентратора событий**.

    ![Параметр диагностики CDN](./media/cdn-raw-logs/raw-logs-02.png)

7. Щелкните **Сохранить**.

## <a name="raw-logs-properties"></a>Свойства необработанных журналов

Azure CDN из службы Майкрософт в настоящее время предоставляют необработанные журналы (в пакетном режиме каждый час). Необработанные журналы предоставляют отдельные запросы API с каждой записью, имеющей следующую схему: 

| Свойство              | Description                                                                                                                                                                                          |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| траккингреференце     | Уникальная строка ссылки, определяющая запрос, обслуживаемый передней дверцей, который также отправляется клиенту в виде заголовка X-Azure-ref. Требуется для поиска сведений в журналах доступа для конкретного запроса. |
| HttpMethod            | Метод HTTP, используемый для запроса.                                                                                                                                                                     |
| HttpVersion           | Тип запроса или соединения.                                                                                                                                                                   |
| RequestUri            | URI полученного запроса.                                                                                                                                                                         |
| рекуестбитес          | Размер сообщения HTTP-запроса в байтах, включая заголовки запроса и текст запроса.                                                                                                   |
| респонсебитес         | Байт, отправленный внутренним сервером в качестве ответа.                                                                                                                                                    |
| UserAgent             | Тип браузера, который использовался клиентом.                                                                                                                                                               |
| ClientIp              | IP-адрес отправившего запрос клиента.                                                                                                                                                  |
| TimeTaken             | Продолжительность времени, затраченного на выполнение действия, в миллисекундах.                                                                                                                                            |
| Экземпляр SecurityProtocol      | Версия протокола TLS/SSL, используемая запросом, или значение null, если шифрование отсутствует.                                                                                                                           |
| Конечная точка              | Узел конечной точки CDN настроен в родительском профиле CDN.                                                                                                                                   |
| Имя узла внутреннего сервера     | Имя узла внутреннего сервера или источника, куда отправляются запросы.                                                                                                                                |
| Отправлено на начальную панель | Если значение — true, это означает, что на запрос был получен ответ из кэша экранирования источника, а не из точки подключения к границе. Точка защиты источника — это родительский кэш, используемый для улучшения коэффициента попадания в кэш.                                       |
| HttpStatusCode        | Код состояния HTTP, возвращенный прокси-сервером.                                                                                                                                                        |
| хттпстатусдетаилс     | Итоговое состояние запроса. Значение этого строкового значения можно найти в таблице ссылок на состояние.                                                                                              |
| Рор                   | POP ребра, которая ответила на запрос пользователя. Аббревиатуры POP — это коды аэропорта соответствующих Metro.                                                                                   |
| Состояние кэша          | Указывает, был ли объект возвращен из кэша или получен из источника.                                                                                                             |

## <a name="next-steps"></a>Next Steps
В этой статье вы включили необработанные журналы HTTP для службы Microsoft CDN.

Дополнительные сведения о Azure CDN и других службах Azure, упомянутых в этой статье, см. в следующих статьях:

* [Анализ](cdn-log-analysis.md) Azure CDN шаблонов использования.

* Узнайте подробнее о службе [Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/overview).

* Настройте [log Analytics в Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/log-query/get-started-portal).