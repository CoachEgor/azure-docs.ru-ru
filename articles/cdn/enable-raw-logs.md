---
title: Сырые журналы Azure CDN HTTP
description: В этой статье описаны необработанные журналы Azure CDN HTTP.
services: cdn
author: sohamnchatterjee
manager: danielgi
ms.service: azure-cdn
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/23/2020
ms.author: sohamnc
ms.openlocfilehash: c6e8570746ae3dd0051dbec084c89d90580d28b1
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "80371635"
---
# <a name="azure-cdn-http-raw-logs"></a>Сырые журналы Azure CDN HTTP
Сырые журналы предоставляют богатую информацию об операциях и ошибках, которые важны для аудита и устранения неполадок. Сырые журналы отличаются от журналов активности. Журналы активности обеспечивают видимость операций, выполненных на ресурсах Azure. Сырые журналы обеспечивают запись операций вашего ресурса.

> [!IMPORTANT]
> Функция RAW журналов HTTP доступна для Azure CDN от корпорации Майкрософт.

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу. 

## <a name="sign-in-to-azure"></a>Вход в Azure

Войти на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).

## <a name="configuration"></a>Параметр Configuration

Для настройки журналов Raw для вашего CdN Azure из профиля Майкрософт: 

1. Из меню портала Azure выберите **все ресурсы,** >> **\<>профиль- CDN. **

2. Под **мониторингом**выберите **настройки диагностики.**

3. Выберите **и добавьте диагностическую настройку.**

    ![Диагностическая настройка CDN](./media/cdn-raw-logs/raw-logs-01.png)

    > [!IMPORTANT]
    > Сырье журналы доступны только на уровне профиля, в то время как агрегированные журналы кода статуса http доступны на уровне конечных точек.

4. В **настройках диагностики**введите имя для диагностической настройки под **названием Диагностических параметров.**

5. Выберите **журнал** и установите удержание в днях.

6. Выберите **детали назначения.** Варианты назначения:
    * **Отправка в Log Analytics**
        * Выберите рабочее пространство для анализа **подписки** и **журналов.**
    * **Архив учетной записи хранилища**
        * Выберите **учетную запись подписки** и **хранения.**
    * **Поток в центр событий**
        * Выберите **пространство имен концентратора событий,** имя **концентратора событий (необязательно)** и **имя политики концентратора событий.** **Subscription**

    ![Диагностическая настройка CDN](./media/cdn-raw-logs/raw-logs-02.png)

7. Нажмите кнопку **Сохранить**.

## <a name="raw-logs-properties"></a>Свойства сырых журналов

Azure CDN от Службы Майкрософт в настоящее время предоставляет raw журналы. Сырые журналы предоставляют индивидуальные запросы API с каждой записью, имеющей следующую схему: 

| Свойство              | Описание                                                                                                                                                                                          |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ОтслеживаниеСправка     | Уникальная строка, идентифицируя запрос, обслуживаемый Front Door, также отправлена клиенту в качестве заголовка X-Azure-Ref. Требуется для поиска деталей в журналах доступа для конкретного запроса. |
| HttpMethod            | Метод HTTP, используемый для запроса.                                                                                                                                                                     |
| HttpVersion           | Тип запроса или соединения.                                                                                                                                                                   |
| ЗапросУри            | URI полученного запроса.                                                                                                                                                                         |
| ЗапросBytes          | Размер сообщения запроса HTTP в байтах, включая заголовки запросов и орган запроса.                                                                                                   |
| ОтветBytes         | Байты, отправленные сервером бэкэнда в качестве ответа.                                                                                                                                                    |
| UserAgent             | Тип браузера, который использовал клиент.                                                                                                                                                               |
| ClientIp              | IP-адрес отправившего запрос клиента.                                                                                                                                                  |
| TimeTaken             | Продолжительность времени, которое было зашло в действие, в миллисекундах.                                                                                                                                            |
| Протокол безопасности      | Версия протокола TLS/SSL, используемая запросом или null, если нет шифрования.                                                                                                                           |
| Конечная точка              | Хост endpoint CDN настроен под родительским профилем CDN.                                                                                                                                   |
| Имя хоста бэкэнда     | Имя хостового бэкэнда или происхождения, куда отправляются запросы.                                                                                                                                |
| Отправлено в щит происхождения | Если это правда, это означает, что запрос был дан ответ из кэша щита происхождения вместо края поп-музыки. Origin shield — это родительский кэш, используемый для улучшения соотношения попадания кэша.                                       |
| HttpStatusCode        | Код состояния HTTP вернулся из прокси-                                                                                                                                                        |
| HttpstatusDetails     | Состояние результатов в запросе. Значение этого значения строки можно найти в таблице рекомендаций «Статус».                                                                                              |
| Поп                   | Край поп, который ответил на запрос пользователя. Аббревиат СОЗ являются кодами аэропортов соответствующих метро.                                                                                   |
| Статус кэша          | Означает, что объект был возвращен из кэша или пришел из происхождения.                                                                                                             |
> [!IMPORTANT]
> Функция журналов HTTP Raw доступна автоматически для любых профилей, созданных или обновленных после **25 февраля 2020 года.** Для профилей CDN, созданных ранее, следует обновить конечную точку CDN после настройки регистрации. Например, можно перейти к геофильтрации под конечными точками CDN и заблокировать любую страну, не имеюющую отношения к их рабочей нагрузке и нажмите сохранить. 

> [!NOTE]
> Эти журналы можно просматривать в профиле Log Analytics, запустив запрос. Запрос образца будет выглядеть как AzureDiagnostics где категория " AzureCdnAccessLog"

## <a name="next-steps"></a>Next Steps
В этой статье вы включили необработанные журналы HTTP для службы Microsoft CDN.

Для получения дополнительной информации о Azure CDN и других службах Azure, упомянутых в этой статье, см.:

* [Анализировать](cdn-log-analysis.md) Шаблоны использования Azure CDN.

* Узнайте больше о [Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/overview).

* Настройте [аналитику журналов в Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/log-query/get-started-portal).
