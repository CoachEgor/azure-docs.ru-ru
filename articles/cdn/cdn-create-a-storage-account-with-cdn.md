---
title: Краткое руководство. Интеграция учетной записи хранения Azure с Azure CDN
description: Узнайте, как использовать сеть доставки содержимого (CDN) Azure для доставки больших объемов контента с помощью кэширования BLOB-объектов в службе хранилища Azure.
services: cdn
documentationcenter: ''
author: asudbring
manager: danielgi
editor: ''
ms.assetid: cbc2ff98-916d-4339-8959-622823c5b772
ms.service: azure-cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: quickstart
ms.date: 05/24/2018
ms.author: allensu
ms.custom: mvc
ms.openlocfilehash: 35de327b4a6602bb5191157e3b3c4e56c9c091b5
ms.sourcegitcommit: 58faa9fcbd62f3ac37ff0a65ab9357a01051a64f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "81254093"
---
# <a name="quickstart-integrate-an-azure-storage-account-with-azure-cdn"></a>Краткое руководство по интеграции учетной записи хранения Azure с Azure CDN
С помощью этого краткого руководства вы настроите для [сети доставки содержимого Azure (CDN)](cdn-overview.md) кэширование содержимого из хранилища Azure. Azure CDN предлагает разработчикам глобальное решение по доставке больших объемов содержимого. Она может кэшировать большие двоичные объекты и статическое содержимое вычислительных экземпляров на физических узлах в США, Европе, Азии, Австралии и Южной Америке.

[!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

## <a name="log-in-to-the-azure-portal"></a>Войдите на портал Azure.
Войдите на [портал Azure](https://portal.azure.com) со своей учетной записью Azure.

## <a name="create-a-storage-account"></a>Создание учетной записи хранения
Чтобы создать учетную запись хранения для подписки Azure, воспользуйтесь следующей процедурой. Учетная запись хранения предоставляет доступ к службам хранилища Azure. Учетная запись хранения представляет собой высший уровень пространства имен для доступа ко всем компонентам службы хранилища Azure: большой двоичный объект, хранилище очередей и хранилище таблиц Azure. Дополнительную информацию см. в статье [Введение в хранилище Microsoft Azure](../storage/common/storage-introduction.md).

Чтобы создать учетную запись хранения, вы должны быть администратором службы или соадминистратором для связанной подписки.

Есть несколько способов, которые можно использовать для создания учетной записи хранения. В их число входят портал Azure и Powershell. В этом руководстве показано, как это сделать с помощью портала Azure.   

**Создание учетной записи хранения для подписки Azure**

1. На портале Azure слева вверху выберите **Создать ресурс**. 

    Появится панель **Создание**.

2. Выберите **Хранилище**, а затем **Учетная запись хранения — BLOB-объект, файл, таблица, очередь**.
    
    ![Выбор ресурса хранилища](./media/cdn-create-a-storage-account-with-cdn/cdn-select-new-storage-account.png)

    Появится область **Создать учетную запись хранения**.   

    ![Область "Создать учетную запись хранения"](./media/cdn-create-a-storage-account-with-cdn/cdn-create-new-storage-account.png)

3. В поле **Имя** введите имя дочернего домена. Запись может содержать от 3 до 24 строчных букв и цифр.
   
    Это значение станет именем узла в URI, который используется для адресации ресурсов большого двоичного объекта, очереди и таблицы в подписке. Для обращения к ресурсу контейнера в хранилище BLOB-объектов используйте URI в следующем формате:
   
    http:// *&lt;StorageAcountLabel&gt;* .blob.core.windows.net/ *&lt;мой_контейнер&gt;*

    где *&lt;StorageAccountLabel&gt;* указывает на значение, введенное в поле **Имя**.
   
    > [!IMPORTANT]    
    > Метка URL-адреса образует поддомен URI учетной записи хранения и должна быть уникальной на уровне всех размещенных служб в Azure.
   
    Это значение также используется как имя учетной записи хранения на портале или при доступе к этой учетной записи программным способом.
    
4. Для остальных параметров используйте значения, указанные в следующей таблице:

    | Параметр  | Значение |
    | -------- | ----- |
    | **Модель развертывания** | Используйте значение по умолчанию. |
    | **Account kind** (Тип учетной записи) | Используйте значение по умолчанию. |
    | **Местоположение**    | В раскрывающемся списке выберите **Central US**. |
    | **Репликация** | Используйте значение по умолчанию. |
    | **Производительность** | Используйте значение по умолчанию. |
    | **Secure transfer required** (Требуется безопасное перемещение) | Используйте значение по умолчанию. |
    | **подписка** | В раскрывающемся списке выберите подписку Azure. |
    | **группа ресурсов** | Щелкните **Создать** и введите *my-resource-group-123* в качестве имени группы ресурсов. Оно должно быть глобально уникальным. Если это имя уже используется, вы можете ввести другое имя или в разделе **Use existing** (Использовать существующее) выбрать в раскрывающемся списке **my-resource-group-123**. <br />Дополнительные сведения о группах ресурсов см. в статье [Общие сведения об Azure Resource Manager](../azure-resource-manager/management/overview.md#resource-groups).| 
    | **Настройка виртуальных сетей** | Используйте значение по умолчанию. |  
    
5. Чтобы закрепить созданную учетную запись хранения на панели мониторинга, установите флажок **Закрепить на панели мониторинга**.
    
6. Нажмите кнопку **Создать**. Создание учетной записи хранения может занять несколько минут.

## <a name="enable-azure-cdn-for-the-storage-account"></a>Включение Azure CDN для учетной записи хранения

Вы можете включить Azure CDN непосредственно из учетной записи хранения. Если для конечной точки CDN нужно указать дополнительные параметры, например [оптимизировать скачивание больших файлов](cdn-optimization-overview.md#large-file-download), создайте конечную точку CDN или профиль CDN с помощью [расширения Azure CDN](cdn-create-new-endpoint.md).

1. Выберите учетную запись хранения на панели мониторинга, а затем выберите **Сеть доставки содержимого Azure** на левой панели. Если кнопка **Сеть доставки содержимого Azure** не отображается сразу, попробуйте ввести CDN в поле **Поиск** на панели слева.
    
    Откроется страница **Azure CDN**.

    ![Создание конечной точки CDN](./media/cdn-create-a-storage-account-with-cdn/cdn-storage-new-endpoint-creation.png)
    
2. Создайте конечную точку, указав необходимые сведения из следующей таблицы.

    | Параметр  | Значение |
    | -------- | ----- |
    | **Профиль CDN** | Выберите **Создать** и введите имя своего профиля, например, *my-cdn-profile-123*. Оно должно быть глобально уникальным.  |
    | **Ценовая категория** | В раскрывающемся списке выберите **Verizon уровня "Стандартный"** . |
    | **Имя конечной точки CDN** | Введите имя узла конечной точки, например, *my-endpoint-123*. Оно должно быть глобально уникальным. Это имя будет использоваться для доступа к кэшированным ресурсам в домене _&lt;имя конечной точки&gt;_ .azureedge.net. |
    | **Имя узла источника** | По умолчанию созданная конечная точка CDN использует имя узла учетной записи хранения как сервер-источник. |

3. Нажмите кнопку **Создать**. Созданная конечная точка отображается в списке конечных точек.

    ![Хранение новой конечной точки CDN](./media/cdn-create-a-storage-account-with-cdn/cdn-storage-new-endpoint-list.png)


## <a name="enable-additional-cdn-features"></a>Включение дополнительных функций CDN
На странице **Сеть доставки содержимого Azure** для учетной записи хранения выберите в списке конечную точку CDN, чтобы открыть страницу конфигурации конечной точки CDN. Н этой странице вы можете включить дополнительные функции CDN для доставки, например [сжатие](cdn-improve-performance.md), [кэширование строк запросов](cdn-query-string.md) и [геофильтрацию](cdn-restrict-access-by-country.md). 
    
![Хранение конфигурации конечной точки сети доставки содержимого](./media/cdn-create-a-storage-account-with-cdn/cdn-storage-endpoint-configuration.png)

## <a name="enable-sas"></a>Активация подписанных URL-адресов
Если вы хотите предоставить ограниченный доступ к частным контейнерам хранилища, то можете использовать функцию подписанных URL-адресов (SAS) учетной записи хранения Azure. SAS — это URI, который предоставляет ограниченные права доступа к ресурсам хранилища Azure, не отображая ключ вашей учетной записи. Дополнительные сведения см. в статье [Использование Azure CDN с SAS](cdn-sas-storage-support.md).

## <a name="access-cdn-content"></a>Получение доступа к содержимому CDN
Для доступа к кэшированному содержимому в сети CDN воспользуйтесь URL-адресом CDN, отображаемым в портале. Адрес для кэшированного большого двоичного объекта будет иметь следующий вид:

http://<*имя_конечной_точки*\>.azureedge.net/<*общедоступный_контейнер*\>/<*имя_большого_двоичного_объекта*\>

> [!NOTE]
> Когда вы включите доступ Azure CDN к учетной записи хранения, ко всем общедоступным объектам будут применяться кэширование CDN POP. После изменения объекта, который находится в кэше CDN, новое содержимое будет недоступно через Azure CDN до следующего обновления содержимого, например по истечении срока жизни кэшированного содержимого.

## <a name="remove-content-from-azure-cdn"></a>Удаление содержимого из Azure CDN
Если кэширование объекта в сети CDN Azure больше не требуется, можно выполнить одно из следующих действий:

* Сделать контейнер закрытым, а не общедоступным. Дополнительные сведения см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](../storage/blobs/storage-manage-access-to-resources.md).
* Отключить или удалить конечную точку CDN с помощью портала Azure.
* Изменить размещенную службу, чтобы она перестала отвечать на запросы объекта.

Объект, кэшированный в сети Azure CDN, сохраняется в кэше до истечения срока жизни для этого объекта или до [очистки](cdn-purge-endpoint.md) конечной точки. По истечении срока действия Azure CDN проверит, действует ли еще конечная точка CDN и возможен ли анонимный доступ к этому объекту. Если это не так, объект больше не будет кэшироваться.

## <a name="clean-up-resources"></a>Очистка ресурсов
На предыдущих шагах вы создали профиль и конечную точку CDN в группе ресурсов. Сохраните эти ресурсы, чтобы перейти к разделу [Дополнительная информация](#next-steps) и узнать, как добавить личный домен к конечной точке. Но если в будущем эти ресурсы вам не понадобятся, их можно удалить, удалив группу ресурсов, чтобы избежать дополнительных затрат:

1. На портале Azure в меню слева щелкните **Группы ресурсов**, а затем выберите **my-resource-group-123**.

2. На странице **Группа ресурсов** выберите **Удалить группу ресурсов**, в текстовое поле введите *my-resource-group-123* и щелкните **Удалить**.

    В результате удалится группа ресурсов, профиль и конечная точка, которые вы создали с помощью этого краткого руководства.

3. Чтобы удалить учетную запись хранилища, выберите ее на панели мониторинга и щелкните **Удалить** в меню сверху.

## <a name="next-steps"></a>Дальнейшие действия
Сведения о том, как добавить личный домен и активировать HTTPS в конечной точке CDN, см. в следующем руководстве:

> [!div class="nextstepaction"]
> [Руководство. Доступ к большим двоичным объектам хранилища с помощью личного домена Azure CDN по протоколу HTTPS](cdn-storage-custom-domain-https.md)

