---
title: Смягчение последствий боя
description: Описывает методы смягчения z-боевых артефактов
author: florianborn71
ms.author: flborn
ms.date: 02/06/2020
ms.topic: article
ms.openlocfilehash: bc06deafe3f589fce9a9178fefdb22388254929d
ms.sourcegitcommit: 642a297b1c279454df792ca21fdaa9513b5c2f8b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80680457"
---
# <a name="z-fighting-mitigation"></a>Смягчение последствий боя

Когда две поверхности перекрываются, не ясно, какая из них должна быть отображана поверх другой. Результат даже варьируется в зависимости от пикселя, в результате чего видим-зависимых артефактов. Следовательно, когда камера или сетка движется, эти узоры мерцают заметно. Этот артефакт называется *z-борьба*. Для AR и VR-приложений проблема усиливается из-за того, что устройства, установленные на головой, естественным образом всегда двигаются. Для предотвращения дискомфорта зрителя z-борьба смягчающей функциональностью доступна в Azure Remote Rendering.

## <a name="z-fighting-mitigation-modes"></a>Режимы смягчения последствий боя

|Ситуация                        | Результат                               |
|---------------------------------|:-------------------------------------|
|Регулярный z-бой               |![Боевые действия](./media/zfighting-0.png)|
|Включено смягчение последствий боя    |![Боевые действия](./media/zfighting-1.png)|
|Включено подсветка контрольной доски|![Боевые действия](./media/zfighting-2.png)|

Следующий код позволяет по смягчению последствий z-борьбы:

``` cs
void EnableZFightingMitigation(AzureSession session, bool highlight)
{
    ZFightingMitigationSettings settings = session.Actions.ZFightingMitigationSettings;

    // enabling z-fighting mitigation
    settings.Enabled = true;

    // enabling checkerboard highlighting of z-fighting potential
    settings.Highlighting = highlight;
}
```

> [!NOTE]
> Смягчение последствий боя — это глобальная параметр, которая влияет на все отрисованные сетки.

## <a name="reasons-for-z-fighting"></a>Причины для z-борьбы

Борьба происходит в основном по двум причинам:

1. когда поверхности находятся очень далеко от камеры, точность их глубинных значений ухудшается, а значения становятся неразличимыми
1. когда поверхности в сетке физически перекрываются

Первая проблема всегда может произойти и трудно устранить. Если это происходит в приложении, убедитесь, что соотношение *расстояния ближнего самолета* к дальнему расстоянию *плоскости* является столь же низким, как практические. Например, ближний самолет на расстоянии 0,01 и дальний самолет на расстоянии 1000 создадут эту проблему гораздо раньше, чем наличие ближнего самолета на 0,1 и дальнего самолета на расстоянии 20.

Вторая проблема – это показатель плохо написанного контента. В реальном мире два объекта не могут находиться в одном и том же месте одновременно. В зависимости от приложения пользователи могут захотеть узнать, существуют ли перекрывающиеся поверхности и где они находятся. Например, сцена CAD здания, которая является основой для строительства в реальном мире, не должна содержать физически невозможные пересечения поверхности. Для визуального осмотра доступен режим подсветки, который отображает потенциальный z-бой как анимированный шаблон шашкой.

## <a name="limitations"></a>Ограничения

Предоставляемые z-боевых смягчения является наилучшим усилием. Нет никакой гарантии, что он удаляет все z-боевые действия. Также он автоматически отдаст предпочтение одной поверхности другой. Таким образом, когда у вас есть поверхности, которые находятся слишком близко друг к другу, может случиться, что "неправильные" поверхности попадает на вершине. Распространенным случаем проблемы является то, что текст и другие наклейки наносятся на поверхность. С z-боевых смягчения включен эти детали могут легко просто исчезнуть.

## <a name="performance-considerations"></a>Вопросы производительности

* Включение z-борьбы смягчения не несет практически никаких накладных расходов производительности.
* Дополнительно включение наложения z-борьбы действительно несет нетривиальную накладную работу производительности, хотя она может варьироваться в зависимости от сцены.

## <a name="next-steps"></a>Дальнейшие действия

* [Режимы рендеринга](../../concepts/rendering-modes.md)
* [Перепроекция на поздний этап](late-stage-reprojection.md)
