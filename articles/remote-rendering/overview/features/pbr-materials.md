---
title: Материалы PBR
description: Описывает тип материала PBR.
author: jakrams
ms.author: jakras
ms.date: 02/11/2020
ms.topic: article
ms.openlocfilehash: 64553506f75451c50a87932904f00a7275ea9286
ms.sourcegitcommit: 642a297b1c279454df792ca21fdaa9513b5c2f8b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80680262"
---
# <a name="pbr-materials"></a>Материалы PBR

*Материалы PBR* являются одним из [поддерживаемых типов материалов](../../concepts/materials.md) в удаленном рендере Azure. Они используются для [сетки,](../../concepts/meshes.md) которые должны получать реалистичное освещение.

PBR означает **P**hysically **B**ased **R**endering и означает, что материал описывает визуальные свойства поверхности физически правдоподобным образом, таким образом, что реалистичные результаты возможны при всех условиях освещения. Большинство современных игровых движков и инструментов создания контента поддерживают материалы PBR, поскольку они считаются лучшим приближением реальных сценариев для рендеринга в реальном времени.

![Модель образца шлема glTF, представленная ARR](media/helmet.png)

Однако материалы PBR не являются универсальным решением. Есть материалы, которые отражают цвет по-разному в зависимости от угла обзора. Например, некоторые ткани или автомобильные краски. Эти виды материалов не обрабатываются стандартной моделью PBR и в настоящее время не поддерживаются удаленной визуализацией Azure. Это включает в себя расширения PBR, такие как *Тонкая пленка* (многослойные поверхности) и *Clear-Coat* (для автомобильных красок).

## <a name="common-material-properties"></a>Общие свойства материала

Эти свойства являются общими для всех материалов:

* **albedoColor:** Этот цвет умножается на другие цвета, такие как *albedoMap* или *цвета вершины.* Если *прозрачность* включена на материале, альфа-канал используется для `1` регулировки непрозрачности, с смыслом полностью непрозрачным и `0` смысл полностью прозрачным. По умолчанию белый.

  > [!NOTE]
  > Когда материал PBR полностью прозрачный, как совершенно чистый кусок стекла, он по-прежнему отражает окружающую среду. Яркие пятна, как солнце все еще видны в отражении. Это отличается от [цветных материалов.](color-materials.md)

* **albedoMap:** [2D текстура](../../concepts/textures.md) для значений альбедо на пиксель.

* **alphaClipEnabled** и **alphaClipThreshold:** Если *alphaClipEnabled* истинен, все пиксели, где альфа-значение альбедо ниже, чем *alphaClipThreshold,* не будут нарисованы. Альфа-отсечение можно использовать даже без обеспечения прозрачности и гораздо быстрее в визуализации. Альфа обрезанные материалы по-прежнему медленнее, чтобы сделать, чем полностью непрозрачные материалы, однако. По умолчанию альфа-отсечение отключено.

* **textureCoordinateScale** и **textureCoordinateOffset:** шкала умножается на координаты УФ текстуры, к ней добавляется смещение. Может быть использован для растяжения и сдвиг текстуры. Шкала по умолчанию (1, 1) и смещение (0, 0).

* **использованиеVertexColor:** Если сетка содержит цвета вершины и эта опция включена, цвета вершины сетки умножаются на *albedoColor* и *albedoMap.* По умолчанию цвета вершины отключены.

* **являетсяDoubleSided:** Если двусторонность установлена на истину, треугольники с этим материалом отображаются, даже если камера смотрит на их задние грани. Для материалов PBR освещение также вычисляется должным образом для задних граней. По умолчанию эта опция отключена. Смотрите также [одностороннюю визуализацию.](single-sided-rendering.md)

## <a name="pbr-material-properties"></a>Свойства материала PBR

Основная идея физически основанной визуализации заключается в использовании *свойств BaseColor,* *Metalness*и *Грубости* для эмуляции широкого спектра реальных материалов. Подробное описание PBR выходит за рамки данной статьи. Для получения дополнительной информации о PBR, [см.](http://www.pbr-book.org) Следующие свойства специфичны для материалов PBR:

* **базовыйЦвет:** В материалах PBR *цвет альбедо* называется *базовым цветом.* В Azure Remote Rendering *свойство цвета альбедо* уже присутствует через общие свойства материала, поэтому нет дополнительного свойства базового цвета.

* **шероховатости** и **шероховатостиMap:** Грубость определяет, насколько грубая или гладкая поверхность. Грубые поверхности рассеивают свет в большем направлении, чем гладкие поверхности, которые делают отражения размытыми, а не острыми. Диапазон значений `0.0` от `1.0`. Когда `roughness` `0.0`равны, отражения будут острыми. Когда `roughness` `0.5`равны, отражения станут размытыми.

  Если поставляются значение шероховатости и карта шероховатостей, конечное значение будет продуктом этих двух.

* **metalness** and **metalnessMap:** В физике это свойство соответствует ли поверхность проводяпрометива или dielectric. Проводящие материалы имеют различные отражающие свойства, и они, как правило, отражают без цвета альбедо. В материалах PBR это свойство влияет на то, насколько поверхность отражает окружающую среду. Значения варьируются `0.0` `1.0`от . Когда `0.0`металлолюбие, цвет альбедо полностью виден и материал выглядит как пластик или керамика. Когда `0.5`металлоконструкции, это выглядит как окрашенный металл. Когда `1.0`металлоятлис, поверхность почти полностью теряет свой цвет альбедо и отражает только окрестности. Например, `metalness` если `1.0` `roughness` есть `0.0` и есть, то поверхность выглядит как зеркало реального мира.

  Если поставляются как значение металлоконструкций, так и карта металлоконструкций, конечное значение будет продуктом этих двух.

  ![металлоконструкции и шероховатости](./media/metalness-roughness.png)

  На рисунке выше, сфера в правом нижнем углу выглядит как настоящий металлический материал, внизу слева выглядит как керамический или пластиковый. Цвет альбедо также меняется в зависимости от физических свойств. С увеличением шероховатости материал теряет отражение резкости.

* **normalMap:** Для имитации мелкозернистых деталей может быть предоставлена [нормальная карта.](https://en.wikipedia.org/wiki/Normal_mapping)

* **occlusionMap** и **aoScale:** [Ambient occlusion](https://en.wikipedia.org/wiki/Ambient_occlusion) делает объекты с расщелиной более реалистичными, добавляя тени в окклюзионные области. Значение окклюзии `0.0` `1.0`варьируется `0.0` от , где означает `1.0` темноту (окклюзии) и не означает, что никаких окклюзий. Если 2D текстура предоставляется в качестве карты окклюзии, эффект включен и *aoScale* действует как множитель.

  ![Карта окклюзии](./media/boom-box-ao2.gif)

* **прозрачный:** Для материалов PBR существует только одна параметр прозрачности: включена она или нет. Непрозрачность определяется альфа-каналом цвета альбедо. При включении для рисования полупрозрачных поверхностей используется более сложный конвейер визуализации. Azure Remote Rendering реализует истинную [независимую прозрачность заказа](https://en.wikipedia.org/wiki/Order-independent_transparency) (OIT).

  Прозрачная геометрия является дорогостоящей для визуализации. Если вам нужны только отверстия в поверхности, например для листьев дерева, лучше использовать вместо альфа-отсечения.

  ![Прозрачность](./media/transparency.png) Уведомление на изображении выше, как право-большинство сферы полностью прозрачным, но отражение по-прежнему видны.

  > [!IMPORTANT]
  > Если какой-либо материал должен быть переключен с непрозрачного на прозрачный во время выполнения, рендер должен использовать [режим визуализации](../../concepts/rendering-modes.md) *TileBasedComposition.* Это ограничение не распространяется на материалы, которые преобразуются в прозрачные материалы для начала.

## <a name="technical-details"></a>Технические сведения

Azure Remote Rendering использует микро-гранет Cook-Torrance BRDF с GGX NDF, Schlick Fresnel и термином видимости GGX Smith с диффузным термином Ламберта. Эта модель является де-факто отраслевым стандартом на данный момент. Для получения более подробной информации, обратитесь к этой статье: [Физически основана Рендеринг - Кук Торранс](http://www.codinglabs.net/article_physically_based_rendering_cook_torrance.aspx)

 Альтернативой модели *Metalness-Roughness* PBR, используемой в удаленной рендеринге Azure, является модель *Specular-Glossiness* PBR. Эта модель может представлять более широкий спектр материалов. Тем не менее, это дороже, и, как правило, не работает хорошо для случаев в режиме реального времени.
Не всегда возможно преобразовать из *Specular-Glossiness* в *Metalness-Roughness,* так как существуют *(диффузные, спекулятивные)* пары значений, которые не могут быть преобразованы в *(BaseColor, Metalness).* Преобразование в другом направлении проще и точнее, так как все *пары (BaseColor, Metalness)* соответствуют четко определенным *(диффузным, спекулятивным)* парам.

## <a name="next-steps"></a>Дальнейшие действия

* [Цветные материалы](color-materials.md)
* [Текстуры](../../concepts/textures.md)
* [Сети](../../concepts/meshes.md)
