---
title: Иерархическое состояние переопределить
description: Объясняет концепцию иерархического состояния переопределения компонентов.
author: florianborn71
ms.author: flborn
ms.date: 02/10/2020
ms.topic: article
ms.openlocfilehash: f3be073857cc8583669ab26f306760478479e2ae
ms.sourcegitcommit: 642a297b1c279454df792ca21fdaa9513b5c2f8b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80680795"
---
# <a name="hierarchical-state-override"></a>Иерархическое состояние переопределить

Во многих случаях необходимо динамически изменить внешний вид деталей [модели,](../../concepts/models.md)например, скрыть субграфики или переключить детали на прозрачную визуализацию. Изменение материалов каждой части, поскольку она требует итерировать на протяжении всей сцены график, и управлять клонированием материала и назначением на каждом узеле.

Для выполнения этого случая использования с наименьшими возможными `HierarchicalStateOverrideComponent`накладными расходами используйте. Этот компонент реализует иерархические обновления состояния на произвольных ветвях графика сцены. Это означает, что состояние может быть определено на любом уровне в графике сцены, и оно просачивается вниз по иерархии, пока оно не будет либо перекрыто новым состоянием, либо применено к объекту листа.

В качестве примера рассмотрим модель автомобиля и вы хотите, чтобы весь автомобиль был прозрачным, за исключением внутренней части двигателя. Этот случай использования включает только два экземпляра компонента:

* Первый компонент присваивается корневому узлам модели и включает прозрачную визуализацию для всего автомобиля.
* Второй компонент присваивается корневому узлам двигателя и снова переопределяет состояние, явно выключив режим просачивания.

## <a name="features"></a>Компоненты

Фиксированный набор состояний, которые могут быть отменены:

* **Скрытые**: Соответствующие сетки в графике сцены скрыты или показаны.
* **Цвет тонус**: Отрисованный объект может быть цвет-тонированный с его индивидуальным цветом тона и весом тони. На рисунке ниже показанцветы цветовые оттенок обода колеса.
  
  ![Цветной тинт](./media/color-tint.png)

* **Сквозная**: Геометрия отображается полупрозрачно, например, для выявления внутренних частей объекта. На следующем изображении показан весь автомобиль, визуализированный в провидном режиме, за исключением красного тормозного калибра:

  ![See-Through](./media/see-through.png)

  > [!IMPORTANT]
  > Провидство эффект работает только при [использовании режима визуализации](../../concepts/rendering-modes.md) *TileBasedComposition.*

* **Выбрано**: Геометрия отображается с [контуром выбора.](outlines.md)

  ![Схема выбора](./media/selection-outline.png)

* **DisableCollision**: Геометрия освобождается от [пространственных запросов.](spatial-queries.md) **Скрытый** флаг не выключает коллизии, поэтому эти два флага часто устанавливаются вместе.

## <a name="hierarchical-overrides"></a>Иерархические переопределения

Может `HierarchicalStateOverrideComponent` быть прикреплен на нескольких уровнях иерархии объектов. Поскольку на объекте может быть только один `HierarchicalStateOverrideComponent` компонент каждого типа, каждый из них управляет состояниями для скрытых, сквозных, выбранных цветов и коллизий.

Таким образом, каждое состояние может быть установлено на одно из:

* `ForceOn`- состояние включено для всех сетки на и ниже этого узла
* `ForceOff`- государство отключено для всех сетки на и ниже этого узла
* `InheritFromParent`- государство не зависит от этого переопределения компонента

Вы можете изменить состояния `SetState` непосредственно или через функцию:

```cs
HierarchicalStateOverrideComponent component = ...;

// set one state directly
component.HiddenState = HierarchicalEnableState.ForceOn;

// set a state with the SetState function
component.SetState(HierarchicalStates.SeeThrough, HierarchicalEnableState.InheritFromParent);

// set multiple states at once with the SetState function
component.SetState(HierarchicalStates.Hidden | HierarchicalStates.DisableCollision, HierarchicalEnableState.ForceOff);
```

### <a name="tint-color"></a>Цвет тинта

Цвет цвета цвета немного особенный в том, что есть как в/выключается /наследует состояние, так и свойство цвета. Альфа-часть цвета оттенков определяет вес эффекта оттенков: Если установить до 0,0, цвет оттенков не виден и если установлен до 1.0 объект будет отрисован с чистым цветом оттенков. Для междунимит значения, окончательный цвет будет смешан с цветом тона. Цвет тонуса может быть изменен на основе в кадре для достижения цветной анимации.

## <a name="performance-considerations"></a>Вопросы производительности

Пример `HierarchicalStateOverrideComponent` сам по себе не добавляет много накладных расходов на время выполнения. Тем не менее, это всегда хорошая практика, чтобы держать количество активных компонентов на низком уровне. Например, при реализации системы выбора, которая выделяет выбранный объект, рекомендуется удалить компонент при удалении изюминки. Сохранение компонентов вокруг с нейтральными функциями может быстро сложить.

Прозрачность рендеринга ставит больше рабочей нагрузки на графические процессоры сервера, чем стандартная визуализация. Если большие части графика переключаются на *сквозные,* при этом видны многие слои геометрии, это может стать узким местом производительности. То же самое допустимо для объектов с [контурами выбора.](../../overview/features/outlines.md#performance)

## <a name="next-steps"></a>Дальнейшие действия

* [Контуры](../../overview/features/outlines.md)
* [Режимы рендеринга](../../concepts/rendering-modes.md)
* [Пространственные запросы](../../overview/features/spatial-queries.md)
