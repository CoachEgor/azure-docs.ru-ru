---
title: Настройка физически корректной отрисовки материалов в Maya
description: Сведения о настройке физически корректной отрисовки в Maya и ее экспорте в формат FBX.
author: muxanickms
ms.author: misams
ms.date: 06/16/2020
ms.topic: tutorial
ms.openlocfilehash: 5579994b0746a2de4b0f2ca927027ac709940024
ms.sourcegitcommit: 9bfd94307c21d5a0c08fe675b566b1f67d0c642d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/17/2020
ms.locfileid: "84977412"
---
# <a name="tutorial-setting-up-physically-based-rendering-materials-in-maya"></a>Руководство по Настройка физически корректной отрисовки материалов в Maya

## <a name="overview"></a>Обзор
В этом руководстве описано следующее:

> [!div class="checklist"]
>
> * Назначение материалов с улучшенной моделью освещения объектам в сцене.
> * Обработка экземпляров объектов и материалов.
> * Экспорт сцены в формат FBX и важные параметры.

Создание [физически корректной отрисовки (PBR)](../../overview/features/pbr-materials.md) в `Maya` является относительно простой задачей, во многом похожей на настройку PBR в других приложениях для создания содержимого, таких как `3DS Max`. В этом учебнике представлены инструкции по настройке шейдера PBR и экспорта в формат FBX для проектов ARR. 

Пример сцены в этом учебнике содержит несколько объектов `Polygon Box`, которым было назначено множество различных материалов: дерево, металл, крашенный металл, пластмасса и резина. Каждый материал содержит все или большую часть следующих текстур: 

* `Albedo` — это карта цветов материалов, которая также называется `Diffuse` или `BaseColor`.
* `Metalness` — определяет, является ли материал металлом и какие части из него состоят. 
* `Roughness` — определяет, насколько грубая или гладкая поверхность влияет на резкость или размытие отражений и светлых фрагментов на ней.
* `Normals` — добавляет детали к поверхности, например ямки и вмятины на металлической поверхности или шероховатость на древесине, устраняя необходимость добавлять дополнительные полигоны.
* `Ambient Occlusion` — используется для добавления мягкого затенения и теней в модель. Это серая карта, показывающая, какие области модели получают полное освещение (белый) или полное затенение (черный). 

## <a name="prerequisites"></a>Предварительные требования
* `Autodesk Maya 2017` или более поздней версии.

## <a name="setting-up-materials-in-the-scene"></a>Настройка материалов в сцене
В Maya процесс настройки материала PBR выглядит следующим образом:

Как видите, в примере сцены мы создали ряд объектов Box, каждый из которых представляет отдельный тип материала. Обратите внимание, что каждому из этих объектов было предоставлено собственное подходящее имя, как показано на рисунке ниже. 

> Стоит отметить, что перед началом создания ресурсов для измерений Удаленной отрисовки Azure (ARR) используются метры, а для обозначения направления вверх — ось Y. Поэтому рекомендуем установить метры в качестве единиц измерения сцены в Maya. Кроме того, при экспорте рекомендуется установить метры в качестве единиц измерения в параметрах экспорта в FBX. 

> [!TIP]
Рекомендуется правильно называть ресурсы модели, обычно с соответствующим типом детали или материала, так как имена упростят навигацию по ресурсоемким сценам.

![именами объектов;](media/object-names.jpg)

После создания или получения текстур в зависимости от задач может потребоваться создать уникальные текстуры для модели в таких приложениях, как `Quixel Suite`, `Photoshop` или `Substance Suite`, либо использовать универсальные текстуры мозаичного заполнения из других источников, которые можно применить к модели следующим образом:

* В окне просмотра сцены выберите свою модель (геометрический объект) и щелкните ее правой кнопкой мыши. В появившемся меню щелкните `Assign New Material`.
* В параметрах `Assign New Material` перейдите в раздел `Maya`>`Stingray PBS`. Это действие присвоит модели значение материала PBR. 

В `Maya 2020` доступно несколько различных шейдеров PBR: `Maya Standard Surface`, `Arnold Standard Surface` и `Stingray PBR`. `Maya Standard Surface Shader` еще не поддерживает экспорт с помощью `FBX plugin 2020`, а `Arnold Standard Surface Shader` можно экспортировать с помощью файлов FBX. В большинстве случаев он идентичен `Maya Standard Surface Shader` и является аналогом `Physical Material` в `3D Studio Max`.

**`The Stingray PBR Shader`** совместим со многими другими приложениями и наиболее полно соответствует требованиям `ARR`. Он поддерживается, начиная с версии `Maya 2017`. Кроме того, удобно, что этот тип материалов визуально отображается в окне просмотра, как показано далее в ARR.

![Материал Stingray](media/stingray-material.jpg)

Теперь, когда материал назначен ресурсу и назван соответствующим образом, вы можете приступить к назначению различных текстур. На следующих изображениях каждый тип текстуры соответствует материалу PBR. Материал `Stingray PBR` позволяет вам выбрать атрибуты для активации, поэтому, прежде чем подключать (`plug in`) текстурные карты, нужно активировать соответствующие атрибуты: 

![Настройка материалов](media/material-setup.jpg)

> [!TIP]
Рекомендуем называть материалы соответствующим образом, принимая во внимание их использование и (или) тип. Для материала, который будет использоваться для уникальной детали, можно присвоить имя этой детали, а в качестве имени материала, предназначенного для большего количества областей, можно использовать свойство или тип.

Назначьте текстуры следующим образом:

![Настройка текстур](media/texture-setup.jpg)

Создав и настроив материалы PBR, [создайте экземпляры объектов](../../how-tos/conversion/configure-model-conversion.md#instancing) в сцене. Создание экземпляров похожих объектов в сцене (гаек, болтов, винтов, шайб), по сути любых одинаковых объектов, может обеспечить существенную экономию с точки зрения размера файла. Экземпляры главного объекта могут иметь собственные масштабы, плоскости вращения и преобразования, поэтому их можно размещать в соответствии с требованиями сцены. В Maya процесс создания экземпляров выполняется просто.

* В меню `Edit` выберите `Duplicate Special` и откройте `Options`. 
* В параметрах `Duplicate Special` переключите `Geometry Type` с `Copy` на `Instance`. 
* Щелкните `Duplicate Special`.

![Создание экземпляров](media/instancing.jpg)

Это действие создает экземпляр объекта, который можно перемещать, поворачивать или масштабировать независимо от родительского объекта и других экземпляров этого родительского объекта. 
>Однако любые изменения, вносимые в экземпляр в режиме компонента, передаются во все экземпляры объекта, поэтому при работе с экземплярами объектов — вершинами, многоугольниками и т. д. — необходимо сначала решить, нужно ли, чтобы изменения влияли на все эти экземпляры.

В примере сцены был создан экземпляр каждого отдельного объекта Box. Это действие будет релевантным при экспорте сцены в формат FBX.

![Обзор сцены](media/scene-overview.jpg)

>Рекомендуем создавать экземпляры в сцене по мере использования, так как замена копий экземплярами объектов будет чрезвычайно сложной задачей. 

## <a name="fbx-export-process"></a>Процесс экспорта FBX

Теперь мы можем перейти к экспорту сцены или ресурсов сцены в формат FBX. Как правило, при экспорте ресурсов имеет смысл выбирать лишь необходимые объекты или ресурсы из сцены. Если в сцене имеется 100 объектов, но вы хотите использовать только 30 из них, нет смысла экспортировать всю сцену. Поэтому, если вы не хотите экспортировать всю сцену, сделайте выбор и выполните следующие действия:

* Выберите `File` > `Export Selection`, перейдите в нижнюю часть диалогового окна экспорта и задайте для параметра `Files of Type` значение `FBX Export`. В этом окне будут отображаться параметры экспорта FBX. Основные параметры экспорта FBX выделены красным цветом на изображении ниже.

![Экспорт FBX](media/FBX-exporting.jpg)

В зависимости от требований (например, возможно вам нужно отправить ресурс клиенту, но вы не хотите передавать большое количество файлов текстур в ресурсе) вы можете внедрить эти текстуры в экспортированный файл FBX. Этот параметр предоставляет лишь один файл для упаковки, но значительно увеличивает размер ресурса FBX. Вы можете включить параметр для встраивания текстур, переключив параметр `Embed Media`, как показано ниже.

> [!TIP]
> Обратите внимание, что в этом случае файл был назван в соответствии с этим условием. Это хороший способ отслеживания ресурсов. 

Завершив настройку конфигурации для экспорта, нажмите кнопку Export Selection (Выбор объема экспорта) в правом нижнем углу окна.

![Внедрение мультимедиа](media/embedding-media.jpg)

## <a name="conclusion"></a>Заключение

Как правило, этот тип материалов выглядит более реалистичным, так как он основан на реальной физике света. Он создает дополнительный эффект реальности сцены.

## <a name="next-steps"></a>Дальнейшие действия

Теперь вы знакомы с наиболее важными функциями для настройки материалов с улучшенным освещением объектов в сцене и их экспорта в формат FBX, который поддерживается в ARR. Следующим шагом будет преобразование файла FBX и визуализация в ARR.

> [!div class="nextstepaction"]
> [Краткое руководство. Преобразование модели для отрисовки](../../quickstarts\convert-model.md)