---
title: Настройка физически корректной отрисовки материалов в Maya
description: Сведения о настройке физически корректной отрисовки в Maya и экспорте результатов в формат FBX.
author: FlorianBorn71
ms.author: flborn
ms.date: 06/16/2020
ms.topic: tutorial
ms.openlocfilehash: 56aa0d91372ac2d21a20f28b1044f0811c716b0c
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91358038"
---
# <a name="tutorial-set-up-physically-based-rendering-materials-in-maya"></a>Руководство по настройке физически корректной отрисовки материалов в Maya

## <a name="overview"></a>Обзор
Из этого руководства вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
>
> * назначение материалов с улучшенным освещением объектам в сцене;
> * обработка экземпляров объектов и материалов;
> * экспорт сцены в формат FBX и настройка важных параметров.

Создание [материалов с физически корректной отрисовкой (PBR)](../../overview/features/pbr-materials.md) в Maya — относительно простая задача. Настройка PBR здесь во многом похожа на аналогичный механизм в других приложениях для создания содержимого, таких как 3DS Max. В этом руководстве приведены инструкции по настройке базового шейдера PBR и экспорту в FBX-файл для проектов Удаленной отрисовки Azure. 

Пример сцены в этом учебнике содержит несколько объектов Box, являющихся многоугольниками, которым назначены различные материалы,например дерево, металл, окрашенный металл, пластмасса или резина. Каждый материал содержит все или большую часть следующих текстур:

* **Albedo**(Альбедо) — содержит карту цветов для материала, и называется также **Diffuse** (Диффузный цвет) или **BaseColor** (Базовый цвет).
* **Metalness** (Металлические свойства) — определяет, является ли материал металлом и какие части из него состоят. 
* **Roughness** (Шероховатость) — определяет, насколько грубая или гладкая поверхность влияет на резкость или размытие отражений и светлых фрагментов на ней.
* **Normal** (Обычная) — добавляет сведения о поверхности без дополнительных многоугольников. Например, это могут быть вмятины или выступы на металлической поверхности, зернистость дерева.
* **Ambient Occlusion** (Фоновое затенение) — используется для добавления мягкого затенения и теней в модель. Это карта оттенков серого, которая обозначает, какие области модели получают полное освещение (белый) или полное затенение (черный). 

## <a name="prerequisites"></a>Предварительные требования
* Autodesk Maya 2017 или более поздней версии

## <a name="set-up-materials-in-the-scene"></a>Настройка материалов в сцене
Далее описано, как настроить в Maya материал PBR.

Как вы видите, в примере сцены мы создали несколько объектов призм. Каждый объект представляет разный тип материала. На рисунке показано, что каждому из этих объектов присвоено соответствующее имя.

Удаленная отрисовка Azure использует для измерения метры, а направлением вверх считается ось Y. Прежде чем создавать ресурсы, в качестве единиц измерения для сцены в Maya желательно задать метры. Чтобы выполнить экспорт, задайте метры в качестве единиц измерения в параметрах экспорта в формат FBX.

> [!TIP]
> Присвойте ресурсам модели подходящие имена, используя названия соответствующих деталей или типов материалов. Понятные имена облегчают навигацию по сценам с большим числом объектов.

![именами объектов;](media/object-names.jpg)

После создания или получения обычных текстур вы можете создать уникальные текстуры. Для этого можно применить специализированные приложения, например Quixel Suite, PhotoShop или Substance Suite, или же получить стандартные текстуры для заполнения из других источников.

Чтобы применить текстуры к модели, выполните следующие действия:

1. В окне просмотра сцены выберите свою модель или геометрический объект и щелкните ее правой кнопкой мыши. В появившемся меню выберите элемент **Assign New Material** (Назначить новый материал).
1. В диалоговом окне **Assign New Material** (Назначение нового материала) откройте раздел **Maya** > **Stingray PBS**. Это действие назначит модели материал PBR. 

В Maya 2020 доступно несколько разных шейдеров PBR. Сюда входят **Maya Standard Surface**, **Arnold Standard Surface** и **Stingray PBR**. Шейдер **Maya Standard Surface Shader** пока не поддерживается для экспорта через подключаемый модуль FBX 2020. Шейдер **Arnold Standard Surface Shader** нельзя экспортировать с файлами FBX. Почти в любых других отношениях он аналогичен шейдеру **Maya Standard Surface Shader**. Они действуют так же, как **Physical Material** (Физический материал) в 3D Studio Max.

Шейдер **Stingray PBR Shader** совместим со многими другими приложениями и наиболее полно соответствует требованиям Удаленной отрисовки Azure. Его поддержка добавлена в Maya 2017. Когда в окне просмотра отображается этот тип материала, визуализация аналогична результату в Удаленной отрисовке Azure.

![Материал Stingray](media/stingray-material.jpg)

Теперь, когда материал назначен ресурсу и назван соответствующим образом, вы можете назначить разнообразные текстуры. На следующих изображениях указано, как каждый тип текстуры соотносится с материалами PBR. Материал Stingray PBR позволяет выбрать, какие атрибуты можно активировать. Прежде чем подключать карты текстур, необходимо активировать соответствующие атрибуты.

![Настройка материалов](media/material-setup.jpg)

Присвойте материалам информативные имена, в которых отражается их использование или тип. Материал, который используется только для уникальной детали, можно назвать аналогично этой детали. Материал, используемый более широко, можно назвать с учетом свойств или типа.

Назначьте текстуры, как показано на этом изображении.

![Настройка текстур](media/texture-setup.jpg)

После создания и настройки материалов PBR рекомендуем [создать экземпляры объектов](../../how-tos/conversion/configure-model-conversion.md#instancing) в сцене. Создание в сцене экземпляров однотипных объектов, таких как гайки, винты, болты и шайбы, позволяет существенно уменьшить размер файла. К экземплярам главного объекта можно применить разные масштабы, плоскости вращения и преобразования, чтобы разместить их в соответствии с требованиями к сцене. 

В Maya создавать экземпляры достаточно просто.

1. В меню **Edit** (Правка) откройте раздел **Duplicate Special** (Специальное дублирование), чтобы просмотреть доступные параметры.
1. В диалоговом окне **Duplicate Special Options** (Параметры специального дублирования) выберите в поле **Geometry type** (Тип геометрии) значение **Instance** (Экземпляр). 
1. Выберите элемент **Duplicate Special** (Специальное дублирование).

   ![Снимок экрана: Maya, диалоговое окно Duplicate Special Options (Параметры специального дублирования) с выбранным элементом Duplicate Special (Специальное дублирование)](media/instancing.jpg)

Это действие позволяет создать экземпляр объекта. Вы можете перемещать, поворачивать или масштабировать экземпляр независимо от родительского объекта и других его экземпляров. 

Любые изменения, внесенные в экземпляр в режиме компонента, передаются во все экземпляры этого объекта. Например, вы можете изменять такие компоненты экземпляра объекта, как вершины и многоугольники. Обдумайте, действительно ли вам нужно распространить изменения на все экземпляры. 

В этом примере сцены созданы экземпляры каждого отдельного объекта призмы. Это действие будет релевантным при экспорте сцены в формат FBX.

![Обзор сцены](media/scene-overview.jpg)

> [!TIP]
> Создавайте экземпляры в сцене сразу по ходу работы. Заменить копии объектов экземплярами на более поздних этапах крайне сложно. 

## <a name="fbx-export-process"></a>Процесс экспорта FBX

Теперь мы перейдем к экспорту сцены или ресурсов сцены в формат FBX. При экспорте ресурсов имеет смысл выбрать из сцены только те объекты или ресурсы, которые нужно экспортировать. Предположим, в вашей сцене есть 100 объектов. Если вы хотите использовать только 30 из них, нет никакого смысла экспортировать всю сцену. 

Чтобы выбрать объекты, сделайте следующее:

1. Откройте раздел **File (Файл)**  > **Export Selection (Выбор для экспорта)** , чтобы открыть диалоговое окно **Export Selection** (Выбор для экспорта).
1. В поле **Files of type** (Файлы типа) выберите **FBX export** (Экспорт в FBX), чтобы отобразить параметры экспорта в формат FBX. Основные параметры экспорта в FBX на этом изображении выделены красным цветом.

   ![Экспорт FBX](media/FBX-exporting.jpg)

В некоторых сценариях вы можете, например, отправлять ресурс клиенту. В такой ситуации, скорее всего, для вас будет нецелесообразно включать в этот ресурс большое количество файлов текстур. Вы можете внедрить текстуры в экспортированный FBX-файл. Этот вариант позволит создать для упаковки только один файл, но размер этого ресурса FBX значительно увеличится. Чтобы включить режим встраивания текстур, переключите флажок **Embed Media** (Внедрять медиа-ресурсы), как показано ниже.

> [!TIP]
> В нашем примере имя файла отражает это состояние. Такой стиль именования хорошо помогает отслеживать ресурсы. 

Завершив настройку конфигурации для экспорта, выберите действие **Export Selection** (Экспортировать выделение) справа в нижнем углу.

![Внедрение мультимедиа](media/embedding-media.jpg)

## <a name="conclusion"></a>Заключение

Как правило, этот тип материалов выглядит более реалистично, так как он основан на реальной физике света. Он создает дополнительный иммерсивный эффект, как будто сцена существует в реальном мире.

## <a name="next-steps"></a>Дальнейшие действия

Теперь вы знаете, как настраивать материалы с расширенными возможностями освещения для объектов в сцене. Кроме того, вы научились экспортировать объекты в формат FBX, поддерживаемый Удаленной отрисовкой Azure. На следующем этапе вы преобразуете файл FBX и визуализируете его в Удаленной отрисовке Azure.

> [!div class="nextstepaction"]
> [Краткое руководство. Преобразование модели для отрисовки](../../quickstarts\convert-model.md)