---
title: Тексконв — инструмент преобразования текстур
description: Руководство пользователя для программы командной строки Тексконв
author: jakrams
ms.author: jakras
ms.date: 02/11/2020
ms.topic: article
ms.openlocfilehash: 1d9b2ca163b70435a6c0e245e66492e8e2866639
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "80680028"
---
# <a name="texconv---texture-conversion-tool"></a>Тексконв — инструмент преобразования текстур

Тексконв — это программа командной строки для обработки текстур из типичных входных форматов, таких как PNG, TGA, JPEG и DDS, в оптимизированных форматах для использования во время выполнения.
Хотя наиболее распространенным сценарием является преобразование одного входного файла `A.xxx` в оптимизированный формат `B.yyy` , средство имеет множество дополнительных параметров для расширенного использования.

## <a name="command-line-help"></a>Справка по командной строке

При выполнении TexConv.exe с `--help` параметром будут перечислены все доступные параметры. Кроме того, Тексконв выводит используемые параметры при ее выполнении, чтобы понять, что именно происходит. Дополнительные сведения см. в этих выходных данных.

## <a name="general-usage"></a>Общее использование

Тексконв всегда создает **ровно один выходной** файл. Он может использовать **несколько входных** файлов для сборки выходных данных из. Для сборки также требуется **сопоставление каналов**, которое указывает, какой канал (*красный, зеленый, синий* или *альфа*) следует взять из входного файла и переместить его в какой канал выходного изображения.

Ниже приведена самая прямая Командная строка:

```cmd
TexConv.exe -out D:/result.dds -in0 D:/img.jpg -rgba in0
```

- `-out`Указывает выходной файл и формат
- `-in0`задает первое входное изображение
- `-rgba`сообщает, что выходное изображение должно использовать все четыре канала и что необходимо сделать 1:1 из входного изображения.

## <a name="multiple-input-files"></a>Несколько входных файлов

Чтобы собрать выходные данные из нескольких входных файлов, укажите каждый входной файл с помощью `-in` параметра с увеличивающимся номером:

```cmd
-in0 D:/img0.jpg -in1 D:/img1.jpg -in2 D:/img2.jpg ...
```

При сборке кубической карты из 2D-текстур можно также использовать,,,, или,,,, `-right` `-left` `-top` `-bottom` `-front` `-back` `-px` `-nx` `-py` `-ny` `-pz` , `-nz` .

Чтобы сопоставить эти входные данные с выходным файлом, требуется правильное сопоставление канала.

## <a name="channel-mappings"></a>Сопоставления каналов

Параметры сопоставления каналов указывают, из каких входных данных следует заполнить заданные каналы вывода. Вы можете указать входные данные для каждого канала по отдельности следующим образом:

```cmd
-r in0.b -g in0.g -b in0.r -a in1.r
```

Здесь каналы RGB выходных данных будут заполнены с использованием первого входного изображения, а красный и синий будут заменены. Альфа-канал выходных данных будет заполнен значениями из красного канала второго входного изображения.

Указание сопоставления для каждого канала по отдельности обеспечивает максимальную гибкость. Для удобства то же самое можно написать с помощью операторов «группирующие»:

```cmd
-rgb in0.bgr -a in1.r
```

### <a name="output-channels"></a>Выходные каналы

Доступны следующие варианты сопоставления каналов:

- `-r`, `-g` , `-b` , `-a` : Указываются одноканальные назначения
- `-rg`: Укажите назначение красного и зеленого каналов.
- `-rgb`: Задайте назначения красного, зеленого и синего каналов.
- `-rgba`: Задает все четыре назначения каналов.

При упоминании только канала R, RG или RGB инструкция Тексконв создает выходной файл только с 1, 2 или 3 каналами соответственно.

### <a name="input-swizzling"></a>Входные группирующие

Когда заявляет, какая текстура ввода должна быть заполнена выходным каналом, один из них может свиззле входные данные:

- `-rgba in0` — это эквивалент `-rgba in0.rgba`
- `-rgba in0.bgra`будет свиззле входные каналы
- `-rgb in0.rrr`будет дублировать красный канал во все каналы

Можно также заполнить каналы черным или белым цветом:

- `-rgb in0 -a white`Создает текстуру вывода 4 канала, но устанавливает альфа-канал в полностью непрозрачный
- `-rg black -b white`создаст абсолютно синюю текстуру

## <a name="common-options"></a>Общие параметры

Ниже перечислены наиболее интересные параметры. Дополнительные параметры перечислены в `TexConv --help` .

### <a name="output-type"></a>Тип выходных данных

- `-type 2D`: Выходные данные будут представлять собой обычный 2D-образ.
- `-type Cubemap`: Выходные данные будут представлять собой кубической карты изображение. Поддерживается только для выходных файлов DDS. Если указан этот параметр, можно собрать кубической карты из 6 обычных входных изображений 2D.

### <a name="image-compression"></a>Сжатие изображений

- `-compression none`: Выходное изображение будет распаковано.
- `-compression medium`. Если поддерживается, выходное изображение будет использовать сжатие, не жертвуя слишком большим качеством.
- `-compression high`. Если поддерживается, выходное изображение будет использовать сжатие и пожертвовать качеством в пользу меньшего размера файла.

### <a name="mipmaps"></a>MIP-карты

По умолчанию Тексконв создает MIP-карты, когда выходной формат поддерживает его.

- `-mipmaps none`: MIP-карты не будет сформирован.
- `-mipmaps Linear`. Если поддерживается, MIP-карты будет создан с помощью фильтра Box.

### <a name="usage-srgb--gamma-correction"></a>Использование (исправление sRGB/гамма)

`-usage`Параметр задает назначение выходных данных и, таким образом, сообщает тексконв, следует ли применять гамма-коррекцию к входным и выходным файлам. Использование влияет только на каналы RGB. Альфа-канал всегда считается линейным значением. Если параметр Usage не указан, в режиме Auto будет предпринята попытка обнаружить использование из формата и имени файла первого входного изображения. Например, одноканальные и сдвоенные выходные форматы всегда являются линейными. Проверьте выходные данные, чтобы узнать, какое Тексконв решение принято.

- `-usage Linear`: Выходное изображение содержит значения, которые не представляют цвета. Обычно это происходит для текстур металлического и грубого, а также для всех типов масок.

- `-usage Color`: Выходное изображение представляет цвет, например "диффузный" или "албедо". Флаг sRGB будет установлен в заголовке Output DDS.

- `-usage HDR`: Выходной файл должен использовать более 8 бит на пиксель для кодирования. Следовательно, все значения хранятся в линейном пространстве. Для HDR-текстур не имеет значения, представляют ли данные цвет или другие данные.

- `-usage NormalMap`: Выходное изображение представляет стандартную карту тангенса в пространстве. Значения будут нормализованы, а mipmap вычисления будут оптимизированы немного.

- `-usage NormalMap_Inverted`: Выходная таблица с нормальным пространством по тангенсу с координатами Y, указывающими в противоположном направлении, чем входные данные.

### <a name="image-rescaling"></a>Масштабирование изображений

- `-minRes 64`: Задает минимальное разрешение выходного значения. Если входное изображение меньше, оно будет увеличено.
- `-maxRes 1024`: Задает максимальное разрешение выходных данных. Если входное изображение больше, оно получит довнскалед.
- `-downscale 1`. Если это значение больше 0, то входные изображения будут иметь меньшие значения в решении N раз. Используйте этот способ, чтобы применить общее сокращение качества.

## <a name="examples"></a>Примеры

### <a name="convert-a-color-texture"></a>Преобразование цветовой текстуры

```cmd
TexConv.exe -out D:/diffuse.dds -in0 D:/diffuse.jpg -rgba in0 -usage color
```

### <a name="convert-a-normal-map"></a>Преобразование обычной схемы

```cmd
TexConv.exe -out D:/normalmap.dds -in0 D:/normalmap.png -rgb in0 -usage normalmap
```

### <a name="create-an-hdr-cubemap"></a>Создание HDR-кубической карты

```cmd
TexConv.exe -out "D:/skybox.dds" -in0 "D:/skymap.hdr" -rgba in0 -type cubemap -usage hdr
```

Отличным источником для HDR кубемапс является [hdrihaven.com](https://hdrihaven.com/hdris/).

### <a name="bake-multiple-images-into-one"></a>Внедрить несколько образов в один

```cmd
TexConv.exe -out "D:/Baked.dds" -in0 "D:/metal.tga" -in1 "D:/roughness.png" -in2 "D:/DiffuseAlpha.dds" -r in1.r -g in0.r -b black -a in2.a -usage linear
```

### <a name="extract-a-single-channel"></a>Извлечение одного канала

```cmd
TexConv.exe -out D:/alpha-mask-only.dds -in0 D:/DiffuseAlpha.dds -r in0.a
```
