---
title: Обзор акселератора решения для удаленного мониторинга — Azure | Документация Майкрософт
description: Общие сведения об акселераторе решения для удаленного мониторинга.
author: dominicbetts
manager: timlt
ms.service: iot-accelerators
services: iot-accelerators
ms.topic: conceptual
ms.date: 03/08/2019
ms.author: dobett
ms.openlocfilehash: af09ea39f373d518d5600e3fa46adc378fd9236d
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "61442552"
---
# <a name="remote-monitoring-solution-accelerator-overview"></a>Обзор акселератора решения для удаленного мониторинга

[Акселератор решения](../iot-accelerators/about-iot-accelerators.md) для удаленного мониторинга — это средство, которое позволяет полностью отслеживать несколько компьютеров в удаленных расположениях. Это решение объединяет основные службы Azure, чтобы обеспечить универсальную реализацию бизнес-сценария. Его можно использовать в качестве отправной точки для собственной реализации и [настроить](../iot-accelerators/iot-accelerators-remote-monitoring-customize.md) в соответствии с потребностями конкретной организации.

В этой статье рассматриваются некоторые основные компоненты решения для удаленного мониторинга, чтобы вы смогли представить, как оно работает. Эти знания помогут вам:

* устранить проблемы, возникшие с решением;
* спланировать настройку решения в соответствии с определенными требованиями;
* спроектировать собственное решение IoT, использующее службы Azure.

Код акселератора решения для удаленного мониторинга доступен в репозитории GitHub:

* [.NET](https://github.com/Azure/azure-iot-pcs-remote-monitoring-dotnet)
* [Java](https://github.com/Azure/azure-iot-pcs-remote-monitoring-java)

## <a name="logical-architecture"></a>Логическая архитектура

На приведенной ниже схеме показаны логические компоненты акселератора решения для удаленного мониторинга, наложенные на [архитектуру Интернета вещей](../iot-fundamentals/iot-introduction.md):

![Логическая архитектура](./media/iot-accelerators-remote-monitoring-sample-walkthrough/remote-monitoring-architecture.png)

## <a name="why-microservices"></a>Зачем нужны микрослужбы

С момента выпуска корпорацией Майкрософт первых акселераторов решений архитектура облака эволюционировала. [Микрослужбы](https://azure.microsoft.com/blog/microservices-an-application-revolution-powered-by-the-cloud/) — это проверенный метод, который обеспечивает масштабируемость и гибкость без снижения скорости разработки. В некоторых службах Майкрософт по умолчанию используется шаблон архитектуры, который обеспечивает высокую надежность и масштабируемость. В обновленных акселераторах решений реализованы эти наработки, чтобы вы в полной мере смогли воспользоваться их преимуществами.

> [!TIP]
> Дополнительные сведения об архитектурах микрослужб см. на странице [архитектуры приложения для .NET](https://www.microsoft.com/net/learn/architecture), а также в записи блога, посвященной [возможностям микрослужб для приложений на основе облака](https://azure.microsoft.com/blog/microservices-an-application-revolution-powered-by-the-cloud/).

## <a name="device-connectivity"></a>Взаимодействие устройств

Компоненты логической архитектуры решения, которые связаны с подключением устройств:

### <a name="real-devices"></a>Реальные устройства

Вы можете подключать реальные устройства к решению. Можно реализовать поведение виртуальных устройств с помощью пакетов SDK для устройств Azure IoT.

Вы можете подготовить реальные устройства с помощью панели мониторинга на портале решения.

### <a name="device-simulation-microservice"></a>Микрослужба моделирования устройств

В решение входит [микрослужба моделирования устройств](https://github.com/Azure/remote-monitoring-services-dotnet/tree/master/device-simulation), предназначенная для управления пулом имитированных устройств на портале решения для тестирования сквозного потока решения. Виртуальные устройства выполняют следующие задачи:

* создают данные телеметрии при передаче информации с устройства в облако;
* отвечают на вызовы методов для передачи информации из облака на устройство, поступающие из Центра Интернета вещей.

Микрослужба предоставляет конечную точку RESTful, с помощью которой можно создавать, запускать и останавливать моделирование. Моделирование осуществляется за счет набора виртуальных устройств различных типов, которые отправляют данные телеметрии и отвечают на вызовы методов.

Вы можете подготовить виртуальные устройства с помощью панели мониторинга на портале решения.

### <a name="iot-hub"></a>Центр Интернета вещей

[Центр Интернета вещей](../iot-hub/index.yml) принимает данные телеметрии, отправленные с реального и имитированного устройства в облако. Центр Интернета вещей предоставляет данные телеметрии службам в серверной части решения Интернета вещей для обработки.

Центр Интернета вещей также выполняет в решении следующие функции:

* Поддерживает реестр удостоверений, в котором хранятся идентификаторы и ключи аутентификации всех устройств с разрешением на подключение к порталу.
* Вызывает на устройствах методы от имени акселератора устройства.
* Поддерживает двойники устройств для всех зарегистрированных устройств. Двойник устройства хранит значения свойств, сообщаемые устройством. Двойник устройства также хранит требуемые свойства, заданные на портале решения, которые извлекаются устройством при следующем подключении.
* Планирует задания, чтобы задать значения свойств для нескольких устройств или вызвать методы на нескольких устройствах.

## <a name="data-processing-and-analytics"></a>Обработка данных и аналитика

Компоненты логической архитектуры решения, которые связаны с обработкой данных и аналитикой:

### <a name="iot-hub-manager-microservice"></a>Микрослужба диспетчера центра Интернета вещей

В решение входит микрослужба [диспетчера центра Интернета вещей](https://github.com/Azure/remote-monitoring-services-dotnet/tree/master/iothub-manager) для обработки следующих операций в центре Интернета вещей:

* создание устройств IoT и управление ими;
* управление двойниками устройств;
* вызов методов на устройствах;
* управление учетными данными IoT.

Эта служба также выполняет запросы Центра Интернета вещей для извлечения данных устройств, принадлежащих группам, которые определяются пользователем.

Микрослужба предоставляет конечную точку RESTful для управления устройствами и двойниками устройств, вызова методов и выполнения запросов Центра Интернета вещей.

### <a name="device-telemetry-microservice"></a>Микрослужба телеметрии устройства

[Микрослужба телеметрии устройства](https://github.com/Azure/remote-monitoring-services-dotnet/tree/master/device-telemetry) предоставляет конечную точку RESTful для доступа на чтение для данных телеметрии устройства, хранящихся в службе "Аналитика временных рядов". Конечная точка RESTful также предоставляет операции CRUD для правил и доступ на чтение и запись для определений оповещений из хранилища.

### <a name="storage-adapter-microservice"></a>Микрослужба адаптера хранилища

[Микрослужба адаптера хранилища](https://github.com/Azure/remote-monitoring-services-dotnet/tree/master/storage-adapter) управляет парами ключ-значение, абстрагируя семантику службы хранилища и предоставляя простой интерфейс для хранения данных в любом формате с помощью Azure Cosmos DB.

Значения сгруппированы в коллекции. Вы можете работать с отдельными значениями или с целыми коллекциями. Сложные структуры данных сериализуются клиентами и управляются как простые полезные текстовые данные.

Служба предоставляет конечную точку RESTful для операций CRUD с парами ключ-значение. значения

### <a name="azure-cosmos-db"></a>Azure Cosmos DB

При развертывании акселератора решений используется [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/) для хранения правил, предупреждений, параметров конфигурации и других данных автономного неструктурированного защищенного хранилища.

### <a name="azure-stream-analytics-manager-microservice"></a>Микрослужба диспетчера Azure Stream Analytics

[Микрослужба диспетчера Azure Stream Analytics](https://github.com/Azure/remote-monitoring-services-dotnet/tree/master/asa-manager) управляет заданиями Azure Stream Analytics (ASA), включая настройку конфигурации, запуск и остановку, а также мониторинг состояния.

Задания ASA поддерживаются двумя наборами эталонных данных. Один набор данных определяет правила, а другой — группы устройств. Эталонные данные правил создаются из сведений, которые управляются микрослужбой телеметрии устройства. Микрослужба диспетчера Azure Stream Analytics преобразует правила телеметрии в логическую схему обработки потоков.

Эталонные данные групп устройств используются для определения, какую группу правил применять для входящего сообщения телеметрии. Группы устройств управляются микрослужбой конфигурации и используют запросы двойника устройства в центре Интернета вещей Azure.

Задания ASA передают данные телеметрии с подключенных устройств в службу "Аналитика временных рядов" для хранения и анализа.

### <a name="azure-stream-analytics"></a>Azure Stream Analytics

[Azure Stream Analytics](https://docs.microsoft.com/azure/stream-analytics/) — это модуль обработки событий, который позволяет проверять большие потоки данных из устройств.

### <a name="azure-time-series-insights"></a>Azure Time Series Insights

[Аналитика временных рядов Azure](https://docs.microsoft.com/azure/time-series-insights/) хранит данные телеметрии с устройств, подключенных к акселератору решения. Кроме того, эта служба обеспечивает визуализацию и запрашивание данных телеметрии устройства в веб-интерфейсе пользователя решения.

> [!NOTE]
> Аналитика временных рядов в настоящее время недоступна в облаке Azure для Китая. Развертывания акселератора решения для удаленного мониторинга в облаке Azure для Китая используют Cosmos DB для хранения всех данных.

### <a name="configuration-microservice"></a>Микрослужба конфигурации

[Микрослужба конфигурации](https://github.com/Azure/remote-monitoring-services-dotnet/tree/master/config) предоставляет конечную точку RESTful для операций CRUD для групп устройств, параметры решения и пользовательские параметры в акселераторе решения. Она работает с микрослужбой адаптера хранилища для сохранения данных конфигурации.

### <a name="authentication-and-authorization-microservice"></a>Микрослужба проверки подлинности и авторизации

[Микрослужба проверки подлинности и авторизации](https://github.com/Azure/remote-monitoring-services-dotnet/tree/master/auth) управляет пользователями, имеющими право на доступ к акселератору решения. Управление пользователями можно осуществлять с помощью любого поставщика удостоверений службы, который поддерживает [OpenId Connect](https://openid.net/connect/).

### <a name="azure-active-directory"></a>Azure Active Directory

Развертывания акселератора решения используют [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) в качестве поставщика OpenID Connect. Azure Active Directory хранит сведения пользователей и предоставляет сертификаты для проверки подлинности токенов JWT.

## <a name="presentation"></a>Уровень представления

Компоненты логической архитектуры решения, которые связаны с представлением данных:

[Веб-интерфейс пользователя — это приложение React Javascript](https://github.com/Azure/pcs-remote-monitoring-webui). Характеристики этого приложения:

* Использует только Javascript React и полностью выполняется в браузере.
* Реализуется с помощью каскадных таблиц стилей.
* Взаимодействует с общедоступными микрослужбами с помощью вызовов AJAX.

Пользовательский интерфейс представляет все функциональные возможности акселератора решения и взаимодействует с другими микрослужбами, которые перечислены ниже:

* Микрослужба проверки подлинности и авторизации используется для защиты данных пользователей.
* Микрослужба диспетчера центра Интернета вещей используется для отображения устройств Интернета вещей и управления ими.

Пользовательский интерфейс интегрирует обозреватель "Аналитика временных рядов Azure", чтобы включить запросы и анализ данных телеметрии устройства.

Микрослужба конфигурации обеспечивает сохранение и извлечение параметров конфигурации пользовательским интерфейсом.

## <a name="next-steps"></a>Дальнейшие действия

Если вы хотите просмотреть исходный код и документацию разработчика, начните с одного из двух репозиториев GitHub:

* [Акселератор решения для удаленного мониторинга с помощью Azure IoT (.NET)](https://github.com/Azure/azure-iot-pcs-remote-monitoring-dotnet).
* [Акселератор решения для удаленного мониторинга с помощью Azure IoT (Java)](https://github.com/Azure/azure-iot-pcs-remote-monitoring-java).

Подробные схемы архитектуры решения:
* [Архитектура акселератора решения для удаленного мониторинга](https://github.com/Azure/azure-iot-pcs-remote-monitoring-dotnet/wiki/Architecture).

Дополнительные сведения см. в статье о [настройке акселератора решения для удаленного мониторинга](../iot-accelerators/iot-accelerators-remote-monitoring-customize.md).
