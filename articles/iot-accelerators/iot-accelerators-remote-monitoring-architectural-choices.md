---
title: Сведения об архитектуре решения для удаленного мониторинга в Azure | Документация Майкрософт
description: В этой статье приведены сведения об архитектуре и технических компонентах в решении удаленного мониторинга
author: timlaverty
manager: camerons
ms.author: timlav
ms.service: iot-accelerators
services: iot-accelerators
ms.date: 11/20/2018
ms.topic: conceptual
ms.openlocfilehash: 1bd08596a30db7322a72b4269fddfe0b9df19119
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "61447189"
---
# <a name="remote-monitoring-architectural-choices"></a>Сведения об архитектуре решения для удаленного мониторинга

Акселератор решения Azure IoT для удаленного мониторинга — это акселератор решений с открытым кодом и лицензированием MIT. Чтобы ускорить процесс разработки для Интернета вещей, он поддерживает типичные сценарии Интернета вещей, например:

- Взаимодействие устройств
- Управление устройствами
- Потоковая обработка

В решении для удаленного мониторинга применяется рекомендованная [эталонная архитектура Центра Интернета вещей Azure](https://aka.ms/iotrefarchitecture).

В этой статье приведены сведения об основных архитектурных и технических компонентах, используемых для каждой подсистемы решения удаленного мониторинга. Но не забывайте, что примененная корпорацией Майкрософт техническая структура для решения удаленного мониторинга, — это не единственная возможность реализовать решение Интернета вещей для удаленного мониторинга. Техническую реализацию следует рассматривать как основу для создания успешного приложения, и внести в нее корректировки с учетом следующего:

- доступных навыков и опыта в вашей организации;
- потребности отрасли для вашего приложения.

## <a name="architectural-choices"></a>Выбор архитектуры

Корпорация Майкрософт рекомендует использовать для приложений Интернета вещей облачную и бессерверную архитектуру микрослужб. Разные подсистемы приложения Интернета вещей можно создавать как независимые службы, которые развертываются и масштабируются независимо друг от друга. Такой подход обеспечит лучшую масштабируемость и гибкость при обновлении отдельных подсистем, а также возможность выбора оптимальной технологии для каждой отдельной подсистемы.

Для реализации микрослужб вы можете использовать несколько разных технологий. Например, можно реализовать любой из следующих вариантов:

- контейнерная технология, например Docker, в сочетании с бессерверной технологией типа функций Azure;
- размещение микрослужб в службах PaaS, например в Службе приложений Azure.

## <a name="technology-choices"></a>Выбор технологий

В этом разделе описаны технологии, используемые в решении для удаленного мониторинга для каждой базовой подсистемы.

![Схема базовых подсистем](./media/iot-accelerators-remote-monitoring-architectural-choices/subsystem.png)

### <a name="cloud-gateway"></a>Облачный шлюз

Центр Интернета вещей используется как облачный шлюз решения для удаленного мониторинга. [Центр Интернета вещей](https://azure.microsoft.com/services/iot-hub/) обеспечивает безопасный, двунаправленный обмен данными с устройствами.

Для подключения устройств Интернета вещей можно использовать следующее:

- [Пакеты SDK для устройств Центра Интернета вещей](../iot-hub/iot-hub-devguide-sdks.md#azure-iot-hub-device-sdks) для реализации собственного клиентского приложения для нужного устройства. Пакеты SDK обеспечивают оболочки вокруг REST API Центра Интернета вещей и обработку сценариев, таких как повторы.
- Интеграция с Azure IoT Edge для развертывания пользовательских модулей и управления ими в контейнерах на устройствах.
- Интеграция с автоматическим управлением устройствами в Центре Интернета вещей, позволяющая управлять подключенными устройствами в пакетном режиме.

### <a name="stream-processing"></a>Потоковая обработка

При потоковой обработке решение для удаленного мониторинга использует Azure Stream Analytics для обработки сложных правил. Если вам достаточно более простых правил, для их обработки предоставляется пользовательская микрослужба, но ее придется настроить отдельно от стандартного развертывания. В эталонной архитектуре рекомендуется использовать Функции Azure для обработки простых правил и Azure Stream Analytics для более сложных правил.

### <a name="storage"></a>Хранилище

Для хранения акселератор решения для удаленного мониторинга использует службу Аналитика временных рядов Azure и Azure Cosmos DB. Аналитика временных рядов Azure хранит сообщения, поступающие через центр Интернета вещей от подключенных устройств. Акселератор решений использует Azure Cosmos DB для хранения остальных данных, например данных автономного неструктурированного защищенного хранилища, определений правил, оповещений и параметров конфигурации.

Azure Cosmos DB — это рекомендуемое решение теплого хранилища общего назначения для приложений Интернета вещей. Тем не менее такие решения, как "Аналитика временных рядов Azure" и Azure Data Lake, подходят для многих вариантов использования. Со службой "Аналитика временных рядов Azure" вы получите более глубокое понимание данных, поступающих от датчиков, и возможность определения тенденций и аномалий. Этот компонент позволит анализировать их причины и избегать дорогостоящих простоев.

> [!NOTE]
> Аналитика временных рядов в настоящее время недоступна в облаке Azure для Китая. Развертывания акселератора решения для удаленного мониторинга в облаке Azure для Китая используют Cosmos DB для хранения всех данных.

### <a name="business-integration"></a>Интеграция бизнес-процессов

Интеграция бизнес-процессов с решением для удаленного мониторинга ограничена созданием оповещений, которые помещаются в теплое хранилище. Подключите решение к Azure Logic Apps, чтобы реализовать сценарии более тесной бизнес-интеграции.

### <a name="user-interface"></a>Пользовательский интерфейс

Пользовательский веб-интерфейс создан с JavaScript React. React предлагает распространенную в отрасли платформу пользовательского веб-интерфейса, которая аналогична другим популярным платформам, таким как Angular.

### <a name="runtime-and-orchestration"></a>Среда выполнения и оркестрация

Решение для удаленного мониторинга использует контейнеры Docker для выполнения подсистем и Kubernetes в качестве оркестратора для горизонтального масштабирования. Такая архитектура позволяет создать отдельные определения масштабирования для каждой подсистемы. Но вам не придется тратить средства на системы DevOps для поддержания актуальности и защиты виртуальных машин и контейнеров.

Вместо Docker вы можете разместить микрослужбы в службах PaaS, таких как Служба приложений Azure. Вместо Kubernetes можно применить оркестраторы, например Service Fabric, DC/OS или Swarm.

## <a name="next-steps"></a>Дальнейшие действия

* Разверните свое решение для удаленного мониторинга [здесь](https://www.azureiotsolutions.com/).
* Изучите код в GitHub на [C#](https://github.com/Azure/azure-iot-pcs-remote-monitoring-dotnet/) и [Java](https://github.com/Azure/azure-iot-pcs-remote-monitoring-java/).  
* Дополнительные сведения об эталонной архитектуре Интернета вещей см. в этой [статье](https://aka.ms/iotrefarchitecture).
