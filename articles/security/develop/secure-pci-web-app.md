---
title: Безопасное веб-приложение для PCI DSS | Документация Майкрософт
description: Этот пример приложения реализует рекомендации по обеспечению безопасности, которые улучшают приложение и уровень безопасности Организации при разработке в Azure.
keywords: строч
services: security
documentationcenter: na
author: fehase
manager: rkarlin
editor: ''
ms.assetid: cd906856-f4f9-4ddc-9249-c998386f4085
ms.service: security
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/22/2019
ms.author: terrylan
ms.openlocfilehash: 4fe612db65d985be2f1f1c81d03c3ee735c03889
ms.sourcegitcommit: 007ee4ac1c64810632754d9db2277663a138f9c4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/23/2019
ms.locfileid: "69992618"
---
# <a name="develop-a-secure-infrastructure-for-a-pci-app"></a>Разработка безопасной инфраструктуры для приложения PCI

## <a name="overview"></a>Обзор

Эта безопасная инфраструктура для приложения платежных карт (PCI) предоставляет руководство по развертыванию среды платежной платформы отрасли как услуги (PaaS), которая подходит для сбора, хранения и извлечения данных владельцев карт. Это решение автоматизирует развертывание и конфигурацию ресурсов Azure для общей эталонной архитектуры, демонстрируя, как клиенты могут обеспечить соответствие требованиям к безопасности и соответствию. Оно также служит основой для создания и настройки решений в Azure. Решение реализует ряд требований, аналогичных стандартам безопасности отраслевых данных в индустрии платежных карт (PCI DSS 3,2).

В этом примере автоматически развертывается Эталонная архитектура веб-приложения PaaS с предварительно настроенными элементами управления безопасностью, чтобы помочь клиентам добиться соответствия требованиям PCI DSS 3,2. Решение состоит из шаблонов Azure Resource Manager и сценариев PowerShell, позволяющих развернуть и настроить ресурсы.

Необходимо последовательно выполнить действия, описанные в этой статье, чтобы убедиться, что компоненты приложения настроены должным образом. База данных, служба приложений Azure, экземпляр Azure Key Vault и экземпляр шлюза приложений Azure зависят друг от друга.

Скрипты развертывания настроили инфраструктуру. После запуска скриптов развертывания необходимо выполнить некоторые настройки вручную в портал Azure, чтобы связать компоненты и службы вместе.

Этот пример предназначен для опытных разработчиков в Azure, которые работают в розничной отрасли и хотят создать розничное приложение с безопасной инфраструктурой Azure.

> [!NOTE]
> Эта архитектура призвана служить основой, которую клиенты должны адаптировать для конкретных требований, и не должна использоваться "как есть" в рабочей среде.

Развертывания приложения в этой среде без изменений недостаточно для полного соответствия требованиям PCI DSS 3.2. Обратите внимание на следующее условия:

- Эта архитектура является своего рода эталоном, который помогает клиентам использовать Azure в соответствии с требованиями PCI DSS 3.2.
- Клиенты несут ответственность за проведение соответствующих проверок безопасности и соответствия внутренней оценки решения, созданного с использованием этой архитектуры, поскольку требования могут варьироваться в зависимости от специфики реализации каждого клиента.

При разработке и развертывании этого приложения вы узнаете, как:

- Создайте экземпляр Azure Key Vault, сохраните и извлеките из него секреты.
- Развертывание базы данных Azure для SQL Azure, Настройка защищенных данных и авторизация доступа к ним.
- Разверните веб-приложение Azure с помощью среды службы приложений, которая является выделенной изолированной с интерфейсным брандмауэром Аецесс.
- Создайте и настройте экземпляр шлюза приложений Azure с брандмауэром, использующим набор [правил OWASP Top 10](https://coreruleset.org/).
- Включение шифрования передаваемых и неактивных данных с помощью служб Azure.
- Чтобы оценить соответствие требованиям, настройте политику Azure и синие выпечатки.

После разработки и развертывания этого приложения вы настроили следующий пример веб-приложения вместе с описанными мерами конфигурации и безопасности.

## <a name="architecture-diagram-and-components"></a>Схема и компоненты архитектуры
Приложение представляет собой типичное n-уровневое приложение с тремя уровнями. Внешний интерфейс, серверная часть и уровень базы данных с интегрированными компонентами мониторинга и управления секретами показаны здесь:

![Архитектура приложения](./media/secure-pci-web-app/architecture.png)

Архитектура состоит из следующих компонентов:

- [Среда службы приложений v2](https://docs.microsoft.com/azure/app-service/environment/intro/). Предоставляет Среда службы приложений и подсистему балансировки нагрузки для нашей архитектуры приложения.
- [Шлюз приложений Azure.](https://docs.microsoft.com/azure/application-gateway/) Предоставляет шлюз и брандмауэр для нашей архитектуры приложения.
- [Application Insights](https://docs.microsoft.com/azure/azure-monitor/app/app-insights-overview). Предоставляет расширяемую службу управления производительностью приложений (APM) на нескольких платформах.
- [Azure Key Vault.](https://docs.microsoft.com/azure/key-vault/) Сохраняет и шифрует секреты нашего приложения и управляет созданием политик доступа, связанных с ними.
- [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-whatis/). Предоставляет облачную службу управления удостоверениями и доступом, а также вход и доступ к ресурсам.
- [Azure DNS](https://docs.microsoft.com/azure/dns/dns-overview). Предоставляет службу для размещения домена.
- [Azure Load Balancer.](https://docs.microsoft.com/azure/load-balancer/load-balancer-overview/) Масштабирование приложений и создание высокого уровня доступности для служб
- [Хранилище Azure.](https://docs.microsoft.com/azure/storage/common/storage-introduction/) Предоставляет решение для современных сценариев хранения данных.
- [Веб-приложение Azure](https://docs.microsoft.com/azure/app-service/overview/).  Предоставляет службу на основе HTTP для размещения веб-приложений.
- [База данных Azure для AzureSQL](https://docs.microsoft.com/azure/sql-database/sql-database-technical-overview/). Обеспечивает безопасное хранение данных приложения.
- [Проекты Azure](https://docs.microsoft.com/azure/governance/blueprints/overview/). Содержит спецификации и соответствие определенным стандартам и требованиям.
- [Центр безопасности Azure](https://docs.microsoft.com/azure/security-center/)
- [Политика Azure](https://docs.microsoft.com/azure/governance/policy/overview). Оценивает ресурсы на несоответствие назначенным политикам.

## <a name="threat-model"></a>Модель рисков
Моделирование угроз — это процесс выявления потенциальных угроз безопасности для вашего бизнеса и приложения и последующего обеспечения надлежащего плана по устранению рисков.

В этом примере используется [Microsoft Threat Modeling Tool](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool) для реализации моделирования угроз для безопасного примера приложения. Благодаря диаграмме компонентов и потоков данных можно определить проблемы и угрозы на ранних этапах процесса разработки. Это экономит время и деньги позже.

Это модель угроз для примера приложения:

![Модель рисков](./media/secure-pci-web-app/threat-model.png)

В следующем снимке экрана показаны некоторые примеры угроз и потенциальные уязвимости, которые создает средство моделирования угроз. Модель угроз предоставляет обзор уязвимой уязвимой зоны и предлагает разработчикам подумать о том, как устранить проблемы.

![Выходные данные модели угроз](./media/secure-web-app/threat-model-output.png)

Например, внедрение кода SQL в предыдущем выводе модели угроз устраняется путем очистки входных данных пользователя и с помощью хранимых функций в базе данных Azure для PostgreSQL. Это предотвращает произвольное выполнение запросов во время операций чтения и записи данных.

Разработчики улучшают общую безопасность системы за счет уменьшения всех угроз в выходных данных модели угроз.

## <a name="deployment"></a>Развертывание
### <a name="prerequisites"></a>Предварительные требования
Чтобы запустить приложение, необходимо установить следующие средства:

- Редактор кода для изменения и просмотра кода приложения. [Visual Studio Code](https://code.visualstudio.com/) является параметром с открытым исходным кодом.
- [Azure CLI](https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest&viewFallbackFrom=azure-cli-latest) на компьютере разработчика.
- [Git](https://git-scm.com/) в вашей системе. Git используется для локального клонирования исходного кода.
- [JQ](https://stedolan.github.io/jq/), средство UNIX для запроса JSON в удобном для пользователя виде.

Этот пример состоит из файлов конфигурации JSON и скриптов PowerShell, которые обрабатываются службой API Azure Resource Manager для развертывания ресурсов в Azure. Подробные инструкции по развертыванию см. в [этой статье](https://github.com/Azure-Samples/pci-paas-webapp-ase-sqldb-appgateway-keyvault-oms-AzureRM).

#### <a name="quickstart"></a>Быстрый старт

1.  Клонируйте или скачайте [этот](https://github.com/Azure-Samples/pci-paas-webapp-ase-sqldb-appgateway-keyvault-oms-AzureRM.git) репозиторий GitHub на локальную рабочую станцию.
2.  Просмотрите 0-Setup-AdministrativeAccountAndPermission.md и выполните предоставленные команды.
3.  Разверните тестовое решение с примером данных Contoso или осуществите пилотный проект в начальной рабочей среде.

    Этот сценарий развертывает ресурсы Azure для демонстрации веб-магазина с помощью демонстрационных данных Contoso.

В этом примере выполняется скрипт развертывания, который развертывает веб-приложение в службе приложений и создает ресурсы.

Существует множество способов развертывания приложений в Azure, в том числе:

- Шаблоны Azure Resource Manager
- PowerShell
- Azure CLI
- портала Azure
- Azure DevOps

## <a name="guidance-and-recommendations"></a>Инструкции и рекомендации

### <a name="network"></a>Network
Архитектура определяет частную виртуальную сеть с пространством адресов 10.200.0.0/16.
 ![Virtual_Network](./media/secure-pci-web-app/virtual-network.png)

### <a name="network-security-groups"></a>Группы безопасности сети
Группы безопасности сети (https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg) содержат списки управления доступом (ACL), разрешающие или отклоняющие трафик в виртуальной сети. Группы безопасности сети можно использовать для защиты трафика на уровне подсети или отдельной виртуальной машины. Существуют следующие группы безопасности сети:

- 1 группа безопасности сети для шлюза приложений;
- 1 группа безопасности сети для среды службы приложений;
- 1 группа безопасности сети для Базы данных SQL Azure.
- 1 группа безопасности сети для узла-бастиона.

Каждая из групп безопасности сети имеет определенные порты и протоколы, что позволяет безопасно и правильно работать с решением. Кроме того, для каждой группы безопасности сети настроены следующие конфигурации:

- Журналы диагностики и события (https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log) включены и хранятся в учетной записи хранения)
- Журналы Azure Monitor подключены к диагностике группы безопасности сети (https://github.com/krnese/AzureDeploy/blob/master/AzureMgmt/AzureMonitor/nsgWithDiagnostics.json)

### <a name="nsg-config"></a>Конфигурация NSG
Конфигурация NSG для Среда службы приложений должна быть настроена, как показано на рисунке ниже.

 ![NSG_Config](./media/secure-pci-web-app/nsg-config.png)

Каждая подсеть связана с соответствующей группой безопасности сети.

### <a name="config"></a>Конфигурация
Подсети настраиваются, как показано на рисунке ниже.
 ![Файле](./media/secure-pci-web-app/config.png)

### <a name="azure-dns"></a>Azure DNS
Система доменных имен (DNS) отвечает за преобразование (или разрешение) имени веб-сайта или службы в IP-адрес. [Azure DNS](https://docs.microsoft.com/azure/dns/dns-overview) является службой размещения доменов DNS, которая осуществляет разрешение имен на базе инфраструктуры Azure. Размещая домены в Azure, пользователи могут управлять записями DNS, используя те же учетные данные, API, инструменты и средства выставления счетов, что и для других служб Azure. Azure DNS также поддерживает частные домены DNS.

### <a name="protect-data"></a>Защита данных
Для защиты данных в облаке необходимо учитывать все возможные состояния, в которых могут находиться данные, а также все методы управления для каждого из этих состояний. Рекомендации по защите и шифрованию данных Azure действуют для следующих состояний данных.

- Хранимые: сюда относятся все объекты, контейнеры и типы хранения информации, которые существуют на физическом носителе в конкретном месте, например на магнитном или оптическом диске.
- При передаче: передаваемые между компонентами, расположениями или программами данные находятся в пути. Примерами являются передачи по сети, по служебной шине (из локальной сети в облако и наоборот, включая гибридные подключения, такие как ExpressRoute), а также в процессе ввода-вывода.

### <a name="azure-storage"></a>Служба хранилища Azure
Чтобы обеспечить соответствие зашифрованным данным, все службы [хранилища Azure](https://azure.microsoft.com/services/storage/) используют Azure Key Vault для управления ключами, которые обращаются к данным и шифруют их. Это помогает защищать и охранять данные держателей карт в рамках обязательств по безопасности организаций и соответствия требованиям, определенным в PCI DSS 3.2.

### <a name="azure-disk-encryption"></a>Шифрование диска Azure
Шифрование дисков Azure использует функцию BitLocker Windows, чтобы обеспечить шифрование томов для дисков данных. Решение интегрируется с Azure Key Vault, что помогает управлять ключами шифрования дисков.

### <a name="azure-sql-database"></a>База данных SQL Azure
В экземпляре Базы данных Azure SQL используются следующие меры безопасности базы данных:

- [Использование Active Directory для аутентификации и авторизации](https://docs.microsoft.com/azure/sql-database/sql-database-aad-authentication) обеспечивает централизованное управление удостоверениями для пользователей баз данных и других служб Майкрософт.
- [Аудит базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-auditing-get-started/) позволяет отслеживать события базы данных и записывать их в журнал аудита в учетной записи хранения Azure.
- В Базе данных SQL Azure настроено [прозрачное шифрование данных](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql), которое обеспечивает шифрование и расшифровку базы данных, связанных резервных копий и файлов журналов транзакций в реальном времени для защиты неактивных данных. Прозрачное шифрование данных позволяет защитить сохраненные данные от несанкционированного доступа.
- [Правила брандмауэра](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure) предотвращают любой доступ к серверам баз данных без надлежащих разрешений. Брандмауэр предоставляет доступ к базам данным на основе исходного IP-адреса каждого запроса.
- [Обнаружение угроз SQL](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection-get-started) позволяет немедленно выявлять потенциальные угрозы и реагировать на них. При этом поступают оповещения системы безопасности о подозрительных действиях с базами данных, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных шаблонах доступа к базам данных.
- [Зашифрованные столбцы](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) гарантируют, что конфиденциальные данные никогда не отобразятся как открытый текст внутри системы баз данных. После включения шифрования данных получить доступ к данным в виде открытого текста смогут только клиентские приложения и серверы приложений, у которых есть доступ к ключам.
- [Динамическое маскирование данных Базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-dynamic-data-masking-get-started) ограничивает возможность раскрытия конфиденциальных данных, маскируя их для непривилегированных пользователей или приложений. Динамическое маскирование данных может автоматически обнаруживать потенциально конфиденциальные данные и предлагать применение соответствующих масок. Это помогает определить и сократить доступ к данным таким образом, чтобы они не извлекались из базы данных с помощью несанкционированного доступа. Клиенты несут ответственность за настройку параметров динамического маскирования данных в соответствии со своей схемой базы данных.

### <a name="identity-management"></a>Управление удостоверениями
Следующие технологии обеспечивают возможности управления доступом к данным держателей карт в среде Azure:

- Azure Active Directory является облачным каталогом Майкрософт и службой управления удостоверениями, основанным на нескольких клиентах. Все пользователи этого решения создаются в Azure Active Directory, включая пользователей, обращающихся к Базе данных SQL Azure.
- Аутентификация приложения выполняется с использованием Azure Active Directory. Дополнительные сведения см. в статье [Интеграция приложений с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/manage-apps/plan-an-application-integration). Кроме того, при шифровании столбцов базы данных используется Azure Active Directory для проверки подлинности приложения в Базе данных Azure SQL. Дополнительные сведения см. [в статье Защита конфиденциальных данных в базе данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-security-overview).
- Управление доступом на основе ролей в Azure позволяет администраторам определять детализированные разрешения на доступ, чтобы предоставить пользователям доступ только для выполнения своих заданий. Вместо предоставления каждому пользователю неограниченных разрешений на ресурсы Azure администраторы могут разрешить только определенные действия для доступа к данным держателей карт. Доступ к подписке есть только у администратора подписки.
- Azure Active Directory Privileged Identity Management позволяет пользователям максимально сокращать количество пользователей, имеющих доступ к определенным сведениям, таким как данные владельцев карт. Администраторы могут использовать Azure Active Directory Privileged Identity Management для обнаружения, ограничения и отслеживания привилегированных удостоверений, а также их доступа к ресурсам. Эту функцию можно также задействовать для получения административного JIT-доступа по требованию, когда это необходимо.
- Защита идентификации Azure Active Directory обнаруживает потенциальные уязвимости, влияющие на удостоверения Организации, настраивает автоматические ответы на обнаруженные подозрительные действия, связанные с удостоверениями организации, и изучает подозрительные инциденты для выполнения соответствующих действий по их устранению.

### <a name="secrets-management"></a>Управление секретами
Решение использует Azure Key Vault для управления ключами и секретами. Хранилище ключей Azure помогает защитить криптографические ключи и секреты, используемые облачными приложениями и службами. Следующие возможности Azure Key Vault помогают клиентам защитить эти данные и получить доступ к ним:

- Политики расширенного доступа настраиваются по мере необходимости.
- Политики доступа к Key Vault определены с минимальными необходимыми разрешениями на использование ключей и секретов.
- Все ключи и секреты в Key Vault имеют срок действия.
- Все ключи в Key Vault защищены специализированными аппаратными модулями безопасности. Тип ключа — 2048-разрядный ключ RSA, защищенный с помощью HSM.
- С помощью Key Vault можно зашифровать ключи и секреты (например, ключи проверки подлинности, ключи учетной записи хранения, ключи шифрования данных). PFX-файлы и пароли) с помощью ключей, защищенных аппаратными модулями безопасности (HSM)
- Используйте RBAC для назначения разрешений пользователям, группам и приложениям в определенной области.
- Используйте Key Vault для управления сертификатами TLS с автопродлением.
- Для журналов диагностики хранилища ключей включен срок хранения не менее 365 дней.
- Допустимые операции шифрования для ключей доступны только тем пользователям, которым они нужны.

### <a name="azure-security-center"></a>Центр безопасности Azure
С помощью центра безопасности Azure клиенты могут централизованно применять политики безопасности и управлять ими в рабочих нагрузках, ограничивать риск угроз, а также обнаруживать атаки и реагировать на них. Кроме того, центр безопасности Azure обращается к существующей конфигурации служб Azure и предоставляет конфигурацию и рекомендации по службам для повышения уровня безопасности и защиты данных.

В центре безопасности Azure используются различные возможности обнаружения, чтобы оповещать клиентов о потенциальных атаках на их среды. Эти оповещения содержат важные сведения о причине их активации, ресурсах, на которые нацелена атака, и ее источнике. Центр безопасности Azure имеет набор стандартных оповещений системы безопасности, которые запускаются при возникновении угрозы или подозрительных действий. Настраиваемые правила генерации оповещений в центре безопасности Azure позволяют клиентам определять новые оповещения системы безопасности на основе данных, уже собранных из их среды.

Центр безопасности Azure предоставляет приоритетные оповещения безопасности и инциденты, упрощая процедуры обнаружения и устранения потенциальных проблем безопасности. Отчет по анализу угроз создается для каждой обнаруженной угрозы, чтобы помочь группам реагирования на инциденты в исследовании и устранения угрозах.

### <a name="azure-application-gateway"></a>Шлюз приложений Azure
Архитектура снижает риск уязвимостей безопасности с помощью шлюза приложений Azure с настроенным брандмауэром веб-приложения и включенным набором правил OWASP. Доступны следующие дополнительные возможности:

- Сквозной интерфейс SSL
- Отключение TLS v 1.0 и v 1.1
- Включить TLSv 1.2
- Брандмауэр веб-приложения (режим предотвращения)
- Режим предотвращения с набором правил OWASP 3,0
- Включение ведения журналов диагностики
- пользовательские пробы работоспособности;
- Центр безопасности Azure и помощник по Azure обеспечивают дополнительную защиту и уведомления. Центр безопасности Azure также предоставляет систему репутации.

### <a name="logging-and-auditing"></a>Ведение журналов и аудит
Службы Azure обеспечивают детальную запись системных и пользовательских действий, а также сведений о работоспособности системы.

- [Журналы действий](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs) предоставляют информацию об операциях, которые выполнялись с ресурсами в подписке. Журналы действий помогают определить инициатора операции, время события и состояние.
- [Журналы диагностики](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs) включают в себя все журналы, создаваемые ресурсами. Эти журналы включают системные журналы событий Windows, журналы службы хранилища Azure, Key Vault журналы аудита, доступ к шлюзу приложений и журналы брандмауэра. Все журналы диагностики обеспечивают запись данных в централизованную и зашифрованную учетную запись Azure для архивирования. В соответствии с требованиями конкретной организации пользователь может настроить срок хранения до 730 дней.

### <a name="azure-monitor-logs"></a>Журналы Azure Monitor
Эти журналы консолидируются в [журналы Azure Monitor](https://azure.microsoft.com/services/log-analytics/) для обработки, хранения и создания отчетов на панели мониторинга. Собранные данные объединяются в отдельные таблицы для каждого типа данных в рабочих областях Log Analytics, что позволяет анализировать все данные независимо от первичного источника. Кроме того, центр безопасности Azure интегрируется с журналами Azure Monitor, что позволяет клиентам использовать запросы Kusto для доступа к данным событий безопасности и объединения их с данными из других служб.

В состав этой архитектуры входят следующие [решения мониторинга](https://docs.microsoft.com/azure/log-analytics/log-analytics-add-solutions) Azure:

- [Оценка Active Directory](https://docs.microsoft.com/azure/log-analytics/log-analytics-ad-assessment). Решение "Проверка работоспособности Active Directory" регулярно оценивает риски и работоспособность серверных сред и предоставляет список рекомендаций, относящихся к развернутой серверной инфраструктуре, в порядке приоритета.
- [Оценка SQL](https://docs.microsoft.com/azure/log-analytics/log-analytics-sql-assessment). Решение "Проверка работоспособности SQL" регулярно оценивает риски и работоспособность серверных сред и предоставляет клиентам список рекомендаций, относящихся к развернутой серверной инфраструктуре и перечисленных в порядке приоритета.
- [Работоспособность агентов](https://docs.microsoft.com/azure/operations-management-suite/oms-solution-agenthealth). Решение Работоспособность агентов сообщает, сколько агентов развернуто и их географическое распределение, а также количество агентов, не отвечающих на запросы, и число агентов, которые отправляют операционные данные.
- [Activity Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-activity). Решение "Аналитика журнала действий" помогает анализировать журналы действий Azure во всех подписках Azure для клиента.

### <a name="azure-monitor"></a>Azure Monitor
[Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/) помогает пользователям отслеживать производительность, поддерживать безопасность и выявлять тенденции, предоставляя организациям возможность аудита, создания оповещений и архивации данных, включая отслеживание вызовов API в ресурсах Azure.

### <a name="application-insights"></a>Application Insights
[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) — это расширяемая служба управления производительностью приложений для веб-разработчиков на нескольких платформах. Application Insights обнаруживает аномалии производительности и может использоваться клиентами для мониторинга динамического веб-приложения. Эта служба содержит мощные аналитические средства, которые помогают клиентам диагностировать проблемы и понять, что пользователи фактически делают в их приложении. Эта служба помогает клиентам постоянно улучшать производительность и удобство использования.

### <a name="azure-key-vault"></a>Хранилище Azure Key Vault
Создайте хранилище для Организации, в котором должны храниться ключи, и обеспечьте ведение отчетности для рабочих задач, как показано ниже.

- В хранилище ключей хранятся такие данные:

   - ключ Application Insights;
   - Ключ доступа к хранилищу данных
   - Строка подключения
   - Имя таблицы данных
   - Учетные данные пользователя

- Политики расширенного доступа настраиваются по мере необходимости.
- Политики доступа к хранилищу ключей определены с минимальными необходимыми разрешениями на использование ключей и секретов.
- Все ключи и секреты в хранилище ключей имеют срок действия.
- Все ключи в Key Vault защищены модулем HSM [Key Type = HSM, защищенным с помощью аппаратного модуля безопасности 2048-разрядного ключа RSA]
- Всем пользователям и удостоверениям предоставляются минимальные необходимые разрешения с помощью управления доступом на основе ролей (RBAC).
- Приложения используют общее хранилище ключей, только если у них настроено взаимное доверие и им нужен доступ к одним и тем же секретам во время выполнения.
- Для журналов диагностики хранилища ключей включен срок хранения не менее 365 дней.
- Допустимые операции шифрования для ключей доступны только тем пользователям, которым они нужны.

### <a name="vpn-and-expressroute"></a>VPN и ExpressRoute
Чтобы установить защищенное подключение к ресурсам, которые развертываются в рамках этой эталонной архитектуры веб-приложений PaaS, необходимо настроить защищенный VPN-туннель или [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction). Правильно настроив VPN-подключение или ExpressRoute, клиенты могут добавить уровень защиты передаваемых данных.

При реализации защищенного VPN-туннеля с помощью Azure можно создать виртуальное частное подключение между локальной сетью и виртуальной сетью Azure. Это подключение выполняется через Интернет и позволяет клиентам безопасно подключать сведения о туннеле в зашифрованной связи между сетью клиента и Azure. VPN типа "сеть-сеть" — это безопасная проверенная технология, которая десятилетиями применяется на предприятиях всех размеров. Режим туннелирования IPsec используется в этом параметре в качестве механизма шифрования.

Так как трафик в VPN-туннеле проходит через Интернет с VPN типа "сеть-сеть", Майкрософт предлагает другой, еще более защищенный вариант подключения. Azure ExpressRoute — это выделенный канал связи в глобальной сети между Azure и локальной средой или поставщиком услуг размещения Exchange. Подключения ExpressRoute не осуществляются через Интернет и обеспечивают повышенный уровень безопасности, надежности и скорости соединения с низким уровнем задержки по сравнению со стандартными подключениями через Интернет. Более того, так как это прямое подключение поставщика телекоммуникационных услуг клиента, данные не передаются через Интернет и поэтому недоступны в нем.

См. [рекомендации](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) по реализации защищенной гибридной сети, расширяющей локальную сеть в Azure.

## <a name="cost-considerations"></a>Рекомендации по стоимости
Если у вас еще нет учетной записи Azure, вы можете создать ее бесплатно. Перейдите на [страницу бесплатной учетной записи](https://azure.microsoft.com/free/) , чтобы начать работу, Узнайте, что можно делать с бесплатной учетной записью Azure, и Узнайте, какие продукты доступны в течение 12 месяцев.

Чтобы развернуть ресурсы в примере приложения с помощью функций безопасности, необходимо заплатить за некоторые функции уровня "Премиум". По мере того как приложение масштабируется, а бесплатные уровни и пробные версии, предлагаемые Azure, должны быть обновлены в соответствии с требованиями приложения, ваши затраты могут увеличиться. Используйте [Калькулятор цен](https://azure.microsoft.com/pricing/calculator/) Azure для оценки затрат.

## <a name="next-steps"></a>Следующие шаги
Следующие статьи помогут в проектировании, разработке и развертывании безопасных приложений.

- [Design](secure-design.md) (Конструктор)
- [Разработка](secure-develop.md)
- [Развертывание](secure-deploy.md)
