---
title: Безопасное веб-приложение для PCI DSS (ru) Документы Майкрософт
description: В этом примере приложения реализованы рекомендации по безопасности, которые улучшают ваше приложение и безопасность организации при разработке в Azure.
keywords: Нет
services: security
documentationcenter: na
author: fehase
manager: rkarlin
editor: ''
ms.assetid: cd906856-f4f9-4ddc-9249-c998386f4085
ms.service: security
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/22/2019
ms.author: terrylan
ms.openlocfilehash: 4fe612db65d985be2f1f1c81d03c3ee735c03889
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "69992618"
---
# <a name="develop-a-secure-infrastructure-for-a-pci-app"></a>Разработка безопасной инфраструктуры для приложения PCI

## <a name="overview"></a>Обзор

Эта безопасная инфраструктура для приложения Индустрии платежных карт (PCI) содержит рекомендации по развертыванию платформы индустрии платежных карт в качестве среды службы (PaaS), подходящей для сбора, хранения и поиска данных держателя карт. Это решение автоматизирует развертывание и конфигурацию ресурсов Azure для общей эталонной архитектуры, демонстрируя, как клиенты могут обеспечить соответствие требованиям к безопасности и соответствию. Оно также служит основой для создания и настройки решений в Azure. Решение реализует подмножество требований, аналогичных стандартам безопасности данных индустрии платежных карт (PCI DSS 3.2).

Этот пример автоматически развертывает архитектуру ссылки веб-приложений PaaS с предварительно настроенными элементами безопасности, чтобы помочь клиентам достичь соответствия требованиям PCI DSS 3.2. Решение состоит из шаблонов Azure Resource Manager и сценариев PowerShell, позволяющих развернуть и настроить ресурсы.

Следует последовательно выполнять действия, описанные в этой статье, чтобы убедиться, что компоненты приложения настроены должным образом. База данных, служба приложений Azure, экземпляр Azure Key Vault и экземпляр Azure Application Gateway зависят друг от друга.

Скрипты развертывания настраивают инфраструктуру. После запуска сценариев развертывания необходимо сделать ручную конфигурацию на портале Azure, чтобы связать компоненты и службы вместе.

Этот пример предназначен для опытных разработчиков ВС УК, которые работают в сфере розничной торговли и хотят создать розничное приложение с защищенной инфраструктурой Azure.

> [!NOTE]
> Эта архитектура призвана служить основой, которую клиенты должны адаптировать для конкретных требований, и не должна использоваться "как есть" в рабочей среде.

Развертывания приложения в этой среде без изменений недостаточно для полного соответствия требованиям PCI DSS 3.2. Следует отметить следующее.

- Эта архитектура является своего рода эталоном, который помогает клиентам использовать Azure в соответствии с требованиями PCI DSS 3.2.
- Клиенты несут ответственность за проведение соответствующих проверок безопасности и соответствия внутренней оценки решения, созданного с использованием этой архитектуры, поскольку требования могут варьироваться в зависимости от специфики реализации каждого клиента.

При разработке и развертывании этого приложения вы узнаете, как:

- Создайте экземпляр Azure Key Vault и храните и извлекайте из него секреты.
- Развертывание базы данных Azure для Azure S'L, настройка безопасных данных и авторизация доступа к ним.
- Развертывание веб-приложения Azure с средой Службы приложений, которая является выделенной изолированной с фронтального брандмауэра aEcess.
- Создайте и направите экземпляр Azure Application Gateway с помощью брандмауэра, использующему [правила OWASP Top 10.](https://coreruleset.org/)
- Включите шифрование данных в пути и в состоянии покоя с помощью служб Azure.
- Настройка политики Azure и синих отпечатков для оценки соответствия требованиям

После разработки и развертывания этого приложения, вы будете настроены следующий образец веб-приложения вместе с конфигурацией и мерами безопасности, которые описаны.

## <a name="architecture-diagram-and-components"></a>Схема и компоненты архитектуры
Приложение является типичным n-уровня приложение с тремя уровнями. Передний конец, задняя часть и уровень базы данных с интегрированными компонентами мониторинга и секретного управления показаны здесь:

![Архитектура приложения](./media/secure-pci-web-app/architecture.png)

Архитектура состоит из следующих компонентов:

- [App Service Окружающей среды v2](https://docs.microsoft.com/azure/app-service/environment/intro/). Обеспечивает среду службы приложений и баланселизатор нагрузки для нашей архитектуры приложений.
- [Шлюз приложений Azure.](https://docs.microsoft.com/azure/application-gateway/) Обеспечивает шлюз и брандмауэр для архитектуры приложений.
- [Приложение Исследования](https://docs.microsoft.com/azure/azure-monitor/app/app-insights-overview). Предоставляет расширяемую службу управления производительностью приложений (APM) на нескольких платформах.
- [Лазурный ключ Убежище](https://docs.microsoft.com/azure/key-vault/). Хранит и шифрует секреты нашего приложения и управляет созданием политик доступа вокруг них.
- [Активный каталог Azure](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-whatis/). Предоставляет облачные службы управления идентификацией и доступом, вход и доступ к ресурсам.
- [Azure DNS](https://docs.microsoft.com/azure/dns/dns-overview). Предоставляет услугу для размещения домена.
- [Балансер загрузки Azure](https://docs.microsoft.com/azure/load-balancer/load-balancer-overview/). Масштабы приложений и создает высокую доступность для ваших услуг
- [Служба хранилища Azure](https://docs.microsoft.com/azure/storage/common/storage-introduction/). Предоставляет решение для современных сценариев хранения данных.
- [Azure Web App](https://docs.microsoft.com/azure/app-service/overview/).  Предоставляет услугу http для хостинга веб-приложений.
- [База данных Azure для AzureS'L](https://docs.microsoft.com/azure/sql-database/sql-database-technical-overview/). Безопасно хранит данные нашего приложения.
- [Лазурные чертежи](https://docs.microsoft.com/azure/governance/blueprints/overview/). Обеспечивает спецификации и соответствие определенным стандартам и требованиям.
- [Центр безопасности Azure](https://docs.microsoft.com/azure/security-center/)
- [Политика Azure](https://docs.microsoft.com/azure/governance/policy/overview). Оценивает ресурсы за несоблюдение назначенных политик.

## <a name="threat-model"></a>Модель рисков
Моделирование угроз — это процесс выявления потенциальных угроз безопасности для вашего бизнеса и приложения, а затем обеспечения надлежащего плана смягчения последствий.

В этом примере использовался [инструмент моделирования угроз Майкрософт](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool) для реализации моделирования угроз для безопасного примера приложения. Спомощью компонентов и потоков данных можно определить проблемы и угрозы на ранних стадиях процесса разработки. Это экономит время и деньги позже.

Это модель угрозы для примера приложения:

![Модель рисков](./media/secure-pci-web-app/threat-model.png)

Некоторые примеры угроз и потенциальных уязвимостей, генерирующих инструмент моделирования угроз, отображаются на следующем скриншоте. Модель угроз дает обзор выставленной поверхности атаки и побуждает разработчиков задуматься о том, как уменьшить проблемы.

![Выход модели угрозы](./media/secure-web-app/threat-model-output.png)

Например, впрыск с помощью предыдущей модели угроз смягчается за счет дезинфекции входов пользователей и использования сохраненных функций в базе данных Azure для PostgreS'L. Это смягчение предотвращает произвольное выполнение запросов во время чтения и записи данных.

Разработчики повышают общую безопасность системы, смягчая каждую из угроз на выходе модели угроз.

## <a name="deployment"></a>Развертывание
### <a name="prerequisites"></a>Предварительные требования
Чтобы запустить приложение, необходимо установить следующие инструменты:

- Редактор кода для изменения и просмотра кода приложения. [Visual Studio Code](https://code.visualstudio.com/) — это вариант с открытым исходным кодом.
- [Azure CLI](https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest&viewFallbackFrom=azure-cli-latest) на компьютере разработки.
- [Git](https://git-scm.com/) на вашей системе. Git используется для локального клонирования исходного кода.
- [jq](https://stedolan.github.io/jq/), инструмент UNIX для запроса JSON в удобной для пользователя форме.

Этот пример состоит из файлов конфигурации JSON и скриптов PowerShell, которые обрабатываются службой API-сервиса API менеджера ресурсов Azure для развертывания ресурсов в Azure. Подробные инструкции по развертыванию см. в [этой статье](https://github.com/Azure-Samples/pci-paas-webapp-ase-sqldb-appgateway-keyvault-oms-AzureRM).

#### <a name="quickstart"></a>Краткое руководство

1.  Клонируйте или скачайте [этот](https://github.com/Azure-Samples/pci-paas-webapp-ase-sqldb-appgateway-keyvault-oms-AzureRM.git) репозиторий GitHub на локальную рабочую станцию.
2.  Просмотрите 0-Setup-AdministrativeAccountAndPermission.md и выполните предоставленные команды.
3.  Разверните тестовое решение с примером данных Contoso или осуществите пилотный проект в начальной рабочей среде.

    Этот скрипт развертывает ресурсы Azure для демонстрации веб-магазина с использованием выборочных данных Contoso.

В этом примере вы запустите скрипт развертывания веб-приложений в службу приложений и создает ресурсы.

Существует множество способов развертывания приложений в Azure, включая:

- Шаблоны Azure Resource Manager
- PowerShell
- Azure CLI
- Портал Azure
- Azure DevOps

## <a name="guidance-and-recommendations"></a>Инструкции и рекомендации

### <a name="network"></a>Сеть
Архитектура определяет частную виртуальную сеть с пространством адресов 10.200.0.0/16.
 ![Virtual_Network](./media/secure-pci-web-app/virtual-network.png)

### <a name="network-security-groups"></a>Группы безопасности сети
Группы сетевой безопасности (содержатhttps://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg) списки контроля доступа (ACL), которые позволяют или отрицают трафик в виртуальной сети. Группы безопасности сети можно использовать для защиты трафика на уровне подсети или отдельной виртуальной машины. Существуют следующие группы безопасности сети:

- 1 группа безопасности сети для шлюза приложений;
- 1 группа безопасности сети для среды службы приложений;
- 1 группа безопасности сети для Базы данных SQL Azure.
- 1 группа безопасности сети для узла-бастиона.

Каждая из групп безопасности Сети имеет специальные порты и протоколы, чтобы решение работало надежно и правильно. Кроме того, для каждой группы безопасности сети настроены следующие конфигурации:

- Диагностические журналыhttps://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log) и события(включены и хранятся в учетной записи хранилища
- Журналы Azure Monitor подключены к диагностике группы сетевой безопасности(https://github.com/krnese/AzureDeploy/blob/master/AzureMgmt/AzureMonitor/nsgWithDiagnostics.json)

### <a name="nsg-config"></a>NSG Конлига
NSG-конфигурация для среды службы приложений должна быть настроена, как показано на рисунке ниже.

 ![NSG_Config](./media/secure-pci-web-app/nsg-config.png)

Каждая подсеть связана с соответствующей группой безопасности сети.

### <a name="config"></a>Config
Подсети настроены, как показано на рисунке ниже.
 ![Config](./media/secure-pci-web-app/config.png)

### <a name="azure-dns"></a>Azure DNS
Система доменных имен (DNS) отвечает за перевод (или разрешение) веб-сайта или имени службы на его IP-адрес. [Azure DNS](https://docs.microsoft.com/azure/dns/dns-overview) является службой размещения доменов DNS, которая осуществляет разрешение имен на базе инфраструктуры Azure. Размещая домены в Azure, пользователи могут управлять записями DNS, используя те же учетные данные, API, инструменты и средства выставления счетов, что и для других служб Azure. Azure DNS также поддерживает частные домены DNS.

### <a name="protect-data"></a>Защита данных
Для защиты данных в облаке необходимо учитывать все возможные состояния, в которых могут находиться данные, а также все методы управления для каждого из этих состояний. Рекомендации по защите и шифрованию данных Azure действуют для следующих состояний данных.

- Хранимые: сюда относятся все объекты, контейнеры и типы хранения информации, которые существуют на физическом носителе в конкретном месте, например на магнитном или оптическом диске.
- При передаче: передаваемые между компонентами, расположениями или программами данные находятся в пути. Примерами являются передачи по сети, по служебной шине (из локальной сети в облако и наоборот, включая гибридные подключения, такие как ExpressRoute), а также в процессе ввода-вывода.

### <a name="azure-storage"></a>Хранилище Azure
Для удовлетворения зашифрованных данных при соблюдении требований к отдыху [все данные Azure Storage](https://azure.microsoft.com/services/storage/) используют Azure Key Vault для поддержания контроля над ключами, которые получают доступ к данным и шифруют их. Это помогает защищать и охранять данные держателей карт в рамках обязательств по безопасности организаций и соответствия требованиям, определенным в PCI DSS 3.2.

### <a name="azure-disk-encryption"></a>Шифрование дисков Azure
Служба Шифрование дисков Azure использует компонент BitLocker в Windows, чтобы обеспечить шифрование томов для дисков данных. Решение интегрируется с Azure Key Vault, что помогает управлять ключами шифрования дисков.

### <a name="azure-sql-database"></a>База данных SQL Azure
В экземпляре Базы данных Azure SQL используются следующие меры безопасности базы данных:

- [Использование Active Directory для аутентификации и авторизации](https://docs.microsoft.com/azure/sql-database/sql-database-aad-authentication) обеспечивает централизованное управление удостоверениями для пользователей баз данных и других служб Майкрософт.
- [Аудит базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-auditing-get-started/) позволяет отслеживать события базы данных и записывать их в журнал аудита в учетной записи хранения Azure.
- В Базе данных SQL Azure настроено [прозрачное шифрование данных](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql), которое обеспечивает шифрование и расшифровку базы данных, связанных резервных копий и файлов журналов транзакций в реальном времени для защиты неактивных данных. Прозрачное шифрование данных позволяет защитить сохраненные данные от несанкционированного доступа.
- [Правила брандмауэра](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure) предотвращают любой доступ к серверам баз данных без надлежащих разрешений. Брандмауэр предоставляет доступ к базам данным на основе исходного IP-адреса каждого запроса.
- [Обнаружение угроз SQL](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection-get-started) позволяет немедленно выявлять потенциальные угрозы и реагировать на них. При этом поступают оповещения системы безопасности о подозрительных действиях с базами данных, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных шаблонах доступа к базам данных.
- [Зашифрованные столбцы](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) гарантируют, что конфиденциальные данные никогда не отобразятся как открытый текст внутри системы баз данных. После включения шифрования данных получить доступ к данным в виде открытого текста смогут только клиентские приложения и серверы приложений, у которых есть доступ к ключам.
- [Динамическое маскирование данных Базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-dynamic-data-masking-get-started) ограничивает возможность раскрытия конфиденциальных данных, маскируя их для непривилегированных пользователей или приложений. Динамическое маскирование данных может автоматически обнаруживать потенциально конфиденциальные данные и предлагать применение соответствующих масок. Это помогает определить и сократить доступ к данным таким образом, чтобы они не извлекались из базы данных с помощью несанкционированного доступа. Клиенты несут ответственность за настройку параметров динамического маскирования данных в соответствии со своей схемой базы данных.

### <a name="identity-management"></a>Управление удостоверениями
Следующие технологии обеспечивают возможности управления доступом к данным держателей карт в среде Azure:

- Azure Active Directory — это многотентная облачная служба управления каталогами и идентификационными данными корпорации Майкрософт. Все пользователи этого решения создаются в Azure Active Directory, включая пользователей, обращающихся к Базе данных SQL Azure.
- Аутентификация приложения выполняется с использованием Azure Active Directory. Для получения дополнительной [информации](https://docs.microsoft.com/azure/active-directory/manage-apps/plan-an-application-integration)см. Кроме того, при шифровании столбцов базы данных используется Azure Active Directory для проверки подлинности приложения в Базе данных Azure SQL. Для получения дополнительной [how to protect sensitive data in Azure SQL Database](https://docs.microsoft.com/azure/sql-database/sql-database-security-overview)информации см.
- Управление доступом на основе ролей Azure позволяет администраторам определять детальные разрешения доступа, предоставляя его ровно в той мере, которая необходима пользователям для выполнения работы. Вместо предоставления каждому пользователю неограниченных разрешений на ресурсы Azure администраторы могут разрешить только определенные действия для доступа к данным держателей карт. Доступ к подписке есть только у администратора подписки.
- Azure Active Directory Privileged Identity Management позволяет клиентам свести к минимуму число пользователей, имеющих доступ к определенной информации, например данным держателей карт. Администраторы могут использовать Azure Active Directory Privileged Identity Management для обнаружения, ограничения и отслеживания привилегированных удостоверений, а также их доступа к ресурсам. Эту функцию можно также задействовать для получения административного JIT-доступа по требованию, когда это необходимо.
- Azure Active Directory Identity Protection обнаруживает потенциальные уязвимости, влияющие на идентификаторы организации, настраивает автоматизированные ответы на обнаруженные подозрительные действия, связанные с идентификаторами организации, и исследует подозрительные инцидентов, чтобы принять соответствующие меры для их устранения.

### <a name="secrets-management"></a>Управление секретами
Для управления ключами и секретами в решении используется Azure Key Vault. Хранилище ключей Azure помогает защитить криптографические ключи и секреты, используемые облачными приложениями и службами. Следующие возможности Azure Key Vault помогают клиентам защитить эти данные и получить доступ к ним:

- Политики расширенного доступа настраиваются по мере необходимости.
- Политики доступа к Key Vault определены с минимальными необходимыми разрешениями на использование ключей и секретов.
- Все ключи и секреты в Key Vault имеют срок действия.
- Все ключи в Key Vault защищены специализированными аппаратными модулями безопасности. Тип ключа — 2048-разрядный ключ RSA, защищенный с помощью HSM.
- С Key Vault вы можете шифровать ключи и секреты (такие как ключи аутентификации, ключи учетной записи хранилища, ключи шифрования данных. Файлы и пароли PFX с помощью ключей, защищенных аппаратными модулями безопасности (HSMs)
- Используйте RBAC для назначения разрешений пользователям, группам и приложениям в определенной области.
- Используйте Key Vault для управления сертификатами TLS с помощью автоматического обновления.
- Для журналов диагностики хранилища ключей включен срок хранения не менее 365 дней.
- Допустимые операции шифрования для ключей доступны только тем пользователям, которым они нужны.

### <a name="azure-security-center"></a>Центр безопасности Azure
С помощью Центра безопасности Azure клиенты могут централизованно применять политики безопасности и управлять ими в рабочих нагрузках, ограничивать подверженность системы к угрозам, а также выявлять атаки и реагировать на них. Кроме того, центр безопасности Azure обращается к существующей конфигурации служб Azure и предоставляет конфигурацию и рекомендации по службам для повышения уровня безопасности и защиты данных.

В центре безопасности Azure используются различные возможности обнаружения, чтобы оповещать клиентов о потенциальных атаках на их среды. Эти оповещения содержат важные сведения о причине их активации, ресурсах, на которые нацелена атака, и ее источнике. Центр безопасности Azure имеет ряд предопределенных оповещений безопасности, которые активируются при возникновении угрозы или подозрительной активности. Настраиваемые правила генерации оповещений в центре безопасности Azure позволяют клиентам определять новые оповещения безопасности на основе данных, собранных из их среды.

Центр безопасности Azure предоставляет приоритетные оповещения безопасности и инциденты, упрощая процедуры обнаружения и устранения потенциальных проблем безопасности. Для каждой обнаруженной угрозы создается отчет об исследовании угроз. Это позволяет командам реагирования на инциденты расследовать и устранять угрозы.

### <a name="azure-application-gateway"></a>Шлюз приложений Azure
Архитектура снижает риск уязвимостей безопасности с помощью шлюза приложений Azure с настроенным брандмауэром веб-приложения и включенным набором правил OWASP. Доступны следующие дополнительные возможности:

- Сквозной SSL
- Отключить TLS v1.0 и v1.1
- Включить TLSv1.2
- брандмауэр веб-приложения (режим предотвращения);
- режим предотвращения с набором правил OWASP 3.0.
- Включение ведения журналов диагностики
- пользовательские пробы работоспособности;
- Центр безопасности Azure и Помощник Azure обеспечивают дополнительную защиту и уведомления. Центр безопасности Azure также предоставляет систему репутации.

### <a name="logging-and-auditing"></a>Ведение журналов и аудит
Службы Azure обеспечивают детальную запись системных и пользовательских действий, а также сведений о работоспособности системы.

- [Журналы действий](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs) предоставляют информацию об операциях, которые выполнялись с ресурсами в подписке. Журналы действий помогают определить инициатора операции, время события и состояние.
- [Журналы диагностики](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs) включают в себя все журналы, создаваемые ресурсами. Эти журналы включают журналы систем событий Windows, журналы хранения azure, журналы аудита Key Vault, а также журналы доступа к порталу приложений и журналы firewall. Все журналы диагностики обеспечивают запись данных в централизованную и зашифрованную учетную запись Azure для архивирования. В соответствии с требованиями конкретной организации пользователь может настроить срок хранения до 730 дней.

### <a name="azure-monitor-logs"></a>Журналы Azure Monitor
Эти журналы объединены в [журналы Azure Monitor для обработки,](https://azure.microsoft.com/services/log-analytics/) хранения и отчетности панели мониторинга. Собранные данные объединяются в отдельные таблицы для каждого типа данных в рабочих областях Log Analytics, что позволяет анализировать все данные независимо от первичного источника. Кроме того, Центр безопасности Azure интегрируется с журналами Azure Monitor, позволяя клиентам использовать запросы Kusto для доступа к данным событий безопасности и объединения их с данными других служб.

Следующие [решения мониторинга](https://docs.microsoft.com/azure/log-analytics/log-analytics-add-solutions) Azure включены в эту архитектуру:

- [Активная оценка каталога](https://docs.microsoft.com/azure/log-analytics/log-analytics-ad-assessment): Решение Active Directory Health Check оценивает риск и работоспособность серверных сред на регулярном интервале и предоставляет приоритетный список рекомендаций, характерных для развернутой серверной инфраструктуры.
- [Оценка SQL](https://docs.microsoft.com/azure/log-analytics/log-analytics-sql-assessment). Решение "Проверка работоспособности SQL" регулярно оценивает риски и работоспособность серверных сред и предоставляет клиентам список рекомендаций, относящихся к развернутой серверной инфраструктуре и перечисленных в порядке приоритета.
- [Agent Health](https://docs.microsoft.com/azure/operations-management-suite/oms-solution-agenthealth): Решение Agent Health сообщает, сколько агентов развернуто и их географическое распределение, а также сколько агентов не отвечают и сколько агентов представляют оперативные данные.
- [Аналитика журнала действий](https://docs.microsoft.com/azure/log-analytics/log-analytics-activity). Решение "Аналитика журнала действий" помогает анализировать журналы действий Azure во всех подписках Azure для клиента.

### <a name="azure-monitor"></a>Azure Monitor
[Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/) помогает пользователям отслеживать производительность, поддерживать безопасность и выявлять тенденции, предоставляя организациям возможность аудита, создания оповещений и архивации данных, включая отслеживание вызовов API в ресурсах Azure.

### <a name="application-insights"></a>Application Insights
[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) — это расширяемая служба управления производительностью приложений для веб-разработчиков на нескольких платформах. Application Insights обнаруживает аномалии производительности и может использоваться клиентами для мониторинга динамического веб-приложения. Эта служба содержит мощные аналитические средства, которые помогают клиентам диагностировать проблемы и понять, что пользователи фактически делают в их приложении. Эта служба помогает клиентам постоянно улучшать производительность и удобство использования.

### <a name="azure-key-vault"></a>Azure Key Vault
Создайте хранилище для организации, в которой можно хранить ключи, и поддерживать подотчетность для выполнения оперативных задач, как ниже:

- В хранилище ключей хранятся такие данные:

   - ключ Application Insights;
   - Ключ доступа к хранению данных
   - Строка подключения
   - Имя таблицы данных
   - учетные данные пользователя;

- Политики расширенного доступа настраиваются по мере необходимости.
- Политики доступа к хранилищу ключей определены с минимальными необходимыми разрешениями на использование ключей и секретов.
- Все ключи и секреты в хранилище ключей имеют срок действия.
- Все ключи в Key Vault защищены HSM «Ключевой тип » HSM Защищенный 2048-разрядный ключ RSA»
- Всем пользователям/идентификационным данным предоставляются минимальные необходимые разрешения с помощью элемента управления доступом на основе ролей (RBAC)
- Приложения используют общее хранилище ключей, только если у них настроено взаимное доверие и им нужен доступ к одним и тем же секретам во время выполнения.
- Для журналов диагностики хранилища ключей включен срок хранения не менее 365 дней.
- Допустимые операции шифрования для ключей доступны только тем пользователям, которым они нужны.

### <a name="vpn-and-expressroute"></a>VPN и ExpressRoute
Чтобы установить защищенное подключение к ресурсам, которые развертываются в рамках этой эталонной архитектуры веб-приложений PaaS, необходимо настроить защищенный VPN-туннель или [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction). Правильно настроив VPN-подключение или ExpressRoute, клиенты могут добавить уровень защиты передаваемых данных.

При реализации защищенного VPN-туннеля с помощью Azure можно создать виртуальное частное подключение между локальной сетью и виртуальной сетью Azure. Это соединение происходит через Интернет и позволяет клиентам надежно "туннель" информацию внутри зашифрованной связи между сетью клиента и Azure. VPN типа "сеть-сеть" — это безопасная проверенная технология, которая десятилетиями применяется на предприятиях всех размеров. Режим туннеля IPsec используется в этом решении как механизм шифрования.

Так как трафик в VPN-туннеле проходит через Интернет с VPN типа "сеть-сеть", Майкрософт предлагает другой, еще более защищенный вариант подключения. Azure ExpressRoute — это выделенный канал связи в глобальной сети между Azure и локальной средой или поставщиком услуг размещения Exchange. Подключения ExpressRoute не осуществляются через Интернет и обеспечивают повышенный уровень безопасности, надежности и быстродействия подключений с низким уровнем задержки по сравнению со стандартными подключениями через Интернет. Более того, так как это прямое подключение поставщика телекоммуникационных услуг клиента, данные не передаются через Интернет и поэтому недоступны в нем.

См. [рекомендации](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) по реализации защищенной гибридной сети, расширяющей локальную сеть в Azure.

## <a name="cost-considerations"></a>Рекомендации по стоимости
Если у вас еще нет учетной записи Azure, можно создать бесплатную учетную запись. Перейдите на [бесплатную страницу учетной записи,](https://azure.microsoft.com/free/) чтобы начать работу, узнайте, что вы можете сделать с бесплатной учетной записью Azure, и узнайте, какие продукты бесплатны в течение 12 месяцев.

Чтобы развернуть ресурсы в примере приложения с функциями безопасности, необходимо оплатить некоторые премиум-функции. Поскольку масштабы приложения и бесплатные уровни и пробные версии, предлагаемые Azure, должны быть обновлены в соответствии с требованиями приложения, ваши затраты могут возрасти. Используйте [калькулятор ценообразования](https://azure.microsoft.com/pricing/calculator/) Azure для оценки затрат.

## <a name="next-steps"></a>Дальнейшие действия
Следующие статьи помогут вам разрабатывать, разрабатывать и развертывать безопасные приложения.

- [Конструирование](secure-design.md)
- [Развивать](secure-develop.md)
- [Развернуть](secure-deploy.md)
