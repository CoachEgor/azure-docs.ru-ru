---
title: Разработка безопасных приложений в Microsoft Azure
description: В этой статье обсуждаются рекомендации, которые следует учитывать на этапах требование и разработки проекта веб-приложения.
author: TerryLanfear
manager: barbkess
ms.author: terrylan
ms.date: 06/11/2019
ms.topic: article
ms.service: security
services: azure
ms.assetid: 521180dc-2cc9-43f1-ae87-2701de7ca6b8
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.openlocfilehash: 12b9793cabb261368c437bd2ae2dbb39cf078bef
ms.sourcegitcommit: cf438e4b4e351b64fd0320bf17cc02489e61406a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/08/2019
ms.locfileid: "67653287"
---
# <a name="design-secure-applications-on-azure"></a>Проектирование безопасных приложений в Azure
В этой статье рассматриваются действия безопасности и элементы управления, которые следует учитывать при разработке приложений для облака. Обучающие материалы, а также вопросы безопасности и основные понятия для рассмотрения при требований и разработки этапы Microsoft по [Security Development Lifecycle (SDL)](https://msdn.microsoft.com/library/windows/desktop/84aed186-1d75-4366-8e61-8d258746bopq.aspx) рассматриваются. Призван помочь вам определить действия и служб Azure, которые можно использовать для создания более безопасных приложений.

В этой статье рассматриваются следующие этапы SDL:

- Обучение
- Требования
- Проектирование

## <a name="training"></a>Обучение
Перед началом разработки приложения в облаке, на времени сведения о безопасности и конфиденциальности в Azure. Выполнив этот шаг, можно уменьшить количество и серьезность уязвимости в приложении. Вы сможете подготовиться к соответствующим образом реагировать на постоянно изменяющихся угроз.

Используйте следующие ресурсы на этапе обучения для ознакомления со службами Azure, которые доступны для разработчиков и рекомендации по обеспечению безопасности в Azure:

  - [Руководство разработчика по Azure](https://azure.microsoft.com/campaigns/developer-guide/) показано, как приступить к работе с Azure. В руководстве показано, какие службы можно использовать для запуска приложений, хранения данных, включить аналитики, создавать приложения Интернета вещей и развертывание решений в более эффективного и надежного способа.

  - [Ознакомительное руководство для разработчиков Azure](https://docs.microsoft.com/azure/guides/developer/azure-developer-guide) содержит важные сведения для разработчиков, которым нужны для начала работы с платформой Azure, для различных задач разработки.

  - [Пакеты SDK и средства](https://docs.microsoft.com/azure/index#pivot=sdkstools) средства, которые доступны в Azure.

  - [Службы Azure DevOps](https://docs.microsoft.com/azure/devops/) предоставляет средства для совместной работы для разработки. Средства включают высокопроизводительных конвейеров, бесплатные репозитории Git, настраиваемые канбан-доски и обширной автоматизированные и Облачное нагрузочное тестирование.
    [Центр ресурсов DevOps](https://docs.microsoft.com/azure/devops/learn/) сочетает в себе наши ресурсы для изучения DevOps рекомендации, Git системы управления версиями, гибкие методики разработки, как мы работаем с DevOps в Майкрософт и как можно оценить ход собственного DevOps.

  - [Первые пять элементов безопасности, которые следует учитывать перед публикацией в рабочей среде](https://docs.microsoft.com/learn/modules/top-5-security-items-to-consider/index?WT.mc_id=Learn-Blog-tajanca) показано, как для обеспечения безопасности веб-приложений в Azure и защитить приложения от наиболее распространенных и опасных атак приложения web.

  - [Secure DevOps Kit для Azure](https://azsk.azurewebsites.net/index.html) является коллекцией скрипты, инструменты, расширения и автоматизации, предназначенного для комплексное Azure подписки и ресурсов требования к безопасности команды DevOps, использующих обширной автоматизацию. Пакет Secure DevOps для Azure можно показать, как без проблем интегрировать средства защиты в свои собственные рабочие процессы DevOps. Комплекта рассматриваются средства, как тесты проверки безопасности (SVTs), которые могут помочь разработчикам писать безопасный код и тестировать конфигурацию безопасности своих облачных приложений в написания кода и ранних этапах разработки.

  - [Рекомендации по безопасности для решений Azure](https://azure.microsoft.com/resources/security-best-practices-for-azure-solutions) предоставляет коллекцию безопасности рекомендации для использования при проектировании, развертывании и управлять облачные решения с помощью Azure.

## <a name="requirements"></a>Требования
На этапе определения требований шаг очень важен при определении того, что такое приложение, и действия после ее выпуска. На этапе требования также — это время подумать о элементы управления безопасностью, что вы создадите в приложение. На этом этапе также начала действия, вы перейдете на протяжении всего SDL убедитесь, что выпуск и развертывание безопасного приложения.

### <a name="consider-security-and-privacy-issues"></a>Следует учитывать вопросы безопасности и конфиденциальности
Этот этап является наиболее подходящее время для базовой безопасности и вопросах конфиденциальности. Определение приемлемого уровня безопасности и конфиденциальности в начале проекта помогает группе:

- Понимание рисков, связанных с проблемами безопасности.
- Найдите и исправьте ошибки безопасности во время разработки.
- Примените установленный уровень безопасности и конфиденциальности на протяжении всего проекта.

При написании требования для приложения, убедитесь, что рассмотрим элементы управления безопасности, которые могут помочь обеспечить безопасность приложений и данных.

### <a name="ask-security-questions"></a>Вопросы безопасности
Задавайте вопросы безопасности, например:

  - Мое приложение содержит конфиденциальные данные?

  - Моего приложения сбора и хранения данных, которые требуется соблюдать отраслевые стандарты и совместимость программ, таких как [федеральных финансовые учреждения изучение Council (FFIEC)](https://docs.microsoft.com/azure/security/blueprints/ffiec-analytics-overview) или [платежных карт Data Security Standards (PCI DSS)](https://docs.microsoft.com/azure/security/blueprints/pcidss-analytics-overview)?

  - Моего приложения или включить конфиденциальные данные personal или клиента, который может использоваться, сам по себе или с помощью другого сведения, чтобы определить, обратитесь в службу, или найдите один человек?

  - Мое приложение собирать или содержать данные, которые можно использовать для доступа к претендентов медицинских, образовательных, финансовые, или сведения о занятости? Определение уровня конфиденциальности данных во время фазы требования помогает классификации данных и определить, метода защиты данных, которая будет использоваться для вашего приложения.

  - Где и как хранятся Мои данные? Рассмотрим, как вы будете отслеживать службы хранилища, которые приложение использует для непредвиденных изменений (например, увеличение времени отклика). Этого можно будет влиять на ведение журнала для сбора дополнительных подробных данных и анализа глубокого?

  - Будет ли мое приложение общедоступной (в Интернете) или внутренним образом только? Если приложение является общедоступным, как защитить данные, могут собираться в используется неправильный образом? Если приложение будет доступно внутренне только, рассмотрите возможность кто в вашей организации должен иметь доступ к приложению и как долго они должны иметь доступ.

  - Понимаете ли вы модели удостоверений перед началом разработки приложения? Как будет определить, что пользователи несут кого они и какие операции пользователь авторизован для выполнения?

  - Мое приложение выполняет конфиденциальные или важные задачи (например, передачи денег и снятие блокировки дверцы доставки медицина)?
    Рассмотрим, как вы проверите, пользователь, выполняющий задачу конфиденциальных авторизован для выполнения задачи и как выполнит проверку, что сотрудник, кого они являются. Авторизация (AuthZ) — это предоставление разрешения участника прошедшего проверку подлинности безопасности делать что-то. Проверка подлинности (AuthN) — это процесс стороны допустимые учетные данные.

  - Мое приложение выполняет все действия рискованные программного обеспечения, как отправка или загрузка файлов или другие данные? Если приложение выполняет рискованные действия, рассмотрим, как приложение будет защитить пользователей от вредоносных файлов или данных.

### <a name="review-owasp-top-10"></a>Просмотрите OWASP top 10
Проверить [ <span class="underline">угрозы для безопасности OWASP Top 10 приложения</span>](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project).
OWASP Top 10 рассматриваются основные риски безопасности для веб-приложений.
Осведомленность о эти риски безопасности может помочь сделать требования и проектных решениях, минимизации этих рисков в приложении.

Важно думать о средства безопасности для предотвращения нарушений.
Тем не менее, вы также хотите [предполагаемого нарушения](https://docs.microsoft.com/azure/devops/learn/devops-at-microsoft/security-in-devops) произойдет. При условии, что нарушение безопасности предназначена для ответа некоторые важные вопросы о безопасности заранее, поэтому они не обязательно отвечать в случае сбоя:

  - Как будет обнаружить атаку?

  - Что будет сделать, если имеется атаки или нарушения безопасности?

  - Как я собираюсь восстановиться после атаки, как данные утечки или несанкционированного доступа?

## <a name="design"></a>Проектирование

На этапе проектирования критически важна для установления советы и рекомендации по разработке и функциональных спецификаций. Также важно для выполнения анализа рисков, который помогает смягчить проблемы безопасности и конфиденциальности по всему проекту.

Когда у требования к безопасности и используются понятия, безопасного проектирования, можно устранить или свести к минимуму возможности для уязвимости безопасности. Нарушение безопасности — это случайно в разработке приложения, которое может позволить пользователю для выполнения вредоносных или непредвиденных действий, после выпуска приложения.

На этапе проектирования также подумайте о применение безопасности на уровнях; один уровень защиты не обязательно достаточно. Что произойдет, если злоумышленник получает за пределами брандмауэра веб-приложения (WAF)? Требуется другой элемент управления безопасности на месте для защиты от этой атаки.

С учетом этого мы обсудим следующие понятия безопасного проектирования и обеспечения безопасности, которые следует учитывать при проектировании безопасных приложений:

- Используйте библиотеку безопасного кодирования и программная платформа.
- Поиск уязвимые компоненты.
- Используйте во время разработки приложения моделирования угроз.
- Уменьшите поверхность атаки.
- Принимают политику удостоверение как основной периметр безопасности.
- Требуется повторная проверка подлинности для важных транзакций.
- Используйте решения для управления ключами для защиты ключей, учетные данные и другие секретные данные.
- Защита конфиденциальных данных.
- Реализация резервный мер.
- Воспользуйтесь преимуществами обработки ошибок и исключений.
- Использование журнала и оповещений.

### <a name="use-a-secure-coding-library-and-a-software-framework"></a>Использовать библиотеку безопасного кодирования и программная платформа

Для разработки приложений используйте библиотеку безопасного кодирования и программную платформу с внедренными безопасности. Разработчики могут использовать существующие проверенные компоненты (шифрование, входной очистку, кодирование вывода, ключи или строки подключения и все, что будет считаться элемент управления безопасности) вместо разработки средства управления безопасностью с нуля. Это помогает защищаться от проектирования, связанные с безопасностью и недостатков реализации.

Убедитесь, что вы используете последнюю версию платформы и все функции безопасности, доступные в платформе. Корпорация Майкрософт предлагает исчерпывающий [набор средств разработки](https://azure.microsoft.com/product-categories/developer-tools/) для всех разработчиков, работающих на любой платформе или языке, может создавать облачные приложения. Позволяет создавать код на языке по своему усмотрению, просто выбрав различные [пакеты SDK](https://azure.microsoft.com/downloads/).
Можно воспользоваться преимуществами полнофункциональный интегрированных сред разработки (IDE) и редакторов, которые расширенные возможности отладки и встроенной поддержкой Azure.

Корпорация Майкрософт предлагает широкий набор [языков, платформ и средств](https://docs.microsoft.com/azure/index#pivot=sdkstools&panel=sdkstools-all) можно использовать для разработки приложений в Azure. Например, [Azure для разработчиков .NET и .NET Core](https://docs.microsoft.com/dotnet/azure/). Для каждого языка и framework, мы предлагаем вы найдете краткие руководства, руководства и справочники по API помогут вам быстро приступить к работе.

Azure предлагает широкий спектр служб, которые можно использовать для размещения веб-сайтов и веб-приложений. Эти службы позволяют разрабатывать на своем любимом языке, будь то .NET, .NET Core, Java, Ruby, Node.js, PHP или Python.
[Azure веб-приложения службы](https://docs.microsoft.com/azure/app-service/app-service-web-overview) (веб-приложения) — одна из этих служб.

Веб-приложения добавляет возможности Microsoft Azure в приложения. Он включает в себя безопасности, балансировки нагрузки, автоматическое масштабирование и автоматизированное управление. Можно также воспользоваться преимуществами возможностей DevOps в веб-приложениях, такие как управление пакетами, промежуточных сред, пользовательские домены, SSL и TLS-сертификатами и непрерывное развертывание из DevOps в Azure, GitHub, Docker Hub и других источников.

Azure предлагает и другие службы, которые можно использовать для размещения веб-сайтов и веб-приложений. В большинстве случаев оптимальным вариантом являются веб-приложения. Архитектура микрослужб, рассмотрим [Azure Service Fabric](https://azure.microsoft.com/documentation/services/service-fabric).
См. дополнительные сведения о дополнительном контроле над [виртуальными машинами Azure, на которых выполняется код](https://azure.microsoft.com/documentation/services/virtual-machines/).
Дополнительные сведения о выборе между этими службами Azure см. в разделе [сравнение службы приложений Azure, виртуальных машин, Service Fabric и облачных служб](https://docs.microsoft.com/azure/app-service/choose-web-site-cloud-service-vm).

### <a name="apply-updates-to-components"></a>Применение обновлений к компонентам

Для предотвращения появления уязвимостей, должен постоянно инвентаризации клиентские и серверные компоненты (например, платформы и библиотеки) и их зависимости для обновлений. Постоянно выпускаются новые уязвимости и версии обновленного программного обеспечения. Убедитесь, что у вас есть текущие планируется мониторинг, рассмотрение и применить обновления или изменения конфигурации для библиотек и компонентов, которые можно использовать.

См. в разделе [Open Web Application Security Project (OWASP)](https://www.owasp.org/index.php/Main_Page) странице [использование компонентов с известных уязвимостей](https://www.owasp.org/index.php/Top_10-2017_A9-Using_Components_with_Known_Vulnerabilities) для предложения по средствам. Кроме того, можно также подписаться на оповещения по электронной почте для уязвимости системы безопасности, которые относятся к компонентам, которые можно использовать.

### <a name="use-threat-modeling-during-application-design"></a>Использование моделирование угроз во время разработки приложения

Моделирование угроз — это процесс идентификации потенциальных угроз безопасности для вашего бизнеса и приложения, а затем убедитесь, что соответствующие способы устранения рисков на месте. SDL указывает, что команды должны принять участие в работе на этапе проектирования, при разрешении возможных проблем, относительно легко и экономично моделирования угроз. С помощью моделирования на этапе проектирования может значительно снизить совокупную стоимость разработки угроз.

Для облегчения процесса моделирования угроз, мы разработали [средства моделирования угроз SDL](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool) с экспертами, не связанный с безопасностью в виду. Это средство упрощает моделирование угроз для всех разработчиков благодаря четкому руководству о том, как создание и анализ моделей угроз.

Моделирование архитектуры приложения и перечисление [STRIDE](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxzZWN1cmVwcm9ncmFtbWluZ3xneDo0MTY1MmM0ZDI0ZjQ4ZDMy) угроз — спуфинг, мошенничество, отказ от ответственности, раскрытие информации, отказ в обслуживании и несанкционированное получение прав — все доверия границы оказалось эффективным способом для перехвата ошибок проектирования на раннем этапе. В следующей таблице перечислены угроз STRIDE и предоставляет некоторые примере методы устранения рисков, которые используют функции, предоставляемые Azure. Эти способы могут помочь не во всех ситуациях.

| Threat | Свойство безопасности | Устранение потенциальных платформы Azure |
| ---------------------- | --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Спуфинг               | Проверка подлинности        | [Требовать соединения HTTPS](https://docs.microsoft.com/aspnet/core/security/enforcing-ssl?view=aspnetcore-2.1&tabs=visual-studio). |
| Незаконное изменение              | Целостность             | Необходимо Проверьте сертификаты SSL/TLS. Приложения, использующие SSL/TLS, должны тщательно проверять сертификаты X.509 сущностей, к которым они подключены. Использование сертификатов Azure Key Vault для [управлять вашей x509 сертификаты](https://docs.microsoft.com/azure/key-vault/about-keys-secrets-and-certificates#key-vault-certificates). |
| Отказ            | Неподдельность       | Включите [мониторинг и диагностику](https://docs.microsoft.com/azure/architecture/best-practices/monitoring) в Azure.|
| Раскрытие информации | Конфиденциальность       | Шифровать конфиденциальные данные [неактивных](https://docs.microsoft.com/azure/security/azure-security-encryption-atrest) и [во время передачи](https://docs.microsoft.com/azure/security/azure-security-data-encryption-best-practices#protect-data-in-transit). |
| Отказ в обслуживании      | Доступность          | Мониторинг метрик производительности для потенциальных отказ в обслуживании. Примените фильтры подключения. [Защита от атак DDoS Azure](https://docs.microsoft.com/azure/virtual-network/ddos-protection-overview#next-steps), вместе с рекомендациями по для разработки приложений, обеспечивает защиту от атак DDoS.|
| Повышение прав | Authorization         | Использование Azure Active Directory <span class="underline"> </span> [управление привилегированными пользователями](https://docs.microsoft.com/azure/active-directory/privileged-identity-management/pim-configure).|

### <a name="reduce-your-attack-surface"></a>Уменьшить поверхность атаки

Уязвимая зона является итоговой суммы где могут возникнуть потенциальные уязвимости. В этом документе рассматриваются атаки на приложение.
Основное внимание уделяется защите приложения от атак. Чтобы удалить неиспользуемые ресурсы и код из приложения является простой и быстрый способ свести к минимуму поверхность атаки. Наименьшее значение приложения, меньшее атаки. Например удалите:

- Код для функции, которые еще не выпущен еще.
- Вспомогательный код отладки.
- Сетевые интерфейсы и протоколы, не используются, или который стали нерекомендуемыми.
- Виртуальные машины и другие ресурсы, которые вы не используете.

Выполнив регулярную очистку ресурсов и проверку того, удалить неиспользуемый код – отличный способ убедиться, что имеется меньше возможностей для злоумышленников для атак.

Для выполнения анализ зоны уязвимости является более сведения и подробная способ уменьшить поверхность атаки. Анализ зоны уязвимости поможет сопоставить части системы, необходимо просмотреть и проверить наличие уязвимостей безопасности.

Анализ зоны уязвимости предназначена для того, чтобы понять области риска в приложении, поэтому разработчики и специалисты по безопасности известно о какие части приложения открыты для атаки. Затем можно найти способы свести к минимуму эту дорожку потенциальных, изменяет время и способ атаки, а это значит, что с точки зрения риска.

Анализ зоны уязвимости помогает определить следующее.

- Функции и компоненты системы необходимо для проверки и тестирования уязвимости системы безопасности.
- Области повышенного риска кода, требующие защиты defense-in-depth (части системы, который необходимо защитить).
- При alter возможных направлений атак и для этого придется обновить оценку угроз.

Понижая возможности злоумышленников возможных слабых место или уязвимость необходимо тщательно проанализировать атакуемую поверхность приложения. Он также отключения или ограничения доступа к службам системы, применение принципа наименьших прав доступа, и применение многоуровневую защиту, когда это возможно.

Мы обсудим [проводит проверку поверхности атаки](secure-develop.md#conduct-attack-surface-review) во время фазы проверки SDL.

> [!NOTE]
> **Какова разница между моделирование угроз и анализ зоны уязвимости?**
Моделирование угроз — это процесс идентификации потенциальных угроз безопасности в приложение и убедитесь, что соответствующие способы устранения рисков от угроз на месте. Анализ зоны уязвимости определяет области повышенного риска кода, которые открыты для атаки. Он включает в себя поиск способов защиты области повышенного риска приложения и просмотра и тестирования этих областях кода, перед развертыванием приложения.

### <a name="adopt-a-policy-of-identity-as-the-primary-security-perimeter"></a>Применение политики удостоверения в качестве основного периметра безопасности

При разработке облачных приложений, важно разверните фокус безопасности периметра от подхода, ориентированный на сеть для идентификации ориентированный подход. Исторически сложилось так, что периметр безопасности основного локального был корпоративной сети. Большинство систем безопасности в локальной сети служит pivot основу безопасности. Для облачных приложений то удобнее считать удостоверения как основного периметра безопасности.

Что можно сделать для разработки ориентированных на удостоверение подход к разработке веб-приложений:

- Принудительно применять многофакторную идентификацию для пользователей.
- Используйте надежные платформы аутентификации и авторизации.
- Использование принципа наименьших прав доступа.
- Реализация доступа just-in-time.

#### <a name="enforce-multi-factor-authentication-for-users"></a>Принудительно применять многофакторную идентификацию для пользователей

Используйте двухфакторную аутентификацию. Двухфакторная проверка подлинности является текущим стандартом для проверки подлинности и авторизации, так как позволяет избежать уязвимостей системы безопасности, в типы проверки подлинности имя пользователя и пароль. Доступ к интерфейсам управления Azure (Azure portal или удаленный сеанс PowerShell), а также к службам для клиентов следует разработана и настроена для использования [многофакторной идентификации Azure](https://docs.microsoft.com/azure/active-directory/authentication/multi-factor-authentication).

#### <a name="use-strong-authentication-and-authorization-platforms"></a>Используйте строгое платформы аутентификации и авторизации

Используйте предоставляемые платформой механизмы аутентификации и авторизации вместо пользовательского кода. Это обусловлено Разработка пользовательского кода аутентификации могут быть подвержены ошибкам. Коммерческий код (например, от Майкрософт) часто является широко проанализированы на безопасность. [Azure Active Directory (Azure AD)](https://docs.microsoft.com/azure/active-directory/active-directory-whatis) — это решение для идентификации и управления доступом в Azure. Эти средства Azure AD и службы помогут с безопасной разработки:

- [Azure AD платформа удостоверений (Azure AD для разработчиков)](https://docs.microsoft.com/azure/active-directory/develop/about-microsoft-identity-platform) — облачная служба идентификации, который разработчики используют для создания приложений, безопасного входа пользователей. Azure AD помогает разработчикам, которые создают одним клиентом, бизнес-приложений (LOB) и разработчиков, которым нужны для разработки приложений с несколькими клиентами. Помимо основных входа в систему приложения, построенные с помощью Azure AD могут вызывать API-интерфейсов Microsoft и пользовательские API, которые созданы на платформе Azure AD. Платформа удостоверений Azure AD поддерживает стандартные отраслевые протоколы OAuth 2.0 и OpenID Connect.

- [Azure Active Directory B2C (Azure AD B2C)](https://docs.microsoft.com/azure/active-directory-b2c/) — служба управления удостоверениями, которые можно использовать для настройки и управления, как пользователи зарегистрироваться, вход и управлять их профилями при использовании приложения. Сюда входят приложения, разработанные для iOS, Android и .NET, среди прочего. Azure AD B2C разрешает эти действия защите удостоверений клиентов.

#### <a name="apply-the-principle-of-least-privilege"></a>Использование принципа наименьших прав доступа

Концепция [наименьших прав доступа](https://en.wikipedia.org/wiki/Principle_of_least_privilege) означает предоставление пользователям детальный уровень доступа и контроля, необходимым им для выполнения поставленных задач и ничего более.

Будет ли разработчик программного обеспечения требуются права администратора домена? Помощник администратора потребуется доступ к административным контролем на своих персональных компьютерах? Оценка доступ к программному обеспечению ничем не отличается. Если вы используете [управления доступом на основе ролей (RBAC)](https://docs.microsoft.com/azure/role-based-access-control/overview) для предоставления пользователям разными возможностями и полномочия в приложении, не предоставить всем пользователям доступ ко всем. Ограничивая доступ к требования для каждой роли, можно снизить опасность неполадки безопасности.

Убедитесь, что приложение применяет [наименьших прав доступа](https://docs.microsoft.com/windows-server/identity/ad-ds/plan/security-best-practices/implementing-least-privilege-administrative-models#in-applications) на протяжении всего его шаблоны доступа.

> [!NOTE]
>  Правила наименьших прав доступа должны применяются к программному обеспечению, а также к тем, кто создает программное обеспечение. Разработчики программного обеспечения может быть огромный риск ИТ-безопасности, если слишком много доступа. Последствия могут оказаться серьезной, если разработчик злоумышленников или присваивается слишком много доступа. Мы рекомендуем применения правил наименьших прав доступа для разработчиков на протяжении всего жизненного цикла разработки.

#### <a name="implement-just-in-time-access"></a>Реализация доступа just-in-time

Реализуйте *just-in-time* (JIT) доступа к дальнейшей уменьшить время выдержки привилегий. Используйте [Azure AD Privileged Identity Management](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-admin-roles-secure#stage-3-build-visibility-and-take-full-control-of-admin-activity) для:

- Предоставьте пользователям права, необходимые только JIT-компилятора.
- назначать роли на короткий период с автоматическим отзывом привилегий.

### <a name="require-re-authentication-for-important-transactions"></a>Требуется повторная проверка подлинности для важных транзакций

[Подделки межсайтовых запросов](https://docs.microsoft.com/aspnet/core/security/anti-request-forgery?view=aspnetcore-2.1) (также известный как *XSRF* или *CSRF*) — это атака, от приложений веб сервере, в которых вредоносные веб-приложения влияет на взаимодействие между клиентским браузером и веб-узел приложение, которому доверяет этого браузера. Атак с подделкой межсайтовых запросов возможны, так как веб-браузеры отправляют некоторых типов маркеров проверки подлинности автоматически при каждом запросе веб-сайта.
Эта форма использования также называется *атаки одним щелчком* или *«session riding»* так, как атаки использует преимущества пользователь ранее проверку подлинности сеанса.

Для защиты от атак этого типа Рекомендуется попросить пользователя для того, что только пользователь может вставить перед каждой важной транзакции, например Покупка, изменению пароля или деактивации учетной записи. Вы может попросить пользователя ввести пароль повторно, выполните тест captcha, или выдать маркер секрета, который может быть только пользователь. Наиболее распространенным подходом является маркер секрета.

### <a name="use-a-key-management-solution-to-secure-keys-credentials-and-other-secrets"></a>Используйте решения для управления ключами для защиты ключей, учетные данные и другие секретные данные

Потеря ключей и учетных данных является распространенной проблемой. Хуже потери ключей и учетных данных может быть только получение к ним несанкционированного доступа. Злоумышленники могут воспользоваться преимуществами автоматической и ручной методики для поиска ключей и секретов, которые хранятся в репозиториях кода, таких как GitHub. Не помещайте ключи и секреты, в эти репозитории открытого кода или на любом другом сервере.

Всегда поместите ключи, сертификаты, секреты и строки подключения в решении для управления ключами. Можно использовать централизованное решение, в которой ключи и секреты хранятся в аппаратных модулях безопасности (HSM). Azure предоставляет аппаратный модуль безопасности в облаке с [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-whatis).

Key Vault — *хранилище секретов*: он — это централизованное облачная служба для хранения секретных данных приложения. Key Vault защищает ваши конфиденциальные данные, как сохранить секреты приложения в едином центральном расположении и предоставляя безопасный доступ, управления разрешениями и ведения журнала доступа.

Секреты хранятся в отдельных *хранилищ*. Каждое хранилище имеет свои собственные конфигурации и политик безопасности для управления доступом. Вам доступ к данным через REST API или с помощью клиентского пакета SDK, которая доступна в большинстве языков программирования.

> [!IMPORTANT]
> Azure Key Vault позволяет хранить секретные данные конфигурации для серверных приложений. Он не предназначен для хранения данных, принадлежащих пользователям приложения. Это отражено в его характеристики производительности, API и модель затрат.
>
> Данные пользователя должны храниться в другом месте, как и в экземпляре базы данных SQL Azure, имеющей прозрачное шифрование данных (TDE), либо в учетной записи хранения, использующей шифрование службы хранилища Azure. Секреты, которые используются приложением для доступа к этим хранилищам могут храниться в хранилище ключей Azure.

### <a name="protect-sensitive-data"></a>Защита конфиденциальных данных

Защита данных является важной частью стратегии обеспечения безопасности.
Классификация данных и идентификации защиту данных должна помогает разрабатывать приложения с учетом безопасности данных. Классификации (классификация) сохраненные данные по конфиденциальности и влияние на коммерческую деятельность помогает разработчикам определить риски, связанные с данными.

Пометьте все применимые данные как конфиденциальные, при разработке собственных форматах данных. Убедитесь, что приложение рассматривает данные, применимые как конфиденциальные. Эти рекомендации могут помочь вам защитить конфиденциальные данные:

- Используйте шифрование.
- Следует Избегайте жесткого кодирования секретные данные, например ключи и пароли.
- Убедитесь, что элементы управления доступом и аудита в наличии.

#### <a name="use-encryption"></a>Использовать шифрование

Защита данных должен быть важной частью стратегии обеспечения безопасности.
Если данные хранятся в базе данных или перемещается вперед и назад между расположениями, используйте шифрование [неактивных данных](https://docs.microsoft.com/azure/security/azure-security-encryption-atrest) (при работе в базе данных) и шифрование [данных при передаче](https://docs.microsoft.com/azure/security/azure-security-data-encryption-best-practices#protect-data-in-transit) (на пути к пользователю и от базы данных, API или конечной точки службы). Мы рекомендуем всегда использовать протоколы SSL/TLS для обмена данными. Убедитесь, что используется последняя версия TLS для шифрования (в настоящее время это версия 1.2).

#### <a name="avoid-hard-coding"></a>Избегать жесткого кодирования

Некоторые вещи не должно быть жестко в своем программном обеспечении. Примеры — имена узлов или IP адреса, URL-адреса, адреса электронной почты, имена пользователей, пароли, ключи учетной записи хранения и других криптографических ключей. Рассмотрите возможность реализации требований, что может или не может быть жестко задано в коде, включая в разделе комментариев кода.

Комментарии, добавленные в коде, убедитесь, рекомендуется не сохранять никаких конфиденциальных сведений. Это включает адрес электронной почты, пароли, строки подключения, сведения о приложении, которое может быть известен только кем-то в вашей организации и что-нибудь еще, может дать злоумышленнику преимущество атаковать приложения или организации .

По сути предполагается, что все, что в проекте разработки будет широко известно, при его развертывании. Избегайте включения конфиденциальных данных любого типа в проекте.

Ранее, мы рассмотрели [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-whatis). Хранилище ключей можно использовать для хранения секретных данных, например ключи и пароли, не прописывая их. При использовании Key Vault в сочетании с управляемыми удостоверениями для ресурсов Azure, веб-приложения Azure можно обращаться к конфигурации секрета значениям легко и безопасно без сохранения все секреты в системе управления версиями или конфигурации. Дополнительные сведения см. в разделе [управление секретами в приложениях сервера с помощью Azure Key Vault](https://docs.microsoft.com/learn/modules/manage-secrets-with-azure-key-vault/).

### <a name="implement-fail-safe-measures"></a>Реализация резервный мер

Приложения должны иметь возможность обрабатывать [ошибки](https://docs.microsoft.com/dotnet/standard/exceptions/) , происходящих во время выполнения согласованно. Приложения должны перехватывать все ошибки и либо ошибкой, safe или закрытые.

Следует также убедиться, что ошибки записываются достаточный контекст пользователя для определения подозрительных или вредоносных действий. Журналы должны храниться достаточно времени разрешить отложенные криминалистического анализа. Журналы должны быть в формате, который можно было легко с помощью решения для управления журнала. Убедитесь, что для ошибок, связанных с безопасностью оповещений. Недостаточно ведение журналов и мониторинг позволяет злоумышленникам дальнейшей атаковать системы и поддержания сохраняемости.

### <a name="take-advantage-of-error-and-exception-handling"></a>Воспользоваться преимуществами обработки ошибок и исключений

Реализация исправьте ошибки и [обработки исключений](https://docs.microsoft.com/dotnet/standard/exceptions/best-practices-for-exceptions) является важной частью защитного кодирования. Обработки ошибок и исключений критически важны для надежный и защищенный доступ к системе. Ошибки в обработке ошибок может привести к различные виды уязвимости системы безопасности, такие как утечка информации для злоумышленников и помочь злоумышленникам понять больше о платформе и разработки.

Убедитесь в следующем:

- Обработка исключений в централизованном режиме, чтобы избежать дублирования [блоки try/catch](https://docs.microsoft.com/dotnet/standard/exceptions/how-to-use-the-try-catch-block-to-catch-exceptions) в коде.

- Все непредсказуемого поведения обрабатываются внутри приложения.

- Сообщения, которые отображаются для пользователей не происходит ли утечка критически важных данных, но обеспечивают достаточно информации, чтобы объяснить проблему.

- Исключения заносятся, и они предоставляют достаточно информации для экспертизы или инцидентом групп ответа для расследования.

[Служба Azure Logic Apps](https://docs.microsoft.com/azure/logic-apps/logic-apps-overview) предоставляет эффективные возможности для [обработка ошибок и исключений](https://docs.microsoft.com/azure/logic-apps/logic-apps-exception-handling) , вызванных зависимыми системами. Logic Apps можно использовать для создания рабочих процессов для автоматизации задач и процессов, которые интегрируют приложения, данные, систем и служб по предприятиям и организациям.

### <a name="use-logging-and-alerting"></a>Использование ведения журналов и оповещений

[Журнал](https://docs.microsoft.com/aspnet/core/fundamentals/logging/?view=aspnetcore-2.1) безопасности выдает для расследований и активации оповещений о проблемах, чтобы убедиться, что пользователям узнать о проблеме своевременно. Включите аудит и ведение журнала во всех компонентах. Журналы аудита должны записывать контекст пользователя и определите все важные события.

Убедитесь, что вы не заносить в журнал конфиденциальные данные, которые пользователь отправляет на сайт. К конфиденциальным данным относятся:

- Учетные данные пользователя
- Номера социального страхования и другие идентификационные сведения
- номера кредитных карт и другие финансовые сведения;
- сведения о работоспособности;
- Закрытые ключи или других данных, который может использоваться для расшифровки зашифрованных данных
- сведения о системе или приложении, которые можно использовать для более эффективных атак на приложение.

Убедитесь, что приложение отслеживает следующие события управления пользователями: успешные и неудачные учетных данных для входа, сброса пароля, изменения пароля, блокировка учетной записи и регистрации пользователей. Ведение журнала для этих событий помогает обнаруживать и реагировать на них потенциально опасное поведение. Он также позволяет собирать данные об операции, как и кто доступ к приложению.

## <a name="next-steps"></a>Следующие шаги
В следующих статьях мы рекомендуем использовать средства управления безопасностью и действий, которые помогут Вам разрабатывать и развертывать безопасные приложения.

- [Разработка безопасных приложений](secure-develop.md)
- [Развертывание безопасных приложений](secure-deploy.md)
