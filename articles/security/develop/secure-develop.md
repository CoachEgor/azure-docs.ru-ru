---
title: Разработка безопасных приложений на Microsoft Azure
description: В этой статье обсуждаются рекомендации по этапам реализации и проверки проекта веб-приложения.
author: TerryLanfear
manager: barbkess
ms.author: terrylan
ms.date: 06/12/2019
ms.topic: article
ms.service: security
ms.subservice: security-develop
services: azure
ms.assetid: 521180dc-2cc9-43f1-ae87-2701de7ca6b8
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.openlocfilehash: c1c7dd0bd017852144139a841ff609dabf0f1a27
ms.sourcegitcommit: 13a289ba57cfae728831e6d38b7f82dae165e59d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/09/2019
ms.locfileid: "68928069"
---
# <a name="develop-secure-applications-on-azure"></a>Разработка защищенных приложений в Azure
В этой статье представлены действия по обеспечению безопасности и элементы управления, которые следует учитывать при разработке приложений для облака. Рассматриваются контрольные вопросы и основные понятия, которые следует учитывать на этапах реализации и проверки [жизненного цикла разработки безопасности Microsoft (SDL)](https://msdn.microsoft.com/library/windows/desktop/84aed186-1d75-4366-8e61-8d258746bopq.aspx) . Цель — помочь вам определить действия и службы Azure, которые можно использовать для разработки более безопасного приложения.

В этой статье рассматриваются следующие этапы SDL:

- Реализация
- Проверка

## <a name="implementation"></a>Реализация
Основное внимание на этапе реализации состоит в том, чтобы создать рекомендации по ранней предотвращению и обнаружить и устранить проблемы безопасности из кода.
Предположим, что ваше приложение будет использоваться так, как вы не планировали его использовать. Это помогает защититься от случайного или намеренного неправильного использования приложения.

### <a name="perform-code-reviews"></a>Выполнение проверок кода

Перед возвратом кода следует провести проверку [кода](https://docs.microsoft.com/azure/devops/learn/devops-at-microsoft/code-reviews-not-primarily-finding-bugs) , чтобы увеличить общее качество кода и снизить риск создания ошибок. Для управления процессом проверки кода можно использовать [Visual Studio](https://docs.microsoft.com/azure/devops/repos/tfvc/get-code-reviewed-vs?view=vsts) .

### <a name="perform-static-code-analysis"></a>Выполнение статического анализа кода

[Статический анализ кода](https://www.owasp.org/index.php/Static_Code_Analysis) (также известен как *анализ исходного кода*) обычно выполняется как часть проверки кода. Статический анализ кода обычно относится к запуску средств статического анализа кода для поиска потенциальных уязвимостей в невыполняющемся коде с помощью таких методов, как [Проверка таинт](https://en.wikipedia.org/wiki/Taint_checking) и [Анализ потока данных](https://en.wikipedia.org/wiki/Data-flow_analysis).

Azure Marketplace предлагает [средства разработчика](https://azuremarketplace.microsoft.com/marketplace/apps/category/developer-tools?page=1&search=code%20review) , которые выполняют статический анализ кода и помогают с проверкой кода.

### <a name="validate-and-sanitize-every-input-for-your-application"></a>Проверка и очистка всех входных данных для приложения

Рассматривайте все входные данные как ненадежные, чтобы защитить приложение от наиболее распространенных уязвимостей веб-приложений. Ненадежные данные — это автомобиль для атак путем внедрения. Входные данные для приложения включают в себя параметры в URL-адресе, ввод пользователя, данные из базы данных или из API, а также все, что передается, что может управляться пользователем. Приложение должно [проверять](https://www.owasp.org/index.php/OWASP_Proactive_Controls_2016#4:_Validate_All_Inputs) синтаксические и семантические действия данных до того, как приложение будет использовать эти данные каким-либо способом (включая вывод их обратно пользователю).

Выполните проверку входных данных на раннем этапе потока данных, чтобы убедиться, что только правильно сформированные данные попадают в рабочий процесс. Неправильное сохранение данных в базе данных или активация неправильного компонента в нисходящем компоненте не требуется.

Поочередность и список разрешений — это два общих подхода к проверке синтаксиса входных данных:

  - Пов черный список пытается проверить, что введенные пользователем данные не содержат «известное вредоносное» содержимое.

  - Список разрешений пытается проверить, соответствует ли введенные пользователем данные набору "известных хороших" входных данных. Символьная список разрешений — это форма список разрешений, где приложение проверяет, содержит ли введенные пользователем данные только «известные хорошие» символы или что входные данные соответствуют известному формату.
    Например, это может включать проверку того, что имя пользователя содержит только буквенно-цифровые символы или содержит ровно два числа.

Список разрешений является предпочтительным подходом для создания безопасного программного обеспечения.
Неограниченный вывод может привести к ошибке, поскольку невозможно представить полный список потенциально недопустимых входных данных.

Выполните эту работу на сервере, а не на стороне клиента (или на сервере и на стороне клиента).

### <a name="verify-your-applications-outputs"></a>Проверка выходных данных приложения

Любые выходные данные, представленные визуально или в документе, всегда должны быть закодированы и экранированы. [Экранирование](https://www.owasp.org/index.php/Injection_Theory#Escaping_.28aka_Output_Encoding.29)(также называемое *кодировкой вывода*) используется для гарантии того, что ненадежные данные не являются транспортом для атаки путем внедрения. Экранирование в сочетании с проверкой данных обеспечивает многоуровневую защиту для повышения безопасности системы в целом.

Экранирование гарантирует, что все отображается в качестве *выходных данных.* Экранирование также позволяет интерпретатору знать, что данные не предназначены для выполнения, и это предотвращает работу атак. Это еще один распространенный способ атаки , называемый межузловыми сценариями (XSS).

Если вы используете веб-платформу стороннего производителя, вы можете проверить параметры кодировки выходных данных на веб-сайтах с помощью [OWASP XSS предотвращение Памятка по](https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md).

### <a name="use-parameterized-queries-when-you-contact-the-database"></a>Использование параметризованных запросов при обращении к базе данных

Никогда не создавайте запрос встроенной базы данных "на лету" в коде и отправляйте его непосредственно в базу данных. Вредоносный код, вставленный в приложение, может привести к краже, стертию или изменению базы данных. Приложение также может использоваться для запуска вредоносных команд операционной системы в операционной системе, в которой размещена ваша база данных.

Вместо этого используйте параметризованные запросы или хранимые процедуры. При использовании параметризованных запросов можно безопасно вызывать процедуру из кода и передавать ей строку, не беспокоясь о том, что она будет рассматриваться как часть инструкции запроса.

### <a name="remove-standard-server-headers"></a>Удалить стандартные заголовки сервера

В таких заголовках, как Server, X-with и X-AspNet-Version, отображаются сведения о сервере и базовых технологиях. Рекомендуется подавлять эти заголовки, чтобы избежать отпечатка пальца приложения.
См. статью [Удаление стандартных заголовков серверов на веб-сайтах Azure](https://azure.microsoft.com/blog/removing-standard-server-headers-on-windows-azure-web-sites/).

### <a name="segregate-your-production-data"></a>Разделение рабочих данных

Рабочие данные или «реальные» данные не должны использоваться для разработки, тестирования и других целей, чем предполагалось для бизнеса. Для всех работ по разработке и тестированию следует использовать маскированный ([анонимный](https://en.wikipedia.org/wiki/Data_anonymization)) набор данных.

Это означает, что у меньшего количества людей есть доступ к реальным данным, что сокращает область атаки. Это также означает, что меньше сотрудников видят персональные данные, что устраняет потенциальную брешь в конфиденциальности.

### <a name="implement-a-strong-password-policy"></a>Реализация политики надежных паролей

Чтобы защититься от подбора с использованием подбора и выбора словаря, необходимо реализовать политику надежных паролей, чтобы гарантировать, что пользователи создают сложный пароль (например, в 12 символов минимальная длина и требуется использовать буквенно-цифровые и специальные символы).

Для создания и применения политик паролей можно использовать платформу удостоверений. Azure AD B2C помогает управлять паролями за счет предоставления [встроенных политик](../../active-directory-b2c/tutorial-create-user-flows.md#create-a-password-reset-user-flow), [самостоятельного сброса пароля](../../active-directory-b2c/active-directory-b2c-reference-sspr.md)и т. д.

Чтобы защититься от атак на учетные записи по умолчанию, убедитесь, что все ключи и пароли являются заменяемыми и создаются или заменяются после установки ресурсов.

Если приложение должно автоматически создавать пароли, убедитесь, что созданные пароли являются случайными и имеют высокую энтропию.

### <a name="validate-file-uploads"></a>Проверка отправки файлов

Если приложение позволяет [отправлять файлы](https://www.owasp.org/index.php/Unrestricted_File_Upload), учитывайте меры предосторожности, которые можно предпринять для этого опасного действия. Первый шаг во многих атаках заключается в получении вредоносного кода в системе, которая подвергается атаке. Использование отправки файлов помогает злоумышленнику выполнить эту задачу. OWASP предлагает решения для проверки файла, чтобы гарантировать, что загружаемый файл является надежным.

Защита от вредоносных программ помогает обнаруживать и удалять вирусы, шпионские и другие вредоносные программы. Можно установить [антивредоносное ПО Майкрософт](../fundamentals/antimalware.md) или решение для защиты конечных точек от партнеров Майкрософт ([Trend Micro](https://www.trendmicro.com/azure/), [Symantec](https://www.symantec.com/products), [McAfee](https://www.mcafee.com/us/products.aspx), [Защитник Windows](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-antivirus/windows-defender-antivirus-in-windows-10) и [System Center Endpoint Protection](https://docs.microsoft.com/sccm/protect/deploy-use/endpoint-protection)).

[Антивредоносная программа Майкрософт](../fundamentals/antimalware.md) включает такие функции, как защита в реальном времени, сканирование по расписанию, исправление вредоносных программ, обновления сигнатур, обновления модулей, отчеты о примерах и сбор событий исключения. Для упрощения развертывания и использования встроенных обнаружений (оповещений и инцидентов) антивредоносное ПО Майкрософт и партнерские решения можно интегрировать с [центром безопасности Azure](../../security-center/security-center-partner-integration.md).

### <a name="dont-cache-sensitive-content"></a>Не кэшировать конфиденциальное содержимое

Не кэшировать конфиденциальное содержимое в браузере. Браузеры могут хранить сведения о кэшировании и журнале. Кэшированные файлы хранятся в папке, например в папке Temporary Internet Files, в случае Internet Explorer. Когда эти страницы снова упоминаются, браузер отображает страницы из своего кэша. Если пользователю отображается конфиденциальная информация (адрес, сведения о кредитной карте, номер социального страхования, имя пользователя), информация может храниться в кэше браузера и извлекаться путем проверки кэша браузера или путем простого нажатия клавишиКнопка "назад".

## <a name="verification"></a>Проверка
Этап проверки включает в себя исчерпывающие усилия по обеспечению соответствия кода принципам безопасности и конфиденциальности, которые были установлены на предыдущих этапах.

### <a name="find-and-fix-vulnerabilities-in-your-application-dependencies"></a>Поиск и устранение уязвимостей в зависимостях приложения

Вы сканируете приложение и его зависимые библиотеки для обнаружения известных уязвимых компонентов. Продукты, доступные для выполнения этой проверки: [OWASP зависимостей Check](https://www.owasp.org/index.php/OWASP_Dependency_Check),[СНИК](https://snyk.io/)и [Black утка](https://www.blackducksoftware.com/).

Проверка уязвимостей, реализованная в [tinfoil Security Security](https://www.tinfoilsecurity.com/) , доступна для веб-приложений службы приложений Azure. [Tinfoil Security сканирование безопасности через службу приложений](https://azure.microsoft.com/blog/web-vulnerability-scanning-for-azure-app-service-powered-by-tinfoil-security/) предоставляет разработчикам и администраторам быстрые, интегрированные и экономичные средства обнаружения и устранения уязвимостей до того, как вредоносный субъект сможет их использовать.

> [!NOTE]
> Вы также можете [интегрировать tinfoil Security Security с Azure AD](../../active-directory/saas-apps/tinfoil-security-tutorial.md). Интеграция Azure AD с tinfoil Security Security обеспечивает следующие преимущества:
>  - В Azure AD вы можете контролировать, кто имеет доступ к tinfoil Security безопасности.
>  - Пользователи могут автоматически войти в tinfoil Security Security (единый вход) с помощью учетной записи Azure AD.
>  - Вы можете управлять учетными записями в одном централизованном расположении, портал Azure.

### <a name="test-your-application-in-an-operating-state"></a>Тестирование приложения в рабочем состоянии

Динамическое тестирование безопасности приложений (ДАСТ) — это процесс тестирования приложения в операционном состоянии для поиска уязвимостей системы безопасности. Средства ДАСТ анализируют программы во время их выполнения для поиска уязвимостей системы безопасности, таких как повреждение памяти, незащищенная Конфигурация сервера, межсайтовые сценарии, проблемы с привилегиями пользователей, внедрение кода SQL и другие критические проблемы безопасности.

ДАСТ отличается от статического тестирования безопасности приложений (ЮЖНОАФРИКАНСКОМУ стандартному). Средства ЮЖНОАФРИКАНСКОМУ стандартному анализируют исходный код или скомпилированные версии кода, если код не выполняется для поиска изъянов безопасности.

Выполните ДАСТ, желательно с помощью специалиста по безопасности ( [Тестер](../fundamentals/pen-testing.md) или средство оценки уязвимостей). Если специалист по безопасности недоступен, вы можете самостоятельно выполнять ДАСТ с помощью сканера веб-прокси и некоторых учебных курсов. Присоедините сканер ДАСТ на ранних этапах, чтобы не дожимать очевидных проблем безопасности в коде. Список сканеров уязвимостей веб-приложений см. на сайте [OWASP](https://www.owasp.org/index.php/Category:Vulnerability_Scanning_Tools) .

### <a name="perform-fuzz-testing"></a>Выполнение тестирования методом Монте

При [тестировании методом монтеd Test](https://cloudblogs.microsoft.com/microsoftsecure/2007/09/20/fuzz-testing-at-microsoft-and-the-triage-process/)вы вызываете сбой программы, намеренно представляя приложению неправильно сформированные или случайные данные. Принудительное завершение программы позволяет выявить потенциальные проблемы безопасности до выпуска приложения.

[Обнаружение угроз безопасности](https://docs.microsoft.com/security-risk-detection/) — это уникальная служба тестирования нечетких тестов Майкрософт для поиска критических в системе безопасности ошибок в программном обеспечении.

### <a name="conduct-attack-surface-review"></a>Проведение проверки уязвимой зоны

Проверка уязвимой зоны после завершения кода гарантирует, что все изменения в архитектуре или реализации будут рассматриваться в приложении или системе. Это гарантирует, что все новые векторы атак, созданные в результате изменений, включая модели угроз, были просмотрены и устранены.

Вы можете создать изображение уязвимой зоны, проверяя приложение. Корпорация Майкрософт предлагает средство анализа уязвимой зоны, именуемое [анализатором уязвимой зоны](https://www.microsoft.com/download/details.aspx?id=24487). Вы можете выбрать один из многих коммерческих средств динамического тестирования и проверки уязвимостей, включая [проект OWASP Кализованное-прокси](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project), [арачни](http://arachni-scanner.com/), [скипфиш](https://code.google.com/p/skipfish/)и [w3af](http://w3af.sourceforge.net/). Эти средства проверки проводят обход приложения и сопоставляют части приложения, доступные через Интернет. Вы также можете искать аналогичные [средства разработки](https://azuremarketplace.microsoft.com/marketplace/apps/category/developer-tools?page=1)в Azure Marketplace.

### <a name="perform-security-penetration-testing"></a>Проведение тестирования уязвимости системы безопасности

Обеспечение безопасности приложения так же важно, как и тестирование любых других функциональных возможностей. Сделайте [тестирование на проникновение](../fundamentals/pen-testing.md) стандартной частью процесса сборки и развертывания. Запланируйте регулярные тесты безопасности и проверку уязвимостей в развернутых приложениях и следите за открытыми портами, конечными точками и атаками.

### <a name="run-security-verification-tests"></a>Выполнение тестов проверки безопасности

[Безопасный комплект DevOps для Azure](https://azsk.azurewebsites.net/index.html) (Азск) содержит СВТС для нескольких служб платформы Azure. Эти СВТС периодически запускаются, чтобы гарантировать, что подписка Azure и другие ресурсы, составляющие приложение, находятся в безопасном состоянии. Эти тесты также можно автоматизировать с помощью расширений непрерывной интеграции и непрерывного развертывания (CI/CD) Азск, что делает СВТС доступным в качестве расширения Visual Studio.

## <a name="next-steps"></a>Следующие шаги
В следующих статьях мы рекомендуем управлять безопасностью и действиями, которые могут помочь при проектировании и развертывании безопасных приложений.

- [Разработка безопасных приложений](secure-design.md)
- [Развертывание безопасных приложений](secure-deploy.md)
