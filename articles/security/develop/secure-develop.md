---
title: Разработка безопасных приложений в Microsoft Azure
description: В этой статье обсуждаются рекомендации, которые следует учитывать на этапах реализации и проверки проекта веб-приложения.
author: TerryLanfear
manager: barbkess
ms.author: terrylan
ms.date: 06/12/2019
ms.topic: article
ms.service: security
services: azure
ms.assetid: 521180dc-2cc9-43f1-ae87-2701de7ca6b8
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.openlocfilehash: f4add4bf07178aa616e86f8a64b313630466824f
ms.sourcegitcommit: cf438e4b4e351b64fd0320bf17cc02489e61406a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/08/2019
ms.locfileid: "67653264"
---
# <a name="develop-secure-applications-on-azure"></a>Разработка защищенных приложений в Azure
В этой статье рассматриваются действия безопасности и элементы управления, которые следует учитывать при разработке приложений для облака. Вопросы безопасности и основные понятия, которые следует учитывать на этапах реализации и проверку подлинности Microsoft [Security Development Lifecycle (SDL)](https://msdn.microsoft.com/library/windows/desktop/84aed186-1d75-4366-8e61-8d258746bopq.aspx) рассматриваются. Призван помочь вам определить действия и служб Azure, которые можно использовать для разработки более безопасных приложений.

В этой статье рассматриваются следующие этапы SDL:

- Реализация
- Проверка

## <a name="implementation"></a>Реализация
Цель этапа реализации — для установления советы и рекомендации для предотвращения раннего обнаружения и удаления уязвимостей в коде.
Предположим, что приложение будет использоваться способами, что вы не планировали использовать его. Это помогает защититься от случайного или преднамеренного неправильного использования приложения.

### <a name="perform-code-reviews"></a>Выполнение проверки кода

Перед возвратом кода, проведения [проверки кода](https://docs.microsoft.com/azure/devops/learn/devops-at-microsoft/code-reviews-not-primarily-finding-bugs) повысить общее качество кода и снизить риск возникновения ошибок. Можно использовать [Visual Studio](https://docs.microsoft.com/azure/devops/repos/tfvc/get-code-reviewed-vs?view=vsts) для управления процессом проверки кода.

### <a name="perform-static-code-analysis"></a>Выполнение статического анализа кода

[Статический анализ кода](https://www.owasp.org/index.php/Static_Code_Analysis) (также известный как *источника анализа кода*) обычно выполняется как часть проверки кода. Статический анализ кода обычно обозначает выполнение анализа средства для выявления потенциальных уязвимостей в коде не выполняющиеся с помощью методов, таких как статического кода [нарушить проверку проверка](https://en.wikipedia.org/wiki/Taint_checking) и [анализ потока данных](https://en.wikipedia.org/wiki/Data-flow_analysis).

Предложения Azure Marketplace [средств разработчика](https://azuremarketplace.microsoft.com/marketplace/apps/category/developer-tools?page=1&search=code%20review) , выполнение статического анализа кода и упрощения проверки кода.

### <a name="validate-and-sanitize-every-input-for-your-application"></a>Проверка и очистка каждые входные данные для приложения

Считайте все входные данные без доверия, чтобы защитить ваши приложения от распространенных сетевых уязвимостей приложения. Непроверенных данных — это средство для атак путем внедрения кода. Входные данные для приложения включает в себя параметры в URL-адрес, введенные пользователем данные, данные из базы данных или из интерфейса API, и все, что передается тем, что пользователь потенциально может управлять. Приложения должны [проверки](https://www.owasp.org/index.php/OWASP_Proactive_Controls_2016#4:_Validate_All_Inputs) допустимость данных синтаксически и семантически прежде чем приложение использует данные любым образом (включая его отображения для пользователя).

Проверки входных данных рано в потоке данных, чтобы убедиться, что только должным образом сформированного данных вводит рабочего процесса. Вы не хотите неправильно сформированных данных, сохранение в базе данных или запуском неисправности в нисходящего компонента.

Blacklisting и список разрешенных являются два принципиальных подхода к проверке ввода синтаксис:

  - Добавление в список блокировок пытается проверить, что заданного пользователя не содержит данных «известным вредоносным».

  - Список разрешенных пытается проверить, заданного пользователем соответствует набор входных данных «известному работающему». Символьно ориентированную утвержденный список — это форма, в список разрешений, где приложение проверяет, что входные данные пользователя содержит только «известными и надежными» символы или соответствие известный формат входных данных.
    Например это может вызвать проверку, что имя пользователя содержит только буквы, цифры или что он содержит ровно две цифры.

Список разрешенных подход является предпочтительным для создания безопасного программного обеспечения.
Добавление в список блокировок могут быть ошибки, так как вы не сможете представить полный перечень потенциально плохого ввода.

Сделать эту работу на сервере, не на стороне клиента (или на сервере и на стороне клиента).

### <a name="verify-your-applications-outputs"></a>Проверьте выходные данные приложения

Любые выходные данные, представить визуально или в документе следует всегда кодировать и escape-последовательность. [Экранирование](https://www.owasp.org/index.php/Injection_Theory#Escaping_.28aka_Output_Encoding.29), также известных как *кодирование вывода*, позволяет гарантировать, что ненадежные данные не автомобиля, атака путем внедрения кода. Escape-преобразование, в сочетании с проверки данных, обеспечивает многоуровневую защиту, чтобы повысить безопасность системы в целом.

Экранирование убедиться что все события отображаются в виде *выходных данных.* Экранирование дает интерпретатор знать, что данные не должны выполняться это препятствует работе атак. Это другой распространенный метод атак называется *межузловых сценариев* (XSS).

Если вы используете веб-платформу другого разработчика, можно проверить параметры для кодирования вывода на веб-сайтов с помощью [Памятка по защиты от OWASP XSS](https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md).

### <a name="use-parameterized-queries-when-you-contact-the-database"></a>Использовать параметризованные запросы при обращении в службу базы данных

Никогда не создаст запрос встроенной базы данных «на лету» в коде и отправит его напрямую в базе данных. Вредоносный код, вставленный в приложении может привести к краже, очистки или изменения базы данных. Приложение может также использоваться для выполнения команд вредоносных операционной системы в операционной системе с базой данных.

Вместо этого используйте параметризованные запросы или хранимые процедуры. При использовании параметризованных запросов, можно безопасно вызвать процедуру из кода и передать ему строку, не беспокоясь, что он будет рассматриваться как часть инструкции запроса.

### <a name="remove-standard-server-headers"></a>Удалите стандартные заголовки сервера

Заголовки, такие как Server, X-Powered-By, и X-AspNet-Version раскрывают информацию о сервере и базовых технологиях. Мы рекомендуем, что вы подавлять эти заголовки, чтобы предотвратить использование отпечатка в приложении.
См. в разделе [удалении стандартных заголовков сервера на веб-сайты Azure](https://azure.microsoft.com/blog/removing-standard-server-headers-on-windows-azure-web-sites/).

### <a name="segregate-your-production-data"></a>Разделить рабочими данными

Рабочие данные, или «настоящих» данных не следует для разработки, тестирования или любых других целей бизнеса предназначен. Скрытый ([анонимен](https://en.wikipedia.org/wiki/Data_anonymization)) набор данных должен быть использоваться для всех разработки и тестирования.

Это означает, что меньше есть доступ к вашей реальные данные, что уменьшает поверхность атаки. Это также означает, что личные данные, что исключает потенциальных уязвимостях в конфиденциальности см. в разделе меньшее количество сотрудников.

### <a name="implement-a-strong-password-policy"></a>Реализовать политику надежных паролей

Для защиты от подбор методом грубой силы и на основе словаря, необходимо реализовать политику надежных паролей, чтобы убедиться, что пользователи создавали сложные пароли, (например, минимальная длина 12 символов и требование буквы, цифры и специальные символы).

Инфраструктуру идентификации можно использовать для создания и принудительного применения политики паролей. Azure AD B2C облегчает с компонентами управления паролями, предоставляя [встроенные политики](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-create-user-flows#create-a-password-reset-user-flow), [самостоятельного сброса пароля](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-reference-sspr)и многое другое.

Для защиты от атак на учетные записи по умолчанию, убедитесь, можно заменить все ключи и пароли, и что они создан, или заменить после установки ресурсов.

Если приложение должно автоматически создает пароли, убедитесь, что созданные пароли носят случайный характер, и что они имеют высокий уровень энтропии.

### <a name="validate-file-uploads"></a>Проверка отправки файлов

Если приложение позволяет [передача файлов](https://www.owasp.org/index.php/Unrestricted_File_Upload), рассмотрите возможность меры предосторожности, которые можно предпринять для это опасное действие. Первый этап множества атак — это получить некоторые вредоносного кода в систему, которая находится под атакой. Отправьте файл помогает злоумышленник выполнения этой задачи. OWASP предлагает решения для проверки файла, чтобы убедиться, что файл, который вы отправляете безопасен.

Защиты от вредоносных программ помогает обнаруживать и устранять вирусы, программы-шпионы и другие вредоносные программы. Можно установить [антивредоносное ПО Майкрософт](https://docs.microsoft.com/azure/security/azure-security-antimalware) или решение для защиты конечных точек от партнеров Майкрософт ([Trend Micro](https://www.trendmicro.com/azure/), [Symantec](https://www.symantec.com/products), [McAfee](https://www.mcafee.com/us/products.aspx), [Защитник Windows](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-antivirus/windows-defender-antivirus-in-windows-10) и [System Center Endpoint Protection](https://docs.microsoft.com/sccm/protect/deploy-use/endpoint-protection)).

[Антивредоносное по Майкрософт](https://docs.microsoft.com/azure/security/azure-security-antimalware) включает в себя функции, такие как защиты в реальном времени, Плановое сканирование, исправления вредоносных программ, обновлений сигнатур, обновления модуля, отправка образцов и сбор событий исключения. Для упрощения развертывания и использования встроенных обнаружений (оповещений и инцидентов) антивредоносное ПО Майкрософт и партнерские решения можно интегрировать с [центром безопасности Azure](https://docs.microsoft.com/azure/security-center/security-center-partner-integration).

### <a name="dont-cache-sensitive-content"></a>Не кэшировать конфиденциального содержимого

Не кэшировать конфиденциальное содержимое в браузере. Браузеры могут сохранять информацию для кэширования и журнал. Кэшированные файлы хранятся в папке как папка временных файлов Интернета, в случае Internet Explorer. Когда эти страницы называются опять же, в браузер отображает страницы из кэша. Если конфиденциальные сведения (адрес, сведения о кредитной карте, номер социального страхования, имя пользователя) отображается для пользователя, данные могут храниться в кэше обозревателя а без них с помощью проверки кэша браузера или просто нажатием обозревателя  **Обратно** кнопки.

## <a name="verification"></a>Проверка
На этапе проверки включает в себя комплексное усилия, чтобы убедиться, что код соответствует принципов безопасности и конфиденциальности, установленные в предыдущих этапов.

### <a name="find-and-fix-vulnerabilities-in-your-application-dependencies"></a>Поиск и устранение уязвимостей в зависимостей приложения

Проверке приложения и его зависимых библиотек для идентификации компонентов системы известные уязвимости. Продукты, доступные для выполнения проверки включают [OWASP Dependency Check](https://www.owasp.org/index.php/OWASP_Dependency_Check),[Snyk](https://snyk.io/), и [Black Duck](https://www.blackducksoftware.com/).

Сканирование уязвимостей на платформе [Tinfoil Security](https://www.tinfoilsecurity.com/) доступен для веб-приложениях службы приложений Azure. [Tinfoil Security scanning через службу приложений](https://azure.microsoft.com/blog/web-vulnerability-scanning-for-azure-app-service-powered-by-tinfoil-security/) предоставляет разработчикам и администраторам быстрое, интегрированное и экономичные средства обнаружения и адресации уязвимости, прежде чем вредоносного субъекта можно воспользоваться ими.

> [!NOTE]
> Вы также можете [интегрировать Tinfoil Security с Azure AD](https://docs.microsoft.com/azure/active-directory/saas-apps/tinfoil-security-tutorial). Интеграция Tinfoil Security с Azure AD обеспечивает следующие преимущества:
>  - В Azure AD вы можете контролировать доступ к Tinfoil Security.
>  - Пользователи могут автоматически входить Tinfoil Security (единый вход) с помощью учетной записи Azure AD.
>  - Вы можете управлять учетными записями в одного центрального расположения, портала Azure.

### <a name="test-your-application-in-an-operating-state"></a>Протестируйте приложение в рабочее состояние

Тестирование безопасности динамическое приложение (DAST) — это процесс тестирования приложений в рабочее состояние для поиска уязвимостей безопасности. Средства DAST анализировать программы, пока они выполняются для поиска уязвимостей системы безопасности, таких как повреждение памяти, незащищенный сервер конфигурации, межузловых сценариев, проблемах прав пользователя, путем внедрения кода SQL и другие критические проблемы.

DAST отличается от безопасности приложения тестирования (по южноафриканскому стандартному времени). По южноафриканскому стандартному времени средства анализа исходного кода или скомпилированные версии кода, когда код не выполняется, чтобы найти ошибки в системе безопасности.

Предпочтительно выполнять DAST, с помощью специалист по безопасности ( [на проникновение](https://docs.microsoft.com/azure/security/azure-security-pen-testing) или уязвимость оценщик). Если специалист в области безопасности, можно выполнить DAST самостоятельно с помощью сканера web прокси-сервера и определенными познаниями. Подключите сканер DAST на раннем этапе, чтобы убедиться, что не вызвать проблемы очевидным безопасности в коде. См. в разделе [OWASP](https://www.owasp.org/index.php/Category:Vulnerability_Scanning_Tools) сайта перечень сканеров уязвимости веб-приложения.

### <a name="perform-fuzz-testing"></a>Выполните тестирование методом Монте-Карло

В [метода Монте-Карло](https://cloudblogs.microsoft.com/microsoftsecure/2007/09/20/fuzz-testing-at-microsoft-and-the-triage-process/), вызвать сбой программы с намеренно введение неправильный формат или случайных данных в приложение. Инициирует сбой программы помогает выявить потенциальные проблемы безопасности перед выпуском приложения.

[Обнаружение рисков безопасности](https://docs.microsoft.com/security-risk-detection/) является Microsoft уникальный тестирования методом Монте-службы для поиска ошибок с точки зрения безопасности в программном обеспечении.

### <a name="conduct-attack-surface-review"></a>Проведение анализа поверхности атаки

Просмотр возможных направлений атак, после завершения кода помогает убедиться, что любой проектирования или реализации изменения в приложения или системы рассматривалась. Он гарантирует, что проверен, устранить все новые направления атаки, которые были созданы в результате этих изменений, в том числе моделей угроз.

Вы можете создавать картину возможных направлений атак путем сканирования приложения. Корпорация Майкрософт предлагает средство взлома анализ зоны называется [Attack Surface Analyzer](https://www.microsoft.com/download/details.aspx?id=24487). Вы можете на многих коммерческих динамическое тестирование и просканировать средств или служб, включая [проекта прокси атаки Кализованное OWASP](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project), [Arachni](http://arachni-scanner.com/), [Skipfish](https://code.google.com/p/skipfish/), и [w3af](http://w3af.sourceforge.net/). Эти средства сканирования сканирования приложения и сопоставить части приложения, которые доступны в Интернете. Также можно выполнять поиск в Azure Marketplace для подобных [средств разработчика](https://azuremarketplace.microsoft.com/marketplace/apps/category/developer-tools?page=1).

### <a name="perform-security-penetration-testing"></a>Выполните тестирование уязвимости безопасности

Обеспечение того, что приложение остается защищенным столь важным, как тестирование любых других функций. Сделать [проникновение](https://docs.microsoft.com/azure/security/azure-security-pen-testing) стандартной частью процесса построения и развертывания. Планируйте регулярные тесты и сканирование уязвимостей в развернутых приложений и отслеживать состояние открытых портов, конечных точек и атак.

### <a name="run-security-verification-tests"></a>Выполнение тестов проверки безопасности

[Secure DevOps Kit для Azure](https://azsk.azurewebsites.net/index.html) (AzSK) содержит SVTs для нескольких служб платформы Azure. Вы выполните эти SVTs периодически, чтобы гарантировать, что вашу подписку Azure и различные ресурсы, которые составляют приложение, находятся в безопасном состоянии. Кроме того, эти тесты можно автоматизировать с помощью непрерывной интеграции и развертывания (CI/CD) расширения функцию AzSK, что делает SVTs доступна в качестве расширения Visual Studio.

## <a name="next-steps"></a>Следующие шаги
В следующих статьях мы рекомендуем использовать средства управления безопасностью и действий, которые помогут Вам разрабатывать и развертывать безопасные приложения.

- [Проектирование безопасных приложений](secure-design.md)
- [Развертывание безопасных приложений](secure-deploy.md)
