---
title: Советы и рекомендации для безопасного развертывания PaaS — Microsoft Azure
description: Ознакомьтесь с рекомендациями для проектирования, создания и управления безопасности облачных приложений в Azure и понять преимуществах безопасности PaaS перед другими моделями облачных служб.
services: security
documentationcenter: na
author: TerryLanfear
manager: barbkess
editor: techlake
ms.assetid: ''
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/06/2019
ms.author: terrylan
ms.openlocfilehash: 9da7a3b91223b8a6fd25814a10a0cbafd645d132
ms.sourcegitcommit: 2ce4f275bc45ef1fb061932634ac0cf04183f181
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2019
ms.locfileid: "65231120"
---
# <a name="securing-paas-deployments"></a>Защита развернутых служб PaaS

Эта статья содержит сведения, которые помогут вам:

- понять преимущества безопасности размещения приложений в облаке;
- оценить преимущества безопасности платформы как услуги (PaaS) перед другими моделями облачных служб;
- изменить ориентированную на сеть модель безопасности на модель периметра безопасности на основе удостоверений;
- внедрить общие рекомендации по безопасности PaaS.

[Разработка безопасных приложений в Azure](abstract-develop-secure-apps.md) общее руководство по вопросы безопасности и элементы управления, следует учитывать на каждом этапе жизненного цикла разработки программного обеспечения при разработке приложений для облака.

## <a name="cloud-security-advantages"></a>Преимущества безопасности облака
У размещения в облаке есть преимущества безопасности. С определенной вероятностью в локальной среде организации не соблюдаются обязанности, а средства, вкладываемые в систему безопасности, ограничены. Все это порождает среду, в которой злоумышленники могут воспользоваться уязвимостями всех уровнях.

![Преимущества безопасности облачной эры][1]

Организации могут сократить время, необходимое для обнаружения угроз и реагирования на них, используя возможности облачной безопасности и аналитики, предоставляемые поставщиком.  Делегировав эти обязанности поставщику облачных служб, организации могут увеличить охват системы безопасности, что позволит им перераспределить ее и бюджет ресурсы на другие приоритетные для бизнеса направления.

## <a name="division-of-responsibility"></a>Разделение ответственности
Важно понимать разделение ответственности между вашей организацией и корпорацией Майкрософт. В локальной среде весь стек принадлежит вам, но при переходе в облако некоторые обязанности переходят к корпорации Майкрософт. В приведенной ниже таблице ответственности показано, за какие области стека в развернутых службах SaaS, PaaS и IaaS несете ответственность вы, а за какие — корпорация Майкрософт.

![Зоны ответственности][2]

Для всех типов развертываемых облачных служб вы являетесь владельцем данных и удостоверений. Вы несете ответственность за защиту данных и удостоверений, локальных ресурсов и облачных компонентов, которыми вы управляете (они зависят от типа службы).

Ниже перечислены обязанности, которые всегда остаются за вами независимо от типа развертывания.

- Данные
- Конечные точки
- Учетная запись.
- управление доступом

## <a name="security-advantages-of-a-paas-cloud-service-model"></a>Преимущества безопасности модели облачных служб PaaS
Используя ту же таблицу ответственности, рассмотрим преимущества развертывания службы PaaS в Azure перед локальным развертыванием.

![Преимущества безопасности PaaS][3]

Начиная с нижней части стека, физической инфраструктуры, корпорация Майкрософт уменьшает распространенных риски и обязанности. Так как корпорация Майкрософт непрерывно наблюдает за облаком Майкрософт, его сложно атаковать. Злоумышленнику нет смысла выбирать в качестве цели облако Майкрософт. Если только у злоумышленника нет множества денежных средств и технических ресурсов, скорее всего он выберет другую цель.  

В середине стека нет различий между развернутой службой PaaS и локальным развертыванием. На прикладном уровне и уровне управления учетными записями и доступом риски одинаковы. В разделе дальнейших действий этой статьи мы предоставим вам рекомендации по устранению или минимизации этих рисков.

В верхней части стека (управление данными и управление правами) вы подвергаетесь одному риску, который можно снизить с помощью управления ключами. (Управление ключами рассматривается в рекомендациях.) Хотя управление ключами добавляет обязанностей, некоторыми областями в развернутой службе PaaS больше не нужно будет управлять, поэтому вы сможете выделить эти ресурсы для управления ключами.

Платформа Azure также обеспечивает надежную защиту от атак DDoS с помощью различных сетевых технологий. Тем не менее все разновидности сетевых методов защиты от атак DDoS имеют свои пределы по числу защищаемых каналов и центров обработки данных. Чтобы избежать масштабных атак DDoS, можно воспользоваться преимуществами основной возможности облака Azure, чтобы быстро и автоматически развертывать ресурсы для защиты от атак DDoS. Мы подробнее рассмотрим, как это сделать, в статьях с рекомендациями.

## <a name="modernizing-the-defenders-mindset"></a>Модернизация подхода к безопасности
Распространение модели развертывания PaaS изменило общий подход к безопасности. Вместо того, чтобы контролировать все самостоятельно, теперь вы можете разделить ответственность с корпорацией Майкрософт.

Другим существенным различием между развертыванием служб PaaS и традиционными локальными развертываниями является новый взгляд на то, что определяет основной периметр безопасности. Исторически основным локальным периметром безопасности выступала сеть, и большинство локальных систем безопасности используют сеть как основу безопасности. Для развертываемых служб PaaS основной периметра безопасности удобнее считать удостоверения.

## <a name="adopt-a-policy-of-identity-as-the-primary-security-perimeter"></a>Применение политики удостоверения в качестве основного периметра безопасности
Одной из пяти основных характеристик облачных вычислений является расширенный сетевой доступ, что делает менее уместным подход, ориентированный на сеть. Цель большинства сред облачных вычислений — предоставлять пользователям доступ к ресурсам независимо от расположения. Расположение большинства пользователей будет находиться где-то в Интернете.

На следующем рисунке показано, как развивался периметр безопасности: от периметра сети до периметра на основе удостоверений. Защита сети в моделях безопасности отходит на второй план, уступая место защите данных, а также управлению безопасностью приложений и пользователей. Основное отличие заключается в том, что требуется усиливать защиту того, что важно для вашей компании.

![Удостоверение как новый периметр безопасности][4]

Первоначально службы PaaS Azure (например, веб-роли и SQL Azure) обеспечивали крайне мало или вообще не обеспечивали традиционных средств защиты периметра сети. Было понятно, что цель каждого элемента — предоставить доступ через Интернет (веб-роли), а аутентификация обуславливает новый периметр (например, служба BLOB-объектов или SQL Azure).

В современных рекомендациях по безопасности предполагается, что злоумышленник уже нарушил периметр сети. Поэтому в современных рекомендациях по защите на первое место выходят удостоверения. Организациям необходимо установить периметр безопасности на основе удостоверений со строгой санацией с использованием аутентификации и авторизации (рекомендуется).

Принципы и шаблоны для периметра сети существуют уже десятилетиями. А вот опыт использования удостоверений в основе периметра безопасности относительно невелик. С учетом этого мы накопили достаточно опыта, чтобы дать некоторые общие рекомендации, проверенные на практике и подходящие почти для всех служб PaaS.

Ниже приведены рекомендации по управлению периметром на основе удостоверений.

**Рекомендация**. Защитите свои ключи и учетные данные, чтобы обеспечить безопасность развертывания PaaS.   
**Сведения**. Потеря ключей и учетных данных является распространенной проблемой. Можно использовать централизованное решение, где ключи и секретные данные могут храниться в аппаратных модулях безопасности (HSM). [Azure Key Vault](../key-vault/key-vault-whatis.md) защищает ваши ключи и секреты с помощью шифрования, ключи аутентификации, ключи учетной записи хранения, ключи шифрования данных, PFX-файлы и пароли, используя ключи, которые защищены с помощью аппаратные модули безопасности.

**Рекомендация**. Не помещайте учетные данные и другую секретную информацию в исходный код или репозиторий GitHub.   
**Сведения**. Хуже потери ключей и учетных данных может быть только получение к ним несанкционированного доступа. Злоумышленники могут воспользоваться преимуществами программ-роботов для поиска ключей и секретных данных, хранящихся в репозиториях кода, например на сайте GitHub. Не помещайте ключ и секретные данные в эти общедоступные репозитории кода.

**Рекомендация**. Защищайте свои интерфейсы управления виртуальной машиной в гибридных службах PaaS и IaaS, используя интерфейс управления, который позволяет удаленно управлять этими виртуальными машинами напрямую.   
**Сведения**. Можно использовать такие протоколы удаленного управления, как [SSH](https://en.wikipedia.org/wiki/Secure_Shell) и [RDP](https://support.microsoft.com/kb/186607), а также [удаленное взаимодействие через PowerShell](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/enable-psremoting). Как правило, рекомендуется не включать прямой удаленный доступ к виртуальным машинам из Интернета.

Если это возможно, используйте альтернативные подходы, такие как использование виртуальных частных сетей в виртуальной сети Azure. Если альтернативные подходы невозможны, обязательно используйте сложные парольные фразы и двухфакторную аутентификацию (например, [Многофакторную идентификацию Azure](../active-directory/authentication/multi-factor-authentication.md)).

**Рекомендация**. Используйте надежные платформы аутентификации и авторизации.   
**Сведения**. Используйте федеративные удостоверения из Azure AD, а не из пользовательского хранилища. При использовании федеративных удостоверений вы получаете преимущества подхода на основе платформы и делегируете партнерам управление авторизованными удостоверениями. Модель федеративной идентификации особенно важна, когда сотрудники прекращают выполнение тех или иных обязанностей, и эти данные должны быть отражены в нескольких системах идентификации и авторизации.

Используйте предоставляемые платформой механизмы аутентификации и авторизации вместо пользовательского кода. Ведь разработка пользовательского кода аутентификации может быть подвержена ошибкам. Большинство ваших разработчиков не являются экспертами в области безопасности и, скорее всего, не учитывают тонкостей и последних разработок в области аутентификации и авторизации. Коммерческий код (например, создаваемый корпорацией Майкрософт), как правило, подвергается тщательным проверкам безопасности.

Используйте двухфакторную аутентификацию. Двухфакторная аутентификация является текущим стандартом аутентификации и авторизации, так как позволяет избежать уязвимостей системы безопасности, присущих разновидностям аутентификации по имени пользователя и паролю. Доступ к интерфейсам управления Azure (портал или удаленный сеанс PowerShell) и службам для клиентов должен быть спроектирован и настроен для использования [Многофакторной идентификации Azure](../active-directory/authentication/multi-factor-authentication.md).

Используйте стандартные протоколы аутентификации, такие как OAuth2 и Kerberos. Эти протоколы внимательно оценены коллегами и скорее всего реализованы в составе библиотек аутентификации и авторизации для вашей платформы.

## <a name="use-threat-modeling-during-application-design"></a>Использование моделирование угроз во время разработки приложения
[Жизненный цикл разработки защищенных приложений](https://www.microsoft.com/en-us/sdl) (Майкрософт) указывает, что команды должны принимать участие в процессе моделирования угроз на этапе проектирования. Чтобы ускорить этот процесс, корпорация Майкрософт создала [средство моделирования угроз SDL](../security/azure-security-threat-modeling-tool.md). Моделирование архитектуры приложения и перечисление угроз [STRIDE](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxzZWN1cmVwcm9ncmFtbWluZ3xneDo0MTY1MmM0ZDI0ZjQ4ZDMy) на всех границах доверия позволяют обнаружить ошибки на раннем этапе.

В следующей таблице перечислены угрозы STRIDE и предоставлены некоторые примеры методов устранения рисков, в которых используются функции Azure. Эти способы могут помочь не во всех ситуациях.

| Threat | Свойство безопасности | Потенциальные миграции платформы Azure |
| --- | --- | --- |
| Спуфинг | Authentication | Требуйте HTTPS-подключения. |
| Незаконное изменение | Целостность | Проверяйте SSL-сертификаты. |
| Отказ | Неотрекаемость | Включите [мониторинг и диагностику](https://docs.microsoft.com/azure/architecture/best-practices/monitoring) в Azure. |
| Раскрытие информации | Конфиденциальность | Зашифруйте конфиденциальные неактивные данные с помощью [сертификатов службы](https://docs.microsoft.com/rest/api/appservice/certificates). |
| Отказ в обслуживании | Доступность | Отслеживайте метрики производительности на наличие признаков атаки типа "отказ в обслуживании". Примените фильтры подключения. |
| Повышение прав | Авторизация | Используйте [технологию управления привилегированными пользователями](../active-directory/privileged-identity-management/subscription-requirements.md). |

## <a name="develop-on-azure-app-service"></a>Разработка в Службе приложений Azure
[Служба приложений Azure](../app-service/overview.md) — это предложение PaaS, которое позволяет создавать веб-приложения и мобильные приложения для любой платформы или устройства и подключаться к данным откуда угодно, как в облаке, так и в локальной среде. Служба приложений обладает возможностями для работы в сетевой и мобильной среде, которые ранее предлагались отдельно в службе "Веб-сайты Azure" и мобильных службах Azure. Она также предусматривает новые возможности для автоматизации бизнес-процессов и размещения облачных API. Служба приложений — это отдельная интегрируемая служба, которая добавляет широкий спектр возможностей в сценарии с использованием Интернета, мобильных устройств и интеграции.

Ниже приведены рекомендации по использованию Службы приложений.

**Рекомендация**. [Выполняйте аутентификацию с помощью Azure Active Directory](../app-service/overview-authentication-authorization.md).   
**Сведения**. Служба приложений предоставляют службу OAuth 2.0 для поставщика удостоверений. Служба OAuth 2.0 предназначена упростить разработку клиентов, так как предоставляет определенные процедуры авторизации для веб-приложений, классических приложений и мобильных телефонов. Azure AD использует OAuth 2.0 для авторизации доступа к мобильным приложениям и веб-приложениям.

**Рекомендация**. Доступ следует ограничивать с учетом возможности использования необходимой информации и минимальных полномочий.   
**Сведения**. Ограничение доступа крайне важно для организаций, которые планируют применять политики безопасности для доступа к данным. Управление доступом на основе ролей (RBAC) можно использовать для назначения пользователям, группам и приложениям разрешений, действующих в рамках определенной области. Дополнительные сведения о предоставлении пользователям доступа к приложениям см. в статье [Что такое управление доступом на основе ролей (RBAC)?](../role-based-access-control/overview.md)

**Рекомендация**. Обеспечьте защиту ключей.   
**Сведения**. Azure Key Vault помогает защитить криптографические ключи и секреты, используемые облачными приложениями и службами. С помощью Key Vault можно шифровать ключи и секреты (например, ключи аутентификации, ключи учетных записей хранения, ключи шифрования данных, PFX-файлы и пароли), используя ключи, защищенные аппаратными модулями безопасности. Чтобы обеспечить более высокий уровень защиты, ключи можно импортировать или создать в аппаратных модулях безопасности. Чтобы узнать больше, ознакомьтесь с разделом [то такое хранилище ключей Azure?](../key-vault/key-vault-whatis.md) Key Vault можно также использовать для управления TLS-сертификатами с автоматическим продлением.

**Рекомендация**. Ограничьте исходные IP-адреса входящего трафика.   
**Сведения**. В [Среде службы приложений](../app-service/environment/intro.md) есть функция интеграции виртуальных сетей, которая помогает ограничить IP-адреса входящего трафика с помощью групп безопасности сети. Виртуальные сети позволяют размещать ресурсы Azure в сети, недоступной из Интернета, доступом к которой управляете вы сами. Дополнительные сведения см. в статье [Интеграция приложения с виртуальной сетью Azure](../app-service/web-sites-integrate-with-vnet.md).

**Рекомендация**. Отслеживайте состояние безопасности сред Службы приложений.   
**Сведения**. Используйте Центр безопасности Azure для мониторинга сред Службы приложений. Когда центр безопасности выявляет потенциальные уязвимости в системе безопасности, он создает [рекомендации](../security-center/security-center-virtual-machine-recommendations.md) по настройке необходимых элементов управления.

> [!NOTE]
> Мониторинг Службы приложений находится на этапе предварительной версии и доступен только в центре безопасности Azure [ценовой категории "Стандартный"](../security-center/security-center-pricing.md).
>
>

## <a name="install-a-web-application-firewall"></a>Установка брандмауэра веб-приложения
Веб-приложения все чаще подвергаются вредоносным атакам, использующим общеизвестные уязвимости. Повсеместно используются уязвимости для атак путем внедрения кода SQL и межсайтовых сценариев, и это лишь немногие из них. Предотвращение таких атак в коде приложения может быть сложной задачей и потребовать тщательного обслуживания, исправления и мониторинга на многих уровнях топологии приложения. Централизованный брандмауэр веб-приложения значительно упрощает управление безопасностью и помогает администраторам защищать приложение от угроз вторжения. Решение WAF может быстрее реагировать на угрозы безопасности по сравнению с защитой каждого отдельного веб-приложения благодаря установке исправлений известных уязвимостей в центральном расположении. Существующие шлюзы приложений можно преобразовать в шлюзы приложений с поддержкой брандмауэра веб-приложений.

[Брандмауэр веб-приложения (WAF)](../application-gateway/waf-overview.md) — это компонент Шлюза приложений, обеспечивающий централизованную защиту веб-приложений от распространенных эксплойтов и уязвимостей. Брандмауэр веб-приложения основан на правилах из [основных наборов правил OWASP (открытый проект безопасности веб-приложений)](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) версии 3.0 или 2.2.9.

## <a name="monitor-the-performance-of-your-applications"></a>Отслеживание производительности приложений
Мониторинг — это процесс сбора и анализа данных для определения производительности, работоспособности и доступности вашего приложения. Эффективная стратегия мониторинга предоставляет возможность подробной проверки работы различных компонентов вашего приложения. Она позволяет продлить время непрерывной работы за счет предупреждений о важных проблемах, чтобы вы могли решить их до того, как они приведут к сбоям. Она также помогает обнаруживать аномалии, которые могут быть связаны с безопасностью.

Используйте [Azure Application Insights](https://azure.microsoft.com/documentation/services/application-insights) для мониторинга доступности, производительности и потребления приложения, независимо от того, где оно размещено: в облаке или локально. С помощью Application Insights можно быстро обнаружить и диагностировать ошибки в приложении, не дожидаясь, пока о них сообщит пользователь. Собранные данные позволят сделать осознанный выбор в отношении обслуживания и улучшений вашего приложения.

Application Insights предоставляет обширные инструменты для взаимодействия с собираемыми данными. Эта служба хранит свои данные в общем репозитории. Он может использовать преимущества общие функциональные возможности, такие как оповещения, панели мониторинга и детальный анализ с помощью языка запросов Kusto.

## <a name="perform-security-penetration-testing"></a>Выполните тестирование уязвимости безопасности
Проверка защиты является столь важным, как тестирование любых других функций. Сделать [проникновение](azure-security-pen-testing.md) стандартной частью процесса сборки и развертывания. Планируйте регулярные тесты и сканирование уязвимостей в развернутых приложений и отслеживать состояние открытых портов, конечных точек и атак.

Тестирование методом Монте-Карло — это метод для поиска ошибок программы (код ошибки), указав неправильного формата входных данных в интерфейсы программирования (точки входа), анализировать и использовать эти данные. [Функцией обнаружения рисков безопасности Майкрософт](https://www.microsoft.com/en-us/security-risk-detection/) — это Облачное средство, которое можно использовать для поиска ошибок и других уязвимостей системы безопасности в программном обеспечении, прежде чем развернуть его в Azure. Средство предназначено для обнаружения уязвимостей, перед развертыванием программного обеспечения, поэтому не нужно исправлять ошибки, обработки сбоев и реагировать на атаки, после выпуска программного обеспечения.


## <a name="next-steps"></a>Дальнейшие действия
В этой статье были рассмотрены преимущества безопасности развертывания PaaS в Azure и рекомендации по безопасности для облачных приложений. Далее вы можете изучить рекомендации по защите веб-приложений и мобильных приложений PaaS с помощью определенных служб Azure. Мы начнем со Службы приложений Azure, Базы данных SQL Azure, Хранилища данных SQL Azure и службы хранилища Azure. По мере выпуска статей с рекомендациями для других служб Azure ссылки на них будут добавляться в приведенный ниже список.

- [службе приложений Azure](security-paas-applications-using-app-services.md)
- [База данных SQL Azure и хранилище данных SQL](security-paas-applications-using-sql.md)
- [Хранилище Azure](security-paas-applications-using-storage.md)
- Кэш Azure для Redis
- Azure Service Bus
- Брандмауэры веб-приложения

См. в разделе [разработке безопасных приложений в Azure](abstract-develop-secure-apps.md) вопросы безопасности и элементов управления, следует учитывать на каждом этапе жизненного цикла разработки программного обеспечения при разработке приложений для облака.

Дополнительные рекомендации по обеспечению безопасности, используемые при разработке, развертывании облачных решений и управлении ими с помощью Azure, см. в статье [Рекомендации и шаблоны для обеспечения безопасности в Azure](security-best-practices-and-patterns.md).

Ниже приведены ресурсы, с помощью которых можно получить общие сведения о службах безопасности Azure и связанных службах Майкрософт.
* [Блог команды безопасности Azure](https://blogs.msdn.microsoft.com/azuresecurity/). Благодаря этому блогу вы будете в курсе последних новостей о безопасности Azure.
* [Microsoft Security Response Center](https://technet.microsoft.com/library/dn440717.aspx). Это место, куда можно сообщать об уязвимостях, в том числе о проблемах Azure. Это также можно сделать по почте, отправив сообщение по адресу secure@microsoft.com.

<!--Image references-->
[1]: ./media/security-paas-deployments/advantages-of-cloud.png
[2]: ./media/security-paas-deployments/responsibility-zones.png
[3]: ./media/security-paas-deployments/advantages-of-paas.png
[4]: ./media/security-paas-deployments/identity-perimeter.png
