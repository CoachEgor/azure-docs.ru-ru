---
title: Что такое шифрование дисков Azure?
description: В этой статье представлен обзор шифрования дисков Azure
author: msmbaldwin
ms.service: security
ms.topic: article
ms.author: mbaldwin
ms.date: 06/05/2019
ms.custom: seodec18
ms.openlocfilehash: 58c5c8321e505fe2c1c7d19c58fe0d031b75b3e4
ms.sourcegitcommit: 2d3b1d7653c6c585e9423cf41658de0c68d883fa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/20/2019
ms.locfileid: "67294862"
---
# <a name="azure-disk-encryption-overview"></a>Обзор шифрования дисков Azure

Шифрование дисков Azure помогает обеспечить защиту данных в соответствии с вашей организации требования безопасности и соответствия. Она использует [BitLocker](https://docs.microsoft.com/windows/security/information-protection/bitlocker/bitlocker-overview) особенностью Windows и [DM-Crypt](https://en.wikipedia.org/wiki/Dm-crypt) в обеспечивают шифрование томов для дисков операционной системы и данных из виртуальных машин (ВМ) Azure Linux. Он также интегрируется с [Azure Key Vault](https://azure.microsoft.com/documentation/services/key-vault/) помогут вам управлять ключами шифрования дисков и секреты и гарантирует, что все данные на дисках виртуальной Машины шифруются при хранении в службе хранилища Azure. Шифрование дисков для Windows и виртуальных машин Linux Azure предоставляются в общедоступной версии во всех общедоступных регионах Azure и регионах Azure для государственных организаций для стандартных виртуальных машинах и виртуальных машин с хранилищем Azure Premium. 

Если вы используете центр безопасности Azure, он оповестит вас при наличии незашифрованных виртуальных машин. Вы получите оповещение высокого уровня серьезности вместе c рекомендацией о шифровании таких виртуальных машин.

![Оповещение о шифровании диска в центре безопасности Azure](media/azure-security-disk-encryption/security-center-disk-encryption-fig1.png)

> [!NOTE]
> Выполнение некоторых приведенных рекомендаций может привести к более интенсивному использованию данных, сети или вычислительных ресурсов, а следовательно к дополнительным затратам на лицензии или подписки.


## <a name="encryption-scenarios"></a>Сценарии шифрования

Шифрование дисков Azure можно решить и требованиям безопасности организации, для защиты виртуальных машин Azure с помощью технологии шифрования стандартные для отрасли. Также можно настроить виртуальные машины для загрузки в группе управляемых клиентом ключей и политик (BYOK) и аудит использования этих ключей в хранилище ключей.

Шифрование дисков Azure поддерживает следующие сценарии клиентов:

* Включение и отключение шифрования для новых виртуальных машин, созданных из поддерживаемых образов коллекции Azure.
* Включение и отключение шифрования на существующих виртуальных машин, работающих в Azure.
* Включение и отключение шифрования для новых виртуальных машин Windows, созданных на основе предварительно зашифрованного виртуального жесткого диска и ключи шифрования.
* Задает включение и отключение шифрования для масштабирования виртуальных машин Windows.
* Включение и отключение шифрования данных дисков для масштабируемых наборов виртуальных машин Linux.
* Включение и отключение шифрования виртуальных машин с управляемыми дисками.
* Идет обновление параметров шифрования существующей зашифрованных уровня "премиум" и ВМ, отличные от "премиум" хранилища.
* Резервное копирование и восстановление зашифрованных виртуальных машин.
* Подключите собственные шифрования (BYOE) и перевести свои собственные основные сценарии (BYOK), в которых клиенты использовать свои собственные ключи шифрования и сохранения их в хранилище ключей Azure.

Он также поддерживает следующие сценарии для виртуальных машин, если они включены в Microsoft Azure:

* интеграция с Azure Key Vault;
* [Уровня "стандартный"](https://azure.microsoft.com/pricing/details/virtual-machines/) , соответствующие [минимальные требования к памяти](azure-security-disk-encryption-prerequisites.md#supported-vm-sizes). 
* Включение шифрования для Windows и виртуальных машин Linux, управляемый диск и масштабирование виртуальных машин набора из поддерживаемых образов коллекции Azure.
* Отключение шифрования операционной системы и данных дисков для виртуальных машин Windows, масштабирования виртуальных машин в наборе и управляемых виртуальных машин с дисками.
* Отключение шифрования на дисках с данными для виртуальных машин Linux, масштабирование виртуальных машин в наборе и управляемых виртуальных машин с дисками.
* Включение шифрования для виртуальных машин под управлением клиентской ОС Windows.
* Включение шифрования для томов с путями подключения.
* Включение шифрования на виртуальных машинах Linux с чередованием дисков (RAID с помощью mdadm).
* Включение шифрования для виртуальных машин Linux, используйте диспетчер логических ТОМОВ для дисков данных.
* Включение шифрования на дисках операционной системы виртуальной Машины Linux и данных.

   > [!NOTE]
   > Шифрование диска операционной системы для некоторых дистрибутивов Linux не поддерживается. Дополнительные сведения см. в разделе [шифрования дисков Azure поддерживаемые операционные системы: Linux](azure-security-disk-encryption-prerequisites.md#linux).
   
* Включение шифрования для виртуальных машин, которые должны быть настроены дисковые пространства Windows, начиная с Windows Server 2016.
* Резервное копирование и восстановление зашифрованных виртуальных машин для ключа шифрования ключей (KEK) и сценарии без ключа шифрования КЛЮЧЕЙ.

Шифрование дисков Azure не поддерживает следующие сценарии, функции и технологии:

* Шифрование виртуальной Машины или виртуальные машины, созданные с помощью классического метода создания виртуальной Машины уровня "базовый".
* Отключение шифрования на диске операционной системы или диск с данными виртуальной машины Linux, когда для шифрования диска операционной системы.
* Задает шифрование диска операционной системы для масштабирования виртуальных машин Linux.
* Шифрование виртуальных машинах Windows с программными системами RAID.
* Шифрование пользовательских образов на виртуальных машинах Linux.
* Интеграция с локальной системой управления ключами.
* служба файлов Azure (общая файловая система);
* сетевая файловая система (NFS);
* динамические тома;

## <a name="encryption-features"></a>Функции шифрования

Когда вы включите и развернете шифрование дисков Azure для виртуальных машин Azure, можно настроить следующие возможности включения:

* Шифрование тома операционной системы для защиты загрузочного тома, в хранилище.
* Шифрование томов данных для защиты данных, размещенных в хранилище.
* Отключение шифрования дисков операционной системы и данных для виртуальных машин Windows.
* Отключение шифрования данных дисков для виртуальных машин Linux (только если диск ОС не зашифрован).
* Защита ключей шифрования и секретов в вашей подписке Azure Key Vault.
* Информирование о состоянии шифрования зашифрованных виртуальных машин.
* Удаление настроек дискового шифрования из виртуальной Машины.
* Резервное копирование и восстановление зашифрованных виртуальных машин с помощью службы архивации Azure.

Шифрование дисков Azure для виртуальных машин для Windows и Linux включает в себя:

* [Расширение дискового шифрования для Windows](../virtual-machines/extensions/azure-disk-enc-windows.md).
* [Расширение дискового шифрования для Linux](../virtual-machines/extensions/azure-disk-enc-linux.md).
* [Командлеты PowerShell дискового шифрования](/powershell/module/az.compute/set-azvmdiskencryptionextension?view=azps-2.2.0).
* [Командлеты шифрования дисков Azure CLI](/cli/azure/vm/encryption?view=azure-cli-latest).
* [Шаблоны Azure Resource Manager шифрования диска](azure-security-disk-encryption-appendix.md#resource-manager-templates).

> [!NOTE]
> Дополнительная плата за шифрование дисков Azure для виртуальных машин не взимается. К хранилищу ключей, используемому для хранения ключей шифрования, применяются [цены на Key Vault](https://azure.microsoft.com/pricing/details/key-vault/) ценовой категории "Стандартный". 

## <a name="encryption-workflow"></a>Рабочий процесс шифрования

Чтобы включить шифрование дисков для виртуальных машин Windows и Linux, выполните следующие шаги.

1. Дайте согласие на включение шифрования дисков с помощью шаблона Resource Manager, командлетов PowerShell или Azure CLI для шифрования дисков Azure, а также укажите конфигурацию шифрования.

   * В случае использования зашифрованного клиентом виртуального жесткого диска передайте этот диск в свою учетную запись хранения, а ключевой материал шифрования — в хранилище ключей. Затем укажите конфигурацию шифрования, чтобы включить шифрование на новой виртуальной Машины.
   * Для новых виртуальных машин, созданных из поддерживаемой коллекции образов и существующих виртуальных машин, которые уже работают в Azure укажите конфигурацию шифрования, чтобы включить шифрование на виртуальной Машине.

1. Предоставление доступа к платформе Azure для чтения из хранилища ключей, чтобы включить шифрование на виртуальной Машине материал ключа шифрования (ключи шифрования BitLocker для систем Windows) и парольная фраза для Linux.

1. Azure вносит изменения в модель службы виртуальной машины на основе конфигурации шифрования и хранилища ключей, а затем подготавливает вашу зашифрованную виртуальную машину.

   ![Антивредоносное ПО Майкрософт в Azure](./media/azure-security-disk-encryption/disk-encryption-fig1.png)

## <a name="decryption-workflow"></a>Рабочий процесс расшифровки
Чтобы отключить шифрование дисков для виртуальных машин, выполните перечисленные ниже общие шаги.

1. Выберите для отключения шифрования (расшифровки), работающей виртуальной машины в Azure и задать конфигурацию расшифровки. Отключить шифрование можно с помощью шаблона Resource Manager, командлетов PowerShell или Azure CLI для шифрования дисков Azure.

   Этот шаг отключается шифрование операционной системы или объем данных или в работающую виртуальную Машину Windows. Как отмечено в предыдущем разделе, отключение шифрования диска ОС Linux не поддерживается. Расшифровать диски данных можно только на виртуальных машинах Linux и только в тех случаях, когда диск ОС не зашифрован.

1. Обновления Azure, модель службы виртуальной Машины и виртуальная машина помечается как расшифровать. Неактивное содержимое виртуальной машины больше не шифруется.

   > [!NOTE]
   > При операции отключения шифрования хранилище ключей и ключевой материал шифрования (ключи шифрования BitLocker для Windows или парольная фраза для Linux) не удаляются.
   >
   > Отключение шифрования диска операционной системы для Linux не поддерживается. Расшифровать можно только диски данных на виртуальных машинах Linux.
   >
   > Отключение шифрования диска данных для Linux не поддерживается, если диск ОС зашифрован.


## <a name="encryption-workflow-previous-release"></a>Рабочий процесс шифрования (предыдущий выпуск)

В новом выпуске шифрования дисков Azure устранена необходимость предоставлять параметр приложения Azure AD для включения шифрования дисков виртуальной машины. В новом выпуске больше не требуется вводить учетные данные Azure AD на этапе включения шифрования. При использовании нового выпуска все новые виртуальные машины должны быть зашифрованы без параметров приложения Azure AD. Виртуальные машины, которые уже были зашифрованы с помощью параметров приложения Azure AD, по-прежнему поддерживаются. Их следует и дальше обслуживать с использованием синтаксиса Azure AD. Чтобы включить шифрование дисков для виртуальных машин Windows и Linux (предыдущий выпуск), выполните следующие шаги.

1. Выберите сценарий шифрования из перечисленных в разделе [Сценарии шифрования](#encryption-scenarios).

1. Дайте согласие на включение шифрования дисков с помощью шаблона Resource Manager, командлетов PowerShell или Azure CLI для шифрования дисков Azure, а также укажите конфигурацию шифрования.

   * В случае использования зашифрованного клиентом виртуального жесткого диска передайте этот диск в свою учетную запись хранения, а ключевой материал шифрования — в хранилище ключей. Затем укажите конфигурацию шифрования, чтобы включить шифрование на новой виртуальной Машины.
   * Для новых виртуальных машин, созданных из Marketplace и существующих виртуальных машин, которые уже работают в Azure укажите конфигурацию шифрования, чтобы включить шифрование на виртуальной Машине.

1. Предоставление доступа к платформе Azure для чтения из хранилища ключей, чтобы включить шифрование на виртуальной Машине материал ключа шифрования (ключи шифрования BitLocker для систем Windows) и парольная фраза для Linux.

1. Укажите удостоверение приложения Azure AD для записи ключевого материала шифрования в хранилище ключей. Этот шаг включает шифрование на виртуальной Машине в сценариях, упомянутых на шаге 2.

1. Azure вносит изменения в модель службы виртуальной машины на основе конфигурации шифрования и хранилища ключей, а затем подготавливает вашу зашифрованную виртуальную машину.


## <a name="terminology"></a>Терминология
В следующей таблице определены некоторые распространенные термины, используемые в документации шифрования дисков Azure:

| Терминология | Определение |
| --- | --- |
| Azure AD | Учетная запись [Azure AD](https://azure.microsoft.com/documentation/services/active-directory/) используется для проверки подлинности, хранения секретов в хранилище ключей и извлечения их из него. |
| Хранилище ключей Azure | Key Vault представляет собой службу управления криптографическими ключами. Она основана на аппаратных модулях безопасности, соответствующих Федеральному стандарту обработки информации (FIPS). Эти стандарты позволяют надежно хранить криптографические ключи и конфиденциальные данные. Дополнительные сведения см. в документации по [Azure Key Vault](https://azure.microsoft.com/services/key-vault/). |
| BitLocker |[BitLocker](https://technet.microsoft.com/library/hh831713.aspx) — это отраслевой Windows технологией шифрования томов, используется для включения шифрования дисков на виртуальных машинах Windows. |
| BEK | Ключи шифрования BitLocker (BEK) используются для шифрования загрузочного тома ОС и томов данных. Ключи BitLocker хранятся в хранилище ключей в виде секретов. |
| Инфраструктура CLI Azure | [Azure CLI](/cli/azure/install-azure-cli) оптимизирован для администрирования ресурсов Azure и управления ими из командной строки.|
| DM-Crypt |[DM-Crypt](https://gitlab.com/cryptsetup/cryptsetup/wikis/DMCrypt) — это подсистема под управлением Linux, прозрачного шифрования дисков, который позволяет включить шифрование дисков на виртуальных машинах Linux. |
| Ключ шифрования ключей (KEK) | Асимметричный ключ (RSA 2048), можно использовать для защиты или создания оболочки секрета. Вы можете использовать защищенный HSM ключ или ключ с программной защитой. Дополнительные сведения см. в документации по [Azure Key Vault](https://azure.microsoft.com/services/key-vault/). |
| Командлеты PowerShell | Дополнительные сведения см. в статье [Общие сведения об Azure PowerShell](/powershell/azure/overview). |

## <a name="next-steps"></a>Дальнейшие действия

Чтобы приступить к работе, см. в разделе [предварительных требованиях шифрования дисков Azure](azure-security-disk-encryption-prerequisites.md).

