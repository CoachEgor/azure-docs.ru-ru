---
title: Рекомендации по обеспечению безопасности для образов Azure Marketplace | Документация Майкрософт
description: В этой статье содержатся рекомендации для образов, включенных в Marketplace.
services: security
documentationcenter: na
author: terrylanfear
manager: barbkess
ms.assetid: ''
ms.service: security
ms.subservice: security-fundamentals
ms.devlang: na
ms.topic: article
ms.date: 01/11/2019
ms.author: terrylan
ms.openlocfilehash: 3925e39824d1702ff43a6b981ac997ddab658b96
ms.sourcegitcommit: 980c3d827cc0f25b94b1eb93fd3d9041f3593036
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/02/2020
ms.locfileid: "80548654"
---
# <a name="security-recommendations-for-azure-marketplace-images"></a>Рекомендации по обеспечению безопасности для образов Azure Marketplace

Ваше изображение должно соответствовать рекомендациям конфигурации безопасности. Это поможет обеспечить высокий уровень безопасности для образов партнерских решений в Azure Marketplace.

Всегда запускайте обнаружение уязвимости безопасности на изображении перед отправкой. Если вы обнаружите уязвимость безопасности в своем опубликованном изображении, вы должны своевременно информировать своих клиентов как об этой уязвимости, так и о том, как ее исправить.

## <a name="open-source-based-images"></a>Образы на основе открытого источника

|||
|--------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Категория**                                                 | **Проверьте**                                                                                                                                                                                                                                                                              |
| Безопасность                                                     | Установите все последние патчи безопасности для дистрибутива Linux.                                                                                                                                                                                                              |
| Безопасность                                                     | Следуйте отраслевым рекомендациям, чтобы обеспечить изображение VM для конкретного дистрибутива Linux.                                                                                                                                                                                     |
| Безопасность                                                     | Снизьте уязвимость среды, используя минимальный объем памяти и только необходимые роли Windows Server, компоненты, службы и сетевые порты.                                                                                                                                               |
| Безопасность                                                     | Сканируйте исходный код и итоговый образ виртуальной машины на наличие вредоносных программ.                                                                                                                                                                                                                                   |
| Безопасность                                                     | Изображение VHD содержит только необходимые заблокированные учетные записи, которые не имеют паролей по умолчанию, которые позволили бы интерактивный логин; нет задних дверей.                                                                                                                                           |
| Безопасность                                                     | Отменяемые правила брандмауэра, если приложение функционально не полагается на них, например, на прибор брандмауэра.                                                                                                                                                                             |
| Безопасность                                                     | Удалите всю конфиденциальную информацию из изображения VHD, например тестовые SSH-клавиши, известные файлы хоста, файлы журналов и ненужные сертификаты.                                                                                                                                       |
| Безопасность                                                     | Избегайте использования LVM.                                                                                                                                                                                                                                            |
| Безопасность                                                     | Включите последние версии требуемых библиотек: </br> — OpenSSL версии 1.0 или более поздней; </br> — Python версии 2.5 или более поздней (рекомендуется использовать Python 2.6 и выше); </br> — пакет Python pyasn1, если он еще не установлен; </br> — d.OpenSSL версии 1.0 или более поздней.                                                                |
| Безопасность                                                     | Очистить Bash / Shell истории записей.                                                                                                                                                                                                                                             |
| Сеть                                                   | Включите сервер SSH по умолчанию. Установите SSH сохранить в живых, чтобы sshd конфигурации со следующей опцией: ClientAliveInterval 180.                                                                                                                                                        |
| Сеть                                                   | Удалите из изображения любую пользовательскую конфигурацию сети. Удалить resolv.conf: `rm /etc/resolv.conf`.                                                                                                                                                                                |
| Развертывание                                                   | Установите новейший Azure Linux Agent.</br> - Установите с помощью пакета RPM или Deb.  </br> — Можно использовать процесс установки вручную, но рекомендуется применять пакеты установщика. </br> — При установке агента вручную из репозитория GitHub сначала скопируйте файл `waagent` в `/usr/sbin` и запустите его (в качестве привилегированного пользователя): </br>`# chmod 755 /usr/sbin/waagent` </br>`# /usr/sbin/waagent -install` </br>Файл конфигурации агента помещается в каталог `/etc/waagent.conf`. |
| Развертывание                                                   | Убедитесь, что поддержка Azure может предоставить нашим партнерам серийный выход консоли при необходимости и обеспечить адекватный тайм-аут для монтажа диска ОС из облачного хранилища. Добавьте следующие параметры к линии `console=ttyS0 earlyprintk=ttyS0 rootdelay=300`загрузки ядра изображения: . |
| Развертывание                                                   | На диске операционной системы отсутствует раздел подкачки. Можно запросить подкачку для создания локального диска ресурсов с помощью агента Linux.         |
| Развертывание                                                   | Создайте единую корневую перегородку для диска ОС.      |
| Развертывание                                                   | Только 64-разрядная операционная система.                                                                                                                                                                                                                                                          |

## <a name="windows-server-based-images"></a>Образы на основе сервера Windows

|||
|-------------| -------------------------|
| **Категория**                                                     | **Проверьте**                                                                                                                                                                |
| Безопасность                                                         | Используйте безопасный базовый образ ОС. Виртуальный жесткий диск, используемый для источника любого образа на основе Windows Server, должен быть из образов ОС Windows Server, предоставленных через Microsoft Azure. |
| Безопасность                                                         | Установите все последние обновления безопасности.                                                                                                                                     |
| Безопасность                                                         | Приложения не должны зависеть от ограниченных имен пользователей, таких как администратор, корень или администратор.                                                                |
| Безопасность                                                         | Включить шифрование диска BitLocker как для жестких дисков ОС, так и для жестких дисков данных.                                                             |
| Безопасность                                                         | Снизьте уязвимость среды, используя минимальный объем памяти и включив только необходимые роли Windows Server, компоненты, службы и сетевые порты.                         |
| Безопасность                                                         | Сканируйте исходный код и итоговый образ виртуальной машины на наличие вредоносных программ.                                                                                                                     |
| Безопасность                                                         | Установите автоматическое обновление системы безопасности образов Windows Server.                                                                                                                |
| Безопасность                                                         | Изображение VHD содержит только необходимые заблокированные учетные записи, которые не имеют паролей по умолчанию, которые позволили бы интерактивный логин; нет задних дверей.                             |
| Безопасность                                                         | Отменяемые правила брандмауэра, если приложение функционально не полагается на них, например, на прибор брандмауэра.                                                               |
| Безопасность                                                         | Удалите всю конфиденциальную информацию из изображения VHD, включая файлы HOSTS, файлы журналов и ненужные сертификаты.                                              |
| Развертывание                                                       | Только 64-разрядная операционная система.                            |

Даже если в вашей организации нет изображений на рынке Azure, подумайте о том, чтобы проверить конфигурации изображений Windows и Linux на эти рекомендации.

## <a name="contacting-customers"></a>Связаться с клиентами

Для идентификации клиентов и их контактных писем:

1.  В облачном партнерской портале, на левом железнодорожном, выберите **Исследования**.
2.  На вкладке **«Заказы и использование»** используйте поля **«Дата начала»** и **«Дата окончания»** для запроса в пределах требуемого диапазона дат. Это показывает, какие подписки Azure использовались для предложения на ежедневной основе. Экспортировать эти данные. 
3.  Аналогичным образом, на вкладке **Клиента,** запрос и экспорт вашей клиентской базы.
4.  Сопойте идентификатор подписки со шага 2 с идентификатора подписки со ступени 3, чтобы найти необходимую информацию о клиентах.
