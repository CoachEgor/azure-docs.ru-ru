---
title: Защита баз данных PaaS в Azure | Документы Майкрософт
description: 'Ознакомьтесь с рекомендациями по безопасности Базы данных SQL Azure и хранилища данных SQL, чтобы защитить свои веб-приложения и мобильные приложения PaaS. '
services: security
documentationcenter: na
author: techlake
manager: barbkess
editor: ''
ms.assetid: ''
ms.service: security
ms.subservice: security-fundamentals
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 09/28/2018
ms.author: terrylan
ms.openlocfilehash: f7d993799fed637fbec55afc8f06d90c8fc6910f
ms.sourcegitcommit: 85b3973b104111f536dc5eccf8026749084d8789
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/01/2019
ms.locfileid: "68726782"
---
# <a name="best-practices-for-securing-paas-databases-in-azure"></a>Рекомендации по защите баз данных PaaS в Azure

В этой статье рассматривается набор рекомендаций по безопасности [Базы данных SQL Azure](../../sql-database/sql-database-technical-overview.md) и [Хранилища данных SQL](../../sql-data-warehouse/sql-data-warehouse-overview-what-is.md), предназначенных для защиты веб-приложений и мобильных приложений платформы как услуги (PaaS). Эти рекомендации основаны на нашем опыте, полученном в процессе использования Azure AD, и на отзывах других пользователей.

База данных SQL Azure и Хранилище данных SQL предоставляют службу реляционной базы данных для веб-приложений. Давайте рассмотрим службы, помогающие защитить приложения и данные при использовании Базы данных SQL Azure и хранилища данных SQL в развертывании PaaS.

- Аутентификация Azure Active Directory (вместо аутентификации SQL Server).
- Брандмауэр SQL Azure.
- Прозрачное шифрование данных (TDE)

## <a name="use-a-centralized-identity-repository"></a>Использование централизованного репозитория удостоверений
Базы данных SQL Azure можно настроить для использования одного из двух следующих типов аутентификации.

- **Аутентификация SQL** с использованием имени пользователя и пароля. При создании логического сервера для базы данных вы указали имя для входа "Администратор сервера" и пароль. Используя эти учетные данные, можно пройти аутентификацию для любой базы данных на этом сервере в качестве ее владельца.

- **Аутентификация Azure Active Directory** с использованием удостоверений, контролируемых Azure Active Directory, которая поддерживается управляемыми и интегрированными доменами. Чтобы использовать аутентификацию Azure Active Directory, необходимо создать другого администратора сервера с именем Azure AD admin, которому разрешено администрировать пользователей и группы Azure AD. Этот администратор также может выполнять все операции, доступные обычному администратору.

[Аутентификация Azure Active Directory](../../active-directory/develop/authentication-scenarios.md) — это механизм подключения к Базе данных SQL Azure и хранилищу данных SQL с помощью удостоверений в Azure Active Directory (AD). Azure AD обеспечивает альтернативу аутентификации SQL Server, что позволяет не множить число удостоверений пользователей на серверах базы данных. С помощью аутентификации Azure AD можно централизованно управлять удостоверениями пользователей базы данных и другими службами Майкрософт. Централизованное управление удостоверениями позволяет использовать единое расположение для управления пользователями и упрощает управление разрешениями.  

### <a name="benefits-of-using-azure-ad-instead-of-sql-authentication"></a>Преимущества использования аутентификации Azure AD вместо аутентификации SQL
- возможность чередования паролей в одном расположении;
- управление разрешениями базы данных с помощью внешних групп Azure AD;
- возможность исключить хранение паролей с помощью встроенной проверки подлинности Windows и других видов аутентификации, поддерживаемых Azure AD;
- для проверки подлинности удостоверений на уровне базы данных используются данные пользователей автономной базы данных;
- поддержка аутентификации на основе маркеров для приложений, подключающихся к базе данных SQL;
- поддержка федерации доменов с использованием служб федерации Active Directory (AD FS) или аутентификации на основе пароля и имени исходного пользователя для локального каталога Azure AD без синхронизации доменов;
- поддержка подключений из SQL Server Management Studio, использующих универсальную аутентификацию Active Directory, в том числе [Многофакторную идентификацию (MFA)](/azure/active-directory/authentication/multi-factor-authentication). MFA обеспечивает надежную аутентификацию с использованием ряда простых вариантов проверки посредством телефонного звонка, текстового сообщения, смарт-карты с ПИН-кодом или уведомления в мобильном приложении. Дополнительные сведения см. в статье [Универсальная проверка подлинности для Базы данных SQL и Хранилища данных SQL (поддержка SSMS для MFA)](../../sql-database/sql-database-ssms-mfa-authentication.md).

Дополнительные сведения об аутентификации Azure AD см. в следующих статьях:

- [Использование аутентификации Azure Active Directory для аутентификации с помощью Базы данных SQL, Управляемого экземпляра или Хранилища данных SQL](../../sql-database/sql-database-aad-authentication.md)
- [Аутентификация в хранилище данных SQL Azure](../../sql-data-warehouse/sql-data-warehouse-authentication.md)
- [Token-based authentication support for Azure SQL DB using Azure AD authentication](../../sql-database/sql-database-aad-authentication.md) (Поддержка аутентификации на основе маркера для Базы данных SQL Azure с использованием аутентификации Azure AD)

> [!NOTE]
> Чтобы убедиться, что Azure Active Directory подходит для вашей среды, ознакомьтесь с разделом [Функции и ограничения Azure AD](../../sql-database/sql-database-aad-authentication.md#azure-ad-features-and-limitations).
>
>

## <a name="restrict-access-based-on-ip-address"></a>Ограничение доступа по IP-адресу
Вы можете создать правила брандмауэра, которые указывают диапазон допустимых IP-адресов. Эти правила могут быть определены на уровнях сервера и базы данных. Мы рекомендуем использовать правила брандмауэра уровня базы данных всегда, когда это возможно, чтобы повысить уровень безопасности и сделать базу данных более портативной. Правила брандмауэра уровня сервера лучше всего подходят для администраторов, если у вас много баз данных с одинаковыми требованиями к доступу, но вы не хотите тратить время на настройку каждой базы данных по отдельности.

Ограничения исходных IP-адресов по умолчанию в Базе данных SQL разрешают доступ с любого адреса Azure, включая другие подписки и клиенты. Вы можете усилить безопасность, разрешив доступ к экземпляру только со своих IP-адресов. Даже если используются брандмауэр SQL и ограничения IP-адресов, необходима строгая проверка подлинности. Ознакомьтесь с рекомендациями, указанными ранее в этой статье.

Чтобы узнать больше о брандмауэре SQL Azure и ограничениях IP-адресов, ознакомьтесь со следующими статьями:

- [Управление доступом к службам "База данных SQL Azure" и "Хранилище данных SQL"](../../sql-database/sql-database-control-access.md)
- [Правила брандмауэра службы "База данных SQL Azure" и "Хранилище данных SQL"](../../sql-database/sql-database-firewall-configure.md)


## <a name="encrypt-data-at-rest"></a>Шифрование неактивных данных
[Прозрачное шифрование данных (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption) по умолчанию включено. Функция TDE прозрачным образом шифрует файлы данных и журналов SQL Server, базы данных SQL Azure и хранилища данных SQL Azure. Она обеспечивает защиту от несанкционированного прямого доступа к файлам или их резервным копиям. Это позволяет шифровать неактивные данные, не меняя существующие приложения. Функция TDE должна быть включена всегда. Однако она не помешает злоумышленнику воспользоваться обычным способом доступа. TDE дает возможность соблюдать требования многих законов, норм и рекомендаций, действующих в различных отраслях.

SQL Azure управляет связанными с ключами аспектами для TDE. При использовании TDE следует уделять особое внимание обеспечению возможности восстановления при перемещении баз данных. В более сложных сценариях управление ключами может осуществляться явным образом в Azure Key Vault посредством расширенного управления ключами. Дополнительные сведения см. в статье [Включение прозрачного шифрования данных в SQL Server с помощью расширенного управления ключами](/sql/relational-databases/security/encryption/enable-tde-on-sql-server-using-ekm). В этом случае также поддерживается создание собственных ключей (BYOK) посредством функции Azure Key Vaults BYOK.

SQL Azure обеспечивает шифрование столбцов с помощью функции [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine). Она разрешает доступ к важным столбцам только авторизованным приложениям. Использование такого типа шифрования ограничивает запросы SQL к зашифрованным столбцам значениями, основанными на равенстве.

Для избранных данных также следует использовать шифрование уровня приложения. Проблемы независимости данных иногда могут быть устранены путем шифрования данных с помощью ключа, который хранится в правильной стране или регионе. Это предотвращает проблемы даже при ненамеренной передаче данных, так как их невозможно расшифровать без ключа, если, конечно, используется надежный алгоритм (например, AES 256).

Для защиты базы данных можно принять дополнительные меры предосторожности, такие как проектирование безопасной системы, шифрование конфиденциальных ресурсов и создание брандмауэра на серверах базы данных.

## <a name="next-steps"></a>Следующие шаги
В этой статье представлен набор рекомендаций по безопасности Базы данных SQL и хранилища данных SQL, предназначенных для защиты веб-приложений и мобильных приложений PaaS. Дополнительные сведения о безопасности развернутых служб PaaS см. в следующих статьях:

- [Защита развернутых приложений PaaS](paas-deployments.md)
- [Защита мобильных приложений и веб-приложений PaaS с помощью служб приложений Azure](paas-applications-using-app-services.md)
