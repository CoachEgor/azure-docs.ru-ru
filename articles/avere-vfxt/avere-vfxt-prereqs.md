---
title: Необходимые условия для Avere vFXT — Azure
description: Необходимые условия для Avere vFXT для Azure
author: ekpgh
ms.service: avere-vfxt
ms.topic: conceptual
ms.date: 02/20/2019
ms.author: v-erkell
ms.openlocfilehash: 352833b12c00abbefcf7016d27dfb580ee25e450
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60409264"
---
# <a name="prepare-to-create-the-avere-vfxt"></a>Подготовка к созданию Avere vFXT

В этой статье объясняются предварительные задачи для создания кластера Avere vFXT.

## <a name="create-a-new-subscription"></a>Создание подписки

Начните с создания подписки Azure. Используйте отдельную подписку для каждого проекта Avere vFXT, что позволит легко отслеживать все ресурсы проекта и расходы, защитить другие проекты от возможного регулирования во время подготовки и упростить очистку.  

Чтобы создать подписку Azure на портале Azure:

* Перейдите в колонку [Подписки](https://ms.portal.azure.com/#blade/Microsoft_Azure_Billing/SubscriptionsBlade).
* Нажмите кнопку **+ Добавить** вверху.
* Войдите при появлении соответствующего запроса.
* Выберите предложение и выполните действия, чтобы создать подписку.

## <a name="configure-subscription-owner-permissions"></a>Настройка разрешений владельца подписки

Кластер vFXT должен создать пользователь с разрешениями владельца подписки. Чтобы принять условия обслуживания программного обеспечения и выполнения других действий необходимы разрешения владельца подписки. 

В некоторых ситуациях обходной путь, позволяющие не владельца создаваемого vFTX Avere для кластера Azure. Эти сценарии включают в себя, ограничения ресурсов и назначения дополнительных ролей для создателя. В обоих случаях владелец подписки также необходимо [принять условия соглашения программного обеспечения vFXT Avere](#accept-software-terms) заранее. 

| Сценарий | Ограничения | Роли доступа, необходимые для создания кластера vFXT Avere | 
|----------|--------|-------|
| Администратор группы ресурсов | Виртуальной сети, кластер контроллера и узлы кластера должны создаваться в группе ресурсов | [Администратор доступа пользователей](../role-based-access-control/built-in-roles.md#user-access-administrator) и [участник](../role-based-access-control/built-in-roles.md#contributor) роли, обе области целевую группу ресурсов | 
| Внешней виртуальной сети | Контроллер кластера и узлов кластера создаются в группе ресурсов, но используется существующей виртуальной сети в другую группу ресурсов | (1) [администратор доступа пользователей](../role-based-access-control/built-in-roles.md#user-access-administrator) и [участник](../role-based-access-control/built-in-roles.md#contributor) ролей, областью действия группы ресурсов vFXT; и (2) [участник виртуальных машин](../role-based-access-control/built-in-roles.md#virtual-machine-contributor), [доступа пользователей Администратор](../role-based-access-control/built-in-roles.md#user-access-administrator), и [Avere участник](../role-based-access-control/built-in-roles.md#avere-contributor) роли в пределах группы ресурсов виртуальной сети. |
 
Альтернативой является создание роли управления ДОСТУПОМ настраиваемого доступа на основе ролей заранее и назначить права для пользователя, как описано в [в этой статье](avere-vfxt-non-owner.md). Таким способом можно предоставить пользователям значимые разрешения. 

## <a name="quota-for-the-vfxt-cluster"></a>Квота для кластера vFXT

Для следующих компонентов Azure необходимо иметь достаточную квоту. При необходимости [подайте запрос на увеличение квоты](https://docs.microsoft.com/azure/azure-supportability/resource-manager-core-quotas-request).

> [!NOTE]
> Виртуальные машины и компоненты SSD, перечисленные здесь, предназначены для самого кластера vFXT. Вам потребуется дополнительная квота для виртуальных машин и SSD, которые будут использоваться для вычислительной фермы.  Убедитесь, что квота включена для региона, где планируется запустить рабочий процесс.

|Компонент Azure|Quota|
|----------|-----------|
|Виртуальные машины|3 E32s_v3 или более|
|Хранилище SSD (цен. категория "Премиум")|200 ГБ пространства ОС плюс от 1 до 4 ТБ объема кэша на узел |
|Учетная запись хранения (необязательно) |версия 2|
|Серверное хранилище данных (необязательно) |Один новый контейнер больших двоичных объектов в LRS |

## <a name="accept-software-terms"></a>Принятие условий программного обеспечения

> [!NOTE] 
> Этот шаг не является обязательным, если владелец подписки создает кластер Avere vFXT.

Во время создания кластера необходимо принять условия предоставления услуг для программного обеспечения Avere vFXT. Если вы не являетесь владельцем подписки, он должен принять условия заранее. Этот шаг достаточно выполнить один раз для каждой подписки.

Чтобы принять условия программного обеспечения заранее: 

1. Откройте Cloud Shell на портале Azure или перейдите по адресу <https://shell.azure.com>. Войдите с помощью идентификатора своей подписки.

   ```azurecli
    az login
    az account set --subscription abc123de-f456-abc7-89de-f01234567890
   ```

1. Выполните эту команду, чтобы принять условия предоставления услуг и включить программный доступ для Avere vFXT для образа программного обеспечения в Azure: 

   ```azurecli
   az vm image accept-terms --urn microsoft-avere:vfxt:avere-vfxt-controller:latest
   ```

## <a name="create-a-storage-service-endpoint-in-your-virtual-network-if-needed"></a>Создать конечную точку службы хранилища в виртуальной сети (при необходимости)

Объект [конечная точка службы](../virtual-network/virtual-network-service-endpoints-overview.md) хранятся локально, вместо маршрутизации его за пределами виртуальной сети трафик BLOB-объектов Azure. Рекомендуется для любого vFXT Avere для кластера Azure, которое использует BLOB-объектов Azure для хранения внутренних данных. 

Если вы предоставляете существующей виртуальной сети и создания нового контейнера больших двоичных объектов Azure для внутреннего хранилища в процессе создания кластера, должен иметь конечную точку службы в виртуальной сети для службы хранилища Microsoft. Эта конечная точка должна существовать перед созданием кластера или создать не удастся. 

Конечная точка службы хранилища рекомендуется для любого vFXT Avere для кластера Azure, которое использует хранилище BLOB-объектов Azure, даже если вы добавили хранилище. 

> [!TIP] 
> * Этот шаг можно пропустите, если вы создаете новую виртуальную сеть в процессе создания кластера. 
> * Этот шаг необязателен, если вы не создаете хранилище BLOB-объектов во время создания кластера. В этом случае конечной точки службы можно создать позже, если вы решили использовать BLOB-объектов Azure.

Создание конечной точки службы хранилища на портале Azure. 

1. На портале слева щелкните **Виртуальные сети**.
1. Выберите виртуальную сеть для кластера. 
1. В области слева щелкните **Конечные точки службы**.
1. В верхней части страницы щелкните **Добавить**.
1. Оставьте в службу как ``Microsoft.Storage`` и выберите подсети кластера.
1. В нижней части страницы щелкните **Добавить**.

   ![Снимок экрана портала Azure с заметками для шагов создания конечной точки службы](media/avere-vfxt-service-endpoint.png)


## <a name="next-step-create-the-vfxt-cluster"></a>Следующий шаг: создание кластера vFXT

После выполнения этих предварительных требований можно переходить к созданию кластера. Инструкции см. в статье [Развертывание кластера vFXT](avere-vfxt-deploy.md).