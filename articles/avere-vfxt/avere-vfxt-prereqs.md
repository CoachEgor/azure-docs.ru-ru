---
title: Необходимые условия для Avere vFXT — Azure
description: Необходимые условия для Avere vFXT для Azure
author: ekpgh
ms.service: avere-vfxt
ms.topic: conceptual
ms.date: 02/20/2019
ms.author: rohogue
ms.openlocfilehash: 27b0fd1e6a9238e978518e06ab7f0aeeae5501d2
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/25/2019
ms.locfileid: "75414385"
---
# <a name="prepare-to-create-the-avere-vfxt"></a>Подготовка к созданию Avere vFXT

В этой статье объясняются предварительные задачи для создания кластера Avere vFXT.

## <a name="create-a-new-subscription"></a>Создание подписки

Начните с создания подписки Azure. Используйте отдельную подписку для каждого проекта Avere vFXT, что позволит легко отслеживать все ресурсы проекта и расходы, защитить другие проекты от возможного регулирования во время подготовки и упростить очистку.

Чтобы создать подписку Azure на портале Azure:

* Перейдите в колонку [Подписки](https://ms.portal.azure.com/#blade/Microsoft_Azure_Billing/SubscriptionsBlade).
* Нажмите кнопку **+ Добавить** вверху.
* Войдите при появлении соответствующего запроса.
* Выберите предложение и выполните действия, чтобы создать подписку.

## <a name="configure-subscription-owner-permissions"></a>Настройка разрешений владельца подписки

Кластер vFXT должен создать пользователь с разрешениями владельца подписки. Права владельца подписки необходимы для принятия условий использования программного обеспечения и выполнения других действий.

Существует несколько сценариев, которые позволяют не владельцу создавать Авере Вфткс для кластера Azure. Эти сценарии подразумевают ограниченность ресурсов и назначение создателям дополнительных ролей. В обоих случаях владелец подписки также должен заранее [принять условия использования программного обеспечения Авере вфкст](#accept-software-terms) .

| Сценарий | Ограничения | Роли доступа, необходимые для создания кластера Авере Вфкст |
|----------|--------|-------|
| Администратор группы ресурсов | Виртуальная сеть, контроллер кластера и узлы кластера должны быть созданы в группе ресурсов. | [Администратор доступа пользователей](../role-based-access-control/built-in-roles.md#user-access-administrator) и роли [участника](../role-based-access-control/built-in-roles.md#contributor) , которые находятся в пределах целевой группы ресурсов. |
| Внешняя виртуальная сеть | Контроллер кластера и узлы кластера создаются в группе ресурсов, но используется существующая виртуальная сеть в другой группе ресурсов. | (1) [администратор доступа пользователей](../role-based-access-control/built-in-roles.md#user-access-administrator) и роли [участников](../role-based-access-control/built-in-roles.md#contributor) , областью действия которых является группа ресурсов вфкст; и (2) [участник виртуальных машин](../role-based-access-control/built-in-roles.md#virtual-machine-contributor), [администратор доступа пользователей](../role-based-access-control/built-in-roles.md#user-access-administrator)и роли [участников авере](../role-based-access-control/built-in-roles.md#avere-contributor) , областью действия которых является группа ресурсов виртуальной сети. |

В качестве альтернативы можно создать пользовательскую роль управления доступом на основе ролей (RBAC) заранее и назначить привилегии пользователю, как описано в [этой статье](avere-vfxt-non-owner.md). Таким способом можно предоставить пользователям значимые разрешения.

## <a name="quota-for-the-vfxt-cluster"></a>Квота для кластера vFXT

Для следующих компонентов Azure необходимо иметь достаточную квоту. При необходимости [подайте запрос на увеличение квоты](https://docs.microsoft.com/azure/azure-supportability/resource-manager-core-quotas-request).

> [!NOTE]
> Виртуальные машины и компоненты SSD, перечисленные здесь, предназначены для самого кластера vFXT. Вам потребуется дополнительная квота для виртуальных машин и SSD, которые будут использоваться для вычислительной фермы.  Убедитесь, что квота включена для региона, где планируется запустить рабочий процесс.

|Компонент Azure|Квота|
|----------|-----------|
|Виртуальные машины|3 E32s_v3 или более|
|Хранилище SSD (цен. категория "Премиум")|200 ГБ пространства ОС плюс от 1 до 4 ТБ объема кэша на узел |
|Учетная запись хранения (необязательно) |v2|
|Серверное хранилище данных (необязательно) |Один новый контейнер больших двоичных объектов в LRS |

## <a name="accept-software-terms"></a>Принятие условий программного обеспечения

> [!NOTE]
> Этот шаг не является обязательным, если владелец подписки создает кластер Avere vFXT.

Во время создания кластера необходимо принять условия предоставления услуг для программного обеспечения Avere vFXT. Если вы не являетесь владельцем подписки, он должен принять условия заранее. Этот шаг достаточно выполнить один раз для каждой подписки.

Чтобы принять условия программного обеспечения заранее:

1. Откройте Cloud Shell на портале Azure или перейдите по адресу <https://shell.azure.com>. Войдите с помощью идентификатора своей подписки.

   ```azurecli
    az login
    az account set --subscription abc123de-f456-abc7-89de-f01234567890
   ```

1. Выполните эту команду, чтобы принять условия предоставления услуг и включить программный доступ для Avere vFXT для образа программного обеспечения в Azure:

   ```azurecli
   az vm image accept-terms --urn microsoft-avere:vfxt:avere-vfxt-controller:latest
   ```

## <a name="create-a-storage-service-endpoint-in-your-virtual-network-if-needed"></a>Создание конечной точки службы хранилища в виртуальной сети (при необходимости)

[Конечная точка службы](../virtual-network/virtual-network-service-endpoints-overview.md) сохраняет локальный трафик BLOB-объектов Azure вместо его маршрутизации за пределы виртуальной сети. Рекомендуется использовать любой Авере Вфкст для кластера Azure, который использует большой двоичный объект Azure для хранения данных в серверной части.

Если вы предоставляете существующую виртуальную сеть и создаете новый контейнер больших двоичных объектов Azure для серверного хранилища в процессе создания кластера, в сети для хранилища Майкрософт должна быть конечная точка службы. Эта конечная точка должна существовать до создания кластера, иначе создание завершится ошибкой.

Конечную точку службы хранилища рекомендуется использовать для всех Авере Вфкст в кластере Azure, использующих хранилище BLOB-объектов Azure, даже если вы добавите хранилище позже.

> [!TIP]
>
>* Пропустите этот шаг, если вы создаете новую виртуальную сеть в ходе создания кластера.
>* Этот шаг является необязательным, если вы не создаете хранилище BLOB-объектов во время создания кластера. В этом случае можно создать конечную точку службы позже, если вы решили использовать большой двоичный объект Azure.

Создайте конечную точку службы хранилища из портал Azure.

1. На портале откройте список виртуальных сетей.
1. Выберите виртуальную сеть для кластера.
1. В меню слева щелкните **конечные точки службы** .
1. В верхней части страницы щелкните **Добавить**.
1. Выберите ``Microsoft.Storage``службы.
1. Выберите подсеть кластера.
1. В нижней части страницы щелкните **Добавить**.

   ![Снимок экрана портала Azure с заметками для шагов создания конечной точки службы](media/avere-vfxt-service-endpoint.png)

## <a name="next-step-create-the-vfxt-cluster"></a>Следующий шаг: создание кластера vFXT

После выполнения этих предварительных требований можно переходить к созданию кластера. Инструкции см. в статье [Развертывание кластера vFXT](avere-vfxt-deploy.md).
