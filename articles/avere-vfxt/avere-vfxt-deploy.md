---
title: Развертывание Avere vFXT для Azure
description: Шаги по развертыванию кластера Avere vFXT в Azure
author: ekpgh
ms.service: avere-vfxt
ms.topic: conceptual
ms.date: 04/05/2019
ms.author: v-erkell
ms.openlocfilehash: 7ded66c29f12b8f68746726ca6c126bffbc51f0d
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60410334"
---
# <a name="deploy-the-vfxt-cluster"></a>Развертывание кластера vFXT

Эта процедура описывает использование мастера развертывания, который предоставляется в Azure Marketplace. Этот мастер автоматически развертывает кластер с помощью шаблона Azure Resource Manager. Когда вы введете в форму параметры и нажмете кнопку **Создать**, Azure автоматически выполнит следующие действия:

* Создает контроллер кластера, который является простой виртуальной Машины, который содержит программное обеспечение, необходимое для развертывания и управления кластером.
* Задает группу ресурсов и инфраструктуре виртуальной сети, включая создание новых элементов.
* Создает виртуальные машины на узел кластера и настраивает их в качестве кластера Avere.
* При необходимости, создает новый контейнер больших двоичных объектов Azure и настраивает его как фильтр core кластера.

После выполнения инструкций в этом документе, вы получите виртуальную сеть, подсеть, контроллера и кластер vFXT, как показано на следующей схеме. На этой диаграмме показаны необязательно налоговыми core BLOB-объектов Azure, включая новый контейнер хранилища BLOB-объектов (в учетную запись хранения, не показаны) и конечную точку службы для службы хранилища Microsoft в подсети. 

![схемы, отображение три концентрических прямоугольника с Avere кластерными компонентами. Внешний прямоугольник имеет метку «Группа ресурсов» и содержит шестиугольник, с меткой «(необязательно) хранилища BLOB-объектов». Далее прямоугольник в имеет метку "виртуальная сеть: 10.0.0.0/16 "и не содержит все уникальные компоненты. Внутренний прямоугольник имеет метку «Subnet:10.0.0.0/24» и содержит виртуальную Машину с меткой «Кластера контроллер», стек трех виртуальных машин, с меткой «vFXT узлов (кластер vFXT)», а также шестиугольник, с меткой «Конечная точка службы». Есть стрелка подключения конечной точки службы (который находится внутри подсети) и хранилище BLOB-объектов (за пределами подсети и виртуальной сети в группе ресурсов). Стрелку проходит через подсеть и виртуальную сеть границы.](media/avere-vfxt-deployment.png)  

Перед запуском шаблона создания убедитесь, что у вас есть следующие необходимые компоненты:  

1. [Новая подписка](avere-vfxt-prereqs.md#create-a-new-subscription).
1. [Разрешения владельца подписки](avere-vfxt-prereqs.md#configure-subscription-owner-permissions).
1. [Квота для кластера vFXT](avere-vfxt-prereqs.md#quota-for-the-vfxt-cluster).
1. [Конечная точка службы хранилища (при необходимости)](avere-vfxt-prereqs.md#create-a-storage-service-endpoint-in-your-virtual-network-if-needed) — обязательный для развертывает использование существующей виртуальной сети и Создание хранилища BLOB-объектов

Дополнительные сведения о шагах развертывания кластера и планировании см. в статьях [Plan your Avere vFXT system](avere-vfxt-deploy-plan.md) (Планирование системы Avere vFXT) и [Avere vFXT for Azure - deployment overview](avere-vfxt-deploy-overview.md) (Общие сведения о развертывании Avere vFXT для Azure).

## <a name="create-the-avere-vfxt-for-azure"></a>Создание кластера Avere vFXT для Azure

Доступ к шаблону создания на портале Azure, выполнив поиск Avere и выбрав «Avere vFXT для шаблона Azure ARM». 

![В окне браузера отображается портал Azure с выделенными элементами "Создать > Marketplace > Все". Во всем, что страница, поля поиска содержит термин «avere» и второй результат «Avere vFXT для шаблона Azure ARM» собраны в red, чтобы выделить его.](media/avere-vfxt-template-choose.png)

После прочтения сведения о vFXT Avere для страницы шаблона ARM в Azure, щелкните **создать** начинается. 

![Сайт Azure Marketplace, где отображается первая страница шаблона развертывания](media/avere-vfxt-deploy-first.png)

Этот шаблон состоит из четырех шагов — две страницы для сбора информации, а затем шаги проверки и подтверждения. 

* Первая страница посвящена параметрам виртуальной машины для контроллера кластера. 
* На второй странице указываются параметры для создания кластера и связанных с ним ресурсов, таких как подсети и хранилище. 
* Третья страница отображает все введенные параметры и проверяет правильность конфигурации. 
* Четвертая страница описывает условия использования программного обеспечения, позволяя начать создание кластера. 

## <a name="page-one-parameters---cluster-controller-information"></a>Параметры на первой странице для сведений о контроллере кластера

На первой странице шаблона развертывания собираются данные о контроллера кластера. 

![Первая страница шаблона развертывания](media/avere-vfxt-deploy-1.png)

Заполните следующие сведения:

* **Cluster controller name** (Имя контроллера кластера). Введите имя виртуальной машины для контроллера кластера.

* **Controller username** (Имя пользователя контроллера). Введите имя привилегированного пользователя для виртуальной машины контроллера кластера. 

* **Authentication type** (Тип проверки подлинности). Выберите проверку подлинности на основе пароля или открытого ключа SSH, которая будет применяться при подключениях к контроллеру. Мы рекомендуем использовать метод с открытым ключом SSH (см. инструкции по [созданию и использованию ключей SSH](https://docs.microsoft.com/azure/virtual-machines/linux/ssh-from-windows)).

* **Password** (Пароль) или **SSH public key** (Открытый ключ SSH) — в зависимости выбранного типа проверки подлинности в следующих полях нужно предоставить открытый ключ RSA или пароль. Эти учетные данные используются в сочетании с указанным выше именем пользователя.

* **Subscription** (Подписка). Выберите подписку для Avere vFXT. 

* **Группа ресурсов**. Выберите существующую пустую группу ресурсов для кластера Avere vFXT или щелкните "Создать" и введите имя новой группы ресурсов. 

* **Location** (Расположение). Укажите расположение кластера и ресурсов Azure.

Щелкните **OK**, когда все будет готово. 

> [!NOTE]
> Если для контроллера кластера нужно настроить доступный из Интернета IP-адрес, создайте для этого кластера новую виртуальную сеть и не используйте существующие сети. Этот параметр вы найдете на второй странице.

## <a name="page-two-parameters---vfxt-cluster-information"></a>Параметры на второй странице для сведений о кластере vFXT

Вторая страница шаблона развертывания позволяет задать размер кластера, тип узлов, размер кэша, параметры хранилища и еще несколько параметров. 

![Вторая страница шаблона развертывания](media/avere-vfxt-deploy-2.png)

* **Avere vFXT cluster node count** (Количество узлов кластера Avere vFXT). Выберите количество узлов, которое вы намерены использовать в кластере. Допускаются значения в диапазоне от трех до двенадцати узлов. 

* **Cluster administration password** (Пароль для администрирования кластера). Создайте пароль для администрирования кластера. Этот пароль будет использоваться с именем пользователя ```admin``` для входа на панель управления кластером, где доступны функции мониторинга и настройки кластера.

* **Avere vFXT cluster name** (Имя кластера Avere vFXT). Присвойте кластеру уникальное имя. 

* **Размер** -в этом разделе показано тип виртуальной Машины, который будет использоваться для узлов кластера. Несмотря на то, что имеется только один рекомендуемый параметр, **изменить размер** ссылка открывает таблицу с подробными сведениями об этом типе экземпляра и ссылку на Калькулятор цен.  

* **Cache size per node** (Размер кэша для каждого узла). Кэш кластера распределяется между узлами кластера, то есть общий размер кэша в кластере Avere vFXT вычисляется как размер кэша для каждого узла, умноженный на количество узлов. 

  Рекомендуемая конфигурация — использовать 4 ТБ на каждый узел для Standard_E32s_v3 узлов.

* **Виртуальная сеть** — определить новую виртуальную сеть для размещения кластера, или выберите существующую виртуальную сеть, отвечающий требованиям, описанным в [Планирование системы vFXT Avere](avere-vfxt-deploy-plan.md#resource-group-and-network-infrastructure). 

  > [!NOTE]
  > Во втором случае контроллеру кластера будет назначен общедоступный IP-адрес для организации доступа к этой новой частной сети. Если вы выберете существующую виртуальную сеть, контроллер кластера настраивается без общедоступного IP-адреса. 
  > 
  > Общедоступный IP-адрес для контроллера кластера обеспечивает более удобный доступ к кластеру vFXT, но создает небольшую угрозу безопасности. 
  >  * Благодаря наличию общедоступного IP-адреса контроллер кластера можно использовать в качестве узла перехода для подключения к кластеру Avere vFXT за пределами частной подсети.
  >  * Если вы не настроили общедоступный IP-адрес в контроллере, для доступа к кластеру необходимо использовать другой узел перехода, подключение VPN или ExpressRoute. Например, создайте контроллер в виртуальной сети, для которой уже настроено VPN-подключение.
  >  * Если вы создаете контроллер с общедоступным IP-адресом, необходимо защитить виртуальную машину контроллера с помощью группы безопасности сети. По умолчанию развертывание Avere vFXT для Azure создает для контроллеров с общедоступными IP-адресами группу безопасности сети и разрешает входящий доступ только к порту 22. Вы можете дополнительно защитить систему, ограничив доступ по выбранному диапазону исходных IP-адресов, то есть разрешая подключения только от тех компьютеров, с которых вам нужен доступ к этому кластеру.

  Развертывание шаблона также настраивает новую виртуальную сеть с конечной точки службы хранилища BLOB-объектов Azure и управление доступом к сети, будут находиться только IP-адреса из подсети кластера. 

* **Subnet** (Подсеть). Выберите подсеть из существующей виртуальной сети или создайте новую. 

* **Создание и использование хранилища BLOB-объектов** -выберите **true** создать контейнер BLOB-объектов Azure и настроить его в качестве серверного хранилища для нового кластера vFXT Avere. Этот параметр также создает учетную запись хранения в той же группе ресурсов, что кластер и конечной точки службы хранилища Microsoft внутри подсети кластера. 
  
  Если указать существующую виртуальную сеть, он должен иметь конечную точку службы хранилища перед созданием кластера. (Дополнительные сведения в статье [Планирование системы vFXT Avere](avere-vfxt-deploy-plan.md).)

  Задайте этому полю значение **false**, если вы не хотите создавать контейнер. В этом случае необходимо подключить и настроить хранилище после создания кластера. Дополнительные инструкции см. в статье [Настройка хранилища](avere-vfxt-add-storage.md). 

* **(Новая) Учетная запись хранения** — Если для создания нового контейнера больших двоичных объектов Azure, введите имя для новой учетной записи хранения. 

## <a name="validation-and-purchase"></a>Проверка и приобретение

Страница три Сводка по параметрам и проверяет параметры. Если проверка завершится успешно, щелкните кнопку **ОК** для продолжения работы. 

![Третья страница шаблона развертывания, проверка параметров](media/avere-vfxt-deploy-3.png)

На странице 4, введите все необходимые контактные сведения и нажмите кнопку **создать** кнопку, чтобы принять условия и создать vFXT Avere для кластера Azure. 

![Четвертая страница шаблона развертывания с описанием условий и кнопкой создания](media/avere-vfxt-deploy-4.png)

Развертывание кластера занимает 15–20 минут.

## <a name="gather-template-output"></a>Сбор выходных данных шаблона

Когда шаблон Avere vFXT завершит создание кластера, выводится ряд важных сведений об этом новом кластере. 

> [!TIP]
> Обязательно скопируйте из выходных данных шаблона IP-адрес управления. Этот адрес вам понадобится для администрирования кластера.

Чтобы найти эти сведения, выполните следующие действия:

1. Перейдите к группе ресурсов для контроллера кластера.

1. В левой части страницы щелкните **Развертывания**, а затем — **microsoft-avere.vfxt-template**.

   ![Страница портала для группы ресурсов, где слева выбран пункт "Развертывания", а в таблице для имени развертывания указано значение microsoft-avere.vfxt-template](media/avere-vfxt-outputs-deployments.png)

1. В левой части страницы щелкните **Выходные данные**. Скопируйте значения в каждом из полей. 

   ![Страница выходных значений со значениями SSHSTRING, RESOURCE_GROUP, LOCATION, NETWORK_RESOURCE_GROUP, NETWORK, SUBNET, SUBNET_ID, VSERVER_IPs и MGMT_IP в полях с метками](media/avere-vfxt-outputs-values.png)

## <a name="next-step"></a>Дальнейшие действия

Теперь, когда кластер запущен и вам известен его IP-адрес управления, вы можете [подключиться к средству конфигурации кластера](avere-vfxt-cluster-gui.md), чтобы включить поддержку, добавить хранилище и настроить другие параметры кластера.
