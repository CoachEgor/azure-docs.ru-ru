---
title: Управление кэшем HPC Azure и его обновление
description: Как управлять кэшем HPC Azure и обновлять его с помощью портал Azure
author: ekpgh
ms.service: hpc-cache
ms.topic: conceptual
ms.date: 1/29/2020
ms.author: rohogue
ms.openlocfilehash: 9ad6348e15c8a25f721a89be7eab3e17c58ae17c
ms.sourcegitcommit: 4f6a7a2572723b0405a21fea0894d34f9d5b8e12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2020
ms.locfileid: "76988897"
---
# <a name="manage-your-cache-from-the-azure-portal"></a>Управление кэшем из портал Azure

На странице обзора кэша в портал Azure отображаются сведения о проекте, состояние кэша и базовая статистика для кэша. Он также имеет элементы управления для отмены или запуска кэша, удаления кэша, записи данных в долгосрочное хранение и обновления программного обеспечения.

Чтобы открыть страницу обзора, выберите ресурс кэша в портал Azure. Например, загрузите страницу **все ресурсы** и щелкните имя кэша.

![снимок экрана со страницей обзора экземпляра кэша Azure HPC](media/hpc-cache-overview.png)

Кнопки в верхней части страницы могут помочь в управлении кэшем:

* **Запуск** и [**Остановка**](#stop-the-cache) — приостановка операции кэширования
* [**Flush**](#flush-cached-data) — записывает измененные данные в целевые объекты хранилища
* [**Обновление**](#upgrade-cache-software) — обновляет программное обеспечение кэша.
* **Обновить** — перезагружает страницу обзора
* [**Delete**](#delete-the-cache) — безвозвратное уничтожение кэша

Подробнее об этих параметрах см. ниже.

## <a name="stop-the-cache"></a>Завершение кэша

Вы можете прерывать кэш, чтобы снизить затраты в течение неактивного периода. Вы не платите за время работы, пока кэш остановлен, но вы платите за выделенный дисковый накопитель в кэше. (Дополнительные сведения см. на странице с [ценами](https://aka.ms/hpc-cache-pricing) .)

Остановленный кэш не отвечает на запросы клиентов. Перед остановкой кэша следует отключить клиентов.

Кнопка **остановить** приостанавливает активный кэш. Кнопка " **Закрыть** " доступна, когда состояние кэша является **работоспособным** или **сниженным**.

![снимок экрана с верхними кнопками с выделенной кнопкой "прекратить" и всплывающим сообщением с описанием действия "завершение" и запросом "продолжить?" со значением Да (по умолчанию) и без кнопок](media/stop-cache.png)

После нажатия кнопки Да для подтверждения остановки кэша кэш автоматически сбрасывает свое содержимое в целевые объекты хранилища. Этот процесс может занять некоторое время, но обеспечивает согласованность данных. Наконец, состояние кэша меняется на **остановлено**.

Чтобы повторно активировать остановленный кэш, нажмите кнопку " **Пуск** ". Подтверждение не требуется.

![снимок экрана с верхними кнопками с выделенным пунктом "запустить"](media/start-cache.png)

## <a name="flush-cached-data"></a>Очистить кэшированные данные

Кнопка **очистить** на странице обзор указывает кэшу на немедленную запись всех измененных данных, хранящихся в кэше, на целевые объекты хранилища серверной части. Кэш, как правило, сохраняет данные в целевые объекты хранилища, поэтому нет необходимости делать это вручную, если не требуется гарантировать актуальность серверной системы хранения данных. Например, можно использовать **flush** перед созданием моментального снимка хранилища или проверкой размера набора данных.

> [!NOTE]
> В процессе очистки кэш не может обслуживать клиентские запросы. Доступ к кэшу приостановлен и возобновляется после завершения операции.

![снимок экрана с верхними кнопками с выделенным сбросом и всплывающим сообщением с описанием действия сброса и запросом "продолжить?" со значением Да (по умолчанию) и без кнопок](media/hpc-cache-flush.png)

При запуске операции записи в кэш кэш прекращает принимать запросы клиентов, а состояние кэша на странице обзора изменяется на **запись на диск**.

Данные в кэше сохраняются в соответствующих целевых объектах хранилища. В зависимости от объема данных, которые необходимо сбросить, процесс может занять несколько минут или более часа.

После сохранения всех данных в целевых объектах хранилища кэш автоматически начинает выполнять запросы клиентов. Состояние кэша возвращается к **работоспособному**.

## <a name="upgrade-cache-software"></a>Обновление программного обеспечения кэша

Если доступна новая версия программного обеспечения, кнопка **Обновить** становится активной. Кроме того, в верхней части страницы появится сообщение об обновлении программного обеспечения.

![снимок экрана верхней строки кнопок с включенной кнопкой "Обновить"](media/hpc-cache-upgrade-button.png)

При обновлении программного обеспечения клиентский доступ не прерывается, но производительность кэша снижается. Планируйте обновление программного обеспечения во время непикового использования или в течение запланированного периода обслуживания.

Обновление программного обеспечения может занять несколько часов. Кэши, настроенные с более высокой пропускной способностью, обновляются дольше, чем кэши с меньшими пиковыми значениями пропускной способности.

Если обновление программного обеспечения доступно, вы получите неделю или установите его вручную. Дата окончания указана в сообщении об обновлении. Если вы не обновите его в течение этого времени, Azure автоматически применит обновление к кэшу. Время автоматического обновления не настраивается. Если вы беспокоитесь о влиянии на производительность кэша, необходимо обновить программное обеспечение самостоятельно до истечения периода времени.

Нажмите кнопку **Обновить** , чтобы начать обновление программного обеспечения. Состояние кэша изменится на **Обновление** до завершения операции.

## <a name="delete-the-cache"></a>Удаление кэша

Кнопка **Удалить** уничтожает кэш. При удалении кэша все его ресурсы уничтожаются и больше не взимается плата за учетную запись.

Резервные тома хранилища, используемые в качестве целевых объектов хранилища, не затрагиваются при удалении кэша. Вы можете добавить их в будущем кэше позже или списать их отдельно.

> [!NOTE]
> Кэш Azure HPC не будет автоматически записывать измененные данные из кэша в серверные системы хранения перед удалением кэша.
>
> Чтобы убедиться в том, что все данные в кэше записаны в долгосрочное хранение, [закройте кэш](#stop-the-cache) перед удалением. Убедитесь, что перед нажатием кнопки Удалить состояние **остановлено** .
<!--... written to long-term storage, follow this procedure:
>
> 1. [Remove](hpc-cache-edit-storage.md#remove-a-storage-target) each storage target from the Azure HPC Cache by using the delete button on the Storage targets page. The system automatically writes any changed data from the cache to the back-end storage system before removing the target.
> 1. Wait for the storage target to be completely removed. The process can take an hour or longer if there is a lot of data to write from the cache. When it is done, a portal notification says that the delete operation was successful, and the storage target disappears from the list.
> 1. After all affected storage targets have been deleted, it is safe to delete the cache.
>
> Alternatively, you can use the [flush](#flush-cached-data) option to save cached data, but there is a small risk of losing work if a client writes a change to the cache after the flush completes but before the cache instance is destroyed.-->

## <a name="cache-metrics-and-monitoring"></a>Метрики кэша и мониторинг

На странице "Обзор" отображаются графы для некоторых базовых статистик кэша — пропускная способность кэша, операций в секунду и задержки.

![снимок экрана: три графика с показанной выше статистикой для примера кэша](media/hpc-cache-overview-stats.png)

Эти диаграммы являются частью встроенных средств мониторинга и анализа Azure. Дополнительные средства и оповещения можно найти на страницах под заголовком **мониторинг** на боковой панели портала. Дополнительные сведения см. в разделе "портал" [документации по Azure Monitor](../azure-monitor/insights/monitor-azure-resource.md#monitoring-in-the-azure-portal).

## <a name="next-steps"></a>Дальнейшие действия

<!-- * Learn more about metrics and statistics for hpc cache -->
* Дополнительные сведения о [метриках и средствах статистики Azure](../azure-monitor/index.yml)
* Получение [помощи по кэшу Azure HPC](hpc-cache-support-ticket.md)
