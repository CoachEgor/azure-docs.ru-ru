---
title: Региональная избыточность и сбой восстановления с помощью кэша Azure HPC
description: Методы обеспечения возможностей сбоя в аварийном восстановлении с помощью кэша Azure HPC
author: ekpgh
ms.service: hpc-cache
ms.topic: conceptual
ms.date: 10/30/2019
ms.author: rohogue
ms.openlocfilehash: 21074ae6bc4959da031bc7065cd7d0639ec2a14f
ms.sourcegitcommit: 31ef5e4d21aa889756fa72b857ca173db727f2c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81537276"
---
# <a name="use-multiple-caches-for-regional-failover-recovery"></a>Используйте несколько кэшов для регионального восстановления сбоя

Каждый экземпляр Azure HPC Cache выполняется в пределах определенной подписки и в одном регионе. Это означает, что рабочий процесс кэша может быть нарушен, если в регионе имеется полное отключение.

В этой статье описывается стратегия снижения риска нарушения работы с помощью второго региона для сбоя кэша.

Ключ использует бэк-энд хранения, который доступен из нескольких регионов. Это хранилище может быть либо приложенным системой NAS с соответствующей поддержкой DNS, либо хранилищем Azure Blob, которое находится в другом регионе от кэша.

По мере продолжения рабочего процесса в основном регионе данные сохраняются в долгосрочном хранилище за пределами региона. Если область кэша становится недоступной, можно создать дубликат экземпляра Azure HPC Cache во вторичном регионе, подключиться к тому же хранилищу и возобновить работу из нового кэша.

## <a name="planning-for-regional-failover"></a>Планирование регионального забоя

Чтобы настроить кэш, подготовленный к возможному сбою, выполните следующие действия:

1. Убедитесь, что ваше запасное хранилище доступно во втором регионе.
1. При планировании создания основного экземпляра кэша следует также подготовиться к воспроизведению процесса настройки во втором регионе. Включите следующие элементы:

   1. Виртуальная структура сети и подсети
   1. Емкость кэша
   1. Сведения о цели хранения, имена и пути пространства имен
   1. Подробная информация о клиентских машинах, если они расположены в том же регионе, что и кэш
   1. Команда крепления для использования клиентами кэша

   > [!NOTE]
   > Кэш HPC Azure может создаваться программно, либо через [шаблон менеджера ресурсов Azure,](../azure-resource-manager/templates/overview.md) либо путем прямого доступа к Его API. Для получения подробной информации обратитесь в группу Azure HPC Cache.

## <a name="failover-example"></a>Пример отработки отказа

Например, представьте, что необходимо найти кэш Azure HPC в восточном регионе США. Он будет получать доступ к данным, хранящимся в вашем локальном центре обработки данных.

Вы можете использовать кэш в регионе West US 2 в качестве резервного копирования.

При создании кэша в Восточной ЧАСТИ США подготовьте второй кэш для развертывания в West US 2. Вы можете использовать сценарии или шаблоны для автоматизации этого препарата.

В случае провала в восточной части США, создайте кэш, который вы подготовили в регионе West US 2.

После создания кэша добавляйте целевые показатели хранения, которые указывают на те же хранилища данных и используют те же агрегированные пути пространства имен, что и цели хранения старого кэша.

Если первоначальные клиенты затронуты, создайте новых клиентов в регионе West US 2 для использования с новым кэшом.

Все клиенты должны будут установить новый кэш, даже если клиенты не пострадали от отключения региона. Новый кэш имеет различные адреса крепления от старого.

## <a name="learn-more"></a>Дополнительные сведения

Руководство по архитектуре приложений Azure содержит дополнительную информацию о том, как [восстановиться после сбоя в работе службы в регионе.](<https://docs.microsoft.com/azure/architecture/resiliency/recovery-loss-azure-region>)
