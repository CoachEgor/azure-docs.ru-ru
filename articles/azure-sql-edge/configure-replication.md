---
title: Настройка репликации в SQL Azure для пограничных вычислений (предварительная версия)
description: Сведения о настройке репликации в SQL Azure для пограничных вычислений (предварительная версия)
keywords: ''
services: sql-database-edge
ms.service: sql-database-edge
ms.topic: conceptual
author: SQLSourabh
ms.author: sourabha
ms.reviewer: sstein
ms.date: 05/19/2020
ms.openlocfilehash: e2b37e0f3ccf5fcebe4723c05d644f2cbb7c1d56
ms.sourcegitcommit: bb0afd0df5563cc53f76a642fd8fc709e366568b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2020
ms.locfileid: "83593993"
---
# <a name="configure-replication-to-azure-sql-edge-preview"></a>Настройка репликации в SQL Azure для пограничных вычислений (предварительная версия) 

Экземпляр SQL Azure для пограничных вычислений можно настроить в качестве принудительного подписчика для односторонней репликации транзакций или репликации моментальных снимков. Экземпляр SQL Azure для пограничных вычислений не может действовать в качестве издателя или распространителя для конфигурации репликации транзакций. Репликация слиянием, репликация P2P, публикация Oracle не поддерживаются для SQL Azure для пограничных вычислений.

## <a name="supported-configurations"></a>**Поддерживаемые конфигурации**.
  
- Экземпляр SQL Azure для пограничных вычислений должен быть принудительным подписчиком для издателя.
- Издатель и распространитель могут быть
   - экземпляром SQL Server, работающем локально, или экземпляром, выполняющимся на виртуальной машине Azure. Дополнительные сведения см. в статье [Обзор SQL Server на виртуальных машинах Azure](https://azure.microsoft.com/documentation/articles/virtual-machines-sql-server-infrastructure-services/). Экземпляры SQL Server должны использовать версию, превышающую SQL Server 2016.
   - Экземпляр Управляемого экземпляра Базы данных SQL Azure. В Управляемом экземпляре может размещаться база данных издателя, распространителя и подписчика. Дополнительные сведения см. в статье [Replication to SQL Database single and pooled databases](https://docs.microsoft.com/azure/sql-database/replication-with-sql-database-managed-instance/) (Репликация в одну базу данных и базы данных в составе пула службы "База данных SQL").

- Базу данных распространителя и агенты репликации нельзя разместить в экземпляре SQL Azure для пограничных вычислений.  

> [!NOTE]
> Попытка настроить репликацию с использованием неподдерживаемой версии может привести к ошибке MSSQL_REPL20084 (The process could not connect to Subscriber (Процессу не удалось подключиться к Подписчику)) или MSSQL_REPL40532 ("Не удается открыть сервер \<имя>, запрашиваемый с использованием имени для входа. Вход в систему не выполнен").  

Чтобы использовать все функции SQL Azure для пограничных вычислений, необходимо использовать последние версии [SQL Server Management Studio](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms) и [SQL Server Data Tools](https://docs.microsoft.com/sql/ssdt/download-sql-server-data-tools-ssdt).  

## <a name="remarks"></a>Remarks

- Репликацию можно настроить с помощью [SQL Server Management Studio](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms) или путем выполнения инструкций Transact-SQL в издателе с помощью SQL Server Management Studio или [Azure Database Studio](https://docs.microsoft.com/sql/azure-data-studio/download-azure-data-studio).
- Чтобы подключиться к экземпляру SQL Azure для пограничных вычислений, во время репликации могут использоваться только имена входа для аутентификации SQL Azure.
- У реплицируемых таблиц должен быть первичный ключ.
- Одна публикация на сервере SQL Server может поддерживать подписчиков и SQL Azure для пограничных вычислений, и SQL Server (локально и SQL Server на виртуальной машине Azure).  
- Управление репликацией, ее мониторинг и устранение неполадок должны выполняться на локальном SQL Server.  
- В SQL Azure для пограничных вычислений поддерживаются только принудительные подписки.  
- В **sp_addsubscription** для SQL Azure для пограничных вычислений поддерживается только `@subscriber_type = 0`.  
- SQL Azure для пограничных вычислений не поддерживает двунаправленную, немедленную, обновляемую или одноранговую репликацию.
- SQL Azure для пограничных вычислений поддерживает только подмножество функций, доступных в SQL Server или Управляемом экземпляре Базы данных SQL Azure, так как такая попытка репликации базы данных (или объектов в ней), которая содержит одну или несколько неподдерживаемых функций, приведет к сбою. Например, попытка репликации базы данных, содержащей объекты с пространственными типами данных, приведет к ошибке. Дополнительные сведения см. в статье [Функции, поддерживаемые SQL Azure для пограничных вычислений](features.md).

## <a name="scenarios"></a>Сценарии  

### <a name="initializing-reference-data-on-an-edge-instance"></a>Инициализация эталонных данных на экземпляре Edge

Общим сценарием, в котором репликация может быть полезна, является ситуация, когда существует необходимость инициализировать пограничный экземпляр с помощью эталонных данных, которые со временем изменяются. Например, обновление моделей ML на экземпляре Edge после обучения на локальном экземпляре SQL Server.

1. Создайте публикацию репликации транзакций в базе данных на локальном сервере SQL Server.  
2. На локальном сервере SQL Server используйте **мастер создания подписок** или инструкции Transact-SQL, чтобы создать принудительную подписку на SQL Azure для пограничных вычислений.  
3. Реплицированную базу данных в SQL Azure для пограничных вычислений можно инициализировать с помощью моментального снимка, созданного агентом моментальных снимков и распределенного и доставленного агентом распространителя, или с помощью резервной копии базы данных на издателе. Опять же, если резервная копия базы данных содержит объекты и функции, которые не поддерживаются SQL Azure для пограничных вычислений, операция восстановления завершится ошибкой.

## <a name="limitations"></a>Ограничения

В подписках SQL Azure для пограничных вычислений не поддерживаются следующие действия:

- копирование сопоставления групп файлов;  
- копирование схем секционирования таблиц;  
- копирование схем секционирования индексов;  
- копирование определяемой пользователем статистики;  
- копирование привязок по умолчанию;  
- копирование привязок правил;  
- копирование полнотекстовых индексов;  
- копирование XSD XML;  
- копирование XML-индексов;  
- копирование разрешений.  
- копирование пространственных индексов;  
- копирование фильтруемых индексов;  
- копирование атрибута сжатия данных;  
- копирование атрибута разреженного столбца;  
- копирование типов данных файлового потока, иерархии или пространственных данных.
- копирование hierarchyid в типы данных MAX;  
- копирование пространственных типов в типы данных MAX;  
- копирование расширенных свойств;  
- копирование разрешений.  

## <a name="examples"></a>Примеры

Создайте публикацию и принудительную подписку. Дополнительные сведения см. в разделе:
  
- [Create a Publication](https://docs.microsoft.com/sql/relational-databases/replication/publish/create-a-publication)
- [Создайте принудительную подписку](https://docs.microsoft.com/sql/relational-databases/replication/create-a-push-subscription/), используя имя или IP-адрес сервера SQL Azure для пограничных вычислений в качестве подписчика (например, **myEdgeinstance,1433**) и имя базы данных в экземпляре SQL Azure для пограничных вычислений в качестве целевой базы данных (например, **AdventureWorks**).  

## <a name="see-also"></a>См. также раздел  

- [Create a Publication](https://docs.microsoft.com/sql/relational-databases/replication/publish/create-a-publication)
- [Создание принудительной подписки](https://docs.microsoft.com/sql/relational-databases/replication/create-a-push-subscription/)
- [Типы репликации](https://docs.microsoft.com/sql/relational-databases/replication/types-of-replication)
- [Мониторинг (репликация)](https://docs.microsoft.com/sql/relational-databases/replication/monitor/monitoring-replication)
- [Инициализация подписки](https://docs.microsoft.com/sql/relational-databases/replication/initialize-a-subscription)  


