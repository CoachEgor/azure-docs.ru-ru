---
title: Создание фабрики образа в Azure DevTest Labs | Документация Майкрософт
description: Узнайте, как создать фабрику пользовательского образа в Azure DevTest Labs.
services: devtest-lab, lab-services
documentationcenter: na
author: spelluru
manager: femila
ms.service: lab-services
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/25/2019
ms.author: spelluru
ms.openlocfilehash: cf1bb31614c04d6073bc40c510fc43b2f8e4e189
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60622649"
---
# <a name="create-a-custom-image-factory-in-azure-devtest-labs"></a>Создание фабрики пользовательского образа в Azure DevTest Labs
В этой статье показано, как настроить фабрику пользовательского образа, используя примеры сценариев, доступных в [репозиторий Git](https://github.com/Azure/azure-devtestlab/tree/master/samples/DevTestLabs/Scripts/ImageFactory).

## <a name="whats-an-image-factory"></a>Что такое фабрика образов?
Фабрика образов — это решение конфигурация как код, который создает и распространяет образы автоматически на регулярной основе с требуемой конфигурации. Образы в фабрике изображения всегда доступны актуальные и текущего обслуживания практически нулевой после весь процесс выполняется автоматически. И, поскольку все необходимые конфигурации уже находятся в образе, они сокращают время, от настройки системы вручную после создания виртуальной Машины с базовой ОС.

Значительные сочетания клавиш для получения рабочего стола разработчика к состоянию готовности в DevTest Labs использует пользовательские образы. Недостатком пользовательских образов — это ряд дополнительных для поддержания в лаборатории. Например срок действия пробной версии продуктов со временем (или) недавно выпущенных обновлений не применяются, который принудительно нам приходится периодически обновлять пользовательский образ. Фабрику образ у вас есть определение изображения, возвращен в систему управления исходным кодом и применяется автоматический процесс для создания пользовательских образов на основе определения.

Решение позволяет скорость создания виртуальных машин на основе пользовательских образов, устраняя дополнительных текущие расходы на обслуживание. С помощью этого решения можно автоматически создавать пользовательские образы, распространения на других DevTest Labs и прекращения использования старые изображения. В следующем видео вы узнаете о фабрике образов и как это реализуется с помощью DevTest Labs.  Все сценарии Azure Powershell свободно доступен и расположен здесь: [ https://aka.ms/dtlimagefactory ](https://aka.ms/dtlimagefactory).

<br/>

> [!VIDEO https://channel9.msdn.com/Blogs/Azure/Custom-Image-Factory-with-Azure-DevTest-Labs/player]


## <a name="high-level-view-of-the-solution"></a>Высокоуровневый обзор решения
Решение позволяет скорость создания виртуальных машин на основе пользовательских образов, устраняя дополнительных текущие расходы на обслуживание. С помощью этого решения можно автоматически создавать пользовательские образы и распространения на других DevTest Labs. Используйте DevOps в Azure (прежнее название — Visual Studio Team Services) в качестве механизма оркестрации для автоматизации всех операций в DevTest Labs.

![Высокоуровневый обзор решения](./media/create-image-factory/high-level-view-of-solution.png)

Существует [расширения VSTS для DevTest Labs](https://marketplace.visualstudio.com/items?itemName=ms-azuredevtestlabs.tasks) , позволяющий выполнить эти отдельные действия:

- Создание пользовательского образа
- Создать VM
- Удаление виртуальной Машины
- Создание среды
- Удаление среды
- Заполнение среды

С помощью расширения DevTest Labs — это простой способ приступить к работе с автоматическое создание пользовательских образов в лаборатории.

Нет альтернативной реализации с помощью сценария PowerShell для более сложных сценариях. С помощью PowerShell, можно полностью автоматизировать фабрику образов, в соответствии с DevTest Labs, который может использоваться в процессе непрерывной интеграции и непрерывной поставки (CI/CD) цепочки инструментов. Это следующие принципы, за которой в этом альтернативное решение.

- Общие обновления следует не требуют изменений для фабрики образов. (например, Добавление нового типа из пользовательского образа, автоматическое прекращение использования старого изображений, добавление новых «конечной точки» DevTest Labs для получения пользовательских образов и т. д.)
- Общие изменения, обеспечиваются системы управления исходным кодом (инфраструктура как код)
- Лаборатория для получения пользовательских образов может оказаться в одной подписке Azure (labs охватывать несколько подписок)
- Скрипты PowerShell должно быть многократного использования, поэтому мы можете запустить дополнительные фабрик при необходимости

## <a name="next-steps"></a>Дальнейшие действия
Перейти к следующей статье в этом разделе: [Запустите фабрику образов из Azure DevOps](image-factory-set-up-devops-lab.md)
