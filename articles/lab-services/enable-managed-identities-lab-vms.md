---
title: Включение управляемых удостоверений на виртуальных машинах лаборатории в Azure DevTest Labs
description: В этой статье показано, как владелец лаборатории может включить управляемые пользователем удостоверения на виртуальных машинах лаборатории.
services: lab-services
documentationcenter: na
author: spelluru
manager: ''
editor: ''
ms.service: lab-services
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/03/2020
ms.author: spelluru
ms.openlocfilehash: 5d70f83babcf53249f581230e72326d99a0533d6
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "75692671"
---
# <a name="enable-user-assigned-managed-identities-on-lab-virtual-machines-in-azure-devtest-labs"></a>Включение назначенных пользователем управляемых удостоверений на виртуальных машинах лаборатории в Azure DevTest Labs
Как владелец лаборатории вы можете включить управляемые пользователем удостоверения на виртуальных машинах лаборатории в Azure DevTest Labs.

Управляемое удостоверение может использоваться для проверки подлинности любой службы, поддерживающей проверку подлинности Azure Active Directory (AD), включая Key Vault, без передачи учетных данных в код. Дополнительные сведения об управляемых удостоверениях см. в статье [что такое управляемые удостоверения для ресурсов Azure?](../active-directory/managed-identities-azure-resources/overview.md).

С помощью этой функции пользователи лаборатории могут совместно использовать ресурсы Azure, такие как база данных SQL Azure, в контексте лаборатории. Проверка подлинности ресурса осуществляется с учетом самого удостоверения. После настройки каждая существующая или только что созданная виртуальная машина лаборатории будет включена с этим удостоверением. Пользователи лаборатории могут получить доступ к ресурсам после входа на компьютеры.

> [!NOTE]
> Вы можете добавить несколько управляемых пользователем удостоверений, которые будут включены на виртуальных машинах лаборатории.

## <a name="use-azure-portal"></a>Использование портала Azure
Чтобы добавить управляемое удостоверение, назначенное пользователем для виртуальных машин лаборатории, выполните следующие действия.

1. [Создание управляемого удостоверения, назначенного пользователем в подписке](../active-directory/managed-identities-azure-resources/how-to-manage-ua-identity-portal.md#create-a-user-assigned-managed-identity)
1. Перейдите на страницу **Конфигурация и политики** для своей лаборатории.
2. В меню слева выберите **Идентификация (Предварительная версия)** .
3. Перейдите на вкладку **Виртуальная машина** .
4. Нажмите кнопку **Добавить** , чтобы выбрать существующее удостоверение из предварительно заполненного раскрывающегося списка. 

    ![Кнопка "добавить удостоверение"](./media/enable-managed-identities-lab-vms/add-identity-button.png)
5. Выберите существующее **удостоверение, управляемое пользователем** , из раскрывающегося списка и нажмите кнопку **ОК**. 

    ![Добавить удостоверение](./media/enable-managed-identities-lab-vms/add-identity.png)

## <a name="use-api"></a>Использовать API

1.  После создания удостоверения запишите идентификатор ресурса удостоверения. Он должен выглядеть, как в следующем примере: 

    `/subscriptions/0000000000-0000-0000-0000-00000000000000/resourceGroups/<RESOURCE GROUP NAME> /providers/Microsoft.ManagedIdentity/userAssignedIdentities/<NAME of USER IDENTITY>`.
2. Выполните метод размещения HTTPS, чтобы добавить новый ресурс **сервицеруннер** в лабораторию, как показано в следующем примере. 

    Ресурс "средство запуска службы" — это прокси-ресурс для управления управляемыми удостоверениями и управления ими в DevTest Labs. Имя средства запуска службы может быть любым допустимым именем, но мы рекомендуем использовать имя управляемого ресурса удостоверений.

    ```json
    {
        "identity": {
            "type": "userAssigned",
            "userAssignedIdentities": { 
                "[userAssignedIdentityResourceId]": {}
            }
            },
        "location": "southeastasia",
        "properties": {
            "identityUsageType": "VirtualMachine"
        }
    }
    ```

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения об управляемых удостоверениях см. в статье [что такое управляемые удостоверения для ресурсов Azure?](../active-directory/managed-identities-azure-resources/overview.md).







