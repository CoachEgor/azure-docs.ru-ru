---
title: Поддержка Azure Resource Manager для Load Balancer
description: В этой статье используйте Azure PowerShell и шаблоны с Azure Load Balancer
services: load-balancer
documentationcenter: na
author: asudbring
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/19/2019
ms.author: allensu
ms.openlocfilehash: 57a60a65dee995695224aa1b451e848ea8768ab1
ms.sourcegitcommit: d6b68b907e5158b451239e4c09bb55eccb5fef89
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2019
ms.locfileid: "74215391"
---
# <a name="azure-resource-manager-support-with-azure-load-balancer"></a>Поддержка Azure Resource Manager с Azure Load Balancer



Azure Resource Manager представляет собой предпочтительную платформу управления для служб в Azure. Теперь Azure Load Balancer можно управлять с помощью интерфейсов API и инструментов на основе Azure Resource Manager.

## <a name="concepts"></a>Основные понятия

Azure Load Balancer с Resource Manager содержит следующие дочерние ресурсы.

* IP-конфигурация внешнего интерфейса — балансировщик нагрузки может включать один или несколько внешних IP-адресов, которые в противном случае называются виртуальными IP-адресами (VIP). Такие IP-адреса обеспечивают поступление трафика.
* Пул внутренних адресов. Этот пул представляет собой коллекцию IP-адресов, связанных с сетевым адаптером виртуальной машины, для которого распространяется нагрузка.
* Правила балансировки нагрузки — свойство правила сопоставляет заданную комбинацию внешнего IP-адреса и порта с набором внутренних IP-адресов и портов. Одна подсистема балансировки нагрузки может иметь несколько правил балансировки нагрузки. Каждое правило представляет собой комбинацию внешнего IP-адреса и порта, а также серверный IP-адрес и порт, связанные с виртуальными машинами.
* Пробы: пробы позволяют отслеживать работоспособность экземпляров виртуальных машин. В случае сбоя пробы работоспособности экземпляр виртуальной машины автоматически перестает использоваться.
* Правила NAT для входящего трафика — правила NAT, определяющие входящий трафик, исходящий через интерфейсный IP-адрес и распространяемый на IP-адрес серверной части.

![](./media/load-balancer-arm/load-balancer-arm.png)

## <a name="quickstart-templates"></a>Шаблоны быстрого запуска

Диспетчер ресурсов Azure позволяет подготавливать приложения с помощью декларативного шаблона. В одном шаблоне можно развернуть несколько служб и их зависимые компоненты. Один шаблон используется для развертывания приложения на каждом этапе его жизненного цикла.

Шаблоны могут включать определения для:
* **Виртуальные машины**
* **Виртуальные сети**
* **Группы доступности**
* **Сетевые интерфейсы (NIC)**
* **учетные записи хранения;**
* **Балансировка нагрузки**
* **Группы безопасности сети**
* **Общедоступные IP-адреса.** 

С помощью шаблонов можно создать все необходимое для сложного приложения. Файл шаблона можно вернуть в систему управления содержимым, чтобы обеспечить управление версиями и возможность совместной работы.

[Дополнительные сведения о шаблонах](../azure-resource-manager/resource-manager-template-walkthrough.md)

[Дополнительные сведения о сетевых ресурсах](../networking/networking-overview.md)

Шаблоны быстрого запуска с использованием Azure Load Balancer см. в [репозитории GitHub](https://github.com/Azure/azure-quickstart-templates) , где размещается набор шаблонов, созданных сообществом.

Примеры шаблонов:

* [2 ВМ в подсистеме балансировки нагрузки и правила балансировки нагрузки](https://go.microsoft.com/fwlink/?LinkId=544799)
* [2 виртуальные машины в виртуальной сети с внутренними Load Balancer и правилами подсистемы балансировки нагрузки](https://go.microsoft.com/fwlink/?LinkId=544800)
* [2 виртуальные машины в подсистеме балансировки нагрузки и настройка правил NAT для нагрузки](https://go.microsoft.com/fwlink/?LinkId=544801)

## <a name="setting-up-azure-load-balancer-with-a-powershell-or-cli"></a>Настройка балансировки нагрузки Azure с помощью PowerShell или интерфейса командной строки

Начало работы с командлетами Azure Resource Manager, программами командной строки и интерфейсами API

* [Сетевые командлеты Azure](https://docs.microsoft.com/powershell/module/az.network#networking) можно использовать для создания подсистемы балансировки нагрузки.
* [Создание подсистемы балансировки нагрузки с помощью диспетчера ресурсов Azure](load-balancer-get-started-ilb-arm-ps.md)
* [Использование Azure CLI с диспетчером ресурсов Azure (ARM)](../xplat-cli-azure-resource-manager.md)
* [Интерфейсы API REST подсистемы балансировки нагрузки](https://msdn.microsoft.com/library/azure/mt163651.aspx)

## <a name="next-steps"></a>Дополнительная информация

Начните [создавать балансировщик нагрузки для Интернета](load-balancer-get-started-internet-arm-ps.md) и настройте тип [режима распределения](load-balancer-distribution-mode.md) для конкретного поведения сетевого трафика.

Узнайте, как управлять [временем ожидания простоя TCP для балансировщика нагрузки](load-balancer-tcp-idle-timeout.md). Эти параметры важны, если приложению требуется поддерживать подключения для серверов за пределами балансировщика нагрузки.
