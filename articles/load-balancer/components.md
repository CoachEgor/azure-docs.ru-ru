---
title: Компоненты Azure Load Balancer
description: Общие сведения о компонентах Azure Load Balancer
services: load-balancer
documentationcenter: na
author: asudbring
ms.service: load-balancer
ms.devlang: na
ms.topic: overview
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/30/2020
ms.author: allensu
ms.openlocfilehash: 4a84c43b57ec4f632a2bfabb10d112e4975249bf
ms.sourcegitcommit: 4499035f03e7a8fb40f5cff616eb01753b986278
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2020
ms.locfileid: "82733113"
---
# <a name="azure-load-balancer-components"></a>Компоненты Azure Load Balancer

Azure Load Balancer содержит несколько ключевых компонентов для работы. Эти компоненты можно настроить в подписке с помощью портала Azure, Azure CLI, Azure PowerShell или шаблонов.

## <a name="frontend-ip-configurations"></a>Интерфейсные IP-конфигурации

IP-адрес экземпляра Load Balancer. Это точка взаимодействия с клиентами. Эти адреса могут быть, например:

- **Общедоступный IP-адрес**
- **Частные IP-адреса**

Выбор IP-адреса определяет **тип** создаваемой подсистемы балансировки нагрузки. Если выбрать частный IP-адрес, создается внутренняя подсистема балансировки нагрузки. Если выбрать общедоступный IP-адрес, создается общедоступная подсистема балансировки нагрузки.

|  | Общедоступная подсистема балансировки нагрузки  | Внутренний балансировщик нагрузки |
| ---------- | ---------- | ---------- |
| Конфигурация IP внешнего интерфейса| Общедоступный IP-адрес | Частный IP-адрес|
| Описание | Общедоступная подсистема балансировки нагрузки сопоставляет общедоступный IP-адрес и порт входящего трафика с частным IP-адресом и портом виртуальной машины. Ответный трафик от виртуальной машины сопоставляется подсистемой балансировки нагрузки обратным образом. Применяя правила балансировки нагрузки, можно распределять определенные типы трафика между несколькими виртуальными машинами или службами. Например, можно распределить нагрузку от трафика веб-запросов на несколько веб-серверов.| Внутренняя подсистема балансировки нагрузки распределяет трафик между ресурсами, находящимися в виртуальной сети. Azure ограничивает доступ к интерфейсным IP-адресам виртуальной сети, к которым применяется балансировка нагрузки. IP-адреса внешнего интерфейса и виртуальные сети никогда не предоставляются напрямую конечной точке Интернета. Внутренние бизнес-приложения выполняются в Azure и доступны из Azure или из локальных ресурсов. |
| Поддерживаемые номера SKU | "Базовый", "Стандартный" | "Базовый", "Стандартный" |

![Пример многоуровневой подсистемы балансировки нагрузки](./media/load-balancer-overview/load-balancer.png)

## <a name="backend-pool"></a>Серверный пул

Группа виртуальных машин или экземпляров в масштабируемом наборе виртуальных машин, которая обрабатывает входящий запрос. Для экономичного масштабирования до больших объемов входящего трафика обычно рекомендуется добавить дополнительные экземпляры в серверный пул. 

Load Balancer мгновенно изменяет свою конфигурацию при вертикальном увеличении или уменьшении масштаба для числа экземпляров. Добавление или удаление виртуальных машин из серверного пула перенастраивает подсистему балансировки нагрузки без дополнительных операций. Область серверного пула — это любая виртуальная машина в виртуальной сети. 

Вы можете спроектировать серверный пул, содержащий наименьшее количество ресурсов, чтобы оптимизировать длительность операций управления. Нет никаких различий в производительности или масштабировании плоскости данных.

## <a name="health-probes"></a>Пробы работоспособности

Пробы работоспособности помогают определить работоспособность экземпляров в серверном пуле. Вы можете настроить для проб работоспособности пороговое значение состояния неработоспособности. Если проверка не отвечает, балансировщик нагрузки Azure прекращает отправлять новое подключение неработоспособным экземплярам. Сбой пробы не влияет на существующие подключения. Подключение будет продолжаться до следующего приложения:

- завершает последовательность;
- появляется время ожидания простоя;
- виртуальная машина завершает работу.

Load Balancer предоставляет разные типы проверки работоспособности для конечных точек:

- TCP
- HTTP
- HTTPS

Подсистема балансировки нагрузки (номер SKU "Базовый") не поддерживает пробы работоспособности по протоколу HTTPS. Кроме того, подсистема балансировки нагрузки (номер SKU "Базовый") будет закрывать все TCP-подключения (включая установленные).

## <a name="load-balancing-rules"></a>Правила балансировки нагрузки

От правил балансировки нагрузки зависят действия, выполняемые подсистемой балансировки нагрузки. Правило балансировки нагрузки сопоставляет каждую отдельную интерфейсную IP-конфигурацию и порт с несколькими внутренними IP-адресами и портами.

## <a name="inbound-nat-rules"></a>Правила преобразования сетевых адресов для входящих подключений

Согласно правилам преобразования сетевых адресов (NAT) для входящего трафика, трафик с интерфейсного IP-адреса переадресовывается на внутренний экземпляр в виртуальной сети. К перенаправлению портов применяется такое же распределение на основе хэша, что и для балансировки нагрузки. 

Например, сеансы протокола удаленного рабочего стола (RDP) или Secure Shell (SSH) можно использовать для разделения экземпляров виртуальных машин в виртуальной сети. Несколько внутренних конечных точек можно сопоставить с портами в том же интерфейсном IP-адресе. Интерфейсные IP-адреса можно использовать для удаленного администрирования виртуальных машин без дополнительного инсталляционного сервера.

## <a name="outbound-rules"></a>Правила для исходящего трафика

Правило для исходящего трафика позволяет настроить преобразование сетевых адресов (NAT) для всех виртуальных машин или экземпляров, которые входят в серверный пул.

Подсистема балансировки нагрузки (номер SKU "Базовый") не поддерживает правила для исходящего трафика.
![Подсистема балансировщика нагрузки Azure](./media/load-balancer-overview/load-balancer-overview.png)

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы приступить к работе с Load Balancer, см. [Create a public Standard Load Balancer](quickstart-load-balancer-standard-public-portal.md) (Создание общедоступного Load Balancer (цен. категория "Стандартный")).
- [Дополнительные сведения об Azure Load Balancer](load-balancer-overview.md).
- Сведения об [общедоступном IP-адресе](https://docs.microsoft.com/azure/virtual-network/virtual-network-public-ip-address).
- Сведения о [частном IP-адресе](https://docs.microsoft.com/azure/virtual-network/virtual-network-ip-addresses-overview-arm#private-ip-addresses).
- Дополнительные сведения о [Load Balancer (цен. категория "Стандартный") и зонах доступности](load-balancer-standard-availability-zones.md).
- [Metrics and health diagnostics for Standard Load Balancer](load-balancer-standard-diagnostics.md) (Метрики и проверки работоспособности Load Balancer уровня "Стандартный")
- Сведения о [сбросе TCP-подключений при простое](load-balancer-tcp-reset.md).
- Дополнительные сведения об [использовании Load Balancer (цен. категория "Стандартный") с правилами балансировки нагрузки портов высокого уровня доступности](load-balancer-ha-ports-overview.md).
- Дополнительные сведения об [использовании Load Balancer с несколькими внешними интерфейсами](load-balancer-multivip-overview.md).
- Узнайте больше о [группах безопасности сети](../virtual-network/security-overview.md).
- Сведения о [типах проб](load-balancer-custom-probe-overview.md#types).
- Дополнительные сведения об [ограничениях подсистемы балансировки нагрузки](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits#load-balancer).
- Сведения об использовании [перенаправления портов](https://docs.microsoft.com/azure/load-balancer/tutorial-load-balancer-port-forwarding-portal).
- Дополнительные сведения о [правилах для исходящего трафика подсистемы балансировки нагрузки](https://docs.microsoft.com/azure/load-balancer/load-balancer-outbound-rules-overview).
