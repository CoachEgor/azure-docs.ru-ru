---
title: Защита рабочей области синапсе (Предварительная версия)
description: Из этой статьи вы узнаете, как использовать роли и контроль доступа для управления действиями и доступом к данным в рабочей области синапсе.
services: synapse-analytics
author: matt1883
ms.service: synapse-analytics
ms.topic: how-to
ms.subservice: ''
ms.date: 04/15/2020
ms.author: mahi
ms.reviewer: jrasnick
ms.openlocfilehash: ae8be848b5d12e01865fe6bd3b394b460252aa3e
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "81606005"
---
# <a name="secure-your-synapse-workspace-preview"></a>Защита рабочей области синапсе (Предварительная версия)

Из этой статьи вы узнаете, как использовать роли и контроль доступа для управления действиями и доступом к данным. Следуя этим инструкциям, можно упростить управление доступом в Azure синапсе Analytics. Добавлять и удалять пользователей необходимо только для одной из трех групп безопасности.

## <a name="overview"></a>Обзор

Чтобы защитить рабочую область синапсе (Предварительная версия), необходимо выполнить шаблон настройки следующих элементов:

- Роли Azure (такие как «владелец», «участник» и т. д.);
- Роли синапсе — эти роли уникальны для синапсе и не основаны на ролях Azure. Существует три из этих ролей:
  - Администратор рабочей области синапсе
  - Синапсе SQL Admin
  - Администратор синапсе Spark
- Контроль доступа для данных в Azure Data Lake Storage Gen 2 (ADLSGEN2).
- Управление доступом для баз данных синапсе SQL и Spark

## <a name="steps-to-secure-a-synapse-workspace"></a>Действия по обеспечению безопасности рабочей области синапсе

В этом документе для упрощения инструкций используются стандартные имена. Замените их любыми именами по своему усмотрению.

|Параметр | Пример значения | Описание |
| :------ | :-------------- | :---------- |
| **Рабочая область синапсе** | WS1 |  Имя, которое будет иметь Рабочая область синапсе. |
| **Учетная запись ADLSGEN2** | STG1 | Учетная запись ADLS для использования с рабочей областью. |
| **Контейнер** | CNT1 | Контейнер в STG1, который будет использоваться по умолчанию рабочей областью. |
| **Клиент Active Directory** | contoso | имя клиента Active Directory.|
||||

## <a name="step-1-set-up-security-groups"></a>Шаг 1. Настройка групп безопасности

Создайте и заполните три группы безопасности для рабочей области:

- **WS1\_всадминс** — для пользователей, которым необходим полный контроль над рабочей областью.
- **WS1\_спаркадминс** — для тех пользователей, которым необходим полный контроль над аспектами Spark рабочей области.
- **WS1\_складминс** — для пользователей, которым необходим полный контроль над аспектами SQL рабочей области.
- Добавление **WS1\_всадминс** в **WS1\_складминс**
- Добавление **WS1\_всадминс** в **WS1\_спаркадминс**

## <a name="step-2-prepare-your-data-lake-storage-gen2-account"></a>Шаг 2. Подготовка учетной записи Data Lake Storage 2-го поколения

Найдите эти сведения о вашем хранилище:

- Учетная запись ADLSGEN2, используемая для рабочей области. Этот документ вызывает STG1.  STG1 считается первичной учетной записью хранения для вашей рабочей области.
- Контейнер в WS1, который будет использоваться рабочей областью синапсе по умолчанию. Этот документ вызывает CNT1.  Этот контейнер используется для:
  - Хранение резервных файлов данных для таблиц Spark
  - Журналы выполнения для заданий Spark

- С помощью портал Azure назначьте группам безопасности следующие роли в CNT1

  - Назначение **Всадминс\_WS1** роли **участника данных BLOB-объекта хранилища**
  - Назначение **Спаркадминс\_WS1** роли **участника данных BLOB-объекта хранилища**
  - Назначение **Складминс\_WS1** роли **участника данных BLOB-объекта хранилища**

## <a name="step-3-create-and-configure-your-synapse-workspace"></a>Шаг 3. Создание и Настройка рабочей области синапсе

В портал Azure создайте рабочую область синапсе:

- Назовите рабочую область WS1
- Выберите STG1 для учетной записи хранения.
- Выберите CNT1 для контейнера, который используется в качестве файловой системы.
- Открытие WS1 в синапсе Studio
- Выберите **Управление** > **доступом** назначить группы безопасности следующим ролям синапсе.
  - Назначение **WS1\_Всадминс** администраторам рабочей области синапсе
  - Назначение **WS1\_Спаркадминс** администраторам синапсе Spark
  - Назначение **WS1\_Складминс** администраторам синапсе SQL

## <a name="step-4-configuring-data-lake-storage-gen2-for-use-by-synapse-workspace"></a>Шаг 4. Настройка Data Lake Storage 2-го поколения для использования рабочей областью синапсе

Рабочей области синапсе требуется доступ к STG1 и CNT1, чтобы она могла выполнять конвейеры и выполнять системные задачи.

- Откройте портал Azure.
- Обнаружение STG1
- Перейдите по адресу CNT1
- Убедитесь, что MSI (Управляемое удостоверение службы) для WS1 назначен роли **участника данных BLOB-объекта Azure** в CNT1
  - Если она не отображается, назначьте ее.
  - Имя MSI совпадает с именем рабочей области. В этом случае это будет &quot;WS1.&quot;

## <a name="step-5-configure-admin-access-for-sql-pools"></a>Шаг 5. Настройка административного доступа для пулов SQL

- Откройте портал Azure.
- Перейдите по адресу WS1
- В разделе **Параметры**щелкните **SQL Active Directory администратор** .
- Щелкните **задать администратора** и выберите WS1\_складминс.

## <a name="step-6-maintaining-access-control"></a>Шаг 6. поддержание контроля доступа

Настройка завершена.

Теперь для управления доступом пользователей можно добавлять пользователей в три группы безопасности и удалять их.

Хотя вы можете вручную назначить пользователей ролям синапсе, в противном случае она не будет настроена согласованно. Вместо этого добавляйте или удаляйте пользователей только в группы безопасности.

## <a name="step-7-verify-access-for-users-in-the-roles"></a>Шаг 7. Проверка доступа для пользователей в ролях

Пользователям в каждой роли необходимо выполнить следующие действия.

|   | Шаг | Администраторы рабочей области | Администраторы Spark | Администраторы SQL |
| --- | --- | --- | --- | --- |
| 1 | Отправка файла Parquet в CNT1 | YES | YES | YES |
| 2 | Чтение файла Parquet с помощью SQL по запросу | YES | NO | YES |
| 3 | Создание пула Spark | ДА [1] | ДА [1] | NO  |
| 4 | Чтение файла Parquet с записной книжкой | YES | YES | NO |
| 5 | Создать конвейер из записной книжки и запустить конвейер для выполнения сейчас | YES | NO | NO |
| 6 | Создание пула SQL и выполнение сценария SQL, например &quot;SELECT 1&quot; | ДА [1] | NO | ДА [1] |

> [!NOTE]
> [1] для создания пулов SQL или Spark пользователь должен иметь по крайней мере роль участника в рабочей области синапсе.
> [!TIP]
>
> - Некоторые шаги намеренно не будут разрешены в зависимости от роли.
> - Помните, что некоторые задачи могут завершиться ошибкой, если безопасность не была полностью настроена. Эти задачи указаны в таблице.

## <a name="step-8-network-security"></a>Шаг 8. Сетевая безопасность

Настройка брандмауэра рабочей области, виртуальной сети и [частной связи](../../sql-database/sql-database-private-endpoint-overview.md).

## <a name="step-9-completion"></a>Шаг 9. Завершение

Теперь ваша рабочая область полностью настроена и защищена.

## <a name="how-roles-interact-with-synapse-studio"></a>Взаимодействие ролей с синапсе Studio

Синапсе Studio ведет себя по-разному на основе ролей пользователей. Некоторые элементы могут быть скрыты или отключены, если пользователь не назначен ролям, которые предоставляют соответствующий доступ. В следующей таблице приводится сводка влияния на синапсе Studio.

| Задача | Администраторы рабочей области | Администраторы Spark | Администраторы SQL |
| --- | --- | --- | --- |
| Открыть синапсе Studio | YES | YES | YES |
| Просмотреть домашний центр | YES | YES | YES |
| Просмотр концентратора данных | YES | YES | YES |
| Центр данных: см. связанные учетные записи ADLSGen2 и контейнеры | ДА [1] | ДА [1] | ДА [1] |
| Концентратор данных/см. базы данных | YES | YES | YES |
| Концентратор данных/Просмотр объектов в базах данных | YES | YES | YES |
| Данные концентратора данных и доступа к ним в базах данных пула SQL | YES   | NO   | YES   |
| Данные концентратора данных и доступ к ним в базах данных SQL по запросу | ДА [2]  | NO  | ДА [2]  |
| Доступ к данным в базах данных Spark и Data Hub | ДА [2] | ДА [2] | ДА [2] |
| Использование центра разработки | YES | YES | YES |
| Разработка скриптов SQL для центра/автора | YES | NO | YES |
| Разработка определений заданий Spark для центра/автора | YES | YES | NO |
| Разработка записных книжек для центра или автора | YES | YES | NO |
| Разработка потоков данных центра/создателя | YES | NO | NO |
| Использование центра оркестрации | YES | YES | YES |
| Управление конвейерами концентратора и использования | YES | NO | NO |
| Использование центра управления | YES | YES | YES |
| Управление пулами концентраторов и SQL | YES | NO | YES |
| Управление пулами концентраторов и Spark | YES | YES | NO |
| Управление концентратором и триггерами | YES | NO | NO |
| Управление центрами и связанными службами | YES | YES | YES |
| Управление концентратором и доступом (назначение пользователей для ролей рабочей области синапсе) | YES | NO | NO |
| Управление центрами и средами выполнения интеграции | YES | YES | YES |

> [!NOTE]
> [1] доступ к данным в контейнерах зависит от контроля доступа в таблицах SQL OD ADLSGen2 [2], а таблицы Spark хранят свои данные в ADLSGen2. для доступа требуются соответствующие разрешения на ADLSGen2.

## <a name="next-steps"></a>Дальнейшие шаги

Создание [рабочей области синапсе](../quickstart-create-workspace.md)
