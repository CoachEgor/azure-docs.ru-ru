---
title: Защищайте рабочее пространство Synapse (предварительный просмотр)
description: Эта статья научит вас, как использовать роли и контроль доступа для управления действиями и доступом к данным в рабочем пространстве Synapse.
services: synapse-analytics
author: matt1883
ms.service: synapse-analytics
ms.topic: how-to
ms.subservice: ''
ms.date: 04/15/2020
ms.author: mahi
ms.reviewer: jrasnick
ms.openlocfilehash: 94699f2153fa8d1df3ab85c184f32792c7ae0b59
ms.sourcegitcommit: b80aafd2c71d7366838811e92bd234ddbab507b6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81428879"
---
# <a name="secure-your-synapse-workspace-preview"></a>Защищайте рабочее пространство Synapse (предварительный просмотр)

Эта статья научит вас, как использовать роли и контроль доступа для управления действиями и доступом к данным. Следуя этим инструкциям, контроль доступа в Azure Synapse Analytics упрощается. Вам нужно только добавить и удалить пользователей в одну из трех групп безопасности.

## <a name="overview"></a>Обзор

Для обеспечения рабочего пространства Synapse (предварительный просмотр) вы будете следовать шаблону настройки следующих элементов:

- Роли Azure (например, встроенные функции, такие как Владелец, Автор и т.д.)
- Роли Synapse — эти роли уникальны для Synapse и не основаны на ролях Azure. Есть три из этих ролей:
  - Синапсе рабочего пространства админ
  - Синапсе S'L админ
  - Синапсе Искра админ
- Контроль доступа к данным в Azure Data Lake Storage Gen 2 (ADLSGEN2).
- Контроль доступа для баз данных Synapse S'L и Spark

## <a name="steps-to-secure-a-synapse-workspace"></a>Шаги для обеспечения рабочего пространства Synapse

Этот документ использует стандартные имена для упрощения инструкций. Замените их любыми именами по вашему выбору.

|Параметр | Пример значения | Описание |
| :------ | :-------------- | :---------- |
| **Рабочее пространство Synapse** | WS1 |  Имя, которое будет иметь рабочее пространство Synapse. |
| **Учетная запись ADLSGEN2** | STG1 | Учетная запись ADLS для использования в рабочем пространстве. |
| **Контейнер** | CNT1 | Контейнер в STG1, который рабочее пространство будет использовать по умолчанию. |
| **Активный арендатор каталога** | contoso | имя активного арендатора каталога.|
||||

## <a name="step-1-set-up-security-groups"></a>Шаг 1: Настройка групп безопасности

Создание и заполнение трех групп безопасности для рабочего пространства:

- **WS1\_WSAdmins** - для пользователей, которые нуждаются в полном контроле над рабочим пространством
- **WS1\_SparkAdmins** - для тех пользователей, которые нуждаются в полном контроле над аспектами Spark рабочего пространства
- **WS1\_S'LAdmins** - для пользователей, которые нуждаются в полном контроле над аспектами рабочего пространства
- Добавление **WS1\_Админс** в **WS1\_S'LAdmins**
- Добавление **WS1\_Админс** к **WS1\_SparkAdmins**

## <a name="step-2-prepare-your-data-lake-storage-gen2-account"></a>Шаг 2: Подготовьте учетную запись Data Lake Storage Gen2

Определите эту информацию о вашем хранилище:

- Учетная запись ADLSGEN2 для использования в рабочей области. Этот документ называется STG1.  STG1 считается "первичной" учетной записью хранения для рабочего пространства.
- Контейнер внутри WS1, который рабочее пространство Synapse будет использовать по умолчанию. Этот документ называется CNT1.  Этот контейнер используется для:
  - Хранение резервных файлов данных для таблиц Spark
  - Журналы исполнения для заданий Spark

- Используя портал Azure, назначайте группам безопасности следующие роли на CNT1

  - Назначить **\_WS1 WSAdmins** роли **вкладчика хранилища данных Blob**
  - Назначить **WS1\_SparkAdmins** роли **вкладчика хранилища данных**
  - Назначить **\_WS1 S'LAdmins** роли **вкладчика в хранение данных**

## <a name="step-3-create-and-configure-your-synapse-workspace"></a>Шаг 3: Создайте и назначьте рабочее пространство Synapse

На портале Azure создайте рабочее пространство Synapse:

- Назовите рабочее пространство WS1
- Выберите STG1 для учетной записи хранилища
- Выберите CNT1 для контейнера, который используется в качестве «файловой системы».
- Открыть WS1 в студии Synapse
- Выберите **Управление** > **управлением доступом,** назначайте группы безопасности следующим ролям Synapse.
  - Назначить **WS1\_WSAdmins** для synapse Рабочие помещения админс
  - Назначить **WS1\_SparkAdmins** для диминаторов Synapse Spark
  - Присвоить **WS1\_S'LAdmins** админы Synapse S'L

## <a name="step-4-configuring-data-lake-storage-gen2-for-use-by-synapse-workspace"></a>Шаг 4: Настройка хранилища данных озера Gen2 для использования рабочим пространством Synapse

Рабочее пространство Synapse нуждается в доступе к STG1 и CNT1, чтобы он мог запускать трубопроводы и выполнять системные задачи.

- Откройте портал Azure.
- Найдите STG1
- Перейдите к CNT1
- Убедитесь, что MSI для WS1 присваивается роли **вкладчика данных Azure Blob** на CNT1
  - Если вы не видите его назначенным, назначайте его.
  - MSI имеет то же имя, что и рабочее пространство. В этом случае, &quot;было&quot;бы WS1 .

## <a name="step-5-configure-admin-access-for-sql-pools"></a>Шаг 5: Настройка доступа к админ-аминдля для бассейнов S'L

- Откройте портал Azure.
- Перейдите на WS1
- В **настройках**щелкните **реч-** и
- Нажмите **На кнопку «Установить админ»** и выбрать WS1\_S'LAdmins

## <a name="step-6-maintaining-access-control"></a>Шаг 6: Поддержание контроля доступа

Конфигурация закончена.

Теперь, чтобы управлять доступом для пользователей, можно добавлять и удалять пользователей в три группы безопасности.

Хотя вы можете вручную назначить пользователей в роли Synapse, если вы делаете, он не будет настраивать вещи последовательно. Вместо этого только добавить или удалить пользователей в группы безопасности.

## <a name="step-7-verify-access-for-users-in-the-roles"></a>Шаг 7: Проверка доступа для пользователей в ролях

Пользователи в каждой роли должны выполнить следующие шаги:

|   | Шаг | Администраторы рабочей области | Искры админы | Админы СЗЛ |
| --- | --- | --- | --- | --- |
| 1 | Загрузите файл паркета в CNT1 | YES | YES | YES |
| 2 | Прочитайте паркетный файл с помощью S'L по требованию | YES | NO | YES |
| 3 | Создание пула Spark | ДА ( | ДА ( | NO  |
| 4 | Читает паркетный файл с блокнотом | YES | YES | NO |
| 5 | Создайте конвейер из ноутбука и триггер конвейер айп теперь | YES | NO | NO |
| 6 | Создайте пул для S'L и &quot;запустите скрипт S-L, такой как SELECT 1&quot; | ДА ( | NO | ДА, ДА, |

> [!NOTE]
> Для создания пулов S'L или Spark пользователь должен иметь по крайней мере роль вкладчика в рабочем пространстве Synapse.
> [!TIP]
>
> - Некоторые шаги намеренно не допускаются в зависимости от роли.
> - Имейте в виду, что некоторые задачи могут выполнить неудачу, если безопасность не была полностью настроена. Эти задачи отмечены в таблице.

## <a name="step-8-network-security"></a>Шаг 8: Сетевая безопасность

Настройка брандмауэра рабочего пространства, виртуальной сети и [private Link.](../../sql-database/sql-database-private-endpoint-overview.md)

## <a name="step-9-completion"></a>Шаг 9: Завершение

Ваше рабочее пространство теперь полностью настроено и защищено.

## <a name="how-roles-interact-with-synapse-studio"></a>Как роли взаимодействуют с Synapse Studio

Synapse Studio будет вести себя по-разному в зависимости от ролей пользователей. Некоторые элементы могут быть скрыты или отключены, если пользователь не назначен на роли, которые дают соответствующий доступ. В следующей таблице кратко излагается влияние на студию Synapse.

| Задача | Рабочие помещения для админс | Искры админы | Админы СЗЛ |
| --- | --- | --- | --- |
| Открытая синапс-студия | YES | YES | YES |
| Посмотреть домашний концентратор | YES | YES | YES |
| Просмотр концентратора данных | YES | YES | YES |
| Концентратор данных / См. связанные учетные записи и контейнеры ADLSGen2 | ДА ( | ДА, ДА, | ДА, ДА, |
| Концентратор данных / См базы данных | YES | YES | YES |
| Концентратор данных / Увидеть объекты в базах данных | YES | YES | YES |
| Концентратор данных / Данные доступа в базах данных пула S'L | YES   | NO   | YES   |
| Концентратор данных / Данные доступа в базах данных по запросу S'L | ДА (2)  | NO  | ДА (2)  |
| Концентратор данных данных данных о данных в базах данных Spark | ДА (2) | ДА (2) | ДА (2) |
| Использование концентратора разработки | YES | YES | YES |
| Разработка концентратора / автор S'L Скрипты | YES | NO | YES |
| Разработка концентратор / автор Искра Определение вакансий | YES | YES | NO |
| Разработка концентратор / автор ноутбуков | YES | YES | NO |
| Разработка концентратора / автор потоки данных | YES | NO | NO |
| Используйте концентратор оркестровки | YES | YES | YES |
| Оркестровый концентратор / использование трубопроводов | YES | NO | NO |
| Используйте концентратор управления | YES | YES | YES |
| Управление концентратором / бассейнами S'L | YES | NO | YES |
| Управление концентратор / Spark бассейны | YES | YES | NO |
| Управление концентратором / триггеры | YES | NO | NO |
| Управление концентратором / Связанными службами | YES | YES | YES |
| Управление концентратором / Управление доступом (назначить пользователям роли рабочего пространства Synapse) | YES | NO | NO |
| Управление концентратором / Время интеграции | YES | YES | YES |

> [!NOTE]
> Доступ к данным в контейнерах зависит от контроля доступа в таблицах ADLSGen2 и таблицах Spark, которые хранят свои данные в ADLSGen2, а доступ требует соответствующих разрешений на ADLSGen2.

## <a name="next-steps"></a>Дальнейшие действия

Создание [рабочего пространства Synapse](../quickstart-create-workspace.md)
