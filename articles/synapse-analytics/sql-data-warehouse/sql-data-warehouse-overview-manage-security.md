---
title: Безопасность базы данных
description: Советы по обеспечению безопасности базы данных и разработке решений в ресурсе пула S'L аналитики S'L.
services: synapse-analytics
author: julieMSFT
manager: craigg
ms.service: synapse-analytics
ms.topic: conceptual
ms.subservice: ''
ms.date: 04/17/2018
ms.author: jrasnick
ms.reviewer: igorstan
ms.custom: seo-lt-2019
tags: azure-synapse
ms.openlocfilehash: 6ae9580803563971764eec4bd18fcc2430cee06d
ms.sourcegitcommit: 8a9c54c82ab8f922be54fb2fcfd880815f25de77
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "80350205"
---
# <a name="secure-a-database-in-azure-synapse"></a>Безопасность базы данных в Azure Synapse
> [!div class="op_single_selector"]
> * [Общие сведения о безопасности](sql-data-warehouse-overview-manage-security.md)
> * [Проверка подлинности](sql-data-warehouse-authentication.md)
> * [Шифрование (портал)](sql-data-warehouse-encryption-tde.md)
> * [Шифрование (T-SQL)](sql-data-warehouse-encryption-tde-tsql.md)
> 
> 

В этой статье вы проведете основы обеспечения безопасности вашего пула S'L в рамках S'L Analytics. В частности, эта статья позволяет начать с ресурсов для ограничения доступа, защиты данных и мониторинга деятельности в базе данных, подготовленной с использованием пула S'L.

## <a name="connection-security"></a>Безопасность подключения
Под безопасностью подключения подразумеваются способы ограничения и защиты подключений к базе данных с помощью правил брандмауэра и шифрования подключения.

Правила брандмауэра используются как сервером, так и базой данных для отклонения попыток подключения с IP-адресов, которые явно не были внесены в белый список. Чтобы разрешить подключение из своего приложения или с клиентского компьютера с общедоступным IP-адресом, сначала необходимо создать правило брандмауэра уровня сервера. Для этого воспользуйтесь порталом Azure, REST API или PowerShell. 

В брандмауэре сервера рекомендуется максимально ограничить диапазоны разрешенных IP-адресов.  Чтобы получить доступ к пулу S'L с локального компьютера, убедитесь, что брандмауэр в вашей сети и локальном компьютере позволяет исходящие связи на tCP порт 1433.  

Azure Synapse Analytics использует правила IP-брандмауэра уровня сервера. Он не поддерживает правила IP-брандмауэра уровня базы данных. Для получения дополнительной [Azure SQL Database firewall rules](../../sql-database/sql-database-firewall-configure.md) информации см.

Соединения с пулом S'L шифруются по умолчанию.  Изменение параметров подключения для отключения шифрования игнорируется.

## <a name="authentication"></a>Проверка подлинности
В процессе аутентификации предлагается подтвердить личность пользователя при подключении к базе данных. В настоящее время пул с помощью s'L Server поддерживает аутентификацию серверов с именем пользователя и паролем, а также с помощью Active Directory Azure. 

При создании логического сервера для базы данных вы указали имя для входа "Администратор сервера" и пароль. Используя эти учетные данные, можно выполнить проверку подлинности SQL Server для любой базы данных на этом сервере в качестве владельца базы данных (или dbo).

Но рекомендуется, чтобы пользователи вашей организации использовали для проверки подлинности другую учетную запись. Это позволит ограничить разрешения, предоставляемые приложению, и снизить риски вредоносных действий в случае, если приложение уязвимо для атак путем внедрения кода SQL. 

Чтобы создать пользователя, прошедшего аутентификацию SQL Server, подключитесь к базе данных **master** на сервере с именем для входа администратора сервера и создайте новое имя для входа на сервер.  Это хорошая идея, чтобы также создать пользователя в основной базе данных. Это позволит пользователям входить в систему с помощью таких инструментов, как среда SSMS, без указания имени базы данных.  Кроме того, это позволяет использовать обозреватель объектов для просмотра всех баз данных в SQL Server.

```sql
-- Connect to master database and create a login
CREATE LOGIN ApplicationLogin WITH PASSWORD = 'Str0ng_password';
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

Затем подключитесь к **базе данных пула S'L** с помощью входа администратора сервера и создайте пользователя базы данных на основе созданного вами входа на сервер.

```sql
-- Connect to the database and create a database user
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

Чтобы предоставить пользователю разрешение для выполнения дополнительных операций, таких как создание имен для входа или баз данных, назначьте ему роли `Loginmanager` и `dbmanager` в базе данных master. 

Дополнительные сведения об этих дополнительных ролях и аутентификации в базе данных SQL см. в статье [Проверка подлинности и авторизация в Базе данных SQL Azure: предоставление доступа](../../sql-database/sql-database-manage-logins.md).  Для получения дополнительной информации о подключении с помощью Active Directory Azure [см. Подключение с помощью azure Active Directory Authentication.](sql-data-warehouse-authentication.md)

## <a name="authorization"></a>Авторизация
Авторизация относится к тому, что вы можете сделать в базе данных после проверки подлинности и подключения. Привилегии авторизации определяются членством в ролях и разрешениями. Обычно пользователям рекомендуется предоставлять наименьшие необходимые привилегии. Для управления ролями можно использовать следующие хранимые процедуры.

```sql
EXEC sp_addrolemember 'db_datareader', 'ApplicationUser'; -- allows ApplicationUser to read data
EXEC sp_addrolemember 'db_datawriter', 'ApplicationUser'; -- allows ApplicationUser to write data
```

Учетной записи администратора сервера, которая используется для подключения, присвоена роль db_owner, обладатель которой может выполнять любые действия в базе данных. Сохраните эту учетную запись для развертывания обновлений схемы и выполнения других действий по управлению. Для подключения к базе данных из приложения с использованием наименьших привилегий, необходимых приложению, используйте учетную запись "ApplicationUser" с более ограниченными разрешениями.

Существуют способы дальнейшего ограничения того, что пользователь может сделать в базе данных:

* Детальная настройка [разрешений](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine?view=sql-server-ver15) позволяет указать операции, которые можно выполнять с отдельными столбцами, таблицами, представлениями, схемами, процедурами и другими объектами в базе данных. Используйте детализированные разрешения для обеспечения наивысшего уровня контроля и предоставления минимальных необходимых разрешений. 
* Для создания учетных записей пользователей приложения с более широкими возможностями или учетных записей для управления с меньшим набором возможностей можно использовать [роли базы данных](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles?view=sql-server-ver15), отличные от db_datareader и db_datawriter. С помощью встроенных фиксированных ролей базы данных можно легко присваивать разрешения, однако это может привести к предоставлению лишних разрешений.
* [хранимые процедуры](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine?redirectedfrom=MSDN&view=sql-server-ver15) .

В следующем примере предоставляется доступ для чтения к определяемой пользователем схеме.
```sql
--CREATE SCHEMA Test
GRANT SELECT ON SCHEMA::Test to ApplicationUser
```

Управление базами данных и логическими серверами на портале Azure или с помощью API Azure Resource Manager контролируется путем назначения ролей для учетной записи пользователя портала. Дополнительные сведения см. в статье [Использование управления доступом на основе ролей для контроля доступа к ресурсам в подписке Azure](https://azure.microsoft.com/documentation/articles/role-based-access-control-configure).

## <a name="encryption"></a>Шифрование
Прозрачное шифрование данных (TDE) помогает защититься от угрозы вредоносной деятельности путем шифрования и расшифровки данных в состоянии покоя. При шифровании базы связанные резервные копии и файлы журналов транзакций шифруются без необходимости вносить изменения в приложения. При использовании TDE хранилище всей базы данных шифруется с помощью симметричного ключа, который называется ключом шифрования базы данных. 

В базе данных SQL ключ шифрования базы данных защищается встроенным сертификатом сервера. Каждый сервер Базы данных SQL обладает уникальным встроенным сертификатом. Майкрософт автоматически меняет эти сертификаты каждые 90 дней. Используемый алгоритм шифрования - AES-256. Общее описание функции TDE см. в статье [Прозрачное шифрование данных (TDE)](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption?view=sql-server-ver15).

Базу данных можно зашифровать с помощью [портала Azure](sql-data-warehouse-encryption-tde.md) или [T-SQL](sql-data-warehouse-encryption-tde-tsql.md).

## <a name="next-steps"></a>Дальнейшие действия
Подробнее и примерах при подключении к складу с различными протоколами можно найти в [пуле Connect to s-L.](sql-data-warehouse-connect-overview.md)
