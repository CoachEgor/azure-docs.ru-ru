---
title: Уровень важности рабочей нагрузки
description: Руководство по определению важности для запросов пула Synapse S'L в Azure Synapse Analytics.
services: synapse-analytics
author: ronortloff
manager: craigg
ms.service: synapse-analytics
ms.topic: conceptual
ms.subservice: ''
ms.date: 02/04/2020
ms.author: rortloff
ms.reviewer: jrasnick
ms.custom: azure-synapse
ms.openlocfilehash: 43ee14784b6049e9b5c1a78e733e72bbc45f915d
ms.sourcegitcommit: bd5fee5c56f2cbe74aa8569a1a5bce12a3b3efa6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2020
ms.locfileid: "80744041"
---
# <a name="azure-synapse-analytics-workload-importance"></a>Важность рабочей нагрузки Azure Synapse Analytics

В этой статье объясняется, как значение рабочей нагрузки может повлиять на порядок выполнения для запросов пула Synapse s'L в Azure Synapse.

## <a name="importance"></a>приоритет

> [!Video https://www.youtube.com/embed/_2rLMljOjw8]

Бизнес-потребности могут потребовать, чтобы рабочие нагрузки складирования данных были более важными, чем другие.  Рассмотрим сценарий, при котором критически важные данные о продажах загружаются до закрытия финансового периода.  Нагрузки данных для других источников, таких как данные о погоде, не имеют строгих SLAs. Установление большого значения для запроса для загрузки данных о продажах и низкое значение для запроса на загрузку данных о погоде гарантирует, что нагрузка данных о продажах получает первый доступ к ресурсам и завершается быстрее.

## <a name="importance-levels"></a>Уровни важности

Есть пять уровней важности: низкий, below_normal, нормальный, above_normal, и высокий.  Запросы, не устанавливающие значение, присваиваются обычному уровню по умолчанию. Запросы, которые имеют одинаковый уровень важности, имеют то же поведение планирования, которое существует сегодня.

## <a name="importance-scenarios"></a>Сценарии важности

Помимо базового сценария важности, описанного выше с данными о продажах и погоде, существуют и другие сценарии, в которых важность рабочей нагрузки помогает удовлетворить потребности в обработке данных и запросе.

### <a name="locking"></a>Блокировка

Доступ к блокировкам для чтения и записи деятельности является одной из областей естественного раздора. Такие действия, как [переключение разделов](sql-data-warehouse-tables-partition.md) или [RENAME OBJECT,](/sql/t-sql/statements/rename-transact-sql?toc=/azure/synapse-analytics/sql-data-warehouse/toc.json&bc=/azure/synapse-analytics/sql-data-warehouse/breadcrumb/toc.json&view=azure-sqldw-latest) требуют повышенных замков.  Без важности рабочей нагрузки пул Synapse S'L в Azure Synapse оптимизирует пропускную вылим. Оптимизация пропускной платы означает, что при запуске и очередях запросов имеют одинаковые потребности блокировки и доступны ресурсы, запросы в очереди могут обойти запросы с более высокими потребностями блокировки, которые поступили в очередь запросов ранее. После того, как значение рабочей нагрузки применяется к запросам с более высокими потребностями блокировки. Запрос с более важным значением будет запущен перед запросом с меньшим значением.

Рассмотрим следующий пример:

- No 1 активно работает и выбирает данные из SalesFact.
- No 2 стоит в очереди, ожидая завершения No1.  Он был представлен в 9 утра и пытается переключать новые данные в SalesFact.
- No 3 представлен в 9:01 утра и хочет выбрать данные из SalesFact.

Если No 2 и No 3 имеют одинаковое значение и No 1 по-прежнему выполнения, No 3 начнетвыполнение. No 2 будет продолжать ждать эксклюзивного блокировки на SalesFact.  Если No 2 имеет более высокое значение, чем No 3, No 3 будет ждать, пока No 2 будет закончена, прежде чем он может начать выполнение.

### <a name="non-uniform-requests"></a>Неравномерные запросы

Другой сценарий, где важность может помочь удовлетворить запросные запросы, — это отправка запросов с различными классами ресурсов.  Как уже упоминалось ранее, при таком же значении пул Synapse S'L в Azure Synapse оптимизирует пропускную выливку. При наличии в очереди запросов смешанного размера (например, smallrc или mediumrc) пул Synapse S'L выберет самый ранний запрос, который вписывается в имеющиеся ресурсы. При применении важности рабочей нагрузки следующий запрос наивысшей важности запланирован.
  
Рассмотрим следующий пример на DW500c:

- No 1, No 2, No 3, и No 4 работают небольшие запросы.
- 5-й класс представлен с классом ресурсов mediumrc в 9 утра.
- No 6 представлен с небольшим классом ресурсов в 9:01 утра.

Поскольку 5 евро является средним, он требует двух слотов для параллелизма. No5 нужно дождаться завершения двух запущенных запросов.  Однако, когда один из запущенных запросов (No1-No4) завершается, No6 планируется немедленно, потому что ресурсы существуют для выполнения запроса.  Если No5 имеет более высокое значение, чем No 6, No 6 ждет, пока No 5 работает, прежде чем он может начать выполнение.

## <a name="next-steps"></a>Дальнейшие действия

- Для получения дополнительной информации о создании классификатора, [см.](/sql/t-sql/statements/create-workload-classifier-transact-sql?toc=/azure/synapse-analytics/sql-data-warehouse/toc.json&bc=/azure/synapse-analytics/sql-data-warehouse/breadcrumb/toc.json&view=azure-sqldw-latest)  
- Для получения дополнительной информации о классификации рабочей нагрузки [см.](sql-data-warehouse-workload-classification.md)  
- Ознакомьтесь с [классификатором рабочей нагрузки](quickstart-create-a-workload-classifier-tsql.md) «Быстрый запуск» для создания классификатора рабочей нагрузки.
- См. статьи с инструкциями по [настройке уровня важности рабочих нагрузок](sql-data-warehouse-how-to-configure-workload-importance.md), а также по [администрированию и мониторингу рабочих нагрузок](sql-data-warehouse-how-to-manage-and-monitor-workload-importance.md).
- Запросы и назначенную важность см. в разделе [sys.dm_pdw_exec_requests](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-exec-requests-transact-sql?toc=/azure/synapse-analytics/sql-data-warehouse/toc.json&bc=/azure/synapse-analytics/sql-data-warehouse/breadcrumb/toc.json&view=azure-sqldw-latest).
