---
title: Использование представлений T-SQL
description: Советы по использованию представлений T-SQL и разработке решений в пуле синапсе SQL.
services: synapse-analytics
author: XiaoyuMSFT
manager: craigg
ms.service: synapse-analytics
ms.topic: conceptual
ms.subservice: ''
ms.date: 04/17/2018
ms.author: xiaoyul
ms.reviewer: igorstan
ms.custom: seo-lt-2019
ms.openlocfilehash: 76442368fe4b3e498f622a8a3cd5b5b973f16bd6
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "80633393"
---
# <a name="views-in-synapse-sql-pool"></a>Представления в пуле синапсе SQL

Представления можно использовать разными способами для повышения качества вашего решения.

Пул SQL поддерживает как стандартные, так и материализованные представления. Оба являются виртуальными таблицами, созданными с помощью выражений SELECT и представленными для запросов в виде логических таблиц.

Представления инкапсулируют сложность общих вычислений данных и добавляют уровень абстракции к вычислительным изменениям, поэтому нет необходимости переписывать запросы.

## <a name="standard-view"></a>Стандартное представление

Стандартное представление каждый раз рассчитывает данные при каждом использовании представления. На диске не хранятся данные. Обычно пользователи используют стандартные представления в качестве средства, помогающего организовать логические объекты и запросы в базе данных.

Чтобы использовать стандартное представление, запрос должен создать прямую ссылку на него. Дополнительные сведения см. в [документации по CREATE VIEW](/sql/t-sql/statements/create-view-transact-sql?toc=/azure/synapse-analytics/sql-data-warehouse/toc.json&bc=/azure/synapse-analytics/sql-data-warehouse/breadcrumb/toc.json&view=azure-sqldw-latest).

Представления в пуле SQL хранятся только в виде метаданных. Следовательно, следующие параметры недоступны.

* Нет возможности привязать схему.
* Базовые таблицы нельзя обновить с помощью представления
* Невозможно создать представления во временных таблицах
* Не поддерживаются указания для EXPAND и NOEXPAND.
* В пуле SQL нет индексированных представлений

Стандартные представления можно использовать для принудительного применения оптимизированных соединений между таблицами. Например, в представление можно включить ключ избыточного распространения, заданный в критерии соединения, чтобы минимизировать перемещение данных.

Еще одно преимущество представления — принудительное выполнение определенного запроса или указания по соединению. Благодаря представлениям соединения всегда выполняются правильно, поэтому пользователю не нужно запоминать правильную конструкцию соединений.

## <a name="materialized-view"></a>Материализованное представление

Материализованные представления предварительно вычисляются, сохраняют и сохраняют свои данные в пуле SQL так же, как и таблицы. При использовании материализованных представлений повторное вычисление не требуется.

По мере загрузки данных в базовые таблицы пул SQL синхронно обновляет материализованные представления.  Оптимизатор запросов автоматически использует развернутые материализованные представления для повышения производительности запросов, даже если в запросе нет ссылок на представления.  

Запросы лучше всего от материализованных представлений — это сложные запросы (обычно запросы с объединениями и агрегатами) в больших таблицах, которые создают небольшой результирующий набор.  

Дополнительные сведения о синтаксисе материализованных представлений и других требованиях см. в статье [Создание материализованных ПРЕДСТАВЛЕНИЙ как SELECT](/sql/t-sql/statements/create-materialized-view-as-select-transact-sql?toc=/azure/synapse-analytics/sql-data-warehouse/toc.json&bc=/azure/synapse-analytics/sql-data-warehouse/breadcrumb/toc.json&view=azure-sqldw-latest).  

Рекомендации по настройке запросов см. [в статье Настройка производительности с материализованными представлениями](performance-tuning-materialized-views.md).

## <a name="example"></a>Пример

Распространенным шаблоном приложения является повторное создание таблиц с помощью CREATE TABLE как SELECT (CTAS), за которым следует шаблон переименования объектов при загрузке данных.  

Приведенный ниже пример добавляет новые записи даты в измерение даты. Обратите внимание, что сначала создается новая таблица DimDate_New, которая затем переименовывается для замены исходной версии таблицы.

```sql
CREATE TABLE dbo.DimDate_New
WITH (DISTRIBUTION = ROUND_ROBIN
, CLUSTERED INDEX (DateKey ASC)
)
AS
SELECT *
FROM   dbo.DimDate  AS prod
UNION ALL
SELECT *
FROM   dbo.DimDate_stg AS stg;

RENAME OBJECT DimDate TO DimDate_Old;
RENAME OBJECT DimDate_New TO DimDate;

```

Однако такой подход может привести к появлению и отображению таблиц в представлении пользователя вместе с выдачей сообщений об ошибках «таблица не существует».

Представления можно использовать для предоставления пользователям единообразного уровня представления во время переименования базовых объектов. Предоставляя доступ к данным через представления, пользователям не требуется видимость базовых таблиц.

Этот уровень предоставляет всю необходимую пользователю информацию, одновременно позволяя разработчикам менять модели данных в хранилище. Благодаря возможности усовершенствования базовых таблиц разработчики могут использовать CTAS, чтобы повысить производительность при загрузке данных.

## <a name="next-steps"></a>Дальнейшие шаги

Дополнительные советы по разработке см. в статье [Общие сведения о разработке пула SQL](sql-data-warehouse-overview-develop.md).
