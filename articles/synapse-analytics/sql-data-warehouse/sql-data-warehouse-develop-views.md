---
title: Использование представлений T-S'L
description: Советы по использованию представлений T-SQL в хранилище данных SQL Azure для разработки решений.
services: synapse-analytics
author: XiaoyuMSFT
manager: craigg
ms.service: synapse-analytics
ms.topic: conceptual
ms.subservice: ''
ms.date: 04/17/2018
ms.author: xiaoyul
ms.reviewer: igorstan
ms.custom: seo-lt-2019
ms.openlocfilehash: 9eccc225c5473291b7535339ff64a036730894ae
ms.sourcegitcommit: 8a9c54c82ab8f922be54fb2fcfd880815f25de77
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "80351521"
---
# <a name="views-in-azure-sql-data-warehouse"></a>Представления в хранилище данных SQL Azure
Представления можно использовать разными способами для повышения качества вашего решения. 

Хранилище данных Azure S'L поддерживает стандартные и материализованные представления. Обе таблицы представляются с помощью выражений SELECT и представлены запросам в качестве логических таблиц. Представления инкапсулируют сложность общих вычислений данных и добавляют слой абстракции в вычисления, поэтому нет необходимости переписывать запросы.

## <a name="standard-view"></a>Стандартное представление
Стандартное представление вычисляет свои данные каждый раз при использовании представления. На диске нет данных, хранящихся. Обычно пользователи используют стандартные представления в качестве инструмента, помогая организовать логические объекты и запросы в базе данных. Для использования стандартного представления запрос должен прямо ссылаться на него. Дополнительные сведения см. в [документации по CREATE VIEW](/sql/t-sql/statements/create-view-transact-sql).

Представления в хранилище данных SQL хранятся только в виде метаданных. Поэтому следующие варианты недоступны.
* Нет возможности привязать схему.
* Базовые таблицы нельзя обновлять через представление.
* Для временных таблиц нельзя создавать представления.
* Не поддерживаются указания для EXPAND и NOEXPAND.
* В хранилище данных SQL нет индексированных представлений.

Стандартные представления могут быть использованы для обеспечения оптимизации производительности соединений между таблицами. Например, в представление можно включить ключ избыточного распространения, заданный в критерии соединения, чтобы минимизировать перемещение данных. Еще одно преимущество представления — принудительное выполнение определенного запроса или указания по соединению. Благодаря представлениям соединения всегда выполняются правильно, поэтому пользователю не нужно запоминать правильную конструкцию соединений.

## <a name="materialized-view"></a>Материализованное представление
Материализованное представление предварительно вычисляет, хранит и поддерживает свои данные в хранилище данных Azure S'L, как и таблица. При использовании материализованного представления перерасчет не требуется. По мере загрузки данных в базовые таблицы хранилище данных Azure S'L синхронно обновляет материализованные представления.  Оптимизатор запроса автоматически использует развернутые материализованные представления для повышения производительности запроса, даже если представления не упоминаются в запросе.  Запросы, пользующиеся большей частью материализованных представлений, представляют собой сложные запросы (обычно запросы с соединениями и агрегациями) на больших таблицах, которые производят небольшой набор результатов.  

Для получения подробной информации о материализованном синтаксисе представления и других требованиях, обратитесь к [CREATE MATERIALIZED VIEW AS SELECT](https://docs.microsoft.com/sql/t-sql/statements/create-materialized-view-as-select-transact-sql?view=azure-sqldw-latest).  

Для руководства по настройке запроса проверьте [настройку производительности с материализованными представлениями.](https://docs.microsoft.com/azure/sql-data-warehouse/performance-tuning-materialized-views) 

## <a name="example"></a>Пример
Один из распространенных шаблонов приложения — повторное создание таблиц с помощью инструкции CREATE TABLE AS SELECT (CTAS), после которой следует шаблон переименования объектов в процессе загрузки данных.  Приведенный ниже пример добавляет новые записи даты в измерение даты. Обратите внимание, что сначала создается новая таблица DimDate_New, которая затем переименовывается для замены исходной версии таблицы.

```sql
CREATE TABLE dbo.DimDate_New
WITH (DISTRIBUTION = ROUND_ROBIN
, CLUSTERED INDEX (DateKey ASC)
)
AS
SELECT *
FROM   dbo.DimDate  AS prod
UNION ALL
SELECT *
FROM   dbo.DimDate_stg AS stg;

RENAME OBJECT DimDate TO DimDate_Old;
RENAME OBJECT DimDate_New TO DimDate;

```
Но эти действия могут привести к тому, что таблицы могут появляться в представлении пользователя и исчезать из него; кроме того, могут появляться сообщения об ошибках "Таблица не существует". Представления нужны для предоставления пользователям доступа к согласованному уровню отображения данных, пока базовые объекты переименовываются. Получая доступ к данным через представления, пользователи не нуждаются в доступе к базовым таблицам. Этот уровень предоставляет всю необходимую пользователю информацию, одновременно позволяя разработчикам менять модели данных в хранилище. Благодаря возможности усовершенствования базовых таблиц разработчики могут использовать CTAS, чтобы повысить производительность при загрузке данных.   

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные советы по разработке см. в статье [Проектные решения и методики программирования для хранилища данных SQL](sql-data-warehouse-overview-develop.md).


