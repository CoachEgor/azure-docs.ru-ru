---
title: Архитектура Azure Synapse Analytics (ранее S'L DW)
description: Узнайте, как Azure Synapse Analytics (ранее S'L DW) сочетает в себе массовую параллельную обработку (MPP) с хранилищем Azure для достижения высокой производительности и масштабируемости.
services: synapse-analytics
author: mlee3gsd
manager: craigg
ms.service: synapse-analytics
ms.topic: conceptual
ms.subservice: ''
ms.date: 11/04/2019
ms.author: martinle
ms.reviewer: igorstan
ms.openlocfilehash: a42ec523bb1f77c48f7382283a52565c9c9273b6
ms.sourcegitcommit: 3c318f6c2a46e0d062a725d88cc8eb2d3fa2f96a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/02/2020
ms.locfileid: "80584505"
---
# <a name="azure-synapse-analytics-formerly-sql-dw-architecture"></a>Архитектура Azure Synapse Analytics (ранее S'L DW) 

Azure Synapse — это служба аналитики без ограничений, которая объединяет корпоративные хранилища данных и аналитику больших данных. Служба позволяет вам запрашивать данные на своих условиях, используя бессерверные ресурсы по запросу или подготовленные ресурсы в любом масштабе. Azure Synapse объединяет эти два мира с единым опытом для того, чтобы глотать, готовить, управлять и обслуживать данные для непосредственных потребностей в области би-би-и машинного обучения.

 В Azure Synapse есть четыре компонента.
- Синапсе СЗЛ: Полная аналитика на основе Т-СЗЛ 
    - Бассейн S'L (оплата за DWU подготовлен) - Как правило, доступны
    - SQL по запросу (оплата за обработанные ТБ) — (Предварительная версия)
- Искра: Глубоко интегрированный Apache Spark (Предварительный просмотр)
- Интеграция данных: Гибридная интеграция данных (Предварительный просмотр)
- Студия: унифицированный пользовательский опыт.  (предварительная версия)

> [!VIDEO https://www.youtube.com/embed/PlyQ8yOb8kc]

## <a name="synapse-sql-mpp-architecture-components"></a>Компоненты архитектуры Synapse S'L MPP

[Synapse S'L](sql-data-warehouse-overview-what-is.md#synapse-sql-pool-in-azure-synapse) использует масштабную архитектуру для распределения вычислительной обработки данных по нескольким узлам. Единица масштаба представляет собой абстракцию вычислительной мощности, которая известна как [единица хранилища данных.](what-is-a-data-warehouse-unit-dwu-cdwu.md) Вычисление отделено от хранилища, что позволяет масштабировать вычисления независимо от данных в вашей системе.

![Архитектура Synapse S'L](./media/massively-parallel-processing-mpp-architecture/massively-parallel-processing-mpp-architecture.png)

Synapse S'L использует архитектуру на основе узлов. Приложения подключают и выдают команды T-S'L в узла управления, который является единственной точкой входа для пула Synapse S'L. Узло управления запускает движок MPP, который оптимизирует запросы для параллельной обработки, а затем передает операции вычислительным узлам, чтобы выполнять свою работу параллельно. 

Вычислительные узлы хранят все данные пользователей в службе хранилища Azure и выполняют параллельные запросы. Служба перемещения данных (DMS) представляет собой внутреннюю службу на уровне системы, которая перемещает данные между узлами, что необходимо для выполнения параллельных запросов и возвращения точных результатов. 

С разъединением хранения и вычисления, при использовании Synapse S'L бассейн можно:

* определение объема вычислительных ресурсов независимого от потребностей хранилища;
* Выращивайте или сокращайте вычислительную мощность в пуле S'L (хранилище данных), не перемещая данные.
* приостановка вычислений без изменения данных (вы платите только за хранилище);
* возобновление вычислений во время рабочих часов.

### <a name="azure-storage"></a>Хранилище Azure

Synapse S'L использует хранилище Azure, чтобы сохранить ваши пользовательские данные в безопасности.  Поскольку ваши данные хранятся и управляются Azure Storage, для потребления хранилища взимается отдельная плата. Данные заколотятся в **дистрибутивы** для оптимизации производительности системы. При определении таблицы вы можете выбрать шаблон сегментирования, который будет использоваться для распределения данных. Эти осколки поддерживаются:

* Хэш
* Циклический перебор
* Репликация

### <a name="control-node"></a>Управляющий узел

Контрольный узла является мозгом архитектуры. Это внешний интерфейс, который взаимодействует со всеми приложениями и подключениями. Механизм MPP запускается на управляющем узле, чтобы оптимизировать и координировать параллельные запросы. При отправке запроса T-S'L узл управления преобразует его в запросы, которые работают параллельно с каждым распределением.

### <a name="compute-nodes"></a>Вычислительные узлы

Вычислительные узлы обеспечивают вычислительную мощность. Чтобы выполнить обработку, дистрибутивы сопоставляются с вычислительными узлами. При оплате большего количества вычислительных ресурсов дистрибутивы переходят в доступные вычислительные узлы. Количество вычислительных узлов колеблется от 1 до 60 и определяется уровнем обслуживания для Synapse S'L.

У каждого вычислительного узла есть идентификатор узла, который видно в представлениях системы. Идентификатор вычислительного узла можно увидеть в столбце node_id в системных представлениях, имена которых начинаются с sys.pdw_nodes. Список системных представлений см. в [системном представлении MPP](https://docs.microsoft.com/sql/relational-databases/system-catalog-views/sql-data-warehouse-and-parallel-data-warehouse-catalog-views?view=aps-pdw-2016-au7).

### <a name="data-movement-service"></a>Служба перемещения данных

Служба перемещения данных (DMS) — это технология перемещения данных, которая координирует перемещение данных между вычислительными узлами. Некоторым запросам требуется перемещение данных, чтобы параллельные запросы вернули точные результаты. При необходимости перемещения данных DMS гарантирует, что нужные данные окажутся в нужном расположении. 

## <a name="distributions"></a>Дистрибутивы

Распределение представляет собой базовую единицу хранения и обработки параллельных запросов, выполняемых для распределенных данных. При запуске запроса работа делится на 60 меньших запросов, которые работают параллельно. 

Каждый из этих 60 небольших запросов выполняется в одном из распределений данных. Каждый вычислительный узел управляет одним или несколькими из 60 распределений. Пул с максимальным объемом вычислительных ресурсов имеет одно распределение на вычислительный узл. Пул с минимальными вычислительными ресурсами имеет все дистрибутивы на одном вычислительном узлах.  

## <a name="hash-distributed-tables"></a>Таблицы с хэш-распределением

С помощью распределенной хэш-таблицы можно обеспечить наибольшую производительность запроса для операций объединения и агрегирования для больших таблиц. 

Для того чтобы осколки данных в таблицу распределения хэш-распределенных данных, функция хэша используется для детерминированного присвоения каждой строке одному распределению. В определении таблицы один из столбцов определяется как столбец распределения. Хэш-функция использует значения в столбце распределения для присвоения каждой строки распределению.

На следующей схеме показано, как полная (нераспределенная) таблица хранится в качестве хэш-распределенной. 

![Распределенная таблица](./media/massively-parallel-processing-mpp-architecture/hash-distributed-table.png "Распределенная таблица")  

* Каждая строка относится к одному распределению.  
* Детерминированный хэш-алгоритм присваивает каждую строку одному распределению.  
* Количество строк таблицы в распределении зависит от размеров таблиц (как показано на схеме).

Существуют влияющие на производительность факторы, которые учитываются при выборе столбца распределения. Например, определенность, неравномерное смещение данных и типы запросов, выполняемых в системе.

## <a name="round-robin-distributed-tables"></a>Таблицы с распределением методом циклического перебора

Таблица с распределением методом циклического перебора — это самая простая таблица для создания и обеспечения высокой производительности, если ее использовать как промежуточную таблицу для нагрузок.

В таблице с распределением методом циклического перебора данные распределяются равномерно, но без какой-либо последующей оптимизации. Распределение сначала выбирается случайным образом, а затем буферы строк назначаются распределениям последовательно. Вы можете быстро загрузить данные в таблицу с распределением методом циклического перебора, но производительность запроса будет лучше, если использовать распределенные хэш-таблицы. Соединения на круглых столах требуют перетасовки данных, что требует дополнительного времени.

## <a name="replicated-tables"></a>Реплицированные таблицы

Реплицированная таблица обеспечивает наилучшую производительность запросов для небольших таблиц.

Полная копия реплицированной таблицы хранится на каждом вычислительном узле. В результате репликация таблицы устраняет необходимость передавать данные между вычислительными узлами перед операциями соединения или агрегирования. Реплицированные таблицы лучше всего использовать для небольших таблиц. Требуется дополнительное хранилище и дополнительные накладные расходы, которые возникает при написании данных, что делает большие таблицы непрактичными.  

На приведенной ниже диаграмме показана реплицированная таблица, кэшированная на первом распределении на каждом вычислительном узлах.  

![Реплицированная таблица](./media/massively-parallel-processing-mpp-architecture/replicated-table.png "Реплицированная таблица") 

## <a name="next-steps"></a>Следующие шаги

Теперь, когда вы знаете немного о Azure Synapse, узнайте, как быстро [создать пул S'L](create-data-warehouse-portal.md) и [загрузить выборочные данные.](load-data-from-azure-blob-storage-using-polybase.md) Если вы раньше не работали с Azure, используйте [глоссарий Azure](../../azure-glossary-cloud-terminology.md), чтобы узнать значение новых терминов. Или посмотрите на некоторые из этих других ресурсов Azure Synapse.  
