---
title: Защита связанной службы
description: Узнайте, как подготавливать и защищать связанную службу с помощью управляемой виртуальной сети.
services: synapse-analytics
author: acomet
ms.service: synapse-analytics
ms.topic: how-to
ms.subservice: ''
ms.date: 04/15/2020
ms.author: acomet
ms.reviewer: jrasnick
ms.openlocfilehash: 7c7cf8ec7297b3c0ef855936becc3c06a5120a38
ms.sourcegitcommit: 3543d3b4f6c6f496d22ea5f97d8cd2700ac9a481
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/20/2020
ms.locfileid: "86496083"
---
# <a name="securing-a-linked-service-with-private-links"></a>Защита связанной службы с помощью частных ссылок 

В этой статье вы узнаете, как защитить связанную службу в синапсе с помощью частной конечной точки.

## <a name="prerequisites"></a>Предварительные требования

* **Подписка Azure**: Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/) Azure, прежде чем начинать работу.
* **учетную запись хранения,** Azure Data Lake 2-го поколения используется в качестве хранилища *исходных* данных. Если у вас нет учетной записи хранения Azure, создайте ее по инструкциям из статьи [Создание учетной записи хранения Azure](../../storage/blobs/data-lake-storage-quickstart-create-account.md). Убедитесь, что учетная запись хранения имеет IP-фильтрацию синапсе Studio для доступа к ней и вы разрешаете только **выбранным сетям** доступ к учетной записи хранения. Настройка в колонках **брандмауэров и виртуальных сетях** должна выглядеть, как показано на рисунке ниже.

![Защищенная учетная запись хранения](./media/secure-storage-account.png)

## <a name="create-a-linked-service-with-private-links"></a>Создание связанной службы с частными ссылками

В Azure Synapse Analytics связанная служба используется для определения сведений о подключении к другим службам. В этом разделе показано, как добавить Azure Synapse Analytics и Azure Data Lake 2-го поколения в качестве связанных служб.

1. Откройте Azure синапсе Studio и перейдите на вкладку **Управление** .
1. В разделе **Внешние подключения** выберите **Связанные службы**.
1. Чтобы добавить связанную службу, щелкните **Создать**.
1. Выберите элемент Azure Data Lake Storage 2-го поколения из списка и щелкните **Продолжить**.
1. Убедитесь, что вы включили **интерактивную разработку**. Включение может занять около 1 минуты. 
1. Введите учетные данные для проверки подлинности. В настоящее время поддерживаются следующие типы проверки подлинности: ключ учетной записи, субъект-служба и управляемое удостоверение. Нажмите кнопку проверки подключения, чтобы проверить правильность учетных данных.
1. Выберите **проверить подключение**. это должно привести к сбою, так как учетная запись хранения не обеспечивает доступ к ней без создания и утверждения частной конечной точки. В сообщении об ошибке должна отобразиться ссылка на создание **частной конечной точки** , которую можно выполнить, чтобы перейти к следующей части. Если вы выполните эту ссылку, пропустите следующую часть.
1. По завершении нажмите кнопку **Создать**.

## <a name="create-a-managed-private-endpoint"></a>Создание управляемой частной конечной точки

Если вы не щелкнули гиперссылку при проверке соединения выше, перейдите по следующему пути. Теперь необходимо создать управляемую закрытую конечную точку, которая будет подключаться к связанной службе, созданной ранее.

1. Перейдите на вкладку **Управление** .
1. Перейдите к разделу **управляемые виртуальные сети** .
1. Выберите **+ создать** в разделе управляемая частная конечная точка.
1. Выберите плитку Azure Data Lake Storage 2-го поколения из списка и нажмите кнопку **продолжить**.
1. Введите имя созданной ранее учетной записи хранения.
1. Нажмите кнопку **Создать**
1. После ожидания в течение нескольких секунд вы увидите, что для созданной закрытой ссылки требуется утверждение.

## <a name="approval-of-a-private-link"></a>Утверждение закрытой ссылки
1. Выберите закрытую конечную точку, созданную ранее. Вы видите гиперссылку, которая позволит одобрить закрытую конечную точку на уровне учетной записи хранения. *В качестве альтернативы можно перейти непосредственно к учетной записи хранения портал Azure и перейти в колонку **подключения к частным конечным точкам** .*
1. Заметьте закрытую конечную точку, созданную в студии, и выберите **утвердить**.
1. Добавьте описание и нажмите кнопку **Да** .
1. Вернитесь в синапсе Studio в разделе **управляемые виртуальные сети** вкладки **Управление** .
1. Получение утверждения для частной конечной точки займет около 1 минуты.

## <a name="check-the-connection-works"></a>Проверка работоспособности подключения
1. Перейдите на вкладку **Управление** и выберите связанную службу, которую вы создали.
1. Убедитесь, что **интерактивная разработка** активна.
1. Выберите **Test connection** (Проверить подключение). Вы должны увидеть, что соединение успешно установлено.

Теперь вы установили безопасное и закрытое подключение между синапсе и связанной службой.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения об управляемой частной конечной точке в синапсе Analytics см. в [этой статье.](data-integration-data-lake.md)

Дополнительные сведения об интеграции данных для синапсе Analytics см. в статье прием [данных в Data Lake](data-integration-data-lake.md) .
