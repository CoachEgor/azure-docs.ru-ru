---
title: Общая база данных
description: Azure Synapse Analytics предоставляет общую модель метаданных, в которой к созданной в бессерверном пуле Apache Spark базе данных можно будет получить доступ из бессерверного пула SQL и ядер пула SQL.
services: synapse-analytics
author: MikeRys
ms.service: synapse-analytics
ms.topic: overview
ms.subservice: metadata
ms.date: 05/01/2020
ms.author: mrys
ms.reviewer: jrasnick
ms.custom: devx-track-csharp
ms.openlocfilehash: 14ae8b8670db53761d085bc019711e829633601b
ms.sourcegitcommit: 6a350f39e2f04500ecb7235f5d88682eb4910ae8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2020
ms.locfileid: "96451809"
---
# <a name="azure-synapse-analytics-shared-database"></a>Общая база данных Azure Synapse Analytics

Azure Synapse Analytics позволяет различным вычислительным системам рабочих областей использовать базы данных и таблицы совместно с бессерверными пулами Apache Spark и ядром бессерверного пула SQL.

База данных, созданная с помощью задания Spark, станет видимой с одним и тем же именем для всех текущих и будущих пулов Spark в рабочей области, а также для ядра бессерверного пула SQL.

База данных Spark по умолчанию с именем`default` также будет отображаться в контексте бессерверного пула SQL как база данных с именем `default`.

Так как базы данных синхронизируются с бессерверным пулом SQL асинхронно, они появляются с некоторой задержкой.

## <a name="manage-a-spark-created-database"></a>Управление созданной базой данных Spark

Используйте Spark для управления созданными в Spark базами данных. Например, можно удалить базу данных из задания пула Spark или создать в ней таблицы средствами Spark.

Если вы создадите объекты в созданной в Spark базе данных, используя бессерверный пул SQL, или попытаетесь удалить базу данных, операция будет выполнена. Но исходная база данных Spark не изменится.

## <a name="how-name-conflicts-are-handled"></a>Как обрабатываются конфликты имен

Если имя базы данных Spark конфликтует с именем существующей базы данных бессерверного пула SQL, к имени базы данных Spark в бессерверном пуле SQL будет добавлен суффикс. Суффиксом в бессерверном пуле SQL является `_<workspace name>-ondemand-DefaultSparkConnector`.

Например, если база данных Spark с именем `mydb` создается в рабочей области Azure Synapse `myws` и база данных бессерверного пула SQL с таким именем уже существует, то в бессерверном пуле SQL будет добавлена ссылка на базу данных Spark с указанием имени `mydb_myws-ondemand-DefaultSparkConnector`.

> [!CAUTION]
> Внимание! Не допускайте зависимостей от такого поведения.

## <a name="security-model"></a>Модель безопасности

Базы данных и таблицы Spark вместе с синхронизированными представлениями в ядре SQL будут защищены на базовом уровне хранилища.

Субъект безопасности, создающий базу данных, считается владельцем этой базы данных и имеет все права на нее и ее объекты.

Чтобы предоставить субъекту безопасности, такому как пользователь или группа безопасности, доступ к базе данных, предоставьте соответствующей папке и файлам POSIX соответствующие разрешения для папок и файлов в каталоге `warehouse`. 

Например, чтобы субъект безопасности мог читать таблицу в базе данных, все папки, начиная с папки базы данных в каталоге `warehouse`, должны иметь разрешения `X` и `R`, назначенные этому субъекту безопасности. Кроме того, для файлов (например, базовых файлов данных таблицы) требуются разрешения `R`. 

Если субъекту безопасности требуется возможность создавать или удалять объекты в базе данных, для папок и файлов в папке `warehouse` требуются дополнительные разрешения `W`.

## <a name="examples"></a>Примеры

### <a name="create-and-connect-to-spark-database-with-serverless-sql-pool"></a>Создание базы данных Spark и подключение к ней с помощью бессерверного пула SQL

Сначала создайте базу данных Spark с именем `mytestdb`, используя кластер Spark, который уже создан в рабочей области. Это можно сделать, например, с помощью записной книжки Spark C# со следующей инструкцией .NET для Spark.

```csharp
spark.Sql("CREATE DATABASE mytestdb")
```

После короткой задержки вы увидите базу данных в бессерверном пуле SQL. Например, выполните следующую инструкцию из бессерверного пула SQL.

```sql
SELECT * FROM sys.databases;
```

Убедитесь, что `mytestdb` есть в результатах.

## <a name="next-steps"></a>Дальнейшие действия

- Ознакомьтесь со статьей [Общие метаданные Azure Synapse Analytics](overview.md)
- Ознакомьтесь со статьей [Общие таблицы метаданных Azure Synapse Analytics](table.md)
