---
title: Общая база данных
description: Azure Synapse Analytics предоставляет общую модель метаданных, где создание базы данных в Apache Spark делает ее доступной из ядер SQL по запросу (предварительной версии) и пулов SQL.
services: synapse-analytics
author: MikeRys
ms.service: synapse-analytics
ms.topic: overview
ms.subservice: metadata
ms.date: 05/01/2020
ms.author: mrys
ms.reviewer: jrasnick
ms.openlocfilehash: 196577741ae1560232f8ae193aacd51a446431c8
ms.sourcegitcommit: 5b8fb60a5ded05c5b7281094d18cf8ae15cb1d55
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/29/2020
ms.locfileid: "87385540"
---
# <a name="azure-synapse-analytics-shared-database"></a>Общая база данных Azure Synapse Analytics

Azure Synapse Analytics позволяет различным вычислительным системам рабочих областей использовать базы данных и таблицы совместно с пулами Spark (предварительной версии) и ядром SQL по запросу (предварительной версии).

[!INCLUDE [synapse-analytics-preview-terms](../../../includes/synapse-analytics-preview-terms.md)]

База данных, созданная с помощью задания Spark, станет видимой с одним и тем же именем для всех текущих и будущих пулов Spark (предварительной версии) в рабочей области, а также для ядра SQL по запросу.

База данных Spark по умолчанию с именем `default` также будет отображаться в контексте SQL по запросу как база данных с именем `default`.

Так как базы данных синхронизируются с SQL по запросу асинхронно, они появляются с некоторой задержкой.

## <a name="manage-a-spark-created-database"></a>Управление созданной базой данных Spark

Используйте Spark для управления созданными в Spark базами данных. Например, можно удалить базу данных из задания пула Spark или создать в ней таблицы средствами Spark.

Если вы создадите объекты в созданной в Spark базе данных, используя SQL по требованию, или попытаетесь удалить базу данных, операция будет выполнена. Но исходная база данных Spark не изменится.

## <a name="how-name-conflicts-are-handled"></a>Как обрабатываются конфликты имен

Если имя базы данных Spark конфликтует с именем существующей базы данных SQL по запросу, к имени базы данных Spark в SQL по требованию будет добавлен суффикс. Суффикс в SQL по запросу — `_<workspace name>-ondemand-DefaultSparkConnector`.

Например, если база данных Spark с именем `mydb` создается в рабочей области Azure Synapse `myws` и база данных SQL по запросу с таким именем уже существует, то в SQL по требованию будет добавлена ссылка на базу данных Spark с использованием имени `mydb_myws-ondemand-DefaultSparkConnector`.

> [!CAUTION]
> Внимание! Не допускайте зависимостей от такого поведения.

## <a name="security-model"></a>Модель безопасности

Базы данных и таблицы Spark вместе с синхронизированными представлениями в ядре SQL будут защищены на базовом уровне хранилища.

Субъект безопасности, создающий базу данных, считается владельцем этой базы данных и имеет все права на нее и ее объекты.

Чтобы предоставить субъекту безопасности, такому как пользователь или группа безопасности, доступ к базе данных, предоставьте соответствующей папке и файлам POSIX соответствующие разрешения для папок и файлов в каталоге `warehouse`. 

Например, чтобы субъект безопасности мог читать таблицу в базе данных, все папки, начиная с папки базы данных в каталоге `warehouse`, должны иметь разрешения `X` и `R`, назначенные этому субъекту безопасности. Кроме того, для файлов (например, базовых файлов данных таблицы) требуются разрешения `R`. 

Если субъекту безопасности требуется возможность создавать или удалять объекты в базе данных, для папок и файлов в папке `warehouse` требуются дополнительные разрешения `W`.

## <a name="examples"></a>Примеры

### <a name="create-and-connect-to-spark-database-with-sql-on-demand"></a>Создание базы данных Spark и подключение к ней с использованием SQL по запросу

Сначала создайте базу данных Spark с именем `mytestdb`, используя кластер Spark, который уже создан в рабочей области. Это можно сделать, например, с помощью записной книжки Spark C# со следующей инструкцией .NET для Spark.

```csharp
spark.Sql("CREATE DATABASE mytestdb")
```

После короткой задержки можно просмотреть базу данных из SQL по запросу. Для нашего примера выполните указанную ниже инструкцию из SQL по запросу.

```sql
SELECT * FROM sys.databases;
```

Убедитесь, что `mytestdb` есть в результатах.

## <a name="next-steps"></a>Дальнейшие действия

- Ознакомьтесь со статьей [Общие метаданные Azure Synapse Analytics](overview.md)
- Ознакомьтесь со статьей [Общие таблицы метаданных Azure Synapse Analytics](table.md)
