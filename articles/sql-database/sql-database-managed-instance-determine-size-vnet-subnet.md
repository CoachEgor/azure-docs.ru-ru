---
title: Определение размера виртуальной сети и подсети для Управляемого экземпляра Базы данных SQL Azure | Документация Майкрософт
description: В этой статье описывается вычисление размера подсети, в которой будет развернут Управляемый экземпляр Базы данных SQL Azure.
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: srdan-bozovic-msft
ms.author: srbozovi
ms.reviewer: sstein, bonova, carlrab
ms.date: 02/22/2019
ms.openlocfilehash: 167e243b1fe4ea5ba9403ac3ca1fcea42f02f59a
ms.sourcegitcommit: a6718e2b0251b50f1228b1e13a42bb65e7bf7ee2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2019
ms.locfileid: "71273560"
---
# <a name="determine-vnet-subnet-size-for-azure-sql-database-managed-instance"></a>Определение размера подсети виртуальной сети для Управляемого экземпляра Базы данных SQL Azure

Управляемый экземпляр Базы данных SQL Azure необходимо развернуть в [виртуальной сети](../virtual-network/virtual-networks-overview.md) Azure.

Число Управляемых экземпляров, которые могут быть развернуты в подсети виртуальной сети, зависит от размера (диапазона) подсети.

При создании Управляемого экземпляра Azure размещает несколько виртуальных машин, число которых зависит от уровня, выбранного во время подготовки. Поскольку виртуальные машины связанны с подсетью, им необходимы IP-адреса. Azure может выделить дополнительные виртуальные машины для обеспечения высокой доступности во время выполнения обычных операций и технического обслуживания. В результате число необходимых IP-адресов будет больше, чем число управляемых экземпляров в подсети.

Для управляемого экземпляра необходимо не менее 16 и не более 256 IP-адресов в подсети. В результате при определении диапазонов IP-адресов подсети можно использовать маски подсети между/28 и/24. Бит сети/28 (14 узлов на сеть) — хороший размер для одного общего или критического развертывания. Бит маски/27 (30 узлов на сеть) идеально подходит для нескольких Управляемый экземпляр развертываний в пределах одной виртуальной сети. Параметры битов маски для/26 (62 узлов) и/24 (узлы 254) позволяют дополнительно масштабировать виртуальную сеть для поддержки дополнительных управляемых экземпляров.

> [!IMPORTANT]
> Размер подсети с 16 IP-адресами составляет от нуля до минимума с ограниченным потенциалом, при котором операция масштабирования, например изменение размера Виртуальное ядро, не поддерживается. Настоятельно рекомендуется выбрать подсеть с префиксом/27 или самым длинным префиксом.

## <a name="determine-subnet-size"></a>Определение размера подсети

Если планируется развертывать несколько управляемых экземпляров внутри подсети и при этом необходимо оптимизировать размер подсети, для расчета нужно использовать такие параметры:

- Azure использует пять IP-адресов в подсети для своих потребностей
- Каждому экземпляру общего назначения требуются два адреса
- Каждому критически важному для бизнеса экземпляру требуются четыре адреса.

**Пример**: вы планируете использовать три экземпляра общего назначения и два критически важных для бизнеса Управляемых экземпляра. Это означает, что требуется 5 + 3 * 2 + 2 * 4 = 19 IP-адресов. Поскольку диапазоны IP-адресов определяются как значения в степени 2, вам потребуется диапазон из 32 (2 ^ 5) IP-адресов. Таким образом, необходимо зарезервировать подсеть с маской подсети /27.

> [!IMPORTANT]
> Вычисления, показанные выше, устареют с выпуском дополнительных усовершенствований.

## <a name="next-steps"></a>Следующие шаги

- Дополнительные сведения см. в статье [Использование Управляемого экземпляра Базы данных SQL с виртуальными сетями и почти полной совместимостью](sql-database-managed-instance.md).
- Подробнее об [архитектуре подключения к Управляемому экземпляру](sql-database-managed-instance-connectivity-architecture.md).
- Ознакомьтесь с [созданием виртуальной сети, где будут развернуты Управляемые экземпляры](sql-database-managed-instance-create-vnet-subnet.md).
- Во избежание проблем при настройке DNS см. статью [Configuring a Custom DNS for Azure SQL Database Managed Instance](sql-database-managed-instance-custom-dns.md) (Настройка пользовательской DNS для Управляемого экземпляра Базы данных SQL Azure)
