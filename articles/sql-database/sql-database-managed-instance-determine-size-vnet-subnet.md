---
title: Определение размера виртуальной сети и подсети для Управляемого экземпляра Базы данных SQL Azure | Документация Майкрософт
description: В этой статье описывается вычисление размера подсети, в которой будет развернут Управляемый экземпляр Базы данных SQL Azure.
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: srdan-bozovic-msft
ms.author: srbozovi
ms.reviewer: sstein, bonova, carlrab
manager: craigg
ms.date: 02/22/2019
ms.openlocfilehash: 2a10876bc3c9558de29caf9fee2ae0b06ee87f28
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60405347"
---
# <a name="determine-vnet-subnet-size-for-azure-sql-database-managed-instance"></a>Определение размера подсети виртуальной сети для Управляемого экземпляра Базы данных SQL Azure

Управляемый экземпляр Базы данных SQL Azure необходимо развернуть в [виртуальной сети](../virtual-network/virtual-networks-overview.md) Azure.

Число Управляемых экземпляров, которые могут быть развернуты в подсети виртуальной сети, зависит от размера (диапазона) подсети.

При создании Управляемого экземпляра Azure размещает несколько виртуальных машин, число которых зависит от уровня, выбранного во время подготовки. Поскольку виртуальные машины связанны с подсетью, им необходимы IP-адреса. Azure может выделить дополнительные виртуальные машины для обеспечения высокой доступности во время выполнения обычных операций и технического обслуживания. В результате число необходимых IP-адресов будет больше, чем число управляемых экземпляров в подсети.

Для управляемого экземпляра необходимо не менее 16 и не более 256 IP-адресов в подсети. Таким образом маски подсети между размером/28 и диапазоном/24 можно использовать при определении диапазонов IP-подсети. Бит маски сети/28 (14 узлов на сеть) равен оптимально для одного общего назначения или критически важных бизнес-развертывания. Маска/27 (30 узлов на сеть) идеально подходит для нескольких развертываний управляемый экземпляр, в той же виртуальной сети. Маска битовые настройки /26 (62 узла) и/24 (254) позволяет дальнейшее масштабирование за пределами виртуальной сети для поддержки дополнительных управляемые экземпляры.

> [!IMPORTANT]
> Размер подсети с 16 IP-адресов является абсолютным минимумом, с ограниченной возможностью для дальнейшего управляемый экземпляр scale out. Настоятельно рекомендуется выбирать подсети с префиксом /27 или ниже.

## <a name="determine-subnet-size"></a>Определение размера подсети

Если планируется развертывать несколько управляемых экземпляров внутри подсети и при этом необходимо оптимизировать размер подсети, для расчета нужно использовать такие параметры:

- Azure использует пять IP-адресов в подсети для своих потребностей
- Каждому экземпляру общего назначения требуются два адреса
- Каждому критически важному для бизнеса экземпляру требуются четыре адреса.

**Пример**: вы планируете использовать три экземпляра общего назначения и два критически важных для бизнеса Управляемых экземпляра. Это означает, что требуется 5 + 3 * 2 + 2 * 4 = 19 IP-адресов. Поскольку диапазоны IP-адресов определяются как значения в степени 2, вам потребуется диапазон из 32 (2 ^ 5) IP-адресов. Таким образом, необходимо зарезервировать подсеть с маской подсети /27.

> [!IMPORTANT]
> Вычисления, показанные выше, устареют с выпуском дополнительных усовершенствований.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения см. в статье [Использование Управляемого экземпляра Базы данных SQL с виртуальными сетями и почти полной совместимостью](sql-database-managed-instance.md).
- Подробнее об [архитектуре подключения к Управляемому экземпляру](sql-database-managed-instance-connectivity-architecture.md).
- Ознакомьтесь с [созданием виртуальной сети, где будут развернуты Управляемые экземпляры](sql-database-managed-instance-create-vnet-subnet.md).
- Во избежание проблем при настройке DNS см. статью [Configuring a Custom DNS for Azure SQL Database Managed Instance](sql-database-managed-instance-custom-dns.md) (Настройка пользовательской DNS для Управляемого экземпляра Базы данных SQL Azure)
