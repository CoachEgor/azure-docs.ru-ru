---
title: Проектирование первой реляционной базы данных на языке C# в службе "База данных SQL Azure" | Документация Майкрософт
description: Узнайте, как создать свою первую отдельную реляционную базу данных в службе "База данных SQL Azure" на языке C# с помощью ADO.NET.
services: sql-database
ms.service: sql-database
ms.subservice: development
ms.topic: tutorial
author: MightyPen
ms.author: genemi
ms.reviewer: carlrab
manager: craigg-msft
ms.date: 02/08/2019
ms.openlocfilehash: ce46a6b8d4e2bc57625f9202349718dfbaedc660
ms.sourcegitcommit: e69fc381852ce8615ee318b5f77ae7c6123a744c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/11/2019
ms.locfileid: "55995695"
---
# <a name="tutorial-design-a-relational-database-in-a-single-database-within-azure-sql-database-cx23-and-adonet"></a>Руководство. Проектирование отдельной реляционной базы данных в службе "База данных SQL Azure" на языке C# с помощью ADO.NET

База данных SQL Azure — это реляционная база данных как услуга (DBaaS) в Microsoft Cloud (Azure). Из этого руководства вы узнаете, как с помощью портала Azure и ADO.NET с Visual Studio выполнить следующие действия:

> [!div class="checklist"]
> * создать отдельную базу данных с помощью портала Azure*;
> * настроить правила брандмауэра на уровне сервера с помощью портала Azure;
> * подключиться к базе данных с помощью ADO.NET и Visual Studio;
> * создать таблицы с помощью ADO.NET;
> * вставить, обновить и удалить данные с помощью ADO.NET;
> * выполнить запрос данных с помощью ADO.NET.

* Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/), прежде чем начинать работу.

## <a name="prerequisites"></a>Предварительные требования

Установленная среда [Visual Studio 2017](https://www.visualstudio.com/downloads/).

## <a name="create-a-blank-single-database"></a>создать пустую отдельную базу данных.

Отдельная база данных в службе "База данных SQL Azure" создается с определенным набором вычислительных ресурсов и ресурсов хранения. База данных создается в пределах [группы ресурсов Azure](../azure-resource-manager/resource-group-overview.md) и управляется с помощью [сервера базы данных](sql-database-servers.md).

Чтобы создать пустую отдельную базу данных, выполните приведенные ниже действия.

1. Щелкните **Создать ресурс** в верхнем левом углу окна портала Azure.
2. На странице **создания** в разделе Azure Marketplace выберите **Базы данных**, а затем в разделе **Избранные** выберите **База данных SQL**.

   ![Создание пустой базы данных](./media/sql-database-design-first-database/create-empty-database.png)

3. Заполните форму **База данных SQL**, указав следующую информацию, как показано на предыдущем рисунке.

    | Параметр       | Рекомендуемое значение | ОПИСАНИЕ |
    | ------------ | ------------------ | ------------------------------------------------- |
    | **Database name** (Имя базы данных) | *yourDatabase* | Допустимые имена баз данных см. в статье [Идентификаторы баз данных](/sql/relational-databases/databases/database-identifiers). |
    | **Подписка** | *yourSubscription*  | Дополнительные сведения о подписках см. [здесь](https://account.windowsazure.com/Subscriptions). |
    | **Группа ресурсов** | *yourResourceGroup* | Допустимые имена групп ресурсов см. в статье о [правилах и ограничениях именования](/azure/architecture/best-practices/naming-conventions). |
    | **Выбрать источник** | Пустая база данных | Указывает, что должна быть создана пустая база данных. |

4. Выберите **Сервер**, чтобы использовать имеющийся сервер базы данных или создать и настроить новый сервер базы данных. Выберите существующий сервер или нажмите кнопку **Создать сервер** и заполните форму **Новый сервер**, указав следующие сведения:

    | Параметр       | Рекомендуемое значение | ОПИСАНИЕ |
    | ------------ | ------------------ | ------------------------------------------------- |
    | **Server name** (Имя сервера) | Любое глобально уникальное имя | Допустимые имена серверов см. в статье о [правилах и ограничениях именования](/azure/architecture/best-practices/naming-conventions). |
    | **Имя для входа администратора сервера** | Любое допустимое имя | Сведения о допустимых именах для входа см. в статье [Идентификаторы базы данных](/sql/relational-databases/databases/database-identifiers). |
    | **Пароль** | Любой допустимый пароль | Длина пароля должна составлять минимум восемь символов. В пароле должны использоваться символы трех категорий из перечисленных: прописные буквы, строчные буквы, цифры и специальные символы. |
    | **Местоположение.** | Любое допустимое расположение | Дополнительные сведения о регионах Azure см. [здесь](https://azure.microsoft.com/regions/). |

    ![Создание базы данных — сервер](./media/sql-database-design-first-database/create-database-server.png)

5. Нажмите кнопку **Выбрать**.
6. Щелкните **Ценовая категория**, чтобы указать уровень служб, число DTU или виртуальных ядер и объем хранилища. Вы можете изучить доступные ресурсы для каждого уровня служб (число DTU или виртуальных ядер и объем хранилища).

    Выбрав уровень служб, число DTU или виртуальных ядер и объем хранилища, нажмите кнопку **Применить**.

7. Заполните поле **Параметры сортировки** для пустой базы данных. В этом руководстве используйте значение по умолчанию. Дополнительные сведения о параметрах сортировки см. в [этой статье](/sql/t-sql/statements/collations).

8. Заполнив форму **База данных SQL**, нажмите кнопку **Создать**, чтобы подготовить отдельную базу данных. Этот шаг может занять несколько минут.

9. На панели инструментов щелкните **Уведомления**, чтобы отслеживать процесс развертывания.

   ![уведомление](./media/sql-database-design-first-database/notification.png)

## <a name="create-a-server-level-ip-firewall-rule"></a>Создание правила брандмауэра IP-адресов на уровне сервера

Служба "База данных SQL" создает брандмауэр IP-адресов на уровне сервера. Он не позволяет внешним приложениям и средствам подключаться к серверу и к любой базе данных на сервере, если не создано правило брандмауэра, позволяющее пропускать их IP-адреса через брандмауэр. Чтобы разрешить внешние подключения к отдельной базе данных, необходимо сначала добавить правило брандмауэра IP-адресов, указав в нем свой IP-адрес (или диапазон IP-адресов). Выполните следующие действия, чтобы создать [правило брандмауэра IP-адресов на уровне сервера Базы данных SQL](sql-database-firewall-configure.md).

> [!IMPORTANT]
> Служба "База данных SQL" обменивается данными через порт 1433. Если вы пытаетесь подключиться к этой службе из корпоративной сети, исходящий трафик через порт 1433 может быть запрещен сетевым брандмауэром. В таком случае вы не сможете подключиться к отдельной базе данных, пока ваш администратор не откроет порт 1433.

1. По завершении развертывания щелкните раздел **Базы данных SQL** в меню слева и выберите *yourDatabase* на странице **Базы данных SQL**. После этого откроется страница обзора базы данных, где будет указано полное **имя сервера** (например, *yourserver.database.windows.net*) и будут предоставлены параметры для дальнейшей настройки.

2. Скопируйте полное имя сервера. Оно понадобится вам для подключения к серверу и связанным базам данных из SQL Server Management Studio.

   ![Имя сервера](./media/sql-database-design-first-database/server-name.png)

3. Щелкните **Настройка брандмауэра для сервера** на панели инструментов. Откроется страница **параметров брандмауэра** для сервера базы данных SQL.

   ![Правило брандмауэра IP-адресов на уровне сервера](./media/sql-database-design-first-database/server-firewall-rule.png)

4. На панели инструментов щелкните **Добавить IP-адрес клиента**, чтобы добавить текущий IP-адрес в новое правило брандмауэра IP-адресов. С использованием правила брандмауэра IP-адресов можно открыть порт 1433 для одного IP-адреса или диапазона IP-адресов.

5. Выберите команду **Сохранить**. Для текущего IP-адреса будет создано правило брандмауэра IP-адресов на уровне сервера, с помощью которого можно открыть порт 1433 сервера Базы данных SQL.

6. Нажмите кнопку **ОК**, а затем закройте страницу **Параметры брандмауэра**.

Теперь IP-адрес может проходить через брандмауэр IP-адресов. Теперь можно подключиться к отдельной базе данных с помощью SQL Server Management Studio или другого средства по своему усмотрению. Обязательно используйте созданную ранее учетную запись администратора сервера.

> [!IMPORTANT]
> По умолчанию доступ через брандмауэр IP-адресов Базы данных SQL включен для всех служб Azure. На этой странице щелкните **Откл.**, чтобы отключить доступ для всех служб Azure.

[!INCLUDE [sql-database-csharp-adonet-create-query-2](../../includes/sql-database-csharp-adonet-create-query-2.md)]

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали об основных задачах базы данных, таких как создание базы данных и таблиц, подключение к базе данных, загрузка данных и выполнение запросов. Вы научились выполнять следующие задачи:

> [!div class="checklist"]
> * Создание базы данных
> * Настройка правила брандмауэра.
> * подключаться к базе данных с помощью [Visual Studio и C#](sql-database-connect-query-dotnet-visual-studio.md);
> * создание таблиц.
> * Вставка, обновление, удаление и запрашивание данных.

Перейдите к следующему руководству, чтобы узнать о переносе данных.

> [!div class="nextstepaction"]
> [Перенос баз данных из SQL Server в Базу данных SQL Azure в автономном режиме с помощью DMS](../dms/tutorial-sql-server-to-azure-sql.md)
