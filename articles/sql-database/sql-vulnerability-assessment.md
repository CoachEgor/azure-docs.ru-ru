---
title: Оценки уязвимостей SQL в службе "База данных SQL Azure" | Документация Майкрософт
description: Узнайте, как настроить оценку уязвимостей SQL в службе "База данных SQL" и интерпретировать полученные отчеты.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: ronitr
ms.author: ronitr
ms.reviewer: vanto, carlrab
manager: craigg
ms.date: 03/12/2019
ms.openlocfilehash: 6906c7f173daf93775758199c0e7802b571d8b63
ms.sourcegitcommit: f6ba5c5a4b1ec4e35c41a4e799fb669ad5099522
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65153000"
---
# <a name="sql-vulnerability-assessment-service-helps-you-identify-database-vulnerabilities"></a>Служба оценки уязвимости SQL помогает определить уязвимость базы данных

Оценка уязвимостей SQL — это легко настраиваемая служба, которая поможет обнаруживать, отслеживать и устранять потенциальные уязвимости базы данных. Используйте его, чтобы заблаговременно повысить безопасность базы данных.

Оценка уязвимостей входит в состав предложения [Расширенная защита данных](sql-database-advanced-data-security.md), которое представляет собой унифицированный пакет расширенных возможностей безопасности SQL. Доступ к службе оценки уязвимостей и управление ею можно выполнять через центральный портал SQL ADS.

> [!NOTE]
> Оценка уязвимостей поддерживается в Базе данных SQL Azure, Управляемом экземпляре SQL Azure и Хранилище данных SQL Azure. Чтобы было проще, в этой статье База данных SQL используется при обращении к любой из этих служб управляемых баз данных.

## <a name="the-vulnerability-assessment-service"></a>Служба оценки уязвимостей

Оценка уязвимостей SQL (VA) является службой, которая обеспечивает представление о состоянии безопасности и предлагает практические действия для устранения проблем безопасности и повышения безопасности базы данных. Эта служба может помочь в выполнении следующих задач:  

- Соблюдение нормативных требований, требующих отчетов о сканировании базы данных.  
- Соблюдение стандартов конфиденциальности данных.  
- Мониторинг динамической среды базы данных, в которой сложно отслеживать изменения.  

"Оценка уязвимостей" — это служба сканирования, встроенная в службу "База данных SQL Azure". Эта служба использует базу знаний правил, которые помечают уязвимости системы безопасности и указывают на отклонения от рекомендаций, в том числе на неправильные настройки, избыточные разрешения и незащищенные конфиденциальные данные. Эти правила основаны на рекомендациях корпорации Майкрософт и направлены на проблемы безопасности, представляющие большую опасность для базы данных и ее ценных данных. Они охватывают как проблемы на уровне базы данных, так и проблемы безопасности на уровне сервера, такие как настройки брандмауэра сервера и разрешения на уровне сервера. В этих правилах также представлены многие требования различных контролирующих органов, что позволяет соблюдать их.  

Результаты проверки включают в себя практические действия для устранения каждой проблемы, а также настроенные сценарии исправления, если это возможно. Отчет об оценке можно настроить для своей среды, задав приемлемые базовые показатели для конфигураций разрешений, конфигураций функций и параметров базы данных.

## <a name="implementing-vulnerability-assessment"></a>Реализация оценки уязвимостей

Ниже приведены инструкции по реализации службы оценки уязвимостей в базе данных SQL.  

### <a name="1-run-a-scan"></a>1. Выполнение проверки  

Чтобы начать работу со службой оценки уязвимостей, перейдите к разделу **Расширенная защита данных** под заголовком "Безопасность" на панели "База данных SQL Azure". Щелкните, чтобы включить расширенную защиту данных, а затем щелкните **Выбор хранилища** или карту **Оценка уязвимостей**, после чего автоматически откроется карта параметров оценки уязвимостей для всего сервера SQL.

Начните с настройки учетной записи хранения, в которой будут храниться результаты проверки для всех баз данных на сервере. Дополнительные сведения об учетных записях хранения см. в разделе [Об учетных записях хранения Azure](../storage/common/storage-create-storage-account.md). После настройки хранилища щелкните **Проверить**, чтобы проверить базу данных на наличие уязвимостей.
  
![Проверка базы данных](./media/sql-vulnerability-assessment/pp_va_initialize.png)  

  > [!NOTE]
  > Проверка является простой и безопасной. Она занимает несколько секунд и является исключительно операцией чтения. Она не вносит никаких изменений в базу данных.  

### <a name="2-view-the-report"></a>2. Просмотр отчета

После завершения проверки на портале Azure автоматически отображается отчет о проверке. В отчете представлен обзор состояния безопасности: количество обнаруженных проблем и их уровень серьезности. Результаты включают в себя предупреждения об отклонениях от рекомендаций, а также моментальный снимок параметров безопасности, например субъектов и ролей базы данных и соответствующих разрешений. Отчет о проверке также содержит карту конфиденциальных данных, обнаруженных в базе данных, и включает рекомендации по классификации этих данных с использованием функции [обнаружения данных и классификации](sql-database-data-discovery-and-classification.md).

![Просмотр отчета](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Анализ результатов и устранение проблем

Просмотрите результаты и определите, какие проблемы в отчете действительно нарушают безопасность в вашей среде. Изучите подробные сведения о каждой проблеме, чтобы понять, как она влияет на безопасность и почему проверка безопасности не пройдена. Используйте практические рекомендации по исправлению, представленные в отчете, чтобы устранить проблему.  

![Анализ отчета](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. Настройка базовых показателей

При просмотре результатов оценки можно пометить определенные результаты как приемлемые *базовые* показатели для своей среды. Базовые показатели — важные параметры, влияющие на содержимое отчета о проверке. При следующих циклах проверки результаты, которые соответствуют базовым показателям, будут рассматриваются как прошедшие проверку. После настройки состояния базовых показателей безопасности служба оценки уязвимостей будет сообщать только об отклонениях от базовых показателей, и вы сможете сосредоточиться на важных проблемах.  

![Настройка базовых показателей](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Выполнение новой проверки для просмотра настраиваемого отчета об отслеживании

После завершения настройки **базовых показателей правила** выполните новую проверку, чтобы просмотреть настраиваемый отчет. Теперь служба оценки уязвимостей сообщает о проблемах безопасности, которые связаны с отклонением от утвержденного состояния базовых показателей.

![Просмотр настраиваемого отчета](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

Теперь службу оценки уязвимостей можно использовать, чтобы постоянно отслеживать безопасность базы данных и обеспечивать ее высокий уровень, а также следить за соблюдением политик организации. Если требуются отчеты о соответствии, вам могут пригодиться отчеты службы оценки уязвимостей, чтобы упростить процесс соблюдения требований.  

### <a name="6-set-up-periodic-recurring-scans"></a>6. Настройка периодически повторяющихся проверок

Перейдите к параметрам оценки уязвимостей, чтобы включить **периодическое повторное сканирование**. Эти параметры позволяют настроить автоматический запуск сканирования уязвимостей в базе данных один раз в неделю. Сводка результатов отправляется ​​на указанный адрес электронной почты.

![Просмотр настраиваемого отчета](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. Экспорт отчета об оценке

Щелкните **Экспорт результатов проверки**, чтобы создать скачиваемый отчет Excel о результатах проверки. Этот отчет содержит вкладку со сводными данными об оценке, в том числе все невыполненные проверки, а также вкладку **Журнал** с полным набором результатов сканирования, в том числе все выполненные проверки и сведения о результате каждой из них.

### <a name="8-view-scan-history"></a>8. Просмотр журнала сканирования

Щелкните **Журнал сканирования** на панели оценки уязвимостей, чтобы просмотреть журнал сканирований, которые выполнялись в этой базе данных ранее. Выберите определенное сканирование из списка, чтобы просмотреть подробные результаты.

Теперь службу оценки уязвимостей можно использовать, чтобы постоянно отслеживать безопасность базы данных и обеспечивать ее высокий уровень, а также следить за соблюдением политик организации. Если требуются отчеты о соответствии, вам могут пригодиться отчеты службы оценки уязвимостей, чтобы упростить процесс соблюдения требований.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Управление оценками уязвимостей с помощью Azure PowerShell

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> Модуль PowerShell Azure Resource Manager по-прежнему поддерживается базой данных SQL Azure, но все будущие разработки — для модуля Az.Sql. Для этих командлетов см. в разделе [AzureRM.Sql](https://docs.microsoft.com/powershell/module/AzureRM.Sql/). Аргументы для команд в модуле Az и в модуле AzureRm практически идентичны.

Для программного управления оценками уязвимостей можно использовать командлеты Azure PowerShell. Поддерживаемые командлеты:

- [Update-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting)

  Обновляет параметры оценки уязвимости базы данных.
- [Get-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting)

  Возвращает параметры оценки уязвимости базы данных.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting)

  Очищает параметры оценки уязвимости базы данных.
- [Set-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Устанавливает базовое правило для оценки уязвимости.
- [Get-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Получает базовое правило оценки уязвимости для данного правила.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Очищает базовое правило оценки уязвимости. (сначала необходимо установить базовое правило перед удалением его с помощью этого командлета);
- [Start-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan)

  Инициирует начало сканирования уязвимости.
- [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord)

   Получает все записи об оценке уязвимости, связанные с данной базой данных.
- [Convert-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan)

  Преобразует результаты сканирования оценки уязвимости в файл Excel.

Пример сценария см. в разделе [Azure SQL Vulnerability Assessment PowerShell support](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/) (Поддержка PowerShell для оценки уязвимостей Azure SQL).

## <a name="next-steps"></a>Дальнейшие действия  

- Дополнительные сведения о [расширенной защите данных](sql-database-advanced-data-security.md).
- Дополнительные сведения об [обнаружении и классификации данных](sql-database-data-discovery-and-classification.md).
