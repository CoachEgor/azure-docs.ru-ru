---
title: Уровень служб "Критически важный для бизнеса"
description: Уровень "Критически важный для бизнеса" для Базы данных SQL Azure
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: jovanpop-msft
ms.author: jovanpop
ms.reviewer: sstein
ms.date: 12/04/2018
ms.openlocfilehash: fc328c34c1543a75fdc885087d44b28e24c0850a
ms.sourcegitcommit: ac56ef07d86328c40fed5b5792a6a02698926c2d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/08/2019
ms.locfileid: "73818231"
---
# <a name="business-critical-tier---azure-sql-database"></a>Уровень "Критически важный для бизнеса" для Базы данных SQL Azure

> [!NOTE]
> Уровень "Критически важный для бизнеса" называется уровнем "Премиум" в модели приобретения на основе единиц DTU. Сравнение модели приобретения на основе виртуальных ядер и DTU см. в статье [Ресурсы и модели приобретения для Базы данных SQL Azure](sql-database-purchase-models.md).

База данных SQL Azure основана на архитектуре ядра СУБД SQL Server, которая соответствует облачной среде, чтобы даже в случае сбоя инфраструктуры обеспечить доступность на уровне 99,99 %. Существует три модели архитектуры, которые используются в Базе данных SQL Azure.
- уровни "Общего назначения" или "Стандартный"; 
- уровни "Критически важный для бизнеса" или "Премиум";
- Уровень "Гипермасштабирование"

Модель уровня служб "Премиум" или "Критически важный для бизнеса" основана на кластере процессов ядра СУБД. Эта модель полагается на тот факт, что всегда есть кворум доступных узлов ядра СУБД, и она имеет минимальное влияние на производительность рабочей нагрузки даже во время обслуживания.

Azure прозрачно обновляет и исправляет базовую операционную систему, драйверы и ядро СУБД SQL Server с минимальным простоем работы пользователей. 

Доступность ценовой категории"Премиум" обеспечивается на уровне служб ценовых категорий "Премиум" и "Критически важный для бизнеса" Базы данных SQL Azure. Она предназначена для интенсивных рабочих нагрузок, для которых недопустимо снижение производительности из-за текущих операций обслуживания.

В модели "Премиум" база данных SQL Azure объединяет ресурсы вычисления и хранения в одном узле. Высокий уровень доступности в этой архитектурной модели достигается за счет репликации вычислений (процесс ядра СУБД SQL Server) и хранения (локально подключенный диск SSD), развернутых в четырехузловом кластере, при использовании решения, аналогичного [группам доступности AlwaysOn](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) в SQL Server.

![Кластер узлов ядра СУБД](media/sql-database-managed-instance/business-critical-service-tier.png)

Процесс ядра СУБД SQL и базовые MDF- и LDF-файлы размещаются на одном узле с локально подключенным хранилищем SSD, что обеспечивает малую задержку рабочей нагрузки. Высокий уровень доступности реализуется с помощью технологии, аналогичной [группам доступности AlwaysOn](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) SQL Server Каждая база данных представляет собой кластер узлов баз данных с одной базой данных-источником, доступной для клиентской рабочей нагрузки, и тремя вторичными процессами, содержащими копии данных. Основной узел постоянно отправляет изменения на дополнительные узлы, чтобы данные были доступны на вторичных репликах в случае сбоя основного узла по любой причине. Отработку отказа выполняет ядро СУБД SQL Server — одна вторичная реплика становится основным узлом, и создается новая вторичная реплика, чтобы обеспечить достаточное количество узлов в кластере. Рабочая нагрузка автоматически перенаправляется на новый основной узел.

Кроме того, в кластер ценовой категории "Критически важный для бизнеса" встроена возможность [масштабирования для чтения](sql-database-read-scale-out.md), предоставляющая встроенный бесплатный узел только для чтения, который может использоваться для выполнения запросов только на чтение (например, чтение отчетов), которые не должен влиять на производительность основной рабочей нагрузки.

## <a name="when-to-choose-this-service-tier"></a>Когда нужно выбирать этот уровень служб?

Уровень служб "Критически важный для бизнеса" предназначен для приложений, требующих низкой задержки при получении ответов из базового хранилища SSD (в среднем 1–2 мс), быстрого восстановления при сбое базовой инфраструктуры, а также разгрузки отчетов, аналитики и запросов, доступных только для чтения, в бесплатную считываемую вторичную реплику базы данных-источника.

Ниже приведены основные причины, по которым следует выбрать критически важный для бизнеса уровня служб вместо уровня общего назначения.
-   Низкие требования к задержке ввода-вывода — Рабочая нагрузка, для которой требуется быстрое реагирование с уровня хранилища (1-2 миллисекунд в среднем), должна использовать уровень критически важный для бизнеса. 
-   Частое взаимодействие между приложением и базой данных. Приложение, которое не может использовать кэширование приложений или [пакетирование запросов](sql-database-use-batching-to-improve-performance.md) , а также необходимость отправки большого количества запросов SQL, которые должны быть быстро обработаны, являются хорошими кандидатами для критически важный для бизнеса уровня.
-   Большое количество обновлений — операции вставки, обновления и удаления изменяют страницы данных в памяти ("грязную" страницу), которые должны быть сохранены в файлах данных с `CHECKPOINT`ной операцией. Потенциальный сбой процесса ядра СУБД или отработка отказа базы данных с большим количеством "грязных" страниц может увеличить время восстановления на общего назначения уровне. Уровень критически важный для бизнеса используется при наличии рабочей нагрузки, которая вызывает много изменений в памяти. 
-   Долго выполняющиеся транзакции, изменяющие данные. Транзакции, которые открываются дольше, препятствуют усечению файла журнала, который может увеличить размер журнала и число [виртуальных файлов журнала (VLF)](https://docs.microsoft.com/sql/relational-databases/sql-server-transaction-log-architecture-and-management-guide#physical_arch). Большое число VLF может замедлить восстановление базы данных после отработки отказа.
-   Рабочая нагрузка с отчетами и аналитическими запросами, которые можно перенаправить на бесплатную вторичную реплику только для чтения.
- Более высокая устойчивость и более быстрое восстановление после сбоев. В случае сбоя системы база данных на основном экземпляре будет отключена, а одна из вторичных реплик будет немедленно становиться новой базой данных-источником для чтения и записи, готовой к обработке запросов. Ядру СУБД не нужно анализировать и повторять транзакции из файла журнала и загружать все данные в буфер памяти.
- Расширенная защита от повреждений данных. критически важный для бизнеса уровень использует реплики базы данных в фоновом режиме для обеспечения непрерывности бизнес-процессов, поэтому служба также использует автоматическое восстановление страниц, то есть ту же технологию, которая используется для SQL Server базы данных. [зеркальное отображение и группы доступности](https://docs.microsoft.com/sql/sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring). В случае, если реплике не удается прочитать страницу из-за проблемы целостности данных, будет получена новая копия страницы из другой реплики, которая заменит нечитаемую страницу без потери данных или простоя клиента. Эта функция применима на уровне общего назначения, если база данных имеет геовторичную реплику.
- Более высокая доступность — уровень критически важный для бизнеса в конфигурации с несколькими AZ гарантирует доступность 99,995% по сравнению с 99,99% уровня общего назначения.
- Для быстрого георепликации критически важный для бизнеса уровень, настроенный с георепликацией, имеет гарантированную целевую точку восстановления (RPO) 5 секунд и целевое время восстановления (RTO) в 30 секунд для 100% развернутых часов.

## <a name="next-steps"></a>Дальнейшие действия

- Найдите характеристики ресурсов (количество ядер, операций ввода-вывода, памяти) критически важный для бизнеса уровня в [управляемый экземпляр](sql-database-managed-instance-resource-limits.md#service-tier-characteristics), отдельной базе данных в модели [Виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#business-critical---provisioned-compute---gen4) или [модели DTU](sql-database-dtu-resource-limits-single-databases.md#premium-service-tier)или эластичном пуле в модели [Виртуальное ядро](sql-database-vcore-resource-limits-elastic-pools.md#business-critical---provisioned-compute---gen4) и [DTU](sql-database-dtu-resource-limits-elastic-pools.md#premium-elastic-pool-limits).
- См. дополнительные сведения об уровнях [Общего назначения](sql-database-service-tier-general-purpose.md) и [Гипермасштабирование](sql-database-service-tier-hyperscale.md).
- См. дополнительные сведения о [Service Fabric](../service-fabric/service-fabric-overview.md).
- Дополнительные сведения об обеспечении высокой доступности и аварийного восстановления см. в руководстве по [обеспечении непрерывности бизнес-процессов](sql-database-business-continuity.md).
