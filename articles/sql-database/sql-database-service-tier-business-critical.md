---
title: Уровень служб "Критически важный для бизнеса"
description: Уровень "Критически важный для бизнеса" для Базы данных SQL Azure
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: jovanpop-msft
ms.author: jovanpop
ms.reviewer: sstein
ms.date: 12/04/2018
ms.openlocfilehash: fc328c34c1543a75fdc885087d44b28e24c0850a
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79268682"
---
# <a name="business-critical-tier---azure-sql-database"></a>Уровень "Критически важный для бизнеса" для Базы данных SQL Azure

> [!NOTE]
> Уровень "Критически важный для бизнеса" называется уровнем "Премиум" в модели приобретения на основе единиц DTU. Сравнение модели приобретения на основе виртуальных ядер и DTU см. в статье [Ресурсы и модели приобретения для Базы данных SQL Azure](sql-database-purchase-models.md).

База данных SQL Azure основана на архитектуре ядра СУБД SQL Server, которая соответствует облачной среде, чтобы даже в случае сбоя инфраструктуры обеспечить доступность на уровне 99,99 %. Существует три модели архитектуры, которые используются в Базе данных SQL Azure.
- уровни "Общего назначения" или "Стандартный"; 
- уровни "Критически важный для бизнеса" или "Премиум";
- Уровень "Гипермасштабирование"

Модель уровня служб "Премиум" или "Критически важный для бизнеса" основана на кластере процессов ядра СУБД. Эта модель полагается на тот факт, что всегда есть кворум доступных узлов ядра СУБД, и она имеет минимальное влияние на производительность рабочей нагрузки даже во время обслуживания.

Azure прозрачно обновляет и исправляет базовую операционную систему, драйверы и ядро СУБД SQL Server с минимальным простоем работы пользователей. 

Доступность ценовой категории"Премиум" обеспечивается на уровне служб ценовых категорий "Премиум" и "Критически важный для бизнеса" Базы данных SQL Azure. Она предназначена для интенсивных рабочих нагрузок, для которых недопустимо снижение производительности из-за текущих операций обслуживания.

В модели "Премиум" база данных SQL Azure объединяет ресурсы вычисления и хранения в одном узле. Высокий уровень доступности в этой архитектурной модели достигается за счет репликации вычислений (процесс ядра СУБД SQL Server) и хранения (локально подключенный диск SSD), развернутых в четырехузловом кластере, при использовании решения, аналогичного [группам доступности AlwaysOn](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) в SQL Server.

![Кластер узлов ядра СУБД](media/sql-database-managed-instance/business-critical-service-tier.png)

Процесс ядра СУБД SQL и базовые MDF- и LDF-файлы размещаются на одном узле с локально подключенным хранилищем SSD, что обеспечивает малую задержку рабочей нагрузки. Высокий уровень доступности реализуется с помощью технологии, аналогичной [группам доступности AlwaysOn](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) SQL Server Каждая база данных представляет собой кластер узлов баз данных с одной базой данных-источником, доступной для клиентской рабочей нагрузки, и тремя вторичными процессами, содержащими копии данных. Основной узел постоянно отправляет изменения на дополнительные узлы, чтобы данные были доступны на вторичных репликах в случае сбоя основного узла по любой причине. Отработку отказа выполняет ядро СУБД SQL Server — одна вторичная реплика становится основным узлом, и создается новая вторичная реплика, чтобы обеспечить достаточное количество узлов в кластере. Рабочая нагрузка автоматически перенаправляется на новый основной узел.

Кроме того, в кластер ценовой категории "Критически важный для бизнеса" встроена возможность [масштабирования для чтения](sql-database-read-scale-out.md), предоставляющая встроенный бесплатный узел только для чтения, который может использоваться для выполнения запросов только на чтение (например, чтение отчетов), которые не должен влиять на производительность основной рабочей нагрузки.

## <a name="when-to-choose-this-service-tier"></a>Когда нужно выбирать этот уровень служб?

Уровень служб "Критически важный для бизнеса" предназначен для приложений, требующих низкой задержки при получении ответов из базового хранилища SSD (в среднем 1–2 мс), быстрого восстановления при сбое базовой инфраструктуры, а также разгрузки отчетов, аналитики и запросов, доступных только для чтения, в бесплатную считываемую вторичную реплику базы данных-источника.

Основные причины, по которым следует выбрать уровень обслуживания Business Critical вместо уровня общего назначения:
-   Низкие требования к задержке и смнисходительного к ону - рабочая нагрузка, которая требует быстрого реагирования от слоя хранения (в среднем 1-2 миллисекунды), должна использовать уровень Business Critical. 
-   Частое общение между приложением и базой данных. Приложение, которое не может использовать кэширование уровня приложения или [запросить пакетирование,](sql-database-use-batching-to-improve-performance.md) и необходимо быстро отправить много запросов, которые необходимо быстро обработать, являются хорошими кандидатами на уровень бизнес-критического уровня.
-   Большое количество обновлений - вставка, обновление и удаление операций изменить страницы данных в памяти (грязная страница), которые должны быть сохранены в файлах данных с `CHECKPOINT` операцией. Потенциальный сбой процесса обработки движков базы данных или сбой базы данных с большим количеством грязных страниц может увеличить время восстановления на уровне General Purpose. Используйте критический уровень бизнеса, если у вас есть рабочая нагрузка, которая вызывает много изменений в памяти. 
-   Долгосрочные транзакции, изменяющие данные. Транзакции, которые открываются в течение более длительного времени, предотвращают усечение файла журнала, что может увеличить размер журнала и количество [файлов виртуального журнала (VLF).](https://docs.microsoft.com/sql/relational-databases/sql-server-transaction-log-architecture-and-management-guide#physical_arch) Большое количество VLF может замедлить восстановление базы данных после сбоя.
-   Рабочая нагрузка с отчетными и аналитическими запросами, которые могут быть перенаправлены на бесплатную вторичную реплику только для чтения.
- Более высокая устойчивость и более быстрое восстановление после сбоев. В случае сбоя системы база данных в первичной инстанции будет отключена, и одна из вторичных реплик сразу же станет новой основной базой данных считывания, готовой обрабатывать запросы. Движок базы данных не нуждается в анализе и повторе нистой транзакций из файла журнала и загрузке всех данных в буфер ео.
- Расширенная защита от коррупции данных - Бизнес Критический уровень использует реплики базы данных за кулисами для целей непрерывности бизнеса, и поэтому служба также использует автоматический ремонт страницы, которая является той же технологией, используемой для [зеркального отражения базы](https://docs.microsoft.com/sql/sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring)данных и доступности групп sL Server. В случае, если реплика не может прочитать страницу из-за проблемы целостности данных, свежая копия страницы будет извлечена из другой реплики, заменив нечитаемую страницу без потери данных или простоя клиента. Эта функциональность применима на уровне общего назначения, если база данных имеет геовторичную реплику.
- Более высокая доступность - Критический уровень бизнеса в конфигурации Multi-Аз гарантирует доступность 99,995% по сравнению с 99,99% от уровня Общего назначения.
- Быстрая геовосстановление - Бизнес критический уровень, настроенный с георепликацией, имеет гарантированную цель точки восстановления (RPO) 5 сек и цель времени восстановления (RTO) 30 сек в течение 100% развернутых часов.

## <a name="next-steps"></a>Дальнейшие действия

- Найти характеристики ресурсов (количество ядер, IO, память) бизнес-критического уровня в [управляемом уровне](sql-database-managed-instance-resource-limits.md#service-tier-characteristics), Единая база данных в [модели vCore](sql-database-vcore-resource-limits-single-databases.md#business-critical---provisioned-compute---gen4) или [модель DTU,](sql-database-dtu-resource-limits-single-databases.md#premium-service-tier)или упругий пул в [модели vCore](sql-database-vcore-resource-limits-elastic-pools.md#business-critical---provisioned-compute---gen4) и [модели DTU.](sql-database-dtu-resource-limits-elastic-pools.md#premium-elastic-pool-limits)
- См. дополнительные сведения об уровнях [Общего назначения](sql-database-service-tier-general-purpose.md) и [Гипермасштабирование](sql-database-service-tier-hyperscale.md).
- Узнайте больше о [сервисной ткани](../service-fabric/service-fabric-overview.md).
- Дополнительные возможности для обеспечения высокой доступности и аварийного восстановления можно узнать на примере [непрерывности бизнеса.](sql-database-business-continuity.md)
