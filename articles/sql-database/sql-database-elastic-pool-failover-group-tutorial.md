---
title: Учебник. Добавление эластичного пула базы данных SQL Azure в группу отработки отказа | Документация Майкрософт
description: Добавьте эластичный пул базы данных SQL Azure в группу отработки отказа с помощью портал Azure, PowerShell или Azure CLI.
services: sql-database
ms.service: sql-database
ms.subservice: high-availability
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: MashaMSFT
ms.author: mathoma
ms.reviewer: sstein, carlrab
ms.date: 06/19/2019
ms.openlocfilehash: 2d46e6f1d5c7079ab5bbfea39a85ea0a7592afc8
ms.sourcegitcommit: 44e85b95baf7dfb9e92fb38f03c2a1bc31765415
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/28/2019
ms.locfileid: "70099314"
---
# <a name="tutorial-add-an-azure-sql-database-elastic-pool-to-a-failover-group"></a>Учебник. Добавление эластичного пула базы данных SQL Azure в группу отработки отказа

Настройте группу отработки отказа для эластичного пула базы данных SQL Azure и тестовую отработку отказа с помощью портал Azure.  Из этого учебника вы узнаете следующее:

> [!div class="checklist"]
> - Создайте отдельную базу данных SQL Azure.
> - Добавьте отдельную базу данных в эластичный пул. 
> - Создайте [группу](sql-database-auto-failover-group.md) отработки отказа для эластичного пула между двумя логическими серверами SQL.
> - Тестовая отработка отказа.

## <a name="prerequisites"></a>Предварительные требования

В рамках этого руководства вам потребуются: 

- Подписка Azure. [Создайте бесплатную учетную запись](https://azure.microsoft.com/free/) , если она еще не создана.


## <a name="1---create-a-single-database"></a>1\. Создание отдельной базы данных 

[!INCLUDE [sql-database-create-single-database](includes/sql-database-create-single-database.md)]

## <a name="2---add-single-database-to-elastic-pool"></a>2\. Добавление отдельной базы данных в эластичный пул

1. На портале Azure в меню слева выберите **Azure SQL**. Если **SQL Azure** отсутствует в списке, выберите **все службы**, а затем введите Azure SQL в поле поиска. Используемых Выберите звезду рядом с элементом **Azure SQL** , чтобы добавить его в избранное, и добавьте его в качестве элемента в левую навигацию. 
1. Выберите **+ Добавить** , чтобы открыть страницу **Выбор варианта развертывания SQL** . Чтобы просмотреть дополнительные сведения о различных базах данных, выберите Показать сведения в плитке базы данных.
1. Выберите **эластичный пул** в раскрывающемся списке **тип ресурса** на плитке **базы данных SQL** . Выберите **создать** , чтобы создать пул эластичных БД. 

    ![Выбор эластичного пула](media/sql-database-elastic-pool-failover-group-tutorial/select-azure-sql-elastic-pool.png)

1. Настройте эластичный пул со следующими значениями:
   - **Имя.** Укажите уникальное имя для эластичного пула, например `myElasticPool`. 
   - **Подписка**: Выберите подписку в раскрывающемся списке.
   - **Группа ресурсов**: Выберите `myResourceGroup` из раскрывающегося списка группу ресурсов, созданную в разделе 1. 
   - **Сервер** — В раскрывающемся списке выберите сервер, созданный в разделе 1.  

       ![Создание нового сервера для эластичного пула](media/sql-database-elastic-pool-failover-group-tutorial/use-existing-server-for-elastic-pool.png)

   - **Вычисления и хранилище**. Выберите **Настройка эластичного пула** для настройки вычислений, хранения и добавления отдельной базы данных в эластичный пул. На вкладке **параметры пула** оставьте значение по умолчанию го поколения, равное 2 виртуальных ядер и 32 ГБ. 

1. На странице **Настройка** перейдите на вкладку **базы данных** , а затем выберите **Добавить базу данных**. Выберите базу данных, созданную в разделе 1, а затем нажмите кнопку **Применить** , чтобы добавить ее в эластичный пул. Нажмите кнопку **Применить** еще раз, чтобы применить параметры эластичного пула, и закройте страницу **Настройка** . 

    ![Добавление базы данных SQL в эластичный пул](media/sql-database-elastic-pool-failover-group-tutorial/add-database-to-elastic-pool.png)

1. Выберите **проверить и создать** , чтобы проверить параметры эластичного пула, а затем щелкните **создать** , чтобы создать пул эластичных БД. 


## <a name="3---create-the-failover-group"></a>3\. Создание группы отработки отказа 
На этом шаге вы создадите [группу](sql-database-auto-failover-group.md) отработки отказа между существующим сервером Azure SQL Server и новым сервером Azure SQL Server в другом регионе. Затем добавьте эластичный пул в группу отработки отказа. 

1. Выберите **Azure SQL** в меню слева [портал Azure](https://portal.azure.com). Если **SQL Azure** отсутствует в списке, выберите **все службы**, а затем введите Azure SQL в поле поиска. Используемых Выберите звезду рядом с элементом **Azure SQL** , чтобы добавить его в избранное, и добавьте его в качестве элемента в левую навигацию. 
1. Выберите эластичный пул, созданный в предыдущем разделе, например `myElasticPool`. 
1. В области **Обзор** выберите имя сервера в поле **имя сервера** , чтобы открыть параметры для сервера.
  
    ![Открытие сервера для эластичного пула](media/sql-database-elastic-pool-failover-group-tutorial/server-for-elastic-pool.png)

1. Выберите **группы** отработки отказа в области **Параметры** , а затем щелкните **Добавить группу** , чтобы создать новую группу отработки отказа. 

    ![Добавить новую группу отработки отказа](media/sql-database-elastic-pool-failover-group-tutorial/elastic-pool-failover-group.png)

1. На странице **Группа** отработки отказа введите или выберите следующие значения, а затем щелкните **создать**.
    - **Имя группы**отработки отказа: Введите уникальное имя группы отработки отказа, `failovergrouptutorial`например. 
    - **Сервер-получатель**: Выберите параметр для *настройки обязательных параметров* , а затем выберите **Создание нового сервера**. Кроме того, можно выбрать уже существующий сервер в качестве сервера-получателя. После ввода следующих значений для нового сервера-получателя нажмите **кнопку Выбрать**. 
        - **Имя сервера**. Введите уникальное имя сервера-получателя, например `mysqlsecondary`. 
        - **Учетные данные администратора сервера для входа**. Тип`azureuser`
        - **Пароль**. Введите сложный пароль, который соответствует требованиям к паролю.
        - **Расположение.** Выберите расположение из раскрывающегося списка, например `East US`. Это расположение не может совпадать с расположением основного сервера.

       > [!NOTE]
       > Параметры имени для входа и брандмауэра сервера должны совпадать с именем сервера источника. 
    
       ![Создание сервера-получателя для группы отработки отказа](media/sql-database-elastic-pool-failover-group-tutorial/create-secondary-failover-server.png)

1. Выберите **базы данных в группе** , а затем выберите эластичный пул, созданный в разделе 2. Должно появиться предупреждение, предлагающее создать эластичный пул на сервере-получателе. Выберите предупреждение и нажмите кнопку **ОК** , чтобы создать эластичный пул на сервере-получателе. 
        
    ![Добавление эластичного пула в группу отработки отказа](media/sql-database-elastic-pool-failover-group-tutorial/add-elastic-pool-to-failover-group.png)
        
1. Выберите **выбрать** , чтобы применить параметры эластичного пула к группе отработки отказа, а затем щелкните **создать** , чтобы создать группу отработки отказа. Добавление эластичного пула в группу отработки отказа автоматически начнет процесс георепликации. 


## <a name="4---test-failover"></a>4\. тестовая отработка отказа 
На этом шаге группа отработки отказа будет передаваться на сервер-получатель, а затем восстановлена с помощью портал Azure. 

1. Выберите **Azure SQL** в меню слева [портал Azure](https://portal.azure.com). Если **SQL Azure** отсутствует в списке, выберите **все службы**, а затем введите Azure SQL в поле поиска. Используемых Выберите звезду рядом с элементом **Azure SQL** , чтобы добавить его в избранное, и добавьте его в качестве элемента в левую навигацию. 
1. Выберите эластичный пул, созданный в предыдущем разделе, например `myElasticPool`. 
1. Выберите имя сервера в поле **имя сервера** , чтобы открыть параметры для сервера.

    ![Открытие сервера для эластичного пула](media/sql-database-elastic-pool-failover-group-tutorial/server-for-elastic-pool.png)

1. Выберите **группы** отработки отказа в области **Параметры** , а затем выберите группу отработки отказа, созданную в разделе 2. 
  
   ![Выбор группы отработки отказа на портале](media/sql-database-elastic-pool-failover-group-tutorial/select-failover-group.png)

1. Проверьте, какой сервер является основным, а какой — сервером-получателем. 
1. Выберите отработка отказа в области задач для переключения группы отработки отказа, содержащей эластичный пул. 
1. Нажмите кнопку **Да** в предупреждении, уведомляющее о том, что сеансы TDS будут отключены. 

   ![Переключение группы отработки отказа, содержащей базу данных SQL](media/sql-database-elastic-pool-failover-group-tutorial/failover-sql-db.png)

1. Проверьте, какой сервер является основным, какой сервер является вторичным. Если отработка отказа прошла успешно, у двух серверов должны быть переключенные роли. 
1. Снова установите флажок отработка отказа, чтобы вернуть группу отработки отказа к исходным параметрам. 

## <a name="clean-up-resources"></a>Очистка ресурсов 
Очистите ресурсы, удалив группу ресурсов. 

1. Перейдите к группе ресурсов в [портал Azure](https://portal.azure.com).
1. Выберите **Удалить группу ресурсов** , чтобы удалить все ресурсы в группе, а также саму группу ресурсов. 
1. Введите имя группы `myResourceGroup`ресурсов, в текстовом поле и нажмите кнопку **Удалить** , чтобы удалить группу ресурсов.  


## <a name="next-steps"></a>Следующие шаги

В этом руководстве вы добавили одну базу данных SQL Azure в группу отработки отказа и проверили отработку отказа. Вы научились выполнять следующие задачи:

> [!div class="checklist"]
> - Создайте отдельную базу данных SQL Azure.
> - Добавьте отдельную базу данных в эластичный пул. 
> - Создайте [группу](sql-database-auto-failover-group.md) отработки отказа для эластичного пула между двумя логическими серверами SQL.
> - Тестовая отработка отказа.

Перейдите к следующему руководству о миграции с помощью DMS.

> [!div class="nextstepaction"]
> [Учебник. Миграция SQL Server в базу данных в составе пула с помощью DMS](../dms/tutorial-sql-server-to-azure-sql.md?toc=/azure/sql-database/toc.json)
