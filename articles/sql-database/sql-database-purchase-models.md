---
title: Модели приобретения для Базы данных SQL Azure | Документы Майкрософт
description: Дополнительные сведения о модели приобретения, доступные для базы данных SQL Azure.
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: carlrab
manager: craigg
ms.date: 04/26/2019
ms.openlocfilehash: 98c19732c372fbcda3ca8e746d002f94c2687b22
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66431367"
---
# <a name="choose-between-the-vcore-and-the-dtu-purchasing-models"></a>Выбор между виртуальных ядер и DTU, приобретение моделей

База данных SQL Azure позволяет легко приобрести это полностью управляемая платформа как служба (PaaS) ядра СУБД, в соответствии со своими потребностями производительности и стоимости. В зависимости от модели развертывания, который вы выбрали для базы данных SQL Azure можно выбрать модель приобретения, которая подходит вам.

- [Виртуальное ядро (виртуальное)-модель приобретения на основе](sql-database-service-tiers-vcore.md) (рекомендуется). Модель приобретения на этом предоставляет возможность выбора между подготовленных вычислительных ресурсов уровня и уровня вычислений без сервера (Предварительная версия). С уровнем подготовленных вычислительных ресурсов выберите точный объем вычислительных ресурсов, которые всегда были подготовлены для рабочей нагрузки. С уровнем бессерверных вычислений вами автоматическое масштабирование вычислительных ресурсов для настраиваемых вычислений диапазона. С помощью этот уровень вычислений можно также автоматически приостановить и возобновить базы данных, на основе действий рабочей нагрузки. Цена за единицу виртуальное в единицу времени меньше подготовленных вычислительных ресурсов уровня, а не на уровне бессерверных вычислений.
- [Единиц транзакций базы данных (DTU) — модель приобретения на основе](sql-database-service-tiers-dtu.md). Это модель приобретения обеспечивает распространение вычислений и хранения пакетов, сбалансировать для стандартных рабочих нагрузок.

Для разных моделей развертывания базы данных SQL Azure доступны разные модели приобретения:

- Для [отдельных баз данных](sql-database-single-databases-manage.md) и [эластичных пулов](sql-database-elastic-pool.md) в [Базе данных SQL Azure](sql-database-technical-overview.md) предусмотрены две модели приобретения: на основе [единиц DTU](sql-database-service-tiers-dtu.md) и [виртуальных ядер](sql-database-service-tiers-vcore.md).
- [Управляемый экземпляр](sql-database-managed-instance.md) вариант развертывания в базе данных SQL Azure предлагает только [модель приобретения на основе виртуальных ядер](sql-database-service-tiers-vcore.md).
- [Уровня службы гипермасштабируемого](sql-database-service-tier-hyperscale.md) доступна для отдельных баз данных, которые используют [модель приобретения на основе виртуальных ядер](sql-database-service-tiers-vcore.md).

Следующие таблицы и диаграммы Сравнение и сопоставление прогнозов на основе виртуальных ядер и модели приобретения на основе единиц DTU:

|**Модель приобретения**|**Описание**|**Оптимально для**|
|---|---|---|
|Модель приобретения на основе единиц DTU|Эта модель основана на комплексной оценке вычислительных ресурсов, хранилища и ресурсов ввода/вывода. Вычислительных операциях разного размера, выражаются в Dtu для отдельных баз данных, а также в единицах транзакций эластичной базы данных (Edtu) для эластичных пулов. Дополнительные сведения о Dtu и Edtu см. в разделе [Каковы Dtu и Edtu?](sql-database-purchase-models.md#dtu-based-purchasing-model).|Рекомендации для клиентов, которым нужны простые, предварительно настроенные параметры ресурсов.|
|Модель приобретения на основе виртуальных ядер|Эта модель позволяет независимо выбрать ресурсы вычисления и хранилища. Модель приобретения на основе виртуальных ядер также позволяет применять [Преимущество гибридного использования Azure для SQL Server](https://azure.microsoft.com/pricing/hybrid-benefit/), чтобы добиться снижения затрат.|Для клиентов, которые ценят гибкость, контроль и прозрачность.|
||||  

![Сравнение модели цен](./media/sql-database-service-tiers/pricing-model.png)

## <a name="compute-costs"></a>Затраты на вычислительные ресурсы

### <a name="provisioned-compute-costs"></a>Затраты на подготовленных вычислительных ресурсов

На уровне подготовленных вычислительных ресурсов стоимость ресурсов вычисления отражает общую вычислительную мощность, которая подготавливается для приложения.

Для уровня служб "Критически важный для бизнеса" автоматически выделяется как минимум 3 реплики. Чтобы отразить это дополнительное распределение вычислительных ресурсов, цена в модели приобретения на основе виртуальных ядер составляет приблизительно 2.7 x выше важная служба бизнес-уровня, а не на уровне службы общего назначения. Аналогичным образом более высокая стоимость хранения за ГБ в бизнес-уровня важная служба отражает высокий уровень операций ввода-вывода и низкую задержку SSD-хранилища.

Стоимость хранилища резервных копий одинаков для важная служба бизнес-уровня и уровня служб общего назначения, так как оба уровня используют хранилище класса standard.

### <a name="serverless-compute-costs"></a>Затраты на бессерверные вычисления

Описание способа определения вычислительная мощность и затраты вычисляются для уровня бессерверных вычислений, см. в разделе [базы данных SQL без сервера (Предварительная версия)](sql-database-serverless.md).

## <a name="storage-costs"></a>Затраты на хранение

Модель выставления счетов зависит от типа хранилища. Для хранения данных плата взимается за подготовленное хранилище на основе максимальный размер базы данных или пула выбранный. Стоимость не изменяется, если не уменьшить или увеличить максимальный размер этого. Хранилище резервных копий связано с автоматическими резервными копиями экземпляра и выделяется автоматически. Увеличение периода хранения резервных копий повышает хранилища резервных копий, используемого вашим экземпляром.

По умолчанию автоматически создаваемых резервных копий баз данных в течение 7 дней, копируются в учетную запись хранилища BLOB-объектов стандартный геоизбыточное хранилище с доступом для чтения (RA-GRS). Это хранилище используется еженедельных полных резервных копий, ежедневных разностных резервных копий и резервных копий журналов транзакций, которые копируются каждые 5 минут. Размер журнала транзакций, зависит от скорости изменения базы данных. Минимальный объем хранилища равен 100 процентов от размера базы данных предоставляется без дополнительной платы. Плата за дополнительное пространство хранилища резервных копий будет взиматься с расчетом ГБ в месяц.

Дополнительные сведения о ценах на службу хранилища см. на странице [Обзор цен на хранилище Azure](https://azure.microsoft.com/pricing/details/sql-database/single/).

## <a name="vcore-based-purchasing-model"></a>Модель приобретения на основе виртуальных ядер

Виртуальное ядро (виртуальное) представляет собой логический ЦП и предлагает возможность выбора поколения оборудования и физические характеристики оборудования (например, количество ядер, память и размер хранилища). Модель приобретения на основе виртуальных ядер обеспечивает гибкость, контроль и прозрачность потребления отдельных ресурсов, и простой способ удовлетворить локальных требований рабочей нагрузки в облако. Эта модель позволяет выбрать ресурсы вычисления, памяти и хранилища, в зависимости от потребностей рабочих нагрузок.

В основе виртуальных ядер модели приобретения, можно выбрать между [общего назначения](sql-database-high-availability.md#basic-standard-and-general-purpose-service-tier-availability) и [критически важный для бизнеса](sql-database-high-availability.md#premium-and-business-critical-service-tier-availability) уровни для служб [отдельных баз данных](sql-database-single-database-scale.md), [ эластичные пулы](sql-database-elastic-pool.md), и [управляемые экземпляры](sql-database-managed-instance.md). Для отдельных баз данных, вы также можете [уровня службы гипермасштабируемого](sql-database-service-tier-hyperscale.md).

Модель приобретения на основе виртуальных ядер позволяет независимо друг от друга выбрать ресурсы вычисления и хранилища, соответствует производительность на уровне локальной и оптимизировать затраты. В основе виртуальных ядер модели приобретения вы платите за:

- Вычислительные ресурсы (уровень обслуживания + количество виртуальных ядер и объем памяти + поколение программного обеспечения).
- Тип и объем хранилища данных и журналов.
- Хранилище резервных копий (RA-GRS).

> [!IMPORTANT]
> Вычислительные ресурсы ввода-вывода и хранения данных и журналов взимается плата на каждую базу данных или эластичного пула. Хранилище резервных копий оплачивается в расчете на каждую базу данных. Дополнительные сведения о затратах на управляемый экземпляр см. в [этой статье](sql-database-managed-instance.md).
> **Ограничения по регионам:** Текущий список поддерживаемых регионов см. на странице [Доступность продуктов по регионам](https://azure.microsoft.com/global-infrastructure/services/?products=sql-database&regions=all). Для создания управляемого экземпляра в регионе, который в настоящее время не поддерживается, [отправить запрос в службу поддержки через портал Azure](sql-database-managed-instance-resource-limits.md#obtaining-a-larger-quota-for-sql-managed-instance).

Если в вашей отдельной базы данных или эластичный пул потребляет более 300 единиц Dtu, преобразование в модель приобретения на основе виртуальных ядер может снизить затраты. Можно преобразовать с помощью API по выбору или с помощью портала Azure без простоев. Тем не менее преобразование не требуется и не выполняется автоматически. Если модель приобретения на основе единиц DTU соответствует вашим требованиям к производительности и бизнес-требованиям, продолжайте использовать ее.

Чтобы преобразовать модель приобретения на основе единиц DTU на модель приобретения на основе виртуальных ядер, выберите объема вычислительных ресурсов, используя следующие правила:

- Каждые 100 Dtu уровня "стандартный" требуется по крайней мере 1 виртуальное ядро в уровень служб общего назначения.
- Каждые 125 Dtu уровня "премиум" требуется по крайней мере 1 виртуальное ядро важная служба бизнес-уровня.

## <a name="dtu-based-purchasing-model"></a>Модель приобретения на основе единиц DTU

Единиц транзакций базы данных (DTU) предоставляет объединенный показатель мощности ЦП, памяти, операций чтения и записи. Модель приобретения на основе единиц DTU предлагает ряд предварительно настроенных пакетов вычислительных ресурсов и включенный объем хранилища для обеспечения различных уровней производительности приложений. Если вы предпочитаете простоту предварительно настроенного пакета и фиксированные платежи каждый месяц, модель на основе DTU, возможно, более подходящий для ваших потребностей.

В основе единиц DTU модели приобретения, можно выбрать между basic, standard и уровни служб "премиум" для обоих [отдельных баз данных](sql-database-single-database-scale.md) и [эластичных пулов](sql-database-elastic-pool.md). Модель приобретения на основе DTU недоступна для [управляемые экземпляры](sql-database-managed-instance.md).

### <a name="database-transaction-units-dtus"></a>Единицы транзакций базы данных (DTU)

Для отдельной базы данных на определенной стадии вычислить размер в рамках [уровня служб](sql-database-single-database-scale.md), корпорация Майкрософт гарантирует определенный уровень ресурсов для этой базы данных (независимо от любой другой базы данных в облаке Azure). Эта гарантия обеспечивает предсказуемый уровень производительности. Объем ресурсов, выделенных для базы данных рассчитывается как количество единиц Dtu и является комплексной оценкой вычислительных ресурсов, хранилища и ресурсов ввода/вывода.

Отношение между этими ресурсами определяется изначально [оперативной обработки транзакций (OLTP) тестовой рабочей нагрузки](sql-database-benchmark-overview.md) типична для реальных рабочих нагрузок OLTP. Если рабочая нагрузка превышает объем любого из этих ресурсов, пропускная способность регулируется, приводит к снижению производительности и значения времени ожидания.

Ресурсы, используемые вашей рабочей нагрузки не влияет на ресурсы, доступные для других баз данных SQL в облаке Azure. Аналогичным образом ресурсы, используемые другими рабочими нагрузками не влияет на ресурсы, доступные для вашей базы данных SQL.

![ограничивающая рамка](./media/sql-database-what-is-a-dtu/bounding-box.png)

Dtu лучше всего помогают определить относительный ресурсы, выделенные для баз данных Azure SQL в разных вычислительных операциях разного размера и уровней обслуживания. Пример:

- Dtu путем увеличения размера базы данных вычислений удвоение удвоить количество ресурсов, доступных для этой базы данных.
- Службы уровня P11 базой данных premium с 1750 единицами Dtu обеспечивает 350 раз больше вычислительную мощность, чем в базе данных уровень обслуживания basic, с 5 единицами Dtu.  

Чтобы получить более глубокое понимание потребления ресурсов (DTU) рабочей нагрузки, используйте [анализ производительности запросов](sql-database-query-performance.md) для:

- Выявлять запросы с ЦП и длительность и число выполнений, потенциально можно настроить для повышения производительности. Например, запрос ввода-вывода может быстрее за счет из [методов оптимизации в памяти](sql-database-in-memory.md) для более эффективного использования доступной памяти на определенный уровень служб и вычисления размера.
- Перейти к подробным сведениям запроса, чтобы просмотреть его текст и журнал использования ресурсов.
- Доступ к повышению производительности рекомендации, которые показывают, действия, предпринимаемые [помощник базы данных SQL](sql-database-advisor.md).

### <a name="elastic-database-transaction-units-edtus"></a>Единицы транзакций эластичных баз данных (Edtu)

Для баз данных SQL, которые всегда доступны, скорее чем предоставить выделенный набор ресурсов (Dtu), которые могут не всегда быть необходимы, можно поместить эти базы данных в [эластичного пула](sql-database-elastic-pool.md). Базы данных в пул эластичных баз данных на одном сервере базы данных SQL Azure и совместно использовать пул ресурсов.

Общие ресурсы в эластичном пуле измеряются с единицы транзакций эластичных баз данных (Edtu). Пулы эластичных БД обеспечивают простое и экономичное решение для управления целевыми показателями производительности нескольких баз данных, которые имеют шаблоны использования и широко непредсказуемыми. Пул эластичных баз данных гарантирует, что все ресурсы, не подходит для одной базы данных в пуле, гарантируя, что каждая база данных в пуле всегда имеет минимальный объем необходимых ресурсов, доступных.

Пулу предоставляется заданное количество единиц eDTU по фиксированной цене. В эластичном пуле отдельные базы данных может автоматически масштабироваться, в рамках заданных границ. При более высокой нагрузке базы данных будет использовать дополнительные единицы Edtu в соответствии с потребностями. Светлее нагрузках базы данных будет потреблять меньше Edtu. Базы данных без нагрузки не будут потреблять eDTU. Так как ресурсы подготавливаются для всего пула, а не на базу данных, эластичных пулов упростить выполнение задач управления и предоставить спрогнозировать расходы для пула.

Можно добавить дополнительные единицы Edtu в существующий пул без простоя и без влияния на базах данных в пуле. Аналогично Если вы больше не нужны дополнительные единицы Edtu, удалите их из существующего пула в любое время. Кроме того, можно также добавлять базы данных или вычесть баз данных из пула в любое время. Чтобы сохранить Edtu для других баз данных, ограничение на количество единиц Edtu базы данных можно использовать в условиях большой нагрузки. Если базы данных постоянно underuses ресурсы, вывести его из пула и настроить его в качестве отдельной базы данных с прогнозируемым объемом необходимые ресурсы.

### <a name="determine-the-number-of-dtus-needed-by-a-workload"></a>Определение числа единиц DTU, требуемых для рабочей нагрузки

Если вы хотите перенести существующую в локальной или рабочей нагрузки виртуальной машины SQL Server для базы данных SQL Azure, используйте [калькулятор DTU](https://dtucalculator.azurewebsites.net/) чтобы рассчитать приблизительное число необходимых единиц Dtu. Для имеющейся рабочей нагрузки базы данных SQL Azure, используйте [анализ производительности запросов](sql-database-query-performance.md) для понимания потребление ресурсов базы данных (Dtu) и глубокое понимание для оптимизации рабочей нагрузки. [Sys.dm_db_ resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) динамическое административное представление (DMV) позволяет просматривать потребление ресурсов за последний час. [Sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) представление каталога отображает потребление ресурсов за последние 14 дней, но с нижней точностью средние значения до пяти минут.

### <a name="workloads-that-benefit-from-an-elastic-pool-of-resources"></a>Рабочие нагрузки, для которых эффективно используется эластичный пул ресурсов

Пулы хорошо подходят для баз данных с среднее мало ресурсов и относительно редкими пиками использования. База данных SQL автоматически оценивает историю использования ресурсов баз данных на существующем сервере базы данных SQL и рекомендует подходящую конфигурацию пула на портале Azure. Дополнительные сведения см. в разделе [когда следует использовать эластичный пул баз данных SQL?](sql-database-elastic-pool.md).

## <a name="frequently-asked-questions-faqs"></a>Часто задаваемые вопросы (FAQ)

### <a name="do-i-need-to-take-my-application-offline-to-convert-from-a-dtu-based-service-tier-to-a-vcore-based-service-tier"></a>Нужно ли отключать приложение для преобразования из уровня службы на основе единиц DTU для уровня служб на основе виртуальных ядер?

№ Не нужно перевести приложение в автономный режим. Новые уровни служб предлагают простой метод оперативное преобразование, который аналогичен имеющемуся процессу обновления баз данных из стандартного уровня служб "премиум" и наоборот. Это преобразование можно запустить с помощью портала Azure, PowerShell, интерфейса командной строки Azure, T-SQL или REST API. Ознакомьтесь со статьями [Управление ресурсами отдельной базы данных в Базе данных SQL Azure](sql-database-single-database-scale.md) и [Управление несколькими базами данных SQL Azure и их масштабирование с помощью эластичных пулов](sql-database-elastic-pool.md).

### <a name="can-i-convert-a-database-from-a-service-tier-in-the-vcore-based-purchasing-model-to-a-service-tier-in-the-dtu-based-purchasing-model"></a>Можно ли преобразовать базу данных от уровня обслуживания в модели приобретения на основе виртуальных ядер до уровня служб в модели приобретения на основе DTU?

Да, можно легко преобразовать базу данных в любой поддерживаемый уровень производительности с помощью портала Azure, PowerShell, интерфейса командной строки Azure, T-SQL или REST API. Ознакомьтесь со статьями [Управление ресурсами отдельной базы данных в Базе данных SQL Azure](sql-database-single-database-scale.md) и [Управление несколькими базами данных SQL Azure и их масштабирование с помощью эластичных пулов](sql-database-elastic-pool.md).

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о модели приобретения на основе виртуальных ядер см. в разделе [модель приобретения на основе виртуальных ядер](sql-database-service-tiers-vcore.md).
- Дополнительные сведения о модели приобретения на основе единиц DTU, см. в разделе [модель приобретения на основе DTU](sql-database-service-tiers-dtu.md).
