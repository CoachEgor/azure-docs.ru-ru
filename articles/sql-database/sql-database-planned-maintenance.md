---
title: Планирование событий обслуживания Azure. база данных SQL Azure
description: Узнайте, как подготовиться к событиям планового обслуживания в базе данных SQL Azure.
services: sql-database
ms.service: sql-database
ms.subservice: operations
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: aamalvea
ms.author: aamalvea
ms.reviewer: carlrab
ms.date: 01/30/2019
ms.openlocfilehash: 5598d5a465645ce20d9244011de6d9cef47ac3c4
ms.sourcegitcommit: 609d4bdb0467fd0af40e14a86eb40b9d03669ea1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/06/2019
ms.locfileid: "73687631"
---
# <a name="planning-for-azure-maintenance-events-in-azure-sql-database"></a>Планирование событий обслуживания Azure в Базе данных SQL Azure

Узнайте, как подготовиться к событиям планового обслуживания в базе данных SQL Azure.

## <a name="what-is-a-planned-maintenance-event"></a>Что такое событие планового обслуживания

Для каждой базы данных служба "База данных SQL Azure" обеспечивает кворум реплик базы данных, в котором одна реплика является первичной. Первичная реплика всегда должна быть в режиме онлайн-обслуживания, и хотя бы одна вторичная реплика должна быть исправной. Во время планового обслуживания участники кворума базы данных будут переходить в автономный режим по одному, соблюдая условие наличия одной первичной реплики, отвечающей на запросы, и по крайней мере одной подключенной вторичной реплики, чтобы предотвратить простой клиента. Когда первичную реплику необходимо перевести в автономный режим, возникнет процесс перенастройки или отработки отказа, в результате которого одна вторичная реплика станет новой первичной.  

## <a name="what-to-expect-during-a-planned-maintenance-event"></a>Что происходит во время события планового обслуживания

Операции перенастройки или отработки отказа обычно завершаются в течение 30 секунд (в среднем — в течение 8). Если ваше приложение уже подключено, оно должно заново подключиться к работоспособной копии новой первичной реплики базы данных. Если при попытке выполнить новое подключение происходит перенастройка базы данных до того, как новая первичная реплика будет подключена к сети, возникает ошибка 40613 (база данных недоступна): "база данных" {DatabaseName} "на сервере" {servername} "в настоящее время недоступна. Повторите попытку подключения позже". Если в базе данных есть длительный запрос, он будет прерван во время перенастройки и его нужно будет перезапустить.

## <a name="retry-logic"></a>Логика повторных попыток

Для любого клиентского приложения в рабочей среде, которое подключается к облачной службе базы данных, следует реализовать [надежную логику повторных попыток подключения](sql-database-connectivity-issues.md#retry-logic-for-transient-errors). Она поможет устранить такие ситуации и упрощает общий механизм определения ошибок для пользователя.

## <a name="frequency"></a>Frequency

В среднем каждый месяц происходят 1,7 событий планового обслуживания.

## <a name="resource-health"></a>Работоспособность ресурса

Если в базе данных SQL возникли ошибки входа, на [портале Azure](../service-health/resource-health-overview.md#get-started) просмотрите окно [Работоспособность ресурсов](https://portal.azure.com), чтобы узнать текущее состояние. Раздел "Работоспособность ресурсов" содержит причину простоя для каждого события (если она доступна).


## <a name="next-steps"></a>Дальнейшие действия

- См. дополнительные сведения о службе [Работоспособность ресурсов](sql-database-resource-health.md) для Базы данных SQL.
- Дополнительные сведения о логике повторных попыток см. в разделе [Логика повторных попыток для временных ошибок](sql-database-connectivity-issues.md#retry-logic-for-transient-errors).
