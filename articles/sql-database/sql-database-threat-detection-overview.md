---
title: Расширенная защита от угроз
description: Расширенная защита от угроз обнаруживает аномальные действия базы данных, указывающие на потенциальные угрозы безопасности в базе данных Azure S'L.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: monhaber
ms.author: ronmat
ms.reviewer: vanto, carlrab
ms.date: 02/05/2020
tags: azure-synapse
ms.openlocfilehash: 17ca8cbb7a55e9c0d44af099f4884f71b1cd457a
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80124759"
---
# <a name="advanced-threat-protection-for-azure-sql-database"></a>Расширенная защита от угроз для Базы данных SQL Azure

Расширенная защита от угроз для [базы данных Azure s-L](sql-database-technical-overview.md) и [Azure Synapse Analytics](../synapse-analytics/sql-data-warehouse/sql-data-warehouse-overview-what-is.md) обнаруживает аномальные действия, указывающие на необычные и потенциально опасные попытки получить доступ к базам данных или эксплуатировать их.

Расширенная защита от угроз является частью предложения [Advanced data Security](sql-database-advanced-data-security.md) (ADS), который представляет собой единый пакет для передовых возможностей безопасности S'L. Доступ к расширенной защите от угроз можно получить через центральный портал SQL ADS. Там же ею можно управлять.

> [!NOTE]
> Эта тема применима как к серверу Azure S'L, так и к базе данных S'L и Azure Synapse, которые создаются на сервере Azure S'L. Для простоты используется база данных S'L, когда речь идет как о базе данных S'L, так и о Azure Synapse.

## <a name="what-is-advanced-threat-protection"></a>Что такое расширенная защита от угроз

 Advanced Threat Protection обеспечивает новый уровень безопасности, который позволяет клиентам обнаруживать потенциальные угрозы и реагировать на них, предоставляя оповещения о безопасности в отношении аномальных действий. Пользователи получают оповещения о подозрительных действиях с базами данных, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных закономерностей в доступе к базам данных и шаблонам запросов. Advanced Threat Protection интегрирует оповещения с [Azure Security Center,](https://azure.microsoft.com/services/security-center/)которые содержат сведения о подозрительной деятельности и рекомендуют действия по расследованию и уменьшению угрозы. Расширенная защита от угроз упрощает устранение потенциальных угроз базе данных без необходимости быть экспертом по безопасности или управлять передовыми системами мониторинга безопасности.

Чтобы воспользоваться всеми преимуществами исследования, советуем включить [аудит базы данных SQL](sql-database-auditing.md), при котором события базы данных записываются в журнал аудита вашей учетной записи хранения Azure.  

## <a name="advanced-threat-protection-alerts"></a>Оповещения Расширенной защиты от угроз

Расширенная защита от угроз для базы данных Azure S'L обнаруживает аномальные действия, указывающие на необычные и потенциально опасные попытки получить доступ к базам данных или эксплуатировать их, и может вызвать следующие оповещения:

- **Уязвимость к впрыску S'L:** Это оповещение срабатывает, когда приложение генерирует неисправное заявление s'L в базе данных. Оно может указывать на возможную уязвимость к атакам путем внедрения кода SQL. Существует две причины создания инструкции с ошибкой:

  - Дефект в коде приложения, который создает инструкцию SQL с ошибкой.
  - Код приложения или хранимые процедуры не очищают ввод данных пользователя при создании ошибочной инструкции SQL, которая может быть использована для внедрения кода SQL.
- **Потенциальная атака путем внедрения кода SQL.** Это предупреждение запускается при активном эксплойте идентифицированной уязвимости приложения для внедрения кода SQL. Это означает, что злоумышленник пытается внедрить вредоносные инструкции SQL с помощью кода уязвимого приложения или хранимых процедур.
- **Доступ из незнакомого расположения.** Это предупреждение активируется при изменении шаблона доступа к серверу SQL, если пользователь вошел на сервер SQL из незнакомого географического расположения. Иногда предупреждение определяет допустимые действия (новое приложение, обслуживание разработчиком). В других случаях предупреждение обнаруживает угрозу (бывшего сотрудника, внешнего злоумышленника).
- **Доступ из стороннего центра обработки данных Azure.** Это предупреждение активируется при изменении шаблона доступа к серверу SQL, если кто-то за последнее время выполнил вход на сервер из стороннего центра обработки данных Azure. Иногда предупреждение определяет допустимые действия (новое приложение в Azure, Power BI, редактор SQL-запросов Azure). В других случаях предупреждение обнаруживает угрозу от ресурса или службы Azure (бывшего сотрудника, внешнего злоумышленника).
- **Доступ из незнакомого субъекта.** Это предупреждение активируется при изменении шаблона доступа к серверу SQL, если пользователь вошел на сервер SQL с помощью нестандартного субъекта (пользователя SQL). Иногда предупреждение определяет допустимые действия (новое приложение, обслуживание разработчиком). В других случаях предупреждение обнаруживает угрозу (бывшего сотрудника, внешнего злоумышленника).
- **Доступ из потенциально опасного приложения.** Это предупреждение активируется, когда доступ к базе данных получают потенциально опасные приложения. В некоторых случаях предупреждения обнаруживают выполнение теста на проникновение. В других случаях — атаку с помощью обычных средств.
- **Подбор учетных данных SQL.** Это предупреждение активируется при большом количестве неудачных попыток входа с разными учетными данными. В некоторых случаях предупреждения обнаруживают выполнение теста на проникновение. В других случаях — атаку методом подбора.

## <a name="explore-anomalous-database-activities-upon-detection-of-a-suspicious-event"></a>Анализ подозрительной активности в базе данных при обнаружении подозрительного события

При обнаружении подозрительной активности в базе данных вы получите уведомление по электронной почте. В этом уведомлении содержится информация о подозрительном событии безопасности, в том числе характер подозрительных операций, имя базы данных, имя сервера, имя приложения, а также время, когда произошло событие. Кроме того, в уведомлении приводится информация о возможных причинах возникновения события, а также рекомендуемые действия по поиску и устранению потенциальной угрозы безопасности базы данных.

![Отчеты об аномальных действиях](./media/sql-database-threat-detection/anomalous_activity_report.png)

1. Щелкните ссылку **View recent SQL alerts** (Просмотр недавних оповещений SQL) в почтовом сообщении, чтобы запустить портал Azure и открыть страницу оповещений центра безопасности Azure. На этой странице содержится обзор активных угроз, обнаруженных в базе данных SQL.

   ![Угрозы, связанные с действиями](./media/sql-database-threat-detection/active_threats.png)

2. Щелкните определенное оповещение, чтобы отобразить дополнительные сведения и действия для изучения этой угрозы и устранения будущих угроз.

   Например, внедрение кода SQL — один из распространенных видов угроз безопасности веб-приложений в Интернете, используемый для получения несанкционированного доступа к приложениям, управляемым данными. Хакеры используют уязвимости приложения, чтобы ввести вредоносные инструкции SQL в поля ввода приложения, чтобы испортить или изменить данные в базе данных. В сведениях оповещений о внедрении кода SQL указывается уязвимая инструкция SQL, которая была использована.

   ![Определенное оповещение](./media/sql-database-threat-detection/specific_alert.png)

## <a name="explore-advanced-threat-protection-alerts-for-your-database-in-the-azure-portal"></a>Исследуйте расширенные оповещения о защите угроз для базы данных на портале Azure

Advanced Threat Protection интегрирует свои оповещения с [центром безопасности Azure.](https://azure.microsoft.com/services/security-center/) Плитки по защите расширенных угроз в базе данных, а также лопасти ADS в Azure отслеживают состояние активных угроз.

Нажмите **Наимя оповещение О защите от угроз,** чтобы запустить страницу оповещения Центра безопасности Azure и получить обзор активных угроз СЗЛ, обнаруженных в базе данных.

   ![Расширенное оповещение о защите угроз](./media/sql-database-threat-detection/threat_detection_alert.png)

   ![Расширенный предупреждение о защите угроз2](./media/sql-database-threat-detection/threat_detection_alert_atp.png)

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте больше о [Расширенной защите угроз в единичных и объединенных базах данных.](sql-database-threat-detection.md)
- Подробнее о [расширенной защите от угроз в управляемом экземпляре.](sql-database-managed-instance-threat-detection.md)
- Подробнее о [безопасности данных Advanced.](sql-database-advanced-data-security.md)
- Узнайте больше об [аудите базы данных Azure S'L](sql-database-auditing.md)
- Подробнее о [центре безопасности Azure](https://docs.microsoft.com/azure/security-center/security-center-intro)
- Для получения более подробной информации о ценах на базе данных можно ознакомиться на [странице базы данных S'L](https://azure.microsoft.com/pricing/details/sql-database/)  
