---
title: Расширенная защита от угроз
description: Расширенная защита от угроз обнаруживает аномальные действия базы данных, указывающие на потенциальные угрозы безопасности в базе данных SQL Azure.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: monhaber
ms.author: ronmat
ms.reviewer: vanto, carlrab
ms.date: 02/05/2020
tags: azure-synapse
ms.openlocfilehash: 17ca8cbb7a55e9c0d44af099f4884f71b1cd457a
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "80124759"
---
# <a name="advanced-threat-protection-for-azure-sql-database"></a>Расширенная защита от угроз для Базы данных SQL Azure

Расширенная защита от угроз для [базы данных SQL Azure](sql-database-technical-overview.md) и [Azure синапсе Analytics](../synapse-analytics/sql-data-warehouse/sql-data-warehouse-overview-what-is.md) обнаруживает аномальные действия, указывающие на необычные и потенциально опасные попытки доступа к базам данных или их использования.

Расширенная защита от угроз является частью предложения [расширенной системы безопасности данных](sql-database-advanced-data-security.md) (ADS), которое является единым пакетом для расширенных возможностей обеспечения безопасности SQL. Доступ к расширенной защите от угроз можно получить через центральный портал SQL ADS. Там же ею можно управлять.

> [!NOTE]
> Эта статья относится к Azure SQL Server и к базе данных SQL и Azure синапсе, созданным на сервере Azure SQL. Для простоты база данных SQL используется при обращении к базе данных SQL и Azure синапсе.

## <a name="what-is-advanced-threat-protection"></a>Что такое расширенная защита от угроз

 Расширенная защита от угроз обеспечивает новый уровень безопасности, который позволяет клиентам обнаруживать потенциальные угрозы и реагировать на них по мере их возникновения, предоставляя оповещения системы безопасности о аномальных действиях. Пользователи получают оповещения о подозрительных действиях с базами данных, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных закономерностей в доступе к базам данных и шаблонам запросов. Расширенная защита от угроз интегрирует оповещения в [центре безопасности Azure](https://azure.microsoft.com/services/security-center/), включая сведения о подозрительных действиях и рекомендуемые действия по исследованию и снижению угрозы. Расширенная защита от угроз упрощает устранение потенциальных угроз для базы данных, не требуя эксперта по безопасности или управления расширенными системами мониторинга безопасности.

Чтобы воспользоваться всеми преимуществами исследования, советуем включить [аудит базы данных SQL](sql-database-auditing.md), при котором события базы данных записываются в журнал аудита вашей учетной записи хранения Azure.  

## <a name="advanced-threat-protection-alerts"></a>Оповещения Расширенной защиты от угроз

Расширенная защита от угроз для базы данных SQL Azure обнаруживает аномальные действия, указывающие на необычные и потенциально опасные попытки доступа к базам данных или их использования, и может вызывать следующие предупреждения.

- **Уязвимость при внедрении кода SQL**. Это предупреждение активируется, когда приложение создает ошибочную инструкцию SQL в базе данных. Оно может указывать на возможную уязвимость к атакам путем внедрения кода SQL. Существует две причины создания инструкции с ошибкой:

  - Дефект в коде приложения, который создает инструкцию SQL с ошибкой.
  - Код приложения или хранимые процедуры не очищают ввод данных пользователя при создании ошибочной инструкции SQL, которая может быть использована для внедрения кода SQL.
- **Потенциальная атака путем внедрения кода SQL.** Это предупреждение запускается при активном эксплойте идентифицированной уязвимости приложения для внедрения кода SQL. Это означает, что злоумышленник пытается внедрить вредоносные инструкции SQL с помощью кода уязвимого приложения или хранимых процедур.
- **Доступ из незнакомого расположения.** Это предупреждение активируется при изменении шаблона доступа к серверу SQL, если пользователь вошел на сервер SQL из незнакомого географического расположения. Иногда предупреждение определяет допустимые действия (новое приложение, обслуживание разработчиком). В других случаях предупреждение обнаруживает угрозу (бывшего сотрудника, внешнего злоумышленника).
- **Доступ из стороннего центра обработки данных Azure.** Это предупреждение активируется при изменении шаблона доступа к серверу SQL, если кто-то за последнее время выполнил вход на сервер из стороннего центра обработки данных Azure. Иногда предупреждение определяет допустимые действия (новое приложение в Azure, Power BI, редактор SQL-запросов Azure). В других случаях предупреждение обнаруживает угрозу от ресурса или службы Azure (бывшего сотрудника, внешнего злоумышленника).
- **Доступ из незнакомого субъекта.** Это предупреждение активируется при изменении шаблона доступа к серверу SQL, если пользователь вошел на сервер SQL с помощью нестандартного субъекта (пользователя SQL). Иногда предупреждение определяет допустимые действия (новое приложение, обслуживание разработчиком). В других случаях предупреждение обнаруживает угрозу (бывшего сотрудника, внешнего злоумышленника).
- **Доступ из потенциально опасного приложения.** Это предупреждение активируется, когда доступ к базе данных получают потенциально опасные приложения. В некоторых случаях предупреждения обнаруживают выполнение теста на проникновение. В других случаях — атаку с помощью обычных средств.
- **Подбор учетных данных SQL.** Это предупреждение активируется при большом количестве неудачных попыток входа с разными учетными данными. В некоторых случаях предупреждения обнаруживают выполнение теста на проникновение. В других случаях — атаку методом подбора.

## <a name="explore-anomalous-database-activities-upon-detection-of-a-suspicious-event"></a>Анализ подозрительной активности в базе данных при обнаружении подозрительного события

При обнаружении подозрительной активности в базе данных вы получите уведомление по электронной почте. В этом уведомлении содержится информация о подозрительном событии безопасности, в том числе характер подозрительных операций, имя базы данных, имя сервера, имя приложения, а также время, когда произошло событие. Кроме того, в уведомлении приводится информация о возможных причинах возникновения события, а также рекомендуемые действия по поиску и устранению потенциальной угрозы безопасности базы данных.

![Отчеты об аномальных действиях](./media/sql-database-threat-detection/anomalous_activity_report.png)

1. Щелкните ссылку **View recent SQL alerts** (Просмотр недавних оповещений SQL) в почтовом сообщении, чтобы запустить портал Azure и открыть страницу оповещений центра безопасности Azure. На этой странице содержится обзор активных угроз, обнаруженных в базе данных SQL.

   ![Угрозы, связанные с действиями](./media/sql-database-threat-detection/active_threats.png)

2. Щелкните определенное оповещение, чтобы отобразить дополнительные сведения и действия для изучения этой угрозы и устранения будущих угроз.

   Например, внедрение кода SQL — один из распространенных видов угроз безопасности веб-приложений в Интернете, используемый для получения несанкционированного доступа к приложениям, управляемым данными. Хакеры используют уязвимости приложения, чтобы ввести вредоносные инструкции SQL в поля ввода приложения, чтобы испортить или изменить данные в базе данных. В сведениях оповещений о внедрении кода SQL указывается уязвимая инструкция SQL, которая была использована.

   ![Определенное оповещение](./media/sql-database-threat-detection/specific_alert.png)

## <a name="explore-advanced-threat-protection-alerts-for-your-database-in-the-azure-portal"></a>Изучите дополнительные оповещения об улучшенной защите от угроз для базы данных в портал Azure

Расширенная защита от угроз интегрирует свои оповещения с [центром безопасности Azure](https://azure.microsoft.com/services/security-center/). Интерактивные плитки расширенной защиты от угроз SQL в колонках базы данных и ADS SQL в портал Azure отслеживании состояния активных угроз.

Щелкните **оповещение Advanced Threat protection** , чтобы открыть страницу оповещений центра безопасности Azure и получить обзор активных угроз SQL, обнаруженных в базе данных.

   ![Оповещение о повышенной защите от угроз](./media/sql-database-threat-detection/threat_detection_alert.png)

   ![Alert2 Advanced Threat protection](./media/sql-database-threat-detection/threat_detection_alert_atp.png)

## <a name="next-steps"></a>Дальнейшие шаги

- Дополнительные сведения о [расширенной защите от угроз в отдельных базах данных и в составе пула](sql-database-threat-detection.md).
- Дополнительные сведения о [Advanced Threat Protection в управляемом экземпляре](sql-database-managed-instance-threat-detection.md).
- Дополнительные сведения о [расширенной защите данных](sql-database-advanced-data-security.md).
- Дополнительные сведения об [аудите базы данных SQL Azure](sql-database-auditing.md)
- Дополнительные сведения о [центре безопасности Azure](https://docs.microsoft.com/azure/security-center/security-center-intro)
- Дополнительные сведения о ценах см. на [странице цен на базу данных SQL](https://azure.microsoft.com/pricing/details/sql-database/) .  
