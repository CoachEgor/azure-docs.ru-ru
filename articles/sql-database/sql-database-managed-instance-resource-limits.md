---
title: Ограничения ресурсов управляемого экземпляра в Базе данных SQL Azure | Документация Майкрософт
description: В статье представлены общие сведения об ограничениях ресурсов Базы данных SQL Azure для управляемых экземпляров.
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: bonova
ms.author: bonova
ms.reviewer: carlrab, jovanpop, sachinp, sstein
ms.date: 06/26/2019
ms.openlocfilehash: 776a27ca0babfd7557bf4d16c449a8dfa5bceaf7
ms.sourcegitcommit: 4b8a69b920ade815d095236c16175124a6a34996
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/23/2019
ms.locfileid: "69998199"
---
# <a name="overview-azure-sql-database-managed-instance-resource-limits"></a>Общие сведения об ограничениях ресурсов управляемого экземпляра базы данных SQL Azure

В этой статье приводятся общие сведения об ограничениях ресурсов для управляемого экземпляра базы данных SQL Azure и сведения о том, как запросить увеличение этих ограничений.

> [!NOTE]
> Различия в поддерживаемых функциях и инструкциях T-SQL см. в статьях [Сравнение функций Базы данных SQL Azure и SQL Server](sql-database-features.md) и [Различия T-SQL между Управляемым экземпляром Базы данных SQL Azure и SQL Server](sql-database-managed-instance-transact-sql-information.md).

## <a name="instance-level-resource-limits"></a>Ограничения ресурсов на уровне экземпляра

На управляемом экземпляре действуют ограничения характеристик и ресурсов, зависящие от базовой инфраструктуры и архитектуры. Ограничения зависят от поколения оборудования и уровня служб.

### <a name="hardware-generation-characteristics"></a>Характеристики поколения оборудования

Управляемый экземпляр базы данных SQL Azure можно развернуть в двух поколениях оборудования: Го поколения и го поколения. Поколения оборудования имеют различные характеристики, как описано в следующей таблице.

|   | **4-е поколение** | **5-е поколение** |
| --- | --- | --- |
| Оборудование | Процессоры Intel E5-2673 v3 (Haswell) с тактовой частотой 2,4 ГГц с присоединенным виртуальным ядром SSD = 1 PP (физическое ядро) | Процессоры Intel E5-2673 v4 (Broadwell) с тактовой частотой 2,3 ГГц, быстрый диск SSD NVMe, виртуальное ядро = 1 LP (технология Hyper-Threading) |
| Число виртуальных ядер | 8, 16, 24 виртуальных ядер | 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер |
| Максимальный объем памяти (соотношение памяти и ядра) | 7 ГБ на виртуальное ядро<br/>Добавьте дополнительные виртуальных ядер, чтобы получить больше памяти. | 5,1 ГБ на виртуальное ядро<br/>Добавьте дополнительные виртуальных ядер, чтобы получить больше памяти. |
| Максимальная память выполняющейся в памяти OLTP | Ограничение экземпляра: 3 ГБ на виртуальное ядро<br/>Ограничения базы данных:<br/> 8-ядерная: 8 ГБ на базу данных<br/> — 16 ядер: 20 ГБ на базу данных<br/> — 24 ядра: 36 ГБ на базу данных | Ограничение экземпляра: 2,5 ГБ на виртуальное ядро<br/>Ограничения базы данных:<br/> 8-ядерная: 13 ГБ на базу данных<br/> — 16 ядер: 32 ГБ на базу данных |
| Максимальное зарезервированное хранилище экземпляра |  Общего назначения: 8 ТБ<br/>Критически важный для бизнеса: 1 ТБ | Общего назначения: 8 ТБ<br/> Критически важный для бизнеса 1 ТБ, 2 ТБ или 4 ТБ в зависимости от числа ядер |

> [!IMPORTANT]
> - Го поколенияное оборудование. Рекомендуется развертывать новые управляемые экземпляры на го поколения оборудовании.
> - Го поколения оборудование в настоящее время доступно в следующих регионах: Северная Европа, Западная Европа, Восточная часть США, Юго-Центральный регион США, Северо-центральный регион, Запад США 2, Центральная часть США, Центральная Канада, Южная Индия, Юго-Восточная Азия и Корея Central.

### <a name="service-tier-characteristics"></a>Характеристики уровней служб

Управляемый экземпляр имеет два уровня служб: Общего назначения и критически важный для бизнеса. Эти уровни обеспечивают разные возможности, как описано в следующей таблице:

| **Возможность** | **Общего назначения** | **Критически важный для бизнеса** |
| --- | --- | --- |
| Количество виртуальных ядер\* | 4-е поколение: 8, 16, 24<br/>5-е поколение: 4, 8, 16, 24, 32, 40, 64, 80 | 4-е поколение: 8, 16, 24, 32 <br/> 5-е поколение: 4, 8, 16, 24, 32, 40, 64, 80 |
| Максимальный объем памяти | 4-е поколение: 56 ГБ — 168 ГБ (7 ГБ/Виртуальное ядро)<br/>5-е поколение: 40,8 ГБ — 408 ГБ (5.1 ГБ/Виртуальное ядро)<br/>Добавьте дополнительные виртуальных ядер, чтобы получить больше памяти. | 4-е поколение: 56 ГБ — 168 ГБ (7 ГБ/Виртуальное ядро)<br/>5-е поколение: 40,8 ГБ — 408 ГБ (5.1 ГБ/Виртуальное ядро)<br/>Добавьте дополнительные виртуальных ядер, чтобы получить больше памяти. |
| Максимальный размер зарезервированного экземпляра хранилища | -2 ТБ для 4 виртуальных ядер (только го поколения)<br/>-8 ТБ для других размеров | 4-е поколение: 1 TБ <br/> 5-е поколение: <br/>-1 ТБ для 4, 8, 16 виртуальных ядер<br/>— 2 ТБ для 24 виртуальных ядер<br/>— 4 ТБ для 32, 40, 64, 80 виртуальных ядер |
| Максимальный размер базы данных | Определяется максимальным размером хранилища каждого экземпляра | Определяется максимальным размером хранилища каждого экземпляра |
| Максимальное количество баз данных на экземпляр | 100 | 100 |
| Максимальное число файлов базы данных на экземпляр | До 280 | 32 767 файлов для одной базы данных |
| Максимальный размер файла | 8 ТБ | 4 TБ |
| Операции ввода-вывода в секунду для данных или журнала (приблизительно) | 500–7,500 МБ/с на каждый файл<br/>\*[Увеличение размера файла для получения дополнительных операций ввода-вывода](https://docs.microsoft.com/azure/virtual-machines/windows/premium-storage-performance#premium-storage-disk-sizes)| 11 K-110 K (1375/Виртуальное ядро)<br/>Добавьте дополнительные виртуальных ядер, чтобы получить лучшую производительность ввода-вывода. |
| Ограничение пропускной способности записи в журнал | 3 МБ/с на виртуальное ядро<br/>Максимум 22 Мб/с на экземпляр | 4 МБ/с на виртуальное ядро<br/>Максимум 48 МБ/с на экземпляр|
| Пропускная способность данных (приблизительно) | 100–250 МБ/с на каждый файл<br/>\*[Увеличьте размер файла, чтобы получить лучшую производительность ввода-вывода](https://docs.microsoft.com/azure/virtual-machines/windows/premium-storage-performance#premium-storage-disk-sizes) | Н/Д |
| Задержка операций ввода-вывода хранилища (приблизительно) | 5–10 мс | 1–2 мс |
| Максимальный размер tempdb | 192–1,920 ГБ (24 ГБ на виртуальное ядро)<br/>Добавьте дополнительные виртуальных ядер, чтобы получить больше пространства TempDB. | Ограничивается максимальным размером хранилища экземпляра. Размер файла журнала TempDB в настоящее время ограничен 24 ГБ/Виртуальное ядро. |
| Выполняющаяся в памяти OLTP | Не поддерживается | Доступно |
| Максимальное число сеансов | 30 000 | 30 000 |

> [!NOTE]
> - Размеры данных и файла журнала в системных базах данных и базах данных пользователей включаются в размер хранилища экземпляра, который сравнивается с пределом максимального размера хранилища. Используйте системное представление <a href="https://docs.microsoft.com/sql/relational-databases/system-catalog-views/sys-master-files-transact-sql">sys.master_files</a>, чтобы определить общий объем, используемый базами данных. Журналы ошибок не сохраняются и не включаются в размер. Резервные копии не включаются в размер хранилища.
> - Пропускная способность и операции ввода-вывода также зависят от размера страницы, которая явно не ограничена управляемым экземпляром.

## <a name="supported-regions"></a>Поддерживаемые регионы

Управляемые экземпляры могут создаваться только в [поддерживаемых регионах](https://azure.microsoft.com/global-infrastructure/services/?products=sql-database&regions=all). Чтобы создать управляемый экземпляр в регионе, который сейчас не поддерживается, можно [Отправить запрос в службу поддержки через портал Azure](#obtaining-a-larger-quota-for-sql-managed-instance).

## <a name="supported-subscription-types"></a>Поддерживаемые типы подписок

Сейчас управляемый экземпляр поддерживает развертывание только для следующих типов подписок:

- [Соглашение Enterprise (EA)](https://azure.microsoft.com/pricing/enterprise-agreement/)
- [Оплата по мере использования](https://azure.microsoft.com/offers/ms-azr-0003p/)
- [Поставщик облачных услуг (CSP)](https://docs.microsoft.com/partner-center/csp-documents-and-learning-resources)
- [Enterprise — разработка и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/)
- [Разработка и тестирование с оплатой по мере использования](https://azure.microsoft.com/offers/ms-azr-0023p/)
- [Подписки с ежемесячным кредитом Azure для подписчиков Visual Studio](https://azure.microsoft.com/pricing/member-offers/credit-for-visual-studio-subscribers/)

## <a name="regional-resource-limitations"></a>Ограничение подписок по регионам

Поддерживаемые типы подписок могут содержать ограниченное число ресурсов на регион. Для управляемого экземпляра предусмотрено два ограничения по умолчанию для каждого региона Azure в зависимости от типа подписки:

- **Ограничение подсети**. Максимальное количество подсетей, в которых развернуты управляемые экземпляры в одном регионе.
- **ограничение Виртуальное ядро**: Максимальное число виртуальных ядер, которые могут быть развернуты во всех экземплярах в одном регионе.

> [!Note]
> Эти ограничения являются параметрами по умолчанию, а не техническими ограничениями. Ограничения можно увеличить по запросу, создав специальный [запрос на поддержку в портал Azure](#obtaining-a-larger-quota-for-sql-managed-instance) , если требуется больше управляемых экземпляров в текущем регионе. В качестве альтернативы можно создавать новые управляемые экземпляры в другом регионе Azure, не отправляя запросы на поддержку.

В следующей таблице показаны региональные ограничения по умолчанию для поддерживаемых подписок.

|Тип подписки| Максимальное число подсетей управляемых экземпляров | Максимальное число единиц Виртуальное ядро * |
| :---| :--- | :--- |
|Оплата по мере использования|3|320|
|CSP |8 (15 в некоторых регионах * *)|960 (1440 в некоторых регионах * *)|
|Разработка и тестирование с оплатой по мере использования|3|320|
|Enterprise — разработка и тестирование|3|320|
|EA|8 (15 в некоторых регионах * *)|960 (1440 в некоторых регионах * *)|
|Visual Studio Enterprise|2 |64|
|Visual Studio Professional и MSDN Platforms|2|32|

\*При планировании развертываний примите во внимание, что для уровня служб критически важный для бизнеса (BC) требуется четыре (4) раза больше емкости, чем уровень служб общего назначения (GP). Пример: 1 GP Виртуальное ядро = 1 Виртуальное ядро Unit и 1 BC Виртуальное ядро = 4 Виртуальное ядро единиц. Чтобы упростить анализ потребления по умолчанию, суммируйте единицы Виртуальное ядро во всех подсетях в регионе, где развернуты управляемые экземпляры, и сравните результаты с ограничениями единиц экземпляра для вашего типа подписки. Ограничение **максимального числа единиц Виртуальное ядро** применяется к каждой подписке в регионе. Ограничения на отдельные подсети отсутствуют, за исключением того, что сумма всех виртуальных ядер, развернутых в нескольких подсетях, должна быть меньше или равна **максимальному числу единиц Виртуальное ядро**.

\*\*Более крупные ограничения подсети и виртуальное ядро доступны в следующих регионах: Восточная Австралия, Восточная часть США, Восточная часть США 2, Северная Европа, Юго-Центральная часть США, Юго-Восточная Азия, южная часть Соединенного Королевства, Западная Европа, Западная часть США 2.

## <a name="obtaining-a-larger-quota-for-sql-managed-instance"></a>Получение более крупной квоты для управляемого экземпляра SQL

Если в текущих регионах требуется больше управляемых экземпляров, отправьте запрос в службу поддержки, чтобы расширить квоту с помощью портал Azure.
Чтобы инициировать процесс получения увеличенной квоты, сделайте следующее:

1. Откройте вкладку **Справка и поддержка**, а затем выберите **Новый запрос на поддержку**.

   ![Справка и поддержка](media/sql-database-managed-instance-resource-limits/help-and-support.png)
2. На вкладке "Основные сведения" сделайте следующее, чтобы создать запрос на поддержку.
   - Для поля **Тип проблемы** выберите **Ограничения службы и подписки (квоты)** .
   - В качестве **подписки** выберите свою подписку.
   - В качестве **типа квоты** выберите **Управляемый экземпляр Базы данных SQL**.
   - В поле **План поддержки** выберите свой план поддержки.

     ![Тип проблемы. Квота](media/sql-database-managed-instance-resource-limits/issue-type-quota.png)

3. Нажмите кнопку **Далее**.
4. На **вкладке проблема** для нового запроса на поддержку:
   - В поле **Серьезность** выберите степень серьезности проблемы.
   - В поле **Details** (Сведений) укажите дополнительные сведения о проблеме, включая текст сообщений об ошибках.
   - В поле **Отправка файла** вложите файл с дополнительной информацией (до 4 МБ).

     ![Сведения о проблеме](media/sql-database-managed-instance-resource-limits/problem-details.png)

     > [!IMPORTANT]
     > Допустимый запрос должен содержать:
     > - Регион, в котором необходимо увеличить лимит подписки.
     > - Необходимое число виртуальных ядер для каждого уровня обслуживания в существующих подсетях после увеличения квоты (если какая-либо из существующих подсетей должна быть расширена.
     > - Необходимое число новых подсетей и общее количество виртуальных ядер на уровень служб в новых подсетях (если необходимо развернуть управляемые экземпляры в новых подсетях).

5. Нажмите кнопку **Далее**.
6. На вкладке "Контактные данные" укажите предпочтительный способ связи (электронная почта или телефон) и контактные сведения для нового запроса на поддержку.
7. Нажмите кнопку **Создать**.

## <a name="next-steps"></a>Следующие шаги

- Дополнительные сведения об управляемом экземпляре см. [в разделе что такое управляемый экземпляр?](sql-database-managed-instance.md).
- Информацию о ценах см. на странице [цен на управляемый экземпляр Базы данных SQL Azure](https://azure.microsoft.com/pricing/details/sql-database/managed/).
- Сведения о создании первого управляемого экземпляра см. [в руководстве по быстрому](sql-database-managed-instance-get-started.md)запуску.
