---
title: 'Портал Azure: отправка запроса с помощью редактора запросов'
description: Узнайте, как подключиться к базе данных SQL на портале Azure с помощью редактора SQL-запросов. и выполнении инструкций Transact-SQL (T-SQL) для запроса и изменения данных.
keywords: подключение к базе данных sql, портал azure, портал, редактор запросов
services: sql-database
ms.service: sql-database
ms.subservice: development
ms.custom: ''
ms.devlang: ''
ms.topic: quickstart
author: Ninarn
ms.author: ninarn
ms.reviewer: carlrab
ms.date: 10/24/2019
ms.openlocfilehash: b3ccc2a5343cf02127990dca80a1300959fa06a3
ms.sourcegitcommit: 20429bc76342f9d365b1ad9fb8acc390a671d61e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/11/2020
ms.locfileid: "79087177"
---
# <a name="quickstart-use-the-azure-portals-sql-query-editor-to-connect-and-query-data"></a>Краткое руководство. Использование редактора SQL-запросов на портале Azure для подключения к данным и их запроса

Редактор SQL-запросов представляет собой браузерное средство на портале Azure, которое обеспечивает простой способ выполнения SQL-запросов в базе данных SQL Azure или хранилище данных SQL Azure. В этом кратком руководстве показано использование редактора запросов для подключения к базе данных SQL, а также выполнение запроса, вставки, обновления и удаления данных с помощью инструкций Transact-SQL.

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим учебником необходимы указанные ниже компоненты.

- База данных SQL Azure. Для создания и настройки базы данных в службе "База данных SQL Azure" можно использовать одно из этих кратких руководств.

  || Отдельная база данных |
  |:--- |:--- |
  | Создание| [Портал](sql-database-single-database-get-started.md) |
  || [CLI](scripts/sql-database-create-and-configure-database-cli.md) |
  || [PowerShell](scripts/sql-database-create-and-configure-database-powershell.md) |
  | Configure | [Правило брандмауэра для IP-адресов на уровне сервера](sql-database-server-level-firewall-rule.md)|
  |||

> [!NOTE]
> Редактор запросов использует порты 443 и 1443 для обмена данными.  Убедитесь, что вы включили исходящий трафик HTTPS на этих портах. Кроме того, необходимо будет добавить исходящий IP-адрес к правилам брандмауэра, разрешенным для сервера, для доступа к базам данных и хранилищам данных.

## <a name="sign-in-the-azure-portal"></a>Вход на портал Azure

Войдите на [портал Azure](https://portal.azure.com/).

## <a name="connect-using-sql-authentication"></a>Подключение с помощью проверки подлинности SQL

1. Перейдите на портал Azure, чтобы подключиться к базе данных SQL. Выполните поиск по запросу **базы данных SQL** и выберите этот пункт.

    ![Откройте список баз данных SQL на портале Azure](./media/sql-database-connect-query-portal/search-for-sql-databases.png)

2. Выберите свою базу данных SQL.

    ![Выберите базу данных SQL на портале Azure](./media/sql-database-connect-query-portal/select-a-sql-database.png)

3. В меню **Базы данных SQL** выберите **Редактор запросов (предварительная версия)** .

    ![Поиск редактора запросов](./media/sql-database-connect-query-portal/find-query-editor.PNG)

4. На странице **Вход** в разделе **Проверка подлинности SQL Server** введите **идентификатор для входа** и **пароль** учетной записи администратора сервера, указанные при создании базы данных. Нажмите кнопку **ОК**.

    ![войти](./media/sql-database-connect-query-portal/login-menu.png)

## <a name="connect-using-azure-active-directory"></a>Подключение с помощью Azure Active Directory

Настройка администратора Azure Active Directory (Azure AD) позволит использовать единое удостоверение для входа на портал Azure и в базу данных SQL. Выполните приведенные шаги ниже, чтобы настроить администратора Azure AD для своего сервера SQL Server.

> [!NOTE]
> * Учетные записи электронной почты (например, outlook.com, gmail.com, yahoo.com и др.) пока не поддерживаются как учетные записи администраторов Azure AD. Выберите пользователя, который изначально был создан в Azure AD или же был интегрирован в каталог Azure AD.
> * Выполнить вход администратора Azure AD с помощью учетных записей, в которых включена двухфакторная проверка подлинности, не получится.

1. На **домашней странице** или в меню портала Azure выберите **Все ресурсы**.

2. Выберите свой сервер SQL Server.

3. В меню **SQL Server** выберите **Параметры** и **Администратор Active Directory**.

4. На панели инструментов на странице **администратора Active Directory** SQL Server щелкните **Задать администратора** и выберите пользователя или группу, которым будет назначена роль администратора Azure AD.

    ![выбор Active Directory](./media/sql-database-connect-query-portal/select-active-directory.png)

5. На странице **Добавление администратора** в поле поиска введите пользователя или группу для поиска, выберите их в качестве администратора, а затем нажмите кнопку **Выбрать**.

6. Вернувшись к панели инструментов страницы **администратора Active Directory** SQL Server, выберите **Сохранить**.

7. В меню **SQL Server** выберите **Базы данных SQL**, а затем выберите базу данных SQL.

8. В меню **Базы данных SQL** выберите **Редактор запросов (предварительная версия)** . На странице **Вход** в разделе **Проверка подлинности Active Directory** появится сообщение о том, что вы вошли в систему, если являетесь администратором Azure AD. Затем нажмите кнопку **Продолжить как** *\<идентификатор пользователя или группы>* .

## <a name="view-data"></a>Просмотр данных

1. После того как вы пройдете проверку подлинности, вставьте приведенный ниже SQL-запрос в редактор запросов, чтобы извлечь первые 20 продуктов из категории.

   ```sql
    SELECT TOP 20 pc.Name as CategoryName, p.name as ProductName
    FROM SalesLT.ProductCategory pc
    JOIN SalesLT.Product p
    ON pc.productcategoryid = p.productcategoryid;
   ```

2. На панели инструментов щелкните **Выполнить** и просмотрите выходные данные в области **Результаты**.

   ![результаты редактора запросов](./media/sql-database-connect-query-portal/query-editor-results.png)

## <a name="insert-data"></a>Добавление данных

Выполните указанную ниже инструкцию Transact-SQL [INSERT](https://msdn.microsoft.com/library/ms174335.aspx), чтобы добавить новый продукт в таблицу `SalesLT.Product`.

1. Замените предыдущий запрос следующим содержимым.

    ```sql
    INSERT INTO [SalesLT].[Product]
           ( [Name]
           , [ProductNumber]
           , [Color]
           , [ProductCategoryID]
           , [StandardCost]
           , [ListPrice]
           , [SellStartDate]
           )
    VALUES
           ('myNewProduct'
           ,123456789
           ,'NewColor'
           ,1
           ,100
           ,100
           ,GETDATE() );
   ```


2. Щелкните **Выполнить**, чтобы вставить новую строку в таблицу `Product`. Отобразится панель **сообщений** с результатом: **Запрос выполнен. Затронуто строк: 1**.


## <a name="update-data"></a>Обновление данных

Выполните следующую инструкцию Transact-SQL [UPDATE](https://msdn.microsoft.com/library/ms177523.aspx), чтобы изменить новый продукт.

1. Замените предыдущий запрос следующим содержимым.

   ```sql
   UPDATE [SalesLT].[Product]
   SET [ListPrice] = 125
   WHERE Name = 'myNewProduct';
   ```

2. Щелкните **Выполнить**, чтобы обновить указанную строку в таблице`Product`. Отобразится панель **сообщений** с результатом: **Запрос выполнен. Затронуто строк: 1**.

## <a name="delete-data"></a>Удаление данных

Выполните следующую инструкцию Transact-SQL [DELETE](https://msdn.microsoft.com/library/ms189835.aspx), чтобы удалить новый продукт.

1. Замените предыдущий запрос следующим содержимым:

   ```sql
   DELETE FROM [SalesLT].[Product]
   WHERE Name = 'myNewProduct';
   ```

2. Щелкните **Выполнить**, чтобы удалить указанную строку в таблице`Product`. Отобразится панель **сообщений** с результатом: **Запрос выполнен. Затронуто строк: 1**.


## <a name="query-editor-considerations"></a>Рекомендации по работе с редактором запросов

Ознакомьтесь с рекомендациями по работе с редактором запросов.

* Редактор запросов использует порты 443 и 1443 для обмена данными.  Убедитесь, что вы включили исходящий трафик HTTPS на этих портах. Кроме того, необходимо будет добавить исходящий IP-адрес к правилам брандмауэра, разрешенным для сервера, для доступа к базам данных и хранилищам данных.

* Для работы редактора со службой "Приватный канал" не нужно добавлять IP-адрес клиента в брандмауэр Базы данных SQL.

* Если нажать клавишу F5, страница редактора запросов обновится, а выполняемый запрос будет закрыт.

* Редактор запросов не поддерживает подключение к базе данных `master`.

* Время ожидания для выполнения запроса составляет 5 минут.

* Редактор запросов поддерживает только цилиндрическую проекцию для типов данных geography.

* Поддержка IntelliSense для таблиц и представлений баз данных отсутствует. Однако редактор поддерживает автозаполнение имен, введенных ранее.




## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о поддержке Transact-SQL в базах данных SQL Azure см. в статье [Отличия Transact-SQL базы данных SQL Azure](sql-database-transact-sql-information.md).
