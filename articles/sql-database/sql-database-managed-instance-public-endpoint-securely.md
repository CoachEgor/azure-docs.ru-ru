---
title: Защита управляемого экземпляра общедоступные конечные точки - базы данных SQL управляемого экземпляра | Документация Майкрософт
description: Безопасно используйте общедоступные конечные точки в Azure с помощью управляемого экземпляра
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.topic: conceptual
author: srdan-bozovic-msft
ms.author: srbozovi
ms.reviewer: vanto, carlrab
manager: craigg
ms.date: 05/08/2019
ms.openlocfilehash: f06677b66c8f6586fec8cc5dfe97b1515b741e9c
ms.sourcegitcommit: 399db0671f58c879c1a729230254f12bc4ebff59
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/09/2019
ms.locfileid: "65470308"
---
# <a name="use-an-azure-sql-database-managed-instance-securely-with-public-endpoints"></a>Безопасно использовать управляемый экземпляр базы данных SQL Azure с общедоступными конечными точками

База данных SQL Azure обеспечивает подключения пользователей, управляемых экземпляров чем [общедоступные конечные точки](../virtual-network/virtual-network-service-endpoints-overview.md). В этой статье объясняется, как сделать более безопасным этой конфигурации.

## <a name="scenarios"></a>Сценарии

Управляемый экземпляр базы данных SQL предоставляет частную конечную точку, чтобы разрешить подключения из внутри виртуальной сети. Значение по умолчанию — для обеспечения максимальной изоляции. Однако существуют сценарии, где необходимо предоставить общедоступную конечную точку подключения:

- Управляемый экземпляр необходимо интегрировать с только с несколькими мультитенантную предложения платформы как службы (PaaS).
- Требуется более высокую пропускную способность для обмена данными, чем возможно при использовании виртуальной частной сети.
- Политики организации запрещают PaaS внутри корпоративной сети.

## <a name="deploy-a-managed-instance-for-public-endpoint-access"></a>Развертывание управляемого экземпляра, для доступа к общедоступной конечной точки

Хотя это не обязательно, общей модели развертывания для управляемого экземпляра с доступом к общедоступной конечной точки является создание экземпляра в выделенной изолированной виртуальной сети. В этой конфигурации виртуальная сеть используется только для изоляции виртуальных кластеров. Не важно, если управляемый экземпляр пространство IP-адресов перекрывается с пространством IP-адресов корпоративной сети.

## <a name="secure-data-in-motion"></a>Защитить передаваемые данные

Если драйвер клиента поддерживает шифрование, трафик данных в управляемый экземпляр всегда шифруется. Данные, передаваемые между управляемым экземпляром и другие виртуальные машины Azure или служб Azure никогда не покидает магистральную в Azure. Если подключение между управляемым экземпляром и к локальной сети, мы рекомендуем использовать Azure ExpressRoute с помощью пиринга Майкрософт. ExpressRoute помогает избежать перемещения данных через общедоступный Интернет. Для установки частного подключения управляемого экземпляра может использоваться только частного пиринга.

## <a name="lock-down-inbound-and-outbound-connectivity"></a>Заблокировать входящее и исходящее подключение

На следующей схеме показана конфигураций безопасности:

![Конфигурации безопасности для блокирования входящее и исходящее подключение](media/sql-database-managed-instance-public-endpoint-securely/managed-instance-vnet.png)

Управляемый экземпляр имеет [выделенный адрес конечной точки с общедоступным](sql-database-managed-instance-find-management-endpoint-ip-address.md). В брандмауэра для исходящего трафика на стороне клиента и правила группы безопасности сети задайте этот IP-адрес общедоступной конечной точки, чтобы ограничить число исходящих подключений.

Чтобы убедиться, что трафик для управляемого экземпляра, который поступает из надежных источников, рекомендуется подключение из источников с известных IP-адресами. Используете группы безопасности сети для ограничения доступа в управляемом экземпляре общедоступную конечную точку на порте 3342.

Когда клиенты должны инициировать подключение из локальной сети, убедитесь, что исходный адрес преобразуется в набор известных IP-адресов. Если вы пока не так (например, выполняется типичный сценарий работы мобильных сотрудников), мы рекомендуем использовать [VPN-подключения между сайтами и частную конечную точку](sql-database-managed-instance-configure-p2s.md).

Если подключения запускаются из Azure, мы рекомендуем обеспечить трафик только из хорошо известная назначенный [виртуальный IP-адрес](../virtual-network/virtual-networks-reserved-public-ip.md) (например, виртуальная машина). Чтобы сделать управление проще виртуальных адресов IP-адрес (VIP), может потребоваться использовать [префиксы общедоступных IP-адресов](../virtual-network/public-ip-address-prefix.md).

## <a name="next-steps"></a>Дальнейшие действия

- Сведения о настройке общедоступной конечной точки для экземпляров управление: [Настроить общедоступную конечную точку](sql-database-managed-instance-public-endpoint-configure.md)
