---
title: Псевдоним DNS
description: Приложения могут подключаться к псевдониму для имени сервера Базы данных SQL Azure. Кроме того, в любое время можно изменить базу данных SQL, на которую указывает псевдоним, чтобы упростить тестирование и т. д.
services: sql-database
ms.service: sql-database
ms.subservice: operations
ms.custom: seo-lt-2019
ms.devlang: ''
ms.topic: conceptual
author: rohitnayakmsft
ms.author: rohitna
ms.reviewer: genemi, jrasnick, vanto
ms.date: 06/26/2019
ms.openlocfilehash: 05fa542a0ad1c72f73148eefd304a9771798598d
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "73820613"
---
# <a name="dns-alias-for-azure-sql-database"></a>Псевдоним DNS для Базы данных SQL Azure

Для Базы данных SQL Azure существует сервер службы доменных имен (DNS). PowerShell и REST API принимают [вызовы для создания псевдонимов DNS и управления ими](#anchor-powershell-code-62x) для имени сервера Базы данных SQL.

*Псевдоним DNS* можно использовать вместо имени сервера Базы данных SQL Azure. Клиентские программы могут использовать псевдоним в строке подключения. Псевдоним DNS предоставляет слой преобразования, который может перенаправить клиентские программы на разные сервера. Этот слой избавляет вас от необходимости находить и редактировать все клиенты и их строки подключения.

Далее представлены общие случаи использования псевдонимов DNS:

- Создание легко запоминающегося имени для SQL Server Azure.
- Во время начальной разработки ваш псевдоним может ссылаться на тестовый сервер базы данных SQL. После активации приложения вы можете изменить псевдоним, чтобы он ссылался на рабочий сервер. При переходе от тестовой среды к рабочей не нужно менять конфигурации клиентов, которые подключаются к серверу базы данных.
- Предположим, что единственная база данных в вашем приложении перенесена на другой сервер базы данных SQL. Здесь вы можете изменить псевдоним без необходимости изменения конфигураций нескольких клиентов.
- Во время регионального сбоа используется геовосстановление для восстановления базы данных в другом сервере и регионе. Можно изменить существующий псевдоним, чтобы указать на новый сервер, чтобы существующее клиентское приложение могло повторно подключиться к нему. 

## <a name="domain-name-system-dns-of-the-internet"></a>Служба доменных имен (DNS) Интернета

Интернет использует службу доменных имен (DNS). DNS преобразовывает понятные имена в имя сервера Базы данных SQL Azure.

## <a name="scenarios-with-one-dns-alias"></a>Сценарии с одним псевдонимом DNS

Предположим, вам нужно переключить свою систему на новый сервер Базы данных SQL Azure. Раньше вам нужно было найти и обновить каждую строку подключения в каждой клиентской программе. Но теперь, если в строках подключения используется псевдоним DNS, необходимо обновить только свойство "псевдоним".

Компонент "псевдоним" DNS Базы данных SQL Azure можно использовать в следующих сценариях.

### <a name="test-to-production"></a>Переход от тестовой к рабочей среде

Включите использование псевдонима DNS в строках подключения в разработку клиентских программ. Добавьте свойства псевдонима к тестовой версии сервера Базы данных Azure SQL.

Позже, когда новая система будет доступна для использования, вы сможете обновить свойства псевдонима, указав на рабочий сервер базы данных SQL. Никаких изменений в клиентских программах не требуется.

### <a name="cross-region-support"></a>Поддержка перехода в другой регион

Аварийное восстановление может привести к переходу вашего сервера Базы данных SQL в другой географический регион. Для системы, используюейтой псевдонимом DNS, можно избежать необходимости поиска и обновления всех строк соединения для всех клиентов. Вместо этого вы можете обновить псевдоним, чтобы он ссылался на новый сервер базы данных SQL, в котором теперь находится ваша база данных.

## <a name="properties-of-a-dns-alias"></a>Свойства псевдонима DNS

Следующие свойства применимы к каждому псевдониму DNS для сервера Базы данных SQL:

- *Уникальное имя.* Каждое создаваемое имя псевдонима уникально для всех серверов Базы данных SQL Azure так же, как имена серверов.
- *Необходим сервер.* Псевдоним DNS обязательно должен ссылаться на имеющийся сервер. В противном случае создать псевдоним невозможно. Обновленный псевдоним должен всегда ссылаться только на один имеющийся сервер.
  - При удалении сервера Базы данных SQL система Azure удаляет все псевдонимы DNS, ссылающиеся на него.
- *Отсутствие привязки к какому-либо региону.* Псевдонимы DNS не привязаны к региону. Любые псевдонимы DNS можно изменить таким образом, чтобы они ссылались на сервер Базы данных SQL Azure, который находится в любом географическом регионе.
  - Однако при этом оба сервера должны находится в одной *подписке* Azure.
- *Разрешения.* Для управления псевдонимом DNS пользователю нужно разрешение *Участник на уровне сервера* или разрешение с большими правами. Дополнительные сведения см. в статье [Начало работы с управлением доступом на основе ролей на портале Azure](../role-based-access-control/overview.md).

## <a name="manage-your-dns-aliases"></a>Управление псевдонимами DNS

Для программного управления псевдонимами DNS доступны командлеты REST API и PowerShell.

### <a name="rest-apis-for-managing-your-dns-aliases"></a>REST API для управления псевдонимами DNS

Документация по REST API доступна в следующей статье:

- [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) (REST API Базы данных SQL Azure)

Кроме того, ознакомиться с REST API можно на сайте GitHub:

- [Azure SQL Database server, DNS alias REST APIs](https://github.com/Azure/azure-rest-api-specs/blob/master/specification/sql/resource-manager/Microsoft.Sql/preview/2017-03-01-preview/serverDnsAliases.json) (REST API сервера Базы данных SQL Azure и псевдонима DNS)

<a name="anchor-powershell-code-62x"/>

#### <a name="powershell-for-managing-your-dns-aliases"></a>PowerShell для управления псевдонимами DNS

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> Модуль PowerShell Azure Resource Manager по-прежнему поддерживается базой данных Azure S'L, но все будущие разработки предназначены для модуля Az.Sql. Для этих cmdlets, см [AzureRM.Sql](https://docs.microsoft.com/powershell/module/AzureRM.Sql/). Аргументы для команд в модуле Az и в модулях Azrm существенно идентичны.

Доступны командлеты PowerShell, которые вызывают REST API.

Пример кода командлетов PowerShell, используемых для управления псевдонимами DNS, приведен в следующей статье:

- [Управление псевдонимом DNS для Базы данных SQL Azure с помощью PowerShell](dns-alias-powershell.md)

В примере кода используются следующие командлеты:

- [New-AzSqlServerDNSAlias](https://docs.microsoft.com/powershell/module/az.Sql/New-azSqlServerDnsAlias): Создает новый псевдоним DNS в системе обслуживания базы данных Azure S'L. Псевдоним ссылается на сервер 1 Базы данных SQL Azure.
- [Get-AzSqlServerDNSAlias](https://docs.microsoft.com/powershell/module/az.Sql/Get-azSqlServerDnsAlias): Получить и перечислить все псевдонимы DNS, которые назначены на сервер S'L DB 1.
- [Set-AzSqlServerDNSAlias](https://docs.microsoft.com/powershell/module/az.Sql/Set-azSqlServerDnsAlias): изменяет имя сервера, на которое настроен псевдоним, от сервера 1 до сервера DB 2.
- [Удалить-AzSqlServerDNSAlias](https://docs.microsoft.com/powershell/module/az.Sql/Remove-azSqlServerDnsAlias): Удалите псевдоним DNS с сервера S'L DB 2, используя имя псевдонима.

## <a name="limitations-during-preview"></a>Ограничения для предварительной версии

Сейчас для псевдонима DNS существуют следующие ограничения:

- *Задержка до 2 минут.* Для обновления или удаления псевдонима DNS требуется до 2 минут.
  - Независимо от задержки (даже небольшой), псевдоним немедленно прекращает ссылаться на клиентские подключения к устаревшему серверу.
- *Поиск DNS.*[Поиск DNS](https://docs.microsoft.com/windows-server/administration/windows-commands/nslookup) — это единственный надежный способ проверить, на какой сервер ссылается псевдоним DNS.
- _Аудит таблицы не поддерживается:_ Нельзя использовать псевдоним DNS на сервере базы данных Azure S'L, который включен в базу данных для *аудита таблиц.*
  - Аудит таблиц не рекомендуется.
  - Рекомендуем использовать [аудит больших двоичных объектов](sql-database-auditing.md).

## <a name="related-resources"></a>Связанные ресурсы

- Сведения об аварийном восстановлении см. в статье [Обзор обеспечения непрерывности бизнес-процессов с помощью Базы данных SQL Azure](sql-database-business-continuity.md).

## <a name="next-steps"></a>Дальнейшие действия

- [Управление псевдонимом DNS для Базы данных SQL Azure с помощью PowerShell](dns-alias-powershell.md)
