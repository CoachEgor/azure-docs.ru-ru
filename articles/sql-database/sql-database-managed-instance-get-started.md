---
title: 'Портал Azure: Создание управляемого экземпляра Базы данных SQL | Документация Майкрософт'
description: Создание управляемого экземпляра Базы данных SQL, сетевой среды и виртуальной машины клиента для доступа.
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: ''
ms.devlang: ''
ms.topic: quickstart
author: jovanpop-msft
ms.author: jovanpop
ms.reviewer: sstein, carlrab
ms.date: 05/07/2019
ms.openlocfilehash: 0344fc834cb1ef29c91bc52239d1df2706d1ca81
ms.sourcegitcommit: 1c9858eef5557a864a769c0a386d3c36ffc93ce4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/18/2019
ms.locfileid: "71101676"
---
# <a name="quickstart-create-an-azure-sql-database-managed-instance"></a>Краткое руководство. Создание управляемого экземпляра Базы данных SQL Azure

В этом кратком руководстве описано создание [управляемого экземпляра](sql-database-managed-instance.md) Базы данных SQL Azure на портале Azure.

> [!IMPORTANT]
> Сведения об ограничениях см. в разделах [Поддерживаемые регионы](sql-database-managed-instance-resource-limits.md#supported-regions) и [Поддерживаемые типы подписок](sql-database-managed-instance-resource-limits.md#supported-subscription-types).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/).

Войдите на [портале Azure](https://portal.azure.com/).

## <a name="create-a-managed-instance"></a>Создание управляемого экземпляра

Ниже показано, как создать управляемый экземпляр.

1. На портале Azure в меню слева выберите **Azure SQL**. Если Azure SQL отсутствует в списке, выберите **Все службы** и в поле поиска введите *Azure SQL*.
2. Выберите **Добавить**, чтобы открыть страницу **выбора варианта развертывания SQL**. Чтобы просмотреть дополнительные сведения об управляемом экземпляре базы данных SQL Azure, выберите **Показать сведения** на плитке **Управляемые экземпляры**.
3. Нажмите кнопку **Создать**.

   ![Создание управляемого экземпляра](./media/sql-database-managed-instance-get-started/create-managed-instance.png)

4. Укажите запрошенные сведения в форме **управляемого экземпляра SQL**, используя данные, приведенные в таблице ниже.

   | Параметр| Рекомендуемое значение | Описание |
   | ------ | --------------- | ----------- |
   | **подписка** | Ваша подписка | Подписка, которая дает вам разрешение на создание ресурсов |
   |**Имя управляемого экземпляра**|Любое допустимое имя|Сведения о допустимых именах см. в статье [Соглашения об именовании](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).|
   |**Имя для входа администратора управляемого экземпляра**|Любое допустимое имя пользователя|Сведения о допустимых именах см. в статье [Соглашения об именовании](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions). Не используйте serveradmin. Это имя зарезервировано для роли уровня сервера.|
   |**Пароль**|Любой допустимый пароль|Пароль должен включать минимум 16 символов и соответствовать [определенным требованиям к сложности](../virtual-machines/windows/faq.md#what-are-the-password-requirements-when-creating-a-vm).|
   |**Часовой пояс**|Часовой пояс для управляемого экземпляра|Дополнительные сведения см. в статье о [часовых поясах](sql-database-managed-instance-timezone.md).|
   |**Параметры сортировки**|Параметры сортировки для управляемого экземпляра|При переносе баз данных SQL Server необходимо проверить параметры сортировки источника с помощью `SELECT SERVERPROPERTY(N'Collation')` и использовать это значение. Сведения о параметрах сортировки см. в статье [Задание или изменение параметров сортировки сервера](https://docs.microsoft.com/sql/relational-databases/collations/set-or-change-the-server-collation).|
   |**Местоположение.**|Расположение, в котором хотите создать управляемый экземпляр|Дополнительные сведения о регионах Azure см. [здесь](https://azure.microsoft.com/regions/).|
   |**Виртуальная сеть**|Щелкните **Создать виртуальную сеть** или выберите допустимую виртуальную сеть и подсеть.| Если поля сети и подсети недоступны, прежде чем выбирать эти значения в качестве целевого объекта для нового управляемого экземпляра, нужно [изменить их в соответствии с требованиями сети](sql-database-managed-instance-configure-vnet-subnet.md). Сведения о требованиях к настройке сетевой среды для управляемого экземпляра см. в статье [Архитектура подключений к для управляемого экземпляра базы данных SQL Azure](sql-database-managed-instance-connectivity-architecture.md). |
   |**Включение общедоступной конечной точки**   |Установите этот флажок, чтобы включить общедоступную конечную точку   |Чтобы управляемый экземпляр был доступен через конечную точку общедоступных данных, необходимо проверить **Включение общедоступной конечной точки**.| 
   |**Разрешить доступ из**   |Выберите один из следующих вариантов: <ul> <li>**Службы Azure**;</li> <li>**Интернет**;</li> <li>**Нет доступа**.</li></ul>   |Использование портала позволяет настроить группу безопасности с помощью общедоступной конечной точки. </br> </br> Выберите один из следующих вариантов, соответствующий вашему сценарию. </br> <ul> <li>Службы Azure. Рекомендуются при подключении из Power BI или другой многопользовательской службы. </li> <li> Интернет. Используйте для тестирования, если вы хотите быстро запустить управляемый экземпляр. Не рекомендуется использовать в рабочих средах. </li> <li> Нет доступа. Эта опция создает запрещающее правило безопасности. Вам нужно изменить это правило, чтобы сделать управляемый экземпляр доступным через общедоступную конечную точку. </li> </ul> </br> Дополнительные сведения о безопасности общедоступной конечной точки, см. в статье [Безопасно использовать управляемый экземпляр базы данных SQL Azure с общедоступными конечными точками](sql-database-managed-instance-public-endpoint-securely.md).|
   |**Тип подключения:**|Выберите тип соединения: прокси-сервер или перенаправление|Дополнительные сведения о типах соединений см. в. статье [Архитектура подключения к SQL Azure](sql-database-connectivity-architecture.md#connection-policy).|
   |**группа ресурсов**|Новая или существующая группа ресурсов.|Допустимые имена групп ресурсов см. в статье о [правилах и ограничениях именования](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).|

   ![Форма управляемого экземпляра](./media/sql-database-managed-instance-get-started/managed-instance-create-form.png)

5. Чтобы использовать управляемый экземпляр Базы данных SQL Azure в качестве вторичной группы отработки отказа экземпляра, выберите просмотр и укажите управляемый экземпляр DnsAzurePartner. 
6. Щелкните поле **Ценовая категория**, чтобы выбрать размер вычислительных ресурсов и ресурсов хранения, а также просмотреть варианты ценовой категории. Ценовая категория общего назначения с 32 ГБ памяти и 16 виртуальными ядрами — значение по умолчанию.
7. Укажите нужный объем хранилища и количество виртуальных ядер, используя ползунки или текстовые поля.
8. По завершении щелкните **Применить** для сохранения выбранных параметров. 
9. Нажмите кнопку **Создать**, чтобы развернуть управляемый экземпляр.
10. Щелкните значок **Уведомления**, чтобы просмотреть состояние развертывания.

    ![Ход выполнения развертывания управляемого экземпляра](./media/sql-database-managed-instance-get-started/deployment-progress.png)

11. Щелкните **Развертывание выполняется**, чтобы открыть окно управляемого экземпляра для дальнейшего мониторинга состояния развертывания. 

> [!IMPORTANT]
> Первый экземпляр в подсети обычно развертывается намного дольше, чем последующие экземпляры. Не стоит из-за этого отменять развертывание.

## <a name="review-resources-and-retrieve-your-fully-qualified-server-name"></a>Проверка ресурсов и получение полного имени сервера

После успешного завершения развертывания, проверьте созданные ресурсы и получите полное имя сервера для использования в последующих кратких руководствах.

1. Откройте группу ресурсов для управляемого экземпляра. Просмотрите его ресурсы, которые были созданы для вас в кратком руководстве [Создание управляемого экземпляра](#create-a-managed-instance).

   ![Ресурсы управляемого экземпляра](./media/sql-database-managed-instance-get-started/resources.png)

2. Выберите таблицу маршрутов, чтобы просмотреть таблицу пользовательских маршрутов UDR, созданную для вас.

   ![Таблица маршрутов](./media/sql-database-managed-instance-get-started/route-table.png)

3. В таблице маршрутизации просмотрите записи для маршрутизации трафика из виртуальной сети управляемого экземпляра и внутри нее. Если вы создаете или настраиваете свою таблицу маршрутов вручную, вы должны обязательно создать эти записи в таблице маршрутов.

   ![Запись для локальной подсети управляемого экземпляра](./media/sql-database-managed-instance-get-started/udr.png)

4. Вернитесь в группу ресурсов и выберите группу безопасности сети, чтобы просмотреть правила безопасности.

   ![Группа безопасности сети](./media/sql-database-managed-instance-get-started/network-security-group.png)

5. Просмотрите правила безопасности относительно входящего и исходящего трафика. Если вы настроили общедоступные конечные точки для своего управляемого экземпляра, см. статью [Настроить общедоступную конечную точку в управляемый экземпляр базы данных SQL Azure](sql-database-managed-instance-public-endpoint-configure.md#allow-public-endpoint-traffic-on-the-network-security-group) для получения дополнительной информации.

   ![Правила безопасности](./media/sql-database-managed-instance-get-started/security-rules.png)

6. Вернитесь в группу ресурсов и выберите свой управляемый экземпляр.

   ![Управляемый экземпляр](./media/sql-database-managed-instance-get-started/managed-instance.png)

7. На вкладке **Обзор** найдите свойство **Узел**. Скопируйте полный адрес узла для управляемого экземпляра.

   ![Имя узла](./media/sql-database-managed-instance-get-started/host-name.png)

   Имя будет выглядеть примерно так: **имя_компьютера.a1b2c3d4e5f6.database.windows.net**.

## <a name="next-steps"></a>Дополнительная информация

- Дополнительные сведения о подключении к управляемому экземпляру см. в следующих статьях.
  - Обзор вариантов подключения для приложений см. в статье [Подключение приложения к Управляемому экземпляру Базы данных SQL](sql-database-managed-instance-connect-app.md).
  - Краткое руководство по подключению к управляемому экземпляру с виртуальной машины Azure см. [здесь](sql-database-managed-instance-configure-vm.md).
  - Краткое руководство по подключению к управляемому экземпляру с локального клиентского компьютера с помощью подключения "точка — сеть" см. [здесь](sql-database-managed-instance-configure-p2s.md).
- Чтобы восстановить имеющуюся базу данных SQL Server из локальной среди в управляемый экземпляр, выполните следующие действия. 
    - См. [Руководство по переносу баз данных SQL Server в управляемый экземпляр Базы данных SQL Azure с помощью DMS в автономном режиме](../dms/tutorial-sql-server-to-managed-instance.md) для восстановления из файла резервной копии базы данных. 
    - Дополнительные сведения о восстановлении из файла резервной копии базы данных см. в статье [Краткое руководство. Восстановление базы данных в Управляемый экземпляр](sql-database-managed-instance-get-started-restore.md).
- Сведения о расширенном мониторинге производительности для базы данных управляемого экземпляра с использованием встроенных средств анализа проблем см. в статье о [мониторинге Базы данных SQL Azure с помощью Аналитики SQL Azure](../azure-monitor/insights/azure-sql.md).
