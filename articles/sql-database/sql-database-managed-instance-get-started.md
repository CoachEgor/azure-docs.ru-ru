---
title: 'Портал Azure: Создание управляемого экземпляра Базы данных SQL | Документация Майкрософт'
description: Создание управляемого экземпляра Базы данных SQL, сетевой среды и виртуальной машины клиента для доступа.
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: ''
ms.devlang: ''
ms.topic: quickstart
author: danimir
ms.author: danil
ms.reviewer: sstein, carlrab
ms.date: 05/07/2019
ms.openlocfilehash: 9eae757642c2a833b60c0c22a8984e83909e772c
ms.sourcegitcommit: 29880cf2e4ba9e441f7334c67c7e6a994df21cfe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/26/2019
ms.locfileid: "71300815"
---
# <a name="quickstart-create-an-azure-sql-database-managed-instance"></a>Краткое руководство. Создание управляемого экземпляра Базы данных SQL Azure

В этом кратком руководстве описано создание [управляемого экземпляра](sql-database-managed-instance.md) Базы данных SQL Azure на портале Azure.

> [!IMPORTANT]
> Сведения об ограничениях см. в разделах [Поддерживаемые регионы](sql-database-managed-instance-resource-limits.md#supported-regions) и [Поддерживаемые типы подписок](sql-database-managed-instance-resource-limits.md#supported-subscription-types).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/).

Войдите на [портале Azure](https://portal.azure.com/).

## <a name="create-a-managed-instance"></a>Создание управляемого экземпляра

Ниже показано, как создать управляемый экземпляр:

1. Выберите **Azure SQL** в левом меню портала Azure. Если **Azure SQL** отсутствует в списке, выберите **Все службы**, а затем введите **Azure SQL** в поле поиска.
2. Выберите **Добавить**, чтобы открыть страницу **выбора варианта развертывания SQL**. Вы можете просмотреть дополнительную информацию об управляемом экземпляре базы данных SQL Azure, выбрав **Показать подробности** на плитке **Управляемые экземпляры**.
3. Нажмите кнопку **Создать**.

   ![Создание управляемого экземпляра](./media/sql-database-managed-instance-get-started/create-managed-instance.png)

4. Используйте вкладки в форме подготовки **Создать управляемый экземпляр базы данных SQL Azure**, чтобы добавить необходимую и дополнительную информацию. Эти вкладки описываются в разделах ниже.

### <a name="basics"></a>Основы

Заполните необходимую информацию на вкладке **Основные сведения**, используя следующую таблицу. Это минимальный набор информации для подготовки управляемого экземпляра.

![Вкладка "Основные сведения" для создания виртуальной машины](./media/sql-database-managed-instance-get-started/tabs/mi-create-tab-basics.png)

| Параметр| Рекомендуемое значение | Описание |
| ------ | --------------- | ----------- |
| **подписка** | Ваша подписка | Подписка, которая дает вам разрешение на создание ресурсов |
| **группа ресурсов** | Новая или существующая группа ресурсов.|Допустимые имена групп ресурсов см. в статье о [правилах и ограничениях именования](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).|
| **Имя управляемого экземпляра** | Любое допустимое имя|Сведения о допустимых именах см. в статье [Соглашения об именовании](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).|
| **Регион** |Регион, в котором хотите создать управляемый экземпляр.|Дополнительные сведения о регионах Azure см. [здесь](https://azure.microsoft.com/regions/).|
| **Имя для входа администратора управляемого экземпляра** | Любое допустимое имя пользователя | Сведения о допустимых именах см. в статье [Соглашения об именовании](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions). Не используйте serveradmin. Это имя зарезервировано для роли уровня сервера.|
| **Пароль** | Любой допустимый пароль| Пароль должен включать минимум 16 символов и соответствовать [определенным требованиям к сложности](../virtual-machines/windows/faq.md#what-are-the-password-requirements-when-creating-a-vm).|

Выберите **Настроить управляемый экземпляр** для определения размера вычислительных ресурсов и ресурсов хранения, а также для просмотра ценовой категории. Укажите нужный объем хранилища и количество виртуальных ядер, используя ползунки или текстовые поля. По завершении щелкните **Применить** для сохранения выбранных параметров. 

![Форма управляемого экземпляра](./media/sql-database-managed-instance-get-started/tabs/mi-create-tab-configure-performance.png)

Чтобы проверить выбранные параметры перед созданием управляемого экземпляра, можно выбрать **Просмотреть и создать**. Или настройте сетевые параметры, выбрав **Далее: сеть**.

### <a name="networking"></a>Сеть

Заполните дополнительные сведения на вкладке **Сетевые подключения**, используя следующую таблицу. Если пропустить эти сведения, на портале будут применяться параметры по умолчанию.

![Вкладка "Сетевые подключения" для создания управляемого экземпляра](./media/sql-database-managed-instance-get-started/tabs/mi-create-tab-networking.png)

| Параметр| Рекомендуемое значение | ОПИСАНИЕ |
| ------ | --------------- | ----------- |
| **Виртуальная сеть** | Щелкните **Создать виртуальную сеть** или выберите допустимую виртуальную сеть и подсеть.| Если поля сети и подсети недоступны, прежде чем выбирать эти значения в качестве целевого объекта для нового управляемого экземпляра, нужно [изменить их в соответствии с требованиями сети](sql-database-managed-instance-configure-vnet-subnet.md). Сведения о требованиях к настройке сетевой среды для управляемого экземпляра см. в статье [Архитектура подключений к для управляемого экземпляра базы данных SQL Azure](sql-database-managed-instance-connectivity-architecture.md). |
| **Тип подключения:** | Выберите тип соединения: прокси-сервер или перенаправление.|Дополнительные сведения о типах соединений см. в. статье [Архитектура подключения к SQL Azure](sql-database-connectivity-architecture.md#connection-policy).|
| **Общедоступная конечная точка**  | Нажмите кнопку **Включить**. | Для того, чтобы управляемый экземпляр был доступен через конечную точку общедоступных данных, необходимо включить эту опцию. | 
| **Разрешить доступ из** (если **Общедоступная конечная точка** включена) | Выберите один из способов.   |Использование портала позволяет настроить группу безопасности с помощью общедоступной конечной точки. </br> </br> Выберите один из следующих вариантов, соответствующий вашему сценарию. </br> <ul> <li>**Службы Azure**: Мы рекомендуем эту опцию при подключении через Power BI или другую многопользовательскую службу. </li> <li> **Интернет**. Используйте для тестирования, если вы хотите быстро запустить управляемый экземпляр. Мы не рекомендуем использовать его для рабочих сред. </li> <li> **Нет доступа**: Эта опция создает правило безопасности **Запретить**. Измените это правило, чтобы сделать управляемый экземпляр доступным через общедоступную конечную точку. </li> </ul> </br> Дополнительные сведения о безопасности общедоступной конечной точки, см. в статье [Безопасное использование управляемого экземпляра базы данных SQL Azure с помощью общедоступной конечной точки](sql-database-managed-instance-public-endpoint-securely.md).|

Выберите **Проверка и создание**, чтобы проверить выбор перед созданием управляемого экземпляра. Или настройте дополнительные пользовательские параметры, выбрав **Далее: Дополнительные параметры**.

### <a name="additional-settings"></a>Дополнительные параметры

Заполните дополнительную информацию на вкладке **Дополнительные параметры**, используя следующую таблицу. Если пропустить эти сведения, на портале будут применяться параметры по умолчанию.

![Вкладка "Дополнительные параметры" для создания управляемого экземпляра](./media/sql-database-managed-instance-get-started/tabs/mi-create-tab-additional-settings.png)

| Параметр| Рекомендуемое значение | ОПИСАНИЕ |
| ------ | --------------- | ----------- |
| **Параметры сортировки** | Выберите параметры сортировки, которые вы хотите использовать для управляемого экземпляра. При переносе баз данных SQL Server необходимо проверить параметры сортировки источника с помощью `SELECT SERVERPROPERTY(N'Collation')` и использовать это значение.| Сведения о параметрах сортировки см. в статье [Задание или изменение параметров сортировки сервера](https://docs.microsoft.com/sql/relational-databases/collations/set-or-change-the-server-collation).|   
| **Часовой пояс** | Выберите часовой пояс, который будет соблюдать ваш управляемый экземпляр.|Дополнительные сведения см. в статье о [часовых поясах](sql-database-managed-instance-timezone.md).|
| **Использовать как дополнительную отработку отказа** | Выберите **Да**. | Включите эту опцию, чтобы использовать управляемый экземпляр в качестве дополнительной группы отработки отказа.|
| **Первичный управляемый экземпляр** (если **Использовать как дополнительную отработку отказа** установлен на **Да**) | Выберите существующий первичный управляемый экземпляр, который будет присоединен в той же зоне DNS к создаваемому управляемому экземпляру. | Этот шаг включит конфигурацию после создания группы отработки отказа. Дополнительные сведения см. в статье [Руководство. Добавление управляемого экземпляра базы данных SQL в группу отработки отказа](sql-database-managed-instance-failover-group-tutorial.md).|

### <a name="review--create"></a>Отзыв и создание

1. Выберите вкладку **Проверка и создание**, чтобы проверить выбор перед созданием управляемого экземпляра.

   ![Вкладка для просмотра и создания управляемого экземпляра](./media/sql-database-managed-instance-get-started/tabs/mi-create-tab-review-create.png)

1. Выберите **Создать**, чтобы начать подготовку управляемого экземпляра.

> [!IMPORTANT]
> Развертывание управляемого экземпляра — это длительная операция. Развертывание первого экземпляра в подсети обычно занимает гораздо больше времени, чем развертывание в подсети с существующими управляемыми экземплярами. Среднее время подготовки см. в разделе [Операции управления управляемыми экземплярами](sql-database-managed-instance.md#managed-instance-management-operations).

### <a name="monitor-deployment-progress"></a>Мониторинг хода выполнения развертывания

1. Щелкните значок **Уведомления**, чтобы просмотреть состояние развертывания.

    ![Ход выполнения развертывания управляемого экземпляра](./media/sql-database-managed-instance-get-started/in-progress/mi-create-deployment-in-progress.png)

1. Выберите **Выполняется развертывание** в уведомлении, чтобы открыть окно управляемого экземпляра и дополнительно отслеживать ход развертывания. 

> [!TIP]
> Если вы закрыли веб-браузер или перешли с экрана хода выполнения развертывания, выполните следующие действия, чтобы найти этот экран:
> 1. На портале Azure откройте группу ресурсов (на вкладке **Основные сведения**), в которую развертывается управляемый экземпляр.
> 2. Выберите **Развертывания**.
> 3. Выберите выполняемую операцию развертывания управляемого экземпляра.

## <a name="review-resources-and-retrieve-your-host-name"></a>Просмотр ресурсов и получение имени вашего узла

После успешного завершения выполнения развертывания:

1. Откройте группу ресурсов для управляемого экземпляра. Просмотрите его ресурсы, которые были созданы для вас в кратком руководстве [Создание управляемого экземпляра](#create-a-managed-instance).

   ![Ресурсы управляемого экземпляра](./media/sql-database-managed-instance-get-started/resources.png)

2. Выберите таблицу маршрутов, чтобы просмотреть созданный для вас пользовательский маршрут UDR.

   ![Таблица маршрутов](./media/sql-database-managed-instance-get-started/route-table.png)

3. В таблице маршрутов просмотрите записи для маршрутизации трафика из виртуальной сети управляемого экземпляра и внутри нее. Если вы создаете или настраиваете свою таблицу маршрутов вручную, обязательно создайте эти записи в таблице маршрутов.

   ![Запись для локальной подсети управляемого экземпляра](./media/sql-database-managed-instance-get-started/udr.png)

4. Вернитесь в группу ресурсов и выберите группу безопасности сети.

   ![Группа безопасности сети](./media/sql-database-managed-instance-get-started/network-security-group.png)

5. Просмотрите правила безопасности относительно входящего и исходящего трафика. Если вы настроили общедоступные конечные точки для своего управляемого экземпляра, см. статью [Настройка общедоступной конечной точки](sql-database-managed-instance-public-endpoint-configure.md#allow-public-endpoint-traffic-on-the-network-security-group) для получения дополнительных сведений.

   ![Правила безопасности](./media/sql-database-managed-instance-get-started/security-rules.png)

6. Вернитесь в группу ресурсов и выберите свой управляемый экземпляр.

   ![Управляемый экземпляр в группе ресурсов](./media/sql-database-managed-instance-get-started/managed-instance.png)

7. На вкладке **Обзор** найдите свойство **Узел**. Скопируйте имя узла управляемого экземпляра для использования в следующем кратком руководстве.

   ![Имя узла](./media/sql-database-managed-instance-get-started/host-name.png)

   Имя узла также именуется полным доменным именем (FQDN). Оно похоже на *your_machine_name.a1b2c3d4e5f6.database.windows.net*.

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о подключении к управляемому экземпляру см. в следующих статьях.
- Обзор вариантов подключения для приложений см. в статье [Подключение приложения к Управляемому экземпляру Базы данных SQL](sql-database-managed-instance-connect-app.md).
- Краткое руководство по подключению к управляемому экземпляру с виртуальной машины Azure см. [здесь](sql-database-managed-instance-configure-vm.md).
- Краткое руководство по подключению к управляемому экземпляру с локального клиентского компьютера с помощью подключения "точка — сеть" см. [здесь](sql-database-managed-instance-configure-p2s.md).

Чтобы восстановить имеющуюся базу данных SQL Server из локальной среди в управляемый экземпляр, выполните следующие действия. 
- Используйте [Azure Database Migration Service для миграции](../dms/tutorial-sql-server-to-managed-instance.md) для восстановления из файла резервной копии базы данных. 
- Дополнительные сведения о восстановлении из файла резервной копии базы данных см. в статье [Краткое руководство. Восстановление базы данных в Управляемый экземпляр](sql-database-managed-instance-get-started-restore.md).

Сведения о расширенном мониторинге производительности для базы данных управляемого экземпляра с использованием встроенных средств анализа проблем см. в статье о [мониторинге Базы данных SQL Azure с помощью Аналитики SQL Azure](../azure-monitor/insights/azure-sql.md).
