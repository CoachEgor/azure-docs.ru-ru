---
title: Общие сведения о модели виртуального ядра
description: Модель приобретения Виртуальное ядро позволяет независимо масштабировать ресурсы вычислений и хранения, сопоставлять локальную производительность и оптимизировать цену.
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: sashan, moslake, carlrab
ms.date: 11/27/2019
ms.openlocfilehash: e53fb46b7c13e1feb0cc24663fb0782b4de06f2b
ms.sourcegitcommit: 7b25c9981b52c385af77feb022825c1be6ff55bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79255825"
---
# <a name="vcore-model-overview"></a>Общие сведения о модели виртуального ядра

Модель виртуальных ядер (Виртуальное ядро) предоставляет несколько преимуществ.

- Более высокие пределы вычислений, памяти, операций ввода-вывода и хранилища.
- Управление созданием оборудования для лучшего соответствия требованиям к вычислению и памяти рабочей нагрузки.
- Ценовые скидки для [преимущество гибридного использования Azure (АХБ)](sql-database-azure-hybrid-benefit.md) и [зарезервированного экземпляра (RI)](sql-database-reserved-capacity.md).
- Более большая прозрачность в сведениях об оборудовании, которые вычисляют вычисление; облегчает планирование миграции из локальных развертываний.

## <a name="service-tiers"></a>Уровни службы

Параметры уровня службы в модели Виртуальное ядро включают общего назначения, критически важный для бизнеса и масштабирование. Уровень служб обычно определяет архитектуру хранилища, ограничения пространства и операций ввода-вывода, а также возможности обеспечения непрерывности бизнеса, связанные с доступностью и аварийным восстановлением.

||**Универсальные**|**Критически важный для бизнеса**|**Гипермасштабируемого**|
|---|---|---|---|
|Оптимально для|Большинства рабочих нагрузок. Предлагает бюджетные, сбалансированные и масштабируемые варианты вычислений и хранения. |Предоставляет бизнес-приложениям наивысшую устойчивость к сбоям с помощью нескольких изолированных реплик и обеспечивает наивысшую производительность ввода-вывода на реплику базы данных.|Большинство рабочих нагрузок с высоким уровнем масштабируемости и требованиями к масштабированию.  Обеспечивает более высокую устойчивость к сбоям, позволяя настраивать более одной изолированной реплики базы данных. |
|Память|Использует удаленное хранилище.<br/>**Подготовленные расчеты для отдельных баз данных и эластичных пулов**:<br/>От 5 ГБ до 4 ТБ<br/>**Бессерверные вычислений**:<br/>5 ГБ — 3 ТБ<br/>**Управляемый экземпляр**: 32 ГБ-8 ТБ |Использует локальное хранилище SSD.<br/>**Подготовленные расчеты для отдельных баз данных и эластичных пулов**:<br/>От 5 ГБ до 4 ТБ<br/>**Управляемый экземпляр**:<br/>от 32 ГБ до 4 ТБ |Гибкое автоматическое расширение хранилища при необходимости. Поддерживает до 100 ТБ хранилища. Использует локальное хранилище SSD для кэша локального буфера и локального хранилища данных. Использует удаленное хранилище Azure в качестве последнего долгосрочного хранилища данных. |
|Операции ввода-вывода и пропускная способность (приблизительная)|**Отдельные базы данных и эластичные пулы**. см. раздел ограничения ресурсов для [отдельных баз данных](../sql-database/sql-database-vcore-resource-limits-single-databases.md) и [эластичных пулов](../sql-database/sql-database-vcore-resource-limits-elastic-pools.md).<br/>**Управляемый экземпляр**: см. раздел [Обзор ограничения ресурсов управляемого экземпляра базы данных SQL Azure](../sql-database/sql-database-managed-instance-resource-limits.md#service-tier-characteristics).|См. раздел ограничения ресурсов для [отдельных баз данных](../sql-database/sql-database-vcore-resource-limits-single-databases.md) и [эластичных пулов](../sql-database/sql-database-vcore-resource-limits-elastic-pools.md).|Масштабирование — многоуровневая архитектура с кэшированием на нескольких уровнях. Действующие операции ввода-вывода и пропускная способность будут зависеть от рабочей нагрузки.|
|Доступность|1 реплика, нет реплик для чтения и масштабирования|3 реплики, 1 [реплика чтения и масштабирования](sql-database-read-scale-out.md),<br/>высокий уровень доступности избыточной зоны (HA)|1 реплика для чтения и записи, а также 0-4 [реплики чтения и масштабирования](sql-database-read-scale-out.md)|
|Резервные копии|[Геоизбыточное хранилище с доступом на чтение (RA-GRS)](../storage/common/storage-designing-ha-apps-with-ragrs.md), 7-35 дней (по умолчанию 7 дней)|[RA-GRS](../storage/common/storage-designing-ha-apps-with-ragrs.md), 7–35 дней (7 дней по умолчанию)|Резервные копии на основе моментального снимка в удаленном хранилище Azure. Эти моментальные снимки используются для быстрого восстановления. Резервные копии создаются мгновенно и не влияют на производительность вычислений ввода-вывода. Восстановление выполняется быстро и не является операцией с объемом данных (в минутах, а не в часах или днях).|
|В памяти|Не поддерживается|Поддерживается|Не поддерживается|
|||


### <a name="choosing-a-service-tier"></a>Выбор уровня служб

Сведения о выборе уровня служб для конкретной рабочей нагрузки см. в следующих статьях:

- [Когда следует выбирать уровень служб общего назначения](sql-database-service-tier-general-purpose.md#when-to-choose-this-service-tier)
- [Когда следует выбирать уровень служб критически важный для бизнеса](sql-database-service-tier-business-critical.md#when-to-choose-this-service-tier)
- [Когда следует выбирать уровень службы "линейка"](sql-database-service-tier-hyperscale.md#who-should-consider-the-hyperscale-service-tier)


## <a name="compute-tiers"></a>Уровни вычислений

Параметры уровня вычислений в модели Виртуальное ядро включают подготовленные и бессерверные уровни вычислений.


### <a name="provisioned-compute"></a>Подготовленные вычислений

Подготовленный уровень вычислений предоставляет определенный объем ресурсов вычислений, которые непрерывно подготавливаются независимо от активности рабочей нагрузки, и выставляются счета за указанный объем вычислений по фиксированной цене за час.


### <a name="serverless-compute"></a>Бессерверные вычисления

Масштабируемые ресурсы с [бессерверным уровнем вычислений](sql-database-serverless.md) автомасштабирование на основе активности рабочей нагрузки, а также счета за количество вычислений, использованных в секунду.



## <a name="hardware-generations"></a>Поколения оборудования

Варианты создания оборудования в модели Виртуальное ядро включают в себя поколения 4/5, M-Series (Предварительная версия) и серия fsv2 (Предварительная версия). Создание оборудования обычно определяет ограничения вычислений и памяти, а также другие характеристики, влияющие на производительность рабочей нагрузки.

### <a name="gen4gen5"></a>Го поколения/го поколения

- Оборудование го поколения/го поколения предоставляет сбалансированные ресурсы вычислений и памяти и подходит для большинства рабочих нагрузок баз данных, которые не имеют более высоких объемов памяти, более Виртуальное ядро или более быстрые требования к Виртуальное ядро, предоставляемые сериями серия fsv2 или серии M.

Сведения о регионах, где доступна го поколения/го поколения, см. в разделе [доступность го поколения/го поколения](#gen4gen5-1).

### <a name="fsv2-seriespreview"></a>Серии серия fsv2 (Предварительная версия)

- Серия серия fsv2 — это оптимизированный для вычислений аппаратный вариант, обеспечивающий низкую задержку процессора и высокую тактовую частоту для большинства ресурсоемких рабочих нагрузок.
- В зависимости от рабочей нагрузки серия fsv2-Series может доставлять больше производительности ЦП на виртуальное ядро, чем го поколения, а размер 72 Виртуальное ядро может обеспечить дополнительную производительность ЦП для менее затрат, чем 80 виртуальных ядер на го поколения. 
- Серия fsv2 предоставляет меньше памяти и tempdb на виртуальное ядро по сравнению с другим оборудованием, поэтому для рабочих нагрузок, зависящих от этих ограничений, может потребоваться использовать вместо него го поколения или серии M.  

Для регионов, где доступна серия серия fsv2, см. статью [доступность серии серия fsv2](#fsv2-series).


### <a name="m-seriespreview"></a>Серия M (Предварительная версия)

- Серия M — это оптимизированное для памяти оборудование для рабочих нагрузок, которым требуется больший объем памяти и более высокие ограничения вычислений, чем предоставлено го поколения.
- Серия M предоставляет 29 ГБ на виртуальное ядро и 128 виртуальных ядер, что увеличивает ограничение памяти относительно го поколения на 4 ТБ.

Чтобы включить оборудование серии M для подписки и региона, необходимо открыть запрос на поддержку. Подписка должна быть платным типом предложения, включая оплату по мере использования или Соглашение Enterprise (EA).  Если запрос на поддержку утвержден, выбор и подготовка к работе с сериями M следуют той же схеме, что и для других поколений оборудования. Для регионов, где доступна серия M, см. статью [доступность рядов m](#m-series).


### <a name="compute-and-memory-specifications"></a>Спецификации вычислений и памяти


|Поколение оборудования  |Службы вычислений  |Память  |
|:---------|:---------|:---------|
|Го поколения     |Процессоры Intel 2673 v3 (Haswell) с частотой 2,4 ГГц<br>-Подготавливать до 24 виртуальных ядер (1 Виртуальное ядро = 1 физическое ядро)  |-7 ГБ на виртуальное ядро<br>— Подготавливается до 168 ГБ|
|5-го поколения     |**Подготовленные вычисления**<br>— Процессоры Intel Skylake-2673 V4 (Broadwell) 2,3-ГГц и Intel SP-8160 () *<br>— Подготавливается до 80 виртуальных ядер (1 Виртуальное ядро = 1 Hyper-Thread)<br><br>**Бессерверные вычисления**<br>— Процессоры Intel Skylake-2673 V4 (Broadwell) 2,3-ГГц и Intel SP-8160 () *<br>— Автоматическое масштабирование до 16 виртуальных ядер (1 Виртуальное ядро = 1 Hyper-Thread)|**Подготовленные вычисления**<br>-5,1 ГБ на виртуальное ядро<br>— Подготавливается до 408 ГБ<br><br>**Бессерверные вычисления**<br>— Автоматическое масштабирование до 24 ГБ на виртуальное ядро<br>— Автоматическое масштабирование до 48 ГБ (максимум)|
|Серия Fsv2     |— Процессоры Intel Xeon Platinum 8168 (SkyLake)<br>— Обеспечивается постоянная вся частота ядра Turbo 3,4 ГГц и максимальная скорость одного ядра с частотой в 3,7 ГГц.<br>— Инициализация 72 виртуальных ядер (1 Виртуальное ядро = 1 Hyper-Thread)|-1,9 ГБ на виртуальное ядро<br>— Инициализация 136 ГБ|
|Серия M     |Процессоры Intel Xeon E7-8890 v3 с частотой 2,5 ГГц<br>— Инициализация 128 виртуальных ядер (1 Виртуальное ядро = 1 Hyper-Thread)|– 29 ГБ на виртуальное ядро<br>— Инициализация 3,7 ТБ|

\* в динамическом административном представлении [sys. dm_user_db_resource_governance](https://docs.microsoft.com/sql/relational-databases/system-dynamic-management-views/sys-dm-user-db-resource-governor-azure-sql-database) создание оборудования для баз данных го поколения с помощью процессоров Intel SP-8160 (Skylake) отображается как Gen6. Ограничения ресурсов для всех баз данных го поколения одинаковы независимо от типа процессора (Broadwell или Skylake).

Дополнительные сведения об ограничениях ресурсов см. в разделе [ограничения ресурсов для отдельных баз данных (Виртуальное ядро)](sql-database-vcore-resource-limits-single-databases.md)или [ограничения ресурсов для эластичных пулов (Виртуальное ядро)](sql-database-vcore-resource-limits-elastic-pools.md).

### <a name="selecting-a-hardware-generation"></a>Выбор создания оборудования

В портал Azure можно выбрать создание оборудования для базы данных или пула SQL во время создания или изменить создание оборудования для существующей базы данных или пула SQL.

**Выбор создания оборудования при создании базы данных или пула SQL**

Подробные сведения см. [в разделе Создание базы данных SQL](sql-database-single-database-get-started.md).

На вкладке " **основы** " выберите ссылку **настроить базу данных** в разделе " **Вычисление и хранилище** ", а затем щелкните ссылку " **изменить конфигурацию** ":

  ![настройка базы данных](media/sql-database-service-tiers-vcore/configure-sql-database.png)

Выберите нужное поколение оборудования:

  ![Выбор оборудования](media/sql-database-service-tiers-vcore/select-hardware.png)


**Изменение создания оборудования существующей базы данных или пула SQL**

Для базы данных на странице Обзор выберите ссылку **ценовая** Категория:

  ![изменение оборудования](media/sql-database-service-tiers-vcore/change-hardware.png)

Для пула на странице Обзор выберите **Настройка**.

Выполните действия по изменению конфигурации и выберите поколение оборудования, как описано в предыдущих шагах.

**Выбор создания оборудования при создании управляемого экземпляра**

Подробные сведения см. [в разделе Создание управляемого экземпляра](sql-database-managed-instance-get-started.md).

На вкладке " **основы** " выберите ссылку **настроить базу данных** в разделе " **Вычисление и хранилище** ", а затем выберите необходимое создание оборудования:

  ![Настройка управляемого экземпляра](media/sql-database-service-tiers-vcore/configure-managed-instance.png)
  
**Изменение создания оборудования существующего управляемого экземпляра**

# <a name="portal"></a>[Портал](#tab/azure-portal)

На странице управляемый экземпляр выберите ссылку **ценовая категория** , помещенную в раздел Параметры.

![изменение оборудования управляемого экземпляра](media/sql-database-service-tiers-vcore/change-managed-instance-hardware.png)

На странице **ценовая** Категория вы сможете изменить создание оборудования, как описано в предыдущих шагах.

# <a name="powershell"></a>[PowerShell](#tab/azure-powershell)

Используйте следующий сценарий PowerShell:

```powershell-interactive
Set-AzSqlInstance -Name "managedinstance1" -ResourceGroupName "ResourceGroup01" -ComputeGeneration Gen5
```

Для получения дополнительных сведений проверьте команду [Set-азсклинстанце](https://docs.microsoft.com/powershell/module/az.sql/set-azsqlinstance) .

# <a name="azure-cli"></a>[Azure CLI](#tab/azure-cli)

Используйте следующую команду CLI:

```azurecli-interactive
az sql mi update -g mygroup -n myinstance --family Gen5
```

Дополнительные сведения см. в описании команды [AZ SQL MI Update](https://docs.microsoft.com/cli/azure/sql/mi#az-sql-mi-update) .

---

### <a name="hardware-availability"></a>Доступность оборудования

#### <a name="gen4gen5-1"></a>Го поколения/го поколения

Го поколенияное оборудование находится в [стадии](https://azure.microsoft.com/updates/gen-4-hardware-on-azure-sql-database-approaching-end-of-life-in-2020/) развертывания и больше не доступно для новых развертываний. Все новые базы данных должны быть развернуты на го поколения оборудовании.

Го поколения доступен в большинстве регионов по всему миру.

#### <a name="fsv2-series"></a>Серия Fsv2

Серия серия fsv2 доступна в следующих регионах: Центральная Австралия, Центральная Австралия 2, Восточная Австралия, юго-восток Австралии, Южная Бразилия, Центральная Канада, Восточная Азия, Восточная часть США, Центральная Австралия, Центральная Индия, Западная Индия, Центральная Корея, Южная Корея, Юг Южной, Северная Европа, Северная Африка, Юго-Восток, Восточная Азия, южная часть Соединенного Королевства, западная часть Соединенного Королевства, Западная Европа, Западная часть США 2.


#### <a name="m-series"></a>Серия M

Серия M доступна в следующих регионах: Восточная часть США, Северная Европа, Западная Европа, Западная часть США 2.
Ряд M также может иметь ограниченную доступность в дополнительных регионах. Вы можете запросить регион, отличный от указанного здесь, но выполнение в другом регионе может оказаться невозможным.

Чтобы включить доступность серии M в подписке, необходимо запрашивать доступ, заменяя [новый запрос в службу поддержки](#create-a-support-request-to-enable-m-series).


##### <a name="create-a-support-request-to-enable-m-series"></a>Создайте запрос в службу поддержки, чтобы включить ряд M: 

1. На портале выберите **Справка и поддержка** .
2. Выберите **Новый запрос в службу поддержки**.

На странице **Основные сведения** укажите следующее.

1. Для поля **Тип проблемы** выберите **Ограничения службы и подписки (квоты)** .
2. Для **подписки** = выберите подписку, чтобы включить ряд M.
3. В качестве **типа квоты**выберите **база данных SQL**.
4. Нажмите кнопку **Далее** , чтобы открыть страницу **сведений** .

На странице **сведения** укажите следующие данные.

1. В разделе **сведения о проблеме** выберите ссылку **указать сведения** . 
2. Для **типа квоты базы данных SQL** выберите пункт **M-Series**.
3. В поле **регион**выберите регион, чтобы включить ряд M.
    Для регионов, где доступна серия M, см. статью [доступность рядов m](#m-series).

Утвержденные запросы на поддержку обычно выполняются в течение 5 рабочих дней.


## <a name="next-steps"></a>Дальнейшие действия

- Сведения о создании базы данных SQL см. [в разделе Создание базы данных SQL с помощью портал Azure](sql-database-single-database-get-started.md).
- Сведения о конкретных размерах вычислений и размерах хранилища, доступных для отдельных баз данных, см. в статье [ограничения ресурсов на основе виртуальное ядро базы данных SQL для отдельных баз](sql-database-vcore-resource-limits-single-databases.md)данных.
- Конкретные размеры вычислений и выбор размера хранилища, доступные для эластичных пулов, см. в разделе [SQL Database Виртуальное ядро Limits for эластичные пулы](sql-database-vcore-resource-limits-elastic-pools.md).
- Сведения о ценах см. на [странице цен на базу данных SQL Azure](https://azure.microsoft.com/pricing/details/sql-database/single/).
