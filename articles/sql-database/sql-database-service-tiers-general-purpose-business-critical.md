---
title: Уровни служб "Общее назначение" и "Критически важный для бизнеса" в Базе данных Azure SQL | Документация Майкрософт
description: В этой статье обсуждаются уровни обслуживания общего назначения и критически важных для бизнеса моделей в модели приобретения на основе виртуальное ядро.
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: sashan, moslake, carlrab
ms.date: 02/23/2019
ms.openlocfilehash: 8709d88c4d21a40ac8ebb27e5c1669d8f5fa3555
ms.sourcegitcommit: f3f4ec75b74124c2b4e827c29b49ae6b94adbbb7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2019
ms.locfileid: "70934229"
---
# <a name="azure-sql-database-service-tiers"></a>Уровни служб в Базе данных SQL Azure

База данных SQL Azure основана на архитектуре ядра СУБД SQL Server, которая настроена для облачной среды для обеспечения доступности 99,99% даже в случае сбоя инфраструктуры. В базе данных SQL Azure используются три уровня служб, каждая из которых имеет другую архитектурную модель. Ниже указаны эти уровни служб.

- [Общее назначение](sql-database-service-tier-general-purpose.md), предназначенное для большинства общих рабочих нагрузок.
- [Критически важный для бизнеса](sql-database-service-tier-business-critical.md), предназначенный для рабочих нагрузок с низкой задержкой и одной доступной для чтения реплики.
- [Масштабирование](sql-database-service-tier-hyperscale.md), предназначенное для очень больших баз данных (до 100 ТБ) с несколькими доступными для чтения репликами.

В этой статье рассматриваются различия: · анимация уровней служб, хранилища и резервного копирования для уровней обслуживания "общий" и "критически важный для бизнеса" в модели приобретения на основе виртуальное ядро.

## <a name="service-tier-comparison"></a>Сравнение уровней служб

В следующей таблице описаны основные различия между уровнями служб для последнего поколения (го поколения). Обратите внимание, что характеристики уровня служб могут отличаться в отдельная база данных и Управляемый экземпляр.

| | Тип ресурса | Общего назначения |  Гипермасштабирование | Критические задачи для бизнеса |
|:---:|:---:|:---:|:---:|:---:|
| **Оптимально для** | |  Большинства рабочих нагрузок. Предлагает бюджетные сбалансированные варианты вычислительных ресурсов и ресурсов хранилища. | Приложения данных с большими требованиями к емкости данных, возможность автоматического масштабирования хранилища до 100 ТБ и комплексное масштабирование вычислительных ресурсов. | Приложения OLTP с большим количеством транзакций и минимальной задержкой операций ввода-вывода. Предлагает самую высокую отказоустойчивость к сбоям благодаря использованию нескольких изолированных реплик.|
|  **Доступно в типе ресурса:** ||Отдельная база данных / эластичный пул / управляемый экземпляр | Отдельная база данных | Отдельная база данных / эластичный пул / управляемый экземпляр |
| **Объем вычислительных ресурсов**|Отдельная база данных / эластичный пул | От 1 до 80 виртуальных ядер | от 1 до 80 виртуальных ядер | От 1 до 80 виртуальных ядер |
| | Управляемый экземпляр | 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер | Н/Д | 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер |
| | Пулы управляемых экземпляров | 2, 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер | Н/Д | Н/Д |
| **Тип хранилища** | Все | Удаленное хранилище класса Premium (для каждого экземпляра) | Не связанное хранилище с локальным кэшем SSD (для каждого экземпляра) | Сверхбыстрое локальное хранилище SSD (для каждого экземпляра) |
| **Размер базы данных** | Отдельная база данных / эластичный пул | От 5 ГБ до 4 ТБ | До 100 ТБ | От 5 ГБ до 4 ТБ |
| | Управляемый экземпляр  | От 32 ГБ до 8 ТБ | Н/Д | От 32 ГБ до 4 ТБ |
| **Размер хранилища** | Отдельная база данных / эластичный пул | От 5 ГБ до 4 ТБ | До 100 ТБ | От 5 ГБ до 4 ТБ |
| | Управляемый экземпляр  | От 32 ГБ до 8 ТБ | Н/Д | От 32 ГБ до 4 ТБ |
| **Размер базы данных TempDB** | Отдельная база данных / эластичный пул | [32 ГБ на виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#general-purpose-service-tier-for-provisioned-compute) | [32 ГБ на виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#hyperscale-service-tier-for-provisioned-compute) | [32 ГБ на виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#business-critical-service-tier-for-provisioned-compute) |
| | Управляемый экземпляр  | [24 ГБ на виртуальное ядро](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) | Н/Д | До 4 ТБ — [ограничено размером хранилища](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) |
| **Пропускная способность ввода-вывода** | Отдельная база данных | [500 операций ввода-вывода в секунду на виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#general-purpose-service-tier-for-provisioned-compute) | Действующие операции ввода-вывода будут зависеть от рабочей нагрузки. | [4000 операций ввода-вывода в секунду на виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#business-critical-service-tier-for-provisioned-compute)|
| | Управляемый экземпляр | [100 — 250 МБ/с и 500-7500 операций ввода-вывода на файл](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) | Н/Д | [1375 операций ввода-вывода в секунду на виртуальное ядро](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) |
| **Пропускная способность записи в журнал** | Отдельная база данных | [1,875 МБ/с на виртуальное ядро (Макс. 30 МБ/с)](sql-database-vcore-resource-limits-single-databases.md#general-purpose-service-tier-for-provisioned-compute) | 100 МБ/с | [6 МБ/с на виртуальное ядро (Макс. 96 МБ/с)](sql-database-vcore-resource-limits-single-databases.md#business-critical-service-tier-for-provisioned-compute) |
| | Управляемый экземпляр | [3 МБ/с на виртуальное ядро (максимум 22 Мб/с)](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) | Н/Д | [4 МБ/с на виртуальное ядро (Макс. 48 МБ/с)](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) |
|**Доступность**|Все| 99,99 % |  [99,95% с одной вторичной репликой, 99,99% с дополнительными репликами](sql-database-service-tier-hyperscale-faq.md#what-slas-are-provided-for-a-hyperscale-database) | 99,99 % <br/> [99,995% с избыточной зоной, отдельной базой данных](https://azure.microsoft.com/blog/understanding-and-leveraging-azure-sql-database-sla/) |
|**Резервные копии**|Все|Геоизбыточное хранилище с доступом на чтение, 7–35 дней (7 дней по умолчанию)| RA-GRS, 7 дней, постоянное восстановление на момент времени (PITR) | Геоизбыточное хранилище с доступом на чтение, 7–35 дней (7 дней по умолчанию) |
|**Выполняющаяся в памяти OLTP** | | Н/Д | Н/Д | Доступно |
|**Реплики только для чтения**| | 0  | 0 - 4 | 1 (встроенный, включается в цену) |
|**Цены и выставление счетов** | Отдельная база данных | [Виртуальное ядро, зарезервированное хранилище и хранилище резервных копий](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>В операциях ввода-вывода не начислена. | [Виртуальное ядро для каждой реплики и используемого хранилища](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>В операциях ввода-вывода не начислена.<br/>Хранилище резервных копий еще не заряжено. | [Виртуальное ядро, зарезервированное хранилище и хранилище резервных копий](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>В операциях ввода-вывода не начислена. |
|| Управляемый экземпляр | [Виртуальное ядро и зарезервированное хранилище](https://azure.microsoft.com/pricing/details/sql-database/managed/) начислены. <br/>В операциях ввода-вывода не начислена.<br/>Хранилище резервных копий еще не заряжено. | Н/Д | [Виртуальное ядро и зарезервированное хранилище](https://azure.microsoft.com/pricing/details/sql-database/managed/) начислены. <br/>В операциях ввода-вывода не начислена.<br/>Хранилище резервных копий еще не заряжено. | 
|**Модели скидок**| | [Зарезервированные экземпляры](sql-database-reserved-capacity.md)<br/>[Преимущество гибридного использования Azure](sql-database-service-tiers-vcore.md#azure-hybrid-benefit) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования| [Преимущество гибридного использования Azure](sql-database-service-tiers-vcore.md#azure-hybrid-benefit) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования| [Зарезервированные экземпляры](sql-database-reserved-capacity.md)<br/>[Преимущество гибридного использования Azure](sql-database-service-tiers-vcore.md#azure-hybrid-benefit) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования|

Дополнительные сведения см. в описании подробных различий между уровнями служб в [одной базе данных (Виртуальное ядро)](sql-database-vcore-resource-limits-single-databases.md), [отдельными пулами баз данных (Виртуальное ядро)](sql-database-dtu-resource-limits-single-databases.md), [единственной базой данных (DTU)](sql-database-dtu-resource-limits-single-databases.md), [отдельными пулами баз данных (DTU)](sql-database-dtu-resource-limits-single-databases.md)и [управляемый экземпляр](sql-database-managed-instance-resource-limits.md) см.

> [!NOTE]
> Дополнительные сведения о уровне службы "виртуальное ядро" в модели приобретения на основе служб см. в статье [масштабирование уровня службы](sql-database-service-tier-hyperscale.md). Сравнение модели приобретения на основе виртуальных ядер и DTU см. в статье [Ресурсы и модели приобретения для Базы данных SQL Azure](sql-database-purchase-models.md).

## <a name="data-and-log-storage"></a>Хранилище данных и журналов

На объем хранилища, используемый для файлов данных и журналов, влияют следующие факторы.

- Выделенное хранилище используется файлами данных (MDF) и файлами журналов (LDF).
- Каждый размер вычислений отдельной базы данных поддерживает максимальный размер базы данных с максимальным размером по умолчанию 32 ГБ.
- При настройке требуемого размера отдельной базы данных (размера MDF-файла) для поддержки файлов LDF автоматически добавляется 30-процентное дополнительное хранилище.
- Размер хранилища для управляемого экземпляра базы данных SQL должен быть указан кратным 32 ГБ.
- Можно выбрать любой размер базы данных в диапазоне от 10 ГБ до поддерживаемого максимума.
  - Для хранилища на уровне служб Standard или общего назначения увеличьте или уменьшите размер с шагом в 10 ГБ.
  - Для хранилища на уровне обслуживания "Премиум" или "критически важный для бизнеса" увеличьте или уменьшите размер с шагом в 250 ГБ.
- На уровне `tempdb` служб общего назначения использует подключенный SSD, а стоимость хранения включается в цену Виртуальное ядро.
- На уровне `tempdb` службы "критически важный для бизнеса" использует подключенный SSD с файлами MDF и LDF, `tempdb` а стоимость хранилища включается в цену Виртуальное ядро.

> [!IMPORTANT]
> За общий объем хранилища, выделенный для файлов MDF и LDF, выставляются счета.

Чтобы отслеживать текущий общий размер файлов MDF и LDF, используйте [sp_spaceused](https://docs.microsoft.com/sql/relational-databases/system-stored-procedures/sp-spaceused-transact-sql). Чтобы отслеживать текущий размер отдельных файлов MDF и LDF, используйте [sys.database_files](https://docs.microsoft.com/sql/relational-databases/system-catalog-views/sys-database-files-transact-sql).

> [!IMPORTANT]
> Иногда требуется сжать базу данных, чтобы освободить неиспользуемое пространство. Дополнительные сведения см. в статье об [управлении файловым пространством в Базе данных SQL Azure](sql-database-file-space-management.md).

## <a name="backups-and-storage"></a>Резервные копии и хранилище

Хранилище для резервных копий базы данных выделяется для поддержки возможностей восстановления на момент времени (PITR) и [долгосрочного хранения (LTR)](sql-database-long-term-retention.md) базы данных SQL. Это хранилище выделяется отдельно для каждой базы данных. За эти возможности выставляются два отдельных счета.

- **PITR**: Резервные копии отдельных баз данных копируются в [хранилище геоизбыточного хранилища с доступом на чтение (RA-GRS)](../storage/common/storage-designing-ha-apps-with-ragrs.md) автоматически. Размер хранилища динамически увеличивается по мере создания новых резервных копий. Хранилище используется для еженедельных полных резервных копий, ежедневных разностных резервных копий и резервных копий журналов транзакций, которые копируются каждые 5 минут. Потребление хранилища зависит от скорости изменения базы данных и срока хранения резервных копий. Вы можете настроить отдельный период хранения для каждой базы данных длительностью от 7 до 35 дней. Минимальный объем хранилища, равный 100% (1x) размера базы данных, предоставляется без дополнительной платы. Для большинства баз данных этого объема достаточно для хранения резервных копий за 7 дней.
- **Долгосрочное хранение**. База данных SQL предлагает возможность настройки долгосрочного хранения полных резервных копий до 10 лет. Если настроить политику LTR, эти резервные копии будут храниться в хранилище RA-GRS автоматически, но вы можете управлять частотой копирования резервных копий. Для удовлетворения различных требований соответствия можно выбрать разные периоды хранения для еженедельных, ежемесячных и (или) ежегодных резервных копий. Выбранная конфигурация определяет, какой объем хранилища будет использоваться для резервных копий на LTR. Чтобы оценить стоимость хранения на LTR, можно использовать калькулятор цен на LTR. Дополнительные сведения см. в статье [долгосрочное хранение базы данных SQL](sql-database-long-term-retention.md).

## <a name="next-steps"></a>Следующие шаги

- Дополнительные сведения о конкретных размерах вычислений и размерах хранилища, доступных для отдельной базы данных на уровне службы "общий доступ" и "критически важный для бизнеса", см. в статье [ограничения ресурсов на основе виртуальное ядро базы данных SQL для отдельных баз](sql-database-vcore-resource-limits-single-databases.md)данных.
- Дополнительные сведения о конкретных размерах вычислений и размерах хранилища, доступных для эластичных пулов, см. в статье [ограничения ресурсов на основе виртуальное ядро базы данных SQL для эластичных пулов](sql-database-vcore-resource-limits-elastic-pools.md).
