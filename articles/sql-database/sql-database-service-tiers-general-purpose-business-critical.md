---
title: Уровни служб "Общее назначение" и "Критически важный для бизнеса" в Базе данных Azure SQL | Документация Майкрософт
description: В статье рассматриваются уровни "Общее назначение" и "Критически важный для бизнеса" в модели приобретения на основе виртуальных ядер.
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: sashan, moslake, carlrab
manager: craigg
ms.date: 02/23/2019
ms.openlocfilehash: 6a027e6c0afd526139484240f288205fa946d557
ms.sourcegitcommit: 61c8de2e95011c094af18fdf679d5efe5069197b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62111805"
---
# <a name="azure-sql-database-service-tiers"></a>Уровни служб в Базе данных SQL Azure

База данных SQL Azure основана на архитектуре ядра СУБД SQL Server, которая соответствует облачной среде, чтобы даже в случае сбоя инфраструктуры обеспечить доступность на уровне 99,99 %. Существует три модели архитектуры, которые используются в Базе данных SQL Azure:

- Модель [Общего назначения](sql-database-service-tier-general-purpose.md) предназначена для большинства универсальных рабочих нагрузок.
- Модель [Критически важный для бизнеса](sql-database-service-tier-business-critical.md) предназначена для рабочих нагрузок с низкой задержкой и одной репликой для чтения.
- Модель [Гипермасштабирование](sql-database-service-tier-hyperscale.md) предназначена для сверхбольших баз данных (до 100 ТБ) с несколькими репликами для чтения.

В этой статье рассматриваются вопросы хранения и резервного копирования на уровнях службы "Общее назначение" и "Критически важный для бизнеса" в модели приобретения на основе виртуальных ядер.

> [!NOTE]
> Дополнительные сведения об уровне служб "Гипермасштабирование" см. в статье [Уровень службы "Гипермасштабирование" размером до 100 ТБ (предварительная версия)](sql-database-service-tier-hyperscale.md). Сравнение модели приобретения на основе виртуальных ядер и DTU см. в статье [Ресурсы и модели приобретения для базы данных SQL Azure](sql-database-purchase-models.md).

## <a name="data-and-log-storage"></a>Хранилище данных и журналов

Рассмотрим следующее:

- В выделенном хранилище хранятся файлы данных (MDF) и файлы журналов (LDF).
- Объем вычислительных ресурсов каждой отдельной базы данных поддерживает максимальный размер базы данных (размер по умолчанию — 32 ГБ).
- Когда настраиваете необходимый размер отдельной базы данных (размер MDF), для поддержки файлов LDF автоматически добавляется 30 % дополнительного места в хранилище
- Размер хранилища в управляемом экземпляре должен быть кратным 32 ГБ.
- Выбрать можно любой размер отдельной базы данных: от 10 ГБ до максимально допустимого значения.
  - Для хранения в хранилище ценовой категории "Стандартный" или "Общего назначения" можно увеличить или уменьшить размер с шагом приращения в 10 ГБ.
  - Для хранения в хранилище ценовой категории "Премиум" "Критически важный для бизнеса" можно увеличить или уменьшить размер с шагом приращения в 250 ГБ.
- При использовании уровня службы "Общего назначения" `tempdb` использует подключенный диск SSD, а затраты на хранилище входят в стоимость виртуального ядра.
- При использовании уровня службы "Критически важный для бизнеса" подключенный диск SSD используется для `tempdb` и файлов MDF и LDF, а затраты на хранилище tempDB входят в стоимость виртуального ядра.

> [!IMPORTANT]
> С клиента взимается плата за общее хранилище, выделенное для MDF и LDF.

Чтобы просмотреть текущий общий размер MDF и LDF, используйте [sp_spaceused](https://docs.microsoft.com/sql/relational-databases/system-stored-procedures/sp-spaceused-transact-sql). Чтобы отслеживать текущий размер отдельных файлов MDF и LDF, используйте [sys.database_files](https://docs.microsoft.com/sql/relational-databases/system-catalog-views/sys-database-files-transact-sql).

> [!IMPORTANT]
> Иногда требуется сжать базу данных, чтобы освободить неиспользуемое пространство. Дополнительные сведения см. в статье об [управлении файловым пространством в Базе данных SQL Azure](sql-database-file-space-management.md).

## <a name="backups-and-storage"></a>Резервные копии и хранилище

Хранение резервных копий базы данных предназначено для поддержки возможностей базы данных SQL восстановления до точки во времени (PITR) и [долгосрочного хранения резервных копий (LTR)](sql-database-long-term-retention.md). Это хранилище выделяется отдельно для каждой базы данных. За эти возможности выставляются два отдельных счета.

- **PITR**: отдельные резервные копии базы данных автоматически копируются в [хранилище RA-GRS](../storage/common/storage-designing-ha-apps-with-ragrs.md). Размер хранилища динамически увеличивается по мере создания новых резервных копий.  Хранилище используется для полных резервных копий, созданных за неделю, разностных резервных копий, созданных за день, и резервных копий журналов транзакций, копируемых каждые 5 минут. Использование хранилища зависит от скорости изменения базы данных и периода хранения. Вы можете настроить отдельный период хранения для каждой базы данных длительностью от 7 до 35 дней. Минимальный объем хранилища, равный размеру данных, предоставляется без дополнительной оплаты. Для большинства баз данных этого объема достаточно для хранения резервных копий за 7 дней.
- **Долгосрочное хранение**. База данных SQL позволяет настроить долгосрочное хранение (до 10 лет) для полных резервных копий. Если политика долгосрочно хранения включена, эти резервные копии автоматически сохраняются в хранилище RA-GRS, однако вы можете контролировать частоту их копирования. Чтобы удовлетворять различные требования к соответствию, вы можете выбрать разные периоды хранения для резервных копий, создаваемых еженедельно, ежемесячно или ежегодно. Эта конфигурация определит, какой объем хранилища будет использоваться для резервных копий долгосрочного хранения. Вы можете использовать калькулятор цен LTR, чтобы определить стоимость долгосрочного хранения резервных копий. Дополнительные сведения см. в статье [Storing Azure SQL Database Backups for up to 10 years](sql-database-long-term-retention.md) (Хранение резервных копий баз данных SQL Azure до 10 лет).

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о конкретных объемах вычислительных ресурсов и доступных размерах хранилища для отдельной базы данных на уровнях службы "Общее назначение" и "Критически важный для бизнеса" см. в разделе [Отдельная база данных: размеры хранилища и объемы вычислительных ресурсов](sql-database-vcore-resource-limits-single-databases.md#general-purpose-service-tier).
- Дополнительные сведения о конкретных объемах вычислительных ресурсов и доступных размерах хранилища для эластичных пулов на уровнях службы "Общее назначение" и "Критически важный для бизнеса" см. в разделе [Эластичный пул: размеры хранилища и объемы вычислительных ресурсов](sql-database-vcore-resource-limits-elastic-pools.md#general-purpose-service-tier-storage-sizes-and-compute-sizes).
