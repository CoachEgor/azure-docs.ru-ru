---
title: Уровни служб "Общее назначение" и "Критически важный для бизнеса" в Базе данных Azure SQL | Документация Майкрософт
description: В этой статье обсуждаются уровни обслуживания общего назначения и критически важных для бизнеса моделей в модели приобретения на основе виртуальное ядро.
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: sashan, moslake, carlrab
ms.date: 02/23/2019
ms.openlocfilehash: decb4428321d5083d6ba7af134e223eb2fa5a912
ms.sourcegitcommit: 7c4de3e22b8e9d71c579f31cbfcea9f22d43721a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/26/2019
ms.locfileid: "68566701"
---
# <a name="azure-sql-database-service-tiers"></a>Уровни служб в Базе данных SQL Azure

База данных SQL Azure основана на архитектуре ядра СУБД SQL Server, которая настроена для облачной среды для обеспечения доступности 99,99% даже в случае сбоя инфраструктуры. В базе данных SQL Azure используются три уровня служб, каждая из которых имеет другую архитектурную модель. Ниже указаны эти уровни служб.

- [Общее назначение](sql-database-service-tier-general-purpose.md), предназначенное для большинства общих рабочих нагрузок.
- [Критически важный для бизнеса](sql-database-service-tier-business-critical.md), предназначенный для рабочих нагрузок с низкой задержкой и одной доступной для чтения реплики.
- [Масштабирование](sql-database-service-tier-hyperscale.md), предназначенное для очень больших баз данных (до 100 ТБ) с несколькими доступными для чтения репликами.

В этой статье рассматриваются вопросы хранения и резервного копирования для уровней обслуживания "общий" и "критически важный для бизнеса" в модели приобретения на основе виртуальное ядро.

> [!NOTE]
> Дополнительные сведения о уровне службы "виртуальное ядро" в модели приобретения на основе служб см. в статье [масштабирование уровня службы](sql-database-service-tier-hyperscale.md). Сравнение модели приобретения на основе виртуальных ядер и DTU см. в статье [Ресурсы и модели приобретения для Базы данных SQL Azure](sql-database-purchase-models.md).

## <a name="data-and-log-storage"></a>Хранилище данных и журналов

На объем хранилища, используемый для файлов данных и журналов, влияют следующие факторы.

- Выделенное хранилище используется файлами данных (MDF) и файлами журналов (LDF).
- Каждый размер вычислений отдельной базы данных поддерживает максимальный размер базы данных с максимальным размером по умолчанию 32 ГБ.
- При настройке требуемого размера отдельной базы данных (размера MDF-файла) для поддержки файлов LDF автоматически добавляется 30-процентное дополнительное хранилище.
- Размер хранилища для управляемого экземпляра базы данных SQL должен быть указан кратным 32 ГБ.
- Можно выбрать любой размер базы данных в диапазоне от 10 ГБ до поддерживаемого максимума.
  - Для хранилища на уровне служб Standard или общего назначения увеличьте или уменьшите размер с шагом в 10 ГБ.
  - Для хранилища на уровне обслуживания "Премиум" или "критически важный для бизнеса" увеличьте или уменьшите размер с шагом в 250 ГБ.
- На уровне `tempdb` служб общего назначения использует подключенный SSD, а стоимость хранения включается в цену Виртуальное ядро.
- На уровне `tempdb` службы "критически важный для бизнеса" использует подключенный SSD с файлами MDF и LDF, `tempdb` а стоимость хранилища включается в цену Виртуальное ядро.

> [!IMPORTANT]
> За общий объем хранилища, выделенный для файлов MDF и LDF, выставляются счета.

Чтобы отслеживать текущий общий размер файлов MDF и LDF, используйте [sp_spaceused](https://docs.microsoft.com/sql/relational-databases/system-stored-procedures/sp-spaceused-transact-sql). Чтобы отслеживать текущий размер отдельных файлов MDF и LDF, используйте [sys.database_files](https://docs.microsoft.com/sql/relational-databases/system-catalog-views/sys-database-files-transact-sql).

> [!IMPORTANT]
> Иногда требуется сжать базу данных, чтобы освободить неиспользуемое пространство. Дополнительные сведения см. в статье об [управлении файловым пространством в Базе данных SQL Azure](sql-database-file-space-management.md).

## <a name="backups-and-storage"></a>Резервные копии и хранилище

Хранилище для резервных копий базы данных выделяется для поддержки возможностей восстановления на момент времени (PITR) и [долгосрочного хранения (LTR)](sql-database-long-term-retention.md) базы данных SQL. Это хранилище выделяется отдельно для каждой базы данных. За эти возможности выставляются два отдельных счета.

- **PITR**: Резервные копии отдельных баз данных копируются в [хранилище геоизбыточного хранилища с доступом на чтение (RA-GRS)](../storage/common/storage-designing-ha-apps-with-ragrs.md) автоматически. Размер хранилища динамически увеличивается по мере создания новых резервных копий. Хранилище используется для еженедельных полных резервных копий, ежедневных разностных резервных копий и резервных копий журналов транзакций, которые копируются каждые 5 минут. Потребление хранилища зависит от скорости изменения базы данных и срока хранения резервных копий. Вы можете настроить отдельный период хранения для каждой базы данных длительностью от 7 до 35 дней. Минимальный объем хранилища, равный 100% (1x) размера базы данных, предоставляется без дополнительной платы. Для большинства баз данных этого объема достаточно для хранения резервных копий за 7 дней.
- **Долгосрочное хранение**. База данных SQL предлагает возможность настройки долгосрочного хранения полных резервных копий до 10 лет. Если настроить политику LTR, эти резервные копии будут храниться в хранилище RA-GRS автоматически, но вы можете управлять частотой копирования резервных копий. Для удовлетворения различных требований соответствия можно выбрать разные периоды хранения для еженедельных, ежемесячных и (или) ежегодных резервных копий. Выбранная конфигурация определяет, какой объем хранилища будет использоваться для резервных копий на LTR. Чтобы оценить стоимость хранения на LTR, можно использовать калькулятор цен на LTR. Дополнительные сведения см. в статье [долгосрочное хранение базы данных SQL](sql-database-long-term-retention.md).

## <a name="next-steps"></a>Следующие шаги

- Дополнительные сведения о конкретных размерах вычислений и размерах хранилища, доступных для отдельной базы данных на уровне службы "общий доступ" и "критически важный для бизнеса", см. в статье [ограничения ресурсов на основе виртуальное ядро базы данных SQL для отдельных баз](sql-database-vcore-resource-limits-single-databases.md)данных.
- Дополнительные сведения о конкретных размерах вычислений и размерах хранилища, доступных для эластичных пулов, см. в статье [ограничения ресурсов на основе виртуальное ядро базы данных SQL для эластичных пулов](sql-database-vcore-resource-limits-elastic-pools.md).
