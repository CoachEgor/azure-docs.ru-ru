---
title: Уровни служб "Общее назначение" и "Критически важный для бизнеса" в Базе данных Azure SQL | Документация Майкрософт
description: В этой статье обсуждаются уровни обслуживания общего назначения и критически важных для бизнеса моделей в модели приобретения на основе виртуальное ядро.
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: sashan, moslake, carlrab
ms.date: 10/01/2019
ms.openlocfilehash: a971b428da72028bcabd874e848d53bc2392a0f6
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73496114"
---
# <a name="azure-sql-database-service-tiers"></a>Уровни служб в Базе данных SQL Azure

База данных SQL Azure основана на архитектуре ядра СУБД SQL Server, которая настроена для облачной среды для обеспечения доступности 99,99% даже в случае сбоя инфраструктуры. В базе данных SQL Azure используются три уровня служб, каждая из которых имеет другую архитектурную модель. Ниже указаны эти уровни служб.

- [Общее назначение](sql-database-service-tier-general-purpose.md), предназначенное для бюджетных рабочих нагрузок.
- [Масштабирование](sql-database-service-tier-hyperscale.md), предназначенное для большинства рабочих нагрузок, обеспечивает высокую масштабируемость хранения, масштабируемость чтения и быстрое восстановление базы данных.
- [Критически важный для бизнеса](sql-database-service-tier-business-critical.md), предназначенный для рабочих нагрузок с низкой задержкой и высокой устойчивостью к сбоям и быстрой отработке отказа.

В этой статье рассматриваются различия: · анимация уровней служб, хранилища и резервного копирования для уровней обслуживания "общий" и "критически важный для бизнеса" в модели приобретения на основе виртуальное ядро.

## <a name="service-tier-comparison"></a>Сравнение уровней служб

В следующей таблице описаны основные различия между уровнями служб для последнего поколения (го поколения). Обратите внимание, что характеристики уровня служб могут отличаться в отдельная база данных и Управляемый экземпляр.

| | Тип ресурса | Общего назначения |  Уровень "Гипермасштабирование" | Критически важный для бизнеса |
|:---:|:---:|:---:|:---:|:---:|
| **Оптимально для** | |  Предлагает бюджетные сбалансированные варианты вычислительных ресурсов и ресурсов хранилища. | Большинства рабочих нагрузок. Автомасштабирование размера хранилища до 100 ТБ, жидкие вертикальное и горизонтальное масштабирование вычислений, быстрое восстановление базы данных. | Приложения OLTP с высокой частотой транзакций и низкой задержкой операций ввода-вывода. Обеспечивает наивысшую устойчивость к сбоям и быструю отработку отказа, используя несколько синхронно обновленных реплик.|
|  **Доступно в типе ресурса:** ||Отдельная база данных / эластичный пул / управляемый экземпляр | Отдельная база данных | Отдельная база данных / эластичный пул / управляемый экземпляр |
| **Объем вычислительных ресурсов**|Отдельная база данных / эластичный пул | От 1 до 80 виртуальных ядер | от 1 до 80 виртуальных ядер | От 1 до 80 виртуальных ядер |
| | Управляемый экземпляр | 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер | Недоступно | 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер |
| | Пулы управляемых экземпляров | 2, 4, 8, 16, 24, 32, 40, 64, 80 виртуальных ядер | Недоступно | Недоступно |
| **Тип хранилища** | Все | Удаленное хранилище класса Premium (для каждого экземпляра) | Не связанное хранилище с локальным кэшем SSD (для каждого экземпляра) | Сверхбыстрое локальное хранилище SSD (для каждого экземпляра) |
| **Размер базы данных** | Отдельная база данных / эластичный пул | От 5 ГБ до 4 ТБ | До 100 ТБ | От 5 ГБ до 4 ТБ |
| | Управляемый экземпляр  | От 32 ГБ до 8 ТБ | Недоступно | От 32 ГБ до 4 ТБ |
| **Размер хранилища** | Отдельная база данных / эластичный пул | От 5 ГБ до 4 ТБ | До 100 ТБ | От 5 ГБ до 4 ТБ |
| | Управляемый экземпляр  | От 32 ГБ до 8 ТБ | Недоступно | От 32 ГБ до 4 ТБ |
| **Размер базы данных TempDB** | Отдельная база данных / эластичный пул | [32 ГБ на виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#general-purpose---provisioned-compute---gen4) | [32 ГБ на виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#hyperscale---provisioned-compute---gen5) | [32 ГБ на виртуальное ядро](sql-database-vcore-resource-limits-single-databases.md#business-critical---provisioned-compute---gen4) |
| | Управляемый экземпляр  | [24 ГБ на виртуальное ядро](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) | Недоступно | До 4 ТБ — [ограничено размером хранилища](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) |
| **Пропускная способность записи в журнал** | Отдельная база данных | [1,875 МБ/с на виртуальное ядро (Макс. 30 МБ/с)](sql-database-vcore-resource-limits-single-databases.md#general-purpose---provisioned-compute---gen4) | 100 МБ/с | [6 МБ/с на виртуальное ядро (Макс. 96 МБ/с)](sql-database-vcore-resource-limits-single-databases.md#business-critical---provisioned-compute---gen4) |
| | Управляемый экземпляр | [3 МБ/с на виртуальное ядро (максимум 22 Мб/с)](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) | Недоступно | [4 МБ/с на виртуальное ядро (Макс. 48 МБ/с)](sql-database-managed-instance-resource-limits.md#service-tier-characteristics) |
|**Доступность**|Все| 99,99 % |  [99,95% с одной вторичной репликой, 99,99% с дополнительными репликами](sql-database-service-tier-hyperscale-faq.md#what-slas-are-provided-for-a-hyperscale-database) | 99,99 % <br/> [99,995% с избыточной зоной, отдельной базой данных](https://azure.microsoft.com/blog/understanding-and-leveraging-azure-sql-database-sla/) |
|**Резервные копии**|Все|Геоизбыточное хранилище с доступом на чтение, 7–35 дней (7 дней по умолчанию)| RA-GRS, 7 дней, постоянное восстановление на момент времени (PITR) | Геоизбыточное хранилище с доступом на чтение, 7–35 дней (7 дней по умолчанию) |
|**Выполняющаяся в памяти OLTP** | | Недоступно | Недоступно | Доступна |
|**Реплики только для чтения**| | 0  | 0 - 4 | 1 (встроенный, включается в цену) |
|**Цены и выставление счетов** | Отдельная база данных | [Виртуальное ядро, зарезервированное хранилище и хранилище резервных копий](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>В операциях ввода-вывода не начислена. | [Виртуальное ядро для каждой реплики и используемого хранилища](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>Число операций ввода-вывода еще не оплачено. | [Виртуальное ядро, зарезервированное хранилище и хранилище резервных копий](https://azure.microsoft.com/pricing/details/sql-database/single/) начисляются. <br/>В операциях ввода-вывода не начислена. |
|| Управляемый экземпляр | [Виртуальное ядро и зарезервированное хранилище](https://azure.microsoft.com/pricing/details/sql-database/managed/) начислены. <br/>В операциях ввода-вывода не начислена.<br/>Хранилище резервных копий еще не заряжено. | Недоступно | [Виртуальное ядро и зарезервированное хранилище](https://azure.microsoft.com/pricing/details/sql-database/managed/) начислены. <br/>В операциях ввода-вывода не начислена.<br/>Хранилище резервных копий еще не заряжено. | 
|**Модели скидок**| | [Зарезервированные экземпляры](sql-database-reserved-capacity.md)<br/>[Преимущество гибридного использования Azure](sql-database-azure-hybrid-benefit.md) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования| [Преимущество гибридного использования Azure](sql-database-azure-hybrid-benefit.md) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования| [Зарезервированные экземпляры](sql-database-reserved-capacity.md)<br/>[Преимущество гибридного использования Azure](sql-database-azure-hybrid-benefit.md) (недоступно в подписках на разработку и тестирование)<br/>Подписки на [разработку и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) [с оплатой по мере использования и по мере](https://azure.microsoft.com/offers/ms-azr-0023p/) использования|

Дополнительные сведения см. в описании подробных различий между уровнями служб в [одной базе данных (Виртуальное ядро)](sql-database-vcore-resource-limits-single-databases.md), [отдельными пулами баз данных (Виртуальное ядро)](sql-database-dtu-resource-limits-single-databases.md), [единственной базой данных (DTU)](sql-database-dtu-resource-limits-single-databases.md), [отдельными пулами баз данных (DTU)](sql-database-dtu-resource-limits-single-databases.md)и [управляемый экземпляр](sql-database-managed-instance-resource-limits.md) см.

> [!NOTE]
> Дополнительные сведения о уровне службы "виртуальное ядро" в модели приобретения на основе служб см. в статье [масштабирование уровня службы](sql-database-service-tier-hyperscale.md). Сравнение модели приобретения на основе виртуальных ядер и DTU см. в статье [Ресурсы и модели приобретения для Базы данных SQL Azure](sql-database-purchase-models.md).

## <a name="data-and-log-storage"></a>Хранилище данных и журналов

На объем хранилища, используемый для файлов данных и журналов, влияют следующие факторы, которые применяются к общего назначения и критически важный для бизнеса. Дополнительные сведения о хранении данных и журналов в процессе масштабирования см. в статье о [уровне служб](sql-database-service-tier-hyperscale.md)в процессе масштабирования.

- Выделенное хранилище используется файлами данных (MDF) и файлами журналов (LDF).
- Каждый размер вычислений отдельной базы данных поддерживает максимальный размер базы данных с максимальным размером по умолчанию 32 ГБ.
- При настройке требуемого размера отдельной базы данных (размера MDF-файла) для поддержки файлов LDF автоматически добавляется 30-процентное дополнительное хранилище.
- Размер хранилища для управляемого экземпляра базы данных SQL должен быть указан кратным 32 ГБ.
- Можно выбрать любой размер базы данных в диапазоне от 10 ГБ до поддерживаемого максимума.
  - Для хранилища на уровне служб Standard или общего назначения увеличьте или уменьшите размер с шагом в 10 ГБ.
  - Для хранилища на уровне обслуживания "Премиум" или "критически важный для бизнеса" увеличьте или уменьшите размер с шагом в 250 ГБ.
- На уровне служб общего назначения `tempdb` использует подключенный SSD, а стоимость хранения включается в цену Виртуальное ядро.
- На уровне службы "критически важный для бизнеса" `tempdb` совместно используют подключенный SSD с файлами MDF и LDF, а стоимость хранилища `tempdb` включается в цену Виртуальное ядро.

> [!IMPORTANT]
> За общий объем хранилища, выделенный для файлов MDF и LDF, выставляются счета.

Чтобы отслеживать текущий общий размер файлов MDF и LDF, используйте [sp_spaceused](https://docs.microsoft.com/sql/relational-databases/system-stored-procedures/sp-spaceused-transact-sql). Чтобы отслеживать текущий размер отдельных файлов MDF и LDF, используйте [sys.database_files](https://docs.microsoft.com/sql/relational-databases/system-catalog-views/sys-database-files-transact-sql).

> [!IMPORTANT]
> Иногда требуется сжать базу данных, чтобы освободить неиспользуемое пространство. Дополнительные сведения см. в статье об [управлении файловым пространством в Базе данных SQL Azure](sql-database-file-space-management.md).

## <a name="backups-and-storage"></a>Резервные копии и хранилище

Хранилище для резервных копий базы данных выделяется для поддержки возможностей восстановления на момент времени (PITR) и [долгосрочного хранения (LTR)](sql-database-long-term-retention.md) базы данных SQL. Это хранилище выделяется отдельно для каждой базы данных. За эти возможности выставляются два отдельных счета.

- **PITR**. резервные копии отдельных баз данных копируются в [хранилище геоизбыточного хранилища с доступом на чтение (RA-GRS)](../storage/common/storage-designing-ha-apps-with-ragrs.md) автоматически. Размер хранилища динамически увеличивается по мере создания новых резервных копий. Хранилище используется для еженедельных полных резервных копий, ежедневных разностных резервных копий и резервных копий журналов транзакций, которые копируются каждые 5 минут. Потребление хранилища зависит от скорости изменения базы данных и срока хранения резервных копий. Вы можете настроить отдельный период хранения для каждой базы данных длительностью от 7 до 35 дней. Минимальный объем хранилища, равный 100% (1x) размера базы данных, предоставляется без дополнительной платы. Для большинства баз данных этого объема достаточно для хранения резервных копий за 7 дней.
- **LTR**: база данных SQL предлагает возможность настройки долгосрочного хранения полных резервных копий до 10 лет. Если настроить политику LTR, эти резервные копии будут храниться в хранилище RA-GRS автоматически, но вы можете управлять частотой копирования резервных копий. Для удовлетворения различных требований соответствия можно выбрать разные периоды хранения для еженедельных, ежемесячных и (или) ежегодных резервных копий. Выбранная конфигурация определяет, какой объем хранилища будет использоваться для резервных копий на LTR. Чтобы оценить стоимость хранения на LTR, можно использовать калькулятор цен на LTR. Дополнительные сведения см. в статье [долгосрочное хранение базы данных SQL](sql-database-long-term-retention.md).

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о конкретных размерах вычислений и размерах хранилища, доступных для отдельной базы данных на уровне службы "общий доступ" и "критически важный для бизнеса", см. в статье [ограничения ресурсов на основе виртуальное ядро базы данных SQL для отдельных баз](sql-database-vcore-resource-limits-single-databases.md)данных.
- Дополнительные сведения о конкретных размерах вычислений и размерах хранилища, доступных для эластичных пулов, см. в статье [ограничения ресурсов на основе виртуальное ядро базы данных SQL для эластичных пулов](sql-database-vcore-resource-limits-elastic-pools.md).
