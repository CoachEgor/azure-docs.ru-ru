---
title: Переход с DTU на виртуальное ядро
description: Переход от модели DTU к модели vCore. Миграция на vCore аналогична модернизации или понижению между стандартными и премиальными уровнями.
services: sql-database
ms.service: sql-database
ms.subservice: service
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: sashan, moslake, carlrab
ms.date: 03/09/2020
ms.openlocfilehash: 693065046f92e0e9eade14c43e9942772440937d
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "78945405"
---
# <a name="migrate-from-the-dtu-based-model-to-the-vcore-based-model"></a>Переход от модели на основе DTU к модели на основе vCore

## <a name="migrate-a-database"></a>Перенос базы данных

Миграция базы данных от модели закупок на основе DTU к модели закупок на основе vCore аналогична обновлению или понижению уровня между стандартными и премиальными уровнями обслуживания в модели закупок на основе DTU.

## <a name="migrate-databases-that-use-geo-replication"></a>Мигрировать базы данных, которые используют георепликацию

Переход от модели на основе DTU к модели закупок на основе vCore аналогична обновлению или понижению георепликации между базами данных в стандартных и премиальных уровнях обслуживания. Во время миграции не нужно прекращать георепликацию, но вы должны следовать этим правилам последовательности:

- При повышении сначала повысьте уровень производительности базы данных-получателя, а затем — уровень базы данных-источника.
- При понижении следует действовать в обратном порядке: сначала нужно понизить уровень производительности базы данных-источника, а после этого — базы данных-получателя.

При использовании георепликации между двумя эластичными пулами мы рекомендуем назначить один пул основным, а другой — вторичным. В этом случае при миграции эластичных пулов следует использовать одно и то же руководство по секвенированию. Однако, если у вас есть эластичные пулы, которые содержат как первичные, так и вторичные базы данных, относитесь к пулу с более высоким использованием в качестве основного и следуйте правилам секвенирования соответственно.  

В следующей таблице приводятся рекомендации по конкретным сценариям миграции:

|Текущий уровень служб|Целевой уровень служб|Тип перемещения|Действия пользователя|
|---|---|---|---|
|Standard|Общего назначения|Горизонтальный|Можно выполнять миграцию в любом порядке, но необходимо обеспечить соответствующий размер виртуального ядра*|
|Premium|Критически важный для бизнеса|Горизонтальный|Можно выполнять миграцию в любом порядке, но необходимо обеспечить соответствующий размер виртуального ядра*|
|Standard|Критически важный для бизнеса|Обновление|Сначала необходимо перенести базу данных-получатель|
|Критически важный для бизнеса|Standard|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Premium|Общего назначения|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Общего назначения|Premium|Обновление|Сначала необходимо перенести базу данных-получатель|
|Критически важный для бизнеса|Общего назначения|Понижение уровня|Сначала необходимо перенести базу данных-источник|
|Общего назначения|Критически важный для бизнеса|Обновление|Сначала необходимо перенести базу данных-получатель|
||||

\*Как правило, каждые 100 DTUs в стандартном уровне требуют по крайней мере 1 vCore, и каждые 125 DTUs в премиум-уровне требуют по крайней мере 1 vCore. Дополнительные сведения см. в разделе [Модель покупки на основе числа виртуальных ядер](https://docs.microsoft.com/azure/sql-database/sql-database-purchase-models#vcore-based-purchasing-model).

## <a name="migrate-failover-groups"></a>Мигрировать группы неудач

Перемещение групп отработки отказа с несколькими базами данных требует отдельного перемещения базы данных-источника и базы данных-получателя. Во время этого процесса применяются те же рекомендации и правила последовательности. После того, как базы данных будут преобразованы в модель покупки на основе vCore, группа неудач осваивания останется в силе с теми же параметрами политики.

### <a name="create-a-geo-replication-secondary-database"></a>Создание вторичной базы данных георепликации

Создать вторичную базу данных георепликации (геовторичную) можно только с помощью того же уровня обслуживания, что и для основной базы данных. Для баз данных с высокой скоростью генерации журналов мы рекомендуем создать геовторичный с тем же размером вычислений, что и первичный.

Если вы создаете геовторичный в эластичной пуле `maxVCore` для одной основной базы данных, убедитесь, что настройка пула соответствует размеру вычислений основной базы данных. Если вы создаете геовторичный для первичного в другом эластичном `maxVCore` пуле, мы рекомендуем пулы иметь те же настройки.

## <a name="use-database-copy-to-convert-a-dtu-based-database-to-a-vcore-based-database"></a>Используйте копию базы данных для преобразования базы данных на основе DTU в базу данных на основе vCore

Вы можете скопировать любую базу данных с объемом вычислительных ресурсов на основе DTU в базу данных с объемом вычислительных ресурсов на основе виртуальных ядер без ограничений или соблюдения специальной последовательности, если целевой объем вычислительных ресурсов поддерживает максимальный размер базы данных-источника. Копия базы данных создает моментальный снимок данных на момент начала операции копирования и не синхронизирует данные между источником и целью.

## <a name="next-steps"></a>Дальнейшие действия

- Для конкретных размеров вычислений и вариантов размера [SQL Database vCore-based resource limits for single databases](sql-database-vcore-resource-limits-single-databases.md)хранилища, доступных для отдельных баз данных, см.
- Для конкретных размеров вычислений и вариантов размера [SQL Database vCore-based resource limits for elastic pools](sql-database-vcore-resource-limits-elastic-pools.md)хранилища, доступных для эластичных пулов, см.
