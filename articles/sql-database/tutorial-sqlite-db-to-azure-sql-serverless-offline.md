---
title: Учебник. Как перенести базу данных SQLite в сервер базы данных SQL Azure
description: Узнайте, как выполнить автономную миграцию из SQLite в сервер базы данных SQL Azure, используя фабрику данных Azure.
services: sql-database
author: joplum
ms.author: joplum
manager: prda
ms.service: sql-database
ms.workload: data-services
ms.topic: article
ms.date: 01/08/2020
ms.openlocfilehash: 2aed3a66f70864b3445418a51b0e79280e6884bd
ms.sourcegitcommit: 1895459d1c8a592f03326fcb037007b86e2fd22f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/01/2020
ms.locfileid: "82629207"
---
# <a name="how-to-migrate-your-sqlite-database-to-azure-sql-database-serverless"></a>Перенос базы данных SQLite в бессерверную базу данных SQL Azure
Для многих пользователей SQLite предоставляет свой первый опыт работы с базами данных и программированием SQL. Включение в многие операционные системы и популярные приложения делает SQLite один из самых широко развернутых и используемых в мире ядер баз данных. И так как это, скорее всего, первый компонент ядра СУБД, который многие люди используют, он часто может оказаться центральным элементом для проектов или приложений. В таких случаях, когда проект или приложение расширяют первоначальную реализацию SQLite, разработчикам может потребоваться перенести свои данные в надежное централизованное хранилище данных.

Сервер базы данных SQL Azure — это уровень вычислений для отдельных баз данных, который автоматически масштабирует вычисление на основе спроса на рабочую нагрузку и выставляет счета за количество вычислений, используемых в секунду. Уровень вычислений "бессерверный" также автоматически приостанавливает базы данных в течение неактивных периодов, когда оплачивается только хранилище и автоматически возобновляет базы данных при возврате действия.

После выполнения приведенных ниже действий база данных будет перенесена в бессерверную базу данных SQL Azure, что позволит сделать базу данных доступной для других пользователей или приложений в облаке и платить только за то, что вы используете, с минимальными изменениями кода приложения.

## <a name="prerequisites"></a>Предварительные условия
- Подписка Azure;
- База данных SQLite2 или SQLite3, которую вы хотите перенести
- Среда Windows
  - Если у вас нет локальной среды Windows, для миграции можно использовать виртуальную машину Windows в Azure. Переместите и сделайте файл базы данных SQLite доступным на виртуальной машине, используя службы файлов и Обозреватель службы хранилища Azure.

## <a name="steps"></a>Шаги

1. Подготавливает новую базу данных SQL Azure на уровне бессерверных вычислений.

    ![снимок экрана портал Azure, в котором показан пример подготовки для бессерверной базы данных SQL Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/provision-serverless.png)

2. Убедитесь, что файл базы данных SQLite доступен в среде Windows. Установите драйвер SQLite ODBC, если у вас его еще нет (например, http://www.ch-werner.de/sqliteodbc/)имеется много доступных в открытом источнике).

3. Создайте системное имя DSN для базы данных. Убедитесь, что вы используете приложение администратора источника данных, которое соответствует архитектуре системы (32-разрядная и 64-бит). Вы можете узнать, какая версия выполняется в параметрах системы.

    - Откройте Администратор источников данных ODBC в своей среде.
    - Перейдите на вкладку Системное DSN и нажмите кнопку "Добавить".
    - Выберите установленный соединитель ODBC SQLite и присвойте ему понятное имя, например склитемигратионсаурце.
    - Задание имени базы данных для файла БД
    - Сохраните и закройте.

4. Скачайте и установите локальную среду выполнения интеграции. Проще всего это сделать с помощью экспресс-установки, как описано в документации. Если вы выберете установку вручную, необходимо предоставить приложению ключ проверки подлинности, который можно найти в экземпляре фабрики данных, выполнив следующие действия.

    - Запуск ADF (создание и мониторинг из службы в портал Azure)
    - Щелкните вкладку "Автор" (синий карандаш) слева.
    - Щелкните подключения (внизу слева), а затем среды выполнения интеграции.
    - Добавьте новый собственный Integration Runtime, присвойте ему имя, выберите *вариант 2*.

5. Создайте новую связанную службу для исходной базы данных SQLite в фабрике данных.

    ![снимок экрана с пустой колонкой связанных служб в фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/linked-services-create.png)

6. В поле подключения в разделе связанная служба нажмите кнопку Создать.

7. Найдите и выберите соединитель ODBC.


    ![снимок экрана: Эмблема ODBC Connector в колонке "связанные службы" в фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/linked-services-odbc.png)

8. Присвойте связанной службе понятное имя, например "sqlite_odbc". Выберите среду выполнения интеграции из раскрывающегося списка "подключение через среду выполнения интеграции". Введите ниже в строку подключения, заменив начальную переменную каталога на путь к файлу базы данных, а DSN — на имя системного DSN. 

    ```
    Connection string: Provider=MSDASQL.1;Persist Security Info=False;Mode=ReadWrite;Initial Catalog=C:\sqlitemigrationsource.db;DSN=sqlitemigrationsource
    ```

9. Установка анонимного типа проверки подлинности

10. Проверка подключения

    ![снимок экрана, показывающий успешное подключение в фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/linked-services-test-successful.png)

11. Создайте другую связанную службу для целевого сервера SQL. Выберите базу данных с помощью мастера связанных служб и укажите учетные данные для проверки подлинности SQL.

    ![снимок экрана, показывающий базу данных SQL Azure, выбранную в фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/linked-services-create-target.png)

12. Извлеките CREATE TABLE инструкции из базы данных SQLite. Это можно сделать, выполнив приведенный ниже скрипт Python в файле базы данных.

    ```
    #!/usr/bin/python
    import sqlite3
    conn = sqlite3.connect("sqlitemigrationsource.db")
    c = conn.cursor()

    print("Starting extract job..")
    with open('CreateTables.sql', 'w') as f:
        for tabledetails in c.execute("SELECT * FROM sqlite_master WHERE type='table'"):
            print("Extracting CREATE statement for " + (str(tabledetails[1])))
            print(tabledetails)
            f.write(str(tabledetails[4].replace('\n','') + ';\n'))
    c.close()
    ```

13. Создайте целевые таблицы в бессерверной целевой среде SQL, скопировав инструкции CREATE TABLE из файла CreateTables. SQL и выполнив инструкции SQL в редакторе запросов в портал Azure.

14. Вернитесь на домашнюю страницу фабрики данных и нажмите кнопку "Копирование данных", чтобы запустить мастер создания задания.

    ![снимок экрана с эмблемой мастера Копирование данных в фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/copy-data.png)

15. Выберите все таблицы из исходной базы данных SQLite с помощью флажков и сопоставьте их с целевыми таблицами в Azure SQL. После выполнения задания вы успешно перенесли данные из SQLite в Azure SQL.

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы приступить к работе, см. раздел [Краткое руководство. Создание отдельной базы данных в базе данных SQL Azure с помощью портал Azure](sql-database-single-database-get-started.md).
- См. подробнее об [ограничениях ресурсов уровня бессерверных вычислений](sql-database-vCore-resource-limits-single-databases.md#general-purpose---serverless-compute---gen5).
