---
title: "Учебник: Как перенести базу данных S'Lite в базу данных Azure S'L Serverless"
description: Научитесь выполнять офлайн-миграцию из S'Lite в базу данных Azure S'L, не серверную с помощью Azure Data Factory.
services: sql-database
author: joplum
ms.author: joplum
manager: prda
ms.service: sql-database
ms.workload: data-services
ms.topic: article
ms.date: 01/08/2020
ms.openlocfilehash: c718daa4bc99bffd6fcfeb084299bed6682fe884
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75780513"
---
# <a name="how-to-migrate-your-sqlite-database-to-azure-sql-database-serverless"></a>Как перенести базу данных S'Lite в базу данных Azure S'L Serverless
Для многих людей, S'Lite предоставляет свой первый опыт баз данных и программирования S'L. Это включение во многие операционные системы и популярные приложения делает S'Lite одним из наиболее широко развернутых и используемых систем баз данных в мире. И поскольку это, вероятно, первый движок базы данных, который используют многие люди, он часто может оказаться центральной частью проектов или приложений. В тех случаях, когда проект или приложение перерастает начальную реализацию S'Lite, разработчикам может потребоваться перенести свои данные в надежный, централизованный хранилище данных.

База данных Azure s'L без сервера — это вычислительный уровень для отдельных баз данных, который автоматически масштабирует вычисления в зависимости от спроса на рабочую нагрузку и счета за количество вычислений, используемых в секунду. Уровень без сервера вычисляет также автоматически приостанавливает базы данных в неактивные периоды, когда выставляется только счет для хранения, и автоматически возобновляет базы данных при возврате активности.

После того, как вы последуете ниже приведенным ниже шагам, ваша база данных будет перенесена в базу данных Azure S'L Serverless, что позволит сделать базу данных доступной для других пользователей или приложений в облаке и платить только за то, что вы используете, с минимальными изменениями кода приложения.

## <a name="prerequisites"></a>Предварительные требования
- Подписка на Azure
- База данных S'Lite2 или S'Lite3, которую вы хотите перенести
- Среда Windows
  - Если у вас нет локальной среды Windows, вы можете использовать Windows VM в Azure для миграции. Перемещение и сделать файл базы данных S'Lite доступным на VM с помощью Azure Files и Storage Explorer.

## <a name="steps"></a>Шаги

1. Предоставление новой базы данных Azure S'L на уровне бессерверных вычислений.

    ![скриншот портала Azure, показывающий пример подготовки для базы данных azure sql без сервера](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/provision-serverless.png)

2. Убедитесь, что в вашей среде Windows имеется файл базы данных S'Lite. Установите драйвер ODBC, если у вас его еще нет (например, http://www.ch-werner.de/sqliteodbc/)в Открытом Исходном коде много.

3. Создайте систему DSN для базы данных. Убедитесь, что вы используете приложение «Администратор источника данных», которое соответствует архитектуре системы (32-битный против 64-битный). Вы можете найти, какая версия вы работаете в настройках системы.

    - Откройте администратора источника данных ODBC в вашей среде.
    - Нажмите на вкладку DSN системы и нажмите кнопку "Добавить"
    - Выберите установленный вами разъем ODBC, и придайте соединению значимое имя, например, sqlitemigrationsource
    - Установите имя базы данных в файл .db
    - Сохраните и закройте.

4. Скачать и установить самохлажен интеграции время выполнения. Самый простой способ сделать это вариант установки Express, как описано в документации. Если вы выберете ручную установку, вам необходимо предоставить приложению ключ проверки подлинности, который может быть размещен в экземпляре Data Factory:

    - Запуск ADF (автор и монитор от службы на портале Azure)
    - Нажмите на вкладку "Автор" (Синий карандаш) слева
    - Нажмите Соединения (внизу слева), затем время выполнения интеграции
    - Добавить новый Self-Хостинг интеграции Runtime, дать ему имя, выберите *Вариант 2*.

5. Создайте новую связанную службу для исходной базы данных S'Lite на фабрике данных.

    ![скриншот, показывающий пустое лезвие связанных служб на фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/linked-services-create.png)

6. В соединениях, под Linked Service, нажмите Новый

7. Поиск и выбор разъема «ODBC»


    ![скриншот, показывающий логотип разъема ODBC в связанном лезвии сервисов в Azure Data Factory](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/linked-services-odbc.png)

8. Например, например, «sqlite_odbc» прививаем службе значимое имя. Выберите время выполнения интеграции из "Connect via integration Runtime" отсева. Введите строку соединения ниже, заменив переменную начального каталога файлопатом для файла .db и DSN с именем соединения DSN системы: 

    ```
    Connection string: Provider=MSDASQL.1;Persist Security Info=False;Mode=ReadWrite;Initial Catalog=C:\sqlitemigrationsource.db;DSN=sqlitemigrationsource
    ```

9. Установите тип проверки подлинности в Anonymous

10. Проверка подключения

    ![скриншот, показывающий успешное подключение на фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/linked-services-test-successful.png)

11. Создайте еще одну связанную службу для вашей безграничной цели S'L. Выберите базу данных с помощью связанного мастера службы и предоставьте учетные данные аутентификации s'L.

    ![Скриншот, показывающий базу данных Azure S'L, выбранную на фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/linked-services-create-target.png)

12. Извлеките заявления CREATE TABLE из базы данных S'Lite. Это можно сделать, выполнить нижеприведенный скрипт Python в файле базы данных.

    ```
    #!/usr/bin/python
    import sqlite3
    conn = sqlite3.connect("sqlitemigrationsource.db")
    c = conn.cursor()

    print("Starting extract job..")
    with open('CreateTables.sql', 'w') as f:
        for tabledetails in c.execute("SELECT * FROM sqlite_master WHERE type='table'"):
            print("Extracting CREATE statement for " + (str(tabledetails[1])))
            print(tabledetails)
            f.write(str(tabledetails[4].replace('\n','') + ';\n'))
    c.close()
    ```

13. Создавайте таблицы посадки в целевой среде без сервера, копируя заявления таблицы CREATE из файла CreateTables.sql и запустив операторы S'L в редакторе запросов на портале Azure.

14. Вернитесь на домашний экран фабрики данных и нажмите кнопку "Копировать данные", чтобы пробежать через мастера создания рабочих мест.

    ![скриншот, показывающий логотип мастера копий данных на фабрике данных Azure](./media/tutorial-sqlite-db-to-azure-sql-serverless-offline/copy-data.png)

15. Выберите все таблицы из исходной базы данных S'Lite с помощью флажков и отобразите их в целевых таблицах в Azure S'L. После выполнения задания вы успешно перенесли свои данные из S'Lite в Azure S'L!

## <a name="next-steps"></a>Дальнейшие действия

- Для начала [см. см.](sql-database-single-database-get-started.md)
- См. подробнее об [ограничениях ресурсов уровня бессерверных вычислений](sql-database-vCore-resource-limits-single-databases.md#general-purpose---serverless-compute---gen5).
