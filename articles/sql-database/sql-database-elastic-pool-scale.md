---
title: Масштабирование ресурсов эластичного пула
description: На этой странице описано масштабирование ресурсов для эластичных пулов в Базе данных SQL Azure.
services: sql-database
ms.service: sql-database
ms.subservice: elastic-pools
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: oslake
ms.author: moslake
ms.reviewer: carlrab
ms.date: 3/14/2019
ms.openlocfilehash: daca108cfc8bb2e5b2a068170a4a0244c72c9592
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77462604"
---
# <a name="scale-elastic-pool-resources-in-azure-sql-database"></a>Масштабирование ресурсов эластичного пула в Базе данных SQL Azure

В этой статье описано масштабирование вычислительных ресурсов и ресурсов хранилища для эластичных пулов и баз данных в пулах в Базе данных SQL Azure.

## <a name="change-compute-resources-vcores-or-dtus"></a>Изменение вычислительных ресурсов (vCores или DTUs)

После первоначального выбора числа vCores или eDTUs, вы можете масштабировать эластичный пул вверх или вниз динамически на основе фактического опыта с помощью [портала Azure](sql-database-elastic-pool-manage.md#azure-portal-manage-elastic-pools-and-pooled-databases), [PowerShell](/powershell/module/az.sql/Get-AzSqlElasticPool), [Azure CLI](/cli/azure/sql/elastic-pool#az-sql-elastic-pool-update), или [REST API.](https://docs.microsoft.com/rest/api/sql/elasticpools/update)

### <a name="impact-of-changing-service-tier-or-rescaling-compute-size"></a>Влияние изменения уровня обслуживания или перемасштабирования размера вычислений

Изменение уровня обслуживания или размера вычислений эластичного пула следует аналогичной схеме, как для отдельных баз данных, и в основном включает в себя службу, выполняющую следующие шаги:

1. Создание нового экземпляра вычислений для эластичного пула  

    Создается новый экземпляр вычислений для эластичного пула с запрашиваемым уровнем обслуживания и размером вычислений. Для некоторых комбинаций изменений уровня обслуживания и вычислений в новом экземпляре вычислений должна быть создана копия каждой базы данных, которая включает копирование данных и может сильно повлиять на общую задержку. Несмотря на это, базы данных остаются в сети во время этого шага, и соединения продолжают направляться в базы данных в исходном экземпляре вычислений.

2. Переключение перекачивания подключений к новому экземпляру вычислений

    Существующие подключения к базам данных в исходном экземпляре вычислений отменяются. Любые новые подключения устанавливаются к базам данных в новом экземпляре вычислений. Для некоторых комбинаций изменений уровня обслуживания и вычислений файлы базы данных отсоединяются и прикрепляются во время коммутатора.  Несмотря на это, коммутатор может привести к краткому перерыву службы, когда базы данных недоступны, как правило, менее 30 секунд и часто в течение нескольких секунд. Если при удалении транзакций длительное время выполнения соединений продолжительность этого шага может занять больше времени для восстановления прерванных транзакций. [Ускоренное восстановление базы данных](sql-database-accelerated-database-recovery.md) может уменьшить влияние прерывания длительных транзакций.

> [!IMPORTANT]
> Во время любого этапа рабочего процесса данные не теряются.

### <a name="latency-of-changing-service-tier-or-rescaling-compute-size"></a>Задержка изменения уровня обслуживания или перемасштабирования размера вычислений

Предполагаемая задержка для изменения уровня обслуживания или перемасштабирования размера вычислений одной базы данных или эластичного пула параметры:

|Уровень служб|Базовая единая база данных,</br>Стандарт (S0-S1)|Базовый эластичный бассейн,</br>Стандарт (S2-S12), </br>Гипермасштаб, </br>Единая база данных общего назначения или эластичный пул|Премиум или бизнес-критическая единая база данных или эластичный пул|
|:---|:---|:---|:---|
|**Базовая единая база данных,</br> Стандарт (S0-S1)**|&bull;&nbsp;Постоянная задержка времени независимо от используемого пространства</br>&bull;&nbsp;Как правило, менее 5 минут|&bull;&nbsp;Задержка, пропорциональная пространству базы данных, используемому в связи с копированием данных</br>&bull;&nbsp;Как правило, менее 1 минуты на ГБ используемого пространства|&bull;&nbsp;Задержка, пропорциональная пространству базы данных, используемому в связи с копированием данных</br>&bull;&nbsp;Как правило, менее 1 минуты на ГБ используемого пространства|
|**Базовый эластичный пул, </br>Стандартный (S2-S12), </br>Hyperscale, </br>единая база данных общего назначения или эластичный пул**|&bull;&nbsp;Задержка, пропорциональная пространству базы данных, используемому в связи с копированием данных</br>&bull;&nbsp;Как правило, менее 1 минуты на ГБ используемого пространства|&bull;&nbsp;Постоянная задержка времени независимо от используемого пространства</br>&bull;&nbsp;Как правило, менее 5 минут|&bull;&nbsp;Задержка, пропорциональная пространству базы данных, используемому в связи с копированием данных</br>&bull;&nbsp;Как правило, менее 1 минуты на ГБ используемого пространства|
|**Премиум или бизнес-критическая единая база данных или эластичный пул**|&bull;&nbsp;Задержка, пропорциональная пространству базы данных, используемому в связи с копированием данных</br>&bull;&nbsp;Как правило, менее 1 минуты на ГБ используемого пространства|&bull;&nbsp;Задержка, пропорциональная пространству базы данных, используемому в связи с копированием данных</br>&bull;&nbsp;Как правило, менее 1 минуты на ГБ используемого пространства|&bull;&nbsp;Задержка, пропорциональная пространству базы данных, используемому в связи с копированием данных</br>&bull;&nbsp;Как правило, менее 1 минуты на ГБ используемого пространства|

> [!NOTE]
>
> - В случае изменения уровня обслуживания или перемасштабирования вычислений для эластичного пула для расчета оценки следует использовать суммирование пространства, используемого во всех базах данных пула.
> - В случае перемещения базы данных в/из эластичного пула только пространство, используемое базой данных, влияет на задержку, а не на пространство, используемое эластичным пулом.
>
> [!TIP]
> Для мониторинга незавершенных операций см.: [Управление операциями с помощью API S'L REST,](https://docs.microsoft.com/rest/api/sql/operations/list) [Управление операциями с использованием CLI,](/cli/azure/sql/db/op) [Мониторинг операций с использованием T-S'L](/sql/relational-databases/system-dynamic-management-views/sys-dm-operation-status-azure-sql-database) и этих двух команд PowerShell: [Get-AzSqlDatabaseActivity](/powershell/module/az.sql/get-azsqldatabaseactivity) и [Stop-AzSqlDatabaseActivity](/powershell/module/az.sql/stop-azsqldatabaseactivity).

### <a name="additional-considerations-when-changing-service-tier-or-rescaling-compute-size"></a>Дополнительные соображения при изменении уровня обслуживания или пересчете размера вычислений

- При уменьшении vCores или eDTUs для эластичного пула используемое пространство пула должно быть меньше максимально допустимого размера целевого уровня обслуживания и eDTUs пула.
- При изменении масштаба eDTU эластичного пула взимается дополнительная плата за хранилище, если максимальный размер хранилища пула поддерживается целевым пулом и превышает включенный объем хранилища целевого пула. Например, если пул категории "Стандартный" с максимальным размером в 100 ГБ, содержащий 100 eDTU, уменьшается до пула категории "Стандартный" с максимальным размером в 100 ГБ, содержащего 50 eDTU, то взимается плата за дополнительное хранилище, так как целевой пул поддерживает максимальный размер в 100 ГБ, а его включенный объем хранилища составляет только 50 ГБ. Поэтому дополнительный объем хранилища равен 100 – 50 = 50 ГБ. Чтобы узнать о ценах на дополнительное хранилище, ознакомьтесь с [ценами на Базу данных SQL](https://azure.microsoft.com/pricing/details/sql-database/). Если фактический объем пространства, которое используется, меньше, чем включенный объем хранилища, то этих дополнительных затрат можно избежать, уменьшив максимальный размер базы данных до включенного объема.

### <a name="billing-during-rescaling"></a>Выставление счетов во время масштабирования

Плата взимается за каждый час существования базы данных с учетом самого высокого уровня служб и объема вычислительных ресурсов, которые использовались в течение этого часа, даже если база данных использовалась или была активна менее часа. Например, если вы создадите отдельную базу данных и через 5 минут удалите ее, вам будет выставлен счет за 1 час использования базы данных.

## <a name="change-elastic-pool-storage-size"></a>изменение размера хранилища эластичного пула

> [!IMPORTANT]
> Иногда требуется сжать базу данных, чтобы освободить неиспользуемое пространство. Для получения дополнительной информации смотрите [пространство файла Управления в базе данных Azure S'L.](sql-database-file-space-management.md)

### <a name="vcore-based-purchasing-model"></a>Модель приобретения на основе виртуальных ядер

- Объем подготавливаемого хранилища не может превышать максимального допустимого размера.

  - Для хранения в хранилище уровня служб "Стандартный" или "Общего назначения" можно увеличить или уменьшить размер с шагом приращения в 10 ГБ.
  - Для хранения в хранилище уровня служб "Премиум" "Критически важный для бизнеса" можно увеличить или уменьшить размер с шагом приращения в 250 ГБ.
- Для подготовки хранилища эластичного пула можно увеличить или уменьшить его максимальный размер.
- Стоимость хранилища для эластичного пула равна объему хранилища, умноженному на цену единицы хранения этого хранилища для уровня служб. Сведения о цене на дополнительное хранилище см. на [странице цен на Базу данных SQL](https://azure.microsoft.com/pricing/details/sql-database/).

> [!IMPORTANT]
> Иногда требуется сжать базу данных, чтобы освободить неиспользуемое пространство. Для получения дополнительной информации смотрите [пространство файла Управления в базе данных Azure S'L.](sql-database-file-space-management.md)

### <a name="dtu-based-purchasing-model"></a>Модель приобретения на основе единиц DTU

- Цена DTU для эластичного пула включает в себя определенный объем хранилища, не требующий дополнительной платы. Дополнительный объем хранилища, сверх включенного, можно подготовить за дополнительную плату в пределах максимального допустимого размера с шагом в 250 ГБ при объеме хранилища до 1 ТБ и с шагом в 256 ГБ — при объеме более 1 ТБ. Сведения о включенном объеме хранилища и ограничениях максимального размера см. в разделе [Отдельная база данных: размеры хранилища и объемы вычислительных ресурсов](sql-database-dtu-resource-limits-elastic-pools.md#elastic-pool-storage-sizes-and-compute-sizes).
- Дополнительное хранилище для эластичного пула можно подготовить, увеличив его максимальный размер с помощью [портала Azure](sql-database-elastic-pool-manage.md#azure-portal-manage-elastic-pools-and-pooled-databases), [PowerShell](/powershell/module/az.sql/Get-AzSqlElasticPool), [Azure CLI](/cli/azure/sql/elastic-pool#az-sql-elastic-pool-update) или [REST API](https://docs.microsoft.com/rest/api/sql/elasticpools/update).
- Стоимость дополнительного хранилища для эластичного пула равна объему хранилища, умноженному на цену единицы хранения этого хранилища для уровня служб. Сведения о цене на дополнительное хранилище см. на [странице цен на Базу данных SQL](https://azure.microsoft.com/pricing/details/sql-database/).

> [!IMPORTANT]
> Иногда требуется сжать базу данных, чтобы освободить неиспользуемое пространство. Для получения дополнительной информации смотрите [пространство файла Управления в базе данных Azure S'L.](sql-database-file-space-management.md)

## <a name="next-steps"></a>Дальнейшие действия

Сведения об общих ограничениях ресурсов см. в статьях [Ограничения ресурсов базы данных SQL в модели приобретения на основе виртуальных ядер — эластичные пулы](sql-database-vcore-resource-limits-elastic-pools.md) и [Ограничения ресурсов базы данных SQL в модели приобретения на основе единиц DTU — эластичные пулы](sql-database-dtu-resource-limits-elastic-pools.md).
