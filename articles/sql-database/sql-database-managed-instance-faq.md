---
title: База данных SQL управляемого экземпляра часто задаваемые вопросы | Документация Майкрософт
description: Управляемый экземпляр базы данных SQL часто задаваемые вопросы (FAQ)
services: sql-database
ms.service: sql-database
ms.subservice: managed-instance
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: jovanpop-msft
ms.author: jovanpop
ms.reviewer: sstein, carlrab
manager: craigg
ms.date: 07/08/2019
ms.openlocfilehash: c3a070eb7e1435055b47b39985cf8cb0b182a514
ms.sourcegitcommit: 66237bcd9b08359a6cce8d671f846b0c93ee6a82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2019
ms.locfileid: "67798064"
---
# <a name="sql-database-managed-instance-frequently-asked-questions-faq"></a>Управляемый экземпляр базы данных SQL часто задаваемые вопросы (FAQ)

Данная статья содержит много внимания наиболее распространенным вопросам о [базы данных SQL управляемого экземпляра](sql-database-managed-instance.md).

## <a name="where-can-i-find-a-list-of-features-that-are-supported-on-managed-instance"></a>Где можно найти список компонентов, которые поддерживаются в управляемом экземпляре?

Список поддерживаемых функций в управляемом экземпляре, см. в разделе [базы данных SQL Azure и SQL Server](sql-database-features.md).

Различия в синтаксисе и поведении управляемые базы данных SQL Azure и на локальном сервере SQL Server, см. в разделе [различия T-SQL из SQL Server](sql-database-managed-instance-transact-sql-information.md).


## <a name="where-can-i-find-technical-characteristics-and-resource-limits-for-managed-instance"></a>Где можно найти технические характеристики и ограничения ресурсов для управляемого экземпляра?

Характеристики создания доступного оборудования, см. в разделе [технические отличия в поколениях оборудования](sql-database-managed-instance-resource-limits.md#hardware-generation-characteristics).
Доступных уровней служб и их характеристики, см. в разделе [технические различия между уровнями обслуживания](sql-database-managed-instance-resource-limits.md#service-tier-characteristics).

## <a name="where-can-i-find-known-issues-and-bugs"></a>Где можно найти ошибки и известные проблемы?

Ошибки и известные проблемы, см. в разделе [изменения в поведении](sql-database-managed-instance-transact-sql-information.md#Changes) и [известные проблемы](sql-database-managed-instance-transact-sql-information.md#Issues).


## <a name="can-a-managed-instance-have-the-same-name-as-on-premises-sql-server"></a>Можно управляемый экземпляр имеет имя, совпадающее с именем локального сервера SQL?

Управляемый экземпляр должен иметь имя, которое заканчивается *database.windows.net*. Для использования другой зоны DNS вместо значения по умолчанию, например, **mi другой name**. contoso.com: 
- Использовать CliConfig определить псевдоним (средство является просто оболочкой параметров реестра, поэтому это можно также сделать с помощью групповой политики или скрипта).
- Используйте *CNAME* с *TrustServerCertificate = true* параметр.


## <a name="how-can-i-move-database-from-managed-instance-back-to-sql-server-or-azure-sql-database"></a>Как перенести базу данных из управляемого экземпляра обратно в SQL Server или базы данных SQL Azure?

Вы можете [Экспорт базы данных bacpac](sql-database-export.md) и затем [Импорт bacpac-файла]( sql-database-import.md). Этот подход рекомендуется в том случае, если база данных размером менее 100 ГБ.

Репликация транзакций может использоваться, если все таблицы в базе данных имеют первичные ключи.

Собственный `COPY_ONLY` невозможно восстановить резервные копии, созданные из управляемых экземпляров в SQL Server, поскольку управляемый экземпляр имеет более позднюю версию базы данных, по сравнению с SQL Server.

## <a name="how-can-i-migrate-my-instance-database-to-a-single-azure-sql-database"></a>Как можно перенести базу данных экземпляра для отдельной базы данных SQL Azure?

Один из вариантов — [экспорта базы данных в bacpac-файл](sql-database-export.md) и затем [Импорт bacpac-файла]( sql-database-import.md). 

Это рекомендуемый подход, если база данных размером менее 100 ГБ. Репликация транзакций может использоваться, если все таблицы в базе данных имеют первичные ключи.

## <a name="how-do-i-choose-between-gen-4-and-gen-5-hardware-generation-for-managed-instance"></a>Как выбрать между 4 и 5-го поколений поколения оборудования для управляемого экземпляра?

Это зависит от рабочей нагрузки, так как некоторые поколения оборудования является наиболее подходящим для определенных типов рабочих нагрузок чем-то. Несмотря на то довольно сложна для упрощения точки зрения производительности, следующие различия между поколений оборудования, влияющие на производительность рабочей нагрузки:
- 4-го поколения обеспечивает улучшенную поддержку вычислений, так как он зависит от физических процессоров, и 5-го поколений, основанный на виртуальное процессоров. Это может быть более выгодным для ресурсоемких вычислений.
- 5-го поколения поддерживает ускорение сети в результате чего улучшенную пропускную способность ввода-ВЫВОДА во внешнее хранилище. Это может быть полезным для интенсивных рабочих нагрузок на уровнях служб общего назначения. 5-го поколения использует быстрее локальных дисков SSD по сравнению с четвертого поколения. Это может быть полезным для интенсивных рабочих нагрузок на бизнес-уровнями важная служба.

Пользователям рекомендуется протестировать производительность предназначены для рабочей среды перед запуском фактических рабочих нагрузок, чтобы определить, какие оборудования поколение будет лучше работать в вашем случае.

## <a name="can-i-switch-my-managed-instance-hardware-generation-between-gen-4-and-gen-5-online"></a>Можно ли перейти с мой управляемый экземпляр оборудования поколения между 4 и 5-го поколений через Интернет? 

Автоматические online переключение между поколениях оборудования возможна в том случае, если обоих поколений оборудования доступны в том же регионе, где подготавливается управляемый экземпляр. В этом случае у вас есть параметр в разделе уровня цен на портале Azure для переключения между поколениях оборудования.

Это имеет тип данных long выполнения операции, как новый управляемый экземпляр будут подготовлены к работе в серверной части и базы данных автоматически обмениваются, старого и нового экземпляра. Этот процесс будет простым для клиентов.

Если обоих поколений оборудования не поддерживаются в том же регионе, изменение поколения оборудования, возможно, но должны выполняться вручную. Этого необходимо подготовить новый экземпляр в регионе, где доступны, создание нужного оборудования и вручную резервное копирование и восстановление данных до экземпляра, старое и новое.


## <a name="how-do-i-tune-performance-of-my-managed-instance"></a>Способ настройки производительности мой управляемый экземпляр? 

Управляемый экземпляр общего назначения использует удаленное хранилище, из-за чего размер файлов данных и журнала важно для производительности. Чтобы настроить производительность уровня общего назначения службы, следуйте инструкциям в этой записи блога.

Для интенсивных рабочих нагрузок рассмотрите возможность использования аппаратного обеспечения 5-го поколений, и с помощью четвертого поколения для ресурсоемких вычислений. Дополнительные сведения см. раздел FAQ по выбору между поколениях оборудования.

Если рабочая нагрузка содержит много небольших транзакций, подумайте о переходе типа соединения с прокси-сервера в режим перенаправления.

## <a name="what-is-the-maximum-storage-size-for-managed-instance"></a>Каков максимальный размер хранилища для управляемого экземпляра? 

Размер хранилища для управляемого экземпляра зависит от выбранного уровня обслуживания ("общего назначения" или "критически важный для бизнеса"). Ограничения хранилища уровнях служб, см. в разделе [характеристика уровня службы](sql-database-service-tiers-general-purpose-business-critical.md).

## <a name="is-the-backup-storage-deducted-from-my-managed-instance-storage"></a>Хранилище резервных копий вычитается из моего хранилища управляемого экземпляра? 

Нет, хранилище резервных копий не вычитается из управляемого экземпляра дискового пространства. Хранилище резервных копий не зависит от экземпляра дисковое пространство и размер не ограничен. Хранилище резервных копий, ограничивается время хранения резервной копии базы данных экземпляра, можно настроить от 7 до 35 дней. Дополнительные сведения см. в разделе [автоматически создаваемых резервных копий](https://docs.microsoft.com/azure/sql-database/sql-database-automated-backups).
  
## <a name="how-can-i-set-inbound-nsg-rules-on-management-ports"></a>Как задать правила NSG для входящего трафика на порты управления?

Встроенный брандмауэр настраивает брандмауэр Windows на всех виртуальных машинах в кластере, чтобы разрешить входящие подключения из диапазонов IP-адресов, связанных только к машинам управления и развертывания Microsoft и безопасные рабочие станции администрирования надежно защищает несанкционированного проникновения через сетевой уровень.

Вот, какие порты используются для:

Порты 9000 и 9003 используются инфраструктурой Service Fabric. Основная роль Service Fabric — Поддерживайте работоспособность виртуальный кластер и сохранять состояние цели с точки зрения числа реплик компонента.

Порты 1438 1440 и 1452 используются агентом узла. Агент узла — приложение, которое выполняется внутри кластера и используемые в плоскости управления, для выполнения команды управления.

Помимо встроенного брандмауэра на уровне сети подключение защищено с помощью сертификатов.
  
Дополнительные сведения и способ проверки встроенного брандмауэра, см. в разделе [базы данных SQL управляемого экземпляра встроенного брандмауэра](sql-database-managed-instance-management-endpoint-verify-built-in-firewall.md).


## <a name="how-can-i-mitigate-networking-risks"></a>Как можно смягчить сети риски? 

Чтобы устранить все риски, сети, клиенты рекомендуется для применения набора параметров безопасности и элементы управления.

- Включите все базы данных на прозрачное шифрование данных (TDE).
- Включение, отключение Common Language Runtime (CLR). Это рекомендуется в локальной также.
- Используйте только учетные записи Azure AD.
- Доступ с низкой привилегированной учетной записи администратора базы данных SQL MI.
- Настройка JIT-доступ к jumpbox для учетной записи системного администратора.
- Включите аудит SQL и интегрировать его с помощью включающих механизмы оповещений.
- Включение обнаружения угроз из набора ATS.


## <a name="where-can-i-find-use-cases-and-resulting-cost-savings-with-managed-instance"></a>Где можно найти варианты использования и результирующий экономии с помощью управляемого экземпляра?

Примеры использования управляемого экземпляра

- [Komatsu](http://customers.microsoft.com/story/komatsu-australia-manufacturing-azure)
- [powerdetails](http://customers.microsoft.com/story/powerdetails-partner-professional-services-azure-sql-database-managed-instance)
- [Allscripts](http://customers.microsoft.com/story/allscripts-partner-professional-services-azure)   
Чтобы лучше понять преимущества, затраты и риски, связанные с развертыванием управляемый экземпляр базы данных SQL Azure, есть также исследование Forrester: [Совокупный экономический эффект MI](https://azure.microsoft.com/resources/forrester-tei-sql-database-managed-instance).


## <a name="can-i-do-dns-refresh"></a>Возможности обновления DNS? 
  
В настоящее время мы не предоставляем возможность обновить конфигурацию DNS-сервера для управляемого экземпляра.

Со временем обновляется Конфигурация DNS:

- Когда истекает срок аренды DHCP.
- При обновлении платформы.

Обойти это ограничение понизить управляемого экземпляра нужно 4 виртуальных ядер и обновить его после выполнения. Это имеет побочный эффект обновление конфигурации DNS.


## <a name="can-a-managed-instance-have-a-static-ip-address"></a>Управляемый экземпляр может и иметь статический IP-адрес?

В редких, но необходимые ситуациях необходимо выполнить миграцию online управляемого экземпляра в новый виртуальный кластер. Если требуется, из-за изменений в наш стек технологий, направленных на повышение безопасности и надежности службы имеет такой миграции. Переход на новые результаты виртуальный кластер при изменении IP-адрес, который сопоставляется имя узла управляемого экземпляра. Управляемый экземпляр службы не утверждения поддержка адресов статический IP-адрес и оставляет за собой право изменять его как часть регулярного обслуживания циклов без предварительного уведомления.

По этой причине настоятельно рекомендуется не полагаться на неизменность IP-адреса, как это может привести к ненужных простоев.


## <a name="can-i-change-the-time-zone-for-an-existing-managed-instance"></a>Можно ли изменить часовой пояс для существующего управляемого экземпляра?

Конфигурация часового пояса можно задать при подготовке управляемого экземпляра в первый раз. Изменение часового пояса из существующего управляемого экземпляра не поддерживается. Дополнительные сведения см. в разделе [ограничения часовой пояс](sql-database-managed-instance-timezone.md#limitations).

Обходные пути включают создание управляемого экземпляра с помощью правильного часового пояса и затем либо выполнение ручной архивации и восстановления, или мы рекомендуем выполнять [восстановления на момент между несколькими экземплярами](https://blogs.msdn.microsoft.com/sqlserverstorageengine/2018/06/07/cross-instance-point-in-time-restore-in-azure-sql-database-managed-instance/).


## <a name="how-do-i-resolve-performance-issues-with-my-managed-instance"></a>Как устранить проблемы с производительностью с помощью мой управляемый экземпляр

Сравнение производительности между управляемым экземпляром и SQL Server, является хорошей отправной точкой [советы и рекомендации для сравнения производительности Azure управляемого экземпляра SQL и SQL Server](https://techcommunity.microsoft.com/t5/Azure-SQL-Database/The-best-practices-for-performance-comparison-between-Azure-SQL/ba-p/683210).

Загружает данные часто являются медленнее в управляемом экземпляре, чем в SQL Server из-за обязательным полной модели восстановления и [ограничения](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance-resource-limits#service-tier-characteristics) на пропускную способность записи журнала транзакций. В некоторых случаях это может быть решена путем загрузки временных данных в базу данных tempdb, вместо пользовательской базы данных или с помощью кластеризованный индекс columnstore или таблицы, оптимизированные для памяти.


## <a name="can-i-restore-my-encrypted-database-to-managed-instance"></a>Можно ли восстановить зашифрованные базы данных в управляемый экземпляр?

Да, не требуется для расшифровки, чтобы иметь возможность восстановить его в управляемый экземпляр базы данных. Необходимо предоставить сертификат или ключ используется как предохранитель ключа шифрования в исходной системе в управляемый экземпляр, чтобы иметь возможность считывать данные из зашифрованного файла резервной копии. Это можно осуществить двумя способами:

- Отправьте сертификат предохранителя управляемому экземпляру. Это можно сделать только с помощью PowerShell. Пример сценария описывает весь процесс.
- Передайте асимметричного предохранители ключа для Azure Key Vault (AKV) и пункты управляемого экземпляра. Этот подход похож на вариант использования прозрачного шифрования данных (BYOK) перевести your собственных ключей, который также использует интеграции AKV, чтобы сохранить ключ шифрования. Если необходимо просто передать AKV, доступных для управляемого экземпляра для восстановления зашифрованных баз данных без использования ключа как предохранитель ключа шифрования ключа, следуйте инструкциям по настройке TDE с BYOK, а не флажок сделать выбранный ключ по умолчанию средства защиты TDE.

После шифрования предохранителя доступных для управляемого экземпляра, можно продолжить процедуру восстановления стандартной базы данных.

## <a name="how-can-i-migrate-from-azure-sql-database-single-or-elastic-pool-to-managed-instance"></a>Как перенести из пула автономной или эластичной базы данных SQL Azure в управляемый экземпляр? 

Управляемый экземпляр предлагает такие же уровни производительности на вычислительные ресурсы и хранилище размер как другие варианты развертывания базы данных SQL Azure. Если вы хотите консолидировать данные на одном экземпляре, или необходимо просто поддерживается исключительно в управляемом экземпляре, можно перенести данные с помощью функции экспорта и импорта (BACPAC).
