---
title: Настройки политики для веб-приложений брандмауэра с передней дверью Azure
description: Изучите веб-приложение Firewall (WAF).
author: vhorne
ms.service: web-application-firewall
ms.topic: article
services: web-application-firewall
ms.date: 08/21/2019
ms.author: victorh
ms.openlocfilehash: 08b21ccd7f7958f00546583f680ecb8cde4a20c8
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75932620"
---
# <a name="policy-settings-for-web-application-firewall-on-azure-front-door"></a>Настройки политики для веб-приложений брандмауэра на передней двери Azure

Политика Web Application Firewall (WAF) позволяет контролировать доступ к веб-приложениям с помощью набора пользовательских и управляемых правил. Название политики WAF должно быть уникальным. Вы получите ошибку проверки, если попытаетесь использовать существующее имя. Существует несколько параметров уровня политики, которые применяются ко всем правилам, указанным для этой политики, как описано в этой статье.

## <a name="waf-state"></a>Состояние WAF

Политика WAF для Front Door может быть в одном из следующих двух состояний:
- **Включено:** При включении политики WAF активно проверяет входящие запросы и принимает соответствующие действия в соответствии с определениями правил
- **Инвалиды:** - Когда полис отключен, проверка WAF приостанавливается. Входящие запросы будут обходить WAF и отправляются в бэк-энды на основе реуктора.

## <a name="waf-mode"></a>Режим WAF

Для политики WAF можно настроить один из следующих двух режимов работы.

- **Режим обнаружения** При запуске в режиме обнаружения WAF не предпринимает никаких действий, кроме мониторинга и регистрации запроса и соответствия правил WAF к журналам WAF. Включите диагностику регистрации для Front Door (при использовании портала это можно достичь, зайдя в раздел **Диагностика** на портале Azure).

- **Режим профилактики** При настройке для выполнения в режиме предотвращения WAF принимает указанное действие, если запрос соответствует правилу. Все запросы, для которых обнаружены совпадающие правила, также регистрируются в журналах WAF.

## <a name="waf-response-for-blocked-requests"></a>Ответ WAF на заблокированные запросы

По умолчанию, когда WAF блокирует запрос из-за совпадаемого правила, он возвращает код состояния 403 с - **Запрос заблокирован** сообщением. Строка отсчета также возвращается для ведения журнала.

Вы можете определить код пользовательского статуса ответа и сообщение ответа, когда запрос заблокирован WAF. Поддерживаются следующие пользовательские коды статуса:

- 200 ОК
- 403 Запрещено
- 405 Метод не допускается
- 406 Неприемлемо
- 429 Слишком много запросов

Код состояния пользовательского ответа и сообщение ответа — это параметр уровня политики. После настройки все заблокированные запросы получают один и тот же пользовательский статус ответа и сообщение ответа.

## <a name="uri-for-redirect-action"></a>URI для перенаправления действий

Вы должны определить URI, чтобы перенаправить запросы, если действие **REDIRECT** выбрано для любого из правил, содержащихся в политике WAF. Это перенаправление URI должен быть действительным сайтом HTTP (S), и после настройки все запросы, соответствующие правилам с действием "REDIRECT", будут перенаправлены на указанный сайт.


## <a name="next-steps"></a>Дальнейшие действия
- Узнайте, как определить [пользовательские ответы](waf-front-door-configure-custom-response-code.md) WAF
