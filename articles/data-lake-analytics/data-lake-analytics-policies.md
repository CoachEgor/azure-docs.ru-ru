---
title: Управление политиками Azure Data Lake Analytics
description: Узнайте, как управлять использованием учетной записи Data Lake Analytics с помощью политик.
services: data-lake-analytics
ms.service: data-lake-analytics
author: saveenr
ms.author: saveenr
ms.reviewer: jasonwhowell
ms.assetid: 0a6102d1-7554-4df2-b487-4dae9a7287b6
ms.topic: conceptual
ms.date: 04/30/2018
ms.openlocfilehash: 64095f6706bb978cd33b8fe7833fe4e65fc3b0f8
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "60813424"
---
# <a name="manage-azure-data-lake-analytics-using-policies"></a>Управление Azure Data Lake Analytics с использованием политик

Используя политики учетной записи, вы можете контролировать, как используются ресурсы учетной записи Azure Data Lake Analytics. Эти политики позволяют вам контролировать стоимость использования Azure Data Lake Analytics. Например, с помощью этих политик вы можете предотвратить неожиданное повышение расходов, ограничив количество AU, которые учетная запись может одновременно использовать.

## <a name="account-level-policies"></a>Политики на уровне учетной записи

Эти политики применяются для всех заданий в учетной записи Data Lake Analytics.

### <a name="maximum-number-of-aus-in-a-data-lake-analytics-account"></a>Максимальное число единиц использования аналитики в учетной записи Data Lake Analytics
Общее число единиц использования аналитики (AU), которые может использовать учетная запись Data Lake Analytics, контролируется политикой. По умолчанию установлено значение 250. Например, если это значение равно 250 единицам, можно выполнять одно задание с 250 единицами или 10 заданий с 25 единицами. Дополнительные задания, которые передаются, помещаются в очередь до завершения выполняющихся заданий. После завершения выполняющихся заданий единицы использования аналитики освобождаются и могут использоваться для выполнения заданий в очереди.

Чтобы изменить количество единиц использования аналитики для вашей учетной записи Data Lake Analytics, выполните следующее:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Максимум единиц аналитики (AU) на задание** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле. 
4. Выберите команду **Сохранить**.

> [!NOTE]
> Если требуется больше единиц использования аналитики, чем значение по умолчанию (250), на портале щелкните **Справка и поддержка**, чтобы отправить запрос в службу технической поддержки. Количество единиц использования аналитики, доступных в вашей учетной записи Data Lake Analytics, можно увеличить.
>

### <a name="maximum-number-of-jobs-that-can-run-simultaneously"></a>Максимальное количество одновременно выполняемых заданий
Политика определяет количество заданий, которые могут выполняться одновременно. По умолчанию установлено значение 20. Если в вашей учетной записи Data Lake Analytics есть доступные единицы использования аналитики, новые задания будут запускаться немедленно до тех пор, пока общее количество выполняемых заданий не достигнет значения этой политики. По достижении максимального количества одновременно выполняемых заданий, последующие задания помещаются в очередь в порядке приоритета, пока не будет завершено одно или несколько запущенных заданий (в зависимости от доступности единиц использования аналитики).

Чтобы изменить количество одновременно выполняемых заданий:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Максимальное число выполняемых заданий** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле. 
4. Выберите команду **Сохранить**.

> [!NOTE]
> Если требуется запустить больше заданий, чем значение по умолчанию (20), на портале щелкните **Справка и поддержка**, чтобы отправить запрос в службу технической поддержки. Количество одновременно выполняемых заданий, доступных в вашей учетной записи Data Lake Analytics, можно увеличить.
>

### <a name="how-long-to-keep-job-metadata-and-resources"></a>Как долго следует хранить метаданные и ресурсы задания 
При запуске заданий U-SQL служба Data Lake Analytics сохраняет все связанные файлы. Связанные файлы включают в себя скрипт U-SQL, DLL-файлы, на которые ссылается скрипт U-SQL, скомпилированные ресурсы и статистику. Файлы находятся в папке /system/ учетной записи Azure Data Lake Storage по умолчанию. Эта политика определяет, как долго хранятся эти ресурсы, прежде чем они будут удалены автоматически (по умолчанию — 30 дней). Эти файлы можно использовать для отладки, а также для настройки производительности заданий, которые будут повторно выполнятся в будущем.

Чтобы изменить срок хранения метаданных и ресурсов задания:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Срок хранения запросов заданий в днях** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле.  
4. Выберите команду **Сохранить**.

## <a name="job-level-policies"></a>Политики на уровне задания

С помощью политик на уровне задания можно управлять максимальным количеством единиц использования аналитики и максимальным приоритетом, который отдельные пользователи (или участники групп безопасности) могут устанавливать в заданиях, которые они отправляют. Эта политика позволит контролировать затраты пользователей. Политики также позволяют контролировать эффект, который запланированные задания могу оказать на рабочие задания с высоким приоритетом, запущенные в одной учетной записи Data Lake Analytics.

Служба Data Lake Analytics имеет две политики, которые могут быть установлены на уровне задания.

* **Пороговое значение AU на задание**: Пользователи могут отправлять только те задания, которые содержат это число единиц использования аналитики. По умолчанию это ограничение аналогично максимальному значению единиц использования аналитики для учетной записи.
* **Приоритет**. Пользователи могут отправлять только те задания, приоритет которых меньше или равно этому значению. Более высокое число указывает на более низкий приоритет. По умолчанию устанавливается значение 1, которое означает максимально возможный приоритет.

Для каждой учетной записи назначается политика по умолчанию. Она применяется ко всем пользователям учетной записи. Можно установить дополнительные политики для отдельных пользователей и групп. 

> [!NOTE]
> Политики на уровне учетной записи и политики на уровне задания применяются одновременно.
>

### <a name="add-a-policy-for-a-specific-user-or-group"></a>Добавление политики для конкретного пользователя или группы

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Пределы отправки заданий** нажмите кнопку **Добавить политику**. Затем выберите или введите следующие параметры.
    1. **Имя политики вычислений**: Введите имя политики, чтобы напомнить о назначении политики.
    2. **Выберите пользователя или группу**: Выберите пользователя или группу, в которой применяется эта политика.
    3. **Задайте предел AU для задания**: Задайте предел AU, который будет применяться для выбранного пользователя или группы.
    4. **Установите предел приоритета**: Установите предел приоритета, который будет применяться для выбранного пользователя или группы.

4. Нажмите кнопку **ОК**.

5. Новая политика отобразится в таблице политик **По умолчанию** в разделе **Пределы отправки заданий**. 

### <a name="delete-or-edit-an-existing-policy"></a>Удаление или изменение существующей политики

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Пределы отправки заданий** найдите политику, которую требуется изменить.
4.  Чтобы увидеть параметры **Удалить** и **Изменить**, в правом столбце таблицы щелкните `...`.

## <a name="additional-resources-for-job-policies"></a>Дополнительные ресурсы политики заданий
* [Запись блога с обзором политик](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-overview/)
* [Запись блога о политиках на уровне учетной записи](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-account-level-policy/)
* [Запись блога о политиках на уровне задания](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-job-level-policy/)

## <a name="next-steps"></a>Дальнейшие действия

* [Обзор аналитики озера данных Microsoft Azure](data-lake-analytics-overview.md)
* [Начало работы с Azure Data Lake Analytics с помощью портала Azure](data-lake-analytics-get-started-portal.md)
* [Управление Azure Data Lake Analytics с помощью Azure PowerShell](data-lake-analytics-manage-use-powershell.md)

