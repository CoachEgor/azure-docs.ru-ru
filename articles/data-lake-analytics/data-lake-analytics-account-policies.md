---
title: Управление политиками учетных записей Azure Data Lake Analytics
description: Узнайте, как использовать политики учетных записей для управления использованием учетной записи Data Lake Analytics, например максимума Au и максимум заданий.
services: data-lake-analytics
ms.service: data-lake-analytics
author: guyhay
ms.author: guyhay
ms.reviewer: jasonwhowell
ms.assetid: 0a6102d1-7554-4df2-b487-4dae9a7287b6
ms.topic: conceptual
ms.date: 04/30/2018
ms.openlocfilehash: 4689714073047e383a53a04bd0069a8a27afdf9d
ms.sourcegitcommit: c4700ac4ddbb0ecc2f10a6119a4631b13c6f946a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/27/2019
ms.locfileid: "72966441"
---
# <a name="manage-azure-data-lake-analytics-using-account-policies"></a>Управление Azure Data Lake Analytics с помощью политик учетных записей

Политики учетных записей помогают управлять тем, как используются ресурсы Azure Data Lake Analytics учетной записи. Эти политики позволяют вам контролировать стоимость использования Azure Data Lake Analytics. Например, с помощью этих политик вы можете предотвратить неожиданное повышение расходов, ограничив количество AU, которые учетная запись может одновременно использовать.

## <a name="account-level-policies"></a>Политики на уровне учетной записи

Эти политики применяются для всех заданий в учетной записи Data Lake Analytics.

### <a name="maximum-number-of-aus-in-a-data-lake-analytics-account"></a>Максимальное число единиц использования аналитики в учетной записи Data Lake Analytics
Общее число единиц использования аналитики (AU), которые может использовать учетная запись Data Lake Analytics, контролируется политикой. По умолчанию установлено значение 250. Например, если это значение равно 250 единицам, можно выполнять одно задание с 250 единицами или 10 заданий с 25 единицами. Дополнительные задания, которые передаются, помещаются в очередь до завершения выполняющихся заданий. После завершения выполняющихся заданий единицы использования аналитики освобождаются и могут использоваться для выполнения заданий в очереди.

Чтобы изменить количество единиц использования аналитики для вашей учетной записи Data Lake Analytics, выполните следующее:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **ограничения и политики**.
3. В разделе **Максимум единиц аналитики (AU) на задание** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле. 
4. В нижней части страницы нажмите кнопку **Save**.

> [!NOTE]
> Если требуется больше единиц использования аналитики, чем значение по умолчанию (250), на портале щелкните **Справка и поддержка**, чтобы отправить запрос в службу технической поддержки. Количество единиц использования аналитики, доступных в вашей учетной записи Data Lake Analytics, можно увеличить.
>

### <a name="maximum-number-of-jobs-that-can-run-simultaneously"></a>Максимальное количество одновременно выполняемых заданий
Эта политика ограничивает количество заданий, которые могут выполняться одновременно. По умолчанию установлено значение 20. Если в вашей учетной записи Data Lake Analytics есть доступные единицы использования аналитики, новые задания будут запускаться немедленно до тех пор, пока общее количество выполняемых заданий не достигнет значения этой политики. При достижении максимального числа заданий, которые могут выполняться одновременно, последующие задания помещаются в очередь в порядке приоритета до завершения одного или нескольких выполняемых заданий (в зависимости от доступных Au).

Чтобы изменить количество одновременно выполняемых заданий:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **ограничения и политики**.
3. В разделе **Максимальное число выполняемых заданий** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле. 
4. В нижней части страницы нажмите кнопку **Save**.

> [!NOTE]
> Если требуется запустить больше заданий, чем значение по умолчанию (20), на портале щелкните **Справка и поддержка**, чтобы отправить запрос в службу технической поддержки. Количество одновременно выполняемых заданий, доступных в вашей учетной записи Data Lake Analytics, можно увеличить.
>

### <a name="how-long-to-keep-job-metadata-and-resources"></a>Как долго следует хранить метаданные и ресурсы задания 
Когда пользователи запускают задания U-SQL, служба Data Lake Analytics сохраняет все связанные файлы. Эти файлы включают скрипт U-SQL, файлы DLL, на которые имеются ссылки в скрипте U-SQL, скомпилированные ресурсы и статистику. Файлы находятся в папке /system/ учетной записи Azure Data Lake Storage по умолчанию. Эта политика определяет, как долго хранятся эти ресурсы, прежде чем они будут удалены автоматически (по умолчанию — 30 дней). Эти файлы можно использовать для отладки, а также для настройки производительности заданий, которые будут повторно выполнятся в будущем.

Чтобы изменить срок хранения метаданных и ресурсов задания:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **ограничения и политики**.
3. В разделе **Срок хранения запросов заданий в днях** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле.  
4. В нижней части страницы нажмите кнопку **Save**.

## <a name="job-level-policies"></a>Политики на уровне задания

Политики уровня задания позволяют управлять максимальным количеством единиц управления и максимальным приоритетом, которые могут устанавливаться отдельными пользователями (или членами определенных групп безопасности) при отправке заданий. Эта политика позволит контролировать затраты пользователей. Политики также позволяют контролировать эффект, который запланированные задания могу оказать на рабочие задания с высоким приоритетом, запущенные в одной учетной записи Data Lake Analytics.

Служба Data Lake Analytics имеет две политики, которые могут быть установлены на уровне задания.

* **Ограничение единиц использования аналитики для задания**: пользователи могут отправлять только те задания, которые содержат это число единиц использования аналитики. По умолчанию это ограничение аналогично максимальному значению единиц использования аналитики для учетной записи.
* **Приоритет**: пользователи могут отправлять только те задания, приоритет которых меньше или равен этому значению. Более высокое число указывает на более низкий приоритет. По умолчанию устанавливается значение 1, которое означает максимально возможный приоритет.

Для каждой учетной записи назначается политика по умолчанию. Она применяется ко всем пользователям учетной записи. Можно создать дополнительные политики для конкретных пользователей и групп. 

> [!NOTE]
> Политики на уровне учетной записи и политики на уровне задания применяются одновременно.
>

### <a name="add-a-policy-for-a-specific-user-or-group"></a>Добавление политики для конкретного пользователя или группы

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **ограничения и политики**.
3. В разделе **Пределы отправки заданий** нажмите кнопку **Добавить политику**. Затем выберите или введите следующие параметры.
    1. **Имя политики вычислений**: введите имя политики для напоминания о назначении политики.
    2. **Выберите пользователя или группу**: выберите пользователя или группу, к которым будет применяться эта политика.
    3. **Задайте предел AU для задания**: установите предел единиц использования аналитики, который будет применяться для выбранного пользователя или группы.
    4. **Set the Priority Limit** (Задайте предел приоритета): установите предел приоритета, который будет применяться для выбранного пользователя или группы.

4. Нажмите кнопку **ОК**.

5. Новая политика отобразится в таблице политик **По умолчанию** в разделе **Пределы отправки заданий**. 

### <a name="delete-or-edit-an-existing-policy"></a>Удаление или изменение существующей политики

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **ограничения и политики**.
3. В разделе **Пределы отправки заданий** найдите политику, которую требуется изменить.
4.  Чтобы увидеть параметры **Удалить** и **Изменить**, в правом столбце таблицы щелкните `...`.

## <a name="additional-resources-for-job-policies"></a>Дополнительные ресурсы политики заданий
* [Запись блога с обзором политик](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-overview/)
* [Запись блога о политиках на уровне учетной записи](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-account-level-policy/)
* [Запись блога о политиках на уровне задания](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-job-level-policy/)

## <a name="next-steps"></a>Дальнейшие действия

* [Обзор аналитики озера данных Microsoft Azure](data-lake-analytics-overview.md)
* [Начало работы с Azure Data Lake Analytics с помощью портала Azure](data-lake-analytics-get-started-portal.md)
* [Управление Azure Data Lake Analytics с помощью Azure PowerShell](data-lake-analytics-manage-use-powershell.md)