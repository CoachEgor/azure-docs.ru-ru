---
title: Создание Azure Databricks рабочей области в виртуальной сети
description: В этой статье описывается, как развернуть Azure Databricks в виртуальной сети.
services: azure-databricks
author: mamccrea
ms.author: mamccrea
ms.reviewer: jasonh
ms.service: azure-databricks
ms.topic: conceptual
ms.date: 04/02/2019
ms.openlocfilehash: 12ac5c44a0ee479d84616b138f9e2369a195c275
ms.sourcegitcommit: 62bd5acd62418518d5991b73a16dca61d7430634
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2019
ms.locfileid: "68976465"
---
# <a name="quickstart-create-an-azure-databricks-workspace-in-a-virtual-network"></a>Краткое руководство. Создание Azure Databricks рабочей области в виртуальной сети

В этом кратком руководстве показано, как создать рабочую область Azure Databricks в виртуальной сети. В этой рабочей области также будет создан кластер Apache Spark.

Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://azure.microsoft.com/free/).

## <a name="sign-in-to-the-azure-portal"></a>Войдите на портал Azure

Войдите на [портале Azure](https://portal.azure.com/).

> [!Note]
> Инструкции из этого руководство нельзя выполнять с **бесплатной пробной версией подписки**.
> Если у вас есть бесплатная учетная запись, перейдите к профилю и измените подписку на подписку с **оплатой по мере использования**. Дополнительные сведения см. на странице [создания бесплатной учетной записи Azure](https://azure.microsoft.com/free/). Затем [удалите предельную сумму расходов](https://docs.microsoft.com/azure/billing/billing-spending-limit#remove-the-spending-limit-in-account-center) и [запросите увеличение квоты](https://docs.microsoft.com/azure/azure-supportability/resource-manager-core-quotas-request) на ЦП в своем регионе. При создании рабочей области Azure Databricks можно выбрать ценовую категорию **Пробная версия ("Премиум" — 14 дней бесплатно (DBU))** для предоставления рабочей области доступа к бесплатным DBU Azure Databricks уровня "Премиум" на 14 дней.

## <a name="create-a-virtual-network"></a>Создать виртуальную сеть

1. В портал Azure выберите **создать ресурс** > **сети** > **Виртуальная сеть**.

2. В разделе **Создание виртуальной сети**примените следующие параметры. 

    |Параметр|Предлагаемое значение|Описание|
    |-------|---------------|-----------|
    |Название|Пошаговые руководства по работе с модулями|Выберите имя виртуальной сети.|
    |Адресное пространство|10.1.0.0/16|Диапазон адресов виртуальной сети в нотации CIDR.|
    |Подписка|\<Ваша подписка\>|Выберите подписку Azure, которую нужно использовать.|
    |Группа ресурсов|Пошаговые руководства по работе с модулями|Выберите **создать** и введите имя новой группы ресурсов для своей учетной записи.|
    |Местоположение|\<Выберите ближайший к пользователям регион\>|Выберите географическое расположение, в котором можно разместить виртуальную сеть. Используйте ближайшее к пользователям расположение.|
    |Имя подсети|значение по умолчанию|Выберите имя подсети по умолчанию в виртуальной сети.|
    |Диапазон адресов подсети|10.1.0.0/24|Диапазон адресов подсети в нотации CIDR. Он должен содержаться в адресном пространстве виртуальной сети. Невозможно изменить диапазон адресов используемой подсети.|

    ![Создание виртуальной сети на портал Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-virtual-network.png)

3. После завершения развертывания перейдите к виртуальной сети и выберите **адресное пространство** в разделе **Параметры**. В поле с текстом *добавить дополнительный диапазон адресов*, вставьте `10.179.0.0/16` и выберите **сохранить**.

    ![Адресное пространство виртуальной сети Azure](./media/quickstart-create-databricks-workspace-vnet-injection/add-address-space.png)

## <a name="create-an-azure-databricks-workspace"></a>Создание рабочей области Azure Databricks

1. В портал Azure выберите **создать ресурсы** > **аналитики** > ресурсов.

2. В разделе **Azure Databricks служба**примените следующие параметры.

    |Параметр|Предлагаемое значение|Описание|
    |-------|---------------|-----------|
    |Имя рабочей области|Пошаговые руководства по работе с модулями|Выберите имя рабочей области Azure Databricks.|
    |Подписка|\<Ваша подписка\>|Выберите подписку Azure, которую нужно использовать.|
    |Группа ресурсов|Пошаговые руководства по работе с модулями|Выберите ту же группу ресурсов, которая использовалась для виртуальной сети.|
    |Местоположение|\<Выберите ближайший к пользователям регион\>|Выберите то же расположение, что и для виртуальной сети.|
    |Ценовая категория|Выберите уровень "Стандартный" или "Премиум".|Дополнительные сведения о ценовых категориях см. на [странице цен](https://azure.microsoft.com/pricing/details/databricks/)на сведения о модулях данных.|
    |Развертывание рабочей области Azure Databricks в виртуальной сети|Да|Этот параметр позволяет развернуть рабочую область Azure Databricks в виртуальной сети.|
    |Виртуальная сеть|Пошаговые руководства по работе с модулями|Выберите виртуальную сеть, созданную в предыдущем разделе.|
    |Имя общедоступной подсети|общедоступная — подсеть|Используйте имя общедоступной подсети по умолчанию.|
    |Диапазон CIDR общедоступной подсети|10.179.64.0/18|Диапазон CIDR для этой подсети должен находиться в диапазоне от/18 до/26.|
    |Имя частной подсети|частный — подсеть|Используйте имя частной подсети по умолчанию.|
    |Диапазон CIDR для частной подсети|10.179.0.0/18|Диапазон CIDR для этой подсети должен находиться в диапазоне от/18 до/26.|

    ![Создание Azure Databricks рабочей области на портал Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-databricks-workspace.png)

3. После завершения развертывания перейдите к ресурсу Azure Databricks. Обратите внимание, что пиринг виртуальной сети отключен. Также обратите внимание на группу ресурсов и управляемую группу ресурсов на странице Обзор. 

    ![Обзор Azure Databricks в портал Azure](./media/quickstart-create-databricks-workspace-vnet-injection/databricks-overview-portal.png)

    Управляемая группа ресурсов содержит физическое расположение учетной записи хранения (DBFS), Worker-SG (группа безопасности сети), Workers-vnet (виртуальная сеть). Это также расположение, в котором будут создаваться виртуальные машины, диск, IP-адрес и сетевой интерфейс. Эта группа ресурсов заблокирована по умолчанию. Однако при запуске кластера в виртуальной сети создается сетевой интерфейс между рабочими процессами в управляемой группе ресурсов и виртуальной сетью "концентратор".

    ![Управляемая группа ресурсов Azure Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/managed-resource-group.png)

## <a name="create-a-cluster"></a>Создание кластера

> [!NOTE]
> Чтобы использовать бесплатную учетную запись для создания кластера Azure Databricks, перед созданием кластера перейдите в свой профиль и измените свою подписку на **оплату по мере использования**. Дополнительные сведения см. на странице [создания бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

1. Вернитесь в службу Azure Databricks и выберите **запустить рабочую область** на странице **Обзор** .

2. Выберите **кластеры** >  **+ создать кластер**. Затем создайте имя кластера, например "кирпичы", " *Краткое руководство-кластер*", и примите оставшиеся параметры по умолчанию. Выберите **Создать кластер**.

    ![Создание кластера Azure Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/create-cluster.png)

3. После запуска кластера вернитесь в управляемую группу ресурсов в портал Azure. Обратите внимание на новые виртуальные машины, диски, IP-адреса и сетевые интерфейсы. Сетевой интерфейс создается в каждой общедоступной и частной подсетях с IP-адресами.  

    ![Azure Databricks управляемую группу ресурсов после создания кластера](./media/quickstart-create-databricks-workspace-vnet-injection/managed-resource-group2.png)

4. Вернитесь в рабочую область Azure Databricks и выберите созданный кластер. Затем перейдите на вкладку **исполнители** на странице **пользовательского интерфейса Spark** . Обратите внимание, что адреса драйвера и исполнителей находятся в диапазоне частных подсетей. В этом примере драйвер — 10.179.0.6, а исполнители — 10.179.0.4 и 10.179.0.5. IP-адреса могут отличаться.

    ![Azure Databricks исполнителей пользовательского интерфейса Spark](./media/quickstart-create-databricks-workspace-vnet-injection/databricks-sparkui-executors.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

Когда вы выполните задачи в статье, можно будет завершить работу кластера. Для этого в рабочей области Azure Databricks на панели слева выберите **Кластеры**. Для кластера, работу которого необходимо завершить, переместите указатель мыши на многоточие в столбце **Actions** (Действия) и выберите значок **Завершить**. Кластер будет остановлен.

Если не завершить работу кластера вручную, она завершится автоматически, если во время создания кластера вы установили флажок **Terminate after \_\_ minutes of inactivity** (Завершать работу после \_\_ мин бездействия). В этом случае работа кластера автоматически завершается, если он был неактивным в течение определенного времени.

Если вы не хотите повторно использовать кластер, можно удалить группу ресурсов, созданную в портал Azure.

## <a name="next-steps"></a>Следующие шаги

В этой статье вы создали кластер Spark в Azure Databricks, который был развернут в виртуальной сети. Перейдите к следующей статье, чтобы узнать, как выполнить запрос к контейнеру SQL Server Linux DOCKER в виртуальной сети с помощью JDBC из записной книжки Azure Databricks.  

> [!div class="nextstepaction"]
>[Запрос SQL Server контейнера DOCKER для Linux в виртуальной сети из записной книжки Azure Databricks](vnet-injection-sql-server.md)
