---
title: Создание рабочего пространства Azure Databricks в собственной виртуальной сети
description: В этой статье описывается, как развернуть Лазурные databricks в виртуальной сети.
services: azure-databricks
author: mamccrea
ms.author: mamccrea
ms.reviewer: jasonh
ms.service: azure-databricks
ms.topic: conceptual
ms.date: 03/23/2020
ms.openlocfilehash: 63dd1b4d9396d340dd17a7afb92ff9c38a2b38b3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80132674"
---
# <a name="quickstart-create-an-azure-databricks-workspace-in-your-own-virtual-network"></a>Быстрый запуск: Создание рабочего пространства Azure Databricks в вашей собственной виртуальной сети

Развертывание Azure Databricks по умолчанию создает новую виртуальную сеть, управляемую Databricks. Этот быстрый запуск показывает, как создать рабочее пространство Azure Databricks в собственной виртуальной сети. Вы также создаете кластер Apache Spark в этом рабочем пространстве. 

Для получения дополнительной информации о том, почему вы можете создать рабочее пространство Azure Databricks в собственной виртуальной сети, [см. Развертывание Azure Databricks в виртуальной сети Azure (VNet Injection)](https://docs.microsoft.com/azure/databricks/administration-guide/cloud-configurations/azure/vnet-inject).

Если у вас нет подписки На Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/databricks/).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портал Azure](https://portal.azure.com/).

> [!Note]
> Инструкции из этого руководство нельзя выполнять с **бесплатной пробной версией подписки**.
> Если у вас есть бесплатная учетная запись, перейдите к профилю и измените подписку на подписку с **оплатой по мере использования**. Дополнительные сведения см. на странице [создания бесплатной учетной записи Azure](https://azure.microsoft.com/free/). Затем [удалите предельную сумму расходов](https://docs.microsoft.com/azure/billing/billing-spending-limit#why-you-might-want-to-remove-the-spending-limit) и [запросите увеличение квоты](https://docs.microsoft.com/azure/azure-portal/supportability/resource-manager-core-quotas-request) на ЦП в своем регионе. При создании рабочей области Azure Databricks можно выбрать ценовую категорию **Пробная версия ("Премиум" — 14 дней бесплатно (DBU))** для предоставления рабочей области доступа к бесплатным DBU Azure Databricks уровня "Премиум" на 14 дней.

## <a name="create-a-virtual-network"></a>Создание виртуальной сети

1. В меню портала Azure выберите **Создать ресурс**. Затем выберите **Сетевая > Виртуальная сеть.**

    ![Создание виртуальной сети на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-virtual-network-portal.png)

2. При **создании виртуальной сети**применяйте следующие настройки: 

    |Параметр|Рекомендуемое значение|Описание|
    |-------|---------------|-----------|
    |Подписка|\<Ваша подписка\>|Выберите подписку Azure, которую нужно использовать.|
    |Группа ресурсов|databricks-быстрый старт|Выберите **Создать новое** и введите новое имя группы ресурсов для вашей учетной записи.|
    |name|databricks-быстрый старт|Выберите имя для виртуальной сети.|
    |Регион|\<Выберите ближайший к пользователям регион\>|Выберите географическое местоположение, где вы можете разместить свою виртуальную сеть. Используйте ближайшее к пользователям расположение.|

    ![Основы виртуальной сети на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-virtual-network.png)

3. Выберите **далее: IP-адреса >** и применить следующие настройки. Затем выберите **Обзор и создать**.
    
    |Параметр|Рекомендуемое значение|Описание|
    |-------|---------------|-----------|
    |Адресное пространство IPv4|10.2.0.0/16|Диапазон адресов виртуальной сети в обозначении CIDR. Диапазон CIDR должен быть между /16 и /24|
    |Имя подсети|default|Выберите имя для подсети по умолчанию в виртуальной сети.|
    |Диапазон адресов подсети|10.2.0.0/24|Диапазон адресов подсети в нотации CIDR. Она должна содержаться в адресном пространстве виртуальной сети. Диапазон адресов подсети, который используется, не может быть отредактирован.|

    ![Установка конфигураций IP для виртуальной сети на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-virtual-network-ip-config.png)

4. На вкладке **«Обзор» и «Создайте»** **для** развертывания виртуальной сети. После завершения развертывания перейдите в виртуальную сеть и выберите **пространство Адреса** в **настройках.** В поле, в которых говорится `10.179.0.0/16` *Добавить дополнительный диапазон адресов,* вставьте и выберите **Сохранить.**

    ![Пространство виртуального сетевого адреса Azure](./media/quickstart-create-databricks-workspace-vnet-injection/add-address-space.png)

## <a name="create-an-azure-databricks-workspace"></a>Создание рабочей области Azure Databricks

1. В меню портала Azure выберите **Создать ресурс**. Затем выберите **Аналитика > Databricks**.

    ![Создание рабочего пространства Azure Databricks на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-databricks-workspace-portal.png)

2. В **службе Azure Databricks**примените следующие настройки:

    |Параметр|Рекомендуемое значение|Описание|
    |-------|---------------|-----------|
    |имя рабочей области.|databricks-быстрый старт|Выберите имя для рабочего пространства Azure Databricks.|
    |Подписка|\<Ваша подписка\>|Выберите подписку Azure, которую нужно использовать.|
    |Группа ресурсов|databricks-быстрый старт|Выберите ту же группу ресурсов, что и для виртуальной сети.|
    |Расположение|\<Выберите ближайший к пользователям регион\>|Выберите то же место, что и виртуальная сеть.|
    |Ценовая категория|Вы можете выбрать уровень Стандартный или Премиум.|Для получения дополнительной информации о ценах уровней, [см.](https://azure.microsoft.com/pricing/details/databricks/)|

    ![Создание основ рабочего пространства Azure Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/create-databricks-workspace.png)

3. После того как вы закончите ввод настроек на странице **Basics,** выберите **Следующую: Сетевые >** и применить следующие настройки:

    |Параметр|Рекомендуемое значение|Описание|
    |-------|---------------|-----------|
    |Развертывание рабочего пространства Azure Databricks в виртуальной сети (VNet)|Да|Эта настройка позволяет развернуть рабочее пространство Azure Databricks в виртуальной сети.|
    |Виртуальная сеть|databricks-быстрый старт|Выберите виртуальную сеть, созданную в предыдущем разделе.|
    |Имя публичного подсетевого|публично-субнет|Используйте имя общедоступной подсети по умолчанию.|
    |Диапазон общественного подсетевого CIDR|10.179.64.0/18|Используйте диапазон CIDR до /26.|
    |Частное название подсети|частная субсеть|Используйте имя частной подсети по умолчанию.|
    |Диапазон частных подсетей CIDR|10.179.0.0/18|Используйте диапазон CIDR до /26.|

    ![Добавление информации VNet в рабочее пространство Azure Databricks на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-databricks-workspace-vnet-config.png)

3. После завершения развертывания перейдите к ресурсу Azure Databricks. Обратите внимание, что виртуальная сеть пиринга отключена. Также обратите внимание на группу ресурсов и управляемую группу ресурсов на странице обзора. 

    ![Обзор Данных Azure на портале Azure](./media/quickstart-create-databricks-workspace-vnet-injection/databricks-overview-portal.png)

    Управляемая группа ресурсов не изменяется и не используется для создания виртуальных машин. Создавать виртуальные машины можно только в группе ресурсов, которыми вы управляете.

    ![Управляемая группой ресурсов Azure Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/managed-resource-group.png)

    При сходе развертывания рабочего пространства рабочее пространство по-прежнему создается в неисправном состоянии. Удалите сбой рабочего пространства и создайте новое рабочее пространство, которое устраняет ошибки развертывания. При удалении неисправного рабочего пространства также удаляются управляемая группа ресурсов и все успешно развернутые ресурсы.

## <a name="create-a-cluster"></a>Создание кластера

> [!NOTE]
> Чтобы использовать бесплатную учетную запись для создания кластера Azure Databricks, перед созданием кластера перейдите в свой профиль и измените свою подписку на **оплату по мере использования**. Дополнительные сведения см. на странице [создания бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

1. Вернитесь в службу Данных Azure Databricks и выберите **рабочее пространство запуска** на странице **Обзор.**

2. Выберите **кластеры** > **и создайте кластер**. Затем создайте имя кластера, например *Databricks-quickstart-cluster,* и примите оставшиеся настройки по умолчанию. Выберите **Создать кластер**.

    ![Создание кластера Данных Azure](./media/quickstart-create-databricks-workspace-vnet-injection/create-cluster.png)

3. После запуска кластера вернитесь в управляемую группу ресурсов на портале Azure. Обратите внимание на новые виртуальные машины, диски, IP-адрес и сетевые интерфейсы. В каждой из публичных и частных подсетей с IP-адресами создается сетевой интерфейс.  

    ![Azure Databricks управлялгруппой ресурсов после создания кластера](./media/quickstart-create-databricks-workspace-vnet-injection/managed-resource-group2.png)

4. Вернитесь в рабочее пространство Azure Databricks и выберите созданный кластер. Затем перейдите на вкладку **Исполнители** на странице **ui Spark.** Обратите внимание, что адреса для водителя и исполнителей находятся в частном диапазоне подсетей. В этом примере водитель 10.179.0.6 и исполнители 10.179.0.4 и 10.179.0.5. Ваши IP-адреса могут быть разными.

    ![Исполнители ui-бай-адора Azure Databricks](./media/quickstart-create-databricks-workspace-vnet-injection/databricks-sparkui-executors.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

Когда вы выполните задачи в статье, можно будет завершить работу кластера. Для этого в рабочей области Azure Databricks на левой панели выберите **Кластеры**. Для кластера, работу которого необходимо завершить, переместите указатель мыши на многоточие в столбце **Actions** (Действия) и выберите значок **Завершить**. Это останавливает кластер.

Если вы не прекратите кластер вручную, он автоматически остановится, если вы выберете **Завершение \_ \_ после нескольких минут флажка бездействия** при создании кластера. В этом случае работа кластера автоматически завершается, если он был неактивным в течение определенного времени.

Если вы не хотите повторно использовать кластер, можно удалить группу ресурсов, созданную на портале Azure.

## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы создали кластер Spark в Azure Databricks, который был развернут в виртуальной сети. Перейти к следующей статье, чтобы узнать, как задать запрос на S'L Server Linux Docker контейнер ажиотажа в виртуальной сети с помощью JDBC из ноутбука Azure Databricks.  

> [!div class="nextstepaction"]
>[Запрос контейнера для Linux Docker в виртуальной сети из ноутбука Azure Databricks](vnet-injection-sql-server.md)
