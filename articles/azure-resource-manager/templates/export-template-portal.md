---
title: Шаблон экспорта на портале Azure
description: Используйте портал Azure для экспорта шаблона Менеджера ресурсов Azure из ресурсов в подписке.
ms.topic: conceptual
ms.date: 12/12/2019
ms.openlocfilehash: 8cdba58a7a2ba998bac7fc0225ff957047cd69b0
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79273739"
---
# <a name="single-and-multi-resource-export-to-a-template-in-azure-portal"></a>Экспорт одного и многоресурсного ресурса на шаблон на портале Azure

Чтобы помочь в создании шаблонов Azure Resource Manager, можно экспортировать шаблон из существующих ресурсов. Экспортированный шаблон поможет вам понять синтаксис JSON и свойства, которые развертывают ресурсы. Чтобы автоматизировать будущие развертывания, начните с экспортируемого шаблона и измените его для сценария.

Менеджер ресурсов позволяет выбрать один или несколько ресурсов для экспорта в шаблон. Вы можете сосредоточиться именно на ресурсах, необходимых в шаблоне.

В этой статье показано, как экспортировать шаблоны через портал. Вы также можете использовать [Azure CLI,](../management/manage-resource-groups-cli.md#export-resource-groups-to-templates) [Azure PowerShell](../management/manage-resource-groups-powershell.md#export-resource-groups-to-templates)или [REST API.](/rest/api/resources/resourcegroups/exporttemplate)

## <a name="choose-the-right-export-option"></a>Выберите правильный вариант экспорта

Шаблон можно экспортировать двумя способами:

* **Экспорт из ресурсной группы или ресурса**. Этот параметр генерирует новый шаблон из существующих ресурсов. Экспортированный шаблон является «снимком» текущего состояния группы ресурсов. Можно экспортировать всю группу ресурсов или конкретные ресурсы в рамках этой группы ресурсов.

* **Экспорт до развертывания или из истории**. Эта опция получает точную копию шаблона, используемого для развертывания.

В зависимости от выбранного варианта экспортированные шаблоны обладают различными качествами.

| Из группы ресурсов или ресурса | Перед развертыванием или из истории |
| --------------------- | ----------------- |
| Шаблон — это моментальный снимок текущего состояния ресурсов. Он включает в себя любые ручные изменения, внесенные после развертывания. | Шаблон показывает только состояние ресурсов во время развертывания. Любые изменения в руководстве, внесенные после развертывания, не включены. |
| Можно выбрать, какие ресурсы из группы ресурсов экспортировать. | Все ресурсы для конкретного развертывания включены. Нельзя выбрать подмножество этих ресурсов или добавить ресурсы, которые были добавлены в другое время. |
| Шаблон включает в себя все свойства ресурсов, включая некоторые свойства, которые обычно не устанавливали во время развертывания. Вы можете удалить или очистить эти свойства перед повторной использованием шаблона. | Шаблон включает в себя только свойства, необходимые для развертывания. Шаблон готов к использованию. |
| Шаблон, вероятно, не включает в себя все параметры, необходимые для повторного использования. Большинство значений свойств жестко закодированы в шаблоне. Чтобы передислоцировать шаблон в другие среды, необходимо добавить параметры, которые увеличивают возможность настройки ресурсов.  Вы можете не выбрать **Параметры включения,** чтобы можно было нарастать собственные параметры. | Шаблон включает параметры, которые упрощают передислокацию в различных средах. |

Экспорт шаблона из группы ресурсов или ресурса, когда:

* Необходимо уфиксировать изменения ресурсов, внесенных после первоначального развертывания.
* Вы хотите выбрать, какие ресурсы экспортируются.

Экспорт шаблона перед развертыванием или из истории, когда:

* Вам нужен простой в использовании шаблон.
* Вам не нужно включать изменения, внесенные после первоначального развертывания.

## <a name="limitations"></a>Ограничения

При экспорте из группы ресурсов или ресурса экспортируемый шаблон генерируется из [опубликованных схем](https://github.com/Azure/azure-resource-manager-schemas/tree/master/schemas) для каждого типа ресурсов. Иногда схема не имеет последней версии для типа ресурса. Проверьте экспортированный шаблон, чтобы убедиться, что он включает в себя свойства, которые вам нужны. При необходимости отспособите экспортированный шаблон, чтобы использовать необходимую версию API.

Функция шаблона экспорта не поддерживает экспорт ресурсов Azure Data Factory. Чтобы узнать о том, как можно экспортировать ресурсы Data Factory, [см.](https://aka.ms/exportTemplateViaAdf)

Для экспорта ресурсов, созданных с помощью классической модели развертывания, необходимо [перенести их в модель развертывания диспетчера ресурсов.](https://aka.ms/migrateclassicresourcetoarm)

## <a name="export-template-from-a-resource-group"></a>Шаблон экспорта из группы ресурсов

Экспорт одного или нескольких ресурсов из ресурсной группы:

1. Выберите группу ресурсов, содержащую ресурсы, которые необходимо экспортировать.

1. Выберите один или несколько ресурсов, выбрав флажки.  Чтобы выбрать все, выберите флажок слева от **имени.** Элемент меню **шаблона Экспорт** становится включенным только после того, как вы выбрали хотя бы один ресурс.

   ![Экспорт всех ресурсов](./media/export-template-portal/select-all-resources.png)

    На скриншоте выбирается только учетная запись хранилища.
1. Выберите **Экспортировать шаблон**.

1. Экспортированный шаблон отображается и доступен для загрузки и развертывания.

   ![Отображение шаблона](./media/export-template-portal/show-template.png)

   **Включить параметры** выбраны по умолчанию.  При выборе все параметры шаблона будут включены при спрошечке шаблона. Если вы хотите создать свои собственные параметры, переключите этот флажок, чтобы не включать их.

## <a name="export-template-from-a-resource"></a>Шаблон экспорта с ресурса

Экспорт одного ресурса:

1. Выберите группу ресурсов, содержащую ресурс, который вы хотите экспортировать.

1. Выберите ресурс, который необходимо экспортировать, чтобы открыть ресурс.

1. Для этого ресурса выберите **шаблон Экспорт** аименной левой панели.

   ![Экспортный ресурс](./media/export-template-portal/export-single-resource.png)

1. Экспортированный шаблон отображается и доступен для загрузки и развертывания. Шаблон содержит только один ресурс. **Включить параметры** выбраны по умолчанию.  При выборе все параметры шаблона будут включены при спрошечке шаблона. Если вы хотите создать свои собственные параметры, переключите этот флажок, чтобы не включать их.

## <a name="export-template-before-deployment"></a>Шаблон экспорта перед развертыванием

1. Выберите службу Azure, которая необходимо развернуть.

1. Заполните значения для новой службы.

1. После прохождения проверки, но перед началом развертывания, выберите **Скачать шаблон для автоматизации.**

   ![Скачивание шаблона](./media/export-template-portal/download-before-deployment.png)

1. Шаблон отображается и доступен для скачивания и развертывания.


## <a name="export-template-after-deployment"></a>Шаблон экспорта после развертывания

Можно экспортировать шаблон, который использовался для развертывания существующих ресурсов. Шаблон, который вы получаете, именно тот, который был использован для развертывания.

1. Выберите группу ресурсов, которые вы хотите экспортировать.

1. Выберите ссылку под **развертыванием.**

   ![Выберите историю развертывания](./media/export-template-portal/select-deployment-history.png)

1. Выберите одно из развертываний из истории развертывания.

   ![Выбор развертывания](./media/export-template-portal/select-details.png)

1. Выберите **шаблон**. Шаблон, используемый для этого развертывания отображается и доступен для скачивания.

   ![Выбор шаблона](./media/export-template-portal/show-template-from-history.png)

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как экспортировать шаблоны с [помощью Azure CLI,](../management/manage-resource-groups-cli.md#export-resource-groups-to-templates) [Azure PowerShell](../management/manage-resource-groups-powershell.md#export-resource-groups-to-templates)или [REST API.](/rest/api/resources/resourcegroups/exporttemplate)
- Чтобы узнать синтаксис шаблона управления ресурсами, [см.](template-syntax.md)
- Чтобы узнать, как разрабатывать шаблоны, смотрите [пошаговые учебники](/azure/azure-resource-manager/).
- Для просмотра схем шаблонов шаблонов Azure Resource Manager [см.](/azure/templates/)
