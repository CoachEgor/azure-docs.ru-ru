---
title: Перемещение классического развертывания ресурсов в новую группу ресурсов или подписку
description: Используйте Azure Resource Manager для перемещения Классическая модель развертывания ресурсов в новую группу ресурсов или подписки.
author: tfitzmac
ms.service: azure-resource-manager
ms.topic: conceptual
ms.date: 07/09/2019
ms.author: tomfitz
ms.openlocfilehash: 4770f957b6b9eea75b50776a7491b1ca479e50e2
ms.sourcegitcommit: dad277fbcfe0ed532b555298c9d6bc01fcaa94e2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/10/2019
ms.locfileid: "67723510"
---
# <a name="move-guidance-for-classic-deployment-model-resources"></a>Переместить рекомендации для ресурсов модели классического развертывания

Действия, чтобы переместить ресурсы, развернутые с помощью классической модели зависят от ли вы перемещаете ресурсы в подписке или в новую подписку.

## <a name="move-in-the-same-subscription"></a>Переместить в той же подписке

При перемещении ресурсов из одной группы ресурсов в другую в пределах одной подписки действуют следующие ограничения.

* Нельзя перемещать виртуальные сети (классические).
* Виртуальные машины (классические) необходимо перемещать с облачной службой.
* Облачную службу можно перемещать только в тех случаях, когда перемещение включает в себя все виртуальные машины этой службы.
* Одновременно можно перемещать только одну облачную службу.
* Одновременно можно перемещать только одну учетную запись хранения (классическую).
* Нельзя перемещать учетную запись хранения (классическую) в рамках одной операции с виртуальной машиной или облачной службой.

Для перемещения классических ресурсов в новую группу ресурсов в той же подписке, используйте [стандартные операции перемещения](../resource-group-move-resources.md) через портал, Azure PowerShell, Azure CLI или REST API. При этом используются те же операции, что и для перемещения ресурсов Resource Manager.

## <a name="move-across-subscriptions"></a>Перемещение между подписками

При перемещении ресурсов в новую подписку действуют следующие ограничения.

* Все классические ресурсы в подписке необходимо переместить в рамках одной операции.
* Целевая подписка не должна содержать никаких других классических ресурсов.
* Перемещение можно запросить только через отдельный интерфейс REST API для классических перемещений. Стандартные команды перемещения Resource Manager не работают, если перемещение классических ресурсов осуществляется в новую подписку.

Для перемещения классических ресурсов в новую подписку используйте операции REST, предназначенные для классических ресурсов. Чтобы использовать REST, выполните следующие действия:

1. Проверьте, может ли исходная подписка участвовать в перемещении между подписками. Выполните такую операцию:

   ```HTTP
   POST https://management.azure.com/subscriptions/{sourceSubscriptionId}/providers/Microsoft.ClassicCompute/validateSubscriptionMoveAvailability?api-version=2016-04-01
   ```

     Включите в текст запроса такой код:

   ```json
   {
    "role": "source"
   }
   ```

     Ответ на операцию проверки имеет следующий формат:

   ```json
   {
    "status": "{status}",
    "reasons": [
      "reason1",
      "reason2"
    ]
   }
   ```

1. Проверьте, может ли целевая подписка участвовать в перемещении между подписками. Выполните такую операцию:

   ```HTTP
   POST https://management.azure.com/subscriptions/{destinationSubscriptionId}/providers/Microsoft.ClassicCompute/validateSubscriptionMoveAvailability?api-version=2016-04-01
   ```

     Включите в текст запроса такой код:

   ```json
   {
    "role": "target"
   }
   ```

     Ответ будет в том же формате, что и проверка исходной подписки.
1. Если обе подписки пройдут проверку, переместите все классические ресурсы из одной подписки в другую, выполнив следующее действие:

   ```HTTP
   POST https://management.azure.com/subscriptions/{subscription-id}/providers/Microsoft.ClassicCompute/moveSubscriptionResources?api-version=2016-04-01
   ```

    Включите в текст запроса такой код:

   ```json
   {
    "target": "/subscriptions/{target-subscription-id}"
   }
   ```

Операция может занять несколько минут.

## <a name="next-steps"></a>Следующие шаги

Если вы испытываете перемещение классических ресурсов, обратитесь в службу [поддержки](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/overview).

Команды для перемещения ресурсов см. в статье [Перемещение ресурсов в новую группу ресурсов или подписку](../resource-group-move-resources.md).
