---
title: Запрос JIT-доступа
description: Описывает, как издатели управляемых приложений Azure запрашивают JIT-доступ к управляемому приложению.
author: MSEvanhi
ms.topic: conceptual
ms.date: 06/03/2019
ms.author: evanhi
ms.openlocfilehash: 7f475774828bcaecd471e13de994b156041323ed
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "75651388"
---
# <a name="enable-and-request-just-in-time-access-for-azure-managed-applications"></a>Включение и запрос JIT-доступа для управляемых приложений Azure

Потребители управляемого приложения могут быть неохотно, чтобы предоставить вам постоянный доступ к управляемой группе ресурсов. Как издатель приложения Manager вы можете предпочесть, чтобы потребители точно знали, когда нужно получить доступ к управляемым ресурсам. Чтобы предоставить пользователям больший контроль над предоставлением доступа к управляемым ресурсам, управляемые приложения Azure предоставляют функцию, называемую JIT-доступом, которая сейчас находится на этапе предварительной версии.

JIT-доступ позволяет запрашивать доступ с повышенными привилегиями к ресурсам управляемого приложения для устранения неполадок или обслуживания. Вы всегда имеете доступ к ресурсам только для чтения, но на определенный период времени у вас может быть доступ более высокого уровня.

Рабочий процесс предоставления доступа:

1. Вы добавляете управляемое приложение в Marketplace и указываете, что JIT-доступ доступен.

1. Во время развертывания потребитель обеспечивает JIT-доступ для этого экземпляра управляемого приложения.

1. После развертывания потребитель может изменить параметры JIT-доступа.

1. Вы отправляете запрос на доступ, когда вам требуется устранить неполадки или обновить управляемые ресурсы.

1. Потребитель утверждает ваш запрос.

В этой статье рассматриваются действия, выполняемые издателями для обеспечения JIT-доступа и отправки запросов. Дополнительные сведения об утверждении запросов JIT-доступа см. [в статье утверждение JIT-доступа в управляемых приложениях Azure](approve-just-in-time-access.md).

## <a name="add-jit-access-step-to-ui"></a>Добавление шага JIT-доступа в пользовательский интерфейс

CreateUiDefinition.jsв файле в точности аналогичен файлу пользовательского интерфейса, созданному для постоянного доступа, за исключением того, что необходимо включить шаг, позволяющий клиентам включить JIT-доступ. Дополнительные сведения о публикации вашего первого предложения управляемого приложения в Azure Marketplace см. в статье [управляемые приложения Azure в Marketplace](publish-marketplace-app.md).

Чтобы обеспечить поддержку JIT-функции для вашего предложения, добавьте следующее содержимое в CreateUiDefinition.jsв файле:

В разделе "шаги":

```json
{
    "name": "jitConfiguration",
    "label": "JIT Configuration",
    "subLabel": {
        "preValidation": "Configure JIT settings for your application",
        "postValidation": "Done"
    },
    "bladeTitle": "JIT Configuration",
    "elements": [
        {
          "name": "jitConfigurationControl",
          "type": "Microsoft.Solutions.JitConfigurator",
          "label": "JIT Configuration"
        }
    ]
}
```
 
В выходных данных:

```json
"jitAccessPolicy": "[steps('jitConfiguration').jitConfigurationControl]"
```

> [!NOTE]
> JIT-доступ доступен в предварительной версии. Схема для JIT-конфигурации может измениться в будущих итерациях.

## <a name="enable-jit-access"></a>Включить JIT-доступ

При определении предложения в Marketplace убедитесь, что вы включили JIT-доступ.

1. Войдите на [портал облачной публикации](https://cloudpartner.azure.com).

1. Укажите значения для публикации управляемого приложения в Marketplace. Выберите **Да** , чтобы **включить JIT-доступ?**

   ![Включение JIT-доступа](./media/request-just-in-time-access/marketplace-enable.png)

Вы добавили в пользовательский интерфейс шаг JIT-конфигурации и включили JIT-доступ в предложении Marketplace. Когда клиенты развертывают управляемое приложение, они могут [включить JIT-доступ для своего экземпляра](approve-just-in-time-access.md#enable-during-deployment).

## <a name="request-access"></a>Запрос доступа

При необходимости доступа к управляемым ресурсам потребителя вы отправляете запрос на определенную роль, время и длительность. Затем потребитель должен утвердить запрос.

Чтобы отправить запрос на JIT-доступ, выполните следующие действия.

1. Выберите **JIT-доступ** для управляемого приложения, к которому необходимо получить доступ.

1. Выберите **подходящие роли**и щелкните **активировать** в столбце действие для нужной роли.

   ![Активировать запрос на доступ](./media/request-just-in-time-access/send-request.png)

1. В форме **Активация роли** выберите время начала и длительность активности роли. Выберите **активировать** , чтобы отправить запрос.

   ![Активировать доступ](./media/request-just-in-time-access/activate-access.png) 

1. Просмотрите уведомления, чтобы убедиться, что новый JIT-запрос успешно отправлен потребителю.

   ![Уведомление](./media/request-just-in-time-access/in-progress.png)

   Теперь необходимо подождать, пока потребитель [утвердит ваш запрос](approve-just-in-time-access.md#approve-requests).

1. Чтобы просмотреть состояние всех JIT-запросов для управляемого приложения, выберите **JIT-доступ** и **журнал запросов**.

   ![Просмотр состояния](./media/request-just-in-time-access/view-status.png)

## <a name="known-issues"></a>Известные проблемы

ИДЕНТИФИКАТОР субъекта учетной записи, запрашивающей JIT-доступ, должен явно включаться в определение управляемого приложения. Учетная запись не может быть включена только через группу, указанную в пакете. Это ограничение будет исправлено в следующем выпуске.

## <a name="next-steps"></a>Дальнейшие шаги

Дополнительные сведения о утверждении запросов на JIT-доступ см. в статье утверждение JIT-доступа [в управляемых приложениях Azure](approve-just-in-time-access.md).
