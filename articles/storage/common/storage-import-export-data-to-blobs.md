---
title: Использование службы "Импорт и экспорт Azure" для передачи данных в большие двоичные объекты Azure | Документация Майкрософт
description: Сведения о создании заданий импорта и экспорта на портале Azure для передачи данных в большие двоичные объекты Azure и из них.
author: alkohli
services: storage
ms.service: storage
ms.topic: article
ms.date: 04/08/2019
ms.author: alkohli
ms.subservice: common
ms.openlocfilehash: 82672136d6f9af50a3d91da2044f6e0ced4b44a6
ms.sourcegitcommit: 6f043a4da4454d5cb673377bb6c4ddd0ed30672d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2019
ms.locfileid: "65409364"
---
# <a name="use-the-azure-importexport-service-to-import-data-to-azure-blob-storage"></a>Использование службы "Импорт и экспорт Azure" для импорта данных в хранилище BLOB-объектов Azure

Эта статья содержит пошаговые инструкции по использованию службы "Импорт и экспорт Azure" для безопасного импорта больших объемов данных в хранилище BLOB-объектов Azure. Чтобы служба осуществила импорт данных в большие двоичные объекты Azure, нужно отправить в центр обработки данных Azure зашифрованные диски с данными.  

## <a name="prerequisites"></a>Технические условия

Прежде чем создавать задание импорта для передачи данных в хранилище BLOB-объектов Azure, внимательно просмотрите и выполните описанные ниже предварительные требования для этой службы. Необходимо следующее:

- Активная подписка Azure, которую можно использовать для службы "Импорт и экспорт".
- Хотя бы одна учетная запись хранения Azure с контейнером хранилища. Просмотрите список [поддерживаемых типов хранилища и учетных записей хранения для службы "Импорт и экспорт"](storage-import-export-requirements.md). 
    - Сведения о создании учетной записи хранения см. в разделе [Создание учетной записи хранения](storage-quickstart-create-account.md). 
    - Сведения о контейнере хранилища см. в статье [о создании контейнера хранилища](../blobs/storage-quickstart-blobs-portal.md#create-a-container).
- Соответствующее количество дисков [поддерживаемых типов](storage-import-export-requirements.md#supported-disks). 
- Система с ОС Windows [поддерживаемой версии](storage-import-export-requirements.md#supported-operating-systems). 
- Включить технологию BitLocker в системе Windows. Дополнительные сведения о включении BitLocker см. в [этой статье](https://thesolving.com/storage/how-to-enable-bitlocker-on-windows-server-2012-r2/).
- [Скачайте WAImportExport версии 1](https://aka.ms/waiev1) в систему Windows. Распакуйте содержимое в папку по умолчанию: `waimportexportv1`. Например, `C:\WaImportExportV1`.
- Учетная запись FedEx или DHL. Если вы хотите использовать поставщика почтовых услуг, отличного от FedEx или DHL, обратитесь в службу Operations поле данных Azure в `adbops@microsoft.com`.  
    - Учетная запись должна быть действительной, иметь баланс и возможности возврата.
    - Создайте номер отслеживания для задания экспорта.
    - Каждое задание должно иметь отдельный номер отслеживания. Несколько заданий с одним и тем же номером отслеживания не поддерживаются.
    - Если у вас нет учетной записи оператора, перейдите по ссылке:
        - [Создать учетную запись FedEX](https://www.fedex.com/en-us/create-account.html) или 
        - [Создать учетную запись DHL](http://www.dhl-usa.com/en/express/shipping/open_account.html).

## <a name="step-1-prepare-the-drives"></a>Шаг 1. Подготовка дисков

На этом шаге создается файл журнала. В файле журнала хранятся основные сведения, например серийный номер диска, ключ шифрования и сведения об учетной записи хранения. 

Выполните следующие действия для подготовки дисков.

1.  Подключите свои диски к системе Windows с использованием соединителей SATA.
1.  Создайте один том NTFS на каждом диске. Присвойте ему букву диска. Не используйте точки подключения.
2.  Включите шифрование BitLocker в томе NTFS. Если используется система Windows Server, используйте инструкции из статьи [о включении BitLocker в Windows Server 2012 R2](https://thesolving.com/storage/how-to-enable-bitlocker-on-windows-server-2012-r2/).
3.  Скопируйте данные в зашифрованный том. Используйте перетаскивание, программу Robocopy или аналогичное средство копирования.
4.  Откройте окно PowerShell или окно командной строки с правами администратора. Чтобы перейти в распакованную папку, выполните следующую команду:
    
    `cd C:\WaImportExportV1`
5.  Чтобы получить ключ BitLocker диска, выполните следующую команду:
    
    `manage-bde -protectors -get <DriveLetter>:`
6.  Чтобы подготовить диск, выполните следующую команду. **В зависимости от размера данных это может занять от нескольких часов до нескольких дней.** 

    ```
    ./WAImportExport.exe PrepImport /j:<journal file name> /id:session#<session number> /sk:<Storage account key> /t:<Drive letter> /bk:<BitLocker key> /srcdir:<Drive letter>:\ /dstdir:<Container name>/ /skipwrite 
    ```
    Файл журнала создается в той же папке, где вы запустили средство. Также создаются два других файла: файл *XML* (папка, в которой выполняется средство) и файл *drive-manifest.xml* (папка, в которой хранятся данные).
    
    В следующей таблице описаны параметры, используемые в этой команде.

    |Параметр  |Описание  |
    |---------|---------|
    |/j:     |Имя файла журнала с расширением .jrn. Файл журнала создается для каждого диска. Рекомендуем использовать в качестве имени файла журнала серийный номер диска.         |
    |/id:     |Идентификатор сеанса. Используйте уникальный номер сеанса для каждого экземпляра команды.      |
    |/sk:     |Ключ учетной записи хранения Azure.         |
    |/t:     |Буква отправляемого диска. Например, диск `D`.         |
    |/bk:     |Ключ BitLocker для диска. Числовой пароль из выходных данных `manage-bde -protectors -get D:`      |
    |/srcdir:     |Буква отправляемого диска и `:\`. Например, `D:\`.         |
    |/dstdir:     |Имя целевого контейнера в службе хранилища Azure.         |
    |/skipwrite:     |Параметр, который указывает, что новые данные не требуется копировать и что на диске нужно подготовить существующие данные.          |
7. Повторите предыдущий шаг для каждого диска, который необходимо отправить. Файл журнала с предоставленным именем создается при каждом запуске командной строки.
    
    > [!IMPORTANT]
    > - Вместе с файлом журнала в той же папке, где находится средство, также создается файл `<Journal file name>_DriveInfo_<Drive serial ID>.xml`. XML-файл используется вместо файла журнала при создании задания, если файл журнала слишком велик. 

## <a name="step-2-create-an-import-job"></a>Шаг 2. Создать задание импорта

Чтобы создать задание импорта на портале Azure, выполните следующие шаги.

1. Войдите в систему по адресу https://portal.azure.com/.
2. Выберите пункты **Все службы > Хранилище > Задания импорта и экспорта**. 
    
    ![Перейдите к разделу "Задания импорта или экспорта"](./media/storage-import-export-data-to-blobs/import-to-blob1.png)

3. Нажмите кнопку **Create Import/export Job** (Создать задание импорта или экспорта).

    ![Нажмите кнопку "Создание задания импорта и экспорта".](./media/storage-import-export-data-to-blobs/import-to-blob2.png)

4. В разделе **Основные сведения**:

   - Выберите **Импорт в Azure**.
   - Введите описательное имя для задания импорта. Вы будете использовать его для отслеживания хода выполнения заданий.
       - Имя может содержать только строчные буквы, цифры и дефисы.
       - Имя должно начинаться с буквы и не может содержать пробелы.
   - Выберите подписку.
   - Укажите или выберите группу ресурсов.  

     ![Создание задания импорта — шаг 1](./media/storage-import-export-data-to-blobs/import-to-blob3.png)

3. В разделе **Сведения о задании** сделайте следующее:

    - Передайте файлы журналов диска, полученные на этапе подготовки диска. В случае использования `waimportexport.exe version1` необходимо передать один файл для каждого подготовленного диска. Если размер файла журнала превышает 2 МБ, то можно использовать `<Journal file name>_DriveInfo_<Drive serial ID>.xml`, который также создан с использованием файла журнала. 
    - Выберите целевую учетную запись хранения, где будут храниться данные. 
    - Расположение места назначения автоматически заполняется с учетом выбранного региона учетной записи хранения.
   
   ![Создание задания импорта — шаг 2](./media/storage-import-export-data-to-blobs/import-to-blob4.png)

4. В разделе **Сведения о возврате** сделайте следующее:

   - В раскрывающемся списке выберите перевозчика. Если вы хотите использовать поставщика почтовых услуг, отличного от FedEx или DHL, выберите существующий параметр из раскрывающегося списка. Контактные операции поле данных в Azure team в `adbops@microsoft.com` с информацией о компании-перевозчика вы планируете использовать.
   - Введите допустимый номер учетной записи, созданный в системе этого перевозчика. Корпорация Майкрософт использует эту учетную запись для отправки дисков обратно после завершения задания импорта. Если у вас нет номера учетной записи, создайте учетную запись перевозчика [FedEx](https://www.fedex.com/us/oadr/) или [DHL](https://www.dhl.com/).
   - Укажите полное и допустимое имя контактного лица, телефон, адрес электронной почты, адрес, город, почтовый индекс, страну (провинцию) и страну (регион). 
        
       > [!TIP] 
       > Вместо указания адреса электронной почты для отдельного пользователя укажите электронную почту группы. Это гарантирует, что вы получите уведомления, даже если администратор уйдет.

     ![Создание задание импорта – шаг 3](./media/storage-import-export-data-to-blobs/import-to-blob5.png)
   
5. В разделе **Сводка** сделайте следующее:

   - Просмотрите сведения о задании, предоставленные в сводке. Запишите имя задания и адрес центра обработки данных Azure для отправки дисков обратно в Azure. Эта информация указывается позже на транспортной этикетке.
   - Нажмите кнопку **ОК**, чтобы создать задание импорта.

     ![Создание задания импорта — шаг 4](./media/storage-import-export-data-to-blobs/import-to-blob6.png)

## <a name="step-3-ship-the-drives"></a>Шаг 3. Отправка дисков 

[!INCLUDE [storage-import-export-ship-drives](../../../includes/storage-import-export-ship-drives.md)]


## <a name="step-4-update-the-job-with-tracking-information"></a>Шаг 4. Указание данных об отслеживании для задания

[!INCLUDE [storage-import-export-update-job-tracking](../../../includes/storage-import-export-update-job-tracking.md)]

## <a name="step-5-verify-data-upload-to-azure"></a>Шаг 5. Проверка передачи данных в Azure

Отслеживание задания до завершения. После завершения задания убедитесь, что данные переданы в Azure. Удалите локальные данные только после подтверждения, что загрузка прошла успешно.

## <a name="next-steps"></a>Дальнейшие действия

* [Просмотр состояния задания и диска](storage-import-export-view-drive-status.md)
* [Сведения о требованиях службы "Импорт и экспорт"](storage-import-export-requirements.md)


