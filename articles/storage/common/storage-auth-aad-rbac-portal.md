---
title: Используйте портал Azure для присвоения роли RBAC для доступа к данным
titleSuffix: Azure Storage
description: Узнайте, как использовать портал Azure для присвоения разрешений директору службы безопасности Active Directory с помощью элемента управления доступом на основе ролей (RBAC). Azure Storage поддерживает встроенные и пользовательские роли RBAC для проверки подлинности через Azure AD.
services: storage
author: tamram
ms.service: storage
ms.topic: how-to
ms.date: 01/10/2020
ms.author: tamram
ms.reviewer: cbrooks
ms.subservice: common
ms.openlocfilehash: ec32990513d9199c4aaccf1bcfcbf76f348f877b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75867505"
---
# <a name="use-the-azure-portal-to-assign-an-rbac-role-for-access-to-blob-and-queue-data"></a>Используйте портал Azure, чтобы назначить роль RBAC для доступа к данным о каплях и очередях

Azure Active Directory (Azure AD) разрешает права доступа к защищенным ресурсам с помощью [управления доступом на основе ролей (RBAC)](../../role-based-access-control/overview.md). Azure Storage определяет набор встроенных ролей R-БАК, которые охватывают общие наборы разрешений, используемых для доступа к данным капли или очереди.

Когда роль RBAC назначается директору безопасности Azure AD, Azure предоставляет доступ к этим ресурсам для этого принципа безопасности. Доступ может ограничиваться уровнем подписки, группой ресурсов, учетной записью хранения или отдельным контейнером или очередью. Директором безопасности Azure AD может быть пользователь, группа, директор службы приложений или [управляемый интимент для ресурсов Azure.](../../active-directory/managed-identities-azure-resources/overview.md)

В этой статье описывается, как использовать портал Azure для присвоения ролей RBAC. Портал Azure предоставляет простой интерфейс для присвоения ролей RBAC и управления доступом к ресурсам хранения данных. Можно также назначить роли RBAC для ресурсов blob и очереди с помощью инструментов командной строки Azure или apIs управления системой управления хранилищем Azure. Для получения дополнительной информации о роли RBAC для ресурсов хранения см. [Аутентификация доступа к каплям Azure и очередям с помощью Active Directory Azure.](storage-auth-aad.md) 

## <a name="rbac-roles-for-blobs-and-queues"></a>Роли RBAC для больших двоичных объектов и очередей

[!INCLUDE [storage-auth-rbac-roles-include](../../../includes/storage-auth-rbac-roles-include.md)]

## <a name="determine-resource-scope"></a>Определение сферы охвата ресурсов 

[!INCLUDE [storage-auth-resource-scope-include](../../../includes/storage-auth-resource-scope-include.md)]

## <a name="assign-rbac-roles-using-the-azure-portal"></a>Назначить роли RBAC с помощью портала Azure

После определения подходящей области для назначения ролей перейдите на этот ресурс на портале Azure. Отобразите настройки **управления доступом (IAM)** для ресурса и следуйте этим инструкциям для управления назначениями ролей:

1. Назначайте соответствующую роль Azure Storage RBAC для предоставления доступа к принципу безопасности Azure AD.

1. Назначаем роль [чтения](../../role-based-access-control/built-in-roles.md#reader) ресурсов Azure Reader пользователям, которым необходимо получить доступ к контейнерам или очередям через портал Azure, используя свои учетные данные Azure AD. 

В следующих разделах описанкаждый каждый из этих шагов более подробно.

> [!NOTE]
> Как владельцу учетной записи хранения Azure вам автоматически не назначаются разрешения на доступ к данным. Для службы хранилища Azure вы должны назначить себе роль RBAC явным образом. Вы можете назначить ее на уровне подписки, группы ресурсов, учетной записи хранения, контейнера или очереди.
>
> Нельзя присваивать роль, область действия контейнера или очереди, если учетная запись хранилища имеет иерархическое пространство имен.

### <a name="assign-a-built-in-rbac-role"></a>Назначить встроенную роль RBAC

Прежде чем назначить роль доверителя службы безопасности, обязательно рассмотрите область действия разрешений, которые вы предоставляете. Просмотрите раздел [«Определение области ресурсов»](#determine-resource-scope) для определения соответствующего объема.

В приведенной здесь процедуре назначается роль, ограниченная областью контейнера, но вы можете выполнить те же действия для назначения роли, ограниченной областью очереди: 

1. На [портале Azure](https://portal.azure.com)перейдите на свой аккаунт хранения и отобразите **обзор** учетной записи.
1. В разделе "Службы" выберите **BLOB-объекты**. 
1. Найдите контейнер, для которого нужно назначить роль, и откройте его параметры. 
1. Выберите **Управление доступом (IAM)**, чтобы отобразить параметры управления доступом для контейнера. Выберите вкладку **Назначения ролей**, чтобы просмотреть список назначений ролей.

    ![Скриншот, показывающий параметры управления доступом к контейнеру](media/storage-auth-aad-rbac-portal/portal-access-control-for-storage.png)

1. Нажмите кнопку **Добавить назначение ролей**, чтобы добавить новую роль.
1. В окне **назначения роли Добавить** выберите роль хранения Azure, которую необходимо назначить. Затем ищите, чтобы найти принцип безопасности, которому вы хотите назначить эту роль.

    ![Снимок экрана, на котором показано, как назначить роль RBAC](media/storage-auth-aad-rbac-portal/add-rbac-role.png)

1. Нажмите **Сохранить**. Удостоверение, которому назначена роль RBAC, будет отображаться в списке под этой ролью. Например, на следующем изображении показано, что у добавленных пользователей теперь есть разрешения на чтение для данных в контейнере с именем *sample-container*.

    ![Скриншот, показывающий список пользователей, назначенных на роль](media/storage-auth-aad-rbac-portal/container-scoped-role.png)

Можно выполнить аналогичные действия, чтобы назначить роль, область охватываемой учетной записью хранения, группой ресурсов или подпиской.

### <a name="assign-the-reader-role-for-portal-access"></a>Назначить роль читателя для доступа к порталу

При присвоении встроенной или пользовательской роли для Хранилища Azure принципу безопасности вы предоставляете разрешения этому директору безопасности для выполнения операций по данным в учетной записи хранилища. Встроенные роли **чтения данных** предоставляют разрешения на чтение данных в контейнере или очереди, в то время как встроенные роли **вкладчика данных** предоставляют разрешения на чтение, запись и удаление в контейнер или очередь. Разрешения присваиваются указанному ресурсу.  
Например, если вы назначаете роль **вкладчика Хранилища данных** пользователю Mary на уровне контейнера с именем **образец-контейнер,** то Мэри предоставляется читать, писать и удалять доступ ко всем каплям в этом контейнере.

Однако, если Мэри хочет просмотреть каплю на портале Azure, то роль **вкладчика хранилища данных** сама по себе не даст достаточных разрешений для навигации по порталу к каплей для его просмотра. Для навигации по порталу и просмотра других видимых там ресурсов требуются дополнительные разрешения Azure AD.

Если пользователям необходимо иметь доступ к каплям на портале Azure, назначьте им дополнительную роль RBAC, роль [Reader,](../../role-based-access-control/built-in-roles.md#reader) этим пользователям, на уровне учетной записи хранилища или выше. Роль **Reader** — это роль менеджера ресурсов Azure, которая позволяет пользователям просматривать ресурсы учетной записи хранения, но не изменять их. Он не предоставляет разрешения на чтение данных в хранилище Azure, а только для ресурсов управления учетными данными.

Выполните следующие действия, чтобы назначить роль **Reader,** чтобы пользователь мог получить доступ к каплям с портала Azure. В этом примере назначение присваивается учетной записи хранилища:

1. Войдите в свою учетную запись хранения на [портале Azure](https://portal.azure.com).
1. Выберите **Управление доступом (IAM)**, чтобы отобразить параметры управления доступом для учетной записи хранения. Выберите вкладку **Назначения ролей**, чтобы просмотреть список назначений ролей.
1. В окне **назначения роли Добавить** выберите роль **Читателя.** 
1. Из поля **Назначение доступа к** выберите **пользователя, группу или субъект-службу Azure AD**.
1. Поиск, чтобы найти принцип безопасности, которому вы хотите назначить роль.
1. Сохраните назначение роли.

Назначение роли **Reader** необходимо только пользователям, которым необходимо получить доступ к каплям или очередям с помощью портала Azure.

> [!IMPORTANT]
> Предварительная версия Системы хранения на портале Azure не поддерживает использование учетных данных Azure AD для просмотра и изменения данных капли или очереди. Исследователь хранения данных на портале Azure всегда использует ключи учетной записи для доступа к данным. Чтобы использовать исследователь хранения на портале Azure, необходимо назначить роль, которая включает в себя **Microsoft.Storage/storageAccounts/listkeys/action.**

## <a name="next-steps"></a>Дальнейшие действия

- Для получения дополнительной информации о роли RBAC для ресурсов хранения см. [Аутентификация доступа к каплям Azure и очередям с помощью Active Directory Azure.](storage-auth-aad.md) 
- Дополнительные сведения см. в статье [Что такое управление доступом на основе ролей (RBAC)?](../../role-based-access-control/overview.md)
- Чтобы узнать, как назначать роли RBAC и управлять назначениями ролей с помощью Azure PowerShell, Azure CLI или REST API, см. сведения в статьях ниже:
    - [Управление доступом на основе ролей с помощью Azure PowerShell](../../role-based-access-control/role-assignments-powershell.md)
    - [Управление доступом на основе ролей с помощью интерфейса командной строки Azure](../../role-based-access-control/role-assignments-cli.md)
    - [Управление доступом на основе ролей с помощью REST API](../../role-based-access-control/role-assignments-rest.md)
- Чтобы узнать об авторизации доступа к контейнерам и очередям из приложений службы хранилища, ознакомьтесь со статьей об [аутентификации с помощью Azure Active Directory из приложения службы хранилища Azure (предварительная версия)](storage-auth-aad-app.md).
