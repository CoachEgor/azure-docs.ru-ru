---
title: азкопия копии Документы Майкрософт
description: В этой статье содержится справочная информация для команды копии azcopy.
author: normesta
ms.service: storage
ms.topic: reference
ms.date: 04/10/2020
ms.author: normesta
ms.subservice: common
ms.reviewer: zezha-msft
ms.openlocfilehash: 0325a71fb069f3d96f05d106afac1639fc38fe42
ms.sourcegitcommit: 8dc84e8b04390f39a3c11e9b0eaf3264861fcafc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2020
ms.locfileid: "81253345"
---
# <a name="azcopy-copy"></a>azcopy copy

Копии исходных данных в пункт назначения.

## <a name="synopsis"></a>Краткий обзор

Копии исходных данных в пункт назначения. Поддерживаемые направления:

  - местная <-> Azure Blob (SAS или OAuth authentication)
  - локальные <-> Azure Files (Проверка подлинности Share/directory SAS)
  - местная аутентификация < > ADLS Gen 2 (SAS, OAuth или SharedKey authentication)
  - Azure Blob (SAS или public) -> Azure Blob (SAS или OAuth authentication)
  - Azure Blob (SAS или public) -> Лазурные файлы (SAS)
  - Файлы Azure (SAS) - > файлов Azure (SAS)
  - Лазурные файлы (SAS) -> Azure Blob (SAS или OAuth authentication)
  - AWS S3 (ключ доступа) -> Azure Block Blob (SAS или OAuth authentication)

Пожалуйста, обратитесь к примерам для получения дополнительной информации.

## <a name="related-conceptual-articles"></a>Похожие концептуальные статьи

- [Get started with AzCopy](storage-use-azcopy-v10.md) (Начало работы с AzCopy)
- [Передача данных с помощью хранилища AzCopy и Blob](storage-use-azcopy-blobs.md)
- [Transfer data with AzCopy and file storage](storage-use-azcopy-files.md) (Передача данных с помощью AzCopy и хранилища файлов)
- [Configure, optimize, and troubleshoot AzCopy](storage-use-azcopy-configure.md) (Настройка, оптимизация и устранение неполадок с AzCopy)

## <a name="advanced"></a>Дополнительно

AzCopy автоматически обнаруживает тип содержимого файлов при загрузке с локального диска, основываясь на расширении файла или содержимом (если расширение не указано).

Встроенная таблица поиска мала, но на Unix, она дополнена файлом mime.types локальной системы( если она доступна под одним или более из этих имен:

- /etc/mime.types
- /etc/apache2/mime.types
- /etc/apache/mime.types

На Windows типы MIME извлекаются из реестра. Эту функцию можно отключить с помощью флага. Пожалуйста, обратитесь к разделу флага.

Если вы установите переменную среды с помощью командной строки, эта переменная будет читаема в истории командной строки. Рассмотрите возможность очистки переменных, содержащих учетные данные из истории командной строки. Чтобы не отображаться переменные в истории, можно использовать скрипт, чтобы подсказать пользователю их учетные данные и установить переменную среды.

```
azcopy copy [source] [destination] [flags]
```

## <a name="examples"></a>Примеры

Загрузите один файл с помощью аутентификации OAuth. Если вы еще не вошли в AzCopy, пожалуйста, запустите команду входа в Azcopy перед запуском следующей команды.

- azcopy cp "/path//file.txt" "https:/'account.blob.core.windows.net/"container"/

То же самое, как выше, но на этот раз также вычислить MD5 хэш содержимого файла и сохранить его в качестве свойства содержания-MD5 капли:

- azcopy cp "/path//file.txt" "https:/'account.blob.core.windows.net/"container"/'path///blob" --put-md5

Загрузите один файл с помощью токена SAS:

- azcopy cp "/path//file.txt" "https:/'account.blob.core.windows.net/'container)/'path///blob?? (САС) "

Загрузите один файл с помощью токена SAS и трубопроводов (только блок-капли):
  
- кошка "/путь/к/file.txt" azcopy cp "https:/'account.blob.core.windows.net/'container)/'path///blob?? (САС) "

Загрузите весь каталог с помощью токена SAS:
  
- azcopy cp "/path///dir" "https:/'account.blob.core.windows.net/"container"/"path///-directory"? (САС) "--рекурсивно-истинный

or

- azcopy cp "/path///dir" "https:/'account.blob.core.windows.net/"container"/"path///-directory"? (SAS) --рекурсивно-истинно --put-md5

Загрузите набор файлов с помощью маркера SAS и символов подстановочных знаков:

- azcopy cp "/path/*foo/* bar/.pdf" "https:/'account.blob.core.windows.net/"container"/'path/to//directory?? (САС) "

Загрузите файлы и каталоги с помощью маркеров SAS и символов подстановочных знаков:

- azcopy cp "/path/*foo/* bar" "https:/'account.blob.core.windows.net/"container"/'path///-directory?? (САС) "--рекурсивно-истинный

Загрузите один файл с помощью аутентификации OAuth. Если вы еще не вошли в AzCopy, пожалуйста, запустите команду входа в Azcopy перед запуском следующей команды.

- azcopy cp "https://'account'.blob.core.windows.net/"container"/'path///blob"" "/path//file.txt"

Загрузите один файл с помощью токена SAS:

- azcopy cp "https:/'account.blob.core.windows.net/'container)/'path///blob?? «SAS» «/путь/file.txt»

Скачать один файл с помощью маркера SAS, а затем трубопроводов вывода в файл (блокировать капли только):
  
- azcopy cp "https:/'account.blob.core.windows.net/'container)/'path///blob?? «SAS» > «/путь/к/file.txt»

Загрузите весь каталог с помощью токена SAS:
  
- azcopy cp "https:/'account.blob.core.windows.net/'container)/'path///directory»? «САС» «/путь/к/дир» --рекурсивное

Примечание об использовании символа подстановочного знака в URL-адресах:

Есть только два поддерживаемых способа использования символа подстановочных знаков в URL-. 

- Вы можете использовать один сразу после окончательного вперед слэш (/) URL. Это копирует все файлы в каталоге непосредственно к месту назначения, не размещая их в субдиректорию.

- Вы также можете использовать один во имя контейнера до тех пор, как URL относится только к контейнеру, а не капли. Этот подход можно использовать для получения файлов из подмножества контейнеров.

Загрузите содержимое каталога, не копируя сам каталог.

- azcopy cp "https:/'srcaccount.blob.core.windows.net/'container)/'path///folder)/?/ «САС» «/путь/к/дир»

Загрузите всю учетную запись хранилища.

- azcopy cp "https://'srcaccount.blob.core.windows.net/" "/path//dir" --рекурсивный

Загрузите подмножество контейнеров в учетную запись хранения, используя символ подстановочного знака в названии контейнера.

- azcopy cp "https://srcaccount.blob.core.windows.net/"container-name" "/path//dir" --recursive

Скопируйте одну каплю на другую каплю с помощью токена SAS.

- azcopy cp "https://srcaccount.blob.core.windows.net/"container"/'path///blob?? «САС»» (https://'destaccount).blob.core.windows.net/»контейнера»/»путь/к/blob»? (САС) "

Скопируйте одну каплю на другую каплю, используя токен SAS и токен OAuth. Вы должны использовать токен SAS в конце URL-адреса исходной учетной записи, но учетная запись назначения не нужна, если вы входите в AzCopy с помощью команды входа в Azcopy. 

- azcopy cp "https://srcaccount.blob.core.windows.net/"container"/'path///blob?? «САС» «https:/»destaccount.blob.core.windows.net/»контейнера/»путь/к/blob»»

Скопируйте один виртуальный каталог капли в другой с помощью токена SAS:

- azcopy cp "https:/'srcaccount.blob.core.windows.net/'container)/'path///directory»? «SAS»» (https:/.'destaccount).blob.core.windows.net/»контейнеры/»путь/к/каталогу»? (САС) "--рекурсивно-истинный

Копируйте все контейнеры с каплями, каталоги и капли с учетной записи хранилища на другой с помощью токена SAS:

- azcopy cp "https:/'srcaccount.blob.core.windows.net? «САС» «https:/»destaccount.blob.core.windows.net? (САС) "--рекурсивно-истинный

Скопируйте один объект для хранения Blob из Amazon Web Services (AWS) S3 с помощью ключа доступа и маркера SAS. Во-первых, установите переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника AWS S3.
  
- azcopy cphttps://s3.amazonaws.com/" (ковш) / "объект" "https:/'destaccount.blob.core.windows.net/'container)/'путь/к/blob?» (САС) "

Копируйте весь каталог для Blob Storage с помощью ключа доступа и маркера SAS. Во-первых, установите переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника AWS S3.

- azcopy cphttps://s3.amazonaws.com/" (ковш) / "folder" "https:/'destaccount.blob.core.windows.net/"контейнер"/"путь/к/каталогу"? (САС) "--рекурсивно-истинный

Пожалуйста, https://docs.aws.amazon.com/AmazonS3/latest/user-guide/using-folders.html обратитесь к лучше понять заполнитель «папка».

Копируйте все ведра для хранения Blob из Amazon Web Services (AWS) с помощью ключа доступа и маркера SAS. Во-первых, установите переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника AWS S3.

- azcopy cphttps://s3.amazonaws.com/" "https:/'destaccount.blob.core.windows.net? (САС) "--рекурсивно-истинный

Копируйте все ведра для хранения Blob из региона Amazon Web Services (AWS) с помощью ключа доступа и маркера SAS. Во-первых, установите переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника AWS S3.

- azcopy cphttps://s3-" (регион).amazonaws.com/" "https:/'destaccount.blob.core.windows.net? (САС) "--рекурсивно-истинный

Копируйте подмножество ведер, используя символ подстановочного знака (я) в названии ведра. Как и в предыдущих примерах, вам понадобится ключ доступа и маркер SAS. Убедитесь в том, чтобы установить переменную среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника AWS S3.

- azcopy cphttps://s3.amazonaws.com/" (ковш)/" "https:/'destaccount.blob.core.windows.net? (САС) "--рекурсивно-истинный

## <a name="options"></a>Параметры

**--Резервное копирование**                               Активирует SeBackupPrivilege Windows для загрузки, или SeRestorePrivilege для загрузки, чтобы позволить AzCopy видеть все файлы, независимо от их разрешений файловой системы, и восстановить все разрешения. Требуется, чтобы учетная запись под управлением AzCopy уже имеет эти разрешения (например, имеет права администратора или является членом группы "Операторы резервного копирования"). Все, что делает этот флаг, это активировать привилегии, которые учетная запись уже имеет.

**--blob-типа** строки Определяет тип капли в пункт назначения. Это используется для загрузки капли и при копировании между учетными записями (по умолчанию 'Detect'). Допустимые значения включают 'Detect', 'BlockBlob', 'PageBlob' и 'AppendBlob'. При копировании между учетными записями значение «Detect» заставляет AzCopy использовать тип исходной капли для определения типа капли назначения. При загрузке файла ,Detect' определяет, является ли файл VHD или файлом VHDX на основе расширения файла. Если файл является эфирным файлом VHD или VHDX, AzCopy рассматривает файл как каплю страницы. (по умолчанию "Обнаружение")

**--блок-blob-уровня** строки Загрузка блок капли прямо на [уровень доступа](../blobs/storage-blob-storage-tiers.md) по вашему выбору. (по умолчанию 'Нет'). Допустимые значения включают 'None', 'Hot', 'Cool' и 'Archive'. Если "Никто" или нет уровня пройден, капля унаследует уровень учетной записи хранилища.

**--блок-размер-mb** поплавок Используйте этот размер блока (указано в MiB) при загрузке в Хранилище Azure и загрузке из Azure Storage. Значение по умолчанию автоматически рассчитывается на основе размера файла. Разрешены десятичные фракции (например: 0,25).

**--строка управления кэшем** Установите заголовок управления кэшем. Вернулся на загрузку.

**--чек-длина**                         Проверьте длину файла в пункте назначения после передачи. При несоответствии между источником и пунктом назначения передача помечается как неудавшийся. (по умолчанию верно)

**--Check-md5** строка определяет, как строго MD5 хэши должны быть проверены при загрузке. Доступно только при загрузке. Доступные варианты: NoCheck, Logonly, FailifDifferent, FailifDifferentOrMissing. (по умолчанию "FailIfDifferent")

**--содержание-диспозиция** строка Установить содержание распоряжения заголовок. Вернулся на загрузку.

**--контент-кодирование строки** Установить содержание кодирования заголовок. Вернулся на загрузку.

**--содержание языка** строки Установить содержание языка заголовок. Вернулся на загрузку.

**строка типа контента** определяет тип содержимого файла. Подразумевает не-угадать-мим-типа. Вернулся на загрузку.

**--декомпресс**                           Автоматически распаковываетфайлные файлы при загрузке, если их кодирование содержимого указывает на то, что они сжаты. Поддерживаемые значения кодирования контента являются «gzip» и «сдувается». Файл расширения '.gz'/'''gzip' или '.zz' не являются необходимыми, но будут удалены, если присутствует.

**--исключить атрибуты строки** (только Windows) Исключить файлы, атрибуты которых соответствуют списку атрибутов. Например: A; S; R

**--исключить-blob-типа** строки Опционально определяет тип капли (BlockBlob / PageBlob / AppendBlob), чтобы исключить при копировании капли из контейнера или учетной записи. Использование этого флага не применимо для копирования данных из службы, не относящейся к обслуживанию лазурного обслуживания. Более одной капли должны быть разделены ';'.

**--исключить-путь** строки Исключить эти пути при копировании. Эта опция не поддерживает символы подстановочных знаков (кв). Проверка приставки относительной траектории (Например: myFolder;myFolder/subDirName/file.pdf). При использовании в сочетании с обходом учетной записи пути не включают имя контейнера.

**--исключить шаблон** строки Исключить эти файлы при копировании. Эта опция поддерживает символы подстановочных знаков (к)

**--следуйте-симлинки**                      Следите за символическими ссылками при загрузке из локальной файловой системы.

**--от строки** Опционально определяет комбинацию исходного назначения. Например: LocalBlob, BlobLocal, LocalBlobFS.

**-h, --помощь** помощь для копирования

**--включить атрибуты строки** (только Windows) Включите файлы, атрибуты которых соответствуют списку атрибутов. Например: A; S; R

**--включить-путь** строки Включают только эти пути при копировании. Эта опция не поддерживает символы подстановочных знаков (кв). Проверка приставки относительной траектории (например: myFolder;myFolder/subDirName/file.pdf).

**--включить шаблон** строки Включать только эти файлы при копировании. Эта опция поддерживает символы подстановочных знаков (кв. м). Отдельные файлы с помощью ';'.

**--строка уровня журнала** Определите многословность журнала для файла журнала, доступные уровни: INFO (все запросы/ответы), ВНИМАНИЕ (медленные ответы), ERROR (только неудавемые запросы) и NONE (без журналов вывода). (по умолчанию "INFO")

**--метаданные строки Загрузка** в Хранилище Azure с этими парами значения ключа в качестве метаданных.

**--не-угадать-мим-типа**                   Предотвращает обнаружение AzCopy содержимого на основе расширения или содержимого файла.

**--перезаписи** строки Перезаписи конфликтующих файлов и капли в пунктназначения, если этот флаг установлен на верность. Возможные значения включают "истинный", "ложный", "ifSourceNewer" и "быстрый". (по умолчанию "правда")

**--страница-blob-уровня** строки Загрузите страницу капли в Azure storage с помощью этого уровня капли. (по умолчанию "Нет")

**--Сохранить-последний модифицированный-время**          Доступна только при назначении файловой системы.

**--Сохранить-smb-разрешений строка** False по умолчанию. Сохраняет SMB ACLs между осведомленными ресурсами (Windows и Azure Files). Для загрузки также необходимо использовать `--backup` флаг для восстановления разрешений, в которых новый владелец не будет пользователем, который управляет AzCopy. Этот флаг применяется как к файлам, так и к папкам, если не указан фильтр только для файлов `include-pattern`(например).

**--Сохранить-smb-info** строка Ложная по умолчанию. Сохраняет информацию о свойствах SMB (последнее время записи, время создания, атрибуты битов) между sMB-сознательных ресурсов (Windows и Azure Files). Будут переданы только биты атрибутов, поддерживаемые файлами Azure; любые другие будут проигнорированы. Этот флаг применяется как к файлам, так и к папкам, если не указан фильтр только для файлов (например, включить шаблон). Информация, передаваемые для папок, такая же, как и для файлов, за исключением Последнего времени записи, которое никогда не сохраняется для папок.

**--Сохранение-владелец**                       Эффект действует только при загрузке данных, `--preserve-smb-permissions` и только при использовании. Если это правда (по умолчанию), владелец файла и группа сохраняются в загрузках. Если этот флаг установлен `--preserve-smb-permissions` на ложное, будет по-прежнему сохранять ACLs, но владелец и группа будут основаны на пользователе, который работает AzCopy.

**--пут-md5**                             Создайте хэш MD5 каждого файла и сохраните хэш как свойство Content-MD5 капли назначения или файла. (По умолчанию хэш НЕ создается.) Доступно только при загрузке.

**--рекурсивный**                            Загляните в подкаталоги, рекурсивно загружая из локальной файловой системы.

**--s2s-обнаружение-источник-изменен**           Проверьте, изменился ли источник после перечисления.

**строка s2s-handle-недействительной метаданных** определяет способ обработки недействительных ключей метаданных. Доступные варианты: ExcludeIfInvalid, FailifInvalid, RenameifInvalid. (по умолчанию "ИсключитьНедействительное")

**--s2s-сохранить-доступ-уровня**             Сохранить уровень доступа во время службы копирования службы. Пожалуйста, обратитесь к [хранилищу Azure Blob: горячие, прохладные и архивные уровни доступа,](https://docs.microsoft.com/azure/storage/blobs/storage-blob-storage-tiers) чтобы обеспечить поддержку учетной записи хранилища назначения, устанавливая уровень доступа. В случае, если настройка уровня доступа не поддерживается, пожалуйста, используйте s2sPreserveAccessTier-false, чтобы обойти уровень копирования доступа. (по умолчанию верно)

**--s2s-заповедник-свойства**              Сохранить полные свойства во время службы копирования службы. Для неодного источника файлов AWS S3 и Azure File операция списка не возвращает полных свойств объектов и файлов. Чтобы сохранить полные свойства, AzCopy необходимо отправить один дополнительный запрос на объект или файл. (по умолчанию верно)

## <a name="options-inherited-from-parent-commands"></a>Параметры, унаследованные от родительских команд

**--кап-мбитп uint32**      Ограничивает скорость передачи, в мегабитах в секунду. Пропускная часть момент за моментом может незначительно отличаться от крышки. Если эта опция установлена до нуля или опущена, пропускная часть не ограничена.

**--тип вывода** Формат вывода команды. Выбор включает в себя: текст, Json. Значение по умолчанию — это «текст». (по умолчанию "текст")

## <a name="see-also"></a>См. также раздел

- [azcopy](storage-ref-azcopy.md)
