---
title: azcopy Copy | Документация Майкрософт
description: В этой статье содержатся справочные сведения о команде azcopy Copy.
author: normesta
ms.service: storage
ms.topic: reference
ms.date: 08/26/2019
ms.author: normesta
ms.subservice: common
ms.reviewer: zezha-msft
ms.openlocfilehash: c15d188e333bea5e74fa65d2bbdf38ae7fadc246
ms.sourcegitcommit: 532335f703ac7f6e1d2cc1b155c69fc258816ede
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/30/2019
ms.locfileid: "70195741"
---
# <a name="azcopy-copy"></a>копирование azcopy

Копирует исходные данные в целевое расположение.

## <a name="synopsis"></a>Краткий обзор

Поддерживаются следующие направления.

- локальный < — > большой двоичный объект Azure (проверка подлинности SAS или OAuth)
- локальный < — > файл Azure (проверка подлинности SAS общего доступа или каталога)
- Local <-> ADLS Gen 2 (проверка подлинности SAS, OAuth или SharedKey)
- BLOB-объект Azure (SAS или public) < — > большой двоичный объект Azure (проверка подлинности SAS или OAuth)
- Файл Azure (SAS) — > блочный BLOB-объект Azure (проверка подлинности SAS или OAuth)
- AWS S3 (ключ доступа) — > блочный BLOB-объект Azure (проверка подлинности SAS или OAuth)

Дополнительные сведения см. в примерах.

### <a name="advanced"></a>Расширенная

AzCopy автоматически определяет тип содержимого файлов при отправке с локального диска на основе расширения или содержимого файла (если не указано расширение).

Встроенная таблица подстановки является небольшой, но в UNIX она дополняется файлами MIME локальной системы, если она доступна по одному или нескольким из следующих имен:

- /етк/миме.типес
- /etc/apache2/mime.types
- /етк/апаче/миме.типес

В Windows типы MIME извлекаются из реестра. Эта функция может быть отключена с помощью флага. См. раздел Flag.

> [!IMPORTANT]
> Если задать переменную среды с помощью командной строки, эта переменная будет доступна для чтения в журнале командной строки. Рассмотрите возможность очистки переменных, содержащих учетные данные из журнала командной строки. Чтобы переменные отображались в журнале, можно использовать сценарий, чтобы запросить у пользователя учетные данные и задать переменную среды.

```azcopy
azcopy copy [source] [destination] [flags]
```

## <a name="examples"></a>Примеры

Отправка одного файла с помощью проверки подлинности OAuth.

Если вы еще не выполнили вход в AzCopy, используйте `azcopy login` команду перед выполнением следующей команды.

```azcopy
azcopy cp "/path/to/file.txt" "https://[account].blob.core.windows.net/[container]/[path/to/blob]"
```

То же, что и выше, но на этот раз можно также вычислить хэш MD5 содержимого файла и сохранить его как свойство Content-MD5 объекта BLOB:

```azcopy
azcopy cp "/path/to/file.txt" "https://[account].blob.core.windows.net/[container]/[path/to/blob]" --put-md5
```

Отправка одного файла с помощью SAS:

```azcopy
azcopy cp "/path/to/file.txt" "https://[account].blob.core.windows.net/[container]/[path/to/blob]?[SAS]"
```

Отправка одного файла с SAS с помощью конвейера (только блочные BLOB-объекты):

```azcopy
cat "/path/to/file.txt" | azcopy cp "https://[account].blob.core.windows.net/[container]/[path/to/blob]?[SAS]"
```

Отправка всего каталога с помощью SAS:

```azcopy
azcopy cp "/path/to/dir" "https://[account].blob.core.windows.net/[container]/[path/to/directory]?[SAS]" --recursive=true
```

или диспетчер конфигурации служб

```azcopy
azcopy cp "/path/to/dir" "https://[account].blob.core.windows.net/[container]/[path/to/directory]?[SAS]" --recursive=true --put-md5
```

Передайте набор файлов с помощью подстановочных знаков.

```azcopy
azcopy cp "/path/*foo/*bar/*.pdf" "https://[account].blob.core.windows.net/[container]/[path/to/directory]?[SAS]"
```

Отправка файлов и каталогов с помощью подстановочных знаков.

```azcopy
azcopy cp "/path/*foo/*bar*" "https://[account].blob.core.windows.net/[container]/[path/to/directory]?[SAS]" --recursive=true
```

Скачайте один файл с помощью проверки подлинности OAuth.

Если вы еще не выполнили вход в AzCopy, используйте `azcopy login` команду перед выполнением следующей команды.

```azcopy
azcopy cp "https://[account].blob.core.windows.net/[container]/[path/to/blob]" "/path/to/file.txt"
```

Скачайте один файл с SAS:

```azcopy
azcopy cp "https://[account].blob.core.windows.net/[container]/[path/to/blob]?[SAS]" "/path/to/file.txt"
```

Скачайте один файл с SAS с помощью конвейера (только блочные BLOB-объекты):

```azcopy
azcopy cp "https://[account].blob.core.windows.net/[container]/[path/to/blob]?[SAS]" > "/path/to/file.txt"
```

Скачайте весь каталог с SAS:

```azcopy
azcopy cp "https://[account].blob.core.windows.net/[container]/[path/to/directory]?[SAS]" "/path/to/dir" --recursive=true
```

Скачайте набор файлов с SAS с помощью подстановочных знаков:

```azcopy
azcopy cp "https://[account].blob.core.windows.net/[container]/foo*?[SAS]" "/path/to/dir"
```

Скачивание файлов и каталогов с помощью подстановочных знаков.

```azcopy
azcopy cp "https://[account].blob.core.windows.net/[container]/foo*?[SAS]" "/path/to/dir" --recursive=true
```

Копирование одного большого двоичного объекта с SAS в другой большой двоичный объект с помощью SAS:

```azcopy
azcopy cp "https://[srcaccount].blob.core.windows.net/[container]/[path/to/blob]?[SAS]" "https://[destaccount].blob.core.windows.net/[container]/[path/to/blob]?[SAS]"
```

Скопируйте один большой двоичный объект с SAS в другой большой двоичный объект с токеном OAuth.

Если вы еще не выполнили вход в AzCopy, используйте `azcopy login` команду перед выполнением следующей команды. Токен OAuth используется для доступа к целевой учетной записи хранения.

```azcopy
azcopy cp "https://[srcaccount].blob.core.windows.net/[container]/[path/to/blob]?[SAS]" "https://[destaccount].blob.core.windows.net/[container]/[path/to/blob]"
```

Скопируйте весь каталог из виртуального каталога больших двоичных объектов с SAS в другой виртуальный каталог больших двоичных объектов с SAS:

```azcopy
azcopy cp "https://[srcaccount].blob.core.windows.net/[container]/[path/to/directory]?[SAS]" "https://[destaccount].blob.core.windows.net/[container]/[path/to/directory]?[SAS]" --recursive=true
```

Скопируйте все данные учетной записи из учетной записи большого двоичного объекта с SAS в другую учетную запись BLOB-объекта с SAS:

```azcopy
azcopy cp "https://[srcaccount].blob.core.windows.net?[SAS]" "https://[destaccount].blob.core.windows.net?[SAS]" --recursive=true
```

Копирование одного объекта из режима S3 с помощью ключа доступа в BLOB-объект с SAS:

Задайте переменные среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3.

```azcopy
azcopy cp "https://s3.amazonaws.com/[bucket]/[object]" "https://[destaccount].blob.core.windows.net/[container]/[path/to/blob]?[SAS]"
```

Копирование всего каталога из S3 с помощью ключа доступа в виртуальный каталог BLOB-объектов с SAS:

```azcopy
azcopy cp "https://s3.amazonaws.com/[bucket]/[folder]" "https://[destaccount].blob.core.windows.net/[container]/[path/to/directory]?[SAS]" --recursive=true
```

Дополнительные сведения о том ,чтотакое[Папка],означаетS3. https://docs.aws.amazon.com/AmazonS3/latest/user-guide/using-folders.html Задайте переменные среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3.

Скопируйте все контейнеры в службе S3 с помощью ключа доступа к учетной записи BLOB-объектов с SAS:

Задайте переменные среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3.

```azcopy
azcopy cp "https://s3.amazonaws.com/" "https://[destaccount].blob.core.windows.net?[SAS]" --recursive=true
```

Скопируйте все контейнеры в регионе S3 с помощью ключа доступа к учетной записи BLOB-объектов с SAS:

```azcopy
azcopy cp "https://s3-[region].amazonaws.com/" "https://[destaccount].blob.core.windows.net?[SAS]" --recursive=true
```

Задайте переменные среды AWS_ACCESS_KEY_ID и AWS_SECRET_ACCESS_KEY для источника S3.

## <a name="options"></a>Параметры

|Параметр|Описание|
|--|--|
|--BLOB-тип строка|Определяет тип большого двоичного объекта в месте назначения. Используется для отправки больших двоичных объектов и при копировании между учетными записями (по умолчанию "нет").|
|--Block-BLOB — строка уровня|Отправьте блочный BLOB-объект в службу хранилища Azure с помощью этого уровня BLOB-объектов. (по умолчанию "нет").|
|--Block-Size-МБ, с плавающей запятой |Используйте этот размер блока (указанный в MiB) при отправке в службу хранилища Azure и скачивании из службы хранилища Azure. Значение по умолчанию вычисляется автоматически на основе размера файла. Десятичные дроби разрешены (например: 0,25).|
|--Cache-Control строка|Задайте заголовок Cache-Control. Возвращается при скачивании.|
|--Check-строка MD5|Указывает, насколько строго должны проверяться хэши MD5 при скачивании. Доступно только при скачивании. Доступные параметры: Не проверять, вход, Фаилифдифферент, Фаилифдифферентормиссинг. (по умолчанию "Фаилифдифферент")|
|--Строка расположения содержимого|Задайте заголовок Content-Disposition. Возвращается при скачивании.|
|--содержимое — строка кодирования|Задайте заголовок Content-Encoding. Возвращается при скачивании.|
|--Content — Строка языка|Задайте заголовок Content-Language. Возвращается при скачивании.|
|--Content-Type строка |Указывает тип содержимого файла. Подразумевает отсутствие предположения-типа MIME. Возвращается при скачивании.|
|--исключение строки|Исключите эти файлы при копировании. Поддержка использования *.|
|--Exclude-BLOB-тип строка|При необходимости указывает тип большого двоичного объекта (BlockBlob/PageBlob/Аппендблоб), который следует исключить при копировании больших двоичных объектов из контейнера или учетной записи. Использование этого флага неприменимо для копирования данных из службы, не являющейся службой Azure, в службу. Несколько больших двоичных объектов должны быть разделены символом ";".|
|--следовать за символических ссылок|При отправке из локальной файловой системы используйте символические ссылки.|
|--из-в строку|При необходимости указывает комбинацию назначения источника. Например: Локалблоб, Блоблокал, Локалблобфс.|
|-h, --help|Отображает содержимое справки для команды Copy. |
|--Строка уровня журнала|Укажите уровень детализации журнала для файла журнала, доступные уровни: СВЕДЕНИЯ (все запросы и ответы), предупреждение (медленные ответы), ошибка (только неудачные запросы) и нет (нет выходных журналов). (по умолчанию "INFO").|
|--строка метаданных|Отправьте в службу хранилища Azure эти пары "ключ — значение" в виде метаданных.|
|--No-Guess-MIME-тип|Предотвращает обнаружение типа содержимого в AzCopy на основе расширения или содержимого файла.|
|--overwrite|Перезапишите конфликтующие файлы или большие двоичные объекты в месте назначения, если для этого флага задано значение true. (значение по умолчанию — true).|
|--Page-BLOB — строка уровня |Отправьте страничный BLOB-объект в службу хранилища Azure с помощью этого уровня больших двоичных объектов. (по умолчанию "нет").|
|--сохранение-Последнее изменение времени|Доступно только в том случае, если целевым объектом является файловая система.|
|--размещение-MD5|Создайте хэш MD5 для каждого файла и сохраните хэш как свойство Content-MD5 целевого большого двоичного объекта или файла. (По умолчанию хэш не создается.) Доступно только при отправке.|
|--recursive|Рекурсивно искать подкаталоги при отправке из локальной файловой системы.|
|--S2S-Detect-Source-Changed|Проверьте, изменился ли источник после перечисления. Для S2S Copy, так как Source является удаленным ресурсом, проверка наличия в источнике изменений требует дополнительных затрат на запросы.|
|--S2S-handle-недопустимо — строка метаданных |Указывает, как обрабатываются недопустимые ключи метаданных. Доступные параметры: Ексклудеифинвалид, Фаилифинвалид, Ренамеифинвалид. (по умолчанию "Ексклудеифинвалид").|
|--S2S-Preserve-уровень доступа|Сохранение уровня доступа во время копирования службы в службу. Дополнительные сведения см. в статье [хранилище BLOB-объектов Azure: горячий, холодный и архивный уровни доступа](../blobs/storage-blob-storage-tiers.md) , чтобы гарантировать, что Целевая учетная запись хранения поддерживает настройку уровня доступа. В случаях, когда установка уровня доступа не поддерживается, используйте s2sPreserveAccessTier = false, чтобы обойти копирование уровня доступа.  (значение по умолчанию — true).|
|--S2S-Preserve-свойства|Сохранять полные свойства во время копирования службы в службу. Для S3 и файлового источника, не относящегося к одному файлу Azure, как операция со списком не возвращает полные свойства объектов и файлов, чтобы сохранить полные свойства AzCopy необходимо отправить один дополнительный запрос для каждого объекта и файла. (значение по умолчанию — true).|

## <a name="options-inherited-from-parent-commands"></a>Параметры, унаследованные от родительских команд

|Параметр|Описание|
|---|---|
|--Cap-Мбит/с UInt32|Скорость передачи с прописными буквами в мегабит в секунду. Посекундная пропускная способность может немного отличаться от ограничения. Если этот параметр имеет значение 0 или пропущен, пропускная способность не ограничена.|
|--строка выходного типа|Формат вывода команды. Среди вариантов: Text, JSON. Значение по умолчанию — "Text".|

## <a name="see-also"></a>См. также

- [azcopy](storage-ref-azcopy.md)
