---
title: azcopy Bench | Документация Майкрософт
description: В этой статье содержатся справочные сведения о команде azcopy Bench.
author: normesta
ms.service: storage
ms.topic: reference
ms.date: 10/16/2019
ms.author: normesta
ms.subservice: common
ms.reviewer: zezha-msft
ms.openlocfilehash: 8570bce87aeea5473b4aadf9bd30bc0a648a6f0f
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "72518308"
---
# <a name="azcopy-bench"></a>azcopy bench

Запускает нагрузочный тест производительности путем передачи тестовых данных в указанное место назначения. Тестовые данные создаются автоматически.

Команда тестирования производительности выполняет тот же процесс отправки, что и Copy, за исключением того, что:

  - Отсутствует исходный параметр.  Команде требуется только URL-адрес назначения. В текущем выпуске этот URL-адрес назначения должен ссылаться на контейнер больших двоичных объектов.
  
  - Полезные данные описываются параметрами командной строки, которые контролируют количество автоматически создаваемых файлов и их размер. Процесс создания полностью выполняется в памяти. Диск не используется.
  
  - Поддерживается только несколько необязательных параметров, доступных для команды Copy.
  
  - Измеряется и сообщается дополнительная диагностика.
  
  - По умолчанию передаваемые данные удаляются в конце тестового запуска.

Режим тестирования будет автоматически настроен на число параллельных TCP-подключений, обеспечивающих максимальную пропускную способность. Это число будет отображаться в конце. Чтобы предотвратить автоматическую настройку, задайте для переменной среды AZCOPY_CONCURRENCY_VALUE определенное число соединений.

Поддерживаются все обычные типы проверки подлинности. Однако наиболее удобным подходом для тестирования производительности обычно является создание пустого контейнера с маркером SAS и использование проверки подлинности SAS.

## <a name="examples"></a>Примеры

```azcopy
azcopy bench [destination] [flags]
```

Запустите тест производительности с параметрами по умолчанию (подходящими для тестирования производительности в сети до 1 Гбит/с): "

- azcopy Bench "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]? <SAS>"

Запустите тест производительности, который отправляет 100 файлов, размер каждой 2 гиб: (подходит для тестирования производительности в быстрой сети, например 10 Гбит/с): "

- azcopy Bench "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]? <SAS>" --File-Count 100--size-to-File 2G

То же, что и выше, но используйте 50 000 файлов, каждый 8 MiB в размере и вычислите их хэши MD5 (так же, как флаг--WHERE-MD5 делает это в команде Copy). При выполнении теста производительности параметр--"использовать-MD5" позволяет проверить, влияет ли вычисление MD5 на пропускную способность для выбранного числа и размера файла:

- azcopy Bench "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]? <SAS>" --File-Count 50000--size-for-File 8 млн--WHERE-MD5

## <a name="options"></a>Параметры

**--BLOB-тип** строка определяет тип большого двоичного объекта в месте назначения. Используется для разрешения производительности различных типов больших двоичных объектов. Идентично параметру с одним и тем же именем в команде Copy (по умолчанию "Обнаружение").

**--Block-Size-МБ с** плавающей запятой используйте этот размер блока (указанный в MIB). Значение по умолчанию вычисляется автоматически на основе размера файла. Допускаются десятичные дроби, например 0,25. Идентично параметру с одним и тем же именем в команде Copy.

**--Delete-Test-Data**  Если значение — true, данные теста производительности будут удалены в конце тестового запуска.  Задайте значение false, если вы хотите, чтобы данные находились в месте назначения, например, чтобы использовать их для ручных тестов вне режима производительности (по умолчанию true).

**— число файлов** uint количество автоматически создаваемых файлов данных (по умолчанию 100).

**-h,--Справка**  Справка по Bench

**--строка на уровне журнала** определяет уровень детализации журнала для файла журнала, доступные уровни: сведения (все запросы и ответы), предупреждение (медленные ответы), ошибка (только неудачные запросы) и нет (нет выходных журналов). (по умолчанию "INFO")

**--Размещение-MD5**  Создайте хэш MD5 для каждого файла и сохраните хэш как свойство Content-MD5 целевого большого двоичного объекта или файла. (По умолчанию хэш не создается.) Идентично параметру с одним и тем же именем в команде Copy.

**—** размер строки по каждому файлу для каждого автоматически созданного файла данных. Должно быть числом сразу за презнаком K, M или G. Например: 12k или 200G (по умолчанию — "250M").

## <a name="options-inherited-from-parent-commands"></a>Параметры, унаследованные от родительских команд

**--Cap-Мбит/с UInt32**  Скорость передачи с прописными буквами в мегабит в секунду. Посекундная пропускная способность может немного отличаться от ограничения. Если этот параметр имеет значение 0 или пропущен, пропускная способность не ограничена.

**--выходной** формат строки выходных данных команды. Среди вариантов: Text, JSON. Значение по умолчанию — Text. ("текст" по умолчанию).

## <a name="see-also"></a>См. также

- [azcopy](storage-ref-azcopy.md)
