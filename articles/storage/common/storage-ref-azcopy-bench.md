---
title: azcopy Bench | Документация Майкрософт
description: В этой статье содержатся справочные сведения о команде azcopy Bench.
author: normesta
ms.service: storage
ms.topic: reference
ms.date: 10/16/2019
ms.author: normesta
ms.subservice: common
ms.reviewer: zezha-msft
ms.openlocfilehash: 40ff6c6c76e255945681e678ef296ffcf9978f61
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84485174"
---
# <a name="azcopy-benchmark"></a>тест производительности azcopy

Запускает нагрузочный тест производительности путем передачи тестовых данных в указанное место назначения. Тестовые данные создаются автоматически.

Команда тестирования производительности выполняет тот же процесс отправки, что и Copy, за исключением того, что:

  - Отсутствует исходный параметр.  Команде требуется только URL-адрес назначения. 
  
  - Полезная нагрузка описывается параметрами командной строки, определяющими количество автоматически создаваемых файлов и их размер. Процесс создания полностью выполняется в памяти. Диск не используется.
  
  - Поддерживается только несколько необязательных параметров, доступных для команды Copy.
  
  - Измеряется и сообщается дополнительная диагностика.
  
  - По умолчанию передаваемые данные удаляются в конце тестового запуска.

Режим тестирования будет автоматически настроен на число параллельных TCP-подключений, обеспечивающих максимальную пропускную способность. Это число будет отображаться в конце. Чтобы предотвратить автоматическую настройку, задайте для переменной среды AZCOPY_CONCURRENCY_VALUE определенное число соединений.

Поддерживаются все обычные типы проверки подлинности. Однако наиболее удобным подходом для тестирования производительности обычно является создание пустого контейнера с маркером SAS и использование проверки подлинности SAS.

## <a name="examples"></a>Примеры

```azcopy
azcopy benchmark [destination] [flags]
```

Запустите тест производительности с параметрами по умолчанию (подходящими для тестирования производительности в сети до 1 Гбит/с): "

- azcopy Bench "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]? <SAS> "

Запустите тест производительности, который отправляет 100 файлов, размер каждого из которых составляет 2 гиб: (подходит для тестирования производительности в быстрой сети, например 10 Гбит/с):

- azcopy Bench "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]? <SAS> " --File-Count 100--size-to-File 2G

Запустите тест производительности, но используйте 50 000 файлов, размер каждого 8 MiB и вычислите их хэши MD5 (аналогично тому, как `--put-md5` это делается флагом в команде Copy). При тестировании `--put-md5` производительности необходимо проверить, влияет ли вычисление MD5 на пропускную способность для выбранного числа и размера файла:

- azcopy Bench "https://[учетная запись]. BLOB. Core. Windows. NET/[контейнер]? <SAS> " --File-Count 50000--size-for-File 8 млн--WHERE-MD5

## <a name="options"></a>Параметры

**--BLOB-тип** строка определяет тип большого двоичного объекта в месте назначения. Используется для разрешения производительности различных типов больших двоичных объектов. Идентично параметру с одним и тем же именем в команде Copy (по умолчанию "Обнаружение").

**--Block-Size-МБ с** плавающей запятой используйте этот размер блока (указанный в MIB). Значение по умолчанию вычисляется автоматически на основе размера файла. Допускаются десятичные дроби, например 0,25. Идентично параметру с одним и тем же именем в команде Copy.

**--Delete-Test-Data**  Если значение — true, данные теста производительности будут удалены в конце тестового запуска.  Задайте значение false, если вы хотите, чтобы данные находились в месте назначения, например, чтобы использовать их для ручных тестов вне режима производительности (по умолчанию true).

**— число файлов** uint количество автоматически создаваемых файлов данных (по умолчанию 100).

**-h,--Справка**  Справка по Bench

**--строка на уровне журнала** определяет уровень детализации журнала для файла журнала, доступные уровни: сведения (все запросы и ответы), предупреждение (медленные ответы), ошибка (только неудачные запросы) и нет (нет выходных журналов). (по умолчанию "INFO")

**--Размещение-MD5**  Создайте хэш MD5 для каждого файла и сохраните хэш как свойство Content-MD5 целевого большого двоичного объекта или файла. (По умолчанию хэш не создается.) Идентично параметру с одним и тем же именем в команде Copy.

**—** размер строки по каждому файлу для каждого автоматически созданного файла данных. Должно быть числом сразу за презнаком K, M или G. Например: 12k или 200G (по умолчанию — "250M").

## <a name="options-inherited-from-parent-commands"></a>Параметры, унаследованные от родительских команд

**--Cap-Мбит/с UInt32**  Скорость передачи с прописными буквами в мегабит в секунду. Посекундная пропускная способность может немного отличаться от ограничения. Если этот параметр имеет значение 0 или пропущен, пропускная способность не ограничена.

**--выходной** формат строки выходных данных команды. Среди вариантов: Text, JSON. Значение по умолчанию — Text. ("текст" по умолчанию).

**--Trusted-Microsoft-суффиксы** указывает дополнительные суффиксы домена, в которых могут отправляться Azure Active Directory токены входа.  Значение по умолчанию — "*. Core.Windows.NET;*". core.chinacloudapi.cn; *. Core.cloudapi.de;*. core.usgovcloudapi.net ". Все перечисленные здесь значения добавляются к значениям по умолчанию. В целях безопасности следует размещать только Microsoft Azureные домены. Несколько записей разделяются точкой с запятой.

## <a name="see-also"></a>См. также

- [azcopy](storage-ref-azcopy.md)
