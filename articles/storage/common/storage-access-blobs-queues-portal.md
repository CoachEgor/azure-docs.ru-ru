---
title: Используйте портал Azure для доступа к данным капли или очереди
titleSuffix: Azure Storage
description: При доступе к данным blob или очереди с помощью портала Azure портал делает запросы в Azure Storage под крышкой. Эти запросы в Хранилище Azure могут быть проверены и авторизованы с помощью учетной записи Azure AD или ключа доступа к учетной записи хранилища.
services: storage
author: tamram
ms.service: storage
ms.topic: how-to
ms.date: 04/14/2020
ms.author: tamram
ms.reviewer: cbrooks
ms.subservice: common
ms.openlocfilehash: e556e21238db5de7dddce13ea912dae30723fe8c
ms.sourcegitcommit: ea006cd8e62888271b2601d5ed4ec78fb40e8427
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81383685"
---
# <a name="use-the-azure-portal-to-access-blob-or-queue-data"></a>Используйте портал Azure для доступа к данным капли или очереди

При доступе к данным blob или очереди с помощью [портала Azure](https://portal.azure.com)портал делает запросы в Azure Storage под крышкой. Запрос в Хранилище Azure можно авторизовать с помощью учетной записи Azure AD или ключа доступа к учетной записи хранилища. Портал указывает, какой метод вы используете, и позволяет переключаться между ними, если у вас есть соответствующие разрешения.  

Вы также можете указать, как авторизовать индивидуальную операцию загрузки капли на портале Azure. По умолчанию портал использует тот метод, который вы уже используете для авторизации операции загрузки капли, но у вас есть возможность изменить эту настройку при загрузке капли.

## <a name="permissions-needed-to-access-blob-or-queue-data"></a>Разрешения, необходимые для доступа к данным капли или очереди

В зависимости от того, как вы хотите авторизовать доступ к данным капли или очереди на портале Azure, вам потребуются определенные разрешения. В большинстве случаев эти разрешения предоставляются с помощью управления доступом на основе ролей (RBAC). Для получения дополнительной информации о RBAC, [см. Что такое ролевой контроль доступа (RBAC)?](../../role-based-access-control/overview.md).

### <a name="use-the-account-access-key"></a>Использование ключа доступа к учетной записи

Чтобы получить доступ к данным о blob и очереди с ключом доступа к учетной записи, необходимо иметь роль RBAC, назначенную вам, которая включает в себя действие RBAC **Microsoft.Storage/storageAccounts/listkeys/action.** Эта роль RBAC может быть встроенной или пользовательской ролью. Встроенные роли, поддерживающие **Microsoft.Storage/storageAccounts/listkeys/action,** включают:

- Роль [владельца](../../role-based-access-control/built-in-roles.md#owner) ресурсов Azure
- [Роль](../../role-based-access-control/built-in-roles.md#contributor) менеджера ресурсов Azure
- Роль [вкладчика учетной записи хранилища](../../role-based-access-control/built-in-roles.md#storage-account-contributor)

При попытке получить доступ к данным blob или очереди на портале Azure портал сначала проверяет, была ли назначена роль **в Microsoft.Storage/storageAccounts/listkeys/action.** Если вам была назначена роль с этим действием, то портал использует ключ учетной записи для доступа к данным капли и очереди. Если вам не была назначена роль в этом действии, портал пытается получить доступ к данным с помощью учетной записи Azure AD.

> [!NOTE]
> Классические роли администратора подписки Администратор службы и соадминистратор включают в себя эквивалент роли [владельца](../../role-based-access-control/built-in-roles.md#owner) менеджера ресурсов Azure. Роль **Владельца** включает в себя все действия, включая **Microsoft.Storage/storageAccounts/listkeys/action,** так что пользователь с одной из этих административных ролей может также получить доступ к данным капли и очереди с ключом учетной записи. Дополнительные сведения см. в статье [Роли классического администратора подписки, роли RBAC Azure и роли администратора Azure AD](../../role-based-access-control/rbac-and-directory-admin-roles.md#classic-subscription-administrator-roles).

### <a name="use-your-azure-ad-account"></a>Используйте учетную запись Azure AD

Чтобы получить доступ к данным blob или очереди с портала Azure с помощью учетной записи Azure AD, обе следующие операторы должны быть верны вам:

- Вам была назначена роль [менеджера](../../role-based-access-control/built-in-roles.md#reader) ресурсов Azure Reader, как минимум, сравнимый с уровнем учетной записи хранилища или выше. Роль **Читателя** предоставляет наиболее ограниченные разрешения, но также приемлема другая роль менеджера ресурсов Azure, которая предоставляет доступ к ресурсам управления учетными записями.
- Вам была назначена либо встроенная, либо пользовательская роль, обеспечивающая доступ к данным капли или очереди.

Назначение роли **Reader** или другое назначение менеджера ресурсов Azure необходимо для того, чтобы пользователь мог просматривать и перемещать ресурсы управления учетными записями на портале Azure. Роли RBAC, которые предоставляют доступ к данным blob или очереди, не предоставляют доступа к ресурсам управления учетными записями. Для доступа к данным о blob или очереди на портале пользователю требуется разрешение на навигацию по ресурсам учетной записи хранилища. Для получения дополнительной информации об этом требовании [см.](../common/storage-auth-aad-rbac-portal.md#assign-the-reader-role-for-portal-access)

Встроенные роли, поддерживающие доступ к данным капли или очереди, включают:

- [Хранение владельца данных Blob:](../../role-based-access-control/built-in-roles.md#storage-blob-data-owner)Для управления доступом POSIX для хранения данных Azure Data Lake Data Gen2.
- [Хранение blob Данных Вкладчик](../../role-based-access-control/built-in-roles.md#storage-blob-data-contributor): Читать / писать / удалить разрешения на капли.
- [Хранение Blob Data Reader](../../role-based-access-control/built-in-roles.md#storage-blob-data-reader): Только для чтения разрешений на капли.
- [Вкладчик публикации данных:](../../role-based-access-control/built-in-roles.md#storage-queue-data-contributor)Прочитайте/написать/удалить разрешения для очередей.
- [Хранение очереди чтения данных](../../role-based-access-control/built-in-roles.md#storage-queue-data-reader): Чтение только разрешения для очередей.

Пользовательские роли могут поддерживать различные комбинации одних и тех же разрешений, предоставляемых встроенными ролями. Для получения дополнительной информации о создании пользовательских ролей RBAC см. [пользовательские роли для ресурсов Azure](../../role-based-access-control/custom-roles.md) и [понять определения ролей для ресурсов Azure.](../../role-based-access-control/role-definitions.md)

Перечисление очередей с классической ролью администратора подписки не поддерживается. Чтобы перечислить очереди, пользователь должен присвоить им роль **менеджера** ресурсов Azure Reader, роль **чтения данных очереди хранения** или роль **вкладчика публикации в очереди.**

> [!IMPORTANT]
> Предварительная версия Системы хранения на портале Azure не поддерживает использование учетных данных Azure AD для просмотра и изменения данных капли или очереди. Исследователь хранения данных на портале Azure всегда использует ключи учетной записи для доступа к данным. Чтобы использовать исследователь хранения на портале Azure, необходимо назначить роль, которая включает в себя **Microsoft.Storage/storageAccounts/listkeys/action.**

## <a name="navigate-to-blobs-or-queues-in-the-portal"></a>Перейдите к каплям или очередям на портале

Чтобы просмотреть данные о blob или очереди на портале, перейдите в **Обзор** для учетной записи хранилища и нажмите на ссылки на **Blobs** или **Очереди.** Кроме того, вы можете перейти к **Blob службы** и **очередь разделов в** меню. 

![Перейдите к данным о blob или очереди на портале Azure](media/storage-access-blobs-queues-portal/blob-queue-access.png)

## <a name="determine-the-current-authentication-method"></a>Определение текущего метода проверки подлинности

При переходе в контейнер или очередь портал Azure указывает, используете ли вы в настоящее время ключ доступа к учетной записи или учетную запись Azure AD для проверки подлинности.

Примеры в этом разделе показывают доступ к контейнеру и его каплям, но портал отображает одно и то же сообщение при доступе к очереди и ее сообщениям или перечислении очередей.

### <a name="authenticate-with-the-account-access-key"></a>Authenticate с ключом доступа к учетной записи

При проверке подлинности с помощью ключа доступа к учетной записи вы увидите ключ **доступа,** указанный в качестве метода проверки подлинности на портале:

![В настоящее время доступ к данным контейнера с ключом учетной записи](media/storage-access-blobs-queues-portal/auth-method-access-key.png)

Чтобы переключиться на учетную запись Azure AD, щелкните ссылку, выделенную на изображении. Если у вас есть соответствующие разрешения через роли RBAC, которые назначены вам, вы сможете продолжить работу. Однако, если у вас нет нужных разрешений, вы увидите сообщение об ошибке, как следующее:

![Ошибка, показанная, если учетная запись Azure AD не поддерживает доступ](media/storage-access-blobs-queues-portal/auth-error-azure-ad.png)

Обратите внимание, что в списке нет капли, если в учетной записи Azure AD нет разрешений на их просмотр. Нажмите на **коммутатор, чтобы получить доступ к ключевой** ссылке, чтобы снова использовать ключ доступа для проверки подлинности.

### <a name="authenticate-with-your-azure-ad-account"></a>Authenticate с вашей учетной записью Azure AD

При проверке подлинности с помощью учетной записи Azure AD вы увидите **учетную запись пользователя Azure AD,** указанную в качестве метода проверки подлинности на портале:

![В настоящее время доступ к данным контейнеров с учетной записью Azure AD](media/storage-access-blobs-queues-portal/auth-method-azure-ad.png)

Чтобы переключиться на ключ доступа к учетной записи, щелкните ссылку, выделенную на изображении. Если у вас есть доступ к ключу учетной записи, то вы сможете продолжить. Однако, если у вас нет доступа к ключу учетной записи, вы увидите сообщение об ошибке, как следующее:

![Ошибка, показанная, если у вас нет доступа к ключу учетной записи](media/storage-access-blobs-queues-portal/auth-error-access-key.png)

Обратите внимание, что капли не появляются в списке, если у вас нет доступа к ключам учетной записи. Нажмите на ссылку на учетную **запись пользователя Azure AD,** чтобы снова использовать учетную запись Azure AD для проверки подлинности.

## <a name="specify-how-to-authorize-a-blob-upload-operation"></a>Укажите, как авторизовать операцию загрузки капли

При загрузке капли с портала Azure можно указать, следует ли проверить подлинность и авторизовать эту операцию ключом доступа к учетной записи или с помощью учетных данных Azure AD. По умолчанию портал использует текущий метод проверки подлинности, как показано в [определении текущего метода проверки подлинности.](#determine-the-current-authentication-method)

Чтобы указать, как санкционировать операцию загрузки капли, выполните следующие действия:

1. На портале Azure перейдите к контейнеру, где вы хотите загрузить каплю.
1. Нажмите кнопку **Отправить**.
1. Расширьте **раздел Advanced,** чтобы отобразить расширенные свойства для капли.
1. В поле **типа «Тип аутентификации»** укажите, хотите ли вы авторизовать операцию загрузки с помощью учетной записи Azure AD или с ключом доступа к учетной записи, как показано на следующем изображении:

    :::image type="content" source="media/storage-access-blobs-queues-portal/auth-blob-upload.png" alt-text="Скриншот, показывающий, как изменить метод авторизации на загрузке blob":::

## <a name="next-steps"></a>Следующие шаги

- [Аутентифицировать доступ к каплям и очередям Azure с помощью Active Directory Azure](storage-auth-aad.md)
- [Предоставить доступ к контейнерам Azure и очередям с RBAC на портале Azure](storage-auth-aad-rbac-portal.md)
- [Предоставление доступа к BLOB-объектам Azure и создание очереди данных с использованием RBAC с помощью Azure CLI](storage-auth-aad-rbac-cli.md)
- [Предоставление доступа к BLOB-объектам Azure и создание очереди данных с использованием RBAC с помощью Powershell](storage-auth-aad-rbac-powershell.md)
