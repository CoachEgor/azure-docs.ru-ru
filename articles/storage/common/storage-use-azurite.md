---
title: Используйте эмулятор Azurite для локальной разработки хранилища Azure
description: Эмулятор с открытым исходным кодом Azurite (предварительный просмотр) предоставляет свободную локальную среду для тестирования приложений хранения Azure.
author: mhopkins-msft
ms.author: mhopkins
ms.date: 08/31/2019
ms.service: storage
ms.subservice: common
ms.topic: conceptual
ms.openlocfilehash: 5e1fce0852a4e820d7ee0af626ce3fddf6773750
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76029922"
---
# <a name="use-the-azurite-emulator-for-local-azure-storage-development-and-testing-preview"></a>Используйте эмулятор Azurite для локальной разработки и тестирования хранилища Azure (предварительный просмотр)

Эмулятор с открытым исходным кодом Azurite 3.2 (предварительный просмотр) предоставляет бесплатную локальную среду для тестирования приложений для хранения кабл и очередей Azure. Если вы удовлетворены тем, как ваше приложение работает локально, переключитесь на использование учетной записи хранения Azure в облаке. Эмулятор обеспечивает кросс-платформную поддержку на Windows, Linux и MacOS. Azurite v3 поддерживает AA, реализованные службой Azure Blob.

Azurite является будущей платформой эмулятора хранения. Azurite вытесняет [эмулятор хранения Azure.](storage-use-emulator.md) Azurite будет продолжать обновляться для поддержки последних версий APIs хранения данных Azure.

Есть несколько различных способов установки и запуска Azurite на локальной системе:

  1. [Установка и запуск расширения кода Visual Studio Azurite](#install-and-run-the-azurite-visual-studio-code-extension)
  1. [Установка и запуск Azurite с помощью NPM](#install-and-run-azurite-by-using-npm)
  1. [Установка и запуск изображения Azurite Docker](#install-and-run-the-azurite-docker-image)
  1. [Клон, сборка и запуск Azurite из репозитория GitHub](#clone-build-and-run-azurite-from-the-github-repository)

## <a name="install-and-run-the-azurite-visual-studio-code-extension"></a>Установка и запуск расширения кода Visual Studio Azurite

В рамках Visual Studio Code выберите панель **EXTENSIONS** и ищите *Azurite* в **EXTENSIONS:MARKETPLACE**.

![Визуальный студийный код расширения рынка](media/storage-use-azurite/azurite-vs-code-extension.png)

Кроме того, перейдите на [рынок расширения VS Code](https://marketplace.visualstudio.com/items?itemName=Azurite.azurite) в вашем браузере. Выберите кнопку **«Установка»,** чтобы открыть visual Studio Code и перейдите непосредственно на страницу расширения Azurite.

Вы можете быстро начать или закрыть Azurite, нажав на **«Azurite Blob Service»** или **«Azurite Queue Service»** в коде VS Code или выпустив следующие команды в палитре командvs-кода VS. Чтобы открыть командную палитру, нажмите **F1** в VS Code.

Расширение поддерживает следующие команды Visual Studio Code:

   * **Azurite: Начало** - Начните все услуги Azurite
   * **Azurite: Закрыть** - Закрыть все услуги Azurite
   * **Azurite: Чистота** - Сбросить все данные о настойчивости служб Azurite
   * **Azurite: Начало Blob службы** - Начало капли службы
   * **Azurite: Закрыть Blob службы** - Закрыть blob службы
   * **Azurite: Чистый Blob службы** - Чистая капля службы
   * **Azurite: Служба запуска очереди** - Служба стартовой очереди
   * **Azurite: Обслуживание близкой очереди** - Обслуживание замыкает очередь
   * **Azurite: Чистый сервис очереди** - Чистый сервис очереди

Чтобы настроить Azurite в рамках Visual Studio Code, выберите панель расширений. Выберите значок **Управления** (передачи) для **Azurite.** Выберите **настройки настройки расширения.**

![Настройка настроек расширения Azurite](media/storage-use-azurite/azurite-configure-extension-settings.png)

Поддерживаются следующие настройки:

   * **Azurite: Blob Host** - Blob службы прослушивания конечная точка. Настройка по умолчанию составляет 127.0.0.1.
   * **Azurite: Blob Порт** - Blob службы прослушивания порт. Порт по умолчанию раподобие 10000.
   * **Azurite: Отладка** - Выход отладки журнала на канал Azurite. По умолчанию используется значение **false**.
   * **Azurite: Местоположение** - путь местоположения рабочего пространства. По умолчанию это рабочая папка Visual Studio Code.
   * **Azurite: Ухозяин очереди** - Конечная точка прослушивания службы очереди. Настройка по умолчанию составляет 127.0.0.1.
   * **Azurite: Порт очереди** - Порт обслуживания очереди прослушивая. Порт по умолчанию 10001.
   * **Azurite: Тихий** - Тихий режим отсутчает журнал доступа. По умолчанию используется значение **false**.

## <a name="install-and-run-azurite-by-using-npm"></a>Установка и запуск Azurite с помощью NPM

Этот метод установки требует, чтобы у вас была [версия Node.js 8.0 или более поздняя](https://nodejs.org) установка. **npm** — это инструмент управления пакетами, включенный в каждую установку Node.js. После установки Node.js выполните следующую команду **npm** для установки Azurite.

```console
npm install -g azurite
```

После установки Azurite, [см. Run Azurite из командной строки](#run-azurite-from-a-command-line).

## <a name="install-and-run-the-azurite-docker-image"></a>Установка и запуск изображения Azurite Docker

Используйте [DockerHub,](https://hub.docker.com/) чтобы вытащить [последнее изображение Azurite,](https://hub.docker.com/_/microsoft-azure-storage-azurite) используя следующую команду:

```console
docker pull mcr.microsoft.com/azure-storage/azurite
```

**Выполнить изображение Azurite Docker:**

Следующая команда запускает изображение Azurite Docker. Параметр `-p 10000:10000` перенаправляет запросы из порта 10000-хау в экземпляр Docker.

```console
docker run -p 10000:10000 -p 10001:10001 mcr.microsoft.com/azure-storage/azurite
```

**Укажите местоположение рабочей области:**

В следующем примере `-v c:/azurite:/data` параметр определяет *c:/azurite* как место расположения данных Azurite. Каталог, *c:/azurite*, должен быть создан перед запуском команды Docker.

```console
docker run -p 10000:10000 -p 10001:10001 -v c:/azurite:/data mcr.microsoft.com/azure-storage/azurite
```

**Выполнить только капля службы**

```console
docker run -p 10000:10000 mcr.microsoft.com/azure-storage/azurite
    azurite-blob --blobHost 0.0.0.0 --blobPort 10000
```

**Установите все параметры Azurite:**

Этот пример показывает, как установить все параметры командной строки. Все приведенные ниже параметры должны быть размещены на единой командной строке.

```console
docker run -p 8888:8888
           -p 9999:9999
           -v c:/azurite:/workspace mcr.microsoft.com/azure-storage/azurite azurite
           -l /workspace
           -d /workspace/debug.log
           --blobPort 8888
           --blobHost 0.0.0.0
           --queuePort 9999
           --queueHost 0.0.0.0
```

Дополнительные сведения о настройке Azurite при запуске можно посмотреть [в командной строке.](#command-line-options)

## <a name="clone-build-and-run-azurite-from-the-github-repository"></a>Клон, сборка и запуск Azurite из репозитория GitHub

Этот метод установки требует, чтобы у вас был установлен [Git.](https://git-scm.com/) Клонировать [репозиторий GitHub](https://github.com/azure/azurite) для проекта Azurite, используя следующую команду консоли.

```console
git clone https://github.com/Azure/Azurite.git
```

После клонирования исходного кода выполните следующие команды из корня клонированного репо для создания и установки Azurite.

```console
npm install
npm run build
npm install -g
```

После установки и строительства Azurite, [см. Run Azurite из командной строки](#run-azurite-from-a-command-line).

## <a name="run-azurite-from-a-command-line"></a>Выполнить Azurite из командной строки

> [!NOTE]
> Azurite не может быть запущен из командной строки, если вы только установили расширение кода Visual Studio. Вместо этого используйте командную палитру VS Code. Для получения дополнительной информации, [см. Установить и запустить Azurite Visual Studio код расширения](#install-and-run-the-azurite-visual-studio-code-extension).

Чтобы немедленно начать работу с командной строкой, создайте каталог под названием **c: «азурит,** затем запустите Azurite, выпустив следующую команду:

```console
azurite --silent --location c:\azurite --debug c:\azurite\debug.log
```

Эта команда говорит Azurite хранить все данные в определенном каталоге, **c: «азурит**. Если опция **--местоположение** опущена, он будет использовать текущий рабочий каталог.

## <a name="command-line-options"></a>Параметры командной строки

В этом разделе подробно описаны переключатели командной строки, доступные при запуске Azurite. Все коммутаторы командной строки не являются обязательными.

```console
C:\Azurite> azurite [--blobHost <IP address>] [--blobPort <port address>] 
    [-d | --debug <log file path>] [-l | --location <workspace path>]
    [--queueHost <IP address>] [--queuePort <port address>]
    [-s | --silent] [-h | --help]
```

**-d** является ярлыком для **--отладка**, **-l** переключатель ярлык для **--местоположение**, **-s** является ярлык для **--молчание**, и **-h** является ярлыком для **--помощь**.

### <a name="blob-listening-host"></a>Blob прослушивания хост

**Необязательно** По умолчанию Azurite будет слушать 127.0.0.1 как локальный сервер. Используйте **переключатель -blobHost,** чтобы установить адрес в соответствии с вашими требованиями.

Принимайте запросы только на локальной машине:

```console
azurite --blobHost 127.0.0.1
```

Разрешить удаленные запросы:

```console
azurite --blobHost 0.0.0.0
```

> [!CAUTION]
> Разрешение удаленных запросов может сделать вашу систему уязвимой для внешних атак.

### <a name="blob-listening-port-configuration"></a>Конфигурация порта прослушивания Blob

**Необязательно** По умолчанию, Azurite будет слушать услугу Blob на порту 10000. Используйте **переключатель -blobPort,** чтобы указать требуемый порт прослушивания.

> [!NOTE]
> После использования настраиваемого порта необходимо обновить строку соединения или соответствующую конфигурацию в инструментах хранения Azure или SDK.

Настройте порт прослушивания услуг Blob:

```console
azurite --blobPort 8888
```

Пусть система автоматически выбрать доступный порт:

```console
azurite --blobPort 0
```

Порт в использовании отображается во время запуска Azurite.

### <a name="queue-listening-host"></a>Усваивающий в очереди

**Необязательно** По умолчанию Azurite будет слушать 127.0.0.1 как локальный сервер. Используйте **переключатель --queueHost** для установки адреса в соответствии с вашими требованиями.

Принимайте запросы только на локальной машине:

```console
azurite --queueHost 127.0.0.1
```

Разрешить удаленные запросы:

```console
azurite --queueHost 0.0.0.0
```

> [!CAUTION]
> Разрешение удаленных запросов может сделать вашу систему уязвимой для внешних атак.

### <a name="queue-listening-port-configuration"></a>Конфигурация порта прослушивания очереди

**Необязательно** По умолчанию Azurite будет слушать службу Очереди в порту 10001. Используйте **переключатель --очередьPort,** чтобы указать необходимый порт прослушивания.

> [!NOTE]
> После использования настраиваемого порта необходимо обновить строку соединения или соответствующую конфигурацию в инструментах хранения Azure или SDK.

Настройка порта прослушивания службы очереди:

```console
azurite --queuePort 8888
```

Пусть система автоматически выбрать доступный порт:

```console
azurite --queuePort 0
```

Порт в использовании отображается во время запуска Azurite.

### <a name="workspace-path"></a>Путь рабочего пространства

**Необязательно** Azurite хранит данные на локальном диске во время выполнения. Используйте переключатель **--местоположение,** чтобы указать путь как местоположение рабочего пространства. По умолчанию будет использоваться текущий рабочий каталог процесса.

```console
azurite --location c:\azurite
```

```console
azurite -l c:\azurite
```

### <a name="access-log"></a>журнал доступа;

**Необязательно** По умолчанию журнал доступа отображается в окне консоли. Отключите отображение журнала доступа с помощью **--тихого** переключателя.

```console
azurite --silent
```

```console
azurite -s
```

### <a name="debug-log"></a>Бревно дебуга

**Необязательно** Бревно отладки содержит подробную информацию о каждом следе стека запроса и исключений. Включите журнал отладки, предоставив допустимый локальный путь файла для **--отладки** коммутатора.

```console
azurite --debug path/debug.log
```

```console
azurite -d path/debug.log
```

### <a name="loose-mode"></a>Свободный режим

**Необязательно** По умолчанию Azurite применяет строгий режим для блокировки неподдерживаемых заголовков запросов и параметров. Отключите строгий режим с помощью **--свободного** переключателя.

```console
azurite --loose
```

Обратите внимание на столичный переключатель ярлыка 'L':

```console
azurite -L
```

## <a name="authorization-for-tools-and-sdks"></a>Авторизация для инструментов и SDK

Подключитесь к Azurite из SDK или инструментов хранения Azure, таких как [Azure Storage Explorer,](https://azure.microsoft.com/features/storage-explorer/)с помощью любой стратегии аутентификации. Требуется аутентификация. Azurite поддерживает авторизацию с помощью общих ключей и общих подписей доступа (SAS). Azurite также поддерживает анонимный доступ к общественным контейнерам.

### <a name="well-known-storage-account-and-key"></a>Известный счет хранения и ключ

Вы можете использовать следующее имя учетной записи и ключ с Azurite. Это та же известная учетная запись и ключ, используемый устаревшим эмулятором хранения Azure.

* Имя счета:`devstoreaccount1`
* Ключ счета:`Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==`

> [!NOTE]
> В дополнение к аутентификации SharedKey, Azurite поддерживает аутентификацию учетной записи и службы SAS. Анонимный доступ также доступен, когда контейнер установлен для обеспечения публичного доступа.

### <a name="connection-string"></a>Строка подключения

Самый простой способ подключения к Azurite из приложения — настроить строку соединения в файлконфигурации приложения, который ссылается на ярлык *UseDevelopmentDevelopmentDevelopment'true.* Вот пример строки соединения в файле *app.config:*

```xml
<appSettings>
  <add key="StorageConnectionString" value="UseDevelopmentStorage=true" />
</appSettings>
```

Дополнительные сведения см. в статье [Настройка строк подключения службы хранилища Azure](storage-configure-connection-string.md).

### <a name="custom-storage-accounts-and-keys"></a>Пользовательские учетные записи и ключи хранения данных

Azurite поддерживает пользовательские имена и `AZURITE_ACCOUNTS` ключи учетной записи `account1:key1[:key2];account2:key1[:key2];...`хранения, устанавливая переменную среды в следующем формате: .

Например, используйте пользовательскую учетную запись хранения, которая имеет один ключ:

```cmd
set AZURITE_ACCOUNTS="account1:key1"
```

Или используйте несколько учетных записей хранения с 2 ключами каждый:

```cmd
set AZURITE_ACCOUNTS="account1:key1:key2;account2:key1:key2"
```

Azurite обновляет пользовательские имена учетных записей и ключей от переменной среды каждую минуту по умолчанию. С помощью этой функции можно динамически повернуть ключ учетной записи или добавить новые учетные записи хранения без перезапуска Azurite.

> [!NOTE]
> Учетная `devstoreaccount1` запись хранилища по умолчанию отключена при установке пользовательских учетных записей хранения.

> [!NOTE]
> Обновление строки соединения соответственно при использовании пользовательских имен и ключей учетной записи.

> [!NOTE]
> Используйте `export` ключевое слово для настройки переменных `set` среды в среде Linux, используйте в Windows.

### <a name="storage-explorer"></a>Обозреватель службы хранилища

В Azure Storage Explorer подключитесь к Azurite, нажав значок **учетной записи Add,** затем выберите **Прикрепите к локальному эмулятору** и нажмите **Connect.**

## <a name="differences-between-azurite-and-azure-storage"></a>Различия между Azurite и Azure Storage

Существуют функциональные различия между локальным экземпляром Azurite и учетной записью хранения Azure в облаке.

### <a name="endpoint-and-connection-url"></a>URL-адрес конечных точек и подключения

Конечные точки службы для Azurite отличаются от конечных точек учетной записи хранилища Azure. Локальный компьютер не делает разрешение доменных имен, требуя, чтобы конечные точки Azurite были локальными адресами.

Когда вы обращаетесь к ресурсу в учетной записи хранилища Azure, имя учетной записи является частью имени узла URI. Рассматриваемый ресурс является частью пути URI:

`<http|https>://<account-name>.<service-name>.core.windows.net/<resource-path>`

Следующий URI является действительным адресом капли в учетной записи хранения Azure:

`https://myaccount.blob.core.windows.net/mycontainer/myblob.txt`

Поскольку локальный компьютер не делает разрешение доменных имен, имя учетной записи является частью пути URI вместо имени хоста. Используйте следующий формат URI для ресурса в Azurite:

`http://<local-machine-address>:<port>/<account-name>/<resource-path>`

Следующий адрес может быть использован для доступа к каплей в Azurite:

`http://127.0.0.1:10000/myaccount/mycontainer/myblob.txt`

### <a name="scaling-and-performance"></a>Масштабирование и производительность

Azurite не является масштабируемой службой хранения данных и не поддерживает большое количество одновременных клиентов. Нет гарантии производительности. Azurite предназначен для разработки и тестирования целей.

### <a name="error-handling"></a>Обработка ошибок

Azurite согласовывается с логикой обработки ошибок хранилища Azure, но есть различия. Например, сообщения об ошибках могут отличаться, в то время как коды состояния ошибок выравниваются.

### <a name="ra-grs"></a>RA-GRS

Azurite поддерживает гео-излишнюю репликацию для чтения доступа (RA-GRS). Для ресурсов хранения получите доступ к вторичному местоположению, **применяя-вторичное** имя учетной записи. Например, для доступа к каплей можно использовать следующий адрес, используя вторичную часть для чтения в Azurite:

`http://127.0.0.1:10000/devstoreaccount1-secondary/mycontainer/myblob.txt`

## <a name="azurite-is-open-source"></a>Азурит с открытым исходным кодом

Взносы и предложения для Azurite приветствуются. Перейдите на страницу проекта Azurite [GitHub](https://github.com/Azure/Azurite/projects) или [вопросы GitHub](https://github.com/Azure/Azurite/issues) для вех и рабочих элементов, которые мы отслеживаем для предстоящих функций и исправлений ошибок. Подробные рабочие элементы также отслеживаются в GitHub.

## <a name="next-steps"></a>Дальнейшие действия

* [Используйте эмулятор хранения Azure для разработки и тестирования](storage-use-emulator.md) документов наустаревшего эмулятор хранения Azure, который заменяется Azurite.
* [Нанастройка строк подключения Кисят Azure](storage-configure-connection-string.md) объясняет, как собрать действительную строку подключения Azure STorage.
