---
title: Восстановление контейнера учетной записи хранения
description: Восстановление контейнера учетной записи хранения
services: storage
author: v-miegge
ms.topic: troubleshooting
ms.author: kartup
ms.date: 10/30/2019
ms.service: storage
manager: dcscontentpm
ms.openlocfilehash: 8b9b69fb32edab54fb2df558ea292df264e00cbb
ms.sourcegitcommit: dd3db8d8d31d0ebd3e34c34b4636af2e7540bd20
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/22/2020
ms.locfileid: "77562281"
---
# <a name="storage-account-container-recovery"></a>Восстановление контейнера учетной записи хранения

Служба хранилища Azure обеспечивает устойчивость данных благодаря автоматическим репликам. Однако это не может помешать коду приложения и пользователям повредить данные, случайно или намеренно. Чтобы сохранить точность данных в случае ошибок приложения или пользователя, требуются более сложные приемы, например копирование данных в дополнительное хранилище и ведение журнала аудита.

## <a name="checking-azure-storage-account-type"></a>Проверка типа учетной записи хранения Azure

1. Перейдите на [портал Azure](https://portal.azure.com/).

2. Перейдите к учетной записи хранения.

3. В разделе **Обзор** проверьте наличие **репликации**.

   ![Изображение](media/storage-account-container-recovery/1.png)

4. Если тип репликации — **GRS/RA-GRS**, восстановление контейнера учетной записи возможно без гарантии. Для всех остальных типов репликации это невозможно.

5. Соберите следующие сведения и отправьте запрос в службу поддержки с помощью служба поддержки Майкрософт.

   * Имя учетной записи хранения:
   * Имя контейнера:
   * Время удаления:

   В следующей таблице приведены общие сведения о области восстановления контейнера учетной записи хранения в зависимости от стратегии репликации.

   |Тип содержимого|LRS|ZRS|GRS|RA-GRS| 
   |---|---|---|---|---|
   |Контейнер хранилища|Нет|Нет|Да|Да| 

   * Мы можем попытаться восстановить контейнер учетной записи хранения, но без какой бы то ни было гарантии. 

## <a name="things-not-to-do-for-recover-to-be-successful"></a>Все, что не нужно делать для восстановления, чтобы быть успешным

* Не следует повторно создавать контейнер (с тем же именем).  
* Если вы уже создали контейнер, необходимо удалить его перед тем, как будет создан запрос на поддержку восстановления.

## <a name="steps-to-prevent-this-in-the-future"></a>Действия по предотвращению этого в будущем

1. Чтобы избежать этого в будущем, рекомендуемой функцией является [обратимое удаление](https://docs.microsoft.com/azure/storage/blobs/storage-blob-soft-delete).

2. Мы также рекомендуем использовать функцию [создания моментальных снимков](https://docs.microsoft.com/rest/api/storageservices/Creating-a-Snapshot-of-a-Blob) .
 
## <a name="next-steps"></a>Следующие шаги

Ниже приведены два образца кода для этой функции:

  * [Создание моментального снимка BLOB-объекта и управление им в .NET](https://docs.microsoft.com/azure/storage/storage-blob-snapshots)
  * [Использование моментальных снимков больших двоичных объектов с помощью PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)
  

