---
title: azcopy Sync | Документация Майкрософт
description: В этой статье содержатся справочные сведения о команде azcopy Sync.
author: normesta
ms.service: storage
ms.topic: reference
ms.date: 10/16/2019
ms.author: normesta
ms.subservice: common
ms.reviewer: zezha-msft
ms.openlocfilehash: d855019be7f357a35a26d14e68ba3d427d984e17
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82086034"
---
# <a name="azcopy-sync"></a>azcopy sync

Реплицирует исходное расположение в целевое расположение.

## <a name="synopsis"></a>Краткий обзор

Время последнего изменения используется для сравнения. Файл пропускается, если время последнего изменения в назначении является более новым.

Поддерживаются следующие пары.

- локальный < — > большого двоичного объекта Azure (можно использовать проверку подлинности SAS или OAuth).
- BLOB-объект Azure < — > большого двоичного объекта Azure (источник должен включать SAS или является общедоступным; для назначения можно использовать проверку подлинности SAS или OAuth).
- Файловый < Azure — > файл Azure (источник должен включать SAS или является общедоступным; Для назначения следует использовать проверку подлинности SAS.)

Команда Sync отличается от команды копирования несколькими способами.

1. По умолчанию рекурсивный флаг имеет значение true, а Sync копирует все подкаталоги. Синхронизация копирует только файлы верхнего уровня внутри каталога, если для рекурсивного флага задано значение false.
2. При синхронизации между виртуальными каталогами добавьте замыкающую косую черту в путь (см. примеры), если существует большой двоичный объект с таким же именем, как у одного из виртуальных каталогов.
3. Если флаг "Делетедестинатион" имеет значение true или Prompt, то Sync удалит файлы и большие двоичные объекты в месте назначения, которые отсутствуют в источнике.

## <a name="related-conceptual-articles"></a>Связанные концептуальные статьи

- [Get started with AzCopy](storage-use-azcopy-v10.md) (Начало работы с AzCopy)
- [Перенос данных с помощью AzCopy и хранилища BLOB-объектов](storage-use-azcopy-blobs.md)
- [Transfer data with AzCopy and file storage](storage-use-azcopy-files.md) (Передача данных с помощью AzCopy и хранилища файлов)
- [Configure, optimize, and troubleshoot AzCopy](storage-use-azcopy-configure.md) (Настройка, оптимизация и устранение неполадок с AzCopy)

### <a name="advanced"></a>Дополнительно

Если не указать расширение файла, AzCopy автоматически определит тип содержимого файлов при отправке с локального диска на основе расширения или содержимого файла (если не указано расширение).

Встроенная таблица подстановки является небольшой, но в UNIX она дополняется файлами MIME локальной системы, если она доступна по одному или нескольким из следующих имен:

- /етк/миме.типес
- /etc/apache2/mime.types
- /етк/апаче/миме.типес

В Windows типы MIME извлекаются из реестра.

```azcopy
azcopy sync <source> <destination> [flags]
```

## <a name="examples"></a>Примеры

Синхронизировать один файл:

```azcopy
azcopy sync "/path/to/file.txt" "https://[account].blob.core.windows.net/[container]/[path/to/blob]"
```

> [!NOTE]
> Целевой BLOB-объект *должен* существовать. Используйте `azcopy copy` для копирования одного файла, который еще не существует в месте назначения. В противном случае возникает следующая ошибка `Cannot perform sync due to error: sync must happen between source and destination of the same type, e.g. either file <-> file, or directory/container <-> directory/container`:.

То же, что и выше, но на этот раз можно также вычислить хэш MD5 содержимого файла и сохранить его как свойство Content-MD5 объекта BLOB:

```azcopy
azcopy sync "/path/to/file.txt" "https://[account].blob.core.windows.net/[container]/[path/to/blob]" --put-md5
```

Синхронизируйте весь каталог, включая его вложенные каталоги (Обратите внимание, что рекурсия включена по умолчанию):

```azcopy
azcopy sync "/path/to/dir" "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]"
```

или диспетчер конфигурации служб

```azcopy
azcopy sync "/path/to/dir" "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]" --put-md5
```

Синхронизировать только самые популярные файлы внутри каталога, но не его вложенные каталоги:

```azcopy
azcopy sync "/path/to/dir" "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]" --recursive=false
```

Синхронизировать подмножество файлов в каталоге (например, только файлы JPG и PDF или имя файла «Ексактнаме»):

```azcopy
azcopy sync "/path/to/dir" "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]" --include="*.jpg;*.pdf;exactName"
```

Синхронизировать весь каталог, но исключить определенные файлы из области (например: каждый файл, начинающийся с foo или заканчивающийся на Bar):

```azcopy
azcopy sync "/path/to/dir" "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]" --exclude="foo*;*bar"
```

Синхронизировать один большой двоичный объект:

```azcopy
azcopy sync "https://[account].blob.core.windows.net/[container]/[path/to/blob]?[SAS]" "https://[account].blob.core.windows.net/[container]/[path/to/blob]"
```

Синхронизация виртуального каталога:

```azcopy
azcopy sync "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]?[SAS]" "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]" --recursive=true
```

Синхронизируйте виртуальный каталог, имя которого совпадает с именем большого двоичного объекта (добавьте замыкающую косую черту в путь для устранения неоднозначности):

```azcopy
azcopy sync "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]/?[SAS]" "https://[account].blob.core.windows.net/[container]/[path/to/virtual/dir]/" --recursive=true
```

Синхронизация каталога файлов Azure (с тем же синтаксисом, что и BLOB-объект):

```azcopy
azcopy sync "https://[account].file.core.windows.net/[share]/[path/to/dir]?[SAS]" "https://[account].file.core.windows.net/[share]/[path/to/dir]" --recursive=true
```

> [!NOTE]
> Если флаги включения и исключения используются вместе, будут рассматриваться только файлы, соответствующие шаблонам включения, но те, которые соответствуют шаблонам исключения, всегда будут игнорироваться.

## <a name="options"></a>Элемент Options

**--Block-Size-МБ** float используйте этот размер блока (указанный в MIB) при отправке в службу хранилища Azure или скачивании из службы хранилища Azure. Значение по умолчанию вычисляется автоматически на основе размера файла. Десятичные дроби разрешены (например: 0,25).

**--Check-Md5** определяет, насколько строго следует проверять хэши MD5 при скачивании. Этот параметр доступен только при скачивании. Доступные значения: "не проверять", "вход", "Фаилифдифферент", "Фаилифдифферентормиссинг". (по умолчанию "Фаилифдифферент"). (по умолчанию "Фаилифдифферент")

**--Delete — строка назначения** определяет, следует ли удалить лишние файлы из места назначения, которые отсутствуют в источнике. Можно задать значение true, false или Prompt. Если задано значение Prompt, пользователю будет предложено ввести вопрос перед планированием удаления файлов и больших двоичных объектов. (значение по умолчанию — false). (по умолчанию "false")

**--Exclude-Attributes** String (только для Windows) исключает файлы, атрибуты которых соответствуют списку атрибутов. Например: A; #D0 Cерверный

**--Строка исключения-путь** исключает эти пути при копировании. Этот параметр не поддерживает подстановочные знаки (*). Проверяет префикс относительного пути (например: myFolder; myFolder/Субдирнаме/File. PDF). При использовании в сочетании с обходом учетной записи пути не включают имя контейнера.

**--исключение-шаблон** строка исключает файлы, имя которых совпадает со списком шаблонов. Например: \*. jpg; \*. PDF; ексактнаме

**-h,--** Справка Справка по синхронизации

**--include — строка атрибутов** (только для Windows) включает только те файлы, атрибуты которых соответствуют списку атрибутов. Например: A; #D0 Cерверный

**--include — строка шаблона** включает только файлы, имена которых совпадают с списком шаблонов. Например: \*. jpg; \*. PDF; ексактнаме

**--строка на уровне журнала** определяет уровень детализации журнала для файла журнала, доступные уровни: сведения (все запросы и ответы), предупреждение (медленные ответы), ошибки (только неудачные запросы) и нет (нет выходных журналов). (сведения по умолчанию). (по умолчанию "INFO")

**--Размещение-MD5**                     Создайте хэш MD5 для каждого файла и сохраните хэш как свойство Content-MD5 целевого большого двоичного объекта или файла. (По умолчанию хэш не создается.) Доступно только при отправке.

**--recursive**                   По умолчанию имеет значение true, если при синхронизации между каталогами выполняется рекурсивный поиск подкаталогов. (значение по умолчанию — true). (по умолчанию true)

## <a name="options-inherited-from-parent-commands"></a>Параметры, унаследованные от родительских команд

|Параметр|Описание|
|---|---|
|--Cap-Мбит/с UInt32|Скорость передачи с прописными буквами в мегабит в секунду. Посекундная пропускная способность может немного отличаться от ограничения. Если этот параметр имеет значение 0 или пропущен, пропускная способность не ограничена.|
|--строка выходного типа|Формат вывода команды. Среди вариантов: Text, JSON. Значение по умолчанию — "Text".|

## <a name="see-also"></a>См. также

- [azcopy](storage-ref-azcopy.md)
