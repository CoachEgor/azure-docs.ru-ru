---
title: Используйте ресурсный провайдер Azure Storage для доступа к ресурсам управления
description: Поставщик ресурсов Ресурсов Azure Storage — это служба, предоставляющая доступ к ресурсам управления для хранения Azure. Для создания, обновления, управления и удаления ресурсов, таких как учетные записи хранения, частных конечных точек и ключей доступа к учетным записям.
services: storage
author: tamram
ms.service: storage
ms.topic: conceptual
ms.date: 12/12/2019
ms.author: tamram
ms.reviewer: cbrooks
ms.subservice: common
ms.openlocfilehash: f5d42a6a0567d3949bc4b0fb1947450a9c957f18
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75972348"
---
# <a name="use-the-azure-storage-resource-provider-to-access-management-resources"></a>Используйте ресурсный провайдер Azure Storage для доступа к ресурсам управления

Azure Resource Manager — это служба развертывания и управления для Azure. Поставщик ресурсов ресурсов Azure Является службой, основанной на менеджере ресурсов Azure и обеспечивающей доступ к ресурсам управления для хранения Azure. Для создания, обновления, управления и удаления ресурсов, таких как учетные записи хранения, частных конечных точек и ключей доступа к учетным записям. Для получения дополнительной информации об менеджере ресурсов Azure можно ознакомиться на [обзоре менеджера ресурсов Azure.](/azure/azure-resource-manager/resource-group-overview)

Можно использовать поставщика ресурсов Ресурсов Azure Storage для выполнения таких действий, как создание или удаляние учетной записи хранилища или получение списка учетных записей хранилища в подписке. Чтобы авторизовать запросы в отношении поставщика ресурсов ресурсов Azure, используйте Active Directory Azure (Azure AD). В этой статье описывается, как назначать разрешения ресурсам управления, и указывается на примеры, которые показывают, как делать запросы против поставщика ресурсов ресурсов Ресурсов Ресурсов Azure.

## <a name="management-resources-versus-data-resources"></a>Ресурсы управления и ресурсы данных

Корпорация Майкрософт предоставляет два REST AIS для работы с ресурсами хранения данных Azure. Эти AAP составляют основу всех действий, которые можно выполнять против Хранилища Azure. API Azure Storage REST позволяет работать с данными в учетной записи хранения, включая каплю, очередь, файл и данные таблицы. Поставщик ресурсов ресурсов Azure Storage REST API позволяет работать с учетной записью хранения и связанными с ними ресурсами.

Запрос, который читает или записывает данные blob, требует разных разрешений, чем запрос, выполняемый в ходе операции управления. RBAC обеспечивает мелкозернистый контроль над разрешениями на оба типа ресурсов. При присвоении роли RBAC директору службы безопасности убедитесь, что вы понимаете, какие разрешения будут предоставлены принципу. Подробная ссылка, описывающая, какие действия связаны с каждой встроенной ролью RBAC, см. встроенные [роли для ресурсов Azure.](../../role-based-access-control/built-in-roles.md)

Azure Storage поддерживает использование Azure AD для авторизации запросов в отношении хранения Blob и Очереди. Для получения информации о роли RBAC для операций с данными blob и очередей см. [Авторизовать доступ к каплям и очередям с помощью Active Directory.](storage-auth-aad.md)

## <a name="assign-management-permissions-with-role-based-access-control-rbac"></a>Назначать разрешения управления с помощью элемента управления доступом на основе ролей (RBAC)

Каждая подписка Azure имеет связанный с Azure Active Directory, который управляет пользователями, группами и приложениями. Пользователь, группа или приложение также называют принципом безопасности в контексте [платформы идентификации Майкрософт.](/azure/active-directory/develop/) Вы можете предоставить доступ к ресурсам в подписке на принцип безопасности, который определяется в Active Directory, используя элементуправления доступа на основе ролей (RBAC).

При присвоении роли RBAC директору безопасности вы также указываете область, в которой действуют разрешения, выданные ролью. Для управления можно назначить роль на уровне подписки, группы ресурсов или учетной записи хранилища. Вы можете назначить роль RBAC директору безопасности с помощью [портала Azure,](https://portal.azure.com/) [инструментов Azure CLI,](../../cli-install-nodejs.md) [PowerShell](/powershell/azureps-cmdlets-docs)или [поставщика ресурсов хранения данных Azure REST API.](/rest/api/storagerp)

Для получения дополнительной информации о RBAC см. [Что такое ролевый элемент управления доступом (RBAC) для ресурсов Azure?](../../role-based-access-control/overview.md) и [роли администратора классических подписок, роли Администратора Azure RBAC и функции администратора Администратора Azure AD.](../../role-based-access-control/rbac-and-directory-admin-roles.md)

### <a name="built-in-roles-for-management-operations"></a>Встроенные роли для управленческих операций

Azure предоставляет встроенные роли, которые дают разрешения на вызовы управления. Azure Storage также предоставляет встроенные роли специально для использования с поставщиком ресурсов ресурсов Azure Storage.

Встроенные роли, которые дают разрешения на вызов операций управления хранением, включают роли, описанные в следующей таблице:

|    Роль RBAC    |    Описание    |    Включает доступ к ключам учетной записи?    |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
| **Владелец** | Можно управлять всеми ресурсами хранения и доступом к ресурсам.  | Да, предоставляет разрешения на просмотр и регенерацию ключей учетной записи хранилища. |
| **Участник**  | Можно управлять всеми ресурсами хранения, но не может управлять присвоением ресурсов. | Да, предоставляет разрешения на просмотр и регенерацию ключей учетной записи хранилища. |
| **Читатель** | Можно просматривать информацию об учетной записи хранилища, но не может просматривать ключи учетной записи. | Нет. |
| **Участник учетной записи хранения** | Можно управлять учетной записью хранилища, получать информацию о группах и ресурсах группы ресурсов подписки, а также создавать и управлять развертыванием групп ынаксиных ресурсов. | Да, предоставляет разрешения на просмотр и регенерацию ключей учетной записи хранилища. |
| **Администратор доступа пользователя** | Можно управлять доступом к учетной записи хранилища.   | Да, позволяет директору службы безопасности назначать любые разрешения себе и другим. |
| **Участник виртуальной машины** | Управлять виртуальными машинами, но не учетной записью хранения, к которой они подключены.   | Да, предоставляет разрешения на просмотр и регенерацию ключей учетной записи хранилища. |

В третьем столбце в таблице указывается, поддерживает ли встроенная роль **Microsoft.Storage/storageAccounts/listkeys/action.** Это действие предоставляет разрешения на чтение и регенерацию ключей учетной записи хранилища. Разрешения на доступ к ресурсам управления хранилищем Ресурсов Azure также не включают разрешения на доступ к данным. Однако, если пользователь имеет доступ к ключам учетной записи, он может использовать ключи учетной записи для доступа к данным хранилища Azure через авторизацию Shared Key.

### <a name="custom-roles-for-management-operations"></a>Пользовательские роли для управленческих операций

Azure также поддерживает определение пользовательских ролей RBAC для доступа к ресурсам управления. Для получения дополнительной информации [Custom roles for Azure resources](../../role-based-access-control/custom-roles.md)о пользовательских ролях см.

## <a name="code-samples"></a>Примеры кода

На примерах кодов, которые показывают, как авторизовать и вызвать операции управления из библиотек управления хранилищами Azure, см.

- [.NET](https://github.com/Azure-Samples/storage-dotnet-resource-provider-getting-started)
- [Java](https://github.com/Azure-Samples/storage-java-manage-storage-accounts)
- [Node.js](https://github.com/Azure-Samples/storage-node-resource-provider-getting-started)
- [Python](https://github.com/Azure-Samples/storage-python-manage)

## <a name="azure-resource-manager-versus-classic-deployments"></a>Менеджер ресурсов Azure по сравнению с классическими развертываниями

Модель развертывания с помощью Azure Resource Manager и классическая модель представляют собой два разных способа развертывания решений Azure и управления ими. Корпорация Майкрософт рекомендует использовать модель развертывания ресурсов Azure Manager при создании новой учетной записи хранения. По возможности корпорация Майкрософт также рекомендует воссоздать существующие классические учетные записи хранения данных с помощью модели «Менеджер ресурсов». Хотя вы можете создать учетную запись хранения с помощью классической модели развертывания, классическая модель является менее гибкой и в конечном итоге будет обесточена.

Для получения дополнительной информации о [Resource Manager and classic deployment](../../azure-resource-manager/management/deployment-models.md)моделях развертывания Azure см.

## <a name="next-steps"></a>Дальнейшие действия

- [Обзор менеджера ресурсов Azure](/azure/azure-resource-manager/resource-group-overview)
- [Общие сведения об управлении доступом на основе ролей (RBAC) для ресурсов Azure](../../role-based-access-control/overview.md)
- [Цели масштабируемости для поставщика ресурсов ресурсов ресурсов Azure](scalability-targets-resource-provider.md)
