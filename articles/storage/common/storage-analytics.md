---
title: Использование аналитики службы хранилища Azure для сбора данных журналов и метрик | Документация Майкрософт
description: Аналитика хранилища позволяет отслеживать данные метрик для всех служб хранилища, а также для сбора журналов по хранилищам BLOB-объектов, очередей и таблиц.
author: normesta
ms.service: storage
ms.topic: conceptual
ms.date: 03/03/2017
ms.author: normesta
ms.reviewer: fryu
ms.subservice: common
ms.custom: monitoring
ms.openlocfilehash: 9a081a28d4c96e3c38986cbb3c0990bc89c5ab99
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "83684479"
---
# <a name="storage-analytics"></a>аналитики хранилища

Аналитика хранилища Azure ведет журналы и предоставляет данные метрик для учетной записи хранения. Эти данные можно использовать для трассировки запросов, анализа тенденций использования и диагностики проблем учетной записи хранения.

Для использования аналитики хранилища ее необходимо включить отдельно для каждой из отслеживаемых служб. Ее можно включить на [портале Azure](https://portal.azure.com). Дополнительные сведения см. в статье [Мониторинг учетной записи хранения на портале Azure](storage-monitor-storage-account.md). Аналитику хранилища также можно включить программно через REST API или клиентскую библиотеку. Чтобы включить аналитику хранилища для каждой службы, используйте операции [Задать свойства службы BLOB-объектов](/rest/api/storageservices/set-blob-service-properties), [Задание свойств службы очередей](/rest/api/storageservices/set-queue-service-properties), [Set Table Service Properties](/rest/api/storageservices/set-table-service-properties) (Задание свойств службы таблиц) и [Set File Service Properties](/rest/api/storageservices/Get-File-Service-Properties) (Задание свойств службы файлов).

Объединенные данные хранятся в известном большом двоичном объекте (для ведения журнала) и в известных таблицах (для метрик), доступ к которым можно получить с помощью API службы BLOB-объектов и службы таблиц.

В аналитике хранилища установлено ограничение в 20 ТБ для объема хранимых данных, не зависящее от общего ограничения на вашу учетную запись хранения. Чтобы получить дополнительные сведения об ограничениях учетной записи хранения см. статью [Целевые показатели масштабируемости и производительности для учетных записей хранения ценовой категории "Стандартный"](scalability-targets-standard-account.md).

Дополнительные указания о функциях аналитики хранилища и других инструментах идентификации, диагностики и устранения неполадок, связанных со службой хранилища Azure, см. в статье [Мониторинг, диагностика и устранение неполадок службы хранилища Microsoft Azure](storage-monitoring-diagnosing-troubleshooting.md).

## <a name="billing-for-storage-analytics"></a>Оплата аналитики хранилища

Все данные метрик записываются службами учетной записи хранения. В результате каждая из операций записи, выполняемая аналитикой хранилища, тарифицируется. Кроме того, объем хранилища, используемый данными метрик, также тарифицируется.

Плата взимается за следующие действия, выполняемые аналитикой хранилища:

* запросы на создание больших двоичных объектов для ведения журнала;
* запросы на создание сущностей таблиц для метрик.

Если вы настроили политику хранения данных, за транзакции удаления, выполняемые, когда аналитика хранилища удаляет старые данные журналов и метрики, плата не взимается. В то же время транзакции удаления, инициируемые клиентом, тарифицируются. Дополнительную информацию о политиках хранения см. в разделе [Задание политики хранения данных для аналитик хранилища](https://msdn.microsoft.com/library/azure/hh343263.aspx).

### <a name="understanding-billable-requests"></a>Общая информация о тарифицируемых запросах

Каждый запрос к службе хранилища учетной записи либо тарифицируется, либо нет. Аналитика хранилища регистрирует каждый отдельный запрос к службе и включает сообщение о состоянии, указывающее, как был обработан запрос. Аналогичным образом аналитика хранилища сохраняет метрики как для операций службы, так и для операций API этой службы, включая процентные доли и количество определенных сообщений о состоянии. Совместно эти функции помогают проанализировать тарифицируемые запросы, улучшить приложение и диагностировать проблемы запросов к службам. Дополнительную информацию о выставлении счетов см. в разделе [Общая информация о выставлении счетов за использование хранилища Azure — пропускная способность, транзакции и емкость](https://docs.microsoft.com/archive/blogs/windowsazurestorage/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity).

При просмотре данных аналитики хранилища вы можете пользоваться таблицами из раздела [Операции с протоколированием и сообщения о состоянии аналитик хранилища](/rest/api/storageservices/storage-analytics-logged-operations-and-status-messages) , чтобы определить, какие запросы тарифицируются. Затем можно сверить данные журналов и метрик с сообщениями о состоянии, чтобы определить, тарифицировался ли отдельный запрос. Можно также воспользоваться таблицами из предыдущего раздела, чтобы определить доступность службы хранилища или отдельной операции API.

## <a name="next-steps"></a>Дальнейшие действия
* [Мониторинг учетной записи хранения на портале Azure](storage-monitor-storage-account.md)
* [Метрики Аналитики Службы хранилища](storage-analytics-metrics.md)
* [Ведение журнала аналитики службы хранилища](storage-analytics-logging.md)
