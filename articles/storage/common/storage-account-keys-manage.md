---
title: Управление ключами доступа к учетной записи
titleSuffix: Azure Storage
description: Узнайте, как просматривать, управлять и поворачивать ключи доступа к учетной записи хранилища.
services: storage
author: tamram
ms.service: storage
ms.topic: how-to
ms.date: 03/31/2020
ms.author: tamram
ms.openlocfilehash: 50c0980800bbc9b2951bf9107114c1a4d9265558
ms.sourcegitcommit: b55d7c87dc645d8e5eb1e8f05f5afa38d7574846
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81454668"
---
# <a name="manage-storage-account-access-keys"></a>Управление ключами доступа к учетной записи хранилища

При создании учетной записи хранения платформа Azure создает два 512-разрядных ключа доступа к учетной записи хранения. Эти ключи могут быть использованы для авторизации доступа к данным в учетной записи хранилища через авторизацию Shared Key.

Корпорация Майкрософт рекомендует использовать Azure Key Vault для управления ключами доступа, а также регулярно вращать и восстанавливать ключи. Использование Azure Key Vault позволяет легко вращать клавиши без прерывания работы с приложениями. Вы также можете вручную повернуть клавиши.

[!INCLUDE [storage-account-key-note-include](../../../includes/storage-account-key-note-include.md)]

## <a name="view-access-keys-and-connection-string"></a>Просмотр ключей доступа и строки подключения

[!INCLUDE [storage-view-keys-include](../../../includes/storage-view-keys-include.md)]

## <a name="use-azure-key-vault-to-manage-your-access-keys"></a>Используйте Azure Key Vault для управления ключами доступа

Корпорация Майкрософт рекомендует использовать Azure Key Vault для управления и поворота ключей доступа. Приложение может безопасно получить доступ к ключам в Key Vault, чтобы избежать их хранения с кодом приложения. Для получения дополнительной информации об использовании Key Vault для управления ключами см.

- [Управление ключами учетной записи хранилища с помощью Azure Key Vault и PowerShell](../../key-vault/secrets/overview-storage-keys-powershell.md)
- [Управление ключами учетной записи хранилища с помощью Azure Key Vault и Azure CLI](../../key-vault/secrets/overview-storage-keys.md)

## <a name="manually-rotate-access-keys"></a>Ручно поверните клавиши доступа

Корпорация Майкрософт рекомендует периодически поворачивать ключи доступа, чтобы обеспечить безопасность учетной записи хранилища. Если это возможно, используйте Azure Key Vault для управления ключами доступа. Если вы не используете Key Vault, вам нужно будет повернуть ключи вручную.

Таким образом, чтобы можно было осуществлять смену ключей, назначаются два ключа доступа. Наличие двух ключей гарантирует, что приложение поддерживает доступ к хранилищем Azure на протяжении всего процесса.

> [!WARNING]
> Повторное создание ключей доступа может влиять на работу ваших приложений или служб Azure, которые зависят от ключа учетной записи хранения. Все клиенты, использующие ключ учетной записи для доступа к учетной записи хранения, должны быть обновлены, чтобы использовать новый ключ, включая службы мультимедиа, облачные, классические и мобильные приложения, а также приложения для графического пользовательского интерфейса для службы хранилища Azure, такие как [Обозреватель службы хранилища Azure](https://azure.microsoft.com/features/storage-explorer/).

Для смены ключей учетной записи хранения следуйте приведенной процедуре.

1. Обновите строки подключения в коде приложения, чтобы использовать вторичный ключ.
2. Повторное создание основного ключа доступа для вашей учетной записи хранения. В колонке **Ключи доступа** на портале Azure щелкните **Повторно создать Key1**, а затем нажмите кнопку **Да**, чтобы подтвердить создание ключа.
3. Обновите строки подключения в коде, чтобы они ссылались на новый основной ключ доступа.
4. Повторите процедуру, чтобы повторно создать вторичный ключ доступа.

> [!NOTE]
> Во всех приложениях рекомендуется использовать одновременно только один из ключей. Если в одних приложениях используется ключ 1, а в других — ключ 2, вы не сможете произвести смену ключей без того, чтобы некоторые приложения утратили доступ.

Чтобы повернуть ключи доступа учетной записи, пользователь должен быть администратором службы, либо должен быть назначен роль RBAC, которая включает в себя **Microsoft.Storage/storageAccounts/regeneratekey/action.** Некоторые встроенные роли RBAC, которые включают **Contributor**это действие, являются ролями **роли функции функции функции функции ключевой службы оператора учетной** **записи**хранилища. Для получения дополнительной информации о роли администратора службы смотрите [роли администратора подписки Classic, роли Azure RBAC и функции Azure AD.](../../role-based-access-control/rbac-and-directory-admin-roles.md) Подробную информацию о встроенных ролях RBAC для Хранения Azure можно узнать в разделе **«Хранение»** в [встроенных ролях Azure rBAC.](../../role-based-access-control/built-in-roles.md#storage)

## <a name="next-steps"></a>Следующие шаги

- [Общие сведения об учетной записи хранения](storage-account-overview.md)
- [Создание учетной записи хранилища](storage-account-create.md)
