---
title: Проверка свойства "время последней синхронизации" для учетной записи хранения
titleSuffix: Azure Storage
description: Узнайте, как проверить свойство время последней синхронизации для геореплицированной учетной записи хранения. Свойство время последней синхронизации указывает время, когда все операции записи из основного региона были успешно записаны в дополнительный регион.
services: storage
author: tamram
ms.service: storage
ms.topic: how-to
ms.date: 04/16/2020
ms.author: tamram
ms.reviewer: artek
ms.subservice: common
ms.openlocfilehash: afcadd55e87579b25f03176fa3227024863b90fb
ms.sourcegitcommit: c535228f0b77eb7592697556b23c4e436ec29f96
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2020
ms.locfileid: "82858509"
---
# <a name="check-the-last-sync-time-property-for-a-storage-account"></a>Проверка свойства "время последней синхронизации" для учетной записи хранения

При настройке учетной записи хранения можно указать, что данные копируются в дополнительный регион, который находится в сотнях миль из основного региона. Георепликация обеспечивает устойчивость данных в случае серьезного сбоя в основном регионе, например в случае стихийного сбоя. Если дополнительно включить доступ на чтение к дополнительному региону, данные останутся доступными для операций чтения, если основной регион станет недоступным. Вы можете разработать приложение так, чтобы оно было легко переключаться на чтение из дополнительного региона, если основной регион не отвечает.

Геоизбыточное хранилище (GRS) и хранилище, избыточное в пределах геозоны (ГЗРС), реплицируют данные асинхронно в дополнительный регион. Чтобы получить доступ на чтение к дополнительному региону, включите геоизбыточное хранилище с доступом на чтение (RA-GRS) или геоизбыточное хранилище с доступом на чтение (RA-ГЗРС). Дополнительные сведения о различных вариантах избыточности, предлагаемых службой хранилища Azure, см. в статье [избыточность службы хранилища Azure](storage-redundancy.md).

В этой статье описывается, как проверить свойство **времени последней синхронизации** для учетной записи хранения, чтобы можно было оценить несоответствие между основным и дополнительным регионами.

## <a name="about-the-last-sync-time-property"></a>О свойстве времени последней синхронизации

Поскольку Георепликация является асинхронной, возможно, данные, записанные в основной регион, еще не были записаны в дополнительный регион в момент возникновения сбоя. Свойство **время последней синхронизации** указывает время, в течение которого данные из основного региона были успешно записаны в дополнительный регион. Все операции записи, сделанные в основном регионе до последней синхронизации, доступны для считывания из дополнительного расположения. Записи, сделанные в основном регионе после последней синхронизации, могут быть недоступны для чтения.

**Последнее свойство время синхронизации** — это значение даты и времени по Гринвичу.

## <a name="get-the-last-sync-time-property"></a>Получение свойства времени последней синхронизации

Для получения значения свойства **время последней синхронизации** можно использовать PowerShell или Azure CLI.

# <a name="powershell"></a>[PowerShell](#tab/azure-powershell)

Чтобы получить время последней синхронизации для учетной записи хранения с помощью PowerShell, установите версию модуля AZ. Storage, который поддерживает получение статистики георепликации. Например:

```powershell
Install-Module Az.Storage –Repository PSGallery -RequiredVersion ??? –AllowPrerelease –AllowClobber –Force
```

Затем проверьте свойство **жеорепликатионстатс. ластсинктиме** учетной записи хранения. Не забудьте заменить значения заполнителей собственными значениями:

```powershell
$lastSyncTime = $(Get-AzStorageAccount -ResourceGroupName <resource-group> `
    -Name <storage-account> `
    -IncludeGeoReplicationStats).GeoReplicationStats.LastSyncTime
```

# <a name="azure-cli"></a>[Azure CLI](#tab/azure-cli)

Чтобы получить время последней синхронизации для учетной записи хранения с Azure CLI, проверьте свойство **жеорепликатионстатс. ластсинктиме** учетной записи хранения. Используйте `--expand` параметр, чтобы получить значения для свойств, вложенных в **жеорепликатионстатс**. Не забудьте заменить значения заполнителей собственными значениями:

```azurecli-interactive
$lastSyncTime=$(az storage account show \
    --name <storage-account> \
    --resource-group <resource-group> \
    --expand geoReplicationStats \
    --query geoReplicationStats.lastSyncTime \
    --output tsv)
```

---

## <a name="see-also"></a>См. также раздел

- [Избыточность службы хранилища Azure](storage-redundancy.md)
- [Изменение параметра избыточности для учетной записи хранения](redundancy-migration.md)
- [Использование географической избыточности для разработки высокодоступных приложений](geo-redundant-design.md)