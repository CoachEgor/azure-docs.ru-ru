---
title: Общие сведения о репликации объектов
titleSuffix: Azure Storage
description: Репликация объектов Асинхронно копирует блочные BLOB-объекты между исходной и целевой учетными записями хранения. Используйте репликацию объектов, чтобы снизить задержку запросов на чтение, повысить эффективность вычислений, оптимизировать распределение данных и сократить затраты.
services: storage
author: tamram
ms.service: storage
ms.topic: conceptual
ms.date: 09/08/2020
ms.author: tamram
ms.subservice: blobs
ms.custom: devx-track-azurecli, devx-track-azurepowershell
ms.openlocfilehash: ee76c1692049d5b25e85b6780fbcf78f7ebfdd2f
ms.sourcegitcommit: bdd5c76457b0f0504f4f679a316b959dcfabf1ef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "90987044"
---
# <a name="object-replication-for-block-blobs"></a>Репликация объектов для блочных BLOB-объектов

Репликация объектов Асинхронно копирует блочные BLOB-объекты между исходной и целевой учетными записями хранения. Ниже перечислены некоторые сценарии, поддерживаемые репликацией объектов.

- **Минимизация задержки.** Репликация объектов может сократить задержку запросов на чтение, позволяя клиентам использовать данные из региона, наиболее близкого к их физическому расположению.
- **Повышение эффективности вычислений для рабочих нагрузок.** При репликации объектов рабочие нагрузки вычислений могут обрабатывать одни и те же наборы блочных BLOB-объектов в разных регионах.
- **Оптимизация распределения данных.** Вы можете обрабатывать или анализировать данные в одном месте, а затем просто реплицировать полученные результаты в дополнительные регионы.
- **Оптимизация затрат.** После репликации данных можно уменьшить затраты, переместив их на уровень архива с помощью политик управления жизненным циклом.

На следующей схеме показано, как репликация объектов реплицирует блочные BLOB-объекты из исходной учетной записи хранения в одном регионе в конечные учетные записи в двух разных регионах.

:::image type="content" source="media/object-replication-overview/object-replication-diagram.svg" alt-text="Диаграмма, показывающая, как работает репликация объектов":::

Сведения о настройке репликации объектов см. в разделе [Настройка репликации объектов](object-replication-configure.md).

[!INCLUDE [storage-data-lake-gen2-support](../../../includes/storage-data-lake-gen2-support.md)]

## <a name="prerequisites-for-object-replication"></a>Необходимые условия для репликации объектов

Для репликации объектов необходимо также включить следующие функции службы хранилища Azure:

- [Веб-канал изменений](storage-blob-change-feed.md): должен быть включен в исходной учетной записи. Сведения о включении веб-канала изменений см. в разделе [Включение и отключение веб-канала изменений](storage-blob-change-feed.md#enable-and-disable-the-change-feed).
- [Управление версиями BLOB-объектов](versioning-overview.md): необходимо включить как в исходной, так и в конечной учетной записи. Сведения о том, как включить управление версиями, см. в разделе [Включение управления версиями BLOB-объектов и управление ими](versioning-enable.md).

Включение канала изменений и управления версиями BLOB-объектов может повлечь за собой дополнительные затраты. Дополнительные сведения см. на странице [цен на службу хранилища Azure](https://azure.microsoft.com/pricing/details/storage/).

## <a name="object-replication-policies-and-rules"></a>Политики и правила репликации объектов

При настройке репликации объектов создается политика репликации, указывающая исходную учетную запись хранения и целевую учетную запись. Политика репликации включает одно или несколько правил, задающих исходный и целевой контейнеры, и указывает, какие блочные BLOB-объекты в исходном контейнере будут реплицированы.

После настройки репликации объектов служба хранилища Azure периодически проверяет канал изменений для исходной учетной записи и асинхронно реплицирует все операции записи или удаления в целевую учетную запись. Задержка репликации зависит от размера реплицируемого блочного BLOB-объекта.

> [!IMPORTANT]
> Так как данные блочного BLOB-объекта реплицируются асинхронно, исходная и целевая учетные записи не синхронизируются немедленно. В настоящее время нет соглашения об уровне обслуживания относительно того, сколько времени должна занимать репликация данных в целевую учетную запись.

### <a name="replication-policies"></a>Политики репликации

При настройке репликации объектов создается политика репликации как для исходной учетной записи, так и для целевой учетной записи, с помощью поставщика ресурсов службы хранилища Azure. Политика репликации определяется по ее идентификатору политики. Чтобы репликация была выполнена, политика на исходной и целевой учетных записях должна иметь одинаковый идентификатор политики.

Учетная запись хранения может выступать в качестве исходной учетной записи для двух целевых учетных записей. Исходная и Целевая учетные записи могут находиться в одном регионе или в разных регионах. Они также могут находиться в разных подписках и в разных клиентах Azure Active Directory (Azure AD). Для каждой пары исходная учетная запись или конечная учетная запись может быть создана только одна политика репликации.

### <a name="replication-rules"></a>Правила репликации

Правила репликации указывают, как служба хранилища Azure будет реплицировать BLOB-объекты из исходного контейнера в целевой. Для каждой политики репликации можно указать до 10 правил репликации. Каждое правило репликации определяет один источник и целевой контейнер, и каждый источник и целевой контейнер можно использовать только в одном правиле.

При создании правила репликации по умолчанию копируются только новые блочные BLOB-объекты, которые впоследствии добавляются в исходный контейнер. Можно указать, что будут скопированы новые и существующие блочные BLOB-объекты, или можно определить пользовательскую область копирования, которая копирует блочные BLOB-объекты, созданные за указанное время.

Можно также указать один или несколько фильтров в рамках правила репликации, чтобы фильтровать блочные BLOB-объекты по префиксу. При указании префикса только большие двоичные объекты, соответствующие этому префиксу в исходном контейнере, будут скопированы в целевой контейнер.

Оба контейнера, исходный и целевой, должны существовать, прежде чем их можно будет указать в правиле. После создания политики репликации целевой контейнер станет доступен только для чтения. Любые попытки записи в целевой контейнер завершатся ошибкой с кодом 409 (конфликт). Тем не менее можно вызвать операцию [установить уровень BLOB](/rest/api/storageservices/set-blob-tier) -объекта в конечном контейнере, чтобы переместить его на уровень архива. Дополнительные сведения о уровне архива см. в статье [хранилище BLOB-объектов Azure: горячий, холодный и архивный уровни доступа](storage-blob-storage-tiers.md#archive-access-tier).

## <a name="billing"></a>Выставление счетов

Репликация объектов требует дополнительных затрат на чтение и запись транзакций с исходными и целевыми учетными записями, а также за исходящий трафик для репликации данных из исходной учетной записи в целевую учетную запись и расходов на чтение канала изменений обработки.

## <a name="next-steps"></a>Дальнейшие действия

- [Настройка репликации объектов](object-replication-configure.md)
- [Поддержка веб-канала изменений в хранилище BLOB-объектов Azure](storage-blob-change-feed.md)
- [Включение управления версиями BLOB-объектов и работа с ним](versioning-enable.md)
