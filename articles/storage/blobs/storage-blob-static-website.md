---
title: Размещение статических веб-сайтов в службе хранилища Azure
description: Размещение статических веб-сайтов в службе хранилища Azure предоставляет экономичное, масштабируемое решение для размещения современных веб-приложений.
author: normesta
ms.service: storage
ms.topic: how-to
ms.author: normesta
ms.reviewer: dineshm
ms.date: 05/14/2020
ms.subservice: blobs
ms.openlocfilehash: e2dcc070baa94ecf1ea27100fd49d4cde1dac637
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85833352"
---
# <a name="static-website-hosting-in-azure-storage"></a>Размещение статических веб-сайтов в службе хранилища Azure

Вы можете передавать статическое содержимое (HTML, CSS, JavaScript и файлы изображений) непосредственно из контейнера хранилища с именем *$web*. Размещение содержимого в службе хранилища Azure позволяет вам использовать бессерверные архитектуры, включающие [Функции Azure](/azure/azure-functions/functions-overview) и другие службы PaaS (платформа как услуга).

[!INCLUDE [storage-multi-protocol-access-preview](../../../includes/storage-multi-protocol-access-preview.md)]

> [!NOTE]
> Если ваш сайт зависит от кода серверной части, используйте вместо этого [Службу приложений Azure](/azure/app-service/overview).
Обязательно создайте стандартную учетную запись хранения общего назначения версии 2. Статические веб-сайты недоступны в учетной записи хранения другого типа.

## <a name="setting-up-a-static-website"></a>Настройка статического веб-сайта

Размещение статических веб-сайтов — это функция, которую необходимо включить в учетной записи хранения.

Чтобы включить размещение статических веб-сайтов, выберите имя файла по умолчанию, а затем при необходимости укажите путь к настраиваемой странице ошибки 404. Если контейнер хранилища BLOB-объектов с именем **$web** еще не существует в учетной записи, он будет создан автоматически. Добавьте в этот контейнер файлы сайта.

Пошаговые инструкции см. в статье [Размещение статического веб-сайта в службе хранилища Azure](storage-blob-static-website-how-to.md).

![Выбор метрики для статических веб-сайтов службы хранилища Azure](./media/storage-blob-static-website/storage-blob-static-website-blob-container.png)

В файлах в контейнере **$web** учитывается регистр. Они обслуживаются посредством анонимных запросов на доступ и доступны только через операции чтения.

## <a name="uploading-content"></a>Отправка содержимого

Для отправки содержимого в контейнер **$web** можно использовать любой из этих инструментов:

> [!div class="checklist"]
> * [Azure CLI](storage-blob-static-website-how-to.md?tabs=azure-cli)
> * [Overview of Azure PowerShell](storage-blob-static-website-how-to.md?tabs=azure-powershell) (Общие сведения об Azure PowerShell)
> * [AzCopy](../common/storage-use-azcopy-v10.md)
> * [Обозреватель службы хранилища Azure](https://azure.microsoft.com/features/storage-explorer/)
> * [Azure Pipelines](https://azure.microsoft.com/services/devops/pipelines/)
> * [Расширение Visual Studio Code](/azure/developer/javascript/tutorial-vscode-static-website-node-01)

## <a name="viewing-content"></a>Просмотр содержимого

Пользователи могут просматривать содержимое сайта из браузера, используя общедоступный URL-адрес веб-сайта. URL-адрес можно найти с помощью портала Azure, Azure CLI или PowerShell. См. раздел [Поиск URL-адреса веб-сайта](storage-blob-static-website-how-to.md#portal-find-url).

Если сервер возвращает ошибку 404 и при включении веб-сайта вы не указали документ об ошибке, пользователю возвращается страница 404 по умолчанию.

> [!NOTE]
> [CORS](https://docs.microsoft.com/rest/api/storageservices/cross-origin-resource-sharing--cors--support-for-the-azure-storage-services) не поддерживается для статического веб-сайта.

### <a name="regional-codes"></a>Региональные коды

URL сайта содержит региональный код. Например, URL-адрес `https://contosoblobaccount.z22.web.core.windows.net/` содержит региональный код `z22`.

Хотя этот код должен оставаться в URL-адресе, он предназначен только для внутреннего использования и вам не понадобится использовать этот код другим способом.

Документ индекса, который вы указываете при включении размещения статических веб-сайтов, появляется, когда пользователи открывают сайт и не указывают конкретный файл (например, `https://contosoblobaccount.z22.web.core.windows.net`).

### <a name="secondary-endpoints"></a>Вторичные конечные точки

Если вы настроили [избыточность в дополнительном регионе](../common/storage-redundancy.md#redundancy-in-a-secondary-region), вы также можете получить доступ к содержимому веб-сайта с помощью вторичной конечной точки. Так как данные реплицируются в дополнительные регионы асинхронно, файлы, доступные на вторичной конечной точке, не всегда синхронизируются с файлами, доступными на первичной конечной точке.

## <a name="impact-of-the-setting-the-public-access-level-of-the-web-container"></a>Влияние параметра уровня общего доступа веб-контейнера

Вы можете изменить уровень общего доступа к контейнеру **$web**, но это не повлияет на первичную конечную точку статического веб-сайта, так как эти файлы обслуживаются посредством анонимных запросов на доступ. Это означает общий (только для чтения) доступ ко всем файлам.

На следующем снимке экрана показан параметр уровня общего доступа на портале Azure.

![Снимок экрана, на котором показано, как настроить уровень общего доступа на портале](./media/storage-manage-access-to-resources/storage-manage-access-to-resources-0.png)

Хотя изменение уровня общего доступа не влияет на первичную конечную точку статического веб-сайта, оно влияет на основную конечную точку BLOB-объектов.

Например, если вы измените уровень общего доступа контейнера **$web** с **Частный (без анонимного доступа)** на **BLOB-объект (анонимный доступ на чтение только для BLOB-объектов)** , то уровень общего доступа к первичной конечной точке статического веб-сайта `https://contosoblobaccount.z22.web.core.windows.net/index.html` не изменится.

Однако общий доступ к основной конечной точке BLOB-объектов `https://contosoblobaccount.blob.core.windows.net/$web/index.html` меняется с частного на общедоступный. Теперь пользователи могут открыть этот файл, используя любую из этих двух конечных точек.

## <a name="mapping-a-custom-domain-to-a-static-website-url"></a>Сопоставление личного домена с URL-адресом статического веб-сайта

Вы можете сделать статический веб-сайт доступным через личный домен.

Разрешить HTTP-доступ для личного домена проще, так как служба хранилища Azure изначально поддерживает его. Чтобы включить HTTPS, вам нужно использовать Azure CDN, так как служба хранилища Azure пока не поддерживает протокол HTTPS для личных доменов. Пошаговые инструкции приведены в статье [Сопоставление личного домена с конечной точкой хранилища BLOB-объектов Azure](storage-custom-domain-name.md).

Если учетная запись хранения настроена на [требование безопасной передачи](../common/storage-require-secure-transfer.md) по HTTPS, пользователи должны использовать конечную точку HTTPS.

> [!TIP]
> Рассмотрите возможность размещения домена в Azure. Дополнительные сведения см. в статье [Размещение домена в Azure DNS](../../dns/dns-delegate-domain-azure-dns.md).

## <a name="adding-http-headers"></a>Добавление заголовков HTTP

Способы настройки заголовков как части функции статического веб-сайта не предусмотрены. Однако для добавления заголовков и добавления (или перезаписи) значений заголовков можно использовать Azure CDN. См. статью [Справочник по стандартному обработчику правил для Azure CDN](https://docs.microsoft.com/azure/cdn/cdn-standard-rules-engine-reference).

Если вы хотите использовать заголовки для управления кэшированием, ознакомьтесь со статьей [Управление режимом кэширования Azure CDN с помощью правил кэширования](https://docs.microsoft.com/azure/cdn/cdn-caching-rules).

## <a name="pricing"></a>Цены

Размещение статического веб-сайта можно включить бесплатно. Вам будет выставлен счет только за хранилище BLOB-объектов, которое использует сайт, а также за эксплуатационные расходы. Дополнительные сведения о ценах на хранилище BLOB-объектов Azure см. на [странице цен](https://azure.microsoft.com/pricing/details/storage/blobs/).

## <a name="metrics"></a>Метрики

Вы можете включить метрики на страницах статического веб-сайта. После включения метрик статистика трафика файлов в контейнере **$web** будет отображаться на панели мониторинга метрик.

Сведения о включении метрик на страницах статического веб-сайта см. в разделе [Включение метрик на страницах статического веб-сайта](storage-blob-static-website-how-to.md#metrics).

## <a name="next-steps"></a>Дальнейшие действия

* [Размещение статического веб-сайта в службе хранилища Azure](storage-blob-static-website-how-to.md)
* [Map a custom domain to an Azure Blob Storage endpoint](storage-custom-domain-name.md) (Сопоставление личного домена с конечной точкой хранилища BLOB-объектов Azure)
* [Функции Azure](/azure/azure-functions/functions-overview)
* [Служба приложений Azure](/azure/app-service/overview)
* [Создание первого бессерверного веб-приложения](https://docs.microsoft.com/azure/functions/tutorial-static-website-serverless-api-with-database)
* [Руководство. по размещению домена в Azure DNS](../../dns/dns-delegate-domain-azure-dns.md)
