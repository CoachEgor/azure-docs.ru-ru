---
title: Получение доступа к большим двоичным объектам с помощью личных доменов по HTTPS с использованием Azure CDN
description: Узнайте, как интегрировать Azure CDN с хранилищем BLOB-объектов для доступа к большим двоичным объектам с помощью личных доменов по HTTPS
author: normesta
ms.service: storage
ms.topic: conceptual
ms.date: 06/26/2018
ms.author: normesta
ms.reviewer: dineshm
ms.subservice: blobs
ms.openlocfilehash: f3386d04cd3316b38a094524d0d5d4f3c5ab36bb
ms.sourcegitcommit: 5b76581fa8b5eaebcb06d7604a40672e7b557348
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2019
ms.locfileid: "68986836"
---
# <a name="use-azure-cdn-to-access-blobs-with-custom-domains-over-https"></a>Получение доступа к большим двоичным объектам с помощью личных доменов по HTTPS с использованием Azure CDN

Сеть доставки содержимого Azure (Azure CDN) сейчас поддерживает HTTPS для имен личных доменов. С помощью Azure CDN вы можете получить доступ к большим двоичным объектам, используя имя личного домена по HTTPS. Для этого включите Azure CDN в большом двоичном объекте или конечной веб-точке и потом сопоставьте Azure CDN с именем личного домена. Когда все будет готово, Azure упростит включение HTTPS для вашего личного домена путем мгновенного доступа и полного управления сертификатами. Стандартные цены Azure CDN не увеличиваются.

Azure CDN помогает защитить конфиденциальность и целостность данных веб-приложения во время передачи. Azure CDN обеспечивает шифрование ваших данных при отправке через Интернет с использованием протокола SSL для обслуживания трафика через HTTPS. Использование HTTPS c Azure CDN помогает защитить ваше веб-приложение от атак.

> [!NOTE]  
> Помимо предоставления поддержки SSL для имен личных доменов Azure CDN помогает масштабировать приложение для доставки содержимого по сети с высокой пропускной способностью по всему миру. Дополнительные сведения см. в [обзоре Azure CDN](../../cdn/cdn-overview.md).

## <a name="quickstart"></a>Быстрый старт

Чтобы включить HTTPS для пользовательской конечной точки хранилища BLOB-объектов, сделайте следующее:

1.  [Интеграция учетной записи хранения Azure с Azure CDN](../../cdn/cdn-create-a-storage-account-with-cdn.md).  
    В этой статье приводится пошаговая процедура создания учетной записи хранения на портале Azure (если вы еще этого не сделали).

    > [!NOTE]  
    > Чтобы добавить свою конечную веб-точку хранилища, пока служба хранилища Azure поддерживает статические веб-сайты в режиме предварительной версии, во всплывающем меню **типов источника** нужно выбрать пункт **Настраиваемый источник**. На портале Azure вам нужно сделать это в своем профиле Azure CDN, а не непосредственно в учетной записи хранения.

2.  [Сопоставление содержимого Azure CDN с личным доменом](../../cdn/cdn-map-content-to-custom-domain.md).

3.  [Включение протокола HTTPS для личного домена Azure CDN](../../cdn/cdn-custom-ssl.md).

## <a name="shared-access-signatures"></a>Подписанные URL-адреса

По умолчанию конечные точки хранилища BLOB-объектов запрещают анонимный доступ на чтение. Если для вашей конечной точки хранилища BLOB-объектов настроен запрет анонимного доступа на чтение, указывайте токен [подписанного URL-адреса](../common/storage-sas-overview.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) в каждом запросе к личному домену. Дополнительные сведения см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](storage-manage-access-to-resources.md).

Azure CDN не учитывает ограничений, добавленных к токену подписанного URL-адреса. Например, срок всех токенов подписанного URL-адреса истекает. Вы по-прежнему можете получить доступ к содержимому с просроченным подписанным URL-адресом до того, как оно удалится с граничных узлов Azure CDN. Вы можете контролировать срок хранения данных в кэше Azure CDN, задавая заголовок ответа кэша. Дополнительные сведения об этом см. в статье [Управление сроком действия хранилища BLOB-объектов Azure в Azure CDN](../../cdn/cdn-manage-expiration-of-blob-content.md).

При создании двух или более подписанных URL-адресов для одной и той же конечной точки большого двоичного объекта мы рекомендуем включить кэширование строк запросов для Azure CDN. При этом Azure обрабатывает каждый URL-адрес как уникальную сущность. Дополнительные сведения см. в статье [Управление режимом кэширования Azure CDN с помощью строк запросов](../../cdn/cdn-query-string.md).

## <a name="http-to-https-redirection"></a>Перенаправление трафика HTTP в HTTPS

Вы можете перенаправить трафик HTTP на HTTPS. Это потребует использования Azure CDN цен. категории "Премиум" от Verizon. [Переопределите поведение HTTP с помощью обработчика правил Azure CDN ](../../cdn/cdn-rules-engine.md), используя следующее правило:

![Правило перенаправления с HTTP на HTTPS](./media/storage-https-custom-domain-cdn/redirect-to-https.png)

*Cdn-endpoint-name*, выбранное в раскрывающемся списке, относится к имени, которое вы настроили для своей конечной точки Azure CDN. *Origin-path* относится к пути в вашей исходной учетной записи хранения, в которой хранится статическое содержимое. Если все статическое содержимое размещается в одном контейнере, замените *origin-path* именем этого контейнера.

Более подробно правила рассматриваются в статье [Функции обработчика правил Azure CDN](../../cdn/cdn-rules-engine-reference-features.md).

## <a name="pricing-and-billing"></a>Цены и выставление счетов

При доступе к большим двоичным объектам через Azure CDN вы платите [цену за хранилище BLOB-объектов](https://azure.microsoft.com/pricing/details/storage/blobs/) за трафик между граничными узлами и источником (хранилище BLOB-объектов). Вы платите [цену Azure CDN](https://azure.microsoft.com/pricing/details/cdn/) за данные, доступные из граничных узлов.

Например, предположим, что у вас есть учетная запись хранения в западной части США, доступ к которой осуществляется через Azure CDN. Когда пользователь в Великобритании пытается получить доступ к большому двоичному объекту в той учетной записи хранения через Azure CDN, Azure сначала ищет большой двоичный объект в граничном узле, ближайшем к Великобритании. Если среда Azure обнаруживает такой большой двоичный объект, она получает доступ к копии и использует цену Azure CDN, так как Azure CDN имеет доступ к нему. Если среда Azure не находит большой двоичный объект, она копирует большой двоичный объект на граничный узел. При этом взимается плата за транзакции и исходящий трафик в соответствии с ценами на хранилища BLOB-объектов. Затем Azure получает доступ к файлу на граничном узле, что приводит к выставлению счетов Azure CDN.

На [странице цен Azure CDN](https://azure.microsoft.com/pricing/details/cdn/) поддержка HTTPS для имен личных доменов доступна для Azure CDN только из продуктов Verizon цен. категорий "Стандартный" и "Премиум".

## <a name="next-steps"></a>Следующие шаги

* [Настройка имени личного домена для конечной точки хранилища BLOB-объектов](storage-custom-domain-name.md)
* [Размещение статических веб-сайтов в службе хранилища Azure](storage-blob-static-website.md)
