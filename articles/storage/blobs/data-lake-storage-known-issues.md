---
title: Известные проблемы с Azure Data Lake Storage 2-го поколения | Документация Майкрософт
description: Сведения об ограничениях и известных проблемах с Azure Data Lake Storage 2-го поколения
author: normesta
ms.subservice: data-lake-storage-gen2
ms.service: storage
ms.topic: conceptual
ms.date: 10/11/2019
ms.author: normesta
ms.reviewer: jamesbak
ms.openlocfilehash: f635360c5a6da19d60f3992878a8950b03c5f748
ms.sourcegitcommit: 12de9c927bc63868168056c39ccaa16d44cdc646
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2019
ms.locfileid: "72513886"
---
# <a name="known-issues-with-azure-data-lake-storage-gen2"></a>Известные проблемы с Azure Data Lake Storage 2-го поколения

В этой статье перечислены функции и средства, которые пока не поддерживаются, или только частично поддерживаются для учетных записей хранения с иерархическим пространством имен (Azure Data Lake Storage 2-го поколения).

<a id="blob-apis-disabled" />

## <a name="blob-storage-apis"></a>API-интерфейсы хранилища BLOB-объектов

API-интерфейсы хранилища BLOB-объектов отключены, чтобы предотвратить возникновение проблем с использованием компонентов, так как интерфейсы API хранилища BLOB-объектов еще не совместимы с Azure Data Lake API Gen2.

> [!NOTE]
> Благодаря общедоступной предварительной версии доступа с несколькими протоколами для Data Lake Storage, интерфейсы API BLOB-объектов и Data Lake Storage 2-го поколения API могут работать с одними и теми же данными. Дополнительные сведения см. в разделе [многопротокольный доступ на Data Lake Storage](data-lake-storage-multi-protocol-access.md).

### <a name="what-to-do-with-existing-tools-applications-and-services"></a>Что делать с существующими инструментами, приложениями и службами

Если какие-либо из них используют API больших двоичных объектов и вы хотите использовать их для работы со всеми содержимым в вашей учетной записи, у вас есть два варианта.

* **Вариант 1**. не включайте иерархическое пространство имен в учетной записи хранилища BLOB-объектов до тех пор, пока не будет доступен [многопротокольный доступ к Data Lake Storage](data-lake-storage-multi-protocol-access.md) , а интерфейсы API больших двоичных объектов станут полностью совместимыми с интерфейсами API Azure Data Lake Gen2. [Доступ с несколькими протоколами на Data Lake Storage](data-lake-storage-multi-protocol-access.md) в настоящее время находится в общедоступной предварительной версии.  Использование учетной записи хранения **без** иерархического пространства имен означает, что вы не сможете получить доступ к Data Lake Storage 2-го поколения конкретным функциям, таким как списки управления доступом к каталогам и контейнерам.

* **Вариант 2**. Включение иерархических пространств имен. Благодаря общедоступной предварительной версии [многопротокольного доступа на Data Lake Storage](data-lake-storage-multi-protocol-access.md), средства и приложения, которые вызывают API больших двоичных объектов, а также функции хранилища BLOB-объектов, такие как журналы диагностики, могут работать с учетными записями, имеющими иерархическое пространство имен. Ознакомьтесь с этой статьей, чтобы узнать об известных проблемах и ограничениях.

### <a name="what-to-do-if-you-used-blob-apis-to-load-data-before-blob-apis-were-disabled"></a>Что делать, если вы использовали API больших двоичных объектов для загрузки данных до отключения API BLOB-объектов

Если вы использовали эти API-интерфейсы для загрузки данных, прежде чем они были отключены, и существует требование рабочей среды для доступа к этим данным, обратитесь в службу поддержки Майкрософт, предоставив следующие сведения:

> [!div class="checklist"]
> * Идентификатор подписки (GUID, а не имя).
> * Имена учетных записей хранения.
> * Активно ли вы в рабочей среде, и если да, то для каких учетных записей хранения?
> * сведения о том, необходимо ли копировать данные в другую учетную запись хранения и, если это так, то по каким причинам (укажите эти данные, даже если вы не были активно вовлечены в производство).

В таком случае мы можем восстановить доступ к API BLOB-объектов на ограниченный период времени, чтобы вы смогли скопировать эти данные в учетную запись хранения, в которой не включена функция поддержки иерархического пространства имен.

### <a name="issues-and-limitations-with-using-blob-apis-on-accounts-that-have-a-hierarchical-namespace"></a>Проблемы и ограничения использования API больших двоичных объектов в учетных записях с иерархическим пространством имен

Благодаря общедоступной предварительной версии доступа с несколькими протоколами для Data Lake Storage, интерфейсы API BLOB-объектов и Data Lake Storage 2-го поколения API могут работать с одними и теми же данными.

В этом разделе описываются проблемы и ограничения использования API больших двоичных объектов и Data Lake Storage 2-го поколения API-интерфейсов для обработки одних и тех же данных.

* Для записи в один и тот же экземпляр файла нельзя использовать интерфейсы API BLOB и Data Lake Storage API.

* При записи в файл с помощью Data Lake Storage 2-го поколения API, блоки этого файла не будут видны для вызовов API [получения списка блоков](https://docs.microsoft.com/rest/api/storageservices/get-block-list) .

* Файл можно перезаписать с помощью Data Lake Storage 2-го поколения API или API больших двоичных объектов. Это не повлияет на свойства файла.

* При использовании операции " [список больших двоичных объектов](https://docs.microsoft.com/rest/api/storageservices/list-blobs) " без указания разделителя в результаты будут включены как каталоги, так и большие двоичные объекты.

  Если вы решили использовать разделитель, используйте только косую черту (`/`). Это единственный поддерживаемый разделитель.

* Если удалить каталог с помощью API [удаления BLOB-объектов](https://docs.microsoft.com/rest/api/storageservices/delete-blob) , этот каталог будет удален только в том случае, если он пуст.

  Это означает, что вы не сможете рекурсивно использовать API удаления каталогов.

API-интерфейсы RESTFUL для больших двоичных объектов не поддерживаются:

* [Разместить BLOB-объект (страница)](https://docs.microsoft.com/rest/api/storageservices/put-blob)
* [Put Page](https://docs.microsoft.com/rest/api/storageservices/put-page)
* [Получить диапазоны страниц](https://docs.microsoft.com/rest/api/storageservices/get-page-ranges)
* [Добавочное копирование большого двоичного объекта](https://docs.microsoft.com/rest/api/storageservices/incremental-copy-blob)
* [Размещение страницы по URL-адресу](https://docs.microsoft.com/rest/api/storageservices/put-page-from-url)
* [Размещение большого двоичного объекта (добавление)](https://docs.microsoft.com/rest/api/storageservices/put-blob)
* [Append Block](https://docs.microsoft.com/rest/api/storageservices/append-block)
* [Добавить блок из URL-адреса](https://docs.microsoft.com/rest/api/storageservices/append-block-from-url)

## <a name="issues-with-unmanaged-virtual-machine-vm-disks"></a>Проблемы с дисками неуправляемой виртуальной машины (ВМ)

Неуправляемые диски виртуальной машины не поддерживаются в учетных записях, имеющих иерархическое пространство имен. Если вы хотите включить иерархическое пространство имен в учетной записи хранения, разместите неуправляемые диски виртуальной машины в учетной записи хранения, для которой не включена функция иерархического пространства имен.


## <a name="support-for-other-blob-storage-features"></a>Поддержка других функций хранилища BLOB-объектов

В следующей таблице перечислены все другие функции и средства, которые еще не поддерживаются или поддерживаются только частично с учетными записями хранения с иерархическим пространством имен (Azure Data Lake Storage 2-го поколения).

| Компонент или средство    | Дополнительные сведения    |
|--------|-----------|
| **API для учетных записей хранения Data Lake Storage 2-го поколения** | Частично поддерживаются <br><br>Доступ с несколькими протоколами на Data Lake Storage в настоящее время находится в общедоступной предварительной версии. Эта предварительная версия позволяет использовать API больших двоичных объектов в пакетах SDK для .NET, Java и Python с учетными записями с иерархическим пространством имен.  Пакеты SDK еще не содержат интерфейсы API, которые позволяют взаимодействовать с каталогами или задавать списки управления доступом (ACL). Для выполнения этих функций можно **использовать Data Lake Storage 2-го поколения интерфейсы** API. |
| **AzCopy** | Поддержка конкретных версий <br><br>Используйте только последнюю версию AzCopy ([AzCopy V10](https://docs.microsoft.com/azure/storage/common/storage-use-azcopy-v10?toc=%2fazure%2fstorage%2ftables%2ftoc.json)). Более ранние версии AzCopy, например AzCopy v 8.1, не поддерживаются.|
| **Политики управления жизненным циклом хранилища BLOB-объектов Azure** | Поддерживается [многопротокольным доступом на Data Lake Storage](data-lake-storage-multi-protocol-access.md) предварительной версии. Уровни доступа "крутой" и "архивный" поддерживаются только в предварительной версии. Удаление моментальных снимков BLOB-объектов пока не поддерживается. |
| **Сеть доставки содержимого (CDN) Azure** | Еще не поддерживается|
| **Поиск Azure** |Поддерживается [многопротокольным доступом на Data Lake Storage](data-lake-storage-multi-protocol-access.md) предварительной версии.|
| **Azure Storage Explorer;** | Поддержка конкретных версий <br><br>Используйте только версию `1.6.0` или более позднюю. <br>Версия `1.6.0` доступна для [бесплатной загрузки](https://azure.microsoft.com/features/storage-explorer/).|
| **Списки ACL контейнера больших двоичных объектов** |Еще не поддерживается|
| **Blobfuse** |Еще не поддерживается|
| **Личные домены** |Еще не поддерживается|
| **Обозреватель файловой системы** | Ограниченная поддержка |
| **Журнал ведения диагностики** |Журналы диагностики поддерживаются [многопротокольным доступом на Data Lake Storage](data-lake-storage-multi-protocol-access.md) предварительной версии. <br><br>Включение журналов в портал Azure в настоящее время не поддерживается. Ниже приведен пример того, как включить журналы с помощью PowerShell. <br><br>`$storageAccount = Get-AzStorageAccount -ResourceGroupName <resourceGroup> -Name <storageAccountName>`<br><br>`Set-AzStorageServiceLoggingProperty -Context $storageAccount.Context -ServiceType Blob -LoggingOperations read,write,delete -RetentionDays <days>`. <br><br>Убедитесь, что в качестве значения параметра `-ServiceType` указан `Blob`, как показано в этом примере. <br><br>В настоящее время Обозреватель службы хранилища Azure не может использоваться для просмотра журналов диагностики. Чтобы просмотреть журналы, используйте AzCopy или пакеты SDK.
| **Неизменяемое хранилище** |Еще не поддерживается <br><br>Неизменяемое хранилище дает возможность хранить данные в [черве (запись один раз, чтение из множества)](https://docs.microsoft.com/azure/storage/blobs/storage-blob-immutable-storage) .|
| **Уровни уровня объектов** |В Data Lake Storage предварительной версии поддерживается [многопротокольный доступ к](data-lake-storage-multi-protocol-access.md) уровням "крутой" и "Архив". <br><br> Все остальные уровни доступа пока не поддерживаются.|
| **Поддержка PowerShell и интерфейса командной строки** | Ограниченная функциональность <br><br>Поддерживаются такие операции управления, как создание учетной записи. Операции с плоскостью данных, такие как отправка и скачивание файлов, доступны в общедоступной предварительной версии в рамках [многопротокольного доступа к Data Lake Storage](data-lake-storage-multi-protocol-access.md). Работа с каталогами и Настройка списков управления доступом (ACL) пока не поддерживаются. |
| **Статические веб-сайты** |Еще не поддерживается <br><br>В частности, возможность обслуживания файлов для [статических веб-сайтов](https://docs.microsoft.com/azure/storage/blobs/storage-blob-static-website).|
| **Сторонние приложения** | Ограниченная поддержка <br><br>Сторонние приложения, использующие API-интерфейсы RESTFUL для работы, будут продолжать работать, если вы используете их с Data Lake Storage 2-го поколения. <br>Приложения, которые вызывают API больших двоичных объектов, скорее всего, будут работать с общедоступной предварительной версией [многопротокольного доступа на Data Lake Storage](data-lake-storage-multi-protocol-access.md). |
|**обратимое удаление** |Еще не поддерживается|
| **Функции управления версиями** |Еще не поддерживается <br><br>К ним относятся [обратимое удаление](https://docs.microsoft.com/azure/storage/blobs/storage-blob-soft-delete)и другие функции управления версиями, такие как [моментальные снимки](https://docs.microsoft.com/rest/api/storageservices/creating-a-snapshot-of-a-blob).|


