---
title: Общие сведения о распределении по уровням в облаке в Синхронизации файлов Azure | Документация Майкрософт
description: Сведения о функции распределения по уровням в облаке в Синхронизации файлов Azure
author: roygara
ms.service: storage
ms.topic: conceptual
ms.date: 06/15/2020
ms.author: rogarana
ms.subservice: files
ms.openlocfilehash: 23e98c40420a5f1ed9b048d5530eacfe5eedfb32
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85413983"
---
# <a name="cloud-tiering-overview"></a>Общие сведения о распределении по уровням в облаке
Распределение по уровням в облаке — дополнительная функция Синхронизации файлов Azure, в которой часто используемые файлы кэшируются локально на сервере, а все другие файлы распределяются по уровням в файлах Azure на основе параметров политики. При распределении файла фильтр файловой системы службы синхронизации файлов Azure (StorageSync.sys) локально заменяет файл указателем или точкой повторного анализа. Точка повторного анализа представляет URL-адрес к файлу в службе "Файлы Azure". Распределенный по уровням файл имеет автономный атрибут и набор атрибутов FILE_ATTRIBUTE_RECALL_ON_DATA_ACCESS в NTFS, чтобы сторонние приложения могли идентифицировать такие файлы.
 
Когда пользователь открывает многоуровневый файл, Синхронизация файлов Azure просто отзывает файловые данные из файлов Azure без необходимости знать, что файл хранится в Azure. 
 
 > [!Important]  
 > Распределение по уровням облака не поддерживается на системном томе Windows.
    
 > [!Important]  
 > Для отзыва файлов, которые были распределены по уровням, пропускная способность сети должна составлять не менее 1 Мбит/с. Если пропускная способность сети меньше 1 Мбит/с, то файлы могут не вызываться с ошибкой истечения времени ожидания.

## <a name="cloud-tiering-faq"></a>Вопросы и ответы о распределении по уровням в облаке

<a id="afs-cloud-tiering"></a>
### <a name="how-does-cloud-tiering-work"></a>Как работает распределение по уровням в облаке?
Фильтр системы Синхронизации файлов Azure создает тепловую карту пространства имен каждой конечной точки сервера. Это позволяет отслеживать в динамике операции получения доступа (операции чтения и записи), а также, исходя из частоты и актуальности этих операций, присваивать соответствующую оценку для каждого файла. Часто используемый файл, который был недавно открыт, будет считаться "горячим", тогда как файл, который почти не используется и к которому не осуществлялся доступ в течение определенного времени будет считаться "холодным". Когда занятое файлами пространство на сервере превышает заданный лимит, самые "холодные" файлы будут перемещены в службу файлов Azure, чтобы обеспечить соответствие этому лимиту.

Кроме того, можно указать политику дат на каждой конечной точке сервера, которая будет распределять любые файлы, к которым нет доступа в течение указанного числа дней, независимо от доступной емкости локального хранилища. Это хороший вариант для упреждающего освобождения места на локальном диске, если известно, что файлы в этой конечной точке сервера не должны храниться локально дольше определенного возраста. Это освобождает ценную емкость локального диска для других конечных точек на том же томе, чтобы кэшировать больше файлов.

Тепловой карты по уровням облака представляет собой упорядоченный список всех файлов, которые синхронизируются и находятся в расположении с включенным распределением по уровням облака. Чтобы определить относительное расположение отдельного файла в тепловой карты, система использует максимум одну из следующих меток времени: MAX (время последнего доступа, время последнего изменения, время создания). Как правило, время последнего доступа проявляется и доступно. Однако при создании конечной точки сервера с включенным распределением по уровням облака изначально не хватает времени для наблюдения за доступом к файлам. При отсутствии времени последнего доступа используется время последнего изменения, чтобы оценить относительное расположение в тепловой карты. Один и тот же откат применим к политике дат. Без времени последнего доступа политика дат будет действовать на время последнего изменения. Если этот параметр недоступен, он будет возвращаться к времени создания файла. Со временем система будет наблюдать за большим и большим количеством запросов на доступ к файлам и сводных, чтобы в основном использовать собственное время последнего доступа.

Распределение по уровням облака не зависит от функции NTFS для отслеживания времени последнего доступа. Эта функция NTFS отключена по умолчанию, и из-за соображений производительности не рекомендуется включать эту функцию вручную. Распределение по уровням в облаке отслеживает время последнего доступа отдельно и очень эффективно.

<a id="tiering-minimum-file-size"></a>
### <a name="what-is-the-minimum-file-size-for-a-file-to-tier"></a>Каков минимальный размер файла для уровня?

Для агентов версии 9 и более поздних минимальный размер файла на уровне зависит от размера кластера файловой системы. В следующей таблице приведены минимальные размеры файлов, которые могут быть распределены по уровням в зависимости от размера кластера томов.

|Размер кластера томов (в байтах) |Файлы такого размера или увеличения могут быть многоуровневой.  |
|----------------------------|---------|
|4 КБ (4096)                 | 8 КБ    |
|8 КБ (8192)                 | 16 КБ   |
|16 КБ (16384)               | 32 КБ   |
|32 КБ (32768) и более    | 64 КБ   |

Все файловые системы, используемые Windows, упорядочивают жесткий диск на основе размера кластера (также известного как размер единицы размещения). Размер кластера представляет минимальный объем дискового пространства, который можно использовать для хранения файла. Если размеры файлов не поступают на размер, кратный размеру кластера, необходимо использовать дополнительное пространство для хранения файла (вплоть до нескольких следующих размеров кластера).

Синхронизация файлов Azure поддерживается на томах NTFS с Windows Server 2012 R2 и более поздних версий. В следующей таблице описаны размеры кластера по умолчанию при создании нового тома NTFS. 

|Размер тома    |Windows Server 2012 R2 и более поздние версии |
|---------------|---------------|
|7 МБ — 16 ТБ   | 4 КБ          |
|16TB — 32 ТБ   | 8 КБ          |
|32TB — 64 ТБ   | 16 КБ         |
|64TB — 128 ТБ  | 32 КБ         |
|128TB — 256 ТБ | 64 КБ         |
|> 256 ТБ       | Не поддерживается |

При создании тома можно вручную отформатировать том с использованием другого размера кластера (единицы распределения). Если ваш том имеет более раннюю версию Windows, размеры кластера по умолчанию также могут отличаться. [Эта статья содержит дополнительные сведения о размерах кластера по умолчанию.](https://support.microsoft.com/help/140365/default-cluster-size-for-ntfs-fat-and-exfat)

<a id="afs-volume-free-space"></a>
### <a name="how-does-the-volume-free-space-tiering-policy-work"></a>Как работает политика распределения по уровням свободного пространства в томе?
Свободное пространство в томе — это свободное место резервируемое в томе, в котором расположена конечная точка сервера. Например, если объем свободного пространства составляет 20 % от пространства, в котором размещается одна серверная конечная точка, до 80 % этого пространства будет занято файлами, доступ к которым осуществляется чаще всего, а остальные файлы будут перемещены в Azure. Объем свободного пространства в томе учитывается на уровне всего тома, а не отдельных каталогов или групп синхронизации. 

<a id="volume-free-space-fastdr"></a>
### <a name="how-does-the-volume-free-space-tiering-policy-work-with-regards-to-new-server-endpoints"></a>Как работает политика распределения по уровням свободного пространства в томе с учетом новых конечных точек сервера?
Когда новая конечная точка сервера подготавливается и подключается к файловому ресурсу Azure, сервер сначала развернет пространство имен, а затем — сами файлы, пока не будет достигнут лимит свободного пространства в томе. Этот процесс также называется быстрым аварийным восстановлением или быстрым восстановлением пространства имен.

<a id="afs-effective-vfs"></a>
### <a name="how-is-volume-free-space-interpreted-when-i-have-multiple-server-endpoints-on-a-volume"></a>Как определяется свободное пространство в томе, если используется несколько конечных точек сервера?
Если в томе несколько конечных точек сервера, действительный предел свободного пространства в томе — это наибольший объем свободного места для любой конечной точке сервера в этом томе. Файлы будут распределяться по уровням в соответствии со схемой их использования. Это не зависит от того, к какой конечной точке сервера они относятся. Предположим, что в томе есть две конечные точки сервера, Endpoint1 и Endpoint2. Для Endpoint1 предел свободного пространства тома составляет 25 %, а для Endpoint2 — 50 %. В таком случае предел свободного пространства тома для обеих конечных точек сервера составит 50 %. 

<a id="date-tiering-policy"></a>
### <a name="how-does-the-date-tiering-policy-work-in-conjunction-with-the-volume-free-space-tiering-policy"></a>Как политика перемещения на другой уровень с учетом даты работает в сочетании с политикой перемещения на другой уровень с учетом свободного пространства в томе? 
При включении распределения по уровням в облаке на конечной точке сервера вы устанавливаете политику с учетом свободного пространства. Она всегда приоритетнее других политик, включая политику на основе даты. При необходимости можно включить политику дат для каждой конечной точки сервера на этом томе. Эта политика управляет тем, что только файлы, к которым осуществляется доступ (то есть чтение или запись) в пределах диапазона дней, которые эта политика описывает, будут храниться локально. Файлы, к которым не осуществлялся доступ с указанным количеством дней, будут распределены по уровням. 

Распределение по уровням в облаке использует время последнего доступа, чтобы определить, какие файлы должны быть распределены по уровням. Драйвер фильтра по уровням облака (storagesync.sys) отслеживает время последнего доступа и регистрирует информацию в облачном хранилище уровня облака. Вы видите это хранилище с помощью локального командлета PowerShell.

```powershell
Import-Module '<SyncAgentInstallPath>\StorageSync.Management.ServerCmdlets.dll'
Get-StorageSyncHeatStoreInformation '<LocalServerEndpointPath>'
```

> [!IMPORTANT]
> Последний доступ — метка времени не является свойством, отслеживающимся файловой системой NTFS и поэтому не отображается по умолчанию в проводнике. Не используйте последний-Modified-timestamp в файле, чтобы проверить, правильно ли работает политика даты. Эта метка времени отслеживает только операции записи, а не операции чтения. Используйте приведенный командлет, чтобы получить последний доступ к метке времени для этой оценки.

> [!WARNING]
> Не включайте функцию NTFS для отслеживания последнего доступа — отметка времени для файлов и папок. Эта функция отключена по умолчанию, так как она имеет большое влияние на производительность. Синхронизация файлов Azure будет автоматически отслеживанию времени последнего доступа и не использует эту функцию NTFS.

Помните, что политика свободного места в томе всегда имеет приоритет, и если на томе недостаточно свободного места для сохранения файлов, как описано в политике дат, Синхронизация файлов Azure продолжит распределять файлы холодное до тех пор, пока не будет выполнено свободное пространство тома.

Предположим, у вас есть политика распределения данных по уровням на основе даты с настроенным сроком в 60 дней и политика свободного пространства тома с настроенным объемом свободного пространства 20 %. Если после применения политики на основе даты остается менее 20 % свободного пространства в томе, политика с учетом свободного пространства переопределит политику на основе даты. Это приведет к увеличению количества перемещаемых файлов, например так, что срок, на основе которого перемещаются данные, хранящиеся на сервере, сократится с 60 дней до 45. И наоборот, эта политика будет принудительно перемещать файлы, выходящие за пределы диапазона времени, даже если вы не достигли порогового значения свободного пространства. Поэтому файл, которому уже 61 день, будет перемещен, даже если ваш том пуст.

<a id="volume-free-space-guidelines"></a>
### <a name="how-do-i-determine-the-appropriate-amount-of-volume-free-space"></a>Как определить необходимый объем свободного пространства в томе?
Объем данных, хранимых локально, определяется несколькими факторами: пропускной способностью, особенностями доступа к набору данных и бюджетом. Если пропускная способность низкая, можно хранить больше данных локально, чтобы обеспечить минимальную задержку для пользователей. В противном случае можно учитывать частоту изменения данных в рамках определенного периода. Например, если известно, что каждый месяц около 10 % набора данных объемом 1 ТБ изменяется или активно используется в ходе операций доступа, вы можете хранить локально 100 ГБ данных, предупреждая частый отзыв файлов. Если размер тома — 2 ТБ, вы можете хранить 5 % (или 100 ГБ) локально, освободив 95 % пространства в томе. Тем не менее мы рекомендуем добавить буфер для учетной записи на периоды более частого изменения данных. Другими словами, вы можете оставить меньше свободного пространства в томе, изменяя его по мере необходимости. 

Хранение большего объема данных локально означает снижение затрат на исходящий трафик, так как из Azure будет отзываться меньшее количество файлов. Но это также предполагает определенные затраты на больший объем локального хранилища. После развернутого экземпляра Синхронизация файлов Azure можно просмотреть исходящие данные учетной записи хранения, чтобы приблизительно оценить, подходят ли параметры свободного места на томе. Если предположить, что учетная запись хранения содержит только облачную конечную точку Синхронизации файлов Azure (т. е. общий ресурс синхронизации), большой исходящий трафик указывает на то, что из облака отзывается большое количество файлов. В таком случае рекомендуется увеличить локальный кэш.

<a id="how-long-until-my-files-tier"></a>
### <a name="ive-added-a-new-server-endpoint-how-long-until-my-files-on-this-server-tier"></a>Я добавил новую конечную точку сервера. Сколько пройдет времени до того, как файлы на этом сервере начнут распределяться по уровням?

Если файлы должны быть распределены по политикам набора, оцениваются один раз в час. При создании новой конечной точки сервера возможны две ситуации:

1. При добавлении новой конечной точки сервера в этом расположении сервера часто существуют файлы. Прежде чем можно будет начать распределение по уровням облака, их необходимо отправить первыми. Политика свободного места тома не начнет свою работу, пока не завершится начальная отправка всех файлов. Однако необязательная политика дат начнет работать с отдельными файлами, как только файл будет передан. Также применяется интервал в один час. 
2. При добавлении новой конечной точки сервера можно подключить пустое расположение сервера к общему файловому ресурсу Azure с данными в нем. Относится ли это к второму серверу или в ситуации аварийного восстановления. Если вы решили загрузить пространство имен и отозвать содержимое во время начальной загрузки на сервер, то после того, как пространство имен будет восстановлено, файлы будут отозваны на основе метки времени последнего изменения. Только столько файлов будет отозвано в политике свободного места тома и в необязательной политике дат.

<a id="is-my-file-tiered"></a>
### <a name="how-can-i-tell-whether-a-file-has-been-tiered"></a>Как определить, что файл был перемещен?
Существует несколько способов определения перемещения файла в файловый ресурс Azure.
    
   *  **Проверьте атрибуты файла.**
     Щелкните файл правой кнопкой мыши, перейдите в раздел **Сведения** и прокрутите вниз до свойства **Атрибуты**. Перемещенному файлу будут заданы следующие атрибуты:     
        
        | Буква атрибута | Атрибут | Определение |
        |:----------------:|-----------|------------|
        | Объект | Архив | Указывает, что с помощью программного обеспечения для архивации должно быть выполнено резервное копирование файла. Этот атрибут задается всегда, независимо от того, перемещен файл или полностью расположен на диске. |
        | P | Разреженный файл | Указывает, что этот файл является разреженным. Это специализированный тип файла, который NTFS предлагает для эффективного использования при отсутствии файлового потока на диске. Служба синхронизации файлов Azure использует разреженные файлы, так как файл либо полностью перемещается, либо частично отзывается. Когда файл полностью перемещается, его файловый поток хранится только в облаке. Когда файл частично отзывается, часть этого файла уже на диске. Если файл полностью отозван на диск, служба синхронизации файлов Azure преобразует его из разреженного файла в обычный файл. Этот атрибут задается только в Windows Server 2016 и более старых версиях.|
        | M | Отзыв при доступе к данным | Указывает, что данные файла не полностью представлены в локальном хранилище. При чтении файла по крайней мере часть содержимого файла будет получена из общего файлового ресурса Azure, к которому подключена конечная точка сервера. Этот атрибут задается только в Windows Server 2019. |
        | L | Точка повторного анализа | Указывает, что файл содержит точку повторного анализа. Она представляет собой специальный указатель, используемый фильтром файловой системы. Служба синхронизации файлов Azure использует точки повторного анализа, чтобы фильтр (StorageSync.sys) файловой системы в этой службе мог определить место хранения файла в облаке. Это обеспечивает прозрачный доступ без непосредственной осведомленности пользователя о задействовании службы синхронизации файлов Azure или о том, как получить доступ к файлу в файловом ресурсе Azure. После полного отзыва файла служба синхронизации файлов Azure удаляет точку повторного анализа из файла. |
        | O | Вне сети | Указывает, что некоторое (или все) содержимое файла не хранится на диске. После полного отзыва файла служба синхронизации файлов Azure удаляет этот атрибут. |

        ![Диалоговое окно свойств файла с выбранной вкладкой "Сведения"](media/storage-files-faq/azure-file-sync-file-attributes.png)
        
        Вы можете просмотреть атрибуты для всех файлов в папке. Для этого необходимо добавить поле **Атрибуты** в окно таблицы проводника. Щелкните правой кнопкой мыши имеющийся столбец (например, **Размер**), выберите **Дополнительно**, а затем в раскрывающемся списке выберите **Атрибуты**.
        
   * **Используйте `fsutil` для проверки точек повторного анализа в файле.**
       Как объяснялось выше, для перемещенного файла всегда задана точка повторного анализа. Она представляет собой специальный указатель, используемый фильтром файловой системы (StorageSync.sys) службы синхронизации файлов Azure. Проверить наличие точки повторного анализа для файла можно с помощью команды `fsutil`, выполнив ее в командной строке с повышенными привилегиями или сеансе PowerShell:
    
        ```powershell
        fsutil reparsepoint query <your-file-name>
        ```

        Если файл содержит точку повторного анализа, вы увидите сообщение **Значение тега повторной обработки: 0x8000001e**. Это шестнадцатеричное значение — это значение точки повторного анализа, которое принадлежит Синхронизация файлов Azure. В выходных данных также содержатся данные повторного анализа, представляющие путь к файлу в общей папке Azure.

        > [!WARNING]  
        > С помощью команды `fsutil reparsepoint` можно также удалить точку повторного анализа. Не выполняйте эту команду, пока вы не получите прямое указание от инженерной команды службы синхронизации файлов Azure, так как ее выполнение может привести к потере данных. 

<a id="afs-recall-file"></a>
### <a name="a-file-i-want-to-use-has-been-tiered-how-can-i-recall-the-file-to-disk-to-use-it-locally"></a>Файл, который мне нужен, был распределен по уровням. Как мне отозвать его на диск для локального использования?
Самый простой способ отозвать файл на диск — открыть его. Фильтр файловой системы (StorageSync.sys) в службе синхронизации файлов Azure быстро скачает этот файл из файлового ресурса Azure без необходимости дополнительных действий. При открытии типов файлов, которые можно считать частично, например файлы мультимедиа или ZIP-файлы, их полная загрузка невозможна.

Вы также можете принудительно отозвать файл с помощью PowerShell. Этот вариант можно использовать, если вы хотите отозвать одновременно большое количество файлов (например, все файлы в папке). Откройте сеанс PowerShell на узле сервера, на котором установлена служба синхронизации файлов Azure, и выполните следующие команды PowerShell:
    
```powershell
Import-Module "C:\Program Files\Azure\StorageSyncAgent\StorageSync.Management.ServerCmdlets.dll"
Invoke-StorageSyncFileRecall -Path <path-to-to-your-server-endpoint>
```
Дополнительные параметры:
* `-Order CloudTieringPolicy`отзывает последние измененные или доступные файлы первыми и разрешается текущей политикой уровней. 
    * Если настроена политика свободного места в томе, файлы будут отозваны до тех пор, пока не будет достигнут параметр политики свободного места на томе. Например, если параметр политики свободного места на томе имеет значение 20%, то повторный вызов будет прерван, когда свободное место тома достигнет 20%.  
    * Если настроена политика "свободное место на томе" и "Дата", файлы будут отозваны до тех пор, пока не будет достигнут параметр политики "свободное место на томе" или "Дата". Например, если параметр политики свободного места на томе имеет значение 20%, а политика даты — 7 дней, то повторная попытка будет прервана, когда свободное место тома достигнет 20% или все файлы, которые были доступны или изменены в течение 7 дней, будут локальными.
* `-ThreadCount`Определяет, сколько файлов можно вызвать параллельно.
* `-PerFileRetryCount`Определяет, как часто будет пытаться отозвать заблокированный файл.
* `-PerFileRetryDelaySeconds`Определяет время в секундах между повторными попытками вызова и всегда используется в сочетании с предыдущим параметром.

Пример.
```powershell
Import-Module "C:\Program Files\Azure\StorageSyncAgent\StorageSync.Management.ServerCmdlets.dll"
Invoke-StorageSyncFileRecall -Path <path-to-to-your-server-endpoint> -ThreadCount 8 -Order CloudTieringPolicy -PerFileRetryCount 3 -PerFileRetryDelaySeconds 10
``` 

> [!Note]  
> - Командлет Invoke-Сторажесинкфилерекалл также можно использовать для повышения производительности загрузки файлов при добавлении новой конечной точки сервера в существующую группу синхронизации.  
>- Если на локальном томе, на котором размещен сервер, недостаточно свободного места для отзыва всех многоуровневых данных, командлет `Invoke-StorageSyncFileRecall` завершится сбоем.  

<a id="sizeondisk-versus-size"></a>
### <a name="why-doesnt-the-size-on-disk-property-for-a-file-match-the-size-property-after-using-azure-file-sync"></a>Почему свойство файла *Размер на диске* не соответствует свойству *Размер* после использования службы "Синхронизация файлов Azure"? 
Проводник Windows предоставляет два свойства для представления размера файла: **Размер** и **Размер на диске**. Эти свойства немного отличаются. **Размер** означает полный размер файла. **Размер на диске** означает размер файлового потока, хранимого на диске. Значения этих свойств могут различаться по различным причинам, таким как сжатие, использование дедупликации данных или распределение по уровням облака с Синхронизация файлов Azure. Если файл распределен по уровням в файловый ресурс Azure, то размер диска будет равен нулю, так как файловый поток хранится в файловом ресурсе Azure, а не на диске. Файл также может быть перемещен частично (или частично отозван), что означает, что на диске размещается часть файла. Такое может случиться, когда файлы частично считываются приложениями, например мультимедийными проигрывателями или программами для сжатия. 

<a id="afs-force-tiering"></a>
### <a name="how-do-i-force-a-file-or-directory-to-be-tiered"></a>Как можно принудительно переместить файл или каталог?

> [!NOTE]
> При выборе каталога, для которого будет выполняться Многоуровневое распределение, будут применяться только файлы, находящиеся в каталоге. Все файлы, созданные после этого времени, не будут автоматически распределены по уровням.

Если функция распределения по уровням облака включена, файлы распределяются по уровням автоматически на основе последнего времени доступа и изменения, чтобы достичь процента свободного пространства тома, указанного для конечной точки облака. Тем не менее иногда вам может понадобиться распределить файл по уровням вручную. Это может быть полезно, если вам нужно сохранить большие файлы, которые не планируется использовать повторно в течение долгого времени, и освободить пространство на томе для других файлов и папок. Вы можете принудительно распределить файлы по уровням с помощью следующих команд PowerShell:

```powershell
Import-Module "C:\Program Files\Azure\StorageSyncAgent\StorageSync.Management.ServerCmdlets.dll"
Invoke-StorageSyncCloudTiering -Path <file-or-directory-to-be-tiered>
```

<a id="afs-image-thumbnail"></a>
### <a name="why-are-my-tiered-files-not-showing-thumbnails-or-previews-in-windows-explorer"></a>Почему мои многоуровневые файлы не показывают эскизы или предварительные версии в проводнике Windows?
Для многоуровневых файлов эскизы и предварительные версии не будут отображаться на конечной точке сервера. Такое поведение ожидается, так как функция кэширования эскизов в Windows намеренно пропускает чтение файлов с помощью атрибута offline. Если выбрано распределение по уровням в облаке, считывание через многоуровневые файлы приведет к их скачанию (отзыв).

Это поведение не относится к Синхронизация файлов Azure, в проводнике Windows отображается «серый крестик» для всех файлов с установленным атрибутом «вне сети». При доступе к файлам по протоколу SMB вы увидите значок X. Подробное описание этого поведения см. на[https://blogs.msdn.microsoft.com/oldnewthing/20170503-00/?p=96105](https://blogs.msdn.microsoft.com/oldnewthing/20170503-00/?p=96105)

<a id="afs-tiering-disabled"></a>
### <a name="i-have-cloud-tiering-disabled-why-are-there-tiered-files-in-the-server-endpoint-location"></a>У меня отключено распределение по уровням облака, почему в расположении серверной конечной точки есть многоуровневые файлы?

Существует две причины, по которым многоуровневые файлы могут существовать в расположении конечной точки сервера.

- При добавлении новой конечной точки сервера в существующую группу синхронизации метаданные сначала синхронизируются с сервером, а затем файлы загружаются на сервер в фоновом режиме. Файлы будут отображаться как многоуровневые, пока они не загружаются локально. Чтобы повысить производительность загрузки файлов при добавлении нового сервера в группу синхронизации, используйте командлет [Invoke-сторажесинкфилерекалл](storage-sync-cloud-tiering.md#afs-recall-file) .

- Если распределение по уровням облака было включено на конечной точке сервера, а затем отключено, файлы останутся распределенными по уровням до тех пор, пока они не будут доступны.


## <a name="next-steps"></a>Следующие шаги
* [Планирование развертывания Синхронизация файлов Azure](storage-sync-files-planning.md)
