---
title: Заметки о выпуске агента службы "Синхронизация файлов Azure" | Документация Майкрософт
description: Заметки о выпуске агента службы "Синхронизация файлов Azure".
services: storage
author: wmgries
ms.service: storage
ms.topic: conceptual
ms.date: 3/16/2020
ms.author: wgries
ms.subservice: files
ms.openlocfilehash: 82d8c8ca94f3d0f4289902ae40928ff507e2d1ec
ms.sourcegitcommit: b55d7c87dc645d8e5eb1e8f05f5afa38d7574846
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81460670"
---
# <a name="release-notes-for-the-azure-file-sync-agent"></a>Заметки о выпуске агента службы "Синхронизация файлов Azure"
Служба "Синхронизация файлов Azure" позволяет централизованно хранить файловые ресурсы организации в службе файлов Azure, обеспечивая гибкость, производительность и совместимость локального файлового сервера. Установки серверов Windows Server преобразовываются в быстрый кэш общего файлового ресурса Azure. Для локального доступа к данным вы можете использовать любой протокол, доступный в Windows Server (в том числе SMB, NFS и FTPS). Кроме того, вы можете создать любое количество кэшей.

В этой статье рассматриваются заметки о выпуске для поддерживаемых версий агента службы "Синхронизация файлов Azure".

## <a name="supported-versions"></a>Поддерживаемые версии
Служба "Синхронизация файлов Azure" поддерживает следующие версии агента:

| Веха | Номер версии агента | Дата выпуска | Состояние |
|----|----------------------|--------------|------------------|
| V10 Релиз - [KB4522359](https://support.microsoft.com/en-us/help/4522409/azure-file-sync-agent-v10-release-march-2020)| 10.0.0.0 | 9 апреля 2020 г. | В полете |
| Декабрь 2019 обновление свертывания - [KB4522360](https://support.microsoft.com/help/4522360)| 9.1.0.0 | 12 декабря 2019 г. | Поддерживается |
| V9 Релиз - [KB4522359](https://support.microsoft.com/help/4522359)| 9.0.0.0 | 2 декабря 2019 года | Поддерживается |
| V8 Релиз - [KB4511224](https://support.microsoft.com/help/4511224)| 8.0.0.0 | 8 октября 2019 г. | Поддерживается |
| Июль 2019 обновление свертывания - [KB4490497](https://support.microsoft.com/help/4490497)| 7.2.0.0 | 24 июля 2019 г. | Поддерживается |
| Июль 2019 обновление свертывания - [KB4490496](https://support.microsoft.com/help/4490496)| 7.1.0.0 | 12 июля 2019 г. | Поддерживается |
| V7 Релиз - [KB4490495](https://support.microsoft.com/help/4490495)| 7.0.0.0 | 19 июня 2019 года | Поддерживается |
| Июнь 2019 обновление свертывания - [KB4489739](https://support.microsoft.com/help/4489739)| 6.3.0.0 | 27 июня 2019 года | Поддерживается - Версия агента истекает 21 апреля 2020 года |
| Июнь 2019 обновление свертывания - [KB4489738](https://support.microsoft.com/help/4489738)| 6.2.0.0 | 13 июня 2019 года | Поддерживается - Версия агента истекает 21 апреля 2020 года |
| Свертывание обновлений в мае 2019 года - [KB4489737](https://support.microsoft.com/help/4489737)| 6.1.0.0 | 7 мая 2019 года | Поддерживается - Версия агента истекает 21 апреля 2020 года |
| V6 Релиз - [KB4489736](https://support.microsoft.com/help/4489736)| 6.0.0.0 | 21 апреля 2019 года | Поддерживается - Версия агента истекает 21 апреля 2020 года |
| V5 Релиз | 5.0.2.0 - 5.2.0.0 | Недоступно | Не поддерживается - Агент версии истек 18 марта 2020 |
| Выпуск версии 4 | 4.0.1.0 - 4.3.0.0 | Недоступно | Не поддерживается - Версия агента истек лавка 6 ноября 2019 г. |
| V3 Релиз | 3.1.0.0 - 3.4.0.0 | Недоступно | Не поддерживается - Версия агента истек 19 августа 2019 |
| Агенты pre-GA | 1.1.0.0 — 3.0.13.0 | Недоступно | Не поддерживается. Версии агента истекли 1 октября 2018 г. |

### <a name="azure-file-sync-agent-update-policy"></a>Политика обновления агента службы синхронизации файлов Azure
[!INCLUDE [storage-sync-files-agent-update-policy](../../../includes/storage-sync-files-agent-update-policy.md)]

## <a name="agent-version-10000"></a>Агент версия 10.0.0.0.0
Следующие примечания к выпуску для версии 10.0.0.0 агента Azure File Sync (выпущен 9 апреля 2020 года).

### <a name="improvements-and-issues-that-are-fixed"></a>Улучшения и решенные проблемы

- Улучшенная синхронизация на портале
    - С выпуском агента V10 портал Azure вскоре начнет отображать тип сеанса синхронизации, который работает. Пример: первоначальная загрузка, регулярная загрузка, фоновый отзыв (быстрые случаи аварийного восстановления) и тому подобное. 

- Улучшенное многоуровневое интерфейсное пребывание в облаке
    - Если у вас есть файлы, которые не выполняются или не меняются, теперь можно просматривать ошибки многоуровневой точки в свойствах конечных точек сервера.
    - Дополнительная информация об уровне облачности доступна для точки зрения сервера:
        - Размер локального кэша
        - Эффективность использования кэша
        - Детали политики облачного уровня: размер громкости, текущее свободное пространство или последнее время доступа к старейшему файлу в локальном кэше.
    - Эти изменения будут опубликованы на портале Azure вскоре после первоначального выпуска агента V10.

- Поддержка перемещения службы синхронизации хранения и/или учетной записи хранения другому арендатору Active Directory (AAD)
    - Теперь Azure File Sync поддерживает перемещение службы синхронизации хранения и/или учетной записи хранения в другую группу ресурсов, подписку или aD-нанимателя Azure AD.
    
- Различные улучшения производительности и надежности
    - Обнаружение изменений в доле файла Azure может выйти из строя, если виртуальная сеть (VNET) и правила брандмауэра настроены на учетную запись хранилища.
    - Снижение потребления памяти, связанное с отзывом. 
    - Улучшенная производительность при использовании [Смдлета Invoke-AzStorageSyncChangeDetection.](https://docs.microsoft.com/powershell/module/az.storagesync/invoke-azstoragesyncchangedetection)
    - Другие различные улучшения надежности. 
    
### <a name="evaluation-tool"></a>Средство оценки
Прежде чем развертывать службу "Синхронизация файлов Azure", следует оценить, совместима ли она с вашей системой, с помощью средства оценки этой службы. Это средство является командлетом Azure PowerShell, который проверяет наличие потенциальных проблем с файловой системой и набором данных, таких как неподдерживаемые символы или неподдерживаемая версия операционной системы. Инструкции по установке и использованию см. в разделе о [средстве оценки](https://docs.microsoft.com/azure/storage/files/storage-sync-files-planning#evaluation-cmdlet) руководства по планированию. 

### <a name="agent-installation-and-server-configuration"></a>Установка агента и конфигурация сервера
Дополнительные сведения о том, как установить и настроить агент службы "Синхронизация файлов Azure" с помощью Windows Server, см. в статье о [планировании развертывания службы "Синхронизация файлов Azure"](storage-sync-files-planning.md) и [практическом руководстве по развертыванию службы "Синхронизация файлов Azure"](storage-sync-files-deployment-guide.md).

- Пакет установки агента нужно устанавливать с разрешениями более высокого уровня (администратора).
- Агент не поддерживается в опции развертывания Nano Server.
- Агент поддерживается только в Windows Server 2019 и Windows Server 2016 и Windows Server 2012 R2.
- Агент требует по крайней мере 2 ГиБ памяти. Если сервер выполняется на виртуальной машине с включенной динамической памятью, в виртуальной машине должна быть настроена память объемом не менее 2048 МиБ.
- Служба агента синхронизации хранилища (FileSyncSvc) не поддерживает конечные точки сервера, которые размещены в томе со сжатым каталогом данных о системном томе (SVI). Использование этой конфигурации может привести к непредвиденным результатам.

### <a name="interoperability"></a>Совместимость
- Антивирусные программы, приложения архивации, а также другие приложения, которые получают доступ к многоуровневым файлам, вызывают нежелательные отзывы, если они не учитывают автономный атрибут и пропускают чтение содержимого этих файлов. Дополнительные сведения см. в статье об [устранении неполадок службы "Синхронизация файлов Azure"](storage-sync-files-troubleshoot.md).
- Фильтры блокировки файлов FSRM могут стать причиной постоянных сбоев синхронизации.
- Запуск sysprep на сервере с установленным агентом Azure File Sync не поддерживается и может привести к неожиданным результатам. Устанавливать агент Синхронизации файлов Azure нужно после развертывания образа сервера и завершения мини-установки sysprep.

### <a name="sync-limitations"></a>Ограничения синхронизации
Следующие элементы не синхронизируются, но остальная часть системы продолжает работать в обычном режиме:
- Файлы с неподдерживаемыми символами. Со списком неподдерживаемых символов можно ознакомиться в [руководстве по устранению неполадок](storage-sync-files-troubleshoot.md#handling-unsupported-characters).
- Файлы или каталоги, которые оканчиваются точкой.
- Пути длиной более 2048 символов.
- Часть системного списка управления доступом (SACL) в дескрипторе безопасности, который используется для аудита.
- Дополнительные атрибуты.
- Альтернативные потоки данных.
- Точки повторного анализа.
- Жесткие связи.
- Сжатие (для серверного файла) не сохраняется при синхронизации изменений в этом файле из других конечных точек.
- Файлы, зашифрованные с помощью файловой системы EFS (или другого пользовательского режима шифрования). Служба не может считывать такие данные.

    > [!Note]  
    > Служба "Синхронизация файлов Azure" всегда шифрует передаваемые данные. Неактивные данные можно зашифровать в Azure.
 
### <a name="server-endpoint"></a>Конечная точка сервера
- Конечную точку сервера можно создавать только на томе NTFS. Сейчас служба "Синхронизация файлов Azure" не поддерживает ReFS и FAT, FAT32 и другие файловые системы.
- Но для системного тома не поддерживается распределение по уровням облака. Чтобы создать конечную точку сервера на системном томе, отключите распределение по уровням облака при ее создании.
- Отказоустойчивую кластеризацию поддерживают только кластеризованные диски. Общие тома кластера (CSV) ее не поддерживают.
- Конечная точка сервера не может быть вложенной. Она может сосуществовать параллельно с другой конечной точкой на одном томе.
- Не храните файл ОС или файл подкачки приложения в расположении конечной точки сервера.
- В случае переименования сервера его имя на портале не обновляется.

### <a name="cloud-endpoint"></a>Облачная конечная точка
- Служба "Синхронизация файлов Azure" поддерживает внесение изменений непосредственно в файловый ресурс Azure. Однако внесенные изменения сначала должны быть обнаружены заданием обнаружения изменений этой службы. Задание обнаружения изменений инициируется для облачной конечной точки каждые 24 часа. Для немедленной синхронизации файлов, измененных в доле файла Azure, [cmdlet Invoke-AzStorageSyncChangeDetection](https://docs.microsoft.com/powershell/module/az.storagesync/invoke-azstoragesyncchangedetection) PowerShell может быть использован для ручного инициирования обнаружения изменений в доле файла Azure. Кроме того, изменения, внесенные в файловый ресурс Azure с помощью протокола REST, не приведут к обновлению времени последнего изменения SMB и не будут распознаны как изменение службой синхронизации.
- Службу синхронизации хранилища и/или учетную запись хранения можно переместить в другую группу ресурсов или подписку в рамках существующего клиента Azure AD. Если учетная запись хранения перемещена, необходимо предоставить службе Hybrid File Sync доступ к учетной записи хранилища (см. в разделе [Убедитесь, что служба "Синхронизация файлов Azure" имеет доступ к учетной записи хранения](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cportal#troubleshoot-rbac)).

    > [!Note]  
    > При создании конечная точка облака учетная запись синхронизации и хранения данных должна находиться в том же арендаторе Azure AD. После создания точки облака служба синхронизации и учетная запись хранения может быть перемещена различным арендаторам Azure AD.

### <a name="cloud-tiering"></a>Распределение по уровням облака
- Если многоуровневый файл копируется в другое расположение с помощью Robocopy, полученный файл не будет распределен по уровням. Вы можете задать автономный атрибут, так как Robocopy неправильно включает его в операциях копирования.
- При копировании файлов с помощью robocopy используйте параметр /MIR, чтобы сохранить метки времени файлов. Таким образом, старые файлы будут перемещены на другой уровень раньше, чем файлы, доступ к которым был получен недавно.

## <a name="agent-version-9100"></a>Агент версия 9.1.0.0
Следующие примечания к выпуску для версии 9.1.0.0 агента Azure File Sync, выпущенной 12 декабря 2019 года. Эти заметки являются дополнением к примечаниям к выпуску, перечисленным для версии 9.0.0.0.

Выпуск, зафиксированный в этом выпуске:  
- Синхронизация не справляется с одной из следующих ошибок после обновления до версии агента Azure File Sync 9.0:
    - 0x8e5e044e (JET_errWriteConflict)
    - 0x8e5e0450 (JET_errInvalidSesid)
    - 0x8e5e0442 (JET_errInstanceUnavailable)

## <a name="agent-version-9000"></a>Агент версия 9.0.0.0
Следующие примечания к выпуску для версии 9.0.0.0 агента Azure File Sync (выпущен 2 декабря 2019 г.).

### <a name="improvements-and-issues-that-are-fixed"></a>Улучшения и решенные проблемы

- Поддержка восстановления самообслуживания
    - Теперь пользователи могут восстановить свои файлы, используя функцию предыдущей версии. До выхода v9 предыдущая функция версии не поддерживалась на томах, в которых было включено многоуровневое облако. Эта функция должна быть включена для каждого объема отдельно, на котором существует конечная точка с включенным уровнем облака. Дополнительные сведения см. на следующих ресурсах:  
[Самообслуживание восстанавливается через предыдущие версии и VSS (Служба копирования теней тома).](https://docs.microsoft.com/azure/storage/files/storage-sync-files-deployment-guide#self-service-restore-through-previous-versions-and-vss-volume-shadow-copy-service) 
 
- Поддержка больших размеров файловых долей 
    - Теперь Azure File Sync поддерживает до 64TiB и 100 миллионов файлов в одном, синхронизированном пространстве имен.  
 
- Поддержка дедоумляции данных на сервере 2019 
    - Deduplication данных теперь поддерживается с включенным облачным уровнем на Windows Server 2019. Для поддержки deduplication данных на томах с облачным многоуровневым уровнем необходимо установить обновление Windows [KB4520062.](https://support.microsoft.com/help/4520062) 
 
- Улучшенный минимальный размер файла для файла до уровня 
    - Минимальный размер файла для файла до уровня теперь основан на размере кластера файловой системы (двойной размер кластера файловой системы). Например, по умолчанию размер кластера файловой системы NTFS составляет 4KB, в результате минимальный размер файла для уровня файла до уровня составляет 8KB. 
 
- Тест на подключение к сети cmdlet 
    - В рамках конфигурации Azure File Sync необходимо связаться с несколькими конечными точками обслуживания. Каждый из них имеет свое собственное имя DNS, которое должно быть доступно серверу. Эти URL-адреса также специфичны для региона, в который зарегистрирован сервер. После регистрации сервера, тест на подключение cmdlet (PowerShell и Server Registration Utility) может быть использован для тестирования связи со всеми URL-адресами, специфичными для этого сервера. Этот cmdlet может помочь устранить неполадки, когда неполная связь не позволяет серверу полностью работать с Azure File Sync и он может быть использован для тонкой настройки конфигураций прокси и брандмауэра.  
 
        Для выполнения теста сетевого подключения выполнить следующие команды PowerShell: 
 
        Импорт-модуль "C:'Программные файлы/Azure-StorageSyncAgent-StorageSync.Management.ServerCmdlets.dll"  
        Тест-ХранениеSyncNetworkConnectivity
 
- Удалите улучшение конечных точек сервера при включении многоуровневого облака 
    - Как и прежде, удаление конечной точки сервера не приводит к удалению файлов в файле Azure. Однако поведение репаратов на локальном сервере изменилось. Очки репарирований (указатели на файлы, которые не являются локальными на сервере) теперь удаляются при удалении конечной точки сервера. Полностью кэшированные файлы останутся на сервере. Это улучшение было сделано для предотвращения [осиротевших многоуровневых файлов](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cazure-portal#tiered-files-are-not-accessible-on-the-server-after-deleting-a-server-endpoint) при удалении конечной точки сервера. При повторном создании конечная точка сервера на сервере будут воссозданы точки репарирований для многоуровневых файлов.  
 
- Улучшения производительности и надежности. 
    - Снижение сбоев отзыва. Размер отзыва теперь автоматически корректируется на основе пропускной способности сети. 
    - Улучшенная производительность загрузки при добавлении нового сервера в группу синхронизации. 
    - Сокращение файлов, не синхронизированных из-за конфликтов ограничений. 
    - Файлы не выполняются или неожиданно отозваны в определенных сценариях, если конечный путь сервера является точкой крепления громкости.
    
### <a name="evaluation-tool"></a>Средство оценки
Прежде чем развертывать службу "Синхронизация файлов Azure", следует оценить, совместима ли она с вашей системой, с помощью средства оценки этой службы. Это средство является командлетом Azure PowerShell, который проверяет наличие потенциальных проблем с файловой системой и набором данных, таких как неподдерживаемые символы или неподдерживаемая версия операционной системы. Инструкции по установке и использованию см. в разделе о [средстве оценки](https://docs.microsoft.com/azure/storage/files/storage-sync-files-planning#evaluation-cmdlet) руководства по планированию. 

### <a name="agent-installation-and-server-configuration"></a>Установка агента и конфигурация сервера
Дополнительные сведения о том, как установить и настроить агент службы "Синхронизация файлов Azure" с помощью Windows Server, см. в статье о [планировании развертывания службы "Синхронизация файлов Azure"](storage-sync-files-planning.md) и [практическом руководстве по развертыванию службы "Синхронизация файлов Azure"](storage-sync-files-deployment-guide.md).

- Пакет установки агента нужно устанавливать с разрешениями более высокого уровня (администратора).
- Агент не поддерживается в опции развертывания Nano Server.
- Агент поддерживается только в Windows Server 2019 и Windows Server 2016 и Windows Server 2012 R2.
- Агент требует по крайней мере 2 ГиБ памяти. Если сервер выполняется на виртуальной машине с включенной динамической памятью, в виртуальной машине должна быть настроена память объемом не менее 2048 МиБ.
- Служба агента синхронизации хранилища (FileSyncSvc) не поддерживает конечные точки сервера, которые размещены в томе со сжатым каталогом данных о системном томе (SVI). Использование этой конфигурации может привести к непредвиденным результатам.

### <a name="interoperability"></a>Совместимость
- Антивирусные программы, приложения архивации, а также другие приложения, которые получают доступ к многоуровневым файлам, вызывают нежелательные отзывы, если они не учитывают автономный атрибут и пропускают чтение содержимого этих файлов. Дополнительные сведения см. в статье об [устранении неполадок службы "Синхронизация файлов Azure"](storage-sync-files-troubleshoot.md).
- Фильтры блокировки файлов FSRM могут стать причиной постоянных сбоев синхронизации.
- Запуск sysprep на сервере с установленным агентом Azure File Sync не поддерживается и может привести к неожиданным результатам. Устанавливать агент Синхронизации файлов Azure нужно после развертывания образа сервера и завершения мини-установки sysprep.

### <a name="sync-limitations"></a>Ограничения синхронизации
Следующие элементы не синхронизируются, но остальная часть системы продолжает работать в обычном режиме:
- Файлы с неподдерживаемыми символами. Со списком неподдерживаемых символов можно ознакомиться в [руководстве по устранению неполадок](storage-sync-files-troubleshoot.md#handling-unsupported-characters).
- Файлы или каталоги, которые оканчиваются точкой.
- Пути длиной более 2048 символов.
- Часть списка управления доступом на уровне пользователей (DACL) в дескрипторе безопасности размером более 2 КБ. (Эта проблема возникает только при наличии более 40 записей контроля доступа (ACE) на одном элементе.)
- Часть системного списка управления доступом (SACL) в дескрипторе безопасности, который используется для аудита.
- Дополнительные атрибуты.
- Альтернативные потоки данных.
- Точки повторного анализа.
- Жесткие связи.
- Сжатие (для серверного файла) не сохраняется при синхронизации изменений в этом файле из других конечных точек.
- Файлы, зашифрованные с помощью файловой системы EFS (или другого пользовательского режима шифрования). Служба не может считывать такие данные.

    > [!Note]  
    > Служба "Синхронизация файлов Azure" всегда шифрует передаваемые данные. Неактивные данные можно зашифровать в Azure.
 
### <a name="server-endpoint"></a>Конечная точка сервера
- Конечную точку сервера можно создавать только на томе NTFS. Сейчас служба "Синхронизация файлов Azure" не поддерживает ReFS и FAT, FAT32 и другие файловые системы.
- Многоуровневые файлы станут недоступными для использования, если их не отозвать перед удалением конечной точки сервера. Чтобы восстановить доступ к файлам, повторно создайте конечную точку сервера. Если с момента удаления конечной точки сервера прошло 30 дней или если была удалена конечная точка облака, многоуровневые файлы, которые не были отозваны, станут непригодными для использования. Чтобы узнать больше, [см. Tiered файлы не доступны на сервере после удалять конечную точку сервера.](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cazure-portal#tiered-files-are-not-accessible-on-the-server-after-deleting-a-server-endpoint)
- Но для системного тома не поддерживается распределение по уровням облака. Чтобы создать конечную точку сервера на системном томе, отключите распределение по уровням облака при ее создании.
- Отказоустойчивую кластеризацию поддерживают только кластеризованные диски. Общие тома кластера (CSV) ее не поддерживают.
- Конечная точка сервера не может быть вложенной. Она может сосуществовать параллельно с другой конечной точкой на одном томе.
- Не храните файл ОС или файл подкачки приложения в расположении конечной точки сервера.
- В случае переименования сервера его имя на портале не обновляется.

### <a name="cloud-endpoint"></a>Облачная конечная точка
- Служба "Синхронизация файлов Azure" поддерживает внесение изменений непосредственно в файловый ресурс Azure. Однако внесенные изменения сначала должны быть обнаружены заданием обнаружения изменений этой службы. Задание обнаружения изменений инициируется для облачной конечной точки каждые 24 часа. Для немедленной синхронизации файлов, измененных в доле файла Azure, [cmdlet Invoke-AzStorageSyncChangeDetection](https://docs.microsoft.com/powershell/module/az.storagesync/invoke-azstoragesyncchangedetection) PowerShell может быть использован для ручного инициирования обнаружения изменений в доле файла Azure. Кроме того, изменения, внесенные в файловый ресурс Azure с помощью протокола REST, не приведут к обновлению времени последнего изменения SMB и не будут распознаны как изменение службой синхронизации.
- Службу синхронизации хранилища и/или учетную запись хранения можно переместить в другую группу ресурсов или подписку в рамках существующего клиента Azure AD. Если учетная запись хранения перемещена, необходимо предоставить службе Hybrid File Sync доступ к учетной записи хранилища (см. в разделе [Убедитесь, что служба "Синхронизация файлов Azure" имеет доступ к учетной записи хранения](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cportal#troubleshoot-rbac)).

    > [!Note]  
    > Служба "Синхронизация файлов Azure" не поддерживает перемещение подписки в другой клиент Azure AD.

### <a name="cloud-tiering"></a>Распределение по уровням облака
- Если многоуровневый файл копируется в другое расположение с помощью Robocopy, полученный файл не будет распределен по уровням. Вы можете задать автономный атрибут, так как Robocopy неправильно включает его в операциях копирования.
- При копировании файлов с помощью robocopy используйте параметр /MIR, чтобы сохранить метки времени файлов. Таким образом, старые файлы будут перемещены на другой уровень раньше, чем файлы, доступ к которым был получен недавно.
- Файлы могут не выйти в ровень, если pagefile.sys расположен на томе, который имеет расширение облачного уровня включено. Pagefile.ss должен быть расположен на томе, который имеет облако многоуровневый отключен.

## <a name="agent-version-8000"></a>Агент версия 8.0.0.0
Следующие примечания к выпуску для версии 8.0.0.0 агента Azure File Sync (выпущен 8 октября 2019 г.).

### <a name="improvements-and-issues-that-are-fixed"></a>Улучшения и решенные проблемы

- Восстановление улучшений производительности
    - Более быстрое время восстановления для восстановления, выполненное с помощью резервного копирования Azure. Восстановленные файлы будут синхронизироваться с серверами Azure File Sync гораздо быстрее. 
- Улучшенное многоуровневое интерфейсное пребывание в облаке  
    - Если у вас есть многоуровневые файлы, которые не отзываются, теперь можно просматривать ошибки отзыва в свойствах конечных точек сервера. Кроме того, в состоянии здоровья конечных точек сервера теперь будут отображаться ошибки и действия по смягчению последствий, если драйвер фильтра облачного уровня не загружается на сервер.
- Упрощенная установка агента
    - Модуль Az-AzureRM PowerShell больше не требуется для регистрации сервера, что делает установку проще и быстрой.
- Различные улучшения производительности и надежности

### <a name="evaluation-tool"></a>Средство оценки
Прежде чем развертывать службу "Синхронизация файлов Azure", следует оценить, совместима ли она с вашей системой, с помощью средства оценки этой службы. Это средство является командлетом Azure PowerShell, который проверяет наличие потенциальных проблем с файловой системой и набором данных, таких как неподдерживаемые символы или неподдерживаемая версия операционной системы. Инструкции по установке и использованию см. в разделе о [средстве оценки](https://docs.microsoft.com/azure/storage/files/storage-sync-files-planning#evaluation-cmdlet) руководства по планированию. 

### <a name="agent-installation-and-server-configuration"></a>Установка агента и конфигурация сервера
Дополнительные сведения о том, как установить и настроить агент службы "Синхронизация файлов Azure" с помощью Windows Server, см. в статье о [планировании развертывания службы "Синхронизация файлов Azure"](storage-sync-files-planning.md) и [практическом руководстве по развертыванию службы "Синхронизация файлов Azure"](storage-sync-files-deployment-guide.md).

- Пакет установки агента нужно устанавливать с разрешениями более высокого уровня (администратора).
- Агент не поддерживается в опции развертывания Nano Server.
- Агент поддерживается только в Windows Server 2019 и Windows Server 2016 и Windows Server 2012 R2.
- Агент требует по крайней мере 2 ГиБ памяти. Если сервер выполняется на виртуальной машине с включенной динамической памятью, в виртуальной машине должна быть настроена память объемом не менее 2048 МиБ.
- Служба агента синхронизации хранилища (FileSyncSvc) не поддерживает конечные точки сервера, которые размещены в томе со сжатым каталогом данных о системном томе (SVI). Использование этой конфигурации может привести к непредвиденным результатам.

### <a name="interoperability"></a>Совместимость
- Антивирусные программы, приложения архивации, а также другие приложения, которые получают доступ к многоуровневым файлам, вызывают нежелательные отзывы, если они не учитывают автономный атрибут и пропускают чтение содержимого этих файлов. Дополнительные сведения см. в статье об [устранении неполадок службы "Синхронизация файлов Azure"](storage-sync-files-troubleshoot.md).
- Фильтры блокировки файлов FSRM могут стать причиной постоянных сбоев синхронизации.
- Запуск sysprep на сервере с установленным агентом Azure File Sync не поддерживается и может привести к неожиданным результатам. Устанавливать агент Синхронизации файлов Azure нужно после развертывания образа сервера и завершения мини-установки sysprep.

### <a name="sync-limitations"></a>Ограничения синхронизации
Следующие элементы не синхронизируются, но остальная часть системы продолжает работать в обычном режиме:
- Файлы с неподдерживаемыми символами. Со списком неподдерживаемых символов можно ознакомиться в [руководстве по устранению неполадок](storage-sync-files-troubleshoot.md#handling-unsupported-characters).
- Файлы или каталоги, которые оканчиваются точкой.
- Пути длиной более 2048 символов.
- Часть списка управления доступом на уровне пользователей (DACL) в дескрипторе безопасности размером более 2 КБ. (Эта проблема возникает только при наличии более 40 записей контроля доступа (ACE) на одном элементе.)
- Часть системного списка управления доступом (SACL) в дескрипторе безопасности, который используется для аудита.
- Дополнительные атрибуты.
- Альтернативные потоки данных.
- Точки повторного анализа.
- Жесткие связи.
- Сжатие (для серверного файла) не сохраняется при синхронизации изменений в этом файле из других конечных точек.
- Файлы, зашифрованные с помощью файловой системы EFS (или другого пользовательского режима шифрования). Служба не может считывать такие данные.

    > [!Note]  
    > Служба "Синхронизация файлов Azure" всегда шифрует передаваемые данные. Неактивные данные можно зашифровать в Azure.
 
### <a name="server-endpoint"></a>Конечная точка сервера
- Конечную точку сервера можно создавать только на томе NTFS. Сейчас служба "Синхронизация файлов Azure" не поддерживает ReFS и FAT, FAT32 и другие файловые системы.
- Многоуровневые файлы станут недоступными для использования, если их не отозвать перед удалением конечной точки сервера. Чтобы восстановить доступ к файлам, повторно создайте конечную точку сервера. Если с момента удаления конечной точки сервера прошло 30 дней или если была удалена конечная точка облака, многоуровневые файлы, которые не были отозваны, станут непригодными для использования. Чтобы узнать больше, [см. Tiered файлы не доступны на сервере после удалять конечную точку сервера.](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cazure-portal#tiered-files-are-not-accessible-on-the-server-after-deleting-a-server-endpoint)
- Но для системного тома не поддерживается распределение по уровням облака. Чтобы создать конечную точку сервера на системном томе, отключите распределение по уровням облака при ее создании.
- Отказоустойчивую кластеризацию поддерживают только кластеризованные диски. Общие тома кластера (CSV) ее не поддерживают.
- Конечная точка сервера не может быть вложенной. Она может сосуществовать параллельно с другой конечной точкой на одном томе.
- Не храните файл ОС или файл подкачки приложения в расположении конечной точки сервера.
- В случае переименования сервера его имя на портале не обновляется.

### <a name="cloud-endpoint"></a>Облачная конечная точка
- Служба "Синхронизация файлов Azure" поддерживает внесение изменений непосредственно в файловый ресурс Azure. Однако внесенные изменения сначала должны быть обнаружены заданием обнаружения изменений этой службы. Задание обнаружения изменений инициируется для облачной конечной точки каждые 24 часа. Для немедленной синхронизации файлов, измененных в доле файла Azure, [cmdlet Invoke-AzStorageSyncChangeDetection](https://docs.microsoft.com/powershell/module/az.storagesync/invoke-azstoragesyncchangedetection) PowerShell может быть использован для ручного инициирования обнаружения изменений в доле файла Azure. Кроме того, изменения, внесенные в файловый ресурс Azure с помощью протокола REST, не приведут к обновлению времени последнего изменения SMB и не будут распознаны как изменение службой синхронизации.
- Службу синхронизации хранилища и/или учетную запись хранения можно переместить в другую группу ресурсов или подписку в рамках существующего клиента Azure AD. Если учетная запись хранения перемещена, необходимо предоставить службе Hybrid File Sync доступ к учетной записи хранилища (см. в разделе [Убедитесь, что служба "Синхронизация файлов Azure" имеет доступ к учетной записи хранения](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cportal#troubleshoot-rbac)).

    > [!Note]  
    > Служба "Синхронизация файлов Azure" не поддерживает перемещение подписки в другой клиент Azure AD.

### <a name="cloud-tiering"></a>Распределение по уровням облака
- Если многоуровневый файл копируется в другое расположение с помощью Robocopy, полученный файл не будет распределен по уровням. Вы можете задать автономный атрибут, так как Robocopy неправильно включает его в операциях копирования.
- При копировании файлов с помощью robocopy используйте параметр /MIR, чтобы сохранить метки времени файлов. Таким образом, старые файлы будут перемещены на другой уровень раньше, чем файлы, доступ к которым был получен недавно.

## <a name="agent-version-7200"></a>Агент версия 7.2.0.0
Следующие примечания к выпуску для версии 7.2.0.0 агента Azure File Sync, выпущенной 24 июля 2019 года. Эти заметки являются дополнением к примечаниям к выпуску, перечисленным для версии 7.0.0.0.

Список исправлений в этом выпуске:  
- Агент синхронизации хранилища (FileSyncSvc) выходит из строя, если конфигурация прокси недействительна.
- Конечная точка сервера запустит BCDR (ошибка 0x80c80257 - ECS_E_BCDR_IN_PROGRESS), если несколько конечных точек на сервере имеют одно и то же имя.
- Улучшения надежности облачного уровня.

## <a name="agent-version-7100"></a>Агент версия 7.1.0.0
Следующие примечания к выпуску для версии 7.1.0.0 агента Azure File Sync, выпущенной 12 июля 2019 года. Эти заметки являются дополнением к примечаниям к выпуску, перечисленным для версии 7.0.0.0.

Список исправлений в этом выпуске:  
- Доступ или просмотр местоположения конечных точек сервера над SMB происходит медленно на Windows Server 2012 R2. 
- Увеличение использования процессора после установки агента Azure File Sync v6.
- Улучшения телеметрии облачного уровня.
- Прочие улучшения надежности при распределении по уровням в облаке и синхронизации.

## <a name="agent-version-7000"></a>Агент версия 7.0.0.0
Следующие примечания к выпуску для версии 7.0.0.0 агента Azure File Sync (выпущен 19 июня 2019 г.).

### <a name="improvements-and-issues-that-are-fixed"></a>Улучшения и решенные проблемы

- Поддержка больших размеров файловых долей
    - С предварительным просмотром больших файлов Azure мы увеличиваем лимиты поддержки для синхронизации файлов. На этом первом этапе Azure File Sync теперь поддерживает до 25 ТБ и 50 миллионов файлов в одном, синхронизированном пространстве имен. Чтобы подать заявку на предварительный https://aka.ms/azurefilesatscalesurveyпросмотр большого раздела файла, заполните эту форму. 
- Поддержка брандмауэра и настройки виртуальной сети на учетных записях хранения
    - Теперь Azure File Sync поддерживает брандмауэр и настройку виртуальной сети на учетных записях хранения. Чтобы настроить развертывание для работы с брандмауэром и виртуальной настройкой сети, [см.](https://docs.microsoft.com/azure/storage/files/storage-sync-files-deployment-guide?tabs=azure-portal#configure-firewall-and-virtual-network-settings)
- PowerShell cmdlet немедленно синхронизирует файлы, измененные в доле файла Azure
    - Для немедленной синхронизации файлов, измененных в доле файла Azure, cmdlet Invoke-AzStorageSyncChangeDetection PowerShell может быть использован для ручного инициирования обнаружения изменений в доле файла Azure. Этот cmdlet предназначен для сценариев, где некоторый тип автоматизированного процесса вносит изменения в общий доступ файла Azure или изменения выполняются администратором (например, перемещение файлов и каталогов в общую долю). Для конечных пользователей рекомендуется установить агент Azure File Sync в IaaS VM и получить доступ конечных пользователей к файлу через IaaS VM. Таким образом, все изменения будут быстро синхронизированы с другими агентами без необходимости использования cmdlet Invoke-AzStorageSyncChange. Чтобы узнать больше, смотрите документацию [Invoke-AzStorageSyncChangeDetection.](https://docs.microsoft.com/powershell/module/az.storagesync/invoke-azstoragesyncchangedetection)
- Улучшенный опыт портала, если вы столкнулись с файлами, которые не синхронизируются
    - Если у вас есть файлы, которые не синхронизируются, мы теперь дифференцируем временные и постоянные ошибки в портале. Временные ошибки обычно разрешаются без необходимости действия админ. Например, файл, который в настоящее время используется, не будет синхронизироваться до тех пор, пока ручка файла не будет закрыта. Для постоянных ошибок мы теперь показываем количество файлов, затронутых каждой ошибкой. Постоянное количество ошибок также отображается в файлах, не синхронизирующих столбец всех конечных точек сервера в группе синхронизации.
- Улучшенное восстановление резервного копирования Azure
    - Отдельные файлы, восстановленные с помощью резервного копирования Azure, теперь быстрее обнаруживаются и синхронизируются с конечным пунктом сервера.
- Улучшенная надежность облачного уровня отзыва cmdlet 
    - Смдлет Invoke-StorageFileFileRecall теперь позволяет клиентам указывать количество повторений файлов и задержку повтора файла, похожую на робокопию. Ранее этот cmdlet в случайном порядке вспоминал все многоуровневые файлы под заданным путем. С новым параметром -Order этот cmdlet сначала вспомнит самые горячие данные и будет соблюдать политику многоуровневого уровня облака (прекратите напоминать, если политика даты выполнена или пространство, свободное от громкости; в зависимости от того, что произойдет в первую очередь).
- Поддержка только для TLS 1.2 (TLS 1.0 и 1.1 отключен)
    - Теперь Azure File Sync поддерживает использование TLS 1.2 только на серверах с отключенными TLS 1.0 и 1.1. До этого улучшения регистрация сервера не смогла бы, если на сервере был отключен TLS 1.0 и 1.1.
- Различные улучшения производительности и надежности для синхронизации и облачного многоуровневого уровня
    - Есть несколько улучшений надежности и производительности в этом выпуске. Некоторые из них нацелены на повышение эффективности многоуровневого уровня облачных технологий, а синхронизация файлов Azure в целом работает лучше в тех ситуациях, когда у вас есть набор графиков регулирования пропускной способности.

### <a name="evaluation-tool"></a>Средство оценки
Прежде чем развертывать службу "Синхронизация файлов Azure", следует оценить, совместима ли она с вашей системой, с помощью средства оценки этой службы. Это средство является командлетом Azure PowerShell, который проверяет наличие потенциальных проблем с файловой системой и набором данных, таких как неподдерживаемые символы или неподдерживаемая версия операционной системы. Инструкции по установке и использованию см. в разделе о [средстве оценки](https://docs.microsoft.com/azure/storage/files/storage-sync-files-planning#evaluation-cmdlet) руководства по планированию. 

### <a name="agent-installation-and-server-configuration"></a>Установка агента и конфигурация сервера
Дополнительные сведения о том, как установить и настроить агент службы "Синхронизация файлов Azure" с помощью Windows Server, см. в статье о [планировании развертывания службы "Синхронизация файлов Azure"](storage-sync-files-planning.md) и [практическом руководстве по развертыванию службы "Синхронизация файлов Azure"](storage-sync-files-deployment-guide.md).

- Пакет установки агента нужно устанавливать с разрешениями более высокого уровня (администратора).
- Агент не поддерживается в опции развертывания Nano Server.
- Агент поддерживается только в Windows Server 2019 и Windows Server 2016 и Windows Server 2012 R2.
- Агент требует по крайней мере 2 ГиБ памяти. Если сервер выполняется на виртуальной машине с включенной динамической памятью, в виртуальной машине должна быть настроена память объемом не менее 2048 МиБ.
- Служба агента синхронизации хранилища (FileSyncSvc) не поддерживает конечные точки сервера, которые размещены в томе со сжатым каталогом данных о системном томе (SVI). Использование этой конфигурации может привести к непредвиденным результатам.

### <a name="interoperability"></a>Совместимость
- Антивирусные программы, приложения архивации, а также другие приложения, которые получают доступ к многоуровневым файлам, вызывают нежелательные отзывы, если они не учитывают автономный атрибут и пропускают чтение содержимого этих файлов. Дополнительные сведения см. в статье об [устранении неполадок службы "Синхронизация файлов Azure"](storage-sync-files-troubleshoot.md).
- Фильтры блокировки файлов FSRM могут стать причиной постоянных сбоев синхронизации.
- Запуск sysprep на сервере с установленным агентом Azure File Sync не поддерживается и может привести к неожиданным результатам. Устанавливать агент Синхронизации файлов Azure нужно после развертывания образа сервера и завершения мини-установки sysprep.

### <a name="sync-limitations"></a>Ограничения синхронизации
Следующие элементы не синхронизируются, но остальная часть системы продолжает работать в обычном режиме:
- Файлы с неподдерживаемыми символами. Со списком неподдерживаемых символов можно ознакомиться в [руководстве по устранению неполадок](storage-sync-files-troubleshoot.md#handling-unsupported-characters).
- Файлы или каталоги, которые оканчиваются точкой.
- Пути длиной более 2048 символов.
- Часть списка управления доступом на уровне пользователей (DACL) в дескрипторе безопасности размером более 2 КБ. (Эта проблема возникает только при наличии более 40 записей контроля доступа (ACE) на одном элементе.)
- Часть системного списка управления доступом (SACL) в дескрипторе безопасности, который используется для аудита.
- Дополнительные атрибуты.
- Альтернативные потоки данных.
- Точки повторного анализа.
- Жесткие связи.
- Сжатие (для серверного файла) не сохраняется при синхронизации изменений в этом файле из других конечных точек.
- Файлы, зашифрованные с помощью файловой системы EFS (или другого пользовательского режима шифрования). Служба не может считывать такие данные.

    > [!Note]  
    > Служба "Синхронизация файлов Azure" всегда шифрует передаваемые данные. Неактивные данные можно зашифровать в Azure.
 
### <a name="server-endpoint"></a>Конечная точка сервера
- Конечную точку сервера можно создавать только на томе NTFS. Сейчас служба "Синхронизация файлов Azure" не поддерживает ReFS и FAT, FAT32 и другие файловые системы.
- Многоуровневые файлы станут недоступными для использования, если их не отозвать перед удалением конечной точки сервера. Чтобы восстановить доступ к файлам, повторно создайте конечную точку сервера. Если с момента удаления конечной точки сервера прошло 30 дней или если была удалена конечная точка облака, многоуровневые файлы, которые не были отозваны, станут непригодными для использования.
- Но для системного тома не поддерживается распределение по уровням облака. Чтобы создать конечную точку сервера на системном томе, отключите распределение по уровням облака при ее создании.
- Отказоустойчивую кластеризацию поддерживают только кластеризованные диски. Общие тома кластера (CSV) ее не поддерживают.
- Конечная точка сервера не может быть вложенной. Она может сосуществовать параллельно с другой конечной точкой на одном томе.
- Не храните файл ОС или файл подкачки приложения в расположении конечной точки сервера.
- В случае переименования сервера его имя на портале не обновляется.

### <a name="cloud-endpoint"></a>Облачная конечная точка
- Служба "Синхронизация файлов Azure" поддерживает внесение изменений непосредственно в файловый ресурс Azure. Однако внесенные изменения сначала должны быть обнаружены заданием обнаружения изменений этой службы. Задание обнаружения изменений инициируется для облачной конечной точки каждые 24 часа. Кроме того, изменения, внесенные в файловый ресурс Azure с помощью протокола REST, не приведут к обновлению времени последнего изменения SMB и не будут распознаны как изменение службой синхронизации.
- Службу синхронизации хранилища и/или учетную запись хранения можно переместить в другую группу ресурсов или подписку в рамках существующего клиента Azure AD. Если учетная запись хранения перемещена, необходимо предоставить службе Hybrid File Sync доступ к учетной записи хранилища (см. в разделе [Убедитесь, что служба "Синхронизация файлов Azure" имеет доступ к учетной записи хранения](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cportal#troubleshoot-rbac)).

    > [!Note]  
    > Служба "Синхронизация файлов Azure" не поддерживает перемещение подписки в другой клиент Azure AD.

### <a name="cloud-tiering"></a>Распределение по уровням облака
- Если многоуровневый файл копируется в другое расположение с помощью Robocopy, полученный файл не будет распределен по уровням. Вы можете задать автономный атрибут, так как Robocopy неправильно включает его в операциях копирования.
- При копировании файлов с помощью robocopy используйте параметр /MIR, чтобы сохранить метки времени файлов. Таким образом, старые файлы будут перемещены на другой уровень раньше, чем файлы, доступ к которым был получен недавно.

## <a name="agent-version-6300"></a>Агент версия 6.3.0.0
Следующие примечания к выпуску для версии 6.3.0.0 агента Azure File Sync, выпущенного 27 июня 2019 года. Эти заметки являются дополнением к примечаниям к выпуску, перечисленным для версии 6.0.0.0.

Список исправлений в этом выпуске:  
- Доступ или просмотр местоположения конечных точек сервера над SMB происходит медленно на Windows Server 2012 R2 
- Увеличение использования процессора после установки агента Azure File Sync v6
- Улучшения телеметрии облачного уровня

## <a name="agent-version-6200"></a>Агент версия 6.2.0.0
Следующие примечания к выпуску для версии 6.2.0.0 агента Azure File Sync, выпущенного 13 июня 2019 года. Эти заметки являются дополнением к примечаниям к выпуску, перечисленным для версии 6.0.0.0.

Список исправлений в этом выпуске:  
- После создания конечной точки сервера может возникнуть высокое использование процессора при закачке файлов на сервер
- Операции синхронного и облачного уровня могут выйти из строя при ECS_E_SERVER_CREDENTIAL_NEEDED ошибки из-за истечения срока действия маркера
- Отзыв файла может не удается, если URL для загрузки файла содержит зарезервированные символы 

## <a name="agent-version-6100"></a>Агент версия 6.1.0.0
Следующие примечания к выпуску для версии 6.1.0.0 агента Azure File Sync, выпущенного 6 мая 2019 года. Эти заметки являются дополнением к примечаниям к выпуску, перечисленным для версии 6.0.0.0.

Список исправлений в этом выпуске:  
- Центр windows Admin не отображает версию агента и конфигурацию конечных точек сервера на серверах, у которых установлена версия агента Azure File Sync 6.0.

## <a name="agent-version-6000"></a>Агент версия 6.0.0.0
Следующие примечания к выпуску для версии 6.0.0.0 агента Azure File Sync (выпущен 22 апреля 2019 г.).

### <a name="improvements-and-issues-that-are-fixed"></a>Улучшения и решенные проблемы

- Поддержка автоматического обновления агента
  - Мы услышали ваши отзывы и добавили функцию автоматического обновления в серверный агент Azure File Sync. Для получения дополнительной [Azure File Sync agent update policy](https://docs.microsoft.com/azure/storage/files/storage-files-release-notes#azure-file-sync-agent-update-policy)информации см.
- Поддержка совместного совместного размещения файлов Azure
  - Azure File Sync всегда поддерживала синхронизацию ACLs между конечными точками сервера, но ACLs не были синхронизированы с конечной точкой облака (доля файлов Azure). Этот релиз добавляет поддержку синхронизации ACLs между серверными и облачными конечными точками.
- Параллельные сеансы синхронизации загрузки и загрузки для конечной точки сервера 
  - Конечные точки сервера теперь поддерживают загрузку и загрузку файлов одновременно. Больше не ждет загрузки для завершения, чтобы файлы могли быть загружены в раздел файла Azure. 
- Новые смдлеты облачного уровня для получения статуса громкости и многоуровневого уровня
  - Два новых, локального сервера PowerShell cmdlets теперь можно использовать для получения информации об уровне облачности и отзыва файлов. Они делают информацию о регистрации из двух каналов событий на сервере доступной:
    - Get-StorageFileFileTieringResult перечислит все файлы и их пути, которые не многоуровневые, и сообщает о причинах.
    - Get-StorageSyncFileRecallResult сообщает все события отзыва файлов. В нем перечислены все отозванные файлы и его путь, а также успех или ошибка для этого отзыва.
  - По умолчанию оба канала событий могут хранить до 1 МБ каждый – можно увеличить количество файлов, сообщаемых за счет увеличения размера канала событий.
- Поддержка режима FIPS
  - Azure File Sync теперь поддерживает включение режима FIPS на серверах, на которых установлен агент Azure File Sync.
    - Перед включением режима FIPS на сервере установите на сервере агент Azure File Sync и [модуль PackageManagement.](https://www.powershellgallery.com/packages/PackageManagement/1.1.7.2) Если FIPS уже включен на сервере, [вручную загрузите](/powershell/scripting/gallery/how-to/working-with-packages/manual-download) [модуль PackageManagement](https://www.powershellgallery.com/packages/PackageManagement/1.1.7.2) на ваш сервер.
- Различные улучшения надежности для многоуровневого и синхронизации облаков

### <a name="evaluation-tool"></a>Средство оценки
Прежде чем развертывать службу "Синхронизация файлов Azure", следует оценить, совместима ли она с вашей системой, с помощью средства оценки этой службы. Это средство является командлетом Azure PowerShell, который проверяет наличие потенциальных проблем с файловой системой и набором данных, таких как неподдерживаемые символы или неподдерживаемая версия операционной системы. Инструкции по установке и использованию см. в разделе о [средстве оценки](https://docs.microsoft.com/azure/storage/files/storage-sync-files-planning#evaluation-cmdlet) руководства по планированию. 

### <a name="agent-installation-and-server-configuration"></a>Установка агента и конфигурация сервера
Дополнительные сведения о том, как установить и настроить агент службы "Синхронизация файлов Azure" с помощью Windows Server, см. в статье о [планировании развертывания службы "Синхронизация файлов Azure"](storage-sync-files-planning.md) и [практическом руководстве по развертыванию службы "Синхронизация файлов Azure"](storage-sync-files-deployment-guide.md).

- Пакет установки агента нужно устанавливать с разрешениями более высокого уровня (администратора).
- Агент не поддерживается в опции развертывания Nano Server.
- Агент поддерживается только в Windows Server 2019 и Windows Server 2016 и Windows Server 2012 R2.
- Агент требует по крайней мере 2 ГиБ памяти. Если сервер выполняется на виртуальной машине с включенной динамической памятью, в виртуальной машине должна быть настроена память объемом не менее 2048 МиБ.
- Служба агента синхронизации хранилища (FileSyncSvc) не поддерживает конечные точки сервера, которые размещены в томе со сжатым каталогом данных о системном томе (SVI). Использование этой конфигурации может привести к непредвиденным результатам.

### <a name="interoperability"></a>Совместимость
- Антивирусные программы, приложения архивации, а также другие приложения, которые получают доступ к многоуровневым файлам, вызывают нежелательные отзывы, если они не учитывают автономный атрибут и пропускают чтение содержимого этих файлов. Дополнительные сведения см. в статье об [устранении неполадок службы "Синхронизация файлов Azure"](storage-sync-files-troubleshoot.md).
- Фильтры блокировки файлов FSRM могут стать причиной постоянных сбоев синхронизации.
- Запуск sysprep на сервере, где установлен агент службы "Синхронизация файлов Azure", не поддерживается и может привести к непредвиденным результатам. Устанавливать агент Синхронизации файлов Azure нужно после развертывания образа сервера и завершения мини-установки sysprep.

### <a name="sync-limitations"></a>Ограничения синхронизации
Следующие элементы не синхронизируются, но остальная часть системы продолжает работать в обычном режиме:
- Файлы с неподдерживаемыми символами. Со списком неподдерживаемых символов можно ознакомиться в [руководстве по устранению неполадок](storage-sync-files-troubleshoot.md#handling-unsupported-characters).
- Файлы или каталоги, которые оканчиваются точкой.
- Пути длиной более 2048 символов.
- Часть списка управления доступом на уровне пользователей (DACL) в дескрипторе безопасности размером более 2 КБ. (Эта проблема возникает только при наличии более 40 записей контроля доступа (ACE) на одном элементе.)
- Часть системного списка управления доступом (SACL) в дескрипторе безопасности, который используется для аудита.
- Дополнительные атрибуты.
- Альтернативные потоки данных.
- Точки повторного анализа.
- Жесткие связи.
- Сжатие (для серверного файла) не сохраняется при синхронизации изменений в этом файле из других конечных точек.
- Файлы, зашифрованные с помощью файловой системы EFS (или другого пользовательского режима шифрования). Служба не может считывать такие данные.

    > [!Note]  
    > Служба "Синхронизация файлов Azure" всегда шифрует передаваемые данные. Неактивные данные можно зашифровать в Azure.
 
### <a name="server-endpoint"></a>Конечная точка сервера
- Конечную точку сервера можно создавать только на томе NTFS. Сейчас служба "Синхронизация файлов Azure" не поддерживает ReFS и FAT, FAT32 и другие файловые системы.
- Многоуровневые файлы станут недоступными для использования, если их не отозвать перед удалением конечной точки сервера. Чтобы восстановить доступ к файлам, повторно создайте конечную точку сервера. Если с момента удаления конечной точки сервера прошло 30 дней или если была удалена конечная точка облака, многоуровневые файлы, которые не были отозваны, станут непригодными для использования.
- Но для системного тома не поддерживается распределение по уровням облака. Чтобы создать конечную точку сервера на системном томе, отключите распределение по уровням облака при ее создании.
- Отказоустойчивую кластеризацию поддерживают только кластеризованные диски. Общие тома кластера (CSV) ее не поддерживают.
- Конечная точка сервера не может быть вложенной. Она может сосуществовать параллельно с другой конечной точкой на одном томе.
- Не храните файл ОС или файл подкачки приложения в расположении конечной точки сервера.
- В случае переименования сервера его имя на портале не обновляется.

### <a name="cloud-endpoint"></a>Облачная конечная точка
- Служба "Синхронизация файлов Azure" поддерживает внесение изменений непосредственно в файловый ресурс Azure. Однако внесенные изменения сначала должны быть обнаружены заданием обнаружения изменений этой службы. Задание обнаружения изменений инициируется для облачной конечной точки каждые 24 часа. Кроме того, изменения, внесенные в файловый ресурс Azure с помощью протокола REST, не приведут к обновлению времени последнего изменения SMB и не будут распознаны как изменение службой синхронизации.
- Службу синхронизации хранилища и/или учетную запись хранения можно переместить в другую группу ресурсов или подписку в рамках существующего клиента Azure AD. Если учетная запись хранения перемещена, необходимо предоставить службе Hybrid File Sync доступ к учетной записи хранилища (см. в разделе [Убедитесь, что служба "Синхронизация файлов Azure" имеет доступ к учетной записи хранения](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cportal#troubleshoot-rbac)).

    > [!Note]  
    > Служба "Синхронизация файлов Azure" не поддерживает перемещение подписки в другой клиент Azure AD.

### <a name="cloud-tiering"></a>Распределение по уровням облака
- Если многоуровневый файл копируется в другое расположение с помощью Robocopy, полученный файл не будет распределен по уровням. Вы можете задать автономный атрибут, так как Robocopy неправильно включает его в операциях копирования.
- При копировании файлов с помощью robocopy используйте параметр /MIR, чтобы сохранить метки времени файлов. Таким образом, старые файлы будут перемещены на другой уровень раньше, чем файлы, доступ к которым был получен недавно.
- При просмотре свойств файла из клиента SMB автономный атрибут может быть настроен неправильно из-за кэширования метаданных файла по протоколу SMB.

## <a name="agent-version-5200"></a>Агент версия 5.2.0.0
Следующие примечания к выпуску для версии 5.2.0.0 агента Azure File Sync, выпущенного 4 апреля 2019 года. Эти заметки являются дополнением к примечаниям к выпуску, перечисленным для версии 5.0.2.0.

Список исправлений в этом выпуске:  
- Улучшения надежности для автономных функций передачи данных и передачи данных
- Улучшения телеметрии синхронизации

## <a name="agent-version-5100"></a>Агент версия 5.1.0.0
Следующие примечания к выпуску для версии 5.1.0.0 агента Azure File Sync, выпущенного 7 марта 2019 года. Эти заметки являются дополнением к примечаниям к выпуску, перечисленным для версии 5.0.2.0.

Список исправлений в этом выпуске:  
- Файлы могут не синхронизироваться с ошибкой 0x80c8031d (ECS_E_CONCURRENCY_CHECK_FAILED), если перечисление изменений не удается на сервере
- Если сеанс синхронизации или файл получает ошибку 0x80072f78 (WININET_E_INVALID_SERVER_RESPONSE), синхронизация теперь повторно пытается операцию
- Файлы могут не синхронизироваться с ошибкой 0x80c80203 (ECS_E_SYNC_INVALID_STAGED_FILE)
- Высокое использование памяти может возникнуть при отзыве файлов
- Улучшения телеметрии облачного уровня 

## <a name="agent-version-5020"></a>Версия агента 5.0.2.0
Следующие заметки о выпуске предназначены для версии агента службы "Синхронизация файлов Azure" 5.0.2.0 (выпущенной 12 февраля 2019 г).

### <a name="improvements-and-issues-that-are-fixed"></a>Улучшения и решенные проблемы

- Поддержка облака Azure для государственных организаций
  - Добавлена поддержка предварительной версии облака Azure для государственных организаций. Для работы с ней требуется разрешенная подписка и специальный агент, скачать который можно с веб-сайта Майкрософт. Чтобы получить доступ к предварительному просмотру, пожалуйста, напишите нам непосредственно на [AzureFiles@microsoft.com](mailto:AzureFiles@microsoft.com).
- Поддержка дедупликации данных
    - Дедупликация данных теперь полностью поддерживается с включенным распределением по уровням в облаке в Windows Server 2016 и Windows Server 2019. Включив дедупликацию в томе с включенным распределением по уровням в облаке, вы можете кэшировать больше файлов локально без выделения дополнительного объема памяти.
- Поддержка передачи данных в автономном режиме (например, с помощью Data Box)
    - Без труда переносите большие объемы данных в службу "Синхронизация файлов" любым удобным способом. Вы можете выбрать Коробку данных Azure, AzCopy и даже сторонние миграционные службы. Для получения данных в Azure не требуется высокая пропускная способность — с помощью Data Box достаточно отправить данные по почте. См. дополнительные сведения в статье по [автономной передаче данных](https://aka.ms/AFS/OfflineDataTransfer).
- Повышена скорость синхронизации
    - В версиях, предшествующих этому выпуску, синхронизация для клиентов с несколькими конечными точками сервера в одном и том же томе может выполняться с задержками. Служба "Синхронизация файлов Azure" раз в день создает на сервере временный моментальный снимок VSS для синхронизации файлов с открытыми дескрипторами. Теперь синхронизация нескольких конечных точек в одном и том же томе поддерживается во время активного сеанса синхронизации VSS. Вам больше не нужно ждать завершения сеанса синхронизации VSS, чтобы возобновить синхронизацию на других конечных точках сервера в томе.
- Улучшен мониторинг на портале
    - Теперь на портале службы синхронизации хранилища можно просматривать диаграммы по следующим показателям:
        - количество синхронизированных файлов;
        - размер переданных данных;
        - количество несинхронизированных файлов;
        - размер отозванных данных;
        - состояние подключения к серверу.
    - См. дополнительные сведения в статье [Мониторинг Синхронизации файлов Azure](https://docs.microsoft.com/azure/storage/files/storage-sync-files-monitoring).
- Улучшена масштабируемость и надежность
    - Максимальное число объектов файловой системы (папок и файлов) в каталоге увеличено до 1 000 000. Ранее максимальное количество ограничивалось 200 000.
    - При прерывании передачи больших файлов служба синхронизации попытается возобновить передачу данных вместо их повторной отправки. 

### <a name="evaluation-tool"></a>Средство оценки
Прежде чем развертывать службу "Синхронизация файлов Azure", следует оценить, совместима ли она с вашей системой, с помощью средства оценки этой службы. Это средство является командлетом Azure PowerShell, который проверяет наличие потенциальных проблем с файловой системой и набором данных, таких как неподдерживаемые символы или неподдерживаемая версия операционной системы. Инструкции по установке и использованию см. в разделе о [средстве оценки](https://docs.microsoft.com/azure/storage/files/storage-sync-files-planning#evaluation-cmdlet) руководства по планированию. 

### <a name="agent-installation-and-server-configuration"></a>Установка агента и конфигурация сервера
Дополнительные сведения о том, как установить и настроить агент службы "Синхронизация файлов Azure" с помощью Windows Server, см. в статье о [планировании развертывания службы "Синхронизация файлов Azure"](storage-sync-files-planning.md) и [практическом руководстве по развертыванию службы "Синхронизация файлов Azure"](storage-sync-files-deployment-guide.md).

- Пакет установки агента нужно устанавливать с разрешениями более высокого уровня (администратора).
- Агент не поддерживается в развертываниях Windows Server Core или Nano Server.
- Агент поддерживается только в Windows Server 2019 и Windows Server 2016 и Windows Server 2012 R2.
- Агент требует по крайней мере 2 ГиБ памяти. Если сервер выполняется на виртуальной машине с включенной динамической памятью, в виртуальной машине должна быть настроена память объемом не менее 2048 МиБ.
- Служба агента синхронизации хранилища (FileSyncSvc) не поддерживает конечные точки сервера, которые размещены в томе со сжатым каталогом данных о системном томе (SVI). Использование этой конфигурации может привести к непредвиденным результатам.
- Режим FIPS не поддерживается и должен быть отключен. 

### <a name="interoperability"></a>Совместимость
- Антивирусные программы, приложения архивации, а также другие приложения, которые получают доступ к многоуровневым файлам, вызывают нежелательные отзывы, если они не учитывают автономный атрибут и пропускают чтение содержимого этих файлов. Дополнительные сведения см. в статье об [устранении неполадок службы "Синхронизация файлов Azure"](storage-sync-files-troubleshoot.md).
- Фильтры блокировки файлов FSRM могут стать причиной постоянных сбоев синхронизации.
- Запуск sysprep на сервере, где установлен агент службы "Синхронизация файлов Azure", не поддерживается и может привести к непредвиденным результатам. Устанавливать агент Синхронизации файлов Azure нужно после развертывания образа сервера и завершения мини-установки sysprep.

### <a name="sync-limitations"></a>Ограничения синхронизации
Следующие элементы не синхронизируются, но остальная часть системы продолжает работать в обычном режиме:
- Файлы с неподдерживаемыми символами. Со списком неподдерживаемых символов можно ознакомиться в [руководстве по устранению неполадок](storage-sync-files-troubleshoot.md#handling-unsupported-characters).
- Файлы или каталоги, которые оканчиваются точкой.
- Пути длиной более 2048 символов.
- Часть списка управления доступом на уровне пользователей (DACL) в дескрипторе безопасности размером более 2 КБ. (Эта проблема возникает только при наличии более 40 записей контроля доступа (ACE) на одном элементе.)
- Часть системного списка управления доступом (SACL) в дескрипторе безопасности, который используется для аудита.
- Дополнительные атрибуты.
- Альтернативные потоки данных.
- Точки повторного анализа.
- Жесткие связи.
- Сжатие (для серверного файла) не сохраняется при синхронизации изменений в этом файле из других конечных точек.
- Файлы, зашифрованные с помощью файловой системы EFS (или другого пользовательского режима шифрования). Служба не может считывать такие данные.

    > [!Note]  
    > Служба "Синхронизация файлов Azure" всегда шифрует передаваемые данные. Неактивные данные можно зашифровать в Azure.
 
### <a name="server-endpoint"></a>Конечная точка сервера
- Конечную точку сервера можно создавать только на томе NTFS. Сейчас служба "Синхронизация файлов Azure" не поддерживает ReFS и FAT, FAT32 и другие файловые системы.
- Многоуровневые файлы станут недоступными для использования, если их не отозвать перед удалением конечной точки сервера. Чтобы восстановить доступ к файлам, повторно создайте конечную точку сервера. Если с момента удаления конечной точки сервера прошло 30 дней или если была удалена конечная точка облака, многоуровневые файлы, которые не были отозваны, станут непригодными для использования.
- Но для системного тома не поддерживается распределение по уровням облака. Чтобы создать конечную точку сервера на системном томе, отключите распределение по уровням облака при ее создании.
- Отказоустойчивую кластеризацию поддерживают только кластеризованные диски. Общие тома кластера (CSV) ее не поддерживают.
- Конечная точка сервера не может быть вложенной. Она может сосуществовать параллельно с другой конечной точкой на одном томе.
- Не храните файл ОС или файл подкачки приложения в расположении конечной точки сервера.
- В случае переименования сервера его имя на портале не обновляется.

### <a name="cloud-endpoint"></a>Облачная конечная точка
- Служба "Синхронизация файлов Azure" поддерживает внесение изменений непосредственно в файловый ресурс Azure. Однако внесенные изменения сначала должны быть обнаружены заданием обнаружения изменений этой службы. Задание обнаружения изменений инициируется для облачной конечной точки каждые 24 часа. Кроме того, изменения, внесенные в файловый ресурс Azure с помощью протокола REST, не приведут к обновлению времени последнего изменения SMB и не будут распознаны как изменение службой синхронизации.
- Службу синхронизации хранилища и/или учетную запись хранения можно переместить в другую группу ресурсов или подписку в рамках существующего клиента Azure AD. Если учетная запись хранения перемещена, необходимо предоставить службе Hybrid File Sync доступ к учетной записи хранилища (см. в разделе [Убедитесь, что служба "Синхронизация файлов Azure" имеет доступ к учетной записи хранения](https://docs.microsoft.com/azure/storage/files/storage-sync-files-troubleshoot?tabs=portal1%2Cportal#troubleshoot-rbac)).

    > [!Note]  
    > Служба "Синхронизация файлов Azure" не поддерживает перемещение подписки в другой клиент Azure AD.

### <a name="cloud-tiering"></a>Распределение по уровням облака
- Если многоуровневый файл копируется в другое расположение с помощью Robocopy, полученный файл не будет распределен по уровням. Вы можете задать автономный атрибут, так как Robocopy неправильно включает его в операциях копирования.
- При копировании файлов с помощью robocopy используйте параметр /MIR, чтобы сохранить метки времени файлов. Таким образом, старые файлы будут перемещены на другой уровень раньше, чем файлы, доступ к которым был получен недавно.
- При просмотре свойств файла из клиента SMB автономный атрибут может быть настроен неправильно из-за кэширования метаданных файла по протоколу SMB.
