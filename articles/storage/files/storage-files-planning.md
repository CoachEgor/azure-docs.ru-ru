---
title: Планирование развертывания службы файлов Azure | Документы Майкрософт
description: Узнайте, что необходимо учесть при планировании развертывания службы файлов Azure.
author: roygara
ms.service: storage
ms.topic: conceptual
ms.date: 04/25/2019
ms.author: rogarana
ms.subservice: files
ms.openlocfilehash: 4dfcde96957bb8fce3731e38eee62554795d795f
ms.sourcegitcommit: adc1072b3858b84b2d6e4b639ee803b1dda5336a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2019
ms.locfileid: "70844890"
---
# <a name="planning-for-an-azure-files-deployment"></a>Планирование развертывания службы файлов Azure

[Служба файлов Azure](storage-files-introduction.md) предлагает полностью управляемые общие файловые ресурсы в облаке, доступ к которым можно получить с помощью стандартного отраслевого протокола SMB. Так как служба файлов Azure является полностью управляемой, ее развертывание в рабочих сценариях гораздо проще развертывания файлового сервера или устройства NAS и управления им. В этой статье рассматриваются аспекты, которые следует учитывать при развертывании файлового ресурса Azure для использования в рабочей среде организации.

## <a name="management-concepts"></a>Основные принципы управления

 На схеме ниже показаны компоненты управления службой файлов Azure.

![Структура файла](./media/storage-files-introduction/files-concepts.png)

* **Учетная запись хранения**. Весь доступ к хранилищу Azure осуществляется с помощью учетной записи хранения. Сведения о емкости учетной записи хранения см. в статье [о целевых показателях масштабируемости и производительности службы хранилища Azure](../common/storage-scalability-targets.md?toc=%2fazure%2fstorage%2ffiles%2ftoc.json).

* **Общая папка**. Общая папка хранилища файлов представляет собой общую папку с файлами в Azure, использующую протокол SMB. Все каталоги и файлы должны быть созданы в родительской общей папке. Учетная запись может содержать неограниченное количество общих папок, а общий ресурс может хранить неограниченное количество файлов, вплоть до общей емкости общей папки. Для стандартных файловых ресурсов Общая емкость составляет до 5 Тиб (общедоступной версии) или 100 Тиб (Предварительная версия) для файловых ресурсов уровня "Премиум". Общая емкость составляет до 100 тиб.

* **Каталог**. Необязательная иерархия каталогов.

* **Файл**. Файл в общей папке. Файлы могут иметь размер до 1 ТБ.

* **Формат URL-адреса**. В запросах к общей папке Azure, выполненных с помощью протокола REST службы файлов, к файлам можно обращаться, используя URL-адрес в следующем формате:

    ```
    https://<storage account>.file.core.windows.net/<share>/<directory>/<file>
    ```

## <a name="data-access-method"></a>Метод доступа к данным

Служба файлов Azure предлагает два встроенных удобных метода доступа к данным, которые можно использовать по отдельности или в сочетании друг с другом.

1. **Прямой доступ к облаку**. Общую папку Azure можно вставить в ОС [Windows](storage-how-to-use-files-windows.md), [macOS](storage-how-to-use-files-mac.md) или [Linux](storage-how-to-use-files-linux.md) с помощью протокола SMB или REST API службы файлов. При использовании SMB операции чтения и записи выполняются непосредственно в файловом ресурсе в Azure. Для подключения к виртуальной машине в Azure клиент SMB в операционной системе должен поддерживать по меньшей мере протокол SMB 2.1. Для локального подключения, например к рабочей станции пользователя, клиент SMB на рабочей станции должен поддерживать по меньшей мере протокол SMB 3.0 (с шифрованием). Кроме SMB, новые приложения или службы могут напрямую обращаться к файловому ресурсу посредством File REST, который является простым и масштабируемым API-интерфейсом для разработки программного обеспечения.
2. **Синхронизация файлов Azure** С помощью службы "Синхронизация файлов Azure" можно реплицировать файловые ресурсы на локальные серверы Windows Server или в Azure. Ваши пользователи могут получить доступ к файловому ресурсу через Windows Server, например через общий ресурс SMB или NFS. Это полезно в сценариях, когда доступ к данным и их изменения выполняются далеко за пределами центров обработки данных Azure, например как в сценарии с филиалом. Данные можно реплицировать между несколькими конечными точками Windows Server, например между несколькими филиалами. Наконец, данные могут быть размещены на нескольких уровнях в службе файлов Azure так, что они по-прежнему будут доступны через сервер, однако на сервере отсутствует полная копия данных. Данные можно легко извлечь при открытии пользователем.

В следующей таблице показано, как пользователи и приложения могут обращаться к файловому ресурсу Azure.

| | Прямой доступ к облаку | Служба синхронизации файлов Azure |
|------------------------|------------|-----------------|
| Какие протоколы необходимо использовать? | Служба файлов Azure поддерживает SMB 2.1, SMB 3.0 и File REST API. | Доступ к файловому ресурсу Azure с помощью любого поддерживаемого протокола в Windows Server (SMB, NFS, FTPS и т. д.) |  
| Где выполняется рабочая нагрузка? | **В Azure**. Служба "Файлы Azure" обеспечивает прямой доступ к данным. | **В локальной среде с медленным сетевым подключением**: клиенты Windows, Linux и macOS могут подключить локальную общую папку службы файлов Windows в качестве быстрого кэша общей папки Azure. |
| Какой уровень списков ACL требуется? | Уровень общего доступа и уровень файла. | Уровень общего доступа, уровень файла и уровень пользователя. |

## <a name="data-security"></a>Безопасность данных

Служба файлов Azure предлагает несколько встроенных возможностей для обеспечения безопасности данных.

* Поддержка шифрования для протоколов сетевой передачи: шифрование SMB 3.0 и REST службы файлов по HTTPS. По умолчанию: 
    * Клиенты, поддерживающие шифрование SMB 3,0, отправляют и получают данные по зашифрованному каналу.
    * Клиенты, не поддерживающие SMB 3,0 с шифрованием, могут взаимодействовать с внутренней системой обработки данных через SMB 2,1 или SMB 3,0 без шифрования. Клиенты SMB не могут взаимодействовать между ЦОД по протоколам SMB 2.1 или SMB 3.0 без шифрования.
    * Клиенты могут взаимодействовать через File REST по протоколу HTTP или HTTPS.
* Шифрование неактивных данных ([Технология шифрования службы хранилища Azure](../common/storage-service-encryption.md?toc=%2fazure%2fstorage%2ffiles%2ftoc.json)). Шифрование службы хранилища (SSE) включено для всех учетных записей хранения. Неактивные данные шифруются с помощью полностью управляемых ключей. Шифрование неактивных данных не увеличивает затраты на хранение и не снижает производительность. 
* Необязательное требование зашифрованных данных при передаче. Если выбран этот параметр, служба файлов Azure отклоняет доступ к данным через незашифрованные каналы. В частности, будут разрешены только подключения по протоколам HTTPS и SMB 3.0 с шифрованием.

    > [!Important]  
    > Необходимость безопасной передачи данных приведет к сбою старых клиентов SMB, не поддерживающих взаимодействие с SMB 3.0 с шифрованием. Дополнительные сведения см. в статьях [Использование общей папки Azure в Windows](storage-how-to-use-files-windows.md), [Использование файлов Azure в Linux](storage-how-to-use-files-linux.md), [Подключение общей папки Azure через протокол SMB в macOS](storage-how-to-use-files-mac.md).

Для обеспечения максимальной безопасности настоятельно рекомендуется всегда включать шифрование данных при хранении и шифрование данных во время передачи при каждом использовании современных клиентов для доступа к данным. Например, если необходимо подключить общую папку в виртуальной машине с Windows Server 2008 R2, которая поддерживает только SMB 2.1, необходимо разрешить передачу незашифрованного трафика в хранилище, так как SMB 2.1 не поддерживает шифрование.

Если для доступа к файловому ресурсу Azure вы используете службу "Синхронизация файлов Azure", для синхронизации данных с серверами Windows Server всегда будут использоваться протоколы HTTPS и SMB 3.0 с шифрованием (независимо от того, нужно ли вам шифровать неактивные данные).

## <a name="file-share-performance-tiers"></a>Уровни производительности файлового ресурса

Служба файлов Azure предлагает два уровня производительности: "Стандартный" и "Премиум".

### <a name="standard-file-shares"></a>Общие файлы уровня "Стандарт"

Стандартные общие файловые ресурсы поддерживаются жесткими дисками (HDD). Стандартные общие файловые ресурсы обеспечивают надежную производительность для рабочих нагрузок ввода-вывода, которые менее чувствительны к вариативности производительности, например общие файловые ресурсы общего назначения и среды разработки и тестирования. Файловые ресурсы уровня "Стандартный" доступны только в модели выставления счетов с оплатой по мере использования.

Стандартные файловые ресурсы размером до 5 Тиб доступны в общедоступном виде. Хотя большие файловые ресурсы, которые имеют любые общие папки размером более 5 Тиб, в настоящее время доступны в виде предварительной версии до 100 тиб.

> [!IMPORTANT]
> Инструкции по подключению, а также область и ограничения предварительной версии см. в разделе подключение [к большим файловым ресурсам (уровень Standard)](#onboard-to-larger-file-shares-standard-tier) .

### <a name="premium-file-shares"></a>Общие файловые ресурсы уровня "Премиум"

Файловые ресурсы уровня "Премиум" поддерживаются твердотельными накопителями (SSD). Файловые ресурсы уровня "Премиум" обеспечивают постоянную высокую производительность и низкую задержку для большинства операций ввода-вывода в миллисекундах для рабочих нагрузок с интенсивным ВВОДом-выводом. Это делает их пригодными для самых разнообразных рабочих нагрузок, таких как базы данных, размещение веб-сайтов и среды разработки. Файловые ресурсы уровня "Премиум" доступны только в подготовленной модели выставления счетов. Файловые ресурсы уровня "Премиум" используют модель развертывания отдельно от стандартных файловых ресурсов.

Azure Backup доступен для файловых ресурсов уровня "Премиум", а служба Azure Kubernetes поддерживает общие файловые ресурсы уровня "Премиум" в версии 1,13 и более поздних.

Если вы хотите узнать, как создать файловый ресурс уровня "Премиум", см. нашу статью по теме: [Как создать учетную запись хранилища файлов Azure класса Premium](storage-how-to-create-premium-fileshare.md).

В настоящее время невозможно напрямую выполнить преобразование между стандартным общим файловым ресурсом и общим файловым ресурсом уровня "Премиум". Если вы хотите переключиться на любой из уровней, необходимо создать новый файловый ресурс на этом уровне и вручную скопировать данные из исходной папки в созданную вами общую папку. Это можно сделать с помощью любого из поддерживаемых в службе файлов Azure средств копирования, таких как Robocopy или AzCopy.

> [!IMPORTANT]
> Общие файловые ресурсы уровня "Премиум" доступны только в LRS и доступны в большинстве регионов, предлагающих учетные записи хранения. Чтобы узнать, доступны ли в вашем регионе общедоступные файловые ресурсы уровня "Премиум", см. страницу [доступность продуктов по регионам](https://azure.microsoft.com/global-infrastructure/services/?products=storage) для Azure.

#### <a name="provisioned-shares"></a>Подготовленные ресурсы

Файловые ресурсы уровня "Премиум" предоставляются на основе зафиксированной пропорции ГиБ/операции ввода-вывода в секунду/пропускная способность. Для каждого подготовленного ГиБ ресурс будет выдаваться на одну пропускную способность операций ввода-вывода в секунду и 0,1 МиБ/с пропускной способности в условиях максимальной нагрузки на ресурс. Минимально допустимый уровень подготовки составляет 100 ГиБ с минимальным числом операций ввода-вывода в секунду и пропускной способностью.

Наилучшим возможным образом все ресурсы могут ограничиваться до трех операций ввода-вывода в секунду на ГиБ подготовленного хранилища в течение 60 минут или дольше в зависимости от размера ресурса. Новые ресурсы начинаются с полного пакетного кредита на основе подготовленной мощности.

Общие ресурсы должны быть подготовлены с шагом в 1 гиб. Минимальный размер — 100 гиб, следующий размер — 101 гиб и т. д.

> [!TIP]
> Базовые операции ввода-вывода в секунду = 1 * подготовленные гиб. (Максимум 100 000 операций ввода-вывода в секунду).
>
> Ограничение количества пакетов = 3 * базовые операции ввода-вывода. (Максимум 100 000 операций ввода-вывода в секунду).
>
> скорость исходящего трафика = 60 MiB/s + 0,06 * подготовлена гиб
>
> скорость входящих данных = 40 MiB/s + 0,04 * подготовленная гиб

Подготовленный размер общего ресурса указывается квотой общего ресурса. Квоту общего доступа можно увеличить в любое время, но ее можно уменьшить только через 24 часа с момента последнего увеличения. По истечении 24 часов без увеличения квоты общий ресурс можно уменьшить столько раз, сколько вы хотите, пока вы не увеличите его снова. Изменения масштаба операций ввода-вывода и пропускной способности вступят в силу в течение нескольких минут после изменения размера.

Можно уменьшить размер подготовленного общего ресурса под используемой гиб. В этом случае данные не будут потеряны, но по-прежнему будет взиматься плата за используемый размер, а также производительность (базовые операции ввода-вывода, пропускная способность и число операций в секунду) подготовленной общей папки, а не используемый размер.

В следующей таблице приведено несколько примеров этих формул для подготовленных размеров общих ресурсов.

|Емкость (гиб) | Базовые показатели операций ввода-вывода в секунду | Ускоренные операции ввода-вывода | Исходящий трафик (MiB/s) | Входящий трафик (MiB/с) |
|---------|---------|---------|---------|---------|
|100         | 100     | 300     | 66   | 44   |
|500         | 500     | До 1 500   | 90   | 60   |
|1024       | 1024   | До 3 072   | 122   | 81   |
|5,120       | 5,120   | До 15 360  | 368   | 245   |
|10 240      | 10 240  | До 30 720  | 675 | 450   |
|33 792      | 33 792  | До 100 000 | 2 088 | 1 392   |
|51 200      | 51 200  | До 100 000 | 3132 | 2 088   |
|102 400     | 100 000 | До 100 000 | 6 204 | 4 136   |

> [!NOTE]
> Производительность общих файловых ресурсов зависит от ограничений сети компьютера, доступной пропускной способности сети, размера операций ввода-вывода, параллелизма и многих других факторов. Для достижения максимального масштаба производительности Распределите нагрузку между несколькими виртуальными машинами. Ознакомьтесь с [руководством по устранению неполадок](storage-troubleshooting-files-performance.md) для некоторых распространенных проблем с производительностью и способов их обхода.

#### <a name="bursting"></a>Bursting

Общие файловые ресурсы уровня "Премиум" могут выполнять свои операции ввода-вывода в течение трех факторов. Пакетная работа автоматизирована и работает на основе кредитной системы. Пакетная работа работает с максимальной производительностью, а ограничение на количество пакетов не гарантирует, что файловые ресурсы могут занимать ограничение.

Кредиты накапливаются в сегменте нагрузки, когда трафик для общей папки находится ниже базовых показателей операций ввода-вывода. Например, в общей папке 100 гиб есть 100 базовых операций ввода-вывода. Если фактический трафик в общей папке был 40 операций ввода-вывода в секунду в течение определенного интервала, то неиспользуемые операции ввода-вывода 60 кредитуются в сегмент нагрузки. Эти кредиты будут использоваться позже, когда операции будут превысить базовые числа операций ввода-вывода.

> [!TIP]
> Размер блока пакета = базовые операции ввода-вывода * 2 * 3600.

Каждый раз, когда общий ресурс превышает базовые операции ввода-вывода и имеет кредиты в сегменте нагрузки, он будет заполняться. Общие ресурсы могут продолжать занимать до тех пор, пока не останется кредитов, хотя общие ресурсы размером менее 50 Тиб будут находиться в пределах до одного часа. Размер общих ресурсов, превышающих 50 Тиб, может превышать это ограничение в час, не более двух часов, в зависимости от количества начисленных кредитов. Каждый ввод-вывод, превышающий базовые операции ввода-вывода, потребляет один кредит, а после того, как все кредиты потребляются, Общая папка вернется к базовым операциям

Общие кредиты имеют три состояния:

- Начисление, если общая папка использует меньше базовых операций ввода-вывода.
- Отклонение, если общая папка является пакетной.
- Оставшаяся константа, если не используются кредиты или базовые операции ввода-вывода.

Новые общие файловые ресурсы начинаются с полного количества кредитов в его сегменте нагрузки. Разбивка на пакеты не будет начисляться, если в течение операций ввода-вывода в секунду с помощью сервера выполняется регулирование общей нагрузки.

## <a name="file-share-redundancy"></a>Избыточность файловых ресурсов

Службы файлов Azure Standard shares поддерживают четыре варианта избыточности данных: локально избыточное хранилище (LRS), хранилище, избыточное в виде зоны (ZRS), геоизбыточное хранилище (GRS) и хранилище, избыточное в геопоясе (ГЗРС) (Предварительная версия).

Файловые ресурсы Azure уровня "Премиум" поддерживают только локально избыточное хранилище (LRS).

В следующих разделах описаны различия между разными вариантами обеспечения избыточности.

### <a name="locally-redundant-storage"></a>Локально избыточное хранилище

[!INCLUDE [storage-common-redundancy-LRS](../../../includes/storage-common-redundancy-LRS.md)]

### <a name="zone-redundant-storage"></a>Хранилище, избыточное в пределах зоны

[!INCLUDE [storage-common-redundancy-ZRS](../../../includes/storage-common-redundancy-ZRS.md)]

### <a name="geo-redundant-storage"></a>Геоизбыточное хранилище

> [!Warning]  
> Если вы используете общую папку Azure в качестве конечной точки облака в учетной записи хранения GRS, нет необходимости выполнять отработку отказа учетной записи хранения. Это приведет к прекращению синхронизации или даже к непредвиденной потере данных, если некоторые файлы недавно стали многоуровневыми. В случае потери региона Azure корпорация Майкрософт активирует отработку отказа учетной записи хранения способом, который совместим со службой "Синхронизация файлов Azure".

Геоизбыточное хранилище (GRS) предназначено для обеспечения устойчивости объектов на уровне 99,99999999999999 % (16 девяток) в течение определенного года за счет репликации данных в дополнительный регион, который находится в сотнях километров от основного региона. Если в учетной записи хранения включена репликация GRS, данные будут устойчивы даже в случае отключения электричества во всем регионе или аварии, при которой первичный регион не может быть восстановлен.

Если вы хотите использовать геоизбыточное хранилище с доступом на чтение (RA-GRS), следует убедиться, что файл Azure не поддерживает геоизбыточное хранилище с доступом на чтение (RA-GRS) в любом регионе в настоящее время. Общие файловые ресурсы в учетной записи хранения RA-GRS работают так же, как и в учетных записях GRS, и плата за GRS цены.

GRS реплицирует данные в другой центр обработки данных в дополнительном регионе, но эти данные будут доступны для чтения, только если корпорация Майкрософт инициирует отработку отказа из основного региона в дополнительный.

Для учетной записи хранения с включенной GRS все данные сначала реплицируются с локально избыточным хранилищем (LRS). Обновление сначала фиксируется в основное расположение и реплицируется с использованием локально избыточного хранилища. Затем обновление реплицируется асинхронно в дополнительный регион, используя геоизбыточное хранилище. При записи данных в дополнительное расположение они также реплицируются в этом расположении с использованием LRS.

Основной и дополнительный регионы управляют репликами в отдельных доменах сбоя и доменах обновления в рамках единицы масштабирования хранилища. Единица масштабирования хранилища — это основная единица репликации в центре обработки данных. Репликация на этом уровне предоставляется LRS; Дополнительные сведения см. в [разделе локально избыточное хранилище (LRS): недорогое средство, чтобы обеспечить избыточность данных для службы хранилища Azure](../common/storage-redundancy-lrs.md).

При выборе варианта репликации учитывайте следующие моменты.

* Хранилище, избыточное в геопоясе (ГЗРС) (Предварительная версия) обеспечивает высокий уровень доступности вместе с максимальной устойчивостью путем синхронной репликации данных в трех зонах доступности Azure, а затем асинхронной репликации данных в дополнительный регион. Также можно включить доступ на чтение к дополнительному региону. ГЗРС предназначен для предоставления минимума 99,99999999999999% (16) устойчивости объектов в течение заданного года. Дополнительные сведения о ГЗРС см. в статье [хранилище, избыточное в геопоясе, для обеспечения высокой доступности и максимальной устойчивости (Предварительная версия)](../common/storage-redundancy-gzrs.md).
* Хранилище, избыточное в виде зоны (ZRS), обеспечивает высокую доступность с помощью синхронной репликации и может быть лучшим выбором для некоторых сценариев, чем GRS. Дополнительные сведения о ZRS см. [здесь](../common/storage-redundancy-zrs.md).
* Асинхронная репликация включает в себя задержку между временем записи данных в основном регионе и временем, когда данные реплицируются в дополнительный регион. В случае региональной аварии изменения, которые еще не реплицированные в дополнительный регион, могут быть потеряны, если данные будет невозможно восстановить из основного региона.
* С геоизбыточным хранилищем реплика будет недоступна для чтения или записи, пока корпорация Майкрософт не инициирует отработку отказа в дополнительном регионе. В случае отработки отказа, доступ на чтение и запись будет получен после ее завершения. Дополнительные сведения см. в статье [Что делать в случае простоя службы хранилища Azure](../common/storage-disaster-recovery-guidance.md).

## <a name="onboard-to-larger-file-shares-standard-tier"></a>Подключение к большим файловым ресурсам (уровень Standard)

Этот раздел относится только к стандартным общим файловым ресурсам. Все общие файловые ресурсы уровня "Премиум" доступны с 100 Тиб в качестве общедоступного предложения.

### <a name="restrictions"></a>Ограничения

- [Условия](https://azure.microsoft.com/support/legal/preview-supplemental-terms/) предварительной версии Azure применяются к большим файловым ресурсам в предварительной версии, включая при использовании с развертываниями синхронизация файлов Azure.
- Требует создания новой учетной записи хранения общего назначения (не может расширить существующие учетные записи хранения).
- Преобразование учетной записи LRS/ZRS в GRS/ГЗРС будет невозможно в любой новой учетной записи хранения, созданной после того, как подписка будет принята к просмотру общих файловых ресурсов.


### <a name="regional-availability"></a>Доступность в регионах

Стандартные общие файловые ресурсы доступны во всех регионах до 5 тиб. В некоторых регионах он доступен с ограничением в 100 Тиб, эти регионы перечислены в следующей таблице.

|Район |Поддерживаемая избыточность |Поддержка существующих учетных записей хранения |Поддержка портала * |
|-------|---------|---------|---------|
|Восточная Австралия |LRS     |Нет    |Да|
|Юго-восточная Австралия|LRS     |Нет    |Пока нет|
|Центральная Индия  |LRS     |Нет    |Пока нет|
|Центральная Франция |LRS, ZRS|Нет    |LRS-Да, ZRS — еще не|
|Южная Франция   |LRS     |Нет    |Да|
|Южная Индия    |LRS     |Нет    |Пока нет|
|Юго-Восточная Азия |LRS, ZRS|Нет    |Да|
|Центрально-западная часть США|LRS     |Нет    |Пока нет|
|Западная Европа    |LRS, ZRS|Нет    |Да|
|Западная часть США 2      |LRS, ZRS|Нет    |Да|

\* Для регионов без поддержки портала вы по-прежнему можете использовать PowerShell или интерфейс командной строки Azure (CLI), чтобы создать более 5 общих ресурсов тиб. Кроме того, можно создать новый общий ресурс через портал без указания квоты. При этом будет создан общий ресурс с размером по умолчанию 100 Тиб, который можно обновить позже с помощью PowerShell или Azure CLI.

Чтобы помочь нам определить приоритеты для новых регионов и функций, заполните этот [опрос](https://aka.ms/azurefilesatscalesurvey).

### <a name="steps-to-onboard"></a>Действия по подключению

Чтобы зарегистрировать подписку в более крупной предварительной версии общих файловых ресурсов, необходимо использовать Azure PowerShell. Можно либо использовать [Azure Cloud Shell](https://shell.azure.com/) , либо установить [модуль Azure PowerShell локально](https://docs.microsoft.com/powershell/azure/install-Az-ps?view=azps-2.4.0) , чтобы выполнить следующие команды PowerShell:

Сначала убедитесь, что выбрана подписка, которую вы хотите зарегистрировать в предварительной версии:

```powershell
$context = Get-AzSubscription -SubscriptionId ...
Set-AzContext $context
```

Затем зарегистрируйтесь в предварительной версии с помощью следующих команд:

```powershell
Register-AzProviderFeature -FeatureName AllowLargeFileShares -ProviderNamespace Microsoft.Storage
Register-AzResourceProvider -ProviderNamespace Microsoft.Storage
```
Подписка автоматически утверждается после выполнения обеих команд.

Чтобы проверить состояние регистрации, можно выполнить следующую команду:

```powershell
Get-AzProviderFeature -FeatureName AllowLargeFileShares -ProviderNamespace Microsoft.Storage
```

Обновление состояния до **регистрации**может занять до 15 минут. После **регистрации**состояния вы сможете использовать эту функцию.

### <a name="use-larger-file-shares"></a>Использовать большие файловые ресурсы

Чтобы начать использовать общие файловые ресурсы, создайте новую учетную запись хранения общего назначения версии 2 и новую общую папку.

## <a name="data-growth-pattern"></a>Модель роста данных

Сейчас максимальный размер файлового ресурса Azure составляет 5 Тиб (100 Тиб в предварительной версии). Из-за этого ограничения при развертывании файлового ресурса Azure следует учитывать ожидаемый рост объема данных.

Служба "Синхронизация файлов Azure" позволяет синхронизировать несколько файловых ресурсов Azure с одним файловым сервером Windows. В этом случае старые и очень большие файловые ресурсы, размещенные в локальных средах, можно ввести под контроль службы синхронизации файлов Azure. Дополнительные сведения см. в статье [Планирование развертывания службы файлов Azure](storage-files-planning.md).

## <a name="data-transfer-method"></a>Метод передачи данных

Существует множество простых вариантов массовой передачи данных из существующего файлового ресурса, такого как файловый ресурс в локальной среде, в службу файлов Azure. В число распространенных методов входят следующие (список не является исчерпывающим).

* **Синхронизация файлов Azure** Во время первой синхронизации между файловым ресурсом Azure (облачная конечная точка) и пространством имен каталогов Windows (серверная конечная точка) служба "Синхронизация файлов Azure" реплицирует все данные из существующей общей папки в службу "Файлы Azure".
* **[Служба импорта и экспорта Azure](../common/storage-import-export-service.md?toc=%2fazure%2fstorage%2ffiles%2ftoc.json)** . Служба "Импорт и экспорт Azure" позволяет безопасно переносить большие объемы данных в общую папку Azure, отправляя жесткие диски в центр обработки данных Azure. 
* **[Robocopy](https://technet.microsoft.com/library/cc733145.aspx)** Robocopy — это хорошо известное средство копирования, которое входит в состав Windows и Windows Server. Robocopy можно применять для передачи данных в службу файлов Azure путем локального подключения файлового ресурса и последующего использования подключенного расположения в качестве назначения в команде Robocopy.
* **[AzCopy](../common/storage-use-azcopy-v10.md?toc=%2fazure%2fstorage%2ffiles%2ftoc.json)** AzCopy — это служебная программа командной строки. Она предназначена для копирования данных из службы файлов Azure, хранилища BLOB-объектов Azure и обратно с помощью простых команд, обеспечивающих оптимальную производительность.

## <a name="next-steps"></a>Следующие шаги
* [Planning for an Azure File Sync Deployment](storage-sync-files-planning.md) (Планирование развертывания службы синхронизации файлов Azure)
* [Deploying Azure Files](storage-files-deployment-guide.md) (Развертывание службы файлов Azure)
* [Развертывание службы синхронизации файлов Azure (предварительная версия)](storage-sync-files-deployment-guide.md)
