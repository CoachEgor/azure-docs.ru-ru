---
title: Миграция в файлы Azure
description: Узнайте о миграциях в файлы Azure и найдите руководство по миграции.
author: fauhse
ms.service: storage
ms.topic: conceptual
ms.date: 3/18/2020
ms.author: fauhse
ms.subservice: files
ms.openlocfilehash: 903ce52120fce7c23c6a3754498b81fc6fc2430f
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80247322"
---
# <a name="migrate-to-azure-file-shares"></a>Миграция в файлы Azure

В этой статье рассматриваются основные аспекты миграции в файлы Azure.

Наряду с основами миграции, эта статья содержит список существующих, индивидуализированных руководств по миграции. Эти руководства по миграции помогают перемещать файлы в файлы Azure и организуются по месту, где находятся ваши данные сегодня, и по какой модели развертывания (только в облаке или гибриде) планируется переход.

## <a name="migration-basics"></a>Основы миграции

В Azure доступно несколько различных типов облачных хранилищ. Фундаментальным аспектом переноса файлов в Azure является определение того, какой вариант хранения Данных подходит для данных.

Акции файлов Azure отлично подходят для данных файлов общего назначения. Действительно все, что вы используете на месте SMB или NFS доля для. С [помощью Azure File Sync](storage-sync-files-planning.md)можно дополнительно кэшировать содержимое нескольких файлов Azure на нескольких серверах Windows.

Если в настоящее время приложение работает на сервере, то хранение файлов в файлах Azure может быть правильным для вас, в зависимости от приложения. Можно снять приложение для запуска в Azure и использовать общие файлы Azure в качестве общего хранилища. Для этого сценария можно также рассмотреть [диски Azure.](../../virtual-machines/windows/managed-disks-overview.md) Для приложений, рожденных в облаке, которые не зависят от SMB или машинно-локального доступа к их данным или общего доступа, хранилище объектов, таких как [Azure blobs,](../blobs/storage-blobs-overview.md)часто является лучшим выбором.

Ключом в любой миграции является захват всех применимых файлов при переносе файлов из текущего местоположения хранилища в Azure. Помощь при выборе правильного хранилища Azure также является аспектом того, насколько верояжность поддерживается опцией хранения Azure и требуется по сценарию. Данные файла общего назначения традиционно зависят от метаданных файлов. Данные приложения могут и не быть. В файле есть два основных компонента:

- **Поток данных**: Поток данных файла хранит содержимое файла.
- **Метаданные файлов**: Метаданные файла имеют несколько подкомпонентов:
   * Атрибуты файла: Например, только для чтения.
   * Разрешения на файл: Называется как *разрешения NTFS* или *ACLs файлов и папок.*
   * Метки времени: В первую очередь *создать-* и *последние модифицированные временные* метки.
   * Альтернативный поток данных: пространство для хранения больших количеств нестандартных свойств.

Таким образом, верность файла в миграции может быть определена как возможность хранить всю применимую файловую информацию об источнике, возможность передавать их с помощью инструмента миграции и возможность хранить их на целевом хранилище миграции.

Чтобы обеспечить максимально бесперебойную миграцию, определите [лучший инструмент копирования для ваших нужд](#migration-toolbox) и соподовуровне цель хранения с источником.

Принимая во внимание предыдущую информацию, становится ясно, что целевое хранилище для файлов общего назначения в Azure: [акции файлов Azure.](storage-files-introduction.md) По сравнению с хранилищем объектов в blobs Azure метаданные файлов могут быть локально сохранены в файлах в файле Azure.

Акции файлов Azure также сохраняют иерархию файлов и папок. Дополнительно:
* Разрешения NTFS могут храниться на файлах и папках, поскольку они находятся на месте.
* Пользователи DD (или пользователи Azure AD DS) могут получить доступ к файлу Azure. 
    Они используют свою текущую идентификацию и получают доступ на основе разрешений на совместное использование, а также атакжем акфолсы файлов и папок. Поведение не отличается от того, когда пользователи подключаются к совместной файлу.
*  Альтернативный поток данных является основным аспектом верности файла, который в настоящее время не может храниться в файле в файле Azure.
   Он сохраняется на месте, когда участвует Azure File Sync.

* [Подробнее об аутентификации AD для файлов Azure](storage-files-identity-auth-active-directory-enable.md)
* [Подробнее об аутентификации служб активных доменов Azure (AAD DS) для файлов Azure](storage-files-identity-auth-active-directory-domain-service-enable.md)

## <a name="migration-guides"></a>Руководства по переносу

В следующей таблице перечислены подробные руководства по миграции.

Перейдите по нему:
1. Найдите строку для исходной системы, на ней в настоящее время хранятся файлы.
2. Решите, ориентируетесь ли вы на гибридное развертывание, где используется Azure File Sync для кэша содержимого одного или нескольких файлов Azure, или если вы хотите использовать файлы Azure прямо в облаке. Выберите целевую колонку, отражающую ваше решение.
3. В рамках пересечения источника и цели ячейка ячейки таблицы перечисляет доступные сценарии миграции. Выберите один из них, чтобы напрямую связаться с подробным руководством по миграции.

В сценарии без ссылки еще нет опубликованного руководства по миграции. Периодически проверяйте эту таблицу на наличие обновлений. Новые руководства будут опубликованы по их распоряжению.

| Источник | Цель: </br>Гибридное развертывание | Цель: </br>Развертывание только для облака |
|:---|:--|:--|
| | Комбинация инструментов:| Комбинация инструментов: |
| Windows Server 2012 R2 и более поздних версий | <ul><li>[Служба синхронизации файлов Azure](storage-sync-files-deployment-guide.md)</li><li>[Синхронизация файлов Azure - DataBox](storage-sync-offline-data-transfer.md)</li><li>Служба миграции хранилища - синхронизация файлов Azure</li></ul> | <ul><li>Служба синхронизации файлов Azure</li><li>Синхронизация файлов Azure - DataBox</li><li>Служба миграции хранилища - синхронизация файлов Azure</li><li>Robocopy</li></ul> |
| Windows Server 2012 и старше | <ul><li>Синхронизация файлов Azure - DataBox</li><li>Служба миграции хранилища - синхронизация файлов Azure</li></ul> | <ul><li>Служба миграции хранилища - синхронизация файлов Azure</li><li>Robocopy</li></ul> |
| Сетевое хранилище (NAS) | <ul><li>[Синхронизация файлов Azure - RoboCopy](storage-files-migration-nas-hybrid.md)</li></ul> | <ul><li>Robocopy</li></ul> |
| Linux / Самба | <ul><li>[RoboCopy - синхронизация файлов Azure](storage-files-migration-linux-hybrid.md)</li></ul> | <ul><li>Robocopy</li></ul> |
| StorSimple 8100 / 8600 | <ul><li>[Синхронизация файлов Azure - 8020 Виртуальный прибор](storage-files-migration-storsimple-8000.md)</li></ul> | |
| StorSimple 1200 | <ul><li>[Служба синхронизации файлов Azure](storage-files-migration-storsimple-1200.md)</li></ul> | |
| | | |

## <a name="migration-toolbox"></a>Коробка инструментов миграции

### <a name="file-copy-tools"></a>Инструменты копирования файлов

Есть несколько microsoft и не-Microsoft файл копировальных инструментов доступны. Для того, чтобы выбрать правильный инструмент копирования файлов для сценария миграции, необходимо рассмотреть три фундаментальных вопроса:

* Поддерживает ли инструмент копирования источник и целевое местоположение данной копии? 
    * Поддерживает ли он свой сетевой путь и/или доступные протоколы (например, REST/SMB/NFS) в места и из исходных и целевых хранилищ?
* Сохраняет ли инструмент копирования необходимую точность файла, которая поддерживается местом расположения источника/цели? В некоторых случаях целевое хранилище не поддерживает ту же точность, что и ваш источник. Вы уже приняли решение, что целевое хранилище достаточно для ваших нужд, следовательно, инструмент копирования должен соответствовать только целевым возможностям файла точности.
* Есть ли в инструменте копирования функции, которые вписываются в мою миграционную стратегию? 
    * Например, рассмотрим, есть ли у него варианты, которые позволяют свести к минимуму время простоя. Хороший вопрос, чтобы спросить: Могу ли я запустить эту копию несколько раз на том же, пользователями активно доступ местоположение? Если это так, вы можете значительно уменьшить количество простоев. Сравните это с ситуацией, когда вы можете начать копию только тогда, когда источник перестает изменяться, чтобы гарантировать полную копию.

В следующей таблице классифицируются инструменты Майкрософт и их текущая пригодность для файлов Azure:

| Рекомендуемая | Инструмент | Поддержка акций файлов Azure | Сохраняет верность файла |
| :-: | :-- | :---- | :---- |
|![Да, рекомендуется.](media/storage-files-migration-overview/circle-green-checkmark.png)| Robocopy | Поддерживается. Акции файлов Azure могут быть установлены в виде сетевых дисков. | Полная верность |
|![Да, рекомендуется.](media/storage-files-migration-overview/circle-green-checkmark.png)| Служба синхронизации файлов Azure | Родная интеграция в файлы Azure. | Полная верность |
|![Да, рекомендуется.](media/storage-files-migration-overview/circle-green-checkmark.png)| Служба миграции хранилища (SMS) | Опосредованно поддерживается. Акции файлов Azure могут быть установлены в виде сетевых дисков на целевом сервере SMS. | Полная верность |
|![Не рекомендуется полностью.](media/storage-files-migration-overview/triangle-yellow-exclamation.png)| Azure DataBox | Поддерживается. | Не копирует метаданные. [Может использоваться в сочетании с Azure File Sync](storage-sync-offline-data-transfer.md). |
|![Не рекомендуется.](media/storage-files-migration-overview/circle-red-x.png)| AzCopy | Поддерживается. | Не копирует метаданные. |
|![Не рекомендуется.](media/storage-files-migration-overview/circle-red-x.png)| Обозреватель службы хранилища Azure | Поддерживается. | Не копирует метаданные. |
|![Не рекомендуется.](media/storage-files-migration-overview/circle-red-x.png)| Фабрика данных Azure | Поддерживается. | Не копирует метаданные. |
|||||

*\*Полная точность: соответствует или превышает возможности совместного файла Azure.*

### <a name="migration-helper-tools"></a>Инструменты помощи в миграции

В этом разделе перечислены инструменты, помогающие планировать и выполнять миграции.

* **RoboCopy, от корпорации Майкрософт**

    Один из наиболее применимых инструментов копирования для файла миграции, приходит как часть Microsoft Windows. Из-за многих вариантов в этом инструменте, основная [документация RoboCopy](https://docs.microsoft.com/windows-server/administration/windows-commands/robocopy) является полезным источником.

* **TreeSize, от JAM Программное обеспечение GmbH**

    Azure File Sync в основном масштабируется с количеством элементов (файлов и папок) и в меньшей части с общей суммой TiB. Этот инструмент может быть использован для определения количества файлов и папок в объемах Windows Server. Кроме того, он может быть использован для создания перспективы до [развертывания Azure File Sync](storage-sync-files-deployment-guide.md) - но и после, когда занято многоуровневое облако и вы хотите видеть не только количество элементов, но и в каких каталогах используется кэш сервера больше всего.
    Этот инструмент (проверенная версия 4.4.1) совместим с облачными многоуровневыми файлами. Это не вызовет отзыва многоуровневых файлов во время его нормальной работы.


## <a name="next-steps"></a>Дальнейшие действия

1. Создайте план, к развертыванию которых требуется развертывание файлов Azure (только для облаков или гибридов).
2. Просмотрите список доступных руководств по миграции, чтобы найти подробное руководство, которое соответствует вашему источнику и развертыванию акций файлов Azure.

Более подробная информация о технологиях Azure Files, упомянутых в этой статье:

* [Обзор совместного файла Azure](storage-files-introduction.md)
* [Планирование развертывания синхронизации файлов Azure](storage-sync-files-planning.md)
* [Синхронизация файлов Azure: многоуровневое изящество облака](storage-sync-cloud-tiering.md)
