---
title: Переход на общие папки Azure
description: Узнайте о миграциях в файлы Azure и найдите руководство по миграции.
author: fauhse
ms.service: storage
ms.topic: conceptual
ms.date: 3/18/2020
ms.author: fauhse
ms.subservice: files
ms.openlocfilehash: d6141d48d67dd44c348961c6e09acf4e2531a61e
ms.sourcegitcommit: acb82fc770128234f2e9222939826e3ade3a2a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81685986"
---
# <a name="migrate-to-azure-file-shares"></a>Переход на общие папки Azure

В этой статье рассматриваются основные аспекты миграции в файлы Azure.

Эта статья содержит основы миграции и таблицу руководств по миграции. Эти руководства помогают перемещать файлы в файлы Azure. Руководства организованы в зависимости от того, где находятся ваши данные и какая модель развертывания (только в облаке или гибридной) вы переезжаете.

## <a name="migration-basics"></a>Основы миграции

Azure имеет несколько доступных типов облачных хранилищ. Фундаментальным аспектом миграции файлов в Azure является определение того, какой вариант хранения Azure подходит для ваших данных.

[Доли файлов Azure](storage-files-introduction.md) подходят для данных файлов общего назначения. Эти данные включают в себя все, что вы используете на месте SMB или NFS доля. С [помощью Azure File Sync](storage-sync-files-planning.md)можно кэшировать содержимое нескольких файлов Azure на серверах, работающих с Windows Server.

Для приложения, которое в настоящее время работает на сервере, хранение файлов в файле Azure может быть хорошим выбором. Приложение можно переместить в Azure и использовать в качестве общего хранилища файла Azure. Для этого сценария можно также рассмотреть [диски Azure.](../../virtual-machines/windows/managed-disks-overview.md)

Некоторые облачные приложения не зависят от малого и среднего бизнеса или от машинно-локального доступа к данным или общего доступа. Для этих приложений хранилище объектов, таких как [Azure blobs,](../blobs/storage-blobs-overview.md) часто является лучшим выбором.

Ключом в любой миграции является захват всей применимой точности файлов при перемещении файлов из текущего местоположения хранилища в Azure. Насколько точно поддерживается параметр хранения Azure и сколько требуется сценарию, также помогает выбрать правильное хранилище Azure. Данные файлов общего назначения традиционно зависят от метаданных файлов. Данные приложения могут не быть.

Вот два основных компонента файла:

- **Поток данных**: Поток данных файла хранит содержимое файла.
- **Метаданные файлов**: Метаданные файлов имеют следующие подкомпоненты:
   * Атрибуты файла, такие как только для чтения
   * Разрешения файлов, которые могут быть *названы разрешениями NTFS* или *ACL-файлами и папками*
   * Метки времени, прежде всего создание и последние модифицированные метки времени
   * Альтернативный поток данных, который представляет собой пространство для хранения больших количеств нестандартных свойств

Верность файла в миграции может быть определена как способность:

- Храните всю соответствующую файловую информацию об источнике.
- Передача файлов с помощью инструмента миграции.
- Храните файлы в целевом хранилище миграции.

Чтобы обеспечить бесперебойную миграцию, [определите лучший инструмент копирования для ваших нужд](#migration-toolbox) и соподовуровне цель хранения с вашим источником.

Принимая во внимание предыдущую информацию, можно увидеть, что целевым хранилищем для файлов общего назначения в Azure являются [акции файлов Azure.](storage-files-introduction.md)

В отличие от хранилища объектов в azure blobs, раздел файла Azure может в своей степени хранить метаданные файлов. Акции файлов Azure также сохраняют иерархию файлов и папок, атрибуты и разрешения. Разрешения NTFS могут храниться на файлах и папках, поскольку они находятся на месте.

Пользователь Active Directory, который является его контроллером домена, может получить доступ к доле файла Azure. Так может пользователь службы активных доменов Azure Active Directory Domain Services (Azure AD DS). Каждый использует свою текущую идентификацию для получения доступа на основе разрешений общего доступа и в файлах и папках ACLs. Это поведение похоже на пользователя, подключающегося к разделу файла.

Альтернативный поток данных является основным аспектом верности файла, который в настоящее время не может храниться в файле в файле Azure. При использовании Azure File Sync сохраняется на месте.

Узнайте больше об [аутентификации Azure AD](storage-files-identity-auth-active-directory-enable.md) и [аутентификации Azure AD DS](storage-files-identity-auth-active-directory-domain-service-enable.md) для файлов Azure.

## <a name="migration-guides"></a>Руководства по переносу

В следующей таблице перечислены подробные руководства по миграции.

Как использовать таблицу:

1. Найдите строку для исходной системы, на ней в настоящее время хранятся файлы.

1. Выберите одну из следующих целей:

   - Гибридное развертывание с помощью Azure File Sync для кэша содержимого файлов Azure
   - Акции файлов Azure в облаке

   Выберите целевую колонку, которая соответствует вашему выбору.

1. В рамках пересечения источника и цели ячейка ячейки таблицы перечисляет доступные сценарии миграции. Выберите один, чтобы напрямую ссылку на подробное руководство по миграции.

В сценарии без ссылки еще нет опубликованного руководства по миграции. Периодически проверяйте эту таблицу на наличие обновлений. Новые руководства будут опубликованы, когда они будут доступны.

| Источник | Цель: </br>Гибридное развертывание | Цель: </br>Развертывание только для облака |
|:---|:--|:--|
| | Комбинация инструментов:| Комбинация инструментов: |
| Windows Server 2012 R2 и позже | <ul><li>[Служба синхронизации файлов Azure](storage-sync-files-deployment-guide.md)</li><li>[Синхронизация файлов Azure и коробка данных Azure](storage-sync-offline-data-transfer.md)</li><li>Служба синхронизации и миграции файлов Azure</li></ul> | <ul><li>Служба синхронизации файлов Azure</li><li>Синхронизация файлов Azure и коробка данных</li><li>Служба синхронизации и миграции файлов Azure</li><li>Robocopy</li></ul> |
| Windows Server 2012 и более ранние версии | <ul><li>Синхронизация файлов Azure и коробка данных</li><li>Служба синхронизации и миграции файлов Azure</li></ul> | <ul><li>Служба синхронизации и миграции файлов Azure</li><li>Robocopy</li></ul> |
| Сетевое хранилище (NAS) | <ul><li>[Синхронизация файлов Azure и RoboCopy](storage-files-migration-nas-hybrid.md)</li></ul> | <ul><li>Robocopy</li></ul> |
| Linux или Samba | <ul><li>[Синхронизация файлов Azure и RoboCopy](storage-files-migration-linux-hybrid.md)</li></ul> | <ul><li>Robocopy</li></ul> |
| Microsoft Azure StorSimple Облачный прибор 8100 или StorSimple Облачный прибор 8600 | <ul><li>[Синхронизация файлов Azure и облачный прибор StorSimple 8020](storage-files-migration-storsimple-8000.md)</li></ul> | |
| StorSimple Облако Прибор 1200 | <ul><li>[Служба синхронизации файлов Azure](storage-files-migration-storsimple-1200.md)</li></ul> | |
| | | |

## <a name="migration-toolbox"></a>Коробка инструментов миграции

### <a name="file-copy-tools"></a>Инструменты копирования файлов

Есть несколько файлов-копий инструментов, доступных от Microsoft и другие. Чтобы выбрать правильный инструмент для сценария миграции, необходимо рассмотреть следующие фундаментальные вопросы:

* Поддерживает ли инструмент исходное место и целевые места для копии файла?

* Поддерживает ли инструмент сетевой путь или доступные протоколы (например, REST, SMB или NFS) между исходным и целевым местом хранения?

* Сохраняет ли инструмент необходимую точность файлов, поддерживаемую вашими местоположениями источника и целевых файлов?

    В некоторых случаях целевое хранилище не поддерживает ту же точность, что и ваш источник. Если целевое хранилище достаточно для ваших нужд, инструмент должен соответствовать только возможностям файлохранилища.

* Есть ли у инструмента функции, которые позволяют ему вписаться в вашу миграционную стратегию?

    Например, подумайте, позволяет ли инструмент минимизировать время простоя.
    
    Когда инструмент поддерживает опцию зеркального отражения источника цели, его часто можно запустить несколько раз на одном и том же источнике и цели, пока источник остается доступным.

    При первом запуске инструмента он копирует основную часть данных. Этот первоначальный запуск может длиться некоторое время. Он часто длится дольше, чем вы хотите для принятия источника данных в автономном режиме для бизнес-процессов.

    Путем зеркального отражения источника к цели (как с **robocopy /MIR),** вы можете запустить инструмент снова на том же источнике и цели. Запуск происходит гораздо быстрее, так как ему необходимо транспортировать только изменения источника, которые происходят после предыдущего запуска. Повторное использование копировальной инструмента таким образом может значительно сократить время простоя.

В следующей таблице классифицируются инструменты Майкрософт и их текущая пригодность для файлов Azure:

| Рекомендуемая | Инструмент | Поддержка акций файлов Azure | Сохранение верности файла |
| :-: | :-- | :---- | :---- |
|![Да, рекомендуется](media/storage-files-migration-overview/circle-green-checkmark.png)| Robocopy | Поддерживается. Акции файлов Azure могут быть установлены в виде сетевых дисков. | Полная верность». |
|![Да, рекомендуется](media/storage-files-migration-overview/circle-green-checkmark.png)| Служба синхронизации файлов Azure | Родная интеграция в файлы Azure. | Полная верность». |
|![Да, рекомендуется](media/storage-files-migration-overview/circle-green-checkmark.png)| Служба миграции хранилища | Опосредованно поддерживается. Акции файлов Azure могут быть установлены в виде сетевых дисков на целевых серверах SMS. | Полная верность». |
|![Не рекомендуется полностью](media/storage-files-migration-overview/triangle-yellow-exclamation.png)| Data Box | Поддерживается. | Не копирует метаданные. [Box данных можно использовать с помощью синхронизации файлов Azure.](storage-sync-offline-data-transfer.md) |
|![Не рекомендуется](media/storage-files-migration-overview/circle-red-x.png)| AzCopy | Поддерживается. | Не копирует метаданные. |
|![Не рекомендуется](media/storage-files-migration-overview/circle-red-x.png)| Обозреватель службы хранилища Azure | Поддерживается. | Не копирует метаданные. |
|![Не рекомендуется](media/storage-files-migration-overview/circle-red-x.png)| Фабрика данных Azure | Поддерживается. | Не копирует метаданные. |
|||||

*\*Полная точность: соответствует или превышает возможности совместного файла Azure.*

### <a name="migration-helper-tools"></a>Инструменты помощи в миграции

В этом разделе описаны инструменты, которые помогают планировать и запускать миграции.

#### <a name="robocopy-from-microsoft-corporation"></a>RoboCopy от корпорации Майкрософт

RoboCopy является одним из инструментов, наиболее применимых для миграции файлов. Он поставляется как часть Windows. Основная [документация RoboCopy](https://docs.microsoft.com/windows-server/administration/windows-commands/robocopy) является полезным ресурсом для многих вариантов этого инструмента.

#### <a name="treesize-from-jam-software-gmbh"></a>TreeSize от JAM программного обеспечения GmbH

Azure File Sync масштабируется в основном с количеством элементов (файлов и папок), а не с общей суммой хранилища. Инструмент TreeSize позволяет определить количество элементов в объемах Сервера Windows.

Инструмент можно использовать для создания перспективы перед [развертыванием Azure File Sync.](storage-sync-files-deployment-guide.md) Вы также можете использовать его, когда многоуровневое облако включено после развертывания. В этом сценарии вы видите количество элементов и какие каталоги используют кэш сервера больше всего.

Испытанная версия инструмента версии 4.4.1. Он совместим с облачными файлами. Инструмент не вызовет отзыва многоуровневых файлов во время его нормальной работы.

## <a name="next-steps"></a>Следующие шаги

1. Создайте план, для чего необходимо развертывание акций файлов Azure (только для облаков или гибридов).
1. Просмотрите список доступных руководств по миграции, чтобы найти подробное руководство, которое соответствует вашему источнику и развертыванию акций файлов Azure.

Вот более подробная информация о технологиях Azure Files, упомянутых в этой статье:

* [Обзор совместного файла Azure](storage-files-introduction.md)
* [Планирование развертывания службы синхронизации файлов Azure](storage-sync-files-planning.md)
* [Синхронизация файлов Azure: многоуровневое изящество облака](storage-sync-cloud-tiering.md)
