---
title: Целевые показатели масштабируемости и производительности службы файлов Azure
description: 'Ознакомьтесь с такими целевыми показателями масштабируемости и производительности службы файлов Аzure: емкость, частота запросов и предельная входящая и исходящая пропускная способность.'
author: roygara
ms.service: storage
ms.topic: conceptual
ms.date: 10/16/2019
ms.author: rogarana
ms.subservice: files
ms.openlocfilehash: dcb0ffef0cf48a7bcbfbdb0107999f7e90333559
ms.sourcegitcommit: 812bc3c318f513cefc5b767de8754a6da888befc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/12/2020
ms.locfileid: "77151995"
---
# <a name="azure-files-scalability-and-performance-targets"></a>Целевые показатели масштабируемости и производительности службы файлов Azure

[Служба файлов Azure](storage-files-introduction.md) предлагает полностью управляемые общие файловые ресурсы в облаке, доступ к которым можно получить с помощью стандартного отраслевого протокола SMB. В этой статье описываются целевые показатели масштабируемости и производительности службы файлов Azure и службы синхронизации файлов Azure.

Приведенные здесь целевые показатели масштабируемости и производительности предельно высоки, но на них могут оказывать негативное воздействие другие параметры вашего развертывания. Например, пропускная способность по файлу может быть ограничена не только серверами, на которых размещена служба файлов Azure, но и доступной пропускной способностью вашей сети. Мы настоятельно рекомендуем протестировать модель использования, чтобы определить, соответствуют ли показатели масштабируемости и производительности службы файлов Azure вашим требованиям. Мы также стремимся постепенно увеличивать предельные показатели. Мы ждем ваших отзывов о том, какие предельные показатели вы хотели бы увеличить. Отзывы можно оставить в комментариях ниже или на форуме [UserVoice службы файлов Azure](https://feedback.azure.com/forums/217298-storage/category/180670-files).

## <a name="azure-storage-account-scale-targets"></a>Целевые показатели масштабируемости для учетной записи хранения Azure

Учетная запись хранения Azure является родительским объектом общей папки Azure. Учетная запись хранения представляет собой пул носителей в Azure, которые можно использовать для хранения данных в разных службах хранения, включая службу файлов Azure. Другими службами для хранения данных в учетных записях хранения являются хранилище BLOB-объектов Azure, хранилище очередей Azure и табличное хранилище Azure. Следующие целевые показатели касаются всех служб хранения, которые сохраняют данные в учетных записях хранения:

[!INCLUDE [azure-storage-account-limits-standard](../../../includes/azure-storage-account-limits-standard.md)]

[!INCLUDE [azure-storage-limits-azure-resource-manager](../../../includes/azure-storage-limits-azure-resource-manager.md)]

> [!Important]  
> Использование учетной записи хранения общего назначения из других служб хранилища влияет на файловые ресурсы Azure в вашей учетной записи хранения. Например, при достижении максимальной емкости учетной записи хранения в службе хранилища BLOB-объектов Azure вы не сможете создать файлы в общей папке Azure, даже если ее размер не превышает максимального.

## <a name="azure-files-scale-targets"></a>Целевые показатели масштабируемости службы файлов Azure

Существуют три категории ограничений, которые следует учитывать при работе с файлами Azure: учетными записями хранения, общими папками и файлами.

Например, в общих файловых ресурсах уровня "Премиум" одна общая папка может достигать 100 000 операций ввода-вывода, а один файл — до 5 000 операций ввода-вывода. Таким образом, если в одной общей папке имеется три файла, максимальное число операций ввода-вывода в секунду, которое можно получить из этой общей папки, — 15 000.

### <a name="standard-storage-account-limits"></a>Ограничения учетной записи хранения уровня "Стандартный"

Эти ограничения см. в разделе [целевые объекты масштабирования учетной записи хранения Azure](#azure-storage-account-scale-targets) .

### <a name="premium-filestorage-account-limits"></a>Ограничения учетной записи Premium Филестораже

[!INCLUDE [azure-storage-limits-filestorage](../../../includes/azure-storage-limits-filestorage.md)]

> [!IMPORTANT]
> Ограничения учетной записи хранения применяются ко всем общим ресурсам. Масштабирование до максимума для учетных записей Филестораже доступно, только если для каждой учетной записи Филестораже существует только один общий ресурс.

### <a name="file-share-and-file-scale-targets"></a>Целевые объекты общей папки и масштабирования файлов

> [!NOTE]
> Стандартные общие файловые ресурсы, размер которых превышает 5 Тиб, имеют определенные ограничения.
> Список ограничений, региональных сведений и инструкций по включению этих больших размеров файловых ресурсов см. в разделе подключение [к большим файловым ресурсам](storage-files-planning.md#onboard-to-larger-file-shares-standard-tier) в статье Планирование.

[!INCLUDE [storage-files-scale-targets](../../../includes/storage-files-scale-targets.md)]

[!INCLUDE [storage-files-premium-scale-targets](../../../includes/storage-files-premium-scale-targets.md)]

## <a name="azure-file-sync-scale-targets"></a>Целевые показатели масштабируемости службы "Синхронизация файлов Azure"

Служба синхронизации файлов Azure разрабатывалась для использования без ограничений, но такое использование не всегда возможно. В таблице указаны пределы тестирования, проведенного Майкрософт, и жесткие ограничения для некоторых целевых показателей.

[!INCLUDE [storage-sync-files-scale-targets](../../../includes/storage-sync-files-scale-targets.md)]

### <a name="azure-file-sync-performance-metrics"></a>Метрики производительности службы синхронизации файлов Azure

Так как агент службы синхронизации файлов Azure работает на компьютере под управлением Windows Server, который подключается к общим папкам Azure, эффективная синхронизация зависит от ряда факторов в вашей инфраструктуре: Windows Server и базовой конфигурации диска, пропускной способности сети между сервером и хранилищем Azure, размера файла, общего размера набора данных и активности в наборе данных. Так как служба синхронизации файлов Azure работает на уровне файлов, характеристики производительности решения на основе этой службы лучше измеряются в количестве обрабатываемых объектов (файлов и каталогов) в секунду.

Для службы синхронизации файлов Azure производительность имеет решающее значение на двух этапах:

1. **Исходная одноразовая подготовка**. Сведения об оптимальном развертывании для оптимизации производительности при начальной подготовке см. в разделе [Подключение с помощью службы синхронизации файлов Azure](storage-sync-files-deployment-guide.md#onboarding-with-azure-file-sync).
2. **Непрерывная синхронизация**. После первоначального добавления данных в общие папки Azure служба синхронизации файлов Azure синхронизирует несколько конечных точек.

Чтобы помочь вам спланировать развертывание для каждого из этапов, ниже приведены результаты, полученные во время внутреннего тестирования в системе со следующей конфигурацией.

| Конфигурация системы |  |
|-|-|
| ЦП | 64 виртуальных ядер с кэшем L3 на 64 МиБ |
| Память | 128 ГБ |
| Диск | Диски SAS с RAID 10 и кэшем, работающем от аккумулятора |
| Сеть | Сеть 1 Гбит/с |
| Рабочая нагрузка | Файловый сервер общего назначения|

| Одноразовая начальная подготовка  |  |
|-|-|
| Число объектов | 25 млн объектов |
| Размер набора данных| ~ 4,7 тиб |
| Средний размер файлов | ~ 200 КИБ (самый крупный файл: 100 гиб) |
| Пропускная способность отправки | 20 объектов в секунду на группу синхронизации |
| Пропускная способность скачивания пространств имен* | 400 объектов в секунду |

\* При создании новой конечной точки сервера агент синхронизации файлов Azure не скачивает содержимое файла. Сначала он синхронизирует полное пространство имен, а затем запускает фоновый вызов для скачивания файлов, либо полностью, либо, если включено распределение по уровням облака, в политику распределения по уровням облака, установленную на конечной точке сервера.

| Непрерывная синхронизация  |   |
|-|--|
| Количество синхронизированных объектов| 125 000 объектов (~1 % обновления) |
| Размер набора данных| 50 ГиБ |
| Средний размер файлов | ~500 КиБ |
| Пропускная способность отправки | 20 объектов в секунду на группу синхронизации |
| Полная пропускная способность скачивания* | 60 объектов в секунду |

\* Если включено распределение по уровням облака, вы, скорее всего, будете наблюдать лучшую производительность, так как скачиваются только некоторые данные файлов. Служба синхронизации файлов Azure скачивает данные кэшированных файлов только при их изменении в любой из конечных точек. Для любых многоуровневых или вновь созданных файлов агент не скачивает данные файла и вместо этого синхронизирует пространство имен со всеми конечными точками сервера. Агент также поддерживает частичное скачивание многоуровневых файлов по мере получения доступа к ним пользователем. 

> [!Note]  
> Цифры выше не являются показателем наблюдаемой производительности. Фактическая производительность будет зависеть от нескольких факторов, как указано в начале этого раздела.

В качестве общего руководства по развертыванию вы должны учитывать следующие моменты:

- Пропускная способность объекта приблизительно масштабируется пропорционально количеству групп синхронизации на сервере. Разделение данных на несколько групп синхронизации на сервере улучшает пропускную способность, которая также ограничена сервером и сетью.
- Пропускная способность объекта обратно пропорциональна пропускной способности в МиБ в секунду. Для файлов меньшего размера вы получите более высокую пропускную способность с точки зрения количества объектов, обработанных в секунду, но меньшую пропускную способность в МиБ в секунду. И наоборот, для файлов большего размера будет обработано меньше объектов в секунду, но с более высокой пропускной способностью в МиБ в секунду. Пропускная способность в МиБ в секунду ограничена целевыми объектами масштабирования файлов Azure.

## <a name="see-also"></a>См. также раздел

- [Планирование развертывания службы файлов Azure](storage-files-planning.md)
- [Планирование развертывания службы синхронизации файлов Azure (предварительная версия)](storage-sync-files-planning.md)
