---
title: Настройка имени домена для экземпляра службы управления API Azure | Документация Майкрософт
description: В этом разделе описано, как настроить пользовательское имя домена для вашего экземпляра службы управления API Azure.
services: api-management
documentationcenter: ''
author: vladvino
manager: anneta
editor: ''
ms.service: api-management
ms.workload: integration
ms.topic: article
ms.date: 05/29/2019
ms.author: apimpm
ms.openlocfilehash: a8bfa7c5baa316b4019480bfc146b6cc61eff979
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66141306"
---
# <a name="configure-a-custom-domain-name"></a>Настройка пользовательского имени домена 

При создании экземпляра службы управления API (APIM) Azure назначает его поддомену домена azure-api.net (например, `apim-service-name.azure-api.net`). Но доступ к конечным точкам APIM можно предоставлять через собственное доменное имя, например **contoso.com**. В этом руководстве показано, как сопоставить существующее пользовательское DNS-имя с конечными точками, предоставленными экземпляром службы управления API Azure.

> [!WARNING]
> Пользователям, желающим использовать привязку сертификата для повышения безопасности своих приложений, необходимо использовать имя пользовательского домена и сертификат, которым они управляют, а не сертификат по умолчанию. Пользователи, которые привязывают сертификат по умолчанию, получат жесткую зависимость от свойств сертификата, которым они не управляют. Поэтому это делать не рекомендуется.

## <a name="prerequisites"></a>Технические условия

Чтобы выполнить действия, описанные в этой статье, необходимо следующее.

+ Активная подписка Azure.

    [!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

+ Экземпляр APIM. Дополнительные сведения см. в статье [Создание экземпляра службы управления API Azure](get-started-create-service-instance.md).
+ Пользовательское доменное имя, которое принадлежит вам. Используемое имя должно быть приобретено отдельно и размещено на DNS-сервере. Этот раздел не содержит инструкции по размещению пользовательского доменного имени.
+ Необходимо иметь действующий сертификат с открытым и закрытым ключами (PFX-файл). Субъект или альтернативное имя субъекта (SAN) должны соответствовать доменному имени (это позволяет APIM безопасно предоставлять URL-адреса по протоколу SSL).

## <a name="use-the-azure-portal-to-set-a-custom-domain-name"></a>Настройка пользовательского доменного имени с помощью портала Azure

1. Перейдите к вашему экземпляру APIM на [портале Azure](https://portal.azure.com/).
1. Выберите **Личные домены и SSL**.
    
    Существует ряд конечных точек, к которым можно назначить пользовательское доменное имя. Сейчас доступны следующие конечные точки: 
   + **Proxy** (по умолчанию: `<apim-service-name>.azure-api.net`), 
   + **Portal** (по умолчанию: `<apim-service-name>.portal.azure-api.net`),     
   + **Management** (по умолчанию: `<apim-service-name>.management.azure-api.net`), 
   + **SCM** (по умолчанию: `<apim-service-name>.scm.azure-api.net`).

     >[!NOTE]
     > Можно обновить все конечные точки или некоторые из них. Как правило, клиенты обновляют конечные точки **Proxy** (этот URL-адрес используется для вызова API, предоставляемого через службу управления API) и **Portal** (URL-адрес портала разработчика). Конечные точки **Management** и **SCM** используются для внутренних целей клиентами APIM, поэтому им реже назначается пользовательское доменное имя.

1. Выберите конечную точку, которую необходимо обновить. 
1. В окне справа выберите **Настраиваемое**.

   + В поле **Пользовательское доменное имя** укажите имя, которое следует использовать. Например, `api.contoso.com`. Поддерживаются также доменные имена с подстановочными знаками (например, *. domain.com).
   + В **сертификат**, выберите сертификат из хранилища ключей. Вы также можете отправить является допустимым. PFX-ФАЙЛ файла и укажите его **пароль**, если сертификат защищен паролем.

     > [!TIP]
     > Если вы используете Azure Key Vault для управления SSL-сертификата личного домена, убедитесь, что сертификат вставляется в хранилище ключей [как *сертификат*](https://docs.microsoft.com/rest/api/keyvault/CreateCertificate/CreateCertificate), а не *секрет*. Если сертификат имеет значение autorotate, управления API автоматически получают последнюю версию.

1. Нажмите кнопку "Применить".

    >[!NOTE]
    >Назначение сертификата может занять 15 или более минут в зависимости от размера развертывания. Для номера SKU для разработчиков характерен простой, а для номеров SKU "Базовый" и выше такого простоя нет.

[!INCLUDE [api-management-custom-domain](../../includes/api-management-custom-domain.md)]

## <a name="next-steps"></a>Дальнейшие действия

[Повышение категории и масштабирование службы](upgrade-and-scale.md)
