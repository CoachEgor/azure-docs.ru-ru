---
title: Публикация версий своего API с помощью службы управления API Azure | Документация Майкрософт
description: Следуйте инструкциям этого руководства, чтобы узнать, как опубликовать нескольких версий API в службе управления API.
services: api-management
documentationcenter: ''
author: vladvino
manager: cfowler
editor: ''
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.custom: mvc
ms.topic: tutorial
ms.date: 11/04/2019
ms.author: apimpm
ms.openlocfilehash: b683910180e597cb8cbfa642bb2d9ac3200b42ee
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "86255036"
---
# <a name="publish-multiple-versions-of-your-api"></a>Публикация нескольких версий API 

Иногда нецелесообразно предоставлять всем вызывающим сторонам одну версию API. Если вызывающим сторонам требуется выполнить обновление до более поздней версии, они хотят, чтобы сделать это было просто. Для этого можно использовать функцию **версий** в службе управления API Azure. Дополнительные сведения см. в статье о [версиях и редакциях](https://azure.microsoft.com/blog/versions-revisions/).

В этом руководстве описано следующее.

> [!div class="checklist"]
> * добавление новой версии в существующий интерфейс API;
> * выбор схемы версии;
> * Добавление версии в продукт
> * Обзор портала разработчика для просмотра версии

![Версия, отображаемая на портале разработчика](media/api-management-getstarted-publish-versions/azure_portal.PNG)

## <a name="prerequisites"></a>предварительные требования

+ Ознакомьтесь с [терминологией службы управления API в Azure](api-management-terminology.md).
+ Выполните задачи в кратком руководстве по [созданию экземпляра службы управления API Azure](get-started-create-service-instance.md).
+ Также выполните задачи из руководства по [импорту и публикации первого API](import-and-publish.md).

## <a name="add-a-new-version"></a>Добавление новой версии

![Контекстное меню API: добавление версии](media/api-management-getstarted-publish-versions/AddVersionMenu.png)

1. В списке API выберите **Demo Conference API**.
2. Выберите контекстное меню ( **...** ) рядом с пунктом.
3. Выберите **+ Add Version** (+ Добавить версию).

> [!TIP]
> Управление версиями можно также включить при создании API. Для этого следует выбрать **Управлять версией этого API?** на экране **Добавление API**.

## <a name="choose-a-versioning-scheme"></a>Выбор схемы управления версиями

Служба управления API Azure позволяет выбрать, каким образом разрешить вызывающим сторонам указывать, какая версия API им требуется. Укажите версию API, которую нужно использовать, выбрав **схему управления версиями**. Эта схема может быть **путем, заголовком или строкой запроса**. В приведенном ниже примере для выбора схемы управления версиями используется путь.

![Экран добавления версии](media/api-management-getstarted-publish-versions/AddVersion.PNG)

1. Оставьте выбранным значение **Путь** для параметра **Схема управления версиями**.
2. Введите **demo-conference-api-v1** в поле **Имя**.

    > [!NOTE]
    > По сути, версия — это новый API, созданный в результате исправления API. **Имя** — это имя нового интерфейса API. Оно должно быть уникальным в пределах экземпляра службы управления API.

3. Введите **v1** в поле **Идентификатор версии**.

    > [!TIP]
    > Если в качестве схемы управления версиями выбрать **заголовок** или **строку запроса**, необходимо предоставить дополнительное значение — имя заголовка или параметр строки запроса.

4. Щелкните **Создать**, чтобы создать версию.
5. Теперь под пунктом **Demo Conference API** в списке API указаны два разных API, **Original** и **v1**.

    ![Версии, перечисленные в списке API на портале Azure](media/api-management-getstarted-publish-versions/VersionList.PNG)

    > [!Note]
    > Если добавить версию для API без управления версиями, автоматически будет создана версия**Original** (в соответствии с URL-адресом по умолчанию). Это гарантирует, что работа вызывающих сторон не будет нарушена в процессе добавления версии. Если вы сразу создадите API с управлением версиями, то версия Original не будет создаваться.

6. Теперь можно изменить и настроить **v1** в качестве API, не связанного с версией **Original**. Изменение одной версии не влияет на другую.

## <a name="add-the-version-to-a-product"></a>Добавление версии в продукт

Чтобы для вызывающих сторон отображалась новая версия, ее необходимо добавить в **продукт**.

![Продукты управления API](media/api-management-getstarted-publish-versions/08-AddMultipleVersions-03-AddVersionToProduct.png)

1. На странице модели классического развертывания выберите **Продукты**.
2. Выберите **Без ограничений**.
3. Выберите **Интерфейсы API**.
4. Выберите **Добавить**.
5. Выберите **Demo Conference API, версия v1**.
6. Нажмите кнопку **Выбрать**.

## <a name="browse-the-developer-portal-to-see-the-version"></a>Обзор портала разработчика для просмотра версии

1. Выберите **Портал разработчика** в верхнем меню.
2. Выберите **API**, а затем — **Demo Conference API**.
3. Появится раскрывающийся список с несколькими версиями рядом с именем API.
4. Выберите **v1**.
5. Обратите внимание на **URL-адрес запроса** первой операции в списке. В нем видно, что путь URL-адреса API содержит **v1**.

## <a name="next-steps"></a>Дальнейшие действия

В этом руководстве описано следующее.

> [!div class="checklist"]
> * добавление новой версии в существующий интерфейс API;
> * выбор схемы версии; 
> * Добавление версии в продукт
> * Обзор портала разработчика для просмотра версии

Перейдите к следующему руководству:

> [!div class="nextstepaction"]
> [Настройка стиля страниц для портала разработчика](api-management-customize-styles.md)
