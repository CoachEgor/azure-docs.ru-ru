---
title: Ограничения и подробная информация о поддержке форматов API
titleSuffix: Azure API Management
description: Подробная информация об известных проблемах и ограничениях в форматах Open API, WSDL и WADL поддерживается в Azure API Management.
services: api-management
documentationcenter: ''
author: vladvino
manager: vlvinogr
editor: ''
ms.assetid: 7a5a63f0-3e72-49d3-a28c-1bb23ab495e2
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.topic: article
ms.date: 01/02/2020
ms.author: apimpm
ms.openlocfilehash: 61d43addfdf9008cb7aa8a073dcf3bb702cb55f1
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76513377"
---
# <a name="api-import-restrictions-and-known-issues"></a>Ограничения и известные проблемы при импорте API

## <a name="about-this-list"></a>Об этом списке

При импорте API можно встретить некоторые ограничения или определить проблемы, которые необходимо исправить, прежде чем вы сможете успешно выполнить импорт. В этой статье документируются эти ограничения, организованные форматом импорта API. В нем также описывается, как работает экспорт OpenAPI.

## <a name="openapiswagger-import-limitations"></a><a name="open-api"> </a>Ограничения импорта OpenAPI/Swagger

Если при импорте документа OpenAPI возникают ошибки, убедитесь, что вы проверили его заранее. Вы можете сделать это с помощью конструктора на портале Azure ("Конструктор" — "Интерфейс" — "Редактор спецификаций OpenAPI") или с помощью стороннего инструмента, например <a href="https://editor.swagger.io">редактора Swagger</a>.

### <a name="general"></a><a name="open-api-general"> </a>Общие сведения

-   Обязательные параметры пути и запроса должны иметь уникальные имена. (В OpenAPI имя параметра должно быть уникальным только в пределах расположения (например, пути, запроса, заголовка)). Тем не менее Управление API дает возможность различать операции по параметрам пути и запроса (которые не поддерживаются в OpenAPI). Поэтому необходимо указать уникальные имена параметров в пределах всего шаблона URL-адреса.)
-   `\$ref`указатели не могут ссылаться на внешние файлы.
-   `x-ms-paths`и `x-servers` являются единственными поддерживаемыми расширениями.
-   Настраиваемые расширения игнорируются при импорте и не сохраняются для экспорта.
-   `Recursion`- API Management не поддерживает определения, определенные рекурсивно (например, схемы, относящиеся к себе).
-   URL-адрес исходного файла (если доступен) применяется для относительных URL-адресов сервера.
-   Определения безопасности игнорируются.
-   Определения схемы в строке для операций API не поддерживаются. Определения схемы определяются в области API и могут быть отожнены в областях запроса операций API или ответов.
-   Определенный параметр URL должен быть частью шаблона URL.
-   `Produces`ключевое слово, описывающий типы MIME, возвращенные API, не поддерживается. 

### <a name="openapi-version-2"></a><a name="open-api-v2"> </a>OpenAPI версия 2

-   Поддерживается только формат JSON.

### <a name="openapi-version-3"></a><a name="open-api-v3"> </a>OpenAPI версия 3

-   Если `servers` многие из них указаны, API Management попытается выбрать первый URL HTTPs. Если нет ни одного URL-адреса с протоколом HTTPS, тогда подходит первый URL-адрес с протоколом HTTP. Если нет ни одного URL-адреса с протоколом HTTP, тогда URL-адрес сервера будет пустым.
-   `Examples`не поддерживается, `example` но есть.

## <a name="openapi-import-update-and-export-mechanisms"></a>Механизмы импорта, обновления и экспорта OpenAPI

### <a name="add-new-api-via-openapi-import"></a>Добавление нового API через импорт OpenAPI

Для каждой операции, найденной в документе OpenAPI, будет создана новая `operationId` `summary` операция с именем ресурса Azure и именем отображения, установленным соответственно. `operationId`значение нормализуется в соответствии с правилами, описанными ниже. `summary`значение импортируется как есть и его длина ограничена 300 символов.

Если `operationId` не указано (то есть, `null`не присутствует, или пусто), значение имени ресурса Azure будет `get-foo`создаваться путем объединения метода HTTP и шаблона пути, например,

Если `summary` не указано (то есть, `null`не присутствует, или `display name` `operationId`пустой), значение будет установлено. Если `operationId` не указано, значение имени отображения будет сгенерировано путем объединения метода HTTP и шаблона пути, например, `Get - /foo`.

### <a name="update-an-existing-api-via-openapi-import"></a>Обновление существующего API через импорт OpenAPI

Во время импорта существующий API изменяется в соответствии с API, описанным в документе OpenAPI. Каждая операция в документе OpenAPI сопоставляется `operationId` с существующей операцией, сравнивая ее значение с именем ресурса Azure существующей операции.

При обнаружении совпадения свойства существующей операции будут обновлены «на месте».

Если совпадение не найдено, новая операция будет создана с использованием правил, описанных в разделе выше. Для каждой новой операции импорт будет пытаться копировать политики из существующей операции с тем же методом HTTP и шаблоном пути.

Все существующие непревзойденные операции будут удалены.

Чтобы сделать импорт более предсказуемым, пожалуйста, следуйте следующим рекомендациям:

- Убедитесь в `operationId` том, чтобы указать свойство для каждой операции.
- Воздержитесь `operationId` от изменения после первоначального импорта.
- Никогда `operationId` не меняйте метод или шаблон HTTP одновременно.

### <a name="export-api-as-openapi"></a>Экспортный API как OpenAPI

Для каждой операции название ресурса Azure `operationId`будет экспортироваться как имя, `summary`а имя дисплея будет экспортироваться как .
Правила нормализации для operationId

- Преобразовать в нижний регистр.
- Заменить каждую последовательность не-буквенно-цифровых символов с одной тире, например, `GET-/foo/{bar}?buzz={quix}` будет преобразован а. `get-foo-bar-buzz-quix-`
- Обрезка тире с обеих сторон, например, `get-foo-bar-buzz-quix-` станет`get-foo-bar-buzz-quix`
- Truncate, чтобы соответствовать 76 символов, четыре символа меньше, чем максимальный предел для имени ресурса.
- Используйте оставшиеся четыре символа для суффикса deduplication, при необходимости, в виде `-1, -2, ..., -999`.


## <a name="wsdl"></a><a name="wsdl"> </a>WSDL

WSDL файлы используются для создания SOAP сквозной и SOAP-к-REST AIS.

-   **Привязки SOAP.** Поддерживаются только привязки SOAP шифрования типа document или literal. Шифрование SOAP типа rpc не поддерживается.
-   **WSDL:Import**. Этот атрибут не поддерживается. Клиентам следует объединить импортированные элементы в один документ.
-   **Сообщения, состоящие из нескольких частей**. Такие типы сообщений не поддерживаются.
-   **WCF wsHttpBinding**. Службы SOAP, созданные с помощью технологии Windows Communication Foundation, должны использовать basicHttpBinding. Значение wsHttpBinding не поддерживается.
-   **MTOM.** Службы, использующие MTOM, <em>могут</em> работать. Официальная поддержка сейчас не предоставляется.
-   **Рекурсия.** APIM не поддерживает типы, которые определены рекурсивно (например, которые ссылаются на включающий их массив).
-   **Несколько пространств имен.** В схеме можно использовать несколько пространство имен, но для определения частей сообщений можно использовать только целевое пространство имен. Пространства имен, кроме целевого, которые используются для определения других элементов ввода или вывода, не сохраняются. Хотя и можно импортировать такой WSDL-документ, для экспорта всех частей сообщений будет использоваться целевое пространство имен WSDL.
-   **Arrays** - преобразование SOAP-to-REST поддерживает только завернутые массивы, показанные в приведенном ниже примере:

```xml
    <complexType name="arrayTypeName">
        <sequence>
            <element name="arrayElementValue" type="arrayElementType" minOccurs="0" maxOccurs="unbounded"/>
        </sequence>
    </complexType>
    <complexType name="typeName">
        <sequence>
            <element name="element1" type="someTypeName" minOccurs="1" maxOccurs="1"/>
            <element name="element2" type="someOtherTypeName" minOccurs="0" maxOccurs="1" nillable="true"/>
            <element name="arrayElement" type="arrayTypeName" minOccurs="1" maxOccurs="1"/>
        </sequence>
    </complexType>
```

## <a name="wadl"></a><a name="wadl"> </a>WADL

У нас нет сведений о проблемах импорта с помощью формата WADL.
