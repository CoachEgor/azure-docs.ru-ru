---
title: Обновление и масштабирование экземпляра службы управления API Azure | Документация Майкрософт
description: В этой статье описано, как обновлять и масштабировать экземпляры службы управления API Azure.
services: api-management
documentationcenter: ''
author: mikebudzynski
manager: anneta
editor: ''
ms.service: api-management
ms.workload: integration
ms.topic: article
ms.date: 08/18/2018
ms.author: apimpm
ms.openlocfilehash: 64649c86dbd3c3469247308bfc4dd0ed12e06949
ms.sourcegitcommit: 3f78a6ffee0b83788d554959db7efc5d00130376
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2019
ms.locfileid: "70018241"
---
# <a name="upgrade-and-scale-an-azure-api-management-instance"></a>Обновление и масштабирование экземпляра управления API Azure  

Клиенты могут масштабировать экземпляр управления API Azure (APIM), добавляя или удаляя единицы. **Единицы** состоят из выделенных ресурсов Azure c определенной способностью выдерживать нагрузку, представленную числом вызовов API в месяц. Это число никак не связано с предельным числом вызовов, а представляет собой допустимое значение максимальной пропускной способности при предварительном планировании ресурсов. Фактическая пропускная способность и задержка могут сильно отличаться в зависимости от многих факторов, включая число и частоту параллельных подключений, виды и число настроенных политик, размеры запросов и ответов, а также задержку серверной части.

Емкость и цена каждой единицы зависят от **уровня**, на котором существует эта единица. Вы можете выбрать один из четырех уровней: **Developer**, **Basic**, **Standard** и **Premium**. Если вы хотите увеличить производительность службы, не изменяя уровень, добавьте новую единицу. Если выбранный уровень экземпляра APIM уже не позволяет добавлять единицы, необходимо обновить его до более высокого уровня.

Цена каждой единицы и доступные функции (например, развертывания в нескольких регионах) зависят от уровня, который вы выбрали для конкретного экземпляра службы управления API. В [этой статье](https://azure.microsoft.com/pricing/details/api-management/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio) указаны цены за единицу и описаны доступные функции для каждого уровня. 

>[!NOTE]
>В [этой статье](https://azure.microsoft.com/pricing/details/api-management/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio) представлены примерные данные о производительности единиц для каждого уровня. Чтобы получить более точные сведения, изучите приближенный к реальному сценарий использования API. См. статью о [емкости экземпляра службы Azure "Управление API"](api-management-capacity.md).

## <a name="prerequisites"></a>Предварительные требования

Чтобы выполнить шаги из этой статьи, понадобится следующее:

+ Активная подписка Azure.

    [!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

+ Экземпляр APIM. Дополнительные сведения см. в статье о [создании экземпляра управления API Azure](get-started-create-service-instance.md).

+ Понимание концепции [емкости экземпляра службы управления API Azure](api-management-capacity.md).

[!INCLUDE [premium-dev-standard-basic.md](../../includes/api-management-availability-premium-dev-standard-basic.md)]

## <a name="upgrade-and-scale"></a>Обновление и масштабирование  

Вы можете выбрать один из четырех уровней: **Developer**, **Basic**, **Standard** и **Premium**. Уровень **Developer** предназначен только для оценки службы. Не используйте его в рабочей среде. Уровень **Developer** не предусматривает соглашение об уровне обслуживания и не поддерживает масштабирование (не позволяет добавлять или удалять единицы). 

Уровни **Базовый**, **Стандартный** и **Премиум** предназначены для рабочей среды и поддерживают соглашение об уровне обслуживания и масштабирование. Уровень **Базовый** является наиболее дешевым уровнем с соглашением об уровне обслуживания, он может масштабироваться до двух единиц. Уровень **Стандартный** может масштабироваться до четырех единиц. На уровне **Premium** вы можете добавлять неограниченное число единиц.

Уровень **Премиум** позволяет распределить один экземпляр управления API Azure между любым числом регионов Azure на выбор. Экземпляр создаваемой службы управления API Azure содержит только одну единицу. Он размещается в одном регионе Azure. Этот начальной регион считается для экземпляра **основным** регионом. Вы можете легко добавить дополнительные регионы. При добавлении региона укажите число выделяемых для него единиц. Например, вы можете использовать одну единицу в **основном** регионе и пять единиц в любом другом регионе. Можно распределить число единиц с учетом характеристик трафика в каждом регионе. Дополнительные сведения см. в статье [Развертывание экземпляра службы управления Azure API в различных регионах Azure](api-management-howto-deploy-multi-region.md).

Вы всегда можете повысить или понизить уровень в любых комбинациях. Но при этом обратите внимание, что понижение уровня приводит к отключению некоторых возможностей. Например, при понижении уровня с "Премиум" до "Стандартный" или "Базовый" станут недоступны виртуальные сети или развертывание в нескольких регионах.

> [!NOTE]
> Процесс обновления или масштабирования может занять от 15 до 45 минут. По завершении вы получите соответствующее извещение.

> [!NOTE]
> Служба управления API на уровне **потребления** масштабируется автоматически на основе трафика.

## <a name="use-the-azure-portal-to-upgrade-and-scale"></a>Использование портала Azure для обновления и масштабирования

![Масштабирование APIM на портале Azure](./media/upgrade-and-scale/portal-scale.png)

1. Перейдите к экземпляру APIM на [портале Azure](https://portal.azure.com/).
2. Выберите в меню **Масштабирование и цены**.
3. Выберите нужный уровень.
4. Укажите число **единиц**, которое нужно добавить. Для этого можно передвинуть ползунок или ввести число.  
    Если выбран уровень **Премиум**, следует также выбрать регион.
5. Нажмите кнопку **Save**(Сохранить).

## <a name="downtime-during-scaling-up-and-down"></a>Время простоя при масштабировании вверх и вниз
При масштабировании от или до уровня разработчика будет просто. В противном случае время простоя отсутствует. 


## <a name="next-steps"></a>Следующие шаги

- [Развертывание экземпляра службы управления Azure API в различных регионах Azure](api-management-howto-deploy-multi-region.md)
- [Автоматическое масштабирование экземпляра службы управления API Azure](api-management-howto-autoscale.md)
