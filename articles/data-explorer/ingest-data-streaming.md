---
title: Используйте потоковое проглатывание для поимки данных в Azure Data Explorer
description: Узнайте о том, как глотать (загружать) данные в Azure Data Explorer с помощью потокового приема.
author: orspod
ms.author: orspodek
ms.reviewer: tzgitlin
ms.service: data-explorer
ms.topic: conceptual
ms.date: 08/30/2019
ms.openlocfilehash: d7d2bcf487c37fbb523b648d5aa4c572add5dfa9
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79297090"
---
# <a name="streaming-ingestion-preview"></a>Потоковая передача (Предварительный просмотр)

Используйте потоковую проглатку, когда требуется низкая задержка со временем приема менее 10 секунд для различных объемов данных. Он используется для оптимизации оперативной обработки многих таблиц в одной или нескольких базах данных, где поток данных в каждую таблицу относительно мал (несколько записей в секунду), но общий объем приема данных высок (тысячи записей в секунду). 

Используйте оптовую проглатку вместо потокового приема, когда объем данных увеличивается до более чем 1 МБ в секунду в таблице. Ознакомьтесь с [обзором приема данных,](/azure/data-explorer/ingest-data-overview) чтобы узнать больше о различных методах приема.

## <a name="prerequisites"></a>Предварительные требования

* Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/) Azure, прежде чем начинать работу.
* Войти на [веб-ui](https://dataexplorer.azure.com/).
* Создание [кластера и базы данных Azure Data Explorer](create-cluster-database-portal.md)

## <a name="enable-streaming-ingestion-on-your-cluster"></a>Включить потоковое проглатывание в кластере

> [!WARNING]
> Пожалуйста, просмотрите [ограничения](#limitations) до включения в проглатывание.

1. На портале Azure перейдите к кластеру Azure Data Explorer. В **настройках**выберите **Конфигурации.** 
1. В панели **конфигураций** выберите **On,** чтобы включить **потоковое проглатывание.**
1. Нажмите кнопку **Сохранить**.
 
    ![потоковое проглатывание на](media/ingest-data-streaming/streaming-ingestion-on.png)
 
1. В [веб-мине](https://dataexplorer.azure.com/)определяют [политику потокового приема в](/azure/kusto/management/streamingingestionpolicy) таблице (ы) или базе данных (ы), которая будет получать потоковые данные. 

    > [!NOTE]
    > * Если политика определена на уровне базы данных, все таблицы в базе данных включены для потокового приема.
    > * Прикладная политика может ссылаться только на вновь пронизанные данные, а не на другие таблицы в базе данных.

## <a name="use-streaming-ingestion-to-ingest-data-to-your-cluster"></a>Используйте потоковое проглатывание для поимки данных в кластер

Существует два поддерживаемых типа потокового приема:


* [**Концентратор событий**](/azure/data-explorer/ingest-data-event-hub), который используется в качестве источника данных
* **Пользовательский прием** требует написания приложения, использующее одну из клиентских библиотек Azure Data Explorer. Просмотрите [образец потокового приема](https://github.com/Azure/azure-kusto-samples-dotnet/tree/master/client/StreamingIngestionSample) для примера приложения.

### <a name="choose-the-appropriate-streaming-ingestion-type"></a>Выберите подходящий тип потоковой передачи

|   |Концентратор событий  |Пользовательские приема  |
|---------|---------|---------|
|Задержка данных между инициацией приема и данными, доступными для запроса   |    Более длительная задержка     |   Более короткая задержка      |
|Накладные расходы на разработку    |   Быстрая и простая настройка, без накладных расходов на разработку    |   Высокие накладные расходы на разработку приложений для обработки ошибок и обеспечения согласованности данных     |

## <a name="disable-streaming-ingestion-on-your-cluster"></a>Отключить потоковое проглатывание в кластере

> [!WARNING]
> Отключение потокового приема может занять несколько часов.

1. Удаление [политики потокового приема](/azure/kusto/management/streamingingestionpolicy) из всех соответствующих таблиц и баз данных. Удаление политики потокового приема вызывает потоковое перемещение данных от первоначального хранилища к постоянному хранилищу в хранилище столбцов (объемы или осколки). Движение данных может длиться от нескольких секунд до нескольких часов, в зависимости от объема данных в исходном хранилище, и как процессор и память используется кластером.
1. На портале Azure перейдите к кластеру Azure Data Explorer. В **настройках**выберите **Конфигурации.** 
1. В панели **конфигураций** выберите **Off,** чтобы отключить **потоковое проглатвание.**
1. Нажмите кнопку **Сохранить**.

    ![Потоковая передача с](media/ingest-data-streaming/streaming-ingestion-off.png)

## <a name="limitations"></a>Ограничения

* Потоковая передача не поддерживает [курсоры базы данных](/azure/kusto/management/databasecursor) или [отображение данных.](/azure/kusto/management/mappings) Поддерживается только [предварительно созданное](/azure/kusto/management/create-ingestion-mapping-command) картирование данных. 
* Потоковая производительность и весы емкости с увеличенными размерами VM и кластера. Одновременное проемное только шесть глотая на сердцевину. Например, для 16 основных Sk-Кус, таких как D14 и L16, максимальная поддерживаемая нагрузка составляет 96 одновременных проглотаций. Для двух основных SkUS, таких как D11, максимальная поддерживаемая нагрузка составляет 12 одновременных проглотаций.
* Ограничение размера данных на запрос на проглатывание составляет 4 МБ.
* Обновления схемы, такие как создание и модификация таблиц и карт опропающих данных, могут занять до пяти минут для потокового сервиса приема.
* Включение потокового приема в кластере, даже если данные не попадает через потоковое, использует часть локального SSD-диска кластерных машин для потоковой передачи данных и уменьшает хранение, доступное для горячего кэша.
* [Повмения не](/azure/kusto/management/extents-overview#extent-tagging) могут быть установлены на данных потокового приема.

## <a name="next-steps"></a>Дальнейшие действия

* [Данные запросов в Azure Data Explorer](web-query-data.md)
