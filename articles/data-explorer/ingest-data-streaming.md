---
title: Использование приема потоковой передачи для приема данных в Azure обозреватель данных
description: Узнайте, как принимать (загружать) данные в Azure обозреватель данных с помощью приема потоковой передачи.
author: orspod
ms.author: orspodek
ms.reviewer: tzgitlin
ms.service: data-explorer
ms.topic: conceptual
ms.date: 08/30/2019
ms.openlocfilehash: 4f9804ed0e7d6c83a4f6fc732f836fcecce1c2e7
ms.sourcegitcommit: a678f00c020f50efa9178392cd0f1ac34a86b767
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2019
ms.locfileid: "74548336"
---
# <a name="streaming-ingestion-preview"></a>Прием потоковой передачи (Предварительная версия)

Прием потоковой передачи предназначен для сценариев, требующих низкой задержки с временем приема менее 10 секунд для различных данных тома. Он используется для оптимизации операционной обработки многих таблиц в одной или нескольких базах данных, в которых поток данных в каждой таблице сравнительно мал (небольшое число записей в секунду), но общий объем приема данных — высокий (тысячи записей в секунду).

Используйте классический (массовый) прием вместо приема потоковой передачи, когда объем данных увеличивается более чем на 1 МБ в секунду на таблицу. Ознакомьтесь с [обзором приема данных](/azure/data-explorer/ingest-data-overview) для получения дополнительных сведений о различных методах приема.

> [!NOTE]
> Прием потоковой передачи не поддерживает следующие функции:
> * [Курсоры базы данных](/azure/kusto/management/databasecursor).
> * [Сопоставление данных](/azure/kusto/management/mappings). Поддерживается только [предварительно созданное](/azure/kusto/management/tables#create-ingestion-mapping) сопоставление данных. 

## <a name="prerequisites"></a>Предварительные требования

* Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.
* Войдите в [веб-интерфейс](https://dataexplorer.azure.com/).
* Создание [кластера Azure обозреватель данных и базы данных](create-cluster-database-portal.md)

## <a name="enable-streaming-ingestion-on-your-cluster"></a>Включение приема потоковой передачи в кластере

1. На портале Azure перейдите к кластеру Azure Data Explorer. В окне **Параметры**выберите **конфигурации**. 
1. В области **конфигурации** выберите **вкл** ., чтобы включить прием **потоковой передачи**.
1. Щелкните **Сохранить**.
 
    ![прием потоковой передачи в](media/ingest-data-streaming/streaming-ingestion-on.png)
 
1. В [пользовательском веб-интерфейсе](https://dataexplorer.azure.com/)Определите [политику приема потоковой передачи](/azure/kusto/concepts/streamingingestionpolicy) для таблиц или баз данных, которые будут получать потоковые данные. 

    > [!NOTE]
    > * Если политика определена на уровне базы данных, то все таблицы в базе данных будут включены для приема потоковой передачи.
    > * Примененная политика может ссылаться только на новые принимаемые данные, а не на другие таблицы в базе данных.

## <a name="use-streaming-ingestion-to-ingest-data-to-your-cluster"></a>Использование приема потоковой передачи для приема данных в кластере

Существует два поддерживаемых типа приема потоковой передачи:

* [Концентратор событий](/azure/data-explorer/ingest-data-event-hub) , используемый в качестве источника данных
* Для пользовательского приема требуется написать приложение, использующее одну из клиентских библиотек Azure обозреватель данных. Пример приложения см. в разделе [Пример приема потоковой передачи](https://github.com/Azure/azure-kusto-samples-dotnet/tree/master/client/StreamingIngestionSample) .

### <a name="choose-the-appropriate-streaming-ingestion-type"></a>Выбор соответствующего типа приема потоковой передачи

|   |Концентратор событий  |Пользовательское получение  |
|---------|---------|---------|
|Задержка данных между инициацией приема и данными, доступными для запроса   |    более длительная задержка     |   короткая задержка      |
|Затраты на разработку    |   Быстрая и простая настройка, без дополнительных затрат на разработку    |   высокая нагрузка на разработку приложений для управления ошибками и обеспечения согласованности данных     |

## <a name="disable-streaming-ingestion-on-your-cluster"></a>Отключение приема потоковой передачи в кластере

> [!WARNING]
> Отключение приема потоковой передачи может занять несколько часов.

1. Удаление [политики приема потоковой передачи](/azure/kusto/concepts/streamingingestionpolicy) из всех соответствующих таблиц и баз данных. Удаление политики приема потоковой передачи активирует перемещение данных приема потоковой передачи из первоначального хранилища в постоянное хранилище в хранилище столбцов (экстентов или сегментов). Перемещение данных может осуществляться между несколькими секундами до нескольких часов, в зависимости от объема данных в первоначальном хранилище и загрузки ЦП и памяти кластера.
1. На портале Azure перейдите к кластеру Azure Data Explorer. В окне **Параметры**выберите **конфигурации**. 
1. В области **конфигурации** выберите **выкл** ., чтобы отключить прием **потоковой передачи**.
1. Щелкните **Сохранить**.

    ![Прием потоковой передачи выкл.](media/ingest-data-streaming/streaming-ingestion-off.png)

## <a name="limitations"></a>Ограничения

* Производительность приема потоковой передачи и масштабирование емкости с увеличением размера виртуальной машины и кластера. Параллельные приемы ограничены 6 приема на ядро. Например, для 16 основных SKU, таких как D14 и L16, максимальный поддерживаемый объем нагрузки составляет 96 параллельных приемов. Для 2 основных SKU, например D11, максимальная поддерживаемая нагрузка составляет 12 параллельных приемов.
* Ограничение на размер данных для запроса приема — 4 МБ.
* Обновления схемы, такие как создание и изменение таблиц и сопоставлений приема, могут занять до 5 минут для службы приема потоковой передачи.
* Включение приема потоковой передачи в кластере, даже если данные не принимаются через потоковую передачу, использует часть локального диска SSD компьютеров кластера для данных приема потоковой передачи и сокращает объем хранилища, доступного для оперативного кэша.

## <a name="next-steps"></a>Следующие шаги

* [Запрос данных в обозреватель данных Azure](web-query-data.md)
