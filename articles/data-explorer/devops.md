---
title: Задача DevOps в Azure для обозревателя данных Azure
description: В этом разделе вы узнаете, как создать конвейер выпуска и развертывание
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: jasonh
ms.service: data-explorer
ms.topic: conceptual
ms.date: 05/05/2019
ms.openlocfilehash: a70a887ccb19d9c1cbdb5f8ebf6aa8d4b25a0dfd
ms.sourcegitcommit: f6ba5c5a4b1ec4e35c41a4e799fb669ad5099522
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65161075"
---
# <a name="azure-devops-task-for-azure-data-explorer"></a>Задача DevOps в Azure для обозревателя данных Azure

[Службы Azure DevOps](https://azure.microsoft.com/services/devops/) предоставляет средства совместной работы, такие как конвейеры высокой производительности, бесплатные частные репозитории Git, настраиваемые канбан-доски и расширенные возможности подготовки автоматические, так и непрерывных тестирования разработки. [Azure конвейеры](https://azure.microsoft.com/services/devops/pipelines/) — это функция Azure DevOps, позволяет управлять CI/CD для развертывания кода с помощью высокопроизводительных конвейеров, которые работают с любой язык, платформу и облака.
[Обозреватель данных Azure — администратор команды](https://marketplace.visualstudio.com/items?itemName=Azure-Kusto.PublishToADX) является конвейеры Azure задачу, которая позволяет создавать конвейеры выпуска и развертывание базы данных изменения в базах данных обозреватель данных Azure. Она доступна бесплатно в [Visual Studio Marketplace](https://marketplace.visualstudio.com/).

В этом документе описывается простой пример использования **обозреватель данных Azure — администратор команды** задач для развертывания схемы изменения в базе данных. Полный конвейеры CI/CD, см. в разделе [документации Azure DevOps](/azure/devops/user-guide/what-is-azure-devops?view=azure-devops#vsts).

## <a name="prerequisites"></a>Технические условия

* Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/) Azure, прежде чем начинать работу.
* Настройка кластера обозревателя данных Azure:
    * [Кластера обозреватель данных Azure и базы данных](/azure/data-explorer/create-cluster-database-portal)
    * Создание приложения Azure Active Directory (Azure AD) с [подготовки для приложения Azure AD](/azure/kusto/management/access-control/how-to-provision-aad-app).
    * Предоставить доступ к приложению Azure AD для базы данных, обозреватель данных Azure [управлении разрешениями базы данных Azure Data Explorer](/azure/data-explorer/manage-database-permissions).
* Настройка Azure DevOps:
    * [Зарегистрируйтесь для бесплатной организации](/azure/devops/user-guide/sign-up-invite-teammates?view=azure-devops)
    * [Создать организацию](/azure/devops/organizations/accounts/create-organization?view=azure-devops)
    * [Создание проекта в Azure DevOps](/azure/devops/organizations/projects/create-project?view=azure-devops)
    * [Код с помощью Git](/azure/devops/user-guide/code-with-git?view=azure-devops)

## <a name="create-folders"></a>Создайте папки:

Создайте следующие папки образца (*функции*, *политики*, *таблиц*) в репозитории Git. Скопируйте файлы из [здесь](https://github.com/Azure/azure-kusto-docs-samples/tree/master/DevOps_release_pipeline) в соответствующих папках материал ниже и фиксации изменений. Образцы файлов, позволяющих выполнить приведенный ниже рабочий процесс.

![Создайте папки:](media/devops/create-folders.png)

> [!TIP]
> При создании собственного рабочего процесса, рекомендуется выровнять идемпотентными вашего кода. Например, использовать [слияния при создании таблицы](/azure/kusto/management/tables#create-merge-tables) вместо [при создании таблицы](/azure/kusto/management/tables#create-table)и использовать [при создании или alter](/azure/kusto/management/functions#create-or-alter-function) вместо функции [при создании](/azure/kusto/management/functions#create-function) функция.

## <a name="create-a-release-pipeline"></a>Создание конвейера выпуска

1. Войдите в ваш [Azure DevOps организации](https://dev.azure.com/).
1. Выберите **конвейеры** > **выпуски** меню слева и выберите **новый конвейер**.

    ![Новый конвейер](media/devops/new-pipeline.png)

1. **Создать конвейер выпуска** откроется окно. В **конвейеры** на вкладке **выберите шаблон** области, выберите **пустой задания**.

     ![Выберите шаблон](media/devops/select-template.png)

1. Выберите **этап** кнопки. В **этап** панели, добавить **имя этапа**. Выберите **Сохранить** сохранить свой конвейер.

    ![Имя рабочей области](media/devops/stage-name.png)

1. Выберите **Добавление артефакта** кнопки. В **Добавление артефакта** области выберите репозиторий, где существует код, введите соответствующую информацию и нажмите кнопку **добавить**. Выберите **Сохранить** сохранить свой конвейер.

    ![Добавление артефакта](media/devops/add-artifact.png)

1. В **переменных** выберите **+ добавить** для создания переменной для **URL-адрес конечной точки** , будет использоваться в задаче. Запись **имя** и **значение** конечной точки. Выберите **Сохранить** сохранить свой конвейер. 

    ![Создание переменной](media/devops/create-variable.png)

    Чтобы найти ваш Endpoint_URL, на странице общих сведений вашей **кластера обозревателя данных Azure** в Azure портал содержит URI кластера обозреватель данных Azure. Формирование URI в следующем формате `https://<Azure Data Explorer cluster URI>?DatabaseName=<DBName>`.  Например https://kustodocs.westus.kusto.windows.net?DatabaseName=SampleDB.

    ![URI кластера Azure обозреватель данных](media/devops/adx-cluster-uri.png)

## <a name="create-tasks-to-deploy"></a>Создание задач для развертывания

1. В **конвейера** , щелкните на **задания 1, 0 задача** для добавления задач. 

    ![Добавление задач](media/devops/add-task.png)

1. Создайте три задачи, чтобы развернуть **таблиц**, **функции**, и **политики**, в следующем порядке. 

1. В **задачи** выберите **+** по **задание агента**. Найдите **Azure Data Explorer**. В **Marketplace**, установить **обозреватель данных Azure — администратор команды** расширения. Выберите **добавить** в **выполнить команду Обозреватель данных Azure**.

     ![Добавить администратора команды](media/devops/add-admin-commands.png)

1. Щелкните **Kusto команда** слева, а обновление задач со следующими сведениями:
    * **Отображаемое имя**. Имя задачи
    * **Путь к файлу**: В **таблиц** задач, укажите */Tables/*.csl, так как файлы создания таблицы находятся в *таблицы* папки.
    * **URL-адрес конечной точки**: введите `EndPoint URL`переменной, созданной на предыдущем шаге.
    * Выберите **используемой конечной точки службы** и выберите **+ создать**.

    ![Обновление задачи команды Kusto](media/devops/kusto-command-task.png)

1. Введите следующую информацию в **добавить обозреватель данных Azure подключение к службе** окна:

    |Параметр  |Предлагаемое значение  |
    |---------|---------|
    |**Имя подключения**     |    Введите имя для идентификации этой конечной точки службы     |
    |**URL-адрес кластера**    |    Значение можно найти в разделе "Обзор" кластера обозревателя данных Azure на портале Azure | 
    |**Идентификатор субъекта-службы**    |    Введите идентификатор приложения AAD (созданные в качестве обязательного компонента)     |
    |**Ключ субъекта-службы приложения**     |    Введите ключ приложения AAD (созданные в качестве обязательного компонента)    |
    |**Идентификатор клиента AAD**    |      Введите клиенте AAD (например, microsoft.com, contoso.com...)    |

    Выберите **разрешить все конвейеры использовать это подключение** флажок. Нажмите кнопку **ОК**.

    ![Добавление подключения к службе](media/devops/add-service-connection.png)

1. Повторите шаги 1 – 5 другой два раза больше для развертывания файлов из *функции* и *политики* папки. Щелкните **Сохранить**. В **задачи** вкладке, см. в разделе три задачи, созданные: **Развертывание таблицы**, **развертывание функций**, и **развертывание политик**.

    ![Развернуть все папки](media/devops/deploy-all-folders.png)

1. Выберите **+ выпуск** > **Создание выпуска** для создания выпуска.

    ![Создание выпуска](media/devops/create-release.png)

1. В **журналы** вкладке, проверьте состояние развертывания выполнена успешно.

    ![Развертывание выполнено успешно](media/devops/deployment-successful.png)

Создание конвейера выпуска для развертывания из трех задач для подготовительной завершена.