---
title: Копирование данных из фабрики данных Azure в обозреватель данных Azure
description: В этом разделе вы узнаете, как прием данных (загрузка) в обозреватель данных Azure с помощью средства копирования фабрики данных Azure
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: jasonh
ms.service: data-explorer
ms.topic: conceptual
ms.date: 04/15/2019
ms.openlocfilehash: 64856d53168a7676cf279da2d8675ce81e1985f7
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60447974"
---
# <a name="copy-data-to-azure-data-explorer-using-azure-data-factory"></a>Копирование данных в обозреватель данных Azure с помощью фабрики данных Azure 

Обозреватель данных Azure — это служба аналитики быстрое, полностью управляемое данных для анализа в режиме реального времени на больших объемов данных, потоковая передача из многих источников, таких как приложения, веб-сайтов и устройств Интернета вещей. Итеративно изучения данных и определения шаблонов и аномалий, чтобы улучшить качество продуктов, расширить возможности клиентов, наблюдение за устройствами и повышать операций. Исследуйте новые вопросы и получайте ответы на них за считаные минуты. Фабрика данных Azure — это полностью управляемая облачная служба интеграции данных. Службу можно использовать для заполнения базы данных Azure Data Explorer данными из имеющейся системы и сэкономить время при построении решений аналитики.

Фабрика данных Azure предоставляет следующие преимущества загрузки данных в обозреватель данных Azure:

* **Простота настройки**: Интуитивно понятный мастер пять шагов без необходимости создавать сценарии.
* **Поддержка хранилищ данных Rich**: Встроенная поддержка широкий набор локальных и облачных хранилищах. Подробный список см. в таблице [Поддерживаемые хранилища данных и форматы](/azure/data-factory/copy-activity-overview#supported-data-stores-and-formats).
* **Безопасность и соответствие требованиям**: Данные передаются по протоколу HTTPS или ExpressRoute. Наличие глобальной службы гарантирует, что ваши данные никогда не покинут заданных географических границ.
* **Высокая производительность**: До 1 ГБ/с данные ускорить загрузку в обозреватель данных Azure. Дополнительные сведения см. в руководстве [по настройке производительности действия копирования](/azure/data-factory/copy-activity-performance).

В этой статье показано, как использовать средство копирования данных фабрики данных для загрузки данных из Amazon S3 в обозреватель данных Azure. Можно выполнить аналогичные действия для копирования данных из других хранилищ данных, таких как [хранилище BLOB-объектов](/azure/data-factory/connector-azure-blob-storage), [базы данных SQL Azure](/azure/data-factory/connector-azure-sql-database), [хранилище данных SQL Azure](/azure/data-factory/connector-azure-sql-data-warehouse), [Google BigQuery](/azure/data-factory/connector-google-bigquery),[Oracle](/azure/data-factory/connector-oracle), и [файловая система](/azure/data-factory/connector-file-system).

## <a name="prerequisites"></a>Технические условия

* Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/) Azure, прежде чем начинать работу.
* [Обозреватель данных Azure кластера и базы данных](create-cluster-database-portal.md)
* Источник данных.

## <a name="create-a-data-factory"></a>Создание фабрики данных

1. Выберите **создать ресурс** кнопку (+) в левом верхнем углу портала > **Analytics** > **фабрики данных**.

   ![Создание фабрики данных](media/data-factory-load-data/create-adf.png)

1. В **новая фабрика данных** странице, укажите значения для следующих полей, а затем выберите **создать**.

    ![Страница "Новая фабрика данных"](media/data-factory-load-data/my-new-data-factory.png)

    **Параметр**  | **Описание поля**
    |---|---|
    | **Имя** | Введите глобальное уникальное имя для своей фабрики данных. Если возникает ошибка *«имя фабрики данных \"LoadADXDemo\" недоступен»*, введите другое имя фабрики данных. Правила именования артефактов фабрики данных, см. в разделе [правила именования для фабрики данных](/azure/data-factory/naming-rules).|
    | **Подписка** | Выберите подписку Azure, в рамках которой нужно создать фабрику данных. |
    | **Группа ресурсов** | Выберите **создать** и введите имя новой группы ресурсов. Выберите **использовать существующий**, если у вас есть существующая группа ресурсов. |
    | **Версия** | Выберите **V2**. |
    | **Местоположение.** | Укажите расположение фабрики данных. В раскрывающемся списке отображаются только поддерживаемые расположения. Хранилища данных, используемые фабрикой данных может находиться в других расположениях или регионах. |
    | | |

1. Установите флажок уведомления на панели инструментов, чтобы отслеживать процесс создания. После завершения создания перейдите к фабрики данных, которую вы создали. **Фабрики данных** откроется домашняя страница.

   ![Домашняя страница фабрики данных](media/data-factory-load-data/data-factory-home-page.png)

1. Выберите **Создание и мониторинг** плитку, чтобы запустить приложение на отдельной вкладке.

## <a name="load-data-into-azure-data-explorer"></a>Загрузка данных в обозреватель данных Azure

Данные могут быть загружены из многих типов [хранилищ данных](/azure/data-factory/copy-activity-overview#supported-data-stores-and-formats) в обозреватель данных Azure. В этом разделе описана загрузка данных из Amazon S3.

Существует два способа для загрузки данных в обозреватель данных Azure с помощью фабрики данных Azure:

* Azure пользовательский интерфейс фабрики данных — [ **автор** вкладку](/azure/data-factory/quickstart-create-data-factory-portal#create-a-data-factory)
* [Фабрика данных Azure **копирования данных** средство](/azure/data-factory/quickstart-create-data-factory-copy-data-tool) используемые в этой статье.

### <a name="copy-data-from-amazon-s3-source"></a>Копирование данных из Amazon S3 (источник)

1. В **приступим к работе** выберите **копирования данных** плитку, чтобы запустить средство копирования данных.

   ![Плитка средства копирования данных](media/data-factory-load-data/copy-data-tool-tile.png)

1. В **свойства** , определите **имя задачи** и выберите **Далее**.

    ![Копирование из свойства источника](media/data-factory-load-data/copy-from-source.png)

1. В **исходного хранилища данных** щелкните **+ создать новое соединение**.

    ![Источник данных создание подключения](media/data-factory-load-data/source-create-connection.png)

1. Выберите **Amazon S3**, а затем выберите **продолжить**

    ![Новая связанная служба](media/data-factory-load-data/amazons3-select-new-linked-service.png)

1. В **новая связанная служба (Amazon S3)** выполните следующие действия:

    ![Укажите связанная служба Amazon S3](media/data-factory-load-data/amazons3-new-linked-service-properties.png)

    * Укажите **имя** вашей новой связанной службы.
    * Выберите **подключиться через среду выполнения интеграции** значение из раскрывающегося списка.
    * Укажите **идентификатор ключа доступа**.
    * Укажите **секретный ключ доступа**.
    * Выберите **проверить подключение** для проверки подключения связанной службы, вы создали.
    * Выберите **Готово**.

1. В **исходного хранилища данных** страницы, вы увидите новое подключение AmazonS31. Щелкните **Далее**.

   ![Хранилища для создания соединения с источником данных](media/data-factory-load-data/source-data-store-created-connection.png)

1. В **Выбор входного файла или папки** страницы:

    1. Найдите папку или файл, который требуется скопировать. Выберите папку или файл.
    1. Выберите поведение копирования, при необходимости. Сохранить **двоичное копирование** флажок снят.
    1. Щелкните **Далее**.

    ![Выбор файла или папки входных данных](media/data-factory-load-data/source-choose-input-file.png)

1. В **форматы файлов параметров** страницы выберите соответствующие параметры для файла и нажмите кнопку **Далее**.

   ![Выбор файла или папки входных данных](media/data-factory-load-data/source-file-format-settings.png)

### <a name="copy-data-into-azure-data-explorer-destination"></a>Копирование данных в обозреватель данных Azure (назначение)

Новая связанная служба по Azure обозреватель данных создается для копирования данных в целевую таблицу обозреватель данных Azure (приемник), указанных ниже.

1. В **целевое хранилище данных** странице, можно использовать существующие данные подключения к хранилищу или указать новое хранилище данных, щелкнув **+ создать новое соединение**.

    ![Страница целевого хранилища данных](media/data-factory-load-data/destination-create-connection.png)

1. В **новая связанная служба** выберите **обозреватель данных Azure**, а затем выберите **продолжить**

    ![Выберите обозреватель данных Azure — новая связанная служба](media/data-factory-load-data/adx-select-new-linked-service.png)

1. В **новая связанная служба (обозреватель данных Azure)** выполните следующие действия:

    ![Новая связанная служба ADX](media/data-factory-load-data/adx-new-linked-service.png)

   * Выберите **имя** обозревателя данных Azure связанной службы.
   * В **метода выбора учетной записи**: 
        * Выберите **подписки Azure из** "переключатель" и выберите ваш **подписки Azure** учетной записи. Выберите ваш **кластера**. Примечание в раскрывающемся списке будут только получение списка кластеров, которые принадлежат пользователю.
        * Можно также выбрать **ввести вручную** кнопку-переключатель, а затем введите ваш **конечной точки**.
    * Укажите **клиента**.
    * Введите **идентификатор субъекта-службы**.
    * Выберите **ключ субъекта-службы** и ввести **ключ субъекта-службы**.
    * Выберите ваш **базы данных** в раскрывающемся меню. Можно также выбрать **изменить** флажок и введите имя базы данных.
    * Выберите **проверить подключение** для проверки подключения связанной службы, вы создали. Если вы можете подключиться к установке, отображается зеленая галочка **подключение выполнено успешно** будет отображаться.
    * Выберите **Готово** для завершения создания связанной службы.

    > [!NOTE]
    > Субъект-служба используется с помощью фабрики данных Azure для доступа к службе обозревателя данных Azure. Для субъекта-службы [Создание субъекта-службы Azure Active Directory (Azure AD)](/azure/azure-stack/azure-stack-create-service-principals#manage-service-principal-for-azure-ad). Не используйте **Azure Key Vault** метод.

1. **Целевое хранилище данных** открывает. Созданное подключение данных обозреватель данных Azure доступна для использования. Выберите **Далее** для настройки подключения.

    ![ADX целевое хранилище данных](media/data-factory-load-data/destination-data-store.png)

1. В **сопоставление таблиц**, задайте имя целевой таблицы и выберите **Далее**.

    ![Сопоставление таблиц набора данных назначения](media/data-factory-load-data/destination-dataset-table-mapping.png)

1. В **сопоставление столбцов** страницы:
    * Первого сопоставления выполняется с помощью ADF согласно [сопоставление схемы фабрики данных AZURE](/azure/data-factory/copy-activity-schema-and-type-mapping)
        * Задайте **сопоставления столбцов** для целевой таблицы фабрики данных Azure. Сопоставление по умолчанию отображается из источника в целевую таблицу фабрики данных AZURE.
        * Снимите флажки для столбцов, которые не нужно определять сопоставление столбцов.
    * Второй сопоставление осуществляется при этом табличные данные принимаются в обозреватель данных Azure. Сопоставление выполняется в соответствии с [CSV сопоставления правил](/azure/kusto/management/mappings#csv-mapping). Обратите внимание, что даже если источник данных не была в формате CSV, ADF преобразования данных в табличном формате, таким образом, сопоставление CSV является только соответствующие сопоставлением на этом этапе.
        * В разделе **свойства приемника обозреватель данных Azure (Kusto)** добавьте соответствующую **приема сопоставление имен** (необязательно). Следовательно, сопоставление столбцов можно использовать.
        * Если **приема сопоставление имен** не указан, порядок сопоставления «именные», определен в **сопоставления столбцов** раздел будет выполняться. В случае сбоя сопоставление «именные» обозреватель данных Azure будет пытаться приема данных в порядке «положение по столбцу» (карты по позиции по умолчанию).
    * Выберите **Далее**

    ![Сопоставление столбцов набора данных назначения](media/data-factory-load-data/destination-dataset-column-mapping.png)

1. На странице **Параметры** :
    * Задайте соответствующие **сбоя допуска**.
    * **Параметры производительности**: Включение промежуточного хранения не применяется. **Дополнительные параметры** включать соображения стоимости. Оставьте значение по умолчанию, если нет конкретных потребностей.
    * Щелкните **Далее**.

    ![Параметры копирования данных](media/data-factory-load-data/copy-data-settings.png)

1. В **Сводка**, проверьте параметры и выберите **Далее**.

    ![Скопировать сводные данные](media/data-factory-load-data/copy-data-summary.png)

1. В **страницу развертывания**:
    * Выберите **монитор** переключиться на **монитор** вкладку и увидеть состояние конвейера (ход выполнения, ошибки и поток данных).
    * Выберите **изменить конвейер** чтобы редактировать связанные службы, наборы данных и конвейеры.
    * Выберите **Готово** задачу завершения копирования данных

    ![Страница развертывания](media/data-factory-load-data/deployment.png)

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения о [соединитель Azure Data Explorer](/azure/data-factory/connector-azure-data-explorer) в фабрике данных Azure.

* Дополнительные сведения об изменении связанных служб, наборов данных и конвейеры в [пользовательский Интерфейс фабрики данных](/azure/data-factory/quickstart-create-data-factory-portal).

* Дополнительные сведения о [запросы обозревателя данных Azure](/azure/data-explorer/web-query-data) для выполнения запросов к данным.
