---
title: Кэш Azure для Redis с помощью частной связи Azure (Предварительная версия)
description: Частная конечная точка Azure — это сетевой интерфейс, который обеспечивает безопасное подключение к кэшу Azure для Redis с помощью частной ссылки Azure. В этой статье вы узнаете, как создать кэш Azure, виртуальную сеть Azure и закрытую конечную точку с помощью портал Azure.
author: curib
ms.author: cauribeg
ms.service: cache
ms.topic: conceptual
ms.date: 09/22/2020
ms.openlocfilehash: 932d138a4b594aa51b73c365cc3e753f49f886f6
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91329015"
---
# <a name="azure-cache-for-redis-with-azure-private-link-public-preview"></a>Кэш Azure для Redis с помощью частной связи Azure (общедоступная Предварительная версия)
В этой статье вы узнаете, как создать виртуальную сеть и кэш Azure для экземпляра Redis с помощью частной конечной точки, используя портал Azure. Вы также узнаете, как добавить частную конечную точку в существующий кэш Azure для экземпляра Redis.

Частная конечная точка Azure — это сетевой интерфейс, который обеспечивает безопасное подключение к кэшу Azure для Redis с помощью частной ссылки Azure. 

## <a name="prerequisites"></a>Предварительные требования
* Подписка Azure. [создайте ее бесплатно](https://azure.microsoft.com/free/)

> [!NOTE]
> В настоящее время эта функция доступна в общедоступной предварительной версии для ограниченных регионов. Если у вас нет возможности создать частную конечную точку, [свяжитесь с нами](mailto:azurecache@microsoft.com). Чтобы использовать частные конечные точки, необходимо создать кэш Azure для экземпляра Redis после 28 июля 2020.
>
> В настоящее время доступны регионы с общедоступной предварительной версией: Западная Центральная часть США, Северо-центральный регион, Запад США, Восточная часть US 2, Норвегия, Восток, Северная Европа, Восточная Азия, Восточная Япония и Центральная Индия.
>

## <a name="create-a-private-endpoint-with-a-new-azure-cache-for-redis-instance"></a>Создание частной конечной точки с новым кэшем Azure для экземпляра Redis 

В этом разделе вы создадите новый кэш Azure для экземпляра Redis с закрытой конечной точкой.

### <a name="create-a-virtual-network"></a>Создание виртуальной сети 

1. Войдите на [портал Azure](https://portal.azure.com) и выберите **Создать ресурс**.

    :::image type="content" source="media/cache-private-link/1-create-resource.png" alt-text="Выберите Создать ресурс.":::

2. На странице **Создание** выберите **сети** и щелкните **Виртуальная сеть**.

3. Нажмите кнопку **Добавить** , чтобы создать виртуальную сеть.

4. В подменю **Создать виртуальную сеть** введите или выберите следующую информацию на вкладке **Основные сведения**:

   | Параметр      | Рекомендуемое значение  | Описание |
   | ------------ |  ------- | -------------------------------------------------- |
   | **Подписка** | Раскройте список и выберите нужную подписку. | Подписка, в которой будет создана эта виртуальная сеть. | 
   | **Группа ресурсов** | Раскройте список и выберите группу ресурсов или нажмите **Создать** и введите имя для новой группы ресурсов. | Имя группы ресурсов, в которой будет создана виртуальная сеть и другие ресурсы. Поместив все ресурсы приложения в одну группу ресурсов, вы сможете легко управлять ими и/или удалить их вместе. | 
   | **Имя** | Введите имя виртуальной сети. | Имя должно начинаться с буквы или цифры, заканчиваться буквой, цифрой или символом подчеркивания и может содержать только буквы, цифры, символы подчеркивания, точки или дефисы. | 
   | **Регион** | Раскрывающийся список и выберите регион. | Выберите [регион](https://azure.microsoft.com/regions/) рядом с другими службами, которые будут использовать виртуальную сеть. |

5. Перейдите на вкладку **IP-адреса** или нажмите кнопку **Далее: IP-адреса** в нижней части страницы.

6. На вкладке **IP-адреса** укажите **адресное пространство IPv4** в виде одного или нескольких префиксов адресов в нотации CIDR (например, 192.168.1.0/24).

7. В разделе **имя подсети**щелкните **по умолчанию** , чтобы изменить свойства подсети.

8. В области **Изменение подсети** укажите **имя** подсети, а также **диапазон адресов подсети**. Диапазон адресов подсети должен быть в нотации CIDR (например, 192.168.1.0/24). Он должен содержаться в адресном пространстве виртуальной сети.

9. Щелкните **Сохранить**.

10. Перейдите на вкладку " **Проверка и создание** " или нажмите кнопку " **проверить и создать** ".

11. Убедитесь, что все сведения указаны правильно, и нажмите кнопку **создать** , чтобы подготавливает виртуальную сеть.

### <a name="create-an-azure-cache-for-redis-instance-with-a-private-endpoint"></a>Создание кэша Azure для экземпляра Redis с закрытой конечной точкой
Чтобы создать экземпляр кэша, выполните следующие действия.

1. Вернитесь на домашнюю страницу портал Azure или откройте меню боковой панели, а затем выберите **создать ресурс**. 
   
1. На странице **Создание** выберите **Базы данных**, а затем **Кэш Azure для Redis**.

    :::image type="content" source="media/cache-private-link/2-select-cache.png" alt-text="Выберите кэш Azure для Redis.":::
   
1. На странице **Новый кэш Redis** настройте параметры для нового кэша.
   
   | Параметр      | Рекомендуемое значение  | Description |
   | ------------ |  ------- | -------------------------------------------------- |
   | **DNS-имя** | Введите глобально уникальное имя | Имя кэша должно быть строкой длиной от 1 до 63 символов и содержать только цифры, буквы и дефисы. Имя должно начинаться и заканчиваться цифрой или буквой и не может содержать более одного дефиса подряд. *Имя узла* для экземпляра кэша получит значение *\<DNS name>.redis.cache.windows.net*. | 
   | **подписка** | Раскройте список и выберите нужную подписку. | В этой подписке будет создан новый экземпляр кэша Redis для Azure. | 
   | **Группа ресурсов** | Раскройте список и выберите группу ресурсов или нажмите **Создать** и введите имя для новой группы ресурсов. | Имя группы ресурсов, в которой будут созданы кэш и другие ресурсы. Поместив все ресурсы приложения в одну группу ресурсов, вы сможете легко управлять ими и/или удалить их вместе. | 
   | **Местоположение** | Откройте список и выберите расположение. | Выберите оптимальный [регион](https://azure.microsoft.com/regions/) для других служб, которые будут использовать кэш. |
   | **Ценовая категория** | Откройте список и выберите [ценовую категорию](https://azure.microsoft.com/pricing/details/cache/). |  Ценовая категория определяет размер, производительность и функции, доступные для кэша. Дополнительные сведения см. в [обзоре предложения "Кэш Redis для Azure"](cache-overview.md). |

1. Перейдите на вкладку " **сеть** " или нажмите кнопку " **сеть** " в нижней части страницы.

1. На вкладке " **сеть** " выберите **Частная конечная точка** для метода подключения.

1. Нажмите кнопку **Добавить** , чтобы создать закрытую конечную точку.

    :::image type="content" source="media/cache-private-link/3-add-private-endpoint.png" alt-text="В области Сетевые подключения добавьте закрытую конечную точку.":::

1. На странице **Создание частной конечной точки** настройте параметры частной конечной точки с помощью виртуальной сети и подсети, созданной в последнем разделе, и нажмите кнопку **ОК**. 

1. Выберите вкладку **Далее: дополнительно** или нажмите кнопку **Далее: дополнительно** в нижней части страницы.

1. На вкладке **Дополнительно** для экземпляра кэша Basic или Standard выберите переключатель включить, если требуется включить порт, отличный от TLS.

1. На вкладке **Дополнительно** для экземпляра кэша уровня "Премиум" настройте параметры для портов, отличных от TLS, кластеризации и сохраняемости данных.


1. Выберите вкладку **следующий: Теги** или нажмите кнопку **Далее: Теги** в нижней части страницы.

1. При необходимости на вкладке **теги** введите имя и значение, если вы хотите классифицировать ресурс. 

1. Выберите  **Review + Create** (Просмотреть и создать). Вы перейдете на вкладку "Проверка и создание", где Azure проверяет конфигурацию.

1. После появления сообщения "Зеленая проверка пройдена" выберите **создать**.

На создание кэша требуется некоторое время. Ход выполнения можно отслеживать на странице **обзора**кэша Azure для Redis   . Если **состояние**   отображается как **работает**, кэш готов к использованию. 
    

## <a name="create-a-private-endpoint-with-an-existing-azure-cache-for-redis-instance"></a>Создание частной конечной точки с существующим кэшем Azure для экземпляра Redis 

В этом разделе вы добавите закрытую конечную точку в существующий кэш Azure для экземпляра Redis. 

### <a name="create-a-virtual-network"></a>Создание виртуальной сети 
Чтобы создать виртуальную сеть, выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com) и выберите **Создать ресурс**.

2. На странице **Создание** выберите **сети** и щелкните **Виртуальная сеть**.

3. Нажмите кнопку **Добавить** , чтобы создать виртуальную сеть.

4. В подменю **Создать виртуальную сеть** введите или выберите следующую информацию на вкладке **Основные сведения**:

   | Параметр      | Рекомендуемое значение  | Описание |
   | ------------ |  ------- | -------------------------------------------------- |
   | **Подписка** | Раскройте список и выберите нужную подписку. | Подписка, в которой будет создана эта виртуальная сеть. | 
   | **Группа ресурсов** | Раскройте список и выберите группу ресурсов или нажмите **Создать** и введите имя для новой группы ресурсов. | Имя группы ресурсов, в которой будет создана виртуальная сеть и другие ресурсы. Поместив все ресурсы приложения в одну группу ресурсов, вы сможете легко управлять ими и/или удалить их вместе. | 
   | **Имя** | Введите имя виртуальной сети. | Имя должно начинаться с буквы или цифры, заканчиваться буквой, цифрой или символом подчеркивания и может содержать только буквы, цифры, символы подчеркивания, точки или дефисы. | 
   | **Регион** | Раскрывающийся список и выберите регион. | Выберите [регион](https://azure.microsoft.com/regions/) рядом с другими службами, которые будут использовать виртуальную сеть. |

5. Перейдите на вкладку **IP-адреса** или нажмите кнопку **Далее: IP-адреса** в нижней части страницы.

6. На вкладке **IP-адреса** укажите **адресное пространство IPv4** в виде одного или нескольких префиксов адресов в нотации CIDR (например, 192.168.1.0/24).

7. В разделе **имя подсети**щелкните **по умолчанию** , чтобы изменить свойства подсети.

8. В области **Изменение подсети** укажите **имя** подсети, а также **диапазон адресов подсети**. Диапазон адресов подсети должен быть в нотации CIDR (например, 192.168.1.0/24). Он должен содержаться в адресном пространстве виртуальной сети.

9. Щелкните **Сохранить**.

10. Перейдите на вкладку " **Проверка и создание** " или нажмите кнопку " **проверить и создать** ".

11. Убедитесь, что все сведения указаны правильно, и нажмите кнопку **создать** , чтобы подготавливает виртуальную сеть.

### <a name="create-a-private-endpoint"></a>Создание частной конечной точки 

Чтобы создать частную конечную точку, выполните следующие действия.

1. В портал Azure найдите **кэш Azure для Redis** и нажмите клавишу ВВОД или выберите его из вариантов поиска.

    :::image type="content" source="media/cache-private-link/4-search-for-cache.png" alt-text="Найдите кэш Azure для Redis.":::

2. Выберите экземпляр кэша, в который нужно добавить закрытую конечную точку.

3. В левой части экрана выберите **(Предварительная версия) частная конечная точка**.

4. Нажмите кнопку **закрытая конечная точка** , чтобы создать закрытую конечную точку.

    :::image type="content" source="media/cache-private-link/5-add-private-endpoint.png" alt-text="Добавьте закрытую конечную точку.":::

5. На **странице Создание частной конечной точки**настройте параметры частной конечной точки.

   | Параметр      | Рекомендуемое значение  | Описание |
   | ------------ |  ------- | -------------------------------------------------- |
   | **Подписка** | Раскройте список и выберите нужную подписку. | Подписка, в которой создается эта частная конечная точка. | 
   | **Группа ресурсов** | Раскройте список и выберите группу ресурсов или нажмите **Создать** и введите имя для новой группы ресурсов. | Имя группы ресурсов, в которой будет создана частная конечная точка и другие ресурсы. Поместив все ресурсы приложения в одну группу ресурсов, вы сможете легко управлять ими и/или удалить их вместе. | 
   | **Имя** | Введите имя частной конечной точки. | Имя должно начинаться с буквы или цифры, заканчиваться буквой, цифрой или символом подчеркивания и может содержать только буквы, цифры, символы подчеркивания, точки или дефисы. | 
   | **Регион** | Раскрывающийся список и выберите регион. | Выберите [регион](https://azure.microsoft.com/regions/) рядом с другими службами, которые будут использовать вашу закрытую конечную точку. |

6. Нажмите кнопку **Далее: ресурс** в нижней части страницы.

7. На вкладке **ресурс** выберите свою подписку, выберите тип ресурса `Microsoft.Cache/Redis` , а затем выберите кэш, к которому нужно подключить закрытую конечную точку.

8. Нажмите кнопку **Далее: Настройка** в нижней части страницы.

9. На вкладке **Конфигурация** выберите виртуальную сеть и подсеть, созданные в предыдущем разделе.

10. Нажмите кнопку **Далее: Теги** в нижней части страницы.

11. При необходимости на вкладке **теги** введите имя и значение, если вы хотите классифицировать ресурс.

12. Выберите  **Review + Create** (Просмотреть и создать). Вы перейдете на вкладку " **Проверка и создание**   ", где Azure проверяет конфигурацию.

13. После появления сообщения "Зеленая **Проверка пройдена** " выберите **создать**.


## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о частной ссылке Azure см. в [документации по частной ссылке Azure](https://docs.microsoft.com/azure/private-link/private-link-overview). 

