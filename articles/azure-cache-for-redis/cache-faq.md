---
title: Часто задаваемые вопросы по поводу кэша Azure для Redis | Документация Майкрософт
description: Ознакомьтесь с ответами на часто задаваемые вопросы, шаблоны и рекомендации для кэша Azure для Redis
services: cache
documentationcenter: ''
author: yegu-ms
manager: jhubbard
editor: ''
ms.assetid: c2c52b7d-b2d1-433a-b635-c20180e5cab2
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache
ms.devlang: na
ms.topic: article
ms.date: 04/29/2019
ms.author: yegu
ms.openlocfilehash: 6b27b27fedf622908fa5c06bd2562d9049a4366b
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "67052059"
---
# <a name="azure-cache-for-redis-faq"></a>Вопросы и ответы по кэшу Azure для Redis
Ответы на часто задаваемые вопросы, шаблоны и рекомендации по поводу кэша Azure для Redis.

## <a name="what-if-my-question-isnt-answered-here"></a>Мне не удалось найти ответ на свой вопрос. Что делать?
Если вашего вопроса нет в списке, сообщите нам об этом, и мы поможем найти ответ.

* Можно опубликовать вопрос в комментариях в конце раздела часто задаваемых вопросов и обсудить данную статью с командой разработчиков кэша Azure и другими участниками сообщества.
* Чтобы охватить большую аудиторию, можно опубликовать вопрос на [форуме MSDN по кэшу Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=azurecache) и обсудить его с командой разработчиков кэша Azure и другими участниками сообщества.
* Если вы хотите сделать запрос на функцию, то можете отправить свои запросы и предложения на [форуме пользователей кэша Azure для Redis](https://feedback.azure.com/forums/169382-cache).
* Можно также [отправить нам внешний отзыв о кэше Azure](mailto:azurecache@microsoft.com)по электронной почте.

## <a name="azure-cache-for-redis-basics"></a>Основные сведения о кэше Azure для Redis
Часто задаваемые вопросы в этом разделе охватывают некоторые основные сведения о кэше Azure для Redis.

* [Что такое кэш Azure для Redis?](#what-is-azure-cache-for-redis)
* [Как мне начать работу с кэшем Azure для Redis?](#how-can-i-get-started-with-azure-cache-for-redis)

Ниже приведены часто задаваемые вопросы об основных понятиях и использовании кэша Azure для Redis, ответы на которые даны в других разделах часто задаваемых вопросов.

* [Какое предложение и размер кэша Azure для Redis мне следует использовать?](#what-azure-cache-for-redis-offering-and-size-should-i-use)
* [Каких клиентов кэша Azure для Redis я могу использовать?](#what-azure-cache-for-redis-clients-can-i-use)
* [Существует ли локальный эмулятор кэша Azure для Redis?](#is-there-a-local-emulator-for-azure-cache-for-redis)
* [Как отслеживать работоспособность и производительность моего кэша?](#how-do-i-monitor-the-health-and-performance-of-my-cache)

## <a name="planning-faqs"></a>Часто задаваемые вопросы о планировании
* [Какое предложение и размер кэша Azure для Redis мне следует использовать?](#what-azure-cache-for-redis-offering-and-size-should-i-use)
* [Производительность кэша Azure для Redis](#azure-cache-for-redis-performance)
* [В каком регионе следует размещать мой кэш?](#in-what-region-should-i-locate-my-cache)
* [Как выставляются счета за использование кэша Azure для Redis?](#how-am-i-billed-for-azure-cache-for-redis)
* [Могу ли я использовать кэш Azure для Redis с облаком Azure для государственных организаций, Microsoft Azure для Китая или Microsoft Azure – Германия?](#can-i-use-azure-cache-for-redis-with-azure-government-cloud-azure-china-cloud-or-microsoft-azure-germany)

## <a name="development-faqs"></a>Часто задаваемые вопросы о разработке
* [Что делают параметры конфигурации StackExchange.Redis?](#what-do-the-stackexchangeredis-configuration-options-do)
* [Каких клиентов кэша Azure для Redis я могу использовать?](#what-azure-cache-for-redis-clients-can-i-use)
* [Существует ли локальный эмулятор кэша Azure для Redis?](#is-there-a-local-emulator-for-azure-cache-for-redis)
* [Как выполнять команды Redis?](#how-can-i-run-redis-commands)
* [Почему в кэше Azure для Redis отсутствует ссылка на библиотеку классов MSDN, как в некоторых других службах Azure?](#why-doesnt-azure-cache-for-redis-have-an-msdn-class-library-reference-like-some-of-the-other-azure-services)
* [Можно ли использовать кэш Azure для Redis как кэш сеанса PHP?](#can-i-use-azure-cache-for-redis-as-a-php-session-cache)
* [Что такое базы данных Redis?](#what-are-redis-databases)

## <a name="security-faqs"></a>Часто задаваемые вопросы о безопасности
* [Когда следует включать порт, не являющийся портом SSL, для подключения к Redis?](#when-should-i-enable-the-non-ssl-port-for-connecting-to-redis)

## <a name="production-faqs"></a>Часто задаваемые вопросы о рабочей среде
* [Какие рекомендации следует учитывать для рабочей среды?](#what-are-some-production-best-practices)
* [Какие факторы следует учитывать при использовании общих команд Redis?](#what-are-some-of-the-considerations-when-using-common-redis-commands)
* [Как измерить и протестировать производительность моего кэша?](#how-can-i-benchmark-and-test-the-performance-of-my-cache)
* [Важные сведения о росте пула потоков ThreadPool](#important-details-about-threadpool-growth)
* [Включение сборки мусора сервера для увеличения пропускной способности на стороне клиента при использовании StackExchange.Redis](#enable-server-gc-to-get-more-throughput-on-the-client-when-using-stackexchangeredis)
* [Рекомендации по производительности для подключений](#performance-considerations-around-connections)

## <a name="monitoring-and-troubleshooting-faqs"></a>Часто задаваемые вопросы о мониторинге и устранении неполадок
Вопросы, обсуждаемые в этом разделе, посвящены общим проблемам мониторинга и устранения неполадок. Дополнительные сведения о мониторинге и устранении неполадок, связанных с экземплярами кэша Azure для Redis, см. в статьях [How to monitor Azure Cache for Redis](cache-how-to-monitor.md) (Как отслеживать кэш Azure для Redis) и [How to troubleshoot Azure Cache for Redis](cache-how-to-troubleshoot.md) (Как устранить проблемы с кэшем Azure для Redis).

* [Как отслеживать работоспособность и производительность моего кэша?](#how-do-i-monitor-the-health-and-performance-of-my-cache)
* [Почему я наблюдаю простои?](#why-am-i-seeing-timeouts)
* [Почему мой клиент был отключен от кэша?](#why-was-my-client-disconnected-from-the-cache)

## <a name="prior-cache-offering-faqs"></a>Часто задаваемые вопросы о предыдущих предложениях кэша
* [Какой кэш Azure подходит мне?](#which-azure-cache-offering-is-right-for-me)

### <a name="what-is-azure-cache-for-redis"></a>Что такое кэш Azure для Redis?
Кэш Azure для Redis основан на популярном программном обеспечении [Redis](https://redis.io/) с открытым кодом. Он предоставляет вам доступ к безопасному выделенному кэшу Azure для Redis, управляемому корпорацией Майкрософт и доступному из любых приложений в Azure. Более подробный обзор представлен на странице [кэша Azure для Redis](https://azure.microsoft.com/services/cache/) на сайте Azure.com.

### <a name="how-can-i-get-started-with-azure-cache-for-redis"></a>Как мне начать работу с кэшем Azure для Redis?
Существует несколько способов приступить к работе с кэшем Azure для Redis.

* Вы можете ознакомиться с одним из наших руководств, доступных для [.NET](cache-dotnet-how-to-use-azure-redis-cache.md), [ASP.NET](cache-web-app-howto.md), [Java](cache-java-get-started.md), [Node.js](cache-nodejs-get-started.md) и [Python](cache-python-get-started.md).
* Вы можете посмотреть видео [Как создавать высокопроизводительные приложения с помощью кэша Microsoft Azure для Redis](https://azure.microsoft.com/documentation/videos/how-to-build-high-performance-apps-using-microsoft-azure-cache/).
* Можно ознакомиться с документацией по клиентам, которые поддерживают язык, используемый при разработке проекта, чтобы узнать, как использовать Redis. Существует множество клиентов Redis, которые можно использовать с кэшем Azure для Redis. Список клиентов Redis доступен на странице [https://redis.io/clients](https://redis.io/clients).

Если у вас нет учетной записи Azure, то вы можете сделать следующее.

* [Открыть бесплатную учетную запись Azure](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=redis_cache_hero). Вы получаете кредиты, которые можно использовать, чтобы попробовать платные службы Azure. После израсходования кредитов ваша учетная запись не исчезнет. Вы сможете использовать ее для работы с бесплатными службами и функциями Azure.
* [Активировать преимущества подписчика Visual Studio](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/?WT.mc_id=redis_cache_hero). Ваша подписка MSDN каждый месяц приносит вам кредиты, которые можно использовать для оплаты использования служб Azure.

<a name="cache-size"></a>

### <a name="what-azure-cache-for-redis-offering-and-size-should-i-use"></a>Какое предложение и размер кэша Azure для Redis мне следует использовать?
Все предложения кэша Azure для Redis обеспечивают разные уровни параметров **размера**, **пропускной способности**, **высокой доступности** и **Cоглашения об уровне обслуживания**.

Ниже приведены рекомендации по выбору предложения кэша.

* **Память**. Уровни "Базовый" и "Стандартный" предлагают от 250 МБ до 53 ГБ. В категории "Премиум" предлагается до 530 ГБ. Дополнительные сведения см. на странице [Цены на Кэш Azure для Redis](https://azure.microsoft.com/pricing/details/cache/).
* **Проблемы с производительностью сети**. Если у вас есть рабочая нагрузка, которая требует высокой пропускной способности, то уровень "Премиум" предоставит большую пропускную способность по сравнению с уровнями "Стандартный" или "Базовый". Также в рамках каждого уровня пропускная способность для кэшей большего размера выше из-за виртуальной машины, на которой размещен кэш. Дополнительные сведения см. в разделе [в приведенной ниже таблице](#cache-performance).
* **Пропускная способность**. Уровень "Премиум" предлагает максимальную доступную пропускную способность. При достижении сервером кэширования или клиентом пределов пропускной способности на стороне клиента могут возникнуть простои. Дополнительные сведения приведены в таблице ниже.
* **Высокий уровень доступности и Cоглашение об уровне обслуживания**. Кэш Azure для Redis гарантирует, что кэш уровня "Стандартный" или "Премиум" будет доступен не менее 99,9 % времени. Дополнительные сведения о Cоглашении об уровне обслуживания см. на странице [Соглашение об уровне обслуживания для Управляемой службы кэша](https://azure.microsoft.com/support/legal/sla/cache/v1_0/). Соглашение об уровне обслуживания распространяется только на подключения к конечным точкам кэша. Соглашение об уровне обслуживания не включает защиту от потери данных. Для повышения устойчивости к потере данных рекомендуется использовать функцию постоянного хранения данных Redis уровня Премиум.
* **Сохраняемость данных Redis**. Уровень Премиум позволяет сохранить данные кэша в учетной записи хранения Azure. В кэше уровня "Базовый" или "Стандартный" все данные хранятся только в памяти. Базовый проблем инфраструктуры может привести к потере данных. Для повышения устойчивости к потере данных рекомендуется использовать функцию постоянного хранения данных Redis уровня Премиум. Кэш Azure для Redis предлагает варианты RDB и AOF (ожидается в ближайшее время) для сохраняемости Redis. Дополнительные сведения см. в статье [How to configure persistence for a Premium Azure Cache for Redis](cache-how-to-premium-persistence.md) (Как настроить сохраняемость для кэша Azure для Redis категории "Премиум").
* **Кластер Redis**. Используется для создания кэша размером более 53 ГБ или сегментации данных по нескольким узлам Redis. Более того, можно воспользоваться кластеризацией Redis, которая доступна на уровне "Премиум". Каждый узел состоит из пары кэшей (основной кэш и реплика) для обеспечения высокой доступности. Дополнительные сведения см. в статье [How to configure clustering for a Premium Azure Cache for Redis](cache-how-to-premium-clustering.md) (Настройка кластеризации кэша Azure для Redis категории "Премиум").
* **Оптимизированная защита и сетевая изоляция**. Развертывание виртуальной сети Azure обеспечивает дополнительные возможности защиты и изоляции для кэша Azure для Redis. Такие развертывания позволяют определять подсети, настраивать политики контроля доступа, а также использовать другие функции ограничения доступа. Дополнительные сведения см. в статье [How to configure Virtual Network support for a Premium Azure Cache for Redis](cache-how-to-premium-vnet.md) (Настройка поддержки виртуальной сети для кэша Azure для Redis уровня "Премиум").
* **Настройка Redis**. На уровнях "Стандартный" и "Премиум" вы можете настроить уведомления пространства ключей в Redis.
* **Максимальное количество клиентских подключений**. Уровень "Премиум" обеспечивает максимальное число клиентов, которые могут подключаться к Redis, причем чем больше размер кэша, тем больше число подключений. Кластеризация не увеличивает число подключений, доступных для кластеризованного кэша. Дополнительные сведения см. на странице [Цены на Кэш Azure для Redis](https://azure.microsoft.com/pricing/details/cache/).
* **Выделенное ядро для сервера Redis**. На уровне "Премиум" для всех размеров кэша для Redis выделяется отдельное ядро. На уровнях "Базовый" и "Стандартный" отдельное ядро выделяется для размера C1 и выше.
* **Redis является однопоточным** , поэтому наличие более двух ядер не предоставляет дополнительных преимуществ по сравнению с двумя ядрами, но виртуальные машины большего размера обычно имеют большую пропускную способность, чем виртуальные машины меньшего размера. При достижении сервером кэширования или клиентом пределов пропускной способности на стороне клиента возникают простои.
* **Повышение производительности**. Кэши на уровне "Премиум" разворачиваются на оборудовании с более быстрыми процессорами и обеспечивают повышенную производительность по сравнению с уровнями "Базовый" и "Стандартный". Кэши уровня Премиум обладают более высокой пропускной способностью и меньшей задержкой.

<a name="cache-performance"></a>

### <a name="azure-cache-for-redis-performance"></a>Производительность кэша Azure для Redis
В следующей таблице показаны максимальные значения пропускной способности, наблюдаемые при тестировании разных размеров кэша уровней "Стандартный" или "Премиум" с помощью `redis-benchmark.exe` из виртуальной машины IaaS для конечной точки кэша Azure для Redis. Для пропускной способности SSL используется redis-benchmark со stunnel для подключения к конечной точке кэша Azure для Redis.

>[!NOTE] 
>Эти значения не гарантируются и для них не предусмотрено соглашение об уровне обслуживания, однако они должны быть типичными. Чтобы определить подходящий объем кэша для вашего приложения, вам следует загрузить его тестирование.
>Это количество может изменяться при периодическом обновлении результатов.
>

Из этой таблицы можно сделать следующие выводы:

* Пропускная способность кэшей равного размера для уровня "Премиум" выше, чем для уровня "Стандартный". Например с кэша размером 6 ГБ пропускная способность P1 составляет 180 000 запросов в секунду (RPS) по сравнению с 100 000 запросов в Секунду для C3.
* С кластеризацией Redis пропускная способность линейно увеличивается по мере увеличения числа сегментов (узлов) в кластере. Например если создать кластер P4 из 10 сегментов, доступная пропускная способность — 400 000 * 10 = 4 млн запросов в Секунду.
* Пропускная способность для ключей большего размера для уровня "Премиум" выше, чем для уровня "Стандартный".

| Ценовая категория | Размер | Ядра ЦП | Доступная пропускная способность | Размер значения 1 КБ | Размер значения 1 КБ |
| --- | --- | --- | --- | --- | --- |
| **Размеры кэша уровня Стандартный** | | |**Мегабит в секунду (Мбит/с) или Мегабайт в секунду (МБ/с)** |**Запросов в секунду (без SSL)** |**Запросов в секунду (с SSL)** |
| C0 | 250 МБ | Совмещаемая блокировка | 100 / 12,5  |  15 000 |   7500 |
| C1 |   1 GB | 1      | 500 / 62,5  |  38 000 |  20 720 |
| C2 | 2,5 ГБ | 2      | 500 / 62,5  |  41 000 |  37 000 |
| C3 |   6 ГБ | 4\.      | 1000 / 125  | 100 000 |  90 000 |
| C4 |  13 ГБ | 2      | 500 / 62,5  |  60 000 |  55 000 |
| C5 |  26 ГБ | 4\.      | 1,000 / 125 | 102 000 |  93 000 |
| C6 |  53 ГБ | 8      | 2,000 / 250 | 126 000 | 120 000 |
| **Размеры кэша уровня Премиум** | |**Число ядер ЦП на сегмент** | **Мегабит в секунду (Мбит/с) или Мегабайт в секунду (МБ/с)** |**Запросов в секунду (без SSL) для каждого сегмента** |**Запросов в секунду (с SSL) для каждого сегмента** |
| P1 |   6 ГБ |  2 | 1,500 / 187.5 | 180,000 | 172 000 |
| P2 |  13 ГБ |  4\. | 3,000 / 375   | 350 000 | 341 000 |
| P3 |  26 ГБ |  4\. | 3,000 / 375   | 350 000 | 341 000 |
| P4 |  53 ГБ |  8 | 6,000 / 750   | 400,000 | 373 000 |
| P5 | 120 ГБ | 20 | 6,000 / 750   | 400,000 | 373 000 |

Инструкции по настройке stunnel и скачиванию инструментов Redis, таких как `redis-benchmark.exe`, см. в разделе [Как выполнять команды Redis?](#cache-commands).

<a name="cache-region"></a>

### <a name="in-what-region-should-i-locate-my-cache"></a>В каком регионе следует размещать мой кэш?
Для лучшей производительности и минимальной задержки размещайте свой кэш Azure для Redis в одном регионе с вашим кэшируемым клиентским приложением.

<a name="cache-billing"></a>

### <a name="how-am-i-billed-for-azure-cache-for-redis"></a>Как выставляются счета за использование кэша Azure для Redis?
Ценовая категория кэша Azure для Redis указана [здесь](https://azure.microsoft.com/pricing/details/cache/). На странице указаны расценки в виде почасового тарифа. Выставляемые счета за использование кэшей рассчитываются на поминутной основе. Они охватывают интервал времени между созданием кэшей и их удалением. Остановить или приостановить выставление счета за использование кэша нельзя.

### <a name="can-i-use-azure-cache-for-redis-with-azure-government-cloud-azure-china-cloud-or-microsoft-azure-germany"></a>Могу ли я использовать кэш Azure для Redis с облаком Azure для государственных организаций, Microsoft Azure для Китая или Microsoft Azure – Германия?
Да, кэш Redis для Azure доступно в облаке Azure для государственных организаций, облако Azure для Китая компанией 21Vianet и Microsoft Azure для Германии. URL-адреса для доступа к кэшу Azure для Redis и для управления им в этих облаках различны в отличие от общедоступного облака Azure.

| Облако   | DNS-суффикс для кэша Redis            |
|---------|---------------------------------|
| Общедоступные  | *.redis.cache.windows.net       |
| Государственные организации США  | *.redis.cache.usgovcloudapi.net |
| Германия | *.redis.cache.cloudapi.de       |
| Китай   | *.redis.cache.chinacloudapi.cn  |

Дополнительные сведения о рекомендациях по использованию кэша Azure для Redis с другими облаками см. в следующих ссылках.

- [Azure Government Databases – Azure Cache for Redis](../azure-government/documentation-government-services-database.md#azure-cache-for-redis) (Базы данных Azure для государственных организаций – кэш Azure для Redis)
- [Облако Azure для Китая 21Vianet — Azure кэша для Redis](https://www.azure.cn/home/features/redis-cache/)
- [Microsoft Azure для Германии](https://azure.microsoft.com/overview/clouds/germany/)

Сведения об использовании кэша Azure для Redis с помощью PowerShell в облаке Azure для государственных организаций, облако Azure для Китая компанией 21Vianet и Microsoft Azure для Германии см. в разделе [способ подключения к другим облакам — кэш Azure Redis PowerShell](cache-howto-manage-redis-cache-powershell.md#how-to-connect-to-other-clouds).

<a name="cache-configuration"></a>

### <a name="what-do-the-stackexchangeredis-configuration-options-do"></a>Что делают параметры конфигурации StackExchange.Redis?
StackExchange.Redis имеет много параметров. В этом разделе рассказывается о некоторых распространенных параметрах. Более подробные сведения о параметрах StackExchange.Redis см. в статье [StackExchange.Redis configuration](https://stackexchange.github.io/StackExchange.Redis/Configuration) (Конфигурация StackExchange.Redis).

| Параметры конфигурации | Описание | Рекомендации |
| --- | --- | --- |
| AbortOnConnectFail |Если задано значение true, соединение не будет восстанавливаться после сбоя сети. |Установите значение false и позвольте StackExchange.Redis автоматически восстанавливать соединение. |
| ConnectRetry |Количество повторных попыток подключения во время первоначального подключения. |Руководствуйтесь следующими примечаниями. |
| ConnectTimeout |Время ожидания в миллисекундах для операций подключения. |Руководствуйтесь следующими примечаниями. |

Обычно подходят значения по умолчанию для клиента. Вы можете точнее настроить параметры в зависимости от своей рабочей нагрузки.

* **Повторы**
  * Общая рекомендация для ConnectRetry и ConnectTimeout — завершение работы при первой ошибке и повторение попытки. Эта рекомендация основана на вашей рабочей нагрузке и на том, сколько времени в среднем занимает в вашем клиенте выдача команды Redis и получение ответа.
  * Вам не нужно проверять состояние и подключаться самостоятельно — StackExchange.Redis переподключается автоматически. **Избегайте использования свойства ConnectionMultiplexer.IsConnected**.
  * Снежный ком — иногда возникает проблема, когда вы повторяете снова и снова, это нарастает и никогда не исправляется. При возникновении снежного кома следует использовать алгоритм экспоненциальной отсрочки повтора, как описано в [общих рекомендациях по повторным попыткам](../best-practices-retry-general.md), опубликованных группой Microsoft Patterns & Practices.
* **Значения времени ожидания**
  * Исследуйте вашу рабочую нагрузку и установите соответствующие значения. Если вы храните большие значения, установите более высокое значение времени ожидания.
  * Установите для `AbortOnConnectFail` значение false и позвольте StackExchange.Redis восстанавливать подключение.
  * Используйте один экземпляр ConnectionMultiplexer для приложения. Вы можете применять LazyConnection, чтобы создать один экземпляр, который возвращается свойством Connection, как показано в разделе [Подключение к кэшу с использованием класса ConnectionMultiplexer](cache-dotnet-how-to-use-azure-redis-cache.md#connect-to-the-cache).
  * Задайте в свойстве `ConnectionMultiplexer.ClientName` уникальное имя экземпляра приложения в целях диагностики.
  * Используйте несколько экземпляров `ConnectionMultiplexer` для пользовательских рабочих нагрузок.
      * Вы можете следовать этой модели, если в приложении имеется меняющаяся нагрузка. Пример:
      * можно иметь один мультиплексор для работы с большими ключами;
      * можно иметь один мультиплексор для работы с небольшими ключами;
      * можно задать разные значения времени ожидания подключения и логики повторов для каждого используемого ConnectionMultiplexer.
      * Установите свойство `ClientName` в каждом мультиплексоре для облегчения диагностики.
      * Эта рекомендация может обеспечить более оптимизированную задержку на каждый класс `ConnectionMultiplexer`.

### <a name="what-azure-cache-for-redis-clients-can-i-use"></a>Каких клиентов кэша Azure для Redis я могу использовать?
Одним из основных преимуществ Redis является то, что существует множество клиентов, поддерживающих множество языков разработки. Текущий список клиентов Redis см. [здесь](https://redis.io/clients). Дополнительные сведения см. в статье [Краткое руководство. Использование кэша Azure для Redis с приложениями .NET](cache-dotnet-how-to-use-azure-redis-cache.md). Похожие статьи вы найдете в таблице содержимого.

[!INCLUDE [redis-cache-create](../../includes/redis-cache-access-keys.md)]

<a name="cache-emulator"></a>

### <a name="is-there-a-local-emulator-for-azure-cache-for-redis"></a>Существует ли локальный эмулятор кэша Azure для Redis?
Локального эмулятора кэша Azure для Redis нет, но можно запустить версию MSOpenTech redis-server.exe из [программ командной строки Redis](https://github.com/MSOpenTech/redis/releases/) на локальном компьютере и подключиться к нему, чтобы получить возможности, аналогичные локальному эмулятору кэша, как показано в следующем примере:

    private static Lazy<ConnectionMultiplexer>
          lazyConnection = new Lazy<ConnectionMultiplexer>
        (() =>
        {
            // Connect to a locally running instance of Redis to simulate a local cache emulator experience.
            return ConnectionMultiplexer.Connect("127.0.0.1:6379");
        });

        public static ConnectionMultiplexer Connection
        {
            get
            {
                return lazyConnection.Value;
            }
        }


При необходимости можно настроить файл [redis.conf](https://redis.io/topics/config) для более точного соответствия [параметрам кэша по умолчанию](cache-configure.md#default-redis-server-configuration) для подключенного к сети кэша Azure для Redis.

<a name="cache-commands"></a>

### <a name="how-can-i-run-redis-commands"></a>Как выполнять команды Redis?
Вы можете использовать любую из команд, перечисленных в [командах Redis](https://redis.io/commands#), за исключением команд, указанных в перечне [команд, не поддерживаемых в кэше Azure для Redis](cache-configure.md#redis-commands-not-supported-in-azure-cache-for-redis). Выполнять команды Redis можно несколькими способами.

* При наличии кэша уровня "Стандартный" или "Премиум" вы можете запускать команды Redis с помощью [консоли Redis](cache-configure.md#redis-console). Консоль Redis — это защищенный способ выполнения команд Redis на портале Azure.
* Также можно использовать программы командной строки Redis. Чтобы воспользоваться ими, выполните следующие действия:
* Скачайте [программы командной строки Redis](https://github.com/MSOpenTech/redis/releases/).
* Подключитесь к кэшу с помощью `redis-cli.exe`. Передайте конечную точку кэша, используя параметр -h и ключ с параметром -a, как показано в следующем примере:
* `redis-cli -h <Azure Cache for Redis name>.redis.cache.windows.net -a <key>`

> [!NOTE]
> Программы командной строки Redis не работают с портом SSL, но можно использовать программу, например `stunnel` для безопасного подключения этих программ к порту SSL, следуя указаниям, приведенным в [как использовать средство командной строки Redis с помощью кэша Azure для Redis ](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-redis-cli-tool) статьи.
>
>

<a name="cache-reference"></a>

### <a name="why-doesnt-azure-cache-for-redis-have-an-msdn-class-library-reference-like-some-of-the-other-azure-services"></a>Почему в кэше Azure для Redis отсутствует ссылка на библиотеку классов MSDN, как в некоторых других службах Azure?
Кэш Microsoft Azure для Redis основан на популярном продукте с открытым кодом — кэше Azure для Redis. Он доступен с разнообразными [клиентов Redis](https://redis.io/clients) для многих языков программирования. Каждый клиент имеет собственный API, который вызывает экземпляр кэша Azure для Redis с помощью [команд Redis](https://redis.io/commands).

Поскольку все клиенты разные, отсутствует одна централизованная ссылка на классы в MSDN, а каждый клиент поддерживает свою собственную справочную документацию. Помимо справочной документации имеется несколько учебников, показывающих, как приступить к работе с кэшем Azure для Redis, используя разные языки и клиенты кэша. Чтобы получить доступ к этим руководствам, см. в статью [Краткое руководство. Использование кэша Azure для Redis с приложениями .NET](cache-dotnet-how-to-use-azure-redis-cache.md). Похожие статьи вы найдете в таблице содержимого.

### <a name="can-i-use-azure-cache-for-redis-as-a-php-session-cache"></a>Можно ли использовать кэш Azure для Redis как кэш сеанса PHP?
Да. Для использования кэша Azure для Redis в качестве кэша сеанса PHP укажите строку подключения к экземпляру кэша Azure для Redis в пути `session.save_path`.

> [!IMPORTANT]
> При использовании кэша Azure для Redis в качестве кэша сеанса PHP необходимо кодировать в URL-адресе ключ безопасности, используемый для подключения к кэшу, как показано в следующем примере:
>
> `session.save_path = "tcp://mycache.redis.cache.windows.net:6379?auth=<url encoded primary or secondary key here>";`
>
> Если ключ не кодирован в URL-адресе, то может отобразиться сообщение об исключении, подобное этому: `Failed to parse session.save_path`
>
>

Дополнительные сведения об использовании кэша Azure для Redis в качестве кэша сеанса PHP с клиентом PhpRedis см. в разделе [Обработчик сеанса PHP](https://github.com/phpredis/phpredis#php-session-handler).

### <a name="what-are-redis-databases"></a>Что такое базы данных Redis?

Базы данных Redis — это просто логическое разделение данных внутри одного экземпляра Redis. Кэш-память совместно используется всеми базами данных, и фактический объем памяти, используемый определенной базой данных, зависит от пар "ключ-значение", хранящихся в ней. Например объем кэша C6 составляет 53 ГБ памяти. Вы можете предоставить все 53 ГБ одной базе данных или разделить их между несколькими базами данных. 

> [!NOTE]
> При использовании кэша Azure для Redis уровня "Премиум" с включенной кластеризацией доступна только база данных 0. Это внутреннее ограничение Redis, и оно не относится к кэшу Azure для Redis. Дополнительные сведения см. в разделе [Нужно ли вносить изменения в клиентское приложение, чтобы использовать кластеризацию?](cache-how-to-premium-clustering.md#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering).
> 
> 


<a name="cache-ssl"></a>

### <a name="when-should-i-enable-the-non-ssl-port-for-connecting-to-redis"></a>Когда следует включать порт, не являющийся портом SSL, для подключения к Redis?
Сервер Redis не имеет встроенной поддержки SSL, но кэш Azure для Redis имеет. Если вы подключаетесь к кэшу Azure для Redis и ваш клиент поддерживает протокол SSL, например StackExchange.Redis, то следует использовать SSL.

>[!NOTE]
>По умолчанию порт без SSL отключен для новых экземпляров кэша Azure для Redis. Если ваш клиент не поддерживает SSL, необходимо включить порт, не являющийся портом SSL, следуя указаниям, приведенным в разделе [Access ports](cache-configure.md#access-ports) (Порты доступа) статьи [Configure a cache in Azure Cache for Redis](cache-configure.md) (Настройка кэша Azure для Redis).
>
>

Инструменты Redis, такие как `redis-cli`, не работают с портом SSL, но вы можете использовать служебную программу, например `stunnel`, для безопасного подключения инструментов к порту SSL в соответствии с указаниями в записи блога [Анонс поставщика состояний сеансов ASP.NET для предварительной версии Redis](https://blogs.msdn.com/b/webdev/archive/2014/05/12/announcing-asp-net-session-state-provider-for-redis-preview-release.aspx).

Инструкции по скачиванию инструментов Redis см. в разделе [Как выполнять команды Redis?](#cache-commands).

### <a name="what-are-some-production-best-practices"></a>Какие рекомендации следует учитывать для рабочей среды?
* [Рекомендации для StackExchange.Redis](#stackexchangeredis-best-practices)
* [Конфигурация и основные понятия](#configuration-and-concepts)
* [Тестирование производительности](#performance-testing)

#### <a name="stackexchangeredis-best-practices"></a>Рекомендации для StackExchange.Redis
* Задайте для `AbortConnect` значение false, подождите, пока ConnectionMultiplexer автоматически восстановит подключение. [Щелкните здесь, чтобы узнать больше](https://gist.github.com/JonCole/36ba6f60c274e89014dd#file-se-redis-setabortconnecttofalse-md).
* Повторно используйте ConnectionMultiplexer — не создавайте новый экземпляр для каждого запроса. Рекомендуется использовать шаблон `Lazy<ConnectionMultiplexer>`, [показанный здесь](cache-dotnet-how-to-use-azure-redis-cache.md#connect-to-the-cache).
* Лучше всего Redis работает с меньшими значениями, поэтому рассмотрите возможность разделения больших данных на несколько ключей. В [этом обсуждении Redis](https://groups.google.com/forum/#!searchin/redis-db/size/redis-db/n7aa2A4DZDs/3OeEPHSQBAAJ), 100 КБ, считается большой. Прочитайте [эту статью](https://gist.github.com/JonCole/db0e90bedeb3fc4823c2#large-requestresponse-size) , чтобы ознакомиться с примером проблемы, вызванной большими значениями.
* Настройте [параметры ThreadPool](#important-details-about-threadpool-growth) , чтобы избежать тайм-аутов.
* Используйте по крайней мере значение connectTimeout по умолчанию, равное 5 секундам. Этот интервал дает StackExchange.Redis достаточно времени, чтобы повторно установить подключение в случае кратковременного сбоя сети.
* Учтите расходы на производительность, связанные с другими операциями, которые вы выполняете. Например, команда `KEYS` является операцией O(n), т. е. операцией, длительность которой линейно зависит от размера входных данных. Таких операций следует избегать. [Сайт redis.io](https://redis.io/commands/) содержит сведения о временной сложности каждой поддерживаемой операции. Щелкните каждую команду, чтобы просмотреть сведения о сложности операции.

#### <a name="configuration-and-concepts"></a>Конфигурация и основные понятия
* Для систем в рабочей среде используйте уровень "Стандартный" или "Премиум". Уровень "Базовый" — это система с одним узлом без репликации данных, которая не регулируется соглашением об уровне обслуживания. Кроме того, используйте по крайней мере кэш C1. Как правило, кэши C0 используются в простых сценариях разработки и тестирования.
* Помните, что Redis — это хранилище данных **в памяти** . Прочитайте [эту статью](https://gist.github.com/JonCole/b6354d92a2d51c141490f10142884ea4#file-whathappenedtomydatainredis-md) , чтобы ознакомиться со случаями, в которых может произойти потеря данных.
* Создайте свою систему таким образом, чтобы она могла справляться с кратковременными сбоями подключения, [связанными с установкой исправлений и отработкой отказа](https://gist.github.com/JonCole/317fe03805d5802e31cfa37e646e419d#file-azureredis-patchingexplained-md).

#### <a name="performance-testing"></a>Тестирование производительности
* Начните с запуска `redis-benchmark.exe` , чтобы определить возможную пропускную способность перед созданием собственных тестов производительности. Так как `redis-benchmark` не поддерживает протокол SSL, то перед запуском теста необходимо [включить порт без SSL посредством портала Azure](cache-configure.md#access-ports). Примеры приведены в разделе [Как измерить и протестировать производительность моего кэша?](#how-can-i-benchmark-and-test-the-performance-of-my-cache)
* Клиентская виртуальная машина, используемая для тестирования, должна находиться в том же регионе, что и экземпляр кэша Azure для Redis.
* В качестве клиента рекомендуется использовать виртуальные машины серии Dv2, так как в них используется более производительное оборудование и они выдают лучшие результаты.
* Убедитесь, что у выбранной клиентской виртуальной машины как минимум такая же емкость вычислительных ресурсов и пропускной способности, что и у тестируемого кэша.
* Включите VRSS на клиентском компьютере, если используется среда Windows. [Щелкните здесь, чтобы узнать больше](https://technet.microsoft.com/library/dn383582.aspx).
* Экземпляры Redis уровня "Премиум" обеспечивают меньшие сетевые задержки и большую пропускную способность, так как используют более производительные ЦП и сетевое оборудование.

<a name="cache-redis-commands"></a>

### <a name="what-are-some-of-the-considerations-when-using-common-redis-commands"></a>Какие факторы следует учитывать при использовании общих команд Redis?

* Старайтесь не использовать определенные команды Redis, которые принимают много времени для завершения, если вы полностью понимаете влияние этих команд. Например, не запускайте [ключи](https://redis.io/commands/keys) команду в рабочей среде. В зависимости от количества ключей может занять много времени для возврата. Redis является однопотоковым сервером и обрабатывает команды по одной. Если вы выдадите после KEYS другие команды, они не будут обрабатываться, пока Redis обрабатывает команду KEYS. [Сайт redis.io](https://redis.io/commands/) содержит сведения о временной сложности каждой поддерживаемой операции. Щелкните каждую команду, чтобы просмотреть сведения о сложности операции.
* Размеры ключей — следует использовать пары "ключ-значение" небольшого или большого размера? Это зависит от сценария развертывания. Если в сценарии требуются большие ключи, можно настроить ConnectionTimeout, а затем значения повторов и настроить логику повторов. С точки зрения сервера Redis меньшее значения позволяют повысить производительность.
* Это не означает, что в Redis нельзя хранить большие значения; вы должны учитывать описанные ниже факторы. Задержки будут выше. Если имеется один большой и один небольшой набор данных, можно использовать несколько экземпляров ConnectionMultiplexer, настроенных с разным набором значений времени ожидания и повторов, как описано в предыдущем разделе [Что делают параметры конфигурации StackExchange.Redis](#cache-configuration).

<a name="cache-benchmarking"></a>

### <a name="how-can-i-benchmark-and-test-the-performance-of-my-cache"></a>Как измерить и протестировать производительность моего кэша?
* [Включите диагностику кэша](cache-how-to-monitor.md#enable-cache-diagnostics), чтобы можно было [наблюдать](cache-how-to-monitor.md) за работоспособностью кэша. Вы можете просмотреть метрики на портале Azure. Кроме того, их можно [скачать и просмотреть](https://github.com/rustd/RedisSamples/tree/master/CustomMonitoring) с помощью привычных вам инструментов.
* Для нагрузочного теста сервера Redis можно использовать benchmark.exe.
* Убедитесь, что клиент нагрузочного тестирования и кэш Azure для Redis находятся в одном регионе.
* Используйте redis-cli.exe и наблюдайте за кэшем с помощью команды INFO.
* Если ваша нагрузка приводит к высокой степени фрагментации памяти, то необходимо масштабирование до большего размера кэша.
* Инструкции по скачиванию инструментов Redis см. в разделе [Как выполнять команды Redis?](#cache-commands).

Следующие команды приводят пример использования redis-benchmark.exe. Чтобы получить точные результаты, выполните эти команды на виртуальной машине, размещенной в том же регионе, что и кэш.

* Тестирование конвейерных запросов SET с полезными данными размером в 1 КБ.

  `redis-benchmark.exe -h **yourcache**.redis.cache.windows.net -a **yourAccesskey** -t SET -n 1000000 -d 1024 -P 50`
* Тестирование конвейерных запросов GET с полезными данными размером в 1 КБ.
  Примечание. Сначала выполните приведенный выше тест SET, чтобы заполнить кэш

  `redis-benchmark.exe -h **yourcache**.redis.cache.windows.net -a **yourAccesskey** -t GET -n 1000000 -d 1024 -P 50`

<a name="threadpool"></a>

### <a name="important-details-about-threadpool-growth"></a>Важные сведения о росте пула потоков ThreadPool
В CLR ThreadPool существует два типа потоков - «Работник» и «Порт завершения ввода-вывода» (IOCP) потоки.

* Рабочие потоки используются, например, для обработки методов `Task.Run(…)` или `ThreadPool.QueueUserWorkItem(…)`. Эти потоки также используются различными компонентами в среде CLR, когда работа должна быть выполнена в фоновом потоке.
* Потоки IOCP используются в том случае, когда происходит асинхронный ввод/ВЫВОД, например, при чтении из сети.

Пул потоков предоставляет новые рабочие потоки или потоки завершения ввода-вывода по запросу (без регулирования), пока не будет достигнут параметр "Минимум" для каждого типа потока. По умолчанию минимальное количество потоков равно количеству процессоров в системе.

Когда количество существующих (занятых) потоков достигает "минимального" количества потоков, ThreadPool изменяет частоту внедрения новых потоков до величины в один поток за 500 миллисекунд. Как правило если системе поток IOCP, он обработает эту работу быстро. Однако если величина нагрузки больше настроенного параметра "Минимум", при обработке некоторых операций возникнет некоторая задержка, так как ThreadPool будет ожидать возникновения одного из двух событий.

1. Освобождение существующего потока для выполнения работы.
2. Нет существующих потоков не стал бесплатно в течение 500 мс, поэтому создается новый поток.

По сути это означает, что если число занятых потоков превышает минимальное количество потоков, вы скорее всего платите с задержкой 500 мс перед обработкой сетевого трафика для приложения. Кроме того, важно обратить внимание, что если существующий поток простаивает более 15 секунд (на основе моих наблюдений), он будет удален, и этот цикл наращивания и уменьшения количества потоков может повториться.

Если взглянуть на пример сообщения об ошибке от StackExchange.Redis (сборка 1.0.450 или более поздней версии), вы увидите, что теперь оно содержит статистику ThreadPool (подробности о рабочих потоках и потоках IOCP см. ниже).

    System.TimeoutException: Timeout performing GET MyKey, inst: 2, mgr: Inactive,
    queue: 6, qu: 0, qs: 6, qc: 0, wr: 0, wq: 0, in: 0, ar: 0,
    IOCP: (Busy=6,Free=994,Min=4,Max=1000),
    WORKER: (Busy=3,Free=997,Min=4,Max=1000)

В предыдущем примере вы увидите, что для потока IOCP существует 6 занятых потоков, и система настроена четыре минимальное количество потоков. В этом случае клиент будет скорее всего столкнется с двумя 500 мс задержки, так как 6 > 4.

Обратите внимание, что StackExchange.Redis может достигнуть времени ожидания, если происходит регулирование количества рабочих потоков или потоков IOCP.

### <a name="recommendation"></a>Рекомендации

С учетом этой информации мы настоятельно рекомендуем клиентам устанавливать значение параметра "Минимум" для рабочих потоков и потоков IOCP так, чтобы оно превышало значение по умолчанию. Мы не можем дать универсальных рекомендаций на то, что это значение должно быть из-за слишком высоким или слишком низким для другого приложения, скорее всего будет правильного значения для одного приложения. Этот параметр также может повлиять на производительность других компонентов сложных приложений, поэтому каждый клиент должен точно настроить этот параметр в соответствии со своими потребностями. Хорошей отправной точкой является 200 или 300, после чего нужно проверить и изменить этот параметр в соответствии с результатом.

Как настроить этот параметр:

* Рекомендуется изменить этот параметр программным способом с помощью [ThreadPool.SetMinThreads (...) ](/dotnet/api/system.threading.threadpool.setminthreads#System_Threading_ThreadPool_SetMinThreads_System_Int32_System_Int32_) метод в `global.asax.cs`. Пример:

```cs
private readonly int minThreads = 200;
void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    AreaRegistration.RegisterAllAreas();
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    ThreadPool.SetMinThreads(minThreads, minThreads);
}
```

  > [!NOTE]
  > Значение, указанное с помощью данного метода является глобальным параметром, влияющие на весь домен приложения. Например, если есть 4-ядерный компьютер и требуется задать *параметра minWorkerThreads* и *minIoThreads* для 50 на ЦП во время выполнения, можно использовать **ThreadPool.SetMinThreads (200, 200)** .

* Это также можно указать минимальное количество потоков, воспользовавшись [ *minIoThreads* или *параметра minWorkerThreads* параметр конфигурации](https://msdn.microsoft.com/library/vstudio/7w2sway1(v=vs.100).aspx) под `<processModel>` элемент конфигурации в `Machine.config`, обычно расположенный в папке `%SystemRoot%\Microsoft.NET\Framework\[versionNumber]\CONFIG\`. **Задавать таким образом количество минимальное количество потоков обычно не рекомендуется, так как это параметр уровня системы.**

  > [!NOTE]
  > В этом элементе конфигурации задается параметр *per-core*. Например, если у вас есть 4-ядерный компьютер и требуется вашей *minIoThreads* присвоить значение 200 во время выполнения, следует использовать `<processModel minIoThreads="50"/>`.
  >

<a name="server-gc"></a>

### <a name="enable-server-gc-to-get-more-throughput-on-the-client-when-using-stackexchangeredis"></a>Включение сборки мусора сервера для получения более высокой пропускной способности на стороне клиента при использовании StackExchange.Redis
Включение сборки мусора сервера может оптимизировать работу клиента и улучшить производительность и пропускную способность при использовании StackExchange.Redis. Дополнительные сведения о сборке мусора сервера и о том, как ее включить, можно найти в следующих статьях:

* [Включение сборки мусора сервера](/dotnet/framework/configure-apps/file-schema/runtime/gcserver-element)
* [Основные сведения о сборке мусора](/dotnet/standard/garbage-collection/fundamentals)
* [Сборка мусора и производительность](/dotnet/standard/garbage-collection/performance)


### <a name="performance-considerations-around-connections"></a>Рекомендации по производительности для подключений

Каждая ценовая категория имеет различные ограничения для количества клиентских подключений, памяти и пропускной способности. Хотя каждый размер кэша *допускает* определенное число подключений, с каждым подключением к Redis связаны накладные расходы. Примером таких накладных расходов могут служить загрузка ЦП и использование памяти в результате шифрования TLS/SSL. Максимальное число подключений для данного размера кэша предполагает низкую загрузку кэша. Если *суммарная* нагрузка, связанная с подключениями и клиентскими операциями, превышает емкость системы, могут возникнуть проблемы с работой кэша, даже если максимальное число подключений для его текущего размера не превышено.

Дополнительные сведения о разных пределах подключений для каждого уровня см. в статье [Цены на Кэш Azure для Redis](https://azure.microsoft.com/pricing/details/cache/). Дополнительные сведения о подключениях и других конфигурациях по умолчанию см. в статье [Конфигурация сервера Redis по умолчанию](cache-configure.md#default-redis-server-configuration).

<a name="cache-monitor"></a>

### <a name="how-do-i-monitor-the-health-and-performance-of-my-cache"></a>Как отслеживать работоспособность и производительность моего кэша?
За экземплярами кэша Microsoft Azure для Redis можно наблюдать на [портале Azure](https://portal.azure.com). Вы можете просматривать метрики, закреплять диаграммы метрик на начальной панели, настраивать диапазоны дат и времени для диаграмм мониторинга, добавлять и удалять метрики в диаграммах, а также настраивать отправку оповещений при выполнении определенных условий. Дополнительные сведения см. в статье [Monitor Azure Cache for Redis](cache-how-to-monitor.md) (Как выполнять мониторинг кэша Azure для Redis).

В **меню ресурсов** кэша Azure для Redis также содержится несколько инструментов для мониторинга и устранения неполадок кэшей.

* **Диагностика и решение проблем** предоставляет сведения об основных проблемах и способах их устранения.
* Служба **работоспособности ресурсов** отслеживает ресурс и сообщает, работает ли он как ожидалось. Дополнительные сведения о службе работоспособности ресурсов Azure см. [здесь](../resource-health/resource-health-overview.md).
* **Новый запрос на поддержку** , можно создать запрос по своему кэшу.

Эти инструменты позволяют наблюдать за работоспособностью экземпляров кэша Azure для Redis и помогают управлять кэшируемыми приложениями. Дополнительные сведения см. в разделе "Support & troubleshooting settings" (Настройки поддержки и устранения неполадок) в статье [How to configure Azure Cache for Redis](cache-configure.md) (Настройка кэша Azure для Redis).

<a name="cache-timeouts"></a>

### <a name="why-am-i-seeing-timeouts"></a>Почему я наблюдаю простои?
Простои происходят на клиенте, который вы используете для обращения к Redis. Когда команда отправляется на сервер Redis, она помещается в очередь, и со временем сервер Redis выбирает команду и выполняет его. Однако во время этого процесса клиент может простаивать, и в этом случае на вызывающей стороне возникает исключение. Дополнительные сведения об устранении проблем со временем ожидания см. в разделах [Устранение проблем на стороне клиента](cache-how-to-troubleshoot.md#client-side-troubleshooting) и [Исключения времени ожидания StackExchange.Redis](cache-how-to-troubleshoot.md#stackexchangeredis-timeout-exceptions).

<a name="cache-disconnect"></a>

### <a name="why-was-my-client-disconnected-from-the-cache"></a>Почему мой клиент был отключен от кэша?
Ниже приведены некоторые распространенные причины отключения кэша.

* Причины на стороне клиента
  * Клиентское приложение было развернуто повторно.
  * Клиентское приложение выполняло операцию масштабирования.
    * В случае облачных служб или веб-приложений это может быть из-за автоматического масштабирования.
  * Изменен сетевой уровень на стороне клиента.
  * Возникла временная ошибка на клиенте или в узлах сети между клиентом и сервером.
  * Было достигнуто предельное пороговое значение пропускной способности.
  * Выполнение операций, связанных с ЦП, заняло слишком много времени.
* Причины на стороне сервера
  * В предложении кэша уровня "Стандартный" служба кэша Azure для Redis инициировала отработку отказа с переходом с основного узла на вторичный узел.
  * В Azure было выполнено исправление экземпляра, в котором был развернут кэш.
    * Это могли быть обновления сервера Redis или обычное обслуживание ВМ.

### <a name="which-azure-cache-offering-is-right-for-me"></a>Какой кэш Azure подходит мне?
> [!IMPORTANT]
> Согласно прошлогоднему [объявлению](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/), использование управляемой службы кэша Azure и службы кэша роли Azure **было прекращено** 30 ноября 2016 г. Мы рекомендуем использовать [кэш Azure для Redis](https://azure.microsoft.com/services/cache/). Дополнительные сведения о переходе на новую службу см. в статье [Migrate from Managed Cache Service to Azure Cache for Redis](cache-migrate-to-redis.md) (Перенос из управляемой службы кэша в кэш Azure для Redis).
>
>

### <a name="azure-cache-for-redis"></a>Кэш Azure для Redis
Кэш Azure для Redis, как правило, доступен в размере до 53 ГБ, а доступность по Соглашению об уровне обслуживания составляет 99,9 %. Новый [уровень "Премиум"](cache-premium-tier-intro.md) доступен в предварительной версии: предлагается до 530 ГБ и поддержка кластеризации, виртуальной сети и сохраняемости в соответствии с соглашением об уровне обслуживания 99,9 %.

Кэш Azure для Redis предоставляет пользователям доступ к безопасному выделенному кэшу Azure для Redis, управляемому корпорацией Майкрософт. В рамках этого предложения вам доступны широкий набор функций и экосистема от Redis, а также надежное размещение и мониторинг от Майкрософт.

В отличие от обычных кэшей, которые имеют дело только с парами "ключ значение" Redis популярен для его высокоэффективным типам данных. Redis также поддерживает выполнение атомарных операций с этими типами, включая добавление в строку, инкрементное увеличение значения в хэше, публикация в список, вычисление пересечения, объединения и разницы в наборе; получение элемента с наивысшим рейтингом в сохраненном наборе. К другим функциям относится поддержка транзакций, публикации и подписок, скрипты Lua, ключи с ограниченным сроком жизни и параметры конфигурации, настройка которых обеспечивает схожее с традиционным кэшем поведение Redis.

Другой важный фактор успеха Redis — это жизнеспособная, активно развивающаяся экосистема открытым исходным кодом, построенная вокруг него. Это отражено в различных наборах клиентов Redis, доступных на разных языках. Данная экосистема и широкий диапазон клиентов позволяют использовать кэш Azure для Redis практически для любой рабочей нагрузки, создаваемой в Azure.

Дополнительные сведения о начале работы с кэшем Redis для Azure см. в статьях [Краткое руководство. Использование кэша Azure для Redis с приложениями .NET](cache-dotnet-how-to-use-azure-redis-cache.md) и [Документация по кэшу Azure для Redis](index.md).

### <a name="managed-cache-service"></a>Управляемая служба кэша
[Использование управляемой службы кэша было прекращено 30 ноября 2016 г.](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/)

Архив документации можно найти на [этой странице](/previous-versions/azure/azure-services/dn386094(v=azure.100)).

### <a name="in-role-cache"></a>Кэш в роли
[Использование службы кэша роли было прекращено 30 ноября 2016 г.](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/)

Архив документации можно найти на [этой странице](/previous-versions/azure/azure-services/dn386103(v=azure.100)).

["minIoThreads" configuration setting]: https://msdn.microsoft.com/library/vstudio/7w2sway1(v=vs.100).aspx
