---
title: Общие сведения о Политике Azure
description: "\"Политика Azure\" — это служба в Azure, которая используется для создания, присваивания определений политик, а также управления ими в среде Azure."
ms.date: 11/25/2019
ms.topic: overview
ms.openlocfilehash: a7cc5ebca74e249057d159334e4207a3efca37f5
ms.sourcegitcommit: 8bd85510aee664d40614655d0ff714f61e6cd328
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/06/2019
ms.locfileid: "74885472"
---
# <a name="what-is-azure-policy"></a>Что такое служба "Политика Azure"?

Система управления проверяет, может ли ваша организация достичь целей с помощью эффективного и рационального использования ИТ. Это делается путем создания четкой картины бизнес-целей и ИТ-проектов.

В вашей компании возникает множество проблем в области ИТ, которые никак не удается устранить? Хорошая система управления ИТ включает в себя планирование инициатив и определение приоритетов на стратегическом уровне для помощи в управлении и для предотвращения проблем. Именно для этой основной потребности нужна служба "Политика Azure".

"Политика Azure" — это служба в Azure, которая используется для создания и присваивания политик, а также управления ими. Эти политики гарантируют соблюдение различных правил и действий с ресурсами, что обеспечивает соответствие этих ресурсов корпоративным стандартам и соглашениям об уровне обслуживания. Служба "Политика Azure" соответствует этому требованию, оценивая ресурсы на предмет несоответствия назначенным политикам. Все данные в службе "Политика Azure" хранятся в зашифрованном виде.

Например, можно настроить политику, которая разрешает только определенные размеры SKU виртуальных машин в среде. После реализации этой политики новые и имеющиеся ресурсы будут оцениваться на предмет соответствия. При правильном типе политики имеющиеся ресурсы могут быть приведены в соответствие. Позже в этой документации будут рассмотрены дополнительные сведения о том, как создать и реализовать политики с помощью службы "Политика Azure".

> [!IMPORTANT]
> Сейчас оценка соответствия в службе "Политика Azure" предоставляется для всех назначений независимо от ценовой категории. Если данные о соответствии не отображаются для назначения, убедитесь, что подписка зарегистрирована для поставщика ресурсов Microsoft.PolicyInsights.

[!INCLUDE [service-provider-management-toolkit](../../../includes/azure-lighthouse-supported-service.md)]

## <a name="how-is-it-different-from-rbac"></a>Чем это отличается от управления доступом на основе ролей?

Между службой "Политика Azure" и управлением доступом на основе ролей (RBAC) существует ряд ключевых различий. RBAC определяет действия пользователя в различных областях. Вам может быть назначена роль участника для группы ресурсов, позволяющая вносить изменения в эту группу ресурсов. Служба "Политика Azure" нацелена на свойства ресурсов во время и после их развертывания. Она управляет такими свойствами, как типы или расположения ресурсов. В отличие от RBAC, "Политика Azure" представляет собой систему разрешения по умолчанию и явного запрета.

### <a name="rbac-permissions-in-azure-policy"></a>Разрешения RBAC в службе "Политика Azure"

В службе "Политика Azure" предусмотрено несколько разрешений, известных как операции, двух разных поставщиков ресурсов:

- [Microsoft.Authorization](../../role-based-access-control/resource-provider-operations.md#microsoftauthorization)
- [Microsoft.PolicyInsights](../../role-based-access-control/resource-provider-operations.md#microsoftpolicyinsights).

Большинство встроенных ролей предоставляют разрешения на доступ к ресурсам службы "Политика Azure". Пользователь с ролью **Участник политики ресурсов** получает доступ к большинству операций службы "Политика Azure". Пользователь с ролью **владелец** имеет полные права. **Участник** и **читатель** могут использовать все операции чтения службы "Политика Azure", но **участник** также может активировать исправление.

Если ни в одной роли нет нужных разрешений, создайте [пользовательскую роль](../../role-based-access-control/custom-roles.md).

## <a name="policy-definition"></a>Определение политики

Путь создания и реализации политики в службе "Политика Azure" начинается с создания определения политики. Каждое определение политики содержит условия, при которых она применяется, а также определенное действие, которое выполняется, если условия соблюдены.

В службе "Политика Azure" предлагается несколько встроенных политик, доступных по умолчанию. Например:

- **Допустимые SKU учетной записи хранения**: определяет, была ли учетная запись хранения развернута в наборе размеров SKU. Действие политики — запрет всех учетных записей хранения, которые не соответствуют набору определенных размеров SKU.
- **Разрешенный тип ресурса**: определяет типы ресурсов, которые можно развернуть. Действие политики — запрет всех ресурсов, которые не являются частью определенного списка.
- **Допустимые расположения**: ограничивает доступные расположения для новых ресурсов. Эта политика используется для соблюдения географических требований.
- **Разрешенные номера SKU виртуальных машин**: задает набор SKU виртуальных машин, которые можно развернуть.
- **Добавление тегов к ресурсам**: применяет обязательный тег и его значение по умолчанию, если он не задан запросом развертывания.
- **Принудительное применение тега и его значения**: принудительно применяет обязательный тег и его значение к ресурсу.
- **Недопустимые типы ресурсов**: препятствует развертыванию списка типов ресурсов.

Чтобы реализовать эти определения политик (как встроенные, так и настраиваемые определения), необходимо будет их назначить. Любую из этих политик можно назначить с помощью портала Azure, PowerShell или Azure CLI.

Оценка политики происходит с помощью нескольких различных действий, таких как назначение или обновление политики. Полный список см. в разделе [Policy evaluation triggers](./how-to/get-compliance-data.md#evaluation-triggers) (Триггеры оценки политики).

Дополнительные сведения о структурах определений политик см. в [этой статье](./concepts/definition-structure.md).

## <a name="policy-assignment"></a>Назначение политики

Назначение политики — это определение политики, которая назначена в рамках определенной области. Эта область может варьироваться от [группы управления](../management-groups/overview.md) до группы ресурсов. Термин *область* означает все группы ресурсов, подписки или группы управления, которые указаны в определении политики. Назначения политик наследуются всеми дочерними ресурсами. Такой подход означает, что политики, применяемые к группе ресурсов, применяются также к ресурсам в этой группе. Тем не менее из назначения политики можно исключить подобласть.

Например, для области действия подписки можно назначить политику, которая предотвращает создание сетевых ресурсов. В этой подписке можно исключить группу ресурсов, предназначенную для сетевой инфраструктуры. Затем доступ к этой группе сетевых ресурсов предоставляется пользователям, которым вы доверяете создание сетевых ресурсов.

В другом примере, возможно, потребуется назначить политику списка разрешений для типов ресурсов на уровне группы управления. А затем назначить менее строгую политику (разрешающую дополнительные типы ресурсов) для дочерней группы управления или даже непосредственно для подписок. Но в нашем примере сделать это не удастся, так как в политике реализован явный запрет. Вместо этого исключите дочернюю группу управления или подписку из назначения политики на уровне группы управления. Затем назначьте менее строгую политику на уровне дочерней группы управления или подписки. Если любая политика приводит к запрету ресурса, единственным способом обеспечить его доступность является изменение политики запрета.

Дополнительные сведения о настройке определений и назначений политики на портале см. в разделе [Создание назначения политики для идентификации ресурсов, не соответствующих требованиям, в среде Azure](assign-policy-portal.md). Также доступны пошаговые инструкции для [PowerShell](assign-policy-powershell.md) и [Azure CLI](assign-policy-azurecli.md).

## <a name="policy-parameters"></a>Параметры политики

Использование параметров политики помогает упростить управление политиками за счет сокращения числа определений политики, которые необходимо создать. Параметры можно определить при создании политики, чтобы сделать его более общим. Затем можно повторно использовать определение политики для различных сценариев. Для этого можно передавать различные значения при назначении определения политики. Например, можно указать один набор расположений для подписки.

Параметры определяются при создании определения политики. Когда параметр определен, ему присваивается имя и (необязательно) задается значение. Например, можно определить параметр политики, *location*. Затем при назначении политики ему можно присваивать различные значения, такие как *EastUS* или *WestUS*.

Дополнительные сведения о параметрах политики см. в [этом разделе](./concepts/definition-structure.md#parameters).

## <a name="initiative-definition"></a>Определение инициативы

Определение инициативы — это совокупность определений политик, которые предназначены для достижения одной ключевой цели. Определение инициативы упрощает управление определениями политик и их назначение. Это достигается благодаря группированию набора политик в один отдельный элемент. Например, можно создать инициативу, называемую **Enable Monitoring in Azure Security Center** (Включение мониторинга в центре безопасности Azure) с целью мониторинга всех доступных рекомендаций безопасности в центре безопасности Azure.

> [!NOTE]
> Пакет SDK, например Azure CLI и Azure PowerShell, использует свойства и параметры с именем **PolicySet** для ссылки на инициативы.

В соответствии с этой инициативой будут доступны такие определения политики:

- **Monitor unencrypted SQL Database in Security Center** (Мониторинг незашифрованной базы данных в центре безопасности) для наблюдения за незашифрованными базами данных и серверами SQL.
- **Monitor OS vulnerabilities in Security Center** (Мониторинг уязвимостей ОС в Центре безопасности) для мониторинга серверов, не соответствующих настроенному базовому плану.
- **Monitor missing Endpoint Protection in Security Center** (Мониторинг отсутствующей защиты конечной точки в центре безопасности) для серверов мониторинга без установленного агента защиты конечной точки.

## <a name="initiative-assignment"></a>Присвоение инициативы

Подобно присвоению политики, присвоение инициативы — это определение инициативы, назначенное определенной области. Присвоения инициативы снижают потребность в создании нескольких определений инициативы для каждой области. Эта область также может варьироваться от группы управления до группы ресурсов.

Каждая инициатива назначается разным областям. Одна инициатива может быть назначена **subscriptionA** и **subscriptionB**.

## <a name="initiative-parameters"></a>Параметры инициативы

Как и параметры политики, параметры инициативы помогают упростить управление инициативой за счет сокращения избыточности. Параметры инициативы являются параметрами, используемыми определениями политик внутри инициативы.

Например, возьмем сценарий с определением инициативы — **initiativeC** и определениями политик — **policyA** и **policyB**, каждая из которых имеет различный тип параметра.

| Политика | Имя параметра |Тип параметра  |Примечание |
|---|---|---|---|
| policyA | allowedLocations | array  |Этот параметр ожидает список строк для значения, так как тип параметра был определен как массив. |
| policyB | allowedSingleLocation |строка |Этот параметр ожидает одно слово для значения, так как тип параметра был определен как строка. |

В этом случае при определении параметров инициативы **initiativeC** есть три варианта:

- Используйте параметры определений политик в рамках этой инициативы. В этом примере *allowedLocations* и *allowedSingleLocation* становятся параметрами для инициативы **initiativeC**.
- Укажите значения параметров определений политик в рамках этого определения инициативы. В этом примере необходимо предоставить список расположений для **параметра policyA — allowedLocations** и **параметра policyB — allowedSingleLocation**. Кроме того, можно указать значения при назначении этой инициативы.
- Предоставьте список *значений* параметров, которые могут использоваться при присвоении этой инициативы. При назначении этой инициативы наследуемые параметры из определения политики в рамках инициативы могут иметь значения только из указанного списка.

При создании параметров значения в определении инициативы вы не можете ввести другое значение во время назначения инициативы, так как оно не является частью списка.

## <a name="maximum-count-of-azure-policy-objects"></a>Максимальное количество объектов службы "Политика Azure"

[!INCLUDE [policy-limits](../../../includes/azure-policy-limits.md)]

## <a name="recommendations-for-managing-policies"></a>Рекомендации по управлению политиками

Ниже приведены несколько указателей и советов, которые следует учитывать.

- Начните с действия аудита вместо действия запрета, чтобы отслеживать влияние определения политики на ресурсы в вашей среде. При наличии сценария для автомасштабирования приложений установка результатов запрета может помешать таким задачам автоматизации.

- При создании определений и назначений необходимо учитывать организационные иерархии. Мы рекомендуем создавать определения на более высоких уровнях, таких как группа управления или уровень подписки. Затем создайте назначение на следующем дочернем уровне. Если вы создаете определение в группе управления, назначение можно ограничить до подписки или группы ресурсов в этой группе управления.

- Мы рекомендуем создавать и назначать определения инициатив даже для одного определения политики.
  Например, у вас есть определение политики *policyDefA* и вы создаете его в качестве определения инициативы *initiativeDefC*. Если вы создадите другое определение политики *policyDefB* с целями подобными *policyDefA*, его можно добавить к *initiativeDefC*, чтобы отслеживать их вместе.

- После создания назначения инициативы определения политики, добавленные к инициативе, также становятся частью этих назначений.

- Когда оценивается назначение инициативы, все политики этой инициативы также оцениваются.
  Если нужно оценить политику отдельно, то не включайте ее в инициативу.

## <a name="video-overview"></a>Видеообзор

Ниже приведен обзор службы "Политика Azure" с веб-сайта Microsoft Build 2018. Слайды или видеоролик для загрузки можно найти на странице [Govern your Azure environment through Azure Policy](https://channel9.msdn.com/events/Build/2018/THR2030) (Система управления средой Azure с помощью службы "Политика Azure") на канале Channel 9.

> [!VIDEO https://www.youtube.com/embed/dxMaYF2GB7o]

## <a name="next-steps"></a>Дополнительная информация

После знакомства с обзором службы "Политика Azure" и некоторыми представленными ключевыми концепциями можно выполнять следующие шаги.

- [Назначение определения политики на портале](./assign-policy-portal.md).
- [Назначение определения политики с помощью Azure CLI](./assign-policy-azurecli.md).
- [Назначение определения политики с помощью PowerShell](./assign-policy-powershell.md).