---
title: Этапы развертывания схемы
description: Узнайте, проходит службы Azure Blueprint во время развертывания.
author: DCtheGeek
ms.author: dacoulte
ms.date: 03/14/2019
ms.topic: conceptual
ms.service: blueprints
manager: carmonm
ms.openlocfilehash: d7000813b51fb9c9aae9a21cbded3ae0028e83f4
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60684698"
---
# <a name="stages-of-a-blueprint-deployment"></a>Этапы развертывания схемы

При развертывании схемы, ряд действий берется службой чертежи Azure развернуть ресурсы, определенные в схеме. Эта статья содержит сведения о каждый шаг включает.

Развертывания схемы активируется путем назначения концептуальное представление подписки или [изменение существующего назначения](../how-to/update-existing-assignments.md). Во время развертывания чертежей принимает перечисленные ниже общие шаги:

> [!div class="checklist"]
> - Проекты, предоставляются права владельца
> - Создается объект назначения схемы
> - Необязательный - чертежей создает **назначенный системой** управляемого удостоверения
> - Управляемое удостоверение развертывает артефактов чертежа
> - Схемы, в которой службы и **назначенный системой** прав управляемого удостоверения

## <a name="blueprints-granted-owner-rights"></a>Проекты, предоставляются права владельца

Субъект-служба Azure чертежей предоставляются права владельца на назначенные подписки или подписки. Разрешает проекты для создания и отозвать, предоставленный роль [назначенный системой управляемого удостоверения](../../../active-directory/managed-identities-azure-resources/overview.md).

Права предоставляются автоматически, если распределение осуществляется через портал. Тем не менее если назначение осуществляется с помощью REST API, предоставив этому пользователю права должен быть отдельный интерфейс API вызывать. — Идентификатор приложения Azure Blueprint `f71766dc-90d9-4b7d-bd9d-4499c4331c3f`, но субъекта-службы зависит от клиента. Используйте [Azure Active Directory Graph API](../../../active-directory/develop/active-directory-graph-api.md) и конечной точки REST [субъекты-службы](/graph/api/resources/serviceprincipal) получаем субъект-служба. Затем предоставьте Azure чертежей _владельца_ роль с помощью [портала](../../../role-based-access-control/role-assignments-portal.md), [Azure CLI](../../../role-based-access-control/role-assignments-cli.md), [Azure PowerShell](../../../role-based-access-control/role-assignments-powershell.md), [REST API](../../../role-based-access-control/role-assignments-rest.md), или [шаблона Resource Manager](../../../role-based-access-control/role-assignments-template.md).

Служба чертежи не напрямую развернуть ресурсы.

## <a name="the-blueprint-assignment-object-is-created"></a>Создается объект назначения схемы

Пользователя, группы или субъекта-службы назначает концептуальное представление подписки. Объект назначения существует на уровне подписки, которым была назначена в рамках схемы. Ресурсы, созданные при развертывании не выполняется в контексте развертывание сущности.

При создании назначения схемы, тип [управляемого удостоверения](../../../active-directory/managed-identities-azure-resources/overview.md) выбран. По умолчанию используется **назначенный системой** управляемое удостоверение. Объект **назначаемого пользователем** можно выбрать управляемое удостоверение. При использовании **назначаемого пользователем** управляемого удостоверения, она должна определена и разрешения, перед созданием назначения схемы.

## <a name="optional---blueprints-creates-system-assigned-managed-identity"></a>Необязательный - чертежей создает назначенное системой управляемого удостоверения

Когда [назначенный системой управляемого удостоверения](../../../active-directory/managed-identities-azure-resources/overview.md) выбран во время назначения, чертежей к созданию удостоверения и предоставляет управляемому удостоверению [владельца](../../../role-based-access-control/built-in-roles.md#owner) роли. Если [обновляется существующее назначение](../how-to/update-existing-assignments.md), чертежей использует ранее созданного управляемого удостоверения.

Управляемое удостоверение, связанные с назначения схемы используется для развертывания или повторного развертывания ресурсов, определенных в схеме. Такой подход позволяет избежать назначения, случайно конфликтуют друг с другом.
Такой подход также поддерживает [блокировки ресурсов](./resource-locking.md) функция, контролируя безопасности развернутых ресурсов из проекта.

## <a name="the-managed-identity-deploys-blueprint-artifacts"></a>Управляемое удостоверение развертывает артефактов чертежа

Управляемое удостоверение, а затем инициируют развертываний Resource Manager из артефактов в схеме в определенный [порядок последовательности](./sequencing-order.md). Порядок можно изменить, чтобы убедиться, что артефакты, которые зависят от других артефактов развертываются в правильном порядке.

Ошибка доступа путем развертывания обычно является результатом уровня доступа к управляемым удостоверением. Эта служба чертежей управляет жизненным циклом безопасности **назначенный системой** управляемое удостоверение. Тем не менее, пользователь отвечает за управление правами и жизненный цикл **назначаемого пользователем** управляемое удостоверение.

## <a name="blueprint-service-and-system-assigned-managed-identity-rights-are-revoked"></a>Отзыва службы в рамках схемы и права назначенный системой управляемого удостоверения

Когда развертывание будет завершено, чертежей отзывает права **назначенный системой** управляемого удостоверения из подписки. Затем служба чертежей отменяет свои права из подписки. Права удаления предотвращает чертежей становится постоянным владельцем подписки.

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как использовать [статические и динамические параметры](parameters.md).
- Научитесь настраивать [последовательность схемы](sequencing-order.md).
- Узнайте, как применять [блокировку ресурсов схемы](resource-locking.md).
- Узнайте, как [обновлять существующие назначения](../how-to/update-existing-assignments.md).
- Устраняйте проблемы, возникающие во время назначения схемы, с помощью [общих инструкций по устранению неполадок](../troubleshoot/general.md).