---
title: Настройка уровня PremiumV2
description: Вы можете узнать, как улучшить производительность для веб-приложений, мобильных приложений и приложений API в службе приложений Azure с помощью новой ценовой категории Премиум V2.
keywords: служба приложений, служба приложений azure, масштабировать, масштабируемый, план службы приложений, стоимость службы приложений
ms.assetid: ff00902b-9858-4bee-ab95-d3406018c688
ms.topic: article
ms.date: 07/25/2018
ms.custom: seodec18
ms.openlocfilehash: 4fa64562f8d26297d2b2c8a13cd8b6a513c2c630
ms.sourcegitcommit: 1e6c13dc1917f85983772812a3c62c265150d1e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2020
ms.locfileid: "86170026"
---
# <a name="configure-premiumv2-tier-for-azure-app-service"></a>Настройка ценовой категории Премиум V2 для службы приложений Azure

Новая ценовая категория **Премиум V2** предоставляет более быстрые процессоры, хранилище на основе твердотельных накопителей и удвоенное соотношение "память-ядро" по сравнению с имеющимися ценовыми категориями. В дополнение к более высокой производительности вы можете сэкономить свои деньги, запуская приложения на меньшем числе экземпляров. В этой статье показано, как создать приложение с категорией **Премиум V2** либо масштабировать приложение до категории **Премиум V2**.

## <a name="prerequisites"></a>Предварительные требования

Чтобы масштабировать приложение до категории **Премиум V2**, вам требуется приложение службы приложений Azure, работающее с категорией ниже **Премиум V2**. Кроме того, это приложение должно работать в развертывании службы приложений, поддерживающем категорию "Премиум V2".

<a name="availability"></a>

## <a name="premiumv2-availability"></a>Доступность категории Премиум V2

Ценовая категория **Премиум V2** доступна для службы приложений в операционных системах _Windows_ и _Linux_.

Ценовая категория **Премиум V2** доступна в большинстве регионов Azure. Чтобы узнать, доступна ли она в вашем регионе, выполните следующую команду Azure CLI в [Azure Cloud Shell](../cloud-shell/overview.md):

```azurecli-interactive
az appservice list-locations --sku P1V2
```

<a name="create"></a>

## <a name="create-an-app-in-premiumv2-tier"></a>Создание приложения с категорией Премиум V2

Ценовая категория приложения службы приложений определяется в [плане службы приложений](overview-hosting-plans.md), с использованием которого оно выполняется. Вы можете создать план службы приложений отдельно или в процессе создания приложения.

При настройке плана службы приложений на <a href="https://portal.azure.com" target="_blank">портале Azure</a> выберите **Ценовая категория**. 

Выберите **Производство**, а затем выберите **P1V2**, **P2V2** или **P3V2** и щелкните **Применить**.

![Снимок экрана, показывающий Рекомендуемые ценовые категории для вашего приложения.](media/app-service-configure-premium-tier/scale-up-tier-select.png)

> [!IMPORTANT] 
> Если вы не видите параметры **P1V2**, **P2V2** и **P3V2** или они неактивны, значит, категория **Премиум V2** не поддерживается базовым развертыванием службы приложений, содержащим план службы приложений. Ознакомьтесь с разделом [Увеличение масштаба для группы ресурсов из неподдерживаемого региона](#unsupported) для получения дополнительных сведений.

## <a name="scale-up-an-existing-app-to-premiumv2-tier"></a>Увеличение масштаба существующего приложения до категории Премиум V2

Перед масштабированием существующего приложения до категории **Премиум V2** убедитесь, что категория **Премиум V2** доступна. Дополнительные сведения см. в разделе [Доступность категории Премиум V2](#availability). Если эта ценовая категория недоступна, ознакомьтесь с разделом [Увеличение масштаба для группы ресурсов из неподдерживаемого региона](#unsupported).

В зависимости от выбранной среды размещения масштабирование может потребовать дополнительных шагов. 

Откройте страницу службы приложений на <a href="https://portal.azure.com" target="_blank">портале Azure</a>.

В левой области навигации этой страницы выберите **Увеличить масштаб (план службы приложений)**.

![Снимок экрана, показывающий, как масштабировать план службы приложений.](media/app-service-configure-premium-tier/scale-up-tier-portal.png)

Выберите **Производство**, а затем выберите **P1V2**, **P2V2** или **P3V2** и щелкните **Применить**.

![Снимок экрана, показывающий Рекомендуемые ценовые категории для вашего приложения.](media/app-service-configure-premium-tier/scale-up-tier-select.png)

Если операция завершается успешно, отображается страница обзора приложения, показывающая, что теперь используется категория **Премиум V2**.

![Снимок экрана, на котором показана ценовая категория категории премиум v2 на странице обзора приложения.](media/app-service-configure-premium-tier/finished.png)

### <a name="if-you-get-an-error"></a>Если возникла ошибка

Некоторые планы службы приложений не позволяют увеличить масштаб до категории "Премиум V2", если базовое развертывание службы приложений не поддерживает эту ценовую категорию.  Ознакомьтесь с разделом [Увеличение масштаба для группы ресурсов из неподдерживаемого региона](#unsupported) для получения дополнительных сведений.

<a name="unsupported"></a>

## <a name="scale-up-from-an-unsupported-resource-group-and-region-combination"></a>Увеличение масштаба для группы ресурсов из неподдерживаемого региона

Если ваше приложение работает в развертывании службы приложений, не поддерживающем категорию **Премиум V2**, или если оно выполняется в регионе, который в настоящее время не поддерживает категорию **Премиум V2**, необходимо будет повторно развернуть это приложение, чтобы использовать преимущества ценовой категории **Премиум V2**.  Имеются две возможности.

- Создайте **новую** группу ресурсов, а затем создайте **новые** приложение и план службы приложений в этой **новой** группе ресурсов, выбрав нужный регион Azure во время создания.  При создании плана службы приложений **необходимо** выбрать план **Премиум V2**.  Это обеспечит сочетание группы ресурсов, плана службы приложений и региона Azure для создания плана службы приложений в развертывании службы приложений, поддерживающем категорию **Премиум V2**.  Затем повторно разверните код приложения в только что созданном приложении и плане службы приложений. При необходимости впоследствии можно будет уменьшить масштаб плана службы приложений, сменив категорию **Премиум V2**, чтобы сократить расходы. При этом вы в любой момент сможете вернуться к ценовой категории **Премиум V2**.
- Если приложение уже выполняется в существующей категории **Премиум**, то его можно клонировать вместе со всеми параметрами, строками подключения и конфигурацией развертывания в новый план службы приложений, использующий категорию **Премиум V2**.

    ![Снимок экрана, показывающий, как клонировать приложение.](media/app-service-configure-premium-tier/clone-app.png)

    На странице **Клонировать приложений** вы можете создать план службы приложений, использующий категорию **Премиум V2**, в требуемом регионе и указать клонируемые параметры приложения и конфигурации.

## <a name="automate-with-scripts"></a>Автоматизация с помощью сценариев

Создание приложения с категорией **Премиум V2** можно автоматизировать с помощью сценариев, воспользовавшись [Azure CLI](/cli/azure/install-azure-cli) или [Azure PowerShell](/powershell/azure/overview).

### <a name="azure-cli"></a>Azure CLI

Следующая команда создает план службы приложений с ценовой категорией _P1V2_. Ее можно запустить в Cloud Shell. Параметрами для `--sku` являются P1V2, _P2V2_ и _P3V2_.

```azurecli-interactive
az appservice plan create \
    --resource-group <resource_group_name> \
    --name <app_service_plan_name> \
    --sku P1V2
```

### <a name="azure-powershell"></a>Azure PowerShell

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]

Следующая команда создает план службы приложений с ценовой категорией _P1V2_. Параметрами для `-WorkerSize` являются _Мелкий_, _Средний_ и _Крупный_.

```powershell
New-AzAppServicePlan -ResourceGroupName <resource_group_name> `
    -Name <app_service_plan_name> `
    -Location <region_name> `
    -Tier "PremiumV2" `
    -WorkerSize "Small"
```
## <a name="more-resources"></a>Дополнительные ресурсы

[Увеличение масштаба приложения в Azure](manage-scale-up.md)  
[Масштабирование числа экземпляров вручную или автоматически](../monitoring-and-diagnostics/insights-how-to-scale.md)
