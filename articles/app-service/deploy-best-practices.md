---
title: Рекомендации по развертыванию — служба приложений Azure | Документация Майкрософт
description: Узнайте о ключевых компонентах развертывания в службе приложений Azure.
keywords: служба приложений Azure, веб-приложение, развертывание, развертывание, конвейеры, сборка
services: app-service
documentationcenter: ''
author: jasonfreeberg
manager: ''
editor: ''
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.topic: article
ms.date: 07/31/2019
ms.author: jafreebe
ms.custom: ''
ms.openlocfilehash: d1b6444b8512b1b55ac46370e805f8f662f5f555
ms.sourcegitcommit: 82499878a3d2a33a02a751d6e6e3800adbfa8c13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/28/2019
ms.locfileid: "70070683"
---
# <a name="deployment-best-practices"></a>Рекомендации по развертыванию

Каждая группа разработчиков имеет уникальные требования, которые могут усложнить реализацию эффективного конвейера развертывания в любой облачной службе. В этой статье представлены три основных компонента развертывания в службе приложений: источники развертывания, конвейеры сборки и механизмы развертывания. В этой статье также рассматриваются некоторые рекомендации и советы по конкретным стекам языков.

## <a name="deployment-components"></a>Компоненты развертывания

### <a name="deployment-source"></a>Источник развертывания

Источником развертывания является расположение кода приложения. Для рабочих приложений источник развертывания обычно является репозиторием, размещенным по системе управления версиями, например [GitHub, BitBucket или Azure Repos](deploy-continuous-deployment.md). Для сценариев разработки и тестирования источником развертывания может быть [проект на локальном компьютере](deploy-local-git.md). Служба приложений также поддерживает [папки OneDrive и Dropbox](deploy-content-sync.md) в качестве источников развертывания. Хотя облачные папки могут упростить начало работы со службой приложений, обычно не рекомендуется использовать этот источник для рабочих приложений корпоративного уровня. 

### <a name="build-pipeline"></a>Конвейер сборки

После выбора источника развертывания следующим шагом будет выбор конвейера сборки. Конвейер сборки считывает исходный код из источника развертывания и выполняет ряд действий (например, компиляция кода, Минификация HTML и JavaScript, выполнение тестов и компоненты упаковки), чтобы получить приложение в готовом к запуске состоянии. Конкретные команды, выполняемые конвейером сборки, зависят от вашего стека языка. Эти операции могут выполняться на сервере сборки, например Azure Pipelines или выполняться локально.

### <a name="deployment-mechanism"></a>Механизм развертывания

Механизм развертывания — это действие, которое используется для помещения созданного приложения в каталог */Хоме/Сите/ввврут* веб-приложения. Каталог */ввврут* — это расположение подключенного хранилища, которое совместно используется всеми экземплярами веб-приложения. Когда механизм развертывания помещает приложение в этот каталог, экземпляры получают уведомление для синхронизации новых файлов. Служба приложений поддерживает следующие механизмы развертывания:

- Конечные точки KUDU: [KUDU](https://github.com/projectkudu/kudu/wiki) — это средство повышения производительности разработчика с открытым исходным кодом, которое работает как отдельный процесс в службе приложений Windows, а также как второй контейнер в службе приложений Linux. KUDU обрабатывает непрерывные развертывания и предоставляет конечные точки HTTP для развертывания, такие как зипдеплой.
- FTP и WebDeploy: Используя [учетные данные сайта или пользователя](deploy-configure-credentials.md), можно отправлять файлы [через FTP](deploy-ftp.md) или веб-развертывание. Эти механизмы не проходят через KUDU.  

Средства развертывания, такие как Azure Pipelines, Jenkins и подключаемые модули редактора, используют один из этих механизмов развертывания.

## <a name="language-specific-considerations"></a>Рекомендации для конкретного языка

### <a name="java"></a>Java

Используйте KUDU [зипдеплой/](deploy-zip.md) API для развертывания JAR-приложений, а также [WARDEPLOY/](deploy-zip.md#deploy-war-file) for War Apps. Если вы используете Jenkins, эти API можно использовать непосредственно на этапе развертывания. Дополнительные сведения см. в [этой статье](../jenkins/execute-cli-jenkins-pipeline.md).

### <a name="node"></a>Узел

По умолчанию KUDU выполняет шаги сборки для приложения узла (`npm install`). Если вы используете службу сборки, например Azure DevOps, сборка KUDU не требуется. Чтобы отключить сборку KUDU, создайте параметр `SCM_DO_BUILD_DURING_DEPLOYMENT`приложения со `false`значением.

### <a name="net"></a>.NET 

По умолчанию KUDU выполняет шаги сборки для приложения .NET (`dotnet build`). Если вы используете службу сборки, например Azure DevOps, сборка KUDU не требуется. Чтобы отключить сборку KUDU, создайте параметр `SCM_DO_BUILD_DURING_DEPLOYMENT`приложения со `false`значением.

## <a name="other-deployment-considerations"></a>Другие рекомендации по развертыванию

### <a name="use-deployment-slots"></a>Использование слотов развертывания

Везде, где это возможно, используйте [слоты развертывания](deploy-staging-slots.md) при развертывании новой рабочей сборки. При использовании уровня плана службы приложений Standard или выше можно развернуть приложение в промежуточной среде, проверить изменения и выполнить тесты состояния. Когда вы будете готовы, можно поменять местами промежуточные и рабочие слоты. Операция подкачки закрывает необходимые рабочие экземпляры в соответствии с масштабом рабочей среды, тем самым устраняя простои. 

### <a name="local-cache"></a>локальный кэш

Содержимое Службы приложений Azure хранится в Службе хранилища Azure; оно доступно в долгосрочном режиме в общей папке содержимого. Однако некоторым приложениям требуется только высокопроизводительное хранилище содержимого, доступное только для чтения, которое можно запускать с высокой доступностью. Эти приложения могут использовать [локальный кэш](overview-local-cache.md). Локальный кэш не рекомендуется для сайтов управления содержимым, таких как WordPress.

Для предотвращения простоя всегда используйте локальный кэш в сочетании с [слотами развертывания] (Deploy-промежуточные слоты MD). Сведения об использовании этих функций совместно см. в [этом разделе](overview-local-cache.md#best-practices-for-using-app-service-local-cache) .

### <a name="high-cpu-or-memory"></a>Высокая загрузка ЦП или памяти

Если ваш план службы приложений использует более 90% доступного процессора или памяти, то при обработке развертывания может возникнуть проблема с базовой виртуальной машиной. В этом случае можно временно увеличить число экземпляров для выполнения развертывания. После завершения развертывания можно вернуть число экземпляров к его предыдущему значению.
