---
title: Входящие и исходящие IP-адреса в Службе приложений Azure | Документация Майкрософт
description: Правила использования входящих и исходящих IP-адресов в Службе приложений, а также способ поиска сведений о них для вашего приложения.
services: app-service
documentationcenter: ''
author: cephalin
manager: cfowler
editor: ''
ms.service: app-service
ms.workload: web
ms.tgt_pltfrm: na
ms.topic: article
ms.date: 06/06/2019
ms.author: cephalin
ms.custom: seodec18
ms.openlocfilehash: 2508090fa8831c8fefb0e710c28e512ec0c94c6e
ms.sourcegitcommit: 82499878a3d2a33a02a751d6e6e3800adbfa8c13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/28/2019
ms.locfileid: "70074141"
---
# <a name="inbound-and-outbound-ip-addresses-in-azure-app-service"></a>Входящие и исходящие IP-адреса в Службе приложений Azure

[Служба приложений Azure](overview.md) является мультитенантной, за исключением [сред службы приложений](environment/intro.md). Приложения, которые не находятся в среде службы приложений (то есть не находятся на [изолированном уровне](https://azure.microsoft.com/pricing/details/app-service/)), используют сетевую инфраструктуру совместно с другими приложениями. Это означает, что входящий и исходящий IP-адреса в приложении могут различаться, а в определенных ситуациях даже изменяться по ходу работы. 

[Среды службы приложений](environment/intro.md) используют выделенные сетевые инфраструктуры, поэтому приложения в среде службы приложений получают выделенные статические IP-адреса для входящих и исходящих подключений.

## <a name="when-inbound-ip-changes"></a>Если изменяется входящий IP-адрес

Независимо от количества масштабированных экземпляров, каждое приложение использует только один входящий IP-адрес. Входящий IP-адрес может измениться, если вы выполните любое из следующих действий:

- удалите приложение и создадите его заново в другой группе ресурсов;
- удалите последнее приложение в некотором сочетании группы ресурсов _и_ региона и создадите его заново;
- удалите существующую SSL-привязку, например во время обновления сертификатов (см. раздел [об обновлении сертификатов](app-service-web-tutorial-custom-ssl.md#renew-certificates)).

## <a name="find-the-inbound-ip"></a>Поиск входящего IP-адреса

Просто выполните следующую команду в локальном терминале:

```bash
nslookup <app-name>.azurewebsites.net
```

## <a name="get-a-static-inbound-ip"></a>Получение статического входящего IP-адреса

Для некоторых задач приложениям может потребоваться выделенный статический IP-адрес. Чтобы получить статический входящий IP-адрес, следует настроить [SSL-привязку на основе IP-адреса](app-service-web-tutorial-custom-ssl.md#secure-a-custom-domain). Если вам не нужны функциональные возможности SSL для защиты приложения, для этой привязки можно даже передать самозаверяющий сертификат. Привязка SSL на основе IP-адреса сопоставляет сертификат напрямую с IP-адресом, и для этого служба приложений предоставляет ей статический IP-адрес. 

## <a name="when-outbound-ips-change"></a>Если изменяются исходящие IP-адреса

Независимо от количества масштабированных экземпляров, каждое приложение в каждый конкретный момент времени использует определенный набор исходящих IP-адресов. Любое исходящее подключение из приложения службы приложений, например к внутренней базе данных, использует один из исходящих IP-адресов в качестве IP-адреса источника. У вас нет возможности заранее узнать, какой IP-адрес экземпляр приложения будет использовать для конкретного исходящего подключения, а значит на брандмауэре внутренней службы необходимо открыть все исходящие IP-адреса приложения.

Набор исходящих IP-адресов приложения изменяется при переводе приложения с любого из низких уровней (**Базовый**, **Стандартный** или **Премиум**) на уровень **Премиум V2** или обратно.

Набор всех возможных исходящих IP-адресов, которые может использовать приложение, независимо от ценовых категорий, путем поиска `possibleOutboundIPAddresses` свойства или в поле Дополнительные исходящие **IP-адреса** в колонке **Свойства** в портал Azure. См. также раздел [Поиск исходящих IP-адресов](#find-outbound-ips).

## <a name="find-outbound-ips"></a>Поиск исходящих IP-адресов

Чтобы найти на портале Azure исходящие IP-адреса, которые используются в конкретный момент в приложении, щелкните **Свойства** в области навигации приложения слева. Они перечислены в поле **Исходящие IP-адреса** .

Эти же сведения можно получить, выполнив следующую команду в [Cloud Shell](../cloud-shell/quickstart.md).

```azurecli-interactive
az webapp show --resource-group <group_name> --name <app_name> --query outboundIpAddresses --output tsv
```

```azurepowershell
(Get-AzWebApp -ResourceGroup <group_name> -name <app_name>).OutboundIpAddresses
```

Чтобы найти _все_ возможные исходящие IP-адреса для приложения, независимо от ценовых категорий, щелкните **свойства** в левой области навигации приложения. Они перечислены в поле **Дополнительные исходящие IP-адреса** .

Эти же сведения можно получить, выполнив следующую команду в [Cloud Shell](../cloud-shell/quickstart.md).

```azurecli-interactive
az webapp show --resource-group <group_name> --name <app_name> --query possibleOutboundIpAddresses --output tsv
```

```azurepowershell
(Get-AzWebApp -ResourceGroup <group_name> -name <app_name>).PossibleOutboundIpAddresses
```

## <a name="next-steps"></a>Следующие шаги

Узнайте, как ограничить входящий трафик по IP-адресам источников.

> [!div class="nextstepaction"]
> [Ограничения статических IP-адресов](app-service-ip-restrictions.md)
