---
title: Входящие и исходящие IP-адреса
description: Узнайте, как входящие и исходящие IP-адреса используются в службе приложений Azure при их изменении, а также о том, как найти адреса для приложения.
ms.topic: article
ms.date: 06/06/2019
ms.custom: seodec18
ms.openlocfilehash: 8bcd80fde95e467513590f3ed09b1dadd2646aee
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "81537633"
---
# <a name="inbound-and-outbound-ip-addresses-in-azure-app-service"></a>Входящие и исходящие IP-адреса в Службе приложений Azure

[Служба приложений Azure](overview.md) является мультитенантной, за исключением [сред службы приложений](environment/intro.md). Приложения, которые не находятся в среде службы приложений (то есть не находятся на [изолированном уровне](https://azure.microsoft.com/pricing/details/app-service/)), используют сетевую инфраструктуру совместно с другими приложениями. Это означает, что входящий и исходящий IP-адреса в приложении могут различаться, а в определенных ситуациях даже изменяться по ходу работы. 

[Среды службы приложений](environment/intro.md) используют выделенные сетевые инфраструктуры, поэтому приложения в среде службы приложений получают выделенные статические IP-адреса для входящих и исходящих подключений.

## <a name="when-inbound-ip-changes"></a>Если изменяется входящий IP-адрес

Независимо от количества масштабированных экземпляров, каждое приложение использует только один входящий IP-адрес. Входящий IP-адрес может измениться, если вы выполните любое из следующих действий:

- удалите приложение и создадите его заново в другой группе ресурсов;
- удалите последнее приложение в некотором сочетании группы ресурсов _и_ региона и создадите его заново;
- Удаление существующей привязки TLS, например во время обновления сертификата (см. статью об [обновлении сертификата](configure-ssl-certificate.md#renew-certificate)).

## <a name="find-the-inbound-ip"></a>Поиск входящего IP-адреса

Просто выполните следующую команду в локальном терминале:

```bash
nslookup <app-name>.azurewebsites.net
```

## <a name="get-a-static-inbound-ip"></a>Получение статического входящего IP-адреса

Для некоторых задач приложениям может потребоваться выделенный статический IP-адрес. Чтобы получить статический входящий IP-адрес, необходимо [защитить личный домен](configure-ssl-bindings.md#secure-a-custom-domain). Если для защиты приложения не требуются функции TLS, можно даже передать самозаверяющий сертификат для этой привязки. В привязке TLS на основе IP-адреса сертификат привязан к самому IP-адресу, поэтому служба приложений подготавливает статический IP-адрес, чтобы сделать это. 

## <a name="when-outbound-ips-change"></a>Если изменяются исходящие IP-адреса

Независимо от количества масштабированных экземпляров, каждое приложение в каждый конкретный момент времени использует определенный набор исходящих IP-адресов. Любое исходящее подключение из приложения службы приложений, например к внутренней базе данных, использует один из исходящих IP-адресов в качестве IP-адреса источника. У вас нет возможности заранее узнать, какой IP-адрес экземпляр приложения будет использовать для конкретного исходящего подключения, а значит на брандмауэре внутренней службы необходимо открыть все исходящие IP-адреса приложения.

Набор исходящих IP-адресов приложения изменяется при переводе приложения с любого из низких уровней (**Базовый**, **Стандартный** или **Премиум**) на уровень **Премиум V2** или обратно.

Набор всех возможных исходящих IP-адресов, которые может использовать приложение, независимо от ценовых категорий, путем поиска `possibleOutboundIpAddresses` свойства или в поле **Дополнительные исходящие IP-адреса** в колонке **Свойства** в портал Azure. См. также раздел [Поиск исходящих IP-адресов](#find-outbound-ips).

## <a name="find-outbound-ips"></a>Поиск исходящих IP-адресов

Чтобы найти на портале Azure исходящие IP-адреса, которые используются в конкретный момент в приложении, щелкните **Свойства** в области навигации приложения слева. Они перечислены в поле **Исходящие IP-адреса** .

Эти же сведения можно получить, выполнив следующую команду в [Cloud Shell](../cloud-shell/quickstart.md).

```azurecli-interactive
az webapp show --resource-group <group_name> --name <app_name> --query outboundIpAddresses --output tsv
```

```azurepowershell
(Get-AzWebApp -ResourceGroup <group_name> -name <app_name>).OutboundIpAddresses
```

Чтобы найти _все_ возможные исходящие IP-адреса для приложения, независимо от ценовых категорий, щелкните **свойства** в левой области навигации приложения. Они перечислены в поле **Дополнительные исходящие IP-адреса** .

Эти же сведения можно получить, выполнив следующую команду в [Cloud Shell](../cloud-shell/quickstart.md).

```azurecli-interactive
az webapp show --resource-group <group_name> --name <app_name> --query possibleOutboundIpAddresses --output tsv
```

```azurepowershell
(Get-AzWebApp -ResourceGroup <group_name> -name <app_name>).PossibleOutboundIpAddresses
```

## <a name="next-steps"></a>Дальнейшие шаги

Узнайте, как ограничить входящий трафик по IP-адресам источников.

> [!div class="nextstepaction"]
> [Ограничения статических IP-адресов](app-service-ip-restrictions.md)
