---
title: Входящие/исходящие IP-адреса
description: Узнайте, как входящие и исходящие IP-адреса используются в службе приложений Azure, когда они меняются, и как найти адреса для вашего приложения.
ms.topic: article
ms.date: 06/06/2019
ms.custom: seodec18
ms.openlocfilehash: 8bcd80fde95e467513590f3ed09b1dadd2646aee
ms.sourcegitcommit: 31ef5e4d21aa889756fa72b857ca173db727f2c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81537633"
---
# <a name="inbound-and-outbound-ip-addresses-in-azure-app-service"></a>Входящие и исходящие IP-адреса в Службе приложений Azure

[Служба приложений Azure](overview.md) является мультитенантной, за исключением [сред службы приложений](environment/intro.md). Приложения, которые не находятся в среде службы приложений (то есть не находятся на [изолированном уровне](https://azure.microsoft.com/pricing/details/app-service/)), используют сетевую инфраструктуру совместно с другими приложениями. Это означает, что входящий и исходящий IP-адреса в приложении могут различаться, а в определенных ситуациях даже изменяться по ходу работы. 

[Среды службы приложений](environment/intro.md) используют выделенные сетевые инфраструктуры, поэтому приложения в среде службы приложений получают выделенные статические IP-адреса для входящих и исходящих подключений.

## <a name="when-inbound-ip-changes"></a>Если изменяется входящий IP-адрес

Независимо от количества масштабированных экземпляров, каждое приложение использует только один входящий IP-адрес. Входящий IP-адрес может измениться, если вы выполните любое из следующих действий:

- удалите приложение и создадите его заново в другой группе ресурсов;
- удалите последнее приложение в некотором сочетании группы ресурсов _и_ региона и создадите его заново;
- Удалите существующую привязку TLS, например, во время обновления сертификата (см. [Сертификат обновления).](configure-ssl-certificate.md#renew-certificate)

## <a name="find-the-inbound-ip"></a>Найти входящий IP

Просто запустите следующую команду в локальном терминале:

```bash
nslookup <app-name>.azurewebsites.net
```

## <a name="get-a-static-inbound-ip"></a>Получить статический входящий IP

Для некоторых задач приложениям может потребоваться выделенный статический IP-адрес. Чтобы получить статический входящий IP-адрес, необходимо [обеспечить пользовательский домен.](configure-ssl-bindings.md#secure-a-custom-domain) Если вам на самом деле не нужна функция TLS для защиты вашего приложения, вы даже можете загрузить сертификат, подписанный самостоятельно, для этого привязки. В привязке TLS на основе IP сертификат привязан к самому IP-адресу, поэтому Служба app Service содержит статический IP-адрес, чтобы это произошло. 

## <a name="when-outbound-ips-change"></a>Если изменяются исходящие IP-адреса

Независимо от количества масштабированных экземпляров, каждое приложение в каждый конкретный момент времени использует определенный набор исходящих IP-адресов. Любое исходящее подключение из приложения службы приложений, например к внутренней базе данных, использует один из исходящих IP-адресов в качестве IP-адреса источника. У вас нет возможности заранее узнать, какой IP-адрес экземпляр приложения будет использовать для конкретного исходящего подключения, а значит на брандмауэре внутренней службы необходимо открыть все исходящие IP-адреса приложения.

Набор исходящих IP-адресов приложения изменяется при переводе приложения с любого из низких уровней (**Базовый**, **Стандартный** или **Премиум**) на уровень **Премиум V2** или обратно.

Вы можете найти набор всех возможных исходящих IP-адресов, которые может `possibleOutboundIpAddresses` использовать ваше приложение, независимо от уровня ценообразования, ища свойство или в поле **дополнительных исходящих IP-адресов** на blade **Properties** на портале Azure. См. также раздел [Поиск исходящих IP-адресов](#find-outbound-ips).

## <a name="find-outbound-ips"></a>Поиск исходящих IP-адресов

Чтобы найти на портале Azure исходящие IP-адреса, которые используются в конкретный момент в приложении, щелкните **Свойства** в области навигации приложения слева. Они перечислены в поле **исходящих IP-адресов.**

Эти же сведения можно получить, выполнив следующую команду в [Cloud Shell](../cloud-shell/quickstart.md).

```azurecli-interactive
az webapp show --resource-group <group_name> --name <app_name> --query outboundIpAddresses --output tsv
```

```azurepowershell
(Get-AzWebApp -ResourceGroup <group_name> -name <app_name>).OutboundIpAddresses
```

Чтобы найти _все_ возможные исходящие IP-адреса для вашего приложения, независимо от уровня ценообразования, нажмите **Свойства** в левой навигации вашего приложения. Они перечислены в поле **дополнительных исходящих IP-адресов.**

Эти же сведения можно получить, выполнив следующую команду в [Cloud Shell](../cloud-shell/quickstart.md).

```azurecli-interactive
az webapp show --resource-group <group_name> --name <app_name> --query possibleOutboundIpAddresses --output tsv
```

```azurepowershell
(Get-AzWebApp -ResourceGroup <group_name> -name <app_name>).PossibleOutboundIpAddresses
```

## <a name="next-steps"></a>Следующие шаги

Узнайте, как ограничить входящий трафик по IP-адресам источников.

> [!div class="nextstepaction"]
> [Ограничения статических IP-адресов](app-service-ip-restrictions.md)
