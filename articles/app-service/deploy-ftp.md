---
title: Развертывание содержимого с помощью FTP/S
description: Узнайте, как развернуть приложение в службе приложений Azure с помощью FTP или FTPS. Повысьте безопасность веб-сайта, отключив незашифрованный FTP.
ms.assetid: ae78b410-1bc0-4d72-8fc4-ac69801247ae
ms.topic: article
ms.date: 09/18/2019
ms.reviewer: dariac
ms.custom: seodec18
ms.openlocfilehash: fcc7c5b8fa182cace6e3dae0b1cae4cd41c5dcb9
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "81532601"
---
# <a name="deploy-your-app-to-azure-app-service-using-ftps"></a>Развертывание приложения в службе приложений Azure с помощью FTP или FTPS

В этой статье показано, как с помощью FTP или FTPS развернуть веб-приложение, серверную частью мобильного приложения или приложение API в [службе приложений Azure](https://go.microsoft.com/fwlink/?LinkId=529714).

Конечная точка FTP или FTPS для приложения уже активна. Чтобы обеспечить развертывание через FTP или FTPS, не требуется никаких настроек.

## <a name="open-ftp-dashboard"></a>Откройте панель мониторинга FTP

1. В [портал Azure](https://portal.azure.com)найдите и выберите **службы приложений**.

    ![Выполните поиск по запросу службы приложений.](media/app-service-continuous-deployment/search-for-app-services.png)

2. Выберите веб-приложение, которое требуется развернуть.

    ![Выберите свое приложение.](media/app-service-continuous-deployment/select-your-app.png)

3. Выберите**панель мониторинга** > **FTP** >  **центра развертывания**.

    ![Откройте панель мониторинга FTP](./media/app-service-deploy-ftp/open-dashboard.png)

## <a name="get-ftp-connection-information"></a>Получение информации о подключении по FTP

На панели мониторинга FTP выберите **Копировать** , чтобы скопировать конечную точку FTPS и учетные данные приложения.

![Сведения о копировании FTP](./media/app-service-deploy-ftp/ftp-dashboard.png)

Рекомендуется использовать **учетные данные приложения** для развертывания приложения, так как они уникальны для каждого приложения. Тем не менее если щелкнуть **Учетные данные пользователя**, можно задать уровень учетных данных пользователя, которые потом можно использовать для входа в FTP/S во всех службах приложений своей подписки.

> [!NOTE]
> Проверка подлинности в конечной точке FTP или FTPS с использованием учетных данных уровня пользователя рекуирерс имя пользователя в следующем формате: 
>
>`<app-name>\<user-name>`
>
> Так как учетные данные на уровне пользователя связаны с пользователем, а не с конкретным ресурсом, имя пользователя должно быть в этом формате для направления действия входа в подходящую конечную точку приложения.
>

## <a name="deploy-files-to-azure"></a>Развертывание файлов в Azure

1. Подключитесь к приложению из клиента FTP (например, [Visual Studio](https://www.visualstudio.com/vs/community/), [Cyberduck](https://cyberduck.io/) или [WinSCP](https://winscp.net/index.php)), используя полученные сведения.
2. Скопируйте файлы и соответствующую им структуру каталогов в Azure в каталог [**/site/wwwroot**](https://github.com/projectkudu/kudu/wiki/File-structure-on-azure) (или в каталог веб-заданий **/site/wwwroot/App_Data/Jobs/**).
3. Перейдите по URL-адресу приложения, чтобы убедиться, что приложение работает правильно. 

> [!NOTE] 
> В отличие от [развертываний на основе Git](deploy-local-git.md), развертывание по FTP не поддерживает следующие инструменты автоматизации развертывания: 
>
> - восстановление зависимостей (например, в инструментах автоматизации NuGet, NPM, PIP и Composer);
> - компиляция двоичных файлов .NET;
> - создание файла Web.config (вот [пример для Node.js](https://github.com/projectkudu/kudu/wiki/Using-a-custom-web.config-for-Node-apps)).
> 
> Создайте эти необходимые файлы вручную или на локальном компьютере, а затем разверните их вместе с приложением.
>

## <a name="enforce-ftps"></a>Принудительное применение FTPS

Для повышения безопасности следует разрешить только FTP через TLS/SSL. Вы также можете отключить и FTP, и FTPS, если развертывание FTP вам не нужно.

На странице ресурсов приложения в [портал Azure](https://portal.azure.com)выберите **Конфигурация** > **Общие параметры** в левой области навигации.

Чтобы отключить незашифрованный FTP, выберите **FTPS только** в **состоянии FTP**. Чтобы полностью отключить протоколы FTP и FTPS, выберите значение **отключено**. По завершении щелкните **Сохранить**. Если используется **только FTPS**, необходимо принудительно включить TLS 1,2 или более поздней версии, перейдя в колонку **параметров TLS/SSL** веб-приложения. Протоколы TLS 1.0 и 1.1 не поддерживаются для параметра **Только FTPS**.

![Отключение FTP(S)](./media/app-service-deploy-ftp/disable-ftp.png)

## <a name="automate-with-scripts"></a>Автоматизация с помощью сценариев

Чтобы развернуть FTP с использованием [Azure CLI](/cli/azure), см раздел [Создание веб-приложения и развертывания файлов по протоколу FTP (Azure CLI)](./scripts/cli-deploy-ftp.md).

Чтобы развернуть FTP с использованием [Azure PowerShell](/cli/azure), см раздел [Передача файлов на веб-приложения с помощью протокола FTP (PowerShell)](./scripts/powershell-deploy-ftp.md).

[!INCLUDE [What happens to my app during deployment?](../../includes/app-service-deploy-atomicity.md)]

## <a name="troubleshoot-ftp-deployment"></a>Устранение неполадок с развертыванием FTP

- [Как устранять неполадки с развертыванием FTP?](#how-can-i-troubleshoot-ftp-deployment)
- [Я не могу выполнять FTP и публиковать мой код. Как устранить проблему?](#im-not-able-to-ftp-and-publish-my-code-how-can-i-resolve-the-issue)
- [Как применить пассивный режим для подключения к FTP в Службе приложений Azure?](#how-can-i-connect-to-ftp-in-azure-app-service-via-passive-mode)

### <a name="how-can-i-troubleshoot-ftp-deployment"></a>Как устранять неполадки с развертыванием FTP?

При устранении неполадок с развертыванием FTP первым делом следует выяснить, связана ли проблема с самим развертыванием или с приложением среды выполнения.

Ошибки развертывания обычно приводят к тому, что в приложении совсем не развертываются файлы или развертываются не те файлы, которые нужны. Для устранения неполадок изучите данные о развертывании FTP или попробуйте применить альтернативный путь развертывания (например, систему управления версиями).

Проблемы с приложением среды выполнения обычно приводят к тому, что приложение ведет себя отличным от ожидаемого образом после правильного развертывания нужных файлов. Для устранения неполадок следует сосредоточиться на поведении кода в среде выполнения или на конкретных сценариях сбоя.

Чтобы отделить проблемы развертывания от проблем среды выполнения, воспользуйтесь рекомендациями из [этой статьи](https://github.com/projectkudu/kudu/wiki/Deployment-vs-runtime-issues).

### <a name="im-not-able-to-ftp-and-publish-my-code-how-can-i-resolve-the-issue"></a>Мне не удается подключиться по FTP для публикации кода. Как мне решить эту проблему?
Убедитесь, что вы правильно ввели имя узла и [учетные данные](#open-ftp-dashboard). Также убедитесь, что на вашем компьютере брандмауэр не блокирует следующие порты FTP.

- Порт подключения для управления FTP: 21
- Порт подключения к данным FTP: 989, 10001–10300.
 
### <a name="how-can-i-connect-to-ftp-in-azure-app-service-via-passive-mode"></a>Как применить пассивный режим для подключения к FTP в Службе приложений Azure?
Служба приложений Azure поддерживает подключение как в активном, так и в пассивном режимах. Пассивный режим является предпочтительным, так как компьютеры развертывания обычно защищены брандмауэром (встроенным в операционную систему или развернутым отдельно в домашней или корпоративной сети). См. также [пример из документации по WinSCP](https://winscp.net/docs/ui_login_connection). 

## <a name="next-steps"></a>Дальнейшие шаги

Чтобы изучить более сложные сценарии развертывания, ознакомьтесь с [развертыванием в Azure с помощью Git](deploy-local-git.md). Развертывание в Azure на основе Git обеспечивает систему управления версиями, восстановление пакета, MSBuild и многое другое.

## <a name="more-resources"></a>Дополнительные ресурсы

* [Учетные данные развертывания службы приложений Azure](deploy-configure-credentials.md)
