---
title: Восстановление удаленных приложений
description: Узнайте, как восстановить удаленное приложение в Службе приложений Azure. Избегайте проблем, вызванных случайным удалением приложения.
author: btardif
ms.author: byvinyal
ms.date: 9/23/2019
ms.topic: article
ms.openlocfilehash: d147c87e8fb0fa9e01ba2dbaf732adaae082bcd7
ms.sourcegitcommit: 1692e86772217fcd36d34914e4fb4868d145687b
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2020
ms.locfileid: "84167797"
---
# <a name="restore-deleted-app-service-app-using-powershell"></a>Восстановление удаленного приложения Службы приложений с помощью PowerShell

Если вы случайно удалили приложение в Службе приложений Azure, его можно восстановить с помощью команд из [модуля Az PowerShell](https://docs.microsoft.com/powershell/azure/?view=azps-2.6.0&viewFallbackFrom=azps-2.2.0).

> [!NOTE]
> Удаленные приложения очищаются из системы через 30 дней после первоначального удаления. После очистки приложение нельзя восстановить.
>

## <a name="re-register-app-service-resource-provider"></a>Повторная регистрация поставщика ресурсов Службы приложений
Некоторые клиенты могут столкнуться с проблемой, при которой не удается получить список удаленных приложений. Устранить эту проблему можно, выполнив следующую команду.

```powershell
 Register-AzResourceProvider -ProviderNamespace "Microsoft.Web"
```

## <a name="list-deleted-apps"></a>Вывод списка удаленных приложений

Чтобы получить коллекцию удаленных приложений, можно использовать `Get-AzDeletedWebApp`.

Дополнительные сведения о конкретном удаленном приложении можно получить следующим образом.

```powershell
Get-AzDeletedWebApp -Name <your_deleted_app> -Location <your_deleted_app_location> 
```

Подробные сведения включают в себя следующее.

- **DeletedSiteId**: уникальный идентификатор приложения на случай, если удалено несколько приложений с одним и тем же именем.
- **SubscriptionID**: подписка, содержащая удаленный ресурс;
- **Расположение.** расположение исходного приложения;
- **ResourceGroupName**: имя исходной группы ресурсов;
- **Name** (Имя). имя исходного приложения.
- **Slot**: имя слота.
- **Время удаления**: время удаления приложения.  

## <a name="restore-deleted-app"></a>Восстановление удаленного приложения
>[!NOTE]
> `Restore-AzDeletedWebApp` не поддерживается для приложений-функций.

Найдите приложение, которое вы хотите восстановить, и используйте `Restore-AzDeletedWebApp`.

```powershell
Restore-AzDeletedWebApp -ResourceGroupName <my_rg> -Name <my_app> -TargetAppServicePlanName <my_asp>
```
> [!NOTE]
> Слоты развертывания не восстанавливаются в составе приложения. Если необходимо восстановить промежуточный слот, используйте флажок `-Slot <slot-name>`.
>

Входные данные для команды

- **Группа ресурсов**. Целевая группа ресурсов, в которой будет восстановлено приложение
- **Name** (Имя). Имя приложения, должно быть глобально уникальным.
- **TargetAppServicePlanName**: план Службы приложений, связанный с приложением

По умолчанию `Restore-AzDeletedWebApp` восстановит как конфигурацию приложения, так и содержимое. Если вы хотите восстановить только содержимое, используйте флажок `-RestoreContentOnly` с этим командлетом.

> [!NOTE]
> Если приложение было размещено в среде Службы приложений, а затем удалено из нее, его можно восстановить только в том случае, если соответствующая Среда службы приложений по-прежнему существует.
>

Полный справочник по командлетам можно найти здесь: [Restore-AzDeletedWebApp](https://docs.microsoft.com/powershell/module/az.websites/restore-azdeletedwebapp).
