---
title: Настройка проверки подлинности Майкрософт
description: Узнайте, как настроить проверку подлинности учетной записи Майкрософт в качестве поставщика удостоверений для приложения службы приложений.
ms.assetid: ffbc6064-edf6-474d-971c-695598fd08bf
ms.topic: article
ms.date: 08/08/2019
ms.custom: seodec18
ms.openlocfilehash: 12e16cc7e17ae217a334fe25d71672ab2cafa5a8
ms.sourcegitcommit: aee08b05a4e72b192a6e62a8fb581a7b08b9c02a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/09/2020
ms.locfileid: "75768441"
---
# <a name="configure-your-app-service-app-to-use-microsoft-account-login"></a>Настройка приложения службы приложений для использования входа в учетную запись Майкрософт

[!INCLUDE [app-service-mobile-selector-authentication](../../includes/app-service-mobile-selector-authentication.md)]

В этом разделе показано, как настроить службу приложений Azure для использования учетной записи Майкрософт в качестве поставщика проверки подлинности. 

## <a name="register-microsoft-account"> </a>Регистрация приложения с помощью учетной записи Майкрософт

1. Перейдите к [**Регистрация приложений**](https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade) в портал Azure. При необходимости выполните вход с помощью учетная запись Майкрософт.
1. Выберите **Новая регистрация**, а затем введите имя приложения.
1. В списке **URI перенаправления**выберите **веб**и введите `https://<app-domain-name>/.auth/login/microsoftaccount/callback`. Замените *\<app-domain-name >* именем домена приложения.  Например, `https://contoso.azurewebsites.net/.auth/login/microsoftaccount/callback`. Не забудьте использовать схему HTTPS в URL-адресе.

1. Выберите **Зарегистрировать**.
1. Скопируйте **идентификатор приложения (клиента)** . Он понадобится вам позднее.
1. На левой панели выберите **сертификаты & секреты** > **новый секрет клиента**. Введите описание, выберите длительность действия и нажмите кнопку **Добавить**.
1. Скопируйте значение, которое отображается на странице **сертификаты & секреты** . После выхода из этой страницы она не будет отображаться снова.

    > [!IMPORTANT]
    > Значение секрета клиента (пароль) — это важные учетные данные безопасности. Не сообщайте пароль никому и не раскрывайте его в клиентском приложении.

## <a name="secrets"> </a>Добавление сведений об учетной записи Майкрософт в приложение службы приложений

1. Перейдите к приложению в [портал Azure].
1. Выберите **параметры** > **Проверка подлинности и авторизация**и убедитесь, что **Проверка подлинности службы приложений** **включена.**
1. В разделе **поставщики проверки подлинности**выберите **учетная запись Майкрософт**. Вставьте идентификатор приложения (клиента) и секрет клиента, полученные ранее. Включите все области, необходимые для приложения.
1. Нажмите кнопку **ОК**.

   Служба приложений обеспечивает проверку подлинности, но не ограничивает разрешенный доступ к содержимому и API-интерфейсам сайта. Авторизация пользователей должна быть включена в код приложения.

1. Используемых Чтобы ограничить доступ к учетная запись Майкрософт пользователям, задайте **действие, которое будет выполняться, если запрос не прошел проверку подлинности** для **входа с помощью учетной записи Майкрософт**. При установке этой функции приложению требуется проверка подлинности всех запросов. Он также перенаправляет все запросы без проверки подлинности на учетная запись Майкрософт для проверки подлинности.

   > [!CAUTION]
   > Таким образом, ограниченный доступ применяется ко всем вызовам приложения, что может быть нежелательно для приложений, имеющих общедоступную домашнюю страницу, как во многих одностраничных приложениях. Для таких приложений рекомендуется **Разрешить анонимные запросы (без действий)** , чтобы приложение вручную начинало проверку подлинности. Дополнительные сведения см. в разделе [поток проверки подлинности](overview-authentication-authorization.md#authentication-flow).

1. Щелкните **Сохранить**.

Теперь вы можете использовать учетную запись Майкрософт для проверки подлинности в приложении.

## <a name="related-content"> </a>Дальнейшие действия

[!INCLUDE [app-service-mobile-related-content-get-started-users](../../includes/app-service-mobile-related-content-get-started-users.md)]

<!-- URLs. -->

[My Applications]: https://go.microsoft.com/fwlink/p/?LinkId=262039
[Портал Azure]: https://portal.azure.com/
