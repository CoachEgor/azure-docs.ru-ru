---
title: 'Настройка приложений на портале: службе приложений Azure'
description: Узнайте, как настраивать Общие параметры для приложения службы приложений на портале Azure.
keywords: Служба приложений Azure, веб-приложения, параметры приложения, переменные среды
services: app-service\web
documentationcenter: ''
author: cephalin
manager: erikre
editor: ''
ms.assetid: 9af8a367-7d39-4399-9941-b80cbc5f39a0
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/25/2017
ms.author: cephalin
ms.custom: seodec18
ms.openlocfilehash: bcc970375120f76e4ec8a90f487d251296f92dba
ms.sourcegitcommit: 24fd3f9de6c73b01b0cee3bcd587c267898cbbee
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2019
ms.locfileid: "65957915"
---
# <a name="configure-an-app-service-app-in-the-azure-portal"></a>Настройка приложения службы приложений на портале Azure

В этом разделе описывается настройка общих параметров для веб-приложения, серверные части мобильных или приложение API с помощью [портал Azure].

## <a name="configure-app-settings"></a>Настройка параметров приложения

В службе приложений используйте параметры приложения, такие как переменные среды. В [портал Azure], перейдите на страницу управления вашего приложения. В меню слева для приложения, щелкните **конфигурации** > **параметры приложения**.

![Параметры приложения](./media/configure-common/open-ui.png)

Для разработчиков ASP.NET и ASP.NET Core, параметры приложения в службе приложений похожи на их задания в `<appSettings>` в *Web.config*, но значения в службе приложений переопределяют значения в *Web.config*. Параметры разработки (например локальный пароль MySQL) можно хранить в *Web.config*, но секреты производства (например пароль базы данных Azure MySQL) в службе приложений. Тот же код использует параметры разработки при локальной отладки и использует свои секреты производства, при развертывании в Azure.

Аналогичным образом, стеков других языков, получить параметры приложения как переменные среды во время выполнения. Стек языков конкретных шагов см. в разделе:

- [ASP.NET Core](containers/configure-language-dotnetcore.md#access-environment-variables)
- [Node.js](containers/configure-language-nodejs.md#access-environment-variables)
- [PHP](containers/configure-language-php.md#access-environment-variables)
- [Python](containers/how-to-configure-python.md#access-environment-variables)
- [Java](containers/configure-language-java.md#data-sources)
- [Ruby](containers/configure-language-ruby.md#access-environment-variables)
- [Пользовательские контейнеры](containers/configure-custom-container.md#configure-environment-variables)

Параметры приложения всегда шифруются при хранении.

> [!NOTE]
> Параметры приложений также можно разрешить с [Key Vault](/azure/key-vault/) с помощью [ссылается на хранилище ключей](app-service-key-vault-references.md).

### <a name="show-hidden-values"></a>Показать скрытые значения

По умолчанию значения для параметров приложения, скрыты на портале для безопасности. Чтобы просмотреть скрытые значение параметра приложения, щелкните **значение** поле этого параметра. Чтобы увидеть значения всех параметров приложения, нажмите кнопку **Показать значение** кнопки.

### <a name="add-or-edit"></a>Добавление или изменение

Чтобы добавить новый параметр приложения, щелкните **новый параметр приложения**. В диалоговом окне вы можете [привязать параметр текущего слоту](deploy-staging-slots.md#which-settings-are-swapped).

Чтобы изменить параметр, нажмите кнопку **изменить** кнопку справа от оператора.

Закончив, нажмите кнопку **обновления**. Не забудьте нажать кнопку **Сохранить** обратно в **конфигурации** страницы.

> [!NOTE]
> В контейнере Linux по умолчанию или пользовательского контейнера Linux, любой вложенной структуры ключа JSON в имя параметра приложения, такие как `ApplicationInsights:InstrumentationKey` необходимо настроить в службе приложений как `ApplicationInsights__InstrumentationKey` имени ключа. Иными словами, любой `:` должны быть заменены `__` (двойной знак подчеркивания).
>

### <a name="edit-in-bulk"></a>Изменения в пакетном режиме

Чтобы добавить или изменить параметры приложения в пакетном режиме, нажмите кнопку **расширенного редактирования** кнопки. Закончив, нажмите кнопку **обновления**. Не забудьте нажать кнопку **Сохранить** обратно в **конфигурации** страницы.

Параметры приложения имеют следующий формат JSON:

```json
[
  {
    "name": "<key-1>",
    "value": "<value-1>",
    "slotSetting": false
  },
  {
    "name": "<key-2>",
    "value": "<value-2>",
    "slotSetting": false
  },
  ...
]
```

## <a name="configure-connection-strings"></a>Настройка строк подключения

В [портал Azure], перейдите на страницу управления приложения. В меню слева для приложения, щелкните **конфигурации** > **параметры приложения**.

![Параметры приложения](./media/configure-common/open-ui.png)

Для разработчиков ASP.NET и ASP.NET Core, параметр строки подключения в службе приложений похожи на их задания в `<connectionStrings>` в *Web.config*, но значения, заданные в службе приложений переопределяют значения в *Web.config*. Параметры разработки (например, файл базы данных) можно хранить в *Web.config* и секреты производства (например учетные данные базы данных SQL) в службе приложений. Тот же код использует параметры разработки при локальной отладки и использует свои секреты производства, при развертывании в Azure.

Для других стеков языка, лучше использовать [параметры приложения](#configure-app-settings) вместо этого заказа, так как специального форматирования в переменной ключи в строках подключения требуются для доступа к значениям. Вот одним исключением, однако: определенные типы база данных Azure архивируются вместе с приложением при установке свои строки подключения в приложении. Дополнительные сведения см. в разделе [что будет заархивировано](manage-backup.md#what-gets-backed-up). Если вас не интересует это автоматическое резервное копирование, затем используйте настройки приложения.

Во время выполнения строки подключения доступны как переменные среды, префикс следующие типы подключений:

* SQL Server: `SQLCONNSTR_`
* MySQL: `MYSQLCONNSTR_`
* База данных SQL: `SQLAZURECONNSTR_`
* Пользовательская: `CUSTOMCONNSTR_`

Например, строка подключения MySql с именем *connectionstring1* доступны в виде переменной среды `MYSQLCONNSTR_connectionString1`. Стек языков конкретных шагов см. в разделе:

- [ASP.NET Core](containers/configure-language-dotnetcore.md#access-environment-variables)
- [Node.js](containers/configure-language-nodejs.md#access-environment-variables)
- [PHP](containers/configure-language-php.md#access-environment-variables)
- [Python](containers/how-to-configure-python.md#access-environment-variables)
- [Java](containers/configure-language-java.md#data-sources)
- [Ruby](containers/configure-language-ruby.md#access-environment-variables)
- [Пользовательские контейнеры](containers/configure-custom-container.md#configure-environment-variables)

Строки подключения всегда шифруются при хранении.

> [!NOTE]
> Строки подключения также можно разрешить с [Key Vault](/azure/key-vault/) с помощью [ссылается на хранилище ключей](app-service-key-vault-references.md).

### <a name="show-hidden-values"></a>Показать скрытые значения

По умолчанию значения для строки подключения скрыты на портале для безопасности. Чтобы просмотреть скрытое значение строки подключения, просто щелкните **значение** поле этой строки. Чтобы увидеть значения всех строк подключения, нажмите кнопку **Показать значение** кнопки.

### <a name="add-or-edit"></a>Добавление или изменение

Чтобы добавить новую строку соединения, щелкните **новую строку подключения**. В диалоговом окне вы можете [придерживаться строку подключения к текущему слоту](deploy-staging-slots.md#which-settings-are-swapped).

Чтобы изменить параметр, нажмите кнопку **изменить** кнопку справа от оператора.

Закончив, нажмите кнопку **обновления**. Не забудьте нажать кнопку **Сохранить** обратно в **конфигурации** страницы.

### <a name="edit-in-bulk"></a>Изменения в пакетном режиме

Чтобы добавить или изменить строки подключения в пакетном режиме, нажмите кнопку **расширенного редактирования** кнопки. Закончив, нажмите кнопку **обновления**. Не забудьте нажать кнопку **Сохранить** обратно в **конфигурации** страницы.

Строки подключения имеют следующий формат JSON:

```json
[
  {
    "name": "name-1",
    "value": "conn-string-1",
    "type": "SQLServer",
    "slotSetting": false
  },
  {
    "name": "name-2",
    "value": "conn-string-2",
    "type": "PostgreSQL",
    "slotSetting": false
  },
  ...
]
```

<a name="platform"></a>
<a name="alwayson"></a>

## <a name="configure-general-settings"></a>Настройка общих параметров

В [портал Azure], перейдите на страницу управления приложения. В меню слева для приложения, щелкните **конфигурации** > **параметры приложения**.

![Общие параметры](./media/configure-common/open-general.png)

Здесь можно настроить некоторые общие параметры для приложения. Некоторые параметры требуют [масштабироваться с учетом более высокие уровни ценообразования](web-sites-scale.md).

- **Параметры стека**: Стек программного обеспечения, чтобы запустить приложение, включая язык и версии пакета SDK. Для приложений Linux и пользовательский контейнер можно также задать является необязательным при запуске команды или файлом.
- **Параметры платформы**: Позволяет настроить параметры для размещения платформы, включая:
    - **Разрядность**: 32-разрядная или 64-разрядной.
    - **Протокол WebSocket**: Для [ASP.NET SignalR] или [socket.io](https://socket.io/), например.
    - **Always On**: Оставьте приложение в загрузке даже в том случае, когда отсутствует трафик. Необходимо включить его для непрерывные веб-задания или для веб-заданий, активируются с помощью выражения CRON.
    - **Версия управляемого конвейера**: IIS [режим конвейера]. Задайте для него значение **классической** при наличии устаревших приложение, которому требуется более старой версии IIS.
    - **Версия HTTP**: Задайте значение **2.0**, чтобы обеспечить поддержку протокола [HTTPS/2](https://wikipedia.org/wiki/HTTP/2).
    > [!NOTE]
    > Большинство современных браузеров поддерживают протокол HTTP/2 только через TLS, а для незашифрованного трафика продолжает использоваться протокол HTTP/1.1. Чтобы гарантировать, что клиентские браузеры подключиться к приложению с помощью HTTP/2, либо [приобрести сертификат службы приложений](web-sites-purchase-ssl-web-site.md) для личного домена приложения или [привязать сертификат сторонних](app-service-web-tutorial-custom-ssl.md).
    - **ARR сходства**: В развертывании с несколькими экземплярами убедитесь, что клиент направляется в тот же экземпляр, в течение жизненного цикла сеанса. Этот параметр можно задать **Off** для приложений без отслеживания состояния.
- **Отладка**: Включение удаленной отладки для [ASP.NET](troubleshoot-dotnet-visual-studio.md#remotedebug), [ASP.NET Core](/visualstudio/debugger/remote-debugging-azure), или [Node.js](containers/configure-language-nodejs.md#debug-remotely) приложений. Этот параметр отключает автоматически через 48 часов.
- **Входящие сертификаты клиента**: требовать сертификаты клиентов в [взаимной проверки подлинности](app-service-web-configure-tls-mutual-auth.md).

## <a name="configure-default-documents"></a>Настройка документов по умолчанию

Этот параметр предназначен только для приложений Windows.

В [портал Azure], перейдите на страницу управления приложения. В меню слева для приложения, щелкните **конфигурации** > **документы по умолчанию**.

![Общие параметры](./media/configure-common/open-documents.png)

Документ по умолчанию — это веб-страницы, отображаемый в корневой URL-адрес для веб-сайта. Используется первый найденный файл в списке. Чтобы добавить новый документ по умолчанию, щелкните **новый документ**. Не забудьте нажать кнопку **Сохранить**.

Если приложение использует модули, которые маршрутизации в зависимости от URL-адреса вместо выдачи статичного содержимого, нет необходимости для документов по умолчанию.

## <a name="configure-path-mappings"></a>Настройка сопоставлений путь

В [портал Azure], перейдите на страницу управления приложения. В меню слева для приложения, щелкните **конфигурации** > **сопоставления путей к**.

![Общие параметры](./media/configure-common/open-path.png)

**Сопоставления путей к** странице отображаются разные вещи, в зависимости от используемой операционной системы.

### <a name="windows-apps-uncontainerized"></a>Приложения Windows (uncontainerized)

Для приложений Windows можно настроить сопоставления обработчика IIS и виртуальные приложения и каталоги.

Сопоставления обработчиков позволяют добавлять пользовательских обработчиков скриптов для обработки запросов для определенных расширений файлов. Чтобы добавить пользовательский обработчик, щелкните **новый обработчик**. Настройте обработчик следующим образом:

- **Расширение**. Расширение файла, необходимо обработать, такие как  *\*.php* или *handler.fcgi*.
- **Обработчик скриптов**. Абсолютный путь к обработчику скриптов для вас. Запросы к файлам, совпадающим с расширением обрабатываются обработчиком сценариев. Используйте путь `D:\home\site\wwwroot` для указания корневого каталога веб-приложения.
- **Аргументы**. Необязательные аргументы командной строки для обработчика скриптов.

Каждое приложение имеет корневой путь по умолчанию (`/`) сопоставлен с `D:\home\site\wwwroot`, где развертывается код по умолчанию. Если в корневом каталоге приложения находится в другой папке, или если в репозитории имеется более одного приложения, вы можете изменить или добавить виртуальные приложения и каталоги здесь. Нажмите кнопку **нового виртуального приложения или каталога**.

Чтобы настроить виртуальные приложения и каталоги, укажите каждый виртуальный каталог и его соответствующий физический путь относительно корня веб-сайта (`D:\home`). Или установите флажок **Приложение** , чтобы отметить виртуальный каталог как приложение.

### <a name="containerized-apps"></a>Контейнерных приложений

Вы можете [добавить пользовательское хранилище для контейнерного приложения](containers/how-to-serve-content-from-azure-storage.md). Контейнерные приложения содержат все приложения под управлением Linux и Windows и Linux пользовательских контейнеров, запущенных в службе приложений. Нажмите кнопку **нового подключения хранилища Azure** и настройте для них пользовательские хранилища следующим образом:

- **Имя.** Отображаемое имя.
- **Параметры конфигурации**: **Основные** или **Advanced**.
- **Учетные записи хранения**. Учетная запись хранения с контейнером, требуется.
- **Тип хранилища**. **Большие двоичные объекты Azure** или **Azure файлы**.
  > [!NOTE]
  > Приложения-контейнеры Windows поддерживают только файлов Azure.
- **Контейнер хранилища**: Для базовой конфигурации, контейнер, для которого необходимо.
- **Имя общего ресурса**: Для расширенной настройки файла имя общего ресурса.
- **Ключ доступа**: Для расширенной настройки, ключ доступа.
- **Путь к подключения**: Абсолютный путь в контейнере, чтобы подключить пользовательское хранилище.

Дополнительные сведения см. в разделе [обслуживание содержимого из хранилища Azure в службе приложений на платформе Linux](containers/how-to-serve-content-from-azure-storage.md).

## <a name="configure-language-stack-settings"></a>Настройка параметров stack языка

Для приложений Linux см. в разделе:

- [ASP.NET Core](containers/configure-language-dotnetcore.md)
- [Node.js](containers/configure-language-nodejs.md)
- [PHP](containers/configure-language-php.md)
- [Python](containers/how-to-configure-python.md)
- [Java](containers/configure-language-java.md)
- [Ruby](containers/configure-language-ruby.md)

## <a name="configure-custom-containers"></a>Настроить пользовательские контейнеры

См. в разделе [Настройка пользовательского контейнера Linux для службы приложений Azure](containers/configure-custom-container.md)

## <a name="next-steps"></a>Дальнейшие действия

- [Настройка личного доменного имени в службе приложений Azure]
- [Настройка промежуточных сред в службе приложений Azure]
- [Включение протокола HTTPS для приложения в службе приложений Azure]
- [Включение журналов диагностики](troubleshoot-diagnostic-logs.md)
- [Масштабирование приложения в службе приложений Azure]
- [Основы мониторинга в службе приложений Azure]
- [Изменение параметров applicationHost.config с applicationHost.xdt](https://github.com/projectkudu/kudu/wiki/Xdt-transform-samples)

<!-- URL List -->

[ASP.NET SignalR]: https://www.asp.net/signalr
[портал Azure]: https://portal.azure.com/
[Настройка личного доменного имени в службе приложений Azure]: ./app-service-web-tutorial-custom-domain.md
[Настройка промежуточных сред в службе приложений Azure]: ./deploy-staging-slots.md
[Включение протокола HTTPS для приложения в службе приложений Azure]: ./app-service-web-tutorial-custom-ssl.md
[How to: Monitor web endpoint status]: https://go.microsoft.com/fwLink/?LinkID=279906
[Основы мониторинга в службе приложений Azure]: ./web-sites-monitor.md
[режим конвейера]: https://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture#Application
[Масштабирование приложения в службе приложений Azure]: ./web-sites-scale.md
