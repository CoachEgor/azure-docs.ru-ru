---
title: Настройка приложений на портале
description: Научитесь настраивать общие настройки для приложения App Service на портале Azure. Настройки приложения, строки соединения, платформа, стек языка, контейнер и т.д.
keywords: лазурный сервис приложений, веб-приложение, настройки приложения, переменные среды
ms.assetid: 9af8a367-7d39-4399-9941-b80cbc5f39a0
ms.topic: article
ms.date: 08/13/2019
ms.custom: seodec18
ms.openlocfilehash: ce0a170a629f347e2687a2e9f63fb3438fe2bd2f
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79280174"
---
# <a name="configure-an-app-service-app-in-the-azure-portal"></a>Настройте приложение App Service на портале Azure

В этой теме объясняется, как настроить общие настройки для веб-приложений, мобильного бэк-энда или приложения API с помощью [портала Azure.]

## <a name="configure-app-settings"></a>Настройка параметров приложения

В App Service параметры приложения являются переменными, передаваемыми в качестве переменных среды в код приложения. Для приложений Linux и пользовательских контейнеров Служба приложения `--env` передает настройки приложения в контейнер с помощью флага для установки переменной среды в контейнере.

На [портале Azure]ищите и выбирайте **службы приложений,** а затем выберите приложение. 

![Поиск служб приложений](./media/configure-common/search-for-app-services.png)

В левом меню приложения выберите**настройки приложения** **configuration.** > 

![Параметры приложения](./media/configure-common/open-ui.png)

Для разработчиков ASP.NET и ASP.NET Core настройка настроек `<appSettings>` приложений в App Service подобна настройке их в *Web.config* или *appsettings.json,* но значения в App Service переопределяют те, которые есть в *Web.config* или *appsettings.json.* Настройки разработки (например, локальный пароль MyS'L) можно хранить в *Web.config* или *appsettings.json,* но секреты производства (например, пароль базы данных Azure MyS'L) безопасны в службе приложений. Тот же код использует настройки разработки при локальном отладке, а при развертывании в Azure — секреты производства.

Другие языковые стеки также получают настройки приложения в качестве переменных среды во время выполнения. Для конкретных шагов стеков языка см.:

- [ASP.NET Core](containers/configure-language-dotnetcore.md#access-environment-variables)
- [Node.js](containers/configure-language-nodejs.md#access-environment-variables)
- [Php](containers/configure-language-php.md#access-environment-variables)
- [Python](containers/how-to-configure-python.md#access-environment-variables)
- [Java](containers/configure-language-java.md#data-sources)
- [Руби](containers/configure-language-ruby.md#access-environment-variables)
- [Пользовательские контейнеры](containers/configure-custom-container.md#configure-environment-variables)

Параметры приложения всегда шифруются при хранении.

> [!NOTE]
> Настройки приложения также могут быть решены из [Key Vault](/azure/key-vault/) с помощью [ссылок Key Vault.](app-service-key-vault-references.md)

### <a name="show-hidden-values"></a>Отображать скрытые значения

По умолчанию значения для настроек приложения скрыты на портале безопасности. Чтобы увидеть скрытое значение настройки приложения, щелкните поле **значения** этого параметра. Чтобы увидеть значения всех настроек приложения, нажмите кнопку **значение Шоу.**

### <a name="add-or-edit"></a>Добавление или отодевать

Чтобы добавить новую настройку приложения, нажмите **Новая настройка приложения.** В диалоге можно [приклеить настройки к текущему слоту.](deploy-staging-slots.md#which-settings-are-swapped)

Чтобы отсеивать настройки, нажмите кнопку **"Оторит"** с правой стороны.

После завершения, нажмите **Обновление**. Не забудьте нажать **Сохранить** обратно в **конфигурации** страницы.

> [!NOTE]
> В контейнере Linux по умолчанию или пользовательском контейнере Linux любая `ApplicationInsights:InstrumentationKey` вложенная структура ключа JSON в названии настройки приложения должна быть настроена в Службе приложения как `ApplicationInsights__InstrumentationKey` ключевое имя. Другими словами, `:` любой `__` должен быть заменен (двойной подчеркнуть).
>

### <a name="edit-in-bulk"></a>Отодыхать оптом

Чтобы добавить или отсваивать настройки приложения оптом, нажмите кнопку **Расширенного отодевателя.** После завершения, нажмите **Обновление**. Не забудьте нажать **Сохранить** обратно в **конфигурации** страницы.

Настройки приложения имеют следующий формат JSON:

```json
[
  {
    "name": "<key-1>",
    "value": "<value-1>",
    "slotSetting": false
  },
  {
    "name": "<key-2>",
    "value": "<value-2>",
    "slotSetting": false
  },
  ...
]
```

## <a name="configure-connection-strings"></a>Настройка строк подключения

На [портале Azure]ищите и выбирайте **службы приложений,** а затем выберите приложение. В левом меню приложения выберите**настройки приложения** **configuration.** > 

![Параметры приложения](./media/configure-common/open-ui.png)

Для ASP.NET и ASP.NET разработчиками Core настройка строк соединения `<connectionStrings>` в Службе приложений подобна настройке их в *Web.config,* но значения, установленные в Службе app, переопределяют те, что есть в *Web.config.* Настройки разработки (например, файл базы данных) можно хранить в *Web.config* и секретах производства (например, учетные данные базы данных S'L) в Службе приложений. Тот же код использует настройки разработки при локальном отладке, а при развертывании в Azure — секреты производства.

Для других языковых стеков лучше использовать [настройки приложения,](#configure-app-settings) поскольку для доступа к значениям необходимо специальное форматирование в переменных клавишах. Однако есть одно исключение: некоторые типы баз данных Azure резервируются вместе с приложением, если настроить строки соединения в приложении. Для получения дополнительной информации, [см. Что получает резервную копию](manage-backup.md#what-gets-backed-up). Если вам не нужна эта автоматизированная резервная система, используйте настройки приложения.

Во время выполнения строки соединения доступны в качестве переменных среды, прикреплив к следующим типам соединения:

* SQL Server: `SQLCONNSTR_`
* MySQL: `MYSQLCONNSTR_`
* База данных SQL: `SQLAZURECONNSTR_`
* Пользовательская: `CUSTOMCONNSTR_`

Например, строка подключения MySql под названием *connectionstring1* может быть доступна в качестве переменной `MYSQLCONNSTR_connectionString1`среды. Для конкретных шагов стеков языка см.:

- [ASP.NET Core](containers/configure-language-dotnetcore.md#access-environment-variables)
- [Node.js](containers/configure-language-nodejs.md#access-environment-variables)
- [Php](containers/configure-language-php.md#access-environment-variables)
- [Python](containers/how-to-configure-python.md#access-environment-variables)
- [Java](containers/configure-language-java.md#data-sources)
- [Руби](containers/configure-language-ruby.md#access-environment-variables)
- [Пользовательские контейнеры](containers/configure-custom-container.md#configure-environment-variables)

Строки подключения всегда шифруются при хранении.

> [!NOTE]
> Строки соединения также могут быть решены из [Key Vault](/azure/key-vault/) с помощью [ссылок Key Vault.](app-service-key-vault-references.md)

### <a name="show-hidden-values"></a>Отображать скрытые значения

По умолчанию значения строк соединения скрыты в портале безопасности. Чтобы увидеть скрытое значение строки соединения, достаточно щелкните поле **значения** этой строки. Чтобы увидеть значения всех строк соединения, нажмите кнопку **значение Шоу.**

### <a name="add-or-edit"></a>Добавление или отодевать

Чтобы добавить новую строку соединения, нажмите **Новая строка соединения**. В диалоге можно [приклеить строку соединения к текущему слоту.](deploy-staging-slots.md#which-settings-are-swapped)

Чтобы отсеивать настройки, нажмите кнопку **"Оторит"** с правой стороны.

После завершения, нажмите **Обновление**. Не забудьте нажать **Сохранить** обратно в **конфигурации** страницы.

### <a name="edit-in-bulk"></a>Отодыхать оптом

Чтобы добавить или отсваивать строки соединения оптом, нажмите кнопку **Расширенного отодевателя.** После завершения, нажмите **Обновление**. Не забудьте нажать **Сохранить** обратно в **конфигурации** страницы.

Строки подключения имеют следующий формат JSON:

```json
[
  {
    "name": "name-1",
    "value": "conn-string-1",
    "type": "SQLServer",
    "slotSetting": false
  },
  {
    "name": "name-2",
    "value": "conn-string-2",
    "type": "PostgreSQL",
    "slotSetting": false
  },
  ...
]
```

<a name="platform"></a>
<a name="alwayson"></a>

## <a name="configure-general-settings"></a>Настройка общих параметров

На [портале Azure]ищите и выбирайте **службы приложений,** а затем выберите приложение. В левом меню приложения выберите > **общие настройки** **конфигурации.**

![Общие параметры](./media/configure-common/open-general.png)

Здесь можно настроить некоторые общие настройки для приложения. Некоторые настройки требуют [масштабирования до более высоких уровней ценообразования.](manage-scale-up.md)

- **Настройки стек:** стек программного обеспечения для запуска приложения, включая язык и версии SDK. Для приложений Linux и пользовательских контейнерных приложений можно также установить дополнительную команду или файл запуска.
- **Настройки платформы:** позволяет настроить настройки для хостинговой платформы, в том числе:
    - **Bitness**: 32-битный или 64-битный.
    - **Протокол WebSocket**: Для [ASP.NET SignalR] или [socket.io,](https://socket.io/)например.
    - **Всегда на**: Держите приложение загружено, даже если нет трафика. Это необходимо для непрерывного WebJobs или для WebJobs, которые срабатывают с помощью выражения CRON.
      > [!NOTE]
      > С функцией Always On вы не можете контролировать конечную точку. Он всегда отправляет запрос в корне приложения.
    - **Управляемая версия конвейера**: [Режим конвейера]IIS . Установите его на **Classic,** если у вас есть устаревающее приложение, которое требует более старой версии IIS.
    - **Версия HTTP**: Установить **2.0** для поддержки протокола [HTTPS/2.](https://wikipedia.org/wiki/HTTP/2)
    > [!NOTE]
    > Большинство современных браузеров поддерживают протокол HTTP/2 только через TLS, а для незашифрованного трафика продолжает использоваться протокол HTTP/1.1. Чтобы обеспечить подключение клиентских браузеров к вашему приложению с помощью HTTP/2, [закрепите пользовательское dNS-имя с помощью привязки SSL в службе приложений Azure.](configure-ssl-bindings.md)
    - **ARR сродство**: В развертывании нескольких экземпляров убедитесь, что клиент направляется в тот же экземпляр в течение всего срока сеанса. Эту опцию можно настроить **для** приложений без состояния.
- **Отладка**: Включить удаленную отладку для [ASP.NET,](troubleshoot-dotnet-visual-studio.md#remotedebug) [ASP.NET приложения](/visualstudio/debugger/remote-debugging-azure) [Node.js.](containers/configure-language-nodejs.md#debug-remotely) Эта опция автоматически выключается через 48 часов.
- **Входящие сертификаты клиента**: требуют сертификаты клиента во [взаимной аутентификации.](app-service-web-configure-tls-mutual-auth.md)

## <a name="configure-default-documents"></a>Настройка документов по умолчанию

Эта настройка предназначена только для приложений Windows.

На [портале Azure]ищите и выбирайте **службы приложений,** а затем выберите приложение. В левом меню приложения выберите документы **Configuration** > **Default.**

![Стандартные документы](./media/configure-common/open-documents.png)

Документ по умолчанию — это веб-страница, отображаемый на корневом URL-адресе веб-сайта. Используется первый найденный файл в списке. Чтобы добавить новый документ по умолчанию, нажмите **Новый документ**. Не забудьте нажать **Сохранить**.

Если приложение использует модули, которые маршрутируют на основе URL вместо обслуживания статического содержимого, нет необходимости в документах по умолчанию.

## <a name="configure-path-mappings"></a>Настройка отображений путей

На [портале Azure]ищите и выбирайте **службы приложений,** а затем выберите приложение. В левом меню приложения выберите > **отображение конфигурации Пути.** **Configuration**

![Отображение путей](./media/configure-common/open-path.png)

Страница **отображения Пути** показывает разные вещи, основанные на типе ОС.

### <a name="windows-apps-uncontainerized"></a>Приложения для Windows (неконтейнеризированные)

Для приложений Windows можно настроить отображение обработчиков IIS, а также виртуальные приложения и каталоги.

Отображение обработчиков позволяет добавлять пользовательские процессоры скриптов для обработки запросов на конкретные расширения файлов. Чтобы добавить пользовательский обработчик, нажмите **Новый обработчик**. Наверстойобный обработчик следующим образом:

- **Расширение**. Расширение файла, с которым вы хотите справиться, например * \*.php* или *handler.fcgi.*
- **Процессор скрипта**. Абсолютный путь процессора скрипта к вам. Запросы файлов, которые соответствуют расширению файла, обрабатываются процессором скрипта. Используйте путь `D:\home\site\wwwroot` для указания корневого каталога веб-приложения.
- **Аргументы**. Дополнительные аргументы командной строки для процессора скрипта.

Каждое приложение имеет корневой путь по умолчанию ()`/`отображается в `D:\home\site\wwwroot`, где ваш код развернут по умолчанию. Если корень приложения находится в другой папке, или если репозиторий имеет более одного приложения, вы можете отсеить или добавить виртуальные приложения и каталоги здесь. Нажмите **Новое виртуальное приложение или каталог**.

Чтобы настроить виртуальные приложения и каталоги, укажите каждый виртуальный каталог`D:\home`и соответствующий физический путь относительно корня веб-сайта (). Или установите флажок **Приложение** , чтобы отметить виртуальный каталог как приложение.

### <a name="containerized-apps"></a>Контейнерные приложения

Вы можете [добавить пользовательский объем хранения для вашего контейнерного приложения.](containers/how-to-serve-content-from-azure-storage.md) Контейнерные приложения включают все приложения Linux, а также пользовательские контейнеры Windows и Linux, работающие в Службе приложений. Нажмите **на новую гору хранения Azure** и найди пользовательское хранилище следующим образом:

- **Имя**: Имя дисплея.
- **Параметры конфигурации**: **Основные** или **Расширенные**.
- **Учетные записи хранения**: Учетная запись хранения с контейнером, который вы хотите.
- **Тип хранения:** **Azure Blobs** или **Файлы Azure**.
  > [!NOTE]
  > Контейнерные приложения Windows поддерживают только файлы Azure.
- **Контейнер для хранения:** Для базовой конфигурации контейнер, который вы хотите.
- **Имя общего обмена**: Для расширенной конфигурации имя файла.
- **Ключ доступа**: Для расширенной конфигурации, ключ доступа.
- **Гора путь**: Абсолютный путь в контейнере для установки пользовательского хранения.

См. сведения в руководстве по [обработке содержимого из службы хранилища Azure в Службе приложений в Linux](containers/how-to-serve-content-from-azure-storage.md).

## <a name="configure-language-stack-settings"></a>Настройка настроек стеков языка

Для приложений Linux см.:

- [ASP.NET Core](containers/configure-language-dotnetcore.md)
- [Node.js](containers/configure-language-nodejs.md)
- [Php](containers/configure-language-php.md)
- [Python](containers/how-to-configure-python.md)
- [Java](containers/configure-language-java.md)
- [Руби](containers/configure-language-ruby.md)

## <a name="configure-custom-containers"></a>Настройка пользовательских контейнеров

Смотрите [Настройка пользовательского контейнера Linux для службы приложений Azure](containers/configure-custom-container.md)

## <a name="next-steps"></a>Дальнейшие действия

- [Настройка личного доменного имени в службе приложений Azure]
- [Настройка промежуточных сред в службе приложений Azure]
- [Защита настраиваемого DNS-имени с помощью привязки SSL в Службе приложений Azure](configure-ssl-bindings.md)
- [Включение журналов диагностики](troubleshoot-diagnostic-logs.md)
- [Масштабирование приложения в службе приложений Azure]
- [Основы мониторинга в службе приложений Azure]
- [Изменение настроек applicationHost.config с помощью applicationHost.xdt](https://github.com/projectkudu/kudu/wiki/Xdt-transform-samples)

<!-- URL List -->

[ASP.NET SignalR]: https://www.asp.net/signalr
[Портал Azure]: https://portal.azure.com/
[Настройка личного доменного имени в службе приложений Azure]: ./app-service-web-tutorial-custom-domain.md
[Настройка промежуточных сред в службе приложений Azure]: ./deploy-staging-slots.md
[How to: Monitor web endpoint status]: https://go.microsoft.com/fwLink/?LinkID=279906
[Основы мониторинга в службе приложений Azure]: ./web-sites-monitor.md
[режим конвейера]: https://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture#Application
[Масштабирование приложения в службе приложений Azure]: ./manage-scale-up.md
