---
title: Приложения Azure Monitor изменить анализ — обнаруживать изменения, которые могут повлиять на проблемах активного сайта/простоях приложения Azure Monitor изменить analysis | Документация Майкрософт
description: Устранение неполадок активного сайта приложения в службах приложений Azure с помощью функций анализа изменений приложения Azure Monitor
services: application-insights
author: cawams
manager: carmonm
ms.assetid: ea2a28ed-4cd9-4006-bd5a-d4c76f4ec20b
ms.service: application-insights
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 05/07/2019
ms.author: cawa
ms.openlocfilehash: 5bd3816e65398283de85b4551a137b3f97db4cc7
ms.sourcegitcommit: 509e1583c3a3dde34c8090d2149d255cb92fe991
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2019
ms.locfileid: "66226341"
---
# <a name="application-change-analysis-public-preview"></a>служба анализа изменений в приложениях (общедоступная предварительная версия).

В случае динамической/проблема площадки важно быстро определить основную причину. Standard, решения для мониторинга может помочь быстро выявить, что возникла проблема, и часто даже компонент, который не удается. Но это не всегда приведет к объяснение интерпретации для Почему происходит сбой. Сайт работал пяти минут назад, теперь он нарушена. Что изменилось за последние пять минут? Это вопрос, нового компонента Azure Monitor, анализ изменений приложения предназначен отвечать. Основываясь на мощь [график ресурсов Azure](https://docs.microsoft.com/azure/governance/resource-graph/overview) анализ изменений приложения позволяет отслеживать изменения приложения Azure для повышения наблюдаемость и снижения MTTR (среднее время для восстановления).

> [!IMPORTANT]
> Анализ изменений приложения Azure Monitor в настоящее время находится в общедоступной предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для использования рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены.
> Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="overview-of-change-analysis-service"></a>Общие сведения о службе анализа изменений
Служба анализа изменений обнаруживает различные типы изменений от уровня инфраструктуры, вплоть до развертывания приложения. Это поставщик ресурсов Azure на уровне подписки, который выглядит в изменения ресурсов в подписке и предоставляет данные для различных средств диагностики, чтобы помочь пользователям понять, какие изменения может вызвать проблемы.

Следующей схеме показана архитектура служб analysis Service изменений: ![Схема архитектуры для как служба анализа изменений получает изменения данных и предоставить данные клиентских средств](./media/change-analysis/overview.png)

В настоящее время средство интегрируется в службы приложений, веб-приложения, диагностика и решение проблем качества. См. в разделе *изменение Analysis Services для веб-приложения служб* раздел о том, как включить и просмотреть изменения, внесенные в веб-приложения.

### <a name="azure-resource-manager-deployment-changes"></a>Изменения в развертывании Azure Resource Manager
Используя [график ресурсов Azure](https://docs.microsoft.com/azure/governance/resource-graph/overview) средство анализа изменений предоставляет исторические данные как ресурсы Azure, на которых размещены приложения изменились со временем. Например если веб-приложения были добавлены в него тег, изменения будут отражены в средство анализа изменений.
Эта информация всегда доступна, пока `Microsoft.ChangeAnalysis` поставщика ресурсов подключен к подписке Azure.

### <a name="web-application-deployment-and-configuration-changes"></a>Веб-приложения развертывания и изменения конфигурации
Средство анализа изменений фиксируется состояние развертывания и настройки приложения каждые 4 часа для вычисления различий и представления, что изменилось. Такие изменения примеры изменения переменных среды приложения, изменения правила IP-конфигурации, изменения управляемое удостоверение службы, изменения параметров SSL и т. д.
В отличие от изменения в диспетчере ресурсов этот тип сведений об изменениях не может быть доступен в средство. Чтобы просмотреть последние изменения, нажмите кнопку «Просмотр изменений теперь» в средстве.

![Снимок экрана: поиск изменений теперь кнопку Диагностика и решение проблем средство с интеграцией анализа изменений для веб-приложения службы](./media/change-analysis/scan-changes.png)

### <a name="dependency-changes"></a>Изменения зависимостей
Зависимости ресурсов также может стать причиной проблем. Например если веб-приложение вызывает кэша Redis, производительность веб-приложения могут влиять кэша Redis SKU. Путем поиска в DNS запись приложения web измените analysis service также представляют зависимости информации об изменениях для идентификации изменений во всех компонентах приложения, могут вызывать проблемы.


## <a name="change-analysis-service-for-app-services-web-app"></a>Изменения служб Analysis service для веб-приложения служб

Анализ изменений приложения Azure Monitor в настоящее время встроена в самостоятельная **Диагностика и решение проблем** возникли, который может быть организован **Обзор** части службы приложений Azure приложение:

![Снимок экрана: служба приложений Azure Общие сведения о странице с красные поля вокруг кнопки "Обзор" и диагностировать и решить проблемы кнопки](./media/change-analysis/change-analysis.png)

### <a name="enable-change-analysis-in-diagnose-and-solve-problems-tool"></a>Включить анализ изменений в Диагностика и решение проблем средство

1. Выберите **доступность и производительность**

    ![Снимок экрана доступности и производительности, устранение неполадок](./media/change-analysis/availability-and-performance.png)

2. Нажмите кнопку **сбой приложения происходит** плитку.

   ![Снимок экрана с плиткой сбоев приложения](./media/change-analysis/application-crashes-tile.png)

3. Чтобы включить **анализа изменений** выберите **включить сейчас**.

   ![Снимок экрана доступности и производительности, устранение неполадок](./media/change-analysis/application-crashes.png)

4. Вступили преимуществами полной изменить набор функций для анализа **изменить Analysis**, **поиск изменений кода**, и **Always on** для **на** и выберите **Сохранить**.

    ![Снимок экрана: Включение службы приложений Azure изменить анализа пользовательского интерфейса](./media/change-analysis/change-analysis-on.png)

    Если **анализа изменений** — включена, можно для обнаружения изменений на уровне ресурсов. Если **поиск изменений кода** будет включен, будет также см. в разделе файлов развертывания и изменения конфигурации сайта. Включение **Always on** оптимизирует производительность просмотра изменений, но может повлечь дополнительные затраты с точки зрения выставления счетов.

5.  После того как все, что включен, выбрав **Диагностика и решение проблем** > **доступности и производительности** > **сбой приложения происходит** позволит вам получить доступ к процедуры анализа изменений. Диаграммы будут использованы Помесячные тип изменений, произошедших со временем вместе со сведениями об этих изменениях:

     ![Снимок экрана: представление различий для изменений](./media/change-analysis/change-view.png)


### <a name="enable-change-analysis-service-at-scale"></a>Включение службы анализа изменений в нужном масштабе
Если у вас есть много веб-приложений в вашей подписке, включить службу в на уровне веб-приложения будет неэффективным. Ниже приведены некоторые инструкции альтернативные адаптации.

#### <a name="registering-change-analysis-resource-provider-for-your-subscription"></a>Регистрация поставщика ресурсов анализа изменений для вашей подписки

1. Регистрация флаг компонента предварительной версии анализа изменений

    Так как эта функция находится на этапе предварительной версии, необходимо сначала зарегистрировать флаг компонента для того, чтобы быть видимым в подписку.
    - Откройте [Azure Cloud Shell](https://azure.microsoft.com/features/cloud-shell/).

    ![Снимок экрана: изменение Azure Cloud Shell](./media/change-analysis/cloud-shell.png)

    - Измените тип оболочки PowerShell:

    ![Снимок экрана: изменение Azure Cloud Shell](./media/change-analysis/choose-powershell.png)

    - Выполните следующую команду PowerShell:

    ``` PowerShell

    Set-AzContext -Subscription <your_subscription_id> #set script execution context to the subscription you are trying to onboard
    Get-AzureRmProviderFeature -ProviderNamespace "Microsoft.ChangeAnalysis" -ListAvailable #Check for feature flag availability
    Register-AzureRmProviderFeature -FeatureName PreviewAccess -ProviderNamespace Microsoft.ChangeAnalysis #Register feature flag

    ```

2. Зарегистрировать поставщик ресурсов Analysis изменение подписки

    - Перейдите к подпискам, выберите подписку, которую вы хотите подключить службу изменения, а затем нажмите кнопку поставщики ресурсов:

        ![Снимок экрана для регистрации поставщика Ресурсов для анализа изменений в колонке "подписки"](./media/change-analysis/register-rp.png)

    - Выберите *Microsoft.ChangeAnalysis* и нажмите кнопку *зарегистрировать* верхней части страницы.

    - Когда поставщик ресурсов будет подключено, следуйте инструкциям в *не удалось получить сведения об анализе изменить* ниже для задания скрытый тег на веб-приложения, чтобы включить развертывание изменения уровня обнаружения для веб-приложения.

3. Кроме того на шаге 2 выше, можно зарегистрировать для поставщика ресурсов с помощью скрипта PowerShell:

    ```PowerShell
    Get-AzureRmResourceProvider -ListAvailable | Select-Object ProviderNamespace, RegistrationState #Check if RP is ready for registration

    Register-AzureRmResourceProvider -ProviderNamespace "Microsoft.ChangeAnalysis" #Register the Change Analysis RP
    ```

4. Чтобы задать скрытый тег на веб-приложения с помощью PowerShell, выполните следующую команду:

    ```powershell
    $webapp=Get-AzWebApp -Name <name_of_your_webapp>
    $tags = $webapp.Tags
    $tags[“hidden-related:diagnostics/changeAnalysisScanEnabled”]=$true
    Set-AzResource -ResourceId <your_webapp_resourceid> -Tag $tag
    ```

> [!NOTE]
> После добавления скрытых тега может по-прежнему необходимо изначально ожидания на 4 часа, чтобы иметь возможность сначала просмотреть изменения. Это вызвано freqeuncy 4 часов, используемых службой анализа изменений для проверки веб-приложения, при этом ограничивая влияние на производительность сканирования.

## <a name="next-steps"></a>Дальнейшие действия

- Улучшения мониторинга служб приложений Azure [включить функции Application Insights](azure-web-apps.md) из Azure Monitor.
- Углубление изучения [график ресурсов Azure](https://docs.microsoft.com/azure/governance/resource-graph/overview) удовлетворение приложения Azure Monitor power изменить анализа.
