---
title: Непрерывный мониторинг конвейера выпуска DevOps с помощью проводов Azure Pipelines и Azure Application Insights Документы Майкрософт
description: Предоставляет инструкции для быстрого настройки непрерывного мониторинга с помощью Application Insights
ms.topic: conceptual
ms.date: 07/16/2019
ms.openlocfilehash: e565101218b975ef2bd29b8a32a4aa1bf4300b6d
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77655401"
---
# <a name="add-continuous-monitoring-to-your-release-pipeline"></a>Добавление постоянного мониторинга к конвейеру выпуска

Azure Pipelines интегрируется с Azure Application Insights, чтобы обеспечить непрерывный мониторинг конвейера выпуска DevOps на протяжении всего жизненного цикла разработки программного обеспечения. 

При постоянном мониторинге конвейеры выпуска могут включать данные мониторинга из Application Insights и других ресурсов Azure. Когда конвейер выпуска обнаруживает оповещение Application Insights, конвейер может выпустить или откатить развертывание до тех пор, пока оповещение не будет решено. Если все проверки проходят, развертывание может автоматически переходить от тестирования до производства без необходимости ручного вмешательства. 

## <a name="configure-continuous-monitoring"></a>Настройка непрерывного мониторинга

1. В [Azure DevOps](https://dev.azure.com)выберите организацию и проект.
   
1. В левом меню страницы проекта выберите **Выпуски трубопроводов.** > **Releases** 
   
1. Падение вниз стрелка рядом с **Новым** и выбрать **новый конвейер выпуска**. Или, если у вас еще нет конвейера, выберите **Новый конвейер** на странице, которая появляется.
   
1. На **панели шаблона выберите** и выберите **развертывание службы приложений Azure с непрерывным мониторингом,** а затем выберите **Apply.** 

   ![Выпуск новых трубопроводов Azure](media/continuous-monitoring/001.png)

1. В поле **Этап 1** выберите гиперссылку для просмотра **задач стадии.**

   ![Просмотр задач этапа](media/continuous-monitoring/002.png)

1. В панели конфигурации **Этапа 1** выполните следующие поля: 

    | Параметр        | Значение |
   | ------------- |:-----|
   | **Название этапа**      | Предоставьте сценическое имя или оставьте его на **этапе 1**. |
   | **Подписка Azure.** | Падение и выберите связанную подписку Azure, которая вы хотите использовать.|
   | **Тип приложения** | Падение и выберите тип приложения. |
   | **Имя службы приложений** | Введите название службы приложений Azure. |
   | **Название группы ресурсов для исследования приложений**    | Упади и выберите группу ресурсов, которая вы хотите использовать. |
   | **Имя ресурса Application Insights** | Падение и выберите ресурс Application Insights для выбранной группы ресурсов.

1. Чтобы сохранить конвейер с настройками правил оповещения по умолчанию, выберите **Сохранить** в правом верхнем углу в окне Azure DevOps. Введите описательный комментарий, а затем выберите **OK**.

## <a name="modify-alert-rules"></a>Изменение правил генерации оповещений

Развертывание **службы приложений Azure с** шаблоном непрерывного мониторинга имеет четыре правила оповещения: **Доступность,** **Невыполненные запросы,** **Время отклика сервера**и **исключения сервера.** Можно добавить больше правил или изменить настройки правил, чтобы удовлетворить потребности вашего уровня обслуживания. 

Чтобы изменить настройки правил оповещения:

1. В левом стеле страницы конвейера выпуска **выберите Настройка Оповещения Приложений.**

1. В панели **оповещения Azure Monitor** выберите **Alert rules**эллипсис... **...**
   
1. В диалоге **правил оповещения** выберите символ выпадения вниз рядом с правилом оповещения, например **availability.** 
   
1. Измените **порог** и другие параметры в соответствии с вашими требованиями.
   
   ![Изменение оповещения](media/continuous-monitoring/003.png)
   
1. Выберите **OK,** а затем выберите **Сохранить** в правом верхнем углу в окне Azure DevOps. Введите описательный комментарий, а затем выберите **OK**.

## <a name="add-deployment-conditions"></a>Добавление условий развертывания

При добавлении строчек развертывания в конвейер выпуска оповещение, превышающее установленные пороги, предотвращает нежелательное продвижение по выпуску. После устранения предупреждения развертывание может быть продолжено автоматически.

Добавление стробов развертывания:

1. На главной странице конвейера, в **рамках этапов,** выберите **условия предварительного развертывания** или символ **условий после развертывания,** в зависимости от того, на каком этапе требуется непрерывный контрольный упор.
   
   ![Условия перед развертыванием](media/continuous-monitoring/004.png)
   
1. В **условиях предварительного развертывания** панель конфигурации установите **гейты** в **enabled.**
   
1. Рядом с **воротами развертывания**выберите **Добавить**.
   
1. Выберите **оповещения монитора запросов** из меню выпадения. Эта опция позволяет получить доступ как к оповещениям Azure Monitor, так и к оповещениям Insight.
   
   ![Предупреждения монитора запросов Azure](media/continuous-monitoring/005.png)
   
1. В **соответствии с параметрами оценки**введите значения, которые вы хотите для настроек, таких как **время между переоценкой ворот** и **тайм-аутом, после которого ворота терпят неудачу.** 

## <a name="view-release-logs"></a>Просмотр журналов выпуска

В журналах выпуска можно увидеть поведение строев развертывания и другие этапы выпуска. Чтобы открыть журналы:

1. Выберите **релизы** из левого меню страницы конвейера. 
   
1. Выберите любой релиз. 
   
1. В соответствии с **этапами**выберите любой этап для просмотра резюме релиза. 
   
1. Для просмотра журналов выберите **журналы View** в резюме релиза, выберите гиперссылку **Succeeded** или **Failed** на любом этапе или нависнете над любой стадией и выберите **журналы.** 
   
   ![Просмотр журналов выпуска](media/continuous-monitoring/006.png)

## <a name="next-steps"></a>Дальнейшие действия

Для получения дополнительной информации о трубопроводах Azure можно ознакомиться с [документацией Azure Pipelines.](https://docs.microsoft.com/azure/devops/pipelines)
