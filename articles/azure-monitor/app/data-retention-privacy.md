---
title: Хранилища и хранение данных в Azure Application Insights | Документация Майкрософт
description: Заявление о политике хранении и конфиденциальности
services: application-insights
documentationcenter: ''
author: mrbullwinkle
manager: carmonm
ms.assetid: a6268811-c8df-42b5-8b1b-1d5a7e94cbca
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 05/09/2019
ms.author: mbullwin
ms.openlocfilehash: 38723a5dd306c2a4b594d95e5cc660d117966bc4
ms.sourcegitcommit: 17411cbf03c3fa3602e624e641099196769d718b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2019
ms.locfileid: "65518838"
---
# <a name="data-collection-retention-and-storage-in-application-insights"></a>Сбор и хранение данных в Application Insights

После установки в приложение пакет SDK для [Azure Application Insights][start] отправляет данные телеметрии приложения в облако. Естественно, ответственные разработчики хотят знать, какие именно данные отправляются, что с ними происходит и как ими управлять. В частности, возникают следующие вопросы: можно ли отправлять конфиденциальные данные, где они хранятся и насколько это безопасно? 

Ответ прост.

* Для отправки конфиденциальных данных в службу лучше не использовать телеметрические модули со стандартными настройками. Телеметрия включает метрики нагрузки, производительности и использования, отчеты об исключениях и другие диагностические данные. Основными пользовательскими данными, которые отображаются в диагностических отчетах, являются URL-адреса. Однако приложение в любом случае не должно помещать конфиденциальные данные в URL-адрес в виде обычного текста.
* Можно написать код, который будет отправлять дополнительные пользовательские телеметрические данные для диагностики и мониторинга (эта расширяемость — одна из полезных возможностей Application Insights). По ошибке код может включать в себя личные и другие конфиденциальные данные. Если приложение работает с такими данными, то следует тщательно проверять весь написанный код.
* При разработке и тестировании приложения можно легко проверить, какие именно данные отправляются с помощью пакета SDK. Данные отображаются в окнах вывода отладочных данных IDE и браузера. 
* Данные хранятся на серверах [Microsoft Azure](https://azure.com) в США или Европе. (При этом ваше приложение может выполняться где угодно.) Azure применяет [надежные процедуры обеспечения безопасности и соответствует целому ряду стандартов](https://azure.microsoft.com/support/trust-center/). Доступ к данным будет только у вас и вашей команды. Сотрудникам Майкрософт может предоставляться ограниченный доступ к данным только при определенных условиях и с вашего ведома. Оно шифруется при передаче и хранении.

Далее в статье эта тема рассматривается более подробно. Эта статья содержит все необходимые сведения, поэтому вы можете показывать ее коллегам, которые не работают непосредственно с вами.

## <a name="what-is-application-insights"></a>Что такое Application Insights
[Azure Application Insights][start] — это служба Майкрософт, которая помогает повысить производительность и удобство использования активного приложения. Она отслеживает приложение на протяжении всего времени его работы: как на этапе тестирования, так и после публикации или развертывания. Application Insights создает диаграммы и таблицы, которые могут отображать различные данные: например, в какое время дня у вас наибольшее число пользователей, насколько быстро приложение отвечает на запросы и насколько хорошо оно обслуживается внешними службами, от которых зависит. В случае сбоев, ошибок или проблем с производительностью можно более детально просмотреть телеметрические данные, чтобы определить причину проблемы. Кроме этого, в случае каких-либо изменений в доступности и производительности приложения служба будет отправлять вам по электронной почте соответствующие уведомления.

Чтобы использовать эту возможность, установите в приложение пакет SDK Application Insights, который интегрируется с кодом приложения. Когда приложение запущено, пакет SDK отслеживает его работу и отправляет телеметрические данные в службу Application Insights. Это облачная служба, размещенная в [Microsoft Azure](https://azure.com). (Application Insights работает для любых приложений, а не только тех, которые размещены в Azure.)

Служба Application Insights хранит и анализирует телеметрические данные. Для просмотра результатов анализа или поиска в сохраненных телеметрических данных войдите в учетную запись Azure и откройте в окне приложения ресурс Application Insights. Доступ к данным также можно предоставить другим участникам команды или определенным подписчикам Azure.

Данные можно экспортировать из службы Application Insights — к примеру, в базу данных или на внешние устройства. Каждому устройству можно назначить специальный ключ, предоставляемый службой. При необходимости ключ можно отменить. 

Пакеты SDK Application Insights доступны для разных типов приложений: веб-служб, размещенных на ваших собственных серверах Java EE или ASP.NET или в Azure, веб-клиентов (то есть кода, выполняемого на веб-странице), классических приложений и служб, а также приложений для устройств (например, Windows Phone, iOS и Android). Все они отправляют телеметрические данные в одну и ту же службу.

## <a name="what-data-does-it-collect"></a>Какие данные собираются?
### <a name="how-is-the-data-is-collected"></a>Как собираются данные?
Есть три источника данных:

* Пакет SDK, который вы интегрируете в свое приложение [во время разработки](../../azure-monitor/app/asp-net.md) или [в среде выполнения](../../azure-monitor/app/monitor-performance-live-website-now.md). Существуют разные пакеты SDK для различных типов приложений. Также есть [пакет SDK для веб-страниц](../../azure-monitor/app/javascript.md), который загружается в браузер конечного пользователя вместе со страницей.
  
  * В каждый пакет SDK входит ряд [модулей](../../azure-monitor/app/configuration-with-applicationinsights-config.md), которые используют различные методики для сбора разных типов телеметрических данных.
  * Если пакет SDK устанавливается на этапе разработки, для отправки собственных телеметрических данных, помимо стандартных модулей, можно использовать API. Такая пользовательские телеметрические данные могут включать все данные, которые требуется отправить.
* На некоторых веб-серверах также установлены агенты, которые работают вместе с приложениями и отправляют телеметрические данные о ЦП, памяти и загрузке сети. Например, такие агенты могут быть установлены на виртуальных машинах Azure, узлах Docker и [серверах Java EE](../../azure-monitor/app/java-agent.md).
* [Тесты доступности](../../azure-monitor/app/monitor-web-app-availability.md) — это процессы, выполняемые компанией Майкрософт, которые отправляют запросы к веб-приложению через одинаковые интервалы. Результаты отправляются в службу Application Insights.

### <a name="what-kinds-of-data-are-collected"></a>Какие типы данных собираются?
Вот основные категории данных.

* [Телеметрия веб-сервера](../../azure-monitor/app/asp-net.md) : HTTP-запросы.  URI, время обработки запроса, код ответа, IP-адрес клиента. Идентификатор сеанса.
* [Веб-страницы](../../azure-monitor/app/javascript.md) : количество страниц, пользователей и сеансов. Время загрузки страницы. Исключения. Вызовы AJAX.
* Счетчики производительности: загрузка памяти, ЦП, сети, количество операций ввода-вывода.
* Контекст клиента и сервера: ОС, языковой стандарт, тип устройства, браузер и разрешение экрана.
* [Исключения](../../azure-monitor/app/asp-net-exceptions.md) и сбои: **дампы стека**, идентификатор сборки и тип процессора. 
* [Зависимости](../../azure-monitor/app/asp-net-dependencies.md) : вызовы внешних служб, например REST, SQL и AJAX. URI или строка подключения, длительность, успешное выполнение, команда.
* [Тесты доступности](../../azure-monitor/app/monitor-web-app-availability.md) : длительность теста и его шагов, ответы.
* [Журналы трассировки](../../azure-monitor/app/asp-net-trace-logs.md) и [пользовательские данные телеметрии](../../azure-monitor/app/api-custom-events-metrics.md):  - **все данные, которые программно добавляются в журналы или данные телеметрии**.

[Дополнительные сведения](#data-sent-by-application-insights).

## <a name="how-can-i-verify-whats-being-collected"></a>Как проверить, какие именно данные собираются?
Если приложение разрабатывается в Visual Studio, запустите приложение в режиме отладки (F5). Телеметрические данные появятся в окне вывода. Оттуда их можно скопировать, отформатировать как файл JSON и быстро проверить. 

![](./media/data-retention-privacy/06-vs.png)

В окне диагностики также есть более удобное для чтения представление.

В случае с веб-страницами, откройте окно отладки в браузере.

![Нажмите клавишу F12 и откройте вкладку «Сеть».](./media/data-retention-privacy/08-browser.png)

### <a name="can-i-write-code-to-filter-the-telemetry-before-it-is-sent"></a>Можно ли написать код, чтобы отфильтровать телеметрические данные перед отправкой?
Можно написать [подключаемый модуль обработчика телеметрических данных](../../azure-monitor/app/api-filtering-sampling.md).

## <a name="how-long-is-the-data-kept"></a>Как долго хранятся данные?
Необработанные точки данных (то есть элементы, которые можно запросить в Аналитике и проверить с помощью Поиска) хранятся в течение 90 дней. Если требуется хранить данные дольше, можно использовать [непрерывный экспорт](../../azure-monitor/app/export-telemetry.md) , чтобы копировать их в учетную запись хранения.

Статистические данные (то есть счетчики, средние значения и другие статистические данные, которые отображаются в обозревателе метрик) сохраняются со степенью детализации в 1 минуту в течение 90 дней.

> [!NOTE]
> Хранение переменных для Application Insights теперь находится в предварительной версии. Дополнительные сведения см. [здесь](https://feedback.azure.com/forums/357324-application-insights/suggestions/17454031). 

[Отладочные моментальные снимки](../../azure-monitor/app/snapshot-debugger.md) хранятся в течение 15 дней. Такая политика хранения задается для каждого приложения отдельно. Если нужно изменить этот параметр, вы можете запросить изменения, открыв окно Службы Поддержки на портале Microsoft Azure.

## <a name="who-can-access-the-data"></a>Кто может получить доступ к данным?
Данные видны вам и, если у вас есть учетная запись организации, членам вашей группы. 

Вы и члены группы могут их экспортировать и скопировать в другое место, а также передать другим пользователям.

#### <a name="what-does-microsoft-do-with-the-information-my-app-sends-to-application-insights"></a>Что корпорация Майкрософт делает с данными, которые мое приложение отправляет службе Application Insights?
Корпорация Майкрософт использует данные только для предоставления вам возможностей службы.

## <a name="where-is-the-data-held"></a>Где хранятся данные?
* В США, Европе и юго-восточной Азии. Расположение можно выбрать при создании нового ресурса Application Insights. 

#### <a name="does-that-mean-my-app-has-to-be-hosted-in-the-usa-europe-or-southeast-asia"></a>Значит ли это, что мое приложение должно размещаться в США, Европе или юго-восточной Азии?
* № Ваше приложение может выполняться где угодно, будь то ваш собственный локальный узел или облако.

## <a name="how-secure-is-my-data"></a>Насколько защищены мои данные?
Application Insights — это служба Azure. Политики безопасности описаны в [техническом документе Azure о безопасности, конфиденциальности и соответствии требованиям](https://go.microsoft.com/fwlink/?linkid=392408).

Данные хранятся на серверах Microsoft Azure. Ограничения для учетных записей на портале Azure описаны в документе [Безопасность, конфиденциальность и соответствие нормативам Azure](https://go.microsoft.com/fwlink/?linkid=392408).

Доступ к данным сотрудников Майкрософт ограничен. Доступ производится только с вашего разрешения и в случае, если это необходимо для поддержки использования вами Application Insights. 

Совокупные данные от приложений всех наших клиентов (например, скорость передачи данных и средний размер трассировок) используются для улучшения Application Insights.

#### <a name="could-someone-elses-telemetry-interfere-with-my-application-insights-data"></a>Могут ли данные телеметрии другого пользователя повлиять на мои данные Application Insights?
Дополнительные данные телеметрии могут отправляться в вашу учетную запись с помощью ключа инструментирования, который можно найти в коде веб-страниц. При достаточном объеме дополнительных данных вашим метрики неправильно представляют производительность и использование приложения.

Если вы совместно используете код в других проектах, не забудьте удалить ключ инструментирования.

## <a name="is-the-data-encrypted"></a>Шифруются ли данные?
Все данные шифруются при хранении и как его перемещением данных между центрами обработки.

#### <a name="is-the-data-encrypted-in-transit-from-my-application-to-application-insights-servers"></a>Данные шифруются при передаче из приложения на серверы Application Insights?
Да, мы используем HTTPS для отправки данных на портал практически из всех пакетов SDK, включая веб-серверы, устройства и веб-страницы HTTPS. Единственное исключение — данные, отправляемые с простых веб-страниц HTTP.

## <a name="does-the-sdk-create-temporary-local-storage"></a>Создает ли пакет SDK временное локальное хранилище?

Да, некоторые каналы телеметрии будут хранить данные локально, если конечная точка не доступна. Просмотрите нижеуказанный перечень платформ и каналов телеметрии, которые затрагиваются.

Каналы телеметрии, использующие локальное хранилище, создают временные файлы в TEMP или APPDATA каталогах, которые ограничены определенной учетной записью для запуска приложения. Это может произойти, если конечная точка временно недоступна или вы достигли предела регулирования. Каналы телеметрии возобновят отправку новых и сохраненных данных, когда проблема решится.

Эти сохраненные данные не шифруется локально. Если это представляет собой проблему, просмотрите данные и запретить сбор личных данных. (Для дополнительной информации см. [Как экспортировать и удалять персональные данные](https://docs.microsoft.com/azure/application-insights/app-insights-customer-data#how-to-export-and-delete-private-data).)

Если пользователю нужно настроить каталог с особыми требованиями безопасности, их можно установить для каждой отдельной платформы. Убедитесь, что процесс для запуска приложения имеет доступ к каталогу, а также убедитесь, что каталог защищен от возможности прочтения данных телеметрии нежелательными пользователями.

### <a name="java"></a>Java

`C:\Users\username\AppData\Local\Temp` используется для сохраненных данных. Это расположение не настраивается в каталоге конфигурации, и разрешение на доступ к этой папке ограничено конкретным пользователем с необходимыми полномочиями. (См. [пример реализации](https://github.com/Microsoft/ApplicationInsights-Java/blob/40809cb6857231e572309a5901e1227305c27c1a/core/src/main/java/com/microsoft/applicationinsights/internal/util/LocalFileSystemUtils.java#L48-L72) здесь.)

###  <a name="net"></a>.Net

По умолчанию `ServerTelemetryChannel` использует локальную папку данных приложения текущего пользователя `%localAppData%\Microsoft\ApplicationInsights` или временную папку `%TMP%`. (См. [пример реализации](https://github.com/Microsoft/ApplicationInsights-dotnet/blob/91e9c91fcea979b1eec4e31ba8e0fc683bf86802/src/ServerTelemetryChannel/Implementation/ApplicationFolderProvider.cs#L54-L84) здесь.)


С помощью файла конфигурации:
```xml
<TelemetryChannel Type="Microsoft.ApplicationInsights.WindowsServer.TelemetryChannel.ServerTelemetryChannel,   Microsoft.AI.ServerTelemetryChannel">
    <StorageFolder>D:\NewTestFolder</StorageFolder>
</TelemetryChannel>
```

С помощью кода:

- Удалите ServerTelemetryChannel с файла конфигурации
- Добавьте этот фрагмент кода в ваш файл конфигурации:
  ```csharp
  ServerTelemetryChannel channel = new ServerTelemetryChannel();
  channel.StorageFolder = @"D:\NewTestFolder";
  channel.Initialize(TelemetryConfiguration.Active);
  TelemetryConfiguration.Active.TelemetryChannel = channel;
  ```

### <a name="netcore"></a>NetCore

По умолчанию `ServerTelemetryChannel` использует локальную папку данных приложения текущего пользователя `%localAppData%\Microsoft\ApplicationInsights` или временную папку `%TMP%`. (См. [пример реализации](https://github.com/Microsoft/ApplicationInsights-dotnet/blob/91e9c91fcea979b1eec4e31ba8e0fc683bf86802/src/ServerTelemetryChannel/Implementation/ApplicationFolderProvider.cs#L54-L84) здесь.) В среде Linux локальное хранилище отключено, если только не указана 	папка хранилища.

Следующий фрагмент кода демонстрирует, как установить `ServerTelemetryChannel.StorageFolder` в метод `ConfigureServices()`  класса  `Startup.cs` .

```csharp
services.AddSingleton(typeof(ITelemetryChannel), new ServerTelemetryChannel () {StorageFolder = "/tmp/myfolder"});
```

(Для дополнительной информации см. [Настраиваемая конфигурация AspNetCore](https://github.com/Microsoft/ApplicationInsights-aspnetcore/wiki/Custom-Configuration). )

### <a name="nodejs"></a>Node.js

По умолчанию `%TEMP%/appInsights-node{INSTRUMENTATION KEY}` используется для сохраненных данных. Разрешение на доступ к этой папке дано только текущему пользователю и администраторам. (См. [пример реализации](https://github.com/Microsoft/ApplicationInsights-node.js/blob/develop/Library/Sender.ts) здесь.)

Префикс папки `appInsights-node` можно перевести в ручной режим, изменив значение времени выполнения статической переменной `Sender.TEMPDIR_PREFIX` в [Sender.ts](https://github.com/Microsoft/ApplicationInsights-node.js/blob/7a1ecb91da5ea0febf5ceab13d6a4bf01a63933d/Library/Sender.ts#L384).



## <a name="how-do-i-send-data-to-application-insights-using-tls-12"></a>Как отправить данные в Application Insights с помощью TLS 1.2?

Чтобы обеспечить безопасность данных в пути к конечным точкам Application Insights, мы настоятельно рекомендуем клиентам настроить приложение на использование протокола TLS как минимум версии 1.2. Более старые версии протоколов TLS/SSL оказались уязвимы, и хотя они все еще используются для обеспечения обратной совместимости, применять их **не рекомендуется**, поскольку представители отрасли стремятся как можно скорее отказаться от их поддержки. 

[Совет по стандартам безопасности PCI](https://www.pcisecuritystandards.org/) установил [крайний срок (30 июня 2018 года)](https://www.pcisecuritystandards.org/pdfs/PCI_SSC_Migrating_from_SSL_and_Early_TLS_Resource_Guide.pdf) для отказа от старых версий протоколов TLS/SSL и перехода на более безопасные протоколы. Как только Azure прекратит поддержку предыдущих версий, приложения/клиенты, не поддерживающие протокол TLS хотя бы версии 1.2, не смогут отправлять данные в Application Insights. Подход, применяемый для тестирования и проверки поддержки протокола TLS приложением, будет зависеть от операционной системы или платформы, а также языка или инфраструктуры, используемых приложением.

Рекомендуется, по возможности, не настраивать в приложении работу только с протоколом TLS 1.2, так как это может нарушить работу функций безопасности на уровне платформы, которые позволяют автоматически обнаруживать и использовать новые более безопасные протоколы по мере их появления, например TLS 1.3. Советуем тщательно проверять код приложения на наличие жестко прописанных версий протокола TLS/SSL.

### <a name="platformlanguage-specific-guidance"></a>Руководство по отдельным платформам и языкам

|Платформа или язык | Поддержка | Дополнительные сведения |
| --- | --- | --- |
| Службы приложений Azure  | Поддерживается, может потребоваться настройка. | О поддержке объявили в апреле 2018 г. [Сведения о конфигурации](https://blogs.msdn.microsoft.com/appserviceteam/2018/04/17/app-service-and-functions-hosted-apps-can-now-update-tls-versions/) см. в объявлении о выпуске.  |
| Приложения-функции Azure | Поддерживается, может потребоваться настройка. | О поддержке объявили в апреле 2018 г. [Сведения о конфигурации](https://blogs.msdn.microsoft.com/appserviceteam/2018/04/17/app-service-and-functions-hosted-apps-can-now-update-tls-versions/) см. в объявлении о выпуске. |
|.NET | Поддерживается, конфигурация зависит от версии. | Подробную информацию о конфигурации для .NET 4.7 и более ранних версий см. в [этих инструкциях](https://docs.microsoft.com/dotnet/framework/network-programming/tls#support-for-tls-12).  |
|Монитор состояния | Поддерживается, требуется настройка | Монитор состояния зависит от [Конфигурации ОС](https://docs.microsoft.com/windows-server/security/tls/tls-registry-settings) + [Конфигурации .NET](https://docs.microsoft.com/dotnet/framework/network-programming/tls#support-for-tls-12) для поддержки протокола TLS 1.2.
|Node.js |  Поддерживается, для версии 10.5.0 может потребоваться настройка. | Для определения точной конфигурации приложения используйте [официальную документацию Node.js по протоколу TLS/SSL](https://nodejs.org/api/tls.html). |
|Java | Поддерживается, в JDK поддержка протокола TLS 1.2 добавлена в [обновлении 121 для JDK 6](https://www.oracle.com/technetwork/java/javase/overview-156328.html#R160_121) и [JDK 7](https://www.oracle.com/technetwork/java/javase/7u131-relnotes-3338543.html). | JDK 8 использует [протокол TLS 1.2 по умолчанию](https://blogs.oracle.com/java-platform-group/jdk-8-will-use-tls-12-as-default).  |
|Linux | Как правило, дистрибутивы Linux для поддержки протокола TLS 1.2 используют [OpenSSL](https://www.openssl.org).  | Убедитесь, что ваша версия OpenSSL поддерживается, проверив [журнал изменений OpenSSL](https://www.openssl.org/news/changelog.html).|
| Windows 8.0–10 | Поддерживается и включена по умолчанию. | Убедитесь, что вы все еще используете [параметры по умолчанию](https://docs.microsoft.com/windows-server/security/tls/tls-registry-settings).  |
| Windows Server 2012–2016 | Поддерживается и включена по умолчанию. | Убедитесь, что вы все еще используете [параметры по умолчанию](https://docs.microsoft.com/windows-server/security/tls/tls-registry-settings). |
| Windows 7 с пакетом обновления 1 и Windows Server 2008 R2 с пакетом обновления 1 | Поддерживается, но не включена по умолчанию. | Информацию о том, как ее включить, см. на странице [Transport Layer Security (TLS) registry settings](https://docs.microsoft.com/windows-server/security/tls/tls-registry-settings) (Параметры реестра TLS).  |
| Windows Server 2008 с пакетом обновления 2 (SP2) | Для поддержки протокола TLS 1.2 требуется обновление. | См. статью об [обновлении для добавления поддержки TLS 1.2 в Windows Server 2008 с пакетом обновления 2](https://support.microsoft.com/help/4019276/update-to-add-support-for-tls-1-1-and-tls-1-2-in-windows-server-2008-s). |
|Windows Vista |  Не поддерживается. | Н/Д

### <a name="check-what-version-of-openssl-your-linux-distribution-is-running"></a>Проверка версии OpenSSL, используемой дистрибутивом Linux

Чтобы проверить, какая версия OpenSSL установлена, откройте терминал и выполните команду:

```terminal
openssl version -a
```

### <a name="run-a-test-tls-12-transaction-on-linux"></a>Выполнение тестовой транзакции TLS 1.2 на платформе Linux

Для выполнения базовой предварительной проверки способности системы Linux обмениваться данными по протоколу TLS 1.2. Откройте терминал и выполните следующую команду:

```terminal
openssl s_client -connect bing.com:443 -tls1_2
```

## <a name="personal-data-stored-in-application-insights"></a>Персональные данные, хранимые в Application Insights

Этот вопрос подробно рассмотрен в нашей [статье о персональных данных в Application Insights](../../azure-monitor/platform/personal-data-mgmt.md).

#### <a name="can-my-users-turn-off-application-insights"></a>Могут ли мои пользователи отключить Application Insights?
Не напрямую. Мы не предоставляем параметр, с помощью которого пользователи могут отключить Application Insights.

Однако вы можете реализовать такую возможность в своем приложении. Все пакеты SDK содержат параметр API, который отключает сбор данных телеметрии. 

## <a name="data-sent-by-application-insights"></a>Данные, передаваемые службой Application Insights
На разных платформах пакеты SDK различаются, при этом существует несколько компонентов, которые можно установить. (Ознакомьтесь с [обзором Application Insights][start].) Каждый компонент отправляет различные данные.

#### <a name="classes-of-data-sent-in-different-scenarios"></a>Классы данных, передаваемых в различных сценариях

| Ваше действие | Собираемые классы данных (см. следующую таблицу) |
| --- | --- |
| [Добавление пакета SDK для Application Insights в веб-проект .NET][greenbrown] |ServerContext<br/>Выводимые<br/>Счетчики производительности<br/>Requests<br/>**Исключения**<br/>Сеанс<br/>пользователей |
| [Установка монитора состояния на сервере IIS][redfield] |Зависимости<br/>ServerContext<br/>Выводимые<br/>Счетчики производительности |
| [Добавление пакета SDK для Application Insights в веб-приложение Java][java] |ServerContext<br/>Выводимые<br/>Запрос<br/>Сеанс<br/>пользователей |
| [Добавление пакета SDK для JavaScript на веб-страницу][client] |ClientContext <br/>Выводимые<br/>Страница<br/>ClientPerf<br/>Ajax |
| [Определение свойств по умолчанию][apiproperties] |**Свойства** всех стандартных и настраиваемых событий |
| [Вызов TrackMetric][api] |Числовые значения<br/>**Свойства** |
| [Вызов Track*][api] |Имя события<br/>**Свойства** |
| [Вызов TrackException][api] |**Исключения**<br/>Дамп стека<br/>**Свойства** |
| Пакету SDK не может собрать данные. Например: <br/> не удается получить доступ к счетчикам производительности;<br/> порождается исключение в инициализаторе телеметрии. |Диагностика SDK |

Сведения о [пакетах SDK для других платформ][platforms] можно получить в соответствующей документации.

#### <a name="the-classes-of-collected-data"></a>Классы собираемых данных

| Собираемый класс данных | Включает (неисчерпывающий список) |
| --- | --- |
| **Свойства** |**Все данные — определяется кодом** |
| DeviceContext |Идентификатор, IP-адрес, языковой стандарт, модель устройства, сеть, тип сети, имя изготовителя оборудования, разрешение экрана, экземпляр роли, имя роли, тип устройства |
| ClientContext |ОС, языковой стандарт, язык, сеть, разрешение окна |
| Сеанс |идентификатор сеанса |
| ServerContext |Имя компьютера, языковой стандарт, ОС, устройство, сеанс пользователя, контекст пользователя, операция |
| Выводимые |географическое расположение на основе IP-адреса, отметка времени, ОС, браузер |
| Метрики |Имя и значение метрики |
| События |Имя и значение события |
| PageViews |URL-адрес и имя страницы или имя экрана |
| Производительность клиента |URL-адрес или имя страницы, время загрузки браузера |
| Ajax |Вызовы HTTP от веб-страницы на сервер |
| Requests |URL-адрес, длительность, код ответа |
| Зависимости |Тип (SQL, HTTP,...), строка подключения или URI, синхронный или асинхронный, длительность, успех, инструкция SQL (с монитором состояния) |
| **Исключения** |Тип, **сообщения**, стеки вызовов, исходный файл и номер строки, идентификатор потока |
| Сбои |Код процесса, код родительского процесса, код потока сбоя, исправление приложения, идентификатор, сборка, тип исключения, адрес, причина, скрытые символы и регистры, начальный и конечный двоичный адрес, имя и путь двоичного файла, тип ЦП |
| Трассировка |**Сообщение** и уровень серьезности |
| Счетчики производительности |Время процессора, объем доступной памяти, частота запросов, скорость исключения, байтов исключительного пользования процесса, скорость ввода-вывода, длительность запроса, длина очереди запросов |
| Доступность |Код ответа веб-теста, длительность каждого шага теста, имя теста, метка времени, успешное завершение, время отклика, расположение теста. |
| Диагностика SDK |Сообщение трассировки или исключение |

Вы можете [отключить некоторые данные, изменив файл ApplicationInsights.config][config].

> [!NOTE]
> IP-адрес клиента используется для определения географического расположения, но сейчас данные об IP-адресах больше не сохраняются по умолчанию, а в соответствующее поле записываются нули. Дополнительные сведения об обработке персональных данных см. в этой [статье](../../azure-monitor/platform/personal-data-mgmt.md#application-data). Если вам необходимо сохранить IP-адрес, это можно сделать с помощью [инициализатора телеметрии](./../../azure-monitor/app/api-filtering-sampling.md#add-properties-itelemetryinitializer).

## <a name="credits"></a>Титры
Этот продукт содержит данные GeoLite2, созданные пользователем MaxMind и доступные на веб-сайте [https://www.maxmind.com](https://www.maxmind.com).



<!--Link references-->

[api]: ../../azure-monitor/app/api-custom-events-metrics.md
[apiproperties]: ../../azure-monitor/app/api-custom-events-metrics.md#properties
[client]: ../../azure-monitor/app/javascript.md
[config]: ../../azure-monitor/app/configuration-with-applicationinsights-config.md
[greenbrown]: ../../azure-monitor/app/asp-net.md
[java]: ../../azure-monitor/app/java-get-started.md
[platforms]: ../../azure-monitor/app/platforms.md
[pricing]: https://azure.microsoft.com/pricing/details/application-insights/
[redfield]: ../../azure-monitor/app/monitor-performance-live-website-now.md
[start]: ../../azure-monitor/app/app-insights-overview.md

