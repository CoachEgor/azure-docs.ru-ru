---
title: Общие сведения о журнале действий Azure
description: Узнайте, что такое журнал действий Azure и как его использовать для просмотра событий, происходящих в рамках подписки Azure.
author: bwren
services: azure-monitor
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 05/19/2019
ms.author: bwren
ms.subservice: logs
ms.openlocfilehash: fa1737a8627fe9561a2a84e7f0ef69aefb6deb14
ms.sourcegitcommit: ee61ec9b09c8c87e7dfc72ef47175d934e6019cc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/30/2019
ms.locfileid: "70170619"
---
# <a name="overview-of-azure-activity-log"></a>Общие сведения о журнале действий Azure

**Журнал действий Azure** позволяет получить представление о событиях уровня подписки, произошедших в Azure. Сюда входят различные данные — от операционных данных Azure Resource Manager до обновлений в событиях работоспособности службы. Журнал действий ранее назывался журналами _аудита_ или _операционными журналами_, так как административная категория сообщает о событиях плоскости управления для ваших подписок. 

Используйте журнал действий, чтобы определить, _кто_и _когда_ для любых операций записи (размещение, публикация, удаление), выполненных с ресурсами в вашей подписке. Вы также можете отслеживать состояние операции и другие ее свойства. 

Журнал действий не включает операции чтения (GET) или операции для ресурсов, использующих классическую модель/RDFE.

## <a name="comparison-to-diagnostic-logs"></a>Сравнение с журналами диагностики
Для каждой подписки Azure существует один журнал действий. Он предоставляет данные об операциях с ресурсом извне ("плоскость управления"). [Журналы диагностики](diagnostic-logs-overview.md) создаются ресурсом и предоставляют сведения об их работе ("плоскость данных"). Необходимо включить параметры диагностики для каждого ресурса.

![Журналы действий по сравнению с журналами диагностики](./media/activity-logs-overview/Activity_Log_vs_other_logs_v5.png)


> [!NOTE]
> Журнал действий Azure используется главным образом для действий, которые происходят в Azure Resource Manager. Ресурсы, использующие классическую модель или модель RDFE, не отслеживаются. Для некоторых классических типов ресурсов в Azure Resource Manager имеется прокси-поставщик ресурсов (например, Microsoft.ClassicCompute). Если вы взаимодействуете с ресурсом классического типа через Azure Resource Manager с помощью этих прокси-поставщиков ресурсов, то такие операции отображаются в журнале действий. Если вы взаимодействуете с ресурсом классического типа за пределами прокси Azure Resource Manager, ваши действия записываются только в журнал операций. Журнал операций можно просмотреть в отдельном разделе портала.

## <a name="activity-log-retention"></a>Хранение журнала действий
После создания записи журнала действий не изменяются и не удаляются системой. Кроме того, их нельзя изменить в интерфейсе или программно. События журнала действий хранятся в течение 90 дней. Чтобы сохранить эти данные для более длительных периодов, [собирайте их в Azure Monitor](activity-log-collect.md) или экспортируйте в [хранилище или концентраторы событий](activity-log-export.md).

## <a name="view-the-activity-log"></a>Просмотр журнала действий
Просмотрите журнал действий для всех ресурсов в меню " **монитор** " в портал Azure. Просмотрите журнал действий для определенного ресурса из пункта **Журнал действий** в меню этого ресурса. Вы также можете получать записи журнала действий с помощью PowerShell, CLI или REST API.  См. раздел [Просмотр и получение событий журнала действий Azure](activity-log-view.md).

![Просмотр журнала действий](./media/activity-logs-overview/view-activity-log.png)

## <a name="collect-activity-log-in-azure-monitor"></a>Получение журнала действий в Azure Monitor
Собирайте журнал действий в рабочую область Log Analytics в Azure Monitor, чтобы проанализировать ее с помощью других данных мониторинга и сохранить данные дольше 90 дней. См. статью [Получение и анализ журналов действий Azure в log Analytics рабочей области в Azure Monitor](activity-log-collect.md).

![Журнал действий запросов](./media/activity-logs-overview/query-activity-log.png)

## <a name="export-activity-log"></a>Экспортировать журнал действий
Экспорт журнала действий в службу хранилища Azure для архивации или потоковая передача в концентратор событий для приема сторонними службами или решениями пользовательской аналитики. См. раздел [Экспорт журнала действий Azure](activity-log-export.md). Можно также проанализировать события журнала действий в Power BI с помощью [**пакета содержимого Power BI**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).

## <a name="alert-on-activity-log"></a>Оповещение о журнале действий
Вы можете создать оповещение при создании определенных событий в журнале действий с [оповещением журнала действий](activity-log-alerts.md). Вы также можете создать оповещение с помощью [запроса журнала](alerts-log-query.md) , если журнал действий подключен к рабочей области log Analytics, но есть затраты на ведение журнала предупреждений о запросах. Затраты на оповещения журнала действий не взимается.

## <a name="categories-in-the-activity-log"></a>Категории в журнале действий
Каждое событие в журнале действий имеет определенную категорию, описанную в следующей таблице. Подробные сведения см. в статье [Схема событий журнала действий Azure](activity-log-schema.md). 

| Категория | Описание |
|:---|:---|
| Административная | Содержит запись всех операций создания, обновления, удаления и действий, выполненных с помощью диспетчер ресурсов. К примерам административных событий относятся _Создание виртуальной машины_ и _Удаление группы безопасности сети_.<br><br>Каждое действие, выполняемое пользователем или приложением с помощью диспетчер ресурсов, моделируется как операция с определенным типом ресурса. Если тип операции — _запись_, _Удаление_или _действие_, то записи как запуска, так и успешной или неуспешной работы регистрируются в административной категории. Административные события также включают в себя любые изменения в управлении доступом на основе ролей в подписке. |
| Работоспособность службы | Содержит записи всех инцидентов работоспособности служб, произошедших в Azure. Пример события работоспособности службы _SQL Azure в восточной части США — время простоя_. <br><br>События работоспособности службы бывают шести видов: _Необходимые действия_, _помощь_по восстановлению, инциденту, _обслуживанию_, _информации_или _безопасности_. Эти события создаются только при наличии в подписке ресурса, на который повлияло событие.
| Работоспособность ресурсов | Содержит записи о событиях работоспособности ресурсов, произошедших в ресурсах Azure. Пример события Работоспособность ресурсов — _состояние работоспособности виртуальной машины изменено на_"недоступно".<br><br>События Работоспособность ресурсов могут представлять одно из четырех состояний работоспособности: _Доступно_,недоступно, _снижено_и _неизвестно_. Кроме того, Работоспособность ресурсов события могут классифицироваться как _инициированные платформой_ или инициированные _пользователем_. |
| Оповещение | Содержит запись активаций для оповещений Azure. Пример события предупреждения —% загруженности _ЦП на myVM за последние 5 минут в течение 80_.|
| Автомасштабирование | Содержит записи всех событий, связанных с операцией механизма автомасштабирования на основе всех параметров автомасштабирования, определенных в подписке. В качестве примера события автомасштабирования не _удалось выполнить действие автоматического масштабирования_. |
| Рекомендация | Содержит события рекомендаций из помощника по Azure. |
| Безопасность | Содержит записи всех предупреждений, созданных центром безопасности Azure. Примером события безопасности является _подозрительный файл двойного расширения_. |
| Политика | Содержит записи всех операций действий, выполняемых политикой Azure. К примерам событий политики относятся _Audit_ и _Deny_. Каждое действие, выполняемое Политикой, моделируется как операция для ресурса. |


## <a name="next-steps"></a>Следующие шаги

* [Создание профиля журнала для экспорта журнала действий Azure](activity-log-export.md)
* [Потоковая передача журнала действий Azure в Центры событий](activity-logs-stream-event-hubs.md)
* [Архивация журнала действий Azure в хранилище](archive-activity-log.md)

