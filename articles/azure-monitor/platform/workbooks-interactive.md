---
title: Рабочие книги Azure Monitor с пользовательскими параметрами
description: Упростите создание сложных отчетов с помощью готовых настраиваемых параметризованных книг
services: azure-monitor
author: mrbullwinkle
manager: carmonm
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 10/23/2019
ms.author: mbullwin
ms.openlocfilehash: 4d9f6e48722f01970a90a3a1d8d8b58b5d939774
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77658278"
---
# <a name="interactive-workbooks"></a>Интерактивные Workbooks

Учебники позволяют авторам создавать интерактивные отчеты и опыт для своих потребителей. Интерактивность поддерживается несколькими способами.

## <a name="parameter-changes"></a>Изменения параметров
Когда пользователь рабочей книги обновляет параметр, любой элемент управления, который использует параметр, автоматически обновляется и перерисовывается, чтобы отразить новое состояние. Таким образом, большинство отчетов портала Azure поддерживают интерактивность. Трудовые книжки обеспечивают это в очень прямой манере вперед с минимальными усилиями пользователя.

Подробнее о [параметрах в трудовых книжках](workbooks-parameters.md)

## <a name="grid-row-clicks"></a>Клики строки сетки
Трудовые книжки позволяют авторам создавать сценарии, при которых нажатие строки в сетке обновляет последующие диаграммы на основе содержания строки. 

Например, пользователь может иметь сетку, которая показывает список запросов и некоторые статистические данные, такие как количество сбоев. Они могли бы настроить его таким образом, что нажатие строки, соответствующей запросу, приведет к детальным диаграммам ниже обновления для фильтрации только к этому запросу.

### <a name="setting-up-interactivity-on-grid-row-click"></a>Настройка интерактивности на клик езды строки сетки
1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов _Edit._
2. Используйте ссылку _добавления запроса,_ чтобы добавить элемент управления запросом журнала в рабочую книгу. 
3. Выберите тип запроса как _журнал,_ тип ресурса (например, Application Insights) и ресурсы для таргетинга.
4. Используйте редактор запроса для ввода КЗЛ для анализа
    ```kusto
    requests
    | summarize AllRequests = count(), FailedRequests = countif(success == false) by Request = name
    | order by AllRequests desc    
    ```
5. `Run query`чтобы увидеть результаты
6. Нажмите на значок _Расширенные настройки_ на колонтитуле запроса (значок выглядит как шестерня). Это открывает расширенные настройки панели 
7. Проверьте настройки:`When an item is selected, export a parameter`
    1. Поле для экспорта:`Request`
    2. Название параметра:`SelectedRequest`
    3. Значение по умолчанию — `All requests`.
    
    ![Изображение, показывающее передовой редактор с настройками для экспорта полей в качестве параметров](./media/workbooks-interactive/advanced-settings.png)

8. Нажмите кнопку `Done Editing`.
9. Добавьте другой элемент управления запросом, используя шаги 2 и 3.
10. Используйте редактор запроса для ввода КЗЛ для анализа
    ```kusto
    requests
    | where name == '{SelectedRequest}' or 'All Requests' == '{SelectedRequest}'
    | summarize ['{SelectedRequest}'] = count() by bin(timestamp, 1h)
    ```
11. `Run query`чтобы увидеть результаты.
12. Изменение _визуализации_ в`Area chart`
12. Нажмите на строку в первой сетке. Обратите внимание, как диаграмма области ниже фильтрует выбранный запрос.

Полученный отчет выглядит следующим образом в режиме отодвождения:

![Изображение, показывающее создание интерактивного опыта с помощью кликов строки сетки](./media/workbooks-interactive//grid-click-create.png)

На рисунке ниже показан более сложный интерактивный отчет в режиме чтения, основанный на тех же принципах. Отчет использует клики сетки для экспорта параметров - которые, в свою очередь, используются в двух диаграммах и текстовом блоке.

![Изображение, показывающее создание интерактивного опыта с помощью кликов строки сетки](./media/workbooks-interactive/grid-click-read-mode.png)

### <a name="exporting-the-contents-of-an-entire-row"></a>Экспорт содержимого целой строки
Иногда желательно экспортировать все содержимое выбранной строки, а не только определенный столбец. В таких случаях `Field to export` оставьте имущество неустановленным в шаге 7.1 выше. В учебниках будет экспортироваться все содержимое строки в качестве json к параметру. 

На ссылках на управление КЗЛ используйте функцию `todynamic` для разбора json и доступа к отдельным столбцам.

 ## <a name="grid-cell-clicks"></a>Сетка ячейки кликов
Трудовые книжки позволяют авторам добавлять интерактивность через специальный тип столбца сетки называется `link renderer`. Рендеринг соединения преобразует ячейку сетки в гиперссылку, основанную на содержимом ячейки. Учебники поддерживают многие виды рендеров ссылок - в том числе те, которые позволяют открытие ресурсов обзор лезвия, собственность мешок зрителей, Поиск App Insights, использование, отслеживание транзакций и т.д.

### <a name="setting-up-interactivity-using-grid-cell-clicks"></a>Настройка интерактивности с помощью щелчков ячейки сетки
1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов _Edit._
2. Используйте ссылку _добавления запроса,_ чтобы добавить элемент управления запросом журнала в рабочую книгу. 
3. Выберите тип запроса как _журнал,_ тип ресурса (например, Application Insights) и ресурсы для таргетинга.
4. Используйте редактор запроса для ввода КЗЛ для анализа
    ```kusto
    requests
    | summarize Count = count(), Sample = any(pack_all()) by Request = name
    | order by Count desc
    ```
5. `Run query`чтобы увидеть результаты
6. Нажмите _настройки столбца,_ чтобы открыть панель настроек.
7. В разделе _Колонки,_ установите:
    1. _Пример_ - Колонка `Link`Рендер: `Cell Details`, Вид, чтобы открыть: , Ссылка этикетка:`Sample`
    2. _Граф_ - Колонка `Bar`Рендер: `Blue`, Цветовая палитра: , Минимальное значение:`0`
    3. _Запрос_ - Колонка Рендер:`Automatic`
    4. Нажмите _Сохранить и закрыть_ для применения изменений
8. Нажмите на `Sample` одну из ссылок в сетке. Это открывает панель свойств с деталями выбранного запроса.

    ![Изображение, показывающее создание интерактивного опыта с помощью щелчков ячейки сетки](./media/workbooks-interactive/grid-cell-click-create.png)

### <a name="link-renderer-actions"></a>Действия рендерера ссылки
| Ссылка действий | Действие на кнопку |
|:------------- |:-------------|
| `Generic Details` | Отображает значения строки в лезвии контекста сетки свойств |
| `Cell Details` | Отображает значение ячейки в лезвии контекста сетки свойств. Полезно, когда ячейка содержит динамический тип с информацией (например, json с свойствами запроса, такими как местоположение, пример роли и т.д.). |
| `Cell Details` | Отображает значение ячейки в лезвии контекста сетки свойств. Полезно, когда ячейка содержит динамический тип с информацией (например, json с свойствами запроса, такими как местоположение, пример роли и т.д.). |
| `Custom Event Details` | Открывает сведения о поиске Application Insights с помощью пользовательского идентификатора события (itemId) в ячейке |
| `* Details` | По аналогии с пользовательскими сведениями о событиях, за исключением зависимостей, исключений, представлений страниц, запросов и следов. |
| `Custom Event User Flows` | Открывает опыт Application Insights User Flows, поворотный на пользовательском имени события в ячейке |
| `* User Flows` | По аналогии с пользовательскими потоками пользователей событий, за исключением исключений, просмотров страниц и запросов |
| `User Timeline` | Открывает телефон времени пользователя с идентификатором пользователя (user_Id) в ячейке |
| `Session Timeline` | Открывает опыт поиска Application Insights для значения в ячейке (например, поиск текста 'abc', где abc является значением в ячейке) |
| `Resource overview` | Откройте обзор ресурса на портале на основе значения идентификатора ресурса в ячейке |

## <a name="conditional-visibility"></a>Условная видимость
Рабочая книга позволяет пользователям сделать определенные элементы управления отображаются или исчезают в зависимости от значений параметров. Это позволяет авторам иметь отчеты выглядят по-разному в зависимости от ввода пользователя или состояния телеметрии. Примером является показ потребителям только резюме, когда все хорошо, но показать полную информацию, когда что-то не так.

### <a name="setting-up-interactivity-using-conditional-visibility"></a>Настройка интерактивности с использованием условной видимости
1. Выполните шаги `Setting up interactivity on grid row click` в разделе, чтобы настроить два интерактивных управления.
2. Добавьте новый параметр вверху:
    1. Имя: `ShowDetails`
    2. Тип параметра:`Drop down`
    3. Обязательно:`checked`
    4. Получить данные от:`JSON`
    5. Ввод JSON:`["Yes", "No"]`
    6. Сохранить для фиксации изменений.
3. Установите значение параметра`Yes`
4. В управлении запросом с диаграммой области щелкните значок _Расширенные настройки_ (значок передачи)
5. Проверить настройки`Make this item conditionally visible`
    1. Этот элемент виден, `ShowDetails` `equals` если значение параметра`Yes`
6. Нажмите _на готовое редактирование,_ чтобы зафиксировать изменения.
7. Нажмите _Готово Редактирование_ на панели инструментов рабочей книги, чтобы войти в режим чтения.
8. Переключите значение `ShowDetails` `No`параметра на . Обратите внимание, что приведенная ниже диаграмма исчезает.

На рисунке ниже показан `ShowDetails` видимый случай, где`Yes`

![Изображение, показывающее условную видимость, где видна диаграмма](./media/workbooks-interactive/conditional-visibility.png)

На рисунке ниже показан `ShowDetails` скрытый случай, где`No`

![Изображение, показывающее условную видимость, где скрыта диаграмма](./media/workbooks-interactive/conditional-invisible.png)

## <a name="next-steps"></a>Дальнейшие действия


* [Начать](workbooks-visualizations.md) узнавать больше о рабочих книгах много богатых вариантов визуализации.
* [Контролируйте](workbooks-access-control.md) и делитесь доступом к ресурсам вашей трудовой книжки.
