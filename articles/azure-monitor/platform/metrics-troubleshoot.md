---
title: Устранение неполадок диаграмм метрик Azure Monitor
description: Устранение неполадок при создании, Настройка и интерпретация диаграммы метрик
author: vgorbenko
services: azure-monitor
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 04/23/2019
ms.author: vitalyg
ms.subservice: metrics
ms.openlocfilehash: 73ef5cc00b5154dbdbc92911d17740c7d13038ec
ms.sourcegitcommit: a12b2c2599134e32a910921861d4805e21320159
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/24/2019
ms.locfileid: "67341976"
---
# <a name="troubleshooting-metrics-charts"></a>Устранение неполадок диаграмм метрик

Воспользуйтесь этой статьей, если возникнут проблемы с созданием, Настройка или интерпретации диаграмм в обозревателе метрик Azure. Если вы не знакомы с метрик, Дополнительные сведения о [Приступая к работе с обозревателем метрик](metrics-getting-started.md) и [дополнительные возможности обозревателя метрик](metrics-charts.md). Также вы увидите [примеры](metric-chart-samples.md) настроенных диаграмм метрик.

## <a name="cant-find-your-resource-to-select-it"></a>Не удается найти ваш ресурс, чтобы выбрать его

Вы перешли **выберите ресурс** кнопку, но не видите ресурса в диалоговом окне выбора ресурсов.

**Решение.** Обозреватель метрик требует выбора подписок и групп ресурсов до перечисления доступных ресурсов. Если вы не видите ресурса:

1. Убедитесь, что вы выбрали правильную подписку в **подписки** раскрывающегося списка. Если ваша подписка не указана, щелкнуть **каталог и подписка параметры** и добавить подписку с вашим ресурсом.

1. Убедитесь, что вы выбрали правильную группу ресурсов.
    > [!WARNING]
    > Для наилучшей производительности при первом открытии обозревателя метрик **группы ресурсов** раскрывающийся список содержит нет предварительно выбранных групп ресурсов. Вам необходимо выбрать хотя бы одну группу, чтобы увидеть все ресурсы.

## <a name="chart-shows-no-data"></a>Диаграмма показывает нет данных

Иногда диаграммы может показывать нет данных, выбрав соответствующие ресурсы и метрики. Это поведение может быть вызвано несколько из следующих причин:

### <a name="microsoftinsights-resource-provider-isnt-registered-for-your-subscription"></a>Поставщик ресурсов Microsoft.Insights не зарегистрировано для вашей подписки

Исследование метрик требует *Microsoft.Insights* поставщик ресурсов зарегистрирован в вашей подписке. Во многих случаях он регистрируется автоматически (то есть после настроить правило генерации оповещений, Настройка параметров диагностики для любого ресурса или настроить правила автомасштабирования). Если в поставщике ресурсов Microsoft.Insights не зарегистрирован, необходимо вручную зарегистрировать его, выполнив шаги, описанные в [поставщики и типы ресурсов Azure](../../azure-resource-manager/resource-manager-supported-services.md).

**Решение.** Откройте **подписок**, **поставщиков ресурсов** и убедитесь, что *Microsoft.Insights* регистрируется для вашей подписки.

### <a name="you-dont-have-sufficient-access-rights-to-your-resource"></a>У вас нет достаточных прав доступа к ресурсу

В Azure, доступ к метрикам управляется [управления доступом на основе ролей (RBAC)](../../role-based-access-control/overview.md). Необходимо быть членом [роль monitoring reader](../../role-based-access-control/built-in-roles.md#monitoring-reader), [участник мониторинга](../../role-based-access-control/built-in-roles.md#monitoring-contributor), или [участник](../../role-based-access-control/built-in-roles.md#contributor) для просмотра метрик для любого ресурса.

**Решение.** Убедитесь, что вас недостаточно разрешений для ресурса, из которого вы исследуете метрики.

### <a name="your-resource-didnt-emit-metrics-during-the-selected-time-range"></a>Ресурс не выдают метрики, во время выбранного диапазона времени

Некоторые ресурсы не постоянно выдавать их метрики. Например Azure не будет собирать метрики для остановленных виртуальных машин. Другие ресурсы могут генерировать их метрики, только в том случае, когда происходит определенное условие. Например метрика, показывающий время обработки транзакции требуется по крайней мере одна транзакция. При наличии транзакций в выбранном диапазоне времени, диаграммы, естественным образом будет пустым. Кроме того хотя большинство метрик в Azure собираются каждую минуту, существуют некоторые, собираются менее часто. Ознакомьтесь с документацией метрик для получения дополнительных сведений о метрику, вы пытаетесь просмотреть.

**Решение.** Измените время диаграммы для широкого диапазона. Можно запустить из «За последние 30 дней» с помощью увеличить степень детализации времени (или полагаться на параметр «автоматическое время гранулярности»).

### <a name="you-picked-a-time-range-greater-than-30-days"></a>Можно выбрать диапазон времени, более 30 дней

[Большинство метрик в Azure хранятся в течение 93 дня](data-platform-metrics.md#retention-of-metrics). Тем не менее вы можете только запрашивать не более 30 дней данных на одной диаграмме. Это ограничение не применяется к [метрик на основе журнала](../app/pre-aggregated-metrics-log-metrics.md#log-based-metrics).

**Решение.** Если вы видите пустую диаграмму или на диаграмме отображаются только часть данных метрик, убедитесь, что разница между start - и -даты окончания в средстве выбора времени не превышает 30-дневной интервал.

### <a name="all-metric-values-were-outside-of-the-locked-y-axis-range"></a>Все значения метрик были вне диапазона заблокированные оси y.

По [блокировки границы ось y диаграммы](metrics-charts.md#lock-boundaries-of-chart-y-axis), непреднамеренно внесения отображаемую область диаграммы не показывать линии диаграммы. Например если блокировки оси y в диапазоне от 0% до 50%, а метрики содержит постоянное значение 100%, строки всегда отображается за пределы видимой области работы с диаграммами отображаться пустым.

**Решение.** Убедитесь, что границы ось y диаграммы не блокируются за пределами диапазона значений метрик. Если границы оси y будут заблокированы, может потребоваться временно сбросить их, чтобы убедиться, что метрики, значения не выходят за пределы диапазона диаграммы. Блокировка диапазона оси y не рекомендуется с помощью автоматического детализации для диаграммы с **sum**, **min**, и **max** статистической обработки их значения будет изменен с Гранулярность, изменение размеров окна браузера или поступает разрешение одного экрана на другой. Переключение гранулярности может оставить отображаемую область элемента диаграммы пустой.

### <a name="you-are-looking-at-a-guest-os-metric-but-didnt-enable-azure-diagnostic-extension"></a>Вы видите метрики гостевой ОС, но не включали расширение системы диагностики Azure

Коллекция **гостевой ОС** метрик требуется настройка расширения системы диагностики Azure и включение его с помощью **параметров диагностики** панели для ресурса.

**Решение.** Если включено расширение системы диагностики Azure, но вы не сможете см. в разделе о метриках, выполните действия, описанные в [руководство по устранению неполадок для расширения системы диагностики Azure](diagnostics-extension-troubleshooting.md#metric-data-doesnt-appear-in-the-azure-portal). См. также действия по устранению неполадок для [нельзя выбрать пространство имен гостевой ОС и метрики](metrics-troubleshoot.md#cannot-pick-guest-os-namespace-and-metrics)

## <a name="error-retrieving-data-message-on-dashboard"></a>Сообщение «Ошибка при получении данных» на панели мониторинга

Эта проблема может произойти при создании панели мониторинга с метрикой, которая была более поздней версии и будет удален из Azure. Чтобы убедиться, что это так, откройте **метрики** вкладке ваш ресурс и проверьте доступные метрики в средстве выбора метрик. Если метрика не отображается, метрики был удален из Azure. Обычно когда метрика устарела, он лучше новую метрику, предоставляющий как имеющий информацию о работоспособности ресурсов.

**Решение.** Обновите плитки сбоя определяется выбранной альтернативные метрики для диаграммы на панели мониторинга. Вы можете [просмотрите список доступных метрик для служб Azure](metrics-supported.md).

## <a name="chart-shows-dashed-line"></a>Диаграмма показывает пунктирная линия

Диаграммы метрики Azure позволяет штриховая линия о том, что отсутствующее значение (также называется «значение null») между двумя известных интервал точек данных. Например, если в селекторе времени можно выбрать степень детализации времени «1 минута», но метрики была обнаружена на 07:26, 07:27, 07:29 и 07:30 (Обратите внимание, минутные зазора между точками данных второй и третий), пунктирная линия будет подключаться, 07:27 и 07:29 и будут подключаться сплошная линия все остальные точки данных. Удаляет пунктирная линия, уменьшается до нуля, когда метрика использует **число** и **sum** статистической обработки. Для **avg**, **min** или **max** агрегаты, пунктирная линия подключается два ближайших точек известных данных. Кроме того Если данные в крайней правой или левой части диаграммы, отсутствует штриховую линию при развертывании направление отсутствующие точки данных.
  ![изображение метрики](./media/metrics-troubleshoot/missing-data-point-line-chart.png)

**Решение.** В этом весь замысел. Это полезно для идентификации отсутствующие точки данных. График превосходную подходит для визуализации тренды с высокой плотностью метрик, но может быть сложно для интерпретации для метрик с разреженным значениями, особенно в том случае, если важна corelating значений с помощью интервал времени. Пунктирная линия упрощает чтения этих диаграмм, но если диаграмма по-прежнему неясно, рассмотрите возможность просмотреть метрики с помощью другой тип диаграммы. Разбросанные диаграмму для одной метрики четко показывает каждом интервале времени, только визуализация точки, когда значения и пропуск определенных данных точки вообще когда отсутствует значение: ![изображение метрики](./media/metrics-troubleshoot/missing-data-point-scatter-chart.png)

   > [!NOTE]
   > Если вы все-график для метрик, наведя указатель мыши на диаграмме может помочь оценить степень детализации времени путем выделения точки данных в расположении указателя мыши.

## <a name="chart-shows-unexpected-drop-in-values"></a>Диаграмма показывает Непредвиденная перетаскивания в значениях

Во многих случаях предполагаемых раскрывающегося значений метрик является неправильным пониманием того, данные, показанные на диаграмме. Может быть заблуждение перетаскивания в суммы или подсчитывает при на диаграмме показано последних минут, так как еще не была получена или обрабатываемых Azure еще последней точками данных метрик. В зависимости от службы задержку показатели обработки может быть в пределах диапазона несколько минут. Для диаграммы, показывающие последние диапазон времени с детализацией по 1 или 5 минут, drop значения за последние несколько минут повышается более заметно: ![изображение метрики](./media/metrics-troubleshoot/drop-in-values.png)

**Решение.** В этом весь замысел. Мы считаем, что передача данных по мере поступления целесообразно даже в том случае, когда данные находятся *частичного* или *неполные*. Это позволит внесения важных заключение раньше, и начать анализ прямо сейчас. Например, для метрики, которая показывает количество сбоев, просматривать часть значения X показывает, есть по крайней мере X сбоев на заданный минуты. Можно начать расследование прямо сейчас, вместо ожидания, чтобы увидеть точное число сбоев, произошедших в текущую минуту, который не может быть столь важным. Как только мы получим весь набор данных, но в это время может также отображаться новые точки неполные данные из последних минут, произойдет обновление диаграммы.

## <a name="cannot-pick-guest-os-namespace-and-metrics"></a>Не удается выбрать пространство имен гостевой ОС и метрики

Виртуальные машины и масштабируемые наборы виртуальных машин имеют два типа метрик: **Узел виртуальной машины** собираемых средой Azure размещения, метрик и **гостевой ОС** метрики, собираемые с [агент мониторинга](agents-overview.md) работающие на виртуальных машинах. Установка агента мониторинга, позволяя [расширение системы диагностики Azure](diagnostics-extension-overview.md).

По умолчанию метрики гостевой ОС хранятся в учетной записи хранения Azure, которая выбирается из **параметров диагностики** вкладке ресурса. Если не собираются метрики гостевой ОС или они недоступны обозреватель метрик, вы увидите только **узла виртуальной машины** пространства имен метрик:

![изображение метрики](./media/metrics-troubleshoot/cannot-pick-guest-os-namespace.png)

**Решение.** Если вы не видите **гостевой ОС** пространства имен и метрики в обозревателе метрик:

1. Убедитесь, что [расширение системы диагностики Azure](diagnostics-extension-overview.md) включен и настроен для сбора метрик.
    > [!WARNING]
    > Нельзя использовать [агент Log Analytics](agents-overview.md#log-analytics-agent) (также называется Microsoft Monitoring Agent, то есть «MMA») для отправки **гостевой ОС** в учетной записи хранения.

1. Убедитесь, что учетной записи хранения недостаточно защищен брандмауэром.

1. Используйте [обозревателя службы хранилища Azure](https://azure.microsoft.com/features/storage-explorer/) для проверки, что метрики передаются в учетную запись хранения. Если метрики не собираются, следуйте [руководство по устранению неполадок для расширения системы диагностики Azure](diagnostics-extension-troubleshooting.md#metric-data-doesnt-appear-in-the-azure-portal).

## <a name="next-steps"></a>Дальнейшие действия

* [Дополнительные сведения о начале работы с обозревателе метрик](metrics-getting-started.md)
* [Дополнительные сведения о расширенных функциях обозревателе метрик](metrics-charts.md)
* [Просмотреть список доступных метрик для служб Azure](metrics-supported.md)
* [См. в разделе примеры настроенных диаграмм](metric-chart-samples.md)
