---
title: Создание интерактивных отчетов с помощью Azure Monitor книг | Параметры времени | Документация Майкрософт
description: Упростите создание сложных отчетов с помощью готовых настраиваемых параметризованных книг
services: azure-monitor
author: mrbullwinkle
manager: carmonm
ms.service: azure-monitor
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 10/23/2019
ms.author: mbullwin
ms.openlocfilehash: 906ebcc49eca72744abf5854a1b320407d0384dc
ms.sourcegitcommit: 0b1a4101d575e28af0f0d161852b57d82c9b2a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73165515"
---
# <a name="workbook-time-parameters"></a>Параметры времени книги

Параметры времени позволяют пользователям задавать временные контексты анализа и использовать их почти во всех отчетах. Установка и использование позволяют авторам определить диапазоны времени для отображения в раскрывающемся списке, включая параметр для настраиваемых временных диапазонов. 

## <a name="creating-a-time-parameter"></a>Создание параметра времени
1. Начните с пустой книги в режиме редактирования.
2. Выберите _Добавить параметры_ из ссылок в книге.
3. Нажмите синюю кнопку _Добавить параметр_ .
4. В новой области параметров, которая появляется на экране, введите:
    1. Имя параметра: `TimeRange`
    2. Тип параметра: `Time range picker`
    3. Обязательный: `checked`
    4. Доступные диапазоны времени: последний час, последние 12 часов, последние 24 часа, последние 48 часов, последние 3 дня, последние 7 дней и разрешить выбор настраиваемого диапазона времени.
5. Нажмите кнопку "Сохранить" на панели инструментов, чтобы создать параметр.

    ![Изображение, показывающее создание параметра диапазона времени](./media/workbooks-time/time-settings.png)

Вот как книга будет выглядеть в режиме чтения.

![Изображение, показывающее параметр диапазона времени в режиме чтения](./media/workbooks-time/parameters-time.png)

## <a name="referencing-a-time-parameter"></a>Ссылка на параметр времени
### <a name="via-bindings"></a>С помощью привязок
1. Добавьте в книгу элемент управления запроса и выберите ресурс Application Insights.
2. Большинство элементов управления книги поддерживают средство выбора области _диапазона времени_ . Откройте раскрывающийся список _диапазон времени_ и выберите `{TimeRange}` в группе Параметры интервала времени внизу.
3. При этом параметр диапазона времени привязывается к диапазону времени диаграммы. Область времени примера запроса теперь находится за последние 24 часа.
4. Выполнение запроса для просмотра результатов

    ![Изображение, показывающее параметр временного диапазона, на который ссылаются привязки](./media/workbooks-time/time-binding.png)

### <a name="in-kql"></a>В ККЛ
1. Добавьте в книгу элемент управления запроса и выберите ресурс Application Insights.
2. В поле ККЛ введите фильтр области времени, используя параметр: `| where timestamp {TimeRange}`
3. Это увеличивает время оценки запроса до `| where timestamp > ago(1d)`, которое является значением интервала времени для параметра.
4. Выполнение запроса для просмотра результатов

    ![Изображение, показывающее диапазон времени, указанный в ККЛ](./media/workbooks-time/time-in-code.png)

### <a name="in-text"></a>В тексте 
1. Добавьте в книгу элемент управления "текст".
2. В поле Markdown введите `The chosen time range is {TimeRange:label}`
3. Выбор _выполненного редактирования_
4. В элементе управления "текст" отображается текст: _выбранный диапазон времени — за последние 24 часа_

## <a name="time-parameter-options"></a>Параметры времени
| Параметр | Пояснение | Пример |
| ------------- |:-------------|:-------------|
| `{TimeRange}` | Метка диапазона времени | за последние 24 часа; |
| `{TimeRange:label}` | Метка диапазона времени | за последние 24 часа; |
| `{TimeRange:value}` | Значение диапазона времени | > назад (1d) |
| `{TimeRange:query}` | Запрос диапазона времени | > назад (1d) |
| `{TimeRange:start}` | Время начала диапазона времени | 3/20/2019 4:18 РМ |
| `{TimeRange:end}` | Время окончания диапазона времени | 3/21/2019 4:18 РМ |
| `{TimeRange:grain}` | Детализация диапазона времени | 30 м |


### <a name="using-parameter-options-in-a-query"></a>Использование параметров параметров в запросе
```kusto
requests
| make-series Requests = count() default = 0 on timestamp from {TimeRange:start} to {TimeRange:end} step {TimeRange:grain}
```

## <a name="next-steps"></a>Дальнейшие действия

* [Узнайте](workbooks-visualizations.md) больше о книгах с множеством разнообразных вариантов визуализации.
* [Управление](workbooks-access-control.md) доступом к ресурсам книги и предоставление общего доступа к ним.
