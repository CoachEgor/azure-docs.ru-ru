---
title: Источники данных Azure Monitor книгах | Документация Майкрософт
description: Упростите составление отчетов с помощью предварительно созданных и настраиваемых параметризованных Azure Monitor книг, построенных из нескольких источников данных.
services: azure-monitor
documentationcenter: ''
author: mrbullwinkle
manager: carmonm
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 06/29/2020
ms.author: mbullwin
ms.openlocfilehash: bbd231ca527b4c01509230e839b97187de29febd
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91825743"
---
# <a name="azure-monitor-workbooks-data-sources"></a>Источники данных Azure Monitor книг

Книги совместимы с большим количеством источников данных. В этой статье рассматриваются источники данных, доступные в настоящее время для Azure Monitor книг.

## <a name="logs"></a>Журналы

Книги позволяют выполнять запросы к журналам из следующих источников:

* Журналы Azure Monitor (Application Insights ресурсы и рабочие области Log Analytics.)
* Данные, ориентированные на ресурсы (журналы действий)

Авторы книг могут использовать запросы ККЛ, которые преобразуют базовые данные ресурсов, чтобы выбрать результирующий набор, который может быть визуально представлен как текст, диаграммы или сетки.

![Снимок экрана: интерфейс отчета журналов книг](./media/workbooks-overview/logs.png)

Авторы книг могут легко выполнять запросы к нескольким ресурсам, создавая действительно унифицированный интерфейс для работы с отчетами.

## <a name="metrics"></a>Метрики

Ресурсы Azure выдают [метрики](data-platform-metrics.md) , доступ к которым можно получить с помощью книг. Доступ к метрикам можно получить в книгах с помощью специализированного элемента управления, который позволяет указать целевые ресурсы, требуемые метрики и их статистическую обработку. Затем эти данные можно построить на диаграммах или в сетках.

![Снимок экрана: диаграммы метрик использования ЦП](./media/workbooks-overview/metrics-graph.png)

![Снимок экрана: интерфейс метрик книги](./media/workbooks-overview/metrics.png)

## <a name="azure-resource-graph"></a>Azure Resource Graph

Книги поддерживают запросы к ресурсам и их метаданным с помощью графа ресурсов Azure (ARG). Эта функция в основном используется для создания пользовательских областей запросов для отчетов. Область действия ресурса выражается с помощью ККЛ-subset, поддерживаемого АРГУМЕНТом, который часто достаточно для распространенных вариантов использования.

Чтобы элемент управления "запрос" использовал этот источник данных, используйте раскрывающийся список тип запроса, чтобы выбрать граф ресурсов Azure и выбрать целевые подписки. Используйте элемент управления запроса, чтобы добавить аргумент ККЛ-subset, который выбирает интересное подмножество ресурсов.

![Снимок экрана: запрос ККЛ графа ресурсов Azure](./media/workbooks-overview/azure-resource-graph.png)

## <a name="azure-resource-manager"></a>Azure Resource Manager

Книга поддерживает Azure Resource Manager операции RESTFUL. Это дает возможность запрашивать конечную точку management.azure.com без необходимости предоставлять собственный маркер заголовка авторизации.

Чтобы сделать элемент управления запросом использовать этот источник данных, выберите Azure Resource Manager в раскрывающемся списке Источник данных. Укажите соответствующие параметры, такие как метод HTTP, URL-адрес, заголовки, параметры URL-адреса и/или текст.

> [!NOTE]
> `GET` `POST` `HEAD` В настоящее время поддерживаются только операции, и.

## <a name="azure-data-explorer"></a>Azure Data Explorer

Книги теперь поддерживают запросы из кластеров [Azure обозреватель данных](/azure/data-explorer/) с мощным языком запросов [Kusto](/azure/kusto/query/index) .   

![Снимок экрана окна запроса Kusto](./media/workbooks-overview/data-explorer.png)

## <a name="workload-health"></a>Работоспособность рабочей нагрузки

Azure Monitor обладает функциональными возможностями, которые заблаговременно отслеживают доступность и производительность гостевых операционных систем Windows или Linux. Azure Monitor моделей ключевые компоненты и их связи, критерии для измерения работоспособности этих компонентов, а также сведения о том, какие компоненты предупреждают о неработоспособном состоянии. Книги позволяют пользователям использовать эти сведения для создания многофункциональных интерактивных отчетов.

Чтобы сделать элемент управления запросом использовать этот источник данных, используйте раскрывающийся список **тип запроса** , чтобы выбрать работоспособность рабочей нагрузки и выбрать подписку, группу ресурсов или ресурсы виртуальной машины для целевого объекта. Раскрывающийся список фильтр работоспособности используется для выбора интересного подмножества инцидентов работоспособности для аналитических нужд.

![Снимок экрана: запрос предупреждений](./media/workbooks-overview/workload-health.png)

## <a name="azure-resource-health"></a>Работоспособность ресурсов Azure

Книги поддерживают получение работоспособности ресурсов Azure и объединение их с другими источниками данных для создания многофункциональных интерактивных отчетов о работоспособности.

Чтобы элемент управления "запрос" использовал этот источник данных, используйте раскрывающийся список **тип запроса** , чтобы выбрать работоспособность Azure и выбрать ресурсы для назначения. Раскрывающийся список фильтр работоспособности используется для выбора интересного подмножества проблем с ресурсами для аналитических нужд.

![Снимок экрана: запрос предупреждений](./media/workbooks-overview/resource-health.png)

## <a name="json"></a>JSON

Поставщик JSON позволяет создавать результаты запроса из статического содержимого JSON. Чаще всего он используется в параметрах для создания раскрывающихся параметров статических значений. Простые массивы или объекты JSON будут автоматически преобразованы в строки и столбцы сетки.  Для более подробного поведения можно использовать вкладки результаты и параметры JSONPath для настройки столбцов.

## <a name="alerts-preview"></a>Оповещения (предварительная версия)

> [!NOTE]
> Предлагаемый способ запроса сведений об оповещении Azure — использование источника данных [графа ресурсов Azure](#azure-resource-graph) путем запроса к `AlertsManagementResources` таблице.
>
> Примеры см. в [справочнике по таблицам Graph ресурсов Azure](../../governance/resource-graph/reference/supported-tables-resources.md)или в [шаблоне оповещений](https://github.com/microsoft/Application-Insights-Workbooks/blob/master/Workbooks/Azure%20Resources/Alerts/Alerts.workbook) .
>
> Источник данных предупреждений останется доступным в течение определенного периода времени, пока авторы переходят на использование ARG. Использование этого источника данных в шаблонах не рекомендуется. 

Книги позволяют пользователям визуализировать активные предупреждения, связанные с их ресурсами. Ограничения. источнику данных предупреждений требуется доступ на чтение к подписке для запроса ресурсов и может не показывать новые типы оповещений. 

Чтобы сделать элемент управления запросом использовать этот источник данных, выберите в раскрывающемся списке _источник данных_ пункт _оповещения (Предварительная версия)_ и выберите подписки, группы ресурсов или ресурсы для назначения. С помощью раскрывающихся фильтров предупреждений выберите интересное подмножество предупреждений для аналитических нужд.

## <a name="custom-endpoint"></a>Пользовательская конечная точка

Книги поддерживают получение данных из любого внешнего источника. Если данные находятся за пределами Azure, их можно перенести в книги с помощью этого типа источника данных.

Чтобы сделать элемент управления запросом использовать этот источник данных, выберите _пользовательскую конечную точку_в раскрывающемся списке _источник данных_ . Укажите соответствующие параметры, такие как `Http method` , `url` , `headers` и `url parameters` /или `body` . Убедитесь, что источник данных поддерживает [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) , в противном случае запрос завершится ошибкой.

Чтобы избежать автоматического вызова ненадежных узлов при использовании шаблонов, пользователю необходимо пометить используемые узлы как доверенные. Это можно сделать, нажав кнопку _Добавить как доверенную_ или добавив ее в качестве доверенного узла в параметрах книги. Эти параметры будут сохранены в браузерах, поддерживающих Индексдб с веб-рабочими процессами. Дополнительные сведения см. [здесь](https://caniuse.com/#feat=indexeddb).

> [!NOTE]
> Не записывайте никакие секреты в полях ( `headers` ,, `parameters` `body` , `url` ), так как они будут видны всем пользователям книги.

## <a name="next-steps"></a>Дальнейшие шаги

* [Узнайте](workbooks-visualizations.md) больше о книгах с множеством разнообразных вариантов визуализации.
* [Управление](workbooks-access-control.md) доступом к ресурсам книги и предоставление общего доступа к ним.
* [Советы по оптимизации запросов Log Analytics](../log-query/query-optimization.md)
