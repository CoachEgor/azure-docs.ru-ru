---
title: Платформа Azure Monitor Data Platform | Документация Майкрософт
description: Данные мониторинга, которые собирает Azure Monitor, делятся на метрики и журналы. Метрики занимают малый объем, их можно использовать в сценариях, предусматривающих работу в режиме практически реального времени. Журналы используются для расширенного анализа.
documentationcenter: ''
author: bwren
manager: carmonm
editor: tysonn
ms.service: azure-monitor
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/26/2019
ms.author: bwren
ms.openlocfilehash: 74ede523c9747de4746fe1854bd1e352eba2f7e3
ms.sourcegitcommit: 812bc3c318f513cefc5b767de8754a6da888befc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/12/2020
ms.locfileid: "77148901"
---
# <a name="azure-monitor-data-platform"></a>Платформа данных Azure Monitor

Включение наблюдаемых возможностей в современных сложных вычислительных средах, в которых используются распределенные приложения, использующие облачные и локальные службы, требует сбора рабочих данных с каждого уровня и каждого компонента распределенной системы. Вам нужна возможность глубокого анализа этих данных и консолидации их в единую область стекла с разными перспективами для поддержки множества заинтересованных лиц в Организации.

[Azure Monitor](../overview.md) собирает и объединяет данные из различных источников в общую платформу данных, где их можно использовать для анализа, визуализации и оповещений. Она обеспечивает согласованное взаимодействие с данными из нескольких источников, что дает вам подробную информацию по всем наблюдаемым ресурсам и даже к данным из других служб, которые хранят данные в Azure Monitor.


![Общие сведения о службе Azure Monitor](media/data-platform/overview.png)

## <a name="observability-data-in-azure-monitor"></a>Данные наблюдаемых данных в Azure Monitor
Метрики, журналы и распределенные трассировки обычно называются тремя основополагающими аспектами наблюдаемости. Это различные типы данных, которые средства мониторинга должны собираются и анализируют, чтобы обеспечить достаточную наблюдаемую систему отслеживаемой системы. Наблюдаемость может быть достигнута путем корреляции данных из нескольких основополагающих элементов и статистической обработки данных по всему набору отслеживаемых ресурсов. Поскольку Azure Monitor хранит данные из нескольких источников, их можно сопоставлять и анализировать с помощью общего набора средств. Он также сопоставляет данные в нескольких подписках и клиентах Azure в дополнение к размещению данных для других служб.

Ресурсы Azure создают значительный объем данных мониторинга. Azure Monitor объединяет эти данные вместе с данными мониторинга из других источников в платформу метрик или журналов. Каждый из них оптимизирован для конкретных сценариев мониторинга, и каждый из них поддерживает различные функции Azure Monitor. Такие функции, как анализ данных, визуализации или оповещения, требуют понимания различий, чтобы можно было реализовать необходимый сценарий в наиболее эффективном и экономичном режиме. Аналитические сведения в Azure Monitor, такие как [Application Insights](../app/app-insights-overview.md) или [Azure Monitor для виртуальных машин](../insights/vminsights-overview.md) , имеют средства анализа, позволяющие сосредоточиться на конкретном сценарии мониторинга, не обращаясь к различиям между двумя типами данных. 


### <a name="metrics"></a>Метрики
[Метрики](data-platform-metrics.md) — это числовые значения, описывающие конкретный аспект системы в определенный момент времени. Они собираются через регулярные интервалы и определяются с помощью метки времени, имени, значения и одного или нескольких определяющих меток. Метрики можно объединять с помощью различных алгоритмов, по сравнению с другими метриками, а также анализировать тенденции во времени. 

Метрики в Azure Monitor хранятся в базе данных временных рядов, которая оптимизирована для анализа данных с отметками времени. Это делает метрики особенно оптимальными для предупреждений и быстрого обнаружения проблем. Они могут сообщить вам, как работает система, но обычно необходимо объединить с журналами, чтобы определить основную причину проблем.

Метрики доступны для интерактивного анализа в портал Azure с помощью [Обозреватель метрик Azure](../platform/metrics-getting-started.md). Их можно добавить на [панель мониторинга Azure](../learn/tutorial-app-dashboards.md) для визуализации в сочетании с другими данными и использовать для [оповещений](alerts-metric.md)практически в реальном времени.

Дополнительные сведения о метриках Azure Monitor, включая источники данных в метриках, см. [в Azure Monitor](data-platform-metrics.md).

### <a name="logs"></a>Журналы
[Журналы](data-platform-logs.md) — это события, произошедшие в системе. Они могут содержать различные виды данных, а также могут представлять собой структурированную или свободную форму с меткой времени. Их можно создавать случайным образом, так как события в среде создают записи журнала, а система под интенсивной нагрузкой обычно создает больший объем журнала.

Журналы в Azure Monitor хранятся в Log Analytics рабочей области, основанной на [Обозреватель данных Azure](/azure/data-explorer/) , которая предоставляет мощный модуль анализа и [Расширенный язык запросов](/azure/kusto/query/). Журналы, как правило, предоставляют достаточно сведений для предоставления полного контекста выявленной проблемы и полезны для выявления корневого варианта проблем.

> [!NOTE]
> Важно различать журналы Azure Monitor и источники данных журнала в Azure. Например, события уровня подписки в Azure записываются в [Журнал действий](platform-logs-overview.md) , который можно просмотреть в меню Azure Monitor. Большинство ресурсов записывают операционную информацию в [Журнал ресурсов](platform-logs-overview.md) , который можно пересылать в разные расположения. Журналы Azure Monitor — это платформа данных журналов, которая собирает журналы действий и журналы ресурсов вместе с другими данными мониторинга для обеспечения детального анализа всего набора ресурсов.


 Вы можете работать с [запросами к журналу](../log-query/log-query-overview.md) в интерактивном режиме с помощью [log Analytics](../log-query/portals.md) в портал Azure или добавлять результаты на [панель мониторинга Azure](../learn/tutorial-app-dashboards.md) для визуализации в сочетании с другими данными. Можно также создать [оповещения журнала](alerts-log.md) , которые будут активировать оповещение на основе результатов запроса по расписанию.

Дополнительные сведения о Azure Monitor журналах, включая источники данных в [журналах](data-platform-logs.md), см. в статье Azure Monitor.

### <a name="distributed-traces"></a>Распределенные трассировки
Трассировки — это ряд связанных событий, которые следуют за запросом пользователя через распределенную систему. Они могут использоваться для определения поведения кода приложения и производительности различных транзакций. Хотя журналы часто создаются отдельными компонентами распределенной системы, трассировка измеряет работу и производительность приложения во всем наборе компонентов.

Распределенная трассировка в Azure Monitor включена с помощью [пакета SDK для Application Insights](../app/distributed-tracing.md), а данные трассировки хранятся с другими данными журнала приложений, собранными Application Insights. Это делает его доступным для тех же средств анализа, что и другие данные журнала, включая запросы журналов, панели мониторинга и оповещения.

Дополнительные сведения о распределенной трассировке см. в разделе [что такое Распределенная трассировка](../app/distributed-tracing.md).


## <a name="compare-azure-monitor-metrics-and-logs"></a>Сравнение метрик Azure Monitor и журналов

В следующей таблице сравниваются метрики и журналы в Azure Monitor.

| attribute  | Метрики | Журналы |
|:---|:---|:---|
| Преимущества | Упрощенные и совместимые с практически в реальном времени сценарии, такие как оповещения. Идеально подходит для быстрого обнаружения проблем. | Анализ с помощью расширенного языка запросов. Идеально подходит для углубленного анализа и выявления основной причины. |
| Данные | Только числовые значения | Текстовые или числовые данные |
| Структура | Стандартный набор свойств, включая время выборки, число отслеживаемых ресурсов, числовое значение. Некоторые метрики включают несколько измерений для дальнейшего определения. | Уникальный набор свойств в зависимости от типа журнала. |
| Коллекция | Сбор с регулярными интервалами. | Может собираться регулярно, как события инициируют создаваемую запись. |
| Просмотр на портале Azure | Обозреватель метрик | Log Analytics |
| Источники данных включают | Метрики платформы, собранные из ресурсов Azure.<br>Приложения, отслеживаемые Application Insights.<br>Пользовательский интерфейс, определяемый приложением или API. | Журналы приложений и ресурсов.<br>Решения для мониторинга.<br>Агенты и расширения виртуальных машин.<br>Запросы приложений и исключения.<br>Центр безопасности Azure.<br>API сборщика данных. |

## <a name="collect-monitoring-data"></a>Получение данных мониторинга
Различные [Источники данных для Azure Monitor](data-sources.md) будут записываться в log Analytics рабочую область (журналы) или в Azure Monitor базу данных метрик (метрики) или и то, и другое. Некоторые источники записываются непосредственно в эти хранилища данных, а другие могут записывать данные в другое расположение, например в службу хранилища Azure, и требовать настройки для заполнения журналов или метрик. 

Список различных источников данных, заполняющих каждый тип, см. [в разделе метрики в Azure Monitor](data-platform-metrics.md) и [журналы в Azure Monitor](data-platform-logs.md) .


## <a name="stream-data-to-external-systems"></a>Потоковая передача данных во внешние системы
Помимо анализа данных мониторинга с помощью средств Azure вам может потребоваться перенаправлять их во внешнее средство, например продукт для управления информационной безопасностью и событиями безопасности (SIEM). Такое перенаправление обычно выполняют непосредственно из отслеживаемых ресурсов через [Центры событий Azure](/azure/event-hubs/). Некоторые источники можно настроить для отправки данных непосредственно в концентратор событий, а для получения необходимых данных можно использовать другой процесс, например приложение логики. Дополнительные сведения см. в статье [потоковая передача данных мониторинга Azure в концентратор событий для использования внешним инструментом](stream-monitoring-data-event-hubs.md) .



## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [метриках](data-platform-metrics.md)см. в статье Azure Monitor.
- Дополнительные сведения о [журналах](data-platform-logs.md)см. в статье Azure Monitor.
- Узнайте о [доступных данных мониторинга](data-sources.md) для различных источников в Azure.
