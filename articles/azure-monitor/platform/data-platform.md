---
title: Платформа данных Azure Monitor Документы Майкрософт
description: Данные мониторинга, которые собирает Azure Monitor, делятся на метрики и журналы. Метрики занимают малый объем, их можно использовать в сценариях, предусматривающих работу в режиме практически реального времени. Журналы используются для расширенного анализа.
documentationcenter: ''
author: bwren
manager: carmonm
editor: tysonn
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/26/2019
ms.author: bwren
ms.openlocfilehash: a1b5859341237c1b177ee8deaf636a67f4824948
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77666553"
---
# <a name="azure-monitor-data-platform"></a>Платформа данных Azure Monitor

Обеспечение соблюдения в современных сложных вычислительных средах, работающих в распределенных приложениях, которые опираются как на облачные, так и на предприимчивые службы, требует сбора оперативных данных с каждого уровня и каждого компонента распределенной системы. Вы должны быть в состоянии выполнить глубокое понимание этих данных и объединить его в одно стекло с различными перспективами для поддержки множества заинтересованных сторон в вашей организации.

[Azure Monitor](../overview.md) собирает и агрегирует данные из различных источников в общую платформу данных, где их можно использовать для анализа, визуализации и оповещения. Он обеспечивает последовательную возможность работы поверх данных из нескольких источников, что дает вам глубокие сведения во всех контролируемых ресурсах и даже данные из других служб, которые хранят их данные в Azure Monitor.


![Общие сведения о службе Azure Monitor](media/data-platform/overview.png)

## <a name="observability-data-in-azure-monitor"></a>Данные о наблюдателях в Azure Monitor
Метрики, журналы и распределенные следы обычно называют тремя столпами наблюдаемости. Это различные виды данных, которые инструмент мониторинга должен собирать и анализировать, чтобы обеспечить достаточную наблюдательность контролируемой системы. Наблюдение может быть достигнуто путем сопоставления данных из нескольких столпов и агрегирования данных по всему набору контролируемых ресурсов. Поскольку Azure Monitor хранит данные из нескольких источников вместе, данные можно соотнести и проанализировать с помощью общего набора инструментов. Он также соотносит данные между несколькими подписками azure и арендаторами, в дополнение к хостингу данных для других служб.

Ресурсы Azure генерируют значительный объем данных мониторинга. Azure Monitor консолидирует эти данные вместе с данными мониторинга из других источников в платформу Метрики или Журналы. Каждый из них оптимизирован для определенных сценариев мониторинга, и каждый из них поддерживает различные функции в Azure Monitor. Такие функции, как анализ данных, визуализация или оповещение, требуют, чтобы вы понимали различия, чтобы можно было реализовать необходимый сценарий наиболее эффективным и рентабельным образом. Исследования в Azure Monitor, такие как [Application Insights](../app/app-insights-overview.md) или [Azure Monitor для вс-кодов,](../insights/vminsights-overview.md) имеют инструменты анализа, которые позволяют сосредоточиться на конкретном сценарии мониторинга без понимания различий между двумя типами данных. 


### <a name="metrics"></a>Метрики
[Метрики](data-platform-metrics.md) представляют собой числовые значения, описывающие некоторые аспекты системы в определенный момент времени. Они собираются через регулярные промежутки времени и идентифицируются с меткой времени, именем, значением и одной или более определяющей меткой. Метрики могут быть агрегированы с помощью различных алгоритмов, по сравнению с другими метриками, и проанализированы для тенденций с течением времени. 

Метрики в Azure Monitor хранятся в базе данных временных рядов, которая оптимизирована для анализа данных с отметками времени. Это делает метрики особенно подходящими для оповещения и быстрого обнаружения проблем. Они могут сказать вам, как работает ваша система, но обычно должны быть объединены с журналами, чтобы определить первопричину проблем.

Метели доступны для интерактивного анализа на портале Azure с [Azure Metrics Explorer.](../platform/metrics-getting-started.md) Они могут быть добавлены в [панель мониторинга Azure](../learn/tutorial-app-dashboards.md) для визуализации в сочетании с другими данными и использованы для оповещения в режиме [реального](alerts-metric.md)времени.

Узнайте больше о метриках Azure Monitor, включая источники данных, в [метриках в Azure Monitor](data-platform-metrics.md).

### <a name="logs"></a>Журналы
[Логи](data-platform-logs.md) — это события, произошедшие в системе. Они могут содержать различные виды данных и могут быть структурированы или свободной форме текста с меткой времени. Они могут создаваться спорадически по мере того, как события в среде генерируют записи журналов, и система под большой нагрузкой, как правило, генерирует больше объема журнала.

Логи в Azure Monitor хранятся в рабочей области Log Analytics, основанной на [Azure Data Explorer,](/azure/data-explorer/) который обеспечивает мощный движок анализа и [богатый язык запросов.](/azure/kusto/query/) Логи обычно предоставляют достаточно информации, чтобы обеспечить полный контекст идентифицируемых проблем, и являются ценными для выявления корневых случаев проблем.

> [!NOTE]
> Важно проводить различие между журналами Azure Monitor и источниками данных журналов в Azure. Например, события уровня подписки в Azure записываются в [журнал активности,](platform-logs-overview.md) который можно просмотреть из меню Azure Monitor. Большинство ресурсов будет записывать оперативную информацию в [журнал ресурсов,](platform-logs-overview.md) который можно перенаправить в различные места. Журналы Azure Monitor — это платформа данных журналов, которая собирает журналы активности и журналы ресурсов вместе с другими данными мониторинга, чтобы обеспечить глубокий анализ всего набора ресурсов.


 Вы можете работать с [запросами журналов](../log-query/log-query-overview.md) в интерактивном режиме с [журналом Analytics](../log-query/portals.md) на портале Azure или добавлять результаты в [панель мониторинга Azure](../learn/tutorial-app-dashboards.md) для визуализации в сочетании с другими данными. Можно также создать [оповещения о журнале,](alerts-log.md) которые запускают оповещение на основе результатов запроса расписания.

Узнайте больше о журналах Azure Monitor, включая их источники данных в [журналах в Azure Monitor](data-platform-logs.md).

### <a name="distributed-traces"></a>Распределенные следы
Следы — это ряд связанных событий, которые следуют запросу пользователя через распределенную систему. Они могут быть использованы для определения поведения кода приложения и производительности различных транзакций. В то время как журналы часто создаются отдельными компонентами распределенной системы, трассировка измеряет работу и производительность приложения по всему набору компонентов.

Распределенная трассировка в Azure Monitor включена с помощью [SDK Application Insights,](../app/distributed-tracing.md)а данные о отслеживании хранятся вместе с другими данными журнала приложений, собранными Insights Applications. Это делает его доступным для тех же инструментов анализа, что и другие данные журнала, включая запросы журналов, панели мониторинга и оповещения.

Подробнее о распределенных трассировках на [Что распределено трассировки?](../app/distributed-tracing.md).


## <a name="compare-azure-monitor-metrics-and-logs"></a>Сравните метрики и журналы Azure Monitor

В следующей таблице сравниваются метрики и журналы в Azure Monitor.

| Атрибут  | Метрики | Журналы |
|:---|:---|:---|
| Преимущества | Легкий и способный к сценариям почти в реальном времени, таким как оповещение. Идеально подходит для быстрого обнаружения проблем. | Анализируется с богатым языком запросов. Идеально подходит для глубокого анализа и выявления первопричины. |
| Данные | Только числовые значения | Текстовые или числовые данные |
| Структура | Стандартный набор свойств, включая время выборки, мониторинг ресурсов, числовое значение. Некоторые метрики включают несколько измерений для дальнейшего определения. | Уникальный набор свойств в зависимости от типа журнала. |
| Collection | Собрано через регулярные промежутки времени. | Могут быть собраны спорадически по мере того, как события вызывают запись, которая будет создана. |
| Просмотр на портале Azure | Обозреватель метрик | Log Analytics |
| Источники данных включают | Метрики платформы, собранные из ресурсов Azure.<br>Приложения, контролируемые Application Insights.<br>Пользовательские определяется приложением или API. | Журналы приложений и ресурсов.<br>Решения для мониторинга.<br>Агенты и расширения VM.<br>Запросы приложений и исключения.<br>Центр безопасности Azure.<br>API для сбора данных. |

## <a name="collect-monitoring-data"></a>Сбор данных мониторинга
Различные [источники данных для Azure Monitor](data-sources.md) будут писать либо в рабочее пространство Log Analytics (Logs), либо в базу данных метрик Azure Monitor (Metrics) или и то, и другое. Некоторые источники будут писать непосредственно в эти хранилища данных, в то время как другие могут писать в другое место, такое как хранилище Azure, и требуют определенной конфигурации для заполнения журналов или метрик. 

Смотрите [метрики в Azure Monitor](data-platform-metrics.md) и [журналы в Azure Monitor](data-platform-logs.md) для перечисления различных источников данных, которые населяют каждый тип.


## <a name="stream-data-to-external-systems"></a>Потоковая передача данных во внешние системы
Помимо анализа данных мониторинга с помощью средств Azure вам может потребоваться перенаправлять их во внешнее средство, например продукт для управления информационной безопасностью и событиями безопасности (SIEM). Такое перенаправление обычно выполняют непосредственно из отслеживаемых ресурсов через [Центры событий Azure](/azure/event-hubs/). Некоторые источники могут быть настроены для отправки данных непосредственно в концентратор событий, в то время как вы можете использовать другой процесс, такой как Logic App для получения необходимых данных. Для получения подробной информации [см. данные мониторинга Stream Azure в центре событий для потребления с помощью внешнего инструмента.](stream-monitoring-data-event-hubs.md)



## <a name="next-steps"></a>Дальнейшие действия

- Подробнее о метриках читайте [в материале Azure Monitor](data-platform-metrics.md).
- Подробнее о [журналах читайте в материале Azure Monitor](data-platform-logs.md).
- Узнайте о [доступных данных мониторинга](data-sources.md) для различных источников в Azure.
