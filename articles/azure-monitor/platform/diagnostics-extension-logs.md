---
title: Используйте хранилище каплю для IIS и хранения таблиц для событий в Azure Monitor Документы Майкрософт
description: Azure Monitor может читать журналы служб Azure, которые пишут диагностику для хранения таблиц или журналы IIS, написанные для хранения кабы.
ms.subservice: logs
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 02/14/2020
ms.openlocfilehash: 44368ab90abd189c6a8a0792494828c87142eb20
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77672401"
---
# <a name="collect-data-from-azure-diagnostics-extension-to-azure-monitor-logs"></a>Сбор данных из расширения диагностики Azure в журналы Azure Monitor
Расширение azure diagnostics является [агентом Azure Monitor,](agents-overview.md) который собирает данные мониторинга с гостевой операционной системы ресурсов Azure, включая виртуальные машины. В этой статье описывается, как собирать данные, собранные расширением диагностики, от Azure Storage до журналов мониторинга Azure.

> [!NOTE]
> Агент аналитики журналов в Azure Monitor обычно является предпочтительным методом сбора данных из гостевой операционной системы в журналы Azure Monitor. Для детального сравнения агентов смотрите [обзор агентов Azure Monitor.](agents-overview.md)

## <a name="supported-data-types"></a>Поддерживаемые типы данных
Расширение расширения диагностики Azure хранит данные в учетной записи хранения Azure. Для сбора этих данных журналы Azure Monitor должны находиться в следующих местах:

| Тип журнала | Тип ресурса | Расположение |
| --- | --- | --- |
| Журналы IIS |Виртуальные машины <br> Веб-роли <br> Рабочие роли |wad-iis-logfiles (хранилище BLOB-объектов) |
| Системный журнал |Виртуальные машины |LinuxsyslogVer2v0 (хранилище таблиц) |
| Операционные события Service Fabric |Узлы Service Fabric |WADServiceFabricSystemEventTable |
| События субъектов Service Fabric Reliable Actors |Узлы Service Fabric |WADServiceFabricReliableActorEventTable |
| События надежных служб Service Fabric |Узлы Service Fabric |WADServiceFabricReliableServiceEventTable |
| Журналы событий Windows |Узлы Service Fabric <br> Виртуальные машины <br> Веб-роли <br> Рабочие роли |WADWindowsEventLogsTable (хранилище таблиц) |
| Журналы трассировки событий Windows |Узлы Service Fabric <br> Виртуальные машины <br> Веб-роли <br> Рабочие роли |WADETWEventTable (хранилище таблиц) |

## <a name="data-types-not-supported"></a>Типы данных не поддерживаются

- Данные о производительности от гостевой операционной системы
- Журналы IIS с веб-сайтов Azure


## <a name="enable-azure-diagnostics-extension"></a>Включить расширение диагностики Azure
Смотрите [установить и настроить расширение диагностики Windows Azure (WAD)](diagnostics-extension-windows-install.md) или [использовать linux Diagnostic Extension для мониторинга метрик и журналов](../../virtual-machines/extensions/diagnostics-linux.md) для получения подробной информации об установке и настройке расширения диагностики. Это позволит указать учетную запись хранилища и настроить сбор данных, которые вы хотите перенаправить в журналы мониторинга Azure.


## <a name="collect-logs-from-azure-storage"></a>Сбор журналов из хранилища Azure
Используйте следующую процедуру, чтобы обеспечить сбор данных о расширении диагностики из учетной записи хранения Azure:

1. На портале Azure перейдите в **рабочие области журналов** и выберите рабочее пространство.
1. Нажмите **на журналы учетных записей хранения** в разделе **«Источники данных рабочего пространства»** в меню.
2. Нажмите **Добавить**.
3. Выберите **учетную запись хранения,** содержащую данные для сбора.
4. Выберите **тип данных,** который вы хотите собрать.
5. Значение для Источника автоматически заполняется в зависимости от типа данных.
6. Нажмите кнопку **ОК**, чтобы сохранить настройки.
7. Повторите для дополнительных типов данных.

Примерно через 30 минут вы сможете увидеть данные из учетной записи хранилища в рабочей области Log Analytics. Отобразятся только данные, записанные в хранилище после применения конфигурации. Рабочее пространство не считывает уже существующие данные из учетной записи хранилища.

> [!NOTE]
> Портал не подтверждает, что источник существует в учетной записи хранилища или если новые данные пишутся.



## <a name="next-steps"></a>Дальнейшие действия

* [Сбор журналов и метрик для поддерживаемых служб Azure](collect-azure-metrics-logs.md).
* [Включите решения](../../azure-monitor/insights/solutions.md) , чтобы обеспечить глубокое понимание данных.
* [Воспользуйтесь запросами поиска](../../azure-monitor/log-query/log-query-overview.md) для анализа данных.
