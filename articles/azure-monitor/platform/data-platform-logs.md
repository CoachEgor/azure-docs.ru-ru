---
title: Журналы в Azure Monitor | Документация Майкрософт
description: Описывает журналы в Azure Monitor, которые используются для расширенного анализа данных мониторинга.
documentationcenter: ''
author: bwren
manager: carmonm
editor: tysonn
ms.service: azure-monitor
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/26/2019
ms.author: bwren
ms.openlocfilehash: 33d7f11842d6f22a86816b590cddd91eaf76ed72
ms.sourcegitcommit: f10ae7078e477531af5b61a7fe64ab0e389830e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/05/2019
ms.locfileid: "67607051"
---
# <a name="logs-in-azure-monitor"></a>Журналы в Azure Monitor

> [!NOTE]
> Все данные, собранные Azure Monitor, помещаются в одну из двух основных типов, метрики и журналы. В этой статье описывается журналы. Ссылаться на [метрики в Azure Monitor](data-platform-metrics.md) подробное описание метрик, позволяющая [данные мониторинга собранные Azure Monitor](data-platform.md) сравнение двух.

Журналы в Azure Monitor, особенно полезны для выполнения сложного анализа данных из различных источников. Этой статье описывается, как структурированы в Azure Monitor, что делать с данными, журналы и определяет различных источников данных, которые хранят данные в журналах.

> [!NOTE]
> Важно различать журналов Azure Monitor и источников данных журнала в Azure. Например, события уровня подписки Azure записываются в [журнал действий](activity-logs-overview.md) , которые можно просмотреть в меню Azure Monitor. Большинство ресурсов будет записывать сведения о функционировании для [журнала диагностики](diagnostic-logs-overview.md) , вы можете направлять в разных расположениях. Журналы Azure Monitor — это платформа данных журнала, которая собирает журналы действий и журналов диагностики, а также другие данные наблюдения, чтобы обеспечить глубокий анализ всего набора ресурсов.

## <a name="what-are-azure-monitor-logs"></a>Что такое журналов Azure Monitor

Журналы в Azure Monitor содержат различные виды данных, упорядоченных в записи, в которых разные наборы свойств для каждого типа. Журналы могут содержать числовые значения, как и метрик в Microsoft Azure, но обычно содержат текстовые данные с подробными описаниями. Дополнительно отличаются от данных метрик в том, что они различаются по их структуру и не часто удается собрать с регулярными интервалами. Данные телеметрии, такие как события и трассировки хранятся журналов Azure Monitor, а также данные о производительности, чтобы его можно объединять для анализа.

Тип записи журнала — это событие, которая собирается нерегулярно. События, создаваемые приложением или службой и обычно содержит достаточно сведений, чтобы предоставить полный контекст сами по себе. Например, событие может указывать на то, что определенный ресурс был создан или изменен, новый узел был запущен в ответ на увеличение трафика или в работе приложения была обнаружена ошибка.

 Так как формат данных может различаться, приложения могут создавать пользовательские журналы, используя необходимую структуру. Данные метрик даже могут храниться в журналы, чтобы объединить их с другие данные наблюдения для анализа тенденций и анализа других данных.


## <a name="what-can-you-do-with-azure-monitor-logs"></a>Что можно сделать с помощью журналов Azure Monitor?
В следующей таблице перечислены различные способы, что вы можете использовать журналы в Azure Monitor.


|  |  |
|:---|:---|
| Анализ | Используйте [Log Analytics](../log-query/get-started-portal.md) на портале Azure для записи [журнал запросов](../log-query/log-query-overview.md) и интерактивного анализа данных журнала с помощью мощных средств анализа обозревателя данных.<br>Используйте [консоль аналитики Application Insights](../app/analytics.md) на портале Azure для написания запросов к журналу и интерактивного анализа данных журнала из Application Insights. |
| Визуализация | Результаты запроса к просмотру в виде таблицы или диаграммы, чтобы закрепить [мониторинга Azure](../../azure-portal/azure-portal-dashboards.md).<br>Создание [книги](../app/usage-workbooks.md) для объединения с несколькими наборами данных в виде интерактивного отчета. <br>Экспортировать результаты запроса в [Power BI](powerbi.md), чтобы можно было использовать разные типы визуализации и делиться этими результатами с пользователями за пределами Azure.<br>Экспортировать результаты запроса, чтобы [Grafana](grafana-plugin.md) повысить эффективность его панелей мониторинга и объединить с другими источниками данных.|
| Предупреждение | Настраивать [правила оповещения журнала](alerts-log.md), которые отправляют уведомления или выполняют [автоматические действия](action-groups.md), когда результаты запроса соответствуют определенному результату.<br>Настройка [правила оповещения метрики](alerts-metric-logs.md) на определенных журналов журнала данных, извлекаемых в виде метрик. |
| Получение | Доступ к результатов запроса журнала из командной строки с помощью [Azure CLI](/cli/azure/ext/log-analytics/monitor/log-analytics).<br>Доступ к результатов запроса журнала из командной строки с помощью [командлеты PowerShell](https://docs.microsoft.com/powershell/module/az.operationalinsights).<br>Доступ к результатов запроса журнала из пользовательского приложения с помощью [REST API](https://dev.loganalytics.io/). |
| Экспорт | Создание рабочего процесса для извлечения данных журнала и скопируйте его в внешнее расположение с помощью [Logic Apps](~/articles/logic-apps/index.yml). |


## <a name="how-is-data-in-azure-monitor-logs-structured"></a>Чем служба данных в структурированной журналов Azure Monitor?
Данные, собранные из журналов Azure Monitor хранятся в [рабочей области Log Analytics](../platform/manage-access.md). Вы можете [создать несколько рабочих областей](manage-access.md#determine-the-number-of-workspaces-you-need) в вашей подписке для управления различными наборами данных журнала. Каждая рабочая область содержит несколько таблиц, что каждый хранения данных из определенного источника. Хотя все таблицы используют общее [некоторые общие свойства](log-standard-properties.md), каждый из них имеет уникальный набор свойств, в зависимости от типа данных, он сохраняет. Новую рабочую область будет иметь стандартный набор таблиц, и будут добавлены дополнительные таблицы, различные решения для мониторинга и другие службы, которые записывают в рабочую область.

Данные журнала из Application Insights использует один и тот же механизм Log Analytics в качестве рабочих областей, но данные хранятся отдельно для каждого отслеживаемого приложения. Каждое приложение имеет стандартный набор таблиц для хранения данных, таких как запросы приложений, исключения и просмотры страниц.

Запросы журналов будет использовать данные из рабочей области Log Analytics или Application Insights приложения. Можно использовать [запроса между ресурсами](../log-query/cross-workspace-query.md) для анализа данных приложения вместе с другими данными журнала или для создания запросов, включая несколько рабочих областей или приложений.

![Рабочие области](media/data-platform-logs/workspaces.png)

## <a name="log-queries"></a>Запросы журнала
Данные в журналах Azure Monitor получаются с помощью [запроса журнала](../log-query/log-query-overview.md) записан с [язык запросов Kusto](../log-query/get-started-queries.md), который позволяет быстро получить, консолидации и анализа собранных данных. Используйте [Log Analytics](../log-query/portals.md) в написании и тестировании запросов по журналам на портале Azure. Он позволяет работать с результатами в интерактивном режиме или закреплять их на панель мониторинга, чтобы просматривать их с другими визуализациями.

![Log Analytics](media/data-platform-logs/log-analytics.png)

Откройте [Log Analytics из Application Insights](../app/analytics.md) для анализа данных Application Insights.

![Аналитика Application Insights](media/data-platform-logs/app-insights-analytics.png)

Можно также получить данные журнала с помощью [Log Analytics API](https://dev.loganalytics.io/documentation/overview) и [Application Insights REST API](https://dev.applicationinsights.io/documentation/overview).


## <a name="sources-of-azure-monitor-logs"></a>Источники журналов Azure Monitor
Azure Monitor может собирать данные журнала из различных источников, размещенных как в Azure, так и в локальных ресурсах. В следующих таблицах перечислены разные источники данных доступны из различных ресурсов, которые записывают данные для журналов Azure Monitor. Каждый имеет ссылку на сведения на любую необходимую настройку.

### <a name="azure-tenant-and-subscription"></a>Клиент Azure и подписки

| Data | Описание |
|:---|:---|
| Журналы аудита Azure Active Directory | Настроить с помощью параметров диагностики для каждого каталога. См. в разделе [журналы интеграция Azure AD с помощью журналов Azure Monitor](../../active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics.md).  |
| Журналы действий | Хранится отдельно по умолчанию и может использоваться для практически оповещения в режиме реального времени. Установите журнала действий для записи в рабочей области Log Analytics решение для анализа. См. в разделе [сбор и анализ журналов действий Azure в Log Analytics](activity-log-collect.md). |

### <a name="azure-resources"></a>Ресурсы Azure

| Data | Описание |
|:---|:---|
| Диагностики ресурсов | Настройка параметров диагностики для записи диагностических данных, включая метрики в рабочую область Log Analytics. См. в разделе [Stream журналов диагностики Azure в Log Analytics](diagnostic-logs-stream-log-store.md). |
| Решения для мониторинга | Решения для мониторинга записывать данные, которые они собирают в свое рабочее пространство Log Analytics. См. в разделе [сведения о сборе данных для решения по управлению в Azure](../insights/solutions-inventory.md) список решений. См. в разделе [решения в Azure Monitor для мониторинга](../insights/solutions.md) Дополнительные сведения об установке и использовании решения. |
| metrics | Отправка метрики платформы для ресурсов Azure Monitor в рабочую область Log Analytics для хранения данных журнала на более продолжительные отрезки и выполнения сложного анализа с другими типами данных с помощью [язык запросов Kusto](/azure/kusto/query/). См. в разделе [Stream журналов диагностики Azure в Log Analytics](diagnostic-logs-stream-log-store.md). |
| Хранилище таблиц Azure | Сбор данных из службы хранилища Azure, где некоторые ресурсы Azure записывать данные мониторинга. См. в разделе [используйте хранилище BLOB-объектов для IIS и хранилища таблиц Azure для событий с помощью Log Analytics](azure-storage-iis-table.md). |

### <a name="virtual-machines"></a>Виртуальные машины

| Data | Описание |
|:---|:---|
|  Источники данных в агенте | Источники данных собираются из [Windows](agent-windows.md) и [Linux](../learn/quick-collect-linux-computer.md) агенты относятся события, данные о производительности и пользовательские журналы. См. в разделе [агента источников данных в Azure Monitor](data-sources.md) список источников данных, а также сведения о конфигурации. |
| Решения для мониторинга | Решения для мониторинга записи данных, которые они собирают из агентов в свое рабочее пространство Log Analytics. См. в разделе [сведения о сборе данных для решения по управлению в Azure](../insights/solutions-inventory.md) список решений. См. в разделе [решения в Azure Monitor для мониторинга](../insights/solutions.md) Дополнительные сведения об установке и использовании решения. |
| System Center Operations Manager | Подключите группу управления Operations Manager к Azure Monitor для сбора данных о событиях и производительности от локальных агентов в журналы. См. в разделе [подключение Operations Manager к Log Analytics](om-agents.md) сведения об этой конфигурации. |


### <a name="applications"></a>ПРИЛОЖЕНИЯ

| Data | Описание |
|:---|:---|
| Запросы и исключения | Подробные сведения о приложении запросов и исключений, в _запросы_, _pageViews_, и _исключения_ таблиц. Вызовы [внешние компоненты](../app/asp-net-dependencies.md) в _зависимости_ таблицы. |
| Использование и производительность | Производительность приложения доступен в _запросы_, _browserTimings_ и _performanceCounters_ таблиц. Данные для [пользовательские метрики](../app/api-custom-events-metrics.md#trackevent) в _customMetrics_ таблицы.|
| Данные трассировки | Полученный в результате [распределенная трассировка](../app/distributed-tracing.md) хранятся в _трассировок_ таблицы. |
| Тесты доступности | Сводные данные из [тесты доступности](../app/monitor-web-app-availability.md) хранится в _availabilityResults_ таблицы. Подробные данные из этих тестов в отдельное хранилище и получить доступ из Application Insights на портале Azure. |

### <a name="insights"></a>Аналитика

| Data | Описание |
|:---|:---|
| Azure Monitor для контейнеров | Собранные данные инвентаризации и производительности [Azure Monitor для контейнеров](../insights/container-insights-overview.md). См. в разделе [сведения о сбора данных контейнеров](../insights/container-insights-log-search.md#container-records) список таблиц. |
| Azure Monitor для виртуальных машин | Данные карты и производительности, собранные [Azure Monitor для виртуальных машин](../insights/vminsights-overview.md). См. в разделе [как запроса журналов из Azure Monitor для виртуальных машин](../insights/vminsights-log-search.md) подробные сведения о запросах эти данные. |

### <a name="custom"></a>Пользовательская 

| Data | Описание |
|:---|:---|
| REST API | Запись данных в рабочую область Log Analytics из любого клиента REST. См. в разделе [отправки данных журнала в Azure Monitor с помощью API сборщика данных HTTP](data-collector-api.md) подробные сведения.
| приложение логики; | Записать данные в рабочую область Log Analytics из рабочего процесса приложения логики с **сборщик данных Azure Log Analytics** действие. |

### <a name="security"></a>Безопасность

| Data | Описание |
|:---|:---|
| Центр безопасности Azure | [Центр безопасности Azure](/azure/security-center/) хранит данные, собранные в рабочей области Log Analytics, где их можно проанализировать с другими данными журнала. См. в разделе [сбора данных в центре безопасности Azure](../../security-center/security-center-enable-data-collection.md) Дополнительные сведения о конфигурации рабочей области. |
| Azure Sentinel | [Azure Sentinel](/azure/sentinel/) сохраняет данные из источников данных в рабочую область Log Analytics. См. в разделе [подключить источники данных](/azure/sentinel/connect-data-sources).  |


## <a name="next-steps"></a>Следующие шаги

- Дополнительные сведения о [платформы данных Azure Monitor](data-platform.md).
- Дополнительные сведения о [метрики в Azure Monitor](data-platform-metrics.md).
- Узнайте о [доступных данных мониторинга](data-sources.md) для различных источников в Azure.
