---
title: Логи в Azure Monitor Документы Майкрософт
description: Описывает журналы в Azure Monitor, которые используются для углубленного анализа данных мониторинга.
documentationcenter: ''
author: bwren
manager: carmonm
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/26/2019
ms.author: bwren
ms.openlocfilehash: 0b288bf6d987b9db682c8d1439879cf6b499f213
ms.sourcegitcommit: b55d7c87dc645d8e5eb1e8f05f5afa38d7574846
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81457337"
---
# <a name="logs-in-azure-monitor"></a>Журналы в Azure Monitor

> [!NOTE]
> Все данные, собранные Azure Monitor, вписываются в один из двух основных типов: metrics и Logs. В этой статье описаны журналы. Для сравнения этих данных в Azure Monitor в Azure Monitor можно усмотреть [метрики](data-platform-metrics.md) и [данные мониторинга, собранные Azure Monitor.](data-platform.md)

Логи в Azure Monitor особенно полезны для выполнения сложного анализа данных из различных источников. В этой статье описывается, как регистры структурированы в Azure Monitor, что можно сделать с данными, и определяются различные источники данных, которые хранят данные в журналах.

> [!NOTE]
> Важно проводить различие между журналами Azure Monitor и источниками данных журналов в Azure. Например, события уровня подписки в Azure записываются в [журнал активности,](platform-logs-overview.md) который можно просмотреть из меню Azure Monitor. Большинство ресурсов будет записывать оперативную информацию в [журнал ресурсов,](platform-logs-overview.md) который можно перенаправить в различные места. Журналы Azure Monitor — это платформа данных журналов, которая собирает журналы активности и журналы ресурсов вместе с другими данными мониторинга, чтобы обеспечить глубокий анализ всего набора ресурсов.

## <a name="what-are-azure-monitor-logs"></a>Что такое журналы мониторинга Azure?

Логи в Azure Monitor содержат различные типы данных, организованных в записи с различными наборами свойств для каждого типа. Логи могут содержать числовые значения, такие как Azure Monitor Metrics, но обычно содержат текстовые данные с подробным описанием. Они также отличаются от метрических данных тем, что они различаются по своей структуре и часто не собираются через регулярные промежутки времени. Телеметрия, такие как события и следы, хранится журналами Azure Monitor в дополнение к данным о производительности, чтобы все это можно было объединить для анализа.

Распространенным типом входа в журнал является событие, которое собирается спорадически. События создаются приложением или службой и обычно включают достаточно информации, чтобы обеспечить полный контекст самостоятельно. Например, событие может указывать на то, что определенный ресурс был создан или изменен, новый узел был запущен в ответ на увеличение трафика или в работе приложения была обнаружена ошибка.

 Так как формат данных может различаться, приложения могут создавать пользовательские журналы, используя необходимую структуру. Метрические данные могут даже храниться в журналах, чтобы объединить их с другими данными мониторинга для тренда и другого анализа данных.


## <a name="what-can-you-do-with-azure-monitor-logs"></a>Что можно сделать с журналами Azure Monitor?
В следующей таблице перечислены различные способы использования журналов в Azure Monitor.


|  |  |
|:---|:---|
| Анализ | Используйте [журнал Analytics](../log-query/get-started-portal.md) на портале Azure для записи [запросов журналов](../log-query/log-query-overview.md) и интерактивного анализа данных журналов с помощью мощного движка анализа Data Explorer.<br>Используйте [консоль Analytics Application Insights](../app/analytics.md) на портале Azure для записи запросов журналов и интерактивного анализа данных журналов из Application Insights. |
| Визуализация | Результаты запроса, отображаемые в виде таблиц или диаграмм на [панели мониторинга Azure.](../../azure-portal/azure-portal-dashboards.md)<br>Создайте [рабочую книгу](../app/usage-workbooks.md) для объединения с несколькими наборами данных в интерактивном отчете. <br>Экспортировать результаты запроса в [Power BI](powerbi.md), чтобы можно было использовать разные типы визуализации и делиться этими результатами с пользователями за пределами Azure.<br>Экспортируйте результаты запроса [в Grafana,](grafana-plugin.md) чтобы использовать его dashboarding и объединить с другими источниками данных.|
| Предупреждение | Настраивать [правила оповещения журнала](alerts-log.md), которые отправляют уведомления или выполняют [автоматические действия](action-groups.md), когда результаты запроса соответствуют определенному результату.<br>Наверскакните [правило предупреждения метрики](alerts-metric-logs.md) на определенные журналы данных, извлеченные в виде метрик. |
| Получение | Запрос входа в журнал доступа приводит к командной строке с помощью [Azure CLI.](/cli/azure/ext/log-analytics/monitor/log-analytics)<br>Запрос журнала доступа приводит к командной строке с помощью [cmdlets PowerShell.](https://docs.microsoft.com/powershell/module/az.operationalinsights)<br>Запрос журнала доступа приводит к использованию пользовательского приложения с помощью [REST API.](https://dev.loganalytics.io/) |
| Экспорт | Создайте рабочий процесс для извлечения данных журнала и скопируйте их во внешнее место с помощью [logic Apps.](~/articles/logic-apps/index.yml) |


## <a name="how-is-data-in-azure-monitor-logs-structured"></a>Как структурированы данные в журналах Azure Monitor?
Данные, собранные журналами Azure Monitor, хранятся в [рабочей области log Analytics.](../platform/design-logs-deployment.md) Каждое рабочее пространство содержит несколько таблиц, в которых каждый хранит данные из определенного источника. Хотя все таблицы имеют [некоторые общие свойства,](log-standard-properties.md)каждая из них имеет уникальный набор свойств в зависимости от типа данных, которые он хранит. Новое рабочее пространство будет иметь стандартный набор таблиц, и больше таблиц будет добавлено различными решениями мониторинга и другими службами, которые пишут сят в рабочее пространство.

Данные журнала из Application Insights используют тот же движок Log Analytics, что и рабочие области, но они хранятся отдельно для каждого контролируемого приложения. Каждое приложение имеет стандартный набор таблиц для хранения данных, таких как запросы приложений, исключения и представления страниц.

Запросы журнала будут использовать данные из рабочего пространства Log Analytics или приложения Application Insights. Вы можете использовать [запрос кросс-ресурсов](../log-query/cross-workspace-query.md) для анализа данных приложения вместе с другими данными журнала или для создания запросов, включая несколько рабочих пространств или приложений.

![Рабочие области](media/data-platform-logs/workspaces.png)

## <a name="log-queries"></a>Запросы журнала
Данные в журналах Azure Monitor извлекаются с помощью [запроса журнала,](../log-query/log-query-overview.md) написанного [на языке запроса Kusto,](../log-query/get-started-queries.md)который позволяет быстро извлекать, консолидировать и анализировать собранные данные. Используйте [журнал Analytics](../log-query/portals.md) для записи и тестирования запросов журналов на портале Azure. Это позволяет работать с результатами интерактивно или прикрепить их к панели мониторинга, чтобы просмотреть их с другими визуализациями.

![Log Analytics](media/data-platform-logs/log-analytics.png)

Открытая [аналитика журнала от Исследования приложений](../app/analytics.md) для анализа данных Application Insights.

![Аналитика Application Insights](media/data-platform-logs/app-insights-analytics.png)

Вы также можете получить данные журнала с помощью [API Log Analytics](https://dev.loganalytics.io/documentation/overview) и [API Application Insights REST.](https://dev.applicationinsights.io/documentation/overview)


## <a name="sources-of-azure-monitor-logs"></a>Источники журналов Azure Monitor
Azure Monitor может собирать данные журнала из различных источников, размещенных как в Azure, так и в локальных ресурсах. В следующих таблицах перечисляется различные источники данных, доступные из различных ресурсов, записываемых в журналы Azure Monitor. Каждый из них имеет ссылку на подробную информацию о любой требуемой конфигурации.

### <a name="azure-tenant-and-subscription"></a>Арендатор azure и подписка

| Данные | Описание |
|:---|:---|
| Журналы аудита активных каталогов Azure | Настроенс с помощью диагностических настроек для каждого каталога. Смотрите [журналы Integrate Azure AD с журналами Azure Monitor.](../../active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics.md)  |
| Журналы действий | Хранится отдельно по умолчанию и может использоваться для оповещений в режиме реального времени. Установите решение analytics журналов активности для записи в рабочее пространство Log Analytics. Смотрите [журналы активности Azure и анализируйте их в журнале log Analytics.](activity-log-collect.md) |

### <a name="azure-resources"></a>Ресурсы Azure

| Данные | Описание |
|:---|:---|
| Диагностика ресурсов | Настройка диагностических настроек для записи диагностических данных, включая метрики в рабочее пространство Log Analytics. Смотрите [журналы ресурсов Stream Azure в журнале Log Analytics.](resource-logs-collect-workspace.md) |
| Решения для мониторинга | Решения мониторинга пишут данные, которые они собирают в рабочее пространство Log Analytics. Ознакомиться [с деталями сбора данных можно найти в Azure](../insights/solutions-inventory.md) для получения списка решений. Подробную информацию об установке и использовании решений можно найти [в Azure Monitor.](../insights/solutions.md) |
| Метрики | Отправка метрик платформы для ресурсов Azure Monitor в рабочее пространство Log Analytics для сохранения данных журнала в течение более длительных периодов времени и выполнения сложного анализа с другими типами данных с использованием [языка запроса Kusto.](/azure/kusto/query/) Смотрите [журналы ресурсов Stream Azure в журнале Log Analytics.](resource-logs-collect-storage.md) |
| Хранилище таблиц Azure | Сбор данных из хранилища Azure, где некоторые ресурсы Azure пишут данные мониторинга. Просм. [используйте хранилище Azure blob для хранения таблиц IIS и Azure для событий с помощью Log Analytics.](diagnostics-extension-logs.md) |

### <a name="virtual-machines"></a>Виртуальные машины

| Данные | Описание |
|:---|:---|
|  Источники данных в агенте | Источники данных, собранные агентами [Windows](agent-windows.md) и [Linux,](../learn/quick-collect-linux-computer.md) включают события, данные о производительности и пользовательские журналы. Ознакомиться [с источниками данных агента в Azure Monitor](data-sources.md) можно узнать о настройках. |
| Решения для мониторинга | Решения мониторинга пишут данные, которые они собирают от агентов к их рабочей области Log Analytics. Ознакомиться [с деталями сбора данных можно найти в Azure](../insights/solutions-inventory.md) для получения списка решений. Подробную информацию об установке и использовании решений можно найти [в Azure Monitor.](../insights/solutions.md) |
| System Center Operations Manager | Подключите группу управления операциями к Azure Monitor для сбора данных о событиях и производительности от агентов в журналы. Подробную информацию об этой конфигурации можно узнать о настройках менеджера [операций Connect Manager to Log Analytics.](om-agents.md) |


### <a name="applications"></a>Приложения

| Данные | Описание |
|:---|:---|
| Запросы и исключения | Подробные данные о запросах приложений и исключениях находятся в таблицах _запросов,_ _просмотров страниц_и _исключений._ Вызовы [к внешним компонентам](../app/asp-net-dependencies.md) находятся в таблице _зависимостей._ |
| Использование и производительность | Производительность приложения доступна в _таблицах запросов,_ _браузеров_ и _таблиц ахотев._ Данные для [пользовательских метрик](../app/api-custom-events-metrics.md#trackevent) в таблице _customMetrics._|
| Данные трассировки | Результаты [распределенного отслеживания](../app/distributed-tracing.md) хранятся в таблице _следов._ |
| Тесты доступности | Сводные данные [из тестов доступности](../app/monitor-web-app-availability.md) хранятся в таблице _availabilityResults._ Подробные данные этих тестов находятся в отдельном хранилище и доступны из application Insights на портале Azure. |

### <a name="insights"></a>Аналитика

| Данные | Описание |
|:---|:---|
| Azure Monitor для контейнеров | Данные о запасах и производительности, собранные [Azure Monitor для контейнеров.](../insights/container-insights-overview.md) Ознакомиться со списком таблиц можно посмотреть сведения о [сборе данных контейнеров.](../insights/container-insights-log-search.md#container-records) |
| Azure Monitor для виртуальных машин | Карта и данные о производительности, собранные [Azure Monitor для vMs.](../insights/vminsights-overview.md) Узнайте, [как запросить журналы azure Monitor для вс-мат-иносов](../insights/vminsights-log-search.md) для получения подробной информации о запросе этих данных. |

### <a name="custom"></a>Другой 

| Данные | Описание |
|:---|:---|
| REST API | Запись данных в рабочее пространство Log Analytics от любого клиента REST. Для получения подробной информации смотрите [данные журнала на Azure Monitor с помощью API-извне данных HTTP Data Collector.](data-collector-api.md)
| приложение логики; | Напишите любые данные в рабочее пространство log Analytics из рабочего процесса Logic App с помощью действия **«Коллектор данных analytics журнала Azure».** |

### <a name="security"></a>Безопасность

| Данные | Описание |
|:---|:---|
| Центр безопасности Azure | [Центр безопасности Azure](/azure/security-center/) хранит данные, которые он собирает в рабочей области Log Analytics, где их можно анализировать с помощью других данных журнала. Подробную информацию о конфигурации рабочего пространства можно узнать [в Центре безопасности Azure.](../../security-center/security-center-enable-data-collection.md) |
| Azure Sentinel | [Azure Sentinel](/azure/sentinel/) хранит данные из источников данных в рабочее пространство Log Analytics. Смотрите [Источники данных Connect](/azure/sentinel/connect-data-sources).  |


## <a name="next-steps"></a>Следующие шаги

- Узнайте больше о [платформе данных Azure Monitor.](data-platform.md)
- Узнайте о [метриках в Azure Monitor](data-platform-metrics.md).
- Узнайте о [доступных данных мониторинга](data-sources.md) для различных источников в Azure.
