---
title: Параметры текстовых книг Azure Monitor Monitor
description: Упростить комплексную отчетность с помощью заранее построенных и пользовательских параметризированных трудовых книжек. Узнайте больше о параметрах текста трудовой книжки.
services: azure-monitor
author: mrbullwinkle
manager: carmonm
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 10/23/2019
ms.author: mbullwin
ms.openlocfilehash: c5fb585d0eb6aeb7866c2ab04b324ee31fe903ca
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77658055"
---
# <a name="workbook-text-parameters"></a>Параметры текста в трудовой книжке

Параметры Textbox обеспечивают простой способ сбора ввода текста от пользователей трудовых книжки. Они используются, когда нецелесообразно использовать выпадение вниз для сбора входных данных (например, произвольный порог или общие фильтры). Трудовые книжки позволяют авторам получить значение текстового сообщения по умолчанию из запроса. Это позволяет создавать такие интересные сценарии, как установление порога по умолчанию на основе p95 метрики.

Общее использование текстовых ящиков в качестве внутренних переменных, используемых другими элементами управления трудовой книжкой. Это делается путем использования запроса для значений по умолчанию и создания элемента ввода невидимым в режиме чтения. Например, пользователь может захотеть, чтобы порог пришел из формулы (не пользователя), а затем использовать порог в последующих запросах.

## <a name="creating-a-text-parameter"></a>Создание параметра текста
1. Начните с пустой трудовой книжки в режиме рерит.
2. Выберите _Параметры добавления_ из ссылок в трудовой книжке.
3. Нажмите на синюю кнопку _Добавить параметр._
4. В новом параметре панели, которая всплывает ввести:
    1. Название параметра:`SlowRequestThreshold`
    2. Тип параметра:`Text`
    3. Обязательно:`checked`
    4. Получите значение по умолчанию из запроса:`unchecked`
5. Выберите "Сохранить" из панели инструментов для создания параметра.

    ![Изображение, показывающее создание параметра текста](./media/workbooks-text/text-create.png)

Так будет выглядеть трудовая книжка в режиме чтения.

![Изображение, показывающее параметр текста в режиме чтения](./media/workbooks-text/text-readmode.png)

## <a name="referencing-a-text-parameter"></a>Ссылка на параметр текста
1. Добавьте элемент управления запросами в трудовую книгу, выбрав синюю `Add query` ссылку и выбрав ресурс Application Insights.
2. В поле КЗЛ добавьте этот фрагмент:
    ```kusto
    requests
    | summarize AllRequests = count(), SlowRequests = countif(duration >= {SlowRequestThreshold}) by name
    | extend SlowRequestPercent = 100.0 * SlowRequests / AllRequests
    | order by SlowRequests desc
    ```
3. Используя параметр текста со значением 500 в сочетании с управлением запросом, вы эффективно работаете над запросом ниже:
    ```kusto
    requests
    | summarize AllRequests = count(), SlowRequests = countif(duration >= 500) by name
    | extend SlowRequestPercent = 100.0 * SlowRequests / AllRequests
    | order by SlowRequests desc
    ```
4. Выполнить запрос, чтобы увидеть результаты

    ![Изображение, показывающее параметр текста, на который ссылаются в КЗЛ](./media/workbooks-text/text-reference.png)


## <a name="setting-default-values"></a>Настройка значений по умолчанию
1. Начните с пустой трудовой книжки в режиме рерит.
2. Выберите _Параметры добавления_ из ссылок в трудовой книжке.
3. Нажмите на синюю кнопку _Добавить параметр._
4. В новом параметре панели, которая всплывает ввести:
    1. Название параметра:`SlowRequestThreshold`
    2. Тип параметра:`Text`
    3. Обязательно:`checked`
    4. Получите значение по умолчанию из запроса:`checked`
5. В поле КЗЛ добавьте этот фрагмент:
    ```kusto
    requests
    | summarize round(percentile(duration, 95), 2)
    ```
    Этот запрос устанавливает значение текстового поля по умолчанию до 95-й процентильной продолжительности для всех запросов в приложении.
6. Выполнить запрос, чтобы увидеть результат
7. Выберите "Сохранить" из панели инструментов для создания параметра.

    ![Изображение, отображающее параметр текста со значением по умолчанию из КЗЛ](./media/workbooks-text/text-default-value.png)

> [!NOTE]
> Хотя этот пример запрашивает данные Application Insights, этот подход может быть использован для любого источника данных, основанного на журнале, - Log Analytics, Azure Resource Graph и т.д.

## <a name="next-steps"></a>Дальнейшие действия

* [Начать](workbooks-visualizations.md) узнавать больше о рабочих книгах много богатых вариантов визуализации.
* [Контролируйте](workbooks-access-control.md) и делитесь доступом к ресурсам вашей трудовой книжки.
