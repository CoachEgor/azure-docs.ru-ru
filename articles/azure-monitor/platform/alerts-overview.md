---
title: Обзор мониторинга оповещений и уведомлений в Azure
description: Обзор оповещений в Azure. Оповещения, классические оповещения и интерфейс оповещений.
ms.subservice: alerts
ms.topic: conceptual
ms.date: 01/28/2018
ms.openlocfilehash: e02c23623062f5cb3e4c597b0bb257b30aa9f44a
ms.sourcegitcommit: d57d2be09e67d7afed4b7565f9e3effdcc4a55bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2020
ms.locfileid: "81769768"
---
# <a name="overview-of-alerts-in-microsoft-azure"></a>Обзор оповещений в Microsoft Azure 

В этой статье объясняется, что такое оповещения, каковы их преимущества и как начать их использовать.  

## <a name="what-are-alerts-in-microsoft-azure"></a>Что такое оповещения в Microsoft Azure?
С помощью оповещений можно заранее получать уведомления о важных условиях, обнаруженных в ваших данных мониторинга. Они позволяют выявить и устранить проблемы, прежде чем пользователи системы обнаружат их. 

В этой статье обсуждается унифицированный опыт оповещения в Azure Monitor, который включает оповещения, которые ранее управлялись журналом Analytics и Application Insights. [Предыдущий интерфейс оповещений](alerts-classic.overview.md) и типы оповещений называются *классическими оповещениями*. Вы можете просмотреть этот старый опыт и старый тип оповещения, выбрав **классические оповещения View** в верхней части страницы оповещения. 

## <a name="overview"></a>Обзор

Поток оповещений приведен на схеме ниже. 

![Диаграмма потока оповещения](media/alerts-overview/Azure-Monitor-Alerts.svg)

Правила оповещения отделяются от предупреждений и действий, принимаемых при возгорании оповещения. Правило оповещения фиксирует цель и критерии оповещения. Правило генерации оповещений можно включить или отключить. Оповещения срабатывают только при включенном состоянии. 

Ниже приведены ключевые атрибуты правила оповещения:

**Целевой ресурс**: Определяет область и сигналы, доступные для оповещения. Целью может быть любой ресурс Azure. Примеры целевых ресурсов: виртуальная машина, учетная запись хранения, масштабируемый набор виртуальных машин, рабочая область Log Analytics или ресурс Application Insights. Для определенных ресурсов (например, виртуальных машин) можно указать несколько ресурсов в качестве цели правила оповещения.

**Сигнал**: Излучаемый целевым ресурсом. Сигналы могут быть следующих типов: метрика, журнал активности, исследования приложений и журнал.

**Критерии**: Сочетание сигнала и логики, применяемых на целевом ресурсе. Примеры: 

- Загрузка ЦП > 70 %
- Время ответа сервера > 4 мс 
- Число результатов запроса журнала > 100

**Имя оповещения**: Определенное имя для правила оповещения, настроенное пользователем.

**Описание оповещения**: Описание правила оповещения, настроенное пользователем.

**Тяжесть**: Тяжесть предупреждения после выполнения критериев, указанных в правиле оповещения. Уровень серьезности может иметь значение от 0 до 4.

- Сев 0 - Критический
- Сев 1 - Ошибка
- Сев 2 - Предупреждение
- Сев 3 - Информационный
- Сев 4 - Вербозе 

**Действие**: Конкретные действия, предпринятые при увольнении оповещения. Для получения дополнительной информации [см.](../../azure-monitor/platform/action-groups.md)

## <a name="what-you-can-alert-on"></a>Возможные оповещения

Вы можете предупредить о метриках и журналах, как описано в [источниках мониторинга данных.](../../azure-monitor/platform/data-sources.md) Помимо прочего, к ним относятся:

- Значения метрик
- Запросы поиска по журналам
- События в журнале действий
- Работоспособность базовой платформы Azure
- Тесты на доступность веб-сайта

Ранее для метрик Azure Monitor, Application Insights, Log Analytics и Работоспособности служб были предусмотрены отдельные возможности оповещений. Со временем пользовательский интерфейс и различные методы оповещений были улучшены и объединены в Azure. Эта консолидация все еще выполняется. Поэтому в новой системе оповещений все еще не присутствуют некоторые возможности оповещений.  

| **Источник монитора** | **Тип сигнала**  | **Описание** |
|-------------|----------------|-------------|
| Работоспособность службы | Журнал действий  | Не поддерживается. Ознакомьтесь с разделом [Создание оповещений журнала действий для уведомлений службы](../../azure-monitor/platform/alerts-activity-log-service-notifications.md).  |
| Application Insights | Веб-тесты доступности | Не поддерживается. Ознакомьтесь с разделом [Наблюдение за доступностью и скоростью реагирования веб-сайта](../../azure-monitor/app/monitor-web-app-availability.md). Доступны для любого веб-сайта, инструментированного для отправки данных в Application Insights. Получение уведомления, когда доступность или скорость реагирования веб-сайта опускается ниже ожидаемого значения. |

## <a name="manage-alerts"></a>Управление оповещениями
Чтобы указать, где в процессе разрешения находится оповещение, можно задать его состояние. При соблюдении критериев, указанных в правиле оповещения, создается или выполняется оповещение, и оно имеет статус *Нового*. Его можно изменить после того, как оповещение будет подтверждено или закрыто. Любые изменения состояния оповещения сохраняются в его журнале.

Поддерживаются следующие состояния оповещения.

| Состояние | Описание |
|:---|:---|
| Оператор new | Проблема только что была обнаружена и еще не рассмотрена. |
| Подтверждено | Администратор рассмотрел оповещение и начал над ним работать. |
| Закрытые | Проблема была устранена. После закрытия оповещения можно изменить его состояние и вновь открыть. |

*Состояние оповещения* отличается и не зависит от *состояния монитора*. Пользователь задает состояние оповещения. Система задает состояние монитора. Когда срабатывает оповещение, состояние монитора оповещения устанавливается как *Активировано*. Когда базовое условие, которое вызвало оповещение, активизирует очистку, условие мониторинга устанавливается на *Разрешено*. Состояние оповещения изменяется только пользователем. Узнайте, [как изменить состояние оповещений и смарт-групп](https://aka.ms/managing-alert-smart-group-states).

## <a name="smart-groups"></a>Смарт-группы 

Интеллектуальные группы представляют собой агрегирование оповещений на основе алгоритмов машинного обучения, которые могут помочь уменьшить шум оповещения и помощь в устранении неполадок. [Дополнительные сведения о смарт-группах](https://aka.ms/smart-groups) и [управление смарт-группами](https://aka.ms/managing-smart-groups).


## <a name="alerts-experience"></a>Интерфейс оповещений 
Страница оповещения по умолчанию содержит сводку оповещений, которые создаются в определенном временном диапазоне. Он отображает общее количество предупреждений для каждой серьезности, с столбцов, которые определяют общее количество предупреждений в каждом состоянии для каждого состояния. Чтобы открыть страницу [Все оповещения](#all-alerts-page), отфильтрованную по конкретной серьезности, щелкните ее.

Кроме того, можно [программно перечислить экземпляры оповещения, генерируемые в подписках, с помощью APIs REST.](#manage-your-alert-instances-programmatically)

> [!NOTE]
   >  Вы можете получить доступ только к оповещениям, генерируемым за последние 30 дней.

Он не показывает и не отслеживает классические оповещения. Подписки или параметры фильтра можно изменять, чтобы обновить страницу. 

![Скриншот страницы оповещения](media/alerts-overview/alerts-page.png)

Вы можете отфильтровать это представление, выбрав значения в выпадающих меню в верхней части страницы.

| Столбец | Описание |
|:---|:---|
| Подписка | Выберите подписки Azure, для которых необходимо просматривать оповещения. Вы можете по желанию выбрать все подписки. В представление включены только оповещения, к которым у вас есть доступ в выбранных подписках. |
| Группа ресурсов | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Диапазон времени | В представление включены только оповещения, выпущенные в пределах выбранного диапазона времени. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Выберите следующие значения в верхней части страницы Оповещения, чтобы открыть другую страницу:

| Значение | Описание |
|:---|:---|
| Всего оповещений | Общее количество оповещений, которые соответствуют выбранным критериям. Чтобы открыть представление "Все оповещения" без применения фильтра, щелкните это значение. |
| Смарт-группы | Общее количество смарт-групп, которые созданы из оповещений, соответствующих выбранным критериям. Чтобы открыть список смарт-групп в представлении "Все оповещения", щелкните это значение.
| Всего правил генерации оповещений | Общее количество оповещений в выбранной подписке и группе ресурсов. Чтобы открыть представление "Правила", отфильтрованное по выбранным подпискам и группам ресурсов, щелкните это значение.


## <a name="manage-alert-rules"></a>Управление правилами генерации оповещений
Чтобы показать страницу **Правил,** выберите **правила оповещения Управления.** Страница Правил — это единое место для управления всеми правилами оповещения в подписках Azure. На этой странице перечислены все правила генерации оповещений, а также на ней доступна фильтрация по целевым ресурсам, группам ресурсов, имени правила или состоянию. Вы также можете отсечь, включить или отключить правила оповещения с этой страницы.  

 ![Скриншот страницы Правил](./media/alerts-overview/alerts-preview-rules.png)


## <a name="create-an-alert-rule"></a>Создание правила оповещения
Вы можете авторизировать правила оповещения в последовательной манере, независимо от службы мониторинга или типа сигнала.

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4tflw]

 
Вот как создать новое правило оповещения:
1. Выбор _цели_ оповещения.
1. Выбор _сигнала_ для цели из списка доступных сигналов.
1. Указание _логики_, которая будет применяться к информации, полученной от сигнала.
 
При таком упрощенном процессе создания пользователю больше не нужно знать поддерживаемый источник мониторинга или сигналы перед выбором ресурса Azure. Список доступных сигналов автоматически фильтруется на основе выбранного целевого ресурса. На основе того же целевого объекта, содержатся сведения об определении логики правила генерации оповещений автоматически.  

Дополнительные сведения по созданию правил генерации оповещений см. в статье [Создание и просмотр оповещений, а также управление ими с помощью Azure Monitor](../../azure-monitor/platform/alerts-metric.md).

Оповещения доступны в нескольких службах мониторинга Azure. Для получения сведений о том как и где использовать каждую из этих служб прочитайте статью [Мониторинг приложений и ресурсов в Azure](../../azure-monitor/overview.md). 


## <a name="all-alerts-page"></a>Страница "Все оповещения" 
Чтобы просмотреть страницу **All Alerts,** выберите **Общее количество оповещений.** Здесь можно просмотреть список предупреждений, созданных в выбранное время. Здесь можно просмотреть список отдельных оповещений или список-смарт групп, которые содержат оповещения. Чтобы переключаться между представлениями, щелкните баннер вверху страницы.

![Скриншот страницы «Все оповещения»](media/alerts-overview/all-alerts-page.png)

Можно отфильтровать представление, выбрав следующие значения в меню выпадения в верхней части страницы:

| Столбец | Описание |
|:---|:---|
| Подписка | Выберите подписки Azure, для которых необходимо просматривать оповещения. Вы можете по желанию выбрать все подписки. В представление включены только оповещения, к которым у вас есть доступ в выбранных подписках. |
| Группа ресурсов | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Тип ресурса | Выбор одной или нескольких группу ресурсов. В представление включены только те оповещения, в которых выбранный тип отмечен. Этот столбец становится доступным только после указания группы ресурсов. |
| Ресурс | Выбор ресурса. В представление включены только те оповещения, целью которых выбраны ресурсы. Этот столбец становится доступным только после указания типа ресурсов. |
| Серьезность | Выберите серьезность оповещения или выберите **Все,** чтобы включить оповещения всех разъединений. |
| Состояние монитора | Выберите условие монитора или выберите **все,** чтобы включить оповещения всех условий. |
| Состояние оповещения | Выберите состояние оповещения или выберите **все** для включения оповещений всех состояний. |
| Мониторинг службы | Выберите службу или выберите **Все,** чтобы включить все службы. В представление включаются только те оповещения, которые были созданы в соответствие с правилами и которые используют эту службу в качестве цели. |
| Диапазон времени | В представление включены только оповещения, выпущенные в пределах выбранного диапазона времени. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Выберите **столбцы** в верхней части страницы, чтобы выбрать, какие столбцы отобраться. 

## <a name="alert-details-page"></a>Страница сведения о предупреждениях
При выборе оповещения эта страница предоставляет подробную информацию о предупреждении и позволяет изменить его состояние.

![Скриншот страницы подробностей оповещения](media/alerts-overview/alert-detail2.png)

Страница сведения о предупреждении включает в себя следующие разделы:

| Section | Описание |
|:---|:---|
| Сводка | В этом разделе отображаются свойства оповещения и другие важные сведения о нем. |
| Журнал | В этом разделе перечислено каждое действие оповещения и любые изменения внесенные в оповещение. В настоящее время этот раздел ограничен изменениями состояния. |
| Диагностика | Информация о группе smart, в которую включено оповещение. *Счетчик оповещений* отображает количество оповещений, которые включены в смарт-группу. Включает другие оповещения в той же группе smart, которые были созданы в течение последних 30 дней, независимо от фильтра времени на странице списка предупреждений. Чтобы получить дополнительные сведения, щелкните оповещение. |

## <a name="role-based-access-control-rbac-for-your-alert-instances"></a>Элемент управления доступом на основе ролей (RBAC) для экземпляров оповещения

Потребление и управление экземплярами оповещения требует, чтобы пользователь иметь встроенные роли RBAC либо [мониторинга вкладчика](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#monitoring-contributor) или [считывателя мониторинга.](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#monitoring-reader) Эти роли поддерживаются в любой области управления ресурсами Azure, от уровня подписки до гранулированных назначений на уровне ресурсов. Например, если пользователь имеет доступ к `ContosoVM1`пользователю только для виртуальной машины, `ContosoVM1`этот пользователь может потреблять и управлять только оповещениями, генерируемыми на.

## <a name="manage-your-alert-instances-programmatically"></a>Управляйте экземплярами оповещения программно

Возможно, захотите заставить программно запросить оповещения, генерируемые по отношению к вашей подписке. Это может быть создание пользовательских представлений за пределами портала Azure или анализ оповещений для выявления закономерностей и тенденций.

Вы можете запросить оповещения, генерируемые против ваших подписок, либо с помощью [API управления оповещениями,](https://aka.ms/alert-management-api) либо с помощью [графика ресурсов Azure](../../governance/resource-graph/overview.md) и [аиМа REST для ресурсов.](/rest/api/azureresourcegraph/resourcegraph(2019-04-01)/resources/resources)

API Resource Graph REST для ресурсов позволяет запросить экземпляры оповещения в масштабе. Это рекомендуется, когда вам нужно управлять оповещениями, генерируемыми во многих подписях. 

Следующий запрос на пример к API Resource Graph REST возвращает количество оповещений в рамках одной подписки:

```json
{
  "subscriptions": [
    <subscriptionId>
  ],
  "query": "AlertsManagementResources | where type =~ 'Microsoft.AlertsManagement/alerts' | summarize count()"
}
```

Результат этого запроса Resource Graph на портале можно увидеть с помощью Azure Resource Graph Explorer: [portal.azure.com](https://portal.azure.com/?feature.customportal=false#blade/HubsExtension/ArgQueryBlade/query/AlertsManagementResources%20%7C%20where%20type%20%3D~%20%27Microsoft.AlertsManagement%2Falerts%27%20%7C%20summarize%20count())

Вы можете запросить оповещения для их [основных](alerts-common-schema-definitions.md#essentials) полей.

Используйте [API управления оповещениями REST,](https://aka.ms/alert-management-api) чтобы получить больше информации о конкретных предупреждениях, включая области [контекста оповещения.](alerts-common-schema-definitions.md#alert-context)

## <a name="next-steps"></a>Следующие шаги

- [Дополнительные сведения о смарт-группах](https://aka.ms/smart-groups)
- [Дополнительные сведения о группах действий](../../azure-monitor/platform/action-groups.md)
- [Управление экземплярами оповещений в Azure](https://aka.ms/managing-alert-instances)
- [Управление смарт-группами](https://aka.ms/managing-smart-groups)
- [Подробнее о ценах на оповещения Azure](https://azure.microsoft.com/pricing/details/monitor/)






