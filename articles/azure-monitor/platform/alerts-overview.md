---
title: Обзор мониторинга оповещений и уведомлений в Azure
description: Обзор оповещений в Azure. Оповещения, классические предупреждения и интерфейс оповещений.
ms.service: azure-monitor
ms.subservice: alerts
ms.topic: conceptual
author: rboucher
ms.author: robb
ms.date: 01/28/2018
ms.openlocfilehash: e79d9be6b893184bd615fbc569893e53a2c72861
ms.sourcegitcommit: ae461c90cada1231f496bf442ee0c4dcdb6396bc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2019
ms.locfileid: "72555607"
---
# <a name="overview-of-alerts-in-microsoft-azure"></a>Обзор оповещений в Microsoft Azure 

В этой статье объясняется, что такое оповещения, каковы их преимущества и как начать их использовать.  




## <a name="what-are-alerts-in-microsoft-azure"></a>Что такое оповещения в Microsoft Azure?
С помощью оповещений можно заранее получать уведомления о важных условиях, обнаруженных в ваших данных мониторинга. Они позволяют выявить и устранить проблемы, прежде чем пользователи системы обнаружат их. 

В этой статье обсуждается единая система оповещений в Azure Monitor, которая содержит оповещения, ранее управляемые Log Analytics и Application Insights. [Предыдущий интерфейс оповещений](alerts-classic.overview.md) и типы оповещений называются *классическими оповещениями*. Вы можете просмотреть этот старый интерфейс и старый тип оповещений, выбрав **Просмотреть классические оповещения** в верхней части страницы оповещений. 

## <a name="overview"></a>Краткое описание

Поток оповещений приведен на схеме ниже. 

![Схема потока предупреждений](media/alerts-overview/Azure-Monitor-Alerts.svg)

Правила генерации оповещений отделены от предупреждений и действий, выполняемых при срабатывании оповещения. Правило генерации оповещений фиксирует целевой объект и критерии для предупреждений. Правило генерации оповещений можно включить или отключить. Оповещения срабатывают только при включенном состоянии. 

Ниже приведены ключевые атрибуты правила генерации оповещений.

**Целевой ресурс**: определяет область и сигналы, доступные для предупреждений. Целью может быть любой ресурс Azure. Примеры целевых ресурсов: виртуальная машина, учетная запись хранения, масштабируемый набор виртуальных машин, рабочая область Log Analytics или ресурс Application Insights. Для некоторых ресурсов (например, виртуальных машин) в качестве целевого объекта правила оповещения можно указать несколько ресурсов.

**Сигнал**: порожденный целевым ресурсом. Сигналы могут иметь следующие типы: метрика, журнал действий, Application Insights и журнал.

**Критерий**: сочетание сигнала и логики, применяемой к целевому ресурсу. Примеры. 
   - Загрузка ЦП > 70 %
   - Время ответа сервера > 4 мс 
   - Число результатов запроса журнала > 100

**Имя предупреждения**: конкретное имя для правила генерации оповещений, настроенное пользователем.

**Описание предупреждения**: описание правила генерации оповещений, настроенное пользователем.

**Серьезность**. уровень серьезности предупреждения после соблюдения критериев, указанных в правиле генерации оповещений. Уровень серьезности может иметь значение от 0 до 4.
   - Уровень серьезности 0 = критический
   - Уровень серьезности 1 = ошибка
   - Уровень серьезности 2 = предупреждение
   - Уровень серьезности 3 = информационные
   - Уровень серьезности 4 = подробный 

**Действие**: определенное действие, выполняемое при срабатывании предупреждения. Дополнительные сведения см. в разделе [Группы действий](../../azure-monitor/platform/action-groups.md).

## <a name="what-you-can-alert-on"></a>Возможные оповещения

Вы можете оповещать о метриках и журналах, как описано в разделе [мониторинг источников данных](../../azure-monitor/platform/data-sources-reference.md). Помимо прочего, к ним относятся:
- Значения метрик
- Запросы поиска по журналам
- События журнала действий
- Работоспособность базовой платформы Azure
- Тесты доступности веб-сайта

Ранее для метрик Azure Monitor, Application Insights, Log Analytics и Работоспособности служб были предусмотрены отдельные возможности оповещений. Со временем пользовательский интерфейс и различные методы оповещений были улучшены и объединены в Azure. Эта консолидация все еще выполняется. Поэтому в новой системе оповещений все еще не присутствуют некоторые возможности оповещений.  

| **Источник мониторинга** | **Тип сигнала**  | **Описание** | 
|-------------|----------------|-------------|
| Работоспособность службы | Журнал действий  | Не поддерживается. Ознакомьтесь с разделом [Создание оповещений журнала действий для уведомлений службы](../../azure-monitor/platform/alerts-activity-log-service-notifications.md).  |
| Application Insights | Веб-тесты доступности | Не поддерживается. Ознакомьтесь с разделом [Наблюдение за доступностью и скоростью реагирования веб-сайта](../../azure-monitor/app/monitor-web-app-availability.md). Доступны для любого веб-сайта, инструментированного для отправки данных в Application Insights. Получение уведомления, когда доступность или скорость реагирования веб-сайта опускается ниже ожидаемого значения. |

## <a name="manage-alerts"></a>Управление оповещениями
Чтобы указать, где в процессе разрешения находится оповещение, можно задать его состояние. При выполнении условий, указанных в правиле генерации оповещений, создается или срабатывает оповещение, которое имеет состояние *новое*. Его можно изменить после того, как оповещение будет подтверждено или закрыто. Любые изменения состояния оповещения сохраняются в его журнале.

Поддерживаются следующие состояния оповещения.

| Состояние | Описание |
|:---|:---|
| Новинка | Эта ошибка была только что обнаружена и еще не проверена. |
| Подтверждено | Администратор рассмотрел оповещение и начал над ним работать. |
| Закрытые | Проблема была устранена. После закрытия оповещения можно изменить его состояние и вновь открыть. |

*Состояние оповещения* отличается и не зависит от *состояния монитора*. Пользователь задает состояние оповещения. Система задает состояние монитора. Когда срабатывает оповещение, состояние монитора оповещения устанавливается как *Активировано*. Когда базовое условие, которое вызвало оповещение, активизирует очистку, условие мониторинга устанавливается на *Разрешено*. Состояние оповещения изменяется только пользователем. Узнайте, [как изменить состояние оповещений и смарт-групп](https://aka.ms/managing-alert-smart-group-states).

## <a name="smart-groups"></a>Смарт-группы 

Интеллектуальные группы — это статистические выражения, основанные на алгоритмах машинного обучения, которые могут помочь в уменьшении шума и помощи в устранении неполадок. [Дополнительные сведения о смарт-группах](https://aka.ms/smart-groups) и [управление смарт-группами](https://aka.ms/managing-smart-groups).


## <a name="alerts-experience"></a>Интерфейс оповещений 
На странице оповещения по умолчанию представлена сводка по оповещениям, созданным в течение определенного диапазона времени. Он отображает общее число предупреждений для каждой серьезности, со столбцами, которые указывают общее количество предупреждений в каждом состоянии для каждого уровня серьезности. Чтобы открыть страницу [Все оповещения](#all-alerts-page), отфильтрованную по конкретной серьезности, щелкните ее.

Кроме того, можно [программным способом перечислить экземпляры предупреждений, созданные в подписках, с помощью интерфейсов API](#manage-your-alert-instances-programmatically).

> [!NOTE]
   >  Вы можете получить доступ только к оповещениям, созданным за последние 30 дней.

Он не отображает и не следит за классическими оповещениями. Подписки или параметры фильтра можно изменять, чтобы обновить страницу. 

![Снимок экрана страницы предупреждений](media/alerts-overview/alerts-page.png)

Можно отфильтровать это представление, выбрав значения в раскрывающихся меню в верхней части страницы.

| Столбец | Описание |
|:---|:---|
| Subscription | Выберите подписки Azure, для которых вы хотите просмотреть оповещения. При необходимости можно выбрать все подписки. В представление включаются только оповещения, к которым у вас есть доступ в выбранных подписках. |
| группа ресурсов. | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Диапазон времени | В представление включаются только предупреждения, инициированные в выбранном диапазоне времени. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Выберите следующие значения в верхней части страницы оповещения, чтобы открыть другую страницу:

| Value | Описание |
|:---|:---|
| Всего оповещений | Общее количество оповещений, которые соответствуют выбранным критериям. Чтобы открыть представление "Все оповещения" без применения фильтра, щелкните это значение. |
| Смарт-группы | Общее количество смарт-групп, которые созданы из оповещений, соответствующих выбранным критериям. Чтобы открыть список смарт-групп в представлении "Все оповещения", щелкните это значение.
| Всего правил генерации оповещений | Общее количество оповещений в выбранной подписке и группе ресурсов. Чтобы открыть представление "Правила", отфильтрованное по выбранным подпискам и группам ресурсов, щелкните это значение.


## <a name="manage-alert-rules"></a>Управление правилами генерации оповещений
Чтобы отобразить страницу **правила** , выберите **Управление правилами оповещений**. Страница правила — это единое место для управления всеми правилами генерации оповещений в подписках Azure. На этой странице перечислены все правила генерации оповещений, а также на ней доступна фильтрация по целевым ресурсам, группам ресурсов, имени правила или состоянию. На этой странице также можно изменять, включать и отключать правила генерации оповещений.  

 ![Снимок экрана страницы правил](./media/alerts-overview/alerts-preview-rules.png)


## <a name="create-an-alert-rule"></a>Создание правила оповещения
Предупреждения можно создавать единообразно, независимо от службы мониторинга или типа сигнала. Все сработавшие оповещения и связанные сведения доступны на одной странице.
 
Вот как можно создать новое правило генерации оповещений:
1. Выбор _цели_ оповещения.
1. Выбор _сигнала_ для цели из списка доступных сигналов.
1. Указание _логики_, которая будет применяться к информации, полученной от сигнала.
 
При таком упрощенном процессе создания пользователю больше не нужно знать поддерживаемый источник мониторинга или сигналы перед выбором ресурса Azure. Список доступных сигналов автоматически фильтруется на основе выбранного целевого ресурса. На основе того же целевого объекта, содержатся сведения об определении логики правила генерации оповещений автоматически.  

Дополнительные сведения по созданию правил генерации оповещений см. в статье [Создание и просмотр оповещений, а также управление ими с помощью Azure Monitor](../../azure-monitor/platform/alerts-metric.md).

Оповещения доступны в нескольких службах мониторинга Azure. Для получения сведений о том как и где использовать каждую из этих служб прочитайте статью [Мониторинг приложений и ресурсов в Azure](../../azure-monitor/overview.md). 


## <a name="all-alerts-page"></a>Страница "Все оповещения" 
Чтобы просмотреть страницу **все оповещения** , выберите **Общее число оповещений**. Здесь можно просмотреть список оповещений, созданных в течение выбранного времени. Здесь можно просмотреть список отдельных оповещений или список-смарт групп, которые содержат оповещения. Чтобы переключаться между представлениями, щелкните баннер вверху страницы.

![Снимок экрана со страницей "все оповещения"](media/alerts-overview/all-alerts-page.png)

Можно отфильтровать представление, выбрав следующие значения в раскрывающихся меню в верхней части страницы:

| Столбец | Описание |
|:---|:---|
| Subscription | Выберите подписки Azure, для которых вы хотите просмотреть оповещения. При необходимости можно выбрать все подписки. В представление включаются только оповещения, к которым у вас есть доступ в выбранных подписках. |
| группа ресурсов. | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Тип ресурса | Выбор одной или нескольких группу ресурсов. В представление включены только те оповещения, в которых выбранный тип отмечен. Этот столбец становится доступным только после указания группы ресурсов. |
| Ресурс | Выбор ресурса. В представление включены только те оповещения, целью которых выбраны ресурсы. Этот столбец становится доступным только после указания типа ресурсов. |
| Серьезность | Выберите серьезность оповещения или щелкните **Все**, чтобы включить оповещения всех уровней серьезности. |
| Состояние монитора | Выберите условие монитора или выберите **все** , чтобы включить оповещения обо всех условиях. |
| Состояние оповещения | Выберите состояние оповещения или выберите **все** , чтобы включить оповещения обо всех состояниях. |
| Мониторинг службы | Выберите службу или щелкните **Все**, чтобы включить все службы. В представление включаются только те оповещения, которые были созданы в соответствие с правилами и которые используют эту службу в качестве цели. |
| Диапазон времени | В представление включаются только предупреждения, инициированные в выбранном диапазоне времени. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Выберите **столбцы в верхней** части страницы, чтобы выбрать отображаемые столбцы. 

## <a name="alert-details-page"></a>Страница сведений о предупреждении
При выборе предупреждения Эта страница предоставляет подробные сведения о предупреждении и позволяет изменить его состояние.

![Снимок экрана со страницей сведений о предупреждении](media/alerts-overview/alert-detail2.png)

Страница сведения о предупреждении содержит следующие разделы.

| Section | Описание |
|:---|:---|
| Резюме | В этом разделе отображаются свойства оповещения и другие важные сведения о нем. |
| Журнал | В этом разделе перечислено каждое действие оповещения и любые изменения внесенные в оповещение. В настоящее время этот раздел ограничен изменениями состояния. |
| Диагностика: | Сведения о интеллектуальной группе, в которую включено оповещение. *Счетчик оповещений* отображает количество оповещений, которые включены в смарт-группу. Включает другие оповещения в той же интеллектуальной группе, которые были созданы за последние 30 дней, независимо от фильтра времени на странице списка оповещений. Чтобы получить дополнительные сведения, щелкните оповещение. |

## <a name="role-based-access-control-rbac-for-your-alert-instances"></a>Управление доступом на основе ролей (RBAC) для экземпляров оповещений

Для использования экземпляров оповещений и управления ими требуется, чтобы у пользователя были встроенные роли RBAC либо [участника мониторинга](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#monitoring-contributor) , либо [читателя мониторинга](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#monitoring-reader). Эти роли поддерживаются в любой области Azure Resource Manager, от уровня подписки до детализированных назначений на уровне ресурсов. Например, если пользователь имеет доступ только к участнику мониторинга для `ContosoVM1` виртуальных машин, он может использовать только оповещения, созданные в `ContosoVM1`, и управлять ими.

## <a name="manage-your-alert-instances-programmatically"></a>Программное управление экземплярами оповещений

Для создания предупреждений, созданных для подписки, может потребоваться программный запрос. Это может быть создание пользовательских представлений за пределами портал Azure или анализ оповещений для выявления закономерностей и тенденций.

Вы можете запросить оповещения, созданные для ваших подписок, с помощью [Управление оповещениями REST API](https://aka.ms/alert-management-api) или [REST API Граф ресурсов Azure для оповещений](https://docs.microsoft.com/rest/api/azureresourcegraph/resources/resources).

[Граф ресурсов Azure REST API для оповещений](https://docs.microsoft.com/rest/api/azureresourcegraph/resources/resources) позволяет запрашивать экземпляры предупреждений в масштабе. Это рекомендуется, если необходимо управлять предупреждениями, созданными для нескольких подписок. 

Следующий пример запроса к API возвращает количество предупреждений в одной подписке:

```json
{
  "subscriptions": [
    <subscriptionId>
  ],
  "query": "where type =~ 'Microsoft.AlertsManagement/alerts' | summarize count()",
  "options": {
            "dataset":"alerts"
  }
}
```
Вы можете запросить оповещения для своих [ключевых](alerts-common-schema-definitions.md#essentials) полей.

Используйте [REST API Управление оповещениями](https://aka.ms/alert-management-api) , чтобы получить дополнительные сведения о конкретных предупреждениях, включая поля [контекста оповещений](alerts-common-schema-definitions.md#alert-context) .

## <a name="next-steps"></a>Дальнейшие действия

- [Дополнительные сведения о смарт-группах](https://aka.ms/smart-groups)
- [Дополнительные сведения о группах действий](../../azure-monitor/platform/action-groups.md)
- [Управление экземплярами оповещений в Azure](https://aka.ms/managing-alert-instances)
- [Управление смарт-группами](https://aka.ms/managing-smart-groups)






