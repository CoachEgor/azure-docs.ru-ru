---
title: Визуализации рабочей книги Azure Monitor
description: Узнайте обо всех компонентах визуализации рабочей книги Azure Monitor, включая текст, диаграммы, сетки, деревья и графики.
services: azure-monitor
author: mrbullwinkle
manager: carmonm
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 10/23/2019
ms.author: mbullwin
ms.openlocfilehash: d05902f47dff3dd2f8a63ae240c0b8825a5c441f
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77658036"
---
# <a name="azure-monitor-workbook-visualizations"></a>Визуализации рабочей книги Azure Monitor

В трудовых книгах Azure Monitor поддерживается множество различных стилей визуализаций с учетом ваших потребностей в отчетности. В этой статье приводятся примеры каждого типа визуализации.

## <a name="text"></a>Text

Трудовые книжки позволяют авторам включать текстовые блоки в свои трудовые книжки. Текст может быть человеческим анализом телеметрии, информации, которая поможет пользователям интерпретировать ваши данные, заголовки разделов и т.д.

![Скриншот таблицы apdex текста](./media/workbooks-visualizations/apdex.png)

Текст добавляется через элемент управления Markdown, который обеспечивает полный контроль форматирования.

![Скриншот необработанной разметки, которая создает отрисованную таблицу](./media/workbooks-visualizations/markdown.png)

### <a name="add-a-text-control"></a>Добавление элемента управления текстом

1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов **Edit.**
2. Используйте текстовую ссылку **Добавить,** чтобы добавить элемент управления текстом в трудовую книгу.
3. Добавление markdown в элемент управления.
4. Нажмите кнопку **Редактирования Сделано,** чтобы увидеть отформатированный текст.

> [!TIP]
> Используйте этот [шпаргалку Markdown,](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet) чтобы узнать о различных вариантах форматирования.

## <a name="charts"></a>Диаграммы

В трудовых книжках можно представить данные мониторинга в виде диаграмм. Поддерживаемые типы диаграммвключают включают линию, бар, категорию бара, область, рассеивание участков, пирог и время. Авторы могут настроить высоту, ширину, цветовую палитру, легенду, названия, сообщение без данных и т.д. диаграммы.

Таблицы справочников для журналов и источников метрических данных поддерживаются в справочниках. 

### <a name="adding-a-log-chart"></a>Добавление диаграммы журнала

1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов **Edit.**
2. Используйте ссылку **добавления запроса,** чтобы добавить элемент управления запросом журнала в рабочую книгу.
3. Выберите тип запроса как **журнал,** тип ресурса (например, Application Insights) и ресурсы для таргетинга.
4. Используйте редактор запроса для ввода [КЗЛ](https://docs.microsoft.com/azure/kusto/query/) для анализа (например, тренд запросов).
5. Установите визуализацию на один из: **Площадь**, **Бар** **, Бар (категорический)**, **Линия**, **Пирог**, **Рассеяние**, или **Время**.
6. Установите другие параметры при необходимости - как временной диапазон, визуализация, размер, цветовая палитра и легенда.

![Скриншот диаграммы журнала в режиме отодвивания](./media/workbooks-visualizations/log-chart.png)

#### <a name="log-chart-parameters"></a>Параметры диаграммы журнала

| Параметр | Объяснение | Пример |
| ------------- |:-------------|:-------------|
| `Query Type` | Тип запроса для использования | Войти, График ресурсов Azure и т.д. |
| `Resource Type` | Тип ресурса для целевого | Анализ приложений, аналитика журналов или Лазурный |
| `Resources` | Набор ресурсов для получения значения метрик от | MyApp1 |
| `Time Range` | Временное окно для просмотра диаграммы журнала | Последний час, последние 24 часа и т.д. |
| `Visualization` | Визуализация для использования | Площадь, Бар, Линия, Пирог, Рассеянный, Время, бар категоричны |
| `Size` | Вертикальный размер элемента управления | Малый, средний, большой или полный |
| `Color palette` | Цветовая палитра для использования в диаграмме. Игнорируется в многометрическом или сегментированном режиме. | Синий, зеленый, красный и т.д. |
| `Legend` | Функция агрегирования для использования для легенды | Сумма или среднее значение или Макс, Мин, Первый, Последнее значение |
| `Query` | Любой запрос КЗЛ, который возвращает данные в формате, ожидаемом визуализацией диаграммы | _запросы \| make-series Запросы запросы и кол() по умолчанию 0 на метке времени от назад (1d) до теперь () шаг 1h_ |

### <a name="adding-a-metric-chart"></a>Добавление метрической диаграммы

1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов **Edit.**
2. Используйте метрическую ссылку **Add,** чтобы добавить контроль метрики в трудовую книгу.
3. Выберите тип ресурса (например, учетную запись хранения), целевые ресурсы, пространство имен метрики и имя, а также агрегацию для использования.
4. Установите другие параметры при необходимости - как временной диапазон, сплит-, визуализация, размер и цветовая палитра.

![Скриншот метрической диаграммы в режиме отодвождения](./media/workbooks-visualizations/metric-chart.png)

#### <a name="metric-chart-parameters"></a>Параметры метрической диаграммы

| Параметр | Объяснение | Пример |
| ------------- |:-------------|:-------------|
| `Resource Type` | Тип ресурса для целевого | Хранение или виртуальная машина. |
| `Resources` | Набор ресурсов для получения значения метрик от | MyStorage1 |
| `Namespace` | Пространство имен с метрикой | Хранение > Blob |
| `Metric` | Метрика для визуализации | Хранение > > транзакций Blob |
| `Aggregation` | Функция агрегирования для применения к метрике | Сумма, граф, средний и т.д. |
| `Time Range` | Временное окно для просмотра метрики в | Последний час, последние 24 часа и т.д. |
| `Visualization` | Визуализация для использования | Площадь, Бар, Линия, Разброс, Сетка |
| `Split By` | Опционально разделить метрику на измерение | Транзакции по типу Geo |
| `Size` | Вертикальный размер элемента управления | Малый, средний или крупный |
| `Color palette` | Цветовая палитра для использования в диаграмме. Игнорируется при `Split by` использовании параметра | Синий, зеленый, красный и т.д. |

## <a name="grids"></a>Сетки

Сетки или таблицы являются распространенным способом представления данных пользователям. В работах пользователи могут индивидуально стилизовать столбцы сетки, чтобы обеспечить богатый пользовательский чат для своих отчетов.

На приведенном ниже примере показана сетка, которая сочетает в себе значки, тепловые карты и искры-бары для представления сложной информации. В трудовой книжке также представлены сортировка, поле поиска и кнопка «Идти к аналитике».

![Скриншот сетки на основе журнала](./media/workbooks-visualizations/grid.png)

### <a name="adding-a-log-based-grid"></a>Добавление сетки на основе журналов

1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов **Edit.**
2. Используйте ссылку **добавления запроса,** чтобы добавить элемент управления запросом журнала в рабочую книгу.
3. Выберите тип запроса как **журнал,** тип ресурса (например, Application Insights) и ресурсы для таргетинга.
4. Используйте редактор запроса для ввода КЗЛ для анализа (например, vMs с памятью ниже порога)
5. Установка визуализации в **сетку**
6. Установите другие параметры при необходимости - как временной диапазон, размер, цветовая палитра и легенда.

![Скриншот запроса сетки на основе журнала](./media/workbooks-visualizations/grid-query.png)

## <a name="tiles"></a>Плитки

Плитки являются очень полезным способом представления сводных данных в трудовых книжках. На рисунке ниже показан общий пример использования плиток - резюме уровня приложения поверх подробной сетки.

![Скриншот сводном представления плитки](./media/workbooks-visualizations/tiles-summary.png)

Workbook плитки поддержки показаны название, субтитры, большой текст, значки, метрические градиенты на основе, искры линии / бары, колонтитул, и т.д.

### <a name="adding-a-tile"></a>Добавление плитки

1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов _Edit._
2. Используйте ссылку **добавления запроса,** чтобы добавить элемент управления запросом журнала в рабочую книгу. 
3. Выберите тип запроса как **журнал,** тип ресурса (например, Application Insights) и ресурсы для таргетинга.
4. Используйте редактор запроса для ввода КЗЛ для анализа
    ```kusto
    requests
    | summarize Requests = count() by appName, name
    | top 7 by Requests desc
    ```
5. Установить размер в **полном объеме**
6. Установка визуализации на **плитки**
7. Нажмите кнопку **Настройки плитки,** чтобы открыть панель настроек
8. В **плитке поля**, набор:
    * Заголовок: `name`
    * Слева: `Requests`, Рендерер: `Big Number` `Green to Red`, Цветовая палитра: , Мин Значение:`0`
    * Нижней:`appName`
9. Нажмите кнопку **Сохранить и закрыть** в нижней части панели.

![Скриншот сводном представления плитки](./media/workbooks-visualizations/tile-settings.png)

Вот как плитки будут выглядеть в режиме чтения:

![Скриншот сводном представления плитки](./media/workbooks-visualizations/tiles-read-mode.png)

## <a name="trees"></a>Деревья

Учебники поддерживают иерархические представления с помощью древесных сеток. Деревья позволяют некоторые строки, которые будут расширяются на следующий уровень для сверления вниз опыт.

В приведенном ниже примере показаны метрики работоспособности контейнера (размер рабочего набора), визуализированные как сетка дерева. Узлами верхнего уровня здесь являются узлы Azure Kubernetes Service (AKS), следующим уровнем являются стручки, а конечным уровнем являются контейнеры. Обратите внимание, что вы все еще можете форматировать столбцы, как в сетке (тепловая карта, значки, ссылка). Основным источником данных в данном случае является рабочее пространство Log Analytics с журналами AKS.

![Скриншот сводном представления плитки](./media/workbooks-visualizations/trees.png)

### <a name="adding-a-tree-grid"></a>Добавление сетки дерева
1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов _Edit._
2. Используйте ссылку **добавления запроса,** чтобы добавить элемент управления запросом журнала в рабочую книгу. 
3. Выберите тип запроса как **журнал,** тип ресурса (например, Application Insights) и ресурсы для таргетинга.
4. Используйте редактор запроса для ввода КЗЛ для анализа
    ```kusto
    requests
    | summarize Requests = count() by ParentId = appName, Id = name
    | extend Kind = 'Request', Name = strcat('🌐 ', Id)
    | union (requests
    | summarize Requests = count() by Id = appName
    | extend Kind = 'Request', ParentId = '', Name = strcat('📱 ', Id))
    | project Name, Kind, Requests, Id, ParentId
    | order by Requests desc
    ```
5. Установка визуализации в **сетку**
6. Нажмите кнопку **Настройки столбца,** чтобы открыть панель настроек
7. В разделе **Tree/Group By Settings** внизу, установите:
    * Тип дерева:`Parent/Child`
    * Id поле:`Id`
    * Родительское поле id:`ParentId`
    * Показать расширитель на:`Name`
    * Расширьте верхний уровень дерева:`checked`
8. В разделе _Колонки_ в верхней части, установите:
    * _Id_ - Колонка Рендер:`Hidden`
    * _Родительский идентификатор_ - Колонка Рендер:`Hidden`
    * _Запросы_ - Колонка Рендер: , `Bar`Цвет: `Blue`, Минимальное значение:`0`
9. Нажмите кнопку _Сохранить и закрыть_ в нижней части панели.    

![Скриншот сводном представления плитки](./media/workbooks-visualizations/tree-settings.png)

### <a name="tree-settings"></a>Настройки дерева

| Параметр | Объяснение |
|:------------- |:-------------|
| `Id Field` | Уникальный идентификатор каждого ряда в сетке |
| `Parent Id Field` | Идентификатор родителя текущей строки |
| `Show the expander on` | Колонна, на которой можно показать расширитель дерева. Она является общей для дерева сетки, чтобы скрыть их ID и родительского ID поле, потому что они не очень читаемым. Вместо этого расширитель отображается на поле с более читаемым значением - например, название милисти объекта |
| `Expand the top level of the tree` | Если проверить, сетка дерева будет расширена на верхнем уровне. Полезно, если вы хотите показать больше информации по умолчанию |

## <a name="graphs"></a>Графы

В учебниках поддержки визуализируется произвольные графики, основанные на данных из журналов, чтобы показать взаимосвязь между объектами мониторинга.

На графике ниже показаны данные, пропускаемые в/из компьютера через различные порты к/из внешних компьютеров. Он окрашен по типу (компьютер против порта против внешнего IP) и размеры края соответствуют объему данных, протекающих между ними. Основные данные поступают из запроса КЗЛ, ориентированного на соединения VM.

![Скриншот сводном представления плитки](./media/workbooks-visualizations/graph.png)

### <a name="adding-a-graph"></a>Добавление графика
1. Переключите рабочую книгу на реритит режим, нажав на элемент панели инструментов _Edit._
2. Используйте ссылку **добавления запроса,** чтобы добавить элемент управления запросом журнала в рабочую книгу. 
3. Выберите тип запроса как **журнал,** тип ресурса (например, Application Insights) и ресурсы для таргетинга.
4. Используйте редактор запроса для ввода КЗЛ для анализа
    ```kusto
    let data = dependencies
    | summarize Calls = count() by App = appName, Request = operation_Name, Dependency = name
    | extend RequestId = strcat(App, '::', Request);
    let links = data
    | summarize Calls = sum(Calls) by App, RequestId
    | project SourceId = App, TargetId = RequestId, Calls, Kind = 'App -> Request'
    | union (data
        | project SourceId = RequestId, TargetId = Dependency, Calls, Kind = 'Request -> Dependency');
    let nodes = data
    | summarize Calls = sum(Calls) by App
    | project Id = App, Name = App, Calls, Kind = 'App'
    | union (data
        | summarize Calls = sum(Calls) by RequestId, Request
        | project Id = RequestId, Name = Request, Calls, Kind = 'Request')
    | union (data
        | summarize Calls = sum(Calls) by Dependency
        | project Id = Dependency, Name = Dependency, Calls, Kind = 'Dependency');
    nodes
    | union (links)
    ```
7. Установка визуализации на **график**
8. Нажмите кнопку **Настройки графика,** чтобы открыть панель настроек
9. В _Layout Поля_ в нижней части, установить:
    * `Node Id`: `Id`
    * `Source Id`: `SourceId`
    * `Target Id`: `TargetId`
    * `Edge Label`: `None`
    * `Edge Size`: `Calls`
    * `Node Size`: `None`
    * `Coloring Type`: `Categorical`
    * `Node Color Field`: `Kind`
    * `Color palette`: `Pastel`
10. В _настройках формата узлов_ в верхней части, установите:
    * _Топ-контент_- `Name`Использование колонки: , Колонка Рендер:`Text`
    * _Содержание центра_- `Calls`Используйте колонку: , Колонка Рендер: `Big Number`, Цветовая палитра:`None`
    * _Нижний контент_- `Kind`Использование колонки: , Колонка Рендер:`Text`
10. Нажмите кнопку _Сохранить и закрыть_ в нижней части панели.

![Скриншот сводном представления плитки](./media/workbooks-visualizations/graph-settings.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Развертывание](workbooks-automate.md) трудовых книжек с менеджером ресурсов Azure.
* [Контролируйте](workbooks-access-control.md) и делитесь доступом к ресурсам вашей трудовой книжки.
