---
title: Создание интерактивных отчетов с помощью Azure Monitor визуализаций рабочих книг | Документация Майкрософт
description: Сведения о всех Azure Monitorных компонентах визуализации, включая-Text, диаграммы, сетки, деревья и графики.
services: azure-monitor
author: mrbullwinkle
manager: carmonm
ms.service: azure-monitor
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 10/23/2019
ms.author: mbullwin
ms.openlocfilehash: d878e8b5dd49ba517f85ebb74332bc6a245c33ca
ms.sourcegitcommit: 0b1a4101d575e28af0f0d161852b57d82c9b2a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73165060"
---
# <a name="azure-monitor-workbook-visualizations"></a>Azure Monitor визуализации книг

Azure Monitor книги поддерживают ряд различных стилей визуализаций в соответствии с потребностями отчетов. В этой статье приводятся примеры каждого типа визуализации.

## <a name="text"></a>Текст

Книги позволяют авторам добавлять текстовые блоки в свои книги. Текст может представлять собой человеческий анализ телеметрии, сведения, помогающие пользователям интерпретировать данные, заголовки разделов и т. д.

![Снимок экрана таблицы Apdex текста](./media/workbooks-visualizations/apdex.png)

Текст добавляется с помощью элемента управления Markdown, который обеспечивает полный контроль форматирования.

![Снимок экрана необработанного Markdown, который создает подготовленную для просмотра таблицу](./media/workbooks-visualizations/markdown.png)

### <a name="add-a-text-control"></a>Добавление элемента управления "текст"

1. Переключите книгу в режим редактирования, щелкнув элемент панели инструментов **изменить** .
2. Используйте ссылку **Добавить текст** , чтобы добавить в книгу элемент управления "текст".
3. Добавьте Markdown в элемент управления.
4. Нажмите кнопку **done Edit (готово к редактированию** ), чтобы просмотреть форматированный текст.

> [!TIP]
> Используйте этот [Markdown Памятка по лист](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet) , чтобы узнать о различных вариантах форматирования.

## <a name="charts"></a>Диаграммы

Книги позволяют представлять данные мониторинга как диаграммы. Поддерживаются следующие типы диаграмм: линейная, линейчатая, линейная Категория, область, точечная диаграмма, круговая диаграмма и время. Авторы могут настраивать высоту, ширину, цветовую палитру, условные обозначения, заголовки, сообщения без данных и т. д. диаграммы.

Книги поддерживают диаграммы как для журналов, так и для источников данных метрик. 

### <a name="adding-a-log-chart"></a>Добавление диаграммы журнала

1. Переключите книгу в режим редактирования, щелкнув элемент панели инструментов **изменить** .
2. Используйте ссылку **Добавить запрос** , чтобы добавить в книгу элемент управления "запрос журнала".
3. Выберите тип запроса в поле **Журнал**, тип ресурса (например, Application Insights) и ресурсы для целевого объекта.
4. Используйте редактор запросов, чтобы ввести [ККЛ](https://docs.microsoft.com/azure/kusto/query/) для анализа (например, тренд запросов).
5. Задайте для визуализации одну из следующих категорий **: площадь**, **линейчатая**, **линейчатая (категория)** , **линия**, **круг**, **точечная диаграмма**или **время**.
6. Задайте другие параметры, если необходимо, например диапазон времени, визуализация, размер, палитра цветов и условные обозначения.

![Снимок экрана: диаграмма журнала в режиме редактирования](./media/workbooks-visualizations/log-chart.png)

#### <a name="log-chart-parameters"></a>Параметры диаграммы журнала

| Параметр | Пояснение | Пример |
| ------------- |:-------------|:-------------|
| `Query Type` | Тип используемого запроса | Журнал, граф ресурсов Azure и т. д. |
| `Resource Type` | Целевой тип ресурса | Application Insights, Log Analytics или Azure — First |
| `Resources` | Набор ресурсов для получения значения метрик из | MyApp1 |
| `Time Range` | Временное окно для просмотра диаграммы журнала | Последний час, последние 24 часа и т. д. |
| `Visualization` | Используемая визуализация | Площадь, линейчатая, линейная, круговая, точечная, временная, линейчатая, Категория |
| `Size` | Вертикальный размер элемента управления | Малый, средний, крупный или полный |
| `Color palette` | Цветовая палитра, используемая в диаграмме. Игнорируется в многометриком или сегментированном режиме. | Синий, зеленый, красный и т. д. |
| `Legend` | Статистическая функция, используемая для условных обозначений | Sum или Average значений или Max, min, First, Последнее значение |
| `Query` | Любой запрос ККЛ, возвращающий данные в формате, ожидаемом визуализацией диаграммы | _запросы \| a-Series запросов = Count () по умолчанию = 0 по метке времени от назад (1d) до Now () шаг 1 ч_ |

### <a name="adding-a-metric-chart"></a>Добавление диаграммы метрик

1. Переключите книгу в режим редактирования, щелкнув элемент панели инструментов **изменить** .
2. Используйте ссылку **Добавить метрику** , чтобы добавить в книгу элемент управления метрикой.
3. Выберите тип ресурса (например, учетная запись хранения), целевые ресурсы, пространство имен и имя метрики, а также используемое статистическое выражение.
4. Задайте другие параметры, если это необходимо, например диапазон времени, разделение на, визуализация, размер и цветовая палитра.

![Снимок экрана: диаграмма метрик в режиме редактирования](./media/workbooks-visualizations/metric-chart.png)

#### <a name="metric-chart-parameters"></a>Параметры диаграммы метрик

| Параметр | Пояснение | Пример |
| ------------- |:-------------|:-------------|
| `Resource Type` | Целевой тип ресурса | Хранилище или виртуальная машина. |
| `Resources` | Набор ресурсов для получения значения метрик из | MyStorage1 |
| `Namespace` | Пространство имен с метрикой | Хранилище BLOB-объектов > |
| `Metric` | Метрика для визуализации | > Хранилища BLOB-объектов > транзакций |
| `Aggregation` | Статистическая функция, применяемая к метрике | Сумма, количество, среднее и т. д. |
| `Time Range` | Временное окно для просмотра метрики | Последний час, последние 24 часа и т. д. |
| `Visualization` | Используемая визуализация | Площадь, линейчатая, линейная, точечная, сетка |
| `Split By` | При необходимости разделить метрику на измерении | Транзакции по типу Geo |
| `Size` | Вертикальный размер элемента управления | Малый, средний или крупный |
| `Color palette` | Цветовая палитра, используемая в диаграмме. Игнорируется, если используется параметр `Split by` | Синий, зеленый, красный и т. д. |

## <a name="grids"></a>Сетки

Сетки или таблицы являются обычным способом представления данных пользователям. Книги позволяют пользователям по отдельности отформатировать столбцы сетки, чтобы обеспечить многофункциональный пользовательский интерфейс для своих отчетов.

В приведенном ниже примере показана сетка, объединяющая значки, тепловые карты и панели Spark для представления сложной информации. Книга также обеспечивает сортировку, поле поиска и кнопку Go to Analytics.

![Снимок экрана: сетка на основе журнала](./media/workbooks-visualizations/grid.png)

### <a name="adding-a-log-based-grid"></a>Добавление сетки на основе журнала

1. Переключите книгу в режим редактирования, щелкнув элемент панели инструментов **изменить** .
2. Используйте ссылку **Добавить запрос** , чтобы добавить в книгу элемент управления "запрос журнала".
3. Выберите тип запроса в поле **Журнал**, тип ресурса (например, Application Insights) и ресурсы для целевого объекта.
4. Используйте редактор запросов, чтобы ввести ККЛ для анализа (например, виртуальные машины с памятью ниже порогового значения).
5. Задание представления в **виде сетки**
6. Задайте другие параметры, если необходимо, например, диапазон времени, размер, палитра цветов и условные обозначения.

![Снимок экрана запроса сетки на основе журнала](./media/workbooks-visualizations/grid-query.png)

## <a name="tiles"></a>Плитки

Плитки — это очень полезный способ представления сводных данных в книгах. На рисунке ниже показан типичный вариант использования плиток на уровне приложения на основе подробной сетки.

![Снимок экрана: представление сводки плиток](./media/workbooks-visualizations/tiles-summary.png)

Элементы книги поддерживают отображение заголовка, подзаголовка, большого текста, значков, градиентов на основе метрик, линий, строк и столбцов Spark, нижнего колонтитула и т. д.

### <a name="adding-a-tile"></a>Добавление плитки

1. Переключите книгу в режим редактирования, щелкнув элемент панели инструментов _изменить_ .
2. Используйте ссылку **Добавить запрос** , чтобы добавить в книгу элемент управления "запрос журнала". 
3. Выберите тип запроса в поле **Журнал**, тип ресурса (например, Application Insights) и ресурсы для целевого объекта.
4. Использование редактора запросов для ввода ККЛ для анализа
    ```kusto
    requests
    | summarize Requests = count() by appName, name
    | top 7 by Requests desc
    ```
5. Задать **полный** размер
6. Установка **плиток** визуализации
7. Нажмите кнопку **Параметры плитки** , чтобы открыть панель Параметры.
8. В **поле плитки**задайте:
    * Title: `name`
    * Left: `Requests`, модуль подготовки отчетов: `Big Number`, цветовая палитра: `Green to Red`, минимальное значение: `0`
    * Bottom: `appName`
9. Нажмите кнопку **сохранить и закрыть** в нижней части панели.

![Снимок экрана: представление сводки плиток](./media/workbooks-visualizations/tile-settings.png)

Вот как плитки будут выглядеть в режиме чтения:

![Снимок экрана: представление сводки плиток](./media/workbooks-visualizations/tiles-read-mode.png)

## <a name="trees"></a>Дерева

Книги поддерживают иерархические представления с помощью древовидных сеток. Деревья позволяют расширять некоторые строки на новый уровень детализации.

В примере ниже показаны метрики работоспособности контейнера (размер рабочего набора), отображаемые в виде древовидной сетки. Узлы верхнего уровня, расположенные здесь, являются узлами Azure Kubernetes Service (AKS), следующим уровнем являются модули Pod, а окончательный уровень — контейнеры. Обратите внимание, что столбцы по-прежнему можно форматировать как в сетке (тепловой карты, значки, ссылки). Базовым источником данных в этом случае является Рабочая область Log Analytics с журналами AKS.

![Снимок экрана: представление сводки плиток](./media/workbooks-visualizations/trees.png)

### <a name="adding-a-tree-grid"></a>Добавление древовидной сетки
1. Переключите книгу в режим редактирования, щелкнув элемент панели инструментов _изменить_ .
2. Используйте ссылку **Добавить запрос** , чтобы добавить в книгу элемент управления "запрос журнала". 
3. Выберите тип запроса в поле **Журнал**, тип ресурса (например, Application Insights) и ресурсы для целевого объекта.
4. Использование редактора запросов для ввода ККЛ для анализа
    ```kusto
    requests
    | summarize Requests = count() by ParentId = appName, Id = name
    | extend Kind = 'Request', Name = strcat('🌐 ', Id)
    | union (requests
    | summarize Requests = count() by Id = appName
    | extend Kind = 'Request', ParentId = '', Name = strcat('📱 ', Id))
    | project Name, Kind, Requests, Id, ParentId
    | order by Requests desc
    ```
5. Задание представления в **виде сетки**
6. Нажмите кнопку « **Параметры столбца** », чтобы открыть панель «Параметры».
7. В разделе **дерево/группировка по параметрам** внизу задайте:
    * Тип дерева: `Parent/Child`
    * Поле идентификатора: `Id`
    * Поле родительского идентификатора: `ParentId`
    * Отображать расширитель в: `Name`
    * Развернуть верхний уровень дерева: `checked`
8. В верхней части раздела _Columns (столбцы_ ) задайте:
    * Модуль подготовки столбца _ID_ : `Hidden`
    * _Родительский идентификатор_ — модуль подготовки столбцов: `Hidden`
    * Модуль подготовки столбцов _запросов_ : `Bar`, Color: `Blue`, минимальное значение: `0`
9. Нажмите кнопку _сохранить и закрыть_ в нижней части панели.    

![Снимок экрана: представление сводки плиток](./media/workbooks-visualizations/tree-settings.png)

### <a name="tree-settings"></a>Параметры дерева

| Параметр | Пояснение |
|:------------- |:-------------|
| `Id Field` | Уникальный идентификатор каждой строки в сетке |
| `Parent Id Field` | Идентификатор родителя текущей строки |
| `Show the expander on` | Столбец, в котором должен отображаться расширитель дерева. В древовидных сетках можно скрыть поля идентификаторов и родительских идентификаторов, так как они не очень удобны для чтения. Вместо этого расширитель отображается в поле с более удобочитаемым значением, похожим на имя сущности. |
| `Expand the top level of the tree` | Если флажок установлен, сетка дерева будет развернута на верхнем уровне. Полезно, если требуется отображать дополнительные сведения по умолчанию |

## <a name="graphs"></a>Полосы

Книги поддерживают визуализацию произвольных графов на основе данных из журналов для отображения отношений между объектами мониторинга.

На приведенном ниже графе показаны данные, передаваемые из компьютера или из него через различные порты на внешние компьютеры. Он окрашивается по типу (компьютер или порт или внешний IP-адрес), а размеры краев соответствуют объему передаваемых данных. Базовые данные поступают из ККЛ запросов, предназначенных для подключений виртуальных машин.

![Снимок экрана: представление сводки плиток](./media/workbooks-visualizations/graph.png)

### <a name="adding-a-graph"></a>Добавление диаграммы
1. Переключите книгу в режим редактирования, щелкнув элемент панели инструментов _изменить_ .
2. Используйте ссылку **Добавить запрос** , чтобы добавить в книгу элемент управления "запрос журнала". 
3. Выберите тип запроса в поле **Журнал**, тип ресурса (например, Application Insights) и ресурсы для целевого объекта.
4. Использование редактора запросов для ввода ККЛ для анализа
    ```kusto
    let data = dependencies
    | summarize Calls = count() by App = appName, Request = operation_Name, Dependency = name
    | extend RequestId = strcat(App, '::', Request);
    let links = data
    | summarize Calls = sum(Calls) by App, RequestId
    | project SourceId = App, TargetId = RequestId, Calls, Kind = 'App -> Request'
    | union (data
        | project SourceId = RequestId, TargetId = Dependency, Calls, Kind = 'Request -> Dependency');
    let nodes = data
    | summarize Calls = sum(Calls) by App
    | project Id = App, Name = App, Calls, Kind = 'App'
    | union (data
        | summarize Calls = sum(Calls) by RequestId, Request
        | project Id = RequestId, Name = Request, Calls, Kind = 'Request')
    | union (data
        | summarize Calls = sum(Calls) by Dependency
        | project Id = Dependency, Name = Dependency, Calls, Kind = 'Dependency');
    nodes
    | union (links)
    ```
7. Установка **графа** визуализации
8. Нажмите кнопку **Graph Settings (параметры диаграммы** ), чтобы открыть панель Параметры.
9. В _полях макет_ в нижней части задайте:
    * `Node Id`: `Id`
    * `Source Id`: `SourceId`
    * `Target Id`: `TargetId`
    * `Edge Label`: `None`
    * `Edge Size`: `Calls`
    * `Node Size`: `None`
    * `Coloring Type`: `Categorical`
    * `Node Color Field`: `Kind`
    * `Color palette`: `Pastel`
10. В верхней части окна _Параметры формата узла_ задайте:
    * _Наибольшее содержимое_— используйте столбец: `Name`, модуль подготовки столбцов: `Text`
    * _Центрировать содержимое_— используйте столбец: `Calls`, модуль подготовки столбцов: `Big Number`, цветовая палитра: `None`
    * _Содержимое снизу_— используйте столбец: `Kind`, модуль подготовки столбцов: `Text`
10. Нажмите кнопку _сохранить и закрыть_ в нижней части панели.

![Снимок экрана: представление сводки плиток](./media/workbooks-visualizations/graph-settings.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Развертывание](workbooks-automate.md) книг с помощью Azure Resource Manager.
* [Управление](workbooks-access-control.md) доступом к ресурсам книги и предоставление общего доступа к ним.