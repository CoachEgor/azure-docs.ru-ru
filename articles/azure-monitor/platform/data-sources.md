---
title: Источники данных в Azure Monitor | Документация Майкрософт
description: Описывает данные, доступные для мониторинга работоспособности и производительности ресурсов Azure, а также выполняющихся на их базе приложений.
documentationcenter: ''
author: bwren
manager: carmonm
editor: tysonn
ms.service: azure-monitor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/23/2019
ms.author: bwren
ms.openlocfilehash: b77fb3ab5651147c59b9f0afd22a2d6d0159c90e
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66357488"
---
# <a name="sources-of-monitoring-data-for-azure-monitor"></a>Источники данных мониторинга для Azure Monitor
На основе Azure Monitor [общую платформу данных для мониторинга](data-platform.md) , включающий [журналы](data-platform-logs.md) и [метрики](data-platform-metrics.md). Сбор данных в этой платформе позволяет данные из нескольких ресурсов для анализа с помощью общего набора средств в Azure Monitor. Данные мониторинга также можно отправлять в другие расположения для поддержки некоторых сценариев, а некоторые ресурсы могут записывать в другие расположения, прежде чем они могут быть собраны в журналы или метрики.

В этой статье описываются различные источники данных, полученных службой Azure Monitor, в дополнение к данным мониторинга, создаваемые ресурсами Azure мониторинга. Приведены ссылки на подробные сведения о конфигурации, необходимые для включения сбора этих данных в другое место.

## <a name="application-tiers"></a>Уровни приложений

Источники данных мониторинга из приложения Azure могут быть организованы уровни, высоким уровнями самого приложения и более низкого уровня, что компоненты платформы Azure. Метод доступа к данным из каждого уровня зависит. В следующей таблице приведены уровни приложения и источников данных на каждом уровне мониторинга представлены в следующих разделах. См. в разделе [мониторинга расположения данных в Azure](data-locations.md) описание каждого расположения данных и как можно получить доступ к данным.


![Мониторинг уровней](../media/overview/overview.png)


### <a name="azure"></a>Таблицы Azure
В следующей таблице кратко описаны уровни приложения, относящиеся к Azure. Следующие ссылки для дальнейшего подробно на каждом в следующих разделах.

| Уровень | Описание | Метод сбора |
|:---|:---|:---|
| [Клиент Azure](#azure-tenant) | Данные об операциях служб Azure на уровне клиента (например, Azure Active Directory). | Просмотр данных AAD на портале или Настройка сбора данных в Azure Monitor с помощью параметра диагностики клиента. |
| [Подписка Azure.](#azure-subscription) | Данные, относящиеся к работоспособности служб и управления между ресурсами в подписке Azure, такие как диспетчер ресурсов и работоспособность служб. | Просмотреть на портале или Настройка сбора данных в Azure Monitor с помощью профиля журнала. |
| [Ресурсы Azure](#azure-resources) |  Данные о работу и производительность каждого ресурса Azure. | Собранные метрики автоматически, просмотр в обозревателе метрик.<br>Настройка параметров диагностики для сбора журналов в Azure Monitor.<br>Мониторинг решений и аналитики, доступной для более подробные сведения для отдельных типов ресурсов. |

### <a name="azure-other-cloud-or-on-premises"></a>Azure, другой облачной службе или на предприятии 
В следующей таблице кратко описаны уровни приложения, которые могут быть в Azure, другой облачной службе или локальной. Следующие ссылки для дальнейшего подробно на каждом в следующих разделах.

| Уровень | Описание | Метод сбора |
|:---|:---|:---|
| [Операционная система (Гость)](#operating-system-guest) | Данные об операционной системе на вычислительные ресурсы. | Установка агента Log Analytics для сбора источники данных клиента в Azure Monitor и зависимостей agent собирает зависимости, которые поддерживают Azure Monitor для виртуальных машин.<br>Для виртуальных машин Azure установите расширение диагностики Azure для сбора журналов и метрик в Azure Monitor. |
| [Код приложения](#application-code) | Данные о производительности и функциональных возможностей приложения и кодом, включая трассировки производительности, журналы приложений и данных телеметрии пользователя. | Инструментирование кода для сбора данных в Application Insights. |
| [Пользовательские источники](#custom-sources) | Данные из внешних служб или другими компонентами или устройствами. | Сбор данных метрики или журнала в Azure Monitor с любого клиента REST. |

## <a name="azure-tenant"></a>Клиент Azure
Данные телеметрии, связанные с клиентом Azure, собираются из служб на уровне клиента, таких как Azure Active Directory.

![Сбор клиентов Azure](media/data-sources/tenant.png)

### <a name="azure-active-directory-audit-logs"></a>Журналы аудита Azure Active Directory
[Отчеты Azure Active Directory](../../active-directory/reports-monitoring/overview-reports.md) включают в себя журнал действий входа и журнал аудита изменений, внесенных в пределах конкретного клиента. 

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Журналы Azure Monitor | Настройка Azure AD журналов, собираемых в Azure Monitor для анализа с другими данными мониторинга. | [Интеграция журналов Azure AD с помощью журналов Azure Monitor (Предварительная версия)](../../active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics.md) |
| Хранилище Azure | Экспортируйте журналы Azure AD в службу хранилища Azure для архивирования. | [Учебник. Архивация журналов Azure AD для учетной записи хранения Azure (Предварительная версия)](../../active-directory/reports-monitoring/quickstart-azure-monitor-route-logs-to-storage-account.md) |
| Концентратор событий | Stream журналы Azure AD в другие расположения, с помощью концентраторов событий. | [Учебник. Stream журналов Azure Active Directory в концентратор событий Azure (Предварительная версия)](../../active-directory/reports-monitoring/tutorial-azure-monitor-stream-logs-to-event-hub.md). |



## <a name="azure-subscription"></a>Подписка Azure.
Данные телеметрии, относящиеся к работоспособности и операциях подписки Azure.

![Подписка Azure.](media/data-sources/azure-subscription.png)

### <a name="azure-activity-log"></a>Журнал действий Azure 
[Журнал действий Azure](activity-logs-overview.md) включает в себя записи работоспособности службы вместе с записями обо всех изменениях конфигурации, внесенные в ресурсы в подписке Azure. Журнал действий доступен всем ресурсам Azure и является их _внешним_ представлением.

| Место назначения | Описание | Справочные материалы |
|:---|:---|
| Журнал действий | Журнал действий собираются в собственное хранилище данных, которые можно просмотреть в меню Azure Monitor или использовать для создания оповещения журнала действий. | [Запрос журнала действий на портале Azure](activity-log-view.md#azure-portal) |
| Журналы Azure Monitor | Настройка журналов Azure Monitor, чтобы собирать журнал действий, чтобы проанализировать их с другими данными мониторинга. | [Сбор и анализ журналов действий Azure в рабочую область Log Analytics в Azure Monitor](activity-log-collect.md) |
| Хранилище Azure | Экспорт журнала действий в службе хранилища Azure для архивирования. | [Архивация журнала действий](activity-log-export.md#archive-activity-log)  |
| Центры событий; | Stream в другие расположения, с помощью концентраторов событий журнала действий | [Журнал действий Stream в концентратор событий](activity-log-export.md#stream-activity-log-to-event-hub). |

### <a name="azure-service-health"></a>Работоспособность служб Azure
[Работоспособность служб Azure](../../service-health/service-health-overview.md) предоставляет сведения о работоспособности служб Azure в вашей подписке, используемых приложением и ресурсами.

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Журнал действий<br>Журналы Azure Monitor | Записи работоспособности службы хранятся в журнале действий Azure, поэтому можно просматривать их на портале Azure или выполнять другие действия, которые можно выполнять с помощью журнала действий. | [Просмотр уведомлений о работоспособности служб на портале Azure](service-notifications.md) |


## <a name="azure-resources"></a>Ресурсы Azure
Метрики и журналы диагностики по уровням ресурсов содержат сведения о _внутренних_ операциях с ресурсами Azure. Они доступны для большинства служб Azure и мониторинга решения и insights собирать дополнительные данные для определенных служб.

![Коллекция ресурсов Azure](media/data-sources/azure-resources.png)


### <a name="platform-metrics"></a>На основе метрик платформы 
Большинство служб Azure будет отправлять [на основе метрик платформы](data-platform-metrics.md) , отражают их производительность и операции непосредственно к базе данных метрик. Конкретные [метрики зависят от типа ресурса](metrics-supported.md). 

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Метрики Azure Monitor | На основе метрик платформы будет записывать в базу данных метрик Azure Monitor без дополнительной настройки. Доступ к метрикам платформы из обозревателя метрик.  | [Приступая к работе с обозревателем метрик Azure](metrics-getting-started.md)<br>[Метрики, поддерживаемые Azure Monitor](metrics-supported.md) |
| Журналы Azure Monitor | Скопируйте журналы на основе метрик платформы для анализа тенденций и анализа, с помощью Log Analytics. | [Направление диагностики Azure в Log Analytics](collect-azure-metrics-logs.md#azure-diagnostics-direct-to-log-analytics) |
| Центры событий; | Метрики Stream в другие расположения, с помощью концентраторов событий. |[Потоковая передача данных мониторинга Azure в концентратор событий для потребления внешним инструментом](stream-monitoring-data-event-hubs.md) |

### <a name="diagnostic-logs"></a>Журналы диагностики
[Журналы диагностики](diagnostic-logs-overview.md) получить представление о _внутренней_ операции ресурса Azure.  Журналы диагностики не включены по умолчанию. Необходимо включить их и укажите место назначения для каждого ресурса. 

Требования к конфигурации и содержимого журналов диагностики зависят от типа ресурса, а не все службы еще создаются журналы диагностики. См. в разделе [поддерживаемые службы, схемы и категории для журналов диагностики Azure](diagnostic-logs-schema.md) Дополнительные сведения о каждой службы и ссылки на процедуры подробную конфигурацию. Если служба отсутствует в этой статье, затем этой службе не запись в настоящее время журналы диагностики.

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Журналы Azure Monitor | Отправьте журналы диагностики для журналов Azure Monitor для анализа с другими собранные данные журнала. Некоторые ресурсы можно записать непосредственно в Azure Monitor, во время другие записи в учетную запись хранения перед импортом в рабочую область Log Analytics. | [Stream журналов диагностики в рабочую область Log Analytics в Azure Monitor](diagnostic-logs-stream-log-store.md)<br>[Для сбора журналов из хранилища Azure с помощью портала Azure](azure-storage-iis-table.md#use-the-azure-portal-to-collect-logs-from-azure-storage)  |
| Хранилище | Отправлять диагностические журналы в службу хранилища Azure для архивирования. | [Архивация журналов диагностики Azure](archive-diagnostic-logs.md) |
| Центры событий; | Журналы диагностики Stream в другие расположения, с помощью концентраторов событий. |[Stream журналов диагностики в концентратор событий](diagnostic-logs-stream-event-hubs.md) |

## <a name="operating-system-guest"></a>Операционная система (Гость)
Вычислительные ресурсы в Azure, других облаках и локальной среде имеют гостевую операционную систему для мониторинга. При установке одного или нескольких агентов вы можете собирать данные телеметрии из гостевой в Azure Monitor, чтобы проанализировать их с помощью тех же средств мониторинга, как сами службы Azure.

![Коллекция вычислительных ресурсов Azure](media/data-sources/compute-resources.png)

### <a name="azure-diagnostic-extension"></a>Расширение системы диагностики Azure
Включение расширения диагностики Azure для виртуальных машин Azure можно сбор журналов и метрики из гостевой ОС Azure вычислительные ресурсы, включая веб-облачной службы Azure (Классическая модель) и рабочих ролей, виртуальных машин, виртуальной машины масштабируемые наборы и Service Fabric.

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Хранилище | При включении расширения системы диагностики, он будет выполнять запись учетной записи хранения по умолчанию. | [Хранение и просмотр диагностических данных в службе хранилища Azure](diagnostics-extension-to-storage.md) |
| Метрики Azure Monitor | При настройке расширения диагностики для сбора данных счетчиков производительности, они записываются в базу данных метрик Azure Monitor. | [Отправка метрики гостевой ОС Azure Monitor метрики из магазина с помощью шаблона Resource Manager для виртуальной машины Windows](collect-custom-metrics-guestos-resource-manager-vm.md) |
| Журналы в Application Insights | Сбор журналов и счетчиков производительности от вычислительных ресурсов, поддержка приложения для анализа с другими данными приложения. | [Отправка диагностических данных облачной службы, виртуальной машины или Service Fabric в Application Insights](diagnostics-extension-to-application-insights.md) |
| Центры событий; | Настройка расширения системы диагностики для потоковой передачи данных в другие расположения, с помощью концентраторов событий.  | [Потоковая передача данных системы диагностики Azure по критическому пути с помощью концентраторов событий](diagnostics-extension-stream-event-hubs.md) |

### <a name="log-analytics-agent"></a>Агент Log Analytics 
Установка агента Log Analytics для мониторинга и управление виртуальными машинами Windows или Linux. Виртуальная машина может работать в Azure, другом облаке или в локальной среде.

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Журналы Azure Monitor | Агент Log Analytics подключается к Azure отслеживать напрямую или с помощью System Center Operations Manager и позволяет собирать данные из источников данных, которые можно настроить или решения, которые предоставляют дополнительные функции анализа в приложения для мониторинга запущена на виртуальной машине. | [Агент источников данных в Azure Monitor](agent-data-sources.md)<br>[Подключение Operations Manager к Azure Monitor](om-agents.md) |


### <a name="azure-monitor-for-vms"></a>Azure Monitor для виртуальных машин 
[Azure Monitor для виртуальных машин](../insights/vminsights-overview.md) предоставляет персонализированную поддержку мониторинга для виртуальных машин, предоставляя функции, помимо базовых возможностей Azure Monitor, включая состояние службы, а также работоспособность виртуальной Машины. Требуется агент зависимостей на виртуальных машинах Windows и Linux, который интегрируется с агентом Log Analytics для сбора обнаруженные данные о процессах, запущенных на виртуальной машине и зависимости внешний процесс.

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Журналы Azure Monitor | Сохраняет данные о процессах и зависимостей на агенте. | [С помощью Azure Monitor для виртуальных машин сопоставляются основные сведения о компонентах приложений (Предварительная версия)](../insights/vminsights-maps.md) |
| Хранилище виртуальной Машины | Azure Monitor для виртуальных машин хранятся сведения о состоянии работоспособности в настраиваемом расположении. Доступно только в Azure Monitor для виртуальных машин на портале Azure в дополнение к [REST API работоспособности ресурсов Azure](/rest/api/resourcehealth/). | [Оценки состояния работоспособности виртуальных машин Azure](../insights/vminsights-health.md)<br>[Azure REST API работоспособности ресурсов](https://docs.microsoft.com/rest/api/resourcehealth/) |



## <a name="application-code"></a>Код приложения
О приложении, мониторинг в Azure Monitor осуществляется с помощью [Application Insights](https://docs.microsoft.com/azure/application-insights/) осуществляет сбор данных из приложений, работающих на различных платформах. Приложение может выполняться в Azure, другом облаке или локальной среде.

![Сбор данных приложения](media/data-sources/applications.png)


### <a name="application-data"></a>Данные приложения
Когда вы включаете службу Application Insights для приложения, установив пакет инструментирования, она собирает метрики и журналы, относящиеся к производительности и операциям приложения. Application Insights сохраняет собранные данные в одной платформе данных Azure Monitor, использовать для других источников данных. Он включает в себя мощные средства для анализа таких данных, но их также можно анализировать с данными из других источников, с помощью средства, такие как обозреватель метрик и Log Analytics.

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Журналы Azure Monitor | С операционными данными о своем приложении, включая просмотры страниц, запросы приложений, исключений и трассировки. | [Анализируйте данные журналов в Azure Monitor](../log-query/log-query-overview.md) |
|                    | Сведения о зависимостях между компонентами приложения для поддержки сопоставления приложения и корреляция данных телеметрии. | [Корреляция данных телеметрии в Application Insights](../app/correlation.md) <br> [Схема сопоставления приложений](../app/app-map.md) |
|            | Результаты тестов доступности, проверить доступность и скорость реагирования приложения из разных мест в общедоступном Интернете. | [Мониторинг доступности и скорости реагирования любого веб-сайта](../app/monitor-web-app-availability.md) |
| Метрики Azure Monitor | Application Insights собирает метрики, описывающие производительность и операции приложения в дополнение к настраиваемых метрик, можно определить в вашем приложении в базу данных метрик Azure Monitor. | [Журнал и на основе предварительно вычисленных метрик в Application Insights](../app/pre-aggregated-metrics-log-metrics.md)<br>[API Application Insights для пользовательских событий и метрик](../app/api-custom-events-metrics.md) |
| Хранилище Azure | Отправьте данные приложения в службу хранилища Azure для архивирования. | [Экспорт данных телеметрии из Application Insights](../app/export-telemetry.md) |
|            | Сведения о доступности тестов хранятся в службе хранилища Azure. Используйте Application Insights на портале Azure, чтобы загрузить для локального анализа. Результаты тестов доступности, хранятся в журналов Azure Monitor. | [Мониторинг доступности и скорости реагирования любого веб-сайта](../app/monitor-web-app-availability.md) |
|            | Данные трассировки Profiler хранятся в службе хранилища Azure. Используйте Application Insights на портале Azure, чтобы загрузить для локального анализа.  | [Профиль рабочих приложений в Azure с помощью Application Insights](../app/profiler-overview.md) 
|            | Отладка моментального снимка данных, собранных для подмножества исключений хранится в службе хранилища Azure. Используйте Application Insights на портале Azure, чтобы загрузить для локального анализа.  | [Как работают моментальные снимки](../app/snapshot-debugger.md#how-snapshots-work) |

## <a name="monitoring-solutions-and-insights"></a>Решения для мониторинга и аналитики
[Мониторинг решений](../insights/solutions.md) и [Insights](../insights/insights-overview.md) сбора данных для предоставления дополнительных сведений о работе определенной службы или приложения. Они могут адресации ресурсов в разные уровни приложения и даже нескольких уровней.

### <a name="monitoring-solutions"></a>Решения для мониторинга

| Место назначения | Описание | Справочные материалы
|:---|:---|:---|
| Журналы Azure Monitor | Решения для мониторинга сбора данных в Azure Monitor журналы где может быть проанализированы с помощью языка запросов или [представления](view-designer.md) обычно входящие в решении. | [Сведения о сборе данных для мониторинга решений в Azure](../insights/solutions-inventory.md) |


### <a name="azure-monitor-for-containers"></a>Azure Monitor для контейнеров
[Azure Monitor для контейнеров](../insights/container-insights-overview.md) предоставляет настраиваемые возможности мониторинга для [службы Azure Kubernetes (AKS)](/azure/aks/). Он собирает дополнительные данные об этих ресурсов, описанных в следующей таблице.

| Место назначения | Описание | Справочные материалы |
|:---|:---|:---|
| Журналы Azure Monitor | Хранит данные мониторинга для AKS, включая инвентаризации, журналы и события. Данные метрик также хранящихся в журналах, чтобы использовать его функции анализа на портале. | [Общие сведения о производительности кластера AKS с Azure Monitor для контейнеров](../insights/container-insights-analyze.md) |
| Метрики Azure Monitor | Данные метрик хранятся в базе данных метрик для диска визуализация и оповещения. | [Просмотр метрик контейнера в обозревателе метрик](../insights/container-insights-analyze.md#view-container-metrics-in-metrics-explorer) |
| Служба Azure Kubernetes | В порядке к практически реальном времени при использовании Azure Monitor для контейнеров представляет данные непосредственно из службы Kubernetes в Azure на портале Azure. | [Как представить журналы контейнеров в реальном времени с помощью службы "Azure Monitor для контейнеров" (предварительная версия)](../insights/container-insights-live-logs.md) |

### <a name="azure-monitor-for-vms"></a>Azure Monitor для виртуальных машин
[Azure Monitor для виртуальных машин](../insights/vminsights-overview.md) предоставляет настраиваемую среду для мониторинга виртуальных машин. Описание данных, полученных службой Azure Monitor для виртуальных машин включена в [операционной системы (Гость)](#operating-system-guest) предыдущем разделе.

## <a name="custom-sources"></a>Пользовательские источники
В дополнение к стандартным уровням приложения вам может потребоваться отслеживать другие ресурсы, имеющие данные телеметрии, которые невозможно собрать через другие источники данных. Для этих ресурсов записи этих данных для метрик или журналов с помощью API Azure Monitor.

![Пользовательская коллекция](media/data-sources/custom.png)

| Место назначения | Метод | Описание | Справочные материалы |
|:---|:---|:---|:---|
| Журналы Azure Monitor | API сборщика данных | Собирать данные журналов из любого клиента REST и сохраните в рабочей области Log Analytics. | [Отправлять данные журнала в Azure Monitor с помощью API сборщика данных HTTP (общедоступная Предварительная версия)](data-collector-api.md) |
| Метрики Azure Monitor | Настраиваемые метрики API | Сбор данных метрик из любого клиента REST и хранилище в базе данных метрик Azure Monitor. | [Отправка пользовательских метрик для ресурса Azure в хранилище данных метрик Azure Monitor с помощью REST API](metrics-store-custom-rest-api.md) |


## <a name="other-services"></a>Другие службы
Другие службы в Azure запись данных с платформой данных Azure Monitor. Это позволяет анализировать данные, собранные этим службам с помощью данных, полученных службой Azure Monitor и использовать же анализа и средства визуализации.

| Service | Место назначения | Описание | Справочные материалы |
|:---|:---|:---|:---|
| [Центр безопасности Azure](/azure/security-center/) | Журналы Azure Monitor | Центр безопасности Azure хранятся данные безопасности, собранные в рабочей области Log Analytics, что обеспечивает для анализа с другими данными журнала, полученных службой Azure Monitor.  | [Сбор данных в Центре безопасности Azure](../../security-center/security-center-enable-data-collection.md) |
| [Azure Sentinel](/azure/sentinel/) | Журналы Azure Monitor | Azure Sentinel сохраняет данные, полученные из различных источников данных в рабочей области Log Analytics, что обеспечивает для анализа с другими данными журнала, полученных службой Azure Monitor.  | [Подключение источников данных](/azure/sentinel/quickstart-onboard) |


## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о типах данных мониторинга, собранных Azure Monitor, и о том, как просматривать и анализировать эти данные, см. в статье [Сбор данных мониторинга в Azure](data-platform.md).
- Список [разных местах, где Azure ресурсы хранения данных](data-locations.md) и как вы сможете открыть его. 
