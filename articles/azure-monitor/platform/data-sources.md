---
title: Источники данных в Azure Monitor | Документация Майкрософт
description: Описывает данные, доступные для мониторинга работоспособности и производительности ресурсов Azure, а также выполняющихся на их базе приложений.
documentationcenter: ''
author: bwren
manager: carmonm
editor: tysonn
ms.service: azure-monitor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/13/2018
ms.author: bwren
ms.openlocfilehash: 6d03c219025c8cd39214bd8ab6807125709f9742
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60235944"
---
# <a name="sources-of-data-in-azure-monitor"></a>Источники данных в Azure Monitor
В этой статье описываются источники данных, собранные Azure Monitor для мониторинга работоспособности и производительности ваших ресурсов, а также выполняющихся на их базе приложений. Эти ресурсы могут находиться в Azure, в другом облаке или в локальной среде.  Подробную информацию о том, как эти данные хранятся и как вы можете их просматривать, см. в разделе [Сбор данных мониторинга в Azure](data-platform.md).

Данные мониторинга в Azure поступают из различных источников, которые можно упорядочить по уровням, где верхним является уровень приложения и любых операционных систем, а нижним — уровень компонентов платформы Azure. Эта концепция проиллюстрирована на следующей схеме, а каждый из уровней подробно описан в разделах ниже.

[!INCLUDE [azure-monitor-log-analytics-rebrand](../../../includes/azure-monitor-log-analytics-rebrand.md)]

![Уровни данных мониторинга](media/data-sources/monitoring-tiers.png)

## <a name="azure-tenant"></a>Клиент Azure
Данные телеметрии, связанные с клиентом Azure, собираются из служб на уровне клиента, таких как Azure Active Directory.

![Сбор клиентов Azure](media/data-sources/tenant-collection.png)

### <a name="azure-active-directory-audit-logs"></a>Журналы аудита Azure Active Directory
[Отчеты Azure Active Directory](../../active-directory/reports-monitoring/overview-reports.md) включают в себя журнал действий входа и журнал аудита изменений, внесенных в пределах конкретного клиента. Эти журналы аудита могут записываться в журналы Azure Monitor для анализа с другими данными журнала.


## <a name="azure-platform"></a>Платформа Azure
Телеметрия, связанная с работоспособностью и работой самой платформы Azure, включает в себя данные об операциях и управлении подпиской Azure. Она включает в себя данные о работоспособности служб, хранящиеся в журнале действий Azure и журналах аудита из Azure Active Directory.

![Сбор подписок Azure](media/data-sources/azure-collection.png)

### <a name="azure-service-health"></a>Работоспособность служб Azure
[Работоспособность служб Azure](service-notifications.md) предоставляет сведения о работоспособности служб Azure в вашей подписке, используемых приложением и ресурсами. Вы можете создать оповещения, чтобы получать уведомления о текущих и ожидаемых критических проблемах, которые могут затронуть ваше приложение. Записи работоспособности служб сохраняются в [журнале действий Azure](activity-logs-overview.md), чтобы вы могли просматривать их в обозревателе журналов действий и копировать в журналы Azure Monitor.

### <a name="azure-activity-log"></a>Журнал действий Azure
[Журнал действий Azure](activity-logs-overview.md) включает в себя записи работоспособности служб, а также записи о любых изменениях конфигурации, внесенных для ресурсов Azure. Журнал действий доступен всем ресурсам Azure и является их _внешним_ представлением. Конкретные типы записей в журнале действий описаны в [схеме событий журнала действий Azure](activity-log-schema.md).

Вы можете просматривать журнал действий для определенного ресурса на его странице на портале Azure или журналы из нескольких ресурсов в [обозревателе журналов действий](activity-logs-overview.md). Это особенно удобно для копирования записей журналов в Azure Monitor для объединения с другими данными мониторинга. Вы также можете отправлять их в другие расположения с помощью [Центров событий](activity-logs-stream-event-hubs.md).



## <a name="azure-services"></a>Службы Azure
Метрики и журналы диагностики по уровням ресурсов содержат сведения о _внутренних_ операциях с ресурсами Azure. Они доступны для большинства служб Azure, а решения по управлению предоставляют дополнительные сведения о конкретных службах.

![Коллекция ресурсов Azure](media/data-sources/azure-resource-collection.png)


### <a name="metrics"></a>Метрики
Большинство служб Azure будут генерировать [метрики платформы](data-platform-metrics.md), отражающие их производительность и операции. Конкретные [метрики зависят от типа ресурса](metrics-supported.md).  Они доступны в аналитике метрик и могут быть скопированы в журналы для выявления тенденций и другого анализа с помощью Log Analytics.


### <a name="resource-diagnostic-logs"></a>Журналы диагностики ресурсов
Хотя журнал действий содержит сведения об операциях с ресурсами Azure, [журналы диагностики](diagnostic-logs-overview.md) по уровням ресурсов предоставляют сведения о работе самого ресурса.   Требования к конфигурации и содержимое этих журналов [зависит от типа ресурса](diagnostic-logs-schema.md).

Вы не можете просматривать журналы диагностики непосредственно на портале Azure, но можете [отправлять их в службу хранилища Azure для архивации](archive-diagnostic-logs.md) и экспортировать их в [концентратор событий](../../event-hubs/event-hubs-about.md) для перенаправления в другие службы либо в [Azure Monitor](diagnostic-logs-stream-log-store.md) для анализа. Некоторые ресурсы могут выполнять запись непосредственно в Log Analytics, а другие записывают данные в учетную запись хранения перед их [импортом в Azure Monitor](azure-storage-iis-table.md#use-the-azure-portal-to-collect-logs-from-azure-storage).

### <a name="monitoring-solutions"></a>Решения для мониторинга
 [Решения для мониторинга](../../azure-monitor/insights/solutions.md) собирают данные, чтобы получить дополнительные аналитические сведения о работе конкретной службы или приложения. Они собирают данные в журналы Azure Monitor, где их можно проанализировать с помощью [языка запросов](../../azure-monitor/log-query/log-query-overview.md) или [представлений](view-designer.md), которые обычно включены в решение.


## <a name="guest-operating-system"></a>Операционная система на виртуальной машине
Вычислительные ресурсы в Azure, других облаках и локальной среде имеют гостевую операционную систему для мониторинга. Установив один или несколько агентов, вы можете собирать данные телеметрии из гостевой ОС и передавать их в те же средства мониторинга, что и сами службы Azure.

![Коллекция вычислительных ресурсов Azure](media/data-sources/compute-resource-collection.png)

### <a name="azure-diagnostic-extension"></a>Расширение системы диагностики Azure
Расширение системы диагностики Azure обеспечивает базовый уровень мониторинга путем сбора журналов и данных о производительности из клиентской операционной системы вычислительных ресурсов Azure.   

### <a name="log-analytics-agent"></a>Агент Log Analytics
Комплексный мониторинг и управление виртуальными машинами Windows или Linux или физическими компьютерами обеспечивается с помощью агента Log Analytics. Виртуальная машина может работать в Azure, другом облаке или локальной среде. Агент подключается к Azure Monitor либо напрямую, либо через System Center Operations Manager и позволяет собирать данные из настроенных [источников данных](agent-data-sources.md) или [решений мониторинга](../../azure-monitor/insights/solutions.md), которые предоставляют дополнительные сведения о приложениях, выполняемых на виртуальной машине.


### <a name="dependency-agent"></a>Агент зависимостей
[Сопоставление служб](../insights/service-map.md) и [Azure Monitor для виртуальных машин](../../azure-monitor/insights/vminsights-overview.md) требует наличия Dependency Agent на виртуальных машинах Windows и Linux. Это решение интегрируется с агентом Log Analytics для сбора выявленных данных о процессах, запущенных на виртуальной машине, и зависимостях от внешних процессов. Оно сохраняет эти данные в Azure Monitor и визуализирует обнаруженные взаимосвязанные компоненты.  

Дополнительные сведения о различиях между агентами мониторинга и о том, какие агенты использовать в зависимости от требований мониторинга, см. в [этой статье](agents-overview.md).

## <a name="applications"></a>ПРИЛОЖЕНИЯ
Кроме данных телеметрии, которые приложение может записывать в гостевую операционную систему, подробный мониторинг приложений осуществляется с помощью [Application Insights](https://docs.microsoft.com/azure/application-insights/). Application Insights может собирать данные из приложений, работающих на различных платформах. Приложение может выполняться в Azure, другом облаке или локальной среде.

![Сбор данных приложения](media/data-sources/application-collection.png)


### <a name="application-data"></a>Данные приложения
Когда вы включаете службу Application Insights для приложения, установив пакет инструментирования, она собирает метрики и журналы, относящиеся к производительности и операциям приложения. Сюда входят подробные сведения о просмотрах страниц, запросах приложений и исключениях. Служба Application Insights сохраняет собранные данные в Azure Monitor. Она обладает эффективными средствами для анализа этих данных, но вы можете анализировать их вместе с данными из других источников, используя такие средства, как аналитика метрик и Log Analytics.

Вы также можете использовать Application Insights для [создания пользовательских метрик](../../application-insights/app-insights-api-custom-events-metrics.md).  Это позволяет определить собственную логику для вычисления числового значения и последующего сохранения этого значения с другими метриками, которые можно просмотреть из аналитик метрики и использовать для [автомасштабирования](autoscale-custom-metric.md) и оповещений метрик.


### <a name="dependencies"></a>Зависимости
Для наблюдения за различными логическими операциями приложения нужно [собирать данные телеметрии по нескольким компонентам](../../application-insights/app-insights-transaction-diagnostics.md). Application Insights поддерживает [распределенную корреляцию телеметрии](../../application-insights/application-insights-correlation.md), определяющую зависимости между компонентами, что позволяет анализировать их совместно.

### <a name="availability-tests"></a>Тесты доступности
[Тесты доступности](../../application-insights/app-insights-monitor-web-app-availability.md) в Application Insights позволяют протестировать доступность и скорость реагирования приложения из разных расположений в общедоступном Интернете. Вы можете выполнить простую проверку связи, чтобы убедиться, что приложение активно, или воспользоваться Visual Studio для создания веб-теста, имитирующего пользовательский сценарий.  Тесты доступности не требуют никакого инструментирования в приложении.

## <a name="custom-sources"></a>Пользовательские источники
В дополнение к стандартным уровням приложения вам может потребоваться отслеживать другие ресурсы, имеющие данные телеметрии, которые невозможно собрать через другие источники данных. Для этих ресурсов вам необходимо записать данные с помощью API Azure Monitor.

![Сбор пользовательских данных](media/data-sources/custom-collection.png)

### <a name="data-collector-api"></a>API сборщика данных
Azure Monitor может собирать данные журналов из любого клиента REST с помощью [API сборщика данных](../../azure-monitor/platform/data-collector-api.md). Это позволяет создавать пользовательские сценарии мониторинга и подвергать мониторингу ресурсы, которые не предоставляют данные телеметрии через другие источники.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о типах данных мониторинга, собранных Azure Monitor, и о том, как просматривать и анализировать эти данные, см. в статье [Сбор данных мониторинга в Azure](data-platform.md).
