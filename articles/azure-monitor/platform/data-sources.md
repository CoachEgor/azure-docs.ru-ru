---
title: Источники данных в Azure Monitor | Документация Майкрософт
description: Описывает данные, доступные для мониторинга работоспособности и производительности ресурсов Azure, а также выполняющихся на их базе приложений.
ms.subservice: ''
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 12/19/2019
ms.openlocfilehash: d1c0652844556b545cf0617032d21b80dd67d198
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79479847"
---
# <a name="sources-of-monitoring-data-for-azure-monitor"></a>Источники данных мониторинга для Azure Monitor
Azure Monitor основан на [общей платформе мониторинга данных,](data-platform.md) которая включает [журналы](data-platform-logs.md) и [метрики.](data-platform-metrics.md) Сбор данных в этой платформе позволяет анализировать данные из нескольких ресурсов с помощью общего набора инструментов в Azure Monitor. Данные мониторинга также могут быть отправлены в другие места для поддержки определенных сценариев, и некоторые ресурсы могут записываться в другие места, прежде чем они могут быть собраны в журналы или метрики.

В этой статье описаны различные источники данных мониторинга, собранные Azure Monitor в дополнение к данным мониторинга, созданным ресурсами Azure. Предоставляются ссылки на подробную информацию о конфигурации, необходимой для сбора этих данных в разных местах.

## <a name="application-tiers"></a>Уровни приложений

Источники мониторинга данных из приложений Azure могут быть организованы в уровни, самые высокие уровни — само приложение, а нижние уровни — компоненты платформы Azure. Метод доступа к данным с каждого уровня разнятся. Уровни приложений обобщены в таблице ниже, а источники данных мониторинга в каждом уровне представлены в следующих разделах. Ознакомьтесь с [местоположениями данных мониторинга в Azure](data-locations.md) для описания каждого местоположения данных и того, как можно получить доступ к его данным.


![Уровни мониторинга](../media/overview/overview.png)


### <a name="azure"></a>Azure
В следующей таблице кратко описаны уровни приложений, характерные для Azure. После ссылки для получения дополнительной информации о каждом из разделов ниже.

| Уровень | Описание | Метод сбора |
|:---|:---|:---|
| [Лазурный арендатор](#azure-tenant) | Данные об операциях служб Azure на уровне клиента (например, Azure Active Directory). | Просмотр данных AAD на портале или настройка сбора в Azure Monitor с помощью диагностической настройки клиента. |
| [Подписка Azure.](#azure-subscription) | Данные, связанные с работоспособностью и управлением межресурсными службами в подписке Azure, такими как менеджер ресурсов и служба здоровья. | Просмотр на портале или настройка коллекции в Azure Monitor с помощью профиля журнала. |
| [Ресурсы Azure](#azure-resources) |  Данные об эксплуатации и производительности каждого ресурса Azure. | Метрики, собранные автоматически, просматривают в Metrics Explorer.<br>Настроили диагностические настройки для сбора журналов в Azure Monitor.<br>Решения мониторинга и исследования доступны для более детального мониторинга для конкретных типов ресурсов. |

### <a name="azure-other-cloud-or-on-premises"></a>Azure, другое облако или на месте 
В следующей таблице кратко описаны уровни приложений, которые могут быть в Azure, другом облаке или в предварительном помещении. После ссылки для получения дополнительной информации о каждом из разделов ниже.

| Уровень | Описание | Метод сбора |
|:---|:---|:---|
| [Операционная система (гость)](#operating-system-guest) | Данные об операционной системе на вычислительных ресурсах. | Установка агента Log Analytics для сбора источников клиентских данных в azure Monitor и агент зависимости для сбора зависимостей, поддерживающих Azure Monitor для VMs.<br>Для виртуальных машин Azure установите Azure Diagnostic Extension для сбора журналов и метрик в Azure Monitor. |
| [Код применения](#application-code) | Данные о производительности и функциональности фактического приложения и кода, включая следы производительности, журналы приложений и телеметрию пользователя. | Инструмент код для сбора данных в Application Insights. |
| [Пользовательские источники](#custom-sources) | Данные из внешних служб или других компонентов или устройств. | Соберите данные журналов или метрик в Azure Monitor от любого клиента REST. |

## <a name="azure-tenant"></a>Клиент Azure
Данные телеметрии, связанные с клиентом Azure, собираются из служб на уровне клиента, таких как Azure Active Directory.

![Сбор клиентов Azure](media/data-sources/tenant.png)

### <a name="azure-active-directory-audit-logs"></a>Журналы аудита Azure Active Directory
[Отчеты Azure Active Directory](../../active-directory/reports-monitoring/overview-reports.md) включают в себя журнал действий входа и журнал аудита изменений, внесенных в пределах конкретного клиента. 

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Журналы Azure Monitor | Найдите журналы Azure AD для сбора в Azure Monitor для их анализа с помощью других данных мониторинга. | [Интеграция журналов Azure AD с журналами Azure Monitor (предварительная версия)](../../active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics.md) |
| Хранилище Azure | Экспорт журналов Azure AD в хранилище Azure для архивирования. | [Руководство: архивация журналов Azure AD в учетную запись хранения Azure (предварительная версия)](../../active-directory/reports-monitoring/quickstart-azure-monitor-route-logs-to-storage-account.md) |
| Концентратор событий | Поток журналов Azure AD в другие места с помощью концентраторов событий. | [Учебник: Поток журналов активного каталога Stream Azure в концентратор событий Azure (предварительный просмотр)](../../active-directory/reports-monitoring/tutorial-azure-monitor-stream-logs-to-event-hub.md). |



## <a name="azure-subscription"></a>Подписка Azure.
Телеметрия, связанная с работоспособностью и работой подписки Azure.

![Подписка Azure.](media/data-sources/azure-subscription.png)

### <a name="azure-activity-log"></a>Журнал действий Azure 
[В журнал Azure Activity](platform-logs-overview.md) есть записи работоспособности служб, а также записи о любых изменениях конфигурации, внесенных в ресурсы подписки Azure. Журнал действий доступен всем ресурсам Azure и является их _внешним_ представлением.

| Назначение | Описание | Справочник |
|:---|:---|
| Журнал действий | Журнал активности собирается в свой собственный хранилище данных, который можно просмотреть из меню Azure Monitor или использовать для создания оповещений журнала активности. | [Запрос входа в журнал activity на портале Azure](activity-log-view.md#azure-portal) |
| Журналы Azure Monitor | Найдите журналы мониторинга Azure для сбора журнала activity для анализа других данных мониторинга. | [Сбор и анализ журналов активности Azure в рабочем пространстве журнала Analytics в Azure Monitor](activity-log-collect.md) |
| Хранилище Azure | Экспорт журнала активности в Хранилище Azure для архивирования. | [Архивная деятельность журнал](resource-logs-collect-storage.md)  |
| Центры событий | Поток журнала активности в другие места с помощью концентраторов событий | [Поток журнала активности в концентратор событий](resource-logs-stream-event-hubs.md). |

### <a name="azure-service-health"></a>Работоспособность служб Azure
[Работоспособность служб Azure](../../service-health/service-health-overview.md) предоставляет сведения о работоспособности служб Azure в вашей подписке, используемых приложением и ресурсами.

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Журнал действий<br>Журналы Azure Monitor | Записи работоспособности службы хранятся в журнале деятельности Azure, поэтому их можно просматривать на портале Azure или выполнять любые другие действия, которые можно выполнить с журналом activity. | [Просмотр уведомлений о работоспособности служб на портале Azure](service-notifications.md) |


## <a name="azure-resources"></a>Ресурсы Azure
Метрики и журналы ресурсов предоставляют информацию о _внутренней_ работе ресурсов Azure. Они доступны для большинства служб Azure, а решения мониторинга и идеи собирают дополнительные данные для конкретных служб.

![Коллекция ресурсов Azure](media/data-sources/azure-resources.png)


### <a name="platform-metrics"></a>Метрики платформы 
Большинство служб Azure отправляют [метрики платформ,](data-platform-metrics.md) которые отражают их производительность и работу непосредственно в базу данных метрик. Конкретные [метрики зависят от типа ресурса](metrics-supported.md). 

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Метрика azure Monitor | Метрики платформы будут записываться в базу данных метрик Azure Monitor без конфигурации. Показатели платформы доступа от Metrics Explorer.  | [Начало работы с обозревателем метрик Azure](metrics-getting-started.md)<br>[Метрики, поддерживаемые Azure Monitor](metrics-supported.md) |
| Журналы Azure Monitor | Копирование метрик платформы для журналов для тренда и другого анализа с помощью Log Analytics. | [Направление диагностики Azure в Log Analytics](resource-logs-collect-workspace.md) |
| Центры событий | Поток метрик в другие места с помощью концентраторов событий. |[Потоковая передача данных мониторинга Azure в концентратор событий для потребления внешним инструментом](stream-monitoring-data-event-hubs.md) |

### <a name="resource-logs"></a>Журналы ресурсов
[Журналы ресурсов](platform-logs-overview.md) дают представление о _внутренней_ работе ресурса Azure.  Журналы ресурсов создаются автоматически, но необходимо создать диагностическую настройку, чтобы указать пункт назначения для них, собранный для каждого ресурса.

Требования к конфигурации и содержание журналов ресурсов различаются в зависимости от типа ресурса, и не все службы еще создают их. Ознакомиться с информацией о каждой службе и ссылках на подробные процедуры конфигурации можно просмотреть [поддерживаемые службы, схемы и категории для журналов ресурсов Azure.](diagnostic-logs-schema.md) Если служба не указана в этой статье, то эта служба в настоящее время не создает журналы ресурсов.

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Журналы Azure Monitor | Отправка журналов ресурсов в журналы Azure Monitor для анализа с другими собранными данными журнала. | [Сбор журналов ресурсов Azure в рабочем пространстве журнала Analytics в Azure Monitor](resource-logs-collect-storage.md) |
| Хранилище | Отправка журналов ресурсов в Хранилище Ресурсов для архивирования. | [Архив журналов ресурсов Azure](resource-logs-collect-workspace.md) |
| Центры событий | Поток журналов ресурсов в другие места с помощью концентраторов событий. |[Поток журналов ресурсов Azure в концентратор событий](resource-logs-stream-event-hubs.md) |

## <a name="operating-system-guest"></a>Операционная система (гость)
Вычислительные ресурсы в Azure, других облаках и локальной среде имеют гостевую операционную систему для мониторинга. С установкой одного или нескольких агентов можно собрать телеметрию от гостя в Azure Monitor для анализа с помощью тех же инструментов мониторинга, что и сами службы Azure.

![Коллекция вычислительных ресурсов Azure](media/data-sources/compute-resources.png)

### <a name="azure-diagnostic-extension"></a>Расширение системы диагностики Azure
Включение расширения Azure Diagnostics для виртуальных машин Azure позволяет собирать журналы и метрики из гостевой операционной системы вычислительных ресурсов Azure, включая Azure Cloud Service (классические) веб- и рабочие роли, виртуальные машины, виртуальную машину наборы масштабов и сервисная ткань.

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Хранилище | Расширение диагностики Azure всегда записывается в учетную запись хранилища Azure. | [Установка и настройка расширения диагностики Windows Azure (WAD)](diagnostics-extension-windows-install.md)<br>[Отслеживание метрик и журналов с помощью диагностического расширения Linux](../../virtual-machines/extensions/diagnostics-linux.md) |
| Метрика azure Monitor | При настройке расширения диагностики для сбора счетчиков производительности они записываются в базу данных метрик Azure Monitor. | [Отправка метрик Гостевой ОС в метрический магазин Azure Monitor с помощью шаблона управления ресурсами для виртуальной машины Windows](collect-custom-metrics-guestos-resource-manager-vm.md) |
| Центры событий | Настройте расширение диагностики для потоковой передачи данных в другие места с помощью концентраторов событий.  | [Потоковая передача данных по диагностике Azure с помощью концентраторов событий](diagnostics-extension-stream-event-hubs.md)<br>[Отслеживание метрик и журналов с помощью диагностического расширения Linux](../../virtual-machines/extensions/diagnostics-linux.md) |
| Анкеты приложений | Сбор журналов и счетчиков производительности с вычислительного ресурса, поддерживающего приложение, для анализа с помощью других данных приложения. | [Отправка в Application Insights диагностических данных облачной службы, виртуальной машины или Service Fabric](diagnostics-extension-to-application-insights.md) |


### <a name="log-analytics-agent"></a>Агент Log Analytics 
Установите агент Log Analytics для всестороннего мониторинга и управления вашими виртуальными машинами Windows или Linux. Виртуальная машина может работать в Azure, другом облаке или в локальной среде.

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Журналы Azure Monitor | Агент Log Analytics подключается к Azure Monitor либо напрямую, либо через диспетчера операций System Center и позволяет собирать данные из настроемых источников данных или из решений мониторинга, которые предоставляют дополнительные сведения о приложениях работает на виртуальной машине. | [Источники данных агента в Azure Monitor](agent-data-sources.md)<br>[Подключение менеджера операций к мониторингу Azure](om-agents.md) |
| Хранилище VM | Azure Monitor для VMs использует агент Log Analytics для хранения информации о состоянии здоровья в пользовательском месте. Этот процесс описан в следующем разделе.  |


### <a name="azure-monitor-for-vms"></a>Azure Monitor для виртуальных машин 
[Azure Monitor для виртуальных компьютеров](../insights/vminsights-overview.md) обеспечивает индивидуальный мониторинг виртуальных машин, предоставляющих функции, выходящие за рамки основной функциональности Azure Monitor. Для этого требуется агент зависимости от виртуальных компьютеров Windows и Linux, который интегрируется с агентом Log Analytics для сбора обнаруженных данных о процессах, работающих на виртуальной машине, и внешних зависимостях процессов.

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Журналы Azure Monitor | Хранит данные о процессах и зависимостях от агента. | [Использование Azure Monitor для mms (предварительный просмотр) Карта для понимания компонентов приложения](../insights/vminsights-maps.md) |



## <a name="application-code"></a>Код приложения
Детальный мониторинг приложений в Azure Monitor осуществляется с помощью [Application Insights,](https://docs.microsoft.com/azure/application-insights/) который собирает данные из приложений, работающих на различных платформах. Приложение может выполняться в Azure, другом облаке или локальной среде.

![Сбор данных приложения](media/data-sources/applications.png)


### <a name="application-data"></a>Данные приложения
Когда вы включаете службу Application Insights для приложения, установив пакет инструментирования, она собирает метрики и журналы, относящиеся к производительности и операциям приложения. Application Insights хранит данные, которые он собирает в той же платформе данных Azure Monitor, используемой другими источниками данных. Она включает в себя обширные инструменты для анализа этих данных, но вы также можете проанализировать его с помощью данных из других источников, используя такие инструменты, как Metrics Explorer и Log Analytics.

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Журналы Azure Monitor | Оперативные данные о приложении, включая просмотры страниц, запросы приложений, исключения и следы. | [Анализ данных журнала в Azure Monitor](../log-query/log-query-overview.md) |
|                    | Информация о зависимости между компонентами приложения для поддержки карты приложений и телеметрии корреляции. | [Корреляция данных телеметрии в Application Insights](../app/correlation.md) <br> [Схема сопоставления приложений](../app/app-map.md) |
|            | Результаты тестов доступности, которые проверяют доступность и отзывчивость вашего приложения из разных мест в общедоступном Интернете. | [Мониторинг доступности и скорости реагирования любого веб-сайта](../app/monitor-web-app-availability.md) |
| Метрика azure Monitor | Application Insights собирает метрики, описывающие производительность и работу приложения в дополнение к пользовательским метрикам, которые вы определяете в приложении, в базу данных метрик Azure Monitor. | [Метрики на основе журналов и предварительно агрегированные метрики в Application Insights](../app/pre-aggregated-metrics-log-metrics.md)<br>[API Application Insights для пользовательских событий и метрик](../app/api-custom-events-metrics.md) |
| Хранилище Azure | Отправка данных приложений в Хранилище Azure для архивирования. | [Экспорт данных телеметрии из Application Insights](../app/export-telemetry.md) |
|            | Подробная информация о тестах доступности хранится в Хранилище Azure. Используйте Application Insights на портале Azure для загрузки для локального анализа. Результаты тестов доступности хранятся в журналах Azure Monitor. | [Мониторинг доступности и скорости реагирования любого веб-сайта](../app/monitor-web-app-availability.md) |
|            | Данные протектора хранятся в Хранилище Azure. Используйте Application Insights на портале Azure для загрузки для локального анализа.  | [Профилирование приложений в рабочей среде Azure с помощью Application Insights Profiler](../app/profiler-overview.md) 
|            | Данные моментального снимка отувидеозапись, которые хранятся для подмножества исключений, хранятся в хранилище Azure. Используйте Application Insights на портале Azure для загрузки для локального анализа.  | [Как работают моментальные снимки](../app/snapshot-debugger.md#how-snapshots-work) |

## <a name="monitoring-solutions-and-insights"></a>Решения и исследования мониторинга
[Решения для мониторинга](../insights/solutions.md) и [исследования](../insights/insights-overview.md) собирают данные, чтобы получить дополнительную информацию о работе конкретной службы или приложения. Они могут касаться ресурсов в различных уровнях приложений и даже нескольких уровнях.

### <a name="monitoring-solutions"></a>Решения для мониторинга

| Назначение | Описание | Справочник
|:---|:---|:---|
| Журналы Azure Monitor | Решения мониторинга собирают данные в журналы Azure Monitor, [views](view-designer.md) где они могут быть проанализированы с помощью языка запросов или представлений, которые обычно включаются в решение. | [Подробная информация о сборе данных для решений мониторинга в Azure](../insights/solutions-inventory.md) |


### <a name="azure-monitor-for-containers"></a>Azure Monitor для контейнеров
[Azure Monitor для контейнеров](../insights/container-insights-overview.md) предоставляет индивидуальный опыт мониторинга для [службы Azure Kubernetes (AKS).](/azure/aks/) Он собирает дополнительные данные об этих ресурсах, описанные в следующей таблице.

| Назначение | Описание | Справочник |
|:---|:---|:---|
| Журналы Azure Monitor | Хранит данные мониторинга для AKS, включая инвентаризацию, журналы и события. Метрические данные также хранятся в журналах, чтобы использовать свои функции анализа на портале. | [Общие сведения о производительности кластера AKS с Azure Monitor для контейнеров](../insights/container-insights-analyze.md) |
| Метрика azure Monitor | Метрические данные хранятся в метрической базе данных для визирования и оповещения. | [Просмотр метрик контейнеров в исследователе метрик](../insights/container-insights-analyze.md#view-container-metrics-in-metrics-explorer) |
| Служба Azure Kubernetes | Обеспечивает прямой доступ к журналу контейнеров Службы Azure Kubernetes (AKS) (stdout/stderror), событиям и метрикам стручка на портале. | [Как просматривать журналы Kubernetes, события и метрики стручка в режиме реального времени](../insights/container-insights-livedata-overview.md) |

### <a name="azure-monitor-for-vms"></a>Azure Monitor для виртуальных машин
[Azure Monitor для виртуальных технологий](../insights/vminsights-overview.md) предоставляет индивидуальный интерфейс для мониторинга виртуальных машин. Описание данных, собранных Azure Monitor для ВМ, включено в раздел [операционной системы (гостев)](#operating-system-guest) выше.

## <a name="custom-sources"></a>Пользовательские источники
В дополнение к стандартным уровням приложения вам может потребоваться отслеживать другие ресурсы, имеющие данные телеметрии, которые невозможно собрать через другие источники данных. Для этих ресурсов напишите эти данные в журналы «Метрики» или «Журналы» с помощью API-извне мониторинга Azure.

![Пользовательская коллекция](media/data-sources/custom.png)

| Назначение | Метод | Описание | Справочник |
|:---|:---|:---|:---|
| Журналы Azure Monitor | API сборщика данных | Собирайте данные журнала из любого клиента REST и храните в рабочей области Log Analytics. | [Отправка данных журналов в Azure Monitor c помощью API сборщика данных HTTP (общедоступная предварительная версия)](data-collector-api.md) |
| Метрика azure Monitor | Пользовательские метрики API | Собирайте метрические данные из любого клиента REST и храните в базе данных метрик Azure Monitor. | [Отправка пользовательских метрик для ресурса Azure в хранилище метрик Azure Monitor с использованием REST API](metrics-store-custom-rest-api.md) |


## <a name="other-services"></a>Другие службы
Другие службы Azure записывают данные на платформу данных Azure Monitor. Это позволяет анализировать данные, собранные этими службами, с помощью данных, собранных Azure Monitor, и использовать те же инструменты анализа и визуализации.

| Служба | Назначение | Описание | Справочник |
|:---|:---|:---|:---|
| [Центр безопасности Azure](/azure/security-center/) | Журналы Azure Monitor | Центр безопасности Azure хранит данные безопасности, которые он собирает в рабочей области Log Analytics, что позволяет анализировать их с помощью других данных журнала, собранных Azure Monitor.  | [Сбор данных в Центре безопасности Azure](../../security-center/security-center-enable-data-collection.md) |
| [Лазурный Сентинель](/azure/sentinel/) | Журналы Azure Monitor | Azure Sentinel хранит данные, которые он собирает из различных источников данных, в рабочей области Log Analytics, что позволяет анализировать их с помощью других данных журнала, собранных Azure Monitor.  | [Подключение источников данных](/azure/sentinel/quickstart-onboard) |


## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о типах данных мониторинга, собранных Azure Monitor, и о том, как просматривать и анализировать эти данные, см. в статье [Сбор данных мониторинга в Azure](data-platform.md).
- Перечислите [различные места, где ресурсы Azure хранят данные,](data-locations.md) и как можно получить к ним доступ. 
