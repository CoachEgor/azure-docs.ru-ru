---
title: Обзор агентов мониторинга Azure | Документация Майкрософт
description: В этой статье представлен подробный обзор доступных агентов Azure, которые поддерживают мониторинг виртуальных машин, размещенных в Azure или гибридной среде.
services: azure-monitor
ms.subservice: ''
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 02/14/2020
ms.openlocfilehash: a7e6a3a299df8112fe4fbcf457516894c1766b8c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79249091"
---
# <a name="overview-of-azure-monitor-agents"></a>Обзор агентов Azure Monitor

Виртуальные машины и другие вычислительные ресурсы требуют от агента сбора данных мониторинга для измерения производительности и доступности гостевой операционной системы и рабочих нагрузок. В этой статье описаны агенты, используемые Azure Monitor, и вы определяете, какие из них необходимо для удовлетворения требований к вашей конкретной среде.

> [!NOTE]
> В настоящее время Azure Monitor имеет несколько агентов из-за недавней консолидации Azure Monitor и Log Analytics. Хотя их функции могут быть совмещены, каждый из них обладает уникальными возможностями. В зависимости от ваших требований, вам может понадобиться один или несколько агентов на ваших виртуальных машинах. 

Вы можете иметь определенный набор требований, которые не могут быть полностью удовлетворены с одним агентом для конкретной виртуальной машины. Например, можно использовать метрические оповещения, требующие расширения диагностики Azure, но также использовать функциональность Azure Monitor для VMs, которая требует агента log Analytics и агента зависимости. В таких случаях, как это, вы можете использовать несколько агентов, и это общий сценарий для клиентов, которые требуют функциональности от каждого.

## <a name="summary-of-agents"></a>Резюме агентов

Следующие таблицы обеспечивают быстрое сравнение агентов Azure Monitor для Windows и Linux. Более подробная информация о каждом из них приведена в разделе ниже. 

### <a name="windows-agents"></a>Агенты Windows

| | Диагностика<br>расширение (WAD) | Log Analytics<br>агент | Зависимость<br>агент |
|:---|:---|:---|:---|
| Среда поддерживается | Azure | Azure<br>Другое облако<br>В локальной среде | Azure<br>Другое облако<br>В локальной среде | 
| Требования к агенту  | None | None | Требуется агент по анализу журнала |
| Собираемые данные | журналы событий;<br>ETW-события<br>Производительность<br>Файл на основе журналов<br>Журналы IIS<br>журналы приложений .NET<br>Аварийные дампы<br>Агент диагностики журналов | журналы событий;<br>Производительность<IIS logs><br>Файл на основе журналов<br>Полезные сведения и решения<br>Другие службы | Детали процесса и зависимости<br>Метрики сетевого подключения |
| Данные, отправленные в | Хранилище Azure<br>Метрика azure Monitor<br>Концентратор событий | Журналы Azure Monitor | Журналы Azure Monitor |


### <a name="linux-agents"></a>Агенты Linux

| | Диагностика<br>расширение (Лад) | Телеграф<br>агент | Log Analytics<br>агент | Зависимость<br>агент |
|:---|:---|:---|:---|:---|
| Среда поддерживается | Azure | Azure<br>Другое облако<br>В локальной среде | Azure<br>Другое облако<br>В локальной среде | Azure<br>Другое облако<br>В локальной среде |
| Требования к агенту  | None | None | None | Требуется агент по анализу журнала |
| Собираемые данные | Системный журнал<br>Производительность | Производительность | Системный журнал<br>Производительность| Детали процесса и зависимости<br>Метрики сетевого подключения |
| Данные, отправленные в | Хранилище Azure<br>Концентратор событий | Метрика azure Monitor | Журналы Azure Monitor | Журналы Azure Monitor |

## <a name="log-analytics-agent"></a>Агент Log Analytics

[Агент Log Analytics](log-analytics-agent.md) собирает данные мониторинга с гостевой операционной системы и рабочих нагрузок виртуальных машин в Azure, других поставщиков облачных технологий и на территории. Он собирает данные в рабочее пространство log Analytics. Агент Log Analytics — это тот же агент, который используется менеджером по операциям System Center, и вы можете одновременно общаться с группой управления и Azure Monitor. Этот агент также требуется от определенных идей и решений в Azure Monitor.


> [!NOTE]
> Агент log Analytics для Windows часто называют агентом мониторинга Майкрософт (MMA). Агент Log Analytics для Linux часто называют агентом OMS.



Если вам нужно:

* Сбор журналов и данных о производительности с виртуальных или физических компьютеров за пределами Azure. 
* Отправка данных в рабочее пространство log Analytics, чтобы воспользоваться функциями, поддерживаемыми [журналами Azure Monitor,](data-platform-logs.md#what-can-you-do-with-azure-monitor-logs) такими как [запросы журналов.](../log-query/log-query-overview.md)
* Используйте [Azure Monitor для виртуальных технологий,](../insights/vminsights-overview.md) который позволяет отслеживать виртуальные машины в масштабе и контролировать их процессы и зависимость от других ресурсов и внешних процессов.  
* Управление безопасностью виртуальных машин с помощью [Центра безопасности Azure](../../security-center/security-center-intro.md) или [Azure Sentinel.](../../sentinel/overview.md)
* Используйте [управление обновлениями автоматизации Azure,](../../automation/automation-update-management.md) [конфигурацию состояния автоматизации Azure](../../automation/automation-dsc-overview.md)или [отслеживание и инвентаризацию изменений автоматизации Azure,](../../automation/change-tracking.md) чтобы обеспечить всестороннее управление вашими VMs-проектами Azure
* Используйте различные [решения](../monitor-reference.md#insights-and-core-solutions) для мониторинга конкретной службы или приложения.

Ограничения агента Log Analytics включают:

- Не удается отправлять данные в области метеоков мониторинга Azure, хранилища Azure или Azure Event Hubs.

## <a name="azure-diagnostics-extension"></a>Расширение системы диагностики Azure

[Расширение Azure Diagnostics](diagnostics-extension-overview.md) собирает данные мониторинга с гостевой операционной системы и рабочих нагрузок виртуальных машин Azure и других вычислительных ресурсов. Он в основном собирает данные в хранилище Azure, но также позволяет определить данные раковины также отправлять данные в другие направления, такие как Azure Monitor Metrics и Azure Event Hubs.

Используйте диагностическое расширение Azure, если вам нужно:

- Отправка данных в Хранилище Azure для архивирования или анализа с помощью таких инструментов, как [Azure Storage Explorer.](../../vs-azure-tools-storage-manage-with-storage-explorer.md)
- Отправка данных в [Azure Monitor Metrics](data-platform-metrics.md) для анализа с помощью [исследователя метрик](metrics-getting-started.md) и использования таких функций, как [метрика в](../../azure-monitor/platform/alerts-metric-overview.md) реальном времени и [автомасштаб (только](autoscale-overview.md) Windows).
- Отправка данных сторонним инструментам с помощью [концентраторов Azure Event.](diagnostics-extension-stream-event-hubs.md)
- Соберите [диагностику ботинок](../../virtual-machines/troubleshooting/boot-diagnostics.md) для расследования проблем с загрузкой VM.

Ограничения расширения azure диагностики включают в себя:

- Может использоваться только с ресурсами Azure.
- Ограниченная возможность отправки данных в журналы Мониторингов Azure.

## <a name="telegraf-agent"></a>Агент Телеграфа

[Агент InfluxData Telegraf](collect-custom-metrics-linux-telegraf.md) используется для сбора данных о производительности с компьютеров Linux в Azure Monitor Metrics.

Используйте агент Телеграф, если вам нужно:

* Отправка данных в [Azure Monitor Metrics](data-platform-metrics.md) для анализа с помощью [исследователя метрик](metrics-getting-started.md) и использования таких функций, как [метрика в](../../azure-monitor/platform/alerts-metric-overview.md) реальном времени и [автомасштаб (только](autoscale-overview.md) Linux). 



## <a name="dependency-agent"></a>Агент зависимостей

Агент зависимости собирает обнаруженные данные о процессах, работающих на виртуальной машине, и внешних зависимостях процесса. 

При необходимости используйте агент зависимости:

* Используйте функцию [«Карта» Azure Monitor для vMs](../insights/vminsights-overview.md) или решения [карты обслуживания.](../insights/service-map.md)

Рассмотрим следующее при использовании агента зависимости:

- Агент зависимости требует установки агента Log Analytics на одной и той же виртуальной машине.
- На Linux VMs агент Log Analytics должен быть установлен до расширения Azure Diagnostic Extension.

## <a name="extensions-compared-to-agents"></a>Расширения по сравнению с агентами

Расширение Log Analytics для [Windows](../../virtual-machines/extensions/oms-windows.md) и [Linux](../../virtual-machines/extensions/oms-linux.md) устанавливает агент Log Analytics на виртуальные машины Azure. Расширение зависимости монитора Azure Monitor для [Windows](../../virtual-machines/extensions/agent-dependency-windows.md) и [Linux](../../virtual-machines/extensions/agent-dependency-linux.md) устанавливает агент зависимости на виртуальные машины Azure. Это те же агенты, описанные выше, но позволяют управлять ими через [виртуальные расширения машины.](../../virtual-machines/extensions/overview.md) Вы должны использовать расширения для установки и управления агентами, когда это возможно.


## <a name="next-steps"></a>Дальнейшие действия

Получить более подробную информацию о каждом из агентов на следующий:

- [Обзор агента по анализу журналов](log-analytics-agent.md)
- [Обзор расширения Azure Diagnostics](diagnostics-extension-overview.md)
- [Сбор пользовательских метрик для виртуальной машины Linux с помощью агента Telegraf InfluxData](collect-custom-metrics-linux-telegraf.md)
