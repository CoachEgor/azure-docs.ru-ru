---
title: Общие сведения о журнале запросов в Azure Monitor | Документация Майкрософт
description: Ответы на вопросы, часто задаваемые вопросы, связанные с по журналам, запрашивает и получает вам приступить к работе в их использования.
services: log-analytics
author: bwren
ms.service: log-analytics
ms.topic: conceptual
ms.date: 06/19/2019
ms.author: bwren
ms.openlocfilehash: 7605bf36c41c5b1276d29076173efd52409afaa9
ms.sourcegitcommit: 5cb0b6645bd5dff9c1a4324793df3fdd776225e4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/21/2019
ms.locfileid: "67310341"
---
# <a name="overview-of-log-queries-in-azure-monitor"></a>Общие сведения о запросах журнала в Azure Monitor
Журнал запросов помогут вам в полной мере применять значение данных, собранных в [журналов Azure Monitor](../platform/data-platform-logs.md). Эффективный язык запросов позволяет объединить данные из нескольких таблиц, статистической обработки больших наборов данных и выполнять сложные операции с минимальным использованием кода. Практически любой вопрос, и выполнить анализ, пока сбора данных, и вы знаете, как для создания правого запроса.

Некоторые функции в Azure Monitor, такие как [insights](../insights/insights-overview.md) и [решения](../insights/solutions-inventory.md) обработки данные журнала, не подвергая риску целостность базовых запросах. В полной мере применять другие возможности Azure Monitor, необходимо понимать, как создавать запросы, и как их использовать для интерактивного анализа данных в журналах Azure Monitor.

Используйте эту статью в качестве отправной точки для изучения запросов к журналу в Azure Monitor. Он содержит ответы на часто задаваемые вопросы и ссылки на другой документации, содержащий дополнительные сведения и рекомендации.

## <a name="how-can-i-learn-how-to-write-queries"></a>О том, как писать запросы?
Если вы хотите перейти сразу к вещи, можно запустить следующие учебники:

- [Начало работы с Log Analytics в Azure Monitor](get-started-portal.md).
- [Начало работы с запросов к журналу в Azure Monitor](get-started-queries.md).

При наличии основы работы рассматриваются несколько занятий, используя свои собственные данные или данные из наших демонстрационную среду, начиная с: 

- [Работать со строками в запросах журнала Azure Monitor](string-operations.md)
 
## <a name="what-language-do-log-queries-use"></a>Какой язык выполняют вход запроса используют?
Журналы Azure Monitor основан на [обозреватель данных Azure](/azure/data-explorer), и запросы журнала записываются, используя тот же язык запросов Kusto (KQL). Это богатый язык, разработанный для удобства чтения, и автор и вы сможете начать его использовать с минимальным руководством.

См. в разделе [KQL обозреватель данных Azure документации](/azure/kusto/query) полную документацию по KQL и ссылки на различные доступные функции.<br>
См. в разделе [приступить к работе с помощью запросов к журналу в Azure Monitor](get-started-queries.md) краткое пошаговое языка с использованием данных из журналов Azure Monitor.
См. в разделе [различия языков запросов Azure Monitor журнала](data-explorer-difference.md) незначительные различия в версии KQL, используемые Azure Monitor.

## <a name="what-data-is-available-to-log-queries"></a>Какие данные недоступен для ведения журнала запросов?
Все данные, собранные в журналов Azure Monitor, позволяющих извлекать и анализировать в запросах журнала. Их данные будут записаны в различных источников данных в разных таблицах, но может включать несколько таблиц в одном запросе для анализа данных в нескольких источниках. При создании запроса, вы сначала определите, какие таблицы содержат данные, которые вы ищете, поэтому вы должны иметь по крайней мере основные структуру данных в журналах Azure Monitor.

См. в разделе [источников из журналов Azure Monitor](../platform/data-platform-logs.md#sources-of-azure-monitor-logs)для список разных источников данных, заполнение журналов Azure Monitor.<br>
См. в разделе [структуры из журналов Azure Monitor](logs-structure.md) объяснение структуру данных.

## <a name="what-does-a-log-query-look-like"></a>Как выглядит запроса журнала?
Запрос может быть простым, как имя одной таблицы для получения всех записей из этой таблицы:

```Kusto
Syslog
```

Или может фильтровать конкретной записи, суммировать их и визуализировать результаты в диаграмме:

```
SecurityEvent
| where TimeGenerated > ago(7d)
| where EventID == 4625
| summarize count() by Computer, bin(TimeGenerated, 1h)
| render timechart 
```

Для более сложного анализа можно извлечь данные из нескольких таблиц с помощью соединения для анализа результатов друг с другом.

```Kusto
app("ContosoRetailWeb").requests
| summarize count() by bin(timestamp,1hr)
| join kind= inner (Perf
    | summarize avg(CounterValue) 
      by bin(TimeGenerated,1hr))
on $left.timestamp == $right.TimeGenerated
```
Даже если вы не знакомы с KQL, можно выяснить по крайней мере, базовую логику, используются эти запросы. Они начинались с имени таблицы, а затем добавьте несколько команд для фильтрации и обработки этих данных. Запрос может использовать любое количество команд, и можно написать более сложные запросы, как вы ознакомитесь с на различные команды KQL.

См. в разделе [приступить к работе с помощью запросов к журналу в Azure Monitor](get-started-queries.md) руководство по запросов к журналу, который представляет язык и общие функции.<br>


## <a name="what-is-log-analytics"></a>Что такое Log Analytics?
Log Analytics является основным средством на портале Azure для написания запросов к журналу и интерактивного анализа их результатов. Даже если запрос журнала используется в другом месте в Azure Monitor, вы будете обычно писать и тестировать запрос сначала с помощью Log Analytics.

Log Analytics можно запустить из разных мест на портале Azure. Область данных, доступных в Log Analytics определяется способ запуска. См. в разделе [область запроса](scope.md) для получения дополнительных сведений.

- Выберите **журналы** из **Azure Monitor** меню или **рабочих областей Log Analytics** меню.
- Выберите **Analytics** из **Обзор** страницы приложения Application Insights.
- Выберите **журналы** в меню ресурса Azure.

![Log Analytics](media/log-query-overview/log-analytics.png)

См. в разделе [начало работы с Log Analytics в Azure Monitor](get-started-portal.md) учебника Пошаговое руководство по Log Analytics, представлены некоторые из его компонентов.

## <a name="where-else-are-log-queries-used"></a>Где еще используются запросы журнала?
В дополнение к интерактивном режиме работы с запросы журнала и их результаты в Log Analytics, областей в Azure Monitor, где будет использоваться запросы следующее:

- **Правила генерации оповещений.** [Правила генерации оповещений](../platform/alerts-overview.md) заранее выявляют проблемы с данными в рабочей области.  Каждое правило генерации оповещений основано на поиске по журналам, который автоматически выполняется через определенные интервалы.  Результаты проверяются, чтобы определить, следует ли создавать оповещение.
- **Панели мониторинга.** Результаты любого запроса можно закрепить на [панели мониторинга Azure](../learn/tutorial-logs-dashboards.md), что даст вам возможность визуализировать данные журналов и метрик вместе и при необходимости использовать совместно с другими пользователями Azure.
- **Представления.**  Вы можете создавать визуализации данных, которые добавлены на панели мониторинга пользователя, с помощью [конструктора представлений](../platform/view-designer.md).  Запросы к журналам предоставляют данные, используемые [плитками](../platform/view-designer-tiles.md) и [элементами визуализации](../platform/view-designer-parts.md) в каждом просмотре.  
- **Экспорт.**  Когда вы экспортируете данные из Azure Monitor в Excel или [Power BI](../platform/powerbi.md), вы создаете запрос по журналам для определения экспортируемых данных.
- **PowerShell.** Позволяет выполнять скрипт PowerShell из командной строки или модуль runbook службы автоматизации Azure, который использует [Get-AzOperationalInsightsSearchResults](/powershell/module/az.operationalinsights/get-azoperationalinsightssearchresult) для получения данных журналов из Azure Monitor.  Для этого командлета требуется запрос, чтобы определить извлекаемые данные.
- **API журналов Azure Monitor.**  [API журналов Azure Monitor](../platform/alerts-overview.md) позволяет любому клиенту REST API извлекать данные журнала из рабочей области.  Запрос API включает запрос, который выполняется в Azure Monitor, чтобы определить извлекаемые данные.


## <a name="next-steps"></a>Дальнейшие действия
- Разберем [руководство по использованию Log Analytics на портале Azure](get-started-portal.md).
- Разберем [руководство по написанию запросов](get-started-queries.md).
