---
title: Структура журналов мониторинга Azure (ru) Документы Майкрософт
description: Чтобы получить данные журнала из Azure Monitor, требуется запрос по журналам.  В этой статье описывается использование новых запросов по журналам в Azure Monitor и приведены основные сведения, которые необходимо знать перед их созданием.
ms.subservice: logs
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 08/22/2019
ms.openlocfilehash: 1d647ba7e8d4f0e29252dfff95099e39bab87895
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77662082"
---
# <a name="structure-of-azure-monitor-logs"></a>Структура журналов мониторинга Azure
Возможность быстро получать представление о ваших данных с помощью [запроса журнала](log-query-overview.md) является мощной особенностью Azure Monitor. Чтобы создать эффективные и полезные запросы, следует понять некоторые основные понятия, такие как, где находятся данные и как они структурированы. В этой статье приведены основные понятия, необходимые для начала работы.

## <a name="overview"></a>Обзор
Данные в журналах Azure Monitor хранятся либо в рабочей области log Analytics, либо в приложении Application Insights. Оба оснащены [Azure Data Explorer,](/azure/data-explorer/) что означает, что они используют свой мощный движок данных и язык запросов.

Данные как в рабочих областях, так и в приложениях организуется в таблицы, каждая из которых хранит различные виды данных и имеет свой собственный уникальный набор свойств. Большинство [источников данных](../platform/data-sources.md) будут записываться в свои собственные таблицы в рабочей области Log Analytics, в то время как Application Insights будет писать в заранее определенный набор таблиц в приложении Application Insights. Запросы журнала очень гибки, что позволяет легко комбинировать данные из нескольких таблиц и даже использовать запрос кросс-ресурсов для объединения данных из таблиц в нескольких рабочих областях или для записи запросов, которые объединяют рабочее пространство и данные приложения.

На следующем изображении показаны примеры источников данных, которые пишутся в различные таблицы, которые используются в выборочных запросах.

![Таблицы](media/logs-structure/queries-tables.png)

## <a name="log-analytics-workspace"></a>Рабочая область Log Analytics
Все данные, собранные журналами Azure Monitor, за исключением анализа приложений, хранятся в [рабочей области log Analytics.](../platform/manage-access.md) Вы можете создать одно или несколько рабочих областей в зависимости от ваших конкретных требований. [Источники данных,](../platform/data-sources.md) такие как журналы активности и журналы ресурсов из ресурсов Azure, агенты на виртуальных машинах и данные из решений, полученных в области анализа и мониторинга, будут записывать данные в одно или несколько рабочих областей, которые вы настраиваете в рамках их работы. Другие службы, такие как [Azure Security Center](/azure/security-center/) и [Azure Sentinel,](/azure/sentinel/) также используют рабочее пространство Log Analytics для хранения своих данных, чтобы их можно было анализировать с помощью журналов, а также данных мониторинга из других источников.

Различные виды данных хранятся в разных таблицах в рабочей области, и каждая таблица имеет уникальный набор свойств. Стандартный набор таблиц добавляется в рабочее пространство, когда оно создано, и новые таблицы добавляются для различных источников данных, решений и служб по мере их нахуали. Вы также можете создавать пользовательские таблицы с помощью [API-коллекционирование данных.](../platform/data-collector-api.md)

Вы можете просматривать таблицы в рабочей области и их схему во вкладке **Schema** в журнале Analytics для рабочего пространства.

![Схема рабочего пространства](media/scope/workspace-schema.png)

Используйте следующий запрос, чтобы перечислить таблицы в рабочей области и количество записей, собранных в каждую из них за предыдущий день. 

```Kusto
union withsource = table * 
| where TimeGenerated > ago(1d)
| summarize count() by table
| sort by table asc
```
Ознакомиться с документацией для каждого источника данных можно найти для получения подробной информации о таблицах, которые они создают. Примеры включают статьи для [источников данных агента,](../platform/agent-data-sources.md) [журналы ресурсов](../platform/diagnostic-logs-schema.md)и [решения мониторинга.](../insights/solutions-inventory.md)

### <a name="workspace-permissions"></a>Разрешения на рабочее пространство
[См. Проектирование развертывания журналов Azure Monitor,](../platform/design-logs-deployment.md) чтобы понять стратегию управления доступом и рекомендации по обеспечению доступа к данным в рабочей области. В дополнение к предоставлению доступа к самой рабочей области, вы можете ограничить доступ к отдельным таблицам с помощью [таблицы уровня RBAC.](../platform/manage-access.md#table-level-rbac)

## <a name="application-insights-application"></a>Приложение Insights
При создании приложения в Application Insights соответствующее приложение автоматически создается в журналах Azure Monitor. Для сбора данных не требуется конфигурация, и приложение будет автоматически записывать данные мониторинга, такие как представления страниц, запросы и исключения.

В отличие от рабочего пространства log Analytics, приложение Application Insights имеет фиксированный набор таблиц. Вы не можете настроить другие источники данных для записи в приложение, поэтому дополнительные таблицы не могут быть созданы. 

| Таблица | Описание | 
|:---|:---|
| доступностьРезультаты | Краткие данные из тестов доступности. |
| браузерТимии      | Данные о производительности клиента, такие как время, задейось обработке входящих данных. |
| customEvents        | Пользовательские события, созданные вашим приложением. |
| customMetrics       | Пользовательские метрики, созданные вашим приложением. |
| зависимости        | Звонки из приложения на внешние компоненты. |
| исключения          | Исключения, брошенные временем выполнения приложения. |
| Просмотры           | Данные о каждом представлении веб-сайта с информацией о браузере. |
| performanceCounters | Измерения производительности из вычислительных ресурсов, поддерживающих приложение. |
| requests            | Подробная информация о каждом запросе заявки.  |
| traces              | Результаты распределенного отслеживания. |

Схему для каждой таблицы можно просмотреть во вкладке **Schema** в журнале Analytics для приложения.

![Схема приложения](media/scope/application-schema.png)

## <a name="standard-properties"></a>Стандартные свойства
Хотя каждая таблица в журналах Azure Monitor имеет свою собственную схему, есть стандартные свойства, общие для всех таблиц. Подробную информацию о каждом из них можно узнать в [журнале Azure Monitor Logs.](../platform/log-standard-properties.md)

| Рабочая область Log Analytics | Приложение Insights | Описание |
|:---|:---|:---|
| TimeGenerated | TIMESTAMP  | Дата и время создания записи. |
| Тип          | itemType   | Название таблицы, из которого была извлечена запись. |
| _ResourceId   |            | Уникальный идентификатор для ресурса, с помощью этого связана запись. |
| _IsBillable   |            | Уточняется, является ли проглоченные данные оплачиваемыми. |
| _BilledSize   |            | Определяет размер байтов данных, которые будут выставлены на счет. |

## <a name="next-steps"></a>Дальнейшие действия
- Узнайте об использовании [log Analytics для создания и отсвагивания поиска журналов.](../log-query/portals.md)
- Изучите [руководство по написанию запросов](../log-query/get-started-queries.md) на новом языке.
