---
title: Структура журналов Azure Monitor | Документация Майкрософт
description: Чтобы получить данные журнала из Azure Monitor, требуется запрос по журналам.  В этой статье описывается использование новых запросов по журналам в Azure Monitor и приведены основные сведения, которые необходимо знать перед их созданием.
services: log-analytics
author: bwren
ms.service: log-analytics
ms.topic: conceptual
ms.date: 06/16/2019
ms.author: bwren
ms.openlocfilehash: e243ebbc31f9e941678ac76a83738276995b5ba1
ms.sourcegitcommit: 2d3b1d7653c6c585e9423cf41658de0c68d883fa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/20/2019
ms.locfileid: "67297243"
---
# <a name="structure-of-azure-monitor-logs"></a>Структура журналов Azure Monitor
Возможность быстро получить ценные данные с помощью [запроса журнала](log-query-overview.md) — это мощная функция Azure Monitor. Чтобы создать эффективный и полезные запросы, необходимо понимать некоторые основные понятия, например, где находятся нужные данные и как он структурирован. Эта статья содержит основные понятия, необходимые для начала работы.

## <a name="overview"></a>Обзор
Данные в Azure Monitor журналы хранятся в рабочей области Log Analytics или Application Insights приложения. Оба работают на [обозреватель данных Azure](/azure/data-explorer/) это означает, что они используют его мощный механизм и язык запросов.

В рабочих областях и приложениях упорядочены в таблицы, каждая из которых хранит разные виды данных и имеет свой собственный уникальный набор свойств. Большинство [источников данных](../platform/data-sources.md) будет записывать собственные таблицы в рабочей области Log Analytics, хотя Application Insights будет записывать предустановленный набор таблиц в приложении Application Insights. Запросы журналов являются достаточно гибкими, что позволяет легко объединять данные из нескольких таблиц и даже использовать запрос между ресурсами для объединения данных из таблиц в нескольких рабочих областях или написать запросы, сочетающие данные рабочей области и приложений.

Ниже приведены примеры источников данных, которые записывают в разных таблицах, используемых в примерах запросов.

![Таблицы](media/logs-structure/queries-tables.png)

## <a name="log-analytics-workspace"></a>Рабочая область Log Analytics
Все данные, собранные из журналов Azure Monitor, за исключением Application Insights хранятся в [рабочей области Log Analytics](../platform/manage-access.md). Вы можете создать один или несколько рабочих областей в зависимости от требований конкретного. [Источники данных](../platform/data-sources.md) такие как журналы действий и диагностики журналы из ресурсов Azure, агентов на виртуальных машинах и данные из аналитики и мониторинга решений будет записывать данные в один или несколько рабочих областей, которые можно настроить как часть их адаптации. Другие службы, такие как [центра безопасности](/azure/security-center/) и [Azure Sentinel](/azure/sentinel/) также использовать рабочую область Log Analytics для хранения своих данных, поэтому их можно проанализировать с помощью запросов к журналу наряду с отслеживанием данных из других источники.

Различные виды данных хранятся в разных таблицах в рабочей области, а каждая таблица имеет уникальный набор свойств. Стандартный набор таблицы добавляются к рабочей области, при его создании, и новые таблицы добавляются для различных источников данных, решений и служб, так как они подключены. Можно также создать пользовательские таблицы, с помощью [API сборщика данных](../platform/data-collector-api.md).

Вы можете просмотреть таблицы в рабочей области и их схемы в **схемы** вкладку в Log Analytics для рабочей области.

![Рабочая область схемы](media/scope/workspace-schema.png)

Используйте следующий запрос, чтобы список таблиц в рабочей области и число записей, собранных в каждой за предыдущий день. 

```Kusto
union withsource = table * 
| where TimeGenerated > ago(1d)
| summarize count() by table
| sort by table asc
```
См. в разделе документации для каждого источника данных, сведения из таблицы, которые они создают. Примеры статей для [источников данных агента](../platform/agent-data-sources.md), [журналы диагностики](../platform/diagnostic-logs-schema.md), и [решения для мониторинга](../insights/solutions-inventory.md).

### <a name="workspace-permissions"></a>Разрешения для рабочей области
См. в разделе [разрешения для рабочей области и область](../platform/manage-access.md#workspace-permissions-and-scope) Дополнительные сведения о предоставлении доступа к данным в рабочей области. Помимо предоставления доступа к самой рабочей области, можно ограничить доступ к отдельным таблицам с помощью [RBAC уровня таблицы](../platform/manage-access.md#table-level-rbac).

## <a name="application-insights-application"></a>Приложение Application Insights
При создании приложения в Application Insights, соответствующему приложению автоматически создается в журналов Azure Monitor. Дополнительные настройки не нужны для сбора данных, и приложение будет автоматически записывать данные, такие как просмотры страниц, запросы и исключения мониторинга.

В отличие от рабочую область Log Analytics приложение Application Insights имеет фиксированный набор таблиц. Нельзя настроить другие источники данных для записи в приложение, поэтому могут создаваться без дополнительных таблиц. 

| Таблица | Описание | 
|:---|:---|
| availabilityResults | Сводные данные с тестов доступности. |
| browserTimings      | Данные о производительности клиента, например время, затраченное на обработку входящих данных. |
| customEvents        | Пользовательские события, создаваемых приложением. |
| customMetrics       | Настраиваемые метрики, создаваемых приложением. |
| Зависимости        | Вызовы из приложения к внешним компонентам. |
| Исключения          | Исключения выброшены при выполнении приложения. |
| Просмотров страниц           | Представление данных о каждого веб-сайта с информация для браузера. |
| performanceCounters | Измерения производительности от вычислительных ресурсов, поддерживающих приложение. |
| requests            | Сведения о каждом запросе приложения.  |
| traces              | Результаты из распределенной трассировки. |

Можно просмотреть схемы для каждой таблицы в **схемы** вкладку в Log Analytics для приложения.

![Схема приложения](media/scope/application-schema.png)

## <a name="standard-properties"></a>Стандартные свойства
Хотя каждой таблицы в журналов Azure Monitor имеет свою собственную схему, то есть стандартные свойства, общие для всех таблиц. См. в разделе [стандартных свойств в журналов Azure Monitor](../platform/log-standard-properties.md) Дополнительные сведения о каждом.

| Рабочая область Log Analytics | Приложение Application Insights | Описание |
|:---|:---|:---|
| TimeGenerated | timestamp  | Дата и время создания записи. |
| type          | itemType   | Имя таблицы, запись извлекается из. |
| _ResourceId   |            | С связан уникальный идентификатор для записи ресурса. |
| _IsBillable   |            | Указывает, является ли данные, полученные оплаты. |
| _BilledSize   |            | Указывает размер в байтах данных, которые будет выставлен счет. |

## <a name="next-steps"></a>Дальнейшие действия
- Дополнительные сведения об использовании [поисков по журналам Log Analytics для создания и редактирования](../log-query/portals.md).
- Изучите [руководство по написанию запросов](../log-query/get-started-queries.md) на новом языке.
