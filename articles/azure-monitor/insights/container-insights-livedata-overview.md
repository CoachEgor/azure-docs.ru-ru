---
title: Просмотр данных в реальном времени (предварительный просмотр) с помощью Azure Monitor для контейнеров Документы Майкрософт
description: В этой статье описывается представление в реальном времени журналов, событий и метрик Kubernetes без использования kubectl в Azure Monitor для контейнеров.
ms.topic: conceptual
ms.date: 10/15/2019
ms.openlocfilehash: 9e7c7a7b7bf276b3451cee1d289b8b07ac0f40ba
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79216537"
---
# <a name="how-to-view-kubernetes-logs-events-and-pod-metrics-in-real-time"></a>Как просматривать журналы Kubernetes, события и метрики стручка в режиме реального времени

Azure Monitor для контейнеров включает функцию Live Data (preview), которая представляет собой продвинутую диагностическую функцию, позволяющую получить прямой доступ к журналу контейнеров Azure Kubernetes Service (AKS) (stdout/stderror), событиям и метрикам стручка. Он предоставляет прямой `kubectl logs -c` `kubectl get` доступ к, события, и `kubectl top pods`. Консольная панель показывает журналы, события и метрики, генерируемые контейнерным двигателем для дальнейшей помощи в устранении неполадок в режиме реального времени.

В этой статье содержится подробный обзор и помогает понять, как использовать эту функцию. 

>[!NOTE]
>Кластеры AKS включены как [частные кластеры](https://azure.microsoft.com/updates/aks-private-cluster/) не поддерживаются с помощью этой функции. Эта функция опирается на прямой доступ к API Kubernetes через прокси-сервер из вашего браузера. Включение сетевой безопасности для блокировки API Kubernetes из этого прокси будет блокировать этот трафик. 

>[!NOTE]
>Эта функция доступна во всех регионах Azure, включая Azure China. В настоящее время он недоступен в Azure правительства США.

Для получения справки о настройке или устранении неполадок функции Live Data (предварительный просмотр) просмотрите наше [руководство по настройке.](container-insights-livedata-setup.md) Эта функция непосредственно получить доступ к API Kubernetes, а дополнительную информацию о модели проверки подлинности можно найти [здесь.](https://kubernetes.io/docs/concepts/overview/kubernetes-api/) 

## <a name="live-data-preview-functionality-overview"></a>Обзор функциональности данных в реальном времени (предварительный просмотр)

### <a name="search"></a>Поиск

![Пример фильтра панели консолей данных Live Data](./media/container-insights-livedata-overview/livedata-pane-filter-example.png)

Функция Live Data (предварительный просмотр) включает функциональность поиска. В поле **поиска** можно отфильтровать результаты, введя ключевое слово или термин, и любые соответствующие результаты выделены для быстрого просмотра. При просмотре событий можно дополнительно ограничить результаты с помощью **фильтра** таблетки найдены справа от панели поиска. В зависимости от выбранного ресурса, таблетки перечисляют Pod, Namespace или кластер, из которого можно выбрать.  

### <a name="scroll-lock-and-pause"></a>Прокрутка блокировки и паузы 

Чтобы приостановить автопрокрутки и контролировать поведение панели, что позволяет вручную прокручивать новые прочитаные данные, можно использовать опцию **Scroll.** Чтобы повторно включить автопрокрутки, просто выберите опцию **Прокрутки** еще раз. Вы также можете приостановить поиск данных журнала или событий, выбрав **опцию Пауза,** и когда вы будете готовы возобновить, просто выберите **Play.**  

![Live Data консоли панели паузы живое представление](./media/container-insights-livedata-overview/livedata-pane-scroll-pause-example.png)

>[!IMPORTANT]
>Мы рекомендуем только приостановить или приостановить автопрокрутки в течение короткого периода времени при устранении неполадок. Эти запросы могут повлиять на доступность и регулирование API Kubernetes в вашем кластере. 

>[!IMPORTANT]
>Во время работы этой функции данные постоянно не хранятся. Вся информация, собранная во время сеанса, удаляется при закрытии браузера или удалении от него. Данные остаются только для визуализации в пятиминутном окне функции метрик; любые метрики старше пяти минут также удаляются. Буферные запросы Live Data (предварительный просмотр) в разумных пределах использования памяти (нужно быть более конкретными здесь, что разумно?). 

## <a name="view-logs"></a>Просмотр журналов

Данные журнала в реальном времени можно просматривать по мере их представления контейнерным движком из представления **узлов,** **контроллеров**и **контейнеров.** Для просмотра данных журнала выполните следующие действия.

1. На портале Azure просмотрите группу кластеров AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS под **мониторингом** на левой стороне выберите **Insights.** 

3. Выберите либо **узлы,** **контроллеры**или **вкладку Контейнеры.**

4. Выберите объект из сетки производительности, а на панели свойств, найденной на правой стороне, выберите опцию **View live data (preview).** Если кластер AKS настроен с помощью одного знака с использованием Azure AD, вам предлагается проверить подлинность при первом использовании во время сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.  

    >[!NOTE]
    >При просмотре данных из рабочего пространства журнала Analytics, выбрав **опцию View in analytics** из панели свойств, результаты поиска журналов потенциально будут отображать **узлы,** **наборы Daemon,** **наборы реплик,** **рабочие места,** **задания,** **сухие**рабочие места и **контейнеры,** которые могут больше не существовать. Попытка поиска журналов для контейнера, который `kubectl` не доступен в также не удастся здесь. Просмотрите функцию [«Вид в аналитике»,](container-insights-log-search.md#search-logs-to-analyze-data) чтобы узнать больше об просмотре исторических журналов, событий и метрик.  

После успешной проверки подлинности консольная панель Live Data (preview) будет отображаться ниже сетки данных о производительности, где можно просматривать данные журнала в непрерывном потоке. Если индикатор состояния получения показывает зеленый чековый знак, который находится на крайнем правом от панели, это означает, что данные могут быть извлечены, и он начинает потоковую передачу на консоль.  

![Свойства узлов панели представления опции](./media/container-insights-livedata-overview/node-properties-pane.png)  

Название панели показывает имя стручка, с группированным контейнером.

## <a name="view-events"></a>Просмотр событий

Данные событий в режиме реального времени можно просматривать по мере их создания контейнерным движком из **узлов,** **контроллеров,** **контейнеров**и **развертываний (предварительный просмотр)** представления при выборе контейнера, стручка, узла, ReplicaSet, DaemonSet, задания, CronJob или Развертывания. Для просмотра событий выполните следующие действия.

1. На портале Azure просмотрите группу кластеров AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS под **мониторингом** на левой стороне выберите **Insights.** 

3. Выберите либо вкладку **Узлы,** **контроллеры,** **контейнеры,** либо **вкладку Развертывания (предварительный просмотр).**

4. Выберите объект из сетки производительности, а на панели свойств, найденной на правой стороне, выберите опцию **View live data (preview).** Если кластер AKS настроен с помощью одного знака с использованием Azure AD, вам предлагается проверить подлинность при первом использовании во время сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.  

    >[!NOTE]
    >При просмотре данных из рабочего пространства журнала Analytics, выбрав **опцию View in analytics** из панели свойств, результаты поиска журналов потенциально будут отображать **узлы,** **наборы Daemon,** **наборы реплик,** **рабочие места,** **задания,** **сухие**рабочие места и **контейнеры,** которые могут больше не существовать. Попытка поиска журналов для контейнера, который `kubectl` не доступен в также не удастся здесь. Просмотрите функцию [«Вид в аналитике»,](container-insights-log-search.md#search-logs-to-analyze-data) чтобы узнать больше об просмотре исторических журналов, событий и метрик.  

После успешной проверки подлинности консольная панель Live Data (preview) будет отображаться ниже сетки данных производительности. Если индикатор состояния получения показывает зеленый чековый знак, который находится на крайнем правом от панели, это означает, что данные могут быть извлечены, и он начинает потоковую передачу на консоль. 
    
Если выбранный вами объект был контейнером, выберите опцию **«События»** в панели. При выборе узла, pod или контроллера события просмотра автоматически выбираются. 

![События представления панели свойств контроллера](./media/container-insights-livedata-overview/controller-properties-live-event.png)  

Название панели показывает название Pod, с группированным контейнером.

### <a name="filter-events"></a>События фильтра 

При просмотре событий можно дополнительно ограничить результаты с помощью **фильтра** таблетки найдены справа от панели поиска. В зависимости от выбранного ресурса, таблетки перечисляют Pod, Namespace или кластер, из которого можно выбрать.  

## <a name="view-metrics"></a>Просмотр метрик 

Данные метрики в режиме реального времени можно просматривать по мере их представления контейнерного двигателя из представления **узлов** или **контроллеров** только при выборе **Pod.** Для просмотра метрик выполните следующие действия.

1. На портале Azure просмотрите группу кластеров AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS под **мониторингом** на левой стороне выберите **Insights.** 

3. Выберите вкладку **«Узлы»** или **«Контроллеры».**

4. Выберите объект **Pod** из сетки производительности, а на панели свойств, найденной на правой стороне, выберите опцию **View live data (preview).** Если кластер AKS настроен с помощью одного знака с использованием Azure AD, вам предлагается проверить подлинность при первом использовании во время сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.  

    >[!NOTE]
    >При просмотре данных из рабочего пространства журнала Analytics, выбрав **опцию View in analytics** из панели свойств, результаты поиска журналов потенциально будут отображать **узлы,** **наборы Daemon,** **наборы реплик,** **рабочие места,** **задания,** **сухие**рабочие места и **контейнеры,** которые могут больше не существовать. Попытка поиска журналов для контейнера, который `kubectl` не доступен в также не удастся здесь. Просмотрите функцию [«Вид в аналитике»,](container-insights-log-search.md#search-logs-to-analyze-data) чтобы узнать больше об просмотре исторических журналов, событий и метрик.  

После успешной проверки подлинности консольная панель Live Data (preview) будет отображаться ниже сетки данных производительности. Извлекаются метрические данные и начинаются потоковое воспроизведение на консоль в двух диаграммах. Название панели показывает имя стручка, с группированным контейнером.

![Просмотр примера метрик Стру](./media/container-insights-livedata-overview/pod-properties-live-metrics.png)  

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы продолжить изучение способов использования Azure Monitor и отслеживать другие аспекты кластера AKS, ознакомьтесь со статьей [Общие сведения о мониторинге производительности кластера AKS с помощью Azure Monitor для контейнеров (предварительная версия)](container-insights-analyze.md).

- Просмотр [примеров запросов журналов](container-insights-log-search.md#search-logs-to-analyze-data) для просмотра предопределенных запросов и примеров для создания оповещений, визуализаций или выполнения дальнейшего анализа кластеров.
