---
title: Мониторинг Azure Cosmos DB с Azure Monitor для Cosmos DB (предварительный просмотр) Документы Майкрософт
description: В этой статье описывается функция Azure Monitor for Cosmos DB, которая обеспечивает владельцам Cosmos DB быстрое понимание проблем производительности и использования с их учетными записями CosmosDB.
ms.subservice: ''
ms.topic: conceptual
author: mrbullwinkle
ms.author: mbullwin
ms.date: 10/27/2019
ms.openlocfilehash: 9a900a2f2e950fe9b9846ebcc047d7c344284948
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "78250674"
---
# <a name="explore-azure-monitor-for-azure-cosmos-db-preview"></a>Исследуйте azure Monitor для Azure Cosmos DB (предварительный просмотр)

Azure Monitor for Azure Cosmos DB (предварительный просмотр) предоставляет представление об общей производительности, сбоях, емкости и рабочем состоянии всех ресурсов Azure Cosmos DB в едином интерактивном интерфейсе. Эта статья поможет вам понять преимущества этого нового опыта мониторинга, и как вы можете изменить и адаптировать опыт в соответствии с уникальными потребностями вашей организации.   

## <a name="introduction"></a>Вступление

Прежде чем погрузиться в опыт, вы должны понять, как он представляет и визуализирует информацию. 

Он обеспечивает:

* **В масштабе перспективы** ваших ресурсов Azure Cosmos DB во всех ваших подписках в одном месте, с возможностью выборочно охвата только тех подписок и ресурсов, которые вы заинтересованы в оценке.

* **Просверлите анализ** конкретного ресурса Azure CosmosDB, чтобы помочь диагностировать проблемы или выполнить подробный анализ по категориям - использование, сбои, емкость и операции. Выбор любого из этих вариантов позволяет подробно рассмотреть соответствующие метрики Azure Cosmos DB.  

* **Настраиваемый** - Этот опыт построен поверх шаблонов рабочей книги Azure Monitor, что позволяет изменять теметри, отображаемые, изменять или устанавливать пороги, которые соответствуют вашим ограничениям, а затем сохранять в пользовательской трудовой книжке. Диаграммы в трудовых книжках можно прикрепить к панелям мониторинга Azure.  

Эта функция не требует от вас включить или настроить что-либо, эти показатели Azure Cosmos DB собираются по умолчанию.

>[!NOTE]
>Доступ к этой функции не взимается, и с вас будет взиматься плата только за основные функции Azure Monitor, которые вы настраиваете или включаете, как описано на странице [данных о ценах Azure Monitor.](https://azure.microsoft.com/pricing/details/monitor/)

## <a name="view-utilization-and-performance-metrics-for-azure-cosmos-db"></a>Просмотр метрик использования и производительности для Azure Cosmos DB

Для просмотра использования и производительности учетных записей хранилища во всех подписях выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com).

2. Поиск **монитора** и выберите **монитор**.

    ![Коробка поиска со словом "Монитор" и падение, которое говорит Услуги "Монитор" с изображением стиля спидометра](./media/cosmosdb-insights-overview/search-monitor.png)

3. Выберите **Cosmos DB (предварительный просмотр)**.

    ![Скриншот обзорной рабочей книги Cosmos DB](./media/cosmosdb-insights-overview/cosmos-db.png)

### <a name="overview"></a>Обзор

На **обзоре**таблица отображает интерактивные метрики Azure Cosmos DB. Результаты можно отфильтровать на основе выбранных вариантов из следующих списков выпадающих списков:

* **Подписки** - перечислены только подписки с ресурсом Azure Cosmos DB.  

* **Космос DB** - Вы можете выбрать все, подмножество или единый ресурс Azure Cosmos DB.

* **Диапазон времени** - по умолчанию отображает последние 4 часа информации на основе соответствующих выделений.

Счетчик плитки под выпадающими списками свертывает общее количество ресурсов Azure Cosmos DB в выбранных подписках. В трудовой книжке, сообщающей метрики транзакций, имеется условное цветовое кодирование или тепловые карты для столбцов. Самый глубокий цвет имеет наивысшее значение, а более светлый цвет основан на самых низких значениях. 

Выбор стрелки выпадения рядом с одним из ресурсов Azure Cosmos DB покажет разбивку метрик производительности на уровне отдельных контейнеров баз данных:

![Расширенное падение, раскрывающее отдельные контейнеры базы данных и связанную с этим разбивку производительности](./media/cosmosdb-insights-overview/container-view.png)

Выбор имени ресурса Azure Cosmos DB, выделенного синим цветом, приведет вас к **обзору** по умолчанию для связанной учетной записи Azure Cosmos DB. 

### <a name="failures"></a>Сбои

Выберите **Сбои** в верхней части страницы и открывается часть шаблона **«Сбои».** Он показывает общее количество запросов с распределением ответов, которые составляют эти запросы:

![Скриншот сбоев с поломкой по типу запроса HTTP](./media/cosmosdb-insights-overview/failures.png)

| Код      |  Описание       | 
|-----------|:--------------------|
| `200 OK`  | Одна из следующих REST-операций завершена успешно. </br>- GET на ресурсе. </br> - PUT на ресурсе. </br> - POST на ресурсе. </br> - POST на сохраненном ресурсе процедуры для выполнения сохраненной процедуры.|
| `201 Created` | Операция POST для создания ресурса завершена успешно. |
| `404 Not Found` | Попытка выполнить операцию над ресурсом, который уже не существует. Например, ресурс мог быть уже удален. |

Полный список кодов статусов можно получить в [статье О Стате статуса Azure Cosmos DB HTTP.](https://docs.microsoft.com/rest/api/cosmos-db/http-status-codes-for-cosmosdb)

### <a name="capacity"></a>Capacity

Выберите **емкость** в верхней части страницы и **открывается** часть шаблона рабочей книги. Он показывает, сколько документов у вас есть, рост документов с течением времени, использование данных, и общее количество доступных хранилищ, которые вы оставили.  Это может быть использовано для выявления потенциальных проблем хранения и использования данных.

![Трудовая книжка емкости](./media/cosmosdb-insights-overview/capacity.png) 

Как и в справочнике обзоров, выбор выпадающего ресурса Azure Cosmos DB в столбце **подписки** покажет разбивку отдельных контейнеров, вписанных в базу данных.

### <a name="operations"></a>Операции 

Выберите **операции** в верхней части страницы и открывается часть **шаблона «Операции»** шаблона рабочей книги. Это дает вам возможность видеть ваши запросы разбиты по типу запросов. 

Таким образом, в приведенном ниже примере вы видите, что `eastus-billingint` в основном получают прочитаны запросы, но с небольшим количеством upsert и создать запросы. В `westeurope-billingint` то время как считывается только с точки зрения запроса, по крайней мере в течение последних четырех часов, что трудовая книжка в настоящее время охвата через его параметр диапазона времени.

![Операционная книга операций](./media/cosmosdb-insights-overview/operation.png) 

## <a name="pin-export-and-expand"></a>Pin, экспорт, и расширить

Вы можете прикрепить любой из разделов метрики к [панели мониторинга Azure,](https://docs.microsoft.com/azure/azure-portal/azure-portal-dashboards) выбрав значок pushpin в правом верхнем правом виде раздела.

![Метрика штифт раздела к примеру панели мониторинга](./media/cosmosdb-insights-overview/pin.png)

Для экспорта данных в формат Excel выберите значок внизстрелки слева от значка pushpin.

![Значок экспортной трудовой книжки](./media/cosmosdb-insights-overview/export.png)

Чтобы расширить или свернуть все выпадающие представления в трудовой книжке, выберите значок расширения слева от значка экспорта:

![Расширить значок трудовой книжки](./media/cosmosdb-insights-overview/expand.png)

## <a name="customize-azure-monitor-for-azure-cosmos-db-preview"></a>Настройка Azure Monitor для Azure Cosmos DB (предварительный просмотр)

Поскольку этот опыт построен на основе шаблонов рабочей книги Azure Monitor, у вас есть возможность **настроить** > **отстечение** и **сохранение** копии измененной версии в пользовательскую трудовую книгу. 

![Настройка бара](./media/cosmosdb-insights-overview/customize.png)

Рабочие книги сохраняются в группе ресурсов либо в разделе **"Мои отчеты",** который является конфиденциальной для вас, либо в разделе **"Общие отчеты",** доступном каждому, имеешь доступ к группе ресурсов. После сохранения пользовательской трудовой книжки, вам нужно пойти в галерею трудовых книжки, чтобы запустить его.

![Запуск галереи трудовых книжки из командной панели](./media/cosmosdb-insights-overview/gallery.png)

## <a name="next-steps"></a>Дальнейшие действия

* Настройка [метрических оповещений](../platform/alerts-metric.md) и [уведомлений о работоспособности службы](../../service-health/alerts-activity-log-service-notifications.md) для настройки автоматизированного оповещения для выявления проблем.

* Изучить сценарии книги предназначены для поддержки, как автор новых и настроить существующие отчеты, и многое другое, просматривая [Создание интерактивных отчетов с лазурным монитором рабочих книг](../app/usage-workbooks.md).
