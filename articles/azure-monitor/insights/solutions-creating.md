---
title: Создание решения по управлению в Azure | Документация Майкрософт
description: Решения по управлению включают в себя упакованные сценарии управления в Azure, которые клиенты могут добавить в свою рабочую область Log Analytics.  В этой статье описано, как создавать решения для управления, которые можно использовать в своей среде или предоставлять другим пользователям.
ms.subservice: ''
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 03/20/2017
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: f1605597c7716ba6a896c7ecdae968f07d66027b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77663221"
---
# <a name="design-and-build-a-management-solution-in-azure-preview"></a>Проектирование и сборка решения по управлению в Azure (предварительная версия)
> [!NOTE]
> Это предварительная документация по созданию решений по управлению в Azure, которая доступна в данный момент в режиме предварительной версии. Любые схемы, приведенные ниже, могут измениться.

[Решения по управлению]( solutions.md) предоставляют упакованные сценарии управления, которые клиенты могут добавить в свою рабочую область Log Analytics.  В этой статье описывается базовый процесс проектирования и создания решений по управлению, который подходит для большинства сценариев.  Если вы не знаете, как создавать решения по управлению, вы можете использовать эти сведения в качестве отправной точки, применяя основные понятия для работы с более сложными решениями по мере изменения своих потребностей.

## <a name="what-is-a-management-solution"></a>Что такое решение по управлению?

Решения по управлению содержат ресурсы Azure, которые используются для выполнения задач в рамках определенных сценариев управления.  Они реализуются как [шаблоны управления ресурсами](../../azure-resource-manager/templates/quickstart-create-templates-use-the-portal.md), которые содержат сведения об установке и настройке содержащихся в них ресурсов после установки решения.

Основная стратегия заключается в том, что решение по управлению запускается при создании отдельных компонентов в среде Azure.  Если все компоненты работают правильно, вы можете упаковать их в [файл решения по управлению]( solutions-solution-file.md). 


## <a name="design-your-solution"></a>Разработка решения
Самый распространенный шаблон для решения по управлению показан на следующей схеме.  Разные компоненты этого шаблона описываются ниже.

![Обзор решения для управления](media/solutions-creating/solution-overview.png)


### <a name="data-sources"></a>Источники данных
Первый шаг в разработке решения — это определение нужных данных из репозитория Log Analytics.  Эти данные собираться в [источнике данных](../../azure-monitor/platform/agent-data-sources.md) или [другом решении]( solutions.md). Возможно, вам понадобится настроить процесс их сбора.

В репозитории Log Analytics данные могут собираться из разных источников, как описано в статье [Источники данных в Log Analytics](../../azure-monitor/platform/agent-data-sources.md).  Сюда входят события в журнале событий Windows или события, созданные Syslog, а также счетчики производительности для клиентов Windows и Linux.  Вы также можете собирать данные из ресурсов Azure, полученных службой Azure Monitor.  

Если вам нужны данные, которых нет ни в одном из доступных источников данных, используйте [API сборщика данных HTTP](../../azure-monitor/platform/data-collector-api.md). Так вы сможете записывать данные в репозиторий Log Analytics из любого клиента, который может вызывать REST API.  Самый простой способ собирать пользовательские данные в решении по управлению — создать [модуль runbook в службе автоматизации Azure](../../automation/automation-runbook-types.md). Этот модуль собирает необходимые данные из Azure или внешних ресурсов и записывает их в репозиторий с помощью API сборщика данных.  

### <a name="log-searches"></a>Поиск по журналам
[Поиск по журналам](../../azure-monitor/log-query/log-query-overview.md) используется для извлечения и анализа данных в репозитории Log Analytics.  Поиск по журналам используется представлениями и оповещениями. Кроме того, это средство позволяет пользователям выполнять специальный анализ данных в репозитории.  

Определите любые запросы, которые, по вашему мнению, пригодятся пользователю, даже если эти запросы не используются представлениями или оповещениями.  Запросы будут доступны пользователю как сохраненные условия поиска на портале. Их также можно включить в [часть визуализации списка запросов](../../azure-monitor/platform/view-designer-parts.md#list-of-queries-part) в вашем представлении.

### <a name="alerts"></a>видны узлы
Для [оповещений в Log Analytics](../../azure-monitor/platform/alerts-overview.md) ошибки определяются с помощью [поиска по журналам](#log-searches) в данных репозитория.  В итоге либо пользователь получает уведомление об ошибке, либо эти ошибки обрабатываются автоматически. Вы должны определить разные условия оповещений для приложения и включить соответствующие правила оповещений в файл решения.

Если проблема устранима с помощью автоматизированного процесса, создайте модуль runbook в службе автоматизации Azure. Ошибка будет исправлена автоматически.  Большинством служб Azure можно управлять с помощью [командлетов](/powershell/azure/overview), используемых модулем runbook.

Если решению требуются внешние функции для обработки оповещения, вы можете использовать [ответ webhook](../../azure-monitor/platform/alerts-metric.md).  Этот ответ позволяет вызывать внешнюю веб-службу, отправляя информацию из оповещения.

### <a name="views"></a>Представления
Представления в Log Analytics используются для визуализации данных из репозитория Log Analytics.  Каждое решение обычно содержит одно представление с [плиткой](../../azure-monitor/platform/view-designer-tiles.md), которая отображается на основной панели мониторинга пользователя.  Представление может содержать сколько угодно [частей визуализации](../../azure-monitor/platform/view-designer-parts.md), чтобы пользователь мог просматривать разные визуализации собранных данных.

[Создавайте пользовательские представления с помощью конструктора представлений](../../azure-monitor/platform/view-designer.md), которые вы сможете потом экспортировать в файл решения.  


## <a name="create-solution-file"></a>Создание файла решения
После настройки и тестирования компонентов, которые будут входить в решение, можно [создавать файл решения]( solutions-solution-file.md).  Реализуйте компоненты решения в [шаблоне Resource Manager](../../azure-resource-manager/templates/template-syntax.md), который включает [ресурс решения]( solutions-solution-file.md#solution-resource) и связи с другими ресурсами в файле.  


## <a name="test-your-solution"></a>Тестирование решения
В ходе разработки решения вам нужно установить его и протестировать в рабочей области.  Это можно сделать с помощью любого из методов [тестирования и установки шаблонов Resource Managerв](../../azure-resource-manager/templates/deploy-powershell.md).

## <a name="publish-your-solution"></a>Опубликуйте свое решения
После того как решение будет создано и протестировано, вы можете предоставить клиентам доступ к нему, используя следующие источники.

- **Шаблоны Azure кикстарта**.  [Шаблоны быстрого запуска Azure](https://azure.microsoft.com/resources/templates/) представляют набор шаблонов Resource Manager, предоставленные сообществом разработчиков через GitHub.  Чтобы предоставить доступ к решению, следуйте инструкциям в [руководстве по участию](https://github.com/Azure/azure-quickstart-templates/tree/master/1-CONTRIBUTION-GUIDE).
- **Лазурный рынок**.  На [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/) можно распространять решения среди других разработчиков, независимых поставщиков ПО и ИТ-специалистов, а также продавать решения.  Дополнительные сведения см. в статье [Как опубликовать предложение и управлять им в Azure Marketplace](../../marketplace/marketplace-publishers-guide.md).



## <a name="next-steps"></a>Дальнейшие действия
* Узнайте, как [создать файл решения]( solutions-solution-file.md) для решения по управлению.
* Узнайте больше о [создании шаблонов Azure Resource Manager](../../azure-resource-manager/templates/template-syntax.md).
* Найдите в коллекции [шаблонов быстрого запуска Azure](https://azure.microsoft.com/documentation/templates) примеры разных шаблонов Resource Manager.
