---
title: В Azure Monitor решение "данные передачи" | Документация Майкрософт
description: Wire data — это объединенные сетевые данные и данные производительности, передаваемые с компьютеров с помощью агентов Log Analytics. Сетевые данные вместе с данными журнала помогают коррелировать данные.
services: log-analytics
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: ''
ms.assetid: fc3d7127-0baa-4772-858a-5ba995d1519b
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.topic: conceptual
ms.date: 10/03/2018
ms.author: magoedte
ms.openlocfilehash: b7968de8ad4357241eb8d86d51e991f4bbab959d
ms.sourcegitcommit: 6ea7f0a6e9add35547c77eef26f34d2504796565
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2019
ms.locfileid: "65601572"
---
# <a name="wire-data-20-preview-solution-in-azure-monitor"></a>Решение Wire Data 2.0 (Предварительная версия) в Azure Monitor

![Символ Wire Data](media/wire-data/wire-data2-symbol.png)

Wire data — это объединенные сетевые данные и данные производительности, собираемые с компьютеров Windows или Linux с установленными агентами Log Analytics, включая данные, отслеживаемые Operations Manager в вашей среде. Сетевые данные вместе с другими данными журнала помогают коррелировать данные.

[!INCLUDE [azure-monitor-log-analytics-rebrand](../../../includes/azure-monitor-log-analytics-rebrand.md)]

Помимо агента Log Analytics, решение Wire Data использует агенты зависимостей Майкрософт, установленные на компьютерах в вашей ИТ-инфраструктуре. Агенты зависимостей отслеживают сетевые данные, отправляемые на эти компьютеры и с них, для сетевых уровней 2–3 в [модели OSI](https://en.wikipedia.org/wiki/OSI_model), включая различные используемые протоколы и порты. Данных затем передаются в Azure Monitor с помощью агентов.  

>[!NOTE]
>Если вы уже развернули услуги или планируют услуги или [Azure Monitor для виртуальных машин](../../azure-monitor/insights/vminsights-overview.md), имеется нового подключения метрики набора данных они сбора и хранения в Azure Monitor, предоставляющий сведений для сравнения с данными передачи.

По умолчанию Azure Monitor записывает данные для ЦП, памяти, диска и данные о производительности сети из счетчиков, встроенных в Windows и Linux, а также другие счетчики производительности, которые можно задать. Процесс сбора сетевых и других данных выполняется в режиме реального времени для каждого агента, включая протоколы подсетей и протоколы уровня приложений, используемые компьютером.  Решение Wire Data ориентировано на сетевые данные на уровне приложения, а не на транспортном уровне TCP.  Это решение также не ориентировано на отдельные пакеты ACK и SYN.  Когда подтверждение будет завершено, подключение будет считаться активным и сторона будет помечена как подключенная. Подключение будет оставаться активным, пока на обеих сторонах сокет будет открытым и данные будут передаваться между этими сторонами.  После обеих сторон разорвет подключение, она будет помечена как отключенная.  Таким образом, учитывается только пропускная способность успешно переданных пакетов. Данные о повторно отправленных и непереданных пакетах не записываются.

Если вы использовали [sFlow](http://www.sflow.org/) или другое программное обеспечение с [протоколом etFlow от Cisco](https://www.cisco.com/c/en/us/products/collateral/ios-nx-os-software/ios-netflow/prod_white_paper0900aecd80406232.html), передаваемые статистические данные будут вам знакомы.

Ниже перечислены некоторые типы встроенных запросов поиска в журналах.

- агенты,предоставляющие данные передачи;
- IP-адреса агентов, предоставляющих данные передачи;
- исходящие подключения по IP-адресам;
- количество байт, отправленных протоколами приложений;
- количество байт, отправленных службой приложений;
- количество байт, полученных различными протоколами;
- общее количество отправленных и полученных байт по версии IP;
- среднее время задержки для подключений, которые оценивались как надежные;
- компьютерные процессы, которые инициировали или получали сетевой трафик;
- объем сетевого трафика для процесса.

Выполняя поиск с помощью данных передачи, можно отфильтровать и сгруппировать данные, чтобы просмотреть сведения об основных агентах и основных протоколах. Кроме того, можно узнать, когда определенные компьютеры (IP-адреса или MAC-адреса) взаимодействовали друг с другом, как долго длился процесс и сколько данных было отправлено. По сути вы просматриваете метаданные о сетевом трафике на основе поиска.

Однако просмотр метаданных не всегда полезен для проведения глубокой диагностики. Данные передачи в Azure Monitor не являются полным отражением сетевых данных.  Они не предназначены для расширенного устранения неполадок на уровне пакетов. Преимуществом использования агента, по сравнению с другими методами сбора является отсутствие необходимости установки устройств, перенастройки сетевых коммутаторов или выполнения сложных настроек. Данные передачи основаны на использовании агента — установите агент на компьютере, и он будет отслеживать свой собственный сетевой трафик. Еще одно преимущество проявляется в случае, если нужно отслеживать рабочие нагрузки, выполняющиеся у поставщиков облачных служб, поставщиков услуг размещения или в Microsoft Azure, где пользователь не является владельцем уровня структуры.

## <a name="connected-sources"></a>Подключенные источники

Решение "Данные передачи" получает данные от агента зависимостей Майкрософт. Агент зависимостей является зависимым от агента Log Analytics его соединения с Azure Monitor. Это означает, что сначала на сервере нужно установить и настроить агент Log Analytics, после чего можно будет установить Dependency Agent. В приведенной ниже таблице описаны подключенные источники, которые поддерживаются решением "Данные передачи".

| **Подключенный источник** | **Поддерживаются** | **Описание** |
| --- | --- | --- |
| Агенты Windows | Yes | Решение "Данные передачи" анализирует и собирает данные из компьютеров агентов Windows. <br><br> Кроме [агента Log Analytics для Windows](../../azure-monitor/platform/agent-windows.md) агентам Windows требуется Microsoft Dependency Agent. Полный список версий операционных систем см. в разделе [Поддерживаемые операционные системы](../../azure-monitor/insights/service-map-configure.md#supported-windows-operating-systems). |
| Агенты Linux | Yes | Решение "Данные передачи" анализирует и собирает данные из компьютеров агентов Linux.<br><br> Кроме [агента Log Analytics для Linux](../../azure-monitor/learn/quick-collect-linux-computer.md) агентам Linux требуется Microsoft Dependency Agent. Полный список версий операционных систем см. в разделе [Поддерживаемые операционные системы](../../azure-monitor/insights/service-map-configure.md#supported-linux-operating-systems). |
| Группа управления System Center Operations Manager | Yes | Решение "Данные передачи" анализирует и собирает данные из агентов Windows и Linux в подключенной [группе управления System Center Operations Manager](../../azure-monitor/platform/om-agents.md). <br><br> Прямое подключение из агента System Center Operations Manager к Azure Monitor является обязательным. |
| Учетная запись хранения Azure. | Нет  | Решение "Данные передачи" собирает данные из компьютеров агента, поэтому данные из службы хранилища Azure не собираются. |

В Windows Microsoft Monitoring Agent (MMA), System Center Operations Manager и Azure Monitor используется для сбора и отправки данных. В зависимости от контекста этот агент называется агентом System Center Operations Manager, агентом Log Analytics, MMA или Direct Agent. System Center Operations Manager и Azure Monitor предоставляют немного разные версии MMA. Каждый этих версий можно отчеты в System Center Operations Manager, Azure Monitor или к обоим.

В Linux агент Log Analytics для Linux собирает и отправляет данные в Azure Monitor. Данные передачи можно использовать на серверах с агентами, непосредственно подключенные к Azure Monitor или на серверах, которые подключаются к Azure Monitor через группы управления System Center Operations Manager.

Агент зависимостей самостоятельно не передает данные и не требует внесения изменений в брандмауэры или порты. Данные в данных передачи всегда передаются агентом Log Analytics в Azure Monitor, напрямую или через шлюз Log Analytics.

![Схема передачи данных агентами](./media/wire-data/agents.png)

Если вы являетесь пользователем System Center Operations Manager с группой управления, подключенной к Azure Monitor:

- Никаких дополнительных настроек не требуется, если у агентов System Center Operations Manager можно получить доступ к Интернет для подключения к Azure Monitor.
- Необходимо настроить шлюз Log Analytics для работы с System Center Operations Manager, если у агентов System Center Operations Manager не может получить доступ к Azure Monitor через Интернет.

Если компьютеры Windows или Linux не может подключиться непосредственно к службе, необходимо настроить агент Log Analytics для подключения к Azure Monitor с помощью шлюза Log Analytics. Шлюз Log Analytics можно скачать в [Центре загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=52666).

## <a name="prerequisites"></a>Технические условия

- Требуется предложение решения [Аналитика](https://www.microsoft.com/cloud-platform/operations-management-suite-pricing).
- Если вы используете предыдущую версию решения "Данные передачи", сначала необходимо ее удалить. Тем не менее все данные, зафиксированные с помощью исходного решения "Данные передачи", по-прежнему будут доступны в Wire Data 2.0 и для поиска по журналам.
- Для установки или удаления агента зависимостей требуются права администратора.
- Агент зависимостей нужно установить на компьютер с 64-разрядной операционной системой.

### <a name="operating-systems"></a>Операционные системы

В следующих разделах представлены поддерживаемые операционные системы для агента зависимостей. Решение "Данные передачи" не поддерживает 32-разрядные архитектуры операционных систем.

#### <a name="windows-server"></a>Windows Server

- Windows Server 2019
- Windows Server 2016 1803
- Windows Server 2016
- Windows Server 2012 R2
- Windows Server 2012
- Windows Server 2008 R2 с пакетом обновления 1

#### <a name="windows-desktop"></a>Классические приложения Windows

- Windows 10 1803
- Windows 10
- Windows 8.1
- Windows 8
- Windows 7

#### <a name="supported-linux-operating-systems"></a>Поддерживаемые операционные системы Linux
В следующих разделах перечислены поддерживаемые операционные системы для агента зависимостей в Linux.  

- Поддерживаются только версии ядра по умолчанию и SMP для Linux.
- Нестандартные версии ядра, такие как PAE и Xen, не поддерживаются ни в одном дистрибутиве Linux. Например, система со строкой версии "2.6.16.21-0.8-xen" не поддерживается.
- Пользовательские ядра, включая повторные компиляции стандартных ядер, не поддерживаются.

##### <a name="red-hat-linux-7"></a>Red Hat Linux 7

| Версия ОС | Версия ядра |
|:--|:--|
| 7.4 | 3.10.0-693 |
| 7.5 | 3.10.0-862 |
| 7.6 | 3.10.0-957 |

##### <a name="red-hat-linux-6"></a>Red Hat Linux 6

| Версия ОС | Версия ядра |
|:--|:--|
| 6.9 | 2.6.32-696 |
| 6.10 | 2.6.32-754 |

##### <a name="centosplus"></a>CentOSPlus
| Версия ОС | Версия ядра |
|:--|:--|
| 6.9 | 2.6.32-696.18.7<br>2.6.32-696.30.1 |
| 6.10 | 2.6.32-696.30.1<br>2.6.32-754.3.5 |

##### <a name="ubuntu-server"></a>Сервер Ubuntu

| Версия ОС | Версия ядра |
|:--|:--|
| Ubuntu 18.04 | ядро 4.15.\*<br>4.18* |
| Ubuntu 16.04.3 | ядро 4.15.* |
| 16.04 | 4.4.\*<br>4.8.\*<br>4.10.\*<br>4.11.\*<br>4.13.\* |
| 14.04 | 3.13.\*<br>4.4.\* |

##### <a name="suse-linux-11-enterprise-server"></a>SUSE Linux 11 Enterprise Server

| Версия ОС | Версия ядра
|:--|:--|
| 11 SP4 | 3.0.* |

##### <a name="suse-linux-12-enterprise-server"></a>SUSE Linux 12 Enterprise Server

| Версия ОС | Версия ядра
|:--|:--|
| 12 с пакетом обновления 2 | 4.4.* |
| 12 с пакетом обновления 3 | 4.4.* |

### <a name="dependency-agent-downloads"></a>Скачиваемые файлы Dependency Agent

| Файл | ОС | Version (версия) | SHA-256 |
|:--|:--|:--|:--|
| [InstallDependencyAgent-Windows.exe](https://aka.ms/dependencyagentwindows) |  Windows | 9.7.4 | A111B92AB6CF28EB68B696C60FE51F980BFDFF78C36A900575E17083972989E0 |
| [InstallDependencyAgent-Linux64.bin](https://aka.ms/dependencyagentlinux) | Linux | 9.7.4 | AB58F3DB8B1C3DEE7512690E5A65F1DFC41B43831543B5C040FCCE8390F2282C |



## <a name="configuration"></a>Параметр Configuration

Выполните следующие действия, чтобы настроить решение "Данные передачи" в своих рабочих областях.

1. Включите решение для анализа журналов действий из [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.WireData2OMS?tab=Overview) или используя процесс, описанный в [добавить решения из коллекции решений для мониторинга](../../azure-monitor/insights/solutions.md).
2. Установите агент зависимостей на каждом компьютере, где вы хотите получать данные. Агент зависимостей может отслеживать ближайшие соседние подключения, поэтому необязательно выполнять установку агента на каждом компьютере.

> [!NOTE]
> Нельзя добавить предыдущую версию решения "Данные передачи" в новые рабочие области. Если у вас включено исходное решение "Данные передачи", вы можете продолжать его использовать. Однако для использования Wire Data 2.0 необходимо сначала удалить исходную версию.
> 
 
### <a name="install-the-dependency-agent-on-windows"></a>Установка агента зависимостей в Windows

Для установки или удаления агента требуются права администратора.

Агент зависимостей устанавливается на компьютерах Windows с помощью файла InstallDependencyAgent-Windows.exe. Если запустить этот исполняемый файл без параметров, запустится мастер для установки в интерактивном режиме.

Выполните приведенные шаги, чтобы установить агент зависимостей на каждом компьютере Windows.

1. Установите агент Log Analytics, выполнив действия, приведенные в статье [Подключение компьютеров Windows к службе Log Analytics в Azure](../../azure-monitor/platform/agent-windows.md).
2. Скачайте агент зависимостей для Windows, используя ссылку в предыдущем разделе, а затем запустите его с помощью команды `InstallDependencyAgent-Windows.exe`.
3. Следуйте инструкциям мастера для установки агента.
4. Если агент зависимостей не запускается, просмотрите подробные сведения об ошибке в записях журналов. В агентах Windows каталогом журналов является каталог %Programfiles%\Microsoft Dependency Agent\logs.

#### <a name="windows-command-line"></a>Командная строка Windows

Используйте параметры из следующей таблицы для установки из командной строки. Чтобы просмотреть список параметров установки, запустите установщик с параметром /? /? следующим образом.

InstallDependencyAgent-Windows.exe /?

| **Параметр** | **Описание** |
| --- | --- |
| <code>/?</code> | Получает список параметров командной строки. |
| <code>/S</code> | Выполняет автоматическую установку без вывода сообщений для пользователя. |

Файлы для агента зависимостей Windows по умолчанию размещаются в папке C:\Program Files\Microsoft Dependency Agent.

### <a name="install-the-dependency-agent-on-linux"></a>Установка агента зависимостей в Linux

Для установки или настройки агента требуется доступ с правами привилегированного пользователя.

Агент зависимостей устанавливается на компьютерах Linux с помощью файла InstallDependencyAgent-Linux64.bin. Это скрипт оболочки с самоизвлекающимся двоичным файлом. Вы можете запустить этот файл с помощью _sh_ или добавить разрешения на выполнение в сам файл.

Выполните приведение шаги, чтобы установить агент зависимостей на каждом компьютере Linux.

1. Установите агент Log Analytics, выполнив действия, приведенные в статье [Настройка агента Log Analytics для компьютеров Linux в гибридной среде](../../azure-monitor/learn/quick-collect-linux-computer.md#obtain-workspace-id-and-key).
2. Скачайте агент зависимостей для Linux, используя ссылку в предыдущем разделе, установите его с правами привилегированного пользователя, а затем запустите с помощью команды InstallDependencyAgent-Linux64.bin.
3. Если агент зависимостей не запускается, просмотрите подробные сведения об ошибке в записях журналов. В агентах Linux каталог журналов находится в расположении /var/opt/microsoft/dependency-agent/log.

Чтобы просмотреть список параметров установки, запустите программу установки с параметров `-help` указанным ниже образом.

```
InstallDependencyAgent-Linux64.bin -help
```

| **Параметр** | **Описание** |
| --- | --- |
| <code>-help</code> | Получает список параметров командной строки. |
| <code>-s</code> | Выполняет автоматическую установку без вывода сообщений для пользователя. |
| <code>--check</code> | Проверяет разрешения и операционную систему, но не устанавливает агент. |

Файлы для агента зависимостей размещаются в следующих каталогах.

| **Файлы** | **Местоположение.** |
| --- | --- |
| Основные файлы | /opt/microsoft/dependency-agent |
| Файлы журналов | /var/opt/microsoft/dependency-agent/log |
| Файлы конфигурации | /etc/opt/microsoft/dependency-agent/config |
| Исполняемые файлы службы | /opt/microsoft/dependency-agent/bin/microsoft-dependency-agent<br><br>/opt/microsoft/dependency-agent/bin/microsoft-dependency-agent-manager |
| Двоичные файлы хранилища | /var/opt/microsoft/dependency-agent/storage |

### <a name="installation-script-examples"></a>Примеры скриптов установки

Чтобы легко развернуть агент зависимостей сразу на нескольких серверах, можно использовать скрипт. Для скачивания и установки агента зависимостей в Windows или Linux можно использовать приведенные ниже примеры скриптов.

#### <a name="powershell-script-for-windows"></a>Скрипт PowerShell для Windows

```powershell

Invoke-WebRequest "https://aka.ms/dependencyagentwindows" -OutFile InstallDependencyAgent-Windows.exe

.\InstallDependencyAgent-Windows.exe /S

```

#### <a name="shell-script-for-linux"></a>Скрипт оболочки для Linux

```
wget --content-disposition https://aka.ms/dependencyagentlinux -O InstallDependencyAgent-Linux64.bin
```

```
sh InstallDependencyAgent-Linux64.bin -s
```

### <a name="desired-state-configuration"></a>Настройка требуемого состояния

Чтобы развернуть агент зависимостей посредством Desired State Configuration, можно использовать модуль xPSDesiredStateConfiguration и небольшой фрагмент кода, как показано ниже.

```powershell
Import-DscResource -ModuleName xPSDesiredStateConfiguration

$DAPackageLocalPath = "C:\InstallDependencyAgent-Windows.exe"



Node $NodeName

{

    # Download and install the Dependency Agent

    xRemoteFile DAPackage

    {

        Uri = "https://aka.ms/dependencyagentwindows"

        DestinationPath = $DAPackageLocalPath

        DependsOn = "[Package]OI"

    }

    xPackage DA

    {

        Ensure = "Present"

        Name = "Dependency Agent"

        Path = $DAPackageLocalPath

        Arguments = '/S'

        ProductId = ""

        InstalledCheckRegKey = "HKEY\_LOCAL\_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\DependencyAgent"

        InstalledCheckRegValueName = "DisplayName"

        InstalledCheckRegValueData = "Dependency Agent"

    }

}

```

### <a name="uninstall-the-dependency-agent"></a>Удаление агента зависимостей

Используйте следующие разделы для удаления агента зависимостей.

#### <a name="uninstall-the-dependency-agent-on-windows"></a>Удаление агента зависимостей в Windows

Администратор может удалить агент зависимостей для Windows через панель управления.

Для удаления агента зависимостей администратор может также запустить файл %Programfiles%\Microsoft Dependency Agent\Uninstall.exe.

#### <a name="uninstall-the-dependency-agent-on-linux"></a>Удаление агента зависимостей в Linux

Чтобы полностью удалить агент зависимостей в Linux, необходимо удалить сам агент и соединитель, который автоматически устанавливается с агентом. Удалить и то, и другое одновременно можно с помощью одной команды.

```
rpm -e dependency-agent dependency-agent-connector
```

## <a name="management-packs"></a>Пакеты управления

Если решение "Данные передачи" активировано в рабочей области Log Analytics, то на все серверы в этой рабочей области отправляется пакет управления размером 300 КБ. Если агенты System Center Operations Manager используются в [подключенной группе управления](../platform/om-agents.md), то пакет управления монитора зависимости развертывается из System Center Operations Manager. Если агенты подключены напрямую, пакет управления доставляется с Azure Monitor.

Пакет управления называется Microsoft.IntelligencePacks.ApplicationDependencyMonitor. Он записывается в папку %Programfiles%\Microsoft Monitoring Agent\Agent\Health Service State\Management Packs. Источник данных, используемый пакетом управления, — %Program files%\Microsoft Monitoring Agent\Agent\Health Service State\Resources&lt;Автоматически_созданный_идентификатор&gt;\Microsoft.EnterpriseManagement.Advisor.ApplicationDependencyMonitorDataSource.dll.

## <a name="using-the-solution"></a>Использование решения

Для установки и настройки решений используйте указанные ниже данные.

- Решение "Данные передачи" получает данные с компьютеров под управлением Windows Server 2012 R2, Windows 8.1 и более поздних операционных систем.
- На компьютерах, с которых предполагается выполнять сбор данных передачи, необходимо установить Microsoft .NET Framework 4.0 или более поздней версии.
- Добавление решения данных передачи в рабочую область Log Analytics, используя процесс, описанный в [добавить решения из коллекции решений для мониторинга](solutions.md). Дополнительная настройка не требуется.
- Для просмотра данных передачи для конкретного решения это решение должно быть уже добавлено в рабочую область.

После установки агентов и решения в вашей рабочей области отобразится плитка Wire Data 2.0.

![Плитка "Данные передачи"](./media/wire-data/wire-data-tile.png)

## <a name="using-the-wire-data-20-solution"></a>Использование решения Wire Data 2.0

На странице **Обзор** в рабочей области Log Analytics на портале Azure щелкните плитку **Wire Data 2.0**, чтобы открыть панель мониторинга Wire Data. Панель мониторинга содержит колонки, перечисленные в приведенной ниже таблице. В каждой колонке содержится максимум 10 элементов, соответствующих таким указанным критериям, как область действия и диапазон времени. Вы можете выполнить поиск по журналам, в результате которого возвращаются все записи, если щелкнуть заголовок колонки или **Показать все** в ее нижней части.

| **Колонка** | **Описание** |
| --- | --- |
| Агенты, записывающие сетевой трафик | Отображает число агентов, которые записывают сетевой трафик, и показывает первые 10 компьютеров, записывающих сетевой трафик. Щелкните количество, чтобы выполнить поиск по журналам: <code>WireData \| summarize sum(TotalBytes) by Computer \| take 500000</code>. Щелкните в списке компьютер, чтобы выполнить поиск по журналам и получить общее число записанных байт. |
| Локальные подсети | Показывает число локальных подсетей, которые обнаружили агенты.  Щелкните число, чтобы выполнить поиск по журналам: <code>WireData \| summarize sum(TotalBytes) by LocalSubnet</code>. В результате вы получите список всех подсетей и количество байт, отправленных в каждой из них. Выберите подсеть в списке, чтобы выполнить поиск по журналам и получить общее число байт, отправленных в подсети. |
| Протоколы уровня приложений | Показывает количество используемых протоколов уровня приложений, обнаруженных агентами. Щелкните количество, чтобы выполнить поиск по журналам: <code>WireData \| summarize sum(TotalBytes) by ApplicationProtocol</code>. Щелкните в списке протокол, чтобы выполнить поиск по журналам и получить общее число байт, отправленных с помощью протокола. |

![Панель мониторинга "Данные передачи"](./media/wire-data/wire-data-dash.png)

Используйте колонку **Агенты, записывающие сетевой трафик**, чтобы определить, какой процент пропускной способности сети используется компьютерами. Эта колонка поможет найти самый _активный_ компьютер в среде. Такие компьютеры могут быть перегружены, работать со сбоями либо использовать больше сетевых ресурсов, чем обычно.

![Пример поиска по журналам](./media/wire-data/log-search-example01.png)

Вы также можете использовать колонку **Локальные подсети**, чтобы определить объем сетевого трафика, проходящего через подсети. Пользователи часто создают подсети для важных областей своих приложений. Эта колонка позволяет просматривать такие области.

![Пример поиска по журналам](./media/wire-data/log-search-example02.png)

Колонка **Протоколы уровня приложений** помогает узнать, какие протоколы используются. Например, вы ожидаете, что SSH не используется в вашей сетевой среде. С помощью этой колонки можно быстро проверить, так ли это.

![Пример поиска по журналам](./media/wire-data/log-search-example03.png)

Также полезно знать об увеличении или уменьшении трафика по протоколу по прошествии времени. Например, если объем данных, передаваемых приложением, увеличился, вам следует об этом знать.

## <a name="input-data"></a>Входные данные

Данные передачи собирают метаданные о сетевом трафике с помощью включенных агентов. Каждый агент передает данные примерно каждые 15 секунд.

## <a name="output-data"></a>Выходные данные

Для каждого типа входных данных создается запись с данными о типе _WireData_. У этих записей есть свойства, приведенные в таблице ниже.

| Свойство | ОПИСАНИЕ |
|---|---|
| Computer | Имя компьютера, на котором были собраны данные |
| TimeGenerated | Время создания записи |
| LocalIP | IP-адрес локального компьютера |
| SessionState | Подключен или отключен |
| ReceivedBytes | Число полученных байт |
| ProtocolName | Имя сетевого протокола, который используется |
| IPVersion | Версия IP |
| Direction | Входящий или исходящий |
| MaliciousIP | IP-адрес известного вредоносного источника |
| Severity | Опасность потенциально вредоносной программы |
| RemoteIPCountry | Страна удаленного IP-адреса |
| ManagementGroupName | Имя группы управления Operations Manager |
| SourceSystem | Источник, на котором были собраны данные |
| SessionStartTime | Время начала сеанса |
| SessionEndTime | Время окончания сеанса |
| LocalSubnet | Подсеть, в которой были собраны данные |
| LocalPortNumber | Номер локального порта |
| RemoteIP | Удаленный IP-адрес, используемый удаленным компьютером |
| RemotePortNumber | Номер порта, используемый удаленным IP-адресом |
| SessionID | Уникальное значение, которое идентифицирует сеанс связи между двумя IP-адресами |
| SentBytes | Число отправленных байт |
| TotalBytes | Общее число байтов, отправленных в течение сеанса |
| ApplicationProtocol | Тип используемого сетевого протокола   |
| ProcessID | Идентификатор процесса Windows |
| ProcessName | Путь и имя файла процесса |
| RemoteIPLongitude | Значение долготы IP |
| RemoteIPLatitude | Значение широты IP |


## <a name="next-steps"></a>Дальнейшие действия

- [поиск в журналах](../../azure-monitor/log-query/log-query-overview.md) , чтобы просмотреть подробные записи поиска данных передачи.