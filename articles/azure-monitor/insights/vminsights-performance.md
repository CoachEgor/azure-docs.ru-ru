---
title: Создание диаграммы производительности с помощью службы Azure Monitor для виртуальных машин
description: "\"Производительность\" — это функция службы Azure Monitor для виртуальных машин, которая автоматически обнаруживает компоненты приложений в системах Windows и Linux и отображает связи между службами. В этой статье рассказывается о том, как использовать эту функцию в различных сценариях."
ms.subservice: ''
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 10/15/2019
ms.openlocfilehash: a50ba39777e6a9d3d609e584c0c7d872f2a65f35
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80283724"
---
# <a name="how-to-chart-performance-with-azure-monitor-for-vms"></a>Создание диаграммы производительности с помощью службы Azure Monitor для виртуальных машин

Служба Azure Monitor для виртуальных машин включает в себя набор диаграмм производительности, ориентированных на несколько ключевых показателей эффективности (KPI), которые помогают определить, насколько эффективно работает виртуальная машина. На диаграммах отображается использование ресурсов за определенный период времени, что позволяет выявлять узкие места, аномалии, а также переключаться на перспективное представление каждой виртуальной машины для просмотра использования ресурсов на основе выбранной метрики. Хотя при анализе производительности следует учитывать множество элементов, Azure Monitor для виртуальных машин отслеживает ключевые показатели производительности операционной системы, связанные с работой процессора, памяти, сетевого адаптера и диска. Функция "Производительность" дополняет функцию мониторинга работоспособности и помогает выявлять проблемы, которые указывают на возможный отказ компонентов системы, поддерживает настройку и оптимизацию для повышения эффективности, а также планирование ресурсов.  

## <a name="multi-vm-perspective-from-azure-monitor"></a>Перспективное представление нескольких виртуальных машин в Azure Monitor

Функция производительности От Azure Monitor предоставляет представление всех контролируемых ВМ, развернутых в рабочих группах в подписках или в вашей среде. Чтобы получить доступ к Azure Monitor, выполните указанные ниже действия. 

1. На портале Azure выберите **Monitor**. 
2. Выберите **виртуальные машины** в разделе **Решения.**
3. Выберите вкладку **Производительность**.

![Представление списка первых N диаграмм производительности в аналитике виртуальных машин](media/vminsights-performance/vminsights-performance-aggview-01.png)

На вкладке **Top N Charts** (Первые N диаграмм), если у вас несколько рабочих областей Log Analytics, выберите рабочую область, которая включена в решении, в селекторе **Рабочая область** вверху страницы. Селектор **Группа** возвращает подписки, группы ресурсов, [группы компьютеров](../platform/computer-groups.md) и масштабируемые наборы виртуальных машин с компьютеров, связанных с выбранной рабочей областью, которые вы можете использовать для дальнейшей фильтрации результатов, представленных на диаграммах этой и других страниц. Выбор применяется только к функции производительности и не применяется к работоспособности и сопоставлению.  

По умолчанию на диаграммах отображаются последние 24 часа. С помощью селектора **Временной интервал** можно запросить временной интервал длительностью до 30 дней, чтобы отобразить производительность за прошедший период.

На странице отображаются пять диаграмм использования ресурсов:

* "Загрузка ЦП (%)" — показывает первые пять компьютеров с наибольшей средней загрузкой процессоров. 
* "Доступная память" — показывает первые пять компьютеров с наименьшим средним объемом доступной памяти. 
* Logical Disk Space Used % (% используемого места на логических дисках) — показывает первые пять компьютеров с наибольшим средним процентом использования места на всех томах дисков. 
* Bytes Sent Rate (Скорость отправки байт) — показывает первые пять компьютеров с наибольшим средним количеством отправленных байт. 
* Bytes Receive Rate - показывает пятерку машин с самым высоким средним байтами, полученными 

Нажав на значок штифта в правом верхнем углу любой из пяти диаграмм, можно прикрепить выбранную диаграмму к последней панели мониторинга Azure, которая в последний раз просматривала.  С панели мониторинга можно изменить размер и изменить положение диаграммы. Выбор диаграммы из панели мониторинга перенаправит вас на Azure Monitor для вс-голов и загрузит правильный объем и представление.  

Нажатие на значок, расположенный слева от значка контактный на любой из пяти диаграмм открывает вид **Top N List.**  Здесь можно просмотреть использование ресурсов для соответствующей метрики производительности по отдельным виртуальным машинам в виде списка и увидеть, для какой виртуальной машины характерны наиболее высокие показатели.  

![Вид списка первых N для выбранной метрики производительности](media/vminsights-performance/vminsights-performance-topnlist-01.png)

При нажатии на виртуальную машину панель **Свойств** расширяется на право отображать свойства выбранного элемента, такие как системная информация, сообщаемые операционной системой, свойства Azure VM и т.д. Нажав на один из вариантов в разделе **Быстрые ссылки** перенаправит вас на эту функцию непосредственно из выбранного VM.  

![Область "Свойства" виртуальной машины](./media/vminsights-performance/vminsights-properties-pane-01.png)

Переключитесь на вкладку **Aggregated Charts** (Сводные диаграммы), чтобы просмотреть метрики производительности, отфильтрованные по средним показателям или процентилям.  

![Сводное представление производительности в аналитике виртуальных машин](./media/vminsights-performance/vminsights-performance-aggview-02.png)

Отображаются следующие диаграммы использования ресурсов:

* "Загрузка ЦП (%)" — по умолчанию отображаются среднее значение и верхний 95-й процентиль. 
* Доступная память - по умолчанию, показывающие средний, верхний 5-й и 10-й процентиль 
* Logical Disk Space Used % (% используемого места на логических дисках) — по умолчанию отображаются среднее значение и 95-й процентиль. 
* Bytes Sent Rate (Скорость отправки байт) — по умолчанию отображается среднее количество отправленных байт. 
* Bytes Receive Rate (Скорость получения байт) — по умолчанию отображается среднее количество полученных байт.

Также в диапазоне времени можно изменить детализацию диаграмм, выбрав **Ср.**, **Мин.**, **Макс.**, **50-й**, **90-й** и **95-й** в селекторе процентилей.

Чтобы просмотреть использование ресурсов отдельным VM в представлении списка и увидеть, какая машина имеет тенденцию с самым высоким использованием, выберите вкладку **Top N List.**  На странице **Top N List** показаны 20 лучших машин, отсортированных по наиболее используемым 95-м процентиле для метрического использования *процессора%*.  Чтобы просмотреть дополнительные машины, выберите **Загрузить больше**. Отобразятся результаты для первых 500 виртуальных машин. 

>[!NOTE]
>В списке нельзя отобразить более чем 500 машин одновременно.  
>

![Пример страницы Top N List (Список первых N)](./media/vminsights-performance/vminsights-performance-topnlist-01.png)

Чтобы отфильтровать результаты по конкретной виртуальной машине в списке, введите ее имя компьютера в текстовое поле **Поиск по имени**.  

Если требуется просмотреть сведения об использовании по другой метрике производительности, в раскрывающемся списке **Метрика** выберите **Доступная память**, **Logical Disk Space Used %** (% используемого места на логических дисках), **Network Received Byte/s** (Получено байт по сети/с) или **Network Sent Byte/s** (Отправлено байт по сети/с), и список обновится, отображая показатели использования по соответствующей метрике.  

Если выбрать виртуальную машину из списка, откроется панель **Свойства** в правой части страницы, где можно выбрать **Сведения о производительности**.  Откроется страница **сведений о виртуальной машине**, ограниченных соответствующей виртуальной машиной, подобно доступу к функции "Производительность" аналитики виртуальных машин непосредственно с виртуальной машины Azure.  

## <a name="view-performance-directly-from-an-azure-vm"></a>Просмотр производительности непосредственно с виртуальной машины Azure

Чтобы получить доступ непосредственно от виртуальной машины, выполните следующие шаги.

1. На портале Azure выберите **Виртуальные машины**. 
2. Из списка выберите VM и в разделе **Мониторинг** выберите **Исследования.**  
3. Выберите вкладку **Производительность**. 

Эта страница содержит не только диаграммы использования производительности, но и таблицу с отображением каждого обнаруженного логического диска, его емкости, использования и общего среднего значения по каждому показателю.  

Отображаются следующие диаграммы использования ресурсов:

* "Загрузка ЦП (%)" — по умолчанию отображаются среднее значение и верхний 95-й процентиль. 
* Доступная память - по умолчанию, показывающие средний, верхний 5-й и 10-й процентиль 
* Logical Disk Space Used % (% используемого места на логических дисках) — по умолчанию отображаются среднее значение и 95-й процентиль. 
* Logical Disk IOPS (Операций ввода-вывода в секунду для логических дисков) — по умолчанию отображаются среднее значение и 95-й процентиль.
* Logical Disk MB/s (Мбит/с для логических дисков) — по умолчанию отображаются среднее значение и 95-й процентиль.
* Max Logical Disk Used % (Макс. % использования логических дисков) — по умолчанию отображаются среднее значение и 95-й процентиль.
* Bytes Sent Rate (Скорость отправки байт) — по умолчанию отображается среднее количество отправленных байт. 
* Bytes Receive Rate (Скорость получения байт) — по умолчанию отображается среднее количество полученных байт.

Нажав на значок штифта в правом верхнем углу любой из диаграмм прикрепляет выбранную диаграмму к последней панели мониторинга Azure, которая просматривается. С панели мониторинга можно изменить размер и изменить положение диаграммы. Выбор диаграммы с панели мониторинга перенаправляет вас в Azure Monitor для вс-голов и загружает представление деталей производительности для VM.  

![Представление производительности непосредственно с виртуальной машины в аналитике виртуальных машин](./media/vminsights-performance/vminsights-performance-directvm-01.png)

## <a name="view-performance-directly-from-an-azure-virtual-machine-scale-set"></a>Просмотр производительности непосредственно из набора виртуальной машины Azure

Чтобы получить прямой доступ из набора виртуальной машины Azure, выполните следующие шаги.

1. На портале Azure выберите **наборы виртуальной шкалы машин.**
2. Из списка выберите VM, а в разделе **«Мониторинг»** выберите **Insights** для просмотра вкладки **«Производительность».**

Эта страница загружает представление производительности Azure Monitor, привязываемые к выбранной шкале. Это позволяет просматривать Верхние N Instances в шкале, установленной в наборе контролируемых метрик, просматривать совокупную производительность в наборе масштабов и видеть тенденции для выбранных метрик в отдельных экземплярах n набора масштаба. Выбор экземпляра из представления списка позволяет загрузить карту или перейти в подробное представление производительности для этого экземпляра.

Нажав на значок штифта в правом верхнем углу любой из диаграмм прикрепляет выбранную диаграмму к последней панели мониторинга Azure, которая просматривается. С панели мониторинга можно изменить размер и изменить положение диаграммы. Выбор диаграммы с панели мониторинга перенаправляет вас в Azure Monitor для вс-голов и загружает представление деталей производительности для VM.  

![VM производительность непосредственно из виртуального набора масштаба машины зрения](./media/vminsights-performance/vminsights-performance-directvmss-01.png)

>[!NOTE]
>Можно также получить доступ к подробному представлению производительности для определенного экземпляра из представления Instances для набора масштабов. Перейдите к **инстанциям** в разделе **Настройки,** а затем выберите **Исследования.**



## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как использовать [рабочие книги,](vminsights-workbooks.md) включенные в Azure Monitor для вс-ми-мидонов, для дальнейшего анализа показателей производительности и сетевых данных.  

- Чтобы узнать об обнаруженных зависимостях приложений, [см.](vminsights-maps.md)
