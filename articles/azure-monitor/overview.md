---
title: Общие сведения о службе Azure Monitor | Microsoft Docs
description: Обзор функциональных возможностей и служб Майкрософт, которые являются частью стратегии мониторинга ваших служб и приложений в Azure.
ms.subservice: ''
ms.topic: overview
author: bwren
ms.author: bwren
ms.date: 10/07/2019
ms.openlocfilehash: cfdd0beac7d257a424d327df71602b4612c3da3b
ms.sourcegitcommit: 58faa9fcbd62f3ac37ff0a65ab9357a01051a64f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "79536859"
---
# <a name="azure-monitor-overview"></a>Общие сведения о службе Azure Monitor

Служба Azure Monitor обеспечивает максимальную доступность и производительность приложений и служб, предоставляя полноценное решение для сбора, анализа и обработки данных телеметрии из облачных и локальных сред. Она поможет вам понять, как выполняются приложения, а также заранее определить проблемы, влияющие на них, и ресурсы, от которых они зависят.

Вот несколько примеров того, что можно сделать с помощью Azure Monitor:

- Выявлять и диагностировать проблемы и зависимости между приложениями с помощью [Application Insights](app/app-insights-overview.md).
- Сопоставлять проблемы инфраструктуры с [Azure Monitor для виртуальных машин](insights/vminsights-overview.md) и [Azure Monitor для контейнеров](insights/container-insights-overview.md).
- Анализировать данные мониторинга с помощью [Log Analytics](log-query/log-query-overview.md) для устранения неполадок и выполнения глубокой диагностики.
- Поддерживать работу при масштабировании с помощью [интеллектуальных оповещений](platform/alerts-smartgroups-overview.md) и [автоматизированных действий](platform/alerts-action-rules.md).
- Создавать визуализации с помощью [информационных панелей](learn/tutorial-logs-dashboards.md) и [книг](app/usage-workbooks.md) Azure.

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4qXeL]


[!INCLUDE [azure-lighthouse-supported-service](../../includes/azure-lighthouse-supported-service.md)]

## <a name="overview"></a>Обзор

На приведенной ниже схеме показано высокоуровневое представление Azure Monitor. В центре схемы находятся хранилища данных для метрик и журналов — двух основных типов данных, используемых службой Azure Monitor. В левой части находятся [источники данных мониторинга](platform/data-sources.md), наполняющие эти [хранилища данных](platform/data-platform.md). Справа находятся различные операции, которые Azure Monitor выполняет с собранными данными (например, анализ, оповещение и потоковая передача во внешние системы).

![Общие сведения о службе Azure Monitor](media/overview/overview.png)

## <a name="monitoring-data-platform"></a>Платформа данных мониторинга

Все данные, собираемые службой Azure Monitor, соответствуют одному из двух основных типов, то есть представляют собой [метрики или журналы](platform/data-platform.md). [Метрики](platform/data-platform-metrics.md) — это числовые значения, описывающие конкретный аспект системы в определенный момент времени. Они занимают небольшой объем, и их можно использовать в сценариях, предусматривающих работу в режиме практически реального времени. [Журналы](platform/data-platform-logs.md) содержат данные различных типов, упорядоченные по записям с разными наборами свойств для каждого типа. Помимо данных производительности в системе (в виде журналов) хранятся данные телеметрии, например события и трассировки, так что можно объединить все эти данные для анализа.

Для многих ресурсов Azure данные, собранные службой Azure Monitor, отображаются непосредственно на странице "Обзор" портала Azure. Обратите внимание на любую виртуальную машину, и вы увидите несколько диаграмм с метриками производительности. Щелкните любой график, чтобы открыть данные в [обозревателе метрик](platform/metrics-charts.md) на портале Azure, где вы можете отмечать значения нескольких метрик с течением времени.  Вы можете просматривать графики в интерактивном режиме или закрепить их на панели мониторинга, чтобы просматривать их вместе с другими визуализациями.

![Метрики](media/overview/metrics.png)

Данные журналов, собранные службой Azure Monitor, можно проанализировать с помощью [запросов](log-query/log-query-overview.md), которые быстро получают, консолидируют и анализируют собранные данные.  Вы можете создавать и тестировать запросы с помощью [Log Analytics](log-query/portals.md) на портале Azure, а затем либо напрямую анализировать данные с помощью этих средств, либо сохранять запросы для использования с [визуализациями](visualizations.md) или [правилами генерации оповещений](platform/alerts-overview.md).

Azure Monitor использует версию [языка запросов Kusto](/azure/kusto/query/), который применяется в Azure Data Explorer. Он позволяет выполнять простые запросы к журналам, но также включает и расширенную функциональность, например функции агрегирования, объединения и интеллектуальную аналитику. Доступно [множество уроков](log-query/get-started-queries.md) для быстрого изучения этого языка.  Для пользователей, которые уже знакомы с [SQL](log-query/sql-cheatsheet.md) и [Splunk](log-query/splunk-cheatsheet.md), предоставляются отдельные руководства.

![Журналы](media/overview/logs.png)

## <a name="what-data-does-azure-monitor-collect"></a>Какие данные собирает Azure Monitor?

Azure Monitor может собирать данные из различных источников. Данные мониторинга для приложений можно рассматривать по уровням — от приложения и используемой им операционной системы и служб до самой платформы. Azure Monitor собирает данные со следующих уровней:

- **Данные мониторинга приложений.** Данные о производительности и функциональности написанного вами кода, не зависящие от платформы.
- **Данные мониторинга ОС на виртуальной машине.** Данные об операционной системе, в которой выполняется ваше приложение. Это может быть Azure, другое облако или локальная среда. 
- **Данные мониторинга ресурсов Azure.** Данные о работе ресурса Azure.
- **Данные мониторинга подписки Azure.** Данные об операциях и управлении подпиской Azure, а также о работоспособности и операциях самой платформы Azure. 
- **Данные мониторинга клиента Azure.** Данные о работе служб Azure на уровне клиента (например, Azure Active Directory).

Как только вы создадите подписку Azure и начнете добавлять такие ресурсы, как виртуальные машины и веб-приложения, Azure Monitor начнет собирать данные.  [Журналы действий](platform/platform-logs-overview.md) содержат сведения о времени создания и изменения ресурсов. [Метрики](platform/data-platform.md) указывают производительность ресурса и используемые им ресурсы. 

В собираемые данные можно включить сведения о фактической работе ресурсов, [включив диагностику](platform/platform-logs-overview.md) и [добавив агент](platform/agent-windows.md) для вычисления ресурсов. При этом собираются данные телеметрии для внутренней работы ресурса и можно настраивать различные [источники данных](platform/agent-data-sources.md) на сбор журналов и метрик из операционной системы Windows или Linux на виртуальной машине. 

Включите мониторинг для [приложения Службы приложений](app/azure-web-apps.md) или [приложения ВМ и масштабируемого набора виртуальных машин](app/azure-vm-vmss-apps.md), чтобы служба Application Insights могла собирать подробные сведения о приложении, включая просмотры страниц, запросы приложений и исключения. Проверьте доступность приложения, настроив [тест доступности](app/monitor-web-app-availability.md) для имитации пользовательского трафика.

### <a name="custom-sources"></a>Пользовательские источники

Azure Monitor может собирать данные журналов из любого клиента REST с помощью [API сборщика данных](platform/data-collector-api.md). Это позволяет создавать пользовательские сценарии мониторинга и подвергать мониторингу ресурсы, которые не предоставляют данные телеметрии через другие источники.

## <a name="insights"></a>Аналитика
Данные мониторинга полезны, только если они могут сделать работу вычислительной среды более открытой. Azure Monitor включает несколько функций и средств, предоставляющих ценные аналитические сведения о ваших приложениях и других ресурсах, от которых они зависят. [Решения для мониторинга](insights/solutions.md) и такие функции, как [Application Insights](app/app-insights-overview.md) и [Azure Monitor для контейнеров](insights/container-insights-overview.md), предоставляют аналитические сведения о различных аспектах приложения и определенных служб Azure. 

### <a name="application-insights"></a>Application Insights
Служба [Application Insights](app/app-insights-overview.md) контролирует доступность, производительность и использование ваших веб-приложений независимо от того, размещены ли они в облачной или локальной среде. Она использует мощную платформу анализа данных в Azure Monitor, чтобы предоставлять подробные аналитические сведения о работе приложения и диагностировать ошибки еще до того, как пользователи сообщат о них. Application Insights включает точки подключения к различным средствам разработки и интегрируется с Visual Studio для поддержки процессов DevOps.

![Анализ приложения](media/overview/app-insights.png)

### <a name="azure-monitor-for-containers"></a>Azure Monitor для контейнеров
[Azure Monitor для контейнеров](insights/container-insights-overview.md) — это компонент для контроля производительности рабочих нагрузок контейнеров, развертываемых на кластерах управляемой среды Kubernetes в Службе Azure Kubernetes (AKS). С его помощью можно отслеживать производительность, собирая данные метрик памяти и процессора из контроллеров, узлов и контейнеров, доступных в Kubernetes, с помощью API метрик. Также собираются журналы контейнеров.  После включения мониторинга из кластеров Kubernetes эти метрики и журналы автоматически собираются через контейнерную версию агента Log Analytics для Linux.

![Работоспособность контейнеров](media/overview/container-insights.png)

### <a name="azure-monitor-for-vms"></a>Azure Monitor для виртуальных машин
[Azure Monitor для виртуальных машин](insights/vminsights-overview.md) отслеживает виртуальные машины Azure в масштабе, анализируя производительность и работоспособность виртуальных машин Windows и Linux, включая различные процессы и взаимосвязанные зависимости от других ресурсов и внешних процессов. Решение включает поддержку мониторинга производительности и зависимостей приложений для виртуальных машин, размещенных в локальном или другом поставщике облачных служб.  


![Аналитика виртуальных машин](media/overview/vm-insights.png)

### <a name="monitoring-solutions"></a>Решения для мониторинга
[Решения для мониторинга](insights/solutions.md) в Azure Monitor — это упакованные наборы логики, которые предоставляют аналитические сведения об определенном приложении или службе. Они содержат логику для сбора данных мониторинга для приложения или службы, [запросы](log-query/log-query-overview.md) для анализа этих данных и [представления](../log-analytics/log-analytics-view-designer.md) для визуализации. [Корпорация Майкрософт](insights/solutions-inventory.md) и ее партнеры предоставляют решения для мониторинга, позволяющие контролировать различные службы Azure и другие приложения.

![Решения для мониторинга](media/overview/solutions-overview.png)

## <a name="responding-to-critical-situations"></a>Реагирование на критические ситуации
Помимо интерактивного анализа данных мониторинга, эффективное решение для мониторинга должно иметь возможность заранее реагировать на критические условия, определенные в данных, которые оно собирает. Например, оно может отправлять SMS или электронное письмо администратору, ответственному за расследование проблемы. Вы также можете запустить автоматизированный процесс, пытающийся исправить ошибку.


### <a name="alerts"></a>видны узлы
[Оповещения в Azure Monitor](platform/alerts-overview.md) заранее сообщают вам о критических условиях и пытаются выполнить корректирующие действия. Правила генерации оповещений, основанные на метриках, обеспечивают отправку оповещений с числовыми значениями практически в реальном времени, а правила, основанные на журналах, позволяют использовать сложную логику для данных из множества источников.

Правила генерации оповещений Azure Monitor используют [группы действий](platform/action-groups.md), содержащие уникальные наборы получателей и действий, которые могут использоваться в различных правилах. В зависимости от требований, группы действий могут выполнять различные действия (например, использовать веб-перехватчики, чтобы оповещения запускали внешние операции, или интегрироваться со средствами ITSM).

![видны узлы](media/overview/alerts.png)

### <a name="autoscale"></a>Автомасштабирование
Благодаря автомасштабированию вы получаете именно тот объем ресурсов, который нужен для обработки нагрузки в вашем приложении. Это позволяет создавать правила, которые используют метрики, собираемые службой Azure Monitor, чтобы определить, когда будут автоматически добавляться ресурсы для реагирования на пики нагрузки, а также экономить деньги, удаляя простаивающие ресурсы. Вы можете указать минимальное и максимальное количество экземпляров, а также логику увеличения и уменьшения объема выделяемых ресурсов.

![Автомасштабирование](media/overview/autoscale.png)

## <a name="visualizing-monitoring-data"></a>Визуализация данных мониторинга
[Визуализации](visualizations.md), такие как диаграммы и таблицы, — это эффективные средства создания сводок по данным мониторинга и их представления для различных аудиторий. Служба Azure Monitor включает собственные функции для визуализации данных мониторинга и использует другие службы Azure, чтобы публиковать их для различных аудиторий.

### <a name="dashboards"></a>Панели мониторинга
[Панели мониторинга Azure](../azure-portal/azure-portal-dashboards.md) позволяют объединять данные различных типов, включая метрики и журналы, в одну панель на [портале Azure](https://portal.azure.com). При желании вы можете предоставить доступ к этой панели другим пользователям Azure. Помимо выходных данных для любого запроса на получение журнала или для диаграммы метрик, на панель мониторинга Azure можно добавлять элементы из Azure Monitor. Например, вы можете создать панель мониторинга, на которой содержатся плитки с графами метрик, таблица журналов действий, график использования из Application Insights и выходные данные запросов к журналу.

![Панель мониторинга](media/overview/dashboard.png)

### <a name="views"></a>Представления
[Представления](../log-analytics/log-analytics-view-designer.md) визуализируют данные журналов в Azure Monitor.  Каждое представление содержит одну плитку, детализирующую сочетание визуализаций, таких как линейчатые диаграммы и графики, в дополнение к спискам, суммирующим важные данные.  Решения для мониторинга включают представления, которые суммируют данные для конкретного приложения. Вы можете создавать собственные представления, чтобы отобразить данные, полученные из любых запросов к журналам. Как и другие элементы в Azure Monitor, представления можно добавлять на панели мониторинга Azure.

![Представление](media/overview/view.png)

### <a name="power-bi"></a>Power BI
[Power BI](https://powerbi.microsoft.com) — это служба бизнес-аналитики, предоставляющая интерактивные визуализации данных из различных источников. Это эффективное средство предоставления доступа к данным другим пользователям в организации и за ее пределами. Вы можете настроить Power BI на [автоматический импорт данных журналов из Azure Monitor](../log-analytics/log-analytics-powerbi.md), чтобы воспользоваться этими дополнительными визуализациями.


![Power BI](media/overview/power-bi.png)


## <a name="integrate-and-export-data"></a>Интеграция и экспорт данных
Часто требуется интегрировать Azure Monitor с другими системами и создавать настраиваемые решения, использующие ваши данные мониторинга. Другие службы Azure работают с Azure Monitor для обеспечения этой интеграции.

### <a name="event-hub"></a>Концентратор событий
[Центры событий Azure](https://docs.microsoft.com/azure/event-hubs) — это платформа потоковой передачи и служба приема событий, которая может трансформировать и хранить данные с помощью любого поставщика аналитических данных в реальном времени либо адаптеров хранения или пакетной обработки. Используйте "Центры событий" для [потоковой передачи данных из Azure Monitor](platform/stream-monitoring-data-event-hubs.md) партнерским средствам мониторинга и SIEM.


### <a name="logic-apps"></a>Logic Apps
[Logic Apps](https://azure.microsoft.com/services/logic-apps) — это служба, позволяющая автоматизировать задачи и бизнес-процессы с помощью рабочих процессов, которые интегрируются с различными системами и службами. Доступны действия для считывания и записи метрик и журналов в Azure Monitor, позволяющие создавать рабочие процессы, которые интегрируются с различными системами.


### <a name="api"></a>API
Помимо доступа к генерируемым оповещениям, доступно множество API для считывания и записи метрик и журналов в службе Azure Monitor. Вы также можете настраивать и получать оповещения. Это предоставляет вам практически неограниченные возможности создания настраиваемых решений, которые интегрируются с Azure Monitor.

## <a name="next-steps"></a>Дальнейшие действия
См. также:

* [Метрики и журналы](platform/data-platform.md) для данных, полученных Azure Monitor.
* [Источники данных](platform/data-sources.md) для определения того, как различные компоненты приложения отправляют данные телеметрии.
* [Запросы к журналам](log-query/log-query-overview.md) для анализа собранных данных.
* [Рекомендации](https://docs.microsoft.com/azure/architecture/best-practices/monitoring) по мониторингу облачных приложений и служб.
