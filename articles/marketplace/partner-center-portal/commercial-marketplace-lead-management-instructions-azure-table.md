---
title: Лазурная таблица Лазурный рынок
description: Настройте управление интересами для Хранилища таблиц Azure.
author: qianw211
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 07/30/2019
ms.author: dsindona
ms.openlocfilehash: f511a60b533d6d1e0b1ae8847d0ee0fb6be3500c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80288841"
---
# <a name="configure-lead-management-using-an-azure-table"></a>Настройка управления свинцом с помощью таблицы Azure

Если система управления взаимоотношениями с клиентами (CRM) не поддерживается явно в Центре-партнере по приему интересов Azure Marketplace и AppSource, для обработки этих интересов можно использовать таблицу Azure Table. Затем можно экспортировать данные и импортировать их в свою CRM-систему. Инструкции в этой статье проведут процесс создания учетной записи хранения Azure и таблицы Azure под этой учетной записью. Кроме того, можно создать новый поток с помощью Microsoft Flow для отправки уведомления по электронной почте, когда ваше предложение получит зацепку.

## <a name="configure-azure-table"></a>Настройка таблицы Azure

1. Если у вас нет учетной записи Azure, вы можете [создать бесплатную пробную учетную запись](https://azure.microsoft.com/pricing/free-trial/).
2. После того, как ваша учетная запись Azure активна, вопийте на [порталAz.](https://portal.azure.com)
3. На портале Azure создайте учетную запись хранения с помощью следующей процедуры.  
    1. Выберите **ресурс «Создайте ресурс»** в левой панели меню.  **Новая** панель (лезвие) будет отображаться справа.
    2. Выберите **Хранилище** в **новой** панели.  **Рекомендуемый** список отображается справа.
    3. Выберите **учетную запись хранения** для начала создания учетной записи.  Следуйте инструкциям в статье [Создание учетной записи хранения](https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account?tabs=azure-portal).

        ![Шаги по созданию учетной записи хранения Azure](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-storage-create.png)

        Для получения более подробной информации о учетных записях хранения, выберите [учебник по быстрому запуску.](https://docs.microsoft.com/azure/storage/)  Дополнительные сведения о ценах на службу хранилища см. на странице [Обзор цен на хранилище Azure](https://azure.microsoft.com/pricing/details/storage/).

4. Подождите, пока будет подготовлена учетная запись хранилища, процесс, который обычно занимает несколько минут.  Затем получите доступ к учетной записи хранилища с **главной** страницы портала Azure, выбрав **все ресурсы** или выбрав **все ресурсы** из левой панели меню навигации портала Azure.

    ![Доступ к учетной записи хранения Azure](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-storage-access.png)

5. Из панели учетной записи хранилища выберите **ключи доступа** и скопируйте значение *строки Connection* для ключа. Сохраните это значение, так как это значение *строки подключения к учетной записи* хранилища, которое необходимо предоставить на портале публикации для получения интересов для вашего предложения на рынке. 

    Примером укуса соединения является:

    ```sql
    DefaultEndpointsProtocol=https;AccountName=myAccountName;AccountKey=myAccountKey;EndpointSuffix=core.windows.net
    ```

    ![Ключ к хранилищу Azure](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-storage-keys.png)

6. Из панели учетной записи хранилища выберите **таблицы** и выберите **таблицу для** создания таблицы. Введите имя для таблицы и выберите **OK.** Сохраните это значение, как вам это нужно, если вы хотите настроить MS Flow для получения уведомлений по электронной почте, когда приводит получены.

    ![Таблицы Azure](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-tables.png)

    Вы можете использовать [обозреватель службы хранилища Azure](https://archive.codeplex.com/?p=azurestorageexplorer) или любое другое средство для просмотра данных в таблице хранилища. Вы также можете экспортировать данные в таблице Azure. 

## <a name="optional-use-microsoft-flow-with-an-azure-table"></a>(Необязательно) Используйте поток Майкрософт с таблицей Azure  

[Microsoft Flow](https://docs.microsoft.com/flow/) можно использовать для автоматизации уведомления при каждом добавлении потенциального клиента в таблицу Azure. Если у вас нет учетной записи, вы можете [подписаться на бесплатную учетную запись.](https://flow.microsoft.com/)

### <a name="lead-notification-example"></a>Пример уведомления о потенциальном клиенте

Этот пример можно использовать как руководство по созданию простого потока, который автоматически отправляет уведомление по электронной почте при добавлении нового потенциального клиента в таблицу Azure. Этот пример устанавливает повторение для отправки информации о свинце каждый час при обновлении хранилища таблицы.

1. Войти в учетную запись Microsoft Flow.
2. На панели навигации слева выберите **Мои потоки**.
3. На панели навигации сверху выберите **+ Создать**.  
4. В списке выпадающих, выберите **- Запланировано - из пустых**

   ![Мои потоки (](./media/commercial-marketplace-lead-management-instructions-azure-table/ms-flow-scheduled-from-blank.png)

5.  На *сборке запланированное* окно потока под *Повторение каждого* выбора "1" для интервала и "час" для частоты. Кроме того, дать потоку имя, если хотите. Выберите **Создать**.

    >[!Note]
    >Хотя в этом примере используется интервал в 1 час, можно выбрать интервал и частоту, которые лучше всего подытожиты для ваших бизнес-потребностей.

    ![Создайте запланированный поток.](./media/commercial-marketplace-lead-management-instructions-azure-table/build-scheduled-flow.png)

6. Выберите **новый шаг**.
7. В *режиме «Выберите* окно действия» поиск «пройди время», а затем выберите **«Перейти на прошлое время** под действием действий».

   ![Выберите действие.](./media/commercial-marketplace-lead-management-instructions-azure-table/choose-an-action.png)

8. В окне **Получение времени в прошлом** в поле **Интервал** укажите 1. Из раскрывающегося списка **Единица времени** выберите **Час**.

    >[!Important]
    >Убедитесь, что этот блок Interval и Time соответствует Интервалу и частоте, настроенной для повторения в шаге 5.

    ![Настройка интервала в разделе "Получение времени в прошлом"](./media/commercial-marketplace-lead-management-instructions-azure-table/ms-flow-getpast-time.png)

>[!TIP] 
>Чтобы убедиться в правильности каждого шага, можно в любое время проверить поток. Чтобы проверить ваш поток, выберите **Средство проверки потоков ** в строке меню Flow.

В следующем наборе шагов вы подключитесь к таблице Azure и наведет логику обработки для обработки новых узелков.

9. После шага «Получить прошлое время» выберите **новый шаг,** а затем ищите «Получить сущности» в окне *действия « Выбрать».*
10. В **соответствии**с действиями выберите **Объекты Get (Хранилище таблиц Azure Table)**.
11. В окне **хранения таблицы Azure** предоставьте информацию для следующих полей и выберите **Создать:**

    * *Название соединения* - укажите значимое имя для соединения, которое вы устанавливаете между этим потоком и таблицей Azure.
    * *Имя учетной записи хранилища* - укажите имя учетной записи хранилища для таблицы Azure. Вы можете найти это на странице **ключей доступа** учетной записи хранилища.
    * *Общий ключ хранения* — укажите ключевое значение для учетной записи магазина для таблицы Azure. Вы можете найти это на странице **ключей доступа** учетной записи хранилища.

        ![хранилище таблиц Azure.](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-storage.png)

    После нажатия Создать вы увидите окно *Get объектов.* Здесь выберите **Показать расширенные варианты** и предоставить информацию для следующих полей:

       * *Таблица* - Выберите имя хранилища таблиц Azure (из 6-го шага инструкций по настройке таблицы Azure). Следующий захват экрана показывает запрос, когда для этого примера выбирается таблица "marketplaceleads".

            ![Таблица Azure получает сущности.](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-get-entities.png)

        * *Фильтр Запрос* - Выберите это поле и вставьте эту функцию в поле:`Timestamp gt datetime'@{body('Get_past_time')}'`

            ![Таблица Azure получает сущности - Фильтр Кверри.](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-get-entities-filter-query.png)

12. Теперь, когда вы завершили настройку соединения к таблице Azure, выберите **новый шаг,** чтобы добавить условие для сканирования таблицы Azure для новых интересов. 

13. В окне **действия выберите** **«Действия»,** а затем выберите **элемент управления состояния.**

    ![Таблица Azure - Выберите действие.](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-choose-an-action.png)

14. В окне **Условие** перейдите в поле **Выберите значение**, а затем выберите **Выражение** во всплывающем окне.

15. Вставьте `length(body('Get_entities')?['value'])` в поле ***fx***. Нажмите **ОК** для добавления этой функции. 

16. Чтобы завершить настройку условия:
    1. Выберите "больше, чем" из списка выпадающих.
    2. Введите 0 в качестве значения.

        ![Лазурный стол - Состояние.](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-condition.png)

В следующих нескольких шагах вы наберете действие, которое необходимо предпринять в зависимости от результата состояния.

* Если условие решает, если **нет,** не делайте ничего.
* Если условие возвращает **Если "да"**, активируется действие подключения к учетной записи Office 365 для отправки сообщения электронной почты. 

17. Выберите **Добавить действие** под **Если да**.

    ![Таблица azure - Состояние, «Если да».](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-condition-if-yes.png)

18. Выберите **Отправить электронное письмо (Office 365 Outlook)**.

    ![Таблица Azure - Состояние, «Если да», отправьте электронное письмо.](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-condition-if-yes-send-email.png)

    >[!Note]
    >Если вы хотите использовать другой поиск поставщика электронной почты и выберите Отправить уведомление по электронной почте (Mail) в качестве действия вместо. Инструкции покажут вам, как настроить с помощью Office 365 Outlook, но инструкции похожи для другого поставщика электронной почты.

19. В окне **Office 365 Outlook** предоставьте информацию по следующим полям:

    1. **Кому** — введите адреса электронной почты всех пользователей, которые должны получить это уведомление.
    1. **Тема** - Предоставьте тему для электронной почты. Например: Новые зацепки!
    1. **Тело** - Добавить текст, который вы хотите включить в каждое `body('Get_entities')?['value']`письмо (по желанию), а затем вставить в тело.

    >[!Note]
    >В текст сообщения можно вставить дополнительные статические или динамические точки данных.

    ![Таблица Azure - Условие, «Если да», окно Office 365 Outlook.](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-condition-if-yes-outlook.png)

20. Выберите **Сохранить**, чтобы сохранить поток. Microsoft Flow автоматически проверит поток на наличие ошибок. Если ошибок нет, поток начинает работать после его сохранения.

На следующем снимке экрана показан пример того, как в итоге должен выглядеть поток.

![Пример конечного потока.](./media/commercial-marketplace-lead-management-instructions-azure-table/final-flow.png)

### <a name="manage-your-flow"></a>Управление потоком

Управлять потоком после его запуска легко. Вы его полностью контролируете. Например, вы можете его остановить или изменить, просмотреть журнал его выполнения и получить аналитику. На следующем снимке экрана показаны доступные параметры для управления потоком. 

 ![Управление потоком](./media/commercial-marketplace-lead-management-instructions-azure-table/ms-flow-manage-completed.png)

Поток продолжает выполняться, пока вы не остановите его с помощью параметра **Отключить поток**.

Если вы не получаете никаких уведомлений по электронной почте, это означает, что новые интересы не были добавлены в таблицу Azure. Если есть какие-либо сбои потока, вы получите по электронной почте, как пример в следующем захвате экрана.

 ![Уведомление по электронной почте о сбое потока](./media/commercial-marketplace-lead-management-instructions-azure-table/ms-flow-failure-note.png)

## <a name="configure-your-offer-to-send-leads-to-the-azure-table"></a>Наверскакните ваше предложение отправить лиды в таблицу Azure

Когда вы будете готовы настроить информацию о руководстве для вашего предложения на портале публикации, выполните ниже:

1. Перейдите на страницу **настройки предложения** для вашего предложения.
2. Выберите **Подключение** в разделе «Управление ведущим иссяка».
3. В всплывающем окне деталей соединения выберите **таблицу Azure** для **ведущего назначения**и вставьте строку соединения из созданной вами учетной записи хранилища Azure, высеянув более ранние шаги в поле **строки соединения подключения к сведению.**
4. Нажмите кнопку **Сохранить**. 

>[!Note]
>Вы должны закончить настройку остальной части предложения и опубликовать его, прежде чем вы сможете получить приводит для предложения.

При сгенерировании интересов корпорация Майкрософт отправляет приводит в таблицу Azure. Если вы настроили поток, на адрес электронной почты, который вы настроили, также будет отправлено электронное письмо.

![Управление потенциальными клиентами](./media/commercial-marketplace-lead-management-instructions-azure-table/lead-management.png)

![Управление ведущим - детали соединения](./media/commercial-marketplace-lead-management-instructions-azure-table/connection-details.png)

![Управление свинцом - учетная запись хранения сведений о подключении](./media/commercial-marketplace-lead-management-instructions-azure-table/azure-table-connection-details.png)

