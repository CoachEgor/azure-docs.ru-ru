---
title: SaaS Выполнение AIS v1 (ru) Лазурный рынок
description: Объясняет, как создать и управлять предложением SaaS на Рынке Azure с помощью связанных apIs Fulfillment v1.
author: dsindona
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: reference
ms.date: 05/23/2019
ms.author: dsindona
ROBOTS: NOINDEX
ms.openlocfilehash: 3ec8373288a2ea5809ee5d349c52c57051586035
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80288348"
---
# <a name="saas-fulfillment-apis-version-1-deprecated"></a>SaaS Выполнение AIS версия 1 (унипраженный)

В этой статье объясняется, как создать предложение SaaS через API-интерфейсы. AA, состоящие из методов и конечных точек REST, необходимы для того, чтобы разрешить подписку на ваше предложение SaaS, если вы выбрали продажу через Azure.  

> [!WARNING]
> Эта первоначальная версия API выполнения SaaS является амортизированной; вместо этого используйте [API API V2 SaaS.](./pc-saas-fulfillment-api-v2.md)  Эта первоначальная версия API в настоящее время поддерживается только для обслуживания существующих издателей. 

Чтобы помочь вам интегрировать службу SaaS с Azure, мы предоставляем следующие API:

-   Разрешить
-   Подписаться
-   Convert
-   Unsubscribe (отмена подписки).


## <a name="api-methods-and-endpoints"></a>Методы и конечные точки API

В следующих разделах описаны методы и конечные точки API, которые позволяют настраивать подписки для работы с предложением SaaS.


### <a name="marketplace-api-endpoint-and-api-version"></a>Конечная точка API Marketplace и версия API

Конечная точка для API Azure Marketplace имеет адрес `https://marketplaceapi.microsoft.com`.

Текущая версия API — `api-version=2017-04-15`.


### <a name="resolve-subscription"></a>Разрешение подписки

Действие POST для конечной точки разрешения позволяет пользователям разрешать токен marketplace постоянному идентификатору ресурса.  Идентификатор ресурса — это уникальный идентификатор для подписки SAAS. 

Когда пользователь перенаправляется на веб-сайт ISV, URL содержит маркер в параметрах запроса. Ожидается, что ISV будет использовать этот токен и отправит запрос на его разрешение. Ответ содержит уникальный идентификатор подписки SAAS, имя, идентификатор предложения и план для ресурса. Этот токен действителен только в течение часа.

*Запрос*

**Поместить**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/resolve?api-version=2017-04-15**

|  **Название параметра** |     **Описание**                                      |
|  ------------------ |     ---------------------------------------------------- |
|  api-version        |  Версия операции, используемой для этого запроса.   |
|  |  |


*Заголовки*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                                                                                                                                                  |
|--------------------|--------------|-----------------------------------------------------------|
| x-ms-requestid     | нет           | Уникальное строковое значение для отслеживания запроса клиента, желательно GUID. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа.  |
| x-ms-correlationid | нет           | Уникальное строковое значение для операции на стороне клиента. Это поле соотносит все события от работы клиента с событиями на стороне сервера. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа. |
| Content-type       | Да          | `application/json`                                        |
| авторизация      | Да          | Токен носителя JSON Web Token (JWT).                    |
| x-ms-marketplace-token| Да| Параметр запроса токенов в URL-адресе при перенаправленном пользователем на веб-сайт SaaS ISV из Azure. **Примечание:** Этот маркер действителен только в течение 1 часа. Кроме того, URL-адрес декодирует полученное из браузера значение токена, прежде чем использовать его.|
|  |  |  |
  

*Текст ответа*

``` json
{
    "id": "",
    "subscriptionName": "",
    "offerId": "",
    "planId": "",
}
```

| **Название параметра** | **Тип данных** | **Описание**                       |
|--------------------|---------------|---------------------------------------|
| идентификатор                 | Строка        | Идентификатор подписки SaaS          |
| subscriptionName| Строка| Имя подписки SaaS, которое пользователь указал в Azure при подписке на службу SaaS.|
| OfferId            | Строка        | Идентификатор предложения, на которое подписан пользователь. |
| planId             | Строка        | Идентификатор плана, на который подписан пользователь.  |
|  |  |  |


*Коды отклика*

| **Код состояния HTTP** | **Код ошибки**     | **Описание**                                                                         |
|----------------------|--------------------| --------------------------------------------------------------------------------------- |
| 200                  | `OK`                 | Токен успешно разрешен.                                                            |
| 400                  | `BadRequest`         | Отсутствуют необходимые заголовки, или указано недопустимое значение api-version. Не удалось разрешить токен, так как он имеет неправильный формат или у него истек срок действия (маркер является действительным только на протяжении 1 часа после создания). |
| 403                  | `Forbidden`          | У вызывающей стороны нет прав на выполнение этой операции.                                 |
| 429                  | `RequestThrottleId`  | Служба занята обработкой запросов. Повторите попытку позже.                                |
| 503                  | `ServiceUnavailable` | Служба временно недоступна. Повторите попытку позже.                                        |
|  |  |  |


*Заголовки ответов*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | Да          | Полученный от клиента идентификатор запроса.                                                                   |
| x-ms-correlationid | Да          | Идентификатор корреляции, если клиент предоставил его. В противном случае — идентификатор корреляции сервера.                   |
| x-ms-activityid    | Да          | Уникальное строковое значение для отслеживания запроса от службы. Этот идентификатор используется для любых согласований. |
| Retry-After        | нет           | Это значение устанавливается только для ответов с кодом 429.                                                                   |
|  |  |  |


### <a name="subscribe"></a>Подписаться

Конечная точка подписки позволяет пользователям создать подписку на службу SaaS с определенным планом и настроить в коммерческой системе выставление счетов.

**Положить**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/*«подписка»*?api-версия 2017-04-15**

| **Название параметра**  | **Описание**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | Уникальный идентификатор подписки SaaS, полученный после разрешения токена через API Resolve.                              |
| api-version         | Версия операции, используемой для этого запроса. |
|  |  |

*Заголовки*

|  **Ключ заголовка**        | **Обязательно** |  **Описание**                                                  |
| ------------------     | ------------ | --------------------------------------------------------------------------------------- |
| x-ms-requestid         |   нет         | Уникальное строковое значение для отслеживания запроса клиента, желательно GUID. Если не указано, создается случайным образом и возвращается в заголовке ответа. |
| x-ms-correlationid     |   нет         | Уникальное строковое значение для операции на стороне клиента. Это значение позволяет сопоставить все события клиентской операции с событиями на стороне сервера. Если не указано, создается случайным образом и возвращается в заголовке ответа. |
| If-Match или If-None-Match |   нет         |   Значение ETag сильного проверяющего серверного элемента управления.                                                          |
| content-type           |   Да        |    `application/json`                                                                   |
|  авторизация         |   Да        |    Токен носителя JSON Web Token (JWT).                                               |
| x-ms-marketplace-session-mode| нет | Флаг, позволяющий включить режим пробного запуска при подписке на предложение SaaS. Если установлен, плата за подписку не начисляется. Независимые поставщики программного обеспечения могут использовать этот флаг для тестирования. Пожалуйста, установите его на **'dryrun'**|
|  |  |  |

*Текст*

``` json
{
    "lanId": "",
}
```

| **Имя элемента** | **Тип данных** | **Описание**                      |
|------------------|---------------|--------------------------------------|
| planId           | Строковое значение (обязательное)        | Идентификатор плана пользователя службы SaaS подписывается.  |
|  |  |  |

*Коды отклика*

| **Код состояния HTTP** | **Код ошибки**     | **Описание**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | Активация подписки SaaS подтверждается для указанного плана.                   |
| 400                  | `BadRequest`         | Отсутствуют обязательные заголовки, или текст JSON имеет неправильный формат. |
| 403                  | `Forbidden`          | У вызывающей стороны нет прав на выполнение этой операции.                   |
| 404                  | `NotFound`           | Подписка с указанным идентификатором не найдена.                                  |
| 409                  | `Conflict`           | Выполняется другая операция для этой подписки.                     |
| 429                  | `RequestThrottleId`  | Служба занята обработкой запросов. Повторите попытку позже.                  |
| 503                  | `ServiceUnavailable` | Служба временно недоступна. Повторите попытку позже.                          |
|  |  |  |

Для ответа 202 следите за состоянием операции запроса в заголовке «Операция-место». Аутентификация выполняется так же, как для других API Marketplace.

*Заголовки ответов*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | Да          | Полученный от клиента идентификатор запроса.                                                                   |
| x-ms-correlationid | Да          | Идентификатор корреляции, если клиент предоставил его. В противном случае — идентификатор корреляции сервера.                   |
| x-ms-activityid    | Да          | Уникальное строковое значение для отслеживания запроса от службы. Это значение используется для сверок любого рода. |
| Retry-After        | Да          | Интервал, в течение которого клиент может проверить состояние.                                                       |
| Operation-Location | Да          | Ссылка на ресурс для получения состояния операции.                                                        |
|  |  |  |

### <a name="change-plan-endpoint"></a>Конечная точка изменения плана

Конечная точка изменения плана позволяет пользователю преобразовать план, на который он подписан, в новый план.

**Патч**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/*«подписка»*?api-версия 2017-04-15**

| **Название параметра**  | **Описание**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | Идентификатор подписки на SaaS                              |
| api-version         | Версия операции, используемой для этого запроса. |
|  |  |

*Заголовки*

| **Ключ заголовка**          | **Обязательно** | **Описание**                                                                                                                                                                                                                  |
|-------------------------|--------------|---------------------------------------------------------------------------------------------------------------------|
| x-ms-requestid          | нет           | Уникальное строковое значение для отслеживания запроса от клиента. Мы рекомендуем использовать GUID. Если не указано, создается случайным образом и возвращается в заголовке ответа.   |
| x-ms-correlationid      | нет           | Уникальное строковое значение для операции на стороне клиента. Это значение позволяет сопоставить все события клиентской операции с событиями на стороне сервера. Если не указано, создается случайным образом и возвращается в заголовке ответа. |
| If-Match или If-None-Match | нет           | Значение ETag сильного проверяющего серверного элемента управления.                              |
| content-type            | Да          | `application/json`                                        |
| авторизация           | Да          | Токен носителя JSON Web Token (JWT).                    |
|  |  |  |

*Текст*

```json
{
    "planId": ""
}
```

|  **Имя элемента** |  **Тип данных**  | **Описание**                              |
|  ---------------- | -------------   | --------------------------------------       |
|  planId           |  Строковое значение (обязательное)         | Идентификатор плана пользователя службы SaaS подписывается.          |
|  |  |  |

*Коды отклика*

| **Код состояния HTTP** | **Код ошибки**     | **Описание**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | Активация подписки SaaS подтверждается для указанного плана.                   |
| 400                  | `BadRequest`         | Отсутствуют обязательные заголовки, или текст JSON имеет неправильный формат. |
| 403                  | `Forbidden`          | У вызывающей стороны нет прав на выполнение этой операции.                   |
| 404                  | `NotFound`           | Подписка с указанным идентификатором не найдена.                                  |
| 409                  | `Conflict`           | Выполняется другая операция для этой подписки.                     |
| 429                  | `RequestThrottleId`  | Служба занята обработкой запросов. Повторите попытку позже.                  |
| 503                  | `ServiceUnavailable` | Служба временно недоступна. Повторите попытку позже.                          |
|  |  |  |

*Заголовки ответов*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | Да          | Полученный от клиента идентификатор запроса.                                                                   |
| x-ms-correlationid | Да          | Идентификатор корреляции, если клиент предоставил его. В противном случае — идентификатор корреляции сервера.                   |
| x-ms-activityid    | Да          | Уникальное строковое значение для отслеживания запроса от службы. Это значение используется для сверок любого рода. |
| Retry-After        | Да          | Интервал, в течение которого клиент может проверить состояние.                                                       |
| Operation-Location | Да          | Ссылка на ресурс для получения состояния операции.                                                        |
|  |  |  |

### <a name="delete-subscription"></a>Удаление подписки

Действие удаления на конечной точке подписки позволяет пользователю удалить подписку с определенным идентификатором.

*Запрос*

**Удалить**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/*«подписка»*?api-версия 2017-04-15**

| **Название параметра**  | **Описание**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | Идентификатор подписки на SaaS                              |
| api-version         | Версия операции, используемой для этого запроса. |
|  |  |

*Заголовки*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                                                                                                                                                  |
|--------------------|--------------| ----------------------------------------------------------|
| x-ms-requestid     | нет           | Уникальное строковое значение для отслеживания запроса от клиента. Мы рекомендуем использовать GUID. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа.                                                           |
| x-ms-correlationid | нет           | Уникальное строковое значение для операции на стороне клиента. Это значение позволяет сопоставить все события клиентской операции с событиями на стороне сервера. Если не указано, создается случайным образом и возвращается в заголовке ответа. |
| авторизация      | Да          | Токен носителя JSON Web Token (JWT).                    |
|  |  |  |

*Коды отклика*

| **Код состояния HTTP** | **Код ошибки**     | **Описание**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | Активация подписки SaaS подтверждается для указанного плана.                   |
| 400                  | `BadRequest`         | Отсутствуют обязательные заголовки, или текст JSON имеет неправильный формат. |
| 403                  | `Forbidden`          | У вызывающей стороны нет прав на выполнение этой операции.                   |
| 404                  | `NotFound`           | Подписка с указанным идентификатором не найдена.                                  |
| 429                  | `RequestThrottleId`  | Служба занята обработкой запросов, повторите попытку позже.                  |
| 503                  | `ServiceUnavailable` | Служба временно недоступна. Повторите попытку позже.                          |
|  |  |  |

Для ответа 202 следите за состоянием операции запроса в заголовке «Операция-место». Аутентификация выполняется так же, как для других API Marketplace.

*Заголовки ответов*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | Да          | Полученный от клиента идентификатор запроса.                                                                   |
| x-ms-correlationid | Да          | Идентификатор корреляции, если он предоставлен клиентом, в противном случае идентификатор корреляции сервера                   |
| x-ms-activityid    | Да          | Уникальное строковое значение для отслеживания запроса от службы. Используется для сверок любого рода. |
| Retry-After        | Да          | Интервал, в течение которого клиент может проверить состояние.                                                       |
| Operation-Location | Да          | Ссылка на ресурс для получения состояния операции.                                                        |
|   |  |  |

### <a name="get-operation-status"></a>Получение состояния операции

Эта конечная точка позволяет отслеживать состояние запущенной асинхронной операции (подписка, отмена подписки, изменение плана).

*Запрос*

**Получить**

**https://marketplaceapi.microsoft.com/api/saas/operations/*«ОперацияId»?api-версия*2017-04-15**

| **Название параметра**  | **Описание**                                       |
|---------------------|-------------------------------------------------------|
| operationId         | Уникальный идентификатор запущенной операции.                |
| api-version         | Версия операции, используемой для этого запроса. |
|  |  |

*Заголовки*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                                                                                                                                                  |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | нет           | Уникальное строковое значение для отслеживания запроса от клиента. Мы рекомендуем использовать GUID. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа.   |
| x-ms-correlationid | нет           | Уникальное строковое значение для операции на стороне клиента. Это значение позволяет сопоставить все события клиентской операции с событиями на стороне сервера. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа.  |
| авторизация      | Да          | Токен носителя JSON Web Token (JWT).                    |
|  |  |  | 

*Текст ответа*

```json
{
    "id": "",
    "status": "",
    "resourceLocation": "",
    "created": "",
    "lastModified": ""
}
```

| **Название параметра** | **Тип данных** | **Описание**                                                                                                                                               |
|--------------------|---------------|-------------------------------------------------------------------------------------------|
| идентификатор                 | Строка        | Идентификатор операции.                                                                      |
| status             | Перечисление.          | Состояние операции: `In Progress`, `Succeeded` или `Failed`.          |
| resourceLocation   | Строка        | Ссылка на созданную или измененную подписку. Она позволяет клиенту получить обновленное состояние после операции. Это значение не задается для операций `Unsubscribe`. |
| created            | Дата и время      | Время создания операции в формате UTC.                                                           |
| lastModified       | Дата и время      | Последнее обновление операции в формате UTC.                                                      |
|  |  |  |

*Коды отклика*

| **Код состояния HTTP** | **Код ошибки**     | **Описание**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | Запрос GET разрешен успешно, текст ответа содержит требуемую информацию.    |
| 400                  | `BadRequest`         | Отсутствуют необходимые заголовки, или указано недопустимое значение api-version. |
| 403                  | `Forbidden`          | У вызывающей стороны нет прав на выполнение этой операции.                      |
| 404                  | `NotFound`           | Подписка не найдена с заданным идентификатором.                                     |
| 429                  | `RequestThrottleId`  | Служба занята обработкой запросов. Повторите попытку позже.                     |
| 503                  | `ServiceUnavailable` | Служба временно недоступна. Повторите попытку позже.                             |
|  |  |  |

*Заголовки ответов*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | Да          | Полученный от клиента идентификатор запроса.                                                                   |
| x-ms-correlationid | Да          | Идентификатор корреляции, если он предоставлен клиентом, в противном случае идентификатор корреляции сервера                   |
| x-ms-activityid    | Да          | Уникальное строковое значение для отслеживания запроса от службы. Используется для сверок любого рода. |
| Retry-After        | Да          | Интервал, в течение которого клиент может проверить состояние.                                                       |
|  |  |  |

### <a name="get-subscription"></a>Получение подписки

Действие получения на конечной точке подписки позволяет пользователю получить подписку по определенному идентификатору ресурса.

*Запрос*

**Получить**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/*«подписка»*?api-версия 2017-04-15**

| **Название параметра**  | **Описание**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | Идентификатор подписки на SaaS                              |
| api-version         | Версия операции, используемой для этого запроса. |
|  |  |

*Заголовки*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                           |
|--------------------|--------------|-----------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | нет           | Уникальное строковое значение для отслеживания запроса клиента, желательно GUID. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа.                                                           |
| x-ms-correlationid | нет           | Уникальное строковое значение для операции на стороне клиента. Это значение позволяет сопоставить все события клиентской операции с событиями на стороне сервера. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа. |
| авторизация      | Да          | Токен носителя JSON Web Token (JWT).                                                                    |
|  |  |  |

*Текст ответа*

```json
{
    "id": "",
    "saasSubscriptionName": "",
    "offerId": "",
    "planId": "",
    "saasSubscriptionStatus": "",
    "created": "",
    "lastModified": ""
}
```

| **Название параметра**     | **Тип данных** | **Описание**                               |
|------------------------|---------------|-----------------------------------------------|
| идентификатор                     | Строка        | Идентификатор ресурса подписки на SaaS в Azure.    |
| offerId                | Строка        | Идентификатор предложения, на которое подписан пользователь.         |
| planId                 | Строка        | Идентификатор плана, на который подписан пользователь.          |
| saasSubscriptionName   | Строка        | Имя подписки на SaaS.                |
| saasSubscriptionStatus | Перечисление.          | Состояние операции.  Это может быть:  <br/> - `Subscribed`: подписка активна;  <br/> - `Pending`: пользователь создал ресурс, но независимый производитель программного обеспечения еще не активировал его;   <br/> - `Unsubscribed`: пользователь отменил подписку;   <br/> - `Suspended`: пользователь приостановил подписку;   <br/> - `Deactivated`: подписка Azure отключена.  |
| created                | Дата и время      | Значение времени создания подписки в формате UTC. |
| lastModified           | Дата и время      | Значение времени изменения подписки в формате UTC. |
|  |  |  |

*Коды отклика*

| **Код состояния HTTP** | **Код ошибки**     | **Описание**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | Запрос GET разрешен успешно, текст ответа содержит требуемую информацию.    |
| 400                  | `BadRequest`         | Отсутствуют необходимые заголовки, или указано недопустимое значение api-version. |
| 403                  | `Forbidden`          | У вызывающей стороны нет прав на выполнение этой операции.                      |
| 404                  | `NotFound`           | Подписка с указанным идентификатором не найдена.                                     |
| 429                  | `RequestThrottleId`  | Служба занята обработкой запросов. Повторите попытку позже.                     |
| 503                  | `ServiceUnavailable` | Служба временно недоступна. Повторите попытку позже.                             |
|  |  |  |

*Заголовки ответов*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | Да          | Полученный от клиента идентификатор запроса.                                                                   |
| x-ms-correlationid | Да          | Идентификатор корреляции, если он предоставлен клиентом, в противном случае идентификатор корреляции сервера                   |
| x-ms-activityid    | Да          | Уникальное строковое значение для отслеживания запроса от службы. Используется для сверок любого рода. |
| Retry-After        | нет           | Интервал, в течение которого клиент может проверить состояние.                                                       |
| eTag               | Да          | Ссылка на ресурс для получения состояния операции.                                                        |
|  |  |  |

### <a name="get-subscriptions"></a>Получение подписок

Действие получения на конечной точке подписки позволяет пользователю получить список подписок для всех предложений этого поставщика программного обеспечения.

*Запрос*

**Получить**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions?api-version=2017-04-15**

| **Название параметра**  | **Описание**                                       |
|---------------------|-------------------------------------------------------|
| api-version         | Версия операции, используемой для этого запроса. |
|  |  |

*Заголовки*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                           |
|--------------------|--------------|-----------------------------------------------------------|
| x-ms-requestid     | нет           | Уникальное строковое значение для отслеживания запроса от клиента. Мы рекомендуем использовать GUID. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа.             |
| x-ms-correlationid | нет           | Уникальное строковое значение для операции на стороне клиента. Это значение позволяет сопоставить все события клиентской операции с событиями на стороне сервера. Если это значение не указано, оно создается случайным образом и возвращается в заголовке ответа. |
| авторизация      | Да          | Токен носителя JSON Web Token (JWT).                    |
|  |  |  |

*Текст ответа*

```json
{
    "id": "",
    "saasSubscriptionName": "",
    "offerId": "",
    "planId": "",
    "saasSubscriptionStatus": "",
    "created": "",
    "lastModified": ""
}
```

| **Название параметра**     | **Тип данных** | **Описание**                               |
|------------------------|---------------|-----------------------------------------------|
| идентификатор                     | Строка        | Id подписного ресурса SaaS в Azure    |
| offerId                | Строка        | Предложение идентификатора, на который подписался пользователь         |
| planId                 | Строка        | План id, на который подписался пользователь          |
| saasSubscriptionName   | Строка        | Название подписки SaaS                |
| saasSubscriptionStatus | Перечисление.          | Состояние операции.  Это может быть:  <br/> - `Subscribed`: подписка активна;  <br/> - `Pending`: пользователь создал ресурс, но независимый производитель программного обеспечения еще не активировал его;   <br/> - `Unsubscribed`: пользователь отменил подписку;   <br/> - `Suspended`: пользователь приостановил подписку;   <br/> - `Deactivated`: подписка Azure отключена.  |
| created                | Дата и время      | Значение временной метки создания подписок в UTC |
| lastModified           | Дата и время      | Измененная стоимость временной метки в UTC |
|  |  |  |

*Коды отклика*

| **Код состояния HTTP** | **Код ошибки**     | **Описание**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | Запрос GET разрешен успешно, текст ответа содержит требуемую информацию.    |
| 400                  | `BadRequest`         | Отсутствуют необходимые заголовки, или указано недопустимое значение api-version. |
| 403                  | `Forbidden`          | У вызывающей стороны нет прав на выполнение этой операции.                      |
| 404                  | `NotFound`           | Подписка с указанным идентификатором не найдена.                                     |
| 429                  | `RequestThrottleId`  | Служба занята обработкой запросов, повторите попытку позже.                     |
| 503                  | `ServiceUnavailable` | Служба временно недоступна. Повторите попытку позже.                             |
|  |  |  |

*Заголовки ответов*

| **Ключ заголовка**     | **Обязательно** | **Описание**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | Да          | Полученный от клиента идентификатор запроса.                                                                   |
| x-ms-correlationid | Да          | Идентификатор корреляции, если он предоставлен клиентом, в противном случае идентификатор корреляции сервера                   |
| x-ms-activityid    | Да          | Уникальное строковое значение для отслеживания запроса от службы. Используется для сверок любого рода. |
| Retry-After        | нет           | Интервал, в течение которого клиент может проверить состояние.                                                       |
|  |  |  |

### <a name="saas-webhook"></a>Веб-перехватчик SaaS

Веб-перехватчик SaaS используется для предварительного уведомления об изменениях в службе SaaS. Ожидается, что этот API POST не прошел проверку подлинности и будет вызываться службой Майкрософт. Ожидается, что служба SaaS вызовет операции API для проверки и авторизации, прежде чем выполнять какие-либо действия над уведомлениями веб-перехватчика. 

*Текст*

``` json
  {
    "id": "be750acb-00aa-4a02-86bc-476cbe66d7fa",
    "activityId": "be750acb-00aa-4a02-86bc-476cbe66d7fa",
    "subscriptionId":"cd9c6a3a-7576-49f2-b27e-1e5136e57f45",
    "action": "Subscribe", // Subscribe/Unsubscribe/ChangePlan
    "operationRequestSource":"Azure",
    "timeStamp":"2018-12-01T00:00:00"
  }
```

| **Название параметра**     | **Тип данных** | **Описание**                               |
|------------------------|---------------|-----------------------------------------------|
| идентификатор  | Строка       | Уникальный идентификатор запущенной операции.                |
| activityId   | Строка        | Уникальное строковое значение для отслеживания запроса от службы. Используется для сверок любого рода.               |
| subscriptionId                     | Строка        | Идентификатор ресурса подписки на SaaS в Azure.    |
| offerId                | Строка        | Идентификатор предложения, на которое подписан пользователь. Предоставляется только с действием "Обновить".        |
| publisherid                | Строка        | Идентификатор издателя предложения SaaS         |
| planId                 | Строка        | Идентификатор плана, на который подписан пользователь. Предоставляется только с действием "Обновить".          |
| action                 | Строка        | Событие, которое запускает это уведомление. Допустимые значения: Activate, Delete, Suspend, Reinstate, Update          |
| timeStamp (метка времени)                 | Строка        | Значение метки времени в формате UTC, когда это уведомление было активировано.          |
|  |  |  |


## <a name="next-steps"></a>Дальнейшие действия

Разработчики также могут программно получать и манипулировать профилями рабочих нагрузок, предложений и издателей с помощью [AI Cloud Partner Portal REST.](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal-orig/cloud-partner-portal-api-overview)
