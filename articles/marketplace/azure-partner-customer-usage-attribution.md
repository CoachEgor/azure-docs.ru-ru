---
title: Сведения о партнере коммерческого рынка и использовании клиентов
description: Ознакомьтесь с обзором отслеживания использования клиентов в решениях Azure Marketplace.
author: dsindona
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 04/14/2020
ms.author: dsindona
ms.openlocfilehash: 4dd42c6eabf02bc7a4eb956b9cd5ab2aec28176b
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82186209"
---
# <a name="commercial-marketplace-partner-and-customer-usage-attribution"></a>Сведения о партнере коммерческого рынка и использовании клиентов

Атрибуты использования клиентов — это способ связать ресурсы Azure, запущенные в клиентских подписках, развернутые для запуска решения, с вами в качестве партнера. Формирование этих ассоциаций во внутренних системах Майкрософт обеспечивает более полную видимость Azure, в которой работает ваше программное обеспечение. При использовании этой возможности отслеживания вы прийдете к работе с группами продаж Майкрософт и получите кредит для партнерских программ Майкрософт.

Ассоциацию можно создать с помощью Azure Marketplace, репозитория быстрого запуска, частных репозиториев GitHub и 1:1 клиентов, которые создают устойчивый IP-адрес (например, разработку приложения).

Атрибуты использования клиентов поддерживают три варианта развертывания:

- Шаблоны Azure Resource Manager. партнеры могут использовать шаблоны диспетчер ресурсов для развертывания служб Azure для запуска программного обеспечения партнера. Партнеры могут создать шаблон Resource Manager, который определяет инфраструктуру и конфигурацию решения Azure. Шаблон Resource Manager позволит вам и вашим клиентам легко развертывать решение на всем протяжении его жизненного цикла. Вы можете быть уверены, что все ресурсы развертываются в согласованном состоянии.
- Интерфейсы API Azure Resource Manager. Партнеры могут напрямую вызывать интерфейсы API Resource Manager, чтобы развернуть шаблон Azure Resource Manager или создавать вызовы API для непосредственной подготовки служб Azure.
- Terraform: партнеры могут использовать terraform для развертывания шаблона диспетчер ресурсов или непосредственного развертывания служб Azure.

>[!IMPORTANT]
>- Атрибуты использования клиента не предназначены для мониторинга работы системных интеграторов, поставщиков управляемых служб или средств, предназначенных для развертывания программного обеспечения, работающего в Azure, и управления им.
>
>- Атрибуты использования клиентов для новых развертываний и не поддерживают маркировку существующих ресурсов, которые уже были развернуты.
>
>- Для предложений [приложений Azure](./partner-center-portal/create-new-azure-apps-offer.md) , опубликованных в Azure Marketplace, требуются атрибуты использования клиента.

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]

## <a name="create-guids"></a>Создание глобальных уникальных идентификаторов

Идентификатор GUID — это уникальный идентификатор ссылки, содержащий шестнадцатеричные цифры 32. Чтобы создать идентификаторы GUID для отслеживания, следует использовать генератор GUID. Команда разработчиков службы хранилища Azure создала [форму генератора GUID](https://forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR3i8TQB_XnRAsV3-7XmQFpFUMVRVVFFLTDFLS0E2QzNYSkFZR1U3WVJCTSQlQCN0PWcu), которая позволяет получить GUID в правильном формате на электронную почту и которую можно использовать в различных системах отслеживания.

> [!NOTE]
> Настоятельно рекомендуется использовать [форму генератора GUID хранилища Azure](https://forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR3i8TQB_XnRAsV3-7XmQFpFUMVRVVFFLTDFLS0E2QzNYSkFZR1U3WVJCTSQlQCN0PWcu) для создания идентификатора GUID. Дополнительные сведения см. в разделе [Часто задаваемые вопросы](#faq).

Рекомендуется создавать уникальные GUID для всех предложений и каналов распределения каждого продукта. Можно использовать один идентификатор GUID для нескольких каналов распределения, если дробить отчетность нежелательно.

Если продукт развертывается с помощью шаблона и доступен как в Azure Marketplace, так и в GitHub, можно создать и зарегистрировать два отдельных идентификатора GUID:

- продукт А в Azure Marketplace;
- продукт А на сайте GitHub.

Отчеты выполняются по ИДЕНТИФИКАТОРу Microsoft Partner Network и идентификатору GUID.

Вы также можете отслеживание использования на более детализированном уровне, зарегистрировав дополнительные идентификаторы GUID и изменяя идентификаторы GUID между планами, где планы являются вариантами предложения.

## <a name="register-guids"></a>Зарегистрировать идентификаторы GUID

Идентификаторы GUID должны быть зарегистрированы в центре партнеров для включения атрибутов использования клиента.

После добавления идентификатора GUID в шаблон или агента пользователя и регистрации GUID в центре партнеров будут отслеживанися будущие развертывания.

1. Войдите в [Центр партнеров](https://partner.microsoft.com/dashboard).

1. Зарегистрируйтесь как [Издатель коммерческого магазина](https://partner.microsoft.com/dashboard/account/v3/enrollment/introduction/azureisv).

   * Партнерам необходимо [иметь профиль в центре партнеров](https://docs.microsoft.com/azure/marketplace/become-publisher). Мы рекомендуем вам опубликовать свое предложение в Azure Marketplace или AppSource.
   * Любой партнер может зарегистрировать несколько идентификаторов GUID.
   * Партнеры могут регистрировать идентификаторы GUID для шаблонов решений и предложений, отличных от Marketplace.

1. В правом верхнем углу щелкните значок шестеренки параметров, а затем выберите **Параметры разработчика**.

1. На **странице Параметры учетной записи**выберите **добавить GUID отслеживания.**

1. В поле **GUID** введите идентификатор GUID для отслеживания. Здесь идентификатор GUID вводится без префикса **pid-**. В поле **Описание** введите имя или описание предложения.

1. Чтобы зарегистрировать дополнительный идентификатор GUID, снова щелкните **Add Tracking GUID** (Добавить GUID отслеживания). На странице появятся дополнительные поля.

1. Щелкните **Сохранить**.

## <a name="use-resource-manager-templates"></a>Использование шаблонов Resource Manager
Многие решения партнеров развертываются с помощью шаблонов Azure Resource Manager. Если у вас есть шаблон диспетчер ресурсов, доступный в Azure Marketplace, в GitHub или в качестве краткого руководства, процесс изменения шаблона для включения атрибутов использования клиентов будет прямым.

> [!NOTE]
> Дополнительные сведения о создании и публикации шаблонов решений см. в статье
> * [Создайте и разверните первый шаблон диспетчер ресурсов](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-quickstart-create-templates-use-the-portal).
>* [Предложение приложения Azure](./partner-center-portal/create-new-azure-apps-offer.md).
>* Видео. [Создание шаблонов решений и управляемых приложений для Azure Marketplace](https://channel9.msdn.com/Events/Build/2018/BRK3603).


Чтобы добавить глобальный уникальный идентификатор (GUID), в основной файл шаблона нужно внести всего одно изменение.

1. [Создайте GUID](#create-guids) с помощью предлагаемого метода и [зарегистрируйте GUID](#register-guids).

1. Откройте шаблон Resource Manager.

1. Добавьте новый ресурс в основной файл шаблона. Этот ресурс можно указать только в файле **mainTemplate.json** или **azuredeploy.json**, но не во вложенных или связанных шаблонах.

1. Введите значение идентификатора GUID после префикса **pid-** (например, pid-eb7927c8-dd66-43e1-b0cf-c346a422063).

1. Проверьте шаблон на наличие ошибок.

1. Повторно опубликуйте шаблон в соответствующих репозиториях.

1. [Проверка GUID в развертывании шаблона](#verify-the-guid-deployment).

### <a name="sample-resource-manager-template-code"></a>Пример кода шаблона Resource Manager

Чтобы включить отслеживание ресурсов для шаблона, необходимо добавить следующие дополнительные ресурсы в разделе ресурсов. Обязательно измените данные в примере кода ниже своими входными данными, когда будете добавлять его в основной файл шаблона.
Этот ресурс должен быть добавлен только в файл **mainTemplate.json** или **azuredeploy.json**, но не во вложенные или связанные шаблоны.

```
// Make sure to modify this sample code with your own inputs where applicable

{ // add this resource to the resources section in the mainTemplate.json (do not add the entire file)
    "apiVersion": "2018-02-01",
    "name": "pid-XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX", // use your generated GUID here
    "type": "Microsoft.Resources/deployments",
    "properties": {
        "mode": "Incremental",
        "template": {
            "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
            "contentVersion": "1.0.0.0",
            "resources": []
        }
    }
} // remove all comments from the file when complete
```

## <a name="use-the-resource-manager-apis"></a>Использование интерфейсов API Resource Manager

В некоторых случаях будет удобно напрямую вызывать интерфейсы REST API Resource Manager для развертывания служб Azure. [Azure поддерживает несколько пакетов SDK](https://docs.microsoft.com/azure/?pivot=sdkstools), позволяющих реализовать такие вызовы. Можно использовать один из пакетов SDK или вызывать REST API напрямую для развертывания ресурсов.

Если вы используете шаблон Azure Resource Manager, присвойте решению тег, выполнив приведенные выше инструкции. Если вместо применения шаблона Azure Resource Manager вы выполняете прямые вызовы к API, у вас сохраняется возможность присвоить развертыванию тег для связывания с информацией об использовании ресурсов Azure.

### <a name="tag-a-deployment-with-the-resource-manager-apis"></a>Присвоение тегов развертыванию с помощью интерфейсов API Resource Manager

Чтобы включить атрибуты использования клиента, при проектировании вызовов API включите идентификатор GUID в заголовок агента пользователя в запросе. Добавьте отдельный идентификатор GUID для каждого предложения или номера SKU. Строка заголовка должна состоять из префикса **pid-** и созданного партнером идентификатора GUID. Ниже приведен пример формата для включения GUID в агент пользователя:

![Пример формата GUID](media/marketplace-publishers-guide/tracking-sample-guid-for-lu-2.PNG)

> [!NOTE]
> Важно соблюдать формат строки. Без префикса **pid-** вы не сможете получить нужные данные. Разные пакеты SDK выполняют отслеживание по-разному. Чтобы реализовать этот метод, изучите сведения о поддержке и процессах отслеживания для выбранного пакета SDK Azure.

#### <a name="example-the-python-sdk"></a>Пример для пакета SDK для Python

В Python используется атрибут **config**. Этот атрибут можно добавить только в UserAgent. Ниже приведен пример:

![Добавление атрибута в агент пользователя](media/marketplace-publishers-guide/python-for-lu.PNG)

> [!NOTE]
> Добавьте атрибут для каждого клиента. Глобальная статическая конфигурация не поддерживается. Вы может присвоить тег фабрике клиента, чтобы гарантировать отслеживание каждого клиента. Дополнительные сведения см. в [примере фабрики клиента](https://github.com/Azure/azure-cli/blob/7402fb2c20be2cdbcaa7bdb2eeb72b7461fbcc30/src/azure-cli-core/azure/cli/core/commands/client_factory.py#L70-L79), размещенном в GitHub.

#### <a name="tag-a-deployment-by-using-the-azure-powershell"></a>Присвоение тега развертыванию с помощью Azure PowerShell

Если для развертывания ресурсов вы используете Azure PowerShell, идентификатор GUID можно добавить следующим способом:

```powershell
[Microsoft.Azure.Common.Authentication.AzureSession]::ClientFactory.AddUserAgent("pid-eb7927c8-dd66-43e1-b0cf-c346a422063")
```

#### <a name="tag-a-deployment-by-using-the-azure-cli"></a>Присвоение тега развертыванию с помощью Azure CLI

Чтобы добавить GUID с помощью Azure CLI, задайте переменную среды **AZURE_HTTP_USER_AGENT**. Значение этой переменной можно задать в области скрипта. Также ее можно задать глобально для области оболочки:

```
export AZURE_HTTP_USER_AGENT='pid-eb7927c8-dd66-43e1-b0cf-c346a422063'
```
Дополнительные сведения см. в разделе [Azure SDK для Go](https://docs.microsoft.com/azure/go/).

## <a name="use-terraform"></a>Использование terraform

Поддержка terraform доступна в выпуске 1.21.0 поставщика Azure: [https://github.com/terraform-providers/terraform-provider-azurerm/blob/master/CHANGELOG.md#1210-january-11-2019](https://github.com/terraform-providers/terraform-provider-azurerm/blob/master/CHANGELOG.md#1210-january-11-2019).  Эта поддержка применяется ко всем партнерам, которые развертывают свое решение через terraform, и всем ресурсам, развернутым и отслеживаемым поставщиком Azure (версия 1.21.0 или более поздняя).

Поставщик Azure для terraform добавил новое дополнительное поле с именем [*partner_id*](https://www.terraform.io/docs/providers/azurerm/#partner_id) , в котором указывается GUID отслеживания, используемый для решения. Значение этого поля также может быть источником из переменной среды *ARM_PARTNER_ID* .

```
provider "azurerm" {
          subscription_id = "xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
          client_id = "xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
          ……
          # new stuff for ISV attribution
          partner_id = "xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}
```
Партнерам, желающим получить свое развертывание с помощью terraform, следите за использованием атрибутов использования клиентов, необходимо выполнить следующие действия.

* Создание GUID (GUID должен быть добавлен для каждого предложения или SKU)
* Обновите свой поставщик Azure, чтобы задать для *partner_id* значение GUID (не предзначайте GUID с помощью "PID-", просто задайте для него фактический идентификатор GUID).


## <a name="verify-the-guid-deployment"></a>Проверка развертывания GUID

Когда вы измените шаблон и выполните тестовое развертывание, запустите указанный ниже скрипт PowerShell, чтобы получить данные о развернутых ресурсах с указанным тегом.

Этот скрипт позволяет убедиться, что GUID успешно добавлен в шаблон Resource Manager. Скрипт не применяется к диспетчер ресурсов развертываниям API или terraform.

Войдите в Azure. Перед выполнением скрипта выберите подписку, в которой размещено тестируемое развертывание. Выполните скрипт в контексте подписки развертывания.

Скрипт принимает **GUID** и **resourceGroup** (имя группы ресурсов) в качестве обязательных параметров.

[Оригинал этого скрипта](https://gist.github.com/bmoore-msft/ae6b8226311014d6e7177c5127c7eba1#file-verify-deploymentguid-ps1) размещен в GitHub.

```powershell
Param(
    [GUID][Parameter(Mandatory=$true)]$guid,
    [string][Parameter(Mandatory=$true)]$resourceGroupName
)

# Get the correlationId of the pid deployment

$correlationId = (Get-AzResourceGroupDeployment -ResourceGroupName
$resourceGroupName -Name "pid-$guid").correlationId

# Find all deployments with that correlationId

$deployments = Get-AzResourceGroupDeployment -ResourceGroupName $resourceGroupName | Where-Object{$_.correlationId -eq $correlationId}

# Find all deploymentOperations in a deployment by name
# PowerShell doesn't surface outputResources on the deployment
# or correlationId on the deploymentOperation

foreach ($deployment in $deployments){

# Get deploymentOperations by deploymentName
# then the resourceId for any create operation

($deployment | Get-AzResourceGroupDeploymentOperation | Where-Object{$_.properties.provisioningOperation -eq "Create" -and $_.properties.targetResource.resourceType -ne "Microsoft.Resources/deployments"}).properties.targetResource.id

}
```

## <a name="report"></a>Report

Отчет о соотношении использования клиентов можно найти на панели мониторинга центра партнеров ([https://partner.microsoft.com/dashboard/mpn/analytics/CPP/MicrosoftAzure](https://partner.microsoft.com/dashboard/mpn/analytics/CPP/MicrosoftAzure)). Чтобы просмотреть отчет, необходимо использовать учетные данные центра партнеров для входа. При возникновении проблем с отчетом или входом создайте запрос в службу поддержки, следуя инструкциям в разделе Получение поддержки.

Выберите пункт Отслеживание шаблона в раскрывающемся списке типа ассоциации партнера, чтобы просмотреть отчет.

![Отчет о соотношении использования клиентов](media/marketplace-publishers-guide/customer-usage-attribution-report.png)

## <a name="notify-your-customers"></a>Информирование клиентов

Партнеры должны информировать клиентов о развертываниях, использующих атрибуты использования клиентов. Корпорация Майкрософт передает партнеру сведения о потреблении ресурсов Azure, связанном с этими развертываниями. Ниже представлены примеры сообщений, которые можно использовать для уведомления клиентов о таких развертываниях. В приведенных примерах замените заполнитель \<PARTNER> именем вашей компании. Кроме того, нужно согласовать эти сообщения с политиками конфиденциальности и сбора данных, используемыми партнером, а также предоставить клиенту возможность отключить отслеживание.

### <a name="notification-for-resource-manager-template-deployments"></a>Информационное сообщение для развертываний с помощью шаблона Resource Manager

Когда вы используете этот шаблон, корпорация Майкрософт сопоставляет установку программного обеспечения \<PARTNER> с развернутыми ресурсами Azure. Корпорация Майкрософт может отслеживать ресурсы Azure, используемые для работы этого программного обеспечения. Корпорация Майкрософт собирает эти сведения, чтобы максимально повысить качество использования своих продуктов и делового сотрудничества. Эти данные собираются и используются с соблюдением политик конфиденциальности корпорации Майкрософт, которые можно найти по адресу https://www.microsoft.com/trustcenter.

### <a name="notification-for-sdk-or-api-deployments"></a>Информационное сообщение для развертываний с использованием пакета SDK или API

Когда вы развертываете программное обеспечение \<PARTNER>, корпорация Майкрософт сопоставляет установку программного обеспечения \<PARTNER> с развернутыми ресурсами Azure. Корпорация Майкрософт может отслеживать ресурсы Azure, используемые для работы этого программного обеспечения. Корпорация Майкрософт собирает эти сведения, чтобы максимально повысить качество использования своих продуктов и делового сотрудничества. Эти данные собираются и используются с соблюдением политик конфиденциальности корпорации Майкрософт, которые можно найти по адресу https://www.microsoft.com/trustcenter.

## <a name="get-support"></a>Получение поддержки

В зависимости от ваших проблем существует два канала поддержки.

При возникновении проблем в центре партнеров, например при просмотре отчета о сопоставлении использования клиентов или входе в систему, создайте запрос в службу поддержки у группы поддержки центра партнеров:[https://partner.microsoft.com/support](https://partner.microsoft.com/support)

![](./media/marketplace-publishers-guide/partner-center-log-in-support.png)

Если вам требуется помощь при адаптации и/или назначении использования клиента в Marketplace, например о настройке атрибутов использования клиента, выполните следующие действия:

1. Перейдите на [страницу службы поддержки](https://go.microsoft.com/fwlink/?linkid=844975).

1. В разделе **Тип проблемы** выберите **Marketplace Onboarding** (Подключение к Marketplace).

1. Выберите **категорию**, которая соответствует вашей проблеме.

   - Если проблема связана с отслеживанием потребления, выберите **Прочее**.
   - Чтобы получить доступ к проблемам с Azure Marketplace, выберите пункт **проблема доступа**.

     ![Выбор категории проблемы](media/marketplace-publishers-guide/lu-article-incident.png)

1. Выберите **запрос на запуск**.

1. На следующей странице введите обязательные значения. Выберите пункт **Продолжить**.

1. На следующей странице введите обязательные значения.

   > [!IMPORTANT]
   > В поле **Название инцидента** введите **ISV Usage Tracking** (Отслеживание потребления для независимого поставщика программного обеспечения). Подробно опишите проблему.

   ![Ввод названия инцидента: ISV Usage Tracking (Отслеживание потребления для независимого поставщика программного обеспечения)](media/marketplace-publishers-guide/guid-dev-center-help-hd%201.png)

1. Заполните форму и щелкните **Отправить**.

Вы также можете получить техническое руководство от технического консультанта корпорации Майкрософт по техническим продуктам, развертыванию и разработке приложений, чтобы понять и включить атрибуты использования клиентов.

### <a name="how-to-submit-a-technical-consultation-request"></a>Как отправить запрос на технические консультации

1. Посетите [технические службы партнеров](https://partner.microsoft.com/training/partner-technical-services).
1. Выберите облачная инфраструктура и управление, после чего откроется новая страница для просмотра технического пути.
1. В разделе службы развертывания нажмите кнопку Отправить запрос.
1. Выполните вход с помощью MSA (учетная запись MPN) или AAD (учетная запись панели мониторинга партнера); на основе учетных данных для входа откроется форма запроса в Интернете:
    * Завершите или ознакомьтесь с контактной информацией.
    * Сведения об консультации можно предварительно заполнить или выбрать в раскрывающихся списках.
    * Введите название и описание проблемы (укажите как можно больше сведений).
1. Щелкните "Submit" (Отправить).

Просмотрите пошаговые инструкции с снимками экрана с использованием технических предварительных выпусков [и служб развертывания](https://support.microsoft.com/help/3121537/using-technical-presales-and-deployment-services#request%20a%20technical%20consultation).

### <a name="whats-next"></a>Что дальше?

Вы получите контакт с техническим консультантом корпорации Майкрософт, чтобы настроить вызов в области действия ваших потребностей.

## <a name="faq"></a>ВОПРОСЫ И ОТВЕТЫ

**Зачем добавлять GUID в шаблон?**

Корпорация Майкрософт предоставляет партнерам представление о клиентских развертываниях своих решений и понимание их влияния на использование. Корпорация Майкрософт и партнер могут использовать эту информацию, чтобы обеспечить более плотное взаимодействие между отделами продаж. Корпорация Майкрософт и партнер также могут использовать эти данные для оценки влияния отдельных партнеров на рост и развитие Azure.

**Можно ли изменить добавленный ранее GUID?**

Да, клиент или партнер по реализации может изменять шаблон, удалять GUID или указывать другой GUID. Мы рекомендуем, чтобы партнеры заранее описывали роль ресурса и GUID клиентам и партнерам, чтобы предотвратить удаление или изменение идентификатора GUID. Изменение GUID влияет только на новые развертывания и ресурсы, но не затрагивает уже существующие.

**Можно ли отслеживать шаблоны, развертываемые из репозитория сторонних производителей, например GitHub?**

Да. Данные о потреблении будут отслеживаться, если в шаблоне на момент развертывания указан GUID. Партнеры по-прежнему должны регистрировать свои идентификаторы GUID.

**Получает ли клиент отчеты?**

Клиенты могут отслеживать потребление отдельных ресурсов или определенных клиентом групп ресурсов на портале управления Azure. Клиенты не видят использование, разбитое по GUID.

**Эта методика подобна цифровому партнеру записи (DPOR)?**

Этот новый метод привязки развертывания и данных об использовании к решению партнера дает возможность связать решение партнера с данными об использовании ресурсов Azure. DPOR предназначен для связывания партнера, предоставляющего услуги консультирования (системный интегратор) или управления (поставщик управляемых служб), с подпиской Azure клиента.

**В чем заключается преимущество использования формы генератора GUID хранилища Azure?**

Форма генератора GUID хранилища Azure гарантированно создает уникальный идентификатор требуемого формата. Кроме того, если используются какие-либо методы отслеживания плоскости данных хранилища Azure, вы можете использовать один и тот же уникальный идентификатор для отслеживания плоскости управления Marketplace. Это позволяет использовать единый унифицированный уникальный идентификатор для определения принадлежности участника, без поддержки отдельных GUID.

**Можно ли использовать частный настраиваемый виртуальный жесткий диск для предложения шаблона решения в Azure Marketplace?**

Нет, невозможно. Образ виртуальной машины должен быть получен из Azure Marketplace. см.: [https://docs.microsoft.com/azure/marketplace/marketplace-virtual-machines](https://docs.microsoft.com/azure/marketplace/marketplace-virtual-machines).

Вы можете создать предложение виртуальной машины в Marketplace с помощью пользовательского виртуального жесткого диска и отметить его как частный, чтобы никто не мог его увидеть. Затем укажите ссылку на эту виртуальную машину в шаблоне решения.

**Не удалось обновить свойство *contentVersion* для основного шаблона?**

Вероятно, ошибка в некоторых случаях при развертывании шаблона с помощью TemplateLink из другого шаблона, который ожидает более ранних contentVersion по какой-то причине. Обходной путь заключается в использовании свойства метаданных:

```
"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "metadata": {
        "contentVersion": "1.0.1.0"
    },
    "parameters": {
```
