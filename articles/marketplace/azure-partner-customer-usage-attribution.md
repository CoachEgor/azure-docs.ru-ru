---
title: Azure партнеров и клиентов использования однозначного соответствия примитивов | Azure Marketplace
description: Общие сведения о том, как отслеживать использование решений Azure Marketplace клиентами
services: Azure, Marketplace, Compute, Storage, Networking, Blockchain, Security
author: yijenj
ms.service: marketplace
ms.topic: article
ms.date: 11/17/2018
ms.author: yijenj
ms.openlocfilehash: 09ce4cdc6ab4556f0ba68507bb23d09e02ae0357
ms.sourcegitcommit: 8c49df11910a8ed8259f377217a9ffcd892ae0ae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66296816"
---
# <a name="azure-partner-customer-usage-attribution"></a>Определение потребления услуг Azure клиентами партнеров

Вы являетесь партнером по разработке ПО для Azure, а значит, ваши решения используют компоненты Azure или должны развертываться в инфраструктуре Azure. Если клиент развертывает решение нашего партнера и предоставляет для него собственные ресурсы Azure, ему будет сложно контролировать состояние этого развертывания или его влияние на рост и развитие Azure. Расширяя возможности визуального контроля в своем решении, вы поможете отделам продаж Майкрософт и получите дополнительные преимущества по партнерским программам Майкрософт.

Корпорация Майкрософт предоставляет новый метод, который поможет партнерам отслеживать потребление ресурсов Azure для клиентских развертываний программного обеспечения в Azure. Этот метод основан на использовании Azure Resource Manager для оркестрации развертывания служб Azure.

Являясь партнером корпорации Майкрософт, вы можете связать сведения о потреблении Azure с любыми созданными для клиента ресурсами Azure. Такие связи можно создавать с помощью Azure Marketplace, репозитория шаблонов быстрого запуска, частных репозиториев GitHub и индивидуального взаимодействия с клиентом. Однозначного соответствия примитивов использования клиента поддерживает три варианта развертывания:

- Шаблоны Azure Resource Manager. Партнеры могут использовать шаблоны Resource Manager для развертывания служб Azure для запуска программного обеспечения партнера. Партнеры могут создать шаблон Resource Manager, который определяет инфраструктуру и конфигурацию решения Azure. Шаблон Resource Manager позволит вам и вашим клиентам легко развертывать решение на всем протяжении его жизненного цикла. Вы можете быть уверены, что все ресурсы развертываются в согласованном состоянии.
- API Azure Resource Manager. Партнеры могут напрямую вызывать интерфейсы API Resource Manager, чтобы развернуть шаблон Azure Resource Manager или создавать вызовы API для непосредственной подготовки служб Azure.
- Terraform: Партнеры могут использовать облако оркестратор, например Terraform для развертывания шаблона Resource Manager или непосредственно развертывание служб Azure.

Однозначного соответствия примитивов использования клиента предназначен для нового развертывания и не поддерживает добавление тегов существующие ресурсы, которые уже были развернуты.

Однозначного соответствия примитивов использования клиента необходим для [приложения Azure](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal/azure-applications/cpp-azure-app-offer): опубликованные предложения шаблона решения в Azure Marketplace.


[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]

## <a name="use-resource-manager-templates"></a>Использование шаблонов Resource Manager
Многие решения партнеров развертываются в подписке клиента с помощью шаблонов Resource Manager. Если у вас есть шаблон Resource Manager, которая доступна в Azure Marketplace, на сайте GitHub, а также краткое руководство, процесс внесения изменений в шаблон, чтобы включить однозначного соответствия примитивов использования клиента следует очень легко.

Дополнительные сведения о создании и публикации шаблонов решений см. в статье

* [Краткое руководство. Создание и развертывание шаблонов Azure Resource Manager с помощью портала Azure](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-quickstart-create-templates-use-the-portal).
* [Предложение приложения Azure](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal/azure-applications/cpp-azure-app-offer).
* Видео: [Building Solution Templates, and Managed Applications for the Azure Marketplace](https://channel9.msdn.com/Events/Build/2018/BRK3603) (Создание управляемых приложений и шаблонов решений для Microsoft Azure Marketplace).


## <a name="add-a-guid-to-your-template"></a>Добавление GUID в шаблон

Чтобы добавить глобальный уникальный идентификатор (GUID), в основной файл шаблона нужно внести всего одно изменение.

1. [Создайте GUID](#create-guids) с помощью предлагаемого метода и [зарегистрируйте GUID](#register-guids-and-offers).

1. Откройте шаблон Resource Manager.

1. Добавьте новый ресурс в основной файл шаблона. Этот ресурс можно указать только в файле **mainTemplate.json** или **azuredeploy.json**, но не во вложенных или связанных шаблонах.

1. Введите значение идентификатора GUID после префикса **pid-** (например, pid-eb7927c8-dd66-43e1-b0cf-c346a422063).

1. Проверьте шаблон на наличие ошибок.

1. Повторно опубликуйте шаблон в соответствующих репозиториях.

1. [Проверка GUID в развертывании шаблона](#verify-the-guid-deployment).

### <a name="sample-resource-manager-template-code"></a>Пример кода шаблона Resource Manager

Чтобы включить отслеживание ресурсов для шаблона, необходимо добавить следующие дополнительные ресурсы в разделе ресурсов. Обязательно измените данные в примере кода ниже своими входными данными, когда будете добавлять его в основной файл шаблона.
Этот ресурс должен быть добавлен только в файл **mainTemplate.json** или **azuredeploy.json**, но не во вложенные или связанные шаблоны.

```
// Make sure to modify this sample code with your own inputs where applicable

{ // add this resource to the resources section in the mainTemplate.json (do not add the entire file)
    "apiVersion": "2018-02-01",
    "name": "pid-XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX", // use your generated GUID here
    "type": "Microsoft.Resources/deployments",
    "properties": {
        "mode": "Incremental",
        "template": {
            "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
            "contentVersion": "1.0.0.0",
            "resources": []
        }
    }
} // remove all comments from the file when complete
```

## <a name="use-the-resource-manager-apis"></a>Использование интерфейсов API Resource Manager

В некоторых случаях будет удобно напрямую вызывать интерфейсы REST API Resource Manager для развертывания служб Azure. [Azure поддерживает несколько пакетов SDK](https://docs.microsoft.com/azure/#pivot=sdkstools), позволяющих реализовать такие вызовы. Можно использовать один из пакетов SDK или вызывать REST API напрямую для развертывания ресурсов.

Если вы используете шаблон Azure Resource Manager, присвойте решению тег, выполнив приведенные выше инструкции. Если вместо применения шаблона Azure Resource Manager вы выполняете прямые вызовы к API, у вас сохраняется возможность присвоить развертыванию тег для связывания с информацией об использовании ресурсов Azure.

### <a name="tag-a-deployment-with-the-resource-manager-apis"></a>Присвоение тегов развертыванию с помощью интерфейсов API Resource Manager

Чтобы включить использование клиентами однозначного соответствия примитивов, при проектировании вызовов API, включают идентификатор GUID в заголовок агента пользователя в запросе. Добавьте отдельный идентификатор GUID для каждого предложения или номера SKU. Строка заголовка должна состоять из префикса **pid-** и созданного партнером идентификатора GUID. Ниже приведен пример формата для включения GUID в агент пользователя:

![Пример формата GUID](media/marketplace-publishers-guide/tracking-sample-guid-for-lu-2.PNG)

> [!Note]
> Важно соблюдать формат строки. Без префикса **pid-** вы не сможете получить нужные данные. Разные пакеты SDK выполняют отслеживание по-разному. Чтобы реализовать этот метод, изучите сведения о поддержке и процессах отслеживания для выбранного пакета SDK Azure.

#### <a name="example-the-python-sdk"></a>Пример: Пакет SDK для Python

В Python используется атрибут **config**. Этот атрибут можно добавить только в UserAgent. Ниже приведен пример:

![Добавление атрибута в агент пользователя](media/marketplace-publishers-guide/python-for-lu.PNG)

> [!Note]
> Добавьте атрибут для каждого клиента. Глобальная статическая конфигурация не поддерживается. Вы может присвоить тег фабрике клиента, чтобы гарантировать отслеживание каждого клиента. Дополнительные сведения см. в [примере фабрики клиента](https://github.com/Azure/azure-cli/blob/7402fb2c20be2cdbcaa7bdb2eeb72b7461fbcc30/src/azure-cli-core/azure/cli/core/commands/client_factory.py#L70-L79), размещенном в GitHub.

#### <a name="tag-a-deployment-by-using-the-azure-powershell"></a>Присвоение тега развертыванию с помощью Azure PowerShell

Если для развертывания ресурсов вы используете Azure PowerShell, идентификатор GUID можно добавить следующим способом:

```powershell
[Microsoft.Azure.Common.Authentication.AzureSession]::ClientFactory.AddUserAgent("pid-eb7927c8-dd66-43e1-b0cf-c346a422063")
```

#### <a name="tag-a-deployment-by-using-the-azure-cli"></a>Присвоение тега развертыванию с помощью Azure CLI

Чтобы добавить GUID с помощью Azure CLI, задайте переменную среды **AZURE_HTTP_USER_AGENT**. Значение этой переменной можно задать в области скрипта. Также ее можно задать глобально для области оболочки:

```
export AZURE_HTTP_USER_AGENT='pid-eb7927c8-dd66-43e1-b0cf-c346a422063'
```
Дополнительные сведения см. в разделе [Azure SDK для Go](https://docs.microsoft.com/go/azure/).

## <a name="use-terraform"></a>Использование Terraform

Поддержка для Terraform доступна через поставщика Azure 1.21.0 выпуска: [ https://github.com/terraform-providers/terraform-provider-azurerm/blob/master/CHANGELOG.md#1210-january-11-2019 ](https://github.com/terraform-providers/terraform-provider-azurerm/blob/master/CHANGELOG.md#1210-january-11-2019).  Эта поддержка действует для всех партнеров, которые развертывают свои решения с помощью Terraform и все ресурсы развернуты и измеряемые поставщиком Azure (версия 1.21.0 или более поздней версии).

Поставщик Azure для Terraform добавлен новый необязательное поле с именем [ *partner_id* ](https://www.terraform.io/docs/providers/azurerm/#partner_id) которого здесь указывается отслеживаемый GUID, используемом для вашего решения. Значение этого поля может также быть изготовлены *ARM_PARTNER_ID* переменных среды.

```
provider "azurerm" {
          subscription_id = "xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
          client_id = "xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
          ……
          # new stuff for ISV attribution
          partner_id = “xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}
```
Партнеров, которые хотят получать их развертывание с помощью Terraform, отслеживаются однозначного соответствия примитивов использования клиента должен выполнить следующее:

* Создать GUID (GUID должны быть добавлены для каждого предложения или SKU)
* Обновить их поставщика Azure, чтобы задать значение *partner_id* на идентификатор GUID (не предварительная исправление GUID с «pid-», просто задайте для него значение фактический идентификатор GUID)

## <a name="create-guids"></a>Создание глобальных уникальных идентификаторов

Идентификатор GUID является уникальным числом из 32 шестнадцатеричных цифр и используется для создания ссылок. Чтобы создать идентификаторы GUID для отслеживания, следует использовать генератор GUID. Команда разработчиков службы хранилища Azure создала [форму генератора GUID](https://aka.ms/StoragePartners), которая позволяет получить GUID в правильном формате на электронную почту и которую можно использовать в различных системах отслеживания.

> [!Note]
> Настоятельно рекомендуется использовать [формы генератор GUID хранилища Azure](https://aka.ms/StoragePartners) для создания идентификатора GUID. Дополнительные сведения см. в разделе [Часто задаваемые вопросы](#faq).

Рекомендуется создавать уникальные GUID для всех предложений и каналов распределения каждого продукта. Можно использовать один идентификатор GUID для нескольких каналов распределения, если дробить отчетность нежелательно.

Если развернутый с помощью шаблона продукт доступен в Azure Marketplace и на сайте GitHub, можно создать и зарегистрировать два уникальных идентификатора GUID:

*   продукт А в Azure Marketplace;
*   продукт А на сайте GitHub.

Отчеты подготавливаются по идентификатору партнера Майкрософт и идентификатору GUID.

Кроме того, идентификаторы GUID можно отслеживать на более детальном уровне, например на уровне номеров SKU, которые обозначают разные варианты одного предложения.

## <a name="register-guids-and-offers"></a>Регистрация идентификаторов GUID и предложений

Идентификаторы GUID должны быть зарегистрированы для включения однозначного соответствия примитивов использования клиента.

Регистрация всех идентификаторов GUID для шаблонов выполняется с помощью Портала Cloud Partner Azure Marketplace.

После того как вы добавите GUID в шаблон или агент пользователя и зарегистрируете GUID на Портале Cloud Partner, все развертывания с ним будут отслеживаться.

1. Зарегистрируйтесь в [Azure Marketplace](https://aka.ms/listonazuremarketplace) и получите доступ к Порталу Cloud Partner.

   * У каждого партнера должен быть [свой профиль на Портале Cloud Partner](https://docs.microsoft.com/azure/marketplace/become-publisher). Мы рекомендуем вам опубликовать свое предложение в Azure Marketplace или AppSource.
   * Любой партнер может зарегистрировать несколько идентификаторов GUID.
   * Партнеры могут регистрировать GUID даже для предложений и (или) шаблонов решений, не включенных в Marketplace.

1. Войдите на [облачный портал для партнеров](https://cloudpartner.azure.com/).

1. В правом верхнем углу щелкните значок учетной записи и выберите **Publisher profile** (Профиль издателя).

   ![Выбор профиля издателя](media/marketplace-publishers-guide/guid-image-for-lu.png)

1. На **странице профиля** щелкните **Add Tracking GUID** (Добавить GUID отслеживания).

   ![Выбор действия Add Tracking GUID (Добавить GUID отслеживания)](media/marketplace-publishers-guide/guid-how-to-add-tracking.png)

1. В поле **Tracking GUID** (GUID отслеживания) введите созданный GUID отслеживания. Здесь идентификатор GUID вводится без префикса **pid-** . В поле **Custom Description** (Пользовательское описание) введите произвольное имя или описание предложения.

   ![Страница профиля](media/marketplace-publishers-guide/guid-dev-center-login.png)

   ![Ввод идентификатора GUID и описания для предложения](media/marketplace-publishers-guide/guid-dev-center-example.png)

1. Чтобы зарегистрировать дополнительный идентификатор GUID, снова щелкните **Add Tracking GUID** (Добавить GUID отслеживания). На странице появятся дополнительные поля.

   ![Повторный выбор действия Add Tracking GUID (Добавить GUID отслеживания)](media/marketplace-publishers-guide/guid-dev-center-example-add.png)

   ![Ввод дополнительного идентификатора GUID и описания для предложения](media/marketplace-publishers-guide/guid-dev-center-example-description.png)

1. Щелкните **Сохранить**.

   ![Нажатие кнопки "Сохранить"](media/marketplace-publishers-guide/guid-dev-center-save.png)

После того как вы добавите GUID в шаблон или агент пользователя и зарегистрируете GUID на Портале Cloud Partner, все развертывания с ним будут отслеживаться.

## <a name="verify-the-guid-deployment"></a>Проверка развертывания GUID

Когда вы измените шаблон и выполните тестовое развертывание, запустите указанный ниже скрипт PowerShell, чтобы получить данные о развернутых ресурсах с указанным тегом.

Этот скрипт позволяет убедиться, что GUID успешно добавлен в шаблон Resource Manager. Скрипт не применяется к развертываниям API Resource Manager или Terraform.

Войдите в Azure. Перед выполнением скрипта выберите подписку, в которой размещено тестируемое развертывание. Выполните скрипт в контексте подписки развертывания.

Скрипт принимает **GUID** и **resourceGroup** (имя группы ресурсов) в качестве обязательных параметров.

[Оригинал этого скрипта](https://gist.github.com/bmoore-msft/ae6b8226311014d6e7177c5127c7eba1#file-verify-deploymentguid-ps1) размещен в GitHub.

```powershell
Param(
    [GUID][Parameter(Mandatory=$true)]$guid,
    [string][Parameter(Mandatory=$true)]$resourceGroupName
)

# Get the correlationId of the pid deployment

$correlationId = (Get-AzResourceGroupDeployment -ResourceGroupName
$resourceGroupName -Name "pid-$guid").correlationId

# Find all deployments with that correlationId

$deployments = Get-AzResourceGroupDeployment -ResourceGroupName $resourceGroupName | Where-Object{$_.correlationId -eq $correlationId}

# Find all deploymentOperations in a deployment by name
# PowerShell doesn't surface outputResources on the deployment
# or correlationId on the deploymentOperation

foreach ($deployment in $deployments){

# Get deploymentOperations by deploymentName
# then the resourceId for any create operation

($deployment | Get-AzResourceGroupDeploymentOperation | Where-Object{$_.properties.provisioningOperation -eq "Create" -and $_.properties.targetResource.resourceType -ne "Microsoft.Resources/deployments"}).properties.targetResource.id

}
```

## <a name="report"></a>Отчет

Отчет для однозначного соответствия примитивов использования клиента можно найти на панели мониторинга анализа центра партнеров. ([https://partner.microsoft.com/en-us/dashboard/mpn/analytics/CPP/MicrosoftAzure](https://partner.microsoft.com/dashboard/mpn/analytics/CPP/MicrosoftAzure)). Чтобы просмотреть отчет, необходимо использовать учетные данные центра партнеров для входа. Если возникли затруднения с отчетом или вход, создайте запрос в службу поддержки за инструкцией, в разделе поддержки Get.

Выберите шаблон, отслеживаются в раскрывающемся списке Тип ассоциации партнера для просмотра отчета.

![Отчет для однозначного соответствия примитивов использования клиента](media/marketplace-publishers-guide/customer-usage-attribution-report.png)

## <a name="notify-your-customers"></a>Информирование клиентов

Партнеры, сообщает о своих клиентов о развернутых с помощью однозначного соответствия примитивов использования клиента. Корпорация Майкрософт передает партнеру сведения о потреблении ресурсов Azure, связанном с этими развертываниями. Ниже представлены примеры сообщений, которые можно использовать для уведомления клиентов о таких развертываниях. В приведенных примерах замените заполнитель \<PARTNER> именем вашей компании. Кроме того, нужно согласовать эти сообщения с политиками конфиденциальности и сбора данных, используемыми партнером, а также предоставить клиенту возможность отключить отслеживание.

### <a name="notification-for-resource-manager-template-deployments"></a>Информационное сообщение для развертываний с помощью шаблона Resource Manager

Когда вы используете этот шаблон, корпорация Майкрософт сопоставляет установку программного обеспечения \<PARTNER> с развернутыми ресурсами Azure. Корпорация Майкрософт может отслеживать ресурсы Azure, используемые для работы этого программного обеспечения. Корпорация Майкрософт собирает эти сведения, чтобы максимально повысить качество использования своих продуктов и делового сотрудничества. Эти данные собираются и используются с соблюдением политик конфиденциальности корпорации Майкрософт, которые можно найти по адресу https://www.microsoft.com/trustcenter.

### <a name="notification-for-sdk-or-api-deployments"></a>Информационное сообщение для развертываний с использованием пакета SDK или API

Когда вы развертываете программное обеспечение \<PARTNER>, корпорация Майкрософт сопоставляет установку программного обеспечения \<PARTNER> с развернутыми ресурсами Azure. Корпорация Майкрософт может отслеживать ресурсы Azure, используемые для работы этого программного обеспечения. Корпорация Майкрософт собирает эти сведения, чтобы максимально повысить качество использования своих продуктов и делового сотрудничества. Эти данные собираются и используются с соблюдением политик конфиденциальности корпорации Майкрософт, которые можно найти по адресу https://www.microsoft.com/trustcenter.

## <a name="get-support"></a>Получение поддержки

Если возникнут проблемы с отчетом или входа в центр партнеров, создайте запрос в службу поддержки в центре партнеров службу поддержки здесь: [https://partner.microsoft.com/en-US/support](https://partner.microsoft.com/support)

![](./media/marketplace-publishers-guide/partner-center-log-in-support.png)

Если вам нужна помощь для адаптации Marketplace и/или однозначного соответствия примитивов использования клиента, выполните следующие действия.

1. Перейдите на [страницу службы поддержки](https://go.microsoft.com/fwlink/?linkid=844975).

1. В разделе **Тип проблемы** выберите **Marketplace Onboarding** (Подключение к Marketplace).

1. Выберите **категорию**, которая соответствует вашей проблеме.

   - Если проблема связана с отслеживанием потребления, выберите **Прочее**.
   - Если возникла проблема с доступом к Порталу Cloud Partner Azure Marketplace, выберите **Проблема доступа**.

     ![Выбор категории проблемы](media/marketplace-publishers-guide/lu-article-incident.png)

1. Щелкните **Отправить запрос**.

1. На следующей странице введите обязательные значения. Выберите **Продолжить**.

1. На следующей странице введите обязательные значения.

   > [!Important]
   > В поле **Название инцидента** введите **ISV Usage Tracking** (Отслеживание потребления для независимого поставщика программного обеспечения). Подробно опишите проблему.

   ![Ввод названия инцидента: ISV Usage Tracking (Отслеживание потребления для независимого поставщика программного обеспечения)](media/marketplace-publishers-guide/guid-dev-center-help-hd%201.png)

1. Заполните форму и щелкните **Отправить**.

Также вы можете получать технические рекомендации от Microsoft Partner Технический консультант технические перед выпуском, развертывания и сценарии разработки приложений для понимания и внедрить однозначного соответствия примитивов использования клиента.

### <a name="how-to-submit-a-technical-consultation-request"></a>Как отправить запрос на технические консультации

1. Посетите [ https://aka.ms/TechnicalJourney ](https://aka.ms/TechnicalJourney).
1. Выберите облачной инфраструктуры, а также новая страница откроется для просмотра технической пути.
1. В разделе служб развертывания нажмите кнопку Отправить запрос кнопки
1. Вход с использованием учетной записи Майкрософт (MPN учетная запись) или AAD (учетная запись мониторинга партнеров); исходя из учетных данных входа в систему, откроется веб-форму запроса:
    * Выполните/просмотр контактную информацию.
    * Консультации сведения могут быть предварительно заполнены, или выберите в раскрывающемся списке.
    * Введите заголовок и описание проблемы (предоставьте подробнейшую информацию максимально).
1. Нажмите кнопку Отправить

Пошаговые инструкции со снимками экрана в [ https://aka.ms/TechConsultInstructions ](https://aka.ms/TechConsultInstructions).

### <a name="whats-next"></a>Что дальше

Мы свяжемся с техническим консультантом партнеров Майкрософт для настройки вызова для определения области вашим потребностям.

## <a name="faq"></a>Часто задаваемые вопросы

**Зачем добавлять GUID в шаблон?**

Корпорация Майкрософт предоставляет партнерам с представлением клиентских развертываний своих решений и insights от их influenced использования. Корпорация Майкрософт и партнер могут использовать эту информацию, чтобы обеспечить более плотное взаимодействие между отделами продаж. Корпорация Майкрософт и партнер также могут использовать эти данные для оценки влияния отдельных партнеров на рост и развитие Azure.

**Можно ли изменить добавленный ранее GUID?**

Да, клиент или партнер по реализации может изменять шаблон, удалять GUID или указывать другой GUID. Мы рекомендуем, что партнеры заранее описания роли ресурса и идентификатор GUID для своих клиентов и партнеров, для предотвращения удаления или изменения на идентификатор GUID. Изменение GUID влияет только на новые развертывания и ресурсы, но не затрагивает уже существующие.

**Можно ли отслеживать шаблоны, развертываемые из репозитория сторонних производителей, например GitHub?**

Да. Данные о потреблении будут отслеживаться, если в шаблоне на момент развертывания указан GUID. Партнеры должны иметь профиль на портале cpp, чтобы зарегистрировать GUID, используемый для развертывания за пределами Azure Marketplace.

**Получает ли клиент отчеты?**

Клиенты могут отслеживать потребление отдельных ресурсов или определенных клиентом групп ресурсов на портале управления Azure.

**Аналогично эту методику для зарегистрированного цифрового партнера (DPOR)?**

Этот новый метод привязки развертывания и данных об использовании к решению партнера дает возможность связать решение партнера с данными об использовании ресурсов Azure. DPOR предназначен для связывания партнера, предоставляющего услуги консультирования (системный интегратор) или управления (поставщик управляемых служб), с подпиской Azure клиента.

**В чем заключается преимущество использования формы генератора GUID хранилища Azure?**

Форма генератора GUID хранилища Azure гарантированно создает уникальный идентификатор требуемого формата. Кроме того, если используются какие-либо методы отслеживания плоскости данных хранилища Azure, вы можете использовать один и тот же уникальный идентификатор для отслеживания плоскости управления Marketplace. Это позволяет использовать единый унифицированный уникальный идентификатор для определения принадлежности участника, без поддержки отдельных GUID.

**Можно ли использовать закрытый, пользовательские VHD для предложения шаблона решения в Azure Marketplace?**

Нет. Образ виртуальной машины должны поступать из Azure Marketplace, см. в разделе: [ https://docs.microsoft.com/azure/marketplace/marketplace-virtual-machines ](https://docs.microsoft.com/azure/marketplace/marketplace-virtual-machines).

Можно создать предложение виртуальной Машины в marketplace с помощью пользовательского VHD и пометить его как частных, и никто не может получить. Затем ссылка на эту виртуальную Машину в шаблоне решения.

**Не удалось обновить *contentVersion* свойство для основного шаблона?**

Скорее всего ошибка в некоторых случаях при развертывании шаблона с помощью TemplateLink из другого шаблона, ожидающие старые contentVersion по некоторым причинам. Решение — использовать свойство метаданных:

```
"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "metadata": {
        "contentVersion": "1.0.1.0"
    },
    "parameters": {
```
