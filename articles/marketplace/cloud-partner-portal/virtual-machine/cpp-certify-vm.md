---
title: Сертификация изображения VM для Рынка Azure
description: В статье показано, как протестировать и отправить образ виртуальной машины для сертификации в Azure Marketplace.
author: dsindona
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 09/26/2018
ms.author: dsindona
ms.openlocfilehash: 0225069179e0d7d94a983c5161976a5c1933fac5
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80278201"
---
# <a name="certify-your-vm-image"></a>Сертификация образа виртуальной машины

После создания и развертывания виртуальной машины необходимо протестировать ее образ и отправить его на сертификацию в Azure Marketplace. В этой статье описывается, где можно получить *средство проверки сертификации Azure*, как его использовать, чтобы сертифицировать образ виртуальной машины, и как отправить результаты проверки в контейнер Azure, где располагаются виртуальные жесткие диски (VHD). 


## <a name="download-and-run-the-certification-test-tool"></a>Загрузка и запуск средства проверки сертификации

Средство проверки сертификации Azure выполняется на локальном компьютере Windows, однако оно может тестировать виртуальную машину Azure на базе и Windows, и Linux.  Оно проверяет, совместим ли пользовательский образ виртуальной машины с Microsoft Azure: выполнены ли рекомендации и требования по подготовке виртуального жесткого диска. Выходные данные средства — это отчет совместимости, который отправляется на [Портал Cloud Partner](https://cloudpartner.azure.com) для запроса сертификации виртуальной машины.

1. Скачайте и установите [средство проверки сертификации Azure](https://www.microsoft.com/download/details.aspx?id=44299) последней версии. 
2. Откройте средство сертификации и нажмите кнопку **Запустить новую проверку**.
3. На экране **Test Information** (Сведения о проверке) введите **имя теста** для тестового запуска.
4. Выберите **платформу** для виртуальной машины: `Windows Server` или `Linux`. Выбор платформы влияет на остальные параметры.
5. Если ваша виртуальная машина использует эту службу базы данных, установите флажок **Test for Azure SQL Database** (Тест для Базы данных SQL Azure).

   ![Исходная страница средства проверки сертификации](./media/publishvm_025.png)


## <a name="connect-the-certification-tool-to-a-vm-image"></a>Подключение средства сертификации к образу виртуальной машины

  Средство подключается к виртуальным машинам Windows через [PowerShell](https://docs.microsoft.com/powershell/), а к виртуальным машинам Linux — через [SSH.Net](https://www.ssh.com/ssh/protocol/).

### <a name="connect-the-certification-tool-to-a-linux-vm-image"></a>Подключение средства сертификации к образу виртуальной машины Linux

1. Выберите режим **проверки подлинности по SSH**: `Password Authentication` или `key File Authentication`.
2. При использовании проверки подлинности на основе пароля введите значения для **DNS-имени виртуальной машины**, **имени пользователя** и **пароля**.  При необходимости можно изменить номер **порта SSH** по умолчанию.

     ![Проверка пароля для образа виртуальной машины Linux](./media/publishvm_026.png)

3. При использовании проверки подлинности на основе файла ключа введите значения **DNS-имени**, **имени пользователя** и расположение **закрытого ключа**.  При необходимости можно предоставить **парольную фразу** или изменить номер **порта SSH** по умолчанию.

     ![Проверка подлинности файла для образа виртуальной машины Linux](./media/publishvm_027.png)

### <a name="connect-the-certification-tool-to-a-windows-based-vm-image"></a>**Подключение средства сертификации к образу виртуальной машины Windows**
1. Введите полное доменное **DNS-имя виртуальной машины** (например, `MyVMName.Cloudapp.net`).
2. Введите значения для **имени пользователя** и **пароля**.

   ![Проверка пароля для образа виртуальной машины Windows](./media/publishvm_028.png)


## <a name="run-a-certification-test"></a>Выполнение теста сертификации

После предоставления значений параметров для образа виртуальной машины в средстве сертификации выберите **Проверить подключение**, чтобы проверить допустимость подключения к виртуальной машине. Когда подключение будет проверено, нажмите кнопку **Далее**, чтобы начать тестирование.  По завершении теста отобразится таблица с результатами теста (успех/сбой/предупреждение).  В следующем примере показаны результаты тестирования виртуальной машины Linux. 

![Результаты тестирования сертификации для образа виртуальной машины Linux](./media/publishvm_029.png)

Если хотя бы один из тестов не будет пройден, образ *не будет* сертифицирован. В этом случае ознакомьтесь с требованиями и сообщениями об ошибках, внесите указанные изменения и повторно выполните тест. 

После автоматической проверки вам будет предложено указать дополнительную информацию об образе виртуальной машины в окне **анкеты**.  В нем содержится две вкладки, которые необходимо завершить.  На вкладке **General Assessment** (Общая оценка) содержатся вопросы типа **Истина/ложь**, а на вкладке **Kernel Customization** (Настройка ядра) — вопросы с несколькими вариантами ответа и вопросы с ответом в произвольной форме.  Ответьте на вопросы на обеих вкладках и нажмите кнопку **Далее**.

![Анкета средства сертификации](./media/publishvm_030.png)

На последнем экране можно указать дополнительные сведения, например данные для доступа по протоколу SSH для образа виртуальной машины Linux, а также разъяснения для непройденных проверок, если вам необходимы исключения. 

Наконец, щелкните **Сформировать отчет**, чтобы скачать результаты проверки и файлы журналов выполненных тестов, а также свои ответы на вопросы анкеты. Сохраните результаты в том же контейнере, где хранятся диски VHD.

![Сохранение результатов теста для сертификации](./media/publishvm_031.png)


## <a name="next-steps"></a>Дальнейшие действия

Далее необходимо [создать универсальные коды ресурсов (URI) для каждого виртуального жесткого диска](./cpp-get-sas-uri.md), который отправляется в marketplace. 
