---
title: Обновление существующего предложения виртуальной машины в Azure Marketplace
description: Сведения об обновлении существующего предложения виртуальной машины в Azure Marketplace.
services: Azure, Marketplace, Cloud Partner Portal,
author: v-miclar
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: article
ms.date: 08/27/2018
ms.author: ansud
ms.openlocfilehash: 5cbee909b4bd6353ad8fbe9fcbc126dc4a245012
ms.sourcegitcommit: ac56ef07d86328c40fed5b5792a6a02698926c2d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/08/2019
ms.locfileid: "73823988"
---
# <a name="update-an-existing-vm-offer-on-azure-marketplace"></a>Обновление существующего предложения виртуальной машины в Azure Marketplace

В этой статье описана процедура обновления и повторной публикации предложения виртуальной машины на [Портале Cloud Partner](https://cloudpartner.azure.com/). 

Есть много распространенных причин для обновления предложения, например:

-  добавление нового образа виртуальной машины к существующим номерам SKU;
-  изменение регионов, в которых доступен номер SKU;
-  добавление новых номеров SKU;
-  обновление метаданных Marketplace для предложения или отдельных номеров SKU;
-  обновление цен на предложения с оплатой по мере использования.

Чтобы помочь вам выполнить эти изменения, портал предлагает функции **сравнения** и **журнала**.  

>[!Note]
>Вы можете получить доступ к партнерским каналам поставщика облачных решений (CSP).  Дополнительные сведения о маркетинге вашего предложения с помощью партнерских каналов Microsoft CSP см. в статье [поставщики облачных решений](../../cloud-solution-providers.md) .

## <a name="unpermitted-changes-to-vm-offer-or-sku"></a>Недопустимые изменения предложений виртуальной машины или номеров SKU

Некоторые атрибуты предложения виртуальной машины или номера SKU нельзя изменить после публикации в Azure Marketplace. В первую очередь это:

-  **Идентификатор предложения** и **идентификатор издателя** предложения.
-  Идентификаторы существующих **номеров SKU**.
-  количество дисков данных для существующих номеров SKU;
-  Модели выставления счетов и лицензирования для существующих номеров SKU.
-  увеличение цены для опубликованного номера SKU.


## <a name="common-update-operations"></a>Стандартные операции обновления

Есть много разных характеристик, которые можно изменить для предложения виртуальной машины, но некоторые из них встречаются чаще других.

### <a name="update-the-vm-image-version-for-a-sku"></a>Обновление версии образа виртуальной машины для номера SKU

Для многих виртуальных машин регулярно обновляются образы путем применения исправлений безопасности, включения дополнительных функций и т. д.  В таких случаях следует обновить образ виртуальной машины, указанный в номере SKU, выполнив следующие действия.

1.  Войдите на [Портал Cloud Partner](https://cloudpartner.azure.com/).

2.  В разделе **Все предложения** найдите предложение, которое нужно обновить.

3.  На вкладке **Номера SKU** выберите номер SKU, связанный с обновляемым образом виртуальной машины.

4.  В разделе **Disk version** (Версия диска) щелкните действие **+New Disk Version** (+Новая версия диска), чтобы добавить новый образ виртуальной машины.

5.  Укажите **версию диска** для нового образа виртуальной машины. Версия диска должна соответствовать формату [семантической версии](https://semver.org/). Формат версии должен иметь вид X.Y.Z, где X, Y и Z являются целыми числами. Следите за тем, чтобы новый номер версии всегда был больше всех предыдущих номеров, в противном случае после публикации новая версия не будет отображаться на портале и в Azure Marketplace.

6.  В поле **OS VHD URL** (URL-адрес виртуального диска операционной системы) введите [подписанный URL-адрес](./cpp-get-sas-uri.md), созданный для виртуального диска операционной системы. 

    > [!WARNING] 
    > Разные версии номера SKU не могут иметь разное число дисков с данными. Если в предыдущей версии были настроены диски данных, то в любой новой версии их количество должно остаться прежним.

7.  Щелкните **Опубликовать**, чтобы запустить рабочий процесс публикации новой версии виртуальной машины в Azure Marketplace.


### <a name="change-region-availability-of-a-sku"></a>Изменение доступности номера SKU по регионам

Возможно, со временем вы захотите предоставлять свое предложение и номер SKU в большем числе регионов.  Также возможна ситуация, в которой потребуется прекратить поддержку предложения и номера SKU для конкретного региона.
Чтобы изменить доступность, сделайте следующее.

1.  Войдите на [Портал Cloud Partner](https://cloudpartner.azure.com/).

2.  В разделе **Все предложения** найдите предложение, которое нужно обновить.

3.  На вкладке **Номер SKU** щелкните номер SKU, для которого вы хотите изменить доступность.

4.  Щелкните кнопку **Выберите страны** под полем **Доступно в странах/регионах**.

5.  Во всплывающем окне доступности по регионам добавьте или удалите регионы для этого номера SKU.

6.  Щелкните **Опубликовать**, чтобы запустить рабочий процесс публикации для обновления информации о доступности номера SKU в регионах.

Когда номер SKU выводится в новый регион, вы можете выбрать политику ценообразования для этого региона с помощью функции **Export Pricing Data** (Экспорт данных о ценах). При добавлении региона, в котором предложение уже было доступным ранее, вы не сможете изменить для него цены. Никакие изменения цен не допускаются.


### <a name="add-a-new-sku"></a>Добавление нового номера SKU

Чтобы сделать новый SKU доступным в существующем предложении, выполните следующие действия. 

1.  Войдите на [Портал Cloud Partner](https://cloudpartner.azure.com/).

2.  В разделе **Все предложения** найдите предложение, которое нужно обновить.

3.  На вкладке **Номера SKU** щелкните **Добавить новый номер SKU** и введите во всплывающем окне **идентификатор номера SKU**.

4.  Выполните действия, описанные в статье о [публикации виртуальной машины в Azure Marketplace](./cpp-publish-offer.md).

5.  Щелкните **Опубликовать**, чтобы запустить рабочий процесс публикации нового номера SKU.


### <a name="update-offer-marketplace-metadata"></a>Обновление метаданных для предложения в Marketplace

Чтобы обновить связанные с предложением метаданные в Marketplace (имя компании, логотипы и т. п.), выполните следующие действия. 

1.  Войдите на [Портал Cloud Partner](https://cloudpartner.azure.com/).

2.  В разделе **Все предложения** найдите предложение, которое нужно обновить.

3.  Откройте вкладку **Marketplace** и выполните инструкции из статьи [о публикации виртуальной машины в Azure Marketplace](./cpp-publish-offer.md), чтобы внести изменения в метаданные.

4.  Щелкните **Опубликовать**, чтобы запустить рабочий процесс публикации изменений.


### <a name="update-pricing-on-published-offers"></a>Обновление цен на опубликованные предложения

После публикации предложения с оплатой по мере использования вы не можете напрямую увеличить цену на его номер SKU.  (Однако можно создать новый SKU с тем же предложением, удалить старый номер SKU, а затем повторно опубликовать предложение для новых клиентов.)  В отличие от этого, вы можете уменьшить цену опубликованного предложения, выполнив следующие действия:

1.  Войдите на [Портал Cloud Partner](https://cloudpartner.azure.com/).

2.  В разделе **Все предложения** найдите предложение, которое нужно обновить.

3.  Щелкните номер SKU, цену на который нужно уменьшить.

4.  Если вы установили все цены в графическом интерфейсе пользователя, их можно изменить непосредственно в интерфейсе. Если вы установили цены путем импорта или экспорта электронной таблицы, этот метод необходимо использовать и для снижения цены.

3.  Щелкните **Сохранить**.

4.  Щелкните **Опубликовать**, чтобы запустить рабочий процесс публикации изменений.

Новые сниженные цены будут отображаться всем новым клиентам с момента публикации.  Новая цена повлияет на клиентов следующим образом:

- с новых клиентов будет взиматься плата по новому тарифу; 
- Для существующих клиентов сниженная цена будет начисляться задним числом с начала периода выставления счетов, в течение которого произошло снижение.
Если клиентам уже выставлены счета за период, в течение которого произошло снижение, в следующем периоде выставления счетов им будет возмещена разница между старой и новой ценой.


<!-- TD: This has been implemented, need to change the SKU Tab topic to reflect and move this section there. -->
### <a name="simplified-currency-pricing"></a>Упрощенные цены в разных валютах

С 1 сентября 2018 г. на портале стал доступен новый раздел **Simplified Currency Pricing** (Упрощенные цены в разных валютах). Майкрософт стремится упростить бизнес Azure Marketplace, внедрив более предсказуемую модель ценообразования и получения оплаты от клиентов по всему миру. Это упрощение включает уменьшение количества валют, в которых клиентам выставляются счета.

В этом новом разделе будут указаны цены в валютах, входящих в новый перечень. После того как все клиенты будут перенесены на эти новые валюты сопоставления, будет снята первоначальная стоимость, и останется только раздел с ценами на упрощенную валюту.

Вы должны до 1 ноября 2018 г. установить новую цену для регионов, в которых меняется валюта сопоставления. Вы не сможете увеличить цену для регионов, в которых валюта расчетов не меняется.

> [!NOTE] 
> Если для публикации предложения вы используете API, в коде JSON с описанием предложения вы увидите новый раздел. Он будет отмечен как `virtualMachinePricingV2` или `monthlyPricingV2` в зависимости от типа предложения. 

Если у вас есть вопросы об этом изменении, обратитесь в [службу поддержки Azure Marketplace](../../support-azure-marketplace.md).


## <a name="compare-feature"></a>Функция сравнения

При внесении изменений в уже опубликованное предложение можно использовать функцию **Сравнить**, чтобы проверить внесенные изменения. Чтобы использовать эту функцию, сделайте следующее.

1.  В процессе редактирования предложения можно в любой момент нажать кнопку **Сравнить**.

    ![Кнопка функции сравнения](./media/publishvm_037.png)


2.  Вы увидите сравнительную таблицу маркетинговых ресурсов и метаданных, указанных в обеих версиях.


## <a name="history-of-publishing-actions"></a>Журнал действий, связанных с публикацией

Чтобы просмотреть журнал действий, связанных с публикацией, щелкните вкладку **Журнал** в области навигации слева на портале Cloud Partner. Здесь вы сможете просмотреть действия с метками времени, которые были выполнены за все время существования ваших предложений в Azure Marketplace.  
<!-- TD: Add after section authored: For more information, see [History page](../portal-tour/cpp-history-page.md). -->

