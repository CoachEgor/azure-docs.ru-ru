---
title: Настройка номеров SKU для предложения приложения Azure | Документация Майкрософт
description: Сведения о настройке номеров SKU для управляемого приложения Azure и шаблона решения Azure.
services: Azure, Marketplace, Cloud Partner Portal,
documentationcenter: ''
author: dan-wesley
manager: Patrick.Butler
editor: ''
ms.assetid: ''
ms.service: marketplace
ms.workload: ''
ms.tgt_pltfrm: ''
ms.devlang: ''
ms.topic: conceptual
ms.date: 12/06/2018
ms.author: pbutlerm
ms.openlocfilehash: 5d6ec0197699f603c79f414e015cdebcde6b9f60
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60745116"
---
# <a name="azure-application-skus-tab"></a>Вкладка номеров SKU для приложения Azure

В этой статье описывается создание номеров SKU для приложения Azure с помощью вкладки номеров SKU. 

> [!IMPORTANT]
> Шаги по настройке номера SKU будут разными для предложения управляемого приложения и предложения шаблона решения. В этой статье подробно описаны эти различия. 

## <a name="configure-azure-application-skus"></a>Настройка номеров SKU для приложения Azure

### <a name="create-a-new-sku"></a>Создание номера SKU

Чтобы создать номер SKU, сделайте следующее.

1. Выберите вкладку **Номера SKU**.
2. В разделе номеров SKU выберите **+ New SKU** (Новый номер SKU).

    ![Запрос нового номера SKU](./media/azureapp-plus-sku.png)

3. Во всплывающем окне New SKU (Новый номер SKU) введите **идентификатор SKU**. Идентификатор может содержать не более 50 символов: только строчные буквы, цифры, дефисы и символы подчеркивания. Идентификатор SKU не может заканчиваться дефисом.
4. Идентификатор SKU будет виден клиентам в URL-адресах продукта, шаблонах Resource Manager (если применимо) и отчетах о выставлении счетов. Этот идентификатор невозможно изменить после публикации предложения.

### <a name="sku-details-for-a-solution-template"></a>Сведения о номере SKU для шаблона решения

Укажите следующие параметры номера SKU.

- **Заголовок** — заголовок для номера SKU. Это значение отображается для соответствующего элемента в коллекции.
- **Сводка** — краткое сводное описание номера SKU. (Максимальная длина составляет 100 символов.)
- **Описание** — подробное описание номера SKU.
- **SKU Type** (Тип SKU) — раскрывающийся список со следующими значениями: Solution Template (Шаблон решения) и Managed Application (Управляемое приложение). Для нашего примера выберите **Шаблон решения**.
- **Cloud Availability** (Доступность в облаке) — расположение номера SKU. По умолчанию используется **общедоступное облако Azure**.
Виртуальная машина с расположением "Общедоступная служба Azure" будет доступна для развертывания клиентам во всех общедоступных регионах Azure, интегрированных с Marketplace.
- Виртуальную машину с расположением **Azure Government Cloud** (Облако Azure для государственных организаций) можно развернуть в облаке Azure для государственных организаций. Корпорация Майкрософт рекомендует издателям протестировать решение и убедиться, что оно работает правильно, прежде чем публиковать его в [облаке Azure для государственных организаций](https://docs.microsoft.com/azure/azure-government/documentation-government-manage-marketplace-partners). Для промежуточного хранения и тестирования отправьте запрос на [пробную учетную запись](https://azure.microsoft.com/offers/ms-azr-usgov-0044p/).

  >[!NOTE] 
  >Microsoft Azure для государственных организаций — это облако сообщества государственных организаций с контролируемым доступом для клиентов из федеральных, государственных, местных или общинных органов США, а также обслуживающих их партнеров.

- **Is this a Private SKU?** (Это частный номер SKU?) Выберите "Да", если номер SKU будет доступен для выбора только ограниченной группе клиентов.

    ![Форма сведений о номере SKU для шаблона решения](./media/azureapp-sku-details-solutiontemplate.png)

### <a name="sku-details-for-managed-application"></a>Сведения о номере SKU для управляемого приложения

На следующем снимке экрана представлена форма сведений о номере SKU для управляемого приложения.

   ![Форма сведений о номере SKU для управляемого приложения](./media/azureapp-sku-details-managedapplication.png)

Настройте следующие параметры номера SKU.

- **Заголовок** — заголовок для номера SKU. Это значение отображается для соответствующего элемента в коллекции.
- **Сводка** — краткое сводное описание номера SKU. (Максимальная длина составляет 100 символов.)
- **Описание** — подробное описание номера SKU.
- **SKU Type** (Тип SKU) — раскрывающийся список со следующими значениями: Solution Template (Шаблон решения) и Managed Application (Управляемое приложение). В нашем примере выберите **Managed Application** (Управляемое приложение).
- **Cloud Availability** (Доступность в облаке) — расположение номера SKU. По умолчанию используется **общедоступное облако Azure**.
- Виртуальная машина с расположением **Общедоступная служба Azure** будет доступна для развертывания клиентам во всех общедоступных регионах Azure, интегрированных с Marketplace.
- Виртуальную машину с расположением **Azure Government Cloud** (Облако Azure для государственных организаций) можно развернуть в облаке Azure для государственных организаций. Корпорация Майкрософт рекомендует издателям протестировать решение и убедиться, что оно работает правильно, прежде чем публиковать его в [облаке Azure для государственных организаций](https://docs.microsoft.com/azure/azure-government/documentation-government-manage-marketplace-partners). Для промежуточного хранения и тестирования отправьте запрос на [пробную учетную запись](https://azure.microsoft.com/offers/ms-azr-usgov-0044p/).

  >[!NOTE] 
  >Microsoft Azure для государственных организаций — это облако сообщества государственных организаций с контролируемым доступом для клиентов из федеральных, государственных, местных или общинных органов США, а также обслуживающих их партнеров.

- **Is this a Private SKU?** (Это частный номер SKU?) Выберите "Да", если номер SKU будет доступен для выбора только ограниченной группе клиентов.
- **Country/Region availability** (Доступность по странам и регионам). Щелкните **Выбрать регионы**, чтобы просмотреть список доступных стран и регионов. Установите флажки возле всех нужных стран или регионов, а затем щелкните **ОК**, чтобы сохранить выбранные значения. 

   ![Список доступности по странам и регионам](./media/azure-app-select-country-region.png)

- **Old Pricing** (Старая цена). Введите цену номера SKU в долларах США в месяц. После завершения настройки цены устанавливаются в местной валюте по текущему курсу. Эти параметры вы определяете самостоятельно, поэтому мы рекомендуем проверить их. Чтобы задать или просмотреть отдельно цену для страны или региона, экспортируйте электронную таблицу цен и затем импортируйте ее с измененными ценами.

  >[!NOTE]
  >Сохраните изменения в ценах, чтобы включить возможность экспорта и импорта данных о ценах.

- **Simplified Currency Pricing** (Упрощенные цены в разных валютах). Введите цену номера SKU в долларах США в месяц. Эта цена должна совпадать со значением в поле Old Pricing (Старая цена). Дополнительные сведения см. в разделе [Упрощенные цены в разных валютах](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal-orig/cloud-partner-portal-update-existing-offer).

### <a name="package-details-for-solution-template"></a>Сведения о пакете для шаблона решения

Укажите следующие сведения о пакете.

- **Версия**. Версия отправляемого пакета. Теги версий должны иметь формат X.Y.Z, где X, Y и Z обозначают целые числа.
- **Package file (.zip)** (Файл пакета (.zip)). Пакет состоит из следующих файлов, которые собраны в единый ZIP-файл.
  - MainTemplate.json — файл шаблона развертывания, который используется для развертывания решения или приложения и создания ресурсов, определенных для этого решения. Дополнительные сведения см. в статье [Краткое руководство по созданию и развертыванию шаблонов Azure Resource Manager с помощью портала Azure](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-create-first-template).
  - createUIDefinition.json — этот файл используется порталом Azure, чтобы создать пользовательский интерфейс для подготовки решения или приложения. Дополнительные сведения см. в статье [Создание пользовательского интерфейса портала Azure для управляемого приложения](https://docs.microsoft.com/azure/azure-resource-manager/managed-application-createuidefinition-overview).

  >[!IMPORTANT] 
  >Этот пакет должен содержать все вложенные шаблоны или скрипты, которые потребуются для подготовки этого приложения к работе. Файлы mainTemplate.json и createUIDefinition.json следует поместить в корневую папку.

   ![Сведения о пакете для шаблона решения](./media/azureapp-sku-pkgdetails-solutiontemplate.png)

### <a name="package-details-for-managed-application"></a>Сведения о пакете для управляемого приложения

Укажите следующие сведения о пакете.

- **Версия**. Версия отправляемого пакета. Теги версий должны иметь формат X.Y.Z, где X, Y и Z обозначают целые числа.
- **Package file (.zip)** (Файл пакета (.zip)). Пакет состоит из следующих файлов, которые собраны в единый ZIP-файл.
  - applianceMainTemplate.json — файл шаблона развертывания, который используется для развертывания решения или приложения и создания определенных ресурсов. Дополнительные сведения см. в [кратком руководстве по созданию и развертыванию шаблонов Azure Resource Manager с помощью портала Azure](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-quickstart-create-templates-use-the-portal). 
  - appliancecreateUIDefinition.json. С помощью этого файла портал Azure создает пользовательский интерфейс для подготовки решения или приложения. Дополнительные сведения см. в статье [Создание пользовательского интерфейса портала Azure для управляемого приложения](https://docs.microsoft.com/azure/azure-resource-manager/managed-application-createuidefinition-overview).
  - mainTemplate.json. Это файл шаблона, который содержит только ресурс Microsoft.Solution/appliances. Дополнительные сведения см. в статье [Описание структуры и синтаксиса шаблонов Azure Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates). <br>
Обратите внимание на следующие ключевые свойства этого ресурса:
    - Свойство kind должно иметь значение Marketplace, если приложение управляется через Marketplace.
    - Свойство ManagedResourceGroupId указывает группу ресурсов в подписке клиента, где будут развернуты все ресурсы, определенные в файле applianceMainTemplate.json.
    - Свойство PublisherPackageId содержит строку, которая уникальным образом идентифицирует пакет. Это значение формируется объединением значений [идентификатор_издателя].[идентификатор_предложения]-preview[идентификатор_номера_SKU].[версия_пакета].

  >[!IMPORTANT] 
  >Этот пакет должен содержать все вложенные шаблоны или скрипты, которые потребуются для подготовки этого приложения к работе. В корневой папке следует разместить следующие файлы:  MainTemplate.json, applianceMainTemplate.json и applianceCreateUIDefinition.json.

- **Идентификатор клиента**. Идентификатор арендатора Azure Active Directory в вашей организации.
- **Enable JIT Access?** (Включить JIT-доступ?) Выберите **Да**, чтобы включить JIT-доступ к управлению для клиентских развертываний, которые используют это предложение.

  >[!NOTE] 
  >Если JIT-доступ включен, обновите файл CreateUiDefinition.json для поддержки JIT-доступа.

   ![Сведения о пакете для управляемого приложения](./media/azureapp-sku-pkgdetails-managedapplication.png)

Для управляемого приложения следует настроить параметры политики и авторизации.

#### <a name="authorization"></a>Авторизация

Добавьте идентификатор AAD пользователя, группы или приложения, которым вы намерены предоставить доступ к управляемой группе ресурсов. Предоставляемое разрешение определяется идентификатором определения роли. Это может быть владельца, участника или пользовательскую роль.

#### <a name="policy-settings"></a>Параметры политики

Добавьте политики, которым соответствует управляемое приложение. Дополнительные сведения о политиках для ресурсов Azure см. в статье [Что такое служба "Политика Azure"?](../../../governance/policy/overview.md)


   ![Параметры политики и авторизации для управляемого приложения](./media/azureapp-sku-details-managedapp-auth-policy.png)

**Создание новой авторизации.**

1. В разделе **Авторизация** выберите **+ New Authorization** (+ Новая авторизация).
2. В поле **Идентификатор субъекта** введите идентификатор AAD пользователя, группы или приложения, которым вы намерены предоставить доступ к управляемой группе ресурсов. Предоставляемое разрешение указывается в определении роли.
3. В поле **Определение роли** выберите один из следующих вариантов в раскрывающемся списке:  "Владелец" или "Участник". Дополнительные сведения см. в статье [Встроенные роли для ресурсов Azure](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles).

>[!NOTE] 
>Можно добавить несколько авторизаций. Но мы рекомендуем создать группу пользователей Active Directory и указать ее идентификатор в свойстве PrincipalId. Это позволит добавлять больше пользователей в группу без необходимости обновления SKU.

**Чтобы создать политику, сделайте следующее**.

1. В разделе **Параметры политики** выберите **+ Новая политика**.
2. Введите имя новой политики в поле **Имя политики**. Длина этого имена не должна превышать 50 символов.
3. В поле **Политики** выберите один из вариантов в раскрывающемся списке. Выберите политику, которую требует включить поставщик данных для приложения, использующего данные. Дополнительные сведения см. в статье [Примеры для Политики Azure](https://docs.microsoft.com/azure/governance/policy/samples/index).

    ![Параметры политики для управляемого приложения](./media/azureapp-sku-policy-settings.png)

4. В поле **Policy SKU** (Номер SKU политики) выберите тип номера SKU "Бесплатный" или "Стандартный". Для политик аудита допускается только номер SKU "Стандартный".

## <a name="next-steps"></a>Дальнейшие действия

[Вкладка Marketplace](./cpp-marketplace-tab.md)
