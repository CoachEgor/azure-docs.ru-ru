---
title: Таблица Azure | Azure Marketplace
description: Настройте управление интересами для Хранилища таблиц Azure.
services: Azure, Marketplace, Cloud Partner Portal,
author: v-miclar
ms.service: marketplace
ms.topic: conceptual
ms.date: 05/22/2019
ms.author: pabutler
ms.openlocfilehash: 08f9d794822dfd7879efc7c4813ecc46f92f6a45
ms.sourcegitcommit: 72f1d1210980d2f75e490f879521bc73d76a17e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/14/2019
ms.locfileid: "67147897"
---
# <a name="lead-management-instructions-for-azure-table"></a>Инструкции по управлению для таблиц Azure интересами

В этой статье описывается, как настроить Хранилище таблиц Azure для хранения информации о потенциальных клиентах. Хранилище таблиц Azure позволяет сохранять и настраивать информацию о клиентах.


## <a name="how-to-configure-azure-table"></a>Настройка таблиц Azure

1. Если у вас нет учетной записи Azure, вы можете [создать бесплатную пробную учетную запись](https://azure.microsoft.com/pricing/free-trial/).
2. После активации учетной записи Azure, войдите в [портала Azure](https://portal.azure.com).
3. На портале Azure создайте учетную запись хранения, выполнив указанные ниже действия.  
    1. Выберите **+ создать ресурс** в строке меню слева.  **New** справа появится область (колонке).
    2. Выберите **хранения** в **New** области.  Объект **основной** список отображается справа.
    3. Выберите **учетной записи хранения** начинается создание учетной записи.  Следуйте инструкциям в статье [создать учетную запись хранилища](https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account?tabs=azure-portal).

    ![Шаги по созданию учетной записи хранения Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/azurestoragecreate.png)

    Дополнительные сведения об учетных записях хранения, выберите [кратком руководстве](https://docs.microsoft.com/azure/storage/).  Дополнительные сведения о ценах на службу хранилища см. на странице [Обзор цен на хранилище Azure](https://azure.microsoft.com/pricing/details/storage/).

4. Подождите, пока подготавливается вашей учетной записи хранения, процесс, который обычно занимает несколько минут.  Затем получить доступ к вашей учетной записи хранения из **Главная** страницы портала Azure, выбрав **просмотреть все свои ресурсы** или выбрав **все ресурсы** в левой области навигации строки меню на портале Azure.

    ![Доступ к учетной записи хранилища Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/azure-storage-access.png)

5. На панели учетной записи хранилища, скопируйте строку подключения учетной записи хранения для ключа и вставьте его в **строка подключения учетной записи** на облачном портале для партнеров. Ниже приведен пример строки подключения.

```sql
DefaultEndpointsProtocol=https;AccountName=myAccountName;AccountKey=myAccountKey;EndpointSuffix=core.windows.net
```

  ![Ключ к хранилищу Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/azurestoragekeys.png)

Можно использовать [обозревателя службы хранилища Azure](https://azurestorageexplorer.codeplex.com/) или других аналогичных средств, чтобы просмотреть данные в таблице хранилища. Можно также экспортировать данные из таблицы Azure.


## <a name="use-microsoft-flow-with-an-azure-table-optional"></a>Использовать Microsoft Flow с таблицей Azure (*необязательно*) 

[Microsoft Flow](https://docs.microsoft.com/flow/) можно использовать для автоматизации уведомления при каждом добавлении потенциального клиента в таблицу Azure. Если у вас нет учетной записи, вы можете [зарегистрироваться для получения бесплатной учетной записи](https://flow.microsoft.com/).


### <a name="lead-notification-example"></a>Пример уведомления о потенциальном клиенте

Этот пример можно используйте как руководство для создания несложную последовательность, которая автоматически отправляет уведомление по электронной почте при добавлении нового интереса в таблице Azure. В нем показано, как настроить повторение для отправки сведений о потенциальном клиенте каждый час при обновлении хранилища таблиц.

1. Войдите в учетную запись Microsoft Flow.
2. На панели навигации слева выберите **Мои потоки**.
3. На панели навигации сверху выберите **+ Создать**.  
4. В раскрывающемся списке выберите **+ Создать с нуля**.
5. В разделе "Создать поток с нуля" выберите **Создать с нуля**.

   ![Создание нового потока с нуля](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-create-from-blank.png)

6. На странице поиска соединителей и триггеров выберите **Триггеры**.
7. В разделе **Триггеры**выберите **Повторение**.
8. В окне **Повторение** оставьте значение по умолчанию 1 в поле **Интервал**. Из раскрывающегося списка **Частота** выберите **Час**.

   >[!NOTE] 
   >Хотя в этом примере используется часовой интервал, вы можете выбрать оптимальный интервал и частоту в соответствии со своими деловыми потребностями.

   ![Задайте частоту 1 час для повторения](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-recurrence-dropdown.png)

9. Выберите **+ Новый шаг**.
10. Введите в поле поиска "Получение времени в прошлом", а затем выберите **Получение времени в прошлом** в области "Действия". 

    ![Поиск и выбор действия "Получение времени в прошлом"](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-search-getpasttime.png)

11. В окне **Получение времени в прошлом** в поле **Интервал** укажите 1.  Из раскрывающегося списка **Единица времени** выберите **Час**.
    >[!IMPORTANT] 
    >Убедитесь, что этот интервал и единица времени соответствуют интервалу и частоте, настроенным для повторения.

    ![Настройка интервала в разделе "Получение времени в прошлом"](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getpast-time.png)

    >[!TIP] 
    >Чтобы убедиться в правильности каждого шага, можно в любое время проверить поток. Чтобы проверить ваш поток, выберите **Средство проверки потоков**  в строке меню Flow.

В следующих инструкциях описывается, как установить подключение к таблице Azure и настроить логику обработки новых потенциальных клиентов.

1. После выполнения этапа "Получение времени в прошлом" выберите **+ Новый шаг** и введите в поле поиска "Получить сущности".
2. В разделе **Действия** выберите **Получить записи**, а затем выберите **Показать расширенные параметры**.
3. В окне **Получить записи** укажите сведения для следующих полей:

   - **Таблица** — введите имя хранилища таблиц Azure. На следующем снимке экрана показан запрос, который отображается при вводе "MarketPlaceLeads" для этого примера. 

     ![Выбор пользовательского значения для имени таблицы Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getentities-table-name.png)

   - **Запрос фильтра** — щелкните это поле и **получение времени в прошлом** во всплывающем окне отображается значок. Выберите **Время в прошлом**, чтобы использовать эту метку времени для фильтрации запроса. Кроме того можно вставить следующую функцию в поле: CreatedTime `Timestamp gt datetime'@{body('Get_past_time')}'` 

     ![Настройка функции запроса фильтра](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getentities-filterquery.png)

4. Выберите **Новый шаг**, чтобы добавить условие поиска в таблице Azure для новых потенциальных клиентов.

   ![Использование нового шага для добавления условия поиска в таблице Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-add-filterquery-new-step.png)

5. В окне **Выберите действие** выберите **Действия**, а затем — элемент управления **Условие**.

     ![Добавление элемента управления "Условие"](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-action-condition-control.png)

6. В окне **Условие** перейдите в поле **Выберите значение**, а затем выберите **Выражение** во всплывающем окне.
7. Вставьте `length(body('Get_entities')?['value'])` в поле ***fx***. Нажмите **ОК** для добавления этой функции. Чтобы завершить настройку условия:

   - Из раскрывающегося списка выберите "больше".
   - Введите 0 в качестве значения. 

     ![Добавление функции в условие](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-condition-fx0.png)

8. Задайте действие, которое будет выполняться в зависимости от значения условия.

     ![Настройка действия в зависимости от значения условия](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-condition-pick-action.png)

9. Если условие возвращает **Если "нет"** , ничего не происходит. 
10. Если условие возвращает **Если "да"** , активируется действие подключения к учетной записи Office 365 для отправки сообщения электронной почты. Выберите **Добавить действие**.
11. Выберите **Отправить электронное письмо**. 
12. В окне **Отправить электронное письмо** укажите сведения для следующих полей:

    - **Кому** — введите адреса электронной почты всех пользователей, которые должны получить это уведомление.
    - **Тема** — укажите тему электронного письма. Пример: Новые потенциальные клиенты!
    - **Текст**:   Введите текст каждого письма (необязательно), а затем вставьте в текст сообщения `body('Get_entities')?['value']` в качестве функции для добавления информации о потенциальном клиенте.

      >[!NOTE] 
      >В текст сообщения можно вставить дополнительные статические или динамические точки данных.

      ![Настройка электронной почты для уведомления о потенциальных клиентах](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-emailbody-fx.png)

13. Выберите **Сохранить**, чтобы сохранить поток. Microsoft Flow автоматически проверит поток на наличие ошибок. Если они отсутствуют, поток запустится после его сохранения.

На следующем снимке экрана показан пример того, как в итоге должен выглядеть поток.

[![Последовательность окончательный потока](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-end-to-end-thmb.png)](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-end-to-end.png)

(*Щелкните изображение, чтобы увеличить.* )


### <a name="manage-your-flow"></a>Контролируйте свой поток

После запуска потока вы можете им легко управлять.  Вы его полностью контролируете. Например, вы можете его остановить или изменить, просмотреть журнал его выполнения и получить аналитику. На следующем снимке экрана показаны доступные параметры для управления потоком. 

 ![Управление потоком](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-manage-completed.png)

Поток продолжает выполняться, пока вы не остановите его с помощью параметра **Отключить поток**.

Если вы не получаете по электронной почте уведомления о новых потенциальных клиентах, значит они не добавлены в таблицу Azure. При возникновении ошибок в потоке вы получите сообщение электронной почты, аналогичное показанному на следующем снимке экрана.

 ![Уведомление по электронной почте о сбое потока](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-failure-note.png)


## <a name="next-steps"></a>Дальнейшие действия

[Настройка получения сведений о потенциальных клиентах](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal-orig/cloud-partner-portal-get-customer-leads)
