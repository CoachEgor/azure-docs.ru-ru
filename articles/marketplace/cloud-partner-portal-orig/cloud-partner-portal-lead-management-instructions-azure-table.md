---
title: Хранилище таблицы Azure Лазурный рынок
description: Настройка управления свинцом в хранилище таблиц Ызуротации.
author: dsindona
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 05/22/2019
ms.author: dsindona
ms.openlocfilehash: cee28c65b97d4ac163f78b746dc7be9ee210843c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80280360"
---
# <a name="lead-management-instructions-for-table-storage"></a>Инструкции по управлению свинцом для хранения таблиц

В этой статье описывается, как настроить хранилище таблицы Azure для управления интересами продаж. Хранение таблиц помогает хранить и изменять информацию о клиентах.

## <a name="configure-table-storage"></a>Настройка табличного хранилища

1. Если у вас нет учетной записи Azure, [создайте бесплатную пробную учетную запись.](https://azure.microsoft.com/pricing/free-trial/)
1. После того, как ваша учетная запись активна, вопийте на [порталAz.](https://portal.azure.com)
1. На портале Azure выполните следующие действия:  
    1. Выберите **ресурс «Создайте ресурс** в стеле на левой стороне». **Откроется новая** панель.
    1. В **новой** панели выберите **Хранилище**. **Рекомендуемый** список откроется с правой стороны.
    1. Выберите **учетную запись хранения.** Затем следуйте инструкциям по [созданию учетной записи хранилища.](https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account?tabs=azure-portal)

    ![Создание учетной записи хранения Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/azurestoragecreate.png)

    Для получения более подробной [информации](https://docs.microsoft.com/azure/storage/)о учетных записях для хранения данных см. Для получения информации о ценах на [хранение](https://azure.microsoft.com/pricing/details/storage/)см.

1. Подождите, пока будет подготовлена учетная запись хранилища, что обычно занимает несколько минут. Затем получите доступ к учетной записи с главной страницы портала Azure: Выберите **Увидеть все свои ресурсы** или **все ресурсы** в навигационном стене.

    ![Доступ к учетной записи хранения Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/azure-storage-access.png)

1. Из панели учетной записи хранилища скопируйте строку подключения учетной записи хранилища для ключа. Вставьте его в поле **Connection String** для учетной записи хранилища в облачном портале партнеров.

    Пример строки соединения:

    ```sql
    DefaultEndpointsProtocol=https;AccountName=myAccountName;AccountKey=myAccountKey;EndpointSuffix=core.windows.net
    ```

      ![Ключ к хранилищу Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/azurestoragekeys.png)

Для просмотра данных в таблице можно использовать [Azure Storage Explorer](https://azurestorageexplorer.codeplex.com/) или аналогичный инструмент. Вы также можете экспортировать данные из него.

## <a name="use-microsoft-flow-with-table-storage-optional"></a>Используйте Microsoft Flow с хранилищем таблицы *(необязательно)*

Вы можете использовать [Microsoft Flow](https://docs.microsoft.com/flow/) для автоматической отправки уведомлений при добавлении свинец в хранилище таблиц. Если у вас нет учетной записи Microsoft Flow, [зарегистрируйтесь на бесплатную учетную запись.](https://flow.microsoft.com/)

### <a name="lead-notification-example"></a>Пример уведомления о потенциальном клиенте

Этот пример показывает, как создать основной поток. Поток автоматически отправляет уведомление по электронной почте ежечасно при добавлении новых версий в хранилище таблиц.

1. Войдите в учетную запись Microsoft Flow.
1. В навигационном стежке на левой стороне выберите **Мои потоки.**
1. В верхней панели навигации выберите **«Новый**.  
1. Из списка выпадающих вниз, выберите **"Создать из пустой**.
1. Под **Создать поток из пустой,** выберите Создать из **пустой**.

   ![Создание нового потока с нуля](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-create-from-blank.png)

1. На странице поиска соединителей и триггеров выберите **Триггеры**.
1. В разделе **Триггеры**выберите **Повторение**.
1. В окне **повторения** сохраните настройку по умолчанию **1** для **Interval.** Из списка выпадающих **частот** выберите **Час.**

   >[!NOTE] 
   >В этом примере используется часовой интервал. Но вы можете выбрать интервал и частоту, которая наилучшим образом соответствует вашим потребностям бизнеса.

   ![Установите 1-часовую частоту для повторения](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-recurrence-dropdown.png)

1. Выберите **«Новый шаг**».
1. Поиск **Получить прошлое время,** а затем выбрать **Получить прошлое время** под **Выберите действие**.

    ![Найти и выбрать действие "получить прошлое время"](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-search-getpasttime.png)

1. В **пройденое** окно времени установите **Интервал** до **1**.  Из списка выпадающих единиц **Time** выберите **Час**.
    >[!IMPORTANT] 
    >Убедитесь, что **интервал** и **блок времени** соответствуют интервалу и частоте, настроенной для повторения (шаг 8).

    ![Установите пройдение интервала времени](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getpast-time.png)

    >[!TIP] 
    >Вы можете проверить свой поток в любое время, чтобы убедиться, что каждый шаг настроен правильно: Выберите **проверку потока** из панели меню Потока.

В следующем наборе шагов вы подключаетесь к таблице хранения данных и настраиваете логику обработки для обработки новых интересов.

1. После шага **Get past time** выберите **«Новый шаг»,** а затем ищите **объекты Get.**
1. В разделе **Действия** выберите **Получить записи**, а затем выберите **Показать расширенные параметры**.
1. В окне **Получения сущностей** заполните следующие поля:

   - **Таблица**: название хранилища таблицы. Следующее изображение показывает " MarketPlaceLeads" вошел:

     ![Выбор пользовательского значения для имени таблицы Azure](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getentities-table-name.png)

   - **Фильтр запрос :** При выборе этого поля, **Значок Времени Получения отображается** в всплывающем окне. Выберите **прошлое время,** чтобы использовать это значение в качестве метки времени для фильтрации запроса. Или, вы можете вставить следующую функцию в поле:
   
      `CreatedTime Timestamp gt datetime'@{body('Get_past_time')}'` 

     ![Настройка функции запроса фильтра](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-getentities-filterquery.png)

1. Выберите **новый шаг,** чтобы добавить условие для сканирования хранилища таблицы для новых интересов.

   ![Используйте "Новый шаг", чтобы добавить условие для сканирования хранения таблицы](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-add-filterquery-new-step.png)

1. В окне **действия выберите** **«Действия»,** а затем выберите **элемент управления состоянием.**

     ![Добавление элемента управления состоянием](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-action-condition-control.png)

1. В окне **условия** **выберите значение,** а затем выберите **Выражение** в всплывающем окне.
1. Вставить `length(body('Get_entities')?['value'])` в поле ***FX.*** Нажмите **ОК** для добавления этой функции. 



     ![Добавление функции в условие](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-condition-fx0.png)

1. Задайте действие, которое будет выполняться в зависимости от значения условия.

    1. Выберите **больше, чем** из списка выпадающих.
   1. Введите **0** в качестве значения.

     ![Настройка действия на основе результатов состояния](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-condition-pick-action.png)

1. Если условие решается на "Если нет", ничего не делайте.

    Если условие решается на "Если да", запустите действие, которое соединяет ваш офис 365 учетной записи для отправки электронной почты:
   1. Выберите **Добавить действие.**
   1. Выберите **Отправить электронное письмо**.
   1. В окне **отправки электронной почты** введите информацию в следующих полях:

      - **Для:** адрес электронной почты для всех, кто получит уведомление.
      - **Тема**: тема для электронной почты. Например: *Новые зацепки!*
      - **Тело**: текст, который вы хотите включить в каждое письмо (необязательно). Кроме того, `body('Get_entities')?['value']` вставить в качестве функции для вставки свинца информации.

        >[!NOTE] 
        >Вы можете вставить дополнительные статические или динамические точки данных в тело электронной почты.

      ![Настройка электронной почты для уведомления о потенциальных клиентах](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-emailbody-fx.png)

1. Выберите **Сохранить**, чтобы сохранить поток. Microsoft Flow автоматически протестирует его на количество ошибок. Если ошибок нет, поток начинает работать после его сохранения.

    Следующее изображение показывает пример того, как должен выглядеть конечный поток.

    [![Итоговая последовательность потока](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-end-to-end-thmb.png)](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-end-to-end.png)

    (*Выберите изображение, чтобы увеличить его.*)

### <a name="manage-your-flow"></a>Управление потоком

Легко управлять потоком после его запуска. Вы его полностью контролируете. Например, вы можете его остановить или изменить, просмотреть журнал его выполнения и получить аналитику. На следующем изображении отображаются параметры управления потоком.

 ![Варианты управления потоками](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-manage-completed.png)

Поток продолжает работать до тех пор, пока вы не выберете **отключение потока Turn.**

Если вы не получаете никаких уведомлений по электронной почте, в хранилище таблицы не было добавлено новых версий.
Вы получите электронное письмо, как следующий пример, если происходит сбой потока:

 ![Уведомление по электронной почте о сбое потока](./media/cloud-partner-portal-lead-management-instructions-azure-table/msflow-failure-note.png)

## <a name="next-steps"></a>Дальнейшие действия

[Настройка клиентов-клиентов](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal-orig/cloud-partner-portal-get-customer-leads)
