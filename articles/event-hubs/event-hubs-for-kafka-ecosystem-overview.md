---
title: Использование концентратора событий из приложения Apache Kafka — Центры событий Azure | Документация Майкрософт
description: В этой статье содержатся сведения о поддержке Apache Kafka в службе "Центры событий Azure".
services: event-hubs
documentationcenter: .net
author: ShubhaVijayasarathy
manager: timlt
ms.service: event-hubs
ms.topic: article
ms.custom: seodec18
ms.date: 02/12/2020
ms.author: shvija
ms.openlocfilehash: fc81226e754178ad0edfff96a494dd7522662261
ms.sourcegitcommit: 509b39e73b5cbf670c8d231b4af1e6cfafa82e5a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2020
ms.locfileid: "78395441"
---
# <a name="use-azure-event-hubs-from-apache-kafka-applications"></a>Использование Центров событий Azure из приложений Apache Kafka
Центры событий предоставляют конечную точку Kafka, которую существующие приложения на основе Kafka могут использовать в качестве альтернативы запуска собственного кластера Kafka. Центры событий поддерживают [Apache Kafka 1.0](https://kafka.apache.org/documentation/) и более новые версии протокола и работают с имеющимися приложениями Kafka, в том числе с MirrorMaker.  

## <a name="what-does-event-hubs-for-kafka-provide"></a>Возможности, предоставленные Центрами событий для Kafka

Центры событий для компонента Kafka предоставляют заголовок протокола на основе концентраторов событий Azure, который совместим по двоичным файлам с Kafka 1.0 и более поздними версиями, для чтения из разделов Kafka и записи в них. Вы можете начать использовать конечную точку Kafka из своих приложений без изменения кода, но с минимальным изменением конфигурации. Чтобы указать конечную точку Kafka, предоставленную концентратором событий, вместо указания кластера Kafka можно обновить строку подключения в конфигурации. Затем вы можете начать потоковую передачу событий из приложений, использующих в Центрах событий протокол Kafka. При такой интеграции также поддерживаются такие платформы, как [Kafka Connect](https://github.com/Azure/azure-event-hubs-for-kafka/tree/master/tutorials/connect), которая сейчас доступна в предварительной версии. 

Концептуально Kafka и концентраторы событий практически идентичны: они являются секционированными журналами, созданными для потоковой передачи данных. В следующей таблице показано составление понятий Kafka и Центров событий.

### <a name="kafka-and-event-hub-conceptual-mapping"></a>Сопоставление понятий Kafka и концентратора событий

| Понятия Kafka | Понятия Центров событий|
| --- | --- |
| Кластер | Пространство имен |
| Раздел | Концентратор событий |
| Секция | Секция|
| Группа потребителей | Группа потребителей |
| Offset | Offset|

### <a name="key-differences-between-kafka-and-event-hubs"></a>Основные различия между Kafka и Центрами событий

Несмотря на то, что [Apache Kafka](https://kafka.apache.org/) — это программное обеспечение, которое можно использовать в любом месте, Центры событий представляют собой облачную службу, схожую с хранилищем BLOB-объектов Azure. Вам не нужно управлять серверами или сетями и настраивать брокеры — эти компоненты просто отсутствуют. Вы создаете пространство имен, которое является полным доменным именем, содержащим разделы, а затем в этом пространстве имен создаете концентраторы событий или разделы. Дополнительные сведения о Центрах событий и пространствах имен см. в статье [Особенности Центров событий](event-hubs-features.md#namespace). В качестве облачной службы концентраторы событий используют один стабильный виртуальный IP-адрес в качестве конечной точки, поэтому клиентам не нужно знать о брокерах или компьютерах в кластере. 

Масштаб в Центрах событий контролируется количеством приобретаемых единиц пропускной способности, где каждая такая единица предоставляет 1 МБ в секунду или 1000 событий в секунду входящих данных. По умолчанию Центры событий масштабируют единицы пропускной способности по достижении предела, используя функцию [автоматического расширения](event-hubs-auto-inflate.md). Эта функция также работает с концентраторами событий для компонента Kafka. 

### <a name="security-and-authentication"></a>Безопасность и проверка подлинности
Каждый раз при публикации или использовании событий из концентраторов событий для Kafka клиент пытается получить доступ к ресурсам концентраторов событий. Необходимо обеспечить доступ к ресурсам с помощью полномочной сущности. При использовании протокола Apache Kafka с клиентами можно настроить конфигурацию для проверки подлинности и шифрования с помощью механизмов SASL. При использовании концентраторов событий для Kafka требуется TLS-шифрование (так как все данные, передаваемые с концентраторами событий, шифруются с помощью TLS). Это можно сделать, указав параметр SASL_SSL в файле конфигурации. 

Концентраторы событий Azure предоставляют несколько вариантов авторизации доступа к защищенным ресурсам. 

- OAuth
- Подписанный URL-адрес (SAS)

#### <a name="oauth"></a>OAuth
Концентраторы событий интегрируются с Azure Active Directory (Azure AD), который предоставляет сервер централизованной авторизации, совместимый с **OAuth** 2,0. С помощью Azure AD можно использовать управление доступом на основе ролей (RBAC), чтобы предоставить точные разрешения для удостоверений клиентов. Эту функцию можно использовать с клиентами Kafka, указав **SASL_SSL** для протокола и **оаусбеарер** для механизма. Дополнительные сведения о ролях и уровнях RBAC для доступа к области см. [в статье авторизация доступа с помощью Azure AD](authorize-access-azure-active-directory.md).

```xml
bootstrap.servers=NAMESPACENAME.servicebus.windows.net:9093
security.protocol=SASL_SSL
sasl.mechanism=OAUTHBEARER
sasl.jaas.config=org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule required;
sasl.login.callback.handler.class=CustomAuthenticateCallbackHandler;
```

#### <a name="shared-access-signature-sas"></a>Подписанный URL-адрес
Концентраторы событий также предоставляют **подписанные URL-адрес (SAS)** для делегированного доступа к концентраторам событий для ресурсов Kafka. Авторизация доступа с помощью механизма на основе токенов OAuth 2,0 обеспечивает более высокую безопасность и простоту использования SAS. Встроенные роли также могут устранить необходимость авторизации на основе ACL, которая должна поддерживаться и управляться пользователем. Эту функцию можно использовать с клиентами Kafka, указав для него **SASL_SSL** протокола и **простой** для механизма. 

```xml
bootstrap.servers=NAMESPACENAME.servicebus.windows.net:9093
security.protocol=SASL_SSL
sasl.mechanism=PLAIN
sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username="$ConnectionString" password="{YOUR.EVENTHUBS.CONNECTION.STRING}";
```

#### <a name="samples"></a>Примеры 
Пошаговые инструкции по созданию концентратора событий Kafka Enabled и доступу к нему с помощью SAS или OAuth см **. в статье** [Краткое руководство. потоковая передача данных с концентраторами событий с помощью протокола Kafka](event-hubs-quickstart-kafka-enabled-event-hubs.md).

Дополнительные **примеры** , демонстрирующие использование OAuth с концентраторами событий для Kafka, см. [в статье примеры на сайте GitHub](https://github.com/Azure/azure-event-hubs-for-kafka/tree/master/tutorials/oauth).

## <a name="other-event-hubs-features-available-for-kafka"></a>Другие функции Центров событий, доступные для Kafka

Центры событий для компонента Kafka позволяют использовать один протокол для записи, а другой для чтения. В этом случае текущие производители Kafka могут продолжить публикацию с помощью Kafka, а вы можете добавлять средства чтения с помощью Центров событий, например Azure Stream Analytics или Функции Azure. Кроме того, функции Центров событий, такие как [Захват](event-hubs-capture-overview.md) и [Геоизбыточное аварийное восстановление](event-hubs-geo-dr.md), также работают с концентраторами событий для компонента Kafka.

## <a name="features-that-are-not-yet-supported"></a>Еще не реализованные функции 

Ниже приведен список функций Kafka, которые еще не поддерживаются:

*   идемпотентный производитель;
*   Transaction
*   Сжатие
*   хранение на основе размера;
*   сжатие журнала;
*   добавлений секций в существующий раздел;
*   поддержка API HTTP Kafka;
*   потоки Kafka.

## <a name="next-steps"></a>Следующие шаги

В этой статье приведены ознакомительные сведения о Центрах событий для компонента Kafka. Дополнительные сведения см. по следующим ссылкам:

- [Создание концентраторов событий с поддержкой Kafka](event-hubs-create-kafka-enabled.md)
- [Потоковая передача данных в Центры событий из приложений Kafka](event-hubs-quickstart-kafka-enabled-event-hubs.md)
- [Использование Apache Kafka MirrorMaker с Центрами событий](event-hubs-kafka-mirror-maker-tutorial.md)
- [Connect your Apache Spark application with Kafka-enabled Azure Event Hubs](event-hubs-kafka-spark-tutorial.md) (Подключение приложения Apache Spark к Центрам событий Azure с поддержкой Kafka)
- [Использование Apache Flink с Центрами событий Azure для Apache Kafka](event-hubs-kafka-flink-tutorial.md)
- [Интеграция поддержки Apache Kafka Connect в Центрах событий Azure (предварительная версия)](event-hubs-kafka-connect-tutorial.md)
- [Использование Akka Streams с Центрами событий для Apache Kafka](event-hubs-kafka-akka-streams-tutorial.md)
- [Migrating to Azure Event Hubs for Apache Kafka Ecosystems](https://github.com/Azure/azure-event-hubs-for-kafka) (Переход в Центры событий Azure для экосистем Apache Kafka)


