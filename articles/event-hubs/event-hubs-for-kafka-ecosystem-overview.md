---
title: Использование концентратора событий из приложения Apache Kafka — Центры событий Azure | Документация Майкрософт
description: В этой статье содержатся сведения о поддержке Apache Kafka в службе "Центры событий Azure".
services: event-hubs
documentationcenter: .net
author: ShubhaVijayasarathy
manager: timlt
ms.service: event-hubs
ms.topic: article
ms.custom: seodec18
ms.date: 02/12/2020
ms.author: shvija
ms.openlocfilehash: 7d3525bc7a25550a79ceeb008e3c69c77a56aa0a
ms.sourcegitcommit: d597800237783fc384875123ba47aab5671ceb88
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/03/2020
ms.locfileid: "80632871"
---
# <a name="use-azure-event-hubs-from-apache-kafka-applications"></a>Использование Центров событий Azure из приложений Apache Kafka
Центры событий предоставляют конечную точку Kafka, которую существующие приложения на основе Kafka могут использовать в качестве альтернативы запуска собственного кластера Kafka. Центры событий поддерживают [Apache Kafka 1.0](https://kafka.apache.org/documentation/) и более новые версии протокола и работают с имеющимися приложениями Kafka, в том числе с MirrorMaker.  

## <a name="what-does-event-hubs-for-kafka-provide"></a>Возможности, предоставленные Центрами событий для Kafka

Центры событий для компонента Kafka предоставляют заголовок протокола на основе концентраторов событий Azure, который совместим по двоичным файлам с Kafka 1.0 и более поздними версиями, для чтения из разделов Kafka и записи в них. Вы можете начать использовать конечную точку Kafka из своих приложений без изменения кода, но с минимальным изменением конфигурации. Чтобы указать конечную точку Kafka, предоставленную концентратором событий, вместо указания кластера Kafka можно обновить строку подключения в конфигурации. Затем вы можете начать потоковую передачу событий из приложений, использующих в Центрах событий протокол Kafka. При такой интеграции также поддерживаются такие платформы, как [Kafka Connect](https://github.com/Azure/azure-event-hubs-for-kafka/tree/master/tutorials/connect), которая сейчас доступна в предварительной версии. 

Концептуально Kafka и Event Hubs почти идентичны: оба они разделены журналами, построенными для потоковых данных. В следующей таблице показано составление понятий Kafka и Центров событий.

### <a name="kafka-and-event-hub-conceptual-mapping"></a>Сопоставление понятий Kafka и концентратора событий

| Понятия Kafka | Понятия Центров событий|
| --- | --- |
| Кластер | Пространство имен |
| Раздел | Концентратор событий |
| Секция | Секция|
| Группа потребителей | Группа потребителей |
| Offset | Offset|

### <a name="key-differences-between-kafka-and-event-hubs"></a>Основные различия между Kafka и Центрами событий

Несмотря на то, что [Apache Kafka](https://kafka.apache.org/) — это программное обеспечение, которое можно использовать в любом месте, Центры событий представляют собой облачную службу, схожую с хранилищем BLOB-объектов Azure. Вам не нужно управлять серверами или сетями и настраивать брокеры — эти компоненты просто отсутствуют. Вы создаете пространство имен, которое является полным доменным именем, содержащим разделы, а затем в этом пространстве имен создаете концентраторы событий или разделы. Дополнительные сведения о Центрах событий и пространствах имен см. в статье [Особенности Центров событий](event-hubs-features.md#namespace). Как облачный сервис, Event Hubs использует один стабильный виртуальный IP-адрес в качестве конечной точки, поэтому клиентам не нужно знать о брокерах или машинах в кластере. 

Масштаб в Центрах событий контролируется количеством приобретаемых единиц пропускной способности, где каждая такая единица предоставляет 1 МБ в секунду или 1000 событий в секунду входящих данных. По умолчанию Центры событий масштабируют единицы пропускной способности по достижении предела, используя функцию [автоматического расширения](event-hubs-auto-inflate.md). Эта функция также работает с концентраторами событий для компонента Kafka. 

### <a name="security-and-authentication"></a>Безопасность и проверка подлинности
Каждый раз, когда вы публикуете или потребляете события из концентров событий для Kafka, клиент пытается получить доступ к ресурсам концентраторов событий. Необходимо обеспечить доступ к ресурсам с помощью авторизованной организации. При использовании протокола Apache Kafka с клиентами можно настроить конфигурацию для проверки подлинности и шифрования с помощью механизмов SASL. При использовании Event Hubs для Kafka требуется шифрование TLS (поскольку все данные в пути с Концентраторами событий зашифрованы). Это может быть сделано с указанием SASL_SSL опции в файле конфигурации. 

Концентраторы azure Event предоставляют несколько вариантов авторизации доступа к защищенным ресурсам. 

- OAuth
- Подписанный URL-адрес (SAS)

#### <a name="oauth"></a>OAuth
Концентраторы событий интегрируются с Azure Active Directory (Azure AD), который обеспечивает сервер централизованной авторизации **OAuth** 2.0. С Azure AD можно использовать элементы управления доступом на основе ролей (RBAC) для предоставления разрешений на получение идентификационных данных клиентов. Эту функцию можно использовать вместе с клиентами Kafka, указав **SASL_SSL** для протокола и **OAUTHBEARER** для механизма. Подробную информацию о ролях и уровнях RBAC для отслеживания доступа можно узнать о функциях [Azure AD.](authorize-access-azure-active-directory.md)

```xml
bootstrap.servers=NAMESPACENAME.servicebus.windows.net:9093
security.protocol=SASL_SSL
sasl.mechanism=OAUTHBEARER
sasl.jaas.config=org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule required;
sasl.login.callback.handler.class=CustomAuthenticateCallbackHandler;
```

#### <a name="shared-access-signature-sas"></a>Подписанный URL-адрес
Концентраторы событий также предоставляют **общие подписи доступа (SAS)** для делегированного доступа к концентрам событий для ресурсов Kafka. Разрешение доступа с помощью механизма на основе токенов OAuth 2.0 обеспечивает превосходную безопасность и простоту использования над SAS. Встроенные роли могут также устранить необходимость в авторизации на основе ACL, которая должна поддерживаться и управляться пользователем. Эту функцию можно использовать вместе с клиентами Kafka, указав **SASL_SSL** для протокола и **PLAIN** для механизма. 

```xml
bootstrap.servers=NAMESPACENAME.servicebus.windows.net:9093
security.protocol=SASL_SSL
sasl.mechanism=PLAIN
sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username="$ConnectionString" password="{YOUR.EVENTHUBS.CONNECTION.STRING}";
```

#### <a name="samples"></a>Примеры 
В **учебнике** с пошаговыми инструкциями по созданию концентратора событий и [Quickstart: Data streaming with Event Hubs using the Kafka protocol](event-hubs-quickstart-kafka-enabled-event-hubs.md)доступу к нему с помощью SAS или OAuth см.

Дополнительные **примеры,** которые показывают, как использовать OAuth с концентраторами событий для Kafka, [см.](https://github.com/Azure/azure-event-hubs-for-kafka/tree/master/tutorials/oauth)

## <a name="other-event-hubs-features-available-for-kafka"></a>Другие функции Центров событий, доступные для Kafka

Центры событий для компонента Kafka позволяют использовать один протокол для записи, а другой для чтения. В этом случае текущие производители Kafka могут продолжить публикацию с помощью Kafka, а вы можете добавлять средства чтения с помощью Центров событий, например Azure Stream Analytics или Функции Azure. Кроме того, функции Центров событий, такие как [Захват](event-hubs-capture-overview.md) и [Геоизбыточное аварийное восстановление](event-hubs-geo-dr.md), также работают с концентраторами событий для компонента Kafka.

## <a name="features-that-are-not-yet-supported"></a>Еще не реализованные функции 

Ниже приведен список функций Kafka, которые еще не поддерживаются:

*   идемпотентный производитель;
*   Транзакция
*   Сжатие
*   хранение на основе размера;
*   сжатие журнала;
*   добавлений секций в существующий раздел;
*   поддержка API HTTP Kafka;
*   потоки Kafka.

## <a name="next-steps"></a>Дальнейшие действия
В этой статье приведены ознакомительные сведения о Центрах событий для компонента Kafka. Чтобы узнать больше, смотрите [руководство разработчика Apache Kafka для центров событий Azure.](apache-kafka-developer-guide.md)


