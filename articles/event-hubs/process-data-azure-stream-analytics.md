---
title: Обработка данных из концентраторов событий Azure с помощью Stream Analytics Документы Майкрософт
description: В этой статье показано, как обрабатывать данные из концентратора событий Azure с помощью задания Azure Stream Analytics.
services: event-hubs
author: spelluru
manager: ''
ms.author: spelluru
ms.date: 07/09/2019
ms.topic: article
ms.service: event-hubs
ms.openlocfilehash: 531426656fe833752c9c4685688c00de3894895b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "69991944"
---
# <a name="process-data-from-your-event-hub-using-azure-stream-analytics"></a>Обработка данных из концентратора событий с помощью Аналитики потоков Azure 
Служба анализа потоков Azure упрощает глотание, обработку и анализ потоковых данных из концентраторов событий Azure, позволяя создавать мощные аналитические данные для управления действиями в режиме реального времени. Эта интеграция позволяет быстро создать конвейер аналитики горячего пути. Вы можете использовать портал Azure для визуализации входящих данных и записи запроса Stream Analytics. Как только ваш запрос будет готов, вы можете переместить его в производство всего за несколько кликов. 

## <a name="key-benefits"></a>Основные преимущества
Ниже приведены основные преимущества интеграции Azure Event Hubs и Azure Stream Analytics: 
- **Предварительный просмотр данных** - Вы можете просмотреть поступающие данные из концентратора событий на портале Azure.
- **Проверьте свой запрос** - Подготовьте запрос на преобразование и проверьте его непосредственно на портале Azure. Для синтаксиса языка [Stream Analytics Query Language](/stream-analytics-query/built-in-functions-azure-stream-analytics) запросов см.
- **Развертывание запроса в производственной работе** — Вы можете развернуть запрос в производство, создав и задней задания Azure Stream Analytics.

## <a name="end-to-end-flow"></a>Сквозной поток

1. Войдите на [портал Azure](https://portal.azure.com). 
1. Перейдите в **пространство имен event Hubs,** а затем перейдите к **концентратору событий,** который имеет входящие данные. 
1. Выберите **данные процесса** на странице концентратора событий.  

    ![Плитка данных обработки](./media/process-data-azure-stream-analytics/process-data-tile.png)
1. Выберите **Исследуйте** информацию о включить в **реальном времени из плитки событий.** 

    ![Выбор Stream Analytics](./media/process-data-azure-stream-analytics/process-data-page-explore-stream-analytics.png)
1. Вы видите страницу запроса со значениями, уже установленными для следующих полей:
    1. **Концентратор событий** в качестве ввода для запроса.
    1. Пример **запроса СЗЛ** с заявлением SELECT. 
    1. **Выводный** псевдоним для обозначения результатов теста запроса. 

        ![Редактор запросов](./media/process-data-azure-stream-analytics/query-editor.png)
        
        > [!NOTE]
        >  При первом использовании этой функции эта страница запрашивает ваше разрешение на создание группы потребителей и политику для входящего концентратора событий для предварительного просмотра входящих данных.
1. Выберите **Создать** в панели **предварительного просмотра ввода,** как показано на предыдущем изображении. 
1. Вы сразу увидите снимок последних входящих данных в этой вкладке.
    - Тип сериализации в данных автоматически обнаруживается (JSON/CSV). Вы можете вручную изменить его на JSON/CSV/AVRO.
    - Вы можете просмотреть входящие данные в формате таблицы или в сыром формате. 
    - Если отображаемые данные не актуальны, выберите **Обновление,** чтобы просмотреть последние события. 

        Вот пример данных в **формате таблицы:** ![Результаты в формате таблицы](./media/process-data-azure-stream-analytics/snapshot-results.png)

        Вот пример данных в **необработанном формате:** 

        ![Результаты в сыром формате](./media/process-data-azure-stream-analytics/snapshot-results-raw-format.png)
1. Выберите **запрос теста,** чтобы просмотреть моментальный снимок результатов тестирования запроса во вкладке **результаты теста.** Вы также можете скачать результаты.

    ![Результаты тестирования запроса](./media/process-data-azure-stream-analytics/test-results.png)
1. Напишите свой собственный запрос для преобразования данных. Смотрите [ссылку на язык запросов Stream Analytics](/stream-analytics-query/stream-analytics-query-language-reference).
1. После тестирования запроса и его перемещения в производство выберите **запрос Deploy.** Чтобы развернуть запрос, создайте задание Azure Stream Analytics, где можно настроить выход для задания и начать работу. Чтобы создать задание Stream Analytics, укажите имя для задания и выберите **Создать.**

      ![Создание задания Azure Stream Analytics](./media/process-data-azure-stream-analytics/create-stream-analytics-job.png)

      > [!NOTE] 
      >  Мы рекомендуем создать группу потребителей и политику для каждого нового задания Azure Stream Analytics, создаваемого на странице концентраторов событий. Группы потребителей разрешают только пять одновременных читателей, поэтому предоставление выделенной группы потребителей для каждого задания позволит избежать ошибок, которые могут возникнуть в результате превышения этого предела. Специальная политика позволяет повернуть ключ или отозвать разрешения, не влияя на другие ресурсы. 
1. Задание Stream Analytics теперь создается там, где ваш запрос совпадает с тестируемым запросом, а входный данный — центром событий. 

9.  Для завершения конвейера установите **выход** запроса и выберите **«Начало»** для начала задания.

    > [!NOTE]
    > Перед началом работы не забудьте заменить outputalias на имя вывода, созданное в Azure Stream Analytics.

      ![Установите выход и начните задание](./media/process-data-azure-stream-analytics/set-output-start-job.png)


## <a name="known-limitations"></a>Известные ограничения
При тестировании запроса загрузка результатов теста занимает около 6 секунд. Мы работаем над повышением производительности тестирования. Однако при развертывании в производстве аналитика Azure Stream Analytics будет иметь субсекундную задержку.

## <a name="streaming-units"></a>Единицы потоковой передачи
Задание Azure Stream Analytics по умолчанию по умолчанию до трех потоковых единиц (SUs). Чтобы настроить эту настройку, выберите **Шкалу** в левом меню на странице **работы Stream Analytics** на портале Azure. Чтобы узнать больше о потоковых единицах, [см.](../stream-analytics/stream-analytics-streaming-unit-consumption.md)

![Масштаб потоковых единиц](./media/process-data-azure-stream-analytics/scale.png)

## <a name="next-steps"></a>Дальнейшие действия
Чтобы узнать больше о запросах Stream Analytics, [см.](/stream-analytics-query/built-in-functions-azure-stream-analytics)
