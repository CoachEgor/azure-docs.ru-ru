---
title: Обработка данных из концентраторов событий Azure с помощью Stream Analytics | Документация Майкрософт
description: В этой статье показано, как обрабатывать данные из концентратора событий Azure с помощью задания Azure Stream Analytics.
services: event-hubs
author: spelluru
manager: ''
ms.author: spelluru
ms.date: 07/09/2019
ms.topic: article
ms.service: event-hubs
ms.openlocfilehash: f179687b0983e145244e228a3d3b06b4eabead48
ms.sourcegitcommit: dad277fbcfe0ed532b555298c9d6bc01fcaa94e2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/10/2019
ms.locfileid: "67723419"
---
# <a name="process-data-from-your-event-hub-using-azure-stream-analytics"></a>Обработка данных из концентратора событий с помощью Azure Stream Analytics
Служба Azure Stream Analytics позволяет легко для приема и анализируют потоковые данные из концентраторов событий Azure, включение полезной аналитической информации для выполнения действий в режиме реального времени. Такая интеграция позволяет быстро создать конвейер аналитики критического пути. Портал Azure можно использовать для визуализации входящих данных и написать запрос Stream Analytics. Когда запрос готов, его можно переместить в рабочую среду в несколько щелчков мышью. 

## <a name="key-benefits"></a>Основные преимущества
Ниже приведены ключевые преимущества интеграции концентраторов событий Azure и Azure Stream Analytics. 
- **Предварительный просмотр данных** — можно просмотреть входящие данные из концентратора событий на портале Azure.
- **Проверить запрос** — Подготовьте запрос преобразования и проверить его непосредственно на портале Azure. Синтаксис языка запросов, см. в разделе [язык запросов Stream Analytics](/stream-analytics-query/built-in-functions-azure-stream-analytics) документации.
- **Развертывание в рабочей среде запрос** — запрос можно развернуть в рабочей среде путем создания и запуска задания Azure Stream Analytics.

## <a name="end-to-end-flow"></a>End-to-end поток

1. Войдите на [портале Azure](https://portal.azure.com). 
1. Перейдите к вашей **пространства имен концентраторов событий** и перейдите к **концентратора событий**, который имеет входящих данных. 
1. Выберите **обработки данных** на странице концентратора событий.  

    ![Плитка данных процесса](./media/process-data-azure-stream-analytics/process-data-tile.png)
1. Выберите **Проводник** на **Включить аналитику в режиме реального времени из события** плитку. 

    ![Выбор Stream Analytics](./media/process-data-azure-stream-analytics/process-data-page-explore-stream-analytics.png)
1. Отобразится страница запроса со значениями, уже задано для следующих полей:
    1. Ваш **концентратора событий** качестве входных данных для запроса.
    1. Пример **SQL-запрос** с помощью инструкции SELECT. 
    1. **Вывода** псевдоним для ссылки на результаты теста. 

        ![Редактор запросов](./media/process-data-azure-stream-analytics/query-editor.png)
        
        > [!NOTE]
        >  При использовании этой функции в первый раз, эта страница запрашивает разрешение на создание группы потребителей и политику для концентратора событий для предварительного просмотра входящих данных.
1. Выберите **создать** в **предварительного просмотра входных данных** области, как показано на предыдущем рисунке. 
1. Можно сразу увидеть моментальный снимок последних входящих данных на этой вкладке.
    - Тип сериализации данных будет автоматически обнаружен (JSON или CSV). Также его можно будет изменить вручную в JSON, CSV или AVRO.
    - Можно просмотреть входные данные в табличном формате или формате raw. 
    - Если данные, отображаемые не является текущей, выберите **обновить** для просмотра последних событий. 

        Ниже приведен пример данных в **формат таблицы**:   ![Результаты в табличном формате](./media/process-data-azure-stream-analytics/snapshot-results.png)

        Ниже приведен пример данных в **необработанном формате**: 

        ![Результаты в необработанном формате](./media/process-data-azure-stream-analytics/snapshot-results-raw-format.png)
1. Выберите **тестовый запрос** для просмотра результатов запроса в моментальный снимок **результаты теста** вкладки. Вы также можете скачать результаты.

    ![Результаты запроса](./media/process-data-azure-stream-analytics/test-results.png)
1. Напишите собственный запрос для преобразования данных. См. в разделе [справочнике по языку запросов Stream Analytics](/stream-analytics-query/stream-analytics-query-language-reference).
1. После тестирования запроса, и вы хотите переместить рабочей среде, выберите **развернуть запрос**. Чтобы развернуть запрос, создайте задание Azure Stream Analytics, где можно задать выходные данные для задания и запустить задание. Чтобы создать задание Stream Analytics, укажите имя для задания и выберите **создать**.

      ![Создание задания Azure Stream Analytics](./media/process-data-azure-stream-analytics/create-stream-analytics-job.png)

      > [!NOTE] 
      >  Мы рекомендуем создать группу потребителей и политики для каждого нового задания Azure Stream Analytics, созданными на странице концентраторов событий. Группы потребителей допускает только пять параллельных модулей чтения, предоставляя выделенную группу потребителей для каждого задания позволит избежать ошибок, которые могут возникнуть превышать этот предел. Выделенную политику можно сменить ваш ключ или отозвать разрешения без влияния на другие ресурсы. 
1. К заданию Stream Analytics теперь создается, где запрос готов, Вы протестировали и входные данные — концентратор событий. 

9.  Для выполнения конвейера, задайте **вывода** запроса, и выберите **запустить** для запуска задания.

    > [!NOTE]
    > Перед запуском задания, не забудьте заменить outputalias, имя выходных данных, созданной в Azure Stream Analytics.

      ![Назначьте в качестве вывода и запустить задание](./media/process-data-azure-stream-analytics/set-output-start-job.png)


## <a name="known-limitations"></a>Известные ограничения
Во время тестирования запроса, результаты теста занять около 6 секунд для загрузки. Мы работаем над улучшением производительности тестирования. Тем не менее при развертывании в рабочей среде, Azure Stream Analytics будет иметь меньше секунды задержка.

## <a name="streaming-units"></a>Единицы потоковой передачи
Azure Stream Analytics заданий по умолчанию — три единицы потоковой передачи (su). Чтобы настроить этот параметр, выберите **масштабирования** в меню слева в **задания Stream Analytics** страницы на портале Azure. Дополнительные сведения о единицах потоковой передачи, см. в разделе [понимание и настройка единиц потоковой передачи](../stream-analytics/stream-analytics-streaming-unit-consumption.md).

![Масштабирование единиц потоковой передачи](./media/process-data-azure-stream-analytics/scale.png)

## <a name="next-steps"></a>Следующие шаги
Дополнительные сведения о запросах Stream Analytics, см. в разделе [язык запросов Stream Analytics](/stream-analytics-query/built-in-functions-azure-stream-analytics)