---
title: Переместите пространство имен azure Event Hubs в другой регион Документы Майкрософт
description: В этой статье показано, как переместить пространство имен Azure Event Hubs из текущего региона в другой регион.
services: event-hubs
author: spelluru
ms.service: event-hubs
ms.topic: how-to
ms.custom: subject-moving-resources
ms.date: 04/14/2020
ms.author: spelluru
ms.reviewer: shvija
ms.openlocfilehash: 2dfc9c517605bbb48bee0b306fb275464cfebe39
ms.sourcegitcommit: 5e49f45571aeb1232a3e0bd44725cc17c06d1452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2020
ms.locfileid: "81606812"
---
# <a name="move-an-azure-event-hubs-namespace-to-another-region"></a>Перемещение пространства имен Azure Event Hubs в другой регион
Существуют различные сценарии, в которых требуется переместить существующее пространство имен событий из одного региона в другой. Например, можно создать пространство имен с той же конфигурацией для тестирования. Возможно также создать вторичное пространство имен в другом регионе в рамках [планирования аварийного восстановления.](event-hubs-geo-dr.md#setup-and-failover-flow)

> [!NOTE]
> В этой статье показано, как экспортировать шаблон менеджера ресурсов Azure для существующего пространства имен событий, а затем использовать шаблон для создания пространства имен с теми же настройками конфигурации в другом регионе. Однако этот процесс не перемещает события, которые еще не обработаны. Перед его удаляемому необходимо обработать события из исходного пространства имен.

## <a name="prerequisites"></a>Предварительные требования

- Убедитесь, что службы и функции, которые использует ваша учетная запись, поддерживаются в целевом регионе.
- Для просмотра функций убедитесь, что ваша подписка включена в белый список для целевого региона.
- Если у вас есть **функция захвата** для концентраторов событий в пространстве имен, переместите учетные [записи Azure Storage или Azure Data Lake Store Gen 2](../storage/common/storage-account-move.md) или учетные записи [Azure Data Lake Store Gen 1,](../data-lake-store/data-lake-store-migration-cross-region.md) прежде чем переместить пространство имен концентраторов событий. Можно также переместить группу ресурсов, содержащую как области имен, так и пространства концентров событий, в другой регион, следуя шагам, аналогичным тем, которые описаны в этой статье. 
- Если пространство имен концентров событий находится в **кластере концентраторов событий,** [создайте выделенный кластер](event-hubs-dedicated-cluster-create-portal.md) в **целевом регионе,** прежде чем пройти через этапы в этой статье. 

## <a name="prepare"></a>Подготовка.
Для начала экспортируете шаблон «Менеджер ресурсов». Этот шаблон содержит параметры, описывающие пространство имен концентратов событий.

1. Войдите на [портал Azure](https://portal.azure.com).

2. Выберите **все ресурсы,** а затем выберите пространство имен концентратов событий.

3. Выберите**шаблон экспорта** **> настройки.** > 

4. Выберите **Скачать** на странице **шаблона Экспорт.**

    ![Скачать шаблон менеджера ресурсов](./media/move-across-regions/download-template.png)

5. Найдите файл .zip, который вы загрузили с портала, и распакуйте этот файл в папку по вашему выбору.

   Этот почтовый файл содержит файлы .json, которые включают шаблон и скрипты для развертывания шаблона.


## <a name="move"></a>Переместить

Развертывание шаблона для создания пространства имен концентраторов событий в целевом регионе. 


1. На портале Azure выберите **Создайте ресурс.**

2. В строке **Поиск в Marketplace** введите **развертывание шаблона** и нажмите клавишу **ВВОД**.

3. Выберите **развертывание шаблонов.**

4. Нажмите кнопку **создания**.

5. Выберите **Создать собственный шаблон в редакторе**.

6. Выберите **файл Нагрузки,** а затем следуйте инструкциям для загрузки файла **template.json,** который вы загрузили в последнем разделе.

7. Выберите **Сохранить,** чтобы сохранить шаблон. 

8. На странице **пользовательского развертывания** выполните следующие действия: 

    1. Выберите **подписку**Azure. 

    2. Выберите существующую **группу ресурсов** или создайте новую. Если пространство исходного кода находилось в кластере концентраторов событий, выберите группу ресурсов, содержащую кластер в целевом регионе. 

    3. Выберите целевое **местоположение** или область. Если вы выбрали существующую группу ресурсов, эта настройка читается только для чтения. 

    4. В разделе **SETTINGS** сделайте следующие шаги:
    
        1. введите новое **имя пространства имен.** 

            ![Шаблон «Развертывание управления ресурсами»](./media/move-across-regions/deploy-template.png)

        2. Если пространство исходного имени находилось в **кластере концентраторов событий,** введите имена **группы ресурсов** и **кластера событийных центров** как часть **внешнего идентификатора.** 

              ```
              /subscriptions/<AZURE SUBSCRIPTION ID>/resourceGroups/<CLUSTER'S RESOURCE GROUP>/providers/Microsoft.EventHub/clusters/<CLUSTER NAME>
              ```   
        3. Если концентратор событий в вашем пространстве имен использует учетную запись хранения `StorageAccounts_<original storage account name>_external` для захвата событий, укажите имя группы ресурсов и учетную запись хранилища для поля. 
            
            ```
            /subscriptions/0000000000-0000-0000-0000-0000000000000/resourceGroups/<STORAGE'S RESOURCE GROUP>/providers/Microsoft.Storage/storageAccounts/<STORAGE ACCOUNT NAME>
            ```    
    5. Установите флажок **Я принимаю указанные выше условия**. 
    
    6. Теперь **выберите покупку,** чтобы начать процесс развертывания. 

## <a name="discard-or-clean-up"></a>Отбросить или очистить
После развертывания, если вы хотите начать все сначала, можно удалить **пространство имен целевых концентров событий**и повторить шаги, описанные в разделах [«Подготовка](#prepare) и [перемещение»](#move) этой статьи.

Чтобы зафиксировать изменения и завершить перемещение пространства имен Event Hubs, удалите **пространство имен исходных событий.** Убедитесь, что перед удалянием пространства имен необходимо обработать все события в пространстве имен. 

Чтобы удалить пространство имен event Hubs (источник или цель) с помощью портала Azure:

1. В окне поиска в верхней части портала Azure введите **концентраторы событий**и выберите **концентраторы событий** из результатов поиска. Пространства имен event Hubs в списке.

2. Выберите целевое пространство имен для удаления и выберите **Удалить** из панели инструментов. 

    ![Удаление пространства имен - кнопка](./media/move-across-regions/delete-namespace-button.png)

3. На странице **Удаления ресурсов**и подтверждения выбранных ресурсов и подтверждения удаления, **введя**да, а затем выберите **Удалить**. 

## <a name="next-steps"></a>Дальнейшие действия

В этом учебнике вы перенесли пространство имен Azure Event Hubs из одного региона в другой и очистили исходные ресурсы.  Чтобы узнать больше о перемещении ресурсов между регионами и аварийном восстановлении в Azure, обратитесь к:


- [Перемещение ресурсов в новую группу ресурсов или подписку](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-move-resources)
- [Перенос виртуальных машин Azure в другой регион](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-tutorial-migrate)
