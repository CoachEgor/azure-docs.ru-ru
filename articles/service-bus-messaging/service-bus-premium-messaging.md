---
title: Премиум-классы сервиса Azure
description: В этой статье описаны стандартные и премиальные уровни сервиса Azure Bus. Сравнивает эти уровни и обеспечивает технические различия.
services: service-bus-messaging
documentationcenter: .net
author: axisc
manager: timlt
editor: spelluru
ms.assetid: e211774d-821c-4d79-8563-57472d746c58
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 01/27/2020
ms.author: aschhab
ms.openlocfilehash: ef3cc8d4c7354b43389244e72c2dbc5899b8db25
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76774569"
---
# <a name="service-bus-premium-and-standard-messaging-tiers"></a>Уровни обмена сообщениями через служебную шину Premium и Standard

Обмен сообщениями через служебную шину включает такие сущности, как очереди и темы, а также объединяет возможности корпоративного обмена сообщениями с расширенной семантикой публикаций и подписок в масштабе облака. Обмен сообщениями через служебную шину используется в качестве средства коммуникации во многих сложных облачных решениях.

*Премиум-уровень* сообщений об обслуживании автобусов удовлетворяет общие запросы клиентов по масштабам, производительности и доступности критически важных приложений. Для использования в рабочей среде рекомендуется уровень "Премиум". Несмотря на практически идентичные наборы функций, эти два уровня обмена сообщениями через служебную шину предназначены для использования в разных условиях.

Некоторые высокоуровневые различия представлены в следующей таблице.

| Premium | Standard |
| --- | --- |
| Высокая пропускная способность |Переменная пропускная способность |
| Прогнозируемая производительность |Переменная задержка |
| Фиксированные цены |Переменная оплата по мере использования |
| Возможность увеличения и уменьшения масштаба рабочей нагрузки |Недоступно |
| Размер сообщения до 1 МБ |Размер сообщения до 256 КБ |

**Обмен сообщениями через служебную шину ценовой категории "Премиум"** обеспечивает изоляцию ресурсов на уровне процессора и памяти, чтобы рабочая нагрузка каждого клиента выполнялась изолированно. Этот контейнер ресурсов называется *блоком обмена сообщениями.* Для каждого премиального пространства имен выделяется хотя бы одна единица обмена сообщениями. Вы можете приобрести 1, 2, 4 или 8 единиц обмена сообщениями для каждого пространства имен Service Bus Premium. Одна рабочая нагрузка или сущность может охватывать несколько единиц обмена сообщениями, а количество единиц обмена сообщениями может быть изменено по своей воле. В результате вы получаете решение на базе служебной шины с прогнозируемой и повторяемой производительностью.

Оно отличается не только более предсказуемой производительностью и высокой доступностью, но и более высокой скоростью работы. СервисBus Premium Messaging построен на движке хранения данных, представленном в [Azure Event Hubs.](https://azure.microsoft.com/services/event-hubs/) Уровень "Премиум" обеспечивает более высокую скорость передачи данных при пиковой нагрузке, чем уровень "Стандартный".

## <a name="premium-messaging-technical-differences"></a>Технические отличия обмена сообщениями уровня Premium

Ниже представлены некоторые различия между уровнями обмена сообщениями "Премиум" и "Стандартный"

### <a name="partitioned-queues-and-topics"></a>Секционированные очереди и разделы

Секционированные очереди и разделы не поддерживаются в службе сообщений уровня "Премиум". Дополнительные сведения о секционировании см. в статье [Секционированные очереди и разделы](service-bus-partitioning.md).

### <a name="express-entities"></a>Экспресс-сущности

Так как обмен сообщениями уровня "Премиум" работает в полностью изолированной среде, экспресс-сущности не поддерживаются в пространстве имен этого уровня. Дополнительные сведения об экспресс-функции см. в разделе о свойстве [QueueDescription.EnableExpress](/dotnet/api/microsoft.servicebus.messaging.queuedescription.enableexpress#Microsoft_ServiceBus_Messaging_QueueDescription_EnableExpress).

Если у вас есть код, запущенный в рамках обмена сообщениями уровня "Стандартный", который необходимо перенести на уровень "Премиум", убедитесь, что для свойства [EnableExpress](/dotnet/api/microsoft.servicebus.messaging.queuedescription.enableexpress#Microsoft_ServiceBus_Messaging_QueueDescription_EnableExpress) задано значение **false** (значение по умолчанию).

## <a name="premium-messaging-resource-usage"></a>Использование ресурсов премиум-сообщений
Как правило, любая операция на объекте может привести к использованию процессора и памяти. Вот некоторые из этих операций: 

- Операции управления, такие как операции CRUD (Создание, извлечение, обновление и удаление) в очередях, темах и подписках.
- Операции runtime (отправка и получение сообщений)
- Мониторинг операций и оповещения

Дополнительный процессор и использование памяти не оценивается дополнительно, хотя. Для уровня Premium Messaging существует единая цена для единицы сообщений.

Использование процессора и памяти отслеживается и отображается вам по следующим причинам: 

- Обеспечить прозрачность внутренних органов системы
- Понять емкость закупаемых ресурсов.
- Планирование емкости, которое поможет вам решить масштабировать ся вниз.

## <a name="messaging-unit---how-many-are-needed"></a>Блок обмена сообщениями - Сколько нужно?

При подготовке пространства имен Azure Service Bus Premium необходимо указать количество выделенных единиц обмена сообщениями. Эти блоки обмена сообщениями являются выделенными ресурсами, которые выделяются в пространство имен.

Количество единиц обмена сообщениями, выделенных в пространстве имен Service Bus Premium, может быть **динамически скорректировано** с учетом изменения (увеличения или уменьшения) рабочих нагрузок.

При принятии решения о количестве единиц обмена сообщениями для вашей архитектуры необходимо учитывать ряд факторов:

- Начните с ***1 или 2 единиц обмена сообщениями, выделенных*** для вашего пространства имен.
- Изучите метрики использования процессора в [метриках использования ресурсов](service-bus-metrics-azure-monitor.md#resource-usage-metrics) для вашего пространства имен.
    - Если использование процессора ***ниже 20%,*** возможно, вы сможете ***сократить*** количество единиц обмена сообщениями, выделенных в пространстве имен.
    - Если использование процессора ***превышает 70%,*** ваше приложение выиграет от ***расширения*** числа единиц обмена сообщениями, выделенных в пространстве имен.

Процесс масштабирования ресурсов, выделяемых на области имен Ss, можно автоматизировать с помощью [Runbooks Azure Automation Runbooks.](../automation/automation-quickstart-create-runbook.md)

> [!NOTE]
> **Масштабирование** ресурсов, выделяемых в пространстве имен, может быть упреждающим или реактивным.
>
>  * **Упреждающее**: Если ожидается дополнительная рабочая нагрузка (из-за сезонности или тенденций), вы можете приступить к выделению большего количества единиц обмена сообщениями в пространство имен до попадания рабочих нагрузок.
>
>  * **Реактивная реакция**: Если дополнительные рабочие нагрузки определяются путем изучения метрик использования ресурсов, то дополнительные ресурсы могут быть выделены в пространство имен для включения растущего спроса.
>
> Счетчики счетов для служебного автобуса являются ежечасными. В случае масштабирования вы платите только за дополнительные ресурсы за часы, которые они были использованы.
>

## <a name="get-started-with-premium-messaging"></a>Приступая к работе с обменом сообщениями уровня "Премиум"

Приступить к работе с обменом сообщениями уровня "Премиум" так же просто, как и с обменом сообщениями уровня "Стандартный". Начните с [создания пространства имен](service-bus-create-namespace-portal.md) на [портале Azure](https://portal.azure.com). Убедитесь, что вы выбираете **Premium** по **уровню ценообразования.** Для просмотра дополнительных сведений о каждом уровне нажмите кнопку **Просмотреть подробные сведения о ценах**.

![create-premium-namespace][create-premium-namespace]

Вы можете также создать [пространство имен уровня "Премиум", используя шаблоны Azure Resource Manager](https://azure.microsoft.com/resources/templates/101-servicebus-pn-ar/).

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения об обмене сообщениями через служебную шину см. в следующих статьях:

* [Представляем Сервис Azure Bus Premium Messaging (блог)](https://azure.microsoft.com/blog/introducing-azure-service-bus-premium-messaging/)
* [Introducing Azure Service Bus Premium Messaging (Channel9)](https://channel9.msdn.com/Blogs/Subscribe/Introducing-Azure-Service-Bus-Premium-Messaging) (Общие сведения об обмене сообщениями через служебную шину Azure уровня "Премиум" (Channel9))
* [Обзор сообщений об обслуживании автобусов](service-bus-messaging-overview.md)
* [Начало работы с очередями служебной шины](service-bus-dotnet-get-started-with-queues.md)

<!--Image references-->

[create-premium-namespace]: ./media/service-bus-premium-messaging/select-premium-tier.png
