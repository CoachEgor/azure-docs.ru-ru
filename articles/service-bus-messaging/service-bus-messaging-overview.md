---
title: Основные сведения об обмене сообщениями через служебную шину Azure | Документация Майкрософт
description: В этой статье представлены общие сведения о Служебной шине Azure, полностью управляемом интеграционном брокере сообщений корпоративного типа.
services: service-bus-messaging
documentationcenter: ''
author: axisc
manager: timlt
editor: spelluru
ms.service: service-bus-messaging
ms.topic: overview
ms.date: 11/04/2019
ms.custom: mvc
ms.author: aschhab
ms.openlocfilehash: 49a54491c36ef29209d1a53094cc5baf57057557
ms.sourcegitcommit: c2065e6f0ee0919d36554116432241760de43ec8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2020
ms.locfileid: "79215592"
---
# <a name="what-is-azure-service-bus"></a>Что такое служебная шина Azure?

Служебная шина Microsoft Azure — это полностью управляемый брокер интеграции сообщений корпоративного уровня. Эта служба способствует разделению задач между приложениями и службами. Служебная шина предоставляет надежную и безопасную платформу для асинхронного обмена данными и сведениями о состоянии.

Данные передаются между приложениями и (или) службами с помощью *сообщений*. Сообщение имеет двоичный формат и может содержать простой текст или данные в формате XML или JSON. Дополнительные сведения см. на странице [Службы интеграции](https://azure.com/integration).

Вот несколько распространенных сценариев для обмена сообщениями:

* *Обмен сообщениями*. Передача бизнес-данных, например данных о продажах, заказах и перемещении запасов, а также журналов.
* *Разделение задач между приложениями*. Повышение надежности и масштабируемости приложений и служб. Клиент и служба не должны находиться в сети одновременно.
* *Разделы и подписки*. Установление связей 1:*n* между издателями и подписчиками.
* *Сеансы обмена сообщениями*. Реализация рабочих процессов, которые требуют упорядочения сообщений или отсроченной доставки.

## <a name="namespaces"></a>Пространства имен

Контейнер для всех компонентов обмена сообщениями. В одном пространстве имен могут содержаться несколько очередей и разделов. Часто пространства имен выполняют роль контейнеров приложений.

## <a name="queues"></a>Очереди

Сообщений отправляются и получаются через *очереди*. Очереди позволяют хранить сообщения, пока принимающее приложение сможет получить и обработать их.

![Очередь](./media/service-bus-messaging-overview/about-service-bus-queue.png)

Сообщения в очередях упорядочиваются и получают метку времени поступления. Принятые сообщения безопасно хранятся в хранилище с избыточностью. Сообщения доставляются в режиме *запроса* (после получения запроса).

## <a name="topics"></a>Разделы

Вы также можете использовать *разделы* для отправки и получения сообщений. Очереди часто используются для взаимодействия в режиме "точка — точка", но разделы позволяют реализовать сценарии публикации и подписки.

![Раздел](./media/service-bus-messaging-overview/about-service-bus-topic.png)

Для раздела может существовать несколько независимых подписок. Подписка на раздел может получать копию любого сообщения, отправленного в этот раздел. Подписки — это именованные сущности. Подписки сохраняются, но срок их действия может истечь. Кроме того, они могут автоматически удаляться.

В некоторых ситуациях нужно, чтобы в отдельную подписку попадали не все сообщения, отправленные в раздел. В этом случае с помощью *правил* и *фильтров* можно определить условия, которые инициируют дополнительные *действия*. Вы можете отфильтровать указанные сообщения и задать или изменить свойства сообщения. Дополнительные сведения см. в статье [Фильтры и действия разделов](topic-filters.md).

## <a name="advanced-features"></a>Дополнительные функции

Служебная шина поддерживает дополнительные возможности для более сложных схем обмена сообщениями. В следующих разделах описаны некоторые из этих функций.

### <a name="message-sessions"></a>Сеансы обмена сообщениями

Чтобы реализовать надежный механизм FIFO в служебной шине, используйте сеансы. Сеансы сообщений обеспечивают согласованную и упорядоченную обработку несвязанных последовательностей связанных сообщений. Дополнительные сведения см. в статье [Сеансы сообщений и обработка в порядке очереди (FIFO)](message-sessions.md).

### <a name="autoforwarding"></a>Автоматическая переадресация

Функция автоматической переадресации привязывает очередь или подписку к другой очереди или разделу. Они должны находиться в одном пространстве имен. При автоматической переадресации служебная шина автоматически удаляет сообщения из очереди или подписки и помещает их в другую очередь или раздел. Дополнительные сведения см. в статье [Объединение в цепочки сущностей служебной шины с помощью автоматической переадресации](service-bus-auto-forwarding.md).

### <a name="dead-letter-queue"></a>Очередь недоставленных сообщений

Служебная шина поддерживает очередь недоставленных сообщений (DLQ). В этой очереди содержатся сообщения, которые невозможно доставить ни одному получателю. Содержащиеся в ней сообщения нельзя обработать. Служебная шина позволяет удалять сообщения из очереди DLQ и проверять их. Дополнительные сведения см. в статье [Обзор очередей недоставленных сообщений служебной шины](service-bus-dead-letter-queues.md).

### <a name="scheduled-delivery"></a>Доставка по расписанию

Сообщения можно отправлять в очередь или раздел для отложенной обработки. Вы можете запланировать обработку задания системой в определенное время. Дополнительные сведения см. в разделе [Запланированные сообщения](message-sequencing.md#scheduled-messages).

### <a name="message-deferral"></a>Откладывание сообщений

Клиент очереди или подписки может отложить получение сообщения. Эта отсрочка может быть вызвана особыми обстоятельствами в приложении. Сообщение остается в очереди или подписке, но игнорируется. Дополнительные сведения см. в статье [Откладывание сообщений](message-deferral.md).

### <a name="batching"></a>Пакетная обработка

Пакетная обработка на стороне клиента позволяет клиенту очереди или раздела отложить отправку сообщения на определенный период времени. Если в течение этого времени клиент будет отправлять дополнительные сообщения, они будут переданы в одном пакете. Дополнительные сведения см. в разделе [Пакетная обработка на стороне клиента](service-bus-performance-improvements.md#client-side-batching).

### <a name="transactions"></a>Transactions

Транзакция объединяет две или несколько операций в *область выполнения*. Служебная шина поддерживает операции группирования относительно одной сущности обмена сообщениями в области одной транзакции. К таким сущностям сообщений может относиться очередь, тема или подписка. Дополнительные сведения см. в статье [Обзор обработки транзакций в служебной шине](service-bus-transactions.md).

### <a name="filtering-and-actions"></a>Фильтрация и действия

Подписчики могут самостоятельно определять, какие сообщения они хотят получать из раздела. Эти сообщения определяются в одном или нескольких именованных правилах подписки. При каждом совпадении с условиями правила подписка создает копию сообщения, каждая из которых может содержать разные заметки в соответствии с разными правилами. Дополнительные сведения см. в статье [Фильтры и действия разделов](topic-filters.md).

### <a name="autodelete-on-idle"></a>Автоматическое удаление при простое

Автоматическое удаление при простое позволяет настроить интервал бездействия, по истечении которого очередь автоматически удаляется. Минимальная длительность составляет 5 минут. Дополнительные сведения см. в описании свойства [QueueDescription.AutoDeleteOnIdle](/dotnet/api/microsoft.servicebus.messaging.queuedescription.autodeleteonidle).

### <a name="duplicate-detection"></a>Обнаружение дубликатов

Ошибка может не позволить клиенту точно установить состояние операции отправки. Функция обнаружения дубликатов позволяет отправить то же самое сообщение. Другой вариант — отклонение возможных дубликатов очередью или разделом. Дополнительные сведения см. в разделе [Синхронизация удостоверений и устойчивость обнаружения](duplicate-detection.md).

### <a name="security-protocols"></a>Процедуры обеспечения безопасности
<a name="sas-rbac-and-managed-identities-for-azure-resources"></a>

Служебная шина поддерживает такие протоколы безопасности, как [подписанный URL-адрес](service-bus-sas.md) (SAS), [управление доступом на основе ролей](authenticate-application.md) (RBAC) и [управляемые удостоверения для ресурсов Azure](service-bus-managed-service-identity.md).

### <a name="geo-disaster-recovery"></a>Геоизбыточное аварийное восстановление

Если происходит авария на уровне региона или центра обработки данных Azure, геоизбыточное аварийное восстановление позволяет продолжать обработку данных, переключившись на другой регион и (или) центр обработки данных. Дополнительные сведения см. в разделе [Географическое аварийное восстановление в служебной шине Azure](service-bus-geo-dr.md).

### <a name="security"></a>безопасность

Служебная шина поддерживает стандартные протоколы [AMQP 1.0](service-bus-amqp-overview.md) и [HTTP/REST](/rest/api/servicebus/).

## <a name="client-libraries"></a>Клиентские библиотеки

Служебная шина поддерживает клиентские библиотеки для [.NET](https://github.com/Azure/azure-service-bus-dotnet/tree/master), [Java](https://github.com/Azure/azure-service-bus-java/tree/master) и [JMS](https://github.com/Azure/azure-service-bus/tree/master/samples/Java/qpid-jms-client).

## <a name="integration"></a>Интеграция

Служебная шина полностью интегрируется со следующими службами Azure:

* [Сетка событий](https://azure.microsoft.com/services/event-grid/)
* [Logic Apps](https://azure.microsoft.com/services/logic-apps/)
* [Функции Azure](https://azure.microsoft.com/services/functions/)
* [Dynamics 365](https://dynamics.microsoft.com)
* [Azure Stream Analytics](https://azure.microsoft.com/services/stream-analytics/)

## <a name="next-steps"></a>Дальнейшие действия

Сведения о начале работы с обменом сообщениями через служебную шину см. в следующих статьях:

* Сравнение служб обмена сообщениями Azure см. [здесь](../event-grid/compare-messaging-services.md?toc=%2fazure%2fservice-bus-messaging%2ftoc.json&bc=%2fazure%2fservice-bus-messaging%2fbreadcrumb%2ftoc.json).
* Кроме того, вы можете изучить краткие руководства для [.NET](service-bus-dotnet-get-started-with-queues.md), [Java](service-bus-java-how-to-use-queues.md) или [JMS](service-bus-java-how-to-use-jms-api-amqp.md).
* Сведения об управлении ресурсами служебной шины см. [здесь](https://github.com/paolosalvatori/ServiceBusExplorer/releases).
* Сведения о служебной шине Azure категории "Стандартный" и "Премиум" и цены на нее см. на [этой странице](https://azure.microsoft.com/pricing/details/service-bus/).
* Дополнительные сведения о производительности и задержках на уровне "Премиум" см. в [этой записи блога](https://techcommunity.microsoft.com/t5/Service-Bus-blog/Premium-Messaging-How-fast-is-it/ba-p/370722).
