---
title: Обмен сообщениями служебной шины Azure — сущности службы сообщений Java (Предварительная версия)
description: В этой статье представлен обзор сущностей обмена сообщениями служебной шины Azure, доступных через API службы сообщений Java.
ms.topic: article
ms.date: 07/20/2020
ms.openlocfilehash: 1a7fe3d6355146ccf0fce50266a6f3b8da5231b3
ms.sourcegitcommit: fbb66a827e67440b9d05049decfb434257e56d2d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2020
ms.locfileid: "87801802"
---
# <a name="java-message-service-jms-20-entities-preview"></a>Сущности 2,0 (служба сообщений Java (JMS)) (Предварительная версия)

Клиентские приложения, подключающиеся к расширенной служебной шине Azure и использующие [БИБЛИОТЕКУ JMS служебной шины Azure](https://search.maven.org/artifact/com.microsoft.azure/azure-servicebus-jms) , могут использовать указанные ниже сущности.

## <a name="queues"></a>Очереди

Очереди в JMS семантически сравнимы с традиционными [очередями служебной шины](service-bus-queues-topics-subscriptions.md#queues).

Чтобы создать очередь, используйте приведенные ниже методы класса. `JMSContext`

```java
Queue createQueue(String queueName)
```

## <a name="topics"></a>Разделы

Разделы в JMS семантически сравнимы с традиционными [разделами служебной шины](service-bus-queues-topics-subscriptions.md#topics-and-subscriptions).

Чтобы создать раздел, используйте приведенные ниже методы класса. `JMSContext`

```java
Topic createTopic(String topicName)
```

## <a name="temporary-queues"></a>Временные очереди

Когда клиентскому приложению требуется временная сущность, существующая в течение времени существования приложения, она может использовать временные очереди. Они используются в шаблоне " [запрос-ответ](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html) ".

Чтобы создать временную очередь, используйте приведенные ниже методы `JMSContext` класса.

```java
TemporaryQueue createTemporaryQueue()
```

## <a name="temporary-topics"></a>Временные разделы

Как и временные очереди, существуют временные разделы, позволяющие публиковать или подписываться через временную сущность, которая существует в течение всего времени существования приложения.

Чтобы создать временный раздел, используйте приведенные ниже методы `JMSContext` класса.

```java
TemporaryTopic createTemporaryTopic()
```

## <a name="java-message-service-jms-subscriptions"></a>Подписки на службу сообщений Java (JMS)

Хотя они семантически похожи на [подписки](service-bus-queues-topics-subscriptions.md#topics-and-subscriptions) (т. е. существуют в разделе и включают семантику публикации/подписки), в спецификации службы сообщений Java представлены концепции **общих**, **необщих**, **устойчивых** и **неустойчивых** атрибутов для данной подписки.

> [!NOTE]
> Следующие подписки доступны на уровне Premium служебной шины Azure для предварительной версии для клиентских приложений, подключающихся к служебной шине Azure с помощью [библиотеки JMS в служебной шине Azure](https://search.maven.org/artifact/com.microsoft.azure/azure-servicebus-jms).
>
> Для общедоступной предварительной версии эти подписки нельзя создать с помощью портал Azure.
>

### <a name="shared-durable-subscriptions"></a>Общие устойчивые подписки

Общая устойчивая подписка используется, когда все сообщения, опубликованные в разделе, должны быть получены и обработаны приложением, независимо от того, активно ли приложение от подписки.

Так как это общая подписка, все приложения, которые прошли проверку подлинности для получения из служебной шины, могут получить из подписки.

Чтобы создать общую устойчивую подписку, используйте приведенные ниже методы `JMSContext` класса.

```java
JMSConsumer createSharedDurableConsumer(Topic topic, String name)

JMSConsumer createSharedDurableConsumer(Topic topic, String name, String messageSelector)
```

Общая устойчивая подписка остается существующей, если не удалена с помощью `unsubscribe` метода `JMSContext` класса.

```java
void unsubscribe(String name)
```

### <a name="unshared-durable-subscriptions"></a>Несовместное использование устойчивых подписок

Как и в случае с общей устойчивой подпиской, Нераспространенная устойчивая подписка используется, когда все сообщения, опубликованные в разделе, должны быть получены и обработаны приложением, независимо от того, активно ли приложение от подписки.

Однако, так как это необщая подписка, она может получить только приложение, создавшее подписку.

Чтобы создать недоступную устойчивую подписку, используйте приведенные ниже методы из `JMSContext` класса- 

```java
JMSConsumer createDurableConsumer(Topic topic, String name)

JMSConsumer createDurableConsumer(Topic topic, String name, String messageSelector, boolean noLocal)
```

> [!NOTE]
> Эта `noLocal` функция в настоящее время не поддерживается и игнорируется.
>

Необщая устойчивая подписка остается существующей, если не удалена с помощью `unsubscribe` метода `JMSContext` класса.

```java
void unsubscribe(String name)
```

### <a name="shared-non-durable-subscriptions"></a>Общие неустойчивые подписки

Общая неустойчивая подписка используется, когда нескольким клиентским приложениям требуется получать и обрабатывать сообщения из одной подписки, только пока они не будут активно потребляться или получены из нее.

Так как подписка не устойчива, она не сохраняется. При отсутствии активных потребителей в этой подписке сообщения не поступают.

Чтобы создать общую неустойчивую подписку, создайте, `JmsConsumer` как показано в приведенных ниже методах `JMSContext` класса.

```java
JMSConsumer createSharedConsumer(Topic topic, String sharedSubscriptionName)

JMSConsumer createSharedConsumer(Topic topic, String sharedSubscriptionName, String messageSelector)
```

Общая неустойчивая подписка будет существовать до тех пор, пока в ней не поступают активные потребители.

### <a name="unshared-non-durable-subscriptions"></a>Неустойчивые подписки без общих ресурсов

Неустойчивая подписка используется, когда клиентскому приложению требуется получение и обработка сообщения из подписки, только пока она активно не использует ее. В этой подписке может существовать только один потребитель, т. е. Клиент, создавший подписку.

Так как подписка не устойчива, она не сохраняется. Сообщения не получаются этой подпиской, если на ней нет активных потребителей.

Чтобы создать необщую неустойчивую подписку, создайте, `JMSConsumer` как показано в приведенных ниже методах из `JMSContext` класса.

```java
JMSConsumer createConsumer(Destination destination)

JMSConsumer createConsumer(Destination destination, String messageSelector)

JMSConsumer createConsumer(Destination destination, String messageSelector, boolean noLocal)
```

> [!NOTE]
> Эта `noLocal` функция в настоящее время не поддерживается и игнорируется.
>

Неустойчивая подписка будет существовать до тех пор, пока от нее не будет получен активный потребитель.

### <a name="message-selectors"></a>Селекторы сообщений

Так же как **и фильтры и действия** для обычных подписок служебной шины, для подписок JMS существуют **селекторы сообщений** .

Селекторы сообщений могут быть настроены для каждой подписки JMS и существовать как условие фильтра в свойствах заголовка сообщения. Доставляются только сообщения со свойствами заголовка, соответствующими выражению селектора сообщений. Значение null или пустая строка указывает на отсутствие селектора сообщений для подписки или потребителя JMS.

## <a name="next-steps"></a>Дальнейшие шаги

Дополнительные сведения и примеры использования обмена сообщениями в служебной шине Microsoft Azure см. в следующих дополнительных статьях:

* [Основные сведения об обмене сообщениями через служебную шину](service-bus-messaging-overview.md)
* [Использование API службы сообщений Java 2,0 с помощью служебной шины Azure Premium (Предварительная версия)](how-to-use-java-message-service-20.md)



