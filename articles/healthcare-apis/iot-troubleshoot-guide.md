---
title: Соединитель Azure IoT для FHIR (Предварительная версия) — руководство по устранению неполадок и инструкции
description: Как устранить неполадки с общим соединителем Azure IoT для FHIR (Предварительная версия) сообщения об ошибках и их копирование
services: healthcare-apis
author: msjasteppe
ms.service: healthcare-apis
ms.subservice: iomt
ms.topic: troubleshooting
ms.date: 09/16/2020
ms.author: jasteppe
ms.openlocfilehash: 4a1a23ca2d0b30a192c30b331c588d13a2a261a7
ms.sourcegitcommit: d3c3f2ded72bfcf2f552e635dc4eb4010491eb75
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/27/2020
ms.locfileid: "92558522"
---
# <a name="azure-iot-connector-for-fhir-preview-troubleshooting-guide"></a>Руководство по устранению неполадок в соединителе Azure IoT для FHIR (Предварительная версия)

В этой статье приводятся действия по устранению неполадок в сообщениях об ошибках и условиях FHIR * в соединителе Azure IoT.  

Вы также узнаете, как создавать копии соединителя Azure IoT для сопоставления преобразования FHIR JSON (например, Device и FHIR).  

Для редактирования и архивации можно использовать копии JSON сопоставления преобразования за пределами портал Azure.  

> [!TIP]
> Если вы откроете запрос в службу [технической поддержки Azure](https://azure.microsoft.com/support/create-ticket/) для соединителя Azure IOT для FHIR, обязательно включите копии формата JSON сопоставления преобразования, чтобы помочь в процессе устранения неполадок.

## <a name="device-and-fhir-conversion-mapping-json-template-validations-for-azure-iot-connector-for-fhir-preview"></a>Преобразование шаблонов JSON для сопоставления устройств и FHIR для соединителя Azure IoT для FHIR (Предварительная версия)
В этом разделе вы узнаете о процессе проверки того, что соединитель Azure IoT для FHIR выполняет проверку шаблонов JSON сопоставления устройств и FHIR, прежде чем разрешить их сохранение для использования.  Эти элементы необходимы в формате JSON сопоставления устройства и преобразования FHIR.

**Сопоставление устройств**

|Элемент|Обязательно|
|:-------|:------|
|TypeName|True|
|типематчекспрессион|True|
|девицеидекспрессион|True|
|тиместампекспрессион|True|
|Values []. ValueName|True|
|Values []. ValueExpression|True|

> [!NOTE]
> Values []. ValueName и значения []. ValueExpression
>
> Эти элементы необходимы только в том случае, если в массиве есть запись значения, но не сопоставлено значений. Используется, если отправляемая телеметрии является событием. Например, когда устройство носимого пользователем Иомт будет размещено или удалено. Элементы не имеют значений, кроме имени, которое соединитель Azure IoT для FHIR соответствует и выдает. При преобразовании FHIR соединитель Azure IoT для FHIR сопоставляет его с концепцией кода, основанной на семантическом типе. фактические значения не заполняются.

**Сопоставление FHIR**

|Элемент|Обязательно|
|:------|:-------|
|TypeName|True|

> [!NOTE]
> Это единственный обязательный элемент сопоставления FHIR, проверенный в данный момент.

## <a name="error-messages-and-fixes-for-azure-iot-connector-for-fhir-preview"></a>Сообщения об ошибках и исправления для соединителя Azure IoT для FHIR (Предварительная версия)

|Сообщение|Отображаем|Условие|Fix| 
|-------|---------|---------|---|
|Недопустимое имя сопоставления, имя сопоставления должно быть Device или FHIR.|API|Указанный тип сопоставления не является устройством или FHIR.|Используйте один из двух поддерживаемых типов сопоставления (например, Device или FHIR).|
|Проверка завершена с ошибкой. Необходимые сведения отсутствуют или являются недопустимыми.|API и портал Azure|При попытке сохранить в сопоставлении преобразования отсутствует необходимая информация или элемент.|Добавьте недостающие сведения о сопоставлении преобразования или элемент и попытайтесь сохранить сопоставление преобразования еще раз.|
|Повторное создание параметров ключа не определено.|API|Запрос на повторное создание ключа.|Включить параметры в запрос ключа повторного создания.|
|Достигнуто максимальное число экземпляров соединителя IoT, которые могут быть подготовлены в этой подписке.|API и портал Azure|Достигнута квота на использование соединителя Azure IoT для подписки FHIR (по умолчанию — (2) на подписку).|Удалите один из существующих экземпляров соединителя Azure IoT для FHIR.  Используйте другую подписку, которая не достигла квоты подписки.  Запросите увеличение квоты подписки.|
|Перемещение ресурса не поддерживается для ресурса API Azure с включенным соединителем IoT для FHIR.|API и портал Azure|Попытка выполнить операцию перемещения в ресурсе Azure API для FHIR, который содержит один или несколько экземпляров соединителя Azure IoT для FHIR.|Удалите существующие экземпляры соединителя Azure IoT для FHIR, чтобы выполнить операцию перемещения.|
|Соединитель IoT не подготовлен.|API|Попытка использовать дочерние службы (подключения & сопоставления), если родительский объект (соединитель Azure IoT для FHIR) не был подготовлен.|Подготавливает соединитель Azure IoT для FHIR.|
|Запрос не поддерживается.|API|Конкретный запрос API не поддерживается.|Используйте правильный запрос API.|
|Учетная запись не существует.|API|Попытка добавить соединитель Azure IoT для FHIR и API Azure для ресурса FHIR не существует.|Создайте API Azure для ресурса FHIR и повторите операцию.|
|Версия FHIR ресурсов API Azure для FHIR не поддерживается для соединителя IoT.|API|Попытка использовать соединитель Azure IoT для FHIR с несовместимой версией ресурса API Azure для FHIR.|Создайте новый API Azure для ресурса FHIR (версия R4) или используйте существующий API Azure для ресурса FHIR (версия R4).

##  <a name="why-is-my-azure-iot-connector-for-fhir-preview-data-not-showing-up-in-azure-api-for-fhir"></a>Почему мой соединитель Azure IoT для FHIR (Предварительная версия) не отображается в API Azure для FHIR?

|Возможные проблемы|Исправления|
|----------------|-----|
|Данные все еще обрабатываются.|Данные егрессед в API Azure для FHIR в пакетах (каждые 15 минут).  Возможно, данные все еще обрабатываются и требуется дополнительное время, чтобы данные сохранялись в API Azure для FHIR.|
|Преобразование JSON сопоставления устройств не настроено.|Настройка и сохранение согласования преобразования устройств JSON сопоставления.|
|Формат JSON сопоставления преобразования FHIR не настроен.|Настройка и сохранение согласования FHIR сопоставления преобразования JSON.|
|Сообщение устройства не содержит ожидаемое выражение, определенное в сопоставлении устройств.|Убедитесь, что выражения JsonPath, определенные в сопоставлении устройств, соответствуют маркерам, определенным в сообщении устройства.|
|Ресурс устройства не был создан в API Azure для FHIR (тип разрешения: только поиск) *.|Создайте допустимый ресурс устройства в API Azure для FHIR. Убедитесь, что ресурс устройства содержит идентификатор, соответствующий идентификатору устройства, указанному во входящем сообщении.|
|Ресурс пациента не был создан в API Azure для FHIR (тип разрешения: только Уточняющий запрос) *.|Создайте допустимый ресурс пациента в API Azure для FHIR.|
|Ссылка на Device. пациент не задана, или недопустимая ссылка (тип разрешения: только Уточняющий запрос) *.|Убедитесь, что ресурс устройства содержит действительную [ссылку](https://www.hl7.org/fhir/device-definitions.html#Device.patient) на ресурс пациента.| 

* [Краткое руководство. Развертывание соединителя Azure IOT (Предварительная версия) с помощью портал Azure](iot-fhir-portal-quickstart.md#create-new-azure-iot-connector-for-fhir-preview) для функционального описания соединителя Azure IOT для типов разрешения FHIR (например: Lookup или CREATE).

## <a name="creating-copies-of-the-azure-iot-connector-for-fhir-preview-conversion-mapping-json"></a>Создание копий соединителя Azure IoT для преобразования FHIR (Предварительная версия) JSON сопоставления
Копирование соединителя Azure IoT для файлов сопоставления FHIR может оказаться полезным для редактирования и архивации за пределами веб-сайта портал Azure.

При открытии запроса в службу поддержки для помощи в устранении неполадок необходимо предоставить службе технической поддержки Azure сведения о копировании файлов сопоставления.

> [!NOTE]
> В настоящее время JSON — это единственный поддерживаемый формат для файлов сопоставления устройств и FHIR.

> [!TIP]
> Узнайте больше о соединителе Azure IoT для FHIR [устройств и преобразования FHIR](https://docs.microsoft.com/azure/healthcare-apis/iot-mapping-templates) в формате JSON.

1. Выберите **"соединитель IOT (Предварительная версия)"** в левой нижней части панели мониторинга ресурсов API Azure для FHIR в разделе **"надстройки"** .

   :::image type="content" source="media/iot-troubleshoot/map-files-main-with-box.png" alt-text="Connector1 IoT" lightbox="media/iot-troubleshoot/map-files-main-with-box.png":::

2. Выберите **соединитель** , из которого будет скопировано преобразование JSON сопоставления преобразования.

   :::image type="content" source="media/iot-troubleshoot/map-files-select-connector-with-box.png" alt-text="Connector1 IoT" lightbox="media/iot-troubleshoot/map-files-select-connector-with-box.png":::

> [!NOTE]
> Этот процесс также может использоваться для копирования и сохранения содержимого JSON **"Configure FHIR Mapping"** .

3. Выберите **"настроить сопоставление устройств"** .

    :::image type="content" source="media/iot-troubleshoot/map-files-select-device-with-box.png" alt-text="Connector1 IoT" lightbox="media/iot-troubleshoot/map-files-select-device-with-box.png":::

4. Выберите содержимое JSON и выполните операцию копирования (например, нажмите клавиши Ctrl + c). 

   :::image type="content" source="media/iot-troubleshoot/map-files-select-device-json-with-box.png" alt-text="Connector1 IoT" lightbox="media/iot-troubleshoot/map-files-select-device-json-with-box.png":::

5. Выполните операцию вставки (например, выберите CTRL + v) в новый файл в редакторе (например, Visual Studio Code, Notepad) и сохраните файл с расширением *. JSON.

> [!TIP]
> Если вы откроете запрос в службу [технической поддержки Azure](https://azure.microsoft.com/support/create-ticket/) для соединителя Azure IOT для FHIR, обязательно включите копии формата JSON сопоставления преобразования, чтобы помочь в процессе устранения неполадок.

## <a name="next-steps"></a>Дальнейшие шаги

Ознакомьтесь с часто задаваемыми вопросами о соединителе Azure IoT для FHIR.

>[!div class="nextstepaction"]
>[Вопросы и ответы о соединителе Azure IoT для FHIR](fhir-faq.md)

*На портале Azure соединитель "Azure IoT для FHIR" называется соединителем IoT (предварительная версия).

FHIR — это зарегистрированная торговая марка организации HL7, которая используется с разрешения HL7.
