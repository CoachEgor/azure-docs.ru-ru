---
title: Поиск расположений с помощью Azure Maps Служба поиска | Карты Microsoft Azure
description: В этой статье вы узнаете, как найти расположение с помощью Microsoft Azure карт Служба поиска.
author: walsehgal
ms.author: v-musehg
ms.date: 04/05/2019
ms.topic: conceptual
ms.service: azure-maps
services: azure-maps
manager: philmea
ms.openlocfilehash: 59d58b9ecb42a7329df6c91e0a646c557d78a415
ms.sourcegitcommit: f9601bbccddfccddb6f577d6febf7b2b12988911
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2020
ms.locfileid: "75911457"
---
# <a name="find-an-address-using-the-azure-maps-search-service"></a>Поиск адреса с помощью службы поиска Azure Maps

Служба поиска Maps — это набор REST API для разработчиков. Она позволяет выполнять поиск адресов, мест, точек интереса, деловых справочников и других географических данных. Служба присваивает значения широты и долготы определенному адресу, пересекающей улице, географической особенности или достопримечательности. Значения широты и долготы, возвращенные службой поиска, можно использовать в качестве параметров в других службах "Карты", например службах отслеживания маршрутов и движения транспорта.

В этой статье вы узнаете, как:

* Поиск адреса с помощью [API нечеткого поиска](https://docs.microsoft.com/rest/api/maps/search/getsearchfuzzy)
* Поиск адреса вместе со свойствами и координатами
* Сделать [обратный поиск адреса](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressreverse) для поиска почтового адреса
* Поиск перекрестной улицы с помощью [интерфейса поиска обратный Крестный адрес API](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressreversecrossstreet)

## <a name="prerequisites"></a>Технические условия

Чтобы выполнять вызовы к API службы "Карты", вам потребуется учетная запись и ключ службы "Карты". Следуйте инструкциям в разделе [Создание учетной записи](quick-demo-map-app.md#create-an-account-with-azure-maps) для создания подписки на учетную запись Azure Maps и выполните действия, описанные в разделе [Получение первичного ключа](quick-demo-map-app.md#get-the-primary-key-for-your-account) , чтобы получить первичный ключ для вашей учетной записи. Дополнительные сведения о проверке подлинности в Azure Maps см. в разделе [Управление проверкой подлинности в Azure Maps](./how-to-manage-authentication.md).

В этой статье для создания вызовов REST используется [приложение Postman](https://www.getpostman.com/apps). Вы можете использовать любую среду разработки API.

## <a name="using-fuzzy-search"></a>Использование поиска нечетких соответствий

API-интерфейс по умолчанию для службы поиска — [поиск нечетких соответствий](https://docs.microsoft.com/rest/api/maps/search/getsearchfuzzy). Это удобно, если вы не знаете, какие данные вводят пользователи в запросе. API-интерфейс объединяет поиск POI и геокодирование в канонический однострочный поиск. Например, API-интерфейс может обрабатывать входные данные любой комбинации адреса или токена POI. Ему также можно назначить взвешенное значение с помощью контекстно-зависимой позиции (пары широты или долготы), полностью ограничить с помощью координат и радиуса, а также выполнить без точки привязки геосмещения.

Большинство запросов службы поиска по умолчанию имеют значение `maxFuzzyLevel=1` для улучшения производительности и уменьшения количества необычных результатов. Это значение по умолчанию можно переопределить в зависимости от запроса, используя параметр запроса `maxFuzzyLevel=2` или `3`.

### <a name="search-for-an-address-using-fuzzy-search"></a>Поиск адреса с помощью поиска нечетких соответствий

1. Откройте приложение Postman, в раскрывающемся списке New (Создать) щелкните Create New (Создать) и выберите **запрос GET**. Введите название запроса **поиска нечетких соответствий**, выберите коллекцию или папку, в которую нужно его сохранить, и щелкните **Save** (Сохранить).

2. На вкладке Builder (Конструктор) выберите метод HTTP **GET** и введите URL-адрес запроса для конечной точки API.

    ![Поиск нечетких соответствий](./media/how-to-search-for-address/fuzzy_search_url.png)

    | Параметр | Рекомендуемое значение |
    |---------------|------------------------------------------------|
    | Метод HTTP | GET |
    | Request URL (URL-адрес запроса) | [https://atlas.microsoft.com/search/fuzzy/json?](https://atlas.microsoft.com/search/fuzzy/json?) |
    | Авторизация | No Auth (Без авторизации) |

    Атрибут **json** в URL-адресе пути определяет формат ответа. В этой статье json применяется для простоты использования и удобочитаемости. Доступные форматы ответа в определении **метода Get поиска нечетких соответствий** можно найти в [справочнике по функциональным API службы Maps](https://docs.microsoft.com/rest/api/maps/search/getsearchfuzzy).

3. Щелкните **Params** (Параметры) и введите следующие пары "ключ — значение", которые будут использоваться в качестве параметров запроса или пути в URL-адресе запроса:

    ![Поиск нечетких соответствий](./media/how-to-search-for-address/fuzzy_search_params.png)

    | Ключ | Значение |
    |------------------|-------------------------|
    | api-version | 1.0 |
    | subscription-key | \<Ваш ключ службы "Карты Azure"\> |
    | query | пицца |

4. Щелкните **Send** (Отправить), а затем просмотрите текст ответа.

    Неоднозначная строка запроса "пицца" возвратила в результате [10 точек интереса](https://docs.microsoft.com/rest/api/maps/search/getsearchpoi#searchpoiresponse) (POI) с категориями, удовлетворяющими запросу "пицца" и "ресторан". Каждый результат возвращает адрес улицы, значения широты и долготы, окно просмотра и точки входа для расположения.
  
    Результаты для этого запроса различны и не связаны с конкретным эталонным расположением. Вы можете использовать параметр **Country** , чтобы указать только страны или регионы, для которых приложение нуждается в покрытии, так как поведение по умолчанию заключается в поиске по всему миру, потенциально возвращая ненужные результаты.

5. Добавьте следующую пару "ключ-значение" в раздел **Параметры** и нажмите кнопку **Отправить**:

    | Ключ | Значение |
    |------------------|-------------------------|
    | countrySet | США |
  
    Теперь результаты ограничены кодом страны и запрос возвращает адреса пиццерий в США.
  
    Для получения результатов для указанного места можно запрашивать точку интереса и использовать возвращаемое значение широты и долготы в вызове службы поиска нечетких соответствий. В этом случае служба поиска использовалась для возврата местоположения Space Needle (Сиэтл) и применялись значения широты и долготы, чтобы ориентировать поиск.
  
6. В разделе Params (Параметры) введите следующие пары "ключ — значение" и щелкните **Send** (Отправить).

    ![Поиск нечетких соответствий](./media/how-to-search-for-address/fuzzy_search_latlon.png)
  
    | Ключ | Значение |
    |-----|------------|
    | lat | 47,620525 |
    | lon | –122,349274 |

## <a name="search-for-address-properties-and-coordinates"></a>Поиск координат и свойств адреса

Вы можете указать полный почтовый адрес или его часть в API поиска адреса и получить ответ с подробными сведениями о свойствах адреса (например, муниципалитет или подразделение, а также позиционные значения широты и долготы).

1. В раскрывающемся списке Postman щелкните **New Request** (Создать запрос)  | , **GET request** (Запрос GET) и назовите его **Поиск адреса**.
2. На вкладке Builder (Конструктор) выберите метод HTTP **GET**, введите URL-адрес запроса для конечной точки API и выберите протокол авторизации, если он используется.

    ![Поиск адреса](./media/how-to-search-for-address/address_search_url.png)
  
    | Параметр | Рекомендуемое значение |
    |---------------|------------------------------------------------|
    | Метод HTTP | GET |
    | Request URL (URL-адрес запроса) | [https://atlas.microsoft.com/search/address/json?](https://atlas.microsoft.com/search/address/json?) |
    | Авторизация | No Auth (Без авторизации) |

3. Щелкните **Params** (Параметры) и введите следующие пары "ключ — значение", которые будут использоваться в качестве параметров запроса или пути в URL-адресе запроса:
  
    ![Поиск адреса](./media/how-to-search-for-address/address_search_params.png)
  
    | Ключ | Значение |
    |------------------|-------------------------|
    | api-version | 1.0 |
    | subscription-key | \<Ваш ключ службы "Карты Azure"\> |
    | query | Броад Стрит 400, Сиэтл, штат Вашингтон, 98109 |
  
4. Щелкните **Send** (Отправить), а затем просмотрите текст ответа.
  
    В этом случае указан запрос с полным адресом и получен один результат в тексте ответа.
  
5. В разделе Params (Параметры) замените строку запроса следующим значением.
    ```plaintext
        400 Broad, Seattle
    ```

6. Добавьте следующую пару "ключ-значение" в раздел **Параметры** и нажмите кнопку **Отправить**:

    | Ключ | Значение |
    |-----|------------|
    | typeahead | true |

    Флажок **typeahead** сообщает API поиска адреса, что нужно обработать запрос как частичные входные данные и вернуть массив прогнозных значений.

## <a name="search-for-a-street-address-using-reverse-address-search"></a>Поиск улицы и номера дома с использованием обратного поиска адреса

1. В Postman щелкните **New Request** (Создать запрос) | **GET request** (Запрос GET). Назовите его **Обратный поиск адреса**.

2. На вкладке Builder (Конструктор) выберите метод HTTP **GET** и введите URL-адрес запроса для конечной точки API.
  
    ![URL-адрес обратного поиска адреса](./media/how-to-search-for-address/reverse_address_search_url.png)
  
    | Параметр | Рекомендуемое значение |
    |---------------|------------------------------------------------|
    | Метод HTTP | GET |
    | Request URL (URL-адрес запроса) | [https://atlas.microsoft.com/search/address/reverse/json?](https://atlas.microsoft.com/search/address/reverse/json?) |
    | Авторизация | No Auth (Без авторизации) |
  
3. Щелкните **Params** (Параметры) и введите следующие пары "ключ — значение", которые будут использоваться в качестве параметров запроса или пути в URL-адресе запроса:
  
    ![Параметры обратного поиска адреса](./media/how-to-search-for-address/reverse_address_search_params.png)
  
    | Ключ | Значение |
    |------------------|-------------------------|
    | api-version | 1.0 |
    | subscription-key | \<Ваш ключ службы "Карты Azure"\> |
    | query | 47,591180, –122,332700 |
  
4. Щелкните **Send** (Отправить), а затем просмотрите текст ответа.

    Ответ включает основные сведения об адресе Safeco Field.
  
5. Добавьте следующую пару "ключ-значение" в раздел **Параметры** и нажмите кнопку **Отправить**:

    | Ключ | Значение |
    |-----|------------|
    | number | true |

    Если с запросом отправлен параметр [number](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressreverse), ответ может включать в себя сведения о стороне улицы (левая или правая), а также о позиции смещения для этого номера.
  
6. Добавьте следующую пару "ключ-значение" в раздел **Параметры** и нажмите кнопку **Отправить**:

    | Ключ | Значение |
    |-----|------------|
    | returnSpeedLimit | true |
  
    Если задан параметр запроса [returnSpeedLimit](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressreverse), в ответе возвращаются сведения об установленном ограничении скорости.

7. Добавьте следующую пару "ключ-значение" в раздел **Параметры** и нажмите кнопку **Отправить**:

    | Ключ | Значение |
    |-----|------------|
    | returnRoadUse | true |

    Если задан параметр запроса [returnRoadUse](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressreverse), в ответе возвращается массив использования пути для обратных геокодов на уровне улицы.

8. Добавьте следующую пару "ключ-значение" в раздел **Параметры** и нажмите кнопку **Отправить**:

    | Ключ | Значение |
    |-----|------------|
    | roadUse | true |

    Вы можете ограничить запрос обратного геокода определенным типом пути, используя параметр запроса [roadUse](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressreverse).
  
## <a name="search-for-the-cross-street-using-reverse-address-cross-street-search"></a>Поиск пересекающей улицы с использованием обратного поиска адреса для пересекающей улицы

1. В Postman щелкните **New Request** (Создать запрос) | **GET request** (Запрос GET) и назовите его **Обратный поиск адреса для пересекающей улицы**.

2. На вкладке Builder (Конструктор) выберите метод HTTP **GET** и введите URL-адрес запроса для конечной точки API.
  
    ![Обратный поиск адреса для пересекающей улицы](./media/how-to-search-for-address/reverse_address_search_url.png)
  
    | Параметр | Рекомендуемое значение |
    |---------------|------------------------------------------------|
    | Метод HTTP | GET |
    | Request URL (URL-адрес запроса) | [https://atlas.microsoft.com/search/address/reverse/crossstreet/json?](https://atlas.microsoft.com/search/address/reverse/crossstreet/json?) |
    | Авторизация | No Auth (Без авторизации) |
  
3. Щелкните **Params** (Параметры) и введите следующие пары "ключ — значение", которые будут использоваться в качестве параметров запроса или пути в URL-адресе запроса:
  
    | Ключ | Значение |
    |------------------|-------------------------|
    | api-version | 1.0 |
    | subscription-key | \<Ваш ключ службы "Карты Azure"\> |
    | query | 47,591180, –122,332700 |
  
4. Щелкните **Send** (Отправить), а затем просмотрите текст ответа.

## <a name="next-steps"></a>Дальнейшие действия

- Ознакомьтесь с документацией по API [службы поиска Azure Maps](https://docs.microsoft.com/rest/api/maps/search).
