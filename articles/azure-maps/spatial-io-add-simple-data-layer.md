---
title: Добавить простой слой данных Карты Microsoft Azure
description: Узнайте, как добавить простой слой данных с помощью модуля Spatial IO, предоставленного Azure Maps Web SDK.
author: philmea
ms.author: philmea
ms.date: 02/29/2020
ms.topic: conceptual
ms.service: azure-maps
services: azure-maps
manager: philmea
ms.openlocfilehash: 7671d07a468a9f67a4851ec828fe18896d7a6c66
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80334276"
---
# <a name="add-a-simple-data-layer"></a>Добавление простого слоя данных

Пространственный модуль IO обеспечивает `SimpleDataLayer` класс. Этот класс упрощает визуализацию стилизованных объектов на карте. Он может даже визуализировать наборы данных, которые имеют свойства стиля и наборы данных, которые содержат смешанные типы геометрии. Простой слой данных достигает этой функциональности, обернув несколько слоев рендеринга и используя выражения стиля. Выражения стиля ищут общие свойства стиля функций внутри этих завернутых слоев. `atlas.io.read` Функция и `atlas.io.write` функция используют эти свойства для чтения и записи стилей в поддерживаемом формате файла. После добавления свойств в поддерживаемый формат файла файл может быть использован для различных целей. Например, файл может использоваться для отображения стилизованных объектов на карте.

В дополнение к функциям `SimpleDataLayer` укладки, предоставляет встроенную функцию всплывающего с всплывающими шаблонами. Всплывающее окно отображается при нажатии функции. Функция всплывающих данных по умолчанию может быть отключена при желании. Этот слой также поддерживает кластерные данные. При нажатии на кластер карта будет увеличиватьмасштаб кластер и расширять его в отдельные точки и подкластеры.

Класс `SimpleDataLayer` предназначен для использования на больших наборах данных со многими типами геометрии и множеством стилей, применяемых к объектам. При использовании этот класс добавляет накладные расходы из шести слоев, содержащих выражения стиля. Таким образом, бывают случаи, когда более эффективно использовать слои рендеринга ядра. Например, используйте основной слой для визуализации нескольких типов геометрии и нескольких стилей на объекте

## <a name="use-a-simple-data-layer"></a>Используйте простой слой данных

Класс `SimpleDataLayer` используется как другие слои рендеринга. В приведенном ниже коде показано, как использовать простой слой данных на карте:

```javascript
//Create a data source and add it to the map.
var datasource = new atlas.source.DataSource();
map.sources.add(datasource);

//Add a simple data layer for rendering data.
var layer = new atlas.layer.SimpleDataLayer(datasource);
map.layers.add(layer);
```

Добавление функций в источник данных. Затем простой слой данных выяснит, как лучше всего визуализировать объекты. Стили для отдельных функций могут быть установлены в качестве свойств на функции. Следующий код показывает функцию точки `color` GeoJSON `red`с набором свойств. 

```json
{
    "type": "Feature",
    "geometry": {
        "type": "Point",
        "coordinates": [0, 0]
    },
    "properties": {
        "color": "red"
    }
}
```

Следующий код отображает вышеупомянутую точку функции с помощью простого слоя данных. 

<br/>

<iframe height="500" style="width: 100%;" scrolling="no" title="Используйте простой слой данных" src="//codepen.io/azuremaps/embed/zYGzpQV/?height=500&theme-id=0&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true"> См. Ручку <a href='https://codepen.io/azuremaps/pen/zYGzpQV/'>Используйте простой слой данных</a> по Картам Azure ()<a href='https://codepen.io/azuremaps'>@azuremaps</a>на <a href='https://codepen.io'>CodePen</a>.
</iframe>

Реальная сила простого слоя данных приходит тогда, когда:

- В источнике данных есть несколько различных типов функций; Или
- Функции в наборе данных имеют несколько свойств стиля, индивидуально установленных на них; Или
- Вы не уверены, что набор данных точно содержит.

Например, при разборе каналов данных XML вы можете не знать точных стилей и типов геометрии объектов. Следующий пример показывает мощность простого слоя данных, отображая особенности файла KML. Он также демонстрирует различные варианты, которые предоставляет простой класс слоя данных.

<br/>

<iframe height="700" style="width: 100%;" scrolling="no" title="Простые параметры слоя данных" src="//codepen.io/azuremaps/embed/gOpRXgy/?height=700&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true"> Ознакомьтесь с <a href='https://codepen.io/azuremaps/pen/gOpRXgy/'>вариантами уровня данных</a> Pen Simple по картам Azure Maps ()<a href='https://codepen.io/azuremaps'>@azuremaps</a>на <a href='https://codepen.io'>CodePen.</a>
</iframe>


> [!NOTE]
> Этот простой слой данных использует класс [всплывающих шаблонов](map-add-popup.md#add-popup-templates-to-the-map) для отображения шаров KML или свойств свойств в качестве таблицы. По умолчанию все содержимое, отображаемые во всплывающем окне, будет засажено в песочницу внутри iframe в качестве функции безопасности. Однако существуют ограничения:
>
> - Все скрипты, формы, блокировка указателей и функция верхней навигации отключены. Ссылки могут открываться в новой вкладке при нажатии. 
> - Старые браузеры, не `srcdoc` поддерживающие параметр на iframes, будут ограничены рендерингом небольшого количества содержимого.
> 
> Если вы доверяете загрузке данных во всплывающие данные и потенциально хотите, чтобы эти скрипты, загруженные во всплывающие данные, могли получить доступ к вашему приложению, вы можете отключить это, установив опцию всплывающих шаблонов `sandboxContent` на ложную. 

## <a name="default-supported-style-properties"></a>Свойства стиля, поддерживаемые по умолчанию

Как упоминалось ранее, простой слой данных обертывает несколько слоев рендеринга ядра: пузырь, символ, линия, полигон и экструдированный полигон. Затем он использует выражения для поиска действительных свойств стиля на отдельных объектах.

Свойства стиля Azure Maps и GitHub являются двумя основными наборами поддерживаемых имен свойств. Большинство имен свойств различных параметров слоя лазурных карт поддерживаются как свойства стилей объектов в простом слое данных. Выражения были добавлены в некоторые параметры слоя для поддержки имен свойств стиля, которые обычно используются GitHub. Эти имена свойств определяются [поддержкой карты GeoJSON GitHub](https://help.github.com/en/github/managing-files-in-a-repository/mapping-geojson-files-on-github)и используются для стиля файлов GeoJSON, которые хранятся и отображаются в платформе. Все свойства укладки GitHub поддерживаются в простом слое `marker-symbol` данных, за исключением свойств укладки.

Если читатель столкнется с менее распространенным свойством стиля, он преобразует его в ближайшее свойство в стиле Azure Maps. Кроме того, выражения стиля по умолчанию могут `getLayers` быть перекрыты с помощью функции простого слоя данных и обновления параметров на любом из уровней.

Следующие разделы предоставляют подробную информацию о свойствах стиля по умолчанию, которые поддерживаются простым слоем данных. Порядок названий поддерживаемого имущества также является приоритетом собственности. Если для одного и того же варианта слоя определены два свойства стиля, то первый в списке имеет более высокий приоритет.

### <a name="bubble-layer-style-properties"></a>Свойства слоя пузыря

Если функция является `Point` `MultiPoint`или, и функция не имеет `image` свойство, которое будет использоваться в качестве пользовательского значка для визуализации точки в качестве символа, то функция будет отображаться с `BubbleLayer`.

| Вариант слоя | Имя поддерживаемого свойства (ы) | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `color` | `color`, `marker-color` | `'#1A73AA'` |
| `radius` | `size`<sup>1</sup> `marker-size` <sup>2</sup>, `scale`2 , <sup>1</sup> | `8` |
| `strokeColor` | `strokeColor`, `stroke` | `'#FFFFFF'` |

\[1\] `size` Значения `scale` и значения считаются масштабированными значениями, и они будут умножены на`8`

\[2\] Если указан `marker-size` параметр GitHub, то для радиуса будут использоваться следующие значения.

| Размер маркера | Радиус. |
|-------------|--------|
| `small`     | `6`    |
| `medium`    | `8`    |
| `large`     | `12`   |

Кластеры также визуализированы с помощью слоя пузыря. По умолчанию радиус кластера установлен `16`на . Цвет кластера варьируется в зависимости от количества точек в кластере, как показано ниже:

| Вопрос о точках | Color    |
|-------------|----------|
| &gt;100 евро   | `red`    |
| &gt;No 10    | `yellow` |
| &lt;10     | `green`  |

### <a name="symbol-style-properties"></a>Свойства стиля символа

Если функция является `Point` `MultiPoint`или, и функция и `image` имеет свойство, которое будет использоваться в качестве пользовательского значка для `SymbolLayer`визуализации точки в качестве символа, то функция будет отображаться с .

| Вариант слоя | Имя поддерживаемого свойства (ы) | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `image` | `image` | ``none`` |
| `size` | `size`, `marker-size` <sup>1</sup> | `1` |
| `rotation` | `rotation` | `0` |
| `offset` | `offset` | `[0, 0]` |
| `anchor` | `anchor` | `'bottom'` |

\[1\] Если указан `marker-size` параметр GitHub, то для опции размера значка будут использованы следующие значения.

| Размер маркера | Размер символов |
|-------------|-------------|
| `small`     | `0.5`       |
| `medium`    | `1`         |
| `large`     | `2`         |

Если объект является кластером, `point_count_abbreviated` свойство будет отображаться как текстовая метка. Изображение не будет отображаться.

### <a name="line-style-properties"></a>Свойства стиля линии

Если функция `LineString`является `MultiLineString`, `Polygon`, `MultiPolygon`или , то функция будет `LineLayer`отображаться с .

| Вариант слоя | Имя поддерживаемого свойства (ы) | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `strokeColor` | `strokeColor`, `stroke` | `'#1E90FF'` |
| `strokeWidth` | `strokeWidth`, `stroke-width`, `stroke-thickness` | `3` |
| `strokeOpacity` | `strokeOpacity`, `stroke-opacity` | `1` |

### <a name="polygon-style-properties"></a>Свойства стиля полигона

Если функция является `Polygon` или, `MultiPolygon`и функция либо не `height` имеет свойства `height` или свойство равна нулю, `PolygonLayer`то функция будет отображаться с .

| Вариант слоя | Имя поддерживаемого свойства (ы) | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `fillColor` | `fillColor`, `fill` | `'#1E90FF'` |
| `fillOpacity` | `fillOpacity`, '`fill-opacity` | `0.5` |

### <a name="extruded-polygon-style-properties"></a>Экструдированные свойства в стиле полигона

Если функция является `Polygon` или `MultiPolygon`а, `height` и имеет свойство с значением больше, чем `PolygonExtrusionLayer`0, функция будет отображаться с .

| Вариант слоя | Имя поддерживаемого свойства (ы) | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `base` | `base` | `0` |
| `fillColor` | `fillColor`, `fill` | `'#1E90FF'` |
| `height` | `height` | `0` |

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о классах и методах, которые используются в этой статье:

> [!div class="nextstepaction"]
> [SimpleDataLayer](https://docs.microsoft.com/javascript/api/azure-maps-spatial-io/atlas.layer.simpledatalayer)

> [!div class="nextstepaction"]
> [SimpleDataLayerOptions](https://docs.microsoft.com/javascript/api/azure-maps-spatial-io/atlas.simpledatalayeroptions)

Дополнительные примеры кода для добавления в карты см. в следующих статьях:

> [!div class="nextstepaction"]
> [Чтение и запись пространственных данных](spatial-io-read-write-spatial-data.md)

> [!div class="nextstepaction"]
> [Добавление слоя карты OGC](spatial-io-add-ogc-map-layer.md)

> [!div class="nextstepaction"]
> [Подключение к службе WFS](spatial-io-connect-wfs-service.md)

> [!div class="nextstepaction"]
> [Кредитное использование основных операций](spatial-io-core-operations.md)

> [!div class="nextstepaction"]
> [Детали формата поддерживаемых данных](spatial-io-supported-data-format-details.md)
