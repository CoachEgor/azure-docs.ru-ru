---
title: Добавление простого уровня данных | Карты Microsoft Azure
description: Узнайте, как добавить простой уровень данных с помощью модуля пространственных операций ввода-вывода, предоставляемого Azure Maps Web SDK.
author: farah-alyasari
ms.author: v-faalya
ms.date: 02/29/2020
ms.topic: conceptual
ms.service: azure-maps
services: azure-maps
manager: philmea
ms.openlocfilehash: 3fa54e3227496c11fcafc2f42e980daa5c716365
ms.sourcegitcommit: 509b39e73b5cbf670c8d231b4af1e6cfafa82e5a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2020
ms.locfileid: "78370990"
---
# <a name="add-a-simple-data-layer"></a>Добавление простого уровня данных

Модуль пространственных ввода-вывода предоставляет класс `SimpleDataLayer`. Этот класс упрощает визуализацию на карте функций, имеющих стиль. Он может даже визуализировать наборы данных, имеющие свойства стиля и наборы данных, содержащие смешанные геометрические типы. Простой уровень данных достигает этой функции путем переноса нескольких слоев отрисовки и использования выражений стилей. Выражения стиля выполняют поиск общих свойств стиля компонентов внутри этих упакованных слоев. Функция `atlas.io.read` и функция `atlas.io.write` используют эти свойства для чтения и записи стилей в поддерживаемом формате файла. После добавления свойств в поддерживаемый формат файла файл можно использовать для различных целей. Например, файл можно использовать для отображения на карте функций, имеющих стиль.

В дополнение к возможностям стилизации `SimpleDataLayer` предоставляет встроенную функцию всплывающего окна с шаблоном всплывающего окна. Всплывающее окно отображается при щелчке компонента. При необходимости можно отключить функцию всплывающего окна по умолчанию. Этот уровень также поддерживает кластеризованные данные. При щелчке кластера на карте будет увеличен масштаб кластера и разворачиваться в отдельные точки и подкластеры.

Класс `SimpleDataLayer` предназначен для использования в больших наборах данных с множеством геометрических типов и многими стилями, применяемыми к функциям. При использовании этого класса добавляются дополнительные затраты на шесть слоев, содержащих выражения стилей. Поэтому существуют случаи, когда более эффективно использовать основные уровни подготовки к просмотру. Например, используйте уровень ядра для отображения нескольких геометрических типов и нескольких стилей в функции.

## <a name="default-supported-style-properties"></a>Поддерживаемые по умолчанию свойства стиля

Как упоминалось ранее, простой уровень данных заключает в оболочку несколько основных слоев подготовки к просмотру: пузырьковой, символ, линия, многоугольник и вытянутый многоугольник. Затем в нем используются выражения для поиска допустимых свойств стиля для отдельных компонентов.

Свойства стиля Azure Maps и GitHub — это два основных набора поддерживаемых имен свойств. Большинство имен свойств различных параметров уровня карты Azure поддерживаются в качестве свойств стиля функций на простом уровне данных. В некоторые параметры слоя были добавлены выражения для поддержки имен свойств стиля, которые обычно используются в GitHub. Эти имена свойств определяются [поддержкой карт геоjson](https://help.github.com/en/github/managing-files-in-a-repository/mapping-geojson-files-on-github)и используются для стиля геофайлического формата JSON, которые хранятся и подготавливаются к работе в пределах платформы. Все свойства стилизации GitHub поддерживаются на простом уровне данных, за исключением свойств стиля `marker-symbol`.

Если средство чтения встречает менее общее свойство стиля, оно преобразует его в ближайшее свойство стиля Azure Maps. Кроме того, выражения стиля по умолчанию можно переопределить с помощью функции `getLayers` простого уровня данных и обновления параметров на любом из слоев.

В следующем разделе приводятся подробные сведения о свойствах стиля по умолчанию, поддерживаемых простым уровнем данных. Порядок, в котором поддерживается имя свойства, также является приоритетом свойства. Если для одного и того же параметра слоя определены два свойства стиля, то первый из них имеет более высокий приоритет.

## <a name="simple-data-layer-options"></a>Параметры простого уровня данных

### <a name="bubble-layer-style-properties"></a>Свойства стиля пузырькового слоя

Если компонент является `Point` или `MultiPoint`, а у функции нет свойства `image`, которое будет использоваться в качестве пользовательского значка для отрисовки точки как символа, то эта функция будет подготовлена к просмотру с `BubbleLayer`.

| Параметр Layer | Поддерживаемые имена свойств | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `color` | `color`, `marker-color` | `'#1A73AA'` |
| `radius` | `size`<sup>1</sup>, `marker-size`<sup>2</sup>, `scale`<sup>1</sup> | `8` |
| `strokeColor` | `strokeColor`, `stroke` | `'#FFFFFF'` |

\[1\] значения `size` и `scale` считаются скалярными значениями, и они будут умножены на `8`

\[2\] если указан параметр `marker-size` GitHub, для радиуса будут использоваться следующие значения.

| Размер маркера | Радиус. |
|-------------|--------|
| `small`     | `6`    |
| `medium`    | `8`    |
| `large`     | `12`   |

Кластеры также подготавливаются с помощью пузырькового слоя. По умолчанию для радиуса кластера задано значение `16`. Цвет кластера зависит от числа точек в кластере, как определено ниже.

| число точек | Color    |
|-------------|----------|
| &gt;= 100   | `red`    |
| &gt;= 10    | `yellow` |
| &lt; 10     | `green`  |

### <a name="symbol-style-properties"></a>Свойства стиля символов

Если компонент является `Point` или `MultiPoint`, а функция и имеет свойство `image`, которое будет использоваться в качестве пользовательского значка для отрисовки точки как символа, то эта функция будет подготовлена к просмотру с `SymbolLayer`.

| Параметр Layer | Поддерживаемые имена свойств | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `image` | `image` | ``none`` |
| `size` | `size`, `marker-size`<sup>1</sup> | `1` |
| `rotation` | `rotation` | `0` |
| `offset` | `offset` | `[0, 0]` |
| `anchor` | `anchor` | `'bottom'` |

\[1\] если указан параметр `marker-size` GitHub, то для параметра размер значка будут использоваться следующие значения.

| Размер маркера | Размер символов |
|-------------|-------------|
| `small`     | `0.5`       |
| `medium`    | `1`         |
| `large`     | `2`         |

Если компонент Point является кластером, свойство `point_count_abbreviated` будет отображаться как текстовая метка. Изображение не будет подготовлено к просмотру.

### <a name="line-style-properties"></a>Свойства стиля линии

Если компонент является `LineString`, `MultiLineString`, `Polygon`или `MultiPolygon`, то эта функция будет подготовлена к просмотру с помощью `LineLayer`.

| Параметр Layer | Поддерживаемые имена свойств | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `strokeColor` | `strokeColor`, `stroke` | `'#1E90FF'` |
| `strokeWidth` | `strokeWidth`, `stroke-width`, `stroke-thickness` | `3` |
| `strokeOpacity` | `strokeOpacity`, `stroke-opacity` | `1` |

### <a name="polygon-style-properties"></a>Свойства стиля многоугольника

Если компонент является `Polygon` или `MultiPolygon`, а компонент не имеет свойства `height` или свойство `height` равно нулю, то функция будет подготовлена к просмотру с `PolygonLayer`.

| Параметр Layer | Поддерживаемые имена свойств | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `fillColor` | `fillColor`, `fill` | `'#1E90FF'` |
| `fillOpacity` | `fillOpacity`, "`fill-opacity` | `0.5` |

### <a name="extruded-polygon-style-properties"></a>Свойства стиля вытянутого многоугольника

Если компонент является `Polygon` или `MultiPolygon`и имеет свойство `height` со значением больше 0, функция будет подготовлена к просмотру с `PolygonExtrusionLayer`.

| Параметр Layer | Поддерживаемые имена свойств | Значение по умолчанию |
|--------------|----------------------------|---------------|
| `base` | `base` | `0` |
| `fillColor` | `fillColor`, `fill` | `'#1E90FF'` |
| `height` | `height` | `0` |

## <a name="use-a-simple-data-layer"></a>Использование простого уровня данных

Используется класс `SimpleDataLayer`, как и другие слои подготовки отчетов. В приведенном ниже коде показано, как использовать простой уровень данных на карте.

```javascript
//Create a data source and add it to the map.
var datasource = new atlas.source.DataSource();
map.sources.add(datasource);

//Add a simple data layer for rendering data.
var layer = new atlas.layer.SimpleDataLayer(datasource);
map.layers.add(layer);
```

Добавление компонентов в источник данных. Затем на простом уровне данных будет показано, как лучше отображать функции. Стили отдельных компонентов можно задать в качестве свойств компонента. В следующем коде показана функция геообъектной точки JSON со свойством `color`, для которого задано значение `red`. 

```json
{
    "type": "Feature",
    "geometry": {
        "type": "Point",
        "coordinates": [0, 0]
    },
    "properties": {
        "color": "red"
    }
}
```

Следующий код визуализирует функцию выше, используя простой уровень данных. 

<br/>

<iframe height="500" style="width: 100%;" scrolling="no" title="Использование простого уровня данных" src="//codepen.io/azuremaps/embed/zYGzpQV/?height=500&theme-id=0&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true"> Посмотрите, что перо <a href='https://codepen.io/azuremaps/pen/zYGzpQV/'>использует простой уровень данных</a> , Azure Maps (<a href='https://codepen.io/azuremaps'>@azuremaps</a>) на <a href='https://codepen.io'>CodePen</a>.
</iframe>

Реальная мощь простого уровня данных приступает в следующих случаях:

- В источнике данных существует несколько различных типов функций. ни
- Функции в наборе данных имеют несколько свойств стиля, установленных для них по отдельности. ни
- Неизвестно, что именно содержит набор данных.

Например, при синтаксическом анализе веб-каналов данных XML могут быть незнакомы точные стили и типы геометрических функций. В следующем примере показана степень простого уровня данных путем визуализации функций КМЛ-файла. В нем также демонстрируются различные параметры, предоставляемые классом простого уровня данных.

<br/>

<iframe height="700" style="width: 100%;" scrolling="no" title="Параметры простого уровня данных" src="//codepen.io/azuremaps/embed/gOpRXgy/?height=700&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true"> Сведения о <a href='https://codepen.io/azuremaps/pen/gOpRXgy/'>параметрах простого уровня данных</a> с помощью пера Azure Maps (<a href='https://codepen.io/azuremaps'>@azuremaps</a>) в <a href='https://codepen.io'>CodePen</a>.
</iframe>


## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о классах и методах, которые используются в этой статье:

> [!div class="nextstepaction"]
> [симпледаталайер](https://docs.microsoft.com/javascript/api/azure-maps-spatial-io/atlas.layer.simpledatalayer)

> [!div class="nextstepaction"]
> [симпледаталайероптионс](https://docs.microsoft.com/javascript/api/azure-maps-spatial-io/atlas.simpledatalayeroptions)

Дополнительные примеры кода для добавления в карты см. в следующих статьях:

> [!div class="nextstepaction"]
> [Чтение и запись пространственных данных](spatial-io-read-write-spatial-data.md)

> [!div class="nextstepaction"]
> [Добавление слоя OGC Map](spatial-io-add-ogc-map-layer.md)

> [!div class="nextstepaction"]
> [Подключение к службе ВФС](spatial-io-connect-wfs-service.md)

> [!div class="nextstepaction"]
> [Использование основных операций](spatial-io-core-operations.md)

> [!div class="nextstepaction"]
> [Сведения о поддерживаемых форматах данных](spatial-io-supported-data-format-details.md)
