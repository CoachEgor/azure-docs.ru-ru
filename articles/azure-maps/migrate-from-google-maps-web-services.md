---
title: Перенос веб-служб из Google Maps | Документация Майкрософт
description: Руководство по переносу веб-служб из Google Maps в Microsoft Azure Maps.
author: rbrundritt
ms.author: richbrun
ms.date: 12/17/2019
ms.topic: conceptual
ms.service: azure-maps
services: azure-maps
manager: cpendle
ms.custom: ''
ms.openlocfilehash: 8fc3270d15f77576ff353a110d8a3a9a17c7144d
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/25/2019
ms.locfileid: "75480025"
---
# <a name="migrate-web-service-from-google-maps"></a>Перенос веб-службы из Google Maps

Azure и карты Google предоставляют доступ к пространственным API через веб-службы RESTFUL. Интерфейсы API для этих платформ выполняют аналогичные функции, но используют разные соглашения об именовании и объекты ответов.

В следующей таблице приведены API-интерфейсы Azure Maps службы, которые предоставляют аналогичные функции для перечисленных API-интерфейсов службы Google Maps.

| API службы Google Maps | API службы Azure Maps                                                                      |
|-------------------------|---------------------------------------------------------------------------------------------|
| Directions              | [Route](https://docs.microsoft.com/rest/api/maps/route)                               |
| Матрица расстояний         | [Матрица маршрута](https://docs.microsoft.com/rest/api/maps/route/postroutematrixpreview) |
| Геокодирование               | [Поиск](https://docs.microsoft.com/rest/api/maps/search)                             |
| Поиск мест           | [Поиск](https://docs.microsoft.com/rest/api/maps/search)                             |
| Разместить Автозаполнение      | [Поиск](https://docs.microsoft.com/rest/api/maps/search)                             |
| Статическая схема              | [Render](https://docs.microsoft.com/rest/api/maps/render/getmapimage)                 |
| Часовой пояс               | [Часовой пояс](https://docs.microsoft.com/rest/api/maps/timezone)                        |

Следующие API-интерфейсы службы в настоящее время недоступны в Azure Maps:

- Elevation
- Геолокация
- Размещает сведения и фотографии. Номера телефонов и URL-адреса сайтов доступны в API Azure Maps поиска.
- URL-адреса карт
- Дороги — данные предельной скорости доступны через маршрут и обратные API-интерфейсы геокодирования в Azure Maps.
- Статическое представление улицы

Azure Maps имеет несколько дополнительных веб-служб RESTFUL, которые могут быть интересны:

- [Пространственные операции](https://docs.microsoft.com/rest/api/maps/spatial): разгрузка сложных пространственных вычислений и операций, таких как геоограждение, в службу.
- [Трафик](https://docs.microsoft.com/rest/api/maps/traffic). доступ к потоку трафика и данным инцидентов в режиме реального времени.

## <a name="geocoding-addresses"></a>Адреса геокодирования

Геокодирование — это процесс преобразования адреса (например, "1 Microsoft Way, Redmond, WA") в координаты (например, Долгота:-122,1298, Широта: 47,64005). Координаты часто используются для размещения маркера на карте или по центру.

Azure Maps предоставляет несколько методов для геокодирования адресов:

- [**Геокодирование адреса в свободной форме**](https://docs.microsoft.com/rest/api/maps/search/getsearchaddress): укажите одну строку адреса (например, "1 Microsoft Way, Redmond, WA") и немедленно обработайте запрос. Это рекомендуется, если необходимо быстро закодировать отдельные адреса.
- [**Геокодирование структурированного адреса**](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressstructured): укажите части одного адреса, такие как название улицы, город, страна и почтовый индекс, и немедленно обработайте запрос. Это рекомендуется, если необходимо быстро закодировать отдельные адреса, а данные уже были проанализированы в отдельные адресные части.
- [**Геокодирование адрес пакетной**](https://docs.microsoft.com/rest/api/maps/search/postsearchaddressbatchpreview)службы: Создайте запрос, содержащий до 10 000 адресов и обрабатываемых в течение определенного периода времени. Все адреса будут геокодированы в параллельном режиме на сервере, и после завершения можно скачать полный результирующий набор. Это рекомендуется для геокодирования больших наборов данных.
- [**Нечеткий поиск**](https://docs.microsoft.com/rest/api/maps/search/getsearchfuzzy). Этот API сочетает геокодирование адреса с целью поиска по процентам. Этот API принимает строку в свободной форме, которая может быть адресом, местом, ориентиром, точкой или процентной категорией, а также обрабатывать запрос немедленно. Этот API рекомендуется использовать для приложений, где пользователи могут искать нужные адреса или точки из этого текстового поля.
- [**Нечеткий пакетный Поиск**](https://docs.microsoft.com/rest/api/maps/search/postsearchfuzzybatchpreview): Создание запроса, содержащего до 10 000 адресов, мест, ориентиров или точек интересов, которые обрабатываются в течение определенного периода времени. Все данные будут обрабатываться параллельно на сервере, и после завершения можно скачать полный результирующий набор.

В следующей таблице перекрестные ссылки на параметры API-интерфейса Google Maps с сопоставимыми параметрами API в Azure Maps.

| Параметр API Google Maps | Сравнимый Azure Maps параметр API  |
|---------------------------|--------------------------------------|
| `address`                   | `query`                            |
| `bounds`                    | `topLeft` и `btmRight`           |
| `components`                | `streetNumber`<br/>`streetName`<br/>`crossStreet`<br/>`postalCode`<br/>`municipality` городу или город<br/>`municipalitySubdivision` — окружение, вспомогательное/супер-город<br/>`countrySubdivision`-штат или провинция<br/>`countrySecondarySubdivision` округ<br/>`countryTertiarySubdivision` округ<br/>`countryCode`-двухбуквенный код страны |
| `key`                       | `subscription-key` — см. также раздел [Проверка подлинности с помощью Azure Mapsной](azure-maps-authentication.md) документации. |
| `language`                  | `language` — см. документацию по [поддерживаемым языкам](supported-languages.md) .  |
| `region`                    | `countrySet`                       |

Пример использования службы поиска описан [здесь](how-to-search-for-address.md). Обязательно ознакомьтесь с рекомендациями по [поисковой](how-to-use-best-practices-for-search.md) документации.

> [!TIP]
> Интерфейсы API геокодирования и нечеткого поиска адреса можно использовать в режиме автозаполнения путем добавления `&amp;typeahead=true` в URL-адрес запроса. Это сообщит серверу, что входной текст скорее всего является частичным и перейдет в прогнозный режим.

## <a name="reverse-geocode-a-coordinate"></a>Обратная геокодированная координата

Обратная кодировка — это процесс преобразования географических координат (например, долготы:-122,1298, Широта: 47,64005) в приблизительный адрес (например, "1 Microsoft Way, Redmond, WA").

Azure Maps предоставляет несколько методов с обратным кодированием:

- [**Обратный геокодированный адрес**](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressreverse). Укажите одну географическую координату, чтобы получить его приблизительный адрес и немедленно обработать запрос.
- [**Кросс**](https://docs.microsoft.com/rest/api/maps/search/getsearchaddressreversecrossstreet)-географическое направление: укажите одну географический объект, чтобы получить соседние сведения о перекрестной улицы (например, 1-й & основной) и немедленно обработать запрос.
- [**Обратный геокодированный адрес пакетной**](https://docs.microsoft.com/rest/api/maps/search/postsearchaddressreversebatchpreview)службы: Создайте запрос, содержащий до 10 000 координат и обрабатываемых в течение определенного периода времени. Все данные будут обрабатываться параллельно на сервере, и после завершения можно скачать полный результирующий набор.

В следующей таблице перекрестные ссылки на параметры API-интерфейса Google Maps с сопоставимыми параметрами API в Azure Maps.

| Параметр API Google Maps   | Сравнимый Azure Maps параметр API   |
|-----------------------------|---------------------------------------|
| `key`                       | `subscription-key` — см. также раздел [Проверка подлинности с помощью Azure Mapsной](azure-maps-authentication.md) документации. |
| `language`                  | `language` — см. документацию по [поддерживаемым языкам](supported-languages.md) .  |
| `latlng`                    | `query`  |
| `location_type`             | *Н/Д*     |
| `result_type`               | `entityType`    |

Обязательно ознакомьтесь с рекомендациями по [поисковой](how-to-use-best-practices-for-search.md) документации.

В Azure Maps API для обратных геокодирования есть некоторые дополнительные функции, недоступные в Google Maps, которые могут быть полезны при переносе приложения:

- Получение данных о предельной скорости.
- Получение сведений об использовании дороги: локальная дорога, артерий, ограниченный доступ, пандус и т. д.
- Сторона улицы, к которой относится координата.

## <a name="search-for-points-of-interest"></a>Поиск точек интереса

Данные о процентах можно искать в Google Maps с помощью API поиска мест. Этот API предоставляет три разных способа поиска интересующих нас точек:

- **Найти место из текста:** Поиск интересующей точки на основе ее имени, адреса или номера телефона.
- **Поиск поблизости**: Поиск точек интересов, которые находятся в определенном расстоянии от места.
- **Текстовый поиск:** Выполняет поиск мест с помощью текста в свободной форме, который включает в себя точки интересов и сведения о расположении. Например, "пицца в Нью-Йорке" или "рестораны рядом с главным St".

Azure Maps предоставляет несколько API поиска для интересующих нас точек:

- [**Достопримечательности Search**](https://docs.microsoft.com/rest/api/maps/search/getsearchpoi): Поиск точек интересов по имени. Например, "Starbucks".
- [**Поиск по категории Достопримечательности**](https://docs.microsoft.com/rest/api/maps/search/getsearchpoicategory): Поиск точек интересов по категориям. Например, "Ресторан".
- [**Поиск поблизости**](https://docs.microsoft.com/rest/api/maps/search/getsearchnearby): Поиск точек интересов, которые находятся в определенном расстоянии от места.
- [**Нечеткий поиск**](https://docs.microsoft.com/rest/api/maps/search/getsearchfuzzy). Этот API сочетает геокодирование адреса с целью поиска по процентам. Этот API принимает строку в свободной форме, которая может быть адресом, местом, ориентиром, точкой или процентной категорией, а также обрабатывать запрос немедленно. Этот API рекомендуется использовать для приложений, где пользователи могут искать нужные адреса или точки из этого текстового поля.
- [**Поиск в пределах геометрии**](https://docs.microsoft.com/rest/api/maps/search/postsearchinsidegeometry): Поиск точек интересов, которые находятся в пределах указанной геометрии (многоугольника).
- [**Поиск по маршруту**](https://docs.microsoft.com/rest/api/maps/search/postsearchalongroute): Поиск точек интересов по указанному пути маршрута.
- [**Нечеткий пакетный Поиск**](https://docs.microsoft.com/rest/api/maps/search/postsearchfuzzybatchpreview): Создание запроса, содержащего до 10 000 адресов, мест, ориентиров или точек интересов, которые обрабатываются в течение определенного периода времени. Все данные будут обрабатываться параллельно на сервере, и после завершения можно скачать полный результирующий набор.

В настоящее время Azure Maps не имеет сопоставимого API с API Text Search для Google Maps.

> [!TIP]
> Интерфейсы API поиска достопримечательности, поиска категорий достопримечательности и нечетких запросов поиска можно использовать в режиме автозавершения, добавив `&amp;typeahead=true` в URL-адрес запроса. Это сообщит серверу, что входной текст скорее всего является частичным и перейдет в прогнозный режим.

Обязательно ознакомьтесь с рекомендациями по [поисковой](how-to-use-best-practices-for-search.md) документации.

### <a name="find-place-from-text"></a>Найти место из текста

Чтобы найти точки интересов по имени или адресу, можно использовать интерфейсы API Azure Maps [достопримечательности Search](https://docs.microsoft.com/rest/api/maps/search/getsearchpoi) и [нечеткий поиск](https://docs.microsoft.com/rest/api/maps/search/getsearchfuzzy) .

В следующей таблице перекрестные ссылки на параметры API-интерфейса Google Maps с сопоставимыми параметрами API в Azure Maps.

| Параметр API Google Maps | Сравнимый Azure Maps параметр API |
|---------------------------|-------------------------------------|
| `fields`                  | *Н/Д*                               |
| `input`                   | `query`                             |
| `inputtype`               | *Н/Д*                               |
| `key`                     | `subscription-key` — см. также раздел [Проверка подлинности с помощью Azure Mapsной](azure-maps-authentication.md) документации. |
| `language`                | `language` — см. документацию по [поддерживаемым языкам](supported-languages.md) .  |
| `locationbias`            | `lat`, `lon`и `radius`<br/>`topLeft` и `btmRight`<br/>`countrySet`  |

### <a name="nearby-search"></a>Поиск поблизости

Соседние интересы можно получить в Azure Maps с помощью [ближайших API поиска](https://docs.microsoft.com/rest/api/maps/search/getsearchnearby) .

В следующей таблице перекрестные ссылки на параметры API-интерфейса Google Maps с сопоставимыми параметрами API в Azure Maps.

| Параметр API Google Maps | Сравнимый Azure Maps параметр API  |
|---------------------------|--------------------------------------|
| `key`                       | `subscription-key` — см. также раздел [Проверка подлинности с помощью Azure Mapsной](azure-maps-authentication.md) документации. |
| `keyword`                   | `categorySet` и `brandSet`        |
| `language`                  | `language` — см. документацию по [поддерживаемым языкам](supported-languages.md) .  |
| `location`                  | `lat` и `lon`                     |
| `maxprice`                  | *Н/Д*                               |
| `minprice`                  | *Н/Д*                               |
| `name`                      | `categorySet` и `brandSet`        |
| `opennow`                   | *Н/Д*                               |
| `pagetoken`                 | `ofs` и `limit`                   |
| `radius`                    | `radius`                            |
| `rankby`                    | *Н/Д*                               |
| `type`                      | `categorySet –` см. документацию по [поддерживаемым категориям поиска](supported-search-categories.md) .   |

## <a name="calculate-routes-and-directions"></a>Вычисление маршрутов и направлений

Azure Maps можно использовать для вычисления маршрутов и направлений. Azure Maps обладает многими теми же возможностями, что и служба маршрутизации Google Maps, например:

- время прибытия и отправления.
- маршруты трафика на основе реального времени и прогноза.
- различные режимы транспортировки; Управление, проход, велотуров.

> [!NOTE]
> Azure Maps требует, чтобы все вайпоинтс были координатами. Адреса должны быть геокодированы первыми.

Служба маршрутизации Azure Maps предоставляет следующие API для вычисления маршрутов.

- [**Вычислить маршрут**](https://docs.microsoft.com/rest/api/maps/route/getroutedirections): вычислить маршрут и немедленно обработать запрос. Этот API поддерживает как запросы GET, так и POST. Запросы POST рекомендуются при указании большого числа вайпоинтс или при использовании большого количества параметров маршрута, чтобы гарантировать, что запрос URL-адреса не станет слишком длинным и вызывать проблемы.
- [**Маршрут пакетной**](https://docs.microsoft.com/rest/api/maps/route/postroutedirectionsbatchpreview)службы: Создайте запрос, содержащий до 1 000 запроса маршрута и обработанных в течение определенного периода времени. Все данные будут обрабатываться параллельно на сервере, и после завершения можно скачать полный результирующий набор.
- [**Службы Mobility Services**](https://docs.microsoft.com/rest/api/maps/mobility). Вычислите маршруты и направления с помощью общедоступного транзита.

В следующей таблице перекрестные ссылки на параметры API-интерфейса Google Maps с сопоставимыми параметрами API в Azure Maps.

| Параметр API Google Maps    | Сравнимый Azure Maps параметр API  |
|------------------------------|--------------------------------------|
| `alternatives`                 | `maxAlternatives`                  |
| `arrival_time`                | `arriveAt`                          |
| `avoid`                        | `avoid`                            |
| `departure_time`              | `departAt`                          |
| `destination`                  | `query` — координаты в формате `"lat0,lon0:lat1,lon1…."`  |
| `key`                          | `subscription-key` — см. также раздел [Проверка подлинности с помощью Azure Mapsной](azure-maps-authentication.md) документации. |
| `language`                     | `language` — см. документацию по [поддерживаемым языкам](supported-languages.md) .   |
| `mode`                         | `travelMode`                       |
| `optimize`                     | `computeBestOrder`                 |
| `origin`                       | `query`                            |
| `region`                       | *Н/д* — это функция, связанная с геокодированием. Используйте параметр *Country* , если используете Azure Maps API геокодирования.  |
| `traffic_model`               | *Н/д* — может указывать только, следует ли использовать данные трафика с параметром *трафика* . |
| `transit_mode`                | См. [документацию по службам Mobility Services](https://docs.microsoft.com/rest/api/maps/mobility) |
| `transit_routing_preference` | См. [документацию по службам Mobility Services](https://docs.microsoft.com/rest/api/maps/mobility) |
| `units`                        | *Н/д* — Azure Maps использует только систему метрик.  |
| `waypoints`                    | `query`                            |

> [!TIP]
> По умолчанию API Azure Maps маршрута возвращает только сводку (расстояние и время) и координаты пути маршрута. Чтобы получить инструкции по включению, используйте параметр `instructionsType`. Параметр `routeRepresentation` можно использовать для фильтрации сводки и пути маршрута.

API маршрутизации Azure Maps содержит множество дополнительных функций, недоступных в Google Maps, которые могут оказаться полезными для интеграции при переносе приложения:

- Поддержка типа маршрута: краткая, самая быстрая, Триллинг и наибольшая эффективность топлива.
- Поддержка дополнительных режимов командировок: Bus, motorcycle, такси, грузовик и Van.
- Поддержка 150 вайпоинтс.
- Вычисление нескольких значений времени поездки в одном запросе; исторические трафик, динамический трафик, без трафика.
- Старайтесь не использовать дополнительные типы дорожек: carpoolые дороги, унпаведые дороги, уже использовали дороги.
- Чтобы избежать, укажите настраиваемые области.
- Ограничьте повышение прав, чтобы маршрут мог по возрастанию.
- Маршрутизация на основе спецификации ядра. Вычислите маршруты для комбустион или электрических транспортных средств на основе их оставшихся данных о горючем, расходах и подсистемах.
- Поддержка параметров маршрута коммерческой машины; измерения, вес, число АКСЕЛС и тип грузовой автомобиля.
- Укажите максимальную скорость автомобиля.

Кроме того, служба маршрутов в Azure Maps также поддерживает [Вычисление диапазонов](https://docs.microsoft.com/rest/api/maps/route/getrouterange), поддерживающих маршрутизацию, также известных как вычисление изохрон, которые создают многоугольник, охватывающий область, которая может проходить в любом направлении от точки отсчета в течение заданного количества времени или суммы топлива/расхода.

## <a name="retrieve-a-map-image"></a>Получение изображения схемы

Azure Maps предоставляет API для отрисовки статических изображений карт с перекрывающимися данными. API-интерфейс [прорисовки изображений карты](https://docs.microsoft.com/rest/api/maps/render/getmapimagerytile) Azure Maps СРАВНИМ с API статических карт в Google Maps.

> [!NOTE]
> Azure Maps требуется, чтобы центр, все расположения маркера и пути были координатами в формате "Долгота, Широта", а в Google Maps используется формат "Широта, Долгота". Адреса должны быть геокодированы первыми.

В следующей таблице перекрестные ссылки на параметры API-интерфейса Google Maps с сопоставимыми параметрами API в Azure Maps.

| Параметр API Google Maps | Сравнимый Azure Maps параметр API  |
|---------------------------|--------------------------------------|
| `center`                    | `center`                           |
| `format`                    | `format` — указывается как часть URL-пути. В настоящее время поддерживается только формат PNG. |
| `key`                       | `subscription-key` — см. также раздел [Проверка подлинности с помощью Azure Mapsной](azure-maps-authentication.md) документации. |
| `language`                  | `language` — см. документацию по [поддерживаемым языкам](supported-languages.md) .  |
| `maptype`                   | `layer` и `style` — см. документацию по [поддерживаемым стилям карт](supported-map-styles.md) . |
| `markers`                   | `pins`                             |
| `path`                      | `path`                             |
| `region`                    | *Н/д* — это функция, связанная с геокодированием. Используйте параметр `countrySet` при использовании Azure Maps API геокодирования.  |
| `scale`                     | *Н/Д*                              |
| `size`                      | `width` и `height` — могут иметь размер до 8192x8192. |
| `style`                     | *Н/Д*                              |
| `visible`                   | *Н/Д*                              |
| `zoom`                      | `zoom`                             |

> [!NOTE]
> Azure Maps использует систему мозаики с плитками, которые вдвое больше размера плиток карты, используемых в Google Maps. Таким образом, значение масштаба в Azure Maps будет выглядеть ближе к уровню масштабирования в Azure Maps по сравнению с Google Maps. Уменьшите уровень масштаба в запросах, которые вы переносите на одну, чтобы компенсировать это.

Дополнительные сведения см. в [инструкции по API рендеринга изображений карт](how-to-render-custom-data.md).

Кроме возможности создания статического изображения на карте, Azure Maps служба отрисовки также предоставляет возможность прямого доступа к плиткам карт в растровом формате (PNG) и векторного формата:

- [**Плитка карты**](https://docs.microsoft.com/rest/api/maps/render/getmaptile): получение растровых (PNG) и векторных плиток для базовых карт (дорог, границ, фона).
- [**Плитка с изображением карты**](https://docs.microsoft.com/rest/api/maps/render/getmapimagerytile): получение плиток аэрофотосъемки и сопутствующих изображений.

> [!TIP]
> Многие приложения Google Maps, в которых несколько лет назад переключаются между интерактивными картами карт на статические карты, являются методом сохранения затрат. В Azure Maps, часто бывает гораздо более экономично использовать интерактивный элемент управления картой в веб-пакете SDK, так как он оплачивается в зависимости от загрузки плиток карты. Плитки карт в Azure Maps велики, и часто требуется лишь несколько, чтобы повторно создать одно и то же представление с картой, так как статические плитки карт кэшируются автоматически в браузере. Таким образом, интерактивный элемент управления картой часто создает лишь часть транзакции при воспроизведении статического представления на карте. При панорамировании и изменении масштаба будут загружаться дополнительные плитки, однако в элементе управления картой есть параметры, позволяющие отключить это поведение при необходимости. Интерактивный контроль карт также предоставляет гораздо больше возможностей визуализации, чем статические службы Map.

### <a name="marker-url-parameter-format-comparison"></a>Сравнение формата параметра URL-адреса маркера

**До: карты Google**

Маркеры Google Maps можно добавить в статический образ карты с помощью параметра `markers` в URL-адресе. Параметр `markers` принимает стиль и список расположений, отображаемых на карте с таким стилем, как показано ниже:

```
&markers=markerStyles|markerLocation1|markerLocation2|...
```

Дополнительные стили можно использовать, добавив дополнительные параметры `markers` к URL-адресу с другим стилем и набором расположений.

Расположения маркеров задаются в формате "Широта, Долгота".

Стили маркеров в Google Maps добавляются в формате `optionName:value`с несколькими стилями, разделенными символами вертикальной черты (\|), такими как "optionName1: value1\|optionName2: value2". Обратите внимание, что имена и значения параметров разделяются двоеточием (:). Для маркеров стиля в Google Maps можно использовать следующие имена параметров стиля:

- `color` — цвет значка маркера по умолчанию. Параметр может иметь 24-разрядный шестнадцатеричный цвет (`0xrrggbb`) или одно из следующих значений. `black`, `brown`, `green`, `purple`, `yellow`, `blue`, `gray`, `orange`, `red`, `white`.
- `label` — один алфавитно-цифровой символ в верхнем регистре, отображаемый в верхней части значка.
- `size` — размер маркера. Возможные значения: `tiny`, `mid` или `small`.

Пользовательские значки можно также использовать в Google Maps с использованием следующих имен параметров стиля:

- `anchor` — указывает, как выровняйте изображение значка по координатам. Может быть значением пикселей (x, y) или одним из следующих значений. `top`, `bottom`, `left`, `right`, `center`, `topleft`, `topright`, `bottomleft`или `bottomright`.
- `icon` — URL-адрес, указывающий на изображение значка.

Например, в Google Maps маркер в виде красного размера можно добавить к карте по координатам (Долгота:-110, Широта: 45) со следующим параметром URL-адреса:

```
&markers=color:red|size:mid|45,-110
```

<center>

](media/migrate-google-maps-web-services/google-maps-marker.png)</center> маркера ![Google Maps

**После: Azure Maps**

В Azure Maps маркеры можно также добавить в изображение статической схемы, указав в URL-адресе параметр `pins`. Как и в случае с Google Maps, в этом параметре можно указать стиль и список расположений, а параметр `pins` можно указать несколько раз для поддержки маркеров с различными стилями.

```
&pins=iconType|pinStyles||pinLocation1|pinLocation2|...
```

Дополнительные стили можно использовать, добавив дополнительные параметры `pins` к URL-адресу с другим стилем и набором расположений.

Когда речь заходит о закреплениях расположений, Azure Maps требует, чтобы координаты были в формате "Долгота", тогда как в Google Maps используется формат "Широта, Долгота". Также обратите внимание, что имеется пробел, а не запятая и Широта в Azure Maps.

Значение `iconType` указывает тип создаваемого ПИН-кода и может иметь следующие значения:

- `default` — значок ПИН-кода по умолчанию.
- `none` — значок не отображается, будут отображены только метки.
- `custom` — указывает используемый пользовательский значок. URL-адрес, указывающий на изображение значка, можно добавить в конец параметра `pins` после сведений о расположении ПИН-кода.
- `{udid}` — уникальный идентификатор данных (UDID) для значка, хранящегося на Azure Maps платформе хранения данных.

Закреплять стили в Azure Maps добавляются в формате `optionNameValue`с несколькими стилями, разделенными символами вертикальной черты (\|), такими как `iconType|optionName1Value1|optionName2Value2`. Обратите внимание, что имена и значения параметров не разделяются. Для маркеров стиля в Azure Maps можно использовать следующие имена параметров стиля:

- `al` — задает непрозрачность (альфа) маркера. Может быть числом от 0 до 1.
- `an` — задает привязку к закреплениям. Значения x и y пикселей, указанные в формате x y.
- `co` — цвет ПИН-кода. Должен быть 24-разрядный шестнадцатеричный цвет: `000000` для `FFFFFF`.
- `la` — задает привязку метки. Значения x и y пикселей, указанные в формате x y.
- `lc` — цвет метки. Должен быть 24-, но шестнадцатеричный цвет: `000000` для `FFFFFF`.
- `ls` — размер метки в пикселях. Может быть числом больше 0.
- `ro` — значение в градусах для поворота значка. Может быть числом от-360 до 360.
- `sc` — значение масштаба для значка закрепления. Может быть числом больше 0.

Значения меток задаются для каждого расположения ПИН-кода, а не по одному значению метки, которое применяется ко всем маркерам в списке расположений. Значение метки может быть строкой из нескольких символов и заключено в одинарные кавычки, чтобы гарантировать, что оно не будет ошибочно использоваться в качестве стиля или значения расположения.

Например, в Azure Maps добавляется значок по умолчанию красного (`FF0000`) с меткой «пробела», расположенной ниже (15 50) значок в координатах (Долгота:-122,349300, Широта: 47,620180) можно выполнить с помощью следующего параметра URL-адреса:

```
&pins=default|coFF0000|la15 50||'Space Needle' -122.349300 47.620180
```

<center>

![маркер Azure Maps](media/migrate-google-maps-web-services/azure-maps-marker.png)</center>

В следующем примере добавляются три контакта со значениями меток "1", "2" и "3":

```
&pins=default||'1'-122 45|'2'-119.5 43.2|'3'-121.67 47.12
```

<center>

![Azure Maps несколько маркеров](media/migrate-google-maps-web-services/azure-maps-multiple-markers.png)</center>

### <a name="path-url-parameter-format-comparison"></a>Сравнение формата параметра URL-адреса пути

**До: карты Google**

В Google Maps линии и многоугольники можно добавить в статический образ карты с помощью параметра `path` в URL-адресе. Параметр `path` принимает стиль и список расположений, отображаемых на карте с таким стилем, как показано ниже:

```
&path=pathStyles|pathLocation1|pathLocation2|...
```

Дополнительные стили можно использовать, добавив дополнительные параметры `path` к URL-адресу с другим стилем и набором расположений.

Расположения путей в Google Maps указываются в формате `latitude1,longitude1|latitude2,longitude2|…`. Пути могут быть закодированы или содержать адреса для точек.

Стили пути в Google Maps добавляются в формате `optionName:value`с несколькими стилями, разделенными символами вертикальной черты (\|), такими как `optionName1:value1|optionName2:value2`. Обратите внимание, что имена и значения параметров разделяются двоеточием (:). Для стилей путей в Google Maps можно использовать следующие имена параметров стиля:

- `color` — цвет контура или контура многоугольника. Может быть 24-разрядным шестнадцатеричным цветом (`0xrrggbb`), 32-битным шестнадцатеричным цветом (`0xrrggbbbaa`) или одним из следующих значений. черный, коричневый, зеленый, сиреневый, желтый, синий, серый, оранжевый, красный, белый.
- `fillColor` — цвет заливки области пути (Многоугольник). Может быть 24-разрядным шестнадцатеричным цветом (`0xrrggbb`), 32-битным шестнадцатеричным цветом (`0xrrggbbbaa`) или одним из следующих значений. черный, коричневый, зеленый, сиреневый, желтый, синий, серый, оранжевый, красный, белый.
- `geodesic` — указывает, что путь должен быть линией, следующей за кривизной земли.
- `weight` — толщина линии пути в пикселях.

Например, в Google Maps красная линия с непрозрачностью 50% и толщиной 4 пикселя можно добавить в карту между координатами (Долгота:-110, Широта: 45 и Долгота:-100, Широта: 50) со следующим параметром URL-адреса:

```
&path=color:0xFF000088|weight:4|45,-110|50,-100
```

<center>

![](media/migrate-google-maps-web-services/google-maps-polyline.png)</center> ломаной линии Google Maps

**После: Azure Maps**

В Azure Maps строки и многоугольники также можно добавить в статическое изображение на карте, указав в URL-адресе параметр `path`. Как и в случае с Google Maps, в этом параметре можно указать стиль и список расположений, а параметр `path` может быть указан несколько раз для отрисовки нескольких кругов, линий и многоугольников с разными стилями.

```
&path=pathStyles||pathLocation1|pathLocation2|...
```

Когда речь идет о расположении путей, Azure Maps требует, чтобы координаты были в формате "Долгота широты", тогда как в Google Maps используется формат "Широта, Долгота". Также обратите внимание, что имеется пробел, а не запятая и Широта в Azure Maps. Azure Maps не поддерживает закодированные пути или адреса для точек. Большие наборы данных можно передать в виде геообъектного формата JSON в Azure Maps API хранилища данных, как описано [здесь](how-to-render-custom-data.md#get-data-from-azure-maps-data-storage).

Стили пути в Azure Maps добавляются в формате `optionNameValue`с несколькими стилями, разделенными символами вертикальной черты (\|), такими как `optionName1Value1|optionName2Value2`. Обратите внимание, что имена и значения параметров не разделяются. Следующие имена параметров стиля можно использовать для стилей путей в Azure Maps:

- `fa` — непрозрачность цвета заливки (альфа), используемая при отрисовке многоугольников. Может быть числом от 0 до 1.
- `fc` — цвет заливки, используемый для отрисовки области многоугольника.
- `la` — непрозрачность цвета линии (альфа), используемая при отрисовке линий и контуров многоугольников. Может быть числом от 0 до 1.
- `lc` — цвет линии, используемый для отрисовки линий и контуров многоугольников.
- `lw` — ширина линии в пикселях.
- `ra` — Указывает радиус круга в метрах.

Например, в Azure Maps в карту между координатами (Долгота:-110, Широта: 45 и Долгота:-100, Широта: 50) можно добавить красную линию со степенью непрозрачности 50% и толщиной 4 пикселя с помощью следующего параметра URL-адреса:

```
&path=lcFF0000|la.5|lw4||-110 45|-100 50
```

<center>

![Azure Maps Ломаная линия](media/migrate-google-maps-web-services/azure-maps-polyline.png)</center>

## <a name="calculate-a-distance-matrix"></a>Вычисление матрицы расстояний

Azure Maps предоставляет API для вычисления времени поездки и расстояний между набором расположений в виде матрицы расстояний. API матрицы Azure Maps Distance сравним с API матрицы расстояний в Google Maps.

- [**Матрица маршрута**](https://docs.microsoft.com/rest/api/maps/route/postroutematrixpreview): асинхронно вычисляет время поездки и расстояния для набора источников и назначений. Поддерживается до 700 ячеек на запрос (количество источников, умноженное на количество назначений). Учитывая следующее ограничение, примеры возможных матричных измерений: 700x1, 50x10, 10x10, 28x25, 10x70.

> [!NOTE]
> Запрос к API матрицы расстояний можно выполнить только с помощью запроса POST со сведениями об источнике и назначении в тексте запроса. Кроме того, Azure Maps требует, чтобы все источники и назначения были координатами. Адреса должны быть геокодированы первыми.

В следующей таблице перекрестные ссылки на параметры API-интерфейса Google Maps с сопоставимыми параметрами API в Azure Maps.

| Параметр API Google Maps      | Сравнимый Azure Maps параметр API  |
|--------------------------------|--------------------------------------|
| `arrivial_time`                | `arriveAt`                           |
| `avoid`                        | `avoid`                              |
| `depature_time`                | `departAt`                           |
| `destinations`                 | `destination` — укажите в тексте запроса POST в формате геоjson. |
| `key`                          | `subscription-key` — см. также раздел [Проверка подлинности с помощью Azure Mapsной](azure-maps-authentication.md) документации. |
| `language`                     | `language` — см. документацию по [поддерживаемым языкам](supported-languages.md) .  |
| `mode`                         | `travelMode`                         |
| `origins`                      | `origins` — укажите в тексте запроса POST в формате геоjson.  |
| `region`                       | *Н/д* — это функция, связанная с геокодированием. Используйте параметр `countrySet` при использовании Azure Maps API геокодирования. |
| `traffic_model`                | *Н/д* — может указывать только, следует ли использовать данные трафика с параметром `traffic`. |
| `transit_mode`                 | Матрицы расстояний на основе *N/A* не поддерживаются в настоящее время.  |
| `transit_routing_preference`   | Матрицы расстояний на основе *N/A* не поддерживаются в настоящее время.  |
| `units`                        | *Н/д* — Azure Maps использует только систему метрик. |

> [!TIP]
> Все параметры расширенной маршрутизации, доступные в интерфейсе API маршрутизации Azure Maps (маршрутизация грузовика, спецификации ядра, избежание...), поддерживаются в API матрицы Azure Maps Distance.

## <a name="get-a-time-zone"></a>Получение часового пояса

Azure Maps предоставляет API для получения часового пояса, в котором находится координата. API часового пояса Azure Maps сравним с API часового пояса в Google Maps:

- [**Часовой пояс по координатам**](https://docs.microsoft.com/rest/api/maps/timezone/gettimezonebycoordinates): укажите координату и получите сведения о часовом поясе, в котором он находится.

В следующей таблице перекрестные ссылки на параметры API-интерфейса Google Maps с сопоставимыми параметрами API в Azure Maps.

| Параметр API Google Maps | Сравнимый Azure Maps параметр API   |
|---------------------------|---------------------------------------|
| `key`                       | `subscription-key` — см. также раздел [Проверка подлинности с помощью Azure Mapsной](azure-maps-authentication.md) документации.       |
| `language`                  | `language` — см. документацию по [поддерживаемым языкам](supported-languages.md) .    |
| `location`                  | `query`             |
| `timestamp`                 | `timeStamp`         |

Кроме того, Azure Maps платформа также предоставляет ряд дополнительных API-интерфейсов часовых поясов, помогающих выполнять преобразования с именами часовых поясов и идентификаторами.

- [**Часовой пояс по идентификатору**](https://docs.microsoft.com/rest/api/maps/timezone/gettimezonebyid): Возвращает текущие, исторические и будущие сведения о часовом поясе IANA для указанного идентификатора.
- [**Перечисление IANA**](https://docs.microsoft.com/rest/api/maps/timezone/gettimezoneenumiana)часового пояса: Возвращает полный список идентификаторов часовых поясов IANA. Обновления службы IANA отражаются в системе в течение одного дня.
- [**Окна перечисления часовых поясов**](https://docs.microsoft.com/rest/api/maps/timezone/gettimezoneenumwindows): Возвращает полный список идентификаторов часовых поясов Windows.
- [**Версия IANA**](https://docs.microsoft.com/rest/api/maps/timezone/gettimezoneianaversion)часового пояса: Возвращает номер текущей версии IANA, используемый Azure Maps.
- [**Окна часового пояса для IANA**](https://docs.microsoft.com/rest/api/maps/timezone/gettimezonewindowstoiana): ВОЗВРАЩАЕТ соответствующий идентификатор IANA по заданному идентификатору часового пояса Windows. Для одного идентификатора Windows может быть возвращено несколько идентификаторов IANA.

## <a name="client-libraries"></a>Клиентские библиотеки

Azure Maps предоставляет клиентские библиотеки для следующих языков программирования:

- JavaScript, TypeScript, Node. js – [документация](how-to-use-services-module.md) \| [пакет NPM](https://www.npmjs.com/package/azure-maps-rest)

Клиентские библиотеки с открытым кодом для других языков программирования:

- .NET Standard 2,0 — [проект GitHub](https://github.com/perfahlen/AzureMapsRestServices) \| [пакет NuGet](https://www.nuget.org/packages/AzureMapsRestToolkit/)

## <a name="additional-resources"></a>Дополнительные ресурсы

Ниже приведена дополнительная документация и ресурсы по Azure Maps службам RESTFUL.

- [Рекомендации по поиску](how-to-use-best-practices-for-search.md)
- [Поиск адреса](how-to-search-for-address.md)
- [Справочная документация по API службы Azure Maps RESTFUL](https://docs.microsoft.com/rest/api/maps/)

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о службах Azure Maps RESTFUL.

> [!div class="nextstepaction"]
> [Рекомендации по использованию службы поиска](how-to-use-best-practices-for-search.md)

> [!div class="nextstepaction"]
> [Использование модуля "службы" (веб-пакет SDK)](how-to-use-services-module.md)

> [!div class="nextstepaction"]
> [Примеры кода](https://docs.microsoft.com/samples/browse/?products=azure-maps)