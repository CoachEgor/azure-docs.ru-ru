---
title: Наборы утверждений Аттестации Azure
description: Наборы утверждений в Аттестации Azure.
services: attestation
author: msmbaldwin
ms.service: attestation
ms.topic: overview
ms.date: 08/31/2020
ms.author: mbaldwin
ms.openlocfilehash: 555dccbd3c2dfe61bac5891514deface6f8a877d
ms.sourcegitcommit: eb6bef1274b9e6390c7a77ff69bf6a3b94e827fc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/05/2020
ms.locfileid: "89237066"
---
# <a name="claim-sets"></a>Наборы утверждений

Утверждения, созданные в процессе аттестации анклавов в Аттестации Microsoft Azure, можно разделить на следующие категории:

- **Входящие утверждения.** Это утверждения, созданные Аттестацией Microsoft Azure после анализа свидетельства аттестации.

- **Исходящие утверждения.** Это утверждения, созданные Аттестацией Azure в качестве выходных данных. Сюда относятся все утверждения, которые должны включаться в токен аттестации.

- **Утверждения свойств.** Это утверждения, созданные Аттестацией Azure в качестве выходных данных. Сюда относятся все утверждения, которые представляют свойства маркера аттестации, например кодировка отчета, срок действия отчета и т. д.

Указанные ниже утверждения определяются в стандарте JWT RFC и используются Аттестацией Azure в объекте ответа.

- **Утверждение iss (издатель).** Утверждение iss (издатель) определяет субъект, который создал токен JWT. Использование этого утверждения обычно зависит от конкретного приложения. Значение iss является строковым, зависит от регистра и содержит значение StringOrURI.
- **Утверждение iat (время выдачи).** Утверждение iat (время выдачи) обозначает время, в которое был создан токен JWT. Это утверждение можно использовать для оценки возраста конкретного токена JWT. Значением ОБЯЗАТЕЛЬНО должно быть число в формате NumericDate.
- **Утверждение exp (срок действия).** Утверждение "exp" (время окончания срока действия) указывает время окончания срока действия или время, после которого маркер JWT НЕ ДОЛЖЕН приниматься в обработку. Обработка утверждения exp требует, чтобы значение текущих даты и времени всегда было меньше значения даты и времени, указанного в утверждении exp.

  Примечание. К значению времени выдачи (iat) добавляется запас времени в пять минут, чтобы учесть возможную разницу в показаниях часов.
- **Утверждение nbf (не ранее).** Утверждение nbf (не ранее) определяет время, до которого токен JWT НЕ БУДЕТ приниматься в обработку. Обработка утверждения nbf требует, чтобы значение текущих даты и времени всегда было больше или равно значению даты и времени, указанному в утверждении nbf.
  Примечание. К значению времени выдачи (iat) добавляется запас времени в пять минут, чтобы учесть возможную разницу в показаниях часов.

## <a name="claims-issued-by-azure-attestation-in-sgx-enclaves"></a>Утверждения, выдаваемые Аттестацией Azure в анклавах SGX

### <a name="incoming-claims"></a>Входящие утверждения 

- **$is-debuggable.** Логическое значение, определяющее включение отладки в этом анклаве.
- **$sgx-mrsigner.** Шестнадцатеричное значение поля mrsigner из предложения.
- **$sgx-mrenclave.** Шестнадцатеричное значение поля mrenclave из предложения.
- **$product-id**
- **$svn.** Номер версии безопасности, зашифрованный в предложении. 
- **$tee.** Тип анклава. 

### <a name="outgoing-claims"></a>Исходящие утверждения

- **is-debuggable.** Логическое значение, определяющее включение отладки в этом анклаве.
- **sgx-mrsigner.** Шестнадцатеричное значение поля mrsigner из предложения.
- **sgx-mrenclave.** Шестнадцатеричное значение поля mrenclave из предложения.
- **product-id**
- **svn.** Номер версии безопасности, зашифрованный в предложении. 
- **tee.** Тип анклава. 
- **maa-ehd.**  Версия значения Enclave Held Data (хранящиеся в анклаве данные), указанного в запросе на авторизацию, в кодировке Base64Url 
- **aas-ehd**.  Версия значения Enclave Held Data (хранящиеся в анклаве данные), указанного в запросе на авторизацию, в кодировке Base64Url 

## <a name="claims-issued-by-azure-attestation-in-vbs-enclaves"></a>Утверждения, выдаваемые Аттестацией Azure в анклавах VBS

### <a name="incoming-claims-can-also-be-used-as-outgoing-claims"></a>Входящие утверждения (могут использовать и в качестве исходящих)

- **aikValidated.**  Логическое значение с информацией о том, был ли проверен сертификат AIK (ключ удостоверения подлинности).
- **aikPubHash.**  Строка хэша, получаемая как base64(SHA256(открытый ключ AIK в формате DER)).
- **tpmVersion.**   Целое число, обозначающее основной номер версии доверенного платформенного модуля (TPM).
- **secureBootEnabled.** Логическое значение, указывающее, что безопасная загрузка включена.
- **iommuEnabled.**  Логическое значение, указывающее, что модуль управления памятью ввода-вывода (IOMMU) включен.
- **bootDebuggingDisabled.** Логическое значение, указывающее, что отладка загрузки отключена.
- **notSafeMode.**  Логическое значение, указывающее, что Windows не использует безопасный режим.
- **notWinPE.**  Логическое значение, обозначающее, что Windows не использует режим WinPE.
- **vbsEnabled.**  Логическое значение, обозначающее разрешение использовать VBS.
- **vbsReportPresent.**  Логическое значение, указывающее, что отчет по анклаву VBS доступен.
- **enclaveAuthorId.**  Строковое значение идентификатора автора анклава основного модуля этого анклава в кодировке Base64Url.
- **enclaveImageId.**  Строковое значение идентификатора образа анклава основного модуля этого анклава в кодировке Base64Url.
- **enclaveOwnerId.**  Строковое значение идентификатора владельца анклава в кодировке Base64Url.
- **enclaveFamilyId.**  Строковое значение идентификатора семьи анклава в кодировке Base64Url. (Это идентификатор семьи главного модуля анклава.)
- **enclaveSvn.**  Целое число, обозначающее номер версии безопасности главного модуля анклава.
- **enclavePlatformSvn.**  Целое число, обозначающее номер версии безопасности платформы, на которой размещается анклав.
- **enclaveFlags**.  Утверждение enclaveFlags — это целое число, содержащее флаги, которые описывают политику среды выполнения для этого анклава.
  
### <a name="outgoing-claims"></a>Исходящие утверждения

- **policy_hash.**  Строковое значение хэша SHA256 для текста политики, которое вычисляется как BASE64URL(SHA256(BASE64URL(UTF8(текст политики)))).
- **policy_signer.**  Строковое значение токена JWT с открытым ключом или цепочкой сертификатов, которые присутствуют в заголовке подписанной политики.
- **ver (версия).**  Строковое значение, определяющее номер версии отчета. Сейчас это 1.0.
- **Утверждение cnf (подтверждение).**  Утверждение cnf применяется для идентификации ключа, подтверждающего право владения. Утверждение подтверждения определено в стандарте RFC 7800 и содержит открытую часть ключа аттестованного анклава в формате объекта JWK (JSON Web Key) (RFC 7517).
- **rp_data (данные проверяющей стороны).**  Любые данные проверяющей стороны, если они присутствуют в запросе, которые используются проверяющей стороной как элемент nonce для гарантии актуальности отчета.
- **Утверждение jti (идентификатор токена JWT).** Утверждение jti (идентификатор маркера JWT) предоставляет уникальный идентификатор JWT. Это значение идентификатора присваивается так, чтобы вероятность случайного присвоения того же значения другому объекту данных была ничтожно мала.

### <a name="property-claims"></a>Утверждения свойств

- **report_validity_in_minutes.** Это утверждение содержит целое число, которое обозначает срок действия токена.
  - **Значение по умолчанию (время).** Один день в минутах.
  - **Максимальное значение (время).** Один год в минутах.
- **omit_x5c.** Логическое значение, которое указывает, что Аттестация Azure должна исключить сертификат, который использовался для подтверждения подлинности службы. Если имеет значение True, к токену аттестации добавляется сертификат x5t. Если имеет значение False (по умолчанию), к токену аттестации добавляется сертификат x5c.

## <a name="next-steps"></a>Дальнейшие действия
- [Как создать и подписать файл политики аттестации](author-sign-policy.md)
- [Настройка службы "Аттестация Azure" с помощью PowerShell](quickstart-powershell.md)
