---
title: Аутентификация в реестре контейнеров Azure с помощью субъекта-службы
description: Предоставление доступа к образам, размещенным в закрытом реестре контейнеров, с помощью субъекта-службы Azure Active Directory.
services: container-registry
author: dlepow
ms.service: container-registry
ms.topic: article
ms.date: 12/13/2018
ms.author: danlep
ms.openlocfilehash: 5d8904b5906adbdab68989b3a5cf9c3975c23533
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "61347087"
---
# <a name="azure-container-registry-authentication-with-service-principals"></a>Аутентификация в реестре контейнеров Azure с помощью субъектов-служб

С помощью субъекта-службы Azure Active Directory (Azure AD) вы можете предоставить образу контейнера доступ `docker push` и `pull` к реестру контейнеров. Субъект-служба позволяет предоставлять автоматический доступ к службам и приложениям.

## <a name="what-is-a-service-principal"></a>Что такое субъект-служба?

*Субъекты-службы* в Azure AD используются для доступа к ресурсам Azure в подписке. Их можно считать пользователями, представляющими конкретную службу. Слово "служба" здесь имеет широкое значение и включает любое приложение, службу или платформу, которым нужен доступ к ресурсам. Субъекту-службе можно присвоить права доступа, ограниченные конкретными ресурсами. После этого вам останется лишь настроить применение этого субъекта-службы для доступа к ресурсам из приложения или службы.

В контексте реестра контейнеров Azure субъект-служба Azure AD может получать разрешения на получение, на передачу и получение или другие права для частного реестра в Azure. Полный список см. в статье, посвященной [ролям и разрешениям реестра контейнеров Azure](container-registry-roles.md).

## <a name="why-use-a-service-principal"></a>Почему именно субъект-служба?

Субъект-служба Azure AD позволяет предоставить ограниченный доступ к закрытому реестру контейнеров. Для каждого приложении и для каждой службы можно создать отдельный субъект-службу и настроить для каждого из них правильные права доступа к реестру. Кроме того, вы сможете в любой момент легко изменить реквизиты или отменить доступ для каждого конкретного субъекта-службы, поскольку его учетные данные применяются только в одном приложении или службе.

Например, для веб-приложения можно создать субъект-службу с правами `pull`, а для системы разработки — другой субъект-службу с правами доступа `push` и `pull`. Если позднее вам придется передать разработку приложения другим сотрудникам, вы сможете просто заменить учетные данные первого субъекта-службы, ничего не изменяя в системе разработки.

## <a name="when-to-use-a-service-principal"></a>Когда следует использовать субъект-службу

Субъект-службы следует очень удобны для предоставления доступа к реестру при работе со **сценариями с автоматическим доступом**. Это позволяет приложениям, службам и (или) скриптам передавать или получать образы контейнеров в полностью автоматическом режиме или без участия оператора.

Для отдельных обращений к реестру, например, чтобы вручную извлечь отдельный образ контейнера на рабочую станцию разработки, лучше войти в реестр с собственным [удостоверением Azure AD](container-registry-authentication.md#individual-login-with-azure-ad) (например, с помощью команды [az acr login][az-acr-login]).

[!INCLUDE [container-registry-service-principal](../../includes/container-registry-service-principal.md)]

## <a name="sample-scripts"></a>Примеры скриптов

На GitHub можно найти предыдущие примеры сценариев для Azure CLI, а также версии для Azure PowerShell:

* [Azure CLI][acr-scripts-cli]
* [Azure PowerShell][acr-scripts-psh]

## <a name="next-steps"></a>Дальнейшие действия

Создав субъект-службу и предоставив ему доступ к реестру контейнеров, вы сможете применять его учетные данные в приложениях и службах для автономного взаимодействия с реестром. Учетные данные субъекта-службы можно использовать из любой службы Azure, которая может выполнить проверку подлинности в реестре контейнеров Azure. Примеры приведены ниже.

* [Аутентификация с помощью Реестра контейнеров Azure из службы Azure Kubernetes](container-registry-auth-aks.md)
* [Authenticate with Azure Container Registry from Azure Container Instances](container-registry-auth-aci.md) (Аутентификация с помощью реестра контейнеров Azure из службы "Экземпляры контейнеров Azure")

<!-- LINKS - External -->
[acr-scripts-cli]: https://github.com/Azure/azure-docs-cli-python-samples/tree/master/container-registry
[acr-scripts-psh]: https://github.com/Azure/azure-docs-powershell-samples/tree/master/container-registry

<!-- LINKS - Internal -->
[az-acr-login]: /cli/azure/acr#az-acr-login
