---
title: Тег и версии образов в реестре контейнеров Azure
description: Рекомендации по использованию тегов и управление версиями Docker образы контейнеров
services: container-registry
author: stevelasker
ms.service: container-registry
ms.topic: article
ms.date: 07/10/2019
ms.author: steve.lasker
ms.openlocfilehash: bd00fd4f8dd247c766eb34849ecf9de603c5171b
ms.sourcegitcommit: 66237bcd9b08359a6cce8d671f846b0c93ee6a82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2019
ms.locfileid: "67800397"
---
# <a name="recommendations-for-tagging-and-versioning-container-images"></a>Рекомендации для пометки и управление версиями образов контейнеров

При отправке развертывание образов контейнеров в реестр контейнеров и затем развернуть их, необходимо указывать стратегию тегов к образу и управления версиями. В этой статье рассматриваются два подхода, и каждый место во время жизненным циклом контейнеров.

* **Стабильная теги** -теги, которые можно повторно использовать, например, для основной или дополнительный, такие как *mycontainerimage:1.0*.
* **Уникальный теги** -другой тег для каждого изображения, можно отправить в реестр, такие как *mycontainerimage:abc123*.

## <a name="stable-tags"></a>Стабильные теги

**Рекомендация**. Использовать стабильный теги, чтобы поддерживать **базовые образы** для сборок в контейнер. Избегайте развертываний стабильной тегов, так как эти теги продолжать получать обновления и может привести к несогласованности в рабочих средах.

*Стабильная теги* означает разработчиком или систему сборки, можно продолжать извлекать определенным тегом, который продолжает получать обновления. Стабильная версия не означает, что содержимое заморожены. Вместо этого стабильная версия означает, что образ должен быть стабильной для цель этой версии. Чтобы оставаться «стабильный», он может обслуживаться для применения исправлений или обновлений framework.

### <a name="example"></a>Пример

Команда framework поставляется версии 1.0. Они знают, что они будут входят обновления, включая незначительные изменения. Для поддержки стабильной теги для данной основной и вспомогательной версии, они имеют два набора стабильной тегов.

* `:1` — тег стабильной для основного номера версии. `1` Представляет версии 1.* «последние» или «последняя».
* `:1.0`-стабильный тег для версии 1.0, позволяя разработчику для привязки к обновлениям 1.0, не следует накатить до 1.1 после ее выпуска.

Команда также использует `:latest` тег, который указывает на последний стабильный тег, независимо от того, какие текущей основной версии.

Когда базовый образ наличие обновлений, или любого типа служебный выпуск платформы, образов с помощью стабильной теги обновляются до последней хэш-кода, представляющий самая последняя стабильная версия этой версии.

В этом случае основной и дополнительный теги постоянно выполняется. Из сценария базового образа это позволяет владельцу изображения для обслуживаемых изображений.

## <a name="unique-tags"></a>Уникальный теги

**Рекомендация**. Используйте уникальный теги для **развертываний**, особенно в среде, которая может масштабироваться на нескольких узлах. Вам больше подойдет намеренно развертываний согласованность версий компонентов. Если контейнер будет перезагружен или оркестратор масштабируется дополнительные экземпляры узлов не будут случайно извлечь более новой версии, согласуется с другими узлами.

Уникальный теги просто означает, что каждое изображение, помещены в реестр имеет уникальный маркер. Теги, повторно не используются. Существует несколько шаблонов, которые помогут вам создать уникальный тегов, в том числе:

* **Метка даты и времени** -этот подход довольно часто, поскольку можно четко скажите, когда был создан образ. Но, как сопоставлять его обратно в систему сборки? У вас найти сборку, которая была создана, в то же время? Какой часовой пояс, а вы участвуете? Являются ли все сборки системы калибровки в формат UTC?
* **Фиксация Git** — этот подход работает, пока не будет запущена, поддерживают обновления базового образа. Если происходит обновление базового образа, систему сборки запускает с той же фиксации Git, как предыдущее построение. Однако базовый образ имеет новое содержимое. Как правило, предоставляет фиксации Git *semi*-стабильных тега.
* **Манифеста дайджест** -каждый образ контейнера, отправленных в реестр контейнеров связан с манифестом, определяемый уникальный хэш SHA-256, или хэш-кода. Хотя уникальным, дайджест, long, трудно читать и некоррелированных со средой разработки.
* **Идентификатор сборки** -этот параметр нельзя лучше, так как вероятно, добавочные, и он позволяет сопоставлять к определенной сборки, чтобы найти все артефакты и журналы. Тем не менее такие как манифеста хэш-кода и возможно сложной для пользователя.

  Если ваша организация использует несколько систем сборки, подставив префикс тега с именем системы сборки — одна из разновидностей этот параметр: `<build-system>-<build-id>`. Например сборок может отличить от системы сборки Jenkins команды разработчиков API и конвейеры Azure команды web системы сборки.

## <a name="next-steps"></a>Следующие шаги

Более подробное описание концепций в этой статье, см. в записи блога [тегов Docker: Советы и рекомендации для пометки и управление версиями образов docker](https://stevelasker.blog/2018/03/01/docker-tagging-best-practices-for-tagging-and-versioning-docker-images/).

Чтобы добиться максимальной производительности и экономичное использование реестра контейнеров Azure, см. в разделе [советы и рекомендации для реестра контейнеров Azure](container-registry-best-practices.md).

<!-- IMAGES -->


<!-- LINKS - Internal -->

