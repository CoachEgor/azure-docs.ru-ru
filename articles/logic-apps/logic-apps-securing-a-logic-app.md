---
title: Безопасный доступ к данным
description: Безопасный доступ к входным данным, выводам, триггерам на основе запросов, истории выполнения, задачам управления и доступу к другим ресурсам в приложениях логики Azure
services: logic-apps
ms.suite: integration
ms.reviewer: klam, logicappspm
ms.topic: conceptual
ms.date: 02/04/2020
ms.openlocfilehash: e591a7035db82425952a16f5c4c220e25d8517fe
ms.sourcegitcommit: b55d7c87dc645d8e5eb1e8f05f5afa38d7574846
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81457184"
---
# <a name="secure-access-and-data-in-azure-logic-apps"></a>Безопасный доступ и данные в приложениях логики Azure

Для управления доступом и защитой данных в приложениях Логики Azure можно настроить безопасность в следующих областях:

* [Доступ к триггерам на основе запросов](#secure-triggers)
* [Доступ к логическим операциям приложений](#secure-operations)
* [Доступ к вводам и выводам истории](#secure-run-history)
* [Доступ к вводам параметров](#secure-action-parameters)
* [Доступ к службам и системам, используемым из логических приложений](#secure-requests)

<a name="secure-triggers"></a>

## <a name="access-to-request-based-triggers"></a>Доступ к триггерам на основе запросов

Если приложение логики использует триггер на основе запросов, который получает входящие вызовы или запросы, такие как триггер [Запроса](../connectors/connectors-native-reqres.md) или [Webhook,](../connectors/connectors-native-webhook.md) можно ограничить доступ, чтобы только авторизованные клиенты могли позвонить в ваше приложение логики. Все запросы, полученные логическим приложением, шифруются и закрепляются протоколом Transport Layer Security (TLS), ранее известным как Secure Sockets Layer (SSL).

Вот параметры, которые помогут вам обеспечить безопасный доступ к этому типу триггера:

* [Создание подписей общего доступа](#sas)
* [Ограничение входящих IP-адресов](#restrict-inbound-ip-addresses)
* [Добавление OAuth Active Directory Azure или другой безопасности](#add-authentication)

<a name="sas"></a>

### <a name="generate-shared-access-signatures-sas"></a>Создание подписей общего доступа (SAS)

Каждая конечная точка запроса в логическом приложении имеет [общую подпись доступа (SAS)](https://docs.microsoft.com/rest/api/storageservices/constructing-a-service-sas) в URL-адресе конечных точек, которая соответствует этому формату:

`https://<request-endpoint-URI>sp=<permissions>sv=<SAS-version>sig=<signature>`

Каждый URL-адрес содержит параметр `sp` `sv`запроса, `sig` описанный в этой таблице:

| Параметр запроса | Описание |
|-----------------|-------------|
| `sp` | Определяет разрешения на использование разрешенных методов HTTP. |
| `sv` | Определяет версию SAS для использования для создания подписи. |
| `sig` | Опознавательный код подписи для использования для проверки подлинности доступа к триггеру. Эта подпись генерируется с помощью алгоритма SHA256 с секретным ключом доступа на всех путях и свойствах URL. Никогда не подвергался воздействию и не публиковался, этот ключ хранится в зашифрованном и хранится в приложении логики. Приложение логики авторизует только те триггеры, которые содержат действительную подпись, созданную с помощью секретного ключа. |
|||

Для получения дополнительной информации об обеспечении доступа с SAS, см.

* [Повторное создание ключей доступа](#access-keys)
* [Создание URL-адресов обратного вызова с истекающим сроком действия](#expiring-urls)
* [Создание URL-адресов с использованием первичного или вторичного ключа](#primary-secondary-key)

<a name="access-keys"></a>

#### <a name="regenerate-access-keys"></a>Повторное создание ключей доступа

Для создания нового ключа доступа безопасности в любое время воспользуйтесь API-кодом Azure REST или порталом Azure. Все ранее сгенерированные URL-адреса, которые используют старый ключ, аннулируются и больше не имеют разрешения на запуск приложения логики. URL-адреса, которые вы получаете после регенерации, подписаны новым ключом доступа.

1. На [портале Azure](https://portal.azure.com)откройте логическое приложение с ключом, который требуется для регенерации.

1. В меню приложения логики в разделе **Параметры** выберите **Ключи доступа**.

1. Выберите ключ, который вы хотите регенерировать и закончить процесс.

<a name="expiring-urls"></a>

#### <a name="create-expiring-callback-urls"></a>Создание URL-адресов обратного вызова с истекающим сроком действия

Если вы делитесь URL-адресом конечных точек для триггера на основе запроса с другими сторонами, можно создать URL-адреса обратного вызова, которые используют определенные ключи и имеют срокгод действия. Таким образом, вы можете легко свернуть клавиши или ограничить доступ к запуску приложения логики на основе определенного периода времени. Чтобы указать дату истечения срока действия URL-адреса, используйте [API Logic Apps REST,](https://docs.microsoft.com/rest/api/logic/workflowtriggers)например:

``` http
POST /subscriptions/<Azure-subscription-ID>/resourceGroups/<Azure-resource-group-name>/providers/Microsoft.Logic/workflows/<workflow-name>/triggers/<trigger-name>/listCallbackUrl?api-version=2016-06-01
```

В теле, включите свойство `NotAfter`с помощью строки даты JSON. Это свойство возвращает URL-адрес обратного вызова, действительный только до даты и времени, заданной для параметра `NotAfter`.

<a name="primary-secondary-key"></a>

#### <a name="create-urls-with-primary-or-secondary-secret-key"></a>Создание URL-адресов с использованием первичного или вторичного секретного ключа

При генерации или перечне URL-адресов обратного вызова для триггера на основе запроса можно указать ключ, который можно использовать для подписания URL-адреса. Для создания URL-адреса, подписанного определенным ключом, используйте [API Logic Apps REST,](https://docs.microsoft.com/rest/api/logic/workflowtriggers)например:

``` http
POST /subscriptions/<Azure-subscription-ID>/resourceGroups/<Azure-resource-group-name>/providers/Microsoft.Logic/workflows/<workflow-name>/triggers/<trigger-name>/listCallbackUrl?api-version=2016-06-01
```

Добавьте в текст свойство `KeyType` со значением `Primary` или `Secondary`. Это свойство возвращает URL-адрес, подписанный указанным ключом безопасности.

<a name="restrict-inbound-ip"></a>

### <a name="restrict-inbound-ip-addresses"></a>Ограничение входящих IP-адресов

Наряду с общей подписью доступа (SAS) можно ограничить клиентов, которые могут вызвать ваше приложение логики. Например, если вы управляете конечным пунктом запроса с помощью управления API Azure, можно ограничить приложение логики приемом запросов только с IP-адреса для экземпляра Управления API.

#### <a name="restrict-inbound-ip-ranges-in-azure-portal"></a>Ограничьте входящие диапазоны IP-адресов на портале Azure

1. На [портале Azure](https://portal.azure.com)откройте логическое приложение в Logic App Designer.

1. В меню приложения логики в разделе **Параметры** выберите **Параметры рабочего процесса**.

1. Под **конфигурацией** > управления доступом**Разрешено входящих IP-адресов,** выберите **определенные диапазоны IP.**

1. В разделе **Диапазоны IP-адресов для триггеров** укажите диапазоны IP-адресов, которые принимает триггер.

   Допустимый диапазон IP-адресов имеет формат *x.x.x.x/x* или *x.x.x.x-x.x.x.x*.

Если вы хотите, чтобы ваше приложение логики запускалось только как вложенное приложение логики, из списка **входящих IP-адресов,** выберите **только другие логические приложения.** Эта опция записывает пустой массив ресурсу приложения логики. Таким образом, только вызовы из службы Logic Apps (родительские логические приложения) могут вызвать вложенное приложение логики.

> [!NOTE]
> Независимо от IP-адреса вы все равно можете запустить приложение логики, для которого установлен триггер на основе запроса, с помощью команды `/triggers/<trigger-name>/run`, используя REST API Azure или службу управления API. Однако этот сценарий по-прежнему требует проверки подлинности в отношении API Azure REST. Все события отображаются в журнале аудита Azure. Убедитесь, что вы устанавливаете политики управления доступом соответствующим образом.

#### <a name="restrict-inbound-ip-ranges-in-azure-resource-manager-template"></a>Ограничьте входящие диапазоны IP в шаблоне Менеджера ресурсов Azure

Если [автоматизировать развертывание для логических приложений с помощью шаблонов Resource Manager,](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)можно указать диапазоны IP, используя `accessControl` раздел с `triggers` разделом в определении ресурсов приложения логики, например:

``` json
{
   "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
   "contentVersion": "1.0.0.0",
   "parameters": {},
   "variables": {},
   "resources": [
      {
         "name": "[parameters('LogicAppName')]",
         "type": "Microsoft.Logic/workflows",
         "location": "[parameters('LogicAppLocation')]",
         "tags": {
            "displayName": "LogicApp"
         },
         "apiVersion": "2016-06-01",
         "properties": {
            "definition": {<workflow-definition>},
            "parameters": {},
            "accessControl": {
               "triggers": {
                  "allowedCallerIpAddresses": [
                     {
                        "addressRange": "192.168.12.0/23"
                     },
                     {
                        "addressRange": "2001:0db8::/64"
                     }
                  ]
               }
            }
         }
      }
   ],
   "outputs": {}
}
```

<a name="add-authentication"></a>

### <a name="add-azure-active-directory-oauth-or-other-security"></a>Добавление OAuth Active Directory Azure или другой безопасности

Чтобы добавить больше протоколов авторизации в логическое приложение, подумайте об использовании службы [управления API Azure.](../api-management/api-management-key-concepts.md) Эта услуга поможет вам разоблачить ваше приложение логики как API и предлагает богатый мониторинг, безопасность, политику и документацию для любой конечный точки. Управление API может предоставить общедоступную или частную конечную точку для вашего приложения логики. Чтобы авторизовать доступ к этой конечной точке, можно использовать [Azure Active Directory OAuth,](#azure-active-directory-oauth-authentication) [сертификат клиента](#client-certificate-authentication)или другие стандарты безопасности для авторизации доступа к этой конечной точке. Когда служба "Управление API" получает запрос, она отправляет его в приложение логики, выполняя при этом необходимые преобразования или устанавливая ограничения. Чтобы позволить только API Management запускать ваше логическое приложение, вы можете использовать входящие настройки диапазона IP-класса вашего приложения логики.

<a name="secure-operations"></a>

## <a name="access-to-logic-app-operations"></a>Доступ к логическим операциям приложений

Вы можете разрешить выполнять определенные задачи, такие как управление, редактирование и просмотр логических приложений только для конкретных пользователей или групп. Чтобы контролировать их разрешения, используйте [Azure Role-Based Control (RBAC),](../role-based-access-control/role-assignments-portal.md) чтобы можно было назначить настраиваемые или встроенные роли участникам подписки Azure:

* [Logic App Contributor](../role-based-access-control/built-in-roles.md#logic-app-contributor): Позволяет управлять логическими приложениями, но вы не можете изменить доступ к ним.

* [Оператор logic App:](../role-based-access-control/built-in-roles.md#logic-app-operator)Позволяет читать, включать и отключать логические приложения, но вы не можете отредачь или обновить их.

Чтобы запретить другим пользователям изменять или удалять приложение логики, можно использовать [блокировку ресурсов Azure](../azure-resource-manager/management/lock-resources.md). Эта возможность не позволяет другим изменять или удалять производственные ресурсы.

<a name="secure-run-history"></a>

## <a name="access-to-run-history-data"></a>Доступ к данным истории выполнения

Во время запуска приложения логики все данные [шифруются во время транзита](../security/fundamentals/encryption-overview.md#encryption-of-data-in-transit) с помощью Transport Layer Security (TLS) и [в состоянии покоя.](../security/fundamentals/encryption-atrest.md) Когда приложение логики завершает работу, можно просматривать историю для этого запуска, включая шаги, которые запускали вместе со статусом, продолжительностью, входами и выходами для каждого действия. Эта богатая деталь дает представление о том, как работало приложение логики и где вы можете начать устранение возникающих проблем.

При просмотре истории запуска приложения логики Logic Apps проверяет подлинность доступа, а затем предоставляет ссылки на входы и выходы для запросов и ответов для каждого запуска. Однако для действий, обрабатывающих любые пароли, секреты, ключи или другую конфиденциальную информацию, необходимо запретить другим пользователям просматривать и получать доступ к этим данным. Например, если приложение логики получает секрет от [Azure Key Vault](../key-vault/general/overview.md) для использования при проверке подлинности действия HTTP, необходимо скрыть этот секрет из представления.

Для управления доступом к входным данным и выводам в истории запуска приложения логики у вас есть следующие параметры:

* [Ограничьте доступ по диапазону IP-адресов.](#restrict-ip)

  Эта опция позволяет обеспечить безопасный доступ к истории выполнения на основе запросов из определенного диапазона IP-адресов.

* [Скрыть данные из истории выполнения с помощью запутывания.](#obfuscate)

  Во многих триггерах и действиях можно скрыть их входы, выходы или оба из истории выполнения приложения логики.

<a name="restrict-ip"></a>

### <a name="restrict-access-by-ip-address-range"></a>Ограничение доступа по диапазону IP-адресов

Можно ограничить доступ к входным данным и выводам в истории запуска приложения логики, чтобы просматривать эти данные можно только в запросах из определенных диапазонов IP-адресов. Например, чтобы заблокировать доступ к входным данным и выводам, укажите диапазон IP-адресов, `0.0.0.0-0.0.0.0`например. Только человек с разрешениями администратора может удалить это ограничение, которое предоставляет возможность "просто в срок" доступ к данным приложения логики. Можно указать диапазоны IP, которые можно ограничить либо с помощью портала Azure, либо в шаблоне Azure Resource Manager, который используется для развертывания приложения логики.

#### <a name="restrict-ip-ranges-in-azure-portal"></a>Ограничьте диапазоны IP на портале Azure

1. Откройте приложение логики в конструкторе приложений логики на портале Azure.

1. В меню приложения логики в разделе **Параметры** выберите **Параметры рабочего процесса**.

1. Под **конфигурацией** > управления доступом**Разрешено входящих IP-адресов,** выберите **определенные диапазоны IP.**

1. В разделе **Диапазоны IP-адресов для содержимого** укажите диапазоны, которые могут получать доступ к содержимому входных и выходных данных. 

   Допустимый диапазон IP-адресов имеет формат *x.x.x.x/x* или *x.x.x.x-x.x.x.x*.

#### <a name="restrict-ip-ranges-in-azure-resource-manager-template"></a>Ограничьте диапазоны IP в шаблоне менеджера ресурсов Azure

Если [автоматизировать развертывание для логических приложений с помощью шаблонов Resource Manager,](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)можно указать диапазоны IP, используя `accessControl` раздел с `contents` разделом в определении ресурсов приложения логики, например:

``` json
{
   "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
   "contentVersion": "1.0.0.0",
   "parameters": {},
   "variables": {},
   "resources": [
      {
         "name": "[parameters('LogicAppName')]",
         "type": "Microsoft.Logic/workflows",
         "location": "[parameters('LogicAppLocation')]",
         "tags": {
            "displayName": "LogicApp"
         },
         "apiVersion": "2016-06-01",
         "properties": {
            "definition": {<workflow-definition>},
            "parameters": {},
            "accessControl": {
               "contents": {
                  "allowedCallerIpAddresses": [
                     {
                        "addressRange": "192.168.12.0/23"
                     },
                     {
                        "addressRange": "2001:0db8::/64"
                     }
                  ]
               }
            }
         }
      }
   ],
   "outputs": {}
}
```

<a name="obfuscate"></a>

### <a name="hide-data-from-run-history-by-using-obfuscation"></a>Скрыть данные из истории выполнения с помощью запутывания

Многие триггеры и действия имеют настройки, чтобы скрыть входы, выходы или оба из истории запуска приложения логики. Вот некоторые [соображения для рассмотрения,](#obfuscation-considerations) когда вы используете эти настройки, чтобы помочь вам защитить эти данные.

#### <a name="hide-inputs-and-outputs-in-the-designer"></a>Скрыть входы и выходы в конструкторе

1. На [портале Azure](https://portal.azure.com)откройте логическое приложение в Logic App Designer.

   ![Открытое приложение логики в Logic App Designer](./media/logic-apps-securing-a-logic-app/open-sample-logic-app-in-designer.png)

1. На спусковом крючке или действии, где вы хотите скрыть конфиденциальные данные, выберите эллипсы **(...**) кнопку, а затем выберите **Настройки.**

   ![Открыть настройки триггера или действия](./media/logic-apps-securing-a-logic-app/open-action-trigger-settings.png)

1. Включите либо **безопасные входы,** **безопасные выходы,** либо и то, и другое. По завершении нажмите кнопку **Готово**.

   ![Включите "Безопасные входы" или "Безопасные выходы"](./media/logic-apps-securing-a-logic-app/turn-on-secure-inputs-outputs.png)

   Действие или триггер теперь показывает значок блокировки в заглавной панели.

   ![Действие или триггерная панель заголовка показывает значок блокировки](./media/logic-apps-securing-a-logic-app/lock-icon-action-trigger-title-bar.png)

   Токены, представляющие защищенные выходы из предыдущих действий, также отображают значки блокировки. Например, при выборе такого вывода из списка динамического содержимого для использования в действии маркер показывает значок блокировки.

   ![Выберите токен для обеспеченного вывода](./media/logic-apps-securing-a-logic-app/select-secured-token.png)

1. После запуска приложения логики можно просмотреть историю для этого запуска.

   1. В панели **обзора** приложения логики выберите запуск, который вы хотите просмотреть.

   1. На **панели приложения Логика запустите** панель, расширьте действия, которые вы хотите просмотреть.

      Если вы решили скрыть как входные данные, так и выводы, эти значения теперь кажутся скрытыми.

      ![Скрытые входы и выходы в истории выполнения](./media/logic-apps-securing-a-logic-app/hidden-data-run-history.png)

<a name="secure-data-code-view"></a>

#### <a name="hide-inputs-and-outputs-in-code-view"></a>Скрыть входы и выводы в представлении кода

В базовом определении триггера или `runtimeConfiguration.secureData.properties` действия добавляйте или обновляйте массив с помощью одного или обоих этих значений:

* `"inputs"`: Обеспечивает входные данные в истории выполнения.
* `"outputs"`: Обеспечивает выходы в истории выполнения.

Вот некоторые [соображения для рассмотрения,](#obfuscation-considerations) когда вы используете эти настройки, чтобы помочь вам защитить эти данные.

```json
"<trigger-or-action-name>": {
   "type": "<trigger-or-action-type>",
   "inputs": {
      <trigger-or-action-inputs>
   },
   "runtimeConfiguration": {
      "secureData": {
         "properties": [
            "inputs",
            "outputs"
         ]
      }
   },
   <other-attributes>
}
```

<a name="obfuscation-considerations"></a>

#### <a name="considerations-when-hiding-inputs-and-outputs"></a>Рассмотрение при сокрытии входов и выходов

* При затмевании входных данных или выходов на триггере или действии Logic Apps не отправляет защищенные данные в аналитику журналов Azure. Кроме того, вы не можете добавить [отслеживаемые свойства](../logic-apps/monitor-logic-apps-log-analytics.md#extend-data) к этому триггеру или действию для мониторинга.

* [API логических приложений для обработки истории рабочего процесса](https://docs.microsoft.com/rest/api/logic/) не возвращает защищенные выходы.

* Чтобы скрыть выходы от действия, которое скрывает входные данные или явно скрывает выходы, вручную включите **безопасные выходы** в этом действии.

* Убедитесь, что вы включите **безопасные входы** или **безопасные выходы** в действиях ниже по течению, где вы ожидаете, что история выполнения затмит эти данные.

  **Настройка безопасных выходов**

  При ручном включении **безопасных выходов** в триггере или действии Logic Apps обеспечивает эти выходы в истории выполнения. Если действие ниже по течению явно использует эти защищенные выходы в качестве входов, Logic Apps скрывает входные данные этого действия в истории выполнения, но *не позволяет* настройка **безопасных входов** действия.

  ![Защищенные выходы в качестве входов и влияние вниз по течению на большинство действий](./media/logic-apps-securing-a-logic-app/secure-outputs-as-inputs-flow.png)

  Действия Compose, Parse JSON и Response с только настройками **безопасных входных данных.** При включении параметр также скрывает выходы этих действий. Если эти действия явно используют защищенные выводы вверх по течению в качестве входов, Logic Apps скрывает входы и выводы этих действий, но *не позволяет* настройка **безопасных входов** этих действий. Если действие ниже по течению явно использует скрытые выходы из Compose, Parse JSON или действия ответа в качестве входов, Logic Apps *не скрывает входы или выходы этого действия ниже по течению.*

  ![Защищенные выходы в качестве входов с воздействием на конкретные действия](./media/logic-apps-securing-a-logic-app/secure-outputs-as-inputs-flow-special.png)

  **Настройка безопасных входных данных**

  При ручном входе **безопасных входных данных** в триггере или действии Logic Apps обеспечивает эти входные данные в истории выполнения. Если действие ниже по течению явно использует видимые выходы из этого триггера или действия в качестве входов, Logic Apps скрывает входы этого восходящего действия в истории выполнения, но *не позволяет* **безопасные входы** в этом действии и не скрывает выводы этого действия.

  ![Безопасные входные ресурсы и влияние вниз по течению на большинство действий](./media/logic-apps-securing-a-logic-app/secure-inputs-impact-on-downstream.png)

  Если в действиях Compose, Parse JSON и Response явно используются видимые выходы из триггера или действия, которые имеют защищенные входы, Logic Apps скрывает входы и выводы этих действий, но *не позволяет* настройка **безопасных входов** этих действий. Если действие ниже по течению явно использует скрытые выходы из Compose, Parse JSON или действия ответа в качестве входов, Logic Apps *не скрывает входы или выходы этого действия ниже по течению.*

  ![Безопасные входные ресурсы и влияние вниз по течению на конкретные действия](./media/logic-apps-securing-a-logic-app/secure-inputs-flow-special.png)

<a name="secure-action-parameters"></a>

## <a name="access-to-parameter-inputs"></a>Доступ к вводам параметров

При развертывании в разных средах следует параметризировать значения в определении рабочего процесса, которые варьируются в зависимости от этих сред. Таким образом, можно избежать жестко закодированных данных, используя [шаблон Azure Resource Manager](../azure-resource-manager/templates/overview.md) для развертывания приложения логики, защиты конфиденциальных данных путем определения защищенных параметров и передачи этих данных в виде отдельных входных данных по [параметрам шаблона](../azure-resource-manager/templates/template-parameters.md) с помощью [файла параметра.](../azure-resource-manager/templates/parameter-files.md)

Например, если вы проверяете подлинность действий HTTP с помощью [Azure Active Directory OAuth,](#azure-active-directory-oauth-authentication)можно определить и скрыть параметры, которые принимают идентификатор клиента и секрет клиента, которые используются для проверки подлинности. Чтобы определить эти параметры в приложении `parameters` логики, используйте раздел в определении рабочего процесса приложения логики и шаблоне менеджера ресурсов для развертывания. Чтобы скрыть значения параметров, которые вы не хотите показывать при редактировании приложения логики `securestring` `secureobject` или просмотре истории выполнения, определите параметры, используя или введите и при необходимости используйте кодирование. Параметры, которые имеют этот тип, не возвращаются с определением ресурса и недоступны при просмотре ресурса после развертывания. Чтобы получить доступ к этим значениям `@parameters('<parameter-name>')` параметров во время выполнения, используйте выражение внутри определения рабочего процесса. Это выражение оценивается только во время выполнения и описывается [языком определения рабочего процесса.](../logic-apps/logic-apps-workflow-definition-language.md)

> [!NOTE]
> Если вы используете параметр в заголовке запроса или теле, этот параметр может быть виден при просмотре истории выполнения и исходящих запросов приложения логики и исходящих запросах HTTP. Убедитесь, что вы также установить политики доступа к содержимому соответственно. Вы также можете использовать [запутывание,](#obfuscate) чтобы скрыть входы и выходы в истории выполнения. Заголовки авторизации никогда не отображаются во входных и выходных данных. Таким образом, если используется секрет, то он не извлекается.

Для получения дополнительной информации, см. эти разделы в этой теме:

* [Безопасные параметры в определениях рабочего процесса](#secure-parameters-workflow)
* [Скрыть данные из истории выполнения с помощью запутывания](#obfuscate)

Если [автоматизировать развертывание для логических приложений с помощью шаблонов Resource Manager,](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)можно определить `securestring` параметры `secureobject` [защищенных шаблонов,](../azure-resource-manager/templates/template-parameters.md)которые оцениваются при развертывании, с помощью и типов. Чтобы определить параметры шаблона, используйте `parameters` раздел верхнего уровня шаблона, который отделен `parameters` и отличается от раздела определения рабочего процесса. Чтобы унаполнить значения параметров шаблона, используйте отдельный [файл параметров.](../azure-resource-manager/templates/parameter-files.md)

Например, если вы используете секреты, можно определить и использовать параметры защищенного шаблона, которые извлекают эти секреты из [Убежища ключей Azure](../key-vault/general/overview.md) при развертывании. Затем можно ссылаться на хранилище ключей и секрет в файле параметра. Дополнительные сведения см. в следующих статьях:

* [Передайте чувствительные значения при развертывании с помощью Azure Key Vault](../azure-resource-manager/templates/key-vault-parameter.md)
* [Безопасные параметры в шаблонах управления ресурсами Azure](#secure-parameters-deployment-template) позже в этой теме

<a name="secure-parameters-workflow"></a>

### <a name="secure-parameters-in-workflow-definitions"></a>Безопасные параметры в определениях рабочего процесса

Для защиты конфиденциальной информации в определении рабочего процесса приложения логики используйте защищенные параметры, чтобы эта информация не была видна после сохранения приложения логики. Например, предположим, что действие HTTP требует элементарной аутентификации, в которой используется имя пользователя и пароль. В определении рабочего `parameters` процесса раздел `basicAuthPasswordParam` `basicAuthUsernameParam` определяет и параметры `securestring` с помощью типа. Затем определение действия ссылается на `authentication` эти параметры в разделе.

```json
"definition": {
   "$schema": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#",
   "actions": {
      "HTTP": {
         "type": "Http",
         "inputs": {
            "method": "GET",
            "uri": "https://www.microsoft.com",
            "authentication": {
               "type": "Basic",
               "username": "@parameters('basicAuthUsernameParam')",
               "password": "@parameters('basicAuthPasswordParam')"
            }
         },
         "runAfter": {}
      }
   },
   "parameters": {
      "basicAuthPasswordParam": {
         "type": "securestring"
      },
      "basicAuthUsernameParam": {
         "type": "securestring"
      }
   },
   "triggers": {
      "manual": {
         "type": "Request",
         "kind": "Http",
         "inputs": {
            "schema": {}
         }
      }
   },
   "contentVersion": "1.0.0.0",
   "outputs": {}
}
```

<a name="secure-parameters-deployment-template"></a>

### <a name="secure-parameters-in-azure-resource-manager-templates"></a>Безопасные параметры в шаблонах управления ресурсами Azure

[Шаблон менеджера ресурсов](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md) для приложения `parameters` логики имеет несколько разделов. Для защиты паролей, ключей, секретов и другой конфиденциальной информации определите защищенные `securestring` параметры `secureobject` на уровне шаблона и на уровне определения рабочего процесса с помощью типа или типа. Затем эти значения можно хранить в [Хранилище ключей Azure](../key-vault/general/overview.md) и использовать [файл параметров](../azure-resource-manager/templates/parameter-files.md) для ссылки на хранилище ключей и секрет. Затем шаблон получает эту информацию при развертывании. Для получения дополнительной [информации](../azure-resource-manager/templates/key-vault-parameter.md)см.

Вот более подробная `parameters` информация об этих разделах:

* На верхнем `parameters` уровне шаблона раздел определяет параметры значений, которые шаблон использует при *развертывании.* Например, эти значения могут включать строки соединения для определенной среды развертывания. Затем эти значения можно хранить в отдельном [параметре,](../azure-resource-manager/templates/parameter-files.md)что упрощает изменение этих значений.

* В определении ресурсов приложения логики, но вне `parameters` определения рабочего процесса, раздел определяет значения параметров определения рабочего процесса. В этом разделе эти значения можно назначить с помощью выражений шаблонов, которые ссылаются на параметры шаблона. Эти выражения оцениваются при развертывании.

* В определении рабочего `parameters` процесса раздел определяет параметры, которые приложение логики использует во время выполнения. Затем можно ссылаться на эти параметры в рабочем процессе приложения логики, используя выражения определения рабочего процесса, которые оцениваются во время выполнения.

Этот пример шаблона, который имеет несколько `securestring` защищенных определений параметров, которые используют тип:

| Имя параметра | Описание |
|----------------|-------------|
| `TemplatePasswordParam` | Параметр шаблона, который принимает пароль, который затем передается параметру определения рабочего `basicAuthPasswordParam` процесса |
| `TemplateUsernameParam` | Параметр шаблона, который принимает имя пользователя, которое затем `basicAuthUserNameParam` передается параметру определения рабочего процесса |
| `basicAuthPasswordParam` | Параметр определения рабочего процесса, который принимает пароль для базовой проверки подлинности в действии HTTP |
| `basicAuthUserNameParam` | Параметр определения рабочего процесса, который принимает имя пользователя для базовой проверки подлинности в действии HTTP |
|||

```json
{
   "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
   "contentVersion": "1.0.0.0",
   "parameters": {
      "LogicAppName": {
         "type": "string",
         "minLength": 1,
         "maxLength": 80,
         "metadata": {
            "description": "Name of the Logic App."
         }
      },
      "TemplatePasswordParam": {
         "type": "securestring"
      },
      "TemplateUsernameParam": {
         "type": "securestring"
      },
      "LogicAppLocation": {
         "type": "string",
         "defaultValue": "[resourceGroup().location]",
         "allowedValues": [
            "[resourceGroup().location]",
            "eastasia",
            "southeastasia",
            "centralus",
            "eastus",
            "eastus2",
            "westus",
            "northcentralus",
            "southcentralus",
            "northeurope",
            "westeurope",
            "japanwest",
            "japaneast",
            "brazilsouth",
            "australiaeast",
            "australiasoutheast",
            "southindia",
            "centralindia",
            "westindia",
            "canadacentral",
            "canadaeast",
            "uksouth",
            "ukwest",
            "westcentralus",
            "westus2"
         ],
         "metadata": {
            "description": "Location of the Logic App."
         }
      }
   },
   "variables": {},
   "resources": [
      {
         "name": "[parameters('LogicAppName')]",
         "type": "Microsoft.Logic/workflows",
         "location": "[parameters('LogicAppLocation')]",
         "tags": {
            "displayName": "LogicApp"
         },
         "apiVersion": "2016-06-01",
         "properties": {
            "definition": {
               "$schema": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-0601/workflowdefinition.json#",
               "actions": {
                  "HTTP": {
                     "type": "Http",
                     "inputs": {
                        "method": "GET",
                        "uri": "https://www.microsoft.com",
                        "authentication": {
                           "type": "Basic",
                           "username": "@parameters('basicAuthUsernameParam')",
                           "password": "@parameters('basicAuthPasswordParam')"
                        }
                     },
                  "runAfter": {}
                  }
               },
               "parameters": {
                  "basicAuthPasswordParam": {
                     "type": "securestring"
                  },
                  "basicAuthUsernameParam": {
                     "type": "securestring"
                  }
               },
               "triggers": {
                  "manual": {
                     "type": "Request",
                     "kind": "Http",
                     "inputs": {
                        "schema": {}
                     }
                  }
               },
               "contentVersion": "1.0.0.0",
               "outputs": {}
            },
            "parameters": {
               "basicAuthPasswordParam": {
                  "value": "[parameters('TemplatePasswordParam')]"
               },
               "basicAuthUsernameParam": {
                  "value": "[parameters('TemplateUsernameParam')]"
               }
            }
         }
      }
   ],
   "outputs": {}
}
```

<a name="secure-requests"></a>

## <a name="access-to-services-and-systems-called-from-logic-apps"></a>Доступ к службам и системам, используемым из логических приложений

Вот несколько способов, которые можно помочь защитить конечные точки, которые принимают звонки или запросы из приложения логики:

* Добавление аутентификации к исходящим запросам.

  При работе с триггером или действием на основе HTTP, который делает исходящие вызовы, такие как HTTP, HTTP и Swagger или Webhook, вы можете добавить аутентификацию в запрос, отправленный вашим приложением логики. Например, можно использовать следующие типы аутентификации:

  * [Базовая аутентификация](#basic-authentication)

  * [Аутентификация сертификата клиента](#client-certificate-authentication)

  * [Активная аутентификация Каталог OAuth](#azure-active-directory-oauth-authentication)

  * [Проверка подлинности управляемого удостоверения](#managed-identity-authentication)
  
  Для получения дополнительной информации [см. Добавить аутентификацию к исходящим вызовам](#add-authentication-outbound) позже в этой теме.

* Ограничьте доступ с IP-адресов приложения логики.

  Все вызовы в конечные точки из логических приложений происходят из определенных назначенных IP-адресов, которые основаны на регионах ваших логических приложений. Можно добавить фильтрацию, чтобы принимать запросы только от этих IP-адресов. Чтобы получить эти IP-адреса, [см.](logic-apps-limits-and-config.md#configuration)

* Улучшение безопасности при подключении к штатным системам.

  Azure Logic Apps обеспечивает интеграцию с этими службами, чтобы обеспечить более безопасную и надежную контактную связь.

  * Локальный шлюз данных

    Многие управляемые разъемы в Azure Logic Apps облегчают защищенное подключение к предприимчивым системам, таким как File System, S'L, SharePoint и DB2. Шлюз отправляет данные из локальных источников по шифрованным каналам через Служебную шину Azure. Весь трафик происходит как защищенный исходящий трафик от агента шлюза. Узнайте, [как работает локальный шлюз данных](logic-apps-gateway-install.md#gateway-cloud-service).

  * Подключение через aPI-управление API Azure

    [Служба "Управление API Azure"](../api-management/api-management-key-concepts.md) имеет возможности локального подключения, включая VPN типа "сеть — сеть" и интеграцию ExpressRoute, для защищенного прокси-сервера и подключения к локальным системам. Из рабочего процесса приложения логики в Logic App Designer можно выбрать API, который подвергается воздействию API Management, который обеспечивает быстрый доступ к внутренним системам.

<a name="add-authentication-outbound"></a>

## <a name="add-authentication-to-outbound-calls"></a>Добавление аутентификации в исходящие вызовы

Конечные точки HTTP и HTTPS поддерживают различные виды аутентификации. На основе триггера или действия, которые используются для исходящих вызовов или запросов, которые получают доступ к этим конечным точкам, можно выбрать из различных диапазонов типов аутентификации. Чтобы защитить любую конфиденциальную информацию, которую обрабатывает приложение логики, используйте защищенные параметры и кодируйте данные по мере необходимости. Для получения дополнительной информации об использовании и обеспечении параметров [см.](#secure-action-parameters)

> [!NOTE]
> В Logic App Designer **свойство аутентификации** может быть скрыто на некоторых триггерах и действиях, где можно указать тип проверки подлинности. Чтобы сделать свойство отображаться в этих случаях, на триггере или действии, откройте новый список **параметров Добавить** и выберите **аутентификацию.** Для получения дополнительной информации смотрите [доступ authenticate с управляемой идентификацией](../logic-apps/create-managed-service-identity.md#authenticate-access-with-identity).

| Authentication type (Тип проверки подлинности) | Поддерживаются |
|---------------------|--------------|
| [Basic](#basic-authentication) | Управление API Azure, службы приложений Azure, HTTP, HTTP и Swagger, HTTP Webhook |
| [Сертификат клиента](#client-certificate-authentication) | Управление API Azure, службы приложений Azure, HTTP, HTTP и Swagger, HTTP Webhook |
| [Active Directory OAuth](#azure-active-directory-oauth-authentication) | Управление API Azure, службы приложений Azure, функции Azure, HTTP, HTTP и Swagger, HTTP Webhook |
| [Сырой](#raw-authentication) | Управление API Azure, службы приложений Azure, функции Azure, HTTP, HTTP и Swagger, HTTP Webhook |
| [Управляемая идентичность](#managed-identity-authentication) | Управление API Azure, службы приложений Azure, функции Azure, HTTP, HTTP и Swagger, HTTP Webhook |
|||

<a name="basic-authentication"></a>

### <a name="basic-authentication"></a>обычная проверка подлинности

Если доступна [опция Basic,](../active-directory-b2c/secure-rest-api.md) укажите эти значения свойств:

| Недвижимость (дизайнер) | Property (JSON) | Обязательно | Значение | Описание |
|---------------------|-----------------|----------|-------|-------------|
| **Аутентификация** | `type` | Да | Basic | Тип проверки подлинности для использования |
| **Имя пользователя** | `username` | Да | <*имя пользователя*>| Имя пользователя для аутентификации доступа к целевой конечной точке службы |
| **Пароль** | `password` | Да | <*Пароль*> | Пароль для аутентификации доступа к целевой конечной точке службы |
||||||

При использовании [защищенных параметров](#secure-action-parameters) для обработки и защиты конфиденциальной информации, например, в [шаблоне Azure Resource Manager для автоматизации развертывания,](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)можно использовать выражения для доступа к этим значениям параметров во время выполнения. В этом примере определение действия HTTP `type` `Basic` определяет аутентификацию как [функцию параметров ()](../logic-apps/workflow-definition-language-functions-reference.md#parameters) для получения значений параметров:

```json
"HTTP": {
   "type": "Http",
   "inputs": {
      "method": "GET",
      "uri": "@parameters('endpointUrlParam')",
      "authentication": {
         "type": "Basic",
         "username": "@parameters('userNameParam')",
         "password": "@parameters('passwordParam')"
      }
  },
  "runAfter": {}
}
```

<a name="client-certificate-authentication"></a>

### <a name="client-certificate-authentication"></a>Проверка подлинности на основе сертификата клиента

Если доступна опция [«Сертификат клиента»,](../active-directory/authentication/active-directory-certificate-based-authentication-get-started.md) укажите эти значения свойств:

| Недвижимость (дизайнер) | Property (JSON) | Обязательно | Значение | Описание |
|---------------------|-----------------|----------|-------|-------------|
| **Аутентификация** | `type` | Да | **Сертификат клиента** <br>or <br>`ClientCertificate` | Тип аутентификации для использования для сертификатов клиентов TLS/SSL. В то время как самоподписанные сертификаты поддерживаются, самоподписанные сертификаты для TLS/SSL не поддерживаются. |
| **Pfx** | `pfx` | Да | <*закодированный-pfx-файл-контент*> | Содержимое файла обмена личной информацией (PFX-файла) с кодировкой base64. <p><p>Чтобы преобразовать файл PFX в базовый64-кодированный формат, можно использовать PowerShell, выдыхая следующие действия: <p>1. Сохранить содержимое сертификата в переменной: <p>   `$pfx_cert = get-content 'c:\certificate.pfx' -Encoding Byte` <p>2. Преобразуйте содержимое сертификата с помощью функции `ToBase64String()` и сохраните его в текстовый файл: <p>   `[System.Convert]::ToBase64String($pfx_cert) | Out-File 'pfx-encoded-bytes.txt'` |
| **Пароль** | `password`| нет | <*пароль для pfx-файл*> | Пароль для доступа к PFX-файлу |
|||||

При использовании [защищенных параметров](#secure-action-parameters) для обработки и защиты конфиденциальной информации, например, в [шаблоне Azure Resource Manager для автоматизации развертывания,](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)можно использовать выражения для доступа к этим значениям параметров во время выполнения. В этом примере определение действия HTTP `type` `ClientCertificate` определяет аутентификацию как [функцию параметров ()](../logic-apps/workflow-definition-language-functions-reference.md#parameters) для получения значений параметров:

```json
"HTTP": {
   "type": "Http",
   "inputs": {
      "method": "GET",
      "uri": "@parameters('endpointUrlParam')",
      "authentication": {
         "type": "ClientCertificate",
         "pfx": "@parameters('pfxParam')",
         "password": "@parameters('passwordParam')"
      }
   },
   "runAfter": {}
}
```

Для получения дополнительной информации об обеспечении безопасности услуг с помощью аутентификации сертификата клиента см.

* [Улучшение безопасности API с помощью проверки подлинности сертификата клиента в управлении API Azure](../api-management/api-management-howto-mutual-certificates-for-clients.md)
* [Улучшение безопасности служб бэк-энда с помощью проверки подлинности сертификата клиента в Azure API Management](../api-management/api-management-howto-mutual-certificates.md)
* [Улучшение безопасности службы RESTfuL с помощью клиентских сертификатов](../active-directory-b2c/secure-rest-api.md)
* [Учетные данные сертификата для аутентификации приложения](../active-directory/develop/active-directory-certificate-credentials.md)
* [Использование TLS/SSL-сертификата в коде в Службе приложений Azure](../app-service/configure-ssl-certificate-in-code.md)

<a name="azure-active-directory-oauth-authentication"></a>

### <a name="azure-active-directory-oauth-authentication"></a>Активная аутентификация Azure Active Directory OAuth

Если доступен [опция Active Directory OAuth,](../active-directory/develop/about-microsoft-identity-platform.md) укажите следующие значения свойств:

| Недвижимость (дизайнер) | Property (JSON) | Обязательно | Значение | Описание |
|---------------------|-----------------|----------|-------|-------------|
| **Аутентификация** | `type` | Да | **Active Directory OAuth** <br>or <br>`ActiveDirectoryOAuth` | Тип проверки подлинности. Логические приложения в настоящее время следует [протоколу OAuth 2.0](../active-directory/develop/v2-overview.md). |
| **Authority** | `authority` | нет | <*URL-для-авторитета-эмитент токен-эмитент*> | URL-адрес органа, предоставляющего токен проверки подлинности. По умолчанию это значение равно `https://login.windows.net`. |
| **Клиент** | `tenant` | Да | <*арендатор-ID*> | Идентификатор клиента Azure Active Directory. |
| **Аудитории** | `audience` | Да | <*ресурсо-к-авторизации*> | Ресурс, который нужно использовать для авторизации, например `https://management.core.windows.net/`. |
| **Идентификатор клиента** | `clientId` | Да | <*клиент-ID*> | Идентификатор клиента для приложения, запрашивающего авторизацию. |
| **Тип учетных данных** | `credentialType` | Да | Сертификат <br>or <br>Секрет | Тип учетных данных, который клиент использует для запроса авторизации. Это свойство и значение не отображаются в базовом определении приложения логики, но определяет свойства, которые отображаются для выбранного типа учетных данных. |
| **Секрет** | `secret` | Да, но только для типа учетных данных "Secret" | <*клиент-секрет*> | Секрет клиента для запроса на авторизацию |
| **Pfx** | `pfx` | Да, но только для типа учетных данных "Сертификат" | <*закодированный-pfx-файл-контент*> | Содержимое файла обмена личной информацией (PFX-файла) с кодировкой base64. |
| **Пароль** | `password` | Да, но только для типа учетных данных "Сертификат" | <*пароль для pfx-файл*> | Пароль для доступа к PFX-файлу |
|||||

При использовании [защищенных параметров](#secure-action-parameters) для обработки и защиты конфиденциальной информации, например, в [шаблоне Azure Resource Manager для автоматизации развертывания,](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)можно использовать выражения для доступа к этим значениям параметров во время выполнения. В этом примере определение действия HTTP `type` `ActiveDirectoryOAuth`определяет сяодение подлинности как тип учетных данных как, `Secret`и использует [функцию параметров ()](../logic-apps/workflow-definition-language-functions-reference.md#parameters) для получения значений параметров:

```json
"HTTP": {
   "type": "Http",
   "inputs": {
      "method": "GET",
      "uri": "@parameters('endpointUrlParam')",
      "authentication": {
         "type": "ActiveDirectoryOAuth",
         "tenant": "@parameters('tenantIdParam')",
         "audience": "https://management.core.windows.net/",
         "clientId": "@parameters('clientIdParam')",
         "credentialType": "Secret",
         "secret": "@parameters('secretParam')"
     }
   },
   "runAfter": {}
}
```

<a name="raw-authentication"></a>

### <a name="raw-authentication"></a>Сырая аутентификация

Если **опция Raw** доступна, вы можете использовать этот тип проверки подлинности, когда вам придется использовать [схемы аутентификации,](https://iana.org/assignments/http-authschemes/http-authschemes.xhtml) которые не соответствуют [протоколу OAuth 2.0.](https://oauth.net/2/) С помощью этого типа вы вручную создаете значение заголовка авторизации, отправляемые с исходящих запросов, и указано значение заголовка в триггере или действии.

Например, вот пример заголовка для запроса HTTPS, который следует [протоколу OAuth 1.0:](https://tools.ietf.org/html/rfc5849)

```text
Authorization: OAuth realm="Photos",
   oauth_consumer_key="dpf43f3p2l4k3l03",
   oauth_signature_method="HMAC-SHA1",
   oauth_timestamp="137131200",
   oauth_nonce="wIjqoS",
   oauth_callback="http%3A%2F%2Fprinter.example.com%2Fready",
   oauth_signature="74KNZJeDHnMBp0EMJ9ZHt%2FXKycU%3D"
```

В триггере или действии, поддерживающем необработанную аутентификацию, укажите следующие значения свойств:

| Недвижимость (дизайнер) | Property (JSON) | Обязательно | Значение | Описание |
|---------------------|-----------------|----------|-------|-------------|
| **Аутентификация** | `type` | Да | Raw | Тип проверки подлинности для использования |
| **Значение** | `value` | Да | <*авторизация-стоимость заголовка*> | Значение заголовка авторизации для использования для проверки подлинности |
||||||

При использовании [защищенных параметров](#secure-action-parameters) для обработки и защиты конфиденциальной информации, например, в [шаблоне Azure Resource Manager для автоматизации развертывания,](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)можно использовать выражения для доступа к этим значениям параметров во время выполнения. В этом примере определение действия HTTP `type` `Raw`определяет проверку подлинности как [функцию параметров ()](../logic-apps/workflow-definition-language-functions-reference.md#parameters) для получения значений параметров:

```json
"HTTP": {
   "type": "Http",
   "inputs": {
      "method": "GET",
      "uri": "@parameters('endpointUrlParam')",
      "authentication": {
         "type": "Raw",
         "value": "@parameters('authHeaderParam')"
      }
   },
   "runAfter": {}
}
```

<a name="managed-identity-authentication"></a>

### <a name="managed-identity-authentication"></a>Проверка подлинности управляемого удостоверения

Если доступна [опция «Управляемая идентификация»,](../active-directory/managed-identities-azure-resources/overview.md) приложение логики может использовать установленную системой идентификацию или *единую* созданную вручную пользовательскую идентификацию для проверки подлинности доступа к ресурсам в других клиентах Active Directory (Azure AD) без входе. Azure управляет этим удостоверением за вас и помогает защитить учетные данные, потому что вам не нужно предоставлять или сменять секреты. Узнайте больше об [службах Azure, которые поддерживают управляемые идентификаторы для проверки подлинности Azure AD.](../active-directory/managed-identities-azure-resources/services-support-managed-identities.md#azure-services-that-support-azure-ad-authentication)

1. Прежде чем приложение логики может использовать управляемое удостоверение, выполните последующие действия в [доступе authenticate к ресурсам Azure, используя управляемые идентификаторы в приложениях логики Azure.](../logic-apps/create-managed-service-identity.md) Эти шаги позволяют управлять идентификатором в приложении логики и настроить доступ к целевому ресурсу Azure.

1. Прежде чем функция Azure может использовать управляемый иекфикатор, сначала [включите аутентификацию для функций Azure.](../logic-apps/logic-apps-azure-functions.md#enable-authentication-for-azure-functions)

1. В триггере или действии, в котором требуется использовать управляемое удостоверение, укажите следующие значения свойств:

   | Недвижимость (дизайнер) | Property (JSON) | Обязательно | Значение | Описание |
   |---------------------|-----------------|----------|-------|-------------|
   | **Аутентификация** | `type` | Да | **Управляемое удостоверение** <br>or <br>`ManagedServiceIdentity` | Тип проверки подлинности для использования |
   | **Управляемое удостоверение** | `identity` | Да | * **Система Назначенная Управляемая идентификация** <br>or <br>`SystemAssigned` <p><p>- *<, назначенные пользователем,удостоверяющими личность*> | Управляемый итог для использования |
   | **Аудитории** | `audience` | Да | <*целевой ресурс-ID*> | Идентификатор ресурса для целевого ресурса, к который необходимо получить доступ. <p>Например, `https://storage.azure.com/` токены доступа для проверки подлинности действительны для всех учетных записей хранения. Тем не менее, можно также указать `https://fabrikamstorageaccount.blob.core.windows.net` URL-адрес корневой службы, например для определенной учетной записи хранилища. <p>**Примечание:** Свойство **аудитории** может быть скрыто в некоторых триггерах или действиях. Чтобы сделать это свойство видимым в триггере или действии, откройте новый список **параметров и** выберите **аудиторию.** <p><p>**Важно:** Убедитесь, что этот идентификатор целевого ресурса *точно соответствует* значению, которое ожидает Azure AD, включая любые необходимые слэши. Таким образом, идентификатор `https://storage.azure.com/` ресурсов для всех учетных записей Azure Blob Storage требует слэйд. Однако идентификатор ресурса для определенной учетной записи хранилища не требует слэйд. Чтобы найти эти иные иные данные ресурсов, см. [службы Azure, поддерживающие Azure AD,](../active-directory/managed-identities-azure-resources/services-support-managed-identities.md#azure-services-that-support-azure-ad-authentication)— |
   |||||

   При использовании [защищенных параметров](#secure-action-parameters) для обработки и защиты конфиденциальной информации, например, в [шаблоне Azure Resource Manager для автоматизации развертывания,](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)можно использовать выражения для доступа к этим значениям параметров во время выполнения. В этом примере определение действия HTTP `type` `ManagedServiceIdentity` определяет аутентификацию как [функцию параметров ()](../logic-apps/workflow-definition-language-functions-reference.md#parameters) для получения значений параметров:

   ```json
   "HTTP": {
      "type": "Http",
      "inputs": {
         "method": "GET",
         "uri": "@parameters('endpointUrlParam')",
         "authentication": {
            "type": "ManagedServiceIdentity",
            "identity": "SystemAssigned",
            "audience": "https://management.azure.com/"
         },
      },
      "runAfter": {}
   }
   ```

## <a name="next-steps"></a>Следующие шаги

* [Автоматизация развертывания для приложений логики Azure](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)  
* [Мониторинг приложений логики](../logic-apps/monitor-logic-apps-log-analytics.md)  
* [Диагностика и устранение сбоев рабочих процессов в Azure Logic Apps](../logic-apps/logic-apps-diagnosing-failures.md)  
* [Автоматизация развертывания приложений логики](../logic-apps/logic-apps-azure-resource-manager-templates-overview.md)
