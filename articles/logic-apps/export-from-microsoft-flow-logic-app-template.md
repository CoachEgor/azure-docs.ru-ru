---
title: Экспорт потоков из Microsoft Flow в Azure Logic Apps
description: Перенос потоков из Microsoft Flow в Azure Logic Apps путем экспорта в качестве Azure Resource Manager шаблонов
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: klam, LADocs
ms.topic: conceptual
ms.date: 07/10/2019
ms.openlocfilehash: 82c4e55eff36a7da70e0304fc8152491a8030e04
ms.sourcegitcommit: a874064e903f845d755abffdb5eac4868b390de7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2019
ms.locfileid: "68441006"
---
# <a name="export-flows-from-microsoft-flow-and-deploy-to-azure-logic-apps"></a>Экспорт потоков из Microsoft Flow и их развертывание в Azure Logic Apps

Чтобы расширить и расширить возможности потока, можно перенести поток с [Microsoft Flow](https://flow.microsoft.com) на [Azure Logic Apps](../logic-apps/logic-apps-overview.md). Вы можете экспортировать последовательность в качестве шаблона Azure Resource Manager для приложения логики, развернуть шаблон приложения логики в группе ресурсов Azure, а затем открыть это приложение логики в конструкторе приложений логики.

> [!NOTE]
> Не все соединители Microsoft Flow доступны в Azure Logic Apps. Вы можете импортировать потоки с [эквивалентными соединителями](../connectors/apis-list.md) в Azure Logic Apps. Например, триггер кнопки, соединитель утверждения и соединитель уведомлений относятся к Microsoft Flow.
>
> Потоки на основе OpenAPI, экспортированные из Microsoft Flow, в настоящее время не поддерживаются для развертывания в качестве шаблонов приложений логики. 

## <a name="prerequisites"></a>предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [зарегистрируйтесь для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* Поток, который необходимо экспортировать из Microsoft Flow

## <a name="export-a-flow"></a>Экспорт последовательности

1. Войдите в [Microsoft Flow](https://flow.microsoft.com)и выберите **мои потоки**. Найдите и выберите свой поток. На панели инструментов нажмите кнопку с многоточием ( **...** ). Выберите **Экспорт** > **Logic Apps шаблон (. JSON)** .

   ![Экспорт потока](./media/export-from-microsoft-flow-logic-app-template/export-flow.png)

1. Сохраните шаблон в нужном расположении.

Дополнительные сведения см. [в разделе увеличение до Azure Logic Apps](https://flow.microsoft.com/blog/grow-up-to-logic-apps/).

## <a name="deploy-template-by-using-the-azure-portal"></a>Развертывание шаблона с помощью портал Azure

1. Войдите в [портал Azure](https://portal.azure.com) с помощью учетной записи Azure.

1. В главном меню Azure выберите команду **Создать ресурс**. В поле поиска введите "развертывание шаблона". Выберите **шаблоны развертывания (развернуть с помощью пользовательских шаблонов)** , а затем щелкните **создать**.

   ![Выберите "Шаблоны развертывания"](./media/export-from-microsoft-flow-logic-app-template/select-template-deployment.png)

1. В разделе **Настраиваемое развертывание**выберите **создать собственный шаблон в редакторе**.

   ![Выберите "создать собственный шаблон в редакторе".](./media/export-from-microsoft-flow-logic-app-template/build-template-in-editor.png)

1. На панели инструментов **изменение шаблона** выберите **загрузить файл**. Найдите и выберите шаблон JSON, экспортированный из Microsoft Flow, и нажмите кнопку **Открыть**.

   ![Выберите "загрузить файл".](./media/export-from-microsoft-flow-logic-app-template/load-file.png)

1. После того как в редакторе отобразятся JSON, параметры и ресурсы в шаблоне, выберите **сохранить**.
  
   ![Сохранить шаблон](./media/export-from-microsoft-flow-logic-app-template/save-template.png)

1. Теперь укажите эти входные параметры для шаблона:

   * Подписка Azure, используемая для выставления счетов
   * Группа ресурсов Azure
   * Расположение группы ресурсов Azure
   * Имя для ресурса приложения логики
   * Расположение ресурса приложения логики, если оно отличается от группы ресурсов Azure
   * Имя для ранее созданных подключений, которые может использовать приложение логики

      Если вы создаете первое приложение логики, все соединения создаются как новые, поэтому можно принять имена по умолчанию. В противном случае можно указать имена для ранее созданных подключений, которые можно использовать в нескольких приложениях логики.

   После предоставления этих сведений для шаблона просмотрите и примите условия Azure Marketplace для создания необходимых ресурсов Azure и выставления счетов по подписке Azure, а затем выберите **приобрести**.
  
   ![Укажите входные параметры для шаблона](./media/export-from-microsoft-flow-logic-app-template/template-input-parameters.png)

   Azure развертывает шаблон в качестве приложения логики в указанной группе ресурсов. Все приложения логики, перенесенные из Microsoft Flow, развертываются в отключенном состоянии.

1. Перед активацией приложения логики Авторизуйте все новые подключения, выполнив следующие действия.

   1. Откройте созданное приложение логики. В меню приложения логики выберите **Конструктор приложений логики**.

      Для каждого подключения, требующего авторизации, отображается значок предупреждения:

      ![Значок предупреждения](./media/export-from-microsoft-flow-logic-app-template/authorize-connections.png)

   1. Для каждого шага, для которого требуется авторизация подключения, разверните этот шаг и выберите **Добавить новый**.

      ![Добавить новое подключение](./media/export-from-microsoft-flow-logic-app-template/add-new-connection.png)

   1. Войдите в каждую службу или предоставьте необходимые учетные данные для авторизации подключения.

1. Сохраните приложение логики. Когда вы будете готовы активировать приложение логики, в меню приложения логики выберите **Обзор**, а затем выберите **включить**.

   ![Включение приложения логики](./media/export-from-microsoft-flow-logic-app-template/enable-logic-app.png)

1. Чтобы избежать запуска повторяющихся рабочих процессов, убедитесь, что вы деактивируете или удаляете исходный поток.

## <a name="deploy-template-by-using-visual-studio"></a>Развертывание шаблона с помощью Visual Studio

Если вы настроили Visual Studio с [предварительными требованиями](../logic-apps/quickstart-create-logic-apps-with-visual-studio.md#prerequisites) для создания приложений логики, вы можете развернуть экспортированный шаблон из Visual Studio, чтобы Azure Logic Apps.

1. В Visual Studio откройте файл шаблона, экспортированный из Microsoft Flow.

1. В Visual Studio создайте проект группы ресурсов Azure и выберите шаблон **приложения логики** , выполнив действия, описанные [в кратком руководстве. Создавайте автоматизированные задачи, процессы и рабочие процессы с помощью Azure Logic Apps](../logic-apps/quickstart-create-logic-apps-with-visual-studio.md)-Visual Studio, например:

   ![Создание проекта группы ресурсов Azure](./media/export-from-microsoft-flow-logic-app-template/create-azure-resource-group-project.png)

1. В обозреватель решений откройте файл **LogicApp. JSON** , если файл еще не открыт.

1. Скопируйте содержимое из экспортированного шаблона и перезапишите его содержимое в файле **LogicApp. JSON** .

1. Перед развертыванием приложения логики Авторизуйте все новые подключения, выполнив следующие действия.

   1. Откройте контекстное меню **LogicApp. JSON** и выберите **Открыть в конструкторе приложений логики**.

      ![Открытие шаблона с помощью конструктора приложений логики](./media/export-from-microsoft-flow-logic-app-template/open-logic-app-designer.png)

   1. При появлении запроса выберите подписку Azure и группу ресурсов, которые вы хотите использовать для развертывания приложения логики.

      ![Выберите подписку Azure и группу ресурсов](./media/export-from-microsoft-flow-logic-app-template/select-azure-subscription-resource-group-deployment.png)

      После того как приложение логики появится в конструкторе, все подключения, требующие авторизации, отображают значки предупреждений:

      ![Подключения со значками предупреждений](./media/export-from-microsoft-flow-logic-app-template/authorize-connections-vs.png)

   1. Для каждого шага, для которого требуется авторизация подключения, разверните этот шаг и выберите **Добавить новый**.

      ![Добавить новое подключение](./media/export-from-microsoft-flow-logic-app-template/add-new-connection-vs.png)

   1. Войдите в каждую службу или предоставьте необходимые учетные данные для авторизации подключения.

   1. Сохраните решение перед развертыванием приложения логики.

1. В Обозреватель решений откройте контекстное меню проекта и выберите пункт **развернуть** > **Новый**. Если отобразится запрос на вход в учетную запись Azure, выполните его.

1. При появлении запроса подтвердите подписку Azure, группу ресурсов Azure и другие параметры, которые вы хотите использовать для развертывания, например [файл параметров](../azure-resource-manager/resource-group-template-deploy.md#parameter-files) , который будет использоваться для передачи значений параметров шаблона, а затем нажмите кнопку **развернуть**.

   ![Подтверждение параметров развертывания](./media/export-from-microsoft-flow-logic-app-template/confirm-azure-subscription-resource-group-deployment.png)

1. Если появится окно **изменение параметров** , укажите имя для ресурса приложения логики в Azure и нажмите кнопку **сохранить**.  

   ![Изменить параметры развертывания](./media/export-from-microsoft-flow-logic-app-template/edit-parameters-deployment.png)

   При запуске развертывания его состояние отобразится в окне **Выходные данные** Visual Studio. Если состояние не отображается, откройте список **Показать вывод из** и выберите свою группу ресурсов Azure. Пример:

   ![Окно вывода](./media/export-from-microsoft-flow-logic-app-template/output-window.png)

   Если какие-либо подключения в приложении логики нуждаются в вводе данных, окно PowerShell открывается в фоновом режиме и запрашивает все необходимые пароли или секретные ключи. После ввода этих сведений развертывание продолжится.

   ![Проверка подлинности подключений](./media/export-from-microsoft-flow-logic-app-template/logic-apps-powershell-window.png)

   После завершения развертывания приложение логики публикуется, но не активируется в портал Azure.

1. Когда вы будете готовы активировать приложение логики на портал Azure, найдите и откройте приложение логики в конструкторе приложений логики. В меню приложения логики выберите **Обзор**, а затем выберите **включить**.

1. Чтобы избежать запуска повторяющихся рабочих процессов, убедитесь, что вы деактивируете или удаляете исходный поток.

Дополнительные сведения об этих шагах развертывания см. [в разделе Краткое руководство. Создание автоматизированных задач, процессов и рабочих процессов с помощью Azure Logic Apps — Visual Studio](../logic-apps/quickstart-create-logic-apps-with-visual-studio.md#deploy-to-Azure)

## <a name="next-steps"></a>Следующие шаги

* Дополнительные сведения о [соединителях для Azure Logic Apps](../connectors/apis-list.md)
* Дополнительные сведения о [Azure Logic Apps](../logic-apps/logic-apps-overview.md)
