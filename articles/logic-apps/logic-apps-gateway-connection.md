---
title: Доступ к источникам данных в помещениях
description: Подключение к информационным источникам данных из приложений Azure Logic Apps путем создания нахотданного ресурса шлюза данных Azure
services: logic-apps
ms.suite: integration
ms.reviewer: arthii, logicappspm
ms.topic: article
ms.date: 02/14/2020
ms.openlocfilehash: 096943ff796f9c12c7f8715cadce5c3085965d4d
ms.sourcegitcommit: 62c5557ff3b2247dafc8bb482256fef58ab41c17
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/03/2020
ms.locfileid: "80657136"
---
# <a name="connect-to-on-premises-data-sources-from-azure-logic-apps"></a>Подключение к локальным источникам данных из Azure Logic Apps

Прежде чем получить доступ к источникам данных в помещениях из логических приложений, необходимо создать ресурс Azure после [установки *локального шлюза данных* на локальном компьютере.](../logic-apps/logic-apps-gateway-install.md) Затем ваши логические приложения используют этот ресурс шлюза Azure в триггерах и действиях, [предоставляемых предприимчиками,](../connectors/apis-list.md#on-premises-connectors) доступными для приложений Azure Logic Apps.

В этой статье показано, как создать ресурс шлюза Azure для ранее [установленного шлюза на локальном компьютере.](../logic-apps/logic-apps-gateway-install.md) Для получения дополнительной информации о шлюзе, см [Как работает шлюз](../logic-apps/logic-apps-gateway-install.md#gateway-cloud-service).

> [!TIP]
> Чтобы подключиться к виртуальным сетям Azure, вместо этого рассмотрите возможность создания среды службы интеграции. Для этого см. статью [*Доступ к ресурсам виртуальных сетей Azure из Azure Logic Apps с использованием сред службы интеграции (ISE)*](../logic-apps/connect-virtual-network-vnet-isolated-environment-overview.md). 

Сведения о том, как использовать шлюз с другими службами, см. в следующих статьях:

* [Microsoft Power Автоматизировать предприимки данных шлюз](/power-automate/gateway-reference)
* [Локальный шлюз данных](/power-bi/service-gateway-onprem)
* [Microsoft Power Apps на месте данных шлюз](/powerapps/maker/canvas-apps/gateway-reference)
* [Локальный шлюз данных](../analysis-services/analysis-services-gateway.md)

<a name="supported-connections"></a>

## <a name="supported-data-sources"></a>Поддерживаемые источники данных

В Azure Logic Apps шлюз данных для местных данных поддерживает [предприимчики](../connectors/apis-list.md#on-premises-connectors) для этих источников данных:

* BizTalk Server 2016
* Файловая система
* IBM DB2  
* IBM Informix
* IBM MQ
* MySQL
* Oracle Database
* PostgreSQL
* SAP
* SharePoint Server
* SQL Server
* Teradata

Azure Logic Apps поддерживает операции чтения и записи через шлюз данных. Тем не менее, эти операции имеют [ограничения на их размер полезной нагрузки.](https://docs.microsoft.com/data-integration/gateway/service-gateway-onprem#considerations) Хотя сам шлюз не несет дополнительных расходов, [модель ценообразования Logic Apps](../logic-apps/logic-apps-pricing.md) применяется к этим разъемым и другим операциям в приложениях Azure Logic Apps.

## <a name="prerequisites"></a>Предварительные требования

* Вы уже [установили локальный шлюз данных на локальном компьютере.](../logic-apps/logic-apps-gateway-install.md)

* Вы используете ту [же учетную запись и подписку Azure,](../logic-apps/logic-apps-gateway-install.md#requirements) которая использовалась при установке шлюза данных. Эта учетная запись Azure должна принадлежать одному [арендатору или каталогу Azure Active Directory (Azure AD).](../active-directory/fundamentals/active-directory-whatis.md#terminology)

* Установка шлюза еще не зарегистрирована и востребована другим ресурсом шлюза Azure.

  При создании ресурса шлюза на портале Azure вы выбираете установку шлюза, которая ссылается на ресурс шлюза и только на ресурс шлюза. В приложениях Azure Logic Apps на месте триггеры и действия используют ресурс шлюза для подключения к источникам данных. В этих триггерах и действиях вы выбираете подписку Azure и связанный с ним ресурс шлюза, который вы хотите использовать. Каждый ресурс шлюза связывает только одну установку шлюза, которая связывает только одну учетную запись Azure.

  > [!NOTE]
  > Только администратор шлюза может создать ресурс шлюза на портале Azure. В настоящее время принципы обслуживания не поддерживаются. 

<a name="create-gateway-resource"></a>

## <a name="create-azure-gateway-resource"></a>Создание ресурса шлюза Azure

После установки шлюза на локальном компьютере создайте ресурс Azure для вашего шлюза.

1. Вопийте на [портал Azure](https://portal.azure.com) с той же учетной записью Azure, которая использовалась для установки шлюза.

1. В поле поиска портала Azure введите "шлюз данных" и выберите **шлюзы данных.**

   ![Поиск элемента "Локальный шлюз данных"](./media/logic-apps-gateway-connection/search-for-on-premises-data-gateway.png)

1. Под **шлюзами данных,** выберите **Добавить**.

   ![Добавление нового ресурса Azure для шлюза данных](./media/logic-apps-gateway-connection/add-azure-data-gateway-resource.png)

1. Под **шлюзом подключения,** предоставьте эту информацию для вашего ресурса шлюза. Когда все будет готово, выберите **Создать**.

   | Свойство | Описание |
   |----------|-------------|
   | **Имя ресурса** | Укажите имя для вашего шлюза ресурс, который`-`содержит только`_`буквы, цифры, дефисы ( ), подчеркивает ( ), скобки (`(`, `)`или периоды (`.`). |
   | **Подписка** | Выберите подписку Azure для учетной записи Azure, которая использовалась для установки шлюза. Подписка по умолчанию основана на учетной записи Azure, которая использовалась для входа. |
   | **Группа ресурсов** | [Группа ресурсов Azure,](../azure-resource-manager/management/overview.md) которую необходимо использовать |
   | **Расположение** | Тот же регион или место, которое было выбрано для облачного сервиса шлюза во время [установки шлюза.](../logic-apps/logic-apps-gateway-install.md) В противном случае установка шлюза не будет отображаться в списке **имен установки.** Местоположение приложения логики может отличаться от местоположения ресурса шлюза. |
   | **Имя установки** | Выберите установку шлюза, которая появляется в списке только при соблюдении этих условий: <p><p>- Установка шлюза использует ту же область, что и ресурс шлюза, который вы хотите создать. <br>- Установка шлюза не связана с другим ресурсом шлюза Azure. <br>- Установка шлюза связана с той же учетной записью Azure, которую вы используете для создания ресурса шлюза. <br>Учетная запись Azure принадлежит к одному [арендатору или каталогу Azure Active Directory (Azure AD)](../active-directory/fundamentals/active-directory-whatis.md#terminology) и является той же учетной записью, которая использовалась для установки шлюза. <p><p>Для получения дополнительной информации смотрите раздел [«Часто задаваемые вопросы».](#faq) |
   |||

   Вот пример, который показывает установку шлюза, которая находится в том же регионе, что и ресурс шлюза, и связана с той же учетной записью Azure:

   ![Предоставление подробной информации для создания ресурса шлюза данных](./media/logic-apps-gateway-connection/on-premises-data-gateway-create-connection.png)

<a name="connect-logic-app-gateway"></a>

## <a name="connect-to-on-premises-data"></a>Подключение к локальным данным

Когда вы создадите ресурс шлюза и свяжете свою подписку Azure с этим ресурсом, можно будет создать подключение между приложением логики и локальным источником данных с помощью шлюза.

1. На портале Azure создайте приложение логики или откройте его в конструкторе приложений логики.

1. Добавьте соединитель, который поддерживает локальные подключения, например **SQL Server**.

1. Установите флажок **Connect via on-premises data gateway** (Подключение через локальный шлюз данных).

1. Под **шлюзами**из списка **подписок** выберите подписку Azure с нужным ресурсом шлюза.

1. Из списка **шлюзов подключения,** который отображает доступные ресурсы шлюза в выбранной подписке, выберите ресурс шлюза, который вы хотите. Каждый ресурс шлюза связан с одной установкой шлюза.

   > [!NOTE]
   > Список шлюзов включает ресурсы шлюзов в других регионах, поскольку местоположение приложения логики может отличаться от местоположения ресурса шлюза. 

1. Укажите уникальное имя соединения и другую необходимую информацию, которая зависит от соединения, которое вы хотите создать.

   Уникальное имя соединения поможет вам легко найти это соединение позже, особенно если вы создаете несколько соединений. При необходимости добавьте также имя домена для вашего имени пользователя.

   Например:

   ![Создание подключения между логическим приложением и шлюзом данных](./media/logic-apps-gateway-connection/logic-app-gateway-connection.png)

1. Когда все будет готово, выберите **Создать**.

Подключение шлюза теперь готово к использованию приложением логики.

## <a name="edit-connection"></a>Изменение подключения

Чтобы обновить настройки для подключения шлюза, можно отсвазать соединение.

1. Чтобы найти все подключения API только для приложения логики, в меню приложения логики, в **рамках инструментов разработки,** выберите **соединения API.**

   ![В меню приложения логики выберите "API Connections"](./media/logic-apps-gateway-connection/logic-app-api-connections.png)

1. Выберите необходимое соединение шлюза, а затем выберите **подключение Edit API.**

   > [!TIP]
   > Если обновления не всняются, попробуйте [остановить и перезапустить учетную запись службы Windows шлюза](../logic-apps/logic-apps-gateway-install.md#restart-gateway) для установки шлюза.

Чтобы найти все подключения API, связанные с подпиской Azure, выполните следующие действия.

* Из меню портала Azure выберите **все службы** > **Web** > **API Connections.**
* Из меню портала Azure выберите **все ресурсы.** Установите фильтр **типа** для **подключения API.**

<a name="change-delete-gateway-resource"></a>

## <a name="delete-gateway-resource"></a>Удаление ресурса шлюза

Чтобы создать другой ресурс шлюза, связать установку шлюза с другим ресурсом шлюза или удалить ресурс шлюза, можно удалить ресурс шлюза, не влияя на установку шлюза.

1. Из меню портала Azure выберите **все ресурсы**или ищите и выберите **все ресурсы** с любой страницы. Найдите и выберите ресурс шлюза данных.

1. Если он еще не выбран, в меню ресурсов шлюза выберите **Локальный шлюз данных**. На панели инструментов ресурса шлюза выберите **Удалить**.

   Пример:

   ![Удаление шлюза в Azure](./media/logic-apps-gateway-connection/delete-on-premises-data-gateway.png)

<a name="faq"></a>

## <a name="frequently-asked-questions"></a>Вопросы и ответы

**В:** Почему моя установка шлюза не отображается при создании ресурса шлюза в Azure? <br/>
**Ответ**. Такая ошибка может произойти по нескольким причинам.

* Ваша учетная запись Azure должна быть той же учетной записью, которая связана с установкой шлюза на локальном компьютере. Убедитесь, что вы вписались в портал Azure с той же итог, что и с установкой шлюза. Кроме того, убедитесь, что учетная запись Azure принадлежит одному [арендатору или каталогу Azure AD](../active-directory/fundamentals/active-directory-whatis.md#terminology) и настроена на того же арендатора или каталогAzA AD, который использовался при установке шлюза.

* Ваш шлюз ресурса и шлюз установки должны использовать тот же регион. Однако местоположение приложения логики может отличаться от местоположения ресурса шлюза.

* Установка шлюза уже зарегистрирована и востребована другим ресурсом шлюза. Эти установки не будут отображаться в списке **имен установки.** Чтобы просмотреть регистрацию шлюзов на портале Azure, найдите все ресурсы Azure, которые имеют тип **шлюзов на базе данных** во *всех* подписях Azure. Чтобы отвязать установку шлюза с другого ресурса шлюза, [см.](#change-delete-gateway-resource)

[!INCLUDE [existing-gateway-location-changed](../../includes/logic-apps-existing-gateway-location-changed.md)]

## <a name="next-steps"></a>Дальнейшие действия

* [Защита приложений логики](./logic-apps-securing-a-logic-app.md)
* [Распространенные примеры и сценарии использования приложений логики](./logic-apps-examples-and-scenarios.md)
