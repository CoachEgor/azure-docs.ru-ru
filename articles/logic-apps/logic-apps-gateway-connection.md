---
title: Доступ к локальным источникам данных из Azure Logic Apps | Документация Майкрософт
description: Подключение к локальным источникам данных из приложений логики с помощью создания локального шлюза данных
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: arthii, LADocs
ms.topic: article
ms.date: 10/01/2018
ms.openlocfilehash: 2b9e1c153c3fa9b17145eb6c3c8f3ed02e3bf40f
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60304186"
---
# <a name="connect-to-on-premises-data-sources-from-azure-logic-apps"></a>Подключение к локальным источникам данных из Azure Logic Apps

Чтобы получить доступ к источникам данных из ваших логических приложений, создайте ресурс локального шлюза данных на портале Azure. Затем приложения логики могут использовать [локальные соединители](../logic-apps/logic-apps-gateway-install.md#supported-connections). В этой статье показано, как создать ресурс шлюза Azure *после* [загрузки и установки шлюза на локальном компьютере](../logic-apps/logic-apps-gateway-install.md). 

> [!TIP]
> Чтобы подключиться к виртуальным сетям Azure, вместо этого рассмотрите возможность создания среды службы интеграции. Для этого см. статью [*Доступ к ресурсам виртуальных сетей Azure из Azure Logic Apps с использованием сред службы интеграции (ISE)*](../logic-apps/connect-virtual-network-vnet-isolated-environment-overview.md). 

Сведения о том, как использовать шлюз с другими службами, см. в следующих статьях:

* [Локальный шлюз данных](https://powerbi.microsoft.com/documentation/powerbi-gateway-onprem/)
* [Управление локальным шлюзом данных в Microsoft Flow](https://flow.microsoft.com/documentation/gateway-manage/)
* [Управление локальным шлюзом данных в PowerApps](https://powerapps.microsoft.com/tutorials/gateway-management/)
* [Локальный шлюз данных](../analysis-services/analysis-services-gateway.md)

## <a name="prerequisites"></a>Технические условия

* Имеется [загруженный и установленный шлюз данных на локальном компьютере](../logic-apps/logic-apps-gateway-install.md).

* Установка шлюза еще не связана с ресурсом шлюза в Azure. Установку шлюза можно связать только с одним ресурсом шлюза, что происходит при создании ресурса шлюза и выборе установки шлюза. Эта привязка делает установку шлюза недоступной для других ресурсов.

* При входе на портал Azure и создании ресурса шлюза необходимо использовать ту же учетную запись входа в систему, которая была использовалась для [установки локального шлюза данных](../logic-apps/logic-apps-gateway-install.md#requirements), и ту же [подписку Azure](https://docs.microsoft.com/azure/architecture/cloud-adoption-guide/adoption-intro/subscription-explainer), которая использовалась для установки этого шлюза. Если у вас еще нет подписки Azure, <a href="https://azure.microsoft.com/free/" target="_blank">получите бесплатную учетную запись Azure</a>.

* Для создания и обслуживания ресурса шлюза на портале Azure [учетной записи службы Windows](../logic-apps/logic-apps-gateway-install.md#windows-service-account) требуются по крайней мере разрешения **участника**. Локальный шлюз данных работает как служба Windows и настроен для использования `NT SERVICE\PBIEgwService` в качестве учетных данных входа службы Windows. 

  > [!NOTE]
  > Учетная запись службы Windows отличается от учетной записи, которая использовалась для подключения к локальным источникам данных, и от рабочей или учебной учетной записи Azure, которая использовалась для входа в облачные службы.

## <a name="download-and-install-gateway"></a>Скачивание и установка шлюза

Прежде чем выполнить действия, описанные в этой статье, убедитесь, что шлюз установлен на локальном компьютере.
Если это еще не сделано, выполните следующие действия, чтобы [скачать и установить локальный шлюз данных](../logic-apps/logic-apps-gateway-install.md). 

<a name="create-gateway-resource"></a>

## <a name="create-azure-resource-for-gateway"></a>Создание ресурса Azure для шлюза

После установки шлюза на локальном компьютере можно создать ресурс Azure для шлюза. На этом шаге также связывается ресурс шлюза с подпиской Azure.

1. Войдите на <a href="https://portal.azure.com" target="_blank">портале Azure</a>. Убедитесь, что используется тот же рабочий или учебный адрес электронной почты Azure, что и при установке шлюза.

2. В главном меню Azure выберите **Создать ресурс** > 
**Интеграция** > **Локальный шлюз данных**.

   ![Поиск элемента "Локальный шлюз данных"](./media/logic-apps-gateway-connection/find-on-premises-data-gateway.png)

3. На странице **Создание шлюза для подключения** для ресурса шлюза укажите такие сведения.

   | Свойство | ОПИСАНИЕ | 
   |----------|-------------|
   | **Имя** | Имя ресурса шлюза | 
   | **Подписка** | Имя подписки Azure, которое должно совпадать с подпиской приложения логики. Подписка по умолчанию основана на учетной записи Azure, которая использовалась для входа. | 
   | **Группа ресурсов** | Имя [группы ресурсов Azure](../azure-resource-manager/resource-group-overview.md) для упорядочения связанных ресурсов | 
   | **Местоположение.** | Azure ограничивает расположение тем же регионом, выбранным для облачной службы шлюза во время [установки шлюза](../logic-apps/logic-apps-gateway-install.md). <p>**Примечание**. Убедитесь, что расположение ресурса шлюза совпадает с расположением облачной службы шлюза. В противном случае установка вашего шлюза может не отобразиться в списке установленных шлюзов, который вы можете выбрать на следующем шаге. Вы можете выбрать разные регионы для ресурса шлюза и вашего приложения логики. | 
   | **Имя установки** | Если установка шлюза еще не выбрана, выберите шлюз, установленный ранее. | 
   | | | 

   Вот пример: 

   ![Предоставление сведений для создания локального шлюза данных](./media/logic-apps-gateway-connection/createblade.png)

4. Чтобы добавить ресурс шлюза на панель мониторинга Azure, выберите **Закрепить на панели мониторинга**. Когда все будет готово, выберите **Создать**.

   Чтобы в любое время найти или просмотреть шлюз, в главном меню Azure выберите **Все службы**. 
   В поле поиска введите "on-premises data gateways", а затем выберите **Локальные шлюзы данных**.

   ![Поиск элемента On-premises Data Gateways (Локальные шлюзы данных)](./media/logic-apps-gateway-connection/find-on-premises-data-gateway-enterprise-integration.png)

<a name="connect-logic-app-gateway"></a>

## <a name="connect-to-on-premises-data"></a>Подключение к локальным данным

Когда вы создадите ресурс шлюза и свяжете свою подписку Azure с этим ресурсом, можно будет создать подключение между приложением логики и локальным источником данных с помощью шлюза.

1. На портале Azure создайте приложение логики или откройте его в конструкторе приложений логики.

2. Добавьте соединитель, который поддерживает локальные подключения, например **SQL Server**.

3. Теперь настройте подключение.

   1. Установите флажок **Connect via on-premises data gateway** (Подключение через локальный шлюз данных). 

   2. Для параметра **Шлюзы** выберите ресурс шлюза, созданный ранее. 

      Несмотря на то, что расположение подключения шлюза должно существовать в том же регионе, что и приложение логики, можно выбрать шлюз в другом регионе.

   3. Укажите уникальное имя подключения и другие необходимые сведения. 

      Уникальное имя подключения позволяет легко идентифицировать подключение позже, особенно при создании нескольких подключений. При необходимости добавьте также имя домена для вашего имени пользователя.
   
      Вот пример: 

      ![Создание подключения между логическим приложением и шлюзом данных](./media/logic-apps-gateway-connection/blankconnection.png)

   4. Когда все будет готово, выберите **Создать**. 

Подключение шлюза теперь готово к использованию приложением логики.

## <a name="edit-connection"></a>Изменение подключения

После того как вы создадите подключение шлюза для приложения логики, возможно, вам понадобится обновить параметры этого подключения.

1. Найдите подключение шлюза.

   * Чтобы найти все подключения API только для определенного приложения логики, в меню приложения логики в разделе **Средства разработки** выберите **Подключения API**. 
   
     ![Переход к приложению логики, выбор "Подключения API"](./media/logic-apps-gateway-connection/logic-app-find-api-connections.png)

   * Чтобы найти все подключения API, связанные с подпиской Azure, выполните следующие действия. 

     * Из главного меню Azure перейдите к **Все службы** > **Web** > **Подключения API**. 
     * Или из главного меню Azure перейдите к **Все ресурсы**.

2. Выберите необходимое подключение шлюза, а затем выберите **Правка подключения API**.

   > [!TIP]
   > Если ваши обновления не вступают в силу, попробуйте [остановить и перезапустить службу Windows шлюза](./logic-apps-gateway-install.md#restart-gateway).

<a name="change-delete-gateway-resource"></a>

## <a name="delete-gateway-resource"></a>Удаление ресурса шлюза

Чтобы создать другой ресурс шлюза, связать ваш шлюз с другим ресурсом или удалить ресурс шлюза, вы можете удалить его, не затрагивая установку шлюза. 

1. В главном меню Azure щелкните **Все ресурсы**. 

2. Найдите и выберите ресурс шлюза данных.

3. Если он еще не выбран, в меню ресурсов шлюза выберите **Локальный шлюз данных**. 

4. На панели инструментов ресурсов выберите **Удалить**.

<a name="faq"></a>

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

[!INCLUDE [existing-gateway-location-changed](../../includes/logic-apps-existing-gateway-location-changed.md)]

## <a name="get-support"></a>Получение поддержки

* Если у вас возникли вопросы, то посетите [форум Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).
* Отправить идею по поводу возможности или проголосовать за нее вы можете на [сайте отзывов пользователей Logic Apps](https://aka.ms/logicapps-wish).

## <a name="next-steps"></a>Дальнейшие действия

* [Защита приложений логики](./logic-apps-securing-a-logic-app.md)
* [Распространенные примеры и сценарии использования приложений логики](./logic-apps-examples-and-scenarios.md)
