---
title: Доступ к локальным источникам данных из Azure Logic Apps
description: Подключение к локальным источникам данных из приложений логики с помощью создания локального шлюза данных
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: arthii, LADocs
ms.topic: article
ms.date: 07/01/2019
ms.openlocfilehash: ed2ba70b803940700044e900a1b2bb6607c0f051
ms.sourcegitcommit: f3f4ec75b74124c2b4e827c29b49ae6b94adbbb7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2019
ms.locfileid: "70934073"
---
# <a name="connect-to-on-premises-data-sources-from-azure-logic-apps"></a>Подключение к локальным источникам данных из Azure Logic Apps

Чтобы получить доступ к источникам данных из ваших логических приложений, создайте ресурс локального шлюза данных на портале Azure. Затем приложения логики могут использовать [локальные соединители](../connectors/apis-list.md#on-premises-connectors). В этой статье показано, как создать ресурс шлюза Azure после [загрузки и установки шлюза на локальном компьютере](../logic-apps/logic-apps-gateway-install.md). Дополнительные сведения о шлюзе см. [в разделе Работа шлюза](../logic-apps/logic-apps-gateway-install.md#gateway-cloud-service).

> [!TIP]
> Чтобы подключиться к виртуальным сетям Azure, вместо этого рассмотрите возможность создания среды службы интеграции. Для этого см. статью [*Доступ к ресурсам виртуальных сетей Azure из Azure Logic Apps с использованием сред службы интеграции (ISE)* ](../logic-apps/connect-virtual-network-vnet-isolated-environment-overview.md). 

Сведения о том, как использовать шлюз с другими службами, см. в следующих статьях:

* [Локальный шлюз данных](https://powerbi.microsoft.com/documentation/powerbi-gateway-onprem/)
* [Управление локальным шлюзом данных в Microsoft Flow](https://flow.microsoft.com/documentation/gateway-manage/)
* [Управление локальным шлюзом данных в PowerApps](https://powerapps.microsoft.com/tutorials/gateway-management/)
* [Локальный шлюз данных](../analysis-services/analysis-services-gateway.md)

<a name="supported-connections"></a>

## <a name="supported-data-sources"></a>Поддерживаемые источники данных

Для Azure Logic Apps локальный шлюз данных поддерживает [локальные соединители](../connectors/apis-list.md#on-premises-connectors) для этих источников данных:

* BizTalk Server 2016
* Файловая система
* IBM DB2  
* IBM Informix
* IBM MQ
* MySQL
* Oracle Database
* PostgreSQL
* SAP
* SharePoint Server
* SQL Server
* Teradata

Хотя сам шлюз не требует дополнительных затрат, [модель ценообразования Logic Apps](../logic-apps/logic-apps-pricing.md) применяется к этим соединителям и другим операциям в Azure Logic Apps.

## <a name="prerequisites"></a>Предварительные требования

* [Локальный шлюз данных уже установлен на локальном компьютере](../logic-apps/logic-apps-gateway-install.md).

* У вас есть [та же учетная запись Azure и подписка Azure](../logic-apps/logic-apps-gateway-install.md#requirements) , которые использовались при установке локального шлюза данных.

* Вы ранее не связали установку шлюза с другим ресурсом шлюза в Azure.

  При создании ресурса шлюза выбирается установка шлюза, связываемая с ресурсом шлюза. Уже связанная Установка шлюза недоступна для выбора при создании ресурсов шлюза.

<a name="create-gateway-resource"></a>

## <a name="create-azure-gateway-resource"></a>Создание ресурса шлюза Azure

После установки шлюза на локальном компьютере создайте ресурс Azure для шлюза. 

1. Войдите в [портал Azure](https://portal.azure.com) с той же учетной записью Azure, которая использовалась для установки шлюза.

1. В поле поиска портал Azure введите "локальный шлюз данных" и выберите **локальные шлюзы данных**.

   ![Поиск элемента "Локальный шлюз данных"](./media/logic-apps-gateway-connection/find-on-premises-data-gateway.png)

1. В разделе **локальные шлюзы данных**выберите **Добавить**.

   ![Добавление шлюза данных](./media/logic-apps-gateway-connection/add-gateway.png)

1. В разделе **Создание шлюза подключения**укажите эти сведения для ресурса шлюза. Когда все будет готово, выберите **Создать**.

   | Свойство | Описание |
   |----------|-------------|
   | **Имя ресурса** | Имя ресурса шлюза, которое может содержать только буквы, цифры, дефисы (`-`), символы подчеркивания (`_`), круглые скобки`(`( `)`,) и точки (`.`). |
   | **подписка** | Подписка Azure, которая должна совпадать с установкой шлюза и приложением логики. Подписка по умолчанию основана на учетной записи Azure, которая использовалась для входа. |
   | **группа ресурсов** | [Группа ресурсов Azure](../azure-resource-manager/resource-group-overview.md) , которую вы хотите использовать. |
   | **Location** | Тот же регион, что и в расположении, выбранном для облачной службы шлюза во время [установки шлюза](../logic-apps/logic-apps-gateway-install.md). В противном случае установка шлюза не будет отображаться в списке **имя установки** для выбора. Расположение приложения логики может отличаться от расположения ресурса шлюза. |
   | **Имя установки** | Если установка шлюза еще не выбрана, выберите шлюз, установленный ранее. Ранее установленные шлюзы не будут отображаться в этом списке для выбора. |
   |||

   Пример:

   ![Предоставление сведений для создания локального шлюза данных](./media/logic-apps-gateway-connection/gateway-details.png)

<a name="connect-logic-app-gateway"></a>

## <a name="connect-to-on-premises-data"></a>Подключение к локальным данным

Когда вы создадите ресурс шлюза и свяжете свою подписку Azure с этим ресурсом, можно будет создать подключение между приложением логики и локальным источником данных с помощью шлюза.

1. На портале Azure создайте приложение логики или откройте его в конструкторе приложений логики.

1. Добавьте соединитель, который поддерживает локальные подключения, например **SQL Server**.

1. Установите флажок **Connect via on-premises data gateway** (Подключение через локальный шлюз данных). 

1. В поле **шлюзы**выберите созданный ресурс шлюза.

   > [!NOTE]
   > Список шлюзов включает ресурсы шлюза в других регионах, так как расположение приложения логики может отличаться от расположения ресурса шлюза.

1. Укажите уникальное имя подключения и другие необходимые сведения, которые зависят от подключения, которое необходимо создать.

   Уникальное имя подключения позволяет легко найти это подключение позже, особенно при создании нескольких подключений. При необходимости добавьте также имя домена для вашего имени пользователя.
   
   Пример:

   ![Создание подключения между логическим приложением и шлюзом данных](./media/logic-apps-gateway-connection/logic-app-gateway-connection.png)

1. Когда все будет готово, выберите **Создать**. 

Подключение шлюза теперь готово к использованию приложением логики.

## <a name="edit-connection"></a>Изменение подключения

Чтобы обновить параметры подключения шлюза, можно изменить подключение.

1. Чтобы найти все подключения API только для приложения логики, в меню приложения логики в разделе **средства разработки**выберите **подключения API**.
   
   ![В меню приложения логики выберите пункт "подключения API".](./media/logic-apps-gateway-connection/logic-app-find-api-connections.png)

1. Выберите нужное подключение шлюза, а затем щелкните **изменить подключение API**.

   > [!TIP]
   > Если обновления не вступят в силу, попробуйте [остановить и перезапустить учетную запись службы Windows шлюза](../logic-apps/logic-apps-gateway-install.md#restart-gateway) для установки шлюза.

Чтобы найти все подключения API, связанные с подпиской Azure, выполните следующие действия. 

* Из главного меню Azure перейдите к **Все службы** > **Web** > **Подключения API**.
* Или из главного меню Azure перейдите к **Все ресурсы**. Установите фильтр **типов** для **соединения API**.

<a name="change-delete-gateway-resource"></a>

## <a name="delete-gateway-resource"></a>Удаление ресурса шлюза

Чтобы создать другой ресурс шлюза, свяжите установку шлюза с другим ресурсом шлюза или удалите ресурс шлюза, вы можете удалить ресурс шлюза, не влияя на установку шлюза. 

1. В главном меню Azure выберите **все ресурсы**. Найдите и выберите ресурс шлюза данных.

1. Если он еще не выбран, в меню ресурсов шлюза выберите **Локальный шлюз данных**. На панели инструментов ресурса шлюза выберите **Удалить**.

   Пример:

   ![Удалить шлюз](./media/logic-apps-gateway-connection/gateway-delete.png)

<a name="faq"></a>

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

**Вопрос**. Почему при создании ресурса шлюза в Azure процесс его установки не отображается? <br/>
**Ответ**. Такая ошибка может произойти по нескольким причинам.

* Установка шлюза уже зарегистрирована и заявлена другим ресурсом шлюза в Azure. Установки шлюзов не отображаются в списке экземпляров после создания ресурсов для шлюзов. Чтобы проверить регистрации шлюзов на портале Azure, необходимо просмотреть все ресурсы Azure с типом **Локальные шлюзы данных** для *всех* подписок Azure.

* Идентификаторы пользователя, который установил шлюз в Azure AD, и пользователя, который вошел на портал Azure, отличаются. Убедитесь, что для входа в систему и установки шлюза использовался один и тот же идентификатор.

[!INCLUDE [existing-gateway-location-changed](../../includes/logic-apps-existing-gateway-location-changed.md)]

## <a name="next-steps"></a>Следующие шаги

* [Защита приложений логики](./logic-apps-securing-a-logic-app.md)
* [Распространенные примеры и сценарии использования приложений логики](./logic-apps-examples-and-scenarios.md)
