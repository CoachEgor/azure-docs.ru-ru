---
title: Планирование повторяющихся задач и рабочих процессов в приложениях логики Azure
description: Обзор планирования повторяющихся автоматизированных задач, процессов и рабочих процессов с помощью приложений логики Azure
services: logic-apps
ms.suite: integration
ms.reviewer: deli, klam, logicappspm
ms.topic: conceptual
ms.date: 05/25/2019
ms.openlocfilehash: 0f6ec158cf6ab855191e6796be3abec7d37439a0
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79270567"
---
# <a name="schedule-and-run-recurring-automated-tasks-processes-and-workflows-with-azure-logic-apps"></a>Планирование и выполнение повторяющихся автоматизированных задач, процессов и рабочих процессов с помощью Azure Logic Apps

Логические приложения помогают создавать и запускать автоматизированные повторяющиеся задачи и процессы по расписанию. Создавая рабочий процесс приложения логики, который начинается со встроенного триггера recurrence или триггера sliding Window, которые являются триггерами типа Расписание, вы можете выполнять задачи немедленно, в более позднее время или на постоянном интервале. Вы можете вызывать службы внутри и за пределами Azure, такие как конечные точки HTTP или HTTPS, отправлять сообщения в службы Azure, такие как Azure Storage и Azure Service Bus, или загружать файлы в файл. С помощью триггера Recurrence можно также настроить сложные графики и расширенные повторения для выполнения задач. Чтобы узнать больше о встроенных триггерах и действиях [Schedule actions](#schedule-actions)Расписание, [см.](#schedule-triggers) 

> [!TIP]
> Вы можете планировать и запускать повторяющиеся рабочие нагрузки, не создавая отдельное приложение логики для каждого запланированного задания и натыкаясь [на ограничение на рабочие процессы в каждом регионе и подписке.](../logic-apps/logic-apps-limits-and-config.md#definition-limits) Вместо этого можно использовать шаблон приложения логики, созданный [шаблоном Azure quickStart: планировщик работы Logic Apps.](https://github.com/Azure/azure-quickstart-templates/tree/master/301-logicapps-jobscheduler/)
>
> Шаблон планировщика работLogic Apps создает логическое приложение CreateTimerJob, которое вызывает логическое приложение TimerJob. Затем можно вызвать логическое приложение CreateTimerJob в качестве API, сделав запрос HTTP и передав расписание в качестве ввода запроса. Каждый вызов в logic app CreateTimerJob также вызывает приложение логики TimerJob, которое создает новый экземпляр TimerJob, который непрерывно работает на основе указанного графика или до достижения определенного лимита. Таким образом, вы можете запускать столько экземпляров TimerJob, сколько хотите, не беспокоясь об ограничениях рабочего процесса, поскольку экземпляры не являются отдельными определениями рабочего процесса или ресурсами отдельных логических приложений.

В этом списке показаны некоторые примеры задач, которые можно выполнить со встроенными триггерами Расписание:

* Получайте внутренние данные, например, ежедневно запускайте процедуру хранения S'L.

* Получайте внешние данные, такие как отчеты о погоде от NOAA каждые 15 минут.

* Отправить данные отчета, такие как сводка по электронной почте для всех заказов больше, чем конкретная сумма за прошедшую неделю.

* Обработка данных, таких как сжатие сегодняшних загруженных изображений каждый будний день в непиковые часы.

* Очистка данных, таких как удаление всех твитов старше трех месяцев.

* Архивные данные, такие как push-фактуры в службу резервного копирования в 1:00 am каждый день в течение следующих девяти месяцев.

Вы также можете использовать встроенные действия Расписание, чтобы приостановить рабочий процесс перед запуском следующего действия, например:

* ожидание буднего дня, чтобы отправить обновление состояния по почте;

* задержка рабочего процесса до завершения вызова HTTP, прежде чем возобновить работу и получить результат.

В этой статье описаны возможности встроенных триггеров и действий Расписание.

<a name="schedule-triggers"></a>

## <a name="schedule-triggers"></a>Триггеры расписания

Вы можете начать рабочий процесс приложения логики с помощью триггера Recurrence или спускового окна, который не связан с какой-либо конкретной службой или системой, например, Office 365 Outlook или сервером S'L. Эти триггеры запускаите и запускают рабочий процесс на основе указанного повторения, когда вы выбираете интервал и частоту, такие как количество секунд, минут и часов для обоих триггеров, или количество дней, недель или месяцев для триггера повтора. Вы также можете установить дату начала и время, а также часовой пояс. Каждый раз, когда срабатывает триггер, Logic Apps создает и запускает новый экземпляр рабочего процесса для приложения логики.

Вот различия между этими триггерами:

* **Повторение**: Запускает рабочий процесс через регулярные промежутки времени в зависимости от указанного расписания. Если повторения пропущены, триггер повторения не обрабатывает пропущенные рецидивы, а перезапускает рецидивы со следующим запланированным интервалом. Можно указать дату начала и время, а также часовой пояс. Если вы выберете "День", вы можете указать часы дня и минуты часа, например, каждый день в 2:30. Если вы выберете "Неделю", вы также можете выбрать дни недели, такие как среда и суббота. Для получения дополнительной информации [см. Создать, запланировать и запустить повторяющиеся задачи и рабочие процессы с триггером recurrence.](../connectors/connectors-native-recurrence.md)

* **Раздвижное окно:** запускает рабочий процесс через регулярные промежутки времени, которые обрабатывают данные непрерывными частями. Если повторения пропущены, триггер sliding Window возвращается и обрабатывает пропущенные рецидивы. Можно указать дату начала и время, часовой пояс и продолжительность, чтобы отсрочить каждый повторение в рабочем процессе. Этот триггер не имеет возможности указать дни, недели и месяцы, часы дня, минуты часа и дни недели. Для получения дополнительной информации [см. Создать, запланировать и запустить повторяющиеся задачи и рабочие процессы с триггером sliding Window.](../connectors/connectors-native-sliding-window.md)

<a name="schedule-actions"></a>

## <a name="schedule-actions"></a>Расписание действий

После любых действий в рабочем процессе приложения логики можно использовать "Задержку и задержку" до тех пор, пока действия не заставят рабочий процесс ждать до запуска следующего действия.

* **Задержка**: Подождите, чтобы выполнить следующее действие для указанного количества единиц времени, таких как секунды, минуты, часы, дни, недели или месяцы. Для получения дополнительной информации [см.](../connectors/connectors-native-delay.md)

* **Задержка до**: Подождите, чтобы выполнить следующее действие до указанной даты и времени. Для получения дополнительной информации [см.](../connectors/connectors-native-delay.md)

## <a name="patterns-for-start-date-and-time"></a>Шаблоны для даты и времени начала

<a name="start-time"></a>

Вот некоторые шаблоны, которые показывают, как можно контролировать повторение с датой и временем начала, и как служба Logic Apps запускает эти повторы:

| Время начала | Повторение без расписания | Повторение с расписанием (только триггер повторение) |
|------------|-----------------------------|----------------------------------------------------|
| {нет} | Выполняет первую рабочую нагрузку мгновенно. <p>Выполняет будущие рабочие нагрузки на основе последнего времени выполнения. | Выполняет первую рабочую нагрузку мгновенно. <p>Выполняет будущие рабочие нагрузки по указанному расписанию. |
| Время начала в прошлом | **Триггер повторения:** Вычисляет время выполнения на основе указанного времени начала и отбрасывает прошлые времена выполнения. Выполняет первую рабочую нагрузку при последующем времени выполнения. <p>Выполняет будущие рабочие нагрузки на основе вычисления последнего времени выполнения. <p><p>**Спусковой крючок скольжения:** Вычисляет время выполнения на основе указанного времени начала и отличием прошлых времен выполнения. <p>Выполняет будущие рабочие нагрузки на основе расчетов из указанного времени начала. <p><p>Чтобы получить дополнительные сведения, ознакомьтесь с примерами под этой таблицей. | Выполняет первую рабочую нагрузку *не раньше* времени начала на основе расписания, которое отсчитывается от времени начала. <p>Выполняет будущие рабочие нагрузки по указанному расписанию. <p>**Примечание.** Если указать повторение с расписанием, но не указать часы или минуты расписания, то будущее время выполнения вычисляется с помощью часов или минут первого времени выполнения соответственно. |
| Текущее или будущее время выполнения | Выполняет первую рабочую нагрузку в указанное время начала. <p>Выполняет будущие рабочие нагрузки на основе вычисления последнего времени выполнения. | Выполняет первую рабочую нагрузку *не раньше* времени начала на основе расписания, которое отсчитывается от времени начала. <p>Выполняет будущие рабочие нагрузки по указанному расписанию. <p>**Примечание.** Если указать повторение с расписанием, но не указать часы или минуты расписания, то будущее время выполнения вычисляется с помощью часов или минут первого времени выполнения соответственно. |
||||

> [!IMPORTANT]
> Когда повторы не указывают расширенные параметры планирования, будущие повторения основаны на последнем времени выполнения.
> Время начала этих повторений может дрейфовать из-за таких факторов, как задержка во время вызовов хранения. Чтобы убедиться, что приложение логики не пропустите повторения, особенно когда частота находится в днях или дольше, используйте один из этих вариантов:
> 
> * Обеспечьте время начала для повторения.
> 
> * Укажите часы и минуты, когда запустить повторение, используя **В эти часы** и **в эти минуты** свойства.
> 
> * Используйте [триггер раздвижного окна,](../connectors/connectors-native-sliding-window.md)а не триггер повторения.

*Пример для прошлого времени начала и повторения, но нет графика*

Предположим, что текущая дата и время 8 сентября 2017 года в 13:00. Дата и время начала — 7 сентября 2017 года в 14:00, что в прошлом, и повторение, которое длится каждые два дня.

| Время начала | Текущее время | Периодичность | Расписание |
|------------|--------------|------------|----------|
| 2017-09-**07**T14:00:00Z <br>(2017-09-07 в 14:00)**07** | 2017-09-**08**T13:00:00Z <br>(2017-09-08 в 13:00)**08** | Каждые два дня | {нет} |
|||||

Для триггера Recurrence движок Logic Apps вычисляет время выполнения в зависимости от времени начала, отбрасывает прошлые времена выполнения, использует следующее будущее время запуска для первого запуска и вычисляет будущие запуски на основе последнего времени выполнения.

Вот как выглядит это повторение:

| Время начала | Первое время выполнения | Последующее время выполнения |
|------------|----------------|------------------|
| 2017-09-**07** в 14:00 | 2017-09-**09** в 14:00 | 2017-09-**11** в 14:00 </br>2017-09-**13** в 14:00 </br>2017-09-**15** в 14:00 </br>и т. д. |
||||

Итак, независимо от того, как далеко в прошлом вы указываете время**05** начала, например, 2017-09-05 в 2:00 вечера или 2017-09-01 в 2:00 вечера, ваш первый запуск всегда использует следующее будущее время начала.**01**

Для триггера Sliding Window движок Logic Apps вычисляет время выполнения в зависимости от времени начала, выполняет время выполнения, использует время начала первого запуска и вычисляет будущие запуски в зависимости от времени начала.

Вот как выглядит это повторение:

| Время начала | Первое время выполнения | Последующее время выполнения |
|------------|----------------|------------------|
| 2017-09-**07** в 14:00 | 2017-09-**07** в 14:00 | 2017-09-**09** в 14:00 </br>2017-09-**11** в 14:00 </br>2017-09-**13** в 14:00 </br>2017-09-**15** в 14:00 </br>и т. д. |
||||

Итак, независимо от того, как далеко в прошлом вы указываете время**05** начала, например, 2017-09-05 в 2:00 вечера или 2017-09-01 в 2:00 вечера, ваш первый запуск всегда использует указанное время начала.**01**

<a name="example-recurrences"></a>

## <a name="example-recurrences"></a>Пример повторений

Вот различные примеры повторений, которые можно настроить для триггеров, поддерживающих параметры:

| Триггер | Периодичность | Интервал | Частота | Время начала | В эти дни | В эти часы | В эти минуты | Примечание |
|---------|------------|----------|-----------|------------|---------------|----------------|------------------|------|
| Повторения <br>Скользящее окно | Выполняется каждые 15 минут (нет даты и времени начала) | 15 | Минута | {нет} | {недоступно} | {нет} | {нет} | Это расписание начинается немедленно, а затем вычисляются будущие повторения на основе последнего времени выполнения. |
| Повторения <br>Скользящее окно | Выполняется каждые 15 минут (с датой и временем начала) | 15 | Минута | *startDate*T*startTime*Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Затем будут вычислены будущие повторения на основе последнего времени выполнения. |
| Повторения <br>Скользящее окно | Выполняется с наступлением каждого часа (с датой и временем начала) | 1 | Час | *startDate*Thh:00:00Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Будущие повторения проходят каждый час на отметке "00", которая рассчитывается с момента начала. <p>Если для частоты задано "Неделя" или "Месяц", это расписание соответственно выполняется один раз в неделю или в месяц. |
| Повторения <br>Скользящее окно | Выполняется каждый час, каждый день (нет даты и времени начала) | 1 | Час | {нет} | {недоступно} | {нет} | {нет} | Это расписание начинается немедленно, а затем вычисляются будущие повторения на основе последнего времени выполнения. <p>Если для частоты задано "Неделя" или "Месяц", это расписание соответственно выполняется один раз в неделю или в месяц. |
| Повторения <br>Скользящее окно | Выполняется каждый час, каждый день (с датой и временем начала) | 1 | Час | *startDate*T*startTime*Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Затем будут вычислены будущие повторения на основе последнего времени выполнения. <p>Если для частоты задано "Неделя" или "Месяц", это расписание соответственно выполняется один раз в неделю или в месяц. |
| Повторения <br>Скользящее окно | Выполняется через 15 минут после наступления каждого часа (с датой и временем начала) | 1 | Час | *startDate*T00:15:00Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Будущие повторы проходят на отметке "15", которая рассчитывается с момента начала, так что в 00:15, 1:15, 2:15 утра и так далее. |
| Периодичность | Выполняется через 15 минут после наступления каждого часа (нет даты и времени начала) | 1 | День | {нет} | {недоступно} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 15 | Расписание выполняется в 00:15, 1:15, 2:15 и т. д. Кроме того, это расписание эквивалентно частоте "Час" и времени начала 15 минут. |
| Периодичность | Выполнить каждые 15 минут в указанной минуте знаки (без даты начала и времени). | 1 | День | {нет} | {недоступно} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 0, 15, 30, 45 | Выполнение расписания начнется не раньше следующей указанной метки времени 15 минут. |
| Периодичность | Запуск ежедневно в 8 утра *плюс* минутный знак от того, когда вы сохраните логику приложение | 1 | День | {нет} | {недоступно} | 8 | {нет} | Без даты начала и времени это расписание выполняется в зависимости от времени сохранения приложения логики (операция PUT). |
| Периодичность | Запуск ежедневно в 8:00 (с датой начала и временем) | 1 | День | *startDate*T08:00:00Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Будущие события происходят ежедневно в 8:00 утра. | 
| Периодичность | Запуск ежедневно в 8:30 утра (дата начала и время) | 1 | День | {нет} | {недоступно} | 8 | 30 | Это расписание работает в 8:30 утра каждый день. |
| Периодичность | Запуск ежедневно в 8:30 утра и 4:30 вечера | 1 | День | {нет} | {недоступно} | 8, 16 | 30 | |
| Периодичность | Запуск ежедневно в 8:30 утра, 8:45 утра, 4:30 вечера, и 4:45 вечера | 1 | День | {нет} | {недоступно} | 8, 16 | 30, 45 | |
| Периодичность | Выполняется каждую субботу в 17:00 (нет даты и времени начала) | 1 | Неделя | {нет} | Суббота | 17 | 00 | Расписание выполняется каждую субботу в 17:00. |
| Периодичность | Выполняется каждую субботу в 17: 00 (с датой и временем начала) | 1 | Неделя | *startDate*T17:00:00Z | Суббота | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. В этом случае 9 сентября 2017 г. в 17:00. Будущие повторения выполняются каждую субботу в 17:00. |
| Периодичность | Запуск каждый вторник, четверг в 5 вечера *плюс* минутный знак от того, когда вы сохраните логику приложение| 1 | Неделя | {нет} | Вторник, четверг | 17 | {нет} | |
| Периодичность | Выполнять каждый час в рабочее время | 1 | Неделя | {нет} | Выберите все дни, кроме субботы и воскресенья. | Выберите необходимые часы дня. | Выберите необходимое минуты часа. | Например, если ваше рабочее время с 8:00 до 17:00, выберите 8, 9, 10, 11, 12, 13, 14, 15, 16, 17 в качестве часов дня. <p>Если ваше рабочее время с 8:30 до 17:30, выберите предыдущие часы дня и добавьте 30 в качестве минут часа. |
| Периодичность | Выполняется один раз в день в выходные дни | 1 | Неделя | {нет} | Суббота, воскресенье | Выберите необходимые часы дня. | Выберите необходимые минуты часа. | Расписание выполняется каждую субботу и воскресенье по указанной схеме. |
| Периодичность | Выполняется каждые 15 минут, каждые две недели только по понедельникам | 2 | Неделя | {нет} | Понедельник | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 0, 15, 30, 45 | Это расписание выполняется каждый второй понедельник каждые 15 минут. |
| Периодичность | Запуск каждый месяц | 1 | Месяц | *startDate*T*startTime*Z | {недоступно} | {недоступно} | {недоступно} | Это расписание начинается не *раньше* указанной даты и времени начала и вычисляет будущие повторы в дату и время начала. Если не указать дату и время начала, это расписание использует дату и время создания. |
| Периодичность | Выполнять каждый час один день в месяц | 1 | Месяц | {см. примечание} | {недоступно} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | {см. примечание} | Если не указать дату и время начала, это расписание использует дату и время создания. Чтобы контролировать минуты расписания повторения, укажите минуты часа, время начала или используйте время создания. Например, если время начала или создания — 8:25, расписание выполняется в 8:25, 9:25, 10:25 и т. д. |
|||||||||

<a name="run-once"></a>

## <a name="run-one-time-only"></a>Выполнить только один раз

Если вы хотите запустить логическое приложение только в одно время в будущем, вы можете использовать шаблон **Задания Scheduler: Run once.** После создания нового приложения логики, но перед открытием Logic Apps Designer, в разделе **Шаблоны,** из списка **категорий,** выберите **Расписание,** а затем выберите этот шаблон:

![Выберите шаблон "Расписание: Выполнить один раз задания"](./media/concepts-schedule-automated-recurring-tasks-workflows/choose-run-once-template.png)

Или, если вы можете запустить приложение логики с **момента получения запроса HTTP - Запрос триггера,** и пройти время начала в качестве параметра для триггера. Для первого действия используйте **задержку до - Расписание** действий, и укажите время, когда следующее действие начинает работать.

## <a name="next-steps"></a>Дальнейшие действия

* [Создание, расписание и выполнение повторяющихся задач и рабочих процессов с триггером Recurrence](../connectors/connectors-native-recurrence.md)
* [Создание, расписание и выполнение повторяющихся задач и рабочих процессов с триггером раздвижного окна](../connectors/connectors-native-sliding-window.md)
* [Приостановка рабочих процессов с действиями задержки](../connectors/connectors-native-delay.md)
