---
title: Планирование повторяющихся задач и рабочих процессов в Azure Logic Apps
description: Общие сведения о планировании повторяющихся автоматизированных задач, процессов и рабочих процессов с Azure Logic Apps
services: logic-apps
ms.suite: integration
ms.reviewer: deli, jonfan, logicappspm
ms.topic: conceptual
ms.date: 03/25/2020
ms.openlocfilehash: 27763536b859b7bc3e9aa0a7c490cb510c0fda41
ms.sourcegitcommit: d2d1c90ec5218b93abb80b8f3ed49dcf4327f7f4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/16/2020
ms.locfileid: "97588460"
---
# <a name="schedule-and-run-recurring-automated-tasks-processes-and-workflows-with-azure-logic-apps"></a>Планирование и выполнение повторяющихся автоматизированных задач, процессов и рабочих процессов с помощью Azure Logic Apps

Logic Apps помогает создавать и запускать автоматические повторяющиеся задачи и процессы по расписанию. Создав рабочий процесс приложения логики, который начинается с встроенного триггера повторения или триггера скользящего окна, которые являются триггерами расписания, вы можете выполнять задачи немедленно, позже или через повторяющийся интервал. Вы можете вызывать службы внутри и за пределами Azure, например конечные точки HTTP или HTTPS, отправлять сообщения в службы Azure, такие как служба хранилища Azure и служебная шина Azure, или получать файлы, отправленные в общую папку. С помощью триггера повторения можно также настроить сложные расписания и дополнительные повторения для выполнения задач. Дополнительные сведения о встроенных триггерах и действиях расписания см. в разделе [Schedule Triggers](#schedule-triggers) and [Schedule Actions](#schedule-actions). 

> [!TIP]
> Вы можете запланировать и запустить повторяющиеся рабочие нагрузки, не создавая отдельное приложение логики для каждого запланированного задания и выполняя [ограничение рабочих процессов для каждого региона и подписки](../logic-apps/logic-apps-limits-and-config.md#definition-limits). Вместо этого можно использовать шаблон приложения логики, созданный с помощью шаблона быстрого [запуска Azure: Logic Apps планировщик заданий](https://github.com/Azure/azure-quickstart-templates/tree/master/301-logicapps-jobscheduler/).
>
> Шаблон планировщика заданий Logic Apps создает приложение логики Креатетимержоб, которое вызывает приложение логики Тимержоб. Затем можно вызвать приложение логики Креатетимержоб в качестве API, выполнив HTTP-запрос и передав расписание в качестве входных данных для запроса. Каждый вызов приложения логики Креатетимержоб также вызывает приложение логики Тимержоб, которое создает новый экземпляр Тимержоб, который непрерывно выполняется по заданному расписанию или до достижения указанного предела. Таким образом, вы можете выполнять любое количество экземпляров Тимержоб, не беспокоясь об ограничениях рабочих процессов, поскольку экземпляры не являются определениями или ресурсами рабочего процесса приложения логики.

В этом списке показаны некоторые примеры задач, которые можно выполнить с помощью встроенных триггеров.

* Получение внутренних данных, например выполнение хранимой процедуры SQL каждый день.

* Получение внешних данных, таких как отчеты о погоде из NOAA каждые 15 минут.

* Отправка данных отчета, например по электронной почте, для всех заказов, превышающих определенную сумму за прошлую неделю.

* Обработка данных, например сжатие современных отправленных изображений каждый день в часы наименьшей нагрузки.

* Очистка данных, например удаление всех твитов старше трех месяцев.

* Архивация данных, например Отправка счетов в службу резервного копирования по 1:00 AM каждый день в течение следующих девяти месяцев.

Можно также использовать расписание встроенных действий, чтобы приостановить рабочий процесс перед выполнением следующего действия, например:

* ожидание буднего дня, чтобы отправить обновление состояния по почте;

* задержка рабочего процесса до завершения вызова HTTP, прежде чем возобновить работу и получить результат.

В этой статье описываются возможности расписания встроенных триггеров и действий.

<a name="schedule-triggers"></a>

## <a name="schedule-triggers"></a>Триггеры расписания

Вы можете запустить рабочий процесс приложения логики с помощью триггера повторения или триггера окна скользящего периода, который не связан с какой-либо конкретной службой или системой. Эти триггеры запускают и запускают рабочий процесс на основе указанного периодичности, где выбирается интервал и частота, например количество секунд, минут, часов, дней, недель или месяцев. Можно также задать дату и время начала, а также часовой пояс. При каждом срабатывании триггера Logic Apps создает и запускает новый экземпляр рабочего процесса для приложения логики.

Ниже приведены различия между этими триггерами.

* **Повторение**. выполняет рабочий процесс через заданные интервалы времени в соответствии с заданным расписанием. Если повторение пропущено, например из-за нарушений или отключенных рабочих процессов, триггер повторения не обрабатывает пропущенные повторения, но перезапускает повторения со следующим запланированным интервалом. Можно указать дату и время начала, а также часовой пояс. Если выбрать "день", можно указать часы дня и минуты для часа, например каждый день в 2:30. Если выбрать "Неделя", можно также выбрать дни недели, например "среда" и "Суббота". Дополнительные сведения см. в статьях [Создание, планирование и выполнение повторяющихся задач и рабочих процессов с помощью триггера повторения](../connectors/connectors-native-recurrence.md).

* **Скользящее окно**: запускает рабочий процесс через регулярные интервалы времени, которые обрабатывали данные в непрерывных блоках. Если повторение пропущено, например из-за нарушений или отключенных рабочих процессов, триггер скользящего окна перейдет назад и обработает пропущенные повторения. Вы можете указать дату и время начала, часовой пояс и длительность задержки каждого повторения в рабочем процессе. Этот триггер не поддерживает расширенные расписания, например определенные часы суток, минуты и дни недели. Дополнительные сведения см. в статьях [Создание, планирование и выполнение повторяющихся задач и рабочих процессов с помощью триггера скользящего окна](../connectors/connectors-native-sliding-window.md).

<a name="schedule-actions"></a>

## <a name="schedule-actions"></a>Действия расписания

После выполнения каких-либо действий в рабочем процессе приложения логики можно использовать задержки и задержки до тех пор, пока не будет запущено следующее действие.

* **Задержка**: ожидание выполнения следующего действия в течение указанного числа единиц времени, например секунд, минут, часов, дней, недель или месяцев. Дополнительные сведения см. в статье [отсрочка следующего действия в рабочих процессах](../connectors/connectors-native-delay.md).

* **Задержка до**: ожидание выполнения следующего действия до указанной даты и времени. Дополнительные сведения см. в статье [отсрочка следующего действия в рабочих процессах](../connectors/connectors-native-delay.md).

## <a name="patterns-for-start-date-and-time"></a>Шаблоны для даты и времени начала

<a name="start-time"></a>

Ниже приведены некоторые шаблоны, демонстрирующие, как можно управлять повторением с датой и временем начала, а также как служба Logic Apps выполняет эти повторы:

| Время начала | Повторение без расписания | Повторение с расписанием (только триггер повторения) |
|------------|-----------------------------|----------------------------------------------------|
| {нет} | Выполняет первую рабочую нагрузку мгновенно. <p>Выполняет будущие рабочие нагрузки на основе последнего времени выполнения. | Выполняет первую рабочую нагрузку мгновенно. <p>Выполняет будущие рабочие нагрузки по указанному расписанию. |
| Время начала в прошлом | Триггер **повторения** : вычисляет время выполнения на основе указанного времени начала и отменяет время выполнения в прошлом. Выполняет первую рабочую нагрузку при последующем времени выполнения. <p>Выполняет будущие рабочие нагрузки на основе вычисления последнего времени выполнения. <p><p>Триггер **скользящего окна** : вычисляет время выполнения на основе указанного времени начала и учитывает время выполнения в прошлом. <p>Выполняет будущие рабочие нагрузки на основе вычислений из указанного времени начала. <p><p>Чтобы получить дополнительные сведения, ознакомьтесь с примерами под этой таблицей. | Выполняет первую рабочую нагрузку *не раньше* времени начала на основе расписания, которое отсчитывается от времени начала. <p>Выполняет будущие рабочие нагрузки по указанному расписанию. <p>**Примечание.** Если указать повторение с расписанием, но не указать часы или минуты расписания, то будущее время выполнения вычисляется с помощью часов или минут первого времени выполнения соответственно. |
| Текущее или будущее время выполнения | Выполняет первую рабочую нагрузку в указанное время начала. <p>Выполняет будущие рабочие нагрузки на основе вычисления последнего времени выполнения. | Выполняет первую рабочую нагрузку *не раньше* времени начала на основе расписания, которое отсчитывается от времени начала. <p>Выполняет будущие рабочие нагрузки по указанному расписанию. <p>**Примечание.** Если указать повторение с расписанием, но не указать часы или минуты расписания, то будущее время выполнения вычисляется с помощью часов или минут первого времени выполнения соответственно. |
||||

> [!IMPORTANT]
> Если повторы не указывают дополнительные параметры планирования, будущие повторения основываются на времени последнего выполнения.
> Время начала этих повторений может отменяться из-за таких факторов, как задержка во время вызовов хранилища. Чтобы убедиться, что приложение логики не пропустило повторение, особенно если частота указана в днях или дольше, используйте один из следующих вариантов.
> 
> * Укажите время начала повторения.
> 
> * Укажите часы и минуты, в которые следует запускать повторение, с помощью в **эти часы** и **в** свойствах минут.
> 
> * Используйте [триггер скользящего окна](../connectors/connectors-native-sliding-window.md), а не триггер повторения.

*Пример для предыдущего времени начала и повторения, но без расписания*

Предположим, текущая дата и время — 8 сентября 2017 в 1:00 РМ. Вы указываете дату и время начала до 7 сентября 2017 в 2:00 PM, а также повторение, которое выполняется каждые два дня.

| Время начала | Текущее время | Периодичность | Расписание |
|------------|--------------|------------|----------|
| 2017-09-**07** T14:00:00Z <br>(2017-09 –**07** в 2:00 PM) | 2017-09-**08** T13:00:00Z <br>(2017-09-**08** в 1:00 PM) | Каждые два дня | {нет} |
|||||

Для триггера повторения подсистема Logic Apps вычисляет время выполнения в зависимости от времени начала, отменяет время выполнения, а затем использует следующий будущий момент начала первого запуска и вычисляет будущие запуски в зависимости от времени последнего выполнения.

Вот как выглядит это повторение:

| Время начала | Первое время выполнения | Последующее время выполнения |
|------------|----------------|------------------|
| 2017-09-**07** в 14:00 | 2017-09-**09** в 14:00 | 2017-09-**11** в 14:00 </br>2017-09-**13** в 14:00 </br>2017-09-**15** в 14:00 </br>и т. д. |
||||

Таким образом, независимо от времени начала, например 2017-09-**05** в 2:00 pm или 2017-09-**01** в 2:00 PM, при первом запуске всегда используется время следующего запуска в будущем.

Для триггера скользящего окна подсистема Logic Apps вычисляет время выполнения в зависимости от времени начала, учитывает время выполнения, а затем вычисляет будущие запуски в зависимости от времени начала.

Вот как выглядит это повторение:

| Время начала | Первое время выполнения | Последующее время выполнения |
|------------|----------------|------------------|
| 2017-09-**07** в 14:00 | 2017-09-**08** в 1:00 PM (текущее время) | 2017-09-**09** в 14:00 </br>2017-09-**11** в 14:00 </br>2017-09-**13** в 14:00 </br>2017-09-**15** в 14:00 </br>и т. д. |
||||

Таким образом, независимо от времени начала, например 2017-09-**05** в 2:00 pm или 2017-09-**01** в 2:00 PM, при первом запуске всегда используется указанное время начала.

<a name="example-recurrences"></a>

## <a name="example-recurrences"></a>Примеры повторений

Ниже приведены различные примеры повторений, которые можно настроить для триггеров, поддерживающих параметры.

| Триггер | Периодичность | Интервал | Частота | Время начала | В эти дни | В эти часы | В эти минуты | Примечание |
|---------|------------|----------|-----------|------------|---------------|----------------|------------------|------|
| Шаблон <br>Скользящее окно | Выполняется каждые 15 минут (нет даты и времени начала) | 15 | Минута | {нет} | {недоступно} | {нет} | {нет} | Это расписание начинается немедленно, а затем вычисляются будущие повторения на основе последнего времени выполнения. |
| Шаблон <br>Скользящее окно | Выполняется каждые 15 минут (с датой и временем начала) | 15 | Минута | *startDate* T *startTime* Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Затем будут вычислены будущие повторения на основе последнего времени выполнения. |
| Шаблон <br>Скользящее окно | Выполняется с наступлением каждого часа (с датой и временем начала) | 1 | Час | *startDate* Thh:00:00Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Будущие повторения выполняются каждый час со знаком "00" минуты, который вычисляется на основе времени начала. <p>Если для частоты задано "Неделя" или "Месяц", это расписание соответственно выполняется один раз в неделю или в месяц. |
| Шаблон <br>Скользящее окно | Выполняется каждый час, каждый день (нет даты и времени начала) | 1 | Час | {нет} | {недоступно} | {нет} | {нет} | Это расписание начинается немедленно, а затем вычисляются будущие повторения на основе последнего времени выполнения. <p>Если для частоты задано "Неделя" или "Месяц", это расписание соответственно выполняется один раз в неделю или в месяц. |
| Шаблон <br>Скользящее окно | Выполняется каждый час, каждый день (с датой и временем начала) | 1 | Час | *startDate* T *startTime* Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Затем будут вычислены будущие повторения на основе последнего времени выполнения. <p>Если для частоты задано "Неделя" или "Месяц", это расписание соответственно выполняется один раз в неделю или в месяц. |
| Шаблон <br>Скользящее окно | Выполняется через 15 минут после наступления каждого часа (с датой и временем начала) | 1 | Час | *startDate* T00:15:00Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Будущие повторения выполняются с меткой "15", которая вычисляется с момента начала, поэтому в 00:15 AM, 1:15 AM, 2:15 AM и т. д. |
| Периодичность | Выполняется через 15 минут после наступления каждого часа (нет даты и времени начала) | 1 | День | {нет} | {недоступно} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 15 | Расписание выполняется в 00:15, 1:15, 2:15 и т. д. Кроме того, это расписание эквивалентно частоте "Час" и времени начала 15 минут. |
| Периодичность | Выполняется каждые 15 минут в указанные минуты (без даты и времени начала). | 1 | День | {нет} | {недоступно} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 0, 15, 30, 45 | Выполнение расписания начнется не раньше следующей указанной метки времени 15 минут. |
| Периодичность | Ежедневное *выполнение в 8* – минутная отметка, начиная с момента сохранения приложения логики | 1 | День | {нет} | {недоступно} | 8 | {нет} | Без даты и времени начала это расписание выполняется в зависимости от времени сохранения приложения логики (операция размещения). |
| Периодичность | Ежедневное выполнение в 8:00 AM (с датой и временем начала) | 1 | День | *startDate* T08:00:00Z | {недоступно} | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. Будущие экземпляры запускаются ежедневно в 8:00 AM. | 
| Периодичность | Ежедневное выполнение в 8:00 AM (без даты и времени начала) | 1 | День | {нет} | {недоступно} | 8 | 00 | Это расписание выполняется в 8:00 AM каждый день. |
| Периодичность | Ежедневное выполнение в 8:00 AM и 4:00 PM | 1 | День | {нет} | {недоступно} | 8, 16 | 0 | |
| Периодичность | Ежедневное выполнение в 8:30 AM, 8:45 AM, 4:30 PM и 4:45 PM | 1 | День | {нет} | {недоступно} | 8, 16 | 30, 45 | |
| Периодичность | Выполнять каждую субботу в 5:00 PM (без даты и времени начала) | 1 | Неделя | {нет} | Суббота | 17 | 0 | Расписание выполняется каждую субботу в 17:00. |
| Периодичность | Выполнять каждую субботу в 5:00 PM (с датой и временем начала) | 1 | Неделя | *startDate* T17:00:00Z | Суббота | {нет} | {нет} | Выполнение расписания начнется *не раньше*, чем наступит дата и время начала. В этом случае 9 сентября 2017 г. в 17:00. Будущие повторения выполняются каждую субботу в 17:00. |
| Периодичность | Выполнение каждые вторник, четверг в 5 часов *плюс* отметка времени при сохранении приложения логики| 1 | Неделя | {нет} | Вторник, четверг | 17 | {нет} | |
| Периодичность | Выполняется каждый час в рабочее время. | 1 | Неделя | {нет} | Выберите все дни, кроме субботы и воскресенья. | Выберите необходимые часы дня. | Выберите необходимое минуты часа. | Например, если рабочее время составляет от 8:00 до 5:00 PM, выберите "8, 9, 10, 11, 12, 13, 14, 15, 16, 17" в качестве часов дня *плюс* "0" в качестве минуты часа. |
| Периодичность | Выполняется один раз в день в выходные дни | 1 | Неделя | {нет} | Суббота, воскресенье | Выберите необходимые часы дня. | Выберите необходимые минуты часа. | Расписание выполняется каждую субботу и воскресенье по указанной схеме. |
| Периодичность | Выполняется каждые 15 минут, каждые две недели только по понедельникам | 2 | Неделя | {нет} | Понедельник | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 0, 15, 30, 45 | Это расписание выполняется каждый второй понедельник каждые 15 минут. |
| Периодичность | Запускать каждый месяц | 1 | Месяц | *startDate* T *startTime* Z | {недоступно} | {недоступно} | {недоступно} | Это расписание не запускается *раньше* указанной даты и времени начала и вычисляет будущие повторения на дату и время начала. Если не указать дату и время начала, это расписание использует дату и время создания. |
| Периодичность | Выполнять каждый час один день в месяц | 1 | Месяц | {см. примечание} | {недоступно} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | {см. примечание} | Если не указать дату и время начала, это расписание использует дату и время создания. Чтобы контролировать минуты расписания повторения, укажите минуты часа, время начала или используйте время создания. Например, если время начала или создания — 8:25, расписание выполняется в 8:25, 9:25, 10:25 и т. д. |
|||||||||

<a name="run-once"></a>

## <a name="run-one-time-only"></a>Выполнять только один раз

Если вы хотите, чтобы приложение логики выполнялось в будущем, можно использовать шаблон **Планировщик: однократное выполнение заданий** . После создания нового приложения логики, но перед открытием конструктора Logic Apps в разделе **шаблоны** в списке **Категория** выберите **Расписание**, а затем выберите этот шаблон:

![Выбор шаблона "Планировщик: запуск после выполнения заданий"](./media/concepts-schedule-automated-recurring-tasks-workflows/choose-run-once-template.png)

Или, если вы можете запустить приложение логики с параметром **при получении HTTP-запроса** и передать время начала в качестве параметра триггера. Для первого действия используйте действие **Задержка до-расписания** и укажите время начала выполнения следующего действия.

## <a name="next-steps"></a>Дальнейшие действия

* [Создание, планирование и выполнение повторяющихся задач и рабочих процессов с помощью триггера повторения](../connectors/connectors-native-recurrence.md)
* [Создание, планирование и выполнение повторяющихся задач и рабочих процессов с помощью триггера скользящего окна](../connectors/connectors-native-sliding-window.md)
* [Приостановка рабочих процессов с отложенными действиями](../connectors/connectors-native-delay.md)
