---
title: Создание рабочих процессов автоматизации (Предварительная версия) в Visual Studio Code
description: Создание рабочих процессов автоматизации без отслеживания состояния или с отслеживанием состояния с помощью расширения Azure Logic Apps (Предварительная версия) в Visual Studio Code для интеграции приложений, данных, облачных служб и локальных систем
services: logic-apps
ms.suite: integration
ms.reviewer: deli, rohitha, vikanand, hongzili, sopai, absaafan, logicappspm
ms.topic: conceptual
ms.date: 09/23/2020
ms.openlocfilehash: abb6f8bcaa3b8e356bea00185702bc0ae783e071
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91270273"
---
# <a name="create-stateful-or-stateless-workflows-in-visual-studio-code-with-the-azure-logic-apps-preview-extension"></a>Создание рабочих процессов с отслеживанием состояния или без отслеживания состояния в Visual Studio Code с помощью расширения Azure Logic Apps (Предварительная версия)

> [!IMPORTANT]
> Эта возможность доступна в общедоступной предварительной версии. она предоставляется без соглашения об уровне обслуживания и не рекомендуется для рабочих нагрузок в рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Для создания рабочих процессов приложения логики, которые интегрируются между приложениями, данными, облачными службами и системами, можно использовать Visual Studio Code и расширение Azure Logic Apps (Предварительная версия) для создания и локально запускать [рабочие процессы приложения логики *без отслеживания состояния* и *без отслеживания состояния* ](#stateful-stateless) в среде разработки.

![Снимок экрана, на котором показано Visual Studio Code и рабочий процесс приложения логики.](./media/create-stateful-stateless-workflows-visual-studio-code/visual-studio-code-logic-apps-overview.png)

Приложения логики, созданные с помощью расширения общедоступной предварительной версии, используют новый тип ресурсов **приложения логики (Предварительная версия)** и на платформе среды выполнения [функций Azure](../azure-functions/functions-overview.md) в локальной среде. Этот новый тип ресурса может включать несколько рабочих процессов и аналогичен типу ресурса **приложение-функция** , который может включать несколько функций.

В то же время исходный тип ресурса **Logic Apps** по-прежнему существует для создания и использования в Visual Studio Code и в портал Azure. Однако взаимодействие с исходным типом ресурса отделено от нового типа ресурса. В настоящее время типы ресурсов **Logic Apps** и **приложения логики (Предварительная версия)** могут существовать одновременно в Visual Studio Code и в портал Azure. Вы можете просматривать все развернутые приложения логики в подписке Azure и получать к ним доступ, но они отображаются и хранятся отдельно в собственных категориях и разделах.

В этой статье представлен общий [Обзор этой общедоступной предварительной версии](#whats-new), описываются различные аспекты типа ресурсов **приложения логики (Предварительная версия)** и способы создания этого ресурса с помощью Visual Studio Code.

* Как приложения логики с [отслеживанием состояния и без отслеживания состояния](#stateful-stateless) отличаются друг от друга.

* Как выполнить [требования к установке](#prerequisites) и [настроить Visual Studio Code](#set-up) для расширения общедоступной предварительной версии.

* Как создавать новые рабочие процессы **приложения логики (Предварительная версия)** путем [создания проекта и выбора шаблона рабочего процесса](#create-project).

* Как локально запускать и отлаживать новые приложения логики в Visual Studio Code.

* Как опубликовать эти новые приложения логики непосредственно из Visual Studio Code [в Azure](#publish-azure) или [контейнер DOCKER](#deploy-docker) , который можно запускать где угодно. Дополнительные сведения о DOCKER см. в статье [что такое DOCKER](/dotnet/architecture/microservices/container-docker-introduction/docker-defined)?

<a name="whats-new"></a>

## <a name="whats-in-this-public-preview"></a>Что находится в этой общедоступной предварительной версии?

Расширение Azure Logic Apps (Предварительная версия) предоставляет множество текущих и дополнительных возможностей Logic Apps в локальную среду разработки в Visual Studio Code, например:

* Создавайте приложения логики для процессов интеграции и автоматизации от [390 + соединителей](/connectors/connector-reference/connector-reference-logicapps-connectors) для приложений и служб типа "программное обеспечение как услуга" (PaaS) и "платформа как услуга", а также для локальных систем.

  * Некоторые управляемые соединители, такие как служебная шина Azure, концентраторы событий Azure и SQL Server, работают аналогично встроенным триггерам машинного кода и действиям, таким как действие HTTP.

  * Создавайте и развертывайте приложения логики, которые могут выполняться где угодно, так как служба Azure Logic Apps создает строки подключения для подписанного URL-адрес (SAS), которые эти приложения логики могут использовать для отправки запросов в конечную точку среды выполнения облачного подключения. Служба Logic Apps сохраняет эти строки подключения с другими параметрами приложения, что позволяет легко хранить эти значения в Azure Key Vault при развертывании в Azure.

    > [!NOTE]
    > По умолчанию ресурс **приложения логики (Предварительная версия)** автоматически включает [управляемое системой удостоверение](../logic-apps/create-managed-service-identity.md) для проверки подлинности подключений во время выполнения. Это удостоверение отличается от учетных данных проверки подлинности или строки подключения, используемой при создании соединения. Если отключить это удостоверение, подключения не будут работать во время выполнения.

* Создавайте приложения логики без отслеживания состояния, которые выполняются только в памяти, чтобы их можно было быстрее завершить, ускорить реагирование, повысить пропускную способность и снизить затраты на выполнение, так как журналы выполнения и данные между действиями не сохраняются во внешнем хранилище. При необходимости можно включить журнал выполнения для упрощения отладки. Дополнительные сведения см. в разделе [приложения логики с отслеживанием состояния и без отслеживания состояния](#stateful-stateless).

* Протестируйте приложения логики локально в среде разработки Visual Studio Code.

* Публикуйте и развертывайте приложения логики из Visual Studio Code непосредственно в различных средах размещения, таких как [служба приложений Azure](../app-service/environment/intro.md) и [контейнеры DOCKER](/dotnet/core/docker/introduction).

> [!NOTE]
> Сведения о текущих известных проблемах см. на [странице GitHub об известных проблемах](https://github.com/Azure/logicapps/blob/master/articles/logic-apps-public-preview-known-issues.md)расширения предварительной версии.

<a name="stateful-stateless"></a>

## <a name="stateful-versus-stateless-logic-apps"></a>И приложения логики без отслеживания состояния

* *С отслеживанием состояния*

  Создавайте приложения логики с отслеживанием состояния, когда необходимо иметь возможность сохранения, просмотра или ссылки на данные из предыдущих событий. Эти приложения логики сохраняют входные и выходные данные для каждого действия и их состояния рабочего процесса во внешнем хранилище, что позволяет просматривать сведения о выполнении и журнал после завершения каждого запуска. Приложения логики с отслеживанием состояния обеспечивают высокую устойчивость при возникновении проблем или при сбоях. После восстановления служб и систем можно восстановить прерванные запуски приложений логики из сохраненного состояния и перезапустить приложения логики до завершения. Рабочие процессы с отслеживанием состояния могут продолжать работать в течение года.

* *Без отслеживания состояния*

  Создавайте приложения логики без отслеживания состояния, когда не нужно сохранять, просматривать или ссылаться на данные из предыдущих событий. Эти приложения логики сохраняют входные и выходные данные для каждого действия, а их рабочий процесс — только в памяти, вместо того чтобы передавать эти сведения во внешнее хранилище. В результате приложения логики без отслеживания состояния имеют более короткие запуски, которые обычно не имеют более 5 минут, более высокую производительность благодаря более быстрому времени ответа, более высокой пропускной способности и снижению эксплуатационных затрат, поскольку сведения о выполнении и журнал не хранятся во внешнем хранилище. Тем не менее, если происходит или когда происходят сбои, прерванные запуски не восстанавливаются автоматически, поэтому вызывающему объекту необходимо вручную повторно отправить прерванные запуски. Для упрощения отладки можно [Включить журнал выполнения](#run-history) для приложений логики без отслеживания состояния.

  Сейчас рабочие процессы без отслеживания состояния поддерживают только действия для [управляемых соединителей](../connectors/apis-list.md#managed-api-connectors), а не триггеров. Чтобы запустить рабочий процесс, выберите [встроенный запрос, концентраторы событий или триггер служебной шины](../connectors/apis-list.md#built-ins). Дополнительные сведения о неподдерживаемых триггерах, действиях и соединителях см. в разделе [неподдерживаемые возможности](#unsupported).

Различия между поведением вложенных приложений логики в приложениях логики без отслеживания состояния и без сохранения состояния см. в разделе [различия в вложенном поведении между приложениями логики без](#nested-behavior)отслеживания состояния или без отслеживания состояния.

<a name="pricing-model"></a>

## <a name="pricing-model"></a>Модель ценообразования

При развертывании нового типа ресурсов **приложения логики (Предварительная версия)** вам будет предложено выбрать план размещения, в частности [план службы приложений или план Premium](../azure-functions/functions-scale.md) , который будет использоваться в качестве модели ценообразования. Если выбрать план службы приложений, вам также будет предложено выбрать [ценовую категорию](../app-service/overview-hosting-plans.md). Во время общедоступной предварительной версии для запуска приложений логики в службе приложений не взимается *Дополнительная* плата на основе выбранного плана.

Приложения логики с отслеживанием состояния используют [внешнее хранилище](../azure-functions/functions-scale.md#storage-account-requirements), поэтому модель ценообразования хранилища Azure применяется к транзакциям хранилища, выполняемым Azure Logic Apps средой выполнения. Например, очереди используются для планирования, а таблицы и большие двоичные объекты используются для хранения состояний рабочего процесса.

Дополнительные сведения о моделях ценообразования, применяемых к этому новому типу ресурсов, см. в следующих статьях:

* [Масштабирование и размещение Функций Azure](../azure-functions/functions-scale.md)
* [Увеличение масштаба в службе приложений Azure](../app-service/manage-scale-up.md)
* [Сведения о ценах на функции Azure](https://azure.microsoft.com/pricing/details/functions/)
* [Сведения о ценах на службу приложений](https://azure.microsoft.com/pricing/details/app-service/windows/)
* [Сведения о ценах на хранилище Azure](https://azure.microsoft.com/pricing/details/storage/)

## <a name="prerequisites"></a>Предварительные требования

### <a name="access-and-connectivity"></a>Доступ и подключение

* Доступ к Интернету для загрузки требований, подключения Visual Studio Code к учетной записи Azure, а также для публикации из Visual Studio Code в Azure, контейнера DOCKER или другой среды.

* Учетная запись и подписка Azure. Если у вас нет ее, вы можете [зарегистрироваться для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F).

* Чтобы создать тот же пример приложения логики в этой статье, вам потребуется учетная запись электронной почты Office 365 Outlook, которая использует рабочую или учебную учетную запись Майкрософт для входа.

  Если вы решили использовать другой [соединитель электронной почты, поддерживаемый Azure Logic Apps](/connectors/), например Outlook.com или [Gmail](../connectors/connectors-google-data-security-privacy-policy.md), вы по-прежнему можете следовать этому примеру, и общие действия одинаковы, но пользовательский интерфейс и параметры могут отличаться. Например, если вы используете соединитель Outlook.com, используйте личную учетная запись Майкрософт вместо входа.

### <a name="tools"></a>Инструменты

* [Visual Studio Code 1.30.1 (2019 января) или более поздней версии](https://code.visualstudio.com/). Кроме того, скачайте и установите эти дополнительные средства для Visual Studio Code, если у вас их еще нет:

  * [Расширение учетной записи Azure](https://marketplace.visualstudio.com/items?itemName=ms-vscode.azure-account), предоставляющее единую общую фильтрацию входа и подписки Azure для всех других расширений azure в Visual Studio Code.

  * [C# для расширения Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp), которое позволяет запускать приложение логики с помощью функции F5.

  * [Azure functions Core Tools](../azure-functions/functions-run-local.md)версии [3.0.2931](https://github.com/Azure/azure-functions-core-tools/releases/tag/3.0.2931) или [2.7.2936](https://github.com/Azure/azure-functions-core-tools/releases/tag/2.7.2936)с помощью установщика Microsoft (MSI). Эти средства включают версию той же среды выполнения, которая включает среду выполнения функций Azure, которая выполняется в Visual Studio Code.

    > [!IMPORTANT]
    > Если у вас установлена более ранняя версия, то сначала удалите эту версию или убедитесь, что переменная среды PATH указывает на версию, которую вы загрузили и установили.
    >
    > Если вы хотите использовать [действие **встроенного кода** ](../logic-apps/logic-apps-add-run-inline-code.md) для выполнения кода JavaScript, необходимо использовать среду выполнения функций Azure версии 3 раза, так как действие не поддерживает версию 2x. Кроме того, в настоящее время это действие не поддерживается в операционных системах Linux.

  * [Расширение Azure Logic Apps (Предварительная версия) для Visual Studio Code](https://go.microsoft.com/fwlink/p/?linkid=2143167). Это расширение общедоступной предварительной версии предоставляет возможность создавать приложения логики без отслеживания состояния и без отслеживания состояния, а также тестировать их локально в Visual Studio Code.

    В настоящее время в Visual Studio Code можно одновременно установить как **Azure Logic Apps** исходное, так и новое расширение **Azure Logic Apps (Предварительная версия)** . Выбрав значок Azure на панели инструментов Visual Studio Code, вы сможете просмотреть все приложения логики, развернутые в Azure, но каждый тип ресурсов появится в собственных разделах расширения, **Logic Apps** и **Azure Logic Apps (Предварительная версия)**.

    > [!IMPORTANT]
    > Если вы создали приложения логики с помощью расширения **Azure Logic Apps (закрытая Предварительная версия)** , эти приложения логики не будут работать с расширением общедоступной предварительной версии. Однако эти приложения логики можно перенести путем удаления расширения закрытой предварительной версии, выполнения необходимой очистки и установки расширения общедоступной предварительной версии. Затем можно создать новый проект в Visual Studio Code и скопировать ранее созданный файл **Workflow. Definition** приложения логики в новый проект.
    >
    > Таким образом, перед установкой расширения общедоступной предварительной версии убедитесь, что удалены все более раннее версия, и удалите эти артефакты.
    >
    > * Папка **Microsoft. Azure. functions. екстенсионбундле. Workflows.** , которая содержит предыдущие пакеты расширений и расположена по одному из следующих путей:
    >
    >   * `C:\Users\{userName}\AppData\Local\Temp\Functions\ExtensionBundles`
    >
    >   * `C:\Users\{userName}.azure-functions-core-tools\Functions\ExtensionBundles`
    >
    > * Папка **Microsoft. Azure. Workflows. веб-задания. extension** , которая является кэшем [NuGet](/nuget/what-is-nuget) для расширения закрытой предварительной версии и находится по этому пути:
    >
    >   `C:\Users\{userName}\.nuget\packages`

    Чтобы установить расширение **Azure Logic Apps (Предварительная версия)** , выполните следующие действия.

    1. В Visual Studio Code на панели инструментов слева выберите **расширения**.

    1. В поле поиска расширений введите `azure logic apps preview` . В списке результатов выберите **Azure Logic Apps (Предварительная версия)** **>** **установить**.

       После завершения установки расширение общедоступной предварительной версии отображается в списке **расширения: установленные** .

       ![Снимок экрана, на котором показан список установленных расширений Visual Studio Code с подчеркнутым расширением "Azure Logic Apps (Предварительная версия)".](./media/create-stateful-stateless-workflows-visual-studio-code/azure-logic-apps-extension-installed.png)

* Чтобы протестировать пример приложения логики, созданного в этой статье, необходимо средство, которое может отправить вызовы триггера запроса, что является первым шагом в примере приложения логики. Если у вас нет такого средства, вы можете скачать, установить и использовать [POST](https://www.postman.com/downloads/).

* Для упрощения ведения журнала диагностики и трассировки можно добавить и использовать ресурс [Application Insights](../azure-monitor/app/app-insights-overview.md) . Этот ресурс можно создать во время развертывания приложения логики или в портал Azure после развертывания приложения логики.

### <a name="storage-requirements"></a>Требования к системе хранения данных

Сейчас создание нового ресурса **приложения логики (Предварительная версия)** недоступно в macOS. Однако для Windows или другой операционной системы, такой как Linux, необходимо настроить это требование к хранилищу.

1. Скачайте и установите [эмулятор службы хранилища Azure 5,10](https://go.microsoft.com/fwlink/p/?linkid=717179).

1. Для запуска эмулятора требуется локальная установка базы данных SQL, например бесплатная [SQL Server 2019 Express Edition](https://go.microsoft.com/fwlink/p/?linkid=866658). Дополнительные сведения см. [в статье Использование эмулятора хранения Azure для разработки и тестирования](../storage/common/storage-use-emulator.md).

   > [!IMPORTANT]
   > Перед открытием конструктора приложений логики для создания рабочего процесса приложения логики убедитесь, что вы запускаете эмулятор. В противном случае вы получите сообщение о том, что `Workflow design time could not be started` .
   >
   > ![Снимок экрана, на котором отображается эмулятор службы хранилища Azure.](./media/create-stateful-stateless-workflows-visual-studio-code/start-storage-emulator.png)

<a name="set-up"></a>

## <a name="set-up-visual-studio-code"></a>Настройка Visual Studio Code

1. Чтобы убедиться, что все расширения установлены правильно, перезагрузите или перезапустите Visual Studio Code.

1. Включение или проверка того, что Visual Studio Code автоматически обнаруживает и устанавливает обновления расширений, чтобы ваше расширение общедоступной предварительной версии устанавливало последние обновления.

   Для проверки сделайте следующее:

   1. В меню **файл** выберите **Preferences** **>** **настройки параметры**.

   1. На вкладке **пользователь** перейдите к разделу **компоненты** **>** **расширения**.

   1. Убедитесь, что выбраны **Автоматические проверки обновлений** и **Автоматическое обновление** .

1. Включите или убедитесь, что эти параметры расширения **Azure Logic Apps (Предварительная версия)** настроены в Visual Studio Code:

   * **Azure Logic Apps v2: режим панели**
   * **Azure Logic Apps v2: среда выполнения проекта**

   1. В меню **файл** выберите **Preferences** **>** **настройки параметры**.

   1. На вкладке **пользователь** выберите **>** **расширения** **>** **Azure Logic Apps (Предварительная версия)**.

   1. В разделе **Azure Logic Apps v2: режим панели**убедитесь, что выбран **режим включить панель** . В разделе **Azure Logic Apps v2: проект Runtime**задайте для версии значение **~ 3** или **~ 2**на основе установленной ранее [версии Azure functions Core Tools](#prerequisites) .

      > [!IMPORTANT]
      > Если вы хотите использовать [действие **встроенного кода** ](../logic-apps/logic-apps-add-run-inline-code.md) для выполнения кода JavaScript, убедитесь, что используется среда выполнения проекта версии 3, так как действие не поддерживает версию 2. Кроме того, в настоящее время это действие не поддерживается в операционных системах Linux.

      ![Снимок экрана, на котором показаны параметры Visual Studio Code для расширения "Azure Logic Apps (Предварительная версия)".](./media/create-stateful-stateless-workflows-visual-studio-code/azure-logic-apps-preview-settings.png)

<a name="connect-azure-account"></a>

## <a name="connect-to-your-azure-account"></a>Подключение к учетной записи Azure

1. На панели инструментов Visual Studio Code щелкните значок Azure.

   ![Снимок экрана, на котором показаны Visual Studio Code панель инструментов и выбранный значок Azure.](./media/create-stateful-stateless-workflows-visual-studio-code/visual-studio-code-azure-icon.png)

1. В области Azure в разделе **Azure: Logic Apps (Предварительная версия)** выберите **войти в Azure**. Когда появится страница Проверка подлинности Visual Studio Code, войдите с помощью учетной записи Azure.

   ![Снимок экрана, показывающий панель Azure и выбранную ссылку для входа в Azure.](./media/create-stateful-stateless-workflows-visual-studio-code/sign-in-azure-subscription.png)

   После входа на панели Azure отобразятся подписки в учетной записи Azure. Если ожидаемые подписки не отображаются или вы хотите, чтобы на панели отображались только определенные подписки, выполните следующие действия.

   1. В списке подписки переместите указатель рядом с первой подпиской, пока не появится кнопка **Выбор подписок** (значок фильтра). Выберите значок фильтра.

      ![Снимок экрана, показывающий панель Azure и значок выбранного фильтра.](./media/create-stateful-stateless-workflows-visual-studio-code/filter-subscription-list.png)

      Или в строке состояния Visual Studio Code выберите свою учетную запись Azure. 

   1. Когда появится список других подписок, выберите нужные подписки и убедитесь, что выбрано значение **ОК**.

<a name="create-project"></a>

## <a name="create-a-local-project"></a>Создание локального проекта

Перед созданием приложения логики создайте локальный проект, чтобы можно было управлять приложением логики и развертывать его из Visual Studio Code. Базовый проект аналогичен проекту функций Azure, также известному как проект приложения-функции. Однако эти типы проектов отделены друг от друга, поэтому рабочие процессы и функции приложения логики не могут существовать в одном проекте.

1. На компьютере создайте *пустую* локальную папку для проекта, которая позже будет создана в Visual Studio Code.

   Если установлено пакет SDK для .NET Core 5,0, создайте **global.jsв** файле, который ссылается на любую среду выполнения .NET Core версии 3. x, которая позже, чем 3.1.201, например:

   ```json
   {
      "sdk": {
         "version": "3.1.8",
         "rollForward": "disable"
      }
   }
   ```

   Позже, после создания проекта, но прежде чем пытаться открыть файл **workflow.js** в конструкторе приложений логики, необходимо добавить этот **global.jsв** файл в корневом расположении проекта.

1. В Visual Studio Code закройте все открытые папки.

1. В области Azure рядом с **Azure: Logic Apps (Предварительная версия)** выберите **создать новый проект** (значок, показывающий папку и молнию).

   ![Снимок экрана, на котором показана панель инструментов панели Azure с выбранным параметром "создать новый проект".](./media/create-stateful-stateless-workflows-visual-studio-code/create-new-project-folder.png)

1. Если брандмауэр защитника Windows предлагает предоставить доступ к сети для `Code.exe` , то есть Visual Studio Code, а для — `func.exe` Azure functions Core Tools, выберите **частные сети, например домашняя или Рабочая сеть** **>** **Разрешить доступ**.

1. Перейдите в папку, в которой была создана папка проекта, выберите эту папку и продолжайте работу.

   ![Снимок экрана, на котором отображается диалоговое окно "Выбор папки" с вновь созданной папкой проекта и выбранной кнопкой "выбрать".](./media/create-stateful-stateless-workflows-visual-studio-code/select-project-folder.png)

1. В появившемся списке шаблонов выберите рабочий процесс с **отслеживанием состояния** или **Рабочий процесс без отслеживания состояния**. В этом примере выбирается **Рабочий процесс с отслеживанием состояния**.

   ![Снимок экрана, показывающий список шаблонов рабочих процессов с выбранным параметром "Рабочий процесс с отслеживанием состояния".](./media/create-stateful-stateless-workflows-visual-studio-code/select-stateful-stateless-workflow.png)

1. Укажите имя рабочего процесса приложения логики и нажмите клавишу ВВОД. В этом примере используется `example-workflow` в качестве имени.

   ![Снимок экрана, показывающий, что в качестве имени рабочего процесса в поле "создать новый рабочий процесс с отслеживанием состояния (3/4)" и "пример — рабочий процесс".](./media/create-stateful-stateless-workflows-visual-studio-code/name-your-workflow.png)

1. В следующем списке выберите **Открыть в текущем окне**.

   ![Снимок экрана, на котором отображается список с выбранным параметром "открыть в текущем окне".](./media/create-stateful-stateless-workflows-visual-studio-code/select-project-location.png)

   Visual Studio Code перезагрузить, открывает панель Обозреватель и отображает проект, который теперь включает автоматически созданные файлы проекта. Например, в проекте есть папка, в которой отображается имя рабочего процесса приложения логики. В этой папке `workflow.json` файл содержит базовое определение JSON рабочего процесса приложения логики.

   ![Снимок экрана, на котором показано окно проводника с папкой проекта, папкой рабочего процесса и файлом "workflow.js".](./media/create-stateful-stateless-workflows-visual-studio-code/local-project-created.png)

1. Если у вас установлен пакет SDK для .NET Core 5,0 и вы создали **global.jsв** файле, который ссылается на среду выполнения .NET Core версии 3. x, которая позже 3.1.201, необходимо добавить эту **global.jsв** файл в корневое расположение проекта из Visual Studio Code.

   > [!NOTE]
   > Убедитесь, что вы завершили этот шаг перед открытием **workflow.jsв** файле, который содержит базовое определение JSON рабочего процесса в конструкторе приложений логики. В противном случае конструктор не откроется.

<a name="open-workflow-definition-designer"></a>

## <a name="open-the-workflow-definition-file-in-logic-app-designer"></a>Открытие файла определения рабочего процесса в конструкторе приложений логики

1. Если Visual Studio Code работает в Windows или Linux, убедитесь, что эмулятор хранения Azure работает. Для получения дополнительных сведений ознакомьтесь с [предварительными требованиями](#prerequisites).

1. Разверните папку проекта для рабочего процесса. Откройте **workflow.jsв** контекстном меню файла и выберите **Открыть в конструкторе**.

   ![Снимок экрана, на котором отображается панель обозревателя и контекстное окно для workflow.jsфайла с выбранным параметром "открыть в конструкторе".](./media/create-stateful-stateless-workflows-visual-studio-code/open-definition-file-in-designer.png)

   Если появляется сообщение об ошибке `Workflow design time could not be started` , убедитесь, что эмулятор хранения Azure работает. В противном случае попробуйте выполнить другие рекомендации по устранению неполадок:

   В Visual Studio Code проверьте выходные данные расширения предварительной версии.

   1. В меню **вид** выберите пункт **выходные данные**.

   1. В списке в строке заголовка **выходных данных** выберите **Azure Logic Apps** , чтобы просмотреть выходные данные для расширения предварительного просмотра, например:

      ![Снимок экрана, на котором показано окно вывода Visual Studio Code с выбранным параметром "Azure Logic Apps".](./media/create-stateful-stateless-workflows-visual-studio-code/check-outout-window-azure-logic-apps.png)

   1. Просмотрите выходные данные и проверьте, отображается ли это сообщение об ошибке:

      ```text
      A host error has occurred during startup operation '{operationID}'.
      System.Private.CoreLib: The file 'C:\Users\{userName}\AppData\Local\Temp\Functions\
      ExtensionBundles\Microsoft.Azure.Functions.ExtensionBundle.Workflows\1.1.1\bin\
      DurableTask.AzureStorage.dll' already exists.
      Value cannot be null. (Parameter 'provider')
      Application is shutting down...
      Initialization cancellation requested by runtime.
      Stopping host...
      Host shutdown completed.
      ```

      Эта ошибка может произойти, если ранее была предпринята попытка открыть конструктор, а затем этот проект был снят или удален. Чтобы устранить эту ошибку, удалите папку **екстенсионбундлес** в этом расположении **. папка \Users \\ {username} \аппдата\локал\темп\функтионс\екстенсионбундлес**и повторите попытку открытия файла **workflow.js** в конструкторе.

1. В списке **включить соединители в Azure** выберите **использовать соединители из Azure**, которые применяются ко всем управляемым соединителям, доступным в портал Azure, а не только к соединителям для служб Azure.

   ![Снимок экрана, на котором отображается панель обозревателя с выбранным флажком "включить соединители в Azure" и "использовать соединители из Azure".](./media/create-stateful-stateless-workflows-visual-studio-code/use-connectors-from-azure.png)

1. В списке группы ресурсов выберите **создать новую группу ресурсов**.

   ![Снимок экрана, на котором отображается панель обозревателя с перечнем групп ресурсов и выбран параметр "создать новую группу ресурсов"](./media/create-stateful-stateless-workflows-visual-studio-code/create-select-resource-group.png)

1. Укажите имя группы ресурсов и нажмите клавишу ВВОД. В этом примере используется `example-logic-app-preview-rg`.

   ![Снимок экрана, показывающий область обозревателя и имя группы ресурсов.](./media/create-stateful-stateless-workflows-visual-studio-code/enter-name-for-resource-group.png)

1. В списке расположения найдите и выберите [поддерживаемый регион Azure](https://github.com/Azure/logicapps/blob/master/articles/logic-apps-public-preview-known-issues.md#available-regions) , который будет использоваться для создания группы ресурсов и ресурсов. В этом примере используется **Западная Центральная часть США**.

   > [!IMPORTANT]
   > В настоящее время поддерживаются не все регионы, но для добавления дополнительных регионов используются обновления. Выбор неподдерживаемого региона может привести к проблемам, например к созданию подключений. Для регионов, поддерживаемых в настоящее время, просмотрите [страницу GitHub об известных проблемах](https://github.com/Azure/logicapps/blob/master/articles/logic-apps-public-preview-known-issues.md#available-regions)расширения.

   ![Снимок экрана, на котором показана область обозревателя с списком расположений и выбрано "Западная Центральная часть США".](./media/create-stateful-stateless-workflows-visual-studio-code/select-azure-region.png)

   После выполнения этого шага Visual Studio Code откроет Конструктор приложений логики.

   > [!NOTE]
   > Когда Visual Studio Code запускает API-интерфейс времени разработки рабочего процесса, появляется сообщение о том, что запуск может занять несколько секунд. Можно проигнорировать это сообщение или нажать кнопку **ОК**.

   После того как откроется конструктор приложений логики, в конструкторе появится запрос **Выбор операции** , который будет выбран по умолчанию, в котором отображается панель **Добавление действия** .

   ![Снимок экрана, показывающий конструктор приложений логики.](./media/create-stateful-stateless-workflows-visual-studio-code/workflow-app-designer.png)

1. Затем [добавьте триггер и действия](#add-trigger-actions) в рабочий процесс.

<a name="add-trigger-actions"></a>

## <a name="add-a-trigger-and-actions"></a>Добавление триггера и действий

После открытия конструктора приложений логики из **workflow.jsв** контекстном меню файла в конструкторе появится запрос **выбрать операцию** , который будет выбран по умолчанию. Теперь можно приступить к созданию рабочего процесса, добавив триггер и действия.

В этом примере рабочий процесс приложения логики использует этот триггер и следующие действия:

* Встроенный [триггер запроса](../connectors/connectors-native-reqres.md) **при получении HTTP-запроса**, который получает входящие вызовы или запросы и создает конечную точку, которую могут вызывать другие службы или приложения логики.

* [Office 365 Outlook](../connectors/connectors-create-api-office365-outlook.md)— **Отправка сообщения электронной почты**.

* Встроенное [действие ответа](../connectors/connectors-native-reqres.md), которое используется для отправки ответа и возврата данных обратно вызывающему объекту.

### <a name="add-the-request-trigger"></a>Добавление триггера "Запрос"

1. Рядом с конструктором в области **Добавление триггера** в поле Поиск **операции выберите** параметр **Встроенная** , чтобы можно было выбрать триггер, который выполняется изначально.

1. В поле поиска **Выбор операции** введите `when a http request` и выберите Встроенный триггер запроса, названный **при получении HTTP-запроса**.

   ![Снимок экрана, показывающий конструктор приложений логики и * * Добавление области триггера * * с выбранным триггером "при получении HTTP-запроса".](./media/create-stateful-stateless-workflows-visual-studio-code/add-request-trigger.png)

   Когда триггер появляется в конструкторе, открывается область сведений триггера, в которой отображаются свойства, параметры и другие действия триггера.

   ![Снимок экрана, показывающий конструктор приложений логики с выбранным триггером "при получении HTTP-запроса" и открытой область сведений о триггере.](./media/create-stateful-stateless-workflows-visual-studio-code/request-trigger-added-to-designer.png)

   > [!TIP]
   > Если область сведений не отображается, проверяет, выбран ли триггер в конструкторе.

1. Если необходимо удалить элемент в конструкторе, выполните следующие действия.

   1. Выберите элемент в конструкторе.

   1. В области сведений об элементе, открывающейся с правой стороны, нажмите кнопку с многоточием (**...**) **>** **Удалить**. Чтобы подтвердить удаление, нажмите кнопку **ОК**.

      ![Снимок экрана, на котором показан выбранный элемент в конструкторе с открытой областью сведений и кнопкой с выбранными многоточиями и параметром "Удалить".](./media/create-stateful-stateless-workflows-visual-studio-code/delete-item-from-designer.png)

### <a name="add-the-office-365-outlook-action"></a>Добавление действия Office 365 Outlook

1. В конструкторе в разделе добавленный триггер выберите **новый шаг**.

   В конструкторе появится запрос **Выбор операции** , после чего откроется **область добавить панель действий** , чтобы можно было выбрать следующее действие.

1. В области **Добавление действия** в поле Поиск **операции** выберите **Azure** , чтобы найти и выбрать действие для управляемого соединителя, развернутого в Azure.

   В этом примере выбирается и используется действие Office 365 Outlook, а также **отправляется сообщение электронной почты (v2)**.

   ![Снимок экрана, показывающий конструктор приложений логики и * * Добавление области действия * * с выбранным действием Outlook "отправить электронное письмо" Office 365.](./media/create-stateful-stateless-workflows-visual-studio-code/add-send-email-action.png)

1. В области Подробности действия выберите **Вход** , чтобы создать подключение к учетной записи электронной почты.

   ![Снимок экрана, показывающий конструктор приложений логики и * * панель "Отправка сообщения электронной почты (v2) * *" с выбранным параметром "вход".](./media/create-stateful-stateless-workflows-visual-studio-code/send-email-action-sign-in.png)

   > [!NOTE]
   > Если возникает ошибка, `Failed to create connection...` возможно, выбран неподдерживаемый регион для приложения логики. Обновления для добавления других регионов выполняются. В то же время для регионов, поддерживаемых в настоящий момент, просмотрите [страницу GitHub об известных проблемах](https://github.com/Azure/logicapps/blob/master/articles/logic-apps-public-preview-known-issues.md#available-regions)расширения.

1. Когда Visual Studio Code запросит согласие на доступ к своей учетной записи электронной почты, нажмите кнопку **Открыть**.

   ![Снимок экрана, на котором показан запрос Visual Studio Code для разрешения доступа.](./media/create-stateful-stateless-workflows-visual-studio-code/visual-studio-code-open-external-website.png)

   > [!TIP]
   > Чтобы предотвратить дальнейшие запросы, выберите **Настроить доверенные домены** , чтобы можно было добавить страницу проверки подлинности в качестве доверенного домена.

1. Следуйте последующим запросам, чтобы войти, разрешить доступ и разрешить возврат в Visual Studio Code.

   > [!NOTE]
   > Если слишком много времени прошло до завершения запросов, время ожидания процесса проверки подлинности истекает и происходит сбой. В этом случае вернитесь в конструктор и повторите попытку входа, чтобы создать подключение.

1. Когда расширение Azure Logic Apps Preview запрашивает согласие на доступ к учетной записи электронной почты, нажмите кнопку **Открыть**. Чтобы разрешить доступ, следуйте указаниям в следующем запросе.

   ![Снимок экрана с запросом расширения предварительного просмотра для разрешения доступа.](./media/create-stateful-stateless-workflows-visual-studio-code/allow-preview-extension-open-uri.png)

   > [!TIP]
   > Чтобы предотвратить дальнейшие запросы, установите флажок **больше не спрашивать для этого расширения**.

   После Visual Studio Code создает подключение, некоторые соединители показывают сообщение о том, что `The connection will be valid for {n} days only.` это ограничение действует только в течение времени, пока вы разрабатываете приложение логики в Visual Studio Code. После развертывания это ограничение больше не применяется, так как приложение логики может проходить проверку подлинности во время выполнения с помощью автоматически включенного [управляемого удостоверения, назначенного системой](../logic-apps/create-managed-service-identity.md). Это управляемое удостоверение отличается от учетных данных проверки подлинности или строки подключения, используемой при создании соединения. Если отключить назначенное системой управляемое удостоверение, подключения не будут работать во время выполнения.

1. Если в конструкторе не выбрано действие **Отправить сообщение электронной почты** , выберите это действие.

1. В области Подробности действия на вкладке **Параметры** укажите необходимые сведения для действия, например:

   ![Снимок экрана, показывающий конструктор приложений логики с подробными сведениями о действиях по отправке электронной почты Office 365 Outlook.](./media/create-stateful-stateless-workflows-visual-studio-code/send-email-action-details.png)

   | Свойство | Обязательно | Значение | Описание |
   |----------|----------|-------|-------------|
   | **Чтобы** | Да | <*ваш адрес электронной почты*> | Получатель электронной почты, который может быть адресом электронной почты для целей тестирования. В этом примере используется фиктивное сообщение электронной почты `sophiaowen@fabrikam.com` . |
   | **Тема** | Да | `An email from your example workflow` | тему сообщения; |
   | **Текст** | Да | `Hello from your example workflow!` | Содержимое сообщения электронной почты |
   ||||

   > [!NOTE]
   > Если вы хотите внести какие бы то ни было изменения в области сведений на вкладке **Параметры**, **Запуск после**или **статический результат** , убедитесь, что выбран параметр **Готово** для фиксации этих изменений перед переключением вкладок или изменением фокуса на конструктор. В противном случае Visual Studio Code не сохранит изменения. Дополнительные сведения см. на странице сведений об [известных проблемах](https://github.com/Azure/logicapps/blob/master/articles/logic-apps-public-preview-known-issues.md)расширения для предварительного просмотра.

1. В конструкторе выберите **сохранить**.

Затем отлаживать и тестируйте рабочий процесс локально в Visual Studio Code.

<a name="debug-test-locally"></a>

## <a name="debug-and-test-your-logic-app"></a>Отладка и тестирование приложения логики

1. Чтобы упростить отладку рабочего процесса приложения логики без отслеживания состояния, можно [Включить журнал выполнения для этого рабочего процесса](#run-history).

1. На панели инструментов Visual Studio Code откройте меню **выполнить** и выберите **начать отладку** (F5).

   Откроется окно **терминала** , в котором можно будет ознакомиться с сеансом отладки.

1. Теперь найдите URL-адрес обратного вызова для конечной точки в триггере запроса.

   1. Повторно откройте панель обозревателя, чтобы можно было просмотреть проект.

   1. В контекстном меню **workflow.jsв** файле выберите **Обзор**.

      ![Снимок экрана, на котором отображается панель обозревателя и контекстное окно для workflow.jsфайла с выбранным параметром "Обзор".](./media/create-stateful-stateless-workflows-visual-studio-code/open-workflow-overview.png)

   1. Найдите значение **URL-адреса обратного вызова** , похожее на этот URL-адрес для примера триггера запроса:

      `http://localhost:7071/api/<workflow-name>/triggers/manual/invoke?api-version=2020-05-01-preview&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=<shared-access-signature>`

      ![Снимок экрана, показывающий страницу обзора рабочего процесса с URL-адресом обратного вызова](./media/create-stateful-stateless-workflows-visual-studio-code/find-callback-url.png)

1. Чтобы проверить URL-адрес обратного вызова, активируя рабочий процесс приложения логики, откройте [публикацию POST](https://www.postman.com/downloads/) или предпочтительное средство для создания и отправки запросов.

   Этот пример можно продолжить с помощью процедуры POST. Дополнительные сведения см. в разделе [posting начало работы](https://learning.postman.com/docs/getting-started/introduction/).

   1. На панели инструментов после выберите **создать**.

      ![Снимок экрана, на котором показана публикация после нажатия кнопки "создать"](./media/create-stateful-stateless-workflows-visual-studio-code/postman-create-request.png)

   1. В области **создать новую** в разделе **стандартные блоки**выберите **запрос**.

   1. В окне **запрос на сохранение** в разделе **имя запроса**введите имя запроса, например `Test workflow trigger` .

   1. В разделе **выберите коллекцию или папку для сохранения**выберите **создать коллекцию**.

   1. В разделе **все коллекции**укажите имя коллекции, которую нужно создать для упорядочения запросов, нажмите клавишу ВВОД и выберите **сохранить в <*коллекция-имя* > **. В этом примере `Logic Apps requests` в качестве имени коллекции используется.

      Откроется панель запроса публикации, чтобы можно было отправить запрос на URL-адрес обратного вызова для триггера запроса.

      ![Снимок экрана, показывающий сообщение POST с открытой панелью запросов](./media/create-stateful-stateless-workflows-visual-studio-code/postman-request-pane.png)

   1. Вернитесь к Visual Studio Code. на странице Обзор рабочего процесса скопируйте значение свойства **URL-адрес обратного вызова** .

   1. Вернитесь к POST. На панели запросов рядом со списком метод, который в настоящее **время представляет метод** запроса по умолчанию, вставьте URL-адрес обратного вызова, скопированный ранее в поле адрес, и выберите **Отправить**.

      ![Снимок экрана, показывающий POST и URL-адрес обратного вызова в поле адреса с выбранной кнопкой "Отправить"](./media/create-stateful-stateless-workflows-visual-studio-code/postman-test-call-back-url.png)

      В примере рабочего процесса приложения логики отправляется сообщение электронной почты, которое выглядит примерно так:

      ![Снимок экрана, показывающий электронную почту Outlook, как описано в примере](./media/create-stateful-stateless-workflows-visual-studio-code/workflow-app-result-email.png)

1. В Visual Studio Code вернитесь на страницу обзора рабочего процесса.

   Если вы создали рабочий процесс с отслеживанием состояния, после отправки запроса вы запускаете рабочий процесс. на странице "Обзор" отображается состояние выполнения и журнал рабочего процесса. Дополнительные сведения о состояниях выполнения см. в разделе [Просмотр журнала выполнений](../logic-apps/monitor-logic-apps.md#review-runs-history).

   ![Снимок экрана, показывающий страницу обзора рабочего процесса с состоянием выполнения и журналом](./media/create-stateful-stateless-workflows-visual-studio-code/post-trigger-call.png)

   > [!TIP]
   > Если состояние выполнения не отображается, обновите страницу обзора, выбрав **Обновить**.

1. Чтобы просмотреть состояние каждого шага в определенном запуске, а также входных и выходных данных этого шага, нажмите кнопку с многоточием (**...**) для этого запуска и выберите команду **отобразить выполнение**.

   ![Снимок экрана, показывающий строку журнала выполнения рабочего процесса с многоточием и выбранным параметром "Показать выполнение"](./media/create-stateful-stateless-workflows-visual-studio-code/show-run-history.png)

   Visual Studio Code отображаются состояния выполнения для каждого действия.

1. Чтобы просмотреть входные и выходные данные для каждого шага, разверните шаг, который требуется проверить. Для дальнейшей проверки входных и выходных данных этого шага выберите параметр **Показывать необработанные входные** данные или **отобразить необработанные выходные данные**.

   ![Снимок экрана, показывающий состояние каждого шага в рабочем процессе плюс входные и выходные данные в расширенном действии "отправить электронное письмо"](./media/create-stateful-stateless-workflows-visual-studio-code/run-history-details.png)

1. Чтобы отключить сеанс отладки, в меню **Запуск** выберите команду **отменить отладку** (Shift + F5).

<a name="return-response"></a>

## <a name="return-a-response-to-the-caller"></a>Возврат ответа вызывающему объекту

Чтобы вернуть ответ на вызывающий объект, который отправил запрос в приложение логики, можно использовать встроенное [действие ответа](../connectors/connectors-native-reqres.md) для рабочего процесса, который начинается с триггера запроса.

1. В конструкторе приложений логики в действии **Отправить сообщение электронной почты** выберите **новый шаг**.

   В конструкторе появится запрос **Выбор операции** , после чего откроется **область добавить панель действий** , чтобы можно было выбрать следующее действие.

1. В области **Добавить действие** в поле поиска **Выбор действия** убедитесь, что выбран параметр **Встроенная** . В поле поиска введите `response` и выберите действие **ответ** .

   ![Снимок экрана, показывающий конструктор приложений логики с выбранным действием ответа.](./media/create-stateful-stateless-workflows-visual-studio-code/add-response-action.png)

   Когда в конструкторе появится действие **ответ** , автоматически откроется область сведений действия.

   ![Снимок экрана, показывающий конструктор приложений логики с открытой областью сведений действия "ответ" и свойством "Body", установленным в значение свойства "текст" действия "отправить сообщение электронной почты".](./media/create-stateful-stateless-workflows-visual-studio-code/response-action-details.png)

1. На вкладке **Параметры** укажите необходимые сведения для функции, которую необходимо вызвать.

   В этом примере возвращается значение свойства **Body** , которое выводится в результате действия **Send a email** .

   1. Щелкните внутри поля свойств **текста** , чтобы появился список динамического содержимого, и отобразятся доступные выходные значения из предыдущего триггера и действий в рабочем процессе.

      ![Снимок экрана, показывающий область сведений действия "ответ" с указателем мыши внутри свойства "Body", чтобы появился список динамического содержимого.](./media/create-stateful-stateless-workflows-visual-studio-code/open-dynamic-content-list.png)

   1. В списке динамическое содержимое в разделе **Отправка сообщения электронной почты**выберите **текст**.

      ![Снимок экрана, на котором отображается список открытых динамических содержимого. В списке под заголовком "отправить сообщение электронной почты" выбрано выходное значение "текст".](./media/create-stateful-stateless-workflows-visual-studio-code/select-send-email-action-body-output-value.png)

      По завершении для свойства **Body** действия ответа теперь задается выходное значение **текста** для действия **Отправить сообщение электронной почты** .

      ![Снимок экрана, показывающий состояние каждого шага в рабочем процессе плюс входные и выходные данные в расширенном действии "ответ".](./media/create-stateful-stateless-workflows-visual-studio-code/response-action-details-body-property.png)

1. В конструкторе выберите **сохранить**.

<a name="retest-workflow"></a>

## <a name="retest-your-logic-app"></a>Повторное тестирование приложения логики

После внесения обновлений в приложение логики можно запустить другой тест, повторно запустив отладчик в Visual Studio и отправив другой запрос на активацию обновленного приложения логики, как описано в разделе [Отладка и тестирование приложения логики](#debug-test-locally).

1. На панели инструментов Visual Studio Code откройте меню **выполнить** и выберите **начать отладку** (F5).

1. В POST или средстве для создания и отправки запросов отправьте другой запрос на активацию рабочего процесса.

1. Если вы создали рабочий процесс с отслеживанием состояния, на странице Обзор рабочего процесса проверьте состояние последнего запуска. Чтобы просмотреть состояние, входные и выходные данные для каждого шага в этом запуске, нажмите кнопку с многоточием (**...**) для этого запуска и выберите **Показать выполнение**.

   Например, ниже приведено пошаговое состояние запуска после обновления примера рабочего процесса с помощью действия ответ.

   ![Снимок экрана, показывающий состояние каждого шага в обновленном рабочем процессе плюс входные и выходные данные в расширенном действии "ответ".](./media/create-stateful-stateless-workflows-visual-studio-code/run-history-details-rerun.png)

1. Чтобы отключить сеанс отладки, в меню **Запуск** выберите команду **отменить отладку** (Shift + F5).

<a name="publish-azure"></a>

## <a name="publish-to-azure"></a>Публикация в Azure

В Visual Studio Code можно развернуть проект непосредственно в Azure, который публикует приложение логики с помощью нового типа ресурсов **приложения логики (Предварительная версия)** . Как и ресурс приложения-функции в функциях Azure, развертывание для этого нового типа ресурсов требует выбора [плана размещения и ценовой](../app-service/overview-hosting-plans.md)категории, которые можно настроить во время развертывания. Дополнительные сведения о планах размещения и ценах см. в следующих разделах:

* [Увеличение масштаба в службе приложений Azure](../app-service/manage-scale-up.md)
* [Масштабирование и размещение Функций Azure](../azure-functions/functions-scale.md)

Приложение логики можно опубликовать как новый ресурс, который автоматически создает дополнительные необходимые ресурсы, такие как [учетная запись хранения Azure, аналогично требованиям приложения-функции](../azure-functions/storage-considerations.md). Вы также можете опубликовать приложение логики в ранее развернутом ресурсе **приложения логики (Предварительная версия)** , который перезаписывает это приложение логики.

### <a name="publish-as-a-new-logic-app-preview-resource"></a>Опубликовать как новый ресурс приложения логики (Предварительная версия)

1. На панели инструментов Visual Studio Code щелкните значок Azure.

1. На панели инструментов **Azure: Logic Apps (Предварительная версия)** выберите **развернуть в приложение логики**.

   ![Снимок экрана, на котором показано окно "Azure: Logic Apps (Предварительная версия)" и панель инструментов панели с выбранным параметром "развернуть в приложение логики".](./media/create-stateful-stateless-workflows-visual-studio-code/deploy-to-logic-app.png)

1. В открывшемся списке Visual Studio Code выберите следующие параметры:

   * **Создание нового приложения логики (Предварительная версия) в Azure** (быстрая)
   * **Создание нового приложения логики (Предварительная версия) в Azure Advanced**
   * Ранее развернутый ресурс **приложения логики (Предварительная версия)** , если он существует

   В этом примере **в Azure Advanced вы продолжите создавать новое приложение логики (Предварительная версия)**.

   ![Снимок экрана, на котором показана область "Azure: Logic Apps (Предварительная версия)" со списком с выбранным параметром "создать новое приложение логики (Предварительная версия) в Azure".](./media/create-stateful-stateless-workflows-visual-studio-code/select-create-logic-app-options.png)

1. Чтобы создать новый ресурс **приложения логики (Предварительная версия)** , выполните следующие действия.

   1. Укажите для нового приложения логики глобально уникальное имя, которое будет использоваться для ресурса **приложения логики (Предварительная версия)** . В этом примере используется `example-logic-app-preview`.

      ![Снимок экрана, на котором показана панель "Azure: Logic Apps (Предварительная версия)" и запрос на ввод имени нового создаваемого приложения логики.](./media/create-stateful-stateless-workflows-visual-studio-code/enter-logic-app-name.png)

   1. Выберите план размещения для нового приложения логики: [**план службы приложений**](../azure-functions/functions-scale.md#app-service-plan) или [**Premium**](../azure-functions/functions-scale.md#premium-plan). В этом примере выбирается **план службы приложений**.

      ![Снимок экрана, на котором показана панель "Azure: Logic Apps (Предварительная версия)" и запрос на выбор "план службы приложений" или "Премиум".](./media/create-stateful-stateless-workflows-visual-studio-code/select-hosting-plan.png)

   1. Создайте новый план службы приложений или выберите существующий план. В этом примере выбирается **Создание нового плана службы приложений**.

      ![Снимок экрана, на котором показана панель "Azure: Logic Apps (Предварительная версия)" и запрос на команду "создать новый план службы приложений" или выбрать существующий план службы приложений.](./media/create-stateful-stateless-workflows-visual-studio-code/create-app-service-plan.png)

   1. Укажите имя для плана службы приложений, а затем выберите [ценовую категорию](../app-service/overview-hosting-plans.md) для плана. В этом примере выбирается план **Free F1** .

      ![Снимок экрана, на котором показана панель "Azure: Logic Apps (Предварительная версия)" и запрос на выбор ценовой категории.](./media/create-stateful-stateless-workflows-visual-studio-code/select-pricing-tier.png)

   1. Для оптимальной производительности найдите и выберите ту же группу ресурсов, что и проект для развертывания.

      > [!NOTE]
      > Хотя вы можете создать или использовать другую группу ресурсов, это может повлиять на производительность. Если вы создаете или выбираете другую группу ресурсов, но Отмена после появления запроса подтверждения, развертывание также отменяется.

   1. Для рабочих процессов с отслеживанием состояния выберите **создать новую учетную запись хранения** или существующую учетную запись хранения.

      ![Снимок экрана, на котором показана панель "Azure: Logic Apps (Предварительная версия)" и запрос на создание или выбор учетной записи хранения.](./media/create-stateful-stateless-workflows-visual-studio-code/create-storage-account.png)

   1. Чтобы упростить ведение журнала диагностики и трассировку, можно выбрать существующий ресурс Application Insights. В противном случае можно выбрать **создать новый Application Insights ресурс**или настроить Application Insights в портал Azure после развертывания приложения.

      Перед развертыванием убедитесь, что объект добавлен в `logLevel` `logging` объект в **host.jsдля** файла, который существует на корневом уровне проекта, и задайте `Host.Triggers.Workflow` для значение, например `Information` :

      ```json
      "logLevel": {
         "Host.Triggers.Workflow": "Information"
      },
      ```

      Вот как **host.js** может выглядеть файл:

      ```json
      {
         "version": "2.0",
         "logging": {
            "applicationInsights": {
               "samplingExcludedTypes": "Request",
               "samplingSettings": {
                  "isEnabled": true
               }
            },
            "logLevel": {
               "Host.Triggers.Workflow": "Information"
            }
         }
      }
      ``` 

   Когда все будет готово, Visual Studio Code начнет создавать и развертывать ресурсы, необходимые для публикации приложения логики.

1. Чтобы просмотреть и отслеживать процесс развертывания, в меню **вид** выберите пункт **выходные данные**. В списке Панель инструментов окна вывода выберите **Azure Logic Apps**.

   ![Снимок экрана, на котором отображается окно вывода с параметром "Azure Logic Apps", выбранным в списке панелей инструментов вместе с ходом выполнения и состояниями развертывания.](./media/create-stateful-stateless-workflows-visual-studio-code/logic-app-deployment-output-window.png)

   Когда Visual Studio Code завершит развертывание рабочего процесса приложения логики в Azure, появится следующее сообщение:

   ![Снимок экрана, на котором показано сообщение о том, что развертывание в Azure успешно завершено.](./media/create-stateful-stateless-workflows-visual-studio-code/deployment-to-azure-completed.png)

   Поздравляем, приложение логики теперь активно в Azure и включено по умолчанию.

Далее можно узнать, как выполнять следующие задачи:

* [Найдите развернутое приложение логики в портал Azure](#find-manage-deployed-workflows-portal) или [в Visual Studio Code](#find-manage-deployed-workflows-vs-code).

* [Включите журнал выполнения рабочих процессов приложения логики без отслеживания состояния](#run-history).

* [Включение мониторинга в развернутом ресурсе **приложения логики (Предварительная версия)** ](#enable-monitoring).

<a name="find-manage-deployed-workflows-vs-code"></a>

## <a name="find-and-manage-deployed-logic-apps-in-visual-studio-code"></a>Поиск развернутых приложений логики и управление ими в Visual Studio Code

В Visual Studio Code можно просмотреть все развернутые приложения логики в подписке Azure, будь то исходный **Logic Apps** или тип ресурса **приложения логики (Предварительная версия)** , а также выбрать задачи, которые помогут управлять этими приложениями логики. Однако для доступа к обоим типам ресурсов требуются расширения **Azure Logic Apps** и **Azure Logic Apps (Предварительная версия)** для Visual Studio Code.

1. На панели инструментов слева щелкните значок Azure. В области **Azure: Logic Apps (Предварительная версия)** разверните подписку, в которой отображаются все развернутые приложения логики для этой подписки.

1. Найдите и выберите приложение логики, которым требуется управлять. Откройте контекстное меню приложения логики и выберите задачу, которую требуется выполнить.

   Например, можно выбрать такие задачи, как остановка, запуск, перезапуск или удаление развернутого приложения логики.

   ![Снимок экрана, на котором показано Visual Studio Code с открытой областью расширения "Azure Logic Apps (Предварительная версия)" и развернутым рабочим процессом.](./media/create-stateful-stateless-workflows-visual-studio-code/find-deployed-workflow-visual-studio-code.png)

1. Чтобы просмотреть все рабочие процессы в приложении логики, разверните приложение логики, а затем узел **рабочие процессы** .

1. Чтобы просмотреть конкретный рабочий процесс, откройте контекстное меню рабочего процесса и выберите **Открыть в конструкторе**, чтобы открыть рабочий процесс в режиме только для чтения.

   Чтобы изменить рабочий процесс, можно использовать следующие параметры:

   * В Visual Studio Code откройте файл **workflow.js** проекта в конструкторе приложений логики, внесите изменения и повторно разверните приложение логики в Azure.

   * В портал Azure [найдите и откройте приложение логики](#find-manage-deployed-workflows-portal). Найдите, измените и сохраните рабочий процесс.

1. Чтобы открыть развернутое приложение логики в портал Azure, откройте контекстное меню приложения логики и выберите **Открыть на портале**.

   Портал Azure откроется в браузере, автоматически войдет на портал, если вы вошли в Visual Studio Code, и отобразите приложение логики.

   ![Снимок экрана, на котором показана портал Azure страница приложения логики в Visual Studio Code.](./media/create-stateful-stateless-workflows-visual-studio-code/deployed-workflow-azure-portal.png)

   Вы также можете войти отдельно в портал Azure, использовать поле поиска на портале, чтобы найти приложение логики, а затем выбрать приложение логики из списка результатов.

   ![Снимок экрана, на котором показаны портал Azure и панель поиска с результатами поиска для развернутого приложения логики, которое отображается в выбранном виде.](./media/create-stateful-stateless-workflows-visual-studio-code/find-deployed-workflow-azure-portal.png)

<a name="find-manage-deployed-workflows-portal"></a>

## <a name="find-and-manage-deployed-logic-apps-in-the-portal"></a>Поиск развернутых приложений логики и управление ими на портале

В портал Azure можно просмотреть все развернутые приложения логики, которые находятся в вашей подписке Azure, независимо от того, являются ли они исходным типом ресурса **Logic Apps** или типом ресурсов **приложения логики (Предварительная версия)** . В настоящее время каждый тип ресурса организован и управляется как отдельные категории в Azure.

> [!NOTE]
> В общедоступной предварительной версии вы можете просматривать только развернутые ресурсы **приложения логики (Предварительная версия)** в портал Azure, а не создавать новые ресурсы **приложения логики (Предварительная версия)** . Эти приложения логики можно создавать только в Visual Studio Code. Однако можно [Добавить рабочие процессы](#add-workflows) в развернутые приложения логики с этим типом ресурса.

Чтобы найти приложения логики с типом ресурсов **приложение логики (Предварительная версия)** , выполните следующие действия.

1. В поле поиска портал Azure введите `logic app preview` . Когда появится список результатов, в разделе **службы**выберите **приложение логики (Предварительная версия)**.

   ![Снимок экрана, на котором показано поле поиска портал Azure с текстом для поиска "Предварительная версия приложения логики".](./media/create-stateful-stateless-workflows-visual-studio-code/portal-find-logic-app-preview-resource.png)

1. В области **приложение логики (Предварительная версия)** найдите и выберите приложение логики, развернутое из Visual Studio Code.

   ![Снимок экрана, на котором показаны портал Azure и ресурсы приложения логики (Предварительная версия), развернутые в Azure.](./media/create-stateful-stateless-workflows-visual-studio-code/logic-app-preview-resources-pane.png)

   Портал Azure открывает страницу отдельных ресурсов для выбранного приложения логики.

   ![Снимок экрана, показывающий страницу ресурсов рабочего процесса приложения логики в портал Azure.](./media/create-stateful-stateless-workflows-visual-studio-code/deployed-workflow-azure-portal.png)

1. Чтобы просмотреть рабочие процессы в этом приложении логики, в меню приложения логики выберите **рабочие процессы**.

   На панели **рабочие процессы** отображаются все рабочие процессы в текущем приложении логики. В этом примере показан рабочий процесс, созданный в Visual Studio Code.

   ![Снимок экрана, на котором показана страница ресурсов "приложение логики (Предварительная версия)" с открытой панелью "рабочие процессы" и развернутый рабочий процесс](./media/create-stateful-stateless-workflows-visual-studio-code/deployed-logic-app-workflows-pane.png)

1. Чтобы просмотреть рабочий процесс, в области **рабочие процессы** выберите этот рабочий процесс.

   Откроется панель Рабочий процесс с дополнительными сведениями и задачами, которые можно выполнить в этом рабочем процессе.

   Например, чтобы просмотреть шаги в рабочем процессе, выберите **конструктор**.

   ![Снимок экрана, на котором показана панель "Обзор" выбранного рабочего процесса, а в меню "Рабочий процесс" отображается выбранная команда "Конструктор".](./media/create-stateful-stateless-workflows-visual-studio-code/workflow-overview-pane-select-designer.png)

   Откроется конструктор приложений логики, в котором будет показан рабочий процесс, созданный в Visual Studio Code. Теперь вы можете вносить изменения в этот рабочий процесс в портал Azure.

   ![Снимок экрана, показывающий конструктор приложений логики и рабочий процесс, развернутые из Visual Studio Code.](./media/create-stateful-stateless-workflows-visual-studio-code/opened-workflow-designer.png)

<a name="add-workflows"></a>

## <a name="add-a-workflow-to-deployed-logic-apps"></a>Добавление рабочего процесса в развернутые приложения логики

С помощью портал Azure можно добавить пустые рабочие процессы в ресурс **приложения логики (Предварительная версия)** , развернутый из Visual Studio Code и построить эти рабочие процессы в портал Azure.

1. В [портал Azure](https://portal.azure.com)найдите и выберите развернутый ресурс **приложения логики (Предварительная версия)** .

1. В меню приложения логики выберите **рабочие процессы**. В области **рабочие процессы** выберите **Добавить**.

   ![Снимок экрана, на котором показана панель "рабочие процессы" выбранного приложения логики и панель инструментов с выбранной командой "Добавить".](./media/create-stateful-stateless-workflows-visual-studio-code/add-new-workflow.png)

1. В области **создать рабочий процесс** укажите имя рабочего процесса. Выберите создание с **отслеживанием** или без **отслеживания состояния** **>** **Create**.

   После того, как Azure развернет новый рабочий процесс, который появится на панели " **рабочие процессы** ", выберите этот рабочий процесс для выполнения управления и других задач, например для открытия конструктора приложений логики или представления кода.

   ![Снимок экрана, на котором показан выбранный рабочий процесс с параметрами управления и проверки.](./media/create-stateful-stateless-workflows-visual-studio-code/view-new-workflow.png)

   Например, при открытии конструктора для нового рабочего процесса отображается пустой холст. Теперь этот рабочий процесс можно создать в портал Azure.

   ![Снимок экрана, показывающий конструктор приложений логики и пустой рабочий процесс.](./media/create-stateful-stateless-workflows-visual-studio-code/opened-blank-workflow-designer.png)

<a name="run-history"></a>

## <a name="run-history-for-stateless-logic-app-workflows"></a>Журнал выполнения рабочих процессов приложения логики без отслеживания состояния

Чтобы упростить отладку рабочего процесса приложения логики без отслеживания состояния, можно включить журнал выполнения для этого рабочего процесса либо в Visual Studio Code, либо в портал Azure, а затем отключить журнал выполнения по завершении.

### <a name="for-a-stateless-logic-app-workflow-in-visual-studio-code"></a>Для рабочего процесса приложения логики без отслеживания состояния в Visual Studio Code

Если вы работаете и запускаете рабочий процесс приложения логики без отслеживания состояния локально в Visual Studio Code, выполните следующие действия.

1. В проекте найдите и разверните папку **Workflow-DesignTime** . Найдите и откройте **local.settings.jsв** файле.

1. Добавьте `Workflows.{yourWorkflowName}.operationOptions` свойство и задайте для него значение `WithStatelessRunHistory` , например:

   ```json
   {
      "IsEncrypted": false,
      "Values": {
         "AzureWebJobsStorage": "UseDevelopmentStorage=true",
         "FUNCTIONS_WORKER_RUNTIME": "dotnet",
         "Workflows.{yourWorkflowName}.OperationOptions": "WithStatelessRunHistory"
      }
   }
   ```

1. Чтобы отключить журнал выполнения по завершении, удалите `Workflows.{yourWorkflowName}.OperationOptions` свойство и его значение либо задайте для свойства `None` .

### <a name="for-a-stateless-logic-app-workflow-in-the-azure-portal"></a>Для рабочего процесса приложения логики без отслеживания состояния в портал Azure

Если вы уже развернули проект на портал Azure, выполните следующие действия.

1. В [портал Azure](https://portal.azure.com)найдите и откройте ресурс **приложения логики (Предварительная версия)** .

1. В меню приложения логики в разделе **Параметры**выберите **Конфигурация**.

1. На вкладке **Параметры приложения** выберите **создать параметр приложения**.

1. В области **Добавление/изменение параметров приложения** в поле **имя** введите имя параметра операции: 

   `Workflows.{yourWorkflowName}.OperationOptions`

1. В поле **значение** введите следующее значение: `WithStatelessRunHistory`

   Пример:

   ![Снимок экрана, показывающий ресурс портал Azure и приложения логики (Предварительная версия) с параметром "Конфигурация" > "создать параметры приложения" < "Открыть/изменить параметр приложения" и "рабочие процессы". {Йоурворкфловнаме}. Оператионоптионс "для параметра задано значение" Висстателессрунхистори ".](./media/create-stateful-stateless-workflows-visual-studio-code/stateless-operation-options-run-history.png)

1. Закончив, нажмите кнопку **OK**. В области **Конфигурация** выберите **сохранить**.

Чтобы включить мониторинг в развернутом ресурсе приложения логики (Предварительная версия), перейдите к следующему разделу.

<a name="enable-monitoring"></a>

## <a name="enable-monitoring-for-deployed-logic-app-preview-resources"></a>Включение мониторинга для развернутых ресурсов приложения логики (Предварительная версия)

Чтобы включить мониторинг в развернутом ресурсе **приложения логики (Предварительная версия)** , выполните следующие действия.

1. В [портал Azure](https://portal.azure.com)найдите и выберите развернутый ресурс **приложения логики (Предварительная версия)** .

1. В меню этого ресурса в разделе **API**выберите **CORS**.

1. В области **CORS** в разделе **Разрешенные источники**добавьте символ-шаблон (*).

1. Когда все будет готово, на панели инструментов **CORS** нажмите кнопку **сохранить**.

   ![Снимок экрана, на котором показано портал Azure с развернутым ресурсом Logic Apps (Предварительная версия). В меню ресурсов будет выбрано "CORS" с новой записью для "разрешенные источники" в качестве символа подстановочного знака "*".](./media/create-stateful-stateless-workflows-visual-studio-code/enable-run-history-deployed-logic-app.png)

<a name="deploy-docker"></a>

## <a name="deploy-to-docker-container"></a>Развертывание в контейнере DOCKER

С помощью [средства интерфейса командной строки (CLI) .NET Core](/dotnet/core/tools/)можно выполнить сборку проекта, а затем опубликовать сборку. Затем можно создать и использовать [контейнер DOCKER](/visualstudio/docker/tutorials/docker-tutorial#what-is-a-container) в качестве места назначения для развертывания рабочего процесса приложения логики. Дополнительные сведения см. в следующих разделах:

* [Общие сведения о контейнерах и Docker](/dotnet/architecture/microservices/container-docker-introduction/)
* [Общие сведения о .NET и Docker](/dotnet/core/docker/introduction)
* [Терминология Docker](/dotnet/architecture/microservices/container-docker-introduction/docker-terminology)
* [Учебник. Начало работы с Docker](/visualstudio/docker/tutorials/docker-tutorial)

1. Чтобы выполнить сборку проекта, откройте командную строку и выполните следующую команду:

   `dotnet build -c release`

   Дополнительные сведения см. на странице справки по [сборке DotNet](/dotnet/core/tools/dotnet-build/) .

1. Опубликуйте сборку, выполнив следующую команду:

   `dotnet publish -c release`

   Дополнительные сведения см. на странице справочника по [DotNet Publish](/dotnet/core/tools/dotnet-publish/) .

1. Создайте контейнер DOCKER, используя файл DOCKER для рабочего процесса .NET и выполнив следующую команду:

   `docker build --tag local/workflowcontainer .`

   Например, ниже приведен пример файла DOCKER, который развертывает приложение логики с отслеживанием состояния и указывает строку подключения для учетной записи хранения Azure, которая использовалась для публикации приложения логики в портал Azure. Чтобы найти и скопировать строку подключения учетной записи хранения в портал Azure, ознакомьтесь с разделом [Управление ключами учетной записи хранения](../storage/common/storage-account-keys-manage.md?tabs=azure-portal#view-account-access-keys).

   ![Снимок экрана, на котором показано портал Azure с ключами доступа к учетной записи хранения и скопированной строкой подключения.](./media/create-stateful-stateless-workflows-visual-studio-code/find-storage-account-connection-string.png)

   Строка подключения похожа на следующий образец:

   `DefaultEndpointsProtocol=https;AccountName=fabrikamstorageaccount;AccountKey={access-key};EndpointSuffix=core.windows.net`

   Вот формат файла docker:


   ```text
   FROM mcr.microsoft.com/azure-functions/dotnet:3.0.14492-appservice

   ENV AzureWebJobsStorage <storage-account-connection-string>
   ENV AZURE_FUNCTIONS_ENVIRONMENT Development
   ENV AzureWebJobsScriptRoot=/home/site/wwwroot
   ENV AzureFunctionsJobHost__Logging__Console__IsEnabled=true
   ENV FUNCTIONS_V2_COMPATIBILITY_MODE=true

   COPY ./bin/Release/netcoreapp3.1/publish/ /home/site/wwwroot
   ```

   Дополнительные сведения см. в статье о [сборке DOCKER](https://docs.docker.com/engine/reference/commandline/build/).

1. Сохраните строку в безопасном месте, чтобы позднее можно было добавить строку в **local.settings.js** файлов проекта, используемых для создания приложения логики в Visual Studio Code.

1. Запустите контейнер локально с помощью следующей команды:

   `docker run -e WEBSITE_HOSTNAME=localhost -p 8080:80 local/workflowcontainer`

   Дополнительные сведения см. в разделе [выполнение DOCKER](https://docs.docker.com/engine/reference/commandline/run/).

1. Чтобы получить URL-адрес обратного вызова для триггера запроса, отправьте этот запрос:

   `POST /runtime/webhooks/workflow/api/management/workflows/{workflow-name}/triggers/{trigger-name}/listCallbackUrl?api-version=2019-10-01-edge-preview&code={master-key}`

   Значение <*главного ключа*> определено в учетной записи хранения Azure, заданной для `AzureWebJobsStorage` в файле, **Azure-веб-заданиях (секреты)/{Deployment-Name}/host.json**, где можно найти значение в этом разделе:

   ```json
   {
     <...>
     "masterKey": {
        "name": "master",
        "value": "<master-key>",
        "encrypted": false
     },
     <...>
   }
   ```

<a name="nested-behavior"></a>

## <a name="nested-behavior-differences-between-stateful-and-stateless-logic-apps"></a>Различия в вложенном поведении между приложениями логики без отслеживания состояния или без отслеживания состояния

Вы можете [сделать рабочий процесс приложения логики доступным](../logic-apps/logic-apps-http-endpoint.md) из других рабочих процессов приложения логики с помощью триггера [запроса](../connectors/connectors-native-reqres.md) , триггера [веб-перехватчика HTTP](../connectors/connectors-native-webhook.md) или управляемых соединителей, которые имеют [тип апиконнектионвехук](../logic-apps/logic-apps-workflow-actions-triggers.md#apiconnectionwebhook-trigger) и могут принимать HTTPS-запросы.

Ниже приведены шаблоны поведения, которые могут выполнять вложенные рабочие процессы приложения логики после того, как родительский рабочий процесс вызывает дочерний рабочий процесс:

* Шаблон асинхронного опроса

  Родительский элемент не ждет ответа на его первоначальный вызов, но постоянно проверяет журнал выполнения дочернего приложения до тех пор, пока не завершится выполнение дочернего элемента. По умолчанию рабочие процессы с отслеживанием состояния следуют этому шаблону, который идеально подходит для долго выполняющихся дочерних рабочих процессов, которые могут превысить [пределы времени ожидания запроса](../logic-apps/logic-apps-limits-and-config.md).

* Синхронный шаблон ("пожар и забыть")

  Дочерний элемент подтверждает вызов, немедленно возвращая `202 ACCEPTED` ответ, и родитель переходит к следующему действию, не дожидаясь получения результатов от дочернего объекта. Вместо этого родительский объект получает результаты после завершения выполнения дочернего элемента. Дочерние рабочие процессы с отслеживанием состояния, которые не включают действие ответа, всегда следуют за синхронным шаблоном. Для дочерних рабочих процессов с отслеживанием состояния журнал выполнения доступен для просмотра.

  Чтобы включить это поведение, в определении JSON рабочего процесса задайте `OperationOptions` для свойства значение `DisableAsyncPattern` . Дополнительные сведения см. в разделе [типы триггеров и действий — параметры операции](../logic-apps/logic-apps-workflow-actions-triggers.md#operation-options).

* Триггер и ожидание

  Для дочернего рабочего процесса без отслеживания состояния родительский объект ожидает ответа, возвращающего результаты из дочернего элемента. Этот шаблон работает подобно использованию встроенного [триггера HTTP или действия](../connectors/connectors-native-http.md) для вызова дочернего рабочего процесса. Дочерние рабочие процессы без отслеживания состояния, которые не включают ответное действие, немедленно возвращают `202 ACCEPTED` ответ, но родительский элемент ожидает завершения работы дочернего элемента перед переходом к следующему действию. Эти поведения применяются только к дочерним рабочим процессам без отслеживания состояния.

В этой таблице указывается поведение дочернего рабочего процесса в зависимости от того, являются ли родительские и дочерние типы, без отслеживания состояния или смешанными типами рабочих процессов:

| Родительский рабочий процесс | Дочерний рабочий процесс | Поведение дочернего элемента |
|-----------------|----------------|----------------|
| С отслеживанием состояния | С отслеживанием состояния | Асинхронный или синхронный с `"operationOptions": "DisableAsyncPattern"` параметром |
| С отслеживанием состояния | Без отслеживания состояния | Триггер и ожидание |
| Без отслеживания состояния | С отслеживанием состояния | Синхронная |
| Без отслеживания состояния | Без отслеживания состояния | Триггер и ожидание |
||||

## <a name="limits"></a>Ограничения

Несмотря на то что многие [существующие ограничения для Azure Logic Apps](../logic-apps/logic-apps-limits-and-config.md) одинаковы для этого типа ресурсов, ниже приведены различия в этом общедоступном расширении.

* Управляемые соединители: 50 запросов в минуту на каждое подключение

* Для действия [встроенного кода для действия JavaScript](../logic-apps/logic-apps-add-run-inline-code.md) эти ограничения изменились:

  * Ограничение на количество символов в коде увеличивается с 1 024 символов до 100 000 символов.

  * Ограничение на время выполнения кода увеличивается с 5 секунд до 15 секунд.

<a name="unsupported"></a>

## <a name="unavailable-or-unsupported-capabilities"></a>Недоступные или неподдерживаемые возможности

Для этой общедоступной предварительной версии эти возможности недоступны или не поддерживаются.

* Создание нового ресурса **приложения логики (Предварительная версия)** сейчас недоступно в macOS.

* В этой предварительной версии не поддерживаются пользовательские соединители, триггеры на основе веб-перехватчиков и триггер скользящего окна. Для рабочих процессов приложений логики без отслеживания состояния можно добавлять только действия для [управляемых соединителей](../connectors/apis-list.md#managed-api-connectors), а не для триггеров. Чтобы запустить рабочий процесс, используйте [встроенный запрос, концентраторы событий или триггер служебной шины](../connectors/apis-list.md#built-ins).

* Новый тип ресурсов **приложения логики (Предварительная версия)** можно развернуть только в [плане размещения службы "Премиум" или "служба приложений" в Azure](#publish-azure) или [контейнере DOCKER](#deploy-docker), а не в [средах службы интеграции (исес)](../logic-apps/connect-virtual-network-vnet-isolated-environment-overview.md). Планы размещения **потребления** не поддерживаются и не доступны для развертывания этого типа ресурсов.

* В портал Azure нельзя создавать новые приложения логики с типом ресурсов " **приложение логики (Предварительная версия)** ". Эти приложения логики можно создавать только в Visual Studio Code. Однако после развертывания приложений логики с этим типом ресурса из Visual Studio Code в Azure можно [Добавить новые рабочие процессы в эти приложения логики](#add-workflows).

## <a name="next-steps"></a>Дальнейшие действия

Мы хотели бы узнать о ваших впечатлениях от вашего опыта работы с этим расширением общедоступной предварительной версии!

* При возникновении ошибок или проблем [Создайте свои проблемы в GitHub](https://github.com/Azure/logicapps/issues).
* Для вопросов, запросов, комментариев и других отзывов [Используйте эту форму обратной связи](https://aka.ms/lafeedback).
