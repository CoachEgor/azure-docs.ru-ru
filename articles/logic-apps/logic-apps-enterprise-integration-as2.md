---
title: Сообщения AS2 для интеграции с предприятием B2B — Azure Logic Apps
description: Обмен сообщениями AS2 в Azure Logic Apps с помощью пакета интеграции Enterprise
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: divyaswarnkar
ms.author: divswa
ms.reviewer: jonfan, estfan, LADocs
ms.topic: article
ms.date: 04/22/2019
ms.openlocfilehash: b494f6524e5105a95bc8a24a6fa2521abcca3f7b
ms.sourcegitcommit: 37343b814fe3c95f8c10defac7b876759d6752c3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2019
ms.locfileid: "63760176"
---
# <a name="exchange-as2-messages-for-b2b-enterprise-integration-in-azure-logic-apps-with-enterprise-integration-pack"></a>Обмен сообщениями AS2 для интеграции с предприятием B2B в Azure Logic Apps с помощью Пакета интеграции Enterprise

Для работы с сообщениями AS2 в Azure Logic Apps, можно использовать соединитель AS2, который предоставляет триггеры и действия для управления обмена данными AS2. Например чтобы обеспечить безопасность и надежность при передаче сообщений, эти действия можно использовать:

* [**Кодирование в сообщение AS2** действие](#encode) для предоставления шифрования, цифровые подписи и подтверждение через уведомления о состоянии сообщения (MDN), которые помогают отрицание. Например это действие применяется заголовки AS2 и HTTP и выполняет эти задачи при настройке:

  * Подписывание исходящих сообщений.
  * Кодирование исходящих сообщений.
  * Сжатие сообщения.
  * Передает имя файла в заголовке MIME.

* [**Декодирование сообщения AS2** действие](#decode) за предоставление расшифровку, цифровые подписи и подтверждение через уведомления о состоянии сообщения (MDN). Например это действие выполняет следующие задачи: 

  * Обрабатывает заголовки AS2 и HTTP.
  * Согласовывает уведомления о состоянии сообщения, полученного с помощью исходных исходящих сообщений.
  * Обновляет и сопоставляет записи в неотказуемой базе данных.
  * Сохраняет записи отчетов о состоянии AS2.
  * Содержимое полезных выходных данных в кодировке base 64.
  * Определяет, требуется ли MDN. На AS2 основе соглашения, определяет ли уведомления о состоянии сообщения должны быть синхронными или асинхронными.
  * Создает синхронных и асинхронных MDN, на основе соглашения AS2.
  * Задает маркеры корреляции и свойства для уведомления о состоянии сообщения.

  Это действие также выполняет следующие задачи, при настройке.

  * Проверяет подпись.
  * Расшифровывает сообщения.
  * Распаковывает сообщения. 
  * Проверьте и запретить дублирование Идентификаторов сообщений.

В этой статье показано, как добавить кодирование AS2 и декодирования действия в существующее приложение логики.

## <a name="prerequisites"></a>Технические условия

* Подписка Azure. Если у вас еще нет подписки Azure, [получите бесплатную учетную запись Azure](https://azure.microsoft.com/free/).

* Приложение логики, из которой вы хотите использовать соединитель AS2 и триггер, который запускает рабочий процесс приложения логики. Соединитель AS2 предоставляет только действия, не триггеры. Если вы не знакомы с приложениями логики, ознакомьтесь со статьями [Что такое Azure Logic Apps](../logic-apps/logic-apps-overview.md) и [Краткое руководство. Создание первого автоматизированного рабочего процесса с помощью Azure Logic Apps на портале Azure](../logic-apps/quickstart-create-first-logic-app-workflow.md).

* [Учетной записи интеграции](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md) , связанный с вашей подпиской Azure и связанной с приложением логики, где планируется использовать соединитель AS2. Оба логики приложения и интеграции учетной записи должен существовать в том же расположении или регионе Azure.

* По крайней мере два [торговым партнерам](../logic-apps/logic-apps-enterprise-integration-partners.md) что вы уже определили в учетной записи интеграции с помощью квалификатора удостоверение AS2.

* Прежде чем использовать соединитель AS2, необходимо создать AS2 [соглашения](../logic-apps/logic-apps-enterprise-integration-agreements.md) между торговыми партнерами и хранилищем этого соглашения в учетной записи интеграции.

* При использовании [Azure Key Vault](../key-vault/key-vault-overview.md) по управлению сертификатами, проверьте, что хранилище ключей разрешает **Encrypt** и **расшифровки** операций. В противном случае сбой кодирования и декодирования действия.

  На портале Azure перейдите к хранилищу ключей, просматривать ключ хранилища **разрешенные операции**и убедитесь, что **Encrypt** и **расшифровки** выбраны операции.

  ![Проверьте основные операции с хранилищем](media/logic-apps-enterprise-integration-as2/vault-key-permitted-operations.png)

<a name="encode"></a>

## <a name="encode-as2-messages"></a>Кодирование сообщений AS2

1. Если у вас ее еще в [портала Azure](https://portal.azure.com), откройте приложение логики в конструкторе приложений логики.

1. В конструкторе добавьте новое действие приложения логики. 

1. В разделе **выбрать действие** и поиска, выберите **все**. В поле поиска введите «кодирования as2» и выберите действие: **Кодирование в сообщение AS2**.

   ![Выберите «Encode AS2 сообщение»](./media/logic-apps-enterprise-integration-as2/select-as2-encode.png)

1. Если у вас нет существующего подключения в учетную запись интеграции, будет предложено создать сейчас. Укажите имя подключения, выберите учетную запись интеграции, который вы хотите подключиться и выбрать **создать**.

   ![Создание подключения к учетной записи интеграции](./media/logic-apps-enterprise-integration-as2/as2-create-connection.png)  
 
1. Теперь содержат сведения для следующих свойств:

   | Свойство | ОПИСАНИЕ |
   |----------|-------------|
   | **AS2-от** | Идентификатор отправителя сообщения, как указано в соглашении AS2 |
   | **AS2-к** | Идентификатор для получателя сообщения, как указано в соглашении AS2 |
   | **body** | Полезные данные сообщения |
   |||

   Например: 

   ![Свойства кодирования сообщений](./media/logic-apps-enterprise-integration-as2/as2-message-encoding-details.png)

<a name="decode"></a>

## <a name="decode-as2-messages"></a>Декодирование сообщений AS2

1. Если у вас ее еще в [портала Azure](https://portal.azure.com), откройте приложение логики в конструкторе приложений логики.

1. В конструкторе добавьте новое действие приложения логики. 

1. В разделе **выбрать действие** и поиска, выберите **все**. В поле поиска введите «декодирования as2» и выберите действие: **Декодирование сообщения AS2**

   ![Выберите «Decode AS2 message»](media/logic-apps-enterprise-integration-as2/select-as2-decode.png)

1. Если у вас нет существующего подключения в учетную запись интеграции, будет предложено создать сейчас. Укажите имя подключения, выберите учетную запись интеграции, который вы хотите подключиться и выбрать **создать**.

   ![Создание подключения к учетной записи интеграции](./media/logic-apps-enterprise-integration-as2/as2-create-connection.png)  

1. Для **текст** и **заголовки**, выберите эти значения из предыдущих выходных данных триггера или действия.

   Например предположим, что приложение логики получает сообщения через триггер запроса. Можно выбрать выходные данные из этого триггера.

   ![Выберите текст и заголовки из выходных данных запроса](media/logic-apps-enterprise-integration-as2/as2-message-decoding-details.png) 

## <a name="sample"></a>Образец

Чтобы попробовать развернуть полностью рабочее приложение логики и пример сценария AS2, см. [шаблон и сценарий приложения логики AS2](https://azure.microsoft.com/documentation/templates/201-logic-app-as2-send-receive/).

## <a name="connector-reference"></a>Справочник по соединителям

Технические сведения, такие как триггеры, действия и ограничения, как определено соединителя OpenAPI (прежнее название — Swagger) файл, см. в разделе [соединителя справочной странице](/connectors/as2/).

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о [пакета интеграции Enterprise](logic-apps-enterprise-integration-overview.md)
