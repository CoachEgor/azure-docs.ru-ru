---
title: Справочник по схеме для языка определения рабочих процессов — Azure Logic Apps
description: Справочное руководство по схеме языка определения рабочих процессов в Azure Logic Apps
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: klam, LADocs
ms.topic: reference
ms.date: 05/13/2019
ms.openlocfilehash: 3b0ad33ea6348f24079b3c88f972437244c0bc93
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "65596763"
---
# <a name="schema-reference-for-workflow-definition-language-in-azure-logic-apps"></a>Сведения о схеме языка определения рабочих процессов в Azure Logic Apps

При создании приложения логики в [Azure Logic Apps](../logic-apps/logic-apps-overview.md), приложение логики имеет базовое определение рабочего процесса, описывающий фактическую логику, которая выполняется в приложении логики. Определения рабочего процесса использует [JSON](https://www.json.org/) и имеет структуру, в который проверяется схемой языка определения рабочих процессов. Этот справочник содержит общие сведения о структуре и каким образом схема определяет атрибуты в определении рабочего процесса.

## <a name="workflow-definition-structure"></a>Структура определения рабочего процесса

Определение рабочего процесса всегда содержит триггер для создания экземпляра приложения логики, а также одно или несколько действий, выполняемых после срабатывания триггера.

Ниже приведена высокоуровневая структура определения рабочего процесса.

```json
"definition": {
  "$schema": "<workflow-definition-language-schema-version>",
  "actions": { "<workflow-action-definitions>" },
  "contentVersion": "<workflow-definition-version-number>",
  "outputs": { "<workflow-output-definitions>" },
  "parameters": { "<workflow-parameter-definitions>" },
  "staticResults": { "<static-results-definitions>" },
  "triggers": { "<workflow-trigger-definitions>" }
}
```

| Атрибут | Обязательно для заполнения | Описание |
|-----------|----------|-------------|
| `definition` | Да | Начальный элемент определения рабочего процесса. |
| `$schema` | Только в случае использования внешней ссылки на определение рабочего процесса | Расположение файла схемы JSON, который описывает версию языка определения рабочих процессов: <p>`https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json`</p> |
| `actions` | Нет | Определения для одного или нескольких действий, выполняемых во время выполнения рабочего процесса. Дополнительные сведения см. в разделе [триггеры и действия](#triggers-actions). <p><p>Максимальное количество действий: 250 |
| `contentVersion` | Нет | Номер версии для вашего определения рабочего процесса (по умолчанию — 1.0.0.0). Чтобы помочь определить и подтвердить правильное определение при развертывании рабочего процесса, укажите значение для использования. |
| `outputs` | Нет | Определения для выходных данных, которые возвращают из выполнения рабочего процесса. Дополнительные сведения см. в разделе [выходные данные](#outputs). <p><p>Максимальное количество типов выходных данных: 10 |
| `parameters` | Нет | Определения для одного или нескольких параметров, которые передают данные в ваш рабочий процесс. Дополнительные сведения см. в разделе [параметры](#parameters). <p><p>Максимальное количество параметров: 50 |
| `staticResults` | Нет | Определения один или несколько статических результаты, возвращаемые действия как макетов выходные данные при включении статический результаты на эти действия. В определении каждого действия `runtimeConfiguration.staticResult.name` атрибут ссылается на соответствующее определение внутри `staticResults`. Дополнительные сведения см. в разделе [статический результаты](#static-results). |
| `triggers` | Нет | Определения для одного или нескольких триггеров, которые создают рабочий процесс Вы можете определить более одного триггера, но только, используя язык определения рабочих процессов, а не визуально через конструктор логических приложений. Дополнительные сведения см. в разделе [триггеры и действия](#triggers-actions). <p><p>Максимальное количество триггеров: 10 |
||||

<a name="triggers-actions"></a>

## <a name="triggers-and-actions"></a>Триггеры и действия

В определении рабочего процесса разделы `triggers` и `actions` определяют вызовы, которые происходят во время выполнения рабочего процесса. Синтаксис и дополнительные сведения об этих разделах см. в статье [Triggers and actions for workflow definitions in Azure Logic Apps](../logic-apps/logic-apps-workflow-actions-triggers.md) (Триггеры и действия для определений рабочих процессов в Azure Logic Apps).

<a name="outputs"></a>

## <a name="outputs"></a>outputs

В разделе `outputs` определите данные, которые ваш рабочий процесс может вернуть при завершении работы. Например, чтобы отслеживать определенное состояние или значение из каждого выполнения, укажите, что в возвращенных выходных данных рабочего процесса должны содержаться такие данные.

> [!NOTE]
> При ответе на входящие запросы из REST API службы не используйте `outputs`. Вместо этого используйте тип действия `Response`. Дополнительные сведения см. в статье [Triggers and actions for workflow definitions in Azure Logic Apps](../logic-apps/logic-apps-workflow-actions-triggers.md) (Триггеры и действия для определений рабочих процессов в Azure Logic Apps).

Ниже приведена общая структура определения выходных данных.

```json
"outputs": {
  "<key-name>": {
    "type": "<key-type>",
    "value": "<key-value>"
  }
}
```

| Атрибут | Обязательно для заполнения | type | Описание |
|-----------|----------|------|-------------|
| <*key-name*> | Да | String | Имя ключа для возвращаемого значения в выходных данных. |
| <*key-type*> | Да | int, float, string, securestring, bool, array, объект JSON | Тип возвращаемого значения в выходных данных. |
| <*значение ключа*> | Да | Совпадение с кодом <*тип ключа*> | Возвращаемое значение в выходных данных. |
|||||

Чтобы получить выходные данные запуска рабочего процесса, просмотрите журнал выполнения приложения логики и сведения о портале Azure или выполните [REST API рабочих процессов](https://docs.microsoft.com/rest/api/logic/workflows). Также можно передать выходные данные во внешние системы, например Power BI, для создания панели мониторинга.

<a name="parameters"></a>

## <a name="parameters"></a>Параметры

В `parameters` разделе, задать все параметры рабочего процесса, используемые определении рабочего процесса во время развертывания для приема входных данных. Во время развертывания требуется объявить параметры и их значения. Прежде чем использовать эти параметры в других разделах рабочего процесса, объявите все параметры в этих разделах. 

Ниже приведена общая структура определения параметров:

```json
"parameters": {
  "<parameter-name>": {
    "type": "<parameter-type>",
    "defaultValue": "<default-parameter-value>",
    "allowedValues": [ <array-with-permitted-parameter-values> ],
    "metadata": {
      "key": {
        "name": "<key-value>"
      }
    }
  }
},
```

| Атрибут | Обязательно для заполнения | type | Описание |
|-----------|----------|------|-------------|
| <*parameter-type*> | Да | int, float, string, securestring, bool, array, объект JSON, secureobject <p><p>**Примечание**. Для всех паролей, ключей и секретов используйте типы `securestring` и `secureobject`, потому что операция `GET` не возвращает эти типы. Дополнительные сведения о защите параметров см. в разделе [защиты приложения логики](../logic-apps/logic-apps-securing-a-logic-app.md#secure-action-parameters) | Тип параметра. |
| <*default-parameter-values*> | Да | То же, что `type` | Значение параметра по умолчанию, если значение не задано при создании экземпляра рабочего процесса. |
| <*array-with-permitted-parameter-values*> | Нет | Array | Массив со значениями, которые может принимать параметр. |
| `metadata` | Нет | Объект JSON | Любые другие сведения о параметрах, например, имя или понятное описание для приложения логики, потока или данные времени разработки, используемые Visual Studio или других средств |
||||

<a name="static-results"></a>

## <a name="static-results"></a>Статические результатов

В `staticResults` атрибут, определить макет действия `outputs` и `status` , это действие возвращает при включении параметра статического результата действия. В определении действия `runtimeConfiguration.staticResult.name` атрибут ссылается на имя определения статического результат внутри `staticResults`. Узнайте, как можно [тестирования приложений логики с помощью фиктивных данных, настроив статический результаты](../logic-apps/test-logic-apps-mock-data-static-results.md).

```json
"definition": {
   "$schema": "<...>",
   "actions": { "<...>" },
   "contentVersion": "<...>",
   "outputs": { "<...>" },
   "parameters": { "<...>" },
   "staticResults": {
      "<static-result-definition-name>": {
         "outputs": {
            <output-attributes-and-values-returned>,
            "headers": { <header-values> },
            "statusCode": "<status-code-returned>"
         },
         "status": "<action-status>"
      }
   },
   "triggers": { "<...>" }
}
```

| Атрибут | Обязательно для заполнения | type | Описание |
|-----------|----------|------|-------------|
| <*static-result-definition-name*> | Да | String | Имя для определения статического результат, определение действия можно ссылаться через `runtimeConfiguration.staticResult` объекта. Дополнительные сведения см. в разделе [Настройки конфигурации среды выполнения](../logic-apps/logic-apps-workflow-actions-triggers.md#runtime-config-options). <p>Можно использовать любое уникальное имя, которое требуется. По умолчанию это уникальное имя добавляется в число, которое увеличивается при необходимости. |
| <*output-attributes-and-values-returned*> | Да | Varies | Требования для этих атрибутов различаются в зависимости от различных условий. Например, если `status` — `Succeeded`, `outputs` атрибута включает атрибуты и значения, возвращаемые как макет выходных данных действия. Если `status` — `Failed`, `outputs` включает атрибут `errors` атрибута, который является массив, содержащий один или несколько ошибок `message` объекты, имеющие сведения об ошибке. |
| <*header-values*> | Нет | JSON | Все значения заголовка, возвращаемую действием |
| <*status-code-returned*> | Да | String | Код состояния, возвращаемый действием |
| <*action-status*> | Да | String | Состояние действия, например, `Succeeded` или `Failed` |
|||||

Например, в этом определении действия HTTP `runtimeConfiguration.staticResult.name` ссылки на атрибуты `HTTP0` внутри `staticResults` атрибут, где определены макетов выходные данные для действия. `runtimeConfiguration.staticResult.staticResultOptions` Атрибут указывает, что параметр статический результата `Enabled` на действия HTTP.

```json
"actions": {
   "HTTP": {
      "inputs": {
         "method": "GET",
         "uri": "https://www.microsoft.com"
      },
      "runAfter": {},
      "runtimeConfiguration": {
         "staticResult": {
            "name": "HTTP0",
            "staticResultOptions": "Enabled"
         }
      },
      "type": "Http"
   }
},
```

Действия HTTP возвращает выходные данные в `HTTP0` определение внутрь `staticResults`. В этом примере, для кода состояния, — макет выходных данных `OK`. Для значения заголовка, макеты выходные данные — `"Content-Type": "application/JSON"`. Состояние действия — макет выходных данных `Succeeded`.

```json
"definition": {
   "$schema": "<...>",
   "actions": { "<...>" },
   "contentVersion": "<...>",
   "outputs": { "<...>" },
   "parameters": { "<...>" },
   "staticResults": {
      "HTTP0": {
         "outputs": {
            "headers": {
               "Content-Type": "application/JSON"
            },
            "statusCode": "OK"
         },
         "status": "Succeeded"
      }
   },
   "triggers": { "<...>" }
},
```

<a name="expressions"></a>

## <a name="expressions"></a>Выражения

При работе с JSON вы можете иметь литеральные значения, которые существуют во время разработки, например:

```json
"customerName": "Sophia Owen",
"rainbowColors": ["red", "orange", "yellow", "green", "blue", "indigo", "violet"],
"rainbowColorsCount": 7
```

Вы также можете использовать значения, которые не существуют до начала времени выполнения. Чтобы представить эти значения, можно использовать *выражения*, которые вычисляются во время выполнения. Выражение представляет собой последовательность, которая может содержать одну или несколько [функций](#functions), [операторов](#operators), переменных, явных значений или констант. В определении рабочего процесса вы можете использовать выражение в любом месте в строчном значении JSON, указав его вместе с префиксом (\@). При вычислении выражения, представляющего значение JSON, тело выражения извлекается без символа \@ и всегда приводит к другому значению JSON.

Например, вы можете получить значение для ранее определенного свойства `customerName`, используя функцию [parameters()](../logic-apps/workflow-definition-language-functions-reference.md#parameters) в выражении, и присвоить это значение свойству `accountName`:

```json
"customerName": "Sophia Owen",
"accountName": "@parameters('customerName')"
```

*Интерполяция строк* также позволяет использовать несколько выражений внутри строк, которые начинаются символом \@ и заключены в фигурные скобки ({}). Ниже приведен синтаксис.

```json
@{ "<expression1>", "<expression2>" }
```

Результат всегда является строкой, что делает эту функцию аналогичной функции `concat()`, например: 

```json
"customerName": "First name: @{parameters('firstName')} Last name: @{parameters('lastName')}"
```

Если у вас есть строковый литерал, начинающийся с символа \@, добавьте перед символом \@ другой символ \@ в качестве escape-символа: \@\@.

В примерах ниже показано, как вычисляются выражения.

| Значение JSON | Результат |
|------------|--------|
| "Sophia Owen" | Возвращаются знаки: "Sophia Owen" |
| "array[1]" | Возвращаются символы: "array[1]". |
| "\@\@" | Эти символы возвращаются в виде строки с одним символом: "\@". |
| " \@" | Эти символы возвращаются в виде строки с двумя символами: " \@". |
|||

Для этих примеров предположим, что вы определяете "myBirthMonth" равным "January", а "myAge" равным числу 42:

```json
"myBirthMonth": "January",
"myAge": 42
```

В примерах ниже показано, как вычисляются выражения.

| Выражение JSON | Результат |
|-----------------|--------|
| "\@parameters('myBirthMonth')" | Возвращается строка: "January" |
| "\@{parameters('myBirthMonth')}" | Возвращается строка: "January" |
| "\@parameters('myAge')" | Возвращается число: 42 |
| "\@{parameters('myAge')}" | Возвращается число как строка: "42" |
| "My age is \@{parameters('myAge')}" | Возвращается строка: "My age is 42" |
| "\@concat('My age is ', string(parameters('myAge')))" | Возвращается строка: "My age is 42" |
| "My age is \@\@{parameters('myAge')}" | Возвращается строка, содержащая выражение: "My age is \@{parameters('myAge')}" |
|||

При работе с визуальными элементами в конструкторе Logic Apps вы можете создавать выражения с помощью построителя выражений, например:

![Конструктор Logic Apps > Построитель выражений](./media/logic-apps-workflow-definition-language/expression-builder.png)

Когда вы закончите, выражение появится для соответствующего свойства в определении рабочего процесса, например свойства `searchQuery`:

```json
"Search_tweets": {
  "inputs": {
    "host": {
      "connection": {
        "name": "@parameters('$connections')['twitter']['connectionId']"
      }
    }
  },
  "method": "get",
  "path": "/searchtweets",
  "queries": {
    "maxResults": 20,
    "searchQuery": "Azure @{concat('firstName','', 'LastName')}"
  }
},
```

<a name="operators"></a>

## <a name="operators"></a>Операторы

В [выражениях](#expressions) и [функциях](#functions) операторы выполняют определенные задачи, такие как ссылка на свойство или значение в массиве.

| Оператор | Задача |
|----------|------|
| ' | Чтобы использовать строковый литерал как входные данные или указать его в выражениях и функциях, поместите строку в одинарные кавычки, например `'<myString>'`. Не используйте двойные кавычки (""), так как они конфликтуют с форматированием JSON вокруг всего выражения. Пример: <p>**Правильно**: length('Hello'). </br>**Неправильно**: length("Hello"). <p>Когда вы передаете массивы или числа, их не нужно заключать в какие-либо символы. Пример: <p>**Правильно**: length([1, 2, 3]). </br>**Неправильно**: length("[1, 2, 3]"). |
| [] | Чтобы указать ссылку на значение в определенной позиции (индексе) в массиве, используйте квадратные скобки. Например, чтобы получить второй элемент в массиве: <p>`myArray[1]` |
| . | Для указания ссылки на свойство в объекте используйте оператор "точка". Например, чтобы получить свойство `name` объекта JSON `customer`: <p>`"@parameters('customer').name"` |
| ? | Оператор "вопросительный знак" позволяет ссылаться на отсутствующие свойства объекта без ошибок времени выполнения. Например, следующее выражение можно использовать для обработки отсутствующих выходных данных триггера: <p>`@coalesce(trigger().outputs?.body?.<someProperty>, '<property-default-value>')` |
|||

<a name="functions"></a>

## <a name="functions"></a>Функции Azure

Некоторые выражения получают значения из среды выполнения действий, которые может еще не существует при определении рабочего процесса начинается выполнение. Чтобы работать с этими значениями или ссылаться на них в выражениях, можно использовать [*функции*](../logic-apps/workflow-definition-language-functions-reference.md), предоставляемые языком определения рабочего процесса.

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения о [действиях и триггерах языка определения рабочих процессов](../logic-apps/logic-apps-workflow-actions-triggers.md).
* Дополнительные сведения, о том как программным способом создавать приложения логики и управлять ими с помощью [REST API рабочих процессов](https://docs.microsoft.com/rest/api/logic/workflows).
