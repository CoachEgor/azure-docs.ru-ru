---
title: Мониторинг состояния, представления истории и настройки оповещений
description: Устранение неполадок логических приложений путем проверки состояния выполнения, просмотра истории триггеров и включения оповещений в приложениях логики Azure
services: logic-apps
ms.suite: integration
ms.reviewer: divswa, logicappspm
ms.topic: article
ms.date: 01/30/2020
ms.openlocfilehash: 495877f1c839de2cf3583a37180054c91bd9f139
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76907777"
---
# <a name="monitor-run-status-review-trigger-history-and-set-up-alerts-for-azure-logic-apps"></a>Мониторинг состояния выполнения, просмотр истории триггеров и настройка оповещений для приложений логики Azure

После [создания и запуска приложения логики](../logic-apps/quickstart-create-first-logic-app-workflow.md)вы можете проверить состояние запуска приложения логики, [историю](#review-runs-history)выполнения, [вызвать историю](#review-trigger-history)и производительность. Чтобы получать уведомления о сбоях или других возможных проблемах, настройте [оповещения](#add-azure-alerts). Например, можно создать оповещение, которое обнаруживает "более пяти запусков в течение часа, которые завершились сбоем".

Для мониторинга событий в реальном времени и более богатой отладки навязание журналов диагностики для приложения логики с помощью [журналов Azure Monitor.](../azure-monitor/overview.md) Этот сервис Azure помогает отслеживать облачные и штатные среды, чтобы можно было легче поддерживать их доступность и производительность. Затем можно находить и просматривать события, такие как триггерные события, события запуска и события действия. Хранение этой информации в [журналах Azure Monitor](../azure-monitor/platform/data-platform-logs.md)позволяет создавать [запросы журналов,](../azure-monitor/log-query/log-query-overview.md) которые помогут вам найти и проанализировать эту информацию. Вы также можете использовать эти диагностические данные с другими службами Azure, такими как Azure Storage и Azure Event Hubs. Для получения дополнительной информации [см.](../logic-apps/monitor-logic-apps-log-analytics.md)

[!INCLUDE [azure-monitor-log-analytics-rebrand](../../includes/azure-monitor-log-analytics-rebrand.md)]

<a name="review-runs-history"></a>

## <a name="review-runs-history"></a>Просмотр журнала запусков

Каждый раз, когда триггер срабатывает для элемента или события, движок Logic Apps создает и запускает отдельный экземпляр рабочего процесса для каждого элемента или события. По умолчанию каждый экземпляр рабочего процесса выполняется параллельно, так что ни один рабочий процесс не должен ждать перед запуском. Вы можете просмотреть, что произошло во время этого запуска, включая состояние для каждого шага в рабочем процессе, а также входные данные и выводы для каждого шага.

1. На [портале Azure](https://portal.azure.com)найдите и откройте логическое приложение в Logic App Designer.

   Чтобы найти приложение логики, в главном поле `logic apps`поиска Azure, введите, а затем выберите **Логические приложения.**

   ![Найти и выбрать сервис "Logic Apps"](./media/monitor-logic-apps/find-your-logic-app.png)

   Портал Azure показывает все логические приложения, связанные с подписками Azure. Вы можете отфильтровать этот список на основе имени, подписки, группы ресурсов, местоположения и так далее.

   ![Просмотр логических приложений, связанных с подписками](./media/monitor-logic-apps/logic-apps-list-in-subscription.png)

1. Выберите приложение логики, а затем выберите **Обзор**.

   На панели обзора, под **историей бегов,** все прошлое, ток, и любое ожидание работает для вашего приложения логики появляются. Если список показывает много запусков, и вы не можете найти запись, которую вы хотите, попробуйте отфильтровать список. Если вы не нашли ожидаемые данные, попробуйте щелкнуть **Обновить** на панели инструментов.

   ![Обзор, история запусков и другая информация о логических приложениях](./media/monitor-logic-apps/overview-pane-logic-app-details-run-history.png)

   Ниже приведены возможные статусы для запуска приложения логики:

   | Состояние | Описание |
   |--------|-------------|
   | **Отменен** | Рабочий процесс был запущен, но получил запрос на отмену |
   | **Сбой при** | По крайней мере одно действие сработало, и никакие последующие действия в рабочем процессе не были настроены для обработки сбоя |
   | **Выполнение** | Рабочий процесс выполняется в данный момент. <p>Этот статус также может отображаться для задушенных рабочих процессов или в связи с текущим планом ценообразования. Чтобы узнать больше, ознакомьтесь с [ограничениям действий на странице цен](https://azure.microsoft.com/pricing/details/logic-apps/). Если вы [настроили журнал диагностики,](../logic-apps/monitor-logic-apps.md)вы можете получить информацию о любых событиях дроссельной заслонки, которые происходят. |
   | **Удалось** | Все действия выполнены успешно. <p>**Примечание:** Если в определенном действии произошел сбой, более позднее действие в рабочем процессе обрабатывает этот сбой. |
   | **Waiting** | Рабочий процесс не запущен или приостановлен, например, из-за более раннего рабочего процесса, который все еще работает. |
   |||

1. Для просмотра шагов и другой информации для определенного запуска, в соответствии **с историей запусков,** выберите этот запуск.

   ![Выберите конкретный запуск для просмотра](./media/monitor-logic-apps/select-specific-logic-app-run.png)

   Панель **запуска приложения Logic** показывает каждый шаг в выбранном запуске, статус выполнения каждого шага и время, задеваемые для выполнения каждого шага, например:

   ![Каждое действие в определенном запуске](./media/monitor-logic-apps/logic-app-run-pane.png)

   Чтобы просмотреть эту информацию в форме списка, на панели **инструментов приложения Logic запустите,** выберите **Сведения о запуске.**

   ![На панели инструментов выберите "Выполнить Подробная информацию"](./media/monitor-logic-apps/select-run-details-on-toolbar.png)

   Представление «Данные запуска» показывает каждый шаг, их статус и другую информацию.

   ![Просмотрите сведения о каждом шаге в беге](./media/monitor-logic-apps/review-logic-app-run-details.png)

   Например, вы можете получить свойство **идентификатора корреляции** запуска, которое может понадобиться при использовании [REST API для логических приложений.](https://docs.microsoft.com/rest/api/logic)

1. Чтобы получить более подробную информацию о конкретном шаге, выберите любой из вариантов:

   * В **приложении Логика запустить** панель выбрать шаг так, что форма расширяется. Теперь можно просматривать информацию, такую как входные данные, выводы и любые ошибки, которые произошли на этом этапе, например:

     ![В логическом приложении выполнить панель, представление не удалось шаг](./media/monitor-logic-apps/specific-step-inputs-outputs-errors.png)

   * В **приложении Логика выполнить детали** панели, выберите шаг, который вы хотите.

     ![В панели выполнения деталей, представление неудачного шага](./media/monitor-logic-apps/select-failed-step-in-failed-run.png)

     Теперь можно просматривать информацию, такую как входные данные и выходы для этого шага, например:

   > [!NOTE]
   > Все сведения о времени выполнения и события шифруются в службе Logic Apps. Они расшифровываются только в том случае, когда пользователь запрашивает просмотр этих данных. Можно [скрыть входные данные и выводы в истории выполнения](../logic-apps/logic-apps-securing-a-logic-app.md#obfuscate) или управлять доступом пользователей к этой информации с помощью [Azure Role-Based Control control (RBAC).](../role-based-access-control/overview.md)

<a name="review-trigger-history"></a>

## <a name="review-trigger-history"></a>Просмотр журнала триггера

Каждый запуск приложения логики начинается с триггера. История триггера перечисляет все попытки триггера, сделанные вашим логическим приложением, и информацию о входных данных и выводах для каждой попытки триггера.

1. На [портале Azure](https://portal.azure.com)найдите и откройте логическое приложение в Logic App Designer.

   Чтобы найти приложение логики, в главном поле `logic apps`поиска Azure, введите, а затем выберите **Логические приложения.**

   ![Найти и выбрать сервис "Logic Apps"](./media/monitor-logic-apps/find-your-logic-app.png)

   Портал Azure показывает все логические приложения, связанные с подписками Azure. Вы можете отфильтровать этот список на основе имени, подписки, группы ресурсов, местоположения и так далее.

   ![Просмотр логических приложений, связанных с подписками](./media/monitor-logic-apps/logic-apps-list-in-subscription.png)

1. Выберите приложение логики, а затем выберите **Обзор**.

1. В меню приложения логики выберите **Обзор**. В **разделе Резюме,** под **оценкой,** выберите **См.**

   ![Просмотр истории триггеров для приложения логики](./media/monitor-logic-apps/overview-pane-logic-app-details-trigger-history.png)

   Панель истории триггеров показывает все попытки триггера, сделанные вашим приложением логики. Каждый раз, когда срабатывает триггер для элемента или события, движок Logic Apps создает отдельный экземпляр приложения логики, который запускает рабочий процесс. По умолчанию все экземпляры выполняются параллельно, чтобы ни один рабочий процесс не ожидал запуска. Так что если приложение логики запускает несколько элементов одновременно, для каждого элемента появляется запись триггера с одной и той же датой и временем.

   ![Несколько попыток триггера для различных элементов](./media/monitor-logic-apps/logic-app-trigger-history.png)

   Ниже приведены возможные состояния для попытки активации.

   | Состояние | Описание |
   |--------|-------------|
   | **Сбой при** | Произошла ошибка. Чтобы просмотреть созданные сообщения об ошибках для триггера, завершившегося сбоем, выберите соответствующую попытку активации и щелкните **Выходные данные**. Например, вы можете обнаружить недопустимые входные данные. |
   | **Пропущен** | Триггер проверил конечную точку, но не нашел данные. |
   | **Удалось** | Триггер проверил конечную точку и нашел доступные данные. Как правило, рядом с этим состоянием также отображается состояние "Срабатывания". Если это не так, возможно, определение триггера содержит какое-либо условие или команду `SplitOn`, которая не была выполнена. <p>Это состояние может применяться к запускаемому вручную триггеру, а также повторяющему или опрашивающему триггеру. Триггер может быть успешно запущен, но сам запуск по-прежнему может завершиться ошибкой, если действия порождают необработанные ошибки. |
   |||

   > [!TIP]
   > Триггер можно проверить, не дожидаясь следующего повторения. На панели инструментов обзора выберите **триггер Run**и выберите триггер, который заставляет проверить. Или щелкните **Запустить** на панели инструментов конструктора приложений логики.

1. Для просмотра информации о конкретной попытке триггера на панели триггера выберите событие триггера. Если в списке отображается множество попыток триггеров, и вы не можете найти ту запись, которую вы хотите, попробуйте отфильтровать список. Если вы не нашли ожидаемые данные, попробуйте щелкнуть **Обновить** на панели инструментов.

   ![Просмотр конкретной попытки триггера](./media/monitor-logic-apps/select-trigger-event-for-review.png)

   Теперь можно просматривать информацию о выбранном событии триггера, например:

   ![Просмотр конкретной информации триггера](./media/monitor-logic-apps/view-specific-trigger-details.png)

<a name="add-azure-alerts"></a>

## <a name="set-up-monitoring-alerts"></a>Настройка оповещений о мониторинге

Чтобы получать оповещения на основе определенных метрик или превышенных пороговых значений для приложения логики, нависните [оповещения в Azure Monitor.](../azure-monitor/platform/alerts-overview.md) Узнайте подробнее о [метриках в Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md). Чтобы настроить оповещения без использования [Azure Monitor,](../log-analytics/log-analytics-overview.md)выполните следующие действия.

1. В меню приложения логики под **мониторингом**выберите правило **оповещения** > **новое.**

   ![Добавление оповещения для приложения логики](./media/monitor-logic-apps/add-new-alert-rule.png)

1. На панели **правил «Создание»** под **ресурсом**выберите приложение логики, если не уже выбрано. В соответствии с **условием,** **выберите Добавить** так, что вы можете определить условие, которое вызывает оповещение.

   ![Добавление условия для правила](./media/monitor-logic-apps/add-condition-for-rule.png)

1. На **панели логики сигнала Настройка,** найти и выбрать сигнал, для которого вы хотите получить оповещение. Вы можете использовать поле поиска, или сортировать сигналы в алфавитном порядке, выберите заголовок **столбца имени сигнала.**

   Например, если требуется отправить оповещение о сбое триггера, выполните следующие действия:

   1. В столбце **имени сигнала** найдите и выберите сигнал **Триггеров.**

      ![Выберите сигнал для создания оповещения](./media/monitor-logic-apps/find-and-select-signal.png)

   1. На информационном панели, которая открывается для выбранного сигнала, под **логикой alert,** навяжьте ваше состояние, например:

   1. Для **оператора**, выберите **больше, чем или равна**.

   1. Для **типа агрегации**выберите **Count.**

   1. Для **значения порога,** введите `1`.

   1. При **предварительном просмотре условия,** подтвердите, что ваше состояние выглядит правильным.

   1. В соответствии с **оценкой на основе,** настроить интервал и частоту для запуска правила оповещения. Для **детализации агрегации (Period)** выберите период для группировки данных. Для **частоты оценки,** выберите, как часто вы хотите проверить условие.

   1. Когда вы будете готовы, выберите **Done.**

   Вот готовое условие:

   ![Настройка состояния оповещения](./media/monitor-logic-apps/set-up-condition-for-alert.png)

   Страница **правила «Создание»** теперь отображает состояние, которое вы создали, и стоимость выполнения этого предупреждения.

   ![Новое оповещение на странице "Создать правило"](./media/monitor-logic-apps/finished-alert-condition-cost.png)

1. Укажите имя, дополнительное описание и уровень серьезности для оповещения. Либо оставьте правило Включить после включения настройки **создания,** либо выключите, пока вы не будете готовы включить правило.

1. Когда вы закончите, выберите **правило оповещения.**

> [!TIP]
> Чтобы запустить приложение логики из оповещения, в рабочий процесс можно включить [триггер запроса](../connectors/connectors-native-reqres.md), что позволяет выполнять такие задачи, как указано ниже:
> 
> * [Публикация в Slack](https://github.com/Azure/azure-quickstart-templates/tree/master/201-alert-to-slack-with-logic-app)
> * [Отправка текста](https://github.com/Azure/azure-quickstart-templates/tree/master/201-alert-to-text-message-with-logic-app)
> * [Добавление сообщения в очередь](https://github.com/Azure/azure-quickstart-templates/tree/master/201-alert-to-queue-with-logic-app)

## <a name="next-steps"></a>Дальнейшие действия

* [Мониторинг логических приложений с помощью Azure Monitor](../logic-apps/monitor-logic-apps-log-analytics.md)