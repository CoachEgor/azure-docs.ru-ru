---
title: Сообщения RosettaNet для интеграции B2B
description: Обмен сообщениями RosettaNet в приложениях Логики Azure с пакетом корпоративной интеграции
services: logic-apps
ms.suite: integration
author: divyaswarnkar
ms.author: divswa
ms.reviewer: jonfan, estfan, logicappspm
ms.topic: article
ms.date: 06/22/2019
ms.openlocfilehash: 2cc2ac08b9624c1d1d9bee9ce91a7c91189d7f2c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74792416"
---
# <a name="exchange-rosettanet-messages-for-b2b-enterprise-integration-in-azure-logic-apps"></a>Обмен сообщениями RosettaNet для интеграции b2B в приложения azure Logic Apps

[RosettaNet](https://resources.gs1us.org) является некоммерческим консорциумом, который установил стандартные процессы обмена бизнес-информацией. Эти стандарты широко используются для цепных процессов поставок и широко распространены в полупроводниковой, электронике и логистике. Консорциум RosettaNet создает и поддерживает процессы взаимодействия с партнерами (PIP), которые обеспечивают общие определения бизнес-процессов для всех обменов сообщениями RosettaNet. RosettaNet основан а на XML и определяет рекомендации по сообщению, интерфейсы для бизнес-процессов и платформы реализации для общения между компаниями.

В [Azure Logic Apps](../logic-apps/logic-apps-overview.md)разъем RosettaNet помогает создавать интеграционные решения, поддерживающие стандарты RosettaNet. Разъем основан на версии RosettaNet Implementation Framework (RNIF) 2.0.01. RNIF — это открытая сетевая платформа приложений, которая позволяет бизнес-партнерам совместно запускать PIP RosettaNet. Эта структура определяет структуру сообщений, необходимость подтверждения, многоцелевое кодирование интернет-почты (MIME) и цифровую подпись.

В частности, разъем предоставляет следующие возможности:

* Кодирование или получение сообщений RosettaNet.
* Расшифруйте или отправьте сообщения RosettaNet.
* Дождитесь ответа и генерации Уведомления о сбое.

Для этих возможностей разъем поддерживает все PIPs, которые определяются RNIF 2.0.01. Общение с партнером может быть синхронным или асинхронным.

## <a name="rosettanet-concepts"></a>Концепции RosettaNet

Вот некоторые концепции и термины, которые являются уникальными для спецификации RosettaNet и имеют важное значение при создании интеграции на основе RosettaNet:

* **Pip**

  Организация RosettaNet создает и поддерживает процессы взаимодействия с партнерами (PIP), которые обеспечивают общие определения бизнес-процессов для всех обменов сообщениями RosettaNet. Каждая спецификация PIP содержит файл определения типа документа (DTD) и документ, наиболее водящий в своем роде. Файл DTD определяет структуру сообщений об обслуживании. Документ, ориентируя для сообщений, который является читаемым для человека HTML-файлом, определяет ограничения уровня элемента. Вместе эти файлы обеспечивают полное определение бизнес-процесса.

   PIPs классифицируются по бизнес-функции высокого уровня, кластеру, а также к функции или сегмента. Например, "3A4" является PIP для заказа на покупку, в то время как "3" является функцией управления заказом, а "3A" - подсровкой & заказа. Для получения дополнительной информации смотрите [сайт RosettaNet](https://resources.gs1us.org).

* **Действие**

  Часть PIP, сообщения действий являются бизнес-сообщения, которые обмениваются между партнерами.

* **Сигнал**

   Часть PIP, сигнальные сообщения являются подтверждениями, которые отправляются в ответ на сообщения действий.

* **Одно действие и двойное действие**

  Для PIP с одним действием единственным ответом является сообщение сигнала подтверждения. Для PIP с двойным действием инициатор получает ответное сообщение и отвечает с подтверждением в дополнение к потоку сообщений с одним действием.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [получите бесплатную учетную запись Azure](https://azure.microsoft.com/free/).

* Учетная [запись интеграции](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md) для хранения вашего соглашения и других артефактов B2B. Эта учетная запись интеграции должна быть связана с подпиской Azure.

* По крайней мере, два [партнера,](../logic-apps/logic-apps-enterprise-integration-partners.md) которые определены в вашей учетной записи интеграции и настроены с квалификатором "DUNS" под **бизнес-идентификациями**

* Конфигурация процесса PIP, которая необходима для отправки или получения сообщений RosettaNet, в вашей учетной записи интеграции. Конфигурация процесса хранит все характеристики конфигурации PIP. Затем можно ссылаться на эту конфигурацию при создании соглашения с партнером. Для создания конфигурации процесса PIP в учетной записи интеграции [см.](#add-pip)

* Дополнительные [сертификаты](../logic-apps/logic-apps-enterprise-integration-certificates.md) для шифрования, расшифровки или подписания сообщений, которые вы загружаете в учетную запись интеграции. Сертификаты требуются только при использовании подписи или шифрования.

<a name="add-pip"></a>

## <a name="add-pip-process-configuration"></a>Добавление конфигурации процесса PIP

Чтобы добавить конфигурацию процесса PIP в учетную запись интеграции, выполните следующие действия:

1. На [портале Azure](https://portal.azure.com)найдите и откройте свой интеграционный счет.

1. На панели **обзора** выберите плитку **RosettaNet PIP.**

   ![Выберите плитку RosettaNet](media/logic-apps-enterprise-integration-rosettanet/select-rosettanet-tile.png)

1. Под **RosettaNet PIP**, **выберите Добавить**. Предоставьте свои данные PIP.

   ![Добавить детали RosettaNet PIP](media/logic-apps-enterprise-integration-rosettanet/add-rosettanet-pip.png)

   | Свойство | Обязательно | Описание |
   |----------|----------|-------------|
   | **Название** | Да | Ваше имя PIP |
   | **Код PIP** | Да | Трехзначный код PIP. Для получения дополнительной [RosettaNet PIPs](https://docs.microsoft.com/biztalk/adapters-and-accelerators/accelerator-rosettanet/rosettanet-pips)информации см. |
   | **Версия PIP** | Да | Номер версии PIP, который доступен на основе выбранного вами кода PIP |
   ||||

   Для получения дополнительной информации об этих свойствах PIP посетите [веб-сайт RosettaNet](https://resources.gs1us.org/RosettaNet-Standards/Standards-Library/PIP-Directory#1043208-pipsreg).

1. Когда вы закончите, выберите **OK,** который создает конфигурацию PIP.

1. Для просмотра или изменения конфигурации процесса выберите PIP и выберите **Edit как JSON.**

   Все настройки конфигурации процесса исходят из спецификаций PIP. Логические приложения заполняют большинство параметров значениями по умолчанию, которые являются наиболее обычно используемыми значениями для этих свойств.

   ![Конфигурация Edit RosettaNet PIP](media/logic-apps-enterprise-integration-rosettanet/edit-rosettanet-pip.png)

1. Подтвердите, что настройки соответствуют значениям соответствующей спецификации PIP и отвечают вашим бизнес-потребностям. При необходимости обновите значения в JSON и сохраните эти изменения.

## <a name="create-rosettanet-agreement"></a>Создание соглашения RosettaNet

1. На [портале Azure](https://portal.azure.com) найдите и выберите свою учетную запись интеграции, если она еще не открыта.

1. На панели **обзора** выберите плитку **Соглашений.**

   ![Выберите плитку Соглашений](media/logic-apps-enterprise-integration-rosettanet/select-agreement-tile.png)

1. В разделе **Соглашения** щелкните **Добавить**. Предоставьте информацию о своем соглашении.

   ![Добавление сведений о соглашении](media/logic-apps-enterprise-integration-rosettanet/add-agreement-details.png)

   | Свойство | Обязательно | Описание |
   |----------|----------|-------------|
   | **Название** | Да | Название соглашения |
   | **Тип соглашения** | Да | Выберите **RosettaNet**. |
   | **"Host Partner" (Главный партнер)** | Да | Для соглашения нужно указать главного партнера и гостевого партнера. Главный партнер представляет организацию, которая настраивает соглашение. |
   | **"Host Identity" (Идентификатор главного партнера)** | Да | Идентификатор главного партнера. |
   | **"Guest Partner" (Партнер-гость)** | Да | Для соглашения нужно указать главного партнера и гостевого партнера. Партнер-гость представляет организацию, которая имеет деловые отношения с главным партнером. |
   | **Guest Identity** | Да | Идентификатор гостевого партнера |
   | **"Receive Settings" (Параметры получения)** | Различается | Эти свойства применяются ко всем сообщениям, полученным партнером-хозяином |
   | **"Send Settings" (Параметры отправки)** | Различается | Эти свойства применяются ко всем сообщениям, отправленным партнером-хозяином |  
   | **Ссылки RosettaNet PIP** | Да | Ссылки PIP на соглашение. Все сообщения RosettaNet требуют конфигураций PIP. |
   ||||

1. Чтобы настроить соглашение о приеме входящих сообщений от гостевого партнера, выберите **Настройки получения.**

   ![Получение настроек](media/logic-apps-enterprise-integration-rosettanet/add-agreement-receive-details.png)

   1. Для включения в систему подписания или шифрования входящих сообщений в соответствии с **сообщениями**необходимо **подписать сообщение** или **зашифровать Сообщение** соответственно.

      | Свойство | Обязательно | Описание |
      |----------|----------|-------------|
      | **Message should be signed** | нет | Подпишите входящие сообщения выбранным сертификатом. |
      | **Сертификат** | Да, если подписание включено | Сертификат, который можно использовать для подписания |
      | **"Enable message encryption" (Включить шифрование сообщений)** | нет | Шифрование входящих сообщений выбранным сертификатом. |
      | **Сертификат** | Да, если шифрование включено | Сертификат для шифрования |
      ||||

   1. Под каждым выбором выберите соответствующий [сертификат,](./logic-apps-enterprise-integration-certificates.md)который вы ранее добавили в свою интеграционную учетную запись, чтобы использовать для подписания или шифрования.

1. Чтобы настроить соглашение об отправке сообщений гостевому партнеру, выберите **Настройки отправки.**

   ![Отправка настроек](media/logic-apps-enterprise-integration-rosettanet/add-agreement-send-details.png)

   1. Для включения в систему подписания или шифрования исходящих сообщений под **сообщениями**выберите **подписание сообщения Enable** или Включение **шифрования сообщений** соответственно. В каждом выбранном варианте выберите соответствующий алгоритм и [сертификат,](./logic-apps-enterprise-integration-certificates.md)который вы ранее добавили в свою интеграционную учетную запись, чтобы использовать для подписания или шифрования.

      | Свойство | Обязательно | Описание |
      |----------|----------|-------------|
      | **"Enable message signing" (Включить подписание сообщений)** | нет | Подпишите исходящие сообщения с выбранным алгоритмом и сертификатом подписи. |
      | **Алгоритм подписывания** | Да, если подписание включено | Алгоритм подписания для использования, основанный на выбранном сертификате |
      | **Сертификат** | Да, если подписание включено | Сертификат, который можно использовать для подписания |
      | **"Enable message encryption" (Включить шифрование сообщений)** | нет | Шифрование исходящих с выбранным алгоритмом шифрования и сертификатом. |
      | **Алгоритм шифрования** | Да, если шифрование включено | Алгоритм шифрования для использования, основанный на выбранном сертификате |
      | **Сертификат** | Да, если шифрование включено | Сертификат для шифрования |
      ||||

   1. В **endpoints**укажите необходимые URL-адреса для использования для отправки сообщений действий и подтверждений.

      | Свойство | Обязательно | Описание |
      |----------|----------|-------------|
      | **URL действий** |  Да | URL-адрес для отправки сообщений действий. URL-адрес является обязательным полем как для синхронных, так и для асинхронных сообщений. |
      | **URL-адрес подтверждения** | Да | URL-адрес для отправки сообщений о подтверждении. URL-адрес является обязательным полем для асинхронных сообщений. |
      ||||

1. Чтобы настроить соглашение со ссылками RosettaNet PIP для партнеров, выберите **ссылки RosettaNet PIP.** Под **названием PIP**выберите имя для ранее созданного PIP.

   ![Ссылки PIP](media/logic-apps-enterprise-integration-rosettanet/add-agreement-pip-details.png)

   Ваш выбор заполняет оставшиеся свойства, которые основаны на PIP, который вы настраиваете в вашей учетной записи интеграции. При необходимости вы можете изменить **роль PIP.**

   ![Выбранный PIP](media/logic-apps-enterprise-integration-rosettanet/add-agreement-selected-pip.png)

После завершения этих шагов вы будете готовы отправлять или получать сообщения RosettaNet.

## <a name="rosettanet-templates"></a>Шаблоны RosettaNet

Для ускорения разработки и рекомендации шаблонов интеграции можно использовать шаблоны логических приложений для декодирования и кодирования сообщений RosettaNet. При создании приложения логики вы можете выбрать из галереи шаблонов в Logic App Designer. Вы также можете найти эти шаблоны в [репозитории GitHub для приложений логики Azure.](https://github.com/Azure/logicapps)

![Шаблоны RosettaNet](media/logic-apps-enterprise-integration-rosettanet/decode-encode-rosettanet-templates.png)

## <a name="receive-or-decode-rosettanet-messages"></a>Получение или декодирование сообщений RosettaNet

1. [Создайте пустое приложение логики.](quickstart-create-first-logic-app-workflow.md)

1. [Свяжите учетную запись интеграции](logic-apps-enterprise-integration-create-integration-account.md#link-account) с приложением логики.

1. Прежде чем добавить действие для декодирования сообщения RosettaNet необходимо добавить триггер для запуска приложения логики, например триггер запроса.

1. После добавления триггера выберите **новый шаг.**

   ![Добавление триггера Запроса](media/logic-apps-enterprise-integration-rosettanet/request-trigger.png)

1. В поле поиска введите "rosettanet" и выберите это действие: **RosettaNet Декодирует**

   ![Найти и выбрать действие "RosettaNet Decode"](media/logic-apps-enterprise-integration-rosettanet/select-decode-rosettanet-action.png)

1. Предоставьте информацию о свойствах действия:

   ![Предоставление сведений о действиях](media/logic-apps-enterprise-integration-rosettanet/decode-action-details.png)

   | Свойство | Обязательно | Описание |
   |----------|----------|-------------|
   | **Сообщение** | Да | Сообщение RosettaNet для декодирования  |
   | **Заголовки** | Да | Заголовки HTTP, которые предоставляют значения для версии, которая является версией RNIF, и типа ответа, который указывает тип связи между партнерами и может быть синхронным или асинхронным |
   | **Role** | Да | Роль принимающего партнера в PIP |
   ||||

   Из действия RosettaNet Decode выход, наряду с другими свойствами, включает **исходящий сигнал,** который вы можете закодировать и вернуть обратно партнеру, или предпринять любые другие действия на этом выходе.

## <a name="send-or-encode-rosettanet-messages"></a>Отправить или кодировать сообщения RosettaNet

1. [Создайте пустое приложение логики.](quickstart-create-first-logic-app-workflow.md)

1. [Свяжите учетную запись интеграции](logic-apps-enterprise-integration-create-integration-account.md#link-account) с приложением логики.

1. Прежде чем добавить действие для кодирования сообщения RosettaNet, необходимо добавить триггер для запуска приложения логики, например триггер запроса.

1. После добавления триггера выберите **новый шаг.**

   ![Добавление триггера Запроса](media/logic-apps-enterprise-integration-rosettanet/request-trigger.png)

1. В поле поиска введите "rosettanet" и выберите это действие: **RosettaNet Encode**

   ![Найти и выбрать действие "RosettaNet Encode"](media/logic-apps-enterprise-integration-rosettanet/select-encode-rosettanet-action.png)

1. Предоставьте информацию о свойствах действия:

   ![Предоставление сведений о действиях](media/logic-apps-enterprise-integration-rosettanet/encode-action-details.png)

   | Свойство | Обязательно | Описание |
   |----------|----------|-------------|
   | **Сообщение** | Да | Сообщение RosettaNet для кодирования  |
   | **Принимающий партнер** | Да | Имя партнера-хозяина |
   | **Гостевой партнер** | Да | Имя гостя партнера |
   | **Код PIP** | Да | Код PIP |
   | **Версия PIP** | Да | Версия PIP |  
   | **Идентификация экземпляра PIP** | Да | Уникальный идентификатор для этого сообщения PIP |  
   | **тип сообщений;** | Да | Тип сообщения для кодирования |  
   | **Role** | Да | Роль принимающего партнера |
   ||||

   Закодированное сообщение теперь готово к отправке партнеру.

1. Для отправки закодированного сообщения в этом примере используется действие **HTTP,** которое переименовано в "HTTP - Отправить закодированное сообщение партнеру".

   ![Действия HTTP для отправки сообщения RosettaNet](media/logic-apps-enterprise-integration-rosettanet/send-rosettanet-message-to-partner.png)

   По стандартам RosettaNet, бизнес-операции считаются завершенными только тогда, когда все шаги, определенные PIP, завершены.

1. После того, как хост отправляет закодированное сообщение партнеру, хост ждет сигнала и подтверждения. Для выполнения этой задачи добавьте **RosettaNet, дождитесь ответа.**

   ![Добавить действие "RosettaNet" ждет ответа](media/logic-apps-enterprise-integration-rosettanet/rosettanet-wait-for-response-action.png)

   Продолжительность использования ожидания и количество повторов зависят от конфигурации PIP в вашей учетной записи интеграции. Если ответ не получен, это действие генерирует Уведомление о сбое. Чтобы обрабатывать повторы, всегда помещайте **Encode** и **ждите** действия ответа в **цикле Until.**

   ![До цикла с действиями RosettaNet](media/logic-apps-enterprise-integration-rosettanet/rosettanet-loop.png)

## <a name="next-steps"></a>Дальнейшие действия

* Сведения о проверке, преобразовании и других операциях с сообщениями, выполняемых с помощью [пакета интеграции Enterprise](../logic-apps/logic-apps-enterprise-integration-overview.md).
* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
