---
title: Метрики ретранслятора Azure в Azure Monitor (предварительная версия) | Документация Майкрософт
description: Мониторинг ретранслятора Azure с помощью Azure Monitor.
services: service-bus-relay
documentationcenter: .NET
author: spelluru
manager: timlt
editor: ''
ms.assetid: ''
ms.service: service-bus-relay
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/28/2018
ms.author: spelluru
ms.openlocfilehash: bd62624406adb006fdcd7d59f72db3fb5e1848a0
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60421813"
---
# <a name="azure-relay-metrics-in-azure-monitor-preview"></a>Метрики ретранслятора Azure в Azure Monitor (предварительная версия)
Метрики Azure Relay предоставляют состояние ресурсов в подписке Azure. Используя обширный набор данных метрик, можно оценить общую работоспособность ресурсов ретранслятора не только на уровне пространства имен, но также и на уровне сущности. Эти статистические данные могут быть важны, так как они позволяют отслеживать состояние ретранслятора Azure. Кроме того, метрики могут помочь в устранении первопричин проблем без необходимости обращения в службу поддержки Azure.

Azure Monitor предоставляет унифицированный пользовательский интерфейс для мониторинга различных служб Azure. Дополнительные сведения см. в разделе [Обзор мониторинга в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview.md). Ознакомьтесь также с примером [получения данных метрик Azure Monitor с помощью .NET](https://github.com/Azure-Samples/monitor-dotnet-metrics-api) на сайте GitHub.

> [!IMPORTANT]
> Эта статья относится только к гибридным подключениям Azure Relay, а не к Ретранслятору WCF. 

## <a name="access-metrics"></a>Доступ к метрикам

Azure Monitor предоставляет несколько способов доступа к метрикам. Вы можете использовать [портал Azure](https://portal.azure.com), интерфейсы API Azure Monitor (REST и .NET), а также решения для анализа, например Operation Management Suite и Центры событий. Дополнительные сведения см. в разделе [Мониторинг данных, собранных Azure Monitor](../azure-monitor/platform/data-platform.md).

Метрики включены по умолчанию, и вы можете получить доступ к данным за последние 30 дней. Если необходимо хранить данные метрик в течение длительного периода времени, вы можете архивировать их в учетную запись хранения Azure. Для настройки используйте [параметры диагностики](../azure-monitor/platform/diagnostic-logs-overview.md#diagnostic-settings) в Azure Monitor.

## <a name="access-metrics-in-the-portal"></a>Доступ к метрикам на портале

На [портале Azure](https://portal.azure.com) можно отслеживать метрики в течение продолжительного периода времени. В приведенном ниже примере показано, как просмотреть успешные запросы и входящие запросы на уровне учетной записи.

![][1]

Можно также открыть метрики непосредственно с помощью пространства имен. Для этого выберите нужное пространство имен и щелкните **Метрики (предварительная версия)**. 

Для метрик с поддержкой измерений необходимо выполнить фильтрацию по нужному значению измерения.

## <a name="billing"></a>Выставление счетов

Использование метрик в Azure Monitor пока что осуществляется бесплатно и находится на этапе предварительной версии. Тем не менее, если вы используете дополнительные решения для приема данных метрик, за использование этих решений может взиматься плата. Например, при архивации данных метрик в учетную запись хранения Azure плата будет взиматься службой хранилища Azure, Плата будет взиматься по Azure Monitor журналы при потоковой передаче данных метрик в Azure Monitor журналы для расширенного анализа.

Приведенные ниже метрики позволяют получить общие сведения о работоспособности службы. 

> [!NOTE]
> Несколько метрик стали неподдерживаемыми, так как теперь они доступны под другим именем. Это может потребовать обновления ссылок. Метрики, помеченные ключевым словом "нерекомендуемая", больше не будут поддерживаться.

Все значения метрик ежеминутно отправляются в Azure Monitor. Степень детализации определяет интервал времени, за который представлены значения метрик. Поддерживаемый интервал времени для всех метрик ретранслятора Azure составляет 1 минуту.

## <a name="connection-metrics"></a>Метрики подключения

| Имя метрики | ОПИСАНИЕ |
| ------------------- | ----------------- |
| ListenerConnections-Success (preview) | Число успешных подключений прослушивателя к ретранслятору Azure за указанный период. <br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|ListenerConnections-ClientError (preview)|Количество ошибок клиента для подключений прослушивателя за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|ListenerConnections-ServerError (preview)|Количество ошибок сервера для подключений прослушивателя за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|SenderConnections-Success (preview)|Число успешных подключений отправителя за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|SenderConnections-ClientError (preview)|Количество ошибок клиента для подключений отправителя за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|SenderConnections-ServerError (preview)|Количество ошибок сервера для подключений отправителя за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|ListenerConnections-TotalRequests (preview)|Общее количество подключений прослушивателя за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|SenderConnections-TotalRequests (preview)|Запросы на подключение, выполненные отправителями, за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|ActiveConnections (preview)|Количество активных подключений за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|ActiveListeners (preview)|Количество активных прослушивателей за указанный период.<br/><br/> Единица измерения: Количество <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|ListenerDisconnects (preview)|Количество отключенных прослушивателей за указанный период.<br/><br/> Единица измерения: Байты <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|
|SenderDisconnects (preview)|Количество отключенных отправителей за указанный период.<br/><br/> Единица измерения: Байты <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|

## <a name="memory-usage-metrics"></a>Метрики использования памяти

| Имя метрики | ОПИСАНИЕ |
| ------------------- | ----------------- |
|BytesTransferred (preview)|Количество байтов, переданных за указанный период.<br/><br/> Единица измерения: Байты <br/> Тип агрегирования: Итого <br/> Измерение: EntityName|

## <a name="metrics-dimensions"></a>Измерения метрик

Ретранслятор Azure поддерживает следующие измерения метрик в Azure Monitor. Добавление измерений для метрик является необязательным. Если не добавить измерения, то метрики указываются на уровне пространства имен. 

|Имя измерения|ОПИСАНИЕ|
| ------------------- | ----------------- |
|EntityName| Ретранслятор Azure поддерживает сущности обмена сообщениями в пространстве имен.|

## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с разделом [Обзор мониторинга в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview.md).

[1]: ./media/relay-metrics-azure-monitor/relay-monitor1.png




