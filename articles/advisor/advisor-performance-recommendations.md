---
title: Повышение производительности приложений Azure с использованием Помощника по Azure
description: Используйте Помощник для оптимизации производительности развернутых служб Azure.
ms.topic: article
ms.date: 01/29/2019
ms.openlocfilehash: 405ec395feeb33b8511b9b915151b2ed9503c371
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/25/2019
ms.locfileid: "75443061"
---
# <a name="improve-performance-of-azure-applications-with-azure-advisor"></a>Повышение производительности приложений Azure с использованием Помощника по Azure

Рекомендации по производительности, предложенные Помощником по Azure, помогают улучшить работу, повысить производительность и увеличить скорость реагирования критически важных бизнес-приложений. Получить рекомендации Помощника по производительности можно на вкладке **Производительность** панели мониторинга Помощника.

## <a name="reduce-dns-time-to-live-on-your-traffic-manager-profile-to-fail-over-to-healthy-endpoints-faster"></a>Сокращение срока жизни DNS в профиле диспетчера трафика Microsoft Azure, чтобы ускорить отработку отказа на работоспособные конечные точки

[Параметры срока жизни (TTL)](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-performance-considerations) в профиле диспетчера трафика позволяют указать, как быстро выполнить переключение на конечные точки, если нужные конечные точки прекращают отвечать на запросы. Сокращение срока жизни означает, что клиенты быстрее будут перенаправлены на работоспособные конечные точки.

Помощник по Azure определяет профили диспетчера трафика с параметрами большего срока жизни и рекомендует настроить срок жизни на уровне 20 секунд или 60 секунд — в зависимости от того, настроена ли в профиле [Быстрая отработка отказа](https://azure.microsoft.com/roadmap/fast-failover-and-tcp-probing-in-azure-traffic-manager/).

## <a name="improve-database-performance-with-sql-db-advisor"></a>Повышение производительности базы данных с помощью Помощника по базам данных SQL

Advisor предоставляет согласованное сводное представление с рекомендациями для всех ресурсов Azure. Advisor интегрируется с Помощником по базам данных SQL, чтобы вы могли получить рекомендации по повышению производительности базы данных SQL Azure. SQL Помощник по базам данных оценивает производительность баз данных SQL Azure, анализируя историю использования. После этого он предлагает рекомендации, наиболее подходящие для типовых нагрузок в вашей базе данных.

> [!NOTE]
> Чтобы рекомендации сформировались, база данных должна постоянно использоваться на протяжении примерно одной недели. Помощник по базам данных SQL обеспечивает более эффективную оптимизацию при стабильном потоке запросов, чем на основе случайных всплесков активности.

Дополнительные сведения о Помощнике по базам данных SQL см. в разделе [Помощник по работе с базами данных SQL](https://azure.microsoft.com/documentation/articles/sql-database-advisor/).

## <a name="improve-app-service-performance-and-reliability"></a>Повышение надежности и производительности службы приложений

Azure Advisor объединяет практические рекомендации по улучшению работы службы приложений и обнаружению соответствующих возможностей платформы. Ниже приведены примеры рекомендаций по службам приложений:
* обнаружение экземпляров, исчерпавших ресурсы памяти или ЦП во время выполнения приложений, и описание вариантов устранения;
* обнаружение экземпляров, для которых совместное размещение ресурсов, например веб-приложений и баз данных, может повысить производительность и снизить стоимость.

Дополнительные сведения о рекомендациях по службам приложений см. в разделе [Рекомендации по использованию службы приложений Azure](https://azure.microsoft.com/documentation/articles/app-service-best-practices/).

## <a name="use-managed-disks-to-prevent-disk-io-throttling"></a>Использование Управляемых дисков для предотвращения регулирования операций ввода-вывода

Помощник определяет виртуальные машины, принадлежащие учетной записи хранения, которая достигает своего целевого значения масштабирования. Это условие делает эти виртуальные машины восприимчивыми к регулированию ввода-вывода. Помощник рекомендует использовать Управляемые диски, чтобы предотвратить снижение производительности.

## <a name="improve-the-performance-and-reliability-of-virtual-machine-disks-by-using-premium-storage"></a>Повышение производительности и надежности дисков виртуальных машин с помощью хранилища класса Premium

Помощник определяет виртуальные машины с дисками уровня "Стандартный" с большим объемом транзакций в вашей учетной записи хранения и рекомендует обновить их до уровня "Премиум". 

Хранилище Azure Premium обеспечивает поддержку дисков с высокой производительностью и малой задержкой для виртуальных машин с интенсивной рабочей нагрузкой ввода-вывода. Диски виртуальной машины, использующие учетные записи хранения уровня "Премиум", хранят данные на твердотельных накопителях. Мы рекомендуем переносить все диски виртуальных машин, которые требуют большого количества операций ввода-вывода в секунду, в хранилище класса Premium для наилучшей производительности приложения.

## <a name="remove-data-skew-on-your-sql-data-warehouse-table-to-increase-query-performance"></a>Устранение неравномерного распределения данных в таблице хранилища данных SQL для повышения производительности запросов

Неравномерное распределение данных может привести к ненужному перемещению данных или нехватке ресурсов при выполнении рабочей нагрузки. Помощник определяет неравномерное распределение данных, превышающее 15 %, и рекомендует повторно распространить свои данные и пересмотреть выбранные ключи распределения таблиц. См. дополнительные сведения об [определении и устранении неравномерного распределения](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute#how-to-tell-if-your-distribution-column-is-a-good-choice).

## <a name="create-or-update-outdated-table-statistics-on-your-sql-data-warehouse-table-to-increase-query-performance"></a>Создание или обновление устаревшей статистики таблиц в таблице хранилища данных SQL для повышения производительности запросов

Помощник определяет таблицы без актуальной [статистики таблиц](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-tables-statistics) и рекомендует создать или обновить эту статистику. Оптимизатор запросов хранилища данных SQL использует актуальную статистику, чтобы оценить кратность или число строк в результате запроса. Это позволяет ему создать план запросов высокого качества для обеспечения максимальной производительности.

## <a name="scale-up-to-optimize-cache-utilization-on-your-sql-data-warehouse-tables-to-increase-query-performance"></a>Масштабирование для оптимизации использования кэша в таблицах Хранилища данных SQL для повышения производительности запросов

Помощник по Azure определяет, имеет ли Хранилище данных SQL высокий процент использования кэша и низкий процент попаданий. Это условие указывает на значительное вытеснение кэша, которое может повлиять на производительность вашего Хранилища данных SQL. Помощник предлагает увеличить масштаб Хранилища данных SQL, чтобы выделить достаточную емкость кэша для рабочей нагрузки.

## <a name="convert-sql-data-warehouse-tables-to-replicated-tables-to-increase-query-performance"></a>Преобразование таблиц Хранилища данных SQL в реплицированные таблицы для повышения производительности запросов

Помощник получает преимущества от преобразования таблиц, поэтому при определении таблиц, которые не являются реплицированными, предлагает их преобразовать. Рекомендации основываются на размере реплицированной таблицы, количестве столбцов, типе распределения и количестве секций в таблице Хранилища данных SQL. Дополнительная эвристика может быть предоставлена ​​в рекомендации для контекста. Дополнительные сведения см. в статье [Рекомендации в Хранилище данных SQL](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-concept-recommendations#replicate-tables). 

## <a name="migrate-your-storage-account-to-azure-resource-manager-to-get-all-of-the-latest-azure-features"></a>Перенос учетной записи хранения в Azure Resource Manager для получения доступа ко всем новым компонентам Azure

Перенос модели развертывания учетной записи хранения в Azure Resource Manager (Resource Manager) позволит получить функции развертывания шаблонов, дополнительные параметры безопасности и возможность обновления до учетной записи GPv2 для использования новых компонентов службы хранилища Azure. Помощник определит все изолированные учетные записи хранения, которые используют классическую модель развертывания, и предложит перенести их в модель развертывания Resource Manager.

> [!NOTE]
> Классические оповещения в Azure Monitor были прекращены в августе 2019. Мы советуем обновить классическую учетную запись хранения, чтобы использовать Resource Manager для сохранения функциональности оповещений на новой платформе. Дополнительные сведения см. в сообщении об обновлении [Прекращение поддержки классических оповещений в Azure Monitor в июне 2019 г.](https://docs.microsoft.com/azure/azure-monitor/platform/monitoring-classic-retirement#retirement-of-classic-monitoring-and-alerting-platform)

## <a name="design-your-storage-accounts-to-prevent-hitting-the-maximum-subscription-limit"></a>Разработайте учетные записи хранения, чтобы не допустить превышения максимального числа подписок.

Регион Azure может поддерживать не более 250 учетных записей хранения на подписку. После достижения этого ограничения вы не сможете создавать дополнительные учетные записи хранения в этой комбинации региона или подписки. Advisor проверит ваши подписки и Рекомендуемые области, чтобы создать меньшее количество учетных записей хранения для всех, которые близки к максимальному пределу.

## <a name="optimize-the-performance-of-your-azure-mysql-azure-postgresql-and-azure-mariadb-servers"></a>Оптимизируйте производительность серверов Azure MySQL, Azure PostgreSQL и Azure MariaDB. 

### <a name="fix-the-cpu-pressure-of-your-azure-mysql-azure-postgresql-and-azure-mariadb-servers-with-cpu-bottlenecks"></a>Исправьте нагрузку на ЦП для серверов Azure MySQL, Azure PostgreSQL и Azure MariaDB с узким местом ЦП
Очень высокая загрузка ЦП в течение продолжительного периода может привести к снижению производительности запросов рабочей нагрузки. Увеличение размера ЦП поможет оптимизировать среду выполнения запросов к базе данных и повысить общую производительность. Помощник Azure определит серверы с высокой загрузкой ЦП, которые, скорее всего, работают с ограниченными рабочими нагрузками ЦП и рекомендуем масштабировать вычислительные ресурсы.

### <a name="reduce-memory-constraints-on-your-azure-mysql-azure-postgresql-and-azure-mariadb-servers-or-move-to-a-memory-optimized-sku"></a>Сократите ограничения памяти на серверах Azure MySQL, Azure PostgreSQL и Azure MariaDB или перейдите к SKU, оптимизированному для памяти
Низкий коэффициент попадания в кэш может привести к снижению производительности запросов и увеличению числа операций ввода-вывода в секунду. Это может быть вызвано неправильным планом запроса или выполнением рабочей нагрузки, интенсивно использующей память. Исправление плана запроса или [увеличение объема памяти](https://docs.microsoft.com/azure/postgresql/concepts-pricing-tiers) базы данных Azure для сервера базы данных PostgreSQL, сервера базы данных Azure MySQL или Azure MariaDB Server поможет оптимизировать выполнение рабочей нагрузки базы данных. Помощник Azure определяет серверы, затронутые из-за этого большого объема буферного пула, и рекомендует либо исправить план запроса, либо перейти на более высокий SKU с большим объемом памяти, либо увеличить размер хранилища, чтобы получить больше операций ввода-вывода.

### <a name="use-a-azure-mysql-or-azure-postgresql-read-replica-to-scale-out-reads-for-read-intensive-workloads"></a>Использование Azure MySQL или Azure PostgreSQL Read реплика для масштабирования операций чтения для рабочих нагрузок с интенсивным чтением
Помощник Azure использует эвристику на основе рабочей нагрузки, такую как отношение операций чтения к записи на сервере за последние семь дней для обнаружения рабочих нагрузок с интенсивным чтением. Ресурс базы данных Azure для PostgreSQL или базы данных Azure для MySQL с очень высоким коэффициентом чтения и записи может привести к снижению производительности запросов ЦП и (или) памяти. Добавление [реплики](https://docs.microsoft.com/azure/postgresql/howto-read-replicas-portal) позволяет масштабировать операции чтения на сервере реплики, предотвращая ограничения на использование ЦП и/или памяти на сервере-источнике. Advisor определит серверы с такими высокими ресурсоемкими рабочими нагрузками и рекомендует добавить  [реплики чтения](https://docs.microsoft.com/azure/postgresql/concepts-read-replicas) для разгрузки некоторых рабочих нагрузок чтения.


### <a name="scale-your-azure-mysql-azure-postgresql-or-azure-mariadb-server-to-a-higher-sku-to-prevent-connection-constraints"></a>Масштабирование Azure MySQL, Azure PostgreSQL или Azure MariaDB Server до более высокого SKU для предотвращения ограничений подключения
Каждое новое подключение к серверу базы данных занимает некоторый объем памяти. Производительность сервера базы данных снижается в случае сбоя подключений к серверу из-за [верхнего предела](https://docs.microsoft.com/azure/postgresql/concepts-limits) памяти. Помощник Azure определит серверы, на которых выполняется много сбоев подключения, и порекомендует обновить ограничения подключений сервера, чтобы предоставить серверу больше памяти, увеличив масштаб вычислений или используя оптимизированные для памяти номера SKU, которые имеют больше вычислений на ядро.

## <a name="scale-your-cache-to-a-different-size-or-sku-to-improve-cache-and-application-performance"></a>Масштабирование кэша до другого размера или SKU для улучшения производительности кэша и приложений

Экземпляры кэша работают наилучшим образом, если не выполняются в условиях высокой плотности памяти, высокой нагрузки на сервер или высокой пропускной способности сети, что может привести к невозможности реагирования, потере данных или стать недоступным. Помощник определит экземпляры кэша в этих условиях и порекомендует применить рекомендации, чтобы снизить нагрузку на память, нагрузку на сервер, пропускную способность сети или масштабирование до другого размера или SKU с большей емкостью.

## <a name="add-regions-with-traffic-to-your-azure-cosmos-db-account"></a>Добавление регионов с трафиком в учетную запись Azure Cosmos DB

Advisor обнаружит Azure Cosmos DB учетные записи, имеющие трафик из региона, который в настоящее время не настроен, и рекомендует добавить этот регион. Это повысит задержку запросов, поступающих из этого региона, и обеспечит доступность в случае простоя региона. [Дополнительные сведения о распределении глобальных данных с помощью Azure Cosmos DB](https://aka.ms/cosmos/globaldistribution)

## <a name="configure-your-azure-cosmos-db-indexing-policy-with-customer-included-or-excluded-paths"></a>Настройка политики индексирования Azure Cosmos DB с включенными или исключенными путями клиента

Помощник Azure определит Cosmos DB контейнеры, использующие политику индексирования по умолчанию, но может воспользоваться преимуществами пользовательской политики индексации, основанной на шаблоне рабочей нагрузки. Политика индексирования по умолчанию индексирует все свойства, но с помощью пользовательской политики индексации с явными включенными или исключенными путями, используемыми в фильтрах запросов, можно уменьшить число получателей, которое будет использоваться для индексирования. [Дополнительные сведения об изменении политик индексов](https://aka.ms/cosmosdb/modify-index-policy)

## <a name="configure-your-azure-cosmos-db-query-page-size-maxitemcount-to--1"></a>Установите для размера страницы запроса Azure Cosmos DB (MaxItemCount) значение -1 

Помощник Azure определит Azure Cosmos DB контейнеры, использующие размер страницы запроса 100, и рекомендуем использовать размер страницы-1 для ускорения проверок. [Дополнительные сведения о максимальном числе элементов](https://aka.ms/cosmosdb/sql-api-query-metrics-max-item-count)

## <a name="how-to-access-performance-recommendations-in-advisor"></a>Как получить доступ к рекомендации по производительности в Advisor

1. Войдите на [портал Azure](https://portal.azure.com) и откройте [Помощник](https://aka.ms/azureadvisordashboard).

2.  На панели мониторинга Помощника выберите вкладку **Производительность**.

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать больше о рекомендациях Помощника, ознакомьтесь с приведенными ниже материалами.

* [Общие сведения об Azure Advisor](advisor-overview.md)
* [Начало работы с Помощником по Azure](advisor-get-started.md)
* [Рекомендации Azure Advisor по затратам](advisor-cost-recommendations.md)
* [Рекомендации Azure Advisor по высокой доступности](advisor-high-availability-recommendations.md)
* [Рекомендации Azure Advisor по безопасности](advisor-security-recommendations.md)
* [Рекомендации для оперативной работы Advisor](advisor-operational-excellence-recommendations.md)
