---
title: Повышение уровня доступности приложения с использованием Помощника по Azure
description: Использование Azure Advisor для повышения уровня доступности развернутых служб Azure.
ms.topic: article
ms.date: 01/29/2019
ms.openlocfilehash: 997681ed62fa9985e3122ece22565dbae0e65b53
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75443112"
---
# <a name="improve-availability-of-your-application-with-azure-advisor"></a>Повышение уровня доступности приложения с использованием Помощника по Azure

Помощник по Azure помогает обеспечить работу критически важных бизнес-приложений и их целостность. Рекомендации Advisor по обеспечению высокого уровня доступности можно получить на вкладке **Высокая доступность** панели мониторинга Advisor.

## <a name="ensure-virtual-machine-fault-tolerance"></a>Обеспечение отказоустойчивости виртуальной машины

Чтобы обеспечить избыточность приложения, мы рекомендуем включить две или несколько виртуальных машин в группу доступности. Advisor выявляет виртуальные машины, которые не входят в группу доступности, и рекомендует переместить их в группу доступности. Эта конфигурация гарантирует доступность не менее одной виртуальной машины, которая обеспечивает выполнение соглашения об уровне обслуживания Azure, в случае планового или внепланового обслуживания. Можно создать группу доступности для виртуальной машины или добавить ее в существующую группу доступности.

> [!NOTE]
> Если вы решили создать группу доступности, то после создания в нее необходимо будет добавить по крайней мере одну дополнительную виртуальную машину. Мы рекомендуем объединять в группу доступности не меньше двух виртуальных машин, чтобы обеспечить доступность как минимум одной из них во время сбоя.

## <a name="ensure-availability-set-fault-tolerance"></a>Обеспечение отказоустойчивости группы доступности

Чтобы обеспечить избыточность приложения, мы рекомендуем включить две или несколько виртуальных машин в группу доступности. Помощник определяет группы доступности, содержащие одну виртуальную машину, и рекомендует добавить в нее одну или несколько виртуальных машин.Эта конфигурация гарантирует доступность не менее одной виртуальной машины, которая обеспечивает выполнение соглашения об уровне обслуживания Azure, в случае планового или внепланового обслуживания.Можно создать виртуальную машину или добавить существующую виртуальную машину в группу доступности.  

## <a name="use-managed-disks-to-improve-data-reliability"></a>Использование управляемых дисков для повышения надежности данных

Виртуальные машины, которые находятся в группе доступности с дисками с общими учетными записями хранения или единицами масштабирования хранилища, не устойчивы к сбоям блока масштабирования во время простоев. Помощник определит эти группы доступности и порекомендует перейти на Управляемые диски Azure. Это обеспечит достаточную изоляцию дисков различных виртуальных машин в группе доступности, чтобы избавиться от единой точки отказа. 

## <a name="ensure-application-gateway-fault-tolerance"></a>Обеспечение отказоустойчивости шлюза приложений

Эта рекомендация обеспечивает непрерывность работы критически важных приложений, прослушивающих шлюзы приложений. Помощник выявляет экземпляры шлюзов приложений, для которых не настроено обеспечение отказоустойчивости, и предлагает действия по исправлению. Помощник определяет шлюзы средних или крупных одиночных приложений и рекомендует добавить по крайней мере один дополнительный экземпляр. Он также определяет шлюзы мелких одиночных и множественных приложений и рекомендует перенести их в средние или крупные номера SKU. Помощник рекомендует эти действия, чтобы убедиться, что экземпляры шлюза приложений настроены в соответствии с текущими требованиями соглашения об уровне обслуживания для этих ресурсов.

## <a name="protect-your-virtual-machine-data-from-accidental-deletion"></a>Защита данных виртуальной машины от случайного удаления

Настройка резервного копирования виртуальной машины обеспечивает доступность критически важных бизнес-данных и защиту данных от случайного удаления или повреждения. Помощник определяет виртуальные машины, резервное копирование на которых не включено, а затем рекомендует включить резервное копирование. 

## <a name="ensure-you-have-access-to-azure-cloud-experts-when-you-need-it"></a>Обеспечение доступа к экспертам по облаку Azure, когда это необходимо

При выполнении критически важной рабочей нагрузки важно иметь доступ к службе технической поддержки, когда он требуется. Помощник идентифицирует потенциальные критически важные для бизнеса подписки, в плане поддержки которых нет технической поддержки, и советует выполнить обновление до варианта, в котором присутствует техническая поддержка.

## <a name="create-azure-service-health-alerts-to-be-notified-when-azure-issues-affect-you"></a>Создание оповещений о Работоспособности служб Azure, чтобы узнавать о возникновении проблем в Azure

Мы рекомендуем настроить оповещения о работоспособности служб Azure, чтобы получать уведомления на случай возникновения проблем со службами Azure. [Работоспособность служб Azure](https://azure.microsoft.com/features/service-health/) — это бесплатная служба, которая предоставляет персонализированные инструкции и поддержку в случае возникновения проблем со службой Azure. Помощник определяет подписки, для которых не настроены оповещения, и рекомендует создать их.

## <a name="configure-traffic-manager-endpoints-for-resiliency"></a>Настройка конечных точек диспетчера трафика для обеспечения устойчивости

Профили диспетчера трафика с более чем одной конечной точкой обладают более высокой доступностью в случае сбоя любой заданной конечной точки. Размещение конечных точек в разных регионах дополнительно повышает надежность служб. Помощник определяет профили диспетчера трафика, где имеется только одна конечная точка, и рекомендует добавить по крайней мере одну дополнительную конечную точку в другом регионе.

Если все конечные точки в профиле диспетчера трафика, который настроен для маршрутизации с учетом расположения, расположены в том же регионе, пользователи из других регионов могут испытывать задержки при подключении. Добавление или перемещение конечной точки в другом регионе улучшит производительность в целом и обеспечит высокую доступность всех конечных точек в случае сбоя в одном регионе. Помощник определяет профили диспетчера трафика, настроенные для маршрутизации с учетом расположения, в которых все конечные точки находятся в одном и том же регионе. Он рекомендует добавить или переместить конечную точку в другой регион Azure.

Если профиль диспетчера трафика настроен для географической маршрутизации, трафик направляется на конечные точки в указанных регионах. В случае сбоя в регионе нет предварительно заданной процедуры отработки отказа. Наличие конечной точки, в которой группировка по регионам настроена на "Все (мир)", позволит избежать потери трафика и повысить доступность службы. Помощник определяет профили диспетчера трафика, настроенные для географической маршрутизации без конечной точки с группировкой по регионам "Все (мир)". Он рекомендует изменить конфигурацию, чтобы установить конечную точку "Все (мир)".

## <a name="use-soft-delete-on-your-azure-storage-account-to-save-and-recover-data-after-accidental-overwrite-or-deletion"></a>Используйте обратимое удаление в учетной записи службы хранилища Azure, чтобы сохранить и восстановить данные после перезаписи или удаления.

Включите [обратимое удаление](https://docs.microsoft.com/azure/storage/blobs/storage-blob-soft-delete) в вашей учетной записи хранения, чтобы удалить большие двоичные объекты с возможность восстановления вместо безвозвратного удаления. Когда данные перезаписываются, создается теневая копия обратимого удаления, чтобы сохранить состояние перезаписанных данных. Использование обратимого удаления позволяет восстановить данные при случайном удалении или перезаписи. Помощник определяет учетные записи службы хранилища Azure с выключенной возможностью обратимого удаления и предлагает включить ее.

## <a name="configure-your-vpn-gateway-to-active-active-for-connection-resiliency"></a>Настройте VPN-шлюз на режим "активный — активный" для устойчивости подключения

В активной активной конфигурации оба экземпляра VPN шлюза установят S2S VPN туннели для вашего собственного VPN-устройства. Когда событие запланированного обслуживания или незапланированное событие происходит с одним экземпляром шлюза, трафик автоматически переключается на другой активный туннель IPsec. Помощник по Azure будет идентифицировать VPN-шлюзы, которые не настроены на режим "активный — активный", и предложит настроить их для обеспечения высокой доступности.

## <a name="use-production-vpn-gateways-to-run-your-production-workloads"></a>Используйте производственные VPN шлюзы для выполнения производственных нагрузок

Azure Advisor проверит наличие VPN-шлюзов, которые являются базовым SKU, и порекомендует использовать вместо этого производственный SKU. Базовый SKU предназначен для разработки и тестирования целей. Производственные SKUs предлагают большее количество туннелей, поддержку BGP, активные варианты конфигурации, пользовательскую политику Ipsec/IKE, а также более высокую стабильность и доступность.

## <a name="repair-invalid-log-alert-rules"></a>Ремонт недействительных правил оповещения журнала

Azure Advisor будет обнаруживать правила оповещения, в которых есть недействительные запросы, указанные в разделе состояния. Правила генерации оповещений журнала создаются в Azure Monitor и используются для выполнения запросов аналитики через заданные интервалы. Результаты запроса определяют, нужно ли активировать оповещение. Со временем запросы аналитики могут стать недопустимыми из-за изменений в ресурсах, таблицах или командах, на которые ссылается запрос. Советник порекомендует исправить запрос в правиле оповещения, чтобы предотвратить автоматическое отключение и обеспечить мониторинг ваших ресурсов в Azure. [Подробнее о правилах оповещения о устранении неполадок](https://aka.ms/aa_logalerts_queryrepair)

## <a name="configure-consistent-indexing-mode-on-your-cosmos-db-collection"></a>Настройка согласованного режима индексации в коллекции Cosmos DB

Контейнеры Azure Cosmos DB, настроенные в режиме ленивой индексации, могут повлиять на свежесть результатов запроса. Advisor будет обнаруживать контейнеры, настроенные таким образом, и рекомендовать перейти в режим Consistent. [Подробнее о политике индексирования читайте в](https://aka.ms/cosmosdb/how-to-manage-indexing-policy)

## <a name="configure-your-azure-cosmos-db-containers-with-a-partition-key"></a>Настройте контейнеры Azure Cosmos DB с помощью ключа разделов

Советник Azure определит неразделенные коллекции Azure Cosmos DB, которые приближаются к своей квоте хранения. Он будет рекомендовать миграцию этих коллекций в новые коллекции с определением ключа раздела, чтобы они могли автоматически масштабироваться службой. [Подробнее о выборе ключа раздела](https://aka.ms/cosmosdb/choose-partitionkey)

## <a name="upgrade-your-azure-cosmos-db-net-sdk-to-the-latest-version-from-nuget"></a>Обновите пакет SDK .NET для Azure Cosmos DB до последней версии с сайта Nuget

Советник Azure определит учетные записи Azure Cosmos DB, использующие старые версии .NET SDK, и порекомендует обновление до последней версии от Nuget для последних исправлений, улучшений производительности и новых возможностей функций. [Узнайте больше о Космос DB .NET SDK](https://aka.ms/cosmosdb/sql-api-sdk-dotnet)

## <a name="upgrade-your-azure-cosmos-db-java-sdk-to-the-latest-version-from-maven"></a>Обновите пакет SDK Java для Azure Cosmos DB до последней версии с сайта Maven

Советник Azure определит учетные записи Azure Cosmos DB, использующие старые версии Java SDK, и порекомендует перейти на последнюю версию от Maven для последних исправлений, улучшений производительности и новых возможностей функций. [Узнайте больше о Космос DB Java SDK](https://aka.ms/cosmosdb/sql-api-sdk-dotnet)

## <a name="upgrade-your-azure-cosmos-db-spark-connector-to-the-latest-version-from-maven"></a>Обновите соединитель Spark для Azure Cosmos DB до последней версии с сайта Maven

Azure Advisor определит учетные записи Azure Cosmos DB, использующие старые версии разъема Cosmos DB Spark, и порекомендует перейти на последнюю версию от Maven для последних исправлений, улучшений производительности и новых возможностей функций. [Узнайте больше о разъеме Cosmos DB Spark](https://aka.ms/cosmosdb/spark-connector)

## <a name="enable-virtual-machine-replication"></a>Включение репликации виртуальных машин
Виртуальные машины, не включенные в другой регион, не устойчивы к региональным простоям. Репликация виртуальных машин уменьшает любое негативное влияние на бизнес во время простоя azure. Советник будет обнаруживать виртуальные вымпреды, которые не имеют включена репликации, и рекомендует включить репликацию, чтобы в случае простоя можно быстро привести свои виртуальные машины в удаленном регионе Azure. [Подробнее о репликации виртуальной машины](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-quickstart)

## <a name="how-to-access-high-availability-recommendations-in-advisor"></a>Как получить доступ к рекомендациям по высокой доступности в Advisor

1. Войдите на [портал Azure](https://portal.azure.com) и откройте [Помощник](https://aka.ms/azureadvisordashboard).

2.  На панели мониторинга Помощника выберите вкладку **Высокий уровень доступности**.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о рекомендациях Помощника см. в следующих разделах.
* [Общие сведения об Azure Advisor](advisor-overview.md)
* [Начало работы с Помощником по Azure](advisor-get-started.md)
* [Рекомендации Azure Advisor по затратам](advisor-cost-recommendations.md)
* [Рекомендации Azure Advisor по производительности](advisor-performance-recommendations.md)
* [Рекомендации Azure Advisor по безопасности](advisor-security-recommendations.md)
* [Рекомендации советника по операционному совершенству](advisor-operational-excellence-recommendations.md)
