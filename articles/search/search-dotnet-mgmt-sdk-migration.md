---
title: Обновление до пакета SDK управления .NET для службы поиска Azure версии 2
titleSuffix: Azure Cognitive Search
description: Сведения об обновлении пакета SDK управления .NET для службы "Поиск Azure" до версии 2. Сведения о новых возможностях и необходимых изменениях кода.
manager: nitinme
author: brjohnstmsft
ms.author: brjohnst
ms.service: cognitive-search
ms.devlang: dotnet
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: b18e9688141ee64eb7dfcb82ce58db198e324b5b
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "73847538"
---
# <a name="upgrading-versions-of-the-azure-search-net-management-sdk"></a>Обновление версий пакета SDK для службы поиска Azure для .NET

> [!Important]
> Это содержимое все еще находится в стадии разработки. Версия 3,0 пакета SDK для .NET для управления поиском Azure доступна в NuGet. Мы работаем над обновлением этого руководства по миграции, чтобы объяснить, как выполнить обновление до новой версии. 
>

Если вы используете версию 1.0.2 [пакета SDK управления .NET для службы поиска Azure](https://aka.ms/search-mgmt-sdk) или более раннюю версию, то эта статья поможет вам обновить приложение для использования версии 2.

Версия 2 пакета SDK управления .NET для службы поиска Azure содержит некоторые отличия от более ранних версий. Эти отличия в основном незначительные, поэтому изменение кода потребует минимальных усилий. В разделе [Действия по обновлению](#UpgradeSteps) вы найдете инструкции о том, как изменить код для использования новой версии пакета SDK.

<a name="WhatsNew"></a>

## <a name="whats-new-in-version-2"></a>Новые возможности в версии 2
Версия 2 пакета SDK управления .NET для службы поиска Azure нацелена на ту же общедоступную версию REST API управления службы поиска Azure, что и предыдущие версии пакета SDK, в частности 2015-08-19. Изменения в пакете SDK относятся исключительно к стороне клиента и предназначены для повышения удобства использования этого пакета SDK. К этим изменениям относятся следующие:

* `Services.CreateOrUpdate` и его асинхронные версии теперь автоматически опрашивают подготавливаемую службу `SearchService` и не возвращают ответ, пока не завершена подготовка службы. Это избавляет от необходимости создавать такой код опроса самостоятельно.
* Если вы все равно хотите опросить процесс подготовки службы вручную, то можете использовать новый метод `Services.BeginCreateOrUpdate` или одну из его асинхронных версий.
* Новые методы `Services.Update` и их асинхронные версии были добавлены в пакет SDK. Эти методы используют HTTP PATCH для поддержки добавочного обновления службы. Например, теперь можно масштабировать службу путем передачи в эти методы экземпляра `SearchService`, который содержит только нужные свойства `partitionCount` и `replicaCount`. Старый способ вызова `Services.Get` путем изменения возвращенного `SearchService` и его передачи в `Services.CreateOrUpdate` по-прежнему поддерживается, но больше не является необходимым. 

<a name="UpgradeSteps"></a>

## <a name="steps-to-upgrade"></a>Действия по обновлению
Прежде всего обновите справочник NuGet для `Microsoft.Azure.Management.Search` , воспользовавшись консолью диспетчера пакетов NuGet или щелкнув правой кнопкой мыши ссылки проекта и выбрав "Управление пакетами NuGet" в Visual Studio.

После того как NuGet загрузит новые пакеты и их зависимости, перестройте проект. Сборка может быть выполнена успешно — в зависимости от того, как структурирован ваш код. Если она выполнена, то теперь все готово.

Если выполнить сборку не удается, причина может быть в том, что вы реализовали некоторые интерфейсы SDK (например, для модульного тестирования), которые были изменены. Чтобы устранить эту проблему, необходимо реализовать новые методы, например `BeginCreateOrUpdateWithHttpMessagesAsync`.

После устранения ошибки сборки при необходимости можно внести изменения в приложение, чтобы воспользоваться преимуществами новых функциональных возможностей. Новые возможности в пакете SDK описаны в разделе [Новые возможности в версии 2](#WhatsNew).

## <a name="next-steps"></a>Дальнейшие шаги
Будем рады вашим отзывам о пакете SDK. Если возникли проблемы, опубликуйте свои вопросы в [Stack overflow](https://stackoverflow.com/questions/tagged/azure-cognitive-search?tab=Newest). При обнаружении ошибки можно зарегистрировать проблему в [репозитории GitHub пакета SDK .NET для Azure](https://github.com/Azure/azure-sdk-for-net/issues). Обязательно пометка названия проблемы на "[Поиск]".
