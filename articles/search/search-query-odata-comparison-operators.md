---
title: Ссылка оператора сравнения OData
titleSuffix: Azure Cognitive Search
description: Синтаксис и справочная документация для использования операторов сравнения OData (eq, ne, gt, lt, ge и le) в запросах Azure Cognitive Search.
manager: nitinme
author: brjohnstmsft
ms.author: brjohnst
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 11/04/2019
translation.priority.mt:
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pt-br
- ru-ru
- zh-cn
- zh-tw
ms.openlocfilehash: 62c8c93e07326e776cbe089042abc481544794bc
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74113221"
---
# <a name="odata-comparison-operators-in-azure-cognitive-search---eq-ne-gt-lt-ge-and-le"></a>Операторы сравнения OData в Azure `gt` `lt`Cognitive `ge`Search - `eq`, `ne`,`le`

Самая основная операция в [экспрессии фильтра OData](query-odata-filter-orderby-syntax.md) в Azure Cognitive Search — это сравнить поле с данным значением. Возможны два типа сравнения: сравнение равенства и сравнение диапазона. Вы можете использовать следующие операторы для сравнения поля с постоянным значением:

Операторы по вопросам равенства:

- `eq`: Проверьте, является ли поле **равным** постоянному значению
- `ne`: Проверьте, **не равен** ли поле постоянному значению

Операторы диапазона:

- `gt`: Проверьте, является ли поле **больше, чем** постоянное значение
- `lt`: Проверьте, **является** ли поле меньше постоянного значения
- `ge`: Проверьте, **является** ли поле больше или равно постоянному значению
- `le`: Проверьте, **является** ли поле меньше или равно постоянному значению

Операторы диапазона могут использоваться в сочетании с [логическими операторами](search-query-odata-logical-operators.md) для проверки того, находится ли поле в пределах определенного диапазона значений. Приведенные [примеры](#examples) можно позже в этой статье.

> [!NOTE]
> Если вы предпочитаете, вы можете поместить постоянное значение на левой стороне оператора и название поля на правой стороне. Для операторов диапазона значение сравнения обращено вспять. Например, если постоянное значение находится `gt` слева, будет проверить, является ли постоянное значение больше, чем поле. Операторы сравнения также могут сравнить результат функции, `geo.distance`например, со значением. Для функций Boolean, таких как `search.ismatch`сравнение результата `true` с или `false` необязательным.

## <a name="syntax"></a>Синтаксис

Следующие EBNF ([Расширенная форма Backus-Naur](https://en.wikipedia.org/wiki/Extended_Backus–Naur_form)) определяет грамматику выражения OData, использующее операторов сравнения.

<!-- Upload this EBNF using https://bottlecaps.de/rr/ui to create a downloadable railroad diagram. -->

```
comparison_expression ::=
    variable_or_function comparison_operator constant |
    constant comparison_operator variable_or_function

variable_or_function ::= variable | function_call

comparison_operator ::= 'gt' | 'lt' | 'ge' | 'le' | 'eq' | 'ne'
```

Также доступна интерактивная диаграмма синтаксиса:

> [!div class="nextstepaction"]
> [Диаграмма синтаксиса OData для когнитивного поиска Azure](https://azuresearch.github.io/odata-syntax-diagram/#comparison_expression)

> [!NOTE]
> Смотрите [ссылку синтаксиса выражения OData для Azure Cognitive Search](search-query-odata-syntax-reference.md) для полного EBNF.

Существует две формы сравнительных выражений. Разница между ними заключается в том, появляется ли константа на левой или правой стороне оператора. Выражение на другой стороне оператора должно быть **переменной** или вызовом функции. Переменной может быть либо полевое имя, либо переменная диапазона в случае [выражения лямбды.](search-query-odata-collection-operators.md)

## <a name="data-types-for-comparisons"></a>Типы данных для сравнения

Типы данных с обеих сторон оператора сравнения должны быть совместимы. Например, если левая сторона является `Edm.DateTimeOffset`полем типа, то правая сторона должна быть константой времени даты. Типы численных данных являются более гибкими. Вы можете сравнить переменные и функции любого численного типа с константами любого другого численного типа, с некоторыми ограничениями, как описано в следующей таблице.

| Тип переменной или функции | Постоянный тип значения | Ограничения |
| --- | --- | --- |
| `Edm.Double` | `Edm.Double` | Сравнение регулируется [специальными правилами `NaN` для](#special-case-nan) |
| `Edm.Double` | `Edm.Int64` | Констант `Edm.Double`преобразуется в , в результате потери точности для значений большой величины |
| `Edm.Double` | `Edm.Int32` | Недоступно |
| `Edm.Int64` | `Edm.Double` | Сравнение `NaN`с `-INF` `INF` |
| `Edm.Int64` | `Edm.Int64` | Недоступно |
| `Edm.Int64` | `Edm.Int32` | Констант `Edm.Int64` преобразуется до сравнения |
| `Edm.Int32` | `Edm.Double` | Сравнение `NaN`с `-INF` `INF` |
| `Edm.Int32` | `Edm.Int64` | Недоступно |
| `Edm.Int32` | `Edm.Int32` | Недоступно |

Для сравнений, которые не допускаются, `Edm.Int64` например, сравнивая поле типа с `NaN`API Azure Cognitive Search REST, возвращается ошибка "HTTP 400: Bad Request".

> [!IMPORTANT]
> Несмотря на то, что численные сравнения типов являются гибкими, мы настоятельно рекомендуем писать сравнения в фильтрах, так что постоянное значение имеет тот же тип данных, что и переменная или функция, с которой она сравнивается. Это особенно важно при смешивании значений плавающей точки и неосходной точки, где возможны неявные преобразования, которые теряют точность.

<a name="special-case-nan"></a>

### <a name="special-cases-for-null-and-nan"></a>Специальные `null` случаи для и`NaN`

При использовании операторов сравнения важно помнить, что все поля, не связанные `null`с коллекцией в Azure Cognitive Search, потенциально могут быть. В следующей таблице показаны все возможные результаты `null`для сравнения выражения, где обе стороны могут быть:

| Оператор | Результат, когда только поле или переменная`null` | Результат, когда только константа`null` | Результат, когда поле или переменная и константа`null` |
| --- | --- | --- | --- |
| `gt` | `false` | HTTP 400: Ошибка запроса | HTTP 400: Ошибка запроса |
| `lt` | `false` | HTTP 400: Ошибка запроса | HTTP 400: Ошибка запроса |
| `ge` | `false` | HTTP 400: Ошибка запроса | HTTP 400: Ошибка запроса |
| `le` | `false` | HTTP 400: Ошибка запроса | HTTP 400: Ошибка запроса |
| `eq` | `false` | `false` | `true` |
| `ne` | `true` | `true` | `false` |

Таким образом, `null` он равен только себе, и не меньше или больше, чем любое другое значение.

Если в индексе `Edm.Double` есть поля `NaN` типа и вы загружаете значения в эти поля, необходимо учитывать это при написании фильтров. Azure Cognitive Search реализует стандарт IEEE 754 для обработки `NaN` значений, и сравнения с такими значениями дают неочевидные результаты, как показано в следующей таблице.

| Оператор | Результат, когда по крайней мере одна операнд`NaN` |
| --- | --- |
| `gt` | `false` |
| `lt` | `false` |
| `ge` | `false` |
| `le` | `false` |
| `eq` | `false` |
| `ne` | `true` |

Таким образом, `NaN` не равна какой-либо стоимости, в том числе себя.

### <a name="comparing-geo-spatial-data"></a>Сравнение геопространственных данных

Вы не можете напрямую `Edm.GeographyPoint` сравнить поле типа с постоянным `geo.distance` значением, но вы можете использовать эту функцию. Эта функция возвращает значение `Edm.Double`типа, так что вы можете сравнить его с числовой константой для фильтрации на основе расстояния от постоянных геопространственных координат. Смотрите [примеры](#examples) ниже.

### <a name="comparing-string-data"></a>Сравнение данных строки

Строки можно сравнить в фильтрах для `eq` `ne` точных совпадений с помощью операторов и операторов. Эти сравнения чувствительны к случаям.

## <a name="examples"></a>Примеры

Документы матча, `Rating` где поле между 3 и 5, включительно:

    Rating ge 3 and Rating le 5

Документы матча, где `Location` поле находится менее чем в 2 километрах от заданной широты и долготы:

    geo.distance(Location, geography'POINT(-122.031577 47.578581)') lt 2.0

Документы матча, где `LastRenovationDate` поле больше или равен 1 января 2015 года, полночь UTC:

    LastRenovationDate ge 2015-01-01T00:00:00.000Z

Документы матча, `Details/Sku` где `null`поле не является:

    Details/Sku ne null

Матч документы для гостиниц, где по крайней мере один номер `Rooms/Type` имеет тип "Deluxe Room", где строка поля соответствует фильтру точно:

    Rooms/any(room: room/Type eq 'Deluxe Room')

## <a name="next-steps"></a>Дальнейшие действия  

- [Фильтры в когнитивном поиске Azure](search-filters.md)
- [Обзор языка выражения OData для когнитивного поиска Azure](query-odata-filter-orderby-syntax.md)
- [Ссылка синтаксиса выражения OData для когнитивного поиска Azure](search-query-odata-syntax-reference.md)
- [Поиск документов &#40;Azure Когнитивный поиск REST API&#41;](https://docs.microsoft.com/rest/api/searchservice/Search-Documents)
