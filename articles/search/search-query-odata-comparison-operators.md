---
title: Справочник по операторам сравнения OData - поиска Azure
description: Операторы сравнения OData, eq, ne, gt, lt, ge и le, в запросах поиска Azure.
ms.date: 06/13/2019
services: search
ms.service: search
ms.topic: conceptual
author: brjohnstmsft
ms.author: brjohnst
ms.manager: cgronlun
translation.priority.mt:
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pt-br
- ru-ru
- zh-cn
- zh-tw
ms.openlocfilehash: b51bf3d77283ae828f47fdb0355d2deb43f071a1
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "67079929"
---
# <a name="odata-comparison-operators-in-azure-search---eq-ne-gt-lt-ge-and-le"></a>Операторы сравнения OData в службе поиска Azure — `eq`, `ne`, `gt`, `lt`, `ge`, и `le`

Самый простой операции в [критерий фильтра OData](query-odata-filter-orderby-syntax.md) в службе поиска Azure заключается в сравнении поля для заданного значения. Возможны два типа сравнения — сравнение на равенство и сравнение диапазона. Для сравнения поле с постоянным значением можно использовать следующие операторы:

Операторы равенства:

- `eq`: Проверить, является ли поле **равным** постоянное значение
- `ne`: Проверить, является ли поле **не равно** постоянное значение

Операторы диапазона:

- `gt`: Проверить, является ли поле **больше, чем** постоянное значение
- `lt`: Проверить, является ли поле **меньше, чем** постоянное значение
- `ge`: Проверить, является ли поле **больше или равно** постоянное значение
- `le`: Проверить, является ли поле **меньше или равно** постоянное значение

Операторы диапазона можно использовать в сочетании с [логические операторы](search-query-odata-logical-operators.md) Чтобы проверить, является ли поле в определенный диапазон значений. См. в разделе [примеры](#examples) далее в этой статье.

> [!NOTE]
> При желании можно включить в левой части оператора и имя поля в правой части постоянное значение. Для операторов диапазона зеркально отображается значение сравнения. Например, если значение константы находится слева `gt` выполнял бы тестирование ли постоянное значение больше, чем поля. Можно также использовать операторы сравнения для сравнения результатов функции, такие как `geo.distance`, со значением. Для типа Boolean функции, такие как `search.ismatch`, результат сравнения `true` или `false` является необязательным.

## <a name="syntax"></a>Синтаксис

Следующие EBNF ([расширенная форма Бэкуса-Наура](https://en.wikipedia.org/wiki/Extended_Backus–Naur_form)) определяет грамматика выражения OData, который использует операторы сравнения.

<!-- Upload this EBNF using https://bottlecaps.de/rr/ui to create a downloadable railroad diagram. -->

```
comparison_expression ::=
    variable_or_function comparison_operator constant |
    constant comparison_operator variable_or_function

variable_or_function ::= variable | function_call

comparison_operator ::= 'gt' | 'lt' | 'ge' | 'le' | 'eq' | 'ne'
```

Также доступна схему интерактивный синтаксис:

> [!div class="nextstepaction"]
> [Диаграмма синтаксиса OData для службы поиска Azure](https://azuresearch.github.io/odata-syntax-diagram/#comparison_expression)

> [!NOTE]
> См. в разделе [Справочник по синтаксису выражений OData для службы поиска Azure](search-query-odata-syntax-reference.md) для завершения EBNF.

Существует две формы выражений сравнения. Единственное различие между ними является то, отображается ли константа на левом - или правой части оператора. Выражение на другой стороне оператора должно быть **переменной** или вызов функции. Переменная может быть именем поля или переменная диапазона в случае использования [лямбда-выражение](search-query-odata-collection-operators.md).

## <a name="data-types-for-comparisons"></a>Типы данных для сравнения

Типы данных с обеих сторон оператора сравнения, должны быть совместимы. Например, если поле типа является левой `Edm.DateTimeOffset`, а затем справа от оператора должно быть константой даты и времени. Числовые типы данных являются более гибкими. Вы можете сравнить переменные и функции любого числового типа с константами любого другого числового типа, с несколько ограничений, как описано в следующей таблице.

| Тип переменной или функции | Постоянное значение типа | Ограничения |
| --- | --- | --- |
| `Edm.Double` | `Edm.Double` | Сравнение осуществляется в соответствии [специальные правила для `NaN`](#special-case-nan) |
| `Edm.Double` | `Edm.Int64` | Константа преобразуется в `Edm.Double`, что может привести к потере точности для значения большие величины |
| `Edm.Double` | `Edm.Int32` | Недоступно |
| `Edm.Int64` | `Edm.Double` | Сравнение с `NaN`, `-INF`, или `INF` не допускаются |
| `Edm.Int64` | `Edm.Int64` | Недоступно |
| `Edm.Int64` | `Edm.Int32` | Константа преобразуется в `Edm.Int64` перед сравнением |
| `Edm.Int32` | `Edm.Double` | Сравнение с `NaN`, `-INF`, или `INF` не допускаются |
| `Edm.Int32` | `Edm.Int64` | Недоступно |
| `Edm.Int32` | `Edm.Int32` | Недоступно |

Для сравнения, которые не допускаются, такие как сравнение поля типа `Edm.Int64` для `NaN`, API REST службы поиска Azure вернет «HTTP 400: Ошибка недопустимый запрос».

> [!IMPORTANT]
> Несмотря на то, что сравнения числовых типов являются гибкими, мы настоятельно рекомендуем написание сравнений в фильтры, чтобы константа имеет тот же тип данных, как переменная или функция, к которому он сравнивается. Это особенно важно при Смешивание с плавающей запятой и целочисленных значений, когда возможны неявных преобразований, потеря точности.

<a name="special-case-nan"></a>

### <a name="special-cases-for-null-and-nan"></a>Специальные случаи для `null` и `NaN`

При использовании операторов сравнения, важно помнить, что все поля не являющихся коллекциями в службе поиска Azure может быть `null`. В следующей таблице приведены все возможные результаты для выражения сравнения, где может быть любой стороны `null`:

| Оператор | Результат, если только поля или переменной — `null` | Результат, если только константы `null` | Результат, если поле или переменная и константа `null` |
| --- | --- | --- | --- |
| `gt` | `false` | HTTP 400: Запрос ошибок | HTTP 400: Запрос ошибок |
| `lt` | `false` | HTTP 400: Запрос ошибок | HTTP 400: Запрос ошибок |
| `ge` | `false` | HTTP 400: Запрос ошибок | HTTP 400: Запрос ошибок |
| `le` | `false` | HTTP 400: Запрос ошибок | HTTP 400: Запрос ошибок |
| `eq` | `false` | `false` | `true` |
| `ne` | `true` | `true` | `false` |

Таким образом `null` равно только самому себе и не меньше или больше, чем любое другое значение.

Если в индексе есть поля типа `Edm.Double` и отправке `NaN` значения этим полям необходимо учесть, при написании фильтры. Поиск Azure реализует стандарт IEEE 754 для обработки `NaN` значения и сравнивать с таких значений результаты неочевидным, как показано в следующей таблице.

| Оператор | Результат, если хотя бы один операнд — `NaN` |
| --- | --- |
| `gt` | `false` |
| `lt` | `false` |
| `ge` | `false` |
| `le` | `false` |
| `eq` | `false` |
| `ne` | `true` |

Таким образом `NaN` не равно ни одному значению, включая его самого.

### <a name="comparing-geo-spatial-data"></a>Сравнение геопространственные данные

Невозможно непосредственно сравнить поле типа `Edm.GeographyPoint` с постоянным значением, но вы можете использовать `geo.distance` функции. Эта функция возвращает значение типа `Edm.Double`, чтобы можно было сравнить с числовой константы для фильтрации зависимости от расстояния от константы геопространственные координаты. См. в разделе [примеры](#examples) ниже.

### <a name="comparing-string-data"></a>Сравнение строковых данных

Сравнение строк может выполняться в фильтрах для точных совпадений с помощью `eq` и `ne` операторы. Эти при сравнении учитывается регистр.

## <a name="examples"></a>Примеры

Совпадение Документирует where `Rating` поля — от 3 до 5 включительно:

    Rating ge 3 and Rating le 5

Совпадение Документирует where `Location` поле является менее чем 2 километров от заданной широты и долготы:

    geo.distance(Location, geography'POINT(-122.031577 47.578581)') lt 2.0

Совпадение Документирует where `LastRenovationDate` поля больше или равно 1 января 2015 г., полночь (UTC):

    LastRenovationDate ge 2015-01-01T00:00:00.000Z

Совпадение Документирует where `Details/Sku` поле не `null`:

    Details/Sku ne null

Документы для гостиниц, где места по крайней мере один имеет тип «Deluxe комнаты», где строка `Rooms/Type` поля точно соответствует фильтру:

    Rooms/any(room: room/Type eq 'Deluxe Room')

## <a name="next-steps"></a>Дальнейшие действия  

- [Фильтры в службе "Поиск Azure"](search-filters.md)
- [Общие сведения о языках выражений OData для службы поиска Azure](query-odata-filter-orderby-syntax.md)
- [Справочник по синтаксису выражений OData для службы поиска Azure](search-query-odata-syntax-reference.md)
- [Search Documents (Azure Search Service REST API)](https://docs.microsoft.com/rest/api/searchservice/Search-Documents) (Поиск по документам (REST API службы "Поиск Azure"))
