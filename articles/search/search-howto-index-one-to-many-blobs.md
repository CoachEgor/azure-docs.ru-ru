---
title: Индексирование больших двоичных объектов, содержащий несколько поиска индексации документов из индексатор больших двоичных объектов Azure для полнотекстового поиска — поиска Azure
description: Обход содержимого больших двоичных объектов Azure для текстового содержимого, с помощью индексатора больших двоичных объектов поиска Azure. Каждый большой двоичный объект может содержать один или несколько документов в индекс поиска Azure.
ms.date: 05/02/2019
author: arv100kri
manager: briansmi
ms.author: arjagann
services: search
ms.service: search
ms.devlang: rest-api
ms.topic: conceptual
ms.custom: seofeb2018
ms.openlocfilehash: 628ced069c9d32c6e874c2e36a1e3b752c476003
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "65024652"
---
# <a name="indexing-blobs-producing-multiple-search-documents"></a>Индексирование BLOB-объектов, создания нескольких документов поиска
По умолчанию индексатор больших двоичных объектов будет обрабатывать содержимое большого двоичного объекта как один документ. Определенные **parsingMode** значения поддержки сценариев, где отдельных больших двоичных объектов может привести к несколько документов поиска. Различные типы **parsingMode** , позволяющие индексатор для извлечения более поиска документа из большого двоичного объекта являются:
+ `delimitedText`
+ `jsonArray`
+ `jsonLines`

## <a name="one-to-many-document-key"></a>Ключ документа один ко многим
Ключ документа однозначно идентифицируется каждого документа, который отображается в индекс службы поиска Azure. 

При указании режим без синтаксического анализа, и в том случае, если имеется не явное сопоставление для ключевого поля в индексе поиска Azure автоматически [сопоставляет](search-indexer-field-mappings.md) `metadata_storage_path` свойство в качестве ключа. Это сопоставление гарантирует, что каждый большой двоичный объект отображается как документ поиска distinct.

При использовании любой из перечисленных выше режимов синтаксического анализа, «многие» поиска документов, ключ документа исключительно на основе BLOB-объектов метаданных неподходящими сопоставляет один большой двоичный объект. Чтобы преодолеть это ограничение, поиск Azure может создать ключ документа «один ко многим» для каждой отдельной сущности, извлеченное из большого двоичного объекта. Это свойство называется `AzureSearch_DocumentKey` и добавляется к каждой отдельной сущности, извлеченное из большого двоичного объекта. Значение этого свойства гарантированно будет уникальным для каждой отдельной сущности _по BLOB-объектам_ и сущности отображаются как отдельные поиск документов.

По умолчанию, когда нет явного поля сопоставлений для поля ключа индекса не заданы `AzureSearch_DocumentKey` сопоставляется с его помощью `base64Encode` функции сопоставления полей.

## <a name="example"></a>Пример
Предположим, у вас есть определение индекса со следующими полями:
+ `id`
+ `temperature`
+ `pressure`
+ `timestamp`

И контейнер больших двоичных объектов имеет большие двоичные объекты со следующей структурой:

_Blob1.JSON_

    { "temperature": 100, "pressure": 100, "timestamp": "2019-02-13T00:00:00Z" }
    { "temperature" : 33, "pressure" : 30, "timestamp": "2019-02-14T00:00:00Z" }

_Blob2.JSON_

    { "temperature": 1, "pressure": 1, "timestamp": "2018-01-12T00:00:00Z" }
    { "temperature" : 120, "pressure" : 3, "timestamp": "2013-05-11T00:00:00Z" }

При создании индексатор и задайте **parsingMode** для `jsonLines` - без указания любого явные поля сопоставления для ключевого поля, следующее сопоставление применяется неявно
    
    {
        "sourceFieldName" : "AzureSearch_DocumentKey",
        "targetFieldName": "id",
        "mappingFunction": { "name" : "base64Encode" }
    }

Эта конфигурация приведет к в индекс поиска Azure, содержащий следующие сведения (сокращены для краткости код в кодировке base64)

| id | Температура | pressure | timestamp |
|----|-------------|----------|-----------|
| aHR0... YjEuanNvbjsx | 100 | 100 | 2019-02-13T00:00:00Z |
| aHR0... YjEuanNvbjsy | 33 | 30 | 2019-02-14T00:00:00Z |
| aHR0... YjIuanNvbjsx | 1 | 1 | 2018-01-12T00:00:00Z |
| aHR0... YjIuanNvbjsy | 120 | 3 | 2013-05-11T00:00:00Z |

## <a name="custom-field-mapping-for-index-key-field"></a>Сопоставление настраиваемого поля для поля ключа индекса

При условии, что то же определение индекса, как в предыдущем примере, предположим, что контейнер больших двоичных объектов имеет большие двоичные объекты со следующей структурой:

_Blob1.JSON_

    recordid, temperature, pressure, timestamp
    1, 100, 100,"2019-02-13T00:00:00Z" 
    2, 33, 30,"2019-02-14T00:00:00Z" 

_Blob2.JSON_

    recordid, temperature, pressure, timestamp
    1, 1, 1,"2018-01-12T00:00:00Z" 
    2, 120, 3,"2013-05-11T00:00:00Z" 

При создании индексатор с `delimitedText` **parsingMode**, он может естественным для настройки функции сопоставления полей для ключевого поля следующим образом:

    {
        "sourceFieldName" : "recordid",
        "targetFieldName": "id"
    }

Тем не менее, это сопоставление будет _не_ привести 4 документов в индекс, так как `recordid` поле не является уникальным _по BLOB-объектам_. Таким образом, мы рекомендуем сделать использование неявного поля сопоставления, применяются из `AzureSearch_DocumentKey` свойства к полю индекс ключа для синтаксического анализа режимов «один ко многим».

Если вы хотите настроить сопоставление явное поле, убедитесь, что _sourceField_ отличается для каждой отдельной сущности **через все большие двоичные объекты**.

> [!NOTE]
> Подход, используемый `AzureSearch_DocumentKey` обеспечения уникальности на извлеченные сущность изменяться, и поэтому не следует полагаться на это значение для потребностей вашего приложения.

## <a name="see-also"></a>См. также

+ [Индексаторы в службе поиска Azure](search-indexer-overview.md)
+ [Индексирование BLOB-объектов JSON с помощью индексатора BLOB-объектов службы поиска Azure](search-howto-index-json-blobs.md)
+ [Индексирование BLOB-объектов в формате CSV с помощью индексатора BLOB-объектов службы поиска Azure](search-howto-index-csv-blobs.md)
+ [Индексирование больших двоичных объектов JSON с помощью индексатора больших двоичных объектов поиска Azure](search-howto-index-json-blobs.md)

## <a name="NextSteps"></a>Дальнейшие действия
* Дополнительные сведения о службе поиска Azure см. на [этой странице](https://azure.microsoft.com/services/search/).