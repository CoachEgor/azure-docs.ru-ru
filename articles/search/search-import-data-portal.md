---
title: Импортируйте данные в поисковый индекс с помощью портала Azure
titleSuffix: Azure Cognitive Search
description: Узнайте, как использовать мастер импорта данных на портале Azure для сканирования данных Azure из Cosmos DB, хранилища BLOB-объектов, хранилища таблиц, Базы данных SQL и SQL Server на виртуальных машинах Azure.
author: HeidiSteen
manager: nitinme
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 0ed2bd7f1e03d8d5fa11f7e76010d087605f0fe1
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75460703"
---
# <a name="import-data-wizard-for-azure-cognitive-search"></a>Мастер данных импорта для когнитивного поиска Azure

Портал Azure предоставляет мастера **данных импорта** на панели мониторинга Azure Cognitive Search для прототипирования и загрузки индекса. В этой статье рассматриваются преимущества и ограничения использования мастера, входы и выходы, а также некоторая информация об использовании. Для практического руководства, пробираемого через мастера, используя встроенные данные образца, [см.](search-get-started-portal.md)

Операции, выполняемые этим мастером, включают:

1 - Подключитесь к поддерживаемому источнику данных Azure.

2 - Создайте схему индекса, выведенную на основе данных источника выборки.

3 - Дополнительно добавьте обогащения ИИ для извлечения или создания контента и структуры.

4 - Запуск мастера для создания объектов, импорта данных, установить расписание и другие параметры конфигурации.

Мастер выводит ряд объектов, сохраненных в поисковой службе, к которым можно получить доступ в programatically или в других инструментах.

## <a name="advantages-and-limitations"></a>Преимущества и ограничения

Прежде чем написать какой-либо код, вы можете использовать мастера для прототипирования и проверки концепции тестирования. Мастер подключается к внешним источникам данных, пробирует данные для создания исходного индекса, а затем импортирует данные по мере документирования JSON в индекс в Azure Cognitive Search. 

Выборка — это процесс, с помощью которого выводима схема индекса, и она имеет некоторые ограничения. При создании источника данных мастер выбирает образец документов, чтобы определить, какие столбцы являются частью источника данных. Не все файлы считываются, так как это потенциально может занять несколько часов для очень больших источников данных. При выборе документов метаданные исходного кода, такие как имя поля или тип, используются для создания сбора полей в схеме индекса. В зависимости от сложности исходных данных может потребоваться отсваить начальную схему для точности или расширить ее для полноты. Изменения можно внести в строку на странице определения индекса.

В целом преимущества использования мастера очевидны: пока требования выполняются, можно создать прототип запрашиваемого индекса в течение нескольких минут. Некоторые сложности индексирования, такие как предоставление данных в качестве документов JSON, обрабатываются мастером.

Известные ограничения суммируются следующим образом:

+ Мастер не поддерживает итерацию или повторное использование. Каждый проход через мастера создает новую конфигурацию индекса, навыков и индекса. Только источники данных могут сохраняться и повторно использоваться в мастере. Для отсечения или уточнения других объектов необходимо использовать аГИТ REST или .NET SDK для извлечения и изменения структур.

+ Исходное содержимое должно находиться в поддерживаемом источнике данных Azure.

+ Выборка — это подмножество исходных данных. Для больших источников данных мастер может пропускать поля. Возможно, потребуется расширить схему или исправить выведенные типы данных, если выборка недостаточна.

+ Обогащение ИИ, как обнажается на портале, ограничено несколькими встроенными навыками. 

+ [Хранилище знаний,](knowledge-store-concept-intro.md)которое может быть создано мастером, ограничено несколькими прогнозами по умолчанию. Если вы хотите сохранить обогащенные документы, созданные мастером, контейнер с каплями и таблицы поставляются с именами по умолчанию и структурой.

<a name="data-source-inputs"></a>

## <a name="data-source-input"></a>Ввод источника данных

Мастер **данных импорта** подключается к внешнему источнику данных, используя внутреннюю логику, предоставленную индексами Azure Cognitive Search, которые оснащены для отбора образцов источника, чтения метаданных, взлома документов для чтения содержимого и структуры и сериализации содержимого как JSON для последующего импорта в Azure Cognitive Search.

Импортировать можно только из одной таблицы, представления базы данных или эквивалентной структуры данных, однако структура может включать иерархические или вложенные подструктуры. Для получения дополнительной информации [см.](search-howto-complex-data-types.md)

Перед запуском мастера необходимо создать единую таблицу или представление, и она должна содержать содержимое. По понятным причинам нет смысла запускать разноску **данных импорта** в пустом источнике данных.

|  Выбор | Описание |
| ---------- | ----------- |
| **Существующий источник данных** |Если в поисковой службе уже определены индексы, возможно, есть существующее определение источника данных, которое можно использовать повторно. В Azure Cognitive Search объекты источника данных используются только индексаторами. Объект исходного кода данных можно создать программно или через мастера **данных Импорта** и повторно использовать их по мере необходимости.|
| **Примеры**| Azure Cognitive Search предоставляет два встроенных выборочных источника данных, которые используются в учебниках и quickstarts: база данных по недвижимости S'L и база данных отелей, размещенная на Cosmos DB. На основе примера Отелей можно провести быстрый запуск [портала Azure.](search-get-started-portal.md) |
| [**База данных SQL Azure**](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md) |Имя службы, учетные данные пользователя базы данных с разрешением на чтение и имя базы данных можно указать на странице или через строку подключения ADO.NET. Выберите параметр строки подключения, чтобы просмотреть или настроить свойства. <br/><br/>На странице необходимо указать таблицу или представление, содержащие набор строк. Этот параметр появляется после успешного подключения, предоставляя раскрывающийся список для выбора.|
| **Сервер СЗЛ на Azure VM** |Укажите полное доменное имя службы, идентификатор и пароль пользователя, а также базу данных в качестве строки подключения. Чтобы использовать этот источник данных, необходимо предварительно установить сертификат в локальном хранилище, которое шифрует подключение. Для получения инструкций можно [ознакомиться с подключением к Azure Cognitive Search.](search-howto-connecting-azure-sql-iaas-to-azure-search-using-indexers.md) <br/><br/>На странице необходимо указать таблицу или представление, содержащие набор строк. Этот параметр появляется после успешного подключения, предоставляя раскрывающийся список для выбора. |
| [**Azure Космос DB**](search-howto-index-cosmosdb.md)|Требования включают учетную запись, базу данных и коллекцию. Все документы в коллекции будут включены в индекс. Можно определить запрос, чтобы сгладить или отфильтровать строку, или оставить запрос пустым. В этом мастере не требуется запрос.|
| [**Хранение Azure Blob**](search-howto-indexing-azure-blob-storage.md) |Требования включают учетную запись хранения и контейнер. При необходимости, если имена больших двоичных объектов соответствует соглашению об именовании (с целью группирования), можно указать часть имени, которое соответствует имени виртуального каталога, в качестве имени папки в контейнере. Дополнительные сведения см. в статье [Индексирование документов в хранилище BLOB-объектов Azure с помощью службы поиска Azure](search-howto-indexing-azure-blob-storage.md). |
| [**Хранение таблиц ы Azure**](search-howto-indexing-azure-tables.md) |Требования включают учетную запись хранения и имя таблицы. Кроме того, можно указать запрос для получения подмножества таблиц. Дополнительные сведения см. в статье [Индексирование хранилища таблиц Azure с помощью поиска Azure](search-howto-indexing-azure-tables.md). |

## <a name="wizard-output"></a>Выход мастера

За кулисами мастер создает, настраивает и вызывает следующие объекты. После запуска мастера его выход можно найти на страницах портала. Страница Обзора службы содержит списки индексов, индексов, источников данных и навыков. Определения индекса можно посмотреть в полном объеме JSON на портале. Для других определений можно использовать [aPI REST](https://docs.microsoft.com/rest/api/searchservice/) для получения конкретных объектов.

| Объект | Описание | 
|--------|-------------|
| [Источник данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source)  | Сохраняет информацию о связи с исходной информацией, включая учетные данные. Объект источника данных используется исключительно с индексаторами. | 
| [Индекс](https://docs.microsoft.com/rest/api/searchservice/create-index) | Физическая структура данных, используемая для полного поиска текста и других запросов. | 
| [Набор навыков](https://docs.microsoft.com/rest/api/searchservice/create-skillset) | Полный набор инструкций по манипулированию, преобразованию и формированию содержимого, включая анализ и извлечение информации из файлов изображений. За исключением очень простых и ограниченных структур, он включает в себя ссылку на ресурс Cognitive Services, который обеспечивает обогащение. В качестве опционов, он может также содержать определение магазина знаний.  | 
| [Индексатор](https://docs.microsoft.com/rest/api/searchservice/create-indexer)  | Объект конфигурации, определяющий источник данных, целевой индекс, дополнительный набор навыков, факультативное расписание и дополнительные настройки конфигурации для передачи ошибок и кодирования базы-64. |


## <a name="how-to-start-the-wizard"></a>Как начать мастера

Мастер данных импорта запускается из панели команд на странице «Обзор службы».

1. На [портале Azure](https://portal.azure.com) откройте страницу службы поиска на панели мониторинга или [найдите свою службу](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Search%2FsearchServices) в списке служб.

2. На странице обзора службы вверху нажмите кнопку **Импорт данных**.

   ![Команда данных импорта на портале](./media/search-import-data-portal/import-data-cmd2.png "Запуск мастера импорта данных")

Вы также можете запустить **данные о импорте** из других служб Azure, включая Данные Azure Cosmos DB, базу данных Azure S'L и хранилище Azure Blob. Ищите **дополнительный когнитивный поиск Azure** в левой навигационной панели на странице обзора службы.

<a name="index-definition"></a>

## <a name="how-to-edit-or-finish-an-index-schema-in-the-wizard"></a>Как отсеять или закончить схему индекса в мастере

Мастер генерирует неполный индекс, который будет заселен документами, полученными из источника входных данных. Для создания функционального индекса убедитесь, что у вас заданы следующие элементы.

1. Полный ли список полей? Добавьте новые поля, которые пропускают выборку, и удалите все, что не добавляет ценности для поиска или не будет использоваться в [выражении фильтра](search-query-odata-filter.md) или [профиле скоринга.](index-add-scoring-profiles.md)

1. Подходит ли тип данных для входящих данных? Azure Cognitive Search поддерживает [типы данных модели данных сущности (EDM).](https://docs.microsoft.com/rest/api/searchservice/supported-data-types) Для данных Azure S'L имеется [диаграмма отображения,](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md#TypeMapping) в которую излагается эквивалентные значения. Для получения дополнительной информации [см.](search-indexer-field-mappings.md)

1. У вас есть одно поле, которое может служить *ключом?* Это поле должно быть Edm.string и должно однозначно идентифицировать документ. Для реляционных данных они могут быть отображены на основной ключ. Для капли, это может `metadata-storage-path`быть . Если значения полей включают пробелы или дефисы, необходимо задать **ключ шифрования Base-64** на этапе **создания индексатора** в разделе **Дополнительные параметры**, чтобы отключить проверку для этих символов.

1. Установите атрибуты для определения того, как это поле используется в индексе. 

   Не торопитесь с этим шагом, потому что атрибуты определяют физическое выражение полей в индексе. Если вы хотите изменить атрибуты позже, даже программно, вам почти всегда нужно будет упасть и перестроить индекс. Основные атрибуты, такие как **Searchable** и **Retrievable,** оказывают [незначительное влияние на хранение.](search-what-is-an-index.md#index-size) Включение фильтров и использование предложить увеличить требования к хранению. 
   
   + **Поиск позволяет** полнотекстовый поиск. Каждое поле, используемое в запросах произвольной формы или в выражениях запросов, должно иметь этот атрибут. Инвертированные индексы создаются для каждого поля с меткой **Доступный для поиска**.

   + **Retrievable** возвращает поле в результатах поиска. Каждое поле с содержимым для результатов поиска должно иметь этот атрибут. Настройка этого поля существенно не влияет на размер индекса.

   + **Filterable** позволяет ссылаться на поле в выражениях фильтра. Все поля, используемые в выражении **$filter**, должны иметь этот атрибут. Выражения фильтра используются для точных совпадений. Так как текстовые строки остаются без изменений, для работы с дословными выражениями в документах требуется дополнительное хранилище.

   + **Facetable** позволяет поле для граненой навигации. Добавить метку **Аспектируемый** можно только к полям, также отмеченным как **фильтруемые**.

   + **Sortable** позволяет использовать поле в сорте. Все поля, используемые в выражении **$Orderby**, должны иметь этот атрибут.

1. Вам нужен [лексический анализ?](search-lucene-query-architecture.md#stage-2-lexical-analysis) Для полей Edm.string, которые **можно найти,** можно установить **анализатор,** если требуется расширение индексирования и запроса на знание языка. 

   По умолчанию задано *Standard Lucene*, но вы можете выбрать *Microsoft English*, если нужно использовать анализатор Майкрософт для расширенной обработки лексики, например для разрешения неправильных форм существительных и глаголов. На портале можно указать только языковые анализаторы. Использование пользовательского анализатора или неязыкового анализатора, такого как Keyword, Pattern и т.д., должно быть сделано программно. Для получения дополнительной информации о анализаторов, [см.](search-language-support.md)

1. Нужна ли вам функция typeahead в виде автозаполнения или предлагаемых результатов? Выберите **флажок-предложение,** чтобы включить [предложения по запросу typeahead и автозаполнить](index-add-suggesters.md) на выбранных полях. Предложения добавляют к числу токенизированных терминов в индексе и, таким образом, потребляют больше памяти.


## <a name="next-steps"></a>Дальнейшие действия

Лучший способ понять преимущества и ограничения мастера, чтобы шаг через него. Следующий быстрый запуск проведет вас через каждый шаг.

> [!div class="nextstepaction"]
> [Создание индекса когнитивного поиска Azure с помощью портала Azure](search-get-started-portal.md)