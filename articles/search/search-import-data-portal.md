---
title: Импорт данных в индекс поиска в Поиске Azure с помощью портала Azure
description: Узнайте, как использовать мастер импорта данных на портале Azure для сканирования данных Azure из Cosmos DB, хранилища BLOB-объектов, хранилища таблиц, Базы данных SQL и SQL Server на виртуальных машинах Azure.
author: HeidiSteen
manager: nitinme
services: search
ms.service: search
ms.topic: conceptual
ms.date: 05/02/2019
ms.author: heidist
ms.custom: seodec2018
ms.openlocfilehash: e784cbf351bd062712e0fd66332799907a3bcae8
ms.sourcegitcommit: bb8e9f22db4b6f848c7db0ebdfc10e547779cccc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2019
ms.locfileid: "69648253"
---
# <a name="import-data-wizard-for-azure-search"></a>Мастер импорта данных для службы поиска Azure

Панель мониторинга службы поиска Azure на портале Azure содержит мастер **импорта данных** для загрузки данных в индекс. На внутреннем уровне мастер настраивает и вызывает *источник данных*, *индекс* и *индексатор*, выполняя множество шагов в процессе индексирования автоматически: 

* подключается к внешнему источнику данных в той же подписке Azure;
* при необходимости подключает оптическое распознавание символов или обработку естественной речи для извлечения текста из неструктурированных данных;
* создает индекс на основе выборки данных и метаданных из внешнего источника;
* сканирует источник данных на предмет доступного для поиска содержимого, выполняя сериализацию и загрузку документов JSON в индекс.

Мастер не подключается к заданному индексу и не запускает существующий индексатор, но в мастере можно настроить новый индекс или индексатор для поддержки требуемой структуры и поведения.

Новичок в Поиске Azure? Воспользуйтесь [кратким руководством по Импорт, индексирование и запрос с помощью средств](search-get-started-portal.md) портала для тестирования импорта и индексирования с помощью **импорта данных** и встроенного набора данных для реальных площадей.

## <a name="start-importing-data"></a>Начало импорта данных

В этом разделе объясняется, как запустить мастер, и приводится общее описание каждого шага.

1. На [портале Azure](https://portal.azure.com) откройте страницу службы поиска на панели мониторинга или [найдите свою службу](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Search%2FsearchServices) в списке служб.

2. На странице обзора службы вверху нажмите кнопку **Импорт данных**.

   ![Команда импорта данных на портале](./media/search-import-data-portal/import-data-cmd2.png "Запуск мастера импорта данных")

   > [!NOTE]
   > **Импорт данных** можно запустить из других служб Azure, включая Azure Cosmos DB, Базу данных SQL Azure и хранилище BLOB-объектов Azure. На панели навигации слева на странице обзора службы выберите **Добавить Поиск Azure**.

3. Откроется мастер **подключения к данным**, в котором можно выбрать внешний источник данных для использования в этом импорте. На этом этапе важно знать некоторые нюансы, поэтому обязательно прочитайте раздел [Входные данные из источника данных](#data-source-inputs).

   ![Мастер импорта данных на портале](./media/search-import-data-portal/import-data-wizard-startup.png "Мастер импорта данных для службы поиска Azure")

4. Далее, если вы хотите включить оптическое распознавание символов (OCR) текста в файлах изображений или анализ текста в неструктурированных данных, выберите **Add cognitive search** (Добавить когнитивный поиск). Для выполнения этой задачи применяются алгоритмы искусственного интеллекта Cognitive Services. Этот шаг делится на два этапа:
  
   Сначала [свяжите ресурс Cognitive Services](cognitive-search-attach-cognitive-services.md) с набором навыков Поиска Azure.
  
   Затем выберите, какие возможности искусственного интеллекта необходимо включить в набор навыков. Пошаговое руководство см. [здесь](cognitive-search-quickstart-blob.md).

   Если необходимо только импортировать данные, пропустите этот шаг и перейдите непосредственно к определению индекса.

5. Затем, в разделе **Настроить целевой индекс** можно принять или изменить схему индекса, представленную в мастере. Мастер определяет поля и типы данных во время выборки данных и чтения метаданных из внешнего источника данных.

   Для каждого поля [проверьте атрибуты индекса](#index-definition), чтобы активировать определенное поведение. Если атрибуты не выбраны, индекс будет невозможно использовать. 

6. Далее следует **создать индексатор**, который генерируется в этом мастере. Индексатор — это инструмент поиска, который извлекает доступные для поиска данные и метаданные из внешнего источника данных Azure. Выбрав источник данных, прикрепив наборы навыков (при необходимости) и индекс, вы настроили индексатор по мере выполнения каждого шага в мастере.

   Чтобы начать импорт, присвойте имя индексатору, а затем нажмите кнопку **Отправить**. 

Вы можете отслеживать индексирование на портале, выбрав индексатор в списке **Индексаторы**. По мере загрузки документов количество документов указанного вами индекса будет расти. Иногда требуется несколько минут, чтобы на странице портала появились последние обновления.

После загрузки первого документа по индексу можно будет выполнять запросы. Для этого можно использовать [Проводник поиска](search-explorer.md).

<a name="data-source-inputs"></a>

## <a name="data-source-inputs"></a>Входные данные из источника данных

Мастер **импорта данных** создает постоянный объект источника данных, передавая сведения о подключении к внешнему источнику данных. Объект источника данных используется исключительно с [индексаторами](search-indexer-overview.md) и может создаваться для следующих источников данных: 

* [Azure SQL;](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md)
* [Azure Cosmos DB](search-howto-index-cosmosdb.md)
* [Хранилище BLOB-объектов Azure](search-howto-indexing-azure-blob-storage.md)
* [Хранилище таблиц Azure](search-howto-indexing-azure-tables.md) (не поддерживается для конвейеров [когнитивного поиска](cognitive-search-concept-intro.md)).

Импорт можно выполнять только из одной таблицы, представления базы данных или эквивалентной структуры данных, однако структура может включать иерархические или вложенные структуры. Дополнительные сведения см. [в разделе как моделировать сложные типы](search-howto-complex-data-types.md).

Эту структуру данных следует создать перед запуском мастера, которая должна содержать содержимое. Не запускайте мастер **импорта данных** в пустом источнике данных.

|  Выбранное | Описание |
| ---------- | ----------- |
| **Существующий источник данных** |Если индексаторы в службе поиска уже указаны, вы можете выбрать определение существующего источника данных для другой операции импорта. В службе поиска Azure объекты источника данных используются только в индексаторах. Объект источника данных можно создавать программно или с помощью мастера **импорта данных**.|
| **Примеры**| Служба поиска Azure размещает бесплатную глобальную базу данных SQL Azure, которую можно использовать для получения сведений об импорте и запросе запросов в службе поиска Azure. См. [Краткое руководство. импорту, индексированию и отправке запросов с помощью средств портала](search-get-started-portal.md). |
| **база данных SQL Azure;** |Имя службы, учетные данные пользователя базы данных с разрешением на чтение и имя базы данных можно указать на странице или через строку подключения ADO.NET. Выберите параметр строки подключения, чтобы просмотреть или настроить свойства. <br/><br/>На странице необходимо указать таблицу или представление, содержащие набор строк. Этот параметр появляется после успешного подключения, предоставляя раскрывающийся список для выбора. |
| **SQL Server на виртуальной машине Azure** |Укажите полное доменное имя службы, идентификатор и пароль пользователя, а также базу данных в качестве строки подключения. Чтобы использовать этот источник данных, необходимо предварительно установить сертификат в локальном хранилище, которое шифрует подключение. Инструкции см. в статье [Настройка подключения из индексатора Поиска Azure к SQL Server на виртуальной машине Azure](search-howto-connecting-azure-sql-iaas-to-azure-search-using-indexers.md). <br/><br/>На странице необходимо указать таблицу или представление, содержащие набор строк. Этот параметр появляется после успешного подключения, предоставляя раскрывающийся список для выбора. |
| **База данных Cosmos** |Требования включают учетную запись, базу данных и коллекцию. Все документы в коллекции будут включены в индекс. Можно определить запрос для спрямления или фильтрации набора строк или оставить запрос пустым. В этом мастере запрос не требуется.|
| **Хранилище BLOB-объектов Azure** |Требования включают учетную запись хранения и контейнер. При необходимости, если имена больших двоичных объектов соответствует соглашению об именовании (с целью группирования), можно указать часть имени, которое соответствует имени виртуального каталога, в качестве имени папки в контейнере. Дополнительные сведения см. в статье [Индексирование документов в хранилище BLOB-объектов Azure с помощью службы поиска Azure](search-howto-indexing-azure-blob-storage.md). |
| **хранилище таблиц Azure** |Требования включают учетную запись хранения и имя таблицы. Кроме того, можно указать запрос для получения подмножества таблиц. Дополнительные сведения см. в статье [Индексирование хранилища таблиц Azure с помощью поиска Azure](search-howto-indexing-azure-tables.md). |


<a name="index-definition"></a>

## <a name="index-attributes"></a>Атрибуты индекса

Мастер **импорта данных** создает индекс, который будет заполняться документами, получаемыми из источника входных данных. 

Для создания функционального индекса убедитесь, что у вас заданы следующие элементы.

1. Одно поле необходимо обозначить как **ключ**, который используется для уникальной идентификации каждого документа. **Ключ** должен иметь тип *Edm.string*. 

   Если значения полей включают пробелы или дефисы, необходимо задать **ключ шифрования Base-64** на этапе **создания индексатора** в разделе **Дополнительные параметры**, чтобы отключить проверку для этих символов.

1. Укажите атрибуты индекса для каждого поля. Если атрибуты не выбраны, индекс остается пустым, за исключением обязательного поля ключа. Для каждого поля выберите один или несколько атрибутов.
   
   + **Доступный для получения**: возвращает поле в результатах поиска. Каждое поле с содержимым для результатов поиска должно иметь этот атрибут. Настройка этого поля существенно не влияет на размер индекса.
   + **Фильтруемый**: позволяет ссылаться на поле в выражениях фильтра. Все поля, используемые в выражении **$filter**, должны иметь этот атрибут. Выражения фильтра используются для точных совпадений. Так как текстовые строки остаются без изменений, для работы с дословными выражениями в документах требуется дополнительное хранилище.
   + **Доступный для поиска**: позволяет использовать полнотекстовый поиск. Каждое поле, используемое в запросах произвольной формы или в выражениях запросов, должно иметь этот атрибут. Инвертированные индексы создаются для каждого поля с меткой **Доступный для поиска**.

1. При необходимости задайте атрибуты, указанные ниже:

   + **Сортируемый**: позволяет использовать поле при сортировке. Все поля, используемые в выражении **$Orderby**, должны иметь этот атрибут.
   + **Аспектируемый**: позволяет использовать поле в фасетной навигации. Добавить метку **Аспектируемый** можно только к полям, также отмеченным как **фильтруемые**.

1. Задайте **анализатор**, если требуется индексирование и выполнение запросов с расширенными возможностями анализа языка. По умолчанию задано *Standard Lucene*, но вы можете выбрать *Microsoft English*, если нужно использовать анализатор Майкрософт для расширенной обработки лексики, например для разрешения неправильных форм существительных и глаголов.

   + Выберите **Доступный для поиска**, чтобы включить список **анализатора**.
   + Выберите анализатор из списка. 
   
   В настоящее время можно указать только языковые анализаторы. Чтобы использовать пользовательский или неязыковой анализатор, например ключевое слово, шаблон и т. д., требуется код. Дополнительные сведения об анализаторах см. в статье [Создание индекса для многоязычных документов в поиске Azure](search-language-support.md).

1. Установите флажок **Средство подбора**, чтобы включить предложения упреждающих запросов для выбранных полей.


## <a name="next-steps"></a>Следующие шаги
Воспользуйтесь следующими ссылками, чтобы получить дополнительную информацию об индексаторах.

* [Индексирование базы данных SQL Azure](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md)
* [Подключение DocumentDB к службе поиска Azure с помощью индексаторов](search-howto-index-cosmosdb.md)
* [Индексирование документов в хранилище BLOB-объектов Azure с помощью службы поиска Azure](search-howto-indexing-azure-blob-storage.md)
* [Индексирование хранилища таблиц Azure с помощью поиска Azure](search-howto-indexing-azure-tables.md)