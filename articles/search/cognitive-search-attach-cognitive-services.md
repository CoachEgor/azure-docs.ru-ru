---
title: Подключение ресурса Cognitive Services с набором навыков в службе "Поиск Azure"
description: Указаниям по подключению подписки все в одном Cognitive Services cognitive обогащение конвейер, в службе поиска Azure.
manager: cgronlun
author: LuisCabrer
services: search
ms.service: search
ms.devlang: NA
ms.topic: conceptual
ms.date: 05/20/2019
ms.author: luisca
ms.custom: seodec2018
ms.openlocfilehash: ffce8a2bd8a04e73acdeac037be0b10ba1a9a887
ms.sourcegitcommit: 2e4b99023ecaf2ea3d6d3604da068d04682a8c2d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/09/2019
ms.locfileid: "67672389"
---
# <a name="attach-a-cognitive-services-resource-with-a-skillset-in-azure-search"></a>Подключение ресурса Cognitive Services с набором навыков в службе "Поиск Azure" 

Диск алгоритмов искусственного Интеллекта [cognitive индексирования конвейеры](cognitive-search-concept-intro.md) для обогащения документа в службе поиска Azure. Эти алгоритмы основаны на ресурсы Azure Cognitive Services, включая [компьютерного](https://azure.microsoft.com/services/cognitive-services/computer-vision/) для анализа изображений и оптическое распознавание символов (OCR) и [текстовая аналитика](https://azure.microsoft.com/services/cognitive-services/text-analytics/) для распознавания сущностей Извлечение ключевых фраз и другие усовершенствования. Как используется службой поиска Azure для целей обогащение документа, алгоритмы помещаются внутри *навыков*, помещенных в *набор навыков*и указанные *индексатора* во время индексирование.

Ограниченное число документов можно обогатить бесплатно. Или вы можете подключить оплачиваемых ресурса Cognitive Services для *набор навыков* для крупных и более частыми рабочих нагрузок. В этой статье вы узнаете, как подключить оплачиваемых ресурса Cognitive Services для обогащения документов во время поиска Azure [индексирования](search-what-is-an-index.md).

> [!NOTE]
> Выставление счетов включают вызовы API-интерфейсов Cognitive Services и image извлечения как часть этапа открытие документов в службе поиска Azure. Не взимается плата для извлечение текста из документов или навыков, которые не вызывая службы Cognitive Services.
>
> Выполнение оплаты навыков происходит на [Cognitive Services оплаты как то перейти цена](https://azure.microsoft.com/pricing/details/cognitive-services/). Цены для извлечения изображения, см. в разделе [странице с ценами на службу поиска Azure](https://go.microsoft.com/fwlink/?linkid=2042400).

## <a name="same-region-requirement"></a>Требование на том же регионе

Мы требуют наличия службы поиска Azure и Azure Cognitive Services в одном регионе. В противном случае вы получите это сообщение во время выполнения: `"Provided key is not a valid CognitiveServices type key for the region of your search service."` 

Нет способа для перемещения службы в разных регионах. Если вы получаете эту ошибку, следует создать новый ресурс Cognitive Services в том же регионе, что службы поиска Azure.

## <a name="use-free-resources"></a>Использование бесплатных ресурсов

Чтобы выполнить упражнения краткого руководства и руководства по когнитивному поиску, вы можете использовать ограниченный бесплатный вариант обработки.

Бесплатный (ограниченный усовершенствования) ресурсы ограничены 20 документов в день по подписке.

1. Откройте мастер импорта данных:

   ![Откройте мастер импорта данных](media/search-get-started-portal/import-data-cmd.png "открыть мастер импорта данных")

1. Выбор источника данных и по-прежнему **добавить когнитивный поиск (необязательно)** . Пошаговое руководство по этого мастера, см. в разделе [импорта, индекса и запросе с помощью средств портала](search-get-started-portal.md).

1. Разверните **присоединить Cognitive Services** , а затем выберите **Free (ограниченный усовершенствования)** :

   ![Развернуть раздел присоединения Cognitive Services](./media/cognitive-search-attach-cognitive-services/attach1.png "раздел расширен присоединение Cognitive Services")

1. Перейдите к следующему шагу, **добавьте усовершенствования**. Описание навыки, которые доступны на портале, см. в разделе [шаг 2: Добавить когнитивные навыки](cognitive-search-quickstart-blob.md#create-the-enrichment-pipeline) в кратком руководстве когнитивного поиска.

## <a name="use-billable-resources"></a>Использование ресурсов, которые подлежат оплате

Для рабочих нагрузок, которые создают более чем 20 усовершенствования в день убедитесь, что присоединение оплачиваемых ресурса Cognitive Services. Мы рекомендуем всегда присоединить оплачиваемых ресурса Cognitive Services, даже если вы никогда не требуется вызывать API-интерфейсы Cognitive Services. Подключение ресурса переопределяет ежедневного ограничения.

Плата взимается только за навыки, которые вызывают API-интерфейсов Cognitive Services. Не взимается плата за [пользовательские методики](cognitive-search-create-custom-skill-example.md), или навыки, такие как [слияния текст](cognitive-search-skill-textmerger.md), [текст разделителя](cognitive-search-skill-textsplit.md), и [shaper](cognitive-search-skill-shaper.md), которой не на основе API.

1. Откройте мастер импорта данных, Выбор источника данных и по-прежнему **добавить когнитивный поиск (необязательно)** .

1. Разверните **присоединить Cognitive Services** , а затем выберите **создать новый ресурс Cognitive Services**. Откроется новая вкладка, позволяют создавать ресурс:

   ![Создание ресурса Cognitive Services](./media/cognitive-search-attach-cognitive-services/cog-services-create.png "Создание ресурса Cognitive Services")

1. В **расположение** выберите регион, где находится ваша служба поиска Azure. Убедитесь в том, что использовать этот регион для повышения производительности. Также с помощью этой области аннулирует расходов исходящей пропускной способности между регионами.

1. В **Ценовая** выберите **S0** для получения коллекции все в одном компонентам Cognitive Services, включая концепции и функций языка, которые поддерживают стандартные навыки, используемые службой поиска Azure.

   Для уровня S0, можно найти курсы для конкретных рабочих нагрузок на [странице с ценами на Cognitive Services](https://azure.microsoft.com/pricing/details/cognitive-services/).
  
   + В **выберите предлагают** списке, убедитесь, что **Cognitive Services** выбран.
   + В разделе **языка** функции, ставки за **Text Analytics стандартный** применить индексирование искусственного Интеллекта.
   + В разделе **концепции** функции, ставки за **компьютере S1 концепции** применить.

1. Выберите **создать** подготовить новый ресурс Cognitive Services.

1. Вернуться к предыдущей вкладке, которая содержит мастер импорта данных. Выберите **обновить** для отображения ресурса Cognitive Services и затем выберите ресурс:

   ![Выберите ресурс Cognitive Services](./media/cognitive-search-attach-cognitive-services/attach2.png "выберите ресурс Cognitive Services")

1. Разверните **добавьте усовершенствования** раздел для выбора конкретных когнитивные навыки, которые вы хотите запустить на данные. Выполните оставшиеся шаги мастера. Описание навыки, которые доступны на портале, см. в разделе [шаг 2: Добавить когнитивные навыки](cognitive-search-quickstart-blob.md#create-the-enrichment-pipeline) в кратком руководстве когнитивного поиска.

## <a name="attach-an-existing-skillset-to-a-cognitive-services-resource"></a>Присоединение ресурса Cognitive Services с существующим набором навыков

Если вы уже имеете существующий набор навыков, вы можете присоединить его к новому или другому ресурсу Cognitive Services.

1. На **Общие сведения о службе** выберите **навыков**:

   ![Вкладка наборов навыков](./media/cognitive-search-attach-cognitive-services/attach-existing1.png "Вкладка наборов навыков")

1. Выберите имя набора навыков и затем выбрать имеющийся или создайте новую. Для подтверждения изменений нажмите кнопку **OK**.

   ![Список набора навыков ресурса](./media/cognitive-search-attach-cognitive-services/attach-existing2.png "Список набора навыков ресурса")

   Помните, что **Free (ограниченный усовершенствования)** параметр ограничение в 20 документов ежедневно, и который можно использовать **создать новый ресурс Cognitive Services** для подготовки ресурса оплаты. Создав новый ресурс, щелкните **Обновить**, чтобы обновить список ресурсов Cognitive Services, и выберите ресурс.

## <a name="attach-cognitive-services-programmatically"></a>Присоединение Cognitive Services программным способом

При определении набора навыков программным способом добавьте раздел `cognitiveServices` к набору навыков. В этом разделе включите ключ ресурса Cognitive Services, который необходимо связать с квалификации. Помните, что ресурс должен быть в том же регионе, что и ресурс службы поиска Azure. Также включите `@odata.type` и присвойте ему значение `#Microsoft.Azure.Search.CognitiveServicesByKey`.

Этот шаблон приведен в примере ниже. Обратите внимание, что `cognitiveServices` в конце определения.

```http
PUT https://[servicename].search.windows.net/skillsets/[skillset name]?api-version=2019-05-06
api-key: [admin key]
Content-Type: application/json
```
```json
{
    "name": "skillset name",
    "skills": 
    [
      {
        "@odata.type": "#Microsoft.Skills.Text.EntityRecognitionSkill",
        "categories": [ "Organization" ],
        "defaultLanguageCode": "en",
        "inputs": [
          {
            "name": "text", "source": "/document/content"
          }
        ],
        "outputs": [
          {
            "name": "organizations", "targetName": "organizations"
          }
        ]
      }
    ],
    "cognitiveServices": {
        "@odata.type": "#Microsoft.Azure.Search.CognitiveServicesByKey",
        "description": "mycogsvcs",
        "key": "<your key goes here>"
    }
}
```

## <a name="example-estimate-costs"></a>Пример: Расчет стоимости

Для оценки затрат, связанных с cognitive индексирования поиска, начните с представление о том, как выглядит документ среднее, чтобы можно было запустить некоторые числа. Например может приблизительное:

+ 1000 документов PDF.
+ Шесть страниц каждого.
+ Один образ на одной странице (6 000 изображений).
+ 3000 символами на страницу.

Предположим, конвейером, который состоит из открытие документов каждый PDF, изображение и текст извлечения, оптическое распознавание символов (OCR), изображений и распознавание сущностей организаций.

В этой статье указаны гипотетической. Они используются для иллюстрации процесса оценки. Стоимость может быть ниже. Фактическая стоимость транзакций, см. в разделе см. в разделе [цены на Cognitive Services](https://azure.microsoft.com/pricing/details/cognitive-services).

1. Для открытия документа с содержимым в виде текста и изображения извлечение текста в настоящее время предоставляется бесплатно. 6000 образов давайте предположим, 1 долл. США для каждой 1000 изображений, которые извлечены. Это стоимость $6.00 для выполнения этого шага.

2. Для OCR 6000 образов на английском языке когнитивные навыки OCR используют наилучший алгоритм (DescribeText). При условии что 1000 изображений для анализа будет стоить 2,50 долл., вы выплатите 15,00 долл. за этот шаг.

3. Для извлечения сущностей потребовалось бы всего три текстовых записей на одной странице. (каждая запись — 1000 символов). Три текстовых записей на страницу, умноженное на 6 000 страниц равно 18 000 текстовых записей. При тарифе 2,00 долл. за 1000 текстовых записей этот шаг будет стоить 36,00 долл.

Окончательная сборка, оплата составит около 57,00 долларов на прием 1000 документов PDF-ФАЙЛ этого типа с помощью описанного набор навыков.

## <a name="next-steps"></a>Следующие шаги
+ [Цены на "Поиск Azure"](https://azure.microsoft.com/pricing/details/search/)
+ [Определение набора навыков](cognitive-search-defining-skillset.md)
+ [Создание набора навыков (REST)](https://docs.microsoft.com/rest/api/searchservice/create-skillset)
+ [Сопоставление обогащенных полей](cognitive-search-output-field-mapping.md)
