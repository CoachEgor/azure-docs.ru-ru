---
title: Добавление возможности полнотекстового поиска в хранилище BLOB-объектов Azure
titleSuffix: Azure Cognitive Search
description: Извлекайте содержимое и добавляйте структуру в BLOB-объектов Azure при создании индекса полнотекстового поиска в Когнитивном поиске Azure.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 72d00b70cf3568466715668aa441ee295614c740
ms.sourcegitcommit: 62e1884457b64fd798da8ada59dbf623ef27fe97
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2020
ms.locfileid: "88935251"
---
# <a name="add-full-text-search-to-azure-blob-data-using-azure-cognitive-search"></a>Добавление возможности полнотекстового поиска в данные BLOB-объектов Azure с помощью Когнитивного поиска Azure

Поиск различных типов содержимого в хранилище BLOB-объектов Azure может представлять собой трудную для решения задачу. Тем не менее с помощью [Когнитивного поиска Azure](search-what-is-azure-search.md) можно искать и индексировать содержимое BLOB-объектов несколькими щелчками мыши. Когнитивный поиск Azure поддерживает встроенную интеграцию для индексации содержимого хранилища BLOB-объектов с помощью [*индексатора BLOB-объектов*](search-howto-indexing-azure-blob-storage.md), благодаря которому индексация выполняется с учетом источников данных.

## <a name="what-it-means-to-add-full-text-search-to-blob-data"></a>Значение добавления полнотекстового поиска в данные BLOB-объектов

Когнитивный поиск Azure — это облачная служба поиска, которая предоставляет обработчики индексации и запросов, работающие с определяемыми пользователем индексами, размещенными в службе поиска. Совместное размещение доступного для поиска содержимого и обработчика запросов в облаке необходимо для обеспечения той скорости возврата результатов, которую пользователи привыкли ожидать от поисковых запросов.

Когнитивный поиск Azure интегрируется с хранилищем BLOB-объектов Azure на уровне индексации, импортируя содержимое BLOB-объекта в виде поисковых документов, индексируемых в *инвертированные индексы* и другие структуры запросов, которые поддерживают текстовые запросы в свободной форме и выражения фильтров. Так как содержимое BLOB-объекта индексируется в индекс поиска, при доступе к такому содержимому может использоваться весь диапазон функций запросов в Когнитивном поиске Azure.

После создания и заполнения индекс существует независимо от контейнера BLOB-объекта. Однако для обновления индекса в соответствии с изменениями в базовом контейнере можно повторно запускать операции индексирования. Обнаружить изменения можно с помощью сведений метки времени на отдельных BLOB-объектах. В качестве механизма обновления можно выбрать либо запланированное выполнение, либо индексацию по требованию.

Входными данными являются BLOB-объекты в одном контейнере в хранилище BLOB-объектов Azure. Содержимое BLOB-объектов может иметь вид практически любых текстовых данных. Если BLOB-объекты содержат изображения, в [индексацию BLOB-объектов можно добавить обогащение с помощью ИИ](search-blob-ai-integration.md), чтобы создавать и извлекать текст из изображений.

Выходными данными всегда является индекс Когнитивного поиска Azure, используемый для быстрого поиска, извлечения и исследования текста в клиентских приложениях. Между ними находится сама архитектура конвейера индексации. В основе конвейера лежит компонент *индексатора*, который рассматривается далее в этой статье.

## <a name="start-with-services"></a>Начало работы со службами

Вам потребуется Когнитивный поиск Azure и хранилище BLOB-объектов Azure. В хранилище BLOB-объектов должен быть контейнер, предоставляющий исходное содержимое.

Работу можно начать прямо на странице портала учетной записи хранения. На странице навигации слева в разделе **Служба BLOB-объектов** щелкните **Добавить Когнитивный поиск Azure**, чтобы создать новую службу или выбрать существующую. 

После добавления Когнитивного поиска Azure в учетную запись хранения выполняется стандартный процесс индексации данных BLOB-объекта. Рекомендуется воспользоваться мастером **импорта данных** в Когнитивном поиске Azure или вызвать REST API с помощью такого средства, как Postman. Процедура вызова REST API в Postman описана в следующей статье: [Руководство по индексированию и поиску больших двоичных объектов JSON в Когнитивном поиске Azure](search-semi-structured-data.md). 

## <a name="use-a-blob-indexer"></a>Использование индексатора BLOB-объектов

*Индексатор* — это подслужба, которая поддерживает источники данных и располагает внутренней логикой для выборки данных, считывания данных метаданных, извлечения данных и сериализации данных из собственных форматов в документы JSON для последующего импорта. 

BLOB-объекты в службе хранилища Azure индексируются с помощью [индексатора хранилища BLOB-объектов Когнитивного поиска Azure](search-howto-indexing-azure-blob-storage.md). Этот индексатор можно вызвать с помощью мастера **импорта данных**, REST API или пакета SDK для .NET. В коде этот индексатор используется путем задания типа и предоставления сведений о подключениях, включающих учетную запись хранения Azure с контейнером BLOB-объекта. Можно сформировать подмножество BLOB-объектов, создав виртуальный каталог, который затем можно передать в качестве параметра, или выполнив фильтрацию по расширению типа файла.

Индексатор распознает документ и открывает BLOB-объект для проверки содержимого. Это первый шаг, который выполняется в конвейере после подключения к источнику данных. На этом этапе обнаруживаются документы в формате PDF, документы Office и другие типы содержимого. За распознавание документов с извлечением текста плата не взимается. Если BLOB-объекты содержат изображения, изображения игнорируются, пока не будет [добавлено обогащение с помощью ИИ](search-blob-ai-integration.md). Стандартное индексирование применяется только к текстовому содержимому.

Индексатор BLOB-объектов поставляется с параметрами конфигурации и поддерживает отслеживание изменений, если базовые данные предоставляют достаточно информации. Дополнительные сведения об основных функциональных возможностях см. в статье об [индексации BLOB-объектов с помощью Когнитивного поиска Azure](search-howto-indexing-azure-blob-storage.md).

### <a name="supported-content-types"></a>Поддерживаемые типы содержимого

Запустив индексатор BLOB-объектов в контейнере, с помощью одного запроса можно извлекать текст и метаданные из следующих типов содержимого.

[!INCLUDE [search-blob-data-sources](../../includes/search-blob-data-sources.md)]

### <a name="indexing-blob-metadata"></a>Индексация метаданных BLOB-объектов

Распространенный сценарий, позволяющий с легкостью сортировать большие двоичные объекты с содержимым любого типа — это индексация пользовательских метаданных и системных свойств каждого BLOB-объекта. Таким образом, независимо от типа документа, хранящегося в индексе в службе поиска, индексируются сведения обо всех BLOB-объектах. Используя новый индекс, можно перейти к сортировке, фильтрации и использованию аспектов по всему содержимому хранилища BLOB-объектов.

> [!NOTE]
> Теги индекса BLOB-объектов изначально индексируются службой хранилища BLOB-объектов и предоставляются для выполнения запросов. Если для атрибутов ключа и значения BLOB-объектов требуются возможности индексации и фильтрации, то вместо метаданных следует использовать теги индекса BLOB-объектов.
>
> Дополнительные сведения об индексе BLOB-объектов см. в статье об [использовании индекса BLOB-объектов для поиска данных и управлении ими в хранилище BLOB-объектов Azure](../storage/blobs/storage-manage-find-blobs.md).

### <a name="indexing-json-blobs"></a>Индексация BLOB-объектов, содержащих JSON
Индексаторы можно настроить для извлечения структурированного содержимого BLOB-объектов, содержащих JSON. Индексатор может считывать большие BLOB-объекты с JSON и разбивать структурированное содержимое на соответствующие поля документа. Индексаторы могут также считывать BLOB-объекты, которые содержат массив объектов JSON, и сопоставлять каждый элемент такого массива с отдельным документом. Можно задать режим анализа, который будет влиять на тип объекта JSON, создаваемого индексатором.

## <a name="search-blob-content-in-a-search-index"></a>Поиск содержимого BLOB-объекта в индексе поиска 

Выходными данными индексации является индекс поиска, используемый для интерактивного исследования с использованием произвольного текста и отфильтрованных запросов в клиентском приложении. Для первоначального исследования и проверки содержимого рекомендуется начать с [проводника поиска](search-explorer.md) на портале, который поможет изучить структуру документа. В проводнике поиска можно использовать [простой синтаксис запросов](query-simple-syntax.md), [полный синтаксис запросов](query-lucene-syntax.md) и [синтаксис выражений фильтра](query-odata-filter-orderby-syntax.md).

Более комплексное и окончательное решение заключается в сборе входных данных запроса и представления ответа в виде результатов поиска в клиентском приложении. Сведения о создании приложения поиска приводятся в следующем руководстве по C#: [Создание первого приложения поиска с помощью пакета SDK для .NET](tutorial-csharp-create-first-app.md).

## <a name="next-steps"></a>Дальнейшие действия

+ [Передача, скачивание и составление списка больших двоичных объектов с помощью портала Azure (хранилище BLOB-объектов)](../storage/blobs/storage-quickstart-blobs-portal.md)
+ [Настройка индексатора больших двоичных объектов (Когнитивный поиск Azure)](search-howto-indexing-azure-blob-storage.md)