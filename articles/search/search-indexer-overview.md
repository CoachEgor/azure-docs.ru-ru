---
title: Индексаторы для сканирования источников данных во время индексирования в службе "Поиск Azure"
description: Обход содержимого базы данных Azure SQL, Azure Cosmos DB или службы хранилища Azure для извлечения доступных для поиска данных и заполнения индекса службы поиска Azure.
author: HeidiSteen
manager: cgronlun
services: search
ms.service: search
ms.devlang: na
ms.topic: conceptual
ms.date: 03/02/2019
ms.author: heidist
ms.custom: seodec2018
ms.openlocfilehash: b485b6b7f6ddbdb45d3ca6170c29a9af3c5b63dc
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60321933"
---
# <a name="indexers-in-azure-search"></a>Индексаторы в службе поиска Azure

*Индексатор* в службе "Поиск Azure" — это программа-обходчик, которая извлекает доступные для поиска данные и метаданные из внешнего источника данных Azure, а затем заполняет индекс, сопоставляя поля в индексе и источнике данных. Такой подход иногда называют «модель pull», так как запрос данных службой без необходимости писать код, который добавляет данные в индекс.

Индексаторы основаны на типах источников данных или платформами, при этом отдельные индексаторы для SQL Server в Azure, Cosmos DB, хранилище таблиц Azure и хранилище BLOB-объектов. Индексаторы хранилища BLOB-объектов иметь дополнительные свойства для типов содержимого большого двоичного объекта.

Индексатор можно использовать как отдельное средство для приема данных. Кроме того, можно использовать комбинацию методов, предусматривающих использование индексатора для загрузки только некоторых полей в индексе.

Вы можете запускать индексаторы по требованию или при регулярном обновлении данных, выполняемом каждые пятнадцать минут. Более частые обновления требуют использования модели отправки, выполняющей одновременное обновление данных в службе поиска Azure и источнике внешних данных.

## <a name="approaches-for-creating-and-managing-indexers"></a>Способы создания индексаторов и управления ими

Далее представлены способы создания индексаторов и управления ими.

* [Портал > Мастер импорта данных](search-import-data-portal.md)
* [API REST службы](https://docs.microsoft.com/rest/api/searchservice/Indexer-operations)
* [ПАКЕТ SDK .NET](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.iindexersoperations)

Изначально новый индексатор объявляется в качестве предварительной версии функции. Предварительные версии функций добавляют в API (REST и .NET), а затем после выхода общедоступной версии интегрируются на портале. При оценке нового индексатора следует запланировать написание кода.

## <a name="permissions"></a>Разрешения

Все операции, связанные с индексаторы, включая запросы GET для состояния, так и требуют [ключ api администратора](search-security-api-keys.md). 

<a name="supported-data-sources"></a>

## <a name="supported-data-sources"></a>Поддерживаемые источники данных

Данные о сканировании, выполненном индексаторами, хранятся в Azure.

* [Azure SQL;](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md)
* [Azure Cosmos DB](search-howto-index-cosmosdb.md)
* [Хранилище BLOB-объектов Azure](search-howto-indexing-azure-blob-storage.md)
* [хранилище таблиц Azure](search-howto-indexing-azure-tables.md) 

> [!Note]
> Хранилище таблиц Azure не поддерживается для [когнитивный поиск](cognitive-search-concept-intro.md).
>

## <a name="basic-configuration-steps"></a>Основные этапы настройки
В индексаторах реализованы уникальные функции для работы с источниками данных. Поэтому тип индексатора будет определять особенности настройки источника данных или индексатора. Тем не менее всем индексаторам присущи сходные структура и требования. Ниже описаны действия, общие для всех индексаторов.

### <a name="step-1-create-a-data-source"></a>Шаг 1. Создание источника данных
Индексатор, который получает соединение с источником данных из *источника данных* объекта. Определение источника данных предоставляет строку подключения и, возможно, учетные данные. Чтобы создать ресурс, вызовите REST API для [создания источника данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source) или [класс DataSource](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.models.datasource).

Источники данных настраиваются и управляются независимо от индексаторов, которые их используют. Это означает, что источник данных может использоваться несколькими индексаторами для одновременной загрузки нескольких индексов.

### <a name="step-2-create-an-index"></a>Шаг 2. Создание индекса
Хотя индексатор автоматизирует некоторые задачи, связанные с приемом данных, это обычно не распространяется на создание индекса. Перед началом работы у вас должен быть стандартный индекс с полями, которые соответствуют полям во внешнем источнике данных. Поля должно совпадать с именем и типом данных. Дополнительные сведения о структурировании индекса см. в статье, посвященной [созданию индекса (с использованием REST API службы "Поиск Azure")](https://docs.microsoft.com/rest/api/searchservice/Create-Index) или [классу Index](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.models.index). Справочные сведения по сопоставлению полей см. в статье [Сопоставление полей в индексаторах Поиска Azure](search-indexer-field-mappings.md).

> [!Tip]
> Хотя индексаторы не могут создавать индексы, вы можете это сделать с помощью мастера **импорта данных**. В большинстве случаев мастер может определить схему индекса на основе существующих метаданных в источнике, предоставляя предварительную схему, которую можно изменить в мастере во время его работы. После создания индекса в службе последующие изменения на портале ограничиваются добавлением новых полей. Используйте мастер для создания индекса, но не для изменения. Чтобы пройти практическое обучение, перейдите к [пошаговому руководству по порталу](search-get-started-portal.md).

### <a name="step-3-create-and-schedule-the-indexer"></a>Шаг 3. Создание и планирование индексатора
Определение индексатора — это конструкция, которая объединяет в себе все элементы, связанные с приемом данных. Обязательные элементы включают источник данных и индекс. Необязательные элементы включают расписания и поля сопоставления. Сопоставления полей необязательны только в том случае, если четко соответствуют исходных полей и полей индекса. Индексатор может ссылаться на источник данных из другой службы, если этот источник данных принадлежит к той же подписке. Дополнительные сведения о структурировании индексатора см. в статье, посвященной [созданию индекса (с использованием REST API службы поиска Azure)](https://docs.microsoft.com/rest/api/searchservice/Create-Indexer).

<a id="RunIndexer"></a>

## <a name="run-indexers-on-demand"></a>Запускать индексаторы по требованию

Хотя обычно для планирования индексирования, индексатор, который также можно вызывать по запросу с помощью [выполните команду](https://docs.microsoft.com/rest/api/searchservice/run-indexer):

    POST https://[service name].search.windows.net/indexers/[indexer name]/run?api-version=2017-11-11
    api-key: [Search service admin key]

> [!NOTE]
> При успешном возвращении API планируется вызов индексатора, но фактическая обработка происходит асинхронно. 

Вы можете отслеживать состояние индексатора на портале или с помощью API получения состояния индексатора. 

<a name="GetIndexerStatus"></a>

## <a name="get-indexer-status"></a>Получение состояния индексатора

Можно получить состояние и журнал выполнений индексатора через [команду получения состояния индексатора](https://docs.microsoft.com/rest/api/searchservice/get-indexer-status):


    GET https://[service name].search.windows.net/indexers/[indexer name]/status?api-version=2017-11-11
    api-key: [Search service admin key]

Ответ содержит сведения об общем состоянии индексатора, последнем (или текущем) вызове индексатора, а также журнал последних вызовов индексатора.

    {
        "status":"running",
        "lastResult": {
            "status":"success",
            "errorMessage":null,
            "startTime":"2018-11-26T03:37:18.853Z",
            "endTime":"2018-11-26T03:37:19.012Z",
            "errors":[],
            "itemsProcessed":11,
            "itemsFailed":0,
            "initialTrackingState":null,
            "finalTrackingState":null
         },
        "executionHistory":[ {
            "status":"success",
             "errorMessage":null,
            "startTime":"2018-11-26T03:37:18.853Z",
            "endTime":"2018-11-26T03:37:19.012Z",
            "errors":[],
            "itemsProcessed":11,
            "itemsFailed":0,
            "initialTrackingState":null,
            "finalTrackingState":null
        }]
    }

История выполнения включает не более 50 последних завершенных выполнений, которые сортируются в обратном хронологическом порядке (то есть в ответе первым отображается последнее выполнение).

## <a name="next-steps"></a>Дальнейшие действия
Теперь, когда вы ознакомились с основной идеей, можно переходить к изучению требований и задач, связанных с каждым типом источника данных.

* [база данных Azure SQL (или SQL Server на виртуальных машинах Azure);](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md)
* [Azure Cosmos DB](search-howto-index-cosmosdb.md)
* [Хранилище BLOB-объектов Azure](search-howto-indexing-azure-blob-storage.md)
* [хранилище таблиц Azure](search-howto-indexing-azure-tables.md)
* [Индексирование BLOB-объектов в формате CSV с помощью индексатора BLOB-объектов службы поиска Azure](search-howto-index-csv-blobs.md)
* [Индексирование BLOB-объектов JSON с помощью индексатора BLOB-объектов службы поиска Azure](search-howto-index-json-blobs.md)
