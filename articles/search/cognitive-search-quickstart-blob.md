---
title: Краткое руководство. Создание набора навыков на портале Azure
titleSuffix: Azure Cognitive Search
description: В этом кратком руководстве по порталу приводятся сведения об использовании мастера импорта данных для добавления когнитивных навыков в конвейер индексирования в службе "Когнитивный поиск Azure". Навыки включают в себя оптическое распознавание символов (OCR) и обработку естественного языка.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: quickstart
ms.date: 11/04/2019
ms.openlocfilehash: 5e891627b337a0a3a15d0ebfa2b9cc95f27feca4
ms.sourcegitcommit: 85e7fccf814269c9816b540e4539645ddc153e6e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2019
ms.locfileid: "74533113"
---
# <a name="quickstart-create-an-azure-cognitive-search-cognitive-skillset-in-the-azure-portal"></a>Краткое руководство. Создание набора навыков Когнитивного поиска на портале Azure

Набор навыков — это функция искусственного интеллекта, которая извлекает информацию и структуру из больших неструктурированных текстовых или графических файлов, а также обеспечивает индексирование и поиск для запросов полнотекстового поиска в Когнитивном поиске Azure. 

В этом кратком руководстве вы объедините службы и данные в облаке Azure, чтобы создать набор навыков. Когда все будет готово, запустите мастер **Импорт данных** на портале, чтобы импортировать все вместе. Конечным результатом является индекс с возможностью поиска, заполненный данными, созданными при обработке ИИ, которые можно запросить на портале ([обозреватель поиска](search-explorer.md)).

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

## <a name="create-services-and-load-data"></a>Создание служб и загрузка данных

В этом кратком руководстве используется Когнитивный поиск Azure, хранилище BLOB-объектов Azure и [Azure Cognitive Services](https://azure.microsoft.com/services/cognitive-services/) для искусственного интеллекта. 

Так как рабочая нагрузка мала, Cognitive Services работает в фоновом режиме, чтобы обеспечить бесплатную обработку до 20 транзакций ежедневно при вызове из Когнитивного поиска Azure. Если вы используете демонстрационные данные, которые мы предоставляем, можно пропустить создание или присоединение ресурса Cognitive Services.

1. [Скачайте пример данных](https://1drv.ms/f/s!As7Oy81M_gVPa-LCb5lC_3hbS-4), который состоит из небольшого набора файлов различных типов. Распакуйте файлы.

1. [Создайте учетную запись хранения Azure](https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account?tabs=azure-portal) или [найдите имеющуюся учетную запись](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Storage%2storageAccounts/). 

   Выберите регион, в котором размещается Когнитивный поиск Azure. Выберите тип учетной записи StorageV2 (общего назначения версии 2), если хотите испытать функцию хранилища знаний позже, в рамках другого пошагового руководства. В противном случае выберите любой тип.

1. Откройте страницы служб BLOB-объектов и создайте контейнер. Вы можете использовать общий уровень доступа по умолчанию. 

1. В контейнере щелкните **Отправить**, чтобы отправить примеры файлов, скачанные на первом шаге. Обратите внимание, что имеется широкий спектр типов содержимого, включая изображения и файлы приложений, которые не поддерживают полнотекстовый поиск в собственных форматах.

   ![Исходные файлы в хранилище BLOB-объектов Azure](./media/cognitive-search-quickstart-blob/sample-data.png)

1. [Создайте службу "Когнитивный поиск Azure"](search-create-service-portal.md) или [найдите имеющуюся службу](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Search%2FsearchServices). Вы можете использовать бесплатную службу для выполнения инструкций, описанных в этом кратком руководстве.

<!-- 1. You are almost done with this resource, but before you leave these pages, use a link on the left navigation pane to open the **Access Keys** page. In many tutorials, especially those that use the REST API, you will need a connection string to retrieve data from Blob storage. A connection string looks similar to the following example: `DefaultEndpointsProtocol=https;AccountName=<YOUR-ACCOUNT-NAME>;AccountKey=<YOUR-ACCOUNT-KEY>;EndpointSuffix=core.windows.net` -->

Теперь можно перейти к мастеру импорта данных.

## <a name="run-the-import-data-wizard"></a>Запуск мастера импорта данных

На странице обзора службы поиска щелкните **Импорт данных** на панели команд, чтобы настроить когнитивное обогащение за четыре шага.

  ![Команда импорта данных](media/cognitive-search-quickstart-blob/import-data-cmd2.png)

### <a name="step-1-create-a-data-source"></a>Шаг 1. Создание источника данных

1. В разделе **Подключение к данным** выберите **Хранилище BLOB-объектов Azure**, затем выберите учетную запись хранения и созданный контейнер. Присвойте источнику данных имя, а для остальных параметров используйте значения по умолчанию. 

   ![Конфигурация больших двоичных объектов Azure](./media/cognitive-search-quickstart-blob/blob-datasource.png)

1. Перейдите к следующей странице.

### <a name="step-2-add-cognitive-skills"></a>Шаг 2. Добавление когнитивных навыков

Затем добавьте когнитивные навыки для вызова обработки естественного языка. Демонстрационные данные состоят из 12 файлов, поэтому для этого краткого руководства достаточно бесплатного набора из 20 транзакций на Cognitive Services. Так как мы не используем OCR, в этом процессе будут учитываться, обрабатываться и использоваться только файлы без изображений.

1. В этом кратком руководстве мы используем ресурс Cognitive Services уровня **Бесплатный**.

   ![Подключение Cognitive Services](media/cognitive-search-quickstart-blob/cog-search-attach.png)

1. Разверните узел **Add skills** (Добавление навыков) и выберите навыки, которые выполняют обработку на естественном языке. Для этого краткого руководства выберите распознавание людей, организаций и расположений.

   ![Подключение Cognitive Services](media/cognitive-search-quickstart-blob/skillset.png)

1. Примите поле источника по умолчанию: `content`. Это может показаться маленькой целью, но для больших двоичных объектов Azure поле `content` содержит большую часть документа такого объекта (например, документа Word или набора слайдов PowerPoint), поэтому это подходящий вариант.

1. Перейдите к следующей странице.

> [!NOTE]
> Навыки обработки естественного языка работают с текстовым содержимым в примере набора данных. Так как мы не выбрали распознавание текста, JPEG и PNG-файлы из тестового набора данных не будут обрабатываться при выполнении этого краткого руководства. 

### <a name="step-3-configure-the-index"></a>Шаг 3. Настройка индекса

В Когнитивном поиске Azure индекс имеет содержимое, доступное для поиска, и мастер **Импорта данных** обычно создает схему, выполнив выборку источника данных. На этом шаге проверьте созданную схему и, возможно, измените некоторые параметры. Ниже приведена схема по умолчанию, созданная для демонстрационного набора данных больших двоичных объектов.

В этом кратком руководстве мастер устанавливает разумные значения по умолчанию: 

+ Для этого типа источника данных имя по умолчанию — *azureblob-index*. 

+ Поля по умолчанию основаны на поле исходных данных (`content`), а также полях выходных данных (`people`, `organizations` и `locations`), созданных когнитивными навыками. Типы данных по умолчанию выводятся из метаданных и выборки данных.

+ Ключ документа по умолчанию — *metadata_storage_path* (выбран, так как поле содержит уникальные значения).

+ Атрибутами по умолчанию для этих полей являются **Доступный для получения** и **Доступный для поиска**. **Доступность для поиска** означает, что по этому полю можно выполнять поиск. **Доступность для получения** означает, что его можно возвращать в результатах. Мастер предполагает, что вы хотите, чтобы эти поля были доступны для получения и поиска, потому что вы создали их с помощью набора навыков.

  ![Поля индекса](media/cognitive-search-quickstart-blob/index-fields.png)

Обратите внимание на зачеркивание и вопросительный знак в атрибуте **Доступный для получения** в поле `content`. Для документов с большим количеством текста в поле `content` содержится основная часть файла, которая может достигать тысячи строк. Если необходимо передать содержимое файла в код клиента, убедитесь, что атрибут **Доступный для получения** остается выбранным. В противном случае рассмотрите возможность очистки этого атрибута в `content`, если извлеченные элементы (`people`, `organizations` и `locations`) достаточны для ваших целей.

Маркировка поля как **Доступный для получения** не означает, что поле *должно* присутствовать в результатах поиска. Вы можете точно контролировать состав результатов поиска с помощью параметра запроса **$select**, чтобы указать, какие поля включать. Для полей с большим количеством текста, например `content`, параметр **$select** — это решение для предоставления управляемых результатов поиска пользователям вашего приложения, обеспечивая при этом доступ клиентского кода ко всем необходимым данным с помощью атрибута **Доступный для получения**.
  
Перейдите к следующей странице.

### <a name="step-4-configure-the-indexer"></a>Шаг 4. Настройка индексатора

Индексатор — это ресурс высокого уровня, управляющий процессом индексации. Он задает имя источника данных, целевой индекс и частоту выполнения. Мастер **импорта данных** создает несколько объектов и всегда индексатор, выполняемый несколько раз.

1. На странице **Индексатор** вы можете подтвердить имя по умолчанию и щелкнуть функцию планирования **Однократно**, чтобы выполнить его немедленно. 

   ![Определение индексатора](media/cognitive-search-quickstart-blob/indexer-def.png)

1. Щелкните **Отправить**, чтобы создать и немедленно запустить индексатор.

## <a name="monitor-status"></a>Состояние монитора

Индексирование с использованием когнитивных навыков занимает больше времени, чем обычное индексирование на основе текста. Чтобы отслеживать ход выполнения, перейдите на страницу обзора и щелкните **Индексатор** посредине страницы.

Предупреждение возникает из-за того, что файлы изображений JPG и PNG находятся в источнике данных, и мы пропустили навык OCR из этого конвейера. Также вы увидите уведомления об усечении. Длина извлечения ограничена 32 000 символами на уровне "Бесплатный".

  ![Уведомление Когнитивного поиска Azure](./media/cognitive-search-quickstart-blob/indexer-notification.png)

Индексирование и обогащение может занять время, поэтому для ранних исследований рекомендуется использовать маленькие наборы данных. 

На портале Azure найдите в журнале действий уведомлений ссылку состояния **уведомления Когнитивного поиска Azure**, которую можно щелкнуть. Выполнение может занять несколько минут.

## <a name="query-in-search-explorer"></a>Запросы в обозревателе поиска

После создания индекса можно отправлять запросы, возвращающие документы в индекс. Используйте **обозреватель поиска** на портале, чтобы выполнять запросы и просматривать результаты. 

1. На странице панели мониторинга службы поиска щелкните **Обозреватель поиска** в командной строке.

1. В верхней части окна щелкните **Изменить индекс**, чтобы выбрать созданный индекс.

1. Введите строку поиска для запроса по индексу, например `search=Microsoft&searchFields=Organizations`.

Результаты возвращаются в формате JSON, который может быть подробным и трудным для чтения, особенно в больших документах, исходящих из больших двоичных объектов Azure. Если вы не можете легко проверить результаты, используйте сочетание клавиш CTRL+F для поиска в документах. Для этого запроса вы можете найти в документе JSON определенные термины. 

Сочетание клавиш CTRL+F также позволяет определить, сколько документов предоставлено в результирующем наборе. Для больших двоичных объектов Azure портал выбирает metadata_storage_path в качестве ключа, так как каждое значение в этом документе уникально. С помощью сочетания клавиш CTRL+F найдите metadata_storage_path, чтобы узнать количество документов. 

  ![Пример с обозревателем решений](./media/cognitive-search-quickstart-blob/search-explorer.png)

## <a name="takeaways"></a>Общие выводы

Вы создали свой первый набор навыков и узнали о важных понятиях, полезных для создания более сложного решения поиска с помощью собственных данных.

Некоторые ключевые понятия, с которыми, как мы надеемся, вы разобрались, включают зависимость от источников данных Azure. Набор навыков привязан к индексатору, а индексаторы зависят от Azure и источника. Несмотря на то что краткое руководство использует хранилище BLOB-объектов Azure, можно использовать и другие источники данных Azure. Дополнительные сведения см. в статье [Indexers in Azure Search](search-indexer-overview.md) (Индексаторы в службе "Поиск Azure").

Другим важным понятием является выполнение навыков в отношении полей входных данных. На портале необходимо выбрать одно поле входных данных для всех навыков. В коде входными данными могут быть другие поля или выходные данные вышестоящих навыков.

Выходные данные направляются в индекс поиска. Существует сопоставление между парами "имя — значение", созданными во время индексирования, и отдельными полями в индексе. На внутреннем уровне портал настраивает [заметки](cognitive-search-concept-annotations-syntax.md) и определяет [набор навыков](cognitive-search-defining-skillset.md), устанавливая порядок операций и общий поток действий. Эти шаги скрыты на портале, но эти понятия становятся важными при написании кода.

Наконец, вы узнали, что можно проверять содержимое путем запроса индекса. В результате служба "Когнитивный поиск Azure" предоставляет доступный для поиска индекс, который можно запрашивать с помощью [простого](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search) или [полностью расширенного синтаксиса запроса](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search). Индекс, который содержит обогащенные поля, не отличается от других. Если вы хотите включить стандартные или [настраиваемые анализаторы](search-analyzers.md), [профили оценки](https://docs.microsoft.com/rest/api/searchservice/add-scoring-profiles-to-a-search-index), [синонимы](search-synonyms.md), [фильтры аспектов](search-filters-facets.md), географический поиск или любую другую функцию службы "Когнитивный поиск Azure", вы можете это сделать.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы работаете в своей подписке, по окончании проекта рекомендуем решить, нужны ли вам созданные ресурсы. Работающие ресурсы могут означать лишние затраты. Можно удалить отдельные ресурсы или удалить группу ресурсов, что позволит удалить весь набор ресурсов.

Просматривать ресурсы и управлять ими можно на портале с помощью ссылок **Все ресурсы** или **Группы ресурсов** на панели навигации слева.

При работе с бесплатной версией службы помните о том, что вам доступно максимум три индекса, индексатора и источника данных. Вы можете удалить отдельные элементы на портале, чтобы не превысить лимит. 

> [!Tip]
> Если вы хотите повторить это упражнение или попробовать другое пошаговое руководство по обогащению ИИ, удалите индексатор на портале. При удалении индексатора счетчик бесплатных ежедневных транзакций сбрасывается обратно на нулевое значение для обработки Cognitive Services.

## <a name="next-steps"></a>Дополнительная информация

Вы можете создавать наборы навыков, используя портал, .NET SDK или REST API. Чтобы получить дополнительные знания, попробуйте использовать REST API с Postman и другими демонстрационными данными.

> [!div class="nextstepaction"]
> [Руководство. Добавление структуры в "неструктурированное содержимое" с помощью обогащения ИИ](cognitive-search-tutorial-blob.md)