---
title: Визуализация журналов Когнитивный поиск Azure и метрик с помощью Power BI
description: Визуализация журналов Когнитивный поиск Azure и метрик с помощью Power BI
manager: eladz
author: MarkHeff
ms.author: maheff
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 02/24/2020
ms.openlocfilehash: e01ac332e61f51909ff1617f1716cd719b67c319
ms.sourcegitcommit: edccc241bc40b8b08f009baf29a5580bf53e220c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2020
ms.locfileid: "82127868"
---
# <a name="visualize-azure-cognitive-search-logs-and-metrics-with-power-bi"></a>Визуализация журналов Когнитивный поиск Azure и метрик с помощью Power BI
[Azure когнитивный Поиск](https://docs.microsoft.com/azure/search/search-what-is-azure-search) позволяет хранить журналы операций и метрики службы для службы поиска в учетной записи хранения Azure. На этой странице приводятся инструкции по визуализации этой информации с помощью приложения шаблона Power BI. Приложение предоставляет подробную информацию о службе поиска, включая сведения об метриках поиска, индексирования, операций и служб.

Вы можете найти Power BI шаблон приложения **Azure когнитивный Поиск: анализ журналов и метрик** в [Power BI приложений Marketplace](https://appsource.microsoft.com/marketplace/apps).

## <a name="how-to-get-started-with-the-app"></a>Как приступить к работе с приложением

1. Включите ведение журнала метрик и ресурсов для службы поиска:

    1. Создание или указание существующей [учетной записи хранения Azure](https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account) , в которой можно архивировать журналы
    1. Перейдите к службе Когнитивный поиск Azure в портал Azure
    1. В разделе Мониторинг в левом столбце выберите **параметры диагностики** .

        ![](media/search-monitor-logs-powerbi/diagnostic-settings.png)

    1. Выберите **+ Добавить параметр диагностики**
    1. Проверьте **Архив в учетной записи хранения**, укажите сведения об учетной записи хранения и проверьте **OperationLogs** и **аллметрикс** .

        ![](media/search-monitor-logs-powerbi/add-diagnostic-setting.png)
    1. Нажмите кнопку **Сохранить**.

1. После включения ведения журнала используйте службу поиска, чтобы начать создавать журналы и метрики. Для отображения контейнеров в хранилище BLOB-объектов с этими журналами потребуется до часа. Вы увидите контейнер **Insights-Logs-operationlogs** для поиска журналов трафика и контейнер **Insights-метрики pt1m** для метрик.

1. Найдите приложение Azure Когнитивный поиск Power BI в [Power BI приложений Marketplace](https://appsource.microsoft.com/marketplace/apps) и установите его в новую или существующую рабочую область. Приложение называется **когнитивный Поиск Azure: анализ журналов и метрик**.

1. После установки приложения выберите приложение из списка приложений в Power BI.

    ![](media/search-monitor-logs-powerbi/azure-search-app-tile.png)

1. Выберите **подключить** для подключения данных

    ![](media/search-monitor-logs-powerbi/get-started-with-your-new-app.png)

1. Введите имя учетной записи хранения, содержащей журналы и метрики. По умолчанию приложение будет просматривать данные за последние 10 дней, но это значение можно изменить с помощью параметра **dayss** .

    ![](media/search-monitor-logs-powerbi/connect-to-storage-account.png)

1. Выберите **ключ** в качестве метода проверки подлинности и укажите ключ учетной записи хранения. Выберите **частный** в качестве уровня конфиденциальности. Щелкните Войти, чтобы начать процесс загрузки.

    ![](media/search-monitor-logs-powerbi/connect-to-storage-account-step-two.png)

1. Дождитесь обновления данных. Это может занять некоторое время в зависимости от объема данных. Вы можете увидеть, обновляются ли данные на основе индикатора ниже.

    ![](media/search-monitor-logs-powerbi/workspace-view-refreshing.png)

1. После завершения обновления данных выберите **когнитивный Поиск отчет Azure** , чтобы просмотреть отчет.

    ![](media/search-monitor-logs-powerbi/workspace-view-select-report.png)

1. Обязательно обновите страницу после открытия отчета, чтобы он открывался с данными.

    ![](media/search-monitor-logs-powerbi/powerbi-search.png)

## <a name="how-to-change-the-app-parameters"></a>Изменение параметров приложения
Если вы хотите визуализировать данные из другой учетной записи хранения или изменить число дней для запроса данных, выполните следующие действия, чтобы изменить параметры **Days** и **StorageAccount** .

1. Перейдите к Power BIным приложениям, найдите приложение Azure Когнитивный поиск и нажмите кнопку **изменить приложение** , чтобы просмотреть рабочую область.

    ![](media/search-monitor-logs-powerbi/azure-search-app-tile-edit.png)

1. Выберите **Параметры** в параметрах набора данных.

    ![](media/search-monitor-logs-powerbi/workspace-view-select-settings.png)

1. На вкладке Наборы данных измените значения параметров и нажмите кнопку **Применить**. При возникновении проблемы с подключением обновите учетные данные источника данных на той же странице.

1. Вернитесь в рабочую область и выберите **Обновить сейчас** в параметрах набора данных.

    ![](media/search-monitor-logs-powerbi/workspace-view-select-refresh-now.png)

1. Откройте отчет, чтобы просмотреть обновленные данные. Также может потребоваться обновить отчет, чтобы просмотреть последние данные.

## <a name="troubleshooting"></a>Устранение неполадок
Если вы обнаружите, что данные не отображаются, выполните следующие действия по устранению неполадок:

1. Откройте отчет и обновите страницу, чтобы убедиться, что вы просматриваете последние данные. В отчете есть параметр для обновления данных. Выберите этот параметр, чтобы получить актуальные данные.

1. Убедитесь, что указаны правильные имя учетной записи хранения и ключ доступа. Имя учетной записи хранения должно соответствовать учетной записи, настроенной для журналов службы поиска.

1. Убедитесь, что ваша учетная запись хранения содержит сведения о контейнерах — **журналы-operationlogs** и **Insights-метрики-pt1m** , а каждый контейнер содержит данные. Журналы и метрики будут находиться в нескольких слоях папок.

1. Проверьте, не обновляется ли набор данных. На шаге 8 выше показан индикатор состояния обновления. Если обновление по-прежнему выполняется, дождитесь завершения обновления, чтобы открыть и обновить отчет.

## <a name="next-steps"></a>Следующие шаги
[Дополнительные сведения об Azure Когнитивный поиск](https://docs.microsoft.com/azure/search/)

[Что такое Power BI?](https://docs.microsoft.com/power-bi/fundamentals/power-bi-overview)

[Основные понятия для разработчиков в службе Power BI](https://docs.microsoft.com/power-bi/service-basic-concepts)