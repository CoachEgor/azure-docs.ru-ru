---
title: Визуализируйте журналы когнитивного поиска и метрики Azure с помощью Power BI
description: Визуализируйте журналы когнитивного поиска и метрики Azure с помощью Power BI
manager: eladz
author: MarkHeff
ms.author: maheff
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 02/24/2020
ms.openlocfilehash: 618033e24236d26601fafaf7b0678ee83ec973e8
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77650174"
---
# <a name="visualize-azure-cognitive-search-logs-and-metrics-with-power-bi"></a>Визуализируйте журналы когнитивного поиска и метрики Azure с помощью Power BI
[Azure Cognitive Search](https://docs.microsoft.com/azure/search/search-what-is-azure-search) позволяет хранить журналы операций и метрики обслуживания в поисковой службе в учетной записи хранения Azure. Эта страница содержит инструкции о том, как вы можете визуализировать эту информацию через Power BI Template App. Приложение предоставляет подробную информацию о вашем поисковом сервисе, включая информацию о метриках поиска, индексирования, операций и обслуживания.

Вы можете найти Power BI Template App **Azure Когнитивный поиск: Анализ журналов и метрик** на [рынке Power BI Apps.](https://appsource.microsoft.com/marketplace/apps)

## <a name="how-to-get-started-with-the-app"></a>Как начать работу с приложением
1. Включите диагностическую систему регистрации для поисковой службы:
    1. Создание или идентификация существующей [учетной записи хранения Azure,](https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account) где можно архивировать журналы
    1. Перейдите к службе когнитивного поиска Azure на портале Azure
    1. В разделе Мониторинг на левой колонке выберите **настройки диагностики**

        ![](media/search-monitor-logs-powerbi/diagnostic-settings.png)

    1. Выберите **и добавьте диагностическую настройку**
    1. Проверьте **Архив на учетную запись хранения,** предоставьте информацию об учетной записи хранилища и проверьте **OperationLogs** и **AllMetrics**

        ![](media/search-monitor-logs-powerbi/add-diagnostic-setting.png)
    1. Выберите **Сохранить**

1. После включения журнала используйте службу поиска для начала генерации журналов и метрик. Это займет до часа, прежде чем контейнеры появятся в хранилище Blob с этими журналами. Вы увидите контейнер **insights-logs-operationlogs** для журналов поисковых движений и контейнер **insights-metrics-pt1m** для метрик.

1. Найдите приложение Azure Cognitive Search Power BI [на рынке Power BI Apps](https://appsource.microsoft.com/marketplace/apps) и установите его в новое рабочее пространство или существующее рабочее пространство. Приложение называется **Azure Когнитивный поиск: Анализ журналов и метрик**.

1. После установки приложения выберите приложение из списка приложений в Power BI.

    ![](media/search-monitor-logs-powerbi/azure-search-app-tile.png)

1. Выберите **Подключение** для подключения данных

    ![](media/search-monitor-logs-powerbi/get-started-with-your-new-app.png)

1. Ввейте имя учетной записи хранилища, содержащей журналы и метрики. По умолчанию приложение будет смотреть на последние 10 дней данных, но это значение может быть изменено с параметром **дней.**

    ![](media/search-monitor-logs-powerbi/connect-to-storage-account.png)

1. Выберите **ключ** в качестве метода проверки подлинности и предоставьте ключ учетной записи хранилища. Выберите **Private** в качестве уровня конфиденциальности. Щелкните Войти, чтобы начать процесс загрузки.

    ![](media/search-monitor-logs-powerbi/connect-to-storage-account-step-two.png)

1. Подождите обновления данных. Это может занять некоторое время в зависимости от того, сколько данных у вас есть. Вы можете увидеть, обновляются ли данные на основе нижеприведенного индикатора.

    ![](media/search-monitor-logs-powerbi/workspace-view-refreshing.png)

1. После завершения обновления данных для просмотра отчета выберите **отчет о когнитивном поиске Azure** Cognitive Report.

    ![](media/search-monitor-logs-powerbi/workspace-view-select-report.png)

1. Убедитесь в том, чтобы обновить страницу после открытия отчета, чтобы он открылся с вашими данными.

    ![](media/search-monitor-logs-powerbi/powerbi-search.png)

## <a name="how-to-change-the-app-parameters"></a>Как изменить параметры приложения
Если вы хотите визуализировать данные из другой учетной записи хранения или изменить количество дней данных для запроса, выполните ниже шаги по изменению параметров **Дней** и **Хранения.**

1. Перейдите к приложениям Power BI, найдите приложение Azure Cognitive Search и выберите кнопку **«Отображьте»** для просмотра рабочего пространства.

    ![](media/search-monitor-logs-powerbi/azure-search-app-tile-edit.png)

1. Выберите **параметры** из параметров набора данных.

    ![](media/search-monitor-logs-powerbi/workspace-view-select-settings.png)

1. Находясь во вкладке Datasets, измените значения параметров и выберите **Apply.** Если есть проблема с подключением, обновите учетные данные источника данных на той же странице.

1. Перейдите назад к рабочему пространству и выберите **Обновление из** параметров набора данных.

    ![](media/search-monitor-logs-powerbi/workspace-view-select-refresh-now.png)

1. Откройте отчет для просмотра обновленных данных. Возможно, потребуется обновить отчет для просмотра последних данных.

## <a name="troubleshooting"></a>Устранение неполадок
Если вы обнаружите, что не видите, что ваши данные следуют следующим шагам устранения неполадок:

1. Откройте отчет и обновите страницу, чтобы убедиться, что вы просматриваете последние данные. В отчете есть возможность обновить данные. Выберите это, чтобы получить последние данные.

1. Убедитесь, что имя учетной записи хранилища и ключ доступа, который вы предоставили, верны. Имя учетной записи хранилища должно соответствовать учетной записи, настроенной с журналами поисковых служб.

1. Подтвердите, что ваша учетная запись хранения содержит **данные-журналы-операции** и **аналитические данные-метрики-pt1m,** и каждый контейнер имеет данные. Логи и метрики будут находиться в нескольких слоях папок.

1. Проверьте, обновляется ли набор данных. Индикатор состояния обновления отображается в шаге 8 выше. Если он все еще обновляется, подождите, пока обновление будет завершено, чтобы открыть и обновить отчет.

## <a name="next-steps"></a>Дальнейшие действия
[Подробнее о когнитивном поиске Azure](https://docs.microsoft.com/azure/search/)

[Что такое Power BI?](https://docs.microsoft.com/power-bi/fundamentals/power-bi-overview)

[Основные понятия для разработчиков в службе Power BI](https://docs.microsoft.com/power-bi/service-basic-concepts)