---
title: Когнитивные навыки извлечения документов (предварительный просмотр)
titleSuffix: Azure Cognitive Search
description: Извлекает содержимое из файла в конвейере обогащения. Этот навык в настоящее время в публичном предварительном просмотре.
manager: nitinme
author: careyjmac
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 11/04/2019
ms.author: chalton
ms.openlocfilehash: 0f67caad03c4ebd1cf8f3721f377d8362219016a
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76837737"
---
# <a name="document-extraction-cognitive-skill"></a>Когнитивные навыки извлечения документов

> [!IMPORTANT] 
> Этот навык в настоящее время в публичном предварительном просмотре. Для предварительной версии функции соглашение об уровне обслуживания не предусмотрено. Мы не рекомендуем использовать ее в рабочей среде. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/). В настоящее время нет портала или поддержки .NET SDK.

Навык **извлечения документов** извлекает содержимое из файла в конвейере обогащения. Это позволяет воспользоваться шагом к извлечению документов, который обычно происходит до выполнения набора навыков с файлами, которые могут быть сгенерированы другими навыками.

> [!NOTE]
> По мере расширения сферы охвата за счет увеличения частоты обработки, добавления дополнительных документов или добавления большего числа алгоритмов ИИ необходимо [прикрепить ресурс Cognitive Services.](cognitive-search-attach-cognitive-services.md) Сборы начисляются при вызове AIS в Cognitive Services, а также для извлечения изображений в рамках этапа проверки документооборота при индексации. За извлечение текста из документов плата не взимается.
>
> Плата за выполнение встроенных навыков взимается в рамках существующей [модели оплаты Cognitive Services по мере использования](https://azure.microsoft.com/pricing/details/cognitive-services/). Ценообразование извлечения изображений описано на [странице ценообразования.](https://go.microsoft.com/fwlink/?linkid=2042400)
## <a name="odatatype"></a>@odata.type  
Microsoft.Skills.Util.DocumentExtractionSkill

## <a name="skill-parameters"></a>Параметры навыков

Параметры зависят от регистра.

| Входные данные            | Допустимые значения | Описание |
|-----------------|----------------|-------------|
| `parsingMode`   | `default` <br/> `text` <br/> `json`  | Набор `default` для извлечения документов из файлов, которые не являются чистым текстом или json. Установить `text` для повышения производительности на простых текстовых файлов. Установить `json` для извлечения структурированного содержимого из файлов json. Если `parsingMode` не определено явно, он `default`будет установлен на . |
| `dataToExtract` | `contentAndMetadata` <br/> `allMetadata` | Установить `contentAndMetadata` для извлечения всех метаданных и текстового содержимого из каждого файла. Установить `allMetadata` для извлечения только [содержание типа конкретных метаданных](search-howto-indexing-azure-blob-storage.md#ContentSpecificMetadata) (например, метаданные, уникальные только для файлов .png). Если `dataToExtract` не определено явно, он `contentAndMetadata`будет установлен на . |
| `configuration` | См. ниже. | Словарь дополнительных параметров, которые регулируют способ выполнения извлечения документа. Смотрите ниже таблицу для описания поддерживаемых свойств конфигурации. |

| Параметр конфигурации   | Допустимые значения | Описание |
|-------------------------|----------------|-------------|
| `imageAction`           | `none`<br/> `generateNormalizedImages`<br/> `generateNormalizedImagePerPage` | Установите `none` игнорировать встроенные изображения или файлы изображений в наборе данных. Это значение по умолчанию. <br/>Для [анализа изображений с использованием когнитивных навыков,](cognitive-search-concept-image-scenarios.md)установить, чтобы `generateNormalizedImages` иметь навык создать массив нормализованных изображений в рамках документооборота. Это действие `parsingMode` требует, `default` что `dataToExtract` установлен `contentAndMetadata`и установлен на . Нормализованное изображение получается путем дополнительной обработки, результатом которой является унифицированное изображение, размер и ориентация которого обеспечивают согласованную визуализацию при добавлении в результаты визуального поиска (например, фотографии одинакового размера в элементе управления графа, как показано в [демонстрации JFK](https://github.com/Microsoft/AzureSearch_JFK_Files)). Эта информация генерируется для каждого изображения при использовании этой опции.  <br/>Если вы `generateNormalizedImagePerPage`установите, PDF-файлы будут рассматриваться по-разному в том, что вместо извлечения встроенных изображений, каждая страница будет отображаться как изображение и нормализованы соответственно.  Типы файлов, не относясь `generateNormalizedImages` к PDF, будут рассматриваться так же, как если бы они были установлены.
| `normalizedImageMaxWidth` | Любой многокомнатный от 50-10000 | Максимальная ширина (в пикселях) для созданного нормализованного изображения. Значение по умолчанию — 2000. | 
| `normalizedImageMaxHeight` | Любой многокомнатный от 50-10000 | Максимальная высота (в пикселях) для созданных нормализованных изображений. Значение по умолчанию — 2000. |

> [!NOTE]
> По умолчанию навыками [OCR](cognitive-search-skill-ocr.md) и [анализа изображений](cognitive-search-skill-image-analysis.md) поддерживаются нормализованные изображения с максимальными шириной и высотой в 2000 пикселей. [Навык OCR](cognitive-search-skill-ocr.md) поддерживает максимальную ширину и высоту 4200 для неанглоязычных языков и 10000 для английского языка.  Если увеличить максимальные лимиты, обработка может вывести из строя большие изображения в зависимости от определения набора навыков и языка документов. 
## <a name="skill-inputs"></a>Входные данные навыков

| Ввод имени     | Описание |
|--------------------|-------------|
| file_data | Файл, из которого следует извлечь содержимое. |

Ввод "file_data" должен быть объектом, определяемым следующим образом:

```json
{
  "$type": "file",
  "data": "BASE64 encoded string of the file"
}
```

Этот объект ссылки файла может быть создан одним из 3 способов:

 - Установка `allowSkillsetToReadFileData` параметра в определении индекса на "истинное".  Это создаст `/document/file_data` путь, представляющий исходные данные файла, загруженные из источника данных blob. Этот параметр применяется только к данным в хранилище Blob.

 - Установка `imageAction` параметра в определении индекса `none`на значение, не превышающее значение.  Это создает массив изображений, который следует требуемой конвенции для ввода этого `/document/normalized_images/*`навыка, если передается индивидуально (т.е.).

 - Имея пользовательский навык вернуть объект Json определены точно как выше.  Параметр `$type` должен быть `file` установлен `data` точно и параметр должен быть базой 64 закодированные данные массива байт содержимого файла.

## <a name="skill-outputs"></a>Выходные данные навыка

| Имя вывода    | Описание |
|--------------|-------------|
| content | Текстовое содержание документа. |
| normalized_images | Когда `imageAction` настроенна на другое `none`значение, новое *поле normalized_images* будет содержать массив изображений. Дополнительную информацию о формате вывода каждого изображения можно узнать [в документации для извлечения изображений.](cognitive-search-concept-image-scenarios.md) |

##  <a name="sample-definition"></a>Пример определения

```json
 {
    "@odata.type": "#Microsoft.Skills.Util.DocumentExtractionSkill",
    "parsingMode": "default",
    "dataToExtract": "contentAndMetadata",
    "configuration": {
        "imageAction": "generateNormalizedImages",
        "normalizedImageMaxWidth": 2000,
        "normalizedImageMaxHeight": 2000
    },
    "context": "/document",
    "inputs": [
      {
        "name": "file_data",
        "source": "/document/file_data"
      }
    ],
    "outputs": [
      {
        "name": "content",
        "targetName": "content"
      },
      {
        "name": "normalized_images",
        "targetName": "normalized_images"
      }
    ]
  }
```

##  <a name="sample-input"></a>Пример ввода

```json
{
  "values": [
    {
      "recordId": "1",
      "data":
      {
        "file_data": {
          "$type": "file",
          "data": "aGVsbG8="
        }
      }
    }
  ]
}
```


##  <a name="sample-output"></a>Пример выходных данных

```json
{
  "values": [
    {
      "recordId": "1",
      "data": {
        "content": "hello",
        "normalized_images": []
      }
    }
  ]
}
```

## <a name="see-also"></a>См. также

+ [Встроенные навыки](cognitive-search-predefined-skills.md)
+ [Определение набора навыков](cognitive-search-defining-skillset.md)
+ [Обработка и извлечение информации из изображений в сценариях когнитивного поиска](cognitive-search-concept-image-scenarios.md)