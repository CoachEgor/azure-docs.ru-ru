---
title: Безопасность и конфиденциальность данных
titleSuffix: Azure Cognitive Search
description: Azure Когнитивный поиск соответствует требованиям SOC 2, HIPAA и другим сертификатам. Подключение и шифрование данных, проверка подлинности и доступ к удостоверениям с помощью идентификаторов безопасности пользователей и групп в выражениях фильтра.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 1949aca26f68f12dfb133da8ef45662294140c25
ms.sourcegitcommit: f34165bdfd27982bdae836d79b7290831a518f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/13/2020
ms.locfileid: "75922564"
---
# <a name="security-and-data-privacy-in-azure-cognitive-search"></a>Безопасность и конфиденциальность данных в Azure Когнитивный поиск

Комплексные функции безопасности и элементы управления доступом встроены в Когнитивный поиск Azure, чтобы обеспечить сохранение закрытого содержимого. В этой статье перечислены функции безопасности и соответствие стандартам, встроенные в Azure Когнитивный поиск.

Архитектура безопасности Azure Когнитивный поиск охватывает физическую безопасность, зашифрованные передачи, зашифрованное хранилище и соответствие стандартам на уровне платформы. При работе Когнитивный поиск Azure принимает только запросы, прошедшие проверку подлинности. При необходимости можно добавить элементы управления доступом к содержимому для отдельного пользователя с помощью фильтров безопасности. В этой статье рассматривается безопасность на каждом уровне, но в первую очередь уделяется о том, как данные и операции защищаются в Azure Когнитивный поиск.

## <a name="standards-compliance-iso-27001-soc-2-hipaa"></a>Соответствие стандартам ISO 27001, SOC 2 и HIPAA

Когнитивный поиск Azure сертифицировано для следующих стандартов, как [объявлено в июне 2018](https://azure.microsoft.com/blog/azure-search-is-now-certified-for-several-levels-of-compliance/):

+ [ISO 27001:2013](https://www.iso.org/isoiec-27001-information-security.html). 
+ [SOC 2 типа 2](https://www.aicpa.org/interestareas/frc/assuranceadvisoryservices/aicpasoc2report.html). Чтобы просмотреть полный отчет, перейдите к [отчету SOC 2 типа II для Azure для государственных организаций](https://servicetrust.microsoft.com/ViewPage/MSComplianceGuide?command=Download&downloadType=Document&downloadId=93292f19-f43e-4c4e-8615-c38ab953cf95&docTab=4ce99610-c9c0-11e7-8c2c-f908a777fa4d_SOC%20%2F%20SSAE%2016%20Reports). 
+ [Акт о передаче и защите данных учреждений здравоохранения (HIPAA)](https://en.wikipedia.org/wiki/Health_Insurance_Portability_and_Accountability_Act).
+ [GxP (21 CFR, ч. 11)](https://en.wikipedia.org/wiki/Title_21_CFR_Part_11).
+ [HITRUST](https://en.wikipedia.org/wiki/HITRUST).
+ [PCI DSS, уровень 1](https://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard).
+ [Программа IRAP австралийского правительства (без грифа секретности)](https://asd.gov.au/infosec/irap/certified_clouds.htm).

Соответствие стандартам относится к общедоступным функциям. Функции в предварительной версии будут сертифицированы, когда станут общедоступными. Не следует их использовать в решениях со строгими требованиями к соответствию стандартам. Сведения о сертификатах соответствия см. в документе [Overview of Microsoft Azure compliance](https://gallery.technet.microsoft.com/Overview-of-Azure-c1be3942) (Общие сведения о соответствии требованиям Microsoft Azure) и в [центре управления безопасностью](https://www.microsoft.com/en-us/trustcenter). 

## <a name="encrypted-transmission-and-storage"></a>Зашифрованная передача и хранение

Шифрование распространяется по всему конвейеру индексирования: от подключений, через передачу и до индексированных данных, хранящихся в Когнитивный поиск Azure.

| Уровень безопасности | Description |
|----------------|-------------|
| Шифрование при передаче <br>(HTTPS, SSL, TLS) | Когнитивный поиск Azure прослушивает HTTPS порт 443. Подключения к службам Azure по всей платформе зашифрованы. <br/><br/>Все взаимодействия между клиентом и службой Azure Когнитивный поиск поддерживают SSL/TLS 1,2.  Обязательно используйте TLS версии 1.2 для SSL-подключений к службе.|
| Шифрование при хранении <br>Ключи, управляемые Майкрософт | Шифрование происходит внутренне в процессе индексирования и не оказывает заметного влияния на время выполнения индексирования или размер индекса. Оно выполняется автоматически во всех процессах индексирования, включая добавочные обновления индекса, который не полностью зашифрован (создан до января 2018 г.).<br><br>На внутреннем уровне шифрование основывается на [шифровании службы хранилища Azure](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) с использованием 256-разрядного [шифрования AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard).<br><br> Шифрование является внутренним для Когнитивный поиск Azure с использованием сертификатов и ключей шифрования, управляемых внутри корпорации Майкрософт, и универсального применения. Вы не можете включать или отключать шифрование, подставлять собственные ключи или управлять ими, просматривать параметры шифрования на портале или с помощью программных средств.<br><br>Шифрование неактивных обновлений было объявлено 24 января 2018 и относится ко всем уровням служб, включая уровень Free, во всех регионах. Для полного шифрования индексы, созданные до этой даты, необходимо удалить и создать заново, чтобы шифрование вступило в силу. В противном случае будут зашифрованы только новые данные, добавленные после 24 января.|
| Шифрование при хранении <br>Ключами управляет пользователь | Шифрование с помощью управляемых клиентом ключей теперь общедоступно.<br><br>Индексы Когнитивный поиск Azure и карты синонимов теперь можно зашифровать при хранении, используя управляемые ключи клиентов в Azure Key Vault. Дополнительные сведения см. в статье [Управление ключами шифрования в Azure когнитивный Поиск](search-security-manage-encryption-keys.md).<br>Эта функция не заменяет шифрование неактивных по умолчанию, а применяется в дополнение к нему.<br>Включение этой функции увеличит размер индекса и снизит производительность запросов. Исходя из наблюдений на дату, можно увидеть увеличение 30%-60% времени выполнения запроса, хотя фактическая производительность зависит от определения индекса и типов запросов. В связи с этим влиянием на производительность рекомендуется включить эту функцию только для индексов, которые действительно необходимы.

## <a name="azure-wide-user-access-controls"></a>Элементы для управления доступом пользователей в Azure

Некоторые механизмы безопасности доступны в Azure и, таким способом, автоматически доступны для создаваемых ресурсов Azure Когнитивный поиск.

+ [Блокировки на уровне подписки или ресурсов для предотвращения удаления](../azure-resource-manager/resource-group-lock-resources.md)
+ [Управление доступом на основе ролей (RBAC) для управления доступом к информации и административным операциям](../role-based-access-control/overview.md)

Все службы Azure поддерживают элементы управления доступом на основе ролей (RBAC) для согласованного задания уровней доступа во всех службах. Например, просматривать конфиденциальные данные, такие как ключ администратора, могут только пользователи с ролью владельца или участника, а состояние службы доступно для обладателей любой роли. RBAC предоставляет роли владельца, участника и читателя. По умолчанию все администраторы службы являются участниками роли владельца.

<a name="service-access-and-authentication"></a>

## <a name="service-access-and-authentication"></a>Доступ к службе и проверка подлинности

Хотя Когнитивный поиск Azure наследует меры безопасности платформы Azure, она также предоставляет собственную проверку подлинности на основе ключей. Ключ API является строкой, состоящей из случайно сгенерированных букв и цифр. Тип ключа (администратор или запрос) определяет уровень доступа. Отправка допустимого ключа представляет собой доказательство того, что запрос исходит от доверенной сущности. 

Существует два уровня доступа к службе поиска, включаемые двумя типами ключей.

* Доступ администратора (применяется к любым операциям чтения и записи в отношении службы).
* Доступ к запросам (действует только для операций чтения, например для запросов к коллекции документов индекса).

*Ключи администратора* создаются в процессе подготовки службы. Существует два ключа администратора, обозначенные для упорядочения как *первичный* и *вторичный*, хотя в действительности они являются взаимозаменяемыми. У каждой службы есть два ключа администратора, чтобы вы могли сменять их, не теряя доступа к службе. Вы можете периодически [повторно создать ключ администратора](search-security-api-keys.md#regenerate-admin-keys) в соответствии с рекомендациями по обеспечению безопасности Azure, но нельзя добавить общее число ключей администратора. Для одной службы поиска существует не более двух ключей администрирования.

*Ключи запроса* создаются по мере необходимости и предназначены для клиентских приложений, которые выдают запросы. Вы можете создать до 50 ключей поисковых запросов. В коде приложения укажите URL-адрес поиска и ключ API запроса, чтобы разрешить доступ только для чтения к коллекции Documents определенного индекса. Используемые вместе конечная точка, ключ API с доступом только для чтения и целевой индекс определяют область применения и уровень доступа для подключения из клиентского приложения.

Проверка подлинности требуется для каждого запроса, который состоит из обязательного ключа, операции и объекта. Для обеспечения полной безопасности операций службы достаточно двух уровней разрешений (полные или только для чтения) и контекста (например, для операции запроса к индексу). Дополнительные сведения о ключах см. в статье о [создании ключей api и управлении ими](search-security-api-keys.md).

## <a name="index-access"></a>Доступ к индексу

В Когнитивный поиск Azure отдельный индекс не является защищаемым объектом. Вместо этого доступ к индексу определяется на уровне службы (доступ на чтение или запись), а также контекстом операции.

В случае с доступом пользователей можно структурировать запросы для подключения с использованием ключа запроса (после чего любой запрос становится доступным только для чтения) и добавить конкретный индекс, используемый приложением. В запросе невозможно объединить индексы или получить доступ к нескольким индексам одновременно, поэтому все запросы по определению направляются к одному индексу. Таким образом, структура самого запроса (ключ и один целевой индекс) определяет границы безопасности.

Доступ администратора и разработчика к индексам недифференцированный: для обоих типов доступа необходимо разрешение на запись для создания, удаления и обновления объектов, управляемых службой. Любой пользователь, имеющий ключ администратора к службе, может прочитать, изменить или удалить любой индекс в той же службе. Решением для защиты от случайного или злонамеренного удаления индексов являются внутренние средства управления исходным кодом для ресурсов кода, которые позволяют отменить нежелательное удаление или изменение индекса. Когнитивный поиск Azure отработка отказа в кластере для обеспечения доступности, но не сохраняет и не выполняет собственный код, используемый для создания или загрузки индексов.

Для мультитенантных решений, границы безопасности которых должны находиться на уровне индексов, такие решения, как правило, содержат средний уровень, на котором клиенты обрабатывают изоляцию индекса. Дополнительные сведения о варианте использования для нескольких клиентов см. в статье [шаблоны разработки для многоклиентских приложений SaaS и Azure когнитивный Поиск](search-modeling-multitenant-saas-applications.md).

## <a name="admin-access"></a>Административный доступ

[Доступ на основе ролей (RBAC)](https://docs.microsoft.com/azure/role-based-access-control/overview) определяет, есть ли у вас доступ к элементам управления в службе и ее содержимом. Если вы являетесь владельцем или участником службы Когнитивный поиск Azure, вы можете использовать портал или модуль PowerShell **AZ. Search** для создания, обновления или удаления объектов в службе. Вы также можете использовать [REST API управления когнитивный Поиск Azure](https://docs.microsoft.com/rest/api/searchmanagement/search-howto-management-rest-api).

## <a name="user-access"></a>Доступ пользователей

По умолчанию доступ пользователя к индексу определяется ключом доступа в запросе. Большинство разработчиков создают и назначают [*ключи запросов*](search-security-api-keys.md) для поисковых запросов на стороне клиента. Благодаря ключу запроса можно получить доступ на чтение всего содержимого индекса.

Если требуется детальный, индивидуально настраиваемый элемент управления над содержимым, можно компилировать фильтры безопасности в запросах, возвращающих документы, связанные с заданным удостоверением безопасности. Вместо предопределенных ролей и назначений ролей управление доступом на основе удостоверений реализуется как *фильтр*, обрезающий результаты поиска документов и содержимого на основе удостоверений. В следующей таблице описаны два подхода к обрезке результатов поиска несанкционированного содержимого.

| Подход | Description |
|----------|-------------|
|[Security filters for trimming results in Azure Search](search-security-trimming-for-azure-search.md) (Фильтры безопасности для обрезки результатов Поиска Azure)  | Документирует базовый рабочий процесс для реализации управления доступом на основе удостоверений пользователей. Описывает добавление удостоверений безопасности в индекс, а также объясняет фильтрацию этого поля для усечения результатов запрещенного содержимого. |
|[Security filters for trimming Azure Search results using Active Directory identities](search-security-trimming-for-azure-search-with-aad.md) (Фильтры безопасности для обрезки результатов Поиска Azure с использованием удостоверений Active Directory)  | Эта статья дополняет предыдущую статью, в ней приведены действия для получения удостоверений из Azure Active Directory (AAD), одной из [бесплатных служб](https://azure.microsoft.com/free/) на облачной платформе Azure. |

## <a name="table-permissioned-operations"></a>Таблица. Разрешенные операции

В следующей таблице перечислены операции, разрешенные в Azure Когнитивный поиск, а также ключ, разблокирующий доступ к определенной операции.

| Операция | Разрешения |
|-----------|-------------------------|
| Создание службы | Владелец подписки Azure|
| Масштабирование службы | Ключ администратора, владелец или участник RBAC ресурса  |
| удаление службы; | Ключ администратора, владелец или участник RBAC ресурса |
| Создание, изменение, удаление объектов в службе: <br>индексы и элементы компонентов (включая определения анализатора, профили оценки, параметры CORS), индексаторы, источники данных, синонимы, средства подбора. | Ключ администратора, владелец или участник RBAC ресурса  |
| Запрос индекса | Ключ администратора или запроса (RBAC не применяется) |
| Запрос сведений о системе, например возвращение статистики, количества и списков объектов. | Ключ администратора, RBAC ресурса (владелец, участник или читатель) |
| Управление ключами администратора | Ключ администратора, владелец или участник RBAC ресурса. |
| Управление ключами запросов |  Ключ администратора, владелец или участник RBAC ресурса.  |

## <a name="physical-security"></a>Физическая безопасность

Центры обработки данных Майкрософт обеспечивают ведущую в отрасли физическую безопасность и соответствуют широкому спектру стандартов и нормативных требований. Дополнительные сведения см. на странице [глобальных центров обработки данных](https://www.microsoft.com/cloud-platform/global-datacenters) или ознакомьтесь с коротким видеороликом о безопасности центров обработки данных.

> [!VIDEO https://www.youtube.com/embed/r1cyTL8JqRg]


## <a name="see-also"></a>См. также

+ [Создание индекса службы поиска Azure с помощью пакета SDK для .NET](search-create-index-dotnet.md)
+ [Создание индекса службы поиска Azure с помощью REST API](search-create-index-rest-api.md)
+ [Управление доступом на основе удостоверений с помощью фильтров Когнитивный поиск Azure](search-security-trimming-for-azure-search.md)
+ [Active Directory управления доступом на основе удостоверений с помощью фильтров Когнитивный поиск Azure](search-security-trimming-for-azure-search-with-aad.md)
+ [Фильтры в Когнитивный поиск Azure](search-filters.md)