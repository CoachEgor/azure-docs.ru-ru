---
title: Безопасность и конфиденциальность данных
titleSuffix: Azure Cognitive Search
description: Azure Cognitive Search соответствует сертификатам SOC 2, HIPAA и другим сертификатам. Шифрование подключения и данных, аутентификация и доступ к идентификационным данным через идентификаторы безопасности пользователей и групп в выражениях фильтров.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 04/21/2020
ms.openlocfilehash: 4db9624fbc71e48fcc10ae1d9a1d700d301248a2
ms.sourcegitcommit: 31e9f369e5ff4dd4dda6cf05edf71046b33164d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2020
ms.locfileid: "81759549"
---
# <a name="security-and-data-privacy-in-azure-cognitive-search"></a>Безопасность и конфиденциальность данных в Azure Cognitive Search

Всеобъемлющие функции безопасности и элементы управления доступом встроены в Azure Cognitive Search, чтобы гарантировать, что частный контент остается таким. В этой статье перечислены функции безопасности и соответствие стандартам, встроенные в Azure Cognitive Search.

Архитектура безопасности Azure Cognitive Search охватывает физическую безопасность, зашифрованные передачи, зашифрованное хранилище и соответствие стандартам в масштабах всей платформы. В оперативном плане Azure Cognitive Search принимает только аутентифицированные запросы. При необходимости можно добавить элементы управления доступом к содержимому для отдельного пользователя с помощью фильтров безопасности. В этой статье рассматривается безопасность на каждом уровне, но основное внимание уделяется тому, как данные и операции защищены в Azure Cognitive Search.

## <a name="standards-compliance-iso-27001-soc-2-hipaa"></a>Соответствие стандартам ISO 27001, SOC 2 и HIPAA

Azure Cognitive Search сертифицирован по следующим стандартам, как [было объявлено в июне 2018 года:](https://azure.microsoft.com/blog/azure-search-is-now-certified-for-several-levels-of-compliance/)

+ [ISO 27001:2013](https://www.iso.org/isoiec-27001-information-security.html). 
+ [SOC 2 типа 2](https://www.aicpa.org/interestareas/frc/assuranceadvisoryservices/aicpasoc2report.html). Чтобы просмотреть полный отчет, перейдите к [отчету SOC 2 типа II для Azure для государственных организаций](https://servicetrust.microsoft.com/ViewPage/MSComplianceGuide?command=Download&downloadType=Document&downloadId=93292f19-f43e-4c4e-8615-c38ab953cf95&docTab=4ce99610-c9c0-11e7-8c2c-f908a777fa4d_SOC%20%2F%20SSAE%2016%20Reports). 
+ [Акт о передаче и защите данных учреждений здравоохранения (HIPAA)](https://en.wikipedia.org/wiki/Health_Insurance_Portability_and_Accountability_Act).
+ [GxP (21 CFR, ч. 11)](https://en.wikipedia.org/wiki/Title_21_CFR_Part_11).
+ [HITRUST](https://en.wikipedia.org/wiki/HITRUST).
+ [PCI DSS, уровень 1](https://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard).

Соответствие стандартам относится к общедоступным функциям. Функции в предварительной версии будут сертифицированы, когда станут общедоступными. Не следует их использовать в решениях со строгими требованиями к соответствию стандартам. Сведения о сертификатах соответствия см. в документе [Overview of Microsoft Azure compliance](https://gallery.technet.microsoft.com/Overview-of-Azure-c1be3942) (Общие сведения о соответствии требованиям Microsoft Azure) и в [центре управления безопасностью](https://www.microsoft.com/en-us/trustcenter). 

## <a name="encrypted-transmission-and-storage"></a>Зашифрованная передача и хранение

Шифрование распространяется на весь конвейер индексирования: от подключений, передачи и вплоть до индексированных данных, хранящихся в Azure Cognitive Search.

| Уровень безопасности | Описание |
|----------------|-------------|
| Шифрование при передаче <br>(HTTPS, SSL, TLS) | Azure Cognitive Search слушается на порте HTTPS 443. Подключения к службам Azure по всей платформе зашифрованы. <br/><br/>Все взаимодействия Azure Cognitive Search с клиентом и службой используют шифрование SSL/TLS 1.2. Более ранние версии (1.0 или 1.1) не поддерживаются.|
| Шифрование при хранении <br>Управляемые Microsoft ключи | Шифрование происходит внутренне в процессе индексирования и не оказывает заметного влияния на время выполнения индексирования или размер индекса. Оно выполняется автоматически во всех процессах индексирования, включая добавочные обновления индекса, который не полностью зашифрован (создан до января 2018 г.).<br><br>На внутреннем уровне шифрование основывается на [шифровании службы хранилища Azure](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) с использованием 256-разрядного [шифрования AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard).<br><br> Шифрование является внутренним для Azure Cognitive Search, с сертификатами и ключами шифрования, управляемыми внутри корпорации Майкрософт, и универсально применяется. Вы не можете включать или отключать шифрование, подставлять собственные ключи или управлять ими, просматривать параметры шифрования на портале или с помощью программных средств.<br><br>Шифрование в состоянии покоя было объявлено 24 января 2018 года и распространяется на все уровни обслуживания, включая бесплатный уровень, во всех регионах. Для полного шифрования индексы, созданные до этой даты, необходимо удалить и создать заново, чтобы шифрование вступило в силу. В противном случае будут зашифрованы только новые данные, добавленные после 24 января.|
| Шифрование при хранении <br>Ключами управляет пользователь | Шифрование с ключами, управляемыми клиентом, теперь, как правило, доступно для поисковых услуг, созданных в январе 2019 года или после нее. Он не поддерживается на бесплатных (общих) услуг.<br><br>Индексы когнитивного поиска Azure и карты синонимов теперь могут быть зашифрованы в состоянии покоя с помощью ключей, управляемых клиентом в Azure Key Vault. Чтобы узнать больше, смотрите [Управление ключами шифрования в Azure Cognitive Search](search-security-manage-encryption-keys.md).<br><br>Эта функция не заменяет шифрование по умолчанию в состоянии покоя, а применяется в дополнение к нему.<br><br>Включение этой функции увеличит размер индекса и ухудшит производительность запроса. На основе наблюдений на сегодняшний день можно ожидать увеличения на 30%-60% времени запроса, хотя фактическая производительность будет варьироваться в зависимости от определения индекса и типов запросов. Из-за этого влияния производительности, мы рекомендуем включить эту функцию только на индексы, которые действительно требуют его.

## <a name="azure-wide-user-access-controls"></a>Элементы для управления доступом пользователей в Azure

Несколько механизмов безопасности доступны по всему Azure и, таким образом, автоматически доступны для создаваемых ресурсов Azure Cognitive Search.

+ [Блокировки на уровне подписки или ресурсов для предотвращения удаления](../azure-resource-manager/management/lock-resources.md)
+ [Управление доступом на основе ролей (RBAC) для управления доступом к информации и административным операциям](../role-based-access-control/overview.md)

Все службы Azure поддерживают элементы управления доступом на основе ролей (RBAC) для согласованного задания уровней доступа во всех службах. Например, просмотр конфиденциальных данных, таких как ключ админа, ограничен ролями владельца и вкладчика. Тем не менее, статус сервиса просмотра доступен для участников любой роли. RBAC предоставляет роли владельца, участника и читателя. По умолчанию все администраторы службы являются участниками роли владельца.

<a name="service-access-and-authentication"></a>

## <a name="endpoint-access"></a>Доступ к конечным точкам

### <a name="public-access"></a>Открытый доступ

Azure Cognitive Search наследует гарантии безопасности платформы Azure и обеспечивает собственную аутентификацию на основе ключей. Ключ API является строкой, состоящей из случайно сгенерированных букв и цифр. Тип ключа (администратор или запрос) определяет уровень доступа. Отправка допустимого ключа представляет собой доказательство того, что запрос исходит от доверенной сущности. 

Существует два уровня доступа к службе поиска, включаемые двумя типами ключей.

* Доступ администратора (применяется к любым операциям чтения и записи в отношении службы).
* Доступ к запросу (действительный для операций только для чтения, таких как запросы, против сбора документов индекса)

*Ключи админ* создаются при предоставлении услуги. Существует два ключа администратора, обозначенные для упорядочения как *первичный* и *вторичный*, хотя в действительности они являются взаимозаменяемыми. У каждой службы есть два ключа администратора, чтобы вы могли сменять их, не теряя доступа к службе. Вы можете периодически [регенерировать ключ-админ](search-security-api-keys.md#regenerate-admin-keys) в рекомендациях безопасности Azure, но нельзя добавлять к общему количеству ключей админ. На одну службу поиска имеется не более двух ключей админ.

*Ключи запроса* создаются по мере необходимости и предназначены для клиентских приложений, которые выдают запросы. Вы можете создать до 50 ключей поисковых запросов. В коде приложения указан url-адрес поиска и api-ключ запроса, позволяющий доступ только для чтения к сбору документов определенного индекса. Используемые вместе конечная точка, ключ API с доступом только для чтения и целевой индекс определяют область применения и уровень доступа для подключения из клиентского приложения.

Проверка подлинности требуется для каждого запроса, который состоит из обязательного ключа, операции и объекта. Для обеспечения полной безопасности операций службы достаточно двух уровней разрешений (полные или только для чтения) и контекста (например, для операции запроса к индексу). Дополнительные сведения о ключах см. в статье о [создании ключей api и управлении ими](search-security-api-keys.md).

### <a name="restricted-access"></a>Ограниченный доступ

Если у вас есть государственная служба и вы хотите ограничить использование службы, вы можете использовать правило ограничения IP в версии Management REST API: 2020-03-13, [IpRule](https://docs.microsoft.com/rest/api/searchmanagement/2019-10-01-preview/createorupdate-service#IpRule). IpRule позволяет ограничить доступ к вашей службе, идентифицируя IP-адреса, индивидуально или в диапазоне, которые вы хотите предоставить доступ к вашей службе поиска. 

### <a name="private-access"></a>Частный доступ

[Частные конечные точки](https://docs.microsoft.com/azure/private-link/private-endpoint-overview) для Azure Cognitive Search позволяют клиенту виртуальной сети безопасно получать доступ к данным в поисковом индексе по [частной ссылке.](https://docs.microsoft.com/azure/private-link/private-link-overview) Частная конечная точка использует IP-адрес из виртуального сетевого адреса для службы поиска. Сетевой трафик между клиентом и поисковым сервисом пересекает виртуальную сеть и частную ссылку на магистральной сети Microsoft, исключая воздействие из общедоступного интернета.

[Виртуальная сеть Azure (VNet)](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) обеспечивает безопасную связь между ресурсами, с вашей персональной сетью, а также с Интернетом. 

## <a name="index-access"></a>Доступ к индексу

В Azure Cognitive Search отдельный индекс не является предметом безопасности. Вместо этого доступ к индексу определяется на уровне службы (доступ на чтение или запись), а также контекстом операции.

В случае с доступом пользователей можно структурировать запросы для подключения с использованием ключа запроса (после чего любой запрос становится доступным только для чтения) и добавить конкретный индекс, используемый приложением. В запросе невозможно объединить индексы или получить доступ к нескольким индексам одновременно, поэтому все запросы по определению направляются к одному индексу. Таким образом, структура самого запроса (ключ и один целевой индекс) определяет границы безопасности.

Доступ администратора и разработчика к индексам недифференцированный: для обоих типов доступа необходимо разрешение на запись для создания, удаления и обновления объектов, управляемых службой. Любой пользователь, имеющий ключ администратора к службе, может прочитать, изменить или удалить любой индекс в той же службе. Решением для защиты от случайного или злонамеренного удаления индексов являются внутренние средства управления исходным кодом для ресурсов кода, которые позволяют отменить нежелательное удаление или изменение индекса. Azure Cognitive Search не удалось выполнить в кластере для обеспечения доступности, но он не хранит и не выполняет свой собственный код, используемый для создания или загрузки индексов.

Для мультитенантных решений, границы безопасности которых должны находиться на уровне индексов, такие решения, как правило, содержат средний уровень, на котором клиенты обрабатывают изоляцию индекса. Для получения дополнительной информации о случае мультитенантного использования [см. шаблоны проектирования для мультитенантных приложений SaaS и Azure Cognitive Search.](search-modeling-multitenant-saas-applications.md)

## <a name="authentication"></a>Аутентификация

### <a name="admin-access"></a>Доступ к админу

[Доступ на основе ролей (RBAC)](https://docs.microsoft.com/azure/role-based-access-control/overview) определяет, есть ли у вас доступ к контролю над службой и ее содержимым. Если вы являетесь владельцем или участником службы когнитивного поиска Azure, вы можете использовать портал или модуль PowerShell **Az.Search** для создания, обновления или удаления объектов в службе. Вы также можете использовать [Azure Cognitive Search Management REST API.](https://docs.microsoft.com/rest/api/searchmanagement/search-howto-management-rest-api)

### <a name="user-access"></a>Доступ пользователей

По умолчанию доступ пользователя к индексу определяется ключом доступа в запросе. Большинство разработчиков создают и назначают [*ключи запросов*](search-security-api-keys.md) для поисковых запросов на стороне клиента. Благодаря ключу запроса можно получить доступ на чтение всего содержимого индекса.

Если требуется детальный, индивидуально настраиваемый элемент управления над содержимым, можно компилировать фильтры безопасности в запросах, возвращающих документы, связанные с заданным удостоверением безопасности. Вместо предопределенных ролей и назначений ролей управление доступом на основе удостоверений реализуется как *фильтр*, обрезающий результаты поиска документов и содержимого на основе удостоверений. В следующей таблице описаны два подхода к обрезке результатов поиска несанкционированного содержимого.

| Подход | Описание |
|----------|-------------|
|[Security filters for trimming results in Azure Search](search-security-trimming-for-azure-search.md) (Фильтры безопасности для обрезки результатов Поиска Azure)  | Документирует базовый рабочий процесс для реализации управления доступом на основе удостоверений пользователей. Описывает добавление удостоверений безопасности в индекс, а также объясняет фильтрацию этого поля для усечения результатов запрещенного содержимого. |
|[Security filters for trimming Azure Search results using Active Directory identities](search-security-trimming-for-azure-search-with-aad.md) (Фильтры безопасности для обрезки результатов Поиска Azure с использованием удостоверений Active Directory)  | Эта статья дополняет предыдущую статью, в ней приведены действия для получения удостоверений из Azure Active Directory (AAD), одной из [бесплатных служб](https://azure.microsoft.com/free/) на облачной платформе Azure. |

## <a name="table-permissioned-operations"></a>Таблица. Разрешенные операции

В следующей таблице кратко излагаются операции, разрешенные в Azure Cognitive Search и ключ, открывающая доступ к конкретной операции.

| Операция | Разрешения |
|-----------|-------------------------|
| Создание службы | Владелец подписки Azure|
| Масштабирование службы | Ключ админа, владелец RBAC или вкладчик на ресурсе  |
| удаление службы; | Ключ админа, владелец RBAC или вкладчик на ресурсе |
| Создание, изменение, удаление объектов в службе: <br>индексы и элементы компонентов (включая определения анализатора, профили оценки, параметры CORS), индексаторы, источники данных, синонимы, средства подбора. | Ключ админа, владелец RBAC или вкладчик на ресурсе  |
| Запрос индекса | Ключ администратора или запроса (RBAC не применяется) |
| Запрос сведений о системе, например возвращение статистики, количества и списков объектов. | Ключ администратора, RBAC ресурса (владелец, участник или читатель) |
| Управление ключами администратора | Ключ администратора, владелец или участник RBAC ресурса. |
| Управление ключами запросов |  Ключ администратора, владелец или участник RBAC ресурса.  |

## <a name="physical-security"></a>Физическая безопасность

Центры обработки данных Майкрософт обеспечивают ведущую в отрасли физическую безопасность и соответствуют широкому спектру стандартов и нормативных требований. Дополнительные сведения см. на странице [глобальных центров обработки данных](https://www.microsoft.com/cloud-platform/global-datacenters) или ознакомьтесь с коротким видеороликом о безопасности центров обработки данных.

> [!VIDEO https://www.youtube.com/embed/r1cyTL8JqRg]


## <a name="see-also"></a>См. также раздел

+ [Создание индекса службы поиска Azure с помощью пакета SDK для .NET](search-create-index-dotnet.md)
+ [Создание индекса службы поиска Azure с помощью REST API](search-create-index-rest-api.md)
+ [Управление доступом на основе идентификации с помощью фильтров Azure Cognitive Search](search-security-trimming-for-azure-search.md)
+ [Управление доступом на основе active Directory с помощью фильтров Azure Cognitive Search](search-security-trimming-for-azure-search-with-aad.md)
+ [Фильтры в когнитивном поиске Azure](search-filters.md)