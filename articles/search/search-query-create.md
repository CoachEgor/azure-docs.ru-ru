---
title: Создание простого запроса
titleSuffix: Azure Cognitive Search
description: Узнайте, как создать запрос запроса в Когнитивный поиск, какие средства и интерфейсы API следует использовать для тестирования и кода, а также как решения запросов начинаются с проектирования индекса.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 12/12/2020
ms.openlocfilehash: ace887396bacf264f0ffbd186ef1349e96496786
ms.sourcegitcommit: 1bdcaca5978c3a4929cccbc8dc42fc0c93ca7b30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/13/2020
ms.locfileid: "97371222"
---
# <a name="create-a-basic-query-in-azure-cognitive-search"></a>Создание простого запроса в Azure Когнитивный поиск

В этой статье Пошаговое описание построения запросов. Примеры находятся в ОСТАВШЕЙся области, что позволяет копировать строки в **Обозреватель поиска** на портале или интерактивно создавать запросы с помощью POST или Visual Studio Code. Для примеров в этой статье можно использовать любой уровень или версию Когнитивный поиск.

## <a name="choose-a-tool-or-api"></a>Выбор инструмента или API

Для создания запросов на тестирование или рабочую нагрузку выберите один из следующих средств и API-интерфейсов.

| Методика | Описание |
|-------------|-------------|
| Портал| [Обозреватель поиска (портал)](search-explorer.md) предоставляет панель поиска и параметры для выбора индекса и версии API. Будут возвращены результаты в виде документов JSON. Рекомендуется для раннего исследования, тестирования и проверки. <br/>[Подробнее.](search-explorer.md) |
| Средства веб-тестирования| [POST или Visual Studio Code](search-get-started-rest.md) являются надежными вариантами для вызовов составления для [поиска документов](/rest/api/searchservice/search-documents) . REST API поддерживает все программные операции в Когнитивный поиск Azure, поэтому запросы можно выдавать в интерактивном режиме, чтобы понять, как это работает перед инвестиции в код.  |
| Пакет Azure SDK | [Сеарчклиент (.NET)](/dotnet/api/azure.search.documents.searchclient) можно использовать для запроса индекса поиска в C#.  [Подробнее.](search-howto-dotnet-sdk.md) <br/><br/>[Сеарчклиент (Python)](/dotnet/api/azure.search.documents.searchclient) можно использовать для запроса индекса поиска в Python. [Подробнее.](search-get-started-python.md) <br/><br/> [Сеарчклиент (JavaScript)](/dotnet/api/azure.search.documents.searchclient) можно использовать для запроса индекса поиска в JavaScript. [Подробнее.](search-get-started-javascript.md)  |

## <a name="set-up-a-search-client"></a>Настройка клиента поиска

Клиент поиска проверяет подлинность службы поиска, отправляет запросы и обрабатывает ответы. Запросы всегда направляются в коллекцию Documents одного индекса. Невозможно объединить индексы или создать пользовательские или временные структуры данных и указать их в качестве цели запроса.

### <a name="in-the-portal"></a>Просмотр на портале

Обозреватель поиска и другие средства портала имеют встроенное клиентское подключение к службе с индексами прямого доступа и другими объектами на страницах портала. Для доступа к средствам, мастерам и объектам предполагается, что у вас есть права администратора на доступ к службе. С помощью обозревателя поиска можно сосредоточиться на определении строки поиска и других параметров. 

### <a name="using-rest"></a>Использование REST

Для вызовов RESTFUL можно использовать [POST или аналогичные средства](search-get-started-rest.md) в качестве клиента для указания запроса [поиска документов](/rest/api/searchservice/search-documents) . Каждый запрос является автономным, поэтому необходимо предоставить конечную точку (URL-адрес службы) и ключ API запроса для доступа. В зависимости от запроса URL-адрес может также включать имя индекса, коллекцию документов и другие свойства. Некоторые свойства, такие как тип содержимого и ключ API, передаются в заголовке запроса. Другие параметры могут передаваться по URL-адресу или в тексте запроса. Для всех вызовов RESTFUL требуется ключ API для проверки подлинности и версия API.

### <a name="using-azure-sdks"></a>Использование пакетов SDK для Azure

Пакеты SDK для Azure предоставляют клиентам поиска, которые могут сохранять состояние, что позволяет повторно использовать подключение. Для операций запроса будет создан экземпляр Сеарчклиент и предоставлены значения для следующих свойств: конечная точка, ключ, индекс. Затем можно вызвать метод Search для предоставления строки запроса. 

| Язык | Клиент | Пример |
|----------|--------|---------|
| C# и .NET | [сеарчклиент](/dotnet/api/azure.search.documents.searchclient) | [Отправка первого поискового запроса на языке C #](/dotnet/api/overview/azure/search.documents-readme#send-your-first-search-query) |
| Python      | [сеарчклиент](/python/api/azure-search-documents/azure.search.documents.searchclient) | [Отправка первого поискового запроса в Python](/python/api/overview/azure/search-documents-readme#send-your-first-search-request) |
| Java        | [сеарчклиент](/java/api/com.azure.search.documents.searchclient) | [Отправка первого поискового запроса в Java](/java/api/overview/azure/search-documents-readme#send-your-first-search-query)  |
| JavaScript  | [сеарчклиент](/javascript/api/@azure/search-documents/searchclient) | [Отправка первого поискового запроса в JavaScript](/javascript/api/overview/azure/search-documents-readme#send-your-first-search-query)  |

## <a name="choose-a-parser-simple--full"></a>Выберите средство синтаксического анализа: simple (простое) или full (полное)

Когнитивный поиск Azure предоставляет возможность выбора между двумя синтаксическими анализаторами запросов для обработки типичных и специализированных запросов. Запросы, использующие простой синтаксический анализатор, обычно являются поисковыми запросами полнотекстового поиска, которые обрабатываются с помощью [простого синтаксиса запросов](query-simple-syntax.md), выбранного по умолчанию в качестве скорости и эффективности в произвольных текстовых запросах. Этот синтаксис поддерживает ряд общих операторов поиска, включая AND, OR, NOT, а также фразы, суффиксы и операторы приоритета.

[Полный синтаксис запросов Lucene](query-Lucene-syntax.md#bkmk_syntax), который включается при добавлении параметра `queryType=full` в запрос, позволяет применить широко распространенный и выразительный язык запросов, разработанный в составе библиотеки [Apache Lucene](https://lucene.apache.org/core/6_6_1/queryparser/org/apache/lucene/queryparser/classic/package-summary.html). Полный синтаксис расширяет простой синтаксис. Средство полного синтаксического анализа Lucene поймет любой запрос, созданный для простого средства синтаксического анализа. 

В следующих примерах показан один и тот же запрос, но с разными **`queryType`** параметрами, которые дают разные результаты. В первом запросе параметр `^3` After `historic` рассматривается как часть условия поиска. Итоговый результат для этого запроса — "Маркуис за & Suite", в его описание которого есть *океанские* части.

```http
POST /indexes/hotels-sample-index/docs/search?api-version=2020-06-30
{
    "count": true,
    "queryType": "simple",
    "search": "ocean historic^3",
    "searchFields": "Description",
    "select": "HotelId, HotelName, Tags, Description",
}
```

Тот же запрос, использующий полное средство синтаксического анализа Lucene, интерпретируется `^3` как повышение в поле. При переключении синтаксических анализаторов изменяется ранг, а результаты, содержащие термин с *предысторией* , перемещаются в начало.

```http
POST /indexes/hotels-sample-index/docs/search?api-version=2020-06-30
{
    "count": true,
    "queryType": "full",
    "search": "ocean historic^3",
    "searchFields": "Description",
    "select": "HotelId, HotelName, Tags, Description",
}
```

## <a name="enable-query-behaviors-in-an-index"></a>Включение поведения запросов в индексе

Проектирование индексов и проектирование запросов тесно связаны в Azure Когнитивный поиск. *Схема индекса* с атрибутами каждого поля определяет тип запроса, который можно построить.

Атрибуты индекса задают допустимые операции для набора полей в индексе, например возможность поиска (*searchable*), извлечения (*retrievable*), сортировки (*sortable*) и фильтрации (*filterable*). В примерах запросов `"$orderby": "Rating desc"` работает только потому, что поле Рейтинг помечено как *сортируемый* в схеме индекса.

![Определение индекса для примера отеля](./media/search-query-overview/hotel-sample-index-definition.png "Определение индекса для примера отеля")

Приведенный выше снимок экрана представляет собой частичный список атрибутов индекса для [примера индекса гостиниц](search-get-started-portal.md). На портале можно создать и просмотреть всю схему индекса. Дополнительные сведения об атрибутах индекса см. в разделе [CREATE INDEX (REST API)](/rest/api/searchservice/create-index).

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы понимаете, как создается запрос, попробуйте использовать примеры с использованием простого и полного синтаксиса.

+ [Примеры простых запросов](search-query-simple-examples.md)
+ [Примеры синтаксиса запросов Lucene для создания расширенных запросов](search-query-lucene-examples.md)
+ [How full text search works in Azure Cognitive Search](search-lucene-query-architecture.md) (Как выполняется полнотекстовый поиск в Когнитивном поиске Azure)