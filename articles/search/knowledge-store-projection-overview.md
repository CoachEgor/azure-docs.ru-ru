---
title: Работа с проекциями в хранилище базы знаний (Предварительная версия) — службы поиска Azure
description: Сохранить и формирование богатый набор данных из конвейера индексирования искусственного Интеллекта для использования в сценариях, кроме поиска
manager: eladz
author: vkurpad
services: search
ms.service: search
ms.devlang: NA
ms.topic: conceptual
ms.date: 05/02/2019
ms.author: vikurpad
ms.custom: seomay2019
ms.openlocfilehash: f1c7278909557dc92f86c5dfc1f190fddf33f607
ms.sourcegitcommit: f6c85922b9e70bb83879e52c2aec6307c99a0cac
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2019
ms.locfileid: "65540807"
---
# <a name="working-with-projections-in-a-knowledge-store-in-azure-search"></a>Работа с проекциями в хранилище базы знаний в службе поиска Azure

> [!Note]
> Хранилище знаний находится в предварительной версии и не предназначена для использования в рабочей среде. [2019 г. версия REST API-05-06-Preview](search-api-preview.md) предоставляет эту функцию. В настоящее время не поддерживается пакет SDK для .NET.
>

Поиск Azure обеспечивает содержимого обогащение через когнитивные навыки работы с искусственным Интеллектом и пользовательские методики в процессе индексирования. Усовершенствования Добавление структуры в документах и сделать поиск более эффективными. Во многих случаях Обогащенные документов полезны для сценариев, отличных от поиска, например, для базы знаний интеллектуального анализа данных.

Проекции, в состав [хранилища знаний](knowledge-store-concept-intro.md), представляют собой виды богатый набор документов, которые могут быть сохранены в физическое хранилище для целей интеллектуального анализа данных базы знаний. Проекция позволяет «проецировать» свои данные фигуры, которая соответствует вашим потребностям, сохраняя связи, таким образом, чтобы такие средства, как Power BI может считывать данные с без дополнительных усилий. 

Проекции может быть табличных, хранящиеся в строках и столбцах в хранилище таблиц Azure или объектов JSON, хранящихся в хранилище BLOB-объектов Azure. Так как он содержит также можно определить несколько проекций данных. Это полезно в том случае, при необходимости форму для индивидуального использования вариантов и тех же данных. 

Хранилище знаний поддерживает два типа проекции:

+ **Таблицы**. Для данных, лучше всего представлены как строки и столбцы таблица проекции позволяют определять схематизированных фигуры или проекции в хранилище таблиц. 

+ **Объекты**: При необходимости JSON-представление данных и усовершенствования, проекции объекта сохраняются в виде больших двоичных объектов.

Для просмотра проекций, которые определены в контексте, пошагово [как приступить к работе с хранилищем базы знаний](knowledge-store-howto.md)

## <a name="projection-groups"></a>Проекция групп

В некоторых случаях необходимо будет проецировать Обогащенные данные в различные фигуры для достижения различных целей. Хранилище базы знаний можно задать несколько групп проекций. Проекция группы имеют следующие основные характеристики взаимная Исключительность и связанности.

### <a name="mutually-exclusivity"></a>Взаимно исключительные права

Все содержимое, проецируется в одну группу не зависит от данных, проецируемых в другие группы проекции. Это означает, что можно иметь те же данные в форму, но повторяющееся в каждой группе проекции. 

Один ограничению, установленному в группах проекции является взаимная Исключительность типов проекции с группой проекции. Можно определить только проекции таблицы или проекции объекта в пределах одной группы. Если вы хотите, таблиц и объектов, определите одну группу проекции для таблиц и вторую группу проекции для объектов.

### <a name="relatedness"></a>Связанности

Все содержимое, проецируется в группе один проекции сохраняет связи в данных. Связи основаны на созданного ключа и каждый дочерний узел сохраняет ссылку на родительский узел. Связи не занимающие проекцию группы и таблицы или объекты, созданные в одной группе проекции не иметь отношений с данные, созданные в других группах проекции.

## <a name="input-shaping"></a>Входные данные формирование
Получение данных в структуре или фигуру использования ключей к эффективной, будь то таблицы или объекты. Возможность формировать или структуру данных, в зависимости от того, как вы планируете откройте и используйте ее является ключевой возможностью в виде **Shaper** навыкам сотрудника в квалификации.  

Проекции, легче определять при наличии объекта в дереве обогащение, которые соответствуют схеме проекции. Обновленный [Shaper навыков](cognitive-search-skill-shaper.md) позволяет создать объект из разных узлах дерева обогащение и родительских их в новый узел. **Shaper** навыков позволяет определять сложные типы с помощью вложенных объектов.

При наличии определенных новая фигура, которая содержит все элементы, которые необходимо проецировать как источник в проекции или в качестве входных данных другой навык теперь можно использовать эту фигуру.

## <a name="table-projections"></a>Проекции таблицы

Поскольку это делает, импорт проще, мы рекомендуем проекции таблицы для просмотра данных с помощью Power BI. Кроме того таблица проекций Разрешить изменение свойства "кратность" между связи таблицы. 

Вы можете проецировать одного документа в индексе по разным таблицам, сохраняя связи. При проецировании с несколькими таблицами, полный фигуры будет проецироваться в каждой таблице, если дочерний узел является источником другой таблицы в той же группе.

### <a name="defining-a-table-projection"></a>Определение таблицы проекции

При определении проекции таблицы в пределах `knowledgeStore` элемент имеющийся набор навыков запуска путем сопоставления узел в дереве обогащение с исходной таблицы. Обычно этот узел является выходным **Shaper** навыки, которые вы добавили в список навыки для создания конкретных фигуры, который необходимо спроецировать в таблицах. Узел, вы решили проекта могут быть отсечены проект на несколько таблиц. Определение таблицы приведен список таблиц, который необходимо спроецировать. 

Каждая таблица требует три свойства:

+ TableName: Имя таблицы в службе хранилища Azure.

+ generatedKeyName: Имя столбца для ключа, однозначно определяющее эту строку.

+ Источник: Узел в дереве обогащение извлекается вашей усовершенствования из. Это обычно является результатом выполнения shaper, но может быть выходные данные любого из навыков.

Ниже приведен пример таблицы проекции.

```json
{
    "name": "your-skillset",
    "skills": [
      …your skills
      
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [
            { "tableName": "MainTable", "generatedKeyName": "SomeId", "source": "/document/EnrichedShape" },
            { "tableName": "KeyPhrases", "generatedKeyName": "KeyPhraseId", "source": "/document/EnrichedShape/*/KeyPhrases/*" },
            { "tableName": "Entities", "generatedKeyName": "EntityId", "source": "/document/EnrichedShape/*/Entities/*" }
          ]
        },
        {
          "objects": [
            
          ]
        }
      ]
    }
}
```
Как показано в этом примере, ключевых фраз и сущностями моделируются в разных таблицах и будет содержать ссылку на родительский объект (MainTable) для каждой строки. 

На следующем рисунке показан ссылку Caselaw упражнение в [как приступить к работе с хранилищем базы знаний](knowledge-store-howto.md). В случае обращения имеет несколько мнения, куда будет полезно каждый мнение, путем определения объектов, содержащихся в нем может моделировать проекции, как показано ниже.

![Сущности и связи в таблицах](media/knowledge-store-projection-overview/TableRelationships.png "моделирование связей в таблице проекции")

## <a name="object-projections"></a>Объект проекции

Объект проекции являются представлениями JSON дерева обогащение, могут поступать из любого узла. Во многих случаях же **Shaper** навык, который создает проекцию в таблице можно использовать для создания в проекции объекта. 

```json
{
 
    "name": "your-skillset",
    "skills": [
      …your skills
      
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [ ]
        },
        {
          "objects": [
            {
              "storageContainer": "Reviews", 
              "format": "json", 
              "source": "/document/Review", 
              "key": "/document/Review/Id" 
            }
          ]
        }
      ]
    }
}
```

Создание в проекции объекта требует несколько атрибутов, связанных с объектами:

+ storageContainer: Контейнер, где будут храниться объекты
+ Источник: Путь к узлу дерева обогащение, который является корневым элементом проекции
+ Ключ: Путь, который представляет уникальный ключ для объекта для сохранения. Он будет использоваться для создания имени большого двоичного объекта в контейнере.

## <a name="projection-lifecycle"></a>Жизненный цикл проекции

Основывалась имеют жизненный цикл, который связан с источником данных в источнике данных. Как обновить и повторно индексированным данных основывалась обновляются с результатами усовершенствования, убедитесь, что ваш проекции всегда являются согласованными с данными из источника данных. Проекции наследуют политику удаления, настроенной для выбранного индекса. 

## <a name="using-projections"></a>С помощью проекции

После выполнения индексатора можно считывать прогнозируемые данные в контейнеры или таблицы, которые можно указать с помощью проекции. 

Для анализа просмотра в Power BI прост, как и Настройка хранилища таблиц Azure в качестве источника данных. Использование связей в данных очень легко можно создать набор визуализаций.

Кроме того, если необходимо использовать Обогащенные данные в конвейере обработки и анализа данных, вы можете [загрузка данных из больших двоичных объектов в таблице данных Pandas](../machine-learning/team-data-science-process/explore-data-blob.md).

Наконец Если вам нужно экспортировать данные из хранилища знаний, фабрика данных Azure предоставляет соединители, чтобы экспортировать данные и отправьте его в базе данных по своему усмотрению. 

## <a name="next-steps"></a>Дальнейшие действия

На следующем шаге создайте хранилище первой базы знаний, с помощью демонстрационных данных и инструкции.

> [!div class="nextstepaction"]
> [Создание хранилища знаний](knowledge-store-howto.md).