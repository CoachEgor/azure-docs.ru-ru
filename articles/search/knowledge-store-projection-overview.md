---
title: Работа с проекциями в хранилище знаний (Предварительная версия) — Поиск Azure
description: Сохраняйте и сообразайте Расширенные данные из конвейера индексирования искусственного интеллекта для использования в сценариях, отличных от поиска
manager: eladz
author: vkurpad
services: search
ms.service: search
ms.topic: conceptual
ms.date: 05/02/2019
ms.author: vikurpad
ms.subservice: cognitive-search
ms.openlocfilehash: 4fa669eaf96c08d7a2e1e7255ff6b1f6ff7b4f14
ms.sourcegitcommit: 36e9cbd767b3f12d3524fadc2b50b281458122dc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2019
ms.locfileid: "69639840"
---
# <a name="working-with-projections-in-a-knowledge-store-in-azure-search"></a>Работа с проекциями в хранилище знаний в службе поиска Azure

> [!Note]
> Доступна предварительная версия хранилища знаний, не предназначенная для использования в рабочей среде. Эта функция предоставляется в [версии REST API 2019-05-06-Preview](search-api-preview.md). Поддержка пакета SDK для .NET пока не реализована.
>

Поиск Azure позволяет расширить содержимое с помощью функций искусственного интеллекта и пользовательских навыков в процессе индексирования. Дополнения добавляют структуру к документам и делают поиск более эффективным. Во многих случаях обогащенные документы полезны для сценариев, отличных от поиска, например для интеллектуального анализа знаний.

Проекции, компонент [хранилища знаний](knowledge-store-concept-intro.md), представляют собой представления расширенных документов, которые можно сохранить в физическом хранилище в целях интеллектуального анализа знаний. Проекция позволяет "проецировать" свои данные в фигуру, которая соответствует вашим потребностям, сохраняя связи, чтобы такие средства, как Power BI, могли считывать данные без дополнительных усилий. 

Проекции могут быть табличными, с данными, хранящимися в строках и столбцах в хранилище таблиц Azure, или в объектах JSON, хранящихся в хранилище BLOB-объектов Azure. Можно определить несколько проекций данных, так как они дополняются углублением. Это полезно, если вы хотите, чтобы одни и те же данные отличались для отдельных вариантов использования. 

Хранилище знаний поддерживает два типа проекций:

+ **Таблицы**. Для данных, которые лучше представить в виде строк и столбцов, проекции таблиц позволяют определить схематизированных форму или проекцию в хранилище таблиц. 

+ **Объекты**: Если вам нужно представление JSON данных и дополнений, проекции объектов сохраняются как большие двоичные объекты.

Просмотр проекций, определенных в контексте, с пошаговыми инструкциями по [началу работы с хранилищем знаний](knowledge-store-howto.md)

## <a name="projection-groups"></a>Группы проекций

В некоторых случаях необходимо проецировать обогащенные данные на разных фигурах в соответствии с различными целями. Хранилище знаний позволяет определить несколько групп проекций. Группы проекций имеют следующие основные характеристики взаимной исключительные праваи и взаимосвязи.

### <a name="mutually-exclusivity"></a>Взаимно исключительные права

Все содержимое, проецированное в одну группу, не зависит от данных, проецируемых в другие группы проекций. Это означает, что одни и те же данные могут быть разными, но повторяться в каждой группе проекций. 

Одно ограничение, применяемое в группах проекций, является взаимно исключительные права типов проекции с группой проекций. В одной группе можно определить только проекции таблиц или проекции объектов. Если требуются обе таблицы и объекты, определите одну группу проекции для таблиц и вторую группу проекции для объектов.

### <a name="relatedness"></a>Взаимосвязь

Все содержимое, проецируемое в одной группе проекции, сохраняет связи между данными. Связи основываются на созданном ключе, и каждый дочерний узел оставляет ссылку на родительский узел. Связи не охватывают группы проекций, а таблицы или объекты, созданные в одной группе проекции, не имеют связи с данными, созданными в других группах проекций.

## <a name="input-shaping"></a>Формирование ввода
Получение данных в правой форме или структуре является ключом к эффективному использованию, они являются таблицами или объектами. Возможность формирования или структурирования данных в зависимости от того, как вы планируете обращаться к ним и использовать ее, является ключевой возможностью, предоставляемой в качестве навыка для набора навыков.  

Проекции проще определить при наличии в дереве обогащения объекта, соответствующего схеме проекции. Обновленные [навыки](cognitive-search-skill-shaper.md) работы с фигурами позволяют создать объект из различных узлов дерева обогащения и сделать его родительским для нового узла. Уровень навыка " **фигура** " позволяет определять сложные типы с вложенными объектами.

Если определена новая фигура, содержащая все элементы, которые необходимо проецировать, эту фигуру теперь можно использовать в качестве источника для проекций или в качестве входных данных для другого навыка.

## <a name="table-projections"></a>Проекции таблиц

Так как это упрощает импорт, мы рекомендуем использовать проекции таблиц для просмотра данных с помощью Power BI. Кроме того, проекции таблиц позволяют изменять количество элементов между связями между таблицами. 

Можно проецировать один документ в индексе в несколько таблиц, сохраняя связи. При проецировании на несколько таблиц в каждой таблице будет отображаться полная фигура, если только дочерний узел не является источником другой таблицы в той же группе.

### <a name="defining-a-table-projection"></a>Определение проекции таблицы

При определении проекции таблицы в `knowledgeStore` элементе набора навыков Начните с сопоставления узла в дереве обогащения с источником таблицы. Обычно этот узел является выходными данными о навыках, добавленных в список навыков для создания конкретной формы, необходимой для проецирования в таблицы. Выбранный для проекта узел можно разделить на несколько таблиц. Определение таблиц — это список таблиц, которые необходимо проецировать. 

Для каждой таблицы требуются три свойства:

+ TableName Имя таблицы в службе хранилища Azure.

+ Женератедкэйнаме: Имя столбца для ключа, уникально идентифицирующего эту строку.

+ Источник: Узел из дерева обогащения, из которого вы используете дополнения. Обычно это выходные данные фигуры, но могут быть выходными данными любого из навыков.

Ниже приведен пример проекций таблицы.

```json
{
    "name": "your-skillset",
    "skills": [
      …your skills
      
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [
            { "tableName": "MainTable", "generatedKeyName": "SomeId", "source": "/document/EnrichedShape" },
            { "tableName": "KeyPhrases", "generatedKeyName": "KeyPhraseId", "source": "/document/EnrichedShape/*/KeyPhrases/*" },
            { "tableName": "Entities", "generatedKeyName": "EntityId", "source": "/document/EnrichedShape/*/Entities/*" }
          ]
        },
        {
          "objects": [
            
          ]
        }
      ]
    }
}
```
Как показано в этом примере, ключевые фразы и сущности моделируются в разные таблицы и будут содержать ссылку на родительский элемент (MainTable) для каждой строки. 

На следующем рисунке приведена ссылка на Каселавное упражнение в [статье Начало работы с хранилищем знаний](knowledge-store-howto.md). В сценарии, где обращение имеет несколько мнений, и каждое из них дополняется путем определения сущностей, содержащихся в нем, можно моделировать проекции, как показано ниже.

![Сущности и связи в таблицах](media/knowledge-store-projection-overview/TableRelationships.png "Моделирование отношений в проекциях таблиц")

## <a name="object-projections"></a>Проекции объектов

Проекции объектов — это представления JSON дерева обогащения, которые могут быть источником из любого узла. Во многих случаях для создания проекции объекта можно использовать тот же навык, который создает проекцию таблицы. 

```json
{
 
    "name": "your-skillset",
    "skills": [
      …your skills
      
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [ ]
        },
        {
          "objects": [
            {
              "storageContainer": "Reviews", 
              "format": "json", 
              "source": "/document/Review", 
              "key": "/document/Review/Id" 
            }
          ]
        }
      ]
    }
}
```

Для создания проекции объекта требуется несколько атрибутов, характерных для объекта:

+ StorageContainer Контейнер, в котором будут сохранены объекты
+ Источник: Путь к узлу дерева обогащения, который является корнем проекции
+ раздел Путь, представляющий уникальный ключ для сохраняемого объекта. Он будет использоваться для создания имени большого двоичного объекта в контейнере.

## <a name="projection-lifecycle"></a>Жизненный цикл проекции

У ваших проекций есть жизненный цикл, связанный с исходными данными в источнике данных. По мере обновления и повторного индексирования данных ваши проекции обновляются с учетом результатов обогащения, гарантирующих, что проекции в конечном итоге согласуются с данными в источнике данных. Проекции наследуют политику удаления, настроенную для индекса. 

## <a name="using-projections"></a>Использование проекций

После выполнения индексатора можно считывать проецированные данные в контейнерах или таблицах, заданных с помощью проекций. 

Для аналитики исследование в Power BI — это просто Настройка табличного хранилища Azure в качестве источника данных. Вы можете легко создать набор визуализаций на данные, используя связи в.

Кроме того, если необходимо использовать обогащенные данные в конвейере обработки и анализа данных, вы можете [загрузить данные из больших двоичных объектов в Pandas](../machine-learning/team-data-science-process/explore-data-blob.md).

Наконец, если необходимо экспортировать данные из хранилища знаний, в фабрике данных Azure есть соединители для экспорта данных и их размещения в выбранной базе данных. 

## <a name="next-steps"></a>Следующие шаги

В качестве следующего шага создайте первое хранилище знаний, используя образцы данных и инструкции.

> [!div class="nextstepaction"]
> [Создание хранилища знаний](knowledge-store-howto.md).