---
title: Прогнозы в хранилище знаний (предварительный просмотр)
titleSuffix: Azure Cognitive Search
description: Сохранить и сформировать обогащенные данные из конвейера индексирования ИИ в хранилище знаний для использования в других сценариях, кроме полного поиска текста. Сейчас предоставляется общедоступная предварительная версия хранилища знаний.
manager: nitinme
author: vkurpad
ms.author: vikurpad
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 01/08/2020
ms.openlocfilehash: d264768bf27967d1a778400ae4e9e6f2e054d746
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "78942972"
---
# <a name="projections-in-a-knowledge-store-in-azure-cognitive-search"></a>Прогнозы в хранилище знаний в Azure Cognitive Search

> [!IMPORTANT] 
> Сейчас предоставляется общедоступная предварительная версия хранилища знаний. Для предварительной версии функции соглашение об уровне обслуживания не предусмотрено. Мы не рекомендуем использовать ее в рабочей среде. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/). [Версия REST API 2019-05-06-Preview](search-api-preview.md) предоставляет предварительные версии функций. Сейчас доступна ограниченная поддержка портала. Поддержка пакета SDK для .NET пока не реализована.

Azure Cognitive Search позволяет обогащать содержимое благодаря встроенным когнитивным навыкам и пользовательским навыкам в рамках индексации. Обогащение создает новую информацию там, где ранее не существовало: извлечение информации из изображений, обнаружение настроений, ключевых фраз и сущностей из текста, чтобы назвать несколько. Обогащение также добавляет структуру недифференцированному тексту. Все эти процессы приводят к тому, что документы делают полный поиск текста более эффективным. Во многих случаях обогащенные документы полезны для сценариев, помимо поиска, например для майнинга знаний.

Проекции, компонент [хранения знаний,](knowledge-store-concept-intro.md)являются представлениями обогащенных документов, которые могут быть сохранены для физического хранения для целей добычи знаний. Проекция позволяет «проецировать» данные в форму, которая соответствует вашим потребностям, сохраняя отношения, чтобы такие инструменты, как Power BI, могли читать данные без каких-либо дополнительных усилий.

Проекции могут быть табликами, с данными, хранящимися в строках и столбцах в хранилище таблицы Azure, или объектами JSON, хранящимися в хранилище Azure Blob. Вы можете определить несколько проекций ваших данных по мере их обогащения. Несколько проекций полезны, когда требуется, чтобы одни и те же данные формировались по-разному для отдельных случаев использования.

Хранилище знаний поддерживает три типа проекций:

+ **Таблицы**: Для данных, которые лучше всего представлены в виде строк и столбцов, прогнозы таблиц позволяют определить схемную форму или проекцию в таблице хранения. Только действительные объекты JSON могут быть проецированы как таблицы, обогащенный документ может содержать узлы, которые не называются объектами JSON, и при проецировании этих объектов, создать действительный объект JSON с навыком формовщика или внеочередным формированием.

+ **Объекты**: Когда вам нужно представление JSON ваших данных и обогащения, проекции объектов сохраняются как капли. Только действительные объекты JSON могут быть проецированы как объекты, обогащенный документ может содержать узлы, которые не называются объектами JSON, и при проецировании этих объектов, создать действительный объект JSON с навыком формовщика или внеочередным формированием.

+ **Файлы**: Когда вам нужно сохранить изображения, извлеченные из документов, файл проекции позволяют сохранить нормализованные изображения для хранения капли.

Чтобы увидеть проекции, определенные в контексте, шаг через [Создание хранилища знаний в REST](knowledge-store-create-rest.md).

## <a name="projection-groups"></a>Группы проекций

В некоторых случаях для достижения различных целей необходимо проецировать обогащенные данные в различные формы. Хранилище знаний позволяет определить несколько групп проекций. Проекционные группы имеют следующие ключевые характеристики взаимной исключительности и родственности.

### <a name="mutual-exclusivity"></a>Взаимная эксклюзивность

Все содержимое, проецируемое на единую группу, не зависит от данных, прогнозируемых на другие группы проекций.
Эта независимость подразумевает, что вы можете иметь одни и те же данные, сформированные по-разному, но повторяется в каждой группе проекции.

### <a name="relatedness"></a>Родственность

Группы проекций теперь позволяют проецировать документы по типам проекций, сохраняя при этом отношения между типами проекций. Все содержимое, проецируемое в рамках одной группы проекций, сохраняет отношения внутри данных по типам проекций. В таблицах отношения основаны на генерируемом ключе, и каждый узлы ребенка сохраняют ссылку на родительский узлы. Между типами (таблицами, объектами и файлами) сохраняются связи при проецировании одного узла на различные типы. Например, рассмотрим сценарий, в котором есть документ, содержащий изображения и текст. Можно проецировать текст на таблицы или объекты, а изображения - на файлы, в которых таблицы или объекты имеют столбец/свойство, содержащее URL-адрес файла.

## <a name="input-shaping"></a>Формирование входных вхомов

Получение данных в нужной форме или структуре является ключом к эффективному использованию, будь то таблицы или объекты. Способность формировать или структурировать данные на основе того, как вы планируете получить доступ и использовать их, является ключевой возможностью, выставленной как навык **Shaper** в наборе навыков.  

Проекции легче определить, когда у вас есть объект в дереве обогащения, который соответствует схеме проекции. Обновленный [навык Shaper](cognitive-search-skill-shaper.md) позволяет составить объект из разных узлов обогатительного дерева и заparent их под новый узла. Навык **Shaper** позволяет определить сложные типы с вложенными объектами.

Если у вас есть новая форма определена, которая содержит все элементы, необходимые для проецирования, теперь вы можете использовать эту форму в качестве источника для ваших проекций или в качестве вклада в другой навык.

## <a name="projection-slicing"></a>Нарезка проекции

При определении группы проекции один узло в дереве обогащения может быть разрезан на несколько связанных таблиц или объектов. Добавление проекции с исходным путем, являющегося ребенком существующей проекции, приведет к тому, что узло ребенка будет вырезать из родительского узла и проецировать в новую, но связанную таблицу или объект. Этот метод позволяет определить один узло в навыке формовщика, который может быть источником для всех ваших проекций.

## <a name="table-projections"></a>Таблица прогнозов

Поскольку это упрощает импорт, мы рекомендуем таблицы прогнозов для исследования данных с помощью Power BI. Кроме того, прогнозы таблиц позволяют изменить кардинальность между отношениями таблицы. 

Можно проецировать один документ в индексе на несколько таблиц, сохраняя отношения. При проецировании на несколько таблиц полная форма будет проецироваться в каждую таблицу, если только узла ребенка не будет источником другой таблицы в одной и той же группе.

### <a name="defining-a-table-projection"></a>Определение проекции таблицы

При определении проекции `knowledgeStore` таблицы в элементе вашего набора навыков начните с отображения узла на дереве обогащения к источнику таблицы. Обычно этот узла является выходом навыка **Shaper,** который вы добавили в список навыков для создания определенной формы, необходимой для проецировать на таблицы. Узлы, которые вы выбираете для проекта, можно нарезать для проектирования в несколько таблиц. Определение таблиц — это список таблиц, которые вы хотите проецировать.

Каждая таблица требует трех свойств:

+ название таблицы в Хранилище Azure.

+ generatedKeyName: Название столбца для ключа, который однозначно идентифицирует эту строку.

+ источник: Узла от дерева обогащения вы sourcing ваши обогащения от. Этот узла, как правило, выход формовщика, но может быть выход омичем из навыков.

Вот пример таблицы прогнозов.

```json
{
    "name": "your-skillset",
    "skills": [
      …your skills
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [
            { "tableName": "MainTable", "generatedKeyName": "SomeId", "source": "/document/EnrichedShape" },
            { "tableName": "KeyPhrases", "generatedKeyName": "KeyPhraseId", "source": "/document/EnrichedShape/*/KeyPhrases/*" },
            { "tableName": "Entities", "generatedKeyName": "EntityId", "source": "/document/EnrichedShape/*/Entities/*" }
          ]
        },
        {
          "objects": [ ]
        },
        {
            "files": [ ]
        }
      ]
    }
}
```

Как показано в этом примере, ключевые фразы и сущности моделируются в разные таблицы и будут содержать ссылку на родительский элемент (MainTable) для каждой строки.

## <a name="object-projections"></a>Проекции объектов

Проекции объектов представляют JSON представления дерева обогащения, которые могут быть получены из любого узла. Во многих случаях для создания проекции объекта можно использовать тот же навык **Shaper,** который создает проекцию таблицы. 

```json
{
    "name": "your-skillset",
    "skills": [
      …your skills
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [ ]
        },
        {
          "objects": [
            {
              "storageContainer": "hotelreviews", 
              "source": "/document/hotel"
            }
          ]
        },
        {
            "files": [ ]
        }
      ]
    }
}
```

Для генерации проекции объекта требуется несколько специфических объектов:

+ хранениеКонтейнер: контейнер с каплями, в котором будут сохранены объекты
+ источник: Путь к узлам дерева обогащения, который является корнем проекции

## <a name="file-projection"></a>Проекция файла

Файловые проекции аналогичны проекциям объектов и действуют только на коллекцию. `normalized_images` Подобно проекциям объектов, проекции файлов сохраняются в контейнере с папкой с приставкой закодированного значения идентифика документа. Файловые проекции не могут быть разделены на один и тот же контейнер, что и проекции объектов, и должны быть проецированы в другой контейнер.

```json
{
    "name": "your-skillset",
    "skills": [
      …your skills
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [ ]
        },
        {
          "objects": [ ]
        },
        {
            "files": [
                 {
                  "storageContainer": "ReviewImages",
                  "source": "/document/normalized_images/*"
                }
            ]
        }
      ]
    }
}
```

## <a name="projection-lifecycle"></a>Жизненный цикл проекции

Ваши прогнозы имеют жизненный цикл, привязанный к исходным данным в источнике данных. По мере обновления и переиндексации данных ваши прогнозы обновляются с результатами обогащения, гарантируя, что ваши прогнозы в конечном итоге согласуются с данными в источнике данных. Прогнозы наследуют настроенную для индекса политику удаления. Прогнозы не удаляются при удалении индекса или самой поисковой службы.

## <a name="using-projections"></a>Использование проекций

После запуска индекса можно прочитать прогнозируемые данные в контейнерах или таблицах, указанных в проекциях.

Для аналитики исследование в Power BI так же просто, как установка хранилища таблицы Azure, как источник данных. Вы можете легко создать набор визуализаций на ваших данных, используя отношения внутри.

Кроме того, если вам нужно использовать обогащенные данные в конвейере науки о данных, вы можете [загрузить данные из капли в Pandas DataFrame.](../machine-learning/team-data-science-process/explore-data-blob.md)

Наконец, если вам нужно экспортировать свои данные из хранилища знаний, Azure Data Factory имеет разъемы для экспорта данных и поставить их в базу данных по вашему выбору. 

## <a name="next-steps"></a>Дальнейшие действия

В качестве следующего шага создайте свой первый магазин знаний, используя выборочные данные и инструкции.

> [!div class="nextstepaction"]
> [Создайте хранилище знаний в REST](knowledge-store-create-rest.md).

Для учебника, охватывающего передовые концепции проекций, такие как нарезка, внее формирование и отношения, начните с [определения проекций в хранилище знаний](knowledge-store-projections-examples.md)

> [!div class="nextstepaction"]
> [Определение проекций в хранилище знаний](knowledge-store-projections-examples.md)
