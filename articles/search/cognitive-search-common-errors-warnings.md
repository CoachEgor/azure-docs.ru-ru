---
title: Ошибки и предупреждения, касающиеся индексатора
titleSuffix: Azure Cognitive Search
description: В этой статье содержится информация и решения распространенных ошибок и предупреждений, с которыми вы можете столкнуться во время обогащения ИИ в Azure Cognitive Search.
manager: nitinme
author: amotley
ms.author: abmotley
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: ed10e998ea05b6687190b1f87095f8bc28265905
ms.sourcegitcommit: 09a124d851fbbab7bc0b14efd6ef4e0275c7ee88
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2020
ms.locfileid: "82086621"
---
# <a name="troubleshooting-common-indexer-errors-and-warnings-in-azure-cognitive-search"></a>Устранение ошибок в распространенных ошибках индекса и предупреждениях в Azure Cognitive Search

В этой статье содержится информация и решения распространенных ошибок и предупреждений, с которыми вы можете столкнуться во время индексации и обогащения ИИ в Azure Cognitive Search.

Индексирование прекращается, когда количество ошибок превышает ['maxFailedItems'.](cognitive-search-concept-troubleshooting.md#tip-3-see-what-works-even-if-there-are-some-failures) 

Если вы хотите, чтобы индексы проигнорировали эти ошибки (и пропустили "неудачные документы"), рассмотрите `maxFailedItems` возможность обновления и, `maxFailedItemsPerBatch` как описано [здесь.](https://docs.microsoft.com/rest/api/searchservice/create-indexer#general-parameters-for-all-indexers)

> [!NOTE]
> Каждый неудавшийся документ вместе со своим ключом документа (при наличии) будет отображаться как ошибка в состоянии выполнения указателя. Вы можете использовать [индекс api](https://docs.microsoft.com/rest/api/searchservice/addupdate-or-delete-documents) для ручной загрузки документов на более позднем этапе, если вы установили указатель для того, чтобы терпеть сбои.

Информация об ошибке в этой статье может помочь вам разрешить ошибки, что позволит продолжить индексацию.

Предупреждения не прекращают индексацию, но они указывают на условия, которые могут привести к неожиданным результатам. Принимаете ли вы действие или нет, зависит от данных и вашего сценария.

Начиная с версии `2019-05-06`API, ошибки и предупреждения индекса уровня элементов структурированы таким образом, чтобы обеспечить повышенную ясность в отношении причин и последующих шагов. Они содержат следующие свойства:

| Свойство | Описание | Пример |
| --- | --- | --- |
| ключ | Идентификатор документа, на который повлияла ошибка или предупреждение. | https:\//coromsearch.blob.core.windows.net/jfk-1k/docid-32112954.pdf |
| name | Имя операции, описывающее, где произошла ошибка или предупреждение. Это генерируется следующей структурой: «категория». (подкатегория). (ресурсТип). (РесурсНое имя) | DocumentExtraction.azureblob.myBlobContainerName Enrichment.WebApiSkill.mySkillName Projection.SearchIndex.OutputfieldMapping.myOutputfieldName Проекция.SearchIndex.MergeOrUpload.myIndexName Проекция.KnowledgeStore.TableName |
| message | Высокоуровневое описание ошибки или предупреждения. | Не удалось выполнить навык, потому что запрос Web Api не удалось. |
| подробности | Любые дополнительные детали, которые могут быть полезны для диагностики проблемы, такие как ответ WebApi, если выполнение пользовательского навыка не удалось. | `link-cryptonyms-list - Error processing the request record : System.ArgumentNullException: Value cannot be null. Parameter name: source at System.Linq.Enumerable.All[TSource](IEnumerable`1 источник,`2 predicate) at Microsoft.CognitiveSearch.WebApiSkills.JfkWebApiSkills.` Func ... остальная часть стека след ... |
| документацияLink | Ссылка на соответствующую документацию с подробной информацией для отладки и решения проблемы. Эта ссылка часто указывает на один из нижеразделов на этой странице. | https://go.microsoft.com/fwlink/?linkid=2106475 |

<a name="could-not-read-document"/>

## <a name="error-could-not-read-document"></a>Ошибка: Не удалось прочитать документ

Индексер не смог прочитать документ из источника данных. Это может произойти из-за:

| Причина | Подробности/Пример | Решение |
| --- | --- | --- |
| Несовместимые типы полей в разных документах | "Тип значения имеет несоответствие типу столбца. Не удалось `'{47.6,-122.1}'` хранить в колонке авторов.  Ожидаемый тип JArray ".  "Ошибка преобразования типа nvarchar для плавания."  "Преобразование не удалось при преобразовании значения nvarchar '12 месяцев' в тип данных int."  «Арифметическое переполнение при преобразовании выражения к типу данных int». | Убедитесь, что тип каждого поля одинаков в разных документах. Например, если первое поле документа `'startTime'` является DateTime, а во втором документе это строка, эта ошибка будет хит. |
| ошибки из базовой службы источника данных | (из Космос DB)`{"Errors":["Request rate is large"]}` | Проверьте экземпляр хранилища, чтобы убедиться, что он работоспособн. Возможно, потребуется настроить масштабирование/раздел. |
| переходные проблемы | ошибка на транспортном уровне при получении результатов с сервера. (поставщик: Поставщик TCP, ошибка: 0 - Существующее соединение было принудительно закрыто удаленным хостом | Иногда возникают неожиданные проблемы с подключением. Попробуйте запустить документ через индексатор снова позже. |

<a name="could-not-extract-document-content"/>

## <a name="error-could-not-extract-content-or-metadata-from-your-document"></a>Ошибка: не удалось извлечь содержимое или метаданные из документа
Индексатор с источником данных Blob не смог извлечь содержимое или метаданные из документа (например, файл PDF). Это может произойти из-за:

| Причина | Подробности/Пример | Решение |
| --- | --- | --- |
| капля выше предела размера | Документ `'150441598'` — это байты, превышающие максимальный размер `'134217728'` байтов для извлечения документов для текущего уровня обслуживания. | [ошибки индексирования каплей](search-howto-indexing-azure-blob-storage.md#dealing-with-errors) |
| blob имеет неподдерживаемый тип контента | Документ имеет неподдерживаемый тип содержимого`'image/png'` | [ошибки индексирования каплей](search-howto-indexing-azure-blob-storage.md#dealing-with-errors) |
| капля зашифрована | Документ не может быть обработан - он может быть зашифрован или защищен паролем. | Вы можете пропустить каплю с [настройками капли.](search-howto-indexing-azure-blob-storage.md#controlling-which-parts-of-the-blob-are-indexed) |
| переходные проблемы | "Ошибка обработки капли: Запрос был прерван: запрос был отменен". "Документ приурочен во время обработки." | Иногда возникают неожиданные проблемы с подключением. Попробуйте запустить документ через индексатор снова позже. |

<a name="could-not-parse-document"/>

## <a name="error-could-not-parse-document"></a>Ошибка: Не удалось разобрать документ
Индексер прочитал документ из источника данных, но возникла проблема преобразования содержимого документа в указанную схему картирования поля. Это может произойти из-за:

| Причина | Подробности/Пример | Решение |
| --- | --- | --- |
| Ключ документа отсутствует | Ключ документа не может быть отсутствует или пуст | Убедитесь, что все документы имеют действительные ключи документа |
| Ключ документа недействителен | Ключ документа не может быть длиннее 1024 символов | Измените ключ документа, чтобы соответствовать требованиям проверки. |
| Не удалось применить картографирование на полях | Не удалось применить `'functionName'` функцию `'fieldName'`отображения на поле . Массив не может быть недействительным. Название параметра: байты | Двойная проверка [карт полей, определенных](search-indexer-field-mappings.md) на индексаторе, и сравните с данными указанного поля несостоявшегося документа. Возможно, потребуется изменить картографические данные на местах или данные документа. |
| Не удалось прочитать значение поля | Не удалось прочитать `'fieldName'` значение `'fieldIndex'`столбца по индексу . ошибка на транспортном уровне при получении результатов с сервера. (поставщик: Поставщик TCP, ошибка: 0 - Существующее соединение было принудительно закрыто удаленным хостом.) | Эти ошибки, как правило, из-за неожиданных проблем с подключением с базовой службой источника данных. Попробуйте запустить документ через индексатор снова позже. |

<a name="could-not-execute-skill"/>

## <a name="error-could-not-execute-skill"></a>Ошибка: не удалось выполнить навык
Indexer не смог запустить навык в skillset.

| Причина | Подробности/Пример | Решение |
| --- | --- | --- |
| Проблемы с переходным подключением | Произошла переходная ошибка. Повторите попытку позже. | Иногда возникают неожиданные проблемы с подключением. Попробуйте запустить документ через индексатор снова позже. |
| Потенциальная ошибка продукта | Произошла непредвиденная ошибка. | Это указывает на неизвестный класс сбоя и может означать, что есть ошибка продукта. Пожалуйста, подайте билет на [поддержку,](https://ms.portal.azure.com/#create/Microsoft.Support) чтобы получить помощь. |
| Навык столкнулся с ошибкой во время выполнения | (От навыка слияния) Одно или несколько офсетных значений являются недействительными и не могут быть разогнаны. Элементы были вставлены в конце текста | Используйте информацию в сообщении об ошибке, чтобы исправить проблему. Этот вид сбоя потребует действий для устранения. |

<a name="could-not-execute-skill-because-the-web-api-request-failed"/>

## <a name="error-could-not-execute-skill-because-the-web-api-request-failed"></a>Ошибка: не удалось выполнить навык, потому что запрос Web API не удалось
Выполнение навыков не удалось из-за сбой вызова Web API. Как правило, этот класс сбоя происходит при использовании пользовательских навыков, и в этом случае вам нужно будет отладить пользовательский код для решения проблемы. Если сбой происходит от встроенного навыка, обратитесь к сообщению об ошибке для помощи в устранении проблемы.

При отладке этой проблемы, не забудьте обратить внимание на любые [навыки ввода предупреждений](#warning-skill-input-was-invalid) для этого навыка. Конечная точка Web API может сбой, поскольку индексатор передает ее неожиданный вход.

<a name="could-not-execute-skill-because-web-api-skill-response-is-invalid"/>

## <a name="error-could-not-execute-skill-because-web-api-skill-response-is-invalid"></a>Ошибка: не удалось выполнить навык, потому что ответ навыков Web API недействителен
Выполнение навыков не удалось, так как вызов Web API вернул недействительный ответ. Как правило, этот класс сбоя происходит при использовании пользовательских навыков, и в этом случае вам нужно будет отладить пользовательский код для решения проблемы. Если вместо этого сбой от встроенного навыка, пожалуйста, подайте [билет поддержки,](https://ms.portal.azure.com/#create/Microsoft.Support) чтобы получить помощь.

<a name="skill-did-not-execute-within-the-time-limit"/>

## <a name="error-skill-did-not-execute-within-the-time-limit"></a>Ошибка: Навык не выполнен в срок
Есть два случая, в которых вы можете столкнуться с этим сообщением об ошибке, каждый из которых следует рассматривать по-разному. Пожалуйста, следуйте инструкциям ниже в зависимости от того, что навык вернул эту ошибку для вас.

### <a name="built-in-cognitive-service-skills"></a>Встроенные навыки когнитивного сервиса
Многие встроенные когнитивные навыки, такие как обнаружение языка, распознавание сущности или OCR, поддерживаются конечной точкой API Когнитивной Службы. Иногда возникают временные проблемы с этими конечными точками, и запрос будет тайм-аут. Для переходных вопросов, нет никакого средства правовой защиты, кроме как ждать и пробовать еще раз. В качестве меры по смягчению последствий следует установить указатель для [выполнения графика.](search-howto-schedule-indexers.md) Запланированная индексация берет, где он остановился. Если предположить, что временные проблемы будут решены, индексация и обработка когнитивных навыков должны быть в состоянии продолжать следующий запланированный запуск.

Если вы продолжаете видеть эту ошибку на том же документе для встроенных когнитивных навыков, пожалуйста, подайте [билет поддержки,](https://ms.portal.azure.com/#create/Microsoft.Support) чтобы получить помощь, так как этого не ожидается.

### <a name="custom-skills"></a>Пользовательские навыки
Если вы столкнулись с ошибкой тайм-аута с пользовательским навыком, который вы создали, есть несколько вещей, которые вы можете попробовать. Во-первых, просмотрите свой пользовательский навык и убедитесь, что он не застревает в бесконечном цикле и что он возвращает результат последовательно. После того как вы подтвердили, что это так, определить, что время выполнения вашего навыка. Если вы явно не установили `timeout` значение в пользовательском определении `timeout` навыков, то значение по умолчанию составляет 30 секунд. Если 30 секунд не достаточно долго для вашего навыка для выполнения, вы можете указать более высокое `timeout` значение на пользовательские определения навыков. Вот пример пользовательского определения навыков, где тайм-аут установлен на 90 секунд:

```json
  {
        "@odata.type": "#Microsoft.Skills.Custom.WebApiSkill",
        "uri": "<your custom skill uri>",
        "batchSize": 1,
        "timeout": "PT90S",
        "context": "/document",
        "inputs": [
          {
            "name": "input",
            "source": "/document/content"
          }
        ],
        "outputs": [
          {
            "name": "output",
            "targetName": "output"
          }
        ]
      }
```

Максимальное значение, которое `timeout` можно установить для параметра, составляет 230 секунд.  Если пользовательский навык не может выполняться последовательно в течение 230 секунд, вы можете рассмотреть вопрос о сокращении `batchSize` пользовательских навыков, так что он будет иметь меньше документов для обработки в пределах одного выполнения.  Если вы уже `batchSize` установили свой 1, вам нужно будет переписать навык, чтобы иметь возможность выполнить в возрасте до 230 секунд или иным образом разделить его на несколько пользовательских навыков, так что время выполнения для любого пользовательского навыка составляет максимум 230 секунд. Для получения дополнительной информации просмотрите [документацию пользовательских навыков.](cognitive-search-custom-skill-web-api.md)

<a name="could-not-mergeorupload--delete-document-to-the-search-index"/>

## <a name="error-could-not-mergeorupload--delete-document-to-the-search-index"></a>Ошибка: Не`MergeOrUpload`удалось ' '`Delete`документ к индексу поиска

Документ был прочитан и обработан, но индексер не смог добавить его в индекс поиска. Это может произойти из-за:

| Причина | Подробности/Пример | Решение |
| --- | --- | --- |
| Поле содержит слишком большой термин | Срок в документе больше [лимита 32 КБ](search-limits-quotas-capacity.md#api-request-limits) | Это ограничение можно избежать, убедившись, что поле не настроено как фильтруемое, лицобиное или сортируемое.
| Документ слишком велик для индексации | Документ больше, чем [максимальный размер запроса api](search-limits-quotas-capacity.md#api-request-limits) | [Как индексировать большие наборы данных](search-howto-large-index.md)
| Документ содержит слишком много объектов в коллекции | Коллекция в документе превышает [максимальный увсех сложных коллекций "Документ](search-limits-quotas-capacity.md#index-limits) с ключом `'1000052'` имеет `'4303'` объекты в коллекциях (массивы JSON). В `'3000'` большинстве объектов разрешается находиться в коллекциях по всему документу. Пожалуйста, удалите объекты из коллекций и попробуйте проиндексировать документ снова". | Мы рекомендуем уменьшить размер сложной коллекции в документе до уровня ниже предела и избежать высокого использования хранилища.
| Проблема подключения к целевому индексу (который сохраняется после повторов), поскольку служба находится под другой нагрузкой, например, запрос или индексация. | Не удалось установить соединение для обновления индекса. Поисковая служба находится под большой нагрузкой. | [Масштабируйте службу поиска](search-capacity-planning.md)
| Служба поиска исправляется для обновления службы или находится в середине перенастройки топологии. | Не удалось установить соединение для обновления индекса. Поисковая служба в настоящее время не работает/Поисковая служба переходит в переходный период. | Настройка службы с по крайней мере 3 реплики для 99,9% доступности в [документации SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/)
| Сбой в базовом вычислительном/сетевом ресурсе (редко) | Не удалось установить соединение для обновления индекса. Произошла неизвестная ошибка. | Настройка индексеров для [выполнения по расписанию,](search-howto-schedule-indexers.md) чтобы забрать из неисправного состояния.
| Запрос на индексацию целевого индекса не был признан в течение периода тайм-аута из-за проблем сети. | Не удалось установить подключение к индексу поиска своевременно. | Настройка индексеров для [выполнения по расписанию,](search-howto-schedule-indexers.md) чтобы забрать из неисправного состояния. Кроме того, попробуйте снизить [размер партии](https://docs.microsoft.com/rest/api/searchservice/create-indexer#parameters) указателя, если это условие ошибки сохраняется.

<a name="could-not-index-document-because-the-indexer-data-to-index-was-invalid"/>

## <a name="error-could-not-index-document-because-some-of-the-documents-data-was-not-valid"></a>Ошибка: не удалось проиндексировать документ, поскольку некоторые данные документа не были действительными

Документ был прочитан и обработан индексатором, но из-за несоответствия в конфигурации полей индекса и данных, извлеченных и обработанных индексатором, он не мог быть добавлен в индекс поиска. Это может произойти из-за:

| Причина | Подробности/Пример
| --- | ---
| Тип поля (ы), извлеченный индексатором, несовместим с моделью данных соответствующего поля целевого индекса. | Поле данных _'в_документе с ключом '888' имеет недействительное значение "типа 'Edm.String'. Ожидаемый тип был "Коллекция (Edm.String)". |
| Не удалось извлечь какую-либо сущность JSON из значения строки. | Не удалось разобрать значение 'типа 'Edm.String'_данных_поля как объекта JSON. Ошибка:'После разбора значения был обнаружен неожиданный персонаж: ''. Путь _',_ линия 1, позиция 3162. |
| Не удалось извлечь коллекцию сущностей JSON из значения строки.  | Не удалось разобрать значение 'типа 'Edm.String'_данных_поля ' как массив JSON. Ошибка:'После разбора значения был обнаружен неожиданный персонаж: ''. Путь '0', строка 1, позиция 27. |
| Неизвестный тип был обнаружен в исходном документе. | Неизвестный тип _'неизвестный'_ не может быть проиндексирован |
| В исходном документе использовалась несовместимая нотация для точек географии. | Строки WKT POINT буквальные буквы не поддерживаются. Пожалуйста, используйте GeoJson точки буквальновместо |

Во всех этих случаях обратитесь к [типам поддерживаемых данных](https://docs.microsoft.com/rest/api/searchservice/supported-data-types) и [карте типа данных для индексаторов,](https://docs.microsoft.com/rest/api/searchservice/data-type-map-for-indexers-in-azure-search) чтобы убедиться, что вы правильно строите схему индекса и настройте соответствующие [картографические карты.](search-indexer-field-mappings.md) Сообщение об ошибке будет содержать сведения, которые могут помочь отследить источник несоответствия.

## <a name="error-integrated-change-tracking-policy-cannot-be-used-because-table-has-a-composite-primary-key"></a>Ошибка: Политика отслеживания интегрированных изменений не может быть использована, поскольку таблица имеет составной основной ключ

Это относится и к таблицам S'L, и обычно происходит, когда ключ либо определяется как составной ключ, либо, когда таблица определила уникальный кластерный индекс (как в индексе S,L, а не индекс поиска Azure). Основная причина заключается в том, что ключевой атрибут модифицируется как составной основной ключ в случае [уникального кластерного индекса.](https://docs.microsoft.com/sql/relational-databases/indexes/clustered-and-nonclustered-indexes-described?view=sql-server-ver15) В этом случае убедитесь, что ваша таблица S'L не имеет уникального кластерного индекса или отображаете ключевое поле в поле, которое гарантированно не имеет дубликатов значений.

<a name="could-not-process-document-within-indexer-max-run-time"/>

## <a name="error-could-not-process-document-within-indexer-max-run-time"></a>Ошибка: Не удалось обработать документ в пределах максимального времени выполнения индекса

Эта ошибка возникает, когда индексер не может завершить обработку одного документа из источника данных в течение разрешенного времени выполнения. [Максимальное время работы](search-limits-quotas-capacity.md#indexer-limits) короче при использовании навыков. При возникновении этой ошибки, если у вас есть maxFailedItems установлен на значение, кроме 0, указатель обходит документ о будущих запусках, так что индексация может прогрессировать. Если вы не можете позволить себе пропустить какой-либо документ, или если вы видите эту ошибку последовательно, рассмотреть вопрос о взломе документов в меньших документов, так что частичный прогресс может быть достигнут в рамках одного выполнения индекса.

<a name="could-not-project-document"/>

## <a name="error-could-not-project-document"></a>Ошибка: не удалось проектировать документ

Эта ошибка возникает, когда индексер пытается [проецировать данные в хранилище знаний,](knowledge-store-projection-overview.md) и в нашей попытке сделать это произошел сбой.  Этот сбой может быть последовательным и поправляемым или это может быть переходный сбой с раковиной вывода проекции, что вам может понадобиться подождать и повторить попытку для того, чтобы решить.  Ниже приведен набор известных состояний сбоев и возможных разрешений.

| Причина | Подробности/Пример | Решение |
| --- | --- | --- |
| Не удалось обновить `'blobUri'` проекционную каплю в контейнере`'containerName'` |Указанный контейнер не существует. | Индексер проверит, был ли ранее создан указанный контейнер, и при необходимости создаст его, но он выполняет эту проверку только один раз за пробег указателя. Эта ошибка означает, что что-то удалило контейнер после этого шага.  Чтобы устранить эту ошибку, попробуйте: оставьте информацию учетной записи хранилища в покое, подождите, пока индексатор закончит, а затем перезапустите индексатор. |
| Не удалось обновить `'blobUri'` проекционную каплю в контейнере`'containerName'` |Невозможно написать данные на транспортное соединение: существующее соединение было принудительно закрыто удаленным узлам. | Ожидается, что это будет переходный сбой с azure Storage и, таким образом, должен быть решен путем повторного запуска индекса. Если вы столкнулись с этой ошибкой последовательно, пожалуйста, подайте [билет поддержки,](https://ms.portal.azure.com/#create/Microsoft.Support) чтобы он мог быть исследован далее.  |
| Не удалось `'projectionRow'` обновить строку в таблице`'tableName'` | Сервер занят. | Ожидается, что это будет переходный сбой с azure Storage и, таким образом, должен быть решен путем повторного запуска индекса. Если вы столкнулись с этой ошибкой последовательно, пожалуйста, подайте [билет поддержки,](https://ms.portal.azure.com/#create/Microsoft.Support) чтобы он мог быть исследован далее.  |

<a name="could-not-execute-skill-because-a-skill-input-was-invalid"/>

## <a name="warning-skill-input-was-invalid"></a>Предупреждение: Ввод навыков был недействительным
Вход в навык отсутствовал, неправильный тип или иным образом недействительным. Предупреждающее сообщение будет указывать на последствия:
1) Не удалось выполнить навык
2) Навык выполнен, но может иметь неожиданные результаты

Когнитивные навыки требуют входных данных и дополнительных входов. [Например, навык извлечения ключевых фраз](cognitive-search-skill-keyphrases.md) имеет два необходимых входных данных `text` `languageCode`и не дополнительные входы. Пользовательские входы навыков все считаются факультативными входами.

Если какие-либо необходимые входные данные отсутствуют или если какой-либо вход не является правильным типом, навык пропускается и генерирует предупреждение. Пропущенные навыки не генерируют никаких выходов, поэтому, если другие навыки используют выходы пропущенного навыка, они могут генерировать дополнительные предупреждения.

Если не хватает дополнительного ввода, навык по-прежнему будет работать, но может привести к неожиданному выходу из-за отсутствия входных данных.

В обоих случаях это предупреждение можно ожидать из-за формы ваших данных. Например, если у вас есть документ, `firstName`содержащий `middleName`информацию о людях с полями, `lastName` `middleName`и, у вас могут быть некоторые документы, которые не имеют записи для . Если вы `middleName` проходите в качестве ввода навыка в конвейере, то ожидается, что этот навык ввода может отсутствовать некоторое время. Вам нужно будет оценить свои данные и сценарий, чтобы определить, требуется ли какое-либо действие в результате этого предупреждения.

Если вы хотите узнать значение по умолчанию в случае отсутствия ввода, можно использовать [навык Условного](cognitive-search-skill-conditional.md) для создания значения по умолчанию, а затем использовать выход [навыка Условный](cognitive-search-skill-conditional.md) в качестве ввода навыков.


```json
{
    "@odata.type": "#Microsoft.Skills.Util.ConditionalSkill",
    "context": "/document",
    "inputs": [
        { "name": "condition", "source": "= $(/document/language) == null" },
        { "name": "whenTrue", "source": "= 'en'" },
        { "name": "whenFalse", "source": "= $(/document/language)" }
    ],
    "outputs": [ { "name": "output", "targetName": "languageWithDefault" } ]
}
```

| Причина | Подробности/Пример | Решение |
| --- | --- | --- |
| Ввод навыков неправильный тип | "Необходимый набор навыков не `String`был ожидаемого типа. Имя: `text`, `/document/merged_content`Источник: ."  "Необходимый вклад в навыки не был ожидаемого формата. Имя: `text`, `/document/merged_content`Источник: ."  "Не может итерировать `/document/normalized_images/0/imageCelebrities/0/detail/celebrities`над не-array ."  "Не удается выбрать `0` `/document/normalized_images/0/imageCelebrities/0/detail/celebrities`в не-array " | Некоторые навыки ожидают входы определенных типов, например [Навыки sentiment](cognitive-search-skill-sentiment.md) ожидают `text` быть строкой. Если вход определяет значение, не относящееся к строке, навык не выполняется и не генерирует никаких выходов. Убедитесь, что набор данных имеет единообразные значения ввода в типе или используйте [навык custom Web API](cognitive-search-custom-skill-web-api.md) для предварительной обработки ввода. Если вы итерируете навык по массиву, проверьте контекст `*` навыков и входные элементы в правильных позициях. Обычно и контекст, и источник `*` ввода должны заканчиваться для массивов. |
| Ввода навыков отсутствует | "Необходимые навыки ввода отсутствует. Название: `text`, `/document/merged_content`Источник: "Недостающая стоимость". `/document/normalized_images/0/imageTags`  "Не удается `0` `/document/pages` выбрать `0`в массиве длины." | Если все ваши документы получают это предупреждение, скорее всего, есть опечатка в путях `*` ввода, и вы должны дважды проверить корпус имени свойства, дополнительные или отсутствует в пути, и убедитесь, что документы из источника данных обеспечивают необходимые входы. |
| Ввод языкового кода навыка недействителен | Навык ввода `languageCode` имеет следующие `X,Y,Z`языковые коды, по крайней мере один из которых является недействительным. | Посмотреть более подробную информацию [ниже](cognitive-search-common-errors-warnings.md#skill-input-languagecode-has-the-following-language-codes-xyz-at-least-one-of-which-is-invalid) |

<a name="skill-input-languagecode-has-the-following-language-codes-xyz-at-least-one-of-which-is-invalid"/>

## <a name="warning--skill-input-languagecode-has-the-following-language-codes-xyz-at-least-one-of-which-is-invalid"></a>Предупреждение: Ввод навыка 'languageCode' имеет следующие языковые коды 'X,Y,' , по крайней мере один из которых является недействительным.
Одно или несколько значений, `languageCode` переданных в дополнительный вход навыка вниз по течению, не поддерживаются. Это может произойти, если вы передаете выход [LanguageDetectionSkill](cognitive-search-skill-language-detection.md) на последующие навыки, и выход состоит из большего количества языков, чем поддерживается в этих навыках ниже по течению.

Если вы знаете, что набор данных находится на одном языке, вы должны `defaultLanguageCode` удалить [LanguageDetectionSkill](cognitive-search-skill-language-detection.md) и ввод `languageCode` навыков и использовать параметр навыка для этого навыка, а не, предполагая, что язык поддерживается для этого навыка.

Если вы знаете, что ваш набор данных содержит несколько языков и, таким образом, вам нужен [LanguageDetectionSkill](cognitive-search-skill-language-detection.md) и `languageCode` ввод, подумайте о добавлении [ConditionalSkill](cognitive-search-skill-conditional.md) для фильтрации текста с языками, которые не поддерживаются перед передачей текста в навык вниз по течению.  Вот пример того, как это может выглядеть для EntityRecognitionSkill:

```json
{
    "@odata.type": "#Microsoft.Skills.Util.ConditionalSkill",
    "context": "/document",
    "inputs": [
        { "name": "condition", "source": "= $(/document/language) == 'de' || $(/document/language) == 'en' || $(/document/language) == 'es' || $(/document/language) == 'fr' || $(/document/language) == 'it'" },
        { "name": "whenTrue", "source": "/document/content" },
        { "name": "whenFalse", "source": "= null" }
    ],
    "outputs": [ { "name": "output", "targetName": "supportedByEntityRecognitionSkill" } ]
}
```

Вот несколько ссылок на поддерживаемые в настоящее время языки для каждого из навыков, которые могут создать сообщение об ошибке:
* [Текстовая аналитика Поддерживаемые Языки](https://docs.microsoft.com/azure/cognitive-services/text-analytics/text-analytics-supported-languages) (для [KeyPhraseExtractionSkill](cognitive-search-skill-keyphrases.md), [EntityRecognitionSkill](cognitive-search-skill-entity-recognition.md), [SentimentSkill](cognitive-search-skill-sentiment.md), и [PIIDetectionSkill](cognitive-search-skill-pii-detection.md))
* [Переводчик Поддерживаемые Языки](https://docs.microsoft.com/azure/cognitive-services/translator/language-support) (для [текстового переводаСкилл](cognitive-search-skill-text-translation.md))
* [Текст СплитКилл](cognitive-search-skill-textsplit.md) Поддерживаемые языки:`da, de, en, es, fi, fr, it, ko, pt`

<a name="skill-input-was-truncated"/>

## <a name="warning-skill-input-was-truncated"></a>Предупреждение: Ввод навыка был усечен
Когнитивные навыки имеют ограничения на длину текста, которые могут быть проанализированы сразу. Если текстовые данные этих навыков будут за это предел, мы усечим текст, чтобы соответствовать пределу, а затем совершим обогащение на этом усеченном тексте. Это означает, что навык выполняется, но не над всеми вашими данными.

В приведенном ниже языке `'text'` LanguageDetectionSkill поле ввода может вызвать это предупреждение, если оно находится в пределах предела символов. Вы можете найти ограничения ввода навыков в [документации навыков.](cognitive-search-predefined-skills.md)

```json
 {
    "@odata.type": "#Microsoft.Skills.Text.LanguageDetectionSkill",
    "inputs": [
      {
        "name": "text",
        "source": "/document/text"
      }
    ],
    "outputs": [...]
  }
```

Если вы хотите убедиться, что весь текст проанализирован, рассмотрите возможность использования [навыка Сплита.](cognitive-search-skill-textsplit.md)

<a name="web-api-skill-response-contains-warnings"/>

## <a name="warning-web-api-skill-response-contains-warnings"></a>Предупреждение: Ответ навыков Web API содержит предупреждения
Индексатор умел запускать навык в наборе навыков, но ответ от запроса Web API указал, что во время выполнения были предупреждения. Просмотрите предупреждения, чтобы понять, как влияют ваши данные и требуются ли действия.

<a name="the-current-indexer-configuration-does-not-support-incremental-progress"/>

## <a name="warning-the-current-indexer-configuration-does-not-support-incremental-progress"></a>Предупреждение: Текущая конфигурация индекса не поддерживает постепенный прогресс

Это предупреждение выполняется только для источников данных Cosmos DB.

Инкрементное индексирование позволяет восстановить работу индексатора при следующем запуске с того места, в котором она была прервана из-за временных сбоев или ограничения времени выполнения, и избежать таким образом повторного индексирования всей коллекции с нуля. Это особенно важно для индексации больших коллекций.

Возможность возобновления незавершенного задания по индексации основывается `_ts` на наличии документов, заказанных столбцом. Индексер использует отметку времени, чтобы определить, какой документ выбрать следующий. Если `_ts` столбец отсутствует или если индексер не может определить, заказан ли пользовательский запрос, индексер начинается с самого начала, и вы увидите это предупреждение.

Это поведение можно переопределить, что позволяет поэтапный прогресс и `assumeOrderByHighWatermarkColumn` подавляет это предупреждение с помощью свойства конфигурации.

Для получения дополнительной [Incremental progress and custom queries](search-howto-index-cosmosdb.md#IncrementalProgress)информации см.

<a name="some-data-was-lost-during projection-row-x-in-table-y-has-string-property-z-which-was-too-long"/>

## <a name="warning-some-data-was-lost-during-projection-row-x-in-table-y-has-string-property-z-which-was-too-long"></a>Предупреждение: Некоторые данные были утеряны во время проекции. Строка 'X' в таблице 'Y' имеет свойство строки 'Я', которое было слишком длинным.

[Служба хранения таблиц](https://azure.microsoft.com/services/storage/tables) имеет ограничения на то, насколько велики могут быть свойства [сущности.](https://docs.microsoft.com/rest/api/storageservices/understanding-the-table-service-data-model#property-types) Строки могут иметь 32000 символов или меньше. Если проецируется строка с свойством строки длиной более 32 000 символов, сохраняются только первые 32 000 символов. Чтобы обойти эту проблему, избегайте проецирования строк с свойствами строкдлинной длиннее 32 000 символов.

<a name="truncated-extracted-text-to-x-characters"/>

## <a name="warning-truncated-extracted-text-to-x-characters"></a>Предупреждение: Truncated извлеченный текст для X символов
Индексы ограничивают количество текста, возможного из одного документа. Этот предел зависит от уровня ценообразования: 32 000 символов для свободного уровня, 64 000 для Basic, 4 миллиона для Standard, 8 миллионов для Standard S2 и 16 миллионов для Standard S3. Текст, который был усечен, не будет проиндексирован. Чтобы избежать этого предупреждения, попробуйте разбить документы с большим количеством текста на несколько, меньшие документы. 

Для получения дополнительной [информации см.](search-limits-quotas-capacity.md#indexer-limits)

<a name="could-not-map-output-field-x-to-search-index"/>

## <a name="warning-could-not-map-output-field-x-to-search-index"></a>Предупреждение: Не удалось сопоставить выходное поле 'X' для индекса поиска
Отображение полей вывода, в которых ссылаются несуществующие/нулевые данные, будут производить предупреждения для каждого документа и приводят к пустому поле индекса. Чтобы обойти эту проблему, перепроверьте пути вывода на основе отображения полей на наличие возможных опечаток или установите значение по умолчанию с помощью [навыка Conditional.](cognitive-search-skill-conditional.md#sample-skill-definition-2-set-a-default-value-for-a-value-that-doesnt-exist)

<a name="the-data-change-detection-policy-is-configured-to-use-key-column-x"/>

## <a name="warning-the-data-change-detection-policy-is-configured-to-use-key-column-x"></a>Предупреждение: Политика обнаружения изменения данных настроена на использование ключевого столбца 'X'
[Политики обнаружения изменений данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source#data-change-detection-policies) имеют специфические требования к столбцам, которые они используют для обнаружения изменений. Одним из этих требований является то, что этот столбец обновляется каждый раз при изменении элемента исходного элемента. Другим требованием является то, что новое значение для этого столбца больше предыдущего значения. Ключевые столбцы не выполняют это требование, поскольку они не меняются при каждом обновлении. Чтобы обойти эту проблему, выберите другой столбец для политики обнаружения изменений.

<a name="document-text-appears-to-be-utf-16-encoded-but-is-missing-a-byte-order-mark"/>

## <a name="warning-document-text-appears-to-be-utf-16-encoded-but-is-missing-a-byte-order-mark"></a>Предупреждение: Текст документа, как представляется, UTF-16 закодирован, но отсутствует знак заказа байта

Режимы [разбора индекса](https://docs.microsoft.com/rest/api/searchservice/create-indexer#blob-configuration-parameters) должны знать, как закодирован текст, прежде чем его разбирать. Двумя наиболее распространенными способами кодирования текста являются UTF-16 и UTF-8. UTF-8 представляет собой кодирование с переменной длиной, где каждый символ находится между 1 байт и 4 байт длиной. UTF-16 представляет собой кодирование с фиксированной длиной, где каждый символ длиной 2 байта. UTF-16 имеет два различных варианта: "большой эндиан" и "маленький эндиан". Кодирование текста определяется «меткой порядка», серией байтов перед текстом.

| Кодирование | Метка порядка байтов |
| --- | --- |
| UTF-16 Биг-Эндиан | 0xFE 0xFF |
| UTF-16 Маленький Эндиан | 0xFF 0xFE |
| UTF-8 | 0xEF 0xBB 0xBF |

Если знак заказа байт не присутствует, предполагается, что текст будет закодирован как UTF-8.

Чтобы обойти это предупреждение, определите, что такое кодирование текста для этой капли, и добавьте соответствующий знак заказа байта.

<a name="cosmos-db-collection-has-a-lazy-indexing-policy"/>

## <a name="warning-cosmos-db-collection-x-has-a-lazy-indexing-policy-some-data-may-be-lost"></a>Предупреждение: Cosmos DB коллекция 'X' имеет ленивый политики индексирования. Некоторые данные могут быть утеряны

Коллекции с политиками [индексирования Lazy](https://docs.microsoft.com/azure/cosmos-db/index-policy#indexing-mode) не могут быть запрошены последовательно, в результате чего недостающие данные индексатора. Чтобы обойти это предупреждение, измените политику индексирования на Consistent.
