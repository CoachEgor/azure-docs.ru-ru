---
title: Квалифицированный опыт распознавания персонала (Предварительная версия)
titleSuffix: Azure Cognitive Search
description: Извлечение и маскирование личных сведений из текста в конвейере обогащения в Azure Когнитивный поиск. Этот навык сейчас находится на этапе общедоступной предварительной версии.
manager: nitinme
author: careyjmac
ms.author: chalton
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 06/17/2020
ms.openlocfilehash: b2e35ba083e376f519ccbc32c71c1ac9b1e03a41
ms.sourcegitcommit: 62e1884457b64fd798da8ada59dbf623ef27fe97
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2020
ms.locfileid: "88935302"
---
#    <a name="pii-detection-cognitive-skill"></a>Опыт распознавания личных сведений

> [!IMPORTANT] 
> Этот навык сейчас находится на этапе общедоступной предварительной версии. Для предварительной версии функции соглашение об уровне обслуживания не предусмотрено. Мы не рекомендуем использовать ее в рабочей среде. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/). В настоящее время нет поддержки портала или пакета SDK для .NET.

Навык **обнаружения PII** извлекает личные сведения из входного текста и дает возможность маскировать его из этого текста различными способами. Этот навык использует модели машинного обучения, предоставляемые функцией [Анализ текста](../cognitive-services/text-analytics/overview.md) в Cognitive Services.

> [!NOTE]
> По мере расширения области путем увеличения частоты обработки и добавления большего количества документов или дополнительных алгоритмов ИИ, вам нужно будет [присоединить оплачиваемый ресурс Cognitive Services](cognitive-search-attach-cognitive-services.md). Плата взимается при вызове API в Cognitive Services и извлечении изображений при распознавании документов в службе "Когнитивный поиск Azure". За извлечение текста из документов плата не взимается.
>
> Плата за выполнение встроенных навыков взимается в рамках существующей [модели оплаты Cognitive Services по мере использования](https://azure.microsoft.com/pricing/details/cognitive-services/). Плата за извлечение изображений указана на [странице с ценами на службу "Когнитивный поиск Azure"](https://azure.microsoft.com/pricing/details/search/).


## <a name="odatatype"></a>@odata.type  
Microsoft.Skills.Text.PIIDetectionSkill

## <a name="data-limits"></a>Ограничения данных
Максимальный размер записи — 50 000 знаков, как определено в [`String.Length`](/dotnet/api/system.string.length). Если необходимо разбить данные перед отправкой в навык, рассмотрите возможность использования уровня " [разделение текста](cognitive-search-skill-textsplit.md)".

## <a name="skill-parameters"></a>Параметры навыков

Параметры чувствительны к регистру, а все являются необязательными.

| Имя параметра     | Описание |
|--------------------|-------------|
| `defaultLanguageCode` |    Код языка вводимого текста. Сейчас `en` поддерживается только. |
| `minimumPrecision` | Значение в диапазоне от 0,0 до 1,0. Если показатель достоверности (в `piiEntities` выходных данных) меньше, чем заданное `minimumPrecision` значение, сущность не возвращается или маскируется. Значение по умолчанию — 0,0. |
| `maskingMode` | Параметр, который предоставляет различные способы маскирования обнаруженных PII во входном тексте. Поддерживаются следующие варианты. <ul><li>`none` (по умолчанию): это означает, что маскирование не будет выполнено и `maskedText` выходные данные не будут возвращены. </li><li> `redact`: Этот параметр удалит обнаруженные сущности из входного текста и не заменит их любым. Обратите внимание, что в этом случае смещение в `piiEntities` выходных данных будет по отношению к исходному тексту, а не к маскированному тексту. </li><li> `replace`: Этот параметр заменит обнаруженные сущности символом, указанным в `maskingCharacter` параметре.  Символ будет повторяться до длины обнаруженной сущности, чтобы смещения правильно соответствовали входному тексту и выходным данным `maskedText` .</li></ul> |
| `maskingCharacter` | Символ, который будет использоваться для маскирования текста, если `maskingMode` параметр имеет значение `replace` . Поддерживаются следующие параметры: `*` (по умолчанию), `#` , `X` . Этот параметр может быть только `null` в том случае `maskingMode` , если не задано значение `replace` . |


## <a name="skill-inputs"></a>Входные данные навыков

| Ввод имени      | Описание                   |
|---------------|-------------------------------|
| `languageCode`    | Необязательный элемент. Значение по умолчанию — `en`.  |
| `text`          | Текст для анализа.          |

## <a name="skill-outputs"></a>Выходные данные навыка

| Имя вывода      | Description                   |
|---------------|-------------------------------|
| `piiEntities` | Массив сложных типов, содержащий следующие поля: <ul><li>текст (реальные PII как извлеченные)</li> <li>type</li><li>Подтип</li><li>Оценка (более высокое значение означает, что скорее всего будет реальная сущность)</li><li>смещение (во входном тексте)</li><li>length</li></ul> </br> [Возможные типы и подтипы можно найти здесь.](../cognitive-services/text-analytics/named-entity-types.md?tabs=personal) |
| `maskedText` | Если для параметра задано `maskingMode` значение, отличное от `none` , то этот результат будет строковым результатом маскирования, выполняемого для входного текста, как описано в выбранном `maskingMode` .  Если параметр `maskingMode` имеет значение `none` , выходные данные не будут присутствовать. |

##    <a name="sample-definition"></a>Пример определения

```json
  {
    "@odata.type": "#Microsoft.Skills.Text.PIIDetectionSkill",
    "defaultLanguageCode": "en",
    "minimumPrecision": 0.5,
    "maskingMode": "replace",
    "maskingCharacter": "*",
    "inputs": [
      {
        "name": "text",
        "source": "/document/content"
      }
    ],
    "outputs": [
      {
        "name": "piiEntities"
      },
      {
        "name": "maskedText"
      }
    ]
  }
```
##    <a name="sample-input"></a>Пример ввода

```json
{
    "values": [
      {
        "recordId": "1",
        "data":
           {
             "text": "Microsoft employee with ssn 859-98-0987 is using our awesome API's."
           }
      }
    ]
}
```

##    <a name="sample-output"></a>Пример выходных данных

```json
{
  "values": [
    {
      "recordId": "1",
      "data" : 
      {
        "piiEntities":[ 
           { 
              "text":"859-98-0987",
              "type":"U.S. Social Security Number (SSN)",
              "subtype":"",
              "offset":28,
              "length":11,
              "score":0.65
           }
        ],
        "maskedText": "Microsoft employee with ssn *********** is using our awesome API's."
      }
    }
  ]
}
```

Обратите внимание, что смещения, возвращаемые для сущностей в выходных данных этого навыка, возвращаются непосредственно из [API анализа текста](../cognitive-services/text-analytics/overview.md). Это означает, что если вы используете их для индексации в исходной строке, следует использовать класс [StringInfo](/dotnet/api/system.globalization.stringinfo?view=netframework-4.8) в .NET для извлечения правильного содержимого.  [Дополнительные сведения можно найти здесь.](../cognitive-services/text-analytics/concepts/text-offsets.md)

## <a name="error-and-warning-cases"></a>Случаи ошибок и предупреждений
Если код языка для документа не поддерживается, возвращается предупреждение, и сущности не извлекаются.
Если текст пуст, появится предупреждение.
Если текст больше 50 000 знаков, будут проанализированы только первые 50 000 знаков и появится предупреждение.

Если навык возвращает предупреждение, выходные данные `maskedText` могут быть пустыми.  Это означает, что если вы ожидаете, что выходные данные будут существовать для последующего опыта, он не будет работать должным образом. Помните об этом при написании определения набора навыков.

## <a name="see-also"></a>См. также раздел

+ [Встроенные навыки](cognitive-search-predefined-skills.md)
+ [Определение набора навыков](cognitive-search-defining-skillset.md)