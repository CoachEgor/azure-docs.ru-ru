---
title: Общие сведения об использовании хранилища знаний (предварительная версия)
titleSuffix: Azure Cognitive Search
description: Хранилище знаний — это специальное хранилище Azure, в котором можно хранить обогащенные документы, просматривать и преобразовывать их, а также обеспечивать доступ к ним службе "Когнитивный поиск Azure" и другим приложениям. Эта функция предоставляется в общедоступной предварительной версии.
author: HeidiSteen
manager: nitinme
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: aa32f671756b8ba7f17c25592b6a15b66de42b2c
ms.sourcegitcommit: 76b48a22257a2244024f05eb9fe8aa6182daf7e2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2019
ms.locfileid: "74790024"
---
# <a name="introduction-to-knowledge-stores-in-azure-cognitive-search"></a>Общие сведения о хранилищах знаний в Когнитивном поиске Azure

> [!IMPORTANT] 
> Сейчас предоставляется общедоступная предварительная версия хранилища знаний. Для предварительной версии функции соглашение об уровне обслуживания не предусмотрено. Мы не рекомендуем использовать ее в рабочей среде. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/). [Версия REST API 2019-05-06-Preview](search-api-preview.md) предоставляет предварительные версии функций. В настоящее время предоставляется ограниченная поддержка портала, но поддержка пакета SDK для .NET пока что отсутствует.

Хранилище знаний — это функция Azure Когнитивный поиск, которая сохраняет выходные данные [конвейера обогащения искусственного интеллекта](cognitive-search-concept-intro.md) для последующего анализа или другой нисходящий обработки. *Обогащенный документ* — это выходные данные конвейера, созданные из содержимого, которое было извлечено, структурировано и проанализировано с использованием процессов ИИ. В стандартном конвейере на основе ИИ обогащенные документы являются временными и используются только во время индексирования, а затем удаляются. В хранилище знаний сохраняются обогащенные документы. 

Если вы уже использовали когнитивные навыки в Когнитивном поиске Azure, то знаете, что *наборы навыков* проводят серии операций обогащения документа. Результатом этого процесса может быть индекс поиска или проекции документа в хранилище знаний (нововведение в этой предварительной версии). Два вида выходных данных, индекс поиска и хранилище знаний, совместно используют одно и то же содержимое, но хранятся и используются совершенно разными способами.

Физически хранилищем знаний является [служба хранилища Azure](https://docs.microsoft.com/azure/storage/common/storage-account-overview) (хранилище таблиц Azure, хранилище BLOB-объектов Azure или оба). Любой инструмент или процесс, который может подключиться к службе хранилища Azure, может использовать содержимое хранилища знаний.

![Хранилище знаний на схеме конвейера](./media/knowledge-store-concept-intro/knowledge-store-concept-intro.svg "Хранилище знаний на схеме конвейера")

Чтобы использовать хранилище знаний, в набор навыков нужно добавить элемент `knowledgeStore`,определяющий пошаговые операции в конвейере индексирования. Во время выполнения Когнитивный поиск Azure создает пространство в учетной записи хранения Azure и проецирует обогащенные документы как большие двоичные объекты или в таблицы в зависимости от конфигурации.

## <a name="benefits-of-knowledge-store"></a>Преимущества хранилища знаний

Хранилище знаний позволяет получить структуру, контекст и фактическое содержимое из неструктурированных и частично структурированных данных, таких как большие двоичные объекты и проанализированные файлы изображений, и даже из структурированных данных, преобразованных в новые формы. В пошаговом [руководстве](knowledge-store-howto.md)можно увидеть, как сжатый документ JSON разбивается на разделы в виде вложенных структур, воспроизводится в новых структурах, и другим образом становятся доступными для нисходящих процессов, таких как машинное обучение и рабочие нагрузки для обработки и анализа данных.

Хотя возможности конвейера обогащения на основе ИИ сами по себе впечатляют, главной особенностью хранилища знаний является способность изменять форму данных. Можно начать с базового набора навыков и совершенствовать его цикл за циклом, чтобы увеличить число уровней структур. Это позволит создавать структуры, пригодные для использования другими приложениями, помимо службы "Когнитивный поиск Azure".

Хранилище знаний обеспечивает следующие преимущества:

+ Обогащенные документы может использовать не только служба поиска, но и [средства аналитики и создания отчетов](#tools-and-apps). Power BI c Power Query являются оптимальным решением. Но и любое приложение, способное подключаться к службе хранилища Azure, может получать данные из созданного хранилища знаний.

+ Улучшение конвейера индексирования на основе ИИ в ходе отладки и определений набора навыков. Хранилище знаний предоставляет результат определения набора навыков в конвейере индексирования на основе ИИ. Эти результаты можно использовать для создания усовершенствованного набора навыков, так как вы можете отслеживать воздействие процесса обогащения. Просматривать содержимое хранилища знаний можно с помощью [Обозревателя службы хранилища](https://docs.microsoft.com/azure/vs-azure-tools-storage-manage-with-storage-explorer?tabs=windows) Azure.

+ Преобразование данных в новые формы. Теперь доступна функция преобразования данных, реализованная в коде набора навыков. [Навык формирователя](cognitive-search-skill-shaper.md) в службе "Когнитивный поиск Azure" был доработан для выполнения этой задачи. Преобразование формы позволяет определять проекцию, которая соответствует предполагаемому способу применения данных, сохраняя при этом взаимосвязи.

> [!Note]
> Не знакомы с совершенствованием и обучением искусственного интеллекта? Когнитивный поиск Azure интегрируется с функциями распознавания изображений и текста Cognitive Services. С помощью этих функций извлекаются сведения из файлов изображений, распознаются сущности, извлекаются ключевые фразы из текстовых файлов и т. д., после чего обогащаются исходные данные. Дополнительные сведения см. в статье [Что такое когнитивный поиск в службе "Поиск Azure"?](cognitive-search-concept-intro.md).

## <a name="creating-a-knowledge-store"></a>Создание хранилища знаний

Хранилище знаний является частью [набора навыков](cognitive-search-working-with-skillsets.md), который, в свою очередь, является частью [индексатора](search-indexer-overview.md). 

В этой предварительной версии можно создать хранилище знаний с помощью REST API и `api-version=2019-05-06-Preview` или мастера **импорта данных** на портале.

### <a name="json-representation-of-a-knowledge-store"></a>Представление JSON хранилища знаний

Приведенный ниже код JSON определяет `knowledgeStore` — элемент набора навыков, вызываемый индексатором (не показано). Если вы уже знакомы с обогащением на основе ИИ, то знаете, что набор навыков обуславливает создание, организацию и содержание каждого обогащенного документа. Набор навыков должен содержать по крайней мере один навык, который, скорее всего, является навыком формирователя, если вы модулируете структуры данных.

`knowledgeStore` состоит из соединения и проекций. 

+ Подключение к учетной записи хранения в том же регионе, что и Azure Когнитивный поиск. 

+ Проекции могут быть табличными, объектами JSON или файлами. `Tables` определяют физическое выражение для обогащенных документов в хранилище таблиц Azure. `Objects` определить физические объекты JSON в хранилище BLOB-объектов Azure. `Files` — это двоичные файлы, такие как изображения, извлеченные из документа, который будет сохранен.

+ Проекции — это коллекция объектов проекции, каждый объект проекции может содержать `tables`, `objects` и `files`. Дополнения, проецированные в рамках одной проекции, связаны даже при проецировании по типам (таблицам, объектам или файлам). Проекции между объектами проекции не связаны и являются независимыми. Одну и ту же фигуру можно прогнозировать сталкиваться несколькими объектами проекции.

```json
{
  "name": "my-new-skillset",
  "description": "Example showing knowledgeStore placement in a skillset.",
  "skills":
  [
    {
    "@odata.type": "#Microsoft.Skills.Util.ShaperSkill",
    "context": "/document/content/phrases/*",
    "inputs": [
        {
        "name": "text",
        "source": "/document/content/phrases/*"
        },
        {
        "name": "sentiment",
        "source": "/document/content/phrases/*/sentiment"
        }
    ],
    "outputs": [
        {
        "name": "output",
        "targetName": "analyzedText"
        }
    ]
    },
  ],
  "cognitiveServices": 
    {
    "@odata.type": "#Microsoft.Azure.Search.CognitiveServicesByKey",
    "description": "mycogsvcs resource in West US 2",
    "key": "<your key goes here>"
    },
  "knowledgeStore": { 
    "storageConnectionString": "<your connection string goes here>", 
    "projections": [ 
        { 
            "tables": [  
            { "tableName": "Reviews", "generatedKeyName": "ReviewId", "source": "/document/Review" , "sourceContext": null, "inputs": []}, 
            { "tableName": "Sentences", "generatedKeyName": "SentenceId", "source": "/document/Review/Sentences/*", "sourceContext": null, "inputs": []}, 
            { "tableName": "KeyPhrases", "generatedKeyName": "KeyPhraseId", "source": "/document/Review/Sentences/*/KeyPhrases", "sourceContext": null, "inputs": []}, 
            { "tableName": "Entities", "generatedKeyName": "EntityId", "source": "/document/Review/Sentences/*/Entities/*" ,"sourceContext": null, "inputs": []} 

            ], 
            "objects": [ 
               
            ], 
            "files": [

            ]  
        },
        { 
            "tables": [ 
            ], 
            "objects": [ 
                { 
                "storageContainer": "Reviews", 
                "format": "json", 
                "source": "/document/Review", 
                "key": "/document/Review/Id" 
                } 
            ],
            "files": [
                
            ]  
        }        
    ]     
    } 
}
```

Этот образец не содержит изображений. Пример использования проектных проекций см. в разделе [Работа с](knowledge-store-projection-overview.md)проецированиями.
### <a name="sources-of-data-for-a-knowledge-store"></a>Источники данных для хранилища знаний

Если хранилище знаний выводится из конвейера обогащения с помощью ИИ, каковы эти входные данные? Исходные данные, которые необходимо извлечь, обогатить и в конечном итоге сохранить в хранилище знаний, могут исходить из любого источника данных Azure, поддерживаемого индексаторами поиска: 

* [Azure Cosmos DB](search-howto-index-cosmosdb.md)

* [Хранилище BLOB-объектов Azure](search-howto-indexing-azure-blob-storage.md)

* [Хранилище таблиц Azure](search-howto-indexing-azure-tables.md)

* [Azure SQL;](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md)

Создаваемые вами индексаторы и наборы навыков извлекают и обогащают или преобразуют это содержимое как часть рабочей нагрузки индексирования, а затем сохраняют результаты в хранилище знаний.

### <a name="rest-apis-used-in-creation-of-a-knowledge-store"></a>REST API, используемые при создании хранилища знаний

Только два API-интерфейса имеют расширения, необходимые для создания хранилища знаний (создание набора навыков и создание индексатора). Другие API-интерфейсы используются "как есть".

| Объекты | REST API | Описание |
|--------|----------|-------------|
| Источник данных | [Создание источника данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source)  | Ресурс, определяющий внешний источник данных с исходными данными, которые будут использоваться для создания обогащенных документов.  |
| Набор навыков | [Создание набора квалификационных навыков (api-version=2019-05-06-Preview)](https://docs.microsoft.com/rest/api/searchservice/create-skillset)  | Ресурс, в котором описано использование [встроенных навыков](cognitive-search-predefined-skills.md) и [пользовательских когнитивных навыков](cognitive-search-custom-skill-interface.md) в конвейере обогащения данных во время индексирования. Набор навыков имеет определение `knowledgeStore` как дочерний элемент. |
| index | [Создание индекса](https://docs.microsoft.com/rest/api/searchservice/create-index)  | Схема, которая выражает индекс поиска. Поля в этом индексе сопоставляются с полями в источнике данных или с полями, созданным на этапе обогащения (например, поле с названиями организаций, созданное навыком распознавания сущностей). |
| Индексатор | [Создание индексатора (api-version=2019-05-06)](https://docs.microsoft.com/rest/api/searchservice/create-skillset)  | Ресурс, определяющий компоненты для процесса индексирования, в том числе источник данных, набор навыков, сопоставлений полей источника и промежуточных структур с полями целевого индекса, определение индекса. При запуске индексатора активируется процесс приема и обогащения данных. На выходе формируется индекс поиска, который основан на схеме индекса и заполнен исходными данными, обогащенными с помощью наборов навыков.  |

### <a name="physical-composition-of-a-knowledge-store"></a>Физический состав хранилища знаний

 *Проекция*, являющаяся элементом определения `knowledgeStore`, формулирует схему и структуру выходных данных так, чтобы они соответствовали предполагаемому использованию. При наличии приложений, использующих данные в различных форматах и формах, можно определить несколько проекций. 

Проекции могут храниться в виде объектов или таблиц:

+ Если проекция является объектом, она сопоставляется с хранилищем BLOB-объектов, в котором проекция хранится в контейнере вместе с объектами или иерархическими представлениями в формате JSON для таких сценариев, как конвейер обработки и анализа данных.

+ Если проекция является таблицей, она сопоставляется с Хранилищем таблиц. Табличный формат позволяет сохранить связи для таких сценариев, как анализ данных или экспорт в виде кадров данных для машинного обучения. Обогащенные проекции затем можно легко импортировать в другие хранилища данных. 

В хранилище знаний можно создать множество проекций, соответствующих требованиям различных пользователей в вашей организации. Разработчикам может требоваться доступ к полным представлениям обогащенных документов в формате JSON, а специалистам по анализу и обработке данных — детализированные или модульные структуры, сформированные набором навыков.

Например, если одна из целей обогащения данных состоит в создании набора данных для обучения модели, создав проекцию данных в виде объекта, можно использовать их в конвейерах обработки и анализа данных. Если же вам необходимо быстро создать панель мониторинга Power BI на основе обогащенных документов, для этого лучше подойдет проекция в табличном формате.

<a name="tools-and-apps"></a>

## <a name="connecting-with-tools-and-apps"></a>Подключение с помощью средств и приложений

После помещения обогащенных документов в хранилище любое средство или технология, способные подключаться к хранилищу BLOB-объектов или таблиц Azure, можно использовать для изучения, анализа или использования их содержимого. Вот список основных таких средств:

+ [Обозреватель службы хранилища](knowledge-store-view-storage-explorer.md) позволяет просматривать структуру и содержимое обогащенных документов. Его можно считать базовым средством для просмотра содержимого хранилища знаний.

+ [Power BI](knowledge-store-connect-power-bi.md) для средств создания отчетов и анализа, если у вас есть числовые данные.

+ [Фабрика данных Azure](https://docs.microsoft.com/azure/data-factory/) позволяет выполнять дальнейшую обработку данных.

## <a name="next-steps"></a>Дальнейшие действия

Хранилище знаний обеспечивает стойкость обогащенных документов, полезных при разработке набора навыков или создании структур и содержимого для использования любыми клиентскими приложениями, которые могут получить доступ к учетной записи службы хранилища Azure.

Проще всего создавать обогащенные документов с помощью мастера **импорта данных**, но вы также можете использовать Postman и REST API, что удобнее, если вы хотите получить представление о том, как создаются объекты и указываются ссылки на них.

> [!div class="nextstepaction"]
> [Создание хранилища знаний службы поиска Azure на портале Azure](knowledge-store-create-portal.md)
> [Создание хранилища знаний службы "Поиск Azure" с помощью REST](knowledge-store-create-rest.md)
