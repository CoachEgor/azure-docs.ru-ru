---
title: Когнитивный поиск, извлечение данных, обработка естественной речи c помощью искусственного интеллекта в службе "Поиск Azure"
description: Извлечение содержимого, обработка естественной речи и изображений для создания доступного для поиска содержимого при индексации в службе "Поиск Azure" с применением когнитивных навыков и алгоритмов искусственного интеллекта.
manager: cgronlun
author: HeidiSteen
services: search
ms.service: search
ms.devlang: NA
ms.topic: overview
ms.date: 05/28/2019
ms.author: heidist
ms.custom: seodec2018
ms.openlocfilehash: 8af927bee11d66c473707b603951fa693f6840e3
ms.sourcegitcommit: 8c49df11910a8ed8259f377217a9ffcd892ae0ae
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2019
ms.locfileid: "66299033"
---
# <a name="what-is-cognitive-search-in-azure-search"></a>Что такое когнитивный поиск в службе "Поиск Azure"?

Когнитивный поиск — это функция искусственного интеллекта в службе "Поиск Azure", используемая для извлечения текста из изображений, больших двоичных объектов и других неструктурированных источников данных, а также для обогащения содержимого, чтобы сделать его более доступным для поиска в индексе службы "Поиск Azure". Извлечение и обогащение реализуются через *когнитивные навыки*,которые присоединены к конвейеру индексирования. Обогащения ИИ поддерживаются следующими способами. 

+ Навыки **обработки естественного языка** включают в себя [распознавание сущностей](cognitive-search-skill-entity-recognition.md), [распознавание языка](cognitive-search-skill-language-detection.md), [извлечение ключевых фраз](cognitive-search-skill-keyphrases.md), обработку текста и [определение тональности](cognitive-search-skill-sentiment.md). С помощью этих навыков неструктурированный текст может принимать новые формы, сопоставляемые с полями поиска и фильтрации в индексе.

+ Навыки **обработки изображений** охватывают [распознавание текста (OCR)](cognitive-search-skill-ocr.md) и идентификацию [визуальных компонентов](cognitive-search-skill-image-analysis.md), таких как обнаружение лица, интерпретация изображений, распознавание изображений (известные люди и ориентиры) или атрибутов, таких как цвета или ориентация изображений. Вы можете создавать текстовые представления содержимого изображения, по которым можно выполнять поиск, используя все возможности запросов службы "Поиск Azure".

![Схема конвейера когнитивного поиска](./media/cognitive-search-intro/cogsearch-architecture.png "Общие сведения о конвейере когнитивного поиска")

Когнитивные навыки в службе "Поиск Azure" основываются на моделях машинного обучения в API-интерфейсах Cognitive Services: [API компьютерного зрения](https://docs.microsoft.com/azure/cognitive-services/computer-vision/) и [анализ текста](https://docs.microsoft.com/azure/cognitive-services/text-analytics/overview). 

На этапе приема данных применяется обработка естественного языка и изображений, при этом результаты становятся частью структуры документа в индексе поиска службы "Поиск Azure". Данные получают в виде набора данных Azure, после чего они передаются по конвейеру индексирования с использованием необходимых [встроенных навыков](cognitive-search-predefined-skills.md). Архитектура является расширяемой, поэтому, если встроенных навыков недостаточно, вы можете создавать и прикреплять [пользовательские навыки](cognitive-search-create-custom-skill-example.md) для интеграции пользовательской обработки. Например, в модуле сущности или классификаторе документов можно выполнять задачи в специализированных областях: финансы, научные публикации или медицина.

> [!NOTE]
> По мере расширения области путем увеличения частоты обработки и добавления большего количества документов или дополнительных алгоритмов ИИ, вам нужно будет [присоединить оплачиваемый ресурс Cognitive Services](cognitive-search-attach-cognitive-services.md). Плата взимается при вызове API в Cognitive Services и извлечении изображений при открытии документов в службе "Поиск Azure". За извлечение текста из документов плата не взимается.
>
> Плата за выполнение встроенных навыков взимается в рамках существующей [модели оплаты Cognitive Services по мере использования](https://azure.microsoft.com/pricing/details/cognitive-services/). Плата за извлечение изображений указана на [странице с ценами на Поиск Azure](https://go.microsoft.com/fwlink/?linkid=2042400).
## <a name="components-of-cognitive-search"></a>Компоненты когнитивного поиска

Конвейер когнитивного поиска основан на [*индексаторах* службы "Поиск Azure](search-indexer-overview.md), которые сканируют источники данных и создают по ним полные индексы. Теперь к этим индексаторам можно подключать навыки, которые отслеживают и обогащают определенные документы по настроенным вами наборам навыков. После индексации созданный контент будет доступен через поисковые запросы [любых типов, поддерживаемых в службе "Поиск Azure"](search-query-overview.md).  Если вы еще не знакомы с индексаторами, ознакомьтесь с простым примером, представленным в этом разделе.

### <a name="step-1-connection-and-document-cracking-phase"></a>Шаг 1. Подключение и этап открытия документов

На вход конвейера подается неструктурированный текст или нетекстовое содержимое (например, JPEG-файлы с изображениями или отсканированными документами). Эти данные нужно разместить в службе хранилища данных Azure, доступной для индексатора. Индексаторы умеют открывать исходные документы и извлекать из них текстовые данные.

![Этап открытия документов](./media/cognitive-search-intro/document-cracking-phase-blowup.png "document cracking")

 В качестве источников данных поддерживаются хранилища больших двоичных объектов Azure, хранилища таблиц Azure, база данных SQL Azure и Azure Cosmos DB. Текстовое содержимое можно извлечь из файлов следующих типов: PDF, Word, PowerPoint и CSV. Дополнительные сведения см. в разделе [Поддерживаемые форматы документов](search-howto-indexing-azure-blob-storage.md#supported-document-formats).

### <a name="step-2-cognitive-skills-and-enrichment-phase"></a>Шаг 2. Когнитивных навыки и этап обогащения

Обогащение выполняется *когнитивными навыками* с атомарными операциями. Например, выделив текстовое содержимое из PDF-файла, к нему можно применить распознавание языка, распознавание сущностей или извлечение ключевых фраз, чтобы создать в индексе новые поля данных, не существующие в самом источнике. Совокупность таких возможностей, реализованная в вашем конвейере, называется *набором навыков*.  

![Этап обогащения](./media/cognitive-search-intro/enrichment-phase-blowup.png "enrichment phase")

Набор навыков основывается на [стандартных когнитивных навыках](cognitive-search-predefined-skills.md) или [пользовательских навыках](cognitive-search-create-custom-skill-example.md), которые вы создаете и подключаете к набору навыков. Можно использовать как минимальные, так и очень сложные наборы навыков. Они определяют не только типы обработки, но и порядок операций. Набор навыков в сочетании с сопоставлением полей, которые включены в индексатор, полностью определяют весь конвейер обогащения данных. Дополнительные сведения о том, как собрать все эти фрагменты в единое целое, вы найдете в статье [Создание набора навыков в конвейере обогащения](cognitive-search-defining-skillset.md).

В конвейере создается коллекция обогащенных документов. Вы можете выбрать, какие из элементов этих обогащенных документов нужно сопоставить с индексируемыми полями в индексе поиска. Например, если вы применили навыки извлечения ключевых фраз и распознавания сущностей, в обогащенных документах будут созданы соответствующие поля, которые можно будет сопоставить с полями индекса. В статье [Создание ссылок на аннотации в наборе навыков когнитивного поиска](cognitive-search-concept-annotations-syntax.md) вы найдете дополнительные сведения о структурах ввода и вывода.

#### <a name="add-a-knowledgestore-element-to-save-enrichments"></a>Добавление элемента knowledgeStore для сохранения обогащений

В [версии REST API api-version=2019-05-06 службы поиска](search-api-preview.md) в наборы навыков добавляется определение knowledgeStore, которое обеспечивает подключение к хранилищу Azure и проекции, описывающие способ сохранения обогащений. 

Добавив хранилище знаний к набору навыков, можно спроецировать представление обогащений для сценариев, в которых не предусмотрен полнотекстовой поиск. Подробные сведения см. в [обзоре хранилища знаний](knowledge-store-concept-intro.md).

### <a name="step-3-search-index-and-query-based-access"></a>Шаг 3. Индекс поиска и доступа с помощью запросов

Когда обработка завершится, в службе "Поиск Azure" будет создан индекс поиска, состоящий из обогащенных документов с возможностью текстового поиска по ним. [Запросы по индексу](search-query-overview.md) позволяют разработчикам и пользователям получить доступ к обогащенному содержимому, созданному конвейером индексирования. 

![Индекс со значком поиска](./media/cognitive-search-intro/search-phase-blowup.png "Index with search icon")

Такой индекс действует так же, как любой другой индекс в службе "Поиск Azure", и вы можете дополнить его пользовательскими анализаторами, применить поисковые запросы нечетких соответствий, добавить фильтрацию или настроить профили оценки, чтобы сформировать результаты поиска.

Индексы создаются на основе схемы индекса, в которой определены поля, атрибуты и другие конструкции для конкретного индекса, в том числе профили оценки и карты синонимов. После создания и первичного заполнения индекса можно выполнять индивидуальные операции индексирования для учета новых и обновленных исходных документов. Некоторые изменения данных потребуют полного перестроения индекса. Пока структура схемы не будет достаточно стабильной, ограничьтесь небольшим набором данных. Дополнительные сведения см. в статье [How to rebuild an Azure Search index](search-howto-reindex.md) (Как перестроить индекс для службы "Поиск Azure").

<a name="feature-concepts"></a>

## <a name="key-features-and-concepts"></a>Основные возможности и концепции

| Концепция | ОПИСАНИЕ| Ссылки |
|---------|------------|-------|
| Набор навыков | Именованный ресурс верхнего уровня, содержащий коллекцию навыков. Набор навыков определяет конвейер обогащения. Он применяется индексатором во время индексирования. | [Определение набора навыков](cognitive-search-defining-skillset.md) |
| Когнитивный навык | Атомарное преобразование в конвейере обогащения. Часто этот компонент извлекает или предполагает структуру, расширяя доступное понимание входных данных. Результат преобразования почти всегда имеет текстовый вид, например при обработке естественной речи и обработке изображений извлекается текст из изображений или создается текст на их основе. Выходные данные навыка можно сопоставить с определенным полем индекса или передать в качестве входных данных для последующих операций обогащения. Вы можете использовать стандартные навыки, предоставленные корпорацией Майкрософт, или создать и развернуть собственные настраиваемые навыки. | [Предопределенные навыки](cognitive-search-predefined-skills.md) |
| Извлечение данных | Охватывает широкий спектр операций обработки, но при когнитивном поиске навык распознавания сущностей чаще всего используется для извлечения данных (сущности) из источника, который не предоставляет эту информацию естественным образом. | [Навык распознавания сущностей](cognitive-search-skill-entity-recognition.md)| 
| Обработка изображений | Формирует текст на основе изображения, например распознает ориентиры или извлекает текст из изображения. Самые стандартные варианты применения — это распознавание текста из файла отсканированного документа (например, JPEG) или поиск названий улиц на фотографиях со знаками и вывесками. | [Навык анализа изображений](cognitive-search-skill-image-analysis.md) или [навык распознавания текста](cognitive-search-skill-ocr.md)
| Обработка естественного языка | Обработка текста для получения аналитических сведений о текстовых входных данных. Определение языка, анализ тональности и извлечения ключевых фраз — вот основные примеры навыков, относящихся к обработке естественной речи.  | [Навык извлечения ключевых фраз](cognitive-search-skill-keyphrases.md), [навык распознавания языка](cognitive-search-skill-language-detection.md), [навык анализа тональности](cognitive-search-skill-sentiment.md) |
| Открытие документов | Процесс извлечения или создание текстового содержимого из нетекстовых источников во время индексирования. В качестве примера можно упомянуть оптическое распознавание символов, но чаще этот термин относится к базовой функциональности индексатора, то есть к извлечению содержимого из файлов приложения. Для успешного открытия документов важно, чтобы источник данных сообщал расположение исходных файлов, а в определении индексатора были настроены сопоставления для полей. | См. статью об [индексаторах](search-indexer-overview.md). |
| Формирование | Объединение фрагментов текста в более крупные структуры или разделение фрагментов текста на меньшие части для дальнейшей обработки. | [Навык формирования](cognitive-search-skill-shaper.md), [навык слияния текста](cognitive-search-skill-textmerger.md), [навык разделения текста](cognitive-search-skill-textsplit.md) |
| Обогащенные документы | Переходная внутренняя структура, создаваемая во время обработки, конечный результат которой отражается в индексе поиска. Набор навыков определяет, какие улучшения выполняются. Сопоставления полей определяют, какие элементы данных добавляются в индекс. При необходимости можно создать хранилище знаний для сохранения и изучения улучшенных документов с помощью таких инструментов, как Обозреватель службы хранилища, Power BI или любой другой инструмент, который подключается к хранилищу BLOB-объектов Azure. | Ознакомьтесь с разделом [Хранилище знаний (предварительная версия)](knowledge-store-concept-intro.md). |
| Индексатор |  Программа-обходчик, которая извлекает доступные для поиска данные и метаданные из внешнего источника данных, а затем заполняет индекс, сопоставляя поля в индексе и источнике данных для открытия документа. Чтобы применить обогащения на основе когнитивного поиска, индексатор вызывает набор навыков и передает соответствующие обогащения в определенные целевые поля индекса. Определение индексатора содержит все инструкции и ссылки для операций конвейера, который вызывается при запуске индексатора. | [Индексаторы](search-indexer-overview.md) |
| источник данных  | Объект, используемый для подключения индексатора к внешнему источнику данных из числа поддерживаемых в Azure типов. | См. статью об [индексаторах](search-indexer-overview.md). |
| Индекс | Сохраняемый индекс поиска в службе "Поиск Azure", составленный в соответствии со схемой индекса, в которой определяются структура и способы использования полей. | [Индексы в службе поиска Azure](search-what-is-an-index.md) | 

<a name="where-do-i-start"></a>

## <a name="where-do-i-start"></a>С чего начать?

**Шаг 1. [Создание индекса службы "Поиск Azure"](search-create-service-portal.md)** 

**Шаг 2. Выполнение кратких руководств и изучение примеров**

+ [Краткое руководство (портал)](cognitive-search-quickstart-blob.md)
+ [Руководство (HTTP-запросы)](cognitive-search-tutorial-blob.md)
+ [Примеры пользовательских навыков (C#)](cognitive-search-create-custom-skill-example.md)

Мы рекомендуем пользоваться бесплатной версией службы в учебных целях обучения. Но учтите, что число бесплатных транзакций ограничено 20 документами в день. Чтобы выполнить краткое руководство и руководство за один день, используйте небольшой набор файлов (из 10 документов), что позволит выполнить оба упражнения.

**Шаг 3. Изучите API.**

Вы можете использовать REST API версии `api-version=2019-05-06` с запросами или с пакетом SDK для .NET. 

На этом шаге для создания решения когнитивного поиска используются интерфейсы REST API. Только два API-интерфейса можно добавить или расширить для когнитивного поиска. Все остальные API сохраняют тот же синтаксис, что и в общедоступной версии.

| REST API | ОПИСАНИЕ |
|-----|-------------|
| [Создание источника данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source)  | Ресурс, определяющий внешний источник данных с исходными данными, которые будут применены для создания обогащенных документов.  |
| [Создание набора навыков (api-version=2019-05-06)](https://docs.microsoft.com/rest/api/searchservice/create-skillset)  | Ресурс, описывающий использование [стандартных навыков](cognitive-search-predefined-skills.md) и [пользовательских когнитивных навыков](cognitive-search-custom-skill-interface.md) в конвейере обогащения данных во время индексирования. |
| [Создание индекса](https://docs.microsoft.com/rest/api/searchservice/create-index)  | Схема, описывающая индекс службы "Поиск Azure". Поля в этом индексе сопоставляются с полями в источнике данных или с полями, созданным на этапе обогащения (например, поле с названиями организаций, созданное навыком распознавания сущностей). |
| [Создание индексатора (api-version=2019-05-06)](https://docs.microsoft.com/rest/api/searchservice/create-skillset)  | Ресурс, определяющий компоненты для процесса индексирования, в том числе источник данных, набор навыков, сопоставлений полей источника и промежуточных структур с полями целевого индекса, определение индекса. При запуске индексатора активируется процесс приема и обогащения данных. На выходе формируется индекс поиска, который основан на схеме индекса и заполнен исходными данными, обогащенными с помощью наборов навыков.  |

**Контрольный список: стандартный рабочий процесс**

1. Выделите репрезентативную выборку из набора исходных данных в Azure. Индексирование занимает немало времени, поэтому лучше начать с небольшого репрезентативного набора данных, который вы будете поэтапно развивать параллельно с разработкой решения.

1. Создайте [объект источника данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source) в службе "Поиск Azure", чтобы указать строку подключения для получения данных.

1. Создайте [набор навыков](https://docs.microsoft.com/rest/api/searchservice/create-skillset) с действиями для обогащения.

1. Определите [схему индекса](https://docs.microsoft.com/rest/api/searchservice/create-index). Коллекция *Поля* содержит поля источника данных. Также здесь нужно предусмотреть заглушки для дополнительных полей, в которых будет сохраняться содержимое, созданное на этапе обогащения.

1. Определите [индексатор](https://docs.microsoft.com/rest/api/searchservice/create-skillset) со ссылками на источник данных, набор навыков и индекс.

1. Добавьте в этот индексатор *outputFieldMappings*. Этот раздел сопоставляет выходные данные, полученные от набора навыков (шаг 3), с полями входных данных в схеме индекса (шаг 4).

1. Отправьте только что созданный запрос на *создание индексатора* (запрос POST с определением индексатора в тексте запроса), чтобы определить индексатор в службе "Поиск Azure". Именно этот шаг запускает ваш индексатор и начинает работу конвейера.

1. Выполните тестовые запросы для оценки результатов, и при необходимости измените код, обновив набор навыков, схемы или конфигурацию индексатора.

1. Выполните [сброс индексатора](search-howto-reindex.md), прежде чем перестроить конвейер.

Дополнительные сведения о некоторых вопросах и проблемах см. в статье [Советы по устранению неполадок с когнитивным поиском](cognitive-search-concept-troubleshooting.md).

## <a name="next-steps"></a>Дополнительная информация

+ [Документация по когнитивному поиску](cognitive-search-resources-documentation.md)
+ [Краткое руководство. Создание конвейера когнитивного поиска с использованием навыков и примера данных](cognitive-search-quickstart-blob.md)
+ [Руководство. Вызов API когнитивного поиска (предварительная версия)](cognitive-search-tutorial-blob.md)
+ [Обзор хранилища знаний](knowledge-store-concept-intro.md)
+ [Пошаговое руководство по началу работы с хранилищем знаний](knowledge-store-howto.md)
