---
title: Общие сведения об обогащении ИИ
titleSuffix: Azure Cognitive Search
description: Извлечение контента, обработка естественного языка (NLP) и обработка изображений используются для создания поискового контента в индексах Azure Cognitive Search с заранее определенными когнитивными навыками и пользовательскими алгоритмами ИИ.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 03/24/2020
ms.openlocfilehash: a41dcc9c7ec86f41c64a69ea1aba762b960b2633
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80283027"
---
# <a name="getting-started-with-ai-enrichment"></a>Начало работы с обогащением ИИ

Обогащение ИИ — это возможность индексирования Azure Cognitive Search, используемого для извлечения текста из изображений, капли и других неструктурированных источников данных. Обогащение и извлечение делают ваше содержимое более пригодным для поиска в [магазине индексов](search-what-is-an-index.md) или [знаний.](knowledge-store-concept-intro.md) Добыча и обогащение осуществляются с использованием *когнитивных навыков,* прикрепленных к конвейеру индексирования. В службу встроены когнитивные навыки приведенных ниже категорий. 

+ Навыки **обработки естественного языка** включают в себя [распознавание сущностей](cognitive-search-skill-entity-recognition.md), [распознавание языка](cognitive-search-skill-language-detection.md), [извлечение ключевых фраз](cognitive-search-skill-keyphrases.md), обработку текста, [определение тональности](cognitive-search-skill-sentiment.md), и [обнаружение персональных данных](cognitive-search-skill-pii-detection.md). С помощью этих навыков неструктурированный текст отображается как полей поиска и фильтрации в индексе.

+ **Навыки обработки изображений** включают [оптическое распознавание символов (OCR)](cognitive-search-skill-ocr.md) и идентификацию [визуальных особенностей,](cognitive-search-skill-image-analysis.md)таких как обнаружение лица, интерпретация изображений, распознавание изображений (известные люди и ориентиры) или атрибуты, такие как ориентация изображения. Эти навыки создают текстовые представления содержимого изображения, что делает его пригодным для поиска с помощью возможностей запроса Azure Cognitive Search.

![Схема конвейера обогащения](./media/cognitive-search-intro/cogsearch-architecture.png "обзор конвейера обогащения")

Когнитивные навыки в Azure Cognitive Search основаны на предварительно обученных моделях машинного обучения в ApIs Cognitive Services: [Computer Vision](https://docs.microsoft.com/azure/cognitive-services/computer-vision/) и [Text Analytics.](https://docs.microsoft.com/azure/cognitive-services/text-analytics/overview) 

На этапе приема данных применяется обработка естественного языка и изображений, при этом результаты становятся частью структуры документа в индексе поиска службы "Когнитивный поиск Azure". Данные получают в виде набора данных Azure, после чего они передаются по конвейеру индексирования с использованием необходимых [встроенных навыков](cognitive-search-predefined-skills.md). Архитектура является расширяемой, поэтому, если встроенных навыков недостаточно, вы можете создавать и прикреплять [пользовательские навыки](cognitive-search-create-custom-skill-example.md) для интеграции пользовательской обработки. Например, в модуле сущности или классификаторе документов можно выполнять задачи в специализированных областях: финансы, научные публикации или медицина.

## <a name="when-to-use-ai-enrichment"></a>Когда использовать обогащение ИИ

Рекомендуем использовать встроенные когнитивные навыки, если необработанное содержимое является неструктурированным текстом, содержимым изображения или содержимым, для которого требуется распознавание языка и перевод. Применение искусственного интеллекта с помощью встроенных когнитивных навыков может помочь распознать содержимое, что расширяет его ценность и возможности применения в приложениях поиска и обработки и анализа данных. 

Кроме того, вы можете добавить пользовательский навык, если у вас сторонний или собственный открытый исходный код, который нужно интегрировать в конвейер. Модели классификации, идентифицирующие основные характеристики различных типов документов, подпадают под эту категорию, но любой пакет, который повышает ценность содержимого, может быть использован.

### <a name="more-about-built-in-skills"></a>Дополнительные сведения о встроенных навыках

Набор [навыков,](cognitive-search-defining-skillset.md) собранный с использованием встроенных навыков, хорошо подходит для следующих сценариев применения:

+ Отсканированные документы (JPEG), которые нужно сделать доступными для полнотекстового поиска. Вы можете присоединить навык оптического распознавания символов (OCR) для идентификации, извлечения и приема текста из файлов JPEG.

+ Файлы PDF с изображением и текстом. Текст в файлах PDF можно извлечь во время индексирования, не выполняя шаги обогащения, но добавление обработки изображений и естественного языка часто может обеспечить лучший результат, чем стандартное индексирование.

+ Многоязычное содержимое, к которому необходимо применить распознавание языка и, возможно, перевод текста.

+ Неструктурированные или частично структурированные документы с содержимым, которое имеет присущее значение или контекст, скрытые в большом документе. 

  В частности, большие двоичные объекты часто содержат большой объем содержимого, которое помещено в единое "поле". Присоединив навыки обработки изображения и естественного языка к индексатору, можно сформировать сведения, существующие в необработанном содержимом, но не предоставленные в виде отдельных полей. Некоторые полезные, готовые к использованию встроенные когнитивные навыки включают в себя: извлечение ключевых фраз, анализ тональности и распознавание сущностей (людей, организаций и расположений).

  Кроме того, встроенные навыки также можно использовать для реструктуризации содержимого с помощью операций разделения текста, слияния и формирования фигур.

### <a name="more-about-custom-skills"></a>Дополнительные сведения о пользовательских навыках

Пользовательские навыки могут поддерживать более сложные сценарии, такие как распознавание форм или обнаружение настраиваемых сущностей с использованием модели, которую вы предоставляете и переносите в [веб-интерфейс пользовательских навыков](cognitive-search-custom-skill-interface.md). Несколько примеров пользовательских навыков включают в себя [Распознаватель документов](/azure/cognitive-services/form-recognizer/overview), интеграцию [API Поиска сущностей Bing](https://docs.microsoft.com/azure/search/cognitive-search-create-custom-skill-example) и [распознавание настраиваемых сущностей](https://github.com/Microsoft/SkillsExtractorCognitiveSearch).


## <a name="steps-in-an-enrichment-pipeline"></a>Шаги в конвейере обогащения

Конвейер обогащения основан на [*индексерах.*](search-indexer-overview.md) Индексы заполняют индекс, основанный на картографиях между индексом и источником данных для взлома документов. Навыки, теперь прикрепленные к индексам, перехватывают и обогащают документы в соответствии с набором навыков (ы), которые вы определяете. После индексации созданное содержимое будет доступно через поисковые запросы [любых типов, поддерживаемых в службе "Когнитивный поиск Azure"](search-query-overview.md).  Если вы еще не знакомы с индексаторами, ознакомьтесь с простым примером, представленным в этом разделе.

### <a name="step-1-connection-and-document-cracking-phase"></a>Шаг 1: Этап взлома соединения и документа

В начале конвейера у вас есть неструктурированный текст или нетекстовый контент (например, изображения, отсканированные документы или файлы JPEG). Эти данные нужно разместить в службе хранилища данных Azure, доступной для индексатора. Индексаторы умеют открывать исходные документы и извлекать из них текстовые данные. Растрескивание документов — это процесс извлечения или создания текстового содержимого из нетекстовых источников во время индексации.

![Этап распознавания документов](./media/cognitive-search-intro/document-cracking-phase-blowup.png "распознавание документов")

 В качестве источников данных поддерживаются хранилища больших двоичных объектов Azure, хранилища таблиц Azure, база данных SQL Azure и Azure Cosmos DB. Текстовое содержимое можно извлечь из файлов следующих типов: PDF, Word, PowerPoint и CSV. Дополнительные сведения см. в разделе [Поддерживаемые форматы документов](search-howto-indexing-azure-blob-storage.md#supported-document-formats). Индексирование занимает немало времени, поэтому лучше начать с небольшого репрезентативного набора данных, который вы будете поэтапно развивать параллельно с разработкой решения.

### <a name="step-2-cognitive-skills-and-enrichment-phase"></a>Шаг 2: Когнитивные навыки и фаза обогащения

Обогащение осуществляется с *когнитивными навыками* выполнения атомных операций. Например, после взлома PDF можно применить распознавание сущности, обнаружение языка или извлечение ключевых фраз для создания новых полей в индексе, которые не доступны в источнике. Совокупность таких возможностей, реализованная в вашем конвейере, называется *набором навыков*.  

![Этап обогащения](./media/cognitive-search-intro/enrichment-phase-blowup.png "этап обогащения")

Набор навыков основывается на [встроенных когнитивных навыках](cognitive-search-predefined-skills.md) или [пользовательских навыках](cognitive-search-create-custom-skill-example.md), которые вы создаете и подключаете к нему. Можно использовать как минимальные, так и очень сложные наборы навыков. Они определяют не только типы обработки, но и порядок операций. Набор навыков в сочетании с сопоставлением полей, которые включены в индексатор, полностью определяют весь конвейер обогащения данных. Дополнительные сведения о том, как собрать все эти фрагменты в единое целое, вы найдете в статье [Создание набора навыков в конвейере обогащения](cognitive-search-defining-skillset.md).

В конвейере создается коллекция обогащенных документов. Вы можете выбрать, какие из элементов этих обогащенных документов нужно сопоставить с индексируемыми полями в индексе поиска. Например, если вы применили ключевые извлечения фраз и навыки распознавания сущности, эти новые поля станут частью обогащенного документа и могут быть отображены на полях в индексе. В статье [Создание ссылок на аннотации в наборе навыков когнитивного поиска](cognitive-search-concept-annotations-syntax.md) вы найдете дополнительные сведения о структурах ввода и вывода.

#### <a name="add-a-knowledgestore-element-to-save-enrichments"></a>Добавление элемента knowledgeStore для сохранения обогащений

В [предварительной версии REST API api-version=2019-05-06 службы "Поиск"](search-api-preview.md) в наборы навыков добавляется определение `knowledgeStore`, которое обеспечивает подключение к хранилищу Azure, и проекции, описывающие способ сохранения обогащений. Это в дополнение к вашему индексу. В стандартном конвейере на основе ИИ обогащенные документы являются временными и используются только во время индексирования, а затем удаляются. В хранилище знаний сохраняются обогащенные документы. Подробные сведения см. в статье о [хранилище знаний (предварительная версия)](knowledge-store-concept-intro.md).

### <a name="step-3-search-index-and-query-based-access"></a>Шаг 3: Индекс поиска и доступ на основе запросов

Когда обработка завершится, в службе "Когнитивный поиск Azure" будет создан индекс поиска, состоящий из обогащенных документов с возможностью текстового поиска по ним. [Запросы по индексу](search-query-overview.md) позволяют разработчикам и пользователям получить доступ к обогащенному содержимому, созданному конвейером индексирования. 

![Индекс со значком поиска](./media/cognitive-search-intro/search-phase-blowup.png "индекс со значком поиска")

Такой индекс действует так же, как любой другой индекс в службе "Когнитивный поиск Azure", и вы можете дополнить его пользовательскими анализаторами, применить поисковые запросы нечетких соответствий, добавить фильтрацию или настроить профили оценки, чтобы сформировать результаты поиска.

Индексы создаются на основе схемы индекса, в которой определены поля, атрибуты и другие конструкции для конкретного индекса, в том числе профили оценки и карты синонимов. После создания и первичного заполнения индекса можно выполнять индивидуальные операции индексирования для учета новых и обновленных исходных документов. Некоторые изменения данных потребуют полного перестроения индекса. Пока структура схемы не будет достаточно стабильной, ограничьтесь небольшим набором данных. Дополнительные сведения см. в статье [How to rebuild an Azure Search index](search-howto-reindex.md) (Как перестроить индекс для службы "Поиск Azure").

**Контрольный список: стандартный рабочий процесс**

1. Выделите репрезентативную выборку из набора исходных данных в Azure. Индексирование занимает немало времени, поэтому лучше начать с небольшого репрезентативного набора данных, который вы будете поэтапно развивать параллельно с разработкой решения.

1. Создайте [объект источника данных](https://docs.microsoft.com/rest/api/searchservice/create-data-source) в службе "Когнитивный поиск Azure", чтобы указать строку подключения для получения данных.

1. Создайте [набор навыков](https://docs.microsoft.com/rest/api/searchservice/create-skillset) с действиями для обогащения.

1. Определите [схему индекса](https://docs.microsoft.com/rest/api/searchservice/create-index). Коллекция *Поля* содержит поля источника данных. Также здесь нужно предусмотреть заглушки для дополнительных полей, в которых будет сохраняться содержимое, созданное на этапе обогащения.

1. Определите [индексатор](https://docs.microsoft.com/rest/api/searchservice/create-skillset) со ссылками на источник данных, набор навыков и индекс.

1. Добавьте в этот индексатор *outputFieldMappings*. Этот раздел сопоставляет выходные данные, полученные от набора навыков (шаг 3), с полями входных данных в схеме индекса (шаг 4).

1. Отправьте только что созданный запрос на *создание индексатора* (запрос POST с определением индексатора в тексте запроса), чтобы определить индексатор в службе "Когнитивный поиск Azure". Именно этот шаг запускает ваш индексатор и начинает работу конвейера.

1. Выполните тестовые запросы для оценки результатов, и при необходимости измените код, обновив набор навыков, схемы или конфигурацию индексатора.

1. Выполните [сброс индексатора](search-howto-reindex.md), прежде чем перестроить конвейер.

## <a name="next-steps"></a>Дальнейшие действия

+ [Ссылки на документацию по обогащению ИИ](cognitive-search-resources-documentation.md)
+ [Пример: Создание пользовательского навыка для обогащения ИИ (C)](cognitive-search-create-custom-skill-example.md)
+ [Быстрый запуск: Попробуйте обогащение ИИ в портале пошаговая](cognitive-search-quickstart-blob.md)
+ [Учебник: Узнайте о AI-аПО по обогащению ИИ](cognitive-search-tutorial-blob.md)
+ [Что собой представляет хранилище знаний в службе "Поиск Azure"](knowledge-store-concept-intro.md)
+ [Создание хранилища знаний в REST](knowledge-store-create-rest.md)
+ [Советы по устранению неполадок](cognitive-search-concept-troubleshooting.md)
