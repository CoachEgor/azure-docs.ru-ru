---
title: Управление доступом на основе ролей и управление привилегированными пользователями в Австралии Azure
description: Рекомендации по реализации контроля доступа на основе ролей и управление привилегированными пользователями в регионах Австралии в соответствии с определенными требованиями политики Австралии правительства, нормативных актов и законодательства.
author: Galey801
ms.service: azure-australia
ms.topic: conceptual
ms.date: 07/22/2019
ms.author: grgale
ms.openlocfilehash: e2a94f82e4830bd1e9c96039f5ef8fe6546b0d0b
ms.sourcegitcommit: 6d2a147a7e729f05d65ea4735b880c005f62530f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69982673"
---
# <a name="role-based-access-control-rbac-and-privileged-identity-management-pim"></a>Управление доступом на основе ролей (RBAC) и управление привилегированными пользователями (PIM)

Управление административными привилегиями является важным шагом для обеспечения безопасности в любой ИТ-среде. Ограничения прав администратора при использовании минимальных привилегий безопасности являются обязательным компонентом [ACSC ISM](https://acsc.gov.au/infosec/ism/index.htm) и Forms из списка [ACSC важный 8](https://www.acsc.gov.au/infosec/mitigationstrategies.htm) рекомендаций по безопасности.

Корпорация Майкрософт предоставляет набор элементов управления для реализации JIT и достаточного доступа в пределах Microsoft Azure. Понимание этих элементов управления важно для эффективной защиты в облаке. В этом руководство будут представлены общие сведения об элементах управления и рекомендации по проектированию при их реализации.

## <a name="role-based-access-control-rbac"></a>Управление доступа на основе ролей

Управление доступом на основе ролей — это централизованное управление доступом ко всем ресурсам в Microsoft Azure и управлению Azure Active Directory (Azure AD). RBAC можно реализовать наряду с рядом дополнительных функций, доступных в Azure. В этой статье основное внимание уделяется реализации эффективного RBAC с помощью Azure Группы управления, Azure Active Directory групп и Azure управление привилегированными пользователями (PIM).

На высоком уровне реализация RBAC требует наличия трех компонентов:

![RBAC — обзор](media/rbac-overview.png)

* **Субъекты безопасности**: Субъект безопасности может быть одним из следующих: пользователь, группа, субъекты- [службы](https://docs.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals)или [управляемое удостоверение](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview). Субъектам безопасности следует назначить права доступа с помощью групп Azure Active Directory.

* **Определения ролей**: Определение роли, также называемое ролью, представляет собой коллекцию разрешений. Эти разрешения определяют операции, которые могут быть выполнены субъектами безопасности, назначенными для определения роли. Эта функция предоставляется ролями ресурсов Azure и Azure Active Directory ролями администратора. Azure поставляется с набором встроенных ролей (Link), которые можно дополнить пользовательскими ролями.

* **Область**. Область — это набор ресурсов Azure, к которым применяется определение роли. Роли Azure можно назначать ресурсам Azure с помощью Azure Группы управления.

Эти три компонента объединяются, чтобы предоставить субъектам безопасности доступ, определенный в определениях ролей, ко всем ресурсам, которые попадают в область Azure Группы управления. это называется назначением роли. Субъекту безопасности может быть назначено несколько определений ролей, и одной области может быть назначено несколько участников безопасности.

### <a name="azure-active-directory-groups"></a>Группы Azure Active Directory

При назначении привилегий пользователям или группам, когда это возможно, назначение должно быть связано с группой Azure Active Directory и не назначаться непосредственно пользователю. Это та же рекомендация, которая наследуется от локальных реализаций Active Directory. Там, где возможно, группы Azure Active Directory должны создаваться для каждой команды, дополняющие логическую структуру созданного Группы управления Azure.

В сценарии с гибридным облаком локальные группы безопасности Windows Server Active Directory могут быть синхронизированы с экземпляром Azure Active Directory. Если вы уже реализовали RBAC в локальной среде с помощью этих групп безопасности Windows Server Active Directory, эти группы после синхронизации можно использовать для реализации RBAC для ресурсов Azure. В противном случае облачная среда будет рассматриваться как чистая для разработки и реализации надежного плана управления правами, построенного на основе реализации Azure Active Directory.

### <a name="azure-resource-roles-versus-azure-active-directory-administrator-roles"></a>Роли ресурсов Azure и роли администратора Azure Active Directory

Microsoft Azure предлагает широкий спектр встроенных ролей для [ресурсов Azure](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles) и [администрирования Azure Active Directory](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-assign-admin-roles). Оба типа ролей предоставляют конкретный детализированный доступ к ресурсам Azure или администраторам Azure AD. Важно отметить, что роли ресурсов Azure нельзя использовать для предоставления административного доступа к ролям Azure AD и Azure AD, которые не предоставляют конкретный доступ к ресурсам Azure.

Ниже приведены некоторые примеры типов доступа, которые могут быть назначены ресурсу Azure с помощью встроенной роли.

* предоставление одному пользователю разрешения на управление виртуальными машинами в подписке, а другому — на управление виртуальными сетями;
* предоставление группе DBA разрешения на управление базами данных SQL в подписке;
* предоставление пользователю разрешения на управление всеми ресурсами в группе ресурсов, включая виртуальные машины, веб-сайты и подсети;
* представление приложению доступа ко всем ресурсам в группе ресурсов.

Примеры типов доступа, которые могут быть назначены для администрирования Azure AD:

* Разрешить сотрудникам службы поддержки сбрасывать пароли пользователей
* Разрешить сотрудникам приглашать внешних пользователей в экземпляр Azure AD для службы совместной работы B2B
* Разрешить административному персоналу доступ на чтение для входа и аудита отчетов
* Разрешить персоналу управлять всеми пользователями и группами, включая сброс паролей.

Важно понять полный список допустимых действий, предоставляемых встроенной ролью, чтобы гарантировать, что источником значительногоный доступ к не предоставляется. Список встроенных ролей и предоставляемый им доступ постоянно развивается, полный список ролей и их определений можно просмотреть, просмотрев документацию, связанную выше, или с помощью командлета Azure PowerShell:

```PowerShell
PS C:\> Get-AzRoleDefinition

Name             : AcrDelete
Id               : <<RoleID>>
IsCustom         : False
Description      : acr delete
Actions          : {Microsoft.ContainerRegistry/registries/artifacts/delete}
NotActions       : {}
DataActions      : {}
NotDataActions   : {}
AssignableScopes : {/}
...
```

или команду Azure CLI:

```bash
PS C:\> az role definition list
[
  {
    "assignableScopes": [
      "/"
    ],
    "description": "acr delete",
    "id": "/subscriptions/49b12d1b-4030-431c-8448-39056021c4ab/providers/Microsoft.Authorization/roleDefinitions/c2f4ef07-c644-48eb-af81-4b1b4947fb11",
    "name": "c2f4ef07-c644-48eb-af81-4b1b4947fb11",
    "permissions": [
      {
        "actions": [
          "Microsoft.ContainerRegistry/registries/artifacts/delete"
        ],
        "dataActions": [],
        "notActions": [],
        "notDataActions": []
      }
    ],
    "roleName": "AcrDelete",
    "roleType": "BuiltInRole",
    "type": "Microsoft.Authorization/roleDefinitions"
  },
...
```

При необходимости можно также создать пользовательские роли ресурсов Azure. Эти пользовательские роли можно создать в портал Azure, с помощью PowerShell или Azure CLI. При создании пользовательских ролей крайне важно обеспечить уникальность назначения роли и ее функции, которая еще не предоставлена существующей ролью ресурса Azure. Это сокращает текущую сложность управления и снижает риск получения ненужных прав субъектами безопасности. В качестве примера можно создать настраиваемую роль ресурсов Azure, которая находится между встроенными ролями ресурсов Azure, "участник виртуальных машин" и "Администратор виртуальной машины".

Настраиваемая роль может основываться на существующей роли участника, которая предоставляет следующий доступ:

| Ресурс Azure | Уровень доступа |
| --- | --- |
| Виртуальные машины | Может управлять, но не может получить к ним доступ |
| Виртуальная сеть, подключенная к виртуальной машине | Нет доступа к |
| Хранилище, подключенное к виртуальной машине | Нет доступа к |
|

Пользовательская роль может сохранить этот базовый доступ, но разрешить назначенным пользователям некоторые основные дополнительные привилегии для изменения конфигурации сети виртуальных машин.

Роли ресурсов Azure также имеют преимущество в возможности назначать ресурсы через Azure Группы управления.

### <a name="azure-management-groups"></a>Группы управления Azure

Azure Группы управления может использоваться в Организации для управления назначением ролей для всех подписок и их ресурсов в рамках аренды Azure. Группы управления Azure позволяют создавать иерархии управления, в том числе возможность сопоставлять организационную структуру иерархически в Azure. Создание организационных бизнес-единиц в виде отдельных логических сущностей позволяет применять разрешения в рамках Организации на основе конкретных требований каждой команды. Группы управления Azure можно использовать для определения иерархии управления до шести уровней.

![Группы управления](media/management-groups.png)

Группы управления Azure сопоставляются с подписками Azure в рамках аренды Azure. Это позволяет Организации отделить ресурсы Azure, принадлежащие конкретным подразделениям, и обеспечить уровень детализации управления затратами и назначением прав.

## <a name="privileged-identity-management-pim"></a>Управление привилегированными пользователями (PIM)

Корпорация Майкрософт реализовала JIT-доступ и достаточный уровень доступа (JEA) через Azure управление привилегированными пользователями. Эта служба позволяет административным сотрудникам управлять привилегированным доступом к ресурсам Azure, управлять им и отслеживать их. PIM позволяет субъектам безопасности быть "подходящими" для роли по административному персоналу, что позволяет пользователям запрашивать активацию роли с помощью портал Azure или с помощью командлетов PowerShell. По умолчанию назначение ролей может быть активировано в течение от 1 до 72 часов. При необходимости пользователь может запросить расширение для назначения роли, а также сделать так, чтобы в ней существовало постоянное назначение ролей. Кроме того, требование многофакторной проверки подлинности может быть применено, когда пользователи запрашивают активацию соответствующих ролей. По истечении периода, выделенного для активации роли, субъект безопасности больше не имеет привилегированного доступа, предоставленного этой ролью.

Использование PIM предотвращает общие проблемы назначения привилегий, которые могут возникнуть в средах, которые не используют JIT-доступ или не выполняют повседневные аудиты назначения прав. Одна из распространенных проблем заключается в том, что назначение повышенных привилегий заменяется и остается в течение длительного времени после завершения задачи, которая требует повышенных привилегий. Другой проблемой является увеличение привилегий с повышенными правами в среде путем клонирования доступа, назначенного субъекту безопасности при настройке других аналогичных субъектов безопасности.

## <a name="key-design-considerations"></a>Основные рекомендации по проектированию

При проектировании стратегии RBAC с целью применения минимальных привилегий безопасности следует учитывать следующие требования безопасности:

* Запросы на привилегированный доступ проверены
* Права администратора ограничены минимальным доступом, необходимым для выполнения конкретных обязанностей.
* Права администратора ограничены минимальным периодом времени, необходимым для выполнения конкретных обязанностей.
* Регулярные проверки предоставленных административных привилегий выполняются

Процесс проектирования стратегии RBAC требует подробного анализа бизнес-функций, чтобы понять разницу в доступе между различными бизнес-ролями, а также тип и частоту работы, для которой требуются повышенные привилегии. Разница в функции между оператором резервного копирования, администратором безопасности и аудиторией потребует различных уровней доступа в разное время с различными уровнями текущей проверки.

## <a name="validate-requests-for-access"></a>Проверка запросов на доступ

Повышенные привилегии должны быть явно утверждены. Для поддержки этого необходимо разработать процесс утверждения и соответствующий персонал, отвечающий за проверку того, что все запросы на дополнительные привилегии являются допустимыми. Управление привилегированными пользователями предоставляет несколько параметров для утверждения назначения ролей. Запрос на активацию роли можно настроить таким же путем, чтобы он мог выполнять самостоятельное утверждение или быть включенным и требовать, чтобы назначенные утверждающие вручную Просмотрели и утверждали все запросы на активацию ролей. Запросы на активацию также можно настроить так, чтобы в запрос на активацию включалась дополнительная вспомогательная информация, например номера билетов.

### <a name="restrict-privilege-based-on-duties"></a>Ограничение прав на основе обязанностей

Повышение уровня привилегий, предоставленных субъектам безопасности, является критически важным, так как назначение привилегий по перенаправлению является распространенным вектором атаки ИТ-безопасности. Типы управляемых ресурсов и группы, ответственные за, должны быть оценены, чтобы можно было назначить минимальный уровень привилегий, необходимых для ежедневных обязанностей. Дополнительные привилегии, которые выходят за рамки тех, которые требуются для ежедневных обязанностей, всегда предоставляются только в течение периода времени, необходимого для выполнения определенной задачи. В качестве примера можно привести "участник" — доступ к администратору клиента, но разрешить ему запрашивать разрешения "владелец" для ресурса Azure для конкретной задачи, которая требует доступа к временному высокодоступному уровню.

Это гарантирует, что каждый отдельный администратор будет иметь только повышенный уровень доступа в течение кратчайшего периода времени. Соблюдение этих рекомендаций сокращает общую область атак для любой инфраструктуры ИТ.

### <a name="regular-evaluation-of-administrative-privilege"></a>Регулярная оценка прав администратора

Важно, чтобы субъекты безопасности в среде подвергать аудиту, чтобы гарантировать, что в настоящее время назначен правильный уровень привилегий. Microsoft Azure предоставляет ряд средств для аудита и вычисления привилегий, назначенных субъектам безопасности Azure. Управление привилегированными пользователями позволяет административным сотрудникам периодически выполнять "проверки доступа" ролей, предоставленных субъектам безопасности. Проверку доступа можно использовать для аудита назначения ролей ресурсов Azure и Azure Active Directory назначения административной роли. Для проверки доступа можно настроить следующие свойства.

* **Проверьте имя и дату начала и окончания проверки**: Проверки должны быть достаточно длинны, чтобы назначенные пользователи могли их завершить.

* **Роль, которую необходимо проверить**: Каждая проверка доступа сосредоточена на одной роли Azure.

* Назначенные Рецензенты: Существует три способа выполнения проверки. Можно назначить выполнение проверки другому пользователю, можно сделать это самостоятельно, или же каждый пользователь может проверить свой доступ.

* **Требовать от пользователей указать причину для доступа**: Пользователям может потребоваться ввести причину для поддержания их уровня привилегий при завершении проверки доступа.

Ход выполнения незавершенных проверок доступа можно отслеживать в любое время с помощью панели мониторинга в портал Azure. Доступ к проверяемой роли останется неизменным до завершения проверки доступа. Кроме того, можно выполнять [Аудит](https://docs.microsoft.com/azure/active-directory/privileged-identity-management/pim-how-to-use-audit-log) всех назначений и активаций пользователей PIM в течение определенного периода времени.

## <a name="next-steps"></a>Следующие шаги

Изучите статью о [мониторинге системы в Azure Австралии](system-monitor.md).
