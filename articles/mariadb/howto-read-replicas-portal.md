---
title: Управление репликами чтения - Портал Azure - База данных Azure для MariaDB
description: В этой статье описывается, как настроить и управлять репликами чтения в базе данных Azure для MariaDB с помощью портала
author: ajlam
ms.author: andrela
ms.service: mariadb
ms.topic: conceptual
ms.date: 3/18/2020
ms.openlocfilehash: 5c28697b27e9cf910302b7379e1443f7e78e96b8
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79530620"
---
# <a name="how-to-create-and-manage-read-replicas-in-azure-database-for-mariadb-using-the-azure-portal"></a>Как создавать и управлять считывательными репликами в базе данных Azure для MariaDB с помощью портала Azure

В этой статье вы узнаете, как создавать и управлять считывательными репликами в базе данных Azure для службы MariaDB с помощью портала Azure.

## <a name="prerequisites"></a>Предварительные требования

- [База данных Azure для сервера MariaDB,](quickstart-create-mariadb-server-database-using-azure-portal.md) которая будет использоваться в качестве главного сервера.

> [!IMPORTANT]
> Функция считывателя реплики доступна только для базы данных Azure для серверов MariaDB на уровнях общего назначения или оптимизации цен на память. Убедитесь, что главный сервер находится в одной из этих ценовых категорий.

## <a name="create-a-read-replica"></a>Создание реплики чтения

Чтобы создать сервер-реплику чтения, выполните следующие действия.

1. Войти на [портал Azure](https://portal.azure.com/).

2. Выберите существующую базу данных Azure для сервера MariaDB, который вы хотите использовать в качестве мастера. Откроется страница **Обзор**.

3. В меню в разделе **Параметры** выберите **Репликация**.

4. Выберите **Добавить реплику**.

   ![База данных Azure для MariaDB - Репликация](./media/howto-read-replica-portal/add-replica.png)

5. Введите имя для сервера реплики.

    ![База данных Azure для MariaDB - имя реплики](./media/howto-read-replica-portal/replica-name.png)

6. Выберите местоположение для сервера реплики. Местоположение по умолчанию такое же, как и у главного сервера.

    ![База данных Azure для MariaDB - Местоположение реплики](./media/howto-read-replica-portal/replica-location.png)

   > [!NOTE]
   > Репликация кросс-региона находится в предварительном просмотре. Чтобы узнать больше о том, в каких регионах можно создать копию, посетите [статью о концепциях ремиссий.](concepts-read-replicas.md) 

7. Выберите **OK,** чтобы подтвердить создание реплики.

> [!NOTE]
> Реплики чтения создаются с той же конфигурацией сервера, что и у главного сервера. Вы можете изменить созданную конфигурацию сервера-реплики. Чтобы сервер-реплика мог работать с главным сервером, рекомендуется, чтобы значения конфигурации сервера-реплики были равны или превосходили значения конфигурации главного сервера.

Созданный сервер-реплику можно просмотреть в колонке **Репликация**.

   ![База данных Azure для MariaDB - Список реплик](./media/howto-read-replica-portal/list-replica.png)

## <a name="stop-replication-to-a-replica-server"></a>Остановка репликации на сервер-реплику

> [!IMPORTANT]
> Остановка репликации на сервер является необратимой операцией. Репликацию, остановленную между главным сервером и сервером-репликой, отменить невозможно. Сервер-реплика становится автономным и начинает поддерживает операции чтения и записи. Это сервер нельзя снова преобразовать в реплику.

Чтобы остановить репликацию между главным сервером и сервером-репликой на портале Azure, следуйте инструкциям ниже.

1. На портале Azure выберите мастер-базу данных Azure для сервера MariaDB. 

2. В меню в разделе **Параметры** выберите **Репликация**.

3. Выберите сервер-реплику, для которого нужно остановить репликацию.

   ![База данных Azure для MariaDB - Остановка репликации выбрать сервер](./media/howto-read-replica-portal/stop-replication-select.png)

4. Выберите **Stop репликации.**

   ![База данных Azure для MariaDB - Остановка репликации](./media/howto-read-replica-portal/stop-replication.png)

5. Подтвердите остановку репликации, нажав кнопку **ОК**.

   ![База данных Azure для MariaDB - Подтверждение копирования остановки](./media/howto-read-replica-portal/stop-replication-confirm.png)

## <a name="delete-a-replica-server"></a>Удаление сервера-реплики

Чтобы удалить сервер-реплику чтения на портале Azure, следуйте инструкциям ниже.

1. На портале Azure выберите мастер-базу данных Azure для сервера MariaDB.

2. В меню в разделе **Параметры** выберите **Репликация**.

3. Выберите сервер-реплику, который нужно удалить.

   ![База данных Azure для MariaDB - Удалить выберите сервер реплики](./media/howto-read-replica-portal/delete-replica-select.png)

4. Выберите **реплику удалить**

   ![База данных Azure для MariaDB - Удалить реплику](./media/howto-read-replica-portal/delete-replica.png)

5. Введите имя реплики и нажмите кнопку **Удалить**, чтобы подтвердить удаление реплики.  

   ![База данных Azure для MariaDB - Подтверждение удаления](./media/howto-read-replica-portal/delete-replica-confirm.png)

## <a name="delete-a-master-server"></a>Удаление главного сервера

> [!IMPORTANT]
> Удаление главного сервера приводит к остановке репликации на все серверы-реплики и удалению самого главного сервера. Серверы-реплики становятся автономными серверами, которые начинают поддерживать операции чтения и записи.

Чтобы удалить главный сервер на портале Azure, следуйте инструкциям ниже.

1. На портале Azure выберите мастер-базу данных Azure для сервера MariaDB.

2. На странице **Обзор** выберите **Удалить**.

   ![База данных Azure для MariaDB - Мастер удаления](./media/howto-read-replica-portal/delete-master-overview.png)

3. Введите имя главного сервера и нажмите кнопку **Удалить**, чтобы подтвердить его удаление  

   ![База данных Azure для MariaDB - Мастер удаления](./media/howto-read-replica-portal/delete-master-confirm.png)

## <a name="monitor-replication"></a>Мониторинг репликации

1. На [портале Azure](https://portal.azure.com/)выберите базу данных реплики Azure для сервера MariaDB, который вы хотите контролировать.

2. В разделе боковой панели **Мониторинг** выберите **Метрики**.

3. В раскрывающемся списке доступных метрик выберите **Replication lag in seconds** (Задержка репликации в секундах).

   ![Выбор задержки репликации](./media/howto-read-replica-portal/monitor-select-replication-lag.png)

4. Выберите нужный диапазон времени. На рисунке ниже выбран диапазон в 30 минут.

   ![Выбор диапазона времени](./media/howto-read-replica-portal/monitor-replication-lag-time-range.png)

5. Просмотрите задержку репликации для выбранного диапазона времени. На рисунке ниже отображаются последние 30 минут для большой рабочей нагрузки.

   ![Выбор диапазона времени](./media/howto-read-replica-portal/monitor-replication-lag-time-range-thirty-mins.png)

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте больше о [репликах чтения](concepts-read-replicas.md)