---
title: Частная ссылка - База данных Azure для MariaDB
description: Узнайте, как работает приватная ссылка для базы данных Azure для MariaDB.
author: kummanish
ms.author: manishku
ms.service: mariadb
ms.topic: conceptual
ms.date: 03/10/2020
ms.openlocfilehash: b05a202537492fe54a76cf40a3b15987e099a7e3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79367726"
---
# <a name="private-link-for-azure-database-for-mariadb"></a>Частная ссылка для базы данных Azure для MariaDB

Private Link позволяет создавать частные конечные точки для базы данных Azure для MariaDB и таким образом приносит услуги Azure в вашу частную виртуальную сеть (VNet). Частная конечная точка предоставляет частный IP, который можно использовать для подключения к базе данных Azure для сервера базы данных MariaDB, как и любой другой ресурс в VNet.

Для получения списка служб PaaS, поддерживающих функции Private Link, просмотрите [документацию](https://docs.microsoft.com/azure/private-link/index)Private Link. Частная конечная точка — это частный IP-адрес в определенной [виртуальной сети](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) и подсети.

> [!NOTE]
> Эта функция доступна во всех регионах Azure, где база данных Azure для MariaDB поддерживает уровни ценообразования общего назначения и памяти.

## <a name="data-exfiltration-prevention"></a>Предотвращение кражи данных

Экс-фильтрация данных в базе данных Azure для MariaDB — это когда авторизованный пользователь, например, админ базы данных, может извлечь данные из одной системы и переместить их в другое место или систему за пределами организации. Например, пользователь перемещает данные в учетную запись хранения, принадлежащую третьей стороне.

Рассмотрим сценарий с пользователем под управлением рабочей скамьи MariaDB внутри Azure VM, соединяющегося с базой данных Azure для экземпляра MariaDB. Этот экземпляр MariaDB находится в центре обработки данных западного США. В приведенном ниже примере показано, как ограничить доступ с общедоступными конечными точками в базе данных Azure для MariaDB с помощью элементов управления доступом к сети.

* Отключите весь трафик службы Azure в базу данных Azure для MariaDB через общедоступную точку, установив для OFF службы «Разрешить Azure». Убедитесь, что IP-адреса или диапазоны не имеют доступа к серверу либо с помощью [правил брандмауэра,](https://docs.microsoft.com/azure/mariadb/concepts-firewall-rules) либо с помощью [виртуальных конечных точек сетевого обслуживания.](https://docs.microsoft.com/azure/mariadb/concepts-data-access-security-vnet)

* Разрешить трафик в базу данных Azure для MariaDB только с помощью частного IP-адреса VM. Дополнительные сведения см. в статьях, посвященных [конечной точке службы](concepts-data-access-security-vnet.md) и [правилам брандмауэра виртуальной сети](howto-manage-vnet-portal.md).

* На Azure VM сузите область исходящего соединения, используя группы сетевой безопасности (НСГ) и теги служб следующим образом:

    * Укажите правило NSG, разрешав трафик для тега обслуживания и S'L. WestUs - только разрешение подключения к базе данных Azure для MariaDB на западе США
    * Указать правило NSG (с более высоким приоритетом) отказать в трафике для тега обслуживания и S'L - отказ в подключении к базе данных MariaDB во всех регионах</br></br>

В конце этой установки Azure VM может подключаться только к базе данных Azure для MariaDB в западном регионе США. Однако подключение не ограничивается одной базой данных Azure для MariaDB. VM по-прежнему может подключиться к любой базе данных Azure для MariaDB в западном регионе США, включая базы данных, не входят в подписку. Хотя мы сократили масштабы кражи данных в приведенном выше сценарии до определенного региона, мы не полностью устранили ее.</br>

С помощью Private Link теперь можно настроить элементы управления доступом к сети, такие как НСГ, чтобы ограничить доступ к частной конечной точке. Затем отдельные ресурсы Azure PaaS сопоставляются с конкретными частными конечными точками. Злоумышленник может получить доступ только к отображенным ресурсу PaaS (например, к базе данных Azure для MariaDB) и ни к какому другому ресурсу.

## <a name="on-premises-connectivity-over-private-peering"></a>Локальные подключения через частный пиринг

При подключении к общедоступной точке с помощью наземных машин ваш IP-адрес должен быть добавлен в брандмауэр на основе IP с помощью правила брандмауэра на уровне сервера. Хотя эта модель отлично подходит для предоставления доступа к отдельным компьютерам для рабочих нагрузок разработки или тестирования, управлять ею в рабочей среде сложно.

С помощью Private Link вы можете включить кросс-предпосылок к частной конечной точке с помощью [Express Route](https://azure.microsoft.com/services/expressroute/) (ER), частного пиринга или [VPN туннеля.](https://docs.microsoft.com/azure/vpn-gateway/) Впоследствии они могут отключить весь доступ через публичную конечную точку и не использовать брандмауэр на основе IP.

## <a name="configure-private-link-for-azure-database-for-mariadb"></a>Налажить частную ссылку для базы данных Azure для MariaDB

### <a name="creation-process"></a>Процесс создания

Для включения Private Link требуются частные конечные точки. Это можно сделать с помощью следующих руководств.

* [Портал Azure](https://docs.microsoft.com/azure/mariadb/howto-configure-privatelink-portal)
* [Cli](https://docs.microsoft.com/azure/mariadb/howto-configure-privatelink-cli)

### <a name="approval-process"></a>Процесс утверждения

Как только сетевой админ создает частную конечную точку (PE), админ может управлять частным конечным соединением (PEC) к базе данных Azure для MariaDB. Такое разделение обязанностей между админ-амином сети и dBA полезно для управления базой данных Azure для подключения MariaDB. 

* Перейдите на базу данных Azure для серверного ресурса MariaDB на портале Azure. 
    * Выберите приватные соединения конечных точек в левом стеле
    * Отображает список всех частных конечных соединений (УИК)
    * Создана соответствующая частная конечная точка (PE)

![выберите частный портал конечных точек](media/concepts-data-access-and-security-private-link/select-private-link-portal.png)

* Выберите отдельное PEC из списка, щелкнув его.

![выбрать частную конечную точку в ожидании утверждения](media/concepts-data-access-and-security-private-link/select-private-link.png)

* Администратор сервера MariaDB может утвердить или отклонить УИК и дополнительно добавить короткий текстовый ответ.

![выбрать закрытое сообщение конечных точек](media/concepts-data-access-and-security-private-link/select-private-link-message.png)

* После утверждения или отклонения список будет отражать соответствующее состояние вместе с текстом ответа

![выбрать конечное состояние конечной точки](media/concepts-data-access-and-security-private-link/show-private-link-approved-connection.png)

## <a name="use-cases-of-private-link-for-azure-database-for-mariadb"></a>Использование случаев частной ссылки для базы данных Azure для MariaDB

Клиенты могут подключиться к частной точке от одной из тох же VNet, заглянув vNet в том же регионе или через соединение VNet-vNet в разных регионах. Кроме того, клиенты могут подключаться из локальной среды с помощью ExpressRoute, частного пиринга или VPN-туннелирования. Ниже приведена упрощенная схема, на которой показаны распространенные варианты использования.

![выберите частный обзор конечных точек](media/concepts-data-access-and-security-private-link/show-private-link-overview.png)

### <a name="connecting-from-an-azure-vm-in-peered-virtual-network-vnet"></a>Подключение из виртуальной машины Azure в одноранговой виртуальной сети (VNet)
[Нанастройка внештатных взорцированных VNet](https://docs.microsoft.com/azure/virtual-network/tutorial-connect-virtual-networks-powershell) для создания подключения к базе данных Azure для MariaDB с Azure VM в загляну vNet.

### <a name="connecting-from-an-azure-vm-in-vnet-to-vnet-environment"></a>Подключение из виртуальной машины Azure в среде виртуальных сетей
Наладить [подключение к VPN VNet к VNet](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal) для установления подключения к базе данных Azure для MariaDB из Azure VM в другом регионе или подписке.

### <a name="connecting-from-an-on-premises-environment-over-vpn"></a>Подключение из локальной среды через VPN
Чтобы установить подключение из предварительной среды в базу данных Azure для MariaDB, выберите и реализуйте один из вариантов:

* [Подключение "точка — сеть"](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps)
* [VPN-подключение типа "сеть —сеть".](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell)
* [Канал ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-howto-linkvnet-portal-resource-manager)

## <a name="private-link-combined-with-firewall-rules"></a>Частная ссылка в сочетании с правилами брандмауэра

Следующие ситуации и результаты возможны при использовании Private Link в сочетании с правилами брандмауэра:

* Если вы не наверстируете никаких правил брандмауэра, то по умолчанию никакой трафик не сможет получить доступ к базе данных Azure для MariaDB.

* Если вы настраиваете общественный трафик или конечную точку службы и создаете частные конечные точки, то различные типы входящего трафика авторизуются соответствующим типом правила брандмауэра.

* Если вы не настраиваете какой-либо конечный поток общественного трафика или службы и создаете частные конечные точки, то база данных Azure для MariaDB доступна только через частные конечные точки. Если вы не наконцентрируете общественный трафик или конечную точку службы, после того, как все утвержденные частные конечные точки будут отклонены или удалены, ни один трафик не сможет получить доступ к базе данных Azure для MariaDB.

## <a name="deny-public-access-for-azure-database-for-mariadb"></a>Запретить открытый доступ для базы данных Azure для MariaDB

Если вы хотите полностью полагаться только на частные конечные точки для доступа к базе данных Azure для MariaDB, можно отключить установку всех общедоступных конечных точек[(правила брандмауэра](concepts-firewall-rules.md) и [конечные точки службы VNet),](concepts-data-access-security-vnet.md)установив конфигурацию **Deny Public Network Access** на сервере базы данных. 

Когда эта настройка установлена *в ДА,* в базу данных Azure для MariaDB разрешены только соединения через частные конечные точки. Когда эта настройка установлена *в NO,* клиенты могут подключиться к базе данных Azure для MariaDB на основе параметров брандмауэра или конечных точек службы VNet. Кроме того, после установки значения доступа к частной сети нельзя добавлять и/или обновлять существующие правила брандмауэра и конечных точек службы VNet.

> [!Note]
> Эта функция доступна во всех регионах Azure, где база данных Azure для PostgreS-L - Единый сервер поддерживает уровни ценообразования общего назначения и памяти.
>
> Эта настройка не оказывает никакого влияния на конфигурации SSL и TLS для базы данных Azure для MariaDB.

Чтобы узнать, как настроить **доступ к публичной сети Deny** для базы данных Azure для базы данных MariaDB с портала Azure, обратитесь к Как настроить ["Запретить доступ к общественной сети".](howto-deny-public-network-access.md)

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать больше о базе данных Azure для функций безопасности MariaDB, смотрите следующие статьи:

* Для настройки брандмауэра для базы данных [Firewall support](https://docs.microsoft.com/azure/mariadb/concepts-firewall-rules)Azure для MariaDB см.

* Чтобы узнать, как настроить конечную точку виртуального сетевого сервиса для базы данных Azure для MariaDB, [см.](https://docs.microsoft.com/azure/mariadb/concepts-data-access-security-vnet)

* Для обзора базы данных Azure для подключения [Azure Database for MariaDB Connectivity Architecture](https://docs.microsoft.com/azure/MariaDB/concepts-connectivity-architecture) MariaDB см.
