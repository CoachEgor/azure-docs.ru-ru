---
title: Выбор правильного типа развертывания для базы данных Azure для MariaDB
description: В этой статье описываются вопросы, которые необходимо выполнить, прежде чем приступить к работе с инфраструктурой как службой (IaaS) или платформой как услуга (PaaS) для базы данных Azure для MariaDB.
author: kummanish
ms.author: manishku
ms.service: mariadb
ms.topic: conceptual
ms.date: 09/20/2019
ms.openlocfilehash: fa87748719e2d3775034e5a2850281cf8f1a0e8a
ms.sourcegitcommit: 80da36d4df7991628fd5a3df4b3aa92d55cc5ade
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/02/2019
ms.locfileid: "71817440"
---
# <a name="choose-the-right-mariadb-server-option-in-azure"></a>Выбор правильного сервера MariaDB в Azure

В Azure рабочие нагрузки сервера MariaDB могут выполняться на виртуальной машине с размещенной инфраструктурой (IaaS) или в качестве размещенной службы (PaaS). PaaS имеет несколько вариантов развертывания, и в каждом варианте развертывания существуют уровни служб. При принятии решения об использовании PaaS или IaaS необходимо определить, требуется ли управлять базой данных, применять исправления и создавать резервные копии, или вы хотите делегировать эти операции в Azure.</br>

В зависимости от ответа на этот вопрос рассмотрите следующие варианты: <br/>

**База данных Azure для MariaDB** — это полностью управляемое ядро СУБД MariaDB, основанное на стабильной версии Community Edition. Эта реляционная база данных как услуга (DBaaS), размещенная в облаке Azure, относится к категории "платформа как услуга" (PaaS). С помощью управляемого экземпляра MariaDB в Azure можно использовать встроенные функции и функции, требующие расширенной настройки при использовании сервера MariaDB (локально или на виртуальной машине Azure). При использовании MariaDB в качестве службы вы платите по мере использования с вариантами увеличения или уменьшения масштаба для повышения мощности без прерывания. Кроме того, в отличие от автономного сервера MariaDB, база данных Azure для MariaDB имеет дополнительные функции, такие как встроенная высокая доступность, аналитика и управление. <br/><br/>
**MariaDB на виртуальной машине Azure** относится к категории "инфраструктура как услуга" (IaaS) и позволяет запускать MariaDB Server внутри полностью управляемой виртуальной машины в облаке Azure. Все последние версии и выпуски MariaDB можно установить на виртуальную машину IaaS. Самым существенным отличием от базы данных Azure для MariaDB является то, что MariaDB на виртуальных машинах Azure позволяет управлять ядром СУБД. Тем не менее, этот элемент управления полагается на дополнительную ответственность за управление виртуальными машинами и выполнение многочисленных задач администратора баз данных, таких как обслуживание или исправление сервера СУБД, проектирование восстановления и высокий уровень доступности и т. д.

Основные различия между этими вариантами показаны в приведенной ниже таблице.

|            | **База данных Azure для MariaDB** | **MariaDB на виртуальных машинах Azure**    |
|:-------------------|:-----------------------------|:--------------------|
| **Соглашение об уровне обслуживания**                | Предлагает соглашение об уровне обслуживания для уровня доступности 99,99%| До 99,95% доступности с 2 или более экземплярами в одной группе доступности. <br/>99,9% виртуальных машин с одним экземпляром с использованием хранилища класса Premium <br/> 99,99% с зоной доступности с 2 или более экземплярами в 2 или более группе доступности.<br/> Примечание. [соглашение об уровне обслуживания для виртуальных машин](https://azure.microsoft.com/support/legal/sla/virtual-machines/v1_8/) |
| **Установка исправлений ОС**        | Автоматически  | Управляется клиентами |
|**Исправление MariaDB**     | Автоматически  | Управляется клиентами |
| **Высокая доступность** | Модель высокого уровня доступности (HA) основана на встроенных механизмах отработки отказа, срабатывающих при прерывании работы на уровне узла. В таких случаях служба автоматически создает экземпляр и прикрепляет хранилище к этому новому экземпляру. | Высокий уровень доступности является архитектурным, реализованным, протестированным и обслуживаемым клиентом. Это может быть Always On (отказоустойчивая кластеризация или репликация групп), Доставка журналов и репликация транзакций в зависимости от используемой версии MariaDB Engine.|
| **Избыточность зоны** | В настоящее время не поддерживается. | Виртуальные машины Azure можно настроить для работы в разных зонах доступности. Для локального решения клиенты должны создавать и обслуживать собственный дополнительный центр обработки данных, а также управлять им.|
| **Гибридные сценарии** | [Репликация входных данных](https://docs.microsoft.com/azure/MariaDB/concepts-data-in-replication) позволяет синхронизировать данные из внешнего сервера MariaDB в службу "база данных Azure для MariaDB". Внешний сервер может быть локальным, на виртуальных машинах или в службе базы данных, размещенной другими поставщиками облачных служб.  <br/> <br/> Функция [чтения реплики](https://docs.microsoft.com/azure/postgresql/concepts-read-replicas) позволяет реплицировать данные с сервера базы данных Azure для MariaDB (Master) до пяти серверов только для чтения (реплик) в одном регионе Azure или в разных регионах. Реплики только для чтения асинхронно обновляются с помощью технологии репликации бинлог.   <br/> <br/> Примечание. репликация чтения между регионами в настоящее время доступна в общедоступной предварительной версии.| Управляется клиентами <br/>
| **Резервное копирование и восстановление** | Автоматически создает [резервные копии сервера](https://docs.microsoft.com/azure/MariaDB/concepts-backup#backups) и сохраняет их в настроенном пользователем локально избыточном или геоизбыточном хранилище. Служба принимает полные, разностные резервные копии и журналы транзакций. | Управляется клиентами |
| **Мониторинг операций базы данных** | Позволяет клиентам [задавать предупреждения](https://docs.microsoft.com/azure/MariaDB/concepts-monitoring) для операции базы данных и выполнять действия при достижении пороговых значений. | Управляется клиентами |
| **Расширенная защита потоков** | Обеспечивает [расширенную защиту от угроз](https://docs.microsoft.com/azure/MariaDB/howto-database-threat-protection-portal) , которая обнаруживает аномальные действия, указывающие на необычные и потенциально опасные попытки доступа к базам данных или их использования. <br/> <br/> Примечание. Расширенная защита потоков сейчас находится в общедоступной предварительной версии.| Клиенты должны самостоятельно создавать свои компьютеры.
| **Резервные копии (аварийное восстановление)** | Хранит автоматические резервные копии пользователя, настроенные в [локально избыточном или геоизбыточном хранилище](https://docs.microsoft.com/azure/MariaDB/howto-restore-server-portal). Резервные копии также можно использовать для восстановления сервера до точки во времени. Срок хранения может быть установлен в 7-35 дней. Восстановление можно выполнить с помощью портал Azure. <br/> | Полностью управляется клиентом, включая, помимо прочего, планирование, тестирование, архивацию, хранение и хранение. Дополнительным вариантом является использование хранилища служб восстановления Azure для резервного копирования виртуальных машин и баз данных Azure на виртуальных машинах (Предварительная версия). |
| **Рекомендации по производительности** | Предоставляет клиентам упреждающее [рекомендацию по производительности](https://techcommunity.microsoft.com/t5/Azure-Database-for-MariaDB/Azure-brings-intelligence-and-high-performance-to-Azure-Database/ba-p/769110) на основе телеметрии использования для оптимизации рабочих нагрузок. <br/> <br/> Примечание. в настоящее время рекомендации по повышению производительности находятся в общедоступной предварительной версии. | Управляется клиентами |


## <a name="business-motivations-for-choosing-paas-or-iaas"></a>Бизнес-мотивация для выбора PaaS или IaaS

Существует несколько факторов, которые могут повлиять на выбор PaaS или IaaS для размещения баз данных MariaDB:

### <a name="cost"></a>Стоимость

Независимо от того, является ли вы стесненных запуска для денежных средств или группы в установленной компании, которая работает с ограниченными ограничениями бюджета, при определении наилучшего решения для размещения баз данных часто используется ограниченное финансирование. В этом разделе описываются основы выставления счетов и лицензирования в Azure в отношении базы данных Azure для MariaDB и MariaDB на виртуальных машинах Azure.

#### <a name="billing"></a>Выставление счетов

Сейчас база данных Azure для MariaDB доступна в виде службы на нескольких уровнях с разными ценами на ресурсы, каждый из которых оплачивается каждый час по фиксированной ставке. Последние сведения о поддерживаемых уровнях служб, размерах вычислений и объемах хранения см. в разделе [модель приобретения на основе виртуальное ядро](https://docs.microsoft.com/azure/MariaDB/concepts-pricing-tiers). Вы можете менять уровни служб и объем вычислительных ресурсов в динамическом режиме в соответствии с различными требованиями приложения к пропускной способности. За исходящий трафик Интернета взимается плата за обычные [скорости передачи данных](https://azure.microsoft.com/pricing/details/data-transfers/).

В базе данных Azure для MariaDB программное обеспечение баз данных автоматически настраивается, устанавливается в пакет обновления и обновляется корпорацией Майкрософт, что сокращает затраты на администрирование. Кроме того, [встроенные функции резервного копирования](https://docs.microsoft.com/azure/MariaDB/concepts-backup) помогают значительно экономить средства, особенно при наличии большого количества баз данных. С помощью MariaDB на виртуальных машинах Azure можно выбрать и запустить любую версию MariaDB. Независимо от используемой версии MariaDB вы платите за подготовленную виртуальную машину и затраты на конкретный тип лицензии, используемый для MariaDB.

База данных Azure для MariaDB обеспечивает высокий уровень доступности для любого рода прерываний на уровне узла и по-прежнему поддерживает соглашение об уровне обслуживания 99,99% для службы. Однако для обеспечения высокой доступности базы данных (HA) в виртуальных машинах клиент должен пройти через варианты высокого уровня доступности, доступные в базе данных MariaDB, например [репликацию MariaDB](https://mariadb.com/kb/en/library/setting-up-replication/). Использование поддерживаемого режима высокой доступности не обеспечивает дополнительного соглашения об уровне обслуживания, но позволяет достичь доступности базы данных > 99,99% за счет дополнительных затрат и административных издержек.

Дополнительную информацию см. в следующих ресурсах:
* [Цены на службу "база данных Azure для MariaDB"](https://azure.microsoft.com/pricing/details/MariaDB/)
* [Цены на виртуальные машины](https://azure.microsoft.com/pricing/details/virtual-machines/)
* [Калькулятор стоимости — оцените свои расходы](https://azure.microsoft.com/pricing/calculator/)

### <a name="administration"></a>Управление

Во многих организациях решение о переходе на облачную службу — это практически то же самое, что и разгрузка сложности администрирования. С помощью IaaS и PaaS Корпорация Майкрософт управляет базовой инфраструктурой и автоматически реплицирует все данные для обеспечения аварийного восстановления, настраивает и обновляет программное обеспечение базы данных, управляет балансировкой нагрузки и выполняет прозрачную отработку отказа при наличии сбой сервера.

* **С помощью базы данных Azure для MariaDB**можно продолжить Администрирование базы данных, но больше не требуется управлять ядром СУБД, операционной системой или оборудованием. Под вашим управлением остаются базы данных и учетные записи, индексы и оптимизация запросов, аудит и безопасность. Кроме того, Настройка высокого уровня доступности для другого центра обработки данных требует минимальной настройки или администрирования.<br/><br/>
* **С MariaDB на виртуальных машинах Azure**вы имеете полный контроль над конфигурацией операционной системы и экземпляра MariaDB Server. С помощью виртуальной машины вы решаете, когда следует обновлять операционную систему и программное обеспечение базы данных, а также когда устанавливать дополнительное программное обеспечение, например антивирусное приложение. Некоторые предлагаемые функции автоматизации позволяют значительно упростить процессы исправления, резервного копирования и обеспечения высокой доступности. Кроме того, вы можете контролировать размер виртуальной машины, количество дисков и их конфигурации хранения. Дополнительные сведения см. в статье размеры виртуальных машин и облачных служб для Azure.

### <a name="time-to-move-to-azure-br"></a>Время на перемещение в Azure <br/>
* **База данных Azure для MariaDB** — это подходящее решение для приложений, разработанных в облаке, когда производительность разработки и быстрый доступ к новым решениям очень важны. С помощью программных средств, аналогичных АДМИНИСТРАТОРу, служба идеально подходит для архитекторов и разработчиков облака, поскольку она снижает потребность в управлении базовой операционной системой и базой данных.<br/><br/>
* **MariaDB на виртуальных машинах Azure** идеально подходит для существующих или новых приложений, которым требуется база данных MariaDB или доступ к функциям в базе данных MariaDB в Windows и Linux, и вы хотите избежать времени и расходов на приобретение нового локального оборудования. Этот вариант также подходит для переноса существующих локальных приложений и баз данных в Azure "как есть" — для случаев, когда экземпляр базы данных Azure для MariaDB не подходит. Поскольку нет необходимости изменять уровни представления, приложения и данных, вы экономите время и бюджеты при повторном проектировании существующего решения. Вместо этого вы можете сосредоточиться на переносе всех ваших решений в Azure и в устранении некоторых оптимизаций производительности, которые могут потребоваться для платформы Azure.

## <a name="next-steps"></a>Следующие шаги

* См. [цены на службу "база данных Azure для MariaDB](https://azure.microsoft.com/pricing/details/MariaDB/) "
* Приступить к работе, [создав первый сервер](https://review.docs.microsoft.com/azure/MariaDB/quickstart-create-MariaDB-server-database-using-azure-portal).

