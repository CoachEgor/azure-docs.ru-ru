---
title: Как восстановить сервер в службе "База данных Azure для MariaDB"
description: В этой статье описывается, как восстановить сервер в Базе данных Azure для MariaDB с помощью портала Azure.
author: ajlam
ms.author: andrela
ms.service: mariadb
ms.topic: conceptual
ms.date: 04/15/2019
ms.openlocfilehash: 23d683fea494ad0509af359d6e49519f2bc6aa99
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60746644"
---
# <a name="how-to-backup-and-restore-a-server-in-azure-database-for-mariadb-using-the-azure-portal"></a>Как создать резервную копию сервера в службе "База данных Azure для MariaDB" и восстановить его с помощью портала Azure

## <a name="backup-happens-automatically"></a>Резервное копирование выполняется автоматически
Чтобы обеспечить возможность восстановления, для серверов службы "База данных Azure для MariaDB" периодически выполняется резервное копирование. С помощью этой функции можно восстановить сервер и все его базы данных до более ранней точки во времени на новом сервере.

## <a name="prerequisites"></a>Технические условия
Вот что вам нужно, чтобы выполнить инструкции, приведенные в этом руководстве:
- [сервер Базы данных Azure для MariaDB и база данных](quickstart-create-mariadb-server-database-using-azure-portal.md).

## <a name="set-backup-configuration"></a>Настройка конфигурации резервного копирования

При создании сервер можно настроить для локально избыточного или геоизбыточного резервного копирования. Для это воспользуйтесь окном **Ценовая категория**.

> [!NOTE]
> После создания сервера тип избыточности (локальная или географическая) изменить нельзя.
>

Если вы создаете сервер на портале Azure, тип резервного копирования (**локально избыточное** или **геоизбыточное**) задается в окне **Ценовая категория**. Кроме того, в этом окне указывается **срок хранения резервных копий** — период (в днях), в течение которого должны храниться резервные копии.

   ![Окно "Ценовая категория" — выбор типа избыточности для резервного копирования](./media/howto-restore-server-portal/pricing-tier.png)

Дополнительные сведения о настройке этих значений при создании см. в [кратком руководстве по серверу Базы данных Azure для MariaDB](quickstart-create-mariadb-server-database-using-azure-portal.md).

Вот как изменить на сервере срок хранения резервной копии:
1. Войдите на [портал Azure](https://portal.azure.com/).

2. Выберите сервер Базы данных Azure для MariaDB. Откроется страница **Обзор**.

3. В меню в разделе **Параметры** выберите **Ценовая категория**. С помощью ползунка можно изменить **срок хранения резервных копий** в диапазоне от 7 до 35 дней.
На приведенном ниже снимке экрана он увеличен до 35 дней.
![Увеличенный срок хранения резервных копий](./media/howto-restore-server-portal/3-increase-backup-days.png)

4. Нажмите кнопку **ОК**, чтобы подтвердить изменение.

Срок хранения резервных копий определяет, насколько раннюю точку во времени можно задать для восстановления, так как это зависит от доступных резервных копий. Восстановление до точки во времени описано в следующем разделе. 

## <a name="point-in-time-restore"></a>Восстановление до точки во времени
Служба "База данных Azure для MariaDB" позволяет восстановить сервер до точки во времени и создать его копию. Можно использовать этот новый сервер для восстановления данных или направить на него клиентские приложения.

Например, если таблица была случайно удалена сегодня в полдень, ее можно восстановить до момента сразу перед полуднем и получить отсутствующие таблицы и данные из новой копии сервера. Восстановление до точки во времени выполняется на уровне сервера, а не на уровне базы данных.

Чтобы восстановить сервер до точки во времени, сделайте следующее:
1. На портале Azure выберите нужный сервер Базы данных Azure для MariaDB. 

2. На панели инструментов на странице **Обзор** для сервера выберите **Восстановить**.

   ![База данных Azure для MariaDB: кнопка "Восстановление" на странице "Обзор"](./media/howto-restore-server-portal/2-server.png)

3. Заполните форму "Восстановление", указав следующие сведения.

   ![База данных Azure для MariaDB: сведения о восстановлении](./media/howto-restore-server-portal/3-restore.png)
   - **Точка восстановления.** Выберите точку во времени, до которой нужно восстановить сервер.
   - **Целевой сервер.** Укажите имя нового сервера.
   - **Расположение.** Невозможно выбрать регион. По умолчанию он совпадает с исходным сервером.
   - **Ценовая категория.** При восстановлении до точки во времени эти параметры изменить нельзя. Она совпадает с ценовой категорией исходного сервера. 

4. Чтобы восстановить сервер до выбранной точки во времени, нажмите кнопку **OК**. 

5. После завершения восстановления найдите созданный сервер, чтобы убедиться, что данные были восстановлены, как и ожидалось.

>[!Note]
>Обратите внимание, что имя и пароль администратора сервера для входа на сервер, созданный путем восстановления до точки во времени, будут теми же, что и для существующего сервера в выбранной точке во времени. Пароль можно изменить на странице **Обзор** для нового сервера.

## <a name="geo-restore"></a>Геовосстановление
Если вы настроили сервер для геоизбыточного резервного копирования, из резервной копии можно создать новый сервер. Его можно создать в любом регионе, где доступна служба "База данных Azure для MariaDB".  

1. Выберите **Базы данных** > **База данных Azure для MariaDB**. Чтобы найти службу, вы также можете ввести в поле поиска **MariaDB**.

   ![Параметр Базы данных Azure для MariaDB](./media/howto-restore-server-portal/2_navigate-to-mariadb.png)

2. В форме в раскрывающемся списке **Выбор источника** выберите **Резервная копия**. Загрузится список серверов, для которых включено геоизбыточное резервное копирование. Выберите одну из резервных копий таких серверов в качестве источника для нового сервера.
   ![Раскрывающийся список "Выбор источника": параметр "Резервная копия" и список геоизбыточных резервных копий](./media/howto-restore-server-portal/2-georestore.png)

   > [!NOTE]
   > Сразу после создания сервер может быть еще не готов к географическому восстановлению. Заполнение метаданных может занять несколько часов.
   >

3. Заполните оставшиеся поля формы в соответствии со своими предпочтениями. Вы можете выбрать любое **расположение**. После расположения можно выбрать **ценовую категорию**. По умолчанию отображаются параметры существующего сервера, из резервной копии которого выполняется восстановление. Чтобы применить эти параметры, нажмите кнопку **ОК** без внесения изменений. Или же вы можете изменить **поколение вычислительных ресурсов** (если это возможно в выбранном регионе), число **виртуальных ядер**, **срок хранения резервных копий** и **тип избыточности резервного копирования**. Изменить **ценовую категорию** ("Базовый", "Общего назначения" или "С оптимизацией для операций в памяти") и объем **хранилища** во время восстановления нельзя.

>[!Note]
>Имя и пароль администратора сервера для входа на сервер, созданный путем геовосстановления, будут теми же, что и для существующего сервера в момент, когда было инициировано восстановление. Пароль можно изменить на странице **Обзор** для нового сервера.

## <a name="next-steps"></a>Дальнейшие действия
- Подробнее о [резервном копировании](concepts-backup.md) в службе.
- Подробнее о вариантах обеспечения [непрерывности бизнеса](concepts-business-continuity.md).
