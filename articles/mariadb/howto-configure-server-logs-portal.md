---
title: Настройка журналов сервера для базы данных Azure для MariaDB и доступ к ним в портал Azure
description: В этой статье описывается, как настроить журналы сервера в базе данных Azure для MariaDB и получить к ним доступ из портал Azure.
author: ajlam
ms.author: andrela
ms.service: mariadb
ms.topic: conceptual
ms.date: 09/30/2019
ms.openlocfilehash: c8be9519d3393330b3022fadd2de6a49e58ecdcf
ms.sourcegitcommit: 6fe40d080bd1561286093b488609590ba355c261
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/01/2019
ms.locfileid: "71703503"
---
# <a name="configure-and-access-server-logs-in-the-azure-portal"></a>Настройка журналов сервера и получение к ним доступа с помощью портала Azure

Вы можете настроить, перечислить и скачать [базу данных Azure для MariaDB с помощью журналов запросов с высокой](concepts-server-logs.md) загрузкой из портал Azure.

## <a name="prerequisites"></a>Предварительные требования
Прежде чем приступить к выполнению этого руководства, необходимы следующие компоненты:
- [База данных Azure для сервера MariaDB](quickstart-create-mariadb-server-database-using-azure-portal.md)

## <a name="configure-logging"></a>Настройка журнала
Настройте доступ к журналу медленных запросов. 

1. Войдите на [портале Azure](https://portal.azure.com/).

2. Выберите сервер Базы данных Azure для MariaDB.

3. В разделе боковой панели **Мониторинг** выберите **Журналы сервера**. 
   ![Выбор "Журналы сервера" и щелчок "Настройка"](./media/howto-configure-server-logs-portal/1-select-server-logs-configure.png)

4. Выберите заголовок **Щелкните здесь, чтобы включить журналы и настроить их параметры**, чтобы просмотреть параметры сервера.

5. Измените параметры, которые необходимо скорректировать, в т. ч. укажите для параметра "slow_query_log" значение "ON". Все изменения, вносимые в этом сеансе, выделены фиолетовым цветом. 

   После изменения параметров нажмите кнопку **Сохранить**. Также вы можете нажать кнопку **Отменить**, чтобы отменить изменения.

   ![Нажмите кнопку "Сохранить" или "Отменить"](./media/howto-configure-server-logs-portal/3-save-discard.png)

6. Вернитесь к списку журналов, нажав **кнопку закрытия** (значок "X") на странице **Параметры сервера**.

## <a name="view-list-and-download-logs"></a>Просмотр списка журналов и их скачивание
После начала ведения журнала можно просмотреть список доступных журналов запросов с высокой загрузкой и загрузить отдельные файлы журнала на панели журналы сервера. 

1. Перейдите на портал Azure.

2. Выберите сервер Базы данных Azure для MariaDB.

3. В разделе боковой панели **Мониторинг** выберите **Журналы сервера**. На странице отображается список файлов журналов, как показано ниже.

   ![Список журналов](./media/howto-configure-server-logs-portal/4-server-logs-list.png)

   > [!TIP]
   > Действует следующее соглашение об именовании журналов: **mysql-slow-<имя_вашего_сервера>-ггггммддчч.log**. Дата и время в имени файла — это время создания журнала. Новый файл журнала создается каждые 24 часа или при достижении размера файла 7,5 ГБ.

4. При необходимости используйте **поле поиска**, чтобы быстро сузить область поиска и найти определенный журнал по дате и времени. Поиск осуществляется по имени журнала.

5. Скачайте отдельные файлы журналов с помощью кнопки **Скачать** (значок со стрелкой вниз), расположенной рядом с каждым файлом журнала в строке таблицы, как показано ниже.

   ![Щелчок значка "Скачать"](./media/howto-configure-server-logs-portal/5-download.png)

## <a name="set-up-diagnostic-logs"></a>Настройка журналов диагностики

1. В разделе **мониторинг** на боковой панели выберите **параметры диагностики**.

1. Щелкните "+ добавить параметр диагностики" ![Add параметр диагностики @ no__t-1

1. Укажите имя параметра диагностики.

1. Укажите, какие приемники данных должны отправлять журналы запросов с высокой загрузкой (учетная запись хранения, концентратор событий и (или) Рабочая область Log Analytics).

1. Выберите "Мисклсловлогс" в качестве типа журнала.
параметр диагностики ![Configure @ no__t-1

1. После настройки приемников данных для передачи журналов запросов с высокой задержкой в можно нажать кнопку **сохранить**.
параметр диагностики ![Save @ no__t-1

1. Получите доступ к журналам запросов с задержкой, изучив их в настроенных приемниках данных. Для отображения журналов может потребоваться до 10 минут.

## <a name="next-steps"></a>Следующие шаги
- Сведения о том, как программно скачивать журналы запросов, см. [в статье доступ к журналам запросов с помощью интерфейса командной строки](howto-configure-server-logs-cli.md) .
- Дополнительные сведения о [медленных журналах запросов](concepts-server-logs.md) в базе данных Azure для MariaDB.
- Дополнительные сведения об определениях параметров и ведении журналов см. в документации MariaDB по [журналам](https://mariadb.com/kb/en/library/slow-query-log-overview/).