---
title: Доступ к медленным журналам запросов - Портал Azure - База данных Azure для MariaDB
description: В этой статье описывается, как настроить и получить доступ к медленным журналам запросов в базе данных Azure для MariaDB с портала Azure.
author: ajlam
ms.author: andrela
ms.service: mariadb
ms.topic: conceptual
ms.date: 4/13/2020
ms.openlocfilehash: 1e67637d36eaba55e4c6baaf6f775fc7b79fcd14
ms.sourcegitcommit: 530e2d56fc3b91c520d3714a7fe4e8e0b75480c8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81270607"
---
# <a name="configure-and-access-slow-query-logs-from-the-azure-portal"></a>Настройка и доступ к медленным журналам запросов с портала Azure

Можно настроить, перечислить и загрузить [базу данных Azure для журналов медленных запросов MariaDB](concepts-server-logs.md) с портала Azure.

## <a name="prerequisites"></a>Предварительные требования
Шаги в этой статье требуют, чтобы у вас была [база данных Azure для сервера MariaDB.](quickstart-create-mariadb-server-database-using-azure-portal.md)

## <a name="configure-logging"></a>Настройка журнала
Настройте доступ к журналу медленных запросов. 

1. Войдите на [портал Azure](https://portal.azure.com/).

2. Выберите сервер Базы данных Azure для MariaDB.

3. В разделе **Мониторинг** в боковой панели выберите **журналы Сервера.** 
   ![Скриншот параметров журналов Сервера](./media/howto-configure-server-logs-portal/1-select-server-logs-configure.png)

4. Чтобы увидеть параметры сервера, выберите **Нажмите здесь, чтобы включить журналы и настроить параметры журнала.**

5. Поверните **slow_query_log** к **ON**.

6. Выберите, где вывести журналы с помощью **log_output.** Для отправки журналов в локальные системы хранения данных и в диагностические журналы Azure Monitor выберите **файл.** 

7. Измените любые другие необходимые параметры. 

8. Щелкните **Сохранить**. 

   :::image type="content" source="./media/howto-configure-server-logs-portal/3-save-discard.png" alt-text="Скриншот медленных параметров журнала запроса и сохранения.":::

Со **страницы Параметры сервера** можно вернуться к списку журналов, закрыв страницу.

## <a name="view-list-and-download-logs"></a>Просмотр списка журналов и их скачивание
После начала регистрации можно просмотреть список доступных журналов медленных запросов и загрузить отдельные файлы журналов. 

1. Откройте портал Azure.

2. Выберите сервер Базы данных Azure для MariaDB.

3. В разделе **Мониторинг** в боковой панели выберите **журналы Сервера.** Страница показывает список файлов журнала.

   ![Скриншот страницы журналов Server со списком выделится журналами](./media/howto-configure-server-logs-portal/4-server-logs-list.png)

   > [!TIP]
   > Действует следующее соглашение об именовании журналов: **mysql-slow-<имя_вашего_сервера>-ггггммддчч.log**. Дата и время, используемое в имени файла, — это время, когда был выпущен журнал. Файлы журнала вращаются каждые 24 часа или 7,5 ГБ, в зависимости от того, что наступит ра-таке.

4. При необходимости используйте поле поиска, чтобы быстро сузить до определенного журнала, в зависимости от даты и времени. Поиск осуществляется по имени журнала.

5. Чтобы загрузить отдельные файлы журнала, выберите значок внизовой стрелки рядом с каждым файлом журнала в строке таблицы.

   ![Скриншот страницы журналов Сервера с выделенной иконой вниз-стрелки](./media/howto-configure-server-logs-portal/5-download.png)

## <a name="set-up-diagnostic-logs"></a>Настройка журналов диагностики

1. В разделе **Мониторинг** в боковой панели выберите **диагностические настройки Добавлены диагностические настройки.** > **Add diagnostic setting**

   ![Скриншот вариантов диагностических настроек](./media/howto-configure-server-logs-portal/add-diagnostic-setting.png)

1. Укажите имя диагностической настройки.

1. Укажите, какие данные тонут для отправки журналов медленного запроса (учетная запись хранения, концентратор событий или рабочее пространство Log Analytics).

1. Выберите **MySqlSlowLogs** в качестве типа журнала.
![Скриншот параметров конфигурации параметров диагностических настроек](./media/howto-configure-server-logs-portal/configure-diagnostic-setting.png)

1. После настройки приемников данных для сравщенного медленного запроса выберите **Сохранить.**
![Скриншот параметров конфигурации диагностических настроек с выделением Сохранить](./media/howto-configure-server-logs-portal/save-diagnostic-setting.png)

1. Получите доступ к медленным журналам запросов, исследуя их в настроенных данных. Появление журналов может занять до 10 минут.

## <a name="next-steps"></a>Дальнейшие действия
- Смотрите [журналы медленных запросов Access в CLI,](howto-configure-server-logs-cli.md) чтобы узнать, как загружать медленные журналы запросов программно.
- Подробнее о [журналах медленных запросов](concepts-server-logs.md) читайте в базе данных Azure для MariaDB.
- Для получения дополнительной информации об определениях параметров и [logs](https://mariadb.com/kb/en/library/slow-query-log-overview/)журналов, см.