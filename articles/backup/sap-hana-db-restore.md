---
title: Восстановление баз данных SAP HANA на виртуальных машинах Azure
description: Из этой статьи вы узнаете, как восстановить SAP HANA базы данных, работающие на виртуальных машинах Azure.
ms.topic: conceptual
ms.date: 11/7/2019
ms.openlocfilehash: 999edba61177758ad9039e81e789efcef99ca1de
ms.sourcegitcommit: e50a39eb97a0b52ce35fd7b1cf16c7a9091d5a2a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2019
ms.locfileid: "74287922"
---
# <a name="restore-sap-hana-databases-on-azure-vms"></a>Восстановление баз данных SAP HANA на виртуальных машинах Azure

В этой статье описывается, как восстановить SAP HANA базы данных, работающие на виртуальной машине Azure, которые были резервными копиями службы Azure Backup в хранилище служб восстановления Azure Backup. Восстановление можно использовать для создания копий данных для сценариев разработки и тестирования или для возврата к предыдущему состоянию.

Дополнительные сведения о резервном копировании баз данных SAP HANA см. в статье [резервное копирование SAP HANA баз данных на виртуальных машинах Azure](https://docs.microsoft.com/azure/backup/backup-azure-sap-hana-database).

## <a name="restore-to-a-point-in-time-or-to-a-recovery-point"></a>Восстановление до точки во времени или до точки восстановления

Azure Backup можете восстановить базы данных SAP HANA, работающие на виртуальных машинах Azure, следующим образом:

* Восстановление до определенной даты или времени (во второй) с помощью резервных копий журналов. Azure Backup автоматически определяет соответствующие полные разностные резервные копии и цепочку резервных копий журналов, которые требуются для восстановления в зависимости от выбранного времени.

* Восстановление до определенной полной или разностной резервной копии для восстановления до определенной точки восстановления.

## <a name="prerequisites"></a>предварительным требованиям

Перед восстановлением базы данных обратите внимание на следующее:

* Базу данных можно восстановить только в экземпляре SAP HANA, который находится в том же регионе.

* Целевой экземпляр должен быть зарегистрирован в том же хранилище, что и источник

* Azure Backup не может опознать два разных экземпляра SAP HANA на одной виртуальной машине. Поэтому восстановление данных из одного экземпляра в другой на одной виртуальной машине невозможно.

* Чтобы убедиться, что целевой экземпляр SAP HANA готов к восстановлению, проверьте состояние **готовности к резервному копированию** :

  * Откройте хранилище, в котором зарегистрирован целевой экземпляр SAP HANA

  * На панели мониторинга хранилища в разделе **Приступая к работе**выберите **резервное копирование** .

![Резервное копирование на панели мониторинга хранилища](media/sap-hana-db-restore/getting-started-backup.png)

* В поле " **резервное копирование**" в разделе **что вы хотите создать резервную копию?** выберите **SAP HANA на виртуальной машине Azure** .

![Выбор SAP HANA в виртуальной машине Azure](media/sap-hana-db-restore/sap-hana-backup.png)

* В разделе **Обнаружение баз данных на виртуальных машинах** щелкните **Просмотр сведений** .

![Просмотр сведений](media/sap-hana-db-restore/view-details.png)

* Проверка **готовности резервного копирования** целевой виртуальной машины

![Защищенные серверы](media/sap-hana-db-restore/protected-servers.png)

* Дополнительные сведения о типах восстановления, поддерживаемых SAP HANA, см. в SAP HANA Примечание [1642148](https://launchpad.support.sap.com/#/notes/1642148)

## <a name="restore-a-database"></a>Восстановление базы данных

* Откройте хранилище, в котором зарегистрирована SAP HANA база данных, подлежащей восстановлению.

* На панели мониторинга хранилища в разделе **защищенные элементы**выберите **элементы архивации** .

![Архивные элементы](media/sap-hana-db-restore/backup-items.png)

* В разделе **элементы архивации**в поле **тип управления архивацией** выберите **SAP HANA на виртуальной машине Azure** .

![Тип управления резервным копированием](media/sap-hana-db-restore/backup-management-type.png)

* Выберите базу данных для восстановления

 ![База данных для восстановления](media/sap-hana-db-restore/database-to-restore.png)

* Просмотрите меню базы данных. Он предоставляет сведения о резервной копии базы данных, включая:

  * Самые старые и последние точки восстановления

  * Состояние резервного копирования журнала за последние 24 и 72 часов для базы данных

![Меню базы данных](media/sap-hana-db-restore/database-menu.png)

* Выбор **восстановления базы данных**

* В разделе **Конфигурация восстановления**укажите, где (или как) следует восстанавливать данные:

  * **Альтернативное расположение**. Восстановите базу данных в альтернативное расположение и сохранив исходную базу данных.

  * **Перезаписать базу**данных. Восстановите данные в том же экземпляре SAP Hana, что и исходный источник. Этот параметр перезаписывает исходную базу данных.

![Восстановить конфигурацию](media/sap-hana-db-restore/restore-configuration.png)

### <a name="restore-to-alternate-location"></a>Восстановление в альтернативное расположение

* В меню **восстановить конфигурацию** в разделе **место для восстановления**выберите **альтернативное расположение**.

![Восстановление в альтернативное расположение](media/sap-hana-db-restore/restore-alternate-location.png)

* Выберите SAP HANA имя узла и имя экземпляра, для которого требуется восстановить базу данных.
* Убедитесь, что целевой экземпляр SAP HANA готов к восстановлению, убедившись в **готовности к резервному копированию.** Дополнительные сведения см. в [разделе Предварительные требования](#prerequisites) .
* В поле **Имя восстановленной базы данных** введите имя целевой базы данных.

> [!NOTE]
> Восстановление отдельная база данных контейнера (SDC) должно удовлетворять этим [проверкам](backup-azure-sap-hana-database-troubleshoot.md#single-container-database-sdc-restore).

* Если применимо, выберите **Перезаписать, если база данных с таким именем уже существует в выбранном экземпляре Hana**.
* Нажмите кнопку **ОК**.

![Конфигурация восстановления — последний экран](media/sap-hana-db-restore/restore-configuration-last.png)

* В окне **Выбор точки восстановления**выберите **журналы (на момент времени)** для [восстановления до определенной точки во времени](#restore-to-a-specific-point-in-time). Или выберите **полную & разностную резервную копию** для [восстановления до определенной точки восстановления](#restore-to-a-specific-recovery-point).

### <a name="restore-and-overwrite"></a>Восстановление и перезапись

* В меню **восстановить конфигурацию** в разделе **место для восстановления**выберите **перезаписать базу данных** > **ОК**.

![Перезапись базы данных](media/sap-hana-db-restore/overwrite-db.png)

* В окне **Выбор точки восстановления**выберите **журналы (на момент времени)** для [восстановления до определенной точки во времени](#restore-to-a-specific-point-in-time). Или выберите **полную & разностную резервную копию** для [восстановления до определенной точки восстановления](#restore-to-a-specific-recovery-point).

### <a name="restore-to-a-specific-point-in-time"></a>Восстановление данных до определенной точки во времени

Если вы выбрали **Logs (Point in Time)** (Журналы (восстановление до точки во времени)) как тип восстановления, выполните следующие действия:

* Выберите точку восстановления в графе журнала и нажмите кнопку **ОК** , чтобы выбрать точку восстановления.

![Точка восстановления](media/sap-hana-db-restore/restore-point.png)

* Чтобы запустить задание восстановления, в меню **Восстановление** щелкните **Восстановить**.

![Выбор восстановления](media/sap-hana-db-restore/restore-restore.png)

* Отслеживать ход восстановления в области **уведомления** или отслеживать его, выбрав пункт **восстановить задания** в меню База данных.

![Восстановление успешно запущено](media/sap-hana-db-restore/restore-triggered.png)

### <a name="restore-to-a-specific-recovery-point"></a>Восстановление до определенной точки восстановления

Если вы выбрали **Full & Differential** (Полная и разностная) как тип восстановления, выполните следующие действия:

* Выберите точку восстановления из списка и нажмите кнопку **ОК** , чтобы выбрать точку восстановления.

![Восстановление определенной точки восстановления](media/sap-hana-db-restore/specific-recovery-point.png)

* Чтобы запустить задание восстановления, в меню **Восстановление** щелкните **Восстановить**.

![Запустить задание восстановления](media/sap-hana-db-restore/restore-specific.png)

* Отслеживать ход восстановления в области **уведомления** или отслеживать его, выбрав пункт **восстановить задания** в меню База данных.

![Ход восстановления](media/sap-hana-db-restore/restore-progress.png)

> [!NOTE]
> В случае восстановления в контейнере нескольких баз данных (MDC) после того, как системная база данных будет восстановлена на целевом экземпляре, необходимо снова запустить сценарий предварительной регистрации. Только последующие восстановления базы данных клиента будут выполнены. Дополнительные сведения см. в разделе [Устранение неполадок — MDC Restore](backup-azure-sap-hana-database-troubleshoot.md#multiple-container-database-mdc-restore).

## <a name="next-steps"></a>Дополнительная информация

* [Узнайте, как](sap-hana-db-manage.md) управлять SAP HANA базами данных, резервное копирование которых осуществляется с помощью Azure Backup
