---
title: Восстановление баз данных SAP HANA на M-м ми-ми займами Azure
description: В этой статье узнайте, как восстановить базы данных SAP HANA, работающие на виртуальных машинах Azure.
ms.topic: conceptual
ms.date: 11/7/2019
ms.openlocfilehash: 999edba61177758ad9039e81e789efcef99ca1de
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "74287922"
---
# <a name="restore-sap-hana-databases-on-azure-vms"></a>Восстановление баз данных SAP HANA на M-м ми-ми займами Azure

В этой статье описывается, как восстановить базы данных SAP HANA, работающие в виртуальной машине Azure (VM), которые служба резервного копирования Azure резервного копирования резервного копирования резервного копирования резервного копирования резервирует хранилище. Восстановление может быть использовано для создания копий данных для сценариев dev/test или для возвращения в предыдущее состояние.

Для получения дополнительной информации о том, как создать [Back up SAP HANA databases on Azure VMs](https://docs.microsoft.com/azure/backup/backup-azure-sap-hana-database)резервное копирование баз данных SAP HANA, см.

## <a name="restore-to-a-point-in-time-or-to-a-recovery-point"></a>Восстановление в точке времени или в точку восстановления

В Azure Backup можно выполнить восстановление баз данных SAP HANA, запущенных на виртуальных машинах Azure, следующим образом.

* Восстановление до состояния на определенную дату или время (с точностью до секунд) с помощью резервных копий журналов. На основе выбранного времени Azure Backup автоматически определяет соответствующие полные или разностные резервные копии и цепочку резервных копий журналов, необходимых для восстановления.

* Восстановление конкретной полной или разностной резервной копии по определенной точке восстановления.

## <a name="prerequisites"></a>Предварительные требования

Прежде чем восстановить базу данных, обратите внимание на следующее:

* Можно восстановить базу данных только на экземпляре SAP HANA, расположенном в том же регионе.

* Целевой экземпляр должен быть зарегистрирован в том же хранилище, что и исходный сервер.

* Резервное копирование Azure не может идентифицировать два разных экземпляра SAP HANA на одном и том же VM. Таким образом, восстановление данных из одного экземпляра в другой на том же VM не представляется возможным

* Чтобы убедиться, что целевой экземпляр SAP HANA готов к восстановлению, проверьте состояние **готовности к резервному копированию:**

  * Откройте хранилище, в котором зарегистрирован целевой экземпляр SAP HANA

  * На панели мониторинга хранилища, под **началом работы,** выберите **резервное копирование**

![Резервное копирование в панели мониторинга хранилища](media/sap-hana-db-restore/getting-started-backup.png)

* В **резервном копировании**под что вы **SAP HANA in Azure VM** хотите **создать резервную связь?**

![Выберите SAP HANA в Azure VM](media/sap-hana-db-restore/sap-hana-backup.png)

* Под **Discover DBs в VMs** нажмите на **Сведения Просмотра**

![Просмотр сведений](media/sap-hana-db-restore/view-details.png)

* Просмотрите **готовность резервного копирования** целевого VM

![Защищенные серверы](media/sap-hana-db-restore/protected-servers.png)

* Чтобы узнать больше о типах восстановления, которые поддерживает SAP HANA, обратитесь к SAP HANA Note [1642148](https://launchpad.support.sap.com/#/notes/1642148)

## <a name="restore-a-database"></a>Восстановление базы данных

* Открытие хранилища, в котором регистрируется база данных SAP HANA, которая будет восстановлена

* На панели мониторинга хранилища под **защищенными элементами**выберите **элементы резервного копирования**

![Архивные элементы](media/sap-hana-db-restore/backup-items.png)

* В **элементах резервного копирования**под **типом управления резервным копированием** выберите **SAP HANA в Azure VM**

![Тип управления резервного копирования](media/sap-hana-db-restore/backup-management-type.png)

* Выберите базу данных для восстановления

 ![База данных для восстановления](media/sap-hana-db-restore/database-to-restore.png)

* Просмотрите меню базы данных. Он предоставляет информацию о резервной базе данных, в том числе:

  * Самые старые и новейшие точки восстановления

  * Состояние резервного копирования журнала за последние 24 и 72 часа для базы данных

![Меню базы данных](media/sap-hana-db-restore/database-menu.png)

* Выберите **Восстановление DB**

* В **настройках восстановления**укажите, где (или как) восстановить данные:

  * **Альтернативное местоположение**: Восстановление базы данных в альтернативное место и сохранение исходной базы данных.

  * **Перезаписи DB**: Восстановление данных в том же экземпляре SAP HANA, что и исходный источник. В этом варианте перезаписывается исходная база данных.

![Конфигурация восстановления](media/sap-hana-db-restore/restore-configuration.png)

### <a name="restore-to-alternate-location"></a>Восстановление в альтернативном расположении

* В меню **Конфигурация восстановления,** под **Где восстановить**, выберите **Альтернативное местоположение.**

![Восстановление в альтернативном расположении](media/sap-hana-db-restore/restore-alternate-location.png)

* Выберите имя хоста SAP HANA и имя экземпляра SAP HANA, к которому требуется восстановить базу данных.
* Проверьте, готов ли целевой экземпляр SAP HANA к восстановлению, обеспечив **готовность к резервному копированию.** Для более подробной информации обратитесь к [разделу предпосылок.](#prerequisites)
* В поле **Имя восстановленной базы данных** введите имя целевой базы данных.

> [!NOTE]
> Единая база данных контейнера (SDC) восстанавливает должны следовать этим [проверкам.](backup-azure-sap-hana-database-troubleshoot.md#single-container-database-sdc-restore)

* Если это применимо, выберите **Overwrite, если DB с тем же именем уже существует в выбранном экземпляре HANA.**
* Нажмите кнопку **ОК**.

![Конфигурация восстановления - последний экран](media/sap-hana-db-restore/restore-configuration-last.png)

* В **Select restore point**выберите **журналы (Точка во времени),** чтобы [восстановить к определенному моменту времени.](#restore-to-a-specific-point-in-time) Или выберите **Дифференциал Full &** для [восстановления в определенной точке восстановления.](#restore-to-a-specific-recovery-point)

### <a name="restore-and-overwrite"></a>Восстановление и перезапись

* В меню **«Восстановить конфигурацию»** под **«Где восстановить»** выберите **Overwrite DB** > **OK.**

![Перезапись базы данных](media/sap-hana-db-restore/overwrite-db.png)

* В **Select restore point**выберите **журналы (Точка во времени),** чтобы [восстановить к определенному моменту времени.](#restore-to-a-specific-point-in-time) Или выберите **Дифференциал Full &** для [восстановления в определенной точке восстановления.](#restore-to-a-specific-recovery-point)

### <a name="restore-to-a-specific-point-in-time"></a>Восстановление данных до определенной точки во времени

Если вы выбрали **Logs (Point in Time)** (Журналы (восстановление до точки во времени)) как тип восстановления, выполните следующие действия:

* Выберите точку восстановления из графика журнала и выберите **OK,** чтобы выбрать точку восстановления.

![Точка восстановления](media/sap-hana-db-restore/restore-point.png)

* Чтобы запустить задание восстановления, в меню **Восстановление** щелкните **Восстановить**.

![Выберите восстановление](media/sap-hana-db-restore/restore-restore.png)

* Отслеживайте ход восстановления в области **уведомлений** или отслеживайте его, выбирая **задания «Восстановление»** в меню базы данных.

![Восстановление сработало успешно](media/sap-hana-db-restore/restore-triggered.png)

### <a name="restore-to-a-specific-recovery-point"></a>Восстановление в конкретную точку восстановления

Если вы выбрали **Full & Differential** (Полная и разностная) как тип восстановления, выполните следующие действия:

* Выберите точку восстановления из списка и выберите **OK,** чтобы выбрать точку восстановления.

![Восстановление конкретной точки восстановления](media/sap-hana-db-restore/specific-recovery-point.png)

* Чтобы запустить задание восстановления, в меню **Восстановление** щелкните **Восстановить**.

![Начало работы по восстановлению](media/sap-hana-db-restore/restore-specific.png)

* Отслеживайте ход восстановления в области **уведомлений** или отслеживайте его, выбирая **задания «Восстановление»** в меню базы данных.

![Ход восстановления](media/sap-hana-db-restore/restore-progress.png)

> [!NOTE]
> В контейнере с несколькими базами данных (MDC) восстанавливается после восстановления системы DB в целевой экземпляр, необходимо снова запустить сценарий предварительной регистрации. Только тогда последующий dB-восстановления арендатора удастся. Чтобы узнать больше, обратитесь к [Устранение проблем - MDC Восстановление](backup-azure-sap-hana-database-troubleshoot.md#multiple-container-database-mdc-restore).

## <a name="next-steps"></a>Дальнейшие действия

* [Узнайте, как](sap-hana-db-manage.md) управлять базами данных SAP HANA, резервными службами с помощью резервного копирования Azure
