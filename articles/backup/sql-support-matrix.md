---
title: Матрица резервного копирования Azure для резервного копирования серверов S'L в MMs Azure
description: Предоставляет сводку настроек и ограничений поддержки при резервном копировании сервера S'L в Azure VMs с помощью службы резервного копирования Azure.
ms.topic: conceptual
ms.date: 03/05/2020
ms.openlocfilehash: 79a7e30ab9240c489a66b547ff85bea7887131b1
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79410003"
---
# <a name="support-matrix-for-sql-server-backup-in-azure-vms"></a>Матрица поддержки резервного копирования серверов S'L в Azure VMs

Резервное копирование Azure можно для резервного копирования баз данных серверов Сервера СЗЛ в vMs Azure, размещенных на облачной платформе Microsoft Azure. В этой статье кратко излагаются общие параметры поддержки и ограничения сценариев и развертывания резервного копирования серверов S'L в Azure VMs.

## <a name="scenario-support"></a>Поддержка сценария

**Поддержка** | **Подробно**
--- | ---
**Поддерживаемые развертывания** | Поддерживаются виртуальные машины Azure Marketplace SQL и не связанные с Marketplace виртуальные машины (установленный вручную SQL Server).
**Поддерживаемые географические регионы** | Юго-Восточная Австралия (ASE), Восточная Австралия (AE), Центральная Австралия (AC), Центральная Австралия 2 (AC 2) <br> Южная Бразилия (BRS).<br> Центральная Канада (CNC), Восточная Канада (CE),<br> Юго-Восточная Азия (SEA), Восточная Азия (EA), <br> восточная часть США (EUS), восточная часть США 2 (EUS2), центрально-западная часть США (WCUS), западная часть США (WUS), западная часть США 2 (WUS 2), центрально-северная часть США (NCUS), центральная часть США (CUS), центрально-южная часть США (SCUS), <br> Центральная Индия (INC), Южная Индия (INS), Западная Индия <br> Восточная Япония (JPE), Западная Япония (JPW), <br> Республика Корея, центральный регион (KRC), Республика Корея, южный регион (KRS), <br> Северная Европа (NE), Западная Европа, <br> южная часть Соединенного Королевства (UKS), западная часть Соединенного Королевства (UKW). <br> US Gov (Аризона), US Gov (Вирджиния), US Gov (Техас), центральный регион US DoD, восточный регион US DoD <br> Северная Германия, Центрально-Западная Германия <br> Северная Швейцария, Западная Швейцария <br> Центральная Франция <br> Восточный Китай, Восточный Китай 2, Северный Китай, Северный Китай 2
**Поддерживаемые операционные системы** | Windows Server 2019, Windows Server 2016, Windows Server 2012, Windows Server 2008 R2 с пакетом обновления 1 (SP1) <br/><br/> Linux в настоящее время не поддерживается.
**Поддерживаемые версии SQL Server** | SQL Server 2019, SQL Server 2017, как описано на странице [поиска жизненного цикла приложения](https://support.microsoft.com/lifecycle/search?alpha=SQL%20server%202017), SQL Server 2016 и SharePoint Server, как описано на странице [поиска жизненного цикла приложения](https://support.microsoft.com/lifecycle/search?alpha=SQL%20server%202016%20service%20pack), SQL Server 2014, SQL Server 2012, SQL Server 2008 R2, SQL Server 2008 <br/><br/> Enterprise, Standard, Web, Developer, Express.
**Поддерживаемые версии .NET** | Виртуальная машина с .NET Framework версии 4.5.2 и выше.

## <a name="feature-consideration-and-limitations"></a>Рекомендации и ограничения касательно функций

* Резервное копирование SQL Server можно настроить на портале Azure или в **PowerShell**. Мы не поддерживаем CLI.
* Решение поддерживается на обоих типах [развертываний](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-deployment-model) — виртуальные машины Azure Resource Manager и классические виртуальные машины.
* Виртуальной машине, на которой выполняется SQL Server, необходимо подключение к Интернету для доступа к общедоступным IP-адресам Azure.
* Кластерная инстанция сервера **S'L Server Failover (FCI)** не поддерживается.
* Операции создания резервной копии и восстановления для зеркальных баз данных и моментальных снимков базы данных не поддерживаются.
* Не используйте несколько решений для резервного копирования автономного экземпляра SQL Server или группы доступности SQL Always On, так как это может привести к сбою резервного копирования.
* Резервное копирование двух узлов группы доступности по отдельности с использованием одинаковых или разных решений также может привести к сбою резервного копирования.
* Для **баз данных только для чтения** Azure Backup поддерживает только полные резервные копии и полные резервные копии только для копирования.
* Базу данных с большим числом файлов невозможно защитить. Максимальное число поддерживаемых файлов — **около 1000**.  
* Вы можете создать резервную резервную базу данных до **2000** баз данных s'L Server в хранилище. Если у вас больше баз данных, можно создать несколько хранилищ.
* Вы можете настроить резервное копирование до **50** баз данных за один раз. Это ограничение помогает оптимизировать нагрузку резервного копирования.
* Мы поддерживаем базы данных размером до **2 ТБ;** для размеров больше, чем проблемы с производительностью могут возникнуть.
* Чтобы иметь представление о том, сколько баз данных может быть защищено на сервер, рассмотрим такие факторы, как пропускная способность, размер VM, частота резервного копирования, размер базы данных и так далее. [Загрузите](https://download.microsoft.com/download/A/B/5/AB5D86F0-DCB7-4DC3-9872-6155C96DE500/SQL%20Server%20in%20Azure%20VM%20Backup%20Scale%20Calculator.xlsx) планировщик ресурсов, чтобы вычислить приблизительное количество баз данных, которые можно иметь на сервере на основе ресурсов VM и политики резервного копирования.
* Когда группы доступности настроены, резервные ожидания берутся из различных узлов на основе нескольких факторов. Поведение резервного копирования для группы доступности представлено ниже.

### <a name="back-up-behavior-with-always-on-availability-groups"></a>Резервное копирование поведения с всегда на группы доступности

Мы рекомендуем настроить резервную кауенду только на одном узлае группы доступности (AG). Всегда настраивайте резервную часть в том же регионе, что и основной узла. Другими словами, основной узла всегда нужен, чтобы присутствовать в регионе, где вы настраиваете резервную часть. Если все узлы AG находятся в том же регионе, где настроена резервная часть, нет никакой проблемы.

#### <a name="for-cross-region-ag"></a>Группа доступности перехода в другой регион

* Независимо от предпочтений резервного копирования, резервные ожидания будут запускаться только из узлов, которые находятся в том же регионе, где настроена резервная часть. Это связано с тем, что межрегиональные резервные копирования не поддерживаются. Если у вас есть только два узла, а вторичный узлы находится в другом регионе, резервные ожидания будут продолжать работать от основного узла (если ваше резервное предпочтение является «вторичным только»).
* Если узла не удается перевернуть в область, иную, чем та, в которой настроена резервная часть, резервные ожидания сбой на узлах в неисправной области.

В зависимости от установленного параметра резервного копирования и типов резервных копий (полная, разностная, резервная копия журналов, полная резервная копия только для копирования) резервные копии создаются с определенного узла (первичного или вторичного).

#### <a name="backup-preference-primary"></a>Резервное предпочтение: Основное

**Тип резервного копирования** | **Узла**
--- | ---
Полное | Первичный
Разностная | Первичный
Журнал |  Первичный
Полная резервная копия (только копирование) |  Первичный

#### <a name="backup-preference-secondary-only"></a>Резервное предпочтение: Только вторичное

**Тип резервного копирования** | **Узла**
--- | ---
Полное | Первичный
Разностная | Первичный
Журнал |  Вторичная
Полная резервная копия (только копирование) |  Вторичная

#### <a name="backup-preference-secondary"></a>Резервное предпочтение: вторичное

**Тип резервного копирования** | **Узла**
--- | ---
Полное | Первичный
Разностная | Первичный
Журнал |  Вторичная
Полная резервная копия (только копирование) |  Вторичная

#### <a name="no-backup-preference"></a>Без параметров резервного копирования

**Тип резервного копирования** | **Узла**
--- | ---
Полное | Первичный
Разностная | Первичный
Журнал |  Вторичная
Полная резервная копия (только копирование) |  Вторичная

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как [создать резервную резервную связь в базе данных сервера S'L Server,](backup-azure-sql-database.md) работая на VM Azure.
