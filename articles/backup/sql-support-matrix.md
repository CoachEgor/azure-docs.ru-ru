---
title: Azure Backupная Матрица поддержки для резервного копирования SQL Server на виртуальных машинах Azure
description: Содержит сводку параметров поддержки и ограничений при резервном копировании SQL Server на виртуальных машинах Azure со службой Azure Backup.
ms.topic: conceptual
ms.date: 03/05/2020
ms.openlocfilehash: 79a7e30ab9240c489a66b547ff85bea7887131b1
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "79410003"
---
# <a name="support-matrix-for-sql-server-backup-in-azure-vms"></a>Матрица поддержки для SQL Server резервного копирования на виртуальных машинах Azure

Azure Backup можно использовать для резервного копирования SQL Server баз данных на виртуальных машинах Azure, размещенных на Microsoft Azure облачной платформе. В этой статье перечислены общие параметры поддержки и ограничения для сценариев и развертывания SQL Server резервного копирования на виртуальных машинах Azure.

## <a name="scenario-support"></a>Поддержка сценария

**Поддержка** | **Сведения**
--- | ---
**Поддерживаемые развертывания** | Поддерживаются виртуальные машины Azure Marketplace SQL и не связанные с Marketplace виртуальные машины (установленный вручную SQL Server).
**Поддерживаемые географические регионы** | Юго-Восточная Австралия (ASE), Восточная Австралия (AE), Центральная Австралия (AC), Центральная Австралия 2 (AC 2) <br> Южная Бразилия (BRS).<br> Центральная Канада (CNC), Восточная Канада (CE),<br> Юго-Восточная Азия (SEA), Восточная Азия (EA), <br> восточная часть США (EUS), восточная часть США 2 (EUS2), центрально-западная часть США (WCUS), западная часть США (WUS), западная часть США 2 (WUS 2), центрально-северная часть США (NCUS), центральная часть США (CUS), центрально-южная часть США (SCUS), <br> Центральная Индия (INC), Южная Индия (INS), Западная Индия <br> Восточная Япония (JPE), Западная Япония (JPW), <br> Республика Корея, центральный регион (KRC), Республика Корея, южный регион (KRS), <br> Северная Европа (NE), Западная Европа, <br> южная часть Соединенного Королевства (UKS), западная часть Соединенного Королевства (UKW). <br> US Gov (Аризона), US Gov (Вирджиния), US Gov (Техас), центральный регион US DoD, восточный регион US DoD <br> Северная Германия, Центрально-Западная Германия <br> Северная Швейцария, Западная Швейцария <br> Центральная Франция <br> Восточный Китай, Восточный Китай 2, Северный Китай, Северный Китай 2
**Поддерживаемые операционные системы** | Windows Server 2019, Windows Server 2016, Windows Server 2012, Windows Server 2008 R2 с пакетом обновления 1 (SP1) <br/><br/> Linux в настоящее время не поддерживается.
**Поддерживаемые версии SQL Server** | SQL Server 2019, SQL Server 2017, как описано на странице [поиска жизненного цикла приложения](https://support.microsoft.com/lifecycle/search?alpha=SQL%20server%202017), SQL Server 2016 и SharePoint Server, как описано на странице [поиска жизненного цикла приложения](https://support.microsoft.com/lifecycle/search?alpha=SQL%20server%202016%20service%20pack), SQL Server 2014, SQL Server 2012, SQL Server 2008 R2, SQL Server 2008 <br/><br/> Enterprise, Standard, Web, Developer, Express.
**Поддерживаемые версии .NET** | Виртуальная машина с .NET Framework версии 4.5.2 и выше.

## <a name="feature-consideration-and-limitations"></a>Рекомендации и ограничения касательно функций

* Резервное копирование SQL Server можно настроить на портале Azure или в **PowerShell**. Интерфейс командной строки не поддерживается.
* Решение поддерживается на обоих типах [развертываний](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-deployment-model) — виртуальные машины Azure Resource Manager и классические виртуальные машины.
* Виртуальной машине, на которой выполняется SQL Server, необходимо подключение к Интернету для доступа к общедоступным IP-адресам Azure.
* **Экземпляр отказоустойчивого кластера SQL Server (FCI)** не поддерживается.
* Операции создания резервной копии и восстановления для зеркальных баз данных и моментальных снимков базы данных не поддерживаются.
* Не используйте несколько решений для резервного копирования автономного экземпляра SQL Server или группы доступности SQL Always On, так как это может привести к сбою резервного копирования.
* Резервное копирование двух узлов группы доступности по отдельности с использованием одинаковых или разных решений также может привести к сбою резервного копирования.
* Для **баз данных только для чтения** Azure Backup поддерживает только полные резервные копии и полные резервные копии только для копирования.
* Базу данных с большим числом файлов невозможно защитить. Максимальное число поддерживаемых файлов — **около 1000**.  
* Вы можете создать резервную копию до **~ 2000** SQL Server баз данных в хранилище. Если у вас больше баз данных, можно создать несколько хранилищ.
* Вы можете настроить резервное копирование до **50** баз данных за один раз. Это ограничение помогает оптимизировать нагрузку резервного копирования.
* Поддерживаются базы данных размером до **2 ТБ** ; для размеров, превышающих производительность, может возникнуть проблема.
* Чтобы иметь представление о том, сколько баз данных можно защитить на каждом сервере, учитывайте такие факторы, как пропускная способность, размер виртуальной машины, частота резервного копирования, размер базы данных и т. д. [Загрузите](https://download.microsoft.com/download/A/B/5/AB5D86F0-DCB7-4DC3-9872-6155C96DE500/SQL%20Server%20in%20Azure%20VM%20Backup%20Scale%20Calculator.xlsx) планировщик ресурсов, чтобы рассчитать приблизительное количество баз данных, которые можно использовать для каждого сервера на основе ресурсов виртуальной машины и политики резервного копирования.
* При настройке групп доступности резервные копии берутся из разных узлов в зависимости от нескольких факторов. Поведение резервного копирования для группы доступности представлено ниже.

### <a name="back-up-behavior-with-always-on-availability-groups"></a>Поведение резервного копирования с группами доступности AlwaysOn

Рекомендуется настроить резервное копирование только на одном узле группы доступности (AG). Всегда настраивайте резервное копирование в том же регионе, что и основной узел. Иными словами, основной узел всегда должен присутствовать в регионе, где выполняется настройка резервного копирования. Если все узлы группы доступности находятся в том же регионе, где настроена резервная копия, никаких проблем не возникает.

#### <a name="for-cross-region-ag"></a>Группа доступности перехода в другой регион

* Независимо от настроек резервного копирования, резервные копии будут выполняться только с узлов, наявляющихся в том же регионе, в котором настроена резервная копия. Это связано с тем, что резервные копии между регионами не поддерживаются. Если имеется только два узла, а вторичный узел находится в другом регионе, резервные копии будут по-прежнему запускаться с первичного узла (если только параметр резервного копирования не является вторичным).
* Если узел переходит в регион, отличный от того, где настроена резервная копия, резервное копирование на узлах в регионе отработки отказа завершится сбоем.

В зависимости от установленного параметра резервного копирования и типов резервных копий (полная, разностная, резервная копия журналов, полная резервная копия только для копирования) резервные копии создаются с определенного узла (первичного или вторичного).

#### <a name="backup-preference-primary"></a>Параметры резервного копирования: основной

**Тип резервного копирования** | **Узел**
--- | ---
Полное | Первичный
Разностная | Первичный
Журнал |  Первичный
Полная резервная копия (только копирование) |  Первичный

#### <a name="backup-preference-secondary-only"></a>Параметр резервного копирования: только вторичный

**Тип резервного копирования** | **Узел**
--- | ---
Полное | Первичный
Разностная | Первичный
Журнал |  Вторичная
Полная резервная копия (только копирование) |  Вторичная

#### <a name="backup-preference-secondary"></a>Параметр резервного копирования: дополнительный

**Тип резервного копирования** | **Узел**
--- | ---
Полное | Первичный
Разностная | Первичный
Журнал |  Вторичная
Полная резервная копия (только копирование) |  Вторичная

#### <a name="no-backup-preference"></a>Без параметров резервного копирования

**Тип резервного копирования** | **Узел**
--- | ---
Полное | Первичный
Разностная | Первичный
Журнал |  Вторичная
Полная резервная копия (только копирование) |  Вторичная

## <a name="next-steps"></a>Дальнейшие шаги

Узнайте, как [создать резервную копию базы данных SQL Server](backup-azure-sql-database.md) , которая работает на виртуальной машине Azure.
