---
title: Устранение неполадок при резервном копировании баз данных SAP HANA, с помощью службы архивации Azure | Документация Майкрософт
description: В этом руководстве описывается устранение распространенных ошибок при попытке резервного копирования баз данных SAP HANA, с помощью Azure Backup.
services: backup
author: pvrk
manager: vijayts
ms.service: backup
ms.topic: conceptual
ms.date: 06/28/2019
ms.author: pullabhk
ms.openlocfilehash: 33f1b4674aad35d55ab014c45cd73753533931cb
ms.sourcegitcommit: 6cb4dd784dd5a6c72edaff56cf6bcdcd8c579ee7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2019
ms.locfileid: "67514172"
---
# <a name="troubleshoot-back-up-of-sap-hana-server-on-azure"></a>Устранение неполадок резервного копирования сервера SAP HANA в Azure

В этой статье содержатся сведения об устранении неполадок для защиты баз данных SAP HANA на виртуальных машинах Azure. Прежде чем переходить к устранению неполадок, рассмотрим несколько основных моментов, о разрешениях и параметры.

## <a name="understanding-pre-requisites"></a>Основные сведения о необходимых компонентов

Как часть [предварительные требования](backup-azure-sap-hana-database.md#prerequisites), предварительной регистрации скрипт должен выполняться на виртуальной машине установки HANA для настройки необходимых разрешений.

### <a name="setting-up-permissions"></a>Установка разрешений

Что делает сценарий предварительной регистрации:

1. Создает AZUREWLBACKUPHANAUSER в системе HANA и добавляет необходимые роли и разрешения, как показано ниже:
    - АДМИНИСТРАТОР базы данных — создание новых баз данных SQL во время восстановления
    - ЧТЕНИЕ КАТАЛОГОВ — для чтения каталога резервных копий
    - SAP_INTERNAL_HANA_SUPPORT — для доступа к таблицам несколько частных
2. Добавляет ключ к Hdbuserstore для подключаемого модуля HANA для выполнения всех операций (запрос базы данных, настройки резервного копирования, резервного копирования, выполнив восстановление)
   
   - Чтобы подтвердить создание ключа, выполните команду HDBSQL машины HANA с учетными данными SIDADM:

    ``` hdbsql
    hdbuserstore list
    ```
    
    Выходные данные команды следует отобразить ключ {SID} {DBNAME} с пользователем, как «AZUREWLBACKUPHANAUSER».

> [!NOTE]
> Убедитесь, что у вас есть уникальный набор SSFS файлы по пути «/ usr/sap/{SID}/home/.hdb/». Должна существовать только один папку по этому пути.

### <a name="setting-up-backint-parameters"></a>Настройка параметров BackInt

После выбора базы данных для резервного копирования служба архивации Azure настроит backInt параметров на уровне базы данных.

- [catalog_backup_using_backint:true]
- [enable_accumulated_catalog_backup:false]
- [parallel_data_backup_backint_channels:1]
- [log_backup_timeout_s:900)]
- [backint_response_timeout:7200]

> [!NOTE]
> Убедитесь, что эти параметры не присутствуют на уровне узла. Параметры уровня узла переопределит этих параметров и может вызвать другое поведение, чем ожидалось.

## <a name="understanding-common-user-errors"></a>Основные сведения об общих ошибках пользователя

### <a name="usererrorinopeninghanaodbcconnection"></a>UserErrorInOpeningHanaOdbcConnection

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Не удалось подключиться к HANA system.check системы — приступить к работе.| Служба Azure Backup не сможет подключиться к HANA, так как базы данных HANA не работает. Или HANA запущен, но не разрешает службе Azure Backup для подключения | Проверьте, если HANA DB/служба не работает. Если службы DB HANA приступить к работе, проверьте, если все разрешения настраиваются как уже упоминалось [здесь](#setting-up-permissions). Если ключ отсутствует, повторно запустите сценарий предварительной регистрации, чтобы создать новый ключ. |

### <a name="usererrorinvalidbackintconfiguration"></a>UserErrorInvalidBackintConfiguration

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Обнаружены недопустимые Backint конфигурации. Остановка защиты и измените конфигурацию базы данных.| BackInt параметров заданы неверно для резервного копирования Azure. | Проверьте, используются параметры, как уже упоминалось [здесь](#setting-up-backint-parameters). Если параметры на основе backInt присутствуют в основном ПРИЛОЖЕНИИ, а затем удалите их. Если параметры отсутствуют на узле, но был изменен вручную на уровне базы данных, то вместо них соответствующие значения как упоминалось выше. Или команду «отключите защиту хранящихся данных» из портала Azure и «возобновить резервное копирование» еще раз.|
