---
title: Устранение ошибок при резервном копировании баз данных SAP HANA с помощью Azure Backup | Документация Майкрософт
description: Описание способов устранения распространенных ошибок, которые могут возникнуть при использовании Azure Backup для резервного копирования SAP HANA баз данных.
services: backup
author: pvrk
manager: vijayts
ms.service: backup
ms.topic: conceptual
ms.date: 06/28/2019
ms.author: pullabhk
ms.openlocfilehash: 32e814ea83f30b48af5ce507ce250f37a34390da
ms.sourcegitcommit: a6873b710ca07eb956d45596d4ec2c1d5dc57353
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/16/2019
ms.locfileid: "68249486"
---
# <a name="troubleshoot-backup-of-sap-hana-databases-on-azure"></a>Устранение неполадок резервного копирования баз данных SAP HANA в Azure

В этой статье содержатся сведения об устранении неполадок при резервном копировании баз данных SAP HANA на виртуальных машинах Azure.

## <a name="prerequisites"></a>предварительные требования

В рамках [необходимых условий](backup-azure-sap-hana-database.md#prerequisites)убедитесь, что сценарий предварительной регистрации был запущен на виртуальной машине, где установлен Hana.

### <a name="setting-up-permissions"></a>Настройка разрешений

Действия, выполняемые сценарием предрегистрации:

1. Создает АЗУРЕВЛБАККУФАНАУСЕР в системе HANA и добавляет следующие необходимые роли и разрешения:
    - Администратор базы данных: для создания нового баз данных во время восстановления.
    - ЧТЕНИЕ каталога: чтение каталога резервного копирования.
    - SAP_INTERNAL_HANA_SUPPORT: для доступа к некоторым частным таблицам.
2. Добавляет ключ в Hdbuserstore для подключаемого модуля HANA, чтобы выполнять все операции (запросы к базе данных, операции восстановления, Настройка и выполнение резервного копирования).
   
   Чтобы подтвердить создание ключа, выполните команду HDBSQL на компьютере HANA с учетными данными SIDADM:

    ``` hdbsql
    hdbuserstore list
    ```
    
    В выходных данных команды должен отобразиться ключ {SID} {DBNAME}, а пользователь, показанный как АЗУРЕВЛБАККУФАНАУСЕР.

> [!NOTE]
> Убедитесь, что у вас есть уникальный набор файлов ССФС в разделе **/УСР/САП/{СИД}/Хоме/.хдб/** . В этом пути должна быть только одна папка.

### <a name="setting-up-backint-parameters"></a>Настройка параметров Backint) создание

После выбора базы данных для резервного копирования служба Azure Backup настраивает параметры Backint) создание на уровне базы данных:

- [catalog_backup_using_backint: true]
- [enable_accumulated_catalog_backup: false]
- [parallel_data_backup_backint_channels: 1]
- [log_backup_timeout_s: 900)]
- [backint_response_timeout: 7200]

> [!NOTE]
> Убедитесь, что эти параметры *отсутствуют* на уровне узла. Параметры уровня узла будут переопределять эти параметры и могут вызвать непредвиденное поведение.

## <a name="common-user-errors"></a>Распространенные ошибки пользователей

### <a name="usererrorinopeninghanaodbcconnection"></a>усерерроринопенингханаодбкконнектион

data| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Не удалось подключиться к системе HANA. Убедитесь, что система работает.| Службе Azure Backup не удается подключиться к HANA, так как база данных HANA не работает. Или HANA работает, но не допускает подключения к службе Azure Backup. | Проверьте, не отключена ли база данных HANA или служба. Если база данных или служба HANA работает и запущена, проверьте, [установлены ли все разрешения](#setting-up-permissions). Если ключ отсутствует, повторно запустите сценарий перед регистрацией, чтобы создать новый ключ. |

### <a name="usererrorinvalidbackintconfiguration"></a>усерерроринвалидбаккинтконфигуратион

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Обнаружена недопустимая конфигурация Backint) создание. Отключите защиту и перенастройте базу данных.| Параметры Backint) создание неправильно указаны для Azure Backup. | Проверьте, [заданы ли параметры](#setting-up-backint-parameters). Если в узле имеются параметры на основе Backint) создание, удалите их. Если параметры отсутствуют на уровне узла, но были изменены вручную на уровне базы данных, верните их к соответствующим значениям, как описано выше. Или запустите команду " **Отключить защиту" и сохраните данные резервных копий** из портал Azure, а затем выберите возобновить **резервное копирование**.|
