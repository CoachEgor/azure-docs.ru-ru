---
title: Резервное копирование базы данных сервера СЗЛ
description: Сведения об устранении неполадок резервного копирования баз данных SQL Server на виртуальных машинах Azure с помощью службы Azure Backup.
ms.topic: troubleshooting
ms.date: 06/18/2019
ms.openlocfilehash: 8d49adb0ab741903ccb2989cfeb4ceaef2e8a38d
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79408622"
---
# <a name="troubleshoot-sql-server-database-backup-by-using-azure-backup"></a>Устранение проблем в резервной базе данных сервера S'L Server с помощью резервного копирования Azure

В этой статье содержится информация об устранении неполадок для баз данных сервера S'L Server, работающих на виртуальных машинах Azure.

Для получения дополнительной информации о процессе [About SQL Server backup in Azure VMs](sql-support-matrix.md#feature-consideration-and-limitations)резервного копирования и ограничениях см.

## <a name="sql-server-permissions"></a>разрешения SQL Server

Чтобы настроить защиту для базы данных сервера S'L на виртуальной машине, необходимо установить расширение **AzureBackupWindowsWorkload** на эту виртуальную машину. Если вы получили ошибку **UserErrorS'LSysadminMembership,** это означает, что ваш экземпляр сервера S'L не имеет необходимых разрешений на резервное копирование. Чтобы исправить эту ошибку, выполните последующие действия в [разрешении Set VM.](backup-azure-sql-database.md#set-vm-permissions)

## <a name="troubleshoot-discover-and-configure-issues"></a>Устранение неполадок обнаруживает и настраивает проблемы

После создания и настройки хранилища служб восстановления обнаружение баз данных и настройка резервного копирования — это двухэтапный процесс.<br>

![sql](./media/backup-azure-sql-database/sql.png)

Во время конфигурации резервного копирования, если ВМ ИЗЛ и его экземпляры не видны в **DB-дисках Discovery** и **настраивайте резервное копирование** (например, изображение) убедитесь, что:

### <a name="step-1-discovery-dbs-in-vms"></a>Шаг 1: Открытие DBs в VMs

- Если VM не указан в обнаруженном списке VM, а также не зарегистрирован для резервного копирования s'L в другом хранилище, то следуйте шагам [резервного копирования сервера Discovery S'L Server.](https://docs.microsoft.com/azure/backup/backup-sql-server-database-azure-vms#discover-sql-server-databases)

### <a name="step-2-configure-backup"></a>Шаг 2: Настройка резервного копирования

- Если хранилище, в котором зарегистрирован оформило ВМ S'L, зарегистрировано в том же хранилище, которое используется для защиты баз данных, выполните шаги [настройки резервного копирования.](https://docs.microsoft.com/azure/backup/backup-sql-server-database-azure-vms#configure-backup)

Если ВМ СЗЛ необходимо зарегистрировать в новом хранилище, то он должен быть незарегистрирован из старого хранилища.  Нерегистрация VM из хранилища требует, чтобы все защищенные источники данных были защищены, а затем можно удалить резервные данные. Удалять резервные данные является разрушительной операцией.  После того, как вы рассмотрели и приняли все меры предосторожности, чтобы отменить регистрацию S'L VM, а затем зарегистрировать этот же VM с новым хранилищем и повторить операцию резервного копирования.

## <a name="troubleshoot-backup-and-recovery-issues"></a>Проблемы с устранением проблем и восстановления неполадок  

Иногда в операциях резервного копирования и восстановления могут возникать случайные сбои, либо эти операции могут застрять. Это может быть из-за антивирусных программ на вашем VM. В качестве наилучшей практики мы предлагаем следующие шаги:

1. Исключить следующие папки из антивирусного сканирования:

    `C:\Program Files\Azure Workload Backup` `C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.RecoveryServices.WorkloadBackup.Edp.AzureBackupWindowsWorkload`

    Замените `C:\` письмом *вашего SystemDrive*.

1. Исключить из антивирусного сканирования следующие три процесса, выполняемые в Рамках VM:

    - IaasWLPluginSvc.exe
    - IaasWorkloadCoordinaorService.exe
    - TriggerExtensionJob.exe

1. Кроме того, s'L предлагает некоторые рекомендации по работе с антивирусными программами. Подробные сведения можно найти в [этой статье](https://support.microsoft.com/help/309422/choosing-antivirus-software-for-computers-that-run-sql-server).

## <a name="error-messages"></a>Сообщения об ошибках

### <a name="backup-type-unsupported"></a>Тип резервного копирования не поддерживается

| Severity | Описание | Возможные причины | Рекомендуемое действие |
|---|---|---|---|
| Предупреждение | Текущие параметры этой базы данных не поддерживают определенные типы резервного копирования, присутствующие в связанной политике. | <li>Только полная операция резервного копирования базы данных может быть выполнена в основной базе данных. Ни резервное копирование дифференциала, ни резервное копирование журнала транзакций невозможны. </li> <li>Любая база данных в простой модели восстановления не позволяет резервное копирование журналов транзакций.</li> | Поддерживается изменение параметров базы данных, например всех типов резервных копий в политике. Или измените текущую политику, чтобы включить только поддерживаемые типы резервного копирования. В противном случае неподдерживаемые типы резервного копирования будут пропущены во время запланированного резервного копирования, иначе задание резервного копирования не будет работать для резервного копирования по требованию.

### <a name="usererrorsqlpodoesnotsupportbackuptype"></a>UserErrorSQLPODoesNotSupportBackupType

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| This SQL database does not support the requested backup type. (Эта база данных SQL не поддерживает запрашиваемый тип резервного копирования.) | Возникает, когда модель восстановления базы данных не разрешает запрашиваемый тип резервного копирования. Ошибка может произойти в следующих ситуациях: <br/><ul><li>База данных, используюая простую модель восстановления, не позволяет резервному копированию журнала.</li><li>Дифференциальные и резервные копии журнала не допускаются для основной базы данных.</li></ul>Для получения более подробной информации ознакомьтесь с документацией [моделей восстановления сервера S'L](https://docs.microsoft.com/sql/relational-databases/backup-restore/recovery-models-sql-server) Server. | Если резервное копирование журнала не удается для базы данных в простой модели восстановления, попробуйте один из этих вариантов:<ul><li>Если база данных находится в режиме простого восстановления, отключите резервные копии журналов.</li><li>Используйте [документацию S'L Server,](https://docs.microsoft.com/sql/relational-databases/backup-restore/view-or-change-the-recovery-model-of-a-database-sql-server) чтобы изменить модель восстановления базы данных на полную или объемную регистрацию. </li><li> Если вы не хотите изменять модель восстановления, и у вас есть стандартная политика резервного копирования нескольких баз данных, которую нельзя изменить, игнорируйте ошибку. Полные и разностные резервные копии будут работать по расписанию. Резервные копии журналов будут пропущены, что ожидаемо в этом случае.</li></ul>Если это главная база данных и вы настроили дифференциал или резервное копирование журнала, используйте любой из следующих шагов:<ul><li>Используйте портал, чтобы полностью изменить график политики резервного копирования для основной базы данных.</li><li>Если у вас есть стандартная политика резервного копирования нескольких баз данных, которую нельзя изменить, игнорируйте ошибку. Ваше полное резервное копирование будет работать по расписанию. Разностное резервное копирование или резервное копирование журналов не произойдет, что ожидаемо в этом случае.</li></ul> |
| Operation canceled as a conflicting operation was already running on the same database. (Операция отменена, так как конфликтная операция уже выполняется в одной базе данных.) | Смотрите [запись в блоге о резервном копировании и восстановить ограничения,](https://deep.data.blog/2008/12/30/concurrency-of-full-differential-and-log-backups-on-the-same-database/) которые работают одновременно.| [Для мониторинга заданиями резервного копирования используйте студию управления серверами S'L (SSMS).](manage-monitor-sql-database-backup.md) После сбоя конфликтной операции перезапустите операцию.|

### <a name="usererrorsqlpodoesnotexist"></a>UserErrorSQLPODoesNotExist

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| SQL database does not exist. (База данных SQL не существует.) | База данных была либо удалена, либо переименована. | Проверьте, не была ли база данных случайно удалена или переименована.<br/><br/> Если база данных была случайно удалена, чтобы продолжить резервное копирование, восстановите базу данных в ее исходном расположении.<br/><br/> Если вы удалили базу данных и не нуждаетесь в будущих резервных ожиданиях, то в хранилище служб восстановления выберите **Stop Backup** с **сохранением резервных данных** или **удалением резервных данных.** Для получения дополнительной [информации, смотрите Управление и мониторинг резервных баз данных сервера S'L.](manage-monitor-sql-database-backup.md).

### <a name="usererrorsqllsnvalidationfailure"></a>UserErrorSQLLSNValidationFailure

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Log chain is broken. (Цепочка журналов прерывается.) | База данных или VM резервное копирование через другое решение резервного копирования, которое уселяет цепочку журнала.|<ul><li>Проверьте, используется ли другое решение или скрипт резервного копирования. В этом случае остановите резервное копирование. </li><li>Если резервное копирование было резервным копированием журнала по требованию, запустите полную резервную копию для запуска новой цепочки журналов. Для запланированных резервных копий журнала никаких действий не требуется, так как служба резервного копирования Azure автоматически запускает полную резервную копию для устранения этой проблемы.</li>|

### <a name="usererroropeningsqlconnection"></a>UserErrorOpeningSQLConnection

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Azure Backup is not able to connect to the SQL instance. (Azure Backup не может подключиться к экземпляру SQL.) | Резервное копирование Azure не может быть подключено к экземпляру сервера S'L. | Используйте дополнительные сведения в меню ошибок портала Azure, чтобы сузить коренные причины. Дополнительные сведения см. в статье [Устранение неполадок при соединении с компонентом SQL Server Database Engine](https://docs.microsoft.com/sql/database-engine/configure-windows/troubleshoot-connecting-to-the-sql-server-database-engine).<br/><ul><li>Если настройки по умолчанию не позволяют создавать удаленные соединения, измените настройки. О знакомитесь с информацией об изменении настроек:<ul><li>[MSSQLSERVER_-1](https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-1-database-engine-error?view=sql-server-ver15)</li><li>[MSSQLSERVER_2](/sql/relational-databases/errors-events/mssqlserver-2-database-engine-error)</li><li>[MSSQLSERVER_53](/sql/relational-databases/errors-events/mssqlserver-53-database-engine-error)</li></ul></li></ul><ul><li>Если есть проблемы с ввозами, используйте эти ссылки, чтобы исправить их:<ul><li>[MSSQLSERVER_18456](/sql/relational-databases/errors-events/mssqlserver-18456-database-engine-error)</li><li>[MSSQLSERVER_18452](/sql/relational-databases/errors-events/mssqlserver-18452-database-engine-error)</li></ul></li></ul> |

### <a name="usererrorparentfullbackupmissing"></a>UserErrorParentFullBackupMissing

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| First full backup is missing for this data source. (Полная резервная копия отсутствует для этого источника данных.) | Полная резервная копия для базы данных отсутствует. Резервное копирование журнала и дифференциала являются родителями для полного резервного копирования, поэтому не забудьте взять полный резервный копии перед запуском дифференциала или резервного копирования журнала. | Триггер полного резервного копирования по требованию.   |

### <a name="usererrorbackupfailedastransactionlogisfull"></a>UserErrorBackupFailedAsTransactionLogIsFull

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Невозможно выполнить резервное копирование, так как журнал транзакций для источника данных заполнен. | Пространство журнала транзакций базы данных заполнено. | Чтобы устранить эту проблему, обратитесь к [документации сервера S'L](https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-9002-database-engine-error)Server. |

### <a name="usererrorcannotrestoreexistingdbwithoutforceoverwrite"></a>UserErrorCannotRestoreExistingDBWithoutForceOverwrite

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Database with same name already exists at the target location (База данных с тем же именем уже существует в целевом расположении) | Целевой пункт восстановления уже имеет базу данных с тем же именем.  | <ul><li>Измените имя целевой базы данных.</li><li>Или используйте опцию принудительного перезаписи на странице восстановления.</li> |

### <a name="usererrorrestorefaileddatabasecannotbeofflined"></a>UserErrorRestoreFailedDatabaseCannotBeOfflined

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Restore failed as the database could not be brought offline. (Не удалось выполнить восстановление, так как база данных не может быть отключена.) | Во время восстановления целевая база данных должна быть приведена в автономный режим. Резервное копирование Azure не может привести эти данные в автономный режим. | Используйте дополнительные сведения в меню ошибок портала Azure, чтобы сузить коренные причины. Дополнительные сведения см. в [документации по SQL Server](https://docs.microsoft.com/sql/relational-databases/backup-restore/restore-a-database-backup-using-ssms). |

### <a name="usererrorcannotfindservercertificatewiththumbprint"></a>UserErrorCannotFindServerCertificateWithThumbprint

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Cannot find the server certificate with thumbprint on the target. (Не удается найти сертификат сервера с отпечатком на целевом сервере.) | В основной базе данных в экземпляре назначения нет действительного отпечатка пальца шифрования. | Импортируйте действительный отпечаток пальца сертификата, используемый в экземпляре исходного кода, в целевой экземпляр. |

### <a name="usererrorrestorenotpossiblebecauselogbackupcontainsbulkloggedchanges"></a>UserErrorRestoreNotPossibleBecauseLogBackupContainsBulkLoggedChanges

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Резервная копия журналов, используемая для восстановления, содержит сведения об изменениях, зафиксированные в режиме неполного протоколирования. Согласно рекомендациям по SQL ее нельзя использовать для остановки в произвольный момент времени. | Когда база данных находится в режиме восстановления навалом, данные между транзакцией с объемом несения регистрации и следующей транзакцией журнала не могут быть восстановлены. | Выберите другой момент времени для восстановления. Ознакомьтесь с [дополнительными сведениями](https://docs.microsoft.com/sql/relational-databases/backup-restore/recovery-models-sql-server?view=sql-server-ver15).

### <a name="fabricsvcbackuppreferencecheckfailedusererror"></a>FabricSvcBackupPreferenceCheckFailedUserError

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Backup preference for SQL Always On Availability Group cannot be met as some nodes of the Availability Group are not registered. (Требование резервного копирования для группы доступности SQL Always On не может быть выполнено, поскольку некоторые узлы группы доступности не зарегистрированы.) | Узлы, необходимые для выполнения резервного копирования, не зарегистрированы или недоступны. | <ul><li>Убедитесь, что все узлы, необходимые для выполнения резервных работ этой базы данных, зарегистрированы и здоровы, а затем повторно проведут операцию.</li><li>Измените резервное предпочтение для группы доступности сервера Всегда на панели доступности.</li></ul> |

### <a name="vmnotinrunningstateusererror"></a>VMNotInRunningStateUserError

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| SQL server VM is either shutdown and not accessible to Azure Backup service. (Виртуальная машина SQL server либо отключена, либо недоступна службе Azure Backup.) | ВМ закрыт. | Убедитесь, что экземпляр сервера S'L работает. |

### <a name="guestagentstatusunavailableusererror"></a>GuestAgentStatusUnavailableUserError

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Служба Azure Backup использует гостевой агент виртуальной машины Azure VM для выполнения резервного копирования, но агент недоступен на целевом сервере. | Гостевой агент не включен или неработоспособен. | [Установите гостевой агент виртуальной машины](../virtual-machines/extensions/agent-windows.md) вручную. |

### <a name="autoprotectioncancelledornotvalid"></a>AutoProtectionCancelledOrNotValid

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
| Намерение автоматической защиты было удалено или больше не действительно. | При вводе автоматической защиты на экземпляре сервера S'L, настройка заданий **резервного копирования** для всех баз данных в этом случае. Если отключить автоматическую защиту при выполнении заданий, **текущие** задания будут отменены и отобразится этот код ошибки. | Включите автоматическую защиту еще раз, чтобы помочь защитить все оставшиеся базы данных. |

### <a name="clouddosabsolutelimitreached"></a>CloudDosAbsoluteLimitReached

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
Операция блокируется, так как вы достигли предела количества операций, разрешенных в течение 24 часов. | Когда вы достигли максимально допустимого предела для операции в течение 24 часов, эта ошибка приходит. <br> Например: Если вы достигли лимита на количество заданий резервного копирования, которые могут быть срабатываны в день, и вы попытаетесь настроить резервную копию на новый элемент, вы увидите эту ошибку. | Как правило, повторная операция через 24 часа устраняет эту проблему. Однако, если проблема сохраняется, вы можете обратиться за помощью в службу поддержки корпорации Майкрософт.

### <a name="clouddosabsolutelimitreachedwithretry"></a>CloudDosAbsoluteLimitReachedWithRetry

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
Операция блокируется, так как хранилище достигло максимального предела для таких операций, разрешенных в течение 24 часов. | Когда вы достигли максимально допустимого предела для операции в течение 24 часов, эта ошибка приходит. Эта ошибка обычно возникает при наличии операций в масштабах, таких как изменение политики или автоматическая защита. В отличие от CloudDosAbsoluteLimitReached, вы не можете многое сделать для разрешения этого состояния, на самом деле служба резервного копирования Azure будет повторно выполнять операции внутри всех элементов, о котором идет речь.<br> Например: Если у вас есть большое количество источников данных, защищенных политикой, и вы пытаетесь изменить эту политику, это вызовет работу по настройке защиты для каждого из защищенных элементов, а иногда может достичь максимальнодопустимого предела для таких операций в день.| Служба резервного копирования Azure автоматически повторно опробует эту операцию через 24 часа.

### <a name="usererrorvminternetconnectivityissue"></a>UserErrorVMInternetConnectivityIssue

| Сообщение об ошибке | Возможные причины | Рекомендуемое действие |
|---|---|---|
VM не может связаться с службой резервного копирования Azure из-за проблем с подключением к Интернету. | VM необходимо исходящие подключения к службе резервного копирования Azure, Лазурное хранилище или Службы активного каталога Azure.| - Если вы используете NSG для ограничения подключения, то следует использовать тег службы AzureBackup, чтобы обеспечить исходящий доступ к резервному копированию Azure для службы резервного копирования Azure, служб хранения Azure или службы активного каталога Azure. Выполните следующие [действия,](https://docs.microsoft.com/azure/backup/backup-sql-server-database-azure-vms#allow-access-using-nsg-tags) чтобы предоставить доступ.<br>- Убедитесь, что DNS разрешает конечные точки Azure.<br>- Проверьте, стоит ли VM за балансером нагрузки, блокирующим доступ в Интернет. Присваивая общедоступный IP-адреса множестольным высеживать, открытие будет работать.<br>- Проверьте, что нет брандмауэра/антивируса/прокси, который блокирует звонки в вышеуказанные три целевых службы.

## <a name="re-registration-failures"></a>Сбои перерегистрации

Проверьте один или несколько из следующих симптомов, прежде чем вы запустите операцию перерегистрации:

* Все операции (например, резервное копирование, восстановление и настройка резервного копирования) не удается на VM с одним из следующих кодов ошибок: **WorkloadExtensionNotReachable**, **UserErrorWorkExtensionNotInstalled**, **WorkloadExtensionNotPresent**, **WorkloadExtensionAnd , WorkloadExtensionAndTDequeueMsg**.
* Если область **состояния резервного копирования** для элемента резервного копирования отображается **недостижимой,** исключите все другие причины, которые могут привести к тому же статусу:

  * Отсутствие разрешения на выполнение операций, связанных с резервной копированием на VM.
  * Выключение VM, поэтому резервные копирования не могут иметь место.
  * Проблемы сети.

   ![перерегистрация VM](./media/backup-azure-sql-database/re-register-vm.png)



* В случае группы всегда на доступность резервные отправления начали сбой после изменения предпочтений резервного копирования или после сбоя.

Эти симптомы могут возникнуть по одной или более из следующих причин:

* Расширение было удалено или удалено с портала.
* Расширение было неустановлено от **панели управления** на VM под **Uninstall или Изменить программу**.
* VM был восстановлен во времени через восстановление диска на месте.
* VM был закрыт в течение длительного периода времени, поэтому срок действия конфигурации расширения на нем истек.
* VM был удален, а другой VM был создан с тем же именем и в той же группе ресурсов, что и удаленный VM.
* Один из узлов группы доступности не получил полную конфигурацию резервного копирования. Это может произойти, когда группа доступности зарегистрирована в хранилище или когда добавляется новый узла.

В предыдущих сценариях мы рекомендуем вызвать операцию перерегистрации на VM. Смотрите [здесь](https://docs.microsoft.com/azure/backup/backup-azure-sql-automation#enable-backup) для получения инструкций о том, как выполнить эту задачу в PowerShell.

## <a name="size-limit-for-files"></a>Предельный размер для файлов

Общий размер строки файлов зависит не только от количества файлов, но и от их имен и путей. Для каждого файла базы данных получите логическое имя файла и физический путь. Этот запрос можно использовать:

```sql
SELECT mf.name AS LogicalName, Physical_Name AS Location FROM sys.master_files mf
               INNER JOIN sys.databases db ON db.database_id = mf.database_id
               WHERE db.name = N'<Database Name>'"
```

Теперь расположите их в следующем формате:

```json
[{"path":"<Location>","logicalName":"<LogicalName>","isDir":false},{"path":"<Location>","logicalName":"<LogicalName>","isDir":false}]}
```

Ниже приведен пример:

```json
[{"path":"F:\\Data\\TestDB12.mdf","logicalName":"TestDB12","isDir":false},{"path":"F:\\Log\\TestDB12_log.ldf","logicalName":"TestDB12_log","isDir":false}]}
```

Если размер строки содержимого превышает 20 000 байт, файлы базы данных хранятся по-разному. Во время восстановления вы не сможете установить целевой путь файла для восстановления. Файлы будут восстановлены в пути по умолчанию, предоставленном сервером S'L.

### <a name="override-the-default-target-restore-file-path"></a>Переопределить целевой путь восстановления файла по умолчанию

Можно переопределить траекторию восстановления файла цели во время операции восстановления, разместив файл JSON, содержащий отображение файла базы данных, в путь восстановления цели. Создайте `database_name.json` файл и поместите его в место *C: «Файлы программы»Azure Workload Backup-bin-plugins s'L*.

Содержание файла должно быть в этом формате:

```json
[
  {
    "Path": "<Restore_Path>",
    "LogicalName": "<LogicalName>",
    "IsDir": "false"
  },
  {
    "Path": "<Restore_Path>",
    "LogicalName": "LogicalName",
    "IsDir": "false"
  },  
]
```

Ниже приведен пример:

```json
[
  {
   "Path": "F:\\Data\\testdb2_1546408741449456.mdf",
   "LogicalName": "testdb7",
   "IsDir": "false"
  },
  {
    "Path": "F:\\Log\\testdb2_log_1546408741449456.ldf",
    "LogicalName": "testdb7_log",
    "IsDir": "false"
  },  
]
```

В предыдущем содержимом можно получить логическое название файла базы данных, используя следующий запрос S'L:

```sql
SELECT mf.name AS LogicalName FROM sys.master_files mf
                INNER JOIN sys.databases db ON db.database_id = mf.database_id
                WHERE db.name = N'<Database Name>'"
  ```

Этот файл должен быть помещен до запуска операции восстановления.

## <a name="next-steps"></a>Дальнейшие действия

Для получения более подробной информации о резервном копировании [Azure Backup for SQL VMs](../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md#azbackup)Azure для VMs-серверов S'L (публичный предварительный просмотр) см.
