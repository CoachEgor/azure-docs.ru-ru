---
title: Вопросы и ответы о резервном копировании баз данных SAP HANA на виртуальных машинах Azure
description: В этой статье вы найдете ответы на часто задаваемые вопросы о резервном копировании баз данных SAP HANA с помощью службы Azure Backup.
ms.topic: conceptual
ms.date: 11/7/2019
ms.openlocfilehash: 56f98dddb00eb3ffc87eb27da73066de807a1ee1
ms.sourcegitcommit: 595cde417684e3672e36f09fd4691fb6aa739733
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2020
ms.locfileid: "83701016"
---
# <a name="frequently-asked-questions--back-up-sap-hana-databases-on-azure-vms"></a>Вопросы и ответы о резервном копировании баз данных SAP HANA на виртуальных машинах Azure

В этой статье содержатся ответы на часто задаваемые вопросы о резервном копировании баз данных SAP HANA с помощью службы Azure Backup.

## <a name="backup"></a>Резервное копирование

### <a name="how-many-full-backups-are-supported-per-day"></a>Сколько поддерживается полных резервных копий в день?

Поддерживается только одна полная резервная копия в день. В один день невозможно активировать дифференциальную и полную резервную копию.

### <a name="do-successful-backup-jobs-create-alerts"></a>Отправляются ли оповещения об успешно выполненных заданиях резервного копирования?

Нет. Для успешно выполненных заданий резервного копирования не создаются оповещения. Оповещения отправляются только в случае сбоя. Поведение оповещений портала подробно описано [здесь](https://docs.microsoft.com/azure/backup/backup-azure-monitoring-built-in-monitor). Но если вам нужно получать оповещения даже для успешных заданий, можно воспользоваться [Azure Monitor](https://docs.microsoft.com/azure/backup/backup-azure-monitoring-use-azuremonitor).

### <a name="can-i-see-scheduled-backup-jobs-in-the-backup-jobs-menu"></a>Можно ли просмотреть запланированные задания резервного копирования в меню "Задания резервного копирования"?

В меню "Задания резервного копирования" отображаются только нерегламентированные задания. Для запланированных заданий используйте [Azure Monitor](https://docs.microsoft.com/azure/backup/backup-azure-monitoring-use-azuremonitor).

### <a name="are-future-databases-automatically-added-for-backup"></a>Добавляются ли автоматически будущие базы данных в резервное копирование?

Нет, сейчас такая возможность не поддерживается.

### <a name="if-i-delete-a-database-from-an-instance-what-will-happen-to-the-backups"></a>Что произойдет с резервным копированием, если удалить базу данных из экземпляра?

Если удалить базу данных из экземпляра SAP HANA, попытки ее резервного копирования все равно будут продолжаться. Это означает, что удаленная база данных начнет отображаться как неработоспособная в разделе **Элементы архивации** и будет по-прежнему обрабатываться как защищенная.
Правильный способ отключения защиты этой базы данных — выполнить в этой базе данных **остановку резервного копирования с удалением данных**.

### <a name="if-i-change-the-name-of-the-database-after-it-has-been-protected-what-will-the-behavior-be"></a>Что произойдет, если изменить имя базы данных после включения защиты?

Переименованная база данных рассматривается как новая база данных. Поэтому служба будет обрабатывать эту ситуацию так, как если бы база данных не была найдена и не сможет выполнять резервное копирование. Переименованная база данных будет отображаться как новая база данных и должна быть настроена для защиты.

### <a name="what-are-the-prerequisites-to-back-up-sap-hana-databases-on-an-azure-vm"></a>Каковы необходимые условия для резервного копирования баз данных SAP HANA на виртуальной машине Azure?

См. [необходимые условия](tutorial-backup-sap-hana-db.md#prerequisites) и раздел [Функции скрипта предварительной регистрации](tutorial-backup-sap-hana-db.md#what-the-pre-registration-script-does).

### <a name="what-permissions-should-be-set-for-azure-to-be-able-to-back-up-sap-hana-databases"></a>Какие разрешения необходимо установить, чтобы служба Azure могла выполнять резервное копирование баз данных SAP HANA?

Необходимые разрешения, позволяющие Azure выполнять резервное копирование баз данных SAP HANA, задаются при выполнении скрипта предварительной регистрации. Дополнительные сведения о сценарии предварительной регистрации можно найти [здесь](tutorial-backup-sap-hana-db.md#what-the-pre-registration-script-does).

### <a name="will-backups-work-after-migrating-sap-hana-from-sdc-to-mdc"></a>Будет ли выполняться резервное копирование после миграции SAP HANA из SDC в MDC?

В [этом разделе](https://docs.microsoft.com/azure/backup/backup-azure-sap-hana-database-troubleshoot#sdc-to-mdc-upgrade-with-a-change-in-sid) содержится руководство по устранению неполадок.

### <a name="can-azure-hana-backup-be-set-up-against-a-virtual-ip-load-balancer-and-not-a-virtual-machine"></a>Можно ли настроить резервное копирование Azure HANA для виртуального IP-адреса (балансировщик нагрузки), а не для виртуальной машины?

Сейчас нет возможности настроить решение для отдельного виртуального IP-адреса. Для работы этого решения требуется виртуальная машина.

### <a name="i-have-a-sap-hana-system-replication-hsr-how-should-i-configure-backup-for-this-setup"></a>Как настроить резервное копирование при использовании SAP HANA System Replication (HSR)?

Основной и дополнительный узлы HSR будут рассматриваться как две отдельные, не связанные между собой виртуальные машины. Необходимо настроить резервное копирование на основном узле, а когда произойдет отработка отказа, необходимо настроить резервное копирование на дополнительном узле (который после этого станет основным узлом). Автоматическое переключение резервного копирования при отработке отказа не поддерживается.

### <a name="how-can-i-move-an-on-demand-backup-to-the-local-file-system-instead-of-the-azure-vault"></a>Как выполнить резервное копирование по запросу в локальную файловую систему, а не в хранилище Azure?

1. Дождитесь завершения текущего резервного копирования в нужной базе данных (проверьте завершение в Studio).
1. Отключите резервное копирование журналов и установите **файловую систему** в качестве каталога резервного копирования для требуемой базы данных, выполнив следующие действия.
1. Дважды щелкните **systemdb** -> **Конфигурация** -> **Выбрать базу данных** -> **Фильтр (журнал)** .
    1. Установите параметр enable_auto_log_backup в значение **no**.
    1. Установите параметр log_backup_using_backint в значение **false**.
1. Выполните резервное копирование требуемой базы данных по запросу и дождитесь завершения резервного копирования и архивации каталога.
1. Верните предыдущие значения параметров, чтобы разрешить резервное копирование в хранилище Azure.
    1. Установите параметр enable_auto_log_backup в значение **yes**.
    1. Установите параметр log_backup_using_backint в значение **true**.

## <a name="restore"></a>Восстановить

### <a name="why-cant-i-see-the-hana-system-i-want-my-database-to-be-restored-to"></a>Почему не отображается система HANA, в которую нужно восстановить базу данных?

Проверьте, выполнены ли все предварительные условия для восстановления в целевом экземпляре SAP HANA. Дополнительные сведения см. в разделе [Восстановление баз данных SAP HANA на виртуальных машинах Azure. Предварительные требования](https://docs.microsoft.com/azure/backup/sap-hana-db-restore#prerequisites).

### <a name="why-is-the-overwrite-db-restore-failing-for-my-database"></a>Почему не удается восстановить базу данных с перезаписью?

Убедитесь, что при восстановлении выбран параметр **Принудительная перезапись**.

### <a name="why-do-i-see-the-source-and-target-systems-for-restore-are-incompatible-error"></a>Почему возникает ошибка "Исходная и конечная системы для восстановления несовместимы"?

Чтобы узнать, какие типы восстановления поддерживаются в настоящее время, обратитесь к заметке SAP HANA номер [1642148](https://launchpad.support.sap.com/#/notes/1642148).

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как [выполнять резервное копирование баз данных SAP HANA](https://docs.microsoft.com/azure/backup/backup-azure-sap-hana-database), работающих на виртуальных машинах Azure.
