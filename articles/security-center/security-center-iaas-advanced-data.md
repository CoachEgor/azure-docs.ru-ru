---
title: Расширенная защита данных для IaaS в центре безопасности Azure | Документация Майкрософт
description: " Узнайте, как включить расширенную защиту данных для IaaS в центре безопасности Azure. "
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.assetid: ba46c460-6ba7-48b2-a6a7-ec802dd4eec2
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/11/2019
ms.author: memildin
ms.openlocfilehash: a2970ea3f5ad360deaedd7efc82154cd3bc50337
ms.sourcegitcommit: f15f548aaead27b76f64d73224e8f6a1a0fc2262
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/26/2020
ms.locfileid: "77617112"
---
# <a name="advanced-data-security-for-sql-servers-on-azure-virtual-machines-preview"></a>Расширенная защита данных для серверов SQL Server на виртуальных машинах Azure (Предварительная версия)
Расширенная защита данных для серверов SQL Server на виртуальных машинах Azure — это единый пакет для расширенных возможностей обеспечения безопасности SQL. Эта предварительная версия функции включает функции для определения и устранения потенциальных уязвимостей базы данных и обнаружения аномальных действий, которые могут указывать на угрозы для базы данных. 

Это предложение по обеспечению безопасности для виртуальных машин Azure SQL Server основано на той же фундаментальной технологии, которая используется в [пакете расширенной безопасности данных базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-advanced-data-security).


## <a name="overview"></a>Обзор

Расширенная защита данных предоставляет набор расширенных возможностей обеспечения безопасности SQL, состоящих из оценки уязвимостей и расширенной защиты от угроз.

* [Оценка уязвимостей](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment) — это легко настраиваемая служба, которая помогает обнаруживать, отслеживать и устранять потенциальные уязвимости базы данных. Он предоставляет сведения о состоянии безопасности и содержит инструкции по устранению проблем безопасности и улучшению фортификатионс базы данных.
* [Расширенная защита от угроз](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection-overview) обнаруживает аномальные действия, указывающие на необычные и потенциально опасные попытки доступа или использования сервера SQL Server. Она постоянно отслеживает подозрительные действия в базе данных и предоставляет оповещения системы безопасности, ориентированные на действия, для аномальных шаблонов доступа к базам данных. Эти оповещения предоставляют сведения о подозрительном мероприятии и рекомендуемые действия для изучения и устранения угрозы.

## <a name="get-started-with-advanced-data-security-for-sql-on-azure-vms"></a>Приступая к работе с расширенной безопасностью данных для SQL на виртуальных машинах Azure

Следующие шаги помогут вам приступить к работе с расширенной безопасностью данных для SQL на виртуальных машинах Azure в общедоступной предварительной версии.

### <a name="set-up-advanced-data-security-for-sql-on-azure-vms"></a>Настройка расширенной защиты данных для SQL на виртуальных машинах Azure

Включите расширенную защиту данных для серверов SQL на виртуальных машинах на уровне подписки или рабочей области.
 
1. На боковой панели центра безопасности откройте страницу **Параметры цен &** .

1. Выберите подписку или рабочую область, для которой требуется включить расширенную защиту данных для SQL на виртуальных машинах Azure.

1. Установите переключатель для параметра **серверы SQL Server на виртуальной машине (Предварительная версия)** в положение включено. 

    (Щелкните снимок экрана, чтобы развернуть его)

    [![рекомендации и оповещения центра безопасности, как показано в центре администрирования Windows](media/security-center-advanced-iaas-data/sql-servers-on-vms-in-pricing-small.png)](media/security-center-advanced-iaas-data/sql-servers-on-vms-in-pricing-large.png#lightbox)

    Расширенная защита данных для серверов SQL Server будет включена на всех серверах SQL Server, подключенных к выбранной рабочей области, или рабочей области по умолчанию выбранной подписки.

    >[!NOTE]
    > Решение будет полностью активно после первого перезапуска SQL Server. 

Чтобы создать новую рабочую область, следуйте инструкциям в разделе [создание log Analytics рабочей области](https://docs.microsoft.com/azure/azure-monitor/learn/quick-create-workspace).

Чтобы подключить узел SQL Server к рабочей области, следуйте инструкциям в статье [Подключение компьютеров Windows к Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/platform/agent-windows).


## <a name="set-up-email-notification-for-security-alerts"></a>Настройка уведомлений по электронной почте для оповещений системы безопасности 

Вы можете задать список получателей уведомлений по электронной почте при создании оповещений центра безопасности. Сообщение электронной почты содержит прямую ссылку на оповещение в центре безопасности Azure со всеми релевантными сведениями. 

1. Перейдите в **Центр безопасности** > **цены & параметры** и щелкните соответствующую подписку.

    ![Параметры подписки](./media/security-center-advanced-iaas-data/subscription-settings.png)

1. В меню Параметры выберите пункт **уведомления по электронной почте**. 
1. В текстовом поле **адрес электронной почты** введите адреса электронной почты для получения уведомлений. Можно ввести несколько адресов электронной почты, разделив их по запятыми (,).  Например admin1@mycompany.com,admin2@mycompany.comadmin3@mycompany.com

    ![Параметры электронной почты](./media/security-center-advanced-iaas-data/email-settings.png)

1. В параметрах **уведомлений по электронной почте** задайте следующие параметры.
  
    * **Отправлять уведомления по электронной почте о предупреждениях с высоким уровнем серьезности**. вместо отправки сообщений электронной почты для всех оповещений отправляйте сообщения только для оповещений с высоким уровнем серьезности.
    * **Также отправлять уведомления по электронной почте владельцам подписки. Кроме того**, вы можете отправлять уведомления владельцам подписок.

1. В верхней части экрана **уведомлений по электронной почте** нажмите кнопку **сохранить**.

  > [!NOTE]
  > Перед закрытием окна обязательно нажмите кнопку **сохранить** , иначе новые параметры **уведомлений по электронной почте** не будут сохранены.

## <a name="explore-vulnerability-assessment-reports"></a>Просмотр отчетов об оценке уязвимостей

На панели мониторинга "Оценка уязвимостей" представлены общие сведения о результатах оценки во всех базах данных. Можно просмотреть распределение баз данных в соответствии с SQL Server версией, а также сводку по сбоям и переданным базам данных, а также общую сводку сбоев проверок в соответствии с распределением рисков.

Результаты оценки уязвимостей можно просмотреть непосредственно в центре безопасности.

1. На боковой панели центра безопасности в разделе RESOURCE SECURITY САНАЦИИ (безопасность ресурсов) выберите **Data & Storage (хранилище данных**).

1. Выберите рекомендации по устранению **уязвимости в базах данных SQL на виртуальных машинах (Предварительная версия)** . Дополнительные сведения см. в разделе [рекомендации центра безопасности](security-center-recommendations.md). 

    [![* * уязвимости в базах данных SQL на виртуальных машинах следует исправить (Предварительная версия) * * рекомендация](media/security-center-advanced-iaas-data/data-and-storage-sqldb-vulns-on-vm.png)](media/security-center-advanced-iaas-data/data-and-storage-sqldb-vulns-on-vm.png#lightbox)

    Отобразится подробное представление для этой рекомендации.

    [![подробное представление уязвимостей * * в базах данных SQL на виртуальных машинах должно быть исправлено (Предварительная версия) * * рекомендация](media/security-center-advanced-iaas-data/all-servers-view.png)](media/security-center-advanced-iaas-data/all-servers-view.png#lightbox)

1. Чтобы получить дополнительные сведения, выполните следующие действия.

    * Чтобы просмотреть обзор проверенных ресурсов (баз данных) и список проверенных проверок безопасности, щелкните интересующий вас сервер.
    [![уязвимости, сгруппированные по SQL Server](media/security-center-advanced-iaas-data/single-server-view.png)](media/security-center-advanced-iaas-data/single-server-view.png#lightbox)

    * Чтобы получить общие сведения об уязвимостях, сгруппированных по определенной базе данных SQL, щелкните интересующую ее базу данных.
    [![уязвимости, сгруппированные по SQL Server](media/security-center-advanced-iaas-data/single-database-view.png)](media/security-center-advanced-iaas-data/single-database-view.png#lightbox)

    В каждом представлении проверки безопасности сортируются по **степени серьезности**. Щелкните определенную проверку безопасности, чтобы просмотреть область сведений с **описанием**, способ устранения **этой проблемы** и другие связанные сведения, такие как **влияние** или **тест производительности**.

## <a name="advanced-threat-protection-for-sql-servers-on-azure-vms-alerts"></a>Оповещение о расширенной защите от угроз для серверов SQL Server на виртуальных машинах Azure
Предупреждения создаются необычными и потенциально опасными попытками получить доступ к серверам SQL Server или использовать их. Эти события могут активировать создание следующих оповещений.

### <a name="anomalous-access-pattern-alerts-preview"></a>Оповещения о аномальных шаблонах доступа (Предварительная версия)

* **Доступ из необычного расположения:** Это предупреждение активируется при изменении шаблона доступа к SQL Server, когда кто-то вошел в SQL Server из необычного географического расположения. Возможные причины:
    * Злоумышленник или бывший злоумышленник может получить доступ к SQL Server.
    * Законный пользователь получал доступ к SQL Server из нового расположения.
* **Доступ из потенциально опасного приложения.** Это предупреждение активируется, когда доступ к базе данных получают потенциально опасные приложения. Возможные причины:
    * Злоумышленник пытается ваш SQL, используя распространенные средства атаки.
    * Законное тестирование на проникновение в действии.
* **Доступ из незнакомого субъекта.** Это предупреждение активируется при изменении шаблона доступа к серверу SQL, если пользователь вошел на сервер SQL с помощью нестандартного субъекта (пользователя SQL). Возможные причины:
    * Злоумышленник или бывший злоумышленник может получить доступ к SQL Server. 
    * Законный пользователь получал доступ к SQL Server из с помощью нового участника.
* **Подбор учетных данных SQL.** Это предупреждение активируется при большом количестве неудачных попыток входа с разными учетными данными. Возможные причины:
    * Злоумышленник пытается свой SQL с помощью метода подбора.
    * Законное тестирование на проникновение в действии.

### <a name="potential-sql-injection-attacks-supported-in-sql-server-2019"></a>Потенциальные атаки путем внедрения кода SQL (поддерживаются в SQL Server 2019)

* **Уязвимость при внедрении кода SQL**. Это предупреждение активируется, когда приложение создает ошибочную инструкцию SQL в базе данных. Оно может указывать на возможную уязвимость к атакам путем внедрения кода SQL. Возможные причины:
    * Дефект в коде приложения, который создает инструкцию SQL с ошибкой.
    * Код приложения или хранимые процедуры не очищают ввод данных пользователя при создании ошибочной инструкции SQL, которая может быть использована для внедрения кода SQL.
* **Потенциальная атака путем внедрения кода SQL.** Это предупреждение запускается при активном эксплойте идентифицированной уязвимости приложения для внедрения кода SQL. Это означает, что злоумышленник пытается внедрить вредоносные инструкции SQL с помощью кода уязвимого приложения или хранимых процедур.


### <a name="unsafe-command-supported-in-sql-server-2019"></a>Ненадежная команда (поддерживается в SQL Server 2019)

* **Потенциально небезопасное действие**: это оповещение активируется при выполнении команды с высоким уровнем привилегий и потенциально небезопасной. Возможные причины:
    * Команда, рекомендуемая для отключения с целью улучшения безопасности.
    * Злоумышленник пытается воспользоваться правами доступа SQL или повышенными привилегиями.   


## <a name="explore-and-investigate-security-alerts"></a>Просмотр и исследование оповещений системы безопасности

Оповещения системы безопасности данных доступны на странице Оповещения центра безопасности, на вкладке Безопасность ресурса или через прямую ссылку в сообщениях электронной почты с оповещениями.

1. Для просмотра предупреждений:

    * В центре безопасности — щелкните **оповещения системы безопасности** в боковой панели и выберите оповещение.
    * В области ресурсов откройте соответствующую страницу ресурсов и на боковой панели щелкните **Безопасность**. 

1. Оповещения предназначены для автономного выполнения с подробными инструкциями по исправлению и анализом информации в каждом из них. Дополнительные сведения см. в более широком обзоре с помощью другого центра безопасности Azure и возможностей Azure Sentinel:

    * Включите функцию аудита SQL Server для дальнейшего исследования. Если вы являетесь пользователем-Sentinel Azure, вы можете отправить журналы аудита SQL из событий журнала безопасности Windows в метку и наслаждаться богатыми возможностями расследования.
    * Чтобы повысить уровень безопасности, используйте рекомендации центра безопасности для главного компьютера, указанного в каждом оповещении. Это снизит риски, возникающие в будущих атаках. 


## <a name="next-steps"></a>Дальнейшие действия

Связанные материалы см. в следующей статье:

- [Исправление рекомендаций](security-center-remediate-recommendations.md)