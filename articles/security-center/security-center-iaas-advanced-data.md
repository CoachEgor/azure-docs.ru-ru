---
title: Расширенная защита данных для IaaS в центре безопасности Azure | Документация Майкрософт
description: " Узнайте, как включить расширенную защиту данных для IaaS в центре безопасности Azure. "
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.assetid: ba46c460-6ba7-48b2-a6a7-ec802dd4eec2
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/04/2019
ms.author: memildin
ms.openlocfilehash: db700c1c06b89e1a3287b5eee1a11fc8877dedde
ms.sourcegitcommit: 3f8017692169bd75483eefa96c225d45cd497f06
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73520837"
---
# <a name="advanced-data-security-for-sql-servers-on-azure-virtual-machines-preview"></a>Расширенная защита данных для серверов SQL Server на виртуальных машинах Azure (Предварительная версия)
Расширенная защита данных для серверов SQL Server на виртуальных машинах Azure — это единый пакет для расширенных возможностей обеспечения безопасности SQL. Эта предварительная версия функции включает функции для определения и устранения потенциальных уязвимостей базы данных и обнаружения аномальных действий, которые могут указывать на угрозы для базы данных. 

Это предложение по обеспечению безопасности для виртуальных машин Azure SQL Server основано на той же фундаментальной технологии, которая используется в [пакете расширенной безопасности данных базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-advanced-data-security).


## <a name="overview"></a>Обзор

Расширенная защита данных предоставляет набор расширенных возможностей обеспечения безопасности SQL, состоящих из оценки уязвимостей и расширенной защиты от угроз.

* [Оценка уязвимостей](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment) — это легко настраиваемая служба, которая помогает обнаруживать, отслеживать и устранять потенциальные уязвимости базы данных. Он предоставляет сведения о состоянии безопасности и содержит инструкции по устранению проблем безопасности и улучшению фортификатионс базы данных.
* [Расширенная защита от угроз](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection-overview) обнаруживает аномальные действия, указывающие на необычные и потенциально опасные попытки доступа или использования сервера SQL Server. Она постоянно отслеживает подозрительные действия в базе данных и предоставляет оповещения системы безопасности, ориентированные на действия, для аномальных шаблонов доступа к базам данных. Эти оповещения предоставляют сведения о подозрительном мероприятии и рекомендуемые действия для изучения и устранения угрозы.

## <a name="get-started-with-advanced-data-security-for-sql-on-azure-vms"></a>Приступая к работе с расширенной безопасностью данных для SQL на виртуальных машинах Azure

Следующие шаги помогут вам приступить к работе с расширенной безопасностью данных для SQL на виртуальных машинах Azure в общедоступной предварительной версии.

### <a name="set-up-advanced-data-security-for-sql-on-azure-vms"></a>Настройка расширенной защиты данных для SQL на виртуальных машинах Azure

Включите расширенную защиту данных для серверов SQL на виртуальных машинах на уровне подписки или рабочей области.
 
1. На боковой панели центра безопасности откройте страницу **Параметры цен &** .

1. Выберите подписку или рабочую область, для которой требуется включить расширенную защиту данных для SQL на виртуальных машинах Azure.

1. Установите переключатель для параметра **серверы SQL Server на виртуальной машине (Предварительная версия)** в положение включено. 

    (Щелкните снимок экрана, чтобы развернуть его)

    [![рекомендации и оповещения центра безопасности, как показано в центре администрирования Windows](media/security-center-advanced-iaas-data/sql-servers-on-vms-in-pricing-small.png)](media/security-center-advanced-iaas-data/sql-servers-on-vms-in-pricing-large.png#lightbox)

    Расширенная защита данных для серверов SQL Server будет включена на всех серверах SQL Server, подключенных к выбранной рабочей области, или рабочей области по умолчанию выбранной подписки.

    >[!NOTE]
    > Решение будет активно после первого перезапуска SQL Server. 

Чтобы создать новую рабочую область, следуйте инструкциям в разделе [создание log Analytics рабочей области](https://docs.microsoft.com/azure/azure-monitor/learn/quick-create-workspace).

Чтобы подключить узел SQL Server к рабочей области, следуйте инструкциям в статье [Подключение компьютеров Windows к Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/platform/agent-windows).


## <a name="set-up-email-notification-for-atp-alerts"></a>Настройка уведомлений по электронной почте для оповещений ATP 

Вы можете задать список получателей уведомлений по электронной почте при формировании предупреждений ASC. Сообщение электронной почты содержит прямую ссылку на оповещение в центре безопасности Azure со всеми релевантными сведениями. 

1. Перейдите в **Центр безопасности** > **цены & параметры** и щелкните соответствующую подписку.

    ![Параметры подписки](./media/security-center-advanced-iaas-data/subscription-settings.png)

1. В меню Параметры выберите пункт **уведомления по электронной почте**. 
1. В текстовом поле **адрес электронной почты** введите адреса электронной почты для получения уведомлений. Можно ввести несколько адресов электронной почты, разделив их по запятыми (,).  Например admin1@mycompany.com,admin2@mycompany.comadmin3@mycompany.com

      ![Параметры электронной почты](./media/security-center-advanced-iaas-data/email-settings.png)

1. В параметрах **уведомлений по электронной почте** задайте следующие параметры.
  
    * **Отправлять уведомления по электронной почте о предупреждениях с высоким уровнем серьезности**. вместо отправки сообщений электронной почты для всех оповещений отправляйте сообщения только для оповещений с высоким уровнем серьезности.
    * **Также отправлять уведомления по электронной почте владельцам подписки. Кроме того**, вы можете отправлять уведомления владельцам подписок.

1. В верхней части экрана **уведомлений по электронной почте** нажмите кнопку **сохранить**.

  > [!NOTE]
  > Перед закрытием окна обязательно нажмите кнопку **сохранить** , иначе новые параметры **уведомлений по электронной почте** не будут сохранены.

## <a name="explore-vulnerability-assessment-reports"></a>Просмотр отчетов об оценке уязвимостей

На панели мониторинга "Оценка уязвимостей" представлены общие сведения о результатах оценки во всех базах данных. Можно просмотреть распределение баз данных в соответствии с SQL Server версией, а также сводку по сбоям и переданным базам данных, а также общую сводку сбоев проверок в соответствии с распределением рисков.

Результаты оценки уязвимостей и отчеты можно просмотреть непосредственно в Log Analytics.

1. Перейдите к рабочей области Log Analytics с помощью решения расширенной защиты данных.
1. Перейдите к разделу **решения** и выберите решение для **оценки уязвимостей SQL** .
1. На панели **Сводка** щелкните **Просмотр сводки** и выберите **отчет об оценке уязвимости SQL**.

    ![Отчет о Оценка SQL](./media/security-center-advanced-iaas-data/ads-sql-server-1.png)

    Панель мониторинга отчета загружается. Убедитесь, что для временного интервала задано не менее **последних 7 дней** , поскольку сканирование оценки уязвимостей выполняется в базах данных по фиксированному расписанию в течение семи дней.

    ![Установка за последние 7 дней](./media/security-center-advanced-iaas-data/ads-sql-server-2.png)

1. Чтобы просмотреть дополнительные сведения, щелкните любой из элементов панели мониторинга. Например:

   1. Щелкните проверку уязвимости в разделе " **Сводка по неудачным проверкам** ", чтобы просмотреть log Analytics таблицу с результатами проверки по всем базам данных. Имена, содержащие результаты, перечислены первыми.

   1. Затем щелкните по, чтобы просмотреть сведения о каждой уязвимости, включая описание и влияние уязвимости, состояние, связанный риск и фактические результаты в этой базе данных. Можно также просмотреть фактический запрос, который выполнялся для выполнения этой проверки, и сведения об исправлении для устранения этой уязвимости.

    ![Выбор рабочей области](./media/security-center-advanced-iaas-data/ads-sql-server-3.png)

    ![Выбор рабочей области](./media/security-center-advanced-iaas-data/ads-sql-server-4.png)

1. Вы можете выполнять любые Log Analytics запросы к данным с результатами оценки уязвимостей, чтобы выполнить срез и формирование данных в соответствии с вашими потребностями.

## <a name="advanced-threat-protection-for-sql-servers-on-azure-vms-alerts"></a>Оповещение о расширенной защите от угроз для серверов SQL Server на виртуальных машинах Azure
Предупреждения создаются необычными и потенциально опасными попытками получить доступ к серверам SQL Server или использовать их. Эти события могут активировать создание следующих оповещений.

### <a name="anomalous-access-pattern-alerts-preview"></a>Оповещения о аномальных шаблонах доступа (Предварительная версия)

* **Доступ из необычного расположения:** Это предупреждение активируется при изменении шаблона доступа к SQL Server, когда кто-то вошел в SQL Server из необычного географического расположения. Возможные причины:
    * Злоумышленник или бывший злоумышленник может получить доступ к SQL Server.
    * Законный пользователь получал доступ к SQL Server из нового расположения.
* **Доступ из потенциально опасного приложения.** Это предупреждение активируется, когда доступ к базе данных получают потенциально опасные приложения. Возможные причины:
    * Злоумышленник пытается ваш SQL, используя распространенные средства атаки.
    * Законное тестирование на проникновение в действии.
* **Доступ из незнакомого субъекта.** Это предупреждение активируется при изменении шаблона доступа к серверу SQL, если пользователь вошел на сервер SQL с помощью нестандартного субъекта (пользователя SQL). Возможные причины:
    * Злоумышленник или бывший злоумышленник может получить доступ к SQL Server. 
    * Законный пользователь получал доступ к SQL Server из с помощью нового участника.
* **Подбор учетных данных SQL.** Это предупреждение активируется при большом количестве неудачных попыток входа с разными учетными данными. Возможные причины:
    * Злоумышленник пытается свой SQL с помощью метода подбора.
    * Законное тестирование на проникновение в действии.

### <a name="potential-sql-injection-attacks-supported-in-sql-server-2019"></a>Потенциальные атаки путем внедрения кода SQL (поддерживаются в SQL Server 2019)

* **Уязвимость при внедрении кода SQL**. Это предупреждение активируется, когда приложение создает ошибочную инструкцию SQL в базе данных. Оно может указывать на возможную уязвимость к атакам путем внедрения кода SQL. Возможные причины:
    * Дефект в коде приложения, который создает инструкцию SQL с ошибкой.
    * Код приложения или хранимые процедуры не очищают ввод данных пользователя при создании ошибочной инструкции SQL, которая может быть использована для внедрения кода SQL.
* **Потенциальная атака путем внедрения кода SQL.** Это предупреждение запускается при активном эксплойте идентифицированной уязвимости приложения для внедрения кода SQL. Это означает, что злоумышленник пытается внедрить вредоносные инструкции SQL с помощью кода уязвимого приложения или хранимых процедур.


### <a name="unsafe-command-supported-in-sql-server-2019"></a>Ненадежная команда (поддерживается в SQL Server 2019)

* **Потенциально небезопасное действие**: это оповещение активируется при выполнении команды с высоким уровнем привилегий и потенциально небезопасной. Возможные причины:
    * Команда, рекомендуемая для отключения с целью улучшения безопасности.
    * Злоумышленник пытается воспользоваться правами доступа SQL или повышенными привилегиями.   


## <a name="explore-and-investigate-security-alerts"></a>Просмотр и исследование оповещений системы безопасности

Оповещения системы безопасности данных доступны на странице Оповещения центра безопасности, на вкладке Безопасность ресурса или через прямую ссылку в сообщениях электронной почты с оповещениями.

1. Для просмотра предупреждений:

    * В центре безопасности — щелкните **оповещения системы безопасности** в боковой панели и выберите оповещение.
    * В области ресурсов откройте соответствующую страницу ресурсов и на боковой панели щелкните **Безопасность**. 

1. Оповещения предназначены для автономного выполнения с подробными инструкциями по исправлению и анализом информации в каждом из них. Дополнительные сведения см. в более широком обзоре с помощью другого центра безопасности Azure и возможностей Azure Sentinel:

    * Включите функцию аудита SQL Server для дальнейшего исследования. Если вы являетесь пользователем-Sentinel Azure, вы можете отправить журналы аудита SQL из событий журнала безопасности Windows в метку и наслаждаться богатыми возможностями расследования.
    * Чтобы повысить уровень безопасности, используйте рекомендации центра безопасности для главного компьютера, указанного в каждом оповещении. Это снизит риски, возникающие в будущих атаках. 


## <a name="next-steps"></a>Дальнейшие действия

Связанные материалы см. в следующей статье:

- [Исправление рекомендаций](security-center-remediate-recommendations.md)