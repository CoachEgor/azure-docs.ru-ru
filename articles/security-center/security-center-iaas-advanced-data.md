---
title: Расширенная защита данных для IaaS в центре безопасности Azure | Документация Майкрософт
description: " Узнайте, как включить расширенную защиту данных для IaaS в центре безопасности Azure. "
services: security-center
documentationcenter: na
author: monhaber
manager: barbkess
editor: monhaber
ms.assetid: ba46c460-6ba7-48b2-a6a7-ec802dd4eec2
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/29/2019
ms.author: v-mohabe
ms.openlocfilehash: 0b83575baa2221f0b502abbf919654492c7ab6cf
ms.sourcegitcommit: a8b638322d494739f7463db4f0ea465496c689c6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/17/2019
ms.locfileid: "68295753"
---
# <a name="advanced-data-security-for-sql-servers-on-azure-virtual-machines-public-preview"></a>Расширенная защита данных для серверов SQL Server на виртуальных машинах Azure (общедоступная Предварительная версия)
Расширенная защита данных для серверов SQL Server на виртуальных машинах Azure — это единый пакет для расширенных возможностей обеспечения безопасности SQL. Сейчас (в общедоступной предварительной версии) включает функции для отображая и устранения потенциальных уязвимостей базы данных и обнаружения аномальных действий, которые могут указывать на угрозу для базы данных. 

Это предложение по обеспечению безопасности для виртуальных машин Azure SQL Server основано на той же фундаментальной технологии, которая используется в [пакете расширенной безопасности данных базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-advanced-data-security).


## <a name="overview"></a>Обзор

Расширенная защита данных предоставляет набор расширенных возможностей обеспечения безопасности SQL, состоящих из оценки уязвимостей и расширенной защиты от угроз.

* [Оценка уязвимостей](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment) — это легко настраиваемая служба, которая помогает обнаруживать, отслеживать и устранять потенциальные уязвимости базы данных. Он предоставляет сведения о состоянии безопасности и содержит инструкции по устранению проблем безопасности и улучшению фортификатионс базы данных.
* [Расширенная защита от угроз](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection-overview) обнаруживает аномальные действия, указывающие на необычные и потенциально опасные попытки доступа или использования сервера SQL Server. Она постоянно отслеживает подозрительные действия в базе данных и предоставляет оповещения системы безопасности, ориентированные на действия, для аномальных шаблонов доступа к базам данных. Эти оповещения предоставляют сведения о подозрительном мероприятии и рекомендуемые действия для изучения и устранения угрозы.

## <a name="get-started-with-advanced-data-security-for-sql-on-azure-vms"></a>Приступая к работе с расширенной безопасностью данных для SQL на виртуальных машинах Azure

Следующие шаги помогут вам приступить к работе с расширенной безопасностью данных для SQL на виртуальных машинах Azure в общедоступной предварительной версии.

### <a name="set-up-advanced-data-security-for-sql-on-azure-vms"></a>Настройка расширенной защиты данных для SQL на виртуальных машинах Azure

**Перед началом**: Для хранения анализируемых журналов безопасности требуется рабочая область Log Analytics. Если у вас ее нет, можно легко создать ее, как описано в разделах [создание log Analytics рабочей области в портал Azure](https://docs.microsoft.com/azure/azure-monitor/learn/quick-create-workspace).

1. Подключите виртуальную машину, на которой размещается SQL Server, к рабочей области Log Analytics. Инструкции см. [в разделе Подключение компьютеров Windows к Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/platform/agent-windows).

1. Из Azure Marketplace перейдите к [решению SQL Advanced Data Security](https://ms.portal.azure.com/#create/Microsoft.SQLAdvancedDataSecurity).
(Его можно найти с помощью параметра поиска Marketplace, как показано на следующем рисунке.) Откроется страница **Расширенная защита данных SQL** .

    ![Расширенная защита данных для IaaS](./media/security-center-advanced-iaas-data/sql-advanced-data-security.png)

1. Нажмите кнопку **Создать**. Рабочие области отображаются.

    ![Создание расширенной безопасности данных](./media/security-center-advanced-iaas-data/sql-advanced-data-create.png)

1. Выберите рабочую область, которую нужно использовать, и нажмите кнопку **создать**.

   ![Выбор рабочей области](./media/security-center-advanced-iaas-data/sql-workspace.png)

1. Перезапустите [SQL Server виртуальной машины](https://docs.microsoft.com/sql/database-engine/configure-windows/start-stop-pause-resume-restart-sql-server-services?view=sql-server-2017).


## <a name="explore-and-investigate-security-alerts"></a>Просмотр и исследование оповещений системы безопасности

Вы можете просматривать текущие оповещения системы безопасности и управлять ими.

1. Щелкните**оповещения безопасности** **центра** > безопасности и щелкните оповещение.

    ![Найти оповещение](./media/security-center-advanced-iaas-data/find-alert.png)

1. В столбце " **атаковать ресурс** " щелкните ресурс, который был атакован.

1. Чтобы просмотреть сведения о предупреждении и действия для изучения текущей угрозы и устранения будущих угроз, прокрутите страницу **Общие сведения** и в разделе действия по **исправлению** щелкните ссылку **шаги исследования** .

    ![Действия по исправлению](./media/security-center-advanced-iaas-data/remediation-steps.png)

1. Чтобы просмотреть журналы, связанные с запуском оповещения, перейдите в раздел **рабочие области log Analytics** и выполните следующие действия.

     > [!NOTE]
     > Если **рабочие области log Analytics** не отображаются в меню слева, щелкните **все службы**и выполните поиск **рабочих областей log Analytics**.

    1. Убедитесь, что столбцы отображают **ценовую категорию** и **WorkspaceID** столбцы.  > (**Рабочие области log Analytics**изменяют**столбцы**, добавляют **ценовую категорию** и **WorkspaceID**.)

     ![Изменить столбцы](./media/security-center-advanced-iaas-data/edit-columns.png)

    1. Щелкните рабочую область, в которой находятся журналы оповещений.

    1. В меню **Общие** выберите пункт **журналы** .

    1. Щелкните глаз рядом с таблицей **складванцедсреатпротектион** . Журналы будут перечислены в списке.

     ![Просмотр журналов](./media/security-center-advanced-iaas-data/view-logs.png)

## <a name="set-up-email-notification-for-atp-alerts"></a>Настройка уведомлений по электронной почте для оповещений ATP 

Вы можете задать список получателей уведомлений по электронной почте при формировании предупреждений ASC. Сообщение электронной почты содержит прямую ссылку на оповещение в центре безопасности Azure со всеми релевантными сведениями. 

1. Перейдите в раздел "цены **центра** > безопасности" **& "Параметры** " и щелкните соответствующую подписку.

    ![Параметры подписки](./media/security-center-advanced-iaas-data/subscription-settings.png)

1. В меню **Параметры** выберите пункт **уведомления по электронной почте**. 
1. В текстовом поле **адрес электронной почты** введите адреса электронной почты для получения уведомлений. Можно ввести несколько адресов электронной почты, разделив их по запятыми (,).  admin1@mycompany.comНапримерadmin2@mycompany.com,admin3@mycompany.com

      ![Параметры электронной почты](./media/security-center-advanced-iaas-data/email-settings.png)

1. В параметрах **уведомлений по электронной почте** задайте следующие параметры.
  
    * **Отправлять уведомления по электронной почте о предупреждениях высокого уровня серьезности**: Вместо отправки сообщений электронной почты для всех предупреждений отправляйте их только для оповещений с высоким уровнем серьезности.
    * **Также отправлять уведомления по электронной почте владельцам подписки**:  Также отправляйте уведомления владельцам подписок.

1. В верхней части экрана **уведомлений по электронной почте** нажмите кнопку **сохранить**.

  > [!NOTE]
  > Перед закрытием окна обязательно нажмите кнопку **сохранить** , иначе новые параметры **уведомлений по электронной почте** не будут сохранены.

## <a name="explore-vulnerability-assessment-reports"></a>Просмотр отчетов об оценке уязвимостей

На панели мониторинга "Оценка уязвимостей" представлены общие сведения о результатах оценки во всех базах данных. Можно просмотреть распределение баз данных в соответствии с SQL Server версией, а также сводку по сбоям и переданным базам данных, а также общую сводку сбоев проверок в соответствии с распределением рисков.

Результаты оценки уязвимостей и отчеты можно просмотреть непосредственно в Log Analytics.

1. Перейдите к рабочей области Log Analytics с помощью решения расширенной защиты данных.
1. Перейдите к разделу **решения** и выберите решение для **оценки уязвимостей SQL** .
1. На панели **Сводка** щелкните **Просмотр сводки** и выберите **отчет об оценке уязвимости SQL**.

    ![Отчет о Оценка SQL](./media/security-center-advanced-iaas-data/ads-sql-server-1.png)

    Панель мониторинга отчета загружается. Убедитесь, что для временного интервала задано не менее **последних 7 дней** , поскольку сканирование оценки уязвимостей выполняется в базах данных по фиксированному расписанию в течение 7 дней.

    ![Установка за последние 7 дней](./media/security-center-advanced-iaas-data/ads-sql-server-2.png)

1. Чтобы просмотреть дополнительные сведения, щелкните любой из элементов панели мониторинга. Пример:

   1. Щелкните проверку уязвимости в разделе " **Сводка** по неудачным проверкам", чтобы просмотреть log Analytics таблицу с результатами проверки по всем базам данных. Имена, содержащие результаты, перечислены первыми.

   1. Затем щелкните по, чтобы просмотреть сведения о каждой уязвимости, включая описание и влияние уязвимости, состояние, связанный риск и фактические результаты в этой базе данных. Можно также просмотреть фактический запрос, который выполнялся для выполнения этой проверки, и сведения об исправлении для устранения этой уязвимости.

    ![Выбор рабочей области](./media/security-center-advanced-iaas-data/ads-sql-server-3.png)

    ![Выбор рабочей области](./media/security-center-advanced-iaas-data/ads-sql-server-4.png)

1. Вы можете выполнять любые Log Analytics запросы к данным с результатами оценки уязвимостей, чтобы выполнить срез и формирование данных в соответствии с вашими потребностями.

## <a name="advanced-threat-protection-for-sql-servers-on-azure-vms-alerts"></a>Оповещение о расширенной защите от угроз для серверов SQL Server на виртуальных машинах Azure
Предупреждения создаются необычными и потенциально опасными попытками получить доступ к серверам SQL Server или использовать их. Эти события могут активировать создание следующих оповещений.

### <a name="anomalous-access-pattern-alerts-supported-in-public-preview"></a>Предупреждения о аномальных шаблонах доступа (поддерживаются в общедоступной предварительной версии)

* **Доступ из необычного расположения:** Это предупреждение появляется при изменении способа доступа к серверу SQL, если пользователь вошел на сервер SQL из необычного географического расположения. Возможные причины:
     * Злоумышленник или бывший злоумышленник может получить доступ к SQL Server.
     * Законный пользователь получал доступ к SQL Server из нового расположения.
* **Доступ из потенциально опасного приложения**. его оповещение активируется, когда потенциально опасное приложение используется для доступа к базе данных. Возможные причины:
     * Злоумышленник пытается ваш SQL, используя распространенные средства атаки.
     * Законное тестирование на проникновение в действии.
* **Доступ из незнакомого субъекта**. Это предупреждение появляется при изменении способа доступа к серверу SQL, если пользователь вошел на сервер SQL с помощью необычного субъекта (пользователя SQL). Возможные причины:
     * Злоумышленник или бывший злоумышленник может получить доступ к SQL Server. 
     * Законный пользователь получал доступ к SQL Server из с помощью нового участника.
* **Подбор учетных данных SQL.** Это предупреждение появляется при большом количестве неудачных попыток входа с разными учетными данными. Возможные причины:
     * Злоумышленник пытается свой SQL с помощью метода подбора.
     * Законное тестирование на проникновение в действии.

### <a name="potential-sql-injection-attacks-coming"></a>Потенциальные атаки путем внедрения кода SQL (поступающие)

* **Уязвимость к атакам путем внедрения кода SQL.** Это предупреждение появляется, если приложение создает в базе данных инструкцию SQL с ошибкой. Оно может указывать на возможную уязвимость к атакам путем внедрения кода SQL. Возможные причины:
     * Дефект в коде приложения, который создает инструкцию SQL с ошибкой.
     * Код приложения или хранимые процедуры не очищают ввод данных пользователя при создании ошибочной инструкции SQL, которая может быть использована для внедрения кода SQL.
* **Потенциальная атака путем внедрения кода SQL.** Это предупреждение появляется при обнаружении активного эксплойта определенной уязвимости приложения к внедрению кода SQL. Это означает, что злоумышленник пытается внедрить вредоносные инструкции SQL с помощью кода уязвимого приложения или хранимых процедур.
