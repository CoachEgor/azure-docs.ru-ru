---
title: Создание настраиваемых политик безопасности в центре безопасности Azure | Документация Майкрософт
description: Определения настраиваемых политик Azure, отслеживаемые центром безопасности Azure.
services: security-center
author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: conceptual
ms.date: 04/22/2020
ms.author: memildin
ms.openlocfilehash: d703ea38c39ed556102271ac0cf9a609ce449bc3
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82195924"
---
# <a name="using-custom-security-policies"></a>Использование настраиваемых политик безопасности

Для защиты систем и среды центр безопасности Azure создает рекомендации по безопасности. Эти рекомендации основаны на рекомендациях отрасли, которые включены в общую политику безопасности по умолчанию, предоставляемую всем клиентам. Они также могут поступать из знаний центра безопасности о отраслевых и нормативных стандартах.

С помощью этой функции можно добавить собственные *пользовательские* инициативы. Вы получите рекомендации, если ваша среда не соответствует созданным политикам. Все созданные вами пользовательские инициативы будут отображаться рядом со встроенными инициативами на панели мониторинга соответствия нормативным требованиям, как описано в руководстве [улучшение соответствия нормативным требованиям](security-center-compliance-dashboard.md).

Как описано в [документации по политике Azure](https://docs.microsoft.com/azure/governance/policy/concepts/definition-structure#definition-location), при указании расположения для пользовательской инициативы она должна быть группой управления или подпиской. 

## <a name="to-add-a-custom-initiative-to-your-subscription"></a>Добавление пользовательской инициативы в подписку 

1. На боковой панели центра безопасности откройте страницу **Политика безопасности** .

1. Выберите подписку или группу управления, к которым вы хотите добавить пользовательскую инициативу.

    [![Выбор подписки, для которой создается настраиваемая политика](media/custom-security-policies/custom-policy-selecting-a-subscription.png)](media/custom-security-policies/custom-policy-selecting-a-subscription.png#lightbox)

    > [!NOTE]
    > Для оценки и отображения в центре безопасности необходимо добавить пользовательские стандарты на уровне подписки (или выше). 
    >
    > При добавлении пользовательского стандарта ему назначается *инициатива* для этой области. Поэтому рекомендуется выбрать самую широкую область, необходимую для этого назначения.

1. На странице Политика безопасности в разделе Пользовательские инициативы щелкните **добавить пользовательскую инициативу**.

    [![Щелкните * * Добавить пользовательскую инициативу * *](media/custom-security-policies/custom-policy-add-initiative.png)](media/custom-security-policies/custom-policy-add-initiative.png#lightbox)

    Появится следующая страница:

    ![Создание или Добавление политики](media/custom-security-policies/create-or-add-custom-policy.png)

1. На странице Добавление пользовательских инициатив проверьте список пользовательских политик, уже созданных в Организации. Если вы видите, что вы хотите назначить своей подписке, нажмите кнопку **Добавить**. Если в списке нет инициативы, удовлетворяющей вашим потребностям, пропустите этот шаг.

1. Чтобы создать новую пользовательскую инициативу, выполните следующие действия.

    1. Щелкните **создать**.
    1. Введите расположение и имя определения.
    1. Выберите политики для включения и нажмите кнопку **Добавить**.
    1. Введите необходимые параметры.
    1. Выберите команду **Сохранить**.
    1. На странице Добавление пользовательских инициатив нажмите кнопку Обновить. Новая инициатива будет отображаться как доступная.
    1. Щелкните **Добавить** и назначьте его подписке.

    > [!NOTE]
    > Для создания новых инициатив требуются учетные данные владельца подписки. Дополнительные сведения о ролях Azure см. [в разделе разрешения в центре безопасности Azure](security-center-permissions.md).

    Новая инициатива вступает в силу, и вы можете увидеть влияние на следующие два способа:

    * На боковой панели центр безопасности в разделе Политика & соответствие выберите **соответствие нормативным требованиям**. Откроется панель мониторинга соответствия для отображения новой пользовательской инициативы вместе со встроенными инициативами.
    
    * Вы начнете получать рекомендации, если ваша среда не соответствует заданным политикам.

1. Чтобы просмотреть итоговые рекомендации для политики, щелкните **рекомендации** на боковой панели, чтобы открыть страницу рекомендации. Рекомендации будут отображаться с "настраиваемой" меткой и будут доступны примерно в течение одного часа.

    [![Настраиваемые рекомендации](media/custom-security-policies/custom-policy-recommendations.png)](media/custom-security-policies/custom-policy-recommendations-in-context.png#lightbox)

## <a name="enhancing-your-custom-recommendations-with-detailed-information"></a>Усовершенствование пользовательских рекомендаций с подробными сведениями

Встроенные рекомендации, предоставляемые центром безопасности Azure, включают такие сведения, как уровни серьезности и инструкции по исправлению. Если вы хотите добавить эти сведения в пользовательские рекомендации, чтобы они появлялись в портал Azure или при любом доступе к рекомендациям, необходимо использовать REST API. 

Ниже приведены два типа сведений, которые можно добавить.

- **Ремедиатиондескриптион** — строка
- **Серьезность** — перечисление [низкий, средний, высокий]

Метаданные должны быть добавлены в определение политики для политики, которая является частью пользовательской инициативы. Он должен находиться в свойстве "Секуритицентер", как показано ниже.

```json
 "metadata": {
    "securityCenter": {
        "RemediationDescription": "Custom description goes here",
        "Severity": "High",
    },
```

Ниже приведен пример настраиваемой политики, включая свойство Metadata/Секуритицентер.

  ```json
  {
"properties": {
    "displayName": "Security - ERvNet - AuditRGLock",
    "policyType": "Custom",
    "mode": "All",
    "description": "Audit required resource groups lock",
    "metadata": {
        "securityCenter": {
            "remediationDescription": "Resource Group locks can be set via Azure Portal -> Resource Group -> Locks",
            "severity": "High",
        },
    },
    "parameters": {
        "expressRouteLockLevel": {
            "type": "String",
            "metadata": {
                "displayName": "Lock level",
                "description": "Required lock level for ExpressRoute resource groups."
            },
            "allowedValues": [
                "CanNotDelete",
                "ReadOnly"
            ]
        }
    },
    "policyRule": {
        "if": {
            "field": "type",
            "equals": "Microsoft.Resources/subscriptions/resourceGroups"
        },
        "then": {
            "effect": "auditIfNotExists",
            "details": {
                "type": "Microsoft.Authorization/locks",
                "existenceCondition": {
                    "field": "Microsoft.Authorization/locks/level",
                    "equals": "[parameters('expressRouteLockLevel')]"
                }
            }
        }
    }
}
}
  ```

Еще один пример использования свойства Секуритицентер см. [в этом разделе документации по REST API](https://docs.microsoft.com/rest/api/securitycenter/assessmentsmetadata/createinsubscription#examples).


## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы узнали, как создавать пользовательские политики безопасности. 

Другие связанные материалы см. в следующих статьях: 

- [Общие сведения о политиках безопасности](tutorial-security-policy.md)
- [Список встроенных политик безопасности](security-center-policy-definitions.md)