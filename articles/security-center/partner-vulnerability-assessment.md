---
title: Средства проверки уязвимости партнеров в центре безопасности Azure
description: Центр безопасности Azure поддерживает интеграцию решений по оценке уязвимостей сторонних производителей. В этой статье описывается, как настроить эти средства.
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 12/13/2019
ms.author: memildin
ms.openlocfilehash: ac68e5a91f72954ce54892f22ab5ba3a7a593bbf
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "82611438"
---
# <a name="deploying-a-partner-vulnerability-scanning-solution"></a>Развертывание решения для поиска уязвимостей партнеров

Если вы используете уровень "Стандартный", вы можете использовать встроенное средство оценки уязвимостей центра безопасности Azure, как описано в статье [Встроенная программа проверки уязвимостей для виртуальных машин](built-in-vulnerability-assessment.md). Этому средству не требуется лицензия Qualys или даже учетная запись Qualys — все, что полностью обрабатывалось в центре безопасности.

Кроме того, может потребоваться развернуть собственное решение для оценки уязвимости с частным лицензированием с [Qualys](https://www.qualys.com/lp/azure) или [Rapid7](https://www.rapid7.com/products/insightvm/). Одно из этих решений партнеров можно установить на нескольких виртуальных машинах, принадлежащих одной подписке.

## <a name="configuring-a-partner-solution-in-the-azure-portal"></a>Настройка партнерского решения (в портал Azure)

1. На панели мониторинга **центра безопасности** в разделе **Обзор** щелкните **Рекомендации**.

1. На странице **рекомендации** выберите **решение для оценки уязвимостей должно быть установлено на виртуальных машинах**.

    ![Оценка уязвимостей](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig1-new.png)

1. На странице **решения для оценки уязвимостей на виртуальной машине** выберите виртуальные машины, на которых необходимо установить решение для оценки уязвимостей.

    ![Страница "Добавление решения по оценке уязвимостей"](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig2-new.png)

1. На странице **решения для оценки уязвимостей на виртуальных машинах** щелкните **установить на 2 виртуальных** машинах (имя может отличаться в зависимости от числа выбранных виртуальных машин):

    ![Страница "Добавление решения для оценки уязвимостей"](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig3-new.png)

1. Вы можете создать решение для оценки уязвимостей или использовать имеющееся. При создании решения для оценки уязвимостей вы можете выбрать решение партнера в **Azure Marketplace**. Или выберите **Qualys** либо **Rapid7** в разделе **Использование существующего решения**.

    Чтобы развернуть агент из центра безопасности, требуется лицензионный код и открытый ключ от поставщика. Сведения о том, как получить лицензионный код и открытый ключ, см. в документации по [Qualys](https://community.qualys.com/docs/DOC-5823-deploying-qualys-cloud-agents-from-microsoft-azure-security-center) и [Rapid7](https://insightvm.help.rapid7.com/docs/azure-security-center).


1. Чтобы создать новую оценку, щелкните **создать**. Откроется страница **управления уязвимостью** партнера. Параметры на этой странице могут отличаться для разных партнеров.

    ![Создание нового решения для оценки уязвимостей](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig4-new.png)

    Чтобы настроить Qualys (например,), выберите **Qualys** , а затем:
    
    1. Для параметра **Группа ресурсов** выберите **Использовать существующий**.
    
    1. В поле **Расположение** укажите, где это решение будет располагаться географически.
    
    1. Введите предоставленный партнером номер лицензии в поле **Код лицензии** (это поле отображается для решения Qualys).
    
    1. В поле **Открытый ключ** (это поле отображается для решения Qualys) введите открытый ключ, предоставленный партнером.
    
    1. Чтобы автоматически установить агент оценки уязвимостей на всех обнаруженных виртуальных машинах в подписке этого решения Qualys, установите флажок **Автоматическое обновление** .
    
    1. Нажмите кнопку **ОК**.


## <a name="configuring-a-partner-solution-using-powershell-and-the-rest-api"></a>Настройка партнерского решения (с помощью PowerShell и REST API)

Чтобы программно развернуть решение для оценки уязвимости с частным лицензированием из [Qualys](https://www.qualys.com/lp/azure) или [Rapid7](https://www.rapid7.com/products/insightvm/), используйте предоставляемый скрипт [PowerShell > уязвимости](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution). 

Этот сценарий использует REST API для создания нового решения безопасности в ASC. Для решения требуется лицензия и ключ, предоставляемые поставщиком услуг: Qualys или Rapid7.

> [!IMPORTANT] 
> Для каждой лицензии можно создать только одно решение. Попытка создать другое решение с тем же именем, лицензией или ключом завершится ошибкой.

### <a name="prerequisites"></a>Предварительные требования

Необходимые модули PowerShell:

- Install — Module AZ
- Install-Module AZ. Security

### <a name="running-the-script"></a>Запуск скрипта

Чтобы запустить сценарий, вам понадобятся соответствующие сведения для указанных ниже параметров.

| **Параметр** | **Обязательное** | **Примечания** |
|----|:----:|----|
|**Подписки**|✔|Идентификатор подписки Azure, содержащий ресурсы, которые необходимо проанализировать.|
|**ResourceGroupName**|✔|Имя группы ресурсов. Используйте любую существующую группу ресурсов, включая значение по умолчанию ("Дефаултресаурцеграуп-XXX"). Так как решение не является ресурсом Azure, оно не будет указано в группе ресурсов, но к нему можно присоединиться.|
|**васолутионнаме**|✔|Имя нового решения.|
|**ватипе**|✔|Qualys или Rapid7.|
|**лиценцекоде**|✔|Предоставленная поставщиком строка лицензии.|
|**publicKey**|✔|Поставщик предоставил открытый ключ.|
|**autoUpdate**|-|Включите (true) или отключите (false) автоматическое развертывание для этого решения ва. Если этот параметр включен, каждая новая виртуальная машина в подписке будет автоматически пытаться установить связь с решением.<br/>(По умолчанию: false)|


Синтаксис:

```
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenceCode <License code from vendor> -publicKey <Public Key received from vendor>
```

Пример (этот пример не содержит допустимые сведения о лицензии):

```
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenceCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```


## <a name="review-the-recommendation"></a>Просмотр рекомендаций
После установки решения для оценки уязвимостей на целевой виртуальной машине центр безопасности сканирует виртуальную машину для обнаружения и выявления уязвимостей в системе и приложении.

> [!NOTE]
> При первом запуске этот процесс может занять несколько часов. Затем он будет выполняться в течение часа.

Обнаруженные проблемы отображаются в разделе **рекомендации по виртуальным машинам**.

## <a name="next-steps"></a>Дальнейшие действия

В этой статье описывается встроенное средство оценки уязвимостей на платформе Qualys для проверки виртуальных машин. Связанные материалы см. в следующих статьях:

- [Узнайте о различных элементах рекомендации](security-center-recommendations.md)
- [Узнайте, как выполнять рекомендации](security-center-remediate-recommendations.md)