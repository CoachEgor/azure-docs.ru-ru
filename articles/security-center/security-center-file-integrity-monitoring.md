---
title: Мониторинг целостности файлов в центре безопасности Azure | Документы Майкрософт
description: " Узнайте, как включить мониторинг целостности файлов в центре безопасности Azure. "
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.assetid: 411d7bae-c9d4-4e83-be63-9f2f2312b075
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/13/2019
ms.author: memildin
ms.openlocfilehash: f7f5c257b23cd273a2cda40f874f5edfc62c0dbd
ms.sourcegitcommit: 8a717170b04df64bd1ddd521e899ac7749627350
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/23/2019
ms.locfileid: "71202196"
---
# <a name="file-integrity-monitoring-in-azure-security-center"></a>Мониторинг целостности файлов в центре безопасности Azure
В этом руководстве объясняется, как настроить мониторинг целостности файлов в центре безопасности Azure.

## <a name="what-is-fim-in-security-center"></a>Что такое FIM в центре безопасности?
Функция мониторинга целостности файлов (FIM), также называется мониторингом изменений, анализирует файлы и реестры в операционной системе, приложениях и других компонентах, чтобы обнаруживать потенциальные атаки. Метод сравнения позволяет определить, отличается ли текущее состояние файла от состояния на момент последней проверки. Такое сравнение позволяет узнать, вносились ли в файлы допустимые или подозрительные изменения.

Функция мониторинга целостности файлов в центре безопасности проверяет целостность файлов Windows, реестра Windows и файлов Linux. Вы можете самостоятельно выбрать, какие файлы будет отслеживать FIM. Центр обеспечения безопасности отслеживает следующие действия для всех файлов, для которых активирован FIM:

- создание и удаление файлов и разделов реестра;
- изменение файлов (изменения размера файла, списков управления доступом или хэша содержимого);
- изменение реестра (изменения размера, списков управления доступом, типа или содержимого).

Центр безопасности Майкрософт предоставляет рекомендации о том, для каких сущностей вы можете легко включить FIM. Вы всегда можете определить собственные политики FIM и выбрать сущности для мониторинга. В этом пошаговом руководстве объясняется, как это сделать.

> [!NOTE]
> Функция FIM работает для компьютеров и виртуальных машин под управлением Windows или Linux. Она доступна в центре обеспечения безопасности уровня "Стандартный". Дополнительные сведения о ценовых категориях центра безопасности см. на странице [Цены](security-center-pricing.md). FIM передает данные в рабочую область Log Analytics. За эту операцию взимается плата, размер которой зависит от объема передаваемых данных. Дополнительные сведения см. на [странице цен на Log Analytics](https://azure.microsoft.com/pricing/details/log-analytics/).

FIM использует решение "Отслеживание изменений" Azure, чтобы отслеживать и обнаруживать изменения в среде. При включенном мониторинге целостности файлов имеется **Отслеживание изменений** ресурс типа **решение**. Сведения о частоте сбора данных см. в разделе [Отслеживание изменений сведения о сборе данных](https://docs.microsoft.com/azure/automation/automation-change-tracking#change-tracking-data-collection-details) для отслеживание изменений Azure.

> [!NOTE]
> При удалении **Отслеживание изменений** ресурса также будет отключена функция мониторинга целостности файлов в центре безопасности.

## <a name="which-files-should-i-monitor"></a>Для каких файлов нужно применять мониторинг?
В первую очередь для мониторинга следует выбирать файлы, которые критически важны для системы и приложений. Обратите внимание на те файлы, которые не должны меняться без предварительного планирования. Если вы выберете такие файлы, которые часто изменяются приложениями или операционной системой (например, файлы журналов и текстовые файлы), большой объем лишней информации усложнит выявление атак.

Центр безопасности предлагает рекомендации по выбору файлов для мониторинга по умолчанию, исходя из информации об известных шаблонах атаках, затрагивающих файлы и реестр.

## <a name="using-file-integrity-monitoring"></a>Использование мониторинга целостности файлов
1. Откройте панель мониторинга **центра безопасности**.
2. В разделе **Расширенная защита облака** на панели слева выберите **Мониторинг целостности файлов**.
![Панель мониторинга центра безопасности][1]

Откроется панель **Мониторинг целостности файлов**.
  ![Панель мониторинга центра безопасности][2]

Для каждой рабочей области предоставляется следующая информация:

- общее число изменений за последнюю неделю (символ дефиса "-" означает, что FIM не включен для этой рабочей области);
- общее число компьютеров и виртуальных машин, передающих сведения в эту рабочую область;
- географическое расположение рабочей области;
- подписка Azure, к которой относится рабочая область.

Также для рабочей области могут отображаться следующие кнопки:

- ![Значок включения][3] Указывает, что FIM не включен для этой рабочей области. Выбрав рабочую область, вы можете включить FIM для всех компьютеров в ней.
- ![Значок обновления плана][4] Указывает, что для этой рабочей области (или для этой подписки) не используется центр безопасности уровня "Стандартный". Чтобы использовать функцию FIM, для подписки требуется уровень "Стандартный".  Выбрав рабочую область, вы можете обновить ее до уровня "Стандартный". Дополнительные сведения об уровне "Стандартный" и способах обновления см. в статье [Обновление центра безопасности до уровня "Стандартный"](security-center-pricing.md).
- Отсутствие кнопок означает, что функция FIM уже включена для этой рабочей области.

В разделе **Мониторинг целостности файлов** вы можете выбрать рабочую область, а затем включить для нее FIM, открыть панель мониторинга целостности файлов для этой рабочей области или [обновить](security-center-pricing.md) рабочую область до уровня "Стандартный".

## <a name="enable-fim"></a>Включение FIM
Чтобы включить FIM для рабочей области, выполните следующие действия:

1. В разделе **Мониторинг целостности файлов** выберите рабочую область, нажав кнопку **Включить**.
2. Откроется страница **Включить мониторинг целостности файлов**, где указано также число компьютеров Windows и Linux в этой рабочей области.

   ![Включение мониторинга целостности файлов][5]

   Также здесь приводятся рекомендуемые параметры для Windows и Linux.  Разверните узлы **Файлы Windows**, **Реестр** и **Файлы Linux**, чтобы просмотреть полный список рекомендаций.

3. Снимите флажки для всех сущностей из списка рекомендованных, для которых вы не намерены применять FIM.
4. Выберите **Применение мониторинга целостности файлов**, чтобы включить FIM.

> [!NOTE]
> Эти параметры вы можете изменить в любое время. Дополнительные сведения см. в разделе "Изменение списка отслеживаемых сущностей" далее в этой статье.
>
>

## <a name="view-the-fim-dashboard"></a>Просмотр панели мониторинга FIM
Панель **мониторинга целостности файлов** отображается для рабочих областей с включенной функцией FIM. Панель мониторинга FIM открывается, когда вы включаете FIM для рабочей области или выбираете в окне **Мониторинг целостности файла** рабочую область, для которого уже включен FIM.

![Панель мониторинга целостности файлов][6]

На панели мониторинга FIM для рабочей области отображаются следующие данные:

- общее число компьютеров, подключенных к рабочей области;
- общее число изменений, произошедших за выбранный период времени;
- разбивка изменений по типам (файлы, реестр);
- разбивка изменений по категориям (изменение, добавление, удаление).

Выбрав "Фильтр" в верхней части панели мониторинга, вы можете настроить период времени, за который отображаются изменения.

![Фильтр по периоду времени][7]

Вкладка **Компьютеры** (представлена выше) содержит полный список компьютеров, передающих сведения в эту рабочую область. Для каждого компьютера на панели мониторинга предоставляются такие сведения:

- число изменений, произошедших за выбранный период времени;
- разбивка изменений на изменения файлов и реестра.

**Поиск по журналам** открывается, когда вы вводите имя компьютера в поле поиска или выбираете компьютер на вкладке "Компьютеры". Поиск по журналам отображает все изменения, внесенные на этом компьютере за выбранный период времени. Вы можете развернуть любое изменение, чтобы получить дополнительную информацию.

![Поиск по журналу][8]

Вкладка **Изменения** (см. ниже) содержит список всех изменений в рабочей области за выбранный период времени. Для каждой сущности, в которой произошли изменения, на панели мониторинга отображается следующее:

- идентификатор компьютера, на котором произошло изменение;
- тип изменения (реестр или файл);
- категория изменения (изменено, добавлено, удалено);
- дата и время изменения.

![Изменения для рабочей области][9]

Страница **Сведения об изменении** открывается, когда вы вводите изменение в поле поиска или выбираете сущность из списка на вкладке **Изменения**.

![Сведения об изменении][10]

## <a name="edit-monitored-entities"></a>Изменение списка отслеживаемых сущностей

1. Вернитесь к **панели мониторинга целостности файлов** и выберите **Параметры**.

   ![Настройки][11]

   Откроется окно **Конфигурация рабочей области** с тремя вкладками: **Реестр Windows**, **Файлы Windows** и **Файлы Linux**. На каждой вкладке перечислены сущности, которые можно изменять для этой категории. Для каждой сущности центр безопасности предоставляет информацию о том, включена ли для нее функция FIM (true или false).  Редактирование сущности позволяет включить или отключить для нее функцию FIM.

   ![Конфигурация рабочих областей][12]

2. Выберите защиту идентификации. В этом примере мы выбрали элемент из вкладки "Реестр Windows". Открывается окно **Изменение реестра Windows для отслеживания изменений**.

   ![Изменение реестра Windows для отслеживания изменений][13]

В окне **Изменение реестра Windows для отслеживания изменений** вы можете сделать следующее:

- включить (True) или отключить (False) мониторинг целостности файлов;
- назначить или изменить имя сущности;
- указать или изменить значение или путь;
- удалить сущность, отменить изменения или сохранить изменения.

## <a name="add-a-new-entity-to-monitor"></a>Добавление новой сущности для мониторинга
1. Вернитесь к **панели мониторинга целостности файлов** и выберите **Параметры** в верхней части страницы. Откроется страница **Конфигурация рабочей области**.
2. На странице **Конфигурация рабочей области** перейдите на вкладку, соответствующую типу добавляемой сущности: "Реестр Windows", "Файлы Windows" или "Файлы Linux". В нашем примере выбран вариант **Файлы Linux**.

   ![Добавление нового элемента для мониторинга][14]

3. Выберите **Добавить**. Открывается окно **Добавление файла Linux для отслеживания изменений**.

   ![Ввод требуемых сведений][15]

4. На странице **добавления** введите требуемую информацию и выберите **Сохранить**.

## <a name="disable-monitored-entities"></a>Отключение отслеживаемых сущностей
1. Вернитесь на **панель мониторинга целостности файлов**.
2. Выберите рабочую область, для которой включена функция FIM. Рабочие области, для которых включена эта функция, можно определить по отсутствию кнопок включения и обновления плана.

   ![Выбор рабочей области, для которой включен FIM][16]

3. На странице мониторинга целостности файлов выберите **Параметры**.

   ![Выбор элемента "Параметры"][17]

4. На странице **Конфигурация рабочей области** выберите группу, для которой в столбце **Включено** отображается значение True.

   ![Конфигурация рабочей области][18]

5. В окне **Изменение файла Windows для отслеживания изменений** измените параметр **Включено**, установив значение False.

   ![Присвоение значения False параметру "Включено"][19]

6. Щелкните **Сохранить**.

## <a name="folder-and-path-monitoring-using-wildcards"></a>Мониторинг папки и пути мониторинга с использованием подстановочных знаков

Используйте подстановочные знаки для упрощения отслеживания в каталогах. При настройке мониторинга папки с использованием подстановочных знаков применяются следующие правила:
-   Для отслеживания нескольких файлов необходимы подстановочные знаки.
-   Подстановочные знаки можно использовать только в последнем сегменте пути, например C:\folder\file или /etc/*.conf.
-   Если у переменной среды недопустимый путь, проверка будет успешной, но запуск ресурса по этому пути завершится сбоем.
-   При настройке пути избегайте общих путей, таких как c:\*.*, так как это приведет к переходу к большому количеству папок.

## <a name="disable-fim"></a>Отключение FIM
Вы всегда можете отключить FIM. FIM использует решение "Отслеживание изменений" Azure, чтобы отслеживать и обнаруживать изменения в среде. После отключения FIM решение для отслеживания изменений будет удалено из выбранной рабочей области.

1. Чтобы отключить FIM, вернитесь на **панель мониторинга целостности файлов**.
2. Выберите рабочую область.
3. В разделе **Мониторинг целостности файлов** выберите **Отключить**.

   ![Отключение FIM][20]

4. Выберите **Удалить** для отключения.

## <a name="next-steps"></a>Следующие шаги
Из этой статьи вы узнали, как использовать мониторинг целостности файла в центре безопасности. Дополнительные сведения о Центре безопасности см. в следующих статьях:

* [Настройка политик безопасности](tutorial-security-policy.md). Узнайте, как настроить политики безопасности для подписок и групп ресурсов Azure.
* [Рекомендации по управлению безопасностью](security-center-recommendations.md) — сведения об использовании рекомендаций для защиты ресурсов Azure.
* [Мониторинг работоспособности системы безопасности](security-center-monitoring.md) — сведения об отслеживании работоспособности ресурсов Azure.
* [Управление оповещениями о безопасности](security-center-managing-and-responding-alerts.md). Узнайте, как управлять оповещениями системы безопасности и реагировать на них.
* [Мониторинг решений партнеров](security-center-partner-solutions.md). Узнайте, как отслеживать работоспособность решений партнеров.
* [Центр безопасности: часто задаваемые вопросы](security-center-faq.md). Часто задаваемые вопросы об использовании этой службы.
* [Блог по безопасности Azure](https://blogs.msdn.com/b/azuresecurity/)— последние новости и информация об обеспечении безопасности в Azure.

<!--Image references-->
[1]: ./media/security-center-file-integrity-monitoring/security-center-dashboard.png
[2]: ./media/security-center-file-integrity-monitoring/file-integrity-monitoring.png
[3]: ./media/security-center-file-integrity-monitoring/enable.png
[4]: ./media/security-center-file-integrity-monitoring/upgrade-plan.png
[5]: ./media/security-center-file-integrity-monitoring/enable-fim.png
[6]: ./media/security-center-file-integrity-monitoring/fim-dashboard.png
[7]: ./media/security-center-file-integrity-monitoring/filter.png
[8]: ./media/security-center-file-integrity-monitoring/log-search.png
[9]: ./media/security-center-file-integrity-monitoring/changes-tab.png
[10]: ./media/security-center-file-integrity-monitoring/change-details.png
[11]: ./media/security-center-file-integrity-monitoring/fim-dashboard-settings.png
[12]: ./media/security-center-file-integrity-monitoring/workspace-config.png
[13]: ./media/security-center-file-integrity-monitoring/edit.png
[14]: ./media/security-center-file-integrity-monitoring/add.png
[15]: ./media/security-center-file-integrity-monitoring/add-item.png
[16]: ./media/security-center-file-integrity-monitoring/fim-dashboard-disable.png
[17]: ./media/security-center-file-integrity-monitoring/fim-dashboard-settings-disabled.png
[18]: ./media/security-center-file-integrity-monitoring/workspace-config-disable.png
[19]: ./media/security-center-file-integrity-monitoring/edit-disable.png
[20]: ./media/security-center-file-integrity-monitoring/disable-fim.png
