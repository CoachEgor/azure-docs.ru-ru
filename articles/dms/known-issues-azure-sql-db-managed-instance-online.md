---
title: Известные проблемы и ограничения при оперативной миграции в Azure SQL Управляемый экземпляр
description: Узнайте об известных проблемах и ограничениях миграции, связанных с оперативными миграциями в Azure SQL Управляемый экземпляр.
services: database-migration
author: pochiraju
ms.author: rajpo
manager: craigg
ms.reviewer: craigg
ms.service: dms
ms.workload: data-services
ms.custom: mvc
ms.topic: troubleshooting
ms.date: 02/20/2020
ms.openlocfilehash: 6393624cb4520ccd28dff41dd97746873bc13f59
ms.sourcegitcommit: 32c521a2ef396d121e71ba682e098092ac673b30
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91330304"
---
# <a name="known-issuesmigration-limitations-with-online-migrations-to-azure-sql-managed-instance"></a>Известные проблемы и ограничения миграции при оперативной миграции на Azure SQL Управляемый экземпляр

Ниже описаны известные проблемы и ограничения, связанные с миграцией в сети с SQL Server на Управляемый экземпляр SQL Azure.

> [!IMPORTANT]
> Миграция SQL Server в базу данных SQL Azure в сети, перенос SQL_variant типов данных не поддерживается.

## <a name="backup-requirements"></a>Требования к резервному копированию

- **Резервные копии с контрольной суммой**

    Azure Database Migration Service использует метод резервного копирования и восстановления для переноса локальных баз данных в Управляемый экземпляр SQL. Azure Database Migration Service поддерживает только резервные копии, созданные с использованием контрольной суммы.

    [Включение или отключение контрольных сумм резервных копий во время резервного копирования или восстановления (SQL Server)](https://docs.microsoft.com/sql/relational-databases/backup-restore/enable-or-disable-backup-checksums-during-backup-or-restore-sql-server?view=sql-server-2017)

    > [!NOTE]
    > Если вы передаете резервные копии базы данных с помощью сжатия, контрольная сумма является поведением по умолчанию, если явно не отключено.

    При использовании автономных миграций, если выбрать параметр **я буду позволять Azure Database Migration Service...**, после чего Azure Database Migration Service будет использовать резервную копию базы данных с включенной контрольной суммой.

- **Носитель резервной копии**

    Обязательно выполните каждую резервную копию на отдельном носителе резервных копий (файлы резервных копий). Azure Database Migration Service не поддерживает резервные копии, добавляемые в один файл резервной копии. Создание полных резервных копий и резервные копии журналов для отдельных файлов резервных копий.

## <a name="data-and-log-file-layout"></a>Макет файла данных и журнала

- **Число файлов журнала**

    Azure Database Migration Service не поддерживает базы данных с несколькими файлами журналов. Если у вас есть несколько файлов журналов, сократите их и выполните их реорганизацию в один файл журнала транзакций. Так как вы не можете удаленно записывать в журнал непустые файлы, необходимо сначала создать резервную копию файла журнала.

## <a name="sql-server-features"></a>функции SQL Server

- **Файловый поток/таблицы FileTable**

    SQL Управляемый экземпляр в настоящее время не поддерживает FileStream и таблицы FileTable. Для рабочих нагрузок, зависящих от этих функций, рекомендуется использовать серверы SQL Server, работающие на виртуальных машинах Azure, в качестве цели Azure.

- **Таблицы в памяти**

    Выполняющаяся в памяти OLTP доступна на уровнях Premium и критически важный для бизнеса для SQL Управляемый экземпляр; уровень общего назначения не поддерживает выполняющуюся в памяти OLTP.

## <a name="migration-resets"></a>Сбросы миграции

- **Развернутые приложения**

    SQL Управляемый экземпляр — это служба PaaS с автоматической установкой исправлений и обновлениями версий. Во время миграции Управляемый экземпляр SQL некритические обновления удерживаются до 36 часов. Затем (и для критических обновлений) в случае нарушения миграции процесс сбрасывается в состояние полного восстановления.

    Прямую миграцию миграции можно вызвать только после восстановления полной резервной копии и обнаружения всех резервных копий журналов. При кутоверсии рабочей миграции обратитесь к [псевдониму обратной связи Azure DMS](mailto:dmsfeedback@microsoft.com).
