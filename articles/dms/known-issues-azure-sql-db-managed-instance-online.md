---
title: Известные проблемы и ограничения при оперативной миграции на управляемый экземпляр базы данных SQL Azure
description: Сведения об известных проблемах и ограничениях миграции, связанных с оперативной миграцией в управляемый экземпляр базы данных SQL Azure.
services: database-migration
author: pochiraju
ms.author: rajpo
manager: craigg
ms.reviewer: craigg
ms.service: dms
ms.workload: data-services
ms.custom: mvc
ms.topic: article
ms.date: 02/20/2020
ms.openlocfilehash: 88e2b5894686ee93caecf33e04940803eb75f394
ms.sourcegitcommit: 96dc60c7eb4f210cacc78de88c9527f302f141a9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/27/2020
ms.locfileid: "77648671"
---
# <a name="known-issuesmigration-limitations-with-online-migrations-to-azure-sql-database-managed-instance"></a>Известные проблемы и ограничения миграции при оперативной миграции на управляемый экземпляр базы данных SQL Azure

Ниже описаны известные проблемы и ограничения, связанные с миграцией по сети из SQL Server в управляемый экземпляр базы данных SQL Azure.

> [!IMPORTANT]
> Миграция SQL Server в базу данных SQL Azure в сети, перенос SQL_variant типов данных не поддерживается.

## <a name="backup-requirements"></a>Требования к резервному копированию

- **Резервные копии с контрольной суммой**

    Azure Database Migration Service использует метод резервного копирования и восстановления для переноса локальных баз данных в управляемый экземпляр базы данных SQL. Azure Database Migration Service поддерживает только резервные копии, созданные с использованием контрольной суммы.

    [Включение или отключение вычисления контрольных сумм резервных копий во время архивации или восстановления (SQL Server)](https://docs.microsoft.com/sql/relational-databases/backup-restore/enable-or-disable-backup-checksums-during-backup-or-restore-sql-server?view=sql-server-2017)

    > [!NOTE]
    > Если вы передаете резервные копии базы данных с помощью сжатия, контрольная сумма является поведением по умолчанию, если явно не отключено.

    При использовании автономных миграций, если выбрать параметр **я буду позволять Azure Database Migration Service...** , после чего Azure Database Migration Service будет использовать резервную копию базы данных с включенной контрольной суммой.

- **Носитель резервной копии**

    Обязательно выполните каждую резервную копию на отдельном носителе резервных копий (файлы резервных копий). Azure Database Migration Service не поддерживает резервные копии, добавляемые в один файл резервной копии. Создание полных резервных копий и резервные копии журналов для отдельных файлов резервных копий.

## <a name="data-and-log-file-layout"></a>Макет файла данных и журнала

- **Число файлов журнала**

    Azure Database Migration Service не поддерживает базы данных с несколькими файлами журналов. Если у вас есть несколько файлов журналов, сократите их и выполните их реорганизацию в один файл журнала транзакций. Так как вы не можете удаленно записывать в журнал непустые файлы, необходимо сначала создать резервную копию файла журнала.

## <a name="sql-server-features"></a>функции SQL Server

- **Файловый поток/таблицы FileTable**

    Управляемый экземпляр базы данных SQL сейчас не поддерживает FileStream и таблицы FileTable. Для рабочих нагрузок, зависящих от этих функций, рекомендуется использовать серверы SQL Server, работающие на виртуальных машинах Azure, в качестве цели Azure.

- **Таблицы в памяти**

    Выполняющаяся в памяти OLTP доступна на уровнях Premium и критически важный для бизнеса для управляемого экземпляра базы данных SQL; уровень общего назначения не поддерживает выполняющуюся в памяти OLTP.

## <a name="migration-resets"></a>Сбросы миграции

- **Развертывания**

    Управляемый экземпляр базы данных SQL — это служба PaaS с автоматической установкой исправлений и обновлениями версий. Во время миграции управляемого экземпляра базы данных SQL некритические обновления помогают получить до 36 часов. Затем (и для критических обновлений) в случае нарушения миграции процесс сбрасывается в состояние полного восстановления.

    Прямую миграцию миграции можно вызвать только после восстановления полной резервной копии и обнаружения всех резервных копий журналов. При кутоверсии рабочей миграции обратитесь к [псевдониму обратной связи Azure DMS](mailto:dmsfeedback@microsoft.com).
