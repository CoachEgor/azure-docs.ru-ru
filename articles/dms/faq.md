---
title: Часто задаваемые вопросы - Миграционная служба лазурных баз данных
description: Часто задаваемые вопросы об использовании миграционной службы базы данных Azure для выполнения миграций баз данных.
services: database-migration
author: pochiraju
ms.author: rajpo
manager: craigg
ms.reviewer: craigg
ms.service: dms
ms.workload: data-services
ms.custom: mvc
ms.topic: article
ms.date: 02/20/2020
ms.openlocfilehash: a664f12843585ac7524cf8d51aef156d15d32504
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77650987"
---
# <a name="faq-about-using-azure-database-migration-service"></a>Часто задаваемые вопросы об использовании миграционной службы баз данных Azure

В этой статье часто перечисляются часто задаваемые вопросы об использовании миграционной службы базы данных Azure вместе с соответствующими ответами.

## <a name="overview"></a>Обзор

**В. Что такое миграционная служба базы данных Azure?**
Служба миграции баз данных Azure — это полностью управляемая служба, предназначенная для беспрепятственного миграции из нескольких источников баз данных в платформы Azure Data с минимальным временем простоя. В настоящее время эта служба находится в общем доступе, при этом текущие усилия в области развития сосредоточены на:

* надежность и производительность;
* итеративное добавление пар исходного и целевого объектов;
* работа над функциями непрерывной миграции.

**В. Какие пары исходных/целевых пар поддерживает миграционная служба базы данных Azure в настоящее время?**
Служба в настоящее время поддерживает различные типы источников/целевых пар или сценарии миграции. Полный список состояний всех доступных сценариев миграции см. в статье [Состояние сценариев миграции, поддерживаемых службой Azure Database Migration Service](https://docs.microsoft.com/azure/dms/resource-scenario-status).

Другие сценарии миграции находятся в предварительном просмотре и требуют представления номинации через сайт DMS Preview. Для полного перечисления сценариев в предварительном просмотре и регистрации для участия в одном из этих предложений, [см.](https://aka.ms/dms-preview/)

**В. Какие версии сервера S'L Server поддерживает миграционную службу базы данных Azure в качестве источника?**
При переходе с сервера S'L, поддерживаемые источники для службы миграции баз данных Azure являются S'L Server 2005 через S'L Server 2019.

**В: При использовании миграционной службы базы данных Azure разница между офлайн-системой и миграцией в Интернете?**
Миграционный сервис базы данных Azure можно использовать для выполнения автономных и онлайн-миграций. При *автономной* миграции время простоя приложения начинается при запуске миграции. При *онлайн-миграции* время простоя ограничено временем, чтобы сократить время в конце миграции. Мы рекомендуем выполнить тестирование автономной миграции, чтобы определить, допустим ли простой, и, если нет, выполнить миграцию с подключением к сети.

> [!NOTE]
> Чтобы выполнить сетевую миграцию с помощью Azure Database Migration Service, требуется создать экземпляр ценовой категории "Премиум". Для получения дополнительной информации на странице ценообразования миграционной службы лазурного баз данных смотрите страницу [миграционных](https://azure.microsoft.com/pricing/details/database-migration/) служб Лазурного человека.

**В. Как служба миграции баз данных Azure сравнивается с другими инструментами миграции баз данных Майкрософт, такими как помощник по миграции баз данных (DMA) или помощник по миграции серверов (SSMA)?**
Миграционная служба баз данных Azure является предпочтительным методом миграции баз данных в Microsoft Azure в масштабе. Более подробную информацию о том, как служба миграции баз данных Azure сравнивает с другими инструментами миграции баз данных Майкрософт, а также рекомендации по использованию службы в различных сценариях, смотрите в блоге, в которых [различается инструменты и службы миграции баз данных корпорации Майкрософт.](https://techcommunity.microsoft.com/t5/microsoft-data-migration/differentiating-microsoft-s-database-migration-tools-and/ba-p/368529)

**В. Как служба миграции баз данных Azure сравнивается с предложением Azure Migrate?**
Azure Migrate помогает с переносом виртуальных машин в Azure IaaS. Оценивается пригодность для миграции, показатели производительности, на основе которых определяется требуемый размер, и расходы на работу локальных виртуальных машин в Azure. Служба "Миграция Azure" подходит для переноса рабочих нагрузок на локальных виртуальных машинах на виртуальные машины IaaS Azure методом lift-and-shift. Однако, в отличие от службы миграции баз данных Azure, Azure Migrate не является специализированной миграционной службой баз данных, предлагающей для реляционных баз данных Azure PaaS платформ, таких как база данных Azure S'L или Azure S'L Database Managed Instance.

## <a name="setup"></a>Настройка

**В. Каковы предпосылки для использования миграционной службы баз данных Azure?**
Существует несколько предпосылок, необходимых для обеспечения бесперебойной работы службы миграции баз данных Azure при выполнении миграций баз данных. Одни предварительные требования применяются во всех сценариях (с парами исходного и целевого объектов), поддерживаемых службой, другие уникальны и используются в определенных сценариях.

Ниже приведены предварительные требования для использования службы Azure Database Migration Service, которые применяются во всех поддерживаемых сценариях миграции.

* Создайте виртуальную сеть Microsoft Azure для миграционной службы лазурных данных с помощью модели развертывания Azure Resource Manager, которая обеспечивает подключение к исходным серверам с помощью [ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-introduction) или [VPN.](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways)
* Убедитесь, что правила виртуальной сетевой группы безопасности не блокируют следующие порты связи 443, 53, 9354, 445, 12000. Для получения более подробной информации о виртуальной сети NSG фильтрации трафика, [см.](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg)
* Если перед исходными базами данных развернуто устройство брандмауэра, вам может понадобиться добавить правила брандмауэра, чтобы позволить службе Azure Database Migration Service обращаться к исходным базам данных для выполнения миграции.

Список всех необходимых предпосылок для конкуренции в конкретных сценариях миграции с помощью миграционной службы Azure Database можно узнать в соответствующем учебнике в [документации](https://docs.microsoft.com/azure/dms/dms-overview) миграционной службы базы данных Azure, на docs.microsoft.com.

**В. Как найти IP-адрес миграционной службы базы данных Azure, чтобы создать список разрешений для правил брандмауэра, используемых для доступа к исходной базе данных для миграции?**
Возможно, потребуется добавить правила брандмауэра, позволяющие миграционной службе базы данных Azure получить доступ к исходной базе данных для миграции. IP-адрес службы является динамическим, но если вы используете ExpressRoute, этот адрес назначается в частном порядке вашей корпоративной сетью. Самый простой способ определить подходящий IP-адрес — это посмотреть в той же группе ресурсов, что и подготовленный ресурс службы миграции Базы данных Azure, чтобы найти связанный сетевой интерфейс. Обычно имя ресурса сетевого интерфейса начинается с префикса NIC, за которым следует уникальная последовательность знаков и символов, например, NIC-jj6tnztnmarpsskr82rbndyp. Когда вы выберете этот ресурс, отобразится IP-адрес, который необходимо добавить в список разрешений на странице обзора ресурсов на портале Azure.

Вам также может потребоваться добавить в список разрешений исходный порт, с которого SQL Server ожидает передачи данных. По умолчанию — это порт 1433, однако исходный SQL Server также можно настроить на ожидание передачи данных с других портов. В этом случае необходимо добавить эти порты в список разрешений. Определить порт, который SQL Server прослушивает, можно с помощью запроса динамического административного представления:

```sql
    SELECT DISTINCT
        local_tcp_port
    FROM sys.dm_exec_connections
    WHERE local_tcp_port IS NOT NULL
```

Вы также можете определить порт, который SQL Server прослушивает, запросив журнал ошибок SQL Server:

```sql
    USE master
    GO
    xp_readerrorlog 0, 1, N'Server is listening on'
    GO
```

**В. Как настроить виртуальную сеть Microsoft Azure?**
В то время как несколько учебников Microsoft, которые могут просмотреть процесс создания виртуальной сети, официальная документация отображается в статье [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).

## <a name="usage"></a>Использование

**В. Каково резюме шагов, необходимых для использования миграционной службы базы данных Azure для выполнения миграции баз данных?**
Во время обычного переноса базы данных вы:

1. Создаете целевую базу данных.
2. Оцените исходную базу данных (ы).
    * Для однородных миграций оцените существующую базу данных с помощью [DMA.](https://www.microsoft.com/download/details.aspx?id=53595)
    * Для неоднородных миграций (из источников конкуренции) оцените существующую базу данных (ы) с [Помощью SSMA.](https://aka.ms/get-ssma) Вы также используете SSMA для преобразования объектов базы данных и переноса схемы на целевую платформу.
3. создание экземпляра Azure Database Migration Service;
4. Создайте проект миграции с указанием исходной базы данных (ы), целевой базы данных (ы) и таблиц для миграции.
5. Начните полную нагрузку.
6. Выбираете последующую проверку.
7. Вручную переключаете рабочую среду на использование новой облачной базы данных.

## <a name="troubleshooting-and-optimization"></a>Устранение и оптимизация проблем

**В. Я настраиваю проект миграции в DMS, и мне трудно подключиться к исходной базе данных. Что мне делать?**
Если у вас возникли проблемы с подключением к исходной базе данных во время работы над миграцией, создайте виртуальную машину в виртуальной сети, с помощью которой вы настраиваете экземпляр DMS. В виртуальной машине вы должны иметь возможность запускать тест соединения, например, использовать файл UDL для тестирования подключения к серверу S'L или загружать Robo 3T для тестирования соединений MongoDB. Если тест соединения удается, вы не должны иметь проблемы с подключением к исходной базе данных. Если тест соединения не удался, свяжитесь с администратором сети.

**В. Почему служба миграции базы данных Azure недоступна или остановлена?**
Если пользователь явно останавливает миграционную службу базы данных Azure (DMS) или если служба неактивна в течение 24 часов, служба будет находиться в остановке или автоматическом приостановлении. В каждом случае служба будет недоступна и остановлена.  Чтобы возобновить активную миграцию, перезапустите службу.

**В. Существуют ли рекомендации по оптимизации работы миграционной службы базы данных Azure?**
Вы можете выполнить ряд действий, чтобы ускорить перенос базы данных с использованием службы:

* используйте ценовую категорию общего назначения с несколькими ЦП при создании экземпляра службы, чтобы обеспечить параллелизацию и ускоренную передачу данных благодаря использованию нескольких ЦП;
* временно увеличьте масштаб целевого экземпляра Базы данных SQL Azure до SKU уровня "Премиум" во время операции переноса данных, чтобы уменьшить регулирование количества запросов базы данных SQL Azure, которое может повлиять на действия передачи данных при использовании номеров SKU низкого уровня.

## <a name="next-steps"></a>Дальнейшие действия

Общие сведения о службе Azure Database Migration Service и доступности по регионам см. в статье [Что такое Azure Database Migration Service](dms-overview.md).
