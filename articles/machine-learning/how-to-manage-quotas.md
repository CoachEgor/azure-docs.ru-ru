---
title: Управление ресурсами и квотами
titleSuffix: Azure Machine Learning
description: Сведения о квотах на ресурсы для Машинного обучения Azure и о том, как запросить дополнительную квоту.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.reviewer: jmartens
author: nishankgu
ms.author: nigup
ms.date: 10/13/2020
ms.topic: conceptual
ms.custom: troubleshooting,contperfq4, contperfq2
ms.openlocfilehash: 93cf29651110356023752f2377c9a0fc358982a7
ms.sourcegitcommit: 957c916118f87ea3d67a60e1d72a30f48bad0db6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2020
ms.locfileid: "92203060"
---
# <a name="manage--increase-quotas-for-resources-with-azure-machine-learning"></a>Управление квотами на ресурсы для Машинного обучения Azure и их увеличение

Azure использует ограничения и квоты, чтобы предотвратить чрезмерное выполнение бюджета из-за мошенничества и учитывать ограничения емкости Azure. Учитывайте эти ограничения при масштабировании рабочих нагрузок. В этой статье вы узнаете о следующих возможностях:

> [!div class="checklist"]
> + Ограничения по умолчанию для ресурсов Azure, связанных с [машинное обучение Azure](overview-what-is-azure-ml.md).
> + Просмотрите квоты и ограничения.
> + Создание квот уровня рабочей области.
> + Увеличение квоты запросов.
> + Частные конечные точки и квоты DNS.

Наряду с управлением квотами вы также можете научиться [планировать & управления затратами машинное обучение Azure](concept-plan-manage-cost.md).

## <a name="special-considerations"></a>Специальные рекомендации

+ Квота — это кредитный лимит, а не гарантия наличия ресурсов. Если требуются крупномасштабные ресурсы, [обратитесь в службу поддержки Azure, чтобы увеличить квоту](#request-quota-increases).

+ Квота является общей для всех служб в подписках, включая Машинное обучение Azure. Вычислите использование во всех службах при оценке емкости.
    + Машинное обучение Azure COMPUTE является исключением и имеет отдельную квоту на базовую квоту вычислений. 

+ Ограничения по умолчанию зависят от типа категории, такой как бесплатная пробная версия, оплата по мере использования и серия виртуальных машин (VM), например Dv2, F, G и т. д.

## <a name="default-resource-quotas"></a>Квоты ресурсов по умолчанию

В этом разделе вы узнаете об ограничениях по умолчанию и максимальных квот для следующих ресурсов:

+ Виртуальные машины
+ Вычислительная среда Машинного обучения Azure;
+ Конвейеры Машинное обучение Azure
+ Экземпляры контейнеров
+ Память

> [!IMPORTANT]
> Границы могут измениться. Последнюю версию всегда можно найти в [документе](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits/) по квотам на уровне службы для всех ресурсов Azure.

### <a name="virtual-machines"></a>Виртуальные машины
Каждая подписка Azure имеет ограничение на количество виртуальных машин во всех службах. Для ядер виртуальных машин предусмотрено Региональный общий лимит и региональный лимит на размер ряда (Dv2, F и т. д.). Оба ограничения применяются отдельно.

Например, рассмотрим подписку с ограничением до 30 ядер виртуальных машин с восточной части США, 30 ядер серии A и 30 ядер серии D. Этой подписке разрешено развертывание 30 виртуальных машин a1 или 30 виртуальных машин D1 или сочетание двух, которое не превышает 30 ядер.

Ограничения для виртуальных машин не могут быть вызваны выше значения, приведенного в следующей таблице.

[!INCLUDE [azure-subscription-limits-azure-resource-manager](../../includes/azure-subscription-limits-azure-resource-manager.md)]

### <a name="azure-machine-learning-compute"></a>Вычислительная среда Машинного обучения Azure;
Для [машинное обучение Azureных вычислений](concept-compute-target.md#azure-machine-learning-compute-managed) предусмотрена квота по умолчанию как на количество ядер, так и на количество уникальных ресурсов вычислений, разрешенных для каждого региона в подписке. Эта квота отделена от квоты ядра виртуальной машины из предыдущего раздела.

[Запросите увеличение квоты](#request-quota-increases) , чтобы увеличить ограничения в этом разделе до **максимального значения** , показанного в таблице.

Доступные ресурсы:
+ Число **выделенных ядер на регион** по умолчанию равно 24-300 в зависимости от типа предложения подписки.  Количество выделенных ядер на подписку можно увеличить для каждого семейства виртуальных машин. Специализированные семейства виртуальных машин, такие как NCv2, NCv3 или ND, начинаются с 0 ядер по умолчанию.

+ Для **ядер с низким приоритетом на регион** по умолчанию установлено ограничение в 100-3000 в зависимости от типа предложения подписки. Количество ядер с низким приоритетом для каждой подписки можно увеличить, и оно является одним значением в разных семействах виртуальных машин.

+ Количество **кластеров на регион** по умолчанию равно 200. Они являются общими для обучающего кластера и вычислительного экземпляра (который при определении квоты рассматривается как кластер с одним узлом).

В следующей таблице приведены дополнительные ограничения, которые не могут быть превышены.

| **Ресурс** | **Максимальное ограничение** |
| --- | --- |
| Рабочие области на группу ресурсов | 800 |
| Узлы в одном ресурсе Машинное обучение Azure Compute (Амлкомпуте) | 100 узлов |
| Процессов MPI GPU на узел | 1–4 |
| Число рабочих потоков GPU на узел | 1–4 |
| Время существования задания | 21 день<sup>1</sup> |
| Время существования задания на Low-Priority узле | 7 дней<sup>2</sup> |
| Серверов параметров на узел | 1 |

<sup>1</sup> максимальное время существования относится к длительности между запуском и завершением запуска. Завершенные запуски сохраняются в течение неограниченного времени. Данные для запусков, которые не были завершены в течение максимального времени существования, недоступны.
<sup>2</sup> Задания на узле с низким приоритетом могут быть вытеснены в любое время, когда существует ограничение емкости. Мы рекомендуем реализовать в задании точки возврата.

### <a name="azure-machine-learning-pipelines"></a>Конвейеры Машинного обучение Azure
[Машинное обучение Azure конвейеров](concept-ml-pipelines.md) имеют следующие ограничения.

| **Ресурс** | **Ограничение** |
| --- | --- |
| Шаги в конвейере | 30 000 |
| Рабочие области на группу ресурсов | 800 |

### <a name="container-instances"></a>Экземпляры контейнеров

Дополнительные сведения см. в разделе [ограничения экземпляров контейнеров](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits#container-instances-limits).

### <a name="storage"></a>Память
Учетные записи хранения Azure имеют ограничение в 250 учетных записей хранения для каждого региона на подписку. Сюда входят учетные записи хранения уровня "Стандартный" и "Премиум".

Чтобы увеличить это ограничение, выполните запрос через [службу поддержки Azure](https://ms.portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest/). Команда разработчиков службы хранилища Azure просматривает ваш случай и может утвердить до 250 учетных записей хранения для региона.


## <a name="workspace-level-quota"></a>Квота уровня рабочей области

Квоты уровня рабочей области используются для управления распределением целевых объектов Машинное обучение Azure вычислений между несколькими [рабочими областями](concept-workspace.md) в одной подписке.

По умолчанию все рабочие области используют одну квоту, совпадающую с квотой уровня подписки для семейств виртуальных машин. Однако можно задать максимальную квоту для отдельных семейств виртуальных машин в рабочих областях в подписке. Это позволяет предоставлять общий доступ к емкости и избежать проблем с состязанием за ресурсы:

1. Перейдите к любой рабочей области в подписке.
1. В левой области выберите **использование + квоты**.
1. Перейдите на вкладку **Настройка квот** , чтобы просмотреть квоты.
1. Разверните семейство виртуальных машин.
1. Установите предельную квоту для любой рабочей области, указанной в этом семействе виртуальных машин.

Нельзя задать отрицательное значение или значение выше квоты уровня подписки.

[![Квота уровня рабочей области службы Машинного обучения Azure](./media/how-to-manage-quotas/azure-machine-learning-workspace-quota.png)](./media/how-to-manage-quotas/azure-machine-learning-workspace-quota.png)

> [!NOTE]
> Для задания квоты на уровне рабочей области необходимы разрешения уровня подписки.

## <a name="view-your-usage-and-quotas"></a>Просмотр сведений об использовании и квотах

Чтобы просмотреть квоты для различных ресурсов Azure, таких как виртуальные машины, хранилище, сеть, используйте портал Azure:

1. На левой панели выберите **Все службы**, а затем в общей категории выберите **Подписки**.

2. Из списка подписок выберите ту, квоту которой нужно просмотреть.

3. Выберите **использование и квоты** , чтобы просмотреть текущие ограничения и использование квоты. Используйте фильтры для выбора поставщика и расположений. 

Квота на Машинное обучение Azure вычислений в вашей подписке управляется отдельно от других квот Azure. 

1. Перейдите к рабочей области **машинное обучение Azure** в портал Azure.

2. В левой области в **разделе Поддержка и устранение неполадок** выберите **использование и квоты** , чтобы просмотреть текущие ограничения и использование квоты.

3. Выберите подписку, для которой нужно просмотреть квоты. Не забудьте выполнить фильтрацию по нужному региону.

4. Можно переключаться между представлением уровня подписки и представлениями уровня рабочей области.

## <a name="request-quota-increases"></a>Запрос на увеличение квоты

Чтобы увеличить лимит или квоту выше ограничения по умолчанию, отправьте [запрос в службу поддержки по сети](https://ms.portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest/) бесплатно.

Ограничения не могут быть вызваны выше максимального предела, показанного в таблицах выше. Если максимальное ограничение отсутствует, изменить ограничение для ресурса нельзя.

При запросе увеличения квоты выберите службу, для которой запрашивается квота. Например Машинное обучение Azure, экземпляры контейнеров, хранилище и т. д. Для Машинное обучение Azure вычислений можно нажать кнопку **запросить квоту** при просмотре квоты, следуя приведенным выше инструкциям.

> [!NOTE]
> [Бесплатная пробная версия подписки](https://azure.microsoft.com/offers/ms-azr-0044p) не предусматривает возможность увеличения ограничения и квоты. При наличии [бесплатной пробной версии подписки](https://azure.microsoft.com/offers/ms-azr-0044p) ее можно обновить до подписки [с оплатой по мере использования](https://azure.microsoft.com/offers/ms-azr-0003p/). Дополнительные сведения см. в статье [Upgrade your Free Trial or Microsoft Imagine Azure subscription to Pay-As-You-Go](../billing/billing-upgrade-azure-subscription.md) (Обновление бесплатной пробной версии подписки или подписки Microsoft Imagine Azure до подписки с оплатой по мере использования) и [Вопросы и ответы о бесплатной учетной записи Azure](https://azure.microsoft.com/free/free-account-faq).

## <a name="private-endpoint-and-private-dns-quota-increases"></a>Увеличение частной конечной точки и частной квоты DNS

Существуют ограничения на количество частных конечных точек и частных зон DNS, которые могут быть созданы в подписке.

Хотя Машинное обучение Azure создает ресурсы в подписке (клиент), существуют сценарии, которые создают ресурсы в подписке, принадлежащей корпорации Майкрософт.

 В следующих сценариях может потребоваться запросить квоту для подписки, принадлежащей корпорации Майкрософт:

* __Рабочая область с включенной частной связью с ключом, управляемым клиентом (CMK)__
* __Реестр контейнеров Azure для рабочей области, расположенной за виртуальной сетью__
* __Подключение закрытой ссылки с включенным кластером службы Azure Kubernetes Service в рабочую область__.

Чтобы запросить скидку для этих сценариев, выполните следующие действия.

1. [Создайте запрос в службу поддержки Azure](/azure/azure-portal/supportability/how-to-create-azure-support-request#create-a-support-request) и выберите следующие параметры в разделе " __Основные сведения__ ":

    | Поле | Выбор |
    | ----- | ----- |
    | Тип проблемы | Технические |
    | Служба | Мои службы. Выберите __машинное обучение__ в раскрывающемся списке. |
    | Тип проблемы | Настройка рабочей области, пакет SDK и интерфейс командной строки |
    | Подтип проблемы | Частная конечная точка и запрос на вычет зоны Частная зона DNS |

2. В разделе __сведения__ введите в поле __Описание__ нужный регион Azure и сценарий, который планируется использовать. Если необходимо запросить увеличение квоты для нескольких подписок, следует также вывести список идентификаторов подписок в этом поле.

3. Выберите __создать__ , чтобы создать запрос.

:::image type="content" source="media/how-to-manage-quotas/quota-increase-private-endpoint.png" alt-text="Снимок экрана закрытой конечной точки и запроса на увеличение квоты частного DNS":::

## <a name="next-steps"></a>Дальнейшие действия

+ [Планирование затрат для Машинного обучения Azure и управление ими](concept-plan-manage-cost.md)
