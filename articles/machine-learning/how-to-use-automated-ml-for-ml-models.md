---
title: Используйте autoML для создания моделей & развертывании
titleSuffix: Azure Machine Learning
description: Создавайте, просматривайте и развертывайте автоматизированные модели машинного обучения с помощью машинного обучения Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: nibaccam
author: tsikiksr
manager: cgronlun
ms.reviewer: nibaccam
ms.date: 03/10/2020
ms.openlocfilehash: 0d6fa02578814c4c5d034be05cbc63093d70603b
ms.sourcegitcommit: 8dc84e8b04390f39a3c11e9b0eaf3264861fcafc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2020
ms.locfileid: "81257238"
---
# <a name="create-review-and-deploy-automated-machine-learning-models-with-azure-machine-learning"></a>Создание, обзор и развертывание автоматизированных моделей машинного обучения с помощью машинного обучения Azure
[!INCLUDE [applies-to-skus](../../includes/aml-applies-to-enterprise-sku.md)]

В этой статье вы узнаете, как создавать, исследовать и развертывать автоматизированные модели машинного обучения без единой строки кода в студийном интерфейсе Azure Machine Learning. Автоматизированное машинное обучение — это процесс, в котором для вас выбирается лучший алгоритм машинного обучения для использования в конкретных данных. Этот процесс позволяет быстро создавать модели машинного обучения. [Узнайте больше об автоматизированном машинном обучении](concept-automated-ml.md).
 
Для примера конца до конца попробуйте [учебник для создания модели классификации с автоматизированным интерфейсом ML Azure Machine Learning.](tutorial-first-experiment-automated-ml.md) 

Для работы с кодовым интерфейсом Python [назначьте свои автоматизированные эксперименты машинного обучения](how-to-configure-auto-train.md) с помощью SDK Azure Machine Learning.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте бесплатную учетную запись, прежде чем начинать работу. Опробуйте [бесплатную или платную версию Машинного обучения Azure](https://aka.ms/AMLFree) уже сегодня.

* Рабочее пространство Для машин Azure Machine Learning с типом **корпоративного издания.** См. сведения о [создании рабочей области машинного обучения Azure](how-to-manage-workspace.md).  Для обновления существующего рабочего пространства [Upgrade to Enterprise edition](how-to-manage-workspace.md#upgrade)до корпоративного издания см.

## <a name="get-started"></a>Начало работы

1. Вопиюсь на azure Machine Learning по адресу https://ml.azure.com. 

1. Выберите подписку и рабочее пространство. 

1. Перейдите на левую панель. Выберите **Автоматизированный ML** в разделе **Автор.**

[![Навигационное стекло студии машинного обучения Azure Machine Learning](media/how-to-use-automated-ml-for-ml-models/nav-pane.png)](media/how-to-use-automated-ml-for-ml-models/nav-pane-expanded.png)

 Если вы впервые проводите эксперименты, вы увидите пустой список и ссылки на документацию. 

В противном случае вы увидите список последних экспериментов по машинному обучению, в том числе созданных с помощью SDK. 

## <a name="create-and-run-experiment"></a>Создание и запуск эксперимента

1. Выберите **новый автоматизированный запуск ML** и заселите форму.

1. Выберите набор данных из контейнера для хранения или создайте новый набор данных. Наборы данных могут создаваться из локальных файлов, веб-url-адресов, хранилищ данных или открытых наборов данных Azure. 

    >[!Important]
    > Требования к учебным данным:
    >* Данные должны быть в таблике.
    >* Значение, необходимое для прогнозирования (целевой столбец), должно присутствовать в данных.

    1. Чтобы создать новый набор данных из файла на локальном компьютере, выберите **Просмотр,** а затем выберите файл. 

    1. Присвойте набору данных уникальное имя и укажите дополнительное описание. 

    1. Выберите **Далее,** чтобы открыть **форму Datastore и выбора файлов.** В этой форме вы выбираете, где загрузить набор данных; контейнер для хранения данных по умолчанию, автоматически созданный с помощью рабочего пространства, или выбрать контейнер для хранения, который требуется использовать для эксперимента. 

    1. Просмотрите настройки и форму **предварительного просмотра** для точности. Форма разумно заселена в зависимости от типа файла. 

        Поле| Описание
        ----|----
        Формат файла| Свойство определяет структуру и тип данных, хранящихся в файле.
        Разделитель| Один или несколько символов для указания границы между отдельными, независимыми регионами в виде простого текста или других потоков данных.
        Кодирование| Определяет, какой бит следует использовать в таблице схемы символов, чтобы считать набор данных.
        Заголовки столбцов| Указывает, как будут обрабатываться заголовки набора данных, если таковые имеются.
        Пропустить строки | Указывает, сколько строк, если таковые имеются, пропускается в наборе данных.
    
        Выберите **Далее**.

    1. Форма **Schema** разумно засеелена на основе выбора в настройках и форме **предварительного просмотра.** Здесь научите тип данных для каждого столбца, просмотрите имена столбцов и выберите, какие столбцы **не включаются** в эксперимент. 
            
        Выберите **далее.**

    1. Форма **подтверждения деталей** представляет собой сводку информации, ранее заселенной в **основных информационных** и **парановых формах и формах предварительного просмотра.** У вас также есть возможность создать профиль данных для набора данных с помощью вычисления с поддержкой профилирования. Подробная информация [о профилировании данных](#profile).

        Выберите **Далее**.
1. Выберите новый набор данных после его отображаемого. Вы также можете просмотреть предварительный просмотр набора данных и статистику выборки. 

1. На форме **запуска настройки** введите уникальное имя эксперимента.

1. Выберите целевую колонку; это колонка, на которую вы хотели бы сделать прогнозы.

1. Выберите вычисление для профилирования данных и обучения. Список существующих вычислений доступен в выпадающем виде. Чтобы создать новый вычисление, следуйте инструкциям в шаге 7.

1. Выберите **Создать новый вычисление** для настройки контекста вычислений для этого эксперимента.

    Поле|Описание
    ---|---
    Имя вычислительной среды| Введите уникальное имя для идентификации контекста вычислительной среды.
    размер виртуальной машины;| Выберите размер виртуальной машины для вычислительной среды.
    Минимальное и максимальное кол-во узлов (в дополнительных параметрах)| Для профилирования данных необходимо указать один или больше узлов. Введите максимальное количество узлов для вычислений. По умолчанию 6 узлов для AML Compute.
    
    Нажмите кнопку **создания**. Создание нового вычисления может занять несколько минут.

    >[!NOTE]
    > Ваше имя вычисления будет указывать, включен ли выбранный/создай компьютер, который вы выбираете/создают, под *пределевой профилирование.* (См. [профилирование данных](#profile) раздела для более подробной информации).

    Выберите **Далее**.

1. В форме **типа и параметров задачи** выберите тип задачи: классификацию, регрессию или прогнозирование. [Узнайте, как определить типы задач](how-to-define-task-type.md) для получения дополнительной информации.

    1. Для классификации можно также включить глубокое обучение, которое используется для текстовых феатуризаций.

    1. Для прогнозирования:
        1. Выберите столбец времени: Этот столбец содержит данные времени, которые будут использоваться.

        1. Выберите горизонт прогноза: Укажите, сколько единиц времени (минуты/часы/дни/недели/месяцы/годы) модель сможет предсказать в будущем. Чем дальше модель потребуется прогнозировать в будущее, тем менее точной она станет. [Подробнее о горизонте прогнозирования и прогнозирования.](how-to-auto-train-forecast.md)

1. (Необязательно) Просмотр параметров конфигурации дополнений: дополнительные настройки, которые можно использовать для лучшего управления учебной задачей. В противном случае применяются значения по умолчанию, основанные на выборе эксперимента и данных. 

    Дополнительные конфигурации|Описание
    ------|------
    Основная метрика| Основная метрика, используемая для оценки вашей модели. [Подробнее о метриках моделей.](how-to-configure-auto-train.md#explore-model-metrics)
    Автоматическое выделение признаков| Выберите для включения или отключить предварительную обработку, выполненную с помощью автоматизированного машинного обучения. Предварительная обработка включает в себя автоматическое очищение данных, подготовку и преобразование для создания синтетических функций. Не поддерживается для типа задачи прогнозирования временных рядов. [Подробнее о предварительной обработке](#featurization). 
    Объясните лучшую модель | Выберите, чтобы включить или отключить, чтобы показать объяснимость рекомендуемой лучшей модели
    Заблокированный алгоритм| Выберите алгоритмы, которые вы хотите исключить из учебной работы.
    Критерий выхода| При соблюдении любого из этих критериев работа по обучению прекращается. <br> *Время обучения (часы)*: Как долго, чтобы обучение работу для запуска. <br> *Порог метрики оценки*: Минимальный метрический балл для всех конвейеров. Это гарантирует, что если у вас есть определенный целевой метрики вы хотите достичь, вы не тратите больше времени на обучение работу, чем это необходимо.
    Проверка| Выберите один из вариантов перекрестной проверки для использования в учебной работе. [Подробнее о перекрестной проверке.](how-to-configure-auto-train.md)
    Параллелизм| *Макс одновременные итерации*: Максимальное количество трубопроводов (итераций) для тестирования в учебной работе. Задание не будет работать больше, чем указанное количество итераций.

1. (Необязательно) Просмотр параметров фетуризмизации: если вы решите включить **автоматическую феатурацию** в форме **дополнительных параметров конфигурации,** эта форма, где вы указываете, какие столбцы для выполнения этих featurizations на, и выбрать, какие статистические значения для использования для отсутствующих вычислений значения.

<a name="profile"></a>

## <a name="data-profiling--summary-stats"></a>Профилирование данных & сводковых данных

Вы можете получить огромное разнообразие сводных статистических данных в наборе данных, чтобы проверить, готов ли ваш набор данных к ML. Для нечислоовых столбцов они включают только базовые статистические данные, такие как мин, макс и количество ошибок. Для числовых столбцов можно также просмотреть их статистические моменты и оценочные количественные оценки. В частности, наш профиль данных включает в себя:

>[!NOTE]
> Пустые записи отображаются для функций с нерелевантными типами.

Статистика|Описание
------|------
Компонент| Название колонки, которая суммируется.
Профиль| Вликольная визуализация на основе выведенного типа. Например, строки, булены и даты будут иметь значение, в то время как десятичные (число) имеют приблизительное гистограммы. Это позволяет получить быстрое понимание распределения данных.
Распределение вваза| Количество значений в строке типов в столбце. Nulls являются их собственным типом, поэтому эта визуализация полезна для обнаружения нечетных или недостающих значений.
Тип|Выведенный тип столбца. Возможные значения включают в себя: строки, булены, даты и десятичные.
Min| Минимальное значение столбца. Пустые записи отображаются для функций, тип которых не имеет присущего заказа (например, булеаны).
Max| Максимальное значение столбца. 
Count| Общее количество отсутствующих и не пропавших записей в столбце.
Присутствующее количество| Количество записей в столбце, которые не отсутствуют. Пустые строки и ошибки рассматриваются как значения, поэтому они не будут способствовать "не пропуская кол".
Квантили| Приблизительные значения на каждом quantile, чтобы обеспечить представление о распределении данных.
Среднее значение| Арифметическое среднее или среднее значение столбца.
Стандартное отклонение| Измерение количества дисперсии или вариации данных этого столбца.
Variance| Измерение того, насколько далеко распределены данные этого столбца от его среднего значения. 
Асимметрия| Измерьте, насколько отличаются данные этого столбца от нормального распределения.
Эксцесс| Измерение того, насколько сильно выгоняются данные этого столбца, сравнивается с обычным распределением.

<a name="featurization"></a>

## <a name="advanced-featurization-options"></a>Расширенные варианты феатуризации

Автоматизированное машинное обучение автоматически обеспечивает предварительную обработку и ограждения данных, которые помогут вам выявить и узнать потенциальные проблемы с вашими данными. 

### <a name="preprocessing"></a>Предварительная обработка

> [!NOTE]
> Если вы планируете экспортировать ваши модели, созданные автоматическим ML, в [модель ONNX,](concept-onnx.md)в формате ONNX поддерживаются только параметры феатуризации, указанные с q. Подробнее о [преобразовании моделей в ONNX](concept-automated-ml.md#use-with-onnx). 

|Предобработка&nbsp;шагов| Описание |
| ------------- | ------------- |
|Падение высокой кардинальности или отсутствие особенностей дисперсии» |Отбросьте их из наборов обучения и проверки, включая функции со всеми значениями, отсутствующими, одинаковое значение во всех строках или с чрезвычайно высокой кардинальностью (например, хэши, идентиматары или GUID).|
|Недостающие значения |Для численных объектов, ввешайте со средними значениями в столбце.<br/><br/>Для категориальных особенностей, ввязаться с наиболее частой ценностью.|
|Создание дополнительных функций |Для особенностей DateTime: Год, Месяц, День, День недели, День года, Квартал, Неделя года, Час, Минута, Вторая.<br/><br/>Для функций текста: Частота терминов, основанная на униграммах, биграммах и трехсимволах.|
|Преобразуйте и кодирование|Числовые объекты с небольшим количеством уникальных значений преобразуются в категориальные объекты.<br/><br/>Одногорячее кодирование выполняется для категорической низкой кардинальности; для высокой кардинальности, кодирования одного горячего хэша.|
|Встраивание слов|Text featurizer, который преобразует векторы токенов текста в вектор предложения с помощью предварительно обученной модели. Вектор встраивания каждого слова в документ агрегируется вместе для создания векторного элемента документа.|
|Целевые кодировки|Для категориальных объектов карты каждой категории со средним целевым значением для проблем регрессии и вероятности класса для каждого класса для проблем классификации. Частота на основе взвешивания и k-раз перекрестной проверки применяется для уменьшения над установкой отображения и шума, вызванного редкими категориями данных.|
|Кодирование текстовых целей|Для ввода текста для генерации вероятности каждого класса используется уложенная линейная модель с мешком слов.|
|Вес доказательств (WoE)|Вычисляет WoE как меру корреляции категориальных столбцов с целевым столбцом. Он рассчитывается как журнал соотношения вероятностей в классе и вне класса. Этот шаг выводит один числовый столбец объекта в классе и устраняет необходимость явно внушать недостающие значения и выпадающие значения.|
|Расстояние кластера|Тренирует модель кластеризации k-средств на всех численных столбцах.  Выводы k новые функции, один новый числовой функции на кластер, содержащий расстояние каждого образца к центроидам каждого кластера.|

### <a name="data-guardrails"></a>Данные ограждения

Ограждения данных применяются при включении автоматической фетурации или автоматической проверке. Ограждения данных помогают выявлять потенциальные проблемы с данными (например, отсутствующие значения, дисбаланс классов) и принимать корректирующие меры для улучшения результатов. 

Пользователи могут просматривать данные ограждения в студии в вкладке ```show_output=True``` **Data ограждения** автоматизированного запуска ML или путем установки при отправке эксперимента с помощью Python SDK. 

#### <a name="data-guardrail-states"></a>Государства-хранители данных

Data ограждения будут отображать одно из трех состояний: **Пройдено,** **Сделано,** или **Alerted**.

Состояние| Описание
----|----
Passed| Проблемы с данными не обнаружены, и никаких действий пользователя не требуется. 
Готово| К вашим данным были применены изменения. Мы рекомендуем пользователям просмотреть корректирующие действия, принятые Automated ML, чтобы убедиться, что изменения соответствуют ожидаемым результатам. 
Предупредил| Обнаружена проблема с данными, которая не может быть устранена. Мы рекомендуем пользователям пересмотреть и исправить проблему. 

>[!NOTE]
> Предыдущие версии автоматизированных экспериментов ML отображаются четвертое состояние: **Исправлено**. Новые эксперименты не будут отображать это состояние, и все ограждения, которые отображаются **фиксированное** состояние теперь будет **отображаться готово.**   

В следующей таблице описаны защищенные данные, поддерживаемые в настоящее время, и связанные с ними статусы, с которыми пользователи могут столкнуться при отправке эксперимента.

Ограждения|Состояние|Условие&nbsp;&nbsp;для триггера
---|---|---
Отсутствует значение значений функций |**Passed** <br><br><br> **Готово**| В обучающих данных не было обнаружено отсутствующих значений функций. Подробнее о [недостающей вычислении значений.](https://docs.microsoft.com/azure/machine-learning/how-to-use-automated-ml-for-ml-models#advanced-featurization-options) <br><br> Отсутствующие значения функций были обнаружены в ваших обучающих данных и ввелись.
Обработка функций высокой кардинальности |**Passed** <br><br><br> **Готово**| Ваши входы были проанализированы, и не были обнаружены особенности высокой кардинальности. Узнайте больше об [обнаружении функций высокой степени кардинальности.](https://docs.microsoft.com/azure/machine-learning/how-to-use-automated-ml-for-ml-models#advanced-featurization-options) <br><br> В ваших входных данных были обнаружены функции высокой кардинальности, которые были обработаны.
Обработка разделения валидации |**Готово**| *Конфигурация проверки была настроена на "авто", а обучающие данные содержали **менее** 20 000 строк.* <br> Каждая итерация обученной модели проверялась с помощью перекрестной проверки. Подробнее о [данных проверки.](https://docs.microsoft.com/azure/machine-learning/how-to-configure-auto-train#train-and-validation-data) <br><br> *Конфигурация проверки была настроена на "авто", а обучающие данные содержали **более** 20 000 строк.* <br> Данные ввода были разделены на набор обучаемых данных и набор данных проверки для проверки модели.
Обнаружение балансировки классов |**Passed** <br><br><br><br> **Предупредил** | Ваши входы были проанализированы, и все классы сбалансированы в ваших учебных данных. Набор данных считается сбалансированным, если каждый класс имеет хорошее представление в наборе данных, измеряемый количеством и соотношением выборок. <br><br><br> В входных данных были обнаружены несбалансированные классы. Чтобы исправить смещение модели, можно устранить проблему балансировки. Узнайте больше о [несбалансированных данных.](https://docs.microsoft.com/azure/machine-learning/concept-manage-ml-pitfalls#identify-models-with-imbalanced-data)
Обнаружение проблем с памятью |**Passed** <br><br><br><br> **Готово** |<br> Были проанализированы выбранные значения «горизонт, отставание, скользящее окно» (ы), и не было обнаружено никаких потенциальных проблем с вне памяти. Подробнее о [конфигурациях прогнозирования временных рядов.](https://docs.microsoft.com/azure/machine-learning/how-to-auto-train-forecast#configure-and-run-experiment) <br><br><br>Были проанализированы выбранные значения «горизонт, отставание, прокатки окон», что может привести к тому, что у эксперимента закончится память. Настройки запаздывания или оконного окна были выключены.
Обнаружение частот |**Passed** <br><br><br><br> **Готово** |<br> Были проанализированы временные ряды и приведены в соответствие с обнаруженной частотой. <br> <br> Были проанализированы временные ряды и обнаружены точки данных, не согласующиеся с обнаруженной частотой. Эти точки данных были удалены из набора данных. Подробнее о [подготовке данных к прогнозированию временных рядов.](https://docs.microsoft.com/azure/machine-learning/how-to-auto-train-forecast#preparing-data)

## <a name="run-experiment-and-view-results"></a>Запуск эксперимента и просмотра результатов

Выберите **finish** для запуска эксперимента. Подготовка эксперимента может занять до 10 мин. Выполнение заданий обучения может занять еще 2–3 минуты для завершения работы каждого конвейера.

### <a name="view-experiment-details"></a>Просмотр сведений об эксперименте

Экран **«Прогон»** открывается на вкладку **«Детали».** На этом экране отображается резюме выполнения эксперимента, включая панель статуса в верхней части рядом с номером выполнения. 

Вкладка **Модели** содержит список созданных моделей в порядке оценки метрики. По умолчанию модель с наивысшей оценкой, полученной на основе выбранной метрики, будет в верхней части списка. По мере того как задание обучения использует дополнительные модели, они добавляются в список. Используйте это для быстрого сравнения метрик созданных моделей.

[![Выполнить деткуру детали](media/how-to-use-automated-ml-for-ml-models/run-details.png)](media/how-to-use-automated-ml-for-ml-models/run-details-expanded.png#lightbox)

### <a name="view-training-run-details"></a>Просмотр деталей тренировочного запуска

Просверлите вниз на любой из завершенных моделей, чтобы увидеть детали обучаемого запуска, такие [Learn more about charts](how-to-understand-automated-ml.md)как метрики выполнения на вкладке **детали модели** или диаграммы производительности на **вкладке Визуализации.**

[![Детали итерации](media/how-to-use-automated-ml-for-ml-models/iteration-details.png)](media/how-to-use-automated-ml-for-ml-models/iteration-details-expanded.png)

## <a name="deploy-your-model"></a>Развертывание модели

Если у вас есть лучшая модель под рукой, пришло время развернуть ее в качестве веб-службы для прогнозирования новых данных.

Автоматизированный ML поможет вам с развертыванием модели без написания кода:

1. У вас есть несколько вариантов развертывания. 

    + Вариант 1: Для развертывания наилучшей модели (в соответствии с определенными критериями метрики) выберите кнопку **«Лучшая модель развертывания»** на вкладке **«Детали».**

    + Вариант 2: Чтобы развернуть определенную итерацию модели из этого эксперимента, просверлите модель, чтобы открыть вкладку **деталей модели** и выбрать **модель Deploy.**

1. Заполнить панель **модели развертываемых.**

    Поле| Значение
    ----|----
    Имя| Введите уникальное имя для развертывания.
    Описание| Введите описание, чтобы лучше определить, для чего предназначено это развертывание.
    Тип вычисления| Выберите тип конечной точки, который необходимо развернуть: *служба Azure Kubernetes (AKS)* или *Azure Container Instance (ACI).*
    Имя вычислительной среды| *Применяется только к AKS:* Выберите название кластера AKS, к развертываемому в группе AKS.
    Включить проверку подлинности | Выберите для проверки подлинности на основе токенов или ключей.
    Использовать настраиваемые ресурсы развертывания| Включите эту функцию, если вы хотите загрузить свой собственный скоринговый скрипт и файл среды. [Узнайте больше о скоринговых сценариях.](how-to-deploy-and-where.md#script)

    >[!Important]
    > Имена файлов должны быть под 32 символами и должны начинаться и заканчиваться с алфавитом. Может включать тире, подчеркнутые, точки, и алфавитные между ними. Пробелы недопустимы.

    *Расширенное* меню предлагает функции развертывания по умолчанию, такие как [настройки сбора данных](how-to-enable-app-insights.md) и использования ресурсов. Если вы хотите переопределить эти по умолчанию, сделайте это в этом меню.

1. Выберите **Развернуть**. Развертывание может занять около 20 минут.

Теперь у вас есть оперативный веб-сервис для создания прогнозов! Вы можете протестировать прогнозы, задав запрос службы из [службы Power BI, построенной в службе машинного обучения Azure.](how-to-consume-web-service.md#consume-the-service-from-power-bi)

## <a name="next-steps"></a>Дальнейшие действия

* [Узнайте, как использовать веб-сервис](https://docs.microsoft.com/azure/machine-learning/how-to-consume-web-service).
* [Понимание результатов автоматизированного машинного обучения.](how-to-understand-automated-ml.md)
* [Узнайте больше об автоматизированном машинном обучении](concept-automated-ml.md) и машинном обучении Azure.
