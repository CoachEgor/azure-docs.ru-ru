---
title: Создание автоматизированных моделей классификации ML
titleSuffix: Azure Machine Learning
description: Сведения о том, как обучать и развертывать модели классификации с помощью интерфейса автоматизированного машинного обучения службы "Машинное обучение Azure".
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
author: cartacioS
ms.author: sacartac
ms.reviewer: nibaccam
ms.date: 03/04/2020
ms.openlocfilehash: 8af412fb2660625ffb413052b06d4429d7844e70
ms.sourcegitcommit: fdec8e8bdbddcce5b7a0c4ffc6842154220c8b90
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2020
ms.locfileid: "83656514"
---
# <a name="tutorial-create-a-classification-model-with-automated-ml-in-azure-machine-learning"></a>Руководство по Создание модели классификации с использованием автоматизированного машинного обучения в службе "Машинное обучение Azure".
[!INCLUDE [applies-to-skus](../../includes/aml-applies-to-enterprise-sku.md)]

В этом руководстве вы узнаете, как с помощью интерфейса автоматизированного машинного обучения в службе "Машинное обучение Azure" создать базовую модель классификации, не написав ни одной строки кода. Эта модель классификации прогнозирует согласие клиента на депозит с фиксированным сроком, предложенный финансовым учреждением.

Автоматическое машинное обучение позволяет автоматизировать задачи, которые занимают много времени. Автоматическое машинное обучение позволяет быстро выполнить итерацию множества сочетаний алгоритмов и гиперпараметров, пока не будет найдена лучшая модель на основе выбранных удачных метрик.

Пример прогнозирования временных рядов см. в статье [Руководство. Прогнозирование спроса на прокат велосипедов с помощью автоматизированного машинного обучения](tutorial-automated-ml-forecast.md).

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Создайте рабочую область машинного обучения Azure.
> * Выполнение эксперимента автоматического машинного обучения.
> * Просмотр сведений об эксперименте.
> * Развертывание модели.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись Azure](https://aka.ms/AMLFree).

* Скачайте файл данных [**bankmarketing_train.csv**](https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv). Столбец **y** в нем указывает, подписан ли клиент на депозит с фиксированным сроком. Впоследствии он будет выбран в этом учебнике как целевой столбец для прогнозов. 

## <a name="create-a-workspace"></a>Создание рабочей области

Рабочая область машинного обучения Azure — это основной ресурс в облаке для экспериментов, обучения и развертывания моделей машинного обучения. Она связывает подписку и группу ресурсов Azure с легко используемым объектом в службе. 

Вы создаете рабочую область с помощью портала Azure, веб-консоли для управления ресурсами Azure.

[!INCLUDE [aml-create-portal](../../includes/aml-create-in-portal-enterprise.md)]

>[!IMPORTANT] 
> Запишите **рабочую область** и **подписку**. Они понадобятся вам для того, чтобы создать эксперимент в нужном месте. 

## <a name="create-and-run-the-experiment"></a>Создание и запуск эксперимента

Выполните следующие действия по настройке и выполнению эксперимента с помощью Машинного обучения Azure в объединенном веб-интерфейсе https://ml.azure.com, включающем в себя средства машинного обучения для выполнения сценариев обработки и анализа данных и предназначенном для специалистов в этой области с любым уровнем навыков. Этот интерфейс не поддерживается в браузерах Internet Explorer.

1. Войдите в [Машинное обучение Azure](https://ml.azure.com).

1. Выберите свою подписку и рабочую область, которую создали.

1. Выберите **Начать**.

1. На панели слева выберите **Automated ML** (Автоматизированное ML) в разделе **Автор**.

   Так как это ваш первый эксперимент автоматизированного машинного обучения, вы увидите пустой список и ссылки на документацию.

   ![Страница "Начало работы"](./media/tutorial-first-experiment-automated-ml/get-started.png)

1. Выберите **New automated ML run** (Новое выполнение автоматизированного машинного обучения). 

1. Создайте набор данных, выбрав из раскрывающегося списка **+ Create DataSet** (+Создать набор данных) пункт **From local files** (Из локальных файлов). 

    1. В форме **Общие сведения** присвойте набору данных имя и по желанию добавьте описание. Так как интерфейс автоматизированного машинного обучения сейчас поддерживает только табличные наборы данных, по умолчанию следует использовать тип набора данных *Табличный*.

    1. Выберите **Далее** внизу слева.

    1. В форме **Выбор хранилища данных и файлов** выберите хранилище данных по умолчанию, которое было автоматически настроено при создании рабочей области **workspaceblobstore (хранилище BLOB-объектов Azure)** . Сюда вы будете загружать файл данных, чтобы сделать его доступным для рабочей области.

    1. Нажмите кнопку **Обзор**.
    
    1. Выберите файл **bankmarketing_train.csv** на локальном компьютере. Это тот файл, который вы скачали при подготовке [необходимых компонентов](https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv).

    1. Присвойте набору данных уникальное имя и укажите дополнительное описание. 

    1. Нажмите кнопку **Далее** внизу слева, чтобы отправить его в контейнер по умолчанию, который был автоматически настроен при создании рабочей области.  
    
       Когда загрузка завершится, форма "Settings and preview" (Настройки и предварительный просмотр) будет автоматически заполнена в зависимости от типа файла. 
       
    1. Убедитесь, что форма **Settings and preview** (Настройки и предварительный просмотр) заполнена, как описано ниже, и щелкните **Далее**.
        
        Поле|Описание| Значение для руководства
        ---|---|---
        Формат файла|Свойство определяет структуру и тип данных, хранящихся в файле.| С разделителями
        Разделитель|Один или несколько символов для указания границы между&nbsp; отдельными, независимыми регионами в виде простого текста или других потоков данных. |Запятая
        Кодирование|Определяет, какой бит следует использовать в таблице схемы символов, чтобы считать набор данных.| UTF-8
        Заголовки столбцов| Указывает, как будут обрабатываться заголовки набора данных, если таковые имеются.| Все файлы имеют одинаковые заголовки
        Пропустить строки | Указывает, сколько строк, если таковые имеются, пропускается в наборе данных.| None

    1. Форма **Схема** позволяет выполнять дальнейшую настройку данных для этого эксперимента. В этом примере выберите переключатель для функции **day_of_week**, чтобы не включать его в этот эксперимент. Выберите **Далее**.

        ![Конфигурация на вкладке "Предварительный просмотр"](./media/tutorial-first-experiment-automated-ml/schema-tab-config.gif)

    1. В форме **Confirm details** (Подтверждение сведений) проверьте правильность сведений, которые ранее были введены в формах **Basic info** (Базовые сведения) и **Settings and preview** (Параметры и просмотр).
    1. Выберите **Создать**, чтобы завершить создание набора данных.
    1. Выберите набор данных, когда он появится в списке.
    1. Используйте **Просмотр данных**, чтобы убедиться, что вы не включили **day_of_week**, затем выберите **ОК**.

    1. Нажмите кнопку **Далее**.

1. Заполните форму **Configure Run** (Настройка выполнения) следующим образом.
    1. Введите для эксперимента имя `my-1st-automl-experiment`.

    1. Выберите **y** в качестве столбца целевого объекта, для которого будут выполняться прогнозы. Этот столбец содержит сведения о том, подписан ли клиент на срочный депозит или нет.
    1. Щелкните **Create a new compute** (Создать новую вычислительную среду) и настройте целевой объект вычислений. Целевым объектом вычислений называется локальная или облачная среда, в которой будет запущен сценарий обучения или размещена развернутая служба. Для этого эксперимента мы используем облачный вычислительный ресурс. 

        Поле | Описание | Значение для руководства
        ----|---|---
        Имя вычислительной среды |Уникальное имя для идентификации контекста вычислительной среды.|automl-compute
        Virtual&nbsp;machine&nbsp;size| Выберите размер виртуальной машины для вычислительной среды.|Standard_DS12_V2
        Минимальное и максимальное кол-во узлов (в дополнительных параметрах)| Для профилирования данных необходимо указать один или больше узлов.|Min nodes (Минимум узлов): 1<br>Max nodes (Максимум узлов): 6
  
        1. Выберите **Создать**, чтобы получить целевой объект вычислений. 

            **Операция займет несколько минут.** 

        1. Когда создание целевого объекта вычислений завершится, выберите его из раскрывающегося списка.

    1. Выберите **Далее**.

1. В форме **Тип и параметры задачи** в качестве типа задачи машинного обучения выберите **Классификация**.

    1. Выберите **View additional configuration settings** (Просмотреть дополнительные параметры конфигурации) и заполните поля следующим образом. Эти настройки предназначены для лучшего управления заданием для обучения. В противном случае применяются значения по умолчанию, основанные на выборе эксперимента и данных.

        >[!NOTE]
        > В рамках этого руководства не нужно задавать метрику или максимальное количество ядер для каждого порога итерации. Также не требуется блокировать тестирование алгоритмов.
   
        Дополнительные&nbsp;конфигурации|Описание|Значение&nbsp;для&nbsp;руководства
        ------|---------|---
        Основная метрика| Оценочная метрика, по которой будет проверяться алгоритм машинного обучения.|AUC_weighted
        Автоматическое выделение признаков| Обеспечивает предварительную обработку. Сюда входит автоматическая очистка данных, подготовка и преобразование для создания синтетических функций.| Включить
        Запрещенные алгоритмы | Алгоритмы, которые вы хотите исключить из задания обучения.| None
        Критерий выхода| Если условия соблюдены, задание обучения останавливается. |Время&nbsp;задания&nbsp;обучения (ч): 1 <br> Порог&nbsp;оценки&nbsp;метрики: None
        Проверка | Выберите тип перекрестной проверки и число тестов.|Тип проверки:<br>перекрестная проверка в &nbsp;k-кратном порядке&nbsp;. <br> <br> Количество проверок: 2
        Параллелизм| Максимальное число выполняемых параллельных итераций за одну итерацию.| Максимальное число&nbsp;параллельных&nbsp;итераций: 5
        
        Щелкните **Сохранить**.

1. Нажмите кнопку **Готово**, чтобы запустить эксперимент. Откроется экран **Сведения о выполнении**, содержащий в верхней части значение **Состояние выполнения** после начала подготовки эксперимента.

>[!IMPORTANT]
> Подготовка к запуску эксперимента занимает **10-15 минут**.
> С начала эксперимента на каждую итерацию уходит **2-3 минуты**.  
> Чтобы увидеть состояние выполнения в ходе выполнения эксперимента, периодически щелкайте **Обновить**.
>
> В рабочей среде у вас будет время заняться другими делами. Но в рамках этого учебника мы рекомендуем начинать изучение протестированных алгоритмов на вкладке **Модели** сразу по мере их появления, пока остальные алгоритмы еще выполняются. 

##  <a name="explore-models"></a>Изучение моделей

Перейдите на вкладку **Модели**, чтобы просмотреть протестированные алгоритмы (модели). По умолчанию модели упорядочиваются по оценке метрики по мере их завершения. В этом учебнике в начале списка отображается модель, имеющая наибольшее значение по выбранной метрике **AUC_weighted**.

В ожидании завершения всех моделей эксперимента вы можете щелкнуть **Algorithm name** (Имя алгоритма) для любой завершенной модели, чтобы просмотреть сведения о ее эффективности. 

Чтобы просмотреть свойства, метрики и диаграммы производительности выбранной модели, воспользуйтесь вкладками **Сведения о модели** и **Визуализации**. 

![Сведения о выполнении итераций](./media/tutorial-first-experiment-automated-ml/run-detail.gif)

## <a name="deploy-the-best-model"></a>Развертывание лучшей модели

Интерфейс автоматизированного машинного обучения позволяет развернуть лучшую модель как веб-службу, выполнив всего несколько действий. Развертывание — это интеграция модели для прогнозирования по новым данным и определения потенциальных новых возможностей. 

Для этого эксперимента развертывание в веб-службе предоставит финансовому учреждению итеративное и масштабируемое решение для определения потенциальных клиентов по депозитам с фиксированным сроком. 

После завершения выполнения вернитесь на страницу **Сведения о выполнении** и выберите вкладку **Модели**.

В контексте этого эксперимента лучшей моделью принимается **VotingEnsemble**, исходя из значения метрики **AUC_weighted**.  Мы развернем эту модель. Учитывайте, что процесс развертывания занимает около 20 минут. Процесс развертывания выполняется за несколько шагов, включая регистрацию модели, создание ресурсов и их настройку для веб-службы.

1. Нажмите кнопку **Deploy Best Model** (Развернуть лучшую модель) в нижнем левом углу.

1. Заполните панель **Deploy a model** (Развертывание модели), как показано ниже.

    Поле| Значение
    ----|----
    Deployment name (Имя развертывания)| my-automl-deploy
    Deployment description (Описание развертывания)| My first automated machine learning experiment deployment (Первое развертывание эксперимента автоматического машинного обучения)
    Тип вычисления | Выберите "Вычислительная операция Azure (ACI)"
    Включить проверку подлинности| Отключите. 
    Использовать настраиваемые развертывания| Отключите. Это позволяет автоматически создавать файл драйвера (скрипт оценки) и файл среды по умолчанию. 
    
    Для этого примера мы воспользуемся стандартными параметрами, доступными в меню *Дополнительно*. 

1. Выберите **Развернуть**.  

    В верхней части экрана **Выполнение** появится сообщение об успешном выполнении, выделенное зеленым цветом, а под надписью **Состояние развертывания** на панели **Рекомендуемая модель** появится сообщение о состоянии. Периодически щелкайте **Обновить**, чтобы проверять состояние развертывания.
    
Теперь у вас есть рабочая веб-служба для создания прогнозов. 

Перейдите к [**дальнейшим действиям**](#next-steps), чтобы узнать больше о том, как использовать новую веб-службу, и протестируйте прогнозы, используя встроенную поддержку Power BI в Машинном обучении Azure.

## <a name="clean-up-resources"></a>Очистка ресурсов

Файлы развертывания имеют больший размер, чем файлы данных и экспериментов, поэтому их хранение обходится дороже. Вы можете удалить только файлы развертывания, чтобы снизить затраты на учетную запись, если хотите сохранить рабочую области и файлы экспериментов. В противном случае, если вы не планируете дальше использовать эти файлы, удалите всю группу ресурсов.  

### <a name="delete-the-deployment-instance"></a>Удаление промежуточного развертывания

Чтобы сохранить группу ресурсов и рабочую область для изучения других руководств и собственных исследований, удалите из службы "Машинное обучение Azure" по адресу https:\//ml.azure.com/ только экземпляр развертывания. 

1. Перейдите в [Машинное обучение Azure](https://ml.azure.com/). Перейдите в свою рабочую область и слева под областью **Ресурсы** выберите **Конечные точки**. 

1. Выберите развертывание для удаления и щелкните **Удалить**. 

1. Выберите **Продолжить**.

### <a name="delete-the-resource-group"></a>удаление группы ресурсов.

[!INCLUDE [aml-delete-resource-group](../../includes/aml-delete-resource-group.md)]

## <a name="next-steps"></a>Дальнейшие действия

В ходе работы с этим руководством по автоматизированному машинному обучению вы создали и развернули модель классификации с помощью интерфейса автоматизированного машинного обучения в службе "Машинное обучение Azure". Дополнительные сведения и дальнейшие процедуры вы найдете в следующих статьях:

> [!div class="nextstepaction"]
> [Использование веб-службы](how-to-consume-web-service.md#consume-the-service-from-power-bi)

+ Дополнительные сведения [об автоматическом машинном обучении](concept-automated-ml.md).
+ Дополнительные сведения о классификационных метриках и графиках см. в статье [Общие сведения об автоматических результатах машинного обучения](how-to-understand-automated-ml.md#classification).
+ Подробная информация о [добавлении признаков](how-to-use-automated-ml-for-ml-models.md#featurization).
+ Подробная информация [о профилировании данных](how-to-use-automated-ml-for-ml-models.md#profile).


>[!NOTE]
> Этот набор данных о банковском маркетинге предоставляется на условиях лицензии [Creative Commons (CCO: Public Domain)](https://creativecommons.org/publicdomain/zero/1.0/). Все права на отдельное содержимое базы данных предоставляются на условиях [лицензии на содержимое базы данных](https://creativecommons.org/publicdomain/zero/1.0/) и доступны в [Kaggle](https://www.kaggle.com/janiobachmann/bank-marketing-dataset). Этот набор данных изначально предоставлялся в [базе данных UCI для машинного обучения](https://archive.ics.uci.edu/ml/datasets/bank+marketing).<br><br>
> [Moro et al., 2014] S. Moro, P. Cortez and P. Rita. A Data-Driven Approach to Predict the Success of Bank Telemarketing. (Основанный на данных подход, позволяющий прогнозировать успешность телемаркетинга в банке.) Decision Support Systems (Системы поддержки принятия решений), Elsevier, 62:22-31, Июнь 2014 г.
