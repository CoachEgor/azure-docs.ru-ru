---
title: Как модель становится веб-сервисом
titleSuffix: ML Studio (classic) - Azure
description: Обзор механики того, как ваша модель Azure Machine Learning Studio (классическая) переходит от эксперимента разработки к веб-службе.
services: machine-learning
ms.service: machine-learning
ms.subservice: studio
ms.topic: conceptual
author: likebupt
ms.author: keli19
ms.custom: previous-ms.author=yahajiza, previous-author=YasinMSFT
ms.date: 03/20/2017
ms.openlocfilehash: e6a8fe7771776a92b3c28a188bc352e3bb105313
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79217922"
---
# <a name="how-a-machine-learning-studio-classic-model-progresses-from-an-experiment-to-a-web-service"></a>Как модель Машинного обучения (классическая) переходит от эксперимента к веб-службе

[!INCLUDE [Notebook deprecation notice](../../../includes/aml-studio-notebook-notice.md)]
Студия машинного обучения Azure (классическая) предоставляет интерактивное полотно, которое позволяет разрабатывать, запускать, тестировать и итерировать ***эксперимент,*** представляющий модель прогностического анализа. Существует множество модулей для следующих задач:

* ввод данных в эксперимент;
* обработка данных
* обучение модели с помощью алгоритмов машинного обучения;
* Оценка модели
* анализ результатов;
* вывод полученных данных.

После того, как вы удовлетворены экспериментом, вы можете развернуть его в качестве ***веб-службы Classic Azure Machine Learning Web*** или ***новой web-службы Машинного обучения Azure,*** чтобы пользователи могли отправлять новые данные и получать обратные результаты.

В этой статье описывается механизм развития модели машинного обучения от эксперимента по разработке до рабочей веб-службы.

> [!NOTE]
> Существуют и другие способы разработки и развертывания моделей машинного обучения, но эта статья посвящена использованию студии машинного обучения (классический). Пример того, как создать классическую прогнозную веб-службу, используя R, см. в записи блога [Build & Deploy Predictive Web Apps Using RStudio and Azure ML](https://blogs.technet.com/b/machinelearning/archive/2015/09/25/build-and-deploy-a-predictive-web-app-using-rstudio-and-azure-ml.aspx) (Создание и развертывание прогнозных веб-приложений с помощью RStudio и Студии машинного обучения Azure).
>
>

В то время как Azure Machine Learning Studio (классическая) разработана, чтобы помочь вам разработать и развернуть *модель прогностического анализа,* можно использовать Studio (классический) для разработки эксперимента, который не включает в себя модель прогностического анализа. Например, эксперимент может просто вводить данные, выполнять с ними манипуляции и выдавать результат. Так же, как эксперимент прогностического анализа, вы можете развернуть этот непрогностический эксперимент в качестве веб-службы, но это более простой процесс, потому что эксперимент не обучение или забил модели машинного обучения. Хотя это не типично для использования Studio (классический) таким образом, мы будем включать его в дискуссию, чтобы мы могли дать полное объяснение того, как Studio (классический) работ.

## <a name="developing-and-deploying-a-predictive-web-service"></a>Разработка и развертывание прогнозной веб-службы
Вот этапы, которые типичное решение следует, как вы разрабатываете и развертываете его с помощью машинного обучения Studio (классический):

![Рабочий поток развертывания](./media/model-progression-experiment-to-web-service/model-stages-from-experiment-to-web-service.png)

*Рис. 1. Этапы типичной модели прогнозной аналитики*

### <a name="the-training-experiment"></a>Обучающий эксперимент
***Учебный эксперимент*** является начальной фазой разработки веб-сервиса в студии машинного обучения (классический). Обучающий эксперимент предоставляет вам пространство для разработки, тестирования, выполнения итераций и в конечном итоге обучения модели машинного обучения. Вы даже можете обучать несколько моделей одновременно, как вы ищете лучшее решение, но как только вы закончите экспериментировать вы выберете одну обученную модель и устранить остальные из эксперимента. В качестве примера разработки эксперимента [Develop a predictive analytics solution for credit risk assessment in Azure Machine Learning Studio (classic)](tutorial-part1-credit-risk.md)по прогностическому анализу см.

### <a name="the-predictive-experiment"></a>Прогнозный эксперимент
Если у вас есть обученная модель в учебном эксперименте, нажмите **Set Up Web Service** и выберите **прогностический веб-сервис** в студии машинного обучения (классический), чтобы инициировать процесс преобразования учебного эксперимента в ***прогностический эксперимент.*** Цель прогнозного эксперимента заключается в использовании обученной модели для оценки новых данных, чтобы впоследствии эта модель стала рабочей веб-службой Azure.

Для преобразования выполняются следующие действия:

* преобразование набора модулей, используемых для обучения, в один модуль и сохранение его как обученной модели;
* удаление всех лишних модулей, не связанных с оценкой;
* добавление портов ввода и вывода, которые в дальнейшем будет использовать веб-служба.

Возможно, вы захотите внести дополнительные изменения, чтобы подготовить прогнозный эксперимент к развертыванию в качестве веб-службы. Например, если веб-служба будет выводить не все результаты, а некоторое их подмножество, перед портом вывода можно добавить модуль фильтрации.

В процессе преобразования обучающий эксперимент не удаляется. Когда процесс завершен, у вас есть две вкладки в Studio (классический): один для учебного эксперимента и один для прогностического эксперимента. Таким образом, перед развертыванием веб-службы можно внести изменения в обучающий эксперимент и заново создать прогнозный эксперимент. Кроме того, можно сохранить копию обучающего эксперимента, чтобы начать новый эксперимент.

> [!NOTE]
> Когда вы щелкнете **Predictive Web Service** (Прогнозная веб-служба), начнется преобразование обучающего эксперимента в прогнозный эксперимент. В большинстве случаев этого достаточно. Если же вы работаете над сложным обучающим экспериментом (например, объединяете несколько путей для обучения), можно выполнить преобразование вручную. Для получения дополнительной информации [см. Как подготовить модель к развертыванию в Azure Machine Learning Studio (классический)](convert-training-experiment-to-scoring-experiment.md).
>
>

### <a name="the-web-service"></a>Веб-служба
После того, как вы убедитесь в том, что ваш прогностический эксперимент готов, можно развернуть службу как классическую веб-службу, либо новую web-службу на основе менеджера ресурсов Azure. Чтобы развернуть модель как *классическую веб-службу машинного обучения*, щелкните **Deploy Web Service** (Развернуть веб-службу) и выберите **Deploy Web Service [Classic]** (Развернуть веб-службу [классическую]). Чтобы развернуть модель как *новую веб-службу машинного обучения*, щелкните **Deploy Web Service** (Развернуть веб-службу) и выберите **Deploy Web Service [New]** (Развернуть веб-службу [новую]). Пользователи теперь могут отправлять данные в вашу модель с помощью REST API веб-службы и получать результаты. Дополнительные сведения см. в статье [Как использовать веб-службу машинного обучения Azure, развернутую из эксперимента машинного обучения](consume-web-services.md).

## <a name="the-non-typical-case-creating-a-non-predictive-web-service"></a>Нетипичный случай. Создание непрогнозной веб-службы
Если ваш эксперимент не тренирует модель прогностического анализа, то вам не нужно создавать как учебный эксперимент, так и скоринговой эксперимент - есть только один эксперимент, и вы можете развернуть его в виде web-сервиса. Студия машинного обучения (классическая) определяет, содержит ли ваш эксперимент прогностический модель, анализируя используемые модули.

После того как вы итерировали на вашем эксперименте и удовлетворены им:

1. Щелкните **Set Up Web Service** (Настроить веб-службу) и выберите вариант **Retraining Web Service** (Переобучение веб-службы). Входные и выходные узлы будут добавлены автоматически.
2. Нажмите **Выполнить**
3. Щелкните **Deploy Web Service** (Развернуть веб-службу) и выберите вариант **Deploy Web Service [Classic]** (Развернуть веб-службу [классическую]) или **Deploy Web Service [New]** (Развернуть веб-службу [новую]), в зависимости от среды, где будет выполняться развертывание.

Теперь ваша веб-служба развернута, к ней можно получить доступ и управлять ею так же, как прогнозной веб-службой.

## <a name="updating-your-web-service"></a>Обновление веб-службы
Теперь, когда вы развернули эксперимент в качестве веб-службы, что, если вам нужно обновить его?

Это зависит от того, что именно необходимо обновить.

**Необходимо изменить входные или выходные данные или изменить способ обработки данных в веб-службе**

Если вы не меняете модель, а просто меняете способ обработки данных Web-службой, можно отсеять прогностический эксперимент, а затем нажать **на развертывание веб-службы** и выбрать **развертывание веб-службы «Классический»** или **«Развертывание веб-службы»** снова. Работа веб-службы будет остановлена, обновленный прогнозный эксперимент будет развернут, а затем веб-служба запустится снова.

Вот пример: предположим, что прогностический эксперимент возвращает весь ряд входных данных с прогнозируемым результатом. Вы можете настроить веб-службу, чтобы она возвращала только результат. Для этого в прогнозном эксперименте непосредственно перед портом вывода можно добавить модуль **Столбцы проекта** , чтобы исключить все столбцы, кроме результата. Если еще раз щелкнуть **Deploy Web Service** (Развернуть веб-службу) и выбрать **Deploy Web Service [Classic]** (Развернуть веб-службу [классическую]) или **Deploy Web Service [New]** (Развернуть веб-службу [новую]), то веб-служба обновится.

**Необходимо выполнить переобучение модели с использованием новых данных**

Если вы хотите сохранить модель машинного обучения и переобучить ее с использованием новых данных, для этого есть два варианта.

1. **Переобучение модели во время работы веб-службы**. Если нужно переобучить модель, не останавливая работу прогнозной веб-службы, можно внести несколько изменений в обучающий эксперимент и преобразовать его в ***переобучающий эксперимент***, а затем развернуть его в качестве ***веб-службы* переобучения**. Дополнительные сведения об этом процессе см. в статье [Программное переобучение моделей машинного обучения](/azure/machine-learning/studio/retrain-machine-learning-model).
2. **Возврат к исходному обучающему эксперименту и использование для разработки модели другого набора данных для обучения.** Прогнозный эксперимент связан с веб-службой, но обучающий эксперимент не имеет прямой связи с ней. Если изменить исходный обучающий эксперимент и щелкнуть **Set Up Web Service** (Настроить веб-службу), то будет создан *другой* прогнозный эксперимент, который после развертывания создаст *другую* веб-службу. Это не просто обновление исходного веб-службы.

   Если необходимо изменить обучающий эксперимент, откройте его и выберите команду **Сохранить как**, чтобы создать его копию. Так вы сохраните в неизменном виде исходный обучающий эксперимент, прогнозный эксперимент и веб-службу. Теперь вы можете создать другую веб-службу, внеся необходимые изменения. После развертывания новой Web-службы можно решить, следует ли прекратить работу предыдущей Web-службы или сохранить ее рядом с новой службой.

**Необходимо обучить другую модель**

Если требуется внести изменения в исходный прогнозный эксперимент, например выбрать другой алгоритм машинного обучения, опробовать другой метод обучения и т. д., то вам следует выполнить вторую из процедур выше, предназначенную для переобучения модели. Откройте обучающий эксперимент, выберите команду **Сохранить как**, чтобы создать копию, а затем повторите весь процесс разработки модели, создания прогнозного эксперимента и развертывания веб-службы. В результате у вас будет новая веб-служба, несвязанная с исходной. Можно выбрать, какая из них будет выполняться, или оставить в работе обе.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о процессе разработки и эксперименте см. в следующих статьях.

* преобразование эксперимента - [Как подготовить модель к развертыванию в студии машинного обучения Azure (классический)](convert-training-experiment-to-scoring-experiment.md)
* Развертывание веб-службы: [Развертывание веб-службы машинного обучения Azure](deploy-a-machine-learning-web-service.md).
* Переобучение модели: [программное переобучение моделей машинного обучения](/azure/machine-learning/studio/retrain-machine-learning-model)

Примеры всего процесса см. в этих статьях.

* [Учебник по машинным обучению: Создайте свой первый эксперимент в студии машинного обучения Azure (классический)](create-experiment.md)
* [Пошаговая прогулка: Разработка решения для прогнозной аналитики для оценки кредитного риска в Azure Machine Learning](tutorial-part1-credit-risk.md)

