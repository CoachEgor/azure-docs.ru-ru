---
title: Как модель превращается в веб-службу
titleSuffix: ML Studio (classic) - Azure
description: Обзор принципа работы модели Машинное обучение Azure Studio (классической) от эксперимента по разработке с веб-службой.
services: machine-learning
ms.service: machine-learning
ms.subservice: studio
ms.topic: conceptual
author: likebupt
ms.author: keli19
ms.custom: previous-ms.author=yahajiza, previous-author=YasinMSFT
ms.date: 03/20/2017
ms.openlocfilehash: e6a8fe7771776a92b3c28a188bc352e3bb105313
ms.sourcegitcommit: 7b25c9981b52c385af77feb022825c1be6ff55bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/13/2020
ms.locfileid: "79217922"
---
# <a name="how-a-machine-learning-studio-classic-model-progresses-from-an-experiment-to-a-web-service"></a>Прогресс модели Машинное обучение Studio (классической) от эксперимента с веб-службой

[!INCLUDE [Notebook deprecation notice](../../../includes/aml-studio-notebook-notice.md)]
Машинное обучение Azure Studio (классическая модель) предоставляет интерактивный холст, позволяющий разрабатывать, запускать, тестировать и перебирать ***эксперименты*** , представляющие модели прогнозного анализа. Существует множество модулей для следующих задач:

* ввод данных в эксперимент;
* обработка данных
* обучение модели с помощью алгоритмов машинного обучения;
* Оценка модели
* анализ результатов;
* вывод полученных данных.

Если вы удовлетворены Вашим экспериментом, его можно развернуть как ***классическую машинное обучение Azure веб-службу*** или ***новую машинное обучение Azure веб-службу*** , чтобы пользователи могли отправлять новые данные и получать результаты обратно.

В этой статье описывается механизм развития модели машинного обучения от эксперимента по разработке до рабочей веб-службы.

> [!NOTE]
> Существуют и другие способы разработки и развертывания моделей машинного обучения, но эта статья посвящена использованию Машинное обучение Studio (классическая модель). Пример того, как создать классическую прогнозную веб-службу, используя R, см. в записи блога [Build & Deploy Predictive Web Apps Using RStudio and Azure ML](https://blogs.technet.com/b/machinelearning/archive/2015/09/25/build-and-deploy-a-predictive-web-app-using-rstudio-and-azure-ml.aspx) (Создание и развертывание прогнозных веб-приложений с помощью RStudio и Студии машинного обучения Azure).
>
>

Хотя Машинное обучение Azure Studio (классическая модель) призвана помочь в разработке и развертывании *модели прогнозной аналитики*, можно использовать Studio (классическая модель) для разработки эксперимента, не включающего модели прогнозной аналитики. Например, эксперимент может просто вводить данные, выполнять с ними манипуляции и выдавать результат. Как и эксперимент прогнозного анализа, этот непрогнозируемый эксперимент можно развернуть как веб-службу, но это более простой процесс, так как эксперимент не выполняет обучение или оценку модели машинного обучения. Хотя это и не является типичным вариантом использования Studio (классической), мы будем включать его в обсуждение, чтобы мы могли получить полное объяснение того, как работает студия (классическая модель).

## <a name="developing-and-deploying-a-predictive-web-service"></a>Разработка и развертывание прогнозной веб-службы
Ниже приведены этапы, которые следует использовать в качестве типичного решения при разработке и развертывании с помощью Машинное обучение Studio (классическая модель).

![Рабочий поток развертывания](./media/model-progression-experiment-to-web-service/model-stages-from-experiment-to-web-service.png)

*Рис. 1. Этапы типичной модели прогнозной аналитики*

### <a name="the-training-experiment"></a>Обучающий эксперимент
***Обучающий эксперимент*** — это начальный этап разработки веб-службы в машинное обучение Studio (классическая модель). Обучающий эксперимент предоставляет вам пространство для разработки, тестирования, выполнения итераций и в конечном итоге обучения модели машинного обучения. Вы даже можете одновременно обучать несколько моделей по мере того, как вы ищете лучшее решение, но после того как вы закончите эксперимент, вы сможете выбрать одну обученную модель и исключить оставшуюся из эксперимента. Пример разработки эксперимента прогнозного анализа см. [в статье Разработка решения прогнозной аналитики для оценки кредитных рисков в машинное обучение Azure Studio (классическая модель)](tutorial-part1-credit-risk.md).

### <a name="the-predictive-experiment"></a>Прогнозный эксперимент
Получив обученную модель в обучающем эксперименте, щелкните **Настройка веб-службы** и выберите пункт **прогнозная веб-служба** в машинное обучение Studio (классическая модель), чтобы начать процесс преобразования обучающего эксперимента в ***прогнозный эксперимент***. Цель прогнозного эксперимента заключается в использовании обученной модели для оценки новых данных, чтобы впоследствии эта модель стала рабочей веб-службой Azure.

Для преобразования выполняются следующие действия:

* преобразование набора модулей, используемых для обучения, в один модуль и сохранение его как обученной модели;
* удаление всех лишних модулей, не связанных с оценкой;
* добавление портов ввода и вывода, которые в дальнейшем будет использовать веб-служба.

Возможно, вы захотите внести дополнительные изменения, чтобы подготовить прогнозный эксперимент к развертыванию в качестве веб-службы. Например, если веб-служба будет выводить не все результаты, а некоторое их подмножество, перед портом вывода можно добавить модуль фильтрации.

В процессе преобразования обучающий эксперимент не удаляется. По завершении процесса у вас есть две вкладки в студии (классическая модель): одна для обучающего эксперимента и одна для прогнозного эксперимента. Таким образом, перед развертыванием веб-службы можно внести изменения в обучающий эксперимент и заново создать прогнозный эксперимент. Кроме того, можно сохранить копию обучающего эксперимента, чтобы начать новый эксперимент.

> [!NOTE]
> Когда вы щелкнете **Predictive Web Service** (Прогнозная веб-служба), начнется преобразование обучающего эксперимента в прогнозный эксперимент. В большинстве случаев этого достаточно. Если же вы работаете над сложным обучающим экспериментом (например, объединяете несколько путей для обучения), можно выполнить преобразование вручную. Дополнительные сведения см. [в статье Подготовка модели к развертыванию в машинное обучение Azure Studio (классическая модель)](convert-training-experiment-to-scoring-experiment.md).
>
>

### <a name="the-web-service"></a>Веб-служба
Если вы удовлетворены тем, что прогнозный эксперимент готов, вы можете развернуть службу как классическую веб-службу или новую веб-службу на основе Azure Resource Manager. Чтобы развернуть модель как *классическую веб-службу машинного обучения*, щелкните **Deploy Web Service** (Развернуть веб-службу) и выберите **Deploy Web Service [Classic]** (Развернуть веб-службу [классическую]). Чтобы развернуть модель как *новую веб-службу машинного обучения*, щелкните **Deploy Web Service** (Развернуть веб-службу) и выберите **Deploy Web Service [New]** (Развернуть веб-службу [новую]). Пользователи теперь могут отправлять данные в вашу модель с помощью REST API веб-службы и получать результаты. Дополнительные сведения см. в статье [Как использовать веб-службу машинного обучения Azure, развернутую из эксперимента машинного обучения](consume-web-services.md).

## <a name="the-non-typical-case-creating-a-non-predictive-web-service"></a>Нетипичный случай. Создание непрогнозной веб-службы
Если в вашем эксперименте не выполняется обучение модели прогнозного анализа, вам не нужно создавать обучающий эксперимент и эксперименты с оценкой — есть только один эксперимент, который можно развернуть как веб-службу. Машинное обучение Studio (классический) определяет, содержит ли ваш эксперимент прогнозную модель путем анализа используемых модулей.

После выполнения итерации по эксперименту и их удовлетворенности:

1. Щелкните **Set Up Web Service** (Настроить веб-службу) и выберите вариант **Retraining Web Service** (Переобучение веб-службы). Входные и выходные узлы будут добавлены автоматически.
2. Нажмите кнопку **Выполнить**
3. Щелкните **Deploy Web Service** (Развернуть веб-службу) и выберите вариант **Deploy Web Service [Classic]** (Развернуть веб-службу [классическую]) или **Deploy Web Service [New]** (Развернуть веб-службу [новую]), в зависимости от среды, где будет выполняться развертывание.

Теперь ваша веб-служба развернута, к ней можно получить доступ и управлять ею так же, как прогнозной веб-службой.

## <a name="updating-your-web-service"></a>Обновление веб-службы
Теперь, когда вы развернули эксперимент в качестве веб-службы, что делать, если вам нужно обновить ее?

Это зависит от того, что именно необходимо обновить.

**Необходимо изменить входные или выходные данные или изменить способ обработки данных в веб-службе**

Если вы не изменяете модель, но только изменяете способ обработки данных веб-службой, можно изменить прогнозный эксперимент, а затем нажать кнопку **развернуть веб-** службу и выбрать пункт развернуть веб-службу **[классическая]** или развернуть веб-службу [ **создать]** еще раз. Работа веб-службы будет остановлена, обновленный прогнозный эксперимент будет развернут, а затем веб-служба запустится снова.

Вот пример: Предположим, что прогнозный эксперимент возвращает всю строку входных данных с прогнозируемым результатом. Вы можете настроить веб-службу, чтобы она возвращала только результат. Для этого в прогнозном эксперименте непосредственно перед портом вывода можно добавить модуль **Столбцы проекта** , чтобы исключить все столбцы, кроме результата. Если еще раз щелкнуть **Deploy Web Service** (Развернуть веб-службу) и выбрать **Deploy Web Service [Classic]** (Развернуть веб-службу [классическую]) или **Deploy Web Service [New]** (Развернуть веб-службу [новую]), то веб-служба обновится.

**Необходимо выполнить переобучение модели с использованием новых данных**

Если вы хотите сохранить модель машинного обучения и переобучить ее с использованием новых данных, для этого есть два варианта.

1. **Переобучение модели во время работы веб-службы**. Если нужно переобучить модель, не останавливая работу прогнозной веб-службы, можно внести несколько изменений в обучающий эксперимент и преобразовать его в ***переобучающий эксперимент***, а затем развернуть его в качестве ***веб-службы* переобучения**. Дополнительные сведения об этом процессе см. в статье [Программное переобучение моделей машинного обучения](/azure/machine-learning/studio/retrain-machine-learning-model).
2. **Возврат к исходному обучающему эксперименту и использование для разработки модели другого набора данных для обучения.** Прогнозный эксперимент связан с веб-службой, но обучающий эксперимент не имеет прямой связи с ней. Если изменить исходный обучающий эксперимент и щелкнуть **Set Up Web Service** (Настроить веб-службу), то будет создан *другой* прогнозный эксперимент, который после развертывания создаст *другую* веб-службу. Он не только обновляет исходную веб-службу.

   Если необходимо изменить обучающий эксперимент, откройте его и выберите команду **Сохранить как**, чтобы создать его копию. Так вы сохраните в неизменном виде исходный обучающий эксперимент, прогнозный эксперимент и веб-службу. Теперь вы можете создать другую веб-службу, внеся необходимые изменения. После развертывания новой веб-службы можно принять решение о том, следует ли прерывать предыдущую веб-службу или она должна работать рядом с новой.

**Необходимо обучить другую модель**

Если требуется внести изменения в исходный прогнозный эксперимент, например выбрать другой алгоритм машинного обучения, опробовать другой метод обучения и т. д., то вам следует выполнить вторую из процедур выше, предназначенную для переобучения модели. Откройте обучающий эксперимент, выберите команду **Сохранить как**, чтобы создать копию, а затем повторите весь процесс разработки модели, создания прогнозного эксперимента и развертывания веб-службы. В результате у вас будет новая веб-служба, несвязанная с исходной. Можно выбрать, какая из них будет выполняться, или оставить в работе обе.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о процессе разработки и эксперименте см. в следующих статьях.

* Преобразование эксперимента: [Подготовка модели к развертыванию в машинное обучение Azure Studio (классическая модель)](convert-training-experiment-to-scoring-experiment.md)
* Развертывание веб-службы: [Развертывание веб-службы машинного обучения Azure](deploy-a-machine-learning-web-service.md).
* Переобучение модели: [программное переобучение моделей машинного обучения](/azure/machine-learning/studio/retrain-machine-learning-model)

Примеры всего процесса см. в этих статьях.

* [Учебник по машинному обучению: создание первого эксперимента в Машинное обучение Azure Studio (классическая модель)](create-experiment.md)
* [Пошаговое руководство по разработке решения для прогнозной аналитики в службе машинного обучения Azure для оценки кредитных рисков](tutorial-part1-credit-risk.md)

