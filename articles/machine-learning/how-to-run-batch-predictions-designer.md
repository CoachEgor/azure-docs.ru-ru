---
title: Выполнение пакетных прогнозов с помощью конструктора Машинного обучения Azure (предварительная версия)
titleSuffix: Azure Machine Learning
description: Узнайте, как обучить модель и настроить конвейер пакетного прогнозирования с помощью конструктора. Разверните конвейер как параметризованную веб-службу, которая может быть активирована из любой библиотеки HTTP.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: how-to
ms.author: peterlu
author: peterclu
ms.date: 02/24/2020
ms.custom: Ignite2019
ms.openlocfilehash: fdda35d3a617a30169748f4f6b42c8726e7e3512
ms.sourcegitcommit: 3c925b84b5144f3be0a9cd3256d0886df9fa9dc0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/28/2020
ms.locfileid: "77920694"
---
# <a name="run-batch-predictions-using-azure-machine-learning-designer-preview"></a>Выполнение пакетных прогнозов с помощью конструктора Машинного обучения Azure (предварительная версия)
[!INCLUDE [applies-to-skus](../../includes/aml-applies-to-enterprise-sku.md)]

Из этой статьи вы узнаете, как использовать конструктор для создания конвейера пакетной прогнозирования. Пакетная прогнозирование позволяет постоянно оценивать большие наборы данных по запросу с помощью веб-службы, которую можно активировать из любой библиотеки HTTP.

В этом пошаговом окне вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создание и публикация конвейера вывода пакета
> * Использование конечной точки конвейера
> * Управление версиями конечных точек

Дополнительные сведения о настройке служб оценки пакетной службы с помощью пакета SDK [см. в](how-to-run-batch-predictions.md)соответствующем разделе.

## <a name="prerequisites"></a>Предварительные требования

В этом способе предполагается, что у вас уже есть обучающий конвейер. Чтобы ознакомиться с руководством по конструктору, выполните часть руководства по работе с [конструктором](tutorial-designer-automobile-price-train-score.md). 

## <a name="create-a-batch-inference-pipeline"></a>Создание конвейера пакетного вывода

Чтобы создать конвейер для создания цепочки, необходимо запустить обучающий конвейер по крайней мере один раз.

1. Перейдите на вкладку **конструктор** в рабочей области.

1. Выберите обучающий конвейер, который обучает модель, которую вы хотите использовать для прогнозирования.

1. **Запустите** конвейер.

    ![Запуск конвейера](./media/how-to-run-batch-predictions-designer/run-training-pipeline.png)

Теперь, когда обучающий конвейер запущен, можно создать конвейер вывода пакета.

1. Рядом с пунктом **выполнить**выберите создать **конвейер создания вывода создание**раскрывающегося списка.

1. Выберите **конвейер пакетного вывода**.

    ![Создание конвейера пакетного вывода](./media/how-to-run-batch-predictions-designer/create-batch-inference.png)
    
Результатом является конвейер пакетного вывода по умолчанию. 

### <a name="add-a-pipeline-parameter"></a>Добавление параметра конвейера

Чтобы создать прогнозы для новых данных, можно либо вручную подключить другой набор данных в представлении черновика конвейера, либо создать параметр для набора данных. Параметры позволяют изменить поведение процесса формирования пакетов в среде выполнения.

В этом разделе вы создадите параметр набора данных, чтобы указать другой набор данных для выполнения прогнозов.

1. Выберите модуль набор данных.

1. Справа от холста появится панель. В нижней части панели выберите **задать в качестве параметра конвейера**.
   
    Введите имя параметра или примите значение по умолчанию.

## <a name="publish-your-batch-inferencing-pipeline"></a>Опубликуйте конвейер пакетной обработки

Теперь можно приступать к развертыванию конвейера для размещения. Это позволит развернуть конвейер и сделать его доступным для использования другими пользователями.

1. Нажмите кнопку **Опубликовать**.

1. В появившемся диалоговом окне разверните раскрывающийся список для **пипелининдпоинт**и выберите **New пипелининдпоинт (создать**).

1. Укажите имя конечной точки и необязательное описание.

    В нижней части диалогового окна можно увидеть параметр, для которого настроено значение по умолчанию идентификатора набора данных, используемого во время обучения.

1. Нажмите кнопку **Опубликовать**.

![Публикация конвейера](./media/how-to-run-batch-predictions-designer/publish-inference-pipeline.png)


## <a name="consume-an-endpoint"></a>Использование конечной точки

Теперь у вас есть опубликованный конвейер с параметром набора данных. Конвейер будет использовать обученную модель, созданную в обучающем конвейере, для оценки набора данных, предоставленного в качестве параметра.

### <a name="submit-a-pipeline-run"></a>Отправка выполнения конвейера 

В этом разделе вы настроите ручной запуск конвейера и измените параметр конвейера, чтобы оценить новые данные. 

1. После завершения развертывания перейдите к разделу **конечные точки** .

1. Выберите **конечные точки конвейера**.

1. Выберите имя созданной конечной точки.

![Ссылка на конечную точку](./media/how-to-run-batch-predictions-designer/manage-endpoints.png)

1. Выберите **опубликованные конвейеры**.

    На этом экране показаны все опубликованные конвейеры, опубликованные в этой конечной точке.

1. Выберите опубликованный конвейер.

    На странице сведения о конвейере отображается подробный журнал выполнения и сведения о строке подключения для вашего конвейера. 
    
1. Выберите **выполнить** , чтобы создать ручной запуск конвейера.

    ![Сведения о конвейере](./media/how-to-run-batch-predictions-designer/submit-manual-run.png)
    
1. Измените параметр, чтобы использовать другой набор данных.
    
1. Выберите **выполнить** , чтобы запустить конвейер.

### <a name="use-the-rest-endpoint"></a>Использование конечной точки RESTFUL

Сведения о том, как использовать конечные точки конвейера и опубликованный конвейер, можно найти в разделе **конечные точки** .

Конечную точку RESTFUL конечной точки конвейера можно найти на панели Обзор запуска. Вызывая конечную точку, вы используете опубликованный конвейер по умолчанию.

Опубликованный конвейер также можно использовать на странице **опубликованные конвейеры** . Выберите опубликованный конвейер и найдите конечную точку RESTFUL. 

![Сведения о конечной точке RESTful](./media/how-to-run-batch-predictions-designer/rest-endpoint-details.png)

Чтобы выполнить вызов функции RESTFUL, потребуется заголовок аутентификации носителя OAuth 2,0. Дополнительные сведения о настройке аутентификации в рабочей области и выполнении параметризованного вызова REST см. в следующем [разделе руководства](tutorial-pipeline-batch-scoring-classification.md#publish-and-run-from-a-rest-endpoint).

## <a name="versioning-endpoints"></a>Управление версиями конечных точек

Конструктор назначает версию каждому последующему конвейеру, который публикуется в конечной точке. Вы можете указать версию конвейера, которую требуется выполнить в качестве параметра в вызове RESTFUL. Если номер версии не указан, конструктор будет использовать конвейер по умолчанию.

При публикации конвейера можно сделать его новым конвейером по умолчанию для этой конечной точки.

![Задать конвейер по умолчанию](./media/how-to-run-batch-predictions-designer/set-default-pipeline.png)

Вы также можете задать новый конвейер по умолчанию на вкладке **опубликованные конвейеры** конечной точки.

![Задать конвейер по умолчанию](./media/how-to-run-batch-predictions-designer/set-new-default-pipeline.png)

## <a name="next-steps"></a>Следующие шаги

Чтобы обучить и развернуть регрессионную модель, следуйте указаниям в [учебнике](tutorial-designer-automobile-price-train-score.md) по конструктору.
