---
title: 'Млопс: Управление моделями в МАШИНном обучении'
titleSuffix: Azure Machine Learning
description: 'Сведения об управлении моделями с помощью Машинное обучение Azure (Млопс). Развертывание моделей, управление ими и их мониторинг для их постоянного улучшения. '
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.reviewer: jmartens
author: jpe316
ms.author: jordane
ms.date: 11/22/2019
ms.custom: seodec18
ms.openlocfilehash: 9cde171f1c031b4b02a71fe0dac1a689e3ec0722
ms.sourcegitcommit: aee08b05a4e72b192a6e62a8fb581a7b08b9c02a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/09/2020
ms.locfileid: "75772590"
---
# <a name="mlops-model-management-deployment-and-monitoring-with-azure-machine-learning"></a>Млопс: Управление моделями, развертывание и мониторинг с помощью Машинное обучение Azure

В этой статье вы узнаете, как использовать Машинное обучение Azure для управления жизненным циклом моделей. В Машинное обучение Azure используется подход Машинное обучениеных операций (Млопс). Млопс улучшает качество и согласованность решений машинного обучения. 

Машинное обучение Azure предоставляет следующие возможности Млопс:

- **Создание воспроизводимых конвейеров машинного обучения**. Конвейеры позволяют определять повторяемые и многократно используемые шаги для процессов подготовки данных, обучения и оценки.
- **Регистрация, Упаковка и развертывание моделей из любого места** и контроль связанных метаданных, необходимых для использования модели.
- **Запишите данные управления, необходимые для сбора сквозного жизненного цикла машинного обучения**, включая пользователей, которые публикуют модели, причины внесения изменений и время развертывания или использования моделей в рабочей среде.
- **Уведомлять и оповещать о событиях в жизненном цикле машинного обучения** , например о завершении эксперимента, регистрации модели, развертывании модели и обнаружении расхождения данных.
- **Мониторинг приложений ml для работы и проблем, связанных с машинным**обучением. Сравните входные данные модели между обработкой и выводом, изучите метрики, зависящие от модели, и предоставьте мониторинг и оповещения в инфраструктуре машинного обучения.
- **Автоматизируйте сквозной жизненный цикл машинного обучения с помощью машинное обучение Azure и Azure DevOps** для частого обновления моделей, тестирования новых моделей и непрерывного развертывания новых моделей машинного обучения вместе с другими приложениями и службами.

## <a name="create-reproducible-ml-pipelines"></a>Создание воспроизводимых конвейеров машинного обучения

Используйте конвейеры машин из Машинное обучение Azure, чтобы объединить все шаги, связанные с процессом обучения модели.

Конвейер машинного обучения может содержать шаги из процесса подготовки данных к извлечению компонентов в настройку параметров для оценки модели. Дополнительные сведения см. в разделе [конвейеры машинного обучения](concept-ml-pipelines.md).

Если вы используете [конструктор](concept-designer.md) для создания конвейеров машинного обучения, вы можете в любой момент нажать кнопку **"..."** в правом верхнем углу страницы конструктора, а затем выбрать **клонировать**. Клонирование конвейера позволяет перебирать проект конвейера без потери старых версий.  

## <a name="register-package-and-deploy-models-from-anywhere"></a>Регистрация, Упаковка и развертывание моделей из любого места

### <a name="register-and-track-ml-models"></a>Регистрация и трассировка моделей машинного обучения

Регистрация модели позволяет хранить и изменять модели в облаке Azure в рабочей области. Модель реестра позволяет легко организовывать и отслеживать ваши обученные модели.

> [!TIP]
> Зарегистрированная модель — это логический контейнер для одного или нескольких файлов, составляющих модель. Например, если имеется модель, которая хранится в нескольких файлах, можно зарегистрировать их как единую модель в Машинное обучение Azure рабочей области. После регистрации можно скачать или развернуть зарегистрированную модель и получить все зарегистрированные файлы.

Зарегистрированные модели идентифицируются по имени и версии. При регистрации модели с уже существующим именем реестр увеличивает номер версии. Во время регистрации можно указать дополнительные теги метаданных. Затем эти теги используются при поиске модели. Машинное обучение Azure поддерживает любую модель, которую можно загрузить с помощью Python 3.5.2 или более поздней версии.

> [!TIP]
> Кроме того, можно регистрировать модели, обученные за пределами Машинное обучение Azure.

Нельзя удалить зарегистрированную модель, используемую в активном развертывании.
Дополнительные сведения см. в разделе "Регистрация модели" статьи [Развертывание моделей с помощью Службы машинного обучения Azure](how-to-deploy-and-where.md#registermodel).

### <a name="package-and-debug-models"></a>Модели упаковки и отладки

Перед развертыванием модели в рабочей среде она упаковывается в образ DOCKER. В большинстве случаев создание изображений происходит автоматически в фоновом режиме во время развертывания. Образ можно указать вручную.

При возникновении проблем с развертыванием можно выполнить развертывание в локальной среде разработки для устранения неполадок и отладки.

Дополнительные сведения см. в разделе [Развертывание моделей](how-to-deploy-and-where.md#registermodel) и [Устранение неполадок развертываний](how-to-troubleshoot-deployment.md).

### <a name="validate-and-profile-models"></a>Проверка и профилирование моделей

Машинное обучение Azure может использовать профилирование для определения оптимальных параметров ЦП и памяти, используемых при развертывании модели. Проверка модели выполняется в рамках этого процесса с использованием данных, предоставляемых для процесса профилирования.

### <a name="convert-and-optimize-models"></a>Преобразование и оптимизация моделей

Преобразование модели для [открытия обмена нейронными сетями](https://onnx.ai) (ONNX) может повысить производительность. В среднем преобразование в ONNX может привести к увеличению производительности в 2 раза.

Дополнительные сведения о ONNX с Машинное обучение Azure см. в статье [Создание и ускорение моделей ML](concept-onnx.md) .

### <a name="use-models"></a>Использование моделей

Обученные модели машинного обучения развертываются как веб-службы в облаке или локально. Также можно развернуть модели на Azure IoT Edge устройствах. В развертываниях используются ЦП, GPU или программируемые для полей массивы шлюзов (FPGA). Модели также можно использовать из Power BI.

При использовании модели в качестве веб-службы или устройства IoT Edge вы предоставляете следующие элементы:

* Модели, используемые для оценки данных, передаваемых службе или устройству.
* Скрипт записи. Этот скрипт принимает запросы, использует модели для оценки данных и возвращает ответ.
* Файл среды conda, описывающий зависимости, необходимые для скрипта моделей и входа.
* Любые дополнительные активы, такие как текст, данные и т. д., необходимые для скрипта моделей и входа.

Вы также предоставляете конфигурацию целевой платформы развертывания. Например, тип семейства виртуальных машин, объем доступной памяти и число ядер при развертывании в службе Azure Kubernetes.

При создании образа также добавляются компоненты, необходимые для Машинное обучение Azure. Например, ресурсы, необходимые для запуска веб-службы и взаимодействия с IoT Edge.

#### <a name="batch-scoring"></a>Пакетная оценка
Пакетная Оценка поддерживается через конвейеры ML. Дополнительные сведения см. [в статье пакетные прогнозы для больших данных](how-to-run-batch-predictions.md).

#### <a name="real-time-web-services"></a>Веб-службы в режиме реального времени

Вы можете использовать модели в **веб-службах** со следующими целевыми объектами вычислений:

* Экземпляр контейнера Azure
* Служба Azure Kubernetes
* Локальная среда разработки

Чтобы развернуть модель как веб-службу, необходимо предоставить следующие элементы:

* Модель или ансамблей моделей.
* Зависимости, необходимые для использования модели. Например, скрипт, принимающий запросы и вызывающий модель, conda зависимости и т. д.
* Конфигурация развертывания, описывающая способ и место развертывания модели.

Дополнительные сведения см. в разделе [Развертывание моделей](how-to-deploy-and-where.md).

#### <a name="iot-edge-devices"></a>Устройства IoT Edge

Модели с устройствами Интернета вещей можно использовать с помощью **модулей Azure IOT Edge**. IoT Edge модули развертываются на аппаратном устройстве, что позволяет выводить на экран или оценивать модель на устройстве.

Дополнительные сведения см. в разделе [Развертывание моделей](how-to-deploy-and-where.md).

### <a name="analytics"></a>Аналитика

Microsoft Power BI поддерживает использование моделей машинного обучения для аналитики данных. Дополнительные сведения см. [в разделе интеграция машинное обучение Azure в Power BI (Предварительная версия)](https://docs.microsoft.com/power-bi/service-machine-learning-integration).

## <a name="capture-the-governance-data-required-for-capturing-the-end-to-end-ml-lifecycle"></a>Сбор данных управления, необходимых для сбора комплексного жизненного цикла машинного обучения

Служба машинного обучения Azure позволяет отслеживать полный журнал аудита всех активов машинного обучения. В частности:

- Azure ML [интегрируется с Git](how-to-set-up-training-targets.md#gitintegration) , чтобы отнести сведения о репозитории, ветви или фиксации вашего кода.
- [Наборы данных машинного обучения Azure](how-to-create-register-datasets.md) помогают отслеживанию, профилированию и версии. 
- В журнале выполнения машинного обучения Azure хранится моментальный снимок кода, данных и вычислений, используемых для обучения модели.
- В реестре модели машинного обучения Azure записываются все метаданные, связанные с вашей моделью (которые обучены с помощью эксперимента, где выполняется развертывание, если ее развертывания являются работоспособными).

## <a name="notify-automate-and-alert-on-events-in-the-ml-lifecycle"></a>Уведомлять, автоматизировать и оповещать о событиях в жизненном цикле машинного обучения
Служба машинного обучения Azure публикует ключевые события в Azure EventGrid, которые можно использовать для уведомления и автоматизации событий в жизненном цикле машинного обучения. Дополнительные сведения см. в [этом документе](how-to-use-event-grid.md).


## <a name="monitor-for-operational--ml-issues"></a>Мониторинг проблем с операционными &ми машинного обучения

Мониторинг позволяет понять, какие данные отправляются в модель, и какие прогнозы она возвращает.

Эти сведения помогут вам понять, как используется модель. Собранные входные данные также могут быть полезны при обучении будущих версий модели.

Дополнительные сведения см. в статье [Сбор данных для моделей в рабочей среде](how-to-enable-data-collection.md).

## <a name="automate-the-ml-lifecycle"></a>Автоматизация жизненного цикла машинного обучения 

Вы можете использовать GitHub и Azure Pipelines для создания процесса непрерывной интеграции, который обучает модель. В типичном сценарии, когда анализу данных проверяет изменение в репозитории Git для проекта, конвейер Azure начнет обучающий запуск. Затем результаты выполнения можно просмотреть, чтобы увидеть характеристики производительности обученной модели. Также можно создать конвейер, который развертывает модель как веб-службу.

[Расширение машинное обучение Azure](https://marketplace.visualstudio.com/items?itemName=ms-air-aiagility.vss-services-azureml) упрощает работу с Azure pipelines. Он предоставляет следующие усовершенствования Azure Pipelines.

* Включает выбор рабочей области при определении подключения к службе.
* Разрешает активацию конвейеров выпуска обученными моделями, созданными в конвейере обучения.

Дополнительные сведения об использовании Azure Pipelines с Машинное обучение Azure см. в статье [Непрерывная интеграция и развертывание моделей ml с помощью Azure pipelines](/azure/devops/pipelines/targets/azure-machine-learning) статьи и репозитория [машинное обучение Azure млопс](https://aka.ms/mlops) .

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. в следующих ресурсах:

+ [Как &, где развертывать модели](how-to-deploy-and-where.md) с машинное обучение Azure

+ [Учебник. Развертывание модели классификации изображений в ACI](tutorial-deploy-models-with-aml.md).

+ [Репозиторий комплексных примеров Млопс](https://github.com/microsoft/MLOps)

+ [CI/CD моделей машинного обучения с Azure Pipelines](/azure/devops/pipelines/targets/azure-machine-learning)

+ Создание клиентов, [использующих развернутую модель](how-to-consume-web-service.md)

+ [Машинное обучение с поддержкой масштабирования](/azure/architecture/data-guide/big-data/machine-learning-at-scale)

+ [Эталонные архитектуры Azure ии & рекомендации](https://github.com/microsoft/AI)
