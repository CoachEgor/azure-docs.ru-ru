---
title: Общие пулы
titleSuffix: Azure Data Science Virtual Machine
description: Узнайте, как создать & развернуть общий пул виртуальных машин Data Science (DSVMs) в качестве общего ресурса для группы.
keywords: deep learning, AI, data science tools, data science virtual machine, geospatial analytics, team data science process
services: machine-learning
ms.service: machine-learning
ms.subservice: data-science-vm
author: vijetajo
ms.author: vijetaj
ms.topic: conceptual
ms.date: 12/10/2018
ms.openlocfilehash: cc0efc0a076ddc3fc9425999f1e38b4a32dec7a3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79477346"
---
# <a name="create-a-shared-pool-of-data-science-virtual-machines"></a>Создание общего пула виртуальных машин для обработки и анализа данных

В этой статье вы узнаете, как создать общий пул виртуальных машин Data Science (DSVMs) для команды. Преимущества использования общего пула включают более эффективное использование ресурсов, упрощение совместного использования и совместное использование, а также более эффективное управление ресурсами DSVM.

Для создания пула DSVM можно использовать множество методик и технологий. В этой статье основное внимание уделяется пулам для интерактивных виртуальных машин (VM). Вычислительная среда Машинного обучения Azure является альтернативной управляемой инфраструктурой для вычислений. Для получения дополнительной [информации см.](../how-to-set-up-training-targets.md#amlcompute)

## <a name="interactive-vm-pool"></a>Пул интерактивных виртуальных машин

При использовании пула интерактивных виртуальных машин, с которыми совместно работает вся команда разработчиков решений на основе ИИ или обработки и анализа данных, пользователи могут входить на доступный экземпляр DSVM, а не на выделенный экземпляр, назначаемый каждому набору пользователей. Эта настройка обеспечивает лучшую доступность и более эффективное использование ресурсов.

Для создания интерактивного пула VM используется технология [виртуальных машинных наборов Azure.](https://docs.microsoft.com/azure/virtual-machine-scale-sets/) Масштабируемые наборы позволяют создавать и администрировать группы идентичных виртуальных машин с автоматическим масштабированием и балансировкой нагрузки.

Пользователь выполняет вход по IP-адресу или DNS-адресу основного пула. Масштабируемый набор автоматически перенаправляет сеанс доступной DSVM. Поскольку пользователям нужна последовательная и знакомая среда независимо от ввоза VM, в который они входят, все экземпляры VM в наборе масштаба устанавливают общий сетевой диск, например, совместное действие файлов Azure или общность сетевой файловой системы (NFS). Как правило, общая рабочая область пользователя размещается в общем хранилище файлов, которое подключается к каждому из экземпляров.

Пример шаблона Azure Resource Manager, который создает масштабируемый набор с экземплярами DSVM на основе Ubuntu, можно найти на сайте [GitHub](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.json). В том же месте вы найдете пример [файла параметров](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.parameters.json) для шаблона управления ресурсами Azure.

Можно создать набор масштабов из шаблона менеджера ресурсов Azure, указав значения для файла параметров в Azure CLI:

```azurecli-interactive
az group create --name [[NAME OF RESOURCE GROUP]] --location [[ Data center. For eg: "West US 2"]
az group deployment create --resource-group  [[NAME OF RESOURCE GROUP ABOVE]]  --template-uri https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.json --parameters @[[PARAMETER JSON FILE]]
```

В приведенных выше командах предполагается, что у вас есть следующее:

* Копия файла параметров со значениями, указанными для вашего экземпляра масштабируемого набора.
* Требуемое число экземпляров виртуальных машин.
* Указатели на общий ресурс службы файлов Azure.
* Учетные данные для учетной записи хранения, которая будет подключена к каждой виртуальной машине.

На файл параметров указывают локальные ссылки в командах. Вы также можете передать встроенные параметры или запросить их в сценарии.  

Приведенный выше шаблон позволяет использовать протокол SSH и порт JupyterHub из интерфейсного масштабируемого набора во внутреннем пуле DSVM на основе Ubuntu. Как пользователь, вы входите в VM на безопасную оболочку (SSH) или на JupyterHub в обычном порядке. Поскольку экземпляры VM могут быть масштабированы вверх или вниз динамически, любое состояние должно быть сохранено в смонтированном доле файлов Azure. Тот же подход можно использовать для создания пула DSVM на основе Windows.

В репозитории Azure DataScienceVM на сайте GitHub можно также найти [сценарий, который подключает общий ресурс службы файлов Azure](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Extensions/General/mountazurefiles.sh). Этот сценарий подключает общий ресурс службы файлов Azure в заданной точке подключения внутри файла параметров. Кроме того, он создает гибкие связи с подключенным диском в домашнем каталоге начального пользователя. Каталог ноутбуков, в частности для пользователей в общих долях Azure Files, является мягким, связанным с `$HOME/notebooks/remote` каталогом, чтобы пользователи могли получать доступ, запускать и сохранять свои ноутбуки Jupyter. Это же соглашение можно использовать при создании дополнительных пользователей на виртуальной машине, чтобы добавить указатель на рабочую область Jupyter каждого пользователя в общий ресурс службы файлов Azure.

Масштабируемые наборы виртуальных машин поддерживают автомасштабирование. Можно установить правила о том, когда создавать дополнительные экземпляры и когда сокращать экземпляры. Например, вы можете уменьшить масштаб до нуля экземпляров, чтобы сэкономить на использовании облачного оборудования, когда виртуальные машины простаивают. Подробное описание процедуры [автомасштабирования](https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview) приведено в документации по масштабируемым наборам виртуальных машин.

## <a name="next-steps"></a>Дальнейшие действия

* [Настройка общего удостоверения](dsvm-common-identity.md)
* [Безопасное хранение учетных данных для доступа на виртуальной машине для обработки и анализа данных](dsvm-secure-access-keys.md)
