---
title: Краткое руководство. Создание CentOS Linux
titleSuffix: Azure Data Science Virtual Machine
description: Создание и настройка Виртуальной машины Linux в Azure для обработки и анализа данных и машинного обучения.
services: machine-learning
ms.service: machine-learning
ms.subservice: data-science-vm
author: vijetajo
ms.author: vijetaj
ms.topic: quickstart
ms.date: 03/16/2018
ms.openlocfilehash: 1ab3a527643bc5a567644a937fdd1eb9e31bf567
ms.sourcegitcommit: 532335f703ac7f6e1d2cc1b155c69fc258816ede
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/30/2019
ms.locfileid: "70195335"
---
# <a name="quickstart-set-up-a-linux-centos-data-science-virtual-machine-in-azure"></a>Краткое руководство. Настройка Виртуальной машины для обработки и анализа данных CentOS Linux в Azure

Виртуальная машина Linux для обработки и анализа данных (DSVM) — это виртуальная машина Azure на базе CentOS. Linux DSVM включает набор предварительно установленных средств для анализа данных и машинного обучения. 

Основные программные компоненты Linux DSVM:

* Операционная система — дистрибутив Linux CentOS.
* Microsoft Machine Learning Server.
* Дистрибутив Anaconda Python (версии 3.5 и 2.7), включая популярные библиотеки для анализа данных.
* JuliaPro — проверенный дистрибутив на языке Julia с популярными библиотеками для обработки и анализа данных.
* Изолированный экземпляр Spark и кластер Hadoop (HDFS, YARN) с одним узлом.
* JupyterHub — многопользовательский сервер Jupyter Notebook, который поддерживает ядра R, Python, PySpark и Julia.
* Обозреватель хранилищ Azure
* Azure CLI — интерфейс командной строки Azure для управления ресурсами Azure.
* База данных PostgresSQL.
* Средства машинного обучения:
  * [Microsoft Cognitive Toolkit](https://github.com/Microsoft/CNTK) (CNTK) — набор программных средств для глубокого обучения от Microsoft Research.
  * [Vowpal Wabbit](https://github.com/JohnLangford/vowpal_wabbit) — система быстрого машинного обучения, поддерживающая такие методы, как онлайн-обучение, хэширование, общее сокращение, сокращение, обучение поиску, активное и интерактивное обучение.
  * [XGBoost](https://xgboost.readthedocs.org/en/latest/) — инструмент, предоставляющий быструю и точную реализацию увеличивающегося дерева.
  * [Rattle](https://togaware.com/rattle/) — графический инструмент, который помогает начать работу с аналитикой данных и машинным обучением в R. Rattle поддерживает изучение данных на основе графического пользовательского интерфейса и моделирование с помощью автоматического создания кода R.
* Пакет SDK Azure для Java, Python, Node.js, Ruby и PHP.
* Библиотеки R и Python для Машинного обучения Azure и других служб Azure.
* Средства разработки и редакторы (RStudio, PyCharm, IntelliJ, Emacs, gedit и vi).

При обработке и анализе данных выполняются следующие задачи:

1. Поиск, загрузка и предварительная обработка данных.
1. Сборка и тестирование моделей.
1. Развертывание моделей для использования в приложениях для анализа.

Для выполнения этих задач специалисты по обработке и анализу данных используют широкий набор инструментов. Поиск правильной версии, скачивание, компиляция и установка программного обеспечения могут занимать довольно много времени.

Виртуальная машина Linux для обработки и анализа данных упрощает выполнение этих задач. Используйте ее, чтобы быстро перейти к работе с своим аналитическим проектом. Linux DSVM позволяет работать над задачами, используя такие языки, как R, Python, SQL, Java и C++. Eclipse предоставляет удобную среду IDE для разработки и тестирования кода. Пакет SDK для Azure в DSVM позволяет создавать приложения с помощью разных служб в Linux для облачной платформы Майкрософт. Также в ней предварительно установлены другие языки, в том числе Ruby, Perl, PHP и Node.js.

Плата за программное обеспечение, включенное в образ DSVM, не взимается. Вы платите только за оборудование Azure в зависимости от размера виртуальной машины, которая подготавливается с образом DSVM. См. сведения о [ценах на Виртуальные машины Linux (CentOS) для обработки и анализа данных](https://azure.microsoft.com/marketplace/partners/microsoft-ads/linux-data-science-vm/) в Azure Marketplace.

## <a name="prerequisites"></a>Предварительные требования

Перед созданием Виртуальной машины Linux для обработки и анализа данных необходимо проверить следующие предварительные условия:

* **Подписка Azure**: Чтобы получить подписку Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/).
* **Учетная запись хранения Azure.** Чтобы получить учетную запись хранения Azure, см. руководство по [созданию учетных записей хранения](../../storage/common/storage-quickstart-create-account.md). Если вы не хотите использовать существующую учетную запись хранения Azure, вы можете создать учетную запись хранения при создании DSVM.

## <a name="other-versions-of-the-data-science-virtual-machine"></a>Другие версии виртуальных машин для обработки и анализа данных

Существуют и другие версии Виртуальной машины для обработки и анализа данных:

* [Ubuntu](dsvm-ubuntu-intro.md): Образ Ubuntu содержит многие инструменты, включенные в образ CentOS, в том числе платформы глубокого обучения. 
* [Windows](provision-vm.md)

## <a name="create-a-linux-data-science-virtual-machine"></a>Создание Виртуальной машины Linux для обработки и анализа данных

Чтобы создать экземпляр Linux DSVM, выполните следующие действия:

1. Перейдите к списку виртуальных машин на [портале Azure](https://portal.azure.com/#create/microsoft-ads.linux-data-science-vmlinuxdsvm).
1. Щелкните **Создать**, чтобы открыть мастер.

   ![Мастер настройка Виртуальной машины для обработки и анализа данных](./media/linux-dsvm-intro/configure-linux-data-science-virtual-machine.png)
1. Введите или выберите следующие сведения на каждом шаге мастера:
   
   **1** **Основные сведения.**

      * **Имя.** Имя создаваемого сервера для обработки и анализа данных.
      * **Имя пользователя**. Идентификатор для входа первой учетной записи.
      * **Пароль**. Пароль первой учетной записи. (Вместо пароля можно использовать открытый ключ SSH.)
      * **Подписка**: При наличии нескольких подписок выберите ту, в которой будет создана виртуальная машина и для которой будут выставляться счета. Необходимо иметь разрешения на создание ресурсов для подписки.
      * **Группа ресурсов.** Создайте новую группу ресурсов или выберите существующую.
      * **Расположение.** Выберите центр обработки данных для DSVM. Обычно это центр обработки данных, в котором размещена большая часть ваших данных, или который находится ближе всего к вашему физическому расположению центр, чтобы обеспечить максимально быстрый доступ к сети.
   
   **2** **Размер.** Выберите тип сервера, который соответствует вашим функциональным требованиям и финансовым ограничениям. Выберите **Просмотреть все** , чтобы отобразить дополнительные варианты размеров виртуальных машин.
   
   
   **3** **Настройки.**
      * **Тип диска.** Если требуется твердотельный накопитель (SSD), выберите **Премиум**. В остальных случаях выберите **Стандартный**.
      * **Учетная запись хранения**. Вы можете создать новую учетную запись хранения Azure в подписке или использовать существующую в том же расположении, которое вы указали на шаге **Основные сведения** мастера.
      * **Другие параметры**. В большинстве случаев здесь лучше оставить значения по умолчанию. Чтобы узнать о настраиваемых значениях, наведите указатель мыши на информационную ссылку для нужного параметра.
   
   **4** **Сводка.** Убедитесь, что все сведения введены правильно.
   
   **5** **Купить.** Чтобы начать процесс подготовки, щелкните **Купить**. Вы получите ссылку на условия транзакции. Использование DSVM не тарифицируется. Плата взимается только за размер сервера, выбранный на шаге **Размер**.

Подготовка занимает примерно 10–20 минут. Состояние подготовки отображается на портале Azure.

## <a name="how-to-access-the-linux-data-science-virtual-machine"></a>Как осуществить доступ к виртуальной машине Linux для обработки и анализа данных

Создав DSVM, вы можете войти в нее с помощью протокола SSH. Для входа через интерфейс текстовой оболочки используйте учетную запись, которую вы создали на шаге **Основные сведения** мастера. Для Windows можно скачать клиент SSH, например [PuTTY](https://www.putty.org). Если вы предпочитаете графический интерфейс (X Window System), можно использовать перенаправление X11 в PuTTY или установить клиент X2Go.

> [!NOTE]
> При тестировании клиент X2Go работал лучше по сравнению с перенаправлением X11. Мы рекомендуем клиент X2Go для графического интерфейса рабочего стола.

## <a name="install-and-configure-the-x2go-client"></a>Установка и настройка клиента X2Go

На Linux DSVM при подготовке устанавливается сервер X2Go, который сразу готов к подключению клиента. Чтобы открыть графический интерфейс Linux DSVM, выполните на стороне клиента следующую процедуру:

1. Скачайте клиент X2Go для своей клиентской платформы [отсюда](https://wiki.x2go.org/doku.php/doc:installation:x2goclient)и установите его.
1. Запустите клиент X2Go. Щелкните **New Session** (Новый сеанс). Откроется окно конфигурации с несколькими вкладками. Введите следующие параметры конфигурации:
   * **Вкладка "Сеанс"** :
     * **Узел**: Введите имя узла или IP-адрес для Linux DSVM.
     * **Имя входа**: Введите имя пользователя для Linux DSVM.
     * **Порт SSH**: Сохраните установленное по умолчанию значение **22**.
     * **Тип сеанса**: Измените значение на **XFCE**. Сейчас Linux DSVM поддерживает только рабочий стол XFCE.
   * Вкладка **Media** (Мультимедиа). Здесь можно отключить поддержку звука и печати на клиенте, если они не нужны.
   * **Общие папки**: Если вы хотите подключить каталоги с клиентских компьютеров на Linux DSVM, добавьте их на этой вкладке.

Выполнив вход в виртуальную машину с помощью клиента SSH или рабочего стола XFCE в клиенте X2Go, вы можете использовать любые инструменты, которые установлены и настроены на DSVM. На рабочем столе XFCE отображаются ярлыки из меню и значки рабочего стола для многих инструментов.

## <a name="tools-installed-on-the-linux-data-science-virtual-machine"></a>Средства, установленные на виртуальной машине Linux для обработки и анализа данных

### <a name="machine-learning-server"></a>сервер машинного обучения;

R — один из самых популярных языков для анализа данных и машинного обучения. Если вы хотите использовать R для аналитики, воспользуйтесь установленной на DSVM платформой Machine Learning Server с компонентом Microsoft R Open и библиотекой Math Kernel Library. Библиотека Math Kernel Library оптимизирует математические операции, которые широко применяются в аналитических алгоритмах. Компонент R Open полностью совместим с CRAN R, и для него можно установить любые библиотеки R, опубликованные в CRAN. 

С помощью Machine Learning Server можно масштабировать модели R и эксплуатировать их в виде веб-служб. Для редактирования программ R можно воспользоваться одним из редакторов по умолчанию, например RStudio, vi или Emacs. На DSVM предварительно установлен редактор Emacs. Пакет ESS (Emacs Speaks Statistics) упрощает работу с файлами R в редакторе Emacs.

Чтобы открыть консоль R, введите в оболочке **R**. Вы перейдете в интерактивную среду. Для разработки программы R обычно используется текстовый редактор, например Emacs или vi. Затем скрипты запускаются в R. RStudio предоставляет полноценную графическую интегрированную среду для разработки программ R.

В DSVM включен скрипт R, который позволяет установить [20 основных пакетов R](https://www.kdnuggets.com/2015/06/top-20-r-packages.html). Этот скрипт вы можете выполнить в интерактивном интерфейсе R. Как упоминалось ранее, чтобы открыть этот интерфейс, введите в оболочке **R**.  

### <a name="python"></a>Python

Anaconda Python устанавливается вместе со средами Python версий 3.5 и 2.7. Среда версии 2.7 называется _root_, а среда версии 3.5 — _py35_. Этот дистрибутив содержит базовую версию Python, а также примерно 300 наиболее популярных математических и инженерных пакетов и пакетов аналитики данных.

Среда py35 устанавливается по умолчанию. Чтобы активировать среду root (версии 2.7), выполните эту команду:

```bash
source activate root
```

Чтобы снова активировать среду py35, выполните эту команду:

```bash
source activate py35
```

Чтобы вызвать интерактивный сеанс Python, введите в оболочке **python**. 

Дополнительные библиотеки Python можно установить с помощью Conda или pip. Сначала активируйте правильную среду для pip, если не хотите использовать среду по умолчанию:

```bash
source activate root
pip install <package>
```

Или укажите полный путь к pip:

```bash
/anaconda/bin/pip install <package>
```

Для Conda всегда следует указывать имя среды (py35 или root):

```bash
conda install <package> -n py35
```

Если вы используете графический интерфейс или перенаправление X11, то с помощью команды **pycharm** вы можете открыть интегрированную среду разработки PyCharm Python. Можно использовать текстовые редакторы по умолчанию. Кроме того, можно использовать Spyder, интегрированную среду разработки Python из дистрибутивов Anaconda Python. Для Spyder необходим графический рабочий стол или перенаправление X11. В графическом интерфейсе есть ярлык для запуска Spyder.

### <a name="jupyter-notebook"></a>Портативный компьютер Jupyter

Дистрибутив Anaconda содержит также среду Jupyter Notebook для совместного использования кода и анализа. Доступ к Jupyter Notebook осуществляется через JupyterHub. Для входа используйте имя и пароль локального пользователя Linux.

На сервере Jupyter Notebook предварительно настроена поддержка ядер Python 2, Python 3 и R. Чтобы запустить браузер для доступа к серверу Jupyter Notebook, щелкните значок **Jupyter Notebook** на рабочем столе. Если вы подключаетесь к DSVM с помощью клиента X2Go или SSH, к серверу Jupyter Notebook можно обратиться по адресу https:\//localhost:8000/.

> [!NOTE]
> При появлении любых предупреждений о сертификатах нажмите кнопку "Продолжить".

Сервер записной книжки Jupyter доступен с любого узла. Введите адрес **https:\//\<имя DNS DSVM или IP-адрес\>:8000/** .

> [!NOTE]
> Когда подготавливается DSVM, в брандмауэре по умолчанию открывается порт 8000. 

Корпорация Майкрософт предоставляет примеры записных книжек: один для Python и один для R. Ссылки на эти примеры вы увидите на домашней странице Jupyter Notebook, когда войдете в Jupyter Notebook с именем и паролем локального пользователя Linux. Чтобы создать записную книжку, щелкните **Создать** и укажите нужный базовый язык. Если вы не видите кнопки **Создать**, щелкните значок **Jupyter** в верхнем левом углу, чтобы перейти на домашнюю страницу сервера записной книжки.

### <a name="spark-standalone"></a>Изолированный экземпляр Spark 

На Linux DSVM предварительно установлен изолированный экземпляр Spark, чтобы вам было удобно локально разрабатывать приложения Spark перед тестированием и развертыванием в крупных кластерах. 

Программы PySpark можно выполнять через ядро Jupyter. Открыв Jupyter, нажмите кнопку **Создать**, чтобы увидеть список доступных ядер. Ядро PySpark **Spark-Python** позволяет создавать приложения Spark, используя язык Python. Вы также можете использовать интегрированную среду разработки Python, такую как PyCharm или Spyder, для создания своей программы Spark. 

В изолированном экземпляре стек Spark работает в вызывающей клиентской программе. Эта позволяет устранять неполадки быстрее, чем при разработке в кластере Spark.

Jupyter предоставляет пример записной книжки для PySpark. Вы найдете его в каталоге SparkML корневого каталога Jupyter ($HOME/notebooks/SparkML/pySpark). 

Если вы программируете на R для Spark, можно использовать Machine Learning Server, SparkR или sparklyr. 

Перед запуском контекста Spark на Machine Learning Server нужно выполнить однократную настройку для включения локального кластера Hadoop HDFS с одним узлом и экземпляра YARN. По умолчанию на виртуальной машине для обработки и анализа данных службы Hadoop установлены, но отключены. Чтобы включить службы Hadoop, при первом использовании выполните следующие команды с правами суперпользователя:

```bash
echo -e 'y\n' | ssh-keygen -t rsa -P '' -f ~hadoop/.ssh/id_rsa
cat ~hadoop/.ssh/id_rsa.pub >> ~hadoop/.ssh/authorized_keys
chmod 0600 ~hadoop/.ssh/authorized_keys
chown hadoop:hadoop ~hadoop/.ssh/id_rsa
chown hadoop:hadoop ~hadoop/.ssh/id_rsa.pub
chown hadoop:hadoop ~hadoop/.ssh/authorized_keys
systemctl start hadoop-namenode hadoop-datanode hadoop-yarn
```

Когда вам не нужны службы, связанные с Hadoop, вы можете останавливать их работу с помощью команды `systemctl stop hadoop-namenode hadoop-datanode hadoop-yarn`.

В каталоге /dsvm/samples/MRS размещен пример, демонстрирующий разработку и тестирование Machine Learning Server в удаленном контексте Spark (на изолированным экземпляре Spark на DSVM).

### <a name="ides-and-editors"></a>Интегрированные среды разработки и редакторы

Вы можете выбрать любой из нескольких редакторов кода, в том числе vi/VIM, Emacs, PyCharm, RStudio, Eclipse, LaTeX и IntelliJ. 

* gedit, Eclipse, IntelliJ, R Studio и PyCharm — это графические редакторы. Чтобы использовать их, нужно войти в графический интерфейс. На рабочем столе и в меню приложений есть значки для запуска этих редакторов.

* vim и Emacs — это текстовые редакторы. Работу с R в Emacs можно упростить с помощью пакета надстройки ESS. Дополнительные сведения см. [на веб-сайте ESS](https://ess.r-project.org/).

* Eclipse — это расширяемая интегрированная среда разработки с открытым кодом, поддерживающая несколько языков. На DSVM установлена интегрированная среда разработки Eclipse для разработчиков Java. Вы можете расширить эту среду, установив подключаемые модули для некоторых популярных языков. 

  Подключаемый модуль Azure Toolkit for Eclipse устанавливается на DSVM вместе с Eclipse. Azure Toolkit for Eclipse позволяет создавать, разрабатывать, тестировать и развертывать приложения Azure с помощью среды разработки Eclipse, которая поддерживает такие языки программирования, как Java.

  Также на DSVM вместе с Azure Toolkit for Eclipse устанавливается пакет SDK Azure для Java. Пакет SDK Azure для Java предоставляет доступ к нескольким службам Azure из среды Java. 
  
  Дополнительные сведения см. в разделе [Набор средств Azure для Eclipse](/java/azure/eclipse/azure-toolkit-for-eclipse).

* LaTex устанавливается с помощью пакета texlive вместе с пакетом надстройки [AUCTeX](https://www.gnu.org/software/auctex/manual/auctex/auctex.html) для Emacs. Этот пакет упрощает создание документов LaTeX в Emacs. 

### <a name="databases"></a>Базы данных

DSVM Linux предоставляет доступ к нескольким средствам для работы с базами данных и командной строкой.

#### <a name="postgressql"></a>PostgresSQL

На DSVM доступна база данных PostgresSQL, для которой уже запущены службы и выполнена операция initdb. Вам нужно создать базы данных и пользователей. См. сведения документации по [PostgresSQL](https://www.postgresql.org/docs/).  

#### <a name="squirrel-sql"></a>SQuirreL SQL

Графический клиент SQuirrel SQL может подключаться к разным базам данных (включая SQL Server, PostgresSQL и MySQL) и выполнять SQL-запросы. Вы можете запустить SQuirrel SQL в сеансе графического интерфейса (например, из клиента X2Go), щелкнув значок на рабочем столе. Вы также можете запустить клиент, выполнив в оболочке следующую команду:

```bash
/usr/local/squirrel-sql-3.7/squirrel-sql.sh /usr/local/squirrel-sql-3.7/squirrel-sql.sh
```

Перед первым применением настройте драйверы и псевдонимы базы данных. Драйверы JDBC расположены в каталоге /usr/share/java/jdbcdrivers.

См. сведения о [SQuirrel SQL](http://squirrel-sql.sourceforge.net/index.php?page=screenshots).

#### <a name="command-line-tools-for-accessing-sql-server"></a>Программы командной строки для доступа к SQL Server

В пакете драйвера ODBC для SQL Server также содержатся две программы командной строки.

* **bcp**. Служебная программа bcp предназначена для массового копирования данных между экземпляром SQL Server и файлом данных в любом пользовательском формате. С помощью средства bcp можно выполнять импорт большого количества новых строк в таблицы SQL Server или экспорт данных из таблиц в файлы данных. Для импорта данных в таблицу следует использовать файл форматирования, созданный для этой таблицы. Вы также можете изучить структуру таблицы и типы данных, допустимые для ее столбцов.

  См. сведения о [подключении с помощью bcp](https://msdn.microsoft.com/library/hh568446.aspx).

* **sqlcmd**. Служебная программа sqlcmd позволяет из командной строки выполнять инструкции Transact-SQL, системные процедуры и файлы скриптов. sqlcmd использует ODBC для выполнения пакетов Transact-SQL.

  См. сведения о [подключении с помощью sqlcmd](https://msdn.microsoft.com/library/hh568447.aspx).

  > [!NOTE]
  > Версии этого средства для платформ Windows и Linux немного отличаются. Дополнительные сведения см. в документации по .

#### <a name="database-access-libraries"></a>Библиотеки для доступа к базам данных

В Python и R предоставляются библиотеки для доступа к базам данных.

* Для R: пакеты RODBC и dplyr позволяют выполнять запросы и инструкции SQL на сервере базы данных.
* Для Python: библиотека pyodbc предоставляет доступ к базе данных с использованием ODBC в качестве базового уровня.

### <a name="azure-tools"></a>Инструменты Azure

На DSVM установлены следующие средства Azure:

* **Azure CLI.** Этот интерфейс командной строки позволяет создавать ресурсы Azure и управлять ими с помощью команд оболочки. Чтобы открыть средства Azure, введите **azure help**. Дополнительные сведения см. на [странице документации по Azure CLI](https://docs.microsoft.com/cli/azure/get-started-with-az-cli2).
* **Обозреватель службы хранилища.** Обозреватель службы хранилища — это графический инструмент, который позволяет просматривать объекты, сохраненные в учетной записи хранения Azure, а также передавать и скачивать данные BLOB-объектов Azure. Для доступа к обозревателю хранилищ воспользуйтесь значком рабочего стола. Его можно открыть из командной строки, введя команду **StorageExplorer**. Для этого необходимо выполнить вход из клиента X2Go или настроить перенаправление X11.
* **Библиотеки Azure**. На DSVM установлены следующие библиотеки:
  
  * **Python**. К библиотекам Python для Azure относятся *azure*, *azureml*, *pydocumentdb* и *pyodbc*. Первые три библиотеки позволяют обращаться к службам хранилища Azure, Машинному обучению Azure и Azure Cosmos DB (база данных NoSQL в Azure). Четвертая библиотека, pyodbc, (вместе с драйвером Microsoft ODBC для SQL Server) обеспечивает доступ к SQL Server, Базе данных SQL Azure и хранилищу данных SQL Azure из Python с помощью интерфейса ODBC. Для просмотра всех перечисленных библиотек введите команду **pip list**. Выполните эту команду как в среде Python версии 2.7, так и в среде Python версии 3.5.
  * **R**. К библиотекам R для Azure относятся AzureML и RODBC.
  * **Java**. Список библиотек Java для Azure можно найти в каталоге /dsvm/sdk/AzureSDKJava на DSVM. Основные библиотеки — это API-интерфейсы для службы хранилища Azure и API-интерфейсы для управления Azure, драйверы Azure Cosmos DB и драйверы JDBC для SQL Server.  

[Портал Azure](https://portal.azure.com) можно открыть в предустановленном браузере Firefox. На портале Azure можно создавать, администрировать и отслеживать ресурсы Azure.

### <a name="azure-machine-learning"></a>Машинное обучение Azure

Машинное обучение Azure — полностью управляемая облачная служба, с помощью которой вы сможете создавать, развертывать и совместно использовать решения прогнозной аналитики. В Студии машинного обучения Azure можно создавать свои эксперименты и модели. Чтобы открыть Машинное обучение Azure в браузере на DSVM, перейдите в раздел [Машинное обучение Microsoft Azure](https://studio.azureml.net).

После входа в Студию машинного обучения Azure вы увидите холст для экспериментов, на котором вы можете создать логическую блок-схему алгоритмов машинного обучения. Также предоставляется доступ к приложению Jupyter Notebook, которое размещено в Машинном обучении Azure. Записная книжка поддерживает экспериментирование в Студии машинного обучения. 

Вы можете ввести в эксплуатацию созданные модели машинного обучения, упаковав их в интерфейс веб-службы. Ввод моделей машинного обучения в эксплуатацию позволяет клиентам, написанным на любом языке, получать прогнозы из этих моделей. Дополнительные сведения см. в [документации по машинному обучению](https://azure.microsoft.com/documentation/services/machine-learning/).

В DSVM также можно создавать модели R или Python, а затем развертывать их в рабочей среде в Машинном обучении Azure. Корпорация Майкрософт установила для этого библиотеки для R (**AzureML**) и Python (**azureml**).

См. сведения о развертывании моделей R и Python в Машинном обучении Azure в описании [10 задач, которые можно выполнить в Виртуальной машине для обработки и анализа данных](vm-do-ten-things.md).

> [!NOTE]
> Хотя инструкции в [этой статье](vm-do-ten-things.md) написаны для Windows DSVM, сведения о развертывании моделей в Машинном обучении Azure применимы и к Linux DSVM.

### <a name="machine-learning-tools"></a>Инструменты машинного обучения

В DSVM включены некоторые инструменты и алгоритмы машинного обучения, которые были предварительно скомпилированы и установлены локально. в частности такие:

* **Microsoft Cognitive Toolkit**: набор средств глубокого обучения;
* **Vowpal Wabbit**: алгоритм быстрого онлайн-обучения;
* **XGBoost**: инструмент, предоставляющий оптимизированные алгоритмы повышенного дерева;
* **Python**. Anaconda Python поставляется с алгоритмами машинного обучения в таких библиотеках, как Scikit-learn. С помощью команды `pip install` можно установить другие библиотеки.
* **R**. Для R доступна расширенная библиотека функций машинного обучения. Предустановленные библиотеки включают lm, glm, randomForest и rpart. С помощью команды `install.packages(<lib name>)` можно установить другие библиотеки.

Microsoft Cognitive Toolkit, Vowpal Wabbit и XGBoost рассматриваются подробнее в следующих разделах.

#### <a name="microsoft-cognitive-toolkit"></a>Microsoft Cognitive Toolkit

Microsoft Cognitive Toolkit — это набор средств с открытым кодом, который предназначен для глубокого обучения. Программа CNTK выполняется из командной строки. Она уже добавлена в переменную PATH.

Для запуска простого примера выполните в оболочке следующие команды:

```bash
cd /home/[USERNAME]/notebooks/CNTK/HelloWorld-LogisticRegression
cntk configFile=lr_bs.cntk makeMode=false command=Train
```

См. сведения в [репозитории CNTK на сайте GitHub](https://github.com/Microsoft/CNTK) и на [вики-сайте CNTK](https://github.com/Microsoft/CNTK/wiki).

#### <a name="vowpal-wabbit"></a>Vowpal Wabbit

Система машинного обучения Vowpal Wabbit поддерживает такие технологии, как онлайн-обучение, хэширование, общее сокращение, сокращение, обучение поиску, активное и интерактивное обучение.

Чтобы запустить простой пример для этого средства, используйте следующие команды:

```bash
cp -r /dsvm/tools/VowpalWabbit/demo vwdemo
cd vwdemo
vw house_dataset
```

Демонстрационный каталог Vowpal Wabbit содержит и более крупные демонстрационные примеры. См. сведения о Vowpal Wabbit в [репозитории Vowpal Wabbit на сайте GitHub](https://github.com/JohnLangford/vowpal_wabbit) и на [вики-сайте Vowpal Wabbit](https://github.com/JohnLangford/vowpal_wabbit/wiki).

#### <a name="xgboost"></a>XGBoost;

Библиотека XGBoost разработана и оптимизирована для алгоритмов увеличивающегося дерева. Эта библиотека создана для того, чтобы расширить вычислительные ограничения компьютеров до пределов, позволяющих создавать увеличивающееся дерево большого размера, которое является масштабируемым, переносимым и точным.

XGBoost предоставляется в виде оболочки командной строки и в виде библиотеки R.

Чтобы использовать библиотеку XGBoost в R, запустите интерактивный сеанс R (выполнив **R** в оболочке) и загрузите эту библиотеку.

Вот простой пример, который вы можете запустить в командной строке R:

```R
library(xgboost)

data(agaricus.train, package='xgboost')
data(agaricus.test, package='xgboost')
train <- agaricus.train
test <- agaricus.test
bst <- xgboost(data = train$data, label = train$label, max.depth = 2,
                eta = 1, nthread = 2, nround = 2, objective = "binary:logistic")
pred <- predict(bst, test$data)
```

Для запуска командной строки XGBoost выполните в оболочке следующие команды:

```bash
cp -r /dsvm/tools/xgboost/demo/binary_classification/ xgboostdemo
cd xgboostdemo
xgboost mushroom.conf
```

Файл .model записывается в указанный каталог. См. сведения об этом примере в GitHub в описании [двоичной классификации](https://github.com/dmlc/xgboost/tree/master/demo/binary_classification).

См. сведения об XGBoost на [странице документации по XGBoost](https://xgboost.readthedocs.org/en/latest/) и в [репозитории XGBoost на сайте GitHub](https://github.com/dmlc/xgboost).

#### <a name="rattle"></a>Rattle;

Rattle (*R* *A*nalytical *T*ool *T*o *L*earn *E*asily) — это аналитический инструмент R для легкого обучения, который поддерживает изучение и моделирование данных на основе графического пользовательского интерфейса. Задачи Rattle:
- представляет статистические и визуальные сводки по данным;
- преобразует данные в удобный для моделирования формат;
- создает из данных неконтролируемые и контролируемые модели;
- представляет производительность моделей в графическом виде;
- оценивает новые наборы данных;
- генерирует код R;
- реплицирует операции пользовательского интерфейса, которые можно запустить непосредственно в R или использовать в качестве отправной точки для дальнейшего анализа.

Чтобы использовать Rattle, нужно открыть сеанс в графическом интерфейсе. Чтобы открыть среду R, введите **R** в терминале. В командной строке R введите следующие команды.

```R
library(rattle)
rattle()
```

Откроется графический интерфейс с набором вкладок. Следующая процедура быстрого запуска позволяет быстро создать в Rattle модель на основе примера с набором данных о погоде. На некоторых шагах будет предложено автоматически скачать и установить необходимые пакеты R, которые еще не установлены в системе.

> [!NOTE]
> Если у вас нет разрешений на установку пакета в системном каталоге (по умолчанию), в окне консоли R может появиться запрос на установку пакетов в вашей персональной библиотеке. В ответ на такие запросы вводите **y** (да).

1. Нажмите кнопку **Выполнить**.
1. Появится диалоговое окно с запросом на загрузку примера с набором данных о погоде. Щелкните **Yes** (Да), чтобы загрузить пример.
1. Выберите вкладку **Model** (Модель).
1. Щелкните **Execute** (Выполнить), чтобы создать дерево принятия решений.
1. Щелкните **Draw** (Нарисовать), чтобы отобразить дерево принятия решений.
1. Выберите **Forest** (Лес) и щелкните **Execute** (Выполнить), чтобы создать случайный лес.
1. Перейдите на вкладку **Evaluate** (Оценка).
1. Выберите **Risk** (Риск) и щелкните **Execute** (Выполнить), чтобы отобразить две диаграммы производительности **Risk (Cumulative)** (Риск (накопительный)).
1. Откройте вкладку **Log** (Журнал), чтобы показать код R, созданный для предыдущих операций. (Из-за ошибки в текущем выпуске Rattle необходимо вставить знак **#** перед строкой **Export this log** (Экспортировать этот файл журнала) в тексте журнала.)
1. Нажмите кнопку **Export** (Экспортировать), чтобы сохранить файл со скриптом R с именем *weather_script.R* в домашней папке.

Теперь вы можете выйти из Rattle и R и отредактировать созданный скрипт R. Этот скрипт можно использовать и без изменений, запуская его в любой момент для повтора действий, выполненных в пользовательском интерфейсе Rattle. Этот способ позволяет пользователям с небольшим опытом работы с R быстро выполнять анализ и машинное обучение в простом графическом интерфейсе с автоматическим созданием кода R для изменения или изучения.

## <a name="next-steps"></a>Дополнительная информация

Вот как можно продолжить обучение и изучение.

* В пошаговом руководстве по использованию [Виртуальной машины Linux для обработки и анализу данных](linux-dsvm-walkthrough.md) описано, как выполнять соответствующие распространенные задачи с помощью подготовленной виртуальной машины Linux DSVM. 
* Изучите описанные в этой статье средства обработки и анализа данных, предоставляемые в DSVM. Кроме того, можно выполнить команду `dsvm-more-info` в оболочке на виртуальной машине, чтобы получить базовые сведения и ссылки на справочные материалы об инструментах, которые установлены на DSVM.  
* Изучите систематический подход к созданию комплексных аналитических решений с помощью [группового процесса обработки и анализа данных](https://aka.ms/tdsp).
* В [Коллекции решений ИИ Azure](https://gallery.azure.ai/) можно найти примеры для машинного обучения и анализа данных, в которых используются службы ИИ Azure.