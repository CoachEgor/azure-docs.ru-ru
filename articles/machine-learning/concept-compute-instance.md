---
title: Сведения о вычислительном экземпляре Машинного обучения Azure
titleSuffix: Azure Machine Learning
description: Сведения о вычислительном экземпляре Машинного обучения Azure, полностью управляемой облачной рабочей станции.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: sgilley
author: sdgilley
ms.date: 07/27/2020
ms.openlocfilehash: f4938d517d9a5c244045798a79f31b96bacd03f5
ms.sourcegitcommit: 2ff0d073607bc746ffc638a84bb026d1705e543e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2020
ms.locfileid: "87829447"
---
# <a name="what-is-an-azure-machine-learning-compute-instance"></a>Сведения о вычислительном экземпляре Машинного обучения Azure

Вычислительный экземпляр Машинное обучение Azure — это управляемая облачная Рабочая станция для специалистов по обработке и анализу данных.

Вычислительные экземпляры упрощают начало работы с Машинным обучением Azure, а также предоставляют ИТ-администраторам возможности управления и подготовки предприятия.  

Используйте вычислительный экземпляр в качестве полностью настроенной и управляемой среды разработки в облаке для машинного обучения. Их также можно использовать в качестве целевого объекта вычислений для обучения и для целей разработки и тестирования.  

Для обучения модели производственного уровня используйте [машинное обучение Azure COMPUTE кластер](how-to-set-up-training-targets.md#amlcompute) с возможностями масштабирования с несколькими узлами. Для развертывания модели производственного класса используйте [кластер службы Azure Kubernetes](how-to-deploy-azure-kubernetes-service.md).

## <a name="why-use-a-compute-instance"></a>Зачем использовать вычислительный экземпляр?

Вычислительный экземпляр — это полностью управляемая облачная рабочая станция, оптимизированная для вашей среды разработки машинного обучения. Он предоставляет следующие преимущества:

|Основные преимущества|Описание|
|----|----|
|Производительность|Вы можете создавать и развертывать модели с помощью интегрированных записных книжек и следующих средств в Машинное обучение Azure Studio:<br/>— Jupyter;<br/>— JupyterLab;<br/>-RStudio (Предварительная версия)<br/>Вычислительный экземпляр полностью интегрирован с Машинное обучение Azure рабочей областью и Studio. Вы можете обмениваться записными книжками и данными с другими специалистами по анализу данных в рабочей области. Вы также можете настроить VS Code удаленное развертывание с помощью [SSH](how-to-set-up-vs-code-remote.md) . |
|Управляемость и безопасность|Сократите воздействие на систему безопасности и обеспечьте соответствие корпоративным требованиям безопасности. Вычислительные экземпляры предоставляют надежные политики управления и защищенные сетевые конфигурации, такие как:<br/><br/>— автоматическая подготовка на основе шаблонов Resource Manager или пакета SDK для Машинного обучения Azure;<br/>- [Управление доступом на основе ролей в Azure (Azure RBAC)](/azure/role-based-access-control/overview)<br/>- [поддержка виртуальной сети;](how-to-enable-virtual-network.md#compute-instance)<br/>— политика SSH для включения или отключения доступа по протоколу SSH.<br/>TLS 1,2 включен |
|Предварительно настроено &nbsp; для &nbsp; машинного обучения|Сэкономьте время на задачах настройки благодаря предварительно настроенным, актуальным пакетам машинного обучения, платформам для глубокого обучения и драйверам GPU.|
|Полные возможности настройки|Широкая поддержка типов виртуальных машин Azure, включая GPU, и сохраняемая низкоуровневая настройка, например установка пакетов и драйверов, позволяют без труда реализовывать сложные сценарии. |

## <a name="tools-and-environments"></a><a name="contents"></a>Средства и среды

> [!IMPORTANT]
> Средства, отмеченные ниже (Предварительная версия), сейчас доступны в общедоступной предварительной версии.
> Предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Вычислительный экземпляр Машинного обучения Azure позволяет создавать, обучать и развертывать модели в полностью интегрированной среде записных книжек в рабочей области.

В вычислительном экземпляре устанавливаются следующие средства и среды. 

|Общие средства и среды|Сведения|
|----|:----:|
|Драйверы|`CUDA`</br>`cuDNN`</br>`NVIDIA`</br>`Blob FUSE` |
|Библиотека Intel MPI||
|Azure CLI ||
|Образцы Машинного обучения Azure ||
|Docker||
|Nginx||
|NCCL 2.0 ||
|Protobuf|| 

|Средства и среды **R**|Сведения|
|----|:----:|
|Выпуск RStudio Server с открытым исходным кодом (Предварительная версия)||
|Ядро R||
|Пакет SDK Машинного обучения Azure для R|[azuremlsdk](https://azure.github.io/azureml-sdk-for-r/reference/index.html)</br>Примеры пакета SDK|

|Средства и среды **PYTHON**|Сведения|
|----|----|
|Anaconda Python||
|Jupyter и расширения||
|Jupyterlab и расширения||
[Пакет SDK службы "Машинное обучение Azure" для Python](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py)</br>из PyPI|Включает большинство дополнительных пакетов azureml.  Чтобы просмотреть полный список, [откройте окно терминала в вычислительном экземпляре](how-to-run-jupyter-notebooks.md#terminal) и выполните команду <br/> `conda list -n azureml_py36 azureml*` |
|Другие пакеты PyPI|`jupytext`</br>`tensorboard`</br>`nbconvert`</br>`notebook`</br>`Pillow`|
|Пакеты Conda|`cython`</br>`numpy`</br>`ipykernel`</br>`scikit-learn`</br>`matplotlib`</br>`tqdm`</br>`joblib`</br>`nodejs`</br>`nb_conda_kernels`|
|Пакеты глубокого обучения|`PyTorch`</br>`TensorFlow`</br>`Keras`</br>`Horovod`</br>`MLFlow`</br>`pandas-ml`</br>`scrapbook`|
|Пакеты ONNX|`keras2onnx`</br>`onnx`</br>`onnxconverter-common`</br>`skl2onnx`</br>`onnxmltools`|
|Образцы SDK Python и R для Машинного обучения Azure||

Все пакеты Python устанавливаются в среде **Python 3.6 — AzureML**.  

### <a name="installing-packages"></a>Установка пакетов

Пакеты можно устанавливать непосредственно в записной книжке Jupyter или Rstudio.

* RStudio: используйте вкладку **Packages** (Пакеты) в правом нижнем углу или вкладку **Console** (Консоль) в левом верхнем углу.  
* Python: Добавьте код установки и выполните его в ячейке записной книжки Jupyter.

Кроме того, доступ к окну терминала можно получить одним из указанных ниже способов.

* RStudio: в левом верхнем углу выберите вкладку **Terminal** (Терминал).
* Jupyter Lab:  выберите плитку **Terminal** (Терминал) под заголовком **Other** (Другое) на вкладке Launcher (Средства запуска).
* Jupyter:  на вкладке Files (Файлы) в правом верхнем углу выберите **New > Terminal** (Создать > Терминал).
* Подключитесь к компьютеру по протоколу SSH.  Установите пакеты Python в среде **Python 3.6 — AzureML**.  Установите пакеты R в среде **R**.

## <a name="accessing-files"></a>Доступ к файлам

Записные книжки и скрипты R хранятся в учетной записи хранения по умолчанию для рабочей области в общей папке Azure.  Эти файлы находятся в каталоге "Файлы пользователя". Это хранилище упрощает обмен записными книжками между вычислительными экземплярами. Кроме того, учетная запись хранения позволяет безопасно сохранять записные книжки при завершении работы или удалении вычислительного экземпляра.

Учетная запись общей папки Azure в рабочей области подключается как диск в вычислительном экземпляре. Этот диск является рабочим каталогом по умолчанию для Jupyter, Jupyter Labs и RStudio. Это означает, что записные книжки и другие файлы, созданные в Jupyter, JupyterLab или RStudio, автоматически сохраняются в общей папке и доступны для использования в других экземплярах вычислений.

Файлы в общей папке доступны из всех вычислительных экземпляров в данной рабочей области. Любые изменения этих файлов в вычислительном экземпляре надежно сохраняются в общей папке.

Вы также можете клонировать последние образцы Машинного обучения Azure в папку в каталоге "Файлы пользователя" в общей папке рабочей области.

Запись небольших файлов на сетевые диски может выполняться медленнее, чем при записи на локальный диск экземпляра COMPUTE.  При записи большого количества небольших файлов попробуйте использовать каталог непосредственно в вычислительном экземпляре, например каталог `/tmp`. Обратите внимание, что эти файлы не будут доступны из других экземпляров вычислений. 

Вы можете использовать `/tmp` каталог в вычислительном экземпляре для временных данных.  Однако не создавайте большие файлы данных на диске операционной системы вычислительного экземпляра.  Вместо этого используйте [хранилища данных](concept-azure-machine-learning-architecture.md#datasets-and-datastores) . Если вы установили расширение JupyterLab Git, оно также может привести к снижению производительности вычислительного экземпляра.

## <a name="managing-a-compute-instance"></a>Управление вычислительным экземпляром

В рабочей области в студии Машинного обучения Azure выберите **Вычисление**, а затем вверху выберите **Вычислительный экземпляр**.

![Управление вычислительным экземпляром](./media/concept-compute-instance/manage-compute-instance.png)

Вы можете выполнять следующие действия.

* [Создание вычислительного экземпляра](#create). 
* Обновите вкладку "вычисленные экземпляры".
* Запуск, остановка и перезапуск вычислительного экземпляра.  Вы платите за экземпляр при его запуске. Останавливает вычислительный экземпляр, если он не используется для снижения затрат. Остановка вычислительного экземпляра освобождает его. При необходимости снова запустите ее. 
* Удаление вычислительного экземпляра.
* Отфильтруйте список экземпляров вычислений до созданных вами.  Это те экземпляры вычислений, к которым у вас есть доступ.

Для каждого вычислительного экземпляра в рабочей области, к которому у вас есть доступ, можно:

* Доступ к Jupyter, JupyterLab или RStudio в вычислительном экземпляре.
* Подключение к вычислительному экземпляру по протоколу SSH. Доступ по протоколу SSH по умолчанию отключен, но его можно включить во время создания вычислительного экземпляра. Доступ по протоколу SSH осуществляется с помощью открытого и закрытого ключей. На вкладке приводятся подробные сведения об SSH-подключении, такие как IP-адрес, имя пользователя и номер порта.
* Получение сведений об определенном вычислительном экземпляре, таких как IP-адрес и регион.

[Управление доступом на основе ролей](/azure/role-based-access-control/overview) позволяет управлять тем, кто из пользователей в рабочей области может создавать, удалять, запускать, останавливать и перезапускать вычислительный экземпляр. Все пользователи с ролью участника или владельца рабочей области могут создавать, удалять, запускать, останавливать и перезапускать вычислительные экземпляры в рабочей области. Однако доступ к Jupyter, JupyterLab и RStudio в вычислительном экземпляре разрешен только его создателю. Создатель вычислительного экземпляра имеет выделенный для них вычислительный экземпляр, имеет доступ с доступом root и может осуществляться через Jupyter/JupyterLab/RStudio. Вычислительный экземпляр имеет одно имя входа создателя. Эти учетные данные используются для управления доступом на основе ролей и назначения выполнений экспериментов. Доступ по протоколу SSH контролируется с помощью открытого и закрытого ключей.

К этим действиям можно управлять с помощью RBAC:
* *Microsoft.MachineLearningServices/workspaces/computes/read*
* *Microsoft.MachineLearningServices/workspaces/computes/write*
* *Microsoft.MachineLearningServices/workspaces/computes/delete*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/запуск/действие*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/действие*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/перезагрузка/действие*

### <a name="create-a-compute-instance"></a><a name="create"></a>Создание вычислительного экземпляра

В рабочей области Машинное обучение Azure Studio создайте новый вычислительный экземпляр из раздела **вычислений** или **записных книжек** , когда будете готовы запустить одну из ваших записных книжек.

:::image type="content" source="media/concept-compute-instance/create-compute-instance.png" alt-text="Создание нового вычислительного экземпляра":::


|Поле  |Описание  |
|---------|---------|
|Имя вычислительной среды     |  <li>Имя является обязательным и должно иметь длину от 3 до 24 символов.</li><li>Допустимыми символами являются буквы верхнего и нижнего регистра, цифры и **-** символ.</li><li>Имя должно начинаться с буквы</li><li>Имя должно быть уникальным среди всех существующих вычислений в регионе Azure. Вы увидите оповещение, если выбранное имя не является уникальным</li><li>Если **-** используется символ, необходимо следовать по крайней мере одну букву в имени.</li>     |
|Тип виртуальной машины |  Выберите ЦП или GPU. Этот тип нельзя изменить после создания     |
|размер виртуальной машины;     |  Поддерживаемые размеры виртуальных машин могут быть ограничены в вашем регионе. Проверка [списка доступности](https://azure.microsoft.com/global-infrastructure/services/?products=virtual-machines)     |
|Включить или отключить доступ по протоколу SSH     |   По умолчанию доступ по протоколу SSH отключен.  Доступ по протоколу SSH не может быть. изменено после создания. Обязательно включите доступ, если планируется интерактивное Отладка с помощью [VS Code Remote](how-to-set-up-vs-code-remote.md)   |
|Дополнительные параметры     |  Необязательный элемент. Настройте виртуальную сеть. Укажите **группу ресурсов**, **виртуальную сеть**и **подсеть** , чтобы создать вычислительный экземпляр в виртуальной сети Azure. Дополнительные сведения см. в описании этих [сетевых требований](how-to-enable-virtual-network.md#compute-instance) для виртуальной сети.        |

Экземпляр можно также создать одним из следующих способов:
* Непосредственно из [интегрированных записных книжек](tutorial-1st-experiment-sdk-setup.md#azure)
* На портале Azure
* Из шаблона Azure Resource Manager. Пример шаблона см. в разделе [Создание шаблона вычислительной машинное обучение Azure](https://github.com/Azure/azure-quickstart-templates/tree/master/101-machine-learning-compute-create-computeinstance).
* С помощью [пакета SDK для машинное обучение Azure](https://github.com/Azure/MachineLearningNotebooks/blob/master/how-to-use-azureml/training/train-on-computeinstance/train-on-computeinstance.ipynb)
* Из [расширения CLI для машинное обучение Azure](reference-azure-machine-learning-cli.md#computeinstance)

Выделенные ядра для каждого региона на квоту семейства виртуальных машин и общая региональная квота, которая применяется к созданию вычислительных экземпляров. объединены и используются совместно с Машинное обучение Azureной квотой на расчетный кластер. При остановке вычислительного экземпляра квота не освобождается для того, чтобы вы могли перезапустить вычислительный экземпляр.

## <a name="compute-target"></a>Целевой объект вычисления

Вычислительные экземпляры можно использовать в качестве [целевого объекта вычислений для обучения](concept-compute-target.md#train) аналогично кластерам обучения Машинного обучения Azure. 

Вычислительный экземпляр:
* Содержит очередь заданий.
* Безопасно запускает задания в среде виртуальной сети, не требуя, чтобы предприятия открывали порт SSH. Задание выполняется в контейнерной среде и упаковывает зависимости модели в контейнер DOCKER.
* Может выполнять несколько небольших заданий в параллельном режиме (Предварительная версия).  Два задания на ядро могут выполняться параллельно, в то время как остальные задания помещаются в очередь.

Вы можете использовать вычислительный экземпляр в качестве локального целевого объекта развертывания для сценариев тестирования и отладки.

> [!NOTE]
> Распределенные задания обучения не поддерживаются в вычислительном экземпляре.  Для распределенного обучения используйте (вычислить кластеры] (инструкции по настройке-Training – targets. md # амлкомпуте).

Дополнительные сведения см. в разделе Записная книжка Training [-On-компутеинстанце](https://github.com/Azure/MachineLearningNotebooks/blob/master/how-to-use-azureml/training/train-on-computeinstance/train-on-computeinstance.ipynb). Эта записная книжка также доступна в папке **Samples** в студии *обучения/обучения-on-компутеинстанце*.

## <a name="what-happened-to-notebook-vm"></a><a name="notebookvm"></a>Что произошло с виртуальной машиной для записных книжек?

Вычислительные экземпляры заменяют виртуальную машину для записных книжек.  

Все файлы записных книжек, хранящиеся в общей папке рабочей области, и данные в хранилищах данных рабочей области доступны из вычислительного экземпляра. Однако все пользовательские пакеты, ранее установленные в виртуальной машине для записных книжек, необходимо повторно установить в вычислительном экземпляре. Ограничения квоты, применяемые при создании вычислительных кластеров, также применяются при создании вычислительных экземпляров.

Создавать новые виртуальные машины для записных книжек нельзя. Однако вы по-прежнему можете получать доступ к созданным виртуальным машинам для записных книжек и использовать все их возможности. Вычислительные экземпляры можно создавать в той же рабочей области, что и существующие виртуальные машины для записных книжек.


## <a name="next-steps"></a>Дальнейшие действия

 * [Руководство. Обучение модели Машинного обучения](tutorial-1st-experiment-sdk-train.md) — демонстрация использования вычислительного экземпляра со встроенной записной книжкой.
