---
title: Сведения о вычислительном экземпляре Машинного обучения Azure
titleSuffix: Azure Machine Learning
description: Сведения о вычислительном экземпляре Машинного обучения Azure, полностью управляемой облачной рабочей станции.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: sgilley
author: sdgilley
ms.date: 12/13/2019
ms.openlocfilehash: 8c03df8fb0cd8f5f092450ebe4c66266d2ff4293
ms.sourcegitcommit: fc0431755effdc4da9a716f908298e34530b1238
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2020
ms.locfileid: "83816358"
---
# <a name="what-is-an-azure-machine-learning-compute-instance"></a>Сведения о вычислительном экземпляре Машинного обучения Azure

Вычислительный экземпляр Машинного обучения Azure (предварительная версия) — это полностью управляемая облачная рабочая станция для специалистов по обработке и анализу данных. 

Вычислительные экземпляры упрощают начало работы с Машинным обучением Azure, а также предоставляют ИТ-администраторам возможности управления и подготовки предприятия.  

Используйте вычислительный экземпляр в качестве полностью настроенной и управляемой среды разработки в облаке.

Вычислительные экземпляры обычно используются в качестве сред разработки.  Их также можно использовать в качестве целевого объекта вычислений для заданий обучения и вывода результатов в процессе разработки и тестирования.  Для масштабных задач в качестве целевого объекта вычислений лучше подходят [вычислительные кластеры Машинного обучения Azure](how-to-set-up-training-targets.md#amlcompute).


## <a name="why-use-a-compute-instance"></a>Зачем использовать вычислительный экземпляр?

Вычислительный экземпляр — это полностью управляемая облачная рабочая станция, оптимизированная для вашей среды разработки машинного обучения. Он предоставляет следующие преимущества:

|Основные преимущества||
|----|----|
|Производительность|Специалисты по обработке и анализу данных могут создавать и развертывать модели с помощью интегрированных записных книжек и следующих средств в веб-браузере:<br/>— Jupyter;<br/>— JupyterLab;<br/>— RStudio.|
|Управляемость и безопасность|Сократите воздействие на систему безопасности и обеспечьте соответствие корпоративным требованиям безопасности. Вычислительные экземпляры предоставляют надежные политики управления и защищенные сетевые конфигурации, такие как:<br/><br/>— автоматическая подготовка на основе шаблонов Resource Manager или пакета SDK для Машинного обучения Azure;<br/>- [управление доступом на основе ролей (RBAC);](/azure/role-based-access-control/overview)<br/>- [поддержка виртуальной сети;](how-to-enable-virtual-network.md#compute-instance)<br/>— политика SSH для включения или отключения доступа по протоколу SSH.|
|Предварительная настройка&nbsp;или&nbsp;машинное обучение|Сэкономьте время на задачах настройки благодаря предварительно настроенным, актуальным пакетам машинного обучения, платформам для глубокого обучения и драйверам GPU.|
|Полные возможности настройки|Широкая поддержка типов виртуальных машин Azure, включая GPU, и сохраняемая низкоуровневая настройка, например установка пакетов и драйверов, позволяют без труда реализовывать сложные сценарии. |

## <a name="tools-and-environments"></a><a name="contents"></a>Средства и среды

Вычислительный экземпляр Машинного обучения Azure позволяет создавать, обучать и развертывать модели в полностью интегрированной среде записных книжек в рабочей области.


В вычислительном экземпляре устанавливаются следующие средства и среды. 

|Общие средства и среды|Сведения|
|----|:----:|
|Драйверы|`CUDA`</br>`cuDNN`</br>`NVIDIA`</br>`Blob FUSE` |
|Библиотека Intel MPI||
|Azure CLI ||
|Образцы Машинного обучения Azure ||
|Docker||
|Nginx||
|NCCL 2.0 ||
|Protobuf|| 

|Средства и среды **R**|Сведения|
|----|:----:|
|RStudio Server (выпуск с открытым кодом)||
|Ядро R||
|Пакет SDK Машинного обучения Azure для R|[azuremlsdk](https://azure.github.io/azureml-sdk-for-r/reference/index.html)</br>Примеры пакета SDK|

|Средства и среды **PYTHON**|Сведения|
|----|----|
|Anaconda Python||
|Jupyter и расширения||
|Jupyterlab и расширения||
[Пакет SDK службы "Машинное обучение Azure" для Python](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py)</br>из PyPI|Включает большинство дополнительных пакетов azureml.  Чтобы просмотреть полный список, [откройте окно терминала в вычислительном экземпляре](how-to-run-jupyter-notebooks.md#terminal) и выполните команду <br/> `conda list -n azureml_py36 azureml*` |
|Другие пакеты PyPI|`jupytext`</br>`tensorboard`</br>`nbconvert`</br>`notebook`</br>`Pillow`|
|Пакеты Conda|`cython`</br>`numpy`</br>`ipykernel`</br>`scikit-learn`</br>`matplotlib`</br>`tqdm`</br>`joblib`</br>`nodejs`</br>`nb_conda_kernels`|
|Пакеты глубокого обучения|`PyTorch`</br>`TensorFlow`</br>`Keras`</br>`Horovod`</br>`MLFlow`</br>`pandas-ml`</br>`scrapbook`|
|Пакеты ONNX|`keras2onnx`</br>`onnx`</br>`onnxconverter-common`</br>`skl2onnx`</br>`onnxmltools`|
|Образцы SDK Python и R для Машинного обучения Azure||

Все пакеты Python устанавливаются в среде **Python 3.6 — AzureML**.  

Вычислительные экземпляры обычно используются в качестве сред разработки.  Их также можно использовать в качестве целевого объекта вычислений для заданий обучения и вывода результатов в процессе разработки и тестирования.  Для масштабных задач в качестве целевого объекта вычислений лучше подходят [вычислительные кластеры Машинного обучения Azure](how-to-set-up-training-targets.md#amlcompute).

### <a name="installing-packages"></a>Установка пакетов

Пакеты можно устанавливать непосредственно в записной книжке Jupyter или Rstudio.

* RStudio: используйте вкладку **Packages** (Пакеты) в правом нижнем углу или вкладку **Console** (Консоль) в левом верхнем углу.  
* Python: Добавьте код установки и выполните его в ячейке записной книжки Jupyter.

Кроме того, доступ к окну терминала можно получить одним из указанных ниже способов.

* RStudio: в левом верхнем углу выберите вкладку **Terminal** (Терминал).
* Jupyter Lab:  выберите плитку **Terminal** (Терминал) под заголовком **Other** (Другое) на вкладке Launcher (Средства запуска).
* Jupyter:  на вкладке Files (Файлы) в правом верхнем углу выберите **New > Terminal** (Создать > Терминал).
* Подключитесь к компьютеру по протоколу SSH.  Установите пакеты Python в среде **Python 3.6 — AzureML**.  Установите пакеты R в среде **R**.

## <a name="accessing-files"></a>Доступ к файлам

Записные книжки и скрипты R хранятся в учетной записи хранения по умолчанию для рабочей области в общей папке Azure.  Эти файлы находятся в каталоге "Файлы пользователя". Это хранилище упрощает обмен записными книжками между вычислительными экземплярами. Кроме того, учетная запись хранения позволяет безопасно сохранять записные книжки при завершении работы или удалении вычислительного экземпляра.

Учетная запись общей папки Azure в рабочей области подключается как диск в вычислительном экземпляре. Этот диск является рабочим каталогом по умолчанию для Jupyter, Jupyter Labs и RStudio.

Файлы в общей папке доступны из всех вычислительных экземпляров в данной рабочей области. Любые изменения этих файлов в вычислительном экземпляре надежно сохраняются в общей папке.

Вы также можете клонировать последние образцы Машинного обучения Azure в папку в каталоге "Файлы пользователя" в общей папке рабочей области.

Запись небольших файлов на сетевые диски может выполняться медленнее, чем в саму виртуальную машину.  При записи большого количества небольших файлов попробуйте использовать каталог непосредственно в вычислительном экземпляре, например каталог `/tmp`. Обратите внимание, что эти файлы будут недоступны из других вычислительных экземпляров в рабочей области.

## <a name="managing-a-compute-instance"></a>Управление вычислительным экземпляром

В рабочей области в студии Машинного обучения Azure выберите **Вычисление**, а затем вверху выберите **Вычислительный экземпляр**.

![Управление вычислительным экземпляром](./media/concept-compute-instance/manage-compute-instance.png)

Вы можете выполнять следующие действия.

* Создание вычислительного экземпляра. Укажите имя и тип виртуальной машины Azure, включая GPU (обратите внимание, что тип виртуальной машины нельзя изменить после создания), включите или отключите доступ по протоколу SSH и при необходимости настройте параметры виртуальной сети. Кроме того, экземпляр можно создать непосредственно из интегрированных записных книжек, на портале Azure, из шаблона Resource Manager или пакета SDK для Машинного обучения Azure. Квота выделенных ядер на регион, применяемая при создании вычислительного экземпляра, объединяется с квотой вычислительных кластеров Машинного обучения Azure.
* Обновление вкладки вычислительных экземпляров.
* Запуск, остановка и перезапуск вычислительного экземпляра. Чтобы снизить расходы, остановите работу виртуальной машины, если она не используется. При необходимости снова запустите ее.
* Удаление вычислительного экземпляра.

Для каждого вычислительного экземпляра в рабочей области можно выполнять следующие действия.

* Доступ к Jupyter, JupyterLab или RStudio в вычислительном экземпляре.
* Подключение к вычислительному экземпляру по протоколу SSH. Доступ по протоколу SSH по умолчанию отключен, но его можно включить во время создания вычислительного экземпляра. Доступ по протоколу SSH осуществляется с помощью открытого и закрытого ключей. На вкладке приводятся подробные сведения об SSH-подключении, такие как IP-адрес, имя пользователя и номер порта.
* Получение сведений об определенном вычислительном экземпляре, таких как IP-адрес и регион.

[Управление доступом на основе ролей](/azure/role-based-access-control/overview) позволяет управлять тем, кто из пользователей в рабочей области может создавать, удалять, запускать, останавливать и перезапускать вычислительный экземпляр. Все пользователи с ролью участника или владельца рабочей области могут создавать, удалять, запускать, останавливать и перезапускать вычислительные экземпляры в рабочей области. Однако доступ к Jupyter, JupyterLab и RStudio в вычислительном экземпляре разрешен только его создателю. Для создателя вычислительного экземпляра он является выделенным. При этом создатель имеет доступ с правами привилегированного пользователя и может подключаться к терминалу через Jupyter. Вычислительный экземпляр имеет одно имя входа создателя. Эти учетные данные используются для управления доступом на основе ролей и назначения выполнений экспериментов. Доступ по протоколу SSH контролируется с помощью открытого и закрытого ключей.

Экземпляр можно также создать одним из следующих способов:
* непосредственно из интерфейса интегрированных записных книжек;
* На портале Azure
* на основе шаблона Azure Resource Manager;
* с помощью пакета SDK для Машинного обучения Azure.

Квота выделенных ядер на регион, применяемая при создании вычислительного экземпляра, объединяется с квотой обучающих кластеров Машинного обучения Azure. 

## <a name="compute-target"></a>Целевой объект вычисления

Вычислительные экземпляры можно использовать в качестве [целевого объекта вычислений для обучения](concept-compute-target.md#train) аналогично кластерам обучения Машинного обучения Azure. Подготовьте виртуальную машину с несколькими GPU для выполнения распределенных заданий обучения с помощью оценщиков TensorFlow и PyTorch. Можно также создать конфигурацию запуска и использовать ее для выполнения эксперимента в вычислительном экземпляре. Вы можете использовать вычислительный экземпляр в качестве локального целевого объекта развертывания для вывода в сценариях тестирования и отладки.

## <a name="what-happened-to-notebook-vm"></a><a name="notebookvm"></a>Что произошло с виртуальной машиной для записных книжек?

Вычислительные экземпляры заменяют виртуальную машину для записных книжек.  

Все файлы записных книжек, хранящиеся в общей папке рабочей области, и данные в хранилищах данных рабочей области доступны из вычислительного экземпляра. Однако все пользовательские пакеты, ранее установленные в виртуальной машине для записных книжек, необходимо повторно установить в вычислительном экземпляре. Ограничения квоты, применяемые при создании вычислительных кластеров, также применяются при создании вычислительных экземпляров. 

Создавать новые виртуальные машины для записных книжек нельзя. Однако вы по-прежнему можете получать доступ к созданным виртуальным машинам для записных книжек и использовать все их возможности. Вычислительные экземпляры можно создавать в той же рабочей области, что и существующие виртуальные машины для записных книжек. 


## <a name="next-steps"></a>Дальнейшие действия

 * [Руководство. Обучение модели Машинного обучения](tutorial-1st-experiment-sdk-train.md) — демонстрация использования вычислительного экземпляра со встроенной записной книжкой.
