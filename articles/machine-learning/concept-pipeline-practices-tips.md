---
title: Итерация и доработка конвейеров машинного обучения
titleSuffix: Azure Machine Learning
description: Шаблоны, практические рекомендации и советы по быстрой разработке
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: laobri
author: lobrien
ms.date: 05/01/2020
ms.openlocfilehash: 2ea353469ed111eebb591aa6ba86c652683cc2f0
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "82858192"
---
# <a name="iterating-and-evolving-machine-learning-pipelines"></a>Итерация и доработка конвейеров машинного обучения

Машинное обучение Azure конвейеры обеспечивают эффективный способ разделения кода, повторного использования результатов и оптимизации ресурсов вычислений. Ниже приведены некоторые практические советы и рекомендации по работе с конвейерами.

## <a name="how-do-you-get-started-with-pipelines"></a>Как начать работу с конвейерами?

Существует несколько вариантов начала работы, если вы не знакомы с конвейерами:

* Если вы узнаете о том, как прочесть и повторно создать процесс построения, то в статье [Создание и запуск конвейеров машинного обучения с помощью пакета SDK для машинное обучение Azure](how-to-create-your-first-pipeline.md) хорошо подходит. 
* Если вы хотите интерактивно изучать в записной книжке Jupyter, конвейер разрабатывается в [машинное обучение Azure конвейерах: Начало работы](https://github.com/Azure/MachineLearningNotebooks/blob/master/how-to-use-azureml/machine-learning-pipelines/intro-to-pipelines/aml-pipelines-getting-started.ipynb) Записная книжка может оказаться подходящую для вас
* Если вы предпочитаете ситуацию с кодом, то клонирование [демонстрационного репозитория машинное обучение Azure конвейеров](https://github.com/microsoft/aml-pipelines-demo) обеспечивает хорошую отправную точку

## <a name="how-do-you-modularize-pipeline-code"></a>Как вы разделения код конвейера? 

Модули и `ModuleStep` класс предоставляют прекрасную возможность разделения код ml. Однако следует помнить, что перемещение между этапами конвейера значительно дороже, чем вызов функции. Вопрос, на который нужно спросить, — это функции и данные, которые отличаются от этих функций и данных в другом разделе? но нужно ли, чтобы эти функции и данные изменялись отдельно? или "это вычислительное дорогостоящее и можно ли повторно использовать его выходные данные?" Дополнительные сведения см. в статьях сисн'тебук [как создать модуль, переработать и использовать их в конвейере с модулестеп](https://github.com/Azure/MachineLearningNotebooks/blob/master/how-to-use-azureml/machine-learning-pipelines/intro-to-pipelines/aml-pipelines-how-to-use-modulestep.ipynb).

Как обсуждалось ранее, разделение подготовки данных от обучения часто является одной из таких возможностей. Иногда подготовка данных сложна и требует много времени, что может привести к разбивать процесс на отдельные этапы конвейера. К другим возможностям относятся тестирование и анализ после обучения. 

## <a name="how-do-you-speed-pipeline-iteration"></a>Как ускорить итерацию конвейера? 

Ниже приведены распространенные методы быстрой итерации конвейеров. 

- Клонирование конвейера (создание копии) и быстрое выполнение конвейера
- Поддержание работающего вычислительного экземпляра, чтобы избежать времени запуска
- Настройка данных и действий по разрешению повторного использования позволит конвейеру пропустить перерасчет неизменяемых данных

Чтобы быстро выполнить итерацию, можно клонировать конвейер, создать конвейер и повторно запустить конвейер. Еще одна полезная методика — если вы не хотите занимать свою работу, вы не будете тратить затраты на вращение новых вычислений. Если вы настроите действие, разрешающее повторное использование результата выполнения, повторный запуск будет повторно использовать результаты, если это возможно (при отсутствии изменений в шагах).

## <a name="how-do-you-collaborate-using-ml-pipelines"></a>Как осуществляется совместная работа с помощью конвейеров машинного обучения? 

Отдельные конвейеры — это естественные линии, которые позволяют разделить усилия. Несколько разработчиков или даже несколько команд могут работать на разных этапах, пока согласованы данные и аргументы, передаваемые между действиями. 

Во время активной разработки вы можете получать `PipelineRun` и `StepRun` запускать результаты из рабочей области, использовать эти объекты для загрузки окончательных и промежуточных выходных данных, а также использовать эти артефакты для собственной модульной работы.

## <a name="use-pipelines-to-test-techniques-in-isolation"></a>Использование конвейеров для тестирования методов изоляции

Реальные решения машинного обучения обычно требуют значительной настройки каждого этапа. Необработанные данные часто должны подготавливаться каким – то образом: отфильтрованным, преобразованным и дополненным. Процессы обучения могут иметь несколько потенциальных архитектур и, в целях глубокого обучения, множество возможных вариантов размеров уровней и функций активации. Даже при использовании единообразной архитектуры Поиск параметров может создать значительный WINS-сервер.

В дополнение к таким средствам, как [аутомл](concept-automated-ml.md) и [автоматизированный поиск параметров](how-to-tune-hyperparameters.md), конвейеры могут быть важным инструментом для решений по тестированию A/B. При наличии нескольких вариантов действий конвейера можно легко создавать отдельные запуски, пытаясь использовать свои варианты: 

```python
data_preparation_variants = [data1, data2, data3]
data_augmentation_variants = [aug1, aug2]
architecture_variants = [train1, train2, train3]

# Cartesian product
all_variants = np.array(np.meshgrid(data_preparation_variants,data_augmentation_variants,architecture_variants)).T.reshape(-1,3)

pipelines = [Pipeline(workspace=ws, steps=variant.tolist(), description=str(variant)) for variant in all_variants]

```

