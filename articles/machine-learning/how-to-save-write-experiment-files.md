---
title: Где сохранить & написать файлы экспериментов
titleSuffix: Azure Machine Learning
description: Узнайте, где сохранить файлы ввода эксперимента и где писать выходные файлы, чтобы предотвратить ошибки ограничения хранилища и задержку эксперимента.
services: machine-learning
author: rastala
ms.author: roastala
manager: danielsc
ms.reviewer: nibaccam
ms.service: machine-learning
ms.subservice: core
ms.workload: data-services
ms.topic: conceptual
ms.date: 03/10/2020
ms.openlocfilehash: 12a38b08fd429280f34b4eb02d4b72187b622261
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79078439"
---
# <a name="where-to-save-and-write-files-for-azure-machine-learning-experiments"></a>Где сохранить и написать файлы для экспериментов по машинного обучения Azure
[!INCLUDE [applies-to-skus](../../includes/aml-applies-to-basic-enterprise-sku.md)]

В этой статье вы узнаете, где сохранить файлы ввода и где записывать выходные файлы из экспериментов, чтобы предотвратить ошибки с ограничением хранилища и задержку эксперимента.

При запуске обучаемых работает на [вычислительной цели,](how-to-set-up-training-targets.md)они изолированы от внешних сред. Целью этой конструкции является обеспечение воспроизводимости и переносимости эксперимента. Если вы запустите один и тот же сценарий дважды, на одной или другой вычислительной цели, вы получаете те же результаты. С помощью этой конструкции вы можете рассматривать вычислительные цели как ресурсы вычислений без состояния, каждый из которых не имеет сродства к заданиям, которые работают после их завершения.

## <a name="where-to-save-input-files"></a>Где сохранить входные файлы

Прежде чем начать эксперимент по вычислительной цели или локальной машине, необходимо убедиться, что необходимые файлы доступны для этой вычислительной цели, такие как файлы зависимостей и файлы данных, необходимые для запуска кода.

Azure Machine Learning запускает обучающие скрипты, копируя всю папку скрипта в контекст целевого вычисления, а затем делает снимок. Максимальный размер хранилища для моментальных снимков экспериментов составляет 300 МБ или 2000 файлов.

По этой причине мы рекомендуем:

* **Хранение файлов в [хранилище данных](https://docs.microsoft.com/python/api/azureml-core/azureml.data?view=azure-ml-py)Azure Machine Learning.** Это предотвращает проблемы задержки эксперимента и имеет преимущества доступа к данным из целевого показателя удаленного вычисления, что означает, что аутентификация и монтаж управляются Azure Machine Learning. Подробнее об определении хранилища данных в качестве исходного каталога и загрузке файлов в хранилище [данных доступа](how-to-access-data.md) в статье Access.

* **Если вам нужна только пара файлов данных и скриптов зависимостей и не сможете использовать хранилище данных,** поместите файлы в тот же каталог папок, что и сценарий обучения. Укажите эту папку как вашу `source_directory` прямо в скрипте обучения или в коде, который вызывает ваш сценарий обучения.

<a name="limits"></a>

### <a name="storage-limits-of-experiment-snapshots"></a>Ограничения хранения снимков эксперимента

Для экспериментов Azure Machine Learning автоматически делает снимок кода эксперимента на основе каталога, который вы предлагаете при настройке запуска. Это имеет общий лимит 300 МБ и/ или 2000 файлов. Если вы превысите этот лимит, вы увидите следующую ошибку:

```Python
While attempting to take snapshot of .
Your total snapshot size exceeds the limit of 300.0 MB
```

Чтобы устранить эту ошибку, храните файлы эксперимента в хранилище данных. Если вы не можете использовать хранилище данных, в таблице ниже предлагаются возможные альтернативные решения.

Описание&nbsp;эксперимента|Решение для ограничения на хранение
---|---
Менее 2000 файлов, & не могут использовать хранилище данных| Переопределить ограничение размера снимка с <br> `azureml._restclient.snapshots_client.SNAPSHOT_MAX_SIZE_BYTES = 'insert_desired_size'`<br> Это может занять несколько минут в зависимости от количества и размера файлов.
Необходимо использовать определенный каталог сценариев| Сделайте `.amlignore` файл, чтобы исключить файлы из снимка эксперимента, которые не являются частью исходного кода. Добавьте имена файлов `.amlignore` в файл и поместите их в тот же каталог, что и сценарий обучения. Файл `.amlignore` использует тот же [синтаксис и шаблоны,](https://git-scm.com/docs/gitignore) что и `.gitignore` файл.
Pipeline|Используйте различные субдиректора для каждого шага
Записные книжки Jupyter| Создайте `.amlignore` файл или переместите свой блокнот в новый, пустой, субдиректории и запустите код снова.

## <a name="where-to-write-files"></a>Где писать файлы

Из-за изоляции учебных экспериментов, изменения в файлах, которые происходят во время запусков, не обязательно сохраняются за пределами вашей среды. Если ваш скрипт изменяет локальные файлы для вычисления, изменения не сохраняются для следующего запуска эксперимента, и они не распространяются обратно в клиентскую машину автоматически. Таким образом, изменения, внесенные в ходе первого запуска эксперимента, не влияют и не должны влиять на изменения во втором.

При написании изменений мы рекомендуем записывать файлы в хранилище данных Azure Machine Learning. Просматривайте [данные доступа из ваших хранилинов данных.](how-to-access-data.md)

Если вам не нужен хранилище данных, `./outputs` напишите `./logs` файлы в папку и/или папку.

>[!Important]
> Две папки, *выходы* и *журналы,* получают специальное лечение от Azure Machine Learning. Во время обучения,`./outputs` когда`./logs` вы пишете файлы и папки, файлы будут автоматически загружаться в историю запуска, так что у вас есть доступ к ним, как только ваш запуск будет закончен.

* **Для вывода, например сообщений о состоянии или результатов подсчета очков,** напишите файлы в `./outputs` папку, чтобы они сохранялись как артефакты в истории выполнения. Помните о количестве и размере файлов, написанных в этой папке, так как задержка может возникнуть при загрузке содержимого для выполнения истории. Если задержка вызывает озабоченность, рекомендуется записывать файлы в хранилище данных.

* **Чтобы сохранить письменный файл в виде журналов в истории выполнения,** напишите файлы в `./logs` папку. Журналы загружаются в режиме реального времени, поэтому этот метод подходит для потоковой передачи живых обновлений с удаленного запуска.

## <a name="next-steps"></a>Дальнейшие действия

* Подробнее о [доступе к данным из ваших хранилики данных.](how-to-access-data.md)

* Узнайте больше о [том, как настроить учебные цели.](how-to-set-up-training-targets.md)
