---
title: Архитектура и основные понятия
titleSuffix: Azure Machine Learning
description: Узнайте об архитектуре, терминах, понятиях и рабочих процессах в Машинном обучении Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: larryfr
author: Blackmist
ms.date: 05/13/2020
ms.custom: seoapril2019, seodec18
ms.openlocfilehash: 8cfa7a7b251f2aa74230d8883a0335582387aa06
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85602522"
---
# <a name="how-azure-machine-learning-works-architecture-and-concepts"></a>Машинное обучение Azure: архитектура и основные понятия

Сведения об архитектуре, понятиях и рабочих процессах в Машинном обучении Azure. Основные компоненты службы и общий рабочий процесс при использовании службы показаны на следующей схеме:

![Архитектура и рабочий процесс Машинного обучения Azure](./media/concept-azure-machine-learning-architecture/workflow.png)

## <a name="workflow"></a>Рабочий процесс

Рабочий процесс для модели машинного обучения обычно представляет такую последовательность:

1. **Обучение**
    + Создайте скрипты обучения для машинного обучения на **Python**, **R** или в графическом конструкторе.
    + Создайте и настройте **целевой объект вычислений**.
    + **Отправьте скрипты** в настроенный целевой объект вычислений для запуска в этой среде. Во время обучения скрипты могут считывать данные из **хранилищ данных** и записывать в них результаты. Журналы и результаты, полученные в процессе обучения, сохраняются как **выполнения** в **рабочей области** и группируются по **экспериментам**.

1. **Пакет.** Зарегистрируйте модель в **реестре моделей**, когда будет найдено подходящее выполнение.

1. **Проверка.** **Отправьте запрос в эксперимент** для получения сохраненных метрик текущего и прошлых выполнений. Если метрики не указывают желаемый результат, необходимо вернуться обратно к шагу 1 и выполнить итерацию сценариев.

1. **Развертывание.** Разработайте скрипт оценки на основе модели и **разверните эту модель** в качестве **веб-службы** в Azure или на **устройстве IOT Edge**.

1. **Мониторинг.** Выполните мониторинг **смещения данных** между наборами данных для обучения и данными вывода развернутой модели. При необходимости вернитесь к шагу 1, чтобы заново обучить модель по новым обучающим данным.

## <a name="tools-for-azure-machine-learning"></a>Средства для Машинного обучения Azure

Для Машинного обучения Azure можно применять следующие средства:

+  [Пакет SDK Машинного обучения для Python](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py) позволяет взаимодействовать с этой службой в любой среде Python.
+ Взаимодействуйте со службой в любой среде R с помощью [пакета SDK машинное обучение Azure для R](https://azure.github.io/azureml-sdk-for-r/reference/index.html) (Предварительная версия).
+ [CLI Машинного обучения Azure](https://docs.microsoft.com/azure/machine-learning/reference-azure-machine-learning-cli) поможет автоматизировать процессы машинного обучения.
+ [Конструктор Машинного обучения Azure (предварительная версия)](concept-designer.md) позволяет выполнять шаги рабочего процесса без необходимости писать код. ( [Корпоративная рабочая область](concept-workspace.md#upgrade)) требуется для использования конструктора.)
+ [Акселератор решений для многих моделей](https://aka.ms/many-models) (предварительная версия), основанный на службе Машинного обучения Azure, позволяет обучать, использовать и обслуживать сотни и даже тысячи моделей машинного обучения.

> [!NOTE]
> В этой статье определяются термины и понятия, используемые в Машинном обучении Azure. Понятия, связанные с платформой Azure, здесь не рассматриваются. Дополнительные сведения о терминологии платформы Azure см. в статье [Словарь терминов Microsoft Azure: словарь терминов, связанных с облаком на платформе Azure](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology).

## <a name="glossary"></a>Глоссарий

* [Действие](#activities)
* [Рабочая область](#workspaces)
    * [Эксперименты](#experiments)
        * [Выполнить](#runs) 
            * [Конфигурация запуска](#run-configurations)
            * [Моментальный снимок](#snapshots)
            * [Отслеживание Git](#github-tracking-and-integration)
            * [Logging](#logging)
    * [Конвейеры машинного обучения](#ml-pipelines)
    * [Модели](#models)
        * [Среды](#environments)
        * [Скрипты обучения](#training-scripts)
        * [Оценщики](#estimators)
    * [Конечные точки](#endpoints)
        * [Веб-служба](#web-service-endpoint)
        * [Модули Интернета вещей](#iot-module-endpoints)
    * [Наборы данных и хранилища данных](#datasets-and-datastores)
    * [Целевые объекты вычислений](#compute-targets)

### <a name="activities"></a>Действия

Действие представляет собой длительную операцию. Следующие операции являются примерами действий:

* Создание или удаление целевого объекта вычислений
* Запуск скрипта на целевом объекте вычисления

Действия могут предоставлять уведомления через пакет SDK или веб-интерфейс, чтобы можно было легко отслеживать ход выполнения этих операций.

### <a name="workspaces"></a>Рабочие области

[Рабочая область](concept-workspace.md) — это ресурс верхнего уровня для Машинного обучения Azure. Она предоставляет централизованное расположение для работы со всеми артефактами, которые создаются при использовании Машинного обучения Azure. Вы можете использовать рабочую область совместно с другими пользователями. Подробное описание рабочих областей см. в статье [Что такое рабочая область Машинного обучения Azure?](concept-workspace.md)

### <a name="experiments"></a>Эксперименты

Эксперимент представляет собой совокупность нескольких запусков указанного сценария. Он всегда принадлежит рабочей области. При отправке запуска укажите имя эксперимента. Сведения о запуске хранятся в этом эксперименте. Если при отправке запуска вы укажете несуществующее имя эксперимента, автоматически создается новый эксперимент с новым указанным именем.

Пример использования эксперимента приведен в статье [ Руководство по обучению модели Машинного обучения](tutorial-1st-experiment-sdk-train.md).

### <a name="runs"></a>Запуски

Выполнение — это однократный запуск скрипта обучения. Обычно эксперимент содержит большое число выполнений.

Машинное обучение Azure записывает все выполнения и сохраняет в эксперименте следующую информацию:

* метаданные о запуске (метка времени, длительность и т. д.);
* метрики, записанные в журнал с помощью сценария;
* выходные файлы, автоматически собранные экспериментом или явным образом переданные вами;
* моментальный снимок каталога, содержащего скрипты, до запуска;

Вы создаете запуск при отправке сценария для обучения модели. Запуск может иметь ноль или более дочерних запусков. Например, запуск верхнего уровня может иметь два дочерних запуска, каждый из которых может иметь свои дочерние запуски.

### <a name="run-configurations"></a>Конфигурации выполнения

Конфигурация запуска — это набор инструкций, который определяет, как запустить сценарий в указанном целевом объекте вычислений. Конфигурация включает широкий набор определений поведения, например, следует ли использовать имеющуюся среду Python или среду Conda, созданную из спецификации.

Конфигурацию запуска можно сохранять в файл внутри каталога, содержащего сценарий обучения, или создать как объект в памяти и использовать для отправки запуска.

Пример конфигураций запуска см. в статье [Настройка целевых объектов вычислений для обучения моделей](how-to-set-up-training-targets.md).

### <a name="snapshots"></a>Моментальные снимки

При отправке запуска Машинное обучение Azure сжимает каталог, содержащий сценарий, как ZIP-файл и отправляет его в целевой объект вычислений. ZIP-файл затем извлекается, и сценарий выполняется в нем. Машинное обучение Azure также сохраняет ZIP-файл в качестве моментального снимка как часть записи о выполнении. Любой пользователь с доступом к рабочей области может просмотреть запись о выполнении и загрузить моментальный снимок.

> [!NOTE]
> [!INCLUDE [amlinclude-info](../../includes/machine-learning-amlignore-gitignore.md)]

### <a name="github-tracking-and-integration"></a>Отслеживание и интеграция GitHub

При выполнении запуска обучения, в котором исходный каталог является локальным репозиторием Git, сведения о репозитории хранятся в журнале выполнения. Это работает для выполнений, отправленных с помощью оценщика, конвейера Машинного обучения или скрипта. А также для выполнений, отправленных с помощью пакетов SDK или CLI Машинного обучения.

Дополнительные сведения см. в статье [Интеграция с Git для Машинного обучения Azure](concept-train-model-git-integration.md).

### <a name="logging"></a>Logging

При разработке решения используйте пакет SDK Python для Машинного обучения Azure в сценарии Python для записи произвольных метрик. После запуска запросите метрики, чтобы определить, удалось ли в ходе запуска создать модель, которую вы хотите развернуть.

### <a name="ml-pipelines"></a>Конвейеры машинного обучения

Используйте конвейеры машинного обучения для создания и управления рабочими процессами, которые совмещают этапы машинного обучения. Например, конвейер может включать этапы подготовки данных, обучения и развертывания модели, а также вывода и оценки. Каждый этап может охватывать несколько шагов, каждый из которых может автоматически выполняться в различных целевых объектах вычисления. 

Шаги конвейера можно использовать повторно или выполнять без повтора предыдущих шагов, если выходные данные таких шагов не должны изменяться. Например, вы можете повторно обучить модель без дорогостоящих этапов подготовки данных, если сами данные не изменялись. Кроме того, конвейеры позволяют специалистам по обработке и анализу данных параллельно работать над разными частями рабочего процесса машинного обучения.

Дополнительные сведения о конвейерах машинного обучения этой службы см. в статье [Создание конвейеров машинного обучения с помощью Службы машинного обучения Azure](concept-ml-pipelines.md).

### <a name="models"></a>Модели

В простейшем смысле модель представляет собой фрагмент кода, который принимает входные данные и создает выходные данные. Создание модели машинного обучения включает в себя выбор алгоритма, предоставление ему данных и настройку гиперпараметров. Обучение — это итеративный процесс, который создает обученную модель, включающую в себя все, чему модель научилась в процессе обучения.

Модель создается путем выполнения в машинном обучении Azure. Вы можете также использовать модель, обученную вне Машинного обучения Azure. Вы можете зарегистрировать модель в рабочей области Машинного обучения Azure.

Машинное обучение Azure не зависит от платформы. Для создания модели можно использовать любую популярную платформу машинного обучения, например Scikit-learn, XGBoost, PyTorch, TensorFlow или Chainer.

Пример обучения модели с помощью Scikit-learn или оценщика см. в статье [ Руководство по обучению моделей классификации изображений с использованием данных MNIST и Scikit-learn](tutorial-train-models-with-aml.md).

В **реестре моделей** хранятся сведения обо всех моделях в рабочей области Машинного обучения Azure.

Модели идентифицируются по имени и версии. При регистрации модели с уже имеющимся именем реестр предполагает, что это новая версия. Номер версии увеличивается, и новая модель регистрируется под тем же именем.

При регистрации модели вы можете указать дополнительные теги метаданных, а затем использовать эти теги для поиска моделей.

> [!TIP]
> Зарегистрированная модель — это логический контейнер для одного или нескольких файлов, составляющих эту модель. Например, если ваша модель хранится в нескольких файлах, их можно зарегистрировать как единую модель рабочей области Машинного обучения Azure. После регистрации вы сможете скачать или развернуть зарегистрированную модель, чтобы получить все зарегистрированные в ней файлы.

Удалить зарегистрированную модель нельзя, если она используется в любом активном развертывании.

Пример регистрации модели см. в статье [Руководство по обучению модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).

### <a name="environments"></a>Среды

Среды машинного обучения Azure позволяют указать конфигурацию (Docker, Python, Spark и т. д.) для создания воспроизводимой среды подготовки данных, обучения и обслуживания модели. Это управляемые сущности с возможностью контроля версий для рабочей области Машинного обучения Azure, которые позволяют создать воспроизводимые, переносимые и поддерживающие аудит рабочие процессы машинного обучения в разных целевых объектах вычислений.

Объект среды можно использовать в локальных вычислительных средах для разработки скрипта обучения, повторного использования той же среды в Машинном обучении Azure для обучения модели в большом масштабе и даже развертывания модели в том же экземпляре среды. 

Узнайте, [как создать повторно используемую среду Машинного обучения](how-to-use-environments.md) и применить ее для обучения и вывода.

### <a name="training-scripts"></a>Сценарии обучения

Чтобы обучить модель, необходимо указать каталог, содержащий скрипт обучения и связанные файлы. Вы можете также указать имя эксперимента, который используется для хранения сведений, собранных во время обучения. Во время обучения весь каталог копируется в среду обучения (целевой объект вычислений), и запускается сценарий, указанный в конфигурации запуска. Моментальный снимок каталога также хранится в эксперименте в рабочей области.

Пример см. в разделе [Учебник. Руководство по обучению моделей классификации изображений с использованием данных MNIST и Scikit-learn](tutorial-train-models-with-aml.md).

### <a name="estimators"></a>Оценщики

Чтобы упростить обучение моделей на популярных платформах, класс оценщика позволяет создавать простые конфигурации запуска. Вы можете создать и использовать универсальный [оценщик](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.estimator?view=azure-ml-py) для отправки сценариев обучения, использующих любую выбранную платформу обучения (например, scikit-learn).

Для заданий PyTorch, TensorFlow и Chainer в Машинном обучении Azure также предоставляются оценщики ([PyTorch](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.pytorch?view=azure-ml-py), [TensorFlow](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.tensorflow?view=azure-ml-py) и [Chainer](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.chainer?view=azure-ml-py)), которые упрощают использование этих платформ.

Дополнительные сведения см. в следующих статьях:

* [Обучение моделей машинного обучения с использованием оценщиков](how-to-train-ml-models.md)
* [Обучение моделей глубокого обучения PyTorch в большом масштабе с помощью Машинного обучения Azure](how-to-train-pytorch.md)
* [Обучение и регистрация моделей TensorFlow в большом масштабе с помощью Машинного обучения Azure](how-to-train-tensorflow.md)
* [Обучение и регистрация моделей Chainer в большом масштабе с помощью Машинного обучения Azure](how-to-train-ml-models.md)

### <a name="endpoints"></a>Конечные точки

Конечная точка — это экземпляр модели в формате веб-службы, которая может размещаться в облаке или модуле Интернета вещей для развертываний интегрированных устройств.

#### <a name="web-service-endpoint"></a>Конечная точка веб-службы

При развертывании модели в формате веб-службы конечную точку можно разместить в Экземплярах контейнеров Azure, Службе Azure Kubernetes или ППВМ. В службу входят модель, скрипт и связанные файлы. Все это помещается в базовый образ контейнера, который содержит среду выполнения для этой модели. Образ включает конечную точку HTTP с балансировкой нагрузки, которая получает запросы на оценку, отправляемые в веб-службу.

Azure помогает отслеживать веб-службу путем сбора данных телеметрии Application Insights или данных телеметрии модели, если вы решили включить эту возможность. Данные телеметрии доступны только вам и хранятся в Application Insights и экземплярах учетной записи хранения.

Если вы включили автоматическое масштабирование, Azure будет автоматически масштабировать ваше развертывание.

Пример развертывания модели в формате веб-службы см. в статье [Руководство по развертыванию модели классификации изображений в Экземплярах контейнеров Azure](tutorial-deploy-models-with-aml.md).

#### <a name="iot-module-endpoints"></a>Конечные точки модуля Интернета вещей

Развернутая конечная точка модуля Интернета вещей — это контейнер Docker, который содержит модель, соответствующий скрипт или приложение и все дополнительные зависимости. Эти модули развертываются с помощью Azure IoT Edge на пограничных устройствах.

Если вы включили функцию мониторинга, Azure собирает данные телеметрии из модели в модуле Azure IoT Edge. Данные телеметрии доступны только вам и хранятся в вашем экземпляре учетной записи хранения.

Azure IoT Edge гарантирует, что модуль запущен и отслеживает устройство, на котором он размещен.


### <a name="compute-instance"></a><a name="compute-instance"></a>Вычислительная операция

**Вычислительный экземпляр Машинного обучения Azure** (ранее — виртуальная машина Notebook) — это полностью управляемая облачная рабочая станция, которая включает несколько установленных средств и сред для машинного обучения. Вычислительные экземпляры можно использовать в качестве целевого объекта вычислений для заданий обучения и вывода результатов. Для масштабных задач в качестве целевого объекта вычислений лучше подходят [вычислительные кластеры Машинного обучения Azure](how-to-set-up-training-targets.md#amlcompute).

См. сведения о [вычислительных экземплярах](concept-compute-instance.md).

### <a name="datasets-and-datastores"></a>Наборы данных и хранилища данных

**Наборы данных Машинного обучения Azure** (предварительная версия) упрощают доступ к данным и работу с ними. Наборы данных позволяют управлять данными в разных сценариях, например для обучения модели и создания конвейера. С помощью пакета средств разработки Машинного обучение Azure вы можете обращаться к базовому хранилищу, исследовать данные в нем и управлять жизненным циклом разных определений наборов данных.

Наборы данных предоставляют методы для работы с данными во многих популярных форматах, например `from_delimited_files()` или `to_pandas_dataframe()`.

Дополнительные сведения см. в статье [Создание наборов данных Машинного обучения Azure](how-to-create-register-datasets.md).  Дополнительные примеры использования наборов данных см. в разделе с [примерами записных книжек](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/work-with-data/datasets-tutorial).

**Хранилище данных** — это абстракция хранилища поверх учетной записи хранения Azure. Хранилище данных может использовать контейнер больших двоичных объектов Azure или файловый ресурс Azure в качестве внутреннего хранилища. Каждая рабочая область содержит хранилище данных по умолчанию. Вы можете зарегистрировать дополнительные хранилища данных. Используйте API пакета SDK для Python или интерфейс командной строки Машинного обучения Azure для хранения и извлечения файлов из хранилища данных.

### <a name="compute-targets"></a>Целевые объекты вычислений

[Целевой объект вычисления](concept-compute-target.md) позволяет определить вычислительный ресурс для выполнения скрипта обучения или размещения развертывания службы. Это может быть локальный компьютер или облачный ресурс вычислений.

Дополнительные сведения о доступных целевых объектах вычислений для обучения и развертывания см. [здесь](concept-compute-target.md).

### <a name="next-steps"></a>Дальнейшие действия

Чтобы быстро начать работу с Машинным обучением Azure, изучите следующие статьи:

* [Что такое Машинное обучение Azure?](overview-what-is-azure-ml.md)
* [Создание рабочей области машинного обучения Azure](how-to-manage-workspace.md)
* [Руководство (часть 1). Обучение модели](tutorial-train-models-with-aml.md)
