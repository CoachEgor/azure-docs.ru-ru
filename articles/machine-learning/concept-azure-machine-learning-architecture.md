---
title: Архитектура & ключевые концепции
titleSuffix: Azure Machine Learning
description: Узнайте об архитектуре, терминах, концепциях и рабочих процессах, которые составляют машинное обучение Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: larryfr
author: Blackmist
ms.date: 03/17/2020
ms.custom: seoapril2019, seodec18
ms.openlocfilehash: 9f1d23f11cf73680a8861c9f1ac6cbd40ad497a4
ms.sourcegitcommit: 8dc84e8b04390f39a3c11e9b0eaf3264861fcafc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2020
ms.locfileid: "81257340"
---
# <a name="how-azure-machine-learning-works-architecture-and-concepts"></a>Как работает машинное обучение Azure: Архитектура и концепции

Узнайте об архитектуре, концепциях и рабочем процессе для машинного обучения Azure. Основные компоненты службы и общий рабочий процесс при использовании службы показаны на следующей схеме:

![Архитектура и рабочий процесс Машинного обучения Azure](./media/concept-azure-machine-learning-architecture/workflow.png)

## <a name="workflow"></a>Рабочий процесс

Рабочий процесс модели машинного обучения обычно следует этой последовательности:

1. **Обучение**
    + Разработка сценариев обучения машинного обучения в **Python**, **R**или с визуальным дизайнером.
    + Создайте и настройте **целевой объект вычислений**.
    + **Отправьте скрипты** в настроенную цель вычислений для выполнения в этой среде. Во время обучения скрипты могут читать или писать в **хранилища данных.** Бревна и выход, производимые во время обучения, сохраняются в **рабочей** **области** и сгруппированы под **эксперименты.**

1. **Пакет** - После того, как найден удовлетворительный запуск, зарегистрируйте сохраняемую модель в **реестре моделей.**

1. **Проверка** - **запроса на** зарегистрированные метрики из текущих и прошлых запусков. Если метрики не указывают желаемый результат, необходимо вернуться обратно к шагу 1 и выполнить итерацию сценариев.

1. **Развертывание** - Разработка скорингового скрипта, использующем модель, и **развертывайте модель** в качестве **веб-сервиса** в Azure или на **устройстве IoT Edge.**

1. **Monitor** - Monitor for **data drift** between the training dataset and inference data of a deployed model. При необходимости вернитесь к шагу 1, чтобы переучить модель с новыми обучаемыми данными.

## <a name="tools-for-azure-machine-learning"></a>Инструменты для машинного обучения Azure

Используйте эти инструменты для машинного обучения Azure:

+  Взаимодействуйте с службой в любой среде Python с [Помощью SDK Для Python.](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py)
+ Взаимодействуйте с службой в любой среде R с [SDK Для машинного обучения Azure для R.](https://azure.github.io/azureml-sdk-for-r/reference/index.html)
+ Автоматизируйте свои действия по машинном обучению с помощью [CLI машинного обучения Azure.](https://docs.microsoft.com/azure/machine-learning/reference-azure-machine-learning-cli)
+ Используйте [конструктор машинного обучения Azure (предварительный просмотр)](concept-designer.md) для выполнения шагов рабочего процесса без написания кода.


> [!NOTE]
> Хотя в этой статье определены термины и понятия, используемые ВАЗу в Machine Learning, в ней не определены термины и понятия для платформы Azure. Дополнительные сведения о терминологии платформы Azure см. в статье [Словарь терминов Microsoft Azure: словарь терминов, связанных с облаком на платформе Azure](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology).

## <a name="glossary"></a>Глоссарий

* [Действие](#activities)
* [Рабочая область](#workspaces)
    * [Эксперименты](#experiments)
        * [Запустить](#runs) 
            * [Конфигурация запуска](#run-configurations)
            * [Снимок](#snapshots)
            * [Отслеживание Git](#github-tracking-and-integration)
            * [Logging](#logging)
    * [Конвейеры Машинного обучения](#ml-pipelines)
    * [Модели](#models)
        * [Среды](#environments)
        * [Скрипт обучения](#training-scripts)
        * [Оценщики](#estimators)
    * [Конечные точки](#endpoints)
        * [Веб-служба](#web-service-endpoint)
        * [IoT-модули](#iot-module-endpoints)
    * [Набор данных & хранилища данных](#datasets-and-datastores)
    * [Вычислить цели](#compute-targets)

### <a name="activities"></a>Действия

Действие представляет собой длительную операцию. Следующие операции являются примерами действий:

* Создание или удаление целевого объекта вычислений
* Запуск скрипта на целевом объекте вычисления

Действия могут предоставлять уведомления через пакет SDK или веб-интерфейс, чтобы можно было легко отслеживать ход выполнения этих операций.

### <a name="workspaces"></a>Рабочие области

[Рабочее пространство](concept-workspace.md) является ресурсом высшего уровня для машинного обучения Azure. Он предоставляет централизованное место для работы со всеми артефактами, которые вы создаете при использовании Машинного обучения Azure. Вы можете поделиться рабочим пространством с другими пользователями. Подробное описание рабочих областей [см.](concept-workspace.md)

### <a name="experiments"></a>Эксперименты

Эксперимент представляет собой совокупность нескольких запусков указанного сценария. Он всегда принадлежит рабочей области. При отправке запуска укажите имя эксперимента. Сведения о запуске хранятся в этом эксперименте. Если при отправке запуска вы укажете несуществующее имя эксперимента, автоматически создается новый эксперимент с новым указанным именем.

Пример использования эксперимента см. [Tutorial: Train your first model](tutorial-1st-experiment-sdk-train.md)

### <a name="runs"></a>Запуски

Запуск — это одно выполнение сценария обучения. Эксперимент, как правило, содержит несколько запусков.

Azure Machine Learning записывает все запуски и хранит следующую информацию в эксперименте:

* метаданные о запуске (метка времени, длительность и т. д.);
* метрики, записанные в журнал с помощью сценария;
* выходные файлы, автоматически собранные экспериментом или явным образом переданные вами;
* моментальный снимок каталога, содержащего скрипты, до запуска;

Вы создаете запуск при отправке сценария для обучения модели. Запуск может иметь ноль или более дочерних запусков. Например, запуск верхнего уровня может иметь два дочерних запуска, каждый из которых может иметь свои дочерние запуски.

### <a name="run-configurations"></a>Выполнить конфигурации

Конфигурация запуска — это набор инструкций, который определяет, как запустить сценарий в указанном целевом объекте вычислений. Конфигурация включает широкий набор определений поведения, например, следует ли использовать имеющуюся среду Python или среду Conda, созданную из спецификации.

Конфигурацию запуска можно сохранять в файл внутри каталога, содержащего сценарий обучения, или создать как объект в памяти и использовать для отправки запуска.

Пример конфигураций запуска см. в статье [Настройка целевых объектов вычислений для обучения моделей](how-to-set-up-training-targets.md).

### <a name="snapshots"></a>Моментальные снимки

При отправке запуска Машинное обучение Azure сжимает каталог, содержащий сценарий, как ZIP-файл и отправляет его в целевой объект вычислений. ZIP-файл затем извлекается, и сценарий выполняется в нем. Машинное обучение Azure также сохраняет ZIP-файл в качестве моментального снимка как часть записи о выполнении. Любой пользователь с доступом к рабочей области может просмотреть запись о выполнении и загрузить моментальный снимок.

> [!NOTE]
> Чтобы предотвратить ненужное влини файлов в моментальный снимок, сделайте файл игнорирования (.gitignore или .amlignore). Поместите этот файл в каталог Snapshot и добавьте имена файлов, чтобы игнорировать его. В файле .amlignore используется тот же [синтаксис и шаблоны, что и файл .gitignore.](https://git-scm.com/docs/gitignore) Если оба файла существуют, приоритет имеет файл .amlignore.

### <a name="github-tracking-and-integration"></a>Отслеживание и интеграция GitHub

При запуске обучаемого запуска, в котором исходный каталог является локальным репозиторием Git, информация о репозитории хранится в истории выполнения. Это работает с трассами, представленными с помощью оценщика, конвейера ML или запуска скрипта. Он также работает для работает, представленных из SDK или машинного обучения CLI.

Для получения дополнительной информации см. [интеграция Git для машинного обучения Azure.](concept-train-model-git-integration.md)

### <a name="logging"></a>Logging

При разработке решения используйте пакет SDK Python для Машинного обучения Azure в сценарии Python для записи произвольных метрик. После запуска запросите метрики, чтобы определить, удалось ли в ходе запуска создать модель, которую вы хотите развернуть.

### <a name="ml-pipelines"></a>Конвейеры машинного обучения

Используйте конвейеры машинного обучения для создания и управления рабочими процессами, которые совмещают этапы машинного обучения. Например, конвейер может включать подготовку данных, обучение модели, развертывание моделей и этапы выводов/оценки. Каждый этап может охватывать несколько шагов, каждый из которых может автоматически выполняться в различных целевых объектах вычисления. 

Шаги трубопровода можно многоразового и могут быть запущены без повторного выполнения предыдущих шагов, если выход этих шагов не изменился. Например, можно переустроить модель без перезапуска дорогостоящих шагов по подготовке данных, если данные не изменились. Трубопроводы также позволяют ученым по обработке данных сотрудничать во время работы над отдельными областями рабочего процесса машинного обучения.

Дополнительные сведения о конвейерах машинного обучения этой службы см. в статье [Создание конвейеров машинного обучения с помощью Службы машинного обучения Azure](concept-ml-pipelines.md).

### <a name="models"></a>Модели

В простейшем смысле модель представляет собой фрагмент кода, который принимает входные данные и создает выходные данные. Создание модели машинного обучения включает в себя выбор алгоритма, предоставление ему данных и настройку гиперпараметров. Обучение — это итеративный процесс, который создает обученную модель, включающую в себя все, чему модель научилась в процессе обучения.

Модель создается путем выполнения в машинном обучении Azure. Вы можете также использовать модель, обученную вне Машинного обучения Azure. Вы можете зарегистрировать модель в рабочем пространстве Azure Machine Learning.

Машинное обучение Azure не зависит от платформы. При создании модели можно использовать любые популярные рамки машинного обучения, такие как Scikit-learn, XGBoost, PyTorch, TensorFlow и Chainer.

Пример обучения модели с использованием Scikit-обучения [Tutorial: Train an image classification model with Azure Machine Learning](tutorial-train-models-with-aml.md)и оценщика см.

Реестр **моделей** отслеживает все модели в рабочем пространстве Azure Machine Learning.

Модели идентифицируются по имени и версии. При регистрации модели с уже имеющимся именем реестр предполагает, что это новая версия. Номер версии увеличивается, и новая модель регистрируется под тем же именем.

При регистрации модели вы можете указать дополнительные теги метаданных, а затем использовать эти теги для поиска моделей.

> [!TIP]
> Зарегистрированная модель является логическим контейнером для одного или нескольких файлов, вкоторыеруюных в вашу модель. Например, если у вас есть модель, которая хранится в нескольких файлах, вы можете зарегистрировать их в качестве единой модели в рабочем пространстве Azure Machine Learning. После регистрации можно загрузить или развернуть зарегистрированную модель и получить все файлы, которые были зарегистрированы.

Нельзя удалить зарегистрированную модель, используемую активным развертыванием.

Пример регистрации модели см. в статье [Руководство по обучению модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).

### <a name="environments"></a>Среды

Среды Azure ML используются для определения конфигурации (Docker / Python / Spark / и т.д.), используемой для создания воспроизводимой среды для подготовки данных, обучения модели и обслуживания моделей. Они управляются и представляют сущности в рабочем пространстве Azure Machine Learning, которые позволяют воспроизводимые, проверяемые и портативные рабочие процессы машинного обучения в различных вычислительных целях.

Вы можете использовать объект среды в локальном вычислении для разработки сценария обучения, повторно использовать ту же среду в Azure Machine Learning Compute для обучения модели в масштабе и даже развернуть модель в той же среде. 

[Узнайте, как создать и управлять многоразовой средой ML](how-to-use-environments.md) для обучения и выводов.

### <a name="training-scripts"></a>Сценарии обучения

Чтобы обучить модель, необходимо указать каталог, содержащий скрипт обучения и связанные файлы. Вы можете также указать имя эксперимента, который используется для хранения сведений, собранных во время обучения. Во время обучения весь каталог копируется в среду обучения (целевой объект вычислений), и запускается сценарий, указанный в конфигурации запуска. Моментальный снимок каталога также хранится в эксперименте в рабочей области.

Например, [см. Учебник: Тренируйте модель классификации изображений с помощью Azure Machine Learning.](tutorial-train-models-with-aml.md)

### <a name="estimators"></a>Оценщики

Чтобы облегчить обучение модели с популярными рамками, класс оценщика позволяет легко создавать конфигурации выполнения. Вы можете создать и использовать общий [оценщик](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.estimator?view=azure-ml-py) для отправки обучающих скриптов, которые используют любую платформу обучения, которую вы выберете (например, scikit-learn).

Для задач PyTorch, TensorFlow и Chainer Azure Machine Learning также предоставляет соответствующие оценки [PyTorch,](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.pytorch?view=azure-ml-py) [TensorFlow](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.tensorflow?view=azure-ml-py)и [Chainer](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.chainer?view=azure-ml-py) для упрощения использования этих инфраструктур.

Дополнительные сведения см. в следующих статьях:

* [Поезд ML модели с оценщиками](how-to-train-ml-models.md).
* [Поезд Pytorch глубокого обучения модели в масштабе с Azure машинного обучения](how-to-train-pytorch.md).
* [Обучить и зарегистрировать модели TensorFlow в масштабе с Azure Machine Learning](how-to-train-tensorflow.md).
* [Обучить и зарегистрировать модели Chainer в масштабе с Azure Machine Learning](how-to-train-ml-models.md).

### <a name="endpoints"></a>Конечные точки

Конечная точка — это мгновенное преобразование модели либо в веб-сервис, который может быть размещен в облаке, либо модуль IoT для комплексного развертывания устройств.

#### <a name="web-service-endpoint"></a>Конечная точка веб-сервиса

При развертывании модели в виде веб-службы конечная точка может быть развернута в экземплярах контейнеров Azure, Azure Kubernetes или FPGA. Службу создают сяврование из модели, скрипта и связанных файлов. Они помещаются в базовое изображение контейнера, содержащее среду выполнения модели. Образ включает конечную точку HTTP с балансировкой нагрузки, которая получает запросы на оценку, отправляемые в веб-службу.

Azure помогает отслеживать веб-сервис, собирая телеметрию application Insights или модельную телеметрию, если вы решили включить эту функцию. Данные телеметрии доступны только вам и хранятся в Application Insights и экземплярах учетной записи хранения.

Если вы включили автоматическое масштабирование, Azure будет автоматически масштабировать ваше развертывание.

Например, развертывание модели в качестве веб-службы [см. Развертывание модели классификации изображений в экземплярах контейнеров Azure.](tutorial-deploy-models-with-aml.md)

#### <a name="iot-module-endpoints"></a>Конечные точки модуля IoT

Развернутая конечная точка модуля IoT — это контейнер Docker, который включает в себя модель и связанный с ним скрипт или приложение и любые дополнительные зависимости. Развертываете эти модули с помощью Azure IoT Edge на устройствах края.

Если вы включили функцию мониторинга, Azure собирает данные телеметрии из модели в модуле Azure IoT Edge. Данные телеметрии доступны только вам и хранятся в вашем экземпляре учетной записи хранения.

Azure IoT Edge гарантирует, что модуль запущен и отслеживает устройство, на котором он размещен.


### <a name="compute-instance-preview"></a><a name="compute-instance"></a>Вычислить экземпляр (предварительный просмотр)

Экземпляр **вычисляет машинного обучения Azure** (ранее notebook VM) — это полностью управляемая облачная рабочая станция, которая включает в себя несколько инструментов и сред, установленных для машинного обучения. Вычислить экземпляры можно использовать в качестве вычислительной цели для обучения и выводов заданий. Для больших задач [вычислительные кластеры Azure Machine Learning](how-to-set-up-training-targets.md#amlcompute) с возможностями масштабирования нескольких узлов — это лучший выбор целевых задач.

Подробнее о [вычисляемых экземплярах.](concept-compute-instance.md)

### <a name="datasets-and-datastores"></a>Наборы данных и хранилища данных

**Наборы данных машинного обучения Azure** (предварительный просмотр) упрощают доступ к данным и работу с ними. Наборы данных управляют данными в различных сценариях, таких как обучение модели и создание конвейера. Используя SDK для машинного обучения Azure, вы можете получить доступ к базовому хранилищу, изучить данные и управлять жизненным циклом различных определений наборов данных.

Наборы данных предоставляют методы работы с данными в популярных форматах, таких как использование `from_delimited_files()` или `to_pandas_dataframe()`.

Для получения дополнительной информации [см.](how-to-create-register-datasets.md)  Для получения дополнительных примеров с использованием [наборов](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/work-with-data/datasets)данных см.

**Хранилище данных** — это абстракция хранения через учетную запись хранения Azure. Хранилище данных может использовать контейнер больших двоичных объектов Azure или файловый ресурс Azure в качестве внутреннего хранилища. Каждая рабочая область содержит хранилище данных по умолчанию. Вы можете зарегистрировать дополнительные хранилища данных. Используйте API пакета SDK для Python или интерфейс командной строки Машинного обучения Azure для хранения и извлечения файлов из хранилища данных.

### <a name="compute-targets"></a>Целевые объекты вычислений

Цель [вычислений](concept-compute-target.md) позволяет указать вычислительный ресурс, в котором вы запустите сценарий обучения или размещаете развертывание службы. Это место может быть локальной машиной или облачным вычислительным ресурсом.

Узнайте больше о [доступных вычислительных целях для обучения и развертывания.](concept-compute-target.md)

### <a name="next-steps"></a>Дальнейшие действия

Чтобы начать работу с Azure Machine Learning, см.:

* [Что такое служба "Машинное обучение Microsoft Azure"?](overview-what-is-azure-ml.md)
* [Создание рабочего пространства для машинНого обучения Azure](how-to-manage-workspace.md)
* [Учебник (часть 1): Обучить модель](tutorial-train-models-with-aml.md)
