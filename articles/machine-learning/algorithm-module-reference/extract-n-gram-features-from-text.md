---
title: Извлекайте N-Gram Особенности из ссылки на текстовый модуль
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль Extract N-Gram в машинном обучении Azure для featurize текстовых данных.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 09/01/2019
ms.openlocfilehash: efe09c1d516b37c23b024e07ae387772fa7e5992
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79477618"
---
# <a name="extract-n-gram-features-from-text-module-reference"></a>Извлекайте N-Gram Особенности из ссылки на текстовый модуль

В этой статье описывается модуль в дизайнере машинного обучения Azure (предварительный просмотр). Используйте функции экстракта N-Gram из модуля Text для *феатуризации* неструктурированных текстовых данных. 

## <a name="configuration-of-the-extract-n-gram-features-from-text-module"></a>Конфигурация функций экстракта N-Gram из текстового модуля

Модуль поддерживает следующие сценарии использования n-граммсловарного словаря:

* [Создайте новый n-граммовый словарь](#create-a-new-n-gram-dictionary) из столбца свободного текста.

* [Используйте существующий набор текстовых функций,](#use-an-existing-n-gram-dictionary) чтобы обезвредить свободную колонку текста.

* [Оценка или опубликовать модель,](#score-or-publish-a-model-that-uses-n-grams) которая использует n-грамм.

### <a name="create-a-new-n-gram-dictionary"></a>Создание нового словаря n-грамм

1.  Добавьте функции Extract N-Gram из модуля Text в конвейер и подключите набор данных с текстом, который требуется обработать.

1.  Используйте **столбец Text,** чтобы выбрать столбец типа строки, содержащий текст, который вы хотите извлечь. Поскольку результаты являются многословным, можно обрабатывать только один столбец за один раз.

1. Установите **режим Vocabulary** для **создания,** чтобы указать, что вы создаете новый список n-грамм функций. 

1. Установите **размер N-Grams,** чтобы указать *максимальный* размер n-граммов для извлечения и хранения. 

    Например, если вы введете 3, будут созданы униграммы, биграммы и триграммы.

1. **Функция взвешивания** определяет, как построить вектор функции документа и как извлечь словарный запас из документов.

    * **Двоичный вес**: Присваивает бинарное значение присутствия извлеченным n-граммам. Значение для каждого n-грамма 1, когда оно существует в документе, и 0 в противном случае.

    * **TF Вес**: Присваивает частоту термина (TF) счет к извлеченным n-граммам. Значение для каждого n-грамма является его частота возникновения в документе.

    * **Вес IDF**: Присваивает обратную частоту документов (IDF) оценка извлеченных n-граммов. Значение для каждого n-грамма является журнал омрачаемого размера корпуса, разделенный по частоте его возникновения во всем корпусе.
    
      `IDF = log of corpus_size / document_frequency`
 
    *  **TF-IDF Вес**: Присваивает частоту термина/обратную частоту документа (TF/IDF) оценка к извлеченным n-граммам. Значение для каждого n-грамма является его Оценка TF умножается на его оценка IDF.

1. Установите **минимальную длину слова** до минимального количества букв, которые могут быть использованы в любом *отдельном слове* в n-грамм.

1. Используйте **максимальную длину слов,** чтобы установить максимальное количество букв, которые могут быть использованы в любом *одном слове* в n-грамм.

    По умолчанию допускается до 25 символов на слово или маркер.

1. Используйте **абсолютную частоту минимального n-граммового документа,** чтобы установить минимальные случаи, необходимые для включения любого n-грамма в словарь n-gram. 

    Например, если вы используете значение по умолчанию 5, любой n-грамм должен отображаться по крайней мере пять раз в корпусе, чтобы быть включенным в словарь n-грамма. 

1.  Установите **максимальное соотношение n-грамм аттеков** к максимальному соотношению количества строк, содержащих определенный n-грамм, над числом строк в общем корпусе.

    Например, соотношение 1 указывает на то, что, даже если в каждом ряду присутствует определенный n-грамм, n-gram может быть добавлен в словарь n-gram. Более типично, слово которое происходит в каждом рядке было бы учтено словом шума и было бы извлекано. Чтобы отфильтровать доменные шумовые слова, попробуйте уменьшить это соотношение.

    > [!IMPORTANT]
    > Скорость появления конкретных слов не является единообразной. Она варьируется от документа к документу. Например, если вы анализируете комментарии клиентов о конкретном продукте, название продукта может быть очень высокочастотным и близким к шумовому слову, но быть важным термином в других контекстах.

1. Выберите опцию **Нормализация n-грамм векторов функций** для нормализации векторов функций. Если эта опция включена, каждый вектор n-грамма делится на норму L2.

1. Отправить конвейер.

### <a name="use-an-existing-n-gram-dictionary"></a>Используйте существующий словарь n-грамма

1.  Добавьте в конвейер функции Extract N-Gram из модуля Text и подключите набор данных с текстом, который требуется обработать, в порт **набора данных.**

1.  Используйте **столбец Text** для выбора столбца текста, содержащего текст, который вы хотите обезображить. По умолчанию модуль выбирает все столбцы **строки**типа. Для достижения наилучших результатов обработайте один столбец за один раз.

1. Добавьте сохраненный набор данных, содержащий ранее сгенерированный словарь n-gram, и подключите его к порту **словаря ввода.** Вы также можете подключить **выход словарного запаса result** of экземпляра экстракта N-Gram из модуля Text.

1. Для **режима Vocabulary**выберите опцию обновления **ReadOnly** из списка выпадающих.

   Опция **ReadOnly** представляет собой корпус ввода для входним словаря. Вместо того, чтобы вычислительные частоты термина от нового набора данных текста (на левом входе), n-грамм весов из вхоложенного словаря применяются как есть.

   > [!TIP]
   > Используйте эту опцию, когда вы забиваете текстовый классификатор.

1.  Для всех остальных вариантов смотрите описания свойств в [предыдущем разделе.](#create-a-new-n-gram-dictionary)

1.  Отправить конвейер.

### <a name="score-or-publish-a-model-that-uses-n-grams"></a>Оценка или опубликовать модель, которая использует n-грамм

1.  Копирование **функций Extract N-Gram из модуля Text** из учебного потока данных в процесс скоринга.

1.  Подключите выход **Vocabulary результата** из учебного потока данных к **Vocabulary Ввода** на процессе скоринга данных.

1.  В процессе скоринга изодейте функции Extract N-Gram из модуля Text и установите параметр **режима Vocabulary** на **ReadOnly.** Оставьте все остальное тем же.

1.  Чтобы опубликовать конвейер, сохраните **результат vocabulary** в качестве набора данных.

1.  Подключите сохраненный набор данных к функциям Extract N-Gram из модуля Text на графике скоринга.

## <a name="results"></a>Результаты

Особенности экстракта N-Gram из модуля Text создают два типа вывода: 

* **Набор данных результатов**: Этот вывод представляет собой резюме проанализированного текста в сочетании с n-граммами, которые были извлечены. Столбцы, которые вы не выбрали в опции **столбца текста,** передаются на вывод. Для каждого столбца текста, который вы анализируете, модуль генерирует следующие столбцы:

  * **Матрица n-граммовых происшествий**: Модуль генерирует столбец для каждого n-грамма, найденный в общем корпусе, и добавляет балл в каждом столбце, чтобы указать вес n-грамма для этой строки. 

* **Словарь результата**: Словарь содержит фактический словарь n-грамма, вместе с счетами частоты термина которые произведены как часть анализа. Можно сохранить набор данных для повторного использования с другим набором входных данных или для последующего обновления. Вы также можете повторно использовать словарный запас для моделирования и скоринга.

### <a name="result-vocabulary"></a>Словарный запас результата

Словарь содержит n-грамм словарь с термином частоты баллов, которые генерируются в рамках анализа. Оценки DF и IDF генерируются независимо от других вариантов.

+ **ID**: Идентификатор, генерируемый для каждого уникального n-грамма.
+ **NGram**: N-грамм. Пространства или другие сепараторы слова заменяются подчеркиваем характером.
+ **DF**: Оценка частоты термина для n-грамма в первоначально корпусе.
+ **IDF**: Обратный балл частоты документа для n-грамма в первоначальнокорпусе.

Вы можете вручную обновить этот набор данных, но вы можете ввести ошибки. Пример:

* Ошибка возникает, если модуль находит дубликаты строк с тем же ключом в словаре ввода. Убедитесь, что ни в одном и том же словаре нет двух строк в лексиконе.
* Схема ввода наборов данных лексики должна точно соответствовать, включая имена столбцов и типы столбцов. 
* Столбец **идентификатор** и столбец **DF** должны быть типа integer. 
* Колонна **IDF** должна быть типа поплавка.

> [!Note]
> Не подключайте выход данных к модулю Модели поезда напрямую. Вы должны удалить бесплатные текстовые столбцы, прежде чем они подаются в модель поезда. В противном случае, бесплатные столбцы текста будут рассматриваться как категоричные функции.

## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с [набором модулей, доступных](module-reference.md) для машинного обучения Azure.
