---
title: 'Модель перекрестной проверки: ссылка на модуль'
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль Cross-Validate Model в Azure Machine Learning для перекрестной проверки оценок параметров для классификации или регрессии моделей путем раздела данных.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/11/2020
ms.openlocfilehash: 7550bb7c6bbf7602245f9a9f1ac006ce693b36a8
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79477652"
---
# <a name="cross-validate-model"></a>Перекрестная проверка модели

В этой статье описывается, как использовать модуль модели перекрестной проверки в дизайнере машинного обучения Azure (предварительный просмотр). *Перекрестная проверка* — это метод, часто используемый в машинном обучении для оценки как изменчивости набора данных, так и надежности любой модели, обученной с помощью этих данных.  

Модуль Cross Validate Model принимает в качестве ввода помеченный набор данных вместе с неподготовленной классификацией или регрессионной моделью. Он делит набор данных на определенное количество подмножеств *(складки),* строит модель на каждом складе, а затем возвращает набор статистики точности для каждого раза. Сравнивая статистику точности для всех складок, можно интерпретировать качество набора данных. Затем можно понять, подвержена ли модель изменениям данных.  

Модель Cross Validate также возвращает прогнозируемые результаты и вероятности для набора данных, чтобы можно было оценить надежность прогнозов.  

### <a name="how-cross-validation-works"></a>Как работает перекрестная проверка

1. Перекрестная проверка случайным образом делит обучающие данные на складки. 

   Если вы ранее не секционировали определенный набор данных, по умолчанию алгоритм создает 10 сверток. Чтобы разделить набор данных на разное количество складок, можно использовать модуль [Раздела и образца](partition-and-sample.md) и указать, сколько складок использовать.  

2.  Модуль выделяет данные в раз 1 для использования для проверки. (Это иногда называется *удержание раза*.) Модуль использует оставшиеся складки для обучения модели. 

    Например, при создании пяти складок модуль генерирует пять моделей во время перекрестной проверки. Модуль обучает каждую модель, используя четыре пятых данных. Он тестирует каждую модель на оставшейся пятой.  

3.  При тестировании модели для каждого склада модуль оценивает несколько статистических данных точности. Какая статистика используется в модуле, зависит от типа модели, которую вы оцениваете. Для оценки классификационных моделей по сравнению с регрессионными моделями используются различные статистические данные.  

4.  Когда процесс построения и оценки завершен для всех складок, Cross Validate Model генерирует набор показателей производительности и забивает результаты для всех данных. Просмотрите эти метрики, чтобы увидеть, имеет ли какой-либо одиночный раз высокую или низкую точность. 

### <a name="advantages-of-cross-validation"></a>Преимущества перекрестной проверки

Другой и распространенный способ оценки модели заключается в разделении данных на обучающий и тестовый набор с помощью [Split Data,](split-data.md)а затем проверки модели на обучающих данных. Но перекрестная проверка предлагает некоторые преимущества:  

-   Перекрестная проверка использует больше тестовых данных.

    Перекрестная проверка измеряет производительность модели с указанными параметрами в большем пространстве данных. То есть, перекрестная проверка использует весь набор обучаемых данных как для обучения, так и для оценки, а не для части. В отличие от этого, если вы проверяете модель с помощью данных, генерируемых случайным сплитом, обычно вы оцениваете модель только на 30 или менее из имеющихся данных.  

    Однако, поскольку перекрестная проверка обучает и проверяет модель несколько раз по сравнению с большим набором данных, она является гораздо более вычислительно интенсивной. Это занимает гораздо больше времени, чем проверка случайного сплита.  

-   Перекрестная проверка оценивает как набор данных, так и модель.

    Перекрестная проверка не просто измеряет точность модели. Это также дает некоторое представление о том, насколько репрезентативным является набор данных и насколько чувствительна модель к изменениям в данных.  

## <a name="how-to-use-cross-validate-model"></a>Как использовать модель перекрестной проверки

Перекрестная проверка может занять много времени, если набор данных большой.  Таким образом, на начальном этапе создания и тестирования модели можно использовать модель Cross Validate. На этом этапе можно оценить правильность параметров модели (при условии, что время вычислений допустимо). Затем можно обучить и оценить свою модель, используя установленные параметры с модулями [Модели поездов](train-model.md) и [оценить модель.](evaluate-model.md)

В этом случае вы обучаете и тестируете модель с помощью модели Cross Validate.

1. Добавьте модуль Cross Validate Model в конвейер. Вы можете найти его в Azure машинного обучения дизайнера, в **модели скоринга & оценки** категории. 

2. Соедините выход любой модели классификации или регрессии. 

    Например, если для классификации используется два дерева решений **класса Boosted,** наверстойнете модель с параметрами, которые вы хотите. Затем перетащите разъем из **неподготовленного модельного** порта классификатора в соответствующий порт модели Cross Validate. 

    > [!TIP] 
    > Не нужно тренировать модель, так как Cross-Validate Model автоматически обучает модель в рамках оценки.  
3.  В порту **Dataset** модели Cross Validate подключите любой помеченный набор обучаемых данных.  

4.  В правой панели модели cross Validate нажмите **кнопку «Отметуй».** Выберите один столбец, содержащий метку класса, или предсказуемое значение. 

5. Установите значение параметра **Случайных семян,** если вы хотите повторить результаты перекрестной проверки в последующих запусках на одних и тех же данных.  

6. Отправить конвейер.

7. Ознакомьтесь с описанием отчетов в разделе [«Результаты».](#results)

## <a name="results"></a>Результаты

После завершения всех итераций модель Cross Validate создает баллы для всего набора данных. Он также создает показатели производительности, которые можно использовать для оценки качества модели.

### <a name="scored-results"></a>Оцененные результаты

Первый вывод модуля предоставляет исходные данные для каждой строки, а также некоторые прогнозируемые значения и связанные с ними вероятности. 

Для просмотра результатов в конвейере нажмите на модуль Cross Validate Model. Выберите **Визуализацию Результатов.**

| Имя нового столбца      | Описание                              |
| -------------------- | ---------------------------------------- |
| Оцененные метки        | Этот столбец добавляется в конце набора данных. Он содержит прогнозируемое значение для каждой строки. |
| Забил вероятности | Этот столбец добавляется в конце набора данных. Он указывает на оценочную вероятность значения в **Загорится.** |
| Складной номер          | Указывает на нулевой индекс складки, к которому была назначена каждая строка данных во время перекрестной проверки. |

 ### <a name="evaluation-results"></a>Результаты оценки

Второй отчет сгруппирован по складным складам. Помните, что во время выполнения модель Cross Validate случайным образом разделит обучающие данные на *n* складки (по умолчанию 10). В каждой итерации над набором данных модель Cross Validate использует одну раз в качестве набора данных проверки. Он использует оставшиеся *складки n-1* для обучения модели. Каждая из моделей *n* тестируется на данных во всех других складках.

В этом отчете складки перечислены значением индекса в порядке возрастания.  Чтобы заказать на любом другом столбце, можно сохранить результаты в виде набора данных.

Для просмотра результатов в конвейере нажмите на модуль Cross Validate Model. Выберите **визуализировать результаты оценки по разу.**


|Имя столбца| Описание|
|----|----|
|Сложить номер| Идентификатор для каждого склада. Если вы создали пять складок, было бы пять подмножеств данных, пронумерованных от 0 до 4.
|Количество примеров в раз|Количество строк, назначенных каждому складу. Они должны быть примерно равны. |


Модуль также включает в себя следующие метрики для каждого раза, в зависимости от типа модели, которую вы оцениваете: 

+ **Модели классификации**: Точность, отзыв, F-оценка, AUC, точность  

+ **Модели регрессии**: Средняя абсолютная ошибка, корневая средняя ошибка квадратного квадрата, относительная абсолютная ошибка, относительная ошибка квадратного исхода и коэффициент определения


## <a name="technical-notes"></a>Технические примечания  

+ Лучше всего нормализовать наборы данных перед их использованием для перекрестной проверки. 

+ Модель Cross Validate является гораздо более вычислительно интенсивной и занимает больше времени, чем если бы вы проверили модель с помощью случайно разделенного набора данных. Причина в том, что модель Cross Validate тренируетии и проверяют модель несколько раз.

+ Нет необходимости разделять набор данных на наборы обучения и тестирования при использовании перекрестной проверки для измерения точности модели. 


## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с [набором модулей, доступных](module-reference.md) для машинного обучения Azure. 

