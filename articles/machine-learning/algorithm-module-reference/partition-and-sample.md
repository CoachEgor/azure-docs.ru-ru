---
title: 'Секционирование и выборка: Справочник по модулям'
titleSuffix: Azure Machine Learning service
description: Узнайте, как использовать модуль Partition и Sample в службе Машинное обучение Azure для выполнения выборки в наборе данных или создания секций из набора данных.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 05/02/2019
ms.openlocfilehash: 79cd6fe9156a785d82e303007d02ce58506dcfcf
ms.sourcegitcommit: 07700392dd52071f31f0571ec847925e467d6795
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/28/2019
ms.locfileid: "70128553"
---
# <a name="partition-and-sample-module"></a>Модуль секционирования и выборка

В этой статье описывается модуль визуального интерфейса (Предварительная версия) для службы Машинное обучение Azure.

Этот модуль используется для выполнения выборки в наборе данных или для создания секций из набора данных.

Выборка — это важное средство машинного обучения, поскольку оно позволяет уменьшить размер набора данных, сохраняя при этом одинаковое соотношение значений. Этот модуль поддерживает несколько связанных задач, которые важны для машинного обучения. 

- Разделение данных на несколько подразделов одного и того же размера. 

    Вы можете использовать секции для перекрестной проверки или для назначения вариантов случайным группам.

- Разделение данных на группы и последующее выполнение работы с данными из определенной группы. 

    После случайного назначения вариантов разным группам может потребоваться изменить функции, связанные только с одной группой.

- Ресамплинга. 

    Можно извлечь процент данных, применить случайную выборку или выбрать столбец, который будет использоваться для балансировки набора данных, и выполнить стратифицированной выборку по его значениям.

- Создание набора данных меньшего размера для тестирования. 

    При наличии большого объема данных может потребоваться использовать только первые *n* строк при настройке эксперимента, а затем переключаться на использование полного набора данных при построении модели. Можно также использовать выборку для создания набора данных с меньшим объемом для использования в разработке.

## <a name="configure-partition-and-sample"></a>Настройка секции и образца

Этот модуль поддерживает несколько методов для разделения данных на секции или для выборки. Сначала выберите метод, а затем задайте дополнительные параметры, необходимые для метода.

- Головной
- Выборка
- Назначить для сверток
- Выбрать сгиб

### <a name="get-top-n-rows-from-a-dataset"></a>Получить первые N строк из набора данных

Используйте этот режим, чтобы получить только первые *n* строк. Этот параметр полезен, если вы хотите протестировать эксперимент по небольшому количеству строк, и не требуется, чтобы данные были сбалансированы или выборке каким-либо образом.

1. Добавьте модуль **Partition и Sample** в свой эксперимент в интерфейсе и подключите набор данных.  

2. **Раздел или режим выборки**: Установите для этого параметра значение **head**.

3. **Число строк для выбора**: Введите число возвращаемых строк.

    Указанное число строк должно быть неотрицательным целым числом. Если число выбранных строк превышает число строк в наборе данных, возвращается весь набор данных.

4. Запустите эксперимент.

Модуль выводит один набор данных, содержащий только указанное число строк. Строки всегда считываются из верхней части набора данных.

### <a name="create-a-sample-of-data"></a>Создание образца данных

Этот параметр поддерживает простую случайную выборку или стратифицированной случайную выборку. Это полезно, если необходимо создать меньший репрезентативный образец набора данных для тестирования.

1. Добавьте модуль **Partition и Sample** в эксперимент и подключите набор данных.

2. **Раздел или режим выборки**: Задайте для этогопараметра значение выборка.

3. **Интенсивность выборки**: Введите значение от 0 до 1. Это значение указывает процент строк из исходного набора данных, которые должны быть добавлены в выходной набор данных.

    Например, если требуется только половина исходного набора данных, введите `0.5` , чтобы указать, что частота выборки должна составлять 50%.

    Строки входного набора данных перемещаются в случайном порядке и выборочно помещаются в выходной набор данных в соответствии с указанным соотношением.

4. **Случайное начальное значение для выборки**: При необходимости введите целое число, которое будет использоваться в качестве начального значения.

    Этот параметр важен, если нужно, чтобы строки были распределены одинаково каждый раз. Значение по умолчанию — 0. Это означает, что начальное начальное время создается на основе системных часов. Это может привести к слегка разным результатам при каждом запуске эксперимента.

5. **Разделение стратифицированной для выборки**: Выберите этот параметр, если важно, чтобы строки в наборе данных были равномерно распределены по определенному ключевому столбцу перед выборкой.

    Для **столбца соотношением Key**(выборка) выберите один *столбец Strata* , который будет использоваться при делении набора данных. Строки в наборе данных делятся следующим образом:

    1. Все входные строки группируются (стратифицированной) по значениям в указанном столбце Strata.

    2. Строки в каждой группе перемещаются в случайном порядке.

    3. Каждая группа выборочно добавляется в выходной набор данных в соответствии с указанным соотношением.


6. Запустите эксперимент.

    При использовании этого параметра модуль выводит один набор данных, содержащий репрезентативную выборку данных. Оставшаяся часть набора данных без выборки не выводится. 

## <a name="split-data-into-partitions"></a>Разбиение данных на секции

Используйте этот параметр, если необходимо разделить набор данных на подмножества данных. Этот параметр также полезен, если необходимо создать пользовательское число сверток для перекрестной проверки или разделить строки на несколько групп.

1. Добавьте модуль **Partition и Sample** в эксперимент и подключите набор данных.

2. Для **раздела или режима**выборки выберите **назначить для свертывания**.

3. **Используйте замену в секционировании**: Выберите этот параметр, если необходимо вернуть выбранную строку в пул строк для возможного повторного использования. В результате одна и та же строка может быть назначена нескольким свертываниям.

    Если не использовать замену (параметр по умолчанию), то строка выборки не помещается обратно в пул строк для потенциального повторного использования. В результате каждая строка может быть назначена только одному сгибу.

4. **Случайное разбиение**:  Выберите этот параметр, если нужно, чтобы строки были назначены для свертывания случайным образом.

    Если этот параметр не выбран, строки будут назначены для свертывания с помощью метода циклического перебора.

5. **Случайное начальное значение**: При необходимости введите целое число, которое будет использоваться в качестве начального значения. Этот параметр важен, если нужно, чтобы строки были распределены одинаково каждый раз. В противном случае значение по умолчанию, равное 0, означает, что будет использоваться случайная начальная начальная величина.

6. **Укажите метод секционирования**: Укажите способ распределения данных по каждой секции, используя следующие параметры:

    - **Секционировать равномерно**: Используйте этот параметр, чтобы разместить одинаковое число строк в каждой секции. Чтобы указать число секций выходных данных, введите целое число в поле **Укажите число сверток для равномерного разбиения** на текст.

    - **Секция с настроенными**пропорциями: Используйте этот параметр, чтобы указать размер каждой секции в виде списка с разделителями-запятыми.

        Например, если необходимо создать три секции с первой секцией, содержащей 50% данных, и оставшиеся две секции, содержащие 25% данных, щелкните **список пропорций** , разделенных запятыми, и введите следующие значения:`.5, .25, .25`

        Сумма всех размеров секций должна составлять до 1.

        - Если ввести числа, размер которых **не превышает 1**, создается дополнительный раздел для хранения оставшихся строк. Например, если ввести значения 2 и 3, создается третья секция, которая содержит оставшиеся 50 процентов всех строк.

        - Если ввести числа, которые доводят до **1**, при запуске эксперимента возникает ошибка.

7. **Разделение стратифицированной**: Выберите этот параметр, если нужно, чтобы строки стратифицированной при разбиении, а затем выберите _столбец Strata_.

8. Запустите эксперимент.

    При использовании этого параметра модуль выводит несколько наборов данных, секционированных с использованием указанных правил.

### <a name="use-data-from-a-predefined-partition"></a>Использование данных из предопределенной секции  

Этот параметр используется, если набор данных делится на несколько секций, и теперь требуется загрузить каждую секцию для дальнейшего анализа или обработки.

1. Добавьте модуль **Partition и Sample** в эксперимент.

2. Подключите его к выходным данным предыдущего экземпляра **Partition и Sample**. Этот экземпляр должен использовать параметр **Assign To fold** , чтобы создать некоторое количество секций.

3. **Раздел или режим выборки**: Щелкните **Скомплектовать сгиб**.

4. **Укажите, из какого сгиба будет производиться выборка**. Выберите секцию для использования, введя ее индекс. Индексы секций основаны на 1. Например, если набор данных делится на три части, то для секций будут сосуществовать индексы 1, 2 и 3.

    При вводе недопустимого значения индекса возникает ошибка времени разработки: "Ошибка 0018: Набор данных содержит недопустимые данные ".

    Кроме группирования набора данных по сгибам, можно разделить набор данных на две группы: цель и все остальное. Для этого введите индекс одного сгиба, а затем выберите параметр **дополнять выделенный сгиб**, чтобы получить все данные, кроме данных в указанном сгибе.

5. При работе с несколькими секциями необходимо добавить дополнительные экземпляры **секции и образца** модуля, чтобы справиться с каждой секцией.

    Например, предположим, что ранее секционированный пациентов на четыре свертки с использованием возраста. Чтобы работать с каждым отдельным сгибом, необходимо четыре копии **раздела и модуля Sample** , а в каждом из них выбрать другой сгиб, как показано ниже. Неверно использовать вывод "назначить" **для** непосредственного вывода.  

    [![Секционирование и выборка](./media/partition-and-sample/partition-and-sample.png)](./media/partition-and-sample/partition-and-sample-lg.png#lightbox)

5. Запустите эксперимент.

    При использовании этого параметра модуль выводит один набор данных, содержащий только те строки, которые были назначены этому сгибу.

> [!NOTE]
>  Вы не можете просматривать макеты «сгиб» напрямую; они представлены только в метаданных.

## <a name="next-steps"></a>Следующие шаги

См. [набор модулей, доступных](module-reference.md) машинное обучение Azure службе. 