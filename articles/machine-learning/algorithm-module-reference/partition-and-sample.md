---
title: 'Раздел и образец: Ссылка на модуль'
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль «Раздел» и «Образец» в Azure Machine Learning для выполнения выборки на наборе данных или для создания разделов из набора данных.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/22/2019
ms.openlocfilehash: 0392a05df485b45b1244f4542ed55af1837dca3d
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79477516"
---
# <a name="partition-and-sample-module"></a>Модуль раздела и образца

В этой статье описывается модуль в дизайнере машинного обучения Azure (предварительный просмотр).

Используйте модуль Раздел а также образец для выполнения выборки на наборе данных или для создания разделов из набора данных.

Выборка — это важный инструмент машинного обучения, так как она позволяет уменьшить размер набора данных, сохранив пропорцию значений. Этот модуль поддерживает несколько связанных с этим задач, которые важны в машинном обучении: 

- Разделение данных на несколько подразделов одинакового размера. 

  Можно использовать разделы для перекрестной проверки или для присвоения случаев случайным группам.

- Разделение данных на группы, а затем работа с данными из определенной группы. 

  После того, как вы случайным образом назначите кейсы различным группам, может потребоваться изменить функции, связанные только с одной группой.

- Выборка. 

  Можно извлечь процент данных, применить случайную выборку или выбрать столбец для балансировки набора данных и выполнить стратифицированную выборку на его значениях.

- Создание меньшего набора данных для тестирования. 

  Если у вас много данных, при настройке конвейера можно использовать только первые *строки n,* а затем переключиться на использование полного набора данных при построении модели. Можно также использовать выборку для создания меньшего набора данных для использования в разработке.

## <a name="configure-the-module"></a>Настройка модуля

Этот модуль поддерживает следующие методы деления данных на разделы или выборки. Сначала выберите метод, а затем установите дополнительные параметры, которые требуется методу.

- Head
- Выборка
- Назначать складки
- Выбрать свертку

### <a name="get-top-n-rows-from-a-dataset"></a>Получить строки TOP N из набора данных

Используйте этот режим, чтобы получить только первые *n* строк. Эта опция полезна, если вы хотите протестировать конвейер на небольшом количестве строк, и вам не нужны данные, которые должны быть сбалансированы или отобраны каким-либо образом.

1. Добавьте модуль **Раздела и образца** в конвейер в интерфейсе и подключите набор данных.  

1. **Раздел или режим образца**: Установите эту опцию для **head.**

1. **Количество строк для выбора:** Введите количество строк для возврата.

   Количество строк должно быть неотрицательным целым рядом. Если количество выбранных строк больше, чем количество строк в наборе данных, возвращается весь набор данных.

1. Отправить конвейер.

Модуль выводит единый набор данных, содержащий только указанное количество строк. Строки всегда считываются из верхней части набора данных.

### <a name="create-a-sample-of-data"></a>Создание образца данных

Эта опция поддерживает простую случайную выборку или стратифицированную случайную выборку. Это полезно, если вы хотите создать меньший репрезентативный набор данных для тестирования.

1. Добавьте модуль **Раздела и образца** в конвейер и подключите набор данных.

1. **Режим раздела или образца**: Установите эту опцию для **выборки.**

1. **Скорость выборки**: Введите значение между 0 и 1. это значение определяет процент строк из набора исходных данных, которые должны быть включены в набор данных вывода.

   Например, если требуется только половина исходного `0.5` набора данных, введите, чтобы указать, что частота выборки должна составить 50 процентов.

   Строки набора входных данных перетасовываются и выборочно размещаются в наборе выходных данных в соответствии с указанным соотношением.

1. **Случайное семя для отбора проб**: Дополнительно введите целый ряд для использования в качестве значения семян.

   Этот параметр важен, если вы хотите, чтобы строки делились одинаково каждый раз. Значение по умолчанию составляет **0,** что означает, что исходное семя генерируется на основе системных часов. Это значение может привести к несколько различным результатам при запуске конвейера.

1. **Стратифицированный раскол для выборки**: Выберите этот вариант, если важно, чтобы строки в наборе данных равномерно делились некоторыми ключевыми столбцов перед выборкой.

   Для **столбца ключа стратификации для выборки**выберите *столбец* одного слоя для использования при делении набора данных. Строки в наборе данных затем делятся следующим образом:

   1. Все входные строки сгруппированы (стратифицированы) значениями в указанном столбце слоев.

   1. строки перемешиваются внутри каждой группы;

   1. каждая группа выборочно добавляется в выходной набор данных в соответствии с указанной пропорцией.


1. Отправить конвейер.

   С помощью этого параметра модуль выводит единый набор данных, содержащий репрезентативную выборку данных. Оставшаяся неотопробиваемые части набора данных не выводится. 

## <a name="split-data-into-partitions"></a>Разделение данных на разделы

Используйте эту опцию, когда требуется разделить набор данных на подмножества данных. Эта опция также полезна, если требуется создать специальное количество складок для перекрестной проверки или разделить строки на несколько групп.

1. Добавьте модуль **Раздела и образца** в конвейер и подключите набор данных.

1. Для **режима раздела или образца**выберите **Присвоите складки.**

1. **Используйте замену в разделивке:** Выберите эту опцию, если вы хотите, чтобы выбранная строка была возвращена в пул строк для потенциального повторного использования. В результате один и тот же ряд может быть присен к нескольким складам.

   Если вы не используете замену (опция по умолчанию), выбранная строка не возвращается в пул строк для потенциального повторного использования. В результате каждая строка может быть назначена только одному складу.

1. **Рандомизированный сплит:** Выберите этот параметр, если вы хотите, чтобы строки были случайным образом назначены складки.

   Если вы не выберете эту опцию, строки назначаются для складывания с помощью кругового метода.

1. **Случайное семя**: Дополнительно, введите целый ряд для использования в качестве значения семян. Этот параметр важен, если вы хотите, чтобы строки делились одинаково каждый раз. В противном случае значение по умолчанию **0** означает, что будет использоваться случайное исходное семя.

1. **Укажите метод разделителя:** Укажите, как вы хотите, чтобы данные были распределены по каждому разделу, используя следующие параметры:

   - **Раздел равномерно:** Используйте эту опцию для размещения равного количества строк в каждом разделе. Чтобы указать количество выходных разделов, введите целое число в **определенном количестве складок, чтобы равномерно разделить на** коробку.

   - **Раздел с настраиваемыми пропорциями**: Используйте эту опцию, чтобы указать размер каждой раздела в виде списка, разделенного запятой.

     Например, предположим, что необходимо создать три раздела. Первая разделная часть будет содержать 50 процентов данных. Остальные два раздела будут содержать по 25 процентов данных. В **списке пропорций, разделенных запятой,** введите эти цифры: **.5, .25, .25**.

     Сумма всех размеров разделов должна составить ровно 1.

     Если вы вводите числа, которые составляют *менее 1,* создается дополнительная раздел, удерживающая оставшиеся строки. Например, при вводе значений **.2** и **.3**создается третья разделка для удержания оставшихся 50 процентов всех строк.
     
     При вводе номеров, которые составляют *более 1,* при запуске конвейера возникает ошибка.

1. **Стратифицированный раскол:** Выберите этот параметр, если вы хотите, чтобы строки были стратифицированы при разделении, а затем выберите _столбец слоев._

1. Отправить конвейер.

   С помощью этой опции модуль выводит несколько наборов данных. Наборы данных разделены в соответствии с указанными правилами.

### <a name="use-data-from-a-predefined-partition"></a>Использование данных из заданного раздела  

Используйте эту опцию, когда вы разделили набор данных на несколько разделов и теперь хотите загрузить каждый раздел в свою очередь для дальнейшего анализа или обработки.

1. Добавьте модуль **раздела и образца** в конвейер.

1. Подключите модуль к выходу предыдущего **экземпляра раздела и образца.** Этот экземпляр должен использовать опцию **«Назначить складки»** для генерации определенного количества разделов.

1. **Режим раздела или образца:** Выберите **складку.**

1. **Укажите, какой склад, который следует отобрать:** Выберите раздел для использования, введя его индекс. Индексы раздела основаны на 1. Например, если разделить набор данных на три части, разделы будут иметь индексы 1, 2 и 3.

   При вводе значения недействительного индекса возникает ошибка времени проектирования: "Ошибка 0018: Набор данных содержит недействительные данные".

   Помимо группировки набора данных по складным складам, можно разделить набор данных на две группы: целевой склад и все остальное. Для этого введите индекс одного раза, а затем выберите опцию **Pick комплект выбранного раза,** чтобы получить все, кроме данных в указанном складе.

1. Если вы работаете с несколькими разделами, необходимо добавить больше экземпляров модуля **раздела и образца** для обработки каждого раздела.

   Например, модуль **раздела и образца** во втором ряду настроен на **присвоение складок,** а модуль в третьем ряду настроен на **выбор fold.**   

   ![Секционирование и выборка](./media/module/partition-and-sample.png)

1. Отправить конвейер.

   С помощью этой опции модуль выводит единый набор данных, содержащий только строки, назначенные этому складу.

> [!NOTE]
>  Вы не можете просматривать обозначения складок напрямую. Они присутствуют только в метаданных.

## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с [набором модулей, доступных](module-reference.md) для машинного обучения Azure. 