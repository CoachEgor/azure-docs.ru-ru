---
title: смоте
titleSuffix: Azure Machine Learning service
description: Узнайте, как использовать модуль СМОТЕ в службе Машинное обучение Azure, чтобы увеличить число примеров с низкими числами в наборе данных с помощью избыточной выборки.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/16/2019
ms.openlocfilehash: 072268af52ebf7d3bede564d8c949eec9fc9f625
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73516192"
---
# <a name="smote"></a>смоте

В этой статье описывается использование модуля **смоте** в конструкторе машинное обучение Azure (Предварительная версия) для увеличения числа недопустимых вариантов в наборе данных, используемом для машинного обучения. СМОТЕ — лучший способ увеличения количества редких случаев, чем просто дублирование существующих вариантов.  

 Модуль СМОТЕ подключается к *несбалансированному*набору данных. Существует множество причин, по которым набор данных может быть несбалансированным: Категория, на которую вы нацелены, может быть редкой в совокупности, или данные могут быть трудно собраны. Как правило, СМОТЕ используется, когда анализируемый *класс* находится в представлении. 
  
 Модуль возвращает набор данных, содержащий исходные образцы, а также дополнительное количество искусственных долей в зависимости от указанного процента.  
  
### <a name="more-about-smote"></a>Дополнительные сведения о СМОТЕ

**Смоте** означает *искусственную избыточную долю миноритария*. Это статистический метод для равномерного увеличения количества вариантов в наборе данных.  Модуль работает путем создания новых экземпляров на основе существующих миноритарных вариантов, которые указываются в качестве входных данных. Эта реализация СМОТЕ **не** изменяет число большинства случаев.

Новые экземпляры являются не только копиями существующих вариантов миноритария; Вместо этого алгоритм принимает выборки *пространства функций* для каждого целевого класса и его ближайших соседей, а также создает новые примеры, объединяющие функции целевого варианта с функциями его соседей. Этот подход увеличивает возможности, доступные для каждого класса, и делает примеры более общими.
  
СМОТЕ принимает весь набор данных как входные данные, но увеличивает процентное соотношение только доли миноритария. Например, предположим, что у вас есть несбалансированный набор данных, где только 1% вариантов имеет целевое значение A (класс миноритария), а 99% вариантов — значение B. Чтобы увеличить процент вариантов доли в два раза больше предыдущего процентного значения, введите 200 для **смоте** в свойствах модуля.  
  
## <a name="examples"></a>Примеры  

Рекомендуется использовать **смоте** с небольшим набором данных, чтобы увидеть, как это работает. В следующем примере используется набор данных о пожертвовании крови, доступный в Машинное обучение Azure Designer.
  
Если добавить набор данных в конвейер и щелкнуть **визуализировать** на выходе набора данных, можно увидеть, что из 748 строк или вариантов в наборе данных имеется 570 вариантов (76%). из класса 0 и 178 вариантов (24%) класса 1. Хотя это не совсем неравномерное распределение, класс 1 представляет пользователей, которые поддержали кровь, и поэтому эти строки содержат *пространство функций* , которое необходимо смоделировать.
 
Чтобы увеличить количество вариантов, можно задать значение **смоте в процентах**, используя кратные 100, как показано ниже.

||Класс 0|Класс 1|total|  
|-|-------------|-------------|-----------|  
|Исходный набор данных<br /><br /> (эквивалентно **смоте в процентах** = **0**)|570<br /><br /> 76%|178<br /><br /> круглосуточно|748|  
|**Смоте процент** = **100**|570<br /><br /> 62%|356<br /><br /> 38%|926|  
|**Смоте процент** = **200**|570<br /><br /> 52%|534<br /><br /> 48%|1104|  
|**Смоте процент** = **300**|570<br /><br /> 44%|712<br /><br /> 56%|1282|  
  
> [!WARNING]
>  Увеличение количества вариантов, использующих СМОТЕ, не гарантирует получения более точных моделей. Вы должны попытаться выполнить конвейер с различными процентами, различными наборами функций и различными числами ближайших соседей, чтобы увидеть, как добавление вариантов влияет на модель.  
  
## <a name="how-to-configure-smote"></a>Настройка СМОТЕ
  
1.  Добавьте модуль СМОТЕ в конвейер. Модуль можно найти в разделе модули преобразования данных в категории Управление.

2. Подключите набор данных, который необходимо увеличить. Если необходимо указать пространство функций для создания новых вариантов, либо с помощью только определенных столбцов, либо путем исключения некоторых, используйте модуль [Выбор столбцов в наборе данных](select-columns-in-dataset.md) , чтобы изолировать столбцы, которые вы хотите использовать, прежде чем использовать **смоте**.
  
    В противном случае создание новых вариантов с помощью **смоте** будет основано на **всех** столбцах, предоставленных в качестве входных данных. По крайней мере один столбец в столбцах компонента является числовым.
  
3.  Убедитесь, что выбран столбец, содержащий метку или целевой класс.  **Смоте** принимает только двоичные метки.
  
4.  Модуль **смоте** автоматически определяет класс миноритария в столбце Метка, а затем получает все примеры для класса миноритария. Все столбцы не могут иметь значение NaN.
  
5.  В параметре **смоте в процентах** введите целое число, указывающее целевой процент вариантов доли миноритария в выходном наборе данных. Например:  
  
    - Введите **0** (%). Модуль СМОТЕ возвращает тот же набор данных, который вы указали в качестве входных данных, но не добавим новые доли. В этом наборе данных класс пропорции не изменился.  
  
    -   Введите **100** (%). Модуль СМОТЕ создает новые доли миноритария, добавляя то же количество доли миноритария, которое было в исходном наборе данных. Так как СМОТЕ не увеличивает количество большинства случаев, теперь изменяется пропорция всех вариантов каждого класса.  
  
    -   Введите **200** (%). Модуль удваивает долю доли миноритария по сравнению с исходным набором данных. Это **не** приводит к удвоению числа таких случаев, как раньше.  Вместо этого размер набора данных увеличивается таким образом, что количество большинства вариантов остается неизменным, а количество миноритарий увеличивается до тех пор, пока оно не будет соответствовать требуемому процентному значению.  
  
    > [!NOTE]
    > Используйте только кратные 100 для СМОТЕ в процентах.

6.  Используйте параметр **число ближайших соседей** , чтобы определить размер пространства функций, используемого алгоритмом смоте при построении новых вариантов. *Ближайший сосед* — это строка данных (случай), похожая на некоторый целевой вариант. Расстояние между любыми двумя вариантами измеряется путем объединения взвешенных векторов всех компонентов.  
  
     + Увеличивая число ближайших соседей, вы получаете функции в большинстве случаев.
     + Сохраняя число ближайших соседних соседей, вы используете функции, которые более близки к исходным примерам.  
  
7. Введите значение в текстовое поле **случайное** начало, если необходимо обеспечить одинаковые результаты при выполнении одного и того же конвейера с теми же данными. В противном случае модуль создает случайное начальное значение на основе значений тактовых частот процессора при развертывании конвейера, что может привести к слегка разным результатам при выполнении.

8. Запустили конвейер.  
  
     Выходные данные модуля — это набор данных, содержащий исходные строки, а также ряд добавленных строк с долями миноритария.  

## <a name="technical-notes"></a>Технические примечания

+ При публикации модели, использующей модуль **смоте** , удалите **смоте** из прогнозного конвейера перед его публикацией в качестве веб-службы.  Причина заключается в том, что СМОТЕ предназначен для улучшения модели во время обучения и не предназначен для оценки.  Если опубликованный прогнозный конвейер содержит модуль СМОТЕ, может возникнуть ошибка.

+ Часто можно получить лучшие результаты, если вы примените очистку отсутствующих значений или другие преобразования для исправления данных перед применением СМОТЕ. 

+ Некоторые исследователи просматривают, эффективно ли СМОТЕ для больших или разреженных данных, например, используемых в классификации текста или Genomics. В этом документе есть хорошая сводка по влиянию и теоретической допустимости применения СМОТЕ в таких случаях: [благус и Луса: смоте для больших данных несбалансированных классов](https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-14-106) .

    Если СМОТЕ не действует в наборе данных, другие подходы, которые вы можете рассмотреть, включают различные методы для избыточной выборки доли миноритария или недовыборки в большинстве случаев, а также методы ансамблей, которые помогают изучать непосредственно, используя кластеризацию, баггинг или Адаптивное повышение производительности.


## <a name="next-steps"></a>Дальнейшие действия

См. [набор модулей, доступных](module-reference.md) машинное обучение Azure службе. 

