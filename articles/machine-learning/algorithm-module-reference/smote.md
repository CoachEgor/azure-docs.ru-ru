---
title: SMOTE
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль SMOTE в Azure Machine Learning для увеличения числа примеров с низкой частотой в наборе данных с помощью чрезмерной выборки.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/16/2019
ms.openlocfilehash: ed6d9e86143c3a5d6c97c4bd92a07c258bbd1bbc
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79477465"
---
# <a name="smote"></a>SMOTE

В этой статье описывается, как использовать модуль SMOTE в конструкторе машинного обучения Azure (предварительный просмотр) для увеличения числа недопредставленных случаев в наборе данных, который используется для машинного обучения. МРОТЯвляется является лучшим способом увеличения числа редких случаев, чем просто дублирование существующих случаев.  

Вы подключаете модуль SMOTE к *несбалансированному*набору данных. Существует множество причин, по которым набор данных может быть несбалансированным. Например, категория, на которая вы ориентируетесь, может быть редкой для популяции, или данные может быть трудно собрать. Как правило, вы используете SMOTE, когда *класс,* который вы хотите проанализировать, недопредставлен. 
  
Модуль возвращает набор данных, содержащий исходные образцы. Он также возвращает ряд синтетических образцов меньшинства, в зависимости от процента, который вы указываете.  
  
## <a name="more-about-smote"></a>Подробнее о МРОТ

Синтетическая методика перевыборки меньшинства (SMOTE) является статистическим методом для увеличения числа случаев в вашем наборе данных сбалансированным образом. Модуль работает путем создания новых экземпляров из существующих случаев меньшинства, которые вы поставляете в качестве входных данных. Эта реализация SMOTE *не* меняет числа случаев большинства.

Новые экземпляры представляют собой не только копии существующих дел меньшинств. Вместо этого алгоритм берет образцы *пространства объектов* для каждого целевого класса и его ближайших соседей. Затем алгоритм генерирует новые примеры, которые сочетают в себе особенности целевого корпуса с функциями соседей. Такой подход увеличивает функции, доступные для каждого класса и обобщает выборку.
  
SMOTE принимает весь набор данных в качестве ввода, но это увеличивает процент только случаев меньшинства. Например, предположим, что у вас есть несбалансированный набор данных, где только 1 процент случаев имеют целевое значение A (класс меньшинства), а 99 процентов случаев имеют значение B. Чтобы увеличить процент случаев меньшинств в два раза выше предыдущего процента, вы введете **200** для **SMOTE процент** в свойствах модуля.  
  
## <a name="examples"></a>Примеры  

Рекомендуем попробовать использовать модуль SMOTE с меньшим набором данных, чтобы увидеть, как он работает. В следующем примере используется набор данных для донорства крови, доступный в дизайнере машинного обучения Azure.
  
Если добавить набор данных в конвейер и выбрать **визуализацию** на выходе набора данных, то можно увидеть, что из 748 строк или случаев в наборе данных 570 случаев (76 процентов) относятся к классу 0, а 178 случаев (24 процента) относятся к классу 1. Хотя этот результат не очень несбалансированный, класс 1 представляет людей, которые сдали кровь, так что эти строки содержат *пространство функции,* которые вы хотите моделировать.
 
Чтобы увеличить количество случаев, можно установить значение **процента SMOTE,** используя кратные 100, следующим образом:

||Класс 0|Класс 1|total|  
|-|-------------|-------------|-----------|  
|Исходный набор данных<br /><br /> (эквивалент =  **процентному проценту SMOTE****0**)|570<br /><br /> 76%|178<br /><br /> 24%|748|  
|**Процент МРОТ** = **100**|570<br /><br /> 62%|356<br /><br /> 38%|926|  
|**Процент МРОТ** = **200**|570<br /><br /> 52%|534<br /><br /> 48 %|1104|  
|**Процент МРОТ** = **300**|570<br /><br /> 44%|712<br /><br /> 56%|1,282|  
  
> [!WARNING]
> Увеличение числа случаев с помощью SMOTE не гарантирует производить более точные модели. Попробуйте pipelining с различными процентами, различными наборами функций и различными числами ближайших соседей, чтобы увидеть, как добавление случаев влияет на вашу модель.  
  
## <a name="how-to-configure-smote"></a>Как настроить SMOTE
  
1.  Добавьте модуль SMOTE в конвейер. Вы можете найти модуль под **модулями преобразования данных,** в категории **манипуляции.**

2. Подключите набор данных, который необходимо увеличить. Если вы хотите указать пространство функции для построения новых корпусов, либо используя только определенные столбцы, либо исключив некоторые из них, используйте выбранные столбцы в модуле [Набора данных.](select-columns-in-dataset.md) Затем можно изолировать столбцы, которые вы хотите использовать, прежде чем использовать SMOTE.
  
    В противном случае создание новых случаев через SMOTE основано на *всех* столбцах, которые вы предоставляете в качестве входных данных. По крайней мере одна колонка столбцов объектов является числовой.
  
3.  Убедитесь, что столбец, содержащий метку, или целевой класс, выбран. SMOTE принимает только бинарные метки.
  
4.  Модуль SMOTE автоматически определяет класс меньшинства в столбце метки, а затем получает все примеры для класса меньшинства. Все столбцы не могут иметь значения NaN.
  
5.  В процентном варианте **SMOTE введите** целое число, которое указывает целевой процент случаев меньшинства в наборе данных вывода. Пример:  
  
    - Вы вводите **0**. Модуль SMOTE возвращает точно такой же набор данных, который вы предоставили в качестве ввода. Он не добавляет новых случаев меньшинства. В этом наборе данных пропорция класса не изменилась.  
  
    - Вы **вводите 100**. Модуль SMOTE генерирует новые случаи обращения меньшинств. Он добавляет такое же количество случаев меньшинств, которые были в первоначальном наборе данных. Поскольку SMOTE не увеличивает число случаев большинства, доля случаев каждого класса изменилась.  
  
    - Вы **вводите 200**. Модуль удваивает процент случаев меньшинств по сравнению с исходным набором данных. Это *не* приводит к тому, что число случаев, связанных с меньшинствами, в два раза больше, чем раньше. Скорее, размер набора данных увеличивается таким образом, что число случаев большинства остается неизменным. Число случаев, связанных с меньшинствами, увеличивается до тех пор, пока оно не будет совпадать с желаемым процентным значением.  
  
    > [!NOTE]
    > Используйте только кратные 100 для процента SMOTE.

6.  Используйте опцию **«Число ближайших соседей»,** чтобы определить размер пространства функций, которое алгоритм SMOTE использует при построении новых кейсов. Ближайшим соседом является ряд данных (случай), который похож на целевой случай. Расстояние между двумя случаями измеряется путем объединения взвешенных векторов всех признаков.  
  
    + Увеличивая количество ближайших соседей, вы получаете функции из большего числа случаев.
    + Сохраняя низкое число ближайших соседей, вы используете функции, которые больше похожи на те, что есть в первоначальном образце.  
  
7. Введите значение в поле **случайных семян,** если вы хотите обеспечить те же результаты в течение нескольких запусков того же конвейера, с теми же данными. В противном случае модуль генерирует случайное семя на основе значений часов процессора при развертывании конвейера. Генерация случайного семени может привести к несколько иным результатам в течение пробегов.

8. Отправить конвейер.  
  
   Вывод модуля представляет собой набор данных, содержащий исходные строки плюс ряд добавленных строк с случаями меньшинства.  

## <a name="technical-notes"></a>Технические примечания

+ При публикации модели, используюейой модуль **SMOTE,** удалите **SMOTE** из прогностического конвейера до того, как он будет опубликован в виде веб-сервиса. Причина в том, что SMOTE предназначен для улучшения модели во время обучения, а не для забил. Ошибка может быть допущена, если опубликованный прогностический конвейер содержит модуль SMOTE.

+ Часто можно получить лучшие результаты, если очистить недостающие значения или применить другие преобразования для исправления данных, прежде чем применять SMOTE. 

+ Некоторые исследователи исследовали, является ли SMOTE эффективным на высокомерных или редких данных, таких как данные, используемые в классификации текста или геномных наборов данных. В настоящем документе имеется хорошее резюме последствий и теоретической обоснованности применения SMOTE в таких случаях: [Blagus и Lusa: SMOTE для высокомерных классовых несбалансированных данных.](https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-14-106)

+ Если SMOTE не эффективен в наборе данных, другие подходы, которые вы могли бы рассмотреть, включают:
  + Методы чрезмерной выборки случаев заболевания меньшинств или недовыборы в большинстве случаев.
  + Ансамбль методы, которые помогают учащемуся непосредственно с помощью кластеризации, мешки, или адаптивного повышения.


## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с [набором модулей, доступных](module-reference.md) для машинного обучения Azure. 

