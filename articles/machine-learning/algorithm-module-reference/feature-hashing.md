---
title: Ссылка на модуль функции Хэшинг
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль функций Хэшинга в машинном обучении Azure для featurize текстовых данных.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/22/2020
ms.openlocfilehash: 7178417a5c20afe5b1ed02bc526ec174704962df
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79456256"
---
# <a name="feature-hashing-module-reference"></a>Ссылка на модуль функции Хэшинг

В этой статье описывается модуль, включенный в конструктор машинного обучения Azure (предварительный просмотр).

Используйте модуль Feature Hashing для преобразования потока английского текста в набор инктерных функций. Затем вы можете передать этот набор хэшированных функций алгоритму машинного обучения для обучения модели текстовой аналитики.

Функциональность хэширования функций, представленная в этом модуле, основана на рамочной системе nimbusml. Для получения дополнительной [NgramHash class](https://docs.microsoft.com/python/api/nimbusml/nimbusml.feature_extraction.text.extractor.ngramhash?view=nimbusml-py-latest)информации см.

## <a name="what-is-feature-hashing"></a>Что такое хэширование функций?

Функция хэширования работ путем преобразования уникальных токенов в несколько. Он работает на точных строках, которые вы предоставляете в качестве ввода, и не выполняет никакого лингвистического анализа или предварительной обработки. 

Например, возьмите набор простых предложений, как эти, а затем рейтинг настроения. Предположим, что вы хотите использовать этот текст для создания модели.

|Текст пользователя|Мнение|
|--------------|---------------|
|Я любил эту книгу|3|
|Я ненавидел эту книгу|1|
|Эта книга была велика|3|
|Я люблю книги|2|

Внутренне модуль Функции Хэшинг создает словарь n-граммов. Например, список биграмм для этого набора данных будет примерно таким образом:

|Срок (биграммы)|Частота|
|------------|---------------|
|Эта книга|3|
|Я любила|1|
|Я ненавидела|1|
|Я люблю|1|

Вы можете контролировать размер n-граммов с помощью **N-грамм** собственности. Если вы выбираете биграммы, unigrams также вычисляются. Словарь будет также включать в себя отдельные термины, как эти:

|Срок (униграммы)|Частота|
|------------|---------------|
|книга|3|
|I|3|
|книги|1|
|Был|1|

После построения словаря модуль Feature Hashing преобразует термины словаря в значения хэша. Затем вычисляется, использовалась ли функция в каждом конкретном случае. Для каждой строки текстовых данных модуль выводит набор столбцов, по одному столбце для каждой хэшной функции.

Например, после хэширования столбцы объектов могут выглядеть примерно так:

|Rating|Хэш-признак 1|Хэшинг функция 2|Хэшинг функция 3|
|-----|-----|-----|-----|
|4|1|1|0|
|5|0|0|0|

* Если значение в столбце 0, строка не содержит хэшированную функцию.
* Если значение 1, строка содержала функцию.

Хэширование функций позволяет представлять текстовые документы переменной длины в качестве числовых векторов объектов одинаковой длины для уменьшения размерности. Если вы попытается использовать текстовый столбец для обучения, как есть, это будет рассматриваться как категоричный столбец объекта со многими различными значениями.

Числовые выходы также позволяют использовать общие методы машинного обучения, включая классификацию, кластеризм и поиск информации. Поскольку операции поиска могут использовать целые хэши, а не сравнения строк, получение весов функции также гораздо быстрее.

## <a name="configure-the-feature-hashing-module"></a>Настройка модуля хэширования функций

1.  Добавьте модуль функции Хэшинга в конвейер в проектировщике.

1. Подключите набор данных, содержащий текст, который необходимо проанализировать.

    > [!TIP]
    > Поскольку хэширование функций не выполняет лексических операций, таких как стебление или усечение, иногда можно получить лучшие результаты путем предварительной обработки текста, прежде чем применить хэширование функций. 

1. Установите **целевые столбцы** к столбику текста, которые требуется преобразовать в хэшированные объекты. Имейте в виду, что:

    * Столбцы должны быть типом данных строки.
    
    * Выбор нескольких текстовых столбцов может оказать значительное влияние на размерность объектов. Например, число столбцов для 10-битного хэша составляет от 1024 для одного столбца до 2048 для двух столбцов.

1. Используйте **хэширование bitsize,** чтобы указать количество битов для использования при создании таблицы хэша.
    
    Размер бита по умолчанию составляет 10. Для многих проблем это значение является адекватным. Вам может понадобиться больше места, чтобы избежать столкновений, в зависимости от размера n-грамм словаря в учебном тексте.
    
1. Для **N-граммов,** введите номер, который определяет максимальную длину n-граммов, чтобы добавить в учебный словарь. N-грамм представляет собой последовательность *n* слов, рассматривается как уникальный блок.

    Например, если вы введете 3, будут созданы униграммы, биграммы и триграммы.

1. Отправить конвейер.

## <a name="results"></a>Результаты

После завершения обработки модуль выводит преобразованный набор данных, в котором исходный столбец текста был преобразован в несколько столбцов. Каждый столбец представляет собой функцию в тексте. В зависимости от того, насколько важен словарь, полученный набор данных может быть большим:

|Название столбца 1|Столбец типа 2|
|-------------------|-------------------|
|USERTEXT|Исходная колонка данных|
|Настроения|Исходная колонка данных|
|USERTEXT - Хэшинг функция 1|Хэшед наяток|
|USERTEXT - Хэшинг функция 2|Хэшед наяток|
|USERTEXT - Хэшинг функция n|Хэшед наяток|
|USERTEXT - Хэшинг функция 1024|Хэшед наяток|

После создания преобразованного набора данных его можно использовать в качестве ввода в модуль Модели поезда.
 
## <a name="best-practices"></a>Рекомендации

Следующие рекомендации помогут вам получить максимальную отдачу от модуля Feature Hashing:

* Добавьте модуль Preprocess Text перед использованием функции Хэшинг для предварительной обработки входной текста. 

* Добавьте модуль Select Columns после модуля Feature Hashing для удаления текстовых столбцов из набора выходных данных. После сгенерирования функций хэширования не нужны текстовые столбцы.
    
* Рассмотрите возможность использования этих вариантов предварительной обработки текста для упрощения результатов и повышения точности:

    * Нарушение слов
    * Остановка удаления слов
    * Нормализация дела
    * Удаление знаков препинания и специальных символов
    * Морфология  

Оптимальный набор методов предварительной обработки, которые следует применять в любом решении, зависит от домена, словаря и бизнес-потребности. конвейер с вашими данными, чтобы увидеть, какие методы обработки текста являются наиболее эффективными.

## <a name="next-steps"></a>Дальнейшие действия
            
Ознакомьтесь с [набором модулей, доступных](module-reference.md) для машинного обучения Azure 
