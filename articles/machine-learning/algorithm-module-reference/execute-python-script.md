---
title: 'Выполнение скрипта Python: Справочник по модулям'
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль выполнение скрипта Python в Машинное обучение Azure для выполнения кода Python.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 10/22/2019
ms.openlocfilehash: 1ba10bf682d900a45f345f2ebe2707ba1275e94e
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73497862"
---
# <a name="execute-python-script-module"></a>Выполнить модуль скрипта Python

В этой статье описывается модуль в Машинное обучение Azure Designer (Предварительная версия).

Используйте этот модуль для выполнения кода Python. Дополнительные сведения об архитектуре и принципах разработки Python см. [в следующей статье](https://docs.microsoft.com/azure/machine-learning/machine-learning-execute-python-scripts).

С помощью Python можно выполнять задачи, которые сейчас не поддерживаются существующими модулями, такими как:

+ Визуализация данных с помощью `matplotlib`
+ Использование библиотек Python для перечисления наборов данных и моделей в рабочей области
+ Чтение, Загрузка и обработка данных из источников, не поддерживаемых модулем [Импорт данных](./import-data.md)
+ Запуск собственного кода глубокого обучения 


Машинное обучение Azure использует дистрибутив Python Anaconda, который включает множество стандартных служебных программ для обработки данных. Мы будем обновлять версию Anaconda автоматически. Текущая версия:
 -  Anaconda 4.5 + дистрибутив для Python 3,6 

Предварительно установленные пакеты:
-  asn1crypto = = 0.24.0
- attr = = 19.1.0
- Azure-Common = = 1.1.18
- Azure-Storage-BLOB = = 1.5.0
- Azure-Storage — Common = = 1.4.0
- Сертификация = = 2019.3.9
- кффи = = 1.12.2
- чардет = = 3.0.4
- Шифрование = = 2.6.1
- дистрибутив = = 1.4.0
- IDNA = = 2.8
- жсонсчема = = 3.0.1
- lightgbm = = 2.2.3
- more-итертулс = = 6.0.0
- NumPy = = 1.16.2
- Pandas = = 0.24.2
- Пиллов = = 6.0.0
- PIP = = 19.0.3
- pyarrow = = 0.12.1
- пикпарсер = = 2.19
- пикриптодомекс = = 3.7.3
- пирсистент = = 0.14.11
- Python-датеутил = = 2.8.0
- питз = = 2018.9
- запросы = = 2.21.0
- scikit — сведения = = 0.20.3
- SciPy = = 1.2.1
- setuptools = = 40.8.0
- шесть = = 1.12.0
- Torch = = 1.0.1. post2
- торчвисион = = 0.2.2. post3
- urllib3 = = 1.24.1
- Wheel = = 0.33.1 

 Чтобы установить другие пакеты, отсутствующие в списке предварительно установленных, например *scikit-Разное*, добавьте в скрипт следующий код: 

 ```python
import os
os.system(f"pip install scikit-misc")
```

## <a name="how-to-use"></a>Использование

Модуль **выполнение скрипта Python** содержит пример кода Python, который можно использовать в качестве отправной точки. Чтобы настроить модуль **выполнения скрипта Python** , укажите набор входных данных и код Python для выполнения в текстовом поле **скрипт Python** .

1. Добавьте модуль **выполнение скрипта Python** в конвейер.

2. Добавьте и подключитесь к наборам данных **dataSet1** из конструктора, которые вы хотите использовать для ввода. Сослаться на этот набор данных в скрипте Python как **DataFrame1**.

    Использование набора данных является необязательным, если требуется создать данные с помощью Python или использовать код Python для импорта данных непосредственно в модуль.

    Этот модуль поддерживает добавление второго набора данных в **DataSet2**. Сослаться на второй набор данных в скрипте Python как DataFrame2.

    Наборы данных, хранящиеся в Машинное обучение Azure, автоматически преобразуются в данные **Pandas** . frames при загрузке с помощью этого модуля.

    ![Выполнить входную карту Python](media/module/python-module.png)

4. Чтобы включить новые пакеты или код Python, добавьте сжатый ZIP-файл, содержащий эти настраиваемые ресурсы, в **пакет сценариев**. Вход в **пакет сценариев** должен быть ZIP-файлом, уже загруженным в рабочую область. 

    Любой файл, содержащийся в загруженном ZIP-архиве, можно использовать во время выполнения конвейера. Если архив содержит структуру каталогов, структура сохраняется, но необходимо добавить в путь каталог с именем **src** .

5. В текстовом поле **скрипт Python** введите или вставьте допустимый скрипт Python.

    Текстовое поле **скрипта Python** предварительно заполнено некоторыми инструкциями в комментариях и примерами кода для доступа к данным и вывода данных. Этот код необходимо изменить или заменить. Обязательно следуйте соглашениям Python о отступах и регистре.

    + Скрипт должен содержать функцию с именем `azureml_main` в качестве точки входа для этого модуля.
    + Функция точки входа может содержать до двух входных аргументов: `Param<dataframe1>` и `Param<dataframe2>`
    + ZIP-файлы, подключенные к третьему порту ввода, являются распакованными и хранятся в каталоге, `.\Script Bundle`, который также добавляется в `sys.path`Python. 

    Поэтому, если ZIP-файл содержит `mymodule.py`, импортируйте его с помощью `import mymodule`.

    + В конструктор можно вернуть два набора данных, которые должны быть последовательностью типов `pandas.DataFrame`. Вы можете создавать другие выходные данные в коде Python и записывать их непосредственно в службу хранилища Azure.

6. Запустите конвейер или выберите модуль и нажмите кнопку **Выполнить выбранные** , чтобы выполнить только скрипт Python.

    Все данные и код загружаются в виртуальную машину и выполняются с помощью указанной среды Python.

## <a name="results"></a>Результаты

Результаты любых вычислений, выполняемых внедренным кодом Python, должны быть предоставлены как Pandas. Таблица данных, которая автоматически преобразуется в формат набора Машинное обучение Azure, чтобы можно было использовать результаты с другими модулями в конвейере.

Модуль возвращает два набора данных:  
  
+ **Набор данных Results 1**, определяемый первым возвращенным Pandas кадр данных в скрипте Python

+ **Result DataSet 2**, определяемый вторым возвращенным кадром данных Pandas в скрипте Python


## <a name="next-steps"></a>Дальнейшие действия

См. [набор модулей, доступных](module-reference.md) для машинное обучение Azure. 