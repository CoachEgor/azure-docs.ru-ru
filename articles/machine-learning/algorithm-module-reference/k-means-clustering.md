---
title: 'Кластеризация K-Средств: Ссылка на модуль'
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль кластеризации K-Means в машинном обучении Azure для обучения моделям кластеризации.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/19/2020
ms.openlocfilehash: 9606768288cc74afc24491149eb471944f45e2dc
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77921170"
---
# <a name="module-k-means-clustering"></a>Модуль: Кластеризация K-средств

В этой статье описывается, как использовать модуль *кластеризации K-Means* в конструкторе машинного обучения Azure (предварительный просмотр) для создания неподготовленной модели кластеризации K-средств. 
 
K-средства является одним из самых простых и наиболее известных *неконтролируемых* алгоритмов обучения. Алгоритм можно использовать для различных задач машинного обучения, таких как: 

* [Обнаружение ненормальных данных](https://msdn.microsoft.com/magazine/jj891054.aspx).
* Кластеризация текстовых документов.
* Анализ наборов данных перед использованием других методов классификации или регрессии. 

Чтобы создать модель кластеризации, вы:

* Добавьте этот модуль в конвейер.
* Подключите набор данных.
* Набор параметров, таких как количество кластеров, которые вы ожидаете, метрики расстояния для использования в создании кластеров, и так далее. 
  
После настройки гиперпараметров модуля вы подключите неподготовленную модель к [модели кластеризации поездов.](train-clustering-model.md) Поскольку алгоритм K-означает неконтролируемый метод обучения, столбец метки не является обязательным. 

+ Если данные включают метку, можно использовать значения меток для руководства выбором кластеров и оптимизацией модели. 

+ Если данные не имеют метки, алгоритм создает кластеры, представляющие возможные категории, основанные исключительно на данных.  

##  <a name="understand-k-means-clustering"></a>Понимание кластеризации K-средств
 
Как правило, кластеризация использует итеративные методы для группирования случаев в наборе данных в кластеры, обладающие схожими характеристиками. Эти группировки полезны для изучения данных, выявления аномалий в данных и, в конечном итоге, для прогнозирования. Модели кластеризации также могут помочь вам определить связи в наборе данных, которые вы не могли бы логически получить при просмотре или простом наблюдении. По этим причинам кластеризация часто используется на ранних стадиях задач машинного обучения, чтобы исследовать данные и обнаруживать неожиданные корреляции.  
  
 При настройке модели кластеризации с помощью метода K-means необходимо указать целевое число *k,* которое указывает количество *центроидов,* которые вы хотите в модели. Центроид является точкой, которая является репрезентативной для каждого кластера. Алгоритм K-означает присваивает каждую входящие точки данных одному из кластеров путем минимизации суммы квадратов внутри кластера. 
 
Когда он обрабатывает обучающие данные, алгоритм K-средств начинается с первоначального набора случайно выбранных центроидов. Центроиды служат отправной точкой для кластеров, и они применяют алгоритм Ллойда для итеративного уточнения их местоположения. Алгоритм K-означает останавливает создание и уточнение кластеров, когда он отвечает одному или нескольких из этих условий:  
  
-   Центроиды стабилизируются, что означает, что кластерные назначения для отдельных точек больше не изменяются, и алгоритм сходился на решении.  
  
-   Алгоритм выполнил указанное число итераций.  
  
 После завершения этапа обучения используется модуль [Присваиваем данных кластеров](assign-data-to-clusters.md) для присвоения новых случаев одному из найденных кластеров с помощью алгоритма K-средств. Вы выполняете кластерное назначение, вычисляя расстояние между новым корпусом и центроидом каждого кластера. Каждый новый случай назначается кластеру с ближайшим центроидом.  

## <a name="configure-the-k-means-clustering-module"></a>Настройка модуля кластеризации K-Means
  
1.  Добавьте модуль **кластеризации K-Means** в конвейер.  
  
2.  Чтобы указать, как необходимо обучить модель, выберите опцию **«Создать тренер».**  
  
    -   **Единый параметр**: Если вы знаете точные параметры, которые вы хотите использовать в модели кластеризации, вы можете предоставить определенный набор значений в качестве аргументов.  
  
3.  Для **количества центроидов**введите количество кластеров, с них вы хотите, чтобы алгоритм начал с.  
  
     Модель не гарантирует точное количество кластеров. Алгоритм начинается с этого количества точек данных и итерирует, чтобы найти оптимальную конфигурацию.  
  
4.  **Инициализация** свойств используется для определения алгоритма, используемого для определения начальной конфигурации кластера.  
  
    -   **Первый N**: Некоторые начальные количества точек данных выбираются из набора данных и используются в качестве исходного средства. 
    
         Этот метод также называется *методом Forgy.*  
  
    -   **Случайный**: Алгоритм случайным образом помещает точку данных в кластере, а затем вычисляет исходное среднее, чтобы быть центром случайно назначенных точек кластера. 

         Этот метод также называется *методом случайного раздела.*  
  
    -   **K-Средства**: Это метод по умолчанию для инициализации кластеров.  
  
         Алгоритм **K-средств** был предложен в 2007 году Дэвидом Артуром и Сергеем Васильвицким, чтобы избежать плохой кластеризации по стандартному алгоритму K-средств. **K-средства »** улучшают стандартные K-средства, используя другой метод для выбора исходных кластерных центров.  
  
    
5.  Для **семян случайных чиней**, дополнительно введите значение для использования в качестве семян для кластера инициализации. Это значение может оказать значительное влияние на выбор кластеров.  
  
6.  Для **Metric**выберите функцию для измерения расстояния между кластерными векторами или между новыми точками данных и случайно выбранным центроидом. Azure Machine Learning поддерживает следующие показатели расстояния кластера:  
  
    -   **Евклидов**: Евклидово расстояние обычно используется в качестве меры кластерного рассеяния для кластеризации K-средств. Эта метрика предпочтительна, так как она сводит к минимуму среднее расстояние между точками и центроидами.
  
7.  Для **итераций**введите количество раз, когда алгоритм должен итерировать данные обучения, прежде чем он завершит выбор центроидов.  
  
     Можно настроить этот параметр, чтобы сбалансировать точность с временем обучения.  
  
8.  Для **режима присебе тесьобий**выберите опцию, которая определяет, как следует обрабатывать столбец метки, если он присутствует в наборе данных.  
  
     Поскольку кластеризация K-означает является неконтролируемым методом машинного обучения, метки не являются обязательными. Однако, если в наборе данных уже есть столбец метки, можно использовать эти значения для руководства выбором кластеров, или можно указать, что значения будут проигнорированы.  
  
    -   **Игнорировать столбец метки**: Значения в столбце метки игнорируются и не используются при построении модели.
  
    -   **Заполните недостающие значения:** Значения столбца метки используются в качестве функций для создания кластеров. Если в строках отсутствует метка, значение вменяется с помощью других функций.  
  
    -   **Перезапись из ближайшего к центру**: Значения столбца метки заменяются прогнозируемыми значениями метки, используя метку точки, которая ближе всего к текущему центроиду.  

8.  Выберите опцию **нормализации,** если вы хотите нормализовать объекты перед тренировкой.
  
     Если применить нормализацию, перед `[0,1]` тренировкой, точки данных нормализуются minMaxNormalizer.

10. Обучение модели.  
  
    -   При установке **режима создания тренера** в **единый параметр**добавьте помеченный набор данных и обучите модель с помощью модуля [Train Clustering Model.](train-clustering-model.md)  
  
## <a name="results"></a>Результаты

После того как вы закончили настройку и обучение модели, у вас есть модель, которую можно использовать для создания баллов. Тем не менее, существует несколько способов обучения модели и несколько способов просмотра и использования результатов: 

### <a name="capture-a-snapshot-of-the-model-in-your-workspace"></a>Захват снимка модели в рабочем пространстве

Если вы использовали модуль [модели кластеризации поездов:](train-clustering-model.md)

1. Выберите модуль **модели кластеризации поездов** и откройте правую панель.

2. Выберите **вкладку Выводы.** Выберите значок **набора данных Регистра,** чтобы сохранить копию обученной модели.

Сохраненная модель представляет данные обучения во время сохранения модели. Если вы позже обновите обучающие данные, используемые в конвейере, это не обновит сохраненную модель. 

### <a name="see-the-clustering-result-dataset"></a>Просмотрите набор данных результатов кластеризации 

Если вы использовали модуль [модели кластеризации поездов:](train-clustering-model.md)

1. Нажмите на модуль **модели кластеризации поездов.**

2. Выберите **Визуализацию**.

### <a name="tips-for-generating-the-best-clustering-model"></a>Советы по созданию наилучшей модели кластеризации  

Известно, что процесс *посева,* который используется во время кластеризации, может существенно повлиять на модель. Посев означает первоначальное размещение точек в потенциальные центроиды.
 
Например, если набор данных содержит много выбросов, и выбирается выброс для семени кластеров, никакие другие точки данных не будут хорошо вписываться в этот кластер, и кластер может быть синглтоном. То есть, он может иметь только одно очко.  
  
Эту проблему можно избежать несколькими способами:  
  
-   Измените количество центроидов и попробуйте несколько значений семян.  
  
-   Создайте несколько моделей, изменяя метрику или итерируя больше.  
  
Как правило, с помощью моделей кластеризации любая конфигурация приведет к локальноопопизированного набора кластеров. Другими словами, набор кластеров, который возвращается моделью, соответствует только текущим точкам данных и не обобщается с другими данными. Если вы используете другую начальную конфигурацию, метод K-means может найти другую, превосходную конфигурацию. 

## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с [набором модулей, доступных](module-reference.md) для машинного обучения Azure. 
