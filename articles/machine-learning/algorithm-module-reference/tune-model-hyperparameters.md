---
title: Настройка параметров модели
titleSuffix: Azure Machine Learning service
description: Узнайте, как использовать модуль настройки параметров модели в Машинное обучение Azure службы для выполнения очистки параметров в модели для определения оптимальных параметров параметров.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/16/2019
ms.openlocfilehash: 06adfe66bfe894d7b3c95e3d416da866c7d103b3
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73515659"
---
# <a name="tune-model-hyperparameters"></a>Настройка параметров модели

В этой статье описывается, как использовать модуль [настройки модели с параметрами](tune-model-hyperparameters.md) в машинное обучение Azure конструктора (Предварительная версия) для определения оптимальных параметров для конкретной модели машинного обучения. Модуль создает и тестирует несколько моделей, используя различные сочетания параметров, и сравнивает метрики по всем моделям, чтобы получить сочетание параметров. 

*Параметры* термов и *параметров* могут быть запутанными. *Параметры* модели задаются на панели «Свойства». По сути, этот модуль выполняет настройку *параметров по заданным параметрам* и изучает оптимальный набор _параметров_, которые могут различаться для каждого конкретного дерева принятия решений, набора данных или метода регрессии. Процесс поиска оптимальной конфигурации иногда называется *настройкой*. 

Модуль поддерживает следующий метод для поиска оптимальных параметров модели. 

**Интегрированная тренировка и**Настройка. вы настраиваете набор параметров для использования, а затем позволяете модулю выполнять итерации по нескольким сочетаниям, измеряя точность до тех пор, пока не будет найдена лучшая модель. При работе с большинством модулей для обучения можно выбрать параметры, которые следует изменить в ходе обучающего процесса, которые должны оставаться исправленными.

    Depending on how long you want the tuning process to run, you might decide to exhaustively test all combinations, or you could shorten the process by establishing a grid of parameter combinations and testing a randomized subset of the parameter grid.

 Этот метод создает обученную модель, которую можно сохранить для повторного использования.  

### <a name="related-tasks"></a>Связанные задачи

+ Перед настройкой примените выбор компонентов, чтобы определить столбцы или переменные с наибольшим значением сведений.

## <a name="how-to-configure-tune-model-hyperparameters"></a>Настройка параметров настройки модели  

Как правило, изучение оптимальных параметров для конкретной модели машинного обучения требует значительного конвейера.

### <a name="train-a-model-using-a-parameter-sweep"></a>Обучение модели с помощью очистки параметров  

В этом разделе описывается выполнение базовой очистки параметров, которая обучает модель с помощью модуля [настройки модели](tune-model-hyperparameters.md) .

1.  Добавьте модуль [Настройка параметров модели](tune-model-hyperparameters.md) в конвейер в конструктор.

2.  Соедините обученную модель с крайним левым входом. 

3. Задайте для параметра **режим создания инструктора** значение **диапазон параметров** и используйте **Построитель диапазонов** , чтобы указать диапазон значений для использования в параметре очистки.  

    Почти все модули классификации и регрессии поддерживают встроенную вычистку параметров. Для тех, кто не поддерживает настройку диапазона параметров, можно проверить только доступные значения параметров.

    Можно вручную задать значение для одного или нескольких параметров, а затем вычистить остальные параметры. Это может сэкономить некоторое время.

4.  Добавьте набор данных, который необходимо использовать для обучения, и соедините его с средним входом [параметров настройки модели](tune-model-hyperparameters.md).  

    При необходимости, если имеется набор данных с тегами, его можно подключить к крайнему правому порту ввода (**необязательный проверочный набор данных**). Это позволяет измерять точность во время обучения и настройки.

5.  На панели **Свойства** окна [Настройка параметров модели](tune-model-hyperparameters.md)выберите значение для **параметра режим очистки параметров**. Этот параметр определяет способ выбора параметров.

    - **Вся сетка**: при выборе этого параметра модуль выполняет циклическую выборку по сетке, предопределенную системой, чтобы попробовать различные сочетания и определить лучший. Этот параметр полезен в тех случаях, когда неизвестно, какие параметры лучше всего подходят, и хотите попробовать все возможное сочетание значений.

    - **Случайная очистка**. при выборе этого параметра модуль будет случайным образом выбирать значения параметров через определенный системой диапазон. Необходимо указать максимальное число запусков, которое должен выполнить модуль. Этот параметр полезен в случаях, когда необходимо увеличить производительность модели с помощью выбранных метрик, но по-прежнему позволяет экономить вычислительные ресурсы.

    При выборе случайного значения можно указать **Максимальное число запусков при случайном повороте**, которое означает, сколько раз необходимо обучить модель, используя случайное сочетание значений параметров.

6.  В поле **столбец меток**запустите селектор столбцов, чтобы выбрать один столбец меток.

7.  **Максимальное число запусков при случайном**выходе: при выборе случайного значения можно указать, сколько раз необходимо обучить модель, используя случайное сочетание значений параметров.

    **Максимальное число запусков в случайной сетке**: этот параметр также управляет количеством итераций при случайной выборки значений параметров, но значения не генерируются случайным образом из указанного диапазона. Вместо этого создается матрица для всех возможных сочетаний значений параметров, а для матрицы выбирается случайная выборка. Этот метод более эффективен и менее подвержен использованию региональной избыточной выборки или недовыборки.

8.  Выберите одну метрику для использования при **ранжировании** моделей.

    При выполнении очистки параметров вычисляются все применимые метрики для типа модели и возвращаются в отчете **результаты очистки** . Отдельные метрики используются для моделей регрессии и классификации.

    Однако выбранная метрика определяет, как будут ранжированы модели. Только верхняя модель, упорядоченная по выбранной метрике, выводится в качестве обученной модели для использования в качестве оценки.

9.  Для параметра **случайное начальное значение**введите число, которое будет использоваться при инициализации очистки параметров. 

10. Запустили конвейер.

## <a name="results-of-hyperparameter-tuning"></a>Результаты настройки параметров

По завершении обучения:

+ Чтобы просмотреть набор метрик точности для лучшей модели, щелкните правой кнопкой мыши модуль, выберите **результаты очистки**, а затем щелкните **визуализировать**.

    Все метрики точности, применимые к типу модели, являются выходными, но метрика, выбранная для ранжирования, определяет, какая модель считается "лучшей".

+ Чтобы использовать модель для оценки в других конвейерах без повторения процесса настройки, щелкните правой кнопкой мыши выходные данные модели и выберите команду **Сохранить как обученную модель**. 


## <a name="technical-notes"></a>Технические примечания

В этом разделе содержатся сведения о реализации, советы и ответы на часто задаваемые вопросы.

### <a name="how-a-parameter-sweep-works"></a>Как работает очистка параметров

В этом разделе описывается, как работает функция очистки параметров и как взаимодействуют параметры в этом модуле.

При настройке очистки параметров вы определяете область поиска, чтобы использовать ограниченное количество параметров, выбранных случайным образом, или полный поиск по определенному пространству параметров.

+ **Случайная очистка**. Этот параметр позволяет обменять модель с помощью заданного количества итераций. 

     Вы указываете диапазон значений для итерации, и модуль использует случайное выбранное подмножество этих значений.  Значения выбираются с заменой, что означает, что числа, ранее выбранные случайным образом, не удаляются из пула доступных номеров. Таким словами, вероятность выбора любого значения остается неизменной во всех проходах.  

+ **Вся сетка**: параметр для использования всей сетки означает, что каждая и каждая комбинация проверяются. Этот параметр можно считать наиболее подробным, но он требует наибольшего времени. 

### <a name="controlling-the-length-and-complexity-of-training"></a>Контроль длины и сложности обучения

Перебор множества сочетаний параметров может занимать много времени, поэтому модуль предоставляет несколько способов ограничения процесса:

+ Ограничение числа итераций, используемых для тестирования модели
+ Ограничить пространство параметров
+ Ограничить количество итераций и область параметров

Рекомендуется использовать конвейер с параметрами, чтобы определить наиболее эффективный метод обучения по определенному набору данных и модели.

### <a name="choosing-an-evaluation-metric"></a>Выбор показателя оценки

Отчет, содержащий точность для каждой модели, представлен в конце, чтобы можно было просматривать результаты метрик. Для всех моделей двоичной классификации используется однородный набор метрик, точность используется для всех моделей многоклассовой классификации, а для моделей регрессии используется другой набор метрик. Однако во время обучения необходимо выбрать **одну** метрику для использования в ранжировании моделей, созданных в процессе настройки. Может оказаться, что оптимальная метрика зависит от бизнес-задачи, а также от стоимости ложных срабатываний и ложных отрицательных результатов.

#### <a name="metrics-used-for-binary-classification"></a>Метрики, используемые для двоичной классификации

-   **Точность** Отношение истинных результатов к общему количеству вариантов.  

-   **Точность** Отношение истинных результатов к положительным результатам.  

-   **Отозвать** Доля всех правильных результатов по всем результатам.  

-   **F-Оценка** Мера, которая распределяет точность и отзыв.  

-   **AUC** Значение, представляющее область под кривой, когда ложные срабатывания отображаются на оси x, а истинные положительные значения отображаются на оси y.  

-   **Средняя вероятность потери журнала** Разница между двумя распределениями вероятностей: значение true и значение в модели.  

#### <a name="metrics-used-for-regression"></a>Метрики, используемые для регрессии

-   Средняя **абсолютная ошибка** среднее значение всей ошибки в модели, где ошибка означает расстояние прогнозируемого значения от истинного значения. Часто сокращается как **Mae**.  

-   **Корень средней квадратной ошибки** измеряет среднее значение квадратов ошибок, а затем принимает корень этого значения. Часто сокращается как **Корень среднеквадратичной погрешности**  

-   **Относительная абсолютная ошибка** представляет ошибку в процентах от истинного значения.  

-   **Относительное квадратичное сообщение об ошибке** нормализует общую квадратную ошибку, деленную на общую квадратную ошибку прогнозируемых значений.  

-   **Коэффициент определения** Одно число, указывающее, насколько хорошо данные помещаются в модель. Значение 1 означает, что модель точно соответствует данным; нулевое значение означает, что данные являются случайными или иным образом не могут соответствовать модели. Часто называют **r<sup>2</sup>** , **r<sup>2</sup>** или **r-квадратом**.  

### <a name="modules-that-do-not-support-a-parameter-sweep"></a>Модули, не поддерживающие очистка параметров

Почти все средства обучения в Машинное обучение Azure поддерживают перекрестную проверку с помощью встроенной очистки параметров, которая позволяет выбирать параметры конвейера. Если разработчик не поддерживает задание диапазона значений, вы по-прежнему можете использовать его при перекрестной проверке. В этом случае для очистки выбирается некоторый диапазон допустимых значений. 


## <a name="next-steps"></a>Дальнейшие действия

См. [набор модулей, доступных](module-reference.md) машинное обучение Azure службе. 

