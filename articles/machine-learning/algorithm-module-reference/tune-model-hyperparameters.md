---
title: Настройка гиперпараметров модели
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль Hyperparameters Tune Model в Azure Machine Learning для выполнения параметра на модели для определения оптимальных параметров параметров.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/11/2020
ms.openlocfilehash: ff0ccbf201f2b83dd446859d8054d115a70f402e
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80064157"
---
# <a name="tune-model-hyperparameters"></a>Настройка гиперпараметров модели

В этой статье описывается, как использовать модуль Hyperparameters Tune Model в дизайнере машинного обучения Azure (предварительный просмотр). Цель состоит в том, чтобы определить оптимальные гиперпараметры для модели машинного обучения. Модуль строит и тестирует несколько моделей с помощью различных комбинаций настроек. Он сравнивает метрики по всем моделям, чтобы получить комбинации настроек. 

*Параметр* терминов и *гиперпараметр* могут ввести в заблуждение. *Параметры* модели являются тем, что вы устанавливаете в правом стеле модуля. В основном, этот модуль выполняет *параметр развертки* над указанными параметрами параметров. Он изучает оптимальный набор _гиперпараметров,_ которые могут быть различными для каждого конкретного дерева решений, набора данных или метода регрессии. Процесс поиска оптимальной конфигурации иногда называют *тюнингом.* 

Модуль поддерживает следующий метод поиска оптимальных настроек для модели: *интегрированный поезд и настройка.* В этом методе вы настраиваете набор параметров для использования. Затем позволяете модулю итерировать несколько комбинаций. Модуль измеряет точность до тех пор, пока не найдет "лучшую" модель. С большинством модулей учащихся, вы можете выбрать, какие параметры должны быть изменены во время учебного процесса, и которые должны оставаться фиксированными.

В зависимости от того, как долго вы хотите, чтобы процесс настройки для запуска, вы можете решить, чтобы исчерпывающе проверить все комбинации. Или вы можете сократить процесс, установив сетку комбинаций параметров и тестируя рандомизированное подмножество параметра.

Этот метод генерирует обученную модель, которую можно сохранить для повторного использования.  

> [!TIP] 
> Вы можете вывыполнять связанную с этим задачу. Перед началом настройки примените выбор функций для определения столбцов или переменных, которые имеют наивысшее информационное значение.

## <a name="how-to-configure-tune-model-hyperparameters"></a>Как настроить гиперпараметры модели Tune  

Изучение оптимальных гиперпараметров для модели машинного обучения требует значительного использования трубопроводов.

### <a name="train-a-model-by-using-a-parameter-sweep"></a>Поезд модели с помощью параметра развертки  

В этом разделе описывается, как выполнять основной параметр развертки, который тренирует модель с помощью tune Model Hyperparameters модуль.

1.  Добавьте модуль Hyperparameters Tune Model в конвейер в проектировщике.

2.  Подключите неподготовленную модель к левому вхотвому. 



4.  Добавьте набор данных, который вы хотите использовать для обучения, и подключите его к среднему вхустройству hyperparameters Tune Model.  

    Дополнительно, если у вас есть помеченный набор данных, вы можете подключить его к самому правому порту ввода **(Дополнительный набор данных проверки).** Это позволяет измерять точность во время тренировки и настройки.

5.  В правой панели Hyperparameters Tune Model выберите значение для **режима подметания параметра.** Этот параметр контролирует, как выбираются параметры.

    - **Вся сетка**: Когда вы выбираете этот вариант, модуль петли над сеткой, предопределенной системой, чтобы попробовать различные комбинации и определить лучшего учащегося. Этот параметр полезен, если вы не знаете, какими могут быть лучшие параметры, и хотите попробовать все возможные комбинации значений.

    - **Случайный размах**: При выборе этой опции модуль случайным образом выберет значения параметров в диапазоне, определяемом системой. Необходимо указать максимальное количество запусков, которые вы хотите выполнить. Эта опция полезна, если вы хотите повысить производительность модели, используя метрики по вашему выбору, но при этом сохранить вычислительные ресурсы.    

6.  Для **столбца label**откройте селектор столбца, чтобы выбрать одну колонку метки.

7.  Выберите количество трасс:

    1. **Максимальное количество пробежек на случайных развертки**: Если вы выбираете случайный развертки, вы можете указать, сколько раз модель должна быть обучена, используя случайную комбинацию параметров значений.

8.  Для **ранжирования**выберите единую метрику для ранжирования моделей.

    При запуске параметра модуль вычисляет все применимые метрики для типа модели и возвращает их в отчет **о результатах Sweep.** Модуль использует отдельные метрики для регрессии и классификационных моделей.

    Однако выбираемый метрики определяет, как ранжируются модели. Только топ-модель, ранжированная по выбранной метрике, является выходом в качестве обученной модели для использования для скоринга.

9.  Для **случайных семян,** введите номер для использования для начала параметра развертки. 

10. Отправить конвейер.

## <a name="results-of-hyperparameter-tuning"></a>Результаты гиперпараметрной настройки

По завершении обучения:

+ Чтобы просмотреть набор метрик точности для лучшей модели, нажмите на модуль, а затем выберите **Визуализацию.**

    Выход включает в себя все метрики точности, которые применяются к типу модели, но выбранная для ранжирования метрика определяет, какая модель считается «лучшей».

+ Чтобы сохранить моментальный снимок обученной модели, выберите вкладку **Выводы** в правой панели **модуля модели Train.** Выберите значок **набора данных Регистра,** чтобы сохранить модель в качестве многоразового модуля.


## <a name="technical-notes"></a>Технические примечания

Этот раздел содержит детали реализации и советы.

### <a name="how-a-parameter-sweep-works"></a>Как работает развертки параметров

При настройке развертки параметров определяется область поиска. В поиске может использоваться конечное количество параметров, выбранных случайным образом. Или это может быть исчерпывающий поиск по параметру пространства, которое вы определяете.

+ **Случайный развертки**: Этот вариант тренирует модель с помощью определенного числа итераций. 

  Вы указываете диапазон значений для итерата, и модуль использует случайно выбранный подмножество этих значений. Значения выбираются с заменой, что означает, что числа, ранее выбранные случайным образом, не удаляются из пула доступных чисел. Таким образом, вероятность выбора любого значения остается одинаковой во всех проходах.  

+ **Вся сетка**: возможность использования всей сетки означает, что каждая комбинация протестирована. Этот вариант является наиболее тщательным, но он требует максимум времени. 

### <a name="controlling-the-length-and-complexity-of-training"></a>Контроль продолжительности и сложности обучения

Итерирование многих комбинаций настроек может занять много времени, поэтому модуль предоставляет несколько способов ограничения процесса:

+ Ограничьте количество итераций, используемых для тестирования модели.
+ Ограничьте пространство параметра.
+ Ограничьте как количество итераций, так и пространство параметра.

Мы рекомендуем конвейер с настройками определить наиболее эффективный метод обучения по определенному набору данных и модели.

### <a name="choosing-an-evaluation-metric"></a>Выбор метрики оценки

В конце тестирования модель представляет отчет, содержащий точность для каждой модели, чтобы можно было просмотреть результаты метрики:

- Единый набор метрик используется для всех моделей двоичной классификации.
- Точность используется для всех многоклассовых классификационных моделей.
- Для регрессионных моделей используется другой набор метрик. 

Однако во время обучения необходимо выбрать *единую* метрику для использования в ранжировании моделей, генерируемых в процессе настройки. Вы можете обнаружить, что лучшая метрика варьируется, в зависимости от вашей бизнес-проблемы и стоимость ложных срабатываний и ложных негативов.

#### <a name="metrics-used-for-binary-classification"></a>Метрики, используемые для двоичной классификации

-   **Точность** – это пропорция истинных результатов к общему объему случаев заболевания.  

-   **Точность** – это пропорция истинных результатов к положительным результатам.  

-   **Напомним,** это доля всех правильных результатов по всем результатам.  

-   **F-оценка** является мерой, которая уравновешивает точность и отзыв.  

-   **AUC** представляет собой область под кривой, когда ложные срабатывания на оси x и истинные срабатывания построены на y-оси.  

-   **Средняя потеря журнала** — это разница между двумя вероятностными распределениями: истинным и верным в модели.  

#### <a name="metrics-used-for-regression"></a>Метрики, используемые для регрессии

-   **Средняя абсолютная ошибка** усредняет все ошибки в модели, где *ошибка* означает расстояние прогнозируемого значения от истинного значения. Это часто *сокращенно,* как MAE .  

-   **Корень средней квадратной ошибки** измеряет среднее значение квадратов ошибок, а затем берет корень этого значения. Это часто сокращенно *RMSE*.  

-   **Относительная абсолютная ошибка** представляет ошибку в процентах от истинного значения.  

-   **Относительная ошибка квадратного квадрата** нормализует общую ошибку квадратного квадрата путем деления на общую квадратную ошибку прогнозируемых значений.  

-   **Коэффициент определения** — это единое число, которое указывает, насколько хорошо данные соответствуют модели. Значение одного означает, что модель точно соответствует данным. Значение нуля означает, что данные случайны или иным образом не могут быть пригодны для модели. Это часто называют *r<sup>2</sup>*, *R<sup>2</sup>*, или *r-квадрат*.  

### <a name="modules-that-dont-support-a-parameter-sweep"></a>Модули, не поддерживающие развертки параметров

Почти все учащиеся Azure Machine Learning поддерживают перекрестную проверку с помощью интегрированного параметра, который позволяет выбрать параметры для конвейера с. Если учащийся не поддерживает установление диапазона значений, его можно использовать в перекрестной проверке. В этом случае для развертки выбирается ряд допустимых значений. 


## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с [набором модулей, доступных](module-reference.md) для машинного обучения Azure. 

