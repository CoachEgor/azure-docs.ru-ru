---
title: Подключение к данным в службах хранилища в Azure
titleSuffix: Azure Machine Learning
description: Создайте хранилища данных и наборы данных для безопасного подключения к данным в службах хранилища в Azure с помощью Машинное обучение Azure Studio.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: nibaccam
author: nibaccam
ms.reviewer: nibaccam
ms.date: 09/22/2020
ms.custom: how-to
ms.openlocfilehash: 5ddfa2adbc9ec39949d7352903445407ff8e8881
ms.sourcegitcommit: f5580dd1d1799de15646e195f0120b9f9255617b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/29/2020
ms.locfileid: "91542161"
---
# <a name="connect-to-data-with-the-azure-machine-learning-studio"></a>Подключение к данным с помощью Машинное обучение Azure Studio

В этой статье вы узнаете, как получить доступ к данным с помощью [машинное обучение Azure Studio](overview-what-is-machine-learning-studio.md). Подключайтесь к данным в службах хранилища Azure с помощью [машинное обучение Azure хранилищ](how-to-access-data.md)данных, а затем упакуйте эти данные для задач в рабочих ПРОЦЕССах машинного обучения с помощью [машинное обучение Azure наборов данных](how-to-create-register-datasets.md).

В следующей таблице определены и обобщены преимущества хранилищ данных и DataSets. 

|Объект|Описание| Преимущества|   
|---|---|---|
|Хранилища данных| Безопасное подключение к службе хранилища в Azure путем сохранения сведений о подключении, таких как идентификатор подписки и авторизация маркеров в [Key Vault](https://azure.microsoft.com/services/key-vault/) , связанных с рабочей областью. | Так как ваша информация безопасно хранится, вы <br><br> <li> Не &nbsp; помещайте &nbsp; учетные данные проверки подлинности &nbsp; &nbsp; или &nbsp; исходные &nbsp; Источники данных под угрозой. <li> Больше не нужно жестко кодировать их в скриптах.
|Наборы данных| Создавая набор данных, вы создаете ссылку на расположение источника данных, а также копию его метаданных. С помощью наборов данных можно <br><br><li> Доступ к данным во время обучения модели.<li> Совместное использование данных и совместная работа с другими пользователями.<li> Используйте библиотеки с открытым исходным кодом, такие как Pandas, для исследования данных. | Поскольку наборы данных отложенно оцениваются, и данные остаются в существующем расположении, <br><br><li>Сохраните одну копию данных в хранилище.<li> Лишние затраты на хранение <li> Не рискуйте непреднамеренное изменение исходных источников данных.<li>Улучшение производительности рабочих процессов ML. 

Сведения о том, где хранятся хранилища данных и наборы данных в общем рабочем процессе доступа к данным Машинное обучение Azure, см. в статье [безопасный доступ к данным](concept-data.md#data-workflow) .

Сведения о первом интерфейсе кода см. в следующих статьях, посвященных использованию [пакета SDK для машинное обучение Azure Python](https://docs.microsoft.com/python/api/overview/azure/ml/?view=azure-ml-py&preserve-view=true) для:
* [Подключение к службам хранилища Azure с хранилищами](how-to-access-data.md)данных. 
* [Создание машинное обучение Azure наборов данных](how-to-create-register-datasets.md). 

## <a name="prerequisites"></a>Предварительные требования

- Подписка Azure. Если у вас еще нет подписки Azure, создайте бесплатную учетную запись, прежде чем начинать работу. Попробуйте [бесплатную или платную версию Машинного обучения Azure](https://aka.ms/AMLFree).

- Доступ к [машинное обучение Azure Studio](https://ml.azure.com/).

- Рабочая область машинного обучения Azure. [Создайте рабочую область Машинного обучения Azure](how-to-manage-workspace.md).

    -  При создании рабочей области контейнер больших двоичных объектов Azure и файловый ресурс Azure автоматически регистрируются в качестве хранилищ данных в рабочей области. Они называются `workspaceblobstore` и `workspacefilestore`, соответственно. Если хранилище BLOB-объектов достаточно для ваших потребностей, `workspaceblobstore` задается как хранилище данных по умолчанию и уже настроено для использования. В противном случае вам потребуется учетная запись хранения в Azure с [поддерживаемым типом хранилища](how-to-access-data.md#matrix).
    

## <a name="create-datastores"></a>Создание хранилищ данных

Хранилища данных можно создавать на основе [этих решений службы хранилища Azure](how-to-access-data.md#matrix). **Для неподдерживаемых решений для хранения**данных и для сохранения затрат на исходящие данные во время экспериментов в машинном [коде необходимо переместить данные](how-to-access-data.md#move) в поддерживаемое решение службы хранилища Azure. Дополнительные [сведения о хранилищах данных](how-to-access-data.md). 



Создайте хранилище данных, выполнив несколько шагов с помощью Машинное обучение Azure Studio.

> [!IMPORTANT]
> Если учетная запись хранения данных находится в виртуальной сети, необходимо выполнить дополнительные действия по настройке, чтобы обеспечить доступ к данным в студии. Чтобы обеспечить применение соответствующих действий по настройке, см. раздел [Сетевая изоляция & конфиденциальности](how-to-enable-virtual-network.md#machine-learning-studio) .

1. Войдите в [Студию машинного обучения Azure](https://ml.azure.com/).
1. Выберите элемент **Хранилища данных** на панели слева в разделе **Управление**.
1. Выберите **+ Новое хранилище данных**.
1. Заполните форму для нового хранилища данных. Форма самостоятельно интеллектуально обновится в соответствии с выбранным типом хранилища Azure и типа проверки подлинности. Сведения о том, где найти учетные данные для проверки подлинности, необходимые для заполнения этой формы, см. в [разделе доступ к хранилищу и разрешения](#access-validation) .

В следующем примере показано, как выглядит форма при создании **хранилища BLOB-объектов Azure**.

![Форма для нового хранилища данных.](media/how-to-connect-data-ui/new-datastore-form.png)

## <a name="create-datasets"></a>Создание наборов данных

После создания хранилища данных создайте набор данных для взаимодействия с данными. Наборы данных упаковывают ваши данные в отложенно вычисляемый объект для задач машинного обучения, например для обучения. [Дополнительные сведения о наборах данных](how-to-create-register-datasets.md).

Существует два типа наборов данных: Филедатасет и Табулардатасет. 
[Филедатасетс](how-to-create-register-datasets.md#filedataset) создают ссылки на один или несколько файлов или на общедоступные URL-адреса. В то время как [табулардатасетс](how-to-create-register-datasets.md#tabulardataset) представляет данные в табличном формате. 

В следующих шагах и анимации показано, как создать набор данных в [машинное обучение Azure Studio](https://ml.azure.com).

> [!Note]
> Наборы данных, созданные с помощью Машинное обучение Azure Studio, автоматически регистрируются в рабочей области.

![Создание набора данных с помощью пользовательского интерфейса](./media/how-to-connect-data-ui/create-dataset-ui.gif)

Чтобы создать набор данных в студии, сделайте следующее:
1. Войдите в [машинное обучение Azure Studio](https://ml.azure.com/).
1. Выберите **наборы данных** в разделе **ресурсы** на левой панели.
1. Выберите **создать набор данных** , чтобы выбрать источник набора данных. Этот источник может представлять собой локальные файлы, хранилище данных, общедоступные URL-адреса или [открытые наборы данных Azure](../open-datasets/how-to-create-azure-machine-learning-dataset-from-open-dataset.md).
1. Выберите **табличный** или **файл** для типа набора данных.
1. Нажмите кнопку **Далее** , чтобы открыть форму **хранилище данных и выбор файлов** . В этой форме можно выбрать место сохранения набора данных после создания, а также выбрать, какие файлы данных следует использовать для набора данных.
    1. Включите проверку пропуска, если данные находятся в виртуальной сети. Узнайте больше о [изоляции и конфиденциальности виртуальной сети](how-to-enable-virtual-network.md#machine-learning-studio).
1. Нажмите кнопку **Далее** , чтобы заполнить **Параметры, а также формы предварительного просмотра** и **схемы** . они являются интеллектуально заполненными на основе типа файлов. Вы можете дополнительно настроить набор данных перед созданием этих форм. 
1. Нажмите кнопку **Далее** , чтобы проверить форму **Подтверждение сведений** . Проверьте параметры и создайте для набора данных необязательный профиль. Подробная информация [о профилировании данных](#profile).
1. Выберите **создать** , чтобы завершить создание набора данных.

<a name="profile"></a>

### <a name="data-profile-and-preview"></a>Профиль данных и предварительная версия

После создания набора данных убедитесь, что вы можете просмотреть профиль и предварительный просмотр в студии, выполнив следующие действия. 

1. Вход в [машинное обучение Azure Studio](https://ml.azure.com/)
1. Выберите **наборы данных** в разделе **ресурсы** на левой панели.
1. Выберите имя набора данных, который необходимо просмотреть. 
1. Выберите вкладку **Explore** (Изучение). 
1. Перейдите на вкладку **Предварительный просмотр** или **профиль** . 

![Просмотр профиля набора данных и предварительная версия](./media/how-to-connect-data-ui/dataset-preview-profile.gif)

Вы можете получить обширную сводную статистику по набору данных, чтобы проверить, готов ли он к машинному обучению. Для нечисловых столбцов она включает только базовые статистические данные, например минимальное и максимальное значение, а также число ошибок. Для числовых столбцов можно также просмотреть статистические моменты и предполагаемые квантили. 

В частности, профиль данных Машинное обучение Azure набора данных включает в себя:

>[!NOTE]
> Для признаков с неуместными типами отображаются пустые записи.

|Статистика|Описание
|------|------
|Компонент| Имя столбца, по которому предоставляется сводка.
|Профиль| Встроенная визуализация на основе выводимого типа. Например, для строк, логических значений и дат будут отображаться счетчики значений, а для десятичных (числовых значений) — аппроксимированные гистограммы. Это позволит быстро получить представление о распределении данных.
|Распределение по типам| Встроенный счетчик значений для типов в столбце. Значения NULL имеют собственный тип, поэтому эта визуализация полезна для обнаружения необычных или отсутствующих значений.
|Тип|Выводимый тип столбца. Возможные значения: строчные и логические значения, даты и десятичные числа.
|Min| Минимальное значение в столбце. Пустые записи отображаются для компонентов, тип которых не имеет неопределенного упорядочения (например, логические значения).
|Max| Максимальное значение в столбце. 
|Count| Общее число отсутствующих и присутствующих записей в столбце.
|Присутствующее количество| Количество присутствующих записей в столбце. Пустые строки и ошибки обрабатываются как значения, поэтому они не будут учитываться при подсчете количества присутствующих записей.
|Квантили| Аппроксимированные значения в каждом квантиле для создания подобия распределения данных.
|Среднее значение| Среднее арифметическое или среднее значение столбца.
|Стандартное отклонение| Величина дисперсии или вариации данных в этом столбце.
|Variance| Мера того, насколько сильно отклоняются данные этого столбца от среднего значения. 
|Асимметрия| Мера того, насколько отличаются данные этого столбца от нормального распределения.
|Эксцесс| Мера того, насколько медленнее убывают данные этого столбца по сравнению с нормальным распределением.

## <a name="storage-access-and-permissions"></a>Доступ к хранилищу и разрешения

Чтобы обеспечить безопасное подключение к службе хранилища Azure, Машинное обучение Azure требуется разрешение на доступ к соответствующему хранилищу данных. Этот доступ зависит от учетных данных проверки подлинности, используемых для регистрации хранилища данных.

### <a name="virtual-network"></a>Виртуальная сеть

Если учетная запись хранения данных находится в **виртуальной сети**, необходимо выполнить дополнительные действия по настройке, чтобы обеспечить машинное обучение Azure доступ к данным. См. раздел [Сетевая изоляция & конфиденциальности](how-to-enable-virtual-network.md#machine-learning-studio) , чтобы при создании и регистрации хранилища данных были применены соответствующие шаги настройки.  

### <a name="access-validation"></a>Проверка доступа

В ходе **процесса создания и регистрации хранилища данных**машинное обучение Azure автоматически проверяет, существует ли базовая служба хранилища, и предоставленный пользователем участник (имя пользователя, субъект-служба или маркер SAS) имеет доступ к указанному хранилищу.

**После создания хранилища данных**эта проверка выполняется только для методов, которым требуется доступ к базовому контейнеру хранилища, а **не** при извлечении объектов хранилища данных. Например, проверка выполняется, если требуется скачать файлы из хранилища данных. Но если вы просто хотите изменить хранилище данных по умолчанию, проверки не будет.

Чтобы проверить подлинность доступа к базовой службе хранилища, можно указать ключ учетной записи, маркеры общего доступа (SAS) или субъект-службу в соответствии с типом хранилища данных, который вы хотите создать. В [матрице типа хранилища](how-to-access-data.md#matrix) перечислены поддерживаемые типы проверки подлинности, соответствующие каждому типу хранилища данных.

Сведения о ключе учетной записи, маркере SAS и субъекте-службе можно найти на [портал Azure](https://portal.azure.com).

* Если для проверки подлинности вы планируете использовать ключ учетной записи или маркер SAS, выберите элемент **Учетные записи хранения** на панели слева и выберите учетную запись хранения, которую требуется зарегистрировать.
  * На странице **Обзор** приводятся такие сведения, как имя учетной записи, контейнер и имя общей папки.
      1. Чтобы использовать ключи учетной записи, перейдите к элементу **Ключи доступа** на панели **Параметры**.
      1. Чтобы использовать маркеры SAS, перейдите к элементу **Подписанные URL-адреса** на панели **Параметры**.

* Если вы планируете использовать [субъект-службу](https://docs.microsoft.com/azure/active-directory/develop/howto-create-service-principal-portal) для проверки подлинности, перейдите к **Регистрация приложений** и выберите приложение, которое вы хотите использовать.
    * Соответствующая страница **обзора** будет содержать требуемые сведения, такие как идентификатор клиента и идентификатор клиента.

> [!IMPORTANT]
> По соображениям безопасности может потребоваться изменить ключи доступа для учетной записи хранения Azure (ключ учетной записи или маркер SAS). При этом не забудьте синхронизировать новые учетные данные с рабочей областью и подключенными к ней хранилищами данных. Узнайте, как [синхронизировать обновленные учетные данные](how-to-change-storage-access-key.md).

### <a name="permissions"></a>Разрешения

Для контейнера больших двоичных объектов Azure и Azure Data Lake хранилища Gen 2 Убедитесь, что учетные данные для проверки подлинности имеют доступ на **Чтение данных BLOB-объекта хранилища** . См. Дополнительные сведения о [модуле чтения BLOB-объектов хранилища](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#storage-blob-data-reader). 

## <a name="train-with-datasets"></a>Обучение с наборами данных

Используйте свои наборы данных в экспериментах машинного обучения для обучения моделей ML. [Дополнительные сведения о способах обучения с помощью наборов данных](how-to-train-with-datasets.md)

## <a name="next-steps"></a>Дальнейшие действия

* [Пошаговый пример обучения с помощью табулардатасетс и автоматизированного машинного обучения](tutorial-first-experiment-automated-ml.md).

* [Обучение модели](how-to-set-up-training-targets.md).

* Дополнительные примеры обучения наборов данных см. в [примерах записных книжек](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/work-with-data/).
