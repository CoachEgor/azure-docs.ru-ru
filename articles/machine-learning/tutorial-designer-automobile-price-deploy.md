---
title: Руководство. развертыванию модели машинного обучения с помощью конструктора
titleSuffix: Azure Machine Learning
description: Сведения о том, как создавать решения для прогнозной аналитики в конструкторе Машинного обучения Azure (предварительная версия). Обучение, оценка и развертывание модели машинного обучения с помощью модулей перетаскивания.
author: peterclu
ms.author: peterlu
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.date: 11/04/2019
ms.openlocfilehash: 6fc6479ccda77bff84319d3244b2bd4a0599dc47
ms.sourcegitcommit: fa6fe765e08aa2e015f2f8dbc2445664d63cc591
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "76933995"
---
# <a name="tutorial-deploy-a-machine-learning-model-with-the-designer-preview"></a>Руководство. развертыванию модели машинного обучения с помощью конструктора (предварительная версия)
[!INCLUDE [applies-to-skus](../../includes/aml-applies-to-enterprise-sku.md)]

Чтобы другие пользователи могли применить модель прогнозирования, которую вы создали по инструкциям из [первой части этого руководства](tutorial-designer-automobile-price-train-score.md), разверните модель. В первой части вы обучили модель. Теперь пора создать прогнозы на основе вводимых пользователем данных. В этой части руководства вы выполните следующее:

> [!div class="checklist"]
> * Создание конвейера вывода в режиме реального времени.
> * Создание кластера вывода.
> * Развертывание конечной точки в режиме реального времени.
> * Тестирование конечной точки в режиме реального времени.

## <a name="prerequisites"></a>Предварительные требования

Изучите [первую часть учебника](tutorial-designer-automobile-price-train-score.md), чтобы узнать, как обучать и оценивать модель машинного обучения в конструкторе.

## <a name="create-a-real-time-inference-pipeline"></a>Создание конвейера вывода в реальном времени

Чтобы развернуть конвейер, сначала преобразуйте обучающий конвейер в конвейер вывода в режиме реального времени. В этом процессе удаляются обучающие модули и добавляются входные и выходные данные веб-службы для обработки запросов.

### <a name="create-a-real-time-inference-pipeline"></a>Создание конвейера вывода в реальном времени

1. Над холстом конвейера выберите **Create inference pipeline (Создать конвейер вывода)**  > **Real-time inference pipeline (Конвейер вывода в режиме реального времени)** .

    ![Снимок экрана, на котором показано, где найти кнопку для создания конвейера](./media/tutorial-designer-automobile-price-deploy/create-inference-pipeline.png)

    Теперь этот конвейер будет выглядеть следующим образом: 

   ![Снимок экрана: ожидаемая конфигурация конвейера после его подготовки к развертыванию](./media/tutorial-designer-automobile-price-deploy/real-time-inference-pipeline.png)

    При нажатии кнопки **Create inference pipeline** (Создать конвейер вывода) произойдет несколько вещей:
    
    * Обученная модель будет сохранена в виде модуля **Набор данных** в палитре модулей. Его можно найти в разделе **My Datasets** (Мои наборы данных).
    * Удаляются такие обучающие модули, как **Train Model** (Обучение модели) и **Split Data** (Разделение данных).
    * Сохраненная обученная модель добавляется обратно в конвейер.
    * Добавляются модули **Web Service Input** (Входные данные веб-службы) и **Web Service Output** (Выходные данные веб-службы). В этих модулях показано, откуда пользовательские данные поступают в конвейер и куда они возвращаются.

    > [!NOTE]
    > По умолчанию **входные данные веб-службы** должны иметь ту же схему данных, что и данные для обучения, используемые для создания прогнозного конвейера. В этом сценарии стоимость включена в схему. Однако стоимость не используется в качестве фактора во время прогнозирования.
    >

1. Выберите **Запустить** и используйте тот же целевой объект вычислений и эксперимент, который использовался в первой части.

1. Выберите **Развернуть**.

## <a name="create-an-inferencing-cluster"></a>Создание кластера вывода

Для развертывания модели можно выбрать любой кластер Службы Azure Kubernetes (AKS) в открывшемся диалоговом окне. Если у вас нет кластера AKS, создайте его, сделав следующее.

1. В открывшемся диалоговом окне выберите **Вычисления**, чтобы перейти к странице **Вычисления**.

1. В ленте навигации выберите **Inference Clusters** (Кластеры вывода)  >  **+ Создать**.

    ![Снимок экрана, показывающий, как переходить в новую область кластера вывода](./media/tutorial-designer-automobile-price-deploy/new-inference-cluster.png)

1. В области кластера вывода настройте новую службу Kubernetes.

1. Введите *aks-compute* в поле **Имя вычислений**.
    
1. Выберите ближайший регион, доступный для модуля **Регион**.

1. Нажмите кнопку **создания**.

    > [!NOTE]
    > Создание службы AKS занимает около 15 минут. Состояние подготовки можно проверить на странице **Inference Clusters** (Кластеры вывода).
    >

## <a name="deploy-the-real-time-endpoint"></a>Развертывание конечной точки для прогнозирования в реальном времени

После завершения подготовки службы AKS вернитесь к конвейеру вывода в режиме реального времени для завершения развертывания.

1. Выберите **Развернуть** над холстом.

1. Выберите **Deploy new real-time endpoint** (Развертывание новой конечной точки для прогнозирования в реальном времени). 

1. Выберите созданный кластер AKS.

1. Выберите **Развернуть**.

    ![Снимок экрана, показывающий, как настроить новую конечную точку для прогнозирования в реальном времени](./media/tutorial-designer-automobile-price-deploy/setup-endpoint.png)

    После завершения развертывания в приложении на основе холста появится уведомление об успешном выполнении. Это может занять несколько минут.

## <a name="test-the-real-time-endpoint"></a>Тестирование конечной точки для прогнозирования в реальном времени

После развертывания вы можете протестировать конечную точку для прогнозирования в реальном времени. Для этого перейдите к странице **Конечные точки**.

1. На странице **Конечные точки** выберите развернутую конечную точку.

    ![Снимок экрана, показывающий вкладку конечных точек для прогнозирования в реальном времени с выделенной недавно созданной конечной точкой](./media/tutorial-designer-automobile-price-deploy/endpoints.png)

1. Выберите **Тест**.

1. Введите данные тестирования вручную или используйте автоматически заполненный пример данных и щелкните **Тест**.

    С портала отправляется тестовый запрос в конечную точку. Затем отображаются результаты. Значение цены формируется на основе входных данных, но при расчете прогнозируемого значения они не используются.

    ![Снимок экрана, показывающий, как протестировать конечную точку для прогнозирования в реальном времени с выделенной оценочной меткой для цены](./media/tutorial-designer-automobile-price-deploy/test-endpoint.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [aml-ui-cleanup](../../includes/aml-ui-cleanup.md)]

## <a name="next-steps"></a>Дальнейшие действия

В этом учебнике вы узнали как создать, развернуть и использовать модели машинного обучения в конструкторе. Чтобы получить дополнительные сведения об использовании конструктора для решения других типов проблем, ознакомьтесь с примерами конвейеров.

> [!div class="nextstepaction"]
> [Пример классификации кредитных рисков](how-to-designer-sample-classification-credit-risk-cost-sensitive.md)
