---
title: Известные проблемы и устранение неполадок
titleSuffix: Azure Machine Learning
description: Получите помощь в поиске и исправлении ошибок или сбоев в Машинное обучение Azure. Сведения об известных проблемах, устранении неполадок и способах их решения.
services: machine-learning
author: likebupt
ms.author: keli19
ms.reviewer: mldocs
ms.service: machine-learning
ms.subservice: core
ms.topic: troubleshooting
ms.custom: troubleshooting, contperfq4
ms.date: 10/02/2020
ms.openlocfilehash: 365d38eedd327bb50bbbea01a6847738c482b1bd
ms.sourcegitcommit: 30505c01d43ef71dac08138a960903c2b53f2499
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2020
ms.locfileid: "92091191"
---
# <a name="known-issues-and-troubleshooting-in-azure-machine-learning"></a>Устранение неполадок и описание известных проблем в службе "Машинное обучение Azure"

Эта статья поможет вам устранить известные проблемы, которые могут возникнуть при использовании Машинное обучение Azure. 

Дополнительные сведения об устранении неполадок см. в разделе [дальнейшие действия](#next-steps) в конце этой статьи.

> [!TIP]
> Ошибки или другие проблемы могут быть результатом [квот ресурсов](how-to-manage-quotas.md) , возникающих при работе с машинное обучение Azure. 

## <a name="access-diagnostic-logs"></a>Доступ к журналам диагностики

Иногда при обращении за помощью полезно предоставить диагностические сведения. Для просмотра некоторых журналов выполните следующие действия. 
1. Посетите [машинное обучение Azure Studio](https://ml.azure.com). 
1. В левой части выберите **эксперимент** . 
1. Выберите эксперимент.
1. Выберите Запуск.
1. В верхней части выберите **выходные данные и журналы**.

> [!NOTE]
> Машинное обучение Azure записывает сведения из различных источников во время обучения, например Аутомл или контейнер DOCKER, который запускает задание обучения. Многие из этих журналов не документированы. Если у вас возникли проблемы и вы обратились в службу поддержки Майкрософт, ее специалисты могут воспользоваться этими журналами для устранения неполадок.


## <a name="installation-and-import"></a>Установка и импорт
                           
* **Установка PIP: не гарантируется совместимость зависимостей с однострочной установкой:** 

   Это известное ограничение PIP, так как в нем отсутствует действующий сопоставитель зависимостей при установке в виде одной строки. Первая уникальная зависимость — это единственная из них. 

   В следующем коде `azureml-datadrift` и `azureml-train-automl` устанавливаются с помощью однострочной установки PIP. 
     ```
       pip install azureml-datadrift, azureml-train-automl
     ```
   Для этого примера предположим, что `azureml-datadrift` требуется версия > 1,0 и `azureml-train-automl` требуется версия < 1,2. Если последняя версия `azureml-datadrift` — 1,3, то оба пакета обновляются до 1,3, независимо от `azureml-train-automl` требований к пакету для более старой версии. 

   Чтобы обеспечить установку соответствующих версий для пакетов, установите с помощью нескольких строк, как в следующем коде. Order не является проблемой, так как PIP явным образом понижается в рамках вызова следующей строки. И поэтому применяются соответствующие зависимости версий.
    
     ```
        pip install azureml-datadrift
        pip install azureml-train-automl 
     ```
     
* **Пакет пояснений, который не гарантировано устанавливать при установке azureml-Training-аутомл-Client:** 
   
   При запуске удаленной Аутомл с включенным объяснением модели вы увидите сообщение об ошибке "установите пакет azureml-объяснить-Model для объяснений модели". Это известная проблема. Для решения этой проблемы выполните одно из следующих действий.
  
  1. Установка azureml-объяснить-Model на локальном компьютере.
   ```
      pip install azureml-explain-model
   ```
  2. Полностью отключите функцию объяснения, передав model_explainability = false в конфигурации Аутомл.
   ```
      automl_config = AutoMLConfig(task = 'classification',
                             path = '.',
                             debug_log = 'automated_ml_errors.log',
                             compute_target = compute_target,
                             run_configuration = aml_run_config,
                             featurization = 'auto',
                             model_explainability=False,
                             training_data = prepped_data,
                             label_column_name = 'Survived',
                             **automl_settings)
    ``` 
    
* **Ошибки Panda: обычно встречаются во время Аутомл эксперимента:**
   
   При ручной настройке среды с помощью PIP можно заметить ошибки атрибутов (особенно из PANDAS) из-за установки неподдерживаемых версий пакета. Чтобы предотвратить такие ошибки, [установите пакет SDK для аутомл с помощью automl_setup. cmd](https://github.com/Azure/MachineLearningNotebooks/blob/master/how-to-use-azureml/automated-machine-learning/README.md):
   
    1. Откройте запрос Anaconda и клонировать репозиторий GitHub для набора примеров записных книжек.

    ```bash
    git clone https://github.com/Azure/MachineLearningNotebooks.git
    ```
    
    2. Перейдите в папку с инструкциями azureml/автоматизированного машинного обучения, где были извлечены примеры записных книжек, а затем запустите:
    
    ```bash
    automl_setup
    ```
    
* **Кэйеррор: "Brand" при запуске Аутомл в локальном кластере вычислений или Azure Databricks**

    Если новая среда была создана после 10 июня 2020 с использованием пакета SDK 1.7.0 или более ранней версии, то обучение может завершиться с этой ошибкой из-за обновления в пакете корректировки кпуинфо. (Среды, созданные до 10 июня 2020, не затрагиваются, так как эксперименты выполняются на удаленных вычислительных ресурсах, так как используются кэшированные обучающие изображения.) Чтобы обойти эту ошибку, выполните одно из двух следующих действий.
    
    * Обновите версию пакета SDK до 1.8.0 или более поздней (Кроме того, это будет более ранней версии, чем в 5.0.0):
    
      ```bash
      pip install --upgrade azureml-sdk[automl]
      ```
    
    * Понизить установленную версию параметра Копировать кпуинфо до 5.0.0:
    
      ```bash
      pip install py-cpuinfo==5.0.0
      ```
  
* **Сообщение об ошибке: не удается удалить "PyYAML"**

    Машинное обучение Azure SDK для Python: Пиямл является `distutils` установленным проектом. Поэтому невозможно точно определить, какие файлы принадлежат ему в случае частичного удаления. Чтобы продолжить установку SDK игнорируя эту ошибку, используйте:
    
    ```Python
    pip install --upgrade azureml-sdk[notebooks,automl] --ignore-installed PyYAML
    ```

* **Сбой установки пакета SDK Машинное обучение Azure с исключением: Модуленотфаундеррор: отсутствует модуль с именем "руамел" или "Импортеррор: нет модуля с именем руамел. YAML"**
   
   Эта проблема возникает при установке пакета SDK для Машинное обучение Azure для Python на последней версии PIP (>20.1.1) в базовой среде conda для всех выпущенных версий пакета SDK Машинное обучение Azure для Python. См. следующие обходные пути:

    * Избегайте установки пакета SDK для Python в базовой среде conda, вместо этого создайте среду conda и установите пакет SDK на вновь созданную среду пользователя. Последняя версия PIP должна работать с новой средой conda.

    * Для создания изображений в DOCKER, где невозможно отключиться от базовой среды conda, закрепите PIP<= 20.1.1 в файле DOCKER.

    ```Python
    conda install -c r -y conda python=3.6.2 pip=20.1.1
    ```
    
* **Ошибка при установке пакетов в модулях**

    Сбой установки пакета SDK Машинное обучение Azure на Azure Databricks при установке дополнительных пакетов. Некоторые пакеты, такие как `psutil`, могут приводить к конфликтам. Чтобы избежать ошибок установки, установите пакеты, зафиксировать версию библиотеки. Эта проблема связана с модулями связи, а не с пакетом SDK для Машинное обучение Azure. Эта проблема также может возникнуть и в других библиотеках. Пример.
    
    ```python
    psutil cryptography==1.5 pyopenssl==16.0.0 ipython==2.2.0
    ```

    Кроме того, можно использовать скрипты init, если возникают проблемы с установкой библиотек Python. Этот подход официально не поддерживается. Дополнительные сведения см. в разделе [сценарии инициализации с областью действия кластера](https://docs.azuredatabricks.net/user-guide/clusters/init-scripts.html#cluster-scoped-init-scripts).

* **Ошибка импорта блоков кирпича: не удается импортировать `Timedelta` имя `pandas._libs.tslibs` из **: Если при использовании автоматического машинного обучения отображается эта ошибка, выполните в записной книжке две следующие строки:
    ```
    %sh rm -rf /databricks/python/lib/python3.7/site-packages/pandas-0.23.4.dist-info /databricks/python/lib/python3.7/site-packages/pandas
    %sh /databricks/python/bin/pip install pandas==0.23.4
    ```

* **Ошибка импорта блоков памяти: нет модуля с именем "Pandas. Core. indexes"**: Если при использовании автоматического машинного обучения возникает эта ошибка, выполните следующие действия.

    1. Выполните следующую команду, чтобы установить два пакета в кластере Azure Databricks:
    
       ```bash
       scikit-learn==0.19.1
       pandas==0.22.0
       ```
    
    1. Отсоедините и снова подключите кластер к записной книжке.
    
    Если эти действия не устранят проблему, попробуйте перезапустить кластер.

* **Фаилтосендфеасер**: Если при `FailToSendFeather` чтении данных в кластере Azure Databricks возникает ошибка, см. следующие решения.
    
    * Обновите `azureml-sdk[automl]` пакет до последней версии.
    * Добавьте `azureml-dataprep` версию 1.1.8 или более позднюю.
    * Добавьте `pyarrow` версию 0,11 или более позднюю.
    
## <a name="create-and-manage-workspaces"></a>Создание рабочих областей и управление ими

> [!WARNING]
> Перемещение рабочей области Машинного обучения Azure в другую подписку или перемещение главной подписки на новый клиент не поддерживается. Это может привести к ошибкам.

* **Портал Azure**: 
  * Если перейти непосредственно к рабочей области из ссылки на общий ресурс из пакета SDK или портал Azure, вы не сможете просмотреть стандартную страницу **обзора** со сведениями о подписке в расширении. В этом случае вы также не сможете переключиться на другую рабочую область. Чтобы просмотреть другую рабочую область, перейдите непосредственно в [машинное обучение Azure Studio](https://ml.azure.com) и найдите имя рабочей области.
  * Все активы (наборы данных, эксперименты, расчеты и т. д.) доступны только в [машинное обучение Azure Studio](https://ml.azure.com). Они недоступны *из* портал Azure.

* **Поддерживаемые браузеры на веб-портале машинное обучение Azure Studio**. рекомендуется использовать наиболее актуальный браузер, совместимый с вашей операционной системой. Поддерживаются следующие браузеры:
  * Microsoft ребро (новый Microsoft ребро, последняя версия. Не Microsoft ребра Legacy)
  * Safari (последняя версия, только для Mac);
  * Chrome (последняя версия);
  * Firefox (последняя версия).

## <a name="set-up-your-environment"></a>Настройка среды

* **Проблемы при создании амлкомпуте**: существует редкий шанс, что некоторые пользователи, создавшие свою машинное обучение Azureную рабочую область из портал Azure до общедоступного выпуска, могут не иметь возможности создать амлкомпуте в этой рабочей области. Вы можете либо отправить запрос в службу поддержки, либо создать новую рабочую область на портале или с помощью пакета SDK, чтобы немедленно разблокировать пользователя.

* **Реестр контейнеров Azure в настоящее время не поддерживает символы Юникода в именах групп ресурсов**. это может привести к сбою запросов записи контроля доступа, так как имя группы ресурсов содержит символы Юникода. Чтобы устранить эту ошибку, рекомендуется создать запись контроля доступа в группе ресурсов с другим именем.

## <a name="work-with-data"></a>Работа с данными

### <a name="overloaded-azurefile-storage"></a>Перегруженное хранилище Азурефиле

Если появляется сообщение об ошибке `Unable to upload project files to working directory in AzureFile because the storage is overloaded` , используйте следующие обходные пути.

Если вы используете общую папку для других рабочих нагрузок, таких как передача данных, рекомендуется использовать большие двоичные объекты, чтобы файловый ресурс можно было использовать для отправки запусков. Вы также можете разделить рабочую нагрузку между двумя разными рабочими областями.

### <a name="passing-data-as-input"></a>Передача данных в качестве входного

*  **Типиррор: FileNotFound: отсутствует такой файл или каталог**: Эта ошибка возникает, если указанный путь к файлу не находится там, где расположен файл. Необходимо убедиться в том, что путь к файлу соответствует месту подключения набора данных к целевому объекту вычислений. Чтобы обеспечить детерминированное состояние, рекомендуется использовать абстрактный путь при подключении набора данных к целевому объекту вычислений. Например, в следующем примере выполняется подключение набора данных в корне файловой системы целевого объекта вычислений `/tmp` . 
    
    ```python
    # Note the leading / in '/tmp/dataset'
    script_params = {
        '--data-folder': dset.as_named_input('dogscats_train').as_mount('/tmp/dataset'),
    } 
    ```

    Если не указать начальную косую черту ("/"), необходимо добавить к рабочему каталогу префикс, например, в `/mnt/batch/.../tmp/dataset` целевом объекте вычислений, чтобы указать, где нужно подключить набор данных.

### <a name="mount-dataset"></a>Подключение набора данных
* **Сбой инициализации набора данных: время ожидания готовности точки подключения**истекло: для устранения проблемы была добавлена логика повторной попытки `azureml-sdk >=1.12.0` . Если вы используете предыдущие версии azureml-SDK, выполните обновление до последней версии. Если вы уже используете `azureml-sdk>=1.12.0` , создайте среду заново, чтобы получить Последнее исправление с исправлением.

### <a name="data-labeling-projects"></a>Проект маркировки данных

|Проблема  |Решение  |
|---------|---------|
|Можно использовать только наборы данных, созданные в хранилищах BLOB-объектов.     |  Это известное ограничение текущего выпуска.       |
|После создания проект показывает «инициализацию» в течение длительного времени.     | Обновите страницу вручную. Инициализация должна продолжаться примерно 20 точек на секунду. Отсутствие автообновления является известной проблемой.         |
|При просмотре изображений новые помеченные изображения не отображаются.     |   Чтобы загрузить все помеченные изображения, нажмите **первую** кнопку. **Первая** кнопка вернет вас к началу списка, но загрузит все помеченные данные.      |
|Нажатие клавиши ESC при пометке для обнаружения объектов создает метку нулевого размера в левом верхнем углу. Отправка меток в этом состоянии завершается ошибкой.     |   Удалите метку, щелкнув рядом с ней крестик.  |

### <a name="data-drift-monitors"></a><a name="data-drift"></a> Мониторы смещения данных

Ограничения и известные проблемы для мониторов смещения данных:

* Диапазон времени при анализе исторических данных ограничен 31 интервалами в параметре частоты монитора. 
* Ограничение функций 200, если не указан список функций (все используемые компоненты).
* Размер вычислений должен быть достаточно большим, чтобы обрабатывать данные.
* Убедитесь, что набор данных содержит данные в пределах начальной и конечной даты для данного монитора.
* Мониторы наборов данных будут работать только на наборах данных, содержащих 50 строк или более.
* Столбцы или функции в наборе данных классифицируются по категориям или числу в зависимости от условий, приведенных в следующей таблице. Если функция не соответствует этим условиям (например, столбец строкового типа с >100 уникальными значениями), то функция удаляется из алгоритма смещения данных, но по-прежнему выполняется в процессе профилирования. 

    | Тип компонента | Тип данных | Условие | Ограничения | 
    | ------------ | --------- | --------- | ----------- |
    | категориальные; | String, bool, int, float | Число уникальных значений в компоненте меньше 100 и меньше 5% от количества строк. | Значение NULL считается собственной категорией. | 
    | числовые; | int, float | Значения в функции имеют числовой тип данных и не соответствуют условию для функции категоризации. | Функция удалена, если >15% значений равны NULL. | 

* Если вы [создали монитор рассмещения данных](how-to-monitor-datasets.md) , но не видите данные на странице " **мониторы набора данных** " в машинное обучение Azure Studio, попробуйте выполнить следующее.

    1. Проверьте, выбран ли правильный диапазон дат в верхней части страницы.  
    1. На вкладке **мониторы набора данных** щелкните ссылку эксперимента, чтобы проверить состояние выполнения.  Эта ссылка находится на правом краю таблицы.
    1. Если запуск завершился успешно, проверьте журналы драйвера, чтобы узнать, сколько метрик было создано, или в случае наличия предупреждающих сообщений.  Если щелкнуть эксперимент, найдите журналы драйверов на вкладке **выходные данные и журналы** .

* Если функция пакета SDK не `backfill()` создает ожидаемые выходные данные, это может быть вызвано проблемой проверки подлинности.  При создании вычислений для передачи этой функции не используйте `Run.get_context().experiment.workspace.compute_targets` .  Вместо этого используйте [сервицепринЦипалаусентикатион](https://docs.microsoft.com/python/api/azureml-core/azureml.core.authentication.serviceprincipalauthentication?view=azure-ml-py&preserve-view=true) , как показано ниже, чтобы создать вычисление, передаваемое в эту `backfill()` функцию: 

  ```python
   auth = ServicePrincipalAuthentication(
          tenant_id=tenant_id,
          service_principal_id=app_id,
          service_principal_password=client_secret
          )
   ws = Workspace.get("xxx", auth=auth, subscription_id="xxx", resource_group"xxx")
   compute = ws.compute_targets.get("xxx")
   ```

## <a name="azure-machine-learning-designer"></a>Конструктор Машинного обучения Azure

* **Длительное время подготовки вычислений:**

При первом подключении к или создании целевого объекта вычислений может потребоваться несколько минут или даже больше. 

Из сборщика данных модели для получения данных в учетной записи хранилища BLOB-объектов может потребоваться до 10 минут (но обычно меньше). Подождите 10 минут, чтобы убедиться, что указанные ячейки будут выполняться.

```python
import time
time.sleep(600)
```

* **Журнал для конечных точек в режиме реального времени:**

Журналы конечных точек в режиме реального времени — это данные клиентов. Для устранения неполадок конечных точек в реальном времени можно использовать следующий код, чтобы включить журналы. 

Дополнительные сведения о наблюдении за конечными точками веб-службы см. в [этой статье](https://docs.microsoft.com/azure/machine-learning/how-to-enable-app-insights#query-logs-for-deployed-models).

```python
from azureml.core import Workspace
from azureml.core.webservice import Webservice

ws = Workspace.from_config()
service = Webservice(name="service-name", workspace=ws)
logs = service.get_logs()
```
Если у вас несколько клиентов, может потребоваться добавить следующий код проверки подлинности перед `ws = Workspace.from_config()`

```python
from azureml.core.authentication import InteractiveLoginAuthentication
interactive_auth = InteractiveLoginAuthentication(tenant_id="the tenant_id in which your workspace resides")
```

## <a name="train-models"></a>Обучение моделей

* **Модулиррорс (без модуля с именем)**: Если вы используете в модулиррорс при отправке экспериментов в машинном обучении Azure, это означает, что обучающий сценарий ожидает установки пакета, но не добавляется. Когда вы укажите имя пакета, Azure ML установит пакет в среде, используемой для запуска обучения. 

    Если для отправки экспериментов используются средства оценки, можно указать имя пакета с помощью `pip_packages` параметра или в средстве `conda_packages` оценки на основе источника, на котором нужно установить пакет. Можно также указать файл yml со всеми зависимостями с помощью `conda_dependencies_file` или перечислить все требования к PIP в TXT-файле с помощью `pip_requirements_file` параметра. Если у вас есть собственный объект среды машинного обучения Azure, для которого необходимо переопределить образ по умолчанию, используемый средством оценки, можно указать эту среду с помощью `environment` параметра конструктора средства оценки.

    МАШИНное обучение Azure также предоставляет средства оценки, зависящие от платформы, для TensorFlow, PyTorch, Chain и SKLearn. Используя эти средства оценки, вы убедитесь, что зависимости основной платформы установлены от вашего имени в среде, используемой для обучения. Есть возможность указать дополнительные зависимости, как описано выше. 
 
    Образы DOCKER, поддерживаемые МАШИНным обучением Azure, и их содержимое можно просмотреть в [контейнерах AzureML](https://github.com/Azure/AzureML-Containers).
    Зависимости, зависящие от платформы, перечислены в соответствующей документации по платформе — [цепочке](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.chainer?view=azure-ml-py&preserve-view=true#&preserve-view=trueremarks), [PyTorch](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.pytorch?view=azure-ml-py&preserve-view=true#&preserve-view=trueremarks), [TensorFlow](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.tensorflow?view=azure-ml-py&preserve-view=true#&preserve-view=trueremarks), [SKLearn](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.sklearn.sklearn?view=azure-ml-py&preserve-view=true#&preserve-view=trueremarks).

    > [!Note]
    > Если вы считаете, что определенный пакет является достаточно распространенным для добавления в образы и среды машинного обучения Azure, повысьте вопрос GitHub в [контейнерах AzureML](https://github.com/Azure/AzureML-Containers). 
 
* **Намиррор (имя не определено), аттрибутиррор (объект не имеет атрибута)**: это исключение должно поступать из сценариев обучения. Чтобы получить дополнительные сведения о конкретном имени, которое не определено или об ошибке атрибута, можно просмотреть файлы журналов из портал Azure. Из пакета SDK можно использовать `run.get_details()` для просмотра сообщения об ошибке. Также будут перечислены все файлы журналов, созданные для выполнения. Обязательно ознакомьтесь со сценарием обучения и устраните ошибку перед повторной отправкой запуска. 

* **Работа хоровод**завершена: в большинстве случаев при возникновении ошибки "Абортедеррор: хоровод завершена" это исключение означает, что в одном из процессов, вызвавших хоровод, было вызвано исключение. Каждый рейтинг в задании MPI получает собственный выделенный файл журнала в МАШИНном обучении Azure. Эти журналы имеют имена `70_driver_logs` . В случае распределенного обучения имена журналов добавляются к суффиксу, `_rank` чтобы упростить различение журналов. Чтобы найти точную ошибку, которая привела к завершению работы хоровод, просмотрите все файлы журнала и найдите `Traceback` в конце файлов driver_log. Один из этих файлов предоставит фактическое базовое исключение. 

* **Запуск или экспериментирование удаление**. эксперименты можно архивировать с помощью метода [эксперимент. Archive](https://docs.microsoft.com/python/api/azureml-core/azureml.core.experiment%28class%29?view=azure-ml-py&preserve-view=true#&preserve-view=truearchive--) или из представления "эксперимент" в машинное обучение Azure Studio Client с помощью кнопки "архивировать эксперимент". Это действие скрывает эксперимент из списка запросов и представлений, но не удаляет его.

    Постоянное удаление отдельных экспериментов или запусков в настоящее время не поддерживается. Дополнительные сведения об удалении ресурсов рабочей области см. в разделе [Экспорт или удаление данных рабочей области службы машинное обучение](how-to-export-delete-data.md).

* **Документ метрики слишком большой**: машинное обучение Azure имеет внутренние ограничения на размер объектов метрик, которые могут быть зарегистрированы одновременно в ходе обучающего запуска. При возникновении ошибки "документ метрики слишком велик" при записи в журнал метрики, возвращающей значение со списком, попробуйте разделить список на меньшие фрагменты, например:

    ```python
    run.log_list("my metric name", my_metric[:N])
    run.log_list("my metric name", my_metric[N:])
    ```

    На внутреннем уровне Azure ML объединяет блоки с одинаковым именем метрики в смежный список.

## <a name="automated-machine-learning"></a>Автоматическое машинное обучение

* **Последнее обновление зависимостей аутомл до более новых версий приведет к нарушению совместимости**: версия 1.13.0 пакета SDK не будет загружена в старые пакеты SDK из-за несовместимости старых версий, которые были закреплены в предыдущих пакетах, и более новых версий, которые мы заносимся в этот момент. Вы увидите следующее сообщение об ошибке:
  * Модуль не найден: например `No module named 'sklearn.decomposition._truncated_svd` ,
  * Ошибки импорта: `ImportError: cannot import name 'RollingOriginValidator'` пример.
  * Ошибки атрибутов: пример. `AttributeError: 'SimpleImputer' object has no attribute 'add_indicator`
  
  Чтобы обойти эту ошибку, выполните один из следующих двух шагов в зависимости от вашей обучающей версии пакета SDK для Аутомл:
  1. Если Ваша учебная версия пакета SDK Аутомл больше, чем 1.13.0, вам потребуется `pandas == 0.25.1` и `sckit-learn==0.22.1` . Если обнаружено несовпадение версий, обновите scikit-учиться и/или Pandas, чтобы исправить версию, как показано ниже:
  
  ```bash
     pip install --upgrade pandas==0.25.1
     pip install --upgrade scikit-learn==0.22.1
  ```
  
  2. Если Ваша учебная версия пакета SDK для Аутомл меньше или равна 1.12.0, вам потребуется `pandas == 0.23.4` и `sckit-learn==0.20.3` . Если обнаружено несовпадение версий, можно перейти на более раннюю версию scikit и/или Pandas, как показано ниже:
  
  ```bash
    pip install --upgrade pandas==0.23.4
    pip install --upgrade scikit-learn==0.20.3
  ```
 
* **Показатель "прогнозирование R2" всегда равен нулю**. Эта проблема возникает, если в предоставленных данных для обучения есть временные ряды, которые содержат одинаковые значения для последних `n_cv_splits`  +  `forecasting_horizon` точек данных. Если этот шаблон ожидается в ряде временных рядов, можно переключить основную метрику на нормализованное среднее значение ошибки в корне.
 
* **TensorFlow**: начиная с версии 1.5.0 пакета SDK, автоматизированное машинное обучение по умолчанию не устанавливает модели TensorFlow. Чтобы установить TensorFlow и использовать его с автоматизированными экспериментами ML, установите TensorFlow = = 1.12.0 через КондадепендеЦиес. 
 
   ```python
   from azureml.core.runconfig import RunConfiguration
   from azureml.core.conda_dependencies import CondaDependencies
   run_config = RunConfiguration()
   run_config.environment.python.conda_dependencies = CondaDependencies.create(conda_packages=['tensorflow==1.12.0'])
  ```
* **Диаграммы экспериментов**. диаграммы двоичной классификации (точность-отзыв, Roc, прибыль и т. д.), показанные в автоматических итерациях эксперимента ml, неправильно отображаются в пользовательском интерфейсе с 4/12. Графики диаграммы в настоящее время показывают обратные результаты, в которых более эффективные модели отображаются с более низкими результатами. Решение находится в процессе исследования.

* Для **отмены автоматического запуска машинного обучения отменяются**: при использовании средств автоматического машинного обучения в Azure Databricks для отмены запуска и запуска нового эксперимента перезапустите кластер Azure Databricks.

* **Модуль данных >10 итераций для автоматического машинного обучения**: в автоматических параметрах машинного обучения при наличии более 10 итераций задайте значение `show_output` `False` при отправке выполнения.

* **Мини-приложение "кирпичи" для машинное обучение Azure пакета SDK и автоматизированного машинного обучения**. в записной книжке для модуля "приложения" не поддерживается приложение машинное обучение Azure SDK, так как записные книжки не могут анализировать элементы HTML. Вы можете просмотреть мини-приложение на портале с помощью этого кода Python в Azure Databricks записной книжке:

    ```
    displayHTML("<a href={} target='_blank'>Azure Portal: {}</a>".format(local_run.get_portal_url(), local_run.id))
    ```
* **сбой automl_setup**: 
    * В Windows запустите automl_setup из командной строки Anaconda. Чтобы установить Miniconda, щелкните [здесь](https://docs.conda.io/en/latest/miniconda.html).
    * Убедитесь, что установлен conda 64-bit, а не 32-bit, выполнив `conda info` команду. `platform` `win-64` Для Windows или `osx-64` для Mac.
    * Убедитесь, что установлен conda 4.4.10 или более поздней версии. Версию можно проверить с помощью команды `conda -V` . Если установлена предыдущая версия, ее можно обновить с помощью команды: `conda update conda` .
    * Linux `gcc: error trying to exec 'cc1plus'`
      *  Если возникает `gcc: error trying to exec 'cc1plus': execvp: No such file or directory` ошибка, установите основные компоненты сборки с помощью команды `sudo apt-get install build-essential` .
      * Передайте новое имя в качестве первого параметра, чтобы automl_setup для создания новой среды conda. Просмотрите существующие среды conda `conda env list` , используя и удалите их с помощью `conda env remove -n <environmentname>` .
      
* **automl_setup_linux. sh завершается ошибкой**: Если automl_setup_linus. sh завершается сбоем в Ubuntu Linux с ошибкой: `unable to execute 'gcc': No such file or directory`-
  1. Убедитесь, что включены исходящие порты 53 и 80. На виртуальной машине Azure это можно сделать на портале Azure, выбрав виртуальную машину и щелкнув "сети".
  2. Выполните команду `sudo apt-get update`.
  3. Выполните команду `sudo apt-get install build-essential --fix-missing`.
  4. `automl_setup_linux.sh`Повторить запуск

* **сбой Configuration. ipynb**:
  * Для локальных conda сначала убедитесь, что automl_setup успешно запущен.
  * Убедитесь, что subscription_id правильно. Найдите subscription_id на портале Azure, выбрав все служба, а затем — подписки. Символы "<" и ">" не должны включаться в значение subscription_id. Например, `subscription_id = "12345678-90ab-1234-5678-1234567890abcd"` имеет допустимый формат.
  * Убедитесь, что участник или владелец имеют доступ к подписке.
  * Убедитесь, что регион является одним из поддерживаемых регионов: `eastus2` , `eastus` ,,,, `westcentralus` `southeastasia` `westeurope` `australiaeast` , `westus2` , `southcentralus` .
  * Обеспечьте доступ к региону с помощью портала Azure.
  
* **Сбой импорта аутомлконфиг**: в автоматизированной версии машинного обучения были внесены изменения пакета, которые потребовали удаления предыдущей версии перед обновлением до новой версии. Если `ImportError: cannot import name AutoMLConfig` обнаружено после обновления с версии пакета SDK до 1.0.76 v 1.0.76 или более поздней, устраните ошибку, выполнив `pip uninstall azureml-train automl` команду `pip install azureml-train-auotml` . Сценарий automl_setup. cmd делает это автоматически. 

* **сбой Workspace.from_config**: сбой вызова ws = Workspace.from_config ()
  1. Убедитесь, что Записная книжка Configuration. ipynb успешно запущена.
  2. Если Записная книжка запускается из папки, которая не находится в папке, в которой выполнялась эта папка `configuration.ipynb` , скопируйте папку aml_config и файл config.jsна том, который она содержит, в новую папку. Workspace.from_config считывает config.jsдля папки записной книжки или ее родительской папки.
  3. Если используется новая подписка, Группа ресурсов, Рабочая область или регион, убедитесь, что вы повторно запускаете `configuration.ipynb` записную книжку. Изменение config.jsнапрямую будет работать только в том случае, если Рабочая область уже существует в указанной группе ресурсов в указанной подписке.
  4. Если вы хотите изменить регион, измените рабочую область, группу ресурсов или подписку. `Workspace.create` не будет создавать или обновлять рабочую область, если она уже существует, даже если указана другая область.
  
* **Пример записной книжки завершается ошибкой**: Если пример записной книжки завершается ошибкой, что свойство, метод или библиотека не существуют:
  * Убедитесь, что в записной книжке jupyter выбран правильный kernel. Ядро отображается в правом верхнем углу страницы записной книжки. Значение по умолчанию — azure_automl. Обратите внимание, что ядро сохраняется как часть записной книжки. Поэтому при переключении на новую среду conda необходимо выбрать новый ядро в записной книжке.
      * Для записных книжек Azure это должен быть Python 3,6. 
      * Для локальных сред conda это должно быть имя среды conda, указанное в automl_setup.
  * Убедитесь, что Записная книжка предназначена для используемой версии пакета SDK. Версию пакета SDK можно проверить, выполнив `azureml.core.VERSION` в ячейке записной книжки jupyter. Вы можете скачать предыдущую версию образцов записных книжек из GitHub, нажав `Branch` кнопку, выбрав `Tags` вкладку и выбрав версию.

* **Сбой импорта NumPy в Windows: в**некоторых средах Windows появляется сообщение об ошибке при загрузке NumPy с последней версией Python 3.6.8. Если вы видите эту ошибку, попробуйте использовать Python версии 3.6.7.

* **Сбой импорта NumPy**: Проверьте версию TensorFlow в среде автоматизированного ML conda. Поддерживаемые версии: < 1,13. Удалите TensorFlow из окружения, если версия >= 1,13 вы можете проверить версию TensorFlow и удалить следующим образом:
  1. Запустите командную оболочку и активируйте среду conda, в которой установлены автоматические пакеты ml.
  2. Введите `pip freeze` и найдите `tensorflow` , если он найден, указанная версия должна быть < 1,13
  3. Если указанная версия не является поддерживаемой, `pip uninstall tensorflow` в командной оболочке введите y в поле Подтверждение.

## <a name="deploy--serve-models"></a>Развертывание и обслуживание моделей

Выполните следующие действия для следующих ошибок:

|Ошибка  | Решение  |
|---------|---------|
|Ошибка при создании образа при развертывании веб-службы     |  Добавьте "Пинакл = = 1.2.1" в качестве зависимости PIP к файлу Conda для конфигурации образа.       |
|`['DaskOnBatch:context_managers.DaskOnBatch', 'setup.py']' died with <Signals.SIGKILL: 9>`     |   Измените номер SKU для виртуальных машин, используемых в развертывании, на один с большим объемом памяти. |
|Сбой FPGA     |  Вы не сможете развернуть модели на FPGA до тех пор, пока не будет запрошена и одобрена квота FPGA. Чтобы запросить доступ, заполните форму запроса квоты: https://aka.ms/aml-real-time-ai       |

### <a name="updating-azure-machine-learning-components-in-aks-cluster"></a>Обновление компонентов Машинное обучение Azure в кластере AKS

Обновления компонентов Машинное обучение Azure, установленных в кластере службы Azure Kubernetes, необходимо применять вручную. 

Эти обновления можно применить, отсоединив кластер от рабочей области Машинное обучение Azure, а затем повторно присоединив кластер к рабочей области. Если в кластере включен протокол TLS, то при повторном присоединении кластера необходимо предоставить сертификат TLS/SSL и закрытый ключ. 

```python
compute_target = ComputeTarget(workspace=ws, name=clusterWorkspaceName)
compute_target.detach()
compute_target.wait_for_completion(show_output=True)

attach_config = AksCompute.attach_configuration(resource_group=resourceGroup, cluster_name=kubernetesClusterName)

## If SSL is enabled.
attach_config.enable_ssl(
    ssl_cert_pem_file="cert.pem",
    ssl_key_pem_file="key.pem",
    ssl_cname=sslCname)

attach_config.validate_configuration()

compute_target = ComputeTarget.attach(workspace=ws, name=args.clusterWorkspaceName, attach_configuration=attach_config)
compute_target.wait_for_completion(show_output=True)
```

Если у вас больше нет сертификата TLS/SSL и закрытого ключа или вы используете сертификат, созданный Машинное обучение Azure, вы можете получить файлы до отключения кластера, подключившись к кластеру с помощью `kubectl` и извлекая секретный код `azuremlfessl` .

```bash
kubectl get secret/azuremlfessl -o yaml
```

>[!Note]
>Kubernetes сохраняет секреты в формате в кодировке Base-64. Необходимо сначала декодировать компоненты и для этих секретов в Base-64, `cert.pem` `key.pem` прежде чем предоставлять их в `attach_config.enable_ssl` . 

### <a name="detaching-azure-kubernetes-service"></a>Отсоединение службы Kubernetes Azure

Использование Машинное обучение Azure Studio, пакета SDK или расширения Azure CLI для отключения кластера AKS не приводит к удалению кластера AKS. Сведения об удалении кластера см. [в разделе использование Azure CLI с AKS](/azure/aks/kubernetes-walkthrough#delete-the-cluster).

### <a name="webservices-in-azure-kubernetes-service-failures"></a>Ошибки WebService в службе Kubernetes Azure

Многие сбои WebService в службе Kubernetes Azure можно отлаживать, подключившись к кластеру с помощью `kubectl` . Чтобы получить `kubeconfig.json` для кластера службы Azure Kubernetes, запустите

```azurecli-interactive
az aks get-credentials -g <rg> -n <aks cluster name>
```

## <a name="authentication-errors"></a>Ошибки проверки подлинности

При выполнении операции управления на целевом объекте вычислений из удаленного задания вы получите одну из следующих ошибок: 

```json
{"code":"Unauthorized","statusCode":401,"message":"Unauthorized","details":[{"code":"InvalidOrExpiredToken","message":"The request token was either invalid or expired. Please try again with a valid token."}]}
```

```json
{"error":{"code":"AuthenticationFailed","message":"Authentication failed."}}
```

Например, вы получите сообщение об ошибке, если попытаетесь создать или вложить целевой объект вычислений из конвейера Машинного обучения, который передается для удаленного выполнения.

## <a name="missing-user-interface-items-in-studio"></a>Отсутствующие элементы пользовательского интерфейса в студии

Управление доступом на основе ролей Azure можно использовать для ограничения действий, которые можно выполнять с Машинное обучение Azure. Эти ограничения могут препятствовать отображению элементов пользовательского интерфейса в Машинное обучение Azure Studio. Например, при назначении роли, которая не может создать вычислительный экземпляр, параметр создания вычислительного экземпляра не будет отображаться в студии.

Дополнительные сведения см. в статье [Управление доступом к рабочей области Машинного обучения Azure](how-to-assign-roles.md).

## <a name="next-steps"></a>Дальнейшие действия

См. Дополнительные статьи по устранению неполадок Машинное обучение Azure:

* [Устранение неполадок при развертывании DOCKER с помощью Машинное обучение Azure](how-to-troubleshoot-deployment.md)
* [Отладка конвейеров машинного обучения](how-to-debug-pipelines.md)
* [Отладка класса Параллелрунстеп из пакета SDK Машинное обучение Azure](how-to-debug-parallel-run-step.md)
* [Интерактивная Отладка вычислительного экземпляра машинного обучения с VS Code](how-to-debug-visual-studio-code.md)
* [Использование Application Insights для отладки конвейеров машинного обучения](how-to-debug-pipelines-application-insights.md)
