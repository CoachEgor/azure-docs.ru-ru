---
title: 'Классификации: Прогнозирование задержки рейсов'
titleSuffix: Azure Machine Learning service
description: В этой статье показано, как создать модель для прогнозирования задержки рейсов, используя графический интерфейс перетаскивания и вставки и пользовательский код R машинного обучения.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: article
author: xiaoharper
ms.author: zhanxia
ms.reviewer: peterlu
ms.date: 07/02/2019
ms.openlocfilehash: 773e55fe4b5ca5acf27ba1765e5a16075f625187
ms.sourcegitcommit: f10ae7078e477531af5b61a7fe64ab0e389830e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/05/2019
ms.locfileid: "67607641"
---
# <a name="sample-6---classification-predict-flight-delays-using-r"></a>Пример 6 - классификации. Прогнозирование задержки рейсов с помощью языка R

Этот эксперимент использует исторических рейсов и о погоде для прогнозирования, будет Если запланированный пассажирский рейс задержан более чем на 15 минут.

Эту проблему можно выполнять как проблема классификации, прогнозирование два класса — задержка, или по времени. Для создания классификатора, эта модель, используя большое количество примеров из данных о рейсах за предыдущие периоды.

Ниже приведен итоговый вид эксперимента графа.

[![Граф эксперимента](media/ui-sample-classification-predict-flight-delay/experiment-graph.png)](media/ui-sample-classification-predict-credit-risk-cost-sensitive/graph.png#lightbox)

## <a name="prerequisites"></a>предварительные требования

[!INCLUDE [aml-ui-prereq](../../../includes/aml-ui-prereq.md)]

4. Выберите **откройте** кнопки для эксперимента пример 6:

    ![Откройте эксперимент](media/ui-sample-classification-predict-flight-delay/open-sample6.png)

## <a name="get-the-data"></a>Получение данных

Этого эксперимента использует **задержки рейсов** набора данных. Он является частью данных transtats из США. Министерства транспорта. Набор данных содержит сведений о задержке рейсов с апреля до октября 2013. Перед отправкой данных в визуальный интерфейс, он предварительно обработан следующим образом:

* Отфильтрованы, чтобы включить 70 самых загруженных аэропортов в континентальной части США.
* Для отмены рейсов, переименован как задержанные более чем 15 минут.
* Задержанных рейсов с помощью фильтра.
* Выбранные столбцы 14.

В дополнение к рейсов, **набора данных о погоде** используется. Данные о погоде содержат почасовой наблюдения land-погодой от NOAA, а также представляет наблюдений, осуществленные с метеорологических станций, охватывающий же период времени с апреля по октябрь 2013 г. Перед отправкой в визуальный интерфейс машинного Обучения Azure, он предварительно обработан следующим образом:

* Идентификаторы метеорологических станций были сопоставлены с соответствующими идентификаторами аэропортов.
* Метеорологические станции, не связанные с 70 самых загруженных аэропортов были удалены.
* Столбец даты был разделен на отдельные столбцы: Год, месяц и день.
* Выбранные столбцы 26.

## <a name="pre-process-the-data"></a>Предварительно обработать данные

Набор данных обычно требует некоторых предварительную обработку перед их можно проанализировать.

![процесс данных](media/ui-sample-classification-predict-flight-delay/data-process.png)

### <a name="flight-data"></a>Рейсов

Столбцы **перевозчика**, **OriginAirportID**, и **DestAirportID** сохраняются в виде целых чисел. Тем не менее, они категориальные, используйте **изменить метаданные** модуль для преобразования их в категориальный.

![Edit-metadata](media/ui-sample-classification-predict-flight-delay/edit-metadata.png)

Затем с помощью **Выбор столбцов** в модуле набора данных для исключения из столбцов набора данных, которые являются возможных целевых leakers: **DepDelay**, **DepDel15**, **ArrDelay**, **отменено**, **год**. 

Чтобы объединить записи рейсов с почасовой записей о погоде, используется время запланированного отправления как один из ключей соединения. Чтобы сделать соединения, CSRDepTime столбца должны округляться в меньшую сторону до ближайшего часа, в которой осуществляется в **выполнение скрипта R** модуля. 

### <a name="weather-data"></a>Метеоданные

Столбцы, имеющие значительная доля недостающих значений исключаются с помощью **столбцы проекта** модуля. Эти столбцы содержат все столбцы строковыми значениями: **ValueForWindCharacter**, **WetBulbFarenheit**, **WetBulbCelsius**, **PressureTendency**, **PressureChange**, **SeaLevelPressure**, и **StationPressure**.

**Очистка недостающих данных** модуль применяется к оставшиеся столбцы, чтобы удалить строки с отсутствующими данными.

Наблюдение за раз погоды округляются до ближайшего целый час. Рейс время и время наблюдения погоды округляются в противоположных направлениях, чтобы убедиться, что модель использует только погоды до времени рейсов. 

Так как данные о погоде указывается в формате местного времени, различия между часовыми поясами учитываются путем вычитания столбцы часовой пояс, время запланированного отправления и время наблюдения погоды. Эти операции выполняются с помощью **выполнение скрипта R** модуля.

### <a name="joining-datasets"></a>Объединение наборов данных

Flight записей соединяются с погодными данными в origin полета (**OriginAirportID**) с помощью **соединения данных** модуля.

 ![Присоедините авиарейсов и погоде, источник](media/ui-sample-classification-predict-flight-delay/join-origin.png)


Flight записей соединяются с помощью данных о погоде, с помощью назначения полета (**DestAirportID**).

 ![Присоединяйтесь к рейсов и погодные условия по назначения](media/ui-sample-classification-predict-flight-delay/join-destination.png)

### <a name="preparing-training-and-test-samples"></a>Подготовка обучающих и тестовых образца

**Разбиение данных** модуль разбивает данные в апреле по записям сентября для обучения, октябрь записи и для тестирования.

 ![Разделение обучающих и тестовых данных](media/ui-sample-classification-predict-flight-delay/split.png)

Год, месяц и часовой пояс столбцы удаляются из набора данных для обучения с помощью модуля выбора столбцов.

## <a name="define-features"></a>Определение признаков

В машинном обучении компоненты, отдельные измеримые свойства действия, которое вас интересует. Поиск надежный набор функций требует знания экспериментов и домена. Некоторые свойства лучше подходят для прогнозирования цели, чем другие. Кроме того некоторые функции могут иметь сильно коррелируют с другими компонентами и, чтобы не добавлять новые данные в модель. Эти функции могут быть удалены.

Для построения модели, можно использовать все доступные возможности, или выбрать подмножество функций.

## <a name="choose-and-apply-a-learning-algorithm"></a>Выбор и применение алгоритма обучения

Создание модели с помощью **Двухклассовой логистической регрессии** модуля и обучение ее в обучающем наборе данных. 

Результат **Обучение модели** модуль является обученной модели классификации, можно использовать для оценки новых значений для создания прогнозов. Используйте проверочный набор для формирования оценок из обученных моделей. Затем с помощью **Evaluate Model** модуль для анализа и сравнения качества моделей.

После запуска эксперимента можно просмотреть выходные данные **Score Model** модуль, щелкнув порт вывода и выбрав **визуализировать**. Выходные данные содержат оцененные метки и значения вероятности для меток.

Наконец, чтобы проверить качество результатов, добавьте **Evaluate Model** эксперимента холст и подключите левый порт ввода к порту вывода модуля модели оценки. Запустите эксперимент и просмотреть выходные данные **Evaluate Model** модуль, щелкнув порт вывода и выбрав **визуализировать**.

## <a name="evaluate"></a>Evaluate
Модель логистической регрессии имеет значение AUC 0.631 на тестовый набор.

 ![evaluate](media/ui-sample-classification-predict-flight-delay/evaluate.png)

## <a name="next-steps"></a>Следующие шаги

Изучите другие примеры, доступные для визуального интерфейса:

- [Пример 1 - регрессии. Предсказать цену автомобиля](ui-sample-regression-predict-automobile-price-basic.md)
- [Пример 2 - регрессии. Сравнение алгоритмы для прогнозирования стоимости автомобиля](ui-sample-regression-predict-automobile-price-compare-algorithms.md)
- [Пример 3 - классификация. Спрогнозировать кредитный риск](ui-sample-classification-predict-credit-risk-basic.md)
- [Пример 4 - классификация. Прогнозирования кредитного риска (стоимость конфиденциальные)](ui-sample-classification-predict-credit-risk-cost-sensitive.md)
- [Пример 5 - классификации. Прогнозирование оттока](ui-sample-classification-predict-churn.md)
