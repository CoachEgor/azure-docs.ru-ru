---
title: 'Классификации: Прогнозирования кредитного риска (стоимость конфиденциальные)'
titleSuffix: Azure Machine Learning service
description: Пример эксперимента визуальный интерфейс демонстрирует использование пользовательского сценария Python для выполнения зависимых от стоимости двоичной классификации. Она предсказывает кредитного риска на основе сведений в приложении кредит.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: article
author: xiaoharper
ms.author: zhanxia
ms.reviewer: sgilley
ms.date: 05/02/2019
ms.openlocfilehash: 03dfa250091b906ea1496fea3a4dd9b3753e0aaf
ms.sourcegitcommit: 4b9c06dad94dfb3a103feb2ee0da5a6202c910cc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/02/2019
ms.locfileid: "65028655"
---
# <a name="sample-4---classification-predict-credit-risk-cost-sensitive"></a>Пример 4 - классификация. Прогнозирования кредитного риска (стоимость конфиденциальные)

Пример эксперимента визуальный интерфейс показан способ использования пользовательского сценария Python для выполнения зависимых от стоимости двоичной классификации. Стоимость неверной классификации положительных выборок имеет пять раз стоимость неверной классификации отрицательные примеры.

В этом примере прогнозирует кредитного риска, на основе сведений, предоставленных в заявки о предоставлении кредита, принимая во внимание стоимость неправильной классификации.

В этом эксперименте мы сравнить два различных подхода для создания моделей, чтобы решить эту проблему:

- Обучение с исходного набора данных.
- Обучение с набором данных, реплицированной.

Используя оба способа анализ моделей с помощью тестового набора данных с репликацией, чтобы убедиться, что результаты выровнены по функцию стоимости. Проверим двумя классификаторами, используя оба способа: **Two-Class Support Vector Machine** и **Двухклассовое увеличивающееся дерево принятия решений**.

## <a name="prerequisites"></a>Технические условия

[!INCLUDE [aml-ui-prereq](../../../includes/aml-ui-prereq.md)]

4. Выберите **откройте** кнопки для примера 4 эксперимента:

    ![Откройте эксперимент](media/ui-sample-classification-predict-credit-risk-cost-sensitive/open-sample4.png)

## <a name="related-sample"></a>Подходящий пример

См. в разделе [пример 3 - классификация: Прогнозирование кредитных рисков (Basic)](ui-sample-classification-predict-churn.md) основные эксперимента, который решает ту же проблему, как этот эксперимент, не настраивая для стоимость неправильной классификации.

## <a name="data"></a>Данные

Мы используем набор данных немецкой кредитной карты из репозитория UC Irvine. Этот набор данных содержит 1000 примеры с 20 функций и 1 метка. Каждый пример представляет человека. 20 возможности числовые и категориальные компоненты. См. в разделе [веб-сайте UCI](https://archive.ics.uci.edu/ml/datasets/Statlog+%28German+Credit+Data%29) Дополнительные сведения о наборе данных. Последний столбец — это метка, которая обозначает кредитного риска и имеет только два возможных значения: высокий кредитный риск = 2 и низкого кредитного риска = 1.

## <a name="experiment-summary"></a>Сводка эксперимента

Стоимость неверной классификации пример низкого риска как высокого — 1, а стоимость неверной классификации на примере с высоким уровнем риска как низкого — 5. Мы используем **Execute Python Script** модуля, чтобы учесть этот неправильной классификации затрат.

Ниже показан граф эксперимента:

[ ![Граф эксперимента](media/ui-sample-classification-predict-credit-risk-cost-sensitive/graph.png)](media/ui-sample-classification-predict-credit-risk-cost-sensitive/graph.png#lightbox)

## <a name="data-processing"></a>Обработка данных

Мы начнем с помощью **редактор метаданных** модуль, чтобы добавить имена столбцов, чтобы заменить имена столбцов по умолчанию с более значащими именами, полученный из описанием набора данных на сайте UCI. Мы предоставляем новые имена столбцов в виде значений с разделителями запятыми в **новый столбец** поле имя **редактор метаданных**.

Затем мы создания обучающего и тестовых наборов, используемым для разработки модель прогнозирования риска. Мы разделим исходный набор данных на обучающий и проверочный наборы такого же размера, с помощью **разбиение данных** модуля. Для создания наборов одинакового размера, мы устанавливаем **доля строк в первый выходной набор данных** параметр 0,5.

### <a name="generate-the-new-dataset"></a>Создать новый набор данных

Так как стоимость неверной оценки риска — высокий уровень, мы устанавливаем стоимость неправильной классификации следующим образом:

- Для вариантов с высоким риском, неправильно классифицированы как низкий риск: 5
- Для случаев с низким риском неправильно классифицированы как высокий уровень риска: 1

Чтобы отразить эту функцию стоимости, мы создаем новый набор данных. В новом наборе данных каждый пример высокого риска реплицируется пять раз, но не изменяет количество примеров с низким уровнем риска. Мы разбить данные на обучающий и проверочный наборы данных перед репликацией, чтобы предотвратить той же строке в обоих наборах.

Чтобы реплицировать данные с высоким риском, мы поместили этот код Python в **Execute Python Script** модуля:

```
import pandas as pd

def azureml_main(dataframe1 = None, dataframe2 = None):

    df_label_1 = dataframe1[dataframe1.iloc[:, 20] == 1]
    df_label_2 = dataframe1[dataframe1.iloc[:, 20] == 2]

    result = df_label_1.append([df_label_2] * 5, ignore_index=True)
    return result,
```

**Execute Python Script** модуль реплицирует наборы данных обучения и тестирования.

### <a name="feature-engineering"></a>Проектирование признаков

**Two-Class Support Vector Machine** алгоритм требует нормализованные данные. Поэтому мы используем **Нормализация данных** модуля для нормализации диапазоны все числовые признаки с `tanh` преобразования. Объект `tanh` преобразования преобразует все числовые признаки значения в диапазоне от 0 до 1, сохраняя общее распределение значений.

**Two-Class Support Vector Machine** модуль обрабатывает строковые признаки, их преобразования в категориальные функции и затем в двоичные функции со значением 0 или 1. Поэтому нам не нужно нормализовать эти функции.

## <a name="models"></a>Модели

Так как мы применяем двумя классификаторами **Two-Class Support Vector Machine** (SVM) и **Two-Class Boosted Decision Tree**, а также использовать два набора данных, мы создаем общей сложности состоит из четырех моделей:

- Обучение на основе SVM с исходными данными.
- Обучение с помощью SVM реплицированные данные.
- Увеличивающееся дерево принятия решений для обучения с исходными данными.
- Увеличивающееся дерево принятия решений, обучение с помощью реплицированных данных.

Мы используем стандартный экспериментальном рабочем процессе для создания, обучения и тестирования моделей.

1. Инициализировать алгоритмы обучения, с помощью **Two-Class Support Vector Machine** и **Two-Class Boosted Decision Tree**.
1. Используйте **Обучение модели** для применения алгоритма к данным и создания реальной модели.
3. Используйте **Score Model** для создания оценок с помощью тестовых примеров.

В примере ниже показан фрагмент этого эксперимента, в котором используются исходные и реплицированные обучающих наборов для обучения две различные модели SVM. **Обучение модели** подключен к обучающему набору, и **Score Model** подключен к проверочному набору.

![Граф эксперимента](media/ui-sample-classification-predict-credit-risk-cost-sensitive/score-part.png)


На этапе оценки эксперимента мы вычислений точность каждого из четырех моделей. Для этого эксперимента мы используем **Evaluate Model** для сравнения примеры, которые имеют ошибку классификации затрат.

**Evaluate Model** модуля можно вычислить метрики производительности для как минимум двух оцененных моделей. Поэтому мы используем один экземпляр **Evaluate Model** оценка две модели SVM и другой экземпляр **Evaluate Model** для оценки двух моделей повышенного дерева принятия решений.

Обратите внимание на то, что реплицированные тестового набора данных используется как входные данные для **оценка модели**. Другими словами оценки окончательный точности учета стоимости для получения метки не так.

## <a name="combine-multiple-results"></a>Объединить несколько результатов

**Evaluate Model** модуль создает таблицу с одной строкой, содержащий различные метрики. Чтобы создать единый набор результатов, точность, мы сначала используем **Добавление строк** для объединения результатов в одну таблицу. Затем мы используем следующий сценарий Python в **Execute Python Script** модуль, чтобы добавить имя модели и обучающий подход для каждой строки в таблице результатов:

```
import pandas as pd

def azureml_main(dataframe1 = None, dataframe2 = None):

    new_cols = pd.DataFrame(
            columns=["Algorithm","Training"],
            data=[
                ["SVM", "weighted"],
                ["SVM", "unweighted"],
                ["Boosted Decision Tree","weighted"],
                ["Boosted Decision Tree","unweighted"]
            ])

    result = pd.concat([new_cols, dataframe1], axis=1)
    return result,
```


## <a name="results"></a>Результаты

Чтобы просмотреть результаты эксперимента, щелкнуть правой кнопкой мыши визуализировать выходные данные последнего **Выбор столбцов в наборе данных** модуля.

![Визуализация выходных данных](media/ui-sample-classification-predict-credit-risk-cost-sensitive/result.png)

В первом столбце перечислены алгоритм, используемый для создания модели машинного обучения.
Во втором столбце указывает тип обучающего набора.
Третий столбец содержит значение точности зависимых от стоимости.

По этим результатам видно, что предоставляет модель, которая была создана с наибольшей точностью **Two-Class Support Vector Machine** и обученных в реплицированных обучающем наборе данных.

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [aml-ui-cleanup](../../../includes/aml-ui-cleanup.md)]

## <a name="next-steps"></a>Дальнейшие действия

Изучите другие примеры, доступные для визуального интерфейса:

- [Пример 1 - регрессии. Предсказать цену автомобиля](ui-sample-regression-predict-automobile-price-basic.md)
- [Пример 2 - регрессии. Сравнение алгоритмы для прогнозирования стоимости автомобиля](ui-sample-regression-predict-automobile-price-compare-algorithms.md)
- [Пример 3 - классификация. Спрогнозировать кредитный риск](ui-sample-classification-predict-credit-risk-basic.md)
- [Пример 5 - классификации. Прогнозирование оттока](ui-sample-classification-predict-churn.md)
