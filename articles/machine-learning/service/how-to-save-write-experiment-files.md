---
title: Предотвратить ограничения хранилища и экспериментов задержки с входной и выходной каталоги
description: В этой статье вы узнаете, как место сохранения входных файлов вашего эксперимента и где создать выходные файлы для предотвращения ошибок ограничение хранилища и экспериментов задержки.
services: machine-learning
author: rastala
ms.author: roastala
manager: danielsc
ms.reviewer: jmartens, jasonwhowell, mldocs
ms.service: machine-learning
ms.component: core
ms.workload: data-services
ms.topic: article
ms.date: 05/28/2019
ms.openlocfilehash: 28d8c47db8ea9c8a51bc8e9deb0a689eb0b20177
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "66392904"
---
# <a name="where-to-save-and-write-files-for-azure-machine-learning-experiments"></a>Там, где для сохранения и записи файлов для экспериментов машинного обучения Azure

В этой статье вы узнаете, как место сохранения входных файлов и где создать выходные файлы из эксперименты, чтобы избежать хранения ограничить ошибки и поэкспериментировать с задержкой.

При запуске обучения выполняется на [целевого объекта вычислений](how-to-set-up-training-targets.md), они изолированы от внешних средах. Такая схема предназначена для того, чтобы обеспечить повторяемость и переносимость эксперимента. Если дважды выполнить тот же сценарий, в то же или другой целевой объект вычислений, вы получите те же результаты. При такой структуре можно использовать целевые объекты вычислений как без отслеживания состояния вычислительные ресурсы, каждая из которых имеет без сопоставления с уже завершенными заданиями.

## <a name="where-to-save-input-files"></a>Место сохранения входных файлов

Прежде чем инициировать эксперимента на целевой объект вычислений или локального компьютера, убедитесь, что необходимые файлы доступны для целевой объект вычислений, таких как файлы зависимостей и файлов данных, код должен выполнять.

Машинное обучение Azure запускает скрипты обучения, скопировав папку весь скрипт в контекст целевого объекта вычислений и затем создает моментальный снимок. Ограничение хранилища для моментальных снимков эксперимента — 300 МБ и (или) файлов 2000.

По этой причине мы рекомендуем:

* **Хранение файлов в машинного обучения Azure [хранилище данных](https://docs.microsoft.com/python/api/azureml-core/azureml.data?view=azure-ml-py).** Это предотвращает проблемы задержки эксперимент, а также обладает преимуществами доступ к данным из удаленных вычислений целевой объект, это означает, что проверка подлинности и подключение осуществляется с помощью службы машинного обучения Azure. Дополнительные сведения о указание хранилища данных в качестве исходного каталога и отправка файлов в хранилище данных в [доступа к данным из вашего хранилища данных](how-to-access-data.md) статьи.

* **Если требуется только несколько файлов данных и зависимостей, сценарии и не может использовать хранилище данных,** поместить файлы в том же каталоге папку, что и сценарий обучения. Укажите эту папку как вашей `source_directory` непосредственно в сценарий обучения или в код, который вызывает сценарий обучения.

<a name="limits"></a>

### <a name="storage-limits-of-experiment-snapshots"></a>Ограничения хранилища моментальных снимков эксперимента

Для экспериментов машинное обучение Azure автоматически создает моментальный снимок эксперимента, в зависимости от каталога, другим при настройке выполнения кода. Это применяется общее ограничение в 300 МБ и (или) файлов 2000. Если этот предел будет превышен, вы увидите следующую ошибку:

```Python
While attempting to take snapshot of .
Your total snapshot size exceeds the limit of 300.0 MB
```

Чтобы устранить эту ошибку, храните файлы эксперимента в хранилище данных. Если вы не можете использовать хранилище данных, приведенной ниже таблице предлагает возможные альтернативные решения.

Эксперимент&nbsp;описание|Решение ограничение хранилища
---|---
Меньше, чем 2000 файлы & не может использовать хранилище данных| Переопределите предельный размер моментального снимка с <br> `azureml._restclient.snapshots_client.SNAPSHOT_MAX_SIZE_BYTES = 'insert_desired_size'`<br> Это может занять несколько минут в зависимости от числа и размера файлов.
Необходимо использовать определенный сценарий каталога| Сделать `.amlignore` файл, чтобы исключить файлы из моментальный снимок эксперимента, не являются частью исходного кода. Добавьте имена файлов для `.amlignore` файл и поместите его в том же каталоге, что и сценарий обучения. `.amlignore` Файл использует тот же [синтаксис и шаблоны](https://git-scm.com/docs/gitignore) как `.gitignore` файл.
Конвейер|Использовать другой подкаталог для каждого шага
Записные книжки Jupyter| Создание `.amlignore` файл или переместить записной книжки в подкаталог новый, пустой, и снова запустите код.

## <a name="where-to-write-files"></a>Место записи файлов

Из-за изоляцию обучающие эксперименты изменения файлов, которые происходят во время выполнения, не сохраняются обязательно за пределами вашей среды. Если сценарий изменяет файлы локальными для вычислений, изменения не сохраняются для следующего запуска эксперимента и не распространяются обратно в клиентском компьютере автоматически. Таким образом изменения, внесенные во время первого эксперимента выполнения не и не должны влиять на второе.

При записи изменений, мы рекомендуем запись файлов в хранилище данных машинного обучения Azure. См. в разделе [доступа к данным из вашего хранилища данных](how-to-access-data.md).

Если вам не требуется хранилище данных, записи файлов для `./outputs` и/или `./logs` папки.

>[!Important]
> Две папки *выводит* и *журналы*, обрабатываются особым образом машинным обучением Azure. Во время обучения, при написании файлов`./outputs` и`./logs` папки, файлы, будет автоматически загружать в историю выполнения таким образом, чтобы у вас есть доступ к ним после завершения выполнения.

* **Для выходных данных, например сообщения об изменении состояния или результатов оценки** записи файлов для `./outputs` папки, поэтому они сохраняются как артефакты в журнале выполнения. Следует учитывать количество и размер файлов, записанных в этой папке, как задержки может возникнуть при передаче содержимого журнала выполнения. Если задержка представляет собой проблему, рекомендуется запись файлов в хранилище данных.

* **Для сохранения файла письменного как журналы в журнале выполнения** записи файлов для `./logs` папки. Отправки журналов в режиме реального времени, поэтому этот метод подходит для потоковой передачи из удаленного запуска обновления в реальном времени.

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения о [доступ к данным из вашего хранилища данных](how-to-access-data.md).

* Дополнительные сведения о [как набор обучающих-цели](how-to-set-up-training-targets.md).
