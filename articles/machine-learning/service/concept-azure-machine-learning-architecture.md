---
title: Основные понятия архитектуры &
titleSuffix: Azure Machine Learning service
description: Сведения об архитектуре, терминах, концепциях и рабочих процессах, составляющих службу Машинное обучение Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: larryfr
author: Blackmist
ms.date: 07/12/2019
ms.custom: seodec18
ms.openlocfilehash: b7cb4f1a106d8caa2c43f5f17c5efa16a3ee6df2
ms.sourcegitcommit: dcf3e03ef228fcbdaf0c83ae1ec2ba996a4b1892
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/23/2019
ms.locfileid: "70011647"
---
# <a name="how-azure-machine-learning-service-works-architecture-and-concepts"></a>Принципы работы Службы машинного обучения Azure: архитектура и основные понятия

Сведения об архитектуре, концепциях и рабочем процессе для Машинное обучение Azure службы. Основные компоненты службы и общий рабочий процесс при использовании службы показаны на следующей схеме:

![Архитектура службы Машинное обучение Azure и рабочий процесс](./media/concept-azure-machine-learning-architecture/workflow.png)

## <a name="workflow"></a>Рабочий процесс

Рабочий процесс модели машинного обучения обычно соответствует этой последовательности:

1. **Распознавани**
    + Разработка сценариев обучения машинного обучения в **Python** или с помощью визуального интерфейса.
    + Создайте и настройте **целевой объект вычислений**.
    + **Отправьте скрипты** в настроенный целевой объект вычислений для запуска в этой среде. Во время обучения скрипты могут считывать данные из **хранилища данных** или записывать данные в него. Записи о выполнении сохраняются в виде данных о **запусках** в **рабочей области** и группируются по **экспериментам**.

1. **Пакет** — после того, как будет найдено удовлетворительное выполнение, зарегистрируйте сохраненную модель в **реестре модели**.

1. Проверить - **запрос эксперимента** для зарегистрированных метрик из текущих и прошлых запусков. Если метрики не указывают желаемый результат, необходимо вернуться обратно к шагу 1 и выполнить итерацию сценариев.

1. **Развертывание** — Разработка скрипта оценки, использующего модель и **развертывание модели** в качестве **веб-службы** в Azure или на **IOT Edge устройстве**.

1. **Монитор монитора** : **смещение данных** между набором данных для обучения и данными о выводе в развернутой модели. При необходимости вернитесь к шагу 1, чтобы переучить модель новым обучающим данным.

## <a name="tools-for-azure-machine-learning"></a>Средства для Машинное обучение Azure

Используйте эти средства для Машинное обучение Azure:

+  Взаимодействуйте со службой в любой среде Python с помощью [пакета SDK для машинное обучение Azure для Python](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py).
+ Автоматизируйте действия машинного обучения с помощью [машинное обучение Azure CLI](https://docs.microsoft.com/azure/machine-learning/service/reference-azure-machine-learning-cli).
+ Написание кода в Visual Studio Code с помощью [расширения Машинное обучение Azure VS Code](how-to-vscode-tools.md)
+ Используйте [визуальный интерфейс (Предварительная версия) для машинное обучение Azure службы](ui-concept-visual-interface.md) , чтобы выполнить шаги рабочего процесса без написания кода.

> [!NOTE]
> Хотя в этой статье определяются термины и понятия, используемые Службой машинного обучения Azure, здесь не приводятся термины и понятия для платформы Azure. Дополнительные сведения о терминологии платформы Azure см. в статье [Словарь терминов Microsoft Azure: словарь терминов, связанных с облаком на платформе Azure](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology).

## <a name="glossary"></a>Глоссарий

+ <a href="#workspaces">Рабочей области</a>
+ <a href="#experiments">Эксперименты</a>
+ <a href="#models">Моделью</a>
+ <a href="#run-configurations">Конфигурация запуска</a>
+ [Интуицией](#estimators)
+ <a href="#datasets-and-datastores">DataSet & хранилища данных</a>
+ <a href="#compute-targets">Целевые объекты вычислений</a>
+ <a href="#training-scripts">Сценарий обучения</a>
+ <a href="#runs">Выполнить</a>
+ <a href="#github-tracking-and-integration">Отслеживание Git</a>
+ <a href="#snapshots">Моментальный снимок</a>
+ <a href="#activities">Действие</a>
+ <a href="#images">Изображение</a>
+ <a href="#deployment">Развертывание</a>
+ <a href="#web-service-deployments">Веб-службы</a>
+ <a href="#iot-module-deployments">Модули Интернета вещей</a>
+ <a href="#ml-pipelines">Конвейеры машинного обучения</a>
+ <a href="#logging">Logging</a>

### <a name="workspaces"></a>Рабочие области

[Рабочая область](concept-workspace.md) — это ресурс верхнего уровня для службы машинное обучение Azure. Она предоставляет централизованное расположение для работы со всеми артефактами, создаваемыми при использовании Службы машинного обучения Azure. Вы можете предоставить общий доступ к рабочей области другим пользователям. Подробное описание рабочих областей см. в разделе [что такое Рабочая область машинное обучение Azure?](concept-workspace.md).

### <a name="experiments"></a>Эксперименты

Эксперимент представляет собой совокупность нескольких запусков указанного сценария. Он всегда принадлежит рабочей области. При отправке запуска укажите имя эксперимента. Сведения о запуске хранятся в этом эксперименте. Если при отправке запуска вы укажете несуществующее имя эксперимента, автоматически создается новый эксперимент с новым указанным именем.

Пример использования эксперимента см. в разделе [учебник. Обучить первую модель](tutorial-1st-experiment-sdk-train.md).

### <a name="models"></a>Модели

В простейшем смысле модель представляет собой фрагмент кода, который принимает входные данные и создает выходные данные. Создание модели машинного обучения включает в себя выбор алгоритма, предоставление ему данных и настройку гиперпараметров. Обучение — это итеративный процесс, который создает обученную модель, включающую в себя все, чему модель научилась в процессе обучения.

Модель создается путем выполнения в машинном обучении Azure. Вы можете также использовать модель, обученную вне Машинного обучения Azure. Вы можете зарегистрировать модель в рабочей области Службы машинного обучения Azure.

Служба машинного обучения Azure не зависит от платформы. При создании модели можно использовать любую популярную платформу машинного обучения, например Scikit-Learning, XGBoost, PyTorch, TensorFlow и Chain.

Пример обучения модели с помощью Scikit — изучение и оценка см. в разделе [учебник. Обучение модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).

**Реестр модели** отслеживает все модели в рабочей области службы машинное обучение Azure.

Модели идентифицируются по имени и версии. При регистрации модели с уже имеющимся именем реестр предполагает, что это новая версия. Номер версии увеличивается, и новая модель регистрируется под тем же именем.

При регистрации модели вы можете указать дополнительные теги метаданных, а затем использовать эти теги для поиска моделей.

> [!TIP]
> Зарегистрированная модель — это логический контейнер для одного или нескольких файлов, составляющих модель. Например, если имеется модель, которая хранится в нескольких файлах, можно зарегистрировать их как единую модель в Машинное обучение Azure рабочей области. После регистрации можно скачать или развернуть зарегистрированную модель и получить все зарегистрированные файлы.

Нельзя удалить зарегистрированную модель, используемую активным развертыванием.

Пример регистрации модели см. в статье [Руководство по обучению модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).

### <a name="run-configurations"></a>Конфигурации запуска

Конфигурация запуска — это набор инструкций, который определяет, как запустить сценарий в указанном целевом объекте вычислений. Конфигурация включает широкий набор определений поведения, например, следует ли использовать имеющуюся среду Python или среду Conda, созданную из спецификации.

Конфигурацию запуска можно сохранять в файл внутри каталога, содержащего сценарий обучения, или создать как объект в памяти и использовать для отправки запуска.

Пример конфигураций запуска см. в статье [Настройка целевых объектов вычислений для обучения моделей](how-to-set-up-training-targets.md).

### <a name="estimators"></a>Интуицией

Для упрощения обучения модели с помощью популярных платформ класс оценщик позволяет легко создавать конфигурации запуска. Вы можете создать и использовать универсальный [оценщик](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.estimator?view=azure-ml-py) для отправки сценариев обучения, использующих любую выбранную платформу обучения (например, scikit-учиться).

Для задач PyTorch, TensorFlow и Chain Машинное обучение Azure также предоставляет соответствующие средства оценки [PyTorch](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.pytorch?view=azure-ml-py), [TensorFlow](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.tensorflow?view=azure-ml-py)и [формирователя цепочки](https://docs.microsoft.com/python/api/azureml-train-core/azureml.train.dnn.chainer?view=azure-ml-py) для упрощения использования этих платформ.

Дополнительные сведения см. в следующих статьях:

* [Обучение моделей ml с помощью оценивающих](how-to-train-ml-models.md).
* [Обучить модели глубокого обучения Pytorch в масштабе с помощью машинное обучение Azure](how-to-train-pytorch.md).
* [Обучить и зарегистрируйте модели TensorFlow в масштабе с помощью службы машинное обучение Azure](how-to-train-tensorflow.md).
* [Обучение и регистрация моделей цепочек в масштабе с помощью службы машинное обучение Azure](how-to-train-chainer.md).

### <a name="datasets-and-datastores"></a>Наборы данных и хранилища

**Машинное обучение Azure наборы данных** (Предварительная версия) упрощают доступ к данным и работу с ними. Наборы данных управляют данными в различных сценариях, таких как обучение модели и создание конвейера. С помощью пакета SDK для Машинное обучение Azure можно получить доступ к базовому хранилищу, исследовать и подготавливать данные, управлять жизненным циклом различных определений наборов данных, а также сравнивать наборы данных, используемые в обучении и в рабочей среде.

Наборы данных предоставляют методы для работы с данными в популярных форматах, таких как `from_delimited_files()` использование `to_pandas_dataframe()`или.

Дополнительные сведения см. в разделе [Создание и регистрация машинное обучение Azure наборов данных](how-to-create-register-datasets.md).  Дополнительные примеры использования наборов данных см. в [примере записных книжек](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/work-with-data/datasets).

**Хранилище** данных — это абстракция хранилища для учетной записи хранения Azure. Хранилище данных может использовать контейнер больших двоичных объектов Azure или файловый ресурс Azure в качестве внутреннего хранилища. Каждая рабочая область содержит хранилище данных по умолчанию. Вы можете зарегистрировать дополнительные хранилища данных. Используйте API пакета SDK для Python или интерфейс командной строки Машинного обучения Azure для хранения и извлечения файлов из хранилища данных.

### <a name="compute-targets"></a>Целевые объекты вычислений

[Целевой объект вычислений](concept-compute-target.md) позволяет указать ресурс вычислений, в котором выполняется сценарий обучения, или разместите развертывание службы. Это может быть локальный компьютер или облачный ресурс вычислений. Целевые объекты вычислений упрощают изменение среды вычислений без изменения кода.

Дополнительные сведения о [доступных целевых показателях вычислений для обучения и развертывания](concept-compute-target.md).

### <a name="training-scripts"></a>Сценарии обучения

Чтобы обучить модель, необходимо указать каталог, содержащий скрипт обучения и связанные файлы. Вы можете также указать имя эксперимента, который используется для хранения сведений, собранных во время обучения. Во время обучения весь каталог копируется в среду обучения (целевой объект вычислений), и запускается сценарий, указанный в конфигурации запуска. Моментальный снимок каталога также хранится в эксперименте в рабочей области.

Пример см. в статье [Руководство. Обучение модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).

### <a name="runs"></a>Запуски

Запуск — это однократный запуск сценария обучения. Машинное обучение Azure записывает все запуски и сохраняет следующие сведения:

* метаданные о запуске (метка времени, длительность и т. д.);
* метрики, записанные в журнал с помощью сценария;
* выходные файлы, автоматически собранные экспериментом или явным образом переданные вами;
* моментальный снимок каталога, содержащего скрипты, до запуска;

Вы создаете запуск при отправке сценария для обучения модели. Запуск может иметь ноль или более дочерних запусков. Например, запуск верхнего уровня может иметь два дочерних запуска, каждый из которых может иметь свои дочерние запуски.

### <a name="github-tracking-and-integration"></a>Отслеживание и интеграция GitHub

При запуске обучающего запуска, в котором исходный каталог является локальным репозиторием Git, сведения о репозитории хранятся в журнале выполнения. Например, текущий идентификатор фиксации для репозитория регистрируется как часть журнала. Это работает с запусками, отправленными с помощью средства оценки, конвейера ML или запуска скрипта. Он также работает для запусков, отправленных из пакета SDK или Машинное обучение CLI.

### <a name="snapshots"></a>моментальные снимки

При отправке запуска Машинное обучение Azure сжимает каталог, содержащий сценарий, как ZIP-файл и отправляет его в целевой объект вычислений. ZIP-файл затем извлекается, и сценарий выполняется в нем. Машинное обучение Azure также сохраняет ZIP-файл в качестве моментального снимка как часть записи о выполнении. Любой пользователь с доступом к рабочей области может просмотреть запись о выполнении и загрузить моментальный снимок.

> [!NOTE]
> Чтобы предотвратить включение ненужных файлов в моментальный снимок, создайте файл Ignore (. gitignore или. амлигноре). Поместите этот файл в каталог моментальных снимков и добавьте в него имена файлов для пропуска. Файл. амлигноре использует тот же [синтаксис и шаблоны, что и файл gitignore](https://git-scm.com/docs/gitignore). Если оба файла существуют, приоритет имеет файл. амлигноре.

### <a name="activities"></a>Действия

Действие представляет собой длительную операцию. Следующие операции являются примерами действий:

* Создание или удаление целевого объекта вычислений
* Запуск скрипта на целевом объекте вычисления

Действия могут предоставлять уведомления через пакет SDK или веб-интерфейс, чтобы можно было легко отслеживать ход выполнения этих операций.

### <a name="images"></a>Изображений

Образы позволяют надежно развернуть модель, а также все компоненты, необходимые для использования модели. Образ содержит следующие элементы:

* Модель.
* Скрипт или приложение оценки. Используйте этот сценарий для передачи входных данных в модель и возвращения выходных данных из модели.
* Зависимости, необходимые модели, сценарию или приложению оценки. Например, можно включить файл среды Conda, содержащий зависимости пакетов Python.

Машинное обучение Azure может создавать образы двух типов:

* **Образ ППВМ**: используется при развертывании в программируемую пользователем вентильную матрицу в Azure.
* **Образ Docker**: используется при развертывании в целевые объекты вычислений, отличные от ППВМ. Примерами являются Экземпляры контейнеров Azure и Служба Azure Kubernetes.

Служба Машинное обучение Azure предоставляет базовый образ, используемый по умолчанию. Вы также можете предоставить собственные пользовательские образы.

### <a name="image-registry"></a>Реестр образов

Образы заносятся в каталог в **реестре образов** рабочей области. При создании образа можно указать дополнительные теги метаданных, чтобы можно было отправить запрос на Поиск изображения позже.

Пример создания образа см. в статье [Руководство. Развертывание модели классификации изображений в Экземплярах контейнера Azure](tutorial-deploy-models-with-aml.md).

Пример развертывания модели с помощью пользовательского образа см. в разделе [развертывание модели с помощью пользовательского образа DOCKER](how-to-deploy-custom-docker-image.md).

### <a name="deployment"></a>Развертывание

Развертывание — это экземпляр модели в веб-службе, которая может размещаться в облаке или модуле IoT для интегрированных развертываний устройств.

#### <a name="web-service-deployments"></a>Развертывания веб-служб

Развернутая веб-служба может использовать Экземпляры контейнеров Azure, Службу Azure Kubernetes или ППВМ. Служба создается из модели, скрипта и связанных файлов. Они инкапсулируются в образе, который предоставляет среду выполнения для веб-службы. Образ включает конечную точку HTTP с балансировкой нагрузки, которая получает запросы на оценку, отправляемые в веб-службу.

Azure помогает отслеживать развертывание веб-службы путем сбора данных телеметрии Application Insights или данных телеметрии модели, если вы решили включить эту функцию. Данные телеметрии доступны только вам и хранятся в Application Insights и экземплярах учетной записи хранения.

Если вы включили автоматическое масштабирование, Azure будет автоматически масштабировать ваше развертывание.

Пример развертывания модели как веб-службы см. в статье [Руководство. Развертывание модели классификации изображений в Экземплярах контейнеров Azure](tutorial-deploy-models-with-aml.md).

#### <a name="iot-module-deployments"></a>Развертывание модулей IoT

Развернутый модуль Интернета вещей — это контейнер Docker, который содержит вашу модель и соответствующий сценарий или приложение и все дополнительные зависимости. Эти модули развертываются с помощью Azure IoT Edge на пограничных устройствах.

Если вы включили функцию мониторинга, Azure собирает данные телеметрии из модели в модуле Azure IoT Edge. Данные телеметрии доступны только вам и хранятся в вашем экземпляре учетной записи хранения.

Azure IoT Edge гарантирует, что модуль запущен и отслеживает устройство, на котором он размещен.

### <a name="ml-pipelines"></a>Конвейеры машинного обучения

Используйте конвейеры машинного обучения для создания и управления рабочими процессами, которые совмещают этапы машинного обучения. Например, конвейер может включать в себя подготовку данных, обучение модели, развертывание модели, а также этапы определения и оценки. Каждый этап может охватывать несколько шагов, каждый из которых может автоматически выполняться в различных целевых объектах вычисления. 

Этапы конвейера можно многократно использовать и могут выполняться без повторного выполнения последующих шагов, если выходные данные этого шага не изменились. Например, можно переучить модель без повторного выполнения подготовительных шагов подготовки данных, если данные не изменялись. Кроме того, конвейеры позволяют специалистам по обработке и анализу данных работать в разных областях рабочего процесса машинного обучения.

Дополнительные сведения о конвейерах машинного обучения этой службы см. в статье [Создание конвейеров машинного обучения с помощью Службы машинного обучения Azure](concept-ml-pipelines.md).

### <a name="logging"></a>Ведение журнала

При разработке решения используйте пакет SDK Python для Машинного обучения Azure в сценарии Python для записи произвольных метрик. После запуска запросите метрики, чтобы определить, удалось ли в ходе запуска создать модель, которую вы хотите развернуть.

### <a name="next-steps"></a>Следующие шаги

Чтобы начать работу со Службой машинного обучения Azure, ознакомьтесь со следующими статьями:

* [Что такое Служба машинного обучения Azure](overview-what-is-azure-ml.md)
* [Создание рабочей области службы Машинное обучение Azure](how-to-manage-workspace.md)
* [Руководство (часть 1). Обучение модели](tutorial-train-models-with-aml.md)
