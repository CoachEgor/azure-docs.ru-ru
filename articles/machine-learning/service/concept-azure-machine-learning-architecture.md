---
title: Архитектура и ключевые понятия
titleSuffix: Azure Machine Learning service
description: Дополнительные сведения об архитектуре, условия, основные понятия и рабочий процесс, входящих в состав службы машинного обучения Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: larryfr
author: Blackmist
ms.date: 04/15/2019
ms.custom: seodec18
ms.openlocfilehash: 294b376665ba6b62f79f826520bc933543b38bda
ms.sourcegitcommit: 41ca82b5f95d2e07b0c7f9025b912daf0ab21909
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "67059270"
---
# <a name="how-azure-machine-learning-service-works-architecture-and-concepts"></a>Принципы работы Службы машинного обучения Azure: архитектура и основные понятия

Дополнительные сведения об архитектуре, основные понятия и рабочий процесс для службы машинного обучения Azure. Основные компоненты службы и общий рабочий процесс при использовании службы показаны на следующей схеме:

[![Архитектура и рабочий процесс Службы машинного обучения Azure](./media/concept-azure-machine-learning-architecture/workflow.png)](./media/concept-azure-machine-learning-architecture/workflow.png#lightbox)

## <a name="workflow"></a>Рабочий процесс

Рабочего процесса конечного автомата обучения обычно выполняется в следующей последовательности:

1. Разработка машинного обучения, обучение скрипты в **Python** или в визуальный интерфейс.
1. Создайте и настройте **целевой объект вычислений**.
1. **Отправьте скрипты** в настроенный целевой объект вычислений для запуска в этой среде. Во время обучения скрипты могут считывать данные из **хранилища данных** или записывать данные в него. Записи о выполнении сохраняются в виде данных о **запусках** в **рабочей области** и группируются по **экспериментам**.
1. **Отправьте запрос в эксперимент** для получения записанных метрик текущего и прошлых запусков. Если метрики не указывают желаемый результат, необходимо вернуться обратно к шагу 1 и выполнить итерацию сценариев.
1. После успешного запуска зарегистрируйте сохраненную модель в **реестре моделей**.
1. Разработать скрипт оценки, который использует эту модель и **развертывание модели** как **веб-службы** в Azure или **устройство IoT Edge**.

Вы выполните эти действия в перечисленных ниже.
+ [Пакет SDK службы "Машинное обучение Azure" для Python](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py)
+ [Azure Machine Learning интерфейса командной строки](https://docs.microsoft.com/azure/machine-learning/service/reference-azure-machine-learning-cli)
+ [Расширение Azure Machine Learning VS Code](how-to-vscode-tools.md)
+  [Визуальный интерфейс для службы машинного обучения Azure (Предварительная версия)](ui-concept-visual-interface.md)


## <a name="glossary-of-concepts"></a>Глоссарий основные понятия

+ <a href="#workspaces">Рабочая область</a>
+ <a href="#experiments">Эксперименты</a>
+ <a href="#models">Модели</a>
+ <a href="#run-configurations">Конфигурация запуска</a>
+ <a href="#datasets-and-datastores">Набор данных и хранилища данных</a>
+ <a href="#compute-targets">Целевые объекты вычислений</a>
+ <a href="#training-scripts">Сценарий обучения</a>
+ <a href="#runs">Run</a>
+ <a href="#github-tracking-and-integration">Отслеживание Git</a>
+ <a href="#snapshots">Моментальный снимок</a>
+ <a href="#activities">Действие</a>
+ <a href="#images">Изображение</a>
+ <a href="#deployment">Развертывание</a>
+ <a href="#web-service-deployments">Веб-службы</a>
+ <a href="#iot-module-deployments">Модули IoT</a>
+ <a href="#ml-pipelines">Конвейеры машинного Обучения</a>
+ <a href="#logging">Logging</a>

> [!NOTE]
> Хотя в этой статье определяются термины и понятия, используемые Службой машинного обучения Azure, здесь не приводятся термины и понятия для платформы Azure. Дополнительные сведения о терминологии платформы Azure см. в статье [Словарь терминов Microsoft Azure: словарь терминов, связанных с облаком на платформе Azure](https://docs.microsoft.com/azure/azure-glossary-cloud-terminology).


### <a name="workspaces"></a>Рабочие области

[Рабочая область](concept-workspace.md) — это ресурс верхнего уровня для службы машинного обучения Azure. Она предоставляет централизованное расположение для работы со всеми артефактами, создаваемыми при использовании Службы машинного обучения Azure.

Таксономия рабочей области показана на следующей схеме:

[![Схема рабочей области](./media/concept-azure-machine-learning-architecture/azure-machine-learning-taxonomy.png)](./media/concept-azure-machine-learning-architecture/azure-machine-learning-taxonomy.png#lightbox)

Дополнительные сведения о рабочих областях см. в разделе [Какова рабочей областью машинного обучения Azure?](concept-workspace.md).

### <a name="experiments"></a>Эксперименты

Эксперимент представляет собой совокупность нескольких запусков указанного сценария. Он всегда принадлежит рабочей области. При отправке запуска укажите имя эксперимента. Сведения о запуске хранятся в этом эксперименте. Если при отправке запуска вы укажете несуществующее имя эксперимента, автоматически создается новый эксперимент с новым указанным именем.

Пример использования эксперимента приведен в статье [Краткое руководство. Начало работы со Службой машинного обучения Azure с помощью портала Azure](quickstart-run-cloud-notebook.md).

### <a name="models"></a>Модели

В простейшем смысле модель представляет собой фрагмент кода, который принимает входные данные и создает выходные данные. Создание модели машинного обучения включает в себя выбор алгоритма, предоставление ему данных и настройку гиперпараметров. Обучение — это итеративный процесс, который создает обученную модель, включающую в себя все, чему модель научилась в процессе обучения.

Модель создается путем выполнения в машинном обучении Azure. Вы можете также использовать модель, обученную вне Машинного обучения Azure. Вы можете зарегистрировать модель в рабочей области Службы машинного обучения Azure.

Служба машинного обучения Azure не зависит от платформы. При создании модели, можно использовать любой платформы популярных машинного обучения, таких как Scikit-learn, XGBoost, PyTorch, TensorFlow и формирователя цепочки.

Пример обучения модели, см. в разделе [руководства: Обучение модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).

**Реестра модели** следит за всех моделей в рабочей области службы машинного обучения Azure.

Модели идентифицируются по имени и версии. При регистрации модели с уже имеющимся именем реестр предполагает, что это новая версия. Номер версии увеличивается, и новая модель регистрируется под тем же именем.

При регистрации модели вы можете указать дополнительные теги метаданных, а затем использовать эти теги для поиска моделей.

Невозможно удалить моделей, которые используются активным развертыванием.

Пример регистрации модели см. в статье [Руководство по обучению модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).

### <a name="run-configurations"></a>Конфигурации запуска

Конфигурация запуска — это набор инструкций, который определяет, как запустить сценарий в указанном целевом объекте вычислений. Конфигурация включает широкий набор определений поведения, например, следует ли использовать имеющуюся среду Python или среду Conda, созданную из спецификации.

Конфигурацию запуска можно сохранять в файл внутри каталога, содержащего сценарий обучения, или создать как объект в памяти и использовать для отправки запуска.

Пример конфигураций запуска см. в статье [Настройка целевых объектов вычислений для обучения моделей](how-to-set-up-training-targets.md).

### <a name="datasets-and-datastores"></a>Наборы данных и хранилища данных

**Наборы данных Azure Machine Learning** (Предварительная версия) облегчают доступ и работы с данными. Наборы данных, управление данными в различных сценариях, таких как Обучение модели и создания конвейера. С помощью пакета SDK для Azure Machine Learning, можно получить доступ к базовым хранилищем, изучение и Подготовка данных, а также выполнять их жизненного цикла разные определения набора данных и сравнения между наборами данных, используемых при обучении и в рабочей среде.

Наборы данных предоставляет методы для работы с данными в популярных форматах, например с помощью `from_delimited_files()` или `to_pandas_dataframe()`.

Дополнительные сведения см. в разделе [Создание и регистрация Azure Machine Learning, наборы данных](how-to-create-register-datasets.md).  Дополнительные примеры использования наборов данных, см. в разделе [примеры записных книжек](https://aka.ms/dataset-tutorial).

Объект **хранилище данных** — это абстракция хранилища через учетную запись хранилища Azure. Хранилище данных может использовать контейнер больших двоичных объектов Azure или файловый ресурс Azure в качестве внутреннего хранилища. Каждая рабочая область содержит хранилище данных по умолчанию. Вы можете зарегистрировать дополнительные хранилища данных. Используйте API пакета SDK для Python или интерфейс командной строки Машинного обучения Azure для хранения и извлечения файлов из хранилища данных.

### <a name="compute-targets"></a>Целевые объекты вычислений

Объект [целевого объекта вычислений](concept-compute-target.md) позволяет указать вычислительный ресурс, на котором выполняется сценарий обучения или узел развертывания службы. Это расположение может быть на локальном компьютере или облачных вычислительных ресурсов. Целевые объекты вычисления позволяют легко изменить среду службы вычислений без изменения кода. 

Дополнительные сведения о [целевых объектов вычислений, доступных для обучения и развертывания](concept-compute-target.md). 

### <a name="training-scripts"></a>Сценарии обучения

Чтобы обучить модель, необходимо указать каталог, содержащий скрипт обучения и связанные файлы. Вы можете также указать имя эксперимента, который используется для хранения сведений, собранных во время обучения. Во время обучения весь каталог копируется в среду обучения (целевой объект вычислений), и запускается сценарий, указанный в конфигурации запуска. Моментальный снимок каталога также хранится в эксперименте в рабочей области.

Пример см. в статье [Руководство. Обучение модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).

### <a name="runs"></a>Запуски

Запуск — это запись, которая содержит следующие сведения:

* метаданные о запуске (метка времени, длительность и т. д.);
* метрики, записанные в журнал с помощью сценария;
* выходные файлы, автоматически собранные экспериментом или явным образом переданные вами;
* моментальный снимок каталога, содержащего скрипты, до запуска;

Вы создаете запуск при отправке сценария для обучения модели. Запуск может иметь ноль или более дочерних запусков. Например, запуск верхнего уровня может иметь два дочерних запуска, каждый из которых может иметь свои дочерние запуски.

Пример просмотра запусков при обучении модели приведен в документе [Краткое руководство. Начало работы со Службой машинного обучения Azure с помощью портала Azure](quickstart-run-cloud-notebook.md).

### <a name="github-tracking-and-integration"></a>Отслеживание GitHub и интеграции

При запуске обучения, выполните, где исходный каталог является локальный репозиторий Git, сведения о хранилище хранятся в журнале выполнения. Например текущих Идентификаторов фиксаций репозитория, регистрируется как часть журнала. Это работает с запуском, отправленного с помощью оценщика, конвейер машинного Обучения или выполнения скрипта. Она также работает для запусков, отправленных из пакета SDK или Machine Learning CLI.

### <a name="snapshots"></a>Моментальные снимки

При отправке запуска Машинное обучение Azure сжимает каталог, содержащий сценарий, как ZIP-файл и отправляет его в целевой объект вычислений. ZIP-файл затем извлекается, и сценарий выполняется в нем. Машинное обучение Azure также сохраняет ZIP-файл в качестве моментального снимка как часть записи о выполнении. Любой пользователь с доступом к рабочей области может просмотреть запись о выполнении и загрузить моментальный снимок.

> [!NOTE]
> Чтобы предотвратить ненужные файлы, включаемого в моментальном снимке, сделайте с файлом игнорирования (.gitignore или .amlignore). Поместите этот файл в каталоге моментальных снимков и добавьте имена файлов, чтобы игнорировать его. Файл .amlignore использует тот же [синтаксис и шаблоны, что файл .gitignore](https://git-scm.com/docs/gitignore). Если существуют оба файла, файл .amlignore имеет приоритет.

### <a name="activities"></a>Действия

Действие представляет собой длительную операцию. Следующие операции являются примерами действий:

* Создание или удаление целевого объекта вычислений
* Запуск скрипта на целевом объекте вычисления

Действия могут предоставлять уведомления через пакет SDK или веб-интерфейс, чтобы можно было легко отслеживать ход выполнения этих операций.

### <a name="images"></a>Изображений

Образы позволяют надежно развернуть модель, а также все компоненты, необходимые для использования модели. Образ содержит следующие элементы:

* Модель.
* Скрипт или приложение оценки. Используйте этот сценарий для передачи входных данных в модель и возвращения выходных данных из модели.
* Зависимости, необходимые модели, сценарию или приложению оценки. Например, можно включить файл среды Conda, содержащий зависимости пакетов Python.

Машинное обучение Azure может создавать образы двух типов:

* **Образ ППВМ**: используется при развертывании в программируемую пользователем вентильную матрицу в Azure.
* **Образ Docker**: используется при развертывании в целевые объекты вычислений, отличные от ППВМ. Примерами являются Экземпляры контейнеров Azure и Служба Azure Kubernetes.

Службы машинного обучения Azure содержит базовый образ, который используется по умолчанию. Можно также предоставить собственные настраиваемые образы.

### <a name="image-registry"></a>Реестр образов

Имеющиеся образы **реестр образов** в рабочей области. Можно предоставить дополнительные теги метаданных при создании образа, таким образом, вы можете запрашивать их поиск нужного образа позже.

Пример создания образа см. в статье [Руководство. Развертывание модели классификации изображений в Экземплярах контейнера Azure](tutorial-deploy-models-with-aml.md).

Пример развертывания модели с помощью пользовательского образа, см. в разделе [развертывание модели с помощью пользовательского образа Docker](how-to-deploy-custom-docker-image.md).

### <a name="deployment"></a>Развертывание

Развертывание выполняется создание экземпляра модели в любом веб-служба может размещаться в облаке или модуль Интернета вещей для развертывания интегрированных устройств.

#### <a name="web-service-deployments"></a>Развертывания веб-служб

Развернутая веб-служба может использовать Экземпляры контейнеров Azure, Службу Azure Kubernetes или ППВМ. Создайте службу из модели, скрипт и связанные файлы. Они инкапсулируются в образ, который предоставляет среду времени выполнения для веб-службы. Образ включает конечную точку HTTP с балансировкой нагрузки, которая получает запросы на оценку, отправляемые в веб-службу.

Azure помогает отслеживать развертывание веб-службы путем сбора данных телеметрии Application Insights или данных телеметрии модели, если вы решили включить эту функцию. Данные телеметрии доступны только вам и хранятся в Application Insights и экземплярах учетной записи хранения.

Если вы включили автоматическое масштабирование, Azure будет автоматически масштабировать ваше развертывание.

Пример развертывания модели как веб-службы см. в статье [Руководство. Развертывание модели классификации изображений в Экземплярах контейнеров Azure](tutorial-deploy-models-with-aml.md).

#### <a name="iot-module-deployments"></a>Модуль развертывания Интернета вещей

Развернутый модуль Интернета вещей — это контейнер Docker, который содержит вашу модель и соответствующий сценарий или приложение и все дополнительные зависимости. Эти модули развертывание с помощью Azure IoT Edge на пограничных устройствах.

Если вы включили функцию мониторинга, Azure собирает данные телеметрии из модели в модуле Azure IoT Edge. Данные телеметрии доступны только вам и хранятся в вашем экземпляре учетной записи хранения.

Azure IoT Edge гарантирует, что модуль запущен и отслеживает устройство, на котором он размещен.

### <a name="ml-pipelines"></a>Конвейеры машинного обучения

Используйте конвейеры машинного обучения для создания и управления рабочими процессами, которые совмещают этапы машинного обучения. Например конвейер может включать данные этапов подготовки, обучения модели, модель развертывания и определение и оценка. Каждый этап может охватывать несколько шагов, каждый из которых может автоматически выполняться в различных целевых объектах вычисления.

Дополнительные сведения о конвейерах машинного обучения этой службы см. в статье [Создание конвейеров машинного обучения с помощью Службы машинного обучения Azure](concept-ml-pipelines.md).

### <a name="logging"></a>Ведение журналов

При разработке решения используйте пакет SDK Python для Машинного обучения Azure в сценарии Python для записи произвольных метрик. После запуска запросите метрики, чтобы определить, удалось ли в ходе запуска создать модель, которую вы хотите развернуть.

### <a name="next-steps"></a>Дальнейшие действия

Чтобы начать работу со Службой машинного обучения Azure, ознакомьтесь со следующими статьями:

* [Что такое Служба машинного обучения Azure](overview-what-is-azure-ml.md)
* [Создание рабочей области службы машинного обучения Azure](setup-create-workspace.md)
* [Руководство (часть 1). Обучение модели](tutorial-train-models-with-aml.md)
