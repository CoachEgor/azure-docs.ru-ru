---
title: Создание эксперимента автоматизированного машинного обучения с классификацией
titleSuffix: Azure Machine Learning
description: Сведения о процедурах обучения и развертывания модели классификации в службе автоматического машинного обучения с помощью целевой страницы рабочей области машинного обучения Azure (предварительный просмотр).
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.author: tzvikei
author: tsikiksr
ms.reviewer: nibaccam
ms.date: 09/26/2019
ms.openlocfilehash: dcd6f2ea6f5c79664af0c2431da07549e71c26bc
ms.sourcegitcommit: f9e81b39693206b824e40d7657d0466246aadd6e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/08/2019
ms.locfileid: "72035682"
---
# <a name="tutorial-create-your-first-classification-model-with-automated-machine-learning"></a>Руководство по созданию первой модели классификации в службе автоматического машинного обучения

Из этого учебника вы узнаете, как подготовить первый эксперимент автоматического машинного обучения с помощью целевой страницы рабочей области (предварительная версия), не создавая ни единой строки кода. Этот пример создает модель классификации, которая прогнозирует согласие клиента на депозит с фиксированным сроком, предложенный финансовым учреждением.

Автоматическое машинное обучение позволяет автоматизировать задачи, которые занимают много времени. Автоматическое машинное обучение позволяет быстро выполнить итерацию множества сочетаний алгоритмов и гиперпараметров, пока не будет найдена лучшая модель на основе выбранных удачных метрик.

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Создайте рабочую область машинного обучения Azure.
> * Выполнение эксперимента автоматического машинного обучения.
> * Просмотр сведений об эксперименте.
> * Развертывание модели.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://aka.ms/AMLFree).

* Скачайте файл данных [**bankmarketing_train.csv**](https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv). Столбец **y** в нем указывает, подписан ли клиент на депозит с фиксированным сроком. Впоследствии он будет выбран в этом учебнике как целевой столбец для прогнозов. 

## <a name="create-a-workspace"></a>Создание рабочей области

Рабочая область машинного обучения Azure — это основной ресурс в облаке для экспериментов, обучения и развертывания моделей машинного обучения. Она связывает подписку и группу ресурсов Azure с легко используемым объектом в службе. 

Вы создаете рабочую область с помощью портала Azure, веб-консоли для управления ресурсами Azure. 

[!INCLUDE [aml-create-portal](../../../includes/aml-create-in-portal.md)]

>[!IMPORTANT] 
> Запишите **рабочую область** и **подписку**. Они понадобятся вам для того, чтобы создать эксперимент в нужном месте. 

## <a name="create-and-run-the-experiment"></a>Создание и запуск эксперимента

Выполните следующие действия по настройке и выполнению эксперимента на целевой странице рабочей области — объединенном интерфейсе, включающем в себя средства машинного обучения для выполнения сценариев обработки и анализа данных, основанных на всех уровнях навыков. Целевая страница рабочей области не поддерживается в браузерах Internet Explorer.

1. Выполните вход, чтобы перейти в [целевую страницу рабочей области](https://ml.azure.com/workspaceportal/).

1. Выберите свою подписку и рабочую область, которую создали.

1. Выберите **Начать**.

1. На панели слева выберите **Automated ML** (Автоматизированное ML) в разделе **Автор**.

   Появится окно "Начало работы", так как это ваш первый эксперимент с автоматизированным машинным обучением.

   ![Студия машинного обучения Azure.](media/tutorial-1st-experiment-automated-ml/get-started.png)

1. Щелкните **Create experiment** (Создать эксперимент). 

1. Введите для эксперимента имя `my-1st-automl-experiment`.

1. Щелкните **Create a new compute** (Создать новую вычислительную среду) и настройте целевой объект вычислений. Целевым объектом вычислений называется локальная или облачная среда, в которой будет запущен скрипт обучения или размещено развертывание службы. Для этого эксперимента мы используем облачный вычислительный ресурс. 

   Поле | ОПИСАНИЕ | Значение для руководства
   ----|---|---
   Имя вычислительной среды |Уникальное имя для идентификации контекста вычислительной среды.|automl-compute
   Virtual&nbsp;machine&nbsp;size| Выберите размер виртуальной машины для вычислительной среды.|Standard_DS12_V2
   Минимальное и максимальное кол-во узлов (в дополнительных параметрах)| Для профилирования данных необходимо указать один или больше узлов.|Min nodes (Минимум узлов): 1<br>Max nodes (Максимум узлов): 6

   >[!NOTE]
   >В рамках этого руководства вы будете использовать учетную запись хранения и контейнер, которые были созданы по умолчанию вместе с вычислительной средой. Они автоматически подставляются в эту форму.
    
1. Выберите **Создать**, чтобы получить целевой объект вычислений. 

   **Операция займет несколько минут.** 

1. Когда создание целевого объекта вычислений завершится, выберите его в раскрывающемся списке и щелкните **Далее**.

1. Выберите **Upload from local file** (Загрузить из локального файла), чтобы начать создание нового набора данных. 

    1. Щелкните **Обзор**.
    
    1. Выберите файл **bankmarketing_train.csv** на локальном компьютере. Это тот файл, который вы скачали при подготовке [необходимых компонентов](https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv).

    1. Присвойте набору данных уникальное имя и укажите дополнительное описание. 

    1. Нажмите кнопку **Далее** внизу слева, чтобы отправить его в контейнер по умолчанию, который был автоматически настроен при создании рабочей области. Общедоступная предварительная версия поддерживает только локальные передачи файлов. 
    
       Когда загрузка завершится, форма "Settings and preview" (Настройки и предварительный просмотр) будет автоматически заполнена в зависимости от типа файла. 
       
    1. Убедитесь, что форма **Settings and preview** (Настройки и предварительный просмотр) заполнена, как описано ниже, и щелкните **Далее**.
        
        Поле|ОПИСАНИЕ| Значение для руководства
        ---|---|---
        Формат файла|Свойство определяет структуру и тип данных, хранящихся в файле.| С разделителями
        Разделитель|Один или несколько символов для указания границы между&nbsp; отдельными, независимыми регионами в виде простого текста или других потоков данных. |Запятая
        Кодирование|Определяет, какой бит следует использовать в таблице схемы символов, чтобы считать набор данных.| UTF-8
        Заголовки столбцов| Указывает, как будут обрабатываться заголовки набора данных, если таковые имеются.| Все файлы имеют одинаковые заголовки
        Пропустить строки | Указывает, сколько строк, если таковые имеются, пропускается в наборе данных.| Нет
    
        ![Конфигурация на вкладке "Предварительный просмотр"](media/tutorial-1st-experiment-automated-ml/schema-tab-config.gif)

1. Выберите задачу прогнозирования **Классификация**.

1. Выберите **y** в качестве столбца целевого объекта, для которого будут выполняться прогнозы. Этот столбец содержит сведения о том, подписан ли клиент на срочный депозит или нет.

1. Разверните **Дополнительные параметры** и заполните поля следующим образом. Эти настройки предназначены для лучшего управления заданием для обучения. В противном случае применяются значения по умолчанию, основанные на выборе эксперимента и данных.

   >[!NOTE]
   > В рамках этого руководства не нужно задавать метрику или максимальное количество ядер для каждого порога итерации. Также не требуется блокировать тестирование алгоритмов.
   
   Расширенные&nbsp;настройки|ОПИСАНИЕ|Значение&nbsp;для&nbsp;руководства
   ------|---------|---
   Основная метрика| Оценочная метрика, по которой будет проверяться алгоритм машинного обучения.|AUC_weighted
   Условия выхода| Если условия соблюдены, задание обучения останавливается. |Training&nbsp;job&nbsp;time (Время задания обучения): 5 <br> <br> Max&nbsp;#&nbsp;of&nbsp;iterations (Максимальное число итераций): 10
   Предварительная обработка| Включает предварительную обработку в автоматическом машинным обучении. Сюда входит автоматическая очистка данных, подготовка и преобразование для создания синтетических функций.| Включение
   Тип проверки | Выберите тип перекрестной проверки.|Перекрестная проверка K раз
   Количество проверок | Число выполняемых тестов | Перекрестная проверка 2 раза 
   Параллелизм| Максимальное число одновременных итераций.|5
   
1. Щелкните **Запустить**, чтобы выполнить эксперимент. Появится экран со сведениями о состоянии подготовки к началу эксперимента.

>[!IMPORTANT]
> Подготовка к запуску эксперимента занимает **10-15 минут**. С начала эксперимента на каждую итерацию уходит **2-3 минуты**.  
>
> В рабочей среде у вас будет время заняться другими делами. Но в рамках этого руководства мы рекомендуем начинать изучение результатов итераций сразу же по мере их появления, пока остальные итерации еще выполняются. 

##  <a name="explore-iteration-results"></a>Изучение результатов итерации

По мере выполнения эксперимента на экране **Схема итерации** и **Список итераций** обновляются с помощью различных итераций (моделей), созданных по мере их завершения. По умолчанию итерации упорядочены по метрической шкале. В этом учебнике в начале списка отображается модель, имеющая наибольшее значение по выбранной метрике **AUC_weighted**.

В ожидании завершения всех итераций эксперимента вы можете щелкнуть **имя** любой завершенной итерации, чтобы просмотреть сведения о ее эффективности. 

Ниже показаны диаграммы и метрики, созданные для каждой итерации, в том числе: кривая с точностью отзыва, матрица неточностей, оценка взвешенной точности и т. д. 

![Сведения о выполнении итераций](media/tutorial-1st-experiment-automated-ml/run-detail.gif)

## <a name="deploy-the-model"></a>Развертывание модели

Автоматизированное машинное обучение на целевой странице рабочей области позволяет развернуть лучшую модель как веб-службу всего с помощью нескольких действий. Развертывание — это интеграция модели для прогнозирования по новым данным и определения потенциальных новых возможностей. Для этого эксперимента развертывание в веб-службе предоставит финансовому учреждению итеративное и масштабируемое решение для определения потенциальных клиентов по депозитам с фиксированным сроком. 

После выполнения вернитесь к странице с **диаграммой итераций** и **списком итераций**. 

В контексте этого эксперимента лучшей моделью принимается **VotingEnsemble**, исходя из значения метрики **AUC_weighted**.  Мы развернем эту модель. Учитывайте, что процесс развертывания занимает около 20 минут. Процесс развертывания выполняется за несколько шагов, включая регистрацию модели, создание ресурсов и их настройку для веб-службы.

1. Нажмите кнопку **Deploy Best Model** (Развертывание лучшей модели) в верхнем правом углу.

1. Заполните панель **Deploy Best Model** (Развертывание лучшей модели), как показано ниже.

    Поле| Значение
    ----|----
    Deployment name (Имя развертывания)| my-automl-deploy
    Deployment description (Описание развертывания)| My first automated machine learning experiment deployment (Первое развертывание эксперимента автоматического машинного обучения)
    Scoring script (Скрипт оценки)| Autogenerate (Создавать автоматически)
    Environment script (Скрипт среды)| Autogenerate (Создавать автоматически)
    
1. Выберите **Развернуть**.  

    При успешном завершении развертывания появляется следующее сообщение:
    
Теперь у вас есть рабочая веб-служба для создания прогнозов.

## <a name="clean-up-resources"></a>Очистка ресурсов

Файлы развертывания имеют больший размер, чем файлы данных и экспериментов, поэтому их хранение обходится дороже. Вы можете удалить только файлы развертывания, чтобы снизить затраты на учетную запись, если хотите сохранить рабочую области и файлы экспериментов. В противном случае, если вы не планируете дальше использовать эти файлы, удалите всю группу ресурсов.  

### <a name="delete-the-deployment-instance"></a>Удаление промежуточного развертывания

Чтобы сохранить группу ресурсов и рабочую область для выполнения других учебников и собственных исследований, удалите с портала Azure только экземпляр развертывания. 

1. Перейдите на [портал Azure](https://portal.azure.com//). Перейдите в свою рабочую область и слева под панелью **Ресурсы** выберите **Развертывания**. 

1. Выберите развертывание для удаления и щелкните **Удалить**. 

1. Выберите **Продолжить**.

### <a name="delete-the-resource-group"></a>удаление группы ресурсов.

[!INCLUDE [aml-delete-resource-group](../../../includes/aml-delete-resource-group.md)]

## <a name="next-steps"></a>Дополнительная информация

В ходе работы с этим учебником по автоматическому машинному обучению вы создали и развернули модель классификации с помощью целевой страницы рабочей области. Дополнительные сведения и дальнейшие процедуры вы найдете в следующих статьях:

> [!div class="nextstepaction"]
> [Использование веб-службы](how-to-consume-web-service.md)

+ Подробная информация [о предварительной обработке](how-to-create-portal-experiments.md#preprocess).
+ Подробная информация [о профилировании данных](how-to-create-portal-experiments.md#profile).
+ Дополнительные сведения [об автоматическом машинном обучении](concept-automated-ml.md).
+ Дополнительные сведения о классификационных метриках и графиках см. в статье [Understand automated machine learning results](how-to-understand-automated-ml.md#classification) (Общие сведения об автоматических результатах машинного обучения).

>[!NOTE]
> Этот набор данных о банковском маркетинге предоставляется на условиях лицензии [Creative Commons (CCO: Public Domain)](https://creativecommons.org/publicdomain/zero/1.0/). Все права на отдельное содержимое базы данных предоставляются на условиях [лицензии на содержимое базы данных](https://creativecommons.org/publicdomain/zero/1.0/) и доступны в [Kaggle](https://www.kaggle.com/janiobachmann/bank-marketing-dataset). Этот набор данных изначально предоставлялся в [базе данных UCI для машинного обучения](https://archive.ics.uci.edu/ml/datasets/bank+marketing).<br><br>
> [Moro et al., 2014] S. Moro, P. Cortez and P. Rita. A Data-Driven Approach to Predict the Success of Bank Telemarketing. (Основанный на данных подход, позволяющий прогнозировать успешность телемаркетинга в банке.) Decision Support Systems (Системы поддержки принятия решений), Elsevier, 62:22-31, Июнь 2014 г.
