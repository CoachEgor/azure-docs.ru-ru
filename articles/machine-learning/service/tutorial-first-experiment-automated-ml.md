---
title: Создание первого эксперимента автоматического машинного обучения
titleSuffix: Azure Machine Learning
description: Сведения о процедурах обучения и развертывания модели классификации в службе автоматического машинного обучения с помощью целевой страницы рабочей области машинного обучения Azure (предварительный просмотр).
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.author: tzvikei
author: tsikiksr
ms.reviewer: nibaccam
ms.date: 09/09/2019
ms.openlocfilehash: 2422a4525c94f3997dd0a9a0859135e9acf59ffa
ms.sourcegitcommit: c79aa93d87d4db04ecc4e3eb68a75b349448cd17
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/18/2019
ms.locfileid: "71092006"
---
# <a name="tutorial-create-your-first-classification-model-with-automated-machine-learning"></a>Руководство по созданию первой модели классификации в службе автоматического машинного обучения

Из этого учебника вы узнаете, как подготовить первый эксперимент автоматического машинного обучения с помощью целевой страницы рабочей области (предварительная версия), не создавая ни единой строки кода. Этот пример создает модель классификации, которая прогнозирует согласие клиента на депозит с фиксированным сроком, предложенный финансовым учреждением.

Автоматическое машинное обучение позволяет автоматизировать задачи, которые занимают много времени. Автоматическое машинное обучение позволяет быстро выполнить итерацию множества сочетаний алгоритмов и гиперпараметров, пока не будет найдена лучшая модель на основе выбранных удачных метрик.

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Создайте рабочую область машинного обучения Azure.
> * Выполнение эксперимента автоматического машинного обучения.
> * Просмотр сведений об эксперименте.
> * Развертывание модели.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://aka.ms/AMLFree).

* Скачайте файл данных [**bankmarketing_train.csv**](https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv). Столбец **y** в нем указывает, подписан ли клиент на депозит с фиксированным сроком. Впоследствии он будет выбран в этом учебнике как целевой столбец для прогнозов. 

## <a name="create-a-workspace"></a>Создание рабочей области

Рабочая область машинного обучения Azure — это основной ресурс в облаке для экспериментов, обучения и развертывания моделей машинного обучения. Она связывает подписку и группу ресурсов Azure с легко используемым объектом в службе. 

Вы создаете рабочую область с помощью портала Azure, веб-консоли для управления ресурсами Azure. 

[!INCLUDE [aml-create-portal](../../../includes/aml-create-in-portal.md)]

>[!IMPORTANT] 
> Запишите **рабочую область** и **подписку**. Они понадобятся вам для того, чтобы создать эксперимент в нужном месте. 

## <a name="create-and-run-the-experiment"></a>Создание и запуск эксперимента

Выполните следующие действия по настройке и выполнению эксперимента на целевой странице рабочей области — объединенном интерфейсе, включающем в себя средства машинного обучения для выполнения сценариев обработки и анализа данных, основанных на всех уровнях навыков.

1. Выполните вход, чтобы перейти в [целевую страницу рабочей области](https://ml.azure.com/workspaceportal/).

1. Выберите свою подписку и рабочую область, которую создали.

1. Выберите **Начать**.

1.  Выберите **Автоматическое ML** в разделе**Разработка** в левой боковой панели.
Вы увидите окно **Начало работы**, так как это ваш первый эксперимент с автоматическим машинным обучением.

    ![Студия машинного обучения Azure.](media/tutorial-1st-experiment-automated-ml/get-started.png)

1. Щелкните **Create experiment** (Создать эксперимент). 

1. Введите для эксперимента имя **my-1st-automl-experiment**.

1. Выберите **Create a new compute** (Создать новое вычисление). Вычислительный ресурс — это локальная или облачная среда, используемая для запуска скрипта обучения или размещения развертывания службы. Для этого эксперимента мы используем облачный вычислительный ресурс. 

    1. Настройте ваш контекст вычислений для этого эксперимента.
        
        Поле | Значение
        ----|---
        Имя вычислительной среды |  Введите уникальное имя для идентификации контекста вычислительной среды. В нашем примере это **automl-compute**.
        размер виртуальной машины;| Выберите размер виртуальной машины для вычислительной среды. Используйте значение по умолчанию **Standard_DS12_V2**.
        Дополнительные параметры| *Минимальное число узлов*: 1. Чтобы использовать профилирование данных, необходимо иметь один или несколько узлов. <br> *Максимальное число узлов*: 6.
 
    1. Щелкните **Создать**, чтобы создать вычислительную среду. Для завершения операции требуется несколько минут. 

    1. Когда создание вычислительной среды завершится, выберите ее в раскрывающемся списке и щелкните **Далее**.

    >[!NOTE]
    >Для этого учебника вы будете использовать учетную запись хранения и контейнер, которые были созданы по умолчанию вместе с вычислительной средой. Они автоматически подставляются в эту форму.

1. Выберите **Передача из локального файла**. Здесь вы создадите новый набор данных с файлом **bankmarketing_train. csv**, который ранее загружался для работы с этим руководством. 

    1. Нажмите кнопку**Обзор**, а затем выберите файл **bankmarketing_train.csv** на локальном компьютере. 

    1. Присвойте набору данных уникальное имя и укажите дополнительное описание. 

    1. Нажмите кнопку **Далее**, чтобы отправить его в контейнер по умолчанию, который был автоматически настроен при создании рабочей области. Общедоступная предварительная версия поддерживает только локальные передачи файлов. 

    1. Когда загрузка завершена, для формы **Настройки и предварительный просмотр** выполняется интеллектуальное заполнение в зависимости от типа файла. Убедитесь, что форма заполнена следующим образом.
        
        Поле|Значение
        ---|---
        Формат файла| С разделителями
        Разделитель| Запятая
        Кодирование| UTF-8
        Заголовки столбцов| Все файлы имеют одинаковые заголовки
        Пропустить строки | Нет

        >[!NOTE]
        > Если какие-либо параметры на этой форме будут обновлены, предварительный просмотр будет обновлен соответствующим образом.

        Щелкните **Далее**.
    

    1. Форма **Схема** позволяет выполнять дальнейшую настройку данных для этого эксперимента. В этом примере выберите переключатель для функции **day_of_week**, чтобы не включать его в этот эксперимент. Нажмите кнопку **Готово**, чтобы завершить передачу файла и создать набор данных для вашего эксперимента.

        ![Конфигурация на вкладке "Предварительный просмотр"](media/tutorial-1st-experiment-automated-ml/schema-tab-config.gif)

        
1. Выберите задачу прогнозирования **Классификация**.

1. Выберите **y** в качестве столбца целевого объекта, для которого будут выполняться прогнозы. Этот столбец содержит сведения о том, подписан ли клиент на срочный депозит или нет.

1. Разверните **Дополнительные параметры** и заполните поля следующим образом.

    Дополнительные параметры|Значение
    ------|------
    Основная метрика| AUC_weighted 
    Условия выхода| Если выполняется любое из этих условий, задание обучения завершается до полного завершения. <br> *Training job time (minutes)* (Время задания обучения в минутах): 5  <br> *Max number of iterations* (Максимальное число итераций): 10 
    Предварительная обработка| Включает предварительную обработку в автоматическом машинным обучении. Сюда входит автоматическая очистка данных, подготовка и преобразование для создания синтетических функций.
    Проверка| Выберите вариант K-fold cross-validation (перекрестная проверка K раз) и значение **2** для числа перекрестных проверок. 
    Параллелизм| Выберите значение **5** для параметра, определяющего максимальное число одновременных итераций.

   >[!NOTE]
   > Для этого эксперимента не нужно задавать метрику или максимальное количество ядер для каждого порога итерации. Вам также не нужно блокировать тестирование алгоритмов.

1. Щелкните **Запустить**, чтобы выполнить эксперимент.

   Когда эксперимент начнется, на экране появится пустой экран с сообщением о состоянии в верхней части.

Процесс подготовки эксперимента занимает несколько минут. Когда этот процесс завершится, сообщение о состоянии принимает значение **Run is Running** (Запуск выполняется).

##  <a name="view-experiment-details"></a>Просмотр сведений об эксперименте

По мере выполнения эксперимента на экране обновляется **Схема итерации** и **Список итераций** с различными выполняемыми итерациями (моделями). Список итераций упорядочен по значениям метрик. По умолчанию в начале списка отображается модель, имеющая наибольшее значение по метрике **AUC_weighted**.

>[!WARNING]
> Задания обучения в каждом конвейере выполняются по несколько минут.

[![Панель мониторинга со сведениями о запуске](media/tutorial-1st-experiment-automated-ml/run-details.png)](media/tutorial-1st-experiment-automated-ml/run-details-expanded.png#lightbox)

## <a name="deploy-the-model"></a>Развертывание модели

Применив автоматизированное машинное обучение на целевой странице рабочей области, вы можете развернуть лучшую модель как веб-службу всего за несколько шагов. Развертывание — это интеграция модели для прогнозирования по новым данным и определения потенциальных новых возможностей. Для этого эксперимента развертывание в веб-службе предоставит финансовому учреждению итеративное и масштабируемое решение для определения потенциальных клиентов по депозитам с фиксированным сроком. 

В контексте этого эксперимента лучшей моделью принимается **VotingEnsemble**, исходя из значения метрики **AUC_weighted**.  Мы развернем эту модель. Учитывайте, что процесс развертывания занимает около 20 минут. Процесс развертывания выполняется за несколько шагов, включая регистрацию модели, создание ресурсов и их настройку для веб-службы.

1. На странице **Сведения о запуске** в левой верхней части нажмите кнопку **Deploy Best Mode** (Развертывание лучшей модели).

1. Заполните панель **Deploy Best Model** (Развертывание лучшей модели), как показано ниже.

    Поле| Значение
    ----|----
    Deployment name (Имя развертывания)| my-automl-deploy
    Deployment description (Описание развертывания)| My first automated machine learning experiment deployment (Первое развертывание эксперимента автоматического машинного обучения)
    Scoring script (Скрипт оценки)| Autogenerate (Создавать автоматически)
    Environment script (Скрипт среды)| Autogenerate (Создавать автоматически)
    
1. Выберите **Развернуть**.  

    При успешном завершении развертывания появляется следующее сообщение:
    
Теперь у вас есть рабочая веб-служба для создания прогнозов.

## <a name="clean-up-resources"></a>Очистка ресурсов

Файлы развертывания имеют больший размер, чем файлы данных и экспериментов, поэтому их хранение обходится дороже. Вы можете удалить только файлы развертывания, чтобы снизить затраты на учетную запись, если хотите сохранить рабочую области и файлы экспериментов. В противном случае, если вы не планируете дальше использовать эти файлы, удалите всю группу ресурсов.  

### <a name="delete-the-deployment-instance"></a>Удаление промежуточного развертывания

Чтобы сохранить группу ресурсов и рабочую область для выполнения других учебников и собственных исследований, удалите с портала Azure только экземпляр развертывания. 

1. Перейдите на [портал Azure](https://portal.azure.com//). Перейдите в свою рабочую область и слева под панелью **Ресурсы** выберите **Развертывания**. 

1. Выберите развертывание для удаления и щелкните **Удалить**. 

1. Выберите **Продолжить**.

### <a name="delete-the-resource-group"></a>удаление группы ресурсов.

[!INCLUDE [aml-delete-resource-group](../../../includes/aml-delete-resource-group.md)]

## <a name="next-steps"></a>Дополнительная информация

В ходе работы с этим учебником по автоматическому машинному обучению вы создали и развернули модель классификации с помощью целевой страницы рабочей области. Дополнительные сведения и дальнейшие процедуры вы найдете в следующих статьях:

> [!div class="nextstepaction"]
> [Использование веб-службы](how-to-consume-web-service.md)

+ Подробная информация [о предварительной обработке](how-to-create-portal-experiments.md#preprocess).
+ Подробная информация [о профилировании данных](how-to-create-portal-experiments.md#profile).
+ Дополнительные сведения [об автоматическом машинном обучении](concept-automated-ml.md).

>[!NOTE]
> Этот набор данных о банковском маркетинге предоставляется на условиях лицензии [Creative Commons (CCO: Public Domain)](https://creativecommons.org/publicdomain/zero/1.0/). Все права на отдельное содержимое базы данных предоставляются на условиях [лицензии на содержимое базы данных](https://creativecommons.org/publicdomain/zero/1.0/) и доступны в [Kaggle](https://www.kaggle.com/janiobachmann/bank-marketing-dataset). Этот набор данных изначально предоставлялся в [базе данных UCI для машинного обучения](https://archive.ics.uci.edu/ml/datasets/bank+marketing).<br><br>
> [Moro et al., 2014] S. Moro, P. Cortez and P. Rita. A Data-Driven Approach to Predict the Success of Bank Telemarketing. (Основанный на данных подход, позволяющий прогнозировать успешность телемаркетинга в банке.) Decision Support Systems (Системы поддержки принятия решений), Elsevier, 62:22-31, Июнь 2014 г.
