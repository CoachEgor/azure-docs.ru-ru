---
title: Создание первого эксперимента автоматического машинного обучения
titleSuffix: Azure Machine Learning service
description: Сведения о процедурах обучения и развертывания модели классификации в службе автоматического машинного обучения с помощью портала Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.author: tzvikei
author: tsikiksr
ms.reviewer: nibaccam
ms.date: 08/14/2019
ms.openlocfilehash: 01228dc01b8006a0a2476ddbbd6fa8ff430e280a
ms.sourcegitcommit: 6d2a147a7e729f05d65ea4735b880c005f62530f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69982758"
---
# <a name="tutorial-create-your-first-classification-model-with-automated-machine-learning"></a>Руководство по созданию первой модели классификации в службе автоматического машинного обучения

Из этого учебника вы узнаете, как подготовить первый эксперимент автоматического машинного обучения с помощью портала Azure (предварительная версия), не создавая ни единой строки кода. Этот пример создает модель классификации, которая прогнозирует согласие клиента на депозит с фиксированным сроком, предложенный финансовым учреждением.

Автоматическое машинное обучение позволяет автоматизировать задачи, которые занимают много времени. Автоматическое машинное обучение позволяет быстро выполнить итерацию множества сочетаний алгоритмов и гиперпараметров, пока не будет найдена лучшая модель на основе выбранных удачных метрик.

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Создание рабочей области Службы машинного обучения Azure.
> * Выполнение эксперимента автоматического машинного обучения.
> * Просмотр сведений об эксперименте.
> * Развертывание модели.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://aka.ms/AMLFree).

* Скачайте файл данных [**bankmarketing_train.csv**](https://automlsamplenotebookdata.blob.core.windows.net/automl-sample-notebook-data/bankmarketing_train.csv). Столбец **y** в нем указывает, подписан ли клиент на депозит с фиксированным сроком. Впоследствии он будет выбран в этом учебнике как целевой столбец для прогнозов. 

## <a name="create-a-workspace"></a>Создание рабочей области

[!INCLUDE [aml-create-portal](../../../includes/aml-create-in-portal.md)]

## <a name="create-and-run-the-experiment"></a>Создание и запуск эксперимента

Эти пошаговые инструкции описывают всю настройку эксперимента, начиная с выбора данных и заканчивая выбором основной метрики и типа модели. 

1. Откройте панель, расположенную слева в рабочей области. Выберите **Автоматизированное машинное обучение** в разделе **Создание (Предварительная версия)** .
Вы увидите окно **Welcome to Automated Machine Learning** (Добро пожаловать в автоматическое машинное обучение), так как это ваш первый эксперимент с автоматическим машинным обучением.

    ![Панель навигации на портале Azure](media/tutorial-1st-experiment-automated-ml/nav-pane.png)

1. Щелкните **Create experiment** (Создать эксперимент). Затем введите для эксперимента имя **my-1st-automl-experiment**.

1. Щелкните **Create a new compute** (Создать новую вычислительную среду) и настройте контекст вычислений для этого эксперимента.

    Поле| Значение
    ---|---
    Имя вычислительной среды| Введите уникальное имя для идентификации контекста вычислительной среды. В нашем примере это **automl-compute**.
    размер виртуальной машины;| Выберите размер виртуальной машины для вычислительной среды. В нашем примере это **Standard_DS12_v2**.
    Дополнительные параметры| *Минимальное число узлов*: 1. Чтобы использовать профилирование данных, необходимо иметь один или несколько узлов. <br> *Максимальное число узлов*: 6. 

    Щелкните **Создать**, чтобы создать вычислительную среду. Этот процесс займет несколько секунд. 

    Когда создание вычислительной среды завершится, выберите ее в раскрывающемся списке и щелкните **Далее**.

    >[!NOTE]
    >Для этого учебника мы используем учетную запись хранения и контейнер, которые были созданы по умолчанию вместе с вычислительной средой. Они автоматически подставляются в эту форму.

1. Щелкните **Отправить** и выберите файл **bankmarketing_train.csv** на локальном компьютере, чтобы передать его в контейнер по умолчанию. Общедоступная предварительная версия поддерживает только локальную передачу файлов и только учетные записи хранения BLOB-объектов Azure. Когда передача успешно завершится, выберите этот файл из списка. 

1. Вкладка **Предварительный просмотр** позволяет настроить данные для нашего эксперимента.

    На вкладке **Предварительный просмотр** укажите, что данные содержат заголовки. По умолчанию служба включает для обучения все компоненты (столбцы). Для нашего примера прокрутите экран вправо и выберите **Ignore** (Игнорировать) для компонента **day_of_week**.

    ![Конфигурация на вкладке "Предварительный просмотр"](media/tutorial-1st-experiment-automated-ml/preview-tab-config.gif)

    >[!NOTE]
    > Профилирование данных недоступно для вычислительных сред с нулевым значением для минимального количества узлов.

1. Выберите задачу прогнозирования **Классификация**.

1. Выберите **y** в качестве целевого столбца, для которого мы будем выполнять прогнозы. Этот столбец содержит сведения о том, подписан ли клиент на срочный депозит или нет.

1. Разверните **Дополнительные параметры** и заполните поля следующим образом.

    Дополнительные параметры|Значение
    ------|------
    Основная метрика| AUC_weighted 
    Условия выхода| Если выполняется любое из этих условий, задание обучения завершается до полного завершения. <br> *Training job time (minutes)* (Время задания обучения в минутах): 5  <br> *Max number of iterations* (Максимальное число итераций): 10 
    Предварительная обработка| Включает предварительную обработку в автоматическом машинным обучении. Сюда входит автоматическая очистка данных, подготовка и преобразование для создания синтетических функций.
    Проверка| Выберите вариант K-fold cross-validation (перекрестная проверка K раз) и значение **2** для числа перекрестных проверок. 
    Параллелизм| Выберите значение **5** для параметра, определяющего максимальное число одновременных итераций.

   >[!NOTE]
   > Для нашего эксперимента не нужно задавать пороговую метрику или максимальное количество ядер для одной итерации. Мы также не блокируем тестирование алгоритмов.

1. Щелкните **Запустить**, чтобы выполнить эксперимент.

   При выполнении эксперимента отображается пустой экран **Run Detail** (Сведения о запуске) со следующим состоянием в верхней части экрана.
      
Процесс подготовки эксперимента занимает несколько минут. Когда этот процесс завершится, сообщение о состоянии принимает значение **Run is Running** (Запуск выполняется).

##  <a name="view-experiment-details"></a>Просмотр сведений об эксперименте

По мере выполнения эксперимента на экране **Run Detail** (Сведения о запуске) обновляется схема итераций и список выполняемых итераций (моделей). Список итераций упорядочен по значениям метрик. По умолчанию в начале списка отображается модель, имеющая наибольшее значение по метрике **AUC_weighted**.

>[!TIP]
> Задания обучения в каждом конвейере выполняются по несколько минут.

[![Панель мониторинга со сведениями о запуске](media/tutorial-1st-experiment-automated-ml/run-details.png)](media/tutorial-1st-experiment-automated-ml/run-details-expanded.png#lightbox)

## <a name="deploy-the-model"></a>Развертывание модели

Применив автоматизированное машинное обучение на портале Azure, мы можем развернуть лучшую модель как веб-службу для прогнозирования по новым данным и выявления потенциальных новых возможностей. Развертывание этого эксперимента предоставит финансовому учреждению итеративное и масштабируемое решение для выявления потенциальных клиентов по депозитам с фиксированным сроком.

В контексте этого эксперимента лучшей моделью принимается **VotingEnsemble**, исходя из значения метрики **AUC_weighted**.  Мы развернем эту модель. Учитывайте, что процесс развертывания занимает около 20 минут.

1. На странице **Run Detail** (Сведения о запуске) нажмите кнопку **Deploy Best Model** (Развернуть лучшую модель).

1. Заполните панель **Deploy Best Model** (Развертывание лучшей модели), как показано ниже.

    Поле| Значение
    ----|----
    Deployment name (Имя развертывания)| my-automl-deploy
    Deployment description (Описание развертывания)| My first automated machine learning experiment deployment (Первое развертывание эксперимента автоматического машинного обучения)
    Scoring script (Скрипт оценки)| Autogenerate (Создавать автоматически)
    Environment script (Скрипт среды)| Autogenerate (Создавать автоматически)
    
1. Выберите **Развернуть**.

    При успешном завершении развертывания появляется следующее сообщение:
    
Теперь у вас есть рабочая веб-служба для создания прогнозов.

## <a name="clean-up-resources"></a>Очистка ресурсов

Файлы развертывания имеют больший размер, чем файлы данных и экспериментов, поэтому их хранение обходится дороже. Вы можете удалить только файлы развертывания, чтобы снизить затраты на учетную запись, если хотите сохранить рабочую области и файлы экспериментов. В противном случае, если вы не планируете дальше использовать эти файлы, удалите всю группу ресурсов.  

### <a name="delete-the-deployment-instance"></a>Удаление промежуточного развертывания

Чтобы сохранить группу ресурсов и рабочую область для выполнения других учебников и собственных исследований, удалите с портала Azure только экземпляр развертывания. 

1. Откройте панель **Ресурсы** слева и выберите **Развертывания**. 

1. Выберите развертывание для удаления и щелкните **Удалить**. 

1. Выберите **Продолжить**.

### <a name="delete-the-resource-group"></a>удаление группы ресурсов.

[!INCLUDE [aml-delete-resource-group](../../../includes/aml-delete-resource-group.md)]

## <a name="next-steps"></a>Дополнительная информация

В ходе работы с этим учебником по автоматическому машинному обучению вы создали и развернули модель классификации с помощью портала Azure. Дополнительные сведения и дальнейшие процедуры вы найдете в следующих статьях:

> [!div class="nextstepaction"]
> [Использование веб-службы](how-to-consume-web-service.md)

+ Подробная информация [о предварительной обработке](how-to-create-portal-experiments.md#preprocess).
+ Подробная информация [о профилировании данных](how-to-create-portal-experiments.md#profile).
+ Дополнительные сведения [об автоматическом машинном обучении](concept-automated-ml.md).

>[!NOTE]
> Этот набор данных о банковском маркетинге предоставляется на условиях лицензии [Creative Commons (CCO: Public Domain)](https://creativecommons.org/publicdomain/zero/1.0/). Все права на отдельное содержимое базы данных предоставляются на условиях [лицензии на содержимое базы данных](https://creativecommons.org/publicdomain/zero/1.0/) и доступны в [Kaggle](https://www.kaggle.com/janiobachmann/bank-marketing-dataset). Этот набор данных изначально предоставлялся в [базе данных UCI для машинного обучения](https://archive.ics.uci.edu/ml/datasets/bank+marketing).<br><br>
> Используйте цитату на следующую работу: <br> [Moro et al., 2014] S. Moro, P. Cortez and P. Rita. A Data-Driven Approach to Predict the Success of Bank Telemarketing. (Основанный на данных подход, позволяющий прогнозировать успешность телемаркетинга в банке.) Decision Support Systems (Системы поддержки принятия решений), Elsevier, 62:22-31, Июнь 2014 г.
