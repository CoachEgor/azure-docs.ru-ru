---
title: Выполнение пакетных прогнозов с помощью конструктора Машинного обучения Azure (предварительная версия)
titleSuffix: Azure Machine Learning
description: Узнайте, как обучить модель и настроить конвейер пакетного прогнозирования с помощью конструктора. Разверните конвейер как параметризованную веб-службу, которая может быть активирована из любой библиотеки HTTP.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.reviewer: trbye
ms.author: trbye
author: trevorbye
ms.date: 11/04/2019
ms.custom: Ignite2019
ms.openlocfilehash: c496e57ea5f4b5b7fcda4f9c43c511488ef3c246
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73509438"
---
# <a name="run-batch-predictions-using-azure-machine-learning-designer"></a>Выполнение пакетных прогнозов с помощью конструктора Машинного обучения Azure
[!INCLUDE [applies-to-skus](../../../includes/aml-applies-to-basic-enterprise-sku.md)]

В этом пошаговом руководстве вы узнаете, как использовать конструктор для обучения модели и настройки конвейера и веб-службы пакетного прогнозирования. Пакетное прогнозирование позволяет непрерывно и по запросу оценивать обученные модели на больших наборах данных. При необходимости для этого можно настроить веб-службу, которую можно активировать из любой библиотеки HTTP. 

Сведения о настройке служб пакетной оценки с помощью пакета SDK доступны в связанных [практических руководствах](how-to-run-batch-predictions.md).

В этом практическом руководстве описано, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создание простого эксперимента машинного обучения в конвейере.
> * Создание параметризованного конвейера пакетного вывода.
> * Управление конвейерами и их запуск вручную или из конечной точки REST.

## <a name="prerequisites"></a>Предварительные требования

1. Если у вас еще нет подписки Azure, создайте бесплатную учетную запись Azure, прежде чем начинать работу. Опробуйте [бесплатную или платную версию Службы машинного обучения Azure](https://aka.ms/AMLFree).

1. Создайте [рабочую область](tutorial-1st-experiment-sdk-setup.md).

1. Войдите в [Студию машинного обучения Azure](https://ml.azure.com/).

В этом руководстве предполагается наличие у читателя базовых знаний о создании простого конвейера в конструкторе. Вы можете ознакомиться с [руководством](tutorial-designer-automobile-price-train-score.md) по началу работы с конструктором. 

## <a name="create-a-pipeline"></a>Создание конвейера

Для создания конвейера пакетного вывода необходимо сначала создать эксперимент машинного обучения. Чтобы создать его, перейдите на вкладку **Конструктор** в рабочей области и создайте конвейер, выбрав **Удобные готовые модули**.

![Главная страница конструктора](media/how-to-run-batch-predictions-ui/ui-batch-scoring-1.png)

Ниже приведена простая модель машинного обучения для демонстрационных целей. Данные представляют собой зарегистрированный набор данных, созданный на основе данных о диабете из Открытых наборов данных Azure. Описание регистрации наборов данных из Открытых наборов данных Azure доступно в разделе [практических руководств](how-to-create-register-datasets.md#create-datasets-with-azure-open-datasets). Данные разделены на обучающий и проверочный наборы, а расширяемое дерево принятия решений обучено и оценено. Конвейер должен быть запущен по крайней мере один раз, чтобы можно было создать конвейер вывода. Нажмите кнопку **Запустить**, чтобы запустить конвейер.

![Создание простого эксперимента](media/how-to-run-batch-predictions-ui/ui-batch-scoring-2.png)

## <a name="create-a-batch-inference-pipeline"></a>Создание конвейера пакетного вывода

Теперь, когда конвейер запущен, рядом с кнопками **Запустить** и **Опубликовать** доступен новый параметр — **Create inference pipeline** (Создать конвейер вывода). Щелкните раскрывающийся список и выберите **Batch inference pipeline** (Конвейер пакетного вывода).

![Создание конвейера пакетного вывода](media/how-to-run-batch-predictions-ui/ui-batch-scoring-5.png)

Результатом является конвейер пакетного вывода по умолчанию. Сюда входит узел конфигурации эксперимента исходного конвейера, узел необработанных данных для оценки и узел оценки необработанных данных в исходном конвейере.

![Конвейер пакетного вывода по умолчанию](media/how-to-run-batch-predictions-ui/ui-batch-scoring-6.png)

Можно добавить другие узлы, чтобы изменить поведение процесса пакетного вывода. В этом примере вы добавите узел случайной выборки из входных данных перед оценкой. Создайте узел **Partition and Sample** и поместите его между узлами необработанных данных и оценки. Затем щелкните узел **Partition and Sample**, чтобы получить доступ к настройкам и параметрам.

![Новый узел](media/how-to-run-batch-predictions-ui/ui-batch-scoring-7.png)

Параметр *Rate of sampling* (Частота выборки) определяет, какой процент исходного набора данных следует использовать для случайной выборки. Этот параметр будет удобно часто изменять, поэтому добавьте его в качестве параметра конвейера. Параметры конвейера могут быть изменены во время выполнения. Их можно указать в объекте полезной нагрузки при перезапуске конвейера из конечной точки REST. 

Чтобы добавить это поле в качестве параметра конвейера, щелкните многоточие над полем и выберите **Add to pipeline parameter** (Добавить к параметрам конвейера). 

![Параметры примера](media/how-to-run-batch-predictions-ui/ui-batch-scoring-8.png)

Затем присвойте параметру имя и значение по умолчанию. Имя будет использоваться для идентификации параметра. Оно будет указано в вызове REST.

![Параметр конвейера](media/how-to-run-batch-predictions-ui/ui-batch-scoring-9.png)

## <a name="deploy-batch-inferencing-pipeline"></a>Развертывание конвейера пакетного вывода

Теперь все готово к развертыванию конвейера. Нажмите кнопку **Развернуть**, чтобы открыть интерфейс для настройки конечной точки. Щелкните раскрывающийся список и выберите **Создать конечную точку конвейера**.

![Развертывание конвейера](media/how-to-run-batch-predictions-ui/ui-batch-scoring-10.png)

Введите имя конечной точки и ее описание (необязательно). В нижней части страницы отображается параметр `sample-rate`, для которого настроено значение по умолчанию 0,8. Когда все будет готово, щелкните **Развернуть**.

![Настройка конечной точки](media/how-to-run-batch-predictions-ui/ui-batch-scoring-11.png)

## <a name="manage-endpoints"></a>Управление конечными точками 

После завершения развертывания перейдите на вкладку **Конечные точки** и щелкните имя только что созданной конечной точки.

![Ссылка на конечную точку](media/how-to-run-batch-predictions-ui/ui-batch-scoring-12.png)

На этом экране показаны все опубликованные конвейеры в указанной конечной точке. Щелкните свой конвейер вывода.

![Конвейер вывода](media/how-to-run-batch-predictions-ui/ui-batch-scoring-13.png)

На странице сведения о конвейере отображается подробный журнал выполнения и сведения о строке подключения к вашему конвейеру. Нажмите кнопку **Запустить**, чтобы осуществить выполнение конвейера вручную.

![Сведения о конвейере](media/how-to-run-batch-predictions-ui/ui-batch-scoring-14.png)

В конфигурации выполнения можно указать описание выполнения и изменить значения любых параметров конвейера. На этот раз перезапустите конвейер вывода с частотой выборки 0,9. Щелкните **Запустить**, чтобы запустить конвейер.

![Выполнение конвейера](media/how-to-run-batch-predictions-ui/ui-batch-scoring-15.png)

Вкладка **Использование** содержит конечную точку REST для повторного выполнения конвейера. Чтобы выполнить вызов REST, потребуется заголовок аутентификации на основе носителя OAuth 2.0. Дополнительные сведения о настройке аутентификации в рабочей области и выполнении параметризованного вызова REST см. в следующем [разделе руководства](tutorial-pipeline-batch-scoring-classification.md#publish-and-run-from-a-rest-endpoint).

## <a name="next-steps"></a>Дополнительная информация

Чтобы обучить и развернуть регрессионную модель, следуйте указаниям в [руководстве](tutorial-designer-automobile-price-train-score.md) по конструктору.