---
title: 'Млопс: Управление моделями в МАШИНном обучении'
titleSuffix: Azure Machine Learning
description: 'Сведения об управлении моделями с помощью Машинное обучение Azure (Млопс). Развертывание моделей, управление ими и их мониторинг для их постоянного улучшения. '
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.reviewer: jmartens
author: jpe316
ms.author: jordane
ms.date: 11/04/2019
ms.custom: seodec18
ms.openlocfilehash: 715752072a14a3220d17d0dbda2efd0786a83de4
ms.sourcegitcommit: 653e9f61b24940561061bd65b2486e232e41ead4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2019
ms.locfileid: "74271272"
---
# <a name="mlops-model-management-deployment-and-monitoring-with-azure-machine-learning"></a>Млопс: Управление моделями, развертывание и мониторинг с помощью Машинное обучение Azure

В этой статье вы узнаете, как использовать Машинное обучение Azure для управления жизненным циклом моделей. В Машинное обучение Azure используется подход Машинное обучениеных операций (Млопс), который повышает качество и согласованность решений машинного обучения. 

Машинное обучение Azure предоставляет следующие возможности Млопс:

- **Развертывание проектов ML из любого места**
- **Мониторинг приложений ml для операционных и машинных задач, связанных с** обработкой, — сравнение входных данных модели для обучения и вывода, изучение метрик, относящихся к модели, и обеспечение мониторинга и оповещений в ИНФРАСТРУКТУРе машинного обучения.
- **Запишите данные, необходимые для создания сквозного журнала аудита жизненного цикла машинного обучения**, включая пользователей, которые публикуют модели, причины внесения изменений и время развертывания или использования моделей в рабочей среде.
- **Автоматизируйте сквозной жизненный цикл машинного обучения с помощью машинное обучение Azure и Azure DevOps** для частого обновления моделей, тестирования новых моделей и непрерывного развертывания новых моделей машинного обучения вместе с другими приложениями и службами.

Чтобы узнать больше об основных понятиях Млопс и о том, как они применяются к Машинное обучение Azure, просмотрите следующее видео.

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2X1GX]

## <a name="deploy-ml-projects-from-anywhere"></a>Развертывание проектов ML из любого места

### <a name="turn-your-training-process-into-a-reproducible-pipeline"></a>Превратите процесс обучения в воспроизводимый конвейер
Используйте конвейеры машин из Машинное обучение Azure, чтобы объединить все шаги, участвующие в процессе обучения модели, от подготовки данных к извлечению компонентов до настройки параметров для оценки модели.

Дополнительные сведения см. в разделе [конвейеры машинного обучения](concept-ml-pipelines.md).

### <a name="register-and-track-ml-models"></a>Регистрация и трассировка моделей машинного обучения

Регистрация модели позволяет хранить и изменять модели в облаке Azure в рабочей области. Модель реестра позволяет легко организовывать и отслеживать ваши обученные модели.

> [!TIP]
> Зарегистрированная модель — это логический контейнер для одного или нескольких файлов, составляющих модель. Например, если имеется модель, которая хранится в нескольких файлах, можно зарегистрировать их как единую модель в Машинное обучение Azure рабочей области. После регистрации можно скачать или развернуть зарегистрированную модель и получить все зарегистрированные файлы.
 
Зарегистрированные модели идентифицируются по имени и версии. При регистрации модели с уже существующим именем реестр увеличивает номер версии. Во время регистрации также можно предоставить дополнительные теги метаданных, которые можно использовать при поиске моделей. Машинное обучение Azure поддерживает любую модель, которую можно загрузить с помощью Python 3.5.2 или более поздней версии.

> [!TIP]
> Кроме того, можно регистрировать модели, обученные за пределами Машинное обучение Azure.

Нельзя удалить зарегистрированную модель, используемую в активном развертывании.
Дополнительные сведения см. в разделе "Регистрация модели" статьи [Развертывание моделей с помощью Службы машинного обучения Azure](how-to-deploy-and-where.md#registermodel).

### <a name="package-and-debug-models"></a>Модели упаковки и отладки

Перед развертыванием модели в рабочей среде она упаковывается в образ DOCKER. В большинстве случаев создание изображений происходит автоматически в фоновом режиме во время развертывания. Для расширенных сценариев можно вручную указать образ.

При возникновении проблем с развертыванием можно выполнить развертывание в локальной среде разработки для устранения неполадок и отладки.

Дополнительные сведения см. в разделе [Развертывание моделей](how-to-deploy-and-where.md#registermodel) и [Устранение неполадок развертываний](how-to-troubleshoot-deployment.md).

### <a name="validate-and-profile-models"></a>Проверка и профилирование моделей

Машинное обучение Azure может использовать профилирование для определения оптимальных параметров ЦП и памяти, используемых при развертывании модели. Проверка модели выполняется в рамках этого процесса с использованием данных, предоставляемых для процесса профилирования.

### <a name="convert-and-optimize-models"></a>Преобразование и оптимизация моделей

Преобразование модели для [открытия обмена нейронными сетями](https://onnx.ai) (ONNX) может повысить производительность. В среднем преобразование в ONNX может привести к увеличению производительности в 2 раза.

Дополнительные сведения о ONNX с Машинное обучение Azure см. в статье [Создание и ускорение моделей ML](concept-onnx.md) .

### <a name="use-models"></a>Использование моделей

Обученные модели машинного обучения можно развертывать как веб-службы в облаке или локально в среде разработки. Также можно развернуть модели на Azure IoT Edge устройствах. Развертывания могут использовать ЦП, GPU или программируемые для полей массивы шлюзов (FPGA) для пошагового использования. Модели также можно использовать из Power BI.

При использовании модели в качестве веб-службы или устройства IoT Edge вы предоставляете следующие элементы:

* Модели, используемые для оценки данных, передаваемых службе или устройству.
* Скрипт записи. Этот скрипт принимает запросы, использует модели для оценки данных и возвращает ответ.
* Файл среды conda, описывающий зависимости, необходимые для скрипта моделей и входа.
* Любые дополнительные активы, такие как текст, данные и т. д., необходимые для скрипта моделей и входа.

Эти ресурсы упаковываются в образ DOCKER и развертываются как веб-служба или модуль IoT Edge.

При необходимости можно использовать следующие параметры для дальнейшей настройки развертывания:

* Включить GPU: используется для включения поддержки GPU в образе DOCKER. Образ должен использоваться в Microsoft Azure службах, таких как экземпляры контейнеров Azure, служба Kubernetes Azure, Машинное обучение Azure вычислений или виртуальные машины Azure.
* Дополнительные этапы работы с файлами DOCKER. файл, содержащий дополнительные шаги DOCKER для выполнения при создании образа DOCKER.
* Базовый образ: пользовательский образ, используемый в качестве базового образа. Если пользовательский образ не используется, базовый образ предоставляется Машинное обучение Azure.

Вы также предоставляете конфигурацию целевой платформы развертывания. Например, тип семейства виртуальных машин, объем доступной памяти и число ядер при развертывании в службе Azure Kubernetes.

При создании образа также добавляются компоненты, необходимые для Машинное обучение Azure. Например, ресурсы, необходимые для запуска веб-службы и взаимодействия с IoT Edge.

> [!NOTE]
> Нельзя изменить или изменить веб-сервер или IoT Edge компоненты, используемые в образе DOCKER. Машинное обучение Azure использует конфигурацию веб-сервера и IoT Edge компоненты, протестированные и поддерживаемые корпорацией Майкрософт.

#### <a name="web-service"></a>Веб-служба

Вы можете использовать модели в **веб-службах** со следующими целевыми объектами вычислений:

* Экземпляр контейнера Azure
* Служба Azure Kubernetes
* Локальная среда разработки

Чтобы развернуть модель как веб-службу, необходимо предоставить следующие элементы:

* Модель или ансамблей моделей.
* Зависимости, необходимые для использования модели. Например, скрипт, принимающий запросы и вызывающий модель, conda зависимости и т. д.
* Конфигурация развертывания, описывающая способ и место развертывания модели.

Дополнительные сведения см. в разделе [Развертывание моделей](how-to-deploy-and-where.md).

#### <a name="iot-edge-devices"></a>Устройства IoT Edge

Модели с устройствами Интернета вещей можно использовать с помощью **модулей Azure IOT Edge**. IoT Edge модули развертываются на аппаратном устройстве, что позволяет выводить на экран или оценивать модель на устройстве.

Дополнительные сведения см. в разделе [Развертывание моделей](how-to-deploy-and-where.md).

### <a name="analytics"></a>Аналитика

Microsoft Power BI поддерживает использование моделей машинного обучения для аналитики данных. Дополнительные сведения см. [в разделе интеграция машинное обучение Azure в Power BI (Предварительная версия)](https://docs.microsoft.com/power-bi/service-machine-learning-integration).


## <a name="monitor-for-operational--ml-issues"></a>Мониторинг проблем с операционными &ми машинного обучения

Мониторинг позволяет понять, какие данные отправляются в модель, и какие прогнозы она возвращает.

Эти сведения помогут вам понять, как используется модель. Собранные входные данные также могут быть полезны при обучении будущих версий модели.

Дополнительные сведения см. в статье [Сбор данных для моделей в рабочей среде](how-to-enable-data-collection.md).


## <a name="audit-trail-of-the-ml-lifecycle"></a>Журнал аудита жизненного цикла машинного обучения

Служба машинного обучения Azure позволяет отслеживать сквозной аудит всех активов машинного обучения. В частности:

- Служба машинного обучения Azure [интегрируется с Git](how-to-set-up-training-targets.md#gitintegration) , чтобы отнести информацию, из которой поступил код репозитория или филиала.
- [Наборы данных машинного обучения Azure](how-to-create-register-datasets.md) помогают отслеживанию и версии.
- В журнале выполнения машинного обучения Azure хранится моментальный снимок кода, данных и вычислений, используемых для обучения модели.
- В реестре модели машинного обучения Azure записываются все метаданные, связанные с вашей моделью (которые обучены с помощью эксперимента, где выполняется развертывание, если ее развертывания являются работоспособными).

## <a name="automate-the-ml-lifecycle"></a>Автоматизация жизненного цикла машинного обучения 

Вы можете использовать GitHub и Azure Pipelines для создания процесса непрерывной интеграции, который обучает модель. В типичном сценарии, когда анализу данных проверяет изменение в репозитории Git для проекта, конвейер Azure начнет обучающий запуск. Затем результаты выполнения можно просмотреть, чтобы увидеть характеристики производительности обученной модели. Также можно создать конвейер, который развертывает модель как веб-службу.

[Расширение машинное обучение Azure](https://marketplace.visualstudio.com/items?itemName=ms-air-aiagility.vss-services-azureml) упрощает работу с Azure pipelines. Он предоставляет следующие усовершенствования Azure Pipelines.

* Включает выбор рабочей области при определении подключения к службе.
* Разрешает активацию конвейеров выпуска обученными моделями, созданными в конвейере обучения.

Дополнительные сведения об использовании Azure Pipelines с Машинное обучение Azure см. в статье [Непрерывная интеграция и развертывание моделей ml с помощью Azure pipelines](/azure/devops/pipelines/targets/azure-machine-learning) статьи и репозитория [машинное обучение Azure млопс](https://aka.ms/mlops) .

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения см. в следующих ресурсах:

+ [Как &, где развертывать модели](how-to-deploy-and-where.md) с машинное обучение Azure

+ [Учебник. Развертывание модели классификации изображений в ACI](tutorial-deploy-models-with-aml.md).

+ [Репозиторий комплексных примеров Млопс](https://github.com/microsoft/MLOps)

+ [CI/CD моделей машинного обучения с Azure Pipelines](/azure/devops/pipelines/targets/azure-machine-learning)

+ Создание клиентов, [использующих развернутую модель](how-to-consume-web-service.md)

+ [Машинное обучение с поддержкой масштабирования](/azure/architecture/data-guide/big-data/machine-learning-at-scale)

+ [Эталонные архитектуры Azure ии & рекомендации](https://github.com/microsoft/AI)
