---
title: Использование Visual Studio Code для машинного обучения
titleSuffix: Azure Machine Learning
description: Узнайте, как установить Машинное обучение Azure для Visual Studio Code, и создайте простой эксперимент в Машинном обучении Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: ronglu
author: ronglums
ms.date: 7/12/2019
ms.custom: seodec18
ms.openlocfilehash: 0507080a390a4bb9f981b0d911961337e9b2c62a
ms.sourcegitcommit: 1752581945226a748b3c7141bffeb1c0616ad720
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/14/2019
ms.locfileid: "70997178"
---
# <a name="get-started-with-azure-machine-learning-for-visual-studio-code"></a>Приступая к работе с Azure Machine Learning for Visual Studio Code

В этой статье вы узнаете, как использовать расширение для Машинное обучение Azure для Visual Studio Code обучения и развертывания моделей машинного обучения и глубокого обучения.

[Машинное обучение Azure](overview-what-is-azure-ml.md) обеспечивает поддержку экспериментов, выполняемых локально и на удаленных целевых объектах вычислений. Для каждого эксперимента вы можете отслеживать множество запусков, которые можно выполнять как угодно часто с целью итеративной проверки разных методик, гиперпараметров и т. п. Службу "Машинное обучение Azure" можно использовать для отслеживания пользовательских метрик и экспериментов, обеспечивая повторяемость и возможность проверки для задач обработки и анализа данных.

Эти модели также можно развернуть для тестирования и потребностей в рабочей среде.

## <a name="prerequisites"></a>Предварительные требования

+ Если у вас еще нет подписки Azure, создайте бесплатную учетную запись Azure, прежде чем начинать работу. Попробуйте [бесплатную или платную версию машинное обучение Azure](https://aka.ms/AMLFree).

+ Необходимо установить Visual Studio Code. Visual Studio Code — это упрощенный, но мощный редактор исходного кода, работающий на рабочем столе. Он поставляется со встроенной поддержкой Python и других языков программирования. Если вы еще не установили Visual Studio Code, [Узнайте, как](https://code.visualstudio.com/docs/setup/setup-overview)это делать.

+ [Установите Python 3,5 или более поздней версии](https://www.anaconda.com/download/).


## <a name="install-the-extension-for-azure-machine-learning-for-visual-studio-code"></a>Установите расширение для Машинное обучение Azure для Visual Studio Code

При установке расширения Машинное обучение Azure автоматически устанавливаются два расширения (при наличии доступа к Интернету). Они являются [расширением учетной записи Azure](https://marketplace.visualstudio.com/items?itemName=ms-vscode.azure-account) и [расширением Microsoft Python](https://marketplace.visualstudio.com/items?itemName=ms-python.python).

Для работы с Машинное обучение Azure необходимо включить Visual Studio Code в интегрированную среду разработки (IDE) Python. Для использования [Python в Visual Studio Code](https://code.visualstudio.com/docs/languages/python)требуется расширение Microsoft Python. Это расширение устанавливается автоматически с расширением Машинное обучение Azure. Расширение делает Visual Studio Code великолепной интегрированной средой разработки и работает в любой операционной системе с различными интерпретаторами Python. Расширение Microsoft Python использует все возможности Visual Studio Code для обеспечения автозаполнения, IntelliSense, linting, отладки и модульного тестирования. Расширение также позволяет легко переключаться между средами Python, в том числе виртуальными и conda средами. Дополнительные сведения об изменении, выполнении и отладке кода Python см. в руководстве по работе со [средой Python Hello-World](https://code.visualstudio.com/docs/python/python-tutorial).

Чтобы установить расширение Машинное обучение Azure, выполните следующие действия.

1. Откройте Visual Studio Code.

1. В веб-браузере перейдите в [машинное обучение Azure для расширения Visual Studio Code (Предварительная версия)](https://aka.ms/vscodetoolsforai).

1. На этой веб-странице нажмите кнопку **установить**. 

1. На вкладке расширение выберите **установить**.

1. Вкладка приветствие расширения открывается в Visual Studio Code, а символ Azure (показанный на следующем снимке экрана) добавляется на панель действий.

   ![Значок Azure на панели действий Visual Studio Code](./media/vscode-tools-for-ai/azure-activity-bar.png)

1. В диалоговом окне выберите **Вход** и следуйте инструкциям на экране, чтобы пройти аутентификацию в Azure. 
   
   Расширение учетной записи Azure, которое было установлено вместе с Машинное обучение Azure для расширения Visual Studio Code, помогает выполнять аутентификацию с помощью учетной записи Azure. Список команд см. на странице [расширения учетной записи Azure](https://marketplace.visualstudio.com/items?itemName=ms-vscode.azure-account).

> [!Tip] 
> Ознакомьтесь с [расширением интелликоде для Visual Studio Code (Предварительная версия)](https://go.microsoft.com/fwlink/?linkid=2006060). Интелликоде предоставляет набор возможностей, поддерживающих искусственный интеллект для IntelliSense в Python, таких как вывод наиболее релевантных автозаполнений на основе текущего контекста кода.

## <a name="install-the-azure-machine-learning-sdk"></a>Установка пакета SDK для Машинное обучение Azure

1. Убедитесь, что установлен Python 3,5 или более поздней версии и распознается Visual Studio Code. Если вы установите его сейчас, перезапустите Visual Studio Code и [выберите интерпретатор Python](https://code.visualstudio.com/docs/python/python-tutorial).

1. В окне встроенного терминала укажите интерпретатор Python для использования. Или нажмите клавишу ВВОД, чтобы использовать интерпретатор Python по умолчанию.

   ![Выбор интерпретатора](./media/vscode-tools-for-ai/python.png)

1. В правом нижнем углу окна появится уведомление о том, что [пакет SDK машинное обучение Azure](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py) устанавливается автоматически. Только что созданная среда Python является локальной и частной и имеет Visual Studio Code необходимые условия для работы с Машинное обучение Azure.

   ![установить пакет SDK для Машинного обучения Azure для Python.](./media/vscode-tools-for-ai/runtimedependencies.png)

## <a name="get-started-with-azure-machine-learning"></a>Начало работы со службой "Машинное обучение Azure"

Перед началом обучения и развертыванием моделей машинного обучения в Visual Studio Code необходимо создать [машинное обучение Azure рабочую область](concept-workspace.md) в облаке. Эта Рабочая область будет содержать ваши модели и ресурсы. 

Чтобы создать рабочую область и добавить первый эксперимент, выполните следующие действия.

1. На панели действий Visual Studio Code щелкните значок Azure. Появится боковая панель "Машинное обучение Azure".

   [![Создание рабочей области](./media/vscode-tools-for-ai/CreateaWorkspace.gif)](./media/vscode-tools-for-ai/CreateaWorkspace.gif#lightbox)


1. Щелкните правой кнопкой мыши подписку Azure и выберите **Create Workspace** (Создать рабочую область). Появится список. В примере анимированного изображения имя подписки — **Бесплатная пробная версия**, а Рабочая область — **теамворкспаце**. 

1. Выберите группу ресурсов из списка или создайте новую с помощью мастера в палитре команд.

1. В поле введите уникальное и понятное имя новой рабочей области. В примере образа Рабочая область называется **теамворкспаце**.

1. Нажмите клавишу ВВОД, чтобы создать новую рабочую область. Он отображается в дереве под именем подписки.

1. Щелкните правой кнопкой мыши узел **эксперимент** и выберите команду **создать эксперимент** в контекстном меню.  Эксперименты используются для отслеживания выполняемых операций в службе "Машинное обучение Azure".

1. В поле введите имя эксперимента. На снимках экрана примера эксперимент называется **MNIST**.
 
1. Нажмите клавишу ВВОД, чтобы создать новый эксперимент. Эксперимент отображается в дереве под именем рабочей области.

1. В рабочей области можно щелкнуть эксперимент, чтобы установить его в качестве **активного** эксперимента. **Активный** эксперимент — это текущий эксперимент. Открытая папка в Visual Studio Code будет связана с этим экспериментом в облаке. В этой папке должны находиться локальные скрипты Python.

Теперь ключевые метрики будут храниться в истории экспериментов. Аналогично, модели, которые вы обучаете, будут автоматически загружены в Машинное обучение Azure и сохранены вместе с метриками и журналами экспериментов. 

[![Присоединение папки в Visual Studio Code](./media/vscode-tools-for-ai/CreateAnExperiment.gif)](./media/vscode-tools-for-ai/CreateAnExperiment.gif#lightbox)


## <a name="create-and-manage-compute-targets"></a>Создание целевых объектов вычислений и управление ими

С Машинное обучение Azure для Visual Studio Code можно подготавливать данные, обучать модели и развертывать их локально и на удаленных целевых объектах вычислений.

Расширение поддерживает несколько удаленных целевых объектов вычислений для Машинное обучение Azure. Дополнительные сведения см. в полном списке поддерживаемых [целевых объектов вычислений для машинное обучение Azure](how-to-set-up-training-targets.md).

### <a name="create-compute-targets-for-azure-machine-learning-in-visual-studio-code"></a>Создание целевых объектов вычислений для Машинное обучение Azure в Visual Studio Code

Чтобы создать целевой объект вычислений, сделайте следующее:

1. На панели действий Visual Studio Code щелкните значок Azure. Появится боковая панель "Машинное обучение Azure".

2. В представлении в виде дерева разверните подписку Azure и Машинное обучение Azure рабочую область. В следующем примере образа имя подписки — **Бесплатная пробная версия**, а Рабочая область — **теамворкспаце**. 

3. В узле рабочей области щелкните правой кнопкой мыши узел **Compute** (Вычисления) и выберите **Create Compute** (Создать вычислительный ресурс).

4. Выберите из списка тип целевого объекта вычислений. 

5. В палитре команд выберите размер виртуальной машины.

6. В палитре команд в поле введите имя целевого объекта вычислений. 

7. В файле JSON config, который открывается на новой вкладке, укажите любые дополнительные свойства. Можно указать такие свойства, как максимальное число узлов.

8. После завершения настройки целевого объекта вычислений в правом нижнем углу окна выберите **Отправить**.

Ниже приведен пример создания Машинное обучение Azure вычислений (Амлкомпуте).

[![Создание вычислений AML в Visual Studio Code](./media/vscode-tools-for-ai/CreateARemoteCompute.gif)](./media/vscode-tools-for-ai/CreateARemoteCompute.gif#lightbox)

#### <a name="the-run-configuration-file"></a>Файл конфигурации запуска

Расширение Visual Studio Code автоматически создает локальный целевой объект вычислений и выполняет конфигурации для локальных и DOCKER сред на локальном компьютере. Файлы конфигурации запуска можно найти в связанном целевом узле вычислений. 

## <a name="train-and-tune-models"></a>Обучение и тонкая настройка моделей

Используйте Машинное обучение Azure для Visual Studio Code (Предварительная версия) для быстрого прохода по коду, пошагового выполнения и отладки и использования решения для управления исходным кодом. 

Чтобы запустить эксперимент локально с помощью Машинное обучение Azure:

1. На панели действий Visual Studio Code щелкните значок Azure. Появится боковая панель "Машинное обучение Azure".

1. В представлении в виде дерева разверните подписку Azure и Машинное обучение Azure рабочую область. 

1. В узле Рабочая область разверните узел **вычислений** и щелкните правой кнопкой мыши **файл конфигурации запуска** для вычислений, который требуется использовать. 

1. Щелкните **Run Experiment** (Выполнить эксперимент).

1. В проводнике выберите сценарий, который нужно запустить. 

1. Выберите **Просмотреть эксперимент запуск** , чтобы просмотреть встроенный портал машинное обучение Azure, чтобы отслеживать запуски и просматривать обученные модели.

Ниже приведен пример того, как запустить эксперимент локально:

[![Запуск эксперимента локально](./media/vscode-tools-for-ai/RunExperimentLocally.gif)](./media/vscode-tools-for-ai/RunExperimentLocally.gif#lightbox)

### <a name="use-remote-computes-for-experiments-in-visual-studio-code"></a>Использование удаленных вычислений для экспериментов в Visual Studio Code

Чтобы использовать удаленный целевой объект вычислений для обучения, необходимо создать файл конфигурации запуска. Этот файл указывает службе "Машинное обучение Azure" не только место выполнения эксперимента, но и метод подготовки среды.

#### <a name="the-conda-dependencies-file"></a>Файл зависимостей conda

По умолчанию создается новая среда conda, и вы управляете зависимостями установки. Однако необходимо указать зависимости и их версии в файле *aml_config/conda_dependencies. yml* . 

В следующем фрагменте кода из *aml_config/conda_dependencies. yml* по `tensorflow=1.12.0`умолчанию указывается. Если не указать версию зависимости, будет использоваться последняя версия. Вы можете добавить в файл конфигурации дополнительные зависимости.

```yaml
# The dependencies defined in this file will be automatically provisioned for runs with userManagedDependencies=False.

name: project_environment
dependencies:
  # The python interpreter version.

  # Currently Azure ML only supports 3.5.2 and later.

- python=3.6.2
- tensorflow=1.12.0

- pip:
    # Required packages for AzureML execution, history, and data preparation.

  - --index-url https://azuremlsdktestpypi.azureedge.net/sdk-release/Preview/E7501C02541B433786111FE8E140CAA1
  - --extra-index-url https://pypi.python.org/simple
  - azureml-defaults

```

Чтобы запустить эксперимент с Машинное обучение Azure на удаленном целевом объекте вычислений:

1. На панели действий Visual Studio Code щелкните значок Azure. Появится боковая панель "Машинное обучение Azure".

1. В представлении в виде дерева разверните подписку Azure и Машинное обучение Azure рабочую область. 

1. В окне редактора щелкните правой кнопкой мыши скрипт Python и выберите **AML: Run as Experiment in Azure** (AML: Выполнение эксперимента в Azure). 

1. В палитре команд выберите целевой объект вычислений. 

1. В палитре команд в поле введите имя конфигурации запуска. 

1. Измените файл *conda_dependencies. yml* , чтобы указать зависимости среды выполнения эксперимента. Затем в правом нижнем углу окна выберите **Отправить**. 

1. Выберите **Просмотреть эксперимент запуск** , чтобы просмотреть встроенный портал машинное обучение Azure, чтобы отслеживать запуски и просматривать обученные модели.

Ниже приведен пример того, как запустить эксперимент на удаленном целевом объекте вычислений.

[![Запуск эксперимента на удаленном целевом объекте](./media/vscode-tools-for-ai/runningOnARemoteTarget.gif)](./media/vscode-tools-for-ai/runningOnARemoteTarget.gif#lightbox)


## <a name="deploy-and-manage-models"></a>Развертывание моделей и управление ими
В Машинное обучение Azure можно развертывать модели машинного обучения и управлять ими в облаке и на границе. 

### <a name="register-your-model-to-azure-machine-learning-from-visual-studio-code"></a>Зарегистрируйте модель для Машинное обучение Azure из Visual Studio Code

Теперь, когда модель обучена, вы можете зарегистрировать ее в рабочей области. Вы можете отслеживание и развертывание зарегистрированных моделей.

Чтобы зарегистрировать модель, выполните следующие действия.

1. На панели действий Visual Studio Code щелкните значок Azure. Появится боковая панель "Машинное обучение Azure".

1. В представлении в виде дерева разверните подписку Azure и Машинное обучение Azure рабочую область.

1. В узле рабочей области щелкните правой кнопкой мыши **Models** (Модели) и выберите **Register Model** (Зарегистрировать модель).

1. В палитре команд в поле введите имя модели. 

1. В списке выберите, следует ли передать **файл модели** (для отдельных моделей) или **папку модели** (для моделей с несколькими файлами, например TensorFlow). 

1. Выберите папку или файл.

1. После завершения настройки свойств модели в правом нижнем углу окна выберите **Отправить**. 

Ниже приведен пример регистрации модели для Машинное обучение Azure.

[![Регистрация модели в AML](./media/vscode-tools-for-ai/RegisteringAModel.gif)](./media/vscode-tools-for-ai/RegisteringAModel.gif#lightbox)


### <a name="deploy-your-service-from-visual-studio-code"></a>Развертывание службы из Visual Studio Code

В Visual Studio Code можно развернуть веб-службу, чтобы:
+ Экземпляры контейнеров Azure (ACI) для тестирования.
+ Служба Azure Kubernetes (AKS) для рабочей среды.

Вам не нужно создавать контейнер ACI для предварительного тестирования, так как контейнеры ACI создаются в режиме реального времени. Тем не менее, необходимо заранее настроить кластеры AKS. Дополнительные сведения см. в разделе [Развертывание моделей с помощью машинное обучение Azure](how-to-deploy-and-where.md).

Для развертывания веб-службы выполните следующие действия.

1. На панели действий Visual Studio Code щелкните значок Azure. Появится боковая панель "Машинное обучение Azure".

1. В древовидном представлении разверните подписку Azure и рабочую область Машинное обучение Azure.

1. В узле рабочей области, разверните узел **Models** (Модели).

1. Щелкните правой кнопкой мыши модель, которую необходимо развернуть, и выберите в контекстном меню пункт **развернуть службу из зарегистрированной модели** .

1. В палитре команд выберите целевой объект вычислений, в который требуется выполнить развертывание. 

1. В палитре команд в поле введите имя для этой службы.  

1. В палитре команд нажмите клавишу ВВОД на клавиатуре, чтобы найти и выбрать файл скрипта.

1. В палитре команд нажмите клавишу ВВОД на клавиатуре, чтобы найти и выбрать файл зависимостей conda.

1. Завершив настройку свойств службы, в правом нижнем углу окна выберите **Отправить** для развертывания. В файле свойств службы можно указать локальный файл DOCKER или файл Schema. JSON.

Теперь веб-служба развернута.

Ниже приведен пример развертывания веб-службы.

[![Развертывание веб-службы](./media/vscode-tools-for-ai/CreatingAnImage.gif)](./media/vscode-tools-for-ai/CreatingAnImage.gif#lightbox)

### <a name="use-keyboard-shortcuts"></a>Использование сочетаний клавиш

С помощью клавиатуры можно получить доступ к Машинное обучение Azure функциям в Visual Studio Code. Наиболее важным сочетанием клавиш является Ctrl + Shift + P, которое отображает палитру команд. Из палитры команд у вас есть доступ ко всем функциональным возможностям Visual Studio Code, включая сочетания клавиш для наиболее распространенных операций.

[![Сочетания клавиш для Машинное обучение Azure Visual Studio Code](./media/vscode-tools-for-ai/commands.gif)](./media/vscode-tools-for-ai/commands.gif#lightbox)

## <a name="next-steps"></a>Следующие шаги

* Пошаговое руководство по обучению машинное обучение Azure за пределами Visual Studio Code [см. в разделе Учебник. обучению модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).
* Пошаговое руководство по локальному изменению, выполнению и отладке кода см. в [руководстве по использованию Hello World](https://code.visualstudio.com/docs/python/python-tutorial).
