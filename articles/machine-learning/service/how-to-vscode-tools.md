---
title: Использование Visual Studio Code для машинного обучения
titleSuffix: Azure Machine Learning service
description: Узнайте, как установить Машинное обучение Azure для Visual Studio Code, и создайте простой эксперимент в Машинном обучении Azure.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: shwinne
author: swinner95
ms.date: 12/04/2018
ms.custom: seodec18
ms.openlocfilehash: 70f9c34957b977aff9fc6211bf79415ed9abe255
ms.sourcegitcommit: db3fe303b251c92e94072b160e546cec15361c2c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/22/2019
ms.locfileid: "66016512"
---
# <a name="get-started-with-azure-machine-learning-for-visual-studio-code"></a>Приступая к работе с Azure Machine Learning for Visual Studio Code

В этой статье вы узнаете, как использовать расширение для машинного обучения Azure для Visual Studio Code, обучать и развертывать машинного обучения и глубокого обучения моделей.

[Службы машинного обучения Azure](overview-what-is-azure-ml.md) обеспечивает поддержку для экспериментов, работающих локально, так и на удаленных целевых объектов вычислений. Для каждого эксперимента вы можете отслеживать множество запусков, которые можно выполнять как угодно часто с целью итеративной проверки разных методик, гиперпараметров и т. п. Службу "Машинное обучение Azure" можно использовать для отслеживания пользовательских метрик и экспериментов, обеспечивая повторяемость и возможность проверки для задач обработки и анализа данных.

Можно также развернуть эти модели для задач тестирования и производства.

## <a name="prerequisites"></a>Технические условия

+ Если у вас еще нет подписки Azure, создайте бесплатную учетную запись Azure, прежде чем начинать работу. Попробуйте [бесплатные или платные версии службы машинного обучения Azure](https://aka.ms/AMLFree).

+ Необходимо установить Visual Studio Code. Visual Studio Code — редактор легковесный, но мощный исходного кода, который выполняется на рабочем столе. Он поставляется со встроенной поддержкой для Python и других языках программирования. Если вы еще не установили Visual Studio Code, [Узнайте, как](https://code.visualstudio.com/docs/setup/setup-overview).

+ [Установите Python 3.5 или более поздней версии](https://www.anaconda.com/download/).


## <a name="install-the-extension-for-azure-machine-learning-for-visual-studio-code"></a>Установите расширение для машинного обучения Azure для Visual Studio Code

При установке расширения машинного обучения Azure, два Дополнительные расширения устанавливаются автоматически (если у вас есть доступ к Интернету). Они [расширение учетной записи Azure](https://marketplace.visualstudio.com/items?itemName=ms-vscode.azure-account) и [расширение Microsoft Python](https://marketplace.visualstudio.com/items?itemName=ms-python.python).

Для работы с машинным обучением Azure, необходимо включить в Python интегрированная среда разработки (IDE) Visual Studio Code. Вы должны иметь расширение Microsoft Python для использования [Python в Visual Studio Code](https://code.visualstudio.com/docs/languages/python). Это расширение автоматически устанавливается с расширением машинного обучения Azure. Расширение делает Visual Studio Code отличную интегрированную среду разработки и работы в любой операционной системе с различными интерпретаторов Python. Расширение Microsoft Python использует все возможности Visual Studio Code для предоставления автозаполнения, IntelliSense, анализ кода, отладки и модульного тестирования. Расширение также позволяет легко переключаться между средами Python, включая виртуальные окружения и окружения conda. Дополнительные сведения об изменении, выполнения и отладки кода Python, см. в разделе [Python для руководства Здравствуй, мир](https://code.visualstudio.com/docs/python/python-tutorial).

Чтобы установить расширение машинного обучения Azure:

1. Откройте Visual Studio Code.

1. В веб-браузер, перейдите в раздел [машинного обучения Azure для расширения Visual Studio Code (Предварительная версия)](https://aka.ms/vscodetoolsforai).

1. На этой веб-странице выберите **установить**. 

1. На вкладке «расширения» выберите **установить**.

1. Откроется вкладка приветствия для расширения в Visual Studio Code и Azure (выделена красным цветом на снимке экрана ниже) будет добавлен на панель действий.

   ![Значок Azure на панели действий Visual Studio Code](./media/vscode-tools-for-ai/azure-activity-bar.png)

1. В диалоговом окне выберите **Sign In** и следуйте инструкциям на экране для аутентификации в Azure. 
   
   Расширение учетной записи Azure, который был установлен вместе с машинного обучения Azure для расширения Visual Studio Code, поможет выполнить проверку подлинности с учетной записью Azure. Список команд, см. на странице для [расширение учетной записи Azure](https://marketplace.visualstudio.com/items?itemName=ms-vscode.azure-account).

> [!Tip] 
> Ознакомьтесь с [IntelliCode расширения для Visual Studio Code (Предварительная версия)](https://go.microsoft.com/fwlink/?linkid=2006060). IntelliCode предоставляет набор возможностей с помощью ии для IntelliSense на языке Python, например определение наиболее важные autocompletions, на основе текущего контекста кода.

## <a name="install-the-azure-machine-learning-sdk"></a>Установка Azure Machine Learning SDK

1. Убедитесь, что установлен Python 3.5 или более поздней версии и распознается по Visual Studio Code. Если установить сейчас, перезапустите Visual Studio Code и [выберите интерпретатор Python](https://code.visualstudio.com/docs/python/python-tutorial).

1. В окне терминала укажите интерпретатор Python для использования. Или нажмите клавишу ВВОД, чтобы использовать интерпретатор Python по умолчанию.

   ![Выбор интерпретатора](./media/vscode-tools-for-ai/python.png)

1. В правом нижнем углу окна появится уведомление, указывающее, что [пакета SDK для Azure Machine Learning](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py) устанавливается автоматически. Только что созданный среда Python является локальной и частной, и имеет необходимые компоненты Visual Studio Code для работы со службой машинного обучения Azure.

   ![установить пакет SDK для Машинного обучения Azure для Python.](./media/vscode-tools-for-ai/runtimedependencies.png)

## <a name="get-started-with-azure-machine-learning"></a>Начало работы со службой "Машинное обучение Azure"

Перед началом обучения и развертывания моделей машинного обучения в Visual Studio Code, необходимо создать [рабочей области службы машинного обучения Azure](concept-workspace.md) в облаке. Эта рабочая область будет содержать модели и ресурсы. 

Чтобы создать рабочую область и добавить свой первый эксперимент:

1. На панели действий Visual Studio Code выберите значок Azure. Появится боковая панель "Машинное обучение Azure".

   [![Создание рабочей области](./media/vscode-tools-for-ai/CreateaWorkspace.gif)](./media/vscode-tools-for-ai/CreateaWorkspace.gif#lightbox)


1. Щелкните правой кнопкой мыши подписку Azure и выберите **Create Workspace** (Создать рабочую область). Появится список. На анимированном изображении пример, имя подписки — **бесплатной пробной версии**, и рабочая область находится **TeamWorkspace**. 

1. Выберите группу ресурсов из списка или создайте новую с помощью мастера в палитре команд.

1. В поле введите уникальное и понятное имя новой рабочей области. В примере ниже с именем рабочей области **TeamWorkspace**.

1. Нажмите клавишу ВВОД, чтобы создать новую рабочую область. Он отображается в дереве ниже имя подписки.

1. Щелкните правой кнопкой мыши **эксперимента** узел и выберите **создать эксперимент** в контекстном меню.  Эксперименты используются для отслеживания выполняемых операций в службе "Машинное обучение Azure".

1. В поле введите имя для своего эксперимента. В примерах снимков экрана с именем эксперимента **MNIST**.
 
1. Нажмите клавишу ВВОД, чтобы создать новый эксперимент. Эксперимент появляется в дереве, под именем рабочей области.

1. В рабочей области, щелкнуть правой кнопкой мыши эксперимент, чтобы задать его в качестве **Active** поэкспериментировать. **Active** эксперимент — на текущий эксперимент. Откройте папки в Visual Studio Code будет связываться с этого эксперимента в облаке. В этой папке должны находиться локальные скрипты Python.

Теперь ваши ключевые метрики будут храниться в журнале эксперимента. Аналогичным образом модели, для которых необходимо выполнить обучение будет быть автоматически загружаются в машинное обучение Azure и хранятся вместе с эксперимента метрики и журналы. 

[![Присоединение папки в Visual Studio Code](./media/vscode-tools-for-ai/CreateAnExperiment.gif)](./media/vscode-tools-for-ai/CreateAnExperiment.gif#lightbox)


## <a name="create-and-manage-compute-targets"></a>Создание целевых объектов вычислений и управление ими

С помощью машинного обучения Azure для Visual Studio Code можно подготовить данные, обучать модели и развернуть их как локально, так и на удаленных целевых объектов вычислений.

Это расширение поддерживает несколько удаленных целевых объектов вычислений для машинного обучения Azure. Дополнительные сведения см. Полный список поддерживаемых [целевых объектов вычислений для машинного обучения Azure](how-to-set-up-training-targets.md).

### <a name="create-compute-targets-for-azure-machine-learning-in-visual-studio-code"></a>Создание целевых объектов вычислений для машинного обучения Azure в Visual Studio Code

Создание целевого объекта вычислений.

1. На панели действий Visual Studio Code выберите значок Azure. Появится боковая панель "Машинное обучение Azure".

2. В представлении в виде дерева разверните подписку Azure и рабочую область службы "Машинное обучение Azure". В следующем примере изображение, имя подписки — **бесплатной пробной версии**, и рабочая область находится **TeamWorkspace**. 

3. В узле рабочей области щелкните правой кнопкой мыши узел **Compute** (Вычисления) и выберите **Create Compute** (Создать вычислительный ресурс).

4. Выберите из списка тип целевого объекта вычислений. 

5. На палитре команд выберите размер виртуальной машины.

6. На палитре команд в поле введите имя для целевого объекта вычислений. 

7. В файле конфигурации JSON, откроется на новой вкладке Определение дополнительных свойств. Можно указать свойства, такие как максимальное число узлов.

8. После завершения настройки целевого объекта вычислений, в правом нижнем углу окна, выберите **отправить**.

Ниже приведен пример создания вычислений машинного обучения Azure (AMLCompute):

[![Создание вычислений AML в Visual Studio Code](./media/vscode-tools-for-ai/CreateARemoteCompute.gif)](./media/vscode-tools-for-ai/CreateARemoteCompute.gif#lightbox)

#### <a name="the-run-configuration-file"></a>Файл конфигурации запуска

Расширения Visual Studio Code автоматически создает целевой объект локальных вычислений и конфигурации запуска для среды локальной и docker на локальном компьютере. Можно найти файлы конфигурации при запуске в связанные вычислительные целевого узла. 

## <a name="train-and-tune-models"></a>Обучение и тонкая настройка моделей

Используйте машинное обучение Azure для Visual Studio Code (Предварительная версия), чтобы быстро выполнять итерацию кода, пошаговое выполнение и отладку и использовать решение для управления исходным кодом. 

Запуск эксперимента локально с помощью машинного обучения Azure:

1. На панели действий Visual Studio Code выберите значок Azure. Появится боковая панель "Машинное обучение Azure".

1. В представлении в виде дерева разверните подписку Azure и рабочую область службы "Машинное обучение Azure". 

1. В узле рабочей области, разверните **вычислений** узел и щелкните правой кнопкой мыши **конфигурацию выполнения** вычислительных ресурсов, вы хотите использовать. 

1. Щелкните **Run Experiment** (Выполнить эксперимент).

1. В проводнике выберите сценарий, который вы хотите запустить. 

1. Выберите **просмотрите сведения о выполнении эксперимента** на портале, интеграции машинного обучения Azure, чтобы выполнять мониторинг запуска и ваших обученных моделей см. в разделе см. в разделе.

Вот пример того, как для локального выполнения эксперимента:

[![Локальный запуск эксперимента](./media/vscode-tools-for-ai/RunExperimentLocally.gif)](./media/vscode-tools-for-ai/RunExperimentLocally.gif#lightbox)

### <a name="use-remote-computes-for-experiments-in-visual-studio-code"></a>Использовать удаленный вычислительные ресурсы для экспериментов в Visual Studio Code

Использование удаленных вычислений целевого объекта для обучения, необходимо создать файл конфигурации запуска. Этот файл указывает службе "Машинное обучение Azure" не только место выполнения эксперимента, но и метод подготовки среды.

#### <a name="the-conda-dependencies-file"></a>Файл зависимостей conda

По умолчанию новую среду conda создается автоматически и управляются установки зависимостей. Тем не менее, необходимо указать зависимости и их версий в *aml_config/conda_dependencies.yml* файла. 

Следующий фрагмент кода по умолчанию *aml_config/conda_dependencies.yml* указывает `tensorflow=1.12.0`. Если не указать версию зависимости, будет использоваться последняя версия. Вы можете добавить в файл конфигурации дополнительные зависимости.

```yaml
# The dependencies defined in this file will be automatically provisioned for runs with userManagedDependencies=False.

name: project_environment
dependencies:
  # The python interpreter version.

  # Currently Azure ML only supports 3.5.2 and later.

- python=3.6.2
- tensorflow=1.12.0

- pip:
    # Required packages for AzureML execution, history, and data preparation.

  - --index-url https://azuremlsdktestpypi.azureedge.net/sdk-release/Preview/E7501C02541B433786111FE8E140CAA1
  - --extra-index-url https://pypi.python.org/simple
  - azureml-defaults

```

Для запуска эксперимента с помощью машинного обучения Azure, на удаленном целевом объекте вычислений:

1. На панели действий Visual Studio Code выберите значок Azure. Появится боковая панель "Машинное обучение Azure".

1. В представлении в виде дерева разверните подписку Azure и рабочую область службы "Машинное обучение Azure". 

1. В окне редактора щелкните правой кнопкой мыши скрипта Python и выберите **AML: Run as Experiment in Azure** (AML: Выполнение эксперимента в Azure). 

1. На палитре команд выберите целевой объект вычислений. 

1. На палитре команд в поле введите имя конфигурации запуска. 

1. Изменить *conda_dependencies.yml* файл, чтобы указать зависимости среды выполнения эксперимента. В правом нижнем углу окна выберите **отправить**. 

1. Выберите **просмотрите сведения о выполнении эксперимента** на портале, интеграции машинного обучения Azure, чтобы выполнять мониторинг запуска и ваших обученных моделей см. в разделе см. в разделе.

Вот пример того, как запуск эксперимента на целевом объекте удаленных вычислений:

[![Запуск эксперимента удаленного конечного объекта](./media/vscode-tools-for-ai/runningOnARemoteTarget.gif)](./media/vscode-tools-for-ai/runningOnARemoteTarget.gif#lightbox)


## <a name="deploy-and-manage-models"></a>Развертывание моделей и управление ими
В машинном обучении Azure можно развернуть и управлять вашей модели машинного обучения в облаке и на границе. 

### <a name="register-your-model-to-azure-machine-learning-from-visual-studio-code"></a>Регистрация модели для машинного обучения Azure из Visual Studio Code

Теперь, когда вы обучения модели, можно зарегистрировать его в рабочей области. Можно отслеживать и развернуть зарегистрированных моделей.

Чтобы зарегистрировать модель:

1. На панели действий Visual Studio Code выберите значок Azure. Появится боковая панель "Машинное обучение Azure".

1. В представлении в виде дерева разверните подписку Azure и рабочую область службы "Машинное обучение Azure".

1. В узле рабочей области щелкните правой кнопкой мыши **Models** (Модели) и выберите **Register Model** (Зарегистрировать модель).

1. На палитре команд в поле введите имя модели. 

1. В списке выберите, следует ли отправить **файла модели** (для одной модели) или **папка модели** (для модели с несколькими файлами, такие как TensorFlow). 

1. Выберите папку или файл.

1. После настройки свойств модели, в правом нижнем углу окна выберите **отправить**. 

Вот пример того, как зарегистрировать модель машинного обучения Azure:

[![Регистрация модели в AML](./media/vscode-tools-for-ai/RegisteringAModel.gif)](./media/vscode-tools-for-ai/RegisteringAModel.gif#lightbox)


### <a name="deploy-your-service-from-visual-studio-code"></a>Развертывание службы из Visual Studio Code

В Visual Studio Code можно развернуть веб-службу, чтобы:
+ Azure экземпляры контейнеров (ACI) для тестирования.
+ Служба Azure Kubernetes (AKS) для рабочей среды.

Не требуется для создания контейнера ACI для заранее, тестирования, из-за создания контейнеров ACI в режиме реального времени. Тем не менее, необходимо заранее настроить кластерах AKS. Дополнительные сведения см. в разделе [развертывать модели в службе машинного обучения Azure](how-to-deploy-and-where.md).

Чтобы развернуть веб-службы:

1. На панели действий Visual Studio Code выберите значок Azure. Появится боковая панель "Машинное обучение Azure".

1. В представлении дерева разверните подписку Azure и рабочую область службы "Машинное обучение Azure".

1. В узле рабочей области, разверните узел **Models** (Модели).

1. Щелкните правой кнопкой мыши модель, нужно развернуть, а кнопки **развернуть службу из зарегистрированных модели** в контекстном меню.

1. В палитре команд выберите необходимо развернуть для целевого объекта вычислений. 

1. На палитре команд в поле введите имя для этой службы.  

1. На палитре команд нажмите клавишу ВВОД на клавиатуре для просмотра и выбора файла скрипта.

1. На палитре команд нажмите клавишу ВВОД на клавиатуре для просмотра и выберите файл зависимостей conda.

1. После настройки свойств службы, в правом нижнем углу окна выберите **отправить** для развертывания. В файле свойств службы можно указать файл локального docker или файла schema.json.

Теперь веб-служба развернута.

Вот пример того, как развертывание веб-службы:

[![Развертывание веб-службы](./media/vscode-tools-for-ai/CreatingAnImage.gif)](./media/vscode-tools-for-ai/CreatingAnImage.gif#lightbox)

### <a name="use-keyboard-shortcuts"></a>Использование сочетаний клавиш

Для доступа к функции машинного обучения Azure в Visual Studio Code, можете использовать клавиатуру. Информация о наиболее важных сочетания клавиш — Ctrl + Shift + P, которая отображает палитру команд. На палитре команд у вас есть доступ ко всем функциональные возможности Visual Studio Code, в том числе сочетания клавиш для наиболее распространенных операций.

[![Сочетания клавиш для машинного обучения Azure для Visual Studio Code](./media/vscode-tools-for-ai/commands.gif)](./media/vscode-tools-for-ai/commands.gif#lightbox)

## <a name="next-steps"></a>Дальнейшие действия

* Пошаговое руководство по для обучения на основе машинного обучения Azure за пределами Visual Studio Code, см. в разделе [руководства: обучению модели классификации изображений с помощью Службы машинного обучения Azure](tutorial-train-models-with-aml.md).
* Пошаговое руководство по редактировать, выполнять и отлаживать код локально, см. в разделе [Python для руководства Здравствуй, мир](https://code.visualstudio.com/docs/python/python-tutorial).
