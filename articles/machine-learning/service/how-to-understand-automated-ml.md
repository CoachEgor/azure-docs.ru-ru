---
title: Общие сведения об автоматизированных результатах ML
titleSuffix: Azure Machine Learning service
description: Узнайте, как просматривать и анализировать диаграммы и метрики для каждого из автоматических запусков машинного обучения.
services: machine-learning
author: nilesha
ms.author: nilesha
ms.reviewer: sgilley
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.date: 07/22/2019
ms.openlocfilehash: ea85a0906ce231312c491d31a33c331480d23812
ms.sourcegitcommit: 4b647be06d677151eb9db7dccc2bd7a8379e5871
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/19/2019
ms.locfileid: "68362159"
---
# <a name="understand-automated-machine-learning-results"></a>Общие сведения об автоматических результатах машинного обучения

В этой статье вы узнаете, как просматривать и анализировать диаграммы и метрики для каждого из автоматических запусков машинного обучения. 

См. также:
+ [Метрики, диаграммы и кривые для моделей классификации](#classification)
+ [Метрики, диаграммы и графики для моделей регрессии](#regression)
+ [Интерпретируемость модели и важность функции](#explain-model)

## <a name="prerequisites"></a>предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте бесплатную учетную запись Azure, прежде чем начинать работу. Опробуйте [бесплатную или платную версию Службы машинного обучения Azure](https://aka.ms/AMLFree).

* Создайте Автоматический эксперимент машинного обучения с помощью пакета SDK или портал Azure.

    * Использование пакета SDK для построения [модели классификации](how-to-auto-train-remote.md) или [модели регрессии](tutorial-auto-train-models.md)
    * Используйте [портал Azure](how-to-create-portal-experiments.md) для создания модели классификации или регрессии путем передачи соответствующих данных.

## <a name="view-the-run"></a>Просмотр выполнения

После выполнения автоматического эксперимента машинного обучения журнал запусков можно найти в рабочей области службы машинного обучения. 

1. Перейдите в рабочую область.

1. На левой панели рабочей области выберите эксперименты.

   ![Снимок экрана с меню эксперимента](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-menu.png)

1. В списке экспериментов выберите ту, которую хотите просмотреть.

   ![Список экспериментов](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-list.png)

1. В нижней таблице выберите **номер запуска**.

   ![Запуск эксперимента](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-run.png)

1. В таблице итерации выберите **номер итерации** для модели, которую необходимо исследовать далее.

   ![Модель эксперимента](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-model.png)

Эти же результаты можно увидеть во время выполнения при использовании `RunDetails`мини-приложения [Jupyter](https://docs.microsoft.com/python/api/azureml-widgets/azureml.widgets?view=azure-ml-py).

## <a name="classification"></a>Результаты классификации

Три следующие метрики и диаграммы доступны для каждой модели классификации, создаваемой с помощью средств автоматического машинного обучения Машинное обучение Azure

+ [Метрики](#classification-metrics)
+ [матрица неточностей](#confusion-matrix);
+ [диаграмма с соотношением полноты и точности](#precision-recall-chart);
+ [ROC-кривые](#roc);
+ [кривая точности прогнозов](#lift-curve);
+ [кривая прироста](#gains-curve);
+ [график калибровки](#calibration-plot).

### <a name="classification-metrics"></a>Метрики классификации

Следующие метрики сохраняются в каждой итерации выполнения для задачи классификации.

|Метрика|Описание|Вычисление|Дополнительные параметры
--|--|--|--|
AUC_Macro| AUC представляет собой область под кривой рабочих характеристик приемника (ROC). Макрозначение — это среднее арифметическое значение AUC для каждого класса.  | [Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html) | average="macro"|
AUC_Micro| AUC представляет собой область под кривой рабочих характеристик приемника (ROC). Микрозначение вычисляется глобально путем объединения истинно положительных и истинно отрицательных результатов из каждого класса.| [Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html) | average="micro"|
AUC_Weighted  | AUC представляет собой область под кривой рабочих характеристик приемника (ROC). Взвешенное значение — среднее арифметическое значение оценки для каждого класса, взвешенное по числу экземпляров значения true в каждом классе.| [Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html)|average="weighted"
accuracy|Точность — это процент прогнозируемых меток, которые точно соответствуют истинным меткам. |[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.accuracy_score.html) |Отсутствуют|
average_precision_score_macro|Для вычисления средней точности используется кривая точности и полноты в качестве взвешенного среднего значения точности, полученного для каждого порогового значения, с увеличением полноты за счет предыдущего порогового значения, используемого в качестве весового коэффициента. Макрозначение — это арифметическое среднее значение точности оценки каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html)|average="macro"|
average_precision_score_micro|Для вычисления средней точности используется кривая точности и полноты в качестве взвешенного среднего значения точности, полученного для каждого порогового значения, с увеличением полноты за счет предыдущего порогового значения, используемого в качестве весового коэффициента. Микрозначение вычисляется глобально путем объединения истинно положительных и истинно отрицательных результатов для каждого порогового значения.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html)|average="micro"|
average_precision_score_weighted|Для вычисления средней точности используется кривая точности и полноты в качестве взвешенного среднего значения точности, полученного для каждого порогового значения, с увеличением полноты за счет предыдущего порогового значения, используемого в качестве весового коэффициента. Взвешенное значение — среднее арифметическое значение для средней оценки точности для каждого класса, взвешенное по числу экземпляров значения true в каждом классе.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html)|average="weighted"|
balanced_accuracy|Сбалансированная точность — это среднее арифметическое значение полноты для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average="macro"|
f1_score_macro|Оценка F1 — это среднее гармоническое значение точности и полноты. Макрозначение — это среднее арифметическое оценки F1 для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html)|average="macro"|
f1_score_micro|Оценка F1 — это среднее гармоническое значение точности и полноты. Микрозначение вычисляется глобально путем подсчета общего числа истинно положительных, ложно отрицательных и истинно отрицательных результатов.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html)|average="micro"|
f1_score_weighted|Оценка F1 — это среднее гармоническое значение точности и полноты. Взвешенное среднее значение по частоте класса оценки F1 для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html)|average="weighted"|
log_loss|Это функция потерь, используемая в логистической регрессии (полиномиальной) и ее дополнениях, например нейронных сетях, которая определяется как вероятность логистических потерь истинных меток для заданных прогнозов вероятностного классификатора. Для отдельной выборки с истинной меткой yt в {0,1} и оценочной вероятностью yp при yt = 1 логистические потери составят –log P(yt&#124;yp) = –(yt log(yp) + (1 – yt) log(1 – yp)).|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.log_loss.html)|Отсутствуют|
norm_macro_recall|Нормализованная полнота макрозначений — это полнота макрозначений, нормализованная таким образом, чтобы случайному выполнению соответствовала оценка 0, а идеальному выполнению — оценка 1. Для этого используется формула norm_macro_recall := (recall_score_macro – R)/(1 – R), где R — ожидаемое значение recall_score_macro для произвольных прогнозов (т. е. R = 0,5 для задач бинарной классификации и R = (1/C) задач C-классовой классификации).|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average = "macro", затем (recall_score_macro – R)/(1 – R), где R — ожидаемое значение recall_score_macro для произвольных прогнозов (т. е. R = 0,5 для задач бинарной классификации и R = (1/C) задач C-классовой классификации).|
precision_score_macro|Точность — это процент элементов, отнесенных к определенному классу, которые действительно находятся в этом классе. Макрозначение — это среднее арифметическое значение точности для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_score.html)|average="macro"|
precision_score_micro|Точность — это процент элементов, отнесенных к определенному классу, которые действительно находятся в этом классе. Микрозначение вычисляется глобально путем подсчета общего числа истинно положительных, ложно отрицательных и истинно отрицательных результатов.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_score.html)|average="micro"|
precision_score_weighted|Точность — это процент элементов, отнесенных к определенному классу, которые действительно находятся в этом классе. Взвешенное значение — среднее арифметическое значение точности для каждого класса, взвешенное по числу экземпляров значения true в каждом классе.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_score.html)|average="weighted"|
recall_score_macro|Полнота — это процент элементов, которые фактически находятся в определенном классе и правильно помечены. Макрозначение — это среднее арифметическое значение полноты для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average="macro"|
recall_score_micro|Полнота — это процент элементов, которые фактически находятся в определенном классе и правильно помечены. Микрозначение вычисляется глобально путем подсчета общего числа истинно положительных и ложно отрицательных результатов.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average="micro"|
recall_score_weighted|Полнота — это процент элементов, которые фактически находятся в определенном классе и правильно помечены. Взвешенное значение — среднее арифметическое значение полноты для каждого класса, взвешенное по числу экземпляров значения true в каждом классе.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average="weighted"|
weighted_accuracy|Взвешенная точность — это точность, для вычисления которой каждой выборке присваивается вес, соответствующий доле экземпляров true в классе true для этой выборки.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.accuracy_score.html)|Значение sample_weight представляет собой вектор, равный доле этого класса для каждого элемента в целевом элементе.|

### <a name="confusion-matrix"></a>Матрица неточностей

Матрица неточностей используется для описания эффективности модели классификации. Каждая строка сопоставлена с экземпляром реального класса, а каждый столбец — с экземпляром прогнозируемого класса. Матрица неточностей позволяет отслеживать правильно и неправильно классифицированные метки для выбранной модели.

Для решения проблем с классификацией Машинное обучение Azure автоматически предоставляет матрицу неточностей для каждой созданной модели. В каждой матрице неточностей автоматическое ML отображает зеленым цветом правильно классифицированные метки, а красным — неправильно классифицированные метки. Размер каждого круга соответствует количеству выборок для этой ячейки. Кроме того, в смежной линейчатой диаграмме представлены данные о частоте для каждой прогнозируемой и реальной метки. 

Пример 1 Модель классификации с низкой точностью ![Модель классификации с низкой точностью](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-confusion-matrix1.png)

Пример 2 Модель классификации с высокой (идеальной) точностью ![Модель классификации с высокой точностью](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-confusion-matrix2.png)


### <a name="precision-recall-chart"></a>Диаграмма соотношения полноты и точности

С помощью этой диаграммы вы можете сравнить кривые полноты и точности для каждой модели, чтобы определить модель с допустимым соотношением этих параметров для поставленной бизнес-задачи. На этой схеме отображается среднее соотношение полноты и точности на макро-уровне, микро-уровне, а также для всех классов модели.

Термин "точность" здесь обозначает способность классификатора правильно назначить метки всем экземплярам. Термин "полнота" обозначает способность классификатора найти все экземпляры для определенной метки. Кривая соотношения полноты и точности демонстрирует связь между этими двумя параметрами. В идеальном случае модель демонстрирует 100 % точность и полноту.

Пример 1 Модель классификации с низкой точностью и низкой полнотой ![Модель классификации с низкой точностью и низкой полнотой](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-precision-recall1.png)

Пример 2 Модель классификации с близкими к 100 % точностью и полнотой (идеальный вариант) ![Модель классификации с высокой точностью и высокой полнотой](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-precision-recall2.png)

### <a name="roc"></a>ROC

Кривая ROC отображает правильно и неправильно классифицированные метки для конкретной модели. Кривая ROC может быть недостаточно информативной, если обучение моделей выполняется по наборам данных с высоким уровнем смещения, так как она не отображает ложноположительные метки.

Пример 1 Модель классификации с небольшим количеством правильных меток и большим количеством неправильных меток![Модель классификации с небольшим количеством правильных меток и большим количеством неправильных меток](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-roc-1.png)

Пример 2 Модель классификации с большим количеством правильных меток и небольшим количеством неправильных меток![Модель классификации с большим количеством правильных меток и небольшим количеством неправильных меток](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-roc-2.png)

### <a name="lift-curve"></a>Диаграмма точности прогнозов

Вы можете сравнить показатели модели, автоматически созданной Машинным обучением Azure, с базовыми показателями, чтобы оценить прирост значений для конкретной модели.

Диаграммы точности прогнозов используются для оценки эффективности модели классификации. Они демонстрируют, насколько улучшаются результаты с применением модели по сравнению с результатами без модели. 

Пример 1 Модель демонстрирует результаты хуже, чем у модели случайного выбора ![Модель классификации с результатами хуже, чем у модели случайного выбора](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-lift-curve1.png)

Пример 2 Модель демонстрирует результаты лучше, чем у модели случайного выбора ![Модель классификации с результатами лучше, чем у модели случайного выбора](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-lift-curve2.png)

### <a name="gains-curve"></a>Кривая прироста

Кривая прироста оценивает эффективность модели классификации по каждому сегменту данных. Она демонстрирует отдельно для каждого процентиля из набора данных, насколько ожидаемые результаты лучше, чем у модели случайного выбора.

Использование диаграммы суммарного прироста позволяет выбрать параметры отсечения для классификации по процентному уровню, который соответствующий требуемому приросту для модели. Здесь представлена та же информация, что и на диаграмме точности прогнозов, но в другом режиме отображения.

Пример 1 Модель классификации с минимальным приростом ![Модель классификации с минимальным приростом](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-gains-curve1.png)

Пример 2 Модель классификации с существенным приростом ![Модель классификации с существенным приростом](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-gains-curve2.png)

### <a name="calibration-plot"></a>График калибровки

Для всех задач классификации вы можете просмотреть строку калибровки с макро-усреднением, микро-усреднением и для каждого класса в выбранной прогнозной модели. 

График калибровки отображает достоверность прогнозной модели. На нем отображается зависимость между прогнозируемой и фактической вероятностями, где "вероятность" обозначает шанс принадлежности конкретного экземпляра к определенной метке. Хорошо откалиброванная модель дает результаты, близкие к графику y=x, где обеспечивается высокая надежность прогнозов. Модель с высокой степенью достоверности приближается к графику y=0, где присутствует прогнозируемая вероятность, но отсутствует фактическая.

Пример 1 Относительно неплохо откалиброванная модель ![ Относительно неплохо откалиброванная модель](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-calib-curve1.png)

Пример 2 Модель с высокой степенью достоверности ![Модель с высокой степенью достоверности](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-calib-curve2.png)

## <a name="regression"></a>Результаты регрессии

Три следующие метрики и диаграммы доступны для каждой модели регрессии, построенной с помощью возможностей автоматического машинного обучения Машинное обучение Azure

+ [Метрики](#reg-metrics)
+ [Прогнозируемые и истинные значения](#pvt)
+ [Гистограмма остатков](#histo)


### <a name="reg-metrics"></a>Метрики регрессии

Следующие метрики сохраняются в каждой итерации выполнения для задачи регрессии или прогнозирования.

|Метрика|Описание|Вычисление|Дополнительные параметры
--|--|--|--|
explained_variance|Объяснимая дисперсия — это доля, учитываемая математической моделью при вычислении дисперсии заданного набора данных. Это процент уменьшения дисперсии исходных данных по отношению к дисперсии ошибок. Если среднее значение ошибок равно 0, оно равно объяснимой дисперсии.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.explained_variance_score.html)|Отсутствуют|
r2_score;|R2 — это коэффициент определения или процентное снижение квадратичных ошибок по сравнению с базовой моделью, которая выводит среднее значение. Если среднее значение ошибок равно 0, оно равно объяснимой дисперсии.|[Вычисление](https://scikit-learn.org/0.16/modules/generated/sklearn.metrics.r2_score.html)|Отсутствуют|
spearman_correlation;|Корреляция Спирмена — это непараметрическая мера монотонности связи между двумя наборами данных. В отличие от корреляции Пирсона, для корреляции Спирмена не предполагается, что оба набора данных используют нормальное распределение. Как и другие коэффициенты корреляции, этот коэффициент принимает значения от –1 до + 1. Значение 0 означает отсутствие корреляции. Значения корреляции –1 и + 1 означают точную монотонную связь. Положительные значения корреляции означают, что при увеличении значения x также увеличивается значение y. Отрицательные значения корреляции означают, что при увеличении значения x значение y уменьшается.|[Вычисление](https://docs.scipy.org/doc/scipy-0.16.1/reference/generated/scipy.stats.spearmanr.html)|Отсутствуют|
mean_absolute_error|Средняя абсолютная погрешность — это оценочная величина абсолютного значения отклонения между целевым и прогнозируемым значениями.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_absolute_error.html)|Отсутствуют|
normalized_mean_absolute_error;|Нормализованная средняя абсолютная погрешность равна средней абсолютной погрешности, деленной на диапазон данных.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_absolute_error.html)|Деление на диапазон данных|
median_absolute_error|Медиана абсолютной погрешности — это медиана всех абсолютных отклонений между целевым и прогнозируемым значениями. Такая потеря устойчива к выбросам.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.median_absolute_error.html)|Отсутствуют|
normalized_median_absolute_error|Нормализованная медиана абсолютной погрешности равна медиане абсолютной погрешности, деленной на диапазон данных.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.median_absolute_error.html)|Деление на диапазон данных|
root_mean_squared_error|Среднеквадратическая погрешность — это среднеквадратическое значение ожидаемого квадратичного отклонения между целевым и прогнозируемыми значениями.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_error.html)|Отсутствуют|
normalized_root_mean_squared_error;|Нормализованная среднеквадратическая погрешность равна среднеквадратической погрешности, деленной на диапазон данных.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_error.html)|Деление на диапазон данных|
root_mean_squared_log_error|Среднеквадратическая логарифмическая погрешность — это среднеквадратическое значение ожидаемой квадратичной логарифмической погрешности.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_log_error.html)|Отсутствуют|
normalized_root_mean_squared_log_error;|Нормализованная среднеквадратическая логарифмическая погрешность равна среднеквадратической логарифмической погрешности, деленной на диапазон данных.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_log_error.html)|Деление на диапазон данных|

### <a name="pvt"></a>Предсказанные и True

Прогнозируемые и истинные значения. Эта диаграмма отображает зависимость между прогнозируемым значением для проблемы регрессии. Эта диаграмма позволяет оценить эффективность модели: чем ближе прогнозируемые значения к графику y=x, тем выше точность прогнозной модели.

После каждого запуска для каждой модели регрессии отображается диаграмма прогнозируемых и истинных значений. Для обеспечения конфиденциальности данных значения группируются по ячейкам, размер каждой из которых отображается в виде линейчатой диаграммы в нижней части области диаграммы. Вы можете сравнить результаты прогнозной модели с более светлой областью, которая отображает идеальные значения, требуемые для этой модели, с учетом допусков.

Пример 1 Модель регрессии с низкой точностью прогнозирования ![Модель регрессии с низкой точностью прогнозирования](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression1.png)

Пример 2 Модель регрессии с высокой точностью прогнозирования ![Модель регрессии с высокой точностью прогнозирования](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression2.png)



### <a name="histo"></a>Гистограмма остатков

Гистограмма остатков отображает разность между наблюдаемыми и прогнозируемыми значениями y. Чтобы отобразить допуск ошибок с низким смещением, гистограмма остатков должна иметь форму колокола с центром около 0. 

Пример 1 Модель регрессии с заметным смещением ошибок![Модель регрессии с заметным смещением ошибок](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression3.png)

Пример 2 Модель регрессии с более равномерным распределением ошибок ![Модель регрессии с более равномерным распределением ошибок](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression4.png)

## <a name="explain-model"></a>Интерпретируемость модели и важность функции

Важность функции позволяет увидеть, насколько ценна каждая функция в построении модели. Это вычисление по умолчанию отключено, так как оно может значительно увеличить время выполнения.   Можно включить описание модели для всех моделей или объяснить только модель наилучшего соответствия.

Вы можете просмотреть оценки важности компонентов для модели в целом, а также отдельно для каждого класса прогнозной модели. Для каждого компонента демонстрируется его важность для каждого класса и для модели в целом.

![Возможность объяснения компонентов](./media/how-to-understand-automated-ml/feature-importance.gif)

Дополнительные сведения о включении функций интерпретации см. [в статье Настройка автоматизированных экспериментов машинного обучения в Python](how-to-configure-auto-train.md#explain-the-model-interpretability).  Пример, поясняющий наилучшую модель, см. в разделе [наилучшее описание модели](how-to-auto-train-remote.md#explain).

## <a name="next-steps"></a>Следующие шаги

+ Дополнительные сведения об [автоматизированном ML](concept-automated-ml.md) в машинное обучение Azure.
+ Попробуйте использовать демонстрационную записную книжку с [описанием автоматизированной машинное обучение модели](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/automated-machine-learning/model-explanation) .
