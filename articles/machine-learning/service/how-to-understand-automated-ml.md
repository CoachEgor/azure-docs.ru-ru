---
title: Общие сведения об автоматизированных результатах ML
titleSuffix: Azure Machine Learning
description: Узнайте, как просматривать и анализировать диаграммы и метрики для каждого из автоматических запусков машинного обучения.
services: machine-learning
author: cartacioS
ms.author: sacartac
ms.reviewer: sgilley
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 93695e0bbcb81a570519a6f74cfdeab4ef85f076
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73489394"
---
# <a name="understand-automated-machine-learning-results"></a>Общие сведения об автоматических результатах машинного обучения
[!INCLUDE [applies-to-skus](../../../includes/aml-applies-to-basic-enterprise-sku.md)]

В этой статье вы узнаете, как просматривать и анализировать диаграммы и метрики для каждого из автоматических запусков машинного обучения. 

См. также:
+ [Метрики, диаграммы и кривые для моделей классификации](#classification)
+ [Метрики, диаграммы и графики для моделей регрессии](#regression)
+ [Интерпретируемость модели и важность функции](#explain-model)

## <a name="prerequisites"></a>Технические условия

* Подписка Azure. Если у вас еще нет подписки Azure, создайте бесплатную учетную запись Azure, прежде чем начинать работу. Опробуйте [бесплатную или платную версию машинное обучение Azure](https://aka.ms/AMLFree) уже сегодня.

* Создайте эксперимент для автоматического запуска машинного обучения с помощью пакета SDK или в Машинное обучение Azure Studio.

    * Использование пакета SDK для построения [модели классификации](how-to-auto-train-remote.md) или [модели регрессии](tutorial-auto-train-models.md)
    * Используйте [машинное обучение Azure Studio](how-to-create-portal-experiments.md) для создания модели классификации или регрессии путем передачи соответствующих данных.

## <a name="view-the-run"></a>Просмотр выполнения

После выполнения автоматического эксперимента машинного обучения журнал запусков можно найти в рабочей области машинного обучения. 

1. Перейдите в рабочую область.

1. На левой панели рабочей области выберите **эксперименты**.

   ![Снимок экрана с меню эксперимента](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-menu.png)

1. В списке экспериментов выберите ту, которую хотите просмотреть.

   [![список экспериментов](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-list.png)](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-list-expanded.png)

1. В нижней таблице выберите **номер запуска**.

   [![ный запуск эксперимента](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-run.png)](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-run-expanded.png))

1. В таблице итерации выберите **номер итерации** для модели, которую необходимо исследовать далее.

   [модель эксперимента ![](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-model.png)](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-experiment-model-expanded.png)

Эти же результаты можно увидеть во время выполнения при использовании мини-приложения `RunDetails`[Jupyter](https://docs.microsoft.com/python/api/azureml-widgets/azureml.widgets?view=azure-ml-py).

## <a name="classification"></a>Результаты классификации

Три следующие метрики и диаграммы доступны для каждой модели классификации, создаваемой с помощью средств автоматического машинного обучения Машинное обучение Azure

+ [Метрики](#classification-metrics)
+ [матрица неточностей](#confusion-matrix);
+ [диаграмма с соотношением полноты и точности](#precision-recall-chart);
+ [ROC-кривые](#roc);
+ [кривая точности прогнозов](#lift-curve);
+ [кривая прироста](#gains-curve);
+ [график калибровки](#calibration-plot).

### <a name="classification-metrics"></a>Метрики классификации

Следующие метрики сохраняются в каждой итерации выполнения для задачи классификации.

|Метрика|Description (Описание)|Вычисление|Дополнительные параметры
--|--|--|--|
AUC_Macro| AUC представляет собой область под кривой рабочих характеристик приемника (ROC). Макрозначение — это среднее арифметическое значение AUC для каждого класса.  | [Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html) | average="macro"|
AUC_Micro| AUC представляет собой область под кривой рабочих характеристик приемника (ROC). Micro вычисляются глобально путем объединения истинных положительных и ложных срабатываний от каждого класса.| [Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html) | average="micro"|
AUC_Weighted  | AUC представляет собой область под кривой рабочих характеристик приемника (ROC). Взвешенное значение — это среднее арифметическое для оценки каждого класса, взвешенное по количеству истинных экземпляров в каждом классе.| [Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html)|average="weighted"
accuracy;|Точность — это процент прогнозируемых меток, которые точно соответствуют истинным меткам. |[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.accuracy_score.html) |None|
average_precision_score_macro|Для вычисления средней точности используется кривая точности и полноты в качестве взвешенного среднего значения точности, полученного для каждого порогового значения, с увеличением полноты за счет предыдущего порогового значения, используемого в качестве весового коэффициента. Макрос — это среднее арифметическое среднее значение точности каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html)|average="macro"|
average_precision_score_micro|Для вычисления средней точности используется кривая точности и полноты в качестве взвешенного среднего значения точности, полученного для каждого порогового значения, с увеличением полноты за счет предыдущего порогового значения, используемого в качестве весового коэффициента. Micro вычисляются глобально путем объединения истинных положительных и ложных срабатываний при каждой отсечки.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html)|average="micro"|
average_precision_score_weighted.|Для вычисления средней точности используется кривая точности и полноты в качестве взвешенного среднего значения точности, полученного для каждого порогового значения, с увеличением полноты за счет предыдущего порогового значения, используемого в качестве весового коэффициента. Взвешенное среднее среднее арифметическое значение точности для каждого класса, взвешенное по количеству истинных экземпляров в каждом классе.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html)|average="weighted"|
balanced_accuracy|Сбалансированная точность — это среднее арифметическое значение полноты для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average="macro"|
f1_score_macro;|Оценка F1 — это среднее гармоническое значение точности и полноты. Макрос — это арифметическое среднее значение оценки F1 для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html)|average="macro"|
f1_score_micro|Оценка F1 — это среднее гармоническое значение точности и полноты. Micro вычисляется глобально путем подсчета общих истинных положительных результатов, ложных отрицательных значений и ложных срабатываний.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html)|average="micro"|
f1_score_weighted;|Оценка F1 — это среднее гармоническое значение точности и полноты. Взвешенное среднее значение по частоте класса оценки F1 для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html)|average="weighted"|
log_loss;|Это функция потерь, используемая в логистической регрессии (полиномиальной) и ее дополнениях, например нейронных сетях, которая определяется как вероятность логистических потерь истинных меток для заданных прогнозов вероятностного классификатора. Для одного образца с истинной меткой YT в {0,1} и предполагаемая вероятность ИП, YT = 1, журнал потери журнала — журнал P (YT&#124;ИП) =-(YT log (ИП) + (1-YT) (1-ИП)).|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.log_loss.html)|None|
norm_macro_recall|Нормализованная полнота макрозначений — это полнота макрозначений, нормализованная таким образом, чтобы случайному выполнению соответствовала оценка 0, а идеальному выполнению — оценка 1. Это достигается путем norm_macro_recall: = (recall_score_macro-R)/(1-R), где R является ожидаемым значением recall_score_macro для случайных прогнозов (т. е. R = 0,5 для двоичной классификации и R = (1/C) для проблем классификации C-Class).|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|Average = "макрос" |
precision_score_macro|Точность — это процент элементов, отнесенных к определенному классу, которые действительно находятся в этом классе. Макрос — это среднее арифметическое значение точности для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_score.html)|average="macro"|
precision_score_micro;|Точность — это процент элементов, отнесенных к определенному классу, которые действительно находятся в этом классе. Micro вычисляется глобально путем подсчета итоговых истинных положительных результатов и ложных положительных результатов.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_score.html)|average="micro"|
precision_score_weighted;|Точность — это процент элементов, отнесенных к определенному классу, которые действительно находятся в этом классе. Взвешенное значение — это среднее арифметическое для каждого класса, взвешенное по числу истинных экземпляров в каждом классе.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_score.html)|average="weighted"|
recall_score_macro|Полнота — это процент элементов, которые фактически находятся в определенном классе и правильно помечены. Макрос — это среднее арифметическое при отзыве для каждого класса.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average="macro"|
recall_score_micro;|Полнота — это процент элементов, которые фактически находятся в определенном классе и правильно помечены. Micro вычисляется глобально путем подсчета итоговых истинных положительных результатов, ложных отрицательных результатов и ложных срабатываний.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average="micro"|
recall_score_weighted|Полнота — это процент элементов, которые фактически находятся в определенном классе и правильно помечены. Взвешенный — это среднее арифметическое значение для каждого класса, взвешенное по числу истинных экземпляров в каждом классе.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html)|average="weighted"|
weighted_accuracy|Взвешенная точность является точностью, где весовой коэффициент, заданный для каждого примера, равен пропорции истинных экземпляров в этом примере на истинном классе.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.accuracy_score.html)|Значение sample_weight представляет собой вектор, равный доле этого класса для каждого элемента в целевом элементе.|

### <a name="confusion-matrix"></a>Матрица неточностей

Матрица неточностей используется для описания эффективности модели классификации. Каждая строка сопоставлена с экземпляром реального класса, а каждый столбец — с экземпляром прогнозируемого класса. Матрица неточностей позволяет отслеживать правильно и неправильно классифицированные метки для выбранной модели.

Для решения проблем с классификацией Машинное обучение Azure автоматически предоставляет матрицу неточностей для каждой созданной модели. Для каждой матрицы путаницы автоматический ML будет показывать частоту каждой прогнозируемой метки и каждое истинное пересечение меток. Чем темнее цвет, тем выше число в этой конкретной части матрицы. В идеале самые темные цвета будут по диагонали матрицы. 

Пример 1. модель классификации с низкой точностью ![модели классификации с низкой точностью](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-confusion-matrix1.png)

Пример 2. модель классификации с высокой точностью (идеально) ![модель классификации с высокой точностью](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-confusion-matrix2.png)


### <a name="precision-recall-chart"></a>Диаграмма соотношения полноты и точности

С помощью этой диаграммы вы можете сравнить кривые полноты и точности для каждой модели, чтобы определить модель с допустимым соотношением этих параметров для поставленной бизнес-задачи. На этой схеме отображается среднее соотношение полноты и точности на макро-уровне, микро-уровне, а также для всех классов модели.

Термин "точность" здесь обозначает способность классификатора правильно назначить метки всем экземплярам. Термин "полнота" обозначает способность классификатора найти все экземпляры для определенной метки. Кривая соотношения полноты и точности демонстрирует связь между этими двумя параметрами. В идеальном случае модель демонстрирует 100 % точность и полноту.

Пример 1. модель классификации с низкой точностью и низким отзывом ![модель классификации с низкой точностью и низким отзывом](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-precision-recall1.png)

Пример 2. модель классификации с ~ 100% Precision и ~ 100% отзыв (идеальный) ![модель классификации высокая точность и отзыв](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-precision-recall2.png)

### <a name="roc"></a>ROC

Кривая ROC отображает правильно и неправильно классифицированные метки для конкретной модели. Кривая ROC может быть недостаточно информативной, если обучение моделей выполняется по наборам данных с высоким уровнем смещения, так как она не отображает ложноположительные метки.

Пример 1. модель классификации с низкими истинными метками и высокими ложными метками ![модель классификации с низкими истинными метками и высокими ложными метками](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-roc-1.png)

Пример 2. модель классификации с высокими истинными метками и младшими ложными метками ![модель классификации с высокими истинными метками и младшими ложными метками](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-roc-2.png)

### <a name="lift-curve"></a>Диаграмма точности прогнозов

Вы можете сравнить показатели модели, автоматически созданной Машинным обучением Azure, с базовыми показателями, чтобы оценить прирост значений для конкретной модели.

Диаграммы точности прогнозов используются для оценки эффективности модели классификации. Они демонстрируют, насколько улучшаются результаты с применением модели по сравнению с результатами без модели. 

Пример 1. модель работает хуже, чем модель случайного выбора ![модель классификации, которая хуже, чем модель случайного выбора](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-lift-curve1.png)

Пример 2. модель работает лучше, чем модель случайного выбора ![модель классификации, которая работает лучше](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-lift-curve2.png)

### <a name="gains-curve"></a>Кривая прироста

Кривая прироста оценивает эффективность модели классификации по каждому сегменту данных. Она демонстрирует отдельно для каждого процентиля из набора данных, насколько ожидаемые результаты лучше, чем у модели случайного выбора.

Использование диаграммы суммарного прироста позволяет выбрать параметры отсечения для классификации по процентному уровню, который соответствующий требуемому приросту для модели. Здесь представлена та же информация, что и на диаграмме точности прогнозов, но в другом режиме отображения.

Пример 1. модель классификации с минимальным ростом ![модели классификации с минимальным ростом](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-gains-curve1.png)

Пример 2. модель классификации с значительным ростом ![модели классификации с значительным ростом](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-gains-curve2.png)

### <a name="calibration-plot"></a>График калибровки

Для всех задач классификации вы можете просмотреть строку калибровки с макро-усреднением, микро-усреднением и для каждого класса в выбранной прогнозной модели. 

График калибровки отображает достоверность прогнозной модели. На нем отображается зависимость между прогнозируемой и фактической вероятностями, где "вероятность" обозначает шанс принадлежности конкретного экземпляра к определенной метке. Хорошо откалиброванная модель дает результаты, близкие к графику y=x, где обеспечивается высокая надежность прогнозов. Модель с высокой степенью достоверности приближается к графику y=0, где присутствует прогнозируемая вероятность, но отсутствует фактическая.

Пример 1. более хорошо откалиброванная модель ![ более хорошо откалиброванная модель](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-calib-curve1.png)

Пример 2. чрезмерно уверенная модель ![более уверенной модели](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-calib-curve2.png)

## <a name="regression"></a>Результаты регрессии

Три следующие метрики и диаграммы доступны для каждой модели регрессии, построенной с помощью возможностей автоматического машинного обучения Машинное обучение Azure

+ [Метрики](#reg-metrics)
+ [Предсказанные и значения true](#pvt)
+ [Гистограмма остатков](#histo)


### <a name="reg-metrics"></a>Метрики регрессии

Следующие метрики сохраняются в каждой итерации выполнения для задачи регрессии или прогнозирования.

|Метрика|Description (Описание)|Вычисление|Дополнительные параметры
--|--|--|--|
explained_variance|Объяснимая дисперсия — это доля, учитываемая математической моделью при вычислении дисперсии заданного набора данных. Это процент уменьшения дисперсии исходных данных по отношению к дисперсии ошибок. Если среднее значение ошибок равно 0, оно равно объяснимой дисперсии.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.explained_variance_score.html)|None|
r2_score;|R2 — это коэффициент определения или процентное снижение квадратичных ошибок по сравнению с базовой моделью, которая выводит среднее значение. |[Вычисление](https://scikit-learn.org/0.16/modules/generated/sklearn.metrics.r2_score.html)|None|
spearman_correlation;|Корреляция Спирмена — это непараметрическая мера монотонности связи между двумя наборами данных. В отличие от корреляции Пирсона, для корреляции Спирмена не предполагается, что оба набора данных используют нормальное распределение. Как и другие коэффициенты корреляции, этот коэффициент принимает значения от –1 до + 1. Значение 0 означает отсутствие корреляции. Значения корреляции –1 и + 1 означают точную монотонную связь. Положительные значения корреляции означают, что при увеличении значения x также увеличивается значение y. Отрицательные значения корреляции означают, что при увеличении значения x значение y уменьшается.|[Вычисление](https://docs.scipy.org/doc/scipy-0.16.1/reference/generated/scipy.stats.spearmanr.html)|None|
mean_absolute_error|Средняя абсолютная погрешность — это оценочная величина абсолютного значения отклонения между целевым и прогнозируемым значениями.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_absolute_error.html)|None|
normalized_mean_absolute_error;|Нормализованная средняя абсолютная погрешность равна средней абсолютной погрешности, деленной на диапазон данных.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_absolute_error.html)|Деление на диапазон данных|
median_absolute_error|Медиана абсолютной погрешности — это медиана всех абсолютных отклонений между целевым и прогнозируемым значениями. Такая потеря устойчива к выбросам.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.median_absolute_error.html)|None|
normalized_median_absolute_error|Нормализованная медиана абсолютной погрешности равна медиане абсолютной погрешности, деленной на диапазон данных.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.median_absolute_error.html)|Деление на диапазон данных|
root_mean_squared_error|Среднеквадратическая погрешность — это среднеквадратическое значение ожидаемого квадратичного отклонения между целевым и прогнозируемыми значениями.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_error.html)|None|
normalized_root_mean_squared_error;|Нормализованная среднеквадратическая погрешность равна среднеквадратической погрешности, деленной на диапазон данных.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_error.html)|Деление на диапазон данных|
root_mean_squared_log_error|Среднеквадратическая логарифмическая погрешность — это среднеквадратическое значение ожидаемой квадратичной логарифмической погрешности.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_log_error.html)|None|
normalized_root_mean_squared_log_error;|Нормализованная среднеквадратическая логарифмическая погрешность равна среднеквадратической логарифмической погрешности, деленной на диапазон данных.|[Вычисление](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_log_error.html)|Деление на диапазон данных|

### <a name="pvt"></a>Предсказанные и значения true

В сравнении с прогнозом и true отображается отношение между прогнозируемым значением и соответствующим значением true для задачи регрессии. Эта диаграмма позволяет оценить эффективность модели: чем ближе прогнозируемые значения к графику y=x, тем выше точность прогнозной модели.

После каждого запуска для каждой модели регрессии отображается диаграмма прогнозируемых и истинных значений. Для обеспечения конфиденциальности данных значения группируются по ячейкам, размер каждой из которых отображается в виде линейчатой диаграммы в нижней части области диаграммы. Вы можете сравнить результаты прогнозной модели с более светлой областью, которая отображает идеальные значения, требуемые для этой модели, с учетом допусков.

Пример 1. регрессионная модель с низкой точностью прогнозов ![модель регрессии с низкой точностью прогнозов](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression1.png)

Пример 2. регрессионная модель с высокой точностью прогнозов [![модель регрессии с высокой точностью прогнозов](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression2.png)](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression2-expanded.png)



### <a name="histo"></a>Гистограмма остатков

Гистограмма остатков отображает разность между наблюдаемыми и прогнозируемыми значениями y. Чтобы отобразить допуск ошибок с низким смещением, гистограмма остатков должна иметь форму колокола с центром около 0. 

Пример 1. регрессионная модель с сдвигом ошибок ![модель регрессии SA с сдвигом в ошибках](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression3.png)

Пример 2. регрессионная модель с более равномерным распределением ошибок ![модели регрессии с более равномерным распределением ошибок](./media/how-to-understand-automated-ml/azure-machine-learning-auto-ml-regression4.png)

## <a name="explain-model"></a>Интерпретируемость модели и важность функции

Важность функции позволяет увидеть, насколько ценна каждая функция в построении модели. Это вычисление по умолчанию отключено, так как оно может значительно увеличить время выполнения.   Можно включить описание модели для всех моделей или объяснить только модель наилучшего соответствия.

Вы можете просмотреть оценки важности компонентов для модели в целом, а также отдельно для каждого класса прогнозной модели. Для каждого компонента демонстрируется его важность для каждого класса и для модели в целом.

![Возможность объяснения компонентов](./media/how-to-understand-automated-ml/feature-importance.gif)

Дополнительные сведения о включении функций интерпретации см. в статье [как](how-to-machine-learning-interpretability-automl.md) включить интерпретируемость в автоматизированных экспериментах ml.

## <a name="next-steps"></a>Дальнейшие действия

+ Дополнительные сведения об [автоматизированном ML](concept-automated-ml.md) в машинное обучение Azure.
+ Попробуйте использовать демонстрационную записную книжку с [описанием автоматизированной машинное обучение модели](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/automated-machine-learning/model-explanation) .
