---
title: Руководство по развертыванию модели машинного обучения с помощью графического интерфейса
titleSuffix: Azure Machine Learning service
description: Сведения о том, как создавать решения для прогнозной аналитики в графическом интерфейсе Службы машинного обучения Azure. Обучение, оценка и развертывание модели машинного обучения с помощью перетаскивания модулей. Это второе руководство серии, посвященной прогнозированию цен на автомобили с использованием линейной регрессии.
author: peterclu
ms.author: peterclu
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.date: 04/06/2019
ms.openlocfilehash: 5f29e3820416686b42167fa278c4b7d0f9a58f1f
ms.sourcegitcommit: 0568c7aefd67185fd8e1400aed84c5af4f1597f9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65190921"
---
# <a name="tutorial-deploy-a-machine-learning-model-with-the-visual-interface"></a>Руководство по развертыванию модели машинного обучения с помощью графического интерфейса

В этом руководстве подробно описано, как разработать прогнозное решение в графическом интерфейсе Службы машинного обучения Azure. Это руководство представляет собой **вторую часть серии, состоящей из двух частей**. В [первой части руководства](ui-tutorial-automobile-price-train-score.md) вы выполнили обучение, оценку и анализ модели для прогнозирования цен на автомобили. В этой части руководства вы выполните следующие задачи:

> [!div class="checklist"]
> * Подготовка модели к развертыванию.
> * Развертывание веб-службы
> * Тестирование веб-службы.
> * Управление веб-службой.
> * Использование веб-службы

## <a name="prerequisites"></a>Предварительные требования

Выполните действия, описанные в [первой части этого руководства](ui-tutorial-automobile-price-train-score.md).

## <a name="prepare-for-deployment"></a>Подготовка к развертыванию

Чтобы другие пользователи могли применить модель прогнозирования, созданную с помощью этого руководства, ее можно развернуть как веб-службу Azure.

До сих пор вы экспериментировали с обучением модели. Теперь пора создать прогнозы на основе вводимых пользователем данных.

Подготовка к развертыванию проводится в два этапа:  

1. Преобразование *обучающего эксперимента* в *прогнозный эксперимент*.
1. Развертывание прогностического эксперимента в качестве веб-службы

Сначала создайте копию эксперимента, выбрав **Сохранить как** в нижней части полотна эксперимента.

### <a name="convert-the-training-experiment-to-a-predictive-experiment"></a>Преобразование обучающего эксперимента в прогностический эксперимент

Чтобы подготовить модель к развертыванию, преобразуйте обучающий эксперимент в прогнозный. Этот процесс обычно состоит из трех этапов:

1. Сохраните обученную модуль и замените обучающие модули.
1. удаление из эксперимента модулей, которые были необходимы только для обучения;
1. Определение расположений для получения входных данных и создания выходных данных веб-службы.

Вы можете выполнить эти действия вручную или выбрать **Set Up Web Service** (Настроить веб-службу) в нижней части холста эксперимента, чтобы выполнить их автоматически.

![Анимационный GIF, показывающий автоматическое преобразование обучающего эксперимента в прогнозный эксперимент](./media/ui-tutorial-automobile-price-deploy/deploy-web-service.gif)

После того как вы выберете **Set Up Web Service** (Настроить веб-службу), произойдет следующее:

* Обученная модель преобразуется в один **модуль** обученной модели. Он хранится в палитре модулей слева от холста эксперимента. Его можно найти в разделе **Trained Models** (Обученные модели).
* Удаляются следующие модули, которые мы использовали для обучения:
  * Train Model (Обучение модели);
  * Split Data (Разделение данных);
  * Evaluate Model (Анализ модели).
* Сохраненная обученная модель добавляется обратно в эксперимент.
* Добавляются модули **Входные данные веб-службы** и **Выходные данные веб-службы**. Эти модули определяют, где пользовательские данные поступают в модель и куда они возвращаются.

Как можно заметить, эксперимент сохраняется на двух новых вкладках в верхней части холста эксперимента. Исходный обучающий эксперимент теперь размещается на вкладке **Training experiment** (Обучающий эксперимент), а только что созданный прогнозный эксперимент — на вкладке **Predictive experiment** (Прогнозный эксперимент). В качестве веб-службы следует развертывать именно прогнозный эксперимент.

Теперь ваш эксперимент должен выглядеть следующим образом:  

![Снимок экрана: ожидаемая конфигурация эксперимента после его подготовки к развертыванию](./media/ui-tutorial-automobile-price-deploy/predictive-graph.png)

Запустите эксперимент в последний раз (выберите **Выполнить**). В появившемся диалоговом окне выберите целевой объект вычислений, который будет использоваться для выполнения эксперимента. Чтобы убедиться в том, что модель по-прежнему работает, выберите выходные данные модуля Score Model (Оценка модели) и выберите **Просмотреть результаты**. Отобразятся изначальные данные и прогнозируемая стоимость ("оцененные метки").

## <a name="deploy-the-web-service"></a>Развертывание веб-службы

Чтобы развернуть новую веб-службу на основе нашего эксперимента, выполните следующее:

1. Выберите **Развернуть веб-службу** под холстом.
1. Выберите **целевой объект вычислений**, где вы бы хотели запустить веб-службу.

    В настоящее время графический интерфейс поддерживает только развертывание в целевых объектах вычислений Службы Azure Kubernetes (AKS). Вы можете выбрать из доступных целевых объектов вычислений AKS в вашей рабочей области Службы машинного обучения или настроить новую среду AKS, следуя инструкциям в появившемся диалоговом окне.

    ![Снимок экрана: возможная конфигурация для нового целевого объекта вычислений](./media/ui-tutorial-automobile-price-deploy/deploy-compute.png)

1. Выберите **Развернуть веб-службу**. После завершения развертывания вы увидите приведенное ниже уведомление. Развертывание может занять несколько минут.

    ![Снимок экрана: сообщение с подтверждением успешного развертывания.](./media/ui-tutorial-automobile-price-deploy/deploy-succeed.png)

## <a name="test-the-web-service"></a>Тестирование веб-службы

Входные данные пользователя поступают в развернутую модель через **модуль входных данных веб-службы**. Входные данные затем оцениваются в модуле **Score Model** (Оценка модели). Прогнозный эксперимент настроен так, чтобы модель ожидала поступления данных в том же формате, в котором был исходный набор данных о ценах на автомобили. Наконец, результаты возвращаются пользователю через модуль **Web service output** (Выходные данные веб-службы).

Веб-службу можно проверить на вкладке веб-службы в графическом интерфейсе.

1. Перейдите в раздел веб-службы. Вы увидите развернутую веб-службу с именем **Tutorial - Predict Automobile Price[Predictive Exp]** (Руководство. Прогнозирование цен на автомобили [прогнозный эксперимент]).

     ![Снимок экрана: вкладка веб-службы с выделенной недавно созданной веб-службой](./media/ui-tutorial-automobile-price-deploy/web-services.png)

1. Выберите имя веб-службы, чтобы просмотреть дополнительные сведения.

     ![Снимок экрана: дополнительные сведения, доступные в представлении веб-службы](./media/ui-tutorial-automobile-price-deploy/web-service-details.png)

1. Выберите **Тест**.

    ![Снимок экрана: страница тестирования веб-службы](./media/ui-tutorial-automobile-price-deploy/web-service-test.png)

1. Введите данные тестирования или используйте автозаполненный пример данных и щелкните **Тест** внизу. Тестовый запрос отправляется в веб-службу, и результаты отображаются на странице.

## <a name="manage-the-web-service"></a>Управление веб-службой

Развернутой веб-службой можно управлять с помощью вкладки **Веб-службы** в графическом интерфейсе.

Веб-службу можно удалить, выбрав **Удалить** на странице сведений о веб-службе.

   ![Снимок экрана: расположение кнопки удаления веб-службы в нижней части окна](./media/ui-tutorial-automobile-price-deploy/web-service-delete.png)

## <a name="consume-the-web-service"></a>Использование веб-службы

На предыдущих шагах этого руководства вы развернули модель прогнозирования цен на автомобили как веб-службу Azure. Теперь пользователи могут отправлять в нее данные и получать результаты через REST API.

**Запрос-ответ** — пользователь отправляет одну или несколько строк данных об автомобилях в службу по протоколу HTTP. Служба отправляет в ответ один или несколько наборов результатов.

Примеры вызовов REST можно найти на вкладке **Consume** (Использование) страницы сведений о веб-службе.

   ![Снимок экрана: пример вызова REST, который пользователи могут найти на вкладке Consume (Использование)](./media/ui-tutorial-automobile-price-deploy/web-service-consume.png)

Перейдите на вкладку **API Doc** (Документация по API), чтобы найти дополнительные сведения об интерфейсе API.

  ![Снимок экрана: дополнительные сведения об интерфейсе API, которые пользователи могут найти на вкладке документации по API](./media/ui-tutorial-automobile-price-deploy/web-service-api.png)

## <a name="manage-models-and-deployments-in-azure-machine-learning-service-workspace"></a>Управление моделями и развертываниями в рабочей области Службы машинного обучения Azure

Моделями и развертываниями веб-службы, созданными в графическом интерфейсе, можно управлять с помощью рабочей области Службы машинного обучения Azure.

1. Откройте рабочую область на [портале Azure](https://portal.azure.com/).  

1. В своей рабочей области выберите **Модели**. Затем выберите созданный эксперимент.

    ![Снимок экрана: способ перехода к экспериментам на портале Azure](./media/ui-tutorial-automobile-price-deploy/portal-models.png)

    На этой странице вы увидите дополнительные сведения о модели.

    ![Снимок экрана: отображение обзора статистики эксперимента на портале Azure](./media/ui-tutorial-automobile-price-deploy/model-details.png)

1. Выберите **Развертывания**, после чего будут перечислены все веб-службы, использующие модель. Выберите имя веб-службы. После этого вы перейдете на страницу сведений о веб-службе. На этой странице можно получить более подробные сведения о веб-службе.

    ![Снимок экрана: подробный отчет о выполнении](./media/ui-tutorial-automobile-price-deploy/deployment-details.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [aml-ui-cleanup](../../../includes/aml-ui-cleanup.md)]

## <a name="next-steps"></a>Дополнительная информация

В этом руководстве вы узнали об основных этапах создания, развертывания и использования модели машинного обучения в графическом интерфейсе. Чтобы получить дополнительные сведения об использовании графического интерфейса для решения других типов проблем, ознакомьтесь с примерами экспериментов.

> [!div class="nextstepaction"]
> [Пример классификации кредитных рисков](ui-sample-classification-predict-credit-risk-basic.md)
