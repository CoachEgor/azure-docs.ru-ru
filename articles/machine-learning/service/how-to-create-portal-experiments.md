---
title: Создание и изучение экспериментов на портале
titleSuffix: Azure Machine Learning service
description: Узнайте, как создавать и администрировать автоматические эксперименты машинного обучения на портале.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: cgronlun
author: tsikiksr
manager: cgronlun
ms.reviewer: nibaccam
ms.date: 05/02/2019
ms.openlocfilehash: 5eb3e94ff65e8a8b74f357a4cb8a517fd3837c5a
ms.sourcegitcommit: de47a27defce58b10ef998e8991a2294175d2098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2019
ms.locfileid: "67871812"
---
# <a name="create-and-explore-automated-machine-learning-experiments-in-the-azure-portal-preview"></a>Создание и изучение автоматических экспериментов машинного обучения в портал Azure (Предварительная версия)

 В этой статье вы узнаете, как создавать, запускать и изучать автоматизированные эксперименты машинного обучения в портал Azure без единой строки кода. Автоматизированное машинное обучение автоматизирует процесс выбора наилучшего алгоритма для конкретных данных, что позволяет быстро создать модель машинного обучения. Дополнительные [сведения об автоматизированном машинном](concept-automated-ml.md)обучении.

 Если вы предпочитаете работать на основе кода, вы также можете [настроить в Python автоматические эксперименты машинного обучения](how-to-configure-auto-train.md) с помощью [пакета SDK для машинное обучение Azure](https://docs.microsoft.com/python/api/overview/azure/ml/intro?view=azure-ml-py).

## <a name="prerequisites"></a>предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, создайте бесплатную учетную запись Azure, прежде чем начинать работу. Опробуйте [бесплатную или платную версию Службы машинного обучения Azure](https://aka.ms/AMLFree).

* Рабочая область службы машинного обучения Azure. См. раздел [Создание рабочей области службы машинное обучение Azure](https://docs.microsoft.com/azure/machine-learning/service/setup-create-workspace).

## <a name="get-started"></a>Начало работы

Перейдите в левую область рабочей области. Выберите автоматизированные Машинное обучение в разделе Создание (Предварительная версия).

![Область навигации портал Azure](media/how-to-create-portal-experiments/nav-pane.png)

 Если вы впервые выполняете какие-либо эксперименты с автоматическим Машинное обучение, вы увидите следующее:

![портал Azureная Целевая страница эксперимента](media/how-to-create-portal-experiments/landing-page.png)

В противном случае вы увидите панель мониторинга автоматизированного машинного обучения с обзором всех ваших автоматических экспериментов машинного обучения, включая созданные с помощью пакета SDK. Здесь можно отфильтровать и исследовать запуски по дате, имени эксперимента и состоянию выполнения.

![Панель мониторинга портал Azure эксперимента](media/how-to-create-portal-experiments/dashboard.png)

## <a name="create-an-experiment"></a>Создание эксперимента

Нажмите кнопку создать эксперимент, чтобы заполнить следующую форму.

![Создать форму эксперимента](media/how-to-create-portal-experiments/create-exp-name-compute.png)

1. Введите имя эксперимента.

1. Выберите вычисление для задания профилирования и обучения данных. Список существующих вычислений доступен в раскрывающемся списке. Чтобы создать новое вычисление, следуйте инструкциям, приведенным в шаге 3.

1. Нажмите кнопку Создать новую вычисление, чтобы открыть приведенную ниже область, и настройте контекст вычислений для этого эксперимента.

    ![Создание нового вычислений для эксперимента](media/how-to-create-portal-experiments/create-new-compute.png)

    Поле|Описание
    ---|---
    Имя вычислений| Введите уникальное имя, идентифицирующее контекст вычислений.
    размер виртуальной машины;| Выберите размер виртуальной машины для вычислений.
    Дополнительные параметры| *Минимальный узел*: Введите минимальное число узлов для вычислений. Минимальное число узлов для вычислений AML — 0. Чтобы включить профилирование данных, необходимо иметь один или несколько узлов. <br> *Максимальный узел*: Введите максимальное число узлов для вычислений. Значение по умолчанию — 6 узлов для вычислений AML.

      Чтобы начать создание вычислений, выберите **создать**. Это может занять несколько минут.

      >[!NOTE]
      > Имя вычислений будет указывать, *включено*ли профилирование, которое вы выбрали или создаете. (Дополнительные сведения о профилировании данных см. в разделе 7b.)

1. Выберите учетную запись хранения для данных. Общедоступная Предварительная версия поддерживает только локальные передачи файлов и учетные записи хранения BLOB-объектов Azure.

1. Выберите контейнер хранилища.

1. Выберите файл данных из контейнера хранилища или отправьте файл с локального компьютера в контейнер.

    ![Выберите файл данных для эксперимента](media/how-to-create-portal-experiments/select-file.png)

1. Используйте вкладки Предварительный просмотр и профиль для дальнейшей настройки данных для этого эксперимента.

    1. На вкладке Предварительный просмотр укажите, содержат ли ваши данные заголовки, и выберите функции (столбцы) для обучения, используя **включенные** переключатели в каждом столбце компонентов.

        ![Предварительный просмотр данных](media/how-to-create-portal-experiments/data-preview.png)

    1. На вкладке Профиль можно просмотреть [профиль данных](#profile) по компонентам, а также сведения о распределении, типе и сводной статистике (среднее, медиана, max/min и т. д.) для каждого из них.

        ![Вкладка «Профиль данных»](media/how-to-create-portal-experiments/data-profile.png)

        >[!NOTE]
        > Если для контекста вычислений **не** включено профилирование, появится следующее сообщение об ошибке: *Профилирование данных доступно только для уже выполняющихся целевых объектов вычислений*.

1. Выберите тип задания обучения: классификация, регрессия или прогнозирование.

1. Выберите целевой столбец. Столбец, для которого необходимо выполнить прогнозы.

1. Для прогнозирования:
    1. Выберите столбец времени: Этот столбец содержит данные времени для использования.
    1. Выберите прогнозируемый горизонт: Укажите, сколько единиц времени (минут/ч/дней/недель/месяцев/лет) модель сможет прогнозировать будущее. Далее модель требуется для прогнозирования в будущем, но она будет менее точной. Дополнительные [сведения о прогнозировании и прогнозировании горизонта](how-to-auto-train-forecast.md).

1. Используемых Дополнительные параметры: дополнительные параметры, которые можно использовать для лучшего управления обучающими заданиями.

    Дополнительные параметры|Описание
    ------|------
    Основная метрика| Основная метрика, используемая для оценки модели. Дополнительные [сведения о метриках модели](how-to-configure-auto-train.md#explore-model-metrics).
    Условия выхода| При соблюдении любого из этих условий задание обучения завершается до полного завершения. <br> *Время учебного задания (в минутах)* : Продолжительность выполнения задания обучения.  <br> *Максимальное число итераций*: Максимальное количество конвейеров (итераций) для тестирования в задании обучения. Задание не будет выполняться больше указанного числа итераций. <br> *Порог оценки метрики*:  Минимальный показатель метрики для всех конвейеров. Это гарантирует, что если у вас есть определенная Целевая метрика, вы не тратите больше времени на задание обучения, чем это нужно.
    Предварительной обработки| Выберите, чтобы включить или отключить предварительную обработку, выполняемую автоматическим машинным обучением. Предварительная обработка включает автоматическую очистку данных, подготовку и преобразование для создания искусственных функций. Дополнительные [сведения о предварительной обработке](#preprocess).
    Проверка| Выберите один из вариантов перекрестной проверки, чтобы использовать его в обучающем задании. Дополнительные [сведения о перекрестной проверке](how-to-configure-auto-train.md).
    Параллелизм| Выберите ограничения для нескольких ядер, которые вы хотите использовать при использовании многоядерных вычислений.
    Заблокированный алгоритм| Выберите алгоритмы, которые требуется исключить из задания обучения.

   ![Форма дополнительных параметров](media/how-to-create-portal-experiments/advanced-settings.png)

> [!NOTE]
> Для получения дополнительных сведений о полях щелкните подсказку с информацией.

<a name="profile"></a>

### <a name="data-profiling"></a>Профилирование данных

Вы можете получить обширную сводную статистику по набору данных, чтобы проверить, готов ли ваш набор данных к работе в МАШИНном коде. Для нечисловых столбцов они включают только базовую статистику, например min, Max и число ошибок. Для числовых столбцов можно также проверить их статистическое время и предполагаемое квантилей. В частности, наш профиль данных включает в себя:

* **Feature**: имя столбца, для которого выполняется суммирование.

* **Профиль**: встроенная визуализация на основе типа, выводимого на экран. Например, строки, логические значения и даты будут иметь значения счетчиков, а в десятичных числах — приблизительных гистограмм. Это позволяет быстро получить представление о распределении данных.

* **Распределение типов**: Встроенное значение числа типов в столбце. Значения NULL имеют собственный тип, поэтому эта визуализация полезна для обнаружения нечетных или отсутствующих значений.

* **Тип**: выводимый тип столбца. Возможные значения: Strings, Boolean, Date и Decimal.

* **Min**: минимальное значение столбца. Пустые записи отображаются для компонентов, тип которых не является упорядоченным (например, логические значения).

* **Max**: максимальное значение столбца. Как и в случае с "min", пустые записи отображаются для функций с неуместными типами.

* **Count**: общее число отсутствующих и неотсутствующих записей в столбце.

* **Неотсутствующий счетчик**: количество неотсутствующих записей в столбце. Обратите внимание, что пустые строки и ошибки обрабатываются как значения, поэтому они не будут участвовать в "непропущенном количестве".

* **Квантилей** (в 0,1, 1, 5, 25, 50, 75, 95, 99 и 99,9% intervals): приблизительные значения для каждого квантилей, чтобы обеспечить смысл распределения данных. Для функций с неуместными типами отображаются пустые записи.

* **Среднее**: среднее арифметическое столбца. Для функций с неуместными типами отображаются пустые записи.

* **Стандартное отклонение**: стандартное отклонение столбца. Для функций с неуместными типами отображаются пустые записи.

* **Вариативность**: дисперсия столбца. Для функций с неуместными типами отображаются пустые записи.

* **Асимметрия**: асимметрия столбца. Для функций с неуместными типами отображаются пустые записи.

* **Эксцесс**: эксцесс столбца. Для функций с неуместными типами отображаются пустые записи.

<a name="preprocess"></a>

### <a name="advanced-preprocessing"></a>Расширенная Предварительная обработка

При настройке экспериментов можно включить дополнительные параметры `Preprocess`. Это означает, что следующие шаги предварительной обработки данных и добавление признаков выполняются автоматически.

|&nbsp;Этапы предварительной обработки| Описание |
| ------------- | ------------- |
|Удаление признаков с высокой кратностью или отсутствие вариативности.|Удалите их из наборов обучения и проверки, включая функции со всеми отсутствующими значениями, одно значение для всех строк или с чрезвычайно большим количеством элементов (например, хэши, идентификаторы или идентификаторы GUID).|
|Добавление отсутствующих значений|Для числовых функций аппроксимация с средним значением в столбце.<br/><br/>Для характеристик категорий аппроксимация с наиболее частыми значениями.|
|Создание дополнительных признаков.|Для признаков даты и времени: год, месяц, день, день недели, день года, квартал, неделя года, час, минута, секунда.<br/><br/>Для текстовых признаков: Частота терминов на основе униграмм, BI-грамм и тройных символов.|
|Преобразование и кодирование |Числовые функции с небольшими уникальными значениями преобразуются в функции категорий.<br/><br/>Односторонняя кодировка выполняется для категоризации с низкой кратностью; для большой кратности — одноранговая кодировка.|
|Внедрение слов|Текст характеризатора, который преобразует векторы текстовых маркеров в векторы предложений с помощью предварительно обученной модели. Вектор внедрения каждого слова в документе объединяется вместе для создания вектора возможностей документа.|
|Целевые кодировки|Для функций категоризации сопоставляет каждую категорию со средним целевым значением для задач регрессии и с вероятностью класса для каждого класса, чтобы устранить проблемы классификации. Весовые коэффициенты на основе частоты и перекрестная проверка по k-сгибу применяются для уменьшения размера сопоставления и шума, вызванного категориями разреженных данных.|
|Кодировка текста|При вводе текста для создания вероятности каждого класса используется линейная модель с накоплением, в которой используются контейнерные слова.|
|Вес свидетельства (вое)|Вычисляет вое как меру корреляции столбцов категории с целевым столбцом. Он вычисляется как журнал соотношения между вероятностью нехватки классов в и. Этот шаг выводит один числовой столбец функции на класс и устраняет необходимость явно аппроксимация отсутствующие значения и обработку выбросов.|
|Расстояние кластера|Обучение модели кластеризации с k-средних по всем числовым столбцам.  Выходные данные — новые функции, одна новая числовая функция для кластера, содержащая расстояние от каждого образца до центроид каждого кластера.|

## <a name="run-experiment-and-view-results"></a>Запуск эксперимента и просмотр результатов

Чтобы запустить эксперимент, нажмите кнопку "Пуск". Процесс подготовки эксперимента занимает несколько минут.

### <a name="view-experiment-details"></a>Просмотреть сведения о эксперименте

После завершения этапа подготовки эксперимента вы увидите экран сведения о запуске. В результате вы получите полный список созданных моделей. По умолчанию модель, оценивающая наибольшее значение в зависимости от параметров, находится в верхней части списка. По мере того как задание по обучению попытается получить дополнительные модели, они будут добавлены в список итераций и диаграмму. Используйте диаграмму итерации для быстрого сравнения метрик моделей, созданных до сих пор.

Задания обучения могут занять некоторое время для завершения выполнения каждого конвейера.

![Панель мониторинга сведений о запуске](media/how-to-create-portal-experiments/run-details.png)

### <a name="view-training-run-details"></a>Просмотр сведений о запуске обучения

Выполните детализацию по любой из выходных моделей, чтобы просмотреть сведения о выполнении обучения, такие как метрики производительности и диаграммы распределения. Дополнительные [сведения о диаграммах](how-to-track-experiments.md#understanding-automated-ml-charts).

![Сведения о итерации](media/how-to-create-portal-experiments/iteration-details.png)

## <a name="deploy-model"></a>Развертывание модели

Когда у вас есть лучшая модель, пора развернуть ее как веб-службу для прогнозирования новых данных.

Автоматическое создание машинного обучения упрощает развертывание модели без написания кода.

1. Существует несколько вариантов развертывания. 
    1. Если вы хотите развернуть оптимальную модель на основе критериев метрик, заданных для эксперимента, выберите вариант **развернуть оптимальную модель** на странице **сведений о запуске** .

        ![Кнопка "развернуть модель"](media/how-to-create-portal-experiments/deploy-model-button.png)

    1. Если требуется развернуть определенную итерацию модели, выполните детализацию по модели, чтобы открыть ее конкретную страницу сведений о выполнении, и выберите пункт **развернуть модель**.

        ![Кнопка "развернуть модель"](media/how-to-create-portal-experiments/deploy-model-button2.png)

1. Первым шагом является регистрация модели в службе. Выберите "зарегистрировать модель" и дождитесь завершения процесса регистрации.

    ![Колонка развертывания модели](media/how-to-create-portal-experiments/deploy-model-blade.png)

1. После регистрации модели вы сможете скачать скрипт оценки (scoring.py) и сценарий среды (Кондаенв. yml), который будет использоваться во время развертывания.

1. После скачивания скрипта оценки и скрипта среды перейдите в колонку **ресурсы** в левой области навигации и выберите **модели**.

    ![Модели области навигации](media/how-to-create-portal-experiments/nav-pane-models.png)

1. Выберите зарегистрированную модель и нажмите кнопку "создать образ".

    Модель можно найти по ее описанию, которая будет включать идентификатор запуска, номер итерации, в следующем формате: *< Run_ID > _ < Iteration_number > _Model*

    ![Моделью Создать изображение](media/how-to-create-portal-experiments/model-create-image.png)

1. Введите имя образа. 
1. Нажмите кнопку **обзора** рядом с полем "файл оценки", чтобы отправить ранее скачанный файл оценки (scoring.py).

1. Нажмите кнопку **обзора** рядом с полем "файл Conda", чтобы отправить ранее скачанный файл среды (кондаенв. yml).

    Вы можете использовать собственный Скрипт оценки и файл conda, а также отправить дополнительные файлы. Дополнительные [сведения о скрипте оценки](how-to-deploy-and-where.md#script).

      >[!Important]
      > Имена файлов должны быть длиной не более 32 символов и должны начинаться и заканчиваться буквенно-цифровыми символами. Может включать дефисы, символы подчеркивания, точки и буквенно-цифровые символы. Пробелы не допускаются.

    ![Создать изображение](media/how-to-create-portal-experiments/create-image.png)

1. Нажмите кнопку "создать", чтобы начать создание образа. Это займет несколько минут, после чего вы увидите сообщение на верхней панели.
1. Перейдите на вкладку "изображения", установите флажок рядом с изображением, которое нужно развернуть, и выберите "создать развертывание". Дополнительные [сведения о развертываниях](how-to-deploy-and-where.md).

    Существует два варианта развертывания.
     + Экземпляр контейнера Azure (ACI) — используется больше для целей тестирования, а не для операционного развертывания в масштабе. Обязательно заполните значения по крайней мере одного ядра для _емкости резервирования ЦП_и по крайней мере один ГИГАБАЙТ (ГБ) для _резервной емкости памяти_ .
     + Azure Kubernetes Service (AKS)) — Этот параметр предназначен для развертывания в масштабе. Для этого необходимо подготовить вычисление на основе AKS.

     ![Фотографий Создать развертывание](media/how-to-create-portal-experiments/images-create-deployment.png)

1. Затем выберите **Создать**. Развертывание модели может занять несколько минут для завершения выполнения каждого конвейера.

1. Вот и все! У вас есть рабочая веб-служба для создания прогнозов.

## <a name="next-steps"></a>Следующие шаги

* Дополнительные [сведения об автоматизированном машинном](concept-automated-ml.md) обучении и машинное обучение Azure.
* [Узнайте, как использовать веб-службу](https://docs.microsoft.com/azure/machine-learning/service/how-to-consume-web-service).
