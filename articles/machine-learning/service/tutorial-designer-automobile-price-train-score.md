---
title: Руководство по прогнозированию цен на автомобили с помощью конструктора
titleSuffix: Azure Machine Learning
description: Узнайте, как обучить, оценить и развернуть модель машинного обучения с помощью интерфейса с поддержкой перетаскивания. Это первое руководство серии, посвященной прогнозированию цен на автомобили с использованием линейной регрессии.
author: peterclu
ms.author: peterlu
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.date: 11/04/2019
ms.openlocfilehash: 3df1a0430983b52d8a791acabbd03efe19055697
ms.sourcegitcommit: bc7725874a1502aa4c069fc1804f1f249f4fa5f7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2019
ms.locfileid: "73721775"
---
# <a name="tutorial-predict-automobile-price-with-the-designer-preview"></a>Руководство по прогнозированию цен на автомобили с помощью конструктора (предварительная версия)
[!INCLUDE [applies-to-skus](../../../includes/aml-applies-to-enterprise-sku.md)]

Из этого руководства, состоящего из двух частей, вы узнаете, как использовать конструктор Машинного обучения Azure для разработки и развертывания решения прогнозной аналитики для прогнозирования цены любого автомобиля. 

В первой части описано, как настраивать среду, перетаскивать модули на интерактивный холст и объединять их, чтобы создать конвейер Машинного обучения Azure.

В первой части руководства вы узнаете:

> [!div class="checklist"]
> * Создание конвейера
> * Импорт данных
> * Подготовка данных
> * Обучение модели машинного обучения.
> * Оценка модели машинного обучения.

Из [второй части](tutorial-designer-automobile-price-deploy.md) этого руководства вы узнаете, как развернуть прогнозную модель в виде конечной точки вывода в реальном времени и прогнозировать цену любого автомобиля на основании отправленных технических характеристик. 

> [!Note]
>Готовая версия этого руководства доступна в качестве примера конвейера.
>
>Вы можете найти ее в **конструкторе в рабочей области**. В разделе **Новый конвейер** выберите **Sample 1 - Regression: Automobile Price Prediction (Basic)** (Пример 1. Регрессия. Прогнозирование цен на автомобили (простой вариант)).

## <a name="create-a-new-pipeline"></a>Создание конвейера

Конвейеры Машинного обучения Azure объединяют несколько зависимых этапов машинного обучения и обработки данных в один ресурс. Конвейеры помогают организовывать, администрировать и повторно использовать сложные рабочие процессы машинного обучения с несколькими проектами и пользователями. Чтобы создать конвейер Машинного обучения Azure, вам потребуется рабочая область Машинного обучения Azure. В этом разделе вы узнаете, как создать оба этих ресурса.

### <a name="create-a-new-workspace"></a>Создание рабочей области

Если у вас есть рабочая область Машинного обучения Azure с **выпуском Enterprise**, [перейдите к следующему разделу](#create-the-pipeline).

[!INCLUDE [aml-create-portal](../../../includes/aml-create-in-portal-enterprise.md)]

### <a name="create-the-pipeline"></a>Создание конвейера

1. Войдите на сайт [ml.azure.com](https://ml.azure.com) и выберите рабочую область, с которой хотите работать.

1. Выберите **Конструктор**.

    ![Снимок экрана визуальной рабочей области, демонстрирующий доступ к конструктору](./media/ui-tutorial-automobile-price-train-score/launch-visual-interface.png)

1. Щелкните **Easy-to-use prebuilt modules** (Удобные готовые модули).

1. В верхней части холста выберите стандартное имя эксперимента **Pipeline-Created-on ...** и замените его более понятным. Например, **"Automobile price prediction"** . Имя не должно быть уникальным.

## <a name="import-data"></a>Импорт данных

В этом конструкторе есть несколько примеров наборов данных, с которыми можно поэкспериментировать. Для этого урока используйте **Automobile price data (Raw)** (Данные о ценах на автомобили (необработанные)). 

1. Слева на холсте конвейера расположена палитра наборов данных и модулей. Щелкните **Наборы данных**, а затем выберите раздел **Примеры**, чтобы просмотреть доступные примеры наборов данных.

1. Выберите набор данных **Automobile price data (raw)** (Данные о ценах на автомобили (необработанные)) и перетащите его на холст.

   ![Перетаскивание данных на холст](./media/ui-tutorial-automobile-price-train-score/drag-data.gif)

### <a name="visualize-the-data"></a>Визуализация данных

Вы можете визуализировать данные, чтобы изучить выбранный набор данных.

1. Щелкните модуль **Automobile price data (Raw)** (Данные о ценах на автомобили (необработанные)).

1. В области **Свойства** справа от холста щелкните **Выходные данные**.

1. Выберите значок графика, чтобы открыть визуализацию данных.

    ![Визуализация данных](./media/ui-tutorial-automobile-price-train-score/visualize-data.png)

1. Щелкните любой столбец в окне данных, чтобы просмотреть сведения о нем.

    Каждая строка представляет один автомобиль, а переменные, обозначающие их характеристики, представлены в виде столбцов. В этом наборе данных содержится 205 строк и 26 столбцов.

## <a name="prepare-data"></a>Подготовка данных

Обычно требуется предварительная обработка набора данных перед его анализом. Возможно, вы заметили некоторые пропущенные значения при проверке набора данных. Чтобы модель смогла правильно проанализировать данные, необходимо очистить эти недостающие значения.

### <a name="remove-a-column"></a>Удаление столбца

При обучении модели необходимо что-то сделать с отсутствующими данными. В нашем примере в столбце **normalized-losses** (Нормированные потери) не хватает многих значений. Поэтому исключите весь этот столбец из модели.

1. Введите **Select** в поле поиска в верхней части палитры, чтобы найти модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных).

1. Щелкните и перетащите модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных) на холст. Поместите модуль под его набором данных.

1. Соедините набор данных **Automobile price data (Raw)** (Данные о ценах на автомобили (необработанные)) с модулем **Select Columns in Dataset** (Выбор столбцов в наборе данных). Выполните действие перетаскивания из порта вывода набора данных, который представляет собой маленький круг в нижней части набора данных на холсте, до порта входа **Select Columns in Dataset** (Выбор столбцов в наборе данных), который имеет форму маленького круга в верхней части модуля.

    > [!TIP]
    > Присоединяя выходной порт одного модуля ко входному порту другого, вы создаете поток данных через конвейер.
    >

    ![Соединение модулей](./media/ui-tutorial-automobile-price-train-score/connect-modules.gif)

1. Выберите модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных).

1. На панели **Свойства** справа от холста щелкните **Параметры** > **Изменение столбцов**.

1. Щелкните **+** , чтобы добавить новое правило.

1. В раскрывающемся списке выберите **Исключить** и щелкните **Имена столбцов**.
    
1. Введите **normalized-losses** в текстовое поле.

1. Нажмите кнопку **Сохранить** внизу справа, чтобы закрыть средство выбора столбцов.

    ![Исключение столбца](./media/ui-tutorial-automobile-price-train-score/exclude-column.png)
        
    На панели свойств мы видим, что столбец **normalized-losses** (Нормированные потери) исключен.

1. Выберите модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных). 

1. На панели **Свойства** выберите **Параметры** > **Комментарий** и введите "Исключение нормализованных потерь".

### <a name="clean-missing-data"></a>Очистка недостающих данных

В наборе данных после удаления столбца **normalized-losses** по-прежнему отсутствует много значений. Вы можете устранить их, применив модуль **Clean Missing Data** (Удаление недостающих данных).

> [!TIP]
> Удаление недостающих значений из входных данных — необходимое условие для использования большинства модулей в конструкторе.

1. Введите **Clean** (Очистка) в поле поиска, чтобы найти модуль **Clean Missing Data** (Очистка недостающих данных).

1. Перетащите на холст конвейера модуль **Clean Missing Data** (Удаление недостающих данных) и присоедините его к модулю **Select Columns in Dataset** (Выбор столбцов в наборе данных). 

1. В области свойств выберите значение **Remove entire row** (Удалить всю строку) для параметра **Cleaning mode** (Режим очистки).

1. На панели **Свойства** введите "Удаление строк с отсутствующими значениями"  

    Теперь конвейер должен выглядеть примерно так:
    
    ![select-column](./media/ui-tutorial-automobile-price-train-score/pipeline-clean.png)

## <a name="train-a-machine-learning-model"></a>Обучение модели машинного обучения.

Теперь, завершив обработку данных, вы можете обучить прогнозную модель.

### <a name="select-an-algorithm"></a>Выбор алгоритма

Есть два типа алгоритмов контролируемого машинного обучения — **классификация** и **регрессия**. **Классификация** используется, чтобы сформировать прогноз по заданному набору категорий, таких как цвет (красный, синий или зеленый). **Регрессия** используется для прогнозирования числа.

Вам нужно спрогнозировать цену, которая является числом. Поэтому используйте алгоритм регрессии. В этом примере используется модель линейной регрессии.

### <a name="split-the-data"></a>Разделение данных

Разделите набор данных на два набора: для обучения и тестирования модели.

1. Введите **Split data** в поле поиска, чтобы найти модуль **Split Data** (Разделение данных), и присоедините его к левому порту модуля **Clean Missing Data** (Очистка недостающих данных).

1. Выберите модуль **Split Data** (Разделение данных).

1. В области свойств для поля **Fraction of rows in the first output dataset** (Доля строк в первом наборе выходных данных) введите значение 0,7.

    Это означает, что мы применим 70 % данных для обучения модели и 30 % для тестирования.

1. В области свойств введите в поле **Комментарий** текст "Разделение данных на набор для обучения (0,7) и набор для тестирования (0,3)."

### <a name="train-the-model"></a>Обучение модели

Обучите модель, передав ей набор данных, содержащий цены. Модель сканирует эти данные и ищет зависимости между свойствами автомобиля и его ценой, по которым и будет создана модель.

1. Чтобы выбрать алгоритм обучения, удалите запрос в поле поиска на палитре модулей.

1. Разверните узел **Machine Learning Algorithms** (Алгоритмы машинного обучения).
    
    При выполнении этого действия отображается несколько категорий модулей, которые можно использовать для инициализации алгоритмов обучения.

1. Выберите модуль **Регрессия** > **Линейная регрессия** и перетащите его на холст конвейера.

1. Найдите и переместите модуль **Обучение модели** на холст эксперимента. 

1. Подключите выход модуля **Линейная регрессия** к левому входу модуля **Обучение модели**.

1. Подключите выход данных для обучения (левый порт) модуля **разделения данных** к правому входу модуля **обучения модели**.

    ![Снимок экрана: правильная конфигурация модуля Train Model (Обучение модели). Модуль Linear Regression (Линейная регрессия) присоединяется к левому порту модуля Train Model (Обучение модели), а модуль Split Data (Разделение данных) — к правому порту модуля Train Model (Обучение модели).](./media/ui-tutorial-automobile-price-train-score/pipeline-train-model.png)

1. Выберите модуль **Train Model** (Обучение модели).

1. В области свойств щелкните селектор **Изменить столбец**.

1. В диалоговом окне **Столбец метки** разверните раскрывающееся меню и выберите **Имена столбцов**. 

1. В текстовое поле введите значение **price** (цена). Именно значение цены будет прогнозировать наша модель.

    Теперь конвейер будет выглядеть следующим образом:

    ![Снимок экрана с правильной конфигурацией конвейера после добавления модуля "Обучение модели".](./media/ui-tutorial-automobile-price-train-score/pipeline-train-graph.png)

## <a name="evaluate-a-machine-learning-model"></a>Оценка модели машинного обучения.

Когда вы обучите модель, использовав 70 % данных, ее можно будет применить для оценки оставшихся 30 % данных и проверить, насколько хорошо она работает.

1. Введите **score model** в поле поиска, чтобы найти модуль **Score Model** (Оценка модели), и перетащите этот модуль на холст конвейера. 

1. Соедините выход модуля **Train Model** (Обучение модели) с левым входным портом модуля **Score Model** (Оценка модели). Соедините выход тестовых данных (правый порт) модуля **Split Data** (Разделение данных) с правым входным портом **Score Model** (Оценка модели).

1. Введите **evaluate** в поле поиска, чтобы найти модуль **Evaluate Model** (Итоговая оценка модели), и перетащите модуль на холст конвейера. 

1. Присоедините выход модуля **Score Model** (Оценка модели) к левому входному порту модуля **Evaluate Model** (Анализ модели). 

    Готовый вариант конвейера должен выглядеть примерно так:

    ![Снимок экрана с правильной конфигурацией конвейера.](./media/ui-tutorial-automobile-price-train-score/pipeline-final-graph.png)

### <a name="run-the-pipeline"></a>Запуск конвейера

[!INCLUDE [aml-ui-create-training-compute](../../../includes/aml-ui-create-training-compute.md)]

### <a name="view-results"></a>Просмотр результатов

Когда выполнение конвейера завершится, вы сможете просмотреть результаты. 

1. Выберите модуль **Score Model** (Оценка модели), чтобы просмотреть выходные данные.

1. В области **Свойства** щелкните **Выходы** > **Визуализировать**.

    Здесь можно просмотреть прогнозируемые цены и фактические цены из тестовых данных.

    ![Снимок экрана: визуализация выходных данных с выделенным столбцом Scored Label (Метка с оценкой)](./media/ui-tutorial-automobile-price-train-score/score-result.png)

1. Выберите модуль **Evaluate Model** (Итоговая оценка модели), чтобы просмотреть выходные данные.

1. На панели **Свойства** щелкните **Выходные данные** > **Визуализировать**.

Для вашей модели будет выведена следующая статистика.

* **Средняя абсолютная погрешность**. Среднее значение абсолютной погрешности (погрешность — это разница между спрогнозированным и фактическим значением).
* **Среднеквадратичное отклонение**. Квадратный корень из среднего значения возведенных в квадрат арифметических отклонений спрогнозированных значений тестового набора данных.
* **Относительное арифметическое отклонение**. Среднее арифметическое отклонение по отношению к абсолютной разнице между фактическими значениями и средним арифметическим всех фактических значений.
* **Относительное среднеквадратичное отклонение**. Среднее арифметическое среднеквадратичных отклонений по отношению к абсолютной разнице между фактическими значениями и средним арифметическим всех фактических значений.
* **Коэффициент смешанной корреляции** (R в квадрате). Статистический показатель, который оценивает соответствие модели данным.

Чем меньше значение каждой погрешности, тем лучше. Меньшее значение указывает на то, что прогноз ближе к фактическим значениям. Что касается показателя коэффициента смешанной корреляции, чем ближе его значение к единице (1,0), тем точнее прогноз.

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [aml-ui-cleanup](../../../includes/aml-ui-cleanup.md)]

## <a name="next-steps"></a>Дополнительная информация

В первой части этого руководства вы выполнили следующие задачи:

* Создание конвейера
* Подготовка данных
* Обучение модели
* Оценка и анализ модели.

Из второй части вы узнаете, как развернуть готовую модель в конечной точке для прогнозирования в реальном времени.

> [!div class="nextstepaction"]
> [Tutorial: Deploy a machine learning model with the visual interface](tutorial-designer-automobile-price-deploy.md) (Руководство. Развертывание модели машинного обучения с помощью графического интерфейса)
