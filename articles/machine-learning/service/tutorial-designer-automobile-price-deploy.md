---
title: Руководство по развертыванию модели машинного обучения с помощью конструктора
titleSuffix: Azure Machine Learning
description: Сведения о том, как создавать решения для прогнозной аналитики в конструкторе Машинного обучения Azure (предварительная версия). Обучение, оценка и развертывание модели машинного обучения с помощью перетаскивания модулей.
author: peterclu
ms.author: peterlu
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.date: 11/04/2019
ms.openlocfilehash: 69fba508eac4b778dcd72371fd1471625ecb8c1a
ms.sourcegitcommit: c22327552d62f88aeaa321189f9b9a631525027c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/04/2019
ms.locfileid: "73509598"
---
# <a name="tutorial-deploy-a-machine-learning-model-with-the-designer-preview"></a>Руководство по развертыванию модели машинного обучения с помощью конструктора (предварительная версия)
[!INCLUDE [applies-to-skus](../../../includes/aml-applies-to-enterprise-sku.md)]

Чтобы другие пользователи могли применить модель прогнозирования, созданную с помощью [инструкций в первой части этого учебника](tutorial-designer-automobile-price-train-score.md), ее можно развернуть как конечную точку для прогнозирования в реальном времени. В первой части вы обучили модель. Теперь пора создать прогнозы на основе вводимых пользователем данных. В этой части руководства вы выполните следующие задачи:

> [!div class="checklist"]
> * Развертывание конечной точки для прогнозирования в реальном времени.
> * Создание кластера вывода.
> * Тестирование конечной точки для прогнозирования в реальном времени.

## <a name="prerequisites"></a>Предварительные требования

Изучите [первую часть учебника](tutorial-designer-automobile-price-train-score.md), чтобы узнать, как обучать и оценивать модель машинного обучения в конструкторе.

## <a name="deploy-a-real-time-endpoint"></a>Развертывание конечной точки для прогнозирования в реальном времени

Для развертывания конвейера необходимо сделать следующее:

1. Преобразуйте конвейер обучения в конвейер вывода в режиме реального времени, который удаляет обучающие модули и добавляет входные и выходные данные для запросов формирования выводов.
1. Разверните конвейер вывода.

### <a name="create-a-real-time-inference-pipeline"></a>Создание конвейера вывода в реальном времени

1. В верхней части холста конвейера выберите **Create inference pipeline** (Создать конвейер вывода)  > **Real-time inference pipeline** (Конвейер вывода в режиме реального времени).

    При нажатии кнопки **Create inference pipeline** (Создать конвейер вывода) произойдет несколько вещей:
    
    * Обученная модель будет сохранена в виде модуля **Набор данных** в палитре модулей. Его можно найти в разделе **My Datasets** (Мои наборы данных).
    * Такие модули, как **Train Model** (Обучение модели) и **Split Data** (Разделение данных), использованные для обучения, удаляются.
    * Сохраненная обученная модель добавляется обратно в конвейер.
    * Добавляются модули **Web Service Input** (Входные данные веб-службы) и **Web Service Output** (Выходные данные веб-службы). Эти модули определяют, где пользовательские данные поступают в модель и куда они возвращаются.

    > [!Note]
    > **Конвейер обучения** сохраняется на новой вкладке в верхней части холста конвейера. Его также можно найти в виде опубликованного конвейера в конструкторе.
    >

    Теперь этот конвейер будет выглядеть следующим образом:  

   ![Снимок экрана: ожидаемая конфигурация конвейера после его подготовки к развертыванию](./media/ui-tutorial-automobile-price-deploy/real-time-inference-pipeline.png)

1. Выберите **Запустить** и используйте тот же целевой объект вычислений и эксперимент, который использовался в первой части.

1. Выберите модуль **Score Model** (Оценка модели).

1. На панели свойств выберите **Выходные данные** > **Визуализация**, чтобы убедиться, что модель все еще работает. Отобразятся изначальные данные и прогнозируемая стоимость (Scored Labels (Оцененные метки)).

1. Выберите **Развернуть**.

### <a name="create-an-inferencing-cluster"></a>Создание кластера вывода

В открывшемся диалоговом окне можно выбрать из имеющихся кластеров Службы Azure Kubernetes (AKS) в рабочей области, чтобы развернуть модель. Если у вас нет кластера AKS, создайте его, сделав следующее.

1. Выберите **Вычисления** в диалоговом окне, чтобы перейти на страницу **Вычисления**.

1. В ленте навигации выберите **Inference Clusters** (Кластеры вывода)  >  **+ Создать**.

    ![Снимок экрана, показывающий, как переходить в новую область кластера вывода](./media/ui-tutorial-automobile-price-deploy/new-inference-cluster.png)

1. В области кластера вывода настройте новую службу Kubernetes.

1. Введите aks-compute в поле **Имя вычислений**.
    
1. Выберите ближайший доступный **регион**.

1. Нажмите кнопку **Создать**.

    > [!Note]
    > Создание службы AKS занимает около 15 минут. Состояние подготовки можно проверить на странице **Inference Clusters** (Кластеры вывода).
    >

### <a name="deploy-the-real-time-endpoint"></a>Развертывание конечной точки для прогнозирования в реальном времени

После завершения подготовки службы AKS вернитесь к конвейеру вывода в режиме реального времени для завершения развертывания.

1. Выберите **Развернуть** над холстом.

1. Выберите **Deploy new real-time endpoint** (Развертывание новой конечной точки для прогнозирования в реальном времени). 

1. Выберите созданный кластер AKS.

1. Выберите **Развернуть**.

    ![Снимок экрана, показывающий, как настроить новую конечную точку для прогнозирования в реальном времени](./media/ui-tutorial-automobile-price-deploy/setup-endpoint.png)

    Уведомление об успешном выполнении появится над холстом после завершения развертывания. Это может занять несколько минут.

## <a name="test-the-real-time-endpoint"></a>Тестирование конечной точки для прогнозирования в реальном времени

Чтобы протестировать конечную точку для прогнозирования в реальном времени, перейдите на страницу **Конечные точки** слева на панели навигации рабочей области.

1. На странице **Конечные точки** выберите развернутую конечную точку.

    ![Снимок экрана, показывающий вкладку конечных точек для прогнозирования в реальном времени с выделенной недавно созданной конечной точкой](./media/ui-tutorial-automobile-price-deploy/endpoints.png)

1. Выберите **Тест**.

1. Введите данные тестирования или используйте автозаполненный пример данных и нажмите **Тест**.

    Тестовый запрос отправляется в конечную точку, и результаты отображаются на странице. Значение цены формируется на основе входных данных, но при расчете прогнозируемого значения они не используются.

    ![Снимок экрана, показывающий, как протестировать конечную точку для прогнозирования в реальном времени с выделенной оценочной меткой для цены](./media/ui-tutorial-automobile-price-deploy/test-endpoint.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [aml-ui-cleanup](../../../includes/aml-ui-cleanup.md)]

## <a name="next-steps"></a>Дополнительная информация

В этом учебнике вы узнали об основных этапах создания, развертывания и использования модели машинного обучения в конструкторе. Чтобы получить дополнительные сведения об использовании конструктора для решения других типов проблем, ознакомьтесь с примерами конвейеров.

> [!div class="nextstepaction"]
> [Пример классификации кредитных рисков](how-to-designer-sample-classification-credit-risk-cost-sensitive.md)
