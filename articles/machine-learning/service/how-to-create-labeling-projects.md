---
title: Получение меток для данных
titleSuffix: Azure Machine Learning
description: В этой статье показано, как создать и запустить проекты маркировки, которые присваивают теги данным для машинного обучения.
author: lobrien
ms.author: laobri
ms.service: machine-learning
ms.topic: tutorial
ms.date: 11/04/2019
ms.openlocfilehash: ca3486610d6cf71ba315e407b58a2a2551ad6ee1
ms.sourcegitcommit: 35715a7df8e476286e3fee954818ae1278cef1fc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/08/2019
ms.locfileid: "73837484"
---
# <a name="get-labels-for-data"></a>Получение меток для данных

Добавление меток к большим объемам данных часто усложняет проекты машинного обучения. Например, для проектов машинного обучения с компонентом компьютерного зрения, таких как классификация изображений или обнаружение объектов, обычно требуются тысячи изображений с правильно расставленными метками. 
 
Решение "Машинное обучение Azure" служит централизованным расположением для создания, администрирования и мониторинга проектов маркировки. Проекты маркировки помогают упорядочивать данные, метки и координировать работу команды, то есть более эффективно управлять задачами присвоения меток. Сейчас поддерживаются такие задачи: классификация изображений (с несколькими метками или классами) и идентификация объектов с использованием ограничивающих прямоугольников.

Azure отслеживает ход выполнения задач присвоения меток и поддерживает очереди незавершенных задач. Для присвоения меток маркировщикам не требуется учетная запись Azure. Выполнив вход с учетной записью Майкрософт (MSA) или через [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-whatis), они смогут присвоить любое количество меток, которое удастся обнаружить за отведенное время. Они также могут назначать и изменять метки с помощью сочетаний клавиш. 

Вы можете запускать и останавливать проект, добавлять и удалять пользователей и команды, а также отслеживать ход выполнения. Вы можете экспортировать помеченные данные в формате COCO или в виде набора данных Машинного обучения Azure. 

Из этой статьи вы узнаете о следующем:

> [!div class="checklist"]
> * Создание проекта
> * Указание данных и структуры проекта.
> * Управление командами и людьми, работающими над проектом.
> * Запуск и мониторинг проекта.
> * Экспорт меток. 

## <a name="prerequisites"></a>Предварительные требования

* Данные, которые вы хотите пометить, размещенные в локальных файлах или в службе хранилища Azure.
* Набор меток, которые вы хотите применить.
* Инструкции по присвоению меток.
* Подписка Azure. Если у вас еще нет подписки Azure, создайте бесплатную учетную запись Azure, прежде чем начинать работу. Попробуйте [бесплатную или платную версию Машинного обучения Azure](https://aka.ms/AMLFree) прямо сейчас.
* Рабочая область машинного обучения Azure. См. сведения о [создании рабочей области машинного обучения Azure](how-to-manage-workspace.md).

## <a name="create-a-labeling-project"></a>Создание проекта маркировки

Администрирование проектов маркировки осуществляется в решении [Машинное обучение Azure](https://ml.azure.com/). Страница **Labeling projects** (Проекты маркировки) позволяет управлять проектами, командами и отдельными пользователями. Каждому проекту назначается одна или несколько команд, а в команду назначаются один или несколько пользователей. 

Если данные уже хранятся в хранилище BLOB-объектов Azure, перед созданием проекта маркировки следует сделать их доступными в виде хранилища данных. Дополнительные сведения см. в статье [о создании и регистрации хранилищ данных](https://docs.microsoft.com/azure/machine-learning/service/how-to-access-data#create-and-register-datastores). 

Чтобы создать проект, щелкните **Добавить проект**. Присвойте ему подходящее имя и выберите **тип задачи маркировки**. 

![Мастер создания проекта маркировки](media/how-to-create-labeling-projects/labeling-creation-wizard.png)

* Выберите тип **Image Classification Multi-label** (Классификация изображений с множеством меток), если в проекте к каждому изображению можно применить **одну _или несколько_** меток из определенного набора классов. Например, фотографии собаки можно одновременно присвоить метки *dog* (собака) и *daytime* (день).
* Выберите тип **Image Classification Multi-class** (Классификация изображений с множеством классов), если в проекте к каждому изображению может быть применен **только один класс** из определенного набора классов.
* Выберите тип **Идентификация объекта (ограничивающий прямоугольник)** , если в проекте ставится задача присвоить класс определенным объектам на изображениях и определить ограничивающие прямоугольники вокруг этих объектов.

Когда вы будете готовы продолжать работу, щелкните **Далее**.

## <a name="specify-data-to-be-labeled"></a>Определение данных для добавления меток

Если вы уже создали набор данных, содержащий нужные данные, его можно выбрать из раскрывающегося списка **Select an existing dataset** (Выбрать существующий набор данных). Либо щелкните **Create a dataset** (Создать набор данных), чтобы выбрать существующее хранилище Azure или отправить локальные файлы. 

### <a name="create-a-dataset-from-an-azure-datastore"></a>Создание набора данных из хранилища данных Azure

В большинстве случаев прямая отправка локальных файлов будет приемлемым вариантом, но для отправки значительных объемов данных быстрее и надежнее использовать [Обозреватель службы хранилища Azure](https://azure.microsoft.com/features/storage-explorer/). Мы рекомендуем использовать для перемещения файлов Обозреватель службы хранилища Azure как вариант по умолчанию.

Чтобы создать набор данных на основе данных, которые вы уже сохранили в хранилище BLOB-объектов Azure, сделайте следующее.

1. Щелкните **Create a dataset** (Создать набор данных), а затем — **From datastore** (Из хранилища данных).
1. Введите **имя** для набора данных.
1. Для параметра **Dataset type** (Тип набора данных) нужно выбрать значение File (Файл).  
1. Выберите хранилище данных. 
1. Если данные находятся во вложенной папке хранилища BLOB-объектов, щелкните **Обзор** и выберите нужный путь. 
    * Вы также можете добавить `/**` в конце пути, чтобы включить все файлы во вложенных папках выбранного пути.
    * Укажите `**/*.*`, чтобы включить все данные в текущем контейнере и вложенных папках.
1. Введите описание набора данных.
1. Щелкните **Далее**. 
1. Подтвердите введенные данные. Здесь можно щелкнуть **Назад**, чтобы изменить параметры, или  **Создать** для создания набора данных.

### <a name="create-a-dataset-by-uploading-data"></a>Создание набора данных путем отправки данных

Если вы хотите отправить данные напрямую, сделайте следующее.

1. Щелкните **Create a dataset** (Создать набор данных), а затем — **From local files** (Из локальных файлов)
1. Введите **имя** для набора данных.
1. Для параметра **Dataset type** (Тип набора данных) нужно выбрать значение File (Файл).
1. Щелкнув **Advanced settings** (Дополнительные параметры), вы сможете настроить хранилище данных, контейнер и путь к данным.
1. Щелкните **Обзор**, чтобы выбрать локальные файлы для отправки.
1. Введите описание набора данных.
1. Щелкните **Далее**. 
1. Подтвердите введенные данные. Здесь можно щелкнуть **Назад**, чтобы изменить параметры, или  **Создать** для создания набора данных.

Данные отправляются в хранилище больших двоичных объектов по умолчанию (`workspaceblobstore`) в текущей рабочей области Машинного обучения Azure.

## <a name="specify-label-classes"></a>Указание классов меток

На странице **Label classes** (Классы меток) вы можете указать набор классов для категоризации данных. Продумайте их тщательно, ведь точность и скорость работы маркировщиков зависят от их способности правильно и уверенно различать эти классы. Например, вместо полного наименования видов и родов растений или животных лучше использовать кодовые или сокращенные наименования. 

Каждую метку размещайте в отдельной строке, добавляя новые строки с помощью кнопки **+** . Если у вас более 3–4, но не более 10 меток, к ним можно добавить префиксы "1:", "2:" и т. д., чтобы ускорить маркировщикам работу, позволяя выбирать классы цифровыми клавишами. 

## <a name="describe-the-labeling-task"></a>Описание задачи маркировки

Четкое объяснение задачи маркировки играет важную роль. Страница **Labeling instructions** (Инструкции по маркировке) позволяет указать ссылку на внешний сайт с информацией, которая будет предоставлена маркировщикам. Инструкции должны описывать конкретные задачи понятным для целевой аудитории образом. 

* Какие метки они увидят и как сделать выбор между ними? Есть ли справочный текст, которым нужно пользоваться?
* Что делать, если ни одна метка не подходит? 
* Что делать, если подходят несколько меток?
* Какой уровень достоверности следует применять к метке? Нужно ли указывать лучший из предполагаемых вариантов, если нет уверенности?
* Что делать с частично перекрытыми объектами?
* Что делать, если объект обрезается краем изображения?
* Что делать, если после отправки изображения появилось ощущение ошибки? 

При использовании ограничивающих прямоугольников появляются дополнительные вопросы.

* Как для этой задачи задается ограничивающий прямоугольник? Должен ли он полностью размещаться внутри объекта либо как можно ближе к его границе или допускается некоторый зазор? 
* Какой уровень точности и согласованности ожидается при определении ограничивающих прямоугольников?

>[!Note]
> Не забудьте напомнить, что маркировщик может выбрать первые 9 меток цифровыми клавишами 1–9. 

## <a name="initialize-the-labeling-project"></a>Инициализация проекта маркировки

После инициализации уже нельзя изменить некоторые аспекты проекта маркировки, например тип задачи и набор данных. Но вы можете изменять метки и URL-адрес с описанием задачи. Внимательно проверьте параметры перед созданием проекта. После отправки проекта вы вернетесь на стартовую страницу **Labeling** (Маркировка), где этот проект уже отображается в статусе **Initializing** (Инициализация). Эта страница не обновляется автоматически, поэтому обновите ее вручную через некоторое время и убедитесь, что проект получил статус **Created** (Создан). 

## <a name="manage-teams-and-people"></a>Управление командами и отдельными пользователями

Проекту маркировки назначается команда по умолчанию, в которую вы уже добавлены автоматически. Каждому проекту маркировки назначается новая команда по умолчанию, но любую команду можно назначить на несколько проектов. Для проекта может быть назначено больше одной команды. Чтобы создать команду, щелкните **Add team** (Добавить команду) на странице **Teams** (Команды). 

Управление пользователями осуществляется на странице **People** (Люди). Здесь вы можете добавлять и удалять пользователей, которые идентифицируются по адресу электронной почты. Каждый маркировщик будет проходить проверку подлинности с помощью учетной записи Майкрософт или Azure Active Directory, если эта служба используется.  

Добавив пользователя, его можно назначить в одну или несколько команд. Откройте страницу **Teams** (Команды), выберите здесь нужную команду и щелкните **Assign people** (Назначить людей) или **Remove people** (Удалить людей) в зависимости от текущих потребностей.

Если вам потребуется отправить сообщение электронной почты всем участникам команды, откройте страницу **Team details** (Сведения о команде), щелкнув эту команду. На этой странице с помощью кнопки **Email team** (Отправить команде сообщение электронной почты) можно открыть редактор электронной почты с адресами всех участников команды.

## <a name="run-and-monitor-the-project"></a>Запуск и мониторинг проекта

После инициализации проекта Azure начнет его выполнять. Щелкнув проект на главной странице **Labeling** (Маркировка), можно открыть страницу **сведений о проекте**. На вкладке **Dashboard** (Панель мониторинга) отображается ход выполнения задачи маркировки. 

На вкладке **Data** (Данные) можно просмотреть набор данных и помеченные данные. Если данные помечены неправильно, вы можете **выбрать** их и щелкнуть **Reject** (Отклонить), что приведет к удалению меток и помещению данных обратно в очередь данных без меток. 

На вкладке **Team** (Команда) можно назначить команды этому проекту или отменить их назначение. 

Если вы хотите перевести проект в сетевой или автономный режим, нажмите кнопку **Pause**/**Start** (Пауза/Пуск), которая переключает состояние выполнения проекта.

Вы можете напрямую пометить данные на странице **Project details** (Сведения о проекте), выбрав действие **Label data** (Пометить данные). Данные можно помечать только в выполняемом проекте. 

## <a name="export-the-labels"></a>Экспорт меток

Вы можете в любое время экспортировать данные меток для эксперимента машинного обучения. Метки изображений можно экспортировать в [формате COCO](http://cocodataset.org/#format-data) или в виде набора данных Машинного обучения Azure. Кнопка **Экспорт** находится на странице **Сведения о проекте** для проекта маркировки.

Файл COCO создается в хранилище больших двоичных объектов по умолчанию для рабочей области машинного обучения Azure в папке **export/coco**. Вы можете обращаться к экспортированному набору данных Машинного обучения Azure через раздел **Datasets** (Наборы данных) в Машинном обучении Azure. На странице сведений о наборе данных есть пример кода для доступа к меткам из Python.

![Экспортированный набор данных](media/how-to-create-labeling-projects/exported-dataset.png)

## <a name="next-steps"></a>Дополнительная информация

* Маркировка изображений для [классификации изображений или обнаружения объектов](how-to-label-images.md).
* Дополнительные сведения о [службе и студии машинного обучения Azure](../compare-azure-ml-to-studio-classic.md).