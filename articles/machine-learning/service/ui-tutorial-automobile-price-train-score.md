---
title: Руководство по прогнозированию цены на автомобили с помощью графического интерфейса
titleSuffix: Azure Machine Learning service
description: Сведения об обучении, оценке и развертывании модели машинного обучения с помощью графического интерфейса перетаскивания. Это первое руководство серии, посвященной прогнозированию цен на автомобили с использованием линейной регрессии.
author: peterclu
ms.author: peterclu
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.date: 04/06/2019
ms.openlocfilehash: 21f5a2d93b708e93f124bd44177bb7852dfbd86a
ms.sourcegitcommit: dad277fbcfe0ed532b555298c9d6bc01fcaa94e2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/10/2019
ms.locfileid: "67720524"
---
# <a name="tutorial-predict-automobile-price-with-the-visual-interface"></a>Руководство по прогнозированию цены на автомобили с помощью графического интерфейса

В этом руководстве подробно описано, как разработать прогнозное решение в графическом интерфейсе Службы машинного обучения Azure. Выполнив инструкции, указанные в этом руководстве, вы создадите решение, которое может прогнозировать цену любого автомобиля на основании отправленных в решение технических характеристик.

В первой части руководства вы узнаете:

> [!div class="checklist"]
> * Импорт и очистка данных
> * Обучение модели машинного обучения.
> * Оценка и анализ модели.

Во [второй части](ui-tutorial-automobile-price-deploy.md) руководства вы узнаете как развернуть прогнозную модель в качестве веб-службы Azure.

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2X1GY]

Завершенная версия этого руководства доступна в качестве примера эксперимента.

Чтобы найти его, из **Experiments page** (Страница экспериментов) выберите **Add New** (Добавить новый), а затем выберите  **Sample 1 - Regression: Automobile Price Prediction (Basic)** (Пример 1. Регрессия. Прогнозирование цен на автомобили (цен. категория "Базовый")).

## <a name="create-a-workspace"></a>Создание рабочей области

Если у вас есть рабочая область Службы машинного обучения Azure, перейдите к [следующему разделу](#open-the-visual-interface-webpage).

[!INCLUDE [aml-create-portal](../../../includes/aml-create-in-portal.md)]

## <a name="open-the-visual-interface-webpage"></a>Открытие веб-страницы графического интерфейса

1. Откройте рабочую область на [портале Azure](https://portal.azure.com/).

1. В своей рабочей области выберите **Графический интерфейс**. Затем нажмите кнопку **Запустить графический интерфейс**. 

    ![Снимок экрана портала Azure: получение доступа к графическому интерфейсу из рабочей области Службы машинного обучения](./media/ui-tutorial-automobile-price-train-score/launch-ui.png)

## <a name="create-your-first-experiment"></a>Создание первого эксперимента

Инструмент с визуальным интерфейсом обеспечивает возможность интерактивного визуального построения прогнозных аналитических моделей. Перетащите наборы данных и модули анализа на интерактивный холст и соедините их вместе, чтобы создать *эксперимент*.

1. Создайте эксперимент, выбрав **+New** (Создать) в нижней части окна графического интерфейса.

    ![Добавление нового эксперимента](./media/ui-tutorial-automobile-price-train-score/add-new.png)

1. Выберите **Blank Experiment** (Пустой эксперимент).

1. В верхней части холста выберите имя эксперимента **Experimented Created on ...** , заданное по умолчанию, и присвойте эксперименту понятное имя. Например, **Automobile price prediction**. Имя не должно быть уникальным.

## <a name="add-data"></a>Добавление данных

Для машинного обучения нам прежде всего нужны данные. Есть несколько примеров наборов данных, включенных в этот интерфейс, которые вы можете использовать. Вы также можете импортировать данные из существующих источников. Для этого урока используйте образец набора данных **Automobile price data (Raw)** . 

1. В левой части области эксперимента расположена выборка данных и модулей. Щелкните **Saved Datasets** (Сохраненные наборы данных), а затем выберите **Примеры**, чтобы просмотреть доступные примеры наборов данных.

1. Выберите набор данных **Automobile price data (raw)** (Данные о ценах на автомобили (необработанные)) и перетащите его на холст.

   ![Перетаскивание данных на холст](./media/ui-tutorial-automobile-price-train-score/drag-data.png)

## <a name="select-columns"></a>Выбор столбцов

Выберите необходимые столбцы данных. Для начала настройте модуль на отображение всех доступных столбцов.

> [!TIP]
> Если вы знаете имя нужных вам данных или модуля, используйте панель поиска в верхней части палитры для быстрого поиска. В остальной части урока будет использоваться этот ярлык.


1. Введите **Select** (Выбор) в поле поиска, чтобы найти модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных).

1. Щелкните и перетащите модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных) на холст. Поместите модуль под добавленным ранее набором данных.

1. Присоедините набор данных к модулю **Select Columns in Dataset** (Выбор столбцов в наборе данных). Для этого щелкните выходной порт набора данных, перетащите его на входной порт модуля **Select Columns in Dataset** (Выбор столбцов в наборе данных), а затем отпустите кнопку мыши. Набор данных и модуль остаются подключенными даже при их перемещении на холсте.

    > [!TIP]
    > У наборов данных и модулей есть входные и выходные порты, представленные маленькими кружками. Входные порты всегда расположены вверху, а выходные — внизу. При присоединении выходного порта одного модуля ко входному порту другого, вы создаете поток данных через эксперимент.
    >

    ![Соединение модулей](./media/ui-tutorial-automobile-price-train-score/connect-modules.gif)

    Красный восклицательный знак указывает на то, что для этого модуля еще не заданы свойства.

1. Выберите модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных).

1. В области **Свойства** справа от холста щелкните **Изменение столбцов**.

    В диалоговом окне **Выбрать столбцы** щелкните **ВСЕ СТОЛБЦЫ** и включите **все признаки**. Диалоговое окно должно выглядеть следующим образом:

     ![средство выбора столбцов](./media/ui-tutorial-automobile-price-train-score/select-all.png)

1. Нажмите кнопку **ОК** внизу справа, чтобы закрыть средство выбора столбцов.

## <a name="run-the-experiment"></a>Выполнение эксперимента

Щелкните выходной порт набора данных или модуля, чтобы увидеть, как выглядят данные в этой точке потока данных. Если параметр **Визуализировать** отключен, сначала нужно запустить эксперимент.

Эксперимент выполняется с целевым объектом вычислений. который является вычислительным ресурсом, подключенным к вашей рабочей области. После создания целевого объекта вычислений его можно повторно использовать при последующих запусках.

[!INCLUDE [aml-ui-create-training-compute](../../../includes/aml-ui-create-training-compute.md)]

Выполнение эксперимента начнется после того, как целевой объект вычислений станет доступным. После завершения выполнения, возле каждого модуля появляется зеленая галочка.


## <a name="preview-the-data"></a>Предварительный просмотр данных

Теперь, когда вы выполнили свой первоначальный эксперимент, вы можете визуализировать данные, чтобы лучше понять набор данных, с которым вам нужно работать.

1. Выберите выходной порт в нижней части модуля **Select Columns in Dataset** (Выбор столбцов в наборе данных), а затем щелкните **Визуализировать**.

1. Щелкните разные столбцы в окне данных, чтобы просмотреть сведения о них.

    В этом наборе данных каждая строка представляет автомобиль, а переменные, обозначающие их характеристики, представлены в виде столбцов. В этом наборе данных содержится 205 строк и 26 столбцов.

     Каждый раз, когда вы щелкаете столбец данных, в разделе слева отображаются сведения о **статистике** и изображение **визуализации**. Например, щелкнув столбец **num-of-doors** (Количество дверей), вы увидите, что он содержит 2 уникальных значения и 2 недостающих значения. Прокрутите вниз, чтобы увидеть значения: две и четыре двери.

     ![Предварительный просмотр данных](./media/ui-tutorial-automobile-price-train-score/preview-data.gif)

1. Щелкните каждый столбец, чтобы получить дополнительные сведения о наборе данных и подумать, будут ли эти столбцы полезны для прогнозирования цены автомобиля.

## <a name="prepare-data"></a>Подготовка данных

Перед анализом, как правило, требуется определенная предварительная обработка набора данных. Возможно, вы заметили некоторые пропущенные значения при визуализации набора данных. Чтобы модель смогла правильно проанализировать данные, необходимо очистить эти недостающие значения. Удалите все строки, в которых есть недостающие значения. В столбце **normalized-losses** (Нормированные потери) также есть значительная доля недостающих значений, поэтому исключите весь этот столбец из модели.

> [!TIP]
> Удаление недостающих значений из входных данных является необходимым условием для использования большинства модулей.

### <a name="remove-column"></a>Удаление столбца

Сначала полностью удалите столбец **normalized-losses** (Нормированные потери).

1. Выберите модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных).

1. В области **Свойства** справа от холста щелкните **Изменение столбцов**.

    * Оставьте выбранными параметры **With rules** (С правилами) и **ALL COLUMNS** (ВСЕ СТОЛБЦЫ).

    * В раскрывающихся списках выберите **Исключить** и **Имена столбцов**, а затем щелкните внутри текстового поля. Введите **normalized-losses**.

    * Нажмите кнопку **ОК** внизу справа, чтобы закрыть средство выбора столбцов.

    ![Исключение столбца](./media/ui-tutorial-automobile-price-train-score/exclude-column.png)
        
    Теперь область свойств модуля Select Columns in Dataset (Выбор столбцов в наборе данных) показывает, что модуль будет передавать все столбцы набора данных, за исключением столбца **normalized-losses** (Нормированные потери).
        
    На панели свойств мы видим, что столбец **normalized-losses** (Нормированные потери) исключен.
        
    ![Область свойств](./media/ui-tutorial-automobile-price-train-score/property-pane.png)
        
    Дважды щелкните модуль и введите текст, чтобы добавить комментарий. Это поможет вам увидеть описание модуля и его действие в рамках эксперимента. 

1. Дважды щелкните модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных) и введите комментарий об исключении столбца нормированных потерь. 
    
    Затем щелкните мышкой за пределами модуля. Отобразится стрелка вниз, показывающая, что модуль содержит комментарий.

1. Щелкните ее, чтобы отобразить комментарий.

    Теперь в модуле появится стрелка вверх, позволяющая скрыть комментарий.
        
    ![Комментарии](./media/ui-tutorial-automobile-price-train-score/comments.png)

### <a name="clean-missing-data"></a>Очистка недостающих данных

При обучении модели необходимо как-нибудь обработать отсутствующие данные. В этом случае вы добавите модуль, чтобы удалить все оставшиеся строки с недостающими данными.

1. Введите **Clean** (Очистка) в поле поиска, чтобы найти модуль **Clean Missing Data** (Очистка недостающих данных).

1. Перетащите на холст эксперимента модуль **Clean Missing Data** (Очистка недостающих данных) и присоедините его к модулю **Select Columns in Dataset** (Выбор столбцов в наборе данных). 

1. В области свойств выберите значение **Remove entire row** (Удалить всю строку) для параметра **Cleaning mode** (Режим очистки).

    Этот параметр указывает модулю **Clean Missing Data** (Очистка недостающих данных) полностью удалять те строки, в которых есть недостающие значения.

1. Дважды щелкните модуль и введите комментарий "Удаление строк с недостающими значениями".
 
    ![Удаление строк](./media/ui-tutorial-automobile-price-train-score/remove-rows.png)

    Теперь ваш эксперимент должен выглядеть следующим образом:
    
    ![select-column](./media/ui-tutorial-automobile-price-train-score/experiment-clean.png)

## <a name="visualize-the-results"></a>Визуализация результатов

Так как вы изменили модули в своем эксперименте, в разделе состояния указано In draft (Черновик).  Чтобы визуализировать новые очищенные данные, сначала необходимо снова выполнить эксперимент.

1. Выберите **Выполнить** в нижней части окна, чтобы запустить эксперимент.

    На этот раз вы можете повторно использовать созданный ранее целевой объект вычислений.

1. Выберите **Выполнить** в диалоговом окне.

   ![Выполнение эксперимента](./media/ui-tutorial-automobile-price-train-score/select-compute.png)

1. После завершения выполнения щелкните правой кнопкой мыши модуль **Clean Missing Data** (Очистка недостающих данных), чтобы визуализировать новые очищенные данные.

    ![Визуализация очищенных данных](./media/ui-tutorial-automobile-price-train-score/visualize-cleaned.png)

1. Щелкните разные столбцы в окне очищенных данных, чтобы увидеть, как изменились данные.

    ![Визуализация очищенных данных](media/ui-tutorial-automobile-price-train-score/visualize-result.png)

    Теперь в наборе данных содержится 193 строки и 25 столбцов.

    Щелкнув столбец **num-of-doors** (Количество дверей), вы увидите, что он по-прежнему содержит 2 уникальных значения и теперь уже 0 недостающих значений. Щелкните остальные столбцы, чтобы убедиться, что в наборе данных нет отсутствующих значений. 

## <a name="train-the-model"></a>Обучение модели

Теперь, когда данные готовы, вы можете создать прогнозную модель. Вы будете использовать свои данные для обучения модели. Затем вы протестируете модель, чтобы увидеть, насколько точно она может прогнозировать цены.

Есть два типа алгоритмов контролируемого машинного обучения — **классификация** и **регрессия**. **Классификация** используется, чтобы сформировать прогноз по заданному набору категорий, таких как цвет (красный, синий или зеленый). **Регрессия** используется для прогнозирования числа.

Вам нужно предсказать цену, которая является числом, поэтому используйте алгоритм регрессии. В этом примере используется модель линейной регрессии.

Обучите модель, передав ей набор данных, содержащий цены. Модель сканирует эти данные и ищет зависимости между свойствами автомобиля и его ценой. После этого протестируйте модель, передав ей набор свойств известных нам автомобилей и проверив, насколько точно модель прогнозирует известные цены.

Разделите набор данных на два набора, один из которых примените для обучения модели, а второй — для тестирования.

1. Введите **Split data** в поле поиска, чтобы найти модуль **Split Data** (Разделение данных), и присоедините его к левому порту модуля **Clean Missing Data** (Очистка недостающих данных).

1. Выберите модуль **Split Data** (Разделение данных), который вы только что присоединили. В области свойств в поле Fraction of rows in the first output dataset (Доля строк в первом наборе выходных данных) введите значение 0,7. Таким образом, мы используем 70 процентов данных для обучения модели и оставим 30 процентов для тестирования.

    ![Снимок экрана: правильная конфигурация области свойств. Задайте для модуля Split Data (разделение данных) следующие значения: Split Rows (Разделить на строки), 0,7, Randomized split (Случайное разделение), 0, False.](./media/ui-tutorial-automobile-price-train-score/split-data.png)

1. Дважды щелкните модуль **Split Data** (Разделение данных) и введите комментарий о разделении набора данных на набор для обучения (0,7) и набор для тестирования (0,3).

1. Чтобы выбрать алгоритм обучения, удалите запрос в поле поиска на палитре модулей.

1. Разверните узел **Машинное обучение**, а затем — **Initialize Model** (Инициализация модели). Появится несколько категорий модулей, которые можно использовать для инициализации алгоритма обучения.

1. Для этого эксперимента выберите **Регрессия** > **Linear Regression** (Линейная регрессия) и перетащите этот модуль на холст.

    ![Снимок экрана: правильная конфигурация области свойств. Задайте для модуля Split Data (разделение данных) следующие значения: Split Rows (Разделить на строки), 0,7, Randomized split (Случайное разделение), 0, False.](./media/ui-tutorial-automobile-price-train-score/linear-regression-module.png)

1. Найдите и переместите модуль **Train Model** (Обучение модели) на холст эксперимента. Соедините выход модуля Linear Regression (Линейная регрессия) с левым входом модуля Train Model (Обучение модели), а затем соедините выход (левый порт) модуля **Split Data** (Разделение данных) с правым входом модуля **Train Model** (Обучение модели).

    ![Снимок экрана: правильная конфигурация модуля Train Model (Обучение модели). Модуль Linear Regression (Линейная регрессия) присоединяется к левому порту модуля Train Model (Обучение модели), а модуль Split Data (Разделение данных) — к правому порту модуля Train Model (Обучение модели).](./media/ui-tutorial-automobile-price-train-score/train-model.png)

1. Выберите модуль **Train Model** (Обучение модели). В области свойства выберите Launch column selector (Запустить средство выбора столбцов), а затем введите **price** рядом с полем **Include column names** (Включить имена столбцов). Price (Цена) — это значение, которое спрогнозирует наша модель.

    ![Снимок экрана: правильная конфигурация модуля средства выбора столбцов. With rules (С правилами) > Include column names (Включить имена столбцов) > price (Цена)](./media/ui-tutorial-automobile-price-train-score/select-price.png)

    Теперь ваш эксперимент должен выглядеть следующим образом:

    ![Снимок экрана: правильная конфигурация эксперимента после добавления модуля Train Model (Обучение модели).](./media/ui-tutorial-automobile-price-train-score/train-graph.png)

### <a name="run-the-training-experiment"></a>Выполнение обучающего эксперимента

[!INCLUDE [aml-ui-create-training-compute](../../../includes/aml-ui-create-training-compute.md)]

## <a name="score-and-evaluate-the-model"></a>Оценка и анализ модели

После того как вы обучили модель, использовав 70 процентов ваших данных, ее можно использовать для оценки оставшихся 30 процентов данных, чтобы проверить, насколько хорошо она работает.

1. Введите **Score Model** в поле поиска, чтобы найти модуль **Score Model** (Оценка модели), и перетащите модуль на холст эксперимента. Соедините выход модуля **Train Model** (Обучение модели) с левым входным портом модуля **Score Model** (Оценка модели). Соедините выход тестовых данных (правый порт) модуля **Split Data** (Разделение данных) с правым входным портом **Score Model** (Оценка модели).

1. Введите **Evaluate** в поле поиска, чтобы найти модуль **Evaluate Model** (Анализ модели), и перетащите модуль на холст эксперимента. Присоедините выход модуля **Score Model** (Оценка модели) к левому входному порту модуля **Evaluate Model** (Анализ модели). Окончательная схема нашего эксперимента должна выглядеть следующим образом:

    ![Снимок экрана: правильная окончательная конфигурация эксперимента.](./media/ui-tutorial-automobile-price-train-score/final-graph.png)

1. Запустите эксперимент с помощью используемого ранее целевого объекта вычислений.

1. Проверьте выходные данные модуля **Score Model** (Оценка модели), щелкнув выходной порт модуля **Score Model** (Оценка модели) и выбрав **Визуализировать**. На порту вывода будут показаны прогнозируемые значения цены вместе с известными значениями проверочных данных.

    ![Снимок экрана: визуализация выходных данных с выделенным столбцом Scored Label (Метка с оценкой)](./media/ui-tutorial-automobile-price-train-score/score-result.png)

1. Чтобы проверить выходные данные модуля Evaluate Model (Анализ модели), щелкните выходной порт и выберите "Визуализировать".

    ![Снимок экран: результаты анализа для окончательного эксперимента.](./media/ui-tutorial-automobile-price-train-score/evaluate-result.png)

Для вашей модели будет выведена следующая статистика.

* **Средняя абсолютная погрешность**. Среднее значение абсолютной погрешности (погрешность — это разница между спрогнозированным и фактическим значением).
* **Среднеквадратичное отклонение**. Квадратный корень из среднего значения возведенных в квадрат арифметических отклонений спрогнозированных значений тестового набора данных.
* **Относительное арифметическое отклонение**. Среднее арифметическое отклонение по отношению к абсолютной разнице между фактическими значениями и средним арифметическим всех фактических значений.
* **Относительное среднеквадратичное отклонение**. Среднее арифметическое среднеквадратичных отклонений по отношению к абсолютной разнице между фактическими значениями и средним арифметическим всех фактических значений.
* **Коэффициент смешанной корреляции** (R в квадрате). Статистический показатель, который оценивает соответствие модели данным.

Чем меньше значение каждой погрешности, тем лучше. Меньшее значение указывает на то, что прогноз лучше соответствует фактическим значениям. Для показателя коэффициента смешанной корреляции чем ближе его значение к единице (1,0), тем точнее прогноз.

## <a name="manage-experiments-in-azure-machine-learning-service-workspace"></a>Управление экспериментами в рабочей области Службы машинного обучения Azure

Экспериментами, созданными в графическом интерфейсе, можно управлять с помощью рабочей области Службы машинного обучения Azure. В рабочей области можно просматривать подробные сведения, например данные о выполнении отдельных экспериментов, журналы диагностики, графы выполнения и т. д.

1. Откройте рабочую область на [портале Azure](https://portal.azure.com/).  

1. В своей рабочей области выберите **Эксперименты**. Затем выберите созданный эксперимент.

    ![Снимок экрана: способ перехода к экспериментам на портале Azure](./media/ui-tutorial-automobile-price-train-score/portal-experiments.png)

    На этой странице содержится обзор эксперимента и его последних выполнений.

    ![Снимок экрана: отображение обзора статистики эксперимента на портале Azure](./media/ui-tutorial-automobile-price-train-score/experiment-overview.png)

1. Выберите номер выполнения, чтобы ознакомиться с подробными сведениями о конкретном выполнении.

    ![Снимок экрана: подробный отчет о выполнении](./media/ui-tutorial-automobile-price-train-score/run-details.png)

    Отчет о выполнении обновляется в режиме реального времени. Если в своем эксперименте вы использовали модуль **Execute Python Script** (Выполнение сценариев Python), вы можете указать журналы сценариев для вывода на вкладке **Журналы**.

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [aml-ui-cleanup](../../../includes/aml-ui-cleanup.md)]

## <a name="next-steps"></a>Дополнительная информация

В рамках первой части этого руководства вы выполнили такие задачи:

* Создание эксперимента
* Подготовка данных
* Обучение модели
* Оценка и анализ модели.

Во второй части вы ознакомитесь со сведениями о развертывании модели в качестве веб-службы Azure.

> [!div class="nextstepaction"]
> [Tutorial: Deploy a machine learning model with the visual interface](ui-tutorial-automobile-price-deploy.md) (Руководство. Развертывание модели машинного обучения с помощью графического интерфейса)
