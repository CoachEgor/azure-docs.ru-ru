---
title: Руководство по прогнозированию цены на автомобили с помощью графического интерфейса
titleSuffix: Azure Machine Learning service
description: Сведения об обучении, оценке и развертывании модели машинного обучения с помощью графического интерфейса перетаскивания. Это первое руководство серии, посвященной прогнозированию цен на автомобили с использованием линейной регрессии.
author: peterclu
ms.author: peterclu
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.date: 04/06/2019
ms.openlocfilehash: 1dc905b2ac89667dcb5800b0f539cb3e9f3acdcd
ms.sourcegitcommit: 4b9c06dad94dfb3a103feb2ee0da5a6202c910cc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/02/2019
ms.locfileid: "65027590"
---
# <a name="tutorial-predict-automobile-price-with-the-visual-interface"></a>Руководство по прогнозированию цены на автомобили с помощью графического интерфейса

В этом руководстве подробно описано, как разработать прогнозное решение в графическом интерфейсе Службы машинного обучения Azure. Выполнив инструкции, указанные в этом руководстве, вы создадите решение, которое может прогнозировать цену любого автомобиля на основании отправленных в решение технических характеристик.

Это руководство [является продолжением краткого руководства](ui-quickstart-run-experiment.md), а также **первой частью серии**. Однако изучение краткого руководство перед началом работы с этим руководством необязательно.

В первом руководстве из серии вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Импорт и очистка данных (эти действия описаны в кратком руководстве).
> * Обучение модели машинного обучения.
> * Оценка и анализ модели.

Во [второй части](ui-tutorial-automobile-price-deploy.md) этой серии руководств вы научитесь развертывать прогнозную модель в качестве веб-службы Azure.

> [!NOTE]
> Завершенная версия этого руководства доступна в качестве примера эксперимента.
> На странице экспериментов выберите **Создать** > **Sample 1 - Regression: Automobile Price Prediction (Basic)** (Пример 1. Регрессия. Прогнозирование цен на автомобили (цен. категория "Базовый")).

> [!VIDEO https://www.youtube.com/embed/VDKpDNX96aA]


## <a name="create-a-workspace"></a>Создание рабочей области

Если у вас есть рабочая область Службы машинного обучения Azure, перейдите к [следующему разделу](#open-the-visual-interface-webpage). В противном случае создайте ее прямо сейчас.

[!INCLUDE [aml-create-portal](../../../includes/aml-create-in-portal.md)]

## <a name="open-the-visual-interface-webpage"></a>Открытие веб-страницы графического интерфейса

1. Откройте рабочую область на [портале Azure](https://portal.azure.com/).  

1. В своей рабочей области выберите **Графический интерфейс**.  Затем нажмите кнопку **Запустить графический интерфейс**.  

    ![Снимок экрана портала Azure: получение доступа к графическому интерфейсу из рабочей области Службы машинного обучения](./media/ui-tutorial-automobile-price-train-score/launch-ui.png)

    Веб-страница интерфейса откроется в новой странице браузера.  

## <a name="import-and-clean-your-data"></a>Импорт и очистка данных

Первое, что необходимо сделать, — это выполнить очистку данных. Если вы уже ознакомились с кратким руководством, можете повторно использовать эксперимент по подготовке данных в рамках этого руководства. В противном случае пропустите следующий раздел и [начните с создания эксперимента](#start-from-a-new-experiment).

### <a name="reuse-the-quickstart-experiment"></a>Повторное использование эксперимента, созданного в рамках краткого руководства

1. Откройте эксперимент, созданный в рамках краткого руководства.

1. В нижней части окна нажмите кнопку **Сохранить как**.

1. Присвойте эксперименту новое имя в открывшемся всплывающем диалоговом окне.

    ![Снимок экрана: переименование эксперимента на Tutorial - Predict Automobile Price](./media/ui-tutorial-automobile-price-train-score/save-a-copy.png)

1. Теперь наш эксперимент должен выглядеть следующим образом:

    ![Снимок экрана: ожидаемое состояние эксперимента. Набор данных об автомобилях присоединяется к модулю Select Columns (Выбор столбцов), который присоединяется к модулю Clean Missing Data (Очистка недостающих данных).](./media/ui-tutorial-automobile-price-train-score/save-copy-result.png)

Если использование эксперимента, созданного в рамках краткого руководства, было успешным, пропустите следующий раздел, чтобы приступить к [обучению модели](#train-the-model).

### <a name="start-from-a-new-experiment"></a>Создание эксперимента

Если вы не ознакомились с кратким руководством перед началом работы, выполните приведенные ниже действия, чтобы быстро создать эксперимент, который выполняет импорт и очистку набора данных об автомобилях.

1. Создайте эксперимент, выбрав **+ Создать** в нижней части окна графического интерфейса.

1. Выберите **EXPERIMENT** >  **Blank Experiment** (Эксперимент > Пустой эксперимент).

1. В верхней части холста выберите имя эксперимента **Experimented Created on ...**, заданное по умолчанию, и присвойте эксперименту понятное имя. Например, **Automobile price prediction**. Имя не должно быть уникальным.

1. В левой части области эксперимента расположена выборка данных и модулей. Чтобы найти модули, используйте окно поиска в верхней части палитры модулей. Введите в этом поле значение **automobile**, чтобы найти набор данных с названием **Automobile price data (Raw)** (Данные о ценах на автомобили (необработанные)). Перетащите набор данных на холст эксперимента.

    ![Снимок экрана: поиск набора данных о ценах на автомобили](./media/ui-tutorial-automobile-price-train-score/automobile-dataset.png)

    Теперь, когда у вас есть данные, добавьте модуль, который полностью удаляет столбец **normalized-losses** (Нормированные потери). Затем добавьте еще один модуль, который удаляет строки, содержащие недостающие значения.

1. Введите **Select columns** (Выбор столбцов) в поле поиска, чтобы найти модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных). Перетащите этот модуль на холст эксперимента. Этот модуль позволяет выбрать, какие столбцы данных нужно включить в модель или исключить из нее.

1. Соедините выходной порт набора данных **Automobile price data (Raw)** (Данные о ценах на автомобили (необработанные) с входным портом модуля Select Columns in Dataset (Выбор столбцов в наборе данных).

    ![Анимационный GIF, показывающий, как присоединить модуль данных о ценах на автомобили к модулю выбора столбцов](./media/ui-tutorial-automobile-price-train-score/connect-modules.gif)

1. Выберите модуль Select Columns in Dataset (Выбор столбцов в наборе данных) и в области **Свойства** щелкните **Launch column selector** (Запустить средство выбора столбцов).

   1. Слева выберите **With rules** (С правилами).

   1. Рядом с **Begin With** (Начинается с) выберите **Все столбцы**. Такие правила укажут модулю **Select Columns in Dataset** (Выбор столбцов в наборе данных) обрабатывать все столбцы (кроме тех, которые мы собираемся исключить).

   1. В раскрывающихся списках выберите **Исключить** и **Имена столбцов**, а затем введите **normalized-losses** в текстовое поле.

   1. Нажмите кнопку "ОК" внизу справа, чтобы закрыть средство выбора столбцов.

     Теперь область свойств модуля **Select Columns in Dataset** (Выбор столбцов в наборе данных) показывает, что модуль будет передавать все столбцы набора данных, за исключением столбца **normalized-losses**.

1. Добавьте комментарий в модуль **Select Columns in Dataset** (Выбор столбцов в наборе данных), дважды щелкнув модуль и введя "Исключить нормированные потери". Это поможет вам увидеть описание модуля и его действие в рамках эксперимента.

    ![Снимок экрана: правильная конфигурация модуля Select Columns (Выбор столбцов)](./media/ui-tutorial-automobile-price-train-score/select-columns.png)

1. Введите **Clean** (Очистка) в поле поиска, чтобы найти модуль **Clean Missing Data** (Очистка недостающих данных). Перетащите на холст эксперимента модуль **Clean Missing Data** (Очистка недостающих данных) и присоедините его к модулю **Select Columns in Dataset** (Выбор столбцов в наборе данных).

1. В панели **Properties** (Свойства) выберите значение **Remove entire row** (Удалить всю строку) для параметра **Cleaning mode** (Режим очистки). Этот параметр указывает модулю **Clean Missing Data** (Очистка недостающих данных) полностью удалять те строки, в которых есть недостающие значения. Дважды щелкните модуль и введите комментарий "Удаление строк с недостающими значениями".

![Снимок экрана: правильная конфигурация модуля Clean Missing Data (Очистка недостающих данных)](./media/ui-tutorial-automobile-price-train-score/clean-missing-data.png)

## <a name="train-the-model"></a>Обучение модели

Теперь, когда данные готовы, вы можете создать прогнозную модель. Вы будете использовать свои данные для обучения модели. Затем вы протестируете модель, чтобы увидеть, насколько точно она может прогнозировать цены.

Есть два типа алгоритмов контролируемого машинного обучения — **классификация** и **регрессия**. **Классификация** используется, чтобы сформировать прогноз по заданному набору категорий, таких как цвет (красный, синий или зеленый). **Регрессия** используется для прогнозирования числа.

Вам нужно предсказать цену, которая является числом, поэтому используйте алгоритм регрессии. В этом примере используется модель линейной регрессии.

Обучите модель, передав ей набор данных, содержащий цены. Модель сканирует эти данные и ищет зависимости между свойствами автомобиля и его ценой. После этого протестируйте модель, передав ей набор свойств известных нам автомобилей и проверив, насколько точно модель прогнозирует известные цены.

Разделите набор данных на два набора, один из которых примените для обучения модели, а второй — для тестирования.

1. Введите **Split data** в поле поиска, чтобы найти модуль **Split Data** (Разделение данных), и присоедините его к левому порту модуля **Clean Missing Data** (Очистка недостающих данных).

1. Выберите модуль **Split Data** (Разделение данных), который вы только что присоединили. В области свойств в поле Fraction of rows in the first output dataset (Доля строк в первом наборе выходных данных) введите значение 0,7. Таким образом, мы используем 70 процентов данных для обучения модели и оставим 30 процентов для тестирования.

    ![Снимок экрана: правильная конфигурация области свойств. Задайте для модуля Split Data (разделение данных) следующие значения: Split Rows (Разделить на строки), 0,7, Randomized split (Случайное разделение), 0, False.](./media/ui-tutorial-automobile-price-train-score/split-data.png)

1. Дважды щелкните модуль **Split Data** (Разделение данных) и введите комментарий о разделении набора данных на набор для обучения (0,7) и набор для тестирования (0,3).

1. Чтобы выбрать алгоритм обучения, удалите запрос в поле поиска на палитре модулей.

1. Разверните узел **Машинное обучение**, а затем — **Initialize Model** (Инициализация модели). Появится несколько категорий модулей, которые можно использовать для инициализации алгоритма обучения.

1. Для этого эксперимента выберите **Регрессия** > **Linear Regression** (Линейная регрессия) и перетащите этот модуль на холст.

    ![Снимок экрана: правильная конфигурация области свойств. Задайте для модуля Split Data (разделение данных) следующие значения: Split Rows (Разделить на строки), 0,7, Randomized split (Случайное разделение), 0, False.](./media/ui-tutorial-automobile-price-train-score/linear-regression-module.png)

1. Найдите и переместите модуль **Train Model** (Обучение модели) на холст эксперимента. Соедините выход модуля Linear Regression (Линейная регрессия) с левым входом модуля Train Model (Обучение модели), а затем соедините выход (левый порт) модуля **Split Data** (Разделение данных) с правым входом модуля **Train Model** (Обучение модели).

    ![Снимок экрана: правильная конфигурация модуля Train Model (Обучение модели). Модуль Linear Regression (Линейная регрессия) присоединяется к левому порту модуля Train Model (Обучение модели), а модуль Split Data (Разделение данных) — к правому порту модуля Train Model (Обучение модели).](./media/ui-tutorial-automobile-price-train-score/train-model.png)

1. Выберите модуль **Train Model** (Обучение модели). В области свойства выберите Launch column selector (Запустить средство выбора столбцов), а затем введите **price** рядом с полем **Include column names** (Включить имена столбцов). Price (Цена) — это значение, которое спрогнозирует наша модель.

    ![Снимок экрана: правильная конфигурация модуля средства выбора столбцов. With rules (С правилами) > Include column names (Включить имена столбцов) > price (Цена)](./media/ui-tutorial-automobile-price-train-score/select-price.png)

    Теперь эксперимент должен выглядеть следующим образом.
    ![Снимок экрана: правильная конфигурация эксперимента после добавления модуля Train Model (Обучение модели).](./media/ui-tutorial-automobile-price-train-score/train-graph.png)

### <a name="run-the-training-experiment"></a>Выполнение обучающего эксперимента

[!INCLUDE [aml-ui-create-training-compute](../../../includes/aml-ui-create-training-compute.md)]

## <a name="score-and-evaluate-the-model"></a>Оценка и анализ модели

После того как вы обучили модель, использовав 70 процентов ваших данных, ее можно использовать для оценки оставшихся 30 процентов данных, чтобы проверить, насколько хорошо она работает.

1. Введите **Score Model** в поле поиска, чтобы найти модуль **Score Model** (Оценка модели), и перетащите модуль на холст эксперимента. Соедините выход модуля **Train Model** (Обучение модели) с левым входным портом модуля **Score Model** (Оценка модели). Соедините выход тестовых данных (правый порт) модуля **Split Data** (Разделение данных) с правым входным портом **Score Model** (Оценка модели).

1. Введите **Evaluate** в поле поиска, чтобы найти модуль **Evaluate Model** (Анализ модели), и перетащите его на холст эксперимента. Присоедините выход модуля **Score Model** (Оценка модели) к левому входному порту модуля **Evaluate Model** (Анализ модели). Окончательная схема нашего эксперимента должна выглядеть следующим образом:

    ![Снимок экрана: правильная окончательная конфигурация эксперимента.](./media/ui-tutorial-automobile-price-train-score/final-graph.png)

1. Запустите эксперимент с помощью используемого ранее целевого объекта вычислений.

1. Проверьте выходные данные модуля **Score Model** (Оценка модели), щелкнув выходной порт модуля **Score Model** (Оценка модели) и выбрав **Визуализировать**. На порту вывода будут показаны прогнозируемые значения цены вместе с известными значениями проверочных данных.

    ![Снимок экрана: визуализация выходных данных с выделенным столбцом Scored Label (Метка с оценкой)](./media/ui-tutorial-automobile-price-train-score/score-result.png)

1. Чтобы проверить выходные данные модуля Evaluate Model (Анализ модели), щелкните выходной порт и выберите "Визуализировать".

    ![Снимок экран: результаты анализа для окончательного эксперимента.](./media/ui-tutorial-automobile-price-train-score/evaluate-result.png)

Для вашей модели будет выведена следующая статистика.

* **Средняя абсолютная погрешность**. Среднее значение абсолютной погрешности (погрешность — это разница между спрогнозированным и фактическим значением).
* **Среднеквадратичное отклонение**. Квадратный корень из среднего значения возведенных в квадрат арифметических отклонений спрогнозированных значений тестового набора данных.
* **Относительное арифметическое отклонение**. Среднее арифметическое отклонение по отношению к абсолютной разнице между фактическими значениями и средним арифметическим всех фактических значений.
* **Относительное среднеквадратичное отклонение**. Среднее арифметическое среднеквадратичных отклонений по отношению к абсолютной разнице между фактическими значениями и средним арифметическим всех фактических значений.
* **Коэффициент смешанной корреляции** (R в квадрате). Статистический показатель, который оценивает соответствие модели данным.

Чем меньше значение каждой погрешности, тем лучше. Меньшее значение указывает на то, что прогноз лучше соответствует фактическим значениям. Для показателя коэффициента смешанной корреляции чем ближе его значение к единице (1,0), тем точнее прогноз.

## <a name="manage-experiments-in-azure-machine-learning-service-workspace"></a>Управление экспериментами в рабочей области Службы машинного обучения Azure

Экспериментами, созданными в графическом интерфейсе, можно управлять с помощью рабочей области Службы машинного обучения Azure. В рабочей области можно просматривать подробные сведения, например данные о выполнении отдельных экспериментов, журналы диагностики, графы выполнения и т. д.

1. Откройте рабочую область на [портале Azure](https://portal.azure.com/).  

1. В своей рабочей области выберите **Эксперименты**. Затем выберите созданный эксперимент.

    ![Снимок экрана: способ перехода к экспериментам на портале Azure](./media/ui-tutorial-automobile-price-train-score/portal-experiments.png)

    На этой странице содержится обзор эксперимента и его последних выполнений.

    ![Снимок экрана: отображение обзора статистики эксперимента на портале Azure](./media/ui-tutorial-automobile-price-train-score/experiment-overview.png)

1. Выберите номер выполнения, чтобы ознакомиться с подробными сведениями о конкретном выполнении.

    ![Снимок экрана: подробный отчет о выполнении](./media/ui-tutorial-automobile-price-train-score/run-details.png)

    Отчет о выполнении обновляется в режиме реального времени. Если в своем эксперименте вы использовали модуль **Execute Python Script** (Выполнение сценариев Python), вы можете указать журналы сценариев для вывода на вкладке **Журналы**.

## <a name="clean-up-resources"></a>Очистка ресурсов

[!INCLUDE [aml-ui-cleanup](../../../includes/aml-ui-cleanup.md)]

## <a name="next-steps"></a>Дополнительная информация

В рамках первой части этого руководства вы выполнили такие задачи:

* Повторное использование эксперимента, созданного в рамках краткого руководства.
* Подготовка данных
* Обучение модели
* Оценка и анализ модели.

Во второй части вы ознакомитесь со сведениями о развертывании модели в качестве веб-службы Azure.

> [!div class="nextstepaction"]
> [Tutorial: Deploy a machine learning model with the visual interface](ui-tutorial-automobile-price-deploy.md) (Руководство. Развертывание модели машинного обучения с помощью графического интерфейса)
