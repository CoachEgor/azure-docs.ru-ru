---
title: Создание регистрации приложения Azure AD и пользователя для Azure Red Hat OpenShift | Документация Майкрософт
description: Узнайте, как создать субъект-службу, создать секрет и проверки подлинности обратного вызова URL-адрес клиента и создание нового пользователя Active Directory для тестирования приложений в кластере Microsoft Azure Red Hat OpenShift.
author: tylermsft
ms.author: twhitney
ms.service: openshift
manager: jeconnoc
ms.topic: conceptual
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/06/2019
ms.openlocfilehash: de3f3c30848d26ea399bcccc29a6149a149f6a55
ms.sourcegitcommit: 0ae3139c7e2f9d27e8200ae02e6eed6f52aca476
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "65078525"
---
# <a name="create-an-azure-ad-app-registration-and-user-for-azure-red-hat-openshift"></a>Создание регистрации приложения Azure AD и пользователя для Azure Red Hat OpenShift

Microsoft Azure Red Hat OpenShift требуются разрешения на выполнение задачи от имени кластера. Если вашей организации еще нет регистрацию приложения Azure Active Directory (Azure AD) для использования в качестве субъекта-службы, выполните следующие действия, чтобы создать его.

В этом разделе приводятся инструкции для создания нового пользователя Azure AD, которые потребуются для доступа к приложениям, выполняющихся в кластере Azure Red Hat OpenShift.

Если вы еще не создали клиент Azure AD, следуйте указаниям, приведенным в [создание клиента Azure AD для Azure Red Hat OpenShift](howto-create-tenant.md) продолжения с помощью этих инструкций.

## <a name="create-a-new-app-registration"></a>Создание регистрации приложения

Во-первых, приложение, которое хочет использовать возможности Azure AD должны регистрироваться в клиент Azure AD. Этот процесс регистрации включает в себя предоставление Azure AD сведений о приложении, такие как URL-адрес, где находится приложение, URL-адрес для отправки ответов после проверки подлинности пользователя, URI, определяющий приложение и т. д.

1. В [портала Azure](https://portal.azure.com), убедитесь, что клиент отображается под именем пользователя в правом верхнем углу портала:

    ![Снимок экрана портала с клиентом в списке в верхнем правом углу][tenantcallout] Если неправильного клиента отображается, щелкните свое имя пользователя в правом верхнем углу, а затем нажмите кнопку **переключение каталога**и выбрать правильный клиент из **все Каталоги** списка.

2. Откройте [колонку регистрации приложений](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps) и нажмите кнопку **Регистрация нового приложения**.
3. В **создать** области введите понятное имя для объекта приложения.
4. Убедитесь, что **тип приложения** присваивается *веб-приложение или API*.
5. Создание **URL-адрес входа** в следующем формате:

    ```
    https://<cluster-name>.<azure-region>.cloudapp.azure.com
    ```

    . . . где `<cluster-name>` предполагаемого имя кластера Azure Red Hat OpenShift и `<azure-region>` — [регион Azure, в которой размещен ваш кластер Azure Red Hat OpenShift](supported-resources.md#azure-regions). Например, если имя кластера должно быть `contoso`, и вы создадите в `eastus` область, полное доменное имя (FQDN), который нужно будет ввести для **URL-адрес входа** бы `https://contoso.eastus.cloudapp.azure.com`

    > [!IMPORTANT]
    > Имя кластера должно содержать только строчные и полное доменное имя URL-адрес должен быть уникальным.
    > Убедитесь, что вы выбрали достаточно distinct имя для кластера.

    Запишите имя кластера и URL-адрес входа — они потребуются позже для доступа приложения, работающие в кластере. Мы будем называть имя кластера, как `CLUSTER_NAME`и этот URL-адрес входа как `FQDN` в [создать кластер Azure Red Hat OpenShift](tutorial-create-cluster.md) руководства.

6. Убедитесь в **URL-адрес входа** проверяет значение с Зеленый флажок. (Нажмите клавишу Tab, чтобы фокус из *URL-адрес входа* поле и выполните проверку подлинности.)
7. Нажмите кнопку **создать** кнопку, чтобы создать объект приложения Azure AD.
8. На **зарегистрированное приложение** отображаемой страницы, скопируйте **идентификатор приложения**. Мы будем называть это значение как `APPID` в [создать кластер Azure Red Hat OpenShift](tutorial-create-cluster.md) руководства.

    ![Снимок экрана текстового поля, идентификатор приложения][appidimage]
    
Дополнительные сведения об объектах приложения Azure см. в разделе [объекты приложения и службы субъекта в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/app-objects-and-service-principals).

Дополнительные сведения о создании нового приложения Azure AD, см. в разделе [регистрации приложения с конечной точкой Azure Active Directory версии 1.0](https://docs.microsoft.com/azure/active-directory/develop/quickstart-v1-add-azure-ad-app).

### <a name="create-a-client-secret"></a>Создание секрета клиента

Теперь вы готовы создать секрет клиента для проверки подлинности приложения в Azure Active Directory.

1. Из **зарегистрированное приложение** нажмите кнопку **параметры** чтобы открыть параметры для своего зарегистрированного приложения.
2. На **параметры** появившейся области нажмите кнопку **ключи**.  **Ключи** откроется панель.
![Снимок экрана страницы create ключа на портале][createkeyimage]
3. Укажите ключ **описание**.
4. Задайте значение для **Expires**, например *в 2 года*.
5. Нажмите кнопку **Сохранить** и отобразится значение ключа.
6. Скопируйте значение ключа. Мы будем называть это значение как `SECRET` в [создать кластер Azure Red Hat OpenShift](tutorial-create-cluster.md) руководства.

### <a name="create-a-reply-url"></a>Создание URL-адрес ответа

Azure AD использует объект приложения *URL-адрес ответа* для указания обратного вызова следует использовать при авторизации приложения. В случае веб-API или веб-приложение URL-адрес ответа — это расположение, куда Azure AD будет отправлять ответ проверки подлинности, включая токен при успешной проверке подлинности.

Даже наименьшее несоответствие (конечные косой черты отсутствуют, в разных регистрах) приведет к сбою операции выдачу маркера, и вы не сможете войти.

1. Вернитесь к **параметры** панели (если щелкнуть **параметры** в строке навигации в верхней части портала) и нажмите кнопку **URL-адреса ответа** справа.  **URL-адреса ответа** откроется панель.
2. Первый URL-адрес ответа в списке будет `FQDN` значение из шага 6 в [создания регистрации приложения](#create-a-new-app-registration). Изменить его и добавьте `/oauth2callback/Azure%20AD`.  Например URL-адрес ответа должен выглядеть примерно так `https://mycluster.eastus.cloudapp.azure.com/oauth2callback/Azure%20AD`
3. Нажмите кнопку **Сохранить** сохранить URL-адрес ответа.

## <a name="create-a-new-active-directory-user"></a>Создание нового пользователя Active Directory

Создайте нового пользователя в Active Directory для использования для входа в приложение, работающее в кластере Azure Red Hat OpenShift.

1. Перейдите к [пользователи — все пользователи](https://portal.azure.com/#blade/Microsoft_AAD_IAM/UsersManagementMenuBlade/AllUsers) колонке.
2. Щелкните **+ Новый пользователь**. **Пользователя** откроется панель.
3. Введите **имя** , которые требуется для этого пользователя.
4. Создание **имя пользователя** на основе имени клиента, созданного с помощью `.onmicrosoft.com` в конце. Например, `yourUserName@yourTenantName.onmicrosoft.com`. Запишите это имя пользователя. Он вам понадобится выполнить вход с помощью приложения в кластере.
5. Нажмите кнопку **роль каталога** и выберите **глобального администратора** и нажмите кнопку **ОК** в нижней части области.
6. Посередине **пользователя** панели щелкните **Показать пароль** и запишите временный пароль. После входа в систему в первый раз, вам будет предложено сбросить его.
7. В нижней части панели, щелкните **создать** для создания пользователя.

## <a name="resources"></a>Ресурсы

* [Приложения и объектов субъекта-службы в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/app-objects-and-service-principals)  
* [Краткое руководство Регистрация приложения с конечной точкой Azure Active Directory версии 1.0](https://docs.microsoft.com/azure/active-directory/develop/quickstart-v1-add-azure-ad-app)  

[appidimage]: ./media/howto-create-tenant/get-app-id.png
[createkeyimage]: ./media/howto-create-tenant/create-key.png
[tenantcallout]: ./media/howto-create-tenant/tenant-callout.png

## <a name="next-steps"></a>Дальнейшие действия

Если соблюдены все [предварительные требования Azure Red Hat OpenShift](howto-setup-environment.md), вы будете готовы создать свой первый кластер!

Ознакомьтесь с учебником:
> [!div class="nextstepaction"]
> [Создание кластера Azure Red Hat OpenShift](tutorial-create-cluster.md)
