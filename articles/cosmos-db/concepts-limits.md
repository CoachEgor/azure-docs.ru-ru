---
title: Квоты службы Azure Cosmos DB
description: Квоты службы Azure Cosmos DB и ограничения по умолчанию для различных типов ресурсов.
author: abhijitpai
ms.author: abpai
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 03/27/2020
ms.openlocfilehash: bd384f2b4dd879c30fafd2b765dd9ba0efb12447
ms.sourcegitcommit: 8a9c54c82ab8f922be54fb2fcfd880815f25de77
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "80348388"
---
# <a name="azure-cosmos-db-service-quotas"></a>Квоты службы Azure Cosmos DB

В этой статье представлен обзор квот по умолчанию, предлагаемых для разных ресурсов в Azure Cosmos DB.

## <a name="storage-and-throughput"></a>Хранение и пропускная память

После создания учетной записи Azure Cosmos под подпиской можно управлять данными в учетной записи, [создавая базы данных, контейнеры и элементы.](databases-containers-items.md) Вы можете обеспечить пропускную стоимость на уровне контейнеров или на уровне базы данных с точки зрения [единиц запроса (RU/s или RUs).](request-units.md) В следующей таблице перечислены ограничения для хранения и пропускной воды на контейнер/базу данных.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальный RUs на контейнер[(выделенный режим подготовки пропускной мощности)](databases-containers-items.md#azure-cosmos-containers) | 1 000 000 по умолчанию. Вы можете увеличить его, [подав заявку на поддержку Azure](https://docs.microsoft.com/azure/azure-portal/supportability/how-to-create-azure-support-request) |
| Максимальный RUs на базу данных[(общий режим подготовки пропускной мощности)](databases-containers-items.md#azure-cosmos-containers) | 1 000 000 по умолчанию. Вы можете увеличить его, [подав заявку на поддержку Azure](https://docs.microsoft.com/azure/azure-portal/supportability/how-to-create-azure-support-request) |
| Максимальный RUs на (логический) ключ раздела | 10 000 |
| Максимальное хранение по всем элементам на (логическом) ключе раздела| 20 ГБ |
| Максимальное количество различных (логических) ключей раздела | Неограниченно |
| Максимальное хранение на контейнер | Неограниченно |
| Максимальное хранение в базе данных | Неограниченно |
| Максимальный размер крепления на счет (функция присоединения амортизируются) | 2 ГБ |
| Минимальный RUs требуется за 1 ГБ | 10 РУБ/с |

> [!NOTE]
> Чтобы узнать о рекомендациях по управлению [рабочими](synthetic-partition-keys.md)нагрузками с ключами раздела, требующими более высоких лимитов для хранения или пропускной платы, см.
>

Контейнер Cosmos (или общая база данных пропускной платы) должен иметь минимальную пропускную плату 400 rUs. По мере роста контейнера минимальная поддерживаемая пропускная плата также зависит от следующих факторов:

* Минимальная пропускная емкость, которую можно установить на контейнере, зависит от максимальной пропускной платы, когда-либо установленной на контейнере. Например, если ваша пропускная часть была увеличена до 10000 rUs, то наименьшая возможная продуктора составит 1000 rUs
* Минимальная пропускная плата в общей базе данных пропускной платы также зависит от общего количества контейнеров, которые вы когда-либо создавали в общей базе данных пропускной платы, измеряемой на уровне 100 rUs на контейнер. Например, если вы создали пять контейнеров в общей базе данных пропускной информации, пропускная часть должна быть не менее 500 rUs

Текущая и минимальная пропускная емкость контейнера или базы данных может быть извлечена с портала Azure или SDKs. Для получения дополнительной информации [см.](set-throughput.md) 

> [!NOTE]
> В некоторых случаях, вы можете быть в состоянии снизить пропускную высословную до менее чем 10%. Используйте API, чтобы получить точный минимальный RUs на контейнер.
>

Таким образом, вот минимальные предусмотренные лимиты RU. 

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Минимальные RUs на контейнер[(выделенный режим подготовки пропускной платы)](databases-containers-items.md#azure-cosmos-containers) | 400 |
| Минимальные RUs на базу данных[(общий режим подготовки пропускной платы)](databases-containers-items.md#azure-cosmos-containers) | 400 |
| Минимальные RUs на контейнер в общей базе данных пропускной платы | 100 |

Cosmos DB поддерживает эластичное масштабирование пропускной связи (RUs) на контейнер или базу данных через SDKs или портал. Каждый контейнер может масштабироваться синхронно и сразу в диапазоне от 10 до 100 раз, между минимальными и максимальными значениями. Если запрашиваемая пропускная стоимость находится за пределами диапазона, масштабирование выполняется асинхронно. Асинхронное масштабирование может занять от нескольких минут до нескольких часов в зависимости от запрашиваемых пропускной памяти и размера хранения данных в контейнере.  

## <a name="control-plane-operations"></a>Управление операциями самолета

Вы можете [предоставить и управлять учетной записью Azure Cosmos](how-to-manage-database-account.md) с помощью шаблонов Порталaz, Azure PowerShell, Azure CLI и менеджера ресурсов Azure. В следующей таблице перечислены ограничения на подписку, учетную запись и количество операций.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальные учетные записи баз данных за подписку | 50 по умолчанию. Вы можете увеличить его, [подав заявку на поддержку Azure](https://docs.microsoft.com/azure/azure-portal/supportability/how-to-create-azure-support-request)|
| Максимальное количество региональных сбоев | 1/час по умолчанию. Вы можете увеличить его, [подав заявку на поддержку Azure](https://docs.microsoft.com/azure/azure-portal/supportability/how-to-create-azure-support-request)|

> [!NOTE]
> Региональные сбой применяется только к одному региону, записавом учетные записи. Учетные записи мультирегиона не требуют и не имеют каких-либо ограничений на изменение региона записи.

Cosmos DB автоматически принимает резервные данные через регулярные промежутки времени. Для получения подробной информации о интервалах хранения резервного копирования и окнах [см.](../synapse-analytics/sql-data-warehouse/backup-and-restore.md)

## <a name="per-account-limits"></a>Лимиты по счету

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальное количество баз данных | Неограниченно |
| Максимальное количество контейнеров в базе данных с общей пропускной емкостью |25 |
| Максимальное количество контейнеров на базу данных или учетную запись с выделенной пропускной стоимостью  |без ограничений |
| Максимальное количество регионов | Нет предела (Все области Azure) |

## <a name="per-container-limits"></a>Ограничения по контейнерам

В зависимости от того, какой API вы используете, контейнер Azure Cosmos может представлять коллекцию, таблицу или график. Контейнеры поддерживают конфигурации для [уникальных ключевых ограничений,](unique-keys.md) [сохраненных процедур, триггеров и ОФЗ,](stored-procedures-triggers-udfs.md)а также [политики индексирования.](how-to-manage-indexing-policy.md) В следующей таблице перечислены ограничения, характерные для конфигураций в контейнере. 

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальная длина базы данных или название контейнера | 255 |
| Максимальные сохраненные процедуры на контейнер | 100<sup>*</sup>|
| Максимум UDF на контейнер | 25<sup>*</sup>|
| Максимальное количество путей в политике индексации| 100<sup>*</sup>|
| Максимальное количество уникальных ключей на контейнер|10<sup>*</sup>|
| Максимальное количество путей на уникальное ограничение ключа|16<sup>*</sup>|

<sup>*</sup>Вы можете увеличить любой из этих ограничений на контейнер, обратившись в службу поддержки Azure.

## <a name="per-item-limits"></a>Ограничения по элементу

В зависимости от того, какой API использует, элемент Azure Cosmos может представлять либо документ в коллекции, либо строку в таблице, либо узел или край на графике. В следующей таблице показаны ограничения на единицу в Cosmos DB. 

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальный размер товара | 2 МБ (UTF-8 длина представления JSON) |
| Максимальная длина ключевого значения раздела | 2048 байтов |
| Максимальная длина значения идентификатора | 1023 байтов |
| Максимальное количество свойств на единицу | Нет практических ограничений |
| Максимальная глубина вложения | Нет практических ограничений |
| Максимальная длина имени свойства | Нет практических ограничений |
| Максимальная длина стоимости имущества | Нет практических ограничений |
| Максимальная длина значения свойства строки | Нет практических ограничений |
| Максимальная длина численного значения свойства | IEEE754 двухточный 64-разрядный |

Нет никаких ограничений на полезную нагрузку элемента, как количество свойств и глубины вложения, за исключением ограничений длины ключа раздела и значений идентификатора, а также общего ограничения размера 2 МБ. Возможно, вам придется настроить политику индексирования для контейнеров с большими или сложными структурами элементов, чтобы уменьшить потребление RU. Для примера в реальном мире [элементов моделирования в Космосе](how-to-model-partition-example.md) и шаблонов для управления крупными элементами можно ознакомиться с элементами.

## <a name="per-request-limits"></a>Ограничения по запросу

Azure Cosmos DB поддерживает [CRUD и операции запросов](https://docs.microsoft.com/rest/api/cosmos-db/) против таких ресурсов, как контейнеры, элементы и базы данных. Он также поддерживает [транзакционные пакетные запросы](https://docs.microsoft.com/dotnet/api/microsoft.azure.cosmos.transactionalbatch) против нескольких элементов с тем же ключом раздела в контейнере.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальное время выполнения одной операции (например, выполнение сохраненной процедуры или поиск одной страницы запроса)| 5 секунд |
| Максимальный размер запроса (например, сохраненная процедура, CRUD)| 2 МБ |
| Максимальный размер ответа (например, paginated запрос) | 4 МБ |
| Максимальное количество операций в транзакционной партии | 100 |

Как только операция, подобная запросу, достигает ограничения тайм-аута или размера ответа, она возвращает клиенту страницу результатов и токен продолжения для возобновления выполнения. Нет никаких практических ограничений на продолжительность одного запроса, который может работать на страницах/продолжениях.

Cosmos DB использует HMAC для авторизации. Можно использовать либо основной ключ, либо [маркеры ресурсов](secure-access-to-data.md) для тонкого управления доступом к ресурсам, таким как контейнеры, ключи раздела или элементы. В следующей таблице перечислены ограничения для токенов авторизации в Cosmos DB.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальное время истечения срока действия master token | 15 мин.  |
| Минимальный срок истечения срока действия маркера ресурса | 10 мин  |
| Максимальное время истечения срока действия токенов ресурса | 24 ч по умолчанию. Вы можете увеличить его, [подав заявку на поддержку Azure](https://docs.microsoft.com/azure/azure-portal/supportability/how-to-create-azure-support-request)|
| Максимальный перекос часов для авторизации маркеров| 15 мин. |

Cosmos DB поддерживает выполнение триггеров во время записи. Служба поддерживает максимум один предварительный триггер и один пост-триггер за операцию записи. 

## <a name="autopilot-mode-limits"></a>Ограничения режима автопилота

Смотрите статью [Autopilot](provision-throughput-autopilot.md#autopilot-limits) для пропускной памяти и лимитов хранения в режиме автопилота.

## <a name="sql-query-limits"></a>Ограничения запросов S'L

Cosmos DB поддерживает элементы запроса с помощью [S'L.](how-to-sql-query.md) В следующей таблице описаны ограничения в инструкциях по запросу, например, с точки зрения количества оговорок или длины запроса.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальная длина запроса S'L| 256 KB |
| Максимальное КОЛИЧЕСТВО JOIN за запрос| 5<sup>*</sup>|
| Максимум UDF на запрос| 10<sup>*</sup>|
| Максимальное количество баллов за полигон| 4096 |

<sup>*</sup>Вы можете увеличить эти ограничения запроса S'L, связавшись с поддержкой Azure.

## <a name="mongodb-api-specific-limits"></a>Ограничения aPI MongoDB

Cosmos DB поддерживает протокол проволоки MongoDB для приложений, написанных против MongoDB. Вы можете найти поддерживаемые команды и версии протоколов на [поддерживаемых функциях MongoDB и синтаксисе.](mongodb-feature-support.md)

В следующей таблице перечислены ограничения, характерные для поддержки функций MongoDB. Другие ограничения обслуживания, упомянутые для API СЗЛ (основной), также применяются к API MongoDB.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальный размер памяти запроса MongoDB | 40 МБ |
| Максимальное время выполнения для операций MongoDB| 30 с |
| Время простоя подключения для закрытия бокового соединения сервера | 30 минут |

\*Мы рекомендуем клиентским приложениям установить тайм-аут простоя в настройках драйвера на 2-3 минуты, так как [тайм-аут по умолчанию для Azure LoadBalancer составляет 4 минуты.](../load-balancer/load-balancer-tcp-idle-timeout.md#tcp-idle-timeout)  Этот тайм-аут гарантирует, что простоя соединения не будут закрыты промежуточным балансом нагрузки между клиентской машиной и DB Azure Cosmos.

## <a name="try-cosmos-db-free-limits"></a>Попробуйте Космос DB Бесплатные пределы

В следующей таблице перечислены ограничения для пробной версии [Try Azure Cosmos DB для бесплатной](https://azure.microsoft.com/try/cosmosdb/) пробной версии.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Продолжительность судебного разбирательства | 30 дней (может быть продлен любое количество раз) |
| Максимальные контейнеры за подписку (S'L, Gremlin, Table API) | 1 |
| Максимальные контейнеры за подписку (MongoDB API) | 3 |
| Максимальная пропускная емкость на контейнер | 5000 |
| Максимальная пропускная информация для базы данных общей пропускной высостовой | 20 000 |
| Максимальное общее хранение на счет | 10 ГБ |

Try Cosmos DB поддерживает глобальное распространение только в регионах Центральной Азии, Северной Европы и юго-восточной Азии. Билеты поддержки Azure не могут быть созданы для dB-аккаунтов Try Azure Cosmos DB. Тем не менее, поддержка предоставляется для абонентов с существующими планами поддержки.

## <a name="free-tier-account-limits"></a>Бесплатные лимиты аккаунта уровня
В следующей таблице перечислены ограничения для [учетных записей уровня Свободного уровня Azure Cosmos DB.](optimize-dev-test.md#azure-cosmos-db-free-tier)

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Количество бесплатных учетных записей уровня в подписке Azure | 1 |
| Продолжительность скидки на свободный уровень | Срок службы счета. Необходимо отказаться от участия в создании учетной записи. |
| Максимум RU/s бесплатно | 400 ЕЗ/с |
| Максимальное хранение бесплатно | 5 ГБ |
| Максимальное количество общих баз данных пропускной информации | 5 |
| Максимальное количество контейнеров в общей базе данных пропускной информации | 25 <br>В бесплатных учетных записях уровня минимальный RU/s для общей базы данных пропускной записи с до 25 контейнерами составляет 400 РУБ/с. |

  В дополнение к вышесказанным, [ограничения Per-account](#per-account-limits) также распространяются на бесплатные учетные записи уровня.

## <a name="next-steps"></a>Дальнейшие действия

Узнайте больше о основных концепциях Глобального [распределения](distribute-data-globally.md) и раздела и [прокладки](partitioning-overview.md) [пропускной системы](request-units.md)Cosmos DB.

Приступая к работе с Azure Cosmos DB, ознакомьтесь с одним из наших кратких руководств:

* [Краткое руководство. Создание веб-приложения .NET с помощью учетной записи API SQL для Azure Cosmos DB](create-sql-api-dotnet.md)
* [Краткое руководство. Перенос имеющегося веб-приложения MongoDB на Node.js в Azure Cosmos DB](create-mongodb-nodejs.md)
* [Краткое руководство. Создание приложения Cassandra с помощью пакета SDK для .NET и Azure Cosmos DB](create-cassandra-dotnet.md)
* [Краткое руководство. Создание приложения .NET Framework или Core с помощью учетной записи API Gremlin для Azure Cosmos DB](create-graph-dotnet.md)
* [Краткое руководство. Создание приложения API таблиц с помощью пакета SDK .NET и Azure Cosmos DB](create-table-dotnet.md)

> [!div class="nextstepaction"]
> [Попробуйте Azure Космос DB бесплатно](https://azure.microsoft.com/try/cosmosdb/)
