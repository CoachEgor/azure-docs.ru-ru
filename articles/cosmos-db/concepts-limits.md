---
title: Ограничения в базе данных Azure Cosmos DB
description: В этой статье описаны ограничения в Azure Cosmos DB.
author: arramac
ms.author: arramac
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 05/19/2019
ms.openlocfilehash: 0086327661df637dc0ae60208ed9424b4610ef0e
ms.sourcegitcommit: e9a46b4d22113655181a3e219d16397367e8492d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/21/2019
ms.locfileid: "65969497"
---
# <a name="limits-in-azure-cosmos-db"></a>Ограничения в базе данных Azure Cosmos DB

В этой статье Обзор ограничений в службе Azure Cosmos DB.

## <a name="storage-and-throughput"></a>Хранилища и пропускной способности

После создания учетной записи Azure Cosmos в рамках вашей подписки, вы можете управлять данными, в свою учетную запись, [создания баз данных, контейнеры и элементы](databases-containers-items.md). Вы можете подготовить пропускную способность на уровне контейнера или уровне базы данных на основе [единицы (ЕЗ/с или RUs) запросов](request-units.md). Ниже перечислены ограничения для хранилища или пропускной способности для базы данных контейнера.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальное единиц запроса каждого контейнера ([подготовленной режим выделенной пропускной способностью](databases-containers-items.md#azure-cosmos-containers)) | по умолчанию 1 000 000. Может быть увеличен по [подав заявку в службу поддержки Azure](https://docs.microsoft.com/azure/azure-supportability/how-to-create-azure-support-request) или связавшись с нами через [попросите Cosmos DB](mailto:askcosmosdb@microsoft.com) |
| Максимальное RUs на базу данных ([подготовленной режима общей пропускной способности](databases-containers-items.md#azure-cosmos-containers)) | по умолчанию 1 000 000. Может быть увеличен по [подав заявку в службу поддержки Azure](https://docs.microsoft.com/azure/azure-supportability/how-to-create-azure-support-request) или связавшись с нами через [попросите Cosmos DB](mailto:askcosmosdb@microsoft.com) |
| Максимальное RUs на ключ секции (логический) | 10 000 |
| Максимальный размер хранилища для всех элементов на ключ секции (логический)| 10 GB |
| Максимальное количество ключей отдельную секцию (логический) | Не ограничено |
| Максимальный объем хранилища на контейнер | Не ограничено |
| Максимальный размер хранилища на базу данных | Не ограничено |

> [!NOTE]
> Советы и рекомендации для управления рабочими нагрузками с ключами секции, которые потребуется больше ресурсов для хранилища или пропускной способности, см. в разделе [проектирование для сочетания клавиш для секции](synthetic-partition-keys.md)
>

Контейнер Cosmos (или общей пропускной способности базы данных) должен иметь минимальную пропускную способность в 400 ЕЗ. По мере роста контейнера минимальной поддерживаемой пропускной способности также зависит от следующих факторов:

* Максимальный объем в контейнере хранилища измеряется с шагом 40 единиц запросов в ГБ, использованный объем хранилища. Например если контейнер содержит 100 ГБ данных, то пропускная способность необходим по крайней мере 4000 единиц запроса
* Максимальная пропускная способность, когда-либо подготовки в контейнере. Служба поддерживает снижение пропускной способности контейнера на 10% максимального подготовленного. Например если пропускная способность был увеличен до 10000 ЕЗ, то наименьшее возможных подготовленной пропускной способности будет 1000 ЕЗ
* Общее число контейнеров, которые вы уже создавали общей пропускной способности базы данных, измеряется на 100 единиц запроса каждого контейнера. Например если вы создали пять контейнеров в общей пропускной способности базы данных, то пропускная способность необходим по крайней мере 500 ЕЗ

Текущие и минимальное пропускную способность контейнера или базу данных можно получить из портала Azure или пакетов SDK. Дополнительные сведения см. в разделе [Подготовка пропускной способности в контейнерах и базах данных](set-throughput.md). Таким образом Здесь представлены минимальные подготовленных ЕЗ ограничения. 

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Минимальное единиц запроса каждого контейнера ([подготовленной режим выделенной пропускной способностью](databases-containers-items.md#azure-cosmos-containers)) | 400 |
| Минимальное RUs на базу данных ([подготовленной режима общей пропускной способности](databases-containers-items.md#azure-cosmos-containers)) | 400 |
| Минимальное единиц запроса каждого контейнера в общей пропускной способности базы данных | 100 |
| Минимальное RUs в ГБ, использованный объем хранилища | 40 |

Cosmos DB поддерживает гибкое Масштабирование пропускной способности (ru) в контейнер или базу данных с помощью пакетов SDK или портала. Каждый контейнер можно масштабировать синхронно и сразу же в диапазоне 10 до 100 раз между минимальным и максимальным значениями шкалы. Если значение запрошенной пропускной способности находится вне диапазона, масштабирование выполняется асинхронно. Асинхронные масштабирования займет время часов в зависимости от запрошенной пропускной способности и объем хранилища данных в контейнере.  

## <a name="control-plane-operations"></a>Операции уровня управления

Вы можете [подготовки и управления ими в вашей учетной записи Azure Cosmos](how-to-manage-database-account.md) с помощью портала Azure, Azure PowerShell, Azure CLI и шаблонов Azure Resource Manager. В следующей таблице перечислены ограничения для подписки, учетной записи и количество операций.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Учетные записи базы данных в рамках одной подписки | 50 по умолчанию. Может быть увеличен по [подав заявку в службу поддержки Azure](https://docs.microsoft.com/azure/azure-supportability/how-to-create-azure-support-request) или связавшись с нами через [попросите Cosmos DB](mailto:askcosmosdb@microsoft.com)|
| Максимальное число региональной отработки отказа | / час по умолчанию. Может быть увеличен по [подав заявку в службу поддержки Azure](https://docs.microsoft.com/azure/azure-supportability/how-to-create-azure-support-request) или связавшись с нами через [попросите Cosmos DB](mailto:askcosmosdb@microsoft.com)|

> [!NOTE]
> Между регионами применяются только к одной операции записи между регионами. Учетные записи в нескольких регионах записи не требуется и какие-либо ограничения на изменение региона записи.

Cosmos DB автоматически выполняет архивацию данных с регулярными интервалами. Дополнительные сведения о интервалы хранения резервных копий и windows, см. в разделе [оперативная архивация и по запросу данных восстановления в Azure Cosmos DB](online-backup-and-restore.md).

## <a name="per-container-limits"></a>Ограничения на контейнер

В зависимости от того, какие API, который используется контейнер Azure Cosmos можно представлять как коллекцию, таблицу, или graph. Контейнеры поддерживают конфигурации для [ограничения уникального ключа](unique-keys.md), [хранимые процедуры, триггеры и определяемые пользователем функции](stored-procedures-triggers-udfs.md), и [политика индексации](how-to-manage-indexing-policy.md). В следующей таблице перечислены ограничения, относящиеся к конфигурации в контейнере. 

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальная длина имени базы данных или контейнера | 255 |
| Максимальное хранимых процедур на контейнер | 100 <sup>*</sup>|
| Максимальное определяемых пользователем функций на контейнер | 25 <sup>*</sup>|
| Максимальное число путей в политике индексирования| 100 <sup>*</sup>|
| Максимальное число уникальных ключей в контейнере|10 <sup>*</sup>|
| Максимальное количество маршрутов в ограничение уникального ключа|16 <sup>*</sup>|

<sup>*</sup> Любой из этих ограничений-container можно увеличить, обратившись в службу поддержки Azure или обратитесь к нам через [попросите Cosmos DB](mailto:askcosmosdb@microsoft.com).

## <a name="per-item-limits"></a>Ограничения на элемент

В зависимости от того, какие API, который используется элемент Azure Cosmos может представлять либо края в виде графа или документа в коллекции, строки в таблице, или узел. В следующей таблице показаны ограничения каждого элемента в Cosmos DB. 

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальный размер элемента | 2 МБ (UTF-8 длину JSON-представление) |
| Максимальная длина значения ключа секции | 2048 байт |
| Максимальная длина значение идентификатора | 1024 байт |
| Максимальное число свойств каждого элемента | Отсутствуют ограничения |
| Максимальная глубина вложенности | Отсутствуют ограничения |
| Максимальная длина имени свойства | Отсутствуют ограничения |
| Максимальная длина значения свойства | Отсутствуют ограничения |
| Максимальная длина значения свойства строкового типа | Отсутствуют ограничения |
| Максимальная длина значения числового свойства | Двойной точности числа IEEE754 64-разрядная |

Нет ограничений на полезные данные элемента как число свойства и вложенные глубины, за исключением ограничения длины ключа секции и значения идентификаторов и общий размер ограничение 2 МБ. Возможно, для настройки политики индексирования для контейнеров с помощью больших или сложных элементов структуры для снижения потребления ЕЗ. См. в разделе [моделирования элементов в Cosmos DB](how-to-model-partition-example.md) пример реального мира, и шаблоны для крупных элементов управления.

## <a name="per-request-limits"></a>Ограничения по запросу

Cosmos DB поддерживает [операции CRUD и запросов](https://docs.microsoft.com/rest/api/cosmos-db/) от ресурсов, таких как контейнеры, элементы и баз данных.  

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальное время выполнения для отдельной операции (например, выполнение хранимой процедуры или получения одного запроса страницы)| 5 секунд |
| Максимальный размер запроса (хранимая процедура, CRUD)| 2 МБ |
| Максимальный размер ответа (например, с разбиением на страницы запрос) | 4 МБ |

Один раз операции, как запрос до предельного размера выполнения истечения времени ожидания или ответ, он возвращает страницу результатов и маркер продолжения клиенту, чтобы возобновить выполнение. Нет практических ограничений на продолжительность выполнения одного запроса через страницы/продолжения.

Cosmos DB использует HMAC для авторизации. Можно использовать любой главный ключ, или [маркеры ресурсов](secure-access-to-data.md) для детального управления доступом к ресурсам, например контейнеры, секционирование, ключи или элементов. В следующей таблице перечислены ограничения для маркеров проверки подлинности в Cosmos DB.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальное master срок действия токена | 15 мин.  |
| Время истечения срока действия маркера минимальное ресурса | 10 мин  |
| Срок действия токена максимального использования ресурсов | 24 часа по умолчанию. Может быть увеличен по [подав заявку в службу поддержки Azure](https://docs.microsoft.com/azure/azure-supportability/how-to-create-azure-support-request) или связавшись с нами через [попросите Cosmos DB](mailto:askcosmosdb@microsoft.com)|
| Максимальное рассогласование часов для маркера авторизации| 15 мин. |

Cosmos DB поддерживает выполнение триггеров во время операций записи. Служба поддерживает максимум один триггер и один триггер после каждой операции записи. 

## <a name="sql-query-limits"></a>Ограничения запросов SQL

Cosmos DB поддерживает запросы элементов с помощью [SQL](how-to-sql-query.md). Ниже перечислены ограничения в инструкции запроса, например по количеству предложений или длину запроса.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальная длина SQL-запрос| 256 КБ <sup>*</sup>|
| Максимальное соединения каждого запроса| 5 <sup>*</sup>|
| Максимальное запускалась каждого запроса| 2000 <sup>*</sup>|
| Максимальное OR каждого запроса| 2000 <sup>*</sup>|
| Максимальное определяемых пользователем функций в запросе| 10 <sup>*</sup>|
| Максимальное аргументы за в выражении| 6000 <sup>*</sup>|
| Максимальное число точек в многоугольник| 4096 <sup>*</sup>|

<sup>*</sup> Любой из этих ограничений запрос SQL можно увеличить, обратившись в службу поддержки Azure или обратитесь к нам через [попросите Cosmos DB](mailto:askcosmosdb@microsoft.com).

## <a name="mongodb-api-specific-limits"></a>Ограничения определенных API MongoDB

Для приложений, написанных для MongoDB в Cosmos DB поддерживает протокол коммутации MongoDB. Вы можете найти поддерживаемых команд и протокола версий на [возможностей и синтаксиса MongoDB поддерживается](mongodb-feature-support.md).

В следующей таблице перечислены ограничения, относящиеся к поддержка функций MongoDB. Другие ограничения, приведенные для SQL (core) API также применяются к MongoDB API.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Максимальный размер памяти запросов MongoDB | 40 МБ |
| Максимальное время выполнения для операций с MongoDB| 30 с |

## <a name="try-cosmos-db-free-limits"></a>Попробуйте Cosmos DB бесплатные лимиты

В следующей таблице перечислены ограничения для [бесплатная пробная версия Azure Cosmos DB](https://azure.microsoft.com/try/cosmosdb/) пробной версии.

| Ресурс | Ограничение по умолчанию |
| --- | --- |
| Длительность пробной версии | 30 дней (может быть обновлен любое число раз) |
| Максимальное количество контейнеров в рамках одной подписки (SQL, Gremlin, API таблицы) | 1 |
| Максимальное количество контейнеров в рамках одной подписки (MongoDB API) | 3 |
| Максимальная пропускная способность каждого контейнера | 5000 |
| Максимальная пропускная способность каждой общей пропускной способности базы данных | 20 000 |
| Максимальный общий объем хранилища на одну учетную запись | 10 GB |

Попробуйте Cosmos DB поддерживает Глобальное распределение в центральной части США, Северная Европа и Юго-Восточной Азии. Невозможно создать запросы в службу поддержки Azure для учетных записей попробуйте Azure Cosmos DB. Тем не менее поддержка предоставляется подписчикам с имеющимися планами поддержки.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о Cosmos DB ключевые понятия [Глобальное распределение](distribute-data-globally.md) и [секционирование](partitioning-overview.md) и [подготовленной пропускной способности](request-units.md).

Приступая к работе с Azure Cosmos DB, ознакомьтесь с одним из наших кратких руководств:

* [Azure Cosmos DB. Создание веб-приложения API SQL с использованием языка .NET и портала Azure](create-sql-api-dotnet.md)
* [Начало работы с API Azure Cosmos DB для MongoDB](create-mongodb-nodejs.md)
* [Краткое руководство. Создание приложения Cassandra с помощью .NET и Azure Cosmos DB](create-cassandra-dotnet.md)
* [Начало работы с API Gremlin в Azure Cosmos DB](create-graph-dotnet.md)
* [Краткое руководство. Создание приложения API таблицы с помощью .NET и Azure Cosmos DB](create-table-dotnet.md)

> [!div class="nextstepaction"]
> [Бесплатная пробная версия Azure Cosmos DB](https://azure.microsoft.com/try/cosmosdb/)
