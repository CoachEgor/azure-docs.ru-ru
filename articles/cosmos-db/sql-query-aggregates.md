---
title: Агрегатные функции в Azure Cosmos DB
description: Дополнительные сведения о синтаксисе агрегатных функций SQL для Azure Cosmos DB.
author: markjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 05/31/2019
ms.author: mjbrown
ms.openlocfilehash: a6937e9e811ea8e44eda6f2bcb5d2c7d78db4934
ms.sourcegitcommit: a12b2c2599134e32a910921861d4805e21320159
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/24/2019
ms.locfileid: "67342814"
---
# <a name="aggregate-functions-in-azure-cosmos-db"></a>Агрегатные функции в Azure Cosmos DB

Агрегатные функции выполняют вычисление на наборе значений в предложении SELECT и возвращают одиночное значение. Например, следующий запрос возвращает количество элементов в пределах `Families` контейнера:

## <a name="examples"></a>Примеры

```sql
    SELECT COUNT(1)
    FROM Families f
```

Получаются такие результаты:

```json
    [{
        "$1": 2
    }]
```

Можно также возвращать только скалярное значение, агрегатной функции с помощью ключевого слова значение. Например следующий запрос возвращает число значений как одно число:

```sql
    SELECT VALUE COUNT(1)
    FROM Families f
```

Получаются такие результаты:

```json
    [ 2 ]
```

Можно также объединять агрегаты с фильтрами. Например, следующий запрос возвращает количество элементов с состоянием адрес `WA`.

```sql
    SELECT VALUE COUNT(1)
    FROM Families f
    WHERE f.address.state = "WA"
```

Получаются такие результаты:

```json
    [ 1 ]
```

## <a name="types-of-aggregate-functions"></a>Типы агрегатных функций

SQL API поддерживает следующие агрегатные функции. SUM и AVG работают с числовыми значениями и COUNT, MIN и MAX работать на числа, строки, логические значения и значения NULL.

| Функция | Описание |
|-------|-------------|
| COUNT | Возвращает число элементов в выражении. |
| SUM   | Возвращает сумму всех элементов в выражении. |
| MIN   | Возвращает минимальное значение в выражении. |
| MAX   | Возвращает максимальное значение в выражении. |
| AVG   | Возвращает среднее арифметическое значений в выражении. |

Можно также объединить над результатом итерации массива.

> [!NOTE]
> В обозревателе данных на портале Azure статистических запросов может выполняться статистическое вычисление частичные результаты на странице только один запрос. Пакет SDK создает одно совокупное значение для всех страниц. Для выполнения статистических запросов с помощью кода, необходимо .NET SDK 1.12.0, пакет SDK для .NET Core 1.1.0 или пакета SDK для Java версии 1.9.5 или выше.

## <a name="next-steps"></a>Дальнейшие действия

- [Знакомство со службой Azure Cosmos DB. API DocumentDB](introduction.md)
- [Системные функции](sql-query-system-functions.md)
- [Определяемые пользователем функции](sql-query-udfs.md)