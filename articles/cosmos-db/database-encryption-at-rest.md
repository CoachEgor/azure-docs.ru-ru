---
title: Шифрование неактивных данных в Azure Cosmos DB
description: Узнайте, как Azure Cosmos DB обеспечивает шифрование неактивных данных и как реализовать его.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 05/23/2019
ms.custom: seodec18
ms.openlocfilehash: db20388b5277e000ffe7055e9840742d6af7788e
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80062603"
---
# <a name="data-encryption-in-azure-cosmos-db"></a>Шифрование данных в Azure Cosmos DB 

При шифровании неактивных данных обычно шифруются данные на устройствах долговременного хранения, например твердотельных накопителях (SSD) и жестких дисках (HDD). Основные базы данных хранятся в Cosmos DB на твердотельных накопителях. Мультимедийные вложения и резервные копии хранятся в хранилище BLOB-объектов Azure, как правило, на основе жестких дисков. С реализацией возможности шифрования неактивных данных Cosmos DB вы можете шифровать все базы данных, мультимедийные вложения и резервные копии. Шифруются как передаваемые данные (по сети), так и неактивные (долговременное хранение), обеспечивая непрерывное шифрование.

Решение Cosmos DB, которое является службой PaaS, очень просто в использовании. Так как все данные пользователей, хранящиеся в Cosmos DB, шифруются как при хранении, так и при передаче, не нужно предпринимать никаких действий. Другими словами, шифрование неактивных данных включено по умолчанию. Элементов управления для его включения и отключения нет. Azure Cosmos DB использует шифрование AES-256 во всех регионах, где работает учетная запись. Мы предоставляем эту функцию в соответствии с нашими [соглашениями об уровне обслуживания в отношении доступности и производительности](https://azure.microsoft.com/support/legal/sla/cosmos-db).

## <a name="implementation-of-encryption-at-rest-for-azure-cosmos-db"></a>Реализация шифрования при хранении для Azure Cosmos DB

Шифрование неактивных данных реализуется с применением различных технологий обеспечения безопасности, включая безопасные системы хранения ключей, зашифрованные сети и криптографические API. Системы расшифровки и обработки данных должны взаимодействовать с системами управления ключами. На схеме показано, как разделено хранение зашифрованных данных и управление ключами. 

![Схема структуры](./media/database-encryption-at-rest/design-diagram.png)

Запрос пользователя выполняется и обрабатывается следующим образом:
- Учетная запись базы данных пользователя подготавливается, а ключи к хранилищу данных извлекаются по запросу к поставщику ресурсов службы управления.
- Пользователь создает подключение к Cosmos DB с помощью протокола HTTPS или безопасного транспортного протокола. (Пакеты SDK абстрагируют подробные сведения.)
- Пользователь отправляет документ JSON для сохранения, используя ранее созданное безопасное подключение.
- Документ JSON индексируется, если пользователь не отключил эту возможность.
- Документ JSON и данные индекса записываются в безопасное хранилище.
- Время от времени данные считываются из безопасного хранилища и архивируются в зашифрованное хранилище BLOB-объектов Azure.

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

### <a name="q-how-much-more-does-azure-storage-cost-if-storage-service-encryption-is-enabled"></a>Вопрос. Насколько дороже обходится служба хранилища Azure с включенным шифрованием службы хранилища?
Ответ. Дополнительные затраты не требуются.

### <a name="q-who-manages-the-encryption-keys"></a>Вопрос. Кто управляет ключами шифрования?
Ответ. Ключами управляет корпорация Майкрософт.

### <a name="q-how-often-are-encryption-keys-rotated"></a>Вопрос. Как часто меняются ключи шифрования?
Ответ. В корпорации Майкрософт есть ряд внутренних правил касательно смены ключей шифрования, которым следует Cosmos DB. Эти правила не публикуются. Однако корпорация Майкрософт публикует [жизненный цикл разработки защищенных приложений (SDL)](https://www.microsoft.com/sdl/default.aspx), который представляет собой часть внутренних рекомендаций и содержит полезные указания для разработчиков.

### <a name="q-can-i-use-my-own-encryption-keys"></a>Вопрос. Можно ли использовать собственные ключи шифрования?
Ответ: Да, теперь эта функция доступна для новых космических счетов, и это должно быть сделано во время создания учетной записи. Для получения дополнительной информации, пожалуйста, перейдите через [документ, управляемый клиентами keys.](https://docs.microsoft.com/azure/cosmos-db/how-to-setup-cmk)

### <a name="q-what-regions-have-encryption-turned-on"></a>Вопрос. В каких регионах включено шифрование?
Ответ. Шифрование пользовательских данных включено во всех регионах Azure Cosmos DB.

### <a name="q-does-encryption-affect-the-performance-latency-and-throughput-slas"></a>Вопрос. Влияет ли шифрование на пропускную способность и задержку производительности, определенные соглашениями об уровне обслуживания?
Ответ. Нет, не влияет, так как шифрование при хранении включено для всех имеющихся или новых учетных записей. Дополнительные сведения об актуальных гарантиях см. на странице [соглашения об уровне обслуживания для Cosmos DB](https://azure.microsoft.com/support/legal/sla/cosmos-db).

### <a name="q-does-the-local-emulator-support-encryption-at-rest"></a>Вопрос. Поддерживает ли локальный эмулятор шифрование при хранении?
Ответ. Эмулятор — это изолированное средство разработки и тестирования, которое не использует службы управления ключами, применяемые управляемой службой Cosmos DB. Мы советуем включить BitLocker на дисках, где хранятся конфиденциальные тестовые данные эмулятора. [Эмулятор поддерживает изменение каталога данных по умолчанию](local-emulator.md), а также использование известного расположения.

## <a name="next-steps"></a>Дальнейшие действия

Для получения обзора безопасности Cosmos DB и последних улучшений [см.](database-security.md)
Дополнительные сведения о сертификатах Майкрософт см. в [центре управления безопасностью Azure](https://azure.microsoft.com/support/trust-center/).
