---
title: Секционирование и горизонтальное масштабирование в Azure Cosmos DB
description: Узнайте о том, как работает раздел в Azure Cosmos DB, как настроить клавиши раздела и раздела, а также как выбрать правильный ключ раздела для приложения.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 08/01/2019
ms.openlocfilehash: cbd171e10cc1a8b27de98d9d4d779f345ac5a3ed
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79246621"
---
# <a name="partitioning-and-horizontal-scaling-in-azure-cosmos-db"></a>Секционирование и горизонтальное масштабирование в Azure Cosmos DB

В этой статье объясняются физические и логические секции в Azure Cosmos DB. Здесь также обсуждаются рекомендации по масштабированию и секционированию. 

## <a name="logical-partitions"></a>Логические секции

Логический раздел состоит из набора элементов, которые имеют тот же ключ раздела. Например, в контейнере, где `City` все элементы `City` содержат свойство, можно использовать в качестве ключа раздела для контейнера. Группы элементов, которые `City`имеют определенные значения для, таких как, `London` `Paris`и `NYC`, образуют различные логические разделы. Вам не придется беспокоиться об удалении раздела при удалении базовых данных.

В Azure Cosmos DB контейнер — это фундаментальная единица масштабируемости. Данные, добавленные в контейнер, и пропускная емкость, которую вы предоставляете в контейнере, автоматически (горизонтально) разбираются в наборе логических разделов. Данные и пропускная емкость разделены на основе ключа раздела, указанного для контейнера Azure Cosmos. Для получения дополнительной информации [см.](how-to-create-container.md)

Логический раздел также определяет область транзакций баз данных. Вы можете обновить элементы в логическом разделе с помощью [транзакции с изоляцией моментального снимка.](database-transactions-optimistic-concurrency.md) При добавлении новых элементов в контейнер системы прозрачно создаются новые логические разделы.

## <a name="physical-partitions"></a>Физические секции

Контейнер Azure Cosmos масштабируется путем распространения данных и пропускной их пропускной состава по большому количеству логических разделов. Внутренне один или несколько логических разделов отображаются в физическом разделе, который состоит из набора реплик, также именуемых [*набором реплик.*](global-dist-under-the-hood.md) Каждый набор реплик размещает экземпляр движка базы данных Azure Cosmos. Набор реплик делает данные, хранящиеся в физическом разделении, долговечными, высокодоступными и согласованными. Физическая перегородка поддерживает максимальное количество единиц хранения и запроса (RUs). Каждая реплика, соприминое физическую перегородку, наследует квоту хранения раздела. Все реплики физического раздела коллективно поддерживают пропускную схему, выделенную для физического раздела. 

На следующем рисунке показано, как логические секции сопоставляются с физическими, которые распределяются глобально:

![Изображение, демонстрирующее раздел Azure Cosmos DB](./media/partition-data/logical-partitions.png)

Пропускная часть контейнера равномерно делится между физическими перегородками. Конструкция ключа раздела, которая не распределяет запросы пропускной документации равномерно, может создать "горячие" разделы. Горячие разделы могут привести к ограничению скорости и неэффективному использованию предусмотренной пропускной связи и более высоким затратам.

В отличие от логических, физические секции являются внутренней реализацией системы. Вы не можете контролировать размер, размещение или количество физических разделов, и вы не можете контролировать отображение между логическими разделами и физическими разделами. Однако можно контролировать количество логических разделов и распределение данных, рабочую нагрузку и пропускную стоимость, [выбирая правильный ключ логического раздела.](partitioning-overview.md#choose-partitionkey)

## <a name="next-steps"></a>Дальнейшие действия

* Подробнее о [выборе ключа раздела.](partitioning-overview.md#choose-partitionkey)
* Узнайте о [прописной пропускной перевалке в Azure Cosmos DB](request-units.md).
* Узнайте о [глобальном дистрибуции в Azure Cosmos DB](distribute-data-globally.md).
* Подробнее о [подготовке пропускной способности для контейнера Azure Cosmos](how-to-provision-container-throughput.md).
* Подробнее о [подготовке пропускной способности для базы данных Azure Cosmos](how-to-provision-database-throughput.md).
