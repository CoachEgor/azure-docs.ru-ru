---
title: Параметры миграции Cosmos DB
description: В этом документе описываются различные варианты переноса локальных или облачных данных в Azure Cosmos DB
author: SnehaGunda
ms.author: sngun
ms.service: cosmos-db
ms.topic: how-to
ms.date: 10/23/2019
ms.openlocfilehash: a1b8ddba84920d8d3b6871ab404081d3b24c72e1
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "85261976"
---
# <a name="options-to-migrate-your-on-premises-or-cloud-data-to-azure-cosmos-db"></a>Параметры для переноса локальных или облачных данных в Azure Cosmos DB

Можно загружать данные из различных источников данных в Azure Cosmos DB. Кроме того, поскольку Azure Cosmos DB поддерживает несколько интерфейсов API, целевыми объектами могут быть любые существующие API. Для поддержки путей перехода из различных источников в различные Azure Cosmos DB API существует несколько решений, которые обеспечивают специализированную обработку для каждого пути переноса. В этом документе перечислены доступные решения и описаны их преимущества и ограничения.

## <a name="factors-affecting-the-choice-of-migration-tool"></a>Факторы, влияющие на выбранный инструмент миграции

Выбор средства миграции определяется следующими факторами.
* **Интерактивная и автономная миграция**. Многие средства миграции предоставляют путь для однократной миграции. Это означает, что приложения, обращающиеся к базе данных, могут столкнуться с периодом простоя. Некоторые решения по переносу позволяют выполнять динамическую миграцию, когда между источником и целевым объектом устанавливается конвейер репликации.

* **Источник данных**. существующие данные могут находиться в различных источниках данных, таких как Oracle DB2, Datastax Кассанда, база данных SQL Azure, PostgreSQL и т. д. Данные могут также находиться в существующей учетной записи Azure Cosmos DB и цель миграции — изменить модель данных или выполнить секционирование данных в контейнере с помощью другого ключа секции.

* **Azure Cosmos DB API**: для API SQL в Azure Cosmos DB существует множество средств, разработанных группой Azure Cosmos DB, которые помогают в различных сценариях миграции. Все остальные API-интерфейсы имеют собственный специализированный набор инструментов, разработанных и обслуживаемых сообществом. Поскольку Azure Cosmos DB поддерживает эти API на уровне кабельного протокола, эти средства должны работать как есть во время переноса данных в Azure Cosmos DB. Однако они могут потребовать настраиваемой обработки для регулирования, так как эта концепция характерна для Azure Cosmos DB.

* **Размер данных**. Большинство средств миграции очень хорошо работает для небольших DataSet. Если набор данных превышает несколько сотен гигабайт, выбор средств миграции ограничен. 

* **Ожидаемая длительность миграции**. миграцию можно настроить так, чтобы она настроилась в заданный период времени, который потребляет меньше пропускной способности или может использовать всю пропускную способность, подготовленную в целевом контейнере Azure Cosmos DB, и выполнить миграцию за меньшее время.

## <a name="azure-cosmos-db-sql-api"></a>API SQL для Azure Cosmos DB
|**Тип переноса**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Вне сети|[Инструмент переноса данных](https://docs.microsoft.com/azure/cosmos-db/import-data)|&bull; Простота настройки и поддержка нескольких источников. <br/>&bull;Не подходит для больших наборов данных|
|Вне сети|[Фабрика данных Azure](https://docs.microsoft.com/azure/data-factory/connector-azure-cosmos-db).|&bull; Простота настройки и поддержка нескольких источников. <br/>&bull; Использует библиотеку исполнителя массовых операций в Azure Cosmos DB. <br/>&bull; Подходит для больших наборов данных. <br/>&bull;Отсутствие контрольных точек — это означает, что если проблема возникает во время миграции, необходимо перезапустить весь процесс миграции.<br/>&bull;Отсутствие очереди недоставленных сообщений — это означает, что несколько ошибочных файлов могут прерывать весь процесс миграции.|
|Вне сети|[Соединитель Azure Cosmos DB Spark](https://docs.microsoft.com/azure/cosmos-db/spark-connector)|&bull; Использует библиотеку исполнителя массовых операций в Azure Cosmos DB. <br/>&bull; Подходит для больших наборов данных. <br/>&bull;Требуется пользовательская установка Spark <br/>&bull;Spark учитывает несоответствия схем, и это может быть проблемой во время миграции |
|Вне сети|[Пользовательский инструмент с библиотекой Cosmos DBного выполнителя](https://docs.microsoft.com/azure/cosmos-db/migrate-cosmosdb-data)|&bull;Предоставляет возможности создания контрольных точек, недоставленных сообщений, что повышает устойчивость к миграции <br/>&bull;Подходит для очень больших наборов данных (10 ТБ +)  <br/>&bull;Требует, чтобы пользовательская установка этого средства выполнялась как служба приложений |
|Справка в Интернете|[Функции Cosmos DB и API пр](https://docs.microsoft.com/azure/cosmos-db/change-feed-functions)|&bull;Простота настройки <br/>&bull;Работает только в том случае, если источником является контейнер Azure Cosmos DB <br/>&bull;Не подходит для больших наборов данных <br/>&bull;Не собирает удаления из исходного контейнера |
|Справка в Интернете|[Настраиваемая служба миграции с использованием пр](https://github.com/nomiero/CosmosDBLiveETLSample)|&bull;Обеспечивает отслеживание хода выполнения <br/>&bull;Работает только в том случае, если источником является контейнер Azure Cosmos DB <br/>&bull;Работает также с большими наборами данных <br/>&bull;Требует, чтобы пользователь настроил службу приложений для размещения обработчика веб-канала изменений <br/>&bull;Не собирает удаления из исходного контейнера|
|Справка в Интернете|[стриим](https://docs.microsoft.com/azure/cosmos-db/cosmosdb-sql-api-migrate-data-striim)|&bull;Работает с большим разнообразием источников, таких как Oracle, DB2 SQL Server <br/>&bull;Простота построения конвейеров ETL и предоставление панели мониторинга для мониторинга <br/>&bull;Поддерживает большие наборы данных <br/>&bull;Поскольку это средство стороннего производителя, оно должно быть приобретено в Marketplace и установлено в среде пользователя.|

## <a name="azure-cosmos-db-mongo-api"></a>Azure Cosmos DB API Mongo
|**Тип переноса**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Вне сети|[Инструмент переноса данных](https://docs.microsoft.com/azure/cosmos-db/import-data)|&bull; Простота настройки и поддержка нескольких источников. <br/>&bull;Не подходит для больших наборов данных|
|Вне сети|[Фабрика данных Azure](https://docs.microsoft.com/azure/data-factory/connector-azure-cosmos-db).|&bull; Простота настройки и поддержка нескольких источников. <br/>&bull; Использует библиотеку исполнителя массовых операций в Azure Cosmos DB. <br/>&bull; Подходит для больших наборов данных. <br/>&bull; Отсутствие контрольных точек означает, что любые проблемы во время переноса потребуют перезапуска всего процесса.<br/>&bull; Отсутствие очереди недоставленных сообщений означает, что несколько ошибочных файлов могут прервать весь процесс переноса. <br/>&bull; Требуется пользовательский код для увеличения пропускной способности чтения для определенных источников данных.|
|Вне сети|[Существующие инструменты Mongo (mongodump, mongorestore, Studio3T)](https://azure.microsoft.com/resources/videos/using-mongodb-tools-with-azure-cosmos-db/)|&bull; Простота настройки и интеграции. <br/>&bull; Требуется настраиваемая обработка регулирования.|
|Справка в Интернете|[Azure Database Migration Service](https://docs.microsoft.com/azure/dms/tutorial-mongodb-cosmos-db-online)|&bull; Использует библиотеку исполнителя массовых операций в Azure Cosmos DB. <br/>&bull; Подходит для больших наборов данных и выполняет репликацию динамических изменений. <br/>&bull; Работает только с другими источниками MongoDB.|

## <a name="azure-cosmos-db-cassandra-api"></a>API Cassandra для Azure Cosmos DB
|**Тип переноса**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Вне сети|[cqlsh COPY, команда](https://docs.microsoft.com/azure/cosmos-db/cassandra-import-data#migrate-data-using-cqlsh-copy-command)|&bull;Простота настройки <br/>&bull;Не подходит для больших наборов данных <br/>&bull;Работает, только если источником является таблица Cassandra|
|Вне сети|[Копирование таблицы с помощью Spark](https://docs.microsoft.com/azure/cosmos-db/cassandra-import-data#migrate-data-using-spark) |&bull;Может использовать возможности Spark для параллельного преобразования и приема <br/>&bull;Требуется конфигурация с пользовательской политикой повтора для управления регулированием|
|Справка в Интернете|[Стриим (из Oracle DB или Apache Cassandra)](https://docs.microsoft.com/azure/cosmos-db/cosmosdb-cassandra-api-migrate-data-striim)|&bull;Работает с большим разнообразием источников, таких как Oracle, DB2 SQL Server <br/>&bull;Простота построения конвейеров ETL и предоставление панели мониторинга для мониторинга <br/>&bull;Поддерживает большие наборы данных <br/>&bull;Поскольку это средство стороннего производителя, оно должно быть приобретено в Marketplace и установлено в среде пользователя.|
|Справка в Интернете|[Блитзз (из Oracle DB или Apache Cassandra)](https://docs.microsoft.com/azure/cosmos-db/oracle-migrate-cosmos-db-blitzz)|<br/>&bull;Поддерживает большие наборы данных <br/>&bull;Поскольку это средство стороннего производителя, оно должно быть приобретено в Marketplace и установлено в среде пользователя.|

## <a name="other-apis"></a>Other APIs
Для API-интерфейсов, отличных от API SQL, Mongo API и API Cassandra, существуют различные средства, поддерживаемые всеми экосистемами API. 

**API таблицы**; 
* [Инструмент переноса данных](https://docs.microsoft.com/azure/cosmos-db/table-import#data-migration-tool)
* [AzCopy](https://docs.microsoft.com/azure/cosmos-db/table-import#migrate-data-by-using-azcopy)

**API Gremlin**;
* [Библиотека массовых исполнителей Graph](https://docs.microsoft.com/azure/cosmos-db/bulk-executor-graph-dotnet)
* [Gremlin Spark](https://github.com/Azure/azure-cosmosdb-spark/blob/2.4/samples/graphframes/main.scala) 

## <a name="next-steps"></a>Дальнейшие шаги

* Дополнительные сведения см. в примерах приложений, использующих библиотеку небольшого выполнителя в [.NET](bulk-executor-dot-net.md) и [Java](bulk-executor-java.md). 
* Библиотека небольшого Исполнительного исполнителя интегрирована в соединитель Cosmos DB Spark. Дополнительные сведения см. в статье о [соединителе Azure Cosmos DB Spark](spark-connector.md) .  
* Обратитесь к группе разработчиков Azure Cosmos DB, открыв запрос в службу поддержки в подтипе проблем "Общие рекомендации" и "крупные (ТБ +) миграции" для получения дополнительной справки о крупномасштабных миграциях.
