---
title: Параметры миграции Cosmos DB
description: В этом документе описываются различные варианты переноса локальных или облачных данных в Azure Cosmos DB
author: bharathsreenivas
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 10/03/2019
ms.author: bharathb
ms.openlocfilehash: 0a2423421c6dfda02646546a6e071c8c78396f2c
ms.sourcegitcommit: aef6040b1321881a7eb21348b4fd5cd6a5a1e8d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2019
ms.locfileid: "72170689"
---
# <a name="options-to-migrate-your-on-premises-or-cloud-data-to-azure-cosmos-db"></a>Параметры для переноса локальных или облачных данных в Azure Cosmos DB

Можно загружать данные из различных источников данных в Azure Cosmos DB. Кроме того, поскольку Azure Cosmos DB поддерживает несколько интерфейсов API, целевыми объектами могут быть любые существующие API. Для поддержки путей перехода из различных источников в различные Azure Cosmos DB API существует несколько решений, которые обеспечивают специализированную обработку для каждого пути переноса. В этом документе перечислены доступные решения и описаны их преимущества и ограничения.

## <a name="factors-affecting-the-choice-of-migration-tool"></a>Факторы, влияющие на выбранный инструмент миграции

Выбор средства миграции определяется следующими факторами.
* **Оперативная миграция VS**: Многие средства миграции предоставляют путь для однократной миграции. Это означает, что приложения, обращающиеся к базе данных, могут столкнуться с периодом простоя. Некоторые решения по переносу позволяют выполнять динамическую миграцию, когда между источником и целевым объектом устанавливается конвейер репликации.

* **Источник данных**: Существующие данные могут находиться в различных источниках данных, таких как Oracle DB2, Datastax Кассанда, Azure SQL Server, PostgreSQL и т. д. Данные могут также находиться в существующей учетной записи Azure Cosmos DB и цель миграции — изменить модель данных или выполнить секционирование данных в контейнере с помощью другого ключа секции.

* **Azure Cosmos DB API**: Для API SQL в Azure Cosmos DB существует множество средств, разработанных группой Azure Cosmos DB, которые помогают в различных сценариях миграции. Все остальные API-интерфейсы имеют собственный специализированный набор инструментов, разработанных и обслуживаемых сообществом. Поскольку Azure Cosmos DB поддерживает эти API на уровне кабельного протокола, эти средства должны работать как есть во время переноса данных в Azure Cosmos DB. Однако они могут потребовать настраиваемой обработки для регулирования, так как эта концепция характерна для Azure Cosmos DB.

* **Размер данных**: Большинство средств миграции очень хорошо работает для небольших наборов данных. Если набор данных превышает несколько сотен гигабайт, выбор средств миграции ограничен. 

* **Ожидаемая длительность миграции**: Миграцию можно настроить так, чтобы она настроилась в заданный период, который потребляет меньше пропускной способности или может использовать всю пропускную способность, подготовленную в целевом контейнере Azure Cosmos DB, и выполнить миграцию меньше времени.

## <a name="azure-cosmos-db-sql-api"></a>API SQL для Azure Cosmos DB
|**Тип миграции**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Автономно|[Средство переноса данных](https://docs.microsoft.com/azure/cosmos-db/import-data)|&bull; Простая настройка и поддержка нескольких источников <br/>&bull; не подходит для больших наборов данных|
|Автономно|[Фабрика данных Azure](https://docs.microsoft.com/azure/data-factory/connector-azure-cosmos-db)|&bull; Простая настройка и поддержка нескольких источников <br/>&bull; — использование Azure Cosmos DB библиотеки небольшого выполнителя <br/>&bull; подходит для больших наборов данных <br/>&bull; отсутствие контрольных точек — это означает, что если проблема возникает во время миграции, необходимо перезапустить весь процесс миграции.<br/>&bull; отсутствует очередь недоставленных сообщений — это означает, что несколько ошибочных файлов могут прерывать весь процесс миграции.|
|Автономно|[Соединитель Azure Cosmos DB Spark](https://docs.microsoft.com/azure/cosmos-db/spark-connector)|&bull; — использование Azure Cosmos DB библиотеки небольшого выполнителя <br/>&bull; подходит для больших наборов данных <br/>&bull; требуется пользовательская установка Spark <br/>&bull; Spark чувствительна к несогласованности схемы, и это может стать проблемой во время миграции |
|Автономно|[Пользовательский инструмент с библиотекой Cosmos DBного выполнителя](https://docs.microsoft.com/azure/cosmos-db/migrate-cosmosdb-data)|&bull; предоставляет возможности создания контрольных точек, недоставленных сообщений, что повышает устойчивость к миграции <br/>&bull; подходит для очень больших наборов данных (10 ТБ +)  <br/>&bull; требует, чтобы пользовательская установка этого средства выполнялась как служба приложений. |
|В сети|[Функции Cosmos DB и API пр](https://docs.microsoft.com/azure/cosmos-db/change-feed-functions)|&bull; Простая настройка <br/>&bull; работает только в том случае, если источником является Azure Cosmos DB контейнер <br/>&bull; не подходит для больших наборов данных <br/>&bull; не собирает удаления из исходного контейнера |
|В сети|[Настраиваемая служба миграции с использованием пр](https://aka.ms/CosmosDBMigrationSample)|&bull; обеспечивает отслеживание хода выполнения <br/>&bull; работает только в том случае, если источником является Azure Cosmos DB контейнер <br/>&bull; работает также для больших наборов данных. <br/>&bull; требует, чтобы пользователь настроил службу приложений для размещения обработчика веб-канала изменений. <br/>&bull; не собирает удаления из исходного контейнера|
|В сети|[стриим](https://docs.microsoft.com/azure/cosmos-db/cosmosdb-sql-api-migrate-data-striim)|&bull; работает с большим разнообразием источников, таких как Oracle, DB2, SQL Server <br/>&bull; — простое создание конвейеров ETL и предоставление панели мониторинга для мониторинга <br/>&bull; поддерживает большие наборы данных <br/>&bull;, поскольку это средство стороннего производителя, оно должно быть приобретено в Marketplace и установлено в среде пользователя.|

## <a name="azure-cosmos-db-mongo-api"></a>Azure Cosmos DB API Mongo
|**Тип миграции**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Автономно|[Средство переноса данных](https://docs.microsoft.com/azure/cosmos-db/import-data)|&bull; Простая настройка и поддержка нескольких источников <br/>&bull; не подходит для больших наборов данных|
|Автономно|[Фабрика данных Azure](https://docs.microsoft.com/azure/data-factory/connector-azure-cosmos-db)|&bull; Простая настройка и поддержка нескольких источников <br/>&bull; — использование Azure Cosmos DB библиотеки небольшого выполнителя <br/>&bull; подходит для больших наборов данных <br/>&bull; отсутствие контрольных точек означает, что все проблемы во время миграции потребуют перезапуска всего процесса миграции.<br/>&bull; недостаток очереди недоставленных сообщений означает, что несколько ошибочных файлов могут прерывать весь процесс миграции. <br/>&bull; требуется пользовательский код для увеличения пропускной способности чтения для определенных источников данных|
|Автономно|[Существующие средства Mongo (монгодумп, mongorestore, Studio3T)](https://azure.microsoft.com/resources/videos/using-mongodb-tools-with-azure-cosmos-db/)|&bull; — простота настройки и интеграции <br/>&bull; требуется настраиваемая обработка для регулирования|
|В сети|[Azure Database Migration Service](https://docs.microsoft.com/azure/dms/tutorial-mongodb-cosmos-db-online)|&bull; — использование Azure Cosmos DB библиотеки небольшого выполнителя <br/>&bull; подходит для больших наборов данных и отвечает за репликацию динамических изменений <br/>&bull; работает только с другими источниками MongoDB|

## <a name="azure-cosmos-db-cassandra-api"></a>API Cassandra для Azure Cosmos DB
|**Тип миграции**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Автономно|[cqlsh COPY, команда](https://docs.microsoft.com/azure/cosmos-db/cassandra-import-data#migrate-data-using-cqlsh-copy-command)|&bull; Простая настройка <br/>&bull; не подходит для больших наборов данных <br/>&bull; работает только в том случае, если источником является таблица Cassandra|
|Автономно|[Копирование таблицы с помощью Spark](https://docs.microsoft.com/azure/cosmos-db/cassandra-import-data#migrate-data-using-spark) |&bull; может использовать возможности Spark для параллельного преобразования и приема <br/>&bull; требуется конфигурация с пользовательской политикой повтора для управления регулированием.|
|В сети|[Стриим (из Oracle DB или Apache Cassandra)](https://docs.microsoft.com/azure/cosmos-db/cosmosdb-cassandra-api-migrate-data-striim)|&bull; работает с большим разнообразием источников, таких как Oracle, DB2, SQL Server <br/>&bull; — простое создание конвейеров ETL и предоставление панели мониторинга для мониторинга <br/>&bull; поддерживает большие наборы данных <br/>&bull;, поскольку это средство стороннего производителя, оно должно быть приобретено в Marketplace и установлено в среде пользователя.|
|В сети|[Блитзз (из Oracle DB или Apache Cassandra)](https://docs.microsoft.com/azure/cosmos-db/oracle-migrate-cosmos-db-blitzz)|<br/>&bull; поддерживает большие наборы данных <br/>&bull;, поскольку это средство стороннего производителя, оно должно быть приобретено в Marketplace и установлено в среде пользователя.|

## <a name="other-apis"></a>Другие API
Для API-интерфейсов, отличных от API SQL, Mongo API и API Cassandra, существуют различные средства, поддерживаемые всеми экосистемами API. 

**API таблицы**; 
* [Средство переноса данных](https://docs.microsoft.com/azure/cosmos-db/table-import#data-migration-tool)
* [AzCopy](https://docs.microsoft.com/azure/cosmos-db/table-import#migrate-data-by-using-azcopy)

**API Gremlin**;
* [Библиотека массовых исполнителей Graph](https://docs.microsoft.com/azure/cosmos-db/bulk-executor-graph-dotnet)
* [Gremlin Spark](https://github.com/Azure/azure-cosmosdb-spark/blob/2.4/samples/graphframes/main.scala) 

## <a name="next-steps"></a>Следующие шаги

* Дополнительные сведения см. в примерах приложений, использующих библиотеку небольшого выполнителя в [.NET](bulk-executor-dot-net.md) и [Java](bulk-executor-java.md). 
* Библиотека небольшого Исполнительного исполнителя интегрирована в соединитель Cosmos DB Spark. Дополнительные сведения см. в статье о [соединителе Azure Cosmos DB Spark](spark-connector.md) .  
* Обратитесь к группе разработчиков Azure Cosmos DB, открыв запрос в службу поддержки в подтипе проблем "Общие рекомендации" и "крупные (ТБ +) миграции" для получения дополнительной справки о крупномасштабных миграциях. 
* Используйте [программу Cosmos DB начальной загрузки](https://azurecosmosdb.github.io/CosmosBootstrap/) для ускорения сборки или переноса приложений на Azure Cosmos DB.

> [!div class="nextstepaction"]
> [Программа начальной загрузки Cosmos DB](https://azurecosmosdb.github.io/CosmosBootstrap/)
