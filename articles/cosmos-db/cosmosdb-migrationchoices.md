---
title: Варианты миграции Космос DB
description: Этот документ описывает различные варианты переноса данных на местах или в облаке в Azure Cosmos DB
author: bharathsreenivas
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 10/23/2019
ms.author: bharathb
ms.openlocfilehash: 34698a215477abdd7d68c3dfe050657ecf049690
ms.sourcegitcommit: 7d8158fcdcc25107dfda98a355bf4ee6343c0f5c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2020
ms.locfileid: "80984901"
---
# <a name="options-to-migrate-your-on-premises-or-cloud-data-to-azure-cosmos-db"></a>Варианты переноса внутренних или облачных данных в Azure Cosmos DB

Данные можно загрузить из различных источников данных в Azure Cosmos DB. Кроме того, поскольку Azure Cosmos DB поддерживает несколько AA, целями могут быть любые из существующих AAP. Для поддержки путей миграции из различных источников в различные AAP Azure Cosmos DB существует несколько решений, которые обеспечивают специализированную обработку для каждого пути миграции. В этом документе перечислены доступные решения и описаны их преимущества и ограничения.

## <a name="factors-affecting-the-choice-of-migration-tool"></a>Факторы, влияющие на выбор инструмента миграции

Выбор миграционного инструмента определяются следующими факторами:
* **Онлайн против автономной миграции**: Многие инструменты миграции обеспечивают путь, чтобы сделать только одноразовую миграцию. Это означает, что приложения, обращающиеся к базе данных, могут испытывать время простоя. Некоторые решения миграции предоставляют способ сделать живую миграцию, когда между источником и целью установлен конвейер репликации.

* **Источник данных**: Существующие данные могут быть в различных источниках данных, таких как Oracle DB2, Datastax Cassanda, Azure S'L Server, PostgreS'L и т.д. Данные также могут быть в существующей учетной записи Azure Cosmos DB, и целью миграции может быть изменение модели данных или передел данных в контейнере с другим ключом раздела.

* **API Azure Cosmos DB:** Для API СЗЛ в Azure Cosmos DB существует множество инструментов, разработанных командой Azure Cosmos DB, которые помогают в различных сценариях миграции. Все остальные AA имеют свой собственный специализированный набор инструментов, разработанных и поддерживаемых сообществом. Поскольку Azure Cosmos DB поддерживает эти AI на уровне протокола проводов, эти инструменты должны работать как-то во время миграции данных в Azure Cosmos DB. Тем не менее, они могут потребовать пользовательской обработки для дроссельной заслонки, поскольку эта концепция специфична для Azure Cosmos DB.

* **Размер данных**: Большинство инструментов миграции очень хорошо работают для небольших наборов данных. Когда набор данных превышает несколько сотен гигабайт, выбор инструментов миграции ограничен. 

* **Ожидаемая продолжительность миграции:** Миграции могут быть настроены, чтобы происходить в медленном, постепенном темпе, который потребляет меньше пропускной всей или может потреблять всю пропускную емкость, подготовленную в целевом контейнере Azure Cosmos DB, и завершить миграцию за меньшее время.

## <a name="azure-cosmos-db-sql-api"></a>API SQL для Azure Cosmos DB
|**Тип перемещения**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Вне сети|[Инструмент миграции данных](https://docs.microsoft.com/azure/cosmos-db/import-data)|&bull;Легко настроить и поддерживает несколько источников <br/>&bull;Не подходит для больших наборов данных|
|Вне сети|[Фабрика данных Azure](https://docs.microsoft.com/azure/data-factory/connector-azure-cosmos-db).|&bull;Легко настроить и поддерживает несколько источников <br/>&bull;Использует библиотеку-исполнителя Azure Cosmos DB <br/>&bull;Подходит для больших наборов данных <br/>&bull;Отсутствие контрольно-пропускных пунктов - Это означает, что если проблема возникает в ходе миграции, необходимо перезапустить весь процесс миграции<br/>&bull;Отсутствие мертвой очереди букв - Это означает, что несколько ошибочных файлов могут остановить весь процесс миграции.|
|Вне сети|[Разъем Spark Azure Cosmos](https://docs.microsoft.com/azure/cosmos-db/spark-connector)|&bull;Использует библиотеку-исполнителя Azure Cosmos DB <br/>&bull;Подходит для больших наборов данных <br/>&bull;Нужна пользовательская установка Spark <br/>&bull;Искра чувствительна к несоответствиям схем, и это может быть проблемой во время миграции |
|Вне сети|[Пользовательский инструмент с библиотекой-исполнителем Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/migrate-cosmosdb-data)|&bull;Обеспечивает возможности контрольно-пропускных пунктов, мертвых букв, что повышает устойчивость миграции <br/>&bull;Подходит для очень больших наборов данных (10 ТБ)  <br/>&bull;Требуется пользовательская настройка этого инструмента, работающего как Служба приложения |
|Справка в Интернете|[Функции Cosmos DB и API ChangeFeed](https://docs.microsoft.com/azure/cosmos-db/change-feed-functions)|&bull;Легко настроить <br/>&bull;Работает только в том случае, если источником является контейнер Azure Cosmos DB <br/>&bull;Не подходит для больших наборов данных <br/>&bull;Не захватывает удаляет из исходного контейнера |
|Справка в Интернете|[Пользовательская миграционная служба с помощью ChangeFeed](https://github.com/nomiero/CosmosDBLiveETLSample)|&bull;Обеспечивает отслеживание хода <br/>&bull;Работает только в том случае, если источником является контейнер Azure Cosmos DB <br/>&bull;Работает и для больших наборов данных <br/>&bull;Требуется, чтобы пользователь создал службу app Service для размещения процессора подачи Change <br/>&bull;Не захватывает удаляет из исходного контейнера|
|Справка в Интернете|[Стрейим](https://docs.microsoft.com/azure/cosmos-db/cosmosdb-sql-api-migrate-data-striim)|&bull;Работает с большим разнообразием источников, таких как Oracle, DB2, S'L Server <br/>&bull;Легко построить конвейеры ETL и обеспечивает панель мониторинга <br/>&bull;Поддерживает более крупные наборы данных <br/>&bull;Так как это сторонний инструмент, его необходимо приобрести на рынке и установить в среде пользователя|

## <a name="azure-cosmos-db-mongo-api"></a>Azure Космос DB Mongo API
|**Тип перемещения**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Вне сети|[Инструмент миграции данных](https://docs.microsoft.com/azure/cosmos-db/import-data)|&bull;Легко настроить и поддерживает несколько источников <br/>&bull;Не подходит для больших наборов данных|
|Вне сети|[Фабрика данных Azure](https://docs.microsoft.com/azure/data-factory/connector-azure-cosmos-db).|&bull;Легко настроить и поддерживает несколько источников <br/>&bull;Использует библиотеку-исполнителя Azure Cosmos DB <br/>&bull;Подходит для больших наборов данных <br/>&bull;Отсутствие контрольно-пропускных пунктов означает, что любая проблема в ходе миграции потребует перезапуска всего процесса миграции<br/>&bull;Отсутствие мертвой очереди букв будет означать, что несколько ошибочных файлов могут остановить весь процесс миграции <br/>&bull;Требуется пользовательский код для увеличения пропускной вышифы чтения для определенных источников данных|
|Вне сети|[Существующие инструменты mongo (mongodump, mongorestore, Studio3T)](https://azure.microsoft.com/resources/videos/using-mongodb-tools-with-azure-cosmos-db/)|&bull;Легко настроить и интегрировать <br/>&bull;Потребности пользовательской обработки для дроссельной заслонки|
|Справка в Интернете|[Azure Database Migration Service](https://docs.microsoft.com/azure/dms/tutorial-mongodb-cosmos-db-online)|&bull;Использует библиотеку-исполнителя Azure Cosmos DB <br/>&bull;Подходит для больших наборов данных и заботится о воспроизведении живых изменений <br/>&bull;Работает только с другими источниками MongoDB|

## <a name="azure-cosmos-db-cassandra-api"></a>API Cassandra для Azure Cosmos DB
|**Тип перемещения**|**Решение**|**Рекомендации**|
|---------|---------|---------|
|Вне сети|[cqlsh COPY команда](https://docs.microsoft.com/azure/cosmos-db/cassandra-import-data#migrate-data-using-cqlsh-copy-command)|&bull;Легко настроить <br/>&bull;Не подходит для больших наборов данных <br/>&bull;Работает только тогда, когда источником является таблица Кассандра|
|Вне сети|[Копировать таблицу с Spark](https://docs.microsoft.com/azure/cosmos-db/cassandra-import-data#migrate-data-using-spark) |&bull;Может использовать возможности Spark для параллелизации трансформации и приема <br/>&bull;Потребности конфигурации с пользовательской политики повтора для обработки дроссельной заслонки|
|Справка в Интернете|[Стрейим (из Oracle DB/Apache Кассандра)](https://docs.microsoft.com/azure/cosmos-db/cosmosdb-cassandra-api-migrate-data-striim)|&bull;Работает с большим разнообразием источников, таких как Oracle, DB2, S'L Server <br/>&bull;Легко построить конвейеры ETL и обеспечивает панель мониторинга <br/>&bull;Поддерживает более крупные наборы данных <br/>&bull;Так как это сторонний инструмент, его необходимо приобрести на рынке и установить в среде пользователя|
|Справка в Интернете|[Блицц (от Oracle DB/Apache Кассандра)](https://docs.microsoft.com/azure/cosmos-db/oracle-migrate-cosmos-db-blitzz)|<br/>&bull;Поддерживает более крупные наборы данных <br/>&bull;Так как это сторонний инструмент, его необходимо приобрести на рынке и установить в среде пользователя|

## <a name="other-apis"></a>Other APIs
Для API, помимо API, Mongo API и Cassandra API, существуют различные инструменты, поддерживаемые каждой из существующих экосистем API. 

**API таблиц** 
* [Инструмент миграции данных](https://docs.microsoft.com/azure/cosmos-db/table-import#data-migration-tool)
* [Azcopy](https://docs.microsoft.com/azure/cosmos-db/table-import#migrate-data-by-using-azcopy)

**API Gremlin**
* [Граф объемных исполнитель библиотеки](https://docs.microsoft.com/azure/cosmos-db/bulk-executor-graph-dotnet)
* [Гремлин Спарк](https://github.com/Azure/azure-cosmosdb-spark/blob/2.4/samples/graphframes/main.scala) 

## <a name="next-steps"></a>Дальнейшие действия

* Узнайте больше, опробовав пример приложений, потребляющих библиотеку исполнителей навалом в [.NET](bulk-executor-dot-net.md) и [Java.](bulk-executor-java.md) 
* Библиотека-исполнитель навалом интегрирована в разъем Cosmos DB Spark, чтобы узнать больше, [см.](spark-connector.md)  
* Свяжитесь с группой продуктов Azure Cosmos DB, открыв билет поддержки в соответствии с типом проблемы "Общее консультирование" и подтипом проблемы "Большие (ТБ) " для получения дополнительной помощи при крупномасштабных миграциях.
