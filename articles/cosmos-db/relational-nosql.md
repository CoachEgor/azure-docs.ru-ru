---
title: Понимание различий между Azure Cosmos DB NoS'S и реляционными базами данных
description: В этой статье перечисляется различия между базами данных НоСЗЛ и реляционными
author: TheovanKraay
ms.author: thvankra
ms.service: cosmos-db
ms.subservice: cosmosdb-sql
ms.topic: conceptual
ms.date: 12/16/2019
ms.reviewer: sngun
ms.openlocfilehash: 1cd80fee51565f2a2c1afa38ed883c10f51a5ee3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75896627"
---
# <a name="understanding-the-differences-between-nosql-and-relational-databases"></a>Понимание различий между НоСЗЛ и реляционными базами данных

В этой статье будут перечислены некоторые ключевые преимущества баз данных НоСЗЛ по сравнению с реляционными базами данных. Мы также обсудим некоторые проблемы в работе с NoS'L. Для углубленного изучения различных существующих хранилики данных, посмотрите нашу статью о [выборе правильного хранилища данных.](https://docs.microsoft.com/azure/architecture/guide/technology-choices/data-store-overview)

## <a name="high-throughput"></a>Высокая пропускная способность

Одна из самых очевидных проблем при поддержании реляционной системы баз данных заключается в том, что большинство реляционных двигателей применяют замки и защелки для обеспечения строгой [семантики ACID.](https://en.wikipedia.org/wiki/ACID) Этот подход имеет преимущества с точки зрения обеспечения согласованного состояния данных в базе данных. Тем не менее, существуют серьезные компромиссы в отношении параллелизма, задержки и доступности. Из-за этих фундаментальных архитектурных ограничений, высокие объемы транзакций могут привести к необходимости вручную осколок данных. Внедрение ручного осколки может быть трудоемким и болезненным упражнением.

В этих [сценариях распределенные базы данных](https://en.wikipedia.org/wiki/Distributed_database) могут предложить более масштабируемое решение. Тем не менее, техническое обслуживание все еще может быть дорогостоящим и трудоемким упражнением. Администраторам, возможно, придется проделать дополнительную работу, чтобы обеспечить прозрачность распределенного характера системы. Они могут также учитывать "отключенный" характер базы данных.

[Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction) упрощает эти проблемы, развертываясь по всему миру во всех регионах Azure. Диапазоны разделов могут быть динамически подразделены, чтобы плавно развивать базу данных в соответствии с приложением, одновременно сохраняя высокую доступность. Изысканный мультитенантный и жестко контролируемый облачный ресурсуправления облегчает [поразительные гарантии задержки](https://docs.microsoft.com/azure/cosmos-db/consistency-levels-tradeoffs#consistency-levels-and-latency) и предсказуемую производительность. Раздел полностью управляется, поэтому администраторам не нужно писать код или управлять разделами.

Если объемы транзакций достигают экстремальных уровней, таких как многие тысячи транзакций в секунду, следует рассмотреть распределенную базу данных НоСЗЛ. Рассмотрим Azure Cosmos DB для максимальной эффективности, простоты обслуживания и снижения общей стоимости владения.

![Серверная часть](./media/relational-or-nosql/backend-scaled.png)

## <a name="hierarchical-data"></a>Иерархические данные

Существует значительное количество случаев использования, когда транзакции в базе данных могут содержать много отношений между родителями и детьми. Эти отношения могут значительно расти с течением времени, и оказаться трудно управлять. Формы [иерархических баз данных](https://en.wikipedia.org/wiki/Hierarchical_database_model) действительно появлялись в 80-е годы, но не были популярны из-за неэффективности хранения данных. Они также потеряли тягу, [поскольку реляционная модель Теда Кодда](https://en.wikipedia.org/wiki/Relational_model) стала де-факто стандартом, используемым практически всеми основными системами управления базами данных.

Однако сегодня популярность баз данных в стиле документов значительно выросла. Эти базы данных можно считать переосмыслением иерархической парадигмы баз данных, которые в настоящее время раскованы опасениями по поводу стоимости хранения данных на диске. В результате сохранение многих сложных отношений между родительскими и детскими образованиями в реляционной базе данных теперь можно считать антишаблоном по сравнению с современными подходами, ориентированными на документы.

Появление [объектно-ориентированного дизайна](https://en.wikipedia.org/wiki/Object-oriented_design)и [несоответствие импеда,](https://en.wikipedia.org/wiki/Object-relational_impedance_mismatch) возникающее при его объединении с реляционными моделями, также подчеркивает антишаблон в реляционных базах данных для определенных случаев использования. В результате могут возникнуть скрытые, но часто значительные расходы на техническое обслуживание. Хотя [подходы ORM](https://en.wikipedia.org/wiki/Object-relational_mapping) эволюционировали, чтобы частично смягчить это, базы данных, ориентированные на документы, тем не менее, гораздо лучше объединяются с объектно-ориентированными подходами. При таком подходе разработчики не вынуждены быть преданными драйверам ORM или индивидуальным [движкам OO Database.](https://en.wikipedia.org/wiki/Object_database) Если ваши данные содержат много родительских отношений и глубоких уровней иерархии, можно рассмотреть возможность использования базы данных документов НоСЗЛ, такой как [API Azure Cosmos DB S'L.](https://docs.microsoft.com/azure/cosmos-db/introduction)

![ЗаказПодробности](./media/relational-or-nosql/order-orderdetails.jpg)

## <a name="complex-networks-and-relationships"></a>Сложные сети и отношения

По иронии судьбы, учитывая их название, реляционные базы данных представляют собой менее оптимальное решение для моделирования глубоких и сложных отношений. Причина этого заключается в том, что отношения между сущностями на самом деле не существуют в реляционной базе данных. Они должны быть вычислены во время выполнения, со сложными отношениями, требующими каретных соединений, чтобы позволить отображение с помощью запросов. В результате операции становятся экспоненциально более дорогими с точки зрения вычислений по мере увеличения отношений. В некоторых случаях реляционные базы данных, пытающиеся управлять такими объектами, станут непригодными для угодья.

Различные формы баз данных "Сети" действительно появлялись в то время, когда появились реляционные базы данных, но, как и в отношении иерархических баз данных, эти системы изо всех сил пытались завоевать популярность. Медленное принятие было связано с отсутствием случаев использования в то время, и неэффективности хранения. Сегодня двигатели графических баз данных можно считать возрождением парадигмы сетевой базы данных. Ключевым преимуществом этих систем является то, что отношения хранятся в базе данных как "граждане первого класса". Таким образом, обход отношений может быть сделано в постоянное время, а не увеличивать во времени сложность с каждым новым соединением или перекрестным продуктом.

При сохранении сложной сети взаимоотношений в базе данных может потребоваться рассмотреть базу данных графиков, такую как [API Azure Cosmos DB Gremlin](https://docs.microsoft.com/azure/cosmos-db/graph-introduction) для управления этими данными.

![График](./media/relational-or-nosql/graph.png)

Azure Cosmos DB — это многомодельная служба баз данных, которая предлагает проекцию API для всех основных типов моделей НоСЗЛ; Колонка-семья, документ, график и ключевая стоимость. Слои [API-изл-документа Gremlin (graph)](https://docs.microsoft.com/azure/cosmos-db/gremlin-support) и S'L (Core) полностью совместимы. Это имеет преимущества для переключения между различными моделями на уровне программируемости. Графические магазины могут быть запрошены как с точки зрения сложных сетевых обходов, так и транзакций, смоделированных в виде записей документов в одном магазине.

## <a name="fluid-schema"></a>Схема жидкости

Еще одна особенность реляционных баз данных заключается в том, что схемы должны быть определены во время проектирования. Это имеет преимущества с точки зрения референциальной целостности и соответствия данных. Тем не менее, он также может быть ограничительным, как приложение растет. Реагирование на изменения в схеме между логически отдельными моделями, разделяющие одну и ту же таблицу или определение базы данных, может со временем стать сложным. Такие случаи использования часто выигрывают от того, что схема передается приложению для управления на основе записи. Это требует, чтобы база данных была "схемой агностик" и позволяла "самоописывать" записи с точки зрения данных, содержащихся в них.

Если вы управляете данными, структуры которых постоянно меняются с высокой скоростью, особенно если транзакции могут поступать из внешних источников, где трудно обеспечить соответствие по всей базе данных, вы можете рассмотреть более схема-агностичный подход с помощью управляемой службы баз данных NoS'L, такой как Azure Cosmos DB.

## <a name="microservices"></a>Микрослужбы

В последние годы структура [микрослужб](https://en.wikipedia.org/wiki/Microservices) значительно возросла. Эта модель имеет свои корни в [сервис-ориентированной архитектуры](https://en.wikipedia.org/wiki/Service-oriented_architecture). Де-факто стандартом для передачи данных в этих современных архитектурах микрослужб является [JSON,](https://en.wikipedia.org/wiki/JSON)который также является средством хранения для подавляющего большинства баз данных, ориентированных на документы, ноСЗЛ. Это делает хранилища документов NoS'L гораздо более бесшовными, пригодными как для сохранения, так и для синхронизации (с использованием [шаблонов поиска событий)](https://en.wikipedia.org/wiki/Event-driven_architecture)в сложных реализациях Microservice. Более традиционные реляционные базы данных могут быть гораздо более сложными для обслуживания в этих архитектурах. Это связано с большим объемом преобразований, необходимых как для состояния, так и для синхронизации через AA. Azure Cosmos DB, в частности, имеет ряд функций, которые делают его еще более бесшовным для JSON на основе микрослужб архитектуры, чем многие базы данных НоСЗЛ:

* выбор чистых типов данных JSON
* Движок JavaScript и [API запроса,](https://docs.microsoft.com/azure/cosmos-db/javascript-query-api) встроенный в базу данных.
* современный [канал изменений,](https://docs.microsoft.com/azure/cosmos-db/change-feed) на который клиенты могут подписаться, чтобы получить уведомление об изменениях в контейнере.

## <a name="some-challenges-with-nosql-databases"></a>Некоторые проблемы с базами данных NoS'L

Несмотря на некоторые явные преимущества при реализации баз данных NoS'L, есть также некоторые проблемы, которые вы можете принять во внимание. Они могут не присутствовать в той же степени при работе с реляционной моделью:

* сделок со многими отношениями, указывающими на одно и то же юридическое лицо.
* транзакций, требующих сильной согласованности по всему набору данных.

Глядя на первую проблему, правило большого пальца в базах данных НоСЗЛ, как правило, денормализации, которая, как сформулировано ранее, производит более эффективные чтения в распределенной системе. Тем не менее, есть некоторые проблемы дизайна, которые вступают в игру с этим подходом. Возьмем пример продукта, связанного с одной категорией и несколькими тегами:

![Соединения](./media/relational-or-nosql/many-joins.png)

Наилучшей практикой в базе данных документов НоСЗЛ было бы денормализация названия категории и названия тегов непосредственно в "документе продукта". Однако для синхронизации категорий, тегов и продуктов параметры проектирования, облегчающие это, добавили сложности обслуживания, поскольку данные дублируются в нескольких записях в продукте, а не являются простым обновлением в "один к многим" и соединение для извлечения данных. 

Компромисс заключается в том, что считывающие данные являются более эффективными в денормализации записи, и становятся все более эффективными, как число концептуально присоединился субъектов увеличивается. Однако, так же, как эффективность чтения увеличивается с увеличением числа объединенных лиц в денормализации записи, так же как и сложность обслуживания поддержания сущностей в синхронизации. Одним из способов смягчения этого компромисса является создание [гибридной модели данных.](https://docs.microsoft.com/azure/cosmos-db/modeling-data#hybrid-data-models)

Несмотря на то, что в базах данных НоСЗЛ имеется больше гибкости для решения этих проблем, повышенная гибкость может также привести к принятию дополнительных проектных решений. Проконсультируйтесь с нашей статьей о том, [как моделировать и перегородки данных на Azure Cosmos DB, используя реальный пример,](https://docs.microsoft.com/azure/cosmos-db/how-to-model-partition-example)который включает в себя подход к [синхронизации денормализации пользовательских данных,](https://docs.microsoft.com/azure/cosmos-db/how-to-model-partition-example#denormalizing-usernames) где пользователи сидят не только в разных разделах, но и в разных контейнерах.

Что касается сильной согласованности, то редко это требуется во всем наборе данных. Однако в тех случаях, когда это необходимо, это может быть проблемой в распределенных базах данных. Для обеспечения согласованности данные необходимо синхронизировать во всех репликах и регионах, прежде чем позволять клиентам читать их. Это может увеличить задержку считываемых.

Опять же, Azure Cosmos DB предлагает большую гибкость, чем реляционные базы данных для различных компромиссов, которые имеют отношение здесь, но для небольших реализаций, этот подход может добавить больше соображений дизайна. Более подробно проконсультируйтесь с нашей статьей о [согласованности, доступности и компромиссах в отношении производительности.](https://docs.microsoft.com/azure/cosmos-db/consistency-levels-tradeoffs)

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как управлять учетной записью Azure Cosmos и другими концепциями:

* [Управление учетными записями базы данных в Azure Cosmos DB](how-to-manage-database-account.md)
* [Глобальное распределение](distribute-data-globally.md)
* [Уровни согласованности](consistency-levels.md)
* [Работа с базами данных, контейнерами и элементами Azure Cosmos](databases-containers-items.md)
* [Безопасный доступ к учетной записи Azure Cosmos DB с использованием конечной точки службы виртуальной сети Azure](vnet-service-endpoint.md)
* [Поддержка брандмауэра для Azure Cosmos DB](firewall-support.md)
* [Добавление и удаление регионов из учетной записи базы данных](how-to-manage-database-account.md)
* [Соглашение об уровне обслуживания для Azure Cosmos DB](https://azure.microsoft.com/support/legal/sla/cosmos-db/v1_2/)
