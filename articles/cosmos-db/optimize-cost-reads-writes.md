---
title: Оптимизация затрат на операции чтения и записи в Azure Cosmos DB
description: В этой статье описано, как сократить расходы на Azure Cosmos DB, связанные с выполнением операций чтения и записи данных.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 07/24/2020
ms.openlocfilehash: 38084bf30df2a597e7a7bc46ba4c52cf371c3c7e
ms.sourcegitcommit: a76ff927bd57d2fcc122fa36f7cb21eb22154cfa
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2020
ms.locfileid: "87318255"
---
# <a name="optimize-reads-and-writes-cost-in-azure-cosmos-db"></a>Оптимизация затрат на выполнения операций чтения и записи в Azure Cosmos DB

В этой статье описывается, как вычисляется стоимость чтения и записи данных в Azure Cosmos DB. Операции чтения включают [Чтение точек и запросы](sql-query-getting-started.md). Операции записи включают в себя вставку, замену, удаление и Upsert элементов.  

## <a name="cost-of-reads-and-writes"></a>Стоимость операций чтения и записи

Azure Cosmos DB гарантирует прогнозируемую производительность по параметрам пропускной способности и задержек, используя модель подготовленной пропускной способности. Подготовленная пропускная способность выражается в [единицах запросов](request-units.md) в секунду. Единицы запроса (ЕЗ) представляют собой логическую абстракцию определенного набора вычислительных ресурсов, в том числе ЦП, памяти и устройств ввода-вывода, необходимых для выполнения запроса. Подготовленная пропускная способность резервирует определенное количество ЕЗ для вашего контейнера или базы данных, что позволяет гарантировать предсказуемые значения пропускной способности и задержки. Подготовленная пропускная способность позволяет Azure Cosmos DB обеспечить стабильную и предсказуемую производительность, гарантировать низкую задержку и высокий уровень доступности в любом масштабе. Единицы запроса выполняют роль нормализованной "валюты", которая упрощает принятие решений о выделении ресурсов приложению.

Вам не нужно беспокоиться о распределении ЕЗ между операциями чтения и записи. Модель унифицированной валюты позволяет эффективно использовать одну и ту же пропускную способность для операций чтения и записи. В следующей таблице показана стоимость операций чтения и записи баллов с точки зрения единиц запросов в секунду для элементов размером в 1 КБ и 100 КБ.

|**Размер элемента**  |**Стоимость одной точки чтения** |**Стоимость одной операции записи**|
|---------|---------|---------|
|1 КБ |1 ЕЗ |5 ЕЗ |
|100 КБ |10 ЕЗ |50 ЕЗ |

Чтение точки для элемента, размер которого составляет 1 КБ, изменяются единицы по единицам. На запись элемента размером 1 КБ затрачивается 5 ЕЗ. Такая стоимость чтения и записи применяется при стандартной [согласованности](consistency-levels.md) на уровне сеанса.  На стоимость, выраженную в ЕЗ, влияют следующие факторы: размер элементов, число свойств, согласованность данных, индексированные свойства, индексирование и шаблоны запроса.

Стоимость [чтения точки](sql-query-getting-started.md) значительно меньше, чем количество запросов. Операции чтения точек, в отличие от запросов, не требуют использования обработчика запросов для доступа к данным. Плата за запросы по ЕДИНИЦам запросов зависит от сложности запроса и количества элементов, необходимых для загрузки обработчиком запросов.

## <a name="optimize-the-cost-of-writes-and-reads"></a>Оптимизация стоимости операций чтения и записи

При выполнении операций записи необходимо подготовить достаточную емкость для поддержки необходимого количества операций записи в секунду. Вы можете увеличить подготовленную пропускную способность перед выполнением операций записи, используя пакет SDK, портал или интерфейс командной строки, а затем восстановить прежний уровень пропускной способности после завершения операций. Пропускная способность на период записи вычисляется как минимальная пропускная способность для имеющегося объема данных плюс пропускная способность на рабочую нагрузку вставки, если в это время не выполняются другие рабочие нагрузки.

Если одновременно сохраняются другие рабочие нагрузки, например для запросов, чтения, обновления или удаления, следует учесть в расчетах дополнительные ЕЗ для выполнения таких операций. Если операции записи ограничены по скорости, настройте подходящую политику повторов и отсрочек с помощью пакетов SDK для Azure Cosmos DB. Например, можно увеличивать нагрузку до тех пор, пока часть запросов не начнет отбрасываться из-за ограничений по скорости. Когда сработает ограничение по скорости, в клиентском приложении следует применить отсрочку для тех запросов, по которым срабатывает ограничение, на установленный в ограничении интервал. Прежде, чем продолжать операции записи, выждите минимально допустимый промежуток времени между повторными попытками. Поддержка политики повтора включена в пакеты SDK для SQL .NET, Java, Node.js и Python, а также во все поддерживаемые версии пакетов SDK для .NET Core.

Также вы можете применить в Azure Cosmos DB массовую вставку данных или копирование из любого поддерживаемого в Azure Cosmos DB источника данных с помощью [Фабрики данных Azure](../data-factory/connector-azure-cosmos-db.md). Фабрика данных Azure поддерживает интеграцию с библиотекой массовых операций для Azure Cosmos DB, что обеспечивает оптимальную производительность при операциях записи.

## <a name="next-steps"></a>Дальнейшие шаги

Теперь вы можете перейти к изучению оптимизации затрат в Azure Cosmos DB в следующих статьях:

* Дополнительные сведения об [оптимизации для разработки и тестирования](optimize-dev-test.md)
* Дополнительные сведения о [расшифровке счета Azure Cosmos DB](understand-your-bill.md)
* Дополнительные сведения об [оптимизации расходов на пропускную способность](optimize-cost-throughput.md)
* Дополнительные сведения об [оптимизации расходов на хранилище](optimize-cost-storage.md)
* Дополнительные сведения об [оптимизации затрат на запросы](optimize-cost-queries.md).
* Дополнительные сведения об [оптимизации расходов на учетные записи Cosmos Azure с поддержкой нескольких регионов](optimize-cost-regions.md)
