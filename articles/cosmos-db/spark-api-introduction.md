---
title: Введение во встроенную операционную аналитику в Azure Cosmos DB с использованием Apache Spark
description: Узнайте, как с помощью встроенной поддержки Apache Spark в Azure Cosmos DB выполнять задачи операционной аналитики и искусственного интеллекта.
ms.service: cosmos-db
ms.topic: overview
ms.date: 05/10/2019
author: rimman
ms.author: rimman
ms.openlocfilehash: c62639feed7ced9d92e29715e350b952465a94a1
ms.sourcegitcommit: 17411cbf03c3fa3602e624e641099196769d718b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2019
ms.locfileid: "65517723"
---
# <a name="built-in-operational-analytics-in-azure-cosmos-db-with-apache-spark-preview"></a>Встроенная операционная аналитика в Azure Cosmos DB с использованием Apache Spark (предварительная версия) 

Встроенная поддержка Apache Spark в Azure Cosmos DB позволяет запускать из Apache Spark аналитику данных, которые хранятся в учетной записи Azure Cosmos. Azure Cosmos DB предоставляет собственную поддержку для заданий Apache Spark, что позволяет выполнять их непосредственно в глобально распределенных базах данных Cosmos. Благодаря таким возможностям разработчики, инженеры данных и специалисты по анализу данных могут использовать Azure Cosmos DB как гибкую, масштабируемую и высокопроизводительную платформу данных для рабочих нагрузок **OLTP и OLAP/HTAP**. 

Компонент Spark compute автоматически доступен во всех регионах Azure, связанных с вашей учетной записью Azure Cosmos. Задания Spark используют возможности Azure Cosmos DB по работе с несколькими источниками и могут записывать локальные реплики в каждом регионе или запрашивать их. 

> [!NOTE]
> Встроенная поддержка Apache Spark в Azure Cosmos DB в настоящее время находится на этапе ограниченной предварительной версии. Чтобы зарегистрироваться на использование предварительной версии, откройте страницу [регистрации для предварительной версии](https://portal.azure.com/?feature.customportal=false#create/Microsoft.DocumentDB). 

Поддержка Apache Spark в Azure Cosmos DB предоставляет следующие преимущества.

* Вы обеспечите анализ для географически распределенных пользователей и данных за минимальное время.

* Вы сможете упростить архитектуру решения и снизить [совокупную стоимость владения](total-cost-ownership.md). Для системы потребуется минимальное число компонентов для обработки данных, и вы сможете избежать лишнего перемещения данных между ними.

* Создает границу в системе для охвата всех управляемых данных, что упрощает обеспечение [безопасности](secure-access-to-data.md), соблюдение [соответствия](compliance.md) и выполнение аудита.

* Предоставляет конечным пользователям систему аналитики с постоянной доступностью или [высоким уровнем доступности](high-availability.md) с соблюдением строгих соглашений об уровне обслуживания.

![Визуализация поддержки Apache Spark в Azure Cosmos DB](./media/spark-api-introduction/spark-api-visualization.png)
 
С помощью поддержки Apache Spark в Azure Cosmos DB вы можете создавать и развертывать решения с такими технологиями, как искусственный интеллект и модели глубокого обучения, прогнозная аналитика, рекомендации, Интернет вещей, Customer 360, обнаружение мошенничества, анализ тональности текста и анализ сведений о посещении сайта. Все эти решения напрямую работают с данными в Azure Cosmos DB.

Вы можете настроить пакетные и потоковые задания ETL для Azure Cosmos DB, не выходя за рамки службы базы данных и не добавляя дополнительные службы вычислений. Вы можете гибко масштабировать вычислительную среду, если требуется выполнить задание ETL, а затем уменьшать масштаб после его завершения.

Поддержка Apache Spark в Azure Cosmos DB обеспечивает собственную поддержку машинного обучения в средах выполнения Apache Spark. Сюда входят Spark MLLib, Машинное обучение Майкрософт для Spark, Машинное обучение Azure и Cognitive Services. Благодаря такому набору функций специалисты по обработке и анализу данных могут за короткие сроки и с низкими затратами создавать и вводить в эксплуатацию модели машинного обучения непосредственно в Azure Cosmos DB.


## <a name="key-benefits"></a>Основные преимущества

### <a name="globally-distributed-low-latency-operational-analytics-and-ai"></a>Глобально распределенная система операционной аналитики и искусственного интеллекта с низкой задержкой

Применив Apache Spark к глобально распределенной базе данных Azure Cosmos, вы сможете быстро получать аналитические сведения по всему миру. Azure Cosmos DB обеспечивает **глобально распределенную операционную аналитику с низкой задержкой** и эластичным масштабированием, реализуя три основных методики:

* База данных Azure Cosmos глобально распределена, а значит все данные принимаются локально по месту нахождения поставщика данных (например, пользователей приложения). Запросы обслуживаются в ближайших локальных репликах как для поставщиков, так и для потребителей данных, независимо от их расположения. 

* Все аналитические запросы выполняются непосредственно по индексированным данным в разделах данных, без их излишнего перемещения. 

* Поскольку решение Spark размещено совместно с Azure Cosmos DB, снижается количество промежуточных преобразований и перемещений данных, что повышает производительность и масштабируемость системы.

### <a name="unified-serverless-experience-for-apache-spark"></a>Унифицированное бессерверное взаимодействие для Apache Spark

Многомодельная база данных Azure Cosmos DB расширяет поддержку интерфейсов API OSS, предоставляя **унифицированное бессерверное взаимодействие для Apache Spark** с поддержкой моделей данных для пар "ключ-значение", документов, графов и семейств столбцов. Поддерживаются разные модели данных с использованием API-интерфейсов MongoDB, Cassandra, Gremlin, Etcd и SQL, каждый из которых обрабатывает один набор базовых данных. 

Благодаря поддержке в Azure Cosmos DB доступна собственная поддержка приложений на языках Scala, Python и Java, а также несколько тесно интегрированных библиотек для SQL. Эти библиотеки поддерживают работу с SQL ([Spark SQL](https://spark.apache.org/sql/)), машинным обучением (Spark [MLlib](https://spark.apache.org/mllib/)), потоковой обработкой ([Структурированная потоковая передача Spark](https://spark.apache.org/streaming/)) и графами (Spark [GraphFrames]( https://docs.databricks.com/spark/latest/graph-analysis/graphframes/user-guide-python.html)). Эти инструменты облегчают применение Apache Spark для разных вариантов использования. Вам не придется отвлекаться на управление Spark или кластерами Spark. Вы можете использовать хорошо знакомые API-интерфейсы Apache Spark и **записные книжки Jupyter** для аналитики, а также API SQL или любой другой API OSS NoSQL (например, Cassandra) для одновременной транзакционной обработки одного набора базовых данных.

### <a name="no-schema-or-index-management"></a>Отсутствие необходимости управлять схемами или индексами

В отличие от традиционных аналитических баз данных, Azure Cosmos DB освобождает специалистов по обработке и анализу данных от управления громоздкими схемами и индексами. Ядро СУБД в Azure Cosmos DB не требует явных операций со схемами и (или) индексами, а также может автоматически индексировать все принимаемые данные и быстро обрабатывать запросы Apache Spark. 

### <a name="consistency-choices"></a>Варианты согласованности

Так как задания Apache Spark выполняются в разделах данных в базе данных Azure Cosmos, для запросов могут соблюдаться [пять четко определенных вариантов согласованности](consistency-levels.md). Эти модели согласованности обеспечивают гибкость при выборе строгости согласованности и позволяют получить оптимальную точность алгоритмов машинного обучения без повышения задержки и ухудшения уровня доступности. 

### <a name="slas"></a>Соглашения об уровне обслуживания

На задания Apache Spark распространяются те же гарантии, что и на Azure Cosmos DB, с применением лучших в отрасли комплексных [соглашений об уровне обслуживания](https://azure.microsoft.com/support/legal/sla/documentdb/v1_1/) (с уровнем доступности 99,999) без дополнительных расходов на управление отдельными кластерами Apache Spark. Эти соглашения об уровне обслуживания предусматривают высокую пропускную способность, задержку на уровне 99-го процентиля, согласованность и высокий уровень доступности. 

### <a name="mixed-workloads"></a>Смешанные рабочие нагрузки

Интеграция Apache Spark с Azure Cosmos DB устраняет пропасть между транзакционными и аналитическими операциями, которая долго оставалась одной из самых проблемных точек для клиентов при создании облачных приложений в глобальном масштабе. 

## <a name="built-in-jupyter-notebooks-support"></a>Встроенная поддержка записных книжек Jupyter

Azure Cosmos DB поддерживает записные книжки Jupyter для всех API-интерфейсов, например Cassandra, MongoDB, SQL, Gremlin и таблицы. Записные книжки Jupyter запускаются в учетных записях Azure Cosmos DB, расширяя возможности разработчиков. Встроенная поддержка записных книжек для всех API-интерфейсов Azure Cosmos DB и моделей данных позволяет выполнять запросы интерактивно. Вы также можете выполнять модели машинного обучения и анализировать данные, хранимые в базах данных Azure Cosmos. С помощью записных книжек Jupyter можно анализировать сохраненные данные, создавать и обучать модели машинного обучения, а также выполнять объединение данных на портале Azure, как показано на следующем рисунке:

![Поддержка записных книжек Jupyter в Azure Cosmos DB](./media/spark-api-introduction/jupyter-notebooks-portal.png)

## <a name="next-steps"></a>Дополнительная информация

* Чтобы узнать о преимуществах Azure Cosmos DB, изучите [эту обзорную статью](introduction.md).
* [Начало работы с API Azure Cosmos DB для MongoDB](mongodb-introduction.md)
* [Краткое руководство. Создание приложения Cassandra с помощью .NET и Azure Cosmos DB](cassandra-introduction.md)
* [Начало работы с API Gremlin в Azure Cosmos DB](graph-introduction.md)
* [Краткое руководство. Создание приложения API таблицы с помощью .NET и Azure Cosmos DB](table-introduction.md)




