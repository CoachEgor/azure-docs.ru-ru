---
title: Управление ресурсами Azure Cosmos DB с помощью Обозреватель службы хранилища Azure
description: Узнайте, как подключиться к Azure Cosmos DB и управлять своими ресурсами с помощью Обозревателя службы хранилища Azure.
author: deborahc
ms.service: cosmos-db
ms.topic: how-to
ms.date: 10/23/2020
ms.author: dech
ms.custom: seodec18, has-adal-ref
ms.openlocfilehash: 9260f2892bdcc6a694e1e54e29cb06bae90298eb
ms.sourcegitcommit: 3bdeb546890a740384a8ef383cf915e84bd7e91e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2020
ms.locfileid: "93074477"
---
# <a name="manage-azure-cosmos-db-resources-by-using-azure-storage-explorer"></a>Управление ресурсами Azure Cosmos DB с помощью Обозреватель службы хранилища Azure
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

Для подключения к Azure Cosmos DB можно использовать обозреватель службы хранилища Azure. Она позволяет подключаться к учетным записям Azure Cosmos DB, размещенным в облаках Azure и независимых, из Windows, macOS или Linux.

Используйте то же средство для управления различными сущностями Azure в одном месте. Вы можете управлять сущностями Azure Cosmos DB, управлять данными, обновлять хранимые процедуры и триггеры вместе с другими сущностями Azure, такими как BLOB-объекты и очереди хранилища. Обозреватель службы хранилища Azure поддерживает учетные записи Cosmos, настроенные для API-интерфейсов SQL, MongoDB, Graph и Table.

> [!NOTE]
> Интеграция Azure Cosmos DB с Обозреватель службы хранилища является устаревшей. Все существующие функции не будут удалены в этом выпуске как минимум за один год. Вместо этого следует использовать [портал Azure](https://portal.azure.com/), [классическое приложение портала Azure](https://portal.azure.com/App/Download) или автономный [Обозреватель Azure Cosmos](data-explorer.md) . Альтернативные варианты содержат множество новых функций, которые в настоящее время не поддерживаются в Обозреватель службы хранилища.

## <a name="prerequisites"></a>Предварительные требования

Учетная запись Cosmos с API SQL или API Azure Cosmos DB для MongoDB. Если у вас нет учетной записи, вы можете создать ее на портал Azure. Дополнительные сведения см. [в разделе Azure Cosmos DB: создание веб-приложения API SQL с помощью .NET и портал Azure](create-sql-api-dotnet.md) .

## <a name="installation"></a>Установка

Сведения об установке новых Обозреватель службы хранилища Azure бит см. в разделе [Обозреватель службы хранилища Azure](https://azure.microsoft.com/features/storage-explorer/). Поддерживаются версии Windows, Linux и macOS.

## <a name="connect-to-an-azure-subscription"></a>Подключение к подписке Azure

1. После установки **Обозреватель службы хранилища Azure** выберите значок **подключаемого модуля** на панели слева.

   :::image type="content" source="./media/storage-explorer/plug-in-icon.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

1. Выберите **Add an Azure Account** (Добавить учетную запись Azure), а затем щелкните **Войти** .

   :::image type="content" source="./media/storage-explorer/connect-to-azure-subscription.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

1. В диалоговом окне **входа в Azure** выберите **Вход** и введите учетные данные Azure.

    :::image type="content" source="./media/storage-explorer/sign-in.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

1. Выберите свою подписку в списке и нажмите кнопку **Применить** .

    :::image type="content" source="./media/storage-explorer/apply-subscription.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

    Панель обозревателя обновляется и отображает учетные записи в выбранной подписке.

    :::image type="content" source="./media/storage-explorer/account-list.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

    Ваша **учетная запись Cosmos DB** подключена к вашей подписке Azure.

## <a name="use-a-connection-string-to-connect-to-azure-cosmos-db"></a>Использовать строку подключения для подключения к Azure Cosmos DB

Строку подключения можно использовать для подключения к Azure Cosmos DB. Этот метод поддерживает только API-интерфейсы SQL и Table. Чтобы подключиться со строкой подключения, выполните следующие действия.

1. Найдите **локальные и** присоединитесь к левому дереву, щелкните правой кнопкой мыши **Cosmos DB учетные записи** , а затем выберите **подключиться к Cosmos DB** .

    :::image type="content" source="./media/storage-explorer/connect-to-db-by-connection-string.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

2. В окне **Подключение к Cosmos DB** :
   1. Выберите API в раскрывающемся меню.
   1. Вставьте строку подключения в поле **строка подключения** . Сведения о получении основной строки подключения см. в разделе [Получение строки подключения](manage-with-powershell.md#list-keys).
   1. Введите **метку учетной записи** , а затем нажмите кнопку **Далее** , чтобы проверить сводку.
   1. Выберите **подключить** , чтобы подключить учетную запись Azure Cosmos DB.

      :::image type="content" source="./media/storage-explorer/connection-string.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

## <a name="use-a-local-emulator-to-connect-to-azure-cosmos-db"></a>Использование локального эмулятора для подключения к Azure Cosmos DB

Выполните следующие действия, чтобы подключиться к Azure Cosmos DB с помощью эмулятора. Этот метод поддерживает только учетные записи SQL.

1. Установите эмулятор Cosmos DB, а затем откройте его. Сведения об установке эмулятора см. в разделе [эмулятор Cosmos DB](./local-emulator.md).

1. Найдите **локальные и** присоединитесь к левому дереву, щелкните правой кнопкой мыши **Cosmos DB учетные записи** , а затем выберите **подключиться к эмулятору Cosmos DB** .

    :::image type="content" source="./media/storage-explorer/emulator-entry.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

1. В окне **Подключение к Cosmos DB** :
   1. Вставьте строку подключения в поле **строка подключения** . Сведения о получении основной строки подключения см. в разделе [Получение строки подключения](manage-with-powershell.md#list-keys).
   1. Введите **метку учетной записи** , а затем нажмите кнопку **Далее** , чтобы проверить сводку.
   1. Выберите **подключить** , чтобы подключить учетную запись Azure Cosmos DB.

      :::image type="content" source="./media/storage-explorer/emulator-dialog.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

## <a name="azure-cosmos-db-resource-management"></a>Управление ресурсами Azure Cosmos DB

Используйте следующие операции для управления учетной записью Azure Cosmos DB:

* Откройте учетную запись в портал Azure.
* Добавьте ресурс в список быстрого доступа.
* Поиск и обновление ресурсов.
* Создание и удаление баз данных.
* Создание и удаление коллекций.
* Создание, изменение, удаление и фильтрация документов.
* Управление хранимыми процедурами, триггерами и определяемыми пользователем функциями.

### <a name="quick-access-tasks"></a>Задачи для быстрого доступа

Можно щелкнуть правой кнопкой мыши подписку на панели Обозреватель для выполнения многих задач быстрого действия, например:

* Щелкните правой кнопкой мыши учетную запись Azure Cosmos DB или базу данных, а затем выберите пункт **Открыть на портале** , чтобы управлять ресурсом в браузере на портал Azure.

  :::image type="content" source="./media/storage-explorer/open-in-portal.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

* Щелкните правой кнопкой мыши учетную запись Azure Cosmos DB, базу данных или коллекцию, а затем выберите команду **Добавить для быстрого доступа** , чтобы добавить ее в меню быстрого доступа.

* Выберите **Поиск здесь** , чтобы включить поиск по ключевым словам в выбранном пути.

    :::image type="content" source="./media/storage-explorer/search-from-here.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

### <a name="database-and-collection-management"></a>Управление базами данных и коллекциями

#### <a name="create-a-database"></a>Создание базы данных

1. Щелкните правой кнопкой мыши учетную запись Azure Cosmos DB и выберите команду **создать базу данных** .

   :::image type="content" source="./media/storage-explorer/create-database.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

1. Введите имя базы данных и нажмите клавишу **Ввод** для завершения.

#### <a name="delete-a-database"></a>удаление базы данных.

1. Щелкните правой кнопкой мыши базу данных и выберите команду **Удалить базу данных** . 

   :::image type="content" source="./media/storage-explorer/delete-database1.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

1. Во всплывающем окне выберите **Да** . После удаления узла базы данных учетная запись Azure Cosmos DB будет обновлена автоматически.

   :::image type="content" source="./media/storage-explorer/delete-database2.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

#### <a name="create-a-collection"></a>Создание коллекции

1. Щелкните правой кнопкой мыши базу данных и выберите команду **создать коллекцию** .

   :::image type="content" source="./media/storage-explorer/create-collection.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

1. В окне Создание коллекции введите требуемые сведения, например **идентификатор коллекции** и **емкость хранилища** , и т. д. Нажмите кнопку **ОК** для завершения.

   :::image type="content" source="./media/storage-explorer/create-collection2.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

1. Выберите параметр **без ограничений** , чтобы можно было указать ключ секции, а затем нажмите кнопку **ОК** для завершения.

   > [!NOTE]
   > Если ключ секции используется при создании коллекции, то после завершения создания вы не сможете изменить значение ключа секции в коллекции.

    :::image type="content" source="./media/storage-explorer/partitionkey.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

#### <a name="delete-a-collection"></a>Удаление коллекции

- Щелкните правой кнопкой мыши коллекцию, выберите **удалить коллекцию** , а затем во всплывающем окне выберите **Да** .

    После удаления узла коллекции база данных будет обновлена автоматически.

    :::image type="content" source="./media/storage-explorer/delete-collection.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

### <a name="document-management"></a>Управление документами

#### <a name="create-and-modify-documents"></a>Создание и изменение документов

- Откройте **документы** на левой панели, выберите **создать документ** , измените содержимое на правой панели, а затем выберите **сохранить** .
- Можно также обновить существующий документ, а затем нажать кнопку **сохранить** . Чтобы отменить изменения, выберите **отменить** .

  :::image type="content" source="./media/storage-explorer/document.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

#### <a name="delete-a-document"></a>Удаление документа

* Нажмите кнопку **Удалить** , чтобы удалить выбранный документ.

#### <a name="query-for-documents"></a>Запросы для документов

* Чтобы изменить фильтр документа, введите SQL- [запрос](./sql-query-getting-started.md)и нажмите кнопку **Применить** .

  :::image type="content" source="./media/storage-explorer/document-filter.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

### <a name="graph-management"></a>Управление графом

#### <a name="create-and-modify-a-vertex"></a>Создание и изменение вершины

* Чтобы создать новую вершину, откройте **диаграмму** в левой области, выберите **создать вершину** , измените содержимое и нажмите кнопку **ОК** .
* Чтобы изменить существующую вершину, щелкните значок пера на правой панели.

   :::image type="content" source="./media/storage-explorer/vertex.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

#### <a name="delete-a-graph"></a>Удаление графа

* Чтобы удалить вершину, щелкните значок "Корзина" рядом с именем вершины.

#### <a name="filter-for-graph"></a>Фильтр графа

* Чтобы изменить фильтр графа, введите [запрос Gremlin](gremlin-support.md)и нажмите кнопку **Применить фильтр** .

   :::image type="content" source="./media/storage-explorer/graph-filter.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

### <a name="table-management"></a>Управление таблицами

#### <a name="create-and-modify-a-table"></a>Создание и изменение таблицы

* Создание новой таблицы:
   1. В левой области откройте **сущности** и нажмите кнопку **Добавить** .
   1. В диалоговом окне **Добавление сущности** измените содержимое.
   1. Нажмите кнопку **Добавить свойство** , чтобы добавить свойство.
   1. Выберите команду **Вставить** .

      :::image type="content" source="./media/storage-explorer/table.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

* Чтобы изменить таблицу, выберите **изменить** , измените содержимое, а затем щелкните **Обновить** .

   

#### <a name="import-and-export-table"></a>Импорт и экспорт таблицы

* Для импорта нажмите кнопку **Импорт** , а затем выберите существующую таблицу.
* Чтобы выполнить экспорт, нажмите кнопку **Экспорт** , а затем выберите назначение.

   :::image type="content" source="./media/storage-explorer/table-import-export.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

#### <a name="delete-entities"></a>Удаление сущностей

* Выберите сущности, а затем нажмите кнопку **Удалить** .

  :::image type="content" source="./media/storage-explorer/table-delete.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

#### <a name="query-a-table"></a>запрос к таблице;

- Нажмите кнопку **запрос** , введите условие запроса, а затем нажмите кнопку **выполнить запрос** . Чтобы закрыть панель запроса, нажмите кнопку **закрыть запрос** .

  :::image type="content" source="./media/storage-explorer/table-query.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

### <a name="manage-stored-procedures-triggers-and-udfs"></a>Управление хранимыми процедурами, триггерами и определяемыми пользователем функциями

* Чтобы создать хранимую процедуру, выполните следующие действия.
  1. В левом дереве щелкните правой кнопкой мыши пункт **хранимые процедуры** и выберите команду **создать хранимую процедуру** .
  
     :::image type="content" source="./media/storage-explorer/stored-procedure.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::
  
  1. Введите имя слева, введите скрипты хранимой процедуры на правой панели, а затем щелкните **создать** .
  
* Чтобы изменить существующую хранимую процедуру, дважды щелкните процедуру, выполните обновление, а затем выберите **Обновить** , чтобы сохранить. Можно также выбрать **отменить** , чтобы отменить изменение.

* Операции для **триггеров** и **UDF** похожи на **хранимые процедуры** .

## <a name="troubleshooting"></a>Устранение неполадок

Ниже приведены решения распространенных проблем, возникающих при использовании Azure Cosmos DB в Обозреватель службы хранилища.

### <a name="sign-in-issues"></a>Проблемы входа

Сначала перезапустите приложение, чтобы узнать, устранена ли проблема. Если проблема будет повторяться, продолжайте устранение неполадок.

#### <a name="self-signed-certificate-in-certificate-chain"></a>Самозаверяющий сертификат в цепочке сертификатов

Существует несколько причин, по которым может возникнуть Эта ошибка, две наиболее распространенные из них:

* Вы находитесь за *прозрачным прокси-сервером* . Кто-то, как ИТ-отдел, перехватывает HTTPS-трафик, расшифровывает его, а затем шифрует с помощью самозаверяющего сертификата.

* Вы используете программное обеспечение, например антивирусное программное обеспечение. Программное обеспечение внедряет самозаверяющий сертификат TLS/SSL в получаемые сообщения HTTPS.

Когда Обозреватель службы хранилища находит самозаверяющий сертификат, он не знает, является ли сообщение HTTPS, которое он получает, измененным. Если у вас есть копия самозаверяющего сертификата, вы можете сообщить Обозреватель службы хранилища его доверять. Если вы не знаете, кто внедряет сертификат, то можете выполнить следующие действия, чтобы узнать об этом.

1. Установите OpenSSL:

     - [Windows](https://slproweb.com/products/Win32OpenSSL.html). Любая из легких версий — ОК.
     - macOS и Linux: должны быть добавлены в вашу операционную систему.

1. Выполните команду OpenSSL:
    * Windows: перейдите в каталог install, затем **/bin/** , а затем дважды щелкните **openssl.exe** .
    * Mac и Linux: выполните **OpenSSL** из терминала.
1. Выполните процедуру `s_client -showcerts -connect microsoft.com:443`.
1. Найдите самозаверяющие сертификаты. Если вы не уверены, что это самозаверяющий, то ищите в любом месте, где тема ("s:") и издатель ("i:") совпадают.
1. Если вы обнаружите самозаверяющие сертификаты, скопируйте и вставьте все из, включая **-----начать-----сертификатов** , чтобы **-----конечный-----сертификата** в новый. Файл CER для каждого из них.
1. Откройте обозреватель службы хранилища, а затем выберите **изменить**  >  **SSL-сертификаты**  >  **Импорт сертификатов** . Используйте средство выбора файлов для поиска, выбора и открытия. Созданные CER файлы.

Если вы не нашли самозаверяющие сертификаты, вы можете отправить отзыв для получения дополнительной помощи.

#### <a name="unable-to-retrieve-subscriptions"></a>Не удается получить подписки

Если вы не можете получить подписки после входа, воспользуйтесь следующими предложениями:

* Убедитесь, что у вашей учетной записи есть доступ к подпискам. Для этого войдите в [портал Azure](https://portal.azure.com/).
* Убедитесь, что вы вошли в нужную среду:
  * [Azure](https://portal.azure.com/)
  * [Azure для Китая](https://portal.azure.cn/)
  * [Azure для Германии](https://portal.microsoftazure.de/)
  * [Azure для US Gov организаций.](https://portal.azure.us/)
  * Пользовательская среда или Azure Stack
* Если вы находитесь за прокси-сервером, убедитесь, что Обозреватель службы хранилища прокси-сервер настроен правильно.
* Удалите учетную запись, а затем снова добавьте ее.
* Удалите следующие файлы из домашнего каталога (например: C:\Users\ContosoUser), а затем снова добавьте учетную запись:
  * adalcache-файл;
  * devaccounts-файл;
  * extaccounts-файл.
* Нажмите клавишу F12, чтобы открыть консоль разработчика. Просмотрите консоль на наличие сообщений об ошибках при входе.

   :::image type="content" source="./media/storage-explorer/console.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

#### <a name="unable-to-see-the-authentication-page"></a>Не отображается страница аутентификации

Если страница аутентификации не отображается:

* В зависимости от скорости подключения для загрузки страницы входа может потребоваться некоторое время. Подождите хотя бы одну минуту, прежде чем закрыть диалоговое окно проверки подлинности.
* Если вы находитесь за прокси-сервером, убедитесь, что Обозреватель службы хранилища прокси-сервер настроен правильно.
* В консоли средств разработчика (F12) просмотрите ответы, чтобы узнать, почему проверка подлинности не работает.

#### <a name="cant-remove-an-account"></a>Не удается удалить учетную запись

Если вы не можете удалить учетную запись или если ссылка для повторной проверки подлинности не выполняет никаких действий:

* Удалите следующие файлы из домашнего каталога, а затем добавьте учетную запись еще раз:
  * adalcache-файл;
  * devaccounts-файл;
  * extaccounts-файл.

* Если вы хотите удалить подключенные ресурсы хранилища SAS, удалите:
  * папку %AppData%/StorageExplorer в Windows;
  * Поддержка/Users/<your_name>/Library/Application Support/StorageExplorer для macOS
  * ~/.config/StorageExplorer в Linux.
  
  > [!NOTE]
  > При удалении этих файлов необходимо повторно **ввести все учетные данные** .

### <a name="httphttps-proxy-issue"></a>Ошибка прокси-сервера HTTP/HTTPS

Вы не можете перечислить Azure Cosmos DB узлы в дереве слева при настройке прокси-сервера HTTP/HTTPS в ASE. Azure Cosmos DB обозреватель данных можно использовать в портал Azure в качестве обходного решения.

### <a name="development-node-under-local-and-attached-node-issue"></a>Неполадки с узлом "Development" (Разработка) в узле "Local and Attached" (Локальные и присоединенные)

После выбора узла **Разработка** в **локальном и присоединенном** узле в дереве слева нет ответа. Такое поведение ожидаемо.

:::image type="content" source="./media/storage-explorer/development.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

### <a name="attach-an-azure-cosmos-db-account-in-the-local-and-attached-node-error"></a>Присоединение учетной записи Azure Cosmos DB в **локальной и вложенной** ошибках узла

Если после подключения учетной записи Azure Cosmos DB в **локальном и присоединенном** узле появляется следующая ошибка, убедитесь, что вы используете правильную строку подключения.

:::image type="content" source="./media/storage-explorer/attached-error.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

### <a name="expand-azure-cosmos-db-node-error"></a>Ошибка развертывания узла Azure Cosmos DB

При попытке развернуть узлы в дереве слева может появиться следующее сообщение об ошибке.

:::image type="content" source="./media/storage-explorer/expand-error.png" alt-text="Снимок экрана, показывающий значок подключаемого модуля на левой панели.":::

Попробуйте следующие предложения:

* Убедитесь, что Azure Cosmos DB учетная запись находится в состоянии готовности к работе. Повторите попытку, когда учетная запись будет успешно создана.
* Если учетная запись находится под **быстрым доступом** или **локальными и подключенными** узлами, проверьте, не удалена ли учетная запись. В этом случае необходимо удалить узел вручную.

## <a name="next-steps"></a>Дальнейшие действия

* Просмотрите это видео, чтобы узнать, как использовать Azure Cosmos DB в Обозреватель службы хранилища Azure: [используйте Azure Cosmos DB в обозреватель службы хранилища Azure](https://www.youtube.com/watch?v=iNIbg1DLgWo&feature=youtu.be).
* Дополнительные сведения об Обозревателе службы хранилища и подключении дополнительных служб см. в статье о [начале работы с Обозревателем службы хранилища](../vs-azure-tools-storage-manage-with-storage-explorer.md).