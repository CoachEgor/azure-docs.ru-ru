---
title: Завершение срока действия данных в Azure Cosmos DB с помощью срока жизни
description: Функция TTL в Microsoft Azure Cosmos DB позволяет автоматически удалять документы из системы по прошествии определенного периода времени.
author: rimman
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 05/21/2019
ms.author: rimman
ms.reviewer: sngun
ms.openlocfilehash: 0b32665b09eb02c337a12ac3cfc2b474fa82711a
ms.sourcegitcommit: f56b267b11f23ac8f6284bb662b38c7a8336e99b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/28/2019
ms.locfileid: "67447244"
---
# <a name="time-to-live-ttl-in-azure-cosmos-db"></a>Срок жизни (TTL) в Azure Cosmos DB 

С помощью **срок жизни** или TTL, Azure Cosmos DB позволяет автоматически удалять элементы из контейнера через определенный промежуток времени. По умолчанию можно задать срок жизни на уровне контейнера и переопределить значения по элементу. После установки срока жизни на уровне контейнера или элемента Azure Cosmos DB будет автоматически удалять эти элементы по прошествии периода времени с момента их последнего изменения. Значение срока жизни настраивается в секундах. При настройке срока ЖИЗНИ, система автоматически удалит просроченные элементы, основываясь на значение срока ЖИЗНИ, без необходимости операции удаления, выдается явно клиентским приложением.

## <a name="time-to-live-for-containers-and-items"></a>Срок жизни для контейнеров и элементов

Время существования задается в секундах, и он интерпретируется как отсчитываются с момента последнего изменения элемента. Вы можете установить срок жизни для контейнера или элемента в контейнере:

1. **Срок жизни контейнера** (устанавливается с использованием значения `DefaultTimeToLive`):

   - Если свойство отсутствует (или имеет значение NULL), срок действия элементов не истекает автоматически.

   - Если присутствует и его значением имеет значение «-1», это значение равно бесконечности и элементы имеют неограниченный срок жизни по умолчанию.

   - Если присутствует и его значением является некоторое число *«n»* — элементы истекает *«n»* секунд после их последнего изменения времени.

2. **Срок жизни элемента** (устанавливается с использованием значения `ttl`):

   - Это свойство применимо, только если значение `DefaultTimeToLive` присутствует и оно не имеет значения NULL для родительского контейнера.

   - Если свойство присутствует, оно переопределяет значение `DefaultTimeToLive` родительского контейнера.

## <a name="time-to-live-configurations"></a>Настройки срока жизни

* Если задано значение TTL *«n»* на контейнер, затем элементы в этом контейнере будут действительны в течение *n* секунд.  Если элементы в одном контейнере, имеющие собственное время жизни, задано значение -1 (что означает, что они не истекает) или если некоторые элементы переопределили срок жизни задание, используя другой номер, срок действия этих элементов на основе собственных настроенных TTL значения. 

* Если для контейнера не задан срок жизни, срок жизни элемента в этом контейнере не будет действовать. 

* Если срок жизни контейнера имеет значение -1, элемент в этом контейнере, срок жизни которого равен n, будет действителен в течение n секунд, а срок действия оставшихся элементов не истечет. 

Удаление элементов на основе срока жизни бесплатное. Дополнительная плата не взимается (то есть дополнительные единицы запросов не потребляются), когда элемент удаляется в результате истечения срока жизни.

## <a name="examples"></a>Примеры

В этом разделе приведены некоторые примеры с использованием разных срока жизни значения, назначенные для контейнера и элементы.

### <a name="example-1"></a>Пример 1

Срок ЖИЗНИ для контейнера имеет значение на null (DefaultTimeToLive = null)

|Срок ЖИЗНИ для элемента| Результат|
|---|---|
|TTL = null|    Свойство TTL отключено. Элемента никогда не истекает (по умолчанию).|
|ttl = -1   |Свойство TTL отключено. Элемента никогда не истекает.|
|ttl = 2000 |Свойство TTL отключено. Элемента никогда не истекает.|


### <a name="example-2"></a>Пример 2

Срок ЖИЗНИ для контейнера имеет значение -1 (DefaultTimeToLive = -1)

|Срок ЖИЗНИ для элемента| Результат|
|---|---|
|TTL = null |Срок ЖИЗНИ включен. Элемента никогда не истекает (по умолчанию).|
|ttl = -1   |Срок ЖИЗНИ включен. Элемента никогда не истекает.|
|ttl = 2000 |Срок ЖИЗНИ включен. Элемента истекает через 2000 секунд.|


### <a name="example-3"></a>Пример 3

Срок ЖИЗНИ для контейнера имеет значение 1000 (DefaultTimeToLive = 1000)

|Срок ЖИЗНИ для элемента| Результат|
|---|---|
|TTL = null|    Срок ЖИЗНИ включен. Элемент будут действительны в течение 1000 секунд (по умолчанию).|
|ttl = -1   |Срок ЖИЗНИ включен. Элемента никогда не истекает.|
|ttl = 2000 |Срок ЖИЗНИ включен. Элемента истекает через 2000 секунд.|

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как настроить время жизни в следующих статьях:

* [Как настроить срок жизни в Azure Cosmos DB](how-to-time-to-live.md)
