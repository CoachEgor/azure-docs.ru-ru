---
title: Команды по расширению MongoDB для управления данными в API API Azure Cosmos DB для MongoDB
description: В этой статье описывается, как использовать команды расширения MongoDB для управления данными, хранящимися в API API Azure Cosmos DB для MongoDB.
author: SnehaGunda
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 03/26/2019
ms.author: sngun
ms.openlocfilehash: f57b274715eb1c8a4d517f5655c09c366574d412
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75445217"
---
# <a name="use-mongodb-extension-commands-to-manage-data-stored-in-azure-cosmos-dbs-api-for-mongodb"></a>Используйте команды расширения MongoDB для управления данными, хранящимися в API API Azure Cosmos DB для MongoDB 

Azure Cosmos DB — это глобально распределенная многомодельная служба базы данных Майкрософт. Вы можете общаться с API API Azure Cosmos DB для MongoDB, используя любой из [драйверов клиентов MongoDB](https://docs.mongodb.org/ecosystem/drivers)с открытым исходным кодом. API API Azure Cosmos DB для MongoDB позволяет использовать существующие драйверы клиентов, придерживаясь [протокола проволоки MongoDB.](https://docs.mongodb.org/manual/reference/mongodb-wire-protocol)

Используя API Azure Cosmos DB для MongoDB, вы можете наслаждаться преимуществами Cosmos DB, такими как глобальное распространение, автоматический застежка, высокая доступность, гарантии задержки, автоматическое, шифрование в состоянии покоя, резервные копирования и многое другое, сохраняя при этом ваши инвестиции в приложении MongoDB.

## <a name="mongodb-protocol-support"></a>Поддержка протокола MongoDB

По умолчанию API API Azure Cosmos DB для MongoDB совместим с версией сервера MongoDB 3.2, для получения более подробной информации [см.](mongodb-feature-support.md) Функции или операторы запросов, добавленные в версию MongoDB 3.4, в настоящее время доступны в качестве предварительного просмотра в API API Azure Cosmos DB для MongoDB. Следующие команды расширения поддерживают определенную функциональность Azure Cosmos DB при выполнении операций CRUD на данных, хранящихся в API API Azure Cosmos DB для MongoDB:

* [Создание базы данных](#create-database)
* [Обновление базы данных](#update-database)
* [Получить базу данных](#get-database)
* [Создание коллекции](#create-collection)
* [Коллекция обновлений](#update-collection)
* [Получить коллекцию](#get-collection)

## <a name="create-database"></a><a id="create-database"></a>Создание базы данных

Команда расширения базы данных создает новую базу данных MongoDB. Имя базы данных используется из контекста баз данных, на котором выполняется выполнение команды. Формат команды CreateDatabase:

```
{
  customAction: "CreateDatabase",
  offerThroughput: <Throughput that you want to provision on the database>
}
```

В следующей таблице описаны параметры в команде:

|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
| customAction   |  строка  |   Название пользовательской команды, она должна быть "CreateDatabase".      |
| offerThroughput | INT  | Предусмотренная пропускная информация, установленная в базе данных. Это необязательный параметр. |

### <a name="output"></a>Выходные данные

Возвращает пользовательский командный ответ по умолчанию. Ознакомьтесь с выходом пользовательской команды [по умолчанию](#default-output) для параметров вывода.

### <a name="examples"></a>Примеры

**Создание базы данных**

Для создания базы данных под названием "тест" используйте следующую команду:

```shell
use test
db.runCommand({customAction: "CreateDatabase"});
```

**Создание базы данных с пропускной их пропускной водоизмещение**

Для создания базы данных с именем "тест" и подготовленной пропускной связи 1000 RUs используйте следующую команду:

```shell
use test
db.runCommand({customAction: "CreateDatabase", offerThroughput: 1000 });
```

## <a name="update-database"></a><a id="update-database"></a>База данных обновления

Команда расширения базы данных обновления обновляет свойства, связанные с указанной базой данных. В настоящее время можно только обновить свойство "offerThroughput".

```
{
  customAction: "UpdateDatabase",
  offerThroughput: <New throughput that you want to provision on the database> 
}
```

В следующей таблице описаны параметры в команде:

|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
| customAction    |    строка     |   Название пользовательской команды. Должно быть "UpdateDatabase".      |
|  offerThroughput   |  INT       |     Новая просачтовая пропускная информация, которую вы хотите установить в базе данных.    |

### <a name="output"></a>Выходные данные

Возвращает пользовательский командный ответ по умолчанию. Ознакомьтесь с выходом пользовательской команды [по умолчанию](#default-output) для параметров вывода.

### <a name="examples"></a>Примеры

**Обновление подготовленной пропускной четылябольшой перевалки, связанной с базой данных**

Для обновления подготовленной пропускной системы базы данных с именем "тест" до 1200 RUs используйте следующую команду:

```shell
use test
db.runCommand({customAction: "UpdateDatabase", offerThroughput: 1200 });
```

## <a name="get-database"></a><a id="get-database"></a>Получить базу данных

Команда расширения базы данных возвращает объект базы данных. Имя базы данных используется из контекста базы данных, на котором выполняется команда.

```
{
  customAction: "GetDatabase"
}
```

В следующей таблице описаны параметры в команде:


|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
|  customAction   |   строка      |   Название пользовательской команды. Должно быть "GetDatabase"|
        
### <a name="output"></a>Выходные данные

Если команда преуспевает, ответ содержит документ со следующими полями:

|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
|  `ok`   |   `int`     |   Статус ответа. 1 успех. 0 ' ' ' неудача.      |
| `database`    |    `string`        |   Имя базы данных.      |
|   `provisionedThroughput`  |    `int`      |    Резервная пропускная часть, установленная в базе данных. Это необязательный параметр ответа.     |

Если команда завершается неудачей, возвращается пользовательский ответ команды по умолчанию. Ознакомьтесь с выходом пользовательской команды [по умолчанию](#default-output) для параметров вывода.

### <a name="examples"></a>Примеры

**Получить базу данных**

Чтобы получить объект базы данных для базы данных под названием "тест", используйте следующую команду:

```shell
use test
db.runCommand({customAction: "GetDatabase"});
```

## <a name="create-collection"></a><a id="create-collection"></a>Создание коллекции

Команда расширения создания создает новую коллекцию MongoDB. Имя базы данных используется из контекста баз данных, на котором выполняется выполнение команды. Формат команды CreateCollection:

```
{
  customAction: "CreateCollection",
  collection: <Collection Name>,
  offerThroughput: <Throughput that you want to provision on the collection>,
  shardKey: <Shard key path>  
}
```

В следующей таблице описаны параметры в команде:

|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
| customAction    | строка | Название пользовательской команды. Должно быть "СоздатьКоллекцию"     |
| коллекция      | строка | Имя коллекции                                   |
| offerThroughput | INT    | Установленная пропускная информация для установки в базе данных. Это опциональный параметр |
| shardKey        | строка | Путь Shard Key для создания осколки коллекции. Это опциональный параметр |

### <a name="output"></a>Выходные данные

Возвращает пользовательский командный ответ по умолчанию. Ознакомьтесь с выходом пользовательской команды [по умолчанию](#default-output) для параметров вывода.

### <a name="examples"></a>Примеры

**Создание незатхлой коллекции**

Чтобы создать неизлимываемую коллекцию с названием "testCollection" и прокладкой 1000 rUs, используйте следующую команду: 

```shell
use test
db.runCommand({customAction: "CreateCollection", collection: "testCollection", offerThroughput: 1000});
``` 

**Создание осколки коллекции**

Для создания осколки коллекции с названием "testCollection" и прокладкой 1000 rUs используйте следующую команду:

```shell
use test
db.runCommand({customAction: "CreateCollection", collection: "testCollection", offerThroughput: 1000, shardKey: "a.b" });
```

## <a name="update-collection"></a><a id="update-collection"></a>Коллекция обновлений

Команда расширения обновления обновления обновляет свойства, связанные с указанной коллекцией.

```
{
  customAction: "UpdateCollection",
  collection: <Name of the collection that you want to update>,
  offerThroughput: <New throughput that you want to provision on the collection> 
}
```

В следующей таблице описаны параметры в команде:

|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
|  customAction   |   строка      |   Название пользовательской команды. Должно быть "ОбновлениеКоллекция".      |
|  коллекция   |   строка      |   Имя коллекции.       |
| offerThroughput   |INT|   Предусмотренная пропускная выливка для установки на коллекцию.|

## <a name="output"></a>Выходные данные

Возвращает пользовательский командный ответ по умолчанию. Ознакомьтесь с выходом пользовательской команды [по умолчанию](#default-output) для параметров вывода.

### <a name="examples"></a>Примеры

**Обновление прокладки, связанной с коллекцией**

Для обновления подготовленной пропускной перевалки коллекции с названием "testCollection" до 1200 rUs используйте следующую команду:

```shell
use test
db.runCommand({customAction: "UpdateCollection", collection: "testCollection", offerThroughput: 1200 });
```

## <a name="get-collection"></a><a id="get-collection"></a>Получить коллекцию

Пользовательская команда получения коллекции возвращает объект коллекции.

```
{
  customAction: "GetCollection",
  collection: <Name of the collection>
}
```

В следующей таблице описаны параметры в команде:


|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
| customAction    |   строка      |   Название пользовательской команды. Должно быть "GetCollection".      |
| коллекция    |    строка     |    Имя коллекции.     |

### <a name="output"></a>Выходные данные

Если команда преуспевает, ответ содержит документ со следующими полями


|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
|  `ok`   |    `int`     |   Статус ответа. 1 успех. 0 ' ' ' неудача.      |
| `database`    |    `string`     |   Имя базы данных.      |
| `collection`    |    `string`     |    Имя коллекции.     |
|  `shardKeyDefinition`   |   `document`      |  Документ спецификации индекса, используемый в качестве ключа осколка. Это необязательный параметр ответа.       |
|  `provisionedThroughput`   |   `int`      |    Предусмотрел пропускную прикладдля установку на коллекцию. Это необязательный параметр ответа.     |

Если команда завершается неудачей, возвращается пользовательский ответ команды по умолчанию. Ознакомьтесь с выходом пользовательской команды [по умолчанию](#default-output) для параметров вывода.

### <a name="examples"></a>Примеры

**Получить коллекцию**

Чтобы получить объект сбора для коллекции под названием "testCollection", используйте следующую команду:

```shell
use test
db.runCommand({customAction: "GetCollection", collection: "testCollection"});
```

## <a name="default-output-of-a-custom-command"></a><a id="default-output"></a>Выход пользовательской команды по умолчанию

Если не указано, пользовательский ответ содержит документ со следующими полями:

|**Поле**|**Тип** |**Описание** |
|---------|---------|---------|
|  `ok`   |    `int`     |   Статус ответа. 1 успех. 0 ' ' ' неудача.      |
| `code`    |   `int`      |   Возвращается только в случае сбой команды (т.е. ОК No 0). Содержит код ошибки MongoDB. Это необязательный параметр ответа.      |
|  `errMsg`   |  `string`      |    Возвращается только в случае сбой команды (т.е. ОК No 0). Содержит удобное сообщение об ошибке. Это необязательный параметр ответа.      |

## <a name="next-steps"></a>Дальнейшие действия

Далее вы можете перейти к изучению следующих концепций Azure Cosmos DB: 

* [Индексирование в Azure Cosmos DB](../cosmos-db/index-policy.md)
* [Срок жизни для данных Azure Cosmos DB](../cosmos-db/time-to-live.md)
