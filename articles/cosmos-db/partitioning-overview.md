---
title: Секционирование в базе данных Azure Cosmos DB
description: Общие сведения о секционировании в Azure Cosmos DB.
ms.author: rimman
author: rimman
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 03/31/2019
ms.openlocfilehash: e88be8e7b94566ff94dd94a8679f8ade9d54c0b6
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60928708"
---
# <a name="partitioning-in-azure-cosmos-db"></a>Секционирование в базе данных Azure Cosmos DB

Azure Cosmos DB использует секционирование, масштабирование отдельных контейнеров в базу данных в соответствии с потребностями производительности приложения. В секционирование, элементы в контейнере можно разделить на различные подмножества вызывается *логические разделы*. Логические разделы формируются на основе значения *ключ секции* связанный с каждым элементом в контейнере. Все элементы в логической секции имеют одинаковое значение ключа секции.

Например контейнер содержит элементы. Каждый элемент имеет уникальное значение для `UserID` свойство. Если `UserID` служит в качестве секции ключ элементы в контейнере, а 1000 уникальны `UserID` значения, 1000 логические разделы будут определены для контейнера.

В дополнение к ключ секции, который определяет логический раздел элемента, каждый элемент в контейнере имеет *идентификатор элемента* (уникальным в пределах логической секции). Сочетание ключа секции и идентификатор элемента создает элемента *индекс*, который уникально идентифицирует элемент.

[Выбор ключа секции](partitioning-overview.md#choose-partitionkey) — важное решение, которые влияют на производительность приложения.

## <a name="managing-logical-partitions"></a>Управление логическими разделами

Azure Cosmos DB автоматически и прозрачно управляет размещением логические разделы на физические разделы для эффективного удовлетворяют потребности масштабируемости и производительности контейнера. Как увеличить пропускную способность и хранилище требований к приложению, Azure Cosmos DB перемещает логические разделы, чтобы автоматически распределять нагрузку на большее количество серверов. 

Azure Cosmos DB использует секционирование на основе хэша для распределения между физическими секциями логические разделы. Azure Cosmos DB хэширует значение ключа секции элемента. Хэшированный результат определяет физической секции. Затем Azure Cosmos DB распределяет пространство секции хэшей ключей равномерно между физическими секциями.

Запросы, доступ к данным в одной логической секции, экономичнее, чем запросы, которые обращаются к нескольким секциям. Транзакции (в хранимые процедуры или триггеры) допустимы только элементы в одной логической секции.

Дополнительные сведения о том, как Azure Cosmos DB управляет секциями, см. в разделе [логические разделы](partition-data.md). (Его не требуется знать внутренние сведения для создания или запуска приложений, но добавлен здесь интересно чтения.)

## <a id="choose-partitionkey"></a>Выбор ключа секции

Ниже приведен полезные рекомендации по выбору ключа секции.

* Одной логической секции имеют верхний предел в 10 ГБ хранилища.  

* Контейнеры Azure Cosmos имеют минимальную пропускную способность в 400 единиц запросов в секунду (ЕЗ/с). Запросы на один и тот же ключ секции не может превышать пропускную способность, выделенную для секции. Если запросы превышают выделенную пропускную способность, запросы будут ограничены по скорости. Поэтому важно выбрать ключ секции, который не создает "горячие точки" в приложении.

* Выберите ключ секции с широким диапазоном значений и доступом к шаблонам, равномерно распределенным по логическим секциям. Благодаря этому разбросанных набор логических секций, данные и действия в контейнере, чтобы ресурсы для хранилища данных и пропускной способности может быть распределена между логическими разделами.

* Выберите ключ секции, который равномерно распределяет рабочую нагрузку по всем секциям и равномерно со временем. Выбранный ключ секции должен сбалансировать необходимость для эффективного запросов и транзакций конечному распределения элементов по нескольким разделам, чтобы обеспечить масштабируемость.

* Кандидаты для ключей разделов могут включать свойства, которые часто встречаются в качестве фильтра в запросах. Запросы можно эффективно перенаправлять путем включения ключа секции в предикат фильтра.

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения о [секционирование и горизонтальное масштабирование в Azure Cosmos DB](partition-data.md).
* Дополнительные сведения о подготовленной пропускной способности в базе данных Azure Cosmos DB см. в [этой статье](request-units.md).
* Дополнительные сведения о глобальном распределении в базе данных Azure Cosmos DB см. в [этой статье](distribute-data-globally.md).
