---
title: Секционирование в базе данных Azure Cosmos DB
description: Узнайте о разделе в Azure Cosmos DB, рекомендациях при выборе ключа раздела и управлении логическими разделами
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 12/02/2019
ms.openlocfilehash: 551703b5dcca082904197010366ee059998dde4b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79251873"
---
# <a name="partitioning-in-azure-cosmos-db"></a>Секционирование в базе данных Azure Cosmos DB

Azure Cosmos DB использует разделдля отдельных контейнеров в базе данных для удовлетворения потребностей в производительности приложения. При разделе элементы в контейнере делятся на отдельные подмножества, называемые *логическими разделами.* Логические разделы формируются на основе значения *ключа раздела,* связанного с каждым элементом в контейнере. Все элементы в логическом разделе имеют одинаковое значение ключа раздела.

Например, контейнер содержит предметы. Каждый элемент имеет уникальное значение для собственности. `UserID` Если `UserID` в качестве ключа раздела для элементов в контейнере и `UserID` имеется 1000 уникальных значений, для контейнера создается 1000 логических разделов.

В дополнение к ключу раздела, определяющего логический раздел элемента, каждый элемент в контейнере имеет *идентификатор элемента* (уникальный в логическом разделе). Объединение ключа раздела и идентификатора элемента создает *индекс*элемента, который однозначно идентифицирует элемент.

[Выбор ключа раздела](partitioning-overview.md#choose-partitionkey) является важным решением, которое повлияет на производительность приложения.

## <a name="managing-logical-partitions"></a>Управление логическими разделами

Azure Cosmos DB прозрачно и автоматически управляет размещением логических разделов на физических разделах, чтобы эффективно удовлетворить масштабируемость и эксплуатационные потребности контейнера. По мере увеличения пропускной памяти и требований к хранению приложения Azure Cosmos DB перемещает логические разделы для автоматического распределения нагрузки по большему числу серверов. 

Azure Cosmos DB использует хэш-наосновенные разделы для распространения логических разделов по физическим разглашеям. Azure Cosmos DB хэширует ключевое значение элемента. Результат хэшена определяет физическую перегородку. Затем Azure Cosmos DB равномерно распределяет ключевое пространство ключей раздела по физическим разглашениям.

Запросы, которые получают доступ к данным в рамках одного логического раздела, являются более рентабельными, чем запросы, которые получают доступ к нескольким разделам. Транзакции (в сохраненных процедурах или триггерах) допускаются только против элементов в одном логическом разделе.

Чтобы узнать больше о том, как Azure Cosmos DB управляет разделами, [см.](partition-data.md) (Не обязательно понимать внутренние детали для создания или запуска приложений, но здесь добавлено для любознательного читателя.)

## <a name="choosing-a-partition-key"></a><a id="choose-partitionkey"></a>Выбор ключа секции

Ниже приводится хорошее руководство для выбора ключа раздела:

* Один логический раздел имеет верхний предел 20 ГБ памяти.  

* Контейнеры Azure Cosmos имеют минимальную пропускную плату 400 единиц запроса в секунду (RU/s). Когда пропускная плата предоставляется в базе данных, минимальный RUs на контейнер составляет 100 единиц запроса в секунду (RU/s). Запросы на один и тот же ключ раздела не могут превышать пропускную выемку, выделенную для раздела. Если запросы превышают выделенную пропускную выливку, запросы ограничены в скорости. Поэтому важно выбрать ключ секции, который не создает "горячие точки" в приложении.

* Выберите ключ секции с широким диапазоном значений и доступом к шаблонам, равномерно распределенным по логическим секциям. Это помогает распределить данные и активность в контейнере по набору логических разделов, так что ресурсы для хранения данных и пропускной их объем могут быть распределены по логическим разделам.

* Выберите ключ раздела, который равномерно распределяет рабочую нагрузку по всем разделам и равномерно с течением времени. Выбор ключа раздела должен сбалансировать потребность в эффективных запросах и транзакциях раздела с целью распределения элементов по нескольким разделам для достижения масштабируемости.

* Кандидаты на ключи раздела могут включать свойства, которые часто отображаются в качестве фильтра в запросах. Запросы можно эффективно перенаправлять путем включения ключа секции в предикат фильтра.

## <a name="next-steps"></a>Дальнейшие действия

* Узнайте о [разделении и горизонтальном масштабировании в Azure Cosmos DB.](partition-data.md)
* Узнайте о [прописной пропускной перевалке в Azure Cosmos DB](request-units.md).
* Узнайте о [глобальном дистрибуции в Azure Cosmos DB](distribute-data-globally.md).
