---
title: Часто задаваемые вопросы о пропускной компании в режиме автопилота Azure Cosmos DB
description: Часто задаваемые вопросы о режиме автопилота для баз данных Azure Cosmos DB и контейнеров
author: deborahc
ms.author: dech
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 12/16/2019
ms.openlocfilehash: d2ad585cabefb9ea78b88e748e422c745c11d03f
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75483314"
---
# <a name="frequently-asked-questions-about-provisioned-throughput-in-azure-cosmos-db-autopilot-mode-preview"></a>Часто задаваемые вопросы о прослушке в режиме автопилота Azure Cosmos DB (Предварительный просмотр)
В режиме автопилота Azure Cosmos DB будет автоматически управлять и масштабировать RU/s вашего контейнера или базы данных на основе использования. Эта статья отвечает на часто задаваемые вопросы о режиме автопилота. 

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

### <a name="is-autopilot-mode-supported-for-all-apis"></a>Поддерживается ли режим автопилота для всех AA?
Да, режим автопилота поддерживается для всех API: Core (S'L), Gremlin, Table, Cassandra и API для MongoDB.

### <a name="is-autopilot-mode-supported-for-multi-master-accounts"></a>Поддерживается ли режим автопилота для учетных записей с несколькими мастерами?
Да, режим автопилота поддерживается для многомастерных учетных записей. Максимальное количество RU/s доступно в каждом регионе, который добавляется к учетной записи «Космос». 

### <a name="what-is-the-pricing-for-autopilot"></a>Какова цена на автопилот?
Для получения подробной информации обратитесь к [странице ценообразования](https://azure.microsoft.com/pricing/details/cosmos-db/) Azure Cosmos DB. 

### <a name="how-do-i-enable-autopilot-for-my-containers-or-databases"></a>Как включить автопилот для контейнеров или баз данных?
Режим автопилота можно использовать на новых контейнерах и базах данных, созданных с помощью портала Azure. 

### <a name="is-there-cli-or-sdk-support-to-create-containers-or-databases-with-autopilot-mode"></a>Есть ли поддержка CLI или SDK для создания контейнеров или баз данных в режиме автопилота?
В настоящее время в предварительном выпуске можно создавать ресурсы только в режиме автопилота с портала Azure. Поддержка CLI и SDK пока недоступна.

### <a name="can-i-enable-autopilot-on-an-existing-container-or-a-database"></a>Могу ли я включить автопилот на существующем контейнере или базе данных?
В настоящее время при их создании можно включить автопилот на новых контейнерах и базах данных. Поддержка для включения режима автопилота на существующих контейнерах и базах данных пока недоступна. Можно перенести существующие контейнеры в новый контейнер с помощью [Azure Data Factory](../data-factory/connector-azure-cosmos-db.md) или [изменить канал.](change-feed.md) 

### <a name="can-i-turn-off-autopilot-mode-on-a-container-or-database"></a>Могу ли я отключить режим автопилота в контейнере или базе данных?
Да, вы можете отключить автопилот, переключившись на опцию "Руководство" для прослеживаемой пропускной выгоды. В предварительном выпуске после перехода из режима автопилота в ручной режим нельзя снова включить автопилот для того же ресурса. 

### <a name="is-autopilot-mode-supported-for-shared-throughput-databases"></a>Поддерживается ли режим автопилота для общих баз данных пропускной информации?
Да, режим автопилота поддерживается для общих баз данных пропускной информации. Для включения этой функции выберите режим автопилота и опцию **пропускной связи «Обеспечение»** при создании базы данных. 

### <a name="what-is-the-number-of-allowed-collections-per-shared-throughput-database-when-autopilot-is-enabled"></a>Каково количество разрешенных коллекций в общей базе данных пропускной информации при включении автопилота?
Для общих баз данных пропускной информации с включенным режимом автопилота количество разрешенных коллекций: MIN (25, Max RU/s базы данных / 1000). Например, если максимальная пропускная стоимость базы данных составляет 20 000 руб./с, база данных может иметь MIN (25, 20 000 RU/s / 1000) и 20 коллекций. 


### <a name="what-is-the-storage-limit-associated-with-each-max-rus-option"></a>Что такое лимит хранения, связанный с каждым опционом max RU/s?  
Лимит хранилища в ГБ для каждого max RU/s составляет: Max RU/s базы данных или контейнера / 100. Например, если max RU/s составляет 20 000 руб./с, ресурс может поддерживать 200 ГБ памяти. Ознакомьтесь со статьей [об ограничениях автопилота](provision-throughput-autopilot.md#autopilot-limits) для доступных макс ru/s и вариантов хранения. 

### <a name="what-happens-if-i-exceed-the-storage-limit-associated-with-my-max-throughput"></a>Что произойдет, если я превысию лимит хранилища, связанный с максимальной пропускной емкостью?
Если лимит хранилища, связанный с максимальной пропускной емкостью базы данных или контейнера, превышен, Azure Cosmos DB автоматически увеличит максимальную пропускную емкость до следующего наивысшего уровня, который может поддерживать этот уровень памяти. Например, предположим, что база данных или контейнер подготовлены с опцией максимальной пропускной памяти 4000 RU/s, которая имеет лимит хранения 50 ГБ. Если объем хранилища ресурса увеличивается до 100 ГБ, максимальная часть RU/s базы данных или контейнера автоматически увеличивается до 20 000 руб./с, что может поддерживать до 200 ГБ. 

### <a name="how-quickly-will-autopilot-scale-up-and-down-based-on-spikes-in-traffic"></a>Как быстро автопилот будет масштабироваться вверх и вниз на основе скачков трафика?
Автопилот мгновенно увеличит или снизит RU/s в пределах минимального и максимального диапазона RU/s, основанного на входящий трафик. Выставление счетов осуществляется с 1-часовой детализацией, где с вас взимается самая высокая ru/s в течение определенного часа. 

### <a name="can-i-specify-a-custom-max-throughput-rus-value-for-autopilot-mode"></a>Могу ли я указать пользовательское максимальное значение пропускной выхажи (RU/s) для режима автопилота?
В настоящее время, во время предварительного релиза, вы можете выбрать между [четырьмя вариантами](provision-throughput-autopilot.md#autopilot-limits) максимальной пропускной выхваживсея (RU/s).

### <a name="can-i-increase-the-max-rus-move-to-a-higher-tier-on-the-database-or-container"></a>Могу ли я увеличить максимум RU/s (переход на более высокий уровень) в базе данных или контейнере? 
Да. Из опции **"Шкала & настройки** для контейнера" или опции **"Масштаб"** для базы данных можно выбрать более высокий максимум RU/s для автопилота. Это асинхронная операция масштабирования, которая может занять некоторое время (обычно 4-6 часов, в зависимости от выбранного RU/s), поскольку служба предусматривает увеличение ресурсов для поддержки более высокой шкалы. 

### <a name="can-i-reduce-the-max-rus-move-to-a-lower-tier-on-the-database-or-container"></a>Могу ли я уменьшить max RU/s (переход на более низкий уровень) в базе данных или контейнере?
Да. До тех пор, пока текущее хранилище базы данных или контейнера находится ниже [предела хранилища,](#what-is-the-storage-limit-associated-with-each-max-rus-option) связанного с уровнем max RU/s, который вы хотите уменьшить, вы можете уменьшить максимум RU/s до этого уровня. Например, если вы выбрали 20 000 руб./с в качестве максимума RU/s, вы можете снизить максимальную сумму RU/s до 4000 руб./с, если у вас меньше 50 ГБ памяти (лимит хранения, связанный с 4000 RU/s).

### <a name="what-is-the-mapping-between-the-max-rus-and-physical-partitions"></a>Что такое отображение между макс RU/s и физическими перегородками?
При первом выборе max RU/s Azure Cosmos DB будет предоставлять: Max RU/s / 10 000 RU/s - физические перегородки. Каждый физический раздел может поддерживать до 10 000 RU/s и 50 ГБ [памяти.](partition-data.md#physical-partitions) По мере увеличения размера хранилища Azure Cosmos DB автоматически делит разделы, чтобы добавить больше физических разделов для обработки увеличения хранилища или увеличить максимальный уровень RU/s, если хранилище [превышает связанный предел.](#what-is-the-storage-limit-associated-with-each-max-rus-option) 

Max RU/s базы данных или контейнера равномерно делится на все физические разделы. Таким образом, общая пропускная емкость любого физического раздела может масштабироваться до: Max RU/s базы данных или контейнера / физических разделов. 

### <a name="what-happens-if-incoming-requests-exceed-the-max-rus-of-the-database-or-container"></a>Что произойдет, если входящие запросы превысят максимальные RU/s базы данных или контейнера?
Если общий объем потребляемых RU/s превышает максимальный RU/s контейнера или базы данных, запросы, превышающие максимальный RU/s, будут задушены и вернут код состояния 429. Запросы, которые приводят к более чем 100% нормализованного использования также будут задушены. Нормализованное использование определяется как максимум использования RU/s во всех физических разделах. Например, предположим, что максимальная пропускная способность составляет 20 000 руб./с, и у вас есть два физических раздела, P_1 и P_2, каждый из которых способен масштабироваться до 10 000 руб./с. В данную секунду, если P_1 использовала 6000 РУ, а P_2 8000 рупов, нормализованное использование MAX (6000 RU / 10,000 RU, 8000 RU / 10,000 RU) 0,8.

> [!NOTE]
> Клиент SDKs и инструменты импорта данных Клиента Azure Cosmos (Azure Data Factory, библиотека исполнителей навалом) автоматически делают повторную попытку на 429s, поэтому иногда 429 s в порядке. Устойчивое большое количество 429s может указывать на то, что вам необходимо увеличить максимальную ru/s или пересмотреть стратегию раздела для [горячего раздела.](#is-it-still-possible-to-see-429s-throttlingrate-limiting-when-autopilot-is-enabled)

### <a name="is-it-still-possible-to-see-429s-throttlingrate-limiting-when-autopilot-is-enabled"></a>Можно ли увидеть 429s (регулирование / ограничение скорости), когда автопилот включен? 
Да. Можно увидеть 429 в двух сценариях. Во-первых, когда общий объем потребляемых RU/s превышает максимальный RU/s контейнера или базы данных, служба соответствующим образом задушит запросы. 

Во-вторых, если имеется горячая раздел, т.е. логическое значение ключа раздела, которое имеет непропорционально большее количество запросов по сравнению с другими ключевыми значениями раздела, возможно, что базовая физическая часть превысит свой бюджет RU/s. В качестве наилучшей практики, чтобы избежать горячих разделов, [выбрать хороший ключ раздела,](partitioning-overview.md#choose-partitionkey) что приводит к равномерному распределению как хранения, так и пропускной платы. 

Например, если вы выберете опцию максимальной пропускной памяти 20 000 RU/s и имеете 200 ГБ памяти с четырьмя физическими перегородками, каждый физический раздел может быть автоматически масштабирован до 5000 RU/s. Если на конкретном логическом ключе раздела была горячая перегородка, то вы увидите 429, когда базовая физическая перегородка, в котором он находится, превышает 5000 руб./с, т.е. превышает 100% нормализованное использование.

## <a name="next-steps"></a>Дальнейшие действия

* Узнайте, как [включить автопилот в контейнере или базе данных Azure Cosmos.](provision-throughput-autopilot.md#create-a-database-or-a-container-with-autopilot-mode)
* Узнайте о [преимуществах автопилота.](provision-throughput-autopilot.md#benefits-of-autopilot-mode)
* Узнайте больше о [логических и физических разделах.](partition-data.md)
