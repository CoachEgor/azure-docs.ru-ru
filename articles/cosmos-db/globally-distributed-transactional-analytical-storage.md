---
title: Глобально распределенное транзакционное и аналитическое (в частном предварительном просмотре) хранилище для контейнеров Azure Cosmos
description: Узнайте о транзакционном и аналитическом хранении и вариантах их конфигурации контейнеров Azure Cosmos.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 09/30/2019
ms.reviewer: sngun
ms.openlocfilehash: 1c2b79f8d0641b1a1386329a2add14ded766bf5a
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77623380"
---
# <a name="globally-distributed-transactional-and-analytical-storage-for-azure-cosmos-containers"></a>Глобально распределенное транзакционное и аналитическое хранилище для контейнеров Azure Cosmos

Контейнер Azure Cosmos внутренне поддерживается двумя движками хранения данных - транзакционным механизмом хранения данных и аналитическим механизмом хранения данных (в частном предварительном просмотре). Оба двигателя хранения являются бревенчатыми и оптимизированы для более быстрых обновлений. Однако каждый из них кодируется по-разному:

* **Транзакционный механизм хранения** — он закодирован в формате, ориентированном на строку, для быстрых транзакционных считываний и запросов.

* **Аналитический механизм хранения** - он закодирован в формате columnar для быстрых аналитических запросов и сканирований.

![Двигатели хранения данных и aPI API Azure Cosmos](./media/globally-distributed-transactional-analytical-storage/storage-engines-api-mapping.png)

Транзакционный механизм хранения поддерживается локальными SSD-накопителями, в то время как аналитическое хранилище хранится на недорогом внекластерном хранении SSD. В следующей таблице отражены заметные различия между транзакционным и аналитическим хранилищем.


|Компонент  |Транзакционное хранение  |Аналитическое хранилище |
|---------|---------|---------|
|Максимальное хранение на контейнер Azure Cosmos |   Неограниченно      |    Неограниченно     |
|Максимальное хранение на логический ключ раздела   |   20 ГБ      |   Неограниченно      |
|Кодирование хранилища  |   Строка-ориентированная, используя внутренний формат.   |   Колонка-ориентированная, используя формат Apache Parquet. |
|Местность хранения |   Репликатое хранилище при поддержке локальных/внутрикластерных SSD. |  Репликатное хранилище, поддерживаемое недорогими дистанционно-кластерными SSD-сот.       |
|Длительность  |    99.99999 (7-9 s)     |  99.99999 (7-9 s)       |
|AAP, которые получают доступ к данным  |   СЗЛ, МонгоДБ, Кассандра, Гремлин, Столы и т.д.       | Apache Spark         |
|Удержание (время к жизни или TTL)   |  Политика, настроенная на контейнер Azure Cosmos `DefaultTimeToLive` с помощью свойства.       |   Политика, настроенная на контейнер Azure Cosmos `ColumnStoreTimeToLive` с помощью свойства.      |
|Цена за ГБ    |   Посмотреть [страницу ценообразования](https://azure.microsoft.com/pricing/details/cosmos-db/)     |   Посмотреть [страницу ценообразования](https://azure.microsoft.com/pricing/details/cosmos-db/)        |
|Цена за операции по хранению    |  Посмотреть [страницу ценообразования](https://azure.microsoft.com/pricing/details/cosmos-db/)         |   Посмотреть [страницу ценообразования](https://azure.microsoft.com/pricing/details/cosmos-db/)        |

## <a name="benefits-of-transactional-and-analytical-storage"></a>Преимущества транзакционного и аналитического хранения

### <a name="no-etl-operations"></a>Нет операций ETL

Традиционные аналитические конвейеры сложны с несколькими этапами, каждый из которых требует операций Extract-Transform-Load (ETL) на уровне вычислений и хранения. Это приводит к сложным архитектурам обработки данных. Это означает высокие затраты на несколько этапов хранения и вычислений, а также высокую задержку из-за огромных объемов данных, передаваемых между различными этапами хранения и вычислений.  

Нет никаких накладных расходов на выполнение операций ETL с Azure Cosmos DB. Каждый контейнер Azure Cosmos поддерживается как транзакционными, так и аналитическими движками хранения данных, а передача данных между транзакционным и аналитическим механизмом хранения осуществляется в движке базы данных и без сетевого перехода. В результате задержка и стоимость значительно ниже по сравнению с традиционными аналитическими решениями. И вы получаете единую глобально распределенную систему хранения данных как для транзакционных, так и для аналитических нагрузок.  

### <a name="store-multiple-versions-update-and-query-the-analytical-storage"></a>Храните несколько версий, обновляйте и задавив аналитический запрос

Аналитическое хранилище полностью updatable, и он содержит полную историю версии всех транзакционных обновлений, которые произошли на контейнере Azure Cosmos.

Любое обновление транзакционного хранилища гарантированно будет видно аналитическому хранилищу в течение 30 секунд. 

### <a name="globally-distributed-multi-master-analytical-storage"></a>Глобально распределенное, мультимастерное аналитическое хранилище

Если учетная запись Azure Cosmos относится к одному региону, то данные, хранящиеся (в транзакционном и аналитическом хранилище) в контейнерах, также отославались до одного региона. С другой стороны, если учетная запись Azure Cosmos глобально распределена, данные, хранящиеся в контейнерах, также распространяются по всему миру.

Для учетных записей Azure Cosmos, настроенных с несколькими областями записи, записывается в контейнер (как транзакционный, так и аналитический объем хранения) всегда выполняется в локальном регионе и, следовательно, они быстро.

Для как одно-, так и для многорегионенных учетных записей Azure Cosmos, независимо от того, являются ли отдельные области записей (одиночный мастер) или несколько регионов записи (также известных как мультимастер), как транзакционные, так и аналитические чтения/запросы выполняются локально в данном регионе.

### <a name="performance-isolation-between-transactional-and-analytical-workloads"></a>Изоляция производительности между транзакционными и аналитическими нагрузками

В данном регионе транзакционные рабочие нагрузки работают на хранении транзакций/строк вашего контейнера. С другой стороны, аналитические нагрузки работают в отношении аналитического/колонки хранилища вашего контейнера. Два двигателя хранения работают независимо и обеспечивают строгую изоляцию производительности между рабочими нагрузками.

Транзакционные рабочие нагрузки потребляют резервированную пропускную стоимость (RUs). В отличие от транзакционных рабочих нагрузок, пропускная стоимость аналитических нагрузок основана на фактическом потреблении. Аналитические рабочие нагрузки потребляют ресурсы по требованию.

## <a name="next-steps"></a>Дальнейшие действия

* [Срок жизни в Azure Cosmos DB](time-to-live.md)
