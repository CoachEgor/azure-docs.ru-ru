---
title: Работа с базами данных, контейнеры и элементы в Azure Cosmos DB
description: В этой статье описывается, как создать и использовать базы данных, контейнеры и элементы в Azure Cosmos DB.
author: rimman
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 05/20/2019
ms.author: rimman
ms.reviewer: sngun
ms.openlocfilehash: 574dd9fd6189b6d0f1e5d455146d6d083ad7ff77
ms.sourcegitcommit: 3d4121badd265e99d1177a7c78edfa55ed7a9626
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/30/2019
ms.locfileid: "66389466"
---
# <a name="work-with-databases-containers-and-items-in-azure-cosmos-db"></a>Работа с базами данных, контейнеры и элементы в Azure Cosmos DB

Создав [учетную запись Azure Cosmos DB](account-overview.md) в подписке Azure, вы сможете управлять данными в своей учетной записи, создавая базы данных, контейнеры и элементы. В этой статье описан каждый из этих сущностей. 

Ниже показана иерархия различных объектов в учетной записи Azure Cosmos DB.

![Сущности учетной записи Azure Cosmos](./media/databases-containers-items/cosmos-entities.png)

## <a name="azure-cosmos-databases"></a>Базы данных Azure Cosmos

Можно создать одну или несколько баз данных Azure Cosmos вашей учетной записи. Базы данных является аналогом пространства имен. Базы данных — это единица управления для набора контейнеры Azure Cosmos. В следующей таблице показано, как база данных Azure Cosmos соотносится с разными сущностями определенных API:

| Azure Cosmos, объект | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- |
|База данных Azure Cosmos | База данных | Пространство ключей | База данных | База данных | Нет данных |

> [!NOTE]
> С помощью учетных записей API таблиц при создании первой таблицы, базу данных по умолчанию автоматически создается в вашей учетной записи Azure Cosmos.

### <a name="operations-on-an-azure-cosmos-database"></a>Операции с базой данных Azure Cosmos

Вы можете взаимодействовать с базой данных Azure Cosmos с помощью интерфейсов API Azure Cosmos, как описано в следующей таблице:

| Операция | Инфраструктура CLI Azure | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- |
|Перечисление всех баз данных| Да | Да | Да (база данных соответствует пространству имен) | Да | Нет данных | Нет данных |
|Чтение базы данных| Да | Да | Да (база данных соответствует пространству имен) | Да | Нет данных | Нет данных |
|Создание базы данных| Да | Да | Да (база данных соответствует пространству имен) | Да | Нет данных | Нет данных |
|Обновление базы данных| Да | Да | Да (база данных соответствует пространству имен) | Да | Нет данных | Нет данных |


## <a name="azure-cosmos-containers"></a>Контейнеры Azure Cosmos

Контейнер Azure Cosmos — это единица масштабируемости для подготовленной пропускной способности и хранилища. Контейнер горизонтально секционируется и затем реплицируются между несколькими регионами. Добавленные в контейнер элементы и подготовленная для него пропускная способность автоматически распределяются в пределах набора логических секций на основе ключа секции. Дополнительные сведения о секционировании и ключах секций, см. в разделе [секционировать данные](partition-data.md). 

При создании контейнера Azure Cosmos, настройкой пропускной способности в одном из следующих режимов:

* **Режим выделенного подготовленной пропускной способности**: Пропускная способность для контейнера зарезервировано исключительно для этого контейнера, и оно поддерживается соглашения об уровне обслуживания. Дополнительные сведения см. в разделе [как подготовить пропускную способность для контейнера Azure Cosmos](how-to-provision-container-throughput.md).

* **Режим общей подготовленной пропускной способности**: Эти контейнеры совместно используют подготовленной пропускной способности с другими контейнерами в той же базе данных (за исключением контейнеров, которые были настроены с выделенной подготовленной пропускной способности). Другими словами подготовленной пропускной способности в базе данных является общим для всех контейнеров «общей пропускной способности». Дополнительные сведения см. в разделе [Подготовка пропускной способности в базе данных Azure Cosmos](how-to-provision-database-throughput.md).

> [!NOTE]
> Общие и выделенные пропускной способности можно настроить только в том случае, при создании базы данных и контейнера. Чтобы переключиться из режима выделенная пропускная способность режима общей пропускной способности (и наоборот), после создания контейнера, необходимо создать новый контейнер и перенести данные в новый контейнер. Выполнить перенос данных с помощью функции канала изменений Azure Cosmos DB.

Контейнер Azure Cosmos можно масштабировать гибко, при создании контейнеров с помощью подготовленной пропускной способности выделенного или общего режима.

Контейнер Azure Cosmos — это контейнер элементов, не зависящий от схем. Элементы в контейнере могут иметь произвольные схемы. Например, можно поместить элемент, который представляет человека и элемент, представляющий автомобиля в *том же контейнере*. По умолчанию все элементы, добавляемые к контейнеру автоматически индексируются без явной индекса или управление схемой. Можно настроить поведение индексирования, настроив [политика индексации](index-overview.md) в контейнере. 

Можно задать [срока жизни (TTL)](time-to-live.md) для выбранных элементов в контейнере Azure Cosmos или для всего контейнера, чтобы корректно удалить эти элементы из системы. Azure Cosmos DB автоматически удаляет элементы по истечении их срока действия. Она также гарантирует, что к контейнеру запрос не возвращает просроченных элементов в рамках предопределенной привязки. Дополнительные сведения см. в разделе [настроить функции TTL на УРОВНЕ контейнера](how-to-time-to-live.md).

Можно использовать [веб-канал изменений](change-feed.md) для подписки на журнал операций, который управляется для каждой логической секции контейнера. Веб-канал изменений предоставляет журнал всех обновлений, выполненных в контейнере, вместе с до и после изображения товаров. Дополнительные сведения см. в разделе [построения реактивных приложений с помощью веб-канал изменений](serverless-computing-database.md). Можно также настроить длительность хранения для веб-канала, с помощью политики для контейнера канал изменений изменений. 

Вы можете зарегистрировать [хранимые процедуры, триггеры, определяемые пользователем функции (UDF)](stored-procedures-triggers-udfs.md), и [слияния процедуры](how-to-manage-conflicts.md) для контейнера Azure Cosmos. 

Можно указать [ограничение уникального ключа](unique-keys.md) на контейнер Azure Cosmos. Создавая политику уникальных ключей, вы гарантируете уникальность одного или нескольких значений ключа логической секции. Если вы создадите контейнер с помощью политики уникальных ключей, могут создаваться нет новых или обновленных элементов со значениями, которые дублируют значения, указанные в ограничение уникального ключа. См. дополнительные сведения об [ограничениях уникальных ключей](unique-keys.md).

Контейнер Azure Cosmos специализируется в сущности, относящиеся к API, как показано в следующей таблице:

| Azure Cosmos, объект | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- |
|Контейнер Azure Cosmos | Коллекция | Таблица | Коллекция | График | Таблица |

### <a name="properties-of-an-azure-cosmos-container"></a>Свойства контейнера Azure Cosmos

Контейнер Azure Cosmos имеет набор системных свойств. В зависимости от того, какие API, который используется некоторые свойства не может быть доступен напрямую. В следующей таблице описаны список системных свойств:

| Системные свойства | Создаваемые системой или пользователем | Назначение | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- | --- |
|\_Идентификатор | Созданный системой | Уникальный идентификатор контейнера. | Да | Нет | Нет | Нет | Нет |
|\_ETag | Созданный системой | Тег сущности, используемый для управления оптимистической блокировкой. | Да | Нет | Нет | Нет | Нет |
|\_служб терминалов | Созданный системой | Метка времени последнего обновления контейнера. | Да | Нет | Нет | Нет | Нет |
|\_SELF | Созданный системой | Адресуемый URI контейнера. | Да | Нет | Нет | Нет | Нет |
|id | Настраивается пользователем | Определяемое пользователем уникальное имя контейнера. | Да | Да | Да | Да | Да |
|indexingPolicy | Настраивается пользователем | Предоставляет возможность изменить путь индекса, тип индекса и режимом индексирования | Да | Нет | Нет | Нет | Да |
|timeToLive | Настраивается пользователем | Предоставляет возможность автоматически удалять элементы из контейнера после периода времени. Дополнительные сведения см. в разделе [срок жизни](time-to-live.md). | Да | Нет | Нет | Нет | Да |
|changeFeedPolicy | Настраивается пользователем | Используется для считывания изменений, внесенных в элементы в контейнере. Дополнительные сведения см. в разделе [веб-канал изменений](change-feed.md). | Да | Нет | Нет | Нет | Да |
|uniqueKeyPolicy | Настраивается пользователем | Позволяют гарантировать уникальность одного или нескольких значений в логической секции. Дополнительные сведения см. в разделе [ограничения уникального ключа](unique-keys.md). | Да | Нет | Нет | Нет | Да |

### <a name="operations-on-an-azure-cosmos-container"></a>Операции с контейнером Azure Cosmos

При использовании любой из API-интерфейсы Azure Cosmos, контейнер Azure Cosmos поддерживает следующие операции:

| Операция | Инфраструктура CLI Azure | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- |
| Перечисление контейнеров в базе данных | Да | Да | Да | Да | Нет данных | Нет данных |
| Считывание контейнера | Да | Да | Да | Да | Нет данных | Нет данных |
| Создать новый контейнер | Да | Да | Да | Да | Нет данных | Нет данных |
| Обновление контейнера | Да | Да | Да | Да | Нет данных | Нет данных |
| Удаление контейнера | Да | Да | Да | Да | Нет данных | Нет данных |

## <a name="azure-cosmos-items"></a>Элементы Azure Cosmos

В зависимости от того, какие API, который используется элемент Azure Cosmos может представлять либо края в виде графа или документа в коллекции, строки в таблице, или узел. В следующей таблице показаны сопоставление сущностей для конкретных API для элемента Azure Cosmos:

| Сущности Cosmos | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- |
|Элемент Azure Cosmos | Документ | Строка | Документ | Узлов или граничную | Элемент |

### <a name="properties-of-an-item"></a>Свойства элемента

Каждый элемент Azure Cosmos имеет следующие системные свойства. В зависимости от того, какие API, который используется некоторые из них может быть недоступен напрямую.

| Системные свойства | Создаваемые системой или пользователем| Назначение | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- | --- |
|\_Идентификатор | Созданный системой | Уникальный идентификатор элемента | Да | Нет | Нет | Нет | Нет |
|\_ETag | Созданный системой | Тег сущности, используемый для управления оптимистической блокировкой. | Да | Нет | Нет | Нет | Нет |
|\_служб терминалов | Созданный системой | Метка времени последнего обновления элемента | Да | Нет | Нет | Нет | Нет |
|\_SELF | Созданный системой | Адресуемый URI элемента. | Да | Нет | Нет | Нет | Нет |
|id | Можно использовать | Определяемое пользователем уникальное имя в логической секции. Если пользователь не укажет идентификатор, система автоматически создает один. | Да | Да | Да | Да | Да |
|Определяемые пользователем свойства | Определяемые пользователем маршруты | Определяемые пользователем свойства, представленного в собственном API представление (включая JSON, BSON и CQL) | Да | Да | Да | Да | Да |

### <a name="operations-on-items"></a>Операции с элементами

Элементы Cosmos Azure поддерживают следующие операции. Можно использовать любой из API-интерфейсы Azure Cosmos для выполнения операций.

| Операция | Инфраструктура CLI Azure | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- |
| Вставка, замена, удаление, обновление или вставка, чтение | Нет | Да | Да | Да | Да | Yes |

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения об этих задачах и основные понятия:

* [Подготовка пропускной способности в базе данных Azure Cosmos](how-to-provision-database-throughput.md)
* [Подготовка пропускной способности для контейнера Azure Cosmos](how-to-provision-container-throughput.md)
* [Работать с логическими разделами](partition-data.md)
* [Настройка TTL для контейнера Azure Cosmos](how-to-time-to-live.md)
* [Построить реактивных приложений с помощью веб-канала изменений](change-feed.md)
* [Настроить ограничение уникального ключа в контейнер Azure Cosmos](unique-keys.md)
