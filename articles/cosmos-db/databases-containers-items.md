---
title: Работа с базами данных, контейнерами и предметами в Azure Cosmos DB
description: В этой статье описывается, как создавать и использовать базы данных, контейнеры и элементы в Azure Cosmos DB.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 09/01/2019
ms.reviewer: sngun
ms.openlocfilehash: 43a842c3b6d6d421eca4196c7f3facc7876318cd
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79246790"
---
# <a name="work-with-databases-containers-and-items-in-azure-cosmos-db"></a>Работа с базами данных, контейнерами и предметами в Azure Cosmos DB

После создания [учетной записи Azure Cosmos DB](account-overview.md) под подпиской Azure можно управлять данными в учетной записи, создавая базы данных, контейнеры и элементы. В этой статье описывается каждая из этих сущностей. 

Следующее изображение показывает иерархию различных сущностей в учетной записи Azure Cosmos DB:

![Сущности учетной записи Azure Cosmos](./media/databases-containers-items/cosmos-entities.png)

## <a name="azure-cosmos-databases"></a>Базы данных Azure Cosmos

Можно создать одну или несколько баз данных Azure Cosmos под своей учетной записью. База данных аналогична пространству имен. База данных — это подразделение управления для набора контейнеров Azure Cosmos. В следующей таблице показано, как база данных Azure Cosmos соотносится с разными сущностями определенных API:

| Сущность Azure Cosmos DB | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- |
|База данных Azure Cosmos | База данных | Пространство ключей | База данных | База данных | Н/Д |

> [!NOTE]
> С учетом учетных записей Table API при создании первой таблицы база данных по умолчанию автоматически создается в учетной записи Azure Cosmos.

### <a name="operations-on-an-azure-cosmos-database"></a>Операции с базой данных Azure Cosmos

Вы можете взаимодействовать с базой данных Azure Cosmos с AAP Azure Cosmos, описанными в следующей таблице:

| Операция | Azure CLI | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- |
|Перечисление всех баз данных| Да | Да | Да (база данных соответствует пространству имен) | Да | Н/Д | Н/Д |
|Чтение базы данных| Да | Да | Да (база данных соответствует пространству имен) | Да | Н/Д | Н/Д |
|Создание базы данных| Да | Да | Да (база данных соответствует пространству имен) | Да | Н/Д | Н/Д |
|Обновление базы данных| Да | Да | Да (база данных соответствует пространству имен) | Да | Н/Д | Н/Д |


## <a name="azure-cosmos-containers"></a>Контейнеры Azure Cosmos

Контейнер Azure Cosmos — это единица масштабируемости как для просрлизируемой пропускной способности, так и для хранения. Контейнер горизонтально секционируется и затем реплицируются между несколькими регионами. Добавленные в контейнер элементы и подготовленная для него пропускная способность автоматически распределяются в пределах набора логических секций на основе ключа секции. Чтобы узнать больше о ключах раздела [Partition data](partition-data.md)и раздела, см. 

При создании контейнера Azure Cosmos вы настраиваете пропускную емкость в одном из следующих режимов:

* **Выделенный режим пропускной выхаждения**: Пропускная часть, установленная на контейнере, зарезервирована исключительно для этого контейнера и поддерживается SLAs. Чтобы узнать больше, смотрите [Как обеспечить пропускную связь в контейнере Azure Cosmos.](how-to-provision-container-throughput.md)

* **Общий режим пропускной платы:** Эти контейнеры разделяют прокладку с другими контейнерами в той же базе данных (за исключением контейнеров, которые были настроены с выделенной прокладкой). Другими словами, просеяная пропускная информация в базе данных распределяется между всеми контейнерами "общей пропускной". Чтобы узнать больше, смотрите [Как обеспечить пропускную связь в базе данных Azure Cosmos.](how-to-provision-database-throughput.md)

> [!NOTE]
> Настраивать общую и выделенную пропускную систему можно только при создании базы данных и контейнера. Чтобы переключиться из режима выделенной пропускной способности в режим общей пропускной способности (и наоборот) после создания контейнера, необходимо создать контейнер и перенести данные в новый контейнер. Перенести данные можно с помощью функции dB-канала Azure Cosmos DB.

Контейнер Azure Cosmos может масштабироваться эластично, независимо от того, создаете ли контейнеры специальные или общие режимы прокладки.

Контейнер Azure Cosmos — это контейнер элементов, не зависящий от схем. Элементы в контейнере могут иметь произвольные схемы. Например, элемент, представляющий человека, и товар, представляющий автомобиль, могут быть помещены в один и тот *же контейнер.* По умолчанию все элементы, добавленные в контейнер, автоматически индексируются без явного управления индексом или схемой. Можно настроить поведение индексирования, настроив [политику индексирования](index-overview.md) на контейнер. 

Вы можете установить [Время жить (TTL)](time-to-live.md) на выбранные элементы в контейнере Azure Cosmos или для того, чтобы весь контейнер грациозно очищал эти элементы из системы. Azure Cosmos DB автоматически удаляет элементы по истечении срока их действия. Он также гарантирует, что запрос, выполняемый в контейнере, не возвращает просроченные элементы в пределах фиксированной границы. Чтобы узнать больше, [см.](how-to-time-to-live.md)

Для подписки на журнал операций, управляемый для каждого логического раздела контейнера, можно использовать [ленту изменений.](change-feed.md) Лента изменений обеспечивает журнал всех обновлений, выполняемых в контейнере, а также изображения элементов до и после. Для получения дополнительной [Build reactive applications by using change feed](serverless-computing-database.md)информации см. Можно также настроить продолжительность хранения для канала изменения с помощью политики подачи изменений в контейнере. 

Можно зарегистрировать [сохраненные процедуры, триггеры, функции, определяемые пользователем (UDF)](stored-procedures-triggers-udfs.md)и [объединить процедуры](how-to-manage-conflicts.md) для контейнера Azure Cosmos. 

Можно указать [уникальное ограничение ключа](unique-keys.md) в контейнере Azure Cosmos. Создавая политику уникальных ключей, вы гарантируете уникальность одного или нескольких значений ключа логической секции. При создании контейнера с помощью уникальной политики ключей не может быть создано никаких новых или обновленных элементов со значениями, дублирующими значения, указанные уникальным ограничением ключа. См. дополнительные сведения об [ограничениях уникальных ключей](unique-keys.md).

Контейнер Azure Cosmos специализируется на сущностях, специфичных для API, как показано в следующей таблице:

| Сущность Azure Cosmos DB | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- |
|Контейнер Azure Cosmos | Контейнер | Таблица | Collection | График | Таблица |

### <a name="properties-of-an-azure-cosmos-container"></a>Свойства контейнера Azure Cosmos

Контейнер Azure Cosmos имеет набор системоопределенных свойств. В зависимости от того, какой API вы используете, некоторые свойства могут не подвергаться непосредственной опасности. В следующей таблице описывается список системоопределенных свойств:

| Системно-определяемое свойство | Система генерируемая или настраиваемая пользователем | Назначение | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- | --- |
|\_Избавить | Система генерируемая | Уникальный идентификатор контейнера. | Да | нет | нет | нет | нет |
|\_Etag | Система генерируемая | Тег сущности, используемый для управления оптимистической блокировкой. | Да | нет | нет | нет | нет |
|\_Ts | Система генерируемая | Метка времени последнего обновления контейнера. | Да | нет | нет | нет | нет |
|\_Самостоятельно | Система генерируемая | Адресуемый URI контейнера. | Да | нет | нет | нет | нет |
|идентификатор | Настраиваемый для пользователя | Определяемое пользователем уникальное имя контейнера. | Да | Да | Да | Да | Да |
|indexingPolicy | Настраиваемый для пользователя | Обеспечивает возможность изменения траектории индекса, типа индекса и режима индекса | Да | нет | нет | нет | Да |
|timeToLive | Настраиваемый для пользователя | Предоставляет возможность автоматически удалять элементы из контейнера после определенного периода времени. Для получения подробной информации, [см.](time-to-live.md) | Да | нет | нет | нет | Да |
|changeFeedPolicy | Настраиваемый для пользователя | Используется для считывания изменений, внесенных в элементы в контейнере. Для получения подробной информации [см.](change-feed.md) | Да | нет | нет | нет | Да |
|uniqueKeyPolicy | Настраиваемый для пользователя | Используется для обеспечения уникальности одного или нескольких значений в логическом разделе. Для получения дополнительной информации [см.](unique-keys.md) | Да | нет | нет | нет | Да |

### <a name="operations-on-an-azure-cosmos-container"></a>Операции с контейнером Azure Cosmos

Контейнер Azure Cosmos поддерживает следующие операции при использовании одного из AAP Azure Cosmos:

| Операция | Azure CLI | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- |
| Перечисление контейнеров в базе данных | Да | Да | Да | Да | Н/Д | Н/Д |
| Считывание контейнера | Да | Да | Да | Да | Н/Д | Н/Д |
| Создает контейнер. | Да | Да | Да | Да | Н/Д | Н/Д |
| Обновление контейнера | Да | Да | Да | Да | Н/Д | Н/Д |
| Удаление контейнера | Да | Да | Да | Да | Н/Д | Н/Д |

## <a name="azure-cosmos-items"></a>Элементы Azure Cosmos

В зависимости от того, какой API использует, элемент Azure Cosmos может представлять либо документ в коллекции, либо строку в таблице, либо узел или край на графике. В следующей таблице показано отображение объектов API для элемента Azure Cosmos:

| Сущность Azure Cosmos DB | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- |
|Элемент Azure Cosmos | Документ | Строка | Документ | Узлы или края | Item |

### <a name="properties-of-an-item"></a>Свойства элемента

Каждый элемент Azure Cosmos имеет следующие системно-определяемые свойства. В зависимости от того, какой API вы используете, некоторые из них могут не подвергаться непосредственной опасности.

| Системно-определяемое свойство | Система генерируемая или настраиваемая пользователем| Назначение | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- | --- |
|\_Избавить | Система генерируемая | Уникальный идентификатор элемента | Да | нет | нет | нет | нет |
|\_Etag | Система генерируемая | Тег сущности, используемый для управления оптимистической блокировкой. | Да | нет | нет | нет | нет |
|\_Ts | Система генерируемая | Метка времени последнего обновления товара | Да | нет | нет | нет | нет |
|\_Самостоятельно | Система генерируемая | Адресуемый URI элемента. | Да | нет | нет | нет | нет |
|идентификатор | Можно использовать | Уникальное имя, определяемое пользователем в логическом разделе. | Да | Да | Да | Да | Да |
|Определяемые пользователем свойства | Определяемые пользователем маршруты | Свойства, определяемые пользователем, представленные в представлении API(включая JSON, BSON и C'L) | Да | Да | Да | Да | Да |

> [!NOTE]
> Уникальность `id` свойства обеспечивается только в рамках каждого логического раздела. Несколько документов `id` могут иметь одно и то же свойство с различными значениями ключей раздела.

### <a name="operations-on-items"></a>Операции с элементами

Элементы Azure Cosmos поддерживают следующие операции. Для выполнения операций можно использовать любые AAP Azure Cosmos.

| Операция | Azure CLI | API SQL | API Cassandra | API Azure Cosmos DB для MongoDB | API Gremlin | API таблиц |
| --- | --- | --- | --- | --- | --- | --- |
| Вставка, замена, удаление, обновление или вставка, чтение | нет | Да | Да | Да | Да | Да |

## <a name="next-steps"></a>Дальнейшие действия

Узнайте об этих задачах и концепциях:

* [Подготовка пропускной способности для базы данных Azure Cosmos](how-to-provision-database-throughput.md)
* [Подготовка пропускной способности для контейнера Azure Cosmos](how-to-provision-container-throughput.md)
* [Работа с логическими перегородками](partition-data.md)
* [Налаживание TTL на контейнере Azure Cosmos](how-to-time-to-live.md)
* [Создание реактивных приложений с помощью канала изменений](change-feed.md)
* [Наверстуйте уникальное ограничение ключа в контейнере Azure Cosmos](unique-keys.md)
