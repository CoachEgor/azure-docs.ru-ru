---
title: Создавайте контейнеры и базы данных Azure Cosmos в режиме автопилота.
description: Узнайте о преимуществах, случаях использования и о том, как предоставить базы данных и контейнеры Azure Cosmos в режиме автопилота.
author: kirillg
ms.author: kirillg
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 89af30788fe5129cddc6a3607b8c722549b610d1
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79246660"
---
# <a name="create-azure-cosmos-containers-and-databases-in-autopilot-mode-preview"></a>Создание контейнеров и баз данных Azure Cosmos в режиме "Автопилот" (предварительная версия)

Azure Cosmos DB позволяет подготавливать пропускную способность для контейнеров в ручном режиме или в режиме "Автопилот". В этой статье описываются преимущества и примеры использования режима "Автопилот".

> [!NOTE]
> Режим автопилота в настоящее время доступен в общедоступном предварительном просмотре. Можно [включить автопилот только для новых баз данных и контейнеров.](#create-a-database-or-a-container-with-autopilot-mode) Он недоступен для существующих контейнеров и баз данных.

В дополнение к ручной подготовке пропускной компании теперь можно настроить контейнеры Azure Cosmos в режиме автопилота. Контейнеры и базы данных, настроенные в режиме **автопилота, будут автоматически и мгновенно масштабировать прокладку рабочей способности в зависимости от потребностей приложения, не влияя на доступность, задержку, пропускную способность или производительность рабочей нагрузки по всему миру.**

При настройке контейнеров и баз данных в режиме автопилота `Tmax` необходимо указать максимальную пропускную емкость, которая не будет превышена. Контейнеры могут затем масштабировать `0.1*Tmax < T < Tmax`их пропускную емкость так, чтобы. Другими словами, контейнеры и базы данных масштабируются мгновенно в зависимости от потребностей рабочей нагрузки, от 10% от максимального значения пропускной выхотливания до настроенного максимального значения пропускной мощности. Вы можете изменить максимальную`Tmax`пропускную емкость () настройка базы данных автопилота или контейнера в любой момент времени. С опцией автопилота минимальная пропускная емкость 400 RU/s на контейнер или базу данных больше не применяется.

Во время предварительного просмотра автопилота, для указанной максимальной пропускной мощности на контейнере или базе данных, система позволяет работать в пределах расчетного лимита хранения. Если лимит хранилища превышен, то максимальная пропускная емкость автоматически корректируется на более высокое значение. При использовании пропускной системы уровня базы данных в режиме автопилота количество контейнеров, разрешенных в базе данных, рассчитывается как: `0.001*TMax`. Например, если вы предоставляете 20 000 автопилотов RU/s, то база данных может иметь 20 контейнеров.

## <a name="benefits-of-autopilot-mode"></a>Преимущества режима автопилота

Контейнеры Azure Cosmos, настроенные в режиме автопилота, имеют следующие преимущества:

* **Просто:** Контейнеры в режиме автопилота удаляют сложность управления прокладки (RUs) и емкости вручную для различных контейнеров.

* **Масштабируемый:** Контейнеры в режиме автопилота по мере необходимости плавно масштабируют производительность. Нет никаких сбоев в работе клиентских подключений, приложений, и они не влияют на существующие SLAs.

* **Экономичный:** При использовании контейнеров, настроенных в режиме автопилота, вы платите только за ресурсы, необходимые вашим рабочим нагрузкам, в час.

* **Высокодоступные:** Контейнеры в режиме автопилота используют один и тот же глобально распределенный, неисправный, высокодоступный бэкэнд для обеспечения долговечности данных и высокой доступности.

## <a name="use-cases-of-autopilot-mode"></a>Использование случаев режима автопилота

Случаи использования контейнеров Azure Cosmos, настроенных в режиме автопилота, включают:

* **Переменные рабочие нагрузки:** При запуске слегка используемого приложения с пиковым использованием от 1 часа до нескольких часов несколько раз в день или несколько раз в год. Примеры включают приложения для людских ресурсов, составления бюджета и оперативной отчетности. Для таких сценариев можно использовать контейнеры, настроенные в режиме автопилота, и вам больше не нужно вручную предусмотреть максимальную или среднюю емкость.

* **Непредсказуемые рабочие нагрузки:** При запуске рабочих нагрузок, где есть использование базы данных в течение дня, но и пики активности, которые трудно предсказать. Пример включает сайт трафика, который видит всплеск активности при изменении прогноза погоды. Контейнеры, настроенные в режиме автопилота, регулируют емкость для удовлетворения потребностей пиковой нагрузки приложения и сокращаются по окончании всплеска активности.

* **Новые приложения:** Если вы развертываете новое приложение и не уверены в том, сколько прокладок (т.е. сколько RUs) вам нужно. С контейнерами, настроенными в режиме автопилота, вы можете автоматически масштабироваться до потребностей и требований к емкости приложения.

* **Нечасто используемые приложения:** Если у вас есть приложение, которое используется только в течение нескольких часов несколько раз в день или неделю или месяц, например, малообъемное приложение / веб/блог-сайт.

* **Базы данных разработки и тестирования:** Если у вас есть разработчики, использующие контейнеры в рабочее время, но они не нужны по ночам или в выходные дни. С контейнерами, настроенными в режиме автопилота, они сокращаются до минимума, когда они не используются.

* **Плановые производственные нагрузки/запросы:** Если у вас есть ряд запланированных запросов/операций/запросов на одном контейнере, и если есть периоды простоя, когда вы хотите работать на абсолютно низкой пропускной их путях, теперь вы можете сделать это легко. Когда запланированный запрос/запрос будет отправлен в контейнер, настроенный в режиме автопилота, он автоматически увеличится столько, сколько необходимо, и запустит операцию.

Решения предыдущих проблем не только требуют огромного количества времени в реализации, но они также вводят сложность в конфигурации или коде, и часто требуют ручного вмешательства для их решения. Режим автопилота позволяет вышеперечисленные сценарии из коробки, так что вам не нужно беспокоиться об этих проблемах больше.

## <a name="comparison--containers-configured-in-manual-mode-vs-autopilot-mode"></a>Сравнение - Контейнеры, настроенные в ручном режиме против режима автопилота

|  | Контейнеры, настроенные в ручном режиме  | Контейнеры, настроенные в режиме автопилота |
|---------|---------|---------|
| **Резервная пропускная часть** | Вручную подготовлено. | Автоматически и мгновенно масштабируется на основе шаблонов использования рабочей нагрузки. |
| **Ограничение ставок запросов/операций (429)**  | Может произойти, если потребление превышает предусмотренные мощности. | Не произойдет, если потребляемая пропускная часть находится в пределах максимальной пропускной необходимости, которую вы выбираете в режиме автопилота.   |
| **Планирование ресурсов** |  Вы должны сделать первоначальное планирование емкости и обеспечение пропускной способности вам нужно. |    Вам не придется беспокоиться о планировании емкости. Система автоматически заботится о планировании емкости и управлении емкостями. |
| **Цены** | Вручную подготовленные RU/s в час. | Для одного счета региона записи, вы платите за пропускную способность, используемую на почасовой основе, с помощью автопилота RU / s в час ставка. <br/><br/>Для учетных записей с несколькими регионами записи, нет дополнительной платы за автопилот. Вы платите за пропускную способность, используемую на почасовой основе, используя тот же мульти-мастер RU/s в час. |
| **Лучше всего подходит для типов рабочей нагрузки** |  Предсказуемые и стабильные рабочие нагрузки|   Непредсказуемые и переменные рабочие нагрузки  |

## <a name="create-a-database-or-a-container-with-autopilot-mode"></a>Создание базы данных или контейнера с режимом автопилота

Можно настроить автопилот для новых баз данных или контейнеров при их создании через портал Azure. Используйте следующие шаги для создания новой базы данных или контейнера, включения автопилота и определения максимальной пропускной связи (RU/s).

1. Вопием на [портал Azure](https://portal.azure.com) или [исследователю DB Azure Cosmos.](https://cosmos.azure.com/)

1. Перейдите к учетной записи Azure Cosmos DB и откройте вкладку **Data Explorer.**

1. Выберите **новый контейнер.** Введите имя базы данных, контейнер и ключ раздела. Под **пропускной вот,** выберите опцию **Autopilot** и выберите максимальную пропускную емкость (RU/s), которую база данных или контейнер не может превышать при использовании опции автопилота.

   ![Создание контейнера и настройка пропускной связи автопилота](./media/provision-throughput-autopilot/create-container-autopilot-mode.png)

1. Нажмите кнопку **ОК**.

Можно создать общую базу данных пропускной четывсе в режиме автопилота, выбрав опцию **пропускной четыпа базы данных Provision.**

## <a name="throughput-and-storage-limits-for-autopilot"></a><a id="autopilot-limits"></a>Ограничения пропускной памяти и хранения автопилота

В следующей таблице отображены максимальные все параметры и лимиты хранения для различных опций в режиме автопилота:

|Максимальный предел пропускной промедляя  |Максимальный лимит хранения  |
|---------|---------|
|4000 руб./с  |   50 ГБ    |
|20 000 руб./с  |  200 ГБ  |
|100 000 руб./с    |  1 TБ   |
|500 000 руб./с    |  5 ТБ  |

## <a name="next-steps"></a>Дальнейшие действия

* Просмотрите [автопилот часто задаваемые вопросы](autopilot-faq.md).
* Подробнее о [логических разделах.](partition-data.md)
* Подробнее о [подготовке пропускной способности для контейнера Azure Cosmos](how-to-provision-container-throughput.md).
* Подробнее о [подготовке пропускной способности для базы данных Azure Cosmos](how-to-provision-database-throughput.md).
