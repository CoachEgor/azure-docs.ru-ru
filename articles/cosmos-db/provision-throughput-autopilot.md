---
title: Создание контейнеров и баз данных Azure Cosmos в режиме автопилота.
description: Узнайте о преимуществах, вариантах использования и подготовке баз данных и контейнеров Azure Cosmos в режиме автопилотного развертывания.
author: kirillg
ms.author: kirillg
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 3e2d9b892ad42563b481a0b1fe6a468daefad672
ms.sourcegitcommit: c62a68ed80289d0daada860b837c31625b0fa0f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2019
ms.locfileid: "73606426"
---
# <a name="create-azure-cosmos-containers-and-databases-in-autopilot-mode-preview"></a>Создание контейнеров и баз данных Azure Cosmos в режиме автопилотного режима (Предварительная версия)

Azure Cosmos DB позволяет подготавливать пропускную способность для контейнеров в ручном или в режиме автопилота. В этой статье описываются преимущества и варианты использования режима автопилота.

> [!NOTE]
> Режим автопилота в настоящее время доступен в общедоступной предварительной версии.

Кроме ручной подготовки пропускной способности, теперь можно настроить контейнеры Azure Cosmos в режиме автопилота. Контейнеры и базы данных Azure Cosmos, настроенные в режиме автопилота, **автоматически и мгновенно масштабируют подготовленную пропускную способность в зависимости от потребностей вашего приложения, не нарушая соглашения об уровне обслуживания.**

Вам больше не нужно вручную управлять подготовленной пропускной способностью или проблемами ограничения частоты обработки. Контейнеры Azure Cosmos, настроенные в режиме автопилотного режима, можно мгновенно масштабировать в ответ на рабочую нагрузку без каких бы то ни было повлиять на доступность, задержку, пропускную способность или производительность рабочей нагрузки. В условиях высокой загрузки контейнеры Azure Cosmos, настроенные в режиме автопилота, можно масштабировать вверх или вниз, не влияя на выполняемые операции.

При настройке контейнеров и баз данных в режиме автопилота необходимо указать максимальную пропускную способность, `Tmax` не следует превысить. Контейнеры могут мгновенно масштабироваться в зависимости от потребностей рабочей нагрузки в диапазоне `0.1*Tmax < T < Tmax`. Другими словами, контейнеры и базы данных мгновенно масштабируются в зависимости от потребностей рабочей нагрузки, от как минимум на 10% от максимального значения пропускной способности и до заданного максимального значения пропускная способность. Вы можете изменить параметр максимальной пропускной способности (Тмакс) в базе данных или контейнере для автопилота в любой момент времени.

В ходе предварительной версии автопилота для указанной максимальной пропускной способности контейнера или базы данных система допускает работу в пределах рассчитанного предела хранилища. Если превышено ограничение хранилища, максимальная пропускная способность автоматически корректируется до более высокого значения. При использовании пропускной способности уровня базы данных в режиме автопилота количество контейнеров, допустимых в базе данных, вычисляется следующим образом: (0,001 * максимальная пропускная способность). Например, если вы подготавливаете 20 000 для автопилота, то база данных может иметь 20 контейнеров.

## <a name="benefits-of-autopilot-mode"></a>Преимущества режима автопилота

Контейнеры Azure Cosmos, настроенные в режиме "автопилотный режим", имеют следующие преимущества.

* **Простой:** Контейнеры в режиме автопилота удаляют сложность управления подготовленной пропускной способностью (RUs) и емкостью вручную для различных контейнеров.

* **Масштабируемая:** Контейнеры в режиме автопилота эффективно масштабируют подготовленную пропускную способность по мере необходимости. Не существует сбоев клиентских подключений, приложений, и они не влияют на существующие соглашения об уровне обслуживания.

* Экономичность **:** При использовании контейнеров Cosmos Azure, настроенных в режиме автопилота, вы платите только за те ресурсы, которые нужны вашей рабочей нагрузке для каждого часа.

* **Высокий уровень доступности:** Контейнеры Azure Cosmos в режиме автопилота используют ту же глобально распределенную, отказоустойчивую, высокодоступную серверную часть, обеспечивающую устойчивость данных, и высокую доступность всегда.

## <a name="use-cases-of-autopilot-mode"></a>Варианты использования режима автопилота

Варианты использования для контейнеров Azure Cosmos, настроенных в режиме автопилота, включают:

* **Рабочие нагрузки переменных:** При использовании незанятого приложения с пиковым потреблением в 1 час в несколько часов каждый день или несколько раз в год. К примерам относятся приложения для отделов кадров, бюджетирования и оперативной отчетности. В таких случаях можно использовать контейнеры, настроенные в режиме автопилота. вам больше не нужно вручную подготавливать пиковую или среднюю емкость.

* **Непредсказуемые рабочие нагрузки:** При работе с рабочими нагрузками, в которых используется база данных в течение дня, а также пиковые нагрузки действий, которые трудно прогнозировать. Пример включает сайт трафика, который видит всплеск активности при изменении прогноза погоды. Контейнеры, настроенные в режиме "автопилотный режим", изменяют емкость в соответствии с потребностями пиковой нагрузки приложения и возможного увеличения масштаба при превышении предельного напряжения активности.

* **Новые приложения:** Если вы развертываете новое приложение и не знаете, какой объем подготовленной пропускной способности (т. е. Сколько нужно), необходимо. С помощью контейнеров, настроенных в режиме автопилота, можно автоматически масштабироваться по требованиям к емкости и требованиям приложения.

* **Редко используемые приложения:** Если у вас есть приложение, которое используется только в течение нескольких часов в день или неделю или месяц, например на небольшое приложение, веб-сайт или блог.

* **Базы данных для разработки и тестирования:** Разработчики используют учетные записи Azure Cosmos в рабочее время, но не требуют их в ночей или выходных. Если контейнеры настроены в режиме автопилота, они масштабируются до минимума, когда они не используются.

* **Запланированные рабочие нагрузки и запросы:** Если у вас есть несколько запланированных запросов, операций или запросов в одном контейнере, и если имеются периоды бездействия, в которых вы хотите запускать с низкой пропускной способностью, вы можете сделать это легко. При отправке запланированного запроса или запроса в контейнер, настроенный в режиме автопилота, он автоматически масштабируется по мере необходимости и выполняет операцию.

Решения для предыдущих проблем не только требовали огромного количества времени в реализации, но и представляют сложность в настройке или коде, и для их устранения часто требуется вмешательство вручную. Режим "Автопилот" позволяет использовать приведенные выше сценарии, чтобы больше не беспокоиться об этих проблемах.

## <a name="comparison--containers-configured-in-manual-mode-vs-autopilot-mode"></a>Сравнение — контейнеры, настроенные в ручном и режиме автопилотного режима

|  | Контейнеры, настроенные в ручном режиме  | Контейнеры, настроенные в режиме автопилота |
|---------|---------|---------|
| **Подготовленная пропускная способность** | Подготовка вручную | Автоматическое и мгновенное масштабирование на основе шаблонов использования рабочих нагрузок. |
| **Ограничение скорости запросов и операций (429)**  | Может произойти, если потребление превышает подготовленную емкость. | Не будет выполняться, если используемая пропускная способность находится в пределах максимальной пропускной способности, выбранной в режиме автопилота.   |
| **Планирование ресурсов** |  Необходимо выполнить начальное планирование ресурсов и обеспечить необходимую пропускную способность. |    Вам не нужно беспокоиться о планировании ресурсов. Система автоматически предпринимает меры по планированию ресурсов и управлению емкостью. |
| **Цены** | Количество единиц запросов в час, подготовленных вручную:. | Для учетных записей с одним регионом записи вы платите за пропускную способность, используемую на почасовой основе, используя автопилотный тариф/с в час. <br/><br/>Для учетных записей с несколькими регионами записи дополнительная плата за автопилот не взимается. Вы платите за пропускную способность, используемую в каждый час, используя один и тот же тариф с несколькими хозяевами запросов в час. |
| **Лучше всего подходит для типов рабочих нагрузок** |  Прогнозируемые и стабильные рабочие нагрузки|   Непредсказуемые и переменные рабочие нагрузки  |

## <a name="enable-autopilot-from-azure-portal"></a>Включить автопилот из портал Azure

Вы можете испытать Автопилот в учетных записях Azure Cosmos, включив в портал Azure. Чтобы включить параметр автопилота, выполните следующие действия.

1. Войдите в [портал Azure.](https://portal.azure.com)

2. Перейдите к своей учетной записи Azure Cosmos и откройте вкладку **новые функции** . Выберите **Автоматический пилотный режим** и **Регистрация** , как показано на следующем снимке экрана:

![Создание контейнера в режиме автопилота](./media/provision-throughput-autopilot/enable-autopilot-azure-portal.png)

## <a name="create-a-database-or-a-container-with-autopilot-mode"></a>Создание базы данных или контейнера с режимом автопилота

Вы можете настроить Автопилот для баз данных или контейнеров при их создании. Выполните следующие действия для новой базы данных или контейнера, Включите автопилот и укажите максимальную пропускную способность.

1. Войдите в [портал Azure](https://portal.azure.com) или [Azure Cosmos Explorer.](https://cosmos.azure.com/)

1. Перейдите к учетной записи Azure Cosmos и откройте вкладку **Обозреватель данных** .

1. Выберите **создать контейнер**, введите имя для контейнера, ключ секции. Выберите параметр **автопилот** и укажите максимальную пропускную способность, которую контейнер не может превысить при использовании параметра автопилот.

   ![Создание контейнера в режиме автопилота](./media/provision-throughput-autopilot/create-container-autopilot-mode.png)

1. Нажмите кнопку **ОК**.

С помощью аналогичных действий можно также создать базу данных с подготовленной пропускной способностью в режиме автопилота.

## <a name="next-steps"></a>Дальнейшие действия

* Подробнее о [логических секциях](partition-data.md).
* Подробнее о [подготовке пропускной способности для контейнера Azure Cosmos](how-to-provision-container-throughput.md).
* Подробнее о [подготовке пропускной способности для базы данных Azure Cosmos](how-to-provision-database-throughput.md).
