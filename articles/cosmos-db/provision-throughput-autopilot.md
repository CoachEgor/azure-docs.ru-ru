---
title: Создание контейнеров и баз данных Azure Cosmos в режиме автопилота.
description: Узнайте о преимуществах, вариантах использования и подготовке баз данных и контейнеров Azure Cosmos в режиме автопилотного развертывания.
author: kirillg
ms.author: kirillg
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 89af30788fe5129cddc6a3607b8c722549b610d1
ms.sourcegitcommit: 2a2af81e79a47510e7dea2efb9a8efb616da41f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/17/2020
ms.locfileid: "76264056"
---
# <a name="create-azure-cosmos-containers-and-databases-in-autopilot-mode-preview"></a>Создание контейнеров и баз данных Azure Cosmos в режиме автопилотного режима (Предварительная версия)

Azure Cosmos DB позволяет подготавливать пропускную способность для контейнеров в ручном режиме или в режиме "Автопилот". В этой статье описываются преимущества и примеры использования режима "Автопилот".

> [!NOTE]
> Режим автопилота в настоящее время доступен в общедоступной предварительной версии. Автопилот можно [включить только для новых баз данных и контейнеров](#create-a-database-or-a-container-with-autopilot-mode) . Он недоступен для существующих контейнеров и баз данных.

Кроме ручной подготовки пропускной способности, теперь можно настроить контейнеры Azure Cosmos в режиме автопилота. Контейнеры и базы данных, настроенные в режиме автопилота, **автоматически и мгновенно масштабируют подготовленную пропускную способность в зависимости от потребностей вашего приложения, не влияя на доступность, задержку, пропускную способность или производительность рабочей нагрузки.**

При настройке контейнеров и баз данных в режиме автопилота необходимо указать максимальную пропускную способность, `Tmax` не следует превысить. Контейнеры могут масштабировать пропускную способность, чтобы `0.1*Tmax < T < Tmax`. Другими словами, контейнеры и базы данных мгновенно масштабируются в зависимости от потребностей рабочей нагрузки, начиная с 10% от максимального значения максимальной пропускной способности, настроенного до заданного максимального значения пропускной способности. Можно изменить параметр максимальной пропускной способности (`Tmax`) в базе данных или контейнере автопилота в любой момент времени. При использовании параметра "Автопилот" Минимальная пропускная способность (400 единиц запросов/с) для контейнера или базы данных больше не применяется.

В ходе предварительной версии автопилота для указанной максимальной пропускной способности контейнера или базы данных система допускает работу в пределах рассчитанного предела хранилища. Если превышено ограничение хранилища, максимальная пропускная способность автоматически корректируется до более высокого значения. При использовании пропускной способности уровня базы данных в режиме автопилота количество контейнеров в базе данных вычисляется следующим образом: `0.001*TMax`. Например, если вы подготавливаете 20 000 для автопилота, то база данных может иметь 20 контейнеров.

## <a name="benefits-of-autopilot-mode"></a>Преимущества режима автопилота

Контейнеры Azure Cosmos, настроенные в режиме "автопилотный режим", имеют следующие преимущества.

* **Простой:** Контейнеры в режиме автопилота удаляют сложность управления подготовленной пропускной способностью (RUs) и емкостью вручную для различных контейнеров.

* **Масштабируемая:** Контейнеры в режиме автопилота эффективно масштабируют подготовленную пропускную способность по мере необходимости. Не существует сбоев клиентских подключений, приложений, и они не влияют на существующие соглашения об уровне обслуживания.

* Экономичность **:** При использовании контейнеров, настроенных в режиме автопилота, вы платите только за те ресурсы, которые нужны вашей рабочей нагрузке для каждого часа.

* **Высокий уровень доступности:** Контейнеры в режиме автопилота используют ту же глобально распределенную, отказоустойчивую, высокодоступную серверную часть, обеспечивающую устойчивость данных и высокий уровень доступности.

## <a name="use-cases-of-autopilot-mode"></a>Варианты использования режима автопилота

Варианты использования для контейнеров Azure Cosmos, настроенных в режиме автопилота, включают:

* **Рабочие нагрузки переменных:** Если вы используете незанятое приложение с пиковым потреблением в 1 час на несколько часов каждый день или несколько раз в год. К примерам относятся приложения для отделов кадров, бюджетирования и оперативной отчетности. В таких случаях можно использовать контейнеры, настроенные в режиме автопилота, и вам больше не нужно вручную подготавливать пиковую или среднюю емкость.

* **Непредсказуемые рабочие нагрузки:** При работе с рабочими нагрузками, в которых используется база данных в течение дня, а также пиковые нагрузки действий, которые трудно прогнозировать. Пример включает сайт трафика, который видит всплеск активности при изменении прогноза погоды. Контейнеры, настроенные в режиме "автопилотный режим", изменяют емкость в соответствии с потребностями пиковой нагрузки приложения и возможного увеличения масштаба при превышении предельного напряжения активности.

* **Новые приложения:** Если вы развертываете новое приложение и не знаете, какой объем подготовленной пропускной способности (т. е. Сколько нужно), необходимо. С помощью контейнеров, настроенных в режиме автопилота, можно автоматически масштабироваться по требованиям к емкости и требованиям приложения.

* **Редко используемые приложения:** Если у вас есть приложение, которое используется только в течение нескольких часов в день или неделю или месяц, например на небольшое приложение, веб-сайт или блог.

* **Базы данных для разработки и тестирования:** Если разработчики используют контейнеры в рабочее время, но они не нужны в ночей или выходных. Если контейнеры настроены в режиме автопилота, они масштабируются до минимума, когда они не используются.

* **Запланированные рабочие нагрузки и запросы:** Если у вас есть несколько запланированных запросов, операций или запросов в одном контейнере, и если имеются периоды бездействия, в которых вы хотите запускать с низкой пропускной способностью, вы можете сделать это легко. При отправке запланированного запроса или запроса в контейнер, настроенный в режиме автопилота, он автоматически масштабируется по мере необходимости и выполняет операцию.

Решения для предыдущих проблем не только требовали огромного количества времени в реализации, но и представляют сложность в настройке или коде, и для их устранения часто требуется вмешательство вручную. Режим автопилота позволяет использовать приведенные выше сценарии, чтобы больше не беспокоиться об этих проблемах.

## <a name="comparison--containers-configured-in-manual-mode-vs-autopilot-mode"></a>Сравнение — контейнеры, настроенные в ручном и режиме автопилотного режима

|  | Контейнеры, настроенные в ручном режиме  | Контейнеры, настроенные в режиме автопилота |
|---------|---------|---------|
| **Подготовленная пропускная способность** | Подготовка вручную. | Автоматическое и мгновенное масштабирование на основе шаблонов использования рабочих нагрузок. |
| **Ограничение скорости запросов и операций (429)**  | Может произойти, если потребление превышает подготовленную емкость. | Не будет выполняться, если используемая пропускная способность находится в пределах максимальной пропускной способности, выбранной в режиме автопилота.   |
| **Планирование ресурсов** |  Необходимо выполнить начальное планирование ресурсов и обеспечить необходимую пропускную способность. |    Вам не нужно беспокоиться о планировании ресурсов. Система автоматически предпринимает меры по планированию ресурсов и управлению емкостью. |
| **Цены** | Количество единиц запросов в час, подготовленных вручную:. | Для учетных записей с одним регионом записи вы платите за пропускную способность, используемую на почасовой основе, используя автопилотный тариф/с в час. <br/><br/>Для учетных записей с несколькими регионами записи дополнительная плата за автопилот не взимается. Вы платите за пропускную способность, используемую в каждый час, используя один и тот же тариф с несколькими хозяевами запросов в час. |
| **Лучше всего подходит для типов рабочих нагрузок** |  Прогнозируемые и стабильные рабочие нагрузки|   Непредсказуемые и переменные рабочие нагрузки  |

## <a name="create-a-database-or-a-container-with-autopilot-mode"></a>Создание базы данных или контейнера с режимом автопилота

Вы можете настроить Автопилот для новых баз данных или контейнеров при их создании с помощью портал Azure. Выполните следующие действия, чтобы создать новую базу данных или контейнер, включить автопилот и указать максимальную пропускную способность (единиц запросов в секунду).

1. Войдите в [портал Azure](https://portal.azure.com) или [Обозреватель Azure Cosmos DB.](https://cosmos.azure.com/)

1. Перейдите к учетной записи Azure Cosmos DB и откройте вкладку **Обозреватель данных** .

1. Выберите **создать контейнер.** Введите имя базы данных, контейнера и ключа секции. В разделе **пропускная способность**выберите параметр **автопилот** и выберите максимальную пропускную способность (единиц запросов/с), которую база данных или контейнер не может превысить при использовании параметра автопилот.

   ![Создание контейнера и настройка пропускной способности автопилота](./media/provision-throughput-autopilot/create-container-autopilot-mode.png)

1. Нажмите кнопку **ОК**.

Можно создать базу данных с общей пропускной способностью в режиме автопилота, выбрав параметр **подготовить базу данных к пропускной способности** .

## <a id="autopilot-limits"></a>Ограничения пропускной способности и хранилища для автопилота

В следующей таблице показаны максимальные ограничения по всему хранению и объему хранилища для различных параметров в режиме автопилота.

|Ограничение максимальной пропускной способности  |Максимальный предел хранилища  |
|---------|---------|
|4000 единиц запросов в секунду  |   50 ГБ    |
|20 000 единиц запросов в секунду  |  200 ГБ  |
|100 000 единиц запросов в секунду    |  1 ТБ   |
|500 000 единиц запросов в секунду    |  5 ТБ  |

## <a name="next-steps"></a>Дальнейшие действия

* Ознакомьтесь с [вопросами и ответами по автопилотной](autopilot-faq.md)программе.
* Подробнее о [логических секциях](partition-data.md).
* Подробнее о [подготовке пропускной способности для контейнера Azure Cosmos](how-to-provision-container-throughput.md).
* Подробнее о [подготовке пропускной способности для базы данных Azure Cosmos](how-to-provision-database-throughput.md).
