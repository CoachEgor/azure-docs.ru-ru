---
title: Ограничения Azure Cosmos DB Gremlin
description: Справочная документация по ограничениям среды выполнения подсистемы Graph
author: olignat
ms.service: cosmos-db
ms.subservice: cosmosdb-graph
ms.topic: reference
ms.date: 09/10/2019
ms.author: olignat
ms.openlocfilehash: f1fe4cfac22a651f44338986d0a767fe3e1a360b
ms.sourcegitcommit: d70c74e11fa95f70077620b4613bb35d9bf78484
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/11/2019
ms.locfileid: "70910915"
---
# <a name="azure-cosmos-db-gremlin-limits"></a>Ограничения Azure Cosmos DB Gremlin
В этой статье рассказывается об ограничениях Azure Cosmos DB Gremlin Engine и объясняется, как они могут повлиять на обход клиентов.

Cosmos DB Gremlin построен на основе Cosmos DB инфраструктуры, поэтому все ограничения в [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/concepts-limits) по-прежнему применяются. 

## <a name="limits"></a>Ограничения

При достижении предела Gremlin обход отменяется с **x-MS-Status-code** = 429, указывающим на ошибку регулирования.

**Ресурс**    | **Ограничение по умолчанию** | **Пояснение**
--- | --- | ---
*Память на запрос* | **2 ГБ** | Максимальный объем памяти, который может использовать запрос во время обработки. Запросы, требующие вычислений с большими наборами данных, потребляют дополнительную память. Рассмотрите возможность определения области запросов к меньшим наборам данных, чтобы избежать пересечение этого предела или использования решений OLAP.
*Длина скрипта* | **64 КБ** | Максимальная длина для скрипта обхода Gremlin на один запрос.
*Глубина оператора* | **400** |  Общее количество уникальных шагов в обходе. Например, ```g.V().out()``` имеет число операторов 2: V () и out () ```g.V('label').repeat(out()).times(100)``` имеют глубину оператора 3: V (), Repeat () и out (), поскольку ```.times(100)``` является ```.repeat()``` параметром оператора.
*Степень параллелизма* | **32** | Максимальное количество секций хранилища, к которым можно отправить один запрос на уровне хранилища. Это ограничение влияет на графики с сотнями секций.
*Предельное число повторов* | **32** | Максимальное количество итераций оператора ```.repeat()```. Каждая итерация ```.repeat()``` шага в большинстве случаев выполняет обход по ширине, что означает, что любой обход ограничен максимум до 32 прыжков между вершинами.
*Время ожидания обхода* | **30 секунд** | Обход будет отменен, когда он превысит это время. Cosmos DB Graph — это база данных OLTP, большинство обходов в которой выполняется за миллисекунды. Для выполнения запросов OLAP на Cosmos DB графе используйте [Apache Spark](https://azure.microsoft.com/services/cosmos-db/) с [кадрами данных графа](https://spark.apache.org/docs/latest/sql-programming-guide.html#datasets-and-dataframes) и [Cosmos DB соединителя Spark](https://github.com/Azure/azure-cosmosdb-spark).
*Ограничение предиката* | **20** | Количество шагов ```.has()``` или ```.hasNot()```, применяемых к одной вершине или ребру. Когда достигается это ограничение, в приложении появляется такое сообщение об ошибке: ```The SQL query exceeded the maximum number of joins. The allowed limit is 20```. Это временное неудобство, так как группа работает над пределами этого ограничения. 
*Время ожидания бездействующего подключения* | **5 часов** | Количество времени, в течение которого сервер Graph сохраняет подключение WebSocket без трафика. Пакеты проверки активности TCP или HTTP-запросы на проверку активности не расширяют время существования подключения сверх этого предела, однако если они не отправляются, базовая инфраструктура Azure может закрыть подключение еще раньше. Модуль Cosmos DB Graph считается бездействующим, если на нем не выполняются проходы Gremlin.
*Маркер ресурса в час* | **100** | Число уникальных маркеров ресурсов, используемых клиентами Gremlin для подключения к учетной записи Gremlin в регионе. Когда приложение превышает почасовую уникальность маркера, `"Exceeded allowed resource token limit of 100 that can be used concurrently"` будет возвращено при следующем запросе проверки подлинности.

## <a name="next-steps"></a>Следующие шаги
* [Заголовки ответа Azure Cosmos DB Gremlin](gremlin-headers.md) 
* [Azure Cosmos DB маркеров ресурсов с помощью Gremlin](how-to-use-resource-tokens-gremlin.md)
