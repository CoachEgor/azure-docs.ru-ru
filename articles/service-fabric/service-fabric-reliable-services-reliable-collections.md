---
title: Введение в надежные коллекции
description: Службы с отслеживанием состояния Service Fabric предоставляют надежные коллекции, которые позволяют создавать высокодоступные и масштабируемые облачные приложения с низкой задержкой.
ms.topic: conceptual
ms.date: 1/3/2019
ms.openlocfilehash: 48fa682f4c017f66911729e1f581f3aa91cdc28d
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75609729"
---
# <a name="introduction-to-reliable-collections-in-azure-service-fabric-stateful-services"></a>Введение в надежные коллекции в службах с отслеживанием состояния Azure Service Fabric

Надежные коллекции позволяют создавать высокодоступные и масштабируемые облачные приложения с низкой задержкой точно так же, как приложения для одного компьютера. Классы в пространстве имен **Microsoft.ServiceFabric.Data.Collections** предоставляют набор коллекций, которые автоматически обеспечивают состояние высокой доступности. Разработчикам нужно только создать интерфейсы API для надежных коллекций и разрешить надежным коллекциям управлять реплицированным и локальным состояниями.

Основное различие между надежными коллекциями и другими технологиями обеспечения высокой доступности (например, Redis, службы таблиц и очередей Azure) заключается в том, что состояние хранится локально в экземпляре службы и одновременно делается высокодоступным. Это означает следующее:

* Все операции чтения выполняются локально, что позволяет достичь низкой задержки и высокой пропускной способности при чтении.
* Все операции записи создают минимальное количество сетевых операций ввода-вывода, что позволяет достичь низкой задержки и высокой пропускной способности при записи.

![Изображение развития коллекций.](media/service-fabric-reliable-services-reliable-collections/ReliableCollectionsEvolution.png)

Надежные коллекции можно рассматривать как развитие классов **System.Collections**. Это новый набор удобных коллекций для разработчиков, предназначенных для облачных приложений и приложений для нескольких компьютеров. Таким образом, надежные коллекции являются:

* реплицируемыми (изменения состояния реплицируются для обеспечения высокой доступности);
* сохраняемыми (данные сохраняются на диск для защиты от крупномасштабных перебоев, например отключения питания в центре обработки данных);
* Так как операции записи сохраняются и реплицируются, вы не можете создать временную ReliableDictionary, ReliableQueue или другую надежную коллекцию, которая только сохраняет данные в памяти.
* асинхронными (интерфейсы API работают асинхронно, что позволяет избежать блокировки потоков при операциях ввода-вывода);
* транзакционными (интерфейсы API используют абстракцию транзакций, что позволяет легко управлять несколькими надежными коллекциями в службе).

Коллекции Reliable Collections изначально гарантируют высокую целостность данных, благодаря чему вам будет легче анализировать состояние приложений.
Высокая целостность достигается за счет того, что фиксация транзакции завершается только после регистрации всей транзакции в большинстве кворума реплик (включая первичные реплики).
Для достижения более низкой целостности приложения могут отправить подтверждение клиенту (или инициатору запроса) до того, как вернется асинхронная фиксация.

API надежных коллекций являются развитием API параллельных коллекций (находятся в пространстве имен **System.Collections.Concurrent** ):

* работают асинхронно (возвращают задачи, потому что, в отличие от параллельных коллекций, операции реплицируются и сохраняются);
* Нет из параметров: `ConditionalValue<T>` Использует `bool` для возврата и значение, а не из параметров. `ConditionalValue<T>` имеет сходство с `Nullable<T>`, но не требует, чтобы значение T было структурой.
* являются транзакционными (используется объект транзакции, благодаря чему пользователь может группировать действия с несколькими надежными коллекциями в одну транзакцию).

Сейчас пространство имен **Microsoft.ServiceFabric.Data.Collections** содержит три коллекции:

* [надежный словарь](https://msdn.microsoft.com/library/azure/dn971511.aspx) (реплицируемая, транзакционная и асинхронная коллекция пар "ключ-значение"; как и в **ConcurrentDictionary**, ключ и значение могут быть любого типа);
* [надежная очередь](https://msdn.microsoft.com/library/azure/dn971527.aspx) (реплицируемая, транзакционная и асинхронная очередь, функционирующая строго по методу FIFO; как и в **ConcurrentQueue**, значение может быть любого типа).
* [Надежная параллельная очередь](service-fabric-reliable-services-reliable-concurrent-queue.md) — реплицируемая, транзакционная и асинхронная упорядочивающая очередь для обеспечения высокой пропускной способности. Как и в **ConcurrentQueue**, значение может быть любого типа.

## <a name="next-steps"></a>Дальнейшие действия

* [Надежные рекомендации по сбору & рекомендациях](service-fabric-reliable-services-reliable-collections-guidelines.md)
* [Работа с надежными коллекциями](service-fabric-work-with-reliable-collections.md)
* [Транзакции и блокировки](service-fabric-reliable-services-reliable-collections-transactions-locks.md)
* Управление данными
  * [Резервное копирование и восстановление](service-fabric-reliable-services-backup-restore.md)
  * [Уведомления](service-fabric-reliable-services-notifications.md)
  * [Сериализация надежной коллекции](service-fabric-reliable-services-reliable-collections-serialization.md)
  * [Влияние сериализации данных на обновление приложений](service-fabric-application-upgrade-data-serialization.md)
  * [Конфигурация диспетчера надежных состояний](service-fabric-reliable-services-configuration.md)
* Прочее
  * [Надежные услуги быстро ежекты](service-fabric-reliable-services-quick-start.md)
  * [Справочник разработчика по надежным коллекциям](https://msdn.microsoft.com/library/azure/microsoft.servicefabric.data.collections.aspx)
