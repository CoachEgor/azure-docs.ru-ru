---
title: Управляемые идентификаторы для Azure
description: Узнайте об использовании управляемых идентификаторов для Azure с помощью service Fabric.
ms.topic: conceptual
ms.date: 12/09/2019
ms.custom: sfrev
ms.openlocfilehash: a26f188ed2f5e18bdf775cd1fb21001495ffdc89
ms.sourcegitcommit: b55d7c87dc645d8e5eb1e8f05f5afa38d7574846
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81461452"
---
# <a name="using-managed-identities-for-azure-with-service-fabric"></a>Использование управляемых идентификационных данных для Azure с помощью ткани обслуживания

Общей проблемой при создании облачных приложений является безопасное управление учетных данными в коде для проверки подлинности различных служб без сохранения их локально на рабочей станции разработчика или в управлении исходным кодом. *Управляемые идентификаторы Azure* решают эту проблему для всех ресурсов в active Directory Azure (Azure AD), предоставляя им автоматически управляемые идентификаторы в Azure AD. Вы можете использовать идентификацию службы для проверки подлинности любой службы, поддерживающей аутентификацию Azure AD, включая Key Vault, без каких-либо учетных данных, хранящихся в коде.

*Управляемые идентификаторы для ресурсов Azure* бесплатны с помощью подписки Azure AD для Azure. Дополнительные затраты отсутствуют.

> [!NOTE]
> *Управляемые идентификаторы для Azure* — это новое имя службы, ранее известное как Идентификатор управляемой службы (MSI).

## <a name="concepts"></a>Основные понятия

Управляемые идентификаторы для Azure основаны на нескольких ключевых концепциях:

- **Идентификатор клиента** - уникальный идентификатор, генерируемый Azure AD, который привязан к принципу приложения и сервиса во время его первоначальной подготовки (также см. [идентификатор приложения.)](/azure/active-directory/develop/developer-glossary#application-id-client-id)

- **Основной идентификатор** - идентификатор объекта основного объекта службы для управляемой идентификации, который используется для предоставления ролевого доступа к ресурсу Azure.

- **Директор службы** - объект Active Directory Azure, который представляет проекцию приложения AAD в данном арендаторе (также см. [принцип](../active-directory/develop/developer-glossary.md#service-principal-object)службы.)

Существует два типа управляемых удостоверений.

- **Управляемая итоговая система** включена непосредственно в экземпляре службы Azure.  Жизненный цикл удостоверения, назначенного системой, уникален для экземпляра службы Azure, включенного в систему.
- **Назначаемое пользователем управляемое удостоверение** создается как изолированный ресурс Azure. Идентификация может быть присвоена одному или несколько экземплярам службы Azure и управляется отдельно от жизненного цикла этих экземпляров.

Чтобы лучше понять разницу между управляемыми типами идентификационных данных, [см. Как работают управляемые идентификаторы для ресурсов Azure?](../active-directory/managed-identities-azure-resources/overview.md#how-does-the-managed-identities-for-azure-resources-work)

## <a name="supported-scenarios-for-service-fabric-applications"></a>Поддерживаемые сценарии для приложений Service Fabric

Управляемые идентификаторы для системы обслуживания поддерживаются только в кластерах, развернутых в отделах службы Azure, и только для приложений, развернутых в качестве ресурсов Azure; приложение, не развернутое в качестве ресурса Azure, не может быть назначено удостоверение. Концептуально говоря, поддержка управляемых идентификаторов в кластере Azure Service Fabric состоит из двух этапов:

1. Назначить один или несколько управляемых идентификационных данных ресурсу приложения; приложению может быть присвоено единое удостоверение личности, назначенное системой, и/или до 32 удостоверений, назначенных пользователем, соответственно.

2. В рамках определения приложения карта одной из идентификационных данных, присвоенных приложению, к любой отдельной службе, включающей приложение.

Система назначенных удостоверение приложения является уникальным для этого приложения; идентификация, назначенная пользователем, является автономным ресурсом, который может быть назначен нескольким приложениям. В приложении к нескольким службам приложения может быть присвоена единая идентификация (назначенная системой или назначенная пользователем), но каждая отдельная служба может быть присваивана только одному удостоверению личности. Наконец, службе должно быть назначено удостоверение личности, чтобы иметь доступ к этой функции. По сути, отображение идентификационных данных приложения в составных службах позволяет в приложении изоляции - служба может использовать только тождественность, нанесенную ему.  

В настоящее время для этой функции поддерживаются следующие сценарии:

- Развертывание нового приложения с одним или большим количеством служб и одним или более назначенными удостоверениями

- Назначить одно или несколько управляемых идентификаторов существующему (развертываемому в Azure) приложению для доступа к ресурсам Azure

Следующие сценарии не поддерживаются или не рекомендуются; обратите внимание, что эти действия не могут быть заблокированы, но могут привести к сбоям в приложениях:

- Удалить или изменить идентификаторы, назначенные приложению; если необходимо внести изменения, отправьте отдельные развертывания, чтобы сначала добавить новое назначение идентификации, а затем удалить ранее назначенное. Удаление идентификации из существующего приложения может иметь нежелательные последствия, включая оставление приложения в состоянии, которое не обновляется. Безопасно удалить приложение в целом, если удаление личности необходимо; Обратите внимание, что это удалит установленное системой удостоверение личности (если так определено), связанное с приложением, и удалит любые ассоциации с назначенными пользователем идентификаторами, назначенными приложению.

- Служба Поддержки системы управления идентификаторами в настоящее время не интегрирована в [AzureServiceTokenProvider.](../key-vault/general/service-to-service-authentication.md)

## <a name="next-steps"></a>Следующие шаги

- [Развертывание нового кластера Azure Service Fabric с управляемой поддержкой идентификации](./configure-new-azure-service-fabric-enable-managed-identity.md)
- [Включить управляемую идентификационную поддержку в существующем кластере Azure Service Fabric](./configure-existing-cluster-enable-managed-identity-token-service.md)
- [Развертывание приложения Azure Service Fabric с системой, назначенной управляемой личностью](./how-to-deploy-service-fabric-application-system-assigned-managed-identity.md)
- [Развертывание приложения Azure Service Fabric с помощью управляемого удостоверения пользователя](./how-to-deploy-service-fabric-application-user-assigned-managed-identity.md)
- [Использование управляемой идентификации приложения Service Fabric из сервисного кода](./how-to-managed-identity-service-fabric-app-code.md)
- [Предоставить доступ к другим ресурсам Azure](./how-to-grant-access-other-resources.md)
- [Объявление и использование секретов приложений в качестве KeyVaultСправки](./service-fabric-keyvault-references.md)
