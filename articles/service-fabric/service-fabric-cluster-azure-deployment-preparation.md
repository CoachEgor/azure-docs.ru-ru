---
title: Планирование развертывания кластера Azure Service Fabric | Документация Майкрософт
description: Дополнительные сведения о планировании и подготовке для рабочей среды развертывания кластера Service Fabric в Azure.
services: service-fabric
documentationcenter: .net
author: aljo-microsoft
manager: chackdan
editor: aljo
ms.assetid: ''
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: conceptual
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 03/20/2019
ms.author: aljo
ms.openlocfilehash: 0f3a9010805ec1a18490f6f530f60d7a3c763398
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60387865"
---
# <a name="plan-and-prepare-for-a-cluster-deployment"></a>Планирование и Подготовка развертывания кластера

Планирование и Подготовка развертывания кластера в рабочей среде очень важно.  Существует много факторов, которые следует учитывать.  В этой статье рассматриваются действия по подготовке развертывания кластера.

## <a name="read-the-best-practices-information"></a>Считать сведения о рекомендации
Управление приложениями Azure Service Fabric и кластеров успешно, существуют операции, что мы настоятельно рекомендуем выполнять для оптимизации надежности рабочей среды.  Дополнительные сведения в статье [приложения Service Fabric и кластером рекомендации](service-fabric-best-practices-overview.md).

## <a name="select-the-os-for-the-cluster"></a>Выберите ОС кластера
Service Fabric позволяет создавать кластеры Service Fabric на любых виртуальных машинах или компьютерах под управлением Windows Server или Linux.  Перед развертыванием кластера, необходимо выбрать операционной системы:  Windows или Linux.  Каждый узел (виртуальная машина) в кластере выполняется одной операционной системе, в том же кластере нельзя смешивать виртуальных машин Linux и Windows.

## <a name="capacity-planning"></a>Планирование загрузки
Для любой рабочей развернутой службы важным шагом является планирование загрузки. Вот несколько моментов, которые необходимо учесть:

* Начальное количество типов узлов для кластера 
* Свойства каждого типа узла (размер, количество экземпляров, первичный, доступ к Интернету, количество виртуальных машин и т. д.)
* Надежность и устойчивость характеристик кластера.

### <a name="select-the-initial-number-of-node-types"></a>Выберите начальное количество типов узлов
Во-первых, необходимо выяснить, для чего будет использоваться создаваемый кластер и какие виды приложений планируется в нем развернуть. Есть ли у вашего приложения несколько служб, среди которых есть службы, которые должны быть общедоступными или доступными из Интернета? У служб (составляющих приложение) различные требования к инфраструктуре, например больше ОЗУ или тактов центрального процессора? Кластер Service Fabric может состоять из более чем один тип узла: типа первичного узла и один или несколько типов вторичных узлов. Каждый тип узла соответствует набору масштабирования виртуальных машин. Каждый тип узла поддерживает возможность независимого масштабирования, имеет разные наборы открытых портов и собственные метрики емкости. [Свойства узла и ограничения на размещение] [ placementconstraints] можно настроить для ограничения определенных служб, к типам конкретный узел.  Дополнительные сведения в статье [число типов узлов, нужно создать кластер начинают работу с](service-fabric-cluster-capacity.md#the-number-of-node-types-your-cluster-needs-to-start-out-with).

### <a name="select-node-properties-for-each-node-type"></a>Выберите узел свойства для каждого типа узла
Типы узлов определяют номер SKU виртуальной Машины, количество и свойства виртуальных машин в наборе соответствующей шкалы.

Минимальный размер виртуальных машин для каждого типа узла определяется [уровень устойчивости] [ durability] выберите для типа узла.

Минимальное количество виртуальных машин для типа первичного узла определяется [уровень надежности] [ reliability] выбран.

См. в разделе минимальным требованиям для [типы первичного узла](service-fabric-cluster-capacity.md#primary-node-type---capacity-guidance), [с отслеживанием состояния рабочих нагрузок на типов вторичных узлов](service-fabric-cluster-capacity.md#non-primary-node-type---capacity-guidance-for-stateful-workloads), и [без отслеживания состояния рабочих нагрузок на типов вторичных узлов](service-fabric-cluster-capacity.md#non-primary-node-type---capacity-guidance-for-stateless-workloads). 

Больше чем минимальное количество узлов должно быть основано на количестве реплик приложения или служб, которые вы хотите запустить на узле этого типа.  [Планирование емкости для приложений Service Fabric](service-fabric-capacity-planning.md) помогает оценить ресурсы, необходимые для запуска приложений. Всегда можно масштабировать кластер или вниз позже, чтобы компенсировать изменение рабочей нагрузки приложения. 

### <a name="select-the-durability-and-reliability-levels-for-the-cluster"></a>Выберите уровни устойчивости и надежности для кластера
Уровень устойчивости используется, чтобы указать системе привилегии, имеющиеся у виртуальных машин в базовой инфраструктуре Azure. Для типа первичного узла эта привилегия позволяет Service Fabric приостановить любой запрос инфраструктуры на уровне виртуальной машины (например, перезагрузку, переустановку из образа или перенос виртуальной машины), который влияет на требования к кворуму, установленные для системных служб и ваших служб с отслеживанием состояния. Для типов вторичных узлов эта привилегия позволяет Service Fabric приостановить любой запрос инфраструктуры на уровне виртуальной машины (например, перезагрузку, переустановку из образа и перенос виртуальной машины), который влияет на требования к кворуму, установленные для ваших служб с отслеживанием состояния.  Преимущества уровней, а также рекомендации, на каком уровне и когда, см. в разделе [характеристики устойчивости кластера][durability].

Уровень надежности используется для задания числа реплик системных служб, которые будут выполняться в этом кластере на первичных узлах. Чем больше реплик, тем надежнее системные службы в кластере.  Преимущества уровней, а также рекомендации, на каком уровне и когда, см. в разделе [характеристики надежности кластера][reliability]. 

## <a name="enable-reverse-proxy-andor-dns"></a>Включение обратного прокси-сервера и (или) DNS
Службы, которые подключаются друг к другу в рамках кластера, обычно могут напрямую обратиться к конечным точкам другой службы, так как узлы в кластере расположены в пределах одной локальной сети. Чтобы упростить подключение между службами, Service Fabric предоставляет дополнительные службы. Объект [служба DNS](service-fabric-dnsservice.md) и [обратный прокси-службы](service-fabric-reverseproxy.md).  Обе службы можно включить при развертывании кластера.

Так как многие службы именно контейнерные службы, может быть существующее имя URL-адрес, возможность разрешить их, используя стандартные DNS-протокол (а не протокола службы именования) удобна, особенно в сценариях lift- and -shift» приложения. Именно это и делает служба DNS. Она позволяет сопоставить DNS-имена с именем службы и, следовательно, разрешить IP-адреса конечных точек.

Обратный прокси-сервер адреса службы в кластере, которые предоставляют конечные точки HTTP (включая HTTPS). Обратный прокси-сервер значительно упрощает вызов других служб, предоставляя определенного формата URI.  Обратный прокси-сервер также обрабатывает разрешения, подключения и повторите шаги, необходимые для взаимодействия с другим между службами.

## <a name="prepare-for-disaster-recovery"></a>Подготовка к аварийному восстановлению
Для обеспечения высокого уровня доступности крайне важно гарантировать продолжение работы всех типов служб при любых сбоях. Это особенно важно в ситуациях незапланированных сбоев, которые находятся вне вашего контроля. [Подготовка к аварийному восстановлению](service-fabric-disaster-recovery.md) описывает некоторые распространенные режимов сбоя, которые могут привести к авариям, если не моделируются и корректное управление. Здесь также рассматриваются способы устранения рисков и действия при аварии все таки произошла.

## <a name="production-readiness-checklist"></a>Контрольный список готовности рабочей среды
Готовы ли ваше приложение и кластер к приему рабочего трафика? Перед развертыванием кластера в рабочей среде, проведите [контрольный список готовности рабочей](service-fabric-production-readiness-checklist.md). Защиты приложения и кластера, бесперебойной работы при работе с элементами в этом контрольном списке. Мы настоятельно рекомендуем все эти элементы сниматься перед переходом в рабочую среду.

## <a name="next-steps"></a>Дальнейшие действия
* [Создание кластера Service Fabric под управлением Windows](service-fabric-best-practices-overview.md)
* [Создание кластера Service Fabric под управлением Linux](service-fabric-tutorial-create-vnet-and-linux-cluster.md)

[placementconstraints]: service-fabric-cluster-resource-manager-cluster-description.md#node-properties-and-placement-constraints
[durability]: service-fabric-cluster-capacity.md#the-durability-characteristics-of-the-cluster
[reliability]: service-fabric-cluster-capacity.md#the-reliability-characteristics-of-the-cluster