---
title: Запрашивание данных в предварительной версии службы "Аналитика временных рядов Azure" | Документация Майкрософт
description: Запрашивание данных в предварительной версии службы "Аналитика временных рядов Azure".
author: deepakpalled
ms.author: dpalled
manager: cshankar
ms.workload: big-data
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 10/21/2019
ms.custom: seodec18
ms.openlocfilehash: e660db5db3d1afc14a3c895e6786d1b6a8b82c13
ms.sourcegitcommit: 35715a7df8e476286e3fee954818ae1278cef1fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/08/2019
ms.locfileid: "73832421"
---
# <a name="data-querying"></a>Запрашивание данных

Служба "Аналитика временных рядов" (предварительная версия) позволяет запрашивать данные о событиях и метаданных, хранящихся в среде, с помощью программных интерфейсов общедоступной области. Эти программные интерфейсы (API) также используются в [обозревателе службы "Аналитика временных рядов" (предварительная версия)](./time-series-insights-update-explorer.md).

Доступны три основные категории API в службе "Аналитика временных рядов":

* **API**-интерфейсы среды. Эти API-интерфейсы позволяют выполнять запросы в самой среде "аналитика временных рядов". К примерам запросов относятся перечисление сред, к которым вызывающая сторона имеет доступ, и вывод метаданных среды.
* **API-интерфейсы временных рядов (ТСМ-Q)** . обеспечивает выполнение операций создания, чтения, обновления и удаления (CRUD) с метаданными, хранящимися в среде, входящей в модель временных рядов. Эти операции могут выполняться с экземплярами, типами и иерархиями.
* **API-интерфейсы запросов временных рядов (ТСК)** : позволяют получать данные телеметрии или событий, так как они записываются из поставщика источника или путем уменьшения данных с помощью скалярных и агрегатных функций, хранимых в составе переменных. Эти API-интерфейсы могут выполнять операции по преобразованию, объединению и применению вычислений с данными временных рядов.

Аналитика временных рядов использует язык выражений на основе строки с богатыми строками, [выражение временных рядов (целевой сервер)](https://docs.microsoft.com/rest/api/time-series-insights/preview-tsx)для выражения вычислений.

## <a name="azure-time-series-insights-preview-core-apis"></a>Основные API службы "Аналитика временных рядов Azure" (предварительная версия)

Поддерживаются следующие основные программные интерфейсы.

[Общие сведения о запросе ![временных рядов](media/v2-update-tsq/tsq.png)](media/v2-update-tsq/tsq.png#lightbox)

## <a name="environment-apis"></a>Программные интерфейсы среды

Доступны следующие программные интерфейсы среды:

* [Получение API среды](/rest/api/time-series-insights/management/environments/get): Возвращает список сред, к которым вызывающему объекту разрешен доступ.
* [Получить API доступности среды](/rest/api/time-series-insights/dataaccess(preview)/query/getavailability): Возвращает распределение количества событий по метке времени события `$ts`. Этот API позволяет определить наличие событий для метки времени, возвращая количество событий, если таковые существуют.
* [Получение API схемы событий](/rest/api/time-series-insights/dataaccess(preview)/query/geteventschema): Возвращает метаданные схемы событий для заданного диапазона поиска. Этот API позволяет получить все метаданные и свойства, доступные в схеме для заданной области поиска.

## <a name="time-series-model-query-tsm-q-apis"></a>API запросов модели временных рядов (TSM-Q)

Доступны следующие API-интерфейсы запросов для модели временных рядов. Большинство этих API поддерживают операцию пакетного выполнения для включения операций пакетной обработки команд CRUD в нескольких сущностях модели временных рядов:

* [API параметров модели](https://docs.microsoft.com/rest/api/time-series-insights/preview-model#model-settings-api): включает *Получение* и *исправление* для типа по умолчанию и имя модели среды.
* [API типов](https://docs.microsoft.com/rest/api/time-series-insights/preview-model#types-api): включает CRUD на типах временных рядов и связанных с ними переменных.
* [API иерархий](https://docs.microsoft.com/rest/api/time-series-insights/preview-model#hierarchies-api): включает CRUD в иерархиях временных рядов и связанные с ними пути к полям.
* [API экземпляров](https://docs.microsoft.com/rest/api/time-series-insights/preview-model#instances-api): включает CRUD на экземплярах временных рядов и связанных с ними полях экземпляров. Кроме того, API экземпляров поддерживает следующие операции:
  * [Поиск](https://docs.microsoft.com/rest/api/time-series-insights/dataaccess(preview)/timeseriesinstances/search): получает частичный список попаданий в поиск экземпляров временных рядов на основе атрибутов экземпляра.
  * [Предложение](https://docs.microsoft.com/rest/api/time-series-insights/dataaccess(preview)/timeseriesinstances/suggest). ищет и предлагает частичный список попаданий в поиск экземпляров временных рядов на основе атрибутов экземпляра.

## <a name="time-series-query-tsq-apis"></a>API запросов временных рядов (TSQ)

Доступны следующие интерфейсы API запросов временных рядов. Эти API-интерфейсы доступны во всех поддерживаемых многоуровневых хранилищах службы "аналитика временных рядов". Параметры URL-адреса запроса используются для указания [типа хранилища](https://docs.microsoft.com/rest/api/time-series-insights/dataaccess(preview)/query/execute#uri-parameters) , в котором должен выполняться запрос:

* [API получения событий](/rest/api/time-series-insights/dataaccess(preview)/query/execute#getevents): позволяет получать запросы и получать данные о временных рядах данных из событий по мере их записи в службу "аналитика временных рядов" от поставщика источника. Этот API позволяет получать необработанные события для заданного идентификатора временного ряда и диапазона поиска. Этот API поддерживает разбивку на страницы для получения полного набора данных для выбранного входа. 

* [Получение API серии](/rest/api/time-series-insights/dataaccess(preview)/query/execute#getseries). позволяет получать запросы и получать данные о временных рядах данных из захваченных событий с помощью данных, записанных на канале передачи. Возвращаемые значения основаны на встроенных переменных или переменных, которые были определены в модели. Этот API поддерживает разбивку на страницы для получения полного набора данных для выбранного входа. Этот API помогает при определении вычисляемых свойств или столбцов.

    >[!NOTE]
    > Предложение статистического вычисления игнорируется даже в том случае, если оно указано в модели или встроенное.

  API получения рядов возвращает значение временных рядов для каждой переменной каждого интервала. Значение временных рядов — это формат, в котором аналитика временных рядов использует для вывода JSON из запроса. Возвращаемые значения основаны на идентификаторе временного ряда и наборе предоставленных переменных.

* [Статистический API-интерфейс серии](/rest/api/time-series-insights/dataaccess(preview)/query/execute#aggregatevariable): позволяет выполнять запросы и получать данные о временных рядах данных из захваченных событий с помощью выборки и статистической обработки записанных данных. Этот API поддерживает непрерывное выполнение с помощью [маркеров продолжения](https://docs.microsoft.com/rest/api/time-series-insights/dataaccess(preview)/query/execute#queryresultpage).

  API статистического вычисления рядов возвращает значение временных рядов для каждой переменной каждого интервала. Значения основаны на идентификаторе временного ряда и наборе предоставленных переменных. API статистического вычисления рядов обеспечивает сокращение за счет использования переменных, которые хранятся в модели временных рядов или встроены, для статистического вычисления или выборки данных.

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте больше о [хранении и](./time-series-insights-update-storage-ingress.md) входе в предварительной версии службы "аналитика временных рядов Azure".
- Прочтите статью анализ [данных о моделировании](./time-series-insights-update-tsm.md) временных рядов в предварительной версии.
- Ознакомьтесь [с рекомендациями по выбору идентификатора временных рядов](./time-series-insights-update-how-to-id.md).
