---
title: Добавление источника событийных концентраторов - Azure Time Series Insights Документы Майкрософт
description: Узнайте о том, как добавить источник событий концентратора событий Azure в среду "Аналитика временных рядов".
ms.service: time-series-insights
services: time-series-insights
author: deepakpalled
ms.author: dpalled
manager: cshankar
ms.reviewer: v-mamcge, jasonh, kfile
ms.workload: big-data
ms.topic: conceptual
ms.date: 01/30/2020
ms.custom: seodec18
ms.openlocfilehash: c3b06289ba6ce98d4307a8255981ecdba069fdfa
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76905408"
---
# <a name="add-an-event-hub-event-source-to-your-time-series-insights-environment"></a>Добавление источника событий концентратора событий в среду "Аналитика временных рядов Azure"

В этой статье описывается, как добавить источник событий, считывающий данные из Центров событий Azure, в среду "Аналитика временных рядов" с помощью портала Azure.

> [!NOTE]
> Шаги, описанные в этой статье, применяются как к средам Time Series Insights GA, так и к средам Time Series Insights Previews.

## <a name="prerequisites"></a>Предварительные требования

- Создайте среду Исследования временных рядов, описанную в [среде «Создание анализа временных разношерстных» Azure.](./time-series-insights-update-create-environment.md)
- Создайте концентратор событий. Прочитайте [создать пространство имен событий и концентратор событий с помощью портала Azure.](../event-hubs/event-hubs-create.md)
- В концентратор событий должны отправляться активные события сообщений. Узнайте, как отправлять события в [концентраторы событий Azure с помощью рамочного соглашения .NET.](../event-hubs/event-hubs-dotnet-framework-getstarted-send.md)
- Создайте выделенную группу объектов-получателей в концентраторе событий для среды "Аналитика временных рядов". Каждый источник событий Аналитики временных рядов должен иметь собственную выделенную группу объектов-получателей, не используемую другими объектами-получателями. Если несколько читателей потребляют события из одной и той же группы потребителей, все читатели, скорее всего, проявляют сбои. У каждого концентратора событий должно быть не более 20 групп объектов-получателей. Для получения подробной информации прочитайте [руководство по программированию Event Hubs.](../event-hubs/event-hubs-programming-guide.md)

### <a name="add-a-consumer-group-to-your-event-hub"></a>Добавление группы объектов-получателей в концентратор событий

Группы объектов-получателей используются приложениями для извлечения данных из Центров событий Azure. Чтобы надежно считывать данные из концентратора событий, предоставьте специальную группу потребителей, которая используется только в этой среде Time Series Insights.

Чтобы добавить новую группу объектов-получателей в концентратор событий, выполните следующие действия.

1. На [портале Azure](https://portal.azure.com)найдите и откройте экземпляр концентратора событий из панели **Обзора** пространства имен концентратора. Выберите **сущности > концентраты событий** или найдите экземпляр под **name.**

    [![Откройте пространство имен концентратора событий](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-connect-event-hub-namespace.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-connect-event-hub-namespace.png#lightbox)

1. В экземпляре концентратора событий выберите **организации > группы потребителей.** Затем выберите **группу потребителей,** чтобы добавить новую группу потребителей. 

   [![Концентратор событий - Добавить группу потребителей](media/time-series-insights-how-to-add-an-event-source-eventhub/add-event-hub-consumer-group.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/add-event-hub-consumer-group.png#lightbox)

   В противном случае выберите существующую группу потребителей и перейдите к следующему разделу.

1. На странице **Группы потребителей** введите новое уникальное значение для параметра **Имя**.  Используйте это же имя при создании источника событий в среде "Аналитика временных рядов Azure".

1. Выберите **Создать**.

## <a name="add-a-new-event-source"></a>Добавление нового источника событий

1. Войдите на [портал Azure](https://portal.azure.com).

1. Найдите существующую среду "Аналитика временных рядов". В меню слева выберите **Все ресурсы**, а затем выберите среду "Аналитика временных рядов".

1. Выберите **Источники событий,** а затем выберите **Добавить**.

   [![Нажмите кнопку "Добавить" в разделе "Источники событий"](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-add-an-event-source.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-add-an-event-source.png#lightbox)

1. Введите значение для **исходного значения событий,** уникальное для `Contoso-TSI-GA-Event-Hub-ES`этой среды Time Series Insights, например.

1. Для параметра **Источник** выберите значение **Концентратор событий**.

1. Выберите подходящие значения для параметра **Вариант импорта**:

   * Выберите **Использовать концентратор событий из доступных подписок**, если в одной из подписок уже есть концентратор событий. Этот вариант — самый простой подход.

     [![Выберите опцию импорта Исхода событий](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-event-hub-select-import-option.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-event-hub-select-import-option.png#lightbox)

    *  Если выбран параметр **Использовать концентратор событий из доступных подписок**, см. описание каждого из обязательных свойств в следующей таблице:

       [![Подробная информация о подписке и центре событий](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-configure-create-confirm.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/tsi-configure-create-confirm.png#lightbox)

       | Свойство | Описание |
       | --- | --- |
       | Подписка | Подписка, к которой принадлежит желаемый экземпляр концентратора событий и пространство имен. |
       | пространство имен концентратора событий; | Пространство имен концентратора событий принадлежит желаемому экземпляру концентратора событий. |
       | имя концентратора событий; | Название желаемого экземпляра концентратора событий. |
       | Значение политики концентратора событий | Выберите желаемую политику общего доступа. Можно создать общую политику доступа на вкладке **концентратора** событий. Каждая общая политика доступа имеет имя, установленные разрешения и ключи доступа. Политика общего доступа для источника событий *должна* иметь разрешения на **чтение**. |
       | Ключ политики концентратора событий | Предварительно заселено из выбранного значения политики Концентр. |

    * Выберите **Ввести параметры концентратора событий вручную**, если концентратор событий находится за пределами подписок или требуется выбрать дополнительные параметры.

       В следующей таблице описаны обязательные свойства для параметра **Ввести параметры концентратора событий вручную**:
 
       | Свойство | Описание |
       | --- | --- |
       | Идентификатор подписки | Подписка, к которой принадлежит желаемый экземпляр концентратора событий и пространство имен. |
       | Группа ресурсов | Группа ресурсов, к которой принадлежит желаемый экземпляр концентратора событий и пространство имен. |
       | пространство имен концентратора событий; | Пространство имен концентратора событий принадлежит желаемому экземпляру концентратора событий. |
       | имя концентратора событий; | Название желаемого экземпляра концентратора событий. |
       | Значение политики концентратора событий | Выберите желаемую политику общего доступа. Можно создать общую политику доступа на вкладке **концентратора** событий. Каждая общая политика доступа имеет имя, установленные разрешения и ключи доступа. Политика общего доступа для источника событий *должна* иметь разрешения на **чтение**. |
       | Ключ политики концентратора событий | Ключ общего доступа, используемый для аутентификации доступа к пространству имен Служебной шины. Введите первичный или вторичный ключ здесь. |

    * Оба варианта имеют следующие параметры конфигурации:

       | Свойство | Описание |
       | --- | --- |
       | Группа потребителей концентратора событий | Группа объектов-получателей, которая считывает события из концентратора событий. Мы настоятельно рекомендуем использовать выделенную группу объектов-получателей для источника событий. |
       | Формат сериализации событий | В настоящее время JSON — это единственный доступный формат сериализации. Сообщения событий должны быть в этом формате или данные не могут быть прочитаны. |
       | Имя свойства для метки времени | Чтобы определить это значение, необходимо понимать формат данных сообщения, отправляемого в концентратор событий. Это значение представляет собой **имя** определенного свойства события в данных сообщения, которое нужно использовать в качестве метки времени для события. Для этого значения учитывается регистр. Если оставить значение пустым, в качестве метки времени события будет использоваться **время постановки события в очередь** в пределах источника событий. |

1. Добавьте имя отдельной группы объектов-получателей Аналитики временных рядов, которое вы добавили в концентратор событий.

1. Выберите **Создать**.

   После создания источника событий Time Series Insights автоматически запускает потоковую передачу данных в среду.

## <a name="next-steps"></a>Дальнейшие действия

* [Определите политики доступа к данным](time-series-insights-data-access.md), чтобы защитить ваши данные.

* [Отправка событий](time-series-insights-send-events.md) в исходный исход события.

* Получите доступ к своей среде в [обозревателе службы "Аналитика временных рядов"](https://insights.timeseries.azure.com).
