---
title: Добавление источника событий Центра событий в службу "Аналитика временных рядов Azure" | Документация Майкрософт
description: В этой статье описывается, как добавить источник событий, подключенный к Центрам событий Azure и к среде "Аналитика временных рядов".
ms.service: time-series-insights
services: time-series-insights
author: ashannon7
ms.author: dpalled
manager: cshankar
ms.reviewer: v-mamcge, jasonh, kfile
ms.workload: big-data
ms.topic: conceptual
ms.date: 08/06/2019
ms.custom: seodec18
ms.openlocfilehash: 8403c8fbc4faf35e0ccd3c87347e88a46f0769ff
ms.sourcegitcommit: 670c38d85ef97bf236b45850fd4750e3b98c8899
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2019
ms.locfileid: "68854474"
---
# <a name="add-an-event-hub-event-source-to-your-time-series-insights-environment"></a>Добавление источника событий концентратора событий в среду "Аналитика временных рядов Azure"

В этой статье описывается, как добавить источник событий, считывающий данные из Центров событий Azure, в среду "Аналитика временных рядов" с помощью портала Azure.

> [!NOTE]
> Действия, описанные в этой статье, применяются к средам "аналитика временных рядов" в режиме "Глобальный доступ" и "аналитика временных рядов".

## <a name="prerequisites"></a>предварительные требования

- Создайте среду службы "аналитика временных рядов", как описано в статье [Создание среды службы "аналитика временных рядов Azure](./time-series-insights-update-create-environment.md)".
- Создайте концентратор событий. См. раздел [Создание пространства имен концентраторов событий и концентратора событий с помощью портал Azure](../event-hubs/event-hubs-create.md).
- В концентратор событий должны отправляться активные события сообщений. Узнайте, как [Отправить события в концентраторы событий Azure с помощью .NET Framework](../event-hubs/event-hubs-dotnet-framework-getstarted-send.md).
- Создайте выделенную группу объектов-получателей в концентраторе событий для среды "Аналитика временных рядов". Каждый источник событий Аналитики временных рядов должен иметь собственную выделенную группу объектов-получателей, не используемую другими объектами-получателями. Если несколько модулей чтения используют события из одной группы потребителей, как правило, во всех модулях могут произойти сбои. У каждого концентратора событий должно быть не более 20 групп объектов-получателей. Дополнительные сведения см. в статье [Руководство по программированию Центров событий](../event-hubs/event-hubs-programming-guide.md).

### <a name="add-a-consumer-group-to-your-event-hub"></a>Добавление группы объектов-получателей в концентратор событий

Группы объектов-получателей используются приложениями для извлечения данных из Центров событий Azure. Чтобы надежно считывать данные из концентратора событий, укажите выделенную группу потребителей, которая используется только в этой среде "аналитика временных рядов".

Чтобы добавить новую группу объектов-получателей в концентратор событий, выполните следующие действия.

1. На портале Azure найдите и откройте концентратор событий.

1. В разделе **Сущности** щелкните **Группы потребителей**, а затем выберите **группу объектов-получателей**.

   [![Концентратор событий — Добавление группы потребителей](media/time-series-insights-how-to-add-an-event-source-eventhub/5-event-hub-consumer-group.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/5-event-hub-consumer-group.png#lightbox)

1. На странице **Группы потребителей** введите новое уникальное значение для параметра **Имя**.  Используйте это же имя при создании источника событий в среде "Аналитика временных рядов Azure".

1. Нажмите кнопку **Создать**.

## <a name="add-a-new-event-source"></a>Добавление нового источника событий

1. Войдите на [портале Azure](https://portal.azure.com).

1. Найдите существующую среду "Аналитика временных рядов". В меню слева выберите **Все ресурсы**, а затем выберите среду "Аналитика временных рядов".

1. В разделе **Топология окружения** выберите **Источники событий**, а затем щелкните **Добавить**.

   [![В разделе источники событий нажмите кнопку Добавить.](media/time-series-insights-how-to-add-an-event-source-eventhub/1-event-sources.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/1-event-sources.png#lightbox)

1. Введите значение для параметра **Имя источника событий**, уникальное для этой среды "Аналитика временных рядов", например **event-stream**.

1. Для параметра **Источник** выберите значение **Концентратор событий**.

1. Выберите подходящие значения для параметра **Вариант импорта**:
   - Выберите **Использовать концентратор событий из доступных подписок**, если в одной из подписок уже есть концентратор событий. Этот вариант — самый простой подход.

       [![В области создать источник события введите значения для первых трех параметров.](media/time-series-insights-how-to-add-an-event-source-eventhub/2-import-option.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/2-import-option.png#lightbox)


       [![Сведения о подписке и концентраторе событий](media/time-series-insights-how-to-add-an-event-source-eventhub/3-new-event-source.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/3-new-event-source.png#lightbox)

     Если выбран параметр **Использовать концентратор событий из доступных подписок**, см. описание каждого из обязательных свойств в следующей таблице:

     | Свойство | Описание |
     | --- | --- |
     | Идентификатор подписки | Выберите подписку, в которой был создан этот концентратор событий.
     | Пространство имен служебной шины | Выберите пространство имен Служебной шины Azure, содержащее концентратор событий.
     | Имя концентратора событий | Выберите имя концентратора событий.
     | Имя политики концентратора событий | Выберите политику общего доступа. Политику общего доступа можно создать на вкладке **Настройка** в концентраторе событий. Каждой политике общего доступа присваивается имя, а также для нее задаются разрешения и ключи доступа. Политика общего доступа для источника событий *должна* иметь разрешения на **чтение**.
     | Ключ политики концентратора событий | Значение ключа может быть предварительно заполнено.
     | Группа потребителей концентратора событий | Группа объектов-получателей, которая считывает события из концентратора событий. Мы настоятельно рекомендуем использовать выделенную группу объектов-получателей для источника событий. |
     | Формат сериализации событий | В настоящее время JSON — это единственный доступный формат сериализации. Сообщения о событиях должны быть в этом формате, или данные не могут быть прочитаны. |
     | Имя свойства метки времени | Чтобы определить это значение, необходимо понимать формат данных сообщения, отправляемого в концентратор событий. Это значение представляет собой **имя** определенного свойства события в данных сообщения, которое нужно использовать в качестве метки времени для события. Для этого значения учитывается регистр. Если оставить значение пустым, в качестве метки времени события будет использоваться **время постановки события в очередь** в пределах источника событий. |

    - Выберите **Ввести параметры концентратора событий вручную**, если концентратор событий находится за пределами подписок или требуется выбрать дополнительные параметры.

      В следующей таблице описаны обязательные свойства для параметра **Ввести параметры концентратора событий вручную**:
 
      | Свойство | Описание |
      | --- | --- |
      | Идентификатор подписки | Подписка, в которой был создан этот концентратор событий.
      | Группа ресурсов | Группа ресурсов, в которой создан этот концентратор событий.
      | Пространство имен служебной шины | Пространство имен Service Bus — это контейнер для набора сущностей обмена сообщениями. При создании концентратора событий создается также пространство имен служебной шины.
      | Имя концентратора событий | Имя концентратора событий. При создании вы также присваиваете концентратору событий определенное имя.
      | Имя политики концентратора событий | Политика общего доступа. Политику общего доступа можно создать на вкладке **Настройка** в концентраторе событий. Каждой политике общего доступа присваивается имя, а также для нее задаются разрешения и ключи доступа. Политика общего доступа для источника событий *должна* иметь разрешения на **чтение**.
      | Ключ политики концентратора событий | Ключ общего доступа, используемый для аутентификации доступа к пространству имен Служебной шины. Введите первичный или вторичный ключ здесь.
      | Группа потребителей концентратора событий | Группа объектов-получателей, которая считывает события из концентратора событий. Мы настоятельно рекомендуем использовать выделенную группу объектов-получателей для источника событий.
      | Формат сериализации событий | В настоящее время JSON — это единственный доступный формат сериализации. Сообщения о событиях должны быть в этом формате, или данные не могут быть прочитаны. |
      | Имя свойства метки времени | Чтобы определить это значение, необходимо понимать формат данных сообщения, отправляемого в концентратор событий. Это значение представляет собой **имя** определенного свойства события в данных сообщения, которое нужно использовать в качестве метки времени для события. Для этого значения учитывается регистр. Если оставить значение пустым, в качестве метки времени события будет использоваться **время постановки события в очередь** в пределах источника событий. |

1. Добавьте имя отдельной группы объектов-получателей Аналитики временных рядов, которое вы добавили в концентратор событий.

1. Нажмите кнопку **Создать**.

   [![Выберите Создать.](media/time-series-insights-how-to-add-an-event-source-eventhub/4-create-button.png)](media/time-series-insights-how-to-add-an-event-source-eventhub/4-create-button.png#lightbox)

   После создания источника событий Аналитика временных рядов автоматически запустит потоковую передачу данных в среду.

## <a name="next-steps"></a>Следующие шаги

* [Определите политики доступа к данным](time-series-insights-data-access.md), чтобы защитить ваши данные.

* [Отправьте события](time-series-insights-send-events.md) в источник событий.

* Получите доступ к своей среде в [обозревателе службы "Аналитика временных рядов"](https://insights.timeseries.azure.com).
