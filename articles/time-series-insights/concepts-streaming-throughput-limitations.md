---
title: Ограничения пропускной способности приема потоковой передачи — служба "аналитика временных рядов Azure" | Документация Майкрософт
description: Сведения о предельной пропускной способности в службе "аналитика временных рядов Azure".
author: lyrana
ms.author: lyhughes
manager: cshankar
ms.workload: big-data
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 06/03/2020
ms.custom: seodec18
ms.openlocfilehash: d5a82aa3aca55622308cae5816c95df9766048da
ms.sourcegitcommit: e132633b9c3a53b3ead101ea2711570e60d67b83
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/07/2020
ms.locfileid: "86050073"
---
# <a name="streaming-ingestion-throughput-limits"></a>Ограничения пропускной способности приема потоковой передачи

Ниже описаны ограничения для потоковой передачи данных службы "аналитика временных рядов Azure".

> [!TIP]
> Полный список всех ограничений предварительной версии см. в статье о [планировании среды](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-update-plan#review-preview-limits). **TODO** удалить слово "Preview" (Предварительная версия) после обновления заголовка статьи.

## <a name="per-environment-limitations"></a>Ограничения на среду

Как правило, скорость входящего трафика рассматривается как произведение числа устройств в организации, частоты отправки событий и размера каждого события:

*  **число устройств** × **частота отправки событий** × **размер каждого события**.

По умолчанию служба "аналитика временных рядов" может принимать входящие данные с частотой **до 1 МБ в секунду (Мбит/с) для среды "аналитика временных рядов"**. Существуют дополнительные ограничения [для каждой секции центра](concepts-streaming-throughput-limitations.md#hub-partitions-and-per-partition-limits).

> [!TIP]
>
> * Поддержка скоростей приема до 16 Мбит/с предоставляется по запросу.
> * Если вам требуется более высокая пропускная способность, свяжитесь с нами, отправив запрос в службу поддержки не портале Azure.
 
* **Пример 1**.

    В Contoso Shipping имеется 100 000 устройств, которые создают событие три раза в минуту. Размер события составляет 200 байт. В качестве источника событий Аналитики временных рядов используется Центр Интернета вещей с четырьмя секциями.

    * Скорость приема для среды Аналитики временных рядов рассчитывается следующим образом: **100 000 устройств * 200 байт/событие * (3/60 событий/с) = 1 Мбит/с**.
    * Скорость приема на раздел составит 0,25 Мбит/с.
    * Ставка приема для доставки Contoso должна быть в пределах ограничения масштабирования.

* **Пример 2.**

    В Contoso Fleet Analytics имеется 60 000 устройств, каждое из которых создает событие каждую секунду. В качестве источника событий Аналитики временных рядов используется Центр событий с четырьмя секциями. Размер события составляет 200 байт.

    * Скорость приема рассчитывается следующим образом: **60 000 устройств * 200 байт/событие * (1 событие/с) = 12 Мбит/с**.
    * Скорость приема на секцию составит 3 Мбит/с.
    * Скорость приема в Contoso Fleet Analytics превышает ограничения, заданные для среды и секции. Чтобы оставаться в пределах ограничений предварительной версии, Сотрудники могут отправить запрос в службу поддержки Аналитики временных рядов на повышение скорости приема для своей среды, и создать Центр событий с дополнительными секциями.

## <a name="hub-partitions-and-per-partition-limits"></a>Секции центра и ограничения на секцию

При планировании среды Аналитики временных рядов важно учитывать конфигурацию источников событий, которые будут подключены к Аналитике временных рядов. Для включения горизонтального масштабирования в целях обработки событий Центр Интернета вещей Azure и Центры событий используют секции. 

*Секция* — это упорядоченная последовательность событий, хранящаяся в центре. Число секций задается на этапе создания центра и не может быть изменено.

Рекомендации по секционированию Центров событий см. в разделе о [необходимом количестве секций](https://docs.microsoft.com/azure/event-hubs/event-hubs-faq#how-many-partitions-do-i-need).

> [!NOTE]
> Большинству Центров Интернета вещей, используемых в Аналитике временных рядов Azure, требуется всего четыре секции.

Независимо от того, создаете ли вы новый центр для среды "аналитика временных рядов" или используете существующую, вам потребуется рассчитать частоту приема для каждой секции, чтобы определить, находится ли она в пределах ограничений. 

Сейчас в Аналитике временных рядов Azure (предварительная версия) установлен общий **предел для каждой секции, равный 0,5 Мбит/с**.

### <a name="iot-hub-specific-considerations"></a>Специфика работы с Центром Интернета вещей

Создаваемому в Центре Интернета вещей устройству назначается секция на постоянной основе. В этом случае Центр Интернета вещей может гарантировать упорядочение событий (так как назначение никогда не меняется).

Фиксированное назначение секции также влияет на экземпляры Аналитики временных рядов, которые принимают данные, отправляемые из нижестоящего Центра Интернета вещей. Когда сообщения с нескольких устройств перенаправляются в центр с помощью одного идентификатора устройства шлюза, они могут поступить в одну секцию одновременно, что может привести к превышению ограничений на масштаб каждой секции.

**Влияние**.

* Если в одной секции скорость приема данных постоянно превышает ограничение предварительной версии, возможно, Аналитика временных рядов не будет синхронизировать все данные телеметрии устройств, пока не будет превышен срок хранения данных в Центре Интернета вещей. При постоянном превышении ограничений приема отправленные данные могут быть потеряны.

Чтобы избежать подобных ситуаций, рекомендуются следующие методы.

* Перед развертыванием решения рассчитайте скорость приема на секцию.
* Оптимально распределите нагрузку на устройства Центра Интернета.

> [!IMPORTANT]
> Для сред, использующих центр Интернета вещей в качестве источника событий, вычислите скорость приема с помощью числа используемых устройств-концентраторов, чтобы ставка была меньше 0,5 Мбит/с на ограничение секций.
>
> * Ограничение предварительной версии не будет превышено даже при одновременном поступлении нескольких событий.

  ![Диаграмма секций Центра Интернета вещей](media/concepts-ingress-overview/iot-hub-partiton-diagram.png)

Дополнительные сведения об оптимизации пропускной способности центра и секций см. в следующих ресурсах:

* [Масштаб центра Интернета вещей](https://docs.microsoft.com/azure/iot-hub/iot-hub-scaling)
* [Масштаб Центра событий](https://docs.microsoft.com/azure/event-hubs/event-hubs-scalability#throughput-units)
* [Секции Центра событий](https://docs.microsoft.com/azure/event-hubs/event-hubs-features#partitions)

## <a name="next-steps"></a>Дальнейшие шаги

* Дополнительные сведения о [хранении](concepts-storage.md) данных