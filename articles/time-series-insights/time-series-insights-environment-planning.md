---
title: Планируйте свою среду GA - Исследования серии времени Azure Документы Майкрософт
description: Рекомендации по подготовке, настройке и развертыванию среды Azure Time Series Insights GA.
services: time-series-insights
ms.service: time-series-insights
author: deepakpalled
ms.author: dpalled
manager: cshankar
ms.devlang: csharp
ms.workload: big-data
ms.topic: conceptual
ms.date: 01/21/2020
ms.custom: seodec18
ms.openlocfilehash: 972bb2a804057037deedb448674abafcc175b21f
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76314816"
---
# <a name="plan-your-azure-time-series-insights-ga-environment"></a>Планируйте среду анализа серии времени Azure Insights GA

В этой статье описывается, как планировать общую доступность azure Time Series Insights (GA) на основе ожидаемой скорости входа и требований к хранению данных.

## <a name="video"></a>Видеоролик

**Посмотрите это видео, чтобы узнать больше о хранении данных в Azure Time Series Insights и о**том, как его спланировать:<br /><br />

> [!VIDEO https://www.youtube.com/embed/03x6zKDQ6DU]

## <a name="best-practices"></a>Рекомендации

Чтобы начать работу с Azure Time Series Insights, лучше всего, если вы знаете, сколько данных вы ожидаете нажать к минуте и как долго вам нужно хранить данные.  

Для получения дополнительной информации о емкости и удержания для обоих Time Series Исследования SKUs, читать [Time Series Исследования ценообразования](https://azure.microsoft.com/pricing/details/time-series-insights/).

Чтобы лучше всего спланировать среду Time Series Insights для долгосрочного успеха, рассмотрим следующие атрибуты:

- [Емкость хранилища](#storage-capacity)
- [Срок хранения данных](#data-retention)
- [Объем входящих данных](#ingress-capacity)
- [Формирование событий](#shape-your-events)
- [Обеспечение того, чтобы у вас были справочные данные](#ensure-that-you-have-reference-data)

## <a name="storage-capacity"></a>Емкость хранилища

По умолчанию Time Series Insights сохраняет данные в зависимости от объема резервирования хранилища (единицы &#215; объеме хранилища на единицу) и входа.

## <a name="data-retention"></a>Хранение данных

Можно изменить настройки **времени хранения данных** в среде Исследования времени Azure. Вы можете включить до 400 дней удержания. 

Azure Time Series Insights имеет два режима:

* Один режим оптимизирует самые современные данные. Он применяет политику **очистки старых данных,** оставляя последние данные доступными в экземпляре. Этот режим в режиме, по умолчанию. 
* Другой оптимизирует данные, чтобы оставаться ниже настроенных лимитов удержания. **Вход паузы** предотвращает проникновение новых данных при выборе **лимита хранилища.**

Можно настроить удержание и переключение между двумя режимами на странице конфигурации среды на портале Azure.

> [!IMPORTANT]
> Вы можете настроить не более 400 дней хранения данных в среде Azure Time Series Insights GA.

### <a name="configure-data-retention"></a>Настройка срока хранения данных

1. Выберите нужную среду Аналитики временных рядов на [портале Azure](https://portal.azure.com).

1. В **панели среды Time Series Insights** под **настройками**выберите **конфигурацию хранения.**

1. В **коробке времени хранения данных (в днях)** введите значение от 1 до 400.

   [![Настройка времени хранения](media/data-retention/configure-data-retention.png)](media/data-retention/configure-data-retention.png#lightbox)

> [!TIP]
> Подробнее о том, как реализовать соответствующую политику хранения данных, читайте [в материале «Как настроить удержание.](./time-series-insights-how-to-configure-retention.md)

## <a name="ingress-capacity"></a>Объем входящих данных

[!INCLUDE [Azure Time Series Insights GA limits](../../includes/time-series-insights-ga-limits.md)]

### <a name="environment-planning"></a>Планирование окружающей среды

Вторая область, на которой можно сосредоточиться при планировании среды Time Series Insights, — это входная емкость. Входная емкость является производной от распределения поминутной.

С точки зрения регулирования, всколыхнуемый пакет данных, размер пакета которого составляет 32 КБ, рассматривается как 32 события, каждый из которых 1 КБ в размерах. Максимально допустимый размер события составляет 32 кБ. Пакеты данных размером более 32 кБ усечены.

В одной среде допускается до 10 единиц SKU S1 и S2. Вы не можете перейти из среды S1 в S2. Вы не можете перейти из среды S2 в S1.

Для входного потенциала сначала определите общий вход, который вам требуется в месяц. Далее, определите, что ваши поминутные потребности. 

Дроссельная и задержка играют определенную роль в вминутной емкости. Если у вас есть всплеск вашего проникновения данных, который длится менее 24 часов, Time Series Insights может "догнать" со скоростью входа в два раза быстрее, чем ставки, перечисленные в предыдущей таблице.

Например, если у вас есть один S1 SKU, вы ввозите данные со скоростью 720 событий в минуту, а скорость передачи данных возрастает менее чем за один час со скоростью 1440 или менее, в вашей среде нет заметной задержки. Однако, если вы превышаете 1440 событий в минуту в течение более одного часа, вы, вероятно, будете испытывать задержку в данных, которые визуализированы и доступны для запроса в вашей среде.

Возможно, вы не знаете заранее, сколько данных вы ожидаете нажать. В этом случае телеметрия данных для [концентраторов Azure IoT](../iot-hub/iot-hub-metrics.md) и [Azure Event можно](https://blogs.msdn.microsoft.com/cloud_solution_architect/2016/05/25/using-the-azure-rest-apis-to-retrieve-event-hub-metrics/) найти в подписке на портал Azure. Телеметрия может помочь вам определить, как обеспечить вашу среду. Используйте панель **метрик** на портале Azure для соответствующего источника событий для просмотра телеметрии. Изучив метрики для источника событий вы сможете более эффективно спланировать и подготовить среду Аналитики временных рядов.

### <a name="calculate-ingress-requirements"></a>Расчет требований к объему входящих данных

Для расчета требований к проникновению:

- Убедитесь, что вваштивная способность превышает среднюю скорость в минуту и что среда достаточно велика, чтобы справиться с ожидаемым проникновением, что эквивалентно двухкратной вашей емкости менее чем за один час.

- Если всколыхающиеся пики возникают, которые длятся более 1 часа, используйте скорость спаза в качестве средней. Обеспечение среды с емкостью для обработки скорости всплеска.

### <a name="mitigate-throttling-and-latency"></a>Устранение регулирования и задержек

Для получения информации о том, как предотвратить регулирование и задержку, прочитайте [Mitigate задержки и регулирования](time-series-insights-environment-mitigate-latency.md).

## <a name="shape-your-events"></a>Формирование ваших событий

Важно обеспечить, чтобы способ отправки событий в Time Series Insights поддерживал размер среды, которую вы предоставляете. (С другой стороны, вы можете сопоставить размер среды с тем, сколько событий считываетСя Time Series Insights, и размер каждого события.) Также важно думать о атрибутах, которые можно использовать для нарезки и фильтрации при запросе данных.

> [!TIP]
> Просмотрите документацию JSON, формируя в [событиях отправки.](time-series-insights-send-events.md)

## <a name="ensure-that-you-have-reference-data"></a>Убедитесь, что у вас есть справочные данные

*Набор справочных данных* — это набор элементов, которые дополнят события из источника событий. Вдвижной движок Time Series Insights соединяет каждое событие из источника событий с соответствующей строкой данных в наборе справочных данных. Расширенное событие затем доступно для запроса. Соединение основано на столбцах **основных ключей,** которые определены в наборе справочных данных.

> [!NOTE]
> Справочные данные не соединяются задним числом. Только текущие и будущие данные о входе сопоставляются и присоединяются к набору справочных данных после настройки и загрузки. Если вы планируете отправить большой объем исторических данных в Time Series Insights и не загружать или не создавать справочные данные в Time Series Insights, возможно, вам придется переделать свою работу (подсказка: не весело).  

Чтобы узнать больше о том, как создавать, загружать и управлять справочными данными в Time Series Insights, прочитайте нашу [справочную документацию набора данных](time-series-insights-add-reference-data-set.md).

[!INCLUDE [business-disaster-recover](../../includes/time-series-insights-business-recovery.md)]

## <a name="next-steps"></a>Дальнейшие действия

- Начатые, создав [новую среду Исследования временных рядов на портале Azure.](time-series-insights-get-started.md)

- Узнайте, как [добавить источник событий Event Hubs](time-series-insights-how-to-add-an-event-source-eventhub.md) в Time Series Insights.

- Узнайте о том, как [настроить источник событий IoT Hub.](time-series-insights-how-to-add-an-event-source-iothub.md)
