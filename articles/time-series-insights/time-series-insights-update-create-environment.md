---
title: Руководство по Настройка среды службы "Аналитика временных рядов Azure" (предварительная версия) | Документация Майкрософт
description: Узнайте, как настроить среду "Аналитика временных рядов Azure" (предварительная версия).
author: ashannon7
ms.author: dpalled
ms.workload: big-data
manager: cshankar
ms.service: time-series-insights
services: time-series-insights
ms.topic: tutorial
ms.date: 06/18/2019
ms.custom: seodec18
ms.openlocfilehash: 824d24b97f192583a42192b3bb90eb1818e1aa18
ms.sourcegitcommit: a52d48238d00161be5d1ed5d04132db4de43e076
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/20/2019
ms.locfileid: "67272985"
---
# <a name="tutorial-set-up-an-azure-time-series-insights-preview-environment"></a>Руководство. Настройка среды "Аналитика временных рядов Azure" (предварительная версия)

Это руководство поможет вам создать среду службы "Аналитика временных рядов Azure" (предварительная версия) с оплатой по мере использования. 

Из этого руководства вы узнаете, как выполнять следующие задачи:

* Создать среду "Аналитика временных рядов Azure" (предварительная версия).
* Подключить среду "Аналитика временных рядов Azure" (предварительная версия) к концентратору событий в Центрах событий Azure.
* Запускать пример акселератора решений для потоковой передачи данных в среду "Аналитика временных рядов Azure" (предварительная версия).
* Выполнять базовый анализ данных.
* Определять тип и иерархию модели временных рядов и связывать ее с экземплярами.

>[!TIP]
> [Акселераторы решений Интернета вещей](https://www.azureiotsolutions.com/Accelerators) предоставляют готовые настроенные решения корпоративного уровня, позволяя ускорить разработку настраиваемых решений Интернета вещей.

## <a name="create-a-device-simulation"></a>Создание имитации устройств

В этом разделе описывается создание трех виртуальных устройств, которые будут отправлять данные в экземпляр Центра Интернета вещей.

1. Перейдите на [страницу акселераторов решений для Интернета вещей Azure](https://www.azureiotsolutions.com/Accelerators). На ней представлены несколько готовых примеров. Выполните вход с учетной записью Azure. Затем выберите **Имитация устройства**.

   [![Страница акселераторов решений для Интернета вещей Azure](media/v2-update-provision/device-one-accelerator.png)](media/v2-update-provision/device-one-accelerator.png#lightbox)

   Щелкните **Попробовать сейчас**.

1. Укажите приведенные ниже параметры на странице **Create Device Simulation solution** (Создание решения для имитации устройств).

    | Параметр | Действие |
    | --- | --- |
    | **Имя развертывания** | Введите уникальное значение для новой группы ресурсов. В эту группу помещаются все выбранные ресурсы Azure после их создания. |
    | **Подписка Azure.** | Выберите подписку, которая использовалась для создания среды Аналитики временных рядов. |
    | **Расположение Azure** | Выберите регион, который использовался для создания среды Аналитики временных рядов. |
    | **Варианты развертывания** | Выберите **Provision new IoT Hub** (Подготовить к работе новый Центр Интернета вещей). |
 
    Щелкните **Создать решение**. Для завершения развертывания решения может потребоваться до 20 минут.

    [![Создание страницы решения имитации устройства](media/v2-update-provision/device-two-create.png)](media/v2-update-provision/device-two-create.png#lightbox)

## <a name="create-a-time-series-insights-preview-payg-environment"></a>Создание среды "Аналитика временных рядов" с оплатой по мере использования (предварительная версия)

В этом разделе описано создание среды "Аналитика временных рядов Azure" (предварительная версия) и ее подключение к Центру Интернета вещей, созданному акселератором решений Интернета вещей, с помощью [портала Azure](https://portal.azure.com/).

1. Войдите на портал Azure, используя учетную запись подписки.

1. Выберите **Создать ресурс** > **Интернет вещей** > **Аналитика временных рядов**.

   [![Выбор категории "Интернет вещей" и пункта "Аналитика временных рядов"](media/v2-update-provision/payg-one-azure.png)](media/v2-update-provision/payg-one-azure.png#lightbox)

1. В области **Создание среды Аналитики временных рядов** на вкладке **Основы** задайте следующие параметры.

    | Параметр | Действие |
    | --- | ---|
    | **Имя среды** | Выберите уникальное имя для среды службы "Аналитика временных рядов Azure" (предварительная версия). |
    | **Подписка** | Введите подписку, в которой вы хотите создать среду службы "Аналитика временных рядов Azure" (предварительная версия). Рекомендуется использовать ту же подписку, что и остальные ресурсы Интернета вещей, созданные симулятором устройств. |
    | **Группа ресурсов** | Выберите имеющуюся группу ресурсов для ресурсов среды службы "Аналитика временных рядов Azure" (предварительная версия) или создайте новую. Группа ресурсов Azure служит контейнером для ресурсов Azure. Рекомендуется использовать ту же группу ресурсов, что и для остальных ресурсов Интернета вещей, созданных симулятором устройств. |
    | **Местоположение.** | Выберите регион центра обработки данных для среды службы "Аналитика временных рядов Azure" (предварительная версия). Чтобы избежать дополнительной задержки, лучше всего создать среду службы "Аналитика временных рядов Azure" (предварительная версия) в одном регионе с остальными ресурсами Интернета вещей. |
    | **Уровень** |  Выберите **PAYG** (*Оплата по мере использования*). Это номер SKU для продукта "Аналитика временных рядов Azure" (предварительная версия). |
    | **Идентификатор свойства** | Введите значение, которое однозначно идентифицирует ваш экземпляр временных рядов. Значение, указанное в поле **Идентификатор свойства**, является неизменяемым. Его невозможно будет изменить. В рамках данного руководства введите значение **iothub-connection-device-id**. Чтобы узнать больше об идентификаторе временного ряда, прочитайте статью [Лучшие методики при выборе идентификатора временного ряда](./time-series-insights-update-how-to-id.md). |
    | **Имя учетной записи хранения** | Введите глобально уникальное имя для новой учетной записи хранения. |
   
   По завершении выберите **Next: Источник событий**.

   [![Область создания среды Аналитики временных рядов](media/v2-update-provision/payg-two-create.png)](media/v2-update-provision/payg-two-create.png#lightbox)

1. На вкладке **Источник события** задайте следующие параметры.

   | Параметр | Действие |
   | --- | --- |
   | **Создать источник событий?** | Выберите **Да**.|
   | **Имя** | Введите уникальное значение для имени источника события. |
   | **Тип источника** | Выберите **Центр Интернета вещей**. |
   | **Выберите концентратор** | Выберите **Выбрать существующий**. |
   | **Подписка** | Выберите подписку, которая использовалась для симулятора устройства. |
   | **Имя Центра Интернета вещей** | Выберите имя центра Интернета вещей, которое вы создали для имитатора устройства. |
   | **IoT Hub access policy** (Политика доступа Центра Интернета вещей) | Выберите **iothubowner**. |
   | **Группа потребителей Центра Интернета вещей** | Щелкните **Новая**, введите уникальное имя и выберите **Добавить**. Группа потребителей должна быть уникальной для службы "Аналитика временных рядов Azure" (предварительная версия). |
   | **Свойство метки времени** | Это значение используется для идентификации свойства **Метка времени** во входящих данных телеметрии. В целях этого руководства оставьте данное поле пустым. Наш имитатор использует метку времени, поступающую из Центра Интернета вещей. Это поведение по умолчанию для службы "Аналитика временных рядов". |

   Выберите **Review + create** (Просмотреть и создать).

   [![Настройка источника событий](media/v2-update-provision/payg-five-event-source.png)](media/v2-update-provision/payg-five-event-source.png#lightbox)

1. На вкладке **Отзыв и создание** просмотрите выбранные параметры, а затем выберите **Создать**.

    [![Страница просмотра и создания с кнопкой "Создать"](media/v2-update-provision/payg-six-review.png)](media/v2-update-provision/payg-six-review.png#lightbox)

    Вы можете просмотреть состояние развертывания.

    [![Уведомление о завершении развертывания](media/v2-update-provision/payg-seven-deploy.png)](media/v2-update-provision/payg-seven-deploy.png#lightbox)

1. Если вы являетесь владельцем клиента, то вы получите доступ к среде службы "Аналитика временных рядов" (предварительная версия). Чтобы убедиться в том, что у вас есть доступ:

   1. Найдите группу ресурсов и в ней выберите среду службы "Аналитика временных рядов Azure" (предварительная версия).

      [![Выбранная среда](media/v2-update-provision/payg-eight-environment.png)](media/v2-update-provision/payg-eight-environment.png#lightbox)

   1. На странице службы "Аналитика временных рядов Azure" (предварительная версия) выберите **Политики доступа к данным**.

      [![Политики доступа к данным](media/v2-update-provision/payg-nine-data-access.png)](media/v2-update-provision/payg-nine-data-access.png#lightbox)

   1. Убедитесь, что ваши учетные данные указаны.

      [![Учетные данные в списке](media/v2-update-provision/payg-ten-verify.png)](media/v2-update-provision/payg-ten-verify.png#lightbox)

   Если учетные данные не указаны, необходимо предоставить себе разрешение на доступ к среде. См. дополнительные сведения о [предоставлении доступа к данным](./time-series-insights-data-access.md).

## <a name="stream-data-into-your-environment"></a>Передача данных в среду

1. Вернитесь на [страницу акселераторов решений для Интернета вещей Azure](https://www.azureiotsolutions.com/Accelerators). На панели мониторинга акселератора решений найдите свое решение. Затем выберите **Запустить**.

    [![Запуск решения имитации устройства](media/v2-update-provision/device-three-launch.png)](media/v2-update-provision/device-three-launch.png#lightbox)

1. Вы попадете на страницу **имитации устройства Интернета вещей Microsoft Azure**. В правом верхнем углу этой страницы щелкните **New simulation** (Создать имитацию).

    [![Страница имитации Интернета вещей Azure](media/v2-update-provision/device-four-iot-sim-page.png)](media/v2-update-provision/device-four-iot-sim-page.png#lightbox)

1. В области **Simulation setup** (Настройка имитации) задайте следующие параметры.

    | Параметр | Действие |
    | --- | --- |
    | **Имя** | Введите уникальное имя имитатора. |
    | **Описание** | Введите определение. |
    | **Длительность имитации** | Выберите **Бессрочный запуск**. |
    | **Модель устройства** | **Имя.** Введите значение **Chiller**. <br />**Количество**. Введите значение **3**. |
    | **Целевой Центр Интернета вещей** | Выберите **Использовать предварительно подготовленный Центр Интернета вещей**. |

    [![Указываемые параметры](media/v2-update-provision/device-five-params.png)](media/v2-update-provision/device-five-params.png#lightbox)

    Щелкните **Start simulation** (Запустить имитацию).

    На панели мониторинга устройства запишите данные параметров **Active devices** (Активные устройства) и **Messages per second** (Сообщений в секунду).

    [![Панель мониторинга имитации Интернета вещей Azure](media/v2-update-provision/device-seven-dashboard.png)](media/v2-update-provision/device-seven-dashboard.png#lightbox)

## <a name="analyze-data-in-your-environment"></a>Анализ данных в вашей среде

В этом разделе будет выполнена базовая аналитика ваших данных временных рядов с использованием [обозревателя службы "Аналитика временных рядов Azure" (предварительная версия)](./time-series-insights-update-explorer.md).

1. Перейдите в обозреватель службы "Аналитика временных рядов Azure" (предварительная версия), щелкнув URL-адрес на странице ресурса на [портале Azure](https://portal.azure.com/).

    [![URL-адрес обозревателя службы "Аналитика временных рядов" (предварительная версия)](media/v2-update-provision/analyze-one-portal.png)](media/v2-update-provision/analyze-one-portal.png#lightbox)

1. В обозревателе выберите узел **экземпляров временных рядов**, чтобы просмотреть все существующие в среде экземпляры службы "Аналитика временных рядов Azure" (предварительная версия).

    [![Список экземпляров без родительского элемента](media/v2-update-provision/analyze-two-unparented.png)](media/v2-update-provision/analyze-two-unparented.png#lightbox)

1. Выберите первый экземпляр временного ряда. Затем щелкните **Show pressure** (Показать давление).

    [![Выбранный экземпляр временного ряда с командой меню для отображения среднего давления](media/v2-update-provision/analyze-three-show-pressure.png)](media/v2-update-provision/analyze-three-show-pressure.png#lightbox)

    Отобразится диаграмма временного ряда. Измените значение параметра **Интервал** на **15s** (15 с).

    [![Диаграмма временных рядов](media/v2-update-provision/analyze-four-chart.png)](media/v2-update-provision/analyze-four-chart.png#lightbox)

1. Повторите шаг 3 в двух других экземплярах временных рядов. Вы можете просмотреть все экземпляры временных рядов, как показано на этой диаграмме.

    [![Отображение всех временных рядов](media/v2-update-provision/analyze-five-chart.png)](media/v2-update-provision/analyze-five-chart.png#lightbox)

1. В поле **Временной интервал**  измените диапазон времени, чтобы увидеть тенденции временных рядов за последний час.

    [![Установка для временного диапазона значения в один час](media/v2-update-provision/analyze-six-time.png)](media/v2-update-provision/analyze-six-time.png#lightbox)

## <a name="define-and-apply-a-model"></a>Определение и применение модели

В этом разделе вы примените модель для структурирования данных. Чтобы завершить создание модели, вы определите типы, иерархии и экземпляры. Дополнительные сведения о моделировании данных см. в статье [Модель временных рядов](./time-series-insights-update-tsm.md).

1. В обозревателе выберите вкладку **Модель**:

   [![Вкладка "Модель" в обозревателе](media/v2-update-provision/define-one-model.png)](media/v2-update-provision/define-one-model.png#lightbox)

1. Щелкните **Добавить**, чтобы добавить тип.

   [![Кнопка добавления типа](media/v2-update-provision/define-two-add.png)](media/v2-update-provision/define-two-add.png#lightbox)

1. Определите три переменные типа: *pressure*, *temperature* и *humidity*. В области **Добавить тип** задайте следующие параметры.

    | Параметр | Действие |
    | --- | ---|
    | **Имя** | Введите значение **Chiller**. |
    | **Описание** | Введите текст **Это описание типа Chiller**. |

   * Чтобы определить переменную *pressure*, в разделе **Переменные** задайте следующие параметры.

     | Параметр | Действие |
     | --- | ---|
     | **Имя** | Введите **Среднее давление**. |
     | **Значение** | Выберите **pressure (Double)** (давление (двойное)). Автоматическое заполнение поля **Значение** может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
     | **Операция агрегирования** | Выберите **AVG**. |

      [![Выбранные значения для определения давления](media/v2-update-provision/define-three-variable.png)](media/v2-update-provision/define-three-variable.png#lightbox)

      Щелкните **Добавить переменную**, чтобы добавить следующую переменную.

   * Определите переменную *temperature*.

     | Параметр | Действие |
     | --- | ---|
     | **Имя** | Введите **Средняя температура**. |
     | **Значение** | Выберите **temperature (Double)** (температура (двойная)). Автоматическое заполнение поля **Значение** может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
     | **Операция агрегирования** | Выберите **AVG**.|

      [![Выбранные значения для определения температуры](media/v2-update-provision/define-four-avg.png)](media/v2-update-provision/define-four-avg.png#lightbox)

      Щелкните **Добавить переменную**, чтобы добавить следующую переменную.

   * Определите переменную *humidity*.

      | | |
      | --- | ---|
      | **Имя** | Введите **Максимальная влажность**. |
      | **Значение** | Выберите **humidity (Double)** (влажность (двойная)). Автоматическое заполнение поля **Значение** может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
      | **Операция агрегирования** | Выберите **MAX**.|

      [![Выбранные значения для определения температуры](media/v2-update-provision/define-five-humidity.png)](media/v2-update-provision/define-five-humidity.png#lightbox)

    Нажмите кнопку **Создать**.

    Вы увидите добавленный тип.

    [![Сведения о добавленном типе](media/v2-update-provision/define-six-type.png)](media/v2-update-provision/define-six-type.png#lightbox)

1. Следующим шагом является добавление иерархии. В разделе **Иерархии** выберите **Добавить**.

    [![Вкладка иерархий с кнопкой "Добавить"](media/v2-update-provision/define-seven-hierarchy.png)](media/v2-update-provision/define-seven-hierarchy.png#lightbox)

1. В области **Изменить иерархию** задайте следующие параметры.

   | Параметр | Действие |
   | --- | ---|
   | **Имя** | Введите **Иерархия расположений**. |
   | **Уровень 1** | Введите **Страна**. |
   | **Уровень 2** | Введите **Город**. |
   | **Уровень 3** | Введите **Здание**. |

   Щелкните **Сохранить**.

    [![Поля иерархии с кнопкой "Создать"](media/v2-update-provision/define-eight-add-hierarchy.png)](media/v2-update-provision/define-eight-add-hierarchy.png#lightbox)

   Вы увидите созданную иерархию:

    [![Информация об иерархии](media/v2-update-provision/define-nine-created.png)](media/v2-update-provision/define-nine-created.png#lightbox)

1. Выберите **Экземпляры**. Выберите первый экземпляр и выберите **Изменить**.

    [![Выбор кнопки "Изменить" для экземпляра](media/v2-update-provision/define-ten-edit.png)](media/v2-update-provision/define-ten-edit.png#lightbox)

1. В области **Edit instances** (Изменение экземпляров) задайте следующие параметры.

    | Параметр | Действие |
    | --- | --- |
    | **Тип** | Выберите **Chiller**. |
    | **Описание** | Введите **Экземпляр Chiller-01.1**. |
    | **Иерархии** | Выберите **Иерархия расположений**. |
    | **Страна** | Введите **США**. |
    | **Город** | Введите **Сиэтл**. |
    | **Дом** | Введите **Спейс-Нидл**. |

    [![Поля экземпляра с кнопкой "Сохранить"](media/v2-update-provision/define-eleven-chiller.png)](media/v2-update-provision/define-eleven-chiller.png#lightbox)

   Щелкните **Сохранить**.

1. Повторите предыдущий шаг для других датчиков. Обновите следующие значения:

   * Для Chiller 01.2:

     | Параметр | Действие |
     | --- | --- |
     | **Тип** | Выберите **Chiller**. |
     | **Описание** | Введите **Экземпляр Chiller-01.2**. |
     | **Иерархии** | Выберите **Иерархия расположений**. |
     | **Страна** | Введите **США**. |
     | **Город** | Введите **Сиэтл**. |
     | **Дом** | Введите **Тихоокеанский научный центр**. |

   * Для Chiller 01.3:

     | Параметр | Действие |
     | --- | --- |
     | **Тип** | Выберите **Chiller**. |
     | **Описание** | Введите **Экземпляр Chiller-01.3**. |
     | **Иерархии** | Выберите **Иерархия расположений**. |
     | **Страна** | Введите **США**. |
     | **Город** | Введите **Нью-Йорк**. |
     | **Дом** | Введите **Эмпайр-стейт-билдинг**. |

1. Выберите вкладку **Анализ** и обновите страницу. В разделе **Location Hierarchy** (Иерархия расположений) разверните все уровни иерархии, чтобы отобразить экземпляры временных рядов.

   [![Вкладка "Анализ"](media/v2-update-provision/define-twelve.png)](media/v2-update-provision/define-twelve.png#lightbox)

1. Чтобы изучить экземпляры временных рядов за последний час, в поле **Краткое время** выберите значение **Последний час**.

    [![Поле "Краткое время" с выбранным значением "Последний час"](media/v2-update-provision/define-thirteen-explore.png)](media/v2-update-provision/define-thirteen-explore.png#lightbox)

1. Выберите экземпляр временного ряда в разделе **Pacific Science Center** (Тихоокеанский научный центр) и щелкните **Show Max Humidity** (Показать максимальную влажность).

    [![Выбранный экземпляр временного ряда с меню, которое содержит пункт "Show Max Humidity" (Показать максимальную влажность)](media/v2-update-provision/define-fourteen-show-max.png)](media/v2-update-provision/define-fourteen-show-max.png#lightbox)

1. Откроется временной ряд **Максимальная влажность** с интервалом в **1 минуту**. Выберите регион, чтобы настроить фильтр по диапазону. Щелкните диаграмму правой кнопкой мыши и выберите **Масштаб**, чтобы перейти к анализу событий на этом интервале времени.

   [![Выбранный диапазон с командой масштабирования в контекстном меню](media/v2-update-provision/define-fifteen-filter.png)](media/v2-update-provision/define-fifteen-filter.png#lightbox)

1. Выберите регион и щелкните диаграмму правой кнопкой мыши, чтобы просмотреть сведения о событиях.

   [![Подробный список событий](media/v2-update-provision/define-eighteen.png)](media/v2-update-provision/define-eighteen.png#lightbox)

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:  

> [!div class="checklist"]
> * Создание и использование акселератора имитации устройства.
> * Создание среды "Аналитика временных рядов Azure" с оплатой по мере использования (предварительная версия).
> * Подключение среды "Аналитика временных рядов Azure" (предварительная версия) к концентратору событий в Центрах событий Azure.
> * Запуск примера акселератора решений для потоковой передачи данных в среду службы "Аналитика временных рядов Azure" (предварительная версия).
> * Выполнение базового анализа данных.
> * Определение типа модели временных рядов и иерархии, связывание их с экземплярами.

Теперь, когда вы знаете, как создать собственную среду "Аналитика временных рядов Azure" (предварительная версия), узнайте больше об основных понятиях в службе "Аналитика временных рядов Azure".

Прочтите статью о конфигурации хранилища службы "Аналитика временных рядов Azure":

> [!div class="nextstepaction"]
> [Data storage and ingress in Azure Time Series Insights Preview](./time-series-insights-update-storage-ingress.md) (Хранилище данных и входящий трафик в службе "Аналитика временных рядов Azure (предварительная версия)")

Дополнительные сведения о моделях временных рядов:

> [!div class="nextstepaction"]
> [Time Series Model](./time-series-insights-update-tsm.md) (Моделирование временных рядов)
