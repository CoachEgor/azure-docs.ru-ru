---
title: Руководство по Настройка среды службы "Аналитика временных рядов Azure" (предварительная версия) | Документация Майкрософт
description: Узнайте, как настроить среду "Аналитика временных рядов Azure" (предварительная версия).
author: ashannon7
ms.author: anshan
ms.workload: big-data
manager: cshankar
ms.service: time-series-insights
services: time-series-insights
ms.topic: tutorial
ms.date: 04/25/2019
ms.custom: seodec18
ms.openlocfilehash: f83063a88207f51f9d481447923fd8a8498692a2
ms.sourcegitcommit: 44a85a2ed288f484cc3cdf71d9b51bc0be64cc33
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64713909"
---
# <a name="tutorial-set-up-an-azure-time-series-insights-preview-environment"></a>Руководство. Настройка среды "Аналитика временных рядов Azure" (предварительная версия)

Это руководство поможет вам создать среду службы "Аналитика временных рядов Azure" (предварительная версия) с оплатой по мере использования. Из этого руководства вы узнаете, как выполнять следующие задачи:

* Создать среду "Аналитика временных рядов Azure" (предварительная версия).
* Подключить среду "Аналитика временных рядов Azure" (предварительная версия) к концентратору событий в Центрах событий Azure.
* Запускать пример акселератора решений для потоковой передачи данных в среду "Аналитика временных рядов Azure" (предварительная версия).
* Выполнять базовый анализ данных.
* Определять тип и иерархию модели временных рядов и связывать ее с экземплярами.

# <a name="create-a-device-simulation"></a>Создание имитации устройств

В этом разделе создаются три виртуальных устройства, которые будут отправлять данные в центр Интернета вещей.

1. Перейдите на [страницу акселераторов решений для Интернета вещей Azure](https://www.azureiotsolutions.com/Accelerators). На ней представлены несколько готовых примеров. Выполните вход с учетной записью Azure. Затем выберите **Имитация устройства**.

   [![Страница акселераторов решений для Интернета вещей Azure](media/v2-update-provision/device-one-accelerator.png)](media/v2-update-provision/device-one-accelerator.png#lightbox)

   Щелкните **Попробовать сейчас**.

1. Введите необходимые параметры на странице **Создание решения для имитации устройств**.

   | Параметр | ОПИСАНИЕ |
   | --- | --- |
   | **Имя решения** |    Введите уникальное значение для создания новой группы ресурсов. В эту группу помещаются все выбранные ресурсы Azure после их создания. |
   | **Подписка** | Укажите ту же подписку, которую вы использовали для создания среды "Аналитика временных рядов". |
   | **Регион** |   Укажите тот же регион, который вы использовали для создания среды службы "Аналитика временных рядов". |
   | **Развертывание дополнительных ресурсов Azure**    | Оставьте выбранным центр Интернета вещей, чтобы имитированное устройство могло подключаться к нему и передавать данные. |

   Теперь щелкните **Создать решение**. Подождите 10–15 минут, пока решение развертывается.

   [![Создание страницы решения имитации устройства](media/v2-update-provision/device-two-create.png)](media/v2-update-provision/device-two-create.png#lightbox)

1. На панели мониторинга акселератора решений нажмите кнопку **Запуск**:

   [![Запуск решения имитации устройства](media/v2-update-provision/device-three-launch.png)](media/v2-update-provision/device-three-launch.png#lightbox)

1. Вы попадете на страницу **имитации устройства Интернета вещей Microsoft Azure**. Щелкните **+Новая имитация** в правом верхнем углу этой страницы.

   [![Страница имитации Интернета вещей Azure](media/v2-update-provision/device-four-iot-sim-page.png)](media/v2-update-provision/device-four-iot-sim-page.png#lightbox)

1. Заполните обязательные параметры, как показано ниже:

    [![Параметры для заполнения](media/v2-update-provision/device-five-params.png)](media/v2-update-provision/device-five-params.png#lightbox)

    |||
    | --- | --- |
    | **Имя** | Введите уникальное имя имитатора. |
    | **Описание** | Введите определение. |
    | **Длительность имитации** | Выберите **Бессрочный запуск**. |
    | **Модель устройства** | **Имя.** Укажите `Chiller`. </br>**Количество**. Укажите `3`. |
    | **Целевой Центр Интернета вещей** | Выберите **Использовать предварительно подготовленный Центр Интернета вещей**. |

    Затем щелкните **Запустить имитацию**.

1. На панели мониторинга устройства найдите значения **Активные устройства** и **Сообщений в секунду**.

    [![Панель мониторинга имитации Интернета вещей Azure](media/v2-update-provision/device-seven-dashboard.png)](media/v2-update-provision/device-seven-dashboard.png#lightbox)

## <a name="list-device-simulation-properties"></a>Свойства списка имитации устройства

Чтобы начать создание среды службы "Аналитика временных рядов Azure", вам понадобятся имена центра Интернета вещей, подписки и группы ресурсов.

1. Перейдите на панель мониторинга акселератора решений и выполните вход с той же учетной записью Azure. Найдите имитацию устройства, созданную на предыдущих шагах.

1. Выберите имитатор устройства и щелкните **Запуск**. Выберите ссылку **Портал управления Azure** справа.

    [![Список имитаций](media/v2-update-provision/device-six-listings.png)](media/v2-update-provision/device-six-listings.png#lightbox)

1. Запишите имена центра Интернета вещей, подписки и группы ресурсов.

    [![Портал Azure](media/v2-update-provision/device-eight-portal.png)](media/v2-update-provision/device-eight-portal.png#lightbox)

## <a name="create-a-time-series-insights-preview-payg-environment"></a>Создание среды "Аналитика временных рядов" с оплатой по мере использования (предварительная версия)

В этом разделе описывается создание среды "Аналитика временных рядов Azure" (предварительная версия) с помощью [портала Azure](https://portal.azure.com/).

1. Войдите на портал Azure, используя учетную запись подписки.

1. Выберите **Создать ресурс**.

1. Выберите категорию **Интернет вещей**, а затем щелкните **Аналитика временных рядов**.

   [![Выбор категории "Интернет вещей" и пункта "Аналитика временных рядов"](media/v2-update-provision/payg-one-azure.png)](media/v2-update-provision/payg-one-azure.png#lightbox)

1. Заполните поля на этой странице, как указано далее.

   | | |
   | --- | ---|
   | **Имя среды** | Выберите уникальное имя для среды службы "Аналитика временных рядов Azure" (предварительная версия). |
   | **Подписка** | Введите подписку, в которой вы хотите создать среду "Аналитика временных рядов Azure" (предварительная версия). Мы рекомендуем использовать ту же подписку, что и для остальных ресурсов Интернета вещей, созданных имитатором устройств. |
   | **Группа ресурсов** | Группа ресурсов Azure служит контейнером для ресурсов Azure. Выберите имеющуюся группу ресурсов для ресурсов среды "Аналитика временных рядов Azure" (предварительная версия) или создайте новую. Мы рекомендуем использовать ту же группу ресурсов, что и для остальных ресурсов Интернета вещей, созданных имитатором устройств. |
   | **Местоположение.** | Выберите регион центра обработки данных для среды службы "Аналитика временных рядов Azure" (предварительная версия). Чтобы избежать лишних затрат на передачу данных и ненужных сетевых задержек, лучше всего хранить среду "Аналитика временных рядов Azure" (предварительная версия) в одном регионе с остальными ресурсами Интернета вещей. |
   | **Уровень** |  Выберите значение **PAYG**, которое обозначает модель с оплатой по мере использования. Это номер SKU для продукта "Аналитика временных рядов Azure" (предварительная версия). |
   | **Идентификатор свойства** | Введите любое значение, которое однозначно идентифицирует ваши временные ряды. Обратите внимание, что это поле является неизменяемым — вы не сможете изменить это значение позже. В рамках этого руководства используйте `iothub-connection-device-id`. См. дополнительные сведения о [выборе идентификатора временных рядов](./time-series-insights-update-how-to-id.md). |
   | **Имя учетной записи хранения** | Введите глобально уникальное имя для создания новой учетной записи хранения. |

   Затем щелкните **Далее. Источник событий**.

   [![Страница создания среды службы "Аналитика временных рядов"](media/v2-update-provision/payg-two-create.png)](media/v2-update-provision/payg-two-create.png#lightbox)

1. На странице источника событий заполните поля, как описано далее.

   | | |
   | --- | --- |
   | **Создать источник событий?** | Укажите `Yes`.|
   | **Имя** | Введите уникальное значение, которое будет обозначать этот источник событий.|
   | **Тип источника** | Выберите **Центр Интернета вещей**. |
   | **Выбрать центр?** | Выберите **Выбрать существующий**. |
   | **Подписка** | Выберите подписку, которая использовалась для имитатора устройства. |
   | **Имя Центра Интернета вещей** | Выберите имя центра Интернета вещей, которое вы создали для имитатора устройства. |
   | **IoT Hub access policy** (Политика доступа Центра Интернета вещей) | Выберите **iothubowner**. |
   | **Группа потребителей Центра Интернета вещей** | Здесь следует указать уникальную группу потребителей для среды службы "Аналитика временных рядов Azure" (предварительная версия). Щелкните **Новая**, введите уникальное имя и выберите **Добавить**. |
   | **Свойство метки времени** | Это поле используется для идентификации свойства метки времени во входящих данных телеметрии. Не заполняйте это поле для примера из этого руководства. Наш имитатор использует метку времени, поступающую из Центра Интернета вещей. Это поведение по умолчанию для службы "Аналитика временных рядов".|

   Щелкните **Просмотр и создание**.

   [![Настройка источника событий](media/v2-update-provision/payg-five-event-source.png)](media/v2-update-provision/payg-five-event-source.png#lightbox)

1. Проверьте все поля на странице просмотра и щелкните **Создать**.

   [![Страница просмотра и создания с кнопкой "Создать"](media/v2-update-provision/payg-six-review.png)](media/v2-update-provision/payg-six-review.png#lightbox)

1. Вы можете увидеть состояние развертывания.

   [![Уведомление о завершении развертывания](media/v2-update-provision/payg-seven-deploy.png)](media/v2-update-provision/payg-seven-deploy.png#lightbox)

1. Если вы являетесь владельцем клиента, вы получите доступ к среде службы "Аналитика временных рядов" (предварительная версия). Чтобы убедиться в том, что у вас есть доступ:

   a. Выберите группу ресурсов и в ней выберите среду службы "Аналитика временных рядов Azure" (предварительная версия).

      [![Выбранная среда](media/v2-update-provision/payg-eight-environment.png)](media/v2-update-provision/payg-eight-environment.png#lightbox)

   b. На странице службы "Аналитика временных рядов Azure" (предварительная версия) перейдите к **политикам доступа к данным**.

     [![Политики доступа к данным](media/v2-update-provision/payg-nine-data-access.png)](media/v2-update-provision/payg-nine-data-access.png#lightbox)

   c. Убедитесь, что ваши учетные данные перечислены.

     [![Учетные данные в списке](media/v2-update-provision/payg-ten-verify.png)](media/v2-update-provision/payg-ten-verify.png#lightbox)

   Если учетные данные не указаны, следует предоставить себе разрешение на доступ к среде. См. дополнительные сведения о [предоставлении доступа к данным](./time-series-insights-data-access.md).

## <a name="analyze-data-in-your-environment"></a>Анализ данных в вашей среде

В этом разделе будет выполнена базовая аналитика ваших данных временных рядов с использованием [обозревателя службы "Аналитика временных рядов Azure" (предварительная версия)](./time-series-insights-update-explorer.md).

1. Перейдите в обозреватель службы "Аналитика временных рядов Azure" (предварительная версия), щелкнув URL-адрес на странице ресурса на [портале Azure](https://portal.azure.com/).

   [![URL-адрес обозревателя службы "Аналитика временных рядов" (предварительная версия)](media/v2-update-provision/analyze-one-portal.png)](media/v2-update-provision/analyze-one-portal.png#lightbox)

1. В обозревателе выберите узел **экземпляров временных рядов**, чтобы просмотреть все существующие в среде экземпляры службы "Аналитика временных рядов Azure" (предварительная версия).

   [![Список экземпляров без родительского элемента](media/v2-update-provision/analyze-two-unparented.png)](media/v2-update-provision/analyze-two-unparented.png#lightbox)

1. В отобразившихся временных рядах щелкните первый экземпляр. Затем щелкните **Показать среднее давление**.

   [![Выбранный экземпляр с командой меню для отображения среднего давления](media/v2-update-provision/analyze-three-show-pressure.png)](media/v2-update-provision/analyze-three-show-pressure.png#lightbox)

   Справа откроется диаграмма временных рядов. Установите для параметра **Интервал** значение `15s`.

   [![Диаграмма временных рядов](media/v2-update-provision/analyze-four-chart.png)](media/v2-update-provision/analyze-four-chart.png#lightbox)

1. Повторите **Шаг 3** в двух других временных рядах. Вы можете просмотреть все временные ряды, как показано на этой схеме:

   [![Отображение всех временных рядов](media/v2-update-provision/analyze-five-chart.png)](media/v2-update-provision/analyze-five-chart.png#lightbox)

1. Измените диапазон времени, чтобы увидеть тенденции временных рядов за последний час.

   a. Выберите поле параметра **Временной интервал**:

      [![Установка для временного диапазона значения в один час](media/v2-update-provision/analyze-six-time.png)](media/v2-update-provision/analyze-six-time.png#lightbox)

## <a name="define-and-apply-a-model"></a>Определение и применение модели

В этом разделе вы примените модель для структурирования данных. Чтобы завершить создание модели, вы определите типы, иерархии и экземпляры. Дополнительные сведения о моделировании данных см. в статье о [моделях временных рядов](./time-series-insights-update-tsm.md).

1. В обозревателе выберите вкладку **Модель**:

   [![Вкладка "Модель" в обозревателе](media/v2-update-provision/define-one-model.png)](media/v2-update-provision/define-one-model.png#lightbox)

1. Щелкните **+Добавить**, чтобы добавить тип. Справа откроется редактор типа.

   [![Кнопка добавления типа](media/v2-update-provision/define-two-add.png)](media/v2-update-provision/define-two-add.png#lightbox)

1. Определите три переменные типа: давление, температура и влажность. Введите следующие сведения:

   | | |
   | --- | ---|
   | **Имя** | Укажите `Chiller`. |
   | **Описание** | Укажите `This is a type definition of Chiller`. |

   * Определите давление с помощью трех переменных:

      | | |
      | --- | ---|
      | **Имя** | Укажите `Avg Pressure`. |
      | **Значение** | Выберите **pressure (Double)** (давление (двойное)). Обратите внимание, что заполнение этого поля может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
      | **Операция агрегирования** | Выберите **AVG**. |

      [![Выбранные значения для определения давления](media/v2-update-provision/define-three-variable.png)](media/v2-update-provision/define-three-variable.png#lightbox)

      Щелкните **+Добавить переменную**, чтобы добавить следующую переменную.

   * Определите температуру.

      | | |
      | --- | ---|
      | **Имя** | Укажите `Avg Temperature`. |
      | **Значение** | Выберите **temperature (Double)** (температура (двойная)). Обратите внимание, что заполнение этого поля может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
      | **Операция агрегирования** | Выберите **AVG**.|

      [![Выбранные значения для определения температуры](media/v2-update-provision/define-four-avg.png)](media/v2-update-provision/define-four-avg.png#lightbox)

   * Определите влажность.

      | | |
      | --- | ---|
      | **Имя** | Введите `Max Humidity` |
      | **Значение** | Выберите **humidity (Double)** (влажность (двойная)). Обратите внимание, что заполнение этого поля может начаться через несколько минут после того, как служба "Аналитика временных рядов Azure" (предварительная версия) начнет получать события. |
      | **Операция агрегирования** | Выберите **MAX**.|

      [![Выбранные значения для определения температуры](media/v2-update-provision/define-five-humidity.png)](media/v2-update-provision/define-five-humidity.png#lightbox)

   Затем выберите **Создать**.

1. Вы увидите здесь добавленный тип:

   [![Сведения о добавленном типе](media/v2-update-provision/define-six-type.png)](media/v2-update-provision/define-six-type.png#lightbox)

1. Следующим шагом является добавление иерархии. В разделе **Иерархии** щелкните **+Добавить**.

   [![Вкладка иерархий с кнопкой "Добавить"](media/v2-update-provision/define-seven-hierarchy.png)](media/v2-update-provision/define-seven-hierarchy.png#lightbox)

1. Определите иерархию. Заполните поля, как описано далее.

   | | |
   | --- | ---|
   | **Имя** | Укажите `Location Hierarchy`. |
   | **Уровень 1** | Укажите `Country`. |
   | **Уровень 2** | Укажите `City`. |
   | **Уровень 3** | Укажите `Building`. |

   Затем выберите **Создать**.

   [![Поля иерархии с кнопкой "Создать"](media/v2-update-provision/define-eight-add-hierarchy.png)](media/v2-update-provision/define-eight-add-hierarchy.png#lightbox)

1. Вы увидите созданную иерархию:

   [![Информация об иерархии](media/v2-update-provision/define-nine-created.png)](media/v2-update-provision/define-nine-created.png#lightbox)

1. Выберите слева элемент **Экземпляры**. Когда отобразятся экземпляры, щелкните первый из них и выберите действие **Изменить**:

   [![Выбор кнопки "Изменить" для экземпляра](media/v2-update-provision/define-ten-edit.png)](media/v2-update-provision/define-ten-edit.png#lightbox)

1. Справа отобразится текстовый редактор. Добавьте следующие данные:

   | | |
   | --- | --- |
   | **Тип** | Выберите **Chiller**. |
   | **Описание** | Укажите `Instance for Chiller-01.1`. |
   | **Иерархии** | Выберите **Иерархия расположений**. |
   | **Страна** | Укажите `USA`. |
   | **Город** | Укажите `Seattle`. |
   | **Дом** | Укажите `Space Needle`. |

    Затем нажмите кнопку **Сохранить**.

   [![Поля экземпляра с кнопкой "Сохранить"](media/v2-update-provision/define-eleven-chiller.png)](media/v2-update-provision/define-eleven-chiller.png#lightbox)

1. Повторите предыдущий шаг для других датчиков. Используйте следующие поля:

   * Для Chiller 01.2:

     | | |
     | --- | --- |
     | **Тип** | Выберите **Chiller**. |
     | **Описание** | Укажите `Instance for Chiller-01.2`. |
     | **Иерархии** | Выберите **Иерархия расположений**. |
     | **Страна** | Укажите `USA`. |
     | **Город** | Укажите `Seattle`. |
     | **Дом** | Укажите `Pacific Science Center`. |

   * Для Chiller 01.3:

     | | |
     | --- | --- |
     | **Тип** | Выберите **Chiller**. |
     | **Описание** | Укажите `Instance for Chiller-01.3`. |
     | **Иерархии** | Выберите **Иерархия расположений**. |
     | **Страна** | Укажите `USA`. |
     | **Город** | Укажите `New York`. |
     | **Дом** | Укажите `Empire State Building`. |

1. Перейдите на вкладку **Анализ** и обновите страницу. Разверните все уровни иерархии и найдите временные ряды.

   [![Вкладка "Анализ"](media/v2-update-provision/define-twelve.png)](media/v2-update-provision/define-twelve.png#lightbox)

1. Чтобы изучить временные ряды за последний час, в поле **Краткое время** выберите значение **Последний час**:

    [![Поле "Краткое время" с выбранным значением "Последний час"](media/v2-update-provision/define-thirteen-explore.png)](media/v2-update-provision/define-thirteen-explore.png#lightbox)

1. Выберите временные ряды в разделе **Тихоокеанский научный центр** и щелкните действие **Показать максимальную влажность**.

    [![Выбранные временные ряды с меню, которое содержит пункт "Показать максимальную влажность"](media/v2-update-provision/define-fourteen-show-max.png)](media/v2-update-provision/define-fourteen-show-max.png#lightbox)

1. Откроется временной ряд **Максимальная влажность** с интервалом в **1 минуту**. Щелкните левой кнопкой мыши нужную область, чтобы настроить фильтр по диапазону. Затем щелкните ее правой кнопкой мыши и выберите **Масштаб**, чтобы перейти к анализу событий в этом промежутке времени:

   [![Выбранный диапазон с командой масштабирования в контекстном меню](media/v2-update-provision/define-fifteen-filter.png)](media/v2-update-provision/define-fifteen-filter.png#lightbox)

1. Вы также можете выбрать регион и щелкнуть его правой кнопкой мыши, чтобы просмотреть сведения о событиях:

   [![Подробный список событий](media/v2-update-provision/define-eighteen.png)](media/v2-update-provision/define-eighteen.png#lightbox)

## <a name="next-steps"></a>Дополнительная информация

Из этого руководства вы узнали, как выполнить следующие задачи:  

> [!div class="checklist"]
> * Создание и использование акселератора имитации устройства.
> * Создание среды "Аналитика временных рядов Azure" с оплатой по мере использования (предварительная версия).
> * Подключение среды "Аналитика временных рядов Azure" (предварительная версия) к концентратору событий в Центрах событий Azure.
> * Запуск примера акселератора решений для потоковой передачи данных в среду службы "Аналитика временных рядов Azure" (предварительная версия).
> * Выполнение базового анализа данных.
> * Определение типа модели временных рядов и иерархии, связывание их с экземплярами.

Теперь, когда вы знаете, как создать собственную среду "Аналитика временных рядов Azure" (предварительная версия), узнайте больше об основных понятиях в службе "Аналитика временных рядов Azure".

Прочтите статью о конфигурации хранилища службы "Аналитика временных рядов Azure":

> [!div class="nextstepaction"]
> [Data storage and ingress in Azure Time Series Insights Preview](./time-series-insights-update-storage-ingress.md) (Хранилище данных и входящий трафик в службе "Аналитика временных рядов Azure (предварительная версия)")

Дополнительные сведения о моделях временных рядов:

> [!div class="nextstepaction"]
> [Time Series Model](./time-series-insights-update-tsm.md) (Моделирование временных рядов)