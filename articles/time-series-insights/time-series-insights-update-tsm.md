---
title: Модель временных рядов - Исследования серии времени Azure (ru) Документы Майкрософт
description: Узнайте о модели временных рядов в обзоре Azure Time Series Insights.
author: deepakpalled
ms.author: dpalled
manager: cshankar
ms.workload: big-data
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 03/16/2020
ms.custom: seodec18
ms.openlocfilehash: 648578563a0e53d3ed5bda6ab47f85c3c6a2a24e
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79476660"
---
# <a name="time-series-model-in-azure-time-series-insights-preview"></a>Модель временных рядов в Azure Time Series Обзор

В этой статье описаны модели временных рядов, возможности и способы начала создания и обновления собственных моделей в среде Azure Time Series Insights Previews.

> [!TIP]
>  * Перейти к [Contoso Ветропарк демо-среды](https://insights.timeseries.azure.com/preview/samples) для живой пример серии времени модели.
> * Прочитайте об [исследователе Azure Time Series Insights Preview,](time-series-insights-update-explorer.md) чтобы узнать, как ориентироваться в моделях тайм-ряда.
> * [Узнайте, как работать с моделью временных рядов,](time-series-insights-update-how-to-tsm.md) используя веб-исследователь Time Series Insights.

## <a name="summary"></a>Сводка

В большинстве случаев данные, собираемые с устройств Интернета вещей, не содержат контекстных сведений, что усложняет поиск и не позволяет быстро анализировать датчики. Основной мотивацией модели Time Series является упрощение поиска и анализа данных IoT или Time Series. Она достигает этой цели, позволяя курировать, обслуживание и обогащение данных временных рядов, чтобы помочь подготовить наборы данных, готовых к потребителю, для аналитики.

## <a name="scenario-contosos-new-smart-oven"></a>Сценарий: Новая умная печь Contoso

**Рассмотрим фиктивный сценарий смарт-печи Contoso.** В этом сценарии предположим, что каждая умная печь Contoso имеет пять датчиков температуры, по одному для каждой из четырех верхних горелок и один для самой печи. До недавнего времени каждый датчик температуры Contoso отправлял, хранил и визуализировал свои данные по отдельности. Для мониторинга кухонных приборов Contoso полагался на базовые диаграммы, по одному для каждого отдельного датчика.

В то время как Contoso была удовлетворена своим первоначальным решением для визуализации данных и визуализации, стало очевидным несколько ограничений:

* Клиенты хотели бы знать, как горячая общая печь будет получать, когда большинство из лучших горелки были на. Контосо было труднее анализировать и представлять единый ответ о состоянии общей печи.
* Инженеры Contoso хотели убедиться, что верхние горелки, запускаемые одновременно, не приведут к неэффективному найму питания. Существовали трудности перекрестных ссылок, какие датчики температуры и напряжения были связаны друг с другом и как найти их в магазине.
* Команда contoso по обеспечению качества хотела провести аудит и сравнить историю между двумя версиями датчиков. Было трудно определить, какие данные принадлежали к какой версии датчика.

Без возможности структурировать, организовывать и определять всеобъемлющую модель интеллектуальных серий времени печи, каждый датчик температуры поддерживал вывих, изолированные и менее информативные точки данных. Превратить эти точки данных в практические сведения было сложнее, поскольку каждый набор данных жил независимо от других.

Эти ограничения показали важность интеллектуальных инструментов агрегации и визуализации данных для сопровождения новой печи Contoso:

* Визуализация данных оказывается полезной, когда вы в состоянии связать и объединить данные в удобное представление. Примером является отображение датчиков напряжения вместе с датчиками температуры.
* Управление многомерными данными для нескольких сущностей наряду с сравнением, масштабированием и функциональными возможностями диапазона времени может быть трудно выполнить.

**Модель временных рядов обеспечивает удобное решение** для многих сценариев, встречающихся в этом вымышленном примере:

[![Тайм-ряд Модель смарт-печь диаграммы пример](media/v2-update-tsm/time-series-model-smart-oven.png)](media/v2-update-tsm/time-series-model-smart-oven.png#lightbox)

* Модель серии времени играет жизненно важную роль в запросах и навигации, поскольку она контекстуализирует данные, позволяя проводить сравнения в диапазоне времени и между датчиками и видами устройств. (**A**) 
* Данные дополнительно контекстуализированы, поскольку данные, сохраняющиеся в модели Time Series, сохраняют вычисления временных рядов в качестве переменных и повторно используют их во время запроса.
* Модель временных рядов организует и агрегирует данные для улучшения визуализации и возможностей управления. (**B**) 

### <a name="key-capabilities"></a>Ключевые возможности

Чтобы упростить и облегчить управление контекстуализацией временного ряда, модель временного ряда дает следующие возможности в среде "Аналитика временных рядов (предварительная версия)". Она поможет вам в следующих аспектах.

* Автор и управляйте вычислениями или формулами, используя функции scalar, агрегированные операции и так далее.
* Определите отношения между родителями и детьми для включения навигации, поиска и ссылки.
* Определите свойства, связанные с экземплярами, определяемые как *поля экземпляра,* и используйте их для создания иерархий.

### <a name="components"></a>Компоненты

Модель Time Series имеет три основных компонента:

* [Экземпляры модели временных рядов](#time-series-model-instances)
* [Иерархии моделей временных рядов](#time-series-model-hierarchies)
* [Типы моделей временных рядов](#time-series-model-types)

Эти компоненты объединяются для определения модели временных рядов и для организации данных Azure Time Series Insights.

[![Диаграмма обзора модели временных рядов](media/v2-update-tsm/time-series-model-overview.png)](media/v2-update-tsm/time-series-model-overview.png#lightbox)

Модель временных рядов может быть создана и управляется с помощью интерфейса [Time Series Insights Preview.](time-series-insights-update-how-to-tsm.md) Настройки модели таймсерий можно управлять с помощью [API настройки модели.](https://docs.microsoft.com/rest/api/time-series-insights/preview-model#model-settings-api)

## <a name="time-series-model-instances"></a>Экземпляры моделей временных рядов

Экземпляры Модели временных *рядов* представляют собой виртуальные представления самих временных рядов.

В большинстве случаев экземпляры однозначно идентифицируются **deviceId** или **assetId,** которые сохраняются в виде идентификаторов временных рядов.

Инстанции имеют описательную информацию, связанную с ними, называемую *свойствами экземпляров,* например идентификатор временных рядов, тип, имя, описание, иерархии и поля экземпляров. Свойства экземпляр содержат, как минимум, сведения об иерархии.

*Поля инстанций* представляют собой набор описательной информации, которая может включать значения для уровней иерархии, а также производителя, оператора и так далее.

После настройки источника событий для среды Time Series Insights экземпляры автоматически обнаруживаются и создаются в модели временных рядов. Экземпляры могут быть созданы или обновлены с помощью исследователя Time Series Insights с помощью запросов Time Series Model.

[Демо-версия Contoso Wind Farm](https://insights.timeseries.azure.com/preview/samples) содержит несколько примеров живых примеров.

[![Пример примера модели временных рядов](media/v2-update-tsm/time-series-model-instance.png)](media/v2-update-tsm/time-series-model-instance.png#lightbox)

### <a name="instance-properties"></a>Свойства инстанции

Случаи определяются **timeSeriesId,** **typeId,** **имя,** **описание,** **иерархия,** и **instanceFields**. Каждый экземпляр отображает только один *тип*и одну или несколько *иерархий.*

| Свойство | Описание |
| --- | ---|
| timeSeriesId | UUID серии времени экземпляр связан с. |
| typeId | UUID типмодели серии времени, с ним связан экземпляр. По умолчанию все обнаруженные новые экземпляры связаны с типом по умолчанию.
| name | Свойство **имени** является необязательным и чувствительным к делу. Если **имя** недоступно, оно по умолчанию по умолчанию подкладывается на **timeSeriesId.** Если имя предоставлено, **timeSeriesId** по-прежнему доступен в [колодце](time-series-insights-update-explorer.md#4-time-series-well). |
| description | Текстовое описание экземпляра. |
| иерархияИИ | Определяет, к какой иерархии принадлежит экземпляр. |
| экземплярФилды | Свойства экземпляра и любые статические данные, определяющие экземпляр. Они определяют значения свойств иерархии или неиерархические свойства и в то же время обеспечивают индексацию для выполнения операций поиска. |

> [!NOTE]
> Иерархии строятся с помощью полей экземпляров. Дополнительные **экземплярыПоля** могут быть добавлены для определения свойств в дальнейшем экземпляре.

Инстанции имеют следующее представление JSON:

```JSON
{
  "timeSeriesId": ["PU2"],
  "typeId": "545314a5-7166-4b90-abb9-fd93966fa39b",
  "hierarchyIds": ["95f0a8d1-a3ef-4549-b4b3-f138856b3a12"],
  "description": "Pump #2",
  "instanceFields": {
    "Location": "Redmond",
    "Fleet": "Fleet 5",
    "Unit": "Pump Unit 3",
    "Manufacturer": "Contoso",
    "ScalePres": "0.54",
    "scaleTemp": "0.54"
  }
}
```

> [!TIP]
> Для API Time Series Insights Instance и создавайте, читайте,, обновляйте и удаляйте (CRUD) поддержку, прочитайте статью [запроса данных](time-series-insights-update-tsq.md#time-series-model-query-tsm-q-apis) и [документацию Instance API REST.](https://docs.microsoft.com/rest/api/time-series-insights/preview-model#instances-api)

## <a name="time-series-model-hierarchies"></a>Иерархии моделей временных рядов

Иерархии типов временных *рядов* организуют экземпляры, указывая имена свойств и их отношения.

Можно настроить несколько иерархий в заданной среде Time Series Insights. Экземпляр модели серии времени может отображаться в одной иерархии или нескольких иерархиях (много-много отношений).

Интерфейс [демо-клиента Contoso Wind Farm](https://insights.timeseries.azure.com/preview/samples) отображает стандартную иерархию экземпляра и типов.

[![Пример иерархии типов временных рядов](media/v2-update-tsm/time-series-model-hierarchies.png)](media/v2-update-tsm/time-series-model-hierarchies.png#lightbox)

### <a name="hierarchy-definition"></a>Определение иерархии

Иерархии определяются иерархией **id,** **именем**и **источником.**

| Свойство | Описание |
| ---| ---|
| идентификатор | Уникальный идентификатор для иерархии, который используется, например, при определении экземпляра. |
| name | Строка, используемая для предоставления имени для иерархии. |
| source | Определяет организационную иерархию или путь, который представляет собой порядок иерархии «сверху вниз» между родителями и детьми, который пользователи хотят создать. Карта связей родителей и потомков определяет поле экземпляров. |

Иерархии представлены в JSON как:

```JSON
{
  "hierarchies": [
    {
      "id": "6e292e54-9a26-4be1-9034-607d71492707",
      "name": "Location",
      "source": {
        "instanceFieldNames": [
          "state",
          "city"
        ]
      }
    },
    {
      "id": "a28fd14c-6b98-4ab5-9301-3840f142d30e",
      "name": "ManufactureDate",
      "source": {
        "instanceFieldNames": [
          "year",
          "month"
        ]
      }
    }
  ]
}
```

В предыдущем примере JSON:

* `Location`определяет иерархию с `states` родителем `cities`и ребенком. Каждый `location` может `states`иметь несколько, `cities`которые, в свою очередь, может иметь несколько .
* `ManufactureDate`определяет иерархию с `year` родителем `month`и ребенком. Каждый `ManufactureDate` может `years`иметь несколько, `months`которые, в свою очередь, может иметь несколько .

> [!TIP]
> Для поддержки Time Series Insights Instance и cruD прочитайте статью [запроса данных](time-series-insights-update-tsq.md#time-series-model-query-tsm-q-apis) и [документацию Hierarchy API REST.](https://docs.microsoft.com/rest/api/time-series-insights/preview-model#hierarchies-api)

### <a name="hierarchy-example"></a>Пример иерархии

Рассмотрим пример, где иерархия `floor` **H1** имеет `building`, и `room` как часть его **instanceFieldNames** определение:

```JSON
{
  "id": "aaaaaa-bbbbb-ccccc-ddddd-111111",
  "name": "H1",
  "source": {
    "instanceFieldNames": [
      "building",
      "floor",
      "room"
    ]
  }
}
```

С учетом полей экземпляров, используемых в предыдущем определении и нескольких временных рядов, атрибуты и значения иерархии отображаются в следующей таблице:

| Идентификатор временного ряда | Поля экземпляров |
| --- | --- |
| ID1 | "Строительство" - "1000", "пол" - "10", "комната" - "55"  |
| ID2 | "Строительство" - "1000", "комната" - "55" |
| ID3 | "пол" и "10" |
| ID4 | "Строительство" - "1000", "пол" и "10"  |
| ID5 | Ни один из "строительство", "пол", или "комната" не устанавливается. |

Time Series **ID1** и **ID4** отображаются как часть иерархии **H1** в [Azure Time Series Insights Explorer,](time-series-insights-update-explorer.md) потому что они полностью определили и правильно заказали *строительные,* *половые*и *комнатные* параметры.

Остальные классифицируются в соответствии с *Unparented Instances,* поскольку они не соответствуют указанной иерархии данных.

## <a name="time-series-model-types"></a>Типы моделей временных рядов

*Типы* моделей временных рядов помогают определить переменные или формулы для выполнения вычислений. Типы связаны с определенным экземпляром Time Series Insights.

Один тип может содержать одну или несколько переменных. Например, экземпляр модели временной серии может быть типа *датчика температуры,* который состоит из переменных *температуры avg,* *мин температуры*и *максимальной температуры.*

[Демо-версия Contoso Wind Farm](https://insights.timeseries.azure.com/preview/samples) визуализирует несколько типов моделей временных рядов, связанных с их соответствующими экземплярами.

[![Пример типа модели временных рядов](media/v2-update-tsm/time-series-model-types.png)](media/v2-update-tsm/time-series-model-types.png#lightbox)

> [!TIP]
> Для поддержки Time Series Insights Instance и CRUD прочитайте статью [запроса данных](time-series-insights-update-tsq.md#time-series-model-query-tsm-q-apis) и [документацию Type API REST.](https://docs.microsoft.com/rest/api/time-series-insights/preview-model#types-api)

### <a name="type-properties"></a>Свойства типа

Типы моделей временных рядов определяются **id,** **name,** **description**и **переменными.**

| Свойство | Описание |
| ---| ---|
| идентификатор | UUID для типа. |
| name | Строка, используемая для предоставления имени для типа. |
| description | Описание строки для типа. |
| variables | Укажите переменные, связанные с типом. |

Типы соответствуют следующему примеру JSON:

```JSON
{
  "types": [
    {
      "id": "1be09af9-f089-4d6b-9f0b-48018b5f7393",
      "name": "DefaultType",
      "description": "Default type",
      "variables": {
        "EventCount": {
          "kind": "aggregate",
          "value": null,
          "filter": null,
          "aggregation": {
            "tsx": "count()"
          }
        },
        "Interpolated Speed": {
          "kind": "numeric",
          "value": {
              "tsx": "$event.[speed].Double"
          },
          "filter": null,
          "interpolation": {
              "kind": "step",
              "boundary": {
                  "span": "P1D"
              }
          },
          "aggregation": {
              "tsx": "left($value)"
          }
        }
      }
    }
  ]
}
```

### <a name="variables"></a>Переменные

Типы Time Series Insights могут иметь множество переменных, определяющих формулу и правила вычислений в событиях.

Каждая переменная может быть одним из трех *видов:* *числовой,* *категоричной*и *агрегированной.*

* **Числовые** виды работают с непрерывными значениями. 
* **Категориальные** виды работают с определенным набором дискретных значений.
* **Совокупные** значения объединяют несколько переменных одного вида (либо все численные, либо все категоричные).

В следующей таблице отображаются свойства, которые являются актуальными для каждого переменного вида.

[![Таблица переменных временных рядов](media/v2-update-tsm/time-series-model-variable-table.png)](media/v2-update-tsm/time-series-model-variable-table.png#lightbox)

#### <a name="numeric-variables"></a>Числовые переменные

| Переменное свойство | Описание |
| --- | ---|
| Фильтр переменной | Фильтры являются дополнительными условными оговорками для ограничения количества строк, рассматриваемых для вычислений. |
| Значение переменной | Значения телеметрии, используемые для вычислений, поступающие с устройства или датчиков или трансформированные с помощью выражений временных рядов. Числовые переменные рода должны быть типа *Double.*|
| Переменная интерполяция | Интерполяция определяет, как реконструировать сигнал с помощью существующих данных. *Параметры* *степной и линейной* интерполяции доступны для числовых переменных. |
| Объединение переменных | Поддержка вычислений через *Avg*, *Мин*, *Макс*, *Сумма*, *Граф*, *Первый*, *Последний* и взвешенный по времени (*Avg*, *Мин*, *Макс*, *Сум*, *Слева*) операторов . |

Переменные соответствуют следующему примеру JSON:

```JSON
"Interpolated Speed": {
  "kind": "numeric",
  "value": {
    "tsx": "$event.[speed].Double"
  },
  "filter": null,
  "interpolation": {
    "kind": "step",
    "boundary": {
      "span": "P1D"
    }
  },
  "aggregation": {
    "tsx": "left($value)"
  }
}
```

#### <a name="categorical-variables"></a>Категориальные переменные

| Переменное свойство | Описание |
| --- | ---|
| Фильтр переменной | Фильтры являются дополнительными условными оговорками для ограничения количества строк, рассматриваемых для вычислений. |
| Значение переменной | Значения телеметрии, используемые для вычислений, поступающих от устройства или датчиков. Категориальные переменные рода должны быть либо *длинными,* либо *строками.* |
| Переменная интерполяция | Интерполяция определяет, как реконструировать сигнал с помощью существующих данных. Вариант интерполяции *шага* доступен для категориальных переменных. |
| Категории переменных | Категории создают отображение между значениями, поступающими от устройства или датчиков к этикетке. |
| Категория переменной по умолчанию | Категория по умолчанию предназначена для всех значений, которые не отображаются в свойстве "категории". |

Переменные соответствуют следующему примеру JSON:

```JSON
"Status": {
  "kind": "categorical",
  "value": {
     "tsx": "toLong($event.[Status].Double)"
},
  "interpolation": {
    "kind": "step",
    "boundary": {
      "span" : "PT1M"
    }
  },
  "categories": [
    {
      "values": [0, 1, 2],
      "label": "Good"
    },
    {
      "values": [3],
      "label": "Bad"
    }
  ],
  "defaultCategory": {
    "label": "Not Applicable"
  }
}
```

#### <a name="aggregate-variables"></a>Агрегированные переменные

| Переменное свойство | Описание |
| --- | ---|
| Фильтр переменной | Фильтры являются дополнительными условными оговорками для ограничения количества строк, рассматриваемых для вычислений. |
| Объединение переменных | Поддержка вычислений через *Avg*, *Мин*, *Макс*, *Сумма*, *Граф*, *Первый*, *Последний*. |

Переменные соответствуют следующему примеру JSON:

```JSON
"Aggregate Speed": {
  "kind": "aggregate",
  "filter": null,
  "aggregation": {
    "tsx": "avg($event.Speed.Double)"
  }
}
```

Переменные сохраняются в определении типа модели временных рядов и могут быть предоставлены в строенивом виде через [AIS запросов](time-series-insights-update-tsq.md) для переопределения сохраненного определения.

## <a name="next-steps"></a>Дальнейшие действия

- Читайте [Azure Time Серия Исследования Предварительный хранения и проникновения](./time-series-insights-update-storage-ingress.md).

- Узнайте об общих операциях модели временных рядов в [моделировании данных в обзоре обзоров временных обзоров](./time-series-insights-update-how-to-tsm.md)

- Ознакомьте новую справочную документацию [Time Series Model.](https://docs.microsoft.com/rest/api/time-series-insights/preview-model)
