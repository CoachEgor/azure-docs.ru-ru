---
title: Диагностирование и устранение неполадок с помощью службы "Аналитика временных рядов Azure" (предварительная версия) | Документация Майкрософт
description: Сведения о диагностировании и устранении неполадок с помощью службы "Аналитика временных рядов Azure" (предварительная версия).
author: ashannon7
ms.author: dpalled
ms.workload: big-data
manager: cshankar
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 04/30/2019
ms.custom: seodec18
ms.openlocfilehash: d18f8f4808d5ca9dd7eca1561b1ee08c2073f5fa
ms.sourcegitcommit: 509e1583c3a3dde34c8090d2149d255cb92fe991
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2019
ms.locfileid: "66237545"
---
# <a name="diagnose-and-troubleshoot"></a>Диагностирование и устранение неполадок

В этой статье описаны распространенные проблемы, с которыми вы можете столкнуться при работе со средой службы "Аналитика временных рядов Azure" (предварительная версия). Здесь также описаны потенциальные причины и решения каждой проблемы.

## <a name="problem-i-cant-find-my-environment-in-the-preview-explorer"></a>Проблема. Не удается найти моей среды в окне предварительного просмотра

Эта проблема может возникнуть, если у вас нет прав доступа к среде службы "Аналитика временных рядов". Для просмотра такой среды пользователям необходима роль доступа на уровне читателя. Чтобы проверить текущие уровни доступа и предоставить дополнительные разрешения на доступ, перейдите в раздел "Политики доступа к данным" ресурса "Аналитика временных рядов" на [портале Azure](https://portal.azure.com/).

  [![Среды](media/v2-update-diagnose-and-troubleshoot/environment.png)](media/v2-update-diagnose-and-troubleshoot/environment.png#lightbox)

## <a name="problem-no-data-is-seen-in-the-preview-explorer"></a>Проблема: данные не поступают в окне предварительного просмотра

Существует несколько причин, по которым данные могут не отображаться в [обозревателе службы "Аналитика временных рядов Azure" (предварительная версия)](https://insights.timeseries.azure.com/preview).

- Ваш источник события может не получать данные.

    Убедитесь, что источник события, представляющий собой концентратор событий или центр Интернета вещей, получает данные из ваших тегов или экземпляров. Для этого перейдите к странице обзора вашего ресурса на портале Azure.

    [![Восприятие информационной панели](media/v2-update-diagnose-and-troubleshoot/dashboard-insights.png)](media/v2-update-diagnose-and-troubleshoot/dashboard-insights.png#lightbox)

- Источник события не содержит данные в формате JSON.

    Среда службы "Аналитика временных рядов" поддерживает только данные в формате JSON. Примеры JSON см. в разделе [Поддерживаемые формы JSON](./how-to-shape-query-json.md).

- Для вашего ключа источника события отсутствует необходимое разрешение.

  * Для Центра Интернета вещей необходимо указать ключ с разрешением на **подключение службы**.

    [![Конфигурация](media/v2-update-diagnose-and-troubleshoot/configuration.png)](media/v2-update-diagnose-and-troubleshoot/configuration.png#lightbox)

  * Как показано на предыдущем рисунке, можно использовать политики **iothubowner** и **service**, так как обеим назначено разрешение на **подключение службы**.
  * Для концентратора событий необходимо указать ключ с разрешением на **прослушивание**.
  
    [![Разрешения](media/v2-update-diagnose-and-troubleshoot/permissions.png)](media/v2-update-diagnose-and-troubleshoot/permissions.png#lightbox)

  * Как показано на предыдущем рисунке, можно использовать политики **read** и **manage**, так как обеим назначено разрешение на **прослушивание**.

- Указанная группа объектов-получателей не является уникальной для службы "Аналитика временных рядов".

    Во время регистрации центра Интернета вещей или концентратора событий нужно указать группу объектов-получателей, которая используется для чтения данных. Не предоставляйте к ней общий доступ. Иначе базовый концентратор событий автоматически отключит один из модулей чтения в случайном порядке. Укажите уникальную группу получателей, из которой должна считывать данные среда службы "Аналитика временных рядов".

- Ваше свойство идентификатора временного ряда, указанное во время подготовки, неверно, отсутствует или имеет значение NULL.

    Эта проблема может возникнуть, если во время подготовки среды свойство идентификатора временного ряда настроено неправильно. Дополнительные сведения см. в статье [Лучшие методики при выборе идентификатора временного ряда](./time-series-insights-update-how-to-id.md). В настоящее время вы не можете обновить имеющуюся среду службы "Аналитика временных рядов", чтобы использовать другой идентификатор временного ряда.

## <a name="problem-some-data-shows-but-some-is-missing"></a>Проблема: некоторые данные, но отображает некоторые отсутствует

Возможно, вы отправляете данные без идентификатора временного ряда.

- Эта проблема может возникнуть при отправке событий без поля идентификатора временного ряда в полезных данных. Дополнительные сведения см. в статье [Формирование JSON для достижения максимальной производительности запросов](./how-to-shape-query-json.md).

- Эта проблема может возникнуть из-за регулирования вашей среды.

    > [!NOTE]
    > В настоящее время служба "Аналитика временных рядов" поддерживает максимальную скорость приема данных 6 Мбит/с.

## <a name="problem-my-event-sources-timestamp-property-name-doesnt-work"></a>Проблема: имя свойства метки времени источника события не работает

Убедитесь, что имя и значение соответствуют следующим правилам:

* В имени свойства метки времени учитывается регистр.
* Значение свойства метки времени, полученное из источника события в виде строки JSON, имеет формат `yyyy-MM-ddTHH:mm:ss.FFFFFFFK`. Пример такой строки — `“2008-04-12T12:53Z”`.

Самый простой способ убедиться, что имя свойства метки времени зафиксировано и работает правильно, — использовать обозреватель службы "Аналитика временных рядов" (предварительная версия). В этом обозревателе с помощью схемы выберите период времени после предоставления имени свойства метки времени. Щелкните выделение правой кнопкой мыши и выберите параметр **обзора событий**. Заголовок первого столбца — это имя вашего свойства метки времени. Рядом со словом `Timestamp` должен находиться аргумент `($ts)` вместо приведенных ниже вариантов:

* `(abc)` указывает на то, что служба "Аналитика временных рядов" считывает значения данных в виде строк.
* Значок календаря, который указывает, что служба "Аналитика временных рядов" считывает значение данных в качестве типа datetime.
* `#` указывает, что служба "Аналитика временных рядов" считывает значения данных как целое число.

Если свойство метки времени не указано явным образом, в качестве метки времени по умолчанию используется время постановки в очередь центра Интернета вещей или концентратора событий.

## <a name="problem-i-cant-view-or-edit-my-time-series-model"></a>Проблема. Невозможно просмотреть или отредактировать моей модели временных рядов

- Возможно, вы пытаетесь получить доступ к среде службы "Аналитика временных рядов" S1 или S2.

   Модели временных рядов поддерживаются только в средах PAYG. Дополнительные сведения о получении доступа к среде S1 или S2 из обозревателя службы "Аналитика временных рядов" (предварительная версия) см. в [этой статье](./time-series-insights-update-explorer.md).

   [![Доступ](media/v2-update-diagnose-and-troubleshoot/access.png)](media/v2-update-diagnose-and-troubleshoot/access.png#lightbox)

- Возможно, у вас нет прав на просмотр и изменение модели.

   Для изменения и просмотра модели временных рядов пользователям необходим доступ на уровне участника. Чтобы проверить текущие уровни доступа и предоставить дополнительные разрешения на доступ, перейдите в раздел "Политики доступа к данным" ресурса "Аналитика временных рядов" на портале Azure.

## <a name="problem-all-my-instances-in-the-preview-explorer-lack-a-parent"></a>Проблема: Мои экземпляры в окне предварительного просмотра без родительского элемента

Эта проблема может возникнуть, если в вашей среде не определена иерархия модели временных рядов. Дополнительные сведения см. в статье о [работе с моделями временных рядов](./time-series-insights-update-how-to-tsm.md).

  [![Модели временных рядов](media/v2-update-diagnose-and-troubleshoot/tsm.png)](media/v2-update-diagnose-and-troubleshoot/tsm.png#lightbox)

## <a name="next-steps"></a>Дальнейшие действия

- [Data modeling in Azure Time Series Insights Preview](./time-series-insights-update-how-to-tsm.md) (Моделирование данных в службе "Аналитика временных рядов Azure" (предварительная версия))

- Дополнительные сведения о [поддерживаемые формы JSON](./how-to-shape-query-json.md).
