---
title: Диагностика и устранение неполадок в среде предварительного просмотра - Azure Time Series Исследования (ru) Документы Майкрософт
description: Узнайте, как диагностировать и устранить неполадки в среде previews Azure Time Series.
author: deepakpalled
ms.author: dpalled
manager: cshankar
ms.workload: big-data
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 02/07/2020
ms.custom: seodec18
ms.openlocfilehash: 667dee6365f38ae058e91c61c24838d8912df26a
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80152670"
---
# <a name="diagnose-and-troubleshoot-a-preview-environment"></a>Диагностика и устранение неполадок среды предварительного просмотра

В этой статье описаны распространенные проблемы, с которыми вы можете столкнуться при работе со средой службы "Аналитика временных рядов Azure" (предварительная версия). Здесь также описаны потенциальные причины и решения каждой проблемы.

## <a name="problem-i-cant-find-my-environment-in-the-preview-explorer"></a>Проблема: Я не могу найти свою среду в исследователе предварительного просмотра

Эта проблема может возникнуть, если у вас нет прав доступа к среде службы "Аналитика временных рядов". Для просмотра такой среды пользователям необходима роль доступа на уровне читателя. Чтобы проверить текущие уровни доступа и предоставить дополнительный доступ, перейдите в раздел **Политики доступа к данным** на ресурсе Time Series Insights на [портале Azure.](https://portal.azure.com/)

  [![Проверка политик доступа к данным.](media/preview-troubleshoot/verify-data-access-policies.png)](media/preview-troubleshoot/verify-data-access-policies.png#lightbox)

## <a name="problem-no-data-is-seen-in-the-preview-explorer"></a>Проблема: В проводнике предварительного просмотра данные не видны

Существует несколько распространенных причин, по которым ваши данные могут не отображаться в [Azure Time Series Insights Preview](https://insights.timeseries.azure.com/preview)Explorer.

- Ваш источник события может не получать данные.

    Убедитесь, что источник события, представляющий собой концентратор событий или центр Интернета вещей, получает данные из ваших тегов или экземпляров. Для этого перейдите к странице обзора вашего ресурса на портале Azure.

    [![Просмотрите обзор метрик панели мониторинга.](media/preview-troubleshoot/verify-dashboard-metrics.png)](media/preview-troubleshoot/verify-dashboard-metrics.png#lightbox)

- Источник события не содержит данные в формате JSON.

    Среда службы "Аналитика временных рядов" поддерживает только данные в формате JSON. Для образцов JSON прочитайте [поддерживаемые формы JSON.](./how-to-shape-query-json.md)

- Для вашего ключа источника события отсутствует необходимое разрешение.

  * Для Центра Интернета вещей необходимо указать ключ с разрешением на **подключение службы**.

    [![Проверка разрешений концентратора IoT.](media/preview-troubleshoot/verify-correct-permissions.png)](media/preview-troubleshoot/verify-correct-permissions.png#lightbox)

    * Как политики **iothubowner,** так и **сервисные** работы, поскольку у них есть разрешение **на подключение службы.**

  * Для концентратора событий необходимо указать ключ с разрешением на **прослушивание**.
  
    [![Просмотрите разрешения концентратора событий.](media/preview-troubleshoot/verify-eh-permissions.png)](media/preview-troubleshoot/verify-eh-permissions.png#lightbox)

    * Политики **чтения** и **управления** работают, потому что у них есть разрешение **на прослушивание.**

- Указанная группа объектов-получателей не является уникальной для службы "Аналитика временных рядов".

    Во время регистрации центра Интернета вещей или концентратора событий нужно указать группу объектов-получателей, которая используется для чтения данных. Эта группа потребителей должна быть уникальной в своей среде. Иначе базовый концентратор событий автоматически отключит один из модулей чтения в случайном порядке. Укажите уникальную группу получателей, из которой должна считывать данные среда службы "Аналитика временных рядов".

- Ваше свойство идентификатора временного ряда, указанное во время подготовки, неверно, отсутствует или имеет значение NULL.

    Эта проблема может возникнуть, если во время подготовки среды свойство идентификатора временного ряда настроено неправильно. Для получения дополнительной информации прочитайте [рекомендации по выбору id Time Series](./time-series-insights-update-how-to-id.md). В настоящее время вы не можете обновить имеющуюся среду службы "Аналитика временных рядов", чтобы использовать другой идентификатор временного ряда.

## <a name="problem-some-data-shows-but-some-is-missing"></a>Проблема: Некоторые данные показывают, но некоторые отсутствуют

Возможно, вы отправляете данные без идентификатора временного ряда.

- Эта проблема может возникнуть при отправке событий без поля идентификатора временного ряда в полезных данных. Для получения дополнительной информации, прочитайте [Поддерживаемые формы JSON](./how-to-shape-query-json.md).
- Эта проблема может возникнуть из-за регулирования вашей среды.

    > [!NOTE]
    > В настоящее время служба "Аналитика временных рядов" поддерживает максимальную скорость приема данных 6 Мбит/с.

## <a name="problem-data-was-showing-but-now-ingestion-has-stopped"></a>Проблема: Данные показывали, но теперь проглатывание прекратилось

- Возможно, ключ исходного события был регенерирован, и среда Preview нуждается в новом ключе источника событий.

Эта проблема возникает, когда ключ, предоставленный при создании источника событий, больше не действителен. Вы увидите телеметрию в вашем концентраторе, но не Ingress получил сообщения в Time Series Исследования. Если вы не уверены, был ли регенерирован ключ, вы можете высмотреть журнал активности концентраторов событий для "Создать или обновить правила авторизации namespace" или найти "Создать или обновить ресурс IotHub" для концентратора IoT. 

Чтобы обновить среду просмотра Time Series Insights с помощью нового ключа, открыть ресурс концентратора на портале Azure и скопировать новый ключ. Перейдите на ресурс TSI и нажмите на источники событий. 

   [![Обновление ключа.](media/preview-troubleshoot/update-hub-key-step-1.png)](media/preview-troubleshoot/update-hub-key-step-1.png#lightbox)

Выберите источник событий (ы), которые имеют, из которых проглатывание остановилось, вставьте в новый ключ и нажмите Сохранить.

   [![Обновление ключа.](media/preview-troubleshoot/update-hub-key-step-2.png)](media/preview-troubleshoot/update-hub-key-step-2.png#lightbox)

## <a name="problem-my-event-sources-timestamp-property-name-doesnt-work"></a>Проблема: Имя свойства источника событий Timestamp не работает

Убедитесь, что имя и значение соответствуют следующим правилам:

* В имени свойства метки времени учитывается регистр.
* Значение свойства Timestamp, исходивнее из источника событий `yyyy-MM-ddTHH:mm:ss.FFFFFFFK`в строке JSON, имеет формат. Пример такой строки — `“2008-04-12T12:53Z”`.

Самый простой способ убедиться, что имя свойства метки времени зафиксировано и работает правильно, — использовать обозреватель службы "Аналитика временных рядов" (предварительная версия). В этом обозревателе с помощью схемы выберите период времени после предоставления имени свойства метки времени. Щелкните выделение правой кнопкой мыши и выберите параметр **обзора событий**. Заголовок первого столбца — это имя вашего свойства метки времени. Рядом со словом `Timestamp` должен находиться аргумент `($ts)` вместо приведенных ниже вариантов:

* `(abc)` указывает на то, что служба "Аналитика временных рядов" считывает значения данных в виде строк.
* Значок **календаря,** указывающий на то, что Time Series Insights считывает значение данных как время даты.
* `#` указывает, что служба "Аналитика временных рядов" считывает значения данных как целое число.

Если свойство метки времени не указано явным образом, в качестве метки времени по умолчанию используется время постановки в очередь центра Интернета вещей или концентратора событий.

## <a name="problem-i-cant-view-data-from-my-warm-store-in-the-explorer"></a>Проблема: Я не могу просматривать данные из моего теплого магазина в explorer

- Возможно, недавно вы создали свой теплый магазин, и данные по-прежнему поступают.
- Возможно, вы удалили свой теплый магазин, и в этом случае вы потеряли бы данные.

## <a name="problem-i-cant-view-or-edit-my-time-series-model"></a>Проблема: Я не могу просматривать или ототрачить модель серии времени

- Возможно, вы пытаетесь получить доступ к среде службы "Аналитика временных рядов" S1 или S2.

   Модели временных рядов поддерживаются только в средах с оплатой по мере отвас. Для получения дополнительной информации о том, как получить доступ к вашей среде S1 или S2 от Time Series Исследования Предварительный исследователь, прочитайте [Визуализация данных в explorer](./time-series-insights-update-explorer.md).

   [![Нет событий в среде.](media/preview-troubleshoot/troubleshoot-no-events.png)](media/preview-troubleshoot/troubleshoot-no-events.png#lightbox)

- Возможно, у вас нет прав на просмотр и изменение модели.

   Для изменения и просмотра модели временных рядов пользователям необходим доступ на уровне участника. Чтобы проверить текущие уровни доступа и предоставить дополнительный доступ, перейдите в раздел **Политики доступа к данным** на ресурсе Time Series Insights на портале Azure.

## <a name="problem-all-my-instances-in-the-preview-explorer-lack-a-parent"></a>Проблема: Все мои экземпляры в исследователе предварительного просмотра не имеют родительского

Эта проблема может возникнуть, если в вашей среде не определена иерархия модели временных рядов. Для получения дополнительной информации читайте [Работа с моделями временных рядов](./time-series-insights-update-how-to-tsm.md).

  [![Неотеченные экземпляры будут отображать предупреждение.](media/preview-troubleshoot/unparented-instances.png)](media/preview-troubleshoot/unparented-instances.png#lightbox)

## <a name="next-steps"></a>Дальнейшие действия

- [Data modeling in Azure Time Series Insights Preview](./time-series-insights-update-how-to-tsm.md) (Моделирование данных в службе "Аналитика временных рядов Azure" (предварительная версия))

- Узнайте о [поддерживаемых формах JSON](./how-to-shape-query-json.md).

- Просмотр [планирования и ограничений](./time-series-insights-update-plan.md) в Azure Time Series Insights Preview.
