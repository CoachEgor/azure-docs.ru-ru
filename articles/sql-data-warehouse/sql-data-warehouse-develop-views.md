---
title: Применение представлений T-SQL в хранилище данных SQL Azure | Документация Майкрософт
description: Советы по использованию представлений T-SQL в хранилище данных SQL Azure для разработки решений.
services: sql-data-warehouse
author: XiaoyuMSFT
manager: craigg
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.subservice: development
ms.date: 04/17/2018
ms.author: xiaoyul
ms.reviewer: igorstan
ms.openlocfilehash: 8a770e66120e69271744942899186ece39b2a3c3
ms.sourcegitcommit: 75a56915dce1c538dc7a921beb4a5305e79d3c7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2019
ms.locfileid: "68479526"
---
# <a name="views-in-azure-sql-data-warehouse"></a>Представления в хранилище данных SQL Azure
Советы по использованию представлений T-SQL в хранилище данных SQL Azure для разработки решений. 

## <a name="why-use-views"></a>Зачем нужны представления?
Представления можно использовать разными способами для повышения качества вашего решения.  В этой статье представлены примеры того, как можно улучшить решение с помощью представлений; кроме того, здесь описаны ограничения, которые следует учитывать.


> [!IMPORTANT]
> См. новый синтаксис материализованных представлений при [создании материализованных представлений в виде SELECT](/sql/t-sql/statements/create-materialized-view-as-select-transact-sql?view=azure-sqldw-latest).  Дополнительные сведения см. в [заметках о выпуске](/azure/sql-data-warehouse/release-notes-10-0-10106-0).
>


> [!NOTE]
> Синтаксис команды CREATE VIEW в этой статье не рассматривается. Дополнительные сведения см. в [документации по CREATE VIEW](/sql/t-sql/statements/create-view-transact-sql).
> 

## <a name="architectural-abstraction"></a>Архитектурная абстракция

Один из распространенных шаблонов приложения — повторное создание таблиц с помощью инструкции CREATE TABLE AS SELECT (CTAS), после которой следует шаблон переименования объектов в процессе загрузки данных.

Приведенный ниже пример добавляет новые записи даты в измерение даты. Обратите внимание, что сначала создается новая таблица DimDate_New, которая затем переименовывается для замены исходной версии таблицы.

```sql
CREATE TABLE dbo.DimDate_New
WITH (DISTRIBUTION = ROUND_ROBIN
, CLUSTERED INDEX (DateKey ASC)
)
AS
SELECT *
FROM   dbo.DimDate  AS prod
UNION ALL
SELECT *
FROM   dbo.DimDate_stg AS stg
;

RENAME OBJECT DimDate TO DimDate_Old;
RENAME OBJECT DimDate_New TO DimDate;

```

Но эти действия могут привести к тому, что таблицы могут появляться в представлении пользователя и исчезать из него; кроме того, могут появляться сообщения об ошибках "Таблица не существует". Представления нужны для предоставления пользователям доступа к согласованному уровню отображения данных, пока базовые объекты переименовываются. Получая доступ к данным через представления, пользователи не нуждаются в доступе к базовым таблицам. Этот уровень предоставляет всю необходимую пользователю информацию, одновременно позволяя разработчикам менять модели данных в хранилище. Благодаря возможности усовершенствования базовых таблиц разработчики могут использовать CTAS, чтобы повысить производительность при загрузке данных.   

## <a name="performance-optimization"></a>Оптимизация производительности
Представления также можно использовать для повышения эффективности соединений между таблицами. Например, в представление можно включить ключ избыточного распространения, заданный в критерии соединения, чтобы минимизировать перемещение данных. Еще одно преимущество представления — принудительное выполнение определенного запроса или указания по соединению. Благодаря представлениям соединения всегда выполняются правильно, поэтому пользователю не нужно запоминать правильную конструкцию соединений.

## <a name="limitations"></a>Ограничения
Представления в хранилище данных SQL хранятся только в виде метаданных. Поэтому следующие варианты недоступны.

* Нет возможности привязать схему.
* Базовые таблицы нельзя обновлять через представление.
* Для временных таблиц нельзя создавать представления.
* Не поддерживаются указания для EXPAND и NOEXPAND.
* В хранилище данных SQL нет индексированных представлений.

## <a name="next-steps"></a>Следующие шаги
Дополнительные советы по разработке см. в статье [Проектные решения и методики программирования для хранилища данных SQL](sql-data-warehouse-overview-develop.md).


