---
title: Применение представлений T-SQL в хранилище данных SQL Azure | Документация Майкрософт
description: Советы по использованию представлений T-SQL в хранилище данных SQL Azure для разработки решений.
services: sql-data-warehouse
author: XiaoyuMSFT
manager: craigg
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.subservice: development
ms.date: 04/17/2018
ms.author: xiaoyul
ms.reviewer: igorstan
ms.openlocfilehash: 1fd406243f0f2f5339c4170c4ec17286fcf2ef6d
ms.sourcegitcommit: 5acd8f33a5adce3f5ded20dff2a7a48a07be8672
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2019
ms.locfileid: "72901714"
---
# <a name="views-in-azure-sql-data-warehouse"></a>Представления в хранилище данных SQL Azure
Представления можно использовать разными способами для повышения качества вашего решения. 

Хранилище данных SQL Azure поддерживает стандартные и материализованные представления. Оба являются виртуальными таблицами, созданными с помощью выражений SELECT и представленными для запросов в виде логических таблиц. Представления инкапсулируют сложность общих вычислений данных и добавляют уровень абстракции к вычислительным изменениям, поэтому нет необходимости переписывать запросы.

## <a name="standard-view"></a>Стандартное представление
Стандартное представление каждый раз рассчитывает данные при каждом использовании представления. На диске не хранятся данные. Обычно пользователи используют стандартные представления в качестве средства, помогающего организовать логические объекты и запросы в базе данных. Чтобы использовать стандартное представление, запрос должен создать прямую ссылку на него. Дополнительные сведения см. в [документации по CREATE VIEW](/sql/t-sql/statements/create-view-transact-sql).

Представления в хранилище данных SQL хранятся только в виде метаданных. Поэтому следующие варианты недоступны.
* Нет возможности привязать схему.
* Базовые таблицы нельзя обновлять через представление.
* Для временных таблиц нельзя создавать представления.
* Не поддерживаются указания для EXPAND и NOEXPAND.
* В хранилище данных SQL нет индексированных представлений.

Стандартные представления можно использовать для принудительного применения оптимизированных соединений между таблицами. Например, в представление можно включить ключ избыточного распространения, заданный в критерии соединения, чтобы минимизировать перемещение данных. Еще одно преимущество представления — принудительное выполнение определенного запроса или указания по соединению. Благодаря представлениям соединения всегда выполняются правильно, поэтому пользователю не нужно запоминать правильную конструкцию соединений.

## <a name="materialized-view"></a>Материализованное представление
Материализованные представления предварительно вычисляются, сохраняют и сохраняют свои данные в хранилище данных SQL Azure так же, как и таблица. При использовании материализованных представлений повторное вычисление не требуется. По мере загрузки данных в базовые таблицы хранилище данных SQL Azure синхронно обновляет материализованные представления.  Оптимизатор запросов автоматически использует развернутые материализованные представления для повышения производительности запросов, даже если в запросе нет ссылок на представления.  Запросы лучше всего от материализованных представлений — это сложные запросы (обычно запросы с объединениями и агрегатами) в больших таблицах, которые создают небольшой результирующий набор.  

Дополнительные сведения о синтаксисе материализованных представлений и других требованиях см. в статье [Создание материализованных ПРЕДСТАВЛЕНИЙ как SELECT](https://docs.microsoft.com/sql/t-sql/statements/create-materialized-view-as-select-transact-sql?view=azure-sqldw-latest).  

Рекомендации по настройке запросов см. [в статье Настройка производительности с материализованными представлениями](https://docs.microsoft.com/azure/sql-data-warehouse/performance-tuning-materialized-views). 

## <a name="example"></a>Пример
Один из распространенных шаблонов приложения — повторное создание таблиц с помощью инструкции CREATE TABLE AS SELECT (CTAS), после которой следует шаблон переименования объектов в процессе загрузки данных.  Приведенный ниже пример добавляет новые записи даты в измерение даты. Обратите внимание, что сначала создается новая таблица DimDate_New, которая затем переименовывается для замены исходной версии таблицы.

```sql
CREATE TABLE dbo.DimDate_New
WITH (DISTRIBUTION = ROUND_ROBIN
, CLUSTERED INDEX (DateKey ASC)
)
AS
SELECT *
FROM   dbo.DimDate  AS prod
UNION ALL
SELECT *
FROM   dbo.DimDate_stg AS stg;

RENAME OBJECT DimDate TO DimDate_Old;
RENAME OBJECT DimDate_New TO DimDate;

```
Но эти действия могут привести к тому, что таблицы могут появляться в представлении пользователя и исчезать из него; кроме того, могут появляться сообщения об ошибках "Таблица не существует". Представления нужны для предоставления пользователям доступа к согласованному уровню отображения данных, пока базовые объекты переименовываются. Получая доступ к данным через представления, пользователи не нуждаются в доступе к базовым таблицам. Этот уровень предоставляет всю необходимую пользователю информацию, одновременно позволяя разработчикам менять модели данных в хранилище. Благодаря возможности усовершенствования базовых таблиц разработчики могут использовать CTAS, чтобы повысить производительность при загрузке данных.   

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные советы по разработке см. в статье [Проектные решения и методики программирования для хранилища данных SQL](sql-data-warehouse-overview-develop.md).


