---
title: Azure важность рабочих нагрузок хранилища данных SQL | Документация Майкрософт
description: Рекомендации по настройке важности для запросов в хранилище данных SQL Azure.
services: sql-data-warehouse
author: ronortloff
manager: craigg
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.subservice: workload management
ms.date: 05/01/2019
ms.author: rortloff
ms.reviewer: jrasnick
ms.openlocfilehash: 0147977307ec22134777d6c3e8242a4191362ada
ms.sourcegitcommit: 509e1583c3a3dde34c8090d2149d255cb92fe991
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2019
ms.locfileid: "66233843"
---
# <a name="azure-sql-data-warehouse-workload-importance"></a>Azure важность рабочих нагрузок хранилища данных SQL

В этой статье объясняется, как влияют на порядок выполнения для запросов хранилища данных SQL для рабочей нагрузки importance.

## <a name="importance"></a>приоритет

> [!Video https://www.youtube.com/embed/_2rLMljOjw8]

Потребности бизнеса может потребоваться рабочих нагрузок, чтобы быть важнее других хранилищ данных.  Рассмотрим ситуацию, где критически важные данные о продажах загружается, прежде чем Закрытие финансового периода.  Для других источников загрузки данных, такие как данные о погоде не имеют строгие соглашения об уровне обслуживания.   Установка высокой важности для запроса загрузить данные о продажах и низкую важность на запрос нагрузки независимо от данных гарантирует загрузку данных о продажах получает первый доступ к ресурсам и завершает быстрее.

## <a name="importance-levels"></a>Уровни важности

Существует пять уровней важности: низкий, below_normal, обычный, above_normal и высокий.  Запросы, которые не задать важность назначаются обычный уровень по умолчанию.  Запросы, которые имеют один и тот же уровень важности ведут себя так же планирования, сегодня существует.

## <a name="importance-scenarios"></a>Важность сценариев

Помимо основных важности описанный выше продаж и данных о погоде существуют другие ситуации, где важность рабочих нагрузок помогает соответствовать обработки данных и выполнения запросов потребностей.

### <a name="locking"></a>Выполняется блокировка

Доступ к блокировки для чтения и записи действий — это область, естественным конкуренции.  Действия, такие как [переключения секций](/azure/sql-data-warehouse/sql-data-warehouse-tables-partition) или [ПЕРЕИМЕНОВАТЬ объект](/sql/t-sql/statements/rename-transact-sql) требует блокировок с повышенными правами.  Без важность рабочих нагрузок хранилища данных SQL выполняет оптимизацию для пропускной способности.  Оптимизация для пропускной способности означает, что при выполнении запросов в очереди имеют же блокировки потребностей и ресурсы доступны, запросы в очереди может обойти запросы с более поздней версии требуется блокировка, поступивших в очередь запросов, ранее.  После применения важность рабочих нагрузок на запросы с блокировкой на более поздней версии необходимо. Запрос с более высокий уровень важности будет выполняться перед запросом с нижней важности.

Рассмотрим следующий пример.

Q1 активно работает и выбора данных из SalesFact.
Q2 помещается в очередь ожидания для запроса Q1 для завершения.  Он был отправлен в 9: 00 и пытается раздел switch новые данные в SalesFact.
Вопрос 3 будет отправлено в 9:01, а хочет выбирать данные из SalesFact.

Если по-прежнему выполняется Q1, Q2 и Q3 у одинаково важными, вопрос 3 запускает выполнение. Q2 будет продолжать ожидать монопольную блокировку на SalesFact.  Если Q2 имеет большую важность, чем Q3, вопрос 3 будет ждать завершения Q2 до начала выполнения.

### <a name="non-uniform-requests"></a>Запросы неоднородной

Другой сценарий, где важности может помочь в удовлетворении требований запросов — при отправке запросов с помощью классов различных ресурсов.  Как было отмечено ранее, в разделе одинаково важными, хранилище данных SQL выполняет оптимизацию для пропускной способности.  При смешанном размер запросов (например, smallrc или mediumrc) находятся в очереди, хранилище данных SQL будет выбрана самая ранняя поступающего запроса, который умещается в доступных ресурсов.  Если применяется важность рабочих нагрузок, наибольший важности запрос ближайших запланированных.
  
Рассмотрим следующий пример на DW500c:

Q1, Q2, вопрос 3 и 4 квартал выполняются запросы smallrc.
Вопрос 5 отправки с классом ресурсов mediumrc в 9: 00.
Вопрос 6 отправляется с классом ресурсов smallrc, в 9:01.

Поскольку вопрос 5 mediumrc, он требует двух слотов.  Вопрос 5 должен ожидать для двух из выполняющихся запросов, для завершения.  Тем не менее по завершении одной из выполняющихся запросов (Q1 Q4), вопрос 6 запланировано немедленно так, как ресурсы существуют для выполнения запроса.  Если вопрос 5 имеет большую важность, чем вопрос 6, вопрос 6 ожидает, пока не выполняется, вопрос 5 до начала выполнения.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о создании классификатора, см. в разделе [СОЗДАНИЯ КЛАССИФИКАТОРА рабочей НАГРУЗКИ (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-workload-classifier-transact-sql).  
- Дополнительные сведения о классификации рабочей нагрузки хранилища данных SQL, см. в разделе [классификации рабочей нагрузки](sql-data-warehouse-workload-classification.md).  
- Это краткое руководство см. в разделе [Создание рабочей нагрузки классификатора](quickstart-create-a-workload-classifier-tsql.md) по созданию классификатора рабочей нагрузки.
- См. статьи с инструкциями по [настройке уровня важности рабочих нагрузок](sql-data-warehouse-how-to-configure-workload-importance.md), а также по [администрированию и мониторингу рабочих нагрузок](sql-data-warehouse-how-to-manage-and-monitor-workload-importance.md).
- Запросы и назначенную важность см. в разделе [sys.dm_pdw_exec_requests](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-exec-requests-transact-sql).
