---
title: Управляемость Хранилища данных SQL Azure и мониторинг в нем действий запросов и использования ресурсов | Документация Майкрософт
description: Узнайте о доступных возможностях мониторинга Хранилища данных SQL Azure и управления им. Используйте портал Azure и динамические административные представления (DMV), чтобы понять действия запросов и использование ресурсов хранилища данных.
services: sql-data-warehouse
author: kevinvngo
manager: craigg-msft
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.subservice: manage
ms.date: 04/12/2019
ms.author: kevin
ms.reviewer: igorstan
ms.openlocfilehash: f80c1817d5c0ce79f2dc53f40a2cc4e00dd5c72b
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61420972"
---
# <a name="monitoring-resource-utilization-and-query-activity-in-azure-sql-data-warehouse"></a>Мониторинг использования ресурсов и действий запросов в Хранилище данных SQL Azure
Хранилище данных SQL Azure предоставляет широкие возможности мониторинга в рамках портала Azure, позволяя просматривать аналитические сведения о рабочей нагрузке хранилища данных. Портал Azure — рекомендуемый инструмент мониторинга хранилища данных, так как он предоставляет настраиваемые периоды хранения, оповещения, рекомендации, индивидуальные диаграммы и панели мониторинга для метрик и журналов. На портале можно также интегрировать с другими службами Azure мониторинга например Operations Management Suite (OMS) и Azure Monitor (журналы) для обеспечения мониторинга целостное впечатление не только хранилище данных, но и весь аналитики Azure Платформа для интеграции мониторинга. В этой документации описывается, какие возможности мониторинга доступны для оптимизации вашей платформы аналитики и управления ею при использовании Хранилища данных SQL. 

## <a name="resource-utilization"></a>Использование ресурсов 
На портале Azure доступны указанные ниже метрики Хранилища данных SQL. Эти метрики отслеживаются с помощью [Azure Monitor](https://docs.microsoft.com/azure/azure-monitor/platform/data-collection#metrics).

> [!NOTE]
> В настоящее время уровень узлов ЦП и ввода-ВЫВОДА метрики неправильно отражают использование хранилища данных. Эти показатели будут удалены в ближайшем будущем команда улучшает мониторинга и устранения неполадок в области для хранилища данных SQL. 

| Имя метрики                           | Описание     | Тип статистической обработки |
| --------------------------------------- | ---------------- | --------------------------------------- |
| Процент ЦП                          | Загрузка ЦП во всех узлах хранилища данных | Максимум      |
| Процент операций ввода-вывода данных                      | Использование операций ввода-вывода во всех узлах хранилища данных | Максимум   |
| Успешные подключения                  | Количество успешных подключений к данным | Итого            |
| Неудачные подключения                      | Количество неудачных попыток подключения к хранилищу данных | Итого            |
| Заблокировано брандмауэром                     | Количество заблокированных операций входа в хранилище данных | Итого            |
| Лимит DWU                              | Целевой уровень обслуживания хранилища данных | Максимум   |
| DWU percentage                          | Максимальная разница между процентом использования ЦП и процентом операций ввода-вывода данных | Максимум   |
| DWU used                                | Лимит DWU * процент DWU | Максимум   |
| Cache hit percentage (Процент попаданий в кэш) | (попадания в кэш / промахи кэша) * 100, где попадания в кэш — это сумма всех попаданий сегментов columnstore в локальный кэш SSD, а промах кэша — это промахи сегментов columnstore в локальный кэш SSD, суммированные по всем узлам | Максимум |
| Cache used percentage (Процент использования кэша) | (кэш использований / кэш емкости) * 100, где кэш использований представляет собой сумму всех байтов в локальном кэше SSD на всех узлах, а кэш емкости — сумму объема локального диска SSD, кэшированную на всех узлах. | Максимум |
| Local tempdb percentage (Процент использования локальной базы данных tempdb) | Использование локальной базы данных tempdb на всех вычислительных узлах (значения генерируются каждые пять минут) | Максимум |

## <a name="query-activity"></a>Действия запросов
Для программного взаимодействия при мониторинге Хранилища данных SQL с помощью T-SQL служба предоставляет набор динамических административных представлений (DMV). Эти представления полезны в том случае, если вы активно устраняете неполадки и выявляете узкие места производительности в рабочей нагрузке.

Чтобы просмотреть список динамических административных представлений, которые предоставляет Хранилище данных SQL, ознакомьтесь с этой [документацией](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-reference-tsql-system-views#sql-data-warehouse-dynamic-management-views-dmvs). 

## <a name="metrics-and-diagnostics-logging"></a>Метрики и журналы диагностики
Метрики и журналы можно экспортировать в Azure Monitor, в частности [журналы Azure Monitor](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) компонента и может осуществляться программно через [журнал запросов](https://docs.microsoft.com/azure/log-analytics/log-analytics-tutorial-viewdata). Задержка журнала для хранилища данных SQL — около 10 – 15 минут. Узнать больше о факторы, влияющие на задержку обратитесь к следующей документации.


## <a name="next-steps"></a>Дальнейшие действия
В следующем практическом руководстве описаны распространенные сценарии и варианты использования при мониторинге хранилища данных и управлении им:

- [Мониторинг рабочей нагрузки с помощью динамических административных представлений](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-manage-monitor)

