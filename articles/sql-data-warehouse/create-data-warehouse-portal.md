---
title: Создание пула SQL синапсе и выполнение запросов к нему (портал Azure)
description: Создание и запрос пула SQL синапсе с помощью портал Azure
services: sql-data-warehouse
author: XiaoyuMSFT
manager: craigg
ms.service: sql-data-warehouse
ms.topic: quickstart
ms.subservice: development
ms.date: 05/28/2019
ms.author: xiaoyul
ms.reviewer: igorstan
ms.custom: seo-lt-2019, azure-synapse
ms.openlocfilehash: 6966932e95ff538de4b2f9be1ac06516311a0919
ms.sourcegitcommit: f97d3d1faf56fb80e5f901cd82c02189f95b3486
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/11/2020
ms.locfileid: "79129564"
---
# <a name="quickstart-create-and-query-a-synapse-sql-pool-using-the-azure-portal"></a>Краткое руководство. Создание и запрос пула SQL синапсе с помощью портал Azure

Быстро создавайте и запросите пул синапсе SQL (хранилище данных) в Azure синапсе Analytics (ранее — SQL DW) с помощью портал Azure.

## <a name="prerequisites"></a>предварительные требования

1. Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.

   > [!NOTE]
   > Создание пула SQL в Azure синапсе может привести к созданию новой оплачиваемой службы. Дополнительные сведения см. на странице [цен на Azure синапсе Analytics](https://azure.microsoft.com/pricing/details/synapse-analytics/).

2. Скачайте и установите последнюю версию [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms) (SSMS).

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портал Azure](https://portal.azure.com/).

## <a name="create-a-sql-pool"></a>Создание пула SQL

Хранилища данных создаются с помощью пула SQL в Azure синапсе Analytics. Пул SQL создается с определенным набором [ресурсов вычислений](memory-concurrency-limits.md). База данных создается в пределах [группы ресурсов Azure](../azure-resource-manager/management/overview.md) и [логического сервера SQL Azure](../sql-database/sql-database-servers.md).

Выполните следующие действия, чтобы создать пул SQL, содержащий образец данных **AdventureWorksDW** .

1. Выберите **создать ресурс** в верхнем левом углу портал Azure.

   ![Создание ресурса в портал Azure](media/create-data-warehouse-portal/create-a-resource.png)

2. Выберите **базы данных** на **новой** странице и в списке **избранных** выберите **Azure синапсе Analytics (ранее SQL DW)** .

   ![создание пустого хранилища данных](media/create-data-warehouse-portal/create-a-data-warehouse.png)

3. В статье **Основные сведения**укажите подписку, группу ресурсов, имя пула SQL и имя сервера:

   | Параметр | Рекомендуемое значение | Description |
   | :------ | :-------------- | :---------- |
   | **подписка** | Ваша подписка | Дополнительные сведения о подписках см. [здесь](https://account.windowsazure.com/Subscriptions). |
   | **группа ресурсов** | myResourceGroup | Допустимые имена групп ресурсов см. в статье о [правилах и ограничениях именования](/azure/architecture/best-practices/resource-naming). |
   | **Имя пула SQL** | Любое глобально уникальное имя (пример — *mySampleDataWarehouse*) | Допустимые имена баз данных см. в статье об [идентификаторах базы данных](/sql/relational-databases/databases/database-identifiers). Обратите внимание, что пул SQL — это один из типов баз данных. |
   | **Server** | Любое глобально уникальное имя | Выберите существующий сервер или создайте новое имя сервера, а затем выберите **создать**. Допустимые имена серверов см. в статье о [правилах и ограничениях именования](/azure/architecture/best-practices/resource-naming). |

   ![Создание основных сведений о хранилище данных](media/create-data-warehouse-portal/create-sql-pool-basics.png)

4. На вкладке **уровень производительности**выберите **пункт выбрать уровень производительности** , чтобы дополнительно изменить конфигурацию с помощью ползунка.

   ![изменение уровня производительности хранилища данных](media/create-data-warehouse-portal/create-sql-pool-performance-level.png)  

   Дополнительные сведения об уровнях производительности см. [в статье Управление вычислениями в хранилище данных SQL Azure](sql-data-warehouse-manage-compute-overview.md).

5. Теперь, когда вы заполнили вкладку "основные" в форме Azure синапсе Analytics, выберите **проверить и создать** , а затем **создать** , чтобы создать пул SQL. Подготовка занимает несколько минут.

   ![Выберите Проверка и создать.](media/create-data-warehouse-portal/create-sql-pool-review-create.png)

   ![Выбор создания](media/create-data-warehouse-portal/create-sql-pool-create.png)

6. На панели инструментов выберите **уведомления** , чтобы отслеживать процесс развертывания.

   ![уведомление](media/create-data-warehouse-portal/notification.png)

## <a name="create-a-server-level-firewall-rule"></a>создадим правило брандмауэра на уровне сервера;

Служба Azure синапсе создает брандмауэр на уровне сервера. Этот брандмауэр предотвращает подключение внешних приложений и инструментов к серверу или базам данных на сервере. Чтобы разрешить это подключение, можно добавить правила брандмауэра, открывающие подключение для определенных IP-адресов. Выполните приведенные ниже действия, чтобы создать [правило брандмауэра уровня сервера](../sql-database/sql-database-firewall-configure.md) для IP-адреса клиента.

> [!NOTE]
> Azure синапсе взаимодействует через порт 1433. Если вы пытаетесь подключиться из корпоративной сети, то исходящий трафик через порт 1433 может быть запрещен сетевым брандмауэром. В таком случае вы не сможете подключиться к серверу Базы данных SQL Azure, пока ваш ИТ-отдел не откроет порт 1433.

1. После завершения развертывания в меню слева выберите **Все службы**. Выберите **базы данных**, щелкните звезду рядом с **Azure синапсе Analytics** , чтобы добавить Azure синапсе Analytics в избранное.

2. Выберите **Azure синапсе Analytics** в меню слева, а затем выберите **MySampleDataWarehouse** на странице **Azure синапсе Analytics** . Откроется страница обзора для базы данных, в которой отображается полное имя сервера (например, **sqlpoolservername.Database.Windows.NET**) и приводятся параметры для дальнейшей настройки.

3. Скопируйте полное имя сервера. Оно понадобится для подключения к серверу и размещенным на нем базам данных при работе с этим и последующими краткими руководствами. Чтобы открыть параметры сервера, выберите имя сервера.

   ![поиск имени сервера](media/create-data-warehouse-portal/find-server-name.png)

4. Выберите **параметр Показывать параметры брандмауэра**.

   ![параметры сервера](media/create-data-warehouse-portal/server-settings.png)

5. Откроется страница **параметров брандмауэра** для сервера Базы данных SQL.

   ![правило брандмауэра для сервера](media/create-data-warehouse-portal/server-firewall-rule.png)

6. Чтобы добавить текущий IP-адрес в новое правило брандмауэра, на панели инструментов выберите **Добавить IP-адреса клиента** . С использованием правила брандмауэра можно открыть порт 1433 для одного IP-адреса или диапазона IP-адресов.

7. Щелкните **Save** (Сохранить). Для текущего IP-адреса будет создано правило брандмауэра уровня сервера, с помощью которого можно открыть порт 1433 логического сервера.

8. Нажмите кнопку **ОК** , а затем закройте страницу **Параметры брандмауэра** .

Теперь вы можете подключиться к SQL Server и его пулам SQL, используя этот IP-адрес. Подключение выполняется из SQL Server Management Studio или другого инструмента на ваше усмотрение. При подключении используйте созданную ранее учетную запись ServerAdmin.

> [!IMPORTANT]
> По умолчанию доступ через брандмауэр базы данных SQL включен для всех служб Azure. Выберите **Отключить** на этой странице, а затем нажмите кнопку **сохранить** , чтобы отключить брандмауэр для всех служб Azure.

## <a name="get-the-fully-qualified-server-name"></a>Получение полного имени сервера

Получите полное имя сервера SQL на портале Azure. Позже это полное имя понадобится при подключении к серверу.

1. Войдите на [портал Azure](https://portal.azure.com/).

2. В меню слева выберите **Azure синапсе Analytics** и щелкните на странице **Azure синапсе Analytics** .

3. На странице портала Azure вашей базы данных в области **Основные компоненты** найдите и скопируйте **имя сервера**. В этом примере полное имя — sqlpoolservername.database.windows.net.

    ![Сведения о подключении](media/create-data-warehouse-portal/find-server-name-copy.png)

## <a name="connect-to-the-server-as-server-admin"></a>Подключение к серверу от имени администратора сервера

В этом разделе для подключения к серверу SQL Azure используется [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms) (SSMS).

1. Откройте среду SQL Server Management Studio.

2. В диалоговом окне **Соединение с сервером** введите следующие данные:

   | Параметр | Рекомендуемое значение | Description |
   | :------ | :-------------- | :---------- |
   | Тип сервера | Ядро СУБД | Это обязательное значение |
   | Имя сервера | Полное имя сервера | Вот пример: **sqlpoolservername.Database.Windows.NET**. |
   | Аутентификация | Проверка подлинности SQL Server | В рамках работы с этим руководством мы настроили только один тип аутентификации — аутентификацию SQL. |
   | Имя входа | Учетная запись администратора сервера | Это учетная запись, указанная при создании сервера. |
   | Пароль | Пароль для учетной записи администратора сервера | Пароль, указанный при создании сервера. |
   ||||

   ![подключение к серверу](media/create-data-warehouse-portal/connect-to-server-ssms.png)

3. Нажмите кнопку **Подключиться**. В SSMS открывается окно обозревателя объектов. 

4. В обозревателе объектов разверните узел **Базы данных**. Затем разверните папку **mySampleDatabase**, чтобы просмотреть объекты в новой базе данных.

   ![объекты базы данных](media/create-data-warehouse-portal/connected-ssms.png) 

## <a name="run-some-queries"></a>Выполнение запросов

Хранилище данных SQL использует язык запросов T-SQL. Чтобы открыть окно запросов и выполнить несколько запросов T-SQL, выполните следующие действия.

1. Щелкните правой кнопкой мыши **mySampleDataWarehouse** и выберите **создать запрос**. Откроется новое окно запроса.

2. В окне запросов введите приведенную ниже команду, чтобы просмотреть список баз данных.

    ```sql
    SELECT * FROM sys.databases
    ```

3. Выберите **выполнить**. Результаты запроса содержат две базы данных: **master** и **mySampleDataWarehouse**.

   ![Отправка запросов к базам данных](media/create-data-warehouse-portal/query-databases.png)

4. Чтобы просмотреть некоторые данные, используйте следующую команду. Она позволяет узнать количество клиентов с фамилией "Adams", у которых трое детей. Список результатов содержит шесть клиентов. 

    ```sql
    SELECT LastName, FirstName FROM dbo.dimCustomer
    WHERE LastName = 'Adams' AND NumberChildrenAtHome = 3;
    ```

   ![Отправка запроса к dbo.dimCustomer](media/create-data-warehouse-portal/query-customer.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

Вы платите за единицы хранилища данных и данные, хранящиеся в пуле SQL. Плата за вычислительные ресурсы и ресурсы хранилища взимается отдельно.

- Если вы хотите хранить данные в хранилище, можно приостановить вычисление, если вы не используете пул SQL. При приостановке вычислений плата взимается только за хранение данных. Когда вы будете готовы работать с данными, можно будет возобновить вычисления.

- Если вы хотите удалить расходы будущих периодов, можно удалить пул SQL.

Выполните следующие действия, чтобы очистить ресурсы, которые больше не нужны.

1. Войдите в [портал Azure](https://portal.azure.com), выберите пул SQL.

   ![Очистка ресурсов](media/create-data-warehouse-portal/clean-up-resources.png)

2. Чтобы приостановить вычисление, нажмите кнопку **Пауза**. После приостановки пула SQL появится кнопка **возобновить** . Чтобы возобновить вычисление, нажмите кнопку **возобновить**.

3. Чтобы удалить пул SQL, чтобы не оплатить ресурсы для вычислений или хранения, выберите **Удалить**.

4. Чтобы удалить созданный сервер SQL Server, выберите **sqlpoolservername.Database.Windows.NET** на предыдущем изображении и нажмите кнопку **Удалить**. Будьте внимательны, так как удаление сервера приведет к удалению всех баз данных, назначенных этому серверу.

5. Чтобы удалить группу ресурсов, выберите **myResourceGroup**, а затем **Удалить группу ресурсов**.

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать больше о загрузке данных в пул SQL, перейдите к статье [Загрузка данных в пул SQL](load-data-from-azure-blob-storage-using-polybase.md) . 
