---
title: Как настроить федеративный единый вход для приложения не из коллекции | Документы Майкрософт
description: Как настроить федеративный единый вход для пользовательского приложения не из коллекции, которое вы хотите интегрировать с Azure AD
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 07/11/2017
ms.author: celested
ms.collection: M365-identity-device-management
ms.openlocfilehash: 2fcb77fe257a1b99525d009a1756a473e7e61a5d
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60291897"
---
# <a name="how-to-configure-federated-single-sign-on-for-a-non-gallery-application"></a>Настройка федеративного единого входа для приложения не из коллекции

Чтобы настроить единый вход для приложения не из коллекции *без написания кода*, необходима подписка или Azure AD Premium. Кроме того, приложение должно поддерживать SAML 2.0. Дополнительные сведения о версиях Azure AD см. в разделе [Цены на Azure AD](https://azure.microsoft.com/pricing/details/active-directory/).

## <a name="overview-of-steps-required"></a>Обзор необходимых действий
Ниже приведен общий обзор действий для настройки федеративного единого входа с помощью SAML 2.0 для приложения не из коллекции (например, пользовательского приложения).

-   Указание значений метаданных приложения в Azure AD (URL-адрес для входа, идентификатор, URL-адрес ответа)

-   [Выбор идентификатора пользователя и добавление атрибутов пользователей, которые будут отправлены в приложение](#select-user-identifier-and-add-user-attributes-to-be-sent-to-the-application)

-   [Получение метаданных Azure AD и сертификата](#download-the-azure-ad-metadata-or-certificate)

-   Указание значений метаданных Azure AD в приложении (URL-адрес для входа, издатель, URL-адрес для выхода и сертификат)

-   Назначение пользователей для приложения

## <a name="configuring-single-sign-on-to-non-gallery-applications"></a>Настройка единого входа для приложений не из коллекции

Чтобы настроить единый вход для приложения, которое не находится в коллекции Azure AD, выполните указанные ниже действия.

1. Откройте [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или **соадминистратор**.

2. Откройте **расширение Azure Active Directory**, щелкнув **Все службы** в верхней части главного меню навигации слева.

3. В поле фильтра поиска введите **Azure Active Directory** и выберите элемент **Azure Active Directory**.

4. В меню навигации Azure Active Directory слева выберите **Корпоративные приложения**.

5. Нажмите кнопку **Добавить** в правом верхнем углу области **Корпоративные приложения**.

6. Щелкните **Приложение не из коллекции** в разделе **Добавление собственного приложения**.

7. Введите имя приложения в поле **Имя**.

8. Нажмите кнопку **Добавить**, чтобы добавить приложение.

9. После загрузки приложения выберите пункт **Единый вход** в меню навигации этого приложения слева.

10. Выберите **Единый вход на основе SAML** в раскрывающемся списке **Режим**.

11. Введите необходимые значения в поле **Домены и URL-адреса**. Их можно получить у поставщика приложения.

    1. Чтобы настроить единый вход, инициированный поставщиком удостоверений, введите URL-адрес ответа и идентификатор.

    2. **Необязательно**. Чтобы настроить единый вход, инициированный поставщиком услуг, обязательно укажите URL-адрес для входа.

12. В разделе **Атрибуты пользователя** выберите уникальный идентификатор пользователя в раскрывающемся списке **Идентификатор пользователя**.

13. **Необязательно.** Щелкните **Просмотреть и изменить все другие атрибуты пользователей**, чтобы изменить атрибуты, которые будут отправлены приложению в токене SAML при входе пользователей в систему.

    Чтобы добавить атрибут, выполните указанные ниже действия.

    1. Нажмите кнопку **Добавить атрибут**. Введите **Имя** и выберите **Значение** из раскрывающегося списка.

    2. Нажмите кнопку **Сохранить**. Новый атрибут появится в таблице.

14. Щелкните **Настроить &lt;имя приложения&gt;**, чтобы открыть документацию по настройке единого входа для приложения. Кроме того, у вас есть URL-адреса Azure AD и сертификат, необходимые для приложения.

15. [Назначение пользователей для приложения.](#assign-users-to-the-application)

## <a name="select-user-identifier-and-add-user-attributes-to-be-sent-to-the-application"></a>Выберите идентификатор пользователя и добавьте атрибуты пользователя, которые будут отправлены в приложение.

Чтобы выбрать идентификатор пользователя или добавить атрибуты пользователя, выполните указанные ниже действия:

1. Откройте [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или **соадминистратор**.

2. Откройте **расширение Azure Active Directory**, щелкнув **Все службы** в верхней части главного меню навигации слева.

3. В поле фильтра поиска введите **Azure Active Directory** и выберите элемент **Azure Active Directory**.

4. В меню навигации Azure Active Directory слева выберите **Корпоративные приложения**.

5. Щелкните **Все приложения**, чтобы открыть полный список приложений.

   * Если нужное приложение отсутствует в списке, воспользуйтесь элементом управления **Фильтр** в верхней части списка **Все приложения**, указав в нем для параметра **Показать** значение **Все приложения**.

6. Выберите приложение, для которого был настроен единый вход.

7. После загрузки приложения выберите пункт **Единый вход** в меню навигации этого приложения слева.

8. В разделе **Атрибуты пользователя** выберите уникальный идентификатор пользователя в раскрывающемся списке **Идентификатор пользователя**. Выбранный параметр должен соответствовать ожидаемому значению для проверки подлинности пользователя в приложении.

   >[!NOTE]
   >Azure AD выбирает формат атрибута NameID (идентификатор пользователя) на основе выбранного значения или формата, который был запрошен приложением в запросе проверки подлинности SAML. Дополнительные сведения см. в разделе NameIDPolicy статьи [Протокол единого входа SAML](https://docs.microsoft.com/azure/active-directory/develop/active-directory-single-sign-on-protocol-reference#authnrequest).
   >
   >

9. Чтобы добавить атрибуты пользователя, щелкните **Просмотреть и изменить все другие атрибуты пользователей**, чтобы изменить атрибуты, которые будут отправлены приложению в токене SAML при входе пользователей в систему.

   Чтобы добавить атрибут, выполните указанные ниже действия.

   1. Нажмите кнопку **Добавить атрибут**. Введите **Имя** и выберите **Значение** из раскрывающегося списка.

   2. Нажмите кнопку **Сохранить**. Новый атрибут появится в таблице.

## <a name="download-the-azure-ad-metadata-or-certificate"></a>Скачивание метаданных Azure AD или сертификата

Чтобы скачать метаданные приложения или сертификат в Azure AD, выполните следующие действия:

1. Откройте [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или **соадминистратор**.

2. Откройте **расширение Azure Active Directory**, щелкнув **Все службы** в верхней части главного меню навигации слева.

3. В поле фильтра поиска введите **Azure Active Directory** и выберите элемент **Azure Active Directory**.

4. В меню навигации Azure Active Directory слева выберите **Корпоративные приложения**.

5. Щелкните **Все приложения**, чтобы открыть полный список приложений.

   * Если нужное приложение отсутствует в списке, воспользуйтесь элементом управления **Фильтр** в верхней части списка **Все приложения**, указав в нем для параметра **Показать** значение **Все приложения**.

6. Выберите приложение, для которого был настроен единый вход.

7. После загрузки приложения выберите пункт **Единый вход** в меню навигации этого приложения слева.

8. Перейдите в раздел **Сертификат подписи SAML** и выберите значение в столбце **Скачать**. В зависимости от того, что именно требуется для настройки единого входа, вы сможете скачать XML-файл метаданных или сертификат.

Azure AD также предоставляет URL-адрес для получения метаданных. Следуйте этому шаблону, чтобы получить URL-адреса метаданных для приложения: `https://login.microsoftonline.com/<Directory ID>/federationmetadata/2007-06/federationmetadata.xml?appid=<Application ID>`.

## <a name="assign-users-to-the-application"></a>Назначение пользователей для приложения

Чтобы напрямую назначить одного или нескольких пользователей для приложения, выполните указанные ниже действия.

1. Откройте [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор**.

2. Откройте **расширение Azure Active Directory**, щелкнув **Все службы** в верхней части главного меню навигации слева.

3. В поле фильтра поиска введите **Azure Active Directory** и выберите элемент **Azure Active Directory**.

4. В меню навигации Azure Active Directory слева выберите **Корпоративные приложения**.

5. Щелкните **Все приложения**, чтобы открыть полный список приложений.

   * Если нужное приложение отсутствует в списке, в верхней части списка **Все приложения** воспользуйтесь элементом управления **Фильтр**, указав в нем для параметра **Показать** значение **Все приложения**.

6. Выберите из списка приложение, которое необходимо назначить пользователю.

7. После загрузки приложения в меню навигации слева щелкните **Пользователи и группы**.

8. В верхней части списка **Пользователи и группы** нажмите кнопку **Добавить**, чтобы открыть область **Добавление назначения**.

9. В области **Добавление назначения** щелкните **Пользователи и группы**.

10. В поле поиска **Поиск по имени или адресу электронной почты** введите **полное имя** или **адрес электронной почты** пользователя, которого требуется назначить.

11. Наведите указатель мыши на **пользователя** в списке, чтобы отобразить **флажок**. Чтобы добавить пользователя в список **Выбрано**, установите флажок рядом с фотографией или логотипом профиля этого пользователя.

12. **Необязательно**. Если вы хотите **добавить более одного пользователя**, в поле **Поиск по имени или адресу электронной почты** введите **полное имя** или **адрес электронной почты** другого пользователя и установите флажок, чтобы добавить этого пользователя в список **Выбрано**.

13. Выбрав всех пользователей, щелкните **Выбрать**, чтобы добавить их в список пользователей и групп, которые будут назначены для приложения.

14. **Необязательно.** В области **Добавление назначения** щелкните **Выбор ролей**, чтобы выбрать роль, которая будет назначена указанным пользователям.

15. Нажмите кнопку **Назначить**, чтобы назначить приложение выбранным пользователям.

Через некоторое время выбранные пользователи смогут запускать эти приложения с помощью методов, приведенных в описании решения.

## <a name="customizing-the-saml-claims-sent-to-an-application"></a>Настройка утверждений SAML, отправляемых в приложение

Чтобы узнать, как настроить утверждения атрибута SAML, отправляемые в приложение, ознакомьтесь с разделом [Сопоставление утверждений в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-claims-mapping).

## <a name="next-steps"></a>Дальнейшие действия
[Реализация единого входа в приложения с помощью прокси приложения](application-proxy-configure-single-sign-on-with-kcd.md)
