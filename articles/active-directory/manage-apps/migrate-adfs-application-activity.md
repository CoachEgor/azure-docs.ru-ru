---
title: Используйте отчет о действиях для перемещения приложений AD FS в Active Directory Azure Документы Microsoft Docs
description: Отчет о деятельности приложений «Активная система каталогов» (AD FS) позволяет быстро перенести приложения из AD FS в Active Directory Azure (Azure AD). Этот инструмент миграции для AD FS определяет совместимость с Azure AD и дает руководство по миграции.
services: active-directory
author: msmimart
manager: CelesteDG
ms.service: active-directory
ms.subservice: app-mgmt
ms.topic: conceptual
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.date: 01/14/2019
ms.author: mimart
ms.collection: M365-identity-device-management
ms.openlocfilehash: 333e440fdd5f5062dda45fb12a83543c63e66c04
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "75978038"
---
# <a name="use-the-ad-fs-application-activity-report-preview-to-migrate-applications-to-azure-ad"></a>Используйте отчет о деятельности приложения AD FS (предварительный просмотр) для переноса приложений в Azure AD

Многие организации используют службы Active Directory Federation Services (AD FS) для предоставления единых приложений для регистрации в облаке. Перенос приложений AD FS в Azure AD для проверки подлинности имеет значительные преимущества, особенно с точки зрения управления затратами, управления рисками, производительности, соответствия и управления. Но понимание того, какие приложения совместимы с Azure AD, и определение конкретных шагов миграции может занять много времени.

Отчет о деятельности приложения DD FS (предварительный просмотр) на портале Azure позволяет быстро определить, какие из ваших приложений могут быть перенесены в Azure AD. Он оценивает все приложения AD FS для совместимости с Azure AD, проверяет любые проблемы и дает рекомендации по подготовке отдельных приложений для миграции. С отчетом о деятельности приложения AD FS вы можете:

* **Откройте для себя приложения AD FS и сферу миграции.** Отчет о деятельности приложения AD FS перечисляет все приложения AD FS в вашей организации и указывает их готовность к миграции в Azure AD.
* **Приоритетное применение для миграции.** Получите количество уникальных пользователей, которые зарегистрировались в приложении за последние 1, 7 или 30 дней, чтобы определить критичность или риск миграции приложения.
* **Выполнить миграционные тесты и устранить проблемы.** Служба отчетности автоматически выполняет тесты, чтобы определить, готово ли приложение к миграции. Результаты отображаются в отчете о деятельности приложения AD FS как статус миграции. Если будут выявлены потенциальные проблемы миграции, вы получите конкретные рекомендации о том, как решить эти проблемы.

Данные активности приложения AD FS доступны пользователям, которым присваивается любая из этих ролей администратора: глобальный администратор, читатель отчетов, читатель безопасности, администратор приложений или администратор облачных приложений.

## <a name="prerequisites"></a>Предварительные требования

* Ваша организация должна в настоящее время использовать AD FS для доступа к приложениям.
* Здоровье подключения Azure AD должно быть включено в вашем наниматель Azure AD.
   * [Узнайте больше о здоровье подключения Конъюсью Azure AD](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-health-adfs)
   * [Начало настройки azure AD Connect Health](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-health-agent-install)

## <a name="discover-ad-fs-applications-that-can-be-migrated"></a>Откройте для себя приложения AD FS, которые могут быть перенесены 

Отчет о деятельности приложения AD FS доступен на портале Azure под **& отчетов об информации.** Отчет о деятельности приложения AD FS анализирует каждое приложение AD FS, чтобы определить, можно ли его перенести как есть, или если необходим дополнительный обзор. 

1. Войти на [портал Azure](https://portal.azure.com) с ролью администратора, который имеет доступ к данным деятельности приложения AD FS (глобальный администратор, читатель отчетов, читатель безопасности, администратор приложений или администратор облачных приложений).

2. Выберите **Активный каталог Azure,** а затем выберите **приложения Enterprise.**

3. В соответствии с **activity,** выберите **Использование & Исследования (Предварительный просмотр)**, а затем выберите **AD FS приложения деятельности,** чтобы открыть список всех приложений AD FS в вашей организации.

   ![Активность применения AD FS](media/migrate-adfs-application-activity/adfs-application-activity.png)

4. Для каждого приложения в списке действий приложения AD FS просмотрите **статус Миграции:**

   * **Готовность к миграции** означает, что конфигурация приложения AD FS полностью поддерживается в Azure AD и может быть перенесена как есть.

   * **Проверка потребностей** означает, что некоторые параметры приложения могут быть перенесены в Azure AD, но необходимо просмотреть параметры, которые не могут быть перенесены как есть.

   * **Необходимы дополнительные шаги** означает, что Azure AD не поддерживает некоторые настройки приложения, поэтому приложение не может быть перенесено в его текущем состоянии.

## <a name="evaluate-the-readiness-of-an-application-for-migration"></a>Оценить готовность приложения к миграции 

1. В списке действий приложения AD FS щелкните статус в столбце **состояния миграции,** чтобы открыть данные о миграции. Вы увидите резюме тестов конфигурации, которые прошли, а также любые потенциальные проблемы миграции.

   ![Сведения о переносе](media/migrate-adfs-application-activity/migration-details.png)

2. Нажмите на сообщение, чтобы открыть дополнительные сведения о правилах миграции. Полный список проверенных свойств можно узнать в таблице [тестов конфигурации конфигурации приложения AD FS](#ad-fs-application-configuration-tests) ниже.

   ![Детали правила миграции](media/migrate-adfs-application-activity/migration-rule-details.png)

### <a name="ad-fs-application-configuration-tests"></a>Тесты конфигурации приложений DD FS

В следующей таблице перечислены все тесты конфигурации, выполняемые в приложениях AD FS.

|Результат  |Пасс/Предупреждение/Сбой  |Описание  |
|---------|---------|---------|
|Тест-ADFSRPAdditionalAuthenticationПравила <br> Для дополнительнойподлинности было обнаружено по крайней мере одно немиграционное правило.       | Пасс/Предупреждение          | У полагающейся стороны есть правила, побуждающие к многофакторной аутентификации (MFA). Чтобы перейти на Azure AD, переведите эти правила в политики условного доступа. Если вы используете предприимченные МИД, мы рекомендуем вам перейти на Azure MFA. [Подробнее об условном доступе](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks).        |
|Тест-ADFSRPAdditionalWSFedendpoint <br> Опираясь на сторону имеет ДополнительныеWSFedEndpoint установить на верное.       | Успех или сбой.          | Опираясь стороны в AD FS позволяет несколько WS-Fed утверждение конечных точек.В настоящее время Azure AD поддерживает только один.Если у вас есть сценарий, при котором этот результат блокирует миграцию, [сообщите нам об этом.](https://feedback.azure.com/forums/169401-azure-active-directory/suggestions/38695621-allow-multiple-ws-fed-assertion-endpoints)     |
|Тест-ADFSRPAllowedAuthenticationClassСсылки <br> Relying Party установила AllowedAuthenticationClassСсылки.       | Успех или сбой.          | Эта настройка в AD FS позволяет указать, настроено ли приложение только для разрешений определенных типов аутентификации. Для достижения этой возможности мы рекомендуем использовать Условный доступ. Если у вас есть сценарий, при котором этот результат блокирует миграцию, [сообщите нам об этом.](https://feedback.azure.com/forums/169401-azure-active-directory/suggestions/38695672-allow-in-azure-ad-to-specify-certain-authentication)  [Подробнее об условном доступе](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks).          |
|Тест-ADFSRPВсегдаТребуетаутавентация <br> ВсегдаТребуетАутасточнаяПроверкаРезультат      | Успех или сбой.          | Эта настройка в AD FS позволяет указать, настроено ли приложение на нейконпромирование файлов SSO и **всегда подсказывая для аутентификации.** В Azure AD можно управлять сеансом проверки подлинности, используя политики условного доступа для достижения аналогичного поведения. [Подробнее о настройке управления сеансами проверки подлинности с помощью условия доступа.](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-conditional-access-session-lifetime)          |
|Тест-ADFSRPAutoUpdate <br> Опираясь сторона имеет AutoUpdateEnabled набор к истине       | Пасс/Предупреждение          | Эта настройка в AD FS позволяет указать, настроен атакжем dD FS для автоматического обновления приложения на основе изменений в метаданных федерации. Azure AD не поддерживает это сегодня, но не должен блокировать миграцию приложения в Azure AD.           |
|Тест-ADFSRPClaimsProvidername <br> Relying Party имеет несколько поставщиков претензий включен       | Успех или сбой.          | Эта настройка в AD FS выдает поставщиков идентификационных данных, от которых полагаемец принимает претензии. В Azure AD можно включить внешнюю совместную работу с помощью Azure AD B2B. [Узнайте больше о Azure AD B2B](https://docs.microsoft.com/azure/active-directory/b2b/what-is-b2b).          |
|Тест-ADFSRPDelegationАвторизацияПравила      | Успех или сбой.          | Приложение имеет пользовательские правила авторизации делегирования определены. Это концепция WS-Trust, которую Azure AD поддерживает с помощью современных протоколов аутентификации, таких как OpenID Connect и OAuth 2.0. [Узнайте больше о платформе идентификации Майкрософт](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc).          |
|Тест-ADFSRPImpersonAuthorizationПравила       | Пасс/Предупреждение          | Приложение имеет пользовательские правила авторизации олицетворения определены.Это концепция WS-Trust, которую Azure AD поддерживает с помощью современных протоколов аутентификации, таких как OpenID Connect и OAuth 2.0. [Узнайте больше о платформе идентификации Майкрософт](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc).          |
|Тест-ADFSRPIssuanceAuthorizationAuthorization <br> Для выдачи Авторизации было обнаружено по крайней мере одно немиграционное правило.       | Пасс/Предупреждение          | Приложение имеет пользовательские правила авторизации выдачи, определенные в AD FS.Azure AD поддерживает эту функциональность с помощью условного доступа Azure AD. [Подробнее об условном доступе](https://docs.microsoft.com/azure/active-directory/conditional-access/overview). <br> Вы также можете ограничить доступ к приложению пользователем или группами, назначенными приложению. [Подробнее о назначении пользователей и групп для доступа к приложениям.](https://docs.microsoft.com/azure/active-directory/manage-apps/methods-for-assigning-users-and-groups)            |
|Тест-ADFSRPIssuanceTransformПравила <br> Для Выдачи было обнаружено по крайней мере одно немиграционное правило.       | Пасс/Предупреждение          | Приложение имеет пользовательские правила преобразования выдачи, определенные в AD FS. Azure AD поддерживает настройку требований, выданных в токене. Чтобы узнать больше, [см. Например, в токене SAML для корпоративных приложений.](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization)           |
|Тест-ADFSRPMonitoring <br> Опираясь сторона имеет MonitoringEnabled установить на верное.       | Пасс/Предупреждение          | Эта настройка в AD FS позволяет указать, настроен атакжем dD FS для автоматического обновления приложения на основе изменений в метаданных федерации. Azure AD не поддерживает это сегодня, но не должен блокировать миграцию приложения в Azure AD.           |
|Тест-ADFSRPNotbeforeskew <br> НедоSkewCheckResult      | Пасс/Предупреждение          | AD FS позволяет перекос времени на основе Недо и NotOnOrAfter раз в токене SAML. Azure AD автоматически обрабатывает это по умолчанию.          |
|Тест-ADFSRPRequestMFAFromClaimsProviders <br> Опираясь сторона имеет RequestMFAFromClaimsProviders установить на верно.       | Пасс/Предупреждение          | Эта настройка в AD FS определяет поведение МИД, когда пользователь приходит от другого поставщика требований. В Azure AD можно включить внешнюю совместную работу с помощью Azure AD B2B. Затем можно применить политики условного доступа для защиты гостевого доступа. Узнайте больше о [Azure AD B2B](https://docs.microsoft.com/azure/active-directory/b2b/what-is-b2b) и [условном доступе.](https://docs.microsoft.com/azure/active-directory/conditional-access/overview)          |
|Тест-ADFSRPПроягываемыеЗапросыТребуется <br> Опираясь сторона подписалаSamlRequestsRequired набор к истине       | Успех или сбой.          | Приложение настроено в AD FS для проверки подписи в запросе SAML. Azure AD принимает подписанный запрос SAML; однако она не будет проверять подпись. Azure AD имеет различные методы защиты от вредоносных вызовов. Например, Azure AD использует URL-адреса ответа, настроенные в приложении, для проверки запроса SAML. Azure AD отправит только токен для ответа на URL-адреса, настроенные для приложения. Если у вас есть сценарий, при котором этот результат блокирует миграцию, [сообщите нам об этом.](https://feedback.azure.com/forums/169401-azure-active-directory/suggestions/13394589-saml-signature)          |
|Тест-ADFSRPTokenПова <br> ТокенПовиюлCheckResult        | Пасс/Предупреждение         | Приложение настроено для пользовательского срока службы маркеров. По умолчанию AD FS составляет один час.Azure AD поддерживает эту функциональность с помощью условия доступа. Чтобы узнать больше, [см. Накончать управление сеансом проверки подлинности с помощью условия доступа.](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-conditional-access-session-lifetime)          |
|Relying Party настроена на шифрование утверждений. Это поддерживается Azure AD       | Успех          | С помощью Azure AD можно шифровать токен, отправленный в приложение. Чтобы узнать больше, смотрите [Нанастройка Azure AD SAML токен шифрования](https://docs.microsoft.com/azure/active-directory/manage-apps/howto-saml-token-encryption).          |
|ЗашифрованоИмяIdRequiredCheckResult      | Успех или сбой.          | Приложение настроено для шифрования претензии nameID в токене SAML.С помощью Azure AD можно шифровать весь токен, отправленный в приложение.Шифрование конкретных требований пока не поддерживается. Чтобы узнать больше, смотрите [Нанастройка Azure AD SAML токен шифрования](https://docs.microsoft.com/azure/active-directory/manage-apps/howto-saml-token-encryption).         |

## <a name="check-the-results-of-claim-rule-tests"></a>Проверка результатов тестов правил претензий

Если вы настроили правило претензии для приложения в AD FS, опыт предоставит детальный анализ для всех правил претензии. Вы увидите, какие правила претензий могут быть перемещены в Azure AD и какие из них нуждаются в дальнейшем рассмотрении.

1. В списке действий приложения AD FS щелкните статус в столбце **состояния миграции,** чтобы открыть данные о миграции. Вы увидите резюме тестов конфигурации, которые прошли, а также любые потенциальные проблемы миграции.

2. На странице **сведения о правилах миграции** расширьте результаты, чтобы показать подробную информацию о потенциальных проблемах миграции и получить дополнительные рекомендации. Подробный список всех проверенных правил [Check the results of claim rule tests](#check-the-results-of-claim-rule-tests) претензий см.

   В приведенном ниже примере показаны сведения о правилах миграции для правила Выдачи. В нем перечислены конкретные части утверждения, которые необходимо просмотреть и адресовать, прежде чем перенести приложение в Azure AD.

   ![Правило миграции подробно дополнительные рекомендации](media/migrate-adfs-application-activity/migration-rule-details-guidance.png)

### <a name="claim-rule-tests"></a>Тесты правил претензий

В следующей таблице перечислены все тесты правил претензий, выполняемые в приложениях AD FS.

|Свойство  |Описание  |
|---------|---------|
|UNSUPPORTED_CONDITION_PARAMETER      | В заявлении состояния используются обычные выражения для оценки соответствия утверждения определенному шаблону.Для достижения аналогичной функциональности в Azure AD можно использовать заранее определенные преобразования, такие как IfEmpty(), StartWith(), Содержит (), среди других. Для получения дополнительной информации [см.](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization)          |
|UNSUPPORTED_CONDITION_CLASS      | Заявление состояния имеет несколько условий, которые необходимо оценить перед запуском выписки.Azure AD может поддерживать эту функциональность с функциями преобразования претензии, где можно оценить несколько значений претензий.Для получения дополнительной информации [см.](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization)          |
|UNSUPPORTED_RULE_TYPE      | Правило претензии не может быть признано. Для получения дополнительной информации о том, как [Customize claims issued in the SAML token for enterprise applications](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization)настроить требования в Azure AD, см.          |
|CONDITION_MATCHES_UNSUPPORTED_ISSUER      | В отчете условие используется эмитент, который не поддерживается в Azure AD.В настоящее время Azure AD не получает претензий от магазинов, отличаемых active Directory или Azure AD. Если это блокирует перенос приложений в Azure AD, [сообщите нам об этом.](https://feedback.azure.com/forums/169401-azure-active-directory/suggestions/38695717-allow-to-source-user-attributes-from-external-dire)         |
|UNSUPPORTED_CONDITION_FUNCTION      | В отчете состояния используется агрегированная функция для выдачи или добавления одной претензии независимо от количества совпадений.В Azure AD можно оценить атрибут пользователя, чтобы решить, какое значение использовать для претензии с такими функциями, как IfEmpty(), StartWith(), Содержит (), среди других.Для получения дополнительной информации [см.](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization)          |
|RESTRICTED_CLAIM_ISSUED      | В отчете условие используется утверждение, ограниченное в Azure AD. Вы можете выдать ограниченное требование, но вы не можете изменить ее источник или применить какие-либо преобразования. Для получения дополнительной информации см. [Настраиваемые утверждения, испускаемые в токенах для конкретного приложения в Azure AD.](https://docs.microsoft.com/azure/active-directory/develop/active-directory-claims-mapping)          |
|EXTERNAL_ATTRIBUTE_STORE      | В выписке используется хранилище атрибутов, отличающиеся от Active Directory. В настоящее время Azure AD не получает претензий от магазинов, отличаемых active Directory или Azure AD. Если этот результат блокирует перенос приложений в Azure AD, [сообщите нам об этом.](https://feedback.azure.com/forums/169401-azure-active-directory/suggestions/38695717-allow-to-source-user-attributes-from-external-dire)          |
|UNSUPPORTED_ISSUANCE_CLASS      | В выписке используется ADD для добавления претензий к набору входящих претензий. В Azure AD это может быть настроено как несколько преобразований претензий.Для получения дополнительной информации [см.](https://docs.microsoft.com/azure/active-directory/develop/active-directory-claims-mapping)         |
|UNSUPPORTED_ISSUANCE_TRANSFORMATION      | В выписке используются регулярные выражения для преобразования значения претензии, которая должна быть излучена.Для достижения аналогичной функциональности в Azure AD можно использовать заранее определенные преобразования, такие как Extract(), Trim(), ToLower и другие. Для получения дополнительной информации [см.](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization)          |


## <a name="next-steps"></a>Дальнейшие действия

- [Видео: Как использовать отчет о деятельности AD FS для переноса приложения](https://www.youtube.com/watch?v=OThlTA239lU)
- [Управление приложениями с помощью активного каталога Azure](what-is-application-management.md)
- [Управление доступом к приложениям](what-is-access-management.md)
- [Федерация Azure AD Connect](../hybrid/how-to-connect-fed-whatis.md)
