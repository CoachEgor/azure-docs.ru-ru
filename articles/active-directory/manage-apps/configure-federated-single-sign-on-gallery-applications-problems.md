---
title: Проблема при настройке федеративного единого входа для приложения из коллекции Azure AD | Документы Майкрософт
description: В этой статье приводятся решения распространенных проблем, которые могут возникнуть при настройке федеративного единого входа с использованием SAML для приложений, которые присутствуют в коллекции приложений Azure AD.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 07/11/2017
ms.author: mimart
ms.collection: M365-identity-device-management
ms.openlocfilehash: 554fb73ea7bf4f866eda3e9f3d629f871cb5e582
ms.sourcegitcommit: 36c50860e75d86f0d0e2be9e3213ffa9a06f4150
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/16/2019
ms.locfileid: "65781164"
---
# <a name="problem-configuring-federated-single-sign-on-for-an-azure-ad-gallery-application"></a>Проблема при настройке федеративного единого входа для приложения из коллекции Azure AD

Если при настройке приложения возникла проблема, выполните следующие действия. Убедитесь, что выполнены все шаги в учебнике по приложению. В конфигурации приложения имеется встроенная документация по настройке приложения. Кроме того, подробное пошаговое руководство можно найти в [списке учебников по интеграции приложений SaaS с Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-saas-tutorial-list/).

## <a name="cant-add-another-instance-of-the-application"></a>Невозможно добавить другой экземпляр приложения

Чтобы добавить второй экземпляр приложения, нужно выполнить следующие действия:

-   Настроить уникальный идентификатор для второго экземпляра. Вы не сможете использовать тот же идентификатор, что и у первого экземпляра.

-   Настроить другой сертификат для второго экземпляра.

Если приложение не поддерживает перечисленные выше действия, вы не сможете настроить второй экземпляр.

## <a name="cant-add-the-identifier-or-the-reply-url"></a>Не удается добавить идентификатор или URL-адрес ответа

Если вы не можете настроить идентификатор или URL-адрес ответа, убедитесь, что их значения соответствуют шаблонам, предварительно настроенным для приложения.

Чтобы узнать предварительно настроенные шаблоны, сделайте следующее:

1. Откройте [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или **соадминистратор**. Перейдите к шагу 7. Если вы уже находитесь в колонке настройки приложения в Azure AD.

2. Откройте **расширение Azure Active Directory**, щелкнув **Все службы** в верхней части главного меню навигации слева.

3. В поле фильтра поиска введите **Azure Active Directory** и выберите элемент **Azure Active Directory**.

4. В меню навигации Azure Active Directory слева выберите **Корпоративные приложения**.

5. Щелкните **Все приложения**, чтобы открыть полный список приложений.

   * Если нужное приложение отсутствует в списке, в верхней части списка **Все приложения** воспользуйтесь элементом управления **Фильтр**, указав в нем для параметра **Показать** значение **Все приложения**.

6. Выберите приложение, для которого нужно настроить единый вход.

7. После загрузки приложения выберите пункт **Единый вход** в меню навигации этого приложения слева.

8. В раскрывающемся списке **Режим** выберите пункт **Вход на основе SAML**.

9. Перейдите в текстовое поле **Идентификатор** или **URL-адрес ответа** в разделе **Домены и URL-адреса приложения**.

10. Узнать поддерживаемые шаблоны для приложения можно тремя способами:

    * В текстовом поле поддерживаемые шаблоны отображаются в виде заполнителя, *например,*  <https://contoso.com>.

    * Если шаблон не поддерживается, при попытке ввести значение в текстовом поле появляется красный восклицательный знак. Если навести на него указатель мыши, отображаются поддерживаемые шаблоны.

    * В этом учебнике для приложения также можно получить сведения о поддерживаемых шаблонах. В разделе **Настройка единого входа Azure AD**. Перейдите к шагу для настройки значений в разделе **Домены и URL-адреса приложения**.

Если значения не совпадают с шаблонами, предварительно настроенными в Azure AD. Вы можете:

-   Обратитесь к поставщику приложения, чтобы получить значения, соответствующие предварительно настроенному шаблону в Azure AD

-   Кроме того, вы можете обратиться в группу разработчиков Azure AD по адресу <aadapprequest@microsoft.com> или оставить комментарий в руководстве, чтобы запросить обновление поддерживаемых шаблонов для приложения.

## <a name="where-do-i-set-the-entityid-user-identifier-format"></a>Можно ли изменить формат идентификатора EntityID (идентификатора пользователя)?

Вы не можете изменить формат EntityID (идентификатора пользователя), который Azure AD отправляет приложению после проверки подлинности пользователя.

Azure AD выбирает формат атрибута NameID (идентификатор пользователя) на основе выбранного значения или формата, который был запрошен приложением в запросе проверки подлинности SAML. Дополнительные сведения см. в разделе "NameIDPolicy" статьи [Протокол единого входа SAML](https://docs.microsoft.com/azure/active-directory/develop/active-directory-single-sign-on-protocol-reference#authnrequest).

## <a name="cant-find-the-azure-ad-metadata-to-complete-the-configuration-with-the-application"></a>Не удается найти метаданные Azure AD для завершения настройки в приложении

Чтобы скачать метаданные приложения или сертификат из Azure AD, сделайте следующее:

1. Откройте [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или **соадминистратор**.

2. Откройте **расширение Azure Active Directory**, щелкнув **Все службы** в верхней части главного меню навигации слева.

3. В поле фильтра поиска введите **Azure Active Directory** и выберите элемент **Azure Active Directory**.

4. В меню навигации Azure Active Directory слева выберите **Корпоративные приложения**.

5. Щелкните **Все приложения**, чтобы открыть полный список приложений.

   * Если нужное приложение отсутствует в списке, воспользуйтесь элементом управления **Фильтр** в верхней части списка **Все приложения**, указав в нем для параметра **Показать** значение **Все приложения**.

6. Выберите приложение, для которого был настроен единый вход.

7. После загрузки приложения выберите пункт **Единый вход** в меню навигации этого приложения слева.

8. Перейдите в раздел **Сертификат подписи SAML** и выберите значение в столбце **Скачать**. В зависимости от того, что именно требуется для настройки единого входа, вы сможете скачать XML-файл метаданных или сертификат.

Azure AD не предоставляет URL-адреса для получения метаданных. Метаданные можно скачать только в виде XML-файла.

## <a name="dont-know-how-to-customize-saml-claims-sent-to-an-application"></a>Не знаете, как настроить утверждения SAML, отправляемые в приложение

Чтобы узнать, как настроить атрибут утверждений SAML, отправляемых в приложение, ознакомьтесь с разделом [Сопоставление утверждений в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-claims-mapping).

## <a name="next-steps"></a>Дальнейшие действия
[Управление приложениями с помощью Azure Active Directory](what-is-application-management.md)
