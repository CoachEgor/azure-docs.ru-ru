---
title: Управление сертификатами федерации в Azure AD | Документация Майкрософт
description: Узнайте, как настроить срок действия сертификатов федерации, а также обновлять сертификаты с истекающим сроком действия.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 04/04/2019
ms.author: mimart
ms.reviewer: jeedes
ms.collection: M365-identity-device-management
ms.openlocfilehash: de60dc5095ce4ab4d0219a388c445b08f544e1f9
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77159035"
---
# <a name="manage-certificates-for-federated-single-sign-on-in-azure-active-directory"></a>Управление сертификатами для федеративного единого входа в Azure Active Directory

В этой статье мы рассмотрим общие вопросы и информацию, связанные с сертификатами, которые создает Azure Active Directory (Azure AD) для установления федеративных единых подписей (SSO) для вашего программного обеспечения в качестве сервисных приложений (SaaS). Эти приложения можно добавить из коллекции приложений Azure AD или с помощью шаблона приложения не из коллекции. Настройте приложение для федеративного единого входа.

Эта статья актуальна только для приложений, настроенных на использование Azure AD SSO через федерацию [языка цензуры безопасности](https://wikipedia.org/wiki/Security_Assertion_Markup_Language) (SAML).

## <a name="auto-generated-certificate-for-gallery-and-non-gallery-applications"></a>Автоматически созданный сертификат для приложений из коллекции и не из коллекции

При добавлении нового приложения из галереи и настройке знака на основе SAML (путем выбора **единого указателя** > **SAML** со страницы обзора приложения) Azure AD генерирует сертификат для приложения, который действителен в течение трех лет. Чтобы загрузить активный сертификат в качестве сертификата безопасности **(файл .cer),** вернитесь на эту страницу **(SAML-на основе знака)** и выберите ссылку на загрузку в заголовке **сертификата подписки SAML.** Вы можете выбрать между необработанным (двоичным) сертификатом или сертификатом Base64 (базовый 64-кодированный текст). Для приложений галереи в этом разделе также может отображаться ссылка для загрузки сертификата в качестве метаданных федерации XML (файл **.xml),** в зависимости от требования приложения.

![SAML активные варианты загрузки сертификата подписания](./media/manage-certificates-for-federated-single-sign-on/active-certificate-download-options.png)

Вы также можете скачать активный или неактивный сертификат, выбрав значок **EDit** **Сертификата SAML** (карандаш), который отображает страницу **сертификата подписи SAML.** Выберите эллипсис **(...**) рядом с сертификатом, который вы хотите загрузить, а затем выберите формат сертификата, который вы хотите. У вас есть дополнительная опция для загрузки сертификата в формате почты с улучшенным расширением конфиденциальности (PEM). Этот формат идентичен Base64, но с расширением имени файла **.pem,** которое не признается в Windows в качестве формата сертификата.

![Варианты загрузки сертификата SAML (активные и неактивные)](./media/manage-certificates-for-federated-single-sign-on/all-certificate-download-options.png)

## <a name="customize-the-expiration-date-for-your-federation-certificate-and-roll-it-over-to-a-new-certificate"></a>Настройка даты окончания срока действия сертификата федерации и его замена новым сертификатом

По умолчанию Azure настраивает сертификат, срок действия сертификата истекает через три года, когда он автоматически создается во время конфигурации одного знака SAML. Поскольку вы не можете изменить дату сертификата после его сохранения, вы должны:

1. Создайте новый сертификат с желаемой датой.
1. Сохранить новый сертификат.
1. Скачать новый сертификат в правильном формате.
1. Загрузите новый сертификат в приложение.
1. Сделайте новый сертификат активным на портале Active Directory Azure.

Следующие два раздела помогут вам выполнить эти шаги.

### <a name="create-a-new-certificate"></a>Создание нового сертификата

Во-первых, создать и сохранить новый сертификат с другим сроком действия:

1. Вопием на [портале Active Directory Azure](https://aad.portal.azure.com/). Отображается страница **центра adin-центра Azure Active Directory.**
1. В области слева выберите **Корпоративные приложения**. Отображается список корпоративных приложений в вашей учетной записи.
1. Выберите пострадавшее приложение. Отображается страница обзора приложения.
1. В левой панели страницы обзора приложения выберите **Единый подсобный знак.**
1. Если отображается **страница «Выбрать одну страницу метода регистрации»,** выберите **SAML**.
1. В **настройке одноразового регистра с SAML - Предварительный** просмотр страницы, найти **SAML Подпись Сертификат** заголовок и выберите значок **edit** (карандаш). Появляется страница **сертификата подписи SAML,** на которой отображается статус **(активный** или **неактивный),** срок действия и отпечаток пальца (хэш-строка) каждого сертификата.
1. Выберите **новый сертификат**. Новый ряд отображается ниже списка сертификатов, где срок действия по умолчанию составляет ровно три года после текущей даты. (Ваши изменения еще не сохранены, так что вы все еще можете изменить дату истечения.)
1. В новой строке сертификата нависнетнадие над столбцом даты истечения срока действия и выберите значок **«Выберите дату»** (календарь). Отображается элемент управления календаря, отображающий дни месяца текущего срока действия новой строки.
1. Используйте элемент управления календаря, чтобы установить новую дату. Можно установить любую дату между текущей датой и тремя годами после текущей даты.
1. Нажмите кнопку **Сохранить**. Новый сертификат теперь отображается со статусом **Inactive,** сроком действия, который вы выбрали, и отпечатком пальца.
1. Выберите **X,** чтобы вернуться к **настройке одноразового регистра с SAML - Предварительная** страница.

### <a name="upload-and-activate-a-certificate"></a>Загрузить и активировать сертификат

Затем загрузите новый сертификат в правильном формате, загрузите его в приложение и сделайте его активным в Active Directory Azure:

1. Просмотр дополнительных инструкций по настройке SAML приложения:

   - Выбор ссылки **руководства по конфигурации** для просмотра в отдельном окне или вкладке браузера или
   - Переход к **настройке** заголовка и выбор **пошаговые инструкции View** для просмотра в боковой панели.

1. В инструкциях обратите внимание на формат кодирования, необходимый для загрузки сертификата.
1. Следуйте инструкциям в [автоматическом сертификате для галерейных и негалерейных приложений](#auto-generated-certificate-for-gallery-and-non-gallery-applications) ранее. Этот шаг загружает сертификат в формате кодирования, необходимом для загрузки приложением.
1. Если вы хотите перейти на новый сертификат, вернитесь на страницу **сертификата подписи SAML,** а в недавно сохраненной строке сертификата выберите эллипсис **(...)** и выберите **Сделать сертификат активным.** Статус нового сертификата изменяется на **Active,** а ранее активный сертификат изменяется в статус **неактивного.**
1. Продолжайте следовать инструкциям по настройке SAML-инструкции приложения, которые были отображены ранее, чтобы загрузить сертификат подписи SAML в правильном формате кодирования.

## <a name="add-email-notification-addresses-for-certificate-expiration"></a>Добавление адресов уведомлений по электронной почте для истечения срока действия сертификата

Azure AD отправит уведомление по электронной почте 60, 30 и 7 дней до истечения срока действия сертификата SAML. Для получения уведомлений можно добавить несколько адресов электронной почты. Чтобы указать адрес электронной почты (es), вы хотите, чтобы уведомления были отправлены по адресу:

1. На странице **samL Подписи Сертификат,** перейдите на **уведомления адреса электронной почты** заголовок. По умолчанию в этом заголовке используется только адрес электронной почты админа, который добавил приложение.
1. Ниже окончательного адреса электронной почты введите адрес электронной почты, который должен получить уведомление об истечении срока действия сертификата, а затем нажмите Enter.
1. Повторите предыдущий шаг для каждого адреса электронной почты, который вы хотите добавить.
1. Для каждого адреса электронной почты, который вы хотите удалить, выберите значок **«Удалить»** (мусорный бак) рядом с адресом электронной почты.
1. Нажмите кнопку **Сохранить**.

Вы получите сообщение электронной почты с уведомлением от aadnotification@microsoft.com. Чтобы избежать отправки электронной почты в ваше местоспа, добавьте это письмо к вашим контактам.

## <a name="renew-a-certificate-that-will-soon-expire"></a>Обновление сертификата с истекающим сроком действия

Если срок действия сертификата истекает, его можно продлить с помощью процедуры, которая не приводит к значительному простою пользователей. Для продления истекающего сертификата:

1. Следуйте инструкциям в разделе [Создать новый сертификат](#create-a-new-certificate) ранее, используя дату, которая перекрывается с существующим сертификатом. Эта дата ограничивает количество простоев, вызванных истечением срока действия сертификата.
1. Если приложение может автоматически пролонгировать сертификат, установите новый сертификат в действие, выдыхая следующие действия:
   1. Вернитесь на страницу **сертификата подписи SAML.**
   1. В недавно сохраненной строке сертификата выберите эллипсис **(...**) и выберите **Сделать сертификат активным.**
   1. Пропустите следующие два шага.

1. Если приложение может обрабатывать только один сертификат за один раз, выберите интервал простоя для выполнения следующего шага. (В противном случае, если приложение автоматически не берет новый сертификат, но может обрабатывать более одного сертификата подписи, вы можете выполнить следующий шаг в любое время.)
1. До истечения срока действия старого сертификата следуйте инструкциям в [разделе Загрузка и активируйте](#upload-and-activate-a-certificate) раздел сертификата раньше.
1. Вопием в приложении, чтобы убедиться, что сертификат работает правильно.

## <a name="related-articles"></a>Связанные статьи

- [Руководства по интеграции приложений SaaS с Azure Active Directory](../saas-apps/tutorial-list.md)
- [Управление приложениями с помощью Azure Active Directory](what-is-application-management.md)
- [Единый вход в приложениях в Azure Active Directory](what-is-single-sign-on.md)
- [Отожоблять SAML на основе одного входного вприложения для приложений в Active Directory Azure](../azuread-dev/howto-v1-debug-saml-sso-issues.md)
