---
title: Управление сертификатами федерации в Azure AD | Документация Майкрософт
description: Узнайте, как настроить срок действия сертификатов федерации, а также обновлять сертификаты с истекающим сроком действия.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 04/04/2019
ms.author: celested
ms.reviewer: jeedes
ms.collection: M365-identity-device-management
ms.openlocfilehash: 64c2d14a2aa6fc6b53260912b5bead2bd7c01e8d
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60440630"
---
# <a name="manage-certificates-for-federated-single-sign-on-in-azure-active-directory"></a>Управление сертификатами для федеративного единого входа в Azure Active Directory

В этой статье рассматриваются распространенные вопросы и сведения, связанные с сертификатами, что Azure Active Directory (Azure AD) создает для установления федеративного единого входа (SSO) программное обеспечение как услуга (SaaS) приложения. Эти приложения можно добавить из коллекции приложений Azure AD или с помощью шаблона приложения не из коллекции. Настройте приложение для федеративного единого входа.

Эта статья относится только к приложениям, которые настроены для использования единого входа Azure AD через [Security Assertion Markup Language](https://wikipedia.org/wiki/Security_Assertion_Markup_Language) федерации (SAML).

## <a name="auto-generated-certificate-for-gallery-and-non-gallery-applications"></a>Автоматически созданный сертификат для приложений из коллекции и не из коллекции

При добавлении нового приложения из коллекции и настройке на основе SAML единого входа (выбрав **единого входа** > **SAML** на странице обзора приложения), Azure AD создает сертификат для приложения, которое будет действителен в течение трех лет. Чтобы загрузить активный сертификат как сертификат безопасности (**.cer**) файл, вернитесь к этой странице (**вход на базе SAML**) и выберите ссылку для скачивания в **сертификат подписи SAML** заголовок. Можно выбрать между необработанные данные сертификата (двоичный) или сертификат Base64 (базовый 64 шифрованный текст). Для приложений из коллекции, в этом разделе также может отображать ссылку для скачивания сертификата в виде XML метаданных федерации ( **.xml** файл), в зависимости от требований приложения.

![SAML active подписи сертификата варианты загрузки](./media/manage-certificates-for-federated-single-sign-on/active-certificate-download-options.png)

Вы также можете скачать сертификат активным или неактивным, выбрав **сертификат подписи SAML** заголовка **изменить** значок (Карандаш), который отображает **сертификат подписи SAML** страницы. Нажмите кнопку с многоточием (**...** ) рядом с сертификатом, который требуется загрузить, а затем выберите какой формат сертификата требуется. У вас есть дополнительный параметр, чтобы загрузить сертификат в формат сообщений, обеспечивающего расширенную конфиденциальность (PEM). Этот формат идентичен Base64, но с **PEM-файл** файл с расширением, который не распознается в Windows как формат сертификата.

![Параметры загрузки сертификата (активные и неактивные) подписи SAML](./media/manage-certificates-for-federated-single-sign-on/all-certificate-download-options.png)

## <a name="customize-the-expiration-date-for-your-federation-certificate-and-roll-it-over-to-a-new-certificate"></a>Настройка даты окончания срока действия сертификата федерации и его замена новым сертификатом

По умолчанию Azure настраивает сертификата истекает через три года, когда он создается автоматически во время единого входа в конфигурацию SAML. Так как дата сертификата невозможно изменить после его сохранения, необходимо выполнить следующее:

1. Создайте новый сертификат с требуемой даты.
2. Сохраните новый сертификат.
3. Скачайте новый сертификат в правильном формате.
4. Загрузите новый сертификат к приложению.
5. Сделать новый сертификат активным на портале Azure Active Directory.

Со следующими двумя разделами помогают выполнять следующие действия.

### <a name="create-a-new-certificate"></a>Создать новый сертификат

Во-первых создайте и сохраните новый сертификат с другой срок действия:

1. Войдите в [портал Azure Active Directory](https://aad.portal.azure.com/). **Центр администрирования Azure Active Directory** появится страница.

2. В области слева выберите **Корпоративные приложения**. Появится список корпоративных приложений в вашей учетной записи.

3. Выберите приложение. Отображается на странице "Обзор" для приложения.

4. В области слева на странице обзора приложения выберите **единого входа**.

5. Если **выберите один метод входа** появится страница, выберите **SAML**.

6. В **задать вверх единого входа в SAML - Preview** найдите **сертификат подписи SAML** и выберите пункт **изменить** значок (Карандаш). **Сертификат подписи SAML** появится страница, которая отображает состояние (**Active** или **неактивно**), Дата окончания срока действия и отпечаток каждого сертификата (строка хэш).

7. Выберите **новый сертификат**. Появится новая строка ниже список сертификатов, где дату истечения срока действия по умолчанию используется ровно три года после текущей даты. (Изменения еще не сохранены, поэтому по-прежнему можно изменить дату истечения срока действия.)

8. В новой строке сертификата, наведите указатель мыши на столбец даты окончания срока действия и выберите **выберите дату** значок (календарь). Откроется элемент управления calendar дни месяца, новая строка текущего срока действия.

9. Задайте новую дату с помощью элемента управления календаря. Можно задать любую дату между текущей датой и три года после текущей даты.

10. Щелкните **Сохранить**. Теперь отображается новый сертификат с состоянием **неактивно**, даты окончания срока действия, которые выбрали и отпечаток.

11. Выберите **X** для возврата **задать вверх единого входа в SAML - Preview** страницы.

### <a name="upload-and-activate-a-certificate"></a>Отправка и активировать сертификат

Далее загрузите новый сертификат в правильном формате, передать его в приложение и сделать его активным в Azure Active Directory:

1. Просмотр инструкций по настройке единого входа приложения дополнительных SAML с помощью:
   - выбрав **руководство по настройке** ссылку для просмотра в отдельном окне браузера или на отдельной вкладке, или
   - собираетесь **Настройка** заголовок и выбрав **пошаговые инструкции** для просмотра в боковой панели.

2. В инструкциях Обратите внимание, формат кодирования, необходимые для отправки сертификата.

3. Следуйте инструкциям в [автоматически созданный сертификат для приложений из коллекции и не из коллекции](#auto-generated-certificate-for-gallery-and-non-gallery-applications) разделе ранее. Этот шаг загружает сертификат в формате кодирования, необходимые для передачи приложению.

4. Если вы хотите сменить новым сертификатом, вернитесь к **сертификат подписи SAML** странице и в строке только что сохраненный сертификат, нажмите кнопку с многоточием (**...** ) и выберите **сделать сертификат активным**. Состояние нового сертификата изменится на **Active**, и ранее активный сертификат изменяет статус **неактивно**.

5. По-прежнему вслед за инструкции конфигурации единого входа SAML приложения, которые отображаются ранее, таким образом, вы можете отправить подписи SAML сертификата в правильный формат кодирования.

## <a name="add-email-notification-addresses-for-certificate-expiration"></a>Добавьте адреса электронной почты уведомлений для истечение срока действия сертификата

Azure AD будет отправлять по электронной почте уведомление, 7, 30 и 60 дней до истечения срока действия сертификата SAML. Можно добавить более одного адреса электронной почты для получения уведомлений. Для указания адреса электронной почты, уведомлений, отправляемых:

1. В **сертификат подписи SAML** перейдите к странице **адреса электронной почты уведомлений** заголовок. По умолчанию этот заголовок использует только адрес электронной почты администратора, в который добавлено приложение.

2. Ниже адрес последнее сообщение электронной почты введите адрес электронной почты, который должен получать Обратите внимание, что срок действия сертификата и нажмите клавишу ВВОД.

3. Повторите предыдущий шаг для каждого адреса электронной почты, который вы хотите добавить.

4. Для каждого электронного адреса, вы хотите удалить, выберите **удалить** значок (корзины) рядом с адресом электронной почты.

5. Щелкните **Сохранить**.

Вы получите сообщение электронной почты с уведомлением от aadnotification@microsoft.com. Во избежание электронной почты, перейдя в папку нежелательной почты, добавьте этот адрес электронной почты ваших контактов.

## <a name="renew-a-certificate-that-will-soon-expire"></a>Обновление сертификата с истекающим сроком действия

Если истекает срок действия сертификата, его можно обновить с помощью процедуры, которая приводит к без значительного увеличения времени простоя для пользователей. Чтобы продлить сертификат с истекающим сроком действия:

1. Следуйте инструкциям в [создать новый сертификат](#create-a-new-certificate) разделе ранее, с помощью дату, которая перекрывается с существующим сертификатом. Эту дату ограничивает время простоя из-за истечения срока действия сертификата.

2. Если приложение может автоматической смены сертификата, сделайте новый сертификат в активный режим, выполнив следующие действия:
   1. Вернитесь к **сертификат подписи SAML** страницы.
   2. В строке только что сохраненный сертификат, нажмите кнопку с многоточием (**...** ), а затем выберите **сделать сертификат активным**.
   3. Пропустите следующие два шага.

3. Если приложение может обрабатывать одновременно только один сертификат, выберите определенный интервал времени простоя, чтобы перейти к следующему шагу. (В противном случае, если приложение не обеспечивают автоматическое использование нового сертификата, но может обрабатывать более одного сертификата для подписи, можно выполнить следующий шаг в любое время.)

4. До истечения срока действия старого сертификата, следуйте инструкциям в [отправке и активации сертификата](#upload-and-activate-a-certificate) разделе ранее.

5. Войдите в приложение, чтобы убедиться в том, что сертификат правильно работает.

## <a name="related-articles"></a>Связанные статьи

* [Руководства по интеграции приложений SaaS с Azure Active Directory](../saas-apps/tutorial-list.md)
* [Управление приложениями с помощью Azure Active Directory](what-is-application-management.md)
* [Единый вход в приложениях в Azure Active Directory](what-is-single-sign-on.md)
* [Отладка на основе SAML единого входа в приложения в Azure Active Directory](../develop/howto-v1-debug-saml-sso-issues.md)
