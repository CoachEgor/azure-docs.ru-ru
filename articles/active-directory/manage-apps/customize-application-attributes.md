---
title: Настройка сопоставлений атрибутов в Azure AD | Документация Майкрософт
description: Узнайте, что такое сопоставление атрибутов для приложений SaaS в Azure Active Directory и как настроить его в соответствии с потребностями вашего бизнеса.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 04/03/2019
ms.author: celested
ms.custom: H1Hack27Feb2017
ms.collection: M365-identity-device-management
ms.openlocfilehash: 8a2965fecd3aca17d6c4df7e49ad466377de9762
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60291693"
---
# <a name="customizing-user-provisioning-attribute-mappings-for-saas-applications-in-azure-active-directory"></a>Настройка сопоставлений атрибутов для подготовки пользователей для приложений SaaS в Azure Active Directory
Microsoft Azure AD обеспечивает поддержку для подготовки пользователей для сторонних приложений SaaS, например Salesforce, Google Apps и др. При включении подготовки пользователей для сторонних приложений SaaS, портал Azure определяет значения его атрибутов через сопоставления атрибутов.

Имеется ряд предварительно настроенных атрибутов и сопоставлений атрибутов между объектами пользователей Azure AD и каждого приложения SaaS. Некоторые приложения управляют другими типами объектов вместе с пользователями, таких как группы.

Сопоставление атрибутов по умолчанию можно настроить в соответствии с потребностями вашего бизнеса. Таким образом можно изменить или удалить существующие сопоставления атрибутов или создать новые сопоставления атрибутов.
 
## <a name="editing-user-attribute-mappings"></a>Изменение сопоставлений атрибутов пользователя

Выполните следующие действия для доступа к **сопоставления** особенностью подготовку учетных записей пользователей:

1. Войдите в [портал Azure Active Directory](https://aad.portal.azure.com).

1. Выберите **корпоративные приложения** в левой области. Отображается список всех настроенных приложений, включая приложения, которые были добавлены из коллекции.

1. Выберите любое приложение для загрузки соответствующей панели управления приложения, где можно просматривать отчеты и управление параметрами приложения.

1. Выберите **Подготовка** для управления параметрами для выбранного приложения подготовки учетной записи пользователя.

1. Разверните **сопоставления** просматривать и изменять пользовательские атрибуты, которые проходят между Azure AD и целевом приложении. Если целевое приложение поддерживает его, этот раздел позволяет дополнительно настроить подготовку групп и учетных записей пользователей.

   ![Salesforce](./media/customize-application-attributes/21.png) 

1. Выберите **сопоставления** конфигурацию, чтобы открыть связанный **сопоставление атрибутов** экрана. Некоторые сопоставления атрибутов необходимы для правильной работы приложения SaaS. Для требуемых атрибутов функция **Удалить** недоступна.

   ![Salesforce](./media/customize-application-attributes/22.png)

   На этом снимке экрана можно увидеть, что **Username** атрибут управляемого объекта в Salesforce заполняется **userPrincipalName** значение связанного объекта Azure Active Directory.

1. Выберите существующую **сопоставление атрибутов** открыть **изменение атрибута** экрана. Здесь можно изменить атрибуты пользователя, которые проходят между Azure AD и целевом приложении.

   ![Salesforce](./media/customize-application-attributes/23.png)


### <a name="understanding-attribute-mapping-types"></a>Основные сведения о типах сопоставления атрибутов
С помощью сопоставлений атрибутов можно управлять заполнением атрибутов в сторонних приложениях SaaS. Поддерживаются четыре типа сопоставлений:

* **Прямое** — целевой атрибут заполняется значением атрибута связанного объекта в Azure AD.
* **Константа** — целевой атрибут заполняется определенной строки, вы указали.
* **Выражение** — целевой атрибут заполняется на основе результата выражения, похожего на сценарий. 
  Дополнительные сведения см. в статье [Запись выражений для сопоставления атрибутов в Azure Active Directory](functions-for-customizing-application-data.md).
* **Нет** — целевой атрибут остается без изменений. Тем не менее если целевой атрибут пуст, он заполняется вами значением по умолчанию.

Вместе с этих четырех основных типов, настраиваемые сопоставления атрибутов поддерживают концепцию необязательный **по умолчанию** назначения значений. Значение по умолчанию гарантирует, что целевой атрибут заполняется значением, если значение в Azure AD или целевого объекта. В наиболее распространенной конфигурации это поле остается пустым.


### <a name="understanding-attribute-mapping-properties"></a>Основные сведения о свойствах сопоставления атрибутов

В предыдущем разделе вы уже ознакомились с свойство сопоставление атрибутов типа.
А также это свойство сопоставления атрибутов также поддерживают следующие атрибуты:

- **Атрибут источника** — атрибут пользователя из исходной системы (например Azure Active Directory).
- **Целевой атрибут** — атрибут пользователя в целевой системе (например ServiceNow).
- **Сопоставление объектов с помощью этого атрибута** — это сопоставление следует ли использовать для уникальной идентификации пользователей между исходной и целевой систем. Оно обычно задается в атрибуте userPrincipalName или mail в Azure AD, который обычно сопоставляется с полем имени пользователя в целевом приложении.
- **Приоритет сопоставления** — возможность указания нескольких атрибутов сопоставления. Если их несколько, они вычисляются в порядке, заданном в этом поле. Как только соответствие найдено, дальнейшие атрибуты сопоставления не вычисляются.
- **Применить это сопоставление**
    - **Всегда** — применить это сопоставление при создании пользователя, так и при обновлении.
    - **Только во время создания** — применить это сопоставление только при создании пользователей.


## <a name="editing-group-attribute-mappings"></a>Изменение сопоставлений атрибутов группы

Выбранное число приложений, таких как ServiceNow, Box и Google Apps, поддерживают возможность подготавливать объектов групп и объектов пользователей. Объекты группы может содержать свойства группы, такие как отображаемые имена и псевдонимы, а также членов группы электронной почты.

![ServiceNow](./media/customize-application-attributes/24.png)

Подготовка групп можно при необходимости включить или отключить, выбрав сопоставление группы в разделе **сопоставления**и параметр **включено** параметру в **сопоставление атрибутов** экрана.

Атрибуты, подготовленные как часть объектов группы, можно настроить так же, как объекты пользователя, описанные ранее. 

>[!TIP]
>Подготовка объектов группы (свойства и участники) отличается от [присвоения групп](assign-user-or-group-access-portal.md) приложению. Вы можете назначить группу приложению, однако подготовить можно только те объекты пользователя, которые содержатся в группе. Для использования групп в назначениях подготовка объектов для всей группы не требуется.


## <a name="editing-the-list-of-supported-attributes"></a>Изменение списка поддерживаемых атрибутов

Атрибуты пользователя, поддерживаемые для заданного приложения, настроены предварительно. Большинство приложений для управления пользователями API-интерфейсы не поддерживают обнаружение схемы. Таким образом служба подготовки Azure AD не может динамически создавать список поддерживаемых атрибутов с помощью обращений к приложению. 

Тем не менее некоторые приложения поддерживают настраиваемые атрибуты, и служба подготовки Azure AD могут читать и записывать пользовательские атрибуты. Чтобы ввести их определения в портал Azure, выберите **Показать расширенные параметры** флажок в нижней части **сопоставление атрибутов** экрана, а затем выберите **изменить список атрибутов для** приложения.

Ниже приведены приложения и системы, поддерживающие настройку списка атрибутов.

* Salesforce
* ServiceNow
* Workday
* Azure Active Directory (поддерживаются [атрибуты по умолчанию API Graph Azure AD](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#user-entity) и расширения пользовательского каталога)
* Приложения, поддерживающие [SCIM 2.0](https://tools.ietf.org/html/rfc7643), где необходимо добавить атрибуты, определенные в [основной схеме](https://tools.ietf.org/html/rfc7643)

>[!NOTE]
>Изменение списка поддерживаемых атрибутов рекомендуется только для администраторов, которые настроили схему своих приложений и систем и имеют непосредственные знания об определении их атрибутов. Иногда для этого требуются навыки работы с API-интерфейсами и средствами разработчика, предоставляемыми приложением или системой. 

При изменении списка поддерживаемых атрибутов предоставляются следующие свойства:

* **Имя** — системное имя атрибута, определенное в схеме целевого объекта. 
* **Тип** -сохраняет тип данных атрибута, как определено в схеме целевого объекта, который может быть одним из следующих типов:
   * *Binary* — атрибут содержит двоичные данные.
   * *Boolean* — атрибут содержит значение True или False.
   * *DateTime* — атрибут содержит строку даты.
   * *Integer* — атрибут содержит целое число.
   * *Reference* — атрибут содержит идентификатор, который ссылается на значение, хранящееся в другой таблице в целевом приложении.
   * *String* — атрибут содержит текстовую строку. 
* **Первичный ключ?** -Ли атрибут определяется как поле первичного ключа в схеме целевого объекта.
* **Обязательный?** -Ли атрибут является обязательным для заполнения в целевом приложении или системе.
* **С несколькими значениями?** — Атрибут, поддерживает ли несколько значений.
* **С учетом регистра?** -Ли образом, с учетом регистра при оценке значений атрибутов.
* **Выражение API** -не используется, если это не указано для этого в документации по конкретному соединителю для подготовки (например, Workday).
* **Атрибут объекта ссылки** — Если это атрибут ссылочного типа, а затем это меню позволяет выбрать таблицу и атрибут в целевом приложении, которое содержит значение, связанное с атрибутом. Например, если у вас есть атрибут с именем Department, сохраненное значение которого указывает на объект в отдельной таблице Departments, необходимо выбрать Departments.Name. Ссылочные таблицы и первичный идентификатор полей, поддерживаемых для данного приложения, предварительно настроены и в настоящее время нельзя изменить с помощью портала Azure, но могут быть отредактированы с использованием [Graph API](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/synchronization-configure-with-custom-target-attributes).

Чтобы добавить новый атрибут, перейдите в конец списка поддерживаемых атрибутов, заполните поля выше, использовав предоставленные входные данные, и выберите **Добавить атрибут**. После завершения добавления атрибутов нажмите кнопку **Сохранить**. Затем необходимо перезагрузить **Подготовка** вкладку новые атрибуты станут доступны в редакторе сопоставление атрибутов.

## <a name="restoring-the-default-attributes-and-attribute-mappings"></a>Восстановление атрибутов по умолчанию и сопоставления атрибутов

Вам следует нужно начать работу сначала и сбросить имеющиеся сопоставления к состоянию по умолчанию, можно выбрать **восстановить сопоставления по умолчанию** флажок и сохранить конфигурацию. Таким образом все сопоставления задаются, как если бы приложения был только что добавлен в клиент Azure AD из коллекции приложений. 

При выборе этого параметра приведет повторную синхронизацию всех пользователей во время подготовки службы. 

>[!IMPORTANT]
>Настоятельно рекомендуется, чтобы **состояние подготовки** присвоить **Off** перед вызовом этого параметра.


## <a name="what-you-should-know"></a>Необходимая информация

* Процесс синхронизации в Microsoft Azure AD реализован очень эффективно. Во время цикла синхронизации в инициализированной среде обрабатываются только объекты, требующие обновления. 

* Обновление сопоставлений атрибутов влияет на производительность цикла синхронизации. Чтобы обновить конфигурацию сопоставления атрибутов, необходимо повторно оценить все управляемые объекты. 

* Чтобы сократить количество последовательных изменений сопоставлений атрибутов — как минимум является рекомендуемый вариант.


## <a name="next-steps"></a>Дальнейшие действия

* [Автоматическая подготовка пользователей и ее отзыв для приложений SaaS](user-provisioning.md)
* [Запись выражений для сопоставления атрибутов](functions-for-customizing-application-data.md)
* [Фильтры области для подготовки пользователей](define-conditional-rules-for-provisioning-user-accounts.md)
* [Автоматическая подготовка пользователей и групп из Azure Active Directory в приложениях с использованием SCIM](use-scim-to-provision-users-and-groups.md)
* [Список учебников по интеграции приложений SaaS](../saas-apps/tutorial-list.md)


