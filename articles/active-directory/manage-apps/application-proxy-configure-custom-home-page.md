---
title: Настройка пользовательской домашней страницы для опубликованных приложений с помощью прокси приложения Azure AD | Документация Майкрософт
description: Основные сведения о соединителях прокси приложения Azure AD.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 04/17/2019
ms.author: celested
ms.reviewer: harshja
ms.custom: it-pro
ms.collection: M365-identity-device-management
ms.openlocfilehash: 3143dfafdd402bd9eeb2f201f4e728d84c4b9f09
ms.sourcegitcommit: 44a85a2ed288f484cc3cdf71d9b51bc0be64cc33
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64691161"
---
# <a name="set-a-custom-home-page-for-published-apps-by-using-azure-ad-application-proxy"></a>Настройка пользовательской домашней страницы для опубликованных приложений с помощью прокси приложения Azure AD

В этой статье описывается настройка приложения для перенаправления пользователя на пользовательскую домашнюю страницу, который может отличаться в зависимости от того, являются ли они внутренними или внешними. При публикации приложения с помощью прокси приложения, задайте внутренний URL-адрес, но иногда это не страницы, на которую пользователь должен видеть сначала. Задайте пользовательскую домашнюю страницу, чтобы пользователь получает соответствующую страницу, при доступе к приложению. Пользователь видит на пользовательскую домашнюю страницу установить, независимо от того, является ли они доступ к приложению из панели доступа Azure Active Directory или средства запуска приложений Office 365.

Когда пользователь запускает приложение, им будут предоставлены по умолчанию URL-адрес корневого домена для опубликованного приложения. Обычно целевой страницей считается URL-адрес домашней страницы приложения. Используйте модуль Azure AD PowerShell для определения URL-адрес пользовательской домашней страницы, когда требуется пользователя приложения должны переходить на определенную страницу в приложении.

Вот один из сценариев, это объясняет, почему ваша компания устанавливал пользовательской домашней страницы, и почему она будет отличаться в зависимости от типа пользователя:

- Так как у вас есть другие активы (например, изображения), прокси приложения требуется доступ к на верхнем уровне структуры папок, публикации приложения с помощью `https://ExpenseApp` как внутренний URL-адрес.
- Тем не менее, в корпоративной сети, пользователь переходит к `https://ExpenseApp/login/login.aspx` на вход и доступ к вашему приложению.
- Внешний URL-адрес по умолчанию `https://ExpenseApp-contoso.msappproxy.net`, который не принимает внешнего пользователя на страницу входа в систему.
- Вы хотите установить `https://ExpenseApp-contoso.msappproxy.net/login/login.aspx` как URL-адрес внешнего домашнюю страницу вместо этого таким образом внешний пользователь видит страницу входа сначала.

>[!NOTE]
>Когда вы предоставляете пользователям доступ к опубликованным приложениям, эти приложения отображаются на [панели доступа Azure AD](../user-help/my-apps-portal-end-user-access.md) и в [средстве запуска приложений Office 365](https://www.microsoft.com/microsoft-365/blog/2016/09/27/introducing-the-new-office-365-app-launcher/).

## <a name="before-you-start"></a>Перед началом работы

Прежде чем указывать URL-адрес домашней страницы, учтите следующие требования:

- Указываемый путь должен являться путем поддомен URL-адрес корневого домена.

  Например, если URL-адрес корневого домена `https://apps.contoso.com/app1/`, настроенному в URL-адрес домашней страницы должен начинаться с `https://apps.contoso.com/app1/`.

- Когда вы вносите изменения в опубликованное приложение, URL-адрес домашней страницы может вернуться к значению по умолчанию. Поэтому при дальнейшем обновлении приложения следует повторно проверить URL-адрес домашней страницы и изменить его при необходимости.

Можно изменить на внешний или внутренний домашнюю страницу на портале Azure или с помощью PowerShell.

## <a name="change-the-home-page-in-the-azure-portal"></a>Изменение домашней страницы на портале Azure

Чтобы изменить домашние страницы внешние и внутренние приложения с помощью портала Azure AD, выполните следующие действия.

1. Войдите в [портал Azure Active Directory](https://aad.portal.azure.com/). Появится панель мониторинга центра администрирования Azure Active Directory.
2. На боковой панели, выберите **Azure Active Directory**. Откроется окно Обзор Azure AD.
3. На боковой панели обзора выберите **регистрация приложений**. Появится список зарегистрированных приложений.
4. Выберите приложение из списка. Откроется страница со сведениями об зарегистрированного приложения.
5. Щелкните ссылку под **URI перенаправления**, которого номер URI перенаправления для веб- и общедоступным клиентом типов. Откроется окно проверки подлинности для зарегистрированного приложения.
6. В последней строке **URI перенаправления** таблицы, задайте **тип** столбец **общедоступным клиентом (классические и мобильные)** и в **URI ПЕРЕНАПРАВЛЕНИЯ**столбца, введите внутренний URL-адрес, вы хотите использовать. Новую пустую строку отображается под строку, которую вы только что изменили.
7. В новой строке, задайте **тип** столбец **Web**и в **URI ПЕРЕНАПРАВЛЕНИЯ** столбца, введите внешний URL-адрес, вы хотите использовать.
8. Если вы хотите удалить все существующие строки URI перенаправления, выберите **удалить** значок (корзины) рядом с каждой нежелательные строки.
9. Щелкните **Сохранить**.

## <a name="change-the-home-page-with-powershell"></a>Изменение домашней страницы с помощью PowerShell

Чтобы настроить домашнюю страницу приложения с помощью PowerShell, вам потребуется:

1. Установите модуль Azure AD PowerShell.
2. Найдите значение ObjectId приложения.
3. Обновите URL-адрес домашней страницы приложения, с помощью команд PowerShell.

### <a name="install-the-azure-ad-powershell-module"></a>Установка модуля Azure AD PowerShell

Прежде чем настраивать URL-адрес пользовательской домашней страницы с помощью PowerShell, установите модуль Azure AD PowerShell. Этот пакет можно скачать из [коллекции PowerShell](https://www.powershellgallery.com/packages/AzureAD/2.0.2.16), в которой используется конечная точка API Graph.

Для установки пакета выполните следующие действия.

1. Откройте стандартное окно PowerShell и выполните следующую команду.

   ```powershell
   Install-Module -Name AzureAD
   ```

    Если вы запускаете команду не от имени администратора, используйте параметр `-scope currentuser`.

2. Во время установки выберите ответ **Y** (Да) на предложение установить два пакета с сайта Nuget.org. Требуются оба пакета.

### <a name="find-the-objectid-of-the-app"></a>Поиск идентификатора ObjectId приложения

Получение идентификатора ObjectId для приложения, выполнив поиск в приложение по его отображаемое имя или домашней странице.

1. В том же окне PowerShell импортируйте модуль Azure AD.

   ```powershell
   Import-Module AzureAD
   ```

2. Войдите в модуль Azure AD в качестве администратора клиента.

   ```powershell
   Connect-AzureAD
   ```

3. Найдите приложение. В этом примере PowerShell, чтобы найти ObjectId для приложения с отображаемым именем из `SharePoint`.

   ```powershell
   Get-AzureADApplication | Where-Object { $_.DisplayName -eq "SharePoint" } | Format-List DisplayName, Homepage, ObjectId
   ```

   Вы должны получить результат, похожий на приведенный ниже. Скопируйте GUID ObjectId для использования в следующем разделе.

   ```console
   DisplayName : SharePoint
   Homepage    : https://sharepoint-iddemo.msappproxy.net/
   ObjectId    : 8af89bfa-eac6-40b0-8a13-c2c4e3ee22a4
   ```

   Кроме того можно просто извлечь список всех приложений, найдите в списке приложений с именем экрана или домашнюю страницу и скопировать ObjectId приложения после обнаружения приложения.

   ```powershell
   Get-AzureADApplication | Format-List DisplayName, Homepage, ObjectId
   ```

### <a name="update-the-home-page-url"></a>Изменение URL-адреса домашней страницы

Создайте URL-адрес домашней страницы и обновить приложение с этим значением. Продолжать использовать том же окне PowerShell, или если вы используете новое окно PowerShell, войдите снова с помощью модуля Azure AD `Connect-AzureAD`. Затем выполните следующие действия.

1. Создайте переменную для хранения значения ObjectId, который вы скопировали в предыдущем разделе. (Замените значение ObjectId, используемое в этом примере SharePoint со значением ObjectId приложения).

   ```powershell
   $objguid = "8af89bfa-eac6-40b0-8a13-c2c4e3ee22a4"
   ```

2. Убедитесь, что вы нашли правильное приложение, выполнив следующую команду. Выходные данные должны быть идентичны в выходные данные, вы видели в предыдущем разделе ([поиск идентификатора ObjectId приложения](#find-the-objectid-of-the-app)).

   ```powershell
   Get-AzureADApplication -ObjectId $objguid | Format-List DisplayName, Homepage, ObjectId
   ```

3. Создайте пустой объект приложения, в котором будут храниться ваши изменения.

   ```powershell
   $appnew = New-Object "Microsoft.Open.AzureAD.Model.Application"
   ```

4. Задайте нужное значение для URL-адреса домашней страницы. Это значение должно быть путем к поддомену опубликованного приложения. Например, если изменить URL-адрес домашней страницы с `https://sharepoint-iddemo.msappproxy.net/` на `https://sharepoint-iddemo.msappproxy.net/hybrid/`, пользователи приложения перейдут непосредственно на пользовательскую домашнюю страницу.

   ```powershell
   $homepage = "https://sharepoint-iddemo.msappproxy.net/hybrid/"
   ```

5. Установите обновление, домашней страницы.

   ```powershell
   Set-AzureADApplication -ObjectId $objguid -Homepage $homepage
   ```

6. Чтобы убедиться, что изменения внесены успешно, выполните следующую команду из шага 2 еще раз.

   ```powershell
   Get-AzureADApplication -ObjectId $objguid | Format-List DisplayName, Homepage, ObjectId
   ```

   Для нашего примера результат должен теперь выглядеть следующим образом:

   ```console
   DisplayName : SharePoint
   Homepage    : https://sharepoint-iddemo.msappproxy.net/hybrid/
   ObjectId    : 8af89bfa-eac6-40b0-8a13-c2c4e3ee22a4
   ```

7. Перезапустите приложение, чтобы убедиться, что на домашней странице отображается как первый экран, должным образом.

>[!NOTE]
>Все изменения, которые вы внесли в приложение, могут сбросить URL-адрес домашней страницы. В случае сброса URL-адреса домашней страницы повторите шаги в этом разделе, чтобы снова задать его.

## <a name="next-steps"></a>Дальнейшие действия

- [Настройка удаленного доступа к SharePoint с помощью прокси приложения Azure AD](application-proxy-integrate-with-sharepoint-server.md)
- [Руководство Добавление локального приложения для удаленного доступа через прокси приложения в Azure Active Directory](application-proxy-add-on-premises-application.md)