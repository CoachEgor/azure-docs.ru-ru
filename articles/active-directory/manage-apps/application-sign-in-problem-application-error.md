---
title: Сообщение об ошибке появляется на странице приложения после входной регистрации Документы Майкрософт
description: Как разрешить проблемы с ввозим Azure AD при возврате сообщения об ошибке.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 07/11/2017
ms.author: mimart
ms.reviewer: asteen
ms.collection: M365-identity-device-management
ms.openlocfilehash: 9b8d20b31e96973a492355f0515d0532deea0ac9
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77185489"
---
# <a name="an-app-page-shows-an-error-message-after-the-user-signs-in"></a>Страница приложения показывает сообщение об ошибке после входной записи пользователя

В этом сценарии активный каталог Azure (Azure AD) регистрирует пользователя. Но приложение отображает сообщение об ошибке и не позволяет пользователю закончить поток вхданных. Проблема в том, что приложение не приняло ответ, который выпустил Azure AD.

Существует несколько возможных причин, по которым приложение не приняло ответ Azure AD. Если сообщение об ошибке не определяет четко, чего не хватает в ответе, попробуйте следующее:

-   Если приложение является галереей Azure AD, убедитесь, что вы следовали шагам в [Как отладить SAML-одиночные знаки для приложений в Azure AD.](https://azure.microsoft.com/documentation/articles/active-directory-saml-debugging)

-   Используйте такой инструмент, как [Fiddler,](https://www.telerik.com/fiddler) чтобы захватить запрос SAML, ответ и токен.

-   Отправьте ответ SAML поставщику приложения и спросите его, чего не хватает.

## <a name="attributes-are-missing-from-the-saml-response"></a>Атрибуты отсутствуют в ответе SAML

Чтобы добавить атрибут в конфигурацию Azure AD, которая будет отправлена в ответ Azure AD, выполните следующие действия:

1. Откройте [**портал Azure**](https://portal.azure.com/) и вопийте в качестве глобального администратора или совместного администратора.

2. В верхней части навигационного стекла на левой стороне выберите **все службы,** чтобы открыть расширение Azure AD.

3. Введите **active-каталог Azure** в поле поиска фильтров, а затем выберите **Active Directory Azure.**

4. Выберите **корпоративные приложения** в навигационном панели Azure AD.

5. Выберите **все приложения** для просмотра списка ваших приложений.

   > [!NOTE]
   > Если вы не видите нужное приложение, используйте элемент управления **фильтром** в верхней части **списка всех приложений.** Установите опцию **Show** на "Все приложения".

6. Выберите приложение, которое необходимо настроить для одного входного.

7. После загрузки приложения выберите **единый входе** в навигационное стекло.

8. В разделе **Атрибуты пользователя** выберите **View и отсваивайте все остальные атрибуты пользователя.** Здесь вы можете изменить атрибуты для отправки в приложение в токене SAML при входе пользователей.

   Чтобы добавить атрибут, выполните указанные ниже действия.

   1. Нажмите кнопку **Добавить атрибут**. Введите **имя**и выберите **Значение** из списка выпадающих.

   1.  Нажмите кнопку **Сохранить**. Вы увидите новый атрибут в таблице.

9. Сохраните конфигурацию.

   В следующий раз, когда пользователь впишется в приложение, Azure AD отправит новый атрибут в ответ SAML.

## <a name="the-app-doesnt-identify-the-user"></a>Приложение не идентифицирует пользователя

Восподписание в приложение не удается, потому что ответ SAML отсутствует атрибут, такой как роль. Или это не так, потому что приложение ожидает другой формат или значение для атрибута **NameID** (User Identifier).

Если вы используете [автоматизированную подготовку пользователей Azure AD](https://docs.microsoft.com/azure/active-directory/manage-apps/user-provisioning) для создания, обслуживания и удаления пользователей в приложении, убедитесь, что пользователь был подготовлен к приложению SaaS. Для получения дополнительной информации см. [Нет пользователей в настоящее время подготовлены к приложению Azure AD Gallery](../app-provisioning/application-provisioning-config-problem-no-users-provisioned.md).

## <a name="add-an-attribute-to-the-azure-ad-app-configuration"></a>Добавление атрибута в конфигурацию приложения Azure AD

Чтобы изменить значение идентификатора пользователя, сделайте следующее:

1. Откройте [**портал Azure**](https://portal.azure.com/) и вопийте в качестве глобального администратора или совместного администратора.

2. Выберите **все службы** в верхней части навигационного стекла на левой стороне, чтобы открыть расширение Azure AD.

3. Введите **active-каталог Azure** в поле поиска фильтров, а затем выберите **Active Directory Azure.**

4. Выберите **корпоративные приложения** в навигационном панели Azure AD.

5. Выберите **все приложения** для просмотра списка ваших приложений.

   > [!NOTE]
   > Если вы не видите нужное приложение, используйте элемент управления **фильтром** в верхней части **списка всех приложений.** Установите опцию **Show** на "Все приложения".

6. Выберите приложение, которое вы хотите настроить для SSO.

7. После загрузки приложения выберите **единый входе** в навигационное стекло.

8. В соответствии с **атрибутами пользователя**выберите уникальный идентификатор для пользователя из списка выпадающих **идентификаторов пользователей.**

## <a name="change-the-nameid-format"></a>Изменение формата NameID

Если приложение ожидает другой формат для атрибута **NameID** (User Identifier), см. [Редактирование nameID](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization#editing-nameid) для изменения формата NameID.

Azure AD выбирает формат атрибута **NameID** (User Identifier) на основе выбранного значения или формата, запрошенного приложением в SAML AuthRequest. Для получения дополнительной информации см. [Single sign-on SAML protocol](https://docs.microsoft.com/azure/active-directory/develop/single-sign-on-saml-protocol#nameidpolicy)

## <a name="the-app-expects-a-different-signature-method-for-the-saml-response"></a>Приложение ожидает другой метод подписи для ответа SAML

Чтобы изменить, какие части токена SAML подписаны Azure AD, выполните следующие действия:

1. Откройте [портал Azure](https://portal.azure.com/) и вопийте в качестве глобального администратора или совместного администратора.

2. Выберите **все службы** в верхней части навигационного стекла на левой стороне, чтобы открыть расширение Azure AD.

3. Введите **active-каталог Azure** в поле поиска фильтров, а затем выберите **Active Directory Azure.**

4. Выберите **корпоративные приложения** в навигационном панели Azure AD.

5. Выберите **все приложения** для просмотра списка ваших приложений.

   > [!NOTE]
   > Если вы не видите нужное приложение, используйте элемент управления **фильтром** в верхней части **списка всех приложений.** Установите опцию **Show** на "Все приложения".

6. Выберите приложение, которое необходимо настроить для одного входного.

7. После загрузки приложения выберите **единый входе** в навигационное стекло.

8. В **соответствии с сертификатом подписки SAML**выберите **настройки подписи сертификата.**

9. Выберите **опцию подписи,** которую приложение ожидает от следующих вариантов:

   * **Подписание ответа SAML**
   * **Подпишите ответ и утверждение SAML**
   * **Подписать утверждение SAML**

   В следующий раз, когда пользователь впишется в приложение, Azure AD подпишет выбранную вами часть ответа SAML.

## <a name="the-app-expects-the-sha-1-signing-algorithm"></a>Приложение ожидает алгоритм подписания SHA-1

По умолчанию Azure AD подписывает токен SAML, используя наиболее безопасный алгоритм. Мы рекомендуем не менять алгоритм подписания на *SHA-1,* если приложение не требует SHA-1.

Чтобы изменить алгоритм подписи, сделайте следующее:

1. Откройте [портал Azure](https://portal.azure.com/) и вопийте в качестве глобального администратора или совместного администратора.

2. Выберите **все службы** в верхней части навигационного стекла на левой стороне, чтобы открыть расширение Azure AD.

3. Введите **active-каталог Azure** в поле поиска фильтров, а затем выберите **Active Directory Azure.**

4. Выберите **корпоративные приложения** в навигационном панели Azure AD.

5. Выберите **все приложения** для просмотра списка приложений.

   > [!NOTE]
   > Если вы не видите нужное приложение, используйте элемент управления **фильтром** в верхней части **списка всех приложений.** Установите опцию **Show** на "Все приложения".

6. Выберите приложение, которое вы хотите настроить для одного входного.

7. После загрузки приложения выберите **однозначный входе** из навигационного стекла на левой стороне приложения.

8. В **соответствии с сертификатом подписки SAML**выберите **настройки подписи сертификата.**

9. Выберите **SHA-1** в качестве **алгоритма подписания.**

   В следующий раз, когда пользователь впишется в приложение, Azure AD подпишет токен SAML с помощью алгоритма SHA-1.

## <a name="next-steps"></a>Дальнейшие действия
[Как отладить ОДИНочный знак на основе SAML в приложениях Azure AD.](https://azure.microsoft.com/documentation/articles/active-directory-saml-debugging)
