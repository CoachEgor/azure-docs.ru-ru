---
title: Как настроить федеративный единый вход для приложения из коллекции Azure AD | Документы Майкрософт
description: Как настроить федеративный единый вход для существующего приложения из коллекции Azure AD и как использовать учебники для быстрого перехода
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 07/11/2017
ms.author: mimart
ms.collection: M365-identity-device-management
ROBOTS: NOINDEX
ms.openlocfilehash: 8e50a495e1b0406e0c935ac31111dc6b5d0c0821
ms.sourcegitcommit: 5f67772dac6a402bbaa8eb261f653a34b8672c3a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/01/2019
ms.locfileid: "70207128"
---
# <a name="how-to-configure-federated-single-sign-on-for-an-azure-ad-gallery-application"></a>Настройка федеративного единого входа для приложения из коллекции Azure AD

Пошаговое руководство доступно для всех приложений в коллекции Azure Active Directory (Azure AD) с возможностью корпоративного единого входа. Подробное пошаговое руководство можно найти в [Списке руководств по интеграции приложений SaaS с Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-saas-tutorial-list/).

## <a name="overview-of-steps-required"></a>Обзор необходимых действий
Чтобы настроить приложение из коллекции Azure AD, выполните указанные ниже действия.

-   [Добавление приложения из коллекции Azure AD](#add-an-application-from-the-azure-ad-gallery)

-   [Настройка значений метаданных приложения в Azure AD (URL-адрес для входа, идентификатор, URL-адрес ответа)](#configure-single-sign-on-for-an-application-from-the-azure-ad-gallery)

-   [Выбор идентификатора пользователя и добавление атрибутов пользователей, которые будут отправлены в приложение](#select-user-identifier-and-add-user-attributes-to-be-sent-to-the-application)

-   [Получение метаданных и сертификата Azure AD](#download-the-azure-ad-metadata-or-certificate)

-   [Настройка значений метаданных Azure AD в приложении (URL-адрес для входа, издатель, URL-адрес выхода и сертификат)](#configure-single-sign-on-for-an-application-from-the-azure-ad-gallery)

-   [Назначение пользователей для приложения](#assign-users-to-the-application)

## <a name="add-an-application-from-the-azure-ad-gallery"></a>Добавление приложения из коллекции Azure AD

Чтобы добавить приложение, не входящее в коллекцию Azure AD, выполните следующие инструкции:

1.  Откройте [портал Azure](https://portal.azure.com) и войдите в систему как **глобальный администратор** или **соадминистратор**.

2.  Откройте **расширение Azure Active Directory** , выбрав **все службы** в верхней части главного меню навигации слева.

3.  В поле поиска введите "Azure Active Directory" и выберите **Azure Active Directory**.

4.  В левой части меню навигации Azure AD выберите **корпоративные приложения** .

5.  Щелкните **Добавить** в правом верхнем углу области **корпоративные приложения** .

6.  В поле **введите имя** в разделе **Добавить из коллекции** введите имя приложения.

7.  Выберите приложение, для которого нужно настроить единый вход.

8.  Перед добавлением приложения его имя можно изменить в поле **имя** .

9.  Нажмите кнопку **Добавить** , чтобы добавить приложение.

Через короткий период вы увидите панель конфигурации приложения.

## <a name="configure-single-sign-on-for-an-application-from-the-azure-ad-gallery"></a>Настройка единого входа для приложения из коллекции Azure AD

Чтобы настроить для приложения единый вход, выполните следующие инструкции:

1. Откройте [портал Azure](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или **соадминистратор**.

2. Откройте **расширение Azure Active Directory** , выбрав **все службы** в верхней части главного меню навигации слева.

3. В поле поиска введите "Azure Active Directory" и выберите **Azure Active Directory**.

4. Выберите **корпоративные приложения** в Azure Active Directory меню навигации в левой части экрана.

5. Щелкните **Все приложения**, чтобы просмотреть полный список приложений.

   * Если нужное приложение не отображается, используйте элемент управления **Фильтр** в верхней части **списка все приложения** и задайте для параметра **Показать** значение **все приложения.**

6. Выберите приложение, для которого нужно настроить единый вход.

7. После загрузки приложения выберите **единый вход** в левой части меню навигации приложения.

8. В раскрывающемся списке **Режим** выберите пункт **Вход на основе SAML**.

9. Введите необходимые значения в поле **Домены и URL-адреса**. Их можно получить у поставщика приложения.

   1. Чтобы настроить единый вход, инициированный поставщиком услуг, обязательно укажите URL-адрес для входа. Для некоторых приложений также нужно указать идентификатор.

   2. Чтобы настроить единый вход, инициированный поставщиком удостоверений, введите URL-адрес для ответа. Для некоторых приложений также нужно указать идентификатор.

10. **Необязательно**: Выберите **Показать дополнительные параметры URL-адресов** , если хотите просмотреть необязательные значения.

11. В разделе **Атрибуты пользователя** выберите уникальный идентификатор пользователя в раскрывающемся списке **Идентификатор пользователя**.

12. **Необязательно**: Выберите **Просмотреть и изменить все другие атрибуты пользователя** , чтобы изменить атрибуты, которые будут отправлены приложению в токене SAML при входе пользователей в систему.

    Чтобы добавить атрибут, выполните указанные ниже действия.
   
    1. Нажмите кнопку **Добавить атрибут**. Введите **Имя** и выберите **Значение** из раскрывающегося списка.

    1. Щелкните **Сохранить**. Новый атрибут появится в таблице.

13. Выберите **настроить &lt;имя&gt; приложения** для доступа к документации о настройке единого входа в приложении. Кроме того, у вас есть необходимые URL-адреса метаданных и сертификат для настройки единого входа с приложением.

14. Нажмите кнопку **Сохранить**, чтобы сохранить конфигурацию.

15. Назначьте пользователей приложению.

## <a name="select-user-identifier-and-add-user-attributes-to-be-sent-to-the-application"></a>Выберите идентификатор пользователя и добавьте атрибуты пользователя, которые будут отправлены в приложение.

Чтобы выбрать идентификатор пользователя или добавить атрибуты пользователя, выполните следующие действия.

1. Откройте [портал Azure](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или Соадминистратор **.**

2. Откройте **расширение Azure Active Directory** , выбрав **все службы** в верхней части главного меню навигации слева.

3. В поле поиска введите "Azure Active Directory" и выберите **Azure Active Directory**.

4. Выберите **корпоративные приложения** в Azure Active Directory меню навигации в левой части экрана.

5. Щелкните **Все приложения**, чтобы просмотреть полный список приложений.

   * Если нужное приложение не отображается, используйте элемент управления **Фильтр** в верхней части **списка все приложения** и задайте для параметра **Показать** значение **все приложения.**

6. Выберите приложение, для которого настроен единый вход.

7. После загрузки приложения выберите **единый вход** в левой части меню навигации приложения.

8. В разделе **Атрибуты пользователя** выберите уникальный идентификатор пользователя в раскрывающемся списке **Идентификатор пользователя**. Выбранный параметр должен соответствовать ожидаемому значению для проверки подлинности пользователя в приложении.

   >[!NOTE] 
   >Azure AD выбирает формат атрибута NameID (идентификатор пользователя) на основе выбранного значения или формата, запрошенного приложением в SAML запросе проверки подлинности. Дополнительные сведения см. в статье [протокол единого входа SAML](https://docs.microsoft.com/azure/active-directory/develop/active-directory-single-sign-on-protocol-reference#authnrequest) в разделе NameIDPolicy.
   >
   >

9. Чтобы добавить атрибуты пользователя, выберите **Просмотреть и изменить все другие атрибуты пользователя** , чтобы изменить атрибуты, которые будут отправлены приложению в токене SAML при входе пользователей в систему.

   Чтобы добавить атрибут, выполните указанные ниже действия.
  
   1. Нажмите кнопку **Добавить атрибут**. Введите **Имя** и выберите **Значение** из раскрывающегося списка.

   2. Щелкните **Сохранить**. Новый атрибут появится в таблице.

## <a name="download-the-azure-ad-metadata-or-certificate"></a>Скачивание метаданных Azure AD или сертификата

Чтобы скачать метаданные приложения или сертификат из Azure AD, сделайте следующее:

1. Откройте [портал Azure](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или Соадминистратор **.**

2. Откройте **расширение Azure Active Directory** , выбрав **все службы** в верхней части главного меню навигации слева.

3. В поле поиска введите "Azure Active Directory" и выберите **Azure Active Directory**.

4. Выберите **корпоративные приложения** в Azure Active Directory меню навигации в левой части экрана.

5. Щелкните **Все приложения**, чтобы просмотреть полный список приложений.

   *  Если нужное приложение не отображается, используйте элемент управления **Фильтр** в верхней части **списка все приложения** и задайте для параметра **Показать** значение **все приложения**.

6. Выберите приложение, для которого настроен единый вход.

7. После загрузки приложения выберите **единый вход** в левой части меню навигации приложения.

8. Перейдите в раздел **сертификат подписи SAML** , а затем выберите **загрузить** значение столбца. В зависимости от того, что именно требуется для настройки единого входа, вы сможете скачать XML-файл метаданных или сертификат.

Azure AD также предоставляет URL-адрес для доступа к метаданным. Используйте следующую модель, чтобы получить URL-адрес метаданных, относящийся к приложению:`https://login.microsoftonline.com/<Directory ID>/federationmetadata/2007-06/federationmetadata.xml?appid=<Application ID>`

## <a name="assign-users-to-the-application"></a>Назначение пользователей для приложения

Чтобы напрямую назначить одного или нескольких пользователей для приложения, выполните следующие инструкции:

1. Откройте [портал Azure](https://portal.azure.com/) и войдите в систему как **глобальный администратор.**

2. Откройте **расширение Azure Active Directory** , выбрав **все службы** в верхней части главного меню навигации слева.

3. В поле поиска введите "Azure Active Directory" и выберите **Azure Active Directory**.

4. Выберите **корпоративные приложения** в Azure Active Directory меню навигации в левой части экрана.

5. Щелкните **Все приложения**, чтобы просмотреть полный список приложений.

   * Если нужное приложение не отображается, используйте элемент управления **Фильтр** в верхней части **списка все приложения** и задайте для параметра **Показать** значение **все приложения.**

6. Выберите из списка приложение, которое необходимо назначить пользователю.

7. После загрузки приложения выберите **Пользователи и группы** в левой части меню навигации приложения.

8. Нажмите кнопку **Добавить** в верхней части списка **Пользователи и группы** , чтобы открыть область **Добавление назначения** .

9. В области **Добавление назначения** щелкните **Пользователи и группы**.

10. Введите **полное имя** или **адрес электронной почты** пользователя, которого вы хотите назначить, в поле поиска **по имени или адресу электронной почты** .

11. Наведите указатель мыши на **пользователя** в списке, чтобы показать **флажок**. Установите флажок рядом с фотографией или логотипом профиля пользователя, чтобы добавить пользователя в **выбранный** список.

12. **Необязательно**: Если вы хотите **Добавить несколько пользователей**, введите другое **имя** или **адрес электронной почты** в поле **поиска по имени или адресу электронной почты** и установите флажок, чтобы добавить этого пользователя в **выбранный** список.

13. Завершив выбор пользователей, нажмите кнопку **выбрать** , чтобы добавить их в список пользователей и групп, которые будут назначены приложению.

14. **Необязательно**: Выберите селектор **роли** в области **добавить назначение** , чтобы выбрать роль для назначения выбранным пользователям.

15. Нажмите кнопку **назначить** , чтобы назначить приложение выбранным пользователям.

Через некоторое время выбранные пользователи смогут запускать эти приложения с помощью методов, приведенных в описании решения.

## <a name="customizing-the-saml-claims-sent-to-an-application"></a>Настройка утверждений SAML, отправляемых в приложение

Сведения о настройке утверждений атрибута SAML, отправляемых в приложение, см. [в разделе Сопоставление утверждений в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-claims-mapping).

## <a name="next-steps"></a>Следующие шаги
[Реализация единого входа в приложения с помощью прокси приложения](application-proxy-configure-single-sign-on-with-kcd.md)



