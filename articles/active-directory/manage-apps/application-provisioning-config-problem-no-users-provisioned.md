---
title: Пользователи для приложения в коллекции Azure AD не подготавливаются | Документы Майкрософт
description: В этой статье описаны способы решения распространенных проблем, когда пользователи, для которых настроена подготовка в Azure AD, не появляются в приложении в коллекции Azure AD.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 09/20/2018
ms.author: mimart
ms.reviewer: asteen
ms.collection: M365-identity-device-management
ms.openlocfilehash: b80539181e6614283b6170b9cd9d4db85f812a5f
ms.sourcegitcommit: aa042d4341054f437f3190da7c8a718729eb675e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/09/2019
ms.locfileid: "68879895"
---
# <a name="no-users-are-being-provisioned-to-an-azure-ad-gallery-application"></a>Пользователи для приложения в коллекции Azure AD не подготавливаются
После настройки автоматической подготовки для приложения (в том числе проверки действительности учетных данных, с помощью которых Azure AD подключается к приложению) пользователи и (или) группы подготавливаются для приложения. Подготовка определяется следующими данными:

-   Какие пользователи и группы были **назначены** приложению. Обратите внимание, что подготовка вложенных групп или групп Office 365 не поддерживается. Дополнительные сведения о назначении см. в разделе [Назначение пользователя или группы корпоративному приложению в Azure Active Directory](assign-user-or-group-access-portal.md).
-   Было ли **сопоставление атрибутов** включено и настроено для синхронизации допустимых атрибутов из Azure AD в приложение. Дополнительные сведения о сопоставлении атрибутов см. в разделе [Настройка сопоставления атрибутов для подготовки пользователей для приложений SaaS в Azure Active Directory](customize-application-attributes.md).
-   Используется ли **фильтр области**, который фильтрует пользователей на основе значений указанных атрибутов. Дополнительные сведения о фильтрах области см. в статье [Подготовка приложений на основе атрибутов с использованием фильтров области](define-conditional-rules-for-provisioning-user-accounts.md).
  
Если вы обнаружили, что пользователи не подготавливаются, обратитесь к журналам аудита в Azure AD и найдите в них записи по конкретному пользователю.

Журналы аудита для подготовки можно открыть на портале Azure на вкладке **Azure Active Directory &gt; Корпоративные приложения &gt; \[Имя приложения\] &gt; Журналы аудита**. Чтобы просмотреть события подготовки только для этого приложения, отфильтруйте журналы по категории **Учетная запись подготовки**. Найти пользователей можно по "идентификатору сопоставления", который был назначен для этих пользователей в сопоставлениях атрибутов. Например, если в качестве атрибута сопоставления в Azure AD выбраны "имя участника-пользователя" или "адрес электронной почты" и для пользователя, который не подготавливается, этот атрибут имеет значение "audrey@contoso.com", найдите "audrey@contoso.com" в журналах аудита и просмотрите результаты поиска.

В журналах аудита подготовки хранятся записи обо всех операциях, выполняемых службой подготовки, включая запросы Azure AD для назначенных пользователей, которые находятся в области для подготовки, запросы целевого приложения на наличие этих пользователей и сравнение объектов пользователя в разных системах. Затем добавьте, измените или отключите учетную запись пользователя в целевой системе на основе сравнения.

## <a name="general-problem-areas-with-provisioning-to-consider"></a>Общие проблемные области при подготовке, которые необходимо учитывать
Ниже приведен список общих проблемных областей, в которые можно углубиться, если у вас есть какие-то идеи.

- [Служба подготовки не запускается](#provisioning-service-does-not-appear-to-start)
- [Судя по журналам аудита, пользователи не подготовлены, несмотря на то, что они назначены](#audit-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned)

## <a name="provisioning-service-does-not-appear-to-start"></a>Служба подготовки не запускается
Предположим, что вы установили параметр **Состояние подготовки** в значение **Вкл** в разделе **Azure Active Directory &gt; Корпоративные приложения &gt; \[Имя приложения\] &gt;Подготовка** портала Azure. Однако при последующей перезагрузке никакие другие сведения о состоянии на этой странице не отображаются. Вероятно, что служба запущена, но первоначальная синхронизация еще не завершена. Проверьте **журналы аудита**, как описано выше, чтобы определить, какие операции выполняет служба и не возникают ли ошибки.

>[!NOTE]
>Первоначальная синхронизация может занять от 20 минут до нескольких часов, в зависимости от размера каталога Azure AD и количества пользователей в области подготовки. Последующие операции синхронизации занимают меньше времени, так как служба подготовки сохраняет "водяные знаки", которые представляют состояние обеих систем после начальной синхронизации. Начальная синхронизация позволяет повысить скорость последующих операций синхронизации.
>


## <a name="audit-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned"></a>Судя по журналам аудита, пользователи не подготовлены, несмотря на то, что они назначены

Если пользователь отображается в журналах аудита как "пропущенный", важно ознакомиться с подробными сведениями об ошибке, чтобы определить причину. Ниже приведены распространенные причины и способы устранения ошибок:

- **Настроен фильтр области** **, который фильтрует пользователей на основе значения атрибута**. Дополнительные сведения о фильтрах области см. в [этой статье](define-conditional-rules-for-provisioning-user-accounts.md).
- **Пользователь "не имеет фактических прав".** Если вы видите это сообщение об ошибке, это свидетельствует о наличии проблемы с записью назначения пользователя, которая хранится в Azure AD. Чтобы устранить эту проблему, отмените назначение пользователя (или группы) для приложения и повторно назначьте пользователя (или группу). Дополнительные сведения о назначении доступа пользователю или группе см. в [этой статье](assign-user-or-group-access-portal.md).
- **Обязательный атрибут для пользователя отсутствует или его значение не указано.** При настройке подготовки важно просмотреть и настроить сопоставления атрибутов и рабочие процессы, которые определяют, какие свойства пользователя (или группы) передаются из Azure AD в приложение. К ним относится "свойство сопоставления", используемое для уникальной идентификации и сопоставления пользователей или групп между двумя системами. Дополнительные сведения об этом важном процессе см. в разделе [Настройка сопоставления атрибутов для подготовки пользователей для приложений SaaS в Azure Active Directory](customize-application-attributes.md).
- **Сопоставление атрибутов для групп**. Подготовка имени группы и сведений о ней, помимо ее участников (если поддерживается для некоторых приложений). Вы можете включить или отключить эту возможность, включая или отключая **сопоставление** для объектов группы, отображающихся на вкладке **Подготовка**. Если подготовка групп включена, обязательно ознакомьтесь с атрибутами сопоставления, чтобы убедиться, что в качестве соответствующего идентификатора используется подходящее поле. Соответствующим идентификатором может быть отображаемое имя или псевдоним электронной почты. Если соответствующее свойство для группы в Azure AD отсутствует или не указано, группа и ее участники не будут подготовлены.

## <a name="next-steps"></a>Следующие шаги

[Синхронизация Azure AD Connect: общие сведения о декларативной подготовке](../hybrid/concept-azure-ad-connect-sync-declarative-provisioning.md)
