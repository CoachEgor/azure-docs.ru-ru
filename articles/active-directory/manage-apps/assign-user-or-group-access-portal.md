---
title: Назначение пользователя или группы корпоративному приложению в Azure AD
description: Узнайте, как выбрать корпоративное приложение и назначить для него пользователя или группу в Azure Active Directory.
services: active-directory
author: msmimart
manager: CelesteDG
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.topic: conceptual
ms.date: 02/21/2020
ms.author: mimart
ms.reviewer: luleon
ms.collection: M365-identity-device-management
ms.openlocfilehash: 186e36e4625a60362c54972b16b53f0f3e6753fa
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "79409198"
---
# <a name="assign-a-user-or-group-to-an-enterprise-app-in-azure-active-directory"></a>Назначение пользователя или группы корпоративному приложению в Azure Active Directory

В этой статье показано, как назначать пользователей или группы корпоративным приложениям в Azure Active Directory (Azure AD) либо из портал Azure, либо с помощью PowerShell. При назначении пользователю приложения оно отображается на [панели доступа пользователя "Мои приложения](https://myapps.microsoft.com/) " для быстрого доступа. Если приложение предоставляет роли, можно также назначить пользователю определенную роль.

Для более высокого контроля для некоторых типов корпоративных приложений можно настроить [требование назначения пользователей](#configure-an-application-to-require-user-assignment). 

Чтобы [назначить пользователя или группу для корпоративного приложения](#assign-users-or-groups-to-an-app-via-the-azure-portal), необходимо войти в систему как глобальный администратор, администратор приложения, администратор облачных приложений или назначенный владелец корпоративного приложения.

> [!NOTE]
> Для назначения на основе группы требуется Azure Active Directory Premium P1 или P2 Edition. Назначение на основе групп поддерживается только для групп безопасности. Членство в вложенных группах и группы Office 365 в настоящее время не поддерживаются. Дополнительные требования к лицензированию для функций, описанных в этой статье, см. на [странице цен на Azure Active Directory](https://azure.microsoft.com/pricing/details/active-directory). 

## <a name="configure-an-application-to-require-user-assignment"></a>Настройка приложения для обязательного назначения пользователей

С помощью следующих типов приложений вы можете требовать, чтобы пользователи были назначены приложению, прежде чем они смогут получить к ним доступ:

- Приложения, настроенные для федеративного единого входа (SSO) с проверкой подлинности на основе SAML
- Приложения прокси приложения, использующие предварительную проверку подлинности Azure Active Directory
- Приложения, созданные на платформе приложений Azure AD, использующие аутентификацию OAuth 2,0/OpenID Connect Connect, после того как пользователь или администратор согласились с этим приложением.

Если требуется назначение пользователей, вход будет возможен только пользователям, явным образом назначенным приложению. Они могут получить доступ к приложению на странице "Мои приложения" или с помощью прямой ссылки. 

Если назначение *не требуется*, так как вы установили для этого параметра значение **нет** или если приложение использует другой режим единого входа, любой пользователь сможет получить доступ к приложению, если у него есть прямая ссылка на приложение или **URL-адрес доступа пользователя** на странице **свойств** приложения. 

Этот параметр не влияет на то, отображается ли приложение на панели доступа "Мои приложения". Приложения отображаются на панелях доступа пользователей "Мои приложения" после назначения пользователю или группе приложения. Дополнительные сведения см. [в разделе Управление доступом к приложениям](what-is-access-management.md).


Чтобы требовать назначения пользователя для приложения, сделайте следующее:

1. Войдите в [портал Azure](https://portal.azure.com) с помощью учетной записи администратора или владельца приложения.

2. Выберите **Azure Active Directory**. В меню навигации слева выберите **корпоративные приложения**.

3. Выберите приложение из списка. Если приложение не отображается, начните вводить его имя в поле поиска. Или используйте элементы управления фильтра, чтобы выбрать тип приложения, состояние или видимость, а затем нажмите кнопку **Применить**.

4. В меню навигации слева выберите **Свойства**.

5. Убедитесь, что **требуется назначение пользователя?** переключатель установлен в значение **Да**.

   > [!NOTE]
   > Если **требуется назначение пользователя?** переключение недоступно, можно использовать PowerShell, чтобы задать свойство appRoleAssignmentRequired для субъекта-службы.

6. Нажмите кнопку **сохранить** в верхней части экрана.

## <a name="assign-users-or-groups-to-an-app-via-the-azure-portal"></a>Назначение пользователей или групп для приложения с помощью портал Azure

1. Войдите в [портал Azure](https://portal.azure.com) с помощью учетной записи глобального администратора, администратора приложения или администратора облачного приложения или назначенного владельца корпоративного приложения.
2. Выберите **Azure Active Directory**. В меню навигации слева выберите **корпоративные приложения**.
3. Выберите приложение из списка. Если приложение не отображается, начните вводить его имя в поле поиска. Или используйте элементы управления фильтра, чтобы выбрать тип приложения, состояние или видимость, а затем нажмите кнопку **Применить**.
4. В меню навигации слева выберите **Пользователи и группы**.
   > [!NOTE]
   > Если вы хотите назначить пользователей приложениям Майкрософт, таким как приложения Office 365, в некоторых из этих приложений используется PowerShell. 
5. Нажмите кнопку **Добавить пользователя**.
6. На панели **Добавление назначения** выберите **Пользователи и группы**.
7. Выберите пользователя или группу, которые нужно назначить приложению, или начните вводить имя пользователя или группы в поле поиска. Можно выбрать несколько пользователей и групп, и выбранные элементы будут отображаться в разделе **Выбранные**.
8. По завершении нажмите кнопку **выбрать**.

   ![Назначение приложению пользователя или группы](./media/assign-user-or-group-access-portal/assign-users.png)

9. В области **Пользователи и группы** выберите одного или нескольких пользователей или групп из списка, а затем нажмите кнопку **выбрать** в нижней части панели.
10. Если приложение поддерживает его, можно назначить роль пользователю или группе. На панели **Добавление назначения** выберите **выбрать роль**. Затем на панели **Выбор роли** выберите роль, которая будет применяться к выбранным пользователям или группам, а затем нажмите кнопку **ОК** в нижней части панели. 

    > [!NOTE]
    > Если приложение не поддерживает выбор ролей, назначается роль доступа по умолчанию. В этом случае приложение управляет уровнем доступа пользователей.

2. На панели **Добавление назначения** нажмите кнопку **назначить** в нижней части панели.

## <a name="assign-users-or-groups-to-an-app-via-powershell"></a>Назначение пользователей или групп для приложения с помощью PowerShell

1. Откройте окно Windows PowerShell с повышенными привилегиями.

   > [!NOTE]
   > Вам потребуется установить модуль Azure AD (с помощью команды `Install-Module -Name AzureAD`). Если будет предложено установить модуль NuGet или новый модуль PowerShell Azure для Active Directory версии 2, введите Y и нажмите клавишу ВВОД.

1. Выполните команду `Connect-AzureAD` и войдите в систему с помощью учетных данных глобального администратора.
1. Чтобы назначить пользователя и его роль в приложении, используйте следующий скрипт:

    ```powershell
    # Assign the values to the variables
    $username = "<You user's UPN>"
    $app_name = "<Your App's display name>"
    $app_role_name = "<App role display name>"

    # Get the user to assign, and the service principal for the app to assign to
    $user = Get-AzureADUser -ObjectId "$username"
    $sp = Get-AzureADServicePrincipal -Filter "displayName eq '$app_name'"
    $appRole = $sp.AppRoles | Where-Object { $_.DisplayName -eq $app_role_name }

    # Assign the user to the app role
    New-AzureADUserAppRoleAssignment -ObjectId $user.ObjectId -PrincipalId $user.ObjectId -ResourceId $sp.ObjectId -Id $appRole.Id
    ```

Дополнительные сведения о том, как назначить пользователю роль в приложении, см. в документации по командлету [New-AzureADUserAppRoleAssignment](https://docs.microsoft.com/powershell/module/azuread/new-azureaduserapproleassignment?view=azureadps-2.0).

Чтобы назначить группу корпоративному приложению, измените `Get-AzureADUser` на `Get-AzureADGroup`.

### <a name="example"></a>Пример

В этом примере пользователь Britta Simon назначается в приложении [Microsoft Workplace Analytics](https://products.office.com/business/workplace-analytics) с помощью PowerShell.

1. В PowerShell присвойте соответствующие значения переменным $username, $app_name и $app_role_name.

    ```powershell
    # Assign the values to the variables
    $username = "britta.simon@contoso.com"
    $app_name = "Workplace Analytics"
    ```

1. В этом примере неизвестно, как именно называется роль приложения, которую мы хотим назначить пользователю Britta Simon. Выполните следующие команды, чтобы получить пользователя ($user) и субъект-службу ($sp) с помощью отображаемых имен участника-пользователя и субъекта-службы.

    ```powershell
    # Get the user to assign, and the service principal for the app to assign to
    $user = Get-AzureADUser -ObjectId "$username"
    $sp = Get-AzureADServicePrincipal -Filter "displayName eq '$app_name'"
    ```

1. Выполните команду `$sp.AppRoles`, чтобы отобразить роли, доступные для приложения Workplace Analytics. В этом примере мы хотим назначить пользователю Britta Simon роль Analyst (Limited Access) (аналитик с ограниченным доступом).

   ![Показывает роли, доступные пользователю с ролью аналитики рабочей области](./media/assign-user-or-group-access-portal/workplace-analytics-role.png)

1. Присвойте имя роли переменной `$app_role_name`.

    ```powershell
    # Assign the values to the variables
    $app_role_name = "Analyst (Limited access)"
    $appRole = $sp.AppRoles | Where-Object { $_.DisplayName -eq $app_role_name }
    ```

1. Выполните следующую команду, чтобы назначить пользователю роль в приложении:

    ```powershell
    # Assign the user to the app role
    New-AzureADUserAppRoleAssignment -ObjectId $user.ObjectId -PrincipalId $user.ObjectId -ResourceId $sp.ObjectId -Id $appRole.Id
    ```

## <a name="related-articles"></a>Похожие статьи

- [Дополнительные сведения о доступе к приложениям для конечных пользователей](end-user-experiences.md)
- [Планирование развертывания панели доступа Azure AD](access-panel-deployment-plan.md)
- [Управление доступом к приложениям](what-is-access-management.md)
 
## <a name="next-steps"></a>Дальнейшие действия

- [Просмотр всех моих групп](../fundamentals/active-directory-groups-view-azure-portal.md)
- [Удаление назначения пользователя или группы из корпоративного приложения](remove-user-or-group-access-portal.md)
- [Отключение входа пользователя в корпоративное приложение](disable-user-sign-in-portal.md)
- [Изменение имени или логотипа корпоративного приложения](change-name-or-logo-portal.md)
