---
title: Единый вход - приложения не из коллекции - платформой Microsoft identity | Документация Майкрософт
description: Настройка единого входа (SSO) для приложений не из коллекции в платформе Microsoft identity (Azure AD)
services: active-directory
author: msmimart
manager: CelesteDG
ms.service: active-directory
ms.subservice: app-mgmt
ms.topic: article
ms.workload: identity
ms.date: 05/08/2019
ms.author: celested
ms.reviewer: arvinh,luleon
ms.collection: M365-identity-device-management
ms.openlocfilehash: a72cb7bc7feeba984d568a0465d4f23a494496e8
ms.sourcegitcommit: 47ce9ac1eb1561810b8e4242c45127f7b4a4aa1a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2019
ms.locfileid: "67807649"
---
# <a name="configure-single-sign-on-to-non-gallery-applications-in-microsoft-identity-platform"></a>Настройка единого входа для приложений не из коллекции в платформе Microsoft identity

Эта статья посвящена это функция, которая позволяет администраторам настраивать единый вход для приложений, отсутствует в коллекции приложений платформы удостоверений Microsoft *без написания кода*.

Если вам все же необходимо руководство для разработчиков по интеграции пользовательских приложений в Azure AD с использованием кода, см. статью [Сценарии аутентификации в Azure Active Directory](../develop/authentication-scenarios.md).

Коллекции приложений платформы удостоверений Microsoft содержит список приложений, которые заведомо поддерживают единый вход с платформой Microsoft identity, как описано в разделе [в этой статье](what-is-single-sign-on.md). Когда вы (как специалист ИТ-отдела или системный интегратор) найдете приложение, которое нужно подключить, сначала выполните пошаговые инструкции по включению единого входа, которые предложены на портале Azure.

Следующие возможности доступны также, в соответствии с лицензионного соглашения. Дополнительные сведения см. на [странице с расценками](https://azure.microsoft.com/pricing/details/active-directory/).

- Самостоятельная интеграция приложений, использующих современную протокол, такой как [OpenId Connect и OAuth](https://docs.microsoft.com/azure/active-directory/develop/active-directory-v2-protocols) для проверки подлинности пользователей и получать маркеры для [Microsoft Graph](https://graph.microsoft.com).
- Самостоятельная интеграция любого приложения, поддерживающего [Security Assertion Markup Language (SAML) 2.0](https://wikipedia.org/wiki/SAML_2.0) поставщиков удостоверений (инициированный поставщиком услуг или поставщиком удостоверений)
- самостоятельная интеграция любого веб-приложения, где есть HTML-страница входа, с использованием функции [единого входа на основе пароля](what-is-single-sign-on.md#password-based-sso)
- Самостоятельное подключение приложений, использующих [системы для протокола управления удостоверений между доменами (SCIM), для подготовки пользователей](use-scim-to-provision-users-and-groups.md)
- Возможность добавлять ссылки на любые приложения в [Средство запуска приложений Office 365](https://www.microsoft.com/microsoft-365/blog/2014/10/16/organize-office-365-new-app-launcher-2/) или [Панель доступа Azure AD](what-is-single-sign-on.md#linked-sign-on).

Эти возможности можно включить самостоятельная интеграция программного обеспечения как услуги (SaaS) приложение, которое используется, даже если ни у кого нет подключено приложение в коллекцию приложений Azure AD еще. Другой возможностью является самостоятельной интеграции сторонних веб-приложения, ваша организация развернула на серверах, управление которыми вы, либо в облаке или локальной.

Также называется *шаблоны интеграции приложений*, эти возможности предоставляют точки подключения на основе стандартов для приложений, поддерживающих SAML, SCIM или проверки подлинности на основе форм. Возможности предусматривают гибкие параметры и настройки для совместимости с широким спектром приложений.

## <a name="adding-an-unlisted-application"></a>Добавление приложений, которые отсутствуют в списке

Платформы удостоверений Microsoft предоставляет два механизма регистрации приложений.

Приложения, использующего современную протокол, такой как [OpenId Connect и OAuth](../develop/active-directory-v2-protocols.md) для проверки подлинности пользователей регистрируется с помощью [портал регистрации приложений](../develop/quickstart-register-app.md).

Для регистрации приложений с использованием всех других типов [поддерживается механизмов проверки подлинности](what-is-single-sign-on.md), например [SAML](../develop/single-sign-on-saml-protocol.md) протокола, используйте **корпоративные приложения** колонке для подключения их с платформой Microsoft identity.

Чтобы подключиться к приложению отсутствующие в списке, используя шаблон интеграции приложений, выполните следующие действия:

1. Войдите в [портал Azure Active Directory](https://aad.portal.azure.com/) с помощью учетной записи администратора платформы Microsoft identity.
1. Выберите **корпоративные приложения** > **новое приложение**.
1. (Необязательно, но рекомендуется) В **добавить из коллекции** поле поиска, введите отображаемое имя приложения. Если приложение появится в результатах поиска, выберите его и пропустите оставшуюся часть этой процедуры.
1. Выберите **приложение не из коллекции**. **Добавление собственного приложения** появится страница.

   ![Показано добавление страницу приложения](./media/configure-single-sign-on-non-gallery-applications/add-your-own-application.png)

1. Введите отображаемое имя для нового приложения.
1. Выберите **Добавить**.

Добавление приложения таким образом, предоставляет возможности, аналогичные приведенному доступных для предварительно интегрированных приложений. Сначала выберите **единого входа** на боковой панели приложения. Следующая страница (**выберите один метод входа**) предоставляет параметры для настройки единого входа:

- **SAML**
- **На основе пароля**
- **Связанный**

![Показан Выбор страницы метод единого входа.](./media/configure-single-sign-on-non-gallery-applications/select-a-single-sign-on-method.png)

Дополнительные сведения об этих параметрах см. в следующих разделах этой статьи.

## <a name="saml-based-single-sign-on"></a>Единый вход на основе SAML

Выберите **SAML** параметр, чтобы настроить проверку подлинности на основе SAML для приложения. (Этот параметр требует, что приложение поддерживает SAML 2.0). **Задать вверх единого входа с помощью SAML** появится страница.

![Показывает настройки единого входа SAML страница](./media/configure-single-sign-on-non-gallery-applications/set-up-single-sign-on-with-saml.png)

Эта страница содержит пять другие заголовки:

| Номер заголовка | Имя заголовка | Сводка этот заголовок см. в разделе: |
| --- | --- | --- |
| 1 | **Настройка основных SAML** | [Введите базовую конфигурацию SAML](#enter-basic-saml-configuration) |
| 2 | **Атрибуты пользователя и утверждения** | [Просмотреть или настроить утверждения, выпущенные в токене SAML](#review-or-customize-the-claims-issued-in-the-saml-token) |
| 3 | **Сертификат подписи SAML** | [Истечение срока действия сертификата проверка данных, состояние и уведомления по электронной почте](#review-certificate-expiration-data-status-and-email-notification) |
| 4 | **Настройка \<имя приложения >** | [Настройка целевого приложения](#set-up-target-application) |
| 5 | **Проверка единого входа с \<имя приложения >** | [Тестирование приложения SAML](#test-the-saml-application) |

Теперь можно собирать сведения о том, как использовать SAML для вашего приложения, прежде чем продолжить. Выполните приведенные ниже, чтобы настроить единый вход между приложением и Azure AD.

### <a name="enter-basic-saml-configuration"></a>Ввод базовой конфигурации SAML

Чтобы настроить Azure AD, перейдите к статье **базовой конфигурации SAML** и выберите пункт его **изменить** значок (Карандаш). Вы можете вручную ввести значения или отправить файл метаданных, чтобы извлечь значения полей.

![Показана страница конфигурации основные SAML](./media/configure-single-sign-on-non-gallery-applications/basic-saml-configuration.png)

Необходимы следующие два поля:

- **Идентификатор**. Это значение должен однозначно определять приложение, для которого единого входа выполняется настройка. Можно найти это значение как **издателя** элемент в **AuthnRequest** (запросе SAML), отправляемых приложением. Это значение также отображается как **идентификатор сущности** во всех метаданных SAML, предоставленных приложением. См. в документации по SAML приложения сведения о том, что его **идентификатор сущности** или **аудитории** значение.

  В следующем коде показан как **идентификатор** или **издателя** появляется в запросе SAML, который приложение отправляет в Azure AD:

  ```xml
  <samlp:AuthnRequest
  xmlns="urn:oasis:names:tc:SAML:2.0:metadata"
  ID="id6c1c178c166d486687be4aaf5e482730"
  Version="2.0" IssueInstant="2013-03-18T03:28:54.1839884Z"
  xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol">
    <Issuer xmlns="urn:oasis:names:tc:SAML:2.0:assertion">https://www.contoso.com</Issuer>
  </samlp:AuthnRequest>
  ```

- **URL-адрес ответа**. URL-адрес ответа является, где приложение ожидает токен SAML. Этот URL-адрес также называется URL-адрес службы (ACS) для обработчика утверждение. Сведения об URL-адресе ответа токена SAML или URL-адресе ACS см. в документации по SAML приложения.

  Чтобы настроить несколько URL-адреса ответа, можно использовать следующий сценарий PowerShell.

  ```powershell
  $sp = Get-AzureADServicePrincipal -SearchString "<Exact app name>"
  $app = Get-AzureADApplication -SearchString "<Exact app name>"
  $urllist = New-Object "System.Collections.Generic.List[String]"
  $urllist.Add("<reply URL 1>")
  $urllist.Add("<reply URL 2>")
  $urllist.Add("<reply URL 3>")
  Set-AzureADApplication -ObjectId $app.ObjectId -ReplyUrls $urllist
  Set-AzureADServicePrincipal -ObjectId $sp.ObjectId -ReplyUrls $urllist
  ```

Следующие три поля являются необязательными.

- **URL-адрес входа (инициированный поставщиком услуг только)** . Это значение указывает, где пользователь переходит для входа в это приложение. Если приложение выполняет единый вход, инициированный поставщиком услуг, то при переходе пользователя на этот URL-адрес, хранимой Процедуры выполняет необходимое перенаправление в Azure AD для проверки подлинности и входа пользователя. Если указать это поле, Azure AD использует этот URL-адрес для запуска приложения из Office 365 и панели доступа Azure AD. Если это поле пропущено, Azure AD выполняет инициированном поставщиком удостоверений единого входа во время запуска приложения из Office 365, на панели доступа Azure AD или URL-адрес единого входа Azure AD (который можно скопировать из **панели мониторинга** страницы).

- **Состояние ретранслятора**. Состояние ретранслятора можно указать в SAML, чтобы указать приложения для перенаправления пользователей после проверки подлинности. Это значение обычно представляет URL-адрес или URL-адрес, путь которого пользователи переходят в определенное расположение в приложении.

- **URL-адрес выхода**. Это значение используется для отправки ответа выхода SAML в приложение.

Дополнительные сведения см. в разделе [единый вход SAML протокола](../develop/single-sign-on-saml-protocol.md).

### <a name="review-or-customize-the-claims-issued-in-the-saml-token"></a>Проверка и настройка утверждений, созданных в токене SAML

При аутентификации пользователя в приложение Azure AD выдает приложения маркер SAML с сведения (или утверждения) о пользователе, которая однозначно идентифицирует. По умолчанию эта информация включает имя пользователя, адрес электронной почты, имя и Фамилия пользователя.

Чтобы просмотреть или изменить утверждения, которые передаются в маркере SAML для приложения:

- Перейдите к **атрибуты пользователя и утверждения** и выберите пункт **изменить** значок. **Атрибуты пользователя и утверждения** появится страница.

![Показана страница атрибуты и утверждения пользователя](./media/configure-single-sign-on-non-gallery-applications/user-attributes-and-claims.png)

Может потребоваться изменить утверждения, выпущенные в маркере SAML, по двум причинам:

- Возможно, приложение ожидает утверждения с другим набором URI и значениями.
- Приложению требуется **имя значение идентификатора** утверждение, которое будет отличаться от имени пользователя (также известный как имя участника-пользователя), хранится в платформе Microsoft identity.

Дополнительные сведения см. в разделе [Практическое руководство. Настройка утверждений, выпущенных в маркере SAML для корпоративных приложений](../develop/active-directory-saml-claims-customization.md).

### <a name="review-certificate-expiration-data-status-and-email-notification"></a>Проверьте дату истечения срока действия сертификата, его состояние и параметры уведомления по электронной почте

При создании коллекции или приложения не из коллекции Azure AD создает сертификат конкретного приложения, истечения срока действия три года с момента создания. Этот сертификат понадобится вам, чтобы настроить доверие между Azure AD и приложением. Дополнительные сведения о формате сертификата см. в документации по SAML приложения.

Из Azure AD, можно загрузить активный сертификат в формате Base64 или Raw непосредственно из главного **задать вверх единого входа с помощью SAML** страницы. Кроме того активный сертификат можно получить, загрузив XML-файл метаданных приложения или с помощью URL-адрес метаданных федерации приложения.

Чтобы просмотреть, создать и скачать сертификаты (активное или неактивное), перейдите к **сертификат подписи SAML** и выберите пункт **изменить** значок. **Сертификат подписи SAML** отображается.

![Показана страница сертификат подписи SAML](./media/configure-single-sign-on-non-gallery-applications/saml-signing-certificate.png)

Убедитесь, что у сертификата есть указанные ниже элементы.

- *Дата срока действия.* Вы можете настроить срок до трех лет в будущем.
- *Состояние active для необходимый сертификат.* Если состояние — **неактивно**, измените состояние на **Active**. Чтобы изменить состояние, щелкните правой кнопкой мыши необходимый сертификат строки и выберите **сделать сертификат активным**.
- *Правильная настройка параметра подписи и алгоритма.*
- *Адреса электронной почты правильный уведомлений.* Когда активного сертификата приближается Дата истечения срока действия, Azure AD отправляет уведомление на адрес электронной почты, настроенные в этом поле.  

Дополнительные сведения см. в разделе [Управление сертификатами для федеративного единого входа](manage-certificates-for-federated-single-sign-on.md) и [расширенные параметры подписи сертификата в маркере SAML](certificate-signing-options.md).

### <a name="set-up-target-application"></a>Настройка конечного приложения

Чтобы настроить единый вход, найдите в документации к приложению. Чтобы найти в документации, перейдите к **Настройка \<имя_приложения >** и выберите пункт **пошаговые инструкции**. Документация отобразится в **Настройка единого входа** страницы. Эта страница служит для заполнения **URL-адрес входа**, **Azure AD идентификатор**, и **URL-адрес выхода** значения в **Настройка \<имя приложения >** заголовок.

Необходимые значения зависят от приложения. Дополнительные сведения см. в документации к SAML приложения. **URL-адрес входа** и **URL-адрес выхода** значения, которые разрешаются в той же конечной точке, который является конечной точкой обработки запроса SAML для вашего экземпляра Azure AD. **Azure AD идентификатор** значение **издателя** в маркере SAML, выпущенные для приложения.

### <a name="assign-users-and-groups-to-your-saml-application"></a>Назначение пользователей и групп приложению SAML

После настройки приложения для использования Azure AD в качестве поставщика удостоверений на основе SAML, почти все готово для тестирования. Из соображений безопасности Azure AD только выдает маркер, что позволяет пользователю входить в приложение, если Azure AD предоставил доступ для пользователя. Пользователи могут получить доступ напрямую или через членство в группе.

Чтобы назначить нового пользователя или группы для приложения:

1. На боковой панели приложения выберите **пользователей и групп**. **\<Имя приложения >-пользователи и группы** откроется страница, показывающий текущий список назначенных пользователей и групп.
1. Выберите **Добавление пользователей**. **Добавьте назначения** появится страница.
1. Выберите **пользователей и групп (\<номер > выбрано)** . **Пользователей и групп** откроется страница со списком доступных пользователей и групп.
1. Тип или прокрутки для поиска пользователя или группу, которую вы хотите назначить из списка.
1. Выберите каждого пользователя или группы, который требуется добавить, а затем выберите **выберите** кнопки. **Пользователей и групп** страницы исчезнет.
1. В **добавьте назначения** выберите **назначить**. **\<Имя приложения >-пользователи и группы** отображается страница с дополнительных пользователей, перечисленных в списке.

   ![Показана страница приложения пользователей и групп](./media/configure-single-sign-on-non-gallery-applications/application-users-and-groups.png)

Из этого списка вы можете:

- Удаление пользователя.
- Измените их роли.
- Обновите свои учетные данные (имя пользователя и пароль), чтобы пользователь для проверки подлинности в приложение из панели доступа пользователя.

Можно изменить или удалить одновременно несколько пользователей или групп.

Назначение пользователя позволяет Azure AD для выдачи маркера пользователя. Кроме того, в результате этого действия на панели доступа появится плитка этого приложения. Появляется Плитка приложения также отображается в средстве запуска приложений Office 365, если пользователь использует Office 365.

> [!NOTE]
> Вы можете загрузить логотип, который будет отображаться на плитке приложения. Для этого нажмите кнопку **Загрузить логотип** на вкладке **Настройка** для этого приложения.

### <a name="test-the-saml-application"></a>Тестирование приложения SAML

Перед тестированием приложения SAML, вам необходимо настроить приложение в Azure AD и назначены приложению пользователей или групп. Чтобы протестировать приложение SAML, выберите **единого входа**, чтобы вернуться в **вход на базе SAML** страницы. (Если другой метод единого входа была фактически, выберите **изменить режимы единого входа** > **SAML** слишком.) Затем в **тестирования единого входа с \<имя_приложения >** щелкните **теста**. Дополнительные сведения см. в разделе [на основе SAML, отладка единого входа в приложения в Azure Active Directory](../develop/howto-v1-debug-saml-sso-issues.md).

## <a name="password-single-sign-on"></a>Единый вход по паролю

Выберите этот параметр, чтобы настроить [паролю единого входа](what-is-single-sign-on.md) веб-приложения с HTML-страницу входа в систему. Единый вход с помощью пароля (хранение пароля в хранилище) позволяет управлять доступом и паролями для веб-приложений, которые не поддерживают федерацию удостоверений. Это также полезно в ситуациях, где несколько пользователей для совместного использования одной учетной записи, например к учетным записям приложения социальных сетей в организации.

После выбора **паролю**, вам будет предложено ввести URL-адрес приложения веб-страницы входа.

![Показана страница URL-адрес входа для ввода URL-адрес входа](./media/configure-single-sign-on-non-gallery-applications/password-based-sso.png)

Затем выполните следующие действия:

1. Введите URL-адрес. Эта строка должна быть страницы, где поле ввода имени пользователя.
1. Щелкните **Сохранить**. Azure AD пытается выполнить анализ страницы входа для ввода имени пользователя и пароля.
1. Если Azure AD синтаксический анализ происходит сбой попытки, выберите **Настройка \<имя приложения > Параметры пароля единого входа** для отображения **Настройка единого входа** страницы. (В случае успеха, можно пропустить оставшуюся часть этой процедуры.)
1. Выберите **вручную обнаруживать поля для входа в систему**. Появятся дополнительные инструкции, описывающее Ручное обнаружение поля входа.

   ![Ручная настройка с использованием пароля единого входа](./media/configure-single-sign-on-non-gallery-applications/password-configure-sign-on.png)

1. Выберите **полей входа в систему**. В записи о состоянии будет открыта страница в новой вкладке, вывода сообщения **записи метаданных в данный момент**.
1. Если **расширение панели доступа нужно** поле отображается в новой вкладке, выберите **установить сейчас** для установки **Мои расширение защищенного приложения вход** расширение браузера. (Расширение браузера требуется Microsoft Edge, Chrome или Firefox.) Установите, запустить и включить расширение и обновите страницу состояния записи.

   Затем расширение браузера откроется другую вкладку, которая отображает введенный URL-адрес.

1. На вкладке введенный URL-адрес выполните вход в систему. Заполните поля имени пользователя и пароля и попробуйте выполнить вход. (Не нужно указать правильный пароль.)

   Появится запрос для сохранения записанного поля входа в систему.

1. Нажмите кнопку **ОК**. Закрытие вкладки, расширения браузера обновляет страницу состояния «записи» с сообщением **метаданных был обновлен для приложения**и браузер на этой вкладке также закрывается.
1. В Azure AD **Настройка единого входа** выберите **ОК, мне удалось войти в приложение успешно**.
1. Нажмите кнопку **ОК**.

После захвата страницы входа в систему, может назначать пользователей и групп, и можно настроить политики учетных данных, как и для обычных [пароль приложения с единым ВХОДОМ](what-is-single-sign-on.md).

> [!NOTE]
> Вы можете загрузить логотип, который будет отображаться на плитке приложения. Для этого нажмите кнопку **Загрузить логотип** на вкладке **Настройка** для этого приложения.

## <a name="existing-single-sign-on"></a>Существующий единый вход

Выберите этот параметр, чтобы добавить ссылку на приложение на портале панели доступа Azure AD или Office 365 в вашей организации. Этот метод можно использовать для добавления ссылок на пользовательские веб-приложений, использующих в настоящий момент служб федерации Active Directory (или другую службу федерации) вместо проверки подлинности Azure AD. Еще он позволяет просто добавить глубокие ссылки на определенные страницы SharePoint или другие веб-сайты. Они появятся на панели доступа пользователя.

После выбора **связанные**, вам будет предложено ввести URL-адрес для приложения. Введите URL-адрес и выберите **Сохранить**. Назначения пользователей и групп для приложения, который вызывает приложение появится в [запуска приложений Office 365](https://blogs.office.com/2014/10/16/organize-office-365-new-app-launcher-2/) или [панель доступа Azure AD](end-user-experiences.md) для этих пользователей.

> [!NOTE]
> Вы можете загрузить логотип, который будет отображаться на плитке приложения. Для этого нажмите кнопку **Загрузить логотип** на вкладке **Настройка** для этого приложения.

## <a name="related-articles"></a>Связанные статьи

- [Практическое руководство. Настройка утверждений, выпущенных в маркере SAML для корпоративных приложений](../develop/active-directory-saml-claims-customization.md)
- [Отладка на основе SAML единого входа в приложения в Azure Active Directory](../develop/howto-v1-debug-saml-sso-issues.md)
- [Платформа удостоверений Майкрософт (прежнее название — Azure Active Directory для разработчиков)](../develop/index.yml)
