---
title: Как определить, когда конкретный пользователь получит доступ к приложению | Документы Майкрософт
description: В этой статье описано, как определить, когда критически важный пользователь получит доступ к приложению, которое было настроено для подготовки пользователя в Azure AD.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 06/12/2019
ms.author: mimart
ms.reviewer: arvinh
ms.collection: M365-identity-device-management
ms.openlocfilehash: 1fd6b70e7a4542a4cad2ee95fa280ddf8fbe6553
ms.sourcegitcommit: 5cb0b6645bd5dff9c1a4324793df3fdd776225e4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/21/2019
ms.locfileid: "67310039"
---
# <a name="check-the-status-of-user-provisioning"></a>Проверьте состояние подготовки пользователей

Службу подготовки Azure AD запускает один начальной подготовки цикл для исходной и целевой системы, следуют периодические циклы добавочного. При настройке подготовки для приложения, можно проверить текущее состояние службы подготовки и см. в разделе, когда пользователь сможет получить доступ к приложению.

## <a name="view-the-provisioning-progress-bar-preview"></a>Просмотр подготовки индикатор выполнения (Предварительная версия)

 На **Подготовка** страницы для приложения, можно просмотреть состояние подготовки службы Azure AD. **Текущее состояние** раздел находится в нижней части страницы содержатся начат ли цикл подготовки подготовки учетных записей пользователей. Можно следить за ходом выполнения цикла, см. в разделе, сколько пользователей и группы были подготовлены и узнать, сколько ролей создаются.

При первой настройке автоматической подготовки, **текущее состояние** в нижней части страницы отображается состояние начальной подготовки цикла. В этом разделе обновляется каждый раз при выполнении добавочного цикла. Отображаются следующие сведения:
- Тип подготовки цикл (первоначальное или добавочное), который выполняется в данный момент или последний раз была завершена.
- Объект **индикатор** процентное отношение цикла подготовки, которая завершена. Процент отражает количество страниц, которые подготовлены. Обратите внимание на то, что каждая страница может содержать несколько пользователей или групп, поэтому процент не соответствуют непосредственно число пользователей, групп или ролей, которые подготовлены.
- Объект **обновить** кнопки, можно использовать для сохранения представления обновления.
- Число **пользователей** и **группы** подготовлены и количество ролей, созданных. Во время начального цикла **пользователей** число подсчитывается на 1 при создании или обновлении пользователя и он идет вниз на 1 при удалении пользователя. За один цикл добавочной, не влияют на пользователей обновления **пользователей** число; числа изменений только в том случае, если выполняется создание или удаление пользователей.
- Объект **Просмотр журналов аудита** ссылку, откроется аудита Azure AD журналы об сведения обо всех операциях, выполняемых службой подготовки пользователей, включая подготовку состояние для отдельных пользователей (см. в разделе [журналоваудитаиспользуйте](#use-audit-logs-to-check-a-users-provisioning-status)раздел ниже).

После завершения подготовки цикла **статистику с начала** приводится совокупное число пользователей и групп, которые были подготовлены к дате, а также дата выполнения и продолжительность последнего цикла. **Идентификатор действия** однозначно определяет последнего цикла подготовки. **Идентификатор задания** — это уникальный идентификатор для подготовки задания и относящиеся к приложению в клиенте.

Ход подготовки можно просмотреть на портале Azure, в **Azure Active Directory &gt; корпоративных приложений &gt; \[имя_приложения\] &gt; Подготовка** вкладки.

![Индикатор хода выполнения подготовки страницы](media/application-provisioning-when-will-provisioning-finish-specific-user/provisioning-progress-bar-section.png)

## <a name="use-audit-logs-to-check-a-users-provisioning-status"></a>Использовать журналы аудита, чтобы проверить состояние подготовки пользователя

Чтобы просмотреть состояние подготовки для выбранного пользователя, обратитесь к журналам аудита в Azure AD. Всех операций, выполняемых службой подготовки в Azure AD записываются журналы аудита. Это включает в себя все операции, выполняемые в исходной и целевой систем и данных пользователей, которые считывания или записи во время каждой операции чтения и записи.

Журналы аудита подготовки можно получить на портале Azure, в **Azure Active Directory &gt; корпоративных приложений &gt; \[имя_приложения\] &gt; журналы аудита** вкладки. Чтобы просмотреть события подготовки только для этого приложения, отфильтруйте журналы по категории **Учетная запись подготовки**. Найти пользователей можно по "идентификатору сопоставления", который был назначен для этих пользователей в сопоставлениях атрибутов. 

Например, если в качестве атрибута сопоставления в Azure AD выбраны "имя участника-пользователя" или "адрес электронной почты", и для пользователя, который не подготавливается, этот атрибут имеет значение "audrey@contoso.com", найдите "audrey@contoso.com" в журналах аудита и просмотрите результаты поиска.

В журналах аудита записываются все операции, которые выполняются службой подготовки, в том числе:

* Получение сведений о назначенных пользователях, которые находятся в области для подготовки, в Azure AD
* Получение сведений о наличии этих пользователей от целевого приложения
* Сравнение объектов пользователя в разных системах
* Добавление, обновление или отключение учетной записи пользователя в целевой системе на основе сравнения

Дополнительные сведения о том, как читать журналы аудита на портале Azure см. в разделе [подготовки руководство по отчетам](check-status-user-account-provisioning.md).

## <a name="how-long-will-it-take-to-provision-users"></a>Сколько времени занимает подготовка пользователей?
При использовании автоматической подготовки пользователей с приложением Azure AD автоматически подготавливает и обновляет учетные записи пользователей в приложении на основе [назначения пользователей и групп](https://docs.microsoft.com/azure/active-directory/active-directory-coreapps-assign-user-azure-portal) по регулярным запланированным интервал времени, обычно каждые 10 минут.

Время, необходимое для данного пользователя должны быть подготовлены, зависит главным образом выполняется ли задание подготовки начальную синхронизацию или добавочную синхронизацию.

- Для **начальной синхронизации**, время задания зависит от многих факторов, включая количество пользователей и групп в области для подготовки и общее число пользователей и группы в исходной системе. Первая синхронизация приложения с Azure AD может занять от 20 минут до нескольких часов, в зависимости от размера каталога Azure AD и количества пользователей в области подготовки. Полный список факторов, влияющих на производительность начальной синхронизации, кратко описан далее в этом разделе.

- Для **добавочную синхронизацию** после начальной синхронизации времени выполнения заданий, как правило, будет работать быстрее (например, в течение 10 минут), так как служба подготовки сохраняет водяные знаки, которые представляют состояние обеих систем после начальной синхронизации, повышение производительности последующих операций синхронизации. Время задания зависит от числа изменений, обнаруженных в этом цикле подготовки. Если менее 5 000 пользователей или изменений членства в группах, задание можно завершить в одном цикле добавочные подготовки. 

В следующей таблице перечислены данные о времени синхронизации, необходимом для общих сценариев подготовки. В этих сценариях исходной системой является Azure AD, а целевой — приложение SaaS. Время синхронизации являются производными от статистического анализа заданий синхронизации для приложений SaaS, ServiceNow, Workplace, Salesforce и G Suite.


| Конфигурация области | Пользователи, группы и участники в области | Длительность начальной синхронизации | Длительность добавочной синхронизации |
| -------- | -------- | -------- | -------- |
| Синхронизация только назначенных пользователей и групп |  < 1000 |  < 30 минут | < 30 минут |
| Синхронизация только назначенных пользователей и групп |  1000–10 000 | 142–708 минут | < 30 минут |
| Синхронизация только назначенных пользователей и групп |   10 000–100 000 | 1170–2,340 минут | < 30 минут |
| Синхронизация всех пользователей и групп в Azure AD |  < 1000 | < 30 минут  | < 30 минут |
| Синхронизация всех пользователей и групп в Azure AD |  1000–10 000 | 30–120 минут | < 30 минут |
| Синхронизация всех пользователей и групп в Azure AD |  10 000–100 000  | 713–1425 минут | < 30 минут |
| Синхронизация всех пользователей в Azure AD|  < 1000  | < 30 минут | < 30 минут |
| Синхронизация всех пользователей в Azure AD | 1000–10 000  | 43–86 минут | < 30 минут |


Для конфигурации **синхронизации только назначенных пользователей и групп** можно использовать следующие формулы, чтобы определить приблизительную минимальную и максимальную длительность **начальной синхронизации**:

    Minimum minutes =  0.01 x [Number of assigned users, groups, and group members]
    Maximum minutes = 0.08 x [Number of assigned users, groups, and group members] 
    
Сведения о факторах, влияющих на время, необходимое для завершения **начальной синхронизации**:

- Общее количество пользователей и групп, которые будут подготовлены.

- Общее количество пользователей, групп и участников группы, находящихся в исходной системе (Azure AD).

- Ли пользователи в области для подготовки сопоставляются с существующим пользователям в целевом приложении или должны быть созданы в первый раз. Заданий синхронизации, для которых все пользователи создаются в первый раз занимает приблизительно *два раза* как синхронизировать задания, для которых все пользователи сопоставляются с существующим пользователям.

- Количество ошибок в [журналах аудита](check-status-user-account-provisioning.md). Производительность также снижается, если возникает большое количество ошибок и служба подготовки перешла в состояние карантина.    

- Ограничения частоты и регулирования запросов, реализованные целевой системой. Некоторые целевые системы накладывают ограничения на частоту запросов и регулирования, которые могут повлиять на производительность во время больших операций синхронизации. В этих условиях приложение, получающее слишком много запросов за короткий промежуток времени, может снизить частоту реагирования или закрыть подключение. Чтобы повысить производительность, соединитель необходимо настроить таким образом, чтобы количество отправляемых запросов соответствовало количеству запросов, которые может обработать приложение. Соединители подготовки, созданные корпорацией Майкрософт, позволяют внести эту корректировку. 

- Количество и размеры назначенных групп. Синхронизация назначенных групп длится дольше, чем синхронизация пользователей. Число и размер назначенных групп оказывают влияние на производительность. Если в приложении [включена функция сопоставления для синхронизации объектов группы](customize-application-attributes.md#editing-group-attribute-mappings), свойства группы (например, названия групп и членства) синхронизируются в дополнение к пользователям. Эти дополнительные синхронизации занимают больше времени, чем синхронизация только объектов пользователей.

## <a name="next-steps"></a>Дальнейшие действия
[Автоматическая подготовка пользователей и ее отзыв для приложений SaaS в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-app-provisioning)
