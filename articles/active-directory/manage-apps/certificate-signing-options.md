---
title: Расширенные варианты подписания сертификатов ТОкенов SAML для приложений Azure AD
description: Узнайте, как использовать расширенные параметры подписи сертификата в маркере SAML для предварительно интегрированных приложений в Azure Active Directory
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 03/25/2019
ms.author: mimart
ms.reviewer: jeedes
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: dc911ff06208b1fd0af7651c8274a45c958bf0cd
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "77159205"
---
# <a name="advanced-certificate-signing-options-in-the-saml-token-for-gallery-apps-in-azure-active-directory"></a>Расширенные параметры подписи сертификата в маркере SAML для приложений коллекции в Azure Active Directory

На сегодняшний день Azure Active Directory (Azure AD) поддерживает тысячи предварительно интегрированных приложений, доступных в коллекции приложений Azure Active Directory. Более 500 приложений поддерживают одиночный входе, используя протокол [«Язык утверждения безопасности»](https://wikipedia.org/wiki/Security_Assertion_Markup_Language) (SAML) 2.0, например, приложение [NetSuite.](https://azuremarketplace.microsoft.com/marketplace/apps/aad.netsuite) Когда клиент проверяет подлинность приложения через Azure AD с помощью SAML, Azure AD отправляет токен в приложение (через HTTP POST). Затем приложение проверяет и использует маркер для регистрации в клиенте вместо запроса имени пользователя и пароля. Данные токены SAML подписываются с помощью уникального сертификата, который создается в Azure AD, а также определенных стандартных алгоритмов.

Azure AD использует некоторые параметры по умолчанию для приложений коллекции. Значения по умолчанию настраиваются в зависимости от требований к приложению.

В Azure AD можно настроить параметры подписания сертификата и алгоритм подписания сертификата.

## <a name="certificate-signing-options"></a>Параметры подписи сертификата

Azure AD поддерживает три варианта подписывания сертификатов.

* **Утверждение знака SAML**. Этот параметр по умолчанию задается для большинства приложений коллекции. При выборе этой опции Azure AD в качестве поставщика идентификационных данных (IdP) подписывает утверждение и сертификат SAML сертификатом [X.509](https://wikipedia.org/wiki/X.509) приложения.

* **Ответ знака SAML**. Если вы выберете эту опцию, Azure AD в качестве IdP подписывает ответ SAML сертификатом X.509 приложения.

* **Ответ знака SAML и утверждение**. Если вы выберете эту опцию, Azure AD в качестве IdP подписывает весь токен SAML сертификатом X.509 приложения.

## <a name="certificate-signing-algorithms"></a>Алгоритмы подписывания сертификатов

Azure AD поддерживает два алгоритма подписания, или безопасные алгоритмы хэша (SHAs), чтобы подписать ответ SAML:

* **ША-256**. Azure AD использует этот алгоритм по умолчанию для подписывания ответов SAML. Это новейший алгоритм и является более безопасным, чем SHA-1. Большинство приложений поддерживает алгоритм SHA-256. Если приложение поддерживает только алгоритм подписывания SHA-1, можно выбрать его. В противном случае рекомендуется использовать алгоритм SHA-256 для подписывания ответов SAML.

* **ША-1**. Этот алгоритм старше, и он рассматривается как менее безопасный, чем SHA-256. Если приложение поддерживает только этот алгоритм подписывания, его можно выбрать из раскрывающегося списка **Алгоритм подписывания**. В этом случае Azure AD будет подписывать ответы SAML с помощью алгоритма SHA-1.

## <a name="change-certificate-signing-options-and-signing-algorithm"></a>Изменить параметры подписания сертификата и алгоритм подписания

Чтобы изменить параметры подписания сертификата SAML приложения и алгоритм подписания сертификата, выберите приложение, о котором идет речь:

1. На [портале Active Directory На портале Azure Active.](https://aad.portal.azure.com/) Отображается страница **центра adin-центра Azure Active Directory.**
1. В области слева выберите **Корпоративные приложения**. Отображается список корпоративных приложений в вашей учетной записи.
1. Выберите приложение. Отображается страница обзора приложения.

   ![Пример: Страница обзора приложений](./media/certificate-signing-options/application-overview-page.png)

Затем измените параметры подписания сертификата в токене SAML для этого приложения:

1. В левой панели страницы обзора приложения выберите **Единый подсобный знак.**
1. Если **появляется страница Set up Single Sign-On с SAML - Предварительный просмотр,** перейдите на шаг 5.
1. Если страница «Выберите одну страницу **метода входного»** не отображается, выберите **режимы «Изменение одного ввоза»** для отображения этой страницы.
1. На **странице «Выберите одну страницу, подавив на» метод,** выберите **SAML,** если он доступен. (Если **SAML** недоступен, приложение не поддерживает SAML, и вы можете проигнорировать остальную часть этой процедуры и статьи.)
1. В **настройке одноразового регистра с SAML - Предварительный** просмотр страницы, найти **SAML Подпись Сертификат** заголовок и выберите значок **edit** (карандаш). Появляется страница **сертификата подписи SAML.**

   ![Пример: страница сертификата подписи SAML](./media/certificate-signing-options/saml-signing-page.png)

1. В раскрывающемся списке **Вариант подписывания** выберите **Ответ знака SAML**, **Утверждение знака SAML** или **Ответ знака SAML и утверждение**. Описания этих параметров появляются ранее в этой статье в [вариантах подписания сертификата.](#certificate-signing-options)
1. В раскрывающемся списке **Алгоритм подписывания** выберите **SHA-1** или **SHA-256**. Описания этих параметров появляются ранее в этой статье в разделе [алгоритмов подписания сертификата.](#certificate-signing-algorithms)
1. Если вы удовлетворены своим выбором, выберите **Save,** чтобы применить новые настройки сертификата подписи SAML. В противном случае выберите **X,** чтобы отказаться от изменений.

## <a name="next-steps"></a>Дальнейшие действия

* [Настройка единого входа для приложений, которых нет в коллекции приложений Azure Active Directory](configure-federated-single-sign-on-non-gallery-applications.md)
* [Устранение неполадок единого входа на основе SAML](../azuread-dev/howto-v1-debug-saml-sso-issues.md)
