---
title: Устранение неполадок службы совместной работы B2B — Azure Active Directory | Документация Майкрософт
description: Способы устранения распространенных проблем со службой совместной работы Azure Active Directory B2B.
services: active-directory
ms.service: active-directory
ms.subservice: B2B
ms.topic: conceptual
ms.date: 05/25/2017
ms.author: mimart
author: v-miegge
manager: daveba
ms.reviewer: sasubram
ms.custom: it-pro, seo-update-azuread-jan
ms.collection: M365-identity-device-management
ms.openlocfilehash: c2a0eaf75debf694421ac9e5f2f7eb13891a20cf
ms.sourcegitcommit: 2028fc790f1d265dc96cf12d1ee9f1437955ad87
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/30/2019
ms.locfileid: "64917351"
---
# <a name="troubleshooting-azure-active-directory-b2b-collaboration"></a>Устранение неполадок службы совместной работы Azure Active Directory B2B

В этой статье описаны способы устранения распространенных проблем, возникающих в службе совместной работы Azure Active Directory (Azure AD) B2B.

## <a name="ive-added-an-external-user-but-do-not-see-them-in-my-global-address-book-or-in-the-people-picker"></a>После добавления внешнего пользователя он не отображается в глобальной адресной книге или в средстве выбора пользователей

В тех случаях, когда данные внешних пользователей не заполняются в списке, репликация объекта может занять несколько минут.

## <a name="a-b2b-guest-user-is-not-showing-up-in-sharepoint-onlineonedrive-people-picker"></a>Гостевой пользователь B2B не отображается в средстве выбора людей SharePoint Online или OneDrive

Возможность поиска существующих гостевых пользователей в средстве выбора пользователей SharePoint Online (SPO) отключена по умолчанию для согласования с поведением предыдущих версий.

Вы можете включить эту функцию, используя параметр ShowPeoplePickerSuggestionsForGuestUsers на уровне семейства веб-сайтов и коллекции клиентов. Задать параметр этой функции можно с помощью командлетов SPOTenant и SPOSite, которые позволяют участникам искать всех существующих гостевых пользователей в каталоге. Изменения в области клиента не влияют на уже подготовленные сайты SPO.

## <a name="invitations-have-been-disabled-for-directory"></a>Приглашения отключены для каталога

Если появляется уведомление, указывающее, что у вас нет разрешений на приглашение пользователей, проверьте в разделе "Параметры пользователей", есть ли у вашей учетной записи полномочия на приглашение внешних пользователей.

![Снимок экрана, показывающий параметры внешних пользователей](media/troubleshoot/external-user-settings.png)

Если вы недавно изменили эти параметры или назначили пользователю роль лица, приглашающего гостей, то изменения вступят в силу примерно через 15–60 минут.

## <a name="the-user-that-i-invited-is-receiving-an-error-during-redemption"></a>Пользователь, которого я пригласил, в процессе активации получает сообщение об ошибке

Ниже перечислены распространенные ошибки.

### <a name="invitees-admin-has-disallowed-emailverified-users-from-being-created-in-their-tenant"></a>Администратор приглашенного пользователя запретил создавать в клиенте пользователей с атрибутом EmailVerified

Если приглашаются пользователи из организации, в которой используется каталог Azure Active Directory, где отсутствует учетная запись определенного пользователя (например, пользователь не существует в каталоге AAD contoso.com). Администратор contoso.com мог настроить политику, которая запрещает создавать пользователей. Пользователь должен уточнить у администратора, разрешается ли приглашать внешних пользователей. Администратору внешнего пользователя может потребоваться разрешить в своем домене пользователей с проверенным адресом электронной почты (сведения о разрешении пользователей с проверенным адресом электронной почты см. в этой [статье](/powershell/module/msonline/set-msolcompanysettings?view=azureadps-1.0)).

![Сообщение о том, что клиент не поддерживает сообщения электронной почты пользователей, проверенных](media/troubleshoot/allow-email-verified-users.png)

### <a name="external-user-does-not-exist-already-in-a-federated-domain"></a>Внешний пользователь уже не существует в федеративном домене

Если используется проверка подлинности федерации, и пользователь уже не существует в Azure Active Directory, пригласить его невозможно.

Для устранения этой проблемы администратор внешнего пользователя должен синхронизировать учетную запись этого пользователя с Azure Active Directory.

## <a name="how-does--which-is-not-normally-a-valid-character-sync-with-azure-ad"></a>Как символ "\#", который обычно является недопустимым, синхронизируется с Azure AD?

Знак "\#" зарезервирован для имен участников-пользователей службы совместной работы Azure AD B2B или внешних пользователей (имя учетной записи приглашенного пользователя user@contoso.com преобразуется в user_contoso.com#EXT#@fabrikam.onmicrosoft.com). Поэтому при входе на портал Azure не разрешается использовать знак "\#" в именах участников-пользователей из локальной среды. 

## <a name="i-receive-an-error-when-adding-external-users-to-a-synchronized-group"></a>При добавлении внешних пользователей в синхронизированную группу появляется сообщение об ошибке

Внешних пользователей можно добавлять только в "назначенные" группы или группы "безопасности", а не в локально управляемые группы.

## <a name="my-external-user-did-not-receive-an-email-to-redeem"></a>Внешний пользователь не получил оправленное ему сообщение для активации

Приглашенному пользователю следует обратиться к своему поставщику услуг Интернета или проверить настройки фильтра нежелательной почты и убедиться, что этот адрес разрешен: Invites@microsoft.com

## <a name="i-notice-that-the-custom-message-does-not-get-included-with-invitation-messages-at-times"></a>Пользовательское сообщение иногда не включаются в сообщение с приглашением

Для соблюдения требований законов о защите конфиденциальности данных наши API-интерфейсы не включают пользовательские сообщения в текст сообщений с приглашением:

- если в приглашающем клиенте не указан адрес электронной почты приглашающего;
- если приглашение отправляет субъект-служба приложения.

Если вам важно использовать именно этот сценарий, вы можете запретить отправку сообщения с приглашением из API-интерфейса, и отправить его через любой другой механизм отправки электронной почты. Проконсультируйтесь к юристом своей организации, чтобы убедиться, что отправляемые таким образом сообщения не нарушают требования законов о защите конфиденциальности данных.

## <a name="you-receive-an-aadsts65005-error-when-you-try-to-log-in-to-an-azure-resource"></a>Произошла ошибка «AADSTS65005» при попытке войти в ресурс Azure

Пользователь, имеющий гостевая учетная запись не может войти в систему и получает следующее сообщение об ошибке:

    AADSTS65005: Using application 'AppName' is currently not supported for your organization contoso.com because it is in an unmanaged state. An administrator needs to claim ownership of the company by DNS validation of contoso.com before the application AppName can be provisioned.

Пользователь имеет учетную запись пользователя Azure и вирусном клиенте, прерван или неуправляемый. Кроме того, существует не глобальных или Корпоративные администраторы в клиенте.

Чтобы устранить эту проблему, необходимо выполнить над Брошенный клиента. Ссылаться на [перехватить неуправляемого каталога от имени администратора в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/users-groups-roles/domains-admin-takeover). Также необходимо обращаться к DNS Интернета для рассматриваемого суффикс домена для прямого доказательства того, вы можете контролировать пространства имен. После клиента возвращаются в управляемом состоянии, вам следует обсудить с клиентом ли удаления пользователей и проверенное имя домена является наилучшим вариантом для своей организации.

## <a name="a-guest-user-with-a-just-in-time-or-viral-tenant-is-unable-to-reset-their-password"></a>Гостевому пользователю клиента JIT или "вирусного" клиента не удается сбросить пароль

Если клиентом удостоверений является клиент JIT или вирусный клиент (то есть отдельный неуправляемый клиент Azure), только гостевой пользователь может сбросить пароль. Иногда организация будет [управлять вирусными клиентами](https://docs.microsoft.com/azure/active-directory/users-groups-roles/domains-admin-takeover), которые создаются, когда сотрудники используют свои рабочие электронные адреса для регистрации в службах. После получения организацией контроля над вирусным клиентом только администратор в организации может сбросить пароль пользователя или включить SSPR. При необходимости приглашающая организация может удалить учетную запись гостя из каталога и повторно отправить приглашение.

## <a name="next-steps"></a>Дальнейшие действия

[Получение поддержки для службы совместной работы B2B](get-support.md)
