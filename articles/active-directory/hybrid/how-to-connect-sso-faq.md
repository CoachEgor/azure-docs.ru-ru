---
title: 'Azure AD Connect: простой единый вход — часто задаваемые вопросы | Документы Майкрософт'
description: Ответы на часто задаваемые вопросы о простом едином входе Azure Active Directory.
services: active-directory
keywords: что такое Azure AD Connect, установка Active Directory, необходимые компоненты для Azure AD, единый вход
documentationcenter: ''
author: billmath
manager: daveba
ms.assetid: 9f994aca-6088-40f5-b2cc-c753a4f41da7
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 10/07/2019
ms.subservice: hybrid
ms.author: billmath
ms.collection: M365-identity-device-management
ms.openlocfilehash: 7241c8dfbedb24f95c29ea9e1c3f763218a5668d
ms.sourcegitcommit: 11265f4ff9f8e727a0cbf2af20a8057f5923ccda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/08/2019
ms.locfileid: "72025676"
---
# <a name="azure-active-directory-seamless-single-sign-on-frequently-asked-questions"></a>Часто задаваемые вопросы о простом едином входе Azure Active Directory

В этой статье представлены часто задаваемые вопросы о простом едином входе Azure Active Directory. Следите за новым содержимым.

**Вопрос. Какие методы входа поддерживают простой единый вход с помощью**

Простой единый вход можно использовать вместе с методами [синхронизация хэша паролей](how-to-connect-password-hash-synchronization.md) или [сквозной проверки подлинности](how-to-connect-pta.md). Однако эту функцию нельзя использовать со службами федерации Active Directory (AD FS).

**Вопрос. простой единый вход — бесплатная функция?**

Это бесплатный компонент, и для его использования не требуются платные выпуски Azure AD.

**Вопрос. простой единый вход доступен в [Microsoft Azure — Германия облаке](https://www.microsoft.de/cloud-deutschland) и [Microsoft Azure для государственных организаций облаке](https://azure.microsoft.com/features/gov/)?**

Нет. Компонент "Простой единый вход" доступен только в международном экземпляре Azure AD.

**Вопрос. какие приложения используют преимущества `domain_hint` или `login_hint` возможности простого единого входа?**

Ниже приведен неполный список приложений, которые могут отправить эти параметры в Azure AD и тем самым обеспечить автоматический вход пользователей с помощью простого единого входа (то есть пользователю не требуется вводить имя пользователя или пароль):

| имя приложения; | Используемый URL-адрес приложения |
| -- | -- |
| Панель доступа | HTTPS:\//myapps.microsoft.com/contoso.com |
| Outlook on Web | HTTPS:\//outlook.office365.com/contoso.com |
| Порталы Office 365 | HTTPS:\//портал.оффице.ком? domain_hint = contoso. com, HTTPS:\//ВВВ.оффице.ком? domain_hint = contoso. com |

Кроме того, пользователи получают возможность автоматического входа, если приложение отправляет запросы на вход в конечные точки Azure AD, настроенные как клиенты, то есть HTTPS:\//login.microsoftonline.com/contoso.com/<.. > или HTTPS:\//login.microsoftonline.com/<tenant_ID>/<.. > — вместо общей конечной точки Azure AD — т. е. HTTPS:\//login.microsoftonline.com/common/<... >. Ниже приведен неполный список приложений, которые выполняют такие типы запросов на вход.

| имя приложения; | Используемый URL-адрес приложения |
| -- | -- |
| SharePoint Online | HTTPS:\//contoso.sharepoint.com |
| портале Azure | HTTPS:\//portal.azure.com/contoso.com |

В приведенных выше таблицах замените contoso.com своим доменным именем, чтобы получить соответствующие URL-адреса приложений для своего клиента.

Если вы хотите использовать автоматический единый вход для других приложений, сообщите нам об этом в разделе отзывов.

**Вопрос. поддерживает ли простой единый вход `Alternate ID` как имя пользователя вместо `userPrincipalName`?**

Да. Поддерживает ли простой единый вход `Alternate ID` в качестве имени пользователя, если это настроено в Azure AD Connect, как показано [здесь](how-to-connect-install-custom.md). Не все приложения Office 365 поддерживают `Alternate ID`. Заявление о поддержке см. в документации на приложения.

**Вопрос. Какова разница между интерфейсом единого входа, обеспечиваемым [присоединением к Azure AD](../active-directory-azureadjoin-overview.md) и простым входом в систему?**

После [присоединения к Azure AD](../active-directory-azureadjoin-overview.md) пользователи могут воспользоваться возможностями единого входа, если их устройства зарегистрированы в Azure AD. Эти устройства не должны быть присоединены к домену. Возможность единого входа обеспечивается с помощью *основных токенов обновления* (*PRT*), а не протокола Kerberos. Лучше всего эта возможность работает на устройствах с Windows 10. В браузере Microsoft Edge единый вход выполняется автоматически. Эта возможность также работает в Chrome с использованием расширения браузера.

В клиенте можно настроить и технологию единого входа, предоставленную после присоединения к Azure AD, и простой единый вход. Эти две возможности дополняют друг друга. Если включены обе эти технологии, приоритет имеет единый вход, предоставленный после присоединения к Azure AD.

**Вопрос. я хочу зарегистрировать устройства, отличные от Windows 10, в Azure AD без использования AD FS. Можно ли вместо этого использовать простой единый вход?**

Да, для этого сценария требуется версия 2.1 или более поздняя версия [клиента присоединения к рабочей области](https://www.microsoft.com/download/details.aspx?id=53554).

**Вопрос. как можно переключать ключ расшифровки Kerberos для учетной записи `AZUREADSSOACC` компьютера?**

Очень важно часто менять ключ расшифровки Kerberos компьютерной учетной записи `AZUREADSSOACC` (представляющей Azure AD) в локальном лесу AD.

>[!IMPORTANT]
>Мы настоятельно рекомендуем, чтобы вы меняли ключ расшифровки Kerberos хотя бы раз в 30 дней.

Выполните следующие действия на локальном сервере, на котором выполняется Azure AD Connect:

   **Шаг 1. Получение списка лесов AD, в которых включен простой единый вход**

   1. Сначала скачайте и установите [Azure PowerShell](https://docs.microsoft.com/powershell/azure/active-directory/overview).
   2. Перейдите в папку `%programfiles%\Microsoft Azure Active Directory Connect`.
   3. Импортируйте модуль PowerShell для простого единого входа с помощью следующей команды: `Import-Module .\AzureADSSO.psd1`.
   4. Откройте PowerShell от имени администратора. В PowerShell вызовите `New-AzureADSSOAuthenticationContext`. Появится всплывающее окно для ввода учетных данных глобального администратора клиента.
   5. Вызовите `Get-AzureADSSOStatus | ConvertFrom-Json`. Эта команда выводит список лесов AD (см. список "Домены"), в которых включена эта функция.

   **Шаг 2. Обновите ключ расшифровки Kerberos в каждом лесу AD, в котором он был настроен.**

   1. Вызовите `$creds = Get-Credential`. При запросе введите свои учетные данные администратора домена для нужного леса AD.

   > [!NOTE]
   >Имя пользователя учетных данных администратора домена необходимо указать в формате имени учетной записи SAM (contoso\johndoe или contoso. ком\жохндое). Мы используем доменную часть имени пользователя для указания контроллера домена администратора домена с помощью DNS.

   >[!NOTE]
   >Используемая учетная запись администратора домена не должна быть членом группы "защищенные пользователи". В этом случае операция завершится ошибкой.

   2. Вызовите `Update-AzureADSSOForest -OnPremCredentials $creds`. Эта команда обновляет ключ расшифровки Kerberos для компьютерной учетной записи `AZUREADSSOACC` в этом лесу AD и обновляет его в Azure AD.
   3. Повторите предыдущие шаги для каждого леса AD, где настроена эта функция.

   >[!IMPORTANT]
   >_Не_ выполняйте команду `Update-AzureADSSOForest` более одного раза. В противном случае функция перестанет действовать, пока не истечет срок действия пользовательского билета Kerberos и пока локальный экземпляр Active Directory не выдаст новый билет.

**Вопрос. как можно отключить простой единый вход?**

   **Шаг 1. Отключение функции в клиенте**

   **Вариант а. Отключение с помощью Azure AD Connect**
    
   1. Запустите Azure AD Connect, перейдите на страницу **Изменение параметров входа пользователя** и щелкните **Далее**.
   2. Затем снимите флажок **Включить единый вход**. Продолжайте выполнять указания мастера.

   После завершения работы мастера простой единый вход будет отключен на вашем клиенте. При этом вы увидите на экране следующее сообщение:

   "Единый вход теперь отключен, но для полной очистки нужен ряд ручных действий. Подробнее".

   Чтобы завершить очистку, выполните шаги 2 и 3 на локальном сервере с запущенным средством Azure AD Connect.

   **Вариант б. Отключение с помощью PowerShell**

   Выполните следующие действия на локальном сервере с запущенным средством Azure AD Connect:

   1. Сначала скачайте и установите [Azure PowerShell](https://docs.microsoft.com/powershell/azure/active-directory/overview).
   2. Перейдите в папку `%programfiles%\Microsoft Azure Active Directory Connect`.
   3. Импортируйте модуль PowerShell для простого единого входа с помощью следующей команды: `Import-Module .\AzureADSSO.psd1`.
   4. Откройте PowerShell от имени администратора. В PowerShell вызовите `New-AzureADSSOAuthenticationContext`. Появится всплывающее окно для ввода учетных данных глобального администратора клиента.
   5. Вызовите `Enable-AzureADSSO -Enable $false`.

   >[!IMPORTANT]
   >Отключение простого единого входа с помощью PowerShell не изменит состояние в Azure AD Connect. Простой единый вход будет отображаться включенным на странице **Изменение параметров входа пользователя**.

   **Шаг 2. Получение списка лесов AD, в которых включен простой единый вход**

   Выполните задачи 1–4 ниже, если вы отключили простой единый вход с помощью Azure AD Connect. Если вы отключили простой единый вход с помощью PowerShell, сразу переходите к задаче 5 ниже.

   1. Сначала скачайте и установите [Azure PowerShell](https://docs.microsoft.com/powershell/azure/active-directory/overview).
   2. Перейдите в папку `%programfiles%\Microsoft Azure Active Directory Connect`.
   3. Импортируйте модуль PowerShell для простого единого входа с помощью следующей команды: `Import-Module .\AzureADSSO.psd1`.
   4. Откройте PowerShell от имени администратора. В PowerShell вызовите `New-AzureADSSOAuthenticationContext`. Появится всплывающее окно для ввода учетных данных глобального администратора клиента.
   5. Вызовите `Get-AzureADSSOStatus | ConvertFrom-Json`. Эта команда выводит список лесов AD (см. список "Домены"), в которых включена эта функция.

   **Шаг 3. Вручную удалите учетную запись `AZUREADSSOACCT` компьютера из каждого леса AD, который вы видите в списке.**

## <a name="next-steps"></a>Дополнительная информация

- [**Краткое руководство**](how-to-connect-sso-quick-start.md) . получение и запуск простого единого входа Azure AD.
- [**Техническое руководство по сквозной проверке подлинности Azure Active Directory**](how-to-connect-sso-how-it-works.md). Сведения о том, как работает эта функция.
- [**Устранение неполадок**](tshoot-connect-sso.md). Узнайте, как устранить самые распространенные проблемы с этой функцией.
- [**UserVoice**](https://feedback.azure.com/forums/169401-azure-active-directory/category/160611-directory-synchronization-aad-connect). Отправка запросов новых функций.
