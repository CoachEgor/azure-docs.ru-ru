---
title: Политики самостоятельного сброса пароля — Azure Active Directory
description: Настройка параметров политики самостоятельного сброса пароля в Azure AD
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 11/21/2019
ms.author: iainfou
author: iainfoulds
manager: daveba
ms.reviewer: sahenry
ms.collection: M365-identity-device-management
ms.openlocfilehash: fd6cacae9c7af705b0de7b59e0f25f25637a5a89
ms.sourcegitcommit: 509b39e73b5cbf670c8d231b4af1e6cfafa82e5a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2020
ms.locfileid: "78376936"
---
# <a name="password-policies-and-restrictions-in-azure-active-directory"></a>Политики паролей и ограничения в Azure Active Directory

В этой статье описываются политики паролей и требования к сложности, связанные с учетными записями пользователей в клиенте Azure Active Directory (Azure AD).

## <a name="administrator-reset-policy-differences"></a>Различия политики сброса администратора

**Корпорация Майкрософт применяет строгую политику сброса паролей с *двумя шлюзами* по умолчанию для любой роли администратора Azure** . Эта политика может отличаться от политики, определенной для пользователей, и не может быть изменена. Следует всегда тестировать функцию сброса пароля как пользователя без назначенных ролей администратора Azure.

С помощью политики с двумя шлюзами **Администраторы не имеют возможности использовать контрольные вопросы**.

Политика с двумя шлюзами требует два фрагмента данных проверки подлинности, например **адрес электронной почты**, **приложение для проверки подлинности**или **номер телефона**. Политика с двумя шлюзами применяется в следующих случаях.

* Затрагиваются все следующие роли администратора Azure:
  * Администратор службы поддержки
  * Администратор службы поддержки
  * Администратор выставления счетов
  * Поддержка 1 класса партнеров
  * Поддержка партнеров партнеров
  * Администратор Exchange
  * Администратор Skype для бизнеса
  * Администратор пользователей
  * Модули записи каталога
  * Глобальный администратор или администратор Организации
  * Администратор SharePoint
  * Администратор соответствия требованиям
  * Администратор приложения
  * Администратор безопасности
  * Администратор привилегированных ролей
  * Администратор Intune
  * Администратор службы прокси приложения
  * Администратор Dynamics 365
  * Администратор служба Power BI
  * Администратор проверки подлинности
  * Администратор привилегированной проверки подлинности

* Если в пробной подписке прошло 30 дней; ни
* Для вашего клиента Azure AD настроен пользовательский домен, например *contoso.com*; ни
* Azure AD Connect синхронизирует удостоверения из локального каталога

### <a name="exceptions"></a>Отличи

Политика с одним шлюзом требует один фрагмент данных проверки подлинности, например адрес электронной почты *или* номер телефона. Политика с одним шлюзом применяется в следующих случаях.

* Он находится в течение первых 30 дней пробной подписки. ни
* Для вашего клиента Azure AD не настроен пользовательский домен, поэтому используется значение по умолчанию * *. onmicrosoft.com*. Обратите внимание, что домен по умолчанию * *. onmicrosoft.com* не рекомендуется использовать в рабочей среде. перетаскивани
* Azure AD Connect не выполняет синхронизацию удостоверений

## <a name="userprincipalname-policies-that-apply-to-all-user-accounts"></a>Политики UserPrincipalName, применяемые ко всем учетным записям пользователей

Каждая учетная запись пользователя, которая должна входить в Azure AD, должна иметь уникальное значение атрибута имени участника-пользователя (UPN), связанное с учетной записью. В следующей таблице перечислены политики, применяемые к локальным Active Directory учетным записям пользователей, которые синхронизируются с облаком и с учетными записями пользователей в облаке.

| Свойства | Требования UserPrincipalName |
| --- | --- |
| Разрешенные символы |<ul> <li>A – Z</li> <li>a – z</li><li>от 0 до 9</li> <li> ' \. - \_! \# ^ \~</li></ul> |
| Недопустимые символы |<ul> <li>Любой символ "\@\", который не отделяет имя пользователя от домена.</li> <li>Не может содержать символ точки "." непосредственно перед символом "\@\"</li></ul> |
| Ограничения длины |<ul> <li>Общая длина не должна превышать 113 символов</li><li>Символ "\@\" может содержать до 64 символов</li><li>После символа "\@\" может стоять до 48 символов</li></ul> |

## <a name="password-policies-that-only-apply-to-cloud-user-accounts"></a>Политики паролей, применимые только к облачным учетным записям пользователей

В следующей таблице описаны параметры политики паролей, применяемые к учетным записям пользователей, которые создаются и управляются в Azure AD.

| Свойства | Необходимость |
| --- | --- |
| Разрешенные символы |<ul><li>A – Z</li><li>a – z</li><li>от 0 до 9</li> <li>@ # $% ^ & *-_! + = [] {} &#124; \: ',. ? / \` ~ "();</li> <li>пустое пространство</li></ul> |
| Недопустимые символы | Символы Юникода. |
| Ограничения паролей |<ul><li>Не менее 8 символов и не более 256 символов.</li><li>Требуется три из следующих четырех:<ul><li>Символы нижнего регистра.</li><li>Символы верхнего регистра.</li><li>Числа (0-9).</li><li>Символы (см. предыдущие ограничения на пароли).</li></ul></li></ul> |
| Длительность срока действия пароля (максимальный возраст пароля) |<ul><li>Значение по умолчанию: **90** дней.</li><li>Это значение можно настроить с помощью командлета `Set-MsolPasswordPolicy` из модуля Azure Active Directory для Windows PowerShell.</li></ul> |
| Уведомление об истечении срока действия пароля (когда пользователи получают уведомление об истечении срока действия пароля) |<ul><li>Значение по умолчанию: **14** дней (до истечения срока действия пароля).</li><li>Это значение можно настроить с помощью командлета `Set-MsolPasswordPolicy`.</li></ul> |
| Истечение срока действия пароля (разрешить срок действия пароля никогда не истекает) |<ul><li>Значение по умолчанию: **false** (указывает, что у пароля есть Дата окончания срока действия).</li><li>Это значение можно настроить для отдельных учетных записей пользователей с помощью командлета `Set-MsolUser`.</li></ul> |
| Журнал изменений паролей | Последний пароль *нельзя* использовать снова, когда пользователь изменяет пароль. |
| Журнал сброса пароля | Последний пароль *можно* использовать снова, когда пользователь сбрасывает забытый пароль. |
| Блокировка учетной записи | После 10 неудачных попыток входа с неверным паролем пользователь будет заблокирован в течение одной минуты. Дальнейшие попытки входа в систему заблокируют пользователя для увеличения длительности времени. При [интеллектуальной блокировке](howto-password-smart-lockout.md) отслеживаются последние три неправильные хэши паролей, чтобы избежать увеличения счетчика блокировки для одного и того же пароля. Если пользователь введет один и тот же неправильный пароль несколько раз, это не приведет к блокировке учетной записи. |

## <a name="set-password-expiration-policies-in-azure-ad"></a>Настройка политик срока действия паролей в Azure AD

Глобальный администратор или администратор пользователей для облачной службы Майкрософт может использовать модуль Microsoft Azure AD для Windows PowerShell, чтобы задать для паролей пользователей не срок действия. Вы также можете использовать командлеты Windows PowerShell, чтобы удалить конфигурацию с неистекшим сроком действия или определить, какие пароли пользователей никогда не истечет. 

Это руководство относится к другим поставщикам, таким как Intune и Office 365, которые также используют Azure AD для идентификации и служб каталогов. Срок действия пароля является единственной частью политики, которую можно изменить.

> [!NOTE]
> Только пароли для учетных записей пользователей, которые не синхронизируются с помощью синхронизации службы каталогов, могут быть настроены на неограниченный срок действия. Дополнительные сведения о синхронизации службы каталогов см. в статье [Подключение AD к Azure AD](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).

## <a name="set-or-check-the-password-policies-by-using-powershell"></a>Установка и проверка политик паролей с помощью PowerShell

Чтобы приступить к работе, необходимо [скачать и установить модуль Azure AD PowerShell](https://docs.microsoft.com/powershell/module/Azuread/?view=azureadps-2.0). После установки можно выполнить следующие действия для настройки каждого поля.

### <a name="check-the-expiration-policy-for-a-password"></a>Проверка политики срока действия пароля

1. Подключитесь к Windows PowerShell с помощью учетных данных администратора или администратора организации.
1. Выполните одну из следующих команд:

   * Чтобы проверить, имеет ли пароль одного пользователя бессрочный срок действия, выполните следующий командлет, используя имя участника-пользователя (например, *april\@contoso.onmicrosoft.com*) или идентификатор пользователя, которого вы хотите проверить:

   ```powershell
   Get-AzureADUser -ObjectId <user ID> | Select-Object @{N="PasswordNeverExpires";E={$_.PasswordPolicies -contains "DisablePasswordExpiration"}}
   ```

   * Чтобы просмотреть параметр **срок действия пароля не ограничен** для всех пользователей, выполните следующий командлет:

   ```powershell
   Get-AzureADUser -All $true | Select-Object UserPrincipalName, @{N="PasswordNeverExpires";E={$_.PasswordPolicies -contains "DisablePasswordExpiration"}}
   ```

### <a name="set-a-password-to-expire"></a>Установка истечения срока действия пароля

1. Подключитесь к Windows PowerShell с помощью учетных данных администратора или администратора организации.
1. Выполните одну из следующих команд:

   * Чтобы задать пароль одного пользователя, чтобы срок действия пароля истек, выполните следующий командлет, используя имя участника-пользователя или идентификатор пользователя:

   ```powershell
   Set-AzureADUser -ObjectId <user ID> -PasswordPolicies None
   ```

   * Чтобы задать пароли всех пользователей в Организации с истечением срока действия, используйте следующий командлет:

   ```powershell
   Get-AzureADUser -All $true | Set-AzureADUser -PasswordPolicies None
   ```

### <a name="set-a-password-to-never-expire"></a>Установка бессрочного пароля

1. Подключитесь к Windows PowerShell с помощью учетных данных администратора или администратора организации.
1. Выполните одну из следующих команд:

   * Чтобы задать бессрочный пароль для одного пользователя, выполните следующий командлет, используя имя участника-пользователя или идентификатор пользователя:

   ```powershell
   Set-AzureADUser -ObjectId <user ID> -PasswordPolicies DisablePasswordExpiration
   ```

   * Чтобы задать бессрочные пароли всех пользователей в Организации, выполните следующий командлет:

   ```powershell
   Get-AzureADUser -All $true | Set-AzureADUser -PasswordPolicies DisablePasswordExpiration
   ```

   > [!WARNING]
   > Пароли задаются в `-PasswordPolicies DisablePasswordExpiration` по-прежнему возраста на основе атрибута `pwdLastSet`. Если вы настроили пароли пользователей на бессрочный срок действия, а затем через 90 дней, срок действия паролей истечет. В зависимости от атрибута `pwdLastSet`, если вы измените срок действия на `-PasswordPolicies None`, все пароли с `pwdLastSet` старше 90 дней, необходимо изменить при следующем входе в систему. Это изменение может повлиять на большое количество пользователей.

## <a name="next-steps"></a>Дальнейшие действия

Следующие статьи содержат дополнительные сведения о сбросе паролей через Azure AD.

* [Разделы справки выполнить успешное развертывание SSPR?](howto-sspr-deployment.md)
* [Сбросьте или измените пароль](../user-help/active-directory-passwords-update-your-own-password.md).
* [Регистрация для самостоятельного сброса пароля](../user-help/active-directory-passwords-reset-register.md).
* [У вас есть вопрос о лицензировании?](concept-sspr-licensing.md)
* [Какие данные используются в SSPR и какие данные следует заполнять для пользователей?](howto-sspr-authenticationdata.md)
* [Какие методы проверки подлинности доступны пользователям?](concept-sspr-howitworks.md#authentication-methods)
* [Что такое обратная запись паролей и почему она важна?](howto-sspr-writeback.md)
* [Разделы справки отчет о действиях в SSPR?](howto-sspr-reporting.md)
* [Что такое все параметры в SSPR и что они означают?](concept-sspr-howitworks.md)
* [Думаю, что что-то не так. Разделы справки устранить неполадки SSPR?](active-directory-passwords-troubleshoot.md)
* [У меня есть вопрос, который не был рассмотрен в другом месте](active-directory-passwords-faq.md)
