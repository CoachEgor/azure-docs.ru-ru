---
title: Настройка паролей приложений для многофакторной идентификации Azure — Azure Active Directory
description: Узнайте, как настроить и использовать пароли приложений для устаревших приложений в службе многофакторной идентификации Azure.
services: multi-factor-authentication
ms.service: active-directory
ms.subservice: authentication
ms.topic: how-to
ms.date: 06/05/2020
ms.author: iainfou
author: iainfoulds
manager: daveba
ms.reviewer: michmcla
ms.collection: M365-identity-device-management
ms.openlocfilehash: 5b247b64d563bc2b12c5bffff6a460d77cb96207
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84485487"
---
# <a name="enable-and-use-azure-multi-factor-authentication-with-legacy-applications-using-app-passwords"></a>Включение и использование многофакторной идентификации Azure с устаревшими приложениями с помощью паролей приложений

Некоторые приложения, например Office 2010 или более ранней версии и Apple Mail до iOS 11, не поддерживают многофакторную проверку подлинности. Приложения не настроены на прием дополнительной формы проверки подлинности или запроса. Чтобы использовать эти приложения безопасным способом с включенной многофакторной идентификацией Azure для учетных записей пользователей, можно использовать пароли приложений. Эти пароли приложений заменили традиционный пароль, чтобы позволить приложению обходить многофакторную проверку подлинности и работать правильно.

Современная аутентификация поддерживается для клиентов Microsoft Office 2013 и более поздних версий. Клиенты Office 2013, в том числе Outlook, поддерживают современные протоколы проверки подлинности и могут быть включены для двухфакторной проверки. После включения клиента пароли приложений для клиента вводить не обязательно.

В этой статье показано, как включить и использовать пароли приложений для устаревших приложений, которые не поддерживают запросы многофакторной проверки подлинности.

>[!NOTE]
> Пароли приложений не работают с политиками многофакторной проверки подлинности на основе условного доступа и современной проверкой подлинности.

## <a name="overview-and-considerations"></a>Общие сведения и рекомендации

Если учетная запись пользователя включена для многофакторной идентификации Azure, то обычный запрос на вход прерывается с помощью запроса на дополнительную проверку. Некоторые старые приложения не понимают этот перерыв в процессе входа, поэтому проверка подлинности завершается неудачно. Чтобы обеспечить безопасность учетной записи пользователя и оставить включенной многофакторную идентификацию Azure, можно использовать пароли приложений вместо обычных имени пользователя и пароля. Если пароль приложения используется во время входа в систему, нет дополнительных запросов проверки, поэтому проверка подлинности будет успешной.

Пароли приложений создаются автоматически, а не задаются пользователем. Этот автоматически созданный пароль затрудняет взлом злоумышленника, поэтому обеспечивает более высокий уровень безопасности. Пользователям не нужно записывать пароли или вводить их каждый раз, когда пароли приложений вводятся только один раз для каждого приложения.

При использовании паролей приложений применяются следующие соображения.

* Существует ограничение в 40 паролей приложений на пользователя.
* Приложения, которые кэшируют пароли и используют их в локальных сценариях, могут завершиться сбоем, так как пароль приложения не известен за пределами рабочей или учебной учетной записи. Примером этого сценария являются сообщения электронной почты Exchange, которые хранятся локально, но архивируются в облаке. В этом сценарии один и тот же пароль работать не будет.
* После включения многофакторной идентификации Azure в учетной записи пользователя пароли приложений можно использовать в большинстве клиентов, не использующих браузер, таких как Outlook и Microsoft Skype для бизнеса. Однако административные действия нельзя выполнять с помощью паролей приложений через приложения, не относящиеся к браузеру, например Windows PowerShell. даже если у пользователя есть учетная запись администратора.
    * Создайте учетную запись службы с надежным паролем для выполнения скриптов PowerShell и не включайте для этой учетной записи двухфакторную проверку подлинности.

>[!WARNING]
> Пароли приложений не работают в гибридных средах, где клиенты взаимодействуют одновременно с локальными и облачными конечными точками автообнаружения. Для проверки подлинности в локальной среде необходимы пароли доменов. Для проверки подлинности в облачной среде необходимы пароли приложений.

### <a name="app-password-names"></a>Имена паролей приложений

Имена паролей приложений должны указывать название устройства, на котором они будут использоваться. Если у вас есть ноутбук с такими внебраузерными приложениями, как Outlook, Word и Excel, создайте всего один пароль приложения с именем **Ноутбук** для этих приложений. На настольном компьютере создайте для этого приложения новый пароль приложения с именем **Настольный компьютер**.

Рекомендуется создавать один пароль приложения для каждого устройства, а не один пароль приложения для каждого приложения.

## <a name="federated-or-single-sign-on-app-passwords"></a>Пароли приложений с федеративным или единым входом

Azure AD поддерживает федерацию или единый вход (SSO) с локальными службами домен Active Directory Services (AD DS). Если ваша организация является Федеративной с Azure AD и вы используете многофакторную идентификацию Azure, применяются следующие рекомендации по использованию пароля приложения:

>[!NOTE]
> Следующие пункты относятся только к федеративным клиентам (единый вход).

* Пароль приложения проверяется Azure AD и поэтому обходит федерацию. Федерация активно используется только при задании пароля приложения.
* В случае с федеративными (SSO) пользователями, мы не будем обращаться к поставщику удостоверений (IdP) в отличие от пассивного процесса. Пароли приложений хранятся в рабочей или учебной учетной записи. Если пользователь покидает компанию, данные пользователя передаются в рабочую или учебную учетную запись с помощью **DirSync** в режиме реального времени. Для синхронизации операции отключения или удаления учетной записи может потребоваться до трех часов, что может задержать отключение или удаление пароля приложения в Azure AD.
* Параметры контроля доступа локальных клиентов не учитываются при использовании паролей приложений.
* В функции паролей приложений нет возможности локального ведения журнала проверки подлинности или аудита.

Для некоторых сложных архитектур требуется сочетание учетных данных для многофакторной идентификации с клиентами. имя пользователя и пароли рабочей или учебной учетной записи и пароли приложения. Требования зависят от того, как выполняется проверка подлинности. Что касается клиентов, выполняющих проверку подлинности в локальной инфраструктуре, использование имени пользователя и пароля рабочей или учебной учетной записи обязательно. Что касается клиентов, выполняющих проверку подлинности в Azure AD, требуется использовать пароль приложения.

Предположим, что у вас есть следующая архитектура:

* вы задаете федеративную связь своего локального экземпляра Active Directory с Azure AD;
* Вы используете Exchange Online.
* Вы используете локальную среду Skype для бизнеса.
* Вы используете многофакторную идентификацию Azure.

В этом сценарии можно использовать следующие учетные данные:

* Для входа в Skype для бизнеса используйте имя пользователя и пароль рабочей или учебной учетной записи.
* При доступе к адресной книге через клиент Outlook, который подключается к Exchange Online, используйте пароль приложения.

## <a name="allow-users-to-create-app-passwords"></a>Предоставление пользователям разрешения создавать пароли приложений

По умолчанию пользователи не могут создавать пароли приложений. Чтобы пользователи могли их использовать, необходимо включить функцию паролей приложений. Чтобы дать пользователям возможность создавать пароли приложений, выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com).
2. Найдите и выберите **Azure Active Directory**, а затем выберите **Пользователи**.
3. На панели навигации в верхней части окна *пользователей* выберите **многофакторную проверку подлинности** .
4. В разделе "Многофакторная аутентификация" выберите **Параметры службы**.
5. На странице **Параметры службы** выберите вариант **Разрешить пользователям создавать пароли приложений для входа в приложения, не относящиеся к браузеру**.

    ![Снимок экрана портала Azure, отображающий параметры службы для многофакторной проверки подлинности, которые разрешают использовать пароли к приложениям](media/concept-authentication-methods/app-password-authentication-method.png)

## <a name="create-an-app-password"></a>Создание пароля приложения

Когда пользователи завершают начальную регистрацию для многофакторной идентификации Azure, в конце процесса регистрации можно создать пароли приложений.

Пользователи также могут создавать пароли приложений после регистрации, Дополнительные сведения и подробные инструкции для пользователей см. в статье [Что такое пароли приложений в службе Многофакторной идентификации Azure](../user-help/multi-factor-authentication-end-user-app-passwords.md).

## <a name="next-steps"></a>Дальнейшие шаги

Дополнительные сведения о том, как разрешить пользователям быстро регистрироваться в службе многофакторной идентификации Azure, см. в статье [Обзор общей регистрации сведений о безопасности](concept-registration-mfa-sspr-combined.md).
