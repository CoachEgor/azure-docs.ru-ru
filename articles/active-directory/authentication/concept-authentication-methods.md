---
title: Методы и функции проверки подлинности — Azure Active Directory
description: Узнайте о различных методах и функциях проверки подлинности, доступных в Azure Active Directory для улучшения и защиты событий входа в систему.
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 05/08/2020
ms.author: iainfou
author: iainfoulds
manager: daveba
ms.collection: M365-identity-device-management
ms.custom: contperfq4
ms.openlocfilehash: 3947bf0dcad598bf52a742c790a2f99538d6facb
ms.sourcegitcommit: a8ee9717531050115916dfe427f84bd531a92341
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/12/2020
ms.locfileid: "83116431"
---
# <a name="what-authentication-and-verification-methods-are-available-in-azure-active-directory"></a>Какие методы проверки подлинности и проверки доступны в Azure Active Directory?

В рамках процесса входа в систему для учетных записей в Azure Active Directory (Azure AD) существуют различные способы проверки подлинности пользователя. Имя пользователя и пароль — это наиболее распространенный способ, с помощью которого пользователь будет по журналу предоставлять учетные данные. Благодаря современным возможностям проверки подлинности и безопасности в Azure AD этот базовый пароль можно дополнить или заменить дополнительными методами проверки подлинности.

Пользователь в Azure AD может выбрать проверку подлинности с помощью одного из следующих методов проверки подлинности:

* Традиционные имя пользователя и пароль
* Microsoft Authenticator вход без пароля приложения
* Токен оборудования OATH или ключ безопасности FIDO2
* Вход без пароля на основе SMS

Многие учетные записи в Azure AD включены для самостоятельного сброса пароля (SSPR) или службы многофакторной идентификации Azure. Эти функции включают дополнительные методы проверки, такие как телефонный звонок или контрольные вопросы. Рекомендуется требовать, чтобы пользователи регистрировали несколько методов проверки. Если один из методов недоступен для пользователя, он может выбрать проверку подлинности с помощью другого метода.

В следующей таблице описаны методы проверки подлинности или проверки, доступные для различных сценариев.

| Метод | Использование при входе | Использовать во время проверки |
| --- | --- | --- |
| [Пароль](#password) | Да | MFA и SSPR |
| [Приложение Microsoft Authenticator](#microsoft-authenticator-app) | Да (предварительная версия) | MFA и SSPR |
| [Ключи безопасности FIDO2 (Предварительная версия)](#fido2-security-keys) | Да | Только MFA |
| [Токены оборудования OATH (Предварительная версия)](#oath-hardware-tokens) | Да | SSPR и MFA |
| [SMS](#phone-options) | Да (предварительная версия) | MFA и SSPR |
| [Голосовой звонок](#phone-options) | Нет | MFA и SSPR |
| [Контрольные вопросы](#security-questions) | Нет | Только SSPR |
| [Адрес электронной почты](#email-address) | Нет | Только SSPR |
| [Пароли приложений](#app-passwords) | Нет | Только MFA в некоторых случаях |

В этой статье описаны различные методы проверки подлинности и проверки, доступные в Azure AD, а также определенные ограничения.

![Методы проверки подлинности, используемые на экране входа](media/concept-authentication-methods/overview-login.png)

## <a name="password"></a>Пароль

Пароль Azure AD часто является одним из основных методов проверки подлинности. Невозможно отключить метод проверки подлинности с помощью пароля.

Даже если вы используете метод проверки подлинности, такой как [Вход на основе SMS](howto-authentication-sms-signin.md) , когда пользователь не использует пароль для подписания, пароль остается доступным в качестве доступного метода проверки подлинности.

## <a name="microsoft-authenticator-app"></a>Приложение Microsoft Authenticator

Приложение для проверки подлинности обеспечивает дополнительный уровень безопасности для рабочей или учебной учетной записи Azure AD или учетная запись Майкрософт и доступен для [Android](https://go.microsoft.com/fwlink/?linkid=866594), [iOS](https://go.microsoft.com/fwlink/?linkid=866594)и [Windows Phone](https://www.microsoft.com/p/microsoft-authenticator/9nblgggzmcj6). С помощью приложения Microsoft Authenticator пользователи могут проходить проверку подлинности без пароля во время входа в систему или как дополнительный параметр проверки во время самостоятельного сброса пароля (SSPR) или событий многофакторной идентификации Azure.

Пользователи могут получить уведомление через мобильное приложение для утверждения или отклонения или использовать приложение для проверки подлинности, чтобы создать код проверки OATH, который можно указать в интерфейсе входа. Если вы включили как уведомление, так и код проверки, пользователи, регистрирующие приложение проверки подлинности, могут использовать любой из этих методов для проверки их подлинности.

Сведения о том, как использовать приложение Authenticator в запросе на вход, а не в комбинации имени пользователя и пароля, см. в разделе [Включение входа без пароля с помощью приложения Microsoft Authenticator (Предварительная версия)](howto-authentication-passwordless-phone.md).

> [!NOTE]
> У пользователей нет возможности зарегистрировать мобильное приложение, если они включают SSPR. Вместо этого пользователи могут зарегистрировать свое мобильное приложение по адресу [https://aka.ms/mfasetup](https://aka.ms/mfasetup) или в составе общей регистрации сведений о безопасности по адресу [https://aka.ms/setupsecurityinfo](https://aka.ms/setupsecurityinfo) .

### <a name="notification-through-mobile-app"></a>Уведомление в мобильном приложении

Приложение Authenticator может помочь предотвратить несанкционированный доступ к учетным записям и прерывать мошеннические транзакции, отправляя уведомление на смартфон или планшет. Пользователи просматривают уведомление и, если это допустимо, выберите **проверить**. В противном случае они могут выбрать **запретить**.

![Снимок экрана примера запроса веб-браузера для уведомления приложения проверки подлинности для завершения процесса входа](media/tutorial-enable-azure-mfa/azure-multi-factor-authentication-browser-prompt.png)

> [!NOTE]
> Если в вашей организации сотрудники работают в Китае или *передаются в Китая, уведомление через метод мобильного приложения* на устройствах Android не работает в этой стране. Для этих пользователей должны быть доступны альтернативные методы проверки подлинности.

### <a name="verification-code-from-mobile-app"></a>Код проверки от мобильного приложения

Приложение Authenticator можно использовать в качестве токена программного обеспечения для создания кода проверки OATH. После ввода имени пользователя и пароля введите код, предоставленный приложением Authenticator, в интерфейс входа. Код проверки выступает вторым методом проверки подлинности.

Пользователи могут иметь комбинацию до пяти маркеров оборудования OATH или приложений для проверки подлинности, например приложения Microsoft Authenticator, настроенного для использования в любое время.

> [!WARNING]
> Чтобы обеспечить максимальный уровень безопасности для самостоятельного сброса пароля, если для сброса требуется только один метод, для пользователей доступен только код проверки.
>
> Когда требуются два метода, пользователи могут сбрасываться с помощью кода уведомления или проверки в дополнение к любым другим включенным методам.

## <a name="fido2-security-keys"></a>Ключи безопасности FIDO2

FIDO (быстрое идентификация в сети) позволяет повысить уровень открытых стандартов проверки подлинности и сократить число пользователей паролей в виде проверки подлинности. FIDO2 — это новейшая версия стандарта, включающая стандарт веб-аутентификации (WebAuthn).

Сведения о том, как использовать ключи безопасности FIDO2 в приглашении на вход, а не в комбинации имени пользователя и пароля, см. [в разделе Включение входа в систему безпарольного FIDO2ного ключа безопасности (Предварительная версия)](howto-authentication-passwordless-security-key.md).

Пользователи могут зарегистрироваться, а затем выбрать ключ безопасности FIDO2 в интерфейсе входа в качестве основного средства проверки подлинности. Эти ключи безопасности FIDO2 обычно являются USB-устройствами, но также могут использовать Bluetooth или NFC. При использовании аппаратного устройства, обрабатывающего проверку подлинности, безопасность учетной записи увеличивается, так как пароль не может быть предоставлен или указан.

Ключи безопасности FIDO2 в Azure AD сейчас доступны в предварительной версии. Дополнительные сведения о предварительных версиях см. в разделе Дополнительные [условия использования для предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="oath-hardware-tokens"></a>Токены оборудования OATH

OATH является открытым стандартом, который определяет, как генерируются коды одноразовых паролей (OTP). Azure AD поддерживает использование токенов SHA-1 TOTP с 30-секундным или 60-секундным набором. Клиенты могут приобрести эти маркеры у поставщика по своему усмотрению.

Ключи секрета ограничены 128 символами, которые могут быть несовместимы со всеми маркерами. Секретный ключ может содержать только символы *a – z* или *a – z* , цифры *1-7*и должны быть закодированы в *base32*.

Токены оборудования OATH в Azure AD сейчас доступны в предварительной версии. Дополнительные сведения о предварительных версиях см. в разделе Дополнительные [условия использования для предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

![Отправка OATH-токенов в окно OATH-токенов MFA](media/concept-authentication-methods/mfa-server-oath-tokens-azure-ad.png)

После получения маркеров их необходимо передать в формате файлов с разделителями-запятыми (CSV), включая UPN, серийный номер, секретный ключ, интервал времени, производителя и модель, как показано в следующем примере:

```csv
upn,serial number,secret key,time interval,manufacturer,model
Helga@contoso.com,1234567,1234567abcdef1234567abcdef,60,Contoso,HardwareKey
```

> [!NOTE]
> Убедитесь, что в CSV-файл включена строка заголовка.

После правильного форматирования в виде CSV-файла администратор может войти в портал Azure, перейдите в раздел **Azure Active Directory**  >  **Безопасность**  >  **MFA**  >  **OATH-токены**MFA и отправьте полученный CSV-файл.

В зависимости от размера CSV-файла этот процесс может занять несколько минут. Нажмите кнопку **Обновить** , чтобы получить текущее состояние. Если в файле есть ошибки, можно скачать CSV-файл, содержащий все ошибки, которые необходимо устранить. Имена полей в скачанном CSV-файле отличаются от имен передаваемых версий.

После того как все ошибки будут устранены, администратор может активировать каждый ключ, выбрав **активировать** для маркера и введя OTP, отображаемый на маркере.

Пользователи могут иметь комбинацию до пяти маркеров оборудования OATH или приложений для проверки подлинности, например приложения Microsoft Authenticator, настроенного для использования в любое время.

## <a name="phone-options"></a>Параметры телефона

Для прямой проверки подлинности с помощью текстовых сообщений можно [настроить и разрешить пользователям проверку подлинности на основе SMS (Предварительная версия)](howto-authentication-sms-signin.md). Вход на основе SMS прекрасно подходит для рабочих ролей. При входе на основе SMS пользователям не нужно знать имя пользователя и пароль для доступа к приложениям и службам. Вместо этого пользователь вводит свой зарегистрированный номер мобильного телефона, получает текстовое сообщение с кодом проверки и вводит его в интерфейс входа.

Пользователи также могут проверить себя, используя мобильный телефон или рабочий телефон в качестве вторичной формы проверки подлинности, используемой во время многофакторной идентификации Azure или самостоятельного сброса пароля (SSPR).

Для правильной работы номера телефонов должны быть в формате *+ Каунтрикоде PhoneNumber*, например *+ 1 4251234567*.

> [!NOTE]
> Между кодом страны и номером телефона должен быть пробел.
>
> Сброс пароля не поддерживает расширения телефона. Даже в формате *+ 1* расширения удаляются до того, как вызов помещается.

### <a name="mobile-phone-verification"></a>Проверка мобильного телефона

Для многофакторной идентификации Azure или SSPR пользователи могут выбрать получение текстового сообщения с кодом проверки для ввода в интерфейсе входа или получить телефонный звонок с запросом на ввод заданных ПИН-кода.

Если пользователи не хотят, чтобы номер мобильного телефона отображался в каталоге, но вы хотите использовать его для сброса пароля, администраторы не должны заполнять номер телефона в каталоге. Вместо этого пользователи должны заполнить атрибут **телефона для проверки подлинности** через Объединенную регистрацию сведений о безопасности по адресу [https://aka.ms/setupsecurityinfo](https://aka.ms/setupsecurityinfo) . Администраторы смогут просматривать эту информацию в профиле пользователя, но она не будет публиковаться в другом месте.

![Снимок экрана портал Azure, отображающий методы проверки подлинности с заполненным номером телефона](media/concept-authentication-methods/user-authentication-methods.png)

Корпорация Майкрософт не гарантирует, что служба многофакторной идентификации Azure на основе SMS или голоса положит доставку по одному и тому же номеру. В интересах наших пользователей мы можем добавлять или удалять короткие коды в любое время, когда мы делаем корректировки маршрутов для улучшения доставки в SMS. Корпорация Майкрософт не поддерживает короткие коды стран и регионов, кроме США и Канады.

#### <a name="text-message-verification"></a>Проверка текстовых сообщений

При проверке текстовых сообщений во время SSPR или многофакторной идентификации Azure сервер SMS отправляется на номер мобильного телефона, содержащий код проверки. Чтобы завершить процесс входа, предоставленный код проверки введен в интерфейс входа.

#### <a name="phone-call-verification"></a>Проверка телефонного звонка

При проверке телефонных звонков во время SSPR или многофакторной идентификации Azure автоматически выполняется голосовое обращение к номеру телефона, зарегистрированному пользователем. Чтобы завершить процесс входа, пользователю будет предложено ввести PIN-код, а затем символ "#" на своей клавиатуре.

### <a name="office-phone-verification"></a>Проверка Office Phone

Атрибут Office Phone управляется администратором Azure AD и не может быть зарегистрирован пользователем.

При проверке телефонных звонков во время SSPR или многофакторной идентификации Azure автоматически выполняется голосовое обращение к номеру телефона, зарегистрированному пользователем. Чтобы завершить процесс входа, пользователю будет предложено ввести PIN-код, а затем символ "#" на своей клавиатуре.

### <a name="troubleshooting-phone-options"></a>Устранение проблем с параметрами телефонной связи

Если у вас возникли проблемы с аутентификацией на телефоне для Azure AD, ознакомьтесь со следующими действиями по устранению неполадок.

* Заблокированный идентификатор вызывающего объекта на одном устройстве.
   * Проверьте все заблокированные номера, настроенные на устройстве.
* Неправильный номер телефона или неверный код страны или несоответствие номера личного телефона и номера рабочего телефона.
   * Устранение неполадок с объектом пользователя и настроенными методами проверки подлинности. Убедитесь, что зарегистрированы правильные номера телефонов.
* Введен неправильный ПИН-код.
   * Убедитесь, что пользователь использовал правильный ПИН-код, зарегистрированный для своей учетной записи.
* Вызов перенаправлен на голосовую почту.
   * Убедитесь, что у пользователя включен свой телефон, а служба доступна в своей области, или используйте другой метод.
* Пользователь заблокирован
   * Администратор Azure AD разблокирует пользователя в портал Azure.
* На устройстве не создана подписка на сервер SMS.
   * Поменяйте методы изменения пользователем или активируйте SMS на устройстве.
* Неудачные поставщики услуг Телекоммуникации, такие как отсутствие входных данных на телефоне, отсутствие сигналов DTMF, блокировка идентификатора вызывающего объекта на нескольких устройствах или блокирование SMS на нескольких устройствах.
   * Корпорация Майкрософт использует несколько поставщиков телекоммуникационных услуг для передачи телефонных звонков и сообщений SMS для проверки подлинности. Если вы видите какие-либо из описанных выше проблем, попросите пользователя использовать метод не менее пяти раз в течение 5 минут и получить доступ к данным этого пользователя при обращении в службу поддержки Майкрософт.

## <a name="security-questions"></a>Контрольные вопросы

Контрольные вопросы не используются в качестве метода проверки подлинности во время события входа. Вместо этого в процессе самостоятельного сброса пароля (SSPR) можно использовать контрольные вопросы для подтверждения того, кто вы являетесь. Учетные записи администратора не могут использовать контрольные вопросы в качестве метода проверки с SSPR.

Когда пользователи регистрируются для SSPR, им предлагается выбрать используемые методы проверки подлинности. Если они решили использовать контрольные вопросы, они будут выбирать из набора вопросов для запроса, а затем предоставлять свои ответы.

![Снимок экрана портал Azure, отображающий методы проверки подлинности и параметры для контрольных вопросов](media/concept-authentication-methods/security-questions-authentication-method.png)

> [!NOTE]
> Контрольные вопросы надежно хранятся в объекте пользователя в каталоге. Ответы на них пользователь может задать только в процессе регистрации. Администратор не может читать или изменять вопросы или ответы пользователей.

Контрольные вопросы могут быть менее безопасными, чем другие методы, так как некоторые пользователи могут знать ответы на вопросы других пользователей. Если вы используете контрольные вопросы с SSPR, рекомендуется использовать их совместно с другим методом. Пользователю может быть предложено использовать Microsoft Authenticator приложение или проверку подлинности по телефону для проверки их личности во время процесса SSPR и выбирать контрольные вопросы только в том случае, если они не имеют телефона или зарегистрированного устройства.

### <a name="predefined-questions"></a>Стандартные вопросы

Следующие стандартные контрольные вопросы доступны для использования в качестве метода проверки с помощью SSPR. Все эти контрольные вопросы переведены и локализованы в полный набор языков Office 365, основанный на языковом стандарте браузера пользователя:

* В каком городе вы познакомились с первой супругой или первым супругом?
* В каком городе познакомились ваши родители?
* В каком городе живет ваш ближайший родственник?
* В каком городе родился ваш отец?
* В каком городе была ваша первая работа?
* В каком городе родилась ваша мать?
* В каком городе вы провели Новый год в 2000 году?
* Какая фамилия у вашего любимого учителя в старшей школе?
* Как называлось учебное заведение, в которое вы поступили, но не стали учиться?
* В каком месте была ваша первая свадебная церемония?
* Какое отчество у вашего отца?
* Какое ваше любимое блюдо?
* Какие имя и фамилия у вашей бабушки по материнской линии?
* Какое отчество у вашей матери?
* Какой месяц и год рождения вашего старшего брата или сестры? (например, Ноябрь 1985)
* Какое отчество у вашего самого старого родственника?
* Какие имя и фамилия у вашего дедушки по отцовской линии?
* Какое отчество у вашего самого младшего родственника?
* Какую школу вы посещали в шестом классе?
* Какие имя и фамилия у вашего лучшего друга детства?
* Какие имя и фамилия у вашей первой любви?
* Какая фамилия у вашего любимого учителя в начальной школе?
* Какая марка и модель вашей первой машины или мотоцикла?
* Как называлась первая школа, в которую вы ходили?
* Как называлось медицинское учреждение, в котором вы родились?
* Как называлась первая улица, где вы жили в детстве?
* Как звали героя вашего детства?
* Как звали вашу любимую плюшевую игрушку?
* Как звали вашего первого питомца?
* Какое прозвище было у вас в детстве?
* Какой вид спорта вы любили в старших классах?
* Какова ваша первая работа?
* Какие последние 4 цифры вашего номера телефона в детстве?
* Кем вы хотели стать в детстве?
* Какую самую известную личность вы встречали?

### <a name="custom-security-questions"></a>Пользовательские контрольные вопросы

Для обеспечения дополнительной гибкости можно определить собственные настраиваемые контрольные вопросы. Максимальная длина пользовательского контрольного вопроса составляет 200 символов.

Настраиваемые контрольные вопросы не локализуются автоматически, как и с контрольными вопросами по умолчанию. Все настраиваемые вопросы отображаются на том же языке, что и в пользовательском интерфейсе пользователя, даже если язык браузера пользователя отличается. Если требуются переведенные вопросы, используйте стандартные вопросы.

### <a name="security-question-requirements"></a>Требования к контрольному вопросу

Для стандартных и настраиваемых контрольных вопросов действуют следующие требования и ограничения.

* Минимальное количество знаков в ответе — 3.
* Максимальное количество знаков в ответе — 40.
* Пользователи не могут отвечать на один и тот же вопрос несколько раз.
* Пользователи не могут давать один и тот же ответ на несколько вопросов.
* Для определения вопросов и ответов можно использовать любой набор символов, в том числе символы Юникода.
* Количество определенных вопросов должно быть не меньше числа вопросов, необходимых для регистрации.

## <a name="email-address"></a>Адрес электронной почты

Адрес электронной почты нельзя использовать в качестве метода прямой проверки подлинности. Адрес электронной почты доступен только в качестве параметра проверки для самостоятельного сброса пароля (SSPR). Когда адрес электронной почты выбирается во время SSPR, пользователю отправляется сообщение электронной почты для завершения процесса проверки подлинности/проверки.

Во время регистрации для SSPR пользователь предоставляет адрес электронной почты для использования. Рекомендуется использовать учетную запись электронной почты, отличную от своей корпоративной учетной записи, чтобы убедиться, что они могут получить к ним доступ во время SSPR.

## <a name="app-passwords"></a>Пароли приложений

Некоторые старые приложения, не относящиеся к браузеру, не понимают паузы или перерывы в процессе проверки подлинности. Если пользователь поддерживает многофакторную проверку подлинности и пытается использовать одно из этих старых приложений, не относящихся к браузеру, они обычно не могут пройти проверку подлинности. Пароль приложения позволяет пользователям продолжать проверку подлинности с помощью старых приложений, не относящихся к браузеру, без перерывов.

По умолчанию пользователи не могут создавать пароли приложений. Если необходимо разрешить пользователям создавать пароли приложений, установите флажок **Разрешить пользователям создавать пароли приложений для входа в приложения, не относящиеся к браузеру** , в разделе *Параметры службы* для свойств многофакторной идентификации Azure пользователя.

![Снимок экрана портал Azure, отображающий параметры службы для многофакторной проверки подлинности, чтобы разрешить пользователю использовать пароли приложений](media/concept-authentication-methods/app-password-authentication-method.png)

Если вы реализуете многофакторную идентификацию Azure с помощью политик условного доступа, а не с помощью многопользовательского MFA, вы не сможете создавать пароли приложений. Современные приложения, использующие политики условного доступа для управления доступом, не нуждаются в паролях приложений.

Если ваша организация является Федеративной для единого входа (SSO) с помощью Azure AD и вы используете многофакторную идентификацию Azure, следует учитывать следующие моменты.

* Пароль приложения проверяется с помощью Azure AD, поэтому обходит Федерацию. Федерация используется только при задании пароля приложения. Для федеративных пользователей (использующих единый вход) пароли хранятся в идентификаторе организации. Если пользователь уходит из организации, данная информация должна попадать в идентификатор организации с помощью DirSync. Синхронизация событий отключения или удаления учетной записи может занять до трех часов, что задерживает отключение или удаление паролей приложений в Azure AD.
* Параметры управления доступом к локальным клиентам не учитываются паролями приложений.
* Для паролей приложений не доступны локальные функции ведения журнала проверки подлинности или аудита.
* При использовании многофакторной проверки подлинности в некоторых современных архитектурных разработках может потребоваться использовать сочетание имени пользователя и пароля Организации, а также пароли приложений в зависимости от того, где они проходят проверку подлинности.
    * Что касается клиентов, выполняющих проверку подлинности в локальной инфраструктуре, можно использовать имя пользователя и пароль, применяющиеся внутри организации.
    * Что касается клиентов, выполняющих проверку подлинности в Azure AD, можно использовать пароль приложения.

## <a name="next-steps"></a>Дальнейшие действия

Для начала изучите руководства по [самостоятельному сбросу пароля (SSPR)][tutorial-sspr] и [многофакторной идентификации Azure][tutorial-azure-mfa].

Дополнительные сведения об основных понятиях SSPR см. в статье [как работает самостоятельный сброс пароля в Azure AD][concept-sspr].

Дополнительные сведения о концепциях MFA см. в статье [как работает служба многофакторной идентификации Azure][concept-mfa].

<!-- INTERNAL LINKS -->
[tutorial-sspr]: tutorial-enable-sspr.md
[tutorial-azure-mfa]: tutorial-enable-azure-mfa.md
[concept-sspr]: concept-sspr-howitworks.md
[concept-mfa]: concept-mfa-howitworks.md