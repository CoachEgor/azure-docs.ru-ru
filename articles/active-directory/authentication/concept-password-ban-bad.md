---
title: Динамически запрещенные пароли — Azure Active Directory
description: Блокировка ненадежных паролей в среде с помощью функции динамической блокировки паролей Azure AD
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 07/11/2018
ms.author: joflore
author: MicrosoftGuyJFlo
manager: daveba
ms.reviewer: rogoya
ms.collection: M365-identity-device-management
ms.openlocfilehash: fe2b4ed91969248bc0818f98306a108555eac424
ms.sourcegitcommit: 470041c681719df2d4ee9b81c9be6104befffcea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/12/2019
ms.locfileid: "67853055"
---
# <a name="eliminate-bad-passwords-in-your-organization"></a>Исключение неправильных паролей в организации

Руководители отрасли сообщают, что вам не нужно использовать один и тот же пароль в нескольких местах, чтобы сделать его сложным и не сделать его простым, как "Password123". Как организации могут гарантировать, что их пользователи будут использовать рекомендации в соответствии с оптимальными рекомендациями? Как они могут гарантировать, что пользователи не используют ненадежные пароли или даже отличаются от ненадежных паролей?

Начальным шагом в более надежных паролях является предоставление рекомендаций пользователям. В настоящее время это руководство Майкрософт можно найти по следующей ссылке:

[Руководство по паролям](https://www.microsoft.com/research/publication/password-guidance)

Хорошее руководство важно, но даже в том, что многие пользователи по-прежнему будут выбирать ненадежные пароли. Защита паролей Azure AD защищает организацию, выявляя и блокируя известные ненадежные пароли и их варианты, а также при необходимости блокировать дополнительные слабые термины, характерные для вашей организации.

Дополнительные сведения о текущей деятельности по обеспечению безопасности см. в этом [отчете корпорации Майкрософт](https://www.microsoft.com/security/operations/security-intelligence-report).

## <a name="global-banned-password-list"></a>Список глобально заблокированных паролей

Группа защита идентификации Azure AD постоянно анализирует данные телеметрии безопасности Azure AD, поискя часто используемых слабых или скомпрометированных паролей, или, точнее, слабых базовых терминов, которые часто используются в качестве основы для ненадежных паролей. При обнаружении таких слабых терминов они добавляются в глобальный список запрещенных паролей. Содержимое списка глобальных запрещенных паролей не основано на любом внешнем источнике данных. Глобальный список запрещенных паролей полностью основывается на текущих результатах телеметрии и анализа безопасности Azure AD.

При изменении или сбросе нового пароля для любого пользователя в Azure AD Текущая версия списка «глобальный список запрещенных паролей» используется в качестве ключевых входных данных при проверке надежности пароля. Эта проверка дает намного более надежные пароли для всех клиентов Azure AD.

> [!NOTE]
> Кибератак-преступники также используют аналогичные стратегии в их атаках. Поэтому корпорация Майкрософт не публикует содержимое этого списка в открытом виде.

## <a name="custom-banned-password-list"></a>пользовательский список заблокированных паролей

Некоторым организациям может потребоваться повысить уровень безопасности, добавив собственные настройки поверх глобального списка запрещенных паролей в том, что корпорация Майкрософт вызывает список настраиваемых паролей с запрещенными паролями. Корпорация Майкрософт рекомендует, чтобы термины, добавленные в этот список, были сосредоточены на терминах, относящихся к Организации, таких как:

- Названия торговых марок
- Названия продуктов
- Расположения (например, головной офис организации);
- Внутренние термины, относящиеся к конкретной компании
- Аббревиатуры, имеющие определенное значение Организации.

После добавления терминов в список настраиваемых паролей с недоступностью они будут объединяться с терминами в глобальном списке запрещенных паролей при проверке паролей.

> [!NOTE]
> Список запрещенных паролей может содержать не более 1000 условий. Он не предназначен для блокирования чрезвычайно больших списков паролей. Чтобы полностью использовать преимущества списка пользовательских запрещенных паролей, корпорация Майкрософт рекомендует сначала проверить и понять алгоритм оценки паролей (см. раздел [как оцениваются пароли](concept-password-ban-bad.md#how-are-passwords-evaluated)) перед добавлением новых терминов в список запрещенных. Понимание принципов работы алгоритма позволит предприятиям эффективно обнаруживать и блокировать большое количество ненадежных паролей и их разновидностей.

Например, рассмотрим клиента Contoso, который основан на Лондоне и делает продукт с именем Widget. Для такого клиента это было бы непроизводительна и менее безопасным, чтобы попытаться заблокировать определенные разновидности таких терминов, как:

- "Contoso! 1"
- "Contoso@London"
- "Контосовиджет"
- "! Компанией
- "Лондонхк"
- ... д

Вместо этого гораздо эффективнее и безопасно блокировать только основные термины.

- Компанией
- Лондон
- »

Затем алгоритм проверки пароля автоматически блокирует ненадежные варианты и сочетания описанного выше.

Пользовательским списком заблокированных паролей и возможностью включения локальной интеграции Active Directory можно управлять на портале Azure.

![Изменение настраиваемого списка запрещенных паролей в разделе методы проверки подлинности](./media/concept-password-ban-bad/authentication-methods-password-protection.png)

## <a name="password-spray-attacks-and-third-party-compromised-password-lists"></a>Атаки на распыление паролей и списки скомпрометированных паролей сторонних разработчиков

Одним из ключевых преимуществ защиты паролей Azure AD является помощь в защите от взломов паролей. Большинство атак типа "распыление паролей" не пытаются атаковать какую-либо индивидуальную учетную запись более чем несколько раз, так как такое поведение значительно повышает вероятность обнаружения с помощью блокировки учетной записи или других средств. Большинство атак типа «распыление паролей», поэтому полагаются на отправку только небольшого числа известных слабых паролей для каждой учетной записи предприятия. Эта методика позволяет злоумышленнику быстро находить легко скомпрометированную учетную запись, в то же время избегая возможных пороговых значений обнаружения.

Защита паролей в Azure AD предназначена для эффективной блокировки всех известных слабых паролей, которые, скорее всего, будут использоваться при атаках на распыление паролей, в зависимости от реальных данных телеметрии, отображаемых в Azure AD.  Корпорация Майкрософт осведомлена о сторонних веб-сайтах, которые перечисляют миллионы паролей, которые были скомпрометированы в предыдущих общеизвестных уязвимостях безопасности. Обычно продукты для проверки пароля от сторонних производителей основаны на сравнении с этими миллионами паролей. Корпорация Майкрософт полагает, что такие приемы не являются лучшим способом улучшить общую надежность пароля с учетом типичных стратегий, используемых злоумышленниками в области паролей.

> [!NOTE]
> Список паролей с глобальным запрещением (Майкрософт) не основан на источниках данных сторонних производителей, включая скомпрометированные списки паролей.

Несмотря на то, что список глобальных запрещенных технологий Майкрософт является небольшим по сравнению с некоторыми небольшими групповыми списками, его эффекты безопасности достигают того факта, что он является источником данных телеметрии в реальных угрозах, а также тот факт, что корпорация Майкрософт в алгоритме проверки пароля используются интеллектуальные методы нечеткого сопоставления. Конечный результат заключается в том, что он эффективно обнаруживает и блокирует миллионы наиболее распространенных слабых паролей, используемых в Организации. Клиенты, желающие добавить термины, относящиеся к конкретной организации, в список запрещенных паролей также получат преимущество от того же алгоритма.

Дополнительные сведения о проблемах безопасности на основе пароля можно проверить на сайте [PA $ $Word не имеет значения](https://techcommunity.microsoft.com/t5/Azure-Active-Directory-Identity/Your-Pa-word-doesn-t-matter/ba-p/731984).

## <a name="on-premises-hybrid-scenarios"></a>Локальные гибридные сценарии

Защита учетных записей только для облака является полезной возможностью, но многие организации поддерживают гибридные сценарии, включая Windows Server Active Directory в локальной среде. Преимущества безопасности защиты паролей Azure AD также можно расширить в среде Windows Server Active Directory, используя установку локальных агентов. Теперь пользователи и администраторы, которые меняют или сбрасывают пароли в Active Directory, должны соответствовать той же политике паролей, что и облачные пользователи.

## <a name="how-are-passwords-evaluated"></a>Оценка паролей

Каждый раз, когда пользователь изменяет или сбрасывает пароль, новый пароль проверяется на надежность и сложность, проверяя их по Объединенному списку терминов из глобальных и настраиваемых списков запрещенных паролей (если он настроен).

Даже если пароль пользователя содержит запрещенный пароль, его все еще можно принять, если общий пароль достаточно надежный. Новый настроенный пароль пройдет через следующие шаги, чтобы оценить его общую надежность на принятие или отклонение.

### <a name="step-1-normalization"></a>Шаг 1. Нормализация

Новый пароль сначала проходит через процесс нормализации. Этот метод позволяет соотнесению небольшого набора запрещенных паролей с большим набором потенциально ненадежных паролей.

Нормализация состоит из двух частей.  Во-первых, все прописные буквы меняются на нижний регистр.  Во-вторых, замены общих символов выполняются следующим образом:  

| Исходный символ  | Замененный символ |
| --- | --- |
| "0"  | "o" |
| 1  | "l" |
| "$"  | "s" |
| '\@'  | "а" |

Пример. Предположим, что пароль "blank" запрещен и пользователь пытается сменить пароль на Bl@nK. Несмотря на то что Bl@nk не был конкретно запрещен, процесс нормализации преобразует этот пароль в "blank", который является запрещенным паролем.

### <a name="step-2-check-if-password-is-considered-banned"></a>Шаг 2. Проверка того, является ли пароль заблокированным

#### <a name="fuzzy-matching-behavior"></a>Режим работы нечеткого соответствия

Нечеткое сопоставление используется для нормализованного пароля, чтобы определить, содержит ли он пароль, найденный либо в глобальном, либо в пользовательском списках запрещенных паролей. Процесс сопоставления основан на расстоянии редактирования одного (1) сравнения.  

Пример. Предположим, что пароль "abcdef" запрещен и пользователь пытается сменить пароль на один из следующих.

"abcdeg"     *(последний символ изменен с "f" на "g")* "abcdefg"    *("g" добавлен в конец) * "abcde"      *(завершающий "f" удалено с конца)* .

Каждый из вышеперечисленных паролей не соответствует конкретно запрещенному паролю "abcdef". Однако, поскольку каждый пример находится в пределах расстояния, равного 1 из запрещенного термина «abcdef», все они считаются совпадением с «abcdef».

#### <a name="substring-matching-on-specific-terms"></a>Совпадение строк (на определенных условиях)

Совпадение строк используется в нормализованном пароле для проверки имени и фамилии пользователя, а также имени владельца (обратите внимание, что сопоставление имени владельца не выполняется при проверке паролей на контроллере домена Active Directory).

Пример: Предположим, что у нас есть пользователь, POL, который хочет сбросить свой пароль на "P0l123fb". После нормализации этот пароль станет «pol123fb». Подстрока Match определяет, что пароль содержит имя пользователя "POL". Несмотря на то, что "P0l123fb" не был специально включен в список запрещенных паролей, сопоставление подстроки в пароле найдено как "POL". Таким образом, этот пароль был бы отклонен.

#### <a name="score-calculation"></a>Оценки безопасности

Следующим шагом является идентификация всех экземпляров запрещенных паролей в новом нормализованном пароле пользователя. Затем сделайте следующее:

1. Каждый запрещенный пароль, найденный в пароле пользователя, получает один балл.
2. Каждый оставшийся уникальный символ получает один балл.
3. Пароль должен быть не менее пяти (5) баллов, чтобы он был принят.

В следующих двух примерах предположим, что компания Contoso использует защиту паролем Azure AD и имеет "contoso" в своем настраиваемом списке. Предположим также, что "blank" находится в глобальном списке.

Пример. Пользователь изменяет пароль на "C0ntos0Blank12".

После нормализации этот пароль будет выглядеть как "contosoblank12". Процесс сопоставления определяет, что этот пароль содержит запрещенные пароли: "contoso" и "blank". Этот пароль предоставляется оценку:

[Contoso] + [пусто] + [1] + [2] = 4 точки, так как этот пароль не меньше пяти (5) пунктов, он будет отклонен.

Пример. Пользователь изменяет пароль на "ContoS0Bl@nkf9!".

После нормализации этот пароль будет выглядеть как "contosoblankf9". Процесс сопоставления определяет, что этот пароль содержит запрещенные пароли: "contoso" и "blank". Этот пароль предоставляется оценку:

[Contoso] + [Blank] + [f] + [9] + [!] = 5 точек, так как этот пароль не менее пяти (5) пунктов, он принимается.

   > [!IMPORTANT]
   > Обратите внимание, что алгоритм запрещенных паролей вместе с глобальным списком может и действительно изменится в любое время в Azure на основе текущего анализа и исследования безопасности. Для службы агента локального контроллера домена обновленные алгоритмы вступят в силу только после повторной установки программного обеспечения агента контроллера домена.

## <a name="license-requirements"></a>Требования лицензий

|   | Защита паролей Azure AD с помощью списка глобально заблокированных паролей | Защита паролей Azure AD с помощью настраиваемого списка заблокированных паролей|
| --- | --- | --- |
| Только пользователи облака | Azure AD уровня "Бесплатный" | Azure AD Premium (P1 или P2) |
| Пользователи, синхронизированные с локальным сервером Windows Server Active Directory | Azure AD Premium (P1 или P2) | Azure AD Premium (P1 или P2) |

> [!NOTE]
> Локальные Windows Server Active Directory пользователи, которые не синхронизированы с Azure Active Directory, также могут воспользоваться преимуществами защиты паролей Azure AD на основе существующих лицензий для синхронизированных пользователей.

Дополнительные сведения о лицензировании, включая расходы, можно найти на [сайте с ценами на Azure Active Directory](https://azure.microsoft.com/pricing/details/active-directory/).

## <a name="what-do-users-see"></a>Что видят пользователи?

Когда пользователь попытается сбросить пароль на такой, который может быть заблокированным, появится следующее сообщение об ошибке:

К сожалению, ваш пароль содержит слово, фразу или сочетание символов, которые легко угадать. Попробуйте ввести другой пароль.

## <a name="next-steps"></a>Следующие шаги

- [Настройка пользовательского списка заблокированных паролей](howto-password-ban-bad.md)
- [Развертывание предварительной версии защиты паролем Azure AD](howto-password-ban-bad-on-premises-deploy.md)
