---
title: Аутентификация на основе сертификата в iOS — Azure Active Directory
description: Узнайте о поддерживаемых сценариях и требованиях для настройки проверки подлинности на основе сертификатов для Azure Active Directory в решениях с помощью устройств iOS.
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 04/17/2020
ms.author: iainfou
author: iainfoulds
manager: daveba
ms.collection: M365-identity-device-management
ms.openlocfilehash: 5ede7ddb81bae69d92983e787e779ee9d410bd87
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2020
ms.locfileid: "82144067"
---
# <a name="azure-active-directory-certificate-based-authentication-on-ios"></a>Аутентификация на основе сертификата в Azure Active Directory на устройстве iOS

Для повышения безопасности устройства iOS могут использовать проверку подлинности на основе сертификатов (CBA) для проверки подлинности в Azure Active Directory (Azure AD), используя сертификат клиента на устройстве при подключении к следующим приложениям или службам:

* мобильным приложениям Office, таким как Microsoft Outlook и Microsoft Word;
* клиентам Exchange ActiveSync (EAS).

Использование сертификатов устраняет необходимость ввода имени пользователя и пароля в определенные сообщения электронной почты и Microsoft Office приложения на мобильном устройстве.

В этой статье описаны требования и поддерживаемые сценарии настройки CBA на устройстве iOS. CBA для iOS доступен в общедоступных облаках Azure, облаке Microsoft для государственных организаций, Microsoft Cloud Германии и Microsoft Azure Китае 21Vianet.

## <a name="microsoft-mobile-applications-support"></a>Поддержка мобильных приложений Microsoft

| Приложения | Поддержка |
| --- | --- |
| Приложение Azure Information Protection |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| Корпоративный портал Intune |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| Microsoft Teams |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| Office (мобильный) |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| OneNote |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| OneDrive |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| Outlook |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| Power BI |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| Skype для бизнеса |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| Word/Excel/PowerPoint |![Установите флажок, обозначающий поддержку для этого приложения][1] |
| Yammer |![Установите флажок, обозначающий поддержку для этого приложения][1] |

## <a name="requirements"></a>Requirements (Требования)

Чтобы использовать CBA с iOS, действуют следующие требования и рекомендации.

* Версия ОС устройства должна быть iOS 9 или более поздней версии.
* Для приложений Office на iOS требуется Microsoft Authenticator.
* В цепочке ключей macOS должен быть создан параметр Identity, включающий URL-адрес проверки подлинности сервера ADFS. Дополнительные сведения см. [в статье Создание предпочтения идентификации в разделе доступ к цепочке ключей на компьютере Mac](https://support.apple.com/guide/keychain-access/create-an-identity-preference-kyca6343b6c9/mac).

Ниже приведены требования и рекомендации для следующих службы федерации Active Directory (AD FS) (ADFS).

* Сервер ADFS должен быть включен для проверки подлинности на сертификате и использоваться для федеративной проверки подлинности.
* Сертификат должен использовать расширенное использование ключа (EKU) и содержать имя участника-пользователя в *альтернативном имени субъекта (имя участника NT)*.

## <a name="configure-adfs"></a>Настройка AD FS

Чтобы служба Azure AD отозвала сертификат клиента, маркер ADFS должен иметь следующие утверждения. Azure AD добавляет эти утверждения в маркер обновления, если они доступны в токене ADFS (или любом другом токене SAML). При необходимости проверки маркера обновления эти сведения используются для проверки отзыва.

* `http://schemas.microsoft.com/ws/2008/06/identity/claims/<serialnumber>`— Добавление серийного номера сертификата клиента;
* `http://schemas.microsoft.com/2012/12/certificatecontext/field/<issuer>`— Добавьте строку для издателя сертификата клиента.

Рекомендуется также обновить страницы ошибок ADFS вашей организации со следующими сведениями:

* Требование для установки Microsoft Authenticator в iOS.
* инструкциями о получении сертификата пользователя.

Дополнительные сведения см. [в разделе Настройка страницы входа AD FS](https://technet.microsoft.com/library/dn280950.aspx).

## <a name="use-modern-authentication-with-office-apps"></a>Использование современной проверки подлинности в приложениях Office

Некоторые приложения Office с включенной современной проверкой подлинности отправляют `prompt=login` в Azure AD в своем запросе. По умолчанию Azure AD преобразует `prompt=login` запрос в ADFS как `wauth=usernamepassworduri` (запрашивает ADFS для проверки подлинности U/P) и `wfresh=0` (запрашивает ADFS игнорировать состояние единого входа и выполняет новую проверку подлинности). Если вы хотите включить проверку подлинности на основе сертификатов для этих приложений, измените поведение Azure AD по умолчанию.

Чтобы обновить поведение по умолчанию, задайте для параметра "*промптлогинбехавиор*" в параметрах федеративного домена значение " *отключено*". Для выполнения этой задачи можно использовать командлет [MSOLDomainFederationSettings](/powershell/module/msonline/set-msoldomainfederationsettings?view=azureadps-1.0) , как показано в следующем примере:

```powershell
Set-MSOLDomainFederationSettings -domainname <domain> -PromptLoginBehavior Disabled
```

## <a name="support-for-exchange-activesync-clients"></a>Поддержка клиентов Exchange ActiveSync

В iOS версии 9 и выше поддерживается собственный почтовый клиент iOS. Чтобы определить, поддерживается ли эта функция для всех других приложений Exchange ActiveSync, обратитесь к разработчику приложения.

## <a name="next-steps"></a>Дальнейшие шаги

Инструкции по настройке проверки подлинности на основе сертификатов в среде см. в статье [Приступая к работе с проверкой подлинности на основе сертификатов](active-directory-certificate-based-authentication-get-started.md) .

<!--Image references-->
[1]: ./media/active-directory-certificate-based-authentication-ios/ic195031.png
