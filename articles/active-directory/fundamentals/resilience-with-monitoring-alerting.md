---
title: Устойчивость благодаря мониторингу и аналитике с помощью Azure AD B2C | Документация Майкрософт
description: Устойчивость благодаря мониторингу и анализу с помощью Azure AD B2C
services: active-directory
ms.service: active-directory
ms.subservice: fundamentals
ms.workload: identity
ms.topic: how-to
author: gargi-sinha
ms.author: gasinh
manager: martinco
ms.reviewer: ''
ms.date: 11/30/2020
ms.custom: it-pro
ms.collection: M365-identity-device-management
ms.openlocfilehash: 766fd80ae5f7450c8e45d10afa4612a788a8d5fc
ms.sourcegitcommit: c4246c2b986c6f53b20b94d4e75ccc49ec768a9a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2020
ms.locfileid: "96602162"
---
# <a name="resilience-through-monitoring-and-analytics"></a>Устойчивость с помощью мониторинга и аналитики

Мониторинг увеличивает уровень доступности и производительности приложений и служб. Она предоставляет исчерпывающее решение для сбора, анализа и работы с данными телеметрии из инфраструктуры и приложений. Оповещения заблаговременно уведомляются при обнаружении проблем со службой или приложениями. Они позволяют выявление и устранение проблем, прежде чем конечные пользователи службы заметят их. [Azure AD log Analytics](https://azure.microsoft.com/services/monitor/?OCID=AID2100131_SEM_6d16332c03501fc9c1f46c94726d2264:G:s&ef_id=6d16332c03501fc9c1f46c94726d2264:G:s&msclkid=6d16332c03501fc9c1f46c94726d2264#features) помогает анализировать, искать журналы аудита и журналы входа, а также создавать пользовательские представления.

## <a name="monitor-and-get-notified-through-alerts"></a>Мониторинг и получение уведомлений с помощью оповещений

Мониторинг системы и инфраструктуры крайне важен для обеспечения общей работоспособности служб. Он начинается с определения бизнес-метрик, таких как новое прибытие пользователя, скорость проверки подлинности конечного пользователя и преобразование. Настройте такие индикаторы для мониторинга. Если вы планируете поочередный скачок в связи с повышением или праздничным трафиком, измените оценки специально для события и соответствующего теста производительности для бизнес-метрик. После события возвращается к предыдущему тестовому плану.

Аналогично, чтобы выявить сбои или нарушения производительности, следует настроить хороший базовый уровень, а затем определить предупреждения — это незаменимая практика, позволяющая быстро реагировать на возникающие проблемы.

![На рисунке изображены компоненты мониторинга и аналитики](media/resilience-with-monitoring-alerting/monitoring-analytics-architecture.png)

### <a name="how-to-implement-monitoring-and-alerting"></a>Реализация мониторинга и оповещений

- **Мониторинг**. Используйте [Azure Monitor](https://docs.microsoft.com/azure/active-directory-b2c/azure-monitor) , чтобы постоянно отслеживать работоспособность основных целей уровня обслуживания и получать уведомления при каждом возникновении критических изменений. Начните с определения Azure AD B2C политики или приложения в качестве критического компонента вашего бизнеса, для которого необходимо отслеживать состояние цели обслуживания. Выявление ключевых показателей, которые совпадают с вашим SLO.
Например, следите за следующими метриками, так как внезапное удаление приводит к утрате бизнеса.

  - **Всего запросов**: общее число запросов "n", отправленных в политику Azure AD B2C.

  - **Частота успешных попыток (%)**: успешных запросов/общее число запросов.

  Получите доступ к [ключевым индикаторам](https://docs.microsoft.com/azure/active-directory-b2c/view-audit-logs) в [Application Insights](https://docs.microsoft.com/azure/active-directory-b2c/analytics-with-application-insights) , где хранятся Azure AD B2C журналы на основе политик, [журналы аудита](https://docs.microsoft.com/azure/active-directory-b2c/analytics-with-application-insights)и журналы входа.  

   - **Визуализации**. Использование панелей мониторинга для сборки log Analytics для визуального мониторинга ключевых индикаторов.

   - **Текущий период**: создание временных диаграмм для отображения изменений в общем количестве запросов и успешных попыток (%) в текущем периоде, например в текущей неделе.

   - **Предыдущий период**: создание временных диаграмм для отображения изменений в общем количестве запросов и успешных попыток (%) за некоторый предыдущий период для справочных целей, например за прошлую неделю.

- **Предупреждения**. Использование log Analytics определяет [оповещения](https://docs.microsoft.com/azure/azure-monitor/platform/alerts-log) , которые вызываются при внезапном изменении ключевых показателей. Эти изменения могут негативно повлиять на SLO. Оповещения используют различные формы методов уведомления, включая электронную почту, SMS и веб-перехватчики. Начните с определения критерия, который действует как пороговое значение, по отношению к которому будет срабатывать оповещение. Пример:
  - Оповещение о внезапном сбросе общего количества запросов: Активация предупреждения при внезапном удалении общего числа запросов. Например, при наличии в 25% отбрасывания от общего числа запросов по сравнению с предыдущим периодом генерируется предупреждение.  
  - Оповещение о значительных сбросах успешных попыток (%): активировать оповещение, когда частота успешных операций в выбранной политике существенно снижается.
  - При получении оповещения устраните проблему с помощью [log Analytics](https://docs.microsoft.com/azure/active-directory/reports-monitoring/howto-install-use-log-analytics-views), [Application Insights](https://docs.microsoft.com/azure/active-directory-b2c/troubleshoot-with-application-insights#:~:text=Setup%20Application%20Insights%201%20Go%20to%20the%20Azure,left-menu%2C%20and%20click%20on%20it.%20More%20items...%20)и [расширения VS Code](https://marketplace.visualstudio.com/items?itemName=AzureADB2CTools.aadb2c) для Azure AD B2C. После устранения проблемы и развертывания обновленного приложения или политики отслеживание ключевых показателей продолжится до возврата в нормальный диапазон.

- **Оповещения службы**. Используйте [Azure AD B2C оповещения уровня обслуживания](https://docs.microsoft.com/azure/service-health/service-health-overview) , чтобы получать уведомления о проблемах службы, плановом обслуживании, рекомендациях по работоспособности и рекомендациях по безопасности.

- **Создание отчетов**. с [помощью log Analytics](https://docs.microsoft.com/azure/active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics)можно создавать отчеты, которые помогут вам разобраться с пользователями, техническими проблемами и возможностями роста.
  - **Панель мониторинга работоспособности**. Создание [настраиваемых панелей мониторинга с помощью функции панели мониторинга Azure](https://docs.microsoft.com/azure/azure-monitor/learn/tutorial-app-dashboards) , которая поддерживает добавление диаграмм с помощью запросов log Analytics. Например, Идентифицируйте шаблон успешных и неудачных входов, причины сбоев и данные телеметрии об устройствах, используемых для выполнения запросов.
  - **Отказаться от Azure AD B2C путешествие**: используйте [книгу](https://github.com/azure-ad-b2c/siem#list-of-abandon-journeys) для отслеживания списка отброшенных Azure AD B2Cных путей, в которых пользователь начал вход или регистрацию, но никогда не завершил его. Он предоставляет подробные сведения об ИДЕНТИФИКАТОРе политики и разбиении действий, выполняемых пользователем, прежде чем отказаться от пути.
  - **Книги по Azure AD B2C мониторингу**: используйте [книги](https://github.com/azure-ad-b2c/siem)мониторинга, которые включают в себя Azure AD B2Cную панель мониторинга, операции многофакторной проверки подлинности (MFA), отчет о условном доступе и журналы поиска по correlationId, чтобы получить более подробные сведения о работоспособности среды Azure AD B2C.
  
## <a name="next-steps"></a>Дальнейшие действия

- [Ресурсы устойчивости для разработчиков Azure AD B2C](resilience-b2c.md)
  - [Устойчивая работа конечного пользователя](resilient-end-user-experience.md)
  - [Устойчивые интерфейсы с внешними процессами](resilient-external-processes.md)
  - [Обеспечение устойчивости с помощью рекомендаций для разработчиков](resilience-b2c-developer-best-practices.md)
- [Устойчивость к сборке в инфраструктуре проверки подлинности](resilience-in-infrastructure.md)
- [Повышение устойчивости проверки подлинности и авторизации в приложениях](resilience-app-development-overview.md)
