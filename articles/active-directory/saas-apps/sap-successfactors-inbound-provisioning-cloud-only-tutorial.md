---
title: Руководство по настройке входящей подготовки SuccessFactors в Azure Active Directory | Документация Майкрософт
description: Узнайте, как настроить входящую подготовку из SuccessFactors в Azure AD.
services: active-directory
author: cmmdesai
documentationcenter: na
manager: jodadzie
ms.assetid: fac4f61e-d942-4429-a298-9ba74db95077
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 12/06/2019
ms.author: chmutali
ms.openlocfilehash: 2ae951896e9c97826264990dc33b9a1930b0eec2
ms.sourcegitcommit: ce4a99b493f8cf2d2fd4e29d9ba92f5f942a754c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/28/2019
ms.locfileid: "75530057"
---
# <a name="tutorial-configure-sap-successfactors-to-azure-ad-user-provisioning-preview"></a>Руководство по настройке SAP SuccessFactors для подготовки пользователей в Azure AD (Предварительная версия)
Цель этого учебника — продемонстрировать шаги, которые необходимо выполнить, чтобы подготовить рабочие данные от SuccessFactors сотрудника к Azure Active Directory с дополнительным адресом электронной почты, перезаписываемым в SuccessFactors. Эта интеграция доступна в общедоступной предварительной версии и поддерживает получение более [70 атрибутов пользователей](../manage-apps/sap-successfactors-attribute-reference.md) из SuccessFactors Employee Central. 

>[!NOTE]
>Используйте этот учебник, если пользователи, которые вы хотите подготавливать из SuccessFactors, являются только облачными пользователями, которым не требуется локальная учетная запись AD. Если пользователям требуется только локальная учетная запись AD или учетная запись AD и Azure AD, обратитесь к руководству по [настройке SAP SuccessFactors для Active Directory](sap-successfactors-inbound-provisioning-tutorial.md#overview) подготовки пользователей. 

## <a name="overview"></a>Обзор

[Служба подготовки пользователей Azure Active Directory](../manage-apps/user-provisioning.md) интегрируется с [центральным сотрудником SuccessFactors](https://www.successfactors.com/products-services/core-hr-payroll/employee-central.html) для управления жизненным циклом идентификации пользователей. 

Рабочие процессы подготовки пользователей SuccessFactors, поддерживаемые службой подготовки пользователей Azure AD, обеспечивают автоматизацию следующих сценариев управления персоналом и жизненным циклом удостоверений.

* **Наем новых сотрудников** . при добавлении нового сотрудника в SuccessFactors учетная запись пользователя автоматически создается в Azure Active Directory и дополнительно Office 365 и [других приложениях SaaS, поддерживаемых Azure AD](../manage-apps/user-provisioning.md), с обратным записью адреса электронной почты в SuccessFactors.

* **Обновление атрибутов и профилей сотрудников** . при обновлении записи сотрудника в SuccessFactors (например, ее имени, должности или руководителя) учетная запись пользователя будет автоматически обновлена Azure Active Directory и дополнительно Office 365 и [других приложений SaaS, поддерживаемых Azure AD](../manage-apps/user-provisioning.md).

* **Прекращение сотрудников** . когда сотрудник завершает работу в SuccessFactors, его учетная запись автоматически отключается в Azure Active Directory и при необходимости Office 365 и [других приложениях SaaS, поддерживаемых Azure AD](../manage-apps/user-provisioning.md).

* Повторный **прием сотрудников** . когда сотрудник переключается в SuccessFactors, его старая учетная запись может быть автоматически повторно активирована или повторно подготовлена (в зависимости от ваших предпочтений), чтобы Azure Active Directory и дополнительно Office 365 и [других приложений SaaS, поддерживаемых Azure AD](../manage-apps/user-provisioning.md).

### <a name="who-is-this-user-provisioning-solution-best-suited-for"></a>Кому это решение подготовки пользователей подходит лучше всего?

SuccessFactors решение Azure Active Directory для подготовки пользователей лучше всего подходит для:

* Организации, которым нужен предварительно построенное облачное решение для подготовки пользователей SuccessFactors

* Организации, для которых требуется непосредственная подготовка пользователей от SuccessFactors к Azure Active Directory

* Организации, которым требуется подготовка пользователей с помощью данных, полученных от [SuccessFactors Employee Central (EC)](https://www.successfactors.com/products-services/core-hr-payroll/employee-central.html)

* организаций, использующих Office 365 для электронной почты.

## <a name="solution-architecture"></a>Архитектура решения

В этом разделе описывается архитектура комплексного решения подготовки пользователей для облачных пользователей. Имеется два связанных потока:

* **Достоверный поток данных HR — от SuccessFactors до Azure Active Directory:** В рамках этого потока событий потоков (например, новых сотрудников, перемещений, завершений) в центре Cloud SuccessFactors сотрудники Central, а затем данные события переводятся в Azure Active Directory. В зависимости от события это может привести к созданию, обновлению, включению и отключению операций в Azure AD.
* **Поток обратной записи электронной почты — из локальной Active Directory в SuccessFactors:** После завершения создания учетной записи в Azure Active Directory значение атрибута электронной почты или имя участника-пользователя, созданное в Azure AD, можно записать обратно в SuccessFactors.

  ![Обзор](./media/sap-successfactors-inbound-provisioning/sf2aad-overview.png)

### <a name="end-to-end-user-data-flow"></a>Полноценный поток данных пользователей

1. Группа отделов кадров выполняет рабочие транзакции (поисполнители/перевозчики/Леаверс или новые сотрудники, передачи и прекращения) в SuccessFactors сотрудников Central.
2. Служба подготовки Azure AD выполняет запланированные синхронизации удостоверений из SuccessFactors EC и определяет изменения, которые необходимо обработать для синхронизации с локальными Active Directory.
3. Служба подготовки Azure AD определяет изменение и вызывает операцию создания, обновления, включения или отключения для пользователя в Azure AD.
4. Если настроено [приложение обратной записи SuccessFactors](sap-successfactors-writeback-tutorial.md) , то адрес электронной почты пользователя извлекается из Azure AD. 
5. Служба подготовки Azure AD записывает атрибут обратной почты в SuccessFactors на основе используемого атрибута сопоставления.

## <a name="planning-your-deployment"></a>Планирование развертывания

Для настройки подготовки облачных учетных записей пользователей из SuccessFactors в Azure AD требуется значительное планирование, охватывающее различные аспекты, такие как:

* Определение соответствующего идентификатора 
* Сопоставление атрибутов
* Преобразование атрибута 
* Фильтры области

Подробные рекомендации по этим темам см. в [плане развертывания Cloud HR](../manage-apps/plan-cloud-hr-provision.md) . 

## <a name="configuring-successfactors-for-the-integration"></a>Настройка SuccessFactors для интеграции

Распространенным требованием всех соединителей подготовки SuccessFactors является то, что им требуются учетные данные учетной записи SuccessFactors с правильными разрешениями для вызова API-интерфейсов OData SuccessFactors. В этом разделе описаны шаги по созданию учетной записи службы в SuccessFactors и предоставлению соответствующих разрешений. 

* [Создание или указание учетной записи пользователя API в SuccessFactors](#createidentify-api-user-account-in-successfactors)
* [Создание роли разрешений API](#create-an-api-permissions-role)
* [Создание группы разрешений для пользователя API](#create-a-permission-group-for-the-api-user)
* [Предоставление роли разрешений группе разрешений](#grant-permission-role-to-the-permission-group)

### <a name="createidentify-api-user-account-in-successfactors"></a>Создание или указание учетной записи пользователя API в SuccessFactors
Обратитесь к группе администраторов SuccessFactors или партнеру по реализации, чтобы создать или указать учетную запись пользователя в SuccessFactors, которая будет использоваться для вызова интерфейсов API OData. При настройке приложений подготовки в Azure AD будут необходимы учетные данные пользователя и пароль этой учетной записи. 

### <a name="create-an-api-permissions-role"></a>Создание роли разрешений API

* Войдите в SAP SuccessFactors с учетной записью пользователя, имеющего доступ к центру администрирования.
* Выполните поиск по запросу *Управление ролями разрешений*, а затем выберите **Управление ролями разрешений** в результатах поиска.
  ![управление ролями разрешений](./media/sap-successfactors-inbound-provisioning/manage-permission-roles.png)
* В списке роль разрешений щелкните **создать**.
  > [!div class="mx-imgBorder"]
  > ![создать новую роль разрешений](./media/sap-successfactors-inbound-provisioning/create-new-permission-role-1.png)
* Добавьте имя и **Описание** **роли** для новой роли разрешений. Имя и описание должны указывать, что роль предназначена для разрешений на использование API.
  > [!div class="mx-imgBorder"]
  > ![сведений о роли разрешений](./media/sap-successfactors-inbound-provisioning/permission-role-detail.png)
* В разделе Параметры разрешений щелкните **разрешение...** , затем прокрутите вниз список разрешений и выберите пункт **Управление инструментами интеграции**. Установите флажок **разрешить администратору доступ к API OData через обычную проверку подлинности**.
  > [!div class="mx-imgBorder"]
  > ![управление средствами интеграции](./media/sap-successfactors-inbound-provisioning/manage-integration-tools.png)
* Прокрутите вниз в том же окне и выберите **Центральный API сотрудника**. Добавьте разрешения, как показано ниже, для чтения с помощью API ODATA и редактирования с помощью API ODATA. Выберите параметр изменить, если вы планируете использовать одну и ту же учетную запись для сценария SuccessFactors для обратной записи. 
  > [!div class="mx-imgBorder"]
  > ![разрешения на запись](./media/sap-successfactors-inbound-provisioning/odata-read-write-perm.png)
* Нажмите кнопку **Готово**. Щелкните **Сохранить изменения**.

### <a name="create-a-permission-group-for-the-api-user"></a>Создание группы разрешений для пользователя API

* В центре администрирования SuccessFactors выполните поиск по запросу *Управление группами разрешений*, а затем выберите **Управление группами разрешений** в результатах поиска.
  > [!div class="mx-imgBorder"]
  > ![Управление группами разрешений](./media/sap-successfactors-inbound-provisioning/manage-permission-groups.png)
* В окне Управление группами разрешений щелкните **создать**.
  > [!div class="mx-imgBorder"]
  > ![добавить новую группу](./media/sap-successfactors-inbound-provisioning/create-new-group.png)
* Добавьте имя группы для новой группы. Имя группы должно указывать, что группа предназначена для пользователей API.
  > [!div class="mx-imgBorder"]
  > ![имя группы разрешений](./media/sap-successfactors-inbound-provisioning/permission-group-name.png)
* Добавление участников в группу. Например, можно выбрать **имя пользователя** в раскрывающемся меню пул людей, а затем ввести имя пользователя учетной записи API, которая будет использоваться для интеграции. 
  > [!div class="mx-imgBorder"]
  > ![Добавление членов группы](./media/sap-successfactors-inbound-provisioning/add-group-members.png)
* Нажмите кнопку **Готово** , чтобы завершить создание группы разрешений.

### <a name="grant-permission-role-to-the-permission-group"></a>Предоставление роли разрешений группе разрешений

* В центре администрирования SuccessFactors выполните поиск по запросу *Управление ролями разрешений*, а затем выберите **Управление ролями разрешений** в результатах поиска.
* В **списке роль разрешений**выберите роль, созданную для разрешений на использование API.
* В разделе **предоставить эту роль для...** нажмите кнопку **Добавить..** ..
* Выберите **группу разрешений...** в раскрывающемся меню выберите команду **выбрать...** , чтобы открыть окно группы для поиска и выбора группы, созданной выше. 
  > [!div class="mx-imgBorder"]
  > ![добавить группу разрешений](./media/sap-successfactors-inbound-provisioning/add-permission-group.png)
* Проверьте роль разрешений, предоставляемую группе разрешений. 
  > [!div class="mx-imgBorder"]
  > ![роли разрешений и сведений о группе](./media/sap-successfactors-inbound-provisioning/permission-role-group.png)
* Щелкните **Сохранить изменения**.

## <a name="configuring-user-provisioning-from-successfactors-to-azure-ad"></a>Настройка подготовки пользователей из SuccessFactors в Azure AD

В этом разделе приводятся шаги по подготовке учетных записей пользователей из SuccessFactors в Azure AD.

* [Добавление приложения соединителя подготовки и Настройка подключения к SuccessFactors](#part-1-add-the-provisioning-connector-app-and-configure-connectivity-to-successfactors)
* [Настройка сопоставлений атрибутов](#part-2-configure-attribute-mappings)
* [Включение и запуск подготовки пользователей](#enable-and-launch-user-provisioning)

### <a name="part-1-add-the-provisioning-connector-app-and-configure-connectivity-to-successfactors"></a>Часть 1. Добавление приложения соединителя подготовки и Настройка подключения к SuccessFactors

**Чтобы настроить SuccessFactors для подготовки в Azure AD, выполните следующие действия.**

1. Перейдите на сайт <https://portal.azure.com>.

2. В области навигации слева выберите **Azure Active Directory**.

3. Щелкните **Корпоративные приложения**, а затем — **Все приложения**.

4. Выберите **Добавить приложение** и выберите категорию **Все**.

5. Выполните поиск по запросу **SuccessFactors, чтобы Azure Active Directory подготовки пользователей**, и добавьте это приложение из коллекции.

6. После добавления приложения и отображения экрана сведений о приложений выберите **Подготовка**.

7. Изменение режима **подготовки** на **Автоматический**

8. В разделе **Учетные данные администратора** заполните поля следующим образом.

   * **Имя пользователя администратора** — введите имя пользователя учетной записи API SuccessFactors с ДОБАВЛЕНным идентификатором компании. Он имеет формат: **username\@companyID**

   * **Пароль администратора —** Введите пароль учетной записи пользователя API SuccessFactors. 

   * **URL-адрес клиента —** Введите имя конечной точки служб API OData SuccessFactors. Введите только имя узла сервера без HTTP или HTTPS. Это значение должно выглядеть следующим образом: **API-Server-Name.successfactors.com**.

   * **Адрес электронной почты для уведомлений** — введите адрес электронной почты и установите флажок "send email if failure occurs" (Отправлять по электронной почте в случае сбоя).
    > [!NOTE]
    > Служба подготовки Azure AD отправляет уведомление по электронной почте, если задание подготовки переходит в состояние [Карантин](/azure/active-directory/manage-apps/application-provisioning-quarantine-status).

   * Нажмите кнопку **Проверить подключение**. Если проверка подключения выполнена успешно, нажмите кнопку **Сохранить** в верхней части. В случае сбоя Проверьте правильность учетных данных и URL-адреса SuccessFactors.
    >[!div class="mx-imgBorder"]
    >![Портал Azure](./media/sap-successfactors-inbound-provisioning/sf2aad-provisioning-creds.png)

   * После успешного сохранения учетных данных в разделе **сопоставления** отобразится сопоставление по умолчанию **синхронизировать пользователей SuccessFactors с Azure Active Directory**

### <a name="part-2-configure-attribute-mappings"></a>Часть 2. Настройка сопоставлений атрибутов

В этом разделе вы настроите, каким способом данные пользователей из SuccessFactors будут Active Directory.

1. На вкладке Подготовка в разделе **сопоставления**щелкните **синхронизировать SuccessFactors пользователей с Azure Active Directory**.

1. В поле **область исходного объекта** можно выбрать, какие наборы пользователей в SuccessFactors должны находиться в области для подготовки в Azure AD, определив набор фильтров на основе атрибутов. По умолчанию используется область "все пользователи в SuccessFactors". Примеры фильтров

   * Пример. область для пользователей с Персонидекстернал между 1000000 и 2000000 (исключая 2000000)

      * Атрибут: Персонидекстернал

      * Оператор: REGEX Match

      * Значение: (1[0–9][0–9][0–9][0–9][0–9][0–9])

   * Пример: только сотрудники, а не временные работники

      * Атрибут: EmployeeID

      * Оператор: IS NOT NULL

   > [!TIP]
   > При первой настройке приложения подготовки необходимо проверить сопоставления атрибутов и выражения, чтобы получить желаемый результат. Корпорация Майкрософт рекомендует использовать фильтры области в **области объекта источника** , чтобы проверить сопоставления с помощью нескольких тестовых пользователей из SuccessFactors. После проверки работоспособности сопоставлений можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

   > [!CAUTION] 
   > Поведение подсистемы подготовки по умолчанию заключается в том, чтобы отключить или удалить пользователей, которые выходят за пределы области. Это может быть нежелательно в SuccessFactors для интеграции с Azure AD. Чтобы переопределить это поведение по умолчанию, см. статью [пропуск удаления учетных записей пользователей, которые выходят за пределы области](../manage-apps/skip-out-of-scope-deletions.md)
  
1. В поле **Действия с целевыми объектами** можно в глобальном масштабе отфильтровать, какие действия доступны для выполнения в Active Directory. Самыми распространенными являются **создание** и **обновление**.

1. В разделе **сопоставления атрибутов** можно определить, как отдельные атрибуты SuccessFactors сопоставляются с атрибутами Active Directory.

  >[!NOTE]
  >Полный список атрибута SuccessFactors, поддерживаемого приложением, см. в [справочнике по атрибуту SuccessFactors](../manage-apps/sap-successfactors-attribute-reference.md) .


1. Щелкните существующее сопоставление атрибута, чтобы его обновить, или **Добавить новое сопоставление** в нижней части экрана, чтобы добавить новые сопоставления. Отдельное сопоставление атрибутов поддерживает следующие свойства:

      * **Тип сопоставления**

         * **Direct** — записывает значение атрибута SuccessFactors в атрибут AD без изменений

         * **Константа** — записывает статическое постоянное строковое значение в атрибут AD.

         * **Выражение** — позволяет записать пользовательское значение в атрибут AD на основе одного или нескольких атрибутов SuccessFactors. [Дополнительные сведения см. в статье о выражениях](../manage-apps/functions-for-customizing-application-data.md).

      * **Исходный атрибут** — атрибут пользователя из SuccessFactors

      * **Значение по умолчанию** — необязательно. Если исходный атрибут имеет пустое значение, сопоставление запишет это значение.
            В наиболее распространенной конфигурации это поле остается пустым.

      * **Целевой атрибут** — атрибут пользователя в Active Directory.

      * **Сопоставлять объекты с помощью этого атрибута** — следует ли использовать это сопоставление для уникальной идентификации пользователей между SuccessFactors и Active Directory. Это значение обычно задается в поле ИД рабочего процесса для SuccessFactors, которое обычно сопоставляется с одним из атрибутов идентификатора сотрудника в Active Directory.

      * **Приоритет сопоставления** — возможность указания нескольких атрибутов сопоставления. При указании нескольких атрибутов сопоставления они вычисляются в порядке, заданном в этом поле. Как только соответствие найдено, дальнейшие атрибуты сопоставления не вычисляются.

      * **Применить это сопоставление**

         * **Всегда** — применить это сопоставление как при создании, так и при обновлении пользователей

         * **Только при создании** — применить это сопоставление только при создании пользователей

1. Чтобы сохранить сопоставления, щелкните **Сохранить** в верхней части раздела "Сопоставление атрибутов".

После завершения настройки сопоставления атрибутов [можно включить и запустить службу подготовки пользователей](#enable-and-launch-user-provisioning).

## <a name="enable-and-launch-user-provisioning"></a>Включение и запуск подготовки пользователей

После завершения настройки SuccessFactors подготовки приложений вы можете включить службу подготовки в портал Azureе.

> [!TIP]
> По умолчанию при включении службы подготовки она инициализирует операции подготовки для всех пользователей в области. При наличии ошибок в сопоставлении или проблем с данными Workday задание подготовки может завершиться ошибкой и перейти в состояние карантина. Чтобы избежать этого, рекомендуется настроить фильтр **Область исходного объекта** и протестировать сопоставления атрибутов с несколькими тестовыми пользователями перед запуском полной синхронизации всех пользователей. После проверки работоспособности сопоставлений и получения желаемых результатов можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

1. На вкладке **Подготовка** установите для параметра **Состояние подготовки** значение **Вкл**.

2. Выберите команду **Сохранить**.

3. Эта операция начнет начальную синхронизацию, что может занять переменное количество часов в зависимости от количества пользователей в клиенте SuccessFactors. Можно проверить индикатор выполнения, чтобы отслеживать ход выполнения цикла синхронизации. 

4. В любой момент можно проверить вкладку **Журналы аудита** на портале Azure, чтобы узнать, какие действия выполнила служба подготовки. В журналах аудита перечислены все отдельные события синхронизации, выполняемые службой подготовки, например, какие пользователи считываются из Workday и впоследствии будут добавлены или обновлены в Active Directory. 

5. После завершения первичной синхронизации на вкладке **Подготовка** будет создан сводный отчет аудита, как показано ниже.

   > [!div class="mx-imgBorder"]
   > Индикатор ![подготовки](./media/sap-successfactors-inbound-provisioning/prov-progress-bar-stats.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Дополнительные сведения о поддерживаемых атрибутах SuccessFactors для входящей подготовки](../manage-apps/sap-successfactors-attribute-reference.md)
* [Узнайте, как настроить обратную запись электронной почты в SuccessFactors](sap-successfactors-writeback-tutorial.md)
* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../manage-apps/check-status-user-account-provisioning.md)
* [Узнайте, как настроить единый вход между SuccessFactors и Azure Active Directory](successfactors-tutorial.md)
* [Узнайте, как интегрировать другие приложения SaaS с Azure Active Directory](tutorial-list.md).
* [Узнайте, как экспортировать и импортировать конфигурации подготовки.](../manage-apps/export-import-provisioning-configuration.md)


