---
title: Руководство. Настройка обратной записи SuccessFactors в Azure Active Directory | Документация Майкрософт
description: Узнайте, как настроить обратную запись атрибутов в SuccessFactors из Azure AD.
services: active-directory
author: cmmdesai
documentationcenter: na
manager: jodadzie
ms.assetid: ad255bd4-9e50-43a1-a92b-359215868b6b
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 12/06/2019
ms.author: chmutali
ms.openlocfilehash: 2de0cdd32428884170f549afacdbd52c3a10c93f
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "77060054"
---
# <a name="tutorial-configure-attribute-writeback-from-azure-ad-to-sap-successfactors-preview"></a>Руководство. Настройка обратной записи атрибутов из Azure AD в SAP SuccessFactors (Предварительная версия)
Цель этого руководства — продемонстрировать шаги, которые необходимо выполнить для обратной записи атрибутов из Azure AD в SuccessFactors Employee Central. Единственным атрибутом, который в настоящее время поддерживается для обратной записи, является атрибут email. 

## <a name="overview"></a>Обзор

После настройки входящей интеграции подготовки с помощью [SuccessFactors в локальное приложение AD](sap-successfactors-inbound-provisioning-tutorial.md) или SuccessFactors в приложение подготовки [Azure AD](sap-successfactors-inbound-provisioning-cloud-only-tutorial.md) можно дополнительно настроить приложение обратной записи SuccessFactors для записи адреса электронной почты обратно в SuccessFactors. 

### <a name="who-is-this-user-provisioning-solution-best-suited-for"></a>Кому это решение подготовки пользователей подходит лучше всего?

Решение для подготовки пользователей обратной записи SuccessFactors идеально подходит для:

* Организации, использующие Office 365, которым требуется обратная запись полномочных атрибутов, управляемых им (например, адрес электронной почты), обратно в SuccessFactors

## <a name="configuring-successfactors-for-the-integration"></a>Настройка SuccessFactors для интеграции

Распространенным требованием всех соединителей подготовки SuccessFactors является то, что им требуются учетные данные учетной записи SuccessFactors с правильными разрешениями для вызова API-интерфейсов OData SuccessFactors. В этом разделе описаны шаги по созданию учетной записи службы в SuccessFactors и предоставлению соответствующих разрешений. 

* [Создание или указание учетной записи пользователя API в SuccessFactors](#createidentify-api-user-account-in-successfactors)
* [Создание роли разрешений API](#create-an-api-permissions-role)
* [Создание группы разрешений для пользователя API](#create-a-permission-group-for-the-api-user)
* [Предоставление роли разрешений группе разрешений](#grant-permission-role-to-the-permission-group)

### <a name="createidentify-api-user-account-in-successfactors"></a>Создание или указание учетной записи пользователя API в SuccessFactors
Обратитесь к группе администраторов SuccessFactors или партнеру по реализации, чтобы создать или указать учетную запись пользователя в SuccessFactors, которая будет использоваться для вызова интерфейсов API OData. При настройке приложений подготовки в Azure AD будут необходимы учетные данные пользователя и пароль этой учетной записи. 

### <a name="create-an-api-permissions-role"></a>Создание роли разрешений API

* Войдите в SAP SuccessFactors с учетной записью пользователя, имеющего доступ к центру администрирования.
* Выполните поиск по запросу *Управление ролями разрешений*, а затем выберите **Управление ролями разрешений** в результатах поиска.
  ![Управление ролями разрешений](./media/sap-successfactors-inbound-provisioning/manage-permission-roles.png)
* В списке роль разрешений щелкните **создать**.
  > [!div class="mx-imgBorder"]
  > ![Создать новую роль разрешений](./media/sap-successfactors-inbound-provisioning/create-new-permission-role-1.png)
* Добавьте имя и **Описание** **роли** для новой роли разрешений. Имя и описание должны указывать, что роль предназначена для разрешений на использование API.
  > [!div class="mx-imgBorder"]
  > ![Сведения о роли разрешений](./media/sap-successfactors-inbound-provisioning/permission-role-detail.png)
* В разделе Параметры разрешений щелкните **разрешение...**, затем прокрутите вниз список разрешений и выберите пункт **Управление инструментами интеграции**. Установите флажок **разрешить администратору доступ к API OData через обычную проверку подлинности**.
  > [!div class="mx-imgBorder"]
  > ![Управление инструментами интеграции](./media/sap-successfactors-inbound-provisioning/manage-integration-tools.png)
* Прокрутите вниз в том же окне и выберите **Центральный API сотрудника**. Добавьте разрешения, как показано ниже, для чтения с помощью API ODATA и редактирования с помощью API ODATA. Выберите параметр изменить, если вы планируете использовать одну и ту же учетную запись для сценария SuccessFactors для обратной записи. 
  > [!div class="mx-imgBorder"]
  > ![Чтение разрешений на запись](./media/sap-successfactors-inbound-provisioning/odata-read-write-perm.png)
* Нажмите кнопку **Готово**. Щелкните **Сохранить изменения**.

### <a name="create-a-permission-group-for-the-api-user"></a>Создание группы разрешений для пользователя API

* В центре администрирования SuccessFactors выполните поиск по запросу *Управление группами разрешений*, а затем выберите **Управление группами разрешений** в результатах поиска.
  > [!div class="mx-imgBorder"]
  > ![Управление группами разрешений](./media/sap-successfactors-inbound-provisioning/manage-permission-groups.png)
* В окне Управление группами разрешений щелкните **создать**.
  > [!div class="mx-imgBorder"]
  > ![Добавление новой группы](./media/sap-successfactors-inbound-provisioning/create-new-group.png)
* Добавьте имя группы для новой группы. Имя группы должно указывать, что группа предназначена для пользователей API.
  > [!div class="mx-imgBorder"]
  > ![Имя группы разрешений](./media/sap-successfactors-inbound-provisioning/permission-group-name.png)
* Добавление участников в группу. Например, можно выбрать **имя пользователя** в раскрывающемся меню пул людей, а затем ввести имя пользователя учетной записи API, которая будет использоваться для интеграции. 
  > [!div class="mx-imgBorder"]
  > ![Добавление членов группы](./media/sap-successfactors-inbound-provisioning/add-group-members.png)
* Нажмите кнопку **Готово** , чтобы завершить создание группы разрешений.

### <a name="grant-permission-role-to-the-permission-group"></a>Предоставление роли разрешений группе разрешений

* В центре администрирования SuccessFactors выполните поиск по запросу *Управление ролями разрешений*, а затем выберите **Управление ролями разрешений** в результатах поиска.
* В **списке роль разрешений**выберите роль, созданную для разрешений на использование API.
* В разделе **предоставить эту роль для...** нажмите кнопку **Добавить..** ..
* Выберите **группу разрешений...** в раскрывающемся меню выберите команду **выбрать...** , чтобы открыть окно группы для поиска и выбора группы, созданной выше. 
  > [!div class="mx-imgBorder"]
  > ![Добавить группу разрешений](./media/sap-successfactors-inbound-provisioning/add-permission-group.png)
* Проверьте роль разрешений, предоставляемую группе разрешений. 
  > [!div class="mx-imgBorder"]
  > ![Сведения о роли и группе разрешений](./media/sap-successfactors-inbound-provisioning/permission-role-group.png)
* Щелкните **Сохранить изменения**.

## <a name="configuring-successfactors-writeback"></a>Настройка обратной записи SuccessFactors

В этом разделе приводятся шаги для 

* [Добавление приложения соединителя подготовки и Настройка подключения к SuccessFactors](#part-1-add-the-provisioning-connector-app-and-configure-connectivity-to-successfactors)
* [Настройка сопоставлений атрибутов](#part-2-configure-attribute-mappings)
* [Включение и запуск подготовки пользователей](#enable-and-launch-user-provisioning)

### <a name="part-1-add-the-provisioning-connector-app-and-configure-connectivity-to-successfactors"></a>Часть 1. Добавление приложения соединителя подготовки и Настройка подключения к SuccessFactors

**Чтобы настроить обратную запись SuccessFactors, сделайте следующее:**

1. Перейдите на сайт <https://portal.azure.com>.

2. В области навигации слева выберите **Azure Active Directory**.

3. Щелкните **Корпоративные приложения**, а затем — **Все приложения**.

4. Выберите **Добавить приложение** и выберите категорию **Все**.

5. Выполните поиск **обратной записи SuccessFactors**и добавьте это приложение из коллекции.

6. После добавления приложения и отображения экрана сведений о приложении выберите **Подготовка**

7. Изменение режима **подготовки** **Mode** на **Автоматический**

8. В разделе **Учетные данные администратора** заполните поля следующим образом.

   * **Имя пользователя администратора** — введите имя пользователя учетной записи API SuccessFactors с ДОБАВЛЕНным идентификатором компании. Он имеет формат: **username \@ companyID** .

   * **Пароль администратора —** Введите пароль учетной записи пользователя API SuccessFactors. 

   * **URL-адрес клиента —** Введите имя конечной точки служб API OData SuccessFactors. Введите только имя узла сервера без HTTP или HTTPS. Это значение должно выглядеть следующим образом: **API-Server-Name.successfactors.com**.

   * **Уведомление по электронной почте —** Введите свой адрес электронной почты и установите флажок "отправлять сообщение, если происходит сбой".
    > [!NOTE]
    > Служба подготовки Azure AD отправляет уведомление по электронной почте, если задание подготовки переходит в состояние [Карантин](/azure/active-directory/manage-apps/application-provisioning-quarantine-status).

   * Нажмите кнопку **Проверить подключение**. Если проверка подключения выполнена успешно, нажмите кнопку **Сохранить** в верхней части. В случае сбоя Проверьте правильность учетных данных и URL-адреса SuccessFactors.
    >[!div class="mx-imgBorder"]
    >![Портал Azure](./media/sap-successfactors-inbound-provisioning/sfwb-provisioning-creds.png)

   * После успешного сохранения учетных данных в разделе **сопоставления** отобразится сопоставление по умолчанию **Синхронизация Azure Active Directory пользователей с SuccessFactors** .

### <a name="part-2-configure-attribute-mappings"></a>Часть 2. Настройка сопоставлений атрибутов

В этом разделе вы настроите, каким способом данные пользователей из SuccessFactors будут Active Directory.

1. На вкладке Подготовка в разделе **сопоставления**щелкните **синхронизировать Azure Active Directory пользователей с SuccessFactors**.

1. В поле **область исходного объекта** можно выбрать, какие наборы пользователей в Azure AD следует рассматривать для обратной записи, определив набор фильтров на основе атрибутов. Область по умолчанию — "Все пользователи в Azure AD". 
   > [!TIP]
   > При первой настройке приложения подготовки необходимо проверить сопоставления атрибутов и выражения, чтобы получить желаемый результат. Корпорация Майкрософт рекомендует использовать фильтры области в **области объектов источника** , чтобы проверить сопоставления с помощью нескольких тестовых пользователей из Azure AD. После проверки работоспособности сопоставлений можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

1. Поле " **действия целевого объекта** " поддерживает только операцию **обновления** .

1. В разделе **сопоставления атрибутов** можно изменить только идентификатор сопоставления, который используется для связывания профиля пользователя SuccessFactors с пользователем Azure AD и какой атрибут в Azure AD служит источником электронной почты. 
    >[!div class="mx-imgBorder"]
    >![Портал Azure](./media/sap-successfactors-inbound-provisioning/sfwb-attribute-mapping.png)

   >[!NOTE]
   >Обратная запись SuccessFactors поддерживает только атрибут email. Не используйте **Добавление нового сопоставления** для добавления новых атрибутов. 

1. Чтобы сохранить сопоставления, щелкните **Сохранить** в верхней части раздела "Сопоставление атрибутов".

После завершения настройки сопоставления атрибутов [можно включить и запустить службу подготовки пользователей](#enable-and-launch-user-provisioning).

## <a name="enable-and-launch-user-provisioning"></a>Включение и запуск подготовки пользователей

После завершения настройки SuccessFactors подготовки приложений вы можете включить службу подготовки в портал Azureе.

> [!TIP]
> По умолчанию при включении службы подготовки она инициализирует операции подготовки для всех пользователей в области. При наличии ошибок в сопоставлении или проблем с данными Workday задание подготовки может завершиться ошибкой и перейти в состояние карантина. Чтобы избежать этого, рекомендуется настроить фильтр **Область исходного объекта** и протестировать сопоставления атрибутов с несколькими тестовыми пользователями перед запуском полной синхронизации всех пользователей. После проверки работоспособности сопоставлений и получения желаемых результатов можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

1. На вкладке **Подготовка** установите для параметра **Состояние подготовки** значение **Вкл**.

2. Выберите команду **Сохранить**.

3. Эта операция начнет начальную синхронизацию, что может занять переменное количество часов в зависимости от количества пользователей в клиенте SuccessFactors. Можно проверить индикатор выполнения, чтобы отслеживать ход выполнения цикла синхронизации. 

4. В любой момент можно проверить вкладку **Журналы аудита** на портале Azure, чтобы узнать, какие действия выполнила служба подготовки. В журналах аудита перечислены все отдельные события синхронизации, выполняемые службой подготовки, например, какие пользователи считываются из Workday и впоследствии будут добавлены или обновлены в Active Directory. 

5. После завершения первичной синхронизации на вкладке **Подготовка** будет создан сводный отчет аудита, как показано ниже.

   > [!div class="mx-imgBorder"]
   > ![Индикатор выполнения подготовки](./media/sap-successfactors-inbound-provisioning/prov-progress-bar-stats.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)
* [Узнайте, как настроить единый вход между SuccessFactors и Azure Active Directory](successfactors-tutorial.md)
* [Узнайте, как интегрировать другие приложения SaaS с Azure Active Directory](tutorial-list.md).
* [Узнайте, как экспортировать и импортировать конфигурации подготовки.](../app-provisioning/export-import-provisioning-configuration.md)

