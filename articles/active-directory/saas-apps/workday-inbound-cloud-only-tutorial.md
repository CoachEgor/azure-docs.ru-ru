---
title: Учебник. Настройка входящей передачи Workday в Azure Active Directory | Документация Майкрософт
description: Узнайте, как настроить входящую подготовку из Workday в Azure AD.
services: active-directory
author: cmmdesai
documentationcenter: na
manager: daveba
ms.assetid: fac4f61e-d942-4429-a297-9ba74db95077
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 05/26/2020
ms.author: chmutali
ms.openlocfilehash: 6fb80af84379a1a0bc174a7318c8150a98bea95e
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "84026505"
---
# <a name="tutorial-configure-workday-to-azure-ad-user-provisioning"></a>Руководство по настройке рабочего дня для подготовки пользователей в Azure AD
Цель этого руководства — продемонстрировать шаги, которые необходимо выполнить, чтобы подготавливать рабочие данные рабочих ролей из Workday в Azure Active Directory. 

>[!NOTE]
>Используйте этот учебник, если пользователи, которые вы хотите подготавливать из Workday, являются только облачными пользователями, которым не требуется локальная учетная запись AD. Если пользователям требуется только локальная учетная запись AD или учетная запись AD и Azure AD, обратитесь к руководству по [настройке Workday для Active Directory](workday-inbound-tutorial.md) подготовки пользователей. 

## <a name="overview"></a>Обзор

Для подготовки учетных записей пользователей [служба подготовки пользователей Azure Active Directory](../app-provisioning/user-provisioning.md) интегрируется с [API отдела кадров Workday](https://community.workday.com/sites/default/files/file-hosting/productionapi/Human_Resources/v21.1/Get_Workers.html). Рабочие процессы подготовки пользователей Workday, поддерживаемые службой подготовки пользователей Azure AD, позволяют автоматизировать следующие сценарии работы отдела кадров и управления жизненным циклом удостоверений.

* **Наем новых сотрудников** . при добавлении нового сотрудника в Workday учетная запись пользователя автоматически создается в Azure Active Directory и дополнительно Office 365 и [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md), с обратным записью адреса электронной почты в Workday.

* **Обновление атрибутов и профилей сотрудников** . при обновлении записи сотрудника в Workday (например, в имени, названии или менеджере) учетная запись пользователя будет автоматически обновлена Azure Active Directory и при необходимости Office 365 и [других приложений SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

* **Прекращение сотрудников** . когда сотрудник завершает работу в Workday, учетная запись пользователя автоматически отключается в Azure Active Directory и при необходимости Office 365 и [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

* Повторный **прием сотрудников** . когда сотрудник переключается в Workday, его старая учетная запись может быть автоматически повторно активирована или повторно подготовлена (в зависимости от предпочтений) для Azure Active Directory и при необходимости Office 365 и [других приложений SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

### <a name="who-is-this-user-provisioning-solution-best-suited-for"></a>Кому это решение подготовки пользователей подходит лучше всего?

Этот рабочий день на Azure Active Directory решение для подготовки пользователей идеально подходит для:

* организаций, которым необходимо готовое облачное решение для подготовки пользователей в Workday;

* Организации, требующие прямой подготовки пользователей из Workday для Azure Active Directory

* Организации, которым требуется подготовка пользователей с помощью данных, полученных из Workday

* организаций, использующих Office 365 для электронной почты.

## <a name="solution-architecture"></a>Архитектура решения

В этом разделе описывается архитектура комплексного решения подготовки пользователей для облачных пользователей. Имеется два связанных потока:

* **Достоверный поток данных HR — от Workday до Azure Active Directory:** В этом потоке события потока (например, новые сотрудники, передачи, завершения) происходят в Workday, а затем данные события передаются в Azure Active Directory. В зависимости от события это может привести к созданию, обновлению, включению и отключению операций в Azure AD.
* **Поток обратной записи — из локальной Active Directory в Workday:** После завершения создания учетной записи в Active Directory она синхронизируется с Azure AD через Azure AD Connect и такие сведения, как электронная почта, имя пользователя и номер телефона, можно записать обратно в Workday.

  ![Обзор](./media/workday-inbound-tutorial/workday-cloud-only-provisioning.png)

### <a name="end-to-end-user-data-flow"></a>Полноценный поток данных пользователей

1. Группа отделов кадров выполняет рабочие транзакции (поисполнители/перевозчики/Леаверс или новые сотрудники, передачи и прекращения) в центре Workday
2. Служба подготовки Azure AD выполняет запланированные синхронизации удостоверений из Workday EC и определяет изменения, которые необходимо обработать для синхронизации с локальными Active Directory.
3. Служба подготовки Azure AD определяет изменение и вызывает операцию создания, обновления, включения или отключения для пользователя в Azure AD.
4. Если настроено приложение [обратной записи Workday](workday-writeback-tutorial.md) , оно извлекает такие атрибуты, как адрес электронной почты, имя пользователя и номер телефона из Azure AD. 
5. Служба подготовки Azure AD задает адрес электронной почты, имя пользователя и номер телефона в Workday.

## <a name="planning-your-deployment"></a>Планирование развертывания

Для настройки подготовки учетных записей пользователей в облаке с Workday в Azure AD требуется значительное планирование, охватывающее различные аспекты, такие как:

* Определение соответствующего идентификатора 
* Сопоставление атрибутов
* Преобразование атрибута 
* Фильтры области

Подробные рекомендации по этим темам см. в [плане развертывания Cloud HR](../app-provisioning/plan-cloud-hr-provision.md) . 

## <a name="configure-integration-system-user-in-workday"></a>Настройка пользователя системы интеграции в Workday

Ознакомьтесь с разделом [Настройка пользователя системы интеграции](workday-inbound-tutorial.md#configure-integration-system-user-in-workday) для создания учетной записи пользователя системы интеграции Workday с разрешениями на получение данных рабочих ролей. 

## <a name="configure-user-provisioning-from-workday-to-azure-ad"></a>Настройка подготовки пользователей из Workday в Azure AD

В следующих разделах описаны действия по настройке подготовки пользователей из Workday в Azure AD для развертываний только в облаке.

* [Добавление приложения соединителя подготовки Azure AD и создание подключения к Workday](#part-1-adding-the-azure-ad-provisioning-connector-app-and-creating-the-connection-to-workday)
* [Настройка сопоставлений атрибутов Workday и Azure AD](#part-2-configure-workday-and-azure-ad-attribute-mappings)
* [Включение и запуск подготовки пользователей](#enable-and-launch-user-provisioning)

### <a name="part-1-adding-the-azure-ad-provisioning-connector-app-and-creating-the-connection-to-workday"></a>Часть 1. Добавление приложения соединителя подготовки Azure AD и создание подключения к Workday

**Настройка подготовки только облачных пользователей Workday в Azure Active Directory**

1. Перейдите к <https://portal.azure.com>.

2. На портале Azure найдите и выберите **Azure Active Directory**.

3. Щелкните **Корпоративные приложения**, а затем — **Все приложения**.

4. Выберите **Добавить приложение**, а затем выберите категорию **Все**.

5. Выполните поиск по запросу " **Workday для пользователей Azure AD**" и добавьте это приложение из коллекции.

6. После добавления приложения и отображения экрана сведений о приложении выберите **Подготовка**.

7. Для параметра **Режим** **подготовки к работе** выберите значение **Автоматически**.

8. В разделе **Учетные данные администратора** заполните поля следующим образом.

   * **Имя пользователя Workday** — введите имя пользователя учетной записи системы интеграции Workday, указав имя домена клиента. Оно должно иметь примерно следующий вид: username@contoso4

   * **Пароль Workday —** введите пароль учетной записи системы интеграции Workday.

   * **URL-адрес API для Workday Web Services —** Введите URL-адрес конечной точки веб-служб Workday для вашего клиента. URL-адрес определяет версию API веб-служб Workday, используемую соединителем. 
   
     | Формат URL-адреса | Используемая версия API WWS | Требуются изменения XPATH |
     |------------|----------------------|------------------------|
     | https://####.workday.com/ccx/service/tenantName | v 21.1 | Нет |
     | https://####.workday.com/ccx/service/tenantName/Human_Resources | v 21.1 | Нет |
     | https://####.workday.com/ccx/service/tenantName/Human_Resources/v##.# | v # #. # | Да |

      > [!NOTE]
     > Если в URL-адресе не указаны сведения о версии, приложение использует Workday Web Services (WWS) v 21.1 и никакие изменения не требуются для выражений API XPATH по умолчанию, поставляемых с приложением. Чтобы использовать определенную версию API WWS, укажите номер версии в URL-адресе <br>
     > Пример: `https://wd3-impl-services1.workday.com/ccx/service/contoso4/Human_Resources/v34.0` <br>
     > <br> Если вы используете WWS API v 30,0 +, прежде чем включать задание подготовки, обновите **выражения API XPath** в разделе **сопоставление атрибутов — > дополнительные параметры-> изменить список атрибутов для Workday** , обратившись к разделу [Управление конфигурацией](workday-inbound-tutorial.md#managing-your-configuration) и [ссылкой на атрибут workday](../app-provisioning/workday-attribute-reference.md#xpath-values-for-workday-web-services-wws-api-v30).  

   * **Электронная почта для уведомлений** — введите адрес электронной почты и установите флажок "send email if failure occurs" (Отправлять по электронной почте в случае сбоя).

   * Нажмите кнопку **Проверить подключение**.

   * Если проверка подключения выполнена успешно, нажмите кнопку **Сохранить** в верхней части. В случае неудачи дважды проверьте правильность URL-адреса и учетных данных Workday в приложении Workday.

### <a name="part-2-configure-workday-and-azure-ad-attribute-mappings"></a>Часть 2. Настройка сопоставлений атрибутов Workday и Azure AD

В этом разделе вы настроите потоки данных пользователя из Workday в Active Directory только для облачных пользователей.

1. На вкладке "Подготовка" в разделе **Сопоставления** щелкните **Synchronize Workers to Azure AD** (Синхронизировать работников с Azure AD).

2. В поле **Область исходного объекта** можно выбрать, какие наборы пользователей в Workday должны учитываться при подготовке в Azure AD, определив набор фильтров на основе атрибутов. Область по умолчанию — "все пользователи в Workday". Примеры фильтров

   * Пример Охват пользователей с идентификаторами рабочих ролей в диапазоне от 1000000 до 2000000

      * Атрибут: WorkerID.

      * Оператор: REGEX MATCH.

      * Значение: (1[0–9][0–9][0–9][0–9][0–9][0–9]).

   * Пример Только временные работники, а не сотрудники

      * Атрибут: ContingentID.

      * Оператор: IS NOT NULL.

3. В поле **Действия с целевыми объектами** можно в глобальном масштабе отфильтровать, какие действия выполняются в Azure AD. Самыми распространенными являются **создание** и **обновление**.

4. В разделе **Сопоставление атрибутов** можно определить, как отдельные атрибуты Workday сопоставляются с атрибутами Active Directory.

5. Щелкните существующее сопоставление атрибута, чтобы его обновить, или **Добавить новое сопоставление** в нижней части экрана, чтобы добавить новые сопоставления. Отдельное сопоставление атрибутов поддерживает следующие свойства:

   * **Тип сопоставления**

      * **Прямой** — записывает значение атрибута Workday без изменений в атрибут AD.

      * **Константа** — записывает статическое постоянное строковое значение в атрибут AD.

      * **Выражение** — позволяет записывать пользовательское значение в атрибут AD на основании одного или нескольких атрибутов Workday. [Дополнительные сведения см. в статье о выражениях](../app-provisioning/functions-for-customizing-application-data.md).

   * **Исходный атрибут** — атрибут пользователя из Workday. Если нужный вам атрибут отсутствует, см. раздел [Настройка списка атрибутов пользователя Workday](workday-inbound-tutorial.md#customizing-the-list-of-workday-user-attributes).

   * **Значение по умолчанию** — необязательно. Если исходный атрибут имеет пустое значение, сопоставление запишет это значение.
            В наиболее распространенной конфигурации это поле остается пустым.

   * **Целевой атрибут** — атрибут пользователя в Azure AD.

   * **Сопоставление объектов с помощью этого атрибута** — должен ли этот атрибут использоваться для уникальной идентификации пользователей между Workday и Azure AD. Как правило, значение задается в поле ИД работника для Workday, который обычно сопоставляется с атрибутом ИД сотрудника (новым) или атрибутом расширения в Azure AD.

   * **Приоритет сопоставления** — возможность указания нескольких атрибутов сопоставления. При указании нескольких атрибутов сопоставления они вычисляются в порядке, заданном в этом поле. Как только соответствие найдено, дальнейшие атрибуты сопоставления не вычисляются.

   * **Применить это сопоставление**

     * **Всегда** — применить это сопоставление как при создании, так и при обновлении пользователей

     * **Только при создании** — применить это сопоставление только при создании пользователей

6. Чтобы сохранить сопоставления, щелкните **Сохранить** в верхней части раздела "Сопоставление атрибутов".


## <a name="enable-and-launch-user-provisioning"></a>Включение и запуск подготовки пользователей

После завершения настройки приложения подготовки Workday можно включить службу подготовки на портале Azure.

> [!TIP]
> По умолчанию при включении службы подготовки она инициализирует операции подготовки для всех пользователей в области. При наличии ошибок в сопоставлении или проблем с данными Workday задание подготовки может завершиться ошибкой и перейти в состояние карантина. Чтобы избежать этого, рекомендуется настроить фильтр **Область исходного объекта** и протестировать сопоставления атрибутов с несколькими тестовыми пользователями перед запуском полной синхронизации всех пользователей. После проверки работоспособности сопоставлений и получения желаемых результатов можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

1. На вкладке **Подготовка** установите для параметра **Состояние подготовки** значение **Вкл**.

2. Выберите команду **Сохранить**.

3. Будет запущена начальная синхронизация, которая может длиться переменное число часов в зависимости от количества пользователей в клиенте Workday. Можно проверить индикатор выполнения, чтобы отслеживать ход выполнения цикла синхронизации. 

4. В любой момент можно проверить вкладку **Журналы аудита** на портале Azure, чтобы узнать, какие действия выполнила служба подготовки. В журналах аудита перечислены все индивидуальные события синхронизации, выполняемые службой подготовки, например, какие пользователи считываются из Workday, а затем добавляются или обновляются в Azure Active Directory. 

5. После завершения первичной синхронизации на вкладке **Подготовка** будет создан сводный отчет аудита, как показано ниже.

   > [!div class="mx-imgBorder"]
   > ![Индикатор выполнения подготовки](./media/sap-successfactors-inbound-provisioning/prov-progress-bar-stats.png)

## <a name="next-steps"></a>Дальнейшие шаги

* [Дополнительные сведения о поддерживаемых атрибутах Workday для входящей подготовки](../app-provisioning/workday-attribute-reference.md)
* [Узнайте, как настроить обратную запись Workday](workday-writeback-tutorial.md)
* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)
* [Узнайте, как настроить единый вход Azure Active Directory в Workday](workday-tutorial.md).
* [Узнайте, как интегрировать другие приложения SaaS с Azure Active Directory](tutorial-list.md).
* [Узнайте, как экспортировать и импортировать конфигурации подготовки.](../app-provisioning/export-import-provisioning-configuration.md)


