---
title: Учебник. Настройка обратной записи Workday в Azure Active Directory | Документация Майкрософт
description: Узнайте, как настроить обратную запись атрибутов из Azure AD в Workday.
services: active-directory
author: cmmdesai
manager: CelesteDG
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.topic: article
ms.workload: identity
ms.date: 05/26/2020
ms.author: chmutali
ms.openlocfilehash: 8c76bddc0fae024b0dd2bdd27d6b1e10d71dec71
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "90017478"
---
# <a name="tutorial-configure-attribute-writeback-from-azure-ad-to-workday"></a>Руководство. Настройка обратной записи атрибутов из Azure AD в Workday
Цель этого руководства — продемонстрировать шаги, которые необходимо выполнить для обратной записи атрибутов из Azure AD в Workday. Приложение подготовки обратной записи Workday поддерживает назначение значений следующим атрибутам Workday:
* Рабочий адрес электронной почты 
* Имя пользователя Workday
* Рабочий номер телефона стационарного телефона (включая код страны, код города, номер и расширение)
* Основной флаг стационарного телефона для рабочего номера телефона
* Номер рабочего мобильного устройства (включая код страны, код города, номер)
* Основной флаг рабочего мобильного устройства

## <a name="overview"></a>Обзор

После настройки входящей интеграции подготовки с помощью [workday для локального](workday-inbound-tutorial.md) приложения подготовки AD или [рабочего дня в приложении подготовки Azure AD](workday-inbound-cloud-only-tutorial.md) можно дополнительно настроить приложение обратной записи workday для записи контактной информации, такой как Рабочая электронная почта и номер телефона, в Workday. 

### <a name="who-is-this-user-provisioning-solution-best-suited-for"></a>Кому это решение подготовки пользователей подходит лучше всего?

Решение по подготовке обратной записи пользователя Workday идеально подходит для:

* Организации, использующие Microsoft 365, желающие выполнить обратную запись полномочных атрибутов, управляемых им (например, адрес электронной почты, имя пользователя и номер телефона), обратно в Workday.

## <a name="configure-integration-system-user-in-workday"></a>Настройка пользователя системы интеграции в Workday

Ознакомьтесь с разделом [Настройка пользователя системы интеграции](workday-inbound-tutorial.md#configure-integration-system-user-in-workday) для создания учетной записи пользователя системы интеграции Workday с разрешениями на получение данных рабочих ролей. 

## <a name="configuring-azure-ad-attribute-writeback-to-workday"></a>Настройка обратной записи атрибута Azure AD в Workday

Ниже приведены инструкции по настройке обратной записи адресов электронной почты и имени пользователя из Azure Active Directory в Workday.

* [Добавление приложения соединителя обратной записи и создание подключения к Workday](#part-1-adding-the-writeback-connector-app-and-creating-the-connection-to-workday)
* [Настройка сопоставлений атрибутов обратной записи](#part-2-configure-writeback-attribute-mappings)
* [Включение и запуск подготовки пользователей](#enable-and-launch-user-provisioning)

### <a name="part-1-adding-the-writeback-connector-app-and-creating-the-connection-to-workday"></a>Часть 1. Добавление приложения соединителя обратной записи и создание подключения к Workday

**Настройка соединителя обратной записи Workday:**

1. Перейдите к <https://portal.azure.com>.

2. На портале Azure найдите и выберите **Azure Active Directory**.

3. Щелкните **Корпоративные приложения**, а затем — **Все приложения**.

4. Выберите **Добавить приложение**, а затем выберите категорию **Все**.

5. Выполните поиск по условию **Обратная запись Workday** и добавьте это приложение из коллекции.

6. После добавления приложения и отображения экрана сведений о приложении выберите **Подготовка**.

7. Для параметра **Режим** **подготовки к работе** выберите значение **Автоматически**.

8. В разделе **Учетные данные администратора** заполните поля следующим образом.

   * **Имя пользователя администратора** — введите имя пользователя учетной записи системы интеграции Workday с указанием имени домена клиента. Это должно выглядеть примерно так: *имя_пользователя\@contoso4*

   * **Пароль администратора** — введите пароль учетной записи системы интеграции Workday.

   * **URL-адрес клиента** — введите URL-адрес конечной точки веб-служб Workday для вашего клиента. Значение должно иметь следующий вид: `https://wd3-impl-services1.workday.com/ccx/service/contoso4/Human_Resources`, где *contoso4* заменяется правильным именем клиента, а *wd3-impl* — правильной строкой среды (если необходимо).

   * **Электронная почта для уведомлений** — введите адрес электронной почты и установите флажок "send email if failure occurs" (Отправлять по электронной почте в случае сбоя).

   * Нажмите кнопку **Проверить подключение**. Если проверка подключения выполнена успешно, нажмите кнопку **Сохранить** в верхней части. В случае неудачи дважды проверьте правильность URL-адреса и учетных данных Workday в приложении Workday.

### <a name="part-2-configure-writeback-attribute-mappings"></a>Часть 2. Настройка сопоставлений атрибутов обратной записи

В этом разделе описывается настройка потока атрибутов обратной записи из Azure AD в Workday. 

1. На вкладке Подготовка в разделе **сопоставления**щелкните имя сопоставления.

2. В поле **область исходного объекта** можно дополнительно отфильтровать, какие наборы пользователей в Azure Active Directory должны быть частью обратной записи. Область по умолчанию — "все пользователи в Azure AD".

3. В разделе **Сопоставление атрибутов**, обновите соответствующий идентификатор, чтобы указать атрибут в Azure Active Directory, где хранится идентификатор рабочей роли или идентификатор сотрудника для Workday. Распространенный метод сопоставления заключается в синхронизации ИД работника или ИД сотрудника Workday с extensionAttribute1-15 в Azure AD. Затем этот атрибут используется в Azure AD для обратного сопоставления пользователей в Workday.

4. Обычно сопоставляется атрибут Azure AD *userPrincipalName* с атрибутом Workday *UserID*, а атрибут *mail* Azure AD с атрибутом Workday *EmailAddress*. 

     >[!div class="mx-imgBorder"]
     >![Портал Azure](./media/workday-inbound-tutorial/workday-writeback-mapping.png)

5. Используйте предоставленные ниже рекомендации, чтобы сопоставлять значения атрибутов телефонных номеров из Azure AD в Workday. 

     | Атрибут Phone для рабочего дня | Ожидаемое значение | Руководство по сопоставлению |
     |-------------------------|----------------|------------------|
     | воркфонеландлинеиспримари | true/false | Сопоставление констант или выражений, результатом которого является значение "true" или "false". |
     | воркфонеландлинекаунтрикоденаме | [Код страны из трех букв ISO 3166-1](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3) | Сопоставление констант или выражений, результатом которого является код страны из трех букв. |
     | воркфонеландлинекаунтрикоденумбер | [Международный код вызова страны](https://en.wikipedia.org/wiki/List_of_country_calling_codes) | Сопоставление констант или выражений, результатом которого является допустимый код страны (без знака "+"). |
     | воркфонеландлиненумбер | Полный номер телефона, включая код города | Сопоставьте с атрибутом *telephoneNumber* . Используйте Regex для удаления пробелов, квадратных скобок и кода страны. См. пример ниже. |
     | воркфонеландлиникстенсион | Номер расширения | Если *telephoneNumber* содержит расширение, используйте Regex для извлечения значения. |
     | воркфонемобилеиспримари | true/false | Постоянное сопоставление или сопоставление выражений, результатом которого является "true" или "false" строковое значение |
     | воркфонемобилекаунтрикоденаме | [Код страны из трех букв ISO 3166-1](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3) | Сопоставление констант или выражений, результатом которого является код страны из трех букв. |
     | воркфонемобилекаунтрикоденумбер | [Международный код вызова страны](https://en.wikipedia.org/wiki/List_of_country_calling_codes) | Сопоставление констант или выражений, результатом которого является допустимый код страны (без знака "+"). |
     | воркфонемобиленумбер | Полный номер телефона, включая код города | Сопоставьте с атрибутом *Mobile* . Используйте Regex для удаления пробелов, квадратных скобок и кода страны. См. пример ниже. |

     > [!NOTE]
     > При вызове веб-службы Change_Work_Contact Workday Azure AD отправляет следующие постоянные значения: <br>
     > * Для **Communication_Usage_Type_ID** задается константная строка "Рабочая" <br>
     > * Для **Phone_Device_Type_ID** задано значение константной строки "Mobile" для номеров мобильных телефонов и "стационарного телефона" для номеров телефонов стационарного телефона. <br>
     > 
     > Если клиент Workday использует разные Type_IDs, возникнут ошибки обратной записи. Чтобы предотвратить такие сбои, можно использовать задачу " **обслуживание кодов ссылок** Workday" и обновить Type_IDs в соответствии со значениями, используемыми в Azure AD. <br>
     >  

     **Выражения ссылочных регулярных выражений — пример 1**

     Используйте приведенное ниже регулярное выражение, если номер телефона в Azure AD задан с использованием формата, необходимого для самостоятельного сброса пароля (SSPR). <br>
     Пример. Если значение номера телефона равно + 1 1112223333-> то выражение регулярного выражения выводит 1112223333

     ```C#
     Replace([telephoneNumber], , "\\+(?<isdCode>\\d* )(?<phoneNumber>\\d{10})", , "${phoneNumber}", , )
     ```

     **Выражения ссылочных регулярных выражений — пример 2**

     Используйте приведенное ниже регулярное выражение, если номер телефона в Azure AD задан с использованием формата (XXX) XXX-XXXX. <br>
     Пример. Если значение номера телефона равно (111) 222-3333-> то выражение регулярного выражения выводит значение 1112223333

     ```C#
     Replace([mobile], , "[()\\s-]+", , "", , )
     ```

6. Чтобы сохранить сопоставления, щелкните **Сохранить** в верхней части раздела "Сопоставление атрибутов".

## <a name="enable-and-launch-user-provisioning"></a>Включение и запуск подготовки пользователей

После завершения настройки приложения подготовки Workday можно включить службу подготовки на портале Azure.

> [!TIP]
> По умолчанию при включении службы подготовки она инициализирует операции подготовки для всех пользователей в области. При наличии ошибок в сопоставлении или проблем с данными Workday задание подготовки может завершиться ошибкой и перейти в состояние карантина. Чтобы избежать этого, рекомендуется настроить фильтр **Область исходного объекта** и протестировать сопоставления атрибутов с несколькими тестовыми пользователями перед запуском полной синхронизации всех пользователей. После проверки работоспособности сопоставлений и получения желаемых результатов можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

1. На вкладке **Подготовка** установите для параметра **Состояние подготовки** значение **Вкл**.

2. Выберите команду **Сохранить**.

3. Эта операция начнет начальную синхронизацию, что может занять переменное количество часов в зависимости от числа пользователей в исходном каталоге. Можно проверить индикатор выполнения, чтобы отслеживать ход выполнения цикла синхронизации. 

4. В любой момент можно проверить вкладку **Журналы аудита** на портале Azure, чтобы узнать, какие действия выполнила служба подготовки. В журналах аудита перечислены все индивидуальные события синхронизации, выполняемые службой подготовки, например, какие пользователи импортируются из источника и экспортируются в целевое приложение.  

5. После завершения начальной синхронизации на вкладке **Подготовка** будет записан сводный отчет, как показано ниже.

     > [!div class="mx-imgBorder"]
     > ![Индикатор выполнения подготовки](./media/sap-successfactors-inbound-provisioning/prov-progress-bar-stats.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)
* [Узнайте, как настроить единый вход Azure Active Directory в Workday](workday-tutorial.md).
* [Узнайте, как интегрировать другие приложения SaaS с Azure Active Directory](tutorial-list.md).
* [Узнайте, как экспортировать и импортировать конфигурации подготовки.](../app-provisioning/export-import-provisioning-configuration.md)

