---
title: Типы приложений для платформы удостоверений Microsoft | Azure
description: Типы приложений и сценарии, поддерживаемые на конечной точке Microsoft identity платформы (версии 2.0).
services: active-directory
documentationcenter: ''
author: rwike77
manager: CelesteDG
editor: ''
ms.assetid: 494a06b8-0f9b-44e1-a7a2-d728cf2077ae
ms.service: active-directory
ms.subservice: develop
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/06/2019
ms.author: ryanwi
ms.reviewer: saeeda, jmprieur
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: cd7055794860398ecc6296d0174a691e7fac4450
ms.sourcegitcommit: 509e1583c3a3dde34c8090d2149d255cb92fe991
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2019
ms.locfileid: "66235250"
---
# <a name="application-types-for-microsoft-identity-platform"></a>Типы приложений для платформы удостоверений Microsoft

Конечная точка платформы (версии 2.0) Microsoft identity поддерживает проверку подлинности для различных архитектур современных приложений, которые основаны на стандартных отраслевых протоколов [OAuth 2.0 или OpenID Connect](active-directory-v2-protocols.md). В этой статье описываются типы приложений, которые можно создавать с помощью платформы удостоверений Microsoft, независимо от выбранного языка и платформы. Сведения призваны помочь вам понять, сценариях, необходимых [начать работу с кодом](v2-overview.md#getting-started).

> [!NOTE]
> Конечная точка платформы удостоверений Microsoft не поддерживает все сценарии Azure Active Directory (Azure AD) и компоненты. Чтобы определить, следует ли использовать конечную точку платформы Microsoft identity, ознакомьтесь [ограничения платформы удостоверений Microsoft](active-directory-v2-limitations.md).

## <a name="the-basics"></a>Основные сведения

Необходимо зарегистрировать каждое приложение, использующее конечную точку платформы Microsoft identity в новом [портала регистрации приложений](https://go.microsoft.com/fwlink/?linkid=2083908). В процессе регистрации приложения будет задано несколько параметров приложения:

* **Идентификатор приложения (клиент)** , который однозначно определяет приложение
* **универсальный код ресурса (URI) перенаправления**, который можно использовать для направления ответов к приложению;
* Несколько других типов учетных записей значения конкретных сценариев, такие как поддерживаемые

Дополнительные сведения см. в статье о [регистрации приложения](quickstart-register-app.md).

После регистрации приложения, приложение взаимодействует с платформой Microsoft identity, отправляя запросы к конечной точке. Мы предоставляем платформы и библиотеки с открытым кодом, которые отвечают обрабатывают данные этих запросов. Также имеется возможность самостоятельно реализовать логику аутентификации, создавая запросы к этим конечным точкам.

```
https://login.microsoftonline.com/common/oauth2/v2.0/authorize
https://login.microsoftonline.com/common/oauth2/v2.0/token
```

## <a name="single-page-apps-javascript"></a>Одностраничные приложения (JavaScript)

Многие современные приложения содержат интерфейсное одностраничное приложение, созданное преимущественно на языке JavaScript. Часто они записываются с помощью таких платформ как Angular, React или Vue. Конечная точка платформы удостоверений Microsoft поддерживает эти приложения с помощью [неявного потока OAuth 2.0](v2-oauth2-implicit-grant-flow.md).

В этом потоке приложение получает маркеры непосредственно с платформой Microsoft identity конечной точки, без обмена любого сервера на сервер авторизации. Вся логика аутентификации и обработки сеансов размещается в клиенте JavaScript без перенаправления на дополнительные страницы.

![Неявный поток аутентификации](./media/v2-app-types/convergence-scenarios-implicit.svg)

Чтобы увидеть этот сценарий в действии, изучите один из примеров кода одностраничного приложения в [платформы удостоверений Microsoft Приступая к работе](v2-overview.md#getting-started) раздел.

## <a name="web-apps"></a>Веб-приложения

Для веб-приложений (.NET, PHP, Java, Ruby, Python, Node), доступных пользователю через браузер, для входа пользователей можно использовать [OpenID Connect](active-directory-v2-protocols.md). В OpenID Connect веб-приложение получает маркер идентификации. Это маркер безопасности, который проверяет удостоверение пользователя и предоставляет сведения о пользователе в форме утверждений.

```
// Partial raw ID token
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6ImtyaU1QZG1Cd...

// Partial content of a decoded ID token
{
    "name": "John Smith",
    "email": "john.smith@gmail.com",
    "oid": "d9674823-dffc-4e3f-a6eb-62fe4bd48a58"
    ...
}
```

Дополнительные сведения о различных типах маркеров, используемых в конечной точке платформы удостоверений Microsoft доступны в [маркер доступа](access-tokens.md) ссылку и [ссылку маркера "id_token"](id-tokens.md)

В приложениях веб-сервера поток аутентификации для входа состоит из следующих базовых этапов.

![Поток аутентификации веб-приложения](./media/v2-app-types/convergence-scenarios-webapp.svg)

Удостоверение пользователя можно обеспечить путем проверки маркера Идентификации с открытым ключом подписывания, полученного от конечной точки платформы Microsoft identity. Для этого задается файл cookie сеанса, с помощью которого можно идентифицировать пользователя при последующих запросах страницы.

Чтобы увидеть этот сценарий в действии, изучите один из примеров кода входа веб-приложение в [платформы удостоверений Microsoft Приступая к работе](v2-overview.md#getting-started) раздел.

Помимо простого входа в систему, приложению веб-сервера может потребоваться доступ к некоторым другим веб-службам, например интерфейсу REST API. В этом случае приложение веб-сервера участвует в объединенном потоке OpenID Connect и OAuth 2.0 с использованием [потока кода авторизации OAuth 2.0](active-directory-v2-protocols.md). Чтобы больше узнать об этом сценарии, ознакомьтесь с тем, как [приступить к работе с веб-приложениями и интерфейсами веб-API](active-directory-v2-devquickstarts-webapp-webapi-dotnet.md).

## <a name="web-apis"></a>Веб-API

Конечная точка платформы Microsoft identity можно использовать для защиты веб-служб, таких как веб-API RESTful приложения. Веб-API вместо маркеров идентификации и файлов cookie сеанса использует маркер доступа OAuth 2.0 для защиты данных и аутентификации входящих запросов. Объект, вызывающий веб-API, добавляет маркер доступа в начале заголовка авторизации HTTP-запроса, как показано ниже.

```
GET /api/items HTTP/1.1
Host: www.mywebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6...
Accept: application/json
...
```

Веб-API использует маркер доступа для проверки удостоверения объекта, вызывающего API, и получения сведений о нем из утверждений, которые закодированы в маркере доступа. Дополнительные сведения о различных типах маркеров, используемых в конечной точке платформы удостоверений Microsoft доступны в [маркер доступа](access-tokens.md) ссылку и [ссылку маркера "id_token"](id-tokens.md)

Веб-API может дать пользователям возможность применять определенные функции и данные или отказаться от них, предоставляя разрешения, которые также называют [областями](v2-permissions-and-consent.md). Чтобы вызывающее приложение получило разрешение для области, пользователь должен дать согласие на это. Конечная точка платформы удостоверений Microsoft запрашивает разрешение пользователя и записывает их во все маркеры доступа, получаемые веб-API. Веб-API проверяет маркеры доступа, получаемые при каждом вызове, и выполняет проверки авторизации.

Веб-API может получать маркеры доступа от всех типов приложений, включая приложения веб-сервера, классические и мобильные приложения, одностраничные приложения, серверные управляющие программы и даже другие веб-API. Общий поток для веб-API выглядит следующим образом.

![Поток аутентификации веб-API](./media/v2-app-types/convergence-scenarios-webapi.svg)

Чтобы узнать, как защитить веб-API с помощью маркеров доступа OAuth2, ознакомьтесь с примерами кода веб-API в [платформы удостоверений Microsoft Приступая к работе](v2-overview.md#getting-started) раздел.

Во многих случаях веб-API также необходимо выполнять исходящие запросы к другим нижестоящим веб-API, защищенным платформой Microsoft identity. Чтобы сделать это, веб-API можно воспользоваться преимуществами **On-Behalf-Of** потока, который позволяет веб-API для обмена входящий маркер доступа на другой маркер доступа для использования в исходящие запросы. Дополнительные сведения см. в разделе [платформой Microsoft identity и поток OAuth 2.0 On-Behalf-Of](v2-oauth2-on-behalf-of-flow.md).

## <a name="mobile-and-native-apps"></a>Мобильные и собственные приложения

Приложениям, установленным на устройстве, например мобильным и классическим приложениям, часто требуется доступ к внутренним службам или интерфейсам веб-API, которые хранят данные и выполняют различные функции от имени пользователя. В этих приложениях можно реализовать процесс входа и авторизации во внутренних службах с помощью [потока кода авторизации OAuth 2.0](v2-oauth2-auth-code-flow.md).

В этом потоке приложение получает код авторизации из конечной точки платформы Microsoft identity, при входе пользователя. Код авторизации представляет собой разрешение, полученное от приложения, на вызов внутренних служб от имени пользователя, выполнившего вход. Приложение может передать код авторизации в фоновом режиме, чтобы получить маркер доступа OAuth 2.0 и маркер обновления. Приложение может использовать маркер доступа для аутентификации в интерфейсах веб-API в HTTP-запросах и использовать маркер обновления, чтобы получать новые маркеры доступа после истечения срока действия старых маркеров.

![Поток аутентификации собственного приложения](./media/v2-app-types/convergence-scenarios-native.svg)

## <a name="daemons-and-server-side-apps"></a>Управляющие программы и серверные приложения

Приложениям, использующим долговременные процессы или работающим без взаимодействия с пользователем, тоже нужна возможность доступа к защищенным ресурсам, таким как интерфейсы веб-API. Такие приложения могут выполнять аутентификацию и получать маркеры, используя удостоверение приложения (а не делегированное удостоверение пользователя) с помощью потока учетных данных клиента OAuth 2.0. Можно подтвердить удостоверение приложения с помощью секрета или сертификата клиента. Дополнительные сведения см. в разделе [аутентификации в платформе Microsoft identity в приложениях управляющей программы с помощью сертификатов](https://azure.microsoft.com/resources/samples/active-directory-dotnet-daemon-certificate-credential/).

В этом потоке приложение взаимодействует напрямую с `/token` конечная точка для получения доступа:

![Поток аутентификации управляющей программы](./media/v2-app-types/convergence-scenarios-daemon.svg)

Чтобы создать управляющую программу, изучите [документацию по учетным данным клиентов](v2-oauth2-client-creds-grant-flow.md) или ознакомьтесь с [примером приложения .NET](https://github.com/Azure-Samples/active-directory-dotnet-daemon-v2).
