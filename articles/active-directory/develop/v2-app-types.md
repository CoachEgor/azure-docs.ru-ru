---
title: Типы приложений для платформы идентификации Майкрософт Azure
description: Типы приложений и сценариев, поддерживаемых конечной точкой платформы майкрософт (v2.0).
services: active-directory
author: rwike77
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.workload: identity
ms.topic: conceptual
ms.date: 04/13/2020
ms.author: ryanwi
ms.reviewer: saeeda, jmprieur
ms.custom: aaddev
ms.openlocfilehash: bdbda8bed38819ca2b4d2fb1ef3d9bf591269890
ms.sourcegitcommit: 31ef5e4d21aa889756fa72b857ca173db727f2c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2020
ms.locfileid: "81535916"
---
# <a name="application-types-for-microsoft-identity-platform"></a>Типы приложений для платформы идентификации Майкрософт

Конечная точка платформы удостоверений Майкрософт (версии 2.0) поддерживает проверку подлинности для различных современных архитектур приложений, которые основаны на стандартном отраслевом протоколе [OAuth 2.0 или OpenID Connect](active-directory-v2-protocols.md). В этой статье описаны типы приложений, которые можно создать с помощью платформы идентификации Майкрософт, независимо от предпочтительного языка или платформы. Информация предназначена для понимания сценариев высокого уровня перед [началом работы с кодом.](v2-overview.md#getting-started)

> [!NOTE]
> Конечная точка платформы майкрософт не поддерживает все сценарии и функции Azure Active Directory (Azure AD). Чтобы определить, следует ли использовать конечную точку платформы идентификации Майкрософт, прочитайте об [ограничениях платформы идентификации Майкрософт.](active-directory-v2-limitations.md)

## <a name="the-basics"></a>Основные сведения

Вы должны зарегистрировать каждое приложение, которое использует конечную точку платформы Microsoft на новом [портале регистраций приложений.](https://go.microsoft.com/fwlink/?linkid=2083908) В процессе регистрации приложения будет задано несколько параметров приложения:

* **Идентификатор приложения (клиента),** который однозначно идентифицирует ваше приложение
* **универсальный код ресурса (URI) перенаправления**, который можно использовать для направления ответов к приложению;
* Несколько других значений, связанных с сценарием, таких как поддерживаемые типы учетных записей

Дополнительные сведения см. в статье о [регистрации приложения](quickstart-register-app.md).

После регистрации приложения приложение общается с платформой идентификации Майкрософт, отправляя запросы в конечную точку. Мы предоставляем платформы и библиотеки с открытым кодом, которые отвечают обрабатывают данные этих запросов. Также имеется возможность самостоятельно реализовать логику аутентификации, создавая запросы к этим конечным точкам.

```HTTP
https://login.microsoftonline.com/common/oauth2/v2.0/authorize
https://login.microsoftonline.com/common/oauth2/v2.0/token
```

## <a name="single-page-apps-javascript"></a>Одностраничные приложения (JavaScript)

Многие современные приложения содержат интерфейсное одностраничное приложение, созданное преимущественно на языке JavaScript. Часто она написана с помощью таких фреймворков, как Angular, React или Vue. Конечная точка платформы идентификации Майкрософт поддерживает эти приложения, используя [неявный поток OAuth 2.0.](v2-oauth2-implicit-grant-flow.md)

В этом потоке приложение получает токены непосредственно с платформы идентификации Майкрософт, авторизуя конечную точку без каких-либо обменов от сервера к серверу. Вся логика аутентификации и обработки сеансов размещается в клиенте JavaScript без перенаправления на дополнительные страницы.

![Отображает неявный поток проверки подлинности](./media/v2-app-types/convergence-scenarios-implicit.svg)

Чтобы увидеть этот сценарий в действии, попробуйте один из одностраничных образцов кода приложения в [разделе идентификационных данных Microsoft.](v2-overview.md#getting-started)

## <a name="web-apps"></a>Веб-приложения

Для веб-приложений (.NET, PHP, Java, Ruby, Python, Node), доступных пользователю через браузер, для входа пользователей можно использовать [OpenID Connect](active-directory-v2-protocols.md). В OpenID Connect веб-приложение получает маркер идентификации. Это маркер безопасности, который проверяет удостоверение пользователя и предоставляет сведения о пользователе в форме утверждений.

```JSON
// Partial raw ID token
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6ImtyaU1QZG1Cd...

// Partial content of a decoded ID token
{
    "name": "John Smith",
    "email": "john.smith@gmail.com",
    "oid": "d9674823-dffc-4e3f-a6eb-62fe4bd48a58"
    ...
}
```

Более подробная информация о различных типах токенов, используемых в конечной точке платформы Майкрософт, доступна в ссылке [на маркер доступа](access-tokens.md) и id_token [ссылки](id-tokens.md)

В приложениях веб-сервера поток аутентификации для входа состоит из следующих базовых этапов.

![Отображает поток проверки подлинности веб-приложений](./media/v2-app-types/convergence-scenarios-webapp.svg)

Вы можете убедиться в идентификации пользователя, продав идентификатор маркера с помощью общедоступного ключа подписи, полученного из конечных точек платформы Майкрософт. Для этого задается файл cookie сеанса, с помощью которого можно идентифицировать пользователя при последующих запросах страницы.

Чтобы увидеть этот сценарий в действии, попробуйте один из образцов кода для входной связи веб-приложения в [разделе «Платформа идентификации Майкрософт».](v2-overview.md#getting-started)

Помимо простого входа в систему, приложению веб-сервера может потребоваться доступ к некоторым другим веб-службам, например интерфейсу REST API. В этом случае приложение веб-сервера участвует в объединенном потоке OpenID Connect и OAuth 2.0 с использованием [потока кода авторизации OAuth 2.0](active-directory-v2-protocols.md). Для получения дополнительной информации об этом сценарии, прочитайте о [начале работы с веб-приложений и веб-AIS](active-directory-v2-devquickstarts-webapp-webapi-dotnet.md).

## <a name="web-apis"></a>Веб-API

Для защиты веб-служб можно использовать конечную точку платформы Майкрософт, например web-API RESTful вашего приложения. Web-аДИ могут быть реализованы на многочисленных платформах и языках. Они также могут быть реализованы с помощью HTTP триггеров в Azure Functions. Вместо токенов идентификаторов и файлов сессии веб-aPI использует токен доступа OAuth 2.0 для защиты своих данных и проверки подлинности входящих запросов. Абонент веб-API прикладывает токен доступа в заголовкавторизации запроса HTTP, как это:

```HTTP
GET /api/items HTTP/1.1
Host: www.mywebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6...
Accept: application/json
...
```

Веб-API использует токен доступа для проверки личности вызывающего абонента API и для извлечения информации о вызываемом абоненте из утверждений, которые закодированы в маркере доступа. Более подробная информация о различных типах токенов, используемых в конечной точке платформы Майкрософт, доступна в ссылке [на маркер доступа](access-tokens.md) и [id_token](id-tokens.md) ссылки.

Веб-API может дать пользователям возможность выбирать или отказаться от конкретных функциональных возможностей или данных, подвергая разрешения, также известные как [области.](v2-permissions-and-consent.md) Чтобы вызывающее приложение получило разрешение для области, пользователь должен дать согласие на это. Конечная точка платформы идентификации Майкрософт запрашивает у пользователя разрешение, а затем записывает разрешения во всех кетоонах доступа, которые получает веб-aPI. Веб-API проверяет токены доступа, которые он получает при каждом вызове, и выполняет проверку авторизации.

Веб-API может получать токены доступа из всех типов приложений, включая веб-серверные приложения, настольные и мобильные приложения, одностраничные приложения, серверные daemons и даже другие веб-АПП. Поток высокого уровня для веб-API выглядит следующим образом:

![Отображает поток проверки подлинности веб-aPI](./media/v2-app-types/convergence-scenarios-webapi.svg)

Чтобы узнать, как обезопасить веб-API, используя токены доступа OAuth2, ознакомьтесь с примерами кода Web API в [разделе,запущенного](v2-overview.md#getting-started) в разделе Microsoft identity platform.

Во многих случаях web-аПО также должны делать исходящие запросы в другие аПО, расположенные ниже по течению, обеспеченные платформой идентификации Майкрософт. Для этого web-aPI могут воспользоваться потоком **On-Behalf-Of,** который позволяет web API обменять входящий токен доступа на другой токен доступа, который будет использоваться в исходящих запросах. Для получения дополнительной информации [см.](v2-oauth2-on-behalf-of-flow.md)

## <a name="mobile-and-native-apps"></a>Мобильные и собственные приложения

Приложения, установленные на устройствах, такие как мобильные и настольные приложения, часто нуждаются в доступе к бэк-эндовым службам или веб-AI, которые хранят данные и выполняют функции от имени пользователя. В этих приложениях можно реализовать процесс входа и авторизации во внутренних службах с помощью [потока кода авторизации OAuth 2.0](v2-oauth2-auth-code-flow.md).

В этом потоке приложение получает код авторизации с точки зрения идентификационных данных платформы Майкрософт при входе пользователя. Код авторизации представляет собой разрешение, полученное от приложения, на вызов внутренних служб от имени пользователя, выполнившего вход. Приложение может передать код авторизации в фоновом режиме, чтобы получить маркер доступа OAuth 2.0 и маркер обновления. Приложение может использовать токен доступа для проверки подлинности для веб-AIS в запросах HTTP, а также использовать маркер обновления для получения новых токенов доступа по истечении срока действия старых токенов доступа.

![Отображает поток проверки подлинности нативного приложения](./media/v2-app-types/convergence-scenarios-native.svg)

## <a name="daemons-and-server-side-apps"></a>Управляющие программы и серверные приложения

Приложениям, которые имеют длительные процессы или работают без взаимодействия с пользователем, также необходим способ доступа к защищенным ресурсам, таким как web-aI. Такие приложения могут выполнять аутентификацию и получать маркеры, используя удостоверение приложения (а не делегированное удостоверение пользователя) с помощью потока учетных данных клиента OAuth 2.0. Можно подтвердить удостоверение приложения с помощью секрета или сертификата клиента. Для получения дополнительной информации [см.](https://github.com/Azure-Samples/active-directory-dotnetcore-daemon-v2)

В этом потоке приложение взаимодействует `/token` непосредственно с конечной точкой для получения доступа:

![Показывает поток аутентификации приложения daemon](./media/v2-app-types/convergence-scenarios-daemon.svg)

Чтобы создать управляющую программу, изучите [документацию по учетным данным клиентов](v2-oauth2-client-creds-grant-flow.md) или ознакомьтесь с [примером приложения .NET](https://github.com/Azure-Samples/active-directory-dotnet-daemon-v2).
