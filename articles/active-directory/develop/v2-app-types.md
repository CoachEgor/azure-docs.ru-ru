---
title: Типы приложений для платформы идентификации Майкрософт Azure
description: Типы приложений и сценариев, поддерживаемых конечной точкой платформы майкрософт (v2.0).
services: active-directory
documentationcenter: ''
author: rwike77
manager: CelesteDG
editor: ''
ms.assetid: 494a06b8-0f9b-44e1-a7a2-d728cf2077ae
ms.service: active-directory
ms.subservice: develop
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 04/06/2019
ms.author: ryanwi
ms.reviewer: saeeda, jmprieur
ms.custom: aaddev
ms.openlocfilehash: 94cddf097f2a9e51f061909f6bdd3dcd82f18bfe
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79262533"
---
# <a name="application-types-for-microsoft-identity-platform"></a>Типы приложений для платформы идентификации Майкрософт

Конечная точка платформы удостоверений Майкрософт (версии 2.0) поддерживает проверку подлинности для различных современных архитектур приложений, которые основаны на стандартном отраслевом протоколе [OAuth 2.0 или OpenID Connect](active-directory-v2-protocols.md). В этой статье описаны типы приложений, которые можно создать с помощью платформы идентификации Майкрософт, независимо от предпочтительного языка или платформы. Информация предназначена для понимания сценариев высокого уровня перед [началом работы с кодом.](v2-overview.md#getting-started)

> [!NOTE]
> Конечная точка платформы майкрософт не поддерживает все сценарии и функции Azure Active Directory (Azure AD). Чтобы определить, следует ли использовать конечную точку платформы идентификации Майкрософт, прочитайте об [ограничениях платформы идентификации Майкрософт.](active-directory-v2-limitations.md)

## <a name="the-basics"></a>Основные сведения

Вы должны зарегистрировать каждое приложение, которое использует конечную точку платформы Microsoft на новом [портале регистраций приложений.](https://go.microsoft.com/fwlink/?linkid=2083908) В процессе регистрации приложения будет задано несколько параметров приложения:

* **Идентификатор приложения (клиента),** который однозначно идентифицирует ваше приложение
* **универсальный код ресурса (URI) перенаправления**, который можно использовать для направления ответов к приложению;
* Несколько других значений, связанных с сценарием, таких как поддерживаемые типы учетных записей

Дополнительные сведения см. в статье о [регистрации приложения](quickstart-register-app.md).

После регистрации приложения приложение общается с платформой идентификации Майкрософт, отправляя запросы в конечную точку. Мы предоставляем платформы и библиотеки с открытым кодом, которые отвечают обрабатывают данные этих запросов. Также имеется возможность самостоятельно реализовать логику аутентификации, создавая запросы к этим конечным точкам.

```HTTP
https://login.microsoftonline.com/common/oauth2/v2.0/authorize
https://login.microsoftonline.com/common/oauth2/v2.0/token
```

## <a name="single-page-apps-javascript"></a>Одностраничные приложения (JavaScript)

Многие современные приложения содержат интерфейсное одностраничное приложение, созданное преимущественно на языке JavaScript. Часто она написана с помощью таких фреймворков, как Angular, React или Vue. Конечная точка платформы идентификации Майкрософт поддерживает эти приложения, используя [неявный поток OAuth 2.0.](v2-oauth2-implicit-grant-flow.md)

В этом потоке приложение получает токены непосредственно с платформы идентификации Майкрософт, авторизуя конечную точку без каких-либо обменов от сервера к серверу. Вся логика аутентификации и обработки сеансов размещается в клиенте JavaScript без перенаправления на дополнительные страницы.

![Отображает неявный поток проверки подлинности](./media/v2-app-types/convergence-scenarios-implicit.svg)

Чтобы увидеть этот сценарий в действии, попробуйте один из одностраничных образцов кода приложения в [разделе идентификационных данных Microsoft.](v2-overview.md#getting-started)

## <a name="web-apps"></a>Веб-приложения

Для веб-приложений (.NET, PHP, Java, Ruby, Python, Node), доступных пользователю через браузер, для входа пользователей можно использовать [OpenID Connect](active-directory-v2-protocols.md). В OpenID Connect веб-приложение получает маркер идентификации. Это маркер безопасности, который проверяет удостоверение пользователя и предоставляет сведения о пользователе в форме утверждений.

```JSON
// Partial raw ID token
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6ImtyaU1QZG1Cd...

// Partial content of a decoded ID token
{
    "name": "John Smith",
    "email": "john.smith@gmail.com",
    "oid": "d9674823-dffc-4e3f-a6eb-62fe4bd48a58"
    ...
}
```

Более подробная информация о различных типах токенов, используемых в конечной точке платформы Майкрософт, доступна в ссылке [на маркер доступа](access-tokens.md) и id_token [ссылки](id-tokens.md)

В приложениях веб-сервера поток аутентификации для входа состоит из следующих базовых этапов.

![Отображает поток проверки подлинности веб-приложений](./media/v2-app-types/convergence-scenarios-webapp.svg)

Вы можете убедиться в идентификации пользователя, продав идентификатор маркера с помощью общедоступного ключа подписи, полученного из конечных точек платформы Майкрософт. Для этого задается файл cookie сеанса, с помощью которого можно идентифицировать пользователя при последующих запросах страницы.

Чтобы увидеть этот сценарий в действии, попробуйте один из образцов кода для входной связи веб-приложения в [разделе «Платформа идентификации Майкрософт».](v2-overview.md#getting-started)

Помимо простого входа в систему, приложению веб-сервера может потребоваться доступ к некоторым другим веб-службам, например интерфейсу REST API. В этом случае приложение веб-сервера участвует в объединенном потоке OpenID Connect и OAuth 2.0 с использованием [потока кода авторизации OAuth 2.0](active-directory-v2-protocols.md). Чтобы больше узнать об этом сценарии, ознакомьтесь с тем, как [приступить к работе с веб-приложениями и интерфейсами веб-API](active-directory-v2-devquickstarts-webapp-webapi-dotnet.md).

## <a name="web-apis"></a>Веб-API

Конечную точку платформы удостоверений Майкрософт можно использовать для защиты веб-служб, таких как веб-API REST. Web-аДИ могут быть реализованы на многочисленных платформах и языках. Они также могут быть реализованы с помощью HTTP триггеров в Azure Functions. Веб-API вместо маркеров идентификации и файлов cookie сеанса использует маркер доступа OAuth 2.0 для защиты данных и аутентификации входящих запросов. Объект, вызывающий веб-API, добавляет маркер доступа в начале заголовка авторизации HTTP-запроса, как показано ниже.

```HTTP
GET /api/items HTTP/1.1
Host: www.mywebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6...
Accept: application/json
...
```

Веб-API использует маркер доступа для проверки удостоверения объекта, вызывающего API, и получения сведений о нем из утверждений, которые закодированы в маркере доступа. Более подробная информация о различных типах токенов, используемых в конечной точке платформы Майкрософт, доступна в ссылке [на маркер доступа](access-tokens.md) и [id_token](id-tokens.md) ссылки.

Веб-API может дать пользователям возможность применять определенные функции и данные или отказаться от них, предоставляя разрешения, которые также называют [областями](v2-permissions-and-consent.md). Чтобы вызывающее приложение получило разрешение для области, пользователь должен дать согласие на это. Конечная точка платформы идентификации Майкрософт запрашивает у пользователя разрешение, а затем записывает разрешения во всех кетоонах доступа, которые получает Web API. Веб-API проверяет маркеры доступа, получаемые при каждом вызове, и выполняет проверки авторизации.

Веб-API может получать маркеры доступа от всех типов приложений, включая приложения веб-сервера, классические и мобильные приложения, одностраничные приложения, серверные управляющие программы и даже другие веб-API. Общий поток для веб-API выглядит следующим образом.

![Отображает поток проверки подлинности веб-aPI](./media/v2-app-types/convergence-scenarios-webapi.svg)

Чтобы узнать, как обезопасить Web API с помощью токенов доступа OAuth2, ознакомьтесь с примерами кода Web API в [разделе,запущенного веб-платформы Майкрософт.](v2-overview.md#getting-started)

Во многих случаях web-аПО также должны делать исходящие запросы в другие аПО, расположенные ниже по течению, обеспеченные платформой идентификации Майкрософт. Для этого web-aPI могут воспользоваться потоком **On-Behalf-Of,** который позволяет web API обменять входящий токен доступа на другой токен доступа, который будет использоваться в исходящих запросах. Для получения дополнительной информации [см.](v2-oauth2-on-behalf-of-flow.md)

## <a name="mobile-and-native-apps"></a>Мобильные и собственные приложения

Приложениям, установленным на устройстве, например мобильным и классическим приложениям, часто требуется доступ к внутренним службам или интерфейсам веб-API, которые хранят данные и выполняют различные функции от имени пользователя. В этих приложениях можно реализовать процесс входа и авторизации во внутренних службах с помощью [потока кода авторизации OAuth 2.0](v2-oauth2-auth-code-flow.md).

В этом потоке приложение получает код авторизации с точки зрения идентификационных данных платформы Майкрософт при входе пользователя. Код авторизации представляет собой разрешение, полученное от приложения, на вызов внутренних служб от имени пользователя, выполнившего вход. Приложение может передать код авторизации в фоновом режиме, чтобы получить маркер доступа OAuth 2.0 и маркер обновления. Приложение может использовать маркер доступа для аутентификации в интерфейсах веб-API в HTTP-запросах и использовать маркер обновления, чтобы получать новые маркеры доступа после истечения срока действия старых маркеров.

![Отображает поток проверки подлинности нативного приложения](./media/v2-app-types/convergence-scenarios-native.svg)

## <a name="daemons-and-server-side-apps"></a>Управляющие программы и серверные приложения

Приложениям, использующим долговременные процессы или работающим без взаимодействия с пользователем, тоже нужна возможность доступа к защищенным ресурсам, таким как интерфейсы веб-API. Такие приложения могут выполнять аутентификацию и получать маркеры, используя удостоверение приложения (а не делегированное удостоверение пользователя) с помощью потока учетных данных клиента OAuth 2.0. Можно подтвердить удостоверение приложения с помощью секрета или сертификата клиента. Для получения дополнительной информации [см.](https://github.com/Azure-Samples/active-directory-dotnetcore-daemon-v2)

В этом потоке приложение взаимодействует `/token` непосредственно с конечной точкой для получения доступа:

![Показывает поток аутентификации приложения daemon](./media/v2-app-types/convergence-scenarios-daemon.svg)

Чтобы создать управляющую программу, изучите [документацию по учетным данным клиентов](v2-oauth2-client-creds-grant-flow.md) или ознакомьтесь с [примером приложения .NET](https://github.com/Azure-Samples/active-directory-dotnet-daemon-v2).
