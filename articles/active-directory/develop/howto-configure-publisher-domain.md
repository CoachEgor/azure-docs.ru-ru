---
title: Настройка издателя домена приложения | Azure
description: Узнайте, как настроить домен издателя приложения, чтобы пользователи знали, куда отправлять свои данные.
services: active-directory
documentationcenter: dev-center-name
author: rwike77
manager: CelesteDG
editor: ''
ms.service: active-directory
ms.subservice: develop
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/05/2019
ms.author: ryanwi
ms.reviewer: lenalepa, sureshja, zachowd
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: d47075f9e18b299341a98983ffb8a47389fd7063
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/13/2019
ms.locfileid: "65540246"
---
# <a name="how-to-configure-an-applications-publisher-domain-preview"></a>Практическое руководство: Настроить домен издателя приложения (Предварительная версия)

Домен издателя приложения отображается для пользователей на [запрос согласия приложения](application-consent-experience.md) чтобы пользователи знали, куда отправлять свои данные. Приложений с несколькими клиентами, зарегистрированные после 21 мая 2019 г., у которых нет домен издателя отображаются как **непроверенные**. Мультитенантные приложения — приложения, которые поддерживают учетные записи за пределами одного каталога организации; Например поддерживают все учетные записи Azure AD, или поддерживает все учетные записи Azure AD и личных учетных записей Майкрософт.

## <a name="new-applications"></a>Новые приложения

При регистрации нового приложения домен издателя приложения может быть присвоено значение по умолчанию. Значение зависит от того, где было зарегистрировано приложение, особенно в том случае, ли приложение регистрируется в клиенте и определить, имеет ли клиента клиента проверенных доменов.

Если клиент проверенные домены, издателя домена приложения по умолчанию основной проверенный домен клиента. Если нет клиента проверенных доменов (что происходит, когда приложение не зарегистрировано в клиенте), домен издателя приложения будет установлено в значение null.

В следующей таблице перечислены значения издателя домена по умолчанию.  

| Клиент проверенные домены | Значение по умолчанию домен издателя |
|-------------------------|----------------------------|
| null | null |
| *.onmicrosoft.com | *.onmicrosoft.com |
| -*. onmicrosoft.com<br/>-domain1.com<br/>-domain2.com (основной) | domain2.com |

Если домен издателя мультитенантное приложение не установлено, или если он задан в домен, который заканчивается на. onmicrosoft.com, отобразится запрос на продолжение приложения **непроверенные** вместо домена издателя.

## <a name="grandfathered-applications"></a>Наследуют приложений

Если ваше приложение было зарегистрировано до 21 мая 2019 г., не покажет запрос согласия приложения **непроверенные** Если вы не задали домен издателя. Мы рекомендуем, что значение издателя домена таким образом, пользователи смогут просматривать эту информацию на запрос согласия для вашего приложения.

## <a name="configure-publisher-domain-using-the-azure-portal"></a>Настройка издателя домена, с помощью портала Azure

Чтобы задать домен издателя приложения, выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com) с помощью личной учетной записи Майкрософт либо рабочей или учебной учетной записи.

1. Если ваша учетная запись отсутствует в более чем одном клиенте Azure AD:
   1. Выберите профиль в меню в правом верхнем углу страницы, а затем **переключение каталога**.
   1. Измените ваш сеанс с клиентом Azure AD, где вы хотите создать приложение.

1. Перейдите к [Azure Active Directory > Регистрация приложений](https://go.microsoft.com/fwlink/?linkid=2083908) для поиска и выберите приложение, которое вы хотите настроить.

   После выбора приложения, вы увидите приложение **Обзор** страницы.

1. В приложении **Обзор** выберите **фирменной символики** раздел.

1. Найти **домен издателя** поле и выберите один из следующих вариантов:

   - Выберите **настройки домена** Если вы еще не настроили домена уже.
   - Выберите **домен обновления** Если домен уже был настроен.

Если ваше приложение будет зарегистрировано в клиенте, вы увидите две вкладки для выбора из: **Выберите проверенный домен** и **проверка нового домена**.

Если ваше приложение не зарегистрировано в клиенте, вы увидите только параметр, чтобы проверить новый домен приложения.

### <a name="to-verify-a-new-domain-for-your-app"></a>Чтобы проверить новый домен приложения

1. Создайте файл с именем `microsoft-identity-association.json` и вставьте следующий фрагмент кода JSON.

   ```json
   {
      "associatedApplications": [
        {
           "applicationId": "{YOUR-APP-ID-HERE}"
        }
      ]
    }
   ```

1. Замените заполнитель *{YOUR-APP-ID-HERE}* с Идентификатором приложения (клиента), соответствующее приложение.

1. Размещение файла в: `https://{YOUR-DOMAIN-HERE}.com/.well-known/microsoft-identity-association.json`. Замените заполнитель *{YOUR-домена-HERE}* в соответствии с проверенного домена.

1. Нажмите кнопку **проверить и сохранить домена** кнопки.

### <a name="to-select-a-verified-domain"></a>Выберите проверенный домен

- Если ваш клиент проверенных доменов, выберите один из доменов из **выберите проверенный домен** раскрывающегося списка.

## <a name="implications-on-the-app-consent-prompt"></a>Влияние на приложение запрос согласия

Настройка издателя домена оказывает влияние на что видят пользователи на запрос согласия для приложения. Чтобы полностью понять компоненты запрос согласия, см. в разделе [основные сведения о возможности согласия приложения](application-consent-experience.md).

В следующей таблице описывается поведение приложения, созданные до 21 мая 2019 г.

![Запрос на согласие для приложений, созданных до 21 мая 2019 г.](./media/howto-configure-publisher-domain/old-app-behavior-table.png)

Поведение для новых приложений, созданных после 21 мая 2019 г. будет зависеть от домена издателя и типа приложения. Следующая таблица описывает изменения, которые должны быть готовы см. в разделе с помощью различных комбинаций конфигураций.

![Запрос согласия для приложений, созданных после 21 мая 2019 г.](./media/howto-configure-publisher-domain/new-app-behavior-table.png)

## <a name="implications-on-redirect-uris"></a>Влияние на URI перенаправления

Приложения, которые входят в систему с помощью любого рабочая или учебная учетная запись либо личных учетных записей Майкрософт ([мультитенантной](single-and-multi-tenant-apps.md)) накладываются некоторые ограничения при указании URI перенаправления.

### <a name="single-root-domain-restriction"></a>Ограничение одного корневого домена

Если значение издателя домена для мультитенатных приложений присвоено значение null, приложений, ограничены совместно использовать один корневой домен для URI перенаправления. Например, следующие сочетания значений запрещена, так как корневой домен, contoso.com, не соответствует fabrikam.com.

```
"https://contoso.com",
"https://fabrikam.com",
```

### <a name="subdomain-restrictions"></a>Ограничения поддомен

Дочерние домены разрешены, но необходимо явно зарегистрировать корневого домена. Например при следующих URI совместно используют один корневой домен, не является допустимым сочетания.

```
"https://app1.contoso.com",
"https://app2.contoso.com",
```

Тем не менее если разработчик явно добавляет корневой домен, сочетание является допустимым.

```
"https://contoso.com",
"https://app1.contoso.com",
"https://app2.contoso.com",
```

### <a name="exceptions"></a>Исключения

Следующие варианты не подпадают под ограничение одного корневого домена:

- Один клиент, или приложений, предназначенных для учетных записей в одном каталоге
- Использование localhost, так как URI перенаправления
- URI перенаправления с пользовательские схемы (отличные от HTTP или HTTPS)

## <a name="configure-publisher-domain-programmatically"></a>Программная настройка домен издателя

В настоящее время не поддерживается REST API или PowerShell для программной настройки домен издателя.
