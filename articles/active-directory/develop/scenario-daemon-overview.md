---
title: Приложение управляющей программы, вызывающее веб-API (обзор) — платформа Microsoft Identity
description: Узнайте, как создать управляющее приложение, вызывающее веб-API
services: active-directory
documentationcenter: dev-center-name
author: jmprieur
manager: CelesteDG
editor: ''
ms.service: active-directory
ms.subservice: develop
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 05/07/2019
ms.author: jmprieur
ms.custom: aaddev, identityplatformtop40
ms.collection: M365-identity-device-management
ms.openlocfilehash: 1b86841cc6889eb8e716df3f6d1ac9bc7b158992
ms.sourcegitcommit: 670c38d85ef97bf236b45850fd4750e3b98c8899
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/08/2019
ms.locfileid: "68852724"
---
# <a name="scenario-daemon-application-that-calls-web-apis"></a>Сценарий: Управляющее приложение, вызывающее веб-API

Изучите все, что нужно для создания управляющего приложения, вызывающего веб-API.

## <a name="prerequisites"></a>предварительные требования

[!INCLUDE [Pre-requisites](../../../includes/active-directory-develop-scenarios-prerequisites.md)]

## <a name="overview"></a>Обзор

Приложение может получить маркер для вызова веб-API от имени самого себя (не от имени пользователя). Этот сценарий полезен для управляющих приложений. Он использует стандартные [учетные данные клиента](v2-oauth2-client-creds-grant-flow.md) OAuth 2,0.

![Управляющие программы](./media/scenario-daemon-app/daemon-app.svg)

Ниже приведены некоторые примеры вариантов использования для приложений управляющей программы.

- Веб-приложения, используемые для предоставления или администрирования пользователей, а также для пакетных процессов в каталоге
- Настольные приложения (например, службы Windows в Windows или процессы управляющих программ в Linux), выполняющие пакетные задания или службу операционной системы, работающую в фоновом режиме.
- Веб-API, которым требуется управлять каталогами, а не отдельными пользователями

Существует еще один распространенный случай, когда приложения, не использующие управляющие программы, используют учетные данные клиента. даже если они действуют от имени пользователей, им нужно получить доступ к веб-API или ресурсу с удостоверениями по техническим причинам. Примером является доступ к секретам в KeyVault или базе данных SQL Azure для кэша.

Приложения, получившие маркер для собственных удостоверений:

- — Это конфиденциальные клиентские приложения. Эти приложения, учитывая, что они обращаются к ресурсам независимо от пользователя, должны доказать свою личность. Они также являются конфиденциальными приложениями, которые должны быть утверждены администраторами клиента Azure Active Directory (Azure AD).
- Зарегистрировали секрет (пароль приложения или сертификат) в Azure AD. Этот секрет передается во время вызова Azure AD для получения маркера.

## <a name="specifics"></a>Особенности

> [!IMPORTANT]
>
> - Взаимодействие с пользователем в управляющем приложении невозможно. Управляющее приложение требует собственного удостоверения. Этот тип приложения запрашивает маркер доступа с помощью удостоверения приложения и предоставляет идентификатор приложения, учетные данные (пароль или сертификат) и URI идентификатора приложения в Azure AD. После успешной проверки подлинности управляющая программа получает маркер доступа (и маркер обновления) от конечной точки платформы идентификации Майкрософт, которая затем используется для вызова веб-API (и обновляется по мере необходимости).
> - Поскольку взаимодействие с пользователем невозможно, добавочное согласие не будет возможным. Все необходимые разрешения API должны быть настроены при регистрации приложения, а код приложения просто запрашивает статически определенные разрешения. Это также означает, что управляющие приложения не поддерживают последовательное согласие.

Для разработчиков полное руководство по этому сценарию имеет следующие особенности.

- Управляющие приложения могут работать только в клиентах Azure AD. Не имеет смысла создавать управляющее приложение, которое пытается работать с личными учетными записями Майкрософт. Если вы являетесь разработчиком бизнес-приложения, вы создадите управляющее приложение в своем клиенте. Если вы являетесь независимым поставщиком программного обеспечения, вам может потребоваться создать приложение управляющей программы для нескольких клиентов. Его необходимо будет передать каждому администратору клиента.
- Во время [регистрации приложения](./scenario-daemon-app-registration.md) **URI ответа** не требуется. Необходимо предоставить общий доступ к секретам или сертификатам с помощью Azure AD, а также запросить разрешения приложений и предоставить согласие администратора на использование этих разрешений приложения.
- При регистрации приложения в [конфигурации приложения](./scenario-daemon-app-configuration.md) необходимо предоставить учетные данные клиента совместно с Azure AD.
- [Область](scenario-daemon-acquire-token.md#scopes-to-request) , используемая для получения маркера с помощью потока учетных данных клиента, должна быть статической областью.

## <a name="next-steps"></a>Следующие шаги

> [!div class="nextstepaction"]
> [Приложение управляющей программы — регистрация приложения](./scenario-daemon-app-registration.md)
