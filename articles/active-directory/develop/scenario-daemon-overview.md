---
title: Создайте приложение daemon, которое вызывает веб-AI - платформа идентификации Microsoft (ru) Azure
description: Узнайте, как создать приложение daemon, которое вызывает веб-AIS
services: active-directory
author: jmprieur
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: conceptual
ms.workload: identity
ms.date: 01/31/2020
ms.author: jmprieur
ms.custom: aaddev, identityplatformtop40
ms.openlocfilehash: df06c4c55941f4424d6b90d2846af17bf055b2e4
ms.sourcegitcommit: d187fe0143d7dbaf8d775150453bd3c188087411
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80885469"
---
# <a name="scenario-daemon-application-that-calls-web-apis"></a>Сценарий: Приложение Daemon, которое вызывает веб-AIS

Узнайте все, что вам нужно, чтобы создать приложение daemon, которое вызывает веб-AIS.

## <a name="prerequisites"></a>Предварительные требования

[!INCLUDE [Pre-requisites](../../../includes/active-directory-develop-scenarios-prerequisites.md)]

## <a name="overview"></a>Обзор

Ваше приложение может приобрести токен для вызова веб-API от своего имени (не от имени пользователя). Этот сценарий полезен для приложений daemon. Он использует стандартный грант oAuth 2.0 [клиента учетных данных.](v2-oauth2-client-creds-grant-flow.md)

![Управляющие программы](./media/scenario-daemon-app/daemon-app.svg)

Вот несколько примеров использования случаев для приложений daemon:

- Веб-приложения, которые используются для предоставления или администрирования пользователей или проведения пакетных процессов в каталоге
- Настольные приложения (например, службы Windows на Windows или процессы daemon на Linux), выполняющие пакетные задания, или служба операционной системы, работающая в фоновом режиме
- Веб-AБИ, которые должны манипулировать каталогами, а не конкретных пользователей

Есть еще один распространенный случай, когда приложения, не являющиеся клиентами, используют учетные данные клиентов: даже если они действуют от имени пользователей, они должны получить доступ к веб-API или ресурсу под своей собственной идентичностью по техническим причинам. Примером может быть доступ к секретам в Хранилище ключей Azure или база данных Azure S'L для кэша.

Приложения, приобретающие токен для своих собственных идентификационных данных:

- Являются конфиденциальными приложениями для клиентов. Эти приложения, учитывая, что они получают доступ к ресурсам независимо от пользователей, должны доказать свою личность. Они также довольно чувствительные приложения. Они должны быть одобрены админином для клиентов -Azure Active Directory (Azure AD).
- Зарегистрировали секретный (пароль приложения или сертификат) с Azure AD. Этот секрет передается во время вызова в Azure AD, чтобы получить токен.

## <a name="specifics"></a>Специфики

> [!IMPORTANT]
>
> - Пользователи не могут взаимодействовать с приложением daemon. Приложение daemon требует своей собственной идентичности. Этот тип приложения запрашивает токен доступа, используя свой идентификатор приложения и представляя свой идентификатор приложения, учетные данные (пароль или сертификат) и ID-приложение URI в Azure AD. После успешной аутентификации daemon получает токен доступа (и маркер обновления) от конечной точки платформы майкрософт. Этот маркер затем используется для вызова web API (и обновляется по мере необходимости).
> - Поскольку пользователи не могут взаимодействовать с приложениями daemon, постепенное согласие невозможно. Все необходимые разрешения API должны быть настроены при регистрации приложения. Код приложения просто запрашивает статические определенные разрешения. Это также означает, что приложения daemon не будут поддерживать постепенное согласие.

Для разработчиков сквозной опыт для этого сценария имеет следующие аспекты:

- Приложения Daemon могут работать только в ad-налажек Azure. Не имеет смысла создавать приложение daemon, которое пытается манипулировать личными учетными записями Microsoft. Если вы являетесь разработчиком приложений line-of-business (LOB), вы создадите свое приложение daemon в вашем арендаторе. Если вы ISV, вы можете создать мультитенантное приложение daemon. Каждый админ-арендатор должен будет дать согласие.
- Во время [регистрации заявления](./scenario-daemon-app-registration.md)ответ URI не нужен. Вам необходимо поделиться секретами или сертификатами или подписанными утверждениями с Azure AD. Вам также необходимо запросить разрешения на применение и предоставить запрос у админа на использование этих разрешений приложения.
- [Конфигурация приложения](./scenario-daemon-app-configuration.md) должна предоставлять учетные данные клиента, совместно с Azure AD во время регистрации приложения.
- [Область,](scenario-daemon-acquire-token.md#scopes-to-request) используемая для приобретения токена с потоком учетных данных клиента, должна быть статической областью.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Приложение Daemon - регистрация приложений](./scenario-daemon-app-registration.md)
