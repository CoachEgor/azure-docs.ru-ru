---
title: Регистрация веб-приложения, которое входит в систему пользователей — платформа Microsoft Identity | Службы
description: Узнайте, как зарегистрировать веб-приложение, которое входит в систему пользователей
services: active-directory
author: jmprieur
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: conceptual
ms.workload: identity
ms.date: 07/14/2020
ms.author: jmprieur
ms.custom: aaddev
ms.openlocfilehash: b16ee98b44e52482423229a0940c8927a94d4c83
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "88118677"
---
# <a name="web-app-that-signs-in-users-app-registration"></a>Веб-приложение, которое входит в систему пользователей: регистрация приложения

В этой статье объясняются особенности регистрации приложений для веб-приложения, которое входит в систему пользователей.

Чтобы зарегистрировать приложение, можно использовать:

- [Краткое руководство по веб-приложению](#register-an-app-by-using-the-quickstarts). Кроме того, что очень удобно при создании приложения, краткие руководства в портал Azure содержат кнопку с именем **внести это изменение**. С помощью этой кнопки можно задать нужные свойства даже для существующего приложения. Необходимо адаптировать значения этих свойств к своему собственному случаю. В частности, веб-интерфейс API для вашего приложения, вероятно, будет отличаться от предложенного по умолчанию, что также повлияет на универсальный код ресурса (URI) выхода.
- Портал Azure для [регистрации приложения вручную](#register-an-app-by-using-the-azure-portal).
- PowerShell и программы командной строки.

## <a name="register-an-app-by-using-the-quickstarts"></a>Регистрация приложения с помощью кратких руководств

Эти ссылки можно использовать для начальной загрузки создания веб-приложения.

- [ASP.NET Core](https://aka.ms/aspnetcore2-1-aad-quickstart-v2)
- [ASP.NET](https://ms.portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/applicationsListBlade/quickStartType/AspNetWebAppQuickstartPage/sourceType/docs)

## <a name="register-an-app-by-using-the-azure-portal"></a>Регистрация приложения с помощью портал Azure

> [!NOTE]
> Используемый портал отличается в зависимости от того, выполняется ли ваше приложение в Microsoft Azure общедоступном облаке или в национальной или независимых облаке. Дополнительные сведения см. в статье [местные облака](./authentication-national-cloud.md#app-registration-endpoints).


1. Войдите на [портал Azure](https://portal.azure.com) с помощью личной учетной записи Майкрософт либо рабочей или учебной учетной записи. Кроме того, можно войти в [портал Azure](./authentication-national-cloud.md#app-registration-endpoints) для национального облака.
2. Если ваша учетная запись предоставляет доступ к нескольким клиентам, выберите свою учетную запись в правом верхнем углу. Затем задайте для сеанса портала требуемый клиент Azure Active Directory (Azure AD).
3. В левой области выберите службу **Azure Active Directory** , а затем выберите **Регистрация приложений**  >  **Новая регистрация**.

# <a name="aspnet-core"></a>[ASP.NET Core](#tab/aspnetcore)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Выберите поддерживаемые типы учетных записей для приложения. (См. раздел [Поддерживаемые типы учетных записей](./v2-supported-account-types.md).)
   1. В разделе **Имя** введите понятное имя приложения, которое будет отображаться пользователям приложения. Например, введите **AspNetCore-webapp**.
   1. Для **URI перенаправления**добавьте тип приложения и назначение URI, которые будут принимать возвращенные ответы токена после успешной проверки подлинности. Например, введите **https://localhost:44321** . Затем щелкните **Регистрация**.
   ![registration](media/scenario-webapp/scenario-webapp-app-registration-1.png)
1. Выберите меню **Проверка подлинности**, а затем добавьте следующие сведения:
   1. В качестве **URL-адреса ответа**добавьте **https://localhost:44321/signin-oidc** тип **Web**.
   1. В разделе **Дополнительные параметры** задайте для параметра **URL-адрес выхода** значение **https://localhost:44321/signout-oidc** .
   1. В разделе **Неявное предоставление разрешения** установите флажок **Токены идентификатора**.
   1. Щелкните **Сохранить**.
  ![registration](media/scenario-webapp/scenario-webapp-app-registration-2.png)
 
# <a name="aspnet"></a>[ASP.NET](#tab/aspnet)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Выберите поддерживаемые типы учетных записей для приложения. (См. раздел [Поддерживаемые типы учетных записей](./v2-supported-account-types.md).)
   1. В разделе **Имя** введите понятное имя приложения, которое будет отображаться пользователям приложения. Например, введите **маилапп-openidconnect-v2**.
   1. В разделе **URI перенаправления (необязательно)** выберите **Web** в поле со СПИСКОМ и введите следующий URI перенаправления: **https://localhost:44326/** .
1. Выберите **Зарегистрировать**, чтобы создать приложение.
1. Выберите меню **Проверка подлинности** .
1. В разделе **Дополнительные параметры**  |  **неявное предоставление** выберите **токены идентификации**. Для работы с этим образцом необходимо включить [неявный поток предоставления](v2-oauth2-implicit-grant-flow.md) для входа пользователя.
1. Щелкните **Сохранить**.

# <a name="java"></a>[Java](#tab/java)

1. Когда появится **страница Регистрация приложения** , введите отображаемое имя приложения. Например, введите **Java-webapp**.
1. Выберите **учетные записи в любом организационном каталоге и личных учетных записях Майкрософт (например, Skype, Xbox, Outlook.com)**, а затем выберите **веб-приложение или API** для **типа приложения**.
1. Выберите **зарегистрировать** , чтобы зарегистрировать приложение.
1. В меню слева выберите **Проверка подлинности**. В разделе **URI перенаправления**выберите **веб**.

1. Введите два URI перенаправления: один для страницы входа и один для страницы графа. В обоих случаях используйте один и тот же узел и номер порта, а затем **/msal4jsample/Secure/AAD** для страницы входа и **msal4jsample/Graph/Me** для страницы сведений о пользователе.

   По умолчанию в образце используется:

   - **http://localhost:8080/msal4jsample/secure/aad**
   - **http://localhost:8080/msal4jsample/graph/me**

  Затем нажмите кнопку **Сохранить**.

1. В меню выберите **сертификаты & секреты** .
1. В разделе **секреты клиента** выберите **новый секрет клиента**, а затем:

   1. Введите описание ключа.
   1. Выберите продолжительность ключа **в 1 году**.
   1. Выберите **Добавить**.
   1. Когда отобразится значение ключа, скопируйте его для последующего использования. Это значение не будет отображаться повторно или быть извлечено другими способами.

# <a name="python"></a>[Python](#tab/python)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. В разделе **Имя** введите понятное имя приложения, которое будет отображаться пользователям приложения. Например, введите **Python-webapp**.
   1. Измените **Поддерживаемые типы учетных записей** на **учетные записи в любом каталоге Организации и личных учетных записях Майкрософт (например, Skype, Xbox, Outlook.com)**.
   1. В разделе **URI перенаправления (необязательно)** выберите **Web** в поле со СПИСКОМ и введите следующий URI перенаправления: **http://localhost:5000/getAToken** .
1. Выберите **Зарегистрировать**, чтобы создать приложение.
1. На странице приложения **Обзор** найдите **идентификатор приложения (клиента)** и запишите его, чтобы использовать позже. Он понадобится для настройки файла конфигурации Visual Studio для этого проекта.
1. В меню слева выберите **сертификаты & секреты**.
1. В разделе **секреты клиента** выберите **новый секрет клиента**, а затем:

   1. Введите описание ключа.
   1. Выберите срок действия ключа**в 1 год**.
   1. Выберите **Добавить**.
   1. Когда отобразится значение ключа, скопируйте его. Он понадобится вам позднее.
---

## <a name="register-an-app-by-using-powershell"></a>Регистрация приложения с помощью PowerShell

> [!NOTE]
> Сейчас Azure AD PowerShell создает приложения только со следующими поддерживаемыми типами учетных записей:
>
> - Мйорг (учетные записи только в этом каталоге организации)
> - Анйорг (учетные записи в любом каталоге организации)
>
> Вы можете создать приложение, которое будет выполнять вход пользователей с помощью личных учетных записей Майкрософт (например, Skype, Xbox или Outlook.com). Сначала создайте многоклиентское приложение. Поддерживаемые типы учетных записей — это учетные записи в любом каталоге Организации. Затем измените [`accessTokenAcceptedVersion`](./reference-app-manifest.md#accesstokenacceptedversion-attribute) значение свойства на **2** , а свойство — на [`signInAudience`](./reference-app-manifest.md#signinaudience-attribute) `AzureADandPersonalMicrosoftAccount` в [манифесте приложения](./reference-app-manifest.md) из портал Azure. Дополнительные сведения см. в описании [шага 1,3](https://github.com/Azure-Samples/active-directory-aspnetcore-webapp-openidconnect-v2/tree/master/1-WebApp-OIDC/1-3-AnyOrgOrPersonal#step-1-register-the-sample-with-your-azure-ad-tenant) в руководстве по ASP.NET Core. Этот шаг можно обобщить для веб-приложений на любом языке.

## <a name="next-steps"></a>Дальнейшие шаги

> [!div class="nextstepaction"]
> [Настройка кода приложения](scenario-web-app-sign-user-app-configuration.md)