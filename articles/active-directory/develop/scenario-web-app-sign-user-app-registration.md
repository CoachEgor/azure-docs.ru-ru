---
title: Веб-приложение, которое подписывает пользователей (регистрация приложения) — платформа Microsoft Identity
description: Узнайте, как создать веб-приложение, которое входит в систему пользователей (регистрация приложений)
services: active-directory
documentationcenter: dev-center-name
author: jmprieur
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 10/30/2019
ms.author: jmprieur
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: 641f71f6111930b54d0a2bd548f16d3cb0c07189
ms.sourcegitcommit: 98ce5583e376943aaa9773bf8efe0b324a55e58c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73175257"
---
# <a name="web-app-that-signs-in-users---app-registration"></a>Веб-приложение, которое входит в систему пользователей — Регистрация приложений

На этой странице объясняются особенности регистрации приложений для веб-приложения, которое входит в систему пользователей.

Чтобы зарегистрировать приложение, можно использовать:

- [Краткие руководства по веб-приложению](#register-an-app-using-the-quickstarts) — в дополнение к созданию приложения с помощью кратких руководств в портал Azure содержаться кнопка с именем **внести это изменение**. С помощью этой кнопки можно задать нужные свойства даже для существующего приложения. Необходимо адаптировать значения этих свойств к своему собственному случаю. В частности, веб-интерфейс API для вашего приложения, вероятно, будет отличаться от предложенного по умолчанию, что также повлияет на универсальный код ресурса (URI) выхода.
- Портал Azure [зарегистрировать приложение вручную](#register-an-app-using-azure-portal)
- PowerShell и средства командной строки

## <a name="register-an-app-using-the-quickstarts"></a>Регистрация приложения с помощью кратких руководств

При переходе по этой ссылке можно создать начальную загрузку для создания веб-приложения.

- [ASP.NET Core](https://aka.ms/aspnetcore2-1-aad-quickstart-v2)
- [ASP.NET](https://ms.portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/applicationsListBlade/quickStartType/AspNetWebAppQuickstartPage/sourceType/docs)

## <a name="register-an-app-using-azure-portal"></a>Регистрация приложения с помощью портал Azure

> [!NOTE]
> используемый портал отличается в зависимости от того, работает ли приложение в Microsoft Azure общедоступном облаке или в национальной или независимых облаке. Дополнительные сведения см. в статье [местные облака](./authentication-national-cloud.md#app-registration-endpoints) .


1. Войдите на [портал Azure](https://portal.azure.com) с помощью личной учетной записи Майкрософт либо рабочей или учебной учетной записи. Кроме того, можно войти в местные облачные портал Azure по выбору.
1. Если учетная запись предоставляет доступ нескольким клиентам, выберите свою учетную запись в правом верхнем углу и нужный клиент Azure AD для этого сеанса портала.
1. В области навигации слева выберите службу **Azure Active Directory** , а затем выберите **Регистрация приложений** > **Новая регистрация**.

# <a name="aspnet-coretabaspnetcore"></a>[ASP.NET Core](#tab/aspnetcore)

4. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Выберите поддерживаемые типы учетных записей для приложения (см. раздел [Поддерживаемые типы учетных записей](./v2-supported-account-types.md)).
   1. В разделе **Имя** введите понятное имя приложения, которое будет отображаться пользователям приложения, например `AspNetCore-WebApp`.
   1. В поле **URI перенаправления**добавьте тип приложения и назначение URI, которые будут принимать возвращаемые ответы токена после успешной проверки подлинности. Пример: `https://localhost:44321/`.  Выберите **Зарегистрировать**.
1. Выберите меню **Проверка подлинности**, а затем добавьте следующие сведения:
   1. В окне **URL-адрес ответа**добавьте `https://localhost:44321/signin-oidc` типа "Web".
   1. В разделе **Дополнительные параметры** задайте для параметра **URL-адрес выхода** значение `https://localhost:44321/signout-oidc`.
   1. В разделе **Неявное предоставление** установите флажок **Токен идентификатора**.
   1. Щелкните **Сохранить**.

# <a name="aspnettabaspnet"></a>[ASP.NET](#tab/aspnet)

4. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Выберите поддерживаемые типы учетных записей для приложения (см. раздел [Поддерживаемые типы учетных записей](./v2-supported-account-types.md)).
   - В разделе **Имя** введите понятное имя приложения, которое будет отображаться пользователям приложения, например `MailApp-openidconnect-v2`.
   - В разделе URI перенаправления (необязательно) выберите **Web** в поле со списком и введите следующие URI перенаправления: `https://localhost:44326/`.
1. Выберите **Зарегистрировать**, чтобы создать приложение.
1. Выберите меню **Проверка подлинности**, а затем добавьте следующие сведения:
   - В разделе **Дополнительные параметры** | **неявное предоставление** , проверьте **токены идентификации** , так как этот образец требует включения [неявного потока предоставления](v2-oauth2-implicit-grant-flow.md) для входа пользователя.
1. Щелкните **Сохранить**.

# <a name="javatabjava"></a>[Java](#tab/java)

4. Когда появится **страница Регистрация приложения** , введите понятное имя для приложения, например Java-webapp, выберите учетные записи в любом каталоге Организации и личных учетных записях Майкрософт (например, Skype, Xbox, Outlook.com) и выберите веб-приложение. /API "как *Тип приложения*.
1. Нажмите кнопку **Регистрация** , чтобы зарегистрировать приложение.
1. В меню слева щелкните **Проверка подлинности**и в разделе *URI перенаправления*выберите "веб". Необходимо ввести два разных URI перенаправления: один для страницы входа и один для страницы графа. В обоих случаях следует использовать тот же узел и номер порта, а затем "/msal4jsample/Secure/AAD" для страницы входа и "msal4jsample/Graph/Me" для страницы сведений о пользователе.
 По умолчанию в образце используется:

    - `http://localhost:8080/msal4jsample/secure/aad`.
    - `http://localhost:8080/msal4jsample/graph/me`

    В разделе **Дополнительные параметры** задайте для параметра **URL-адрес выхода** значение `http://localhost:8080/msal4jsample/sign_out`.

     Щелкните **сохранить**.

1. Выберите **сертификаты & секреты** в меню и в разделе **секреты клиента** щелкните **новый секрет клиента**:

    - Введите описание ключа
    - Выберите продолжительность ключа **в 1 году**.
    - Значение ключа будет отображаться при нажатии **Добавить**.
    - Скопируйте значение ключа для дальнейшего использования. Это значение ключа не будет отображаться повторно и не сможет быть извлечено другими способами, поэтому запишите его, как только оно отобразится в портал Azure.

# <a name="pythontabpython"></a>[Python](#tab/python)

4. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   - В разделе **Имя** введите понятное имя приложения, которое будет отображаться пользователям приложения, например `python-webapp`.
   - Измените **Поддерживаемые типы учетных записей** на **учетные записи в любом каталоге Организации и личных учетных записях Майкрософт (например, Skype, Xbox, Outlook.com)** .
   - В разделе URI перенаправления (необязательно) выберите **Web** в поле со списком и введите следующие URI перенаправления: `http://localhost:5000/getAToken`.
1. Выберите **Зарегистрировать**, чтобы создать приложение.
1. На странице приложения **Обзор** найдите **идентификатор приложения (клиента)** и запишите его, чтобы использовать позже. Он понадобится для настройки файла конфигурации Visual Studio для этого проекта.
1. На странице Обзор приложения выберите раздел **authentication (проверка подлинности** ).
   - В разделе **Дополнительные параметры** задайте для параметра **URL-адрес выхода** значение `http://localhost:5000/logout`.

  Щелкните **Сохранить**.
1. В левом меню выберите **Сертификаты и секреты** и выберите **Новый секрет клиента** в разделе **Секреты клиента**:

      - Введите описание ключа
      - Выберите срок действия ключа**в 1 год**.
      - При нажатии кнопки **Добавить** будет отображаться значение ключа.
      - Скопируйте значение ключа. Оно понадобится вам позднее.
---

## <a name="register-an-app-using-powershell"></a>Регистрация приложения с помощью PowerShell

> [!NOTE]
> Сейчас Azure AD PowerShell создает приложения только со следующими поддерживаемыми типами учетных записей:
>
> - Мйорг (учетные записи только в этом каталоге организации)
> - Анйорг (учетные записи в любом каталоге организации).
>
> Если вы хотите создать приложение, которое будет выполнять вход пользователей с личными учетными записями Майкрософт (например, Skype, XBox, Outlook.com), можно сначала создать приложение с несколькими клиентами (поддерживаемые типы учетных записей = учетные записи в любом каталоге организации), а затем изменить Свойство `signInAudience` в манифесте приложения из портал Azure. Это подробно описано в шаге [1,3](https://github.com/Azure-Samples/active-directory-aspnetcore-webapp-openidconnect-v2/tree/master/1-WebApp-OIDC/1-3-AnyOrgOrPersonal#step-1-register-the-sample-with-your-azure-ad-tenant) ASP.NET Core учебнике (и его можно обобщить в веб-приложениях на любом языке).

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Конфигурация кода приложения](scenario-web-app-sign-user-app-configuration.md)
