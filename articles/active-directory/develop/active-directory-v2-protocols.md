---
title: Дополнительные сведения о протоколах авторизации, поддерживаемых платформой идентификации Майкрософт | Службы
description: Рекомендации по протоколам OAuth 2,0 и OpenID Connect Connect, которые поддерживаются конечной точкой платформы Microsoft Identity.
services: active-directory
documentationcenter: ''
author: rwike77
manager: CelesteDG
editor: ''
ms.assetid: 5fb4fa1b-8fc4-438e-b3b0-258d8c145f22
ms.service: active-directory
ms.subservice: develop
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 05/30/2019
ms.author: ryanwi
ms.reviewer: hirsin
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: 446d7178973c1d43d55ff89c429b05c2a10118ba
ms.sourcegitcommit: bc3a153d79b7e398581d3bcfadbb7403551aa536
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2019
ms.locfileid: "68835290"
---
# <a name="microsoft-identity-platform-protocols"></a>Протоколы платформы удостоверений Майкрософт

Конечная точка платформы идентификации Майкрософт для удостоверения как услуги с стандартными промышленными протоколами, OpenID Connect Connect и OAuth 2,0. Хотя эта служба соответствует стандартам, между любыми двумя реализациями этих протоколов могут быть незначительные различия. Сведения в этой статье могут оказаться полезными, если вы планируете писать код с использованием прямой отправки и обработки HTTP-запросов или сторонней библиотеки с открытым кодом вместо одной из наших [библиотек с открытым кодом](reference-v2-libraries.md).

> [!NOTE]
> Не все сценарии и функции Azure AD поддерживаются конечной точкой платформы Microsoft Identity. Чтобы определить, следует ли использовать конечную точку платформы идентификации Майкрософт, ознакомьтесь с [ограничениями платформы удостоверений Майкрософт](active-directory-v2-limitations.md).

## <a name="the-basics"></a>Основные сведения

Почти во всех потоках обмена данными в OAuth 2.0 и OpenID Connect участвуют четыре стороны.

![Схема, показывающая роли OAuth 2,0](./media/active-directory-v2-flows/protocols-roles.svg)

* **Сервер авторизации** — это конечная точка платформы идентификации Майкрософт, которая отвечает за обеспечение удостоверения пользователя, предоставление и отзыв доступа к ресурсам, а также выдачу маркеров. Кроме того, он выполняет роль поставщика удостоверений: он безопасным способом обрабатывает любые данные, связанные со сведениями о пользователе, его доступом и отношениями доверия между участниками потока.
* **Владелец ресурса** — это, как правило, пользователь. Это сторона, владеющая данными, которая может предоставлять третьим сторонам доступ к этим данным или ресурсу.
* **Клиент OAuth** — это приложение, определяемое идентификатором приложения. Обычно именно с этой стороной взаимодействует конечный пользователь. Клиент OAuth также запрашивает маркеры у сервера авторизации. Владелец ресурса должен предоставить клиенту разрешение на доступ к ресурсу.
* **Сервер ресурсов** — место размещения ресурса или данных. Он доверяет серверу авторизации для безопасной проверки подлинности и авторизации клиента OAuth, а также использует маркеры доступа носителя, чтобы обеспечить предоставление доступа к ресурсу.

## <a name="app-registration"></a>Регистрация приложения

Все приложения, желающие принять персональные и рабочие или учебные учетные записи, должны быть зарегистрированы с помощью регистрация приложенийного интерфейса в [портал Azure](https://aka.ms/appregistrations) перед тем, как смогут подписывать этих пользователей с помощью OAuth 2,0 или OpenID Connect Connect. В процессе регистрации для приложения будет собрано и назначено несколько значений.

* **идентификатор приложения**, который определяет конкретное приложение;
* **URI перенаправления** (необязательно), который можно использовать для направления ответов обратно в приложение.
* Несколько других зависящих от сценария значений.

Дополнительные сведения см. в статье о [регистрации приложения](quickstart-register-app.md).

## <a name="endpoints"></a>Конечные точки

После регистрации приложение взаимодействует с платформой Microsoft Identity, отправляя запросы в конечную точку:

```
https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize
https://login.microsoftonline.com/{tenant}/oauth2/v2.0/token
```

Где `{tenant}` может принимать одно из четырех значений:

| Значение | Описание |
| --- | --- |
| `common` | Позволяет пользователям с личными учетными записями Майкрософт и рабочими учетными записями Azure AD выполнять вход в приложение. |
| `organizations` | Позволяет выполнять вход в приложение только пользователям с рабочими учетными записями Azure AD. |
| `consumers` | Позволяет выполнять вход в приложение только пользователям с личными учетными записями Майкрософт. |
| `8eaef023-2b34-4da1-9baa-8bc8c9d6a490` или `contoso.onmicrosoft.com` | Позволяет выполнять вход в приложение только пользователям с рабочими учетными записями определенного клиента Azure AD. Можно использовать понятное доменное имя клиента Azure AD или идентификатор GUID клиента. |

Чтобы узнать, как взаимодействовать с этими конечными точками, выберите определенный тип приложения в разделе [Протоколы](#protocols) и перейдите по ссылкам для получения дополнительной информации.

> [!TIP]
> Любое приложение, зарегистрированное в Azure AD, может использовать конечную точку платформы идентификации Майкрософт, даже если они не входят в личные учетные записи.  Таким образом можно перенести существующие приложения на платформу Microsoft Identity и [MSAL](reference-v2-libraries.md) без повторного создания приложения.  

## <a name="tokens"></a>Токены

Реализация OAuth 2,0 и OpenID Connect Connect платформы Microsoft Identity делает широкое использование токенов носителя, включая маркеры носителя, представленные в виде JWT. Токен носителя — это упрощенный маркер безопасности, предоставляющий его носителя (предъявителю) доступ к защищенному ресурсу. В этом смысле предъявителем является любая сторона, которая может предъявить маркер. Хотя сторона должна сначала пройти проверку подлинности на платформе Microsoft Identity, чтобы получить маркер носителя, если необходимые действия не предпринимаются для защиты токена при передаче и хранении, он может быть перехвачен и использован непреднамеренной стороной. Хотя в некоторых маркерах безопасности для предотвращения несанкционированного использования применяется специальный встроенный механизм, в токенах носителя такого механизма нет, и они должны передаваться по защищенному каналу, например с использованием стандарта безопасности транспортного уровня (HTTPS). Если токен носителя передается в незашифрованном виде, злоумышленник может использовать атаку "злоумышленник в середине", чтобы получить токен и использовать его для несанкционированного доступа к защищенному ресурсу. Те же принципы безопасности применяются при сохранении или кэшировании маркеров носителя для последующего использования. Необходимо всегда проверять, что приложение передает и сохраняет токены носителя безопасным образом. Дополнительные сведения о безопасности в случае применения токенов носителя см. в [RFC 6750, раздел 5](https://tools.ietf.org/html/rfc6750).

Дополнительные сведения о различных типах токенов, используемых в конечной точке платформы Microsoft Identity, см. в [справочнике по маркерам конечных точек платформы идентификации Майкрософт](v2-id-and-access-tokens.md).

## <a name="protocols"></a>Протоколы

Если вы готовы рассмотреть несколько примеров запросов, приступите к одному из учебников ниже. Каждый из них соответствует определенному сценарию аутентификации. Если вам нужна помощь с определением правильного потока, ознакомьтесь [с типами приложений, которые можно создавать с помощью платформы Microsoft Identity](v2-app-types.md).

* [Создание мобильного и собственного приложения с использованием OAuth 2.0](v2-oauth2-auth-code-flow.md)
* [Сборка веб-приложения с протоколом OpenID Connect](v2-protocols-oidc.md)
* [Создание одностраничных приложений с использованием неявной последовательности OAuth 2.0](v2-oauth2-implicit-grant-flow.md)
* [Создание управляющих программ или серверных процессов с использованием потока учетных данных клиентов OAuth 2.0](v2-oauth2-client-creds-grant-flow.md)
* [Получение маркеров в веб-API с помощью последовательности OAuth 2.0 On-Behalf-Of](v2-oauth2-on-behalf-of-flow.md)
