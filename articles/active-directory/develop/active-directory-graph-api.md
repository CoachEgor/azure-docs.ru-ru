---
title: API Graph Azure Active Directory
description: Общие сведения и краткое руководство по API Graph Azure AD, который обеспечивает программный доступ к Azure AD с помощью конечных точек REST API.
services: active-directory
author: rwike77
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: conceptual
ms.workload: identity
ms.date: 11/26/2019
ms.author: ryanwi
ms.reviewer: dkershaw, sureshja
ms.custom: aaddev, identityplatformtop40
ms.openlocfilehash: 73cdac1a372b42df5a8f52ea09f04ecc40031698
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2020
ms.locfileid: "80885724"
---
# <a name="azure-active-directory-graph-api"></a>API Graph Azure Active Directory

> [!IMPORTANT]
> Для доступа к ресурсам Azure Active Directory (Azure AD) настоятельно рекомендуется использовать [Microsoft Graph](https://developer.microsoft.com/graph) , а не API Graph Azure AD. В настоящее время усилия наших разработчиков направлены на Microsoft Graph, и дальнейшие усовершенствования API Azure AD Graph не планируются. Существует ограниченное количество сценариев, в которых API Graph Azure AD все еще может быть подходящими. Дополнительные сведения см. в блоге [Microsoft Graph или Azure AD Graph](https://developer.microsoft.com/office/blogs/microsoft-graph-or-azure-ad-graph/) , а также [в статье Перенос приложений Azure ad Graph в Microsoft Graph](https://docs.microsoft.com/graph/migrate-azure-ad-graph-overview).

В этой статье рассматривается API Graph Azure AD. Аналогичные сведения, связанные с API Microsoft Graph, см. в статье [Использование API Microsoft Graph](https://docs.microsoft.com/graph/use-the-api).

API Graph Azure Active Directory обеспечивает программный доступ к Azure AD через конечные точки API-интерфейса Rest Azure AD. Приложения могут использовать API Azure AD Graph для выполнения операций создания, чтения, обновления и удаления (CRUD) с данными и объектами каталогов. Например, API Azure AD Graph поддерживает следующие операции для объекта-пользователя.

* Создание нового пользователя в каталоге.
* Получение подробных свойств пользователя, таких как группы
* Обновление свойств пользователя, таких как расположение и номер телефона, или изменение пароля
* Проверка членства пользователя в группах для доступа на основе ролей
* Отключение учетной записи пользователя или ее полное удаление

Кроме того, вы можете выполнять те же операции с другими объектами, например группами или приложениями. Для вызова API Azure AD Graph для каталога приложения должны быть зарегистрированы в Azure AD. Приложение должно также иметь доступ к API Azure AD Graph. Обычно доступ обеспечивается с помощью потока согласия пользователя или администратора.

Чтобы приступить к работе с API Graph Azure Active Directory, ознакомьтесь с [кратким руководством по Azure ad API Graph](active-directory-graph-api-quickstart.md)или просмотрите [интерактивную справочную документацию по Azure AD API Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).

## <a name="features"></a>Функции

API Azure AD Graph предоставляет следующие возможности.

* **Конечные точки REST API**. Служба API Azure AD Graph соответствует ограничениям REST. Она состоит из конечных точек, доступ к которым можно получить с помощью стандартных HTTP-запросов. API Azure AD Graph поддерживает содержимое в формате XML или в виде нотаций объектов JavaScript (JSON) для запросов и ответов. Дополнительные сведения см. в [справочнике по REST API Azure AD Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).
* **Аутентификация с помощью Azure AD**. Каждый запрос API Azure AD Graph должен пройти аутентификацию путем добавления веб-маркеров JSON (JWT) в заголовок авторизации запроса. Этот маркер можно получить, выполнив запрос к конечной точке маркера Azure AD и указав действительные учетные данные. Чтобы получить токен для вызова Graph, можно использовать поток клиентских учетных данных OAuth 2.0 или поток предоставления кода авторизации. Дополнительные сведения см. в статье [Авторизация доступа к веб-приложениям с помощью OAuth 2.0 и Azure Active Directory](https://msdn.microsoft.com/library/azure/dn645545.aspx).
* **Ролевая авторизация (RBAC)**. Для реализации RBAC в API Azure AD Graph используются группы безопасности. Например, чтобы определить, имеет ли пользователь доступ к определенному ресурсу, приложение может вызвать операцию [Проверка членства в группе (транзитивно)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/functions-and-actions#checkMemberGroups), которая возвращает значение true или false.
* **Дифференциальный запрос**. Если вы хотите проверить наличие изменений в каталоге в промежутке между двумя периодами времени, не отправляя частые запросы к API Azure AD Graph, вы можете сделать дифференциальный запрос. Этот тип запроса возвращает только изменения, внесенные в промежутке между предыдущим дифференциальным запросом и текущим запросом. См. дополнительные сведения о [разностных запросах API Azure AD Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).
* **Расширения каталога**. Вы можете добавлять пользовательские свойства к объектам каталога без потребности во внешнем хранилище данных. Например, если приложению требуется свойство "Идентификатор Skype" для каждого пользователя, вы можете зарегистрировать новое свойство в каталоге, и оно будет доступно для каждого объекта-пользователя. См. дополнительные сведения о [расширениях схемы каталогов API Azure AD Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).
* **Защита с помощью областей разрешений**. API Azure AD Graph предоставляет области разрешений, которые обеспечивают безопасный доступ к данным Azure AD с помощью OAuth 2.0. Он поддерживает широкий набор типов клиентских приложений, включая:
  
  * пользовательские интерфейсы, которым предоставляется делегированный доступ к данным с помощью разрешения, получаемого от пользователя, выполнившего вход (делегирование);
  * приложения-службы или управляющие программы, работающие в фоновом режиме без наличия вошедшего пользователя и использующие определяемое приложением управление доступом на основе ролей.
    
    Обе эти области разрешений (с делегированием и приложениями) представляют привилегию, предоставляемую API Azure AD Graph, и могут запрашиваться клиентскими приложениями с помощью функций разрешений для зарегистрированных приложений [на портале Azure](https://portal.azure.com). [Область разрешений Azure AD API Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes) предоставляет сведения о том, что доступно для использования клиентским приложением.

## <a name="scenarios"></a>Сценарии

API Azure AD Graph поддерживает многие сценарии приложений. Ниже перечислены наиболее распространенные сценарии.

* **Бизнес-приложение (однотенантное)**. В этом сценарии разработчик работает на предприятие, у которого есть подписка Office 365. Разработчик создает веб-приложение, взаимодействующее с Azure AD для выполнения задач, таких как назначение лицензии пользователю. Эта задача требует доступа к API Azure AD Graph, поэтому разработчик регистрирует одноклиентское приложение в Azure AD и настраивает разрешения чтения и записи для API Azure AD Graph. Затем приложение настраивается для использования собственных учетных данных или учетных данных пользователя, вошедшего в систему, чтобы получить маркер для вызова API Azure AD Graph.
* **Программное обеспечение как услуга (мультитенантное)**. В этом сценарии независимый поставщик программного обеспечения разрабатывает и размещенное мультитенантное веб-приложение, которое предоставляет пользователю функции управления для других организаций, использующих Azure AD. Для этих функций требуется доступ к объектам каталога, поэтому приложение должно вызвать API Azure AD Graph. Разработчик регистрирует приложение в Azure AD, настраивает его, чтобы оно требовало разрешения чтения и записи для API Azure AD Graph, а затем включает внешний доступ, чтобы другие организации могли давать согласие на использование приложения в своем каталоге. Когда пользователь в другой организации впервые проходит проверку подлинности в приложении, он видит диалоговое окно с разрешениями, которые запрашивает приложение. Предоставление согласия позволит приложению получать запрошенные разрешения на API Graph Azure AD в каталоге пользователя. См. дополнительные сведения об [инфраструктуре предоставления согласия](consent-framework.md).

## <a name="next-steps"></a>Дальнейшие шаги

Чтобы начать использовать API Azure Active Directory Graph, см. в следующие статьи:

* [Краткое руководство по API Azure AD Graph](active-directory-graph-api-quickstart.md)
* [Документация по REST для Azure AD Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog)
