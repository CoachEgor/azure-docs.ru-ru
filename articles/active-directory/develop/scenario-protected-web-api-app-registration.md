---
title: Защищенный веб-API — Регистрация приложения | Azure
description: Сведения о создании защищенных веб-API и сведения, необходимые для регистрации приложения.
services: active-directory
documentationcenter: dev-center-name
author: jmprieur
manager: CelesteDG
editor: ''
ms.service: active-directory
ms.subservice: develop
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 05/07/2019
ms.author: jmprieur
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: 59af4e20c7fe838f7c725b47e45968941fa85cb7
ms.sourcegitcommit: 25a60179840b30706429c397991157f27de9e886
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/28/2019
ms.locfileid: "66254061"
---
# <a name="protected-web-api---app-registration"></a>Защищенный веб-API — Регистрация приложения

В этой статье рассматриваются особенности регистрации приложения для защищенного веб-API.

См. [Краткое руководство. Регистрация приложения в платформе Microsoft identity](quickstart-register-app.md) общие действия по регистрации приложения.

## <a name="accepted-token-version"></a>Принятая версия маркера

Конечная точка платформы удостоверений Microsoft может выдавать два вида токенов: v1.0 токенах и токенах версии 2.0. Дополнительные сведения об этих токенов в [маркеры доступа](access-tokens.md). Принятая версия маркера зависит от **поддерживаемые типы учетных записей** вы выбрали при создании приложения:

- Если значение **поддерживаемые типы учетных записей** — **учетные записи в любой каталог организации и личных учетных записей Майкрософт (например Скайп, Xbox, Outlook.com)** , принятая версия маркера будут версии 2.0.
- В противном случае принятая версия маркера будут версии 1.0.

После создания приложения, принятая версия маркера можно изменить, выполнив следующие действия:

1. На портале Azure выберите свое приложение, а затем выберите **манифеста** для вашего приложения.
2. В манифесте, поиск **«accessTokenAcceptedVersion»** и увидите, что его значение равно **2**. Это свойство позволяет узнать, что веб-API принимает маркеров версии 2.0 Azure AD. Если это **null**, принятая версия маркера будут версии 1.0.
3. Щелкните **Сохранить**.

> [!NOTE]
> Он работает в веб-API, чтобы решить, какие версии маркера (версии 1.0 или 2.0), он принимает. Когда клиенты запрашивают маркер для веб-API, использование конечной точки версии 2.0 платформы Microsoft identity, они получат маркер, указывающий, какая версия принимается веб-API.

## <a name="no-redirect-uri"></a>Нет URI перенаправления

Веб-API не требуется для регистрации URI перенаправления, так как пользователь не вошедшего в систему интерактивно.

## <a name="expose-an-api"></a>Предоставление API

— Это другой параметр, относящиеся к веб-API, предоставляемого API и областей, предоставляемых.

### <a name="resource-uri-and-scopes"></a>URI ресурса и области

Области обычно имеют вид `resourceURI/scopeName`. Для Microsoft Graph, области имеют сочетания клавиш, таких как `User.Read`, но эта строка представляет собой просто ярлыком для `https://graph.microsoft.com/user.read`.

Во время регистрации приложения необходимо определить следующие параметры:

- Один ресурс URI - по умолчанию на портал регистрации приложений рекомендует использовать `api://{clientId}`. Этого ресурса (URI) является уникальным, но он не является доступной для чтения. Вы можете его изменить, но убедитесь, что он является уникальным.
- Один или несколько областей

Области также отображаются на экране согласия, которые отображаются для конечных пользователей, которые используют приложение. Таким образом необходимо предоставлять соответствующие строки, описывающие область:

- Как видно пользователю
- Как явствует администратора клиента, который может предоставить согласие администратора

### <a name="how-to-expose-the-api"></a>Как предоставить доступ к API

1. Выберите **предоставляют API** раздела при регистрации приложения, и:
   1. Нажмите **Добавить группу**.
   1. Примите предложенное URI идентификатора приложения (api :// {clientId}), выбрав **сохранить и продолжить**.
   1. Задайте следующие параметры:
      - Для **имя области**, используйте `access_as_user`.
      - Для **кто может предоставить согласие**, убедитесь, что **Администраторы и пользователи** выбран параметр.
      - В **отображаемое имя согласия администратора**, тип `Access TodoListService as a user`.
      - В **описание согласия администратора**, тип `Accesses the TodoListService Web API as a user`.
      - В **отображаемое имя согласия пользователя**, тип `Access TodoListService as a user`.
      - В **описание согласия пользователя**, тип `Accesses the TodoListService Web API as a user`.
      - Сохранить **состояние** присвоено **включено**.
      - Выберите **добавить область**.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Конфигурации кода приложения](scenario-protected-web-api-app-configuration.md)
