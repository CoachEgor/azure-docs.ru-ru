---
title: Настройка приложения для доступа к интерфейсам веб-API с помощью платформы удостоверений Майкрософт
description: Сведения о настройке приложения, зарегистрированного с помощью платформы удостоверений Майкрософт для включения универсального кода ресурса (URI) перенаправления, учетных данных или разрешений для доступа к веб-API.
services: active-directory
documentationcenter: ''
author: rwike77
manager: CelesteDG
editor: ''
ms.service: active-directory
ms.subservice: develop
ms.devlang: na
ms.topic: quickstart
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 05/08/2019
ms.author: ryanwi
ms.custom: aaddev
ms.reviewer: aragra, lenalepa, sureshja
ms.collection: M365-identity-device-management
ms.openlocfilehash: 7b2f5331b22f6292b00c367c6abb8cd4f439a70c
ms.sourcegitcommit: 300cd05584101affac1060c2863200f1ebda76b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2019
ms.locfileid: "65413981"
---
# <a name="quickstart-configure-a-client-application-to-access-web-apis"></a>Краткое руководство. Настройка клиентского приложения для доступа к веб-API

Чтобы клиентское конфиденциальное или веб-приложение могло участвовать в потоке предоставления кода авторизации, требующего проверки подлинности (и получения маркера доступа), ему необходимо установить безопасные учетные данные. По умолчанию на портале Azure используется метод аутентификации "идентификатор клиента + секретный ключ".

Кроме того, чтобы клиент смог получить доступ к веб-API, предоставляемому приложением ресурсов (например, API Microsoft Graph), платформа согласия должна позволить ему получить требуемое разрешение в зависимости от запрошенных разрешений. По умолчанию все приложения могут выбирать разрешения из API Microsoft Graph. [Разрешение API Graph "Вход в систему и чтение профиля пользователя"](https://developer.microsoft.com/graph/docs/concepts/permissions_reference#user-permissions) будет выбрано по умолчанию. Можно выбрать из [двух типов разрешений](developer-glossary.md#permissions) для каждого требуемого веб-API:

* **Разрешения приложения**. Вашему клиентскому приложению требуется доступ к веб-API от своего имени (без контекста пользователя). Этот тип разрешения требует согласия администратора и недоступен для общедоступных (классических и мобильных) клиентских приложений.
* **Делегированное разрешение**. Вашему приложению требуется доступ к веб-API от лица выполнившего вход пользователя, но с ограничением доступа по выбранному разрешению. Этот тип разрешения может быть предоставлен пользователем, если только для разрешения не требуется согласие администратора.

  > [!NOTE]
  > Когда вы добавляете в приложение делегированные разрешения, согласие не предоставляется автоматически для всех пользователей в клиенте. Пользователи должны по-прежнему вручную предоставлять согласие на дополнительные делегированные разрешения в среде выполнения, если администратор не дает согласие от имени всех пользователей.

В этом кратком руководстве мы покажем, как настроить приложение для выполнения следующих задач:

* [Добавьте URI перенаправления в приложение](#add-redirect-uris-to-your-application).
* [Добавление учетных данных в веб-приложение](#add-credentials-to-your-web-application)
* [Добавьте разрешения для доступа к веб-API](#add-permissions-to-access-web-apis).

## <a name="prerequisites"></a>Предварительные требования

Чтобы приступить к работе, выполните следующие предварительные требования:

* Ознакомьтесь с общими сведениями о поддерживаемых [разрешениях и согласии](v2-permissions-and-consent.md). Для создания приложений, которые будут использовать другие пользователи или приложения, это важно понимать.
* Установите клиент, содержащий зарегистрированные приложения.
  * Если у вас нет зарегистрированных приложений, [ознакомьтесь со сведениями о регистрации приложений с помощью платформы удостоверений Майкрософт](quickstart-register-app.md).

## <a name="sign-in-to-the-azure-portal-and-select-the-app"></a>Войдите на портал Azure и выберите приложение.

Чтобы настроить приложение, выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com) с помощью личной учетной записи Майкрософт либо рабочей или учебной учетной записи.
1. Если учетная запись предоставляет доступ нескольким клиентам, выберите свою учетную запись в правом верхнем углу и нужный клиент Azure AD для этого сеанса портала.
1. В области навигации слева выберите службу **Azure Active Directory**, а затем выберите **Регистрация приложений**.
1. Найдите и выберите приложение, которое нужно настроить. После выбора приложения появится страница **Обзор** приложения или главная страница регистрации.
1. Выполните действия по настройке приложения для доступа к веб-API: 
    * [Добавьте URI перенаправления в приложение](#add-redirect-uris-to-your-application).
    * [Добавление учетных данных в веб-приложение](#add-credentials-to-your-web-application)
    * [Добавьте разрешения для доступа к веб-API](#add-permissions-to-access-web-apis).

## <a name="add-redirect-uris-to-your-application"></a>Добавление URI перенаправления в приложение

[![Добавление пользовательских URI перенаправления для общедоступных клиентских приложений и веб-приложений](./media/quickstart-update-azure-ad-app-preview/authentication-redirect-uris-expanded.png)](./media/quickstart-update-azure-ad-app-preview/authentication-redirect-uris-expanded.png#lightbox)

Чтобы добавить URI перенаправления в приложение, сделайте следующее:

1. На странице **Обзор** выберите раздел **Проверка подлинности**.

1. Чтобы добавить пользовательский URI перенаправления для общедоступных клиентских приложений и веб-приложений, сделайте следующее:

   1. Найдите раздел **URI перенаправления**.
   1. Выберите тип приложения, которое вы создаете — **Веб** или **общедоступного клиента (для мобильных и классических приложений)**.
   1. Введите URI перенаправления для приложения.
      * Для веб-приложений укажите основной URL-адрес приложения. Например, выполняемое на локальном компьютере веб-приложение может иметь адрес `http://localhost:31544`. Пользователи будут использовать этот URL-адрес для входа в приложение веб-клиента.
      * Для общедоступных приложений укажите URI, который использует AAD для возвращения ответов маркера. Укажите значение, используемое в вашем приложении, например https://MyFirstApp.

1. Чтобы выбрать из предлагаемых URI перенаправления для общедоступных клиентов (мобильные устройства, компьютеры), сделайте следующее:

    1. Найдите раздел о предлагаемых **URI перенаправления для общедоступных клиентов (мобильные устройства, компьютеры)**.
    1. Выберите соответствующий URI перенаправления для приложения с помощью флажков.

## <a name="add-credentials-to-your-web-application"></a>Добавление учетных данных в веб-приложение

[![Добавление сертификатов и секретов клиента](./media/quickstart-update-azure-ad-app-preview/credentials-certificates-secrets-expanded.png)](./media/quickstart-update-azure-ad-app-preview/credentials-certificates-secrets-expanded.png#lightbox)

Чтобы добавить учетные данные в веб-приложение, сделайте следующее:

1. На странице **Обзор** выберите раздел **сертификатов и секретов**.

1. Для добавления сертификата сделайте следующее:

    1. Выберите **Отправить сертификат**.
    1. Выберите файл, который вы хотите отправить. Он должен быть одного из следующих типов файлов: CER, PEM, CRT.
    1. Выберите **Добавить**.

1. Для добавления секрета клиента сделайте следующее:

    1. Выберите **New client secret** (Создать секрет клиента).
    1. Добавьте описание секрета клиента.
    1. Выберите длительность.
    1. Выберите **Добавить**.

> [!NOTE]
> Правый столбец будет содержать значение секрета клиента после сохранения изменений конфигурации. **Не забудьте скопировать значение** для использования в коде клиентского приложения, так как оно станет недоступно после закрытия страницы.

## <a name="add-permissions-to-access-web-apis"></a>Добавление разрешений для доступа к веб-API

[![Добавление разрешений API](./media/quickstart-update-azure-ad-app-preview/api-permissions-expanded.png)](./media/quickstart-update-azure-ad-app-preview/api-permissions-expanded.png#lightbox)

Чтобы добавить разрешения для доступа к API ресурсов из клиента, сделайте следующее:

1. На странице **Обзор** приложения выберите **Разрешения API**.
1. Нажмите кнопку **Add a permission** (Добавить разрешение).
1. По умолчанию в представлении будет доступен выбор из **API Майкрософт**. Выберите раздел API, который вас интересует:
    * **API Майкрософт** — позволяет выбрать разрешения для API Майкрософт, например Microsoft Graph.
    * **Интерфейсы API, используемые моей организацией** — позволяют выбрать разрешения для API, предоставленные организацией, или API, с которыми интегрирована организация.
    * **Мои API** — позволяет выбрать разрешения для API, которые вы предоставили.
1. После выбора API появится страница **запроса разрешений API**. Если интерфейс API предоставляет делегированные разрешения и разрешения приложения, выберите тип разрешения, который требуется приложению.
1. После выбора щелкните **Добавить разрешения**. Вы вернетесь на страницу **разрешений API**, где разрешения были сохранены и добавлены в таблицу.

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о других кратких руководствах по управлению приложениями см. в следующих ресурсах:

* [Краткое руководство: регистрация приложения с помощью платформы удостоверений Майкрософт (предварительная версия)](quickstart-register-app.md)
* [Краткое руководство. Настройка приложения для доступа к веб-API (предварительная версия)](quickstart-configure-app-expose-web-apis.md)
* [Краткое руководство. Изменение учетных записей, поддерживаемых приложением (предварительная версия)](quickstart-modify-supported-accounts.md)
* [Краткое руководство. Удаление приложения, зарегистрированного с помощью платформы удостоверений Майкрософт (предварительная версия)](quickstart-remove-app.md)

Дополнительные сведения о двух объектах Azure AD, представляющих зарегистрированное приложение, и о взаимосвязи между ними см. в разделе [Объекты приложения и субъекта-службы в Azure Active Directory (Azure AD)](app-objects-and-service-principals.md).

Дополнительные сведения о фирменной символике, которой следует пользоваться при разработке приложений в среде Azure Active Directory (Azure AD) см. в разделе [Рекомендации по фирменной символике для приложений](howto-add-branding-in-azure-ad-apps.md).
