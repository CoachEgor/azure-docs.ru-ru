---
title: Блокировка устаревших методов проверки подлинности в Azure Active Directory (AAD) с помощью условного доступа | Документация Майкрософт
description: Узнайте, как повысить уровень безопасности, блокируя аутентификацию прежней версии с помощью условного доступа Azure Active Directory.
services: active-directory
keywords: условный доступ к приложениям, условный доступ посредством Azure Active Directory, безопасный доступ к ресурсам организации, политики условного доступа
documentationcenter: ''
author: MicrosoftGuyJFlo
manager: daveba
editor: ''
ms.subservice: conditional-access
ms.assetid: 8c1d978f-e80b-420e-853a-8bbddc4bcdad
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 03/25/2019
ms.author: joflore
ms.reviewer: calebb
ms.collection: M365-identity-device-management
ms.openlocfilehash: 3d2841d3be584cae45ef49ad9ff20da8a232c366
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60355171"
---
# <a name="how-to-block-legacy-authentication-to-azure-ad-with-conditional-access"></a>Практическое руководство: Блокировка устаревших методов проверки подлинности в AAD с помощью условного доступа   

Чтобы предоставить пользователям удобный доступ к облачным приложениям, Azure Active Directory (AAD) поддерживает широкий набор протоколов проверки подлинности, часть из которых уже устарела. Проблема заключается в том, что устаревшие протоколы не поддерживают многофакторную проверку подлинности (MFA). Во многих средах MFA является стандартным методом защиты от кражи идентификаторов. 


Если вы готовы к тому, чтобы запретить в своей среде устаревшую проверку подлинности для повышения защищенности клиента, это можно выполнить с помощью условного доступа. В этой статье объясняется, как настроить политики условного доступа для блокирования устаревшей проверки подлинности в клиенте.



## <a name="prerequisites"></a>Технические условия

В данной статье предполагается, что вы знакомы с: 

- [основными понятиями](overview.md) условного доступа Azure AD; 
- [рекомендациями](best-practices.md) по настройке политик условного доступа на портале Azure.



## <a name="scenario-description"></a>Описание сценария

AAD поддерживает несколько широко распространенные протоколы проверки подлинности и авторизации, часть из которых уже устарела. Устаревшими считаются все протоколы, которые используют обычную проверку подлинности. Эти протоколы обычно не поддерживают какие-либо методы двухфакторной идентификации. Вот несколько примеров приложений, которые используют устаревшую проверку подлинности:

- устаревшие приложения Microsoft Office;

- любые приложения, поддерживающие почтовые протоколы POP, IMAP и SMTP.

В наше время одного фактора аутентификации (например, имени пользователя и пароля) уже недостаточно. Пароли работают плохо, так как их можно легко угадать, и люди не умеют выбирать правильные пароли. Пароли очень уязвимы к нескольким видам атак, таких как фишинг и подбор. Одним из простейших методов защиты от компрометации паролей является многофакторная проверка подлинности. При наличии многофакторной проверки подлинности злоумышленник не сможет пройти аутентификацию и получить доступ к данным, даже если получит пароль пользователя в свое распоряжение.

Как же запретить доступ к ресурсам клиента всем приложениям, которые используют устаревшую проверку подлинности? Мы рекомендуем заблокировать их при помощи политики условного доступа. Если потребуется, вы сможете разрешить отдельным пользователям использовать конкретные приложения с устаревшей проверкой подлинности из конкретных сетевых расположений.

Политики условного доступа применяются после того, как пользователь прошел однофакторную аутентификацию. Поэтому условный доступ не может предотвратить атаки типа "отказ в обслуживании" (DoS). Но этот механизм может использовать сигналы, поступающие от этих событий (например, уровень риска при входе, расположение запроса и т. д.), для определения доступа.




## <a name="implementation"></a>Реализация

В этом разделе объясняется, как настроить политику условного доступа для блокировки устаревшей проверки подлинности. 

### <a name="block-legacy-authentication"></a>Блокировка устаревших методов проверки подлинности 

В политике условного доступа можно задать условие, основанное на том, какие клиентские приложения используются для доступа к ресурсам. Учет клиентских приложений позволяет включить в область действия условия все приложения, которые используют устаревшие методы проверки подлинности. Для этого выберите **Другие клиенты** в параметре **Мобильные приложения и настольные клиенты**.

![Другие клиенты](./media/block-legacy-authentication/01.png)

Чтобы заблокировать доступ для этих приложений, выберите действие **Заблокировать доступ**.

![Заблокировать доступ](./media/block-legacy-authentication/02.png)


### <a name="select-users-and-cloud-apps"></a>Выбор пользователей и облачных приложений

Возможно, вы хотите заблокировать устаревшую проверку подлинности в вашей организации, выбрав следующие параметры:

- Все пользователи

- Все облачные приложения

- Заблокировать доступ
 

![Назначения](./media/block-legacy-authentication/03.png)



Но в Azure реализована защита, которая не позволит создать такую политику, которая противоречит [рекомендациям](best-practices.md) для политик условного доступа.
 
![Неподдерживаемая политика конфигурации](./media/block-legacy-authentication/04.png)


Такая защита нужна потому, что политика *блокировать всех пользователей и все облачные приложения* потенциально может запретить доступ к клиенту всей организации. Минимальные рекомендации требуют исключить из области действия политики хотя бы одного пользователя. Можно также исключить роль каталога.

![Неподдерживаемая политика конфигурации](./media/block-legacy-authentication/05.png)


Чтобы выполнить требования этой защитной функции, исключите из политики одного пользователя. В идеале у вас должно быть несколько [административных учетных записей AAD для аварийного доступа](../users-groups-roles/directory-emergency-access.md), для которых настроены исключения из этой политики.
 

## <a name="policy-deployment"></a>Развертывание политики

Прежде чем включить эту политику в рабочей среде, обдумайте и учтите следующие аспекты.
 
- **Учетные записи служб**. Определите, какие учетные записи пользователей используются в качестве учетных записей служб или устройств, например настроены на телефонах в конференц-зале. Создайте для этих учетных записей надежные пароли и добавьте их в группу исключений.
 
- **Отчеты о входах**. Просмотрите отчеты о входах и проверьте трафик от **других клиентов**. Определите, какие из них используются чаще всего и по каким причинам. Чаще всего такой трафик создается старыми клиентами Office, которые не используют современную проверку подлинности, или почтовыми приложениями сторонних производителей. Составьте план отказа от всех этих приложений, а если они не очень важны для работы, просто известите пользователей о том, что они больше не смогут использовать эти приложения.
 
Дополнительные сведения см. в разделе [Как развертывать новую политику?](best-practices.md#how-should-you-deploy-a-new-policy).



## <a name="what-you-should-know"></a>Необходимая информация

Блокировка доступа с использованием **других клиентов** также блокирует Exchange Online PowerShell с использованием основные функции auth.

Если задать для политики параметр **Другие клиенты**, доступ из определенных клиентов, например SPConnect, заблокируется для всей организации. Эта блокировка выполняется, так как клиенты предыдущих версий выполняют аутентификацию непредвиденным образом. Эта проблема не касается основных приложений Office, таких как клиенты Office прежних версий.

Чтобы политика вступила в силу, может потребоваться до 24 часов.

Вы можете настроить все доступные элементы управления для условия "другие клиенты", но для пользователей по сути ничего не изменится — доступ будет заблокирован.

Если заблокировать аутентификацию прежней версии с помощью условия других клиентов, вы можете также задать условие платформы и расположения устройства. Например, если вы только хотите заблокировать устаревшую аутентификацию для мобильных устройств, задайте условие **платформ устройств**, выбрав:

- Android

- iOS

- Windows Phone

![Неподдерживаемая политика конфигурации](./media/block-legacy-authentication/06.png)




## <a name="next-steps"></a>Дальнейшие действия

- Если вы плохо знакомы с настройкой политик условного доступа, ознакомьтесь со статьей [Quickstart: Require MFA for specific apps with Azure Active Directory conditional access](app-based-mfa.md) (Краткое руководство: требование многофакторной проверки подлинности для определенных приложений с помощью условного доступа Azure Active Directory).

- Дополнительные сведения о поддержке современной проверки подлинности см. в разделе [применение современной проверки подлинности для клиентских приложений Office 2013 и Office 2016](https://docs.microsoft.com/en-us/office365/enterprise/modern-auth-for-office-2013-and-2016) 
