---
title: Устранение неполадок условного доступа с помощью средства What If — Azure Active Directory
description: Где найти, какие политики условного доступа были применены, и почему
services: active-directory
ms.service: active-directory
ms.subservice: conditional-access
ms.topic: troubleshooting
ms.date: 07/03/2019
ms.author: joflore
author: MicrosoftGuyJFlo
manager: daveba
ms.reviewer: calebb
ms.collection: M365-identity-device-management
ms.openlocfilehash: 661afc08c76c6cde61b02a29a55b4a8bec932e21
ms.sourcegitcommit: fad3aaac5af8c1b3f2ec26f75a8f06e8692c94ed
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2020
ms.locfileid: "73175797"
---
# <a name="troubleshooting-conditional-access-using-the-what-if-tool"></a>Устранение неполадок условного доступа с помощью средства What If

[Средство What If](what-if-tool.md) в условном доступе является мощным при попытке понять, почему политика была или не была применена к пользователю в конкретном случае или если политика будет применена в известном состоянии.

Средство What If находится в **портал Azure** > **Azure Active Directory** > **Условный доступ** > **What If**.

![Средство What If условного доступа в состоянии по умолчанию](./media/troubleshoot-conditional-access-what-if/conditional-access-what-if-tool.png)

> [!NOTE]
> В настоящее время средство What If не оценивает политики в режиме «только отчет».

## <a name="gathering-information"></a>Сбор сведений

Для начала работы средства What If требуется только **пользователь** . 

Следующие дополнительные сведения являются необязательными, но позволят ограничить область для конкретных вариантов.

* Облачные приложения или действия
* IP-адрес 
* Country
* Платформа устройства
* Клиентские приложения (Предварительная версия)
* Состояние устройства (Предварительная версия) 
* Риск при входе

Эти сведения можно собирать из пользователя, устройства или журнала входа в Azure AD.

## <a name="generating-results"></a>Создание результатов

Введите критерии, собранные в предыдущем разделе, и выберите **What If** , чтобы создать список результатов. 

В любой момент можно выбрать параметр **сбросить** , чтобы очистить все входные условия и вернуться к состоянию по умолчанию.

## <a name="evaluating-results"></a>Оценка результатов

### <a name="policies-that-will-apply"></a>Политики, которые будут применяться

В этом списке будут показаны политики условного доступа, применяемые при выполнении условий. В список будут включены элементы управления предоставлением и сеансом, которые применяются. Примеры включают в себя необходимость многофакторной проверки подлинности для доступа к конкретному приложению.

### <a name="policies-that-will-not-apply"></a>Политики, которые не будут применяться

В этом списке отображаются политики условного доступа, которые не будут применяться при применении условий. Список будет включать все политики и причину, по которой они не применяются. К примерам относятся пользователи и группы, которые могут быть исключены из политики.

## <a name="use-case"></a>Вариант использования

Многие организации создают политики на основе сетевых расположений, разрешая надежные расположения и блокирующие расположения, в которых доступ не должен выполняться.

Для проверки правильности конфигурации администратор может использовать средство What If для имитации доступа, из расположения, которое должно быть разрешено, и из расположения, которое должно быть запрещено.

![What If средство, показывающее результаты с блокированным доступом](./media/troubleshoot-conditional-access-what-if/conditional-access-what-if-results.png)

В этом случае пользователю будет отказано в доступе к любому облачному приложению при поездках в Северной Корее, так как Contoso блокирует доступ из этого расположения.

Этот тест можно расширить, чтобы включить другие точки данных для ограничения области.

## <a name="next-steps"></a>Следующие шаги

* [Что такое условный доступ](overview.md)
* [Что такое защита идентификации Azure Active Directory?](../identity-protection/overview-v2.md)
* [Что такое удостоверение устройства?](../devices/overview.md)
* [Как это работает: служба Многофакторной идентификации Azure](../authentication/concept-mfa-howitworks.md)
