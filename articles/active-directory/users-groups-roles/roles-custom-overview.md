---
title: Роли пользовательского администратора в Active Directory Azure Документы Майкрософт
description: Предварительный просмотр пользовательских ролей Azure AD для делегирования управления идентификацией. Управление ролями Azure на портале Azure, PowerShell или Graph API.
services: active-directory
author: curtand
manager: daveba
ms.service: active-directory
ms.workload: identity
ms.subservice: users-groups-roles
ms.topic: article
ms.date: 04/22/2020
ms.author: curtand
ms.reviewer: vincesm
ms.custom: it-pro
ms.collection: M365-identity-device-management
ms.openlocfilehash: ae244d93d679199aaa0bd08891cd34d4ca3a2ddc
ms.sourcegitcommit: 09a124d851fbbab7bc0b14efd6ef4e0275c7ee88
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2020
ms.locfileid: "82085116"
---
# <a name="custom-administrator-roles-in-azure-active-directory-preview"></a>Роли пользовательского администратора в Active Directory Azure (предварительный просмотр)

В этой статье описывается, как понимать пользовательские роли Azure AD в active Directory Azure (Azure AD) с функциями управления доступом на основе ролей и областями ресурсов. Пользовательские роли Azure AD создают основные разрешения [встроенных ролей,](directory-assign-admin-roles.md)чтобы можно было создавать и организовывать собственные пользовательские роли. Такой подход позволяет предоставлять доступ более детально, чем встроенные роли, когда они необходимы. Этот первый выпуск пользовательских ролей Azure AD включает в себя возможность создания роли для присвоения разрешений для управления регистрацией приложений. Со временем будут добавлены дополнительные разрешения для ресурсов организации, таких как корпоративные приложения, пользователи и устройства.  

Кроме того, пользовательские роли Azure AD поддерживают назначения на основе ресурсов в дополнение к более традиционным назначениям в масштабах всей организации. Такой подход дает вам возможность предоставить доступ к управлению некоторыми ресурсами (например, регистрацией одного приложения) без предоставления доступа ко всем ресурсам (все регистрации приложений).

Контроль доступа на основе роли Azure AD — это общедоступная функция предварительного просмотра Azure AD и доступна с любым платным лицензионным планом Azure AD. Для получения дополнительной информации о предварительных просмотрах [см.](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)

## <a name="understand-azure-ad-role-based-access-control"></a>Понимание элемента управления доступом на основе AD на основе Azure

Предоставление разрешения с использованием пользовательских ролей Azure AD — это двухэтапный процесс, который включает в себя создание пользовательского определения ролей, а затем назначение его с помощью назначения ролей. Пользовательское определение роли — это набор разрешений, которые вы добавляете из заданный списка. Эти разрешения являются теми же разрешениями, которые используются во встроенных ролях.  

После создания определения роли можно назначить его пользователю, создав назначение ролей. Назначение ролей предоставляет пользователю разрешения в определении роли в определенной области. Этот двухступенчатый процесс позволяет создать единое определение ролей и назначить его много раз в разных областях. Область определяет набор ресурсов Azure AD, к доступу к ним имеет доступ ролевый член. Наиболее распространенной областью является общеорганизационная (общеорганизационная) область. Пользовательская роль может быть назначена в общеорганизационном диапазоне, что означает, что роль члена имеет разрешения на роль над всеми ресурсами в организации. Пользовательская роль также может быть назначена в области объектов. Примером области объектов может быть одно приложение. Одна и та же роль может быть назначена одному пользователю по всем приложениям в организации, а затем другому пользователю с областью действия только приложения Contoso Expense Reports.  

Встроенные и пользовательские роли Azure AD работают на концепциях, аналогичных [управлению доступом на основе ролей Azure.](../../role-based-access-control/overview.md) [Разница между этими двумя ролевой системой управления доступом](../../role-based-access-control/rbac-and-directory-admin-roles.md) заключается в том, что Azure RBAC контролирует доступ к ресурсам Azure, таким как виртуальные машины или хранилище с помощью Управления ресурсами Azure, а пользовательские роли Azure AD контролируют доступ к ресурсам Azure AD с помощью Графического API. Обе системы используют концепцию определений ролей и назначений ролей.

### <a name="how-azure-ad-determines-if-a-user-has-access-to-a-resource"></a>Как Azure AD определяет, имеет ли пользователь доступ к ресурсу

Ниже приведены высококачественные шаги, которые Azure AD использует для определения наличия доступа к ресурсу управления. Используйте эту информацию для устранения неполадок в доступе.

1. Пользователь (или директор службы) приобретает токен в конечную точку Microsoft Graph или Azure AD Graph.

1. Пользователь делает API вызов в Active Directory Azure (Azure AD) через Microsoft Graph или Azure AD Graph с помощью выданного маркера.

1. В зависимости от обстоятельств Azure AD выполняет одно из следующих действий:

    - Оценивает членство пользователя в роли на основе [утверждения wids](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) в токене доступа пользователя.
    - Получает все назначения ролей, которые применяются для пользователя, либо непосредственно, либо через членство в группе, на ресурс, на котором выполняется действие.

1. AD Azure определяет, включено ли действие в вызов API в роли, которые есть у пользователя для этого ресурса.
1. Если у пользователя нет роли с действием в запрашиваемой области, доступ не предоставляется. В противном случае доступ предоставляется.

### <a name="role-assignments"></a>Назначения ролей

Назначение ролей — это объект, который прикрепляет определение роли пользователю в определенной области для предоставления доступа к ресурсу Azure AD. Доступ предоставляется путем создания назначения ролей, а отзывается путем его удаления. По своей сути ролевые задания состоят из трех элементов:

- Пользователь (человек, у которого есть профиль пользователя в Active Directory Azure)
- Определение роли
- Область ресурсов

Создавать [ролевые назначения](roles-create-custom.md) можно с помощью портала Azure, Azure AD PowerShell или Графического API. Вы также можете [просмотреть назначения для пользовательской роли.](roles-view-assignments.md#view-the-assignments-of-a-role)

На приведенной ниже схеме показан пример назначения ролей. В этом примере Крису Грину была назначена пользовательская роль администратора регистрации приложений в области регистрации приложения Contoso Widget Builder. Назначение предоставляет Крису разрешения на роль администратора регистрации приложений только для этой конкретной регистрации приложения.

![Назначение ролей — это то, как выполняются разрешения и состоит из трех частей](./media/roles-custom-overview/rbac-overview.png)

### <a name="security-principal"></a>Субъект безопасности

Директор безопасности представляет пользователя, которым должен быть назначен доступ к ресурсам Azure AD. *Пользователь* — это человек, у которого есть профиль пользователя в Active Directory Azure.

### <a name="role"></a>Роль

Определение роли или роль — это набор разрешений. Определение роли перечисляет операции, которые могут быть выполнены на ресурсах Azure AD, такие как создание, чтение, обновление и удаление. В Azure AD существует два типа ролей:

- Встроенные роли, созданные корпорацией Майкрософт, которые не могут быть изменены.
- Пользовательские роли, созданные и управляемые вашей организацией.

### <a name="scope"></a>Область

Область — это ограничение разрешенных действий определенным ресурсом Azure AD в рамках назначения ролей. При присвоении роли можно указать область, ограничивающую доступ администратора к определенному ресурсу. Например, если вы хотите предоставить разработчику пользовательскую роль, но только для управления определенной регистрацией приложения, можно включить конкретную регистрацию приложения в качестве области в назначении роли.

  > [!Note]
  > Пользовательские роли могут быть назначены в области каталога и области ресурсов. Они пока не могут быть назначены в области административной группы.
  > Встроенные роли могут быть назначены в области каталога, а в некоторых случаях и в области административной группы. Они пока не могут быть назначены в области ресурсов Azure AD.

## <a name="required-license-plan"></a>Обязательный лицензионный план

[!INCLUDE [License requirement for using custom roles in Azure AD](../../../includes/active-directory-p1-license.md)]

## <a name="next-steps"></a>Дальнейшие действия

- Создавайте пользовательские ролевые назначения с [помощью портала Azure, Azure AD PowerShell и API Графика](roles-create-custom.md)
- [Просмотр заданий для пользовательской роли](roles-view-assignments.md#view-assignments-of-single-application-scope)
