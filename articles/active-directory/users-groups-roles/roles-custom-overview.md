---
title: Настраиваемые роли администратора в Azure Active Directory | Документация Майкрософт
description: Подробные сведения о функции настраиваемых ролей Azure AD в Azure Active Directory (Azure AD) с точки зрения управления доступом на основе ролей и областей ресурсов.
services: active-directory
author: curtand
manager: daveba
ms.service: active-directory
ms.workload: identity
ms.subservice: users-groups-roles
ms.topic: overview
ms.date: 09/11/2020
ms.author: curtand
ms.reviewer: vincesm
ms.custom: it-pro
ms.collection: M365-identity-device-management
ms.openlocfilehash: aac8713affd56d011e5e1f5e9326de501fb3ce67
ms.sourcegitcommit: eb6bef1274b9e6390c7a77ff69bf6a3b94e827fc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/05/2020
ms.locfileid: "90975556"
---
# <a name="custom-administrator-roles-in-azure-active-directory-preview"></a>Настраиваемые роли администратора в Azure Active Directory (предварительная версия)

В этой статье приведены общие сведения о функции настраиваемых ролей Azure AD в Azure Active Directory (Azure AD) с точки зрения управления доступом на основе ролей и областей ресурсов. Настраиваемые роли Azure AD отражают базовые разрешения [встроенных ролей](directory-assign-admin-roles.md), что позволяет создавать и упорядочивать собственные варианты ролей. Такой подход позволяет при необходимости настроить доступ с большей детализацией, чем при использовании встроенных ролей. Первый выпуск функции настраиваемых ролей Azure AD позволяет создать роль для назначения разрешений на управление регистрациями приложений. Со временем будут добавлены дополнительные разрешения для таких ресурсов организации, как корпоративные приложения, пользователи и устройства.  

Кроме того, помимо более традиционного метода назначения для всей организации, настраиваемые роли Azure AD поддерживают назначения отдельно для каждого ресурса. Такой подход дает возможность предоставить доступ для управления некоторыми ресурсами (например, одной регистрацией приложения), не предоставляя доступ ко всем ресурсам (всем регистрациям приложений).

Управление доступом на основе ролей в Azure AD — это предварительная версия функции, доступная в рамках любого платного плана лицензирования Azure AD. См. подробные сведения о [дополнительных условиях использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="understand-azure-ad-role-based-access-control"></a>Общие сведения об управлении доступом на основе ролей в Azure AD

Предоставление разрешений с помощью настраиваемых ролей Azure AD — это двухэтапный процесс, состоящий из создания определения настраиваемой роли и последующего ее назначения. Определение настраиваемой роли — это коллекция разрешений, добавляемых из предопределенного списка. Это те же разрешения, которые используются во встроенных ролях.  

После создания определения роли ее можно назначить пользователю, создав назначение роли. При назначении роли пользователю предоставляются разрешения, указанные в определении роли, в пределах заданной области. Этот двухэтапный процесс позволяет создать одно определение роли и назначить его несколько раз для разных областей. Область определяет набор ресурсов Azure AD, к которым у члена роли есть доступ. Наиболее распространенной областью является вся организация. Настраиваемая роль может быть назначена в масштабах всей организации. В этом случае у членов такой роли будут разрешения для всех ресурсов в этой организации. Областью назначения настраиваемой роли также может быть объект. Примером области в масштабах объекта может служить одно приложение. Одну и ту же роль можно назначить одному пользователю для всех приложений в организации, а затем другому пользователю, область которого охватывает только приложение "Отчеты о расходах Contoso".  

В отношении встроенных и настраиваемых ролей Azure AD применяются те же концепции, что и для [управления доступом Azure на основе ролей (Azure RBAC)](../../role-based-access-control/overview.md). [Эти две системы управления доступом на основе ролей отличаются тем](../../role-based-access-control/rbac-and-directory-admin-roles.md), что в случае управления доступом на основе ролей Azure для управления доступом к ресурсам Azure (например, виртуальным машинам или хранилищу) используется функция управления ресурсами Azure, а в случае настраиваемых ролей Azure AD для этого применяется API Graph. Для обеих систем используется концепция определений и назначений ролей.

### <a name="how-azure-ad-determines-if-a-user-has-access-to-a-resource"></a>Определение наличия у пользователя прав доступа к ресурсу в Azure AD

Ниже перечислены основные действия, выполняемые в Azure AD для определения наличия у вас доступа к ресурсу для управления. Используйте эти сведения для устранения неполадок, связанных с доступом.

1. Пользователь (или субъект-служба) получает маркер для Microsoft Graph или конечной точки Azure AD Graph.

1. Используя выданный маркер, пользователь выполняет вызов API в Azure Active Directory (Azure AD) через Microsoft Graph или Azure AD Graph.

1. В зависимости от ситуации Azure AD выполняет одно из следующих действий.

    - Оценивает членство пользователя в ролях на основе [утверждения wids](../develop/access-tokens.md) в маркере доступа пользователя.
    - Извлекает все назначения ролей пользователя, применимые (напрямую или через членство в группе) к ресурсу, с которым выполняется действие.

1. Azure AD определяет, разрешено ли действие в вызове API для имеющихся у пользователя ролей для данного ресурса.
1. Если у пользователя нет роли с действием в запрашиваемой области, доступ не предоставляется. В противном случае доступ предоставляется.

### <a name="role-assignments"></a>Назначения ролей

Назначение роли — это объект, который прикрепляет определение роли к пользователю в определенной области для предоставления доступа к ресурсам Azure AD. Доступ предоставляется путем создания назначения ролей, а отзывается путем его удаления. По сути, назначение ролей состоит из трех элементов.

- Пользователь (человек, имеющий профиль пользователя в Azure Active Directory)
- Определение роли
- Область ресурса

[Создавать назначения ролей](roles-create-custom.md) можно с помощью портала Azure, Azure AD PowerShell или API Graph. Можно также [просмотреть назначения для настраиваемой роли](roles-view-assignments.md#view-the-assignments-of-a-role).

На приведенной ниже схеме показан пример назначения ролей. В этом примере Ивану Воронкову назначена настраиваемая роль администратора регистрации приложений в области регистрации приложения "Построитель мини-приложений Contoso". Назначение предоставляет Ивану разрешения роли администратора регистрации приложений только для данной конкретной регистрации приложения.

![Назначение ролей определяет, как применяются разрешения, и состоит из трех частей](./media/roles-custom-overview/rbac-overview.png)

### <a name="security-principal"></a>Субъект безопасности

Субъект безопасности представляет пользователя, которому будет назначен доступ к ресурсам Azure AD. *Пользователь* — это человек, имеющий профиль пользователя в Azure Active Directory.

### <a name="role"></a>Роль

Определение роли (или сама роль) представляет собой коллекцию разрешений. В определении роли перечисляются операции, которые можно выполнить с ресурсами Azure AD, например создание, чтение, обновление и удаление. В Azure AD существует два типа ролей:

- встроенные роли, созданные корпорацией Майкрософт, которые невозможно изменить;
- настраиваемые роли, созданные вашей организацией и находящиеся под ее управлением.

### <a name="scope"></a>Область

Область — это границы допустимости действий, разрешенных для конкретного ресурса Azure AD, в рамках назначения роли. При назначении роли можно указать область, которая разрешает доступ с правами администратора только для определенного ресурса. Например, если вы хотите предоставить разработчику настраиваемую роль, но только для управления регистрацией конкретного приложения, можно указать регистрацию конкретного приложения в качестве области в назначении роли.

  > [!Note]
  > Для настраиваемых ролей областью может служить каталог и ресурс. Административная единица пока не может использоваться в качестве области при их назначении.
  > При назначении встроенных ролей областью может быть каталог, а в некоторых случаях — административная единица. Ресурсы Azure AD пока не могут служить областью для ролей этого типа.

## <a name="required-license-plan"></a>Требуемый план лицензирования

[!INCLUDE [License requirement for using custom roles in Azure AD](../../../includes/active-directory-p1-license.md)]

## <a name="next-steps"></a>Дальнейшие действия

- Создайте назначения настраиваемых ролей с помощью [портала Azure, Azure AD PowerShell или API Graph](roles-create-custom.md).
- [Просмотрите назначения для настраиваемой роли](roles-view-assignments.md#view-assignments-of-single-application-scope).