---
title: Добавление настраиваемых атрибутов для самостоятельной регистрации потоков в Azure AD
description: Узнайте, как настроить атрибуты для потоков пользователей самостоятельной регистрации.
services: active-directory
author: msmimart
manager: celestedg
ms.service: active-directory
ms.subservice: B2B
ms.topic: how-to
ms.date: 06/16/2020
ms.author: mimart
ms.custom: it-pro
ms.collection: M365-identity-device-management
ms.openlocfilehash: e64ab70fed13d4ca907b2bfb3aa448acdedc39e9
ms.sourcegitcommit: 9b8425300745ffe8d9b7fbe3c04199550d30e003
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2020
ms.locfileid: "92441459"
---
# <a name="define-custom-attributes-for-user-flows-preview"></a>Определение настраиваемых атрибутов для потоков пользователя (предварительная версия)

> [!NOTE]
> Функция настраиваемых атрибутов пользователя — это функция, которая предоставляется в общедоступной предварительной версии в Azure Active Directory. См. подробные сведения о [дополнительных условиях использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Для каждого приложения могут существовать различные требования к информации, которую необходимо получить во время регистрации. Azure AD поставляется со встроенным набором информации, сохраняемой в атрибутах, например "Given Name", "Surname", "City" и "Postal Code". С помощью Azure AD можно расширить набор атрибутов, хранящихся в гостевой учетной записи, когда внешний пользователь подписывается через пользовательский поток.

Вы можете создать настраиваемые атрибуты на портале Azure и использовать их в потоке самообслуживания пользователей для самостоятельной регистрации. Эти атрибуты можно также считывать и записывать с помощью [Microsoft API Graph](../../active-directory-b2c/manage-user-accounts-graph-api.md). Microsoft Graph API поддерживает создание и обновление пользователя с помощью атрибутов расширения. Атрибуты расширений в API Graph именуются по соглашению `extension_<extensions-app-id>_attributename`. Пример:

```JSON
"extension_831374b3bd5041bfaa54263ec9e050fc_loyaltyNumber": "212342"
```

`<extensions-app-id>`Относится только к вашему клиенту. Чтобы найти этот идентификатор, перейдите в раздел Azure Active Directory > Регистрация приложений > все приложения. Найдите приложение, которое начинается с AAD-Extensions-App, и выберите его. На странице Обзор приложения Обратите внимание на идентификатор приложения (клиента).

## <a name="create-a-custom-attribute"></a>Создание настраиваемого атрибута

1. Войдите на [портал Azure](https://portal.azure.com) с учетной записью администратора Azure AD.
2. В разделе **Службы Azure** щелкните **Azure Active Directory**.
3. В меню слева щелкните **Внешние удостоверения**.
4. Выберите **Настраиваемые атрибуты пользователя (предварительная версия)** . Будут перечислены доступные атрибуты пользователя.

   ![Выберите атрибуты пользователя для регистрации](media/user-flow-add-custom-attributes/user-attributes.png)

5. Чтобы добавить атрибут, нажмите **Добавить**.
6. В области **Добавить атрибут** выберите следующие значения:

   - **Имя** — укажите имя настраиваемого атрибута (например, "Shoesize").
   - **Тип данных** — выберите тип данных (**Строковый**, **Логический** или **Int**).
   - **Описание** — при необходимости введите описание настраиваемого атрибута для внутреннего использования. Это описание невидимо для пользователя.

   ![Добавление атрибута](media/user-flow-add-custom-attributes/add-an-attribute.png)

7. Нажмите кнопку **создания**.

Теперь настраиваемый атрибут доступен в списке атрибутов пользователя и может использоваться в ваших потоках пользователей. Пользовательский атрибут создается только при первом использовании в любом потоке пользователя, но не при добавлении в список атрибутов пользователя.

После создания нового пользователя с помощью пользовательского потока, использующего только что созданный настраиваемый атрибут, объект можно запросить в [Microsoft Graph Explorer](https://developer.microsoft.com/graph/graph-explorer). Теперь в списке атрибутов, собираемых во время регистрации в объекте пользователя, должно отобразиться **ShoeSize** . Вы можете вызвать API Graph из приложения, чтобы получить данные из этого атрибута после добавления в объект User.

## <a name="next-steps"></a>Дальнейшие действия

[Добавление потока для самостоятельной регистрации пользователей в приложении](self-service-sign-up-user-flow.md)