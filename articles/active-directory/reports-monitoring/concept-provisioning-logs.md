---
title: Журналы подготовки на портале Azure Active Directory (Предварительная версия) | Документация Майкрософт
description: Общие сведения о подготовке отчетов об активности на портале Azure Active Directory
services: active-directory
documentationcenter: ''
author: MarkusVi
manager: daveba
editor: ''
ms.assetid: 4b18127b-d1d0-4bdc-8f9c-6a4c991c5f75
ms.service: active-directory
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: identity
ms.subservice: report-monitor
ms.date: 11/04/2019
ms.author: markvi
ms.reviewer: arvinh
ms.collection: M365-identity-device-management
ms.openlocfilehash: 38cffdcc9c99cdec2aeac8bf6fe1dc1575691c8d
ms.sourcegitcommit: 4f1c7df04a03856a756856a75e033d90757bb635
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87924036"
---
# <a name="provisioning-reports-in-the-azure-active-directory-portal-preview"></a>Подготовка отчетов на портале Azure Active Directory (Предварительная версия)

Архитектура создания отчетов в Azure Active Directory (Azure AD) состоит из следующих компонентов:

- **Действие** 
    - **События входа**. Информация об использовании управляемых приложений и действиях входа пользователей.
    - **Журналы аудита**  -  [Журналы аудита](concept-audit-logs.md) предоставляют сведения о действиях пользователей и управления группами, управляемых приложениях и действиях с каталогами.
    - **Журналы подготовки** — укажите системные действия для пользователей, групп и ролей, подготовленных службой подготовки Azure AD. 

- **Безопасность** 
    - **Рискованные входы** . [рискованный вход](concept-risky-sign-ins.md) — это индикатор попытки входа, которая могла быть выполнена пользователем, который не является законным владельцем учетной записи пользователя.
    - **Пользователи, помеченные для риска** — [рискованный пользователь](concept-user-at-risk.md) является индикатором для учетной записи пользователя, которая могла быть скомпрометирована.

В этом разделе содержится обзор отчета о подготовке.

## <a name="prerequisites"></a>Предварительные условия

### <a name="who-can-access-the-data"></a>Кто имеет доступ к данным?
* Пользователи в роли "администратор безопасности", "читатель отчетов", "читатель отчета", "Администратор приложения" и "Администратор облачных приложений"
* Глобальные администраторы.


### <a name="what-azure-ad-license-do-you-need-to-access-provisioning-activities"></a>Какая лицензия Azure AD необходима для доступа к действиям по подготовке?

С вашим клиентом должна быть связана лицензия Azure AD Premium, чтобы просмотреть отчет о действиях по подготовке. Чтобы обновить выпуск Azure Active Directory, ознакомьтесь со статьей [Регистрация для работы с выпусками Azure Active Directory Premium](../fundamentals/active-directory-get-started-premium.md). 

## <a name="provisioning-logs"></a>Подготовка журналов

Журналы подготовки предоставляют ответы на следующие вопросы:

* Какие группы были успешно созданы в ServiceNow?
* Как были импортированы роли из Amazon Web Services?
* Какие пользователи были неудачно созданы в DropBox?

Чтобы получить доступ к журналам подготовки, выберите **журналы подготовки** в разделе **мониторинг** колонки **Azure Active Directory** в [портал Azure](https://portal.azure.com). Для отображения некоторых записей подготовки на портале может потребоваться до двух часов.

![Подготовка журналов](./media/concept-provisioning-logs/access-provisioning-logs.png "Подготовка журналов")


Журнал подготовки имеет представление списка по умолчанию, которое показывает:

- Удостоверение
- Действие
- Исходная система
- Целевая система
- Состояние
- Дата


![Столбцы по умолчанию](./media/concept-provisioning-logs/default-columns.png "Столбцы по умолчанию")

Можно настроить представление списка, щелкнув **столбцы** на панели инструментов.

![Выбор столбца](./media/concept-provisioning-logs/column-chooser.png "Выбор столбца")

Здесь вы можете добавить или удалить отображаемые поля.

![Доступные столбцы](./media/concept-provisioning-logs/available-columns.png "Доступные столбцы")

Чтобы получить более подробную информацию, выберите элемент в списке.

![Подробные сведения](./media/concept-provisioning-logs/steps.png "Filter")


## <a name="filter-provisioning-activities"></a>Фильтрация действий по подготовке

Вы можете отфильтровать данные подготовки. Некоторые значения фильтров заполняются динамически на основе клиента. Если, например, у вас нет каких-либо событий создания в клиенте, параметр фильтра создать не будет.
В представлении по умолчанию можно выбрать следующие фильтры:

- Идентификация
- Дата
- Состояние
- Действие


![Filter](./media/concept-provisioning-logs/default-filter.png "Filter")

Фильтр **удостоверений** позволяет указать имя или удостоверение, которое вас интересуют. Этим удостоверением может быть пользователь, группа, роль или другой объект. Можно выполнить поиск по имени или ИДЕНТИФИКАТОРу объекта. Идентификатор зависит от сценария. Например, при подготовке объекта из Azure AD в SalesForce идентификатор источника — это идентификатор объекта пользователя в Azure AD, а TargetID — идентификатор пользователя в Salesforce. При подготовке от Workday к Active Directoryу идентификатор источника — это идентификатор сотрудника рабочего дня Workday. Обратите внимание, что имя пользователя может не всегда присутствовать в столбце идентификаторов. Всегда будет один идентификатор. 


Фильтр **дат** позволяет определить интервал времени для возвращаемых данных.  
Возможны следующие значения:

- 1 месяц
- 7 дней
- 30 дней
- 24 часа
- Настраиваемый интервал

При выборе настраиваемого временного интервала можно настроить начальную и конечную даты.


В фильтре **Состояние** можете выбрать:

- Все
- Успешно
- Failure
- Пропущено



Фильтр **действий** позволяет фильтровать:

- Создание 
- Обновление
- DELETE
- Отключить
- Другие

Кроме того, в фильтры представления по умолчанию можно также задать следующие фильтры:

- Идентификатор задания
- Идентификатор цикла
- Идентификатор изменения
- Идентификатор источника
- Идентификатор целевого объекта
- Приложение


![Выбор поля](./media/concept-provisioning-logs/add-filter.png "Выбор поля")


- **Идентификатор задания** — уникальный идентификатор задания, связанный с каждым приложением, для которого включена подготовка.   

- **ИД цикла** — уникальный идентификатор цикла подготовки. Вы можете предоставить этот идентификатор для поддержки, чтобы найти цикл, в котором произошло это событие.

- **Изменить идентификатор** — уникальный идентификатор события подготовки. Вы можете поделиться этим ИДЕНТИФИКАТОРом для поддержки поиска события подготовки.   


- **Исходная система** — позволяет указать, откуда будет подготовлено удостоверение. Например, при подготовке объекта из Azure AD в ServiceNow исходная система — это Azure AD. 

- **Целевая система** — позволяет указать, куда будет подготовлено удостоверение. Например, при подготовке объекта из Azure AD в ServiceNow используется целевая система ServiceNow. 

- **Приложение** — позволяет отображать только записи приложений с отображаемым именем, содержащим определенную строку.

 

## <a name="provisioning-details"></a>Сведения о подготовке 

При выборе элемента в представлении списка подготовки вы получите дополнительные сведения об этом элементе.
Подробные сведения группируются по следующим категориям:

- Этапы

- Устранение неполадок и рекомендации

- Измененные свойства

- Сводка


![Filter](./media/concept-provisioning-logs/provisioning-tabs.png "Вкладки")



### <a name="steps"></a>Этапы

На вкладке **шаги** описаны действия по подготовке объекта. Подготовка объекта может состоять из четырех шагов: 

- Импорт объекта
- Определить, находится ли объект в области
- Совпадение между источником и целевым объектом
- Инициализация объекта (выполнение действия. это может быть создание, обновление, удаление или отключение)



![Filter](./media/concept-provisioning-logs/steps.png "Filter")


### <a name="troubleshoot-and-recommendations"></a>Устранение неполадок и рекомендации


На вкладке **Диагностика и рекомендации** содержится код и причина ошибки. Сведения об ошибке доступны только в случае сбоя. 


### <a name="modified-properties"></a>Измененные свойства

**Измененные свойства** показывают старое значение и новое значение. В случаях, когда нет старого значения, столбец старого значения остается пустым. 


### <a name="summary"></a>Сводка

На вкладке **Сводка** представлен обзор того, что случилось и идентификаторы для объекта в исходной и целевой системе. 

## <a name="what-you-should-know"></a>Учитываемые аспекты

- Портал Azure сохраняет данные о подготовке в течение 30 дней, если у вас выпуск Premium и 7 дней, если у вас есть бесплатный выпуск.

- Атрибут идентификатора изменения можно использовать в качестве уникального идентификатора. Это, например, полезно при взаимодействии со службой поддержки продукта.

- Сейчас нет возможности скачивания данных подготовки.

- В настоящее время log Analytics не поддерживается.

- При доступе к журналам подготовки из контекста приложения они не выполняют автоматическую фильтрацию событий для конкретного приложения, как это делает журналы аудита.

## <a name="error-codes"></a>Коды ошибок

Используйте таблицу ниже, чтобы лучше понять, как устранять ошибки, которые могут находиться в журналах подготовки. Для получения сведений об отсутствующих кодах ошибок оставьте отзыв, используя ссылку в нижней части этой страницы. 

|Код ошибки|Описание|
|---|---|
|Конфликт, Ентриконфликт|Исправьте конфликтующие значения атрибутов в Azure AD или приложении или проверьте соответствующую конфигурацию атрибута, если конфликтующая учетная запись пользователя должна быть сопоставлена и сделана. Дополнительные сведения о настройке соответствующих атрибутов см. в следующей [документации](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes) .|
|TooManyRequests|Целевое приложение отклонило попытку обновления пользователя, так как оно перегружено и получает слишком много запросов. Ничего делать не нужно. Эта попыток будет автоматически прекращена. Корпорация Майкрософт также уведомила об этой ошибке.|
|InternalServerError |Целевое приложение вернуло непредвиденную ошибку. Возможно, существует проблема службы с целевым приложением, препятствующее его работе. Эта попытки будет автоматически прекращена через 40 минут.|
|ИнсуффиЦиентригхтс, Месодноталловед, Нотпермиттед, несанкционированный| Azure AD удалось пройти проверку подлинности в целевом приложении, но ему не разрешено выполнять обновление. Ознакомьтесь с инструкциями, предоставленными целевым приложением, а также с [руководством](https://docs.microsoft.com/azure/active-directory/saas-apps/tutorial-list)по соответствующему приложению.|
|унпроцессаблинтити|Целевое приложение вернуло непредвиденный ответ. Конфигурация целевого приложения может быть неправильной, либо может возникнуть проблема с целевым приложением, которое препятствует работе этого приложения.|
|вебексцептионпротоколеррор |При подключении к целевому приложению произошла ошибка протокола HTTP. Ничего делать не нужно. Эта попытки будет автоматически прекращена через 40 минут.|
|инвалиданчор|Пользователь, который ранее был создан или сопоставлен с помощью службы подготовки, больше не существует. Убедитесь, что пользователь существует. Чтобы принудительно выполнить повторное сопоставление всех пользователей, используйте MS API Graph для [перезапуска задания](https://docs.microsoft.com/graph/api/synchronization-synchronizationjob-restart?view=graph-rest-beta&tabs=http). Обратите внимание, что перезапуск подготовки приведет к запуску начального цикла, выполнение которого может занять некоторое время. Он также удаляет кэш, используемый службой подготовки, что означает, что все пользователи и группы в клиенте должны повторно оцениваться, а некоторые события подготовки могут быть удалены.|
|NotImplemented | Целевое приложение вернуло непредвиденный ответ. Возможно, Конфигурация приложения неверна или существует проблема с целевым приложением, которое препятствует работе этого приложения. Ознакомьтесь с инструкциями, предоставленными целевым приложением, а также с [руководством](https://docs.microsoft.com/azure/active-directory/saas-apps/tutorial-list)по соответствующему приложению. |
|Мандаторифиелдсмиссинг, Миссингвалуес |Не удалось создать пользователя, так как отсутствуют необходимые значения. Исправьте отсутствующие значения атрибутов в исходной записи или проверьте конфигурацию соответствующего атрибута, чтобы убедиться, что обязательные поля не пропущены. Дополнительные [сведения](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes) о настройке соответствующих атрибутов.|
|счемааттрибутенотфаунд |Не удалось выполнить операцию, поскольку был указан атрибут, не существующий в целевом приложении. См. [документацию](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes) по настройке атрибутов и правильность настройки.|
|InternalError |Произошла внутренняя ошибка службы в службе подготовки Azure AD. Ничего делать не нужно. Эта попытка будет автоматически повторена через 40 минут.|
|InvalidDomain |Не удалось выполнить операцию из-за значения атрибута, содержащего недопустимое имя домена. Обновите доменное имя пользователя или добавьте его в список разрешенных в целевом приложении. |
|Время ожидания |Не удалось выполнить операцию, так как целевое приложение заняло слишком много времени для ответа. Ничего делать не нужно. Эта попытка будет автоматически повторена через 40 минут.|
|лиценселимитексцеедед|Не удалось создать пользователя в целевом приложении из-за отсутствия доступных лицензий для этого пользователя. Либо получите дополнительные лицензии для целевого приложения, либо проверьте назначения пользователей и конфигурацию сопоставления атрибутов, чтобы убедиться, что им назначены правильные атрибуты.|
|дупликатетаржетентриес  |Не удалось выполнить операцию, так как найдено более одного пользователя в целевом приложении с настроенными атрибутами сопоставления. Удалите дублирующего пользователя из целевого приложения или измените сопоставления атрибутов, как описано [здесь](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes).|
|дупликатесаурцеентриес | Не удалось выполнить операцию, так как обнаружено несколько пользователей с настроенными соответствующими атрибутами. Удалите дублирующего пользователя или перенастройте сопоставления атрибутов, как описано [здесь](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes).|

## <a name="next-steps"></a>Дальнейшие действия

* [Проверка состояния подготовки пользователей](https://docs.microsoft.com/azure/active-directory/app-provisioning/application-provisioning-when-will-provisioning-finish-specific-user)
* [Проблема при настройке подготовки пользователей для приложения из коллекции Azure AD](https://docs.microsoft.com/azure/active-directory/manage-apps/application-provisioning-config-problem)


