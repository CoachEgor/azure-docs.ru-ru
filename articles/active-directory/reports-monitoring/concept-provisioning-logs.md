---
title: Подготовка журналов на портале Active Directory Azure (предварительный просмотр) Документы Майкрософт
description: Введение в подготовку отчетов о деятельности на портале Active Directory Azure
services: active-directory
documentationcenter: ''
author: MarkusVi
manager: daveba
editor: ''
ms.assetid: 4b18127b-d1d0-4bdc-8f9c-6a4c991c5f75
ms.service: active-directory
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: identity
ms.subservice: report-monitor
ms.date: 11/04/2019
ms.author: markvi
ms.reviewer: arvinh
ms.collection: M365-identity-device-management
ms.openlocfilehash: c6e0c697f9ab9796feade9b4d5c2a64794f3980b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "73612800"
---
# <a name="provisioning-reports-in-the-azure-active-directory-portal-preview"></a>Подготовка отчетов на портале Active Directory Azure (предварительный просмотр)

Архитектура создания отчетов в Azure Active Directory (Azure AD) состоит из следующих компонентов:

- **Действие** 
    - **События входа**. Информация об использовании управляемых приложений и действиях входа пользователей.
    - **Журналы аудита** - [Аудит](concept-audit-logs.md) предоставляют системную информацию о деятельности пользователей и управлении группами, управляемых приложениях и действиях каталогов.
    - **Создание журналов** - Предоставление системной активности о пользователях, группах и ролях, подготовленных службой предоставления AD Azure AD. 

- **Безопасность** 
    - **Рискованные входе** - [рискованный входе](concept-risky-sign-ins.md) является индикатором попытки входной связи, которая могла быть выполнена кем-то, кто не является законным владельцем учетной записи пользователя.
    - **Пользователи, помеченные для риска** - [рискованный пользователь](concept-user-at-risk.md) является индикатором для учетной записи пользователя, которая может быть скомпрометирована.

Эта тема дает вам обзор отчета о подготовке.

## <a name="prerequisites"></a>Предварительные требования

### <a name="who-can-access-the-data"></a>Кто может получить доступ к данным?
* Пользователи в роли администратора безопасности, чтения с безопасностью, чтения отчетов, администратора приложений и администратора облачных приложений
* Глобальные администраторы.


### <a name="what-azure-ad-license-do-you-need-to-access-provisioning-activities"></a>Какая лицензия Azure AD необходима для доступа к мероприятиям по подготовке?

У арендатора должна быть лицензия Azure AD Premium, связанная с ним, чтобы увидеть отчет о деятельности. Чтобы обновить выпуск Azure Active Directory, ознакомьтесь со статьей [Регистрация для работы с выпусками Azure Active Directory Premium](../fundamentals/active-directory-get-started-premium.md). 

## <a name="provisioning-logs"></a>Подготовка журналов

В журналах подготовки приведены ответы на следующие вопросы:

* Какие группы были успешно созданы в ServiceNow?
* Как были импортированы роли из веб-служб Amazon?
* Какие пользователи были безуспешно созданы в DropBox?

Вы можете получить доступ к журналам подготовки, выбрав **журналы подготовки** в разделе **Мониторинг** лезвия **Active Directory Azure** на [портале Azure.](https://portal.azure.com) Для показа некоторых записей на портале может уйти до двух часов.

![Подготовка журналов](./media/concept-provisioning-logs/access-provisioning-logs.png "Подготовка журналов")


В журнале подготовки есть представление списка по умолчанию, показующее:

- Идентификация
- Акция
- Исходная система
- Целевая система
- Статус
- Дата


![Столбцы по умолчанию](./media/concept-provisioning-logs/default-columns.png "Столбцы по умолчанию")

Вы можете настроить представление списка, нажав **столбцы** в панели инструментов.

![Выбор колонны](./media/concept-provisioning-logs/column-chooser.png "Выбор колонны")

Здесь вы можете добавить или удалить отображаемые поля.

![Доступные столбцы](./media/concept-provisioning-logs/available-columns.png "Доступные столбцы")

Чтобы получить более подробную информацию, выберите элемент в списке.

![Подробная информация](./media/concept-provisioning-logs/steps.png "Filter")


## <a name="filter-provisioning-activities"></a>Мероприятия по подготовке фильтров

Чтобы сузить данные до уровня, который работает для вас, можно отфильтровать данные подготовки с помощью следующих полей по умолчанию. Обратите внимание, что значения в фильтрах динамически заселены в зависимости от вашего арендатора. Если, например, в арендаторе нет событий, возможно, не будет возможности фильтра для создания.

- идентификации
- Действие
- Исходная система
- Целевая система
- Состояние
- Дата


![Фильтр](./media/concept-provisioning-logs/filter.png "Filter")

Фильтр **идентификации** позволяет указать имя или удостоверение личности, которые вас волнуют. Эта идентификация может быть пользователем, группой, ролью или другим объектом. Вы можете искать по имени или идентификатору объекта. Идентификатор варьируется в зависимости от сценария. Например, при подготовке объекта от Azure AD до SalesForce идентификатор исходного кода является идентификатором объекта пользователя в Azure AD, в то время как TargetID — это идентификатор пользователя в Salesforce. При подготовке от рабочего дня к активному каталогу идентификатор исходного кода является идентификатором работника Workday. Обратите внимание, что имя пользователя не всегда может присутствовать в столбце Identity. Всегда будет один идентификатор. 

Фильтр **системы «Источник»** позволяет указать, откуда предоставляется удостоверение личности. Например, при подготовке объекта от Azure AD до ServiceNow система «Источник» является Azure AD. 

Фильтр **Целевой системы** позволяет указать, где устанавливается личность. Например, при подготовке объекта от Azure AD до ServiceNow целевая система — это ServiceNow. 

В фильтре **Состояние** можете выбрать:

- All
- Успешно
- Failure
- Пропущено

Фильтр **действия** позволяет фильтровать:

- Создание 
- Update
- DELETE
- Отключить
- Другие

Фильтр **дат** позволяет определить интервал времени для возвращаемых данных.  
Возможны следующие значения:

- 1 месяц
- 7 дней
- 30 дней
- 24 часа
- Настраиваемый интервал

При выборе пользовательского таймфрейма можно настроить дату начала и дату окончания.


В дополнение к полям по умолчанию, при выборе, вы также можете включить следующие поля в фильтр:

- **Идентификатор вакансий** - уникальный идентификатор вакансий связан с каждым приложением, которое вы включили для подготовки.   

- **Идентификатор цикла** - Уникально определяет цикл подготовки. Вы можете поделиться этим идентификатором для поддержки, чтобы найти цикл, в котором произошло это событие.

- **Идентификатор изменения** - Уникальный идентификатор для события подготовки. Вы можете поделиться этим идентификатором для поддержки, чтобы найти событие подготовки.   



  

## <a name="provisioning-details"></a>Подробная информация о подготовке 

При выборе элемента в представлении списка подготовки вы получаете более подробную информацию об этом элементе.
Детали сгруппированы по следующим категориям:

- Шаги

- Устранение неполадок и рекомендации

- Измененные свойства

- Сводка


![Фильтр](./media/concept-provisioning-logs/provisioning-tabs.png "Вкладки")



### <a name="steps"></a>Шаги

Вкладка **Steps** описывает шаги, предпринятые для предоставления объекта. Подготовка объекта может состоять из четырех этапов: 

- Объект импорта
- Определить, находится ли объект в области
- Матч объекта между источником и целью
- Объект обеспечения (принять меры - это может быть создание, обновление, удаление или отключить)



![Фильтр](./media/concept-provisioning-logs/steps.png "Filter")


### <a name="troubleshoot-and-recommendations"></a>Устранение неполадок и рекомендации


Вкладка **устранения неполадок и рекомендаций** предоставляет код ошибки и причину. Информация об ошибке доступна только в случае сбоя. 


### <a name="modified-properties"></a>Измененные свойства

Измененные **свойства** показывают старое значение и новое значение. В тех случаях, когда старое значение отсутствует, старая колонка значения является пустой. 


### <a name="summary"></a>Сводка

Вкладка **резюме** содержит обзор того, что произошло, и идентификаторы объекта в системе источника и целевого объекта. 

## <a name="what-you-should-know"></a>Необходимая информация

- Магазины портала Azure сообщили о предоставлении данных в течение 30 дней, если у вас есть премиум-издание, и 7 дней, если у вас есть бесплатное издание.

- Атрибут Change ID можно использовать в качестве уникального идентификатора. Это, например, полезно при взаимодействии с поддержкой продукта.

- В настоящее время нет возможности загрузить данные о подготовке.

- В настоящее время нет поддержки для анализа журналов.

- При доступе к журналам подготовки из контекста приложения он автоматически не фильтрует события в конкретное приложение так, как это делают журналы аудита.

## <a name="error-codes"></a>Коды ошибок

Используйте таблицу ниже, чтобы лучше понять, как устранить ошибки, которые вы можете найти в журналах подготовки. Для любых кодов ошибок, которые отсутствуют, обеспечить обратную связь, используя ссылку в нижней части этой страницы. 

|Код ошибки|Описание|
|---|---|
|Конфликт, ВступлениеКонфликт|Исправьте противоречивые значения атрибутов в AD Azure или в приложении, или просмотрите конфигурацию соответствующих атрибутов, если должна была быть сопоставлена и захвачена конфликтующая учетная запись пользователя. Просмотрите следующую [документацию](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes) для получения дополнительной информации о настройке соответствующих атрибутов.|
|TooManyRequests|Целевое приложение отклонило эту попытку обновить пользователя, потому что он перегружен и получает слишком много запросов. Делать нечего. Эта попытка будет автоматически отменена. Корпорация Майкрософт также была уведомлена об этой проблеме.|
|InternalServerError |Целевое приложение возвратила неожиданную ошибку. В целевом приложении может возникнуть проблема с обслуживанием, которая препятствует его работе. Эта попытка автоматически будет отменена через 40 минут.|
|Недостаточныеправа, методнеразрешенные, неразрешенные, несанкционированные| Azure AD удалось проверить подлинность с помощью целевого приложения, но не был уполномочен выполнять обновление. Пожалуйста, просмотрите любые инструкции, предоставляемые целевой заявкой, а также соответствующий [учебник](https://docs.microsoft.com/azure/active-directory/saas-apps/tutorial-list)приложения .|
|Неперерабатываемая сущность|Целевое приложение ответило неожиданным ответом. Конфигурация целевого приложения может быть неправильной, или может возникнуть проблема с обслуживанием целевого приложения, которая препятствует его работе.|
|Веб-СexceptionПротоколОшибка |Ошибка протокола HTTP произошла при подключении к целевому приложению. Делать нечего. Эта попытка автоматически будет отменена через 40 минут.|
|Недействительныйяя якорь|Пользователь, который ранее был создан или сопоставлялся службой обеспечения, больше не существует. Убедитесь, что пользователь существует. Чтобы заставить повторного матча всех пользователей, используйте MS Graph API, чтобы [перезапустить задание.](https://docs.microsoft.com/graph/api/synchronization-synchronizationjob-restart?view=graph-rest-beta&tabs=http) Обратите внимание, что перезапуск подготовки вызовет начальный цикл, который может занять время. Он также удаляет кэш, который использует служба подготовки для работы, а это означает, что все пользователи и группы в арендаторе должны быть оценены повторно и некоторые события подготовки могут быть удалены.|
|NotImplemented | Целевое приложение возвратила неожиданный ответ. Конфигурация приложения может быть неправильной, или может возникнуть проблема с обслуживанием целевого приложения, которое препятствует этому работать. Пожалуйста, просмотрите любые инструкции, предоставляемые целевой заявкой, а также соответствующий [учебник](https://docs.microsoft.com/azure/active-directory/saas-apps/tutorial-list)приложения . |
|ОбязательныеПоляОтсутствую, MissingValues |Пользователь не может быть создан из-за отсутствия требуемых значений. Исправьте недостающие значения атрибутов в исходной записи или просмотрите конфигурацию соответствующих атрибутов, чтобы убедиться, что требуемые поля не опущены. [Подробнее](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes) о настройке соответствующих атрибутов.|
|СхемаАтрибутНеНайдено |Не удалось выполнить операцию, поскольку был указан атрибут, которого не существует в целевом приложении. Ознакомьтесь с [документацией](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes) по настройке атрибутов и убедитесь, что ваша конфигурация верна.|
|InternalError |В службе предоставления AD-сервиса произошла внутренняя ошибка службы. Делать нечего. Эта попытка будет автоматически повторена через 40 минут.|
|Недействительный домен |Операция не может быть выполнена из-за значения атрибута, содержащего недействительное доменное имя. Обновите доменное имя пользователя или добавьте его в разрешенный список в целевом приложении. |
|Время ожидания |Операция не может быть завершена, поскольку целевое приложение занимает слишком много времени, чтобы ответить. Делать нечего. Эта попытка будет автоматически повторена через 40 минут.|
|ЛицензияПревышет|Пользователь не может быть создан в целевом приложении, поскольку для этого пользователя нет доступных лицензий. Либо приобрести дополнительные лицензии для целевого приложения, либо просмотреть назначения пользователей и конфигурацию отображения атрибутов, чтобы убедиться, что правильные пользователи назначены с правильными атрибутами.|
|ДубликатыTargetE записи  |Операция не может быть завершена, поскольку было найдено более одного пользователя в целевом приложении с настроенными атрибутами сопоставления. Либо удалите дубликат пользователя из целевого приложения, либо переназначьте отображение атрибутов, как описано [здесь.](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes)|
|ДубликатыИсточники | Операция не может быть завершена, поскольку было найдено несколько пользователей с настроенными атрибутами. Либо удалите дубликат пользователя, либо переназначьте отображение атрибутов, как описано [здесь.](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes)|

## <a name="next-steps"></a>Дальнейшие действия

* [Проверьте состояние подготовки пользователей](https://docs.microsoft.com/azure/active-directory/manage-apps/application-provisioning-when-will-provisioning-finish-specific-user)
* [Проблема при настройке подготовки пользователей для приложения из коллекции Azure AD](https://docs.microsoft.com/azure/active-directory/manage-apps/application-provisioning-config-problem)


