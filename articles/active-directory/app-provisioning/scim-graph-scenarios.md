---
title: Использование SCIM, Microsoft Graph и сервиса AD Azure AD для предоставления пользователям и обогащения приложения данными, в которые оно нуждается, Документы Майкрософт
description: Использование SCIM и Microsoft Graph вместе для предоставления пользователям и обогащения приложения данными, в которые оно нуждается.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-provisioning
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 04/06/2020
ms.author: mimart
ms.reviewer: arvinh
ms.collection: M365-identity-device-management
ms.openlocfilehash: 134237b66a803abaf07621112e3a4a518a3ae8a7
ms.sourcegitcommit: 09a124d851fbbab7bc0b14efd6ef4e0275c7ee88
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2020
ms.locfileid: "82087625"
---
# <a name="using-scim-and-microsoft-graph-together-to-provision-users-and-enrich-your-application-with-the-data-it-needs"></a>Использование SCIM и Microsoft Graph вместе для предоставления пользователям и обогащения приложения данными, в которые оно нуждается

**Целевая аудитория:** Этот документ предназначен для разработчиков, строяих приложения, интегрированные с Azure AD. Для других, желающих интегрировать существующее приложение, такое как Увеличить, ServiceNow и DropBox вы можете пропустить это и просмотреть приложения [конкретных учебников](https://docs.microsoft.com/azure/active-directory/saas-apps/tutorial-list). 

**Распространенные сценарии**

> [!div class="checklist"]
> * Автоматически создавать пользователей в моем приложении
> * Автоматически удаляйте пользователей из моего приложения, когда у них больше не должно быть доступа
> * Интеграция приложения с несколькими поставщиками идентификационных данных для подготовки
> * Обогащайте мое приложение данными из служб Майкрософт, такими как Sharepoint, Outlook и Office.
> * Автоматически создавать, обновлять и удалять пользователей и группы в Azure AD и Active Directory

![Дерево решений SCIM Graph](./media/user-provisioning/scim-graph.png)

## <a name="scenario-1-automatically-create-users-in-my-app"></a>Сценарий 1: Автоматически создавать пользователей в моем приложении
Сегодня ИТ-амины вручную создают учетные записи пользователей в моем приложении каждый раз, когда кому-то необходим доступ или периодически загружают файлы CSV. Этот процесс занимает много времени для клиентов и замедляет принятие моего приложения. Все, что мне нужно, это основная информация [о пользователе,](https://docs.microsoft.com/graph/api/resources/user?view=graph-rest-1.0) такая как имя, электронная почта и пользовательPrincipalName для создания пользователя. Кроме того, мои клиенты используют различные IdPs, и у меня нет ресурсов для поддержания синхронизации и пользовательских интеграций с каждым IdP. 

**Рекомендация**: Поддержка соответствия SCIM [/ Пользователи](https://aka.ms/scimreferencecode) конечная точка. Ваши клиенты смогут легко использовать эту конечную точку для интеграции с службой предоставления Azure AD и автоматически создавать учетные записи пользователей, когда им необходим доступ. Вы можете построить конечную точку один раз, и она будет совместима со всеми IdPs, без необходимости поддерживать механизм синхронизации. Ознакомьтесь с приведенным ниже примером запроса о том, как будет создан пользователь.

```json
POST /Users
{
    "schemas": [
        "urn:ietf:params:scim:schemas:core:2.0:User",
        "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"],
    "externalId": "0a21f0f2-8d2a-4f8e-bf98-7363c4aed4ef",
    "userName": "BillG",
    "active": true,
    "meta": {
        "resourceType": "User"
    },
    "name": {
        "formatted": "Bill Gates",
        "familyName": "Gates",
        "givenName": "Bill"
    },
    "roles": []
}
```
    
## <a name="scenario-2-automatically-remove-users-from-my-app"></a>Сценарий 2: Автоматически удалять пользователей из моего приложения
Клиенты, использующие мое приложение, ориентированы на безопасность и имеют требования к управлению для удаления учетных записей, когда сотрудники больше не нуждаются в них. Как автоматизировать дебиацию из приложения?

**Рекомендация:** Поддержка соответствия SCIM / Пользователи конечная точка. Служба предоставления AD Azure будет отправлять запросы для отработки и удаления, если пользователь не должен иметь доступ больше. Мы рекомендуем поддерживать как отключение, так и удалять пользователей. Ниже приведены примеры того, как выглядит запрос на удаление и удаление. 

Отключение пользователя
```json
PATCH /Users/5171a35d82074e068ce2 HTTP/1.1
{
    "Operations": [
        {
            "op": "Replace",
            "path": "active",
            "value": false
        }
    ],
    "schemas": [
        "urn:ietf:params:scim:api:messages:2.0:PatchOp"
    ]
}
```
Delete user (Удаление пользователя)
```json
DELETE /Users/5171a35d82074e068ce2 HTTP/1.1
```

## <a name="scenario-3-automate-managing-group-memberships-in-my-app"></a>Сценарий 3: Автоматизация управления членством в группе в моем приложении
Мое приложение полагается на группы для доступа к различным ресурсам, и клиенты хотят повторно использовать группы, которые они имеют в Azure AD. Как импортировать группы из Azure AD и обновлять их по мере изменения членства?  

**Рекомендация:** Поддержка соответствия SCIM /Группы [конечная точка](https://aka.ms/scimreferencecode). Служба предоставления AD Azure будет заботиться о создании групп и управлении обновлениями членства в приложении. 

## <a name="scenario-4-enrich-my-app-with-data-from-microsoft-services-such-as-teams-outlook-and-onedrive"></a>Сценарий 4: Обогащать мое приложение данными из служб Майкрософт, такими как Команды, Outlook и OneDrive.
Мое приложение встроено в команды Майкрософт и опирается на данные сообщений. Кроме того, мы храним файлы для пользователей в OneDrive. Как обогатить приложение данными из этих служб и корпорации Майкрософт?

**Рекомендация:** [График Майкрософт](https://docs.microsoft.com/graph/) — это точка входа для доступа к данным Майкрософт. Каждая рабочая нагрузка предоставляет AIS с данными, которые вам нужны. График Майкрософт может быть использован вместе с [подготовкой SCIM](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) для сценариев выше. SciM можно использовать для предоставления основных атрибутов пользователя в приложение при вызове в график, чтобы получить любые другие данные, которые вам нужны. 

## <a name="scenario-5-track-changes-in-microsoft-services-such-as-teams-outlook-and-azure-ad"></a>Сценарий 5: Отслеживайте изменения в службах Майкрософт, таких как команды, Outlook и Azure AD.
Мне нужно уметь отслеживать изменения в сообщениях Команд и Outlook и реагировать на них в режиме реального времени. Как я могу получить эти изменения, внесенные в мое приложение?

**Рекомендация:** Microsoft Graph предоставляет [уведомления об изменениях](https://docs.microsoft.com/graph/webhooks) и отслеживание изменений для различных ресурсов. Обратите внимание на следующие ограничения уведомлений об изменении:
- Если получатель события признает событие, но не действует по нему по какой-либо причине, событие может быть потеряно
- Если получатель события признает событие, но не действует по нему по какой-либо причине, событие может быть потеряно
- Уведомления об изменениях не всегда содержат [данные ресурса](https://docs.microsoft.com/graph/webhooks-with-resource-data) По причинам, приведенным выше, разработчики часто используют уведомления об изменении наряду с отслеживанием изменений в сценариях синхронизации. 

## <a name="scenario-6-provision-users-and-groups-in-azure-ad"></a>Сценарий 6: Предоставление пользователям и группам в Azure AD.
Мое приложение создает информацию о пользователе, которая нужна клиентам в Azure AD. Это может быть HR-приложение, чем управление наймом, приложение связи, которое создает номера телефонов для пользователей, или другое приложение, которое генерирует данные, которые были бы полезны в Azure AD. Как заполнить запись пользователя в Azure AD этими данными? 

**Рекомендация** График Майкрософт предоставляет /Пользователям и /группы конечных точек, с которыми можно интегрировать сегодня, чтобы предоставить пользователям доступ в Azure AD. Обратите внимание, что Active Directory Azure не поддерживает запись этих пользователей обратно в Active Directory. 

> [!NOTE]
> Корпорация Майкрософт имеет службу обеспечения, которая тянет данные из HR-приложений, таких как Workday и SuccessFactors. Эти интеграции строятся и управляются корпорацией Майкрософт. Для посадки нового HR-приложения в наш сервис, вы можете запросить его на [UserVoice.](https://feedback.azure.com/forums/374982-azure-active-directory-application-requests) 

## <a name="related-articles"></a>Связанные статьи

- [Просмотрите документацию синхронизации Microsoft Graph](https://docs.microsoft.com/graph/api/resources/synchronization-overview?view=graph-rest-beta)
- [Интеграция пользовательского приложения SCIM с Azure AD](use-scim-to-provision-users-and-groups.md)
