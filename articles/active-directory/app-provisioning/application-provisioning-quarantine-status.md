---
title: Статус подготовки к применению карантина Документы Майкрософт
description: Когда вы настроили приложение для автоматического подготовки пользователей, узнайте, что означает статус подготовки карантина и как его очистить.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-provisioning
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 10/03/2019
ms.author: mimart
ms.reviewer: arvinh
ms.collection: M365-identity-device-management
ms.openlocfilehash: 563c049bf3d1606e87db54e3b003dac987594610
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80154633"
---
# <a name="application-provisioning-in-quarantine-status"></a>Подготовка заявок в карантинном статусе

Служба предоставления AD Azure aD отслеживает работоспособность вашей конфигурации и помещает неработоспособные приложения в «карантинное» состояние. Если большинство или все вызовы, сделанные против целевой системы, постоянно выводятся из-за ошибки, например, недействительные учетные данные админ, задание подготовки помечается как в карантине.

Находясь в карантине, частота дополнительных циклов постепенно снижается до одного раза в день. Задание подготовки удаляется из карантина после того, как все ошибки будут исправлены и начинается следующий цикл синхронизации. Если работа по подготовке остается в карантине более четырех недель, работа по подготовке отключается (прекращается).

## <a name="how-do-i-know-if-my-application-is-in-quarantine"></a>Как узнать, находится ли мое заявление в карантине?

Существует три способа проверить, находится ли приложение в карантине:
  
- На портале Azure перейдите на*панель*&gt; > **приложений** > &lt; **Azure Active Directory** > Enterprise**и** прокрутите в строку прогресса внизу.  

  ![Панель предоставления статуса с указанием карантинного статуса](./media/application-provisioning-quarantine-status/progress-bar-quarantined.png)

- На портале Azure перейдите в**журналы аудита** **active Directory** > > фильтра **на activity: Quarantine** и просмотрите историю карантина. В то время как представление в панели прогресса, описанное выше, показывает, находится ли подготовка в настоящее время в карантине, журналы аудита позволяют просматривать историю карантина для приложения. 

- Используйте запрос Microsoft Graph [Получить синхронизациюРабота,](https://docs.microsoft.com/graph/api/synchronization-synchronizationjob-get?view=graph-rest-beta&tabs=http) чтобы программно получить статус подготовки задания:

        `GET https://graph.microsoft.com/beta/servicePrincipals/{id}/synchronization/jobs/{jobId}/`

- Проверьте электронную почту. При размещении заявки в карантин отправляется одноразовая электронная почта-уведомление. Если причина карантина изменяется, отправляется обновленная электронная почта с указанием новой причины карантина. Если вы не видите электронное письмо:

  - Убедитесь, что вы указали действительное **уведомление email** в конфигурации подготовки приложения.
  - Убедитесь, что на почтовом ящике с уведомлением нет спама.
  - Убедитесь, что вы не отписались от электронных писем.

## <a name="why-is-my-application-in-quarantine"></a>Почему мое заявление находится в карантине?

Запрос Microsoft Graph на получение статуса задания подготовки показывает следующую причину карантина:

- `EncounteredQuarantineException`указывает на то, что были предоставлены недействительные учетные данные. Служба обеспечения не в состоянии установить связь между исходной системой и целевой системой.

- `EncounteredEscrowProportionThreshold`указывает на то, что подготовка превысила порог депонирования. Это условие возникает, когда более 60% событий подготовки не удалось.

- `QuarantineOnDemand`означает, что мы обнаружили проблему с вашим приложением и вручную установили его на карантин.

## <a name="how-do-i-get-my-application-out-of-quarantine"></a>Как получить заявление из карантина?

Во-первых, решить проблему, из-за чего приложение было помещено в карантин.

- Проверьте настройки подготовки приложения, чтобы убедиться, что вы [ввели действительные учетные данные Admin.](../app-provisioning/configure-automatic-user-provisioning-portal.md#configuring-automatic-user-account-provisioning) Azure AD должен быть в состоянии установить доверие с целевым приложением. Убедитесь, что вы ввели действительные учетные данные и ваша учетная запись имеет необходимые разрешения.

- Просмотрите [журналы подготовки,](../reports-monitoring/concept-provisioning-logs.md) чтобы дополнительно исследовать, какие ошибки вызывают карантин, и устранить ошибку. Получите доступ к журналам подготовки на портале Azure, перейдя в &gt; **журналы (предварительный просмотр)** приложений для &gt; **активного** **каталога Azure** (предварительный просмотр) в разделе **Activity.**

После того, как вы решите проблему, перезапустите задание подготовки. Некоторые изменения в настройках подготовки приложения, такие как отображение атрибутов или фильтры для скопирования, автоматически перезапускают для вас подготовку. Бар прогресса на странице **подготовки** приложения указывает, когда подготовка началась в последний раз. Если вам нужно перезапустить работу по подготовке вручную, используйте один из следующих методов:  

- Используйте портал Azure для перезагрузки задания подготовки. На странице **подготовки** приложения в **настройках**выберите **четкое состояние и перезапустите синхронизацию** и установите **статус Подготовки** **on.** Это действие полностью перезапускает службу обеспечения, что может занять некоторое время. Полный первоначальный цикл будет работать снова, который очищает депонирования, удаляет приложение из карантина, и очищает любые водяные знаки.

- Используйте Microsoft Graph для [перезапуска задания подготовки.](https://docs.microsoft.com/graph/api/synchronization-synchronizationjob-restart?view=graph-rest-beta&tabs=http) Вы будете иметь полный контроль над тем, что вы перезагрузить. Вы можете выбрать, чтобы очистить депозитные счета (для перезапуска депозитный счетчик, который начисляется к карантину статус), очистить карантин (для удаления приложения из карантина), или четкие водяные знаки. Используйте следующий запрос:
 
       `POST /servicePrincipals/{id}/synchronization/jobs/{jobId}/restart`
