---
title: Узнайте, когда конкретный пользователь сможет получить доступ к приложению
description: В этой статье описано, как определить, когда критически важный пользователь получит доступ к приложению, которое было настроено для подготовки пользователя в Azure AD.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-provisioning
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 09/03/2019
ms.author: mimart
ms.reviewer: arvinh
ms.collection: M365-identity-device-management
ms.openlocfilehash: 48370e2806b70d550bce95ceff3857a79561f247
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "79264145"
---
# <a name="check-the-status-of-user-provisioning"></a>Проверьте состояние подготовки пользователей

Служба предоставления AD Azure AD запускает начальный цикл подготовки к исходной системе и целевой системе, за которым следуют периодические постепенные циклы. При настройке подготовки приложения можно проверить текущее состояние службы подготовки и посмотреть, когда пользователь сможет получить доступ к приложению.

## <a name="view-the-provisioning-progress-bar"></a>Просмотр панели прогресса подготовки

 На странице **подготовки** приложения можно просмотреть состояние службы обеспечения AD Azure AD. В разделе **Текущее состояние** в нижней части страницы показано, начал ли цикл подготовки учетных записей пользователей. Вы можете наблюдать за ходом цикла, видеть, сколько пользователей и групп было подготовлено, и видеть, сколько ролей создано.

При первой настройке автоматического проработки раздел **текущего состояния** в нижней части страницы показывает состояние начального цикла подготовки. Этот раздел обновляется каждый раз, когда выполняется дополнительный цикл. Приведены следующие детали:
- Тип цикла подготовки (начальный или дополнительный), который в настоящее время запущен или был завершен в последний раз.
- **Панель прогресса,** показывающая процент завершивого цикла подготовки. Процент отражает количество подготовленных страниц. Обратите внимание, что каждая страница может содержать несколько пользователей или групп, поэтому процент не коррелирует напрямую с числом подготовленных пользователей, групп или ролей.
- Кнопка **обновления,** используемая для обновления представления.
- Количество **пользователей** и **групп** в хранилище данных разъема. Количество увеличивается в любое время, когда объект добавляется к сфере подготовки. Подсчет не будет идти вниз, если пользователь является мягким или жестко удалены, поскольку это не удаляет объект из хранилища данных разъема. Счет будет recaculated первой синхронизации после [сбросить](https://docs.microsoft.com/graph/api/synchronization-synchronizationjob-restart?view=graph-rest-beta&tabs=http) CDS 
- Ссылка **На журналы аудита представления,** которая открывает журналы подготовки Azure AD для получения подробной информации обо всех операциях, проводимых службой предоставления услуг пользователей, включая статус подготовки отдельных пользователей (см. раздел [«Создание журналов использования»](#use-provisioning-logs-to-check-a-users-provisioning-status) ниже).

После завершения цикла подготовки в разделе **Статистическое управление на сегодняшний день** показано общее число пользователей и групп, которые были подготовлены к настоящему времени, а также дата завершения и продолжительность последнего цикла. **Идентификатор активности** однозначно определяет последний цикл подготовки. **Идентификатор вакансии** является уникальным идентификатором для выполнения задания и специфичен для приложения в вашем арендаторе.

Прогресс подготовки можно просмотреть на портале Azure в ** &gt; вкладке\] &gt; приложения Azure Active Directory Enterprise &gt; \[Apps..**

![Панель прогресса страницы](./media/application-provisioning-when-will-provisioning-finish-specific-user/provisioning-progress-bar-section.png)

## <a name="use-provisioning-logs-to-check-a-users-provisioning-status"></a>Используйте журналы подготовки для проверки статуса пользователя

Чтобы увидеть статус подготовки выбранного пользователя, обратитесь к [журналам подготовки (предварительный просмотр)](../reports-monitoring/concept-provisioning-logs.md?context=azure/active-directory/manage-apps/context/manage-apps-context) в Azure AD. Все операции, управляемые службой предоставления пользовательского обеспечения, записываются в журналы подготовки Azure AD. Это включает в себя все операции чтения и записи, сделанные в исходные и целевые системы, а также пользовательские данные, которые были прочитаны или написаны во время каждой операции.

Вы можете получить доступ к журналам подготовки на портале Azure, выбрав **журналы (предварительный просмотр»** &gt; **приложений для активных** &gt; **каталогов Azure,** то есть в разделе **«Активность».** Вы можете искать данные подготовки на основе имени пользователя или идентификатора либо в исходной системе, либо в целевой системе. Для получения подробной информации [см.](../reports-monitoring/concept-provisioning-logs.md?context=azure/active-directory/manage-apps/context/manage-apps-context) 

В журналах подготовки регистрируются все операции, выполняемые службой обеспечения, включая:

* Получение сведений о назначенных пользователях, которые находятся в области для подготовки, в Azure AD
* Получение сведений о наличии этих пользователей от целевого приложения
* Сравнение объектов пользователя в разных системах
* Добавление, обновление или отключение учетной записи пользователя в целевой системе на основе сравнения

Более подробную информацию о том, как читать журналы подготовки, можно узнать на портале Azure, смотрите [руководство по подготовке к отчетам](check-status-user-account-provisioning.md).

## <a name="how-long-will-it-take-to-provision-users"></a>Сколько времени занимает подготовка пользователей?
При использовании автоматического предоставления пользователям с помощью приложения Azure AD автоматически предоставляет и обновляет учетные записи пользователей в приложении на основе таких вещей, как [пользователь ское и групповое назначение](../manage-apps/assign-user-or-group-access-portal.md) с регулярным временным интервалом, как правило, каждые 40 минут.

Время, необходимое для подготовки данного пользователя, зависит главным образом от того, выполняется ли задание подготовки начального цикла или поэтапный цикл.

- Для **начального цикла**время задания зависит от многих факторов, включая количество пользователей и групп по объему подготовки, а также общее число пользователей и групп в исходной системе. Первая синхронизация приложения с Azure AD может занять от 20 минут до нескольких часов, в зависимости от размера каталога Azure AD и количества пользователей в области подготовки. Полный перечень факторов, влияющих на начальную производительность цикла, обобщен позднее в этом разделе.

- Для **дополнительных циклов** после начального цикла время работы, как правило, быстрее (например, в течение 10 минут), так как служба обеспечения хранит водяные знаки, которые представляют состояние обеих систем после первоначального цикла, повышая производительность последующих синхронизаций. Время выполнения задания зависит от количества изменений, обнаруженных в этом цикле подготовки. Если количество изменений членства в пользователях или группах превышает 5000 пользователей или групп, задание может завершиться в рамках одного поэтапного цикла подготовки. 

В следующей таблице перечислены данные о времени синхронизации, необходимом для общих сценариев подготовки. В этих сценариях исходной системой является Azure AD, а целевой — приложение SaaS. Время синхронизации происходит от статистического анализа заданий синхронизации для приложений SaaS ServiceNow, Workplace, Salesforce и G Suite.


| Конфигурация области | Пользователи, группы и участники в области | Начальное время цикла | Время инкрементного цикла |
| -------- | -------- | -------- | -------- |
| Синхронизация только назначенных пользователей и групп |  < 1000 |  < 30 минут | < 30 минут |
| Синхронизация только назначенных пользователей и групп |  1000–10 000 | 142–708 минут | < 30 минут |
| Синхронизация только назначенных пользователей и групп |   10 000–100 000 | 1170–2,340 минут | < 30 минут |
| Синхронизация всех пользователей и групп в Azure AD |  < 1000 | < 30 минут  | < 30 минут |
| Синхронизация всех пользователей и групп в Azure AD |  1000–10 000 | 30–120 минут | < 30 минут |
| Синхронизация всех пользователей и групп в Azure AD |  10 000–100 000  | 713–1425 минут | < 30 минут |
| Синхронизация всех пользователей в Azure AD|  < 1000  | < 30 минут | < 30 минут |
| Синхронизация всех пользователей в Azure AD | 1000–10 000  | 43–86 минут | < 30 минут |


Для **синхронизации**конфигурации только для пользователя и групп можно использовать следующие формулы для определения приблизительного минимального и максимального **ожидаемого начального** времени цикла:

    Minimum minutes =  0.01 x [Number of assigned users, groups, and group members]
    Maximum minutes = 0.08 x [Number of assigned users, groups, and group members] 
    
Резюме факторов, влияющих на время, необходимое для завершения **начального цикла:**

- Общее количество пользователей и групп, которые будут подготовлены.

- Общее количество пользователей, групп и участников группы, находящихся в исходной системе (Azure AD).

- Сопоставляются ли пользователи в области подготовки к существующим пользователям в целевом приложении или должны быть созданы в первый раз. Задания синхронизации, для которых все пользователи создаются впервые, занимают примерно в *два раза больше времени,* чем задания синхронизации, для которых все пользователи сопоставляются с существующими пользователями.

- Количество ошибок в [журналах подготовки.](check-status-user-account-provisioning.md) Производительность также снижается, если возникает большое количество ошибок и служба подготовки перешла в состояние карантина. 

- Ограничения частоты и регулирования запросов, реализованные целевой системой. Некоторые целевые системы реализуют ограничения скорости запросов и регулирование, что может повлиять на производительность при больших операциях синхронизации. В этих условиях приложение, получающее слишком много запросов за короткий промежуток времени, может снизить частоту реагирования или закрыть подключение. Чтобы повысить производительность, соединитель необходимо настроить таким образом, чтобы количество отправляемых запросов соответствовало количеству запросов, которые может обработать приложение. Соединители подготовки, созданные корпорацией Майкрософт, позволяют внести эту корректировку. 

- Количество и размеры назначенных групп. Синхронизация назначенных групп длится дольше, чем синхронизация пользователей. Число и размер назначенных групп оказывают влияние на производительность. Если в приложении [включена функция сопоставления для синхронизации объектов группы](customize-application-attributes.md#editing-group-attribute-mappings), свойства группы (например, названия групп и членства) синхронизируются в дополнение к пользователям. Эти дополнительные синхронизации занимают больше времени, чем синхронизация только объектов пользователей.

- Если производительность становится проблемой, и вы пытаетесь предоставить большинство пользователей и групп в вашем арендатора, используйте фильтры для проверки. Фильтры области позволяют точно настроить данные, которые служба подготовки получает из Azure AD, за счет фильтрации пользователей по значению конкретного атрибута. Дополнительные сведения о фильтрах области см. в статье [Подготовка приложений на основе атрибутов с использованием фильтров области](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

## <a name="next-steps"></a>Дальнейшие действия
[Автоматическая подготовка пользователей и ее отзыв для приложений SaaS в Azure Active Directory](user-provisioning.md)
