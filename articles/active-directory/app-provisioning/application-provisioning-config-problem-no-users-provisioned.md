---
title: Пользователи не готовятся в моем приложении
description: В этой статье описаны способы решения распространенных проблем, когда пользователи, для которых настроена подготовка в Azure AD, не появляются в приложении в коллекции Azure AD.
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-provisioning
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 04/20/2020
ms.author: mimart
ms.reviewer: arvinh
ms.collection: M365-identity-device-management
ms.openlocfilehash: ac6d4f24d3b6c21828ccb11785005df736c6b070
ms.sourcegitcommit: acb82fc770128234f2e9222939826e3ade3a2a28
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "81680336"
---
# <a name="no-users-are-being-provisioned"></a>Подготовка пользователей не выполняется 
>[!NOTE]
>Начиная с 04/16/2020 мы изменили поведение пользователей, которым назначена роль доступа по умолчанию. Пожалуйста, смотрите раздел ниже для получения подробной информации. 
>
После настройки автоматической подготовки для приложения (в том числе проверки действительности учетных данных, с помощью которых Azure AD подключается к приложению) пользователи и (или) группы подготавливаются для приложения. Подготовка определяется следующими данными:

-   Какие пользователи и группы были **назначены** приложению. Обратите внимание, что подготовка вложенных групп или групп Office 365 не поддерживается. Дополнительные сведения о назначении см. в разделе [Назначение пользователя или группы корпоративному приложению в Azure Active Directory](../manage-apps/assign-user-or-group-access-portal.md).
-   Было ли **сопоставление атрибутов** включено и настроено для синхронизации допустимых атрибутов из Azure AD в приложение. Дополнительные сведения о сопоставлении атрибутов см. в разделе [Настройка сопоставления атрибутов для подготовки пользователей для приложений SaaS в Azure Active Directory](customize-application-attributes.md).
-   Используется ли **фильтр области**, который фильтрует пользователей на основе значений указанных атрибутов. Дополнительные сведения о фильтрах области см. в статье [Подготовка приложений на основе атрибутов с использованием фильтров области](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).
  
  
Если вы заметили, что пользователи не подготовлены, обратитесь к [журналам подготовки (предварительного просмотра)](../reports-monitoring/concept-provisioning-logs.md?context=azure/active-directory/manage-apps/context/manage-apps-context) в Azure AD. и найдите в них записи по конкретному пользователю.

Вы можете получить доступ к журналам подготовки на портале Azure, выбрав **журналы (предварительный просмотр»** &gt; **приложений для активных** &gt; **каталогов Azure,** то есть в разделе **«Активность».** Вы можете искать данные подготовки на основе имени пользователя или идентификатора либо в исходной системе, либо в целевой системе. Для получения подробной информации [см.](../reports-monitoring/concept-provisioning-logs.md?context=azure/active-directory/manage-apps/context/manage-apps-context) 

В журналах подготовки записи всех операций, выполняемых службой подготовки, включая запрос Azure AD для назначенных пользователей, которые находятся в области подготовки, запрос целевого приложения о существовании этих пользователей, сравнение объектов пользователя между системой. Затем добавьте, измените или отключите учетную запись пользователя в целевой системе на основе сравнения.

## <a name="general-problem-areas-with-provisioning-to-consider"></a>Общие проблемные области при подготовке, которые необходимо учитывать
Ниже приведен список общих проблемных областей, в которые можно углубиться, если у вас есть какие-то идеи.

- [Служба подготовки не запускается](#provisioning-service-does-not-appear-to-start)
- [В журналах подготовки говорится, что пользователи пропускают и не предусмотрены, даже если они назначены](#provisioning-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned)

## <a name="provisioning-service-does-not-appear-to-start"></a>Служба подготовки не запускается
Предположим, что вы установили параметр **Состояние подготовки** в значение **Вкл** в разделе **Azure Active Directory &gt; Корпоративные приложения &gt; \[Имя приложения\] &gt;Подготовка** портала Azure. Однако никакие другие сведения о статусе не отображаются на этой странице после последующих перезагрузок, вполне вероятно, что служба работает, но еще не завершила первоначальный цикл. Проверьте описанные выше **журналы подготовки (предварительный просмотр),** чтобы определить, какие операции выполняет служба, и есть ли ошибки.

>[!NOTE]
>Первоначальный цикл может занять от 20 минут до нескольких часов, в зависимости от размера каталога Azure AD и количества пользователей в области подготовки. Последующие синхронизации после первоначального цикла быстрее, так как служба обеспечения хранит водяные знаки, которые представляют состояние обеих систем после первоначального цикла. Первоначальный цикл повышает производительность последующих синхронизаций.
>


## <a name="provisioning-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned"></a>В журналах подготовки говорится, что пользователи пропущены и не подготовлены, даже если они назначены

Когда пользователь отображается как "пропущенный" в журналах подготовки, важно просмотреть вкладку **Шаги** журнала, чтобы определить причину. Ниже приведены распространенные причины и способы устранения ошибок:

- **Настроен фильтр области** **, который фильтрует пользователей на основе значения атрибута**. Дополнительные сведения о фильтрах области см. в [этой статье](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).
- **Пользователь "не имеет фактических прав".** Если вы видите это сообщение об ошибке, это свидетельствует о наличии проблемы с записью назначения пользователя, которая хранится в Azure AD. Чтобы устранить эту проблему, отмените назначение пользователя (или группы) для приложения и повторно назначьте пользователя (или группу). Дополнительные сведения о назначении доступа пользователю или группе см. в [этой статье](../manage-apps/assign-user-or-group-access-portal.md).
- **Обязательный атрибут для пользователя отсутствует или его значение не указано.** При настройке подготовки важно просмотреть и настроить сопоставления атрибутов и рабочие процессы, которые определяют, какие свойства пользователя (или группы) передаются из Azure AD в приложение. К ним относится "свойство сопоставления", используемое для уникальной идентификации и сопоставления пользователей или групп между двумя системами. Дополнительные сведения об этом важном процессе см. в разделе [Настройка сопоставления атрибутов для подготовки пользователей для приложений SaaS в Azure Active Directory](customize-application-attributes.md).
- **Сопоставление атрибутов для групп:** подготовка имени группы и сведений о группе наряду с ее участниками (если поддерживается для некоторых приложений). Эту функциональность можно включить или отключить, включив или **отключив отображение карты** для групповых объектов, показанных во вкладке **«Подготовка».** Если группы подготовки включены, не забудьте просмотреть отображение атрибутов, чтобы убедиться, что соответствующее поле используется для "соответствующего идентификатора". Соответствующим идентификатором может быть отображаемое имя или псевдоним электронной почты. Если соответствующее свойство для группы в Azure AD отсутствует или не указано, группа и ее участники не будут подготовлены.
## <a name="provisioning-users-assigned-to-the-default-access-role"></a>Обеспечение пользователей, назначенных на роль доступа по умолчанию
Роль по умолчанию в приложении из галереи называется ролью «доступа по умолчанию». Исторически сложилось так, что пользователи, назначенные на эту роль, не подготовлены и помечены как пропущенные в [журналах подготовки](https://docs.microsoft.com/azure/active-directory/reports-monitoring/concept-provisioning-logs) из-за того, что они "не имеют эффективного права". 

**Поведение для подготовки конфигураций, созданных после 04/16/2020:** Пользователи, назначенные в роль доступа по умолчанию, будут оцениваться так же, как и все другие роли. Пользователь, которым назначен доступ по умолчанию, не будет пропущен как "не фактически озаглавленный". 

**Поведение для подготовки конфигураций, созданных до 04/16/2020:** В течение следующих 3 месяцев, поведение будет продолжаться, как сегодня. Пользователи с ролью доступа по умолчанию будут пропущены как не имеющие эффективного права. После июля 2020 года поведение будет единым для всех приложений. Мы не будем пропускать подготовку пользователей с ролью доступа по умолчанию из-за того, что "не эффективно право". Это изменение будет внесено корпорацией Майкрософт, без каких-либо действий клиентов. Если вы хотите убедиться, что эти пользователи продолжают пропускаться, даже после этого изменения, пожалуйста, примените соответствующие фильтры для проверки или отложите пользователя из приложения, чтобы убедиться, что они находятся вне сферы действия.  

Для получения вопросов об этих изменениях, пожалуйста, обратитесь кprovisioningfeedback@microsoft.com
## <a name="next-steps"></a>Следующие шаги

[Служба синхронизации Azure AD Connect: общие сведения о декларативной подготовке](../hybrid/concept-azure-ad-connect-sync-declarative-provisioning.md)
