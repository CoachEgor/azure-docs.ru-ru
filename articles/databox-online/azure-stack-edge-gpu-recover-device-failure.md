---
title: Восстановление после сбоя устройства Pro Azure Stack
description: Описывает, как выполнить восстановление с устройства, не имеющего Azure Stack пограничной Pro.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: how-to
ms.date: 10/06/2020
ms.author: alkohli
ms.openlocfilehash: ef99ff874376e0d76e45e4b0b2c36a78d938130b
ms.sourcegitcommit: b87c7796c66ded500df42f707bdccf468519943c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/08/2020
ms.locfileid: "91844011"
---
# <a name="recover-from-a-failed-azure-stack-edge-pro-gpu-device"></a>Восстановление после неудачного Azure Stack устройства GPU с пограничным Pro 

В этой статье описывается, как выполнить восстановление после неприемлемой сбоя на устройстве с Azure Stack ребра Pro GPU. Для приемлемой сбоя на устройстве с графическим процессором с пограничным управлением Azure Stack требуется замена устройства.

## <a name="before-you-begin"></a>Перед началом

Убедитесь в наличии следующих элементов.

- Обращение в служба поддержки Майкрософт об отказе устройства и рекомендуем замену устройства. 
- Создайте резервную копию конфигурации устройства, как описано в разделе [Подготовка к сбою устройства](azure-stack-edge-gpu-prepare-device-failure.md).


## <a name="configure-replacement-device"></a>Настройка устройства замены

Когда устройство обнаруживает сбой, не приемлемой, необходимо заказать замену устройства. Действия по настройке устройства замены остаются прежними. 

Получите сведения о конфигурации устройства, для которых была выполнена архивация с устройства, на котором произошел сбой. Эти сведения будут использоваться для настройки устройства замены.  

Выполните следующие действия, чтобы настроить заменяющее устройство.

1. Соберите сведения, необходимые в [контрольном списке развертывания](azure-stack-edge-gpu-deploy-checklist.md). Следует использовать сведения, сохраненные в предыдущей конфигурации устройства. 
1. Закажите новое устройство той же конфигурации, в которой произошел сбой.  Чтобы разместить заказ, [Создайте новый ресурс Azure Stack ребра](azure-stack-edge-gpu-deploy-prep.md#) в портал Azure.
1. [Распаковка](azure-stack-edge-gpu-deploy-install.md#unpack-the-device), [Подключение к стойке](azure-stack-edge-gpu-deploy-install.md#rack-the-device) и [кабель устройства](azure-stack-edge-gpu-deploy-install.md#cable-the-device). 
1. [Подключитесь к локальному пользовательскому интерфейсу устройства](azure-stack-edge-gpu-deploy-connect.md).
1. Настройте сеть, используя те же IP-адреса, которые использовались для старого устройства. Это снизит влияние на все клиентские компьютеры, используемые в вашей среде. См. раздел [Настройка параметров сети](azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy.md).
1. Назначьте то же имя устройства и домен DNS, что и для старого устройства. Это гарантирует, что клиенты смогут использовать одно и то же имя устройства для взаимодействия с новым устройством. См. раздел [Настройка параметров устройства](azure-stack-edge-gpu-deploy-set-up-device-update-time.md).
1. Настройте сертификаты на новом устройстве так же, как и для старого устройства. Помните, что новое устройство имеет новый серийный номер узла. Если вы использовали собственные сертификаты на старом устройстве, вам нужно будет получить новый сертификат узла. См. раздел [Настройка сертификатов](azure-stack-edge-gpu-deploy-configure-certificates.md).
1. Получите ключ активации из портал Azure и активируйте новое устройство. См. раздел [Активация устройства](azure-stack-edge-gpu-deploy-activate.md).

Теперь все готово для развертывания рабочих нагрузок, запущенных на старом устройстве.

## <a name="restore-edge-cloud-shares"></a>Восстановление облачных общих папок

Выполните следующие действия, чтобы восстановить данные в общих облачных ресурсах на устройстве.

1. [Добавьте общие папки](azure-stack-edge-j-series-manage-shares.md#add-a-share) с теми же именами, которые были созданы ранее на неисправном устройстве. Убедитесь, что при создании общих папок **выберите параметр контейнер больших двоичных объектов** установлен на **использование существующего** параметра, а затем выберите контейнер, который использовался с предыдущим устройством.
1. [Добавьте пользователей](azure-stack-edge-j-series-manage-users.md#add-a-user) , имеющих доступ к предыдущему устройству.
1. [Добавьте учетные записи хранения](azure-stack-edge-j-series-manage-storage-accounts.md#add-an-edge-storage-account) , связанные с общими папками, которые ранее находились на устройстве. При создании учетных записей хранения пограничных данных выберите из существующего контейнера и укажите контейнер, сопоставленный с учетной записью хранения Azure, сопоставленной с предыдущим устройством. Все данные с устройства, записанные в учетную запись хранения пограничных данных на предыдущем устройстве, были отправлены в выбранный контейнер хранилища в сопоставленной учетной записи хранения Azure.
1. [Обновите данные общего доступа](azure-stack-edge-j-series-manage-shares.md#refresh-shares) из Azure. Это приведет к извлекать все облачные данные из существующего контейнера в общие папки.

## <a name="restore-edge-local-shares"></a>Восстановление граничных локальных общих папок

Чтобы подготовиться к потенциальному сбою устройства, вы можете развернуть одно из следующих решений резервного копирования, чтобы защитить локальные общие данные общих ресурсов от рабочих нагрузок Kubernetes или IoT.

| Стороннее программное обеспечение           | Ссылка на решение                               |
|--------------------------------|---------------------------------------------------------|
| Cohesity                       | [https://www.cohesity.com/solution/cloud/azure/](https://www.cohesity.com/solution/cloud/azure/) <br> Для получения дополнительных сведений обратитесь к Cohesity.          |
| Компанию                        | Для получения дополнительных сведений обратитесь в компанию Veritas.   |

После полной настройки устройства замены включите его для локального хранилища. 

Чтобы восстановить данные из локальных общих папок, выполните следующие действия. 

1. [Настройка вычислений на устройстве](azure-stack-edge-gpu-deploy-configure-compute.md).
1. [Добавьте локальный общий ресурс](azure-stack-edge-j-series-manage-shares.md#add-a-local-share) обратно.
1. Выполните процедуру восстановления, предоставленную решением "Защита данных" по выбору. См. ссылки из предыдущей таблицы.

## <a name="restore-vm-files-and-folders"></a>Восстановление файлов и папок виртуальной машины

Чтобы подготовиться к потенциальному сбою устройства, вы можете развернуть одно из следующих решений резервного копирования для защиты данных на виртуальных машинах.



| Решения для архивации        | Поддерживаемая ОС   | Справочник                                                                |
|-------------------------|----------------|--------------------------------------------------------------------------|
| Агент Службы восстановления Microsoft Azure (MARS) для Azure Backup | Windows        | [Сведения об агенте MARS](/azure/backup/backup-azure-about-mars)    |
| Cohesity                | Windows, Linux | [Краткое описание решения Microsoft Azure интеграции, резервного копирования и восстановления](https://www.cohesity.com/solution/cloud/azure) <br>Для получения дополнительных сведений обратитесь к Cohesity.                          |
| Компанию                 | Windows, Linux | Для получения дополнительных сведений обратитесь в компанию Veritas.                    |

После полной настройки устройства замены можно повторно развернуть виртуальные машины с использованием ранее использованного образа виртуальной машины. 

Чтобы восстановить данные в виртуальных машинах, выполните следующие действия.
 
1. [Развертывание виртуальной машины из образа виртуальной машины](azure-stack-edge-gpu-deploy-virtual-machine-templates.md) на устройстве. 
1. Установите решение для защиты данных на виртуальной машине.
1. Выполните процедуру восстановления, предоставленную решением "Защита данных" по выбору. См. ссылки из предыдущей таблицы.

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как [вернуть устройство Pro Azure Stack](azure-stack-edge-return-device.md).
