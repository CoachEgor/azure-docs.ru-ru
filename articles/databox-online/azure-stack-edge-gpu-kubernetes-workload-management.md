---
title: Общие сведения об управлении рабочей нагрузкой Kubernetes на Azure Stack пограничном устройстве | Документация Майкрософт
description: Описывает, как можно управлять рабочими нагрузками Kubernetes на пограничном устройстве Azure Stack.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: conceptual
ms.date: 08/12/2020
ms.author: alkohli
ms.openlocfilehash: 21845b51fdd108221d5e1bce50e953b79084d17d
ms.sourcegitcommit: 656c0c38cf550327a9ee10cc936029378bc7b5a2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/28/2020
ms.locfileid: "89085358"
---
# <a name="kubernetes-workload-management-on-your-azure-stack-edge-device"></a>Управление рабочей нагрузкой Kubernetes на пограничном устройстве Azure Stack

На Azure Stack пограничном устройстве создается кластер Kubernetes при настройке роли вычислений. После создания кластера Kubernetes контейнерные приложения можно развернуть в кластере Kubernetes в модулях Pod. Существует несколько различных способов развертывания рабочих нагрузок в кластере Kubernetes. 

В этой статье описываются различные методы, которые можно использовать для развертывания рабочих нагрузок на Azure Stack пограничном устройстве.

## <a name="workload-types"></a>Типы рабочих нагрузок

Двумя распространенными типами рабочих нагрузок, которые можно развернуть на Azure Stack пограничном устройстве, являются приложения без отслеживания состояния или приложения с отслеживанием состояния.

- **Приложения без отслеживания состояния** не сохраняют свое состояние и не сохраняют данные в постоянном хранилище. Все данные пользователя и сеанса остаются в клиенте. Некоторые примеры приложений без отслеживания состояния включают в себя веб-интерфейсы, такие как nginx, и другие веб-приложения.

    Вы можете создать развертывание Kubernetes, чтобы развернуть в кластере приложение без отслеживания состояния. 

- Для **приложений с отслеживанием состояния** необходимо сохранить их состояние. Приложения с отслеживанием состояния используют постоянное хранилище, например постоянные тома, для сохранения данных, которые могут использоваться сервером или другими пользователями. Примеры приложений с отслеживанием состояния включают в себя такие базы данных, как MongoDB.

    Вы можете создать развертывание Kubernetes для развертывания приложения с отслеживанием состояния. 

## <a name="namespaces-types"></a>Типы пространств имен

Ресурсы Kubernetes, такие как Pod и развертывания, логически группируются в пространство имен. Эти группы позволяют логически разделить кластер Kubernetes и ограничить доступ к созданию, просмотру и управлению ресурсами. Пользователи смогут взаимодействовать только с ресурсами из назначенных им пространств имен.

Пространства имен предназначены для использования в средах с множеством пользователей, распределенных по нескольким командам или проектам. Для кластеров с небольшими десятками пользователей не нужно создавать или думать о пространствах имен. Приступите к использованию пространств имен, если вам нужны предоставляемые ими функции.

Дополнительные сведения см. в [документации по пространствам имен в Kubernetes](https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/).


У Azure Stack пограничных устройств есть следующие пространства имен:

- **Пространство имен System** — это пространство имен, в котором существуют основные ресурсы, такие как DNS и прокси, или панель мониторинга Kubernetes. Обычно вам не нужно развертывать приложения в этом пространстве имен. Используйте это пространство имен для отладки любых проблем с кластером Kubernetes. 

    На устройстве имеется несколько пространств имен System, и имена, соответствующие этим системным пространствам имен, зарезервированы. Ниже приведен список зарезервированных пространств имен System. 
    - KUBE — система
    - металлб — система
    - DBE — пространство имен
    - default
    - kubernetes — панель мониторинга
    - default
    - KUBE — Аренда узла
    - KUBE — Открытый
    - iotedge
    - Azure — дуга

    Обязательно используйте зарезервированные имена для создаваемых пространств имен пользователей. 
<!--- **default namespace** - This namespace is where pods and deployments are created by default when none is provided and you have admin access to this namespace. When you interact with the Kubernetes API, such as with `kubectl get pods`, the default namespace is used when none is specified.-->

- **Пространство имен пользователя** . это пространства имен, которые можно создать с помощью **kubectl** для локального развертывания приложений.
 
- **IOT Edge Namespace** — вы подключаетесь к этому `iotedge` пространству имен, чтобы развертывать приложения с помощью IOT Edge.

- **Пространство имен Azure Arc** — вы подключаетесь к этому `azure-arc` пространству имен для развертывания приложений через дугу Azure.

 
## <a name="deployment-types"></a>Типы развертывания

Существует три основных способа развертывания рабочих нагрузок. Каждая из этих методологий развертывания позволяет подключаться к отдельному пространству имен на устройстве, а затем развертывать приложения без отслеживания состояния или с отслеживанием состояния.

![Развертывание рабочей нагрузки Kubernetes](./media/azure-stack-edge-gpu-kubernetes-workload-management/kubernetes-workload-management-1.png)

- **Локальное развертывание**. это осуществляется с помощью средства доступа из командной строки `kubectl` , такого как, которое позволяет развертывать K8 `yamls` . Подключитесь к кластеру K8 на границе Azure Stack, созданной с помощью `kubeconfig` файла. Дополнительные сведения см. в подразделах [доступ к кластеру Kubernetes через kubectl](azure-stack-edge-gpu-create-kubernetes-cluster.md).

- **Развертывание IOT Edge**. это осуществляется с помощью IOT EDGE, который подключается к центру Интернета вещей Azure. Вы подключаетесь к кластеру K8 на устройстве Azure Stack погранично через `iotedge` пространство имен. Агенты IoT Edge, развернутые в этом пространстве имен, отвечают за подключение к Azure. Вы применяете `IoT Edge deployment.json` конфигурацию с помощью Azure DEVOPS CI/CD. Управление пространствами имен и IoT Edge осуществляется с помощью оператора облака.

- **Развертывание Azure/Arc**. Azure ARC — это гибридное средство управления, которое позволит развертывать приложения в кластерах K8. Вы подключаете кластер K8 на устройстве Azure Stack погранично через `azure-arc namespace` .  Агенты развертываются в этом пространстве имен, которые отвечают за подключение к Azure. Конфигурация развертывания применяется с помощью управления конфигурацией на основе Гитопс. Служба "Дуга Azure" также позволяет использовать Azure Monitor для контейнеров для просмотра и мониторинга кластеров. Дополнительные сведения см. в разделе [что такое Azure-Arc Enabled Kubernetes?](https://docs.microsoft.com/azure/azure-arc/kubernetes/overview).

## <a name="choose-the-deployment-type"></a>Выбор типа развертывания

При развертывании приложений учитывайте следующие сведения.

- **Один или несколько типов**: можно выбрать один вариант развертывания или сочетание различных вариантов развертывания.
- **Локальное облако**. в зависимости от ваших приложений вы можете выбрать локальное развертывание с помощью kubectl или облачного развертывания с помощью IOT EDGE и дуги Azure. 
    - Локальное развертывание более подходит для сценариев разработки. При выборе локального развертывания вы можете ограничиться сетью, в которой развернуто устройство Azure Stackного периметра.
    - Если у вас есть облачный агент, который можно развернуть, следует развернуть оператор облака и использовать управление облаком.
- **Центр Интернета вещей и дуга Azure**. Выбор развертывания также зависит от цели вашего сценария продукта. При развертывании приложений или контейнеров, которые имеют более глубокую интеграцию с IoT или экосистемой IoT, следует выбрать IoT Edge способом развертывания приложений. Если у вас есть развертывания Kubernetes, предпочтительнее выбрать Azure ARC.


## <a name="next-steps"></a>Дальнейшие действия

Сведения о локальном развертывании приложения с помощью kubectl см. в следующих статьях:

- [Развертывание приложения без отслеживания состояния на Azure Stack пограничных устройствах с помощью kubectl](azure-stack-edge-j-series-deploy-stateless-application-kubernetes.md).

Сведения о развертывании приложения с помощью IoT Edge см. в следующих статьях:

- [Развертывание примера модуля на Azure Stack границе с помощью IOT Edge](azure-stack-edge-gpu-deploy-sample-module.md).

Сведения о развертывании приложения с помощью дуги Azure см. в следующих статьях:

- [Развертывание приложения с помощью дуги Azure](azure-stack-edge-gpu-deploy-sample-module.md).
