---
title: Запуск модуля GPU на устройстве Microsoft Azure Stack ребра Pro GPU | Документация Майкрософт
description: Описывает настройку и запуск модуля на GPU на устройстве Azure Stack пограничной Pro с помощью портал Azure.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: how-to
ms.date: 08/25/2020
ms.author: alkohli
ms.openlocfilehash: 8b9f1180639f638e72fdea2f87958628a2e9e86b
ms.sourcegitcommit: 53acd9895a4a395efa6d7cd41d7f78e392b9cfbe
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "90891460"
---
# <a name="configure-and-run-a-module-on-gpu-on-azure-stack-edge-pro-device"></a>Настройка и запуск модуля на GPU на устройстве Azure Stack ребра Pro

Устройство Azure Stack пограничной Pro содержит один или несколько графических процессоров (GPU). Графические процессоры являются популярным выбором для вычислений AI, так как они предлагают возможности параллельной обработки и выполняются быстрее при отрисовке изображений, чем на центральных единицах обработки (ЦП). Дополнительные сведения о GPU, содержащемся на устройстве Azure Stack ребра Pro, см. в [подAzure Stackе технические спецификации устройства](azure-stack-edge-gpu-technical-specifications-compliance.md).

В этой статье описывается, как настроить и запустить модуль на GPU на устройстве Azure Stack ребра Pro. В этой статье вы будете использовать общедоступные **цифры** модуля контейнера, написанные для видеопроцессоров NVIDIA T4. Эту процедуру можно использовать для настройки любых других модулей, опубликованных NVIDIA для этих графических процессоров.


## <a name="prerequisites"></a>Предварительные требования

Перед тем как начать, убедитесь в следующем.

1. У вас есть доступ к GPU, поддерживающему 1-node Azure Stack пограничным устройством Pro. Это устройство активируется с помощью ресурса в Azure.  

## <a name="configure-module-to-use-gpu"></a>Настройка модуля для использования GPU

Чтобы настроить модуль на использование GPU на устройстве Azure Stack ребра Pro для запуска модуля, выполните следующие действия.

1. В портал Azure перейдите к ресурсу, связанному с устройством. 

2. Поочередно выберите **Вычисления Edge > Начало работы**. На плитке **Настройка вычислений ребра** выберите настроить.

    ![Настройка модуля для использования GPU 1](media/azure-stack-edge-j-series-configure-gpu-modules/configure-compute-1.png)

3. В колонке **Настройка вычислений с границами** :

    1. В качестве **центра Интернета вещей**выберите **создать**.
    2. Укажите имя для ресурса центра Интернета вещей, которое требуется создать для устройства. ЧТОБЫ использовать уровень Free, выберите существующий ресурс. 
    3. Запишите устройство IoT Edge и шлюз IoT, созданные с помощью ресурса центра Интернета вещей. Эти сведения будут использоваться в последующих шагах.

    ![Настройка модуля для использования GPU 2](media/azure-stack-edge-j-series-configure-gpu-modules/configure-compute-2.png)

4. Создание ресурса центра Интернета вещей занимает несколько минут. После создания ресурса на плитке **Настройка вычислений ребра** выберите **Просмотреть конфигурацию** , чтобы просмотреть сведения о ресурсе центра Интернета вещей.

    ![Настройка модуля для использования GPU 4](media/azure-stack-edge-j-series-configure-gpu-modules/configure-compute-4.png)

5. Перейдите в раздел **Автоматическое управление устройствами > IOT Edge**.

    ![Настройка модуля для использования GPU 6](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-2.png)

    В правой области отображается устройство IoT Edge, связанное с устройством Azure Stack. Pro. Это соответствует устройству IoT Edge, созданному на предыдущем шаге при создании ресурса центра Интернета вещей. 
    
6. Выберите это устройство IoT Edge.

   ![Настройка модуля для использования GPU 7](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-3.png)

7.  Щелкните **Set modules** (Настроить модули).

    ![Настройка модуля для использования GPU 8](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-4.png)

8. Выберите **+ Добавить** , а затем **+ IOT Edge модуль**. 

    ![Настройка модуля для использования GPU 9](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-5.png)

9. На вкладке **Добавление модуля IOT Edge** :

    1. Укажите **универсальный код ресурса (URI) образа**. Здесь вы будете использовать общедоступные **цифры** модуля NVIDIA. 
    
    2. Задайте для **параметра Политика перезапуска** значение **всегда**.
    
    3. Задайте для **требуемого состояния** значение **работает**.
    
    ![Настройка модуля для использования GPU 10](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-6.png)

10. На вкладке **переменные среды** укажите имя переменной и соответствующее значение. 

    1. Чтобы текущий модуль использовал один GPU на этом устройстве, используйте NVIDIA_VISIBLE_DEVICES. 

    2. Задайте значение 0 или 1. Это гарантирует, что устройство использует по крайней мере один GPU для этого модуля. Если задать значение 0, 1, это означает, что модуль использует оба GPU на устройстве.

        ![Настройка модуля для использования GPU 11](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-7.png)

        Дополнительные сведения о переменных среды, которые можно использовать с графическим процессором NVIDIA, см. в подразделе " [Среда выполнения контейнера NVIDIA](https://github.com/NVIDIA/nvidia-container-runtime#environment-variables-oci-spec)".

    > [!NOTE]
    > GPU можно сопоставить только с одним модулем. В модуле можно использовать один и тот же или не GPU. 

11. Введите имя модуля. На этом этапе можно указать параметр создать контейнер и изменить параметры двойникаа модуля или, если это сделано, нажать кнопку **Добавить**. 

    ![Настройка модуля для использования GPU 12](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-8.png)

12. Убедитесь, что модуль работает, и выберите **проверить и создать**.    

    ![Настройка модуля для использования GPU 13](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-9.png)

13. На вкладке " **Проверка и создание** " отображаются выбранные параметры развертывания. Проверьте параметры и нажмите кнопку **создать**.
    
    ![Настройка модуля для использования GPU 14](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-10.png)

14. Запишите **состояние среды выполнения** модуля. 
    
    ![Настройка модуля для использования GPU 15](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-11.png)

    Развертывание модуля займет несколько минут. Выберите **Обновить** , и **состояние среды выполнения** должно отобразиться на **выполняется**.

    ![Настройка модуля для использования GPU 16](media/azure-stack-edge-j-series-configure-gpu-modules/configure-gpu-12.png)


## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [переменных среды, которые можно использовать с графическим процессором NVIDIA](https://github.com/NVIDIA/nvidia-container-runtime#environment-variables-oci-spec).
