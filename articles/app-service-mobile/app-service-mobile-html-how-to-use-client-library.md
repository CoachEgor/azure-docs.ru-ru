---
title: Использование пакета SDK для JavaScript
description: Как использовать v для мобильных приложений Azure
ms.assetid: 53b78965-caa3-4b22-bb67-5bd5c19d03c4
ms.tgt_pltfrm: html
ms.devlang: javascript
ms.topic: article
ms.date: 06/25/2019
ms.openlocfilehash: 0f70523b5b27a4f3db86bacf39469e233e43f807
ms.sourcegitcommit: 3d4917ed58603ab59d1902c5d8388b954147fe50
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2019
ms.locfileid: "74668831"
---
# <a name="how-to-use-the-javascript-client-library-for-azure-mobile-apps"></a>Как использовать клиентскую библиотеку JavaScript для мобильных приложений Azure
[!INCLUDE [app-service-mobile-selector-client-library](../../includes/app-service-mobile-selector-client-library.md)]

> [!NOTE]
> Центр приложений Visual Studio поддерживает комплексные и интегрированные службы, необходимые для разработки мобильных приложений. Разработчики могут использовать службы **Build**, **Test** и **Distribute** для настройки конвейера непрерывной интеграции и доставки. После развертывания приложения разработчики могут отслеживать его состояние и использование с помощью служб **Analytics** и **Diagnostics**, а также взаимодействовать с пользователями с помощью службы **Push**. Разработчики также могут использовать **Auth** для реализации проверки подлинности пользователей и службу **Data** для хранения и синхронизации данных приложений в облаке.
>
> Если вы хотите интегрировать облачные службы с мобильным приложением, зарегистрируйтесь в [Центре приложений](https://appcenter.ms/?utm_source=zumo&utm_medium=Azure&utm_campaign=zumo%20doc) сегодня.

## <a name="overview"></a>Краткое описание
В этом руководстве показано, как реализовать типичные сценарии с использованием последней версии [пакета SDK JavaScript для мобильных приложений Azure]. Если вы не знакомы с мобильными приложениями Azure, сначала изучите статью [Быстрый запуск мобильного приложения Azure] , чтобы создать серверную часть и таблицу. В этом руководстве мы рассмотрим использование мобильного внутреннего сервера в веб-приложениях HTML и JavaScript.

## <a name="supported-platforms"></a>Поддерживаемые платформы
Для текущей и последней версий поддерживаются основные браузеры: Google Chrome, Microsoft Edge, Microsoft Internet Explorer и Mozilla Firefox.  Ожидается, что пакет SDK будет работать с любым относительно современным браузером.

Этот пакет распространяется в виде универсального модуля JavaScript, поэтому он поддерживает глобальные переменные, AMD и форматы CommonJS.

## <a name="Setup"></a>Настройка и необходимые компоненты
В данном руководстве предполагается, что вы уже создали серверную часть с таблицей. В этом руководстве предполагается, что в таблице используется та же схему, что и в таблицах, приведенных в этих учебниках.

Установить пакет SDK JavaScript для мобильных приложений Azure можно с помощью команды `npm` .

```
npm install azure-mobile-apps-client --save
```

Библиотеку также можно использовать как модуль ES2015 в средах CommonJS, таких как Browserify и Webpack, а также как библиотеку AMD.  Пример.

```javascript
// For ECMAScript 5.1 CommonJS
var WindowsAzure = require('azure-mobile-apps-client');
// For ES2015 modules
import * as WindowsAzure from 'azure-mobile-apps-client';
```

Можно также использовать готовую версию пакета SDK, скачав ее непосредственно из нашей сети CDN.

```html
<script src="https://zumo.blob.core.windows.net/sdk/azure-mobile-apps-client.min.js"></script>
```

[!INCLUDE [app-service-mobile-html-js-library](../../includes/app-service-mobile-html-js-library.md)]

## <a name="auth"></a>Практическое руководство. Проверка подлинности пользователей
Служба приложений Azure поддерживает аутентификацию и авторизацию пользователей с помощью различных внешних поставщиков удостоверений: Facebook, Google, учетная запись Майкрософт и Twitter. Можно задать разрешения таблиц, чтобы предоставить доступ к определенным операциям только пользователям, прошедшим проверку подлинности. Удостоверения пользователей, прошедших проверку подлинности, также можно применять для реализации правил авторизации в серверных скриптах. Дополнительные сведения см. в учебнике [Приступая к работе с аутентификацией в мобильных службах].

Поддерживается два потока аутентификации: серверный и клиентский.  Серверный поток обеспечивает самый простой способ проверки подлинности, так как он использует веб-интерфейс проверки подлинности. Клиентский поток обеспечивает более тесную интеграцию с возможностями устройства, такими как единый вход, так как использует пакеты SDK конкретного поставщика.

[!INCLUDE [app-service-mobile-html-js-auth-library](../../includes/app-service-mobile-html-js-auth-library.md)]

### <a name="configure-external-redirect-urls"></a>Практическое руководство. Настройка службы мобильных приложений для внешних URL-адресов перенаправления
Для обработки потоков пользовательского интерфейса OAuth некоторые типы приложений JavaScript используют функцию замыкания на себя.  К этим возможностям относятся следующие:

* выполнение службы в локальной среде;
* использование динамической перезагрузки с платформой Ionic;
* перенаправление в службу приложений для аутентификации.

Выполнение в локальной среде может вызвать проблемы, так как по умолчанию аутентификация службы приложений настроена только для доступа из серверной части мобильного приложения. Следуйте инструкциям ниже, чтобы изменить параметры службы приложений для включения аутентификации при выполнении сервера в локальной среде.

1. Войдите на [Портал Azure]
2. Перейдите к серверной части мобильного приложения.
3. В меню **Средства разработки** выберите **Обозреватель ресурсов**.
4. Щелкните **Перейти** , чтобы открыть обозреватель ресурсов для серверной части мобильного приложения в новой вкладке или окне.
5. Разверните узел **config** > **authsettings** для своего приложения.
6. Нажмите кнопку **Изменить** , чтобы включить режим редактирования ресурса.
7. Найдите элемент **allowedExternalRedirectUrls** , который должен иметь значение NULL. Добавьте URL-адреса в массив.

         "allowedExternalRedirectUrls": [
             "http://localhost:3000",
             "https://localhost:3000"
         ],

    Замените URL-адреса в массиве URL-адресами службы. В данном примере — это `http://localhost:3000` для локального примера службы Node.js. Можно также использовать адрес `http://localhost:4400` для службы Ripple или для других URL-адресов, в зависимости от настроек приложения.
8. В верхней части страницы щелкните **Чтение и запись**, затем щелкните **PUT**, чтобы сохранить изменения.

Вам также необходимо добавить URL-адреса замыкания на себя в настройках списка разрешений CORS.

1. Вернитесь на [портал Azure].
2. Перейдите к серверной части мобильного приложения.
3. В меню **API** щелкните **CORS**.
4. Введите каждый URL-адрес в пустое текстовое поле **Разрешенные источники** .  Будет создано новое текстовое поле.
5. Щелкните **Сохранить**

После обновления серверной части мобильного приложения вы сможете использовать новые URL-адреса замыкания на себя в приложении.

<!-- URLs. -->
[Быстрый запуск мобильного приложения Azure]: app-service-mobile-cordova-get-started.md
[Приступая к работе с аутентификацией в мобильных службах]: app-service-mobile-cordova-get-started-users.md
[Add authentication to your app]: app-service-mobile-cordova-get-started-users.md

[Портал Azure]: https://portal.azure.com/
[пакета SDK JavaScript для мобильных приложений Azure]: https://www.npmjs.com/package/azure-mobile-apps-client
[Query object documentation]: https://msdn.microsoft.com/library/azure/jj613353.aspx
