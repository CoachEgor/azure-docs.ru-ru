---
title: включение файла
description: включение файла
services: virtual-machines
author: shants123
ms.service: virtual-machines
ms.topic: include
ms.date: 8/22/2019
ms.author: shants
ms.custom: include file
ms.openlocfilehash: b2a7bbef2c421281780c0191fa32381468899bbf
ms.sourcegitcommit: 3f78a6ffee0b83788d554959db7efc5d00130376
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2019
ms.locfileid: "70020353"
---
Azure периодически обновляет свою платформу, чтобы повысить надежность, производительность и безопасность инфраструктуры узла для виртуальных машин. Цель этих обновлений — от установки исправлений программных компонентов в среде размещения до обновления сетевых компонентов или выликвидации оборудования. 

Обновления редко влияют на размещенные виртуальные машины. Когда обновления вступают в действие, Azure выбирает метод с минимальным влиянием на обновления:

- Если обновление не требует перезагрузки, виртуальная машина приостанавливается во время обновления узла или виртуальная машина переносится на уже обновленный узел.

- Если обслуживание требует перезагрузки, вы получаете уведомления о плановом обслуживании. Azure также предоставляет временное окно, в котором можно начать обслуживание самостоятельно, в любое удобное для вас время. Период самообслуживания обычно составляет 35 дней, если обслуживание не срочно. Azure — это инвестиции в технологии, чтобы сократить число случаев, в которых запланированное обслуживание платформы требует перезагрузки виртуальных машин. 

На этой странице описано, как Azure выполняет обслуживание обоих типов. Дополнительные сведения о незапланированных событиях (сбоях) см. в статье [Управление доступностью виртуальных машин для Windows](../articles/virtual-machines/windows/manage-availability.md) или соответствующей статьи для [Linux](../articles/virtual-machines/linux/manage-availability.md).

На виртуальной машине можно получать уведомления о предстоящем обслуживании [с помощью запланированные события для Windows](../articles/virtual-machines/windows/scheduled-events.md) или [Linux](../articles/virtual-machines/linux/scheduled-events.md).

Инструкции по управлению плановым обслуживанием см. в статье [обработка уведомлений о плановом обслуживании для Linux](../articles/virtual-machines/linux/maintenance-notifications.md) или соответствующей статьи для [Windows](../articles/virtual-machines/windows/maintenance-notifications.md).

## <a name="maintenance-that-doesnt-require-a-reboot"></a>Обслуживание, не требующее перезагрузки

Как упоминалось ранее, большинство обновлений платформы не влияет на виртуальные машины клиента. Если обновление без влияния невозможно, Azure выбирает механизм обновления, который наименее воздействие на виртуальные машины клиентов. 

Наиболее ненулевое обслуживание приостанавливает работу виртуальной машины менее 10 секунд. В некоторых случаях Azure использует механизмы обслуживания с сохранением памяти. Эти механизмы приостанавливают работу виртуальной машины в течение 30 секунд и сохраняют память в ОЗУ. После этого виртуальная машина возобновляется, и ее часы автоматически синхронизируются. 

Обслуживание с сохранением памяти работает на более чем 90% виртуальных машин Azure. Он не работает для серии G, M, N и H. Azure все чаще использует технологии динамической миграции и улучшает механизмы обслуживания с сохранением памяти для уменьшения длительности паузы.  

Эти операции обслуживания, не требующие перезагрузки, применяются к одному домену сбоя за раз. Они останавливаются, если получают сигналы исправности предупреждений. 

Эти типы обновлений могут повлиять на некоторые приложения. Когда виртуальная машина динамически переносится на другой узел, некоторые конфиденциальные рабочие нагрузки могут привести к снижению производительности в течение нескольких минут, ведущих к приостановке виртуальной машины. Чтобы подготовиться к обслуживанию виртуальных машин и снизить влияние на обслуживание Azure, попробуйте [использовать запланированные события для Windows](../articles/virtual-machines/windows/scheduled-events.md) или [Linux](../articles/virtual-machines/linux/scheduled-events.md) для таких приложений. Azure также предоставляет полный контроль над таким ненулевым обслуживанием платформы на [выделенных узлах Azure](../articles/virtual-machines/windows/dedicated-hosts.md) и [изолированных виртуальных машинах](../articles/security/fundamentals/isolation-choices.md). Функция управления обслуживанием находится на этапе предварительной версии, и вы можете запросить доступ, отправив [форму регистрации](https://forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR6lJf7DwiQxNmz51ksQvxV9UNUM3UllWUjBMTFZQUFhHUDI0VTBPQlJFNS4u). Она дает возможность пропускать обновления платформы, отличные от нуля, и применять обновления в качестве пакетов в течение выбранного времени в течение интервала в течение 35 дней.

### <a name="live-migration"></a>Динамическая миграция

Динамическая миграция — это операция, которая не требует перезагрузки и сохраняет память для виртуальной машины. Это приводит к паузе или замораживанию, обычно не превышающей 5 секунд. За исключением серии G, M, N и H, все виртуальные машины в инфраструктуре как услуги (IaaS) подходят для динамической миграции. Подходящие виртуальные машины представляют более 90 процентов виртуальных машин IaaS, развернутых на парк Azure. 

Платформа Azure запускает динамическую миграцию в следующих сценариях:
- Плановое обслуживание
- Сбой оборудования
- Оптимизация распределения

В некоторых сценариях планового обслуживания используется динамическая миграция, и вы можете использовать Запланированные события, чтобы заранее получить сведения о начале операций динамической миграции.

Динамическая миграция также может использоваться для перемещения виртуальных машин, когда Машинное обучение Azure алгоритмы прогнозирует незапланированный сбой оборудования или если требуется оптимизировать выделение ресурсов виртуальной машины. Дополнительные сведения о прогнозном моделировании, который обнаруживает экземпляры сниженного оборудования, см. [в статье улучшение устойчивости виртуальных машин Azure с помощью прогнозного машинного обучения и динамической миграции](https://azure.microsoft.com/blog/improving-azure-virtual-machine-resiliency-with-predictive-ml-and-live-migration/?WT.mc_id=thomasmaurer-blog-thmaure). Уведомления динамической миграции отображаются в портал Azure в журналах мониторинга и работоспособности служб, а также в Запланированные события при использовании этих служб.

## <a name="maintenance-that-requires-a-reboot"></a>Обслуживание, требующее перезагрузки

В редких случаях, когда требуется перезагрузка виртуальных машин для планового обслуживания, вы будете уведомлены заранее. Плановое обслуживание включает в себя два этапа: этап самообслуживания и этап запланированного обслуживания.

На *этапе самообслуживания*, который обычно длится четыре недели, вы запускаете обслуживание виртуальных машин. В рамках самообслуживания можно запросить каждую виртуальную машину, чтобы просмотреть ее состояние и результат последнего запроса на обслуживание.

При запуске самостоятельного обслуживания виртуальная машина повторно развертывается на уже обновленном узле. Так как виртуальная машина перезагружается, происходит потеря временного диска и обновляются динамические IP-адреса, связанные с виртуальным сетевым интерфейсом.

Если во время самостоятельного обслуживания возникает ошибка, операция останавливается, виртуальная машина не обновляется, и вы получаете возможность повторить попытку самостоятельного обслуживания. 

После завершения этапа самообслуживания начинается *этап запланированного обслуживания* . На этом этапе вы по-прежнему можете запрашивать этап обслуживания, но вы не можете начать обслуживание самостоятельно.

Дополнительные сведения об управлении обслуживанием, требующей перезагрузки, см. в статье [обработка уведомлений о плановом обслуживании для Linux](../articles/virtual-machines/linux/maintenance-notifications.md) или соответствующей статьи для [Windows](../articles/virtual-machines/windows/maintenance-notifications.md). 

### <a name="availability-considerations-during-scheduled-maintenance"></a>Вопросы доступности во время запланированного обслуживания 

Если вы решили дождаться запланированного этапа обслуживания, следует учесть несколько моментов, чтобы обеспечить максимальную доступность виртуальных машин. 

#### <a name="paired-regions"></a>Пары регионов

Каждый регион Azure связан с другим регионом в пределах одной географической области. Вместе они образуют пару регионов. На этапе запланированного обслуживания Azure обновляет только виртуальные машины в одном регионе пары регионов. Например, при обновлении виртуальной машины в северо-центральном регионе США Azure не обновляет ни одну виртуальную машину в Южной Центральной части США одновременно. Однако в других регионах, например в Северной Европе, обслуживание может происходить одновременно с обслуживанием в восточной части США. Чтобы лучше распределить виртуальные машины по регионам, ознакомьтесь с принципами работы пар регионов. Дополнительные сведения см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).

#### <a name="availability-sets-and-scale-sets"></a>Группы доступности и масштабируемые наборы

При развертывании рабочей нагрузки на виртуальных машинах Azure можно создать виртуальные машины в *группе доступности* , чтобы обеспечить высокий уровень доступности для приложения. С помощью групп доступности можно гарантировать, что во время сбоя или события обслуживания, требующего перезагрузки, доступна по крайней мере одна виртуальная машина.

Отдельные виртуальные машины в группе доступности могут быть распределены максимум между 20 доменами обновления. Во время запланированного обслуживания в любой момент времени обновляется только одна обновления. Доменов обновления не обязательно обновляются последовательно. 

Масштабируемые *наборы* виртуальных машин — это ресурсы вычислений Azure, которые можно использовать для развертывания набора идентичных виртуальных машин и управления ими в качестве одного ресурса. Масштабируемый набор автоматически развертывается в доменов обновления, например на виртуальных машинах в группе доступности. Как и в случае с группами доступности, при использовании масштабируемых наборов только один обновления обновляется в любое заданное время во время запланированного обслуживания.

Дополнительные сведения о настройке виртуальных машин для обеспечения высокой доступности см. в статье [Управление доступностью виртуальных машин для Windows](../articles/virtual-machines/windows/manage-availability.md) или соответствующей статьи для [Linux](../articles/virtual-machines/linux/manage-availability.md).
