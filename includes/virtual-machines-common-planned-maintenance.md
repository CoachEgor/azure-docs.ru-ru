---
title: включение файла
description: включение файла
services: virtual-machines
author: shants123
ms.service: virtual-machines
ms.topic: include
ms.date: 4/30/2019
ms.author: shants
ms.custom: include file
ms.openlocfilehash: 747fb9a38cc0c27d162192f4f3ed928e8a968f27
ms.sourcegitcommit: abeefca6cd5ca01c3e0b281832212aceff08bf3e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/02/2019
ms.locfileid: "64993117"
---
Azure периодически выполняет обновления платформы, чтобы повысить надежность, производительность и безопасность инфраструктуры узлов, в которой работают виртуальные машины. Эти обновления бывают разные: от исправлений программных компонентов в среде размещения и обновления сетевых компонентов до вывода оборудования из эксплуатации. Большинство этих обновлений не влияет на работу размещенных виртуальных машин. Но в некоторых случаях, когда они все же оказывают определенное воздействие, Azure выбирает для обновлений метод с минимальным влиянием.

- Если возможно обновление без перезагрузки, виртуальная машина приостанавливается во время обновления узла или динамически переносится на уже обновленный узел.

- Если для обслуживания требуется перезагрузка, вы получите уведомление во время планирования обслуживания. Azure предоставит вам возможность начать обслуживание самостоятельно в удобное для вас время. Период самообслуживания обычно является четыре недели, если только это не срочно провести обслуживание. Azure также вкладывает средства в технологии, снизить число случаев, когда виртуальные машины имеют должны быть перезагружены для платформы планового обслуживания. 

На этой странице описано, как Azure выполняет обслуживание обоих типов. Дополнительные сведения о внеплановых событиях (простоях) см. в статьях об управлении доступностью виртуальных машин [Windows](../articles/virtual-machines/windows/manage-availability.md) и [Linux](../articles/virtual-machines/linux/manage-availability.md).

Вы можете получать внутренние уведомления виртуальной машины о предстоящем обслуживании с помощью запланированных событий для [Windows](../articles/virtual-machines/windows/scheduled-events.md) или [Linux](../articles/virtual-machines/linux/scheduled-events.md).

Дополнительные сведения об управлении плановым обслуживанием см. в статье об обработке уведомлений о плановом обслуживании для [Linux](../articles/virtual-machines/linux/maintenance-notifications.md) или [Windows](../articles/virtual-machines/windows/maintenance-notifications.md).

## <a name="maintenance-not-requiring-a-reboot"></a>Обслуживание, не требующее перезагрузки

Цель обслуживания влияние наиболее ненулевое значение, не требующий перезагрузки — менее 10 секунд, приостановку для виртуальной Машины. Azure выбирает механизм обновления, который бы влияет на работу виртуальных машинах клиентов. В некоторых случаях используются механизмы обслуживания с сохранением памяти, который используется для приостановки виртуальной Машины до 30 секунд и сохраняет память в ОЗУ. Возобновляет работу виртуальной Машины и ее часы автоматически синхронизируются. В Azure все чаще используются технологии динамической миграции и вносятся улучшения в механизм обслуживания с сохранением памяти, необходимые для уменьшения длительности паузы.  

Эти операции обслуживания, не требующие перезагрузки, выполняются по доменам сбоя, и их выполнение будет прервано, если будет получено предупреждение о проблемах с работоспособностью. 

Эти обновления могут влиять на некоторые приложения. Если виртуальная машина динамически перемещается на другой узел, для некоторых чувствительных рабочих нагрузок может наблюдаться небольшое снижение производительности в течение нескольких минут, что приводит к приостановке работы виртуальной машины. При подготовке к обслуживанию виртуальной машины для таких приложений будут полезны запланированные события для [Windows](../articles/virtual-machines/windows/scheduled-events.md) или [Linux](../articles/virtual-machines/linux/scheduled-events.md); кроме того, приложения не затрагиваются во время обслуживания Azure. В Azure также совершенствуются функции управления обслуживанием для таких сверхчувствительных приложений. 

## <a name="live-migration"></a>Динамическая миграция

Динамическая миграция — это не rebootful операция, которая сохраняет память для виртуальной Машины, и результаты в ограниченной приостановить или закрепить, обычно длится не более 5 секунд. В настоящее время всю инфраструктуру как услугу (IaaS) виртуальные машины, помимо серии G, M, N и H, пригодны для динамической миграции. Это равнозначно более 90% компаний виртуальных машин IaaS, развернутых к парк Azure. 

Динамическая миграция инициируется структуре Azure, в следующих сценариях:
- Плановое обслуживание
- Сбой оборудования
- Оптимизация распределения

Динамической миграции используется в некоторых сценариях планового обслуживания, а запланированные события можно использовать знать заранее при активной начала операции миграции.

Динамическая миграция также используется для перемещения виртуальных машин из оборудования с приближающийся Прогнозируемый сбой при обнаружении нашей алгоритмами машинного обучения и для оптимизации распределения виртуальной машины. Дополнительные сведения о наших, обнаруживает экземпляры сниженной функциональности оборудования прогнозного моделирования, см. в разделе под названием записи блога [устойчивости улучшение виртуальной машине Azure с помощью прогнозной машинного Обучения и динамической миграции](https://azure.microsoft.com/blog/improving-azure-virtual-machine-resiliency-with-predictive-ml-and-live-migration/?WT.mc_id=thomasmaurer-blog-thmaure). Клиенты всегда будет выводиться сообщение динамической миграции на портале Azure в мониторе / журналы работоспособности службы, а также через запланированные события, если они используются.

## <a name="maintenance-requiring-a-reboot"></a>Обслуживание, требующее перезагрузки

В редких случаях, когда виртуальные машины необходимо перезагрузить при плановом обслуживании, вы получите сообщение заранее. Плановое обслуживание выполняется в два этапа: период самообслуживания и период запланированного обслуживания.

**Период самообслуживания** позволяет вам начинать обслуживание на виртуальных машинах. В течение этого времени, обычно четыре недели вы можете запрашивать каждой виртуальной Машины, чтобы просмотреть их состояние и проверить результат последнего запроса на обслуживание.

При запуске самостоятельного обслуживания виртуальная машина повторно развертывается на уже обновленном узле. Так как виртуальная машина перезапускается, временный диск удаляется, а связанные с виртуальным сетевым интерфейсом динамические IP-адреса обновляются.

Если во время запуска самообслуживания происходит ошибка, операция приостанавливается, виртуальная машина не обновляется, а вы получаете возможность повторить попытку самообслуживания. 

Когда заканчивается период самообслуживания, начинается **запланированный период обслуживания**. В течение этого времени вы все еще можете запрашивать период обслуживания, но вы не сможете инициировать обслуживание самостоятельно.

Сведения об управлении обслуживанием, которое требует перезагрузки, см. в статье об обработке уведомлений о плановом обслуживании для [Linux](../articles/virtual-machines/linux/maintenance-notifications.md) или [Windows](../articles/virtual-machines/windows/maintenance-notifications.md). 

### <a name="availability-considerations-during-scheduled-maintenance"></a>Вопросы доступности во время запланированного обслуживания 

Если вы решили дождаться запланированного периода обслуживания, чтобы обеспечить наивысшую доступность своих виртуальных машин, нужно учесть несколько факторов. 

#### <a name="paired-regions"></a>Пары регионов

Каждый регион Azure связывается с другим регионом в пределах той же географической территории, формируя пару регионов. На этапе запланированного обслуживания Azure обновляет виртуальные машины только в одном регионе из пары. Например, при обновлении виртуальных машин в центрально-северной части США Azure не будет одновременно обновлять виртуальные машины в центрально-южной части США. Однако в других регионах, например в Северной Европе, обслуживание может происходить одновременно с обслуживанием в восточной части США. Чтобы лучше распределить виртуальные машины по регионам, ознакомьтесь с принципами работы пар регионов. Дополнительные сведения см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).

#### <a name="availability-sets-and-scale-sets"></a>Группы доступности и масштабируемые наборы

При развертывании рабочей нагрузки на виртуальных машинах Azure вы можете создать виртуальные машины в группе доступности, чтобы обеспечить высокую доступность приложения. Это обеспечит доступность по крайней мере одной виртуальной машины во время обслуживания с перезагрузкой или при сбое.

Отдельные виртуальные машины в группе доступности могут быть распределены максимум между 20 доменами обновления. Во время запланированного обслуживания в конкретный момент времени всегда изменяется только один домен обновления. Изменения в доменах обновления не всегда происходят последовательно. 

Масштабируемые наборы виртуальных машин относятся к вычислительным ресурсам Azure, которые позволяют развертывать и администрировать идентичные виртуальные машины как единый ресурс. Масштабируемый набор автоматически развертывается в доменах обновления, как и виртуальные машины в группе доступности. Как и группа доступности, в конкретный момент времени в процессе запланированного обслуживания масштабируемый набор изменяется только в одном домене обновления.

Дополнительные сведения о настройке виртуальных машин для обеспечения высокой доступности см. в статьях об управлении доступностью виртуальных машин [Windows](../articles/virtual-machines/windows/manage-availability.md) и [Linux](../articles/virtual-machines/linux/manage-availability.md).
