---
author: zhangmanling
ms.service: cdn
ms.topic: include
ms.date: 11/21/2018
ms.author: mazha
ms.openlocfilehash: 7f80c8f1773cfeb8ddfb222d068a5c6571c2e5c7
ms.sourcegitcommit: 3102f886aa962842303c8753fe8fa5324a52834a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "60564239"
---
## <a name="prerequisites"></a>Технические условия
Перед созданием кода управления CDN необходимо выполнить определенную подготовку, чтобы код мог взаимодействовать с Azure Resource Manager. Для этого сделайте следующее:

* Создайте группу ресурсов для профиля CDN, который мы создадим в этом руководстве.
* Настройте Azure Active Directory, чтобы выполнить проверку подлинности приложения.
* Примените разрешения для группы ресурсов, чтобы только авторизованные пользователи могли с помощью клиента Azure AD взаимодействовать с профилем CDN.

### <a name="creating-the-resource-group"></a>Создание группы ресурсов
1. Войдите на [портал Azure](https://portal.azure.com).
2. Щелкните **Создать ресурс**.
3. Найдите **Группу ресурсов**, а затем в ее области щелкните **Создать**.

    ![Создание новой группы ресурсов](./media/cdn-app-dev-prep/cdn-new-rg-1-include.png)
3. Назовите группу ресурсов *CdnConsoleTutorial*.  Выберите свою подписку и ближайшее расположение.  При желании установите флажок **Закрепить на панели мониторинга**, чтобы закрепить группу ресурсов на панели мониторинга на портале.  Так ее будет проще найти.  Выберите необходимые параметры, а затем нажмите кнопку **Создать**.

    ![Присвоение имени группе ресурсов](./media/cdn-app-dev-prep/cdn-new-rg-2-include.png)
4. Если вы не закрепили созданную группу ресурсов на панели мониторинга, щелкните **Обзор**, а затем — **Группы ресурсов**, чтобы найти группу.  Щелкните группу ресурсов, чтобы открыть ее.  Запишите **идентификатор подписки**. Он понадобится нам позже.

    ![Присвоение имени группе ресурсов](./media/cdn-app-dev-prep/cdn-subscription-id-include.png)

### <a name="creating-the-azure-ad-application-and-applying-permissions"></a>Создание приложения Azure AD и применение разрешений
Существует два подхода к проверке подлинности приложений с Azure Active Directory: Отдельных пользователей или субъекта-службы. Субъект-служба аналогичен учетной записи службы в Windows.  Вместо того, чтобы предоставить разрешения на взаимодействие с профилями CDN определенному пользователю, мы предоставляем их субъекту-службе.  Субъекты-службы обычно используются для автоматических, неинтерактивных процессов.  Несмотря на то, что в этом учебнике создается интерактивное приложение консоли, мы будем использовать субъект-службу.

Создание субъекта-службы состоит из нескольких шагов, включая создание приложения Azure Active Directory.  Для этого воспользуйтесь [инструкциями из этого руководства](../articles/active-directory/develop/howto-create-service-principal-portal.md).

> [!IMPORTANT]
> Обязательно выполните все шаги, приведенные в [связанном руководстве](../articles/active-directory/develop/howto-create-service-principal-portal.md).  *Важно* выполнить все в точности, как описано.  Обязательно запишите **идентификатор клиента**, **доменное имя клиента** (обычно это домен *.onmicrosoft.com*, если вы не указали личный домен), **идентификатор клиента** и **ключ проверки подлинности клиента**, так как эти данные понадобятся позже.  Следует ответственно отнестись к защите **идентификатора клиента** и **ключа проверки подлинности клиента**, так как с помощью этих учетных данных любой пользователь может выполнять операции в качестве субъекта-службы.
>
> На шаге "Настройка мультитенантного приложения" выберите **Нет**.
>
> На шаге [Назначение роли приложению](../articles/active-directory/develop/howto-create-service-principal-portal.md#assign-the-application-to-a-role) укажите группу ресурсов *CdnConsoleTutorial*, созданную ранее, но вместо роли **Читатель** назначьте роль **Участник профиля CDN**.  Назначьте приложению роль **Участник профиля CDN** для группы ресурсов, а затем вернитесь к этому руководству. 
>
>

Когда вы создадите субъект-службу и назначите роль **Участник профиля CDN**, колонка **Пользователи** вашей группы ресурсов будет выглядеть так.

![Колонка "Пользователи"](./media/cdn-app-dev-prep/cdn-service-principal-include.png)

### <a name="interactive-user-authentication"></a>Интерактивная аутентификация пользователей
Если вместо субъекта-службы требуется настроить интерактивную аутентификацию отдельных пользователей, то необходимые действия будут похожи на настройку субъекта-службы.  На самом деле необходимо выполнить ту же самую процедуру, но с незначительными изменениями.

> [!IMPORTANT]
> Выполните следующие шаги, только если решили использовать аутентификацию отдельных пользователей, а не субъект-службу.
>
>

1. Создавая приложение, вместо значения **Веб-приложение** выберите **Собственное приложение**.

    ![Собственное приложение](./media/cdn-app-dev-prep/cdn-native-application-include.png)
2. На следующей странице вам будет предложено ввести **универсальный код ресурса (URI) перенаправления**.  Универсальный код ресурса (URI) не будет проверяться, но запомните, что вы ввели. Он понадобится вам позже.
3. Не нужно создавать **ключ проверки подлинности клиента**.
4. Вместо того, чтобы назначить роль **Участник роли CDN** субъекту-службе, мы назначим ее отдельным пользователям или группам.  Из этого примера понятно, что пользователю *CDN Demo User* назначена роль **CDN Profile Contributor** (Участник профиля CDN).  

    ![Индивидуальный доступ пользователей](./media/cdn-app-dev-prep/cdn-aad-user-include.png)
