---
author: roygara
ms.service: storage
ms.topic: include
ms.date: 12/11/2018
ms.author: rogarana
ms.openlocfilehash: aeb15fbb8da44a203789e06a359cb664998602ab
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "77123149"
---
Агент службы синхронизации файлов Azure обновляется на регулярной основе. Это позволяет добавлять новые возможности и устранять ошибки. Мы рекомендуем настроить Центр обновления Майкрософт, чтобы получать обновления службы синхронизации файлов Azure по мере их выпуска.

#### <a name="major-vs-minor-agent-versions"></a>Сравнение основной и дополнительных версий агента
* Основные версии агента часто содержат новые функции, и в первой части номера версии указан возрастающий номер. Например, \*2.\*.\*\*
* Дополнительные версии агента также называются "исправлениями" и выпускаются чаще по сравнению с основными версиями. Они часто содержат исправления уязвимостей и небольшие усовершенствования, но не содержат новых функций. Например, \*\*.3.\*\*

#### <a name="upgrade-paths"></a>Варианты обновления
Существует четыре принятых и проверенных способа установки обновлений агента службы синхронизации файлов Azure. 
1. **(Рекомендуется.) Настройка в Центре обновлений Майкрософт автоматической загрузки и установки обновлений агента.**  
    Рекомендуется также устанавливать все обновления службы синхронизации файлов в Azure, чтобы гарантировать наличие у себя последних исправлений для агента сервера. Центр обновления Майкрософт упрощает этот процесс — обновления автоматически загружаются и устанавливаются на вашем компьютере.
2. **Используйте AfsUpdater.exe для скачивания и установки обновлений агента.**  
    AfsUpdater.exe находится в каталоге установки агента. Дважды щелкните исполняемый файл, чтобы скачать и установить обновления агента. 
3. **Патч существующего агента Azure File Sync с помощью файла патча обновления Майкрософт или .msp исполняемый. Последний пакет обновления Azure File Sync можно загрузить из [каталога обновлений Майкрософт.](https://www.catalog.update.microsoft.com/Search.aspx?q=Azure%20File%20Sync)**  
    В результате выполнения исполняемого MSP-файла происходит обновление установленной службы синхронизации файлов Azure тем же методом, что применяется автоматически в Центре обновления Майкрософт, как описано в предыдущем варианте. В случае принятия исправлений от Центра обновления Майкрософт выполняется обновление "на месте" установки службы синхронизации файлов Azure.
4. **Загрузите новейший установщик файлов Azure Sync из [Центра загрузки Microsoft.](https://go.microsoft.com/fwlink/?linkid=858257)**  
    Для обновления существующей установки агента службы синхронизации файлов Azure удалите старую версию, а затем установите последнюю версию с помощью загруженного установщика. Этот установщик выполняет регистрацию сервера, настраивает группы синхронизации и все остальные параметры.

#### <a name="automatic-agent-lifecycle-management"></a>Автоматическое управление жизненным циклом агента
С агентом версии 6, команда синхронизации файлов ввела функцию автоматического обновления агента. Можно выбрать один из двух режимов и указать окно обслуживания, в котором будет предпринята попытка обновления на сервере. Эта функция предназначена, чтобы помочь вам с агентом управления жизненным циклом либо предоставление ограждения предотвращения вашего агента от истечения срока действия или позволяет без хлопот, оставаться в актуальном состоянии.
1. **Настройка по умолчанию** будет пытаться предотвратить истечение срока действия агента. В течение 21 дня с даты истечения срока действия агента агент попытается самообновление. Он начнет попытку обновления один раз в неделю в течение 21 дней до истечения срока действия и в выбранном окне обслуживания. **Эта опция не устраняет необходимость в регулярных патчах обновления Майкрософт.**
1. Дополнительно можно выбрать, что агент автоматически обновится, как только появится новая версия агента (в настоящее время не применима к кластерным серверам). Это обновление будет происходить во время выбранного окна обслуживания и позволит вашему серверу воспользоваться новыми функциями и улучшениями, как только они станут общедоступными. Это рекомендуемая, беззаботная настройка, которая обеспечит основные версии агента, а также регулярные патчи обновления на вашем сервере. Каждый агент выпущен на качество ГА. Если вы выберете эту опцию, корпорация Майкрософт отправит вам новейшую версию агента. Кластерные серверы исключены. Как только полет завершен, агент также станет доступен на [Aka.ms/AFS/agent Центра загрузки Майкрософт.](https://go.microsoft.com/fwlink/?linkid=858257)

 ##### <a name="changing-the-auto-upgrade-setting"></a>Изменение настройки автоматического обновления

Следующие инструкции описывают, как изменить настройки после завершения установки, если вам нужно внести изменения.

Откройте консоль PowerShell и перейдите в каталог, где вы установили агент синхронизации, а затем импортируйте серверcm. По умолчанию это будет выглядеть примерно так:
```powershell
cd 'C:\Program Files\Azure\StorageSyncAgent'
Import-Module -Name .\StorageSync.Management.ServerCmdlets.dll
```

Можно запустить, `Get-StorageSyncAgentAutoUpdatePolicy` чтобы проверить текущую настройку политики и определить, хотите ли вы изменить его.

Чтобы изменить текущую настройку политики в трек с задержкой обновления, можно использовать:
```powershell
Set-StorageSyncAgentAutoUpdatePolicy -PolicyMode UpdateBeforeExpiration
```

Чтобы изменить текущую настройку политики в трек немедленного обновления, можно использовать:
```powershell
Set-StorageSyncAgentAutoUpdatePolicy -PolicyMode InstallLatest
```

#### <a name="agent-lifecycle-and-change-management-guarantees"></a>Гарантии относительно жизненного цикла агента и управления изменениями
Azure File Sync — это облачный сервис, который постоянно внедряет новые функции и улучшения. В частности, из этого следует, что любая конкретная версия агента службы синхронизации файлов Azure поддерживается лишь ограниченное время. Чтобы облегчить развертывание, следующие правила гарантируют, что у вас достаточно времени и уведомлений для размещения обновлений/обновлений агента в процессе управления изменениями:

- Основные версии агента поддерживаются по меньшей мере в течение шести месяцев с момента их появления.
- Мы гарантируем наличие по крайней мере трехмесячного перекрытия между сроками поддержки основных версий агентов. 
- На зарегистрированные серверы, использующие агент, срок поддержки которого истекает, не позже чем за три месяца отправляются соответствующие уведомления. Вы можете проверить, не использует ли зарегистрированный сервер старую версию агента в разделе зарегистрированных серверов службы синхронизации хранилища.
- Срок действия дополнительных версий агента привязан к сроку действия основной версии. Так, например, при выпуске агента версии 3.0 все версии агента 2.\* сразу обозначаются как такие, поддержка которых должна быть прекращена.

> [!Note]
> При установке версии агента с предупреждением о скором истечении срока поддержи процесс установки завершится успешно, но отобразится соответствующее предупреждение. Попытки установки или подключения с помощью простроченной версии агента не поддерживаются и блокируются.
