---
title: включить файл
description: включить файл
services: active-directory
documentationcenter: dev-center-name
author: jmprieur
manager: CelesteDG
editor: ''
ms.service: active-directory
ms.devlang: na
ms.topic: include
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 05/07/2019
ms.author: jmprieur
ms.custom: include file
ms.openlocfilehash: 3d4e45d1bf53bab4d1f9c45367f9d051f1668e2b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76309004"
---
### <a name="authenticationresult-properties-in-msalnet"></a>АутентификацияРезультатные свойства в MSAL.NET

Методы приобретения токенов `AuthenticationResult`возвращаются. Для методов асин, `Task<AuthenticationResult>` возвращает.

В MSAL.NET `AuthenticationResult` разоблачает:

- `AccessToken`для веб-API для доступа к ресурсам. Этот параметр представляет собой строку, обычно закодированную Базой-64 JWT. Клиент никогда не должен заглядывать внутрь токена доступа. Формат не гарантируется оставаться стабильным, и он может быть зашифрован для ресурса. Написание кода, который зависит от содержимого маркера доступа к клиенту, является одним из крупнейших источников ошибок и ошибок клиента. Для получения дополнительной [информации см.](../articles/active-directory/develop/access-tokens.md)
- `IdToken`для пользователя. Этот параметр является закодированным JWT. Для получения дополнительной информации смотрите [токены ID](../articles/active-directory/develop/id-tokens.md).
- `ExpiresOn`унасисивет дату и время истечения срока действия токена.
- `TenantId`содержит арендатора, в котором был найден пользователь. Для гостевых пользователей в b2B-сценариях Azure Active Directory (Azure AD) идентификатор клиента является арендатором, а не уникальным арендатором.
Когда токен доставляется пользователю, `AuthenticationResult` также содержит информацию об этом пользователе. Для конфиденциальных потоков клиентов, где запрашиваются токены без пользователя для приложения, эта информация о пользователе является нулевой.
- Для `Scopes` которого был выпущен токен.
- Уникальный идентификатор пользователя.

### <a name="iaccount"></a>IAccount

MSAL.NET определяет понятие учетной записи через `IAccount` интерфейс. Это нарушение изменения обеспечивает правильную семантику. Один и тот же пользователь может иметь несколько учетных записей в разных каталогах Azure AD. Кроме того, MSAL.NET предоставляет более подробную информацию в случае гостевых сценариев, поскольку предоставляется информация о домашнем аккаунте.
На следующей диаграмме показана структура интерфейса. `IAccount`

![Структура интерфейса IAccount](https://user-images.githubusercontent.com/13203188/44657759-4f2df780-a9fe-11e8-97d1-1abbffade340.png)

Класс `AccountId` идентифицирует учетную запись в конкретном арендаторе с свойствами, указанными в следующей таблице.

| Свойство | Описание |
|----------|-------------|
| `TenantId` | Представление строки для GUID, которое является идентификатором клиента, в котором находится учетная запись. |
| `ObjectId` | Представление строки для GUID, которое является идентификатором пользователя, владеющего учетной записью в арендаторе. |
| `Identifier` | Уникальный идентификатор для учетной записи. `Identifier`является конкатенацией `ObjectId` и `TenantId` разделены запятой. Они не закодированы на базе 64. |

Интерфейс `IAccount` представляет информацию об одной учетной записи. Один и тот же пользователь может присутствовать в разных арендаторах, что означает, что пользователь может иметь несколько учетных записей. Его члены показаны в следующей таблице.

| Свойство | Описание |
|----------|-------------|
| `Username` | Строка, содержащая отображаемое значение в формате john.doe@contoso.comUserPrincipalName (UPN), например, . Эта строка может быть нулевой, в отличие от HomeAccountId и HomeAccountId.Identifier, которые не будут нулевыми. Это свойство `DisplayableId` заменяет `IUser` свойство в предыдущих версиях MSAL.NET. |
| `Environment` | Строка, содержащая поставщика идентификационных `login.microsoftonline.com`данных для этой учетной записи, например, . Это свойство `IdentityProvider` заменяет `IUser`свойство `IdentityProvider` , за исключением того, что также была информация о арендаторе, в дополнение к облачной среде. Здесь значение только хост. |
| `HomeAccountId` | Идентификатор учетной записи домашней учетной записи пользователя. Это свойство однозначно идентифицирует пользователя через арендаторов Azure AD. |

### <a name="use-the-token-to-call-a-protected-api"></a>Используйте маркер для вызова защищенного API

После `AuthenticationResult` того, как `result`возвращается MSAL в, добавить его в заголовок авторизации HTTP, прежде чем сделать вызов для доступа к защищенному Web API.

```csharp
httpClient = new HttpClient();
httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", result.AccessToken);

// Call the web API.
HttpResponseMessage response = await _httpClient.GetAsync(apiUri);
...
}
```