---
title: включить файл
description: включить файл
services: event-grid
author: spelluru
ms.service: event-grid
ms.topic: include
ms.date: 10/10/2019
ms.author: spelluru
ms.custom: include file
ms.openlocfilehash: b453a04a170764a037eed7415eaf71e5a4d37526
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "76844600"
---
## <a name="deploy-event-grid-iot-edge-module"></a>Развертывание модуля Event Grid IoT Edge

Существует несколько способов развертывания модулей на устройстве IoT Edge, и все они работают для Azure Event Grid на IoT Edge. В этой статье описаны шаги по развертыванию Event Grid на IoT Edge с портала Azure.

>[!NOTE]
> В этом уроке вы развернете модуль Event Grid без настойчивости. Это означает, что любые темы и подписки, которые вы создаете в этом учебнике, будут удалены при передислокации модуля. Для получения дополнительной информации о том, как [Persist state in Linux](../articles/event-grid/edge/persist-state-linux.md) настроить настойчивость, [Persist state in Windows](../articles/event-grid/edge/persist-state-windows.md)см. Для производственных нагрузок мы рекомендуем установить модуль Event Grid с сохранением.

>[!IMPORTANT]
> В этом учебнике модуль Event Grid будет развернут с выключенной проверкой подлинности клиента и позволит абонентам HTTP. Для производственных нагрузок мы рекомендуем включить только запросы HTTPS и подписчиков с включенной аутентификацией клиента. Для получения дополнительной информации о том, как настроить модуль Event Grid безопасно, смотрите [безопасности и аутентификации](../articles/event-grid/edge/security-authentication.md).
 
### <a name="select-your-iot-edge-device"></a>Выберите устройство IoT Edge

1. Войти на [портал Azure](https://portal.azure.com)
1. Перейдите в Центр Интернета вещей.
1. Выберите **IoT Edge** из меню в разделе **Автоматическое управление устройствами.** 
1. Нажмите на идентификатор целевого устройства из списка устройств
1. Выберите **набор модулей.** Держите страницу открытой. Вы продолжите шаги в следующем разделе.

### <a name="configure-a-deployment-manifest"></a>Настройка манифеста развертывания

Манифест развертывания — это документ JSON, в котором определены развертываемые модули, способ передачи данных между этими модулями и требуемые свойства для двойников модулей. Портал Azure имеет мастер, который будет просматривать вас, создавая манифест развертывания, вместо того, чтобы создавать документ JSON вручную.  В этом мастере есть три шага: **Добавление модулей**, **Указание маршрутов** и **Просмотр развертываний**.

### <a name="add-modules"></a>Добавление модулей

1. В разделе **Модули развертывания** выберите **Добавить**
1. Из типов модулей в списке выпадающих выбросов выберите **модуль IoT Edge**
1. Предоставьте имя, изображение, контейнер создать варианты контейнера:

[!INCLUDE [event-grid-edge-module-version-update](event-grid-edge-module-version-update.md)]

   * **Имя**: eventgridmodule
   * **Изображение URI**:`mcr.microsoft.com/azure-event-grid/iotedge:latest`
   * **Параметры создания контейнера.**

    ```json
        {
          "Env": [
            "inbound__clientAuth:clientCert__enabled=false",
            "outbound__webhook__httpsOnly=false"
          ],
          "HostConfig": {
            "PortBindings": {
              "4438/tcp": [
                {
                  "HostPort": "4438"
                }
              ]
            }
          }
        }
    ```

 1. Нажмите кнопку **Сохранить**.
 1. Нажмите **далее,** чтобы продолжить раздел маршрутов

    > [!NOTE]
    > Если вы используете Azure VM в качестве устройства края, добавьте правило входящего порта, чтобы разрешить входящий трафик в порту 4438. Для получения инструкций по добавлению правила, смотрите [Как открыть порты для VM](../articles/virtual-machines/windows/nsg-quickstart-portal.md).


### <a name="setup-routes"></a>Маршруты настройки

 Сохранить маршруты по умолчанию и выбрать **Далее,** чтобы продолжить раздел обзора

### <a name="review-deployment"></a>Проверка развертывания

1. В разделе обзорной информации вы увидите манифест развертывания в формате JSON, который был создан на основе параметров, выбранных вами в двух предыдущих разделах. Подтвердите, что вы видите два модуля в списке: **$edgeAgent** и **$edgeHub.** Эти два модуля составляют среду выполнения IoT Edge и являются обязательными для каждого развертывания.
1. Просмотрите сведения о развертывании, а затем выберите **Отправить**.

### <a name="verify-your-deployment"></a>Проверка развертывания

1. Сразу после отправки развертывания можно вернуться на страницу IoT Edge Центра Интернета вещей.
1. Выберите **устройство IoT Edge,** на которое вы ориентирулись при развертывании, чтобы открыть свои данные.
1. В деталях устройства убедитесь, что модуль Event Grid указан как **указанный в развертывании,** так и **зарегистрированный устройством.**

Запуск модуля на устройстве может занять несколько секунд. Затем информация о нем передается в Центр Интернета вещей. Обновите страницу, чтобы увидеть обновленное состояние.