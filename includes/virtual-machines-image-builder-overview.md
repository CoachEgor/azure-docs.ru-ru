---
author: cynthn
ms.author: cynthn
ms.date: 04/30/2019
ms.topic: include
ms.service: virtual-machines-linux
manager: jeconnoc
ms.openlocfilehash: 55d73b2602a9a862375ca3e72dee4597c1d6f1d6
ms.sourcegitcommit: cf438e4b4e351b64fd0320bf17cc02489e61406a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/08/2019
ms.locfileid: "67659896"
---
Образы стандартизированный виртуальных машин (ВМ) позволяют организациям перенести в облако и обеспечить согласованность в развертываниях. Образы обычно содержат предопределенные параметры безопасности и конфигурации и необходимое программное обеспечение. Настройка собственных образов конвейера требуется время, инфраструктуры и установки, но с Image Builder для виртуальной Машины Azure, просто предоставить простой конфигурации, описывающий изображение, отправить его в службу и изображение построена и распространяется.
 
Image Builder виртуальной Машины Azure (Azure Image Builder) позволяет запустите с Windows или на платформе Linux Azure Marketplace образ, существующие специальные образы или Red Hat Enterprise Linux (RHEL) ISO и начните добавлять свои собственные изменения. Надстраивается над Image Builder [HashiCorp Packer](https://packer.io/), вы также можете импортировать существующие сценарии средства подготовки Packer оболочки. Можно также указать, как бы вы хотели свои образы, размещенные в [коллекции образов Azure Shared](https://docs.microsoft.com/azure/virtual-machines/windows/shared-image-galleries), как управляемый образ или виртуальный жесткий ДИСК.

> [!IMPORTANT]
> Azure Image Builder в настоящее время находится в общедоступной предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для использования рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="preview-features"></a>Функции предварительной версии

Для предварительной версии эти функции поддерживаются:

- Создание образов золотой, включающий минимальный уровень безопасности и корпоративным конфигураций и разрешить отделов для его дальнейшей настройки для решения своих задач.
- Исправление существующих изображений Image Builder позволит вам постоянно исправления существующих пользовательских образов.
- Благодаря интеграции с помощью коллекции образов Azure Shared, вы можете распространять, версии, и масштабирования изображений глобально, а также предоставляет систему управления изображения.
- Интеграция с существующего образа создавать конвейеры, просто вызовите Image Builder из конвейера и используйте простой Предварительная версия образа построитель Azure DevOps задачу.
- Перенос существующего конвейера настройки образа в Azure. Используйте существующие сценарии, команды и процессов для настройки образов.
- Используйте поддержку Red Hat использование собственной подписки. Создание образов Red Hat Enterprise для использования с помощью соответствующих, неиспользуемые подписки Red Hat.
- Создание образов в формате VHD.
 

## <a name="regions"></a>Регионы
Построитель служба образов в Azure будет доступна для предварительного просмотра в этих регионах. Образы могут распространяться за пределами этих регионов.
- East US
- Восток США 2
- Западно-центральная часть США
- Запад США
- Западный регион США 2

## <a name="os-support"></a>Поддержка ОС
AIB поддерживают базовые образы Azure Marketplace:
- Ubuntu 18.04
- Ubuntu 16.04
- RHEL 7.6
- CentOS 7.6
- Windows 2016
- Windows 2019

AIB будет поддерживать RHEL организации ISO, в качестве источника для:
- RHEL 7.3
- RHEL 7.4
- RHEL 7.5

Образы RHEL 7.6 ISO не поддерживаются, но также проходят проверку.

## <a name="how-it-works"></a>Принцип работы


![Схема Azure Image Builder](./media/virtual-machines-image-builder-overview/image-builder.png)

Azure Image Builder — это полностью управляемая служба Azure, доступном поставщика ресурсов Azure. Процесс Azure Image Builder состоит из трех основных частей: источника, настройки и распространения, они представлены в шаблоне. На следующей схеме показаны компоненты, с помощью некоторых их свойств. 
 


**Построитель образа** 

![Схема процесса Azure Image Builder](./media/virtual-machines-image-builder-overview/image-builder-process.png)

1. Создайте шаблон с образом как JSON-файл. Этот JSON-файл содержит сведения о источник изображения, настройки и распространения. Существует несколько примеров в [репозитории Azure GitHub построитель изображение](https://github.com/danielsollondon/azvmimagebuilder/tree/master/quickquickstarts).
1. Отправить его в службу, это создаст образ шаблона артефакта в группе ресурсов, которые вы указали. В фоновом режиме Image Builder загружается исходное изображение или ISO и сценарии, при необходимости. Эти значения хранятся в отдельной группе ресурсов, автоматически создаваемого в вашей подписке, в формате: IT_\<DestinationResourceGroup > _\<TemplateName >. 
1. После создания шаблона образа вы можете встроить изображение. В фоновом режиме Image Builder использует шаблон и исходные файлы для создания виртуальной Машины, сети и хранилища в IT_\<DestinationResourceGroup > _\<TemplateName > группы ресурсов.
1. В процессе создания образа, Image builder распространяет этот образ в соответствии с шаблоном, затем удаляется дополнительные ресурсы в IT_\<DestinationResourceGroup > _\<TemplateName > группы ресурсов, которая была создана для процесс.


## <a name="permissions"></a>Разрешения

Чтобы разрешить Azure VM Image Builder для распространения образов, чтобы управляемые образы или к коллекции образов Shared, необходимо предоставить разрешения «Участник» для службы «Построитель образ виртуальной машины Azure» (идентификатор приложения: cf32a0cc-373c-47c9-9156-0db11f6a6dfc ) в группах ресурсов. 

При использовании существующего пользовательского управляемого образа или версию образа, Azure Image Builder потребуется как минимум «Читатель» доступ к группам ресурсов.

Можно назначить доступ с помощью Azure CLI:

```azurecli-interactive
az role assignment create \
    --assignee cf32a0cc-373c-47c9-9156-0db11f6a6dfc \
    --role Contributor \
    --scope /subscriptions/$subscriptionID/resourceGroups/<distributeResoureGroupName>
```

Если учетная запись службы не найден, это может означать, что подписки, где вы добавляете назначение ролей не еще зарегистрирована для поставщика ресурсов.


## <a name="costs"></a>Затраты
Вы будете оплачивать некоторые вычисления, сети и затраты на хранение при создании, создания и хранения изображений с помощью Azure Image Builder. Эти затраты похожи на затраты ручного создания пользовательских образов. Для ресурсов будет взиматься плата по ставкам в Azure. 

Во время процесса создания образа, файлы загружаются и хранятся в `IT_<DestinationResourceGroup>_<TemplateName>` группу ресурсов, которая связана с расходами небольшой хранилища. f, вы не хотите сохранить эти, удалите образ шаблона после сборки образа.
 
Image Builder создает виртуальную Машину, используя размер виртуальной Машины D1v2 и хранилища и сети, необходимые для виртуальной Машины. Эти ресурсы будут продолжаться в течение всего процесса построения и будут удалены после завершения создания образа Image Builder. 
 
Azure Image Builder будет распространять образ в вашей выбранных региона, в которых может взиматься плата за исходящий трафик сети.
 
## <a name="next-steps"></a>Следующие шаги 
 
Чтобы опробовать Azure Image Builder, см. в статьях, для построения [Linux](../articles/virtual-machines/linux/image-builder.md) или [Windows](../articles/virtual-machines/windows/image-builder.md) изображения.
 
 
