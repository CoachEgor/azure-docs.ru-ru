---
title: включение файла
description: включение файла
author: jonels-msft
ms.service: postgresql
ms.subservice: hyperscale-citus
ms.topic: include
ms.date: 09/12/2019
ms.author: jonels
ms.custom: include file
ms.openlocfilehash: e7a6f7b4ba4219483cd3eb8f4600bc94213df131
ms.sourcegitcommit: 5ab4f7a81d04a58f235071240718dfae3f1b370b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2019
ms.locfileid: "74973426"
---
Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портале Azure](https://portal.azure.com).

## <a name="create-an-azure-database-for-postgresql---hyperscale-citus"></a>Создание базы данных Azure для PostgreSQL. Гипермасштабирование (Citus)

Чтобы создать базу данных Azure для сервера PostgreSQL, сделайте следующее:
1. Щелкните **Создать ресурс** в верхнем левом углу окна портала Azure.
2. На странице **создания** выберите **Базы данных**, а на странице **Базы данных** щелкните **Azure Database for PostgreSQL** (База данных Azure для PostgreSQL).
3. Чтобы выполнить развертывание, нажмите кнопку **Создать** в разделе **Группа серверов с гипермасштабированием (Citus)** .
4. Заполните форму для создания сервера, указав следующую информацию:
   - Под текстовым полем в разделе "Группа ресурсов" щелкните ссылку **Создать**. Присвойте группе ресурсов имя, например **myresourcegroup**.
   - Имя группы серверов. Введите уникальное имя для новой группы серверов, которое будет использоваться и для поддомена сервера.
   - Имя пользователя администратора: в настоящее время должно использоваться значение **citus**, и изменить его нельзя.
   - Пароль. Должен содержать минимум восемь символов из таких трех категорий: латинские прописные и строчные буквы, цифры (0–9) и другие символы (!, $, #, % и т. д.).
   - Расположение. Задайте ближайшее к пользователям расположение, чтобы предоставить им максимально быстрый доступ к данным.

   > [!IMPORTANT]
   > Указанный здесь пароль администратора сервера необходим, чтобы войти на сервер и в его базу данных. Запомните или запишите эту информацию для последующего использования.

5. Щелкните **Настройка группы серверов**. Не изменяйте настройки в этом разделе и щелкните **Сохранить**.
6. Щелкните **Далее: Сеть >** в нижней части экрана.

7. На вкладке **Сеть** щелкните переключатель **Общедоступная конечная точка**.
   ![Выбранная общедоступная конечная точка](./media/azure-postgresql-hyperscale-create-db/network-public-endpoint.png)
8. Щелкните ссылку **+ Добавить текущий IP-адрес клиента**.
   ![Добавленный IP-адрес клиента](./media/azure-postgresql-hyperscale-create-db/network-add-client-ip.png)

   > [!NOTE]
   > Сервер PostgreSQL Azure обменивается данными через порт 5432. Если вы пытаетесь подключиться из корпоративной сети, исходящий трафик через порт 5432 может быть запрещен сетевым брандмауэром. В таком случае вы не сможете подключиться к кластеру Hyperscale (Citus), пока ваш ИТ-отдел не откроет порт 5432.
   >

9. Щелкните **Просмотр и создание**, а затем — **Создать**, чтобы подготовить сервер к работе. Подготовка занимает несколько минут.
10. Произойдет переход на страницу отслеживания развертывания. Когда состояние изменится с **Развертывание выполняется** на **Развертывание выполнено**, щелкните пункт меню **Выходные данные** в левой части страницы.
11. На странице выходных данных будет указано имя узла-координатора, кнопка рядом с которым позволяет скопировать это значение в буфер обмена. Сохраните эту информацию на будущее.

## <a name="connect-to-the-database-using-psql"></a>Подключение к базе данных с помощью psql

При создании базы данных Azure для сервера PostgreSQL создается база данных по умолчанию с именем **citus**. Чтобы подключиться к серверу базы данных, требуется строка подключения и пароль администратора.

1. Получите строку подключения. На странице группы серверов щелкните пункт меню **Строки подключения** (в разделе **Параметры**). Найдите строку, помеченную **psql**. Значение будет представлено в формате:

   ```
   psql "host=hostname.postgres.database.azure.com port=5432 dbname=citus user=citus password={your_password} sslmode=require"
   ```

   Скопируйте строку. При этом потребуется заменить "{your\_password}" выбранным ранее паролем администратора. Система не хранит ваш пароль в виде открытого текста и поэтому не отображает его автоматически в строке подключения.

2. Откройте окно терминала на локальном компьютере.

3. Подключитесь к базе данных Azure для сервера PostgreSQL с помощью служебной программы [psql](https://www.postgresql.org/docs/current/app-psql.html). Передайте строку подключения в кавычках, предварительно убедившись, что она содержит пароль:
   ```bash
   psql "host=..."
   ```

   Например, следующая команда устанавливает подключение к узлу-координатору группы серверов **mydemoserver**:

   ```bash
   psql "host=mydemoserver-c.postgres.database.azure.com port=5432 dbname=citus user=citus password={your_password} sslmode=require"
   ```
