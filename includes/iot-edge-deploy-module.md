---
title: включить файл
description: включить файл
services: iot-edge
author: kgremban
ms.service: iot-edge
ms.topic: include
ms.date: 12/31/2019
ms.author: kgremban
ms.custom: include file
ms.openlocfilehash: abbde0cb8137650faad563248c8fafe7dc0f469a
ms.sourcegitcommit: 5925df3bcc362c8463b76af3f57c254148ac63e3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/31/2019
ms.locfileid: "75564694"
---
Одной из ключевых возможностей Azure IoT Edge является развертывание кода на устройствах IoT Edge из облака. **Модули IoT Edge** — это выполняемые пакеты, которые реализованы в виде контейнеров. В этом разделе будет развернут предварительно созданный модуль из раздела [Модули IoT Edge в Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/category/internet-of-things?page=1&subcategories=iot-edge-modules) непосредственно из Центра Интернета вещей Azure.

Модуль, который будет развернут в этом разделе, имитирует поведение датчика и отправляет сгенерированные данные. Данный модуль является требуемой частью кода для начала работы с IoT Edge, так как сгенерированные данные вы можете использовать для разработки и тестирования. Если требуется увидеть полный функционал модуля, см. имитированный исходный код датчика температуры [здесь](https://github.com/Azure/iotedge/blob/027a509549a248647ed41ca7fe1dc508771c8123/edge-modules/SimulatedTemperatureSensor/src/Program.cs).

Выполните следующие шаги, чтобы развернуть первый модуль из Azure Marketplace.

1. Войдите на [портал Azure](https://portal.azure.com) и перейдите к своему Центру Интернета вещей.

1. В меню слева в разделе **Автоматическое управление устройствами** выберите **IoT Edge**.

1. Щелкните удостоверение целевого устройства в списке устройств.

1. На верхней панели выберите **Задание модулей**.

1. В разделе **Модули IoT Edge** на этой странице щелкните **Добавить**.

1. В раскрывающемся меню выберите **Модуль в Marketplace**.

   ![Имитированный датчик температуры в результатах поиска на портале Azure](./media/iot-edge-deploy-module/search-for-temperature-sensor.png)

1. В разделе **Модуль IoT Edge в Marketplace** выполните поиск по запросу "Имитированный датчик температуры" и выберите этот модуль.

1. Обратите внимание, что модуль SimulatedTemperatureSensor заполняется автоматически. Чтобы добавить дополнительные модули в развертывание, в руководствах используется эта страница. Для этого руководства необходимо развернуть этот модуль. Учетные данные не требуются, так как он общедоступный.

   ![Настройка модулей на устройстве](./media/iot-edge-deploy-module/set-modules-on-device.png)

   По завершении выберите **Next: Routes** (Далее: маршруты), чтобы перейти к следующему шагу в мастере.

1. На вкладке **Маршруты** мастера вы определите способ передачи сообщений между модулями и Центром Интернета вещей. Сообщения создаются с использованием пар "имя — значение". Для руководства необходимо, чтобы все сообщения со всех модулей отправлялись в Центр Интернета вещей (`$upstream`). Если этот способ не заполняется автоматически, добавьте следующий код для **значения** **имени** `upstream`:

   ```sql
    FROM /messages/* INTO $upstream
   ```

   По завершении выберите **Next: Review + create** (Далее: просмотр и создание), чтобы перейти к следующему шагу мастера.

1. На вкладке **Просмотр и создание** мастера можно просмотреть файл JSON, определяющий все модули, которые развернуты на устройстве IoT Edge. Обратите внимание, что модуль **SimulatedTemperatureSensor** и два дополнительных системных модуля **edgeAgent** и **edgeHub** включены. После завершения просмотра выберите **Создать**.

   После отправки нового развертывания на устройство IoT Edge на ваше устройство ничего оправляться не будет. Вместо этого устройство регулярно выполняет запрос к Центру Интернета вещей для получения новых сведений. Если устройство обнаруживает обновленный манифест развертывания, оно использует информацию о новом развертывании для получения образов модуля с облака с последующим локальным запуском модулей. Это может занять несколько минут.

1. После создания сведений о развертывании модуля мастер вернет вас на страницу **IoT Edge** Центра Интернета вещей. Чтобы просмотреть сведения об устройстве, выберите его из списка устройств IoT Edge.

1. На странице сведений об устройстве прокрутите вниз до вкладки **Модули**. В этом разделе должны быть указаны три модуля: $edgeAgent, $edgeHub и SimulatedTemperatureSensor. Если один или несколько модулей указаны в списке, как указано при развертывании, но не указаны устройством, то ваше устройство IoT Edge все еще запускает их. Подождите несколько секунд, а затем в верхней части страницы выберите **Обновить**.

   ![Просмотр SimulatedTemperatureSensor в списке развернутых модулей](./media/iot-edge-deploy-module/deployed-modules-marketplace.png)
