---
title: включить файл
description: включить файл
services: iot-accelerators
author: avneet723
ms.service: iot-accelerators
ms.topic: include
ms.date: 01/17/2019
ms.author: avneet723
ms.custom: include file
ms.openlocfilehash: 1f567b3d083853f9bb342bfad462e8545caa6480
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "67185720"
---
## <a name="download-the-source-code"></a>Скачивание исходного кода

Репозиторий исходного кода для удаленного мониторинга включает в себе исходный код и файлы конфигурации Docker, необходимые для запуска образов Docker микрослужб.

Чтобы клонировать и создать локальную версию репозитория, используйте среду командной строки для перехода в подходящую папку на локальном компьютере. Затем запустите один из следующих наборов, чтобы клонировать репозиторий .NET.

Чтобы загрузить последнюю версию реализаций микрослужбы .NET, выполните:

```cmd/sh
git clone --recurse-submodules https://github.com/Azure/azure-iot-pcs-remote-monitoring-dotnet.git

# To retrieve the latest submodules, run the following command:

cd azure-iot-pcs-remote-monitoring-dotnet
git submodule foreach git pull origin master
```

> [!NOTE]
> Эти команды загружают исходный код для всех микрослужб в дополнение к сценариям, которые используются для локального запуска микрослужб. Хотя для запуска микрослужб в Docker не требуется исходный код, он полезен на случай, если в дальнейшем планируется изменить акселератор решений и протестировать изменения локально.

## <a name="deploy-the-azure-services"></a>Развертывание служб Azure

Несмотря на то что в этой статье показано, как запускать микрослужбы локально, они зависят от служб Azure, выполняемых в облаке. Воспользуйтесь приведенным ниже скриптом для развертывания служб Azure. В следующих примерах сценария предполагается, что вы используете репозиторий .NET на компьютере Windows. Если вы работаете в другой среде, измените пути, расширения файлов и разделители путей соответствующим образом.

### <a name="create-new-azure-resources"></a>Создание ресурсов Azure

Если вы еще не создали необходимые ресурсы Azure, выполните следующие действия:

1. В среде командной строки перейдите в папку**\services\scripts\local\launch** в копии репозитория.

1. Выполните следующие команды для установки инструмента CLI **pcs** и войдите в вашу учетную запись Azure.

    ```cmd
    npm install -g iot-solutions
    pcs login
    ```

1. Запустите скрипт **start.cmd**. Скрипт запрашивает следующие сведения:
   * имя решения;
   * Подписка Azure, которую нужно использовать.
   * расположение центра обработки данных Azure, который будет использоваться.

     Сценарий создает в Azure группу ресурсов с именем решения. Эта группа содержит ресурсы Azure, которые использует акселератор решений. Если соответствующие ресурсы больше не нужны, группу ресурсов можно удалить.

     Скрипт также добавляет набор переменных среды с префиксом **PCS** на ваш локальный компьютер. Эти переменные среды предоставляют подробную информацию для удаленного мониторинга, чтобы иметь возможность читать с ресурса Azure Key Vault. Этот ресурс Key Vault — это место, откуда удаленный мониторинг будет считывать значения конфигурации.

     > [!TIP]
     > Когда сценарий завершается, он также сохраняет переменные среды для файла, называемого ** \<вашей домашней папки\>\\\\\<.pcs имя\>решения .env**. Вы можете использовать их для будущих развертываний акселераторов решений. Обратите внимание, что при запуске **docker-compose** набор переменных среды на вашем компьютере переопределяет значения в файле **services\\scripts\\local\\.env**.

1. Выйдете из среды командной строки.

### <a name="use-existing-azure-resources"></a>Использование существующих ресурсов Azure

Если необходимые ресурсы Azure уже существуют, создайте соответствующие переменные среды на вашем компьютере.
Установите переменные среды для следующих:
* **PCS_KEYVAULT_NAME** - Название ресурса Azure Key Vault
* **PCS_AAD_APPID** - Идентификатор приложения AAD
* **PCS_AAD_APPSECRET** - Секрет приложения AAD

Значения конфигурации будут читаться с этого ресурса Azure Key Vault. Эти переменные среды могут быть сохранены в ** \<названии\>\\\\\<\>решения .pcs домашней папки .env** из файла развертывания. Обратите внимание, что при запуске **docker-compose** набор переменных среды на вашем компьютере переопределяет значения в файле **services\\scripts\\local\\.env**.

Часть конфигурации, необходимой микрослужбе, хранится в экземпляре **Key Vault,** который был создан при первоначальном развертывании. Соответствующие переменные в keyvault должны быть изменены по мере необходимости.