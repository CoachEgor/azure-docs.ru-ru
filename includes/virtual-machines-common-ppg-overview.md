---
title: включение файла
description: включение файла
services: virtual-machines
author: cynthn
ms.service: virtual-machines
ms.topic: include
ms.date: 10/30/2019
ms.author: zivr
ms.custom: include file
ms.openlocfilehash: 3215f5952daef053c94432bc8fdef15e1775047a
ms.sourcegitcommit: 98ce5583e376943aaa9773bf8efe0b324a55e58c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73171101"
---
Размещение виртуальных машин в одном регионе сокращает физическое расстояние между экземплярами. Поместив их в одну зону доступности, вы также объедините их физически ближе друг к другу. Тем не менее, по мере роста объема Azure одна зона доступности может охватывать несколько физических центров обработки данных, что может привести к задержке в сети, влияющей на приложение. 

Чтобы виртуальные машины максимально близки к максимально возможной задержке, следует развернуть их в группе размещения с учетом расположения.

Группа размещения с учетом расположения — это логическая группировка, используемая для того, чтобы ресурсы вычислений Azure физически размещались близко друг к другу. Группы размещения с учетом расположения удобны для рабочих нагрузок, где требуется низкая задержка.


- Низкая задержка между автономными виртуальными машинами.
- Низкая задержка между виртуальными машинами в одной группе доступности или масштабируемом наборе виртуальных машин. 
- Низкая задержка между автономными виртуальными машинами, виртуальными машинами из нескольких групп доступности или несколькими масштабируемыми наборами. Можно использовать несколько ресурсов вычислений в одной группе размещения для объединения многоуровневого приложения. 
- Низкая задержка между несколькими уровнями приложения с использованием различных типов оборудования. Например, запуск серверной части с помощью серии M в группе доступности и внешнего интерфейса в экземпляре серии D в масштабируемом наборе в одной из групп размещения с близкой назначением.


![Рисунок для групп размещения с близкой нарядом](./media/virtual-machines-common-ppg/ppg.png)

## <a name="using-proximity-placement-groups"></a>Использование групп размещения с учетом расположения 

Группа размещения с близкой назначением — это новый тип ресурса в Azure. Необходимо создать его, прежде чем использовать его с другими ресурсами. После создания его можно использовать с виртуальными машинами, группами доступности или масштабируемыми наборами виртуальных машин. Группа размещения с учетом расположения указывается при создании ресурсов вычислений, предоставляющих идентификатор группы размещения близости. 

Можно также переместить существующий ресурс в группу размещения с учетом расположения. При перемещении ресурса в группу размещения с учетом расположения необходимо сначала отменить (освободить) ресурс-контейнер, так как он будет повторно развернут в другом центре обработки данных в регионе, что соответствует ограничению совместного размещения. 

В случае групп доступности и масштабируемых наборов виртуальных машин следует задать группу размещения с учетом расположения на уровне ресурсов, а не на отдельных виртуальных машинах. 

Группа размещения с близкой назначением является ограничением совместного размещения, а не механизмом закрепления. Он закреплен в определенном центре обработки данных с развертыванием первого ресурса для его использования. После того как все ресурсы, использующие группу размещения с учетом расположения, были остановлены (освобождены) или удалены, они больше не фиксируются. Поэтому при использовании группы размещения с несколькими виртуальными машинами важно указать все требуемые типы в начале шаблона, если это возможно, или следовать последовательности развертывания, что повысит вероятность успешного развертывания. В случае сбоя развертывания перезапустите развертывание с размером виртуальной машины, который завершился сбоем в качестве первого развернутого размера.


## <a name="best-practices"></a>Рекомендации 
- Для наименьшей задержки используйте группы размещения близкого взаимодействия с ускоренной сетью. Дополнительные сведения см. в статьях [Создание виртуальной машины Linux с ускоренной сетью](https://docs.microsoft.com/azure/virtual-network/create-vm-accelerated-networking-cli?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) или [Создание виртуальной машины Windows с ускоренной сетью](/azure/virtual-network/create-vm-accelerated-networking-powershell?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).
- Развертывание всех размеров виртуальных машин в одном шаблоне. Чтобы избежать размещения на оборудовании, которое не поддерживает все требуемые номера SKU и размеры виртуальных машин, включите все уровни приложения в один шаблон, чтобы все они были развернуты одновременно.
- Если вы задаете скрипты развертывания с помощью PowerShell, CLI или пакета SDK, может возникнуть ошибка выделения памяти `OverconstrainedAllocationRequest`. В этом случае следует отменить или освободить все существующие виртуальные машины, а также изменить последовательность в скрипте развертывания, чтобы она начиналась с номера SKU или размеров виртуальной машины, для которых произошел сбой. 
- При повторном использовании существующей группы размещения, из которой были удалены виртуальные машины, дождитесь полного завершения удаления, прежде чем добавлять в него виртуальные машины.
- Если задержка является первым приоритетом, помещайте виртуальные машины в группу размещения с учетом расположения и все решение в зоне доступности. Но если устойчивость является высшим приоритетом, распространение экземпляров между несколькими зонами доступности (одна группа размещения с одинаковым размещением не может охватывать зоны).