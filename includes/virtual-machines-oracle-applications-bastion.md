---
author: dlepow
ms.service: virtual-machines-linux
ms.topic: include
ms.date: 07/10/2019
ms.author: danlep
ms.openlocfilehash: 35f506235f698fbcf42308e6f0b0f400e925df29
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "68361548"
---
### <a name="bastion-tier"></a>Уровень бастиона

Устус бастиона является дополнительным компонентом, который можно использовать в качестве сервера для доступа к приложениям и экземплярам базы данных. Универсатор VM может иметь общедоступный IP-адрес, назначенный ему, хотя рекомендация состоит в том, чтобы настроить соединение ExpressRoute или VPN с вашей сетью для безопасного доступа. Кроме того, для входящего трафика должны быть открыты только SSH (порт 22, Linux) или RDP (порт 3389, Windows Server). Для высокой доступности разместите универсатор бастиона в двух зонах доступности или в одном наборе доступности.

Вы также можете включить SSH агент пересылки на ваши виртуальные, что позволяет получить доступ к другим виртуальным в виртуальной сети путем пересылки учетных данных от вашего бастиона хоста. Или используйте sSH туннелирование для доступа к другим экземплярам.

Вот пример переадресировки агента:

```
ssh -A -t user@BASTION_SERVER_IP ssh -A root@TARGET_SERVER_IP`
```

Эта команда подключается к бастиону, а затем сразу же запускается `ssh` снова, так что вы получите терминал на целевом экземпляре. Возможно, потребуется указать пользователя, кроме корня в целевом экземпляре, если кластер настроен по-разному. Аргумент `-A` перенаправляет соединение агента, поэтому ваш личный ключ на локальной машине используется автоматически. Обратите внимание, что переадресировка `ssh` агента — `-A` это цепочка, поэтому вторая команда также включает в себя так, чтобы любые последующие соединения SSH, инициированные из целевого экземпляра, также использовали локальный закрытый ключ.