---
author: tamram
ms.service: storage
ms.topic: include
ms.date: 10/26/2018
ms.author: tamram
ms.openlocfilehash: 59adee2f1d6a99a0a984b9b63c7201266b6381d4
ms.sourcegitcommit: beb34addde46583b6d30c2872478872552af30a1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/22/2019
ms.locfileid: "69984558"
---
Изменения, внесенные в общий файловый ресурс Azure с использованием портала Azure или SMB, сразу не обнаруживаются и не реплицируются, как изменения в конечной точке сервера. В службе файлов Azure пока не предусмотрена возможность уведомлений об изменениях или ведение журнала изменений, поэтому автоматически инициировать сеанс синхронизации при изменении файлов невозможно. На Windows Server служба "Синхронизация файлов Azure" использует [ведение журнала номеров последовательного обновления Windows](https://msdn.microsoft.com/library/windows/desktop/aa363798.aspx) для автоматического запуска сеанса синхронизации при изменении файлов.

Для обнаружения изменений в общем файловом ресурсе Azure служба "Синхронизация файлов Azure" использует запланированное задание с именем *change detection job* (задание обнаружения изменений). Это задание перечисляет все файлы в общем файловом ресурсе и затем сравнивает их с синхронизированными версиями этих же файлов. Если задание обнаруживает, что файлы изменились, служба "Синхронизация файлов Azure" инициирует сеанс синхронизации. Задание обнаружения изменений инициируется каждые 24 часа. Так как задание обнаружения изменений перечисляет все файлы в общем файловом ресурсе Azure, на обнаружение изменений в крупном пространстве имен уходит больше времени, чем в небольшом пространстве. В крупных пространствах обнаружение измененных файлов может длиться больше суток.

Для немедленной синхронизации файлов, измененных в общем файловом ресурсе Azure, можно использовать командлет PowerShell **Invoke-азсторажесинкчанжедетектион** , чтобы вручную инициировать обнаружение изменений в файловом ресурсе Azure. Этот командлет предназначен для сценариев, в которых некоторый тип автоматизированного процесса вносит изменения в общую папку Azure, или изменения выполняются администратором (например, перемещение файлов и каталогов в общую папку). Для изменения конечных пользователей рекомендуется установить агент Синхронизация файлов Azure на виртуальной машине IaaS и предоставить конечным пользователям доступ к общей папке через виртуальную машину IaaS. Таким образом, все изменения будут быстро синхронизироваться с другими агентами без необходимости использовать командлет Invoke-Азсторажесинкчанжедетектион. Дополнительные сведения см. в документации по [Invoke-азсторажесинкчанжедетектион](https://docs.microsoft.com/powershell/module/az.storagesync/invoke-azstoragesyncchangedetection) .

>[!NOTE]
>Изменения, внесенные в файловый ресурс Azure с помощью функции "ОСТАВШАЯся", не обновляют время последнего изменения SMB и не будут рассматриваться как изменения при синхронизации.

Мы рассматриваем возможность добавления функции обнаружения изменений для общего файлового ресурса Azure, которая будет работать аналогично функции USN для томов в Windows Server. Проголосуйте за эту возможность на портале [UserVoice службы файлов Azure](https://feedback.azure.com/forums/217298-storage/category/180670-files), и мы сможем уделить дополнительное внимание ее разработке в будущем.
