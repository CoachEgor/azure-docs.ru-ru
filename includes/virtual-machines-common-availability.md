---
title: включить файл
description: включить файл
services: virtual-machines
author: cynthn
ms.service: virtual-machines
ms.topic: include
ms.date: 11/04/2019
ms.author: cynthn
ms.custom: include file
ms.openlocfilehash: 4860dcac666f790fed199536338e50a967113c20
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2020
ms.locfileid: "76748936"
---
В этой статье представлен обзор возможностей доступности виртуальных машин Azure (VM).

## <a name="high-availability"></a>Высокий уровень доступности

Рабочие нагрузки обычно распределяются по различным виртуальным машинам, чтобы получить высокую пропускную способность, производительность и создать избыточность в случае воздействия VM из-за обновления или другого события. 

Есть несколько вариантов, которые Azure предоставляет для достижения высокой доступности. Сначала давайте поговорим об основных конструкциях. 

### <a name="availability-zones"></a>Зоны доступности

[Зоны доступности](../articles/availability-zones/az-overview.md) расширяют уровень контроля, который необходимо поддерживать доступность приложений и данных на ваших ВМ. Зона доступности является физически отдельной зоной в пределах региона Azure. В каждом поддерживаемом регионе Azure есть три зоны доступности. 

У каждой зоны доступности есть отдельный источник питания, сеть и система охлаждения. Вы можете защитить приложения и данные от потери в центре обработки данных, настроив свои решения для использования реплицированных виртуальных машин в зонах доступности. В случае неполадок с одной зоной реплицированные приложения и данные сразу же станут доступными в другой зоне. 

![Зоны доступности](./media/virtual-machines-common-regions-and-availability/three-zones-per-region.png)

См. дополнительные сведения о развертывании виртуальных машин [Windows](../articles/virtual-machines/windows/create-powershell-availability-zone.md) или [Linux](../articles/virtual-machines/linux/create-cli-availability-zone.md) в зонах доступности.


### <a name="fault-domains"></a>Домены сбоя

Домен сбоя — это логическая группа базового оборудования, которое совместно использует общий источник питания и сетевой коммутатор, аналогично стойке в локальном центре обработки данных. 

### <a name="update-domains"></a>Домены обновления

Домен обновления — это логическая группа базового оборудования, которое может одновременно обслуживаться или перезагружаться. 

Такой подход гарантирует, что по крайней мере один экземпляр приложения будет работать во время периодического обслуживания платформы Azure. Порядок перезагрузки доменов обновления не может осуществляться последовательно во время обслуживания, но перезагружается только один домен обновления.


## <a name="virtual-machines-scale-sets"></a>Наборы масштабирования виртуальных машин. 

Наборы виртуальных машин Azure позволяют создавать и управлять группой сбалансированных виртуальных виртуальных технологий. Число экземпляров виртуальных машин может автоматически увеличиваться или уменьшаться в зависимости от спроса или по определенному расписанию. Наборы масштабов обеспечивают высокую доступность приложений и позволяют централизованно управлять, настраивать и обновлять многие вс-ам. Мы рекомендовали, чтобы два или более VMs создавались в рамках набора шкалы, чтобы обеспечить высокодоступное приложение и соответствовать [99,95% Azure SLA.](https://azure.microsoft.com/support/legal/sla/virtual-machines/) Для самого набора масштаба стоимость не обходится, вы платите только за каждый созданный экземпляр VM. Если отдельная виртуальная машина использует [SSD Azure (цен. категория "Премиум")](https://docs.microsoft.com/azure/virtual-machines/windows/disks-types#premium-ssd), соглашение об уровне обслуживания Azure применяется для внеплановых мероприятий обслуживания. Виртуальные машины в наборе масштабов могут быть развернуты в нескольких доменах обновления и доменах неисправностей, чтобы максимизировать доступность и устойчивость к простоям из-за сбоев в центре обработки данных, а также запланированные или незапланированные мероприятия по техническому обслуживанию. Виртуальные машины в наборе масштабов также могут быть развернуты в единой зоне доступности или на региональном уровне. Параметры развертывания зоны доступности могут отличаться в зависимости от режима оркестровки.

### <a name="preview-orchestration-mode-preview"></a>Предварительный просмотр: Режим оркестровки Предварительный просмотр
Наборы масштабов виртуальных машин позволяют указать режим оркестровки.  С режимом оркестровки набора набора виртуальной шкалы (предварительный просмотр) теперь можно выбрать, должен ли набор масштабов организовывать виртуальные машины, которые создаются явно вне модели конфигурации набора масштабов, или виртуальные экземпляры машины, созданные неявно на основе модели конфигурации. Выберите режим оркестровки, который модель vM-оркестровки позволяет группировать явно определенные виртуальные машины вместе в регионе или в зоне доступности. Виртуальные машины, развернутые в зоне доступности, обеспечивают зональную изоляцию виртуальных машин, если они привязаны к границе зоны доступности и не подвержены каким-либо сбоям, которые могут возникнуть в другой зоне доступности в регионе. 

|   | "оркестровка": "VM" (VirtualMachine)| "Оркестрия": "ScalesetVM" (VirtualMachineScaleSetVM) |
|----|----|----|
| Модель конфигурации VM| Нет. VirtualMachineProfile не определен в модели набора масштаба. | Обязательный элемент. VirtualMachineProfile заселен в маштабной модели. |
| Добавление нового VM в набор масштабов| VM явно добавляются к шкале, установленной при создании VM. | ВМ неявно создаются и добавляются в набор масштабов, основанный на модели конфигурации VM, подсчете экземпляров и правилах автоматического масштабирования. |
| зоны доступности;| Поддержка регионального развертывания или ВМ в одной зоне доступности| Поддерживает региональное развертывание или несколько зон доступности; Может определить стратегию балансировки зон |
| Домены сбоя| Можно определить количество доменов неисправностей. 2 или 3 на основе региональной поддержки и 5 для зоны доступности. Назначенный домен свиной VM будет сохраняться с жизненным циклом VM, включая дераспределение и перезагрузку. | Можно определить 1, 2 или 3 домена разлома для незональных развертываний и 5 для развертывания зоны доступности. Назначенный домен неисправности VM не сохраняется с жизненным циклом VM, виртуальным машинам присваивается домен неисправности во время распределения. |
| Домены обновления| Недоступно Обновления доменов автоматически отображаются на доменах неисправностей| Недоступно Обновления доменов автоматически отображаются на доменах неисправностей |

**Неисправности доменов и обновления доменов**

Виртуальные наборы масштабов машин упрощают проектирование для высокой доступности путем выравнивания доменов неисправностей и обновления доменов. Вам нужно будет только определить количество доменов неисправностей для набора масштаба. Количество доменов неисправностей, доступных для наборов масштабов, может варьироваться в зависимости от региона. Смотрите [Управление наличием виртуальных машин в Azure](https://docs.microsoft.com/azure/virtual-machines/windows/manage-availability).


## <a name="availability-sets"></a>Группы доступности
Группа доступности — это логическое объединение виртуальных машин в центре обработки данных, которое позволяет Azure определить структуру вашего приложения, чтобы обеспечить избыточность и доступность. Для обеспечения высокой доступности приложения и достижения показателя [99,95 % уровня обслуживания (SLA) Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines/) мы рекомендуем создать в группе доступности не менее двух виртуальных машин. Группа доступности представляется бесплатно, оплачивается только каждый созданный экземпляр виртуальной машины. Если отдельная виртуальная машина использует [SSD Azure (цен. категория "Премиум")](../articles/virtual-machines/windows/disks-types.md#premium-ssd), соглашение об уровне обслуживания Azure применяется для внеплановых мероприятий обслуживания.

В наборе доступности vMs автоматически распределяются по этим доменам неисправностей. Данный подход ограничивает влияние потенциальных сбоев физического оборудования, сети или электропитания.

При использовании управляемой группы доступности виртуальные машины, использующие [управляемые диски Azure](../articles/virtual-machines/windows/faq-for-disks.md), согласовываются с доменами сбоя управляемого диска. Это гарантирует, что все управляемые диски, подключенные к виртуальной машине, относятся к одному домену сбоя управляемого диска. 

В управляемой группе доступности можно создать только виртуальные машины с управляемыми дисками. Количество доменов сбоя управляемых дисков зависит от региона: два или три на один регион. См. дополнительные сведения о доменах сбоя управляемых дисков для [виртуальных машин Linux](../articles/virtual-machines/linux/manage-availability.md?#use-managed-disks-for-vms-in-an-availability-set) и [виртуальных машин Windows](../articles/virtual-machines/windows/manage-availability.md?#use-managed-disks-for-vms-in-an-availability-set).

![Управляемая группа доступности](./media/virtual-machines-common-manage-availability/md-fd-updated.png)


ВМ в наборе доступности также автоматически распространяются между доменами обновления. 

![Группы доступности](./media/virtual-machines-common-manage-availability/ud-fd-configuration.png)

## <a name="next-steps"></a>Дальнейшие действия
Теперь вы можете использовать функции доступности и избыточности для создания среды Azure. Рекомендации см. в статье [Контрольный список для обеспечения доступности](/azure/architecture/checklist/resiliency-per-service).

